var ye=Object.defineProperty,$e=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var De=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var le=(e,t,a)=>t in e?ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,I=(e,t)=>{for(var a in t||(t={}))De.call(t,a)&&le(e,a,t[a]);if(se)for(var a of se(t))we.call(t,a)&&le(e,a,t[a]);return e},G=(e,t)=>$e(e,be(t));import{r as y,o as x,M as ke,T as Ee,d as ee,m as Ce,n as Se,G as Be,a as N,N as Te,b as J,c as K,e as Ie,f as Ne,g as O,u as re,h as U,i as ue,w as q,j as z,k as p,l as B,p as h,q as v,s as b,t as _,F as L,v as j,x as ie,y as M,z as A,A as R,B as X,C as te,D as H,E as Y,P as Pe,H as Ae,I as ze,J as V,K as ae,L as ce,O as Me,Q as Re,R as Oe,S as Le,U as Ve,V as Ue,W as Ge,X as je,Y as He,Z as Ye,_ as We,$ as Je,a0 as de,a1 as Ke,a2 as qe,a3 as Xe,a4 as Qe,a5 as Ze,a6 as ne,a7 as xe,a8 as et,a9 as tt,aa as at,ab as nt,ac as ot,ad as st,ae as lt,af as rt}from"./vendor.cde6ae88.js";const ut=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=a(s);fetch(s.href,r)}};ut();const it=(e,t)=>{const a=y();return x(()=>{a.value=new ke({container:document.getElementById(t),className:e,type:"delegate",size:[150,150]})}),[a]},ct=e=>{const t=y();return x(()=>{t.value=new Ee({container:document.getElementById(e),offsetX:10,offsetY:10,trigger:"mouseenter",getContent(a){var s,r;const n=(r=(s=a==null?void 0:a.item)==null?void 0:s._cfg)==null?void 0:r.model;if(n){const l=n.path||"none",o=n.name,u='<div style="max-width:200px;word-break: break-all;">',c="</div>",i=`
                    <p>\u6A21\u5757\u540D\u79F0:  ${o}</p>
                    <p>\u8DEF\u5F84:  ${l}</p> 
                    `;let d="";const m=["utime","ctime","fileSize","importTimes"],g={utime:{label:"\u6700\u8FD1\u4FEE\u6539\u65F6\u95F4",getValue(f){return ee(f).format("YYYY-MM-DD")}},ctime:{label:"\u521B\u5EFA\u65F6\u95F4",getValue(f){return ee(f).format("YYYY-MM-DD")}},fileSize:{label:"\u6587\u4EF6\u5927\u5C0F",getValue(f){return`${(Number(f)/1024).toFixed(2)}kb`}},importTimes:{label:"\u88AB\u5F15\u7528\u6B21\u6570",getValue(f){return`${f}`}}};for(const f in n)if(m.includes(f)&&n[f]){const F=g[f].label,C=g[f].getValue(n[f]);d=d+`<p>${F}: ${C}</p>`}return u+i+d+c}return"<h1></h1>"},itemTypes:["node"]})}),[t]},dt=(e,t)=>{var r;const a=[],n={id:t,children:[],name:t},s=e.map((l,o)=>{let u={id:l.path,children:[],name:l.name};return a.includes(l.path)?u.id=l.path+`${o}`:a.push(l.path),u=I(I({},u),l),l.deps.length&&(u.children=l.deps.map((c,i)=>{let d={id:c.path,childen:[],name:c.name};return a.includes(c.path)?d.id=`${Math.random()*10}`+c.path:a.push(c.path),d=I(I({},d),c),d})),u});return s.length&&((r=n==null?void 0:n.children)==null||r.push(...s)),n},pe=(e,t,a)=>{var c,i;let n=I({},e);try{n=JSON.parse(JSON.stringify(e))}catch(d){console.error(d)}const s={};for(let d=0;d<t.length;d++)s[t[d].moduleId]=d;const r=Object.keys(s),l={id:a,name:n.name,path:n.path,isFolder:n.isFolder,children:n.children},o=[];let u=0;for(o.push(l);o.length;){u=u+1;const d=o.pop();if(r.includes(d.moduleId)){const m=s[d.moduleId],g=t[m];d.fileSize=g.fileSize||0,d.ctime=g.ctime,d.mtime=g.utime,d.importTimes=(c=g==null?void 0:g.reference)==null?void 0:c.length,d.isDep=!0}if((i=d==null?void 0:d.children)==null?void 0:i.length)for(let m=0;m<d.children.length;m++){const g=d.children[m];g.id=`${g.path}-${u}`,o.push(g)}else d.id=`${d.path}-${u}`}return l},he=(e,t)=>{var l;let a=I({},e);try{a=JSON.parse(JSON.stringify(e))}catch(o){console.error(o)}const n={id:t,name:a.name,path:a.path,isFolder:a.isFolder,children:a.children},s=[];let r=0;for(s.push(n);s.length;){r=r+1;const o=s.pop();if((l=o==null?void 0:o.children)==null?void 0:l.length){const u=o.children.map(c=>G(I({},c),{id:`${c.path}-${r}`}));s.push(...u)}else o.id=`${o.path}-${r}`}return n},pt=e=>{var s;const t=I({},e),a={name:t.path,path:t.path,key:t.path,label:t.path,children:t.children.filter(r=>r.isFolder).map(r=>G(I({},r),{parent:{name:t.name,path:t.path},key:"",label:""}))},n=[];for(n.push(...a.children);n.length;){const r=n.pop();r.isFolder&&(r.children=r.children.filter(o=>o.isFolder).map(o=>G(I({},o),{parent:{name:r.name,path:r.path},key:"",label:""})),r.children.length?n.push(...r.children):Reflect.deleteProperty(r,"children"));const l=r.path.split((s=r==null?void 0:r.parent)==null?void 0:s.path);r.label=l[l.length-1],r.key=r.path}return[a]},_e=new Map,ht=(e,t)=>{var l;const a=_e.get(e);if(a)return a;const n=t;let s=null;const r=[];for(r.push(n);r.length;){const o=r.pop();if(o.path===e){s=o,_e.set(e,o);break}((l=o.children)==null?void 0:l.length)&&r.push(...o.children)}return s},_t=e=>{const t=Ce({graphIns:null}),a=y(!0),n=y(!0);return{graphRaw:t,initGraph:(r,l)=>{r&&a.value&&Se(()=>{t.graphIns=new Be.TreeGraph({container:e.value,modes:{default:[{type:"collapse-expand",onChange:function(u,c){const i=u.getModel();return i.collapsed=c,!0}},"drag-canvas",{type:"zoom-canvas",enableOptimize:!1}]},defaultNode:{size:26,anchorPoints:[[0,.5],[1,.5]]},defaultEdge:{type:"cubic-horizontal"},plugins:l,layout:{type:"compactBox",direction:"LR",getId:function(u){return u.id},getHeight:function(){return 20},getWidth:function(){return 20},getVGap:function(){return 10},getHGap:function(){return 100}}}),t.graphIns.node(o=>{let u={label:o.name,labelCfg:{offset:10,position:o.children&&o.children.length>0?"left":"right"}};return(o==null?void 0:o.isDep)&&(u=G(I({},u),{style:{shadowBlur:10,fill:"#1a414e",stroke:"black"}})),u}),t.graphIns.on("afterlayout",o=>{a.value=!1,n.value=!1}),t.graphIns.data(r),t.graphIns.render(),t.graphIns.fitView()})},loading:n}};var P=(e,t)=>{const a=e.__vccOpts||e;for(const[n,s]of t)a[n]=s;return a};const ft=N({name:"Graph",components:{NSpin:Te,NRadio:J,NRadioGroup:K,NSwitch:Ie,NTreeSelect:Ne,NSpace:O},setup(){const e=re(),t=y(null),[a]=it("miniMap","miniMap"),[n]=ct("tooltip"),s=y(null),{initGraph:r,graphRaw:l,loading:o}=_t(t),{onFetchResponse:u,data:c}=U(`http://localhost:${window.preloadState.port}/graph`,{method:"GET"}).json();u($=>{$.status===200&&(s.value=he(c.value.tree,c.value.entry),r(s.value,[a.value,n.value]))});const i=ie(($,D)=>{l.graphIns&&(l.graphIns.changeSize($,D),l.graphIns.fitView(20))},100);ue(t,$=>{const D=$[0],{width:E,height:k}=D.contentRect;i(E,k)});const d=y("project"),m=[{label:"\u9879\u76EE\u7ED3\u6784",value:"project"},{label:"\u6A21\u5757\u7ED3\u6784",value:"module"}];q(d,($,D)=>{var E,k,w;$==="project"&&((E=l.graphIns)==null||E.changeData(he(c.value.tree,c.value.entry))),$==="module"&&((k=l.graphIns)==null||k.changeData(dt(c.value.nodes,c.value.entry)),g.value=!1),(w=l.graphIns)==null||w.fitView()});const g=y(!1),S=z(()=>d.value!=="project");q(g,$=>{setTimeout(()=>{var E,k;let D=s.value;$===!0&&(D=pe(D,c.value.deps,c.value.entry)),(E=l.graphIns)==null||E.changeData(D),(k=l.graphIns)==null||k.fitCenter()},300)});const f=y([]),F=y("");return q(s,()=>{s.value&&(f.value=pt(c.value.tree),f.value.length&&(F.value=f.value[0].key))}),{loading:o,graphRef:t,graphType:m,selectGraphType:d,showDeps:g,disableShowDeps:S,dirOpts:f,dirSrc:F,handleChangeDir:($,D)=>{var E;try{if(s.value&&l.graphIns){let k=ht($,s.value);if(k)g.value&&(k=pe(k,c.value.deps,c.value.entry)),l.graphIns.changeData(k),(E=l.graphIns)==null||E.fitView(),F.value=$;else throw new Error}else throw new Error}catch(k){console.log(k),e.error({meta:"\u8B66\u544A",content:"\u65E0\u6CD5\u89E3\u6790\u8BE5\u76EE\u5F55"})}}}}}),mt={class:"graph"},vt={class:"graph-main-wrapper"},gt={class:"graph-tools"},Ft={class:"graph-tools-panel"},yt={class:"graph-tools-panel-item"},$t={class:"graph-tools-panel-item-main"},bt=M(" \u56FE\u7C7B\u578B\uFF1A "),Dt={class:"graph-tools-panel-item-main"},wt=M(" \u5F53\u524D\u76EE\u5F55\uFF1A "),kt={class:"graph-tools-panel-item"},Et=M(" \u4F9D\u8D56\u6807\u8BB0\uFF1A "),Ct={id:"graph-root"},St={class:"graph-container",ref:"graphRef"},Bt=_("div",{id:"miniMap"},null,-1),Tt={id:"tooltip",class:"tooltip-wrap",ref:"tooltipRef"};function It(e,t,a,n,s,r){const l=p("n-radio"),o=p("n-space"),u=p("n-radio-group"),c=p("n-tree-select"),i=p("n-switch"),d=p("n-spin");return b(),B("div",mt,[h(d,{size:"large",show:e.loading},{default:v(()=>[_("div",vt,[_("div",gt,[_("div",Ft,[_("div",yt,[_("div",$t,[bt,h(u,{value:e.selectGraphType,"onUpdate:value":t[0]||(t[0]=m=>e.selectGraphType=m),name:"radiogroup"},{default:v(()=>[h(o,null,{default:v(()=>[(b(!0),B(L,null,j(e.graphType,m=>(b(),A(l,{key:m.value,value:m.value},{default:v(()=>[M(R(m.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_("div",Dt,[wt,h(c,{options:e.dirOpts,"virtual-scroll":"",value:e.dirSrc,"show-path":!0,separator:"","onUpdate:value":e.handleChangeDir},null,8,["options","value","onUpdate:value"])])]),_("div",kt,[Et,h(i,{value:e.showDeps,"onUpdate:value":t[1]||(t[1]=m=>e.showDeps=m),disabled:e.disableShowDeps},null,8,["value","disabled"])])])]),_("div",Ct,[_("div",St,null,512),Bt,_("div",Tt,null,512)])])]),_:1},8,["show"])])}var Nt=P(ft,[["render",It]]);const Pt=e=>{if(!e)return 0+"b";let t=e+"b",a=[e],n=0,s=["B","KB","MB","GB","TB"];for(;a.length;){const r=a.pop(),l=Number(r)/1024;n=n+1,t=l.toFixed(2)+s[n],l>1024&&a.push(l)}return t},oe=()=>{const e=[{label:"\u524D5",value:5},{label:"\u524D10",value:10},{label:"\u524D15",value:15}];return{value:y(e[0].value),limitOptions:e}},Q=(e,t)=>{const a=ie((n,s)=>{e.value&&e.value.changeSize(n,s)});ue(t,n=>{const s=n[0],{width:r,height:l}=s.contentRect;a(r,l)})};const At=N({name:"fileSizeChart",components:{NSpace:O,NRadio:J,NRadioGroup:K,NSelect:X},setup(e,{emit:t}){const a=y(),n=y(),s=y("folder"),r=y({}),l=f=>{if(Number(f)in r.value)return r.value[f];{const F=Pt(f);return r.value[f]=F,F}},o=f=>f.slice(0).sort((F,C)=>C.fileSize-F.fileSize),{value:u,limitOptions:c}=oe(),i=z(()=>`http://localhost:${window.preloadState.port}/chart/size?limit=${u.value}`),{onFetchResponse:d,data:m,isFetching:g}=U(i,{refetch:!0}).json();d(()=>{var F,C,$,D;if(m.value===null)return;const f=s.value==="folder"?m.value.tree:m.value.nodes;n.value?n.value.changeData(o(f)):(n.value=new te(a.value,{data:o(f),width:(C=(F=a.value)==null?void 0:F.offsetWidth)!=null?C:0,height:(D=($=a.value)==null?void 0:$.offsetHeight)!=null?D:0,xField:"fileName",yField:"fileSize",padding:"auto",color:"#a3a3c2",appendPadding:10,tooltip:{showTitle:!0,title:"\u70B9\u51FB\u67F1\u4F53\u4EE5\u67E5\u770B\u6587\u4EF6\u8DEF\u5F84",formatter(E){return{name:"\u6587\u4EF6\u5927\u5C0F",value:`${l(E.fileSize)}`}}}}),n.value.render(),n.value.on("element:click",E=>{var w;const k=E.data;if(k.data){const T=(w=k.data)==null?void 0:w.filePath;t("handleClick",T)}}))}),Q(n,a);const S=[{value:"folder",label:"\u76EE\u5F55"},{value:"module",label:"\u6A21\u5757"}];return q(s,f=>{if(m.value===null)return;const F=f==="folder"?m.value.tree:m.value.nodes;n.value&&n.value.changeData(o(F))}),{chartRef:a,chartTypes:S,chartType:s,limitOptions:c,limit:u}}}),zt=e=>(H("data-v-1e37b4c9"),e=e(),Y(),e),Mt=zt(()=>_("div",{class:"chart-title"},"\u6587\u4EF6\u5927\u5C0F",-1)),Rt={class:"chart-main",id:"size-chart",ref:"chartRef"},Ot={class:"chart-tool"};function Lt(e,t,a,n,s,r){const l=p("n-radio"),o=p("n-space"),u=p("n-radio-group"),c=p("n-select");return b(),B(L,null,[Mt,_("div",Rt,null,512),_("div",Ot,[h(o,null,{default:v(()=>[h(u,{value:e.chartType,"onUpdate:value":t[0]||(t[0]=i=>e.chartType=i),name:""},{default:v(()=>[h(o,null,{default:v(()=>[(b(!0),B(L,null,j(e.chartTypes,i=>(b(),A(l,{key:i.value,value:i.value},{default:v(()=>[M(R(i.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"]),h(c,{size:"small",value:e.limit,"onUpdate:value":t[1]||(t[1]=i=>e.limit=i),options:e.limitOptions},null,8,["value","options"])]),_:1})])],64)}var Vt=P(At,[["render",Lt],["__scopeId","data-v-1e37b4c9"]]);const fe=()=>({value:y("down"),sortOptions:[{label:"\u5347\u5E8F",value:"up"},{label:"\u5012\u5E8F",value:"down"}]});const Ut=N({name:"dependenceChart",components:{NSpace:O,NSelect:X,NRadio:J,NRadioGroup:K},setup(e,{emit:t}){const a=y(),n=y(),{value:s,limitOptions:r}=oe(),{value:l,sortOptions:o}=fe(),u=z(()=>`http://localhost:${window.preloadState.port}/chart/deps?limit=${s.value}&sort=${l.value}`),{onFetchResponse:c,data:i,onFetchError:d}=U(u,{refetch:!0}).json(),m=z(()=>i.value&&i.value.nodes?i.value.nodes:[]);return d(g=>{console.log(g)}),c(()=>{var g,S,f,F;n.value?n.value.changeData(m.value):(n.value=new te(a.value,{data:m.value,width:(S=(g=a.value)==null?void 0:g.offsetWidth)!=null?S:0,height:(F=(f=a.value)==null?void 0:f.offsetHeight)!=null?F:0,xField:"fileName",yField:"depsLength",padding:"auto",color:"#ff4d4d",appendPadding:10,tooltip:{showTitle:!0,title:"\u70B9\u51FB\u67F1\u4F53\u4EE5\u67E5\u770B\u6587\u4EF6\u8DEF\u5F84",formatter(C){return{name:"\u4F9D\u8D56\u6570\u91CF",value:`${C.depsLength}`}}}}),n.value.on("element:click",C=>{var D;const $=C.data;if($.data){const E=(D=$.data)==null?void 0:D.filePath;t("handleClick",E)}}),n.value.render())}),Q(n,a),{chartRef:a,limitOptions:r,limit:s,sortType:l,sortOptions:o}}}),Gt=e=>(H("data-v-a324f3d4"),e=e(),Y(),e),jt=Gt(()=>_("div",{class:"chart-title"},"\u4F9D\u8D56\u6570",-1)),Ht={class:"chart-main",id:"deps-chart",ref:"chartRef"},Yt={class:"chart-tool"};function Wt(e,t,a,n,s,r){const l=p("n-select"),o=p("n-radio"),u=p("n-space"),c=p("n-radio-group");return b(),B(L,null,[jt,_("div",Ht,null,512),_("div",Yt,[h(u,null,{default:v(()=>[h(l,{size:"small",value:e.limit,"onUpdate:value":t[0]||(t[0]=i=>e.limit=i),options:e.limitOptions},null,8,["value","options"]),h(c,{value:e.sortType,"onUpdate:value":t[1]||(t[1]=i=>e.sortType=i),name:"radiogroup"},{default:v(()=>[h(u,null,{default:v(()=>[(b(!0),B(L,null,j(e.sortOptions,i=>(b(),A(o,{key:i.value,value:i.value},{default:v(()=>[M(R(i.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})])],64)}var Jt=P(Ut,[["render",Wt],["__scopeId","data-v-a324f3d4"]]);const Kt=N({name:"referenceChart",components:{NSpace:O,NSelect:X,NRadio:J,NRadioGroup:K},setup(e,{emit:t}){const a=re(),n=y(),s=y(),{value:r,limitOptions:l}=oe(),{value:o,sortOptions:u}=fe(),c=z(()=>`http://localhost:${window.preloadState.port}/chart/reference?limit=${r.value}&sort=${o.value}`),{onFetchResponse:i,data:d,onFetchError:m}=U(c,{refetch:!0}).json(),g=z(()=>d.value&&d.value.nodes?d.value.nodes.map(S=>I({},S)):[]);return m(S=>{console.log(S),a.error({meta:"\u8B66\u544A",content:"\u52A0\u8F7D\u56FE\u8868\u5931\u8D25"})}),i(()=>{var S,f,F,C;s.value?(s.value.changeData(g.value),s.value.update({})):(s.value=new te(n.value,{data:g.value,width:(f=(S=n.value)==null?void 0:S.offsetWidth)!=null?f:0,height:(C=(F=n.value)==null?void 0:F.offsetHeight)!=null?C:0,xField:"fileName",yField:"reference",padding:"auto",appendPadding:10,color:"#40bf80",tooltip:{showTitle:!0,title:"\u70B9\u51FB\u67F1\u4F53\u4EE5\u67E5\u770B\u6587\u4EF6\u8DEF\u5F84",formatter($){return{name:"\u88AB\u5F15\u7528\u6B21\u6570",value:`${$.reference}`}}},xAxis:{label:{formatter($,D,E){var w;const k=(w=g.value[E])==null?void 0:w.fileName;return k!=null?k:$}}}}),s.value.render(),s.value.on("element:click",$=>{var E;const D=$.data;if(D.data){const k=(E=D.data)==null?void 0:E.filePath;t("handleClick",k)}}))}),Q(s,n),{chartRef:n,limitOptions:l,limit:r,sortType:o,sortOptions:u}}}),qt=e=>(H("data-v-76f0b21d"),e=e(),Y(),e),Xt=qt(()=>_("div",{class:"chart-title"},"\u88AB\u5F15\u7528\u6B21\u6570",-1)),Qt={class:"chart-main",id:"reference-chart",ref:"chartRef"},Zt={class:"chart-tool"};function xt(e,t,a,n,s,r){const l=p("n-select"),o=p("n-radio"),u=p("n-space"),c=p("n-radio-group");return b(),B(L,null,[Xt,_("div",Qt,null,512),_("div",Zt,[h(u,null,{default:v(()=>[h(l,{size:"small",value:e.limit,"onUpdate:value":t[0]||(t[0]=i=>e.limit=i),options:e.limitOptions},null,8,["value","options"]),h(c,{value:e.sortType,"onUpdate:value":t[1]||(t[1]=i=>e.sortType=i),name:"radiogroup"},{default:v(()=>[h(u,null,{default:v(()=>[(b(!0),B(L,null,j(e.sortOptions,i=>(b(),A(o,{key:i.value,value:i.value},{default:v(()=>[M(R(i.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})])],64)}var ea=P(Kt,[["render",xt],["__scopeId","data-v-76f0b21d"]]);const ta=N({name:"typesChart",components:{NSpace:O,NSelect:X},setup(){const e=y(),t=y(),a=z(()=>`http://localhost:${window.preloadState.port}/chart/types`),{onFetchResponse:n,data:s,onFetchError:r}=U(a.value,{refetch:!0}).json(),l=z(()=>{var o,u;return(u=(o=s.value)==null?void 0:o.types)!=null?u:[]});return r(o=>{console.log(o)}),n(()=>{var o,u,c,i;t.value?t.value.changeData(l.value):(t.value=new Pe(e.value,{data:l.value,width:(u=(o=e.value)==null?void 0:o.offsetWidth)!=null?u:0,height:(i=(c=e.value)==null?void 0:c.offsetHeight)!=null?i:0,angleField:"num",colorField:"fileType",padding:16,label:{type:"inner",offset:"-30%",content:({percent:d})=>`${(d*100).toFixed(0)}%`,style:{fontSize:14,textAlign:"center"}},interactions:[{type:"element-active"}]}),t.value.render())}),Q(t,e),{chartRef:e}}}),aa=e=>(H("data-v-caf51c70"),e=e(),Y(),e),na=aa(()=>_("div",{class:"chart-title"},"\u7C7B\u578B\u6BD4\u4F8B",-1)),oa={class:"chart-main",id:"types-chart",ref:"chartRef"};function sa(e,t,a,n,s,r){return b(),B(L,null,[na,_("div",oa,null,512)],64)}var la=P(ta,[["render",sa],["__scopeId","data-v-caf51c70"]]);const ra=N({name:"Chart",components:{"size-chart":Vt,"deps-chart":Jt,"reference-chart":ea,"types-chart":la},setup(){const e=y("");return{filePath:e,setFilePath:a=>{e.value=a}}}}),ua={class:"chart"},ia=_("header",{class:"chart-header"},"Chart Analysis",-1),ca={class:"chart-content"},da={class:"chart-content-item"},pa={class:"chart-content-item"},ha={class:"chart-content-item"},_a={class:"chart-content-item"};function fa(e,t,a,n,s,r){const l=p("size-chart"),o=p("deps-chart"),u=p("reference-chart"),c=p("types-chart");return b(),B("div",ua,[ia,Ae(_("div",{class:"chart-helper"},"\u5F53\u524D\u6587\u4EF6: "+R(e.filePath),513),[[ze,e.filePath.length>0]]),_("section",ca,[_("div",da,[h(l,{onHandleClick:e.setFilePath},null,8,["onHandleClick"])]),_("div",pa,[h(o,{onHandleClick:e.setFilePath},null,8,["onHandleClick"])]),_("div",ha,[h(u,{onHandleClick:e.setFilePath},null,8,["onHandleClick"])]),_("div",_a,[h(c)])])])}var ma=P(ra,[["render",fa]]);const me=e=>ee(e).format("YYYY-MM-DD"),va=e=>`${(Number(e)/1024).toFixed(2)}kb`,ga=(e,t)=>[{type:"selection"},{title:"\u6587\u4EF6\u540D",key:"name",align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"ctime",align:"center",render(a){const n=a==null?void 0:a.ctime;return n?me(n):"none"}},{title:"\u66F4\u65B0\u65F6\u95F4",key:"utime",align:"center",render(a){const n=a==null?void 0:a.utime;return n?me(n):"none"}},{title:"\u6587\u4EF6\u5927\u5C0F",key:"fileSize",align:"center",render(a){const n=a==null?void 0:a.fileSize;return n?va(n):"none"}},{title:"\u4F9D\u8D56\u6570",key:"deps",align:"center",render(a){return a.deps.length}},{title:"\u64CD\u4F5C",key:"action",align:"center",render(a){return V("div",{style:"width:100%;display:flex;justify-content:center"},[V(ae,{text:!0,style:"margin-right:10px",onClick:n=>{e(a)}},{default:()=>"\u8BE6\u60C5"}),V(ae,{text:!0,textColor:"red",onClick:()=>{t(a)}},{default:()=>"\u5220\u9664"})])}}];const Fa=N({name:"fileNodeDetail",props:{detail:{type:Object,default:()=>null},visible:{type:Boolean,default:!1},setDetailVisible:{type:Function,default:()=>{}}},components:{NModal:ce,NList:Me,NListItem:Re,NSkeleton:Oe,NSpace:O},setup(){}}),ya={key:1,class:"table-detail"},$a={class:"table-detail-path"},ba={class:"table-detail-deps-list"},Da={class:"table-detail-deps-list-title"};function wa(e,t,a,n,s,r){const l=p("n-skeleton"),o=p("n-list-item"),u=p("n-list"),c=p("n-space"),i=p("n-modal");return b(),A(i,{show:e.visible,"onUpdate:show":t[0]||(t[0]=d=>e.visible=d),preset:"card",size:"medium",style:{width:"60vw"},title:"\u8BE6\u60C5\u4FE1\u606F",bordered:!1,"mask-closable":"",onUpdateShow:e.setDetailVisible},{default:v(()=>[e.detail?(b(),B("section",ya,[h(c,{vertical:!0},{default:v(()=>{var d,m;return[_("div",$a,"\u8DEF\u5F84\uFF1A"+R((m=(d=e.detail)==null?void 0:d.path)!=null?m:""),1),_("div",ba,[_("div",Da,"\u5185\u90E8\u4F9D\u8D56\uFF1A"+R(e.detail.deps.length)+" \u4E2A",1),h(u,{bordered:""},{default:v(()=>[(b(!0),B(L,null,j(e.detail.deps,g=>(b(),A(o,{key:g.path},{default:v(()=>[M(R(g.path),1)]),_:2},1024))),128))]),_:1})])]}),_:1})])):(b(),A(l,{key:0,text:"",repeat:5}))]),_:1},8,["show","onUpdateShow"])}var ka=P(Fa,[["render",wa],["__scopeId","data-v-eb5c921a"]]);const Ea=N({name:"LoadingModal",props:{visible:{type:Boolean,default:!1},limit:{type:Number,default:1},success:{type:Number,default:1},fail:{type:Number,default:0}},components:{NModal:ce,NSpace:O,NProgress:Le},setup(e){return{percent:z(()=>(Number(e.success+e.fail)/Number(e.limit)*100).toFixed(0))}}}),Ca=_("div",null,"\u6B63\u5728\u5220\u9664\u5566\uFF0C\u522B\u6025\uFF5E\uFF5E",-1),Sa={style:{color:"lightblue"}},Ba={style:{color:"red"}};function Ta(e,t,a,n,s,r){const l=p("n-progress"),o=p("n-space"),u=p("n-modal");return b(),A(u,{show:e.visible,"onUpdate:show":t[0]||(t[0]=c=>e.visible=c),preset:"card",size:"medium",style:{width:"40vw"},title:"\u4EFB\u52A1\u8FDB\u5EA6",bordered:!1,"mask-closable":!1},{default:v(()=>[h(o,{vertical:!0},{default:v(()=>[Ca,h(l,{type:"line",status:"success",height:24,percentage:Number(e.percent),"border-radius":"12px 12px 12px 12px"},{default:v(()=>[M(R(e.percent)+"% ",1)]),_:1},8,["percentage"]),_("div",Sa,"\u5DF2\u5B8C\u6210\u4E86"+R(e.success)+"\u4E2A",1),_("div",Ba,"\u6709"+R(e.fail)+"\u4E2A\u5220\u9664\u5931\u8D25\u4E86\uFF01",1)]),_:1})]),_:1},8,["show"])}var Ia=P(Ea,[["render",Ta]]);const Na=N({name:"Table",components:{NDataTable:Ve,NFormItem:Ue,NButton:ae,NInput:Ge,NForm:je,NDatePicker:He,NPagination:Ye,NSpace:O,Detail:ka,LoadingModal:Ia},setup(){const e=We(),t=y(!1),a=y(0),n=y(),s=y(!1),r=w=>{s.value=w},u=ga(w=>{s.value=!0,n.value=w},w=>{e.warning({title:"\u63D0\u793A",content:"\u786E\u5B9A\u8981\u5220\u9664\u6307\u5B9A\u7684\u6587\u4EF6\u5417\uFF1F",positiveText:"\u5220\u9664",negativeText:"\u4E0D\u5220",onPositiveClick:()=>new Promise((T,W)=>{de.post(`http://localhost:${window.preloadState.port}/table/delete`,{path:w.path}).then(Fe=>{Fe.data.result&&S(),T()})})})}),c=z(()=>m.value?m.value.data:[]),i=Je({page:1,pageSize:10,name:"",updatedAt:null,createdAt:null}),d=z(()=>{const w=new URL(`http://localhost:${window.preloadState.port}/table`),T=w.searchParams;return i.createdAt&&(T.set("ctimeStart",String(i.createdAt[0])),T.set("ctimeEnd",String(i.createdAt[1]))),i.updatedAt&&(T.set("utimeStart",String(i.updatedAt[0])),T.set("utimeEnd",String(i.updatedAt[1]))),i.name&&i.name!==""&&T.set("name",i.name),T.set("page",String(i.page)),T.set("pageSize",String(i.pageSize)),w.toString()}),{data:m,onFetchFinally:g,execute:S}=U(d,{refetch:!0,beforeFetch(){t.value=!0}}).json();g(()=>{t.value=!1,a.value=m.value?m.value.total:0});const f=w=>{i.page=w},F=y(!1),C=y([]),$=y(0),D=y(0);return{searchParams:i,loading:t,tableData:c,tableColumn:u,total:a,changePage:f,detailInfo:n,detailVisible:s,setDetailVisible:r,handleSelect:w=>{C.value=w},currentSelections:C,batchRemoveFiles:()=>{e.warning({title:"\u63D0\u793A",content:"\u786E\u5B9A\u8981\u5220\u9664\u6307\u5B9A\u7684\u6587\u4EF6\u5417\uFF1F",positiveText:"\u5220\u9664",negativeText:"\u4E0D\u5220",onPositiveClick:()=>{F.value=!0;for(let w=0;w<C.value.length;w++){const T=C.value[w];de.post(`http://localhost:${window.preloadState.port}/table/delete`,{path:T}).then(W=>{W.data&&($.value=$.value+1)}).catch(W=>{D.value=D.value+1}).finally(()=>{$.value+D.value===C.value.length&&setTimeout(()=>{F.value=!1,D.value=0,$.value=0,S()},2e3)})}}})},loadingModalVisible:F,success:$,fail:D}}}),Pa={class:"table"},Aa={class:"table-tool"},za=M("\u641C\u7D22"),Ma={class:"table-container"},Ra=M("\u5220\u9664");function Oa(e,t,a,n,s,r){const l=p("n-input"),o=p("n-form-item"),u=p("n-date-picker"),c=p("n-button"),i=p("n-form"),d=p("n-data-table"),m=p("n-pagination"),g=p("n-space"),S=p("Detail"),f=p("LoadingModal");return b(),B("div",Pa,[_("section",Aa,[h(i,{inline:"","label-width":80,model:e.searchParams,"label-placement":"left",ref:"formRef"},{default:v(()=>[h(o,{label:"\u6587\u4EF6\u540D",path:"searchParams.name"},{default:v(()=>[h(l,{placeholder:"\u6587\u4EF6\u540D\u6216\u8DEF\u5F84",value:e.searchParams.name,"onUpdate:value":t[0]||(t[0]=F=>e.searchParams.name=F)},null,8,["value"])]),_:1}),h(o,{label:"\u66F4\u65B0\u65F6\u95F4",path:"searchParams.updatedAt"},{default:v(()=>[h(u,{value:e.searchParams.updatedAt,"onUpdate:value":t[1]||(t[1]=F=>e.searchParams.updatedAt=F),type:"datetimerange",clearable:""},null,8,["value"])]),_:1}),h(o,{label:"\u521B\u5EFA\u65F6\u95F4",path:"searchParams.createdAt"},{default:v(()=>[h(u,{value:e.searchParams.createdAt,"onUpdate:value":t[2]||(t[2]=F=>e.searchParams.createdAt=F),type:"datetimerange",clearable:""},null,8,["value"])]),_:1}),h(o,null,{default:v(()=>[h(c,null,{default:v(()=>[za]),_:1})]),_:1})]),_:1},8,["model"])]),_("section",Ma,[h(g,{vertical:""},{default:v(()=>[e.currentSelections.length?(b(),A(c,{key:0,onClick:e.batchRemoveFiles},{default:v(()=>[Ra]),_:1},8,["onClick"])):Ke("",!0),h(d,{columns:e.tableColumn,data:e.tableData,loading:e.loading,"row-key":F=>F.path,"onUpdate:checkedRowKeys":e.handleSelect},null,8,["columns","data","loading","row-key","onUpdate:checkedRowKeys"]),h(g,{justify:"center"},{default:v(()=>[h(m,{page:e.searchParams.page,"onUpdate:page":t[3]||(t[3]=F=>e.searchParams.page=F),"item-count":e.total,onChange:e.changePage},null,8,["page","item-count","onChange"])]),_:1})]),_:1})]),h(S,{detail:e.detailInfo,visible:e.detailVisible,setDetailVisible:e.setDetailVisible},null,8,["detail","visible","setDetailVisible"]),h(f,{visible:e.loadingModalVisible,limit:e.currentSelections.length,success:e.success,fail:e.fail},null,8,["visible","limit","success","fail"])])}var La=P(Na,[["render",Oa]]);const Va=N({name:"Menu",components:{"n-menu":qe},props:{collapsed:{type:Boolean,require:!0}},setup(e,t){const a=y([]),n=Xe();return Qe(()=>{var o;const l=ge.find(u=>u.name==="Layout");l&&((o=l.children)==null?void 0:o.length)&&(a.value=l.children.map(u=>{var c;return{label:(c=u.meta)==null?void 0:c.title,key:u.path}}))}),{menuOptions:a,renderMenuIcon:l=>l.key==="/graph"?V(ne,null,{default:()=>V(Ze)}):l.key==="/chart"?V(ne,null,{default:()=>V(xe)}):V(ne,null,{default:()=>V(et)}),handleClick:(l,o)=>{n.push({path:l})}}}});function Ua(e,t,a,n,s,r){const l=p("n-menu");return b(),A(l,{collapsed:e.collapsed,"collapsed-width":64,"collapsed-icon-size":22,options:e.menuOptions,"render-icon":e.renderMenuIcon,"onUpdate:value":e.handleClick},null,8,["collapsed","options","render-icon","onUpdate:value"])}var Ga=P(Va,[["render",Ua]]);const ja=N({name:"Layout",components:{NSpace:O,NLayout:tt,Menu:Ga,NLayoutSider:at},setup(){return{collapsed:y(!0)}}});function Ha(e,t,a,n,s,r){const l=p("Menu"),o=p("n-layout-sider"),u=p("router-view"),c=p("n-layout"),i=p("n-space");return b(),A(i,{vertical:""},{default:v(()=>[h(c,{"content-style":{height:"100vh"},"has-sider":""},{default:v(()=>[h(o,{bordered:"","collapse-mode":"width","collapsed-width":64,width:240,collapsed:e.collapsed,"show-trigger":"",onCollapse:t[0]||(t[0]=d=>e.collapsed=!0),onExpand:t[1]||(t[1]=d=>e.collapsed=!1)},{default:v(()=>[h(l,{collapsed:e.collapsed},null,8,["collapsed"])]),_:1},8,["collapsed"]),h(c,{embedded:""},{default:v(()=>[h(u)]),_:1})]),_:1})]),_:1})}var ve=P(ja,[["render",Ha]]);const ge=[{path:"/",component:ve,name:"Layout",redirect(){return{name:"Graph"}},children:[{path:"/graph",component:Nt,name:"Graph",meta:{title:"\u4F9D\u8D56\u6811"}},{path:"/chart",component:ma,name:"Chart",meta:{title:"\u5206\u6790\u56FE"}},{path:"/table",component:La,name:"Table",meta:{title:"\u8868\u683C\u5206\u6790"}}]}],Ya=nt({history:ot(),routes:ge});const Wa=N({name:"PageLoading"}),Z=e=>(H("data-v-9f7b7bb4"),e=e(),Y(),e),Ja={class:"sk-folding-cube"},Ka=Z(()=>_("div",{class:"sk-cube1 sk-cube"},null,-1)),qa=Z(()=>_("div",{class:"sk-cube2 sk-cube"},null,-1)),Xa=Z(()=>_("div",{class:"sk-cube4 sk-cube"},null,-1)),Qa=Z(()=>_("div",{class:"sk-cube3 sk-cube"},null,-1)),Za=[Ka,qa,Xa,Qa];function xa(e,t,a,n,s,r){return b(),B("div",Ja,Za)}var en=P(Wa,[["render",xa],["__scopeId","data-v-9f7b7bb4"]]);const tn=N({name:"App",components:{PageLoading:en,Layout:ve,NDialogProvider:st,NNotificationProvider:lt},setup(){const e=y(!1);return x(()=>{setTimeout(()=>{e.value=!0},2e3)}),{isInitFinished:e}}}),an={class:"container"},nn={key:0,class:"loading-wrappper"},on=_("p",null,"\u8FD8\u5728\u521D\u59CB\u5316\u554A\uFF0C\u7B49\u4E00\u4E0B\uFF5E",-1),sn={key:1,class:"main-wrapper"};function ln(e,t,a,n,s,r){const l=p("PageLoading"),o=p("router-view"),u=p("n-notification-provider"),c=p("n-dialog-provider");return b(),A(c,null,{default:v(()=>[h(u,null,{default:v(()=>[_("div",an,[e.isInitFinished?(b(),B("div",sn,[h(o)])):(b(),B("div",nn,[on,h(l)]))])]),_:1})]),_:1})}var rn=P(tn,[["render",ln]]);rt(rn).use(Ya).mount("#app");
