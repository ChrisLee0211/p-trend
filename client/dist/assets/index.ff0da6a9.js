var ge=Object.defineProperty,ye=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable;var re=(e,t,a)=>t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,T=(e,t)=>{for(var a in t||(t={}))be.call(t,a)&&re(e,a,t[a]);if(se)for(var a of se(t))Fe.call(t,a)&&re(e,a,t[a]);return e},j=(e,t)=>ye(e,$e(t));import{r as y,o as x,M as De,T as we,d as ee,a as N,N as Se,b as J,c as K,e as ke,f as Ce,u as Ee,g as U,w as q,h as ue,i as z,j as p,k as C,l as h,m as f,n as Te,G as Ne,p as b,q as v,F as R,s as G,t as ie,v as M,x as A,y as O,z as V,A as X,C as te,B as Y,D as H,P as Be,E as L,H as ae,I as ce,J as Ae,K as Pe,L as ze,O as Me,Q as Ie,R as Oe,S as Re,U as Le,V as Ve,W as Ue,X as je,Y as Ge,Z as de,_ as Ye,$ as He,a0 as We,a1 as Je,a2 as Ke,a3 as ne,a4 as qe,a5 as Xe,a6 as Qe,a7 as Ze,a8 as xe,a9 as et,aa as tt,ab as at,ac as nt}from"./vendor.00ed2d4b.js";const ot=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function a(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(n){if(n.ep)return;n.ep=!0;const l=a(n);fetch(n.href,l)}};ot();const lt=(e,t)=>{const a=y();return x(()=>{a.value=new De({container:document.getElementById(t),className:e,type:"delegate",size:[150,150]})}),[a]},st=e=>{const t=y();return x(()=>{t.value=new we({container:document.getElementById(e),offsetX:10,offsetY:10,getContent(a){var n,l;const o=(l=(n=a==null?void 0:a.item)==null?void 0:n._cfg)==null?void 0:l.model;if(o){const s=o.path||"none",r=o.name,c='<div style="max-width:200px;word-break: break-all;">',d="</div>",u=`
                    <p>\u6A21\u5757\u540D\u79F0:  ${r}</p>
                    <p>\u8DEF\u5F84:  ${s}</p> 
                    `;let i="";const g=["utime","ctime","fileSize","importTimes"],_={utime:{label:"\u6700\u8FD1\u4FEE\u6539\u65F6\u95F4",getValue($){return ee($).format("YYYY-MM-DD")}},ctime:{label:"\u521B\u5EFA\u65F6\u95F4",getValue($){return ee($).format("YYYY-MM-DD")}},fileSize:{label:"\u6587\u4EF6\u5927\u5C0F",getValue($){return`${(Number($)/1024).toFixed(2)}kb`}},importTimes:{label:"\u88AB\u5F15\u7528\u6B21\u6570",getValue($){return`${$}`}}};for(const $ in o)if(g.includes($)&&o[$]){const S=_[$].label,E=_[$].getValue(o[$]);i=i+`<p>${S}: ${E}</p>`}return c+u+i+d}return"<h1></h1>"},itemTypes:["node"]})}),[t]},rt=(e,t)=>{var l;const a=[],o={id:t,children:[],name:t},n=e.map((s,r)=>{let c={id:s.path,children:[],name:s.name};return a.includes(s.path)?c.id=s.path+`${r}`:a.push(s.path),c=T(T({},c),s),s.deps.length&&(c.children=s.deps.map((d,u)=>{let i={id:d.path,childen:[],name:d.name};return a.includes(d.path)?i.id=`${Math.random()*10}`+d.path:a.push(d.path),i=T(T({},i),d),i})),c});return n.length&&((l=o==null?void 0:o.children)==null||l.push(...n)),o},ut=(e,t,a)=>{var d,u;let o=T({},e);try{o=JSON.parse(JSON.stringify(e))}catch(i){console.error(i)}const n={};for(let i=0;i<t.length;i++)n[t[i].moduleId]=i;const l=Object.keys(n),s={id:a,name:o.name,path:o.path,isFolder:o.isFolder,children:o.children},r=[];let c=0;for(r.push(s);r.length;){c=c+1;const i=r.pop();if(l.includes(i.moduleId)){const g=n[i.moduleId],_=t[g];i.fileSize=_.fileSize||0,i.ctime=_.ctime,i.mtime=_.utime,i.importTimes=(d=_==null?void 0:_.reference)==null?void 0:d.length,i.isDep=!0}if((u=i==null?void 0:i.children)==null?void 0:u.length)for(let g=0;g<i.children.length;g++){const _=i.children[g];_.id=`${_.path}-${c}`,r.push(_)}else i.id=`${i.path}-${c}`}return s},oe=(e,t)=>{var s;let a=T({},e);try{a=JSON.parse(JSON.stringify(e))}catch(r){console.error(r)}const o={id:t,name:a.name,path:a.path,isFolder:a.isFolder,children:a.children},n=[];let l=0;for(n.push(o);n.length;){l=l+1;const r=n.pop();if((s=r==null?void 0:r.children)==null?void 0:s.length){const c=r.children.map(d=>j(T({},d),{id:`${d.path}-${l}`}));n.push(...c)}else r.id=`${r.path}-${l}`}return o},it=e=>{var n;const t=T({},e),a={name:t.path,path:t.path,key:t.path,label:t.path,children:t.children.filter(l=>l.isFolder).map(l=>j(T({},l),{parent:{name:t.name,path:t.path},key:"",label:""}))},o=[];for(o.push(...a.children);o.length;){const l=o.pop();l.isFolder&&(l.children=l.children.filter(r=>r.isFolder).map(r=>j(T({},r),{parent:{name:l.name,path:l.path},key:"",label:""})),l.children.length?o.push(...l.children):Reflect.deleteProperty(l,"children"));const s=l.path.split((n=l==null?void 0:l.parent)==null?void 0:n.path);l.label=s[s.length-1],l.key=l.path}return[a]},pe=new Map,ct=(e,t)=>{var s;const a=pe.get(e);if(a)return a;const o=t;let n=null;const l=[];for(l.push(o);l.length;){const r=l.pop();if(r.path===e){n=r,pe.set(e,r);break}((s=r.children)==null?void 0:s.length)&&l.push(...r.children)}return n};var B=(e,t)=>{const a=e.__vccOpts||e;for(const[o,n]of t)a[o]=n;return a};const dt=N({name:"Graph",components:{NSpin:Se,NRadio:J,NRadioGroup:K,NSwitch:ke,NTreeSelect:Ce},setup(){const e=Ee(),t=y(!0),a=y(!0),o=y(null),n=y(null),[l]=lt("miniMap","miniMap"),[s]=st("tooltip"),r=y(null),c=y([]),d=y(""),{onFetchResponse:u,data:i}=U(`http://localhost:${window.preloadState.port}/graph`,{method:"GET"}).json();u(F=>{F.status===200&&(r.value=oe(i.value.tree,i.value.entry),c.value=it(i.value.tree),c.value.length&&(d.value=c.value[0].key))}),q(r,F=>{F!==null&&a.value&&Te(()=>{n.value=new Ne.TreeGraph({container:o.value,modes:{default:[{type:"collapse-expand",onChange:function(k,I){const D=k.getModel();return D.collapsed=I,!0}},"drag-canvas","zoom-canvas"]},defaultNode:{size:26,anchorPoints:[[0,.5],[1,.5]]},defaultEdge:{type:"cubic-horizontal"},plugins:[l.value,s.value],layout:{type:"compactBox",direction:"LR",getId:function(k){return k.id},getHeight:function(){return 20},getWidth:function(){return 20},getVGap:function(){return 10},getHGap:function(){return 100}}}),n.value.node(m=>{let k={label:m.name,labelCfg:{offset:10,position:m.children&&m.children.length>0?"left":"right"}};return(m==null?void 0:m.isDep)&&(k=j(T({},k),{style:{shadowBlur:10,fill:"#1a414e",stroke:"black"}})),k}),n.value.on("afterlayout",m=>{t.value=!1,a.value=!1}),n.value.data(r.value),n.value.render(),n.value.fitView()})});const g=ie((F,m)=>{n.value&&(n.value.changeSize(F,m),n.value.fitView(20))},100);ue(o,F=>{const m=F[0],{width:k,height:I}=m.contentRect;g(k,I)});const _=y("project"),w=[{label:"\u9879\u76EE\u7ED3\u6784",value:"project"},{label:"\u6A21\u5757\u7ED3\u6784",value:"module"}];q(_,(F,m)=>{var k,I,D;F==="project"&&((k=n.value)==null||k.changeData(oe(i.value.tree,i.value.entry))),F==="module"&&((I=n.value)==null||I.changeData(rt(i.value.nodes,i.value.entry)),$.value=!1),(D=n.value)==null||D.fitView()});const $=y(!1),S=z(()=>_.value!=="project");return q($,F=>{var k,I,D;let m=(k=n.value)==null?void 0:k.save();F===!0?m=ut(m,i.value.deps,i.value.entry):m=oe(m,i.value.entry),console.log("targetTreeData ===>",m),(I=n.value)==null||I.changeData(m),(D=n.value)==null||D.fitView()}),{loading:t,graphRef:o,graphType:w,selectGraphType:_,showDeps:$,disableShowDeps:S,dirOpts:c,dirSrc:d,handleChangeDir:F=>{try{if(r.value&&n.value){const m=ct(F,r.value);if(m)n.value.changeData(m);else throw new Error}else throw new Error}catch{e.error({meta:"\u8B66\u544A",content:"\u65E0\u6CD5\u89E3\u6790\u8BE5\u76EE\u5F55"})}}}}}),pt={class:"graph"},ht={class:"graph-main-wrapper"},_t={class:"graph-tools"},vt={class:"graph-tools-panel"},mt={class:"graph-tools-panel-item"},ft={class:"graph-tools-panel-item-main"},gt=M(" \u56FE\u7C7B\u578B\uFF1A "),yt={class:"graph-tools-panel-item-main"},$t=M(" \u5F53\u524D\u76EE\u5F55\uFF1A "),bt={class:"graph-tools-panel-item"},Ft=M(" \u4F9D\u8D56\u6807\u8BB0\uFF1A "),Dt={id:"graph-root"},wt={class:"graph-container",ref:"graphRef"},St=v("div",{id:"miniMap"},null,-1),kt={id:"tooltip",class:"tooltip-wrap",ref:"tooltipRef"};function Ct(e,t,a,o,n,l){const s=p("n-radio"),r=p("n-space"),c=p("n-radio-group"),d=p("n-tree-select"),u=p("n-switch"),i=p("n-spin");return b(),C("div",pt,[h(i,{size:"large",show:e.loading},{default:f(()=>[v("div",ht,[v("div",_t,[v("div",vt,[v("div",mt,[v("div",ft,[gt,h(c,{value:e.selectGraphType,"onUpdate:value":t[0]||(t[0]=g=>e.selectGraphType=g),name:"radiogroup"},{default:f(()=>[h(r,null,{default:f(()=>[(b(!0),C(R,null,G(e.graphType,g=>(b(),A(s,{key:g.value,value:g.value},{default:f(()=>[M(O(g.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),v("div",yt,[$t,h(d,{options:e.dirOpts,"virtual-scroll":"",value:e.dirSrc,"onUpdate:value":e.handleChangeDir},null,8,["options","value","onUpdate:value"])])]),v("div",bt,[Ft,h(u,{value:e.showDeps,"onUpdate:value":t[1]||(t[1]=g=>e.showDeps=g),disabled:e.disableShowDeps},null,8,["value","disabled"])])])]),v("div",Dt,[v("div",wt,null,512),St,v("div",kt,null,512)])])]),_:1},8,["show"])])}var Et=B(dt,[["render",Ct]]);const Tt=e=>{if(!e)return 0+"b";let t=e+"b",a=[e],o=0,n=["B","KB","MB","GB","TB"];for(;a.length;){const l=a.pop(),s=Number(l)/1024;o=o+1,t=s.toFixed(2)+n[o],s>1024&&a.push(s)}return t},le=()=>{const e=[{label:"\u524D5",value:5},{label:"\u524D10",value:10},{label:"\u524D15",value:15}];return{value:y(e[0].value),limitOptions:e}},Q=(e,t)=>{const a=ie((o,n)=>{e.value&&e.value.changeSize(o,n)});ue(t,o=>{const n=o[0],{width:l,height:s}=n.contentRect;a(l,s)})};const Nt=N({name:"fileSizeChart",components:{NSpace:V,NRadio:J,NRadioGroup:K,NSelect:X},setup(){const e=y(),t=y(),a=y("folder"),o=y({}),n=_=>{if(Number(_)in o.value)return o.value[_];{const w=Tt(_);return o.value[_]=w,w}},l=_=>_.slice(0).sort((w,$)=>$.fileSize-w.fileSize),{value:s,limitOptions:r}=le(),c=z(()=>`http://localhost:${window.preloadState.port}/chart/size?limit=${s.value}`),{onFetchResponse:d,data:u,isFetching:i}=U(c,{refetch:!0}).json();d(()=>{var w,$,S,E;if(u.value===null)return;const _=a.value==="folder"?u.value.tree:u.value.nodes;t.value?t.value.changeData(l(_)):(t.value=new te(e.value,{data:l(_),width:($=(w=e.value)==null?void 0:w.offsetWidth)!=null?$:0,height:(E=(S=e.value)==null?void 0:S.offsetHeight)!=null?E:0,xField:"fileName",yField:"fileSize",padding:"auto",color:"#a3a3c2",appendPadding:10,tooltip:{formatter(F){return{name:"\u6587\u4EF6\u5927\u5C0F",value:`${n(F.fileSize)}`}}}}),t.value.render())}),Q(t,e);const g=[{value:"folder",label:"\u76EE\u5F55"},{value:"module",label:"\u6A21\u5757"}];return q(a,_=>{if(u.value===null)return;const w=_==="folder"?u.value.tree:u.value.nodes;t.value&&t.value.changeData(l(w))}),{chartRef:e,chartTypes:g,chartType:a,limitOptions:r,limit:s}}}),Bt=e=>(Y("data-v-1f4c7d86"),e=e(),H(),e),At=Bt(()=>v("div",{class:"chart-title"},"\u6587\u4EF6\u5927\u5C0F",-1)),Pt={class:"chart-main",id:"size-chart",ref:"chartRef"},zt={class:"chart-tool"};function Mt(e,t,a,o,n,l){const s=p("n-radio"),r=p("n-space"),c=p("n-radio-group"),d=p("n-select");return b(),C(R,null,[At,v("div",Pt,null,512),v("div",zt,[h(r,null,{default:f(()=>[h(c,{value:e.chartType,"onUpdate:value":t[0]||(t[0]=u=>e.chartType=u),name:""},{default:f(()=>[h(r,null,{default:f(()=>[(b(!0),C(R,null,G(e.chartTypes,u=>(b(),A(s,{key:u.value,value:u.value},{default:f(()=>[M(O(u.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"]),h(d,{size:"small",value:e.limit,"onUpdate:value":t[1]||(t[1]=u=>e.limit=u),options:e.limitOptions},null,8,["value","options"])]),_:1})])],64)}var It=B(Nt,[["render",Mt],["__scopeId","data-v-1f4c7d86"]]);const he=()=>({value:y("down"),sortOptions:[{label:"\u5347\u5E8F",value:"up"},{label:"\u5012\u5E8F",value:"down"}]});const Ot=N({name:"dependenceChart",components:{NSpace:V,NSelect:X,NRadio:J,NRadioGroup:K},setup(){const e=y(),t=y(),{value:a,limitOptions:o}=le(),{value:n,sortOptions:l}=he(),s=z(()=>`http://localhost:${window.preloadState.port}/chart/deps?limit=${a.value}&sort=${n.value}`),{onFetchResponse:r,data:c,onFetchError:d}=U(s,{refetch:!0}).json(),u=z(()=>c.value&&c.value.nodes?c.value.nodes:[]);return d(i=>{console.log(i)}),r(()=>{var i,g,_,w;t.value?t.value.changeData(u.value):(t.value=new te(e.value,{data:u.value,width:(g=(i=e.value)==null?void 0:i.offsetWidth)!=null?g:0,height:(w=(_=e.value)==null?void 0:_.offsetHeight)!=null?w:0,xField:"fileName",yField:"depsLength",padding:"auto",color:"#ff4d4d",appendPadding:10,tooltip:{formatter($){return{name:"\u4F9D\u8D56\u6570\u91CF",value:`${$.depsLength}`}}}}),t.value.render())}),Q(t,e),{chartRef:e,limitOptions:o,limit:a,sortType:n,sortOptions:l}}}),Rt=e=>(Y("data-v-7ae095d9"),e=e(),H(),e),Lt=Rt(()=>v("div",{class:"chart-title"},"\u4F9D\u8D56\u6570",-1)),Vt={class:"chart-main",id:"deps-chart",ref:"chartRef"},Ut={class:"chart-tool"};function jt(e,t,a,o,n,l){const s=p("n-select"),r=p("n-radio"),c=p("n-space"),d=p("n-radio-group");return b(),C(R,null,[Lt,v("div",Vt,null,512),v("div",Ut,[h(c,null,{default:f(()=>[h(s,{size:"small",value:e.limit,"onUpdate:value":t[0]||(t[0]=u=>e.limit=u),options:e.limitOptions},null,8,["value","options"]),h(d,{value:e.sortType,"onUpdate:value":t[1]||(t[1]=u=>e.sortType=u),name:"radiogroup"},{default:f(()=>[h(c,null,{default:f(()=>[(b(!0),C(R,null,G(e.sortOptions,u=>(b(),A(r,{key:u.value,value:u.value},{default:f(()=>[M(O(u.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})])],64)}var Gt=B(Ot,[["render",jt],["__scopeId","data-v-7ae095d9"]]);const Yt=N({name:"referenceChart",components:{NSpace:V,NSelect:X,NRadio:J,NRadioGroup:K},setup(){const e=y(),t=y(),{value:a,limitOptions:o}=le(),{value:n,sortOptions:l}=he(),s=z(()=>`http://localhost:${window.preloadState.port}/chart/reference?limit=${a.value}&sort=${n.value}`),{onFetchResponse:r,data:c,onFetchError:d}=U(s,{refetch:!0}).json(),u=z(()=>c.value&&c.value.nodes?c.value.nodes.map(i=>T({},i)):[]);return d(i=>{console.log(i)}),r(()=>{var i,g,_,w;t.value?(t.value.changeData(u.value),t.value.update({})):(t.value=new te(e.value,{data:u.value,width:(g=(i=e.value)==null?void 0:i.offsetWidth)!=null?g:0,height:(w=(_=e.value)==null?void 0:_.offsetHeight)!=null?w:0,xField:"filePath",yField:"reference",padding:"auto",appendPadding:10,color:"#40bf80",tooltip:{formatter($){return{name:"\u88AB\u5F15\u7528\u6B21\u6570",value:`${$.reference}`}}},xAxis:{label:{formatter($,S,E){var m;const F=(m=u.value[E])==null?void 0:m.fileName;return F!=null?F:$}}}}),t.value.render())}),Q(t,e),{chartRef:e,limitOptions:o,limit:a,sortType:n,sortOptions:l}}}),Ht=e=>(Y("data-v-6e6ba024"),e=e(),H(),e),Wt=Ht(()=>v("div",{class:"chart-title"},"\u88AB\u5F15\u7528\u6B21\u6570",-1)),Jt={class:"chart-main",id:"reference-chart",ref:"chartRef"},Kt={class:"chart-tool"};function qt(e,t,a,o,n,l){const s=p("n-select"),r=p("n-radio"),c=p("n-space"),d=p("n-radio-group");return b(),C(R,null,[Wt,v("div",Jt,null,512),v("div",Kt,[h(c,null,{default:f(()=>[h(s,{size:"small",value:e.limit,"onUpdate:value":t[0]||(t[0]=u=>e.limit=u),options:e.limitOptions},null,8,["value","options"]),h(d,{value:e.sortType,"onUpdate:value":t[1]||(t[1]=u=>e.sortType=u),name:"radiogroup"},{default:f(()=>[h(c,null,{default:f(()=>[(b(!0),C(R,null,G(e.sortOptions,u=>(b(),A(r,{key:u.value,value:u.value},{default:f(()=>[M(O(u.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})])],64)}var Xt=B(Yt,[["render",qt],["__scopeId","data-v-6e6ba024"]]);const Qt=N({name:"typesChart",components:{NSpace:V,NSelect:X},setup(){const e=y(),t=y(),a=z(()=>`http://localhost:${window.preloadState.port}/chart/types`),{onFetchResponse:o,data:n,onFetchError:l}=U(a.value,{refetch:!0}).json(),s=z(()=>{var r,c;return(c=(r=n.value)==null?void 0:r.types)!=null?c:[]});return l(r=>{console.log(r)}),o(()=>{var r,c,d,u;t.value?t.value.changeData(s.value):(console.log("chartData",s.value),t.value=new Be(e.value,{data:s.value,width:(c=(r=e.value)==null?void 0:r.offsetWidth)!=null?c:0,height:(u=(d=e.value)==null?void 0:d.offsetHeight)!=null?u:0,angleField:"num",colorField:"fileType",padding:16,label:{type:"inner",offset:"-30%",content:({percent:i})=>`${(i*100).toFixed(0)}%`,style:{fontSize:14,textAlign:"center"}},interactions:[{type:"element-active"}]}),t.value.render())}),Q(t,e),{chartRef:e}}}),Zt=e=>(Y("data-v-25e7897e"),e=e(),H(),e),xt=Zt(()=>v("div",{class:"chart-title"},"\u7C7B\u578B\u6BD4\u4F8B",-1)),ea={class:"chart-main",id:"types-chart",ref:"chartRef"};function ta(e,t,a,o,n,l){return b(),C(R,null,[xt,v("div",ea,null,512)],64)}var aa=B(Qt,[["render",ta],["__scopeId","data-v-25e7897e"]]);const na=N({name:"Chart",components:{"size-chart":It,"deps-chart":Gt,"reference-chart":Xt,"types-chart":aa},setup(){}}),oa={class:"chart"},la=v("header",{class:"chart-header"},"Chart Analysis",-1),sa={class:"chart-content"},ra={class:"chart-content-item"},ua={class:"chart-content-item"},ia={class:"chart-content-item"},ca={class:"chart-content-item"};function da(e,t,a,o,n,l){const s=p("size-chart"),r=p("deps-chart"),c=p("reference-chart"),d=p("types-chart");return b(),C("div",oa,[la,v("section",sa,[v("div",ra,[h(s)]),v("div",ua,[h(r)]),v("div",ia,[h(c)]),v("div",ca,[h(d)])])])}var pa=B(na,[["render",da]]);const _e=e=>ee(e).format("YYYY-MM-DD"),ha=e=>`${(Number(e)/1024).toFixed(2)}kb`,_a=(e,t)=>[{type:"selection"},{title:"\u6587\u4EF6\u540D",key:"name",align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"ctime",align:"center",render(a){const o=a==null?void 0:a.ctime;return o?_e(o):"none"}},{title:"\u66F4\u65B0\u65F6\u95F4",key:"utime",align:"center",render(a){const o=a==null?void 0:a.utime;return o?_e(o):"none"}},{title:"\u6587\u4EF6\u5927\u5C0F",key:"fileSize",align:"center",render(a){const o=a==null?void 0:a.fileSize;return o?ha(o):"none"}},{title:"\u4F9D\u8D56\u6570",key:"deps",align:"center",render(a){return a.deps.length}},{title:"\u64CD\u4F5C",key:"action",align:"center",render(a){return L("div",{style:"width:100%;display:flex;justify-content:center"},[L(ae,{text:!0,style:"margin-right:10px",onClick:o=>{e(a)}},{default:()=>"\u8BE6\u60C5"}),L(ae,{text:!0,textColor:"red",onClick:()=>{t(a)}},{default:()=>"\u5220\u9664"})])}}];const va=N({name:"fileNodeDetail",props:{detail:{type:Object,default:()=>null},visible:{type:Boolean,default:!1},setDetailVisible:{type:Function,default:()=>{}}},components:{NModal:ce,NList:Ae,NListItem:Pe,NSkeleton:ze,NSpace:V},setup(){}}),ma={key:1,class:"table-detail"},fa={class:"table-detail-path"},ga={class:"table-detail-deps-list"},ya={class:"table-detail-deps-list-title"};function $a(e,t,a,o,n,l){const s=p("n-skeleton"),r=p("n-list-item"),c=p("n-list"),d=p("n-space"),u=p("n-modal");return b(),A(u,{show:e.visible,"onUpdate:show":t[0]||(t[0]=i=>e.visible=i),preset:"card",size:"medium",style:{width:"60vw"},title:"\u8BE6\u60C5\u4FE1\u606F",bordered:!1,"mask-closable":"",onUpdateShow:e.setDetailVisible},{default:f(()=>[e.detail?(b(),C("section",ma,[h(d,{vertical:!0},{default:f(()=>{var i,g;return[v("div",fa,"\u8DEF\u5F84\uFF1A"+O((g=(i=e.detail)==null?void 0:i.path)!=null?g:""),1),v("div",ga,[v("div",ya,"\u5185\u90E8\u4F9D\u8D56\uFF1A"+O(e.detail.deps.length)+" \u4E2A",1),h(c,{bordered:""},{default:f(()=>[(b(!0),C(R,null,G(e.detail.deps,_=>(b(),A(r,{key:_.path},{default:f(()=>[M(O(_.path),1)]),_:2},1024))),128))]),_:1})])]}),_:1})])):(b(),A(s,{key:0,text:"",repeat:5}))]),_:1},8,["show","onUpdateShow"])}var ba=B(va,[["render",$a],["__scopeId","data-v-eb5c921a"]]);const Fa=N({name:"LoadingModal",props:{visible:{type:Boolean,default:!1},limit:{type:Number,default:1},success:{type:Number,default:1},fail:{type:Number,default:0}},components:{NModal:ce,NSpace:V,NProgress:Me},setup(e){return{percent:z(()=>(Number(e.success+e.fail)/Number(e.limit)*100).toFixed(0))}}}),Da=v("div",null,"\u6B63\u5728\u5220\u9664\u5566\uFF0C\u522B\u6025\uFF5E\uFF5E",-1),wa={style:{color:"lightblue"}},Sa={style:{color:"red"}};function ka(e,t,a,o,n,l){const s=p("n-progress"),r=p("n-space"),c=p("n-modal");return b(),A(c,{show:e.visible,"onUpdate:show":t[0]||(t[0]=d=>e.visible=d),preset:"card",size:"medium",style:{width:"40vw"},title:"\u4EFB\u52A1\u8FDB\u5EA6",bordered:!1,"mask-closable":!1},{default:f(()=>[h(r,{vertical:!0},{default:f(()=>[Da,h(s,{type:"line",status:"success",height:24,percentage:Number(e.percent),"border-radius":"12px 12px 12px 12px"},{default:f(()=>[M(O(e.percent)+"% ",1)]),_:1},8,["percentage"]),v("div",wa,"\u5DF2\u5B8C\u6210\u4E86"+O(e.success)+"\u4E2A",1),v("div",Sa,"\u6709"+O(e.fail)+"\u4E2A\u5220\u9664\u5931\u8D25\u4E86\uFF01",1)]),_:1})]),_:1},8,["show"])}var Ca=B(Fa,[["render",ka]]);const Ea=N({name:"Table",components:{NDataTable:Ie,NFormItem:Oe,NButton:ae,NInput:Re,NForm:Le,NDatePicker:Ve,NPagination:Ue,NSpace:V,Detail:ba,LoadingModal:Ca},setup(){const e=je(),t=y(!1),a=y(0),o=y(),n=y(!1),l=D=>{n.value=D},c=_a(D=>{n.value=!0,o.value=D},D=>{e.warning({title:"\u63D0\u793A",content:"\u786E\u5B9A\u8981\u5220\u9664\u6307\u5B9A\u7684\u6587\u4EF6\u5417\uFF1F",positiveText:"\u5220\u9664",negativeText:"\u4E0D\u5220",onPositiveClick:()=>new Promise((P,W)=>{de.post(`http://localhost:${window.preloadState.port}/table/delete`,{path:D.path}).then(fe=>{fe.data.result&&w(),P()})})})}),d=z(()=>g.value?g.value.data:[]),u=Ge({page:1,pageSize:10,name:"",updatedAt:null,createdAt:null}),i=z(()=>{const D=new URL(`http://localhost:${window.preloadState.port}/table`),P=D.searchParams;return u.createdAt&&(P.set("ctimeStart",String(u.createdAt[0])),P.set("ctimeEnd",String(u.createdAt[1]))),u.updatedAt&&(P.set("utimeStart",String(u.updatedAt[0])),P.set("utimeEnd",String(u.updatedAt[1]))),u.name&&u.name!==""&&P.set("name",u.name),P.set("page",String(u.page)),P.set("pageSize",String(u.pageSize)),D.toString()}),{data:g,onFetchFinally:_,execute:w}=U(i,{refetch:!0,beforeFetch(){t.value=!0}}).json();_(()=>{t.value=!1,a.value=g.value?g.value.total:0});const $=D=>{u.page=D},S=y(!1),E=y([]),F=y(0),m=y(0);return{searchParams:u,loading:t,tableData:d,tableColumn:c,total:a,changePage:$,detailInfo:o,detailVisible:n,setDetailVisible:l,handleSelect:D=>{E.value=D},currentSelections:E,batchRemoveFiles:()=>{console.log("\u5F53\u524D\u9009\u4E2D\u4E86",E.value),e.warning({title:"\u63D0\u793A",content:"\u786E\u5B9A\u8981\u5220\u9664\u6307\u5B9A\u7684\u6587\u4EF6\u5417\uFF1F",positiveText:"\u5220\u9664",negativeText:"\u4E0D\u5220",onPositiveClick:()=>{S.value=!0;for(let D=0;D<E.value.length;D++){const P=E.value[D];de.post(`http://localhost:${window.preloadState.port}/table/delete`,{path:P}).then(W=>{W.data&&(F.value=F.value+1)}).catch(W=>{m.value=m.value+1}).finally(()=>{F.value+m.value===E.value.length&&setTimeout(()=>{S.value=!1,m.value=0,F.value=0,w()},2e3)})}}})},loadingModalVisible:S,success:F,fail:m}}}),Ta={class:"table"},Na={class:"table-tool"},Ba=M("\u641C\u7D22"),Aa={class:"table-container"},Pa=M("\u5220\u9664");function za(e,t,a,o,n,l){const s=p("n-input"),r=p("n-form-item"),c=p("n-date-picker"),d=p("n-button"),u=p("n-form"),i=p("n-data-table"),g=p("n-pagination"),_=p("n-space"),w=p("Detail"),$=p("LoadingModal");return b(),C("div",Ta,[v("section",Na,[h(u,{inline:"","label-width":80,model:e.searchParams,"label-placement":"left",ref:"formRef"},{default:f(()=>[h(r,{label:"\u6587\u4EF6\u540D",path:"searchParams.name"},{default:f(()=>[h(s,{placeholder:"\u6587\u4EF6\u540D\u6216\u8DEF\u5F84",value:e.searchParams.name,"onUpdate:value":t[0]||(t[0]=S=>e.searchParams.name=S)},null,8,["value"])]),_:1}),h(r,{label:"\u66F4\u65B0\u65F6\u95F4",path:"searchParams.updatedAt"},{default:f(()=>[h(c,{value:e.searchParams.updatedAt,"onUpdate:value":t[1]||(t[1]=S=>e.searchParams.updatedAt=S),type:"datetimerange",clearable:""},null,8,["value"])]),_:1}),h(r,{label:"\u521B\u5EFA\u65F6\u95F4",path:"searchParams.createdAt"},{default:f(()=>[h(c,{value:e.searchParams.createdAt,"onUpdate:value":t[2]||(t[2]=S=>e.searchParams.createdAt=S),type:"datetimerange",clearable:""},null,8,["value"])]),_:1}),h(r,null,{default:f(()=>[h(d,null,{default:f(()=>[Ba]),_:1})]),_:1})]),_:1},8,["model"])]),v("section",Aa,[h(_,{vertical:""},{default:f(()=>[e.currentSelections.length?(b(),A(d,{key:0,onClick:e.batchRemoveFiles},{default:f(()=>[Pa]),_:1},8,["onClick"])):Ye("",!0),h(i,{columns:e.tableColumn,data:e.tableData,loading:e.loading,"row-key":S=>S.path,"onUpdate:checkedRowKeys":e.handleSelect},null,8,["columns","data","loading","row-key","onUpdate:checkedRowKeys"]),h(_,{justify:"center"},{default:f(()=>[h(g,{page:e.searchParams.page,"onUpdate:page":t[3]||(t[3]=S=>e.searchParams.page=S),"item-count":e.total,onChange:e.changePage},null,8,["page","item-count","onChange"])]),_:1})]),_:1})]),h(w,{detail:e.detailInfo,visible:e.detailVisible,setDetailVisible:e.setDetailVisible},null,8,["detail","visible","setDetailVisible"]),h($,{visible:e.loadingModalVisible,limit:e.currentSelections.length,success:e.success,fail:e.fail},null,8,["visible","limit","success","fail"])])}var Ma=B(Ea,[["render",za]]);const Ia=N({name:"Menu",components:{"n-menu":He},props:{collapsed:{type:Boolean,require:!0}},setup(e,t){const a=y([]),o=We();return Je(()=>{var r;const s=me.find(c=>c.name==="Layout");s&&((r=s.children)==null?void 0:r.length)&&(a.value=s.children.map(c=>{var d;return{label:(d=c.meta)==null?void 0:d.title,key:c.path}}))}),{menuOptions:a,renderMenuIcon:s=>s.key==="/graph"?L(ne,null,{default:()=>L(Ke)}):s.key==="/chart"?L(ne,null,{default:()=>L(qe)}):L(ne,null,{default:()=>L(Xe)}),handleClick:(s,r)=>{o.push({path:s})}}}});function Oa(e,t,a,o,n,l){const s=p("n-menu");return b(),A(s,{collapsed:e.collapsed,"collapsed-width":64,"collapsed-icon-size":22,options:e.menuOptions,"render-icon":e.renderMenuIcon,"onUpdate:value":e.handleClick},null,8,["collapsed","options","render-icon","onUpdate:value"])}var Ra=B(Ia,[["render",Oa]]);const La=N({name:"Layout",components:{NSpace:V,NLayout:Qe,Menu:Ra,NLayoutSider:Ze},setup(){return{collapsed:y(!0)}}});function Va(e,t,a,o,n,l){const s=p("Menu"),r=p("n-layout-sider"),c=p("router-view"),d=p("n-layout"),u=p("n-space");return b(),A(u,{vertical:""},{default:f(()=>[h(d,{"content-style":{height:"100vh"},"has-sider":""},{default:f(()=>[h(r,{bordered:"","collapse-mode":"width","collapsed-width":64,width:240,collapsed:e.collapsed,"show-trigger":"",onCollapse:t[0]||(t[0]=i=>e.collapsed=!0),onExpand:t[1]||(t[1]=i=>e.collapsed=!1)},{default:f(()=>[h(s,{collapsed:e.collapsed},null,8,["collapsed"])]),_:1},8,["collapsed"]),h(d,{embedded:""},{default:f(()=>[h(c)]),_:1})]),_:1})]),_:1})}var ve=B(La,[["render",Va]]);const me=[{path:"/",component:ve,name:"Layout",redirect(){return{name:"Graph"}},children:[{path:"/graph",component:Et,name:"Graph",meta:{title:"\u4F9D\u8D56\u6811"}},{path:"/chart",component:pa,name:"Chart",meta:{title:"\u5206\u6790\u56FE"}},{path:"/table",component:Ma,name:"Table",meta:{title:"\u8868\u683C\u5206\u6790"}}]}],Ua=xe({history:et(),routes:me});const ja=N({name:"PageLoading"}),Z=e=>(Y("data-v-9f7b7bb4"),e=e(),H(),e),Ga={class:"sk-folding-cube"},Ya=Z(()=>v("div",{class:"sk-cube1 sk-cube"},null,-1)),Ha=Z(()=>v("div",{class:"sk-cube2 sk-cube"},null,-1)),Wa=Z(()=>v("div",{class:"sk-cube4 sk-cube"},null,-1)),Ja=Z(()=>v("div",{class:"sk-cube3 sk-cube"},null,-1)),Ka=[Ya,Ha,Wa,Ja];function qa(e,t,a,o,n,l){return b(),C("div",Ga,Ka)}var Xa=B(ja,[["render",qa],["__scopeId","data-v-9f7b7bb4"]]);const Qa=N({name:"App",components:{PageLoading:Xa,Layout:ve,NDialogProvider:tt,NNotificationProvider:at},setup(){const e=y(!1);return x(()=>{setTimeout(()=>{e.value=!0},2e3)}),{isInitFinished:e}}}),Za={class:"container"},xa={key:0,class:"loading-wrappper"},en=v("p",null,"\u8FD8\u5728\u521D\u59CB\u5316\u554A\uFF0C\u7B49\u4E00\u4E0B\uFF5E",-1),tn={key:1,class:"main-wrapper"};function an(e,t,a,o,n,l){const s=p("PageLoading"),r=p("router-view"),c=p("n-notification-provider"),d=p("n-dialog-provider");return b(),A(d,null,{default:f(()=>[h(c,null,{default:f(()=>[v("div",Za,[e.isInitFinished?(b(),C("div",tn,[h(r)])):(b(),C("div",xa,[en,h(s)]))])]),_:1})]),_:1})}var nn=B(Qa,[["render",an]]);nt(nn).use(Ua).mount("#app");
