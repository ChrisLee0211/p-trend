var ke=Object.defineProperty,Ce=Object.defineProperties;var Se=Object.getOwnPropertyDescriptors;var ce=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var de=(e,t,a)=>t in e?ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,M=(e,t)=>{for(var a in t||(t={}))Be.call(t,a)&&de(e,a,t[a]);if(ce)for(var a of ce(t))Te.call(t,a)&&de(e,a,t[a]);return e},J=(e,t)=>Ce(e,Se(t));import{r as m,o as le,M as Ae,T as Ne,d as oe,m as Pe,n as Ie,G as Me,a as N,N as fe,b as Q,c as X,e as Le,f as ze,g as O,u as x,h as G,i as ge,w as Y,j as R,k as p,l as B,p as h,q as v,s as y,t as _,F as L,v as j,x as Fe,y as T,z as A,A as I,B as ee,C as re,D as W,E as q,P as Re,H as $e,I as ye,J as z,K,L as ue,O as Oe,Q as Ve,R as be,S as Ue,U as je,V as Ge,W as He,X as Ye,Y as We,Z as qe,_ as Je,$ as Ke,a0 as se,a1 as Qe,a2 as H,a3 as Xe,a4 as Ze,a5 as xe,a6 as et,a7 as tt,a8 as at,a9 as nt,aa as ot,ab as st,ac as lt,ad as rt,ae as ut,af as it,ag as ct,ah as dt,ai as pt,aj as Z,ak as ht,al as _t,am as vt,an as mt,ao as ft,ap as gt,aq as Ft,ar as $t,as as yt,at as bt,au as Dt}from"./vendor.82cb0527.js";const wt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function a(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=a(r);fetch(r.href,l)}};wt();const Et=(e,t)=>{const a=m();return le(()=>{a.value=new Ae({container:document.getElementById(t),className:e,type:"delegate",size:[150,150]})}),[a]},kt=e=>{const t=m();return le(()=>{t.value=new Ne({container:document.getElementById(e),offsetX:10,offsetY:10,trigger:"mouseenter",getContent(a){var r,l;const n=(l=(r=a==null?void 0:a.item)==null?void 0:r._cfg)==null?void 0:l.model;if(n){const s=n.path||"none",o=n.name,u='<div style="max-width:200px;word-break: break-all;">',c="</div>",d=`
                    <p>\u6A21\u5757\u540D\u79F0:  ${o}</p>
                    <p>\u8DEF\u5F84:  ${s}</p> 
                    `;let i="";const $=["utime","ctime","fileSize","importTimes"],g={utime:{label:"\u6700\u8FD1\u4FEE\u6539\u65F6\u95F4",getValue(f){return oe(f).format("YYYY-MM-DD")}},ctime:{label:"\u521B\u5EFA\u65F6\u95F4",getValue(f){return oe(f).format("YYYY-MM-DD")}},fileSize:{label:"\u6587\u4EF6\u5927\u5C0F",getValue(f){return`${(Number(f)/1024).toFixed(2)}kb`}},importTimes:{label:"\u88AB\u5F15\u7528\u6B21\u6570",getValue(f){return`${f}`}}};for(const f in n)if($.includes(f)&&n[f]){const F=g[f].label,k=g[f].getValue(n[f]);i=i+`<p>${F}: ${k}</p>`}return u+d+i+c}return"<h1></h1>"},itemTypes:["node"]})}),[t]},Ct=(e,t)=>{var l;const a=[],n={id:t,children:[],name:t},r=e.map((s,o)=>{let u={id:s.path,children:[],name:s.name};return a.includes(s.path)?u.id=s.path+`${o}`:a.push(s.path),u=M(M({},u),s),s.deps.length&&(u.children=s.deps.map((c,d)=>{let i={id:c.path,childen:[],name:c.name};return a.includes(c.path)?i.id=`${Math.random()*10}`+c.path:a.push(c.path),i=M(M({},i),c),i})),u});return r.length&&((l=n==null?void 0:n.children)==null||l.push(...r)),n},pe=(e,t,a)=>{var c,d;let n=M({},e);try{n=JSON.parse(JSON.stringify(e))}catch(i){console.error(i)}const r={};for(let i=0;i<t.length;i++)r[t[i].moduleId]=i;const l=Object.keys(r),s={id:a,name:n.name,path:n.path,isFolder:n.isFolder,children:n.children},o=[];let u=0;for(o.push(s);o.length;){u=u+1;const i=o.pop();if(l.includes(i.moduleId)){const $=r[i.moduleId],g=t[$];i.fileSize=g.fileSize||0,i.ctime=g.ctime,i.mtime=g.utime,i.importTimes=(c=g==null?void 0:g.reference)==null?void 0:c.length,i.isDep=!0}if((d=i==null?void 0:i.children)==null?void 0:d.length)for(let $=0;$<i.children.length;$++){const g=i.children[$];g.id=`${g.path}-${u}`,o.push(g)}else i.id=`${i.path}-${u}`}return s},he=(e,t)=>{var s;let a=M({},e);try{a=JSON.parse(JSON.stringify(e))}catch(o){console.error(o)}const n={id:t,name:a.name,path:a.path,isFolder:a.isFolder,children:a.children},r=[];let l=0;for(r.push(n);r.length;){l=l+1;const o=r.pop();if((s=o==null?void 0:o.children)==null?void 0:s.length){const u=o.children.map(c=>J(M({},c),{id:`${c.path}-${l}`}));r.push(...u)}else o.id=`${o.path}-${l}`}return n},St=e=>{var r;const t=M({},e),a={name:t.path,path:t.path,key:t.path,label:t.path,children:t.children.filter(l=>l.isFolder).map(l=>J(M({},l),{parent:{name:t.name,path:t.path},key:"",label:""}))},n=[];for(n.push(...a.children);n.length;){const l=n.pop();l.isFolder&&(l.children=l.children.filter(o=>o.isFolder).map(o=>J(M({},o),{parent:{name:l.name,path:l.path},key:"",label:""})),l.children.length?n.push(...l.children):Reflect.deleteProperty(l,"children"));const s=l.path.split((r=l==null?void 0:l.parent)==null?void 0:r.path);l.label=s[s.length-1],l.key=l.path}return[a]},_e=new Map,Bt=(e,t)=>{var s;const a=_e.get(e);if(a)return a;const n=t;let r=null;const l=[];for(l.push(n);l.length;){const o=l.pop();if(o.path===e){r=o,_e.set(e,o);break}((s=o.children)==null?void 0:s.length)&&l.push(...o.children)}return r},Tt=e=>{const t=Pe({graphIns:null}),a=m(!0),n=m(!0);return{graphRaw:t,initGraph:(l,s)=>{l&&a.value&&Ie(()=>{t.graphIns=new Me.TreeGraph({container:e.value,modes:{default:[{type:"collapse-expand",onChange:function(u,c){const d=u.getModel();return d.collapsed=c,!0}},"drag-canvas",{type:"zoom-canvas",enableOptimize:!1}]},defaultNode:{size:26,anchorPoints:[[0,.5],[1,.5]]},defaultEdge:{type:"cubic-horizontal"},plugins:s,layout:{type:"compactBox",direction:"LR",getId:function(u){return u.id},getHeight:function(){return 20},getWidth:function(){return 20},getVGap:function(){return 10},getHGap:function(){return 100}}}),t.graphIns.node(o=>{let u={label:o.name,labelCfg:{offset:10,position:o.children&&o.children.length>0?"left":"right"}};return(o==null?void 0:o.isDep)&&(u=J(M({},u),{style:{shadowBlur:10,fill:"#1a414e",stroke:"black"}})),u}),t.graphIns.on("afterlayout",o=>{a.value=!1,n.value=!1}),t.graphIns.data(l),t.graphIns.render(),t.graphIns.fitView()})},loading:n}};var P=(e,t)=>{const a=e.__vccOpts||e;for(const[n,r]of t)a[n]=r;return a};const At=N({name:"Graph",components:{NSpin:fe,NRadio:Q,NRadioGroup:X,NSwitch:Le,NTreeSelect:ze,NSpace:O},setup(){const e=x(),t=m(null),[a]=Et("miniMap","miniMap"),[n]=kt("tooltip"),r=m(null),{initGraph:l,graphRaw:s,loading:o}=Tt(t),{onFetchResponse:u,data:c}=G(`http://localhost:${window.preloadState.port}/graph`,{method:"GET"}).json();u(b=>{b.status===200&&(r.value=he(c.value.tree,c.value.entry),l(r.value,[a.value,n.value]))});const d=Fe((b,w)=>{s.graphIns&&(s.graphIns.changeSize(b,w),s.graphIns.fitView(20))},100);ge(t,b=>{const w=b[0],{width:D,height:E}=w.contentRect;d(D,E)});const i=m("project"),$=[{label:"\u9879\u76EE\u7ED3\u6784",value:"project"},{label:"\u6A21\u5757\u7ED3\u6784",value:"module"}];Y(i,(b,w)=>{var D,E,U;b==="project"&&((D=s.graphIns)==null||D.changeData(he(c.value.tree,c.value.entry))),b==="module"&&((E=s.graphIns)==null||E.changeData(Ct(c.value.nodes,c.value.entry)),g.value=!1),(U=s.graphIns)==null||U.fitView()});const g=m(!1),C=R(()=>i.value!=="project");Y(g,b=>{setTimeout(()=>{var D,E;let w=r.value;b===!0&&(w=pe(w,c.value.deps,c.value.entry)),(D=s.graphIns)==null||D.changeData(w),(E=s.graphIns)==null||E.fitCenter()},300)});const f=m([]),F=m("");return Y(r,()=>{r.value&&(f.value=St(c.value.tree),f.value.length&&(F.value=f.value[0].key))}),{loading:o,graphRef:t,graphType:$,selectGraphType:i,showDeps:g,disableShowDeps:C,dirOpts:f,dirSrc:F,handleChangeDir:(b,w)=>{var D;try{if(r.value&&s.graphIns){let E=Bt(b,r.value);if(E)g.value&&(E=pe(E,c.value.deps,c.value.entry)),s.graphIns.changeData(E),(D=s.graphIns)==null||D.fitView(),F.value=b;else throw new Error}else throw new Error}catch(E){console.log(E),e.error({meta:"\u8B66\u544A",content:"\u65E0\u6CD5\u89E3\u6790\u8BE5\u76EE\u5F55"})}}}}}),Nt={class:"graph"},Pt={class:"graph-main-wrapper"},It={class:"graph-tools"},Mt={class:"graph-tools-panel"},Lt={class:"graph-tools-panel-item"},zt={class:"graph-tools-panel-item-main"},Rt=T(" \u56FE\u7C7B\u578B\uFF1A "),Ot={class:"graph-tools-panel-item-main"},Vt=T(" \u5F53\u524D\u76EE\u5F55\uFF1A "),Ut={class:"graph-tools-panel-item"},jt=T(" \u4F9D\u8D56\u6807\u8BB0\uFF1A "),Gt={id:"graph-root"},Ht={class:"graph-container",ref:"graphRef"},Yt=_("div",{id:"miniMap"},null,-1),Wt={id:"tooltip",class:"tooltip-wrap",ref:"tooltipRef"};function qt(e,t,a,n,r,l){const s=p("n-radio"),o=p("n-space"),u=p("n-radio-group"),c=p("n-tree-select"),d=p("n-switch"),i=p("n-spin");return y(),B("div",Nt,[h(i,{size:"large",show:e.loading},{default:v(()=>[_("div",Pt,[_("div",It,[_("div",Mt,[_("div",Lt,[_("div",zt,[Rt,h(u,{value:e.selectGraphType,"onUpdate:value":t[0]||(t[0]=$=>e.selectGraphType=$),name:"radiogroup"},{default:v(()=>[h(o,null,{default:v(()=>[(y(!0),B(L,null,j(e.graphType,$=>(y(),A(s,{key:$.value,value:$.value},{default:v(()=>[T(I($.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_("div",Ot,[Vt,h(c,{options:e.dirOpts,"virtual-scroll":"",value:e.dirSrc,"show-path":!0,separator:"","onUpdate:value":e.handleChangeDir},null,8,["options","value","onUpdate:value"])])]),_("div",Ut,[jt,h(d,{value:e.showDeps,"onUpdate:value":t[1]||(t[1]=$=>e.showDeps=$),disabled:e.disableShowDeps},null,8,["value","disabled"])])])]),_("div",Gt,[_("div",Ht,null,512),Yt,_("div",Wt,null,512)])])]),_:1},8,["show"])])}var Jt=P(At,[["render",qt]]);const Kt=e=>{if(!e)return 0+"b";let t=e+"b",a=[e],n=0,r=["B","KB","MB","GB","TB"];for(;a.length;){const l=a.pop(),s=Number(l)/1024;n=n+1,t=s.toFixed(2)+r[n],s>1024&&a.push(s)}return t},ie=()=>{const e=[{label:"\u524D5",value:5},{label:"\u524D10",value:10},{label:"\u524D15",value:15}];return{value:m(e[0].value),limitOptions:e}},te=(e,t)=>{const a=Fe((n,r)=>{e.value&&e.value.changeSize(n,r)});ge(t,n=>{const r=n[0],{width:l,height:s}=r.contentRect;a(l,s)})};const Qt=N({name:"fileSizeChart",components:{NSpace:O,NRadio:Q,NRadioGroup:X,NSelect:ee},setup(e,{emit:t}){const a=m(),n=m(),r=m("folder"),l=m({}),s=f=>{if(Number(f)in l.value)return l.value[f];{const F=Kt(f);return l.value[f]=F,F}},o=f=>f.slice(0).sort((F,k)=>k.fileSize-F.fileSize),{value:u,limitOptions:c}=ie(),d=R(()=>`http://localhost:${window.preloadState.port}/chart/size?limit=${u.value}`),{onFetchResponse:i,data:$,isFetching:g}=G(d,{refetch:!0}).json();i(()=>{var F,k,b,w;if($.value===null)return;const f=r.value==="folder"?$.value.tree:$.value.nodes;n.value?n.value.changeData(o(f)):(n.value=new re(a.value,{data:o(f),width:(k=(F=a.value)==null?void 0:F.offsetWidth)!=null?k:0,height:(w=(b=a.value)==null?void 0:b.offsetHeight)!=null?w:0,xField:"fileName",yField:"fileSize",padding:"auto",color:"#a3a3c2",appendPadding:10,tooltip:{showTitle:!0,title:"\u70B9\u51FB\u67F1\u4F53\u4EE5\u67E5\u770B\u6587\u4EF6\u8DEF\u5F84",formatter(D){return{name:"\u6587\u4EF6\u5927\u5C0F",value:`${s(D.fileSize)}`}}}}),n.value.render(),n.value.on("element:click",D=>{var U;const E=D.data;if(E.data){const S=(U=E.data)==null?void 0:U.filePath;t("handleClick",S)}}))}),te(n,a);const C=[{value:"folder",label:"\u76EE\u5F55"},{value:"module",label:"\u6A21\u5757"}];return Y(r,f=>{if($.value===null)return;const F=f==="folder"?$.value.tree:$.value.nodes;n.value&&n.value.changeData(o(F))}),{chartRef:a,chartTypes:C,chartType:r,limitOptions:c,limit:u}}}),Xt=e=>(W("data-v-1e37b4c9"),e=e(),q(),e),Zt=Xt(()=>_("div",{class:"chart-title"},"\u6587\u4EF6\u5927\u5C0F",-1)),xt={class:"chart-main",id:"size-chart",ref:"chartRef"},ea={class:"chart-tool"};function ta(e,t,a,n,r,l){const s=p("n-radio"),o=p("n-space"),u=p("n-radio-group"),c=p("n-select");return y(),B(L,null,[Zt,_("div",xt,null,512),_("div",ea,[h(o,null,{default:v(()=>[h(u,{value:e.chartType,"onUpdate:value":t[0]||(t[0]=d=>e.chartType=d),name:""},{default:v(()=>[h(o,null,{default:v(()=>[(y(!0),B(L,null,j(e.chartTypes,d=>(y(),A(s,{key:d.value,value:d.value},{default:v(()=>[T(I(d.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"]),h(c,{size:"small",value:e.limit,"onUpdate:value":t[1]||(t[1]=d=>e.limit=d),options:e.limitOptions},null,8,["value","options"])]),_:1})])],64)}var aa=P(Qt,[["render",ta],["__scopeId","data-v-1e37b4c9"]]);const De=()=>({value:m("down"),sortOptions:[{label:"\u5347\u5E8F",value:"up"},{label:"\u5012\u5E8F",value:"down"}]});const na=N({name:"dependenceChart",components:{NSpace:O,NSelect:ee,NRadio:Q,NRadioGroup:X},setup(e,{emit:t}){const a=m(),n=m(),{value:r,limitOptions:l}=ie(),{value:s,sortOptions:o}=De(),u=R(()=>`http://localhost:${window.preloadState.port}/chart/deps?limit=${r.value}&sort=${s.value}`),{onFetchResponse:c,data:d,onFetchError:i}=G(u,{refetch:!0}).json(),$=R(()=>d.value&&d.value.nodes?d.value.nodes:[]);return i(g=>{console.log(g)}),c(()=>{var g,C,f,F;n.value?n.value.changeData($.value):(n.value=new re(a.value,{data:$.value,width:(C=(g=a.value)==null?void 0:g.offsetWidth)!=null?C:0,height:(F=(f=a.value)==null?void 0:f.offsetHeight)!=null?F:0,xField:"fileName",yField:"depsLength",padding:"auto",color:"#ff4d4d",appendPadding:10,tooltip:{showTitle:!0,title:"\u70B9\u51FB\u67F1\u4F53\u4EE5\u67E5\u770B\u6587\u4EF6\u8DEF\u5F84",formatter(k){return{name:"\u4F9D\u8D56\u6570\u91CF",value:`${k.depsLength}`}}}}),n.value.on("element:click",k=>{var w;const b=k.data;if(b.data){const D=(w=b.data)==null?void 0:w.filePath;t("handleClick",D)}}),n.value.render())}),te(n,a),{chartRef:a,limitOptions:l,limit:r,sortType:s,sortOptions:o}}}),oa=e=>(W("data-v-a324f3d4"),e=e(),q(),e),sa=oa(()=>_("div",{class:"chart-title"},"\u4F9D\u8D56\u6570",-1)),la={class:"chart-main",id:"deps-chart",ref:"chartRef"},ra={class:"chart-tool"};function ua(e,t,a,n,r,l){const s=p("n-select"),o=p("n-radio"),u=p("n-space"),c=p("n-radio-group");return y(),B(L,null,[sa,_("div",la,null,512),_("div",ra,[h(u,null,{default:v(()=>[h(s,{size:"small",value:e.limit,"onUpdate:value":t[0]||(t[0]=d=>e.limit=d),options:e.limitOptions},null,8,["value","options"]),h(c,{value:e.sortType,"onUpdate:value":t[1]||(t[1]=d=>e.sortType=d),name:"radiogroup"},{default:v(()=>[h(u,null,{default:v(()=>[(y(!0),B(L,null,j(e.sortOptions,d=>(y(),A(o,{key:d.value,value:d.value},{default:v(()=>[T(I(d.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})])],64)}var ia=P(na,[["render",ua],["__scopeId","data-v-a324f3d4"]]);const ca=N({name:"referenceChart",components:{NSpace:O,NSelect:ee,NRadio:Q,NRadioGroup:X},setup(e,{emit:t}){const a=x(),n=m(),r=m(),{value:l,limitOptions:s}=ie(),{value:o,sortOptions:u}=De(),c=R(()=>`http://localhost:${window.preloadState.port}/chart/reference?limit=${l.value}&sort=${o.value}`),{onFetchResponse:d,data:i,onFetchError:$}=G(c,{refetch:!0}).json(),g=R(()=>i.value&&i.value.nodes?i.value.nodes.map(C=>M({},C)):[]);return $(C=>{console.log(C),a.error({meta:"\u8B66\u544A",content:"\u52A0\u8F7D\u56FE\u8868\u5931\u8D25"})}),d(()=>{var C,f,F,k;r.value?(r.value.changeData(g.value),r.value.update({})):(r.value=new re(n.value,{data:g.value,width:(f=(C=n.value)==null?void 0:C.offsetWidth)!=null?f:0,height:(k=(F=n.value)==null?void 0:F.offsetHeight)!=null?k:0,xField:"fileName",yField:"reference",padding:"auto",appendPadding:10,color:"#40bf80",tooltip:{showTitle:!0,title:"\u70B9\u51FB\u67F1\u4F53\u4EE5\u67E5\u770B\u6587\u4EF6\u8DEF\u5F84",formatter(b){return{name:"\u88AB\u5F15\u7528\u6B21\u6570",value:`${b.reference}`}}},xAxis:{label:{formatter(b,w,D){var U;const E=(U=g.value[D])==null?void 0:U.fileName;return E!=null?E:b}}}}),r.value.render(),r.value.on("element:click",b=>{var D;const w=b.data;if(w.data){const E=(D=w.data)==null?void 0:D.filePath;t("handleClick",E)}}))}),te(r,n),{chartRef:n,limitOptions:s,limit:l,sortType:o,sortOptions:u}}}),da=e=>(W("data-v-76f0b21d"),e=e(),q(),e),pa=da(()=>_("div",{class:"chart-title"},"\u88AB\u5F15\u7528\u6B21\u6570",-1)),ha={class:"chart-main",id:"reference-chart",ref:"chartRef"},_a={class:"chart-tool"};function va(e,t,a,n,r,l){const s=p("n-select"),o=p("n-radio"),u=p("n-space"),c=p("n-radio-group");return y(),B(L,null,[pa,_("div",ha,null,512),_("div",_a,[h(u,null,{default:v(()=>[h(s,{size:"small",value:e.limit,"onUpdate:value":t[0]||(t[0]=d=>e.limit=d),options:e.limitOptions},null,8,["value","options"]),h(c,{value:e.sortType,"onUpdate:value":t[1]||(t[1]=d=>e.sortType=d),name:"radiogroup"},{default:v(()=>[h(u,null,{default:v(()=>[(y(!0),B(L,null,j(e.sortOptions,d=>(y(),A(o,{key:d.value,value:d.value},{default:v(()=>[T(I(d.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})])],64)}var ma=P(ca,[["render",va],["__scopeId","data-v-76f0b21d"]]);const fa=N({name:"typesChart",components:{NSpace:O,NSelect:ee},setup(){const e=m(),t=m(),a=R(()=>`http://localhost:${window.preloadState.port}/chart/types`),{onFetchResponse:n,data:r,onFetchError:l}=G(a.value,{refetch:!0}).json(),s=R(()=>{var o,u;return(u=(o=r.value)==null?void 0:o.types)!=null?u:[]});return l(o=>{console.log(o)}),n(()=>{var o,u,c,d;t.value?t.value.changeData(s.value):(t.value=new Re(e.value,{data:s.value,width:(u=(o=e.value)==null?void 0:o.offsetWidth)!=null?u:0,height:(d=(c=e.value)==null?void 0:c.offsetHeight)!=null?d:0,angleField:"num",colorField:"fileType",padding:16,label:{type:"inner",offset:"-30%",content:({percent:i})=>`${(i*100).toFixed(0)}%`,style:{fontSize:14,textAlign:"center"}},interactions:[{type:"element-active"}]}),t.value.render())}),te(t,e),{chartRef:e}}}),ga=e=>(W("data-v-caf51c70"),e=e(),q(),e),Fa=ga(()=>_("div",{class:"chart-title"},"\u7C7B\u578B\u6BD4\u4F8B",-1)),$a={class:"chart-main",id:"types-chart",ref:"chartRef"};function ya(e,t,a,n,r,l){return y(),B(L,null,[Fa,_("div",$a,null,512)],64)}var ba=P(fa,[["render",ya],["__scopeId","data-v-caf51c70"]]);const Da=N({name:"Chart",components:{"size-chart":aa,"deps-chart":ia,"reference-chart":ma,"types-chart":ba},setup(){const e=m("");return{filePath:e,setFilePath:a=>{e.value=a}}}}),wa={class:"chart"},Ea=_("header",{class:"chart-header"},"Chart Analysis",-1),ka={class:"chart-content"},Ca={class:"chart-content-item"},Sa={class:"chart-content-item"},Ba={class:"chart-content-item"},Ta={class:"chart-content-item"};function Aa(e,t,a,n,r,l){const s=p("size-chart"),o=p("deps-chart"),u=p("reference-chart"),c=p("types-chart");return y(),B("div",wa,[Ea,$e(_("div",{class:"chart-helper"},"\u5F53\u524D\u6587\u4EF6: "+I(e.filePath),513),[[ye,e.filePath.length>0]]),_("section",ka,[_("div",Ca,[h(s,{onHandleClick:e.setFilePath},null,8,["onHandleClick"])]),_("div",Sa,[h(o,{onHandleClick:e.setFilePath},null,8,["onHandleClick"])]),_("div",Ba,[h(u,{onHandleClick:e.setFilePath},null,8,["onHandleClick"])]),_("div",Ta,[h(c)])])])}var Na=P(Da,[["render",Aa]]);const ve=e=>oe(e).format("YYYY-MM-DD"),Pa=e=>`${(Number(e)/1024).toFixed(2)}kb`,Ia=(e,t)=>[{type:"selection"},{title:"\u6587\u4EF6\u540D",key:"name",align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"ctime",align:"center",render(a){const n=a==null?void 0:a.ctime;return n?ve(n):"none"}},{title:"\u66F4\u65B0\u65F6\u95F4",key:"utime",align:"center",render(a){const n=a==null?void 0:a.utime;return n?ve(n):"none"}},{title:"\u6587\u4EF6\u5927\u5C0F",key:"fileSize",align:"center",render(a){const n=a==null?void 0:a.fileSize;return n?Pa(n):"none"}},{title:"\u4F9D\u8D56\u6570",key:"deps",align:"center",render(a){return a.deps.length}},{title:"\u64CD\u4F5C",key:"action",align:"center",render(a){return z("div",{style:"width:100%;display:flex;justify-content:center"},[z(K,{text:!0,style:"margin-right:10px",onClick:n=>{e(a)}},{default:()=>"\u8BE6\u60C5"}),z(K,{text:!0,textColor:"red",onClick:()=>{t(a)}},{default:()=>"\u5220\u9664"})])}}];const Ma=N({name:"fileNodeDetail",props:{detail:{type:Object,default:()=>null},visible:{type:Boolean,default:!1},setDetailVisible:{type:Function,default:()=>{}}},components:{NModal:ue,NList:Oe,NListItem:Ve,NSkeleton:be,NSpace:O},setup(){}}),La={key:1,class:"table-detail"},za={class:"table-detail-path"},Ra={class:"table-detail-deps-list"},Oa={class:"table-detail-deps-list-title"};function Va(e,t,a,n,r,l){const s=p("n-skeleton"),o=p("n-list-item"),u=p("n-list"),c=p("n-space"),d=p("n-modal");return y(),A(d,{show:e.visible,"onUpdate:show":t[0]||(t[0]=i=>e.visible=i),preset:"card",size:"medium",style:{width:"60vw"},title:"\u8BE6\u60C5\u4FE1\u606F",bordered:!1,"mask-closable":"",onUpdateShow:e.setDetailVisible},{default:v(()=>[e.detail?(y(),B("section",La,[h(c,{vertical:!0},{default:v(()=>{var i,$;return[_("div",za,"\u8DEF\u5F84\uFF1A"+I(($=(i=e.detail)==null?void 0:i.path)!=null?$:""),1),_("div",Ra,[_("div",Oa,"\u5185\u90E8\u4F9D\u8D56\uFF1A"+I(e.detail.deps.length)+" \u4E2A",1),h(u,{bordered:""},{default:v(()=>[(y(!0),B(L,null,j(e.detail.deps,g=>(y(),A(o,{key:g.path},{default:v(()=>[T(I(g.path),1)]),_:2},1024))),128))]),_:1})])]}),_:1})])):(y(),A(s,{key:0,text:"",repeat:5}))]),_:1},8,["show","onUpdateShow"])}var Ua=P(Ma,[["render",Va],["__scopeId","data-v-eb5c921a"]]);const ja=N({name:"LoadingModal",props:{visible:{type:Boolean,default:!1},limit:{type:Number,default:1},success:{type:Number,default:1},fail:{type:Number,default:0}},components:{NModal:ue,NSpace:O,NProgress:Ue},setup(e){return{percent:R(()=>(Number(e.success+e.fail)/Number(e.limit)*100).toFixed(0))}}}),Ga=_("div",null,"\u6B63\u5728\u5220\u9664\u5566\uFF0C\u522B\u6025\uFF5E\uFF5E",-1),Ha={style:{color:"lightblue"}},Ya={style:{color:"red"}};function Wa(e,t,a,n,r,l){const s=p("n-progress"),o=p("n-space"),u=p("n-modal");return y(),A(u,{show:e.visible,"onUpdate:show":t[0]||(t[0]=c=>e.visible=c),preset:"card",size:"medium",style:{width:"40vw"},title:"\u4EFB\u52A1\u8FDB\u5EA6",bordered:!1,"mask-closable":!1},{default:v(()=>[h(o,{vertical:!0},{default:v(()=>[Ga,h(s,{type:"line",status:"success",height:24,percentage:Number(e.percent),"border-radius":"12px 12px 12px 12px"},{default:v(()=>[T(I(e.percent)+"% ",1)]),_:1},8,["percentage"]),_("div",Ha,"\u5DF2\u5B8C\u6210\u4E86"+I(e.success)+"\u4E2A",1),_("div",Ya,"\u6709"+I(e.fail)+"\u4E2A\u5220\u9664\u5931\u8D25\u4E86\uFF01",1)]),_:1})]),_:1},8,["show"])}var qa=P(ja,[["render",Wa]]);const Ja=N({name:"Table",components:{NDataTable:je,NFormItem:Ge,NButton:K,NInput:He,NForm:Ye,NDatePicker:We,NPagination:qe,NSpace:O,Detail:Ua,LoadingModal:qa},setup(){const e=x(),t=Je(),a=m(!1),n=m(0),r=m(),l=m(!1),s=S=>{l.value=S},c=Ia(S=>{l.value=!0,r.value=S},S=>{console.log(S),t.warning({title:"\u63D0\u793A",content:"\u786E\u5B9A\u8981\u5220\u9664\u6307\u5B9A\u7684\u6587\u4EF6\u5417\uFF1F",positiveText:"\u5220\u9664",negativeText:"\u4E0D\u5220",onPositiveClick:async()=>{if(console.log(S.path),(await se.post(`http://localhost:${window.preloadState.port}/table/delete`,{path:S.path})).data.result)return f(),e.success({title:"\u5220\u9664\u6210\u529F"}),!0;e.error({title:"\u5220\u9664\u5931\u8D25"})}})}),d=R(()=>g.value?g.value.data:[]),i=Ke({page:1,pageSize:10,name:"",updatedAt:null,createdAt:null}),$=R(()=>{const S=new URL(`http://localhost:${window.preloadState.port}/table`),V=S.searchParams;return i.createdAt&&(V.set("ctimeStart",String(i.createdAt[0])),V.set("ctimeEnd",String(i.createdAt[1]))),i.updatedAt&&(V.set("utimeStart",String(i.updatedAt[0])),V.set("utimeEnd",String(i.updatedAt[1]))),i.name&&i.name!==""&&V.set("name",i.name),V.set("page",String(i.page)),V.set("pageSize",String(i.pageSize)),S.toString()}),{data:g,onFetchFinally:C,execute:f}=G($,{refetch:!0,beforeFetch(){a.value=!0}}).json();C(()=>{a.value=!1,n.value=g.value?g.value.total:0});const F=S=>{i.page=S},k=m(!1),b=m([]),w=m(0),D=m(0);return{searchParams:i,loading:a,tableData:d,tableColumn:c,total:n,changePage:F,detailInfo:r,detailVisible:l,setDetailVisible:s,handleSelect:S=>{b.value=S},currentSelections:b,batchRemoveFiles:()=>{t.warning({title:"\u63D0\u793A",content:"\u786E\u5B9A\u8981\u5220\u9664\u6307\u5B9A\u7684\u6587\u4EF6\u5417\uFF1F",positiveText:"\u5220\u9664",negativeText:"\u4E0D\u5220",onPositiveClick:()=>{k.value=!0;for(let S=0;S<b.value.length;S++){const V=b.value[S];se.post(`http://localhost:${window.preloadState.port}/table/delete`,{path:V}).then(ne=>{ne.data&&(w.value=w.value+1)}).catch(ne=>{D.value=D.value+1}).finally(()=>{w.value+D.value===b.value.length&&setTimeout(()=>{k.value=!1,D.value=0,w.value=0,f()},2e3)})}}})},loadingModalVisible:k,success:w,fail:D}}}),Ka={class:"table"},Qa={class:"table-tool"},Xa=T("\u641C\u7D22"),Za={class:"table-container"},xa=T("\u5220\u9664");function en(e,t,a,n,r,l){const s=p("n-input"),o=p("n-form-item"),u=p("n-date-picker"),c=p("n-button"),d=p("n-form"),i=p("n-data-table"),$=p("n-pagination"),g=p("n-space"),C=p("Detail"),f=p("LoadingModal");return y(),B("div",Ka,[_("section",Qa,[h(d,{inline:"","label-width":80,model:e.searchParams,"label-placement":"left",ref:"formRef"},{default:v(()=>[h(o,{label:"\u6587\u4EF6\u540D",path:"searchParams.name"},{default:v(()=>[h(s,{placeholder:"\u6587\u4EF6\u540D\u6216\u8DEF\u5F84",value:e.searchParams.name,"onUpdate:value":t[0]||(t[0]=F=>e.searchParams.name=F)},null,8,["value"])]),_:1}),h(o,{label:"\u66F4\u65B0\u65F6\u95F4",path:"searchParams.updatedAt"},{default:v(()=>[h(u,{value:e.searchParams.updatedAt,"onUpdate:value":t[1]||(t[1]=F=>e.searchParams.updatedAt=F),type:"datetimerange",clearable:""},null,8,["value"])]),_:1}),h(o,{label:"\u521B\u5EFA\u65F6\u95F4",path:"searchParams.createdAt"},{default:v(()=>[h(u,{value:e.searchParams.createdAt,"onUpdate:value":t[2]||(t[2]=F=>e.searchParams.createdAt=F),type:"datetimerange",clearable:""},null,8,["value"])]),_:1}),h(o,null,{default:v(()=>[h(c,null,{default:v(()=>[Xa]),_:1})]),_:1})]),_:1},8,["model"])]),_("section",Za,[h(g,{vertical:""},{default:v(()=>[e.currentSelections.length?(y(),A(c,{key:0,onClick:e.batchRemoveFiles},{default:v(()=>[xa]),_:1},8,["onClick"])):Qe("",!0),h(i,{columns:e.tableColumn,data:e.tableData,loading:e.loading,"row-key":F=>F.path,"onUpdate:checkedRowKeys":e.handleSelect},null,8,["columns","data","loading","row-key","onUpdate:checkedRowKeys"]),h(g,{justify:"center"},{default:v(()=>[h($,{page:e.searchParams.page,"onUpdate:page":t[3]||(t[3]=F=>e.searchParams.page=F),"item-count":e.total,onChange:e.changePage},null,8,["page","item-count","onChange"])]),_:1})]),_:1})]),h(C,{detail:e.detailInfo,visible:e.detailVisible,setDetailVisible:e.setDetailVisible},null,8,["detail","visible","setDetailVisible"]),h(f,{visible:e.loadingModalVisible,limit:e.currentSelections.length,success:e.success,fail:e.fail},null,8,["visible","limit","success","fail"])])}var tn=P(Ja,[["render",en]]);const an=["#5B8FF9","#61DDAA","#65789B","#F6BD16","#7262fd","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],nn=["#5B8FF9","#CDDDFD","#61DDAA","#CDF3E4","#65789B","#CED4DE","#F6BD16","#FCEBB9","#7262fd","#D3CEFD","#78D3F8","#D3EEF9","#9661BC","#DECFEA","#F6903D","#FFE0C7","#008685","#BBDEDE","#F08BB4","#FFE0ED"];H.registerLanguage("javascript",Xe);H.registerLanguage("css",Ze);H.registerLanguage("less",xe);H.registerLanguage("scss",et);H.registerLanguage("typescript",tt);H.registerLanguage("markdown",at);const me={js:"javascript",css:"css",less:"less",scss:"scss",ts:"typescript",tsx:"typescript",md:"markdown"},on=N({components:{NModal:ue,NButton:K,NSkeleton:be,NSpace:O,NCode:nt},props:{visible:{type:Boolean,require:!0,default:!1},path:{type:String,default:""},onTogle:{type:Function,default:()=>{}}},setup(e){const t=m(""),a=m(!0),n=m(!1),r=x(),l=m("javascript"),s=o=>{if(n.value)return;a.value=!0,n.value=!0;const u=o.split("."),c=u[u.length-1];c in me?l.value=me[c]:l.value="markdown",se.post(`http://localhost:${window.preloadState.port}/pkg/readContent`,{path:o}).then(d=>{if(d.data)t.value=d.data,a.value=!1;else throw new Error}).catch(d=>{r.error({meta:"\u63D0\u793A",content:"\u52A0\u8F7D\u6587\u4EF6\u5931\u8D25"})})};return Y(e,(o,u)=>{o.visible===!0&&o.path&&s(o.path)}),Y(l,()=>{console.log(l.value)}),{codeType:l,code:t,loading:a,hljs:H}}}),sn=e=>(W("data-v-19339d59"),e=e(),q(),e),ln=sn(()=>_("div",null,"\u4EE3\u7801\u9884\u89C8",-1)),rn={class:"preview"},un=["title"],cn={class:"body"},dn=T("\u5173\u95ED");function pn(e,t,a,n,r,l){const s=p("n-skeleton"),o=p("n-code"),u=p("n-button"),c=p("n-modal");return y(),A(c,{show:e.visible,"onUpdate:show":t[1]||(t[1]=d=>e.visible=d),"display-directive":"if",preset:"dialog","mask-closable":"",onUpdateShow:e.onTogle,title:"\u4EE3\u7801\u9884\u89C8"},{header:v(()=>[ln]),action:v(()=>[h(u,{size:"small",onClick:t[0]||(t[0]=d=>e.onTogle(!1))},{default:v(()=>[dn]),_:1})]),default:v(()=>[_("div",rn,[_("section",{class:"head",title:e.path}," \u6587\u4EF6\u8DEF\u5F84: "+I(e.path),9,un),_("section",cn,[e.loading?(y(),A(s,{key:0,text:"",repeat:8})):(y(),A(o,{key:1,hljs:e.hljs,code:e.code,language:e.codeType,"word-wrap":""},null,8,["hljs","code","language"]))])])]),_:1},8,["show","onUpdateShow"])}var hn=P(on,[["render",pn],["__scopeId","data-v-19339d59"]]);const _n=N({name:"package",components:{NSpin:fe,NCollapseItem:ot,NCollapse:st,NButton:K,NRadioGroup:X,NSpace:O,NRadio:Q,NNumberAnimation:lt,PreviewModal:hn},setup(){const e=m(null),t=m([]),a=m(!0),{onFetchResponse:n,data:r}=G(`http://localhost:${window.preloadState.port}/pkg`).json();n(d=>{r.value!==null&&(t.value=r.value.deps,e.value=new rt("word-cloud",{data:r.value.deps,wordField:"name",weightField:"count",colorField:"name",wordStyle:{fontFamily:"Verdana",fontSize:[8,32],rotation:0},random:()=>.5}),e.value.update({theme:{styleSheet:{brandColor:"#5B8FF9",paletteQualitative10:an,paletteQualitative20:nn}}}),e.value.render(),a.value=!1)});const l=m("down");ut(()=>{l.value==="up"?t.value=t.value.sort((d,i)=>d.count-i.count):t.value=t.value.sort((d,i)=>i.count-d.count)});const s=m(""),o=m(!1);return{chartLoading:a,chartData:t,sort:l,previewFile:d=>{s.value=d,o.value=!0},previewPath:s,previewModalVisible:o,onTogle:d=>{o.value=d}}}}),vn={class:"pkg"},mn=_("div",{class:"header"},"Packages",-1),fn={class:"content"},gn={class:"content-chart"},Fn={class:"loading-wrapper"},$n=_("div",{id:"word-cloud"},null,-1),yn={class:"content-list"},bn={class:"total"},Dn=T(" \u5171 "),wn=T(" \u4E2A\u7B2C\u4E09\u65B9\u4F9D\u8D56"),En=T(" \u5012\u5E8F "),kn=T(" \u5347\u5E8F "),Cn={class:"reference-path-name"},Sn=T("\u9884\u89C8");function Bn(e,t,a,n,r,l){const s=p("n-spin"),o=p("n-number-animation"),u=p("n-radio"),c=p("n-space"),d=p("n-radio-group"),i=p("dir"),$=p("n-button"),g=p("n-collapse-item"),C=p("n-collapse"),f=p("PreviewModal");return y(),B(L,null,[_("div",vn,[mn,_("div",fn,[_("section",gn,[$e(_("div",Fn,[h(s,{size:"large",show:e.chartLoading},null,8,["show"])],512),[[ye,e.chartLoading]]),$n]),_("section",yn,[_("header",null,[_("div",bn,[Dn,h(o,{ref:"numberAnimationInstRef",from:0,to:e.chartData.length},null,8,["to"]),wn]),h(i,{class:"sort"},{default:v(()=>[h(d,{value:e.sort,"onUpdate:value":t[0]||(t[0]=F=>e.sort=F),name:"sort"},{default:v(()=>[h(c,null,{default:v(()=>[h(u,{value:"down"},{default:v(()=>[En]),_:1}),h(u,{value:"up"},{default:v(()=>[kn]),_:1})]),_:1})]),_:1},8,["value"])]),_:1})]),h(C,null,{default:v(()=>[(y(!0),B(L,null,j(e.chartData,F=>(y(),A(g,{key:F.name,name:F.name,title:`${F.name}`},{"header-extra":v(()=>[T("\u5171\u88AB\u5F15\u7528\u4E86"+I(F.count)+"\u6B21",1)]),default:v(()=>[(y(!0),B(L,null,j(F.reference,k=>(y(),B("li",{class:"reference-path",key:k},[_("div",Cn,"\u8DEF\u5F84:"+I(k),1),h($,{text:"",quaternary:"",type:"primary",onClick:b=>e.previewFile(k)},{default:v(()=>[Sn]),_:2},1032,["onClick"])]))),128))]),_:2},1032,["name","title"]))),128))]),_:1})])])]),h(f,{visible:e.previewModalVisible,path:e.previewPath,onTogle:e.onTogle},null,8,["visible","path","onTogle"])],64)}var Tn=P(_n,[["render",Bn]]);const An=N({name:"Menu",components:{"n-menu":it},props:{collapsed:{type:Boolean,require:!0}},setup(e,t){const a=m([]),n=ct();return dt(()=>{var o;const s=Ee.find(u=>u.name==="Layout");s&&((o=s.children)==null?void 0:o.length)&&(a.value=s.children.map(u=>{var c;return{label:(c=u.meta)==null?void 0:c.title,key:u.path}}))}),{menuOptions:a,renderMenuIcon:s=>s.key==="/graph"?z(Z,null,{default:()=>z(pt)}):s.key==="/chart"?z(Z,null,{default:()=>z(ht)}):s.key==="/table"?z(Z,null,{default:()=>z(_t)}):z(Z,null,{default:()=>z(vt)}),handleClick:(s,o)=>{n.push({path:s})}}}});function Nn(e,t,a,n,r,l){const s=p("n-menu");return y(),A(s,{collapsed:e.collapsed,"collapsed-width":64,"collapsed-icon-size":22,options:e.menuOptions,"render-icon":e.renderMenuIcon,"onUpdate:value":e.handleClick},null,8,["collapsed","options","render-icon","onUpdate:value"])}var Pn=P(An,[["render",Nn]]);const In=N({name:"Layout",components:{NSpace:O,NLayout:mt,Menu:Pn,NLayoutSider:ft},setup(){return{collapsed:m(!0)}}});function Mn(e,t,a,n,r,l){const s=p("Menu"),o=p("n-layout-sider"),u=p("router-view"),c=p("n-layout"),d=p("n-space");return y(),A(d,{vertical:""},{default:v(()=>[h(c,{"content-style":{height:"100vh"},"has-sider":""},{default:v(()=>[h(o,{bordered:"","collapse-mode":"width","collapsed-width":64,width:240,collapsed:e.collapsed,"show-trigger":"",onCollapse:t[0]||(t[0]=i=>e.collapsed=!0),onExpand:t[1]||(t[1]=i=>e.collapsed=!1)},{default:v(()=>[h(s,{collapsed:e.collapsed},null,8,["collapsed"])]),_:1},8,["collapsed"]),h(c,{embedded:""},{default:v(()=>[h(u)]),_:1})]),_:1})]),_:1})}var we=P(In,[["render",Mn]]);const Ee=[{path:"/",component:we,name:"Layout",redirect(){return{name:"Graph"}},children:[{path:"/graph",component:Jt,name:"Graph",meta:{title:"\u4F9D\u8D56\u6811"}},{path:"/chart",component:Na,name:"Chart",meta:{title:"\u5206\u6790\u56FE"}},{path:"/table",component:tn,name:"Table",meta:{title:"\u8868\u683C\u5206\u6790"}},{path:"/pkg",component:Tn,name:"pkg",meta:{title:"\u7B2C\u4E09\u65B9\u4F9D\u8D56"}}]}],Ln=gt({history:Ft(),routes:Ee});const zn=N({name:"PageLoading"}),ae=e=>(W("data-v-9f7b7bb4"),e=e(),q(),e),Rn={class:"sk-folding-cube"},On=ae(()=>_("div",{class:"sk-cube1 sk-cube"},null,-1)),Vn=ae(()=>_("div",{class:"sk-cube2 sk-cube"},null,-1)),Un=ae(()=>_("div",{class:"sk-cube4 sk-cube"},null,-1)),jn=ae(()=>_("div",{class:"sk-cube3 sk-cube"},null,-1)),Gn=[On,Vn,Un,jn];function Hn(e,t,a,n,r,l){return y(),B("div",Rn,Gn)}var Yn=P(zn,[["render",Hn],["__scopeId","data-v-9f7b7bb4"]]);const Wn=N({name:"App",components:{PageLoading:Yn,Layout:we,NDialogProvider:$t,NNotificationProvider:yt,NConfigProvider:bt},setup(){const e=m(!1);return le(()=>{setTimeout(()=>{e.value=!0},2e3)}),{isInitFinished:e}}}),qn={class:"container"},Jn={key:0,class:"loading-wrappper"},Kn=_("p",null,"\u8FD8\u5728\u521D\u59CB\u5316\u554A\uFF0C\u7B49\u4E00\u4E0B\uFF5E",-1),Qn={key:1,class:"main-wrapper"};function Xn(e,t,a,n,r,l){const s=p("PageLoading"),o=p("router-view"),u=p("n-notification-provider"),c=p("n-dialog-provider");return y(),A(c,null,{default:v(()=>[h(u,null,{default:v(()=>[_("div",qn,[e.isInitFinished?(y(),B("div",Qn,[h(o)])):(y(),B("div",Jn,[Kn,h(s)]))])]),_:1})]),_:1})}var Zn=P(Wn,[["render",Xn]]);Dt(Zn).use(Ln).mount("#app");
