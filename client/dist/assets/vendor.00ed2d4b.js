var ix=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get Base(){return tl},get Circle(){return Tpe},get Ellipse(){return kpe},get Image(){return Ipe},get Line(){return Dpe},get Marker(){return Lpe},get Path(){return rk},get Polygon(){return Hpe},get Polyline(){return jpe},get Rect(){return Kpe},get Text(){return Qpe}}),ax=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get Base(){return Fs},get Circle(){return oge},get Dom(){return lge},get Ellipse(){return cge},get Image(){return dge},get Line(){return vge},get Marker(){return gge},get Path(){return yge},get Polygon(){return xge},get Polyline(){return Sge},get Rect(){return _ge},get Text(){return Ige}});function t_(r,t){const e=Object.create(null),n=r.split(",");for(let i=0;i<n.length;i++)e[n[i]]=!0;return t?i=>!!e[i.toLowerCase()]:i=>!!e[i]}const Mae="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Iae=t_(Mae);function pF(r){return!!r||r===""}function r_(r){if(un(r)){const t={};for(let e=0;e<r.length;e++){const n=r[e],i=La(n)?Rae(n):r_(n);if(i)for(const a in i)t[a]=i[a]}return t}else{if(La(r))return r;if(ha(r))return r}}const Pae=/;(?![^(]*\))/g,Dae=/:(.+)/;function Rae(r){const t={};return r.split(Pae).forEach(e=>{if(e){const n=e.split(Dae);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function n_(r){let t="";if(La(r))t=r;else if(un(r))for(let e=0;e<r.length;e++){const n=n_(r[e]);n&&(t+=n+" ")}else if(ha(r))for(const e in r)r[e]&&(t+=e+" ");return t.trim()}const ldt=r=>r==null?"":un(r)||ha(r)&&(r.toString===xF||!vn(r.toString))?JSON.stringify(r,gF,2):String(r),gF=(r,t)=>t&&t.__v_isRef?gF(r,t.value):ov(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[n,i])=>(e[`${n} =>`]=i,e),{})}:yF(t)?{[`Set(${t.size})`]:[...t.values()]}:ha(t)&&!un(t)&&!wF(t)?String(t):t,li={},av=[],Js=()=>{},Oae=()=>!1,Lae=/^on[^a-z]/,ox=r=>Lae.test(r),i_=r=>r.startsWith("onUpdate:"),Oa=Object.assign,mF=(r,t)=>{const e=r.indexOf(t);e>-1&&r.splice(e,1)},Fae=Object.prototype.hasOwnProperty,zn=(r,t)=>Fae.call(r,t),un=Array.isArray,ov=r=>sx(r)==="[object Map]",yF=r=>sx(r)==="[object Set]",vn=r=>typeof r=="function",La=r=>typeof r=="string",a_=r=>typeof r=="symbol",ha=r=>r!==null&&typeof r=="object",bF=r=>ha(r)&&vn(r.then)&&vn(r.catch),xF=Object.prototype.toString,sx=r=>xF.call(r),Nae=r=>sx(r).slice(8,-1),wF=r=>sx(r)==="[object Object]",o_=r=>La(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,lx=t_(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ux=r=>{const t=Object.create(null);return e=>t[e]||(t[e]=r(e))},Bae=/-(\w)/g,xl=ux(r=>r.replace(Bae,(t,e)=>e?e.toUpperCase():"")),$ae=/\B([A-Z])/g,sv=ux(r=>r.replace($ae,"-$1").toLowerCase()),cx=ux(r=>r.charAt(0).toUpperCase()+r.slice(1)),s_=ux(r=>r?`on${cx(r)}`:""),jg=(r,t)=>!Object.is(r,t),l_=(r,t)=>{for(let e=0;e<r.length;e++)r[e](t)},fx=(r,t,e)=>{Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value:e})},SF=r=>{const t=parseFloat(r);return isNaN(t)?r:t};let CF;const zae=()=>CF||(CF=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let wl;const dx=[];class Gae{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&wl&&(this.parent=wl,this.index=(wl.scopes||(wl.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&(dx.push(this),wl=this)}off(){this.active&&(dx.pop(),wl=dx[dx.length-1])}stop(t){if(this.active){if(this.effects.forEach(e=>e.stop()),this.cleanups.forEach(e=>e()),this.scopes&&this.scopes.forEach(e=>e.stop(!0)),this.parent&&!t){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}function Uae(r,t){t=t||wl,t&&t.active&&t.effects.push(r)}function Vae(){return wl}function Hae(r){wl&&wl.cleanups.push(r)}const u_=r=>{const t=new Set(r);return t.w=0,t.n=0,t},EF=r=>(r.w&dc)>0,_F=r=>(r.n&dc)>0,Wae=({deps:r})=>{if(r.length)for(let t=0;t<r.length;t++)r[t].w|=dc},jae=r=>{const{deps:t}=r;if(t.length){let e=0;for(let n=0;n<t.length;n++){const i=t[n];EF(i)&&!_F(i)?i.delete(r):t[e++]=i,i.w&=~dc,i.n&=~dc}t.length=e}},c_=new WeakMap;let Yg=0,dc=1;const f_=30,Xg=[];let Wf;const jf=Symbol(""),d_=Symbol("");class h_{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],Uae(this,n)}run(){if(!this.active)return this.fn();if(!Xg.includes(this))try{return Xg.push(Wf=this),Yae(),dc=1<<++Yg,Yg<=f_?Wae(this):TF(this),this.fn()}finally{Yg<=f_&&jae(this),dc=1<<--Yg,Yf(),Xg.pop();const t=Xg.length;Wf=t>0?Xg[t-1]:void 0}}stop(){this.active&&(TF(this),this.onStop&&this.onStop(),this.active=!1)}}function TF(r){const{deps:t}=r;if(t.length){for(let e=0;e<t.length;e++)t[e].delete(r);t.length=0}}let lv=!0;const v_=[];function uv(){v_.push(lv),lv=!1}function Yae(){v_.push(lv),lv=!0}function Yf(){const r=v_.pop();lv=r===void 0?!0:r}function is(r,t,e){if(!AF())return;let n=c_.get(r);n||c_.set(r,n=new Map);let i=n.get(e);i||n.set(e,i=u_()),kF(i)}function AF(){return lv&&Wf!==void 0}function kF(r,t){let e=!1;Yg<=f_?_F(r)||(r.n|=dc,e=!EF(r)):e=!r.has(Wf),e&&(r.add(Wf),Wf.deps.push(r))}function pu(r,t,e,n,i,a){const o=c_.get(r);if(!o)return;let s=[];if(t==="clear")s=[...o.values()];else if(e==="length"&&un(r))o.forEach((l,u)=>{(u==="length"||u>=n)&&s.push(l)});else switch(e!==void 0&&s.push(o.get(e)),t){case"add":un(r)?o_(e)&&s.push(o.get("length")):(s.push(o.get(jf)),ov(r)&&s.push(o.get(d_)));break;case"delete":un(r)||(s.push(o.get(jf)),ov(r)&&s.push(o.get(d_)));break;case"set":ov(r)&&s.push(o.get(jf));break}if(s.length===1)s[0]&&p_(s[0]);else{const l=[];for(const u of s)u&&l.push(...u);p_(u_(l))}}function p_(r,t){for(const e of un(r)?r:[...r])(e!==Wf||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Xae=t_("__proto__,__v_isRef,__isVue"),MF=new Set(Object.getOwnPropertyNames(Symbol).map(r=>Symbol[r]).filter(a_)),qae=g_(),Kae=g_(!1,!0),Zae=g_(!0),IF=Qae();function Qae(){const r={};return["includes","indexOf","lastIndexOf"].forEach(t=>{r[t]=function(...e){const n=Gn(this);for(let a=0,o=this.length;a<o;a++)is(n,"get",a+"");const i=n[t](...e);return i===-1||i===!1?n[t](...e.map(Gn)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{r[t]=function(...e){uv();const n=Gn(this)[t].apply(this,e);return Yf(),n}}),r}function g_(r=!1,t=!1){return function(n,i,a){if(i==="__v_isReactive")return!r;if(i==="__v_isReadonly")return r;if(i==="__v_raw"&&a===(r?t?voe:$F:t?BF:NF).get(n))return n;const o=un(n);if(!r&&o&&zn(IF,i))return Reflect.get(IF,i,a);const s=Reflect.get(n,i,a);return(a_(i)?MF.has(i):Xae(i))||(r||is(n,"get",i),t)?s:lo(s)?!o||!o_(i)?s.value:s:ha(s)?r?Sl(s):vc(s):s}}const Jae=PF(),eoe=PF(!0);function PF(r=!1){return function(e,n,i,a){let o=e[n];if(!r&&!x_(i)&&(i=Gn(i),o=Gn(o),!un(e)&&lo(o)&&!lo(i)))return o.value=i,!0;const s=un(e)&&o_(n)?Number(n)<e.length:zn(e,n),l=Reflect.set(e,n,i,a);return e===Gn(a)&&(s?jg(i,o)&&pu(e,"set",n,i):pu(e,"add",n,i)),l}}function toe(r,t){const e=zn(r,t);r[t];const n=Reflect.deleteProperty(r,t);return n&&e&&pu(r,"delete",t,void 0),n}function roe(r,t){const e=Reflect.has(r,t);return(!a_(t)||!MF.has(t))&&is(r,"has",t),e}function noe(r){return is(r,"iterate",un(r)?"length":jf),Reflect.ownKeys(r)}const DF={get:qae,set:Jae,deleteProperty:toe,has:roe,ownKeys:noe},ioe={get:Zae,set(r,t){return!0},deleteProperty(r,t){return!0}},aoe=Oa({},DF,{get:Kae,set:eoe}),m_=r=>r,hx=r=>Reflect.getPrototypeOf(r);function vx(r,t,e=!1,n=!1){r=r.__v_raw;const i=Gn(r),a=Gn(t);t!==a&&!e&&is(i,"get",t),!e&&is(i,"get",a);const{has:o}=hx(i),s=n?m_:e?S_:qg;if(o.call(i,t))return s(r.get(t));if(o.call(i,a))return s(r.get(a));r!==i&&r.get(t)}function px(r,t=!1){const e=this.__v_raw,n=Gn(e),i=Gn(r);return r!==i&&!t&&is(n,"has",r),!t&&is(n,"has",i),r===i?e.has(r):e.has(r)||e.has(i)}function gx(r,t=!1){return r=r.__v_raw,!t&&is(Gn(r),"iterate",jf),Reflect.get(r,"size",r)}function RF(r){r=Gn(r);const t=Gn(this);return hx(t).has.call(t,r)||(t.add(r),pu(t,"add",r,r)),this}function OF(r,t){t=Gn(t);const e=Gn(this),{has:n,get:i}=hx(e);let a=n.call(e,r);a||(r=Gn(r),a=n.call(e,r));const o=i.call(e,r);return e.set(r,t),a?jg(t,o)&&pu(e,"set",r,t):pu(e,"add",r,t),this}function LF(r){const t=Gn(this),{has:e,get:n}=hx(t);let i=e.call(t,r);i||(r=Gn(r),i=e.call(t,r)),n&&n.call(t,r);const a=t.delete(r);return i&&pu(t,"delete",r,void 0),a}function FF(){const r=Gn(this),t=r.size!==0,e=r.clear();return t&&pu(r,"clear",void 0,void 0),e}function mx(r,t){return function(n,i){const a=this,o=a.__v_raw,s=Gn(o),l=t?m_:r?S_:qg;return!r&&is(s,"iterate",jf),o.forEach((u,c)=>n.call(i,l(u),l(c),a))}}function yx(r,t,e){return function(...n){const i=this.__v_raw,a=Gn(i),o=ov(a),s=r==="entries"||r===Symbol.iterator&&o,l=r==="keys"&&o,u=i[r](...n),c=e?m_:t?S_:qg;return!t&&is(a,"iterate",l?d_:jf),{next(){const{value:f,done:d}=u.next();return d?{value:f,done:d}:{value:s?[c(f[0]),c(f[1])]:c(f),done:d}},[Symbol.iterator](){return this}}}}function hc(r){return function(...t){return r==="delete"?!1:this}}function ooe(){const r={get(a){return vx(this,a)},get size(){return gx(this)},has:px,add:RF,set:OF,delete:LF,clear:FF,forEach:mx(!1,!1)},t={get(a){return vx(this,a,!1,!0)},get size(){return gx(this)},has:px,add:RF,set:OF,delete:LF,clear:FF,forEach:mx(!1,!0)},e={get(a){return vx(this,a,!0)},get size(){return gx(this,!0)},has(a){return px.call(this,a,!0)},add:hc("add"),set:hc("set"),delete:hc("delete"),clear:hc("clear"),forEach:mx(!0,!1)},n={get(a){return vx(this,a,!0,!0)},get size(){return gx(this,!0)},has(a){return px.call(this,a,!0)},add:hc("add"),set:hc("set"),delete:hc("delete"),clear:hc("clear"),forEach:mx(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{r[a]=yx(a,!1,!1),e[a]=yx(a,!0,!1),t[a]=yx(a,!1,!0),n[a]=yx(a,!0,!0)}),[r,e,t,n]}const[soe,loe,uoe,coe]=ooe();function y_(r,t){const e=t?r?coe:uoe:r?loe:soe;return(n,i,a)=>i==="__v_isReactive"?!r:i==="__v_isReadonly"?r:i==="__v_raw"?n:Reflect.get(zn(e,i)&&i in n?e:n,i,a)}const foe={get:y_(!1,!1)},doe={get:y_(!1,!0)},hoe={get:y_(!0,!1)},NF=new WeakMap,BF=new WeakMap,$F=new WeakMap,voe=new WeakMap;function poe(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function goe(r){return r.__v_skip||!Object.isExtensible(r)?0:poe(Nae(r))}function vc(r){return r&&r.__v_isReadonly?r:b_(r,!1,DF,foe,NF)}function moe(r){return b_(r,!1,aoe,doe,BF)}function Sl(r){return b_(r,!0,ioe,hoe,$F)}function b_(r,t,e,n,i){if(!ha(r)||r.__v_raw&&!(t&&r.__v_isReactive))return r;const a=i.get(r);if(a)return a;const o=goe(r);if(o===0)return r;const s=new Proxy(r,o===2?n:e);return i.set(r,s),s}function cv(r){return x_(r)?cv(r.__v_raw):!!(r&&r.__v_isReactive)}function x_(r){return!!(r&&r.__v_isReadonly)}function zF(r){return cv(r)||x_(r)}function Gn(r){const t=r&&r.__v_raw;return t?Gn(t):r}function w_(r){return fx(r,"__v_skip",!0),r}const qg=r=>ha(r)?vc(r):r,S_=r=>ha(r)?Sl(r):r;function GF(r){AF()&&(r=Gn(r),r.dep||(r.dep=u_()),kF(r.dep))}function UF(r,t){r=Gn(r),r.dep&&p_(r.dep)}function lo(r){return Boolean(r&&r.__v_isRef===!0)}function ke(r){return VF(r,!1)}function C_(r){return VF(r,!0)}function VF(r,t){return lo(r)?r:new yoe(r,t)}class yoe{constructor(t,e){this._shallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Gn(t),this._value=e?t:qg(t)}get value(){return GF(this),this._value}set value(t){t=this._shallow?t:Gn(t),jg(t,this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:qg(t),UF(this))}}function va(r){return lo(r)?r.value:r}const boe={get:(r,t,e)=>va(Reflect.get(r,t,e)),set:(r,t,e,n)=>{const i=r[t];return lo(i)&&!lo(e)?(i.value=e,!0):Reflect.set(r,t,e,n)}};function HF(r){return cv(r)?r:new Proxy(r,boe)}class xoe{constructor(t,e){this._object=t,this._key=e,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(t){this._object[this._key]=t}}function Ht(r,t){const e=r[t];return lo(e)?e:new xoe(r,t)}class woe{constructor(t,e,n){this._setter=e,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new h_(t,()=>{this._dirty||(this._dirty=!0,UF(this))}),this.__v_isReadonly=n}get value(){const t=Gn(this);return GF(t),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Q(r,t){let e,n;const i=vn(r);return i?(e=r,n=Js):(e=r.get,n=r.set),new woe(e,n,i||!n)}Promise.resolve();function Soe(r,t,...e){const n=r.vnode.props||li;let i=e;const a=t.startsWith("update:"),o=a&&t.slice(7);if(o&&o in n){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:d}=n[c]||li;d?i=e.map(h=>h.trim()):f&&(i=e.map(SF))}let s,l=n[s=s_(t)]||n[s=s_(xl(t))];!l&&a&&(l=n[s=s_(sv(t))]),l&&Ms(l,r,6,i);const u=n[s+"Once"];if(u){if(!r.emitted)r.emitted={};else if(r.emitted[s])return;r.emitted[s]=!0,Ms(u,r,6,i)}}function WF(r,t,e=!1){const n=t.emitsCache,i=n.get(r);if(i!==void 0)return i;const a=r.emits;let o={},s=!1;if(!vn(r)){const l=u=>{const c=WF(u,t,!0);c&&(s=!0,Oa(o,c))};!e&&t.mixins.length&&t.mixins.forEach(l),r.extends&&l(r.extends),r.mixins&&r.mixins.forEach(l)}return!a&&!s?(n.set(r,null),null):(un(a)?a.forEach(l=>o[l]=null):Oa(o,a),n.set(r,o),o)}function E_(r,t){return!r||!ox(t)?!1:(t=t.slice(2).replace(/Once$/,""),zn(r,t[0].toLowerCase()+t.slice(1))||zn(r,sv(t))||zn(r,t))}let as=null,bx=null;function xx(r){const t=as;return as=r,bx=r&&r.type.__scopeId||null,t}function udt(r){bx=r}function cdt(){bx=null}function Coe(r,t=as,e){if(!t||r._n)return r;const n=(...i)=>{n._d&&mN(-1);const a=xx(t),o=r(...i);return xx(a),n._d&&mN(1),o};return n._n=!0,n._c=!0,n._d=!0,n}function __(r){const{type:t,vnode:e,proxy:n,withProxy:i,props:a,propsOptions:[o],slots:s,attrs:l,emit:u,render:c,renderCache:f,data:d,setupState:h,ctx:v,inheritAttrs:p}=r;let g,m;const y=xx(r);try{if(e.shapeFlag&4){const x=i||n;g=_l(c.call(x,x,f,a,h,d,v)),m=l}else{const x=t;g=_l(x.length>1?x(a,{attrs:l,slots:s,emit:u}):x(a,null)),m=t.props?l:Eoe(l)}}catch(x){Jg.length=0,Px(x,r,1),g=Un(ks)}let b=g;if(m&&p!==!1){const x=Object.keys(m),{shapeFlag:w}=b;x.length&&w&(1|6)&&(o&&x.some(i_)&&(m=_oe(m,o)),b=gc(b,m))}return e.dirs&&(b.dirs=b.dirs?b.dirs.concat(e.dirs):e.dirs),e.transition&&(b.transition=e.transition),g=b,xx(y),g}const Eoe=r=>{let t;for(const e in r)(e==="class"||e==="style"||ox(e))&&((t||(t={}))[e]=r[e]);return t},_oe=(r,t)=>{const e={};for(const n in r)(!i_(n)||!(n.slice(9)in t))&&(e[n]=r[n]);return e};function Toe(r,t,e){const{props:n,children:i,component:a}=r,{props:o,children:s,patchFlag:l}=t,u=a.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return n?jF(n,o,u):!!o;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const d=c[f];if(o[d]!==n[d]&&!E_(u,d))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:n===o?!1:n?o?jF(n,o,u):!0:!!o;return!1}function jF(r,t,e){const n=Object.keys(t);if(n.length!==Object.keys(r).length)return!0;for(let i=0;i<n.length;i++){const a=n[i];if(t[a]!==r[a]&&!E_(e,a))return!0}return!1}function Aoe({vnode:r,parent:t},e){for(;t&&t.subTree===r;)(r=t.vnode).el=e,t=t.parent}const koe=r=>r.__isSuspense;function Moe(r,t){t&&t.pendingBranch?un(r)?t.effects.push(...r):t.effects.push(r):Sse(r)}function Qr(r,t){if(Fa){let e=Fa.provides;const n=Fa.parent&&Fa.parent.provides;n===e&&(e=Fa.provides=Object.create(n)),e[r]=t}}function nr(r,t,e=!1){const n=Fa||as;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&r in i)return i[r];if(arguments.length>1)return e&&vn(t)?t.call(n.proxy):t}}function YF(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Lo(()=>{r.isMounted=!0}),os(()=>{r.isUnmounting=!0}),r}const As=[Function,Array],Ioe={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:As,onEnter:As,onAfterEnter:As,onEnterCancelled:As,onBeforeLeave:As,onLeave:As,onAfterLeave:As,onLeaveCancelled:As,onBeforeAppear:As,onAppear:As,onAfterAppear:As,onAppearCancelled:As},setup(r,{slots:t}){const e=fv(),n=YF();let i;return()=>{const a=t.default&&A_(t.default(),!0);if(!a||!a.length)return;const o=Gn(r),{mode:s}=o,l=a[0];if(n.isLeaving)return T_(l);const u=KF(l);if(!u)return T_(l);const c=Kg(u,o,n,e);Zg(u,c);const f=e.subTree,d=f&&KF(f);let h=!1;const{getTransitionKey:v}=u.type;if(v){const p=v();i===void 0?i=p:p!==i&&(i=p,h=!0)}if(d&&d.type!==ks&&(!Zf(u,d)||h)){const p=Kg(d,o,n,e);if(Zg(d,p),s==="out-in")return n.isLeaving=!0,p.afterLeave=()=>{n.isLeaving=!1,e.update()},T_(l);s==="in-out"&&u.type!==ks&&(p.delayLeave=(g,m,y)=>{const b=qF(n,d);b[String(d.key)]=d,g._leaveCb=()=>{m(),g._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=y})}return l}}},XF=Ioe;function qF(r,t){const{leavingVNodes:e}=r;let n=e.get(t.type);return n||(n=Object.create(null),e.set(t.type,n)),n}function Kg(r,t,e,n){const{appear:i,mode:a,persisted:o=!1,onBeforeEnter:s,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:f,onLeave:d,onAfterLeave:h,onLeaveCancelled:v,onBeforeAppear:p,onAppear:g,onAfterAppear:m,onAppearCancelled:y}=t,b=String(r.key),x=qF(e,r),w=(C,_)=>{C&&Ms(C,n,9,_)},S={mode:a,persisted:o,beforeEnter(C){let _=s;if(!e.isMounted)if(i)_=p||s;else return;C._leaveCb&&C._leaveCb(!0);const T=x[b];T&&Zf(r,T)&&T.el._leaveCb&&T.el._leaveCb(),w(_,[C])},enter(C){let _=l,T=u,E=c;if(!e.isMounted)if(i)_=g||l,T=m||u,E=y||c;else return;let k=!1;const I=C._enterCb=P=>{k||(k=!0,P?w(E,[C]):w(T,[C]),S.delayedLeave&&S.delayedLeave(),C._enterCb=void 0)};_?(_(C,I),_.length<=1&&I()):I()},leave(C,_){const T=String(r.key);if(C._enterCb&&C._enterCb(!0),e.isUnmounting)return _();w(f,[C]);let E=!1;const k=C._leaveCb=I=>{E||(E=!0,_(),I?w(v,[C]):w(h,[C]),C._leaveCb=void 0,x[T]===r&&delete x[T])};x[T]=r,d?(d(C,k),d.length<=1&&k()):k()},clone(C){return Kg(C,t,e,n)}};return S}function T_(r){if(wx(r))return r=gc(r),r.children=null,r}function KF(r){return wx(r)?r.children?r.children[0]:void 0:r}function Zg(r,t){r.shapeFlag&6&&r.component?Zg(r.component.subTree,t):r.shapeFlag&128?(r.ssContent.transition=t.clone(r.ssContent),r.ssFallback.transition=t.clone(r.ssFallback)):r.transition=t}function A_(r,t=!1){let e=[],n=0;for(let i=0;i<r.length;i++){const a=r[i];a.type===Fi?(a.patchFlag&128&&n++,e=e.concat(A_(a.children,t))):(t||a.type!==ks)&&e.push(a)}if(n>1)for(let i=0;i<e.length;i++)e[i].patchFlag=-2;return e}function mt(r){return vn(r)?{setup:r,name:r.name}:r}const k_=r=>!!r.type.__asyncLoader,wx=r=>r.type.__isKeepAlive;function Poe(r,t){ZF(r,"a",t)}function Doe(r,t){ZF(r,"da",t)}function ZF(r,t,e=Fa){const n=r.__wdc||(r.__wdc=()=>{let i=e;for(;i;){if(i.isDeactivated)return;i=i.parent}return r()});if(Sx(t,n,e),e){let i=e.parent;for(;i&&i.parent;)wx(i.parent.vnode)&&Roe(n,t,e,i),i=i.parent}}function Roe(r,t,e,n){const i=Sx(t,r,n,!0);M_(()=>{mF(n[t],i)},e)}function Sx(r,t,e=Fa,n=!1){if(e){const i=e[r]||(e[r]=[]),a=t.__weh||(t.__weh=(...o)=>{if(e.isUnmounted)return;uv(),dv(e);const s=Ms(t,e,r,o);return Qf(),Yf(),s});return n?i.unshift(a):i.push(a),a}}const gu=r=>(t,e=Fa)=>(!Ix||r==="sp")&&Sx(r,t,e),pc=gu("bm"),Lo=gu("m"),Ooe=gu("bu"),QF=gu("u"),os=gu("bum"),M_=gu("um"),Loe=gu("sp"),Foe=gu("rtg"),Noe=gu("rtc");function Boe(r,t=Fa){Sx("ec",r,t)}let I_=!0;function $oe(r){const t=tN(r),e=r.proxy,n=r.ctx;I_=!1,t.beforeCreate&&JF(t.beforeCreate,r,"bc");const{data:i,computed:a,methods:o,watch:s,provide:l,inject:u,created:c,beforeMount:f,mounted:d,beforeUpdate:h,updated:v,activated:p,deactivated:g,beforeDestroy:m,beforeUnmount:y,destroyed:b,unmounted:x,render:w,renderTracked:S,renderTriggered:C,errorCaptured:_,serverPrefetch:T,expose:E,inheritAttrs:k,components:I,directives:P,filters:F}=t;if(u&&zoe(u,n,null,r.appContext.config.unwrapInjectedRef),o)for(const L in o){const O=o[L];vn(O)&&(n[L]=O.bind(e))}if(i){const L=i.call(e,e);ha(L)&&(r.data=vc(L))}if(I_=!0,a)for(const L in a){const O=a[L],B=vn(O)?O.bind(e,e):vn(O.get)?O.get.bind(e,e):Js,U=!vn(O)&&vn(O.set)?O.set.bind(e):Js,W=Q({get:B,set:U});Object.defineProperty(n,L,{enumerable:!0,configurable:!0,get:()=>W.value,set:X=>W.value=X})}if(s)for(const L in s)eN(s[L],n,e,L);if(l){const L=vn(l)?l.call(e):l;Reflect.ownKeys(L).forEach(O=>{Qr(O,L[O])})}c&&JF(c,r,"c");function R(L,O){un(O)?O.forEach(B=>L(B.bind(e))):O&&L(O.bind(e))}if(R(pc,f),R(Lo,d),R(Ooe,h),R(QF,v),R(Poe,p),R(Doe,g),R(Boe,_),R(Noe,S),R(Foe,C),R(os,y),R(M_,x),R(Loe,T),un(E))if(E.length){const L=r.exposed||(r.exposed={});E.forEach(O=>{Object.defineProperty(L,O,{get:()=>e[O],set:B=>e[O]=B})})}else r.exposed||(r.exposed={});w&&r.render===Js&&(r.render=w),k!=null&&(r.inheritAttrs=k),I&&(r.components=I),P&&(r.directives=P)}function zoe(r,t,e=Js,n=!1){un(r)&&(r=P_(r));for(const i in r){const a=r[i];let o;ha(a)?"default"in a?o=nr(a.from||i,a.default,!0):o=nr(a.from||i):o=nr(a),lo(o)&&n?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):t[i]=o}}function JF(r,t,e){Ms(un(r)?r.map(n=>n.bind(t.proxy)):r.bind(t.proxy),t,e)}function eN(r,t,e,n){const i=n.includes(".")?RN(e,n):()=>e[n];if(La(r)){const a=t[r];vn(a)&&nn(i,a)}else if(vn(r))nn(i,r.bind(e));else if(ha(r))if(un(r))r.forEach(a=>eN(a,t,e,n));else{const a=vn(r.handler)?r.handler.bind(e):t[r.handler];vn(a)&&nn(i,a,r)}}function tN(r){const t=r.type,{mixins:e,extends:n}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:o}}=r.appContext,s=a.get(t);let l;return s?l=s:!i.length&&!e&&!n?l=t:(l={},i.length&&i.forEach(u=>Cx(l,u,o,!0)),Cx(l,t,o)),a.set(t,l),l}function Cx(r,t,e,n=!1){const{mixins:i,extends:a}=t;a&&Cx(r,a,e,!0),i&&i.forEach(o=>Cx(r,o,e,!0));for(const o in t)if(!(n&&o==="expose")){const s=Goe[o]||e&&e[o];r[o]=s?s(r[o],t[o]):t[o]}return r}const Goe={data:rN,props:Xf,emits:Xf,methods:Xf,computed:Xf,beforeCreate:wo,created:wo,beforeMount:wo,mounted:wo,beforeUpdate:wo,updated:wo,beforeDestroy:wo,beforeUnmount:wo,destroyed:wo,unmounted:wo,activated:wo,deactivated:wo,errorCaptured:wo,serverPrefetch:wo,components:Xf,directives:Xf,watch:Voe,provide:rN,inject:Uoe};function rN(r,t){return t?r?function(){return Oa(vn(r)?r.call(this,this):r,vn(t)?t.call(this,this):t)}:t:r}function Uoe(r,t){return Xf(P_(r),P_(t))}function P_(r){if(un(r)){const t={};for(let e=0;e<r.length;e++)t[r[e]]=r[e];return t}return r}function wo(r,t){return r?[...new Set([].concat(r,t))]:t}function Xf(r,t){return r?Oa(Oa(Object.create(null),r),t):t}function Voe(r,t){if(!r)return t;if(!t)return r;const e=Oa(Object.create(null),r);for(const n in t)e[n]=wo(r[n],t[n]);return e}function Hoe(r,t,e,n=!1){const i={},a={};fx(a,Ax,1),r.propsDefaults=Object.create(null),nN(r,t,i,a);for(const o in r.propsOptions[0])o in i||(i[o]=void 0);e?r.props=n?i:moe(i):r.type.props?r.props=i:r.props=a,r.attrs=a}function Woe(r,t,e,n){const{props:i,attrs:a,vnode:{patchFlag:o}}=r,s=Gn(i),[l]=r.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=r.vnode.dynamicProps;for(let f=0;f<c.length;f++){let d=c[f];const h=t[d];if(l)if(zn(a,d))h!==a[d]&&(a[d]=h,u=!0);else{const v=xl(d);i[v]=D_(l,s,v,h,r,!1)}else h!==a[d]&&(a[d]=h,u=!0)}}}else{nN(r,t,i,a)&&(u=!0);let c;for(const f in s)(!t||!zn(t,f)&&((c=sv(f))===f||!zn(t,c)))&&(l?e&&(e[f]!==void 0||e[c]!==void 0)&&(i[f]=D_(l,s,f,void 0,r,!0)):delete i[f]);if(a!==s)for(const f in a)(!t||!zn(t,f))&&(delete a[f],u=!0)}u&&pu(r,"set","$attrs")}function nN(r,t,e,n){const[i,a]=r.propsOptions;let o=!1,s;if(t)for(let l in t){if(lx(l))continue;const u=t[l];let c;i&&zn(i,c=xl(l))?!a||!a.includes(c)?e[c]=u:(s||(s={}))[c]=u:E_(r.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,o=!0)}if(a){const l=Gn(e),u=s||li;for(let c=0;c<a.length;c++){const f=a[c];e[f]=D_(i,l,f,u[f],r,!zn(u,f))}}return o}function D_(r,t,e,n,i,a){const o=r[e];if(o!=null){const s=zn(o,"default");if(s&&n===void 0){const l=o.default;if(o.type!==Function&&vn(l)){const{propsDefaults:u}=i;e in u?n=u[e]:(dv(i),n=u[e]=l.call(null,t),Qf())}else n=l}o[0]&&(a&&!s?n=!1:o[1]&&(n===""||n===sv(e))&&(n=!0))}return n}function iN(r,t,e=!1){const n=t.propsCache,i=n.get(r);if(i)return i;const a=r.props,o={},s=[];let l=!1;if(!vn(r)){const c=f=>{l=!0;const[d,h]=iN(f,t,!0);Oa(o,d),h&&s.push(...h)};!e&&t.mixins.length&&t.mixins.forEach(c),r.extends&&c(r.extends),r.mixins&&r.mixins.forEach(c)}if(!a&&!l)return n.set(r,av),av;if(un(a))for(let c=0;c<a.length;c++){const f=xl(a[c]);aN(f)&&(o[f]=li)}else if(a)for(const c in a){const f=xl(c);if(aN(f)){const d=a[c],h=o[f]=un(d)||vn(d)?{type:d}:d;if(h){const v=lN(Boolean,h.type),p=lN(String,h.type);h[0]=v>-1,h[1]=p<0||v<p,(v>-1||zn(h,"default"))&&s.push(f)}}}const u=[o,s];return n.set(r,u),u}function aN(r){return r[0]!=="$"}function oN(r){const t=r&&r.toString().match(/^\s*function (\w+)/);return t?t[1]:r===null?"null":""}function sN(r,t){return oN(r)===oN(t)}function lN(r,t){return un(t)?t.findIndex(e=>sN(e,r)):vn(t)&&sN(t,r)?0:-1}const uN=r=>r[0]==="_"||r==="$stable",R_=r=>un(r)?r.map(_l):[_l(r)],joe=(r,t,e)=>{const n=Coe((...i)=>R_(t(...i)),e);return n._c=!1,n},cN=(r,t,e)=>{const n=r._ctx;for(const i in r){if(uN(i))continue;const a=r[i];if(vn(a))t[i]=joe(i,a,n);else if(a!=null){const o=R_(a);t[i]=()=>o}}},fN=(r,t)=>{const e=R_(t);r.slots.default=()=>e},Yoe=(r,t)=>{if(r.vnode.shapeFlag&32){const e=t._;e?(r.slots=Gn(t),fx(t,"_",e)):cN(t,r.slots={})}else r.slots={},t&&fN(r,t);fx(r.slots,Ax,1)},Xoe=(r,t,e)=>{const{vnode:n,slots:i}=r;let a=!0,o=li;if(n.shapeFlag&32){const s=t._;s?e&&s===1?a=!1:(Oa(i,t),!e&&s===1&&delete i._):(a=!t.$stable,cN(t,i)),o=t}else t&&(fN(r,t),o={default:1});if(a)for(const s in i)!uN(s)&&!(s in o)&&delete i[s]};function Cl(r,t){const e=as;if(e===null)return r;const n=e.proxy,i=r.dirs||(r.dirs=[]);for(let a=0;a<t.length;a++){let[o,s,l,u=li]=t[a];vn(o)&&(o={mounted:o,updated:o}),o.deep&&Jf(s),i.push({dir:o,instance:n,value:s,oldValue:void 0,arg:l,modifiers:u})}return r}function qf(r,t,e,n){const i=r.dirs,a=t&&t.dirs;for(let o=0;o<i.length;o++){const s=i[o];a&&(s.oldValue=a[o].value);let l=s.dir[n];l&&(uv(),Ms(l,e,8,[r.el,s,r,t]),Yf())}}function dN(){return{app:null,config:{isNativeTag:Oae,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qoe=0;function Koe(r,t){return function(n,i=null){i!=null&&!ha(i)&&(i=null);const a=dN(),o=new Set;let s=!1;const l=a.app={_uid:qoe++,_component:n,_props:i,_container:null,_context:a,_instance:null,version:Ese,get config(){return a.config},set config(u){},use(u,...c){return o.has(u)||(u&&vn(u.install)?(o.add(u),u.install(l,...c)):vn(u)&&(o.add(u),u(l,...c))),l},mixin(u){return a.mixins.includes(u)||a.mixins.push(u),l},component(u,c){return c?(a.components[u]=c,l):a.components[u]},directive(u,c){return c?(a.directives[u]=c,l):a.directives[u]},mount(u,c,f){if(!s){const d=Un(n,i);return d.appContext=a,c&&t?t(d,u):r(d,u,f),s=!0,l._container=u,u.__vue_app__=l,G_(d.component)||d.component.proxy}},unmount(){s&&(r(null,l._container),delete l._container.__vue_app__)},provide(u,c){return a.provides[u]=c,l}};return l}}const So=Moe;function Zoe(r){return Qoe(r)}function Qoe(r,t){const e=zae();e.__VUE__=!0;const{insert:n,remove:i,patchProp:a,createElement:o,createText:s,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:d,setScopeId:h=Js,cloneNode:v,insertStaticContent:p}=r,g=(D,z,V,he=null,re=null,pe=null,Je=!1,We=null,Le=!!z.dynamicChildren)=>{if(D===z)return;D&&!Zf(D,z)&&(he=ce(D),ie(D,re,pe,!0),D=null),z.patchFlag===-2&&(Le=!1,z.dynamicChildren=null);const{type:$e,ref:H,shapeFlag:Y}=z;switch($e){case N_:m(D,z,V,he);break;case ks:y(D,z,V,he);break;case B_:D==null&&b(z,V,he,Je);break;case Fi:P(D,z,V,he,re,pe,Je,We,Le);break;default:Y&1?S(D,z,V,he,re,pe,Je,We,Le):Y&6?F(D,z,V,he,re,pe,Je,We,Le):(Y&64||Y&128)&&$e.process(D,z,V,he,re,pe,Je,We,Le,Me)}H!=null&&re&&O_(H,D&&D.ref,pe,z||D,!z)},m=(D,z,V,he)=>{if(D==null)n(z.el=s(z.children),V,he);else{const re=z.el=D.el;z.children!==D.children&&u(re,z.children)}},y=(D,z,V,he)=>{D==null?n(z.el=l(z.children||""),V,he):z.el=D.el},b=(D,z,V,he)=>{[D.el,D.anchor]=p(D.children,z,V,he)},x=({el:D,anchor:z},V,he)=>{let re;for(;D&&D!==z;)re=d(D),n(D,V,he),D=re;n(z,V,he)},w=({el:D,anchor:z})=>{let V;for(;D&&D!==z;)V=d(D),i(D),D=V;i(z)},S=(D,z,V,he,re,pe,Je,We,Le)=>{Je=Je||z.type==="svg",D==null?C(z,V,he,re,pe,Je,We,Le):E(D,z,re,pe,Je,We,Le)},C=(D,z,V,he,re,pe,Je,We)=>{let Le,$e;const{type:H,props:Y,shapeFlag:K,transition:ee,patchFlag:J,dirs:ge}=D;if(D.el&&v!==void 0&&J===-1)Le=D.el=v(D.el);else{if(Le=D.el=o(D.type,pe,Y&&Y.is,Y),K&8?c(Le,D.children):K&16&&T(D.children,Le,null,he,re,pe&&H!=="foreignObject",Je,We),ge&&qf(D,null,he,"created"),Y){for(const Ge in Y)Ge!=="value"&&!lx(Ge)&&a(Le,Ge,null,Y[Ge],pe,D.children,he,re,se);"value"in Y&&a(Le,"value",null,Y.value),($e=Y.onVnodeBeforeMount)&&El($e,he,D)}_(Le,D,D.scopeId,Je,he)}ge&&qf(D,null,he,"beforeMount");const Ve=(!re||re&&!re.pendingBranch)&&ee&&!ee.persisted;Ve&&ee.beforeEnter(Le),n(Le,z,V),(($e=Y&&Y.onVnodeMounted)||Ve||ge)&&So(()=>{$e&&El($e,he,D),Ve&&ee.enter(Le),ge&&qf(D,null,he,"mounted")},re)},_=(D,z,V,he,re)=>{if(V&&h(D,V),he)for(let pe=0;pe<he.length;pe++)h(D,he[pe]);if(re){let pe=re.subTree;if(z===pe){const Je=re.vnode;_(D,Je,Je.scopeId,Je.slotScopeIds,re.parent)}}},T=(D,z,V,he,re,pe,Je,We,Le=0)=>{for(let $e=Le;$e<D.length;$e++){const H=D[$e]=We?mc(D[$e]):_l(D[$e]);g(null,H,z,V,he,re,pe,Je,We)}},E=(D,z,V,he,re,pe,Je)=>{const We=z.el=D.el;let{patchFlag:Le,dynamicChildren:$e,dirs:H}=z;Le|=D.patchFlag&16;const Y=D.props||li,K=z.props||li;let ee;(ee=K.onVnodeBeforeUpdate)&&El(ee,V,z,D),H&&qf(z,D,V,"beforeUpdate");const J=re&&z.type!=="foreignObject";if($e?k(D.dynamicChildren,$e,We,V,he,J,pe):Je||B(D,z,We,null,V,he,J,pe,!1),Le>0){if(Le&16)I(We,z,Y,K,V,he,re);else if(Le&2&&Y.class!==K.class&&a(We,"class",null,K.class,re),Le&4&&a(We,"style",Y.style,K.style,re),Le&8){const ge=z.dynamicProps;for(let Ve=0;Ve<ge.length;Ve++){const Ge=ge[Ve],rt=Y[Ge],Se=K[Ge];(Se!==rt||Ge==="value")&&a(We,Ge,rt,Se,re,D.children,V,he,se)}}Le&1&&D.children!==z.children&&c(We,z.children)}else!Je&&$e==null&&I(We,z,Y,K,V,he,re);((ee=K.onVnodeUpdated)||H)&&So(()=>{ee&&El(ee,V,z,D),H&&qf(z,D,V,"updated")},he)},k=(D,z,V,he,re,pe,Je)=>{for(let We=0;We<z.length;We++){const Le=D[We],$e=z[We],H=Le.el&&(Le.type===Fi||!Zf(Le,$e)||Le.shapeFlag&(6|64))?f(Le.el):V;g(Le,$e,H,null,he,re,pe,Je,!0)}},I=(D,z,V,he,re,pe,Je)=>{if(V!==he){for(const We in he){if(lx(We))continue;const Le=he[We],$e=V[We];Le!==$e&&We!=="value"&&a(D,We,$e,Le,Je,z.children,re,pe,se)}if(V!==li)for(const We in V)!lx(We)&&!(We in he)&&a(D,We,V[We],null,Je,z.children,re,pe,se);"value"in he&&a(D,"value",V.value,he.value)}},P=(D,z,V,he,re,pe,Je,We,Le)=>{const $e=z.el=D?D.el:s(""),H=z.anchor=D?D.anchor:s("");let{patchFlag:Y,dynamicChildren:K,slotScopeIds:ee}=z;ee&&(We=We?We.concat(ee):ee),D==null?(n($e,V,he),n(H,V,he),T(z.children,V,H,re,pe,Je,We,Le)):Y>0&&Y&64&&K&&D.dynamicChildren?(k(D.dynamicChildren,K,V,re,pe,Je,We),(z.key!=null||re&&z===re.subTree)&&L_(D,z,!0)):B(D,z,V,H,re,pe,Je,We,Le)},F=(D,z,V,he,re,pe,Je,We,Le)=>{z.slotScopeIds=We,D==null?z.shapeFlag&512?re.ctx.activate(z,V,he,Je,Le):$(z,V,he,re,pe,Je,Le):R(D,z,Le)},$=(D,z,V,he,re,pe,Je)=>{const We=D.component=fse(D,he,re);if(wx(D)&&(We.ctx.renderer=Me),dse(We),We.asyncDep){if(re&&re.registerDep(We,L),!D.el){const Le=We.subTree=Un(ks);y(null,Le,z,V)}return}L(We,D,z,V,re,pe,Je)},R=(D,z,V)=>{const he=z.component=D.component;if(Toe(D,z,V))if(he.asyncDep&&!he.asyncResolved){O(he,z,V);return}else he.next=z,xse(he.update),he.update();else z.component=D.component,z.el=D.el,he.vnode=z},L=(D,z,V,he,re,pe,Je)=>{const We=()=>{if(D.isMounted){let{next:H,bu:Y,u:K,parent:ee,vnode:J}=D,ge=H,Ve;Le.allowRecurse=!1,H?(H.el=J.el,O(D,H,Je)):H=J,Y&&l_(Y),(Ve=H.props&&H.props.onVnodeBeforeUpdate)&&El(Ve,ee,H,J),Le.allowRecurse=!0;const Ge=__(D),rt=D.subTree;D.subTree=Ge,g(rt,Ge,f(rt.el),ce(rt),D,re,pe),H.el=Ge.el,ge===null&&Aoe(D,Ge.el),K&&So(K,re),(Ve=H.props&&H.props.onVnodeUpdated)&&So(()=>El(Ve,ee,H,J),re)}else{let H;const{el:Y,props:K}=z,{bm:ee,m:J,parent:ge}=D,Ve=k_(z);if(Le.allowRecurse=!1,ee&&l_(ee),!Ve&&(H=K&&K.onVnodeBeforeMount)&&El(H,ge,z),Le.allowRecurse=!0,Y&&De){const Ge=()=>{D.subTree=__(D),De(Y,D.subTree,D,re,null)};Ve?z.type.__asyncLoader().then(()=>!D.isUnmounted&&Ge()):Ge()}else{const Ge=D.subTree=__(D);g(null,Ge,V,he,D,re,pe),z.el=Ge.el}if(J&&So(J,re),!Ve&&(H=K&&K.onVnodeMounted)){const Ge=z;So(()=>El(H,ge,Ge),re)}z.shapeFlag&256&&D.a&&So(D.a,re),D.isMounted=!0,z=V=he=null}},Le=new h_(We,()=>AN(D.update),D.scope),$e=D.update=Le.run.bind(Le);$e.id=D.uid,Le.allowRecurse=$e.allowRecurse=!0,$e()},O=(D,z,V)=>{z.component=D;const he=D.vnode.props;D.vnode=z,D.next=null,Woe(D,z.props,he,V),Xoe(D,z.children,V),uv(),W_(void 0,D.update),Yf()},B=(D,z,V,he,re,pe,Je,We,Le=!1)=>{const $e=D&&D.children,H=D?D.shapeFlag:0,Y=z.children,{patchFlag:K,shapeFlag:ee}=z;if(K>0){if(K&128){W($e,Y,V,he,re,pe,Je,We,Le);return}else if(K&256){U($e,Y,V,he,re,pe,Je,We,Le);return}}ee&8?(H&16&&se($e,re,pe),Y!==$e&&c(V,Y)):H&16?ee&16?W($e,Y,V,he,re,pe,Je,We,Le):se($e,re,pe,!0):(H&8&&c(V,""),ee&16&&T(Y,V,he,re,pe,Je,We,Le))},U=(D,z,V,he,re,pe,Je,We,Le)=>{D=D||av,z=z||av;const $e=D.length,H=z.length,Y=Math.min($e,H);let K;for(K=0;K<Y;K++){const ee=z[K]=Le?mc(z[K]):_l(z[K]);g(D[K],ee,V,null,re,pe,Je,We,Le)}$e>H?se(D,re,pe,!0,!1,Y):T(z,V,he,re,pe,Je,We,Le,Y)},W=(D,z,V,he,re,pe,Je,We,Le)=>{let $e=0;const H=z.length;let Y=D.length-1,K=H-1;for(;$e<=Y&&$e<=K;){const ee=D[$e],J=z[$e]=Le?mc(z[$e]):_l(z[$e]);if(Zf(ee,J))g(ee,J,V,null,re,pe,Je,We,Le);else break;$e++}for(;$e<=Y&&$e<=K;){const ee=D[Y],J=z[K]=Le?mc(z[K]):_l(z[K]);if(Zf(ee,J))g(ee,J,V,null,re,pe,Je,We,Le);else break;Y--,K--}if($e>Y){if($e<=K){const ee=K+1,J=ee<H?z[ee].el:he;for(;$e<=K;)g(null,z[$e]=Le?mc(z[$e]):_l(z[$e]),V,J,re,pe,Je,We,Le),$e++}}else if($e>K)for(;$e<=Y;)ie(D[$e],re,pe,!0),$e++;else{const ee=$e,J=$e,ge=new Map;for($e=J;$e<=K;$e++){const kt=z[$e]=Le?mc(z[$e]):_l(z[$e]);kt.key!=null&&ge.set(kt.key,$e)}let Ve,Ge=0;const rt=K-J+1;let Se=!1,ye=0;const Re=new Array(rt);for($e=0;$e<rt;$e++)Re[$e]=0;for($e=ee;$e<=Y;$e++){const kt=D[$e];if(Ge>=rt){ie(kt,re,pe,!0);continue}let Ae;if(kt.key!=null)Ae=ge.get(kt.key);else for(Ve=J;Ve<=K;Ve++)if(Re[Ve-J]===0&&Zf(kt,z[Ve])){Ae=Ve;break}Ae===void 0?ie(kt,re,pe,!0):(Re[Ae-J]=$e+1,Ae>=ye?ye=Ae:Se=!0,g(kt,z[Ae],V,null,re,pe,Je,We,Le),Ge++)}const St=Se?Joe(Re):av;for(Ve=St.length-1,$e=rt-1;$e>=0;$e--){const kt=J+$e,Ae=z[kt],ut=kt+1<H?z[kt+1].el:he;Re[$e]===0?g(null,Ae,V,ut,re,pe,Je,We,Le):Se&&(Ve<0||$e!==St[Ve]?X(Ae,V,ut,2):Ve--)}}},X=(D,z,V,he,re=null)=>{const{el:pe,type:Je,transition:We,children:Le,shapeFlag:$e}=D;if($e&6){X(D.component.subTree,z,V,he);return}if($e&128){D.suspense.move(z,V,he);return}if($e&64){Je.move(D,z,V,Me);return}if(Je===Fi){n(pe,z,V);for(let Y=0;Y<Le.length;Y++)X(Le[Y],z,V,he);n(D.anchor,z,V);return}if(Je===B_){x(D,z,V);return}if(he!==2&&$e&1&&We)if(he===0)We.beforeEnter(pe),n(pe,z,V),So(()=>We.enter(pe),re);else{const{leave:Y,delayLeave:K,afterLeave:ee}=We,J=()=>n(pe,z,V),ge=()=>{Y(pe,()=>{J(),ee&&ee()})};K?K(pe,J,ge):ge()}else n(pe,z,V)},ie=(D,z,V,he=!1,re=!1)=>{const{type:pe,props:Je,ref:We,children:Le,dynamicChildren:$e,shapeFlag:H,patchFlag:Y,dirs:K}=D;if(We!=null&&O_(We,null,V,D,!0),H&256){z.ctx.deactivate(D);return}const ee=H&1&&K,J=!k_(D);let ge;if(J&&(ge=Je&&Je.onVnodeBeforeUnmount)&&El(ge,z,D),H&6)fe(D.component,V,he);else{if(H&128){D.suspense.unmount(V,he);return}ee&&qf(D,null,z,"beforeUnmount"),H&64?D.type.remove(D,z,V,re,Me,he):$e&&(pe!==Fi||Y>0&&Y&64)?se($e,z,V,!1,!0):(pe===Fi&&Y&(128|256)||!re&&H&16)&&se(Le,z,V),he&&q(D)}(J&&(ge=Je&&Je.onVnodeUnmounted)||ee)&&So(()=>{ge&&El(ge,z,D),ee&&qf(D,null,z,"unmounted")},V)},q=D=>{const{type:z,el:V,anchor:he,transition:re}=D;if(z===Fi){j(V,he);return}if(z===B_){w(D);return}const pe=()=>{i(V),re&&!re.persisted&&re.afterLeave&&re.afterLeave()};if(D.shapeFlag&1&&re&&!re.persisted){const{leave:Je,delayLeave:We}=re,Le=()=>Je(V,pe);We?We(D.el,pe,Le):Le()}else pe()},j=(D,z)=>{let V;for(;D!==z;)V=d(D),i(D),D=V;i(z)},fe=(D,z,V)=>{const{bum:he,scope:re,update:pe,subTree:Je,um:We}=D;he&&l_(he),re.stop(),pe&&(pe.active=!1,ie(Je,D,z,V)),We&&So(We,z),So(()=>{D.isUnmounted=!0},z),z&&z.pendingBranch&&!z.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===z.pendingId&&(z.deps--,z.deps===0&&z.resolve())},se=(D,z,V,he=!1,re=!1,pe=0)=>{for(let Je=pe;Je<D.length;Je++)ie(D[Je],z,V,he,re)},ce=D=>D.shapeFlag&6?ce(D.component.subTree):D.shapeFlag&128?D.suspense.next():d(D.anchor||D.el),_e=(D,z,V)=>{D==null?z._vnode&&ie(z._vnode,null,null,!0):g(z._vnode||null,D,z,null,null,null,V),IN(),z._vnode=D},Me={p:g,um:ie,m:X,r:q,mt:$,mc:T,pc:B,pbc:k,n:ce,o:r};let Ye,De;return t&&([Ye,De]=t(Me)),{render:_e,hydrate:Ye,createApp:Koe(_e,Ye)}}function O_(r,t,e,n,i=!1){if(un(r)){r.forEach((d,h)=>O_(d,t&&(un(t)?t[h]:t),e,n,i));return}if(k_(n)&&!i)return;const a=n.shapeFlag&4?G_(n.component)||n.component.proxy:n.el,o=i?null:a,{i:s,r:l}=r,u=t&&t.r,c=s.refs===li?s.refs={}:s.refs,f=s.setupState;if(u!=null&&u!==l&&(La(u)?(c[u]=null,zn(f,u)&&(f[u]=null)):lo(u)&&(u.value=null)),La(l)){const d=()=>{c[l]=o,zn(f,l)&&(f[l]=o)};o?(d.id=-1,So(d,e)):d()}else if(lo(l)){const d=()=>{l.value=o};o?(d.id=-1,So(d,e)):d()}else vn(l)&&yc(l,s,12,[o,c])}function El(r,t,e,n=null){Ms(r,t,7,[e,n])}function L_(r,t,e=!1){const n=r.children,i=t.children;if(un(n)&&un(i))for(let a=0;a<n.length;a++){const o=n[a];let s=i[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[a]=mc(i[a]),s.el=o.el),e||L_(o,s))}}function Joe(r){const t=r.slice(),e=[0];let n,i,a,o,s;const l=r.length;for(n=0;n<l;n++){const u=r[n];if(u!==0){if(i=e[e.length-1],r[i]<u){t[n]=i,e.push(n);continue}for(a=0,o=e.length-1;a<o;)s=a+o>>1,r[e[s]]<u?a=s+1:o=s;u<r[e[a]]&&(a>0&&(t[n]=e[a-1]),e[a]=n)}}for(a=e.length,o=e[a-1];a-- >0;)e[a]=o,o=t[o];return e}const ese=r=>r.__isTeleport,Qg=r=>r&&(r.disabled||r.disabled===""),hN=r=>typeof SVGElement!="undefined"&&r instanceof SVGElement,F_=(r,t)=>{const e=r&&r.to;return La(e)?t?t(e):null:e},tse={__isTeleport:!0,process(r,t,e,n,i,a,o,s,l,u){const{mc:c,pc:f,pbc:d,o:{insert:h,querySelector:v,createText:p,createComment:g}}=u,m=Qg(t.props);let{shapeFlag:y,children:b,dynamicChildren:x}=t;if(r==null){const w=t.el=p(""),S=t.anchor=p("");h(w,e,n),h(S,e,n);const C=t.target=F_(t.props,v),_=t.targetAnchor=p("");C&&(h(_,C),o=o||hN(C));const T=(E,k)=>{y&16&&c(b,E,k,i,a,o,s,l)};m?T(e,S):C&&T(C,_)}else{t.el=r.el;const w=t.anchor=r.anchor,S=t.target=r.target,C=t.targetAnchor=r.targetAnchor,_=Qg(r.props),T=_?e:S,E=_?w:C;if(o=o||hN(S),x?(d(r.dynamicChildren,x,T,i,a,o,s),L_(r,t,!0)):l||f(r,t,T,E,i,a,o,s,!1),m)_||Ex(t,e,w,u,1);else if((t.props&&t.props.to)!==(r.props&&r.props.to)){const k=t.target=F_(t.props,v);k&&Ex(t,k,null,u,0)}else _&&Ex(t,S,C,u,1)}},remove(r,t,e,n,{um:i,o:{remove:a}},o){const{shapeFlag:s,children:l,anchor:u,targetAnchor:c,target:f,props:d}=r;if(f&&a(c),(o||!Qg(d))&&(a(u),s&16))for(let h=0;h<l.length;h++){const v=l[h];i(v,t,e,!0,!!v.dynamicChildren)}},move:Ex,hydrate:rse};function Ex(r,t,e,{o:{insert:n},m:i},a=2){a===0&&n(r.targetAnchor,t,e);const{el:o,anchor:s,shapeFlag:l,children:u,props:c}=r,f=a===2;if(f&&n(o,t,e),(!f||Qg(c))&&l&16)for(let d=0;d<u.length;d++)i(u[d],t,e,2);f&&n(s,t,e)}function rse(r,t,e,n,i,a,{o:{nextSibling:o,parentNode:s,querySelector:l}},u){const c=t.target=F_(t.props,l);if(c){const f=c._lpa||c.firstChild;t.shapeFlag&16&&(Qg(t.props)?(t.anchor=u(o(r),t,s(r),e,n,i,a),t.targetAnchor=f):(t.anchor=o(r),t.targetAnchor=u(f,t,c,e,n,i,a)),c._lpa=t.targetAnchor&&o(t.targetAnchor))}return t.anchor&&o(t.anchor)}const vN=tse,pN="components";function fdt(r,t){return ise(pN,r,!0,t)||r}const nse=Symbol();function ise(r,t,e=!0,n=!1){const i=as||Fa;if(i){const a=i.type;if(r===pN){const s=gse(a);if(s&&(s===t||s===xl(t)||s===cx(xl(t))))return a}const o=gN(i[r]||a[r],t)||gN(i.appContext[r],t);return!o&&n?a:o}}function gN(r,t){return r&&(r[t]||r[xl(t)]||r[cx(xl(t))])}const Fi=Symbol(void 0),N_=Symbol(void 0),ks=Symbol(void 0),B_=Symbol(void 0),Jg=[];let Kf=null;function em(r=!1){Jg.push(Kf=r?null:[])}function ase(){Jg.pop(),Kf=Jg[Jg.length-1]||null}let _x=1;function mN(r){_x+=r}function yN(r){return r.dynamicChildren=_x>0?Kf||av:null,ase(),_x>0&&Kf&&Kf.push(r),r}function ddt(r,t,e,n,i,a){return yN(xN(r,t,e,n,i,a,!0))}function tm(r,t,e,n,i){return yN(Un(r,t,e,n,i,!0))}function Tx(r){return r?r.__v_isVNode===!0:!1}function Zf(r,t){return r.type===t.type&&r.key===t.key}const Ax="__vInternal",bN=({key:r})=>r!=null?r:null,kx=({ref:r})=>r!=null?La(r)||lo(r)||vn(r)?{i:as,r}:r:null;function xN(r,t=null,e=null,n=0,i=null,a=r===Fi?0:1,o=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:r,props:t,key:t&&bN(t),ref:t&&kx(t),scopeId:bx,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return s?($_(l,e),a&128&&r.normalize(l)):e&&(l.shapeFlag|=La(e)?8:16),_x>0&&!o&&Kf&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&Kf.push(l),l}const Un=ose;function ose(r,t=null,e=null,n=0,i=null,a=!1){if((!r||r===nse)&&(r=ks),Tx(r)){const s=gc(r,t,!0);return e&&$_(s,e),s}if(mse(r)&&(r=r.__vccOpts),t){t=sse(t);let{class:s,style:l}=t;s&&!La(s)&&(t.class=n_(s)),ha(l)&&(zF(l)&&!un(l)&&(l=Oa({},l)),t.style=r_(l))}const o=La(r)?1:koe(r)?128:ese(r)?64:ha(r)?4:vn(r)?2:0;return xN(r,t,e,n,i,o,a,!0)}function sse(r){return r?zF(r)||Ax in r?Oa({},r):r:null}function gc(r,t,e=!1){const{props:n,ref:i,patchFlag:a,children:o}=r,s=t?Tl(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:s,key:s&&bN(s),ref:t&&t.ref?e&&i?un(i)?i.concat(kx(t)):[i,kx(t)]:kx(t):i,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:o,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:t&&r.type!==Fi?a===-1?16:a|16:a,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&gc(r.ssContent),ssFallback:r.ssFallback&&gc(r.ssFallback),el:r.el,anchor:r.anchor}}function rm(r=" ",t=0){return Un(N_,null,r,t)}function hdt(r="",t=!1){return t?(em(),tm(ks,null,r)):Un(ks,null,r)}function _l(r){return r==null||typeof r=="boolean"?Un(ks):un(r)?Un(Fi,null,r.slice()):typeof r=="object"?mc(r):Un(N_,null,String(r))}function mc(r){return r.el===null||r.memo?r:gc(r)}function $_(r,t){let e=0;const{shapeFlag:n}=r;if(t==null)t=null;else if(un(t))e=16;else if(typeof t=="object")if(n&(1|64)){const i=t.default;i&&(i._c&&(i._d=!1),$_(r,i()),i._c&&(i._d=!0));return}else{e=32;const i=t._;!i&&!(Ax in t)?t._ctx=as:i===3&&as&&(as.slots._===1?t._=1:(t._=2,r.patchFlag|=1024))}else vn(t)?(t={default:t,_ctx:as},e=32):(t=String(t),n&64?(e=16,t=[rm(t)]):e=8);r.children=t,r.shapeFlag|=e}function Tl(...r){const t={};for(let e=0;e<r.length;e++){const n=r[e];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=n_([t.class,n.class]));else if(i==="style")t.style=r_([t.style,n.style]);else if(ox(i)){const a=t[i],o=n[i];a!==o&&!(un(a)&&a.includes(o))&&(t[i]=a?[].concat(a,o):o)}else i!==""&&(t[i]=n[i])}return t}function vdt(r,t,e,n){let i;const a=e&&e[n];if(un(r)||La(r)){i=new Array(r.length);for(let o=0,s=r.length;o<s;o++)i[o]=t(r[o],o,void 0,a&&a[o])}else if(typeof r=="number"){i=new Array(r);for(let o=0;o<r;o++)i[o]=t(o+1,o,void 0,a&&a[o])}else if(ha(r))if(r[Symbol.iterator])i=Array.from(r,(o,s)=>t(o,s,void 0,a&&a[s]));else{const o=Object.keys(r);i=new Array(o.length);for(let s=0,l=o.length;s<l;s++){const u=o[s];i[s]=t(r[u],u,s,a&&a[s])}}else i=[];return e&&(e[n]=i),i}function Jr(r,t,e={},n,i){if(as.isCE)return Un("slot",t==="default"?null:{name:t},n&&n());let a=r[t];a&&a._c&&(a._d=!1),em();const o=a&&wN(a(e)),s=tm(Fi,{key:e.key||`_${t}`},o||(n?n():[]),o&&r._===1?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),a&&a._c&&(a._d=!0),s}function wN(r){return r.some(t=>Tx(t)?!(t.type===ks||t.type===Fi&&!wN(t.children)):!0)?r:null}const z_=r=>r?SN(r)?G_(r)||r.proxy:z_(r.parent):null,Mx=Oa(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>z_(r.parent),$root:r=>z_(r.root),$emit:r=>r.emit,$options:r=>tN(r),$forceUpdate:r=>()=>AN(r.update),$nextTick:r=>oa.bind(r.proxy),$watch:r=>Cse.bind(r)}),lse={get({_:r},t){const{ctx:e,setupState:n,data:i,props:a,accessCache:o,type:s,appContext:l}=r;let u;if(t[0]!=="$"){const h=o[t];if(h!==void 0)switch(h){case 1:return n[t];case 2:return i[t];case 4:return e[t];case 3:return a[t]}else{if(n!==li&&zn(n,t))return o[t]=1,n[t];if(i!==li&&zn(i,t))return o[t]=2,i[t];if((u=r.propsOptions[0])&&zn(u,t))return o[t]=3,a[t];if(e!==li&&zn(e,t))return o[t]=4,e[t];I_&&(o[t]=0)}}const c=Mx[t];let f,d;if(c)return t==="$attrs"&&is(r,"get",t),c(r);if((f=s.__cssModules)&&(f=f[t]))return f;if(e!==li&&zn(e,t))return o[t]=4,e[t];if(d=l.config.globalProperties,zn(d,t))return d[t]},set({_:r},t,e){const{data:n,setupState:i,ctx:a}=r;if(i!==li&&zn(i,t))i[t]=e;else if(n!==li&&zn(n,t))n[t]=e;else if(zn(r.props,t))return!1;return t[0]==="$"&&t.slice(1)in r?!1:(a[t]=e,!0)},has({_:{data:r,setupState:t,accessCache:e,ctx:n,appContext:i,propsOptions:a}},o){let s;return!!e[o]||r!==li&&zn(r,o)||t!==li&&zn(t,o)||(s=a[0])&&zn(s,o)||zn(n,o)||zn(Mx,o)||zn(i.config.globalProperties,o)}},use=dN();let cse=0;function fse(r,t,e){const n=r.type,i=(t?t.appContext:r.appContext)||use,a={uid:cse++,vnode:r,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,update:null,scope:new Gae(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:iN(n,i),emitsOptions:WF(n,i),emit:null,emitted:null,propsDefaults:li,inheritAttrs:n.inheritAttrs,ctx:li,data:li,props:li,attrs:li,slots:li,refs:li,setupState:li,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Soe.bind(null,a),r.ce&&r.ce(a),a}let Fa=null;const fv=()=>Fa||as,dv=r=>{Fa=r,r.scope.on()},Qf=()=>{Fa&&Fa.scope.off(),Fa=null};function SN(r){return r.vnode.shapeFlag&4}let Ix=!1;function dse(r,t=!1){Ix=t;const{props:e,children:n}=r.vnode,i=SN(r);Hoe(r,e,i,t),Yoe(r,n);const a=i?hse(r,t):void 0;return Ix=!1,a}function hse(r,t){const e=r.type;r.accessCache=Object.create(null),r.proxy=w_(new Proxy(r.ctx,lse));const{setup:n}=e;if(n){const i=r.setupContext=n.length>1?pse(r):null;dv(r),uv();const a=yc(n,r,0,[r.props,i]);if(Yf(),Qf(),bF(a)){if(a.then(Qf,Qf),t)return a.then(o=>{CN(r,o,t)}).catch(o=>{Px(o,r,0)});r.asyncDep=a}else CN(r,a,t)}else _N(r,t)}function CN(r,t,e){vn(t)?r.type.__ssrInlineRender?r.ssrRender=t:r.render=t:ha(t)&&(r.setupState=HF(t)),_N(r,e)}let EN;function _N(r,t,e){const n=r.type;if(!r.render){if(!t&&EN&&!n.render){const i=n.template;if(i){const{isCustomElement:a,compilerOptions:o}=r.appContext.config,{delimiters:s,compilerOptions:l}=n,u=Oa(Oa({isCustomElement:a,delimiters:s},o),l);n.render=EN(i,u)}}r.render=n.render||Js}dv(r),uv(),$oe(r),Yf(),Qf()}function vse(r){return new Proxy(r.attrs,{get(t,e){return is(r,"get","$attrs"),t[e]}})}function pse(r){const t=n=>{r.exposed=n||{}};let e;return{get attrs(){return e||(e=vse(r))},slots:r.slots,emit:r.emit,expose:t}}function G_(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(HF(w_(r.exposed)),{get(t,e){if(e in t)return t[e];if(e in Mx)return Mx[e](r)}}))}function gse(r){return vn(r)&&r.displayName||r.name}function mse(r){return vn(r)&&"__vccOpts"in r}function yc(r,t,e,n){let i;try{i=n?r(...n):r()}catch(a){Px(a,t,e)}return i}function Ms(r,t,e,n){if(vn(r)){const a=yc(r,t,e,n);return a&&bF(a)&&a.catch(o=>{Px(o,t,e)}),a}const i=[];for(let a=0;a<r.length;a++)i.push(Ms(r[a],t,e,n));return i}function Px(r,t,e,n=!0){const i=t?t.vnode:null;if(t){let a=t.parent;const o=t.proxy,s=e;for(;a;){const u=a.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](r,o,s)===!1)return}a=a.parent}const l=t.appContext.config.errorHandler;if(l){yc(l,null,10,[r,o,s]);return}}yse(r,e,i,n)}function yse(r,t,e,n=!0){console.error(r)}let Dx=!1,U_=!1;const ss=[];let mu=0;const nm=[];let im=null,hv=0;const am=[];let bc=null,vv=0;const TN=Promise.resolve();let V_=null,H_=null;function oa(r){const t=V_||TN;return r?t.then(this?r.bind(this):r):t}function bse(r){let t=mu+1,e=ss.length;for(;t<e;){const n=t+e>>>1;om(ss[n])<r?t=n+1:e=n}return t}function AN(r){(!ss.length||!ss.includes(r,Dx&&r.allowRecurse?mu+1:mu))&&r!==H_&&(r.id==null?ss.push(r):ss.splice(bse(r.id),0,r),kN())}function kN(){!Dx&&!U_&&(U_=!0,V_=TN.then(PN))}function xse(r){const t=ss.indexOf(r);t>mu&&ss.splice(t,1)}function MN(r,t,e,n){un(r)?e.push(...r):(!t||!t.includes(r,r.allowRecurse?n+1:n))&&e.push(r),kN()}function wse(r){MN(r,im,nm,hv)}function Sse(r){MN(r,bc,am,vv)}function W_(r,t=null){if(nm.length){for(H_=t,im=[...new Set(nm)],nm.length=0,hv=0;hv<im.length;hv++)im[hv]();im=null,hv=0,H_=null,W_(r,t)}}function IN(r){if(am.length){const t=[...new Set(am)];if(am.length=0,bc){bc.push(...t);return}for(bc=t,bc.sort((e,n)=>om(e)-om(n)),vv=0;vv<bc.length;vv++)bc[vv]();bc=null,vv=0}}const om=r=>r.id==null?1/0:r.id;function PN(r){U_=!1,Dx=!0,W_(r),ss.sort((e,n)=>om(e)-om(n));const t=Js;try{for(mu=0;mu<ss.length;mu++){const e=ss[mu];e&&e.active!==!1&&yc(e,null,14)}}finally{mu=0,ss.length=0,IN(),Dx=!1,V_=null,(ss.length||nm.length||am.length)&&PN(r)}}function Co(r,t){return j_(r,null,t)}const DN={};function nn(r,t,e){return j_(r,t,e)}function j_(r,t,{immediate:e,deep:n,flush:i,onTrack:a,onTrigger:o}=li){const s=Fa;let l,u=!1,c=!1;if(lo(r)?(l=()=>r.value,u=!!r._shallow):cv(r)?(l=()=>r,n=!0):un(r)?(c=!0,u=r.some(cv),l=()=>r.map(m=>{if(lo(m))return m.value;if(cv(m))return Jf(m);if(vn(m))return yc(m,s,2)})):vn(r)?t?l=()=>yc(r,s,2):l=()=>{if(!(s&&s.isUnmounted))return f&&f(),Ms(r,s,3,[d])}:l=Js,t&&n){const m=l;l=()=>Jf(m())}let f,d=m=>{f=g.onStop=()=>{yc(m,s,4)}};if(Ix)return d=Js,t?e&&Ms(t,s,3,[l(),c?[]:void 0,d]):l(),Js;let h=c?[]:DN;const v=()=>{if(!!g.active)if(t){const m=g.run();(n||u||(c?m.some((y,b)=>jg(y,h[b])):jg(m,h)))&&(f&&f(),Ms(t,s,3,[m,h===DN?void 0:h,d]),h=m)}else g.run()};v.allowRecurse=!!t;let p;i==="sync"?p=v:i==="post"?p=()=>So(v,s&&s.suspense):p=()=>{!s||s.isMounted?wse(v):v()};const g=new h_(l,p);return t?e?v():h=g.run():i==="post"?So(g.run.bind(g),s&&s.suspense):g.run(),()=>{g.stop(),s&&s.scope&&mF(s.scope.effects,g)}}function Cse(r,t,e){const n=this.proxy,i=La(r)?r.includes(".")?RN(n,r):()=>n[r]:r.bind(n,n);let a;vn(t)?a=t:(a=t.handler,e=t);const o=Fa;dv(this);const s=j_(i,a.bind(n),e);return o?dv(o):Qf(),s}function RN(r,t){const e=t.split(".");return()=>{let n=r;for(let i=0;i<e.length&&n;i++)n=n[e[i]];return n}}function Jf(r,t){if(!ha(r)||r.__v_skip||(t=t||new Set,t.has(r)))return r;if(t.add(r),lo(r))Jf(r.value,t);else if(un(r))for(let e=0;e<r.length;e++)Jf(r[e],t);else if(yF(r)||ov(r))r.forEach(e=>{Jf(e,t)});else if(wF(r))for(const e in r)Jf(r[e],t);return r}function M(r,t,e){const n=arguments.length;return n===2?ha(t)&&!un(t)?Tx(t)?Un(r,null,[t]):Un(r,t):Un(r,null,t):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&Tx(e)&&(e=[e]),Un(r,t,e))}const Ese="3.2.24",_se="http://www.w3.org/2000/svg",pv=typeof document!="undefined"?document:null,ON=new Map,Tse={insert:(r,t,e)=>{t.insertBefore(r,e||null)},remove:r=>{const t=r.parentNode;t&&t.removeChild(r)},createElement:(r,t,e,n)=>{const i=t?pv.createElementNS(_se,r):pv.createElement(r,e?{is:e}:void 0);return r==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:r=>pv.createTextNode(r),createComment:r=>pv.createComment(r),setText:(r,t)=>{r.nodeValue=t},setElementText:(r,t)=>{r.textContent=t},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>pv.querySelector(r),setScopeId(r,t){r.setAttribute(t,"")},cloneNode(r){const t=r.cloneNode(!0);return"_value"in r&&(t._value=r._value),t},insertStaticContent(r,t,e,n){const i=e?e.previousSibling:t.lastChild;let a=ON.get(r);if(!a){const o=pv.createElement("template");if(o.innerHTML=n?`<svg>${r}</svg>`:r,a=o.content,n){const s=a.firstChild;for(;s.firstChild;)a.appendChild(s.firstChild);a.removeChild(s)}ON.set(r,a)}return t.insertBefore(a.cloneNode(!0),e),[i?i.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}};function Ase(r,t,e){const n=r._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?r.removeAttribute("class"):e?r.setAttribute("class",t):r.className=t}function kse(r,t,e){const n=r.style,i=La(e);if(e&&!i){for(const a in e)Y_(n,a,e[a]);if(t&&!La(t))for(const a in t)e[a]==null&&Y_(n,a,"")}else{const a=n.display;i?t!==e&&(n.cssText=e):t&&r.removeAttribute("style"),"_vod"in r&&(n.display=a)}}const LN=/\s*!important$/;function Y_(r,t,e){if(un(e))e.forEach(n=>Y_(r,t,n));else if(t.startsWith("--"))r.setProperty(t,e);else{const n=Mse(r,t);LN.test(e)?r.setProperty(sv(n),e.replace(LN,""),"important"):r[n]=e}}const FN=["Webkit","Moz","ms"],X_={};function Mse(r,t){const e=X_[t];if(e)return e;let n=xl(t);if(n!=="filter"&&n in r)return X_[t]=n;n=cx(n);for(let i=0;i<FN.length;i++){const a=FN[i]+n;if(a in r)return X_[t]=a}return t}const NN="http://www.w3.org/1999/xlink";function Ise(r,t,e,n,i){if(n&&t.startsWith("xlink:"))e==null?r.removeAttributeNS(NN,t.slice(6,t.length)):r.setAttributeNS(NN,t,e);else{const a=Iae(t);e==null||a&&!pF(e)?r.removeAttribute(t):r.setAttribute(t,a?"":e)}}function Pse(r,t,e,n,i,a,o){if(t==="innerHTML"||t==="textContent"){n&&o(n,i,a),r[t]=e==null?"":e;return}if(t==="value"&&r.tagName!=="PROGRESS"&&!r.tagName.includes("-")){r._value=e;const s=e==null?"":e;(r.value!==s||r.tagName==="OPTION")&&(r.value=s),e==null&&r.removeAttribute(t);return}if(e===""||e==null){const s=typeof r[t];if(s==="boolean"){r[t]=pF(e);return}else if(e==null&&s==="string"){r[t]="",r.removeAttribute(t);return}else if(s==="number"){try{r[t]=0}catch{}r.removeAttribute(t);return}}try{r[t]=e}catch{}}let Rx=Date.now,BN=!1;if(typeof window!="undefined"){Rx()>document.createEvent("Event").timeStamp&&(Rx=()=>performance.now());const r=navigator.userAgent.match(/firefox\/(\d+)/i);BN=!!(r&&Number(r[1])<=53)}let q_=0;const Dse=Promise.resolve(),Rse=()=>{q_=0},Ose=()=>q_||(Dse.then(Rse),q_=Rx());function Lse(r,t,e,n){r.addEventListener(t,e,n)}function Fse(r,t,e,n){r.removeEventListener(t,e,n)}function Nse(r,t,e,n,i=null){const a=r._vei||(r._vei={}),o=a[t];if(n&&o)o.value=n;else{const[s,l]=Bse(t);if(n){const u=a[t]=$se(n,i);Lse(r,s,u,l)}else o&&(Fse(r,s,o,l),a[t]=void 0)}}const $N=/(?:Once|Passive|Capture)$/;function Bse(r){let t;if($N.test(r)){t={};let e;for(;e=r.match($N);)r=r.slice(0,r.length-e[0].length),t[e[0].toLowerCase()]=!0}return[sv(r.slice(2)),t]}function $se(r,t){const e=n=>{const i=n.timeStamp||Rx();(BN||i>=e.attached-1)&&Ms(zse(n,e.value),t,5,[n])};return e.value=r,e.attached=Ose(),e}function zse(r,t){if(un(t)){const e=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{e.call(r),r._stopped=!0},t.map(n=>i=>!i._stopped&&n(i))}else return t}const zN=/^on[a-z]/,Gse=(r,t,e,n,i=!1,a,o,s,l)=>{t==="class"?Ase(r,n,i):t==="style"?kse(r,e,n):ox(t)?i_(t)||Nse(r,t,e,n,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Use(r,t,n,i))?Pse(r,t,n,a,o,s,l):(t==="true-value"?r._trueValue=n:t==="false-value"&&(r._falseValue=n),Ise(r,t,n,i))};function Use(r,t,e,n){return n?!!(t==="innerHTML"||t==="textContent"||t in r&&zN.test(t)&&vn(e)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&r.tagName==="INPUT"||t==="type"&&r.tagName==="TEXTAREA"||zN.test(t)&&La(e)?!1:t in r}const xc="transition",sm="animation",pa=(r,{slots:t})=>M(XF,VN(r),t);pa.displayName="Transition";const GN={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Vse=pa.props=Oa({},XF.props,GN),ed=(r,t=[])=>{un(r)?r.forEach(e=>e(...t)):r&&r(...t)},UN=r=>r?un(r)?r.some(t=>t.length>1):r.length>1:!1;function VN(r){const t={};for(const I in r)I in GN||(t[I]=r[I]);if(r.css===!1)return t;const{name:e="v",type:n,duration:i,enterFromClass:a=`${e}-enter-from`,enterActiveClass:o=`${e}-enter-active`,enterToClass:s=`${e}-enter-to`,appearFromClass:l=a,appearActiveClass:u=o,appearToClass:c=s,leaveFromClass:f=`${e}-leave-from`,leaveActiveClass:d=`${e}-leave-active`,leaveToClass:h=`${e}-leave-to`}=r,v=Hse(i),p=v&&v[0],g=v&&v[1],{onBeforeEnter:m,onEnter:y,onEnterCancelled:b,onLeave:x,onLeaveCancelled:w,onBeforeAppear:S=m,onAppear:C=y,onAppearCancelled:_=b}=t,T=(I,P,F)=>{td(I,P?c:s),td(I,P?u:o),F&&F()},E=(I,P)=>{td(I,h),td(I,d),P&&P()},k=I=>(P,F)=>{const $=I?C:y,R=()=>T(P,I,F);ed($,[P,R]),HN(()=>{td(P,I?l:a),yu(P,I?c:s),UN($)||WN(P,n,p,R)})};return Oa(t,{onBeforeEnter(I){ed(m,[I]),yu(I,a),yu(I,o)},onBeforeAppear(I){ed(S,[I]),yu(I,l),yu(I,u)},onEnter:k(!1),onAppear:k(!0),onLeave(I,P){const F=()=>E(I,P);yu(I,f),qN(),yu(I,d),HN(()=>{td(I,f),yu(I,h),UN(x)||WN(I,n,g,F)}),ed(x,[I,F])},onEnterCancelled(I){T(I,!1),ed(b,[I])},onAppearCancelled(I){T(I,!0),ed(_,[I])},onLeaveCancelled(I){E(I),ed(w,[I])}})}function Hse(r){if(r==null)return null;if(ha(r))return[K_(r.enter),K_(r.leave)];{const t=K_(r);return[t,t]}}function K_(r){return SF(r)}function yu(r,t){t.split(/\s+/).forEach(e=>e&&r.classList.add(e)),(r._vtc||(r._vtc=new Set)).add(t)}function td(r,t){t.split(/\s+/).forEach(n=>n&&r.classList.remove(n));const{_vtc:e}=r;e&&(e.delete(t),e.size||(r._vtc=void 0))}function HN(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let Wse=0;function WN(r,t,e,n){const i=r._endId=++Wse,a=()=>{i===r._endId&&n()};if(e)return setTimeout(a,e);const{type:o,timeout:s,propCount:l}=jN(r,t);if(!o)return n();const u=o+"end";let c=0;const f=()=>{r.removeEventListener(u,d),a()},d=h=>{h.target===r&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},s+1),r.addEventListener(u,d)}function jN(r,t){const e=window.getComputedStyle(r),n=v=>(e[v]||"").split(", "),i=n(xc+"Delay"),a=n(xc+"Duration"),o=YN(i,a),s=n(sm+"Delay"),l=n(sm+"Duration"),u=YN(s,l);let c=null,f=0,d=0;t===xc?o>0&&(c=xc,f=o,d=a.length):t===sm?u>0&&(c=sm,f=u,d=l.length):(f=Math.max(o,u),c=f>0?o>u?xc:sm:null,d=c?c===xc?a.length:l.length:0);const h=c===xc&&/\b(transform|all)(,|$)/.test(e[xc+"Property"]);return{type:c,timeout:f,propCount:d,hasTransform:h}}function YN(r,t){for(;r.length<t.length;)r=r.concat(r);return Math.max(...t.map((e,n)=>XN(e)+XN(r[n])))}function XN(r){return Number(r.slice(0,-1).replace(",","."))*1e3}function qN(){return document.body.offsetHeight}const KN=new WeakMap,ZN=new WeakMap,jse={name:"TransitionGroup",props:Oa({},Vse,{tag:String,moveClass:String}),setup(r,{slots:t}){const e=fv(),n=YF();let i,a;return QF(()=>{if(!i.length)return;const o=r.moveClass||`${r.name||"v"}-move`;if(!Zse(i[0].el,e.vnode.el,o))return;i.forEach(Xse),i.forEach(qse);const s=i.filter(Kse);qN(),s.forEach(l=>{const u=l.el,c=u.style;yu(u,o),c.transform=c.webkitTransform=c.transitionDuration="";const f=u._moveCb=d=>{d&&d.target!==u||(!d||/transform$/.test(d.propertyName))&&(u.removeEventListener("transitionend",f),u._moveCb=null,td(u,o))};u.addEventListener("transitionend",f)})}),()=>{const o=Gn(r),s=VN(o);let l=o.tag||Fi;i=a,a=t.default?A_(t.default()):[];for(let u=0;u<a.length;u++){const c=a[u];c.key!=null&&Zg(c,Kg(c,s,n,e))}if(i)for(let u=0;u<i.length;u++){const c=i[u];Zg(c,Kg(c,s,n,e)),KN.set(c,c.el.getBoundingClientRect())}return Un(l,null,a)}}},Yse=jse;function Xse(r){const t=r.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function qse(r){ZN.set(r,r.el.getBoundingClientRect())}function Kse(r){const t=KN.get(r),e=ZN.get(r),n=t.left-e.left,i=t.top-e.top;if(n||i){const a=r.el.style;return a.transform=a.webkitTransform=`translate(${n}px,${i}px)`,a.transitionDuration="0s",r}}function Zse(r,t,e){const n=r.cloneNode();r._vtc&&r._vtc.forEach(o=>{o.split(/\s+/).forEach(s=>s&&n.classList.remove(s))}),e.split(/\s+/).forEach(o=>o&&n.classList.add(o)),n.style.display="none";const i=t.nodeType===1?t:t.parentNode;i.appendChild(n);const{hasTransform:a}=jN(n);return i.removeChild(n),a}const Ox={beforeMount(r,{value:t},{transition:e}){r._vod=r.style.display==="none"?"":r.style.display,e&&t?e.beforeEnter(r):lm(r,t)},mounted(r,{value:t},{transition:e}){e&&t&&e.enter(r)},updated(r,{value:t,oldValue:e},{transition:n}){!t!=!e&&(n?t?(n.beforeEnter(r),lm(r,!0),n.enter(r)):n.leave(r,()=>{lm(r,!1)}):lm(r,t))},beforeUnmount(r,{value:t}){lm(r,t)}};function lm(r,t){r.style.display=t?r._vod:"none"}const Qse=Oa({patchProp:Gse},Tse);let QN;function Jse(){return QN||(QN=Zoe(Qse))}const pdt=(...r)=>{const t=Jse().createApp(...r),{mount:e}=t;return t.mount=n=>{const i=ele(n);if(!i)return;const a=t._component;!vn(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.innerHTML="";const o=e(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function ele(r){return La(r)?document.querySelector(r):r}/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const JN=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",gv=r=>JN?Symbol(r):"_vr_"+r,tle=gv("rvlm"),eB=gv("rvd"),Lx=gv("r"),tB=gv("rl"),Z_=gv("rvl"),mv=typeof window!="undefined";function rle(r){return r.__esModule||JN&&r[Symbol.toStringTag]==="Module"}const ui=Object.assign;function Q_(r,t){const e={};for(const n in t){const i=t[n];e[n]=Array.isArray(i)?i.map(r):r(i)}return e}const um=()=>{},nle=/\/$/,ile=r=>r.replace(nle,"");function J_(r,t,e="/"){let n,i={},a="",o="";const s=t.indexOf("?"),l=t.indexOf("#",s>-1?s:0);return s>-1&&(n=t.slice(0,s),a=t.slice(s+1,l>-1?l:t.length),i=r(a)),l>-1&&(n=n||t.slice(0,l),o=t.slice(l,t.length)),n=lle(n!=null?n:t,e),{fullPath:n+(a&&"?")+a+o,path:n,query:i,hash:o}}function ale(r,t){const e=t.query?r(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function rB(r,t){return!t||!r.toLowerCase().startsWith(t.toLowerCase())?r:r.slice(t.length)||"/"}function ole(r,t,e){const n=t.matched.length-1,i=e.matched.length-1;return n>-1&&n===i&&yv(t.matched[n],e.matched[i])&&nB(t.params,e.params)&&r(t.query)===r(e.query)&&t.hash===e.hash}function yv(r,t){return(r.aliasOf||r)===(t.aliasOf||t)}function nB(r,t){if(Object.keys(r).length!==Object.keys(t).length)return!1;for(const e in r)if(!sle(r[e],t[e]))return!1;return!0}function sle(r,t){return Array.isArray(r)?iB(r,t):Array.isArray(t)?iB(t,r):r===t}function iB(r,t){return Array.isArray(t)?r.length===t.length&&r.every((e,n)=>e===t[n]):r.length===1&&r[0]===t}function lle(r,t){if(r.startsWith("/"))return r;if(!r)return t;const e=t.split("/"),n=r.split("/");let i=e.length-1,a,o;for(a=0;a<n.length;a++)if(o=n[a],!(i===1||o==="."))if(o==="..")i--;else break;return e.slice(0,i).join("/")+"/"+n.slice(a-(a===n.length?1:0)).join("/")}var cm;(function(r){r.pop="pop",r.push="push"})(cm||(cm={}));var fm;(function(r){r.back="back",r.forward="forward",r.unknown=""})(fm||(fm={}));function ule(r){if(!r)if(mv){const t=document.querySelector("base");r=t&&t.getAttribute("href")||"/",r=r.replace(/^\w+:\/\/[^\/]+/,"")}else r="/";return r[0]!=="/"&&r[0]!=="#"&&(r="/"+r),ile(r)}const cle=/^[^#]+#/;function fle(r,t){return r.replace(cle,"#")+t}function dle(r,t){const e=document.documentElement.getBoundingClientRect(),n=r.getBoundingClientRect();return{behavior:t.behavior,left:n.left-e.left-(t.left||0),top:n.top-e.top-(t.top||0)}}const Fx=()=>({left:window.pageXOffset,top:window.pageYOffset});function hle(r){let t;if("el"in r){const e=r.el,n=typeof e=="string"&&e.startsWith("#"),i=typeof e=="string"?n?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!i)return;t=dle(i,r)}else t=r;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function aB(r,t){return(history.state?history.state.position-t:-1)+r}const eT=new Map;function vle(r,t){eT.set(r,t)}function ple(r){const t=eT.get(r);return eT.delete(r),t}let gle=()=>location.protocol+"//"+location.host;function oB(r,t){const{pathname:e,search:n,hash:i}=t,a=r.indexOf("#");if(a>-1){let s=i.includes(r.slice(a))?r.slice(a).length:1,l=i.slice(s);return l[0]!=="/"&&(l="/"+l),rB(l,"")}return rB(e,r)+n+i}function mle(r,t,e,n){let i=[],a=[],o=null;const s=({state:d})=>{const h=oB(r,location),v=e.value,p=t.value;let g=0;if(d){if(e.value=h,t.value=d,o&&o===v){o=null;return}g=p?d.position-p.position:0}else n(h);i.forEach(m=>{m(e.value,v,{delta:g,type:cm.pop,direction:g?g>0?fm.forward:fm.back:fm.unknown})})};function l(){o=e.value}function u(d){i.push(d);const h=()=>{const v=i.indexOf(d);v>-1&&i.splice(v,1)};return a.push(h),h}function c(){const{history:d}=window;!d.state||d.replaceState(ui({},d.state,{scroll:Fx()}),"")}function f(){for(const d of a)d();a=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:f}}function sB(r,t,e,n=!1,i=!1){return{back:r,current:t,forward:e,replaced:n,position:window.history.length,scroll:i?Fx():null}}function yle(r){const{history:t,location:e}=window,n={value:oB(r,e)},i={value:t.state};i.value||a(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(l,u,c){const f=r.indexOf("#"),d=f>-1?(e.host&&document.querySelector("base")?r:r.slice(f))+l:gle()+r+l;try{t[c?"replaceState":"pushState"](u,"",d),i.value=u}catch(h){console.error(h),e[c?"replace":"assign"](d)}}function o(l,u){const c=ui({},t.state,sB(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});a(l,c,!0),n.value=l}function s(l,u){const c=ui({},i.value,t.state,{forward:l,scroll:Fx()});a(c.current,c,!0);const f=ui({},sB(n.value,l,null),{position:c.position+1},u);a(l,f,!1),n.value=l}return{location:n,state:i,push:s,replace:o}}function ble(r){r=ule(r);const t=yle(r),e=mle(r,t.state,t.location,t.replace);function n(a,o=!0){o||e.pauseListeners(),history.go(a)}const i=ui({location:"",base:r,go:n,createHref:fle.bind(null,r)},t,e);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function gdt(r){return r=location.host?r||location.pathname+location.search:"",r.includes("#")||(r+="#"),ble(r)}function xle(r){return typeof r=="string"||r&&typeof r=="object"}function lB(r){return typeof r=="string"||typeof r=="symbol"}const wc={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},uB=gv("nf");var cB;(function(r){r[r.aborted=4]="aborted",r[r.cancelled=8]="cancelled",r[r.duplicated=16]="duplicated"})(cB||(cB={}));function bv(r,t){return ui(new Error,{type:r,[uB]:!0},t)}function rd(r,t){return r instanceof Error&&uB in r&&(t==null||!!(r.type&t))}const fB="[^/]+?",wle={sensitive:!1,strict:!1,start:!0,end:!0},Sle=/[.+*?^${}()[\]/\\]/g;function Cle(r,t){const e=ui({},wle,t),n=[];let i=e.start?"^":"";const a=[];for(const u of r){const c=u.length?[]:[90];e.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const d=u[f];let h=40+(e.sensitive?.25:0);if(d.type===0)f||(i+="/"),i+=d.value.replace(Sle,"\\$&"),h+=40;else if(d.type===1){const{value:v,repeatable:p,optional:g,regexp:m}=d;a.push({name:v,repeatable:p,optional:g});const y=m||fB;if(y!==fB){h+=10;try{new RegExp(`(${y})`)}catch(x){throw new Error(`Invalid custom RegExp for param "${v}" (${y}): `+x.message)}}let b=p?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(b=g&&u.length<2?`(?:/${b})`:"/"+b),g&&(b+="?"),i+=b,h+=20,g&&(h+=-8),p&&(h+=-20),y===".*"&&(h+=-50)}c.push(h)}n.push(c)}if(e.strict&&e.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}e.strict||(i+="/?"),e.end?i+="$":e.strict&&(i+="(?:/|$)");const o=new RegExp(i,e.sensitive?"":"i");function s(u){const c=u.match(o),f={};if(!c)return null;for(let d=1;d<c.length;d++){const h=c[d]||"",v=a[d-1];f[v.name]=h&&v.repeatable?h.split("/"):h}return f}function l(u){let c="",f=!1;for(const d of r){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const h of d)if(h.type===0)c+=h.value;else if(h.type===1){const{value:v,repeatable:p,optional:g}=h,m=v in u?u[v]:"";if(Array.isArray(m)&&!p)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const y=Array.isArray(m)?m.join("/"):m;if(!y)if(g)d.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${v}"`);c+=y}}return c}return{re:o,score:n,keys:a,parse:s,stringify:l}}function Ele(r,t){let e=0;for(;e<r.length&&e<t.length;){const n=t[e]-r[e];if(n)return n;e++}return r.length<t.length?r.length===1&&r[0]===40+40?-1:1:r.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function _le(r,t){let e=0;const n=r.score,i=t.score;for(;e<n.length&&e<i.length;){const a=Ele(n[e],i[e]);if(a)return a;e++}return i.length-n.length}const Tle={type:0,value:""},Ale=/[a-zA-Z0-9_]/;function kle(r){if(!r)return[[]];if(r==="/")return[[Tle]];if(!r.startsWith("/"))throw new Error(`Invalid path "${r}"`);function t(h){throw new Error(`ERR (${e})/"${u}": ${h}`)}let e=0,n=e;const i=[];let a;function o(){a&&i.push(a),a=[]}let s=0,l,u="",c="";function f(){!u||(e===0?a.push({type:0,value:u}):e===1||e===2||e===3?(a.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function d(){u+=l}for(;s<r.length;){if(l=r[s++],l==="\\"&&e!==2){n=e,e=4;continue}switch(e){case 0:l==="/"?(u&&f(),o()):l===":"?(f(),e=1):d();break;case 4:d(),e=n;break;case 1:l==="("?e=2:Ale.test(l)?d():(f(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:e=3:c+=l;break;case 3:f(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,c="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),o(),i}function Mle(r,t,e){const n=Cle(kle(r.path),e),i=ui(n,{record:r,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function Ile(r,t){const e=[],n=new Map;t=hB({strict:!1,end:!0,sensitive:!1},t);function i(c){return n.get(c)}function a(c,f,d){const h=!d,v=Dle(c);v.aliasOf=d&&d.record;const p=hB(t,c),g=[v];if("alias"in c){const b=typeof c.alias=="string"?[c.alias]:c.alias;for(const x of b)g.push(ui({},v,{components:d?d.record.components:v.components,path:x,aliasOf:d?d.record:v}))}let m,y;for(const b of g){const{path:x}=b;if(f&&x[0]!=="/"){const w=f.record.path,S=w[w.length-1]==="/"?"":"/";b.path=f.record.path+(x&&S+x)}if(m=Mle(b,f,p),d?d.alias.push(m):(y=y||m,y!==m&&y.alias.push(m),h&&c.name&&!dB(m)&&o(c.name)),"children"in v){const w=v.children;for(let S=0;S<w.length;S++)a(w[S],m,d&&d.children[S])}d=d||m,l(m)}return y?()=>{o(y)}:um}function o(c){if(lB(c)){const f=n.get(c);f&&(n.delete(c),e.splice(e.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=e.indexOf(c);f>-1&&(e.splice(f,1),c.record.name&&n.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function s(){return e}function l(c){let f=0;for(;f<e.length&&_le(c,e[f])>=0;)f++;e.splice(f,0,c),c.record.name&&!dB(c)&&n.set(c.record.name,c)}function u(c,f){let d,h={},v,p;if("name"in c&&c.name){if(d=n.get(c.name),!d)throw bv(1,{location:c});p=d.record.name,h=ui(Ple(f.params,d.keys.filter(y=>!y.optional).map(y=>y.name)),c.params),v=d.stringify(h)}else if("path"in c)v=c.path,d=e.find(y=>y.re.test(v)),d&&(h=d.parse(v),p=d.record.name);else{if(d=f.name?n.get(f.name):e.find(y=>y.re.test(f.path)),!d)throw bv(1,{location:c,currentLocation:f});p=d.record.name,h=ui({},f.params,c.params),v=d.stringify(h)}const g=[];let m=d;for(;m;)g.unshift(m.record),m=m.parent;return{name:p,path:v,params:h,matched:g,meta:Ole(g)}}return r.forEach(c=>a(c)),{addRoute:a,resolve:u,removeRoute:o,getRoutes:s,getRecordMatcher:i}}function Ple(r,t){const e={};for(const n of t)n in r&&(e[n]=r[n]);return e}function Dle(r){return{path:r.path,redirect:r.redirect,name:r.name,meta:r.meta||{},aliasOf:void 0,beforeEnter:r.beforeEnter,props:Rle(r),children:r.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in r?r.components||{}:{default:r.component}}}function Rle(r){const t={},e=r.props||!1;if("component"in r)t.default=e;else for(const n in r.components)t[n]=typeof e=="boolean"?e:e[n];return t}function dB(r){for(;r;){if(r.record.aliasOf)return!0;r=r.parent}return!1}function Ole(r){return r.reduce((t,e)=>ui(t,e.meta),{})}function hB(r,t){const e={};for(const n in r)e[n]=n in t?t[n]:r[n];return e}const vB=/#/g,Lle=/&/g,Fle=/\//g,Nle=/=/g,Ble=/\?/g,pB=/\+/g,$le=/%5B/g,zle=/%5D/g,gB=/%5E/g,Gle=/%60/g,mB=/%7B/g,Ule=/%7C/g,yB=/%7D/g,Vle=/%20/g;function tT(r){return encodeURI(""+r).replace(Ule,"|").replace($le,"[").replace(zle,"]")}function Hle(r){return tT(r).replace(mB,"{").replace(yB,"}").replace(gB,"^")}function rT(r){return tT(r).replace(pB,"%2B").replace(Vle,"+").replace(vB,"%23").replace(Lle,"%26").replace(Gle,"`").replace(mB,"{").replace(yB,"}").replace(gB,"^")}function Wle(r){return rT(r).replace(Nle,"%3D")}function jle(r){return tT(r).replace(vB,"%23").replace(Ble,"%3F")}function Yle(r){return r==null?"":jle(r).replace(Fle,"%2F")}function Nx(r){try{return decodeURIComponent(""+r)}catch{}return""+r}function Xle(r){const t={};if(r===""||r==="?")return t;const n=(r[0]==="?"?r.slice(1):r).split("&");for(let i=0;i<n.length;++i){const a=n[i].replace(pB," "),o=a.indexOf("="),s=Nx(o<0?a:a.slice(0,o)),l=o<0?null:Nx(a.slice(o+1));if(s in t){let u=t[s];Array.isArray(u)||(u=t[s]=[u]),u.push(l)}else t[s]=l}return t}function bB(r){let t="";for(let e in r){const n=r[e];if(e=Wle(e),n==null){n!==void 0&&(t+=(t.length?"&":"")+e);continue}(Array.isArray(n)?n.map(a=>a&&rT(a)):[n&&rT(n)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+e,a!=null&&(t+="="+a))})}return t}function qle(r){const t={};for(const e in r){const n=r[e];n!==void 0&&(t[e]=Array.isArray(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}function dm(){let r=[];function t(n){return r.push(n),()=>{const i=r.indexOf(n);i>-1&&r.splice(i,1)}}function e(){r=[]}return{add:t,list:()=>r,reset:e}}function Sc(r,t,e,n,i){const a=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((o,s)=>{const l=f=>{f===!1?s(bv(4,{from:e,to:t})):f instanceof Error?s(f):xle(f)?s(bv(2,{from:t,to:f})):(a&&n.enterCallbacks[i]===a&&typeof f=="function"&&a.push(f),o())},u=r.call(n&&n.instances[i],t,e,l);let c=Promise.resolve(u);r.length<3&&(c=c.then(l)),c.catch(f=>s(f))})}function nT(r,t,e,n){const i=[];for(const a of r)for(const o in a.components){let s=a.components[o];if(!(t!=="beforeRouteEnter"&&!a.instances[o]))if(Kle(s)){const u=(s.__vccOpts||s)[t];u&&i.push(Sc(u,e,n,a,o))}else{let l=s();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${a.path}"`));const c=rle(u)?u.default:u;a.components[o]=c;const d=(c.__vccOpts||c)[t];return d&&Sc(d,e,n,a,o)()}))}}return i}function Kle(r){return typeof r=="object"||"displayName"in r||"props"in r||"__vccOpts"in r}function xB(r){const t=nr(Lx),e=nr(tB),n=Q(()=>t.resolve(va(r.to))),i=Q(()=>{const{matched:l}=n.value,{length:u}=l,c=l[u-1],f=e.matched;if(!c||!f.length)return-1;const d=f.findIndex(yv.bind(null,c));if(d>-1)return d;const h=wB(l[u-2]);return u>1&&wB(c)===h&&f[f.length-1].path!==h?f.findIndex(yv.bind(null,l[u-2])):d}),a=Q(()=>i.value>-1&&eue(e.params,n.value.params)),o=Q(()=>i.value>-1&&i.value===e.matched.length-1&&nB(e.params,n.value.params));function s(l={}){return Jle(l)?t[va(r.replace)?"replace":"push"](va(r.to)).catch(um):Promise.resolve()}return{route:n,href:Q(()=>n.value.href),isActive:a,isExactActive:o,navigate:s}}const Zle=mt({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:xB,setup(r,{slots:t}){const e=vc(xB(r)),{options:n}=nr(Lx),i=Q(()=>({[SB(r.activeClass,n.linkActiveClass,"router-link-active")]:e.isActive,[SB(r.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const a=t.default&&t.default(e);return r.custom?a:M("a",{"aria-current":e.isExactActive?r.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:i.value},a)}}}),Qle=Zle;function Jle(r){if(!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)&&!r.defaultPrevented&&!(r.button!==void 0&&r.button!==0)){if(r.currentTarget&&r.currentTarget.getAttribute){const t=r.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return r.preventDefault&&r.preventDefault(),!0}}function eue(r,t){for(const e in t){const n=t[e],i=r[e];if(typeof n=="string"){if(n!==i)return!1}else if(!Array.isArray(i)||i.length!==n.length||n.some((a,o)=>a!==i[o]))return!1}return!0}function wB(r){return r?r.aliasOf?r.aliasOf.path:r.path:""}const SB=(r,t,e)=>r!=null?r:t!=null?t:e,tue=mt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(r,{attrs:t,slots:e}){const n=nr(Z_),i=Q(()=>r.route||n.value),a=nr(eB,0),o=Q(()=>i.value.matched[a]);Qr(eB,a+1),Qr(tle,o),Qr(Z_,i);const s=ke();return nn(()=>[s.value,o.value,r.name],([l,u,c],[f,d,h])=>{u&&(u.instances[c]=l,d&&d!==u&&l&&l===f&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),l&&u&&(!d||!yv(u,d)||!f)&&(u.enterCallbacks[c]||[]).forEach(v=>v(l))},{flush:"post"}),()=>{const l=i.value,u=o.value,c=u&&u.components[r.name],f=r.name;if(!c)return CB(e.default,{Component:c,route:l});const d=u.props[r.name],h=d?d===!0?l.params:typeof d=="function"?d(l):d:null,p=M(c,ui({},h,t,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(u.instances[f]=null)},ref:s}));return CB(e.default,{Component:p,route:l})||p}}});function CB(r,t){if(!r)return null;const e=r(t);return e.length===1?e[0]:e}const rue=tue;function mdt(r){const t=Ile(r.routes,r),e=r.parseQuery||Xle,n=r.stringifyQuery||bB,i=r.history,a=dm(),o=dm(),s=dm(),l=C_(wc);let u=wc;mv&&r.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Q_.bind(null,j=>""+j),f=Q_.bind(null,Yle),d=Q_.bind(null,Nx);function h(j,fe){let se,ce;return lB(j)?(se=t.getRecordMatcher(j),ce=fe):ce=j,t.addRoute(ce,se)}function v(j){const fe=t.getRecordMatcher(j);fe&&t.removeRoute(fe)}function p(){return t.getRoutes().map(j=>j.record)}function g(j){return!!t.getRecordMatcher(j)}function m(j,fe){if(fe=ui({},fe||l.value),typeof j=="string"){const De=J_(e,j,fe.path),D=t.resolve({path:De.path},fe),z=i.createHref(De.fullPath);return ui(De,D,{params:d(D.params),hash:Nx(De.hash),redirectedFrom:void 0,href:z})}let se;if("path"in j)se=ui({},j,{path:J_(e,j.path,fe.path).path});else{const De=ui({},j.params);for(const D in De)De[D]==null&&delete De[D];se=ui({},j,{params:f(j.params)}),fe.params=f(fe.params)}const ce=t.resolve(se,fe),_e=j.hash||"";ce.params=c(d(ce.params));const Me=ale(n,ui({},j,{hash:Hle(_e),path:ce.path})),Ye=i.createHref(Me);return ui({fullPath:Me,hash:_e,query:n===bB?qle(j.query):j.query||{}},ce,{redirectedFrom:void 0,href:Ye})}function y(j){return typeof j=="string"?J_(e,j,l.value.path):ui({},j)}function b(j,fe){if(u!==j)return bv(8,{from:fe,to:j})}function x(j){return C(j)}function w(j){return x(ui(y(j),{replace:!0}))}function S(j){const fe=j.matched[j.matched.length-1];if(fe&&fe.redirect){const{redirect:se}=fe;let ce=typeof se=="function"?se(j):se;return typeof ce=="string"&&(ce=ce.includes("?")||ce.includes("#")?ce=y(ce):{path:ce},ce.params={}),ui({query:j.query,hash:j.hash,params:j.params},ce)}}function C(j,fe){const se=u=m(j),ce=l.value,_e=j.state,Me=j.force,Ye=j.replace===!0,De=S(se);if(De)return C(ui(y(De),{state:_e,force:Me,replace:Ye}),fe||se);const D=se;D.redirectedFrom=fe;let z;return!Me&&ole(n,ce,se)&&(z=bv(16,{to:D,from:ce}),U(ce,ce,!0,!1)),(z?Promise.resolve(z):T(D,ce)).catch(V=>rd(V)?V:L(V,D,ce)).then(V=>{if(V){if(rd(V,2))return C(ui(y(V.to),{state:_e,force:Me,replace:Ye}),fe||D)}else V=k(D,ce,!0,Ye,_e);return E(D,ce,V),V})}function _(j,fe){const se=b(j,fe);return se?Promise.reject(se):Promise.resolve()}function T(j,fe){let se;const[ce,_e,Me]=nue(j,fe);se=nT(ce.reverse(),"beforeRouteLeave",j,fe);for(const De of ce)De.leaveGuards.forEach(D=>{se.push(Sc(D,j,fe))});const Ye=_.bind(null,j,fe);return se.push(Ye),xv(se).then(()=>{se=[];for(const De of a.list())se.push(Sc(De,j,fe));return se.push(Ye),xv(se)}).then(()=>{se=nT(_e,"beforeRouteUpdate",j,fe);for(const De of _e)De.updateGuards.forEach(D=>{se.push(Sc(D,j,fe))});return se.push(Ye),xv(se)}).then(()=>{se=[];for(const De of j.matched)if(De.beforeEnter&&!fe.matched.includes(De))if(Array.isArray(De.beforeEnter))for(const D of De.beforeEnter)se.push(Sc(D,j,fe));else se.push(Sc(De.beforeEnter,j,fe));return se.push(Ye),xv(se)}).then(()=>(j.matched.forEach(De=>De.enterCallbacks={}),se=nT(Me,"beforeRouteEnter",j,fe),se.push(Ye),xv(se))).then(()=>{se=[];for(const De of o.list())se.push(Sc(De,j,fe));return se.push(Ye),xv(se)}).catch(De=>rd(De,8)?De:Promise.reject(De))}function E(j,fe,se){for(const ce of s.list())ce(j,fe,se)}function k(j,fe,se,ce,_e){const Me=b(j,fe);if(Me)return Me;const Ye=fe===wc,De=mv?history.state:{};se&&(ce||Ye?i.replace(j.fullPath,ui({scroll:Ye&&De&&De.scroll},_e)):i.push(j.fullPath,_e)),l.value=j,U(j,fe,se,Ye),B()}let I;function P(){I=i.listen((j,fe,se)=>{const ce=m(j),_e=S(ce);if(_e){C(ui(_e,{replace:!0}),ce).catch(um);return}u=ce;const Me=l.value;mv&&vle(aB(Me.fullPath,se.delta),Fx()),T(ce,Me).catch(Ye=>rd(Ye,4|8)?Ye:rd(Ye,2)?(C(Ye.to,ce).then(De=>{rd(De,4|16)&&!se.delta&&se.type===cm.pop&&i.go(-1,!1)}).catch(um),Promise.reject()):(se.delta&&i.go(-se.delta,!1),L(Ye,ce,Me))).then(Ye=>{Ye=Ye||k(ce,Me,!1),Ye&&(se.delta?i.go(-se.delta,!1):se.type===cm.pop&&rd(Ye,4|16)&&i.go(-1,!1)),E(ce,Me,Ye)}).catch(um)})}let F=dm(),$=dm(),R;function L(j,fe,se){B(j);const ce=$.list();return ce.length?ce.forEach(_e=>_e(j,fe,se)):console.error(j),Promise.reject(j)}function O(){return R&&l.value!==wc?Promise.resolve():new Promise((j,fe)=>{F.add([j,fe])})}function B(j){R||(R=!0,P(),F.list().forEach(([fe,se])=>j?se(j):fe()),F.reset())}function U(j,fe,se,ce){const{scrollBehavior:_e}=r;if(!mv||!_e)return Promise.resolve();const Me=!se&&ple(aB(j.fullPath,0))||(ce||!se)&&history.state&&history.state.scroll||null;return oa().then(()=>_e(j,fe,Me)).then(Ye=>Ye&&hle(Ye)).catch(Ye=>L(Ye,j,fe))}const W=j=>i.go(j);let X;const ie=new Set;return{currentRoute:l,addRoute:h,removeRoute:v,hasRoute:g,getRoutes:p,resolve:m,options:r,push:x,replace:w,go:W,back:()=>W(-1),forward:()=>W(1),beforeEach:a.add,beforeResolve:o.add,afterEach:s.add,onError:$.add,isReady:O,install(j){const fe=this;j.component("RouterLink",Qle),j.component("RouterView",rue),j.config.globalProperties.$router=fe,Object.defineProperty(j.config.globalProperties,"$route",{enumerable:!0,get:()=>va(l)}),mv&&!X&&l.value===wc&&(X=!0,x(i.location).catch(_e=>{}));const se={};for(const _e in wc)se[_e]=Q(()=>l.value[_e]);j.provide(Lx,fe),j.provide(tB,vc(se)),j.provide(Z_,l);const ce=j.unmount;ie.add(j),j.unmount=function(){ie.delete(j),ie.size<1&&(u=wc,I&&I(),l.value=wc,X=!1,R=!1),ce()}}}}function xv(r){return r.reduce((t,e)=>t.then(()=>e()),Promise.resolve())}function nue(r,t){const e=[],n=[],i=[],a=Math.max(t.matched.length,r.matched.length);for(let o=0;o<a;o++){const s=t.matched[o];s&&(r.matched.find(u=>yv(u,s))?n.push(s):e.push(s));const l=r.matched[o];l&&(t.matched.find(u=>yv(u,l))||i.push(l))}return[e,n,i]}function ydt(){return nr(Lx)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var iT=function(r,t){return iT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},iT(r,t)};function Ie(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");iT(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var A=function(){return A=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},A.apply(this,arguments)};function Ur(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e}function iue(r,t,e,n){var i=arguments.length,a=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,t,e,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(a=(i<3?o(a):i>3?o(t,e,a):o(t,e))||a);return i>3&&a&&Object.defineProperty(t,e,a),a}function aue(r,t){return function(e,n){t(e,n,r)}}function oue(r,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,t)}function Al(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(r,t||[])).next())})}function kl(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){e.label=u[1];break}if(u[0]===6&&e.label<a[1]){e.label=a[1],a=u;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(u);break}a[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(r,e)}catch(c){u=[6,c],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var aT=Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]};function sue(r,t){for(var e in r)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&aT(t,r,e)}function oT(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function EB(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a}function lue(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(EB(arguments[t]));return r}function Yn(){for(var r=0,t=0,e=arguments.length;t<e;t++)r+=arguments[t].length;for(var n=Array(r),i=0,t=0;t<e;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function oi(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return r.concat(a||Array.prototype.slice.call(t))}function hm(r){return this instanceof hm?(this.v=r,this):new hm(r)}function uue(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(r,t||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){n[d]&&(i[d]=function(h){return new Promise(function(v,p){a.push([d,h,v,p])>1||s(d,h)})})}function s(d,h){try{l(n[d](h))}catch(v){f(a[0][3],v)}}function l(d){d.value instanceof hm?Promise.resolve(d.value.v).then(u,c):f(a[0][2],d)}function u(d){s("next",d)}function c(d){s("throw",d)}function f(d,h){d(h),a.shift(),a.length&&s(a[0][0],a[0][1])}}function cue(r){var t,e;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,a){t[i]=r[i]?function(o){return(e=!e)?{value:hm(r[i](o)),done:i==="return"}:a?a(o):o}:a}}function fue(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=r[Symbol.asyncIterator],e;return t?t.call(r):(r=typeof oT=="function"?oT(r):r[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(a){e[a]=r[a]&&function(o){return new Promise(function(s,l){o=r[a](o),i(s,l,o.done,o.value)})}}function i(a,o,s,l){Promise.resolve(l).then(function(u){a({value:u,done:s})},o)}}function due(r,t){return Object.defineProperty?Object.defineProperty(r,"raw",{value:t}):r.raw=t,r}var hue=Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t};function vue(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&aT(t,r,e);return hue(t,r),t}function pue(r){return r&&r.__esModule?r:{default:r}}function gue(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)}function mue(r,t,e,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!i:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,e):i?i.value=e:t.set(r,e),e}var Bx=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",__extends:Ie,get __assign(){return A},__rest:Ur,__decorate:iue,__param:aue,__metadata:oue,__awaiter:Al,__generator:kl,__createBinding:aT,__exportStar:sue,__values:oT,__read:EB,__spread:lue,__spreadArrays:Yn,__spreadArray:oi,__await:hm,__asyncGenerator:uue,__asyncDelegator:cue,__asyncValues:fue,__makeTemplateObject:due,__importStar:vue,__importDefault:pue,__classPrivateFieldGet:gue,__classPrivateFieldSet:mue}),Fo=function(r){return r!==null&&typeof r!="function"&&isFinite(r.length)},Ml=function(r,t){return Fo(r)?r.indexOf(t)>-1:!1},ya=function(r,t){if(!Fo(r))return r;for(var e=[],n=0;n<r.length;n++){var i=r[n];t(i,n)&&e.push(i)}return e},_B=function(r,t){return t===void 0&&(t=[]),ya(r,function(e){return!Ml(t,e)})},yue={}.toString,Is=function(r,t){return yue.call(r)==="[object "+t+"]"},Kt=function(r){return Is(r,"Function")},nt=function(r){return r==null},Qe=function(r){return Array.isArray?Array.isArray(r):Is(r,"Array")},an=function(r){var t=typeof r;return r!==null&&t==="object"||t==="function"};function G(r,t){if(!!r){var e;if(Qe(r))for(var n=0,i=r.length;n<i&&(e=t(r[n],n),e!==!1);n++);else if(an(r)){for(var a in r)if(r.hasOwnProperty(a)&&(e=t(r[a],a),e===!1))break}}}var nd=Object.keys?function(r){return Object.keys(r)}:function(r){var t=[];return G(r,function(e,n){Kt(r)&&n==="prototype"||t.push(n)}),t};function sT(r,t){var e=nd(t),n=e.length;if(nt(r))return!n;for(var i=0;i<n;i+=1){var a=e[i];if(t[a]!==r[a]||!(a in r))return!1}return!0}var $x=function(r){return typeof r=="object"&&r!==null},Ni=function(r){if(!$x(r)||!Is(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var t=r;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(r)===t};function Ps(r,t){if(!Qe(r))return null;var e;if(Kt(t)&&(e=t),Ni(t)&&(e=function(i){return sT(i,t)}),e){for(var n=0;n<r.length;n+=1)if(e(r[n]))return r[n]}return null}function lT(r,t,e){e===void 0&&(e=0);for(var n=e;n<r.length;n++)if(t(r[n],n))return n;return-1}var TB=function(r,t){for(var e=null,n=0;n<r.length;n++){var i=r[n],a=i[t];if(!nt(a)){Qe(a)?e=a[0]:e=a;break}}return e},No=function(r){if(!Qe(r))return[];for(var t=[],e=0;e<r.length;e++)t=t.concat(r[e]);return t},AB=function(r,t){if(t===void 0&&(t=[]),!Qe(r))t.push(r);else for(var e=0;e<r.length;e+=1)AB(r[e],t);return t},Xi=function(r){if(!!Qe(r))return r.reduce(function(t,e){return Math.max(t,e)},r[0])},sa=function(r){if(!!Qe(r))return r.reduce(function(t,e){return Math.min(t,e)},r[0])},uT=function(r){var t=r.filter(function(o){return!isNaN(o)});if(!t.length)return{min:0,max:0};if(Qe(r[0])){for(var e=[],n=0;n<r.length;n++)e=e.concat(r[n]);t=e}var i=Xi(t),a=sa(t);return{min:a,max:i}},kB=Array.prototype,bue=kB.splice,xue=kB.indexOf,wue=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var n=0;n<t.length;n++)for(var i=t[n],a=-1;(a=xue.call(r,i))>-1;)bue.call(r,a,1);return r},Sue=Array.prototype.splice,MB=function(t,e){if(!Fo(t))return[];for(var n=t?e.length:0,i=n-1;n--;){var a=void 0,o=e[n];(n===i||o!==a)&&(a=o,Sue.call(t,o,1))}return t},Ya=function(r,t,e){if(!Qe(r)&&!Ni(r))return r;var n=e;return G(r,function(i,a){n=t(n,i,a)}),n},IB=function(r,t){var e=[];if(!Fo(r))return e;for(var n=-1,i=[],a=r.length;++n<a;){var o=r[n];t(o,n,r)&&(e.push(o),i.push(n))}return MB(r,i),e},ot=function(r){return Is(r,"String")};function PB(r,t){var e;if(Kt(t))e=function(i,a){return t(i)-t(a)};else{var n=[];ot(t)?n.push(t):Qe(t)&&(n=t),e=function(i,a){for(var o=0;o<n.length;o+=1){var s=n[o];if(i[s]>a[s])return 1;if(i[s]<a[s])return-1}return 0}}return r.sort(e),r}function Cc(r,t){t===void 0&&(t=new Map);var e=[];if(Array.isArray(r))for(var n=0,i=r.length;n<i;n++){var a=r[n];t.has(a)||(e.push(a),t.set(a,!0))}return e}var Cue=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return Cc([].concat.apply([],r))},Ds=function(r,t){for(var e=[],n={},i=0;i<r.length;i++){var a=r[i],o=a[t];if(!nt(o)){Qe(o)||(o=[o]);for(var s=0;s<o.length;s++){var l=o[s];n[l]||(e.push(l),n[l]=!0)}}}return e};function Eo(r){if(Fo(r))return r[0]}function qi(r){if(Fo(r)){var t=r;return t[t.length-1]}}function Eue(r,t){return Qe(r)||ot(r)?r[0]===t:!1}function _ue(r,t){return Qe(r)||ot(r)?r[r.length-1]===t:!1}var zx=function(r,t){for(var e=0;e<r.length;e++)if(!t(r[e],e))return!1;return!0},vm=function(r,t){for(var e=0;e<r.length;e++)if(t(r[e],e))return!0;return!1},Tue=Object.prototype.hasOwnProperty;function uo(r,t){if(!t||!Qe(r))return{};for(var e={},n=Kt(t)?t:function(s){return s[t]},i,a=0;a<r.length;a++){var o=r[a];i=n(o),Tue.call(e,i)?e[i].push(o):e[i]=[o]}return e}function cT(r,t){if(!t)return{0:r};if(!Kt(t)){var e=Qe(t)?t:t.replace(/\s+/g,"").split("*");t=function(n){for(var i="_",a=0,o=e.length;a<o;a++)i+=n[e[a]]&&n[e[a]].toString();return i}}return uo(r,t)}var DB=function(r,t){if(!t)return[r];var e=cT(r,t),n=[];for(var i in e)n.push(e[i]);return n};function Aue(r,t){return r["_wrap_"+t]}function wv(r,t){if(r["_wrap_"+t])return r["_wrap_"+t];var e=function(n){r[t](n)};return r["_wrap_"+t]=e,e}var RB={};function kue(r){var t=RB[r];if(!t){for(var e=r.toString(16),n=e.length;n<6;n++)e="0"+e;t="#"+e,RB[r]=t}return t}function Mue(r){var t=0,e=0,n=0,i=0;return Qe(r)?r.length===1?t=e=n=i=r[0]:r.length===2?(t=n=r[0],e=i=r[1]):r.length===3?(t=r[0],e=i=r[1],n=r[2]):(t=r[0],e=r[1],n=r[2],i=r[3]):t=e=n=i=r,{r1:t,r2:e,r3:n,r4:i}}var ei=function(r,t,e){return r<t?t:r>e?e:r},Gx=function(r,t){var e=t.toString(),n=e.indexOf(".");if(n===-1)return Math.round(r);var i=e.substr(n+1).length;return i>20&&(i=20),parseFloat(r.toFixed(i))},zt=function(r){return Is(r,"Number")},Iue=function(r){return zt(r)&&r%1!=0},Pue=function(r){return zt(r)&&r%2==0},Due=Number.isInteger?Number.isInteger:function(r){return zt(r)&&r%1==0},Rue=function(r){return zt(r)&&r<0},Oue=1e-5;function ba(r,t,e){return e===void 0&&(e=Oue),Math.abs(r-t)<e}var Lue=function(r){return zt(r)&&r%2!=0},Fue=function(r){return zt(r)&&r>0},fT=function(r,t){if(!!Qe(r)){for(var e,n=-1/0,i=0;i<r.length;i++){var a=r[i],o=Kt(t)?t(a):a[t];o>n&&(e=a,n=o)}return e}},OB=function(r,t){if(!!Qe(r)){for(var e,n=1/0,i=0;i<r.length;i++){var a=r[i],o=Kt(t)?t(a):a[t];o<n&&(e=a,n=o)}return e}},Ux=function(r,t){return(r%t+t)%t},Nue=180/Math.PI,Bue=function(r){return Nue*r},$ue=parseInt,zue=Math.PI/180,Vx=function(r){return zue*r},Il=function(r,t){return r.hasOwnProperty(t)},Sv=Object.values?function(r){return Object.values(r)}:function(r){var t=[];return G(r,function(e,n){Kt(r)&&n==="prototype"||t.push(e)}),t},Gue=function(r,t){return Ml(Sv(r),t)},Ec=function(r){return nt(r)?"":r.toString()},id=function(r){return Ec(r).toLowerCase()},Uue=function(r){var t=Ec(r);return t.charAt(0).toLowerCase()+t.substring(1)};function dT(r,t){return!r||!t?r:r.replace(/\\?\{([^{}]+)\}/g,function(e,n){return e.charAt(0)==="\\"?e.slice(1):t[n]===void 0?"":t[n]})}var Vue=function(r){return Ec(r).toUpperCase()},ls=function(r){var t=Ec(r);return t.charAt(0).toUpperCase()+t.substring(1)},Hue={}.toString,LB=function(r){return Hue.call(r).replace(/^\[object /,"").replace(/]$/,"")},Wue=function(r){return Is(r,"Arguments")},bu=function(r){return Is(r,"Boolean")},hT=function(r){return Is(r,"Date")},jue=function(r){return Is(r,"Error")};function Yue(r){return zt(r)&&isFinite(r)}var FB=function(r){return r===null},Xue=Object.prototype,NB=function(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||Xue;return r===e},que=function(r){return Is(r,"RegExp")},_c=function(r){return r===void 0},vT=function(r){return r instanceof Element||r instanceof HTMLDocument};function BB(r){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)};return t(r)}function $B(r){var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;t(r)}function pT(r,t){for(var e in t)t.hasOwnProperty(e)&&e!=="constructor"&&t[e]!==void 0&&(r[e]=t[e])}function jt(r,t,e,n){return t&&pT(r,t),e&&pT(r,e),n&&pT(r,n),r}var Kue=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var e=r[0],n=1;n<r.length;n++){var i=r[n];Kt(i)&&(i=i.prototype),jt(e.prototype,i)}},Or=function(r){if(typeof r!="object"||r===null)return r;var t;if(Qe(r)){t=[];for(var e=0,n=r.length;e<n;e++)typeof r[e]=="object"&&r[e]!=null?t[e]=Or(r[e]):t[e]=r[e]}else{t={};for(var i in r)typeof r[i]=="object"&&r[i]!=null?t[i]=Or(r[i]):t[i]=r[i]}return t};function pm(r,t,e){var n;return function(){var i=this,a=arguments,o=function(){n=null,e||r.apply(i,a)},s=e&&!n;clearTimeout(n),n=setTimeout(o,t),s&&r.apply(i,a)}}var ad=function(r,t){if(!Kt(r))throw new TypeError("Expected a function");var e=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=t?t.apply(this,n):n[0],o=e.cache;if(o.has(a))return o.get(a);var s=r.apply(this,n);return o.set(a,s),s};return e.cache=new Map,e},Zue=5;function zB(r,t,e,n){e=e||0,n=n||Zue;for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];a!==null&&Ni(a)?(Ni(r[i])||(r[i]={}),e<n?zB(r[i],a,e+1,n):r[i]=t[i]):Qe(a)?(r[i]=[],r[i]=r[i].concat(a)):a!==void 0&&(r[i]=a)}}var Dt=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var n=0;n<t.length;n+=1)zB(r,t[n]);return r},Que=function(r,t,e,n){Kt(t)||(e=t,t=r,r=function(){});var i=Object.create?function(o,s){return Object.create(o,{constructor:{value:s}})}:function(o,s){function l(){}l.prototype=o;var u=new l;return u.constructor=s,u},a=i(t.prototype,r);return r.prototype=jt(a,r.prototype),r.superclass=i(t.prototype,t),jt(a,e),jt(r,n),r},gT=function(r,t){if(!Fo(r))return-1;var e=Array.prototype.indexOf;if(e)return e.call(r,t);for(var n=-1,i=0;i<r.length;i++)if(r[i]===t){n=i;break}return n},Jue=Object.prototype.hasOwnProperty;function co(r){if(nt(r))return!0;if(Fo(r))return!r.length;var t=LB(r);if(t==="Map"||t==="Set")return!r.size;if(NB(r))return!Object.keys(r).length;for(var e in r)if(Jue.call(r,e))return!1;return!0}var ci=function(r,t){if(r===t)return!0;if(!r||!t||ot(r)||ot(t))return!1;if(Fo(r)||Fo(t)){if(r.length!==t.length)return!1;for(var e=!0,n=0;n<r.length&&(e=ci(r[n],t[n]),!!e);n++);return e}if($x(r)||$x(t)){var i=Object.keys(r),a=Object.keys(t);if(i.length!==a.length)return!1;for(var e=!0,n=0;n<i.length&&(e=ci(r[i[n]],t[i[n]]),!!e);n++);return e}return!1},ece=function(r,t,e){return Kt(e)?!!e(r,t):ci(r,t)},Kn=function(r,t){if(!Fo(r))return r;for(var e=[],n=0;n<r.length;n++){var i=r[n];e.push(t(i,n))}return e},tce=function(r){return r},GB=function(r,t){t===void 0&&(t=tce);var e={};return an(r)&&!nt(r)&&Object.keys(r).forEach(function(n){e[n]=t(r[n],n)}),e},ae=function(r,t,e){for(var n=0,i=ot(t)?t.split("."):t;r&&n<i.length;)r=r[i[n++]];return r===void 0||n<i.length?e:r},Ki=function(r,t,e){var n=r,i=ot(t)?t.split("."):t;return i.forEach(function(a,o){o<i.length-1?(an(n[a])||(n[a]=zt(i[o+1])?[]:{}),n=n[a]):n[a]=e}),r},rce=Object.prototype.hasOwnProperty,Hx=function(r,t){if(r===null||!Ni(r))return{};var e={};return G(t,function(n){rce.call(r,n)&&(e[n]=r[n])}),e},Wx=function(r,t){return Ya(r,function(e,n,i){return t.includes(i)||(e[i]=n),e},{})},Cv=function(r,t,e){var n,i,a,o,s=0;e||(e={});var l=function(){s=e.leading===!1?0:Date.now(),n=null,o=r.apply(i,a),n||(i=a=null)},u=function(){var c=Date.now();!s&&e.leading===!1&&(s=c);var f=t-(c-s);return i=this,a=arguments,f<=0||f>t?(n&&(clearTimeout(n),n=null),s=c,o=r.apply(i,a),n||(i=a=null)):!n&&e.trailing!==!1&&(n=setTimeout(l,f)),o};return u.cancel=function(){clearTimeout(n),s=0,n=i=a=null},u},UB=function(r){return Fo(r)?Array.prototype.slice.call(r):[]},jx={},Rs=function(r){return r=r||"g",jx[r]?jx[r]+=1:jx[r]=1,r+jx[r]},us=function(){},nce=function(r){return r};function la(r){return nt(r)?0:Fo(r)?r.length:Object.keys(r).length}var Yx,gm=ad(function(r,t){t===void 0&&(t={});var e=t.fontSize,n=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant;return Yx||(Yx=document.createElement("canvas").getContext("2d")),Yx.font=[a,o,i,e+"px",n].join(" "),Yx.measureText(ot(r)?r:"").width},function(r,t){return t===void 0&&(t={}),Yn([r],Sv(t)).join("")}),VB=function(r,t,e,n){n===void 0&&(n="...");var i=16,a=gm(n,e),o=ot(r)?r:Ec(r),s=t,l=[],u,c;if(gm(r,e)<=t)return r;for(;u=o.substr(0,i),c=gm(u,e),!(c+a>s&&c>s);)if(l.push(u),s-=c,o=o.substr(i),!o)return l.join("");for(;u=o.substr(0,1),c=gm(u,e),!(c+a>s);)if(l.push(u),s-=c,o=o.substr(1),!o)return l.join("");return""+l.join("")+n},HB=function(){function r(){this.map={}}return r.prototype.has=function(t){return this.map[t]!==void 0},r.prototype.get=function(t,e){var n=this.map[t];return n===void 0?e:n},r.prototype.set=function(t,e){this.map[t]=e},r.prototype.clear=function(){this.map={}},r.prototype.delete=function(t){delete this.map[t]},r.prototype.size=function(){return Object.keys(this.map).length},r}(),mm=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",contains:Ml,includes:Ml,difference:_B,find:Ps,findIndex:lT,firstValue:TB,flatten:No,flattenDeep:AB,getRange:uT,pull:wue,pullAt:MB,reduce:Ya,remove:IB,sortBy:PB,union:Cue,uniq:Cc,valuesOfKey:Ds,head:Eo,last:qi,startsWith:Eue,endsWith:_ue,filter:ya,every:zx,some:vm,group:DB,groupBy:uo,groupToMap:cT,getWrapBehavior:Aue,wrapBehavior:wv,number2color:kue,parseRadius:Mue,clamp:ei,fixedBase:Gx,isDecimal:Iue,isEven:Pue,isInteger:Due,isNegative:Rue,isNumberEqual:ba,isOdd:Lue,isPositive:Fue,max:Xi,maxBy:fT,min:sa,minBy:OB,mod:Ux,toDegree:Bue,toInteger:$ue,toRadian:Vx,forIn:G,has:Il,hasKey:Il,hasValue:Gue,keys:nd,isMatch:sT,values:Sv,lowerCase:id,lowerFirst:Uue,substitute:dT,upperCase:Vue,upperFirst:ls,getType:LB,isArguments:Wue,isArray:Qe,isArrayLike:Fo,isBoolean:bu,isDate:hT,isError:jue,isFunction:Kt,isFinite:Yue,isNil:nt,isNull:FB,isNumber:zt,isObject:an,isObjectLike:$x,isPlainObject:Ni,isPrototype:NB,isRegExp:que,isString:ot,isType:Is,isUndefined:_c,isElement:vT,requestAnimationFrame:BB,clearAnimationFrame:$B,augment:Kue,clone:Or,debounce:pm,memoize:ad,deepMix:Dt,each:G,extend:Que,indexOf:gT,isEmpty:co,isEqual:ci,isEqualWith:ece,map:Kn,mapValues:GB,mix:jt,assign:jt,get:ae,set:Ki,pick:Hx,omit:Wx,throttle:Cv,toArray:UB,toString:Ec,uniqueId:Rs,noop:us,identity:nce,size:la,measureTextWidth:gm,getEllipsisText:VB,Cache:HB}),ice={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(t){return Object.assign(this,t),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(t){var e=this,n=this.events;this.graph=t,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&t.get("canvas").set("draggable",!0),G(n,function(i,a){t.on(a,i)}),document.addEventListener("visibilitychange",function(){e.keydown=!1})},unbind:function(t){var e=this.events,n=t.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&t.get("canvas").set("draggable",!1),G(e,function(i,a){t.off(a,i)}),t.get("canvas").set("draggable",n)},get:function(t){return this[t]},set:function(t,e){return this[t]=e,this}},WB=function(){function r(){}return r.registerBehavior=function(t,e){if(!e)throw new Error("please specify handler for this behavior: "+t);var n=Or(ice);Object.assign(n,e);var i=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var l=this.getEvents();this.events=null;var u={};l&&(G(l,function(c,f){u[f]=wv(s,c)}),this.events=u)};i.prototype=n,r.types[t]=i},r.hasBehavior=function(t){return!!r.types[t]},r.getBehavior=function(t){return r.types[t]},r.types={},r}(),ace="*",ym=function(){function r(){this._events={}}return r.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},r.prototype.once=function(t,e){return this.on(t,e,!0),this},r.prototype.emit=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=this._events[t]||[],o=this._events[ace]||[],s=function(l){for(var u=l.length,c=0;c<u;c++)if(!!l[c]){var f=l[c],d=f.callback,h=f.once;h&&(l.splice(c,1),l.length===0&&delete e._events[t],u--,c--),d.apply(e,n)}};s(a),s(o)},r.prototype.off=function(t,e){if(!t)this._events={};else if(!e)delete this._events[t];else{for(var n=this._events[t]||[],i=n.length,a=0;a<i;a++)n[a].callback===e&&(n.splice(a,1),i--,a--);n.length===0&&delete this._events[t]}return this},r.prototype.getEvents=function(){return this._events},r}(),cs=1e-6,xa=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=0,t=arguments.length;t--;)r+=arguments[t]*arguments[t];return Math.sqrt(r)});function Ev(){var r=new xa(9);return xa!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function jB(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[4],r[4]=t[5],r[5]=t[6],r[6]=t[8],r[7]=t[9],r[8]=t[10],r}function oce(r){var t=new xa(9);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function sce(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r}function lce(r,t,e,n,i,a,o,s,l){var u=new xa(9);return u[0]=r,u[1]=t,u[2]=e,u[3]=n,u[4]=i,u[5]=a,u[6]=o,u[7]=s,u[8]=l,u}function uce(r,t,e,n,i,a,o,s,l,u){return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r[4]=a,r[5]=o,r[6]=s,r[7]=l,r[8]=u,r}function cce(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function fce(r,t){if(r===t){var e=t[1],n=t[2],i=t[5];r[1]=t[3],r[2]=t[6],r[3]=e,r[5]=t[7],r[6]=n,r[7]=i}else r[0]=t[0],r[1]=t[3],r[2]=t[6],r[3]=t[1],r[4]=t[4],r[5]=t[7],r[6]=t[2],r[7]=t[5],r[8]=t[8];return r}function Xx(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=c*o-s*u,d=-c*a+s*l,h=u*a-o*l,v=e*f+n*d+i*h;return v?(v=1/v,r[0]=f*v,r[1]=(-c*n+i*u)*v,r[2]=(s*n-i*o)*v,r[3]=d*v,r[4]=(c*e-i*l)*v,r[5]=(-s*e+i*a)*v,r[6]=h*v,r[7]=(-u*e+n*l)*v,r[8]=(o*e-n*a)*v,r):null}function dce(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return r[0]=o*c-s*u,r[1]=i*u-n*c,r[2]=n*s-i*o,r[3]=s*l-a*c,r[4]=e*c-i*l,r[5]=i*a-e*s,r[6]=a*u-o*l,r[7]=n*l-e*u,r[8]=e*o-n*a,r}function hce(r){var t=r[0],e=r[1],n=r[2],i=r[3],a=r[4],o=r[5],s=r[6],l=r[7],u=r[8];return t*(u*a-o*l)+e*(-u*i+o*s)+n*(l*i-a*s)}function _v(r,t,e){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=e[0],h=e[1],v=e[2],p=e[3],g=e[4],m=e[5],y=e[6],b=e[7],x=e[8];return r[0]=d*n+h*o+v*u,r[1]=d*i+h*s+v*c,r[2]=d*a+h*l+v*f,r[3]=p*n+g*o+m*u,r[4]=p*i+g*s+m*c,r[5]=p*a+g*l+m*f,r[6]=y*n+b*o+x*u,r[7]=y*i+b*s+x*c,r[8]=y*a+b*l+x*f,r}function vce(r,t,e){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=e[0],h=e[1];return r[0]=n,r[1]=i,r[2]=a,r[3]=o,r[4]=s,r[5]=l,r[6]=d*n+h*o+u,r[7]=d*i+h*s+c,r[8]=d*a+h*l+f,r}function pce(r,t,e){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=Math.sin(e),h=Math.cos(e);return r[0]=h*n+d*o,r[1]=h*i+d*s,r[2]=h*a+d*l,r[3]=h*o-d*n,r[4]=h*s-d*i,r[5]=h*l-d*a,r[6]=u,r[7]=c,r[8]=f,r}function gce(r,t,e){var n=e[0],i=e[1];return r[0]=n*t[0],r[1]=n*t[1],r[2]=n*t[2],r[3]=i*t[3],r[4]=i*t[4],r[5]=i*t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r}function YB(r,t){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=t[0],r[7]=t[1],r[8]=1,r}function XB(r,t){var e=Math.sin(t),n=Math.cos(t);return r[0]=n,r[1]=e,r[2]=0,r[3]=-e,r[4]=n,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function qB(r,t){return r[0]=t[0],r[1]=0,r[2]=0,r[3]=0,r[4]=t[1],r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function mce(r,t){return r[0]=t[0],r[1]=t[1],r[2]=0,r[3]=t[2],r[4]=t[3],r[5]=0,r[6]=t[4],r[7]=t[5],r[8]=1,r}function yce(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=e+e,s=n+n,l=i+i,u=e*o,c=n*o,f=n*s,d=i*o,h=i*s,v=i*l,p=a*o,g=a*s,m=a*l;return r[0]=1-f-v,r[3]=c-m,r[6]=d+g,r[1]=c+m,r[4]=1-u-v,r[7]=h-p,r[2]=d-g,r[5]=h+p,r[8]=1-u-f,r}function KB(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],v=t[12],p=t[13],g=t[14],m=t[15],y=e*s-n*o,b=e*l-i*o,x=e*u-a*o,w=n*l-i*s,S=n*u-a*s,C=i*u-a*l,_=c*p-f*v,T=c*g-d*v,E=c*m-h*v,k=f*g-d*p,I=f*m-h*p,P=d*m-h*g,F=y*P-b*I+x*k+w*E-S*T+C*_;return F?(F=1/F,r[0]=(s*P-l*I+u*k)*F,r[1]=(l*E-o*P-u*T)*F,r[2]=(o*I-s*E+u*_)*F,r[3]=(i*I-n*P-a*k)*F,r[4]=(e*P-i*E+a*T)*F,r[5]=(n*E-e*I-a*_)*F,r[6]=(p*C-g*S+m*w)*F,r[7]=(g*x-v*C-m*b)*F,r[8]=(v*S-p*x+m*y)*F,r):null}function bce(r,t,e){return r[0]=2/t,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/e,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}function xce(r){return"mat3("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+")"}function wce(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])}function Sce(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r[2]=t[2]+e[2],r[3]=t[3]+e[3],r[4]=t[4]+e[4],r[5]=t[5]+e[5],r[6]=t[6]+e[6],r[7]=t[7]+e[7],r[8]=t[8]+e[8],r}function ZB(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],r[3]=t[3]-e[3],r[4]=t[4]-e[4],r[5]=t[5]-e[5],r[6]=t[6]-e[6],r[7]=t[7]-e[7],r[8]=t[8]-e[8],r}function Cce(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r[3]=t[3]*e,r[4]=t[4]*e,r[5]=t[5]*e,r[6]=t[6]*e,r[7]=t[7]*e,r[8]=t[8]*e,r}function Ece(r,t,e,n){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r[2]=t[2]+e[2]*n,r[3]=t[3]+e[3]*n,r[4]=t[4]+e[4]*n,r[5]=t[5]+e[5]*n,r[6]=t[6]+e[6]*n,r[7]=t[7]+e[7]*n,r[8]=t[8]+e[8]*n,r}function _ce(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]&&r[3]===t[3]&&r[4]===t[4]&&r[5]===t[5]&&r[6]===t[6]&&r[7]===t[7]&&r[8]===t[8]}function Tce(r,t){var e=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],l=r[6],u=r[7],c=r[8],f=t[0],d=t[1],h=t[2],v=t[3],p=t[4],g=t[5],m=t[6],y=t[7],b=t[8];return Math.abs(e-f)<=cs*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(n-d)<=cs*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-h)<=cs*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-v)<=cs*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(o-p)<=cs*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-g)<=cs*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-m)<=cs*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(u-y)<=cs*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-b)<=cs*Math.max(1,Math.abs(c),Math.abs(b))}var Ace=_v,kce=ZB,Mce=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:Ev,fromMat4:jB,clone:oce,copy:sce,fromValues:lce,set:uce,identity:cce,transpose:fce,invert:Xx,adjoint:dce,determinant:hce,multiply:_v,translate:vce,rotate:pce,scale:gce,fromTranslation:YB,fromRotation:XB,fromScaling:qB,fromMat2d:mce,fromQuat:yce,normalFromMat4:KB,projection:bce,str:xce,frob:wce,add:Sce,subtract:ZB,multiplyScalar:Cce,multiplyScalarAndAdd:Ece,exactEquals:_ce,equals:Tce,mul:Ace,sub:kce});function Bo(){var r=new xa(16);return xa!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function Ice(r){var t=new xa(16);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function mT(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function QB(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function qx(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],v=t[12],p=t[13],g=t[14],m=t[15],y=e*s-n*o,b=e*l-i*o,x=e*u-a*o,w=n*l-i*s,S=n*u-a*s,C=i*u-a*l,_=c*p-f*v,T=c*g-d*v,E=c*m-h*v,k=f*g-d*p,I=f*m-h*p,P=d*m-h*g,F=y*P-b*I+x*k+w*E-S*T+C*_;return F?(F=1/F,r[0]=(s*P-l*I+u*k)*F,r[1]=(i*I-n*P-a*k)*F,r[2]=(p*C-g*S+m*w)*F,r[3]=(d*S-f*C-h*w)*F,r[4]=(l*E-o*P-u*T)*F,r[5]=(e*P-i*E+a*T)*F,r[6]=(g*x-v*C-m*b)*F,r[7]=(c*C-d*x+h*b)*F,r[8]=(o*I-s*E+u*_)*F,r[9]=(n*E-e*I-a*_)*F,r[10]=(v*S-p*x+m*y)*F,r[11]=(f*x-c*S-h*y)*F,r[12]=(s*T-o*k-l*_)*F,r[13]=(e*k-n*T+i*_)*F,r[14]=(p*b-v*w-g*y)*F,r[15]=(c*w-f*b+d*y)*F,r):null}function od(r,t,e){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],h=t[10],v=t[11],p=t[12],g=t[13],m=t[14],y=t[15],b=e[0],x=e[1],w=e[2],S=e[3];return r[0]=b*n+x*s+w*f+S*p,r[1]=b*i+x*l+w*d+S*g,r[2]=b*a+x*u+w*h+S*m,r[3]=b*o+x*c+w*v+S*y,b=e[4],x=e[5],w=e[6],S=e[7],r[4]=b*n+x*s+w*f+S*p,r[5]=b*i+x*l+w*d+S*g,r[6]=b*a+x*u+w*h+S*m,r[7]=b*o+x*c+w*v+S*y,b=e[8],x=e[9],w=e[10],S=e[11],r[8]=b*n+x*s+w*f+S*p,r[9]=b*i+x*l+w*d+S*g,r[10]=b*a+x*u+w*h+S*m,r[11]=b*o+x*c+w*v+S*y,b=e[12],x=e[13],w=e[14],S=e[15],r[12]=b*n+x*s+w*f+S*p,r[13]=b*i+x*l+w*d+S*g,r[14]=b*a+x*u+w*h+S*m,r[15]=b*o+x*c+w*v+S*y,r}function bm(r,t,e){var n=e[0],i=e[1],a=e[2],o,s,l,u,c,f,d,h,v,p,g,m;return t===r?(r[12]=t[0]*n+t[4]*i+t[8]*a+t[12],r[13]=t[1]*n+t[5]*i+t[9]*a+t[13],r[14]=t[2]*n+t[6]*i+t[10]*a+t[14],r[15]=t[3]*n+t[7]*i+t[11]*a+t[15]):(o=t[0],s=t[1],l=t[2],u=t[3],c=t[4],f=t[5],d=t[6],h=t[7],v=t[8],p=t[9],g=t[10],m=t[11],r[0]=o,r[1]=s,r[2]=l,r[3]=u,r[4]=c,r[5]=f,r[6]=d,r[7]=h,r[8]=v,r[9]=p,r[10]=g,r[11]=m,r[12]=o*n+c*i+v*a+t[12],r[13]=s*n+f*i+p*a+t[13],r[14]=l*n+d*i+g*a+t[14],r[15]=u*n+h*i+m*a+t[15]),r}function Pce(r,t,e){var n=Math.sin(e),i=Math.cos(e),a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11];return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[4]=a*i+u*n,r[5]=o*i+c*n,r[6]=s*i+f*n,r[7]=l*i+d*n,r[8]=u*i-a*n,r[9]=c*i-o*n,r[10]=f*i-s*n,r[11]=d*i-l*n,r}function Dce(r,t,e){var n=Math.sin(e),i=Math.cos(e),a=t[0],o=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],d=t[11];return t!==r&&(r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=a*i-u*n,r[1]=o*i-c*n,r[2]=s*i-f*n,r[3]=l*i-d*n,r[8]=a*n+u*i,r[9]=o*n+c*i,r[10]=s*n+f*i,r[11]=l*n+d*i,r}function xm(r,t){return r[0]=t[12],r[1]=t[13],r[2]=t[14],r}function Tv(r,t){var e=t[0],n=t[1],i=t[2],a=t[4],o=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return r[0]=Math.hypot(e,n,i),r[1]=Math.hypot(a,o,s),r[2]=Math.hypot(l,u,c),r}function wm(r,t){var e=new xa(3);Tv(e,t);var n=1/e[0],i=1/e[1],a=1/e[2],o=t[0]*n,s=t[1]*i,l=t[2]*a,u=t[4]*n,c=t[5]*i,f=t[6]*a,d=t[8]*n,h=t[9]*i,v=t[10]*a,p=o+c+v,g=0;return p>0?(g=Math.sqrt(p+1)*2,r[3]=.25*g,r[0]=(f-h)/g,r[1]=(d-l)/g,r[2]=(s-u)/g):o>c&&o>v?(g=Math.sqrt(1+o-c-v)*2,r[3]=(f-h)/g,r[0]=.25*g,r[1]=(s+u)/g,r[2]=(d+l)/g):c>v?(g=Math.sqrt(1+c-o-v)*2,r[3]=(d-l)/g,r[0]=(s+u)/g,r[1]=.25*g,r[2]=(f+h)/g):(g=Math.sqrt(1+v-o-c)*2,r[3]=(s-u)/g,r[0]=(d+l)/g,r[1]=(f+h)/g,r[2]=.25*g),r}function Rce(r,t,e,n){var i=t[0],a=t[1],o=t[2],s=t[3],l=i+i,u=a+a,c=o+o,f=i*l,d=i*u,h=i*c,v=a*u,p=a*c,g=o*c,m=s*l,y=s*u,b=s*c,x=n[0],w=n[1],S=n[2];return r[0]=(1-(v+g))*x,r[1]=(d+b)*x,r[2]=(h-y)*x,r[3]=0,r[4]=(d-b)*w,r[5]=(1-(f+g))*w,r[6]=(p+m)*w,r[7]=0,r[8]=(h+y)*S,r[9]=(p-m)*S,r[10]=(1-(f+v))*S,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function JB(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=e+e,s=n+n,l=i+i,u=e*o,c=n*o,f=n*s,d=i*o,h=i*s,v=i*l,p=a*o,g=a*s,m=a*l;return r[0]=1-f-v,r[1]=c+m,r[2]=d-g,r[3]=0,r[4]=c-m,r[5]=1-u-v,r[6]=h+p,r[7]=0,r[8]=d+g,r[9]=h-p,r[10]=1-u-f,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Oce(r,t,e,n,i){var a=1/Math.tan(t/2),o;return r[0]=a/e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0?(o=1/(n-i),r[10]=(i+n)*o,r[14]=2*i*n*o):(r[10]=-1,r[14]=-2*n),r}var Lce=Oce;function Fce(r,t,e,n,i,a,o){var s=1/(t-e),l=1/(n-i),u=1/(a-o);return r[0]=-2*s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*l,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*u,r[11]=0,r[12]=(t+e)*s,r[13]=(i+n)*l,r[14]=(o+a)*u,r[15]=1,r}var Nce=Fce;function Bce(r,t,e,n){var i,a,o,s,l,u,c,f,d,h,v=t[0],p=t[1],g=t[2],m=n[0],y=n[1],b=n[2],x=e[0],w=e[1],S=e[2];return Math.abs(v-x)<cs&&Math.abs(p-w)<cs&&Math.abs(g-S)<cs?QB(r):(c=v-x,f=p-w,d=g-S,h=1/Math.hypot(c,f,d),c*=h,f*=h,d*=h,i=y*d-b*f,a=b*c-m*d,o=m*f-y*c,h=Math.hypot(i,a,o),h?(h=1/h,i*=h,a*=h,o*=h):(i=0,a=0,o=0),s=f*o-d*a,l=d*i-c*o,u=c*a-f*i,h=Math.hypot(s,l,u),h?(h=1/h,s*=h,l*=h,u*=h):(s=0,l=0,u=0),r[0]=i,r[1]=s,r[2]=c,r[3]=0,r[4]=a,r[5]=l,r[6]=f,r[7]=0,r[8]=o,r[9]=u,r[10]=d,r[11]=0,r[12]=-(i*v+a*p+o*g),r[13]=-(s*v+l*p+u*g),r[14]=-(c*v+f*p+d*g),r[15]=1,r)}function Vn(){var r=new xa(3);return xa!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function xu(r){var t=new xa(3);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function Kx(r){var t=r[0],e=r[1],n=r[2];return Math.hypot(t,e,n)}function en(r,t,e){var n=new xa(3);return n[0]=r,n[1]=t,n[2]=e,n}function Xa(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r}function Av(r,t,e,n){return r[0]=t,r[1]=e,r[2]=n,r}function wu(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r[2]=t[2]+e[2],r}function yT(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],r}function $ce(r,t,e){return r[0]=t[0]*e[0],r[1]=t[1]*e[1],r[2]=t[2]*e[2],r}function Sm(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r}function zce(r,t){var e=t[0]-r[0],n=t[1]-r[1],i=t[2]-r[2];return Math.hypot(e,n,i)}function Cm(r,t){var e=t[0],n=t[1],i=t[2],a=e*e+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),r[0]=t[0]*a,r[1]=t[1]*a,r[2]=t[2]*a,r}function Zx(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]}function bT(r,t,e){var n=t[0],i=t[1],a=t[2],o=e[0],s=e[1],l=e[2];return r[0]=i*l-a*s,r[1]=a*o-n*l,r[2]=n*s-i*o,r}function sd(r,t,e,n){var i=t[0],a=t[1],o=t[2];return r[0]=i+n*(e[0]-i),r[1]=a+n*(e[1]-a),r[2]=o+n*(e[2]-o),r}function xT(r,t,e){var n=t[0],i=t[1],a=t[2],o=e[3]*n+e[7]*i+e[11]*a+e[15];return o=o||1,r[0]=(e[0]*n+e[4]*i+e[8]*a+e[12])/o,r[1]=(e[1]*n+e[5]*i+e[9]*a+e[13])/o,r[2]=(e[2]*n+e[6]*i+e[10]*a+e[14])/o,r}function Pl(r,t,e){var n=t[0],i=t[1],a=t[2];return r[0]=n*e[0]+i*e[3]+a*e[6],r[1]=n*e[1]+i*e[4]+a*e[7],r[2]=n*e[2]+i*e[5]+a*e[8],r}function Gce(r,t,e){var n=e[0],i=e[1],a=e[2],o=e[3],s=t[0],l=t[1],u=t[2],c=i*u-a*l,f=a*s-n*u,d=n*l-i*s,h=i*d-a*f,v=a*c-n*d,p=n*f-i*c,g=o*2;return c*=g,f*=g,d*=g,h*=2,v*=2,p*=2,r[0]=s+c+h,r[1]=l+f+v,r[2]=u+d+p,r}var wT=yT,e3=zce,t3=Kx;(function(){var r=Vn();return function(t,e,n,i,a,o){var s,l;for(e||(e=3),n||(n=0),i?l=Math.min(i*e+n,t.length):l=t.length,s=n;s<l;s+=e)r[0]=t[s],r[1]=t[s+1],r[2]=t[s+2],a(r,r,o),t[s]=r[0],t[s+1]=r[1],t[s+2]=r[2];return t}})();function Em(){var r=new xa(4);return xa!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function r3(r,t,e,n){var i=new xa(4);return i[0]=r,i[1]=t,i[2]=e,i[3]=n,i}function Uce(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r}function Vce(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=e*e+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),r[0]=e*o,r[1]=n*o,r[2]=i*o,r[3]=a*o,r}function _m(r,t,e){var n=t[0],i=t[1],a=t[2],o=t[3];return r[0]=e[0]*n+e[4]*i+e[8]*a+e[12]*o,r[1]=e[1]*n+e[5]*i+e[9]*a+e[13]*o,r[2]=e[2]*n+e[6]*i+e[10]*a+e[14]*o,r[3]=e[3]*n+e[7]*i+e[11]*a+e[15]*o,r}(function(){var r=Em();return function(t,e,n,i,a,o){var s,l;for(e||(e=4),n||(n=0),i?l=Math.min(i*e+n,t.length):l=t.length,s=n;s<l;s+=e)r[0]=t[s],r[1]=t[s+1],r[2]=t[s+2],r[3]=t[s+3],a(r,r,o),t[s]=r[0],t[s+1]=r[1],t[s+2]=r[2],t[s+3]=r[3];return t}})();function wa(){var r=new xa(4);return xa!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function ld(r,t,e){e=e*.5;var n=Math.sin(e);return r[0]=n*t[0],r[1]=n*t[1],r[2]=n*t[2],r[3]=Math.cos(e),r}function Os(r,t,e){var n=t[0],i=t[1],a=t[2],o=t[3],s=e[0],l=e[1],u=e[2],c=e[3];return r[0]=n*c+o*s+i*u-a*l,r[1]=i*c+o*l+a*s-n*u,r[2]=a*c+o*u+n*l-i*s,r[3]=o*c-n*s-i*l-a*u,r}function Qx(r,t,e,n){var i=t[0],a=t[1],o=t[2],s=t[3],l=e[0],u=e[1],c=e[2],f=e[3],d,h,v,p,g;return h=i*l+a*u+o*c+s*f,h<0&&(h=-h,l=-l,u=-u,c=-c,f=-f),1-h>cs?(d=Math.acos(h),v=Math.sin(d),p=Math.sin((1-n)*d)/v,g=Math.sin(n*d)/v):(p=1-n,g=n),r[0]=p*i+g*l,r[1]=p*a+g*u,r[2]=p*o+g*c,r[3]=p*s+g*f,r}function n3(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=e*e+n*n+i*i+a*a,s=o?1/o:0;return r[0]=-e*s,r[1]=-n*s,r[2]=-i*s,r[3]=a*s,r}function Hce(r,t){var e=t[0]+t[4]+t[8],n;if(e>0)n=Math.sqrt(e+1),r[3]=.5*n,n=.5/n,r[0]=(t[5]-t[7])*n,r[1]=(t[6]-t[2])*n,r[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;n=Math.sqrt(t[i*3+i]-t[a*3+a]-t[o*3+o]+1),r[i]=.5*n,n=.5/n,r[3]=(t[a*3+o]-t[o*3+a])*n,r[a]=(t[a*3+i]+t[i*3+a])*n,r[o]=(t[o*3+i]+t[i*3+o])*n}return r}function ST(r,t,e,n){var i=.5*Math.PI/180;t*=i,e*=i,n*=i;var a=Math.sin(t),o=Math.cos(t),s=Math.sin(e),l=Math.cos(e),u=Math.sin(n),c=Math.cos(n);return r[0]=a*l*c-o*s*u,r[1]=o*s*c+a*l*u,r[2]=o*l*u-a*s*c,r[3]=o*l*c+a*s*u,r}var CT=r3,Tm=Uce,Wce=Os,kv=Vce;(function(){var r=Vn(),t=en(1,0,0),e=en(0,1,0);return function(n,i,a){var o=Zx(i,a);return o<-.999999?(bT(r,t,i),t3(r)<1e-6&&bT(r,e,i),Cm(r,r),ld(n,r,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(bT(r,i,a),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=1+o,kv(n,n))}})();(function(){var r=wa(),t=wa();return function(e,n,i,a,o,s){return Qx(r,n,o,s),Qx(t,i,a,s),Qx(e,r,t,2*s*(1-s)),e}})();(function(){var r=Ev();return function(t,e,n,i){return r[0]=n[0],r[3]=n[1],r[6]=n[2],r[1]=i[0],r[4]=i[1],r[7]=i[2],r[2]=-e[0],r[5]=-e[1],r[8]=-e[2],kv(t,Hce(t,r))}})();function jce(){var r=new xa(2);return xa!=Float32Array&&(r[0]=0,r[1]=0),r}function Bi(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r}function i3(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r}function Na(r,t,e){return r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r}function Ba(r,t,e){return r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r}function gi(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r}function Mv(r,t){var e=t[0]-r[0],n=t[1]-r[1];return Math.hypot(e,n)}function Iv(r){var t=r[0],e=r[1];return Math.hypot(t,e)}function Tc(r,t){var e=t[0],n=t[1],i=e*e+n*n;return i>0&&(i=1/Math.sqrt(i)),r[0]=t[0]*i,r[1]=t[1]*i,r}function ET(r,t){return r[0]*t[0]+r[1]*t[1]}function Yce(r,t,e){var n=t[0],i=t[1];return r[0]=e[0]*n+e[3]*i+e[6],r[1]=e[1]*n+e[4]*i+e[7],r}function _T(r,t){var e=r[0],n=r[1],i=t[0],a=t[1],o=Math.sqrt(e*e+n*n)*Math.sqrt(i*i+a*a),s=o&&(e*i+n*a)/o;return Math.acos(Math.min(Math.max(s,-1),1))}function a3(r,t){return r[0]===t[0]&&r[1]===t[1]}var ud=i3;(function(){var r=jce();return function(t,e,n,i,a,o){var s,l;for(e||(e=2),n||(n=0),i?l=Math.min(i*e+n,t.length):l=t.length,s=n;s<l;s+=e)r[0]=t[s],r[1]=t[s+1],a(r,r,o),t[s]=r[0],t[s+1]=r[1];return t}})();function Pv(r,t,e){var n=[0,0,0,0,0,0,0,0,0];return YB(n,e),_v(r,n,t)}function TT(r,t,e){var n=[0,0,0,0,0,0,0,0,0];return XB(n,e),_v(r,n,t)}function o3(r,t,e){var n=[0,0,0,0,0,0,0,0,0];return qB(n,e),_v(r,n,t)}function Xce(r,t,e){return _v(r,e,t)}function Zn(r,t){for(var e=r?[].concat(r):[1,0,0,0,1,0,0,0,1],n=0,i=t.length;n<i;n++){var a=t[n];switch(a[0]){case"t":Pv(e,e,[a[1],a[2]]);break;case"s":o3(e,e,[a[1],a[2]]);break;case"r":TT(e,e,a[1]);break;case"m":Xce(e,e,a[1]);break}}return e}function qce(r,t){return r[0]*t[1]-t[0]*r[1]}function AT(r,t,e){var n=_T(r,t),i=qce(r,t)>=0;return e?i?Math.PI*2-n:n:i?n:Math.PI*2-n}var cd=function(t,e){var n=t.nodes,i=t.edges,a=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.source,u=s.target,c=o[l],f=o[u];!c&&c!==0||!f&&f!==0||(a[c][f]=1,e||(a[f][c]=1))}),a},Kce=function(t,e){return t===e},s3=function(){function r(t,e){e===void 0&&(e=null),this.value=t,this.next=e}return r.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},r}(),l3=function(){function r(t){t===void 0&&(t=Kce),this.head=null,this.tail=null,this.compare=t}return r.prototype.prepend=function(t){var e=new s3(t,this.head);return this.head=e,this.tail||(this.tail=e),this},r.prototype.append=function(t){var e=new s3(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},r.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var n=this.head;if(n!==null)for(;n.next;)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},r.prototype.find=function(t){var e=t.value,n=e===void 0?void 0:e,i=t.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||n!==void 0&&this.compare(o.value,n))return o;o=o.next}return null},r.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},r.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},r.prototype.fromArray=function(t){var e=this;return t.forEach(function(n){return e.append(n)}),this},r.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},r.prototype.reverse=function(){for(var t=this.head,e=null,n=null;t;)n=t.next,t.next=e,e=t,t=n;this.tail=this.head,this.head=e},r.prototype.toString=function(t){return t===void 0&&(t=void 0),this.toArray().map(function(e){return e.toString(t)}).toString()},r}(),Zce=function(){function r(){this.linkedList=new l3}return r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},r.prototype.enqueue=function(t){this.linkedList.append(t)},r.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},r.prototype.toString=function(t){return this.linkedList.toString(t)},r}(),fs=function(t,e,n){e===void 0&&(e=[]);var i=e.filter(function(l){return l.source===t||l.target===t});if(n==="target"){var a=function(u){return u.source===t};return i.filter(a).map(function(l){return l.target})}if(n==="source"){var o=function(u){return u.target===t};return i.filter(o).map(function(l){return l.source})}var s=function(u){return u.source===t?u.target:u.source};return i.map(s)},Qce=function(t,e){return e.filter(function(n){return n.source===t})},Jx=function(t,e){return e.filter(function(n){return n.source===t||n.target===t})},u3=function(t){t===void 0&&(t=0);var e="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(t,"-").concat(e).concat(n)};function Jce(r){r===void 0&&(r={});var t=r,e=function(){},n=function(){var i={};return function(a){var o=a.next,s=o;return i[s]?!1:(i[s]=!0,!0)}}();return t.allowTraversal=r.allowTraversal||n,t.enter=r.enter||e,t.leave=r.leave||e,t}var c3=function(t,e,n,i){i===void 0&&(i=!0);var a=Jce(n),o=new Zce,s=t.edges,l=s===void 0?[]:s;o.enqueue(e);for(var u="",c=function(){var d=o.dequeue();a.enter({current:d,previous:u}),fs(d,l,i?"target":void 0).forEach(function(h){a.allowTraversal({previous:u,current:d,next:h})&&o.enqueue(h)}),a.leave({current:d,previous:u}),u=d};!o.isEmpty();)c()},efe=function(t){for(var e=t.nodes,n=e===void 0?[]:e,i=t.edges,a=i===void 0?[]:i,o=[],s={},l=[],u=function h(v){l.push(v),s[v.id]=!0;for(var p=fs(v.id,a),g=function(b){var x=p[b];if(!s[x]){var w=n.filter(function(S){return S.id===x});w.length>0&&h(w[0])}},m=0;m<p.length;++m)g(m)},c=0;c<n.length;c++){var f=n[c];if(!s[f.id]){u(f);for(var d=[];l.length>0;)d.push(l.pop());o.push(d)}}return o},f3=function(t){for(var e=t.nodes,n=e===void 0?[]:e,i=t.edges,a=i===void 0?[]:i,o=[],s={},l={},u={},c=[],f=0,d=function g(m){l[m.id]=f,u[m.id]=f,f+=1,o.push(m),s[m.id]=!0;for(var y=fs(m.id,a,"target").filter(function(C){return n.map(function(_){return _.id}).indexOf(C)>-1}),b=function(_){var T=y[_];if(!l[T]&&l[T]!==0){var E=n.filter(function(k){return k.id===T});E.length>0&&g(E[0]),u[m.id]=Math.min(u[m.id],u[T])}else s[T]&&(u[m.id]=Math.min(u[m.id],l[T]))},x=0;x<y.length;x++)b(x);if(u[m.id]===l[m.id]){for(var w=[];o.length>0;){var S=o.pop();if(s[S.id]=!1,w.push(S),S===m)break}w.length>0&&c.push(w)}},h=0,v=n;h<v.length;h++){var p=v[h];!l[p.id]&&l[p.id]!==0&&d(p)}return c};function kT(r,t){return t?f3(r):efe(r)}var Ac=function(t){var e={},n=t.nodes,i=n===void 0?[]:n,a=t.edges,o=a===void 0?[]:a;return i.forEach(function(s){e[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){e[s.source].degree++,e[s.source].outDegree++,e[s.target].degree++,e[s.target].inDegree++}),e},d3=function(t,e){var n=Ac(t);return n[e]?Ac(t)[e].inDegree:0},h3=function(t,e){var n=Ac(t);return n[e]?Ac(t)[e].outDegree:0};function tfe(r){r===void 0&&(r={});var t=r,e=function(){},n=function(){var i={};return function(a){var o=a.next;return i[o]?!1:(i[o]=!0,!0)}}();return t.allowTraversal=r.allowTraversal||n,t.enter=r.enter||e,t.leave=r.leave||e,t}function v3(r,t,e,n){n.enter({current:t,previous:e});var i=r.edges,a=i===void 0?[]:i;fs(t,a,"target").forEach(function(o){n.allowTraversal({previous:e,current:t,next:o})&&v3(r,o,t,n)}),n.leave({current:t,previous:e})}function MT(r,t,e){v3(r,t,"",tfe(e))}var IT=function(t){var e=null,n=t.nodes,i=n===void 0?[]:n,a={},o={},s={},l={};i.forEach(function(f){o[f.id]=f});for(var u={enter:function(d){var h=d.current,v=d.previous;if(s[h]){e={};for(var p=h,g=v;g!==h;)e[p]=g,p=g,g=a[g];e[p]=g}else s[h]=h,delete o[h],a[h]=v},leave:function(d){var h=d.current;l[h]=h,delete s[h]},allowTraversal:function(d){var h=d.next;return e?!1:!l[h]}};Object.keys(o).length;){var c=Object.keys(o)[0];MT(t,c,u)}return e},PT=function(t,e,n){var i,a;n===void 0&&(n=!0);for(var o=[],s=kT(t,!1),l=0,u=s;l<u.length;l++){var c=u[l];if(!!c.length)for(var f=c[0],d=f.id,h=[f],v=(i={},i[d]=f,i),p=(a={},a[d]=new Set,a);h.length>0;)for(var g=h.pop(),m=g.id,y=fs(m,t.edges),b=function(S){var C,_=y[S],T=t.nodes.find(function($){return $.id===_});if(_===m)o.push((C={},C[_]=g,C));else if(!(_ in p))v[_]=g,h.push(T),p[_]=new Set([g]);else if(!p[m].has(T)){for(var E=!0,k=[T,g],I=v[m];p[_].size&&!p[_].has(I)&&(k.push(I),I!==v[I.id]);)I=v[I.id];if(k.push(I),e&&n?(E=!1,k.findIndex(function($){return e.indexOf($.id)>-1})>-1&&(E=!0)):e&&!n&&k.findIndex(function($){return e.indexOf($.id)>-1})>-1&&(E=!1),E){for(var P={},F=1;F<k.length;F+=1)P[k[F-1].id]=k[F];k.length&&(P[k[k.length-1].id]=k[0]),o.push(P)}p[_].add(g)}},x=0;x<y.length;x+=1)b(x)}return o},DT=function(t,e,n){n===void 0&&(n=!0);for(var i=[],a=new Set,o=[],s=[],l={},u={},c=function(I){for(var P=[I];P.length>0;){var F=P.pop();a.has(F)&&(a.delete(F),o[F.id].forEach(function($){P.push($)}),o[F.id].clear())}},f=function k(I,P,F){var $=!1;if(e&&n===!1&&e.indexOf(I.id)>-1)return $;i.push(I),a.add(I);for(var R=F[I.id],L=0;L<R.length;L+=1){var O=l[R[L]];if(O===P){for(var B={},U=1;U<i.length;U+=1)B[i[U-1].id]=i[U];i.length&&(B[i[i.length-1].id]=i[0]),s.push(B),$=!0}else a.has(O)||k(O,P,F)&&($=!0)}if($)c(I);else for(var L=0;L<R.length;L+=1){var O=l[R[L]];o[O.id].has(I)||o[O.id].add(I)}return i.pop(),$},d=t.nodes,h=d===void 0?[]:d,v=0;v<h.length;v+=1){var p=h[v],g=p.id;u[g]=v,l[v]=p}if(e&&n)for(var m=function(I){var P=e[I];u[h[I].id]=u[P],u[P]=0,l[0]=h.find(function(F){return F.id===P}),l[u[h[I].id]]=h[I]},v=0;v<e.length;v++)m(v);for(var y=function(I){for(var P,F,$=1/0,R=0;R<I.length;R+=1)for(var L=I[R],O=0;O<L.length;O++){var B=u[L[O].id];B<$&&($=B,F=R)}for(var U=I[F],W=[],R=0;R<U.length;R+=1){var X=U[R];W[X.id]=[];for(var ie=0,q=fs(X.id,t.edges,"target").filter(function(se){return U.map(function(ce){return ce.id}).indexOf(se)>-1});ie<q.length;ie++){var j=q[ie];j===X.id&&!(n===!1&&e.indexOf(X.id)>-1)?s.push((P={},P[X.id]=X,P)):W[X.id].push(u[j])}}return{component:U,adjList:W,minIdx:$}},b=0;b<h.length;){var x=h.filter(function(k){return u[k.id]>=b}),w=f3({nodes:x,edges:t.edges}).filter(function(k){return k.length>1});if(w.length===0)break;var S=y(w),C=S.minIdx,_=S.adjList,T=S.component;if(T.length>1){T.forEach(function(k){o[k.id]=new Set});var E=l[C];if(e&&n&&e.indexOf(E.id)===-1)return s;f(E,E,_),b=C+1}else break}return s},p3=function(t,e,n,i){return i===void 0&&(i=!0),e?DT(t,n,i):PT(t,n,i)},rfe=function(t,e,n){for(var i=1/0,a,o=0;o<e.length;o++){var s=e[o].id;!n[s]&&t[s]<=i&&(i=t[s],a=e[o])}return a},Am=function(t,e,n,i){var a=t.nodes,o=a===void 0?[]:a,s=t.edges,l=s===void 0?[]:s,u={},c={},f={};o.forEach(function(y,b){var x=y.id;c[x]=1/0,x===e&&(c[x]=0)});for(var d=o.length,h=function(b){var x=rfe(c,o,u),w=x.id;if(u[w]=!0,c[w]===1/0)return"continue";var S=[];n?S=Qce(w,l):S=Jx(w,l),S.forEach(function(C){var _=C.target,T=C.source,E=_===w?T:_,k=i&&C[i]?C[i]:1;c[E]>c[x.id]+k?(c[E]=c[x.id]+k,f[E]=[x.id]):c[E]===c[x.id]+k&&f[E].push(x.id)})},v=0;v<d;v++)h();f[e]=[e];var p={};for(var g in c)c[g]!==1/0&&g3(e,g,f,p);var m={};for(var g in p)m[g]=p[g][0];return{length:c,path:m,allPath:p}};function g3(r,t,e,n){if(r===t)return[r];if(n[t])return n[t];for(var i=[],a=0,o=e[t];a<o.length;a++){var s=o[a],l=g3(r,s,e,n);if(!l)return;for(var u=0,c=l;u<c.length;u++){var f=c[u];Qe(f)?i.push(oi(oi([],f,!0),[t],!1)):i.push([f,t])}}return n[t]=i,n[t]}var m3=function(t,e,n,i,a){var o=Am(t,e,i,a),s=o.length,l=o.path,u=o.allPath;return{length:s[n],path:l[n],allPath:u[n]}},y3=function(t,e,n,i){var a;if(e===n)return[[e]];var o=t.edges,s=o===void 0?[]:o,l=[e],u=(a={},a[e]=!0,a),c=[],f=[],d=i?fs(e,s,"target"):fs(e,s);for(c.push(d);l.length>0&&c.length>0;){var h=c[c.length-1];if(h.length){var v=h.shift();v&&(l.push(v),u[v]=!0,d=i?fs(v,s,"target"):fs(v,s),c.push(d.filter(function(m){return!u[m]})))}else{var p=l.pop();u[p]=!1,c.pop();continue}if(l[l.length-1]===n){var g=l.map(function(y){return y});f.push(g);var p=l.pop();u[p]=!1,c.pop()}}return f},km=function(t,e){for(var n=cd(t,e),i=[],a=n.length,o=0;o<a;o+=1){i[o]=[];for(var s=0;s<a;s+=1)o===s?i[o][s]=0:n[o][s]===0||!n[o][s]?i[o][s]=1/0:i[o][s]=n[o][s]}for(var l=0;l<a;l+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)i[o][s]>i[o][l]+i[l][s]&&(i[o][s]=i[o][l]+i[l][s]);return i},b3=function(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e3);var a=t.nodes,o=a===void 0?[]:a,s=t.edges,l=s===void 0?[]:s,u={},c={};o.forEach(function(b,x){var w=u3();b.clusterId=w,u[w]={id:w,nodes:[b]},c[b.id]={node:b,idx:x}});var f=cd(t,e),d={};f.forEach(function(b,x){var w=o[x].id;d[w]={},b.forEach(function(S,C){if(!!S){var _=o[C].id;d[w][_]=S}})});for(var h=0,v=function(){var x=!1;if(o.forEach(function(w){var S={};Object.keys(d[w.id]).forEach(function(F){var $=d[w.id][F],R=c[F].node,L=R.clusterId;S[L]||(S[L]=0),S[L]+=$});var C=-1/0,_=[];if(Object.keys(S).forEach(function(F){C<S[F]?(C=S[F],_=[F]):C===S[F]&&_.push(F)}),!(_.length===1&&_[0]===w.clusterId)){var T=_.indexOf(w.clusterId);if(T>=0&&_.splice(T,1),_&&_.length){x=!0;var E=u[w.clusterId],k=E.nodes.indexOf(w);E.nodes.splice(k,1);var I=Math.floor(Math.random()*_.length),P=u[_[I]];P.nodes.push(w),w.clusterId=P.id}}}),!x)return"break";h++};h<i;){var p=v();if(p==="break")break}Object.keys(u).forEach(function(b){var x=u[b];(!x.nodes||!x.nodes.length)&&delete u[b]});var g=[],m={};l.forEach(function(b){var x=b.source,w=b.target,S=b[n]||1,C=c[x].node.clusterId,_=c[w].node.clusterId,T="".concat(C,"---").concat(_);if(m[T])m[T].weight+=S,m[T].count++;else{var E={source:C,target:_,weight:S,count:1};m[T]=E,g.push(E)}});var y=[];return Object.keys(u).forEach(function(b){y.push(u[b])}),{clusters:y,clusterEdges:g}},Mm=function(){function r(t){this.arr=t}return r.prototype.add=function(t){var e,n=t.arr;if(!((e=this.arr)===null||e===void 0?void 0:e.length))return new r(n);if(!(n==null?void 0:n.length))return new r(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]+n[a];return new r(i)}},r.prototype.subtract=function(t){var e,n=t.arr;if(!((e=this.arr)===null||e===void 0?void 0:e.length))return new r(n);if(!(n==null?void 0:n.length))return new r(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]-n[a];return new r(i)}},r.prototype.avg=function(t){var e=[];for(var n in this.arr)e[n]=this.arr[n]/t;return new r(e)},r.prototype.negate=function(){var t=[];for(var e in this.arr)t[e]=-this.arr[e];return new r(t)},r.prototype.squareEuclideanDistance=function(t){var e,n=t.arr;if(!((e=this.arr)===null||e===void 0?void 0:e.length)||!(n==null?void 0:n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-t.arr[a],2);return i}},r.prototype.normalize=function(){var t=[],e=Or(this.arr);e.sort(function(o,s){return o-s});var n=e[e.length-1],i=e[0];for(var a in this.arr)t[a]=(this.arr[a]-i)/(n-i);return new r(t)},r}(),x3=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,w3=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,S3=function(t,e,n,i){for(var a=e.length,o=2*i,s=0,l=0;l<a;l++)for(var u=t[l].clusterId,c=0;c<a;c++){var f=t[c].clusterId;if(u===f){var d=e[l][c]||0,h=n[l]||0,v=n[c]||0;s+=d-h*v/o}}return s*=1/o,s},nfe=function(t){t===void 0&&(t=[]);var e={};t.forEach(function(i){Object.keys(i.properties).forEach(function(a){if(!"".concat(i.properties[a]).match(x3)&&!"".concat(i.properties[a]).match(w3)&&isNaN(Number(i.properties[a]))||a==="id"){e.hasOwnProperty(a)&&delete e[a];return}e.hasOwnProperty(a)?e[a]+=1:e[a]=1})});var n=Object.keys(e).sort(function(i,a){return e[a]-e[i]});return n.length<100?n:n.slice(0,100)},ife=function(t,e){return e.map(function(n){if(t.hasOwnProperty(n)){if(!isNaN(Number(t[n])))return Number(t[n]);if(t[n].match(x3)||t[n].match(w3))return Number(Date.parse(new Date(t[n])))/1e3}return 0})},afe=function(t,e){for(var n=[],i=0;i<e.length;i++)n[i]=ife(e[i].properties,t);return n},RT=function(t,e){t===void 0&&(t=[]);for(var n=t.length,i=new Mm([]),a=0;a<n;a++)i=i.add(new Mm(e[a]));var o=i.avg(n);o.normalize();for(var s=0,a=0;a<n;a++){var l=new Mm(e[a]),u=l.squareEuclideanDistance(o);s+=u}var c=[];t.forEach(function(){c.push([])});for(var a=0;a<n;a++){var l=new Mm(e[a]);t[a].clusterInertial=0;for(var f=0;f<n;f++){if(a===f){c[a][f]=0;continue}var d=new Mm(e[f]);c[a][f]=l.squareEuclideanDistance(d),t[a].clusterInertial+=c[a][f]}}for(var h=0,v=2*n*s,a=0;a<n;a++)for(var p=t[a].clusterId,f=0;f<n;f++){var g=t[f].clusterId;if(!(a===f||p!==g)){var m=t[a].clusterInertial*t[f].clusterInertial/Math.pow(v,2)-c[a][f]/v;h+=m}}return Number(h.toFixed(4))},C3=function(t,e,n,i,a,o){e===void 0&&(e=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e-4),a===void 0&&(a=!1),o===void 0&&(o=1);var s=t.nodes,l=s===void 0?[]:s,u=t.edges,c=u===void 0?[]:u,f=[];if(a){l.forEach(function(R,L){R.properties=R.properties||{},R.originIndex=L});var d=[];l.every(function(R){return R.hasOwnProperty("nodeType")})&&(d=Array.from(new Set(l.map(function(R){return R.nodeType}))),l.forEach(function(R){R.properties.nodeType=d.findIndex(function(L){return L===R.nodeType})}));var h=nfe(l);f=afe(h,l)}var v=1,p={},g={};l.forEach(function(R,L){var O=String(v++);R.clusterId=O,p[O]={id:O,nodes:[R]},g[R.id]={node:R,idx:L}});var m=cd(t,e),y=[],b={},x=0;m.forEach(function(R,L){var O=0,B=l[L].id;b[B]={},R.forEach(function(U,W){if(!!U){O+=U;var X=l[W].id;b[B][X]=U,x+=U}}),y.push(O)}),x/=2;for(var w=1/0,S=1/0,C=0,_=[],T={};;){a&&l.every(function(R){return R.hasOwnProperty("properties")})?w=S3(l,m,y,x)+RT(l,f)*o:w=S3(l,m,y,x),C===0&&(S=w,_=l,T=p);var E=w>0&&w>S&&w-S<i;if(w>S&&(_=l.map(function(R){return{node:R,clusterId:R.clusterId}}),T=Or(p),S=w),E||C>100)break;C++,Object.keys(p).forEach(function(R){var L=0;c.forEach(function(O){var B=O.source,U=O.target,W=g[B].node.clusterId,X=g[U].node.clusterId;(W===R&&X!==R||X===R&&W!==R)&&(L=L+(O[n]||1))}),p[R].sumTot=L}),l.forEach(function(R,L){var O=p[R.clusterId],B=0,U,W=y[L]/(2*x),X=0,ie=O.nodes;ie.forEach(function(D){var z=g[D.id].idx;X+=m[L][z]||0});var q=X-O.sumTot*W,j=ie.filter(function(D){return D.id!==R.id}),fe=[];j.forEach(function(D,z){fe[z]=f[D.originIndex]});var se=RT(j,f)*o,ce=b[R.id];if(Object.keys(ce).forEach(function(D){var z=g[D].node,V=z.clusterId;if(V!==R.clusterId){var he=p[V],re=he.nodes;if(!(!re||!re.length)){var pe=0;re.forEach(function(Y){var K=g[Y.id].idx;pe+=m[L][K]||0});var Je=pe-he.sumTot*W,We=re.concat([R]),Le=[];We.forEach(function(Y,K){Le[K]=f[Y.originIndex]});var $e=RT(We,f)*o,H=Je-q;a&&(H=Je+$e-(q+se)),H>B&&(B=H,U=he)}}}),B>0){U.nodes.push(R);var _e=R.clusterId;R.clusterId=U.id;var Me=O.nodes.indexOf(R);O.nodes.splice(Me,1);var Ye=0,De=0;c.forEach(function(D){var z=D.source,V=D.target,he=g[z].node.clusterId,re=g[V].node.clusterId;(he===U.id&&re!==U.id||re===U.id&&he!==U.id)&&(Ye=Ye+(D[n]||1)),(he===_e&&re!==_e||re===_e&&he!==_e)&&(De=De+(D[n]||1))}),U.sumTot=Ye,O.sumTot=De}})}var k={},I=0;Object.keys(T).forEach(function(R){var L=T[R];if(!L.nodes||!L.nodes.length){delete T[R];return}var O=String(I+1);O!==R&&(L.id=O,L.nodes=L.nodes.map(function(B){return{id:B.id,clusterId:O}}),T[O]=L,k[R]=O,delete T[R],I++)}),_.forEach(function(R){var L=R.node,O=R.clusterId;L.clusterId=O,L.clusterId&&k[L.clusterId]&&(L.clusterId=k[L.clusterId])});var P=[],F={};c.forEach(function(R){var L=R.source,O=R.target,B=R[n]||1,U=g[L].node.clusterId,W=g[O].node.clusterId,X="".concat(U,"---").concat(W);if(F[X])F[X].weight+=B,F[X].count++;else{var ie={source:U,target:W,weight:B,count:1};F[X]=ie,P.push(ie)}});var $=[];return Object.keys(T).forEach(function(R){$.push(T[R])}),{clusters:$,clusterEdges:P}},ofe=function(){function r(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var i=n[e];this.parent[i]=i}}return r.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},r.prototype.union=function(t,e){var n=this.find(t),i=this.find(e);n!==i&&(n<i?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},r.prototype.connected=function(t,e){return this.find(t)===this.find(e)},r}(),sfe=function(t,e){return t-e},lfe=function(){function r(t){t===void 0&&(t=sfe),this.compareFn=t,this.list=[]}return r.prototype.getLeft=function(t){return 2*t+1},r.prototype.getRight=function(t){return 2*t+2},r.prototype.getParent=function(t){return t===0?null:Math.floor((t-1)/2)},r.prototype.isEmpty=function(){return this.list.length<=0},r.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},r.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},r.prototype.insert=function(t){if(t!==null){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},r.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},r.prototype.moveDown=function(t){var e,n=t,i=this.getLeft(t),a=this.getRight(t),o=this.list.length;i!==null&&i<o&&this.compareFn(this.list[n],this.list[i])>0?n=i:a!==null&&a<o&&this.compareFn(this.list[n],this.list[a])>0&&(n=a),t!==n&&(e=[this.list[n],this.list[t]],this.list[t]=e[0],this.list[n]=e[1],this.moveDown(n))},r}(),ufe=function(t,e){var n=[],i=t.nodes,a=i===void 0?[]:i,o=t.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=a[0],u=new Set;u.add(l);var c=function(g,m){return e?g.weight-m.weight:0},f=new lfe(c);for(Jx(l.id,s).forEach(function(p){f.insert(p)});!f.isEmpty();){var d=f.delMin(),h=d.source,v=d.target;u.has(h)&&u.has(v)||(n.push(d),u.has(h)||(u.add(h),Jx(h,s).forEach(function(p){f.insert(p)})),u.has(v)||(u.add(v),Jx(v,s).forEach(function(p){f.insert(p)})))}return n},E3=function(t,e){var n=[],i=t.nodes,a=i===void 0?[]:i,o=t.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=s.map(function(h){return h});e&&l.sort(function(h,v){return h.weight-v.weight});for(var u=new ofe(a.map(function(h){return h.id}));l.length>0;){var c=l.shift(),f=c.source,d=c.target;u.connected(f,d)||(n.push(c),u.union(f,d))}return n},_3=function(t,e,n){var i={prim:ufe,kruskal:E3};return n?i[n](t,e):E3(t,e)},T3=function(t,e,n){typeof e!="number"&&(e=1e-6),typeof n!="number"&&(n=.85);for(var i=1,a=0,o=1e3,s=t.nodes,l=s===void 0?[]:s,u=t.edges,c=u===void 0?[]:u,f=l.length,d,h={},v={},p=0;p<f;++p){var g=l[p],m=g.id;h[m]=1/f,v[m]=1/f}for(var y=Ac(t);o>0&&i>e;){a=0;for(var p=0;p<f;++p){var g=l[p],m=g.id;if(d=0,y[g.id].inDegree===0)h[m]=0;else{for(var b=fs(m,c,"source"),x=0;x<b.length;++x){var w=b[x],S=y[w].outDegree;S>0&&(d+=v[w]/S)}h[m]=n*d,a+=h[m]}}a=(1-a)/f,i=0;for(var p=0;p<f;++p){var g=l[p],m=g.id;d=h[m]+a,i+=Math.abs(d-v[m]),v[m]=d}o-=1}return v},cfe=-1,e1=-1,A3="-1",Dl="-1",k3=-1,M3=function(){function r(t,e,n,i){t===void 0&&(t=cfe),e===void 0&&(e=e1),n===void 0&&(n=e1),i===void 0&&(i=A3),this.id=t,this.from=e,this.to=n,this.label=i}return r}(),ffe=function(){function r(t,e){t===void 0&&(t=e1),e===void 0&&(e=Dl),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return r.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},r}(),I3=function(){function r(t,e,n){t===void 0&&(t=e1),e===void 0&&(e=!0),n===void 0&&(n=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return r.prototype.getNodeNum=function(){return this.nodes.length},r.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var n=new ffe(t,e);this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},r.prototype.addEdge=function(t,e,n,i){if((this.edgeIdAutoIncrease||t===void 0)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[t])){var a=new M3(t,e,n,i);if(this.edges.push(a),this.edgeMap[t]=a,this.nodeMap[e].addEdge(a),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(a),!this.directed){var o=new M3(t,n,e,i);this.nodeMap[n].addEdge(o),this.edgeLabelMap[i].push(o)}}},r}(),fd=function(){function r(t,e,n,i,a){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||Dl,edgeLabel:i||A3,nodeLabel2:a||Dl}}return r.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},r.prototype.notEqualTo=function(t){return!this.equalTo(t)},r}(),P3=function(){function r(){this.rmpath=[],this.dfsEdgeList=[]}return r.prototype.equalTo=function(t){var e=this.dfsEdgeList.length,n=t.length;if(e!==n)return!1;for(var i=0;i<e;i++)if(this.dfsEdgeList[i]!==t[i])return!1;return!0},r.prototype.notEqualTo=function(t){return!this.equalTo(t)},r.prototype.pushBack=function(t,e,n,i,a){return this.dfsEdgeList.push(new fd(t,e,n,i,a)),this.dfsEdgeList},r.prototype.toGraph=function(t,e){t===void 0&&(t=k3),e===void 0&&(e=!1);var n=new I3(t,!0,e);return this.dfsEdgeList.forEach(function(i){var a=i.fromNode,o=i.toNode,s=i.nodeEdgeNodeLabel,l=s.nodeLabel1,u=s.edgeLabel,c=s.nodeLabel2;l!==Dl&&n.addNode(a,l),c!==Dl&&n.addNode(o,c),l!==Dl&&c!==l&&n.addEdge(void 0,a,o,u)}),n},r.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length,n=e-1;n>=0;n--){var i=this.dfsEdgeList[n],a=i.fromNode,o=i.toNode;a<o&&(t===void 0||o===t)&&(this.rmpath.push(n),t=a)}return this.rmpath},r.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach(function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)}),Object.keys(t).length},r}(),t1=function(){function r(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return r.prototype.hasNode=function(t){return this.nodesUsed[t.id]===1},r.prototype.hasEdge=function(t){return this.edgesUsed[t.id]===1},r}(),dfe=function(){function r(t){var e=t.graphs,n=t.minSupport,i=n===void 0?2:n,a=t.minNodeNum,o=a===void 0?1:a,s=t.maxNodeNum,l=s===void 0?4:s,u=t.top,c=u===void 0?10:u,f=t.directed,d=f===void 0?!1:f,h=t.verbose,v=h===void 0?!1:h;this.graphs=e,this.dfsCode=new P3,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=c,this.directed=d,this.counter=0,this.maxNodeNum=l,this.minNodeNum=o,this.verbose=v,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return r.prototype.findForwardRootEdges=function(t,e){var n=this,i=[],a=t.nodeMap;return e.edges.forEach(function(o){(n.directed||e.label<=a[o.to].label)&&i.push(o)}),i},r.prototype.findBackwardEdge=function(t,e,n,i){if(!this.directed&&e===n)return null;for(var a=t.nodeMap,o=a[n.to],s=o.edges,l=s.length,u=0;u<l;u++){var c=s[u];if(!(i.hasEdge(c)||c.to!==e.from)){if(this.directed){if(a[e.from].label<a[n.to].label||a[e.from].label===a[n.to].label&&e.label<=c.label)return c}else if(e.label<c.label||e.label===c.label&&a[e.to].label<=a[n.to].label)return c}}return null},r.prototype.findForwardPureEdges=function(t,e,n,i){for(var a=[],o=e.to,s=t.nodeMap[o].edges,l=s.length,u=0;u<l;u++){var c=s[u],f=t.nodeMap[c.to];n<=f.label&&!i.hasNode(f)&&a.push(c)}return a},r.prototype.findForwardRmpathEdges=function(t,e,n,i){for(var a=[],o=t.nodeMap,s=o[e.to].label,l=o[e.from],u=l.edges,c=u.length,f=0;f<c;f++){var d=u[f],h=o[d.to].label;e.to===d.to||n>h||i.hasNode(o[d.to])||(e.label<d.label||e.label===d.label&&s<=h)&&a.push(d)}return a},r.prototype.getSupport=function(t){var e={};return t.forEach(function(n){e[n.graphId]||(e[n.graphId]=!0)}),Object.keys(e).length},r.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach(function(n){var i=t[n],a=i.nodeLabel1,o=i.edgeLabel,s=i.nodeLabel2;if(!e){e={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<e.nodeLabel1||a===e.nodeLabel1&&o<e.edgeLabel||a===e.nodeLabel1&&o===e.edgeLabel&&s<e.nodeLabel2)&&(e={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),e},r.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),e.dfsEdgeList.length===1)return!0;var n=this.directed,i=e.toGraph(k3,n),a=i.nodeMap,o=new P3,s={};i.nodes.forEach(function(f){var d=t.findForwardRootEdges(i,f);d.forEach(function(h){var v=a[h.to],p="".concat(f.label,"-").concat(h.label,"-").concat(v.label);s[p]||(s[p]={projected:[],nodeLabel1:f.label,edgeLabel:h.label,nodeLabel2:v.label});var g={graphId:i.id,edge:h,preNode:null};s[p].projected.push(g)})});var l=this.findMinLabel(s);if(!!l){o.dfsEdgeList.push(new fd(0,1,l.nodeLabel1,l.edgeLabel,l.nodeLabel2));var u=function f(d){for(var h=o.buildRmpath(),v=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,p=o.dfsEdgeList[h[0]].toNode,g={},m=!1,y=0,b=n?-1:0,x=function(L){if(m)return"break";d.forEach(function(O){var B=new t1(O),U=t.findBackwardEdge(i,B.edges[h[L]],B.edges[h[0]],B);U&&(g[U.label]||(g[U.label]={projected:[],edgeLabel:U.label}),g[U.label].projected.push({graphId:i.id,edge:g,preNode:O}),y=o.dfsEdgeList[h[L]].fromNode,m=!0)})},w=h.length-1;w>b;w--){var S=x(w);if(S==="break")break}if(m){var C=t.findMinLabel(g);o.dfsEdgeList.push(new fd(p,y,Dl,C.edgeLabel,Dl));var _=o.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[_]!==o.dfsEdgeList[_]?!1:f(g[C.edgeLabel].projected)}var T={};m=!1;var E=0;d.forEach(function(R){var L=new t1(R),O=t.findForwardPureEdges(i,L.edges[h[0]],v,L);O.length>0&&(m=!0,E=p,O.forEach(function(B){var U="".concat(B.label,"-").concat(a[B.to].label);T[U]||(T[U]={projected:[],edgeLabel:B.label,nodeLabel2:a[B.to].label}),T[U].projected.push({graphId:i.id,edge:B,preNode:R})}))});for(var k=h.length,I=function(L){if(m)return"break";var O=h[L];d.forEach(function(B){var U=new t1(B),W=t.findForwardRmpathEdges(i,U.edges[O],v,U);W.length>0&&(m=!0,E=o.dfsEdgeList[O].fromNode,W.forEach(function(X){var ie="".concat(X.label,"-").concat(a[X.to].label);T[ie]||(T[ie]={projected:[],edgeLabel:X.label,nodeLabel2:a[X.to].label}),T[ie].projected.push({graphId:i.id,edge:X,preNode:B})}))})},w=0;w<k;w++){var P=I(w);if(P==="break")break}if(!m)return!0;var F=t.findMinLabel(T);o.dfsEdgeList.push(new fd(E,p+1,Dl,F.edgeLabel,F.nodeLabel2));var $=o.dfsEdgeList.length-1;return e.dfsEdgeList[$]!==o.dfsEdgeList[$]?!1:f(T["".concat(F.edgeLabel,"-").concat(F.nodeLabel2)].projected)},c="".concat(l.nodeLabel1,"-").concat(l.edgeLabel,"-").concat(l.nodeLabel2);return u(s[c].projected)}},r.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(Or(t))}},r.prototype.subGraphMining=function(t){var e=this,n=this.getSupport(t);if(!(n<this.minSupport)&&!!this.isMin()){this.report();var i=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l={},u={};t.forEach(function(c){for(var f=e.graphs[c.graphId],d=f.nodeMap,h=new t1(c),v=a.length-1;v>=0;v--){var p=e.findBackwardEdge(f,h.edges[a[v]],h.edges[a[0]],h);if(p){var g="".concat(e.dfsCode.dfsEdgeList[a[v]].fromNode,"-").concat(p.label);u[g]||(u[g]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[a[v]].fromNode,edgeLabel:p.label}),u[g].projected.push({graphId:c.graphId,edge:p,preNode:c})}}if(!(i>=e.maxNodeNum)){var m=e.findForwardPureEdges(f,h.edges[a[0]],s,h);m.forEach(function(b){var x="".concat(o,"-").concat(b.label,"-").concat(d[b.to].label);l[x]||(l[x]={projected:[],fromNodeId:o,edgeLabel:b.label,nodeLabel2:d[b.to].label}),l[x].projected.push({graphId:c.graphId,edge:b,preNode:c})});for(var y=function(x){var w=e.findForwardRmpathEdges(f,h.edges[a[x]],s,h);w.forEach(function(S){var C="".concat(e.dfsCode.dfsEdgeList[a[x]].fromNode,"-").concat(S.label,"-").concat(d[S.to].label);l[C]||(l[C]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[a[x]].fromNode,edgeLabel:S.label,nodeLabel2:d[S.to].label}),l[C].projected.push({graphId:c.graphId,edge:S,preNode:c})})},v=0;v<a.length;v++)y(v)}}),Object.keys(u).forEach(function(c){var f=u[c],d=f.toNodeId,h=f.edgeLabel;e.dfsCode.dfsEdgeList.push(new fd(o,d,"-1",h,"-1")),e.subGraphMining(u[c].projected),e.dfsCode.dfsEdgeList.pop()}),Object.keys(l).forEach(function(c){var f=l[c],d=f.fromNodeId,h=f.edgeLabel,v=f.nodeLabel2;e.dfsCode.dfsEdgeList.push(new fd(d,o+1,Dl,h,v)),e.subGraphMining(l[c].projected),e.dfsCode.dfsEdgeList.pop()})}},r.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,i=this.frequentSize1Subgraphs,a={},o={},s={},l={};return Object.keys(t).forEach(function(u){var c=t[u],f=c.nodeMap;c.nodes.forEach(function(d,h){var v=d.label,p="".concat(u,"-").concat(v);if(!s[p]){var g=a[v]||0;g++,a[v]=g}s[p]={graphKey:u,label:v},d.edges.forEach(function(m){var y=v,b=f[m.to].label;if(!e&&y>b){var x=b;b=y,y=x}var w=m.label,S="".concat(u,"-").concat(y,"-").concat(w,"-").concat(b),C="".concat(y,"-").concat(w,"-").concat(b);if(!o[C]){var _=o[C]||0;_++,o[C]=_}l[S]={graphId:u,nodeLabel1:y,edgeLabel:w,nodeLabel2:b}})})}),Object.keys(a).forEach(function(u){var c=a[u];if(!(c<n)){var f={nodes:[],edges:[]};f.nodes.push({id:"0",label:u}),i.push(f)}}),i},r.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs;this.directed;var n={};Object.keys(e).forEach(function(i){var a=e[i],o=a.nodeMap;a.nodes.forEach(function(s){var l=t.findForwardRootEdges(a,s);l.forEach(function(u){var c=o[u.to],f="".concat(s.label,"-").concat(u.label,"-").concat(c.label);n[f]||(n[f]={projected:[],nodeLabel1:s.label,edgeLabel:u.label,nodeLabel2:c.label});var d={graphId:i,edge:u,preNode:null};n[f].projected.push(d)})})}),Object.keys(n).forEach(function(i){var a=n[i],o=a.projected,s=a.nodeLabel1,l=a.edgeLabel,u=a.nodeLabel2;t.dfsCode.dfsEdgeList.push(new fd(0,1,s,l,u)),t.subGraphMining(o),t.dfsCode.dfsEdgeList.pop()})}},r}(),hfe=function(t,e,n,i){var a={};return Object.keys(t).forEach(function(o,s){var l=t[o],u=new I3(s,!0,e),c={};l.nodes.forEach(function(f,d){u.addNode(d,f[n]),c[f.id]=d}),l.edges.forEach(function(f,d){var h=c[f.source],v=c[f.target];u.addEdge(-1,h,v,f[i])}),u&&u.getNodeNum()&&(a[u.id]=u)}),a},vfe=function(t,e,n){var i=[];return t.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var l;o.nodes.push((l={id:"".concat(s.id)},l[e]=s.label,l))}),a.edges.forEach(function(s){var l;o.edges.push((l={source:"".concat(s.from),target:"".concat(s.to)},l[n]=s.label,l))}),i.push(o)}),i},D3="cluster",pfe=function(t){var e=t.graphs,n=t.directed,i=n===void 0?!1:n,a=t.nodeLabelProp,o=a===void 0?D3:a,s=t.edgeLabelProp,l=s===void 0?D3:s,u=hfe(e,i,o,l),c=t.minSupport,f=t.maxNodeNum,d=t.minNodeNum,h=t.verbose,v=t.top,p={graphs:u,minSupport:c,maxNodeNum:f,minNodeNum:d,top:v,verbose:h,directed:i},g=new dfe(p);g.run();var m=vfe(g.frequentSubgraphs,o,l);return m},R3=function(t,e,n,i){n===void 0&&(n="cluster"),i===void 0&&(i=2);var a=[],o=t.nodes;return e.forEach(function(s,l){a.push(O3(o,s,l,n,i))}),a},O3=function(t,e,n,i,a){var o=[n],s=[],l={};return e.forEach(function(u,c){if(u<=a&&n!==c){o.push(c),s.push(t[c]);var f=t[c][i];l[f]?(l[f].count++,l[f].dists.push(u)):l[f]={count:1,dists:[u]}}}),Object.keys(l).forEach(function(u){l[u].dists=l[u].dists.sort(function(c,f){return c-f})}),{nodeIdx:n,nodeId:t[n].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:l}},gfe=function(t,e,n,i,a){var o=Math.ceil(n/e),s={},l=0;return i.forEach(function(u,c){for(var f=0,d=0,h=u.nodeIdxs,v=u.neighborNum-1;f<o;){for(var p=h[1+Math.floor(Math.random()*v)],g=0;(s["".concat(c,"-").concat(p)]||s["".concat(p,"-").concat(c)])&&(p=Math.floor(Math.random()*e),g++,!(g>2*e)););if(g<2*e&&(s["".concat(c,"-").concat(p)]={start:c,end:p,distance:a[c][p]},f++,l++,l>=n))return s;if(d++,d>2*e)break}if(f<o){var m=o-f;o=(o+m)/(e-c-1)}}),s},r1=function(t,e,n,i){var a=n.nodes;return i||(i={}),Object.keys(t).forEach(function(o){var s,l;if(!(i&&i[o])){i[o]={nodes:[],edges:[]};var u=t[o],c=(s=e[u.start])===null||s===void 0?void 0:s.nodeIdxs,f=(l=e[u.end])===null||l===void 0?void 0:l.nodeIdxs;if(!(!c||!f)){var d=new Set(f),h=c.filter(function(y){return d.has(y)});if(!(!h||!h.length)){for(var v={},p=h.length,g=0;g<p;g++){var m=a[h[g]];i[o].nodes.push(m),v[m.id]=!0}n.edges.forEach(function(y){v[y.source]&&v[y.target]&&i[o].edges.push(y)})}}}}),i},n1=function(t,e,n,i){var a,o,s={};t.nodes.forEach(function(u){s[u.id]=u});var l=0;return!((a=e==null?void 0:e.edges)===null||a===void 0?void 0:a.length)||((o=e==null?void 0:e.nodes)===null||o===void 0?void 0:o.length)<2?0:(t.edges.forEach(function(u){var c=s[u.source][n],f=s[u.target][n],d=e==null?void 0:e.nodes[0][n],h=e==null?void 0:e.nodes[1][n],v=e==null?void 0:e.edges[0][i];u[i]===v&&(c===d&&f===h||c===h&&f===d)&&l++}),l)},mfe=function(t,e,n){for(var i=1/0,a=0,o=function(u){var c=t[u],f=Object.keys(c).sort(function(y,b){return c[y]-c[b]}),d=10,h=[];f.forEach(function(y,b){h[b%d]||(h[b%d]={graphs:[],totalCount:0,aveCount:0}),h[b%d].graphs.push(y),h[b%d].totalCount+=c[y]});var v=0,p=[];h.forEach(function(y){var b=y.totalCount/y.graphs.length;y.aveCount=b,p.push(b);var x=0,w=y.length;y.graphs.forEach(function(S,C){var _=c[S];y.graphs.forEach(function(T,E){C!==E&&(x+=Math.abs(_-c[T]))})}),x/=w*(w-1)/2,v+=x}),v/=h.length;var g=0;p.forEach(function(y,b){p.forEach(function(x,w){b!==w&&(g+=Math.abs(y-x))}),g/=p.length*(p.length-1)/2});var m=g-v;i<m&&(i=m,a=u)},s=0;s<e;s++)o(s);return{structure:n[a],structureCountMap:t[a]}},L3=function(t,e){var n={},i={};return t.forEach(function(a,o){n[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[e];i[s]||(i[s]=[]),i[s].push(a)}),{nodeMap:n,nodeLabelMap:i}},F3=function(t,e,n){var i={},a={};return t.forEach(function(o,s){i["".concat(u3)]={idx:s,edge:o};var l=o[e];a[l]||(a[l]=[]),a[l].push(o);var u=n[o.source];u&&(u.degree++,u.outDegree++);var c=n[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:i,edgeLabelMap:a}},N3=function(t,e,n){var i=e.length,a={};return e.forEach(function(o,s){for(var l=n?0:s+1,u=t[s].id,c=l;c<i;c++)if(s!==c){var f=t[c].id,d=o[c];a["".concat(u,"-").concat(f)]=d,n||(a["".concat(f,"-").concat(u)]=d)}}),a},yfe=function(t,e,n,i,a,o,s,l,u,c,f){var d,h="".concat(e.id,"-").concat(n.id);if(c&&c[h])return c[h];var v=f?f[h]:void 0;if(!v){var p=(d={},d[h]={start:i[e.id].idx,end:i[n.id].idx,distance:a},d);f=r1(p,o,t,f),v=f[h]}return n1(v,s,l,u)},B3=function(t,e,n,i){var a,o,s,l=(a=t[e])===null||a===void 0?void 0:a.degree,u=(o=t[e])===null||o===void 0?void 0:o.inDegree,c=(s=t[e])===null||s===void 0?void 0:s.outDegree;return t[e]===void 0&&(l=1/0,u=1/0,c=1/0,i[e].forEach(function(f){var d=n[f.id].degree;l>d&&(l=d);var h=n[f.id].inDegree;u>h&&(u=h);var v=n[f.id].outDegree;c>v&&(c=v)}),t[e]={degree:l,inDegree:u,outDegree:c}),{minPatternNodeLabelDegree:l,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:c}},$3=function(t,e,n,i,a,o,s){var l;if(n===void 0&&(n=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!t||!t.nodes)){var u=t.nodes.length;if(!!u){var c=km(t,n),f=km(e,n),d=N3(t.nodes,c,n),h=N3(e.nodes,f,n),v=L3(t.nodes,o),p=v.nodeMap,g=v.nodeLabelMap,m=L3(e.nodes,o),y=m.nodeMap,b=m.nodeLabelMap;F3(t.edges,s,p);var x=F3(e.edges,s,y).edgeLabelMap,w=[];f==null||f.forEach(function(Le){w=w.concat(Le)}),a||(a=Math.max.apply(Math,oi(oi([],w,!1),[2],!1))),i||(i=a);var S=R3(t,c,o,i),C=R3(e,f,o,i),_=Math.min(100,u*(u-1)/2),T=gfe(i,u,_,C,c),E=r1(T,S,t),k=10,I=1,P=1,F=4,$={graphs:E,nodeLabelProp:o,edgeLabelProp:s,minSupport:I,minNodeNum:P,maxNodeNum:F,directed:n},R=pfe($).slice(0,k),L=R.length,O=[];R.forEach(function(Le,$e){O[$e]={},Object.keys(E).forEach(function(H){var Y=E[H],K=n1(Y,Le,o,s);O[$e][H]=K})});var B=mfe(O,L,R),U=B.structure,W=B.structureCountMap,X=e.nodes[0],ie=[],q=(l=e.nodes[0])===null||l===void 0?void 0:l[o],j=-1/0;e.nodes.forEach(function(Le){var $e=Le[o],H=g[$e];(H==null?void 0:H.length)>j&&(j=H.length,ie=H,q=$e,X=Le)});var fe={},se={},ce={},_e={},Me={},Ye={};Object.keys(b).forEach(function(Le,$e){Me[Le]=[],n&&(Ye[Le]=[]);var H=b[Le],Y={};H.forEach(function(Ve){var Ge=h["".concat(X.id,"-").concat(Ve.id)];if(Ge&&Me[Le].push(Ge),Y["".concat(X.id,"-").concat(Ve.id)]={start:0,end:y[Ve.id].idx,distance:Ge},n){var rt=h["".concat(Ve.id,"-").concat(X.id)];rt&&Ye[Le].push(rt)}}),Me[Le]=Me[Le].sort(function(Ve,Ge){return Ve-Ge}),n&&(Ye[Le]=Ye[Le].sort(function(Ve,Ge){return Ve-Ge})),se=r1(Y,C,e,se);var K=[];if(Object.keys(Y).forEach(function(Ve){if(ce[Ve]){K.push(ce[Ve]);return}var Ge=se[Ve];ce[Ve]=n1(Ge,U,o,s),K.push(ce[Ve])}),K=K.sort(function(Ve,Ge){return Ge-Ve}),_e["".concat(X.id,"-").concat(Le)]=K,Le!==q)for(var ee=(ie==null?void 0:ie.length)||0,J=function(Ge){var rt=ie[Ge],Se=S[p[rt.id].idx],ye=Se.nodeLabelCountMap[Le],Re=b[Le].length;if(!ye||ye.count<Re)return ie.splice(Ge,1),"continue";for(var St=!1,kt=0;kt<Re;kt++)if(ye.dists[kt]>Me[Le][kt]){St=!0;break}if(St)return ie.splice(Ge,1),"continue";var Ae={};Se.neighbors.forEach(function(Ne){var vt=d["".concat(rt.id,"-").concat(Ne.id)];Ae["".concat(rt.id,"-").concat(Ne.id)]={start:p[rt.id].idx,end:p[Ne.id].idx,distance:vt}}),E=r1(Ae,S,t,E);var ut=[];Object.keys(Ae).forEach(function(Ne){if(W[Ne]){ut.push(W[Ne]);return}var vt=E[Ne];W[Ne]=n1(vt,U,o,s),ut.push(W[Ne])}),ut=ut.sort(function(Ne,vt){return vt-Ne});for(var cr=!1,kt=0;kt<Re;kt++)if(ut[kt]<K[kt]){cr=!0;break}if(cr)return ie.splice(Ge,1),"continue"},ge=ee-1;ge>=0;ge--)J(ge)});var De=[];ie==null||ie.forEach(function(Le){for(var $e=p[Le.id].idx,H=O3(t.nodes,c[$e],$e,o,a),Y=H.neighbors,K=Y.length,ee=!1,J=K-1;J>=0;J--){if(Y.length+1<e.nodes.length){ee=!0;return}var ge=Y[J],Ve=ge[o];if(!b[Ve]||!b[Ve].length){Y.splice(J,1);continue}if(!Me[Ve]||!Me[Ve].length){Y.splice(J,1);continue}var Ge="".concat(Le.id,"-").concat(ge.id),rt=d[Ge],Se=Me[Ve].length-1,ye=Me[Ve][Se];if(rt>ye){Y.splice(J,1);continue}if(n){var Re="".concat(ge.id,"-").concat(Le.id),St=d[Re];Se=Ye[Ve].length-1;var kt=Ye[Ve][Se];if(St>kt){Y.splice(J,1);continue}}var Ae=W[Ge]?W[Ge]:yfe(t,Le,ge,p,rt,S,U,o,s,W,E),ut="".concat(X.id,"-").concat(Ve),cr=_e[ut][_e[ut].length-1];if(Ae<cr){Y.splice(J,1);continue}var Ne=B3(fe,Ve,y,b),vt=Ne.minPatternNodeLabelDegree;if(Ne.minPatternNodeLabelInDegree,Ne.minPatternNodeLabelOutDegree,p[ge.id].degree<vt){Y.splice(J,1);continue}}ee||De.push({nodes:[Le].concat(Y)})});var D=Am(e,X.id,!1).length,z={};n?(Object.keys(D).forEach(function(Le){var $e=y[Le].node[o];z[$e]?z[$e].push(D[Le]):z[$e]=[D[Le]]}),Object.keys(z).forEach(function(Le){z[Le].sort(function($e,H){return $e-H})})):z=Me;for(var V=De.length,he=function($e){var H=De[$e],Y=H.nodes[0],K={},ee={};H.nodes.forEach(function(hr,Wr){ee[hr.id]={idx:Wr,node:hr,degree:0,inDegree:0,outDegree:0};var xr=hr[o];K[xr]?K[xr]++:K[xr]=1});var J=[],ge={};t.edges.forEach(function(hr){ee[hr.source]&&ee[hr.target]&&(J.push(hr),ge[hr[s]]?ge[hr[s]]++:ge[hr[s]]=1,ee[hr.source].degree++,ee[hr.target].degree++,ee[hr.source].outDegree++,ee[hr.target].inDegree++)});for(var Ve=Object.keys(x).length,Ge=!1,rt=0;rt<Ve;rt++){var Se=Object.keys(x)[rt];if(!ge[Se]||ge[Se]<x[Se].length){Ge=!0;break}}if(Ge)return De.splice($e,1),"continue";var ye=J.length;if(ye<e.edges.length)return De.splice($e,1),"break";for(var Re=!1,St=function(Wr){var xr=J[Wr],dn=xr[s],Pr=x[dn];if(!Pr||!Pr.length)return ge[dn]--,Pr&&ge[dn]<Pr.length?(Re=!0,"break"):(J.splice(Wr,1),ee[xr.source].degree--,ee[xr.target].degree--,ee[xr.source].outDegree--,ee[xr.target].inDegree--,"continue");var Xn=ee[xr.source].node[o],ra=ee[xr.target].node[o],yo=!1;if(Pr.forEach(function(es){var ts=y[es.source].node,Do=y[es.target].node;ts[o]===Xn&&Do[o]===ra&&(yo=!0),!n&&ts[o]===ra&&Do[o]===Xn&&(yo=!0)}),!yo)return ge[dn]--,Pr&&ge[dn]<Pr.length?(Re=!0,"break"):(J.splice(Wr,1),ee[xr.source].degree--,ee[xr.target].degree--,ee[xr.source].outDegree--,ee[xr.target].inDegree--,"continue")},rt=ye-1;rt>=0;rt--){var kt=St(rt);if(kt==="break")break}if(Re)return De.splice($e,1),"continue";H.edges=J;var Ae=Am(H,H.nodes[0].id,!1).length;if(Object.keys(Ae).reverse().forEach(function(hr){if(!(hr===H.nodes[0].id||Re)){if(Ae[hr]===1/0){var Wr=ee[hr].node[o];if(K[Wr]--,K[Wr]<b[Wr].length){Re=!0;return}var xr=H.nodes.indexOf(ee[hr].node);H.nodes.splice(xr,1),ee[hr]=void 0;return}var dn=p[hr].node[o];if(!z[dn]||!z[dn].length||Ae[hr]>z[dn][z[dn].length-1]){var Wr=ee[hr].node[o];if(K[Wr]--,K[Wr]<b[Wr].length){Re=!0;return}var xr=H.nodes.indexOf(ee[hr].node);H.nodes.splice(xr,1),ee[hr]=void 0}}}),Re)return De.splice($e,1),"continue";for(var ut=!0,cr=0;ut&&!Re;){ut=!1;var Ne=n?ee[Y.id].degree<y[X.id].degree||ee[Y.id].inDegree<y[X.id].inDegree||ee[Y.id].outDegree<y[X.id].outDegree:ee[Y.id].degree<y[X.id].degree;if(Ne){Re=!0;break}if(K[Y[o]]<b[Y[o]].length){Re=!0;break}for(var vt=H.nodes.length,Ft=vt-1;Ft>=0;Ft--){var vr=H.nodes[Ft],zr=ee[vr.id].degree,or=ee[vr.id].inDegree,qe=ee[vr.id].outDegree,st=vr[o],Rt=B3(fe,st,y,b),Nt=Rt.minPatternNodeLabelDegree,sr=Rt.minPatternNodeLabelInDegree,fn=Rt.minPatternNodeLabelOutDegree,on=n?zr<Nt||or<sr||qe<fn:zr<Nt;if(on){if(K[vr[o]]--,K[vr[o]]<b[vr[o]].length){Re=!0;break}H.nodes.splice(Ft,1),ee[vr.id]=void 0,ut=!0}}if(Re||!ut&&cr!==0)break;ye=J.length;for(var ln=ye-1;ln>=0;ln--){var Pn=J[ln];if(!ee[Pn.source]||!ee[Pn.target]){J.splice(ln,1);var jr=Pn[s];if(ge[jr]--,ee[Pn.source]&&(ee[Pn.source].degree--,ee[Pn.source].outDegree--),ee[Pn.target]&&(ee[Pn.target].degree--,ee[Pn.target].inDegree--),x[jr]&&ge[jr]<x[jr].length){Re=!0;break}ut=!0}}cr++}if(Re||Re||H.nodes.length<e.nodes.length||J.length<e.edges.length)return De.splice($e,1),"continue"},re=V-1;re>=0;re--){var pe=he(re);if(pe==="break")break}for(var Je=De.length,We=function($e){var H=De[$e],Y={};H.edges.forEach(function(J){var ge="".concat(J.source,"-").concat(J.target,"-").concat(J.label);Y[ge]?Y[ge]++:Y[ge]=1});for(var K=function(ge){var Ve=De[ge],Ge={};Ve.edges.forEach(function(Se){var ye="".concat(Se.source,"-").concat(Se.target,"-").concat(Se.label);Ge[ye]?Ge[ye]++:Ge[ye]=1});var rt=!0;Object.keys(Ge).length!==Object.keys(Y).length?rt=!1:Object.keys(Y).forEach(function(Se){Ge[Se]!==Y[Se]&&(rt=!1)}),rt&&De.splice(ge,1)},ee=Je-1;ee>$e;ee--)K(ee);Je=De.length},re=0;re<=Je-1;re++)We(re);return De}}},i1=function(){function r(t){t===void 0&&(t=10),this.linkedList=new l3,this.maxStep=t}return Object.defineProperty(r.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},r.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},r.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},r.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},r.prototype.toArray=function(){return this.linkedList.toArray().map(function(t){return t.value})},r.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},r}(),z3=IT,bfe={getAdjMatrix:cd,breadthFirstSearch:c3,connectedComponent:kT,getDegree:Ac,getInDegree:d3,getOutDegree:h3,detectCycle:IT,detectDirectedCycle:z3,detectAllCycles:p3,detectAllDirectedCycle:DT,detectAllUndirectedCycle:PT,depthFirstSearch:MT,dijkstra:Am,findAllPath:y3,findShortestPath:m3,floydWarshall:km,labelPropagation:b3,louvain:C3,minimumSpanningTree:_3,pageRank:T3,getNeighbors:fs,Stack:i1,GADDI:$3},xfe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getAdjMatrix:cd,breadthFirstSearch:c3,connectedComponent:kT,getDegree:Ac,getInDegree:d3,getOutDegree:h3,detectCycle:IT,detectDirectedCycle:z3,detectAllCycles:p3,detectAllDirectedCycle:DT,detectAllUndirectedCycle:PT,depthFirstSearch:MT,dijkstra:Am,findAllPath:y3,findShortestPath:m3,floydWarshall:km,labelPropagation:b3,louvain:C3,minimumSpanningTree:_3,pageRank:T3,getNeighbors:fs,Stack:i1,GADDI:$3,default:bfe}),a1=Zn,wfe=function(t){return function(e,n){return e[t]-n[t]}},G3=function(t,e,n){return t>=e&&t<=n},o1=function(t,e,n,i){var a=1e-4,o={x:n.x-t.x,y:n.y-t.y},s={x:e.x-t.x,y:e.y-t.y},l={x:i.x-n.x,y:i.y-n.y},u=s.x*l.y-s.y*l.x,c=u*u,f=1/u,d=s.x*s.x+s.y*s.y,h=l.x*l.x+l.y*l.y;if(c>a*d*h){var v=(o.x*l.y-o.y*l.x)*f,p=(o.x*s.y-o.y*s.x)*f;return!G3(v,0,1)||!G3(p,0,1)?null:{x:t.x+v*s.x,y:t.y+v*s.y}}return null},U3=function(t,e){var n=t.x,i=t.y,a=t.width,o=t.height,s=n+a/2,l=i+o/2,u=[],c={x:s,y:l};u.push({x:n,y:i}),u.push({x:n+a,y:i}),u.push({x:n+a,y:i+o}),u.push({x:n,y:i+o}),u.push({x:n,y:i});for(var f=null,d=1;d<u.length&&(f=o1(u[d-1],u[d],c,e),!f);d++);return f},V3=function(t,e){var n=t.x,i=t.y,a=t.r,o=e.x,s=e.y,l=o-n,u=s-i;if(l*l+u*u<a*a)return null;var c=Math.atan(u/l);return{x:n+Math.abs(a*Math.cos(c))*Math.sign(l),y:i+Math.abs(a*Math.sin(c))*Math.sign(u)}},H3=function(t,e){var n=t.rx,i=t.ry,a=t.x,o=t.y,s=e.x-a,l=e.y-o,u=Math.atan2(l/i,s/n);return u<0&&(u+=2*Math.PI),{x:a+n*Math.cos(u),y:o+i*Math.sin(u)}},s1=function(t,e,n){n===void 0&&(n=1);var i=[t.x,t.y,n];return(!e||isNaN(e[0]))&&(e=[1,0,0,0,1,0,0,0,1]),Pl(i,i,e),{x:i[0],y:i[1]}},W3=function(t,e,n){n===void 0&&(n=1),(!e||isNaN(e[0]))&&(e=[1,0,0,0,1,0,0,0,1]);var i=Xx([1,0,0,0,1,0,0,0,1],e);i||(i=[1,0,0,0,1,0,0,0,1]);var a=[t.x,t.y,n];return Pl(a,a,i),{x:a[0],y:a[1]}},OT=function(t,e,n){var i=t.x-e.x,a=t.y-e.y,o=t.x-n.x,s=t.y-n.y,l=(t.x*t.x-e.x*e.x-e.y*e.y+t.y*t.y)/2,u=(t.x*t.x-n.x*n.x-n.y*n.y+t.y*t.y)/2,c=a*o-i*s;return{x:-(s*l-a*u)/c,y:-(i*u-o*l)/c}},l1=function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)},Sfe=function(t,e){var n=[];return t.forEach(function(i){var a=[];i.forEach(function(o){a.push(o*e)}),n.push(a)}),n},Cfe=function(t){for(var e=[],n=t.length,i=0;i<n;i+=1){e[i]=[];for(var a=0;a<n;a+=1)i===a?e[i][a]=0:t[i][a]===0||!t[i][a]?e[i][a]=1/0:e[i][a]=t[i][a]}for(var o=0;o<n;o+=1)for(var i=0;i<n;i+=1)for(var a=0;a<n;a+=1)e[i][a]>e[i][o]+e[o][a]&&(e[i][a]=e[i][o]+e[o][a]);return e},Efe=function(t,e){var n=t.nodes,i=t.edges,a=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.source,u=s.target,c=o[l],f=o[u];a[c][f]=1,e||(a[f][c]=1)}),a},j3=function(t,e){t.translate(e.x,e.y)},Y3=function(t,e,n,i){i===void 0&&(i={duration:500});var a=t.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=t.getCanvasBBox(),s=e.x-o.minX,l=e.y-o.minY;if(n){var u=s*a[0],c=l*a[4],f=0,d=0,h=0,v=0;t.animate(function(g){return h=u*g,v=c*g,a=a1(a,[["t",h-f,v-d]]),f=h,d=v,{matrix:a}},i)}else{var p=a1(a,[["t",s,l]]);t.setMatrix(p)}},_fe=function(t,e){var n=t.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=e;Qe(e)||(i=[e,e]),Qe(e)&&e.length===1&&(i=[e[0],e[0]]),n=a1(n,[["s",i[0],i[1]]]),t.setMatrix(n)},Tfe=function(t,e){var n=t.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]),n=a1(n,[["r",e]]),t.setMatrix(n)},Afe=function(t,e,n){for(var i=[],a=0;a<t;a++)i[a]=0;return n.forEach(function(o){o.source&&(i[e[o.source]]+=1),o.target&&(i[e[o.target]]+=1)}),i};function kfe(r,t,e){return(e[0]-r[0])*(t[1]-r[1])==(t[0]-r[0])*(e[1]-r[1])&&Math.min(r[0],t[0])<=e[0]&&e[0]<=Math.max(r[0],t[0])&&Math.min(r[1],t[1])<=e[1]&&e[1]<=Math.max(r[1],t[1])}var Im=function(t,e,n){var i=!1,a=t.length,o=1e-6;function s(f){return Math.abs(f)<o?0:f<0?-1:1}if(a<=2)return!1;for(var l=0;l<a;l++){var u=t[l],c=t[(l+1)%a];if(kfe(u,c,[e,n]))return!0;s(u[1]-n)>0!=s(c[1]-n)>0&&s(e-(n-u[1])*(u[0]-c[0])/(u[1]-c[1])-u[0])<0&&(i=!i)}return i},X3=function(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)},Mfe=function(t,e){var n=!1;return G(t,function(i){if(o1(i.from,i.to,e.from,e.to))return n=!0,!1}),n},q3=function(t,e){var n=function(d){var h=d.map(function(p){return p[0]}),v=d.map(function(p){return p[1]});return{minX:Math.min.apply(null,h),maxX:Math.max.apply(null,h),minY:Math.min.apply(null,v),maxY:Math.max.apply(null,v)}},i=function(d){for(var h=[],v=d.length,p=0;p<v-1;p++){var g=d[p],m=d[p+1];h.push({from:{x:g[0],y:g[1]},to:{x:m[0],y:m[1]}})}if(h.length>1){var y=d[0],b=d[v-1];h.push({from:{x:b[0],y:b[1]},to:{x:y[0],y:y[1]}})}return h};if(t.length<2||e.length<2)return!1;var a=n(t),o=n(e);if(!X3(a,o))return!1;var s=!1;if(G(e,function(f){if(Im(t,f[0],f[1]))return s=!0,!1}),s||(G(t,function(f){if(Im(e,f[0],f[1]))return s=!0,!1}),s))return!0;var l=i(t),u=i(e),c=!1;return G(u,function(f){if(Mfe(l,f))return c=!0,!1}),c},dd=function(){function r(t,e,n,i){this.x1=t,this.y1=e,this.x2=n,this.y2=i}return r.prototype.getBBox=function(){var t=Math.min(this.x1,this.x2),e=Math.min(this.y1,this.y2),n=Math.max(this.x1,this.x2),i=Math.max(this.y1,this.y2),a={x:t,y:e,minX:t,minY:e,maxX:n,maxY:i,width:n-t,height:i-e};return a},r}(),LT=function(t,e){var n={top:[t.minX,t.minY,t.maxX,t.minY],left:[t.minX,t.minY,t.minX,t.maxY],bottom:[t.minX,t.maxY,t.maxX,t.maxY],right:[t.maxX,t.minY,t.maxX,t.maxY]};return n[e]},Ife=function(t,e){var n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),i=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),a=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(a){var o=n/a,s=i/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},K3=function(t,e){for(var n=["top","left","bottom","right"],i=t.getBBox(),a=0,o=[],s=0;s<4;s++){var l=LT(i,n[s]),u=l[0],c=l[1],f=l[2],d=l[3];o[s]=o1({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:u,y:c},{x:f,y:d}),o[s]&&(a+=1)}return[o,a]},FT=function(t,e){for(var n=["top","left","bottom","right"],i=t.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var l=LT(i,n[s]),u=l[0],c=l[1],f=l[2],d=l[3],h=Ife(e,new dd(u,c,f,d));h=Math.abs(h-.5),h>=0&&h<=1&&(o+=1,a=h<a?h:a)}return o===0?-1:a},Z3=function(t){var e=0,n=0;if(t.length>0){for(var i=0,a=t;i<a.length;i++){var o=a[i];e+=o.x,n+=o.y}e/=t.length,n/=t.length}return{x:e,y:n}},u1=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},Q3=function(t,e){var n=e.x1,i=e.y1,a=e.x2-n,o=e.y2-i,s=t.x-n,l=t.y-i,u=s*a+l*o,c;u<=0?c=0:(s=a-s,l=o-l,u=s*a+l*o,u<=0?c=0:c=u*u/(a*a+o*o));var f=s*s+l*l-c;return f<0&&(f=0),f},NT=function(t,e,n){return n===void 0&&(n=.001),Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<Math.pow(n,2)},J3=function(t,e){var n=t.x<e.x,i=t.x>e.x+e.width,a=t.y>e.y+e.height,o=t.y<e.y,s=n||i||a||o;if(!s)return 0;if(a&&!n&&!i)return Math.pow(e.y+e.height-t.y,2);if(o&&!n&&!i)return Math.pow(t.y-e.y,2);if(n&&!a&&!o)return Math.pow(e.x-t.x,2);if(i&&!a&&!o)return Math.pow(e.x+e.width-t.x,2);var l=Math.min(Math.abs(e.x-t.x),Math.abs(e.x+e.width-t.x)),u=Math.min(Math.abs(e.y-t.y),Math.abs(e.y+e.height-t.y));return l*l+u*u},Pfe=function(t,e){var n=t[0],i=t[1],a=t[2],o=t[3],s=e.x,l=e.y,u=[a-n,o-i];if(a3(u,[0,0]))return NaN;var c=[-u[1],u[0]];Tc(c,c);var f=[s-n,l-i];return Math.abs(ET(f,c))},e5=function(t,e,n){return t+(e-t)*n},Dfe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",compare:wfe,getLineIntersect:o1,getRectIntersectByPoint:U3,getCircleIntersectByPoint:V3,getEllipseIntersectByPoint:H3,applyMatrix:s1,invertMatrix:W3,getCircleCenterByPoints:OT,distance:l1,scaleMatrix:Sfe,floydWarshall:Cfe,getAdjMatrix:Efe,translate:j3,move:Y3,scale:_fe,rotate:Tfe,getDegree:Afe,isPointInPolygon:Im,intersectBBox:X3,isPolygonsIntersect:q3,Line:dd,getBBoxBoundLine:LT,itemIntersectByLine:K3,fractionToLine:FT,getPointsCenter:Z3,squareDist:u1,pointLineSquareDist:Q3,isPointsOverlap:NT,pointRectSquareDist:J3,pointLineDistance:Pfe,lerp:e5}),kc="rgb(95, 149, 255)",Rfe="rgb(255, 255, 255)",t5="rgb(0, 0, 0)",BT="rgb(247, 250, 255)",r5="rgb(239, 244, 255)",c1="rgb(253, 253, 253)",n5="rgb(250, 250, 250)",f1="rgb(224, 224, 224)",i5="rgb(234, 234, 234)",Ofe="rgb(245, 245, 245)",Lfe="rgb(191, 213, 255)",a5="#4572d9",Ffe="rgb(223, 234, 255)",bn={mainStroke:kc,mainFill:r5,activeStroke:kc,activeFill:BT,inactiveStroke:Lfe,inactiveFill:BT,selectedStroke:kc,selectedFill:Rfe,highlightStroke:a5,highlightFill:Ffe,disableStroke:f1,disableFill:n5,edgeMainStroke:f1,edgeActiveStroke:kc,edgeInactiveStroke:i5,edgeSelectedStroke:kc,edgeHighlightStroke:kc,edgeDisableStroke:Ofe,comboMainStroke:f1,comboMainFill:c1,comboActiveStroke:kc,comboActiveFill:BT,comboInactiveStroke:f1,comboInactiveFill:c1,comboSelectedStroke:kc,comboSelectedFill:c1,comboHighlightStroke:a5,comboHighlightFill:c1,comboDisableStroke:i5,comboDisableFill:n5},ir={version:"0.5.0",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:bn.mainStroke,fill:r5},size:20,color:bn.mainStroke,linkPoints:{size:8,lineWidth:1,fill:bn.activeFill,stroke:bn.activeStroke}},nodeStateStyles:{active:{fill:bn.activeFill,stroke:bn.activeStroke,lineWidth:2,shadowColor:bn.mainStroke,shadowBlur:10},selected:{fill:bn.selectedFill,stroke:bn.selectedStroke,lineWidth:4,shadowColor:bn.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:bn.highlightFill,stroke:bn.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:bn.inactiveFill,stroke:bn.inactiveStroke,lineWidth:1},disable:{fill:bn.disableFill,stroke:bn.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:t5,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:bn.edgeMainStroke,lineAppendWidth:2},color:bn.edgeMainStroke},edgeStateStyles:{active:{stroke:bn.edgeActiveStroke,lineWidth:1},selected:{stroke:bn.edgeSelectedStroke,lineWidth:2,shadowColor:bn.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:bn.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:bn.edgeInactiveStroke,lineWidth:1},disable:{stroke:bn.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:t5,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:bn.comboMainFill,lineWidth:1,stroke:bn.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:bn.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:bn.comboActiveStroke,lineWidth:1,fill:bn.comboActiveFill},selected:{stroke:bn.comboSelectedStroke,lineWidth:2,fill:bn.comboSelectedFill,shadowColor:bn.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:bn.comboHighlightStroke,lineWidth:2,fill:bn.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:bn.comboInactiveStroke,fill:bn.comboInactiveFill,lineWidth:1},disable:{stroke:bn.comboDisableStroke,fill:bn.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},Nfe={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,"0":.6,"1":.40099945068359377,"2":.6,"3":.6,"4":.6,"5":.6,"6":.6,"7":.5469985961914062,"8":.6,"9":.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Rl=Math.PI,$T=Math.sin,zT=Math.cos,$a=$T(Rl/8),za=zT(Rl/8),d1=function(t,e){var n=t.getBBox(),i={x:n.minX,y:n.minY},a={x:n.maxX,y:n.maxY};if(e){var o=e.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),i=s1(i,o),a=s1(a,o)}var s=i.x,l=i.y,u=a.x,c=a.y;return{x:s,y:l,minX:s,minY:l,maxX:u,maxY:c,width:u-s,height:c-l}},o5=function(t){var e=t.sourceNode||t.targetNode,n=e.get("group"),i=n.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var a=e.getKeyShape(),o=a.getBBox(),s=t.loopCfg||{},l=s.dist||Math.max(o.width,o.height)*2,u=s.position||ir.defaultLoopPosition,c=[i[6],i[7]],f=[t.startPoint.x,t.startPoint.y],d=[t.endPoint.x,t.endPoint.y],h=o.height/2,v=o.height/2,p=h*$a,g=h*za,m=v*$a,y=v*za;if(f[0]===d[0]&&f[1]===d[1]){switch(u){case"top":f=[c[0]-p,c[1]-g],d=[c[0]+m,c[1]-y];break;case"top-right":h=o.height/2,v=o.width/2,p=h*$a,g=h*za,m=v*$a,y=v*za,f=[c[0]+p,c[1]-g],d=[c[0]+y,c[1]-m];break;case"right":h=o.width/2,v=o.width/2,p=h*$a,g=h*za,m=v*$a,y=v*za,f=[c[0]+g,c[1]-p],d=[c[0]+y,c[1]+m];break;case"bottom-right":h=o.width/2,v=o.height/2,p=h*$a,g=h*za,m=v*$a,y=v*za,f=[c[0]+g,c[1]+p],d=[c[0]+m,c[1]+y];break;case"bottom":h=o.height/2,v=o.height/2,p=h*$a,g=h*za,m=v*$a,y=v*za,f=[c[0]+p,c[1]+g],d=[c[0]-m,c[1]+y];break;case"bottom-left":h=o.height/2,v=o.width/2,p=h*$a,g=h*za,m=v*$a,y=v*za,f=[c[0]-p,c[1]+g],d=[c[0]-y,c[1]+m];break;case"left":h=o.width/2,v=o.width/2,p=h*$a,g=h*za,m=v*$a,y=v*za,f=[c[0]-g,c[1]+p],d=[c[0]-y,c[1]-m];break;case"top-left":h=o.width/2,v=o.height/2,p=h*$a,g=h*za,m=v*$a,y=v*za,f=[c[0]-g,c[1]-p],d=[c[0]-m,c[1]-y];break;default:h=o.width/2,v=o.width/2,p=h*$a,g=h*za,m=v*$a,y=v*za,f=[c[0]-p,c[1]-g],d=[c[0]+m,c[1]-y]}if(s.clockwise===!1){var b=[f[0],f[1]];f=[d[0],d[1]],d=[b[0],b[1]]}}var x=[f[0]-c[0],f[1]-c[1]],w=(h+l)/h,S=(v+l)/v;s.clockwise===!1&&(w=(v+l)/v,S=(h+l)/h);var C=gi([0,0],x,w),_=[c[0]+C[0],c[1]+C[1]],T=[d[0]-c[0],d[1]-c[1]],E=gi([0,0],T,S),k=[c[0]+E[0],c[1]+E[1]];return t.startPoint={x:f[0],y:f[1]},t.endPoint={x:d[0],y:d[1]},t.controlPoints=[{x:_[0],y:_[1]},{x:k[0],y:k[1]}],t},GT=function(t,e,n,i,a){var o=1e-4,s=[],l=t==null?void 0:t.getPoint(e);if(!l)return{x:0,y:0,angle:0};if(e<o)s=t.getStartTangent().reverse();else if(e>1-o)s=t.getEndTangent();else{var u=t==null?void 0:t.getPoint(e+o);s.push([l.x,l.y]),s.push([u.x,u.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=Rl*2),n&&(l.x+=zT(c)*n,l.y+=$T(c)*n),i){var f=c-Rl/2;c>1/2*Rl&&c<3*1/2*Rl&&(f-=Rl),l.x+=zT(f)*i,l.y+=$T(f)*i}var d={x:l.x,y:l.y,angle:c};return a?(c>.5*Rl&&c<1.5*Rl&&(c-=Rl),A({rotate:c},d)):d},s5=function r(t,e){if(e(t)===!1)return!1;if(t&&t.children){for(var n=t.children.length-1;n>=0;n--)if(!r(t.children[n],e))return!1}return!0},Bfe=function r(t,e){if(t&&t.children){for(var n=t.children.length-1;n>=0;n--)if(!r(t.children[n],e))return}return e(t)!==!1},ds=function(t,e){typeof e=="function"&&s5(t,e)},Mc=function(t,e){typeof e=="function"&&Bfe(t,e)},l5=function(t,e){return e*(Nfe[t]||1)},u5=function(t,e){var n=0,i=new RegExp("[\u4E00-\u9FA5]+");return t.split("").forEach(function(a){i.test(a)?n+=e:n+=l5(a,e)}),[n,e]},UT=function(t,e){var n=[],i={},a={};t.forEach(function(l){a[l.id]=l}),t.forEach(function(l,u){var c=Or(l);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo "+c.id+" can not be the same as the combo's id"),delete c.parentId):c.parentId&&!a[c.parentId]&&(console.warn("The parent combo for combo "+c.id+" does not exist!"),delete c.parentId);var f=i[c.id];if(f){if(c.children=f.children,i[c.id]=c,f=c,!f.parentId){n.push(f);return}var d=i[f.parentId];if(d)d.children?d.children.push(c):d.children=[c];else{var h={id:f.parentId,children:[f]};i[f.parentId]=h,i[c.id]=c}return}if(ot(l.parentId)){var v=i[l.parentId];if(v)v.children?v.children.push(c):v.children=[c],i[c.id]=c;else{var p={id:l.parentId,children:[c]};i[p.id]=p,i[c.id]=c}}else n.push(c),i[c.id]=c});var o={};(e||[]).forEach(function(l){o[l.id]=l;var u=i[l.comboId];if(u){var c={id:l.id,comboId:l.comboId};u.children?u.children.push(c):u.children=[c],c.itemType="node",i[l.id]=c}});var s=0;return n.forEach(function(l){l.depth=s+10,s5(l,function(u){var c,f=i[u.id].itemType;f==="node"?c=i[u.comboId]:c=i[u.parentId],c&&f==="node"?u.depth=s+1:u.depth=s+10,s<u.depth&&(s=u.depth);var d=o[u.id];return d&&(d.depth=u.depth),!0})}),n},VT=function(t,e,n){var i=t,a,o={root:{children:t}},s=!1,l="root";(t||[]).forEach(function(h){if(!s){if(h.id===e){a=h,h.itemType==="combo"?a.parentId=n:a.comboId=n,s=!0;return}ds(h,function(v){return o[v.id]={children:v.children},i=o[v.parentId||v.comboId||"root"].children,v&&(v.removed||e===v.id)&&i?(l=v.parentId||v.comboId||"root",a=v,v.itemType==="combo"?a.parentId=n:a.comboId=n,s=!0,!1):!0})}}),i=o[l].children;var u=i?i.indexOf(a):-1;if(u>-1&&i.splice(u,1),s||(a={id:e,itemType:"node",comboId:n},o[e]={children:void 0}),e){var c=!1;if(n){var f=0;(t||[]).forEach(function(h){c||ds(h,function(v){return n===v.id?(c=!0,v.children?v.children.push(a):v.children=[a],f=v.depth,a.itemType==="node"?a.depth=f+2:a.depth=f+1,!1):!0})})}else(!n||!c)&&a.itemType!=="node"&&t.push(a);var d=a.depth;ds(a,function(h){return h.itemType==="node"?d+=2:d+=1,h.depth=d,!0})}return t},Pm=function(t,e){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return!t||t.length===0||(t.forEach(function(i){var a=e.findById(i.id);if(!(!a||!a.isVisible())){a.set("bboxCanvasCache",void 0);var o=a.getCanvasBBox();o.x&&n.minX>o.minX&&(n.minX=o.minX),o.y&&n.minY>o.minY&&(n.minY=o.minY),o.x&&n.maxX<o.maxX&&(n.maxX=o.maxX),o.y&&n.maxY<o.maxY&&(n.maxY=o.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,Object.keys(n).forEach(function(i){(n[i]===1/0||n[i]===-1/0)&&(n[i]=void 0)})),n},$fe=function(t){var e=zt(t.x)||zt(t.y)||t.type||t.anchorPoints||t.size;return t.style&&(e=e||zt(t.style.r)||zt(t.style.width)||zt(t.style.height)||zt(t.style.rx)||zt(t.style.ry)),e},h1=function(t){var e={};return Object.keys(t).forEach(function(n){var i=t[n];if(an(i)&&!Qe(i)){var a={};Object.keys(i).forEach(function(o){var s=i[o];o==="img"&&!ot(s)||(a[o]=Or(s))}),e[n]=a}else e[n]=Or(i)}),e},zfe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getBBox:d1,getLoopCfgs:o5,getLabelPosition:GT,traverseTree:ds,traverseTreeUp:Mc,getLetterWidth:l5,getTextSize:u5,plainCombosToTrees:UT,reconstructTree:VT,getComboBBox:Pm,shouldRefreshEdge:$fe,cloneBesidesImg:h1}),c5=function(t){var e;if(!t)return console.error("G6 Error Tips: the data must be defined"),!1;var n=t.nodes,i=t.edges,a=t.combos,o=a===void 0?[]:a;if(!n&&!i){var s=!0;return ds(t,function(h){return ot(h.id)?!0:(s=!1,!1)}),s}var l=(n||[]).find(function(h){return!ot(h.id)});if(l)return console.warn("G6 Warning Tips: missing 'id' property, or %c"+l.id+"%c is not a string.","font-size: 20px; color: red;",""),!1;var u=(n||[]).map(function(h){return h.id}),c=(e=o)===null||e===void 0?void 0:e.map(function(h){return h.id}),f=oi(oi([],u,!0),c,!0),d=(i||[]).find(function(h){return!f.includes(h.source)||!f.includes(h.target)});return d?(console.warn("G6 Warning Tips: The source %c"+d.source+"%c or the target %c"+d.target+"%c of the edge do not exist in the nodes or combos.","font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},Gfe=function(t,e){if(t==="node"||t==="combo"){if(e.id&&!ot(e.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c"+e.id+"%c is not a string.","font-size: 20px; color: red;",""),!1}else if(t==="edge"&&(!e.source||!e.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},Ufe=function(){function r(t){this.graph=t,this.destroyed=!1,this.modes=t.get("modes")||{default:[]},this.formatModes(),this.mode=t.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return r.prototype.formatModes=function(){var t=this.modes;G(t,function(e){G(e,function(n,i){ot(n)&&(e[i]={type:n})})})},r.prototype.setBehaviors=function(t){var e=this.graph,n=this.modes[t],i=[],a;G(n||[],function(o){var s=WB.getBehavior(o.type||o);!s||(a=new s(o),a&&(a.bind(e),i.push(a)))}),this.currentBehaves=i},r.mergeBehaviors=function(t,e){return G(e,function(n){t.indexOf(n)<0&&(ot(n)&&(n={type:n}),t.push(n))}),t},r.filterBehaviors=function(t,e){var n=[];return t.forEach(function(i){var a="";ot(i)?a=i:a=i.type,e.indexOf(a)<0&&n.push(i)}),n},r.prototype.setMode=function(t){var e=this,n=e.modes,i=e.graph,a=t,o=n[a];!o||(i.emit("beforemodechange",{mode:t}),G(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(i)}),this.setBehaviors(a),i.emit("aftermodechange",{mode:t}),this.mode=t)},r.prototype.getMode=function(){return this.mode},r.prototype.manipulateBehaviors=function(t,e,n){var i=this,a;if(Qe(t)?a=t:a=[t],Qe(e))return G(e,function(s){i.modes[s]?n?i.modes[s]=r.mergeBehaviors(i.modes[s]||[],a):i.modes[s]=r.filterBehaviors(i.modes[s]||[],a):n&&(i.modes[s]=a)}),this;var o=e;return e||(o=this.mode),this.modes[o]||n&&(this.modes[o]=a),n?this.modes[o]=r.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=r.filterBehaviors(this.modes[o]||[],a),this.formatModes(),this.setMode(this.mode),this},r.prototype.updateBehavior=function(t,e,n){ot(t)&&(t={type:t});var i=[];if(!n||n===this.mode||n==="default"){if(i=this.currentBehaves,!i||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=i.length,o=0;o<a;o++){var s=i[o];if(s.type===t.type)return s.updateCfg(e),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(i=this.modes[n],!i||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var l=i.length,o=0;o<l;o++){var s=i[o];if(s.type===t.type||s===t.type)return s===t.type&&(s={type:s}),Object.assign(s,e),i[o]=s,this;o===l-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},r.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},r}(),Dm=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Vfe=new RegExp("([a-z])["+Dm+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Dm+"]*,?["+Dm+"]*)+)","ig"),Hfe=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Dm+"]*,?["+Dm+"]*","ig"),Dv=function(r){if(!r)return null;if(Qe(r))return r;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(r).replace(Vfe,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(Hfe,function(l,u){u&&o.push(+u)}),s==="m"&&o.length>2&&(e.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&e.push([i,o[0]]),s==="r")e.push([i].concat(o));else for(;o.length>=t[s]&&(e.push([i].concat(o.splice(0,t[s]))),!!t[s]););return r}),e},HT=function(r,t){for(var e=[],n=0,i=r.length;i-2*!t>n;n+=2){var a=[{x:+r[n-2],y:+r[n-1]},{x:+r[n],y:+r[n+1]},{x:+r[n+2],y:+r[n+3]},{x:+r[n+4],y:+r[n+5]}];t?n?i-4===n?a[3]={x:+r[0],y:+r[1]}:i-2===n&&(a[2]={x:+r[0],y:+r[1]},a[3]={x:+r[2],y:+r[3]}):a[0]={x:+r[i-2],y:+r[i-1]}:i-4===n?a[3]=a[2]:n||(a[0]={x:+r[n],y:+r[n+1]}),e.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return e},v1=function(r,t,e,n,i){var a=[];if(i===null&&n===null&&(n=e),r=+r,t=+t,e=+e,n=+n,i!==null){var o=Math.PI/180,s=r+e*Math.cos(-n*o),l=r+e*Math.cos(-i*o),u=t+e*Math.sin(-n*o),c=t+e*Math.sin(-i*o);a=[["M",s,u],["A",e,e,0,+(i-n>180),0,l,c]]}else a=[["M",r,t],["m",0,-n],["a",e,n,0,1,1,0,2*n],["a",e,n,0,1,1,0,-2*n],["z"]];return a},WT=function(r){if(r=Dv(r),!r||!r.length)return[["M",0,0]];var t=[],e=0,n=0,i=0,a=0,o=0,s,l;r[0][0]==="M"&&(e=+r[0][1],n=+r[0][2],i=e,a=n,o++,t[0]=["M",e,n]);for(var u=r.length===3&&r[0][0]==="M"&&r[1][0].toUpperCase()==="R"&&r[2][0].toUpperCase()==="Z",c=void 0,f=void 0,d=o,h=r.length;d<h;d++){if(t.push(c=[]),f=r[d],s=f[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=+f[6]+e,c[7]=+f[7]+n;break;case"V":c[1]=+f[1]+n;break;case"H":c[1]=+f[1]+e;break;case"R":l=[e,n].concat(f.slice(1));for(var v=2,p=l.length;v<p;v++)l[v]=+l[v]+e,l[++v]=+l[v]+n;t.pop(),t=t.concat(HT(l,u));break;case"O":t.pop(),l=v1(e,n,f[1],f[2]),l.push(l[0]),t=t.concat(l);break;case"U":t.pop(),t=t.concat(v1(e,n,f[1],f[2],f[3])),c=["U"].concat(t[t.length-1].slice(-2));break;case"M":i=+f[1]+e,a=+f[2]+n;break;default:for(var v=1,p=f.length;v<p;v++)c[v]=+f[v]+(v%2?e:n)}else if(s==="R")l=[e,n].concat(f.slice(1)),t.pop(),t=t.concat(HT(l,u)),c=["R"].concat(f.slice(-2));else if(s==="O")t.pop(),l=v1(e,n,f[1],f[2]),l.push(l[0]),t=t.concat(l);else if(s==="U")t.pop(),t=t.concat(v1(e,n,f[1],f[2],f[3])),c=["U"].concat(t[t.length-1].slice(-2));else for(var g=0,m=f.length;g<m;g++)c[g]=f[g];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":e=+i,n=+a;break;case"H":e=c[1];break;case"V":n=c[1];break;case"M":i=c[c.length-2],a=c[c.length-1];break;default:e=c[c.length-2],n=c[c.length-1]}}return t},p1=function(r,t,e,n){return[r,t,e,n,e,n]},f5=function(r,t,e,n,i,a){var o=1/3,s=2/3;return[o*r+s*e,o*t+s*n,o*i+s*e,o*a+s*n,i,a]},d5=function(r,t,e,n,i,a,o,s,l,u){e===n&&(e+=1);var c=Math.PI*120/180,f=Math.PI/180*(+i||0),d=[],h,v,p,g,m,y=function(se,ce,_e){var Me=se*Math.cos(_e)-ce*Math.sin(_e),Ye=se*Math.sin(_e)+ce*Math.cos(_e);return{x:Me,y:Ye}};if(u)v=u[0],p=u[1],g=u[2],m=u[3];else{h=y(r,t,-f),r=h.x,t=h.y,h=y(s,l,-f),s=h.x,l=h.y,r===s&&t===l&&(s+=1,l+=1);var b=(r-s)/2,x=(t-l)/2,w=b*b/(e*e)+x*x/(n*n);w>1&&(w=Math.sqrt(w),e=w*e,n=w*n);var S=e*e,C=n*n,_=(a===o?-1:1)*Math.sqrt(Math.abs((S*C-S*x*x-C*b*b)/(S*x*x+C*b*b)));g=_*e*x/n+(r+s)/2,m=_*-n*b/e+(t+l)/2,v=Math.asin(((t-m)/n).toFixed(9)),p=Math.asin(((l-m)/n).toFixed(9)),v=r<g?Math.PI-v:v,p=s<g?Math.PI-p:p,v<0&&(v=Math.PI*2+v),p<0&&(p=Math.PI*2+p),o&&v>p&&(v=v-Math.PI*2),!o&&p>v&&(p=p-Math.PI*2)}var T=p-v;if(Math.abs(T)>c){var E=p,k=s,I=l;p=v+c*(o&&p>v?1:-1),s=g+e*Math.cos(p),l=m+n*Math.sin(p),d=d5(s,l,e,n,i,0,o,k,I,[p,E,g,m])}T=p-v;var P=Math.cos(v),F=Math.sin(v),$=Math.cos(p),R=Math.sin(p),L=Math.tan(T/4),O=4/3*e*L,B=4/3*n*L,U=[r,t],W=[r+O*F,t-B*P],X=[s+O*R,l-B*$],ie=[s,l];if(W[0]=2*U[0]-W[0],W[1]=2*U[1]-W[1],u)return[W,X,ie].concat(d);d=[W,X,ie].concat(d).join().split(",");for(var q=[],j=0,fe=d.length;j<fe;j++)q[j]=j%2?y(d[j-1],d[j],f).y:y(d[j],d[j+1],f).x;return q},jT=function(r,t){var e=WT(r),n=t&&WT(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],l="",u="",c,f=function(b,x,w){var S,C;if(!b)return["C",x.x,x.y,x.x,x.y,x.x,x.y];switch(!(b[0]in{T:1,Q:1})&&(x.qx=x.qy=null),b[0]){case"M":x.X=b[1],x.Y=b[2];break;case"A":b=["C"].concat(d5.apply(0,[x.x,x.y].concat(b.slice(1))));break;case"S":w==="C"||w==="S"?(S=x.x*2-x.bx,C=x.y*2-x.by):(S=x.x,C=x.y),b=["C",S,C].concat(b.slice(1));break;case"T":w==="Q"||w==="T"?(x.qx=x.x*2-x.qx,x.qy=x.y*2-x.qy):(x.qx=x.x,x.qy=x.y),b=["C"].concat(f5(x.x,x.y,x.qx,x.qy,b[1],b[2]));break;case"Q":x.qx=b[1],x.qy=b[2],b=["C"].concat(f5(x.x,x.y,b[1],b[2],b[3],b[4]));break;case"L":b=["C"].concat(p1(x.x,x.y,b[1],b[2]));break;case"H":b=["C"].concat(p1(x.x,x.y,b[1],x.y));break;case"V":b=["C"].concat(p1(x.x,x.y,x.x,b[1]));break;case"Z":b=["C"].concat(p1(x.x,x.y,x.X,x.Y));break}return b},d=function(b,x){if(b[x].length>7){b[x].shift();for(var w=b[x];w.length;)o[x]="A",n&&(s[x]="A"),b.splice(x++,0,["C"].concat(w.splice(0,6)));b.splice(x,1),c=Math.max(e.length,n&&n.length||0)}},h=function(b,x,w,S,C){b&&x&&b[C][0]==="M"&&x[C][0]!=="M"&&(x.splice(C,0,["M",S.x,S.y]),w.bx=0,w.by=0,w.x=b[C][1],w.y=b[C][2],c=Math.max(e.length,n&&n.length||0))};c=Math.max(e.length,n&&n.length||0);for(var v=0;v<c;v++){e[v]&&(l=e[v][0]),l!=="C"&&(o[v]=l,v&&(u=o[v-1])),e[v]=f(e[v],i,u),o[v]!=="A"&&l==="C"&&(o[v]="C"),d(e,v),n&&(n[v]&&(l=n[v][0]),l!=="C"&&(s[v]=l,v&&(u=s[v-1])),n[v]=f(n[v],a,u),s[v]!=="A"&&l==="C"&&(s[v]="C"),d(n,v)),h(e,n,i,a,v),h(n,e,a,i,v);var p=e[v],g=n&&n[v],m=p.length,y=n&&g.length;i.x=p[m-2],i.y=p[m-1],i.bx=parseFloat(p[m-4])||i.x,i.by=parseFloat(p[m-3])||i.y,a.bx=n&&(parseFloat(g[y-4])||a.x),a.by=n&&(parseFloat(g[y-3])||a.y),a.x=n&&g[y-2],a.y=n&&g[y-1]}return n?[e,n]:e},Wfe=/,?([a-z]),?/gi,h5=function(r){return r.join(",").replace(Wfe,"$1")},v5=function(r,t,e,n,i){var a=-3*t+9*e-9*n+3*i,o=r*a+6*t-12*e+6*n;return r*o-3*t+3*e},p5=function(r,t,e,n,i,a,o,s,l){l===null&&(l=1),l=l>1?1:l<0?0:l;for(var u=l/2,c=12,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,v=0;v<c;v++){var p=u*f[v]+u,g=v5(p,r,e,i,o),m=v5(p,t,n,a,s),y=g*g+m*m;h+=d[v]*Math.sqrt(y)}return u*h},jfe=function(r,t,e,n,i,a,o,s){for(var l=[],u=[[],[]],c,f,d,h,v=0;v<2;++v){if(v===0?(f=6*r-12*e+6*i,c=-3*r+9*e-9*i+3*o,d=3*e-3*r):(f=6*t-12*n+6*a,c=-3*t+9*n-9*a+3*s,d=3*n-3*t),Math.abs(c)<1e-12){if(Math.abs(f)<1e-12)continue;h=-d/f,h>0&&h<1&&l.push(h);continue}var p=f*f-4*d*c,g=Math.sqrt(p);if(!(p<0)){var m=(-f+g)/(2*c);m>0&&m<1&&l.push(m);var y=(-f-g)/(2*c);y>0&&y<1&&l.push(y)}}for(var b=l.length,x=b,w;b--;)h=l[b],w=1-h,u[0][b]=w*w*w*r+3*w*w*h*e+3*w*h*h*i+h*h*h*o,u[1][b]=w*w*w*t+3*w*w*h*n+3*w*h*h*a+h*h*h*s;return u[0][x]=r,u[1][x]=t,u[0][x+1]=o,u[1][x+1]=s,u[0].length=u[1].length=x+2,{min:{x:Math.min.apply(0,u[0]),y:Math.min.apply(0,u[1])},max:{x:Math.max.apply(0,u[0]),y:Math.max.apply(0,u[1])}}},Yfe=function(r,t,e,n,i,a,o,s){if(!(Math.max(r,e)<Math.min(i,o)||Math.min(r,e)>Math.max(i,o)||Math.max(t,n)<Math.min(a,s)||Math.min(t,n)>Math.max(a,s))){var l=(r*n-t*e)*(i-o)-(r-e)*(i*s-a*o),u=(r*n-t*e)*(a-s)-(t-n)*(i*s-a*o),c=(r-e)*(a-s)-(t-n)*(i-o);if(!!c){var f=l/c,d=u/c,h=+f.toFixed(2),v=+d.toFixed(2);if(!(h<+Math.min(r,e).toFixed(2)||h>+Math.max(r,e).toFixed(2)||h<+Math.min(i,o).toFixed(2)||h>+Math.max(i,o).toFixed(2)||v<+Math.min(t,n).toFixed(2)||v>+Math.max(t,n).toFixed(2)||v<+Math.min(a,s).toFixed(2)||v>+Math.max(a,s).toFixed(2)))return{x:f,y:d}}}},Ic=function(r,t,e){return t>=r.x&&t<=r.x+r.width&&e>=r.y&&e<=r.y+r.height},g5=function(r,t,e,n,i){if(i)return[["M",+r+ +i,t],["l",e-i*2,0],["a",i,i,0,0,1,i,i],["l",0,n-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-e,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-n],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",r,t],["l",e,0],["l",0,n],["l",-e,0],["z"]];return a.parsePathArray=h5,a},YT=function(r,t,e,n){return r===null&&(r=t=e=n=0),t===null&&(t=r.y,e=r.width,n=r.height,r=r.x),{x:r,y:t,width:e,w:e,height:n,h:n,x2:r+e,y2:t+n,cx:r+e/2,cy:t+n/2,r1:Math.min(e,n)/2,r2:Math.max(e,n)/2,r0:Math.sqrt(e*e+n*n)/2,path:g5(r,t,e,n),vb:[r,t,e,n].join(" ")}},Xfe=function(r,t){return r=YT(r),t=YT(t),Ic(t,r.x,r.y)||Ic(t,r.x2,r.y)||Ic(t,r.x,r.y2)||Ic(t,r.x2,r.y2)||Ic(r,t.x,t.y)||Ic(r,t.x2,t.y)||Ic(r,t.x,t.y2)||Ic(r,t.x2,t.y2)||(r.x<t.x2&&r.x>t.x||t.x<r.x2&&t.x>r.x)&&(r.y<t.y2&&r.y>t.y||t.y<r.y2&&t.y>r.y)},m5=function(r,t,e,n,i,a,o,s){Qe(r)||(r=[r,t,e,n,i,a,o,s]);var l=jfe.apply(null,r);return YT(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},y5=function(r,t,e,n,i,a,o,s,l){var u=1-l,c=Math.pow(u,3),f=Math.pow(u,2),d=l*l,h=d*l,v=c*r+f*3*l*e+u*3*l*l*i+h*o,p=c*t+f*3*l*n+u*3*l*l*a+h*s,g=r+2*l*(e-r)+d*(i-2*e+r),m=t+2*l*(n-t)+d*(a-2*n+t),y=e+2*l*(i-e)+d*(o-2*i+e),b=n+2*l*(a-n)+d*(s-2*a+n),x=u*r+l*e,w=u*t+l*n,S=u*i+l*o,C=u*a+l*s,_=90-Math.atan2(g-y,m-b)*180/Math.PI;return{x:v,y:p,m:{x:g,y:m},n:{x:y,y:b},start:{x,y:w},end:{x:S,y:C},alpha:_}},qfe=function(r,t,e){var n=m5(r),i=m5(t);if(!Xfe(n,i))return e?0:[];for(var a=p5.apply(0,r),o=p5.apply(0,t),s=~~(a/8),l=~~(o/8),u=[],c=[],f={},d=e?0:[],h=0;h<s+1;h++){var v=y5.apply(0,r.concat(h/s));u.push({x:v.x,y:v.y,t:h/s})}for(var h=0;h<l+1;h++){var v=y5.apply(0,t.concat(h/l));c.push({x:v.x,y:v.y,t:h/l})}for(var h=0;h<s;h++)for(var p=0;p<l;p++){var g=u[h],m=u[h+1],y=c[p],b=c[p+1],x=Math.abs(m.x-g.x)<.001?"y":"x",w=Math.abs(b.x-y.x)<.001?"y":"x",S=Yfe(g.x,g.y,m.x,m.y,y.x,y.y,b.x,b.y);if(S){if(f[S.x.toFixed(4)]===S.y.toFixed(4))continue;f[S.x.toFixed(4)]=S.y.toFixed(4);var C=g.t+Math.abs((S[x]-g[x])/(m[x]-g[x]))*(m.t-g.t),_=y.t+Math.abs((S[w]-y[w])/(b[w]-y[w]))*(b.t-y.t);C>=0&&C<=1&&_>=0&&_<=1&&(e?d+=1:d.push({x:S.x,y:S.y,t1:C,t2:_}))}}return d},Kfe=function(r,t,e){r=jT(r),t=jT(t);for(var n,i,a,o,s,l,u,c,f,d,h=e?0:[],v=0,p=r.length;v<p;v++){var g=r[v];if(g[0]==="M")n=s=g[1],i=l=g[2];else{g[0]==="C"?(f=[n,i].concat(g.slice(1)),n=f[6],i=f[7]):(f=[n,i,n,i,s,l,s,l],n=s,i=l);for(var m=0,y=t.length;m<y;m++){var b=t[m];if(b[0]==="M")a=u=b[1],o=c=b[2];else{b[0]==="C"?(d=[a,o].concat(b.slice(1)),a=d[6],o=d[7]):(d=[a,o,a,o,u,c,u,c],a=u,o=c);var x=qfe(f,d,e);if(e)h+=x;else{for(var w=0,S=x.length;w<S;w++)x[w].segment1=v,x[w].segment2=m,x[w].bez1=f,x[w].bez2=d;h=h.concat(x)}}}}}return h},Zfe=function(r,t){return Kfe(r,t)};function Qfe(r,t){var e=[],n=[];function i(a,o){if(a.length===1)e.push(a[0]),n.push(a[0]);else{for(var s=[],l=0;l<a.length-1;l++)l===0&&e.push(a[0]),l===a.length-2&&n.push(a[l+1]),s[l]=[(1-o)*a[l][0]+o*a[l+1][0],(1-o)*a[l][1]+o*a[l+1][1]];i(s,o)}}return r.length&&i(r,t),{left:e,right:n.reverse()}}function Jfe(r,t,e){var n=[[r[1],r[2]]];e=e||2;var i=[];t[0]==="A"?(n.push(t[6]),n.push(t[7])):t[0]==="C"?(n.push([t[1],t[2]]),n.push([t[3],t[4]]),n.push([t[5],t[6]])):t[0]==="S"||t[0]==="Q"?(n.push([t[1],t[2]]),n.push([t[3],t[4]])):n.push([t[1],t[2]]);for(var a=n,o=1/e,s=0;s<e-1;s++){var l=o/(1-o*s),u=Qfe(a,l);i.push(u.left),a=u.right}i.push(a);var c=i.map(function(f){var d=[];return f.length===4&&(d.push("C"),d=d.concat(f[2])),f.length>=3&&(f.length===3&&d.push("Q"),d=d.concat(f[1])),f.length===2&&d.push("L"),d=d.concat(f[f.length-1]),d});return c}var ede=function(r,t,e){if(e===1)return[[].concat(r)];var n=[];if(t[0]==="L"||t[0]==="C"||t[0]==="Q")n=n.concat(Jfe(r,t,e));else{var i=[].concat(r);i[0]==="M"&&(i[0]="L");for(var a=0;a<=e-1;a++)n.push(i)}return n},tde=function(r,t){if(r.length===1)return r;var e=r.length-1,n=t.length-1,i=e/n,a=[];if(r.length===1&&r[0][0]==="M"){for(var o=0;o<n-e;o++)r.push(r[0]);return r}for(var o=0;o<n;o++){var s=Math.floor(i*o);a[s]=(a[s]||0)+1}var l=a.reduce(function(u,c,f){return f===e?u.concat(r[e]):u.concat(ede(r[f],r[f+1],c))},[]);return l.unshift(r[0]),(t[n]==="Z"||t[n]==="z")&&l.push("Z"),l},rde=function(r,t){if(r.length!==t.length)return!1;var e=!0;return G(r,function(n,i){if(n!==t[i])return e=!1,!1}),e};function nde(r,t,e){var n=null,i=e;return t<i&&(i=t,n="add"),r<i&&(i=r,n="del"),{type:n,min:i}}var ide=function(r,t){var e=r.length,n=t.length,i,a,o=0;if(e===0||n===0)return null;for(var s=[],l=0;l<=e;l++)s[l]=[],s[l][0]={min:l};for(var u=0;u<=n;u++)s[0][u]={min:u};for(var l=1;l<=e;l++){i=r[l-1];for(var u=1;u<=n;u++){a=t[u-1],rde(i,a)?o=0:o=1;var c=s[l-1][u].min+1,f=s[l][u-1].min+1,d=s[l-1][u-1].min+o;s[l][u]=nde(c,f,d)}}return s},b5=function(r,t){var e=ide(r,t),n=r.length,i=t.length,a=[],o=1,s=1;if(e[n][i].min!==n){for(var l=1;l<=n;l++){var u=e[l][l].min;s=l;for(var c=o;c<=i;c++)e[l][c].min<u&&(u=e[l][c].min,s=c);o=s,e[l][o].type&&a.push({index:l-1,type:e[l][o].type})}for(var l=a.length-1;l>=0;l--)o=a[l].index,a[l].type==="add"?r.splice(o,0,[].concat(r[o])):r.splice(o,1)}n=r.length;var f=i-n;if(n<i)for(var l=0;l<f;l++)r[n-1][0]==="z"||r[n-1][0]==="Z"?r.splice(n-2,0,r[n-2]):r.push(r[n-1]),n+=1;return r};function XT(r,t,e){for(var n=[].concat(r),i,a=1/(e+1),o=x5(t)[0],s=1;s<=e;s++)a*=s,i=Math.floor(r.length*a),i===0?n.unshift([o[0]*a+r[i][0]*(1-a),o[1]*a+r[i][1]*(1-a)]):n.splice(i,0,[o[0]*a+r[i][0]*(1-a),o[1]*a+r[i][1]*(1-a)]);return n}function x5(r){var t=[];switch(r[0]){case"M":t.push([r[1],r[2]]);break;case"L":t.push([r[1],r[2]]);break;case"A":t.push([r[6],r[7]]);break;case"Q":t.push([r[3],r[4]]),t.push([r[1],r[2]]);break;case"T":t.push([r[1],r[2]]);break;case"C":t.push([r[5],r[6]]),t.push([r[1],r[2]]),t.push([r[3],r[4]]);break;case"S":t.push([r[3],r[4]]),t.push([r[1],r[2]]);break;case"H":t.push([r[1],r[1]]);break;case"V":t.push([r[1],r[1]]);break}return t}var qT=function(r,t){if(r.length<=1)return r;for(var e,n=0;n<t.length;n++)if(r[n][0]!==t[n][0])switch(e=x5(r[n]),t[n][0]){case"M":r[n]=["M"].concat(e[0]);break;case"L":r[n]=["L"].concat(e[0]);break;case"A":r[n]=[].concat(t[n]),r[n][6]=e[0][0],r[n][7]=e[0][1];break;case"Q":if(e.length<2)if(n>0)e=XT(e,r[n-1],1);else{r[n]=t[n];break}r[n]=["Q"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;case"T":r[n]=["T"].concat(e[0]);break;case"C":if(e.length<3)if(n>0)e=XT(e,r[n-1],2);else{r[n]=t[n];break}r[n]=["C"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;case"S":if(e.length<2)if(n>0)e=XT(e,r[n-1],1);else{r[n]=t[n];break}r[n]=["S"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;default:r[n]=t[n]}return r},KT=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",catmullRomToBezier:HT,fillPath:tde,fillPathByDiff:b5,formatPath:qT,intersection:Zfe,parsePathArray:h5,parsePathString:Dv,pathToAbsolute:WT,pathToCurve:jT,rectPath:g5}),Rm=function(){function r(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return r.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},r.prototype.stopPropagation=function(){this.propagationStopped=!0},r.prototype.toString=function(){var t=this.type;return"[Event (type="+t+")]"},r.prototype.save=function(){},r.prototype.restore=function(){},r}();function w5(r,t){var e=r.indexOf(t);e!==-1&&r.splice(e,1)}var S5=typeof window!="undefined"&&typeof window.document!="undefined";function C5(r,t){if(r.isCanvas())return!0;for(var e=t.getParent(),n=!1;e;){if(e===r){n=!0;break}e=e.getParent()}return n}function Om(r){return r.cfg.visible&&r.cfg.capture}var ZT=function(r){Ie(t,r);function t(e){var n=r.call(this)||this;n.destroyed=!1;var i=n.getDefaultCfg();return n.cfg=jt(i,e),n}return t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,n){this.cfg[e]=n},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t}(ym),E5=globalThis&&globalThis.__spreadArray||function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return r.concat(a||Array.prototype.slice.call(t))},ade=function(){function r(t,e,n){this.name=t,this.version=e,this.os=n,this.type="browser"}return r}(),ode=function(){function r(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return r}(),sde=function(){function r(t,e,n,i){this.name=t,this.version=e,this.os=n,this.bot=i,this.type="bot-device"}return r}(),lde=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}(),ude=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}(),cde=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,fde=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,_5=3,dde=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",cde]],T5=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function QT(r){return r?A5(r):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new ude:typeof navigator!="undefined"?A5(navigator.userAgent):pde()}function hde(r){return r!==""&&dde.reduce(function(t,e){var n=e[0],i=e[1];if(t)return t;var a=i.exec(r);return!!a&&[n,a]},!1)}function A5(r){var t=hde(r);if(!t)return null;var e=t[0],n=t[1];if(e==="searchbot")return new lde;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<_5&&(i=E5(E5([],i,!0),gde(_5-i.length),!0)):i=[];var a=i.join("."),o=vde(r),s=fde.exec(r);return s&&s[1]?new sde(e,a,o,s[1]):new ade(e,a,o)}function vde(r){for(var t=0,e=T5.length;t<e;t++){var n=T5[t],i=n[0],a=n[1],o=a.exec(r);if(o)return i}return null}function pde(){var r=typeof process!="undefined"&&process.version;return r?new ode(process.version.slice(1)):null}function gde(r){for(var t=[],e=0;e<r;e++)t.push("0");return t}function k5(r,t){var e=[],n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],l=r[5],u=r[6],c=r[7],f=r[8],d=t[0],h=t[1],v=t[2],p=t[3],g=t[4],m=t[5],y=t[6],b=t[7],x=t[8];return e[0]=d*n+h*o+v*u,e[1]=d*i+h*s+v*c,e[2]=d*a+h*l+v*f,e[3]=p*n+g*o+m*u,e[4]=p*i+g*s+m*c,e[5]=p*a+g*l+m*f,e[6]=y*n+b*o+x*u,e[7]=y*i+b*s+x*c,e[8]=y*a+b*l+x*f,e}function Su(r,t){var e=[],n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function g1(r){var t=[],e=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],l=r[6],u=r[7],c=r[8],f=c*o-s*u,d=-c*a+s*l,h=u*a-o*l,v=e*f+n*d+i*h;return v?(v=1/v,t[0]=f*v,t[1]=(-c*n+i*u)*v,t[2]=(s*n-i*o)*v,t[3]=d*v,t[4]=(c*e-i*l)*v,t[5]=(-s*e+i*a)*v,t[6]=h*v,t[7]=(-u*e+n*l)*v,t[8]=(o*e-n*a)*v,t):null}var Lm=Zn,JT="matrix",mde=["zIndex","capture","visible","type"],yde=["repeat"],bde=":",xde="*";function wde(r){for(var t=[],e=0;e<r.length;e++)Qe(r[e])?t.push([].concat(r[e])):t.push(r[e]);return t}function Sde(r,t){var e={},n=t.attrs;for(var i in r)e[i]=n[i];return e}function Cde(r,t){var e={},n=t.attr();return G(r,function(i,a){yde.indexOf(a)===-1&&!ci(n[a],i)&&(e[a]=i)}),e}function Ede(r,t){if(t.onFrame)return r;var e=t.startTime,n=t.delay,i=t.duration,a=Object.prototype.hasOwnProperty;return G(r,function(o){e+n<o.startTime+o.delay+o.duration&&i>o.delay&&G(t.toAttrs,function(s,l){a.call(o.toAttrs,l)&&(delete o.toAttrs[l],delete o.fromAttrs[l])})}),r}var M5=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;n.attrs={};var i=n.getDefaultAttrs();return jt(i,e.attrs),n.attrs=i,n.initAttrs(i),n.initAnimate(),n}return t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get("parent")},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.attr=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=n[0],o=n[1];if(!a)return this.attrs;if(an(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return n.length===2?(this.setAttr(a,o),this.afterAttrsChange((e={},e[a]=o,e)),this):this.attrs[a]},t.prototype.isClipped=function(e,n){var i=this.getClip();return i&&!i.isHit(e,n)},t.prototype.setAttr=function(e,n){var i=this.attrs[e];i!==n&&(this.attrs[e]=n,this.onAttrChange(e,n,i))},t.prototype.onAttrChange=function(e,n,i){e==="matrix"&&this.set("totalMatrix",null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var n=this.cfg.applyTo;n&&n.onCanvasChange("clip")}else this.onCanvasChange("attr")},t.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},t.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},t.prototype.setZIndex=function(e){this.set("zIndex",e);var n=this.getParent();return n&&n.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(!!e){var n=e.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.push(this),this.onCanvasChange("zIndex")}},t.prototype.toBack=function(){var e=this.getParent();if(!!e){var n=e.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.unshift(this),this.onCanvasChange("zIndex")}},t.prototype.remove=function(e){e===void 0&&(e=!0);var n=this.getParent();n?(w5(n.getChildren(),this),n.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr(JT,this.getDefaultMatrix()),this.onCanvasChange("matrix")},t.prototype.getMatrix=function(){return this.attr(JT)},t.prototype.setMatrix=function(e){this.attr(JT,e),this.onCanvasChange("matrix")},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var n=this.attr("matrix"),i=this.cfg.parentMatrix;i&&n?e=k5(i,n):e=n||i,this.set("totalMatrix",e)}return e},t.prototype.applyMatrix=function(e){var n=this.attr("matrix"),i=null;e&&n?i=k5(e,n):i=n||e,this.set("totalMatrix",i),this.set("parentMatrix",e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var n=this.attr("matrix");return n?Su(n,e):e},t.prototype.invertFromMatrix=function(e){var n=this.attr("matrix");if(n){var i=g1(n);if(i)return Su(i,e)}return e},t.prototype.setClip=function(e){var n=this.getCanvas(),i=null;if(e){var a=this.getShapeBase(),o=ls(e.type),s=a[o];s&&(i=new s({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:n}))}return this.set("clipShape",i),this.onCanvasChange("clip"),i},t.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},t.prototype.clone=function(){var e=this,n=this.attrs,i={};G(n,function(s,l){Qe(n[l])?i[l]=wde(n[l]):i[l]=n[l]});var a=this.constructor,o=new a({attrs:i});return G(mde,function(s){o.set(s,e.get(s))}),o},t.prototype.destroy=function(){var e=this.destroyed;e||(this.attrs={},r.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},t.prototype.animate=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var i=this.get("timeline");i||(i=this.get("canvas").get("timeline"),this.set("timeline",i));var a=this.get("animations")||[];i.timer||i.initTimer();var o=e[0],s=e[1],l=e[2],u=l===void 0?"easeLinear":l,c=e[3],f=c===void 0?us:c,d=e[4],h=d===void 0?0:d,v,p,g,m,y;Kt(o)?(v=o,o={}):an(o)&&o.onFrame&&(v=o.onFrame,p=o.repeat),an(s)?(y=s,s=y.duration,u=y.easing||"easeLinear",h=y.delay||0,p=y.repeat||p||!1,f=y.callback||us,g=y.pauseCallback||us,m=y.resumeCallback||us):(zt(f)&&(h=f,f=null),Kt(u)?(f=u,u="easeLinear"):u=u||"easeLinear");var b=Cde(o,this),x={fromAttrs:Sde(b,this),toAttrs:b,duration:s,easing:u,repeat:p,callback:f,pauseCallback:g,resumeCallback:m,delay:h,startTime:i.getTime(),id:Rs(),onFrame:v,pathFormatted:!1};a.length>0?a=Ede(a,x):i.addAnimator(this),a.push(x),this.set("animations",a),this.set("_pause",{isPaused:!1})}},t.prototype.stopAnimate=function(e){var n=this;e===void 0&&(e=!0);var i=this.get("animations");G(i,function(a){e&&(a.onFrame?n.attr(a.onFrame(1)):n.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},t.prototype.pauseAnimate=function(){var e=this.get("timeline"),n=this.get("animations"),i=e.getTime();return G(n,function(a){a._paused=!0,a._pauseTime=i,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:i}),this},t.prototype.resumeAnimate=function(){var e=this.get("timeline"),n=e.getTime(),i=this.get("animations"),a=this.get("_pause").pauseTime;return G(i,function(o){o.startTime=o.startTime+(n-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",i),this},t.prototype.emitDelegation=function(e,n){var i=this,a=n.propagationPath;this.getEvents();var o;e==="mouseenter"?o=n.fromShape:e==="mouseleave"&&(o=n.toShape);for(var s=function(f){var d=a[f],h=d.get("name");if(h){if((d.isGroup()||d.isCanvas&&d.isCanvas())&&o&&C5(d,o))return"break";Qe(h)?G(h,function(v){i.emitDelegateEvent(d,v,n)}):l.emitDelegateEvent(d,h,n)}},l=this,u=0;u<a.length;u++){var c=s(u);if(c==="break")break}},t.prototype.emitDelegateEvent=function(e,n,i){var a=this.getEvents(),o=n+bde+i.type;(a[o]||a[xde])&&(i.name=o,i.currentTarget=e,i.delegateTarget=this,i.delegateObject=e.get("delegateObject"),this.emit(o,i))},t.prototype.translate=function(e,n){e===void 0&&(e=0),n===void 0&&(n=0);var i=this.getMatrix(),a=Lm(i,[["t",e,n]]);return this.setMatrix(a),this},t.prototype.move=function(e,n){var i=this.attr("x")||0,a=this.attr("y")||0;return this.translate(e-i,n-a),this},t.prototype.moveTo=function(e,n){return this.move(e,n)},t.prototype.scale=function(e,n){var i=this.getMatrix(),a=Lm(i,[["s",e,n||e]]);return this.setMatrix(a),this},t.prototype.rotate=function(e){var n=this.getMatrix(),i=Lm(n,[["r",e]]);return this.setMatrix(i),this},t.prototype.rotateAtStart=function(e){var n=this.attr(),i=n.x,a=n.y,o=this.getMatrix(),s=Lm(o,[["t",-i,-a],["r",e],["t",i,a]]);return this.setMatrix(s),this},t.prototype.rotateAtPoint=function(e,n,i){var a=this.getMatrix(),o=Lm(a,[["t",-e,-n],["r",i],["t",e,n]]);return this.setMatrix(o),this},t}(ZT),I5={},eA="_INDEX";function P5(r,t){if(r.set("canvas",t),r.isGroup()){var e=r.get("children");e.length&&e.forEach(function(n){P5(n,t)})}}function D5(r,t){if(r.set("timeline",t),r.isGroup()){var e=r.get("children");e.length&&e.forEach(function(n){D5(n,t)})}}function _de(r,t,e){e===void 0&&(e=!0),e?t.destroy():(t.set("parent",null),t.set("canvas",null)),w5(r.getChildren(),t)}function Tde(r){return function(t,e){var n=r(t,e);return n===0?t[eA]-e[eA]:n}}var R5=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,n=-1/0,i=1/0,a=-1/0,o=[],s=[],l=this.getChildren().filter(function(c){return c.get("visible")&&(!c.isGroup()||c.isGroup()&&c.getChildren().length>0)});l.length>0?(G(l,function(c){var f=c.getBBox();o.push(f.minX,f.maxX),s.push(f.minY,f.maxY)}),e=sa(o),n=Xi(o),i=sa(s),a=Xi(s)):(e=0,n=0,i=0,a=0);var u={x:e,y:i,minX:e,minY:i,maxX:n,maxY:a,width:n-e,height:a-i};return u},t.prototype.getCanvasBBox=function(){var e=1/0,n=-1/0,i=1/0,a=-1/0,o=[],s=[],l=this.getChildren().filter(function(c){return c.get("visible")&&(!c.isGroup()||c.isGroup()&&c.getChildren().length>0)});l.length>0?(G(l,function(c){var f=c.getCanvasBBox();o.push(f.minX,f.maxX),s.push(f.minY,f.maxY)}),e=sa(o),n=Xi(o),i=sa(s),a=Xi(s)):(e=0,n=0,i=0,a=0);var u={x:e,y:i,minX:e,minY:i,maxX:n,maxY:a,width:n-e,height:a-i};return u},t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return e.children=[],e},t.prototype.onAttrChange=function(e,n,i){if(r.prototype.onAttrChange.call(this,e,n,i),e==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},t.prototype.applyMatrix=function(e){var n=this.getTotalMatrix();r.prototype.applyMatrix.call(this,e);var i=this.getTotalMatrix();i!==n&&this._applyChildrenMarix(i)},t.prototype._applyChildrenMarix=function(e){var n=this.getChildren();G(n,function(i){i.applyMatrix(e)})},t.prototype.addShape=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0],a=e[1];an(i)?a=i:a.type=i;var o=I5[a.type];o||(o=ls(a.type),I5[a.type]=o);var s=this.getShapeBase(),l=new s[o](a);return this.add(l),l},t.prototype.addGroup=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0],a=e[1],o;if(Kt(i))a?o=new i(a):o=new i({parent:this});else{var s=i||{},l=this.getGroupBase();o=new l(s)}return this.add(o),o},t.prototype.getCanvas=function(){var e;return this.isCanvas()?e=this:e=this.get("canvas"),e},t.prototype.getShape=function(e,n,i){if(!Om(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,e,n,i);else{var s=[e,n,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],i))}return o},t.prototype._findShape=function(e,n,i,a){for(var o=null,s=e.length-1;s>=0;s--){var l=e[s];if(Om(l)&&(l.isGroup()?o=l.getShape(n,i,a):l.isHit(n,i)&&(o=l)),o)break}return o},t.prototype.add=function(e){var n=this.getCanvas(),i=this.getChildren(),a=this.get("timeline"),o=e.getParent();o&&_de(o,e,!1),e.set("parent",this),n&&P5(e,n),a&&D5(e,a),i.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var n=this.getTotalMatrix();n&&e.applyMatrix(n)},t.prototype.getChildren=function(){return this.get("children")},t.prototype.sort=function(){var e=this.getChildren();G(e,function(n,i){return n[eA]=i,n}),e.sort(Tde(function(n,i){return n.get("zIndex")-i.get("zIndex")})),this.onCanvasChange("sort")},t.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),n=e.length-1;n>=0;n--)e[n].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},t.prototype.destroy=function(){this.get("destroyed")||(this.clear(),r.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){var n=this.getChildren();return n[e]},t.prototype.getCount=function(){var e=this.getChildren();return e.length},t.prototype.contain=function(e){var n=this.getChildren();return n.indexOf(e)>-1},t.prototype.removeChild=function(e,n){n===void 0&&(n=!0),this.contain(e)&&e.remove(n)},t.prototype.findAll=function(e){var n=[],i=this.getChildren();return G(i,function(a){e(a)&&n.push(a),a.isGroup()&&(n=n.concat(a.findAll(e)))}),n},t.prototype.find=function(e){var n=null,i=this.getChildren();return G(i,function(a){if(e(a)?n=a:a.isGroup()&&(n=a.find(e)),n)return!1}),n},t.prototype.findById=function(e){return this.find(function(n){return n.get("id")===e})},t.prototype.findByClassName=function(e){return this.find(function(n){return n.get("className")===e})},t.prototype.findAllByName=function(e){return this.findAll(function(n){return n.get("name")===e})},t}(M5),Rv=0,Fm=0,Nm=0,O5=1e3,m1,Bm,y1=0,hd=0,b1=0,$m=typeof performance=="object"&&performance.now?performance:Date,L5=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function F5(){return hd||(L5(Ade),hd=$m.now()+b1)}function Ade(){hd=0}function tA(){this._call=this._time=this._next=null}tA.prototype=rA.prototype={constructor:tA,restart:function(r,t,e){if(typeof r!="function")throw new TypeError("callback is not a function");e=(e==null?F5():+e)+(t==null?0:+t),!this._next&&Bm!==this&&(Bm?Bm._next=this:m1=this,Bm=this),this._call=r,this._time=e,nA()},stop:function(){this._call&&(this._call=null,this._time=1/0,nA())}};function rA(r,t,e){var n=new tA;return n.restart(r,t,e),n}function kde(){F5(),++Rv;for(var r=m1,t;r;)(t=hd-r._time)>=0&&r._call.call(null,t),r=r._next;--Rv}function N5(){hd=(y1=$m.now())+b1,Rv=Fm=0;try{kde()}finally{Rv=0,Ide(),hd=0}}function Mde(){var r=$m.now(),t=r-y1;t>O5&&(b1-=t,y1=r)}function Ide(){for(var r,t=m1,e,n=1/0;t;)t._call?(n>t._time&&(n=t._time),r=t,t=t._next):(e=t._next,t._next=null,t=r?r._next=e:m1=e);Bm=r,nA(n)}function nA(r){if(!Rv){Fm&&(Fm=clearTimeout(Fm));var t=r-hd;t>24?(r<1/0&&(Fm=setTimeout(N5,r-$m.now()-b1)),Nm&&(Nm=clearInterval(Nm))):(Nm||(y1=$m.now(),Nm=setInterval(Mde,O5)),Rv=1,L5(N5))}}function Pde(r){return+r}function Dde(r){return r*r}function Rde(r){return r*(2-r)}function B5(r){return((r*=2)<=1?r*r:--r*(2-r)+1)/2}function Ode(r){return r*r*r}function Lde(r){return--r*r*r+1}function $5(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}var iA=3,Fde=function r(t){t=+t;function e(n){return Math.pow(n,t)}return e.exponent=r,e}(iA),Nde=function r(t){t=+t;function e(n){return 1-Math.pow(1-n,t)}return e.exponent=r,e}(iA),z5=function r(t){t=+t;function e(n){return((n*=2)<=1?Math.pow(n,t):2-Math.pow(2-n,t))/2}return e.exponent=r,e}(iA),G5=Math.PI,U5=G5/2;function Bde(r){return+r==1?1:1-Math.cos(r*U5)}function $de(r){return Math.sin(r*U5)}function V5(r){return(1-Math.cos(G5*r))/2}function Pc(r){return(Math.pow(2,-10*r)-.0009765625)*1.0009775171065494}function zde(r){return Pc(1-+r)}function Gde(r){return 1-Pc(r)}function H5(r){return((r*=2)<=1?Pc(1-r):2-Pc(r-1))/2}function Ude(r){return 1-Math.sqrt(1-r*r)}function Vde(r){return Math.sqrt(1- --r*r)}function W5(r){return((r*=2)<=1?1-Math.sqrt(1-r*r):Math.sqrt(1-(r-=2)*r)+1)/2}var aA=4/11,Hde=6/11,Wde=8/11,jde=3/4,Yde=9/11,Xde=10/11,qde=15/16,Kde=21/22,Zde=63/64,x1=1/aA/aA;function Qde(r){return 1-zm(1-r)}function zm(r){return(r=+r)<aA?x1*r*r:r<Wde?x1*(r-=Hde)*r+jde:r<Xde?x1*(r-=Yde)*r+qde:x1*(r-=Kde)*r+Zde}function Jde(r){return((r*=2)<=1?1-zm(1-r):zm(r-1)+1)/2}var oA=1.70158,ehe=function r(t){t=+t;function e(n){return(n=+n)*n*(t*(n-1)+n)}return e.overshoot=r,e}(oA),the=function r(t){t=+t;function e(n){return--n*n*((n+1)*t+n)+1}return e.overshoot=r,e}(oA),j5=function r(t){t=+t;function e(n){return((n*=2)<1?n*n*((t+1)*n-t):(n-=2)*n*((t+1)*n+t)+2)/2}return e.overshoot=r,e}(oA),Ov=2*Math.PI,sA=1,lA=.3,rhe=function r(t,e){var n=Math.asin(1/(t=Math.max(1,t)))*(e/=Ov);function i(a){return t*Pc(- --a)*Math.sin((n-a)/e)}return i.amplitude=function(a){return r(a,e*Ov)},i.period=function(a){return r(t,a)},i}(sA,lA),Y5=function r(t,e){var n=Math.asin(1/(t=Math.max(1,t)))*(e/=Ov);function i(a){return 1-t*Pc(a=+a)*Math.sin((a+n)/e)}return i.amplitude=function(a){return r(a,e*Ov)},i.period=function(a){return r(t,a)},i}(sA,lA),nhe=function r(t,e){var n=Math.asin(1/(t=Math.max(1,t)))*(e/=Ov);function i(a){return((a=a*2-1)<0?t*Pc(-a)*Math.sin((n-a)/e):2-t*Pc(a)*Math.sin((n+a)/e))/2}return i.amplitude=function(a){return r(a,e*Ov)},i.period=function(a){return r(t,a)},i}(sA,lA),w1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",easeLinear:Pde,easeQuad:B5,easeQuadIn:Dde,easeQuadOut:Rde,easeQuadInOut:B5,easeCubic:$5,easeCubicIn:Ode,easeCubicOut:Lde,easeCubicInOut:$5,easePoly:z5,easePolyIn:Fde,easePolyOut:Nde,easePolyInOut:z5,easeSin:V5,easeSinIn:Bde,easeSinOut:$de,easeSinInOut:V5,easeExp:H5,easeExpIn:zde,easeExpOut:Gde,easeExpInOut:H5,easeCircle:W5,easeCircleIn:Ude,easeCircleOut:Vde,easeCircleInOut:W5,easeBounce:zm,easeBounceIn:Qde,easeBounceOut:zm,easeBounceInOut:Jde,easeBack:j5,easeBackIn:ehe,easeBackOut:the,easeBackInOut:j5,easeElastic:Y5,easeElasticIn:rhe,easeElasticOut:Y5,easeElasticInOut:nhe});function uA(r,t,e){r.prototype=t.prototype=e,e.constructor=r}function X5(r,t){var e=Object.create(r.prototype);for(var n in t)e[n]=t[n];return e}function Gm(){}var Um=.7,S1=1/Um,Lv="\\s*([+-]?\\d+)\\s*",Vm="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ol="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ihe=/^#([0-9a-f]{3,8})$/,ahe=new RegExp("^rgb\\("+[Lv,Lv,Lv]+"\\)$"),ohe=new RegExp("^rgb\\("+[Ol,Ol,Ol]+"\\)$"),she=new RegExp("^rgba\\("+[Lv,Lv,Lv,Vm]+"\\)$"),lhe=new RegExp("^rgba\\("+[Ol,Ol,Ol,Vm]+"\\)$"),uhe=new RegExp("^hsl\\("+[Vm,Ol,Ol]+"\\)$"),che=new RegExp("^hsla\\("+[Vm,Ol,Ol,Vm]+"\\)$"),q5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uA(Gm,Hm,{copy:function(r){return Object.assign(new this.constructor,this,r)},displayable:function(){return this.rgb().displayable()},hex:K5,formatHex:K5,formatHsl:fhe,formatRgb:Z5,toString:Z5});function K5(){return this.rgb().formatHex()}function fhe(){return r$(this).formatHsl()}function Z5(){return this.rgb().formatRgb()}function Hm(r){var t,e;return r=(r+"").trim().toLowerCase(),(t=ihe.exec(r))?(e=t[1].length,t=parseInt(t[1],16),e===6?Q5(t):e===3?new hs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?C1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?C1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ahe.exec(r))?new hs(t[1],t[2],t[3],1):(t=ohe.exec(r))?new hs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=she.exec(r))?C1(t[1],t[2],t[3],t[4]):(t=lhe.exec(r))?C1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=uhe.exec(r))?t$(t[1],t[2]/100,t[3]/100,1):(t=che.exec(r))?t$(t[1],t[2]/100,t[3]/100,t[4]):q5.hasOwnProperty(r)?Q5(q5[r]):r==="transparent"?new hs(NaN,NaN,NaN,0):null}function Q5(r){return new hs(r>>16&255,r>>8&255,r&255,1)}function C1(r,t,e,n){return n<=0&&(r=t=e=NaN),new hs(r,t,e,n)}function dhe(r){return r instanceof Gm||(r=Hm(r)),r?(r=r.rgb(),new hs(r.r,r.g,r.b,r.opacity)):new hs}function cA(r,t,e,n){return arguments.length===1?dhe(r):new hs(r,t,e,n==null?1:n)}function hs(r,t,e,n){this.r=+r,this.g=+t,this.b=+e,this.opacity=+n}uA(hs,cA,X5(Gm,{brighter:function(r){return r=r==null?S1:Math.pow(S1,r),new hs(this.r*r,this.g*r,this.b*r,this.opacity)},darker:function(r){return r=r==null?Um:Math.pow(Um,r),new hs(this.r*r,this.g*r,this.b*r,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:J5,formatHex:J5,formatRgb:e$,toString:e$}));function J5(){return"#"+fA(this.r)+fA(this.g)+fA(this.b)}function e$(){var r=this.opacity;return r=isNaN(r)?1:Math.max(0,Math.min(1,r)),(r===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(r===1?")":", "+r+")")}function fA(r){return r=Math.max(0,Math.min(255,Math.round(r)||0)),(r<16?"0":"")+r.toString(16)}function t$(r,t,e,n){return n<=0?r=t=e=NaN:e<=0||e>=1?r=t=NaN:t<=0&&(r=NaN),new Ll(r,t,e,n)}function r$(r){if(r instanceof Ll)return new Ll(r.h,r.s,r.l,r.opacity);if(r instanceof Gm||(r=Hm(r)),!r)return new Ll;if(r instanceof Ll)return r;r=r.rgb();var t=r.r/255,e=r.g/255,n=r.b/255,i=Math.min(t,e,n),a=Math.max(t,e,n),o=NaN,s=a-i,l=(a+i)/2;return s?(t===a?o=(e-n)/s+(e<n)*6:e===a?o=(n-t)/s+2:o=(t-e)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Ll(o,s,l,r.opacity)}function hhe(r,t,e,n){return arguments.length===1?r$(r):new Ll(r,t,e,n==null?1:n)}function Ll(r,t,e,n){this.h=+r,this.s=+t,this.l=+e,this.opacity=+n}uA(Ll,hhe,X5(Gm,{brighter:function(r){return r=r==null?S1:Math.pow(S1,r),new Ll(this.h,this.s,this.l*r,this.opacity)},darker:function(r){return r=r==null?Um:Math.pow(Um,r),new Ll(this.h,this.s,this.l*r,this.opacity)},rgb:function(){var r=this.h%360+(this.h<0)*360,t=isNaN(r)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*t,i=2*e-n;return new hs(dA(r>=240?r-240:r+120,i,n),dA(r,i,n),dA(r<120?r+240:r-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var r=this.opacity;return r=isNaN(r)?1:Math.max(0,Math.min(1,r)),(r===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(r===1?")":", "+r+")")}}));function dA(r,t,e){return(r<60?t+(e-t)*r/60:r<180?e:r<240?t+(e-t)*(240-r)/60:t)*255}function hA(r){return function(){return r}}function vhe(r,t){return function(e){return r+e*t}}function phe(r,t,e){return r=Math.pow(r,e),t=Math.pow(t,e)-r,e=1/e,function(n){return Math.pow(r+n*t,e)}}function ghe(r){return(r=+r)==1?n$:function(t,e){return e-t?phe(t,e,r):hA(isNaN(t)?e:t)}}function n$(r,t){var e=t-r;return e?vhe(r,e):hA(isNaN(r)?t:r)}var i$=function r(t){var e=ghe(t);function n(i,a){var o=e((i=cA(i)).r,(a=cA(a)).r),s=e(i.g,a.g),l=e(i.b,a.b),u=n$(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return n.gamma=r,n}(1);function a$(r,t){t||(t=[]);var e=r?Math.min(t.length,r.length):0,n=t.slice(),i;return function(a){for(i=0;i<e;++i)n[i]=r[i]*(1-a)+t[i]*a;return n}}function o$(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function s$(r,t){return(o$(t)?a$:l$)(r,t)}function l$(r,t){var e=t?t.length:0,n=r?Math.min(e,r.length):0,i=new Array(n),a=new Array(e),o;for(o=0;o<n;++o)i[o]=Fv(r[o],t[o]);for(;o<e;++o)a[o]=t[o];return function(s){for(o=0;o<n;++o)a[o]=i[o](s);return a}}function mhe(r,t){var e=new Date;return r=+r,t=+t,function(n){return e.setTime(r*(1-n)+t*n),e}}function vA(r,t){return r=+r,t=+t,function(e){return r*(1-e)+t*e}}function yhe(r,t){var e={},n={},i;(r===null||typeof r!="object")&&(r={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in r?e[i]=Fv(r[i],t[i]):n[i]=t[i];return function(a){for(i in e)n[i]=e[i](a);return n}}var pA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gA=new RegExp(pA.source,"g");function bhe(r){return function(){return r}}function xhe(r){return function(t){return r(t)+""}}function whe(r,t){var e=pA.lastIndex=gA.lastIndex=0,n,i,a,o=-1,s=[],l=[];for(r=r+"",t=t+"";(n=pA.exec(r))&&(i=gA.exec(t));)(a=i.index)>e&&(a=t.slice(e,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:vA(n,i)})),e=gA.lastIndex;return e<t.length&&(a=t.slice(e),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?xhe(l[0].x):bhe(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function Fv(r,t){var e=typeof t,n;return t==null||e==="boolean"?hA(t):(e==="number"?vA:e==="string"?(n=Hm(t))?(t=n,i$):whe:t instanceof Hm?i$:t instanceof Date?mhe:o$(t)?a$:Array.isArray(t)?l$:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?yhe:vA)(r,t)}var She=function(r){return["fill","stroke","fillStyle","strokeStyle"].includes(r)},Che=function(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)},u$=[1,0,0,0,1,0,0,0,1];function Ehe(r,t,e){var n={},i=t.fromAttrs,a=t.toAttrs;if(!r.destroyed){var o;for(var s in a)if(!ci(i[s],a[s]))if(s==="path"){var l=a[s],u=i[s];l.length>u.length?(l=Dv(a[s]),u=Dv(i[s]),u=b5(u,l),u=qT(u,l),t.fromAttrs.path=u,t.toAttrs.path=l):t.pathFormatted||(l=Dv(a[s]),u=Dv(i[s]),u=qT(u,l),t.fromAttrs.path=u,t.toAttrs.path=l,t.pathFormatted=!0),n[s]=[];for(var c=0;c<l.length;c++){for(var f=l[c],d=u[c],h=[],v=0;v<f.length;v++)zt(f[v])&&d&&zt(d[v])?(o=Fv(d[v],f[v]),h.push(o(e))):h.push(f[v]);n[s].push(h)}}else if(s==="matrix"){var p=s$(i[s]||u$,a[s]||u$),g=p(e);n[s]=g}else She(s)&&Che(a[s])?n[s]=a[s]:Kt(a[s])||(o=Fv(i[s],a[s]),n[s]=o(e));r.attr(n)}}function _he(r,t,e){var n=t.startTime,i=t.delay;if(e<n+i||t._paused)return!1;var a,o=t.duration,s=t.easing;if(e=e-n-t.delay,t.repeat)a=e%o/o,a=w1[s](a);else if(a=e/o,a<1)a=w1[s](a);else return t.onFrame?r.attr(t.onFrame(1)):r.attr(t.toAttrs),!0;if(t.onFrame){var l=t.onFrame(a);r.attr(l)}else Ehe(r,t,a);return!1}var The=function(){function r(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return r.prototype.initTimer=function(){var t=this,e=!1,n,i,a;this.timer=rA(function(o){if(t.current=o,t.animators.length>0){for(var s=t.animators.length-1;s>=0;s--){if(n=t.animators[s],n.destroyed){t.removeAnimator(s);continue}if(!n.isAnimatePaused()){i=n.get("animations");for(var l=i.length-1;l>=0;l--)a=i[l],e=_he(n,a,o),e&&(i.splice(l,1),e=!1,a.callback&&a.callback())}i.length===0&&t.removeAnimator(s)}var u=t.canvas.get("autoDraw");u||t.canvas.draw()}})},r.prototype.addAnimator=function(t){this.animators.push(t)},r.prototype.removeAnimator=function(t){this.animators.splice(t,1)},r.prototype.isAnimating=function(){return!!this.animators.length},r.prototype.stop=function(){this.timer&&this.timer.stop()},r.prototype.stopAllAnimations=function(t){t===void 0&&(t=!0),this.animators.forEach(function(e){e.stopAnimate(t)}),this.animators=[],this.canvas.draw()},r.prototype.getTime=function(){return this.current},r}(),Ahe=40,c$=0,f$=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function d$(r,t,e){e.name=t,e.target=r,e.currentTarget=r,e.delegateTarget=r,r.emit(t,e)}function khe(r,t,e){if(e.bubbles){var n=void 0,i=!1;if(t==="mouseenter"?(n=e.fromShape,i=!0):t==="mouseleave"&&(i=!0,n=e.toShape),r.isCanvas()&&i)return;if(n&&C5(r,n)){e.bubbles=!1;return}e.name=t,e.currentTarget=r,e.delegateTarget=r,r.emit(t,e)}}var Mhe=function(){function r(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(n){var i=n.type;e._triggerEvent(i,n)},this._onDocumentMove=function(n){var i=e.canvas,a=i.get("el");if(a!==n.target&&(e.dragging||e.currentShape)){var o=e._getPointInfo(n);e.dragging&&e._emitEvent("drag",n,o,e.draggingShape)}},this._onDocumentMouseUp=function(n){var i=e.canvas,a=i.get("el");if(a!==n.target&&e.dragging){var o=e._getPointInfo(n);e.draggingShape&&e._emitEvent("drop",n,o,null),e._emitEvent("dragend",n,o,e.draggingShape),e._afterDrag(e.draggingShape,o,n)}},this.canvas=t.canvas}return r.prototype.init=function(){this._bindEvents()},r.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");G(f$,function(n){e.addEventListener(n,t._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");G(f$,function(n){e.removeEventListener(n,t._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._getEventObj=function(t,e,n,i,a,o){var s=new Rm(t,e);return s.fromShape=a,s.toShape=o,s.x=n.x,s.y=n.y,s.clientX=n.clientX,s.clientY=n.clientY,s.propagationPath.push(i),s},r.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},r.prototype._getPointInfo=function(t){var e=this.canvas,n=e.getClientByEvent(t),i=e.getPointByEvent(t);return{x:i.x,y:i.y,clientX:n.x,clientY:n.y}},r.prototype._triggerEvent=function(t,e){var n=this._getPointInfo(e),i=this._getShape(n,e),a=this["_on"+t],o=!1;if(a)a.call(this,n,i,e);else{var s=this.currentShape;t==="mouseenter"||t==="dragenter"||t==="mouseover"?(this._emitEvent(t,e,n,null,null,i),i&&this._emitEvent(t,e,n,i,null,i),t==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):t==="mouseleave"||t==="dragleave"||t==="mouseout"?(o=!0,s&&this._emitEvent(t,e,n,s,s,null),this._emitEvent(t,e,n,null,s,null),t==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(t,e,n,i,null,null)}if(o||(this.currentShape=i),i&&!i.get("destroyed")){var l=this.canvas,u=l.get("el");u.style.cursor=i.attr("cursor")||l.get("cursor")}},r.prototype._onmousedown=function(t,e,n){n.button===c$&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,t,e,null,null)},r.prototype._emitMouseoverEvents=function(t,e,n,i){var a=this.canvas.get("el");n!==i&&(n&&(this._emitEvent("mouseout",t,e,n,n,i),this._emitEvent("mouseleave",t,e,n,n,i),(!i||i.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),i&&(this._emitEvent("mouseover",t,e,i,n,i),this._emitEvent("mouseenter",t,e,i,n,i)))},r.prototype._emitDragoverEvents=function(t,e,n,i,a){i?(i!==n&&(n&&this._emitEvent("dragleave",t,e,n,n,i),this._emitEvent("dragenter",t,e,i,n,i)),a||this._emitEvent("dragover",t,e,i)):n&&this._emitEvent("dragleave",t,e,n,n,i),a&&this._emitEvent("dragover",t,e,i)},r.prototype._afterDrag=function(t,e,n){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(e,n);i!==t&&this._emitMouseoverEvents(n,e,t,i),this.currentShape=i},r.prototype._onmouseup=function(t,e,n){if(n.button===c$){var i=this.draggingShape;this.dragging?(i&&this._emitEvent("drop",n,t,e),this._emitEvent("dragend",n,t,i),this._afterDrag(i,t,n)):(this._emitEvent("mouseup",n,t,e),e===this.mousedownShape&&this._emitEvent("click",n,t,e),this.mousedownShape=null,this.mousedownPoint=null)}},r.prototype._ondragover=function(t,e,n){n.preventDefault();var i=this.currentShape;this._emitDragoverEvents(n,t,i,e,!0)},r.prototype._onmousemove=function(t,e,n){var i=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,t,a,e,!1),this._emitEvent("drag",n,t,o);else{var s=this.mousedownPoint;if(s){var l=this.mousedownShape,u=n.timeStamp,c=u-this.mousedownTimeStamp,f=s.clientX-t.clientX,d=s.clientY-t.clientY,h=f*f+d*d;c>120||h>Ahe?l&&l.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,t,o),this.mousedownShape=null,this.mousedownPoint=null):!l&&i.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,t,a,e),this._emitEvent("mousemove",n,t,e)):(this._emitMouseoverEvents(n,t,a,e),this._emitEvent("mousemove",n,t,e))}else this._emitMouseoverEvents(n,t,a,e),this._emitEvent("mousemove",n,t,e)}},r.prototype._emitEvent=function(t,e,n,i,a,o){var s=this._getEventObj(t,e,n,i,a,o);if(i){s.shape=i,d$(i,t,s);for(var l=i.getParent();l;)l.emitDelegation(t,s),s.propagationStopped||khe(l,t,s),s.propagationPath.push(l),l=l.getParent()}else{var u=this.canvas;d$(u,t,s)}},r.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},r}(),h$="px",v$=QT(),Ihe=v$&&v$.name==="firefox",E1=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},t.prototype.initContainer=function(){var e=this.get("container");ot(e)&&(e=document.getElementById(e),this.set("container",e))},t.prototype.initDom=function(){var e=this.createDom();this.set("el",e);var n=this.get("container");n.appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},t.prototype.initEvents=function(){var e=new Mhe({canvas:this});e.init(),this.set("eventController",e)},t.prototype.initTimeline=function(){var e=new The(this);this.set("timeline",e)},t.prototype.setDOMSize=function(e,n){var i=this.get("el");S5&&(i.style.width=e+h$,i.style.height=n+h$)},t.prototype.changeSize=function(e,n){this.setDOMSize(e,n),this.set("width",e),this.set("height",n),this.onCanvasChange("changeSize")},t.prototype.getRenderer=function(){return this.get("renderer")},t.prototype.getCursor=function(){return this.get("cursor")},t.prototype.setCursor=function(e){this.set("cursor",e);var n=this.get("el");S5&&n&&(n.style.cursor=e)},t.prototype.getPointByEvent=function(e){var n=this.get("supportCSSTransform");if(n){if(Ihe&&!nt(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!nt(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var i=this.getClientByEvent(e),a=i.x,o=i.y;return this.getPointByClient(a,o)},t.prototype.getClientByEvent=function(e){var n=e;return e.touches&&(e.type==="touchend"?n=e.changedTouches[0]:n=e.touches[0]),{x:n.clientX,y:n.clientY}},t.prototype.getPointByClient=function(e,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:e-a.left,y:n-a.top}},t.prototype.getClientByPoint=function(e,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:e+a.left,y:n+a.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){var e=this.get("eventController");e.destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),r.prototype.destroy.call(this))},t}(R5),_1=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var e=r.prototype.clone.call(this),n=this.getChildren(),i=0;i<n.length;i++){var a=n[i];e.add(a.clone())}return e},t}(R5),T1=function(r){Ie(t,r);function t(e){return r.call(this,e)||this}return t.prototype._isInBBox=function(e,n){var i=this.getBBox();return i.minX<=e&&i.maxX>=e&&i.minY<=n&&i.maxY>=n},t.prototype.afterAttrsChange=function(e){r.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},t.prototype.applyMatrix=function(e){r.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),n=this.getTotalMatrix(),i=e.minX,a=e.minY,o=e.maxX,s=e.maxY;if(n){var l=Su(n,[e.minX,e.minY]),u=Su(n,[e.maxX,e.minY]),c=Su(n,[e.minX,e.maxY]),f=Su(n,[e.maxX,e.maxY]);i=Math.min(l[0],u[0],c[0],f[0]),o=Math.max(l[0],u[0],c[0],f[0]),a=Math.min(l[1],u[1],c[1],f[1]),s=Math.max(l[1],u[1],c[1],f[1])}var d=this.attrs;if(d.shadowColor){var h=d.shadowBlur,v=h===void 0?0:h,p=d.shadowOffsetX,g=p===void 0?0:p,m=d.shadowOffsetY,y=m===void 0?0:m,b=i-v+g,x=o+v+g,w=a-v+y,S=s+v+y;i=Math.min(i,b),o=Math.max(o,x),a=Math.min(a,w),s=Math.max(s,S)}return{x:i,y:a,minX:i,minY:a,maxX:o,maxY:s,width:o-i,height:s-a}},t.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},t.prototype.isClipShape=function(){return this.get("isClipShape")},t.prototype.isInShape=function(e,n){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,n){var i=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[e,n,1];o=this.invertFromMatrix(o);var s=o[0],l=o[1],u=this._isInBBox(s,l);return this.isOnlyHitBox()?u:!!(u&&!this.isClipped(s,l)&&(this.isInShape(s,l)||i&&i.isHit(s,l)||a&&a.isHit(s,l)))},t}(M5),p$=new Map;function Fl(r,t){p$.set(r,t)}function A1(r){return p$.get(r)}function g$(r){var t=r.attr(),e=t.x,n=t.y,i=t.width,a=t.height;return{x:e,y:n,width:i,height:a}}function m$(r){var t=r.attr(),e=t.x,n=t.y,i=t.r;return{x:e-i,y:n-i,width:i*2,height:i*2}}function y$(r){return Math.min.apply(null,r)}function b$(r){return Math.max.apply(null,r)}function fo(r,t,e,n){var i=r-e,a=t-n;return Math.sqrt(i*i+a*a)}function k1(r,t){return Math.abs(r-t)<.001}function Dc(r,t){var e=y$(r),n=y$(t),i=b$(r),a=b$(t);return{x:e,y:n,width:i-e,height:a-n}}function M1(r){return(r+Math.PI*2)%(Math.PI*2)}var Ga={box:function(r,t,e,n){return Dc([r,e],[t,n])},length:function(r,t,e,n){return fo(r,t,e,n)},pointAt:function(r,t,e,n,i){return{x:(1-i)*r+i*e,y:(1-i)*t+i*n}},pointDistance:function(r,t,e,n,i,a){var o=(e-r)*(i-r)+(n-t)*(a-t);if(o<0)return fo(r,t,i,a);var s=(e-r)*(e-r)+(n-t)*(n-t);return o>s?fo(e,n,i,a):this.pointToLine(r,t,e,n,i,a)},pointToLine:function(r,t,e,n,i,a){var o=[e-r,n-t];if(a3(o,[0,0]))return Math.sqrt((i-r)*(i-r)+(a-t)*(a-t));var s=[-o[1],o[0]];Tc(s,s);var l=[i-r,a-t];return Math.abs(ET(l,s))},tangentAngle:function(r,t,e,n){return Math.atan2(n-t,e-r)}},Phe=1e-4;function x$(r,t,e,n,i,a){var o,s=1/0,l=[e,n],u=20;a&&a>200&&(u=a/10);for(var c=1/u,f=c/10,d=0;d<=u;d++){var h=d*c,v=[i.apply(null,r.concat([h])),i.apply(null,t.concat([h]))],p=fo(l[0],l[1],v[0],v[1]);p<s&&(o=h,s=p)}if(o===0)return{x:r[0],y:t[0]};if(o===1){var g=r.length;return{x:r[g-1],y:t[g-1]}}s=1/0;for(var d=0;d<32&&!(f<Phe);d++){var m=o-f,y=o+f,v=[i.apply(null,r.concat([m])),i.apply(null,t.concat([m]))],p=fo(l[0],l[1],v[0],v[1]);if(m>=0&&p<s)o=m,s=p;else{var b=[i.apply(null,r.concat([y])),i.apply(null,t.concat([y]))],x=fo(l[0],l[1],b[0],b[1]);y<=1&&x<s?(o=y,s=x):f*=.5}}return{x:i.apply(null,r.concat([o])),y:i.apply(null,t.concat([o]))}}function Dhe(r,t){for(var e=0,n=r.length,i=0;i<n;i++){var a=r[i],o=t[i],s=r[(i+1)%n],l=t[(i+1)%n];e+=fo(a,o,s,l)}return e/2}function Rc(r,t,e,n){var i=1-n;return i*i*r+2*n*i*t+n*n*e}function w$(r,t,e){var n=r+e-2*t;if(k1(n,0))return[.5];var i=(r-t)/n;return i<=1&&i>=0?[i]:[]}function S$(r,t,e,n){return 2*(1-n)*(t-r)+2*n*(e-t)}function C$(r,t,e,n,i,a,o){var s=Rc(r,e,i,o),l=Rc(t,n,a,o),u=Ga.pointAt(r,t,e,n,o),c=Ga.pointAt(e,n,i,a,o);return[[r,t,u.x,u.y,s,l],[s,l,c.x,c.y,i,a]]}function mA(r,t,e,n,i,a,o){if(o===0)return(fo(r,t,e,n)+fo(e,n,i,a)+fo(r,t,i,a))/2;var s=C$(r,t,e,n,i,a,.5),l=s[0],u=s[1];return l.push(o-1),u.push(o-1),mA.apply(null,l)+mA.apply(null,u)}var yA={box:function(r,t,e,n,i,a){var o=w$(r,e,i)[0],s=w$(t,n,a)[0],l=[r,i],u=[t,a];return o!==void 0&&l.push(Rc(r,e,i,o)),s!==void 0&&u.push(Rc(t,n,a,s)),Dc(l,u)},length:function(r,t,e,n,i,a){return mA(r,t,e,n,i,a,3)},nearestPoint:function(r,t,e,n,i,a,o,s){return x$([r,e,i],[t,n,a],o,s,Rc)},pointDistance:function(r,t,e,n,i,a,o,s){var l=this.nearestPoint(r,t,e,n,i,a,o,s);return fo(l.x,l.y,o,s)},interpolationAt:Rc,pointAt:function(r,t,e,n,i,a,o){return{x:Rc(r,e,i,o),y:Rc(t,n,a,o)}},divide:function(r,t,e,n,i,a,o){return C$(r,t,e,n,i,a,o)},tangentAngle:function(r,t,e,n,i,a,o){var s=S$(r,e,i,o),l=S$(t,n,a,o),u=Math.atan2(l,s);return M1(u)}};function Oc(r,t,e,n,i){var a=1-i;return a*a*a*r+3*t*i*a*a+3*e*i*i*a+n*i*i*i}function E$(r,t,e,n,i){var a=1-i;return 3*(a*a*(t-r)+2*a*i*(e-t)+i*i*(n-e))}function bA(r,t,e,n){var i=-3*r+9*t-9*e+3*n,a=6*r-12*t+6*e,o=3*t-3*r,s=[],l,u,c;if(k1(i,0))k1(a,0)||(l=-o/a,l>=0&&l<=1&&s.push(l));else{var f=a*a-4*i*o;k1(f,0)?s.push(-a/(2*i)):f>0&&(c=Math.sqrt(f),l=(-a+c)/(2*i),u=(-a-c)/(2*i),l>=0&&l<=1&&s.push(l),u>=0&&u<=1&&s.push(u))}return s}function _$(r,t,e,n,i,a,o,s,l){var u=Oc(r,e,i,o,l),c=Oc(t,n,a,s,l),f=Ga.pointAt(r,t,e,n,l),d=Ga.pointAt(e,n,i,a,l),h=Ga.pointAt(i,a,o,s,l),v=Ga.pointAt(f.x,f.y,d.x,d.y,l),p=Ga.pointAt(d.x,d.y,h.x,h.y,l);return[[r,t,f.x,f.y,v.x,v.y,u,c],[u,c,p.x,p.y,h.x,h.y,o,s]]}function xA(r,t,e,n,i,a,o,s,l){if(l===0)return Dhe([r,e,i,o],[t,n,a,s]);var u=_$(r,t,e,n,i,a,o,s,.5),c=u[0],f=u[1];return c.push(l-1),f.push(l-1),xA.apply(null,c)+xA.apply(null,f)}var Nv={extrema:bA,box:function(r,t,e,n,i,a,o,s){for(var l=[r,o],u=[t,s],c=bA(r,e,i,o),f=bA(t,n,a,s),d=0;d<c.length;d++)l.push(Oc(r,e,i,o,c[d]));for(var d=0;d<f.length;d++)u.push(Oc(t,n,a,s,f[d]));return Dc(l,u)},length:function(r,t,e,n,i,a,o,s){return xA(r,t,e,n,i,a,o,s,3)},nearestPoint:function(r,t,e,n,i,a,o,s,l,u,c){return x$([r,e,i,o],[t,n,a,s],l,u,Oc,c)},pointDistance:function(r,t,e,n,i,a,o,s,l,u,c){var f=this.nearestPoint(r,t,e,n,i,a,o,s,l,u,c);return fo(f.x,f.y,l,u)},interpolationAt:Oc,pointAt:function(r,t,e,n,i,a,o,s,l){return{x:Oc(r,e,i,o,l),y:Oc(t,n,a,s,l)}},divide:function(r,t,e,n,i,a,o,s,l){return _$(r,t,e,n,i,a,o,s,l)},tangentAngle:function(r,t,e,n,i,a,o,s,l){var u=E$(r,e,i,o,l),c=E$(t,n,a,s,l);return M1(Math.atan2(c,u))}};function T$(r,t){var e=Math.abs(r);return t>0?e:e*-1}var Rhe={box:function(r,t,e,n){return{x:r-e,y:t-n,width:e*2,height:n*2}},length:function(r,t,e,n){return Math.PI*(3*(e+n)-Math.sqrt((3*e+n)*(e+3*n)))},nearestPoint:function(r,t,e,n,i,a){var o=e,s=n;if(o===0||s===0)return{x:r,y:t};for(var l=i-r,u=a-t,c=Math.abs(l),f=Math.abs(u),d=o*o,h=s*s,v=Math.PI/4,p,g,m=0;m<4;m++){p=o*Math.cos(v),g=s*Math.sin(v);var y=(d-h)*Math.pow(Math.cos(v),3)/o,b=(h-d)*Math.pow(Math.sin(v),3)/s,x=p-y,w=g-b,S=c-y,C=f-b,_=Math.hypot(w,x),T=Math.hypot(C,S),E=_*Math.asin((x*C-w*S)/(_*T)),k=E/Math.sqrt(d+h-p*p-g*g);v+=k,v=Math.min(Math.PI/2,Math.max(0,v))}return{x:r+T$(p,l),y:t+T$(g,u)}},pointDistance:function(r,t,e,n,i,a){var o=this.nearestPoint(r,t,e,n,i,a);return fo(o.x,o.y,i,a)},pointAt:function(r,t,e,n,i){var a=2*Math.PI*i;return{x:r+e*Math.cos(a),y:t+n*Math.sin(a)}},tangentAngle:function(r,t,e,n,i){var a=2*Math.PI*i,o=Math.atan2(n*Math.cos(a),-e*Math.sin(a));return M1(o)}};function Ohe(r,t,e,n,i,a,o,s){return-1*e*Math.cos(i)*Math.sin(s)-n*Math.sin(i)*Math.cos(s)}function Lhe(r,t,e,n,i,a,o,s){return-1*e*Math.sin(i)*Math.sin(s)+n*Math.cos(i)*Math.cos(s)}function Fhe(r,t,e){return Math.atan(-t/r*Math.tan(e))}function Nhe(r,t,e){return Math.atan(t/(r*Math.tan(e)))}function A$(r,t,e,n,i,a){return e*Math.cos(i)*Math.cos(a)-n*Math.sin(i)*Math.sin(a)+r}function k$(r,t,e,n,i,a){return e*Math.sin(i)*Math.cos(a)+n*Math.cos(i)*Math.sin(a)+t}function Bhe(r,t,e,n){var i=Math.atan2(n*r,e*t);return(i+Math.PI*2)%(Math.PI*2)}function M$(r,t,e){return{x:r*Math.cos(e),y:t*Math.sin(e)}}function I$(r,t,e){var n=Math.cos(e),i=Math.sin(e);return[r*n-t*i,r*i+t*n]}var P$={box:function(r,t,e,n,i,a,o){for(var s=Fhe(e,n,i),l=1/0,u=-1/0,c=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var d=s+f;a<o?a<d&&d<o&&c.push(d):o<d&&d<a&&c.push(d)}for(var f=0;f<c.length;f++){var h=A$(r,t,e,n,i,c[f]);h<l&&(l=h),h>u&&(u=h)}for(var v=Nhe(e,n,i),p=1/0,g=-1/0,m=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var y=v+f;a<o?a<y&&y<o&&m.push(y):o<y&&y<a&&m.push(y)}for(var f=0;f<m.length;f++){var b=k$(r,t,e,n,i,m[f]);b<p&&(p=b),b>g&&(g=b)}return{x:l,y:p,width:u-l,height:g-p}},length:function(r,t,e,n,i,a,o){},nearestPoint:function(r,t,e,n,i,a,o,s,l){var u=I$(s-r,l-t,-i),c=u[0],f=u[1],d=Rhe.nearestPoint(0,0,e,n,c,f),h=Bhe(e,n,d.x,d.y);h<a?d=M$(e,n,a):h>o&&(d=M$(e,n,o));var v=I$(d.x,d.y,i);return{x:v[0]+r,y:v[1]+t}},pointDistance:function(r,t,e,n,i,a,o,s,l){var u=this.nearestPoint(r,t,e,n,s,l);return fo(u.x,u.y,s,l)},pointAt:function(r,t,e,n,i,a,o,s){var l=(o-a)*s+a;return{x:A$(r,t,e,n,i,l),y:k$(r,t,e,n,i,l)}},tangentAngle:function(r,t,e,n,i,a,o,s){var l=(o-a)*s+a,u=Ohe(r,t,e,n,i,a,o,l),c=Lhe(r,t,e,n,i,a,o,l);return M1(Math.atan2(c,u))}};function D$(r){for(var t=0,e=[],n=0;n<r.length-1;n++){var i=r[n],a=r[n+1],o=fo(i[0],i[1],a[0],a[1]),s={from:i,to:a,length:o};e.push(s),t+=o}return{segments:e,totalLength:t}}function $he(r){if(r.length<2)return 0;for(var t=0,e=0;e<r.length-1;e++){var n=r[e],i=r[e+1];t+=fo(n[0],n[1],i[0],i[1])}return t}function zhe(r,t){if(t>1||t<0||r.length<2)return null;var e=D$(r),n=e.segments,i=e.totalLength;if(i===0)return{x:r[0][0],y:r[0][1]};for(var a=0,o=null,s=0;s<n.length;s++){var l=n[s],u=l.from,c=l.to,f=l.length/i;if(t>=a&&t<=a+f){var d=(t-a)/f;o=Ga.pointAt(u[0],u[1],c[0],c[1],d);break}a+=f}return o}function Ghe(r,t){if(t>1||t<0||r.length<2)return 0;for(var e=D$(r),n=e.segments,i=e.totalLength,a=0,o=0,s=0;s<n.length;s++){var l=n[s],u=l.from,c=l.to,f=l.length/i;if(t>=a&&t<=a+f){o=Math.atan2(c[1]-u[1],c[0]-u[0]);break}a+=f}return o}function Uhe(r,t,e){for(var n=1/0,i=0;i<r.length-1;i++){var a=r[i],o=r[i+1],s=Ga.pointDistance(a[0],a[1],o[0],o[1],t,e);s<n&&(n=s)}return n}var R$={box:function(r){for(var t=[],e=[],n=0;n<r.length;n++){var i=r[n];t.push(i[0]),e.push(i[1])}return Dc(t,e)},length:function(r){return $he(r)},pointAt:function(r,t){return zhe(r,t)},pointDistance:function(r,t,e){return Uhe(r,t,e)},tangentAngle:function(r,t){return Ghe(r,t)}};function O$(r,t){return!r||!t?r||t:{minX:Math.min(r.minX,t.minX),minY:Math.min(r.minY,t.minY),maxX:Math.max(r.maxX,t.maxX),maxY:Math.max(r.maxY,t.maxY)}}function wA(r,t){var e=r.get("startArrowShape"),n=r.get("endArrowShape"),i=null,a=null;return e&&(i=e.getCanvasBBox(),t=O$(t,i)),n&&(a=n.getCanvasBBox(),t=O$(t,a)),t}function Vhe(r){for(var t=r.attr(),e=t.points,n=[],i=[],a=0;a<e.length;a++){var o=e[a];n.push(o[0]),i.push(o[1])}var s=Dc(n,i),l=s.x,u=s.y,c=s.width,f=s.height,d={minX:l,minY:u,maxX:l+c,maxY:u+f};return d=wA(r,d),{x:d.minX,y:d.minY,width:d.maxX-d.minX,height:d.maxY-d.minY}}function Hhe(r){for(var t=r.attr(),e=t.points,n=[],i=[],a=0;a<e.length;a++){var o=e[a];n.push(o[0]),i.push(o[1])}return Dc(n,i)}var SA=null;function I1(){if(!SA){var r=document.createElement("canvas");r.width=1,r.height=1,SA=r.getContext("2d")}return SA}function P1(r,t,e){var n=1;if(ot(r)&&(n=r.split(`
`).length),n>1){var i=Whe(t,e);return t*n+i*(n-1)}return t}function Whe(r,t){return t?t-r:r*.14}function jhe(r,t){var e=I1(),n=0;if(nt(r)||r==="")return n;if(e.save(),e.font=t,ot(r)&&r.includes(`
`)){var i=r.split(`
`);G(i,function(a){var o=e.measureText(a).width;n<o&&(n=o)})}else n=e.measureText(r).width;return e.restore(),n}function D1(r){var t=r.fontSize,e=r.fontFamily,n=r.fontWeight,i=r.fontStyle,a=r.fontVariant;return[i,a,n,t+"px",e].join(" ").trim()}function Yhe(r){var t=r.attr(),e=t.x,n=t.y,i=t.text,a=t.fontSize,o=t.lineHeight,s=t.font;s||(s=D1(t));var l=jhe(i,s),u;if(!l)u={x:e,y:n,width:0,height:0};else{var c=t.textAlign,f=t.textBaseline,d=P1(i,a,o),h={x:e,y:n-d};c&&(c==="end"||c==="right"?h.x-=l:c==="center"&&(h.x-=l/2)),f&&(f==="top"?h.y+=d:f==="middle"&&(h.y+=d/2)),u={x:h.x,y:h.y,width:l,height:d}}return u}var Xhe=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,qhe=/[^\s\,]+/ig;function Khe(r){var t=r||[];if(Qe(t))return t;if(ot(t))return t=t.match(Xhe),G(t,function(e,n){if(e=e.match(qhe),e[0].length>1){var i=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=i}G(e,function(a,o){isNaN(a)||(e[o]=+a)}),t[n]=e}),t}function Zhe(r,t,e,n){var i=[],a=!!n,o,s,l,u,c,f,d;if(a){l=n[0],u=n[1];for(var h=0,v=r.length;h<v;h+=1){var p=r[h];l=Na([0,0],l,p),u=Ba([0,0],u,p)}}for(var h=0,g=r.length;h<g;h+=1){var p=r[h];if(h===0&&!e)d=p;else if(h===g-1&&!e)f=p,i.push(d),i.push(f);else{var m=[h?h-1:g-1,h-1][e?0:1];o=r[m],s=r[e?(h+1)%g:h+1];var y=[0,0];y=ud(y,s,o),y=gi(y,y,t);var b=Mv(p,o),x=Mv(p,s),w=b+x;w!==0&&(b/=w,x/=w);var S=gi([0,0],y,-b),C=gi([0,0],y,x);f=Bi([0,0],p,S),c=Bi([0,0],p,C),c=Na([0,0],c,Ba([0,0],s,p)),c=Ba([0,0],c,Na([0,0],s,p)),S=ud([0,0],c,p),S=gi([0,0],S,-b/x),f=Bi([0,0],p,S),f=Na([0,0],f,Ba([0,0],o,p)),f=Ba([0,0],f,Na([0,0],o,p)),C=ud([0,0],p,f),C=gi([0,0],C,x/b),c=Bi([0,0],p,C),a&&(f=Ba([0,0],f,l),f=Na([0,0],f,u),c=Ba([0,0],c,l),c=Na([0,0],c,u)),i.push(d),i.push(f),d=c}}return e&&i.push(i.shift()),i}function CA(r,t,e){t===void 0&&(t=!1),e===void 0&&(e=[[0,0],[1,1]]);for(var n=!!t,i=[],a=0,o=r.length;a<o;a+=2)i.push([r[a],r[a+1]]);for(var s=Zhe(i,.4,n,e),l=i.length,u=[],c,f,d,a=0;a<l-1;a+=1)c=s[a*2],f=s[a*2+1],d=i[a+1],u.push(["C",c[0],c[1],f[0],f[1],d[0],d[1]]);return n&&(c=s[l],f=s[l+1],d=i[0],u.push(["C",c[0],c[1],f[0],f[1],d[0],d[1]])),u}var Wm=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Qhe=new RegExp("([a-z])["+Wm+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Wm+"]*,?["+Wm+"]*)+)","ig"),Jhe=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Wm+"]*,?["+Wm+"]*","ig");function jm(r){if(!r)return null;if(Qe(r))return r;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(r).replace(Qhe,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(Jhe,function(l,u){u&&o.push(+u)}),s==="m"&&o.length>2&&(e.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&e.push([i,o[0]]),s==="r")e.push([i].concat(o));else for(;o.length>=t[s]&&(e.push([i].concat(o.splice(0,t[s]))),!!t[s]););return""}),e}var eve=/[a-z]/;function L$(r,t){return[t[0]+(t[0]-r[0]),t[1]+(t[1]-r[1])]}function F$(r){var t=jm(r);if(!t||!t.length)return[["M",0,0]];for(var e=!1,n=0;n<t.length;n++){var i=t[n][0];if(eve.test(i)||["V","H","T","S"].indexOf(i)>=0){e=!0;break}}if(!e)return t;var a=[],o=0,s=0,l=0,u=0,c=0,f=t[0];(f[0]==="M"||f[0]==="m")&&(o=+f[1],s=+f[2],l=o,u=s,c++,a[0]=["M",o,s]);for(var n=c,d=t.length;n<d;n++){var h=t[n],v=a[n-1],p=[],i=h[0],g=i.toUpperCase();if(i!==g)switch(p[0]=g,g){case"A":p[1]=h[1],p[2]=h[2],p[3]=h[3],p[4]=h[4],p[5]=h[5],p[6]=+h[6]+o,p[7]=+h[7]+s;break;case"V":p[1]=+h[1]+s;break;case"H":p[1]=+h[1]+o;break;case"M":l=+h[1]+o,u=+h[2]+s,p[1]=l,p[2]=u;break;default:for(var m=1,y=h.length;m<y;m++)p[m]=+h[m]+(m%2?o:s)}else p=t[n];switch(g){case"Z":o=+l,s=+u;break;case"H":o=p[1],p=["L",o,s];break;case"V":s=p[1],p=["L",o,s];break;case"T":o=p[1],s=p[2];var b=L$([v[1],v[2]],[v[3],v[4]]);p=["Q",b[0],b[1],o,s];break;case"S":o=p[p.length-2],s=p[p.length-1];var x=v.length,w=L$([v[x-4],v[x-3]],[v[x-2],v[x-1]]);p=["C",w[0],w[1],p[1],p[2],o,s];break;case"M":l=p[p.length-2],u=p[p.length-1];break;default:o=p[p.length-2],s=p[p.length-1]}a.push(p)}return a}function R1(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function EA(r,t){return R1(r)*R1(t)?(r[0]*t[0]+r[1]*t[1])/(R1(r)*R1(t)):1}function N$(r,t){return(r[0]*t[1]<r[1]*t[0]?-1:1)*Math.acos(EA(r,t))}function _A(r,t){return r[0]===t[0]&&r[1]===t[1]}function tve(r,t){var e=t[1],n=t[2],i=Ux(Vx(t[3]),Math.PI*2),a=t[4],o=t[5],s=r[0],l=r[1],u=t[6],c=t[7],f=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,d=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,h=f*f/(e*e)+d*d/(n*n);h>1&&(e*=Math.sqrt(h),n*=Math.sqrt(h));var v=e*e*(d*d)+n*n*(f*f),p=v?Math.sqrt((e*e*(n*n)-v)/v):1;a===o&&(p*=-1),isNaN(p)&&(p=0);var g=n?p*e*d/n:0,m=e?p*-n*f/e:0,y=(s+u)/2+Math.cos(i)*g-Math.sin(i)*m,b=(l+c)/2+Math.sin(i)*g+Math.cos(i)*m,x=[(f-g)/e,(d-m)/n],w=[(-1*f-g)/e,(-1*d-m)/n],S=N$([1,0],x),C=N$(x,w);return EA(x,w)<=-1&&(C=Math.PI),EA(x,w)>=1&&(C=0),o===0&&C>0&&(C=C-2*Math.PI),o===1&&C<0&&(C=C+2*Math.PI),{cx:y,cy:b,rx:_A(r,[u,c])?0:e,ry:_A(r,[u,c])?0:n,startAngle:S,endAngle:S+C,xRotation:i,arcFlag:a,sweepFlag:o}}function B$(r,t){return[t[0]+(t[0]-r[0]),t[1]+(t[1]-r[1])]}function TA(r){r=Khe(r);for(var t=[],e=null,n=null,i=null,a=0,o=r.length,s=0;s<o;s++){var l=r[s];n=r[s+1];var u=l[0],c={command:u,prePoint:e,params:l,startTangent:null,endTangent:null};switch(u){case"M":i=[l[1],l[2]],a=s;break;case"A":var f=tve(e,l);c.arcParams=f;break}if(u==="Z")e=i,n=r[a+1];else{var d=l.length;e=[l[d-2],l[d-1]]}n&&n[0]==="Z"&&(n=r[a],t[a]&&(t[a].prePoint=e)),c.currentPoint=e,t[a]&&_A(e,t[a].currentPoint)&&(t[a].prePoint=c.prePoint);var h=n?[n[n.length-2],n[n.length-1]]:null;c.nextPoint=h;var v=c.prePoint;if(["L","H","V"].includes(u))c.startTangent=[v[0]-e[0],v[1]-e[1]],c.endTangent=[e[0]-v[0],e[1]-v[1]];else if(u==="Q"){var p=[l[1],l[2]];c.startTangent=[v[0]-p[0],v[1]-p[1]],c.endTangent=[e[0]-p[0],e[1]-p[1]]}else if(u==="T"){var g=t[s-1],p=B$(g.currentPoint,v);g.command==="Q"?(c.command="Q",c.startTangent=[v[0]-p[0],v[1]-p[1]],c.endTangent=[e[0]-p[0],e[1]-p[1]]):(c.command="TL",c.startTangent=[v[0]-e[0],v[1]-e[1]],c.endTangent=[e[0]-v[0],e[1]-v[1]])}else if(u==="C"){var m=[l[1],l[2]],y=[l[3],l[4]];c.startTangent=[v[0]-m[0],v[1]-m[1]],c.endTangent=[e[0]-y[0],e[1]-y[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[m[0]-y[0],m[1]-y[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[y[0]-m[0],y[1]-m[1]])}else if(u==="S"){var g=t[s-1],m=B$(g.currentPoint,v),y=[l[1],l[2]];g.command==="C"?(c.command="C",c.startTangent=[v[0]-m[0],v[1]-m[1]],c.endTangent=[e[0]-y[0],e[1]-y[1]]):(c.command="SQ",c.startTangent=[v[0]-y[0],v[1]-y[1]],c.endTangent=[e[0]-y[0],e[1]-y[1]])}else if(u==="A"){var b=.001,x=c.arcParams||{},w=x.cx,S=w===void 0?0:w,C=x.cy,_=C===void 0?0:C,T=x.rx,E=T===void 0?0:T,k=x.ry,I=k===void 0?0:k,P=x.sweepFlag,F=P===void 0?0:P,$=x.startAngle,R=$===void 0?0:$,L=x.endAngle,O=L===void 0?0:L;F===0&&(b*=-1);var B=E*Math.cos(R-b)+S,U=I*Math.sin(R-b)+_;c.startTangent=[B-i[0],U-i[1]];var W=E*Math.cos(R+O+b)+S,X=I*Math.sin(R+O-b)+_;c.endTangent=[v[0]-W,v[1]-X]}t.push(c)}return t}var $$=function(r,t,e){return r>=t&&r<=e};function rve(r,t,e,n){var i=.001,a={x:e.x-r.x,y:e.y-r.y},o={x:t.x-r.x,y:t.y-r.y},s={x:n.x-e.x,y:n.y-e.y},l=o.x*s.y-o.y*s.x,u=l*l,c=o.x*o.x+o.y*o.y,f=s.x*s.x+s.y*s.y,d=null;if(u>i*c*f){var h=(a.x*s.y-a.y*s.x)/l,v=(a.x*o.y-a.y*o.x)/l;$$(h,0,1)&&$$(v,0,1)&&(d={x:r.x+h*o.x,y:r.y+h*o.y})}return d}var nve=1e-6;function AA(r){return Math.abs(r)<nve?0:r<0?-1:1}function ive(r,t,e){return(e[0]-r[0])*(t[1]-r[1])==(t[0]-r[0])*(e[1]-r[1])&&Math.min(r[0],t[0])<=e[0]&&e[0]<=Math.max(r[0],t[0])&&Math.min(r[1],t[1])<=e[1]&&e[1]<=Math.max(r[1],t[1])}function z$(r,t,e){var n=!1,i=r.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=r[a],s=r[(a+1)%i];if(ive(o,s,[t,e]))return!0;AA(o[1]-e)>0!=AA(s[1]-e)>0&&AA(t-(e-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(n=!n)}return n}function G$(r){for(var t=[],e=r.length,n=0;n<e-1;n++){var i=r[n],a=r[n+1];t.push({from:{x:i[0],y:i[1]},to:{x:a[0],y:a[1]}})}if(t.length>1){var o=r[0],s=r[e-1];t.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return t}function ave(r,t){var e=!1;return G(r,function(n){if(rve(n.from,n.to,t.from,t.to))return e=!0,!1}),e}function U$(r){var t=r.map(function(n){return n[0]}),e=r.map(function(n){return n[1]});return{minX:Math.min.apply(null,t),maxX:Math.max.apply(null,t),minY:Math.min.apply(null,e),maxY:Math.max.apply(null,e)}}function ove(r,t){return!(t.minX>r.maxX||t.maxX<r.minX||t.minY>r.maxY||t.maxY<r.minY)}function sve(r,t){if(r.length<2||t.length<2)return!1;var e=U$(r),n=U$(t);if(!ove(e,n))return!1;var i=!1;if(G(t,function(l){if(z$(r,l[0],l[1]))return i=!0,!1}),i||(G(r,function(l){if(z$(t,l[0],l[1]))return i=!0,!1}),i))return!0;var a=G$(r),o=G$(t),s=!1;return G(o,function(l){if(ave(a,l))return s=!0,!1}),s}function lve(r,t){for(var e=[],n=[],i=[],a=0;a<r.length;a++){var o=r[a],s=o.currentPoint,l=o.params,u=o.prePoint,c=void 0;switch(o.command){case"Q":c=yA.box(u[0],u[1],l[1],l[2],l[3],l[4]);break;case"C":c=Nv.box(u[0],u[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var f=o.arcParams;c=P$.box(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:e.push(s[0]),n.push(s[1]);break}c&&(o.box=c,e.push(c.x,c.x+c.width),n.push(c.y,c.y+c.height)),t&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&i.push(o)}e=e.filter(function(m){return!Number.isNaN(m)}),n=n.filter(function(m){return!Number.isNaN(m)});var d=sa(e),h=sa(n),v=Xi(e),p=Xi(n);if(i.length===0)return{x:d,y:h,width:v-d,height:p-h};for(var a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,g=void 0;s[0]===d?(g=O1(o,t),d=d-g.xExtra):s[0]===v&&(g=O1(o,t),v=v+g.xExtra),s[1]===h?(g=O1(o,t),h=h-g.yExtra):s[1]===p&&(g=O1(o,t),p=p+g.yExtra)}return{x:d,y:h,width:v-d,height:p-h}}function O1(r,t){var e=r.prePoint,n=r.currentPoint,i=r.nextPoint,a=Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2),o=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),s=Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||Math.sin(l)===0||ba(l,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),c=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));u=u>Math.PI/2?Math.PI-u:u,c=c>Math.PI/2?Math.PI-c:c;var f={xExtra:Math.cos(l/2-u)*(t/2*(1/Math.sin(l/2)))-t/2||0,yExtra:Math.cos(c-l/2)*(t/2*(1/Math.sin(l/2)))-t/2||0};return f}function uve(r){var t=r.attr(),e=t.path,n=t.stroke,i=n?t.lineWidth:0,a=r.get("segments")||TA(e),o=lve(a,i),s=o.x,l=o.y,u=o.width,c=o.height,f={minX:s,minY:l,maxX:s+u,maxY:l+c};return f=wA(r,f),{x:f.minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY}}function cve(r){var t=r.attr(),e=t.x1,n=t.y1,i=t.x2,a=t.y2,o=Math.min(e,i),s=Math.max(e,i),l=Math.min(n,a),u=Math.max(n,a),c={minX:o,maxX:s,minY:l,maxY:u};return c=wA(r,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function fve(r){var t=r.attr(),e=t.x,n=t.y,i=t.rx,a=t.ry;return{x:e-i,y:n-a,width:i*2,height:a*2}}Fl("rect",g$);Fl("image",g$);Fl("circle",m$);Fl("marker",m$);Fl("polyline",Vhe);Fl("polygon",Hhe);Fl("text",Yhe);Fl("path",uve);Fl("line",cve);Fl("ellipse",fve);var dve=function(r){Ie(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.item=n.item,i.canvasX=n.canvasX,i.canvasY=n.canvasY,i.wheelDelta=n.wheelDelta,i.detail=n.detail,i}return t}(Rm),kA=function(t){return t+"-"+Math.random()+Date.now()},MA=function(t){if(Qe(t))switch(t.length){case 4:return t;case 3:return t.push(t[1]),t;case 2:return t.concat(t);case 1:return[t[0],t[0],t[0],t[0]];default:return[0,0,0,0]}if(zt(t))return[t,t,t,t];if(ot(t)){var e=parseInt(t,10);return[e,e,e,e]}return[0,0,0,0]},hve=function(t){var e=new dve(t.type,t);return e.clientX=t.clientX,e.clientY=t.clientY,e.x=t.x,e.y=t.y,e.target=t.target,e.currentTarget=t.currentTarget,e.bubbles=!0,e.item=t.item,e},vve=function(t){if(!t)return!1;for(var e=9,n=[1,0,0,0,1,0,0,0,1],i=0;i<e;i++)if(t[i]!==n[i])return!0;return!1},L1=function(t){return Number.isNaN(Number(t))},V$=function(t){for(var e=1/0,n=-1/0,i=1/0,a=-1/0,o=0;o<t.length;o++){var s=t[o],l=s.getBBox(),u=l.minX,c=l.minY,f=l.maxX,d=l.maxY;u<e&&(e=u),c<i&&(i=c),f>n&&(n=f),d>a&&(a=d)}var h=Math.floor(e),v=Math.floor(i),p=Math.ceil(n)-Math.floor(e),g=Math.ceil(a)-Math.floor(i);return{x:h,y:v,width:p,height:g,minX:e,minY:i,maxX:n,maxY:a}},pve=function(t,e,n,i,a){e===void 0&&(e=15),n===void 0&&(n="quadratic"),i===void 0&&(i=void 0),a===void 0&&(a=void 0);for(var o=t.length,s=e*2,l=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],u={},c=[],f={},d=0;d<o;d++){var h=t[d],v=h.source,p=h.target,g=v+"-"+p;if(!c[d]){u[g]||(u[g]=[]),c[d]=!0,u[g].push(h);for(var m=0;m<o;m++)if(d!==m){var y=t[m],b=y.source,x=y.target;c[m]||(v===x&&p===b?(u[g].push(y),c[m]=!0,f[b+"|"+x+"|"+(u[g].length-1)]=!0):v===b&&p===x&&(u[g].push(y),c[m]=!0))}}}for(var w in u)for(var S=u[w],C=S.length,_=0;_<C;_++){var T=S[_];if(T.source===T.target){a&&(T.type=a),T.loopCfg={position:l[_%8],dist:Math.floor(_/8)*20+50};continue}if(C===1&&i&&T.source!==T.target){T.type=i;continue}T.type=n;var E=(_%2==0?1:-1)*(f[T.source+"|"+T.target+"|"+_]?-1:1);C%2==1?T.curveOffset=E*Math.ceil(_/2)*s:T.curveOffset=E*(Math.floor(_/2)*s+e)}return t},gve=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",uniqueId:kA,formatPadding:MA,cloneEvent:hve,isViewportChanged:vve,isNaN:L1,calculationItemsBBox:V$,processParallelEdges:pve}),mve=function(){function r(t){this.destroyed=!1,this.graph=t,this.destroyed=!1}return r.prototype.getViewCenter=function(){var t=this.getFormatPadding(),e=this.graph,n=this.graph.get("width"),i=e.get("height");return{x:(n-t[1]-t[3])/2+t[3],y:(i-t[0]-t[2])/2+t[0]}},r.prototype.fitCenter=function(){var t=this.graph,e=t.get("group");e.resetMatrix();var n=e.getCanvasBBox();if(!(n.width===0||n.height===0)){var i=this.getViewCenter(),a={x:n.x+n.width/2,y:n.y+n.height/2};t.translate(i.x-a.x,i.y-a.y)}},r.prototype.fitView=function(){var t=this.graph,e=this.getFormatPadding(),n=t.get("width"),i=t.get("height"),a=t.get("group");a.resetMatrix();var o=a.getCanvasBBox();if(!(o.width===0||o.height===0)){var s=this.getViewCenter(),l={x:o.x+o.width/2,y:o.y+o.height/2};t.translate(s.x-l.x,s.y-l.y);var u=(n-e[1]-e[3])/o.width,c=(i-e[0]-e[2])/o.height,f=u;u>c&&(f=c),t.zoom(f,s)||console.warn("zoom failed, ratio out of range, ratio: %f",f)}},r.prototype.fitViewByRules=function(t){var e=t.onlyOutOfViewPort,n=e===void 0?!1:e,i=t.direction,a=i===void 0?"both":i,o=t.ratioRule,s=o===void 0?"min":o,l=this.graph,u=this.getFormatPadding(),c=l.get("width"),f=l.get("height"),d=l.get("group");d.resetMatrix();var h=d.getCanvasBBox();if(!(h.width===0||h.height===0)){var v=this.getViewCenter(),p={x:h.x+h.width/2,y:h.y+h.height/2};l.translate(v.x-p.x,v.y-p.y);var g=(c-u[1]-u[3])/h.width,m=(f-u[0]-u[2])/h.height,y;a==="x"?y=g:a==="y"?y=m:y=s==="max"?Math.max(g,m):Math.min(g,m),n&&(y=y<1?y:1);var b=l.getZoom(),x=b*y,w=l.get("minZoom");x<w&&(x=w,console.warn("fitview failed, ratio out of range, ratio: %f",y,"graph minzoom has been used instead")),l.zoomTo(x,v)}},r.prototype.getFormatPadding=function(){var t=this.graph.get("fitViewPadding");return MA(t)},r.prototype.focusPoint=function(t,e,n){var i=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),e){var l=(o.x-t.x)*s[0],u=(o.y-t.y)*s[4],c=0,f=0,d=0,h=0;this.graph.get("canvas").animate(function(v){d=l*v,h=u*v,i.graph.translate(d-c,h-f),c=d,f=h},A({},n))}else this.graph.translate((o.x-t.x)*s[0],(o.y-t.y)*s[4])},r.prototype.getPointByCanvas=function(t,e){var n=this.graph.get("group").getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=W3({x:t,y:e},n);return i},r.prototype.getPointByClient=function(t,e){var n=this.graph.get("canvas"),i=n.getPointByClient(t,e);return this.getPointByCanvas(i.x,i.y)},r.prototype.getClientByPoint=function(t,e){var n=this.graph.get("canvas"),i=this.getCanvasByPoint(t,e),a=n.getClientByPoint(i.x,i.y);return{x:a.x,y:a.y}},r.prototype.getCanvasByPoint=function(t,e){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),s1({x:t,y:e},n)},r.prototype.focus=function(t,e,n){if(ot(t)&&(t=this.graph.findById(t)),t){var i=0,a=0;if(t.getType&&t.getType()==="edge"){var o=t.getSource().get("group").getMatrix(),s=t.getTarget().get("group").getMatrix();o&&s?(i=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(i=o?o[6]:s[6],a=o?o[7]:s[7])}else{var l=t.get("group"),u=l.getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),i=u[6],a=u[7]}this.focusPoint({x:i,y:a},e,n)}},r.prototype.changeSize=function(t,e){var n=this.graph;if(!zt(t)||!zt(e))throw Error("invalid canvas width & height, please make sure width & height type is number");n.set({width:t,height:e});var i=n.get("canvas");i.changeSize(t,e);var a=n.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},r.prototype.destroy=function(){this.graph=null,this.destroyed=!1},r}();function F1(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?F1=function(e){return typeof e}:F1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F1(r)}function H$(r){if(typeof r!="string")return r;var t=function(C){if(typeof C!="string")return C;try{return JSON.parse(C.trim())}catch{return C.trim()}},e=t(r);if(typeof e!="string")return e;for(var n=function(C){return C[C.length-1]},i=r.trim(),a=[],o=[],s=function(){for(var C=[],_=0;_<arguments.length;_++)C[_]=arguments[_];return C.some(function(T){return n(o)===T})},l=function(){return n(a)},u=null,c=0,f="";c<i.length;){var d=i[c],h=s('"',"'");if(!h&&!d.trim()){c+=1;continue}var v=i[c-1]==="\\",p=s("}"),g=s("]"),m=s(","),y=l();if(h)if(n(o)===d&&!v){o.pop();var b=t(f);y.push(b),u=b,f=""}else f+=d;else if(g&&d===",")f&&(y.push(t(f)),f="");else if(p&&d===":")o.push(","),f&&(y.push(f),f="");else if(m&&d===",")f&&(y.push(t(f)),f=""),o.pop();else if(d==="}"&&(p||m)){f&&(y.push(t(f)),f=""),m&&o.pop();for(var x={},w=1;w<y.length;w+=2)x[y[w-1]]=y[w];a.pop(),a.length&&n(a).push(x),o.pop(),u=x}else d==="]"&&g?(f&&(y.push(t(f)),f=""),a.pop(),a.length&&n(a).push(y),o.pop(),u=y):d==="{"?(a.push([]),o.push("}")):d==="["?(a.push([]),o.push("]")):d==='"'?o.push('"'):d==="'"?o.push("'"):f+=d;c+=1}return u||f}var yve=function(t){return t.split("-").reduce(function(e,n){return e+n.charAt(0).toUpperCase()+n.slice(1)})},bve=function(t){return function(e){for(var n=t.length,i=[],a=0,o="";a<n;)if(t[a]==="{"&&t[a+1]==="{")i.push(o),o="",a+=2;else if(t[a]==="}"&&t[a+1]==="}"){if(i.length){var s=i.pop();o=ae(e,o,s.endsWith("=")?'"{'+o+'}"':o),i.push(s+o)}a+=2,o=""}else o+=t[a],a+=1;return i.push(o),i.map(function(l,u){return i[u-1]&&i[u-1].endsWith("=")?'"{'+l+'}"':l}).join("")}};function W$(r,t){var e={},n=r.getAttributeNames&&r.getAttributeNames()||[],i=r.children&&Array.from(r.children).map(function(s){return W$(s,t)}),a={},o=r.tagName?r.tagName.toLowerCase():"group";return o==="text"&&(e.text=r.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(n).forEach(function(s){var l=yve(s),u=r.getAttribute(s);try{if(l==="style"||l==="attrs"){var c=H$(u);e=A(A({},e),c)}else a[l]=H$(u)}catch(f){if(l==="style")throw f;a[l]=u}}),a.attrs=e,t&&t.style&&a.name&&F1(t.style[a.name])==="object"&&(a.attrs=A(A({},a.attrs),t.style[a.name])),t&&t.style&&a.keyshape&&(a.attrs=A(A({},a.attrs),t.style)),i.length&&(a.children=i),a}function xve(r,t,e){var n=r.attrs,i=n===void 0?{}:n,a={x:t.x||0,y:t.y||0,width:e.width||0,height:e.height||0},o,s;switch(r.type){case"maker":case"circle":i.r&&(s=2*i.r,o=2*i.r);break;case"text":i.text&&(s=u5(i.text,i.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,r.attrs=A({fontSize:12,fill:"#000"},i));break;default:i.width&&(s=i.width),i.height&&(o=i.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),i.marginTop&&(a.y+=i.marginTop),i.marginLeft&&(a.x+=i.marginLeft),a}function j$(r,t){var e;t===void 0&&(t={x:0,y:0});var n=A({x:0,y:0,width:0,height:0},t);if((e=r.children)===null||e===void 0?void 0:e.length){var i=r.attrs,a=i===void 0?{}:i,o=a.marginTop,s=A({},t);o&&(s.y+=o);for(var l=0;l<r.children.length;l++){r.children[l].attrs.key=(a.key||"root")+" -"+l+" ";var u=j$(r.children[l],s);if(u.bbox){var c=u.bbox;u.attrs.next==="inline"?s.x+=u.bbox.width:s.y+=u.bbox.height,c.width+c.x>n.width&&(n.width=c.width+c.x),c.height+c.y>n.height&&(n.height=c.height+c.y)}}}return r.bbox=xve(r,t,n),r.attrs=A(A({},r.attrs),r.bbox),r}function Y$(r,t){var e,n,i,a,o=(r||{}).type,s=((t==null?void 0:t.attrs)||{}).key;if(s&&r&&(r.attrs.key=s),!r&&t)return{action:"delete",val:t,type:o,key:s};if(r&&!t)return{action:"add",val:r,type:o};if(!r&&!t)return{action:"same",type:o};var l=[];if(((e=r.children)===null||e===void 0?void 0:e.length)>0||((n=t.children)===null||n===void 0?void 0:n.length)>0)for(var u=Math.max((i=r.children)===null||i===void 0?void 0:i.length,(a=t.children)===null||a===void 0?void 0:a.length),c=t.children||[],f=r.children||[],d=0;d<u;d+=1)l.push(Y$(f[d],c[d]));var h=Object.keys(t.attrs),v=Object.keys(r.attrs);return t.type!==r.type?{action:"restructure",nowTarget:r,formerTarget:t,key:s,children:l}:h.filter(function(p){return p!=="children"}).some(function(p){return r.attrs[p]!==t.attrs[p]||!v.includes(p)})?{action:"change",val:r,children:l,type:o,key:s}:{action:"same",children:l,type:o,key:s}}function X$(r){var t={},e=function(i){var a=typeof r=="function"?r(i):r,o=bve(a)(i),s=document.createElement("div");s.innerHTML=o;var l=s.children[0],u=j$(W$(l,i));return s.remove(),u};return{draw:function(i,a){var o=e(i),s=a,l=function u(c){var f=c.attrs,d=f===void 0?{}:f,h=c.bbox,v=c.type,p=c.children,g=Ur(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var m=a.addShape(c.type,A({attrs:d,origin:{bbox:h,type:v,children:p}},g));c.keyshape&&(s=m)}c.children&&c.children.forEach(function(y){return u(y)})};return l(o),t[i.id]=[o],s},update:function(i,a){t[i.id]||(t[i.id]=[]);var o=a.getContainer(),s=o.get("children"),l=e(i),u=t[i.id].pop(),c=Y$(l,u),f=function v(p){var g;p.type!=="group"&&o.addShape(p.type,{attrs:p.attrs}),((g=p.children)===null||g===void 0?void 0:g.length)&&p.children.map(function(m){return v(m)})},d=function v(p){var g,m=s.find(function(y){return y.attrs.key===p.attrs.key});m&&o.removeChild(m),((g=p.children)===null||g===void 0?void 0:g.length)&&p.children.map(function(y){return v(y)})},h=function v(p){var g=p.key;if(p.type!=="group"){var m=s.find(function(b){return b.attrs.key===g});switch(p.action){case"change":if(m){var y=p.val.keyshape?a.getOriginStyle():{};m.attr(A(A({},y),p.val.attrs))}break;case"add":f(p.val);break;case"delete":d(p.val);break;case"restructure":d(p.formerTarget),f(p.nowTarget);break}}p.children&&p.children.forEach(function(b){return v(b)})};h(c),t[i.id].push(l)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var IA={};function q$(r){return IA[r]||(IA[r]=ls(r)),IA[r]}var wve={defaultShapeType:"defaultType",className:null,getShape:function(t){var e=this,n=e[t]||e[e.defaultShapeType]||e["simple-circle"];return n},draw:function(t,e,n){var i=this.getShape(t);n.shapeMap={};var a=i.draw(e,n);return i.afterDraw&&i.afterDraw(e,n,a),a},baseUpdate:function(t,e,n,i){var a,o,s=this.getShape(t);s.update&&(s.mergeStyle=(a=s.getOptions)===null||a===void 0?void 0:a.call(s,e,i),(o=s.update)===null||o===void 0||o.call(s,e,n,i)),s.afterUpdate&&s.afterUpdate(e,n)},setState:function(t,e,n,i){var a=this.getShape(t);a.setState(e,n,i)},shouldUpdate:function(t){var e=this.getShape(t);return!!e.update},getControlPoints:function(t,e){var n=this.getShape(t);return n.getControlPoints(e)},getAnchorPoints:function(t,e){var n=this.getShape(t);return n.getAnchorPoints(e)}},PA={options:{},draw:function(t,e){return this.drawShape(t,e)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e=this.options.anchorPoints,n=t.anchorPoints||e;return n}},Ti=function(){function r(){}return r.registerFactory=function(t,e){var n=q$(t),i=wve,a=A(A({},i),e);return r[n]=a,a.className=n,a},r.getFactory=function(t){var e=q$(t);return r[e]},r.registerNode=function(t,e,n){var i=r.Node,a;if(typeof e=="string"||typeof e=="function"){var o=X$(e);a=A(A({},i.getShape("single-node")),o)}else if(e.jsx){var s=e.jsx,o=X$(s);a=A(A(A({},i.getShape("single-node")),o),e)}else{i.getShape(n);var l=n?i.getShape(n):PA;a=A(A({},l),e)}return a.type=t,a.itemType="node",i[t]=a,a},r.registerEdge=function(t,e,n){var i=r.Edge,a=n?i.getShape(n):PA,o=A(A({},a),e);return o.type=t,o.itemType="edge",i[t]=o,o},r.registerCombo=function(t,e,n){var i=r.Combo,a=n?i.getShape(n):PA,o=A(A({},a),e);return o.type=t,o.itemType="combo",i[t]=o,o},r}();Ti.registerFactory("node",{defaultShapeType:"circle"});Ti.registerFactory("edge",{defaultShapeType:"line"});Ti.registerFactory("combo",{defaultShapeType:"circle"});var DA="bboxCache",RA="bboxCanvasCache",K$=function(){function r(t){this._cfg={},this.destroyed=!1;var e={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(e,this.getDefaultCfg(),t);var n=this.get("model"),i=n.id,a=this.get("type");i||(i=kA(a),this.get("model").id=i),this.set("id",i);var o=t.group;o&&(o.set("item",this),o.set("id",i)),this.init(),this.draw();var s=n.shape||n.type||(a==="edge"?"line":"circle"),l=this.get("shapeFactory");if(l&&l[s]){var u=l[s].options;if(u&&u.stateStyles){var c=this.get("styles")||n.stateStyles;c=Dt({},u.stateStyles,c),this.set("styles",c)}}}return r.prototype.calculateBBox=function(){var t=this.get("keyShape"),e=this.get("group"),n=d1(t,e);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},r.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group"),n=d1(t,e);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},r.prototype.drawInner=function(){var t=this,e=t.get("shapeFactory"),n=t.get("group"),i=t.get("model");n.clear();var a=i.visible;if(a!==void 0&&!a&&t.changeVisibility(a),!!e){t.updatePosition(i);var o=t.getShapeCfg(i),s=o.type,l=e.draw(s,o,n);l&&(t.set("keyShape",l),l.set("isKeyShape",!0),l.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(e,s)}},r.prototype.setOriginStyle=function(){var t=this.get("group"),e=t.get("children"),n=this.getKeyShape(),i=this,a=n.get("name");if(this.get("originStyle")){var h=this.get("originStyle");a&&!h[a]&&(h[a]={});for(var v=this.getCurrentStatesStyle(),p=function(m){var y=e[m],b=y.get("name"),x=y.attr();if(b&&b!==a){var w=v[b];h[b]||(h[b]={}),w?Object.keys(x).forEach(function(_){var T=x[_];T!==w[_]&&(h[b][_]=T)}):h[b]=y.get("type")!=="image"?Or(x):i.getShapeStyleByName(b)}else{var S=y.attr(),C={};Object.keys(v).forEach(function(_){var T=v[_];(_===a||!Ni(T))&&(C[_]=T)}),Object.keys(S).forEach(function(_){var T=S[_];C[_]!==T&&(a?h[a][_]=T:h[_]=T)})}},s=0;s<e.length;s++)p(s);delete h.path,delete h.matrix,delete h.x,delete h.y,h[a]&&(delete h[a].x,delete h[a].y,delete h[a].matrix,delete h[a].path),i.set("originStyle",h)}else{for(var o={},s=0;s<e.length;s++){var l=e[s],u=l.get("type"),c=l.get("name");if(c&&c!==a)o[c]=u!=="image"?Or(l.attr()):i.getShapeStyleByName(c),u==="text"&&o[c]&&(delete o[c].x,delete o[c].y,delete o[c].matrix);else{var f=i.getShapeStyleByName();if(delete f.path,delete f.matrix,!a)Object.assign(o,f);else if(c)o[a]=f;else{var d=kA("shape");l.set("name",d),t.shapeMap[d]=l,o[d]=u!=="image"?Or(l.attr()):i.getShapeStyleByName(c)}}}i.set("originStyle",o)}},r.prototype.restoreStates=function(t,e){var n=this,i=n.get("states");G(i,function(a){t.setState(e,a,!0,n)})},r.prototype.init=function(){var t=Ti.getFactory(this.get("type"));this.set("shapeFactory",t)},r.prototype.get=function(t){return this._cfg[t]},r.prototype.set=function(t,e){Ni(t)?this._cfg=A(A({},this._cfg),t):this._cfg[t]=e},r.prototype.getDefaultCfg=function(){return{}},r.prototype.clearCache=function(){this.set(DA,null),this.set(RA,null)},r.prototype.beforeDraw=function(){},r.prototype.afterDraw=function(){},r.prototype.afterUpdate=function(){},r.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},r.prototype.getShapeStyleByName=function(t){var e=this.get("group"),n;if(t?n=e.shapeMap[t]:n=this.getKeyShape(),n){var i={};return G(n.attr(),function(a,o){(o!=="img"||ot(a))&&(i[o]=a)}),i}return{}},r.prototype.getShapeCfg=function(t,e){var n=this.get("styles");if(n){var i=t;return i.style=A(A({},n),t.style),i}return t},r.prototype.getStateStyle=function(t){var e=this.get("styles"),n=e&&e[t];return n},r.prototype.getOriginStyle=function(){return this.get("originStyle")},r.prototype.getCurrentStatesStyle=function(){var t=this,e={},n=t.getStates();return!n||!n.length?this.get("originStyle"):(G(t.getStates(),function(i){e=Object.assign(e,t.getStateStyle(i))}),e)},r.prototype.setState=function(t,e){var n=this.get("states"),i=this.get("shapeFactory"),a=t,o=t;ot(e)&&(a=t+":"+e,o=t+":");var s=n;if(bu(e)){var l=n.indexOf(o);if(e){if(l>-1)return;n.push(a)}else l>-1&&n.splice(l,1)}else if(ot(e)){var u=n.filter(function(d){return d.includes(o)});u.length>0&&this.clearStates(u),s=s.filter(function(d){return!d.includes(o)}),s.push(a),this.set("states",s)}if(i){var c=this.get("model"),f=c.type;i.setState(f,t,e,this)}},r.prototype.clearStates=function(t){var e=this,n=e.getStates(),i=e.get("shapeFactory"),a=e.get("model"),o=a.type;t||(t=n),ot(t)&&(t=[t]);var s=n.filter(function(l){return t.indexOf(l)===-1});e.set("states",s),t.forEach(function(l){i.setState(o,l,!1,e)})},r.prototype.getContainer=function(){return this.get("group")},r.prototype.getKeyShape=function(){return this.get("keyShape")},r.prototype.getModel=function(){return this.get("model")},r.prototype.getType=function(){return this.get("type")},r.prototype.getID=function(){return this.get("id")},r.prototype.isItem=function(){return!0},r.prototype.getStates=function(){return this.get("states")},r.prototype.hasState=function(t){var e=this.getStates();return e.indexOf(t)>=0},r.prototype.refresh=function(t){var e=this.get("model");this.updatePosition(e),this.updateShape(t),this.afterUpdate(),this.clearCache()},r.prototype.getUpdateType=function(t){},r.prototype.update=function(t,e){e===void 0&&(e=void 0);var n=this.get("model");if(e==="move")this.updatePosition(t);else{var i=n.visible,a=t.visible;i!==a&&a!==void 0&&this.changeVisibility(a);var o={x:n.x,y:n.y};t.x=isNaN(+t.x)?n.x:+t.x,t.y=isNaN(+t.y)?n.y:+t.y;var s=this.get("styles");if(t.stateStyles){var l=t.stateStyles;jt(s,l),delete t.stateStyles}Object.assign(n,t),(o.x!==t.x||o.y!==t.y)&&this.updatePosition(t),this.updateShape(e)}this.afterUpdate(),this.clearCache()},r.prototype.updateShape=function(t){var e=this.get("shapeFactory"),n=this.get("model"),i=n.type;if(e.shouldUpdate(i)&&i===this.get("currentShape")){var a=this.getShapeCfg(n,t);e.baseUpdate(i,a,this,t),t!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(e,i)},r.prototype.updatePosition=function(t){var e=this.get("model"),n=isNaN(+t.x)?+e.x:+t.x,i=isNaN(+t.y)?+e.y:+t.y,a=this.get("group");if(isNaN(n)||isNaN(i))return!1;e.x=n,e.y=i;var o=a.getMatrix();return o&&o[6]===n&&o[7]===i?!1:(a.resetMatrix(),j3(a,{x:n,y:i}),this.clearCache(),!0)},r.prototype.getBBox=function(){var t=this.get(DA);return t||(t=this.calculateBBox(),this.set(DA,t)),t},r.prototype.getCanvasBBox=function(){var t=this.get(RA);return t||(t=this.calculateCanvasBBox(),this.set(RA,t)),t},r.prototype.toFront=function(){var t=this.get("group");t.toFront()},r.prototype.toBack=function(){var t=this.get("group");t.toBack()},r.prototype.show=function(){this.changeVisibility(!0)},r.prototype.hide=function(){this.changeVisibility(!1)},r.prototype.changeVisibility=function(t){var e=this.get("group");t?e.show():e.hide(),this.set("visible",t)},r.prototype.isVisible=function(){return this.get("visible")},r.prototype.enableCapture=function(t){var e=this.get("group");e&&e.set("capture",t)},r.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),e.shapeMap={},this.clearCache(),e.remove(),this._cfg=null,this.destroyed=!0}},r}(),N1={source:"start",target:"end"},Nl="Node",Bv="Point",Sve="Anchor",Cve=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},t.prototype.setEnd=function(e,n){var i=N1[e]+Bv,a=e+Nl,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),Ni(n)?(this.set(i,n),this.set(a,null)):n&&(n.addEdge(this),this.set(a,n),this.set(i,null))},t.prototype.getLinkPoint=function(e,n,i){var a=N1[e]+Bv,o=e+Nl,s=this.get(a);if(!s){var l=this.get(o),u=e+Sve,c=this.getPrePoint(e,i),f=n[u];nt(f)||(s=l.getLinkPointByAnchor(f)),s=s||l.getLinkPoint(c),nt(s.index)||this.set(e+"AnchorIndex",s.index)}return s},t.prototype.getPrePoint=function(e,n){if(n&&n.length){var i=e==="source"?0:n.length-1;return n[i]}var a=e==="source"?"target":"source";return this.getEndPoint(a)},t.prototype.getEndPoint=function(e){var n=e+Nl,i=N1[e]+Bv,a=this.get(n);return a?a.get("model"):this.get(i)},t.prototype.getControlPointsByCenter=function(e){var n=this.getEndPoint("source"),i=this.getEndPoint("target"),a=this.get("shapeFactory"),o=e.type;return a.getControlPoints(o,{startPoint:n,endPoint:i})},t.prototype.getEndCenter=function(e){var n=e+Nl,i=N1[e]+Bv,a=this.get(n);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(i)},t.prototype.init=function(){r.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},t.prototype.getShapeCfg=function(e,n){var i=this,a=i.get("linkCenter"),o=(n==null?void 0:n.includes("move"))?e:r.prototype.getShapeCfg.call(this,e);if(a)o.startPoint=i.getEndCenter("source"),o.endPoint=i.getEndCenter("target");else{var s=o.controlPoints||i.getControlPointsByCenter(o);o.startPoint=i.getLinkPoint("source",e,s),o.endPoint=i.getLinkPoint("target",e,s)}return o.sourceNode=i.get("sourceNode"),o.targetNode=i.get("targetNode"),o},t.prototype.getModel=function(){var e=this.get("model"),n=this.get("source"+Nl),i=this.get("target"+Nl);return n?delete e["source"+Nl]:e.source=this.get("start"+Bv),i?delete e["target"+Nl]:e.target=this.get("end"+Bv),!ot(e.source)&&!Ni(e.source)&&(e.source=e.source.getID()),!ot(e.target)&&!Ni(e.target)&&(e.target=e.target.getID()),e},t.prototype.setSource=function(e){this.setEnd("source",e),this.set("source",e)},t.prototype.setTarget=function(e){this.setEnd("target",e),this.set("target",e)},t.prototype.getSource=function(){return this.get("source")},t.prototype.getTarget=function(){return this.get("target")},t.prototype.updatePosition=function(){return!1},t.prototype.update=function(e,n){n===void 0&&(n=void 0);var i=this.get("model"),a=i.visible,o=e.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("styles");if(e.stateStyles){var l=e.stateStyles;jt(s,l),delete e.stateStyles}Object.assign(i,e),this.updateShape(n),this.afterUpdate(),this.clearCache()},t.prototype.destroy=function(){var e=this.get("source"+Nl),n=this.get("target"+Nl);e&&!e.destroyed&&e.removeEdge(this),n&&!n.destroyed&&n.removeEdge(this),r.prototype.destroy.call(this)},t}(K$),OA="anchorPointsCache",Eve="bboxCache",Z$=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getNearestPoint=function(e,n){for(var i=0,a=e[0],o=l1(e[0],n),s=0;s<e.length;s++){var l=e[s],u=l1(l,n);u<o&&(a=l,o=u,i=s)}return a.anchorIndex=i,a},t.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},t.prototype.getEdges=function(){return this.get("edges")},t.prototype.getInEdges=function(){var e=this;return this.get("edges").filter(function(n){return n.get("target")===e})},t.prototype.getOutEdges=function(){var e=this;return this.get("edges").filter(function(n){return n.get("source")===e})},t.prototype.getNeighbors=function(e){var n=this,i=this.get("edges");if(e==="target"){var a=function(u){return u.getSource()===n};return i.filter(a).map(function(l){return l.getTarget()})}if(e==="source"){var o=function(u){return u.getTarget()===n};return i.filter(o).map(function(l){return l.getSource()})}var s=function(u){return u.getSource()===n?u.getTarget():u.getSource()};return i.map(s)},t.prototype.getLinkPointByAnchor=function(e){var n=this.getAnchorPoints();return n[e]},t.prototype.getLinkPoint=function(e){var n=this.get("keyShape"),i=n.get("type"),a=this.get("type"),o,s,l=this.getBBox();a==="combo"?(o=l.centerX||(l.maxX+l.minX)/2,s=l.centerY||(l.maxY+l.minY)/2):(o=l.centerX,s=l.centerY);var u=this.getAnchorPoints(),c;switch(i){case"circle":c=V3({x:o,y:s,r:l.width/2},e);break;case"ellipse":c=H3({x:o,y:s,rx:l.width/2,ry:l.height/2},e);break;default:c=U3(l,e)}var f=c;return u.length&&(f||(f=e),f=this.getNearestPoint(u,f)),f||(f={x:o,y:s}),f},t.prototype.getAnchorPoints=function(){var e=this.get(OA);if(!e){e=[];var n=this.get("shapeFactory"),i=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,l=n.getAnchorPoints(s,o)||[];G(l,function(u,c){var f={x:i.minX+u[0]*i.width,y:i.minY+u[1]*i.height,anchorIndex:c};e.push(f)}),this.set(OA,e)}return e},t.prototype.addEdge=function(e){this.get("edges").push(e)},t.prototype.lock=function(){this.set("locked",!0)},t.prototype.unlock=function(){this.set("locked",!1)},t.prototype.hasLocked=function(){return this.get("locked")},t.prototype.removeEdge=function(e){var n=this.getEdges(),i=n.indexOf(e);i>-1&&n.splice(i,1)},t.prototype.clearCache=function(){this.set(Eve,null),this.set(OA,null)},t.prototype.getUpdateType=function(e){var n,i,a,o,s;if(!!e){var l=!nt(e.x),u=!nt(e.y),c=Object.keys(e);if(c.length===1&&(l||u)||c.length===2&&l&&u)return"move";if(zt(e.x)||zt(e.y)||e.type||e.anchorPoints||e.size||(e==null?void 0:e.style)&&(((n=e==null?void 0:e.style)===null||n===void 0?void 0:n.r)||((i=e==null?void 0:e.style)===null||i===void 0?void 0:i.width)||((a=e==null?void 0:e.style)===null||a===void 0?void 0:a.height)||((o=e==null?void 0:e.style)===null||o===void 0?void 0:o.rx)||((s=e==null?void 0:e.style)===null||s===void 0?void 0:s.ry)))return"bbox|label";var f=c.includes("label")||c.includes("labelCfg");return f?"style|label":"style"}},t}(K$),Q$="bboxCache",J$="bboxCanvasCache",LA="sizeCache",ez="anchorPointsCache",_ve=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},t.prototype.getShapeCfg=function(e){var n=this.get("styles"),i=this.get("bbox");if(n&&i){var a=e,o={r:Math.hypot(i.height,i.width)/2||ir.defaultCombo.size[0]/2,width:i.width||ir.defaultCombo.size[0],height:i.height||ir.defaultCombo.size[1]};a.style=A(A(A({},n),e.style),o);var s=e.padding||ir.defaultCombo.padding;return zt(s)?(o.r+=s,o.width+=s*2,o.height+=s*2):(o.r+=s[0],o.width+=s[1]+s[3]||s[1]*2,o.height+=s[0]+s[2]||s[0]*2),this.set(LA,o),a}return e},t.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var e=this.get("keyShape"),n=this.get("group"),i=d1(e,n);i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2;var a=this.get(LA),o=this.get(Q$)||{},s=o.x,l=o.x;if(a){a.width=Math.max(a.width,i.width),a.height=Math.max(a.height,i.height);var u=e.get("type");u==="circle"?(i.width=a.r*2,i.height=a.r*2):(i.width=a.width,i.height=a.height),i.minX=i.centerX-i.width/2,i.minY=i.centerY-i.height/2,i.maxX=i.centerX+i.width/2,i.maxY=i.centerY+i.height/2}else i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2;return i.x=i.minX,i.y=i.minY,(i.x!==s||i.y!==l)&&this.set(ez,null),i}},t.prototype.getChildren=function(){var e=this;return{nodes:e.getNodes(),combos:e.getCombos()}},t.prototype.getNodes=function(){var e=this;return e.get("nodes")},t.prototype.getCombos=function(){var e=this;return e.get("combos")},t.prototype.addChild=function(e){var n=this,i=e.getType();switch(i){case"node":n.addNode(e);break;case"combo":n.addCombo(e);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},t.prototype.addCombo=function(e){var n=this;return n.get("combos").push(e),!0},t.prototype.addNode=function(e){var n=this;return n.get("nodes").push(e),!0},t.prototype.removeChild=function(e){var n=this,i=e.getType();switch(i){case"node":n.removeNode(e);break;case"combo":n.removeCombo(e);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},t.prototype.removeCombo=function(e){if(!!e){var n=this.getCombos(),i=n.indexOf(e);return i>-1?(n.splice(i,1),!0):!1}},t.prototype.removeNode=function(e){if(!!e){var n=this.getNodes(),i=n.indexOf(e);return i>-1?(n.splice(i,1),!0):!1}},t.prototype.getUpdateType=function(e){},t.prototype.getBBox=function(){this.set(J$,null);var e=this.calculateCanvasBBox();return e},t.prototype.clearCache=function(){this.set(Q$,null),this.set(J$,null),this.set(ez,null)},t.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),n=this.get("group");e&&n.stopAnimate(),n.shapeMap={},this.clearCache(),this.set(LA,null),this.set("bbox",null),n.remove(),this._cfg=null,this.destroyed=!0}},t}(Z$),Ym="node",B1="edge",tz="vedge",Xm="combo",Tve="default",rz="Mapper",Cu="stateStyles",Ave=function(){function r(t){var e=this;this.edgeToBeUpdateMap={},this.throttleRefresh=Cv(function(n){var i,a=e.graph;if(!(!a||a.get("destroyed"))){var o=e.edgeToBeUpdateMap;!o||!((i=Object.keys(o))===null||i===void 0?void 0:i.length)||(Object.keys(o).forEach(function(s){var l=o[s].edge;!l||l.destroyed||l.refresh(o[s].updateType)}),e.edgeToBeUpdateMap={})}},16,{trailing:!0,leading:!0}),this.graph=t,this.destroyed=!1}return r.prototype.addItem=function(t,e){var n=this.graph,i=t===tz?B1:t,a=n.get(i+"Group")||n.get("group"),o=ls(i),s=null,l=n.get(i+ls(Cu))||{},u=n.get(Tve+o);e[Cu]&&(l=e[Cu]),u&&G(u,function(y,b){an(y)&&!Qe(y)?e[b]=Dt({},y,e[b]):Qe(y)?e[b]=e[b]||Or(u[b]):e[b]=e[b]||u[b]});var c=n.get(i+rz);if(c){var f=c(e);f[Cu]&&(l=f[Cu],delete f[Cu]),G(f,function(y,b){an(y)&&!Qe(y)?e[b]=Dt({},e[b],y):e[b]=f[b]||e[b]})}if(n.emit("beforeadditem",{type:t,model:e}),t===B1||t===tz){var d=void 0,h=void 0;if(d=e.source,h=e.target,d&&ot(d)&&(d=n.findById(d)),h&&ot(h)&&(h=n.findById(h)),!d||!h){console.warn("The source or target node of edge "+e.id+" does not exist!");return}d.getType&&d.getType()==="combo"&&(e.isComboEdge=!0),h.getType&&h.getType()==="combo"&&(e.isComboEdge=!0),s=new Cve({model:e,source:d,target:h,styles:l,linkCenter:n.get("linkCenter"),group:a.addGroup()})}else if(t===Ym)s=new Z$({model:e,styles:l,group:a.addGroup()});else if(t===Xm){var v=e.children,p=Pm(v,n);isNaN(p.x)?isNaN(e.x)&&(e.x=Math.random()*100):e.x=p.x,isNaN(p.y)?isNaN(e.y)&&(e.y=Math.random()*100):e.y=p.y;var g=a.addGroup();g.setZIndex(e.depth),s=new _ve({model:e,styles:l,bbox:e.collapsed?Pm([],n):p,group:g});var m=s.getModel();(v||[]).forEach(function(y){var b=n.findById(y.id);s.addChild(b),y.depth=m.depth+2}),e.collapsed&&setTimeout(function(){s.destroyed||n.collapseCombo(s)},0)}if(s)return n.get(t+"s").push(s),n.get("itemMap")[s.get("id")]=s,n.emit("afteradditem",{item:s,model:e}),s},r.prototype.updateItem=function(t,e){var n=this,i,a,o=this.graph;if(ot(t)&&(t=o.findById(t)),!(!t||t.destroyed)){var s="";t.getType&&(s=t.getType());var l=o.get(s+rz),u=t.getModel(),c=t.getUpdateType(e);if(l){var f=Dt({},u,e),d=l(f),h=Dt({},u,d,e);d[Cu]&&(t.set("styles",h[Cu]),delete h[Cu]),G(h,function(w,S){e[S]=w})}else G(e,function(w,S){u[S]&&an(w)&&!Qe(w)&&(e[S]=A(A({},u[S]),e[S]))});if(o.emit("beforeupdateitem",{item:t,cfg:e}),s===B1){if(e.source){var v=e.source;ot(v)&&(v=o.findById(v)),t.setSource(v)}if(e.target){var p=e.target;ot(p)&&(p=o.findById(p)),t.setTarget(p)}t.update(e)}if(s===Ym||s===Xm){t.update(e,c);var g=t.getEdges(),m=(c==null?void 0:c.includes("bbox"))||c==="move";if(s===Ym)c==="move"?G(g,function(w){n.edgeToBeUpdateMap[w.getID()]={edge:w,updateType:c},n.throttleRefresh()}):m&&G(g,function(w){w.refresh(c)});else if(m&&s===Xm){var y=t.get("shapeFactory"),b=u.type||"circle",x=u.animate===void 0||e.animate===void 0?(a=(i=y[b])===null||i===void 0?void 0:i.options)===null||a===void 0?void 0:a.animate:u.animate||e.animate;x?setTimeout(function(){if(!(!t||t.destroyed)){var w=t.getKeyShape();!w||w.destroyed||G(g,function(S){S&&!S.destroyed&&S.refresh()})}},201):G(g,function(w){w.refresh()})}}o.emit("afterupdateitem",{item:t,cfg:e})}},r.prototype.updateCombo=function(t,e){var n=this,i,a,o=this.graph;if(ot(t)&&(t=o.findById(t)),!(!t||t.destroyed)){var s=t.getModel(),l=Pm(s.collapsed?[]:e,o),u=s.collapsed?Pm(e,o):l,c=u.x,f=u.y;t.set("bbox",l),t.update({x:c,y:f});var d=t.get("shapeFactory"),h=s.type||"circle",v=s.animate===void 0?(a=(i=d[h])===null||i===void 0?void 0:i.options)===null||a===void 0?void 0:a.animate:s.animate;v?setTimeout(function(){if(!(!t||t.destroyed)){var p=t.getKeyShape();!p||p.destroyed||(t.getShapeCfg(s),n.updateComboEdges(t))}},201):this.updateComboEdges(t)}},r.prototype.updateComboEdges=function(t){for(var e=t.getEdges()||[],n=0;n<e.length;n++){var i=e[n];if(i&&!i.destroyed){var a=i.get("shapeFactory"),o=i.getShapeCfg(i.getModel()),s=i.getContainer();s.clear();var l=a.draw(o.type,o,s);i.set("keyShape",l),l.set("isKeyShape",!0),l.set("draggable",!0),i.setOriginStyle()}}},r.prototype.collapseCombo=function(t){var e=this.graph;ot(t)&&(t=e.findById(t));var n=t.getChildren();n.nodes.forEach(function(i){e.hideItem(i)}),n.combos.forEach(function(i){e.hideItem(i)})},r.prototype.expandCombo=function(t){var e=this.graph;ot(t)&&(t=e.findById(t));var n=t.getChildren();n.nodes.forEach(function(i){e.showItem(i)}),n.combos.forEach(function(i){i.getModel().collapsed?i.show():e.showItem(i)})},r.prototype.removeItem=function(t){var e=this,n=this.graph;if(ot(t)&&(t=n.findById(t)),!(!t||t.destroyed)){var i=Or(t.getModel());n.emit("beforeremoveitem",{item:i});var a="";t.getType&&(a=t.getType());var o=n.get(a+"s"),s=o.indexOf(t);if(s>-1&&o.splice(s,1),a===B1){var l=n.get("v"+a+"s"),u=l.indexOf(t);u>-1&&l.splice(u,1)}var c=t.get("id"),f=n.get("itemMap");delete f[c];var d=n.get("comboTrees"),h=t.get("id");if(a===Ym){var v=t.getModel().comboId;if(d&&v){var p=d,g=!1;d.forEach(function(S){g||ds(S,function(C){if(C.id===h&&p){var _=p.indexOf(C);return p.splice(_,1),g=!0,!1}return p=C.children,!0})})}for(var m=t.getEdges(),y=m.length-1;y>=0;y--)n.removeItem(m[y],!1);v&&n.updateCombo(v)}else if(a===Xm){var b=t.getModel().parentId,x,w=!1;(d||[]).forEach(function(C){w||ds(C,function(_){return _.id===h?(x=_,w=!0,!1):!0})}),x.removed=!0,x&&x.children&&x.children.forEach(function(C){e.removeItem(C.id)});for(var m=t.getEdges(),y=m.length;y>=0;y--)n.removeItem(m[y],!1);b&&n.updateCombo(b)}t.destroy(),n.emit("afterremoveitem",{item:i,type:a})}},r.prototype.setItemState=function(t,e,n){var i=this.graph,a=e;ot(n)&&(a=e+":"+n),!(t.hasState(a)===n&&n||ot(n)&&t.hasState(a))&&(i.emit("beforeitemstatechange",{item:t,state:a,enabled:n}),t.setState(e,n),i.autoPaint(),i.emit("afteritemstatechange",{item:t,state:a,enabled:n}))},r.prototype.priorityState=function(t,e){var n=this.graph,i=t;ot(t)&&(i=n.findById(t)),this.setItemState(i,e,!1),this.setItemState(i,e,!0)},r.prototype.clearItemStates=function(t,e){var n=this.graph;ot(t)&&(t=n.findById(t)),n.emit("beforeitemstatesclear",{item:t,states:e}),t.clearStates(e),n.emit("afteritemstatesclear",{item:t,states:e})},r.prototype.refreshItem=function(t){var e=this.graph;ot(t)&&(t=e.findById(t)),e.emit("beforeitemrefresh",{item:t}),t.refresh(),e.emit("afteritemrefresh",{item:t})},r.prototype.addCombos=function(t,e){var n=this,i=this.graph;(t||[]).forEach(function(o){Mc(o,function(s){var l;return e.forEach(function(u){u.id===s.id&&(u.children=s.children,u.depth=s.depth,l=u)}),l&&n.addItem("combo",l),!0})});var a=i.get("comboGroup");a&&a.sort()},r.prototype.changeItemVisibility=function(t,e){var n=this,i=this.graph;if(ot(t)&&(t=i.findById(t)),!t){console.warn("The item to be shown or hidden does not exist!");return}if(i.emit("beforeitemvisibilitychange",{item:t,visible:e}),t.changeVisibility(e),t.getType&&t.getType()===Ym){var a=t.getEdges();G(a,function(c){e&&!(c.get("source").isVisible()&&c.get("target").isVisible())||n.changeItemVisibility(c,e)})}else if(t.getType&&t.getType()===Xm){var o=i.get("comboTrees"),s=t.get("id"),l=[],u=!1;(o||[]).forEach(function(f){u||!f.children||f.children.length===0||ds(f,function(d){return d.id===s?(l=d.children,u=!0,!1):!0})}),l&&(!e||e&&!t.getModel().collapsed)&&l.forEach(function(f){var d=i.findById(f.id);n.changeItemVisibility(d,e)});var a=t.getEdges();G(a,function(f){e&&!(f.get("source").isVisible()&&f.get("target").isVisible())||n.changeItemVisibility(f,e)})}return i.emit("afteritemvisibilitychange",{item:t,visible:e}),t},r.prototype.destroy=function(){this.graph=null,this.destroyed=!0},r}(),vd=null,kve=function(){function r(t){this.graph=t,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return r.checkCache=function(t,e,n){if(!!n[e]){var i=n[e].indexOf(t);i>=0&&n[e].splice(i,1)}},r.cacheState=function(t,e,n){n[e]||(n[e]=[]),n[e].push(t)},r.prototype.updateState=function(t,e,n){var i=this,a=r.checkCache,o=r.cacheState;if(!t.destroyed){var s=this.cachedStates,l=s.enabled,u=s.disabled;n?(a(t,e,u),o(t,e,l)):(a(t,e,l),o(t,e,u)),vd&&clearTimeout(vd),vd=setTimeout(function(){vd=null,i.updateGraphStates()},16)}},r.prototype.updateStates=function(t,e,n){var i=this;ot(e)?this.updateState(t,e,n):e.forEach(function(a){i.updateState(t,a,n)})},r.prototype.updateGraphStates=function(){var t=this.graph.get("states"),e=this.cachedStates;G(e.disabled,function(n,i){t[i]&&(t[i]=t[i].filter(function(a){return n.indexOf(a)<0&&!n.destroyed}))}),G(e.enabled,function(n,i){if(!t[i])t[i]=n;else{var a={};t[i].forEach(function(o){o.destroyed||(a[o.get("id")]=!0)}),n.forEach(function(o){if(!o.destroyed){var s=o.get("id");a[s]||(a[s]=!0,t[i].push(o))}})}}),this.graph.emit("graphstatechange",{states:t}),this.cachedStates={enabled:{},disabled:{}}},r.prototype.destroy=function(){this.graph=null,this.cachedStates=null,vd&&clearTimeout(vd),vd=null,this.destroyed=!0},r}(),Mve=function(t,e){return!t||!e?t:t.replace(/\\?\{([^{}]+)\}/g,function(n,i){if(n.charAt(0)==="\\")return n.slice(1);var a=e[i];return a===0&&(a="0"),a||""})},nz=function(t){var e=[];if(t.length<2)throw new Error("point length must largn than 2, now it's "+t.length);for(var n=0,i=t;n<i.length;n++){var a=i[n],o=a.x,s=a.y;e.push(o),e.push(s)}var l=CA(e);return l.unshift(["M",t[0].x,t[0].y]),l},$1=function(t,e,n,i){n===void 0&&(n=0),i===void 0&&(i=0);var a={x:(1-n)*t.x+n*e.x,y:(1-n)*t.y+n*e.y},o=[0,0];Tc(o,[e.x-t.x,e.y-t.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*i,o[0]*i];return a.x+=s[0],a.y+=s[1],a},Ive=function(t,e){var n=t.length;if(!n)return"";for(var i="",a="",o=0;o<n;o++){var s=t[o];o===0?a="M{x} {y}":a="L{x} {y}",i+=Mve(a,s)}return e&&(i+="Z"),i},FA=function(t){var e=[];return t.forEach(function(n){var i=n[0];if(i!=="A")for(var a=1;a<n.length;a=a+2)e.push([n[a],n[a+1]]);else{var o=n.length;e.push([n[o-2],n[o-1]])}}),e},NA=function(t){if(t.length<2)throw new Error("point length must largn than 2, now it's "+t.length);var e=t[0],n=t[1],i=t[t.length-1],a=t[t.length-2];t.unshift(i),t.unshift(a),t.push(e),t.push(n);for(var o=[],s=1;s<t.length-2;s+=1){var l=t[s-1].x,u=t[s-1].y,c=t[s].x,f=t[s].y,d=t[s+1].x,h=t[s+1].y,v=s!==t.length-2?t[s+2].x:d,p=s!==t.length-2?t[s+2].y:h,g=c+(d-l)/6,m=f+(h-u)/6,y=d-(v-c)/6,b=h-(p-f)/6;o.push(["C",g,m,y,b,d,h])}return o.unshift(["M",i.x,i.y]),o},iz=function(t,e){return gi([0,0],Tc([0,0],t),e)},az=function(t,e){var n=[t[1]-e[1],e[0]-t[0]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(i===0)throw new Error("p0 should not be equal to p1");return[n[0]/i,n[1]/i]},oz=function(t,e){return[e[0]-t[0],e[1]-t[1]]};function BA(r,t){var e=function(f){var d=[f[0][0],f[0][1]-t],h=[f[0][0],f[0][1]+t];return"M "+d+" A "+t+","+t+",0,0,0,"+h+" A "+t+","+t+",0,0,0,"+d},n=function(f){var d=gi([0,0],az(f[0],f[1]),t),h=gi([0,0],d,-1),v=Bi([0,0],f[0],d),p=Bi([0,0],f[1],d),g=Bi([0,0],f[1],h),m=Bi([0,0],f[0],h);return"M "+v+" L "+p+" A "+[t,t,"0,0,0",g].join(",")+" L "+m+" A "+[t,t,"0,0,0",v].join(",")};if(!r||r.length<1)return"";if(r.length===1)return e(r);if(r.length===2)return n(r);for(var i=new Array(r.length),a=0;a<i.length;++a){var o=a===0?r[r.length-1]:r[a-1],s=r[a],l=gi([0,0],az(o,s),t);i[a]=[Bi([0,0],o,l),Bi([0,0],s,l)]}var u="A "+[t,t,"0,0,0,"].join(",");return i=i.map(function(c,f){var d="";return f===0&&(d="M "+i[i.length-1][1]+" "),d+=u+c[0]+" L "+c[1],d}),i.join(" ")}function sz(r,t){var e=r.length,n=function(c){var f=[c[0][0],c[0][1]-t],d=[c[0][0],c[0][1]+t];return"M "+f+" A "+[t,t,"0,0,0",d].join(",")+" A "+[t,t,"0,0,0",f].join(",")},i=function(c){var f=oz(c[0],c[1]),d=iz(f,t),h=Bi([0,0],c[0],gi([0,0],d,-1)),v=Bi([0,0],c[1],d),p=1.2*t,g=iz(Tc([0,0],f),p),m=gi([0,0],g,-1),y=Bi([0,0],h,m),b=Bi([0,0],v,m),x=Bi([0,0],h,g);return"M "+h+" C "+[y,b,v].join(",")+" S "+[x,h].join(",")+" Z"};if(!r||e<1)return"";if(e===1)return n(r);if(e===2)return i(r);for(var a=r.map(function(u,c){var f=r[(c+1)%e];return{p:u,v:Tc([0,0],oz(u,f))}}),o=0;o<a.length;++o){var s=o>0?o-1:e-1,l=Tc([0,0],Bi([0,0],a[s].v,gi([0,0],a[o].v,-1)));a[o].p=Bi([0,0],a[o].p,gi([0,0],l,t))}return a.map(function(u){var c=u.p;return{x:c[0],y:c[1]}})}var Pve=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getSpline:nz,getControlPoint:$1,pointsToPolygon:Ive,pathToPoints:FA,getClosedSpline:NA,roundedHull:BA,paddedHull:sz}),lz=function(t,e,n){return(t.y-n.y)*(e.x-n.x)-(t.x-n.x)*(e.y-n.y)},uz=function(t){var e=t.map(function(s){return{x:s.getModel().x,y:s.getModel().y}});if(e.sort(function(s,l){return s.x===l.x?s.y-l.y:s.x-l.x}),e.length===1)return e;for(var n=[],i=0;i<e.length;i++){for(;n.length>=2&&lz(n[n.length-2],n[n.length-1],e[i])<=0;)n.pop();n.push(e[i])}for(var a=[],i=e.length-1;i>=0;i--){for(;a.length>=2&&lz(a[a.length-2],a[a.length-1],e[i])<=0;)a.pop();a.push(e[i])}a.pop(),n.pop();var o=n.concat(a);return o},Dve={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Rve(r,t,e){var n=!1,i=function(l,u){return t.cells[l+u*t.width]},a=function(l,u){var c=0;return i(l-1,u-1)>=e&&(c+=1),i(l,u-1)>e&&(c+=2),i(l-1,u)>e&&(c+=4),i(l,u)>e&&(c+=8),c},o=function(l,u){for(var c=l,f=u,d,h,v=0;v<t.width*t.height;v++){if(d=c,h=f,r.findIndex(function(g){return g.x===c&&g.y===f})>-1){if(!(r[0].x!==c||r[0].y!==f))return!0}else r.push({x:c,y:f});var p=a(c,f);switch(p){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:d===0&&(h===-1?c-=1:c+=1);break;case 1:case 13:case 5:f--;break;case 9:d===1&&(h===0?f-=1:f+=1);break;case 10:case 8:case 11:f++;break;default:return console.warn("Marching squares invalid state: "+p),!0}}};this.march=function(){for(var s=0;s<t.width&&!n;s+=1)for(var l=0;l<t.height&&!n;l+=1)i(s,l)>e&&a(s,l)!==15&&(n=o(s,l));return n}}var Ove=function(t,e,n){var i=Math.ceil(t/n),a=Math.ceil(e/n),o=new Float32Array(Math.max(0,i*a)).fill(0);return{cells:o,width:i,height:a}},Lve=function(t,e,n){var i=null,a=Number.POSITIVE_INFINITY;return e.forEach(function(o){var s={x:t.getModel().x,y:t.getModel().y},l={x:o.getModel().x,y:o.getModel().y},u=u1(s,l),c=new dd(s.x,s.y,l.x,l.y),f=n.reduce(function(d,h){return FT(h,c)>0?d+1:d},0);u*Math.pow(f+1,2)<a&&(i=o,a=u*Math.pow(f+1,2))}),i},cz=function(t,e){var n=Number.POSITIVE_INFINITY,i=null;return t.forEach(function(a){var o=FT(a,e);o>=0&&o<n&&(i=a,n=o)}),i},Fve=function(t,e,n,i){var a=[],o=[];o.push(t);for(var s=!0,l=0,u=function(h,v){var p=!1;return v.forEach(function(g){p||(NT(h,{x:g.x1,y:g.y1})||NT(h,{x:g.x2,y:g.y2}))&&(p=!0)}),p},c=function(h,v){for(var p=0,g=v;p<g.length;p++){var m=g[p],y=m.getBBox(),b=[[y.x,y.y],[y.x+y.width,y.y],[y.x,y.y+y.height],[y.x+y.width,y.y+y.height]];if(Im(b,h.x,h.y))return!0}return!1};s&&l<n;){s=!1;for(var f=function(){var h=o.pop(),v=cz(e,h);if(v){var p=K3(v,h),g=p[0],m=p[1];if(m===2){var y=function(x){for(var w=i,S=fz(v,w,g,x),C=u(S,o)||u(S,a),_=c(S,e);!C&&_&&w>=1;)w/=1.5,S=fz(v,w,g,x),C=u(S,o)||u(S,a),_=c(S,e);S&&!C&&(!x||!_)&&(o.push(new dd(h.x1,h.y1,S.x,S.y)),o.push(new dd(S.x,S.y,h.x2,h.y2)),s=!0)};y(!0),s||y(!1)}}s||a.push(h),l+=1};!s&&o.length;)f()}for(;o.length;)a.push(o.pop());return a};function Nve(r,t,e,n,i){var a=Lve(r,e,t);if(a===null)return[];var o=function(f){for(var d=[];f.length>0;){var h=f.pop();if(f.length===0){d.push(h);break}var v=f.pop(),p=new dd(h.x1,h.y1,v.x2,v.y2),g=cz(t,p);g?(d.push(h),f.push(v)):f.push(p)}return d},s=new dd(r.getModel().x,r.getModel().y,a.getModel().x,a.getModel().y),l=Fve(s,t,n,i),u=o(l);return u}var Bve=function(t,e,n){var i=Object.assign(Dve,n),a=Z3(t.map(function(y){return{x:y.getModel().x,y:y.getModel().y}}));t=t.sort(function(y,b){return u1({x:y.getModel().x,y:y.getModel().y},a)-u1({x:b.getModel().x,y:b.getModel().y},a)});var o=[],s=[];t.forEach(function(y){var b=Nve(y,e,o,i.maxRoutingIterations,i.morphBuffer);b.forEach(function(x){s.push(x)}),o.push(y)});for(var l=$ve(t,s,i.nodeR0),u=Ove(l.width,l.height,i.pixelGroupSize),c=[],f=[],d=0;d<i.maxMarchingIterations;d++)if(zve(t,e,s,l,u,i),c=[],f=[],!!new Rve(c,u,i.threshold).march()){var h=c.map(function(y){return{x:Math.round(y.x*i.pixelGroupSize+l.minX),y:Math.round(y.y*i.pixelGroupSize+l.minY)}});if(h){var v=h.length;if(i.skip>1)for(v=Math.floor(h.length/i.skip);v<3&&i.skip>1;)i.skip-=1,v=Math.floor(h.length/i.skip);for(var p=0,g=0;g<v;g+=1,p+=i.skip)f.push({x:h[p].x,y:h[p].y})}var m=function(){for(var b=0,x=t;b<x.length;b++){var w=x[b],S=f.map(function(C){return[C.x,C.y]});if(!Im(S,w.getBBox().centerX,w.getBBox().centerY))return!1}return!0};if(f&&m())return f;if(i.threshold*=.9,d<=i.maxMarchingIterations*.5)i.memberInfluenceFactor*=1.2,i.edgeInfluenceFactor*=1.2;else if(i.nonMemberInfluenceFactor!==0&&e.length>0)i.nonMemberInfluenceFactor*=.8;else break}return f};function $ve(r,t,e){var n={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},i=[];r.forEach(function(l){i.push(l.getBBox())}),t.forEach(function(l){i.push(l.getBBox())});for(var a=0,o=i;a<o.length;a++){var s=o[a];n.minX=(s.minX<n.minX?s.minX:n.minX)-e,n.minY=(s.minY<n.minY?s.minY:n.minY)-e,n.maxX=(s.maxX>n.maxX?s.maxX:n.maxX)+e,n.maxY=(s.maxY>n.maxY?s.maxY:n.maxY)+e}return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.x=n.minX,n.y=n.minY,n}function zve(r,t,e,n,i,a){function o(h,v){var p=Math.floor((h-v)/a.pixelGroupSize);return p<0?0:p}function s(h,v){return h*a.pixelGroupSize+v}var l=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),u=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),c=function(v,p){var g=Math.min(o(v.minX,p+n.minX),i.width),m=Math.min(o(v.minY,p+n.minY),i.height),y=Math.min(o(v.maxX,-p+n.minX),i.width),b=Math.min(o(v.maxY,-p+n.minY),i.height);return[g,m,y,b]},f=function(v,p){for(var g=v.getBBox(),m=c(g,a.nodeR1),y=m[0],b=m[1],x=m[2],w=m[3],S=b;S<w;S+=1)for(var C=y;C<x;C+=1)if(!(p<0&&i[C+S*i.width]<=0)){var _=s(C,n.minX),T=s(S,n.minY),E=J3({x:_,y:T},{x:g.minX,y:g.minY,width:g.width,height:g.height});if(E<Math.pow(a.nodeR1,2)){var k=Math.sqrt(E)-a.nodeR1;i.cells[C+S*i.width]+=p*k*k}}},d=function(v,p){for(var g=v.getBBox(),m=c(g,a.edgeR1),y=m[0],b=m[1],x=m[2],w=m[3],S=b;S<w;S+=1)for(var C=y;C<x;C+=1)if(!(p<0&&i.cells[C+S*i.width]<=0)){var _=s(C,n.minX),T=s(S,n.minY),E=Q3({x:_,y:T},v);if(E<Math.pow(a.edgeR1,2)){var k=Math.sqrt(E)-a.edgeR1;i.cells[C+S*i.width]+=p*k*k}}};a.nodeInfluenceFactor&&r.forEach(function(h){f(h,a.nodeInfluenceFactor/l)}),a.edgeInfluenceFactor&&e.forEach(function(h){d(h,a.edgeInfluenceFactor/u)}),a.negativeNodeInfluenceFactor&&t.forEach(function(h){f(h,a.negativeNodeInfluenceFactor/l)})}function fz(r,t,e,n){var i=r.getBBox(),a=e[0],o=e[1],s=e[2],l=e[3],u={topLeft:{x:i.minX-t,y:i.minY-t},topRight:{x:i.maxX+t,y:i.minY-t},bottomLeft:{x:i.minX-t,y:i.maxY+t},bottomRight:{x:i.maxX+t,y:i.maxY+t}},c=i.height*i.width;function f(v,p){return i.width*((v.y-i.minY+(p.y-i.minY))*.5)}if(o){if(a)return n?u.topLeft:u.bottomRight;if(s)return n?u.bottomLeft:u.topRight;var d=f(o,l);return d<c*.5?o.y>l.y?n?u.topLeft:u.bottomRight:n?u.topRight:u.bottomLeft:o.y<l.y?n?u.bottomLeft:u.topRight:n?u.bottomRight:u.topLeft}if(l){if(a)return n?u.topRight:u.bottomLeft;if(s)return n?u.bottomRight:u.topLeft}var h=f(a,s);return h<c*.5?a.x>s.x?n?u.topLeft:u.bottomRight:n?u.bottomLeft:u.topRight:a.x<s.x?n?u.topRight:u.bottomLeft:n?u.bottomRight:u.topLeft}var Gve=function(){function r(t,e){this.cfg=Dt(this.getDefaultCfg(),e),this.graph=t,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(n){return ot(n)?t.findById(n):n}),this.nonMembers=this.cfg.nonMembers.map(function(n){return ot(n)?t.findById(n):n}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return r.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},r.prototype.setPadding=function(){var t=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+t:10+t,this.cfg.bubbleCfg={nodeR0:this.padding-t,nodeR1:this.padding-t,morphBuffer:this.padding-t}},r.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},r.prototype.calcPath=function(t,e){var n,i,a;switch(this.type){case"round-convex":n=uz(t),a=BA(n.map(function(o){return[o.x,o.y]}),this.padding),i=jm(a);break;case"smooth-convex":n=uz(t),n.length===2?(a=BA(n.map(function(o){return[o.x,o.y]}),this.padding),i=jm(a)):n.length>2&&(a=sz(n.map(function(o){return[o.x,o.y]}),this.padding),i=NA(a));break;case"bubble":n=Bve(t,e,this.cfg.bubbleCfg),i=n.length>=2&&NA(n);break}return i},r.prototype.render=function(){this.group.addShape("path",{attrs:A({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},r.prototype.addMember=function(t){if(!!t){ot(t)&&(t=this.graph.findById(t)),this.members.push(t);var e=this.nonMembers.indexOf(t);return e>-1&&this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},r.prototype.addNonMember=function(t){if(!!t){ot(t)&&(t=this.graph.findById(t)),this.nonMembers.push(t);var e=this.members.indexOf(t);return e>-1&&this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},r.prototype.removeMember=function(t){if(!!t){ot(t)&&(t=this.graph.findById(t));var e=this.members.indexOf(t);return e>-1?(this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0):!1}},r.prototype.removeNonMember=function(t){if(!!t){ot(t)&&(t=this.graph.findById(t));var e=this.nonMembers.indexOf(t);return e>-1?(this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0):!1}},r.prototype.updateData=function(t,e){var n=this;this.group.findById(this.id).remove(),t&&(this.members=t.map(function(i){return ot(i)?n.graph.findById(i):i})),e&&(this.nonMembers=e.map(function(i){return ot(i)?n.graph.findById(i):i})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},r.prototype.updateStyle=function(t){var e=this.group.findById(this.id);e.attr(A({},t))},r.prototype.updateCfg=function(t){var e=this;this.cfg=Dt(this.cfg,t),this.id=this.cfg.id,this.group=this.cfg.group,t.members&&(this.members=this.cfg.members.map(function(n){return ot(n)?e.graph.findById(n):n})),t.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(n){return ot(n)?e.graph.findById(n):n})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},r.prototype.contain=function(t){var e=this,n;ot(t)?n=this.graph.findById(t):n=t;var i,a=n.getKeyShape();if(n.get("type")==="path")i=FA(a.attr("path"));else{var o=a.getCanvasBBox();i=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return i=i.map(function(s){var l=e.graph.getPointByCanvas(s[0],s[1]);return[l.x,l.y]}),q3(i,FA(this.path))},r.prototype.destroy=function(){this.group.remove(),this.cfg=null},r}(),qm=Zn,Uve="node",Vve=function(r){Ie(t,r);function t(e){var n=r.call(this)||this;return n.cfg=Dt(n.getDefaultCfg(),e),n.init(),n.animating=!1,n.destroyed=!1,n.cfg.enabledStack&&(n.undoStack=new i1(n.cfg.maxStep),n.redoStack=new i1(n.cfg.maxStep)),n}return t.prototype.init=function(){this.initCanvas();var e=new mve(this),n=new Ufe(this),i=new Ave(this),a=new kve(this);this.set({viewController:e,modeController:n,itemController:i,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},t.prototype.initGroups=function(){var e=this.get("canvas");if(!!e){var n=e.get("el"),i=(n||{}).id,a=i===void 0?"g6":i,o=e.addGroup({id:a+"-root",className:ir.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:a+"-edge",className:ir.edgeContainerClassName}),l=o.addGroup({id:a+"-node",className:ir.nodeContainerClassName}),u=o.addGroup({id:a+"-combo",className:ir.comboContainerClassName});u.toBack(),this.set({nodeGroup:l,edgeGroup:s,comboGroup:u})}var c=o.addGroup({id:a+"-delegate",className:ir.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},t.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},t.prototype.set=function(e,n){return Ni(e)?this.cfg=A(A({},this.cfg),e):this.cfg[e]=n,this},t.prototype.get=function(e){var n;return(n=this.cfg)===null||n===void 0?void 0:n[e]},t.prototype.getGroup=function(){return this.get("group")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.getMinZoom=function(){return this.get("minZoom")},t.prototype.setMinZoom=function(e){return this.set("minZoom",e)},t.prototype.getMaxZoom=function(){return this.get("maxZoom")},t.prototype.setMaxZoom=function(e){return this.set("maxZoom",e)},t.prototype.getWidth=function(){return this.get("width")},t.prototype.getHeight=function(){return this.get("height")},t.prototype.clearItemStates=function(e,n){ot(e)&&(e=this.findById(e));var i=this.get("itemController");n||(n=e.get("states")),i.clearItemStates(e,n);var a=this.get("stateController");a.updateStates(e,n,!1)},t.prototype.node=function(e){typeof e=="function"&&this.set("nodeMapper",e)},t.prototype.edge=function(e){typeof e=="function"&&this.set("edgeMapper",e)},t.prototype.combo=function(e){typeof e=="function"&&this.set("comboMapper",e)},t.prototype.findById=function(e){return this.get("itemMap")[e]},t.prototype.find=function(e,n){var i,a=this.get(e+"s");return G(a,function(o,s){if(n(o,s))return i=o,i}),i},t.prototype.findAll=function(e,n){var i=[];return G(this.get(e+"s"),function(a,o){n(a,o)&&i.push(a)}),i},t.prototype.findAllByState=function(e,n){return this.findAll(e,function(i){return i.hasState(n)})},t.prototype.translate=function(e,n){var i=this.get("group"),a=Or(i.getMatrix());a||(a=[1,0,0,0,1,0,0,0,1]),a=qm(a,[["t",e,n]]),i.setMatrix(a),this.emit("viewportchange",{action:"translate",matrix:i.getMatrix()}),this.autoPaint()},t.prototype.moveTo=function(e,n,i,a){var o=this.get("group");Y3(o,{x:e,y:n},i,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},t.prototype.fitView=function(e,n){e&&this.set("fitViewPadding",e);var i=this.get("viewController");n?i.fitViewByRules(n):i.fitView(),this.autoPaint()},t.prototype.fitCenter=function(){var e=this.get("viewController");e.fitCenter(),this.autoPaint()},t.prototype.addBehaviors=function(e,n){var i=this.get("modeController");return i.manipulateBehaviors(e,n,!0),this},t.prototype.removeBehaviors=function(e,n){var i=this.get("modeController");return i.manipulateBehaviors(e,n,!1),this},t.prototype.updateBehavior=function(e,n,i){var a=this.get("modeController");return a.updateBehavior(e,n,i),this},t.prototype.zoom=function(e,n,i,a){var o=this,s=this.get("group"),l=Or(s.getMatrix()),u=this.get("minZoom"),c=this.get("maxZoom");if(l||(l=[1,0,0,0,1,0,0,0,1]),n?l=qm(l,[["t",-n.x,-n.y],["s",e,e],["t",n.x,n.y]]):l=qm(l,[["s",e,e]]),u&&l[0]<u||c&&l[0]>c)return!1;if(i){var f=Or(s.getMatrix());f||(f=[1,0,0,0,1,0,0,0,1]);var d=f[0],h=d*e,v=void 0;if(!a)v={duration:500,callback:function(){o.emit("viewportchange",{action:"zoom",matrix:f})}};else if(a.callback){var p=a.callback;v=Or(a),v.callback=function(){o.emit("viewportchange",{action:"zoom",matrix:f}),p()}}else v=a;s.animate(function(g){if(g===1)f=l;else{var m=e5(d,h,g)/f[0];n?f=qm(f,[["t",-n.x,-n.y],["s",m,m],["t",n.x,n.y]]):f=qm(f,[["s",m,m]])}return{matrix:f}},v)}else s.setMatrix(l),this.emit("viewportchange",{action:"zoom",matrix:l}),this.autoPaint();return!0},t.prototype.zoomTo=function(e,n){var i=e/this.getZoom();return this.zoom(i,n)},t.prototype.focusItem=function(e,n,i){var a=this.get("viewController"),o=!1;n?o=!0:n===void 0&&(o=this.get("animate"));var s={};i?s=i:i===void 0&&(s=this.get("animateCfg")),a.focus(e,o,s),this.autoPaint()},t.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},t.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},t.prototype.getPointByClient=function(e,n){var i=this.get("viewController");return i.getPointByClient(e,n)},t.prototype.getClientByPoint=function(e,n){var i=this.get("viewController");return i.getClientByPoint(e,n)},t.prototype.getPointByCanvas=function(e,n){var i=this.get("viewController");return i.getPointByCanvas(e,n)},t.prototype.getCanvasByPoint=function(e,n){var i=this.get("viewController");return i.getCanvasByPoint(e,n)},t.prototype.getGraphCenterPoint=function(){var e=this.get("group").getCanvasBBox();return{x:(e.minX+e.maxX)/2,y:(e.minY+e.maxY)/2}},t.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},t.prototype.showItem=function(e,n){n===void 0&&(n=!0);var i=this.get("itemController"),a=i.changeItemVisibility(e,!0);if(n&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),l={},u={};switch(s){case"node":l.nodes=[{id:o,visible:!1}],u.nodes=[{id:o,visible:!0}];break;case"edge":l.nodes=[{id:o,visible:!1}],u.edges=[{id:o,visible:!0}];break;case"combo":l.nodes=[{id:o,visible:!1}],u.combos=[{id:o,visible:!0}];break}this.pushStack("visible",{before:l,after:u})}},t.prototype.hideItem=function(e,n){n===void 0&&(n=!0);var i=this.get("itemController"),a=i.changeItemVisibility(e,!1);if(n&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),l={},u={};switch(s){case"node":l.nodes=[{id:o,visible:!0}],u.nodes=[{id:o,visible:!1}];break;case"edge":l.nodes=[{id:o,visible:!0}],u.edges=[{id:o,visible:!1}];break;case"combo":l.nodes=[{id:o,visible:!0}],u.combos=[{id:o,visible:!1}];break}this.pushStack("visible",{before:l,after:u})}},t.prototype.refreshItem=function(e){var n=this.get("itemController");n.refreshItem(e)},t.prototype.setAutoPaint=function(e){var n=this;n.set("autoPaint",e);var i=n.get("canvas");i.set("autoDraw",e)},t.prototype.remove=function(e,n){n===void 0&&(n=!0),this.removeItem(e,n)},t.prototype.removeItem=function(e,n){n===void 0&&(n=!0);var i=e;if(ot(e)&&(i=this.findById(e)),!i&&ot(e))console.warn("The item to be removed does not exist!");else if(i){var a="";if(i.getType&&(a=i.getType()),n&&this.get("enabledStack")){var o=A(A({},i.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var l=i.getEdges(),u=l.length-1;u>=0;u--)s.edges.push(A(A({},l[u].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var c=i.getModel();c.comboId&&this.updateComboTree(i,void 0,!1)}var f=this.get("itemController");if(f.removeItem(i),a==="combo"){var d=VT(this.get("comboTrees"));this.set("comboTrees",d)}}},t.prototype.addItem=function(e,n,i,a){i===void 0&&(i=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController");if(!Gfe(e,n))return!1;if(n.id&&this.findById(n.id)){console.warn("This item exists already. Be sure the id %c"+n.id+"%c is unique.","font-size: 20px; color: red;","");return}var l,u=this.get("comboTrees");if(u||(u=[]),e==="combo"){var c=this.get("itemMap"),f=!1;if(u.forEach(function(x){f||Mc(x,function(w){if(n.parentId===w.id){f=!0;var S=A({id:n.id,depth:w.depth+2},n);w.children?w.children.push(S):w.children=[S],n.depth=S.depth,l=s.addItem(e,n)}var C=c[w.id];return f&&C&&C.getType&&C.getType()==="combo"&&s.updateCombo(C,w.children),!0})}),!f){var d=A({id:n.id,depth:0},n);n.depth=d.depth,u.push(d),l=s.addItem(e,n)}this.set("comboTrees",u)}else if(e==="node"&&ot(n.comboId)&&u){var h=this.findById(n.comboId);h&&h.getType&&h.getType()!=="combo"&&console.warn("'"+n.comboId+"' is not a id of a combo in the graph, the node will be added without combo."),l=s.addItem(e,n);var v=this.get("itemMap"),p=!1,g=!1;(u||[]).forEach(function(x){g||p||Mc(x,function(w){if(w.id===n.id)return g=!0,!1;if(n.comboId===w.id&&!g){p=!0;var S=Or(n);S.itemType="node",w.children?w.children.push(S):w.children=[S],S.depth=w.depth+1}return p&&v[w.id].getType&&v[w.id].getType()==="combo"&&s.updateCombo(v[w.id],w.children),!0})})}else l=s.addItem(e,n);if(e==="node"&&n.comboId||e==="combo"&&n.parentId){var h=this.findById(n.comboId||n.parentId);h&&h.getType&&h.getType()==="combo"&&h.addChild(l)}var m=this.get("combos");if(m&&m.length>0&&this.sortCombos(),this.autoPaint(),i&&this.get("enabledStack")){var y=A(A({},l.getModel()),{itemType:e}),b={};switch(e){case"node":b.nodes=[y];break;case"edge":b.edges=[y];break;case"combo":b.combos=[y];break}this.pushStack("add",{before:{},after:b})}return l},t.prototype.add=function(e,n,i,a){return i===void 0&&(i=!0),a===void 0&&(a=!0),this.addItem(e,n,i,a)},t.prototype.updateItem=function(e,n,i){var a=this;i===void 0&&(i=!0);var o=this.get("itemController"),s;ot(e)?s=this.findById(e):s=e;var l=Or(s.getModel()),u="";s.getType&&(u=s.getType());var c=oi([],s.getStates(),!0);if(u==="combo"&&G(c,function(v){return a.setItemState(s,v,!1)}),o.updateItem(s,n),u==="combo"&&G(c,function(v){return a.setItemState(s,v,!0)}),i&&this.get("enabledStack")){var f={nodes:[],edges:[],combos:[]},d={nodes:[],edges:[],combos:[]},h=A({id:l.id},n);switch(u){case"node":f.nodes.push(l),d.nodes.push(h);break;case"edge":f.edges.push(l),d.edges.push(h);break;case"combo":f.combos.push(l),d.combos.push(h);break}u==="node"&&f.nodes.push(l),this.pushStack("update",{before:f,after:d})}},t.prototype.update=function(e,n,i){i===void 0&&(i=!0),this.updateItem(e,n,i)},t.prototype.setItemState=function(e,n,i){ot(e)&&(e=this.findById(e));var a=this.get("itemController");a.setItemState(e,n,i);var o=this.get("stateController");ot(i)?o.updateState(e,n+":"+i,!0):o.updateState(e,n,i)},t.prototype.priorityState=function(e,n){var i=this.get("itemController");i.priorityState(e,n)},t.prototype.data=function(e){c5(e),this.set("data",e)},t.prototype.render=function(){var e=this;this.set("comboSorted",!1);var n=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!n)throw new Error("data must be defined first");var i=n.nodes,a=i===void 0?[]:i,o=n.edges,s=o===void 0?[]:o,l=n.combos,u=l===void 0?[]:l;if(this.clear(!0),this.emit("beforerender"),G(a,function(g){e.add("node",g,!1,!1)}),u&&u.length!==0){var c=UT(u,a);this.set("comboTrees",c),e.addCombos(u)}G(s,function(g){e.add("edge",g,!1,!1)});var f=e.get("animate");(e.get("fitView")||e.get("fitCenter"))&&e.set("animate",!1);var d=e.get("layoutController");if(d){if(d.layout(h),this.destroyed)return}else e.get("fitView")&&e.fitView(),e.get("fitCenter")&&e.fitCenter(),e.emit("afterrender"),e.set("animate",f);function h(){e.get("fitView")?e.fitView():e.get("fitCenter")&&e.fitCenter(),e.autoPaint(),e.emit("afterrender"),(e.get("fitView")||e.get("fitCenter"))&&e.set("animate",f)}if(!this.get("groupByTypes"))if(u&&u.length!==0)this.sortCombos();else if(n.nodes&&n.edges&&n.nodes.length<n.edges.length){var v=this.getNodes();v.forEach(function(g){g.toFront()})}else{var p=this.getEdges();p.forEach(function(g){g.toBack()})}this.get("enabledStack")&&this.pushStack("render")},t.prototype.read=function(e){this.data(e),this.render()},t.prototype.diffItems=function(e,n,i){var a=this,o,s=this.get("itemMap");G(i,function(l){if(o=s[l.id],o){if(a.get("animate")&&e===Uve){var u=o.getContainer().getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:u[6],y:u[7]})}a.updateItem(o,l,!1)}else o=a.addItem(e,l,!1);o&&n[e+"s"].push(o)})},t.prototype.changeData=function(e,n){n===void 0&&(n=!0);var i=this;if(!c5(e))return this;n&&this.get("enabledStack")&&this.pushStack("changedata",{before:i.save(),after:e}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(p){return i.clearItemStates(p)}),this.getEdges().map(function(p){return i.clearItemStates(p)});var a=this.get("canvas"),o=a.get("localRefresh");a.set("localRefresh",!1),i.get("data")||(i.data(e),i.render());var s=this.get("itemMap"),l={nodes:[],edges:[]},u=e.combos;if(u){var c=UT(u,e.nodes);this.set("comboTrees",c)}else this.set("comboTrees",[]);this.diffItems("node",l,e.nodes),G(s,function(p,g){s[g].getModel().depth=0,!(p.getType&&p.getType()==="edge")&&(p.getType&&p.getType()==="combo"?(delete s[g],p.destroy()):l.nodes.indexOf(p)<0&&(delete s[g],i.remove(p,!1)))});for(var f=this.getCombos(),d=f.length,h=d-1;h>=0;h--)f[h].destroyed&&f.splice(h,1);u&&(i.addCombos(u),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,e.edges),G(s,function(p,g){p.getType&&(p.getType()==="node"||p.getType()==="combo")||l.edges.indexOf(p)<0&&(delete s[g],i.remove(p,!1))}),this.set({nodes:l.nodes,edges:l.edges});var v=this.get("layoutController");return v&&(v.changeData(),i.get("animate")&&!v.getLayoutType()?i.positionsAnimate():i.autoPaint()),setTimeout(function(){a.set("localRefresh",o)},16),this},t.prototype.addCombos=function(e){var n=this,i=n.get("comboTrees"),a=this.get("itemController");a.addCombos(i,e)},t.prototype.createCombo=function(e,n){var i=this;this.set("comboSorted",!1);var a="",o;if(!!e){if(ot(e))a=e,o={id:e};else{if(a=e.id,!a){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}o=e}var s=n.map(function(u){var c=i.findById(u),f=c.getModel(),d="";c.getType&&(d=c.getType());var h={id:c.getID(),itemType:d};return d==="combo"?(h.parentId=a,f.parentId=a):d==="node"&&(h.comboId=a,f.comboId=a),h});o.children=s,this.addItem("combo",o,!1),this.set("comboSorted",!1);var l=this.get("comboTrees");(l||[]).forEach(function(u){Mc(u,function(c){return c.id===a?(c.itemType="combo",c.children=s,!1):!0})}),l&&this.sortCombos()}},t.prototype.uncombo=function(e){var n=this,i,a=this,o=e;if(ot(e)&&(o=this.findById(e)),!o||o.getType&&o.getType()!=="combo"){console.warn("The item is not a combo!");return}var s=o.getModel().parentId,l=a.get("comboTrees");l||(l=[]);var u=this.get("itemMap"),c=o.get("id"),f,d=[],h=this.get("combos"),v=this.findById(s);if(l.forEach(function(g){f||Mc(g,function(m){var y;if(m.id===c){f=m;var b=o.getEdges();b.forEach(function(w){n.removeItem(w,!1)});var x=h.indexOf(o);h.splice(x,1),delete u[c],o.destroy(),n.emit("afterremoveitem",{item:o,type:"combo"})}if(s&&f&&m.id===s){v.removeCombo(o),d=m.children;var x=d.indexOf(f);return x!==-1&&d.splice(x,1),(y=f.children)===null||y===void 0||y.forEach(function(S){var C=n.findById(S.id),_=C.getModel();C.getType&&C.getType()==="combo"?(S.parentId=s,delete S.comboId,_.parentId=s,delete _.comboId):C.getType&&C.getType()==="node"&&(S.comboId=s,_.comboId=s),v.addChild(C),d.push(S)}),!1}return!0})}),!s&&f){var p=l.indexOf(f);l.splice(p,1),(i=f.children)===null||i===void 0||i.forEach(function(g){g.parentId=void 0;var m=n.findById(g.id).getModel();delete m.parentId,delete m.comboId,g.itemType!=="node"&&l.push(g)})}},t.prototype.updateCombos=function(){var e=this,n=this,i=this.get("comboTrees"),a=n.get("itemController"),o=n.get("itemMap");(i||[]).forEach(function(s){Mc(s,function(l){if(!l)return!0;var u=o[l.id];if(u&&u.getType&&u.getType()==="combo"){var c=oi([],u.getStates(),!0);G(c,function(f){return e.setItemState(u,f,!1)}),a.updateCombo(u,l.children),G(c,function(f){return e.setItemState(u,f,!0)})}return!0})}),n.sortCombos()},t.prototype.updateCombo=function(e){var n=this,i=this,a=e,o;if(ot(e)&&(a=this.findById(e)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),l=i.get("itemController"),u=i.get("itemMap");(s||[]).forEach(function(c){Mc(c,function(f){if(!f)return!0;var d=u[f.id];if(o===f.id&&d&&d.getType&&d.getType()==="combo"){var h=oi([],d.getStates(),!0);G(h,function(v){d.getStateStyle(v)&&n.setItemState(d,v,!1)}),l.updateCombo(d,f.children),G(h,function(v){d.getStateStyle(v)&&n.setItemState(d,v,!0)}),o&&(o=f.parentId)}return!0})})},t.prototype.updateComboTree=function(e,n,i){i===void 0&&(i=!0);var a=this;this.set("comboSorted",!1);var o;ot(e)?o=a.findById(e):o=e;var s=o.getModel(),l=s.comboId||s.parentId,u="";if(o.getType&&(u=o.getType()),n&&u==="combo"){var c=this.get("comboTrees"),f=!0,d;if((c||[]).forEach(function(y){d||ds(y,function(b){if(!d)return b.id===o.getID()&&(d=b),!0})}),ds(d,function(y){return y.id===n?(f=!1,!1):!0}),!f){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(i&&this.get("enabledStack")){var h={},v={};u==="combo"?(h.combos=[{id:s.id,parentId:s.parentId}],v.combos=[{id:s.id,parentId:n}]):u==="node"&&(h.nodes=[{id:s.id,parentId:s.comboId}],v.nodes=[{id:s.id,parentId:n}]),this.pushStack("updateComboTree",{before:h,after:v})}if(s.parentId||s.comboId){var p=this.findById(s.parentId||s.comboId);p&&p.removeChild(o)}if(u==="combo"?s.parentId=n:u==="node"&&(s.comboId=n),n){var g=this.findById(n);g&&g.addChild(o)}if(l){var g=this.findById(l);g&&g.removeChild(o)}var m=VT(this.get("comboTrees"),s.id,n);this.set("comboTrees",m),this.updateCombos()},t.prototype.save=function(){var e=[],n=[],i=[];return G(this.get("nodes"),function(a){e.push(a.getModel())}),G(this.get("edges"),function(a){n.push(a.getModel())}),G(this.get("combos"),function(a){i.push(a.getModel())}),{nodes:e,edges:n,combos:i}},t.prototype.changeSize=function(e,n){var i=this.get("viewController");return i.changeSize(e,n),this},t.prototype.refresh=function(){var e=this;if(e.emit("beforegraphrefresh"),e.get("animate"))e.positionsAnimate();else{var n=e.get("nodes"),i=e.get("edges"),a=e.get("edges");G(n,function(o){o.refresh()}),G(i,function(o){o.refresh()}),G(a,function(o){o.refresh()})}e.emit("aftergraphrefresh"),e.autoPaint()},t.prototype.getNodes=function(){return this.get("nodes")},t.prototype.getEdges=function(){return this.get("edges")},t.prototype.getCombos=function(){return this.get("combos")},t.prototype.getComboChildren=function(e){if(ot(e)&&(e=this.findById(e)),!e||e.getType&&e.getType()!=="combo"){console.warn("The combo does not exist!");return}return e.getChildren()},t.prototype.positionsAnimate=function(){var e=this;e.emit("beforeanimate");var n=e.get("animateCfg"),i=n.onFrame,a=e.getNodes(),o=a.map(function(l){var u=l.getModel();return{id:u.id,x:u.x,y:u.y}});e.isAnimating()&&e.stopAnimate();var s=e.get("canvas");s.animate(function(l){G(o,function(u){var c=e.findById(u.id);if(!(!c||c.destroyed)){var f=c.get("originAttrs"),d=c.get("model");if(!f){var h=c.getContainer().getMatrix();h||(h=[1,0,0,0,1,0,0,0,1]),f={x:h[6],y:h[7]},c.set("originAttrs",f)}if(i){var v=i(c,l,u,f);c.set("model",Object.assign(d,v))}else d.x=f.x+(u.x-f.x)*l,d.y=f.y+(u.y-f.y)*l}}),e.refreshPositions()},{duration:n.duration,easing:n.easing,callback:function(){G(a,function(u){u.set("originAttrs",null)}),n.callback&&n.callback(),e.emit("afteranimate"),e.animating=!1}})},t.prototype.refreshPositions=function(){var e=this;e.emit("beforegraphrefreshposition");var n=e.get("nodes"),i=e.get("edges"),a=e.get("vedges"),o=e.get("combos"),s,l={};G(n,function(u){s=u.getModel();var c=u.get("originAttrs");if(!(c&&s.x===c.x&&s.y===c.y)){var f=u.updatePosition({x:s.x,y:s.y});l[s.id]=f,s.comboId&&(l[s.comboId]=l[s.comboId]||f)}}),o&&o.length!==0&&e.updateCombos(),G(i,function(u){var c=u.getSource().getModel(),f=u.getTarget();if(!Ni(f)){var d=f.getModel();(l[c.id]||l[d.id]||u.getModel().isComboEdge)&&u.refresh()}}),G(a,function(u){u.refresh()}),e.emit("aftergraphrefreshposition"),e.autoPaint()},t.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},t.prototype.isAnimating=function(){return this.animating},t.prototype.getZoom=function(){var e=this.get("group").getMatrix();return e?e[0]:1},t.prototype.getCurrentMode=function(){var e=this.get("modeController");return e.getMode()},t.prototype.setMode=function(e){var n=this.get("modeController");return n.setMode(e),this},t.prototype.clear=function(e){var n;return e===void 0&&(e=!1),(n=this.get("canvas"))===null||n===void 0||n.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),e||this.emit("afterrender"),this},t.prototype.updateLayout=function(e,n,i){var a=this,o=this.get("layoutController");if(ot(e)&&(e={type:e}),n){var s=i;s||(n==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var l=["force","gForce","fruchterman"];l.includes(e.type)||!e.type&&l.includes(o==null?void 0:o.layoutType)?e.center=[s.x,s.y]:this.once("afterlayout",function(f){var d=a.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*d[0]+d[6],s.y=s.y*d[0]+d[7];var h=a.getGroup().getCanvasBBox(),v=h.minX,p=h.maxX,g=h.minY,m=h.maxY,y={x:(v+p)/2,y:(g+m)/2};n==="begin"&&(y.x=v,y.y=g),a.translate(s.x-y.x,s.y-y.y)})}var u=this.get("layout"),c={};Object.assign(c,u,e),this.set("layout",c),o.isLayoutTypeSame(c)&&c.gpuEnabled===u.gpuEnabled?o.updateLayoutCfg(c):o.changeLayout(c)},t.prototype.destroyLayout=function(){var e=this.get("layoutController");e.destroyLayout()},t.prototype.layout=function(){var e=this.get("layoutController"),n=this.get("layout");if(!(!n||!e)){if(n.workerEnabled){e.layout();return}e.layoutMethod?e.relayout(!0):e.layout()}},t.prototype.collapseCombo=function(e){var n=this;if(ot(e)&&(e=this.findById(e)),!e){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:e});var i=e.getModel(),a=this.get("itemController");a.collapseCombo(e),i.collapsed=!0;var o=this.getEdges().concat(this.get("vedges")),s=[],l=[],u=this.get("comboTrees"),c=!1;(u||[]).forEach(function(h){c||ds(h,function(v){if(c&&v.depth<=i.depth)return!1;if(i.id===v.id&&(c=!0),c){var p=n.findById(v.id);p&&p.getType&&p.getType()==="combo"&&(s=s.concat(p.getNodes()),l=l.concat(p.getCombos()))}return!0})});var f={},d=[];o.forEach(function(h){if(!(h.isVisible()&&!h.getModel().isVEdge)){var v=h.getSource(),p=h.getTarget();if((s.includes(v)||l.includes(v))&&!s.includes(p)&&!l.includes(p)||v.getModel().id===i.id){var g=h.getModel();if(g.isVEdge){n.removeItem(h,!1);return}for(var m=p.getModel();!p.isVisible();){if(p=n.findById(m.parentId||m.comboId),!p||!m.parentId&&!m.comboId)return;m=p.getModel()}var y=m.id;if(f[i.id+"-"+y]){f[i.id+"-"+y]+=g.size||1;return}var b=n.addItem("vedge",{source:i.id,target:y,isVEdge:!0},!1);f[i.id+"-"+y]=g.size||1,d.push(b)}else if(!s.includes(v)&&!l.includes(v)&&(s.includes(p)||l.includes(p))||p.getModel().id===i.id){var g=h.getModel();if(g.isVEdge){n.removeItem(h,!1);return}for(var x=v.getModel();!v.isVisible();){if(v=n.findById(x.parentId||x.comboId),!v||!x.parentId&&!x.comboId)return;x=v.getModel()}var w=x.id;if(f[w+"-"+i.id]){f[w+"-"+i.id]+=g.size||1;return}var b=n.addItem("vedge",{target:i.id,source:w,isVEdge:!0},!1);f[w+"-"+i.id]=g.size||1,d.push(b)}}}),d.forEach(function(h){var v=h.getModel();n.updateItem(h,{size:f[v.source+"-"+v.target]},!1)}),this.emit("aftercollapseexpandcombo",{action:"collapse",item:e})},t.prototype.expandCombo=function(e){var n=this;if(ot(e)&&(e=this.findById(e)),!e||e.getType&&e.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:e});var i=e.getModel(),a=this.get("itemController");a.expandCombo(e),i.collapsed=!1;var o=this.getEdges().concat(this.get("vedges")),s=[],l=[],u=this.get("comboTrees"),c=!1;(u||[]).forEach(function(h){c||ds(h,function(v){if(c&&v.depth<=i.depth)return!1;if(i.id===v.id&&(c=!0),c){var p=n.findById(v.id);p&&p.getType&&p.getType()==="combo"&&(s=s.concat(p.getNodes()),l=l.concat(p.getCombos()))}return!0})});var f={},d={};o.forEach(function(h){if(!(h.isVisible()&&!h.getModel().isVEdge)){var v=h.getSource(),p=h.getTarget(),g=v.get("id"),m=p.get("id");if((s.includes(v)||l.includes(v))&&!s.includes(p)&&!l.includes(p)||g===i.id){if(h.getModel().isVEdge){n.removeItem(h,!1);return}for(var y=p.getModel();!p.isVisible();){if(p=n.findById(y.comboId||y.parentId),!p||!y.parentId&&!y.comboId)return;y=p.getModel()}m=y.id;for(var b=v.getModel();!v.isVisible();){if(v=n.findById(b.comboId||b.parentId),!v||!b.parentId&&!b.comboId)return;if(b.comboId===i.id||b.parentId===i.id)break;b=v.getModel()}if(g=b.id,m){var x=g+"-"+m;if(f[x]){f[x]+=h.getModel().size||1,n.updateItem(d[x],{size:f[x]},!1);return}var w=n.addItem("vedge",{source:g,target:m,isVEdge:!0},!1);f[x]=h.getModel().size||1,d[x]=w}}else if(!s.includes(v)&&!l.includes(v)&&(s.includes(p)||l.includes(p))||m===i.id){if(h.getModel().isVEdge){n.removeItem(h,!1);return}for(var b=v.getModel();!v.isVisible();){if(v=n.findById(b.comboId||b.parentId),!v||!b.parentId&&!b.comboId)return;b=v.getModel()}g=b.id;for(var y=p.getModel();!p.isVisible();){if(p=n.findById(y.comboId||y.parentId),!p||!y.parentId&&!y.comboId)return;if(y.comboId===i.id||y.parentId===i.id)break;y=p.getModel()}if(m=y.id,g){var x=g+"-"+m;if(f[x]){f[x]+=h.getModel().size||1,n.updateItem(d[x],{size:f[x]},!1);return}var w=n.addItem("vedge",{target:m,source:g,isVEdge:!0},!1);f[x]=h.getModel().size||1,d[x]=w}}else(s.includes(v)||l.includes(v))&&(s.includes(p)||l.includes(p))&&v.isVisible()&&p.isVisible()&&h.show()}}),this.emit("aftercollapseexpandcombo",{action:"expand",item:e})},t.prototype.collapseExpandCombo=function(e){if(ot(e)&&(e=this.findById(e)),!(!e||e.getType&&e.getType()!=="combo")){for(var n=e.getModel(),i=this.findById(n.parentId);i;){var a=i.getModel();if(a.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),i=void 0;return}i=this.findById(a.parentId)}var o=n.collapsed;o?this.expandCombo(e):this.collapseCombo(e),this.updateCombo(e)}},t.prototype.sortCombos=function(){var e=this,n=this.get("comboSorted");if(!n){this.set("comboSorted",!0);var i=[],a={},o=this.get("comboTrees");(o||[]).forEach(function(l){ds(l,function(u){return i[u.depth]?i[u.depth].push(u.id):i[u.depth]=[u.id],a[u.id]=u.depth,!0})});var s=this.getEdges().concat(this.get("vedges"));(s||[]).forEach(function(l){var u=l.getModel(),c=a[u.source]||0,f=a[u.target]||0,d=Math.max(c,f);i[d]?i[d].push(u.id):i[d]=[u.id]}),i.forEach(function(l){if(!(!l||!l.length))for(var u=l.length-1;u>=0;u--){var c=e.findById(l[u]);c&&c.toFront()}})}},t.prototype.getNeighbors=function(e,n){var i=e;return ot(e)&&(i=this.findById(e)),i.getNeighbors(n)},t.prototype.getNodeDegree=function(e,n,i){n===void 0&&(n=void 0),i===void 0&&(i=!1);var a=e;ot(e)&&(a=this.findById(e));var o=this.get("degrees");(!o||i)&&(o=Ac(this.save()),this.set("degrees",o));var s=o[a.getID()],l=0;if(!s)return 0;switch(n){case"in":l=s.inDegree;break;case"out":l=s.outDegree;break;case"all":l=s;break;default:l=s.degree;break}return l},t.prototype.getUndoStack=function(){return this.undoStack},t.prototype.getRedoStack=function(){return this.redoStack},t.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},t.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},t.prototype.pushStack=function(e,n,i){if(e===void 0&&(e="update"),i===void 0&&(i="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=n?Or(n):{before:{},after:Or(this.save())};i==="redo"?this.redoStack.push({action:e,data:a}):this.undoStack.push({action:e,data:a}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})},t.prototype.getAdjMatrix=function(e,n){e===void 0&&(e=!0),n===void 0&&(n=this.get("directed"));var i=this.get("adjMatrix");return(!i||!e)&&(i=cd(this.save(),n),this.set("adjMatrix",i)),i},t.prototype.getShortestPathMatrix=function(e,n){e===void 0&&(e=!0),n===void 0&&(n=this.get("directed"));var i=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!i||!e)&&(i=cd(this.save(),n),this.set("adjMatrix",i)),(!a||!e)&&(a=km(this.save(),n),this.set("shortestPathMatrix",a)),a},t.prototype.on=function(e,n,i){return r.prototype.on.call(this,e,n,i)},t.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},t.prototype.createHull=function(e){if(!e.members||e.members.length<1){console.warn("Create hull failed! The members is empty.");return}var n=this.get("hullGroup"),i=this.get("hullMap");if(i||(i={},this.set("hullMap",i)),(!n||n.get("destroyed"))&&(n=this.get("group").addGroup({id:"hullGroup"}),n.toBack(),this.set("hullGroup",n)),i[e.id])return console.warn("Existed hull id."),i[e.id];var a=n.addGroup({id:e.id+"-container"}),o=new Gve(this,A(A({},e),{group:a})),s=o.id;return i[s]=o,o},t.prototype.getHulls=function(){return this.get("hullMap")},t.prototype.getHullById=function(e){return this.get("hullMap")[e]},t.prototype.removeHull=function(e){var n,i;ot(e)?i=this.getHullById(e):i=e,(n=this.get("hullMap"))===null||n===void 0||delete n[i.id],i.destroy()},t.prototype.removeHulls=function(){var e=this.getHulls();!e||!Object.keys(e).length||(Object.keys(e).forEach(function(n){var i=e[n];i.destroy()}),this.set("hullMap",{}))},t}(ym);function z1(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?z1=function(e){return typeof e}:z1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z1(r)}var pd=Zn,dz="-shape",$A="-label",G1=["startArrow","endArrow"],hz={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Hve={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},U1={edge:Hve,node:hz,combo:hz},zA="-label-bg",GA={options:{labelCfg:{style:{fontFamily:ir.windowFontFamily}},descriptionCfg:{style:{fontFamily:ir.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(t){return{}},getOptions:function(t,e){return e==="move"||(e==null?void 0:e.includes("bbox"))?{}:Dt({},this.options,this.getCustomConfig(t)||{},t)},draw:function(t,e){e.shapeMap={},this.mergeStyle=this.getOptions(t);var n=this.drawShape(t,e);if(n.set("className",this.itemType+dz),e.shapeMap[this.itemType+dz]=n,t.label){var i=this.drawLabel(t,e);i.set("className",this.itemType+$A),e.shapeMap[this.itemType+$A]=i}return n},afterDraw:function(t,e,n){},drawShape:function(t,e){return null},drawLabel:function(t,e){var n=(this.mergeStyle||this.getOptions(t)||{}).labelCfg,i=n||{},a=this.getLabelStyle(t,i,e),o=a.rotate;delete a.rotate;var s=e.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape"});if(e.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var l=s.getBBox(),u=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":u=pd(u,[["t",-l.width/2,-l.height/2],["r",o],["t",l.width/2,l.height/2]]);break;case"lefttop":u=pd(u,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":u=pd(u,[["t",-a.x,-a.y-l.height/2],["r",o],["t",a.x,a.y+l.height/2]]);break;default:u=pd(u,[["t",-l.width/2,-l.height/2],["r",o],["t",l.width/2,l.height/2]]);break}else u=pd(u,[["t",-a.x,-a.y-l.height/2],["r",o],["t",a.x,a.y+l.height/2]]);s.setMatrix(u)}if(a.background){var c=this.drawLabelBg(t,e,s),f=this.itemType+zA;c.set("classname",f),e.shapeMap[f]=c,s.toFront()}return s},drawLabelBg:function(t,e,n){var i=this.options.labelCfg,a=jt({},i,t.labelCfg),o=this.getLabelBgStyleByPosition(n,t,a,e),s=e.addShape("rect",{name:"text-bg-shape",attrs:o});return e.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(t,e,n){return{text:t.label}},getLabelBgStyleByPosition:function(t,e,n,i){return{}},getLabelStyle:function(t,e,n){var i=this.getLabelStyleByPosition(t,e,n),a=this.itemType+"Label",o=ir[a]?ir[a].style:null;return A(A(A({},o),i),e.style)},getShapeStyle:function(t){return t.style},update:function(t,e,n){this.updateShapeStyle(t,e,n),this.updateLabel(t,e,n)},updateShapeStyle:function(t,e,n){var i,a=e.getContainer(),o=e.getKeyShape(),s=jt({},o.attr(),t.style),l=function(f){var d,h=s[f];if(Ni(h)){var v=((i=a.shapeMap)===null||i===void 0?void 0:i[f])||a.find(function(p){return p.get("name")===f});v==null||v.attr(h)}else o.attr((d={},d[f]=h,d))};for(var u in s)l(u)},updateLabel:function(t,e,n){var i,a;if(t.label||t.label===""){var o=e.getContainer(),s=(this.mergeStyle||this.getOptions({},n)||{}).labelCfg,l=s===void 0?{}:s,u=this.itemType+$A,c=o.shapeMap[u]||o.find(function(S){return S.get("className")===u}),f=this.itemType+zA,d=o.shapeMap[f]||o.find(function(S){return S.get("className")===f});if(c){(!n||n==="bbox|label"||this.itemType==="edge"&&n!=="style")&&(l=Dt(l,t.labelCfg));var v=this.getLabelStyleByPosition(t,l,o),p=(i=t.labelCfg)===null||i===void 0?void 0:i.style,g=A(A({},v),p),m=g.rotate;if(delete g.rotate,!isNaN(m)&&m!==""){var y=[1,0,0,0,1,0,0,0,1];y=pd(y,[["t",-g.x,-g.y],["r",m],["t",g.x,g.y]]),g.matrix=y,c.attr(g)}else((a=c.getMatrix())===null||a===void 0?void 0:a[4])!==1&&c.resetMatrix(),c.attr(g);if(!d)g.background&&(d=this.drawLabelBg(t,o,c),d.set("classname",f),o.shapeMap[f]=d,c.toFront());else if(g.background){var b=this.getLabelBgStyleByPosition(c,t,l,o),x=b;if(!isNaN(m)&&m!==""){var w=[1,0,0,0,1,0,0,0,1];w=pd(w,[["t",-x.x,-x.y],["r",m],["t",x.x,x.y]]),x.matrix=w}else d.resetMatrix();d.attr(x)}else o.removeChild(d)}else{var h=this.drawLabel(t,o);h.set("className",u),o.shapeMap[u]=h}}},afterUpdate:function(t,e){},setState:function(t,e,n){var i,a,o,s=n.get("keyShape");if(!(!s||s.destroyed)){var l=n.getType(),u=bu(e)?t:t+":"+e,c=this.getStateStyle(u,n),f=n.getStateStyle(u);if(!(!f&&!c)){var d=jt({},f||c),h=n.getContainer(),v={x:1,y:1,cx:1,cy:1};if(l==="combo"&&(v.r=1,v.width=1,v.height=1),e){var p=function(R){var L,O=d[R];if(Ni(O)&&!G1.includes(R)){var B=((o=h.shapeMap)===null||o===void 0?void 0:o[R])||h.find(function(U){return U.get("name")===R});B==null||B.attr(O)}else s.attr((L={},L[R]=O,L))};for(var g in d)p(g)}else{var m=h1(n.getCurrentStatesStyle()),y=n.getModel(),b=jt({},y.style,h1(n.getOriginStyle())),x=s.get("name"),w=s.attr(),S={};Object.keys(w).forEach(function($){if($!=="img"){var R=w[$];R&&z1(R)==="object"?S[$]=Or(R):S[$]=R}});var C={},_=function(R){var L=d[R];if(Ni(L)&&!G1.includes(R)){var O=h.shapeMap[R]||h.find(function(W){return W.get("name")===R});if(O){var B=h1(O.attr());G(L,function(W,X){if(R===x&&S[X]&&!v[X]){delete S[X];var ie=b[R][X]||U1[l][X];s.attr(X,ie)}else if(B[X]||B[X]===0){delete B[X];var q=b[R][X]||U1[l][X];O.attr(X,q)}}),C[R]=B}}else if(S[R]&&!v[R]){delete S[R];var U=b[R]||(b[x]?b[x][R]:void 0)||U1[l][R];s.attr(R,U)}};for(var T in d)_(T);x?C[x]=S:jt(C,S);for(var g in m)if(!v[g]){var E=m[g];(!Ni(E)||G1.includes(g))&&(x?(jt(b[x],(a={},a[g]=E,a)),delete b[g]):jt(b,(i={},i[g]=E,i)),delete m[g])}var k={};Dt(k,b,C,m);var I=!1,P=function(R){var L,O,B=k[R];if(Ni(B)&&!G1.includes(R)){var U=h.shapeMap[R]||h.find(function(X){return X.get("name")===R});U&&(U.get("type")==="text"&&(delete B.x,delete B.y,delete B.matrix),R===x&&(l==="combo"&&(delete B.r,delete B.width,delete B.height),I=!0),U.attr(B))}else if(!I){var W=B||U1[l][R];l==="combo"?x||s.attr((L={},L[R]=W,L)):s.attr((O={},O[R]=W,O))}};for(var F in k)P(F)}}}},getStateStyle:function(t,e){var n=e.getModel(),i=e.getType(),a=this.getOptions(n),o=a.stateStyles,s=a.style,l=s===void 0?{}:s,u=n.stateStyles?n.stateStyles[t]:o&&o[t];return i==="combo"?Or(u):jt({},l,u)},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e,n,i=(t==null?void 0:t.anchorPoints)||((e=this.getCustomConfig(t))===null||e===void 0?void 0:e.anchorPoints)||((n=this.options)===null||n===void 0?void 0:n.anchorPoints);return i}},Wve={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:ir.nodeLabel.offset,getSize:function(t){var e,n=((e=this.mergeStyle)===null||e===void 0?void 0:e.size)||t.size||this.getOptions({}).size||ir.defaultNode.size;return Qe(n)&&n.length===1&&(n=[n[0],n[0]]),Qe(n)||(n=[n,n]),n},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition;if(n==="center")return{x:0,y:0,text:t.label};var i=e.offset;nt(i)&&(i=this.offset);var a=this.getSize(t),o;switch(n){case"top":o={x:0,y:-a[1]/2-i,textBaseline:"bottom"};break;case"bottom":o={x:0,y:a[1]/2+i,textBaseline:"top"};break;case"left":o={x:-a[0]/2-i,y:0,textAlign:"right"};break;default:o={x:a[0]/2+i,y:0,textAlign:"left"};break}return o.text=t.label,o},getLabelBgStyleByPosition:function(t,e,n,i){var a;if(!t)return{};var o=(a=n.style)===null||a===void 0?void 0:a.background;if(!o)return{};var s=t.getBBox(),l=MA(o.padding),u=s.width+l[1]+l[3],c=s.height+l[0]+l[2];return A(A({x:s.minX-l[3],y:s.minY-l[0]},o),{width:u,height:c})},drawShape:function(t,e){var n=this.shapeType,i=this.getShapeStyle(t),a=e.addShape(n,{attrs:i,draggable:!0,name:"node-shape"});return e.shapeMap["node-shape"]=a,a},updateLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,i=e.shapeMap["link-point-left"]||e.find(function(k){return k.get("className")==="link-point-left"}),a=e.shapeMap["link-point-right"]||e.find(function(k){return k.get("className")==="link-point-right"}),o=e.shapeMap["link-point-top"]||e.find(function(k){return k.get("className")==="link-point-top"}),s=e.shapeMap["link-point-bottom"]||e.find(function(k){return k.get("className")==="link-point-bottom"}),l;i&&(l=i.attr()),a&&!l&&(l=a.attr()),o&&!l&&(l=o.attr()),s&&!l&&(l=s.attr()),l||(l=n);var u=jt({},l,t.linkPoints),c=u.fill,f=u.stroke,d=u.lineWidth,h=u.size/2;h||(h=u.r);var v=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},p=v.left,g=v.right,m=v.top,y=v.bottom,b=this.getSize(t),x=b[0],w=b[1],S={r:h,fill:c,stroke:f,lineWidth:d};if(i)!p&&p!==void 0?(i.remove(),delete e.shapeMap["link-point-left"]):i.attr(A(A({},S),{x:-x/2,y:0}));else if(p){var C="link-point-left";e.shapeMap[C]=e.addShape("circle",{attrs:A(A({},S),{x:-x/2,y:0}),className:C,name:C,isAnchorPoint:!0})}if(a)!g&&g!==void 0&&(a.remove(),delete e.shapeMap["link-point-right"]),a.attr(A(A({},S),{x:x/2,y:0}));else if(g){var _="link-point-right";e.shapeMap[_]=e.addShape("circle",{attrs:A(A({},S),{x:x/2,y:0}),className:_,name:_,isAnchorPoint:!0})}if(o)!m&&m!==void 0&&(o.remove(),delete e.shapeMap["link-point-top"]),o.attr(A(A({},S),{x:0,y:-w/2}));else if(m){var T="link-point-top";e.shapeMap[T]=e.addShape("circle",{attrs:A(A({},S),{x:0,y:-w/2}),className:T,name:T,isAnchorPoint:!0})}if(s)!y&&y!==void 0?(s.remove(),delete e.shapeMap["link-point-bottom"]):s.attr(A(A({},S),{x:0,y:w/2}));else if(y){var E="link-point-bottom";e.shapeMap[E]=e.addShape("circle",{attrs:A(A({},S),{x:0,y:w/2}),className:E,name:E,isAnchorPoint:!0})}},updateShape:function(t,e,n,i,a){var o=e.get("keyShape");o.attr(A({},n)),this.updateLabel(t,e,a),i&&this.updateIcon(t,e)},updateIcon:function(t,e){var n=this,i=e.getContainer(),a=(this.mergeStyle||this.getOptions(t)).icon,o=(t.icon?t.icon:{show:void 0}).show,s=i.shapeMap[this.type+"-icon"]||i.find(function(p){return p.get("name")===n.type+"-icon"});if(s)if(o||o===void 0){var l=jt({},s.attr(),a),u=l.width,c=u===void 0?20:u,f=l.height,d=f===void 0?20:f;s.attr(A(A({},l),{x:-c/2,y:-d/2}))}else s.remove();else if(o){var c=a.width,d=a.height,h=this.type+"-icon";i.shapeMap[h]=i.addShape("image",{attrs:A(A({},a),{x:-c/2,y:-d/2}),className:h,name:h});var v=i.shapeMap["node-label"]||i.find(function(m){return m.get("name")==="node-label"});v&&v.toFront()}}},jve=A(A({},GA),Wve);Ti.registerNode("single-node",jve);var Km="edge-shape";function Yve(r){var t=r;return r==="start"?t="end":r==="end"&&(t="start"),t}var Xve={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:ir.defaultEdge.size,style:{x:0,y:0,stroke:ir.defaultEdge.style.stroke,lineAppendWidth:ir.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:ir.edgeLabel.style.fill,fontSize:ir.edgeLabel.style.fontSize,fontFamily:ir.windowFontFamily}},stateStyles:A({},ir.edgeStateStyles)},getPath:function(t){var e=[];return G(t,function(n,i){i===0?e.push(["M",n.x,n.y]):e.push(["L",n.x,n.y])}),e},getShapeStyle:function(t){var e=this.options.style,n={stroke:t.color},i=jt({},e,n,t.style),a=t.size||ir.defaultEdge.size;t=this.getPathPoints(t);var o=t.startPoint,s=t.endPoint,l=this.getControlPoints(t),u=[o];l&&(u=u.concat(l)),u.push(s);var c=this.getPath(u),f=jt({},ir.defaultEdge.style,{stroke:ir.defaultEdge.color,lineWidth:a,path:c},i);return f},updateShapeStyle:function(t,e,n){var i,a=e.getContainer(),o=((i=e.getKeyShape)===null||i===void 0?void 0:i.call(e))||a.shapeMap["edge-shape"],s=t.size;t=this.getPathPoints(t);var l=t.startPoint,u=t.endPoint,c=this.getControlPoints(t),f=[l];c&&(f=f.concat(c)),f.push(u);var d=o.attr(),h=t.style||{};h.stroke===void 0&&(h.stroke=t.color);var v=t.sourceNode,p=t.targetNode,g={radius:h.radius};c||(g={source:v,target:p,offset:h.offset,radius:h.radius});var m=this.getPath(f,g),y={};n==="move"?y={path:m}:(d.endArrow&&h.endArrow===!1&&(t.style.endArrow={path:""}),d.startArrow&&h.startArrow===!1&&(t.style.startArrow={path:""}),y=A({},t.style),y.lineWidth===void 0&&(y.lineWdith=(zt(s)?s:s==null?void 0:s[0])||d.lineWidth),y.path===void 0&&(y.path=m),y.stroke===void 0&&(y.stroke=d.stroke||t.color)),o&&o.attr(y)},getLabelStyleByPosition:function(t,e,n){var i=e.position||this.labelPosition,a={},o=n==null?void 0:n.shapeMap[Km],s;i==="start"?s=0:i==="end"?s=1:s=.5;var l=e.refX||this.refX,u=e.refY||this.refY;if(t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y)return a.x=t.startPoint.x+l,a.y=t.startPoint.y+u,a.text=t.label,a;var c;nt(e.autoRotate)?c=this.labelAutoRotate:c=e.autoRotate;var f=GT(o,s,l,u,c);return a.x=f.x,a.y=f.y,a.rotate=f.rotate,a.textAlign=this._getTextAlign(i,f.angle),a.text=t.label,a},getLabelBgStyleByPosition:function(t,e,n,i){if(!t)return{};var a=t.getBBox(),o=n.style&&n.style.background;if(!o)return{};var s=o.padding,l=a.width+s[1]+s[3],u=a.height+s[0]+s[2],c=n.position||this.labelPosition,f=A(A({},o),{width:l,height:u,x:a.minX-s[2],y:a.minY-s[0],rotate:0}),d;nt(n.autoRotate)?d=this.labelAutoRotate:d=n.autoRotate;var h=i==null?void 0:i.shapeMap[Km],v;c==="start"?v=0:c==="end"?v=1:v=.5;var p=n.refX||this.refX,g=n.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return f.x=e.startPoint.x+p-l/2,f.y=e.startPoint.y+g-u/2,f;var m=p-l/2;n.position==="start"?m=p-s[2]:n.position==="end"&&(m=p-l);var y=GT(h,v,m,g+u/2,d);return d&&(f.x=y.x,f.y=y.y),f.rotate=y.rotate,f},_getTextAlign:function(t,e){var n="center";return e?(e=e%(Math.PI*2),t!=="center"&&(e>=0&&e<=Math.PI/2||e>=3/2*Math.PI&&e<2*Math.PI?n=t:n=Yve(t)),n):t},getControlPoints:function(t){return t.controlPoints},getPathPoints:function(t){return t},drawShape:function(t,e){var n=this.getShapeStyle(t),i=e.addShape("path",{className:Km,name:Km,attrs:n});return e.shapeMap[Km]=i,i},drawLabel:function(t,e){var n=this.options.labelCfg,i=Dt({},n,t.labelCfg),a=this.getLabelStyle(t,i,e),o=a.rotate;delete a.rotate;var s=e.addShape("text",{attrs:a,name:"text-shape"});if(e.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),a.background){var l=this.drawLabelBg(t,e,s,a,o),u=this.itemType+zA;l.set("classname",u),e.shapeMap[u]=l,s.toFront()}return s},drawLabelBg:function(t,e,n,i,a){var o=this.options.labelCfg,s=Dt({},o,t.labelCfg),l=this.getLabelBgStyleByPosition(n,t,s,e);delete l.rotate;var u=e.addShape("rect",{name:"text-bg-shape",attrs:l});return e.shapeMap["text-bg-shape"]=u,isNaN(a)||u.rotateAtStart(a),u}},qve=A(A({},GA),Xve);Ti.registerEdge("single-edge",qve);Ti.registerEdge("line",{getControlPoints:function(){}},"single-edge");Ti.registerEdge("spline",{getPath:function(t){var e=nz(t);return e}},"single-edge");Ti.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint,i={x:(e.x+n.x)/2,y:(e.y+n.y)/2},a,o;if(t.controlPoints!==void 0){if(o=t.controlPoints[0],a=OT(e,o,n),e.x<=n.x&&e.y>n.y?this.clockwise=a.x>o.x?0:1:e.x<=n.x&&e.y<n.y?this.clockwise=a.x>o.x?1:0:e.x>n.x&&e.y<=n.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-e.x)/(o.y-e.y)==(n.x-e.x)/(n.y-e.y))return[]}else{t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),Qe(t.curveOffset)&&(t.curveOffset=t.curveOffset[0]),t.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:n.x-e.x,y:n.y-e.y},l=Math.atan2(s.y,s.x);o={x:t.curveOffset*Math.cos(-Math.PI/2+l)+i.x,y:t.curveOffset*Math.sin(-Math.PI/2+l)+i.y},a=OT(e,o,n)}var u=l1(e,a),c=[{x:u,y:u}];return c},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),t.length===2?e.push(["L",t[1].x,t[1].y]):e.push(["A",t[1].x,t[1].y,0,0,this.clockwise,t[2].x,t[2].y]),e}},"single-edge");Ti.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(t){var e=t.controlPoints;if(!e||!e.length){var n=t.startPoint,i=t.endPoint;t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),t.curvePosition===void 0&&(t.curvePosition=this.curvePosition),Qe(this.curveOffset)&&(t.curveOffset=t.curveOffset[0]),Qe(this.curvePosition)&&(t.curvePosition=t.curveOffset[0]);var a=$1(n,i,t.curvePosition,t.curveOffset);e=[a]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["Q",t[1].x,t[1].y,t[2].x,t[2].y]),e}},"single-edge");Ti.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(t){var e=t.controlPoints;if(t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),t.curvePosition===void 0&&(t.curvePosition=this.curvePosition),zt(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),zt(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]),!e||!e.length||e.length<2){var n=t.startPoint,i=t.endPoint,a=$1(n,i,t.curvePosition[0],t.curveOffset[0]),o=$1(n,i,t.curvePosition[1],t.curveOffset[1]);e=[a,o]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]),e}},"single-edge");Ti.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint;t.curvePosition===void 0&&(t.curvePosition=this.curvePosition),t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),t.minCurveOffset===void 0&&(t.minCurveOffset=this.minCurveOffset),zt(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),zt(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),zt(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var i=n.y-e.y,a=[0,0];t.curveOffset?a=t.curveOffset:Math.abs(i)<Math.abs(t.minCurveOffset[0])&&(a=t.minCurveOffset);var o={x:e.x,y:e.y+i*this.curvePosition[0]+a[0]},s={x:n.x,y:n.y-i*this.curvePosition[1]+a[1]};return[o,s]}},"cubic");Ti.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint;t.curvePosition===void 0&&(t.curvePosition=this.curvePosition),t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),t.minCurveOffset===void 0&&(t.minCurveOffset=this.minCurveOffset),zt(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),zt(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),zt(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var i=n.x-e.x,a=[0,0];t.curveOffset?a=t.curveOffset:Math.abs(i)<Math.abs(t.minCurveOffset[0])&&(a=t.minCurveOffset);var o={x:e.x+i*this.curvePosition[0]+a[0],y:e.y},s={x:n.x-i*this.curvePosition[1]+a[1],y:n.y},l=[o,s];return l}},"cubic");Ti.registerEdge("loop",{getPathPoints:function(t){return o5(t)},getControlPoints:function(t){return t.controlPoints},afterDraw:function(t){t.controlPoints=void 0},afterUpdate:function(t){t.controlPoints=void 0}},"cubic");var Kve={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:ir.comboLabel.refX,refY:ir.comboLabel.refY,options:{style:{stroke:ir.defaultCombo.style.stroke,fill:ir.defaultCombo.style.fill,lineWidth:ir.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ir.comboLabel.style.fill,fontSize:ir.comboLabel.style.fontSize,fontFamily:ir.windowFontFamily}},stateStyles:A({},ir.comboStateStyles)},getSize:function(t){var e=Or(t.size||this.options.size||ir.defaultCombo.size);return Qe(e)&&e.length===1&&(e=[e[0],e[0]]),Qe(e)||(e=[e,e]),e},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition,i=t.style,a=t.padding||this.options.padding;Qe(a)&&(a=a[0]);var o=e.refX,s=e.refY;nt(o)&&(o=this.refX),nt(s)&&(s=this.refY);var l=this.getSize(t),u=Math.max(i.r,l[0]/2)||l[0]/2,c=u+a,f;switch(n){case"top":f={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":f={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":f={x:-c+o,y:0,textAlign:"left"};break;case"center":f={x:0,y:0,text:t.label,textAlign:"center"};break;default:f={x:c+o,y:0,textAlign:"right"};break}return f.text=t.label,f},drawShape:function(t,e){var n=this.shapeType,i=this.getShapeStyle(t),a=e.addShape(n,{attrs:i,draggable:!0,name:"combo-shape"});return a},updateShape:function(t,e,n){var i=e.get("keyShape"),a=t.animate===void 0?this.options.animate:t.animate;a&&i.animate?i.animate(n,{duration:200,easing:"easeLinear"}):i.attr(A({},n)),this.updateLabel(t,e)}},Zve=A(A({},GA),Kve);Ti.registerCombo("single-combo",Zve);Ti.registerCombo("circle",{options:{size:[ir.defaultCombo.size[0],ir.defaultCombo.size[0]],padding:ir.defaultCombo.padding[0],animate:!0,style:{stroke:ir.defaultCombo.style.stroke,fill:ir.defaultCombo.style.fill,lineWidth:ir.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ir.comboLabel.style.fill,fontSize:ir.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:A({},ir.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(t,e){var n=this.getShapeStyle(t);delete n.height,delete n.width;var i=e.addShape("circle",{attrs:n,className:"circle-combo",name:"circle-combo",draggable:!0});return i},getShapeStyle:function(t){var e=this.options.style,n=t.padding||this.options.padding;Qe(n)&&(n=n[0]);var i={stroke:t.color},a=jt({},e,i,t.style),o;if(t.fixSize)o=zt(t.fixSize)?t.fixSize:t.fixSize[0];else{var s=this.getSize(t);!zt(a.r)||isNaN(a.r)?o=s[0]/2||ir.defaultCombo.style.r:o=Math.max(a.r,s[0]/2)||s[0]/2}a.r=o+n;var l=A({x:0,y:0},a);return t.style?t.style.r=o:t.style={r:o},l},update:function(t,e){var n=this.getSize(t),i=t.padding||this.options.padding;Qe(i)&&(i=i[0]);var a=Or(t.style),o;t.fixSize?o=zt(t.fixSize)?t.fixSize:t.fixSize[0]:o=Math.max(a.r,n[0]/2)||n[0]/2,a.r=o+i;var s=e.get("sizeCache");s&&(s.r=a.r);var l={stroke:t.color},u=e.get("keyShape"),c=jt({},u.attr(),l,a);t.style?t.style.r=o:t.style={r:o},this.updateShape(t,e,c,!0)}},"single-combo");Ti.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:ir.defaultCombo.style.stroke,fill:ir.defaultCombo.style.fill,lineWidth:ir.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ir.comboLabel.style.fill,fontSize:ir.comboLabel.style.fontSize,fontFamily:ir.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:A({},ir.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(t,e){var n=this.getShapeStyle(t),i=e.addShape("rect",{attrs:n,className:"rect-combo",name:"rect-combo",draggable:!0});return i},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition,i=t.style,a=t.padding||this.options.padding;zt(a)&&(a=[a,a,a,a]);var o=e.refX,s=e.refY;nt(o)&&(o=this.refX),nt(s)&&(s=this.refY);var l=i.width/2+a[3],u=i.height/2+a[0],c;switch(n){case"top":c={x:0-l+o,y:0-u+s,textBaseline:"top",textAlign:"left"};break;case"bottom":c={x:0,y:u+s,textBaseline:"bottom",textAlign:"center"};break;case"left":c={x:0-l+s,y:0,textAlign:"left"};break;case"center":c={x:0,y:0,text:t.label,textAlign:"center"};break;default:c={x:l+o,y:0,textAlign:"right"};break}return c.text=t.label,c},getShapeStyle:function(t){var e=this.options.style,n=t.padding||this.options.padding;zt(n)&&(n=[n,n,n,n]);var i={stroke:t.color},a=jt({},e,i,t.style),o=this.getSize(t),s,l,u=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;u?zt(u)?(s=u,l=u):(s=u[0],l=u[1]):(!zt(a.width)||isNaN(a.width)?s=o[0]||ir.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!zt(a.height)||isNaN(a.height)?l=o[1]||ir.defaultCombo.style.height:l=Math.max(a.height,o[1])||o[1]);var c=-s/2-n[3],f=-l/2-n[0];a.width=s+n[1]+n[3],a.height=l+n[0]+n[2];var d=A({x:c,y:f},a);return t.style?(t.style.width=s,t.style.height=l):t.style={width:s,height:l},d},update:function(t,e){var n=this.getSize(t),i=t.padding||this.options.padding;zt(i)&&(i=[i,i,i,i]);var a=Or(t.style),o,s,l=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;l?zt(l)?(o=l,s=l):(o=l[0],s=l[1]):(o=Math.max(a.width,n[0])||n[0],s=Math.max(a.height,n[1])||n[1]),a.width=o+i[1]+i[3],a.height=s+i[0]+i[2];var u=e.get("sizeCache");u&&(u.width=a.width,u.height=a.height),a.x=-o/2-i[3],a.y=-s/2-i[0];var c={stroke:t.color},f=e.get("keyShape"),d=jt({},f.attr(),c,a);t.style?(t.style.width=o,t.style.height=s):t.style={width:o,height:s},this.updateShape(t,e,d,!1)},updateShape:function(t,e,n){var i=e.get("keyShape"),a=t.animate===void 0?this.options.animate:t.animate;a&&i.animate?i.animate(n,{duration:200,easing:"easeLinear"}):i.attr(A({},n)),this.updateLabel(t,e)}},"single-combo");Ti.registerNode("simple-circle",{options:{size:ir.defaultNode.size,style:{x:0,y:0,stroke:ir.defaultNode.style.stroke,fill:ir.defaultNode.style.fill,lineWidth:ir.defaultNode.style.lineWidth},labelCfg:{style:{fill:ir.nodeLabel.style.fill,fontSize:ir.nodeLabel.style.fontSize,fontFamily:ir.windowFontFamily}},stateStyles:A({},ir.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(t,e){var n=this.getShapeStyle(t),i=this.type+"-keyShape",a=e.addShape("circle",{attrs:n,className:this.type+"-keyShape",name:i,draggable:!0});return e.shapeMap[i]=a,a},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},i=Dt({},e,n),a=this.getSize(t),o=a[0]/2,s=A({x:0,y:0,r:o},i);return s},update:function(t,e,n){var i=this.getSize(t),a={stroke:t.color,r:i[0]/2},o=e.get("keyShape"),s=Dt({},o.attr(),a,t.style);this.updateShape(t,e,s,!0,n)}},"single-node");Ti.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:ir.defaultNode.style.stroke,fill:ir.defaultNode.style.fill,lineWidth:ir.defaultNode.style.lineWidth},labelCfg:{style:{fill:ir.nodeLabel.style.fill,fontSize:ir.nodeLabel.style.fontSize,fontFamily:ir.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:A({},ir.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t),i=e.addShape("rect",{attrs:n,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return i},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},i=jt({},e,n),a=this.getSize(t),o=i.width||a[0],s=i.height||a[1],l=A({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(t,e,n){e.getContainer();var i=(this.mergeStyle||this.getOptions(t)).style,a=this.getSize(t),o=e.get("keyShape");t.size||(a[0]=o.attr("width")||i.width,a[1]=o.attr("height")||i.height);var s={stroke:t.color,x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]},l=jt({},i,o.attr(),s);l=jt(l,t.style),this.updateShape(t,e,l,!1,n)}},"single-node");Ti.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:ir.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(t,e){var n=this.shapeType,i=this.getShapeStyle(t);delete i.fill;var a=e.addShape(n,{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(t,a),a},drawClip:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).clipCfg;if(!!n.show){var i=n.type,a=n.x,o=n.y,s=n.style;if(i==="circle"){var l=n.r;e.setClip({type:"circle",attrs:A({r:l,x:a,y:o},s)})}else if(i==="rect"){var u=n.width,c=n.height,f=a-u/2,d=o-c/2;e.setClip({type:"rect",attrs:A({x:f,y:d,width:u,height:c},s)})}else if(i==="ellipse"){var h=n.rx,v=n.ry;e.setClip({type:"ellipse",attrs:A({x:a,y:o,rx:h,ry:v},s)})}else if(i==="polygon"){var p=n.points;e.setClip({type:"polygon",attrs:A({points:p},s)})}else if(i==="path"){var g=n.path;e.setClip({type:"path",attrs:A({path:g},s)})}}},getShapeStyle:function(t){var e=this.mergeStyle||this.getOptions(t),n=e.style,i=e.img,a=this.getSize(t),o=a[0],s=a[1];n&&(o=n.width||a[0],s=n.height||a[1]);var l=A({x:-o/2,y:-s/2,width:o,height:s,img:i},n);return l},updateShapeStyle:function(t,e){var n=e.getContainer(),i=this.itemType+"-shape",a=n.shapeMap[i]||n.find(function(s){return s.get("className")===i})||e.getKeyShape(),o=this.getShapeStyle(t);a&&!a.destroyed&&a.attr(o)}},"single-node");var Qve={triangle:function(t,e,n){t===void 0&&(t=10),e===void 0&&(e=15),n===void 0&&(n=0);var i=n*2,a="M "+i+",0 L "+(i+e)+",-"+t/2+" L "+(i+e)+","+t/2+" Z";return a},vee:function(t,e,n){t===void 0&&(t=15),e===void 0&&(e=20),n===void 0&&(n=0);var i=n*2,a="M "+i+",0 L "+(i+e)+",-"+t/2+`
        L `+(i+2*e/3)+",0 L "+(i+e)+","+t/2+" Z";return a},circle:function(t,e){t===void 0&&(t=5),e===void 0&&(e=0);var n=e*2,i="M "+n+`, 0
            a `+t+","+t+" 0 1,0 "+t*2+`,0
            a `+t+","+t+" 0 1,0 "+-t*2+",0";return i},rect:function(t,e,n){t===void 0&&(t=10),e===void 0&&(e=10),n===void 0&&(n=0);var i=n*2,a="M "+i+","+-t/2+` 
        L `+(i+e)+","+-t/2+` 
        L `+(i+e)+","+t/2+` 
        L `+i+","+t/2+" Z";return a},diamond:function(t,e,n){t===void 0&&(t=15),e===void 0&&(e=15),n===void 0&&(n=0);var i=n*2,a="M "+i+`,0 
        L `+(i+e/2)+","+-t/2+` 
        L `+(i+e)+`,0 
        L `+(i+e/2)+","+t/2+" Z";return a},triangleRect:function(t,e,n,i,a,o){t===void 0&&(t=15),e===void 0&&(e=15),n===void 0&&(n=15),i===void 0&&(i=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,l=s+e+a,u="M "+s+",0 L "+(s+e)+",-"+t/2+" L "+(s+e)+","+t/2+` Z
            M `+l+", -"+n/2+`
            L `+(l+i)+" -"+n/2+`
            L `+(l+i)+" "+n/2+`
            L `+l+" "+n/2+`
            Z`;return u}},Jve={collapse:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,n*2,0],["a",n,n,0,1,0,-n*2,0],["M",t-n+4,e],["L",t+n-4,e]]},expand:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,n*2,0],["a",n,n,0,1,0,-n*2,0],["M",t-n+4,e],["L",t-n+2*n-4,e],["M",t-n+n,e-n+4],["L",t,e+n-4]]},upTriangle:function(t,e,n){var i=n*Math.cos(Math.PI/6),a=n*Math.sin(Math.PI/6);return[["M",t-i,e+a],["L",t+i,e+a],["L",t,e-n],["Z"]]},downTriangle:function(t,e,n){var i=n*Math.cos(Math.PI/6),a=n*Math.sin(Math.PI/6);return[["M",t-i,e-a],["L",t+i,e-a],["L",t,e+n],["Z"]]}},epe=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],tpe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",defaultSubjectColors:epe}),rpe=Zn,el=A(A(A(A(A(A({},gve),zfe),Pve),Dfe),tpe),{transform:rpe,mat3:Mce}),npe=function(){function r(t){this.graph=t,this.layoutCfg=t.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return r.prototype.initLayout=function(){},r.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},r.prototype.getLayoutCfgType=function(t){var e=t.type;if(e)return e;var n=t.pipes;return Array.isArray(n)?n.map(function(i){return(i==null?void 0:i.type)||""}):null},r.prototype.isLayoutTypeSame=function(t){var e=this.getLayoutCfgType(t);return Array.isArray(this.layoutType)?this.layoutType.every(function(n,i){return n===e[i]}):(t==null?void 0:t.type)===this.layoutType},r.prototype.refreshLayout=function(){var t=this.graph;!t||(t.get("animate")?t.positionsAnimate():t.refreshPositions())},r.prototype.changeLayout=function(t){this.layoutCfg=t,this.destoryLayoutMethods(),this.layout()},r.prototype.changeData=function(){this.destoryLayoutMethods(),this.layout()},r.prototype.destoryLayoutMethods=function(){var t=this.layoutMethods;t==null||t.forEach(function(e){e.destroy()}),this.layoutMethods=[]},r.prototype.destroyLayout=function(){var t=this.graph;this.destoryLayoutMethods(),t.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},r.prototype.setDataFromGraph=function(){for(var t=[],e=[],n=[],i=[],a=[],o=[],s=[],l=this.graph.getNodes(),u=this.graph.getEdges(),c=this.graph.getCombos(),f=l.length,d=0;d<f;d++){var h=l[d];if(!(!h||h.destroyed)){var v=h.getModel();if(!h.isVisible()){e.push(v);continue}t.push(v)}}for(var p=u.length,d=0;d<p;d++){var g=u[d];if(!(!g||g.destroyed)){var v=g.getModel();if(!g.isVisible()){i.push(v);continue}v.isComboEdge?a.push(v):n.push(v)}}for(var m=c.length,d=0;d<m;d++){var y=c[d];if(!y.destroyed){var v=y.getModel();if(!y.isVisible()){i.push(v);continue}o.push(v)}}return{nodes:t,hiddenNodes:e,edges:n,hiddenEdges:i,combos:o,hiddenCombos:s,comboEdges:a}},r.prototype.reLayoutMethod=function(t,e){var n=this;return new Promise(function(i,a){var o=n.graph,s=e==null?void 0:e.type;e.onLayoutEnd=function(){o.emit("aftersublayout",{type:s}),i()},t.init(n.data),s==="force"&&(t.ticking=!1,t.forceSimulation.stop()),o.emit("beforesublayout",{type:s}),t.execute(),t.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd()})},r.prototype.relayout=function(t){var e=this,n=this,i=n.graph,a=n.layoutMethods,o=n.layoutCfg;if(t){this.data=this.setDataFromGraph();var s=this.data.nodes;if(!s)return!1;this.initPositions(o.center,s)}i.emit("beforelayout");var l=Promise.resolve();a==null||a.forEach(function(u,c){var f=o[c];l=l.then(function(){return e.reLayoutMethod(u,f)})}),l.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd()}).catch(function(u){console.warn("relayout failed",u)})},r.prototype.filterLayoutData=function(t,e){var n=t.nodes,i=t.edges,a=Ur(t,["nodes","edges"]);if(!n)return t;var o,s;Kt(e==null?void 0:e.nodesFilter)?o=e.nodesFilter:o=function(){return!0};var l=n.filter(o);if(Kt(e==null?void 0:e.edgesFilter))s=e.edgesFilter;else{var u=l.reduce(function(c,f){return c[f.id]=!0,c},{});s=function(f){return u[f.source]&&u[f.target]}}return A({nodes:l,edges:i.filter(s)},a)},r.prototype.getLayoutBBox=function(t){var e=this.graph,n=uo(e.getNodes(),function(o){return o.getModel().layoutOrder}),i=Object.values(n).map(function(o){var s=V$(o);return s.size=[s.width,s.height],s}),a=Object.values(uo(t,"layoutOrder"));return{groupNodes:a,layoutNodes:i}},r.prototype.layoutAnimate=function(){},r.prototype.moveToZero=function(){var t=this.graph,e=t.get("data"),n=e.nodes;if(!(n[0].x===void 0||n[0].x===null||L1(n[0].x))){for(var i=[0,0],a=n.length,o=0;o<a;o++){var s=n[o];i[0]+=s.x,i[1]+=s.y}i[0]/=n.length,i[1]/=n.length;for(var o=0;o<a;o++){var s=n[o];s.x-=i[0],s.y-=i[1]}}},r.prototype.initPositions=function(t,e){var n=this.graph;if(!e)return!1;var i=e?e.length:0;if(!!i){var a=n.get("width")*.85,o=n.get("height")*.85,s=Math.ceil(Math.sqrt(i)*(a/o)),l=Math.ceil(i/s),u=a/(s-1),c=o/(l-1);(!isFinite(u)||!u)&&(u=0),(!isFinite(c)||!u)&&(c=0);for(var f=t[0]-a/2,d=t[1]-o/2,h=!0,v=0;v<i;v++){var p=e[v];L1(+p.x)&&(h=!1,p.x=v%s*u+f),L1(+p.y)&&(h=!1,p.y=Math.floor(v/s)*c+d)}return h}},r.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},r}(),ipe=function(){function r(t){this.graph=t,this.destroyed=!1,this.initEvents()}return r}(),V1;(function(r){r.CLICK="click",r.DBLCLICK="dblclick",r.MOUSEDOWN="mousedown",r.MOUDEUP="mouseup",r.CONTEXTMENU="contextmenu",r.MOUSEENTER="mouseenter",r.MOUSEOUT="mouseout",r.MOUSEOVER="mouseover",r.MOUSEMOVE="mousemove",r.MOUSELEAVE="mouseleave",r.DRAGSTART="dragstart",r.DRAGEND="dragend",r.DRAG="drag",r.DRAGENTER="dragenter",r.DRAGLEAVE="dragleave",r.DRAGOVER="dragover",r.DRAGOUT="dragout",r.DDROP="drop",r.KEYUP="keyup",r.KEYDOWN="keydown",r.WHEEL="wheel",r.FOCUS="focus",r.BLUR="blur",r.TOUCHSTART="touchstart",r.TOUCHMOVE="touchmove",r.TOUCHEND="touchend",r.CANVAS_TOUCHSTART="canvas:touchstart",r.CANVAS_TOUCHMOVE="canvas:touchmove",r.CANVAS_TOUCHEND="canvas:touchend",r.NODE_TOUCHSTART="node:touchstart",r.NODE_TOUCHMOVE="node:touchmove",r.NODE_TOUCHEND="node:touchend",r.COMBO_TOUCHSTART="combo:touchstart",r.COMBO_TOUCHMOVE="combo:touchmove",r.COMBO_TOUCHEND="combo:touchend",r.EDGE_TOUCHSTART="edge:touchstart",r.EDGE_TOUCHMOVE="edge:touchmove",r.EDGE_TOUCHEND="edge:touchend",r.NODE_CONTEXTMENU="node:contextmenu",r.NODE_CLICK="node:click",r.NODE_DBLCLICK="node:dblclick",r.NODE_MOUSEDOWN="node:mousedown",r.NODE_MOUSEUP="node:mouseup",r.NODE_MOUSEENTER="node:mouseenter",r.NODE_MOUSELEAVE="node:mouseleave",r.NODE_MOUSEMOVE="node:mousemove",r.NODE_MOUSEOUT="node:mouseout",r.NODE_MOUSEOVER="node:mouseover",r.NODE_DROP="node:drop",r.NODE_DRAGOVER="node:dragover",r.NODE_DRAGENTER="node:dragenter",r.NODE_DRAGLEAVE="node:dragleave",r.NODE_DRAGSTART="node:dragstart",r.NODE_DRAG="node:drag",r.NODE_DRAGEND="node:dragend",r.NODE_TAP="node:tap",r.NODE_PANSTART="node:panstart",r.NODE_PANMOVE="node:panmove",r.NODE_PANEND="node:panend",r.COMBO_CONTEXTMENU="combo:contextmenu",r.COMBO_CLICK="combo:click",r.COMBO_DBLCLICK="combo:dblclick",r.COMBO_MOUSEDOWN="combo:mousedown",r.COMBO_MOUSEUP="combo:mouseup",r.COMBO_MOUSEENTER="combo:mouseenter",r.COMBO_MOUSELEAVE="combo:mouseleave",r.COMBO_MOUSEMOVE="combo:mousemove",r.COMBO_MOUSEOUT="combo:mouseout",r.COMBO_MOUSEOVER="combo:mouseover",r.COMBO_DROP="combo:drop",r.COMBO_DRAGOVER="combo:dragover",r.COMBO_DRAGENTER="combo:dragenter",r.COMBO_DRAGLEAVE="combo:dragleave",r.COMBO_DRAGSTART="combo:dragstart",r.COMBO_DRAG="combo:drag",r.COMBO_DRAGEND="combo:dragend",r.COMBO_TAP="combo:tap",r.COMBO_PANSTART="combo:panstart",r.COMBO_PANMOVE="combo:panmove",r.COMBO_PANEND="combo:panend",r.EDGE_CONTEXTMENU="edge:contextmenu",r.EDGE_CLICK="edge:click",r.EDGE_DBLCLICK="edge:dblclick",r.EDGE_MOUSEDOWN="edge:mousedown",r.EDGE_MOUSEUP="edge:mouseup",r.EDGE_MOUSEENTER="edge:mouseenter",r.EDGE_MOUSELEAVE="edge:mouseleave",r.EDGE_MOUSEMOVE="edge:mousemove",r.EDGE_MOUSEOUT="edge:mouseout",r.EDGE_MOUSEOVER="edge:mouseover",r.EDGE_DROP="edge:drop",r.EDGE_DRAGOVER="edge:dragover",r.EDGE_DRAGENTER="edge:dragenter",r.EDGE_DRAGLEAVE="edge:dragleave",r.CANVAS_CONTEXTMENU="canvas:contextmenu",r.CANVAS_CLICK="canvas:click",r.CANVAS_DBLCLICK="canvas:dblclick",r.CANVAS_MOUSEDOWN="canvas:mousedown",r.CANVAS_MOUSEUP="canvas:mouseup",r.CANVAS_MOUSEENTER="canvas:mouseenter",r.CANVAS_MOUSELEAVE="canvas:mouseleave",r.CANVAS_MOUSEMOVE="canvas:mousemove",r.CANVAS_MOUSEOUT="canvas:mouseout",r.CANVAS_MOUSEOVER="canvas:mouseover",r.CANVAS_DROP="canvas:drop",r.CANVAS_DRAGENTER="canvas:dragenter",r.CANVAS_DRAGLEAVE="canvas:dragleave",r.CANVAS_DRAGSTART="canvas:dragstart",r.CANVAS_DRAG="canvas:drag",r.CANVAS_DRAGEND="canvas:dragend",r.CANVAS_TAP="canvas:tap",r.CANVAS_PANSTART="canvas:panstart",r.CANVAS_PANMOVE="canvas:panmove",r.CANVAS_PANEND="canvas:panend",r.BEFORERENDER="beforerender",r.AFTERRENDER="afterrender",r.BEFOREADDITEM="beforeadditem",r.AFTERADDITEM="afteradditem",r.BEFOREREMOVEITEM="beforeremoveitem",r.AFTERREMOVEITEM="afterremoveitem",r.BEFOREUPDATEITEM="beforeupdateitem",r.AFTERUPDATEITEM="afterupdateitem",r.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",r.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",r.BEFOREITEMSTATECHANGE="beforeitemstatechange",r.AFTERITEMSTATECHANGE="afteritemstatechange",r.BEFOREITEMREFRESH="beforeitemrefresh",r.AFTERITEMREFRESH="afteritemrefresh",r.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",r.AFTERITEMSTATESCLEAR="afteritemstatesclear",r.BEFOREMODECHANGE="beforemodechange",r.AFTERMODECHANGE="aftermodechange",r.BEFORELAYOUT="beforelayout",r.AFTERLAYOUT="afterlayout",r.BEFORECREATEEDGE="beforecreateedge",r.AFTERCREATEEDGE="aftercreateedge",r.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",r.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",r.BEFOREGRAPHREFRESH="beforegraphrefresh",r.AFTERGRAPHREFRESH="aftergraphrefresh",r.BEFOREANIMATE="beforeanimate",r.AFTERANIMATE="afteranimate",r.BEFOREPAINT="beforepaint",r.AFTERPAINT="afterpaint",r.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",r.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",r.GRAPHSTATECHANGE="graphstatechange",r.AFTERACTIVATERELATIONS="afteractivaterelations",r.NODESELECTCHANGE="nodeselectchange",r.TOOLTIPCHANGE="tooltipchange",r.WHEELZOOM="wheelzoom",r.VIEWPORTCHANGE="viewportchange",r.DRAGNODEEND="dragnodeend",r.STACKCHANGE="stackchange",r.TAP="tap",r.PINCHSTART="pinchstart",r.PINCHMOVE="pinchmove",r.PANSTART="panstart",r.PANMOVE="panmove",r.PANEND="panend"})(V1||(V1={}));var Eu=Ti.registerNode,vz=Ti.registerEdge,ape=Ti.registerCombo,pz=WB.registerBehavior,Xt=ir,Lc=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function UA(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function xn(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function $r(r,t){return t={exports:{}},r(t,t.exports),t.exports}var mi=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGE=t.ALGORITHM=void 0;var e={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};t.ALGORITHM=e;var n={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};t.MESSAGE=n});xn(mi);mi.MESSAGE;mi.ALGORITHM;var Zm=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(a,o){var s=a.nodes,l=a.edges,u=[],c={};if(!s)throw new Error("invalid nodes data!");return s&&s.forEach(function(f,d){c[f.id]=d;var h=[];u.push(h)}),l&&l.forEach(function(f){var d=f.source,h=f.target,v=c[d],p=c[h];!v&&v!==0||!p&&p!==0||(u[v][p]=1,o||(u[p][v]=1))}),u},n=e;t.default=n});xn(Zm);var VA=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LinkedListNode=void 0;var e=function(s,l){return s===l},n=function(){function o(s,l){l===void 0&&(l=null),this.value=s,this.next=l}return o.prototype.toString=function(s){return s?s(this.value):"".concat(this.value)},o}();t.LinkedListNode=n;var i=function(){function o(s){s===void 0&&(s=e),this.head=null,this.tail=null,this.compare=s}return o.prototype.prepend=function(s){var l=new n(s,this.head);return this.head=l,this.tail||(this.tail=l),this},o.prototype.append=function(s){var l=new n(s);return this.head?(this.tail.next=l,this.tail=l,this):(this.head=l,this.tail=l,this)},o.prototype.delete=function(s){if(!this.head)return null;for(var l=null;this.head&&this.compare(this.head.value,s);)l=this.head,this.head=this.head.next;var u=this.head;if(u!==null)for(;u.next;)this.compare(u.next.value,s)?(l=u.next,u.next=u.next.next):u=u.next;return this.compare(this.tail.value,s)&&(this.tail=u),l},o.prototype.find=function(s){var l=s.value,u=l===void 0?void 0:l,c=s.callback,f=c===void 0?void 0:c;if(!this.head)return null;for(var d=this.head;d;){if(f&&f(d.value)||u!==void 0&&this.compare(d.value,u))return d;d=d.next}return null},o.prototype.deleteTail=function(){var s=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,s;for(var l=this.head;l.next;)l.next.next?l=l.next:l.next=null;return this.tail=l,s},o.prototype.deleteHead=function(){if(!this.head)return null;var s=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),s},o.prototype.fromArray=function(s){var l=this;return s.forEach(function(u){return l.append(u)}),this},o.prototype.toArray=function(){for(var s=[],l=this.head;l;)s.push(l),l=l.next;return s},o.prototype.reverse=function(){for(var s=this.head,l=null,u=null;s;)u=s.next,s.next=l,l=s,s=u;this.tail=this.head,this.head=l},o.prototype.toString=function(s){return s===void 0&&(s=void 0),this.toArray().map(function(l){return l.toString(s)}).toString()},o}(),a=i;t.default=a});xn(VA);VA.LinkedListNode;var gz=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(VA);function n(o){return o&&o.__esModule?o:{default:o}}var i=function(){function o(){this.linkedList=new e.default}return o.prototype.isEmpty=function(){return!this.linkedList.head},o.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},o.prototype.enqueue=function(s){this.linkedList.append(s)},o.prototype.dequeue=function(){var s=this.linkedList.deleteHead();return s?s.value:null},o.prototype.toString=function(s){return this.linkedList.toString(s)},o}(),a=i;t.default=a});xn(gz);var Ai=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueId=t.getOutEdgesNodeId=t.getNeighbors=t.getEdgesByNodeId=void 0;var e=function(s,l,u){l===void 0&&(l=[]);var c=l.filter(function(v){return v.source===s||v.target===s});if(u==="target"){var f=function(p){return p.source===s};return c.filter(f).map(function(v){return v.target})}if(u==="source"){var d=function(p){return p.target===s};return c.filter(d).map(function(v){return v.source})}var h=function(p){return p.source===s?p.target:p.source};return c.map(h)};t.getNeighbors=e;var n=function(s,l){return l.filter(function(u){return u.source===s})};t.getOutEdgesNodeId=n;var i=function(s,l){return l.filter(function(u){return u.source===s||u.target===s})};t.getEdgesByNodeId=i;var a=function(s){s===void 0&&(s=0);var l="".concat(Math.random()).split(".")[1].substr(0,5),u="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(s,"-").concat(l).concat(u)};t.uniqueId=a});xn(Ai);Ai.uniqueId;Ai.getOutEdgesNodeId;Ai.getNeighbors;Ai.getEdgesByNodeId;var mz=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(gz);function n(s){return s&&s.__esModule?s:{default:s}}function i(s){s===void 0&&(s={});var l=s,u=function(){},c=function(){var f={};return function(d){var h=d.next,v=h;return f[v]?!1:(f[v]=!0,!0)}}();return l.allowTraversal=s.allowTraversal||c,l.enter=s.enter||u,l.leave=s.leave||u,l}var a=function(l,u,c,f){f===void 0&&(f=!0);var d=i(c),h=new e.default,v=l.edges,p=v===void 0?[]:v;h.enqueue(u);for(var g="",m=function(){var b=h.dequeue();d.enter({current:b,previous:g}),(0,Ai.getNeighbors)(b,p,f?"target":void 0).forEach(function(x){d.allowTraversal({previous:g,current:b,next:x})&&h.enqueue(x)}),d.leave({current:b,previous:g}),g=b};!h.isEmpty();)m()},o=a;t.default=o});xn(mz);var Qm=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,t.detectStrongConnectComponents=t.detectConnectedComponents=void 0;var e=function(o){for(var s=o.nodes,l=s===void 0?[]:s,u=o.edges,c=u===void 0?[]:u,f=[],d={},h=[],v=function y(b){h.push(b),d[b.id]=!0;for(var x=(0,Ai.getNeighbors)(b.id,c),w=function(_){var T=x[_];if(!d[T]){var E=l.filter(function(k){return k.id===T});E.length>0&&y(E[0])}},S=0;S<x.length;++S)w(S)},p=0;p<l.length;p++){var g=l[p];if(!d[g.id]){v(g);for(var m=[];h.length>0;)m.push(h.pop());f.push(m)}}return f};t.detectConnectedComponents=e;var n=function(o){for(var s=o.nodes,l=s===void 0?[]:s,u=o.edges,c=u===void 0?[]:u,f=[],d={},h={},v={},p=[],g=0,m=function w(S){h[S.id]=g,v[S.id]=g,g+=1,f.push(S),d[S.id]=!0;for(var C=(0,Ai.getNeighbors)(S.id,c,"target").filter(function(I){return l.map(function(P){return P.id}).indexOf(I)>-1}),_=function(P){var F=C[P];if(!h[F]&&h[F]!==0){var $=l.filter(function(R){return R.id===F});$.length>0&&w($[0]),v[S.id]=Math.min(v[S.id],v[F])}else d[F]&&(v[S.id]=Math.min(v[S.id],h[F]))},T=0;T<C.length;T++)_(T);if(v[S.id]===h[S.id]){for(var E=[];f.length>0;){var k=f.pop();if(d[k.id]=!1,E.push(k),k===S)break}E.length>0&&p.push(E)}},y=0,b=l;y<b.length;y++){var x=b[y];!h[x.id]&&h[x.id]!==0&&m(x)}return p};t.detectStrongConnectComponents=n;function i(a,o){return o?n(a):e(a)}});xn(Qm);Qm.detectStrongConnectComponents;Qm.detectConnectedComponents;var Jm=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getOutDegree=t.getInDegree=t.default=void 0;var e=function(s){var l={},u=s.nodes,c=u===void 0?[]:u,f=s.edges,d=f===void 0?[]:f;return c.forEach(function(h){l[h.id]={degree:0,inDegree:0,outDegree:0}}),d.forEach(function(h){l[h.source].degree++,l[h.source].outDegree++,l[h.target].degree++,l[h.target].inDegree++}),l},n=e;t.default=n;var i=function(s,l){var u=e(s);return u[l]?e(s)[l].inDegree:0};t.getInDegree=i;var a=function(s,l){var u=e(s);return u[l]?e(s)[l].outDegree:0};t.getOutDegree=a});xn(Jm);Jm.getOutDegree;Jm.getInDegree;var HA=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;function e(a){a===void 0&&(a={});var o=a,s=function(){},l=function(){var u={};return function(c){var f=c.next;return u[f]?!1:(u[f]=!0,!0)}}();return o.allowTraversal=a.allowTraversal||l,o.enter=a.enter||s,o.leave=a.leave||s,o}function n(a,o,s,l){l.enter({current:o,previous:s});var u=a.edges,c=u===void 0?[]:u;(0,Ai.getNeighbors)(o,c,"target").forEach(function(f){l.allowTraversal({previous:s,current:o,next:f})&&n(a,f,o,l)}),l.leave({current:o,previous:s})}function i(a,o,s){n(a,o,"",e(s))}});xn(HA);var ey=$r(function(r,t){function e(h){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(p){return typeof p}:e=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},e(h)}Object.defineProperty(t,"__esModule",{value:!0}),t.detectAllUndirectedCycle=t.detectAllDirectedCycle=t.detectAllCycles=t.default=void 0;var n=s(HA),i=o(Qm);function a(h){if(typeof WeakMap!="function")return null;var v=new WeakMap,p=new WeakMap;return(a=function(m){return m?p:v})(h)}function o(h,v){if(!v&&h&&h.__esModule)return h;if(h===null||e(h)!=="object"&&typeof h!="function")return{default:h};var p=a(v);if(p&&p.has(h))return p.get(h);var g={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in h)if(y!=="default"&&Object.prototype.hasOwnProperty.call(h,y)){var b=m?Object.getOwnPropertyDescriptor(h,y):null;b&&(b.get||b.set)?Object.defineProperty(g,y,b):g[y]=h[y]}return g.default=h,p&&p.set(h,g),g}function s(h){return h&&h.__esModule?h:{default:h}}var l=function(v){var p=null,g=v.nodes,m=g===void 0?[]:g,y={},b={},x={},w={};m.forEach(function(_){b[_.id]=_});for(var S={enter:function(T){var E=T.current,k=T.previous;if(x[E]){p={};for(var I=E,P=k;P!==E;)p[I]=P,I=P,P=y[P];p[I]=P}else x[E]=E,delete b[E],y[E]=k},leave:function(T){var E=T.current;w[E]=E,delete x[E]},allowTraversal:function(T){var E=T.next;return p?!1:!w[E]}};Object.keys(b).length;){var C=Object.keys(b)[0];(0,n.default)(v,C,S)}return p},u=function(v,p,g){var m,y;g===void 0&&(g=!0);for(var b=[],x=(0,i.default)(v,!1),w=0,S=x;w<S.length;w++){var C=S[w];if(!!C.length)for(var _=C[0],T=_.id,E=[_],k=(m={},m[T]=_,m),I=(y={},y[T]=new Set,y);E.length>0;)for(var P=E.pop(),F=P.id,$=(0,Ai.getNeighbors)(F,v.edges),R=function(B){var U,W=$[B],X=v.nodes.find(function(ce){return ce.id===W});if(W===F)b.push((U={},U[W]=P,U));else if(!(W in I))k[W]=P,E.push(X),I[W]=new Set([P]);else if(!I[F].has(X)){for(var ie=!0,q=[X,P],j=k[F];I[W].size&&!I[W].has(j)&&(q.push(j),j!==k[j.id]);)j=k[j.id];if(q.push(j),p&&g?(ie=!1,q.findIndex(function(ce){return p.indexOf(ce.id)>-1})>-1&&(ie=!0)):p&&!g&&q.findIndex(function(ce){return p.indexOf(ce.id)>-1})>-1&&(ie=!1),ie){for(var fe={},se=1;se<q.length;se+=1)fe[q[se-1].id]=q[se];q.length&&(fe[q[q.length-1].id]=q[0]),b.push(fe)}I[W].add(P)}},L=0;L<$.length;L+=1)R(L)}return b};t.detectAllUndirectedCycle=u;var c=function(v,p,g){g===void 0&&(g=!0);for(var m=[],y=new Set,b=[],x=[],w={},S={},C=function(j){for(var fe=[j];fe.length>0;){var se=fe.pop();y.has(se)&&(y.delete(se),b[se.id].forEach(function(ce){fe.push(ce)}),b[se.id].clear())}},_=function q(j,fe,se){var ce=!1;if(p&&g===!1&&p.indexOf(j.id)>-1)return ce;m.push(j),y.add(j);for(var _e=se[j.id],Me=0;Me<_e.length;Me+=1){var Ye=w[_e[Me]];if(Ye===fe){for(var De={},D=1;D<m.length;D+=1)De[m[D-1].id]=m[D];m.length&&(De[m[m.length-1].id]=m[0]),x.push(De),ce=!0}else y.has(Ye)||q(Ye,fe,se)&&(ce=!0)}if(ce)C(j);else for(var Me=0;Me<_e.length;Me+=1){var Ye=w[_e[Me]];b[Ye.id].has(j)||b[Ye.id].add(j)}return m.pop(),ce},T=v.nodes,E=T===void 0?[]:T,k=0;k<E.length;k+=1){var I=E[k],P=I.id;S[P]=k,w[k]=I}if(p&&g)for(var F=function(j){var fe=p[j];S[E[j].id]=S[fe],S[fe]=0,w[0]=E.find(function(se){return se.id===fe}),w[S[E[j].id]]=E[j]},k=0;k<p.length;k++)F(k);for(var $=function(j){for(var fe,se,ce=1/0,_e=0;_e<j.length;_e+=1)for(var Me=j[_e],Ye=0;Ye<Me.length;Ye++){var De=S[Me[Ye].id];De<ce&&(ce=De,se=_e)}for(var D=j[se],z=[],_e=0;_e<D.length;_e+=1){var V=D[_e];z[V.id]=[];for(var he=0,re=(0,Ai.getNeighbors)(V.id,v.edges,"target").filter(function(We){return D.map(function(Le){return Le.id}).indexOf(We)>-1});he<re.length;he++){var pe=re[he];pe===V.id&&!(g===!1&&p.indexOf(V.id)>-1)?x.push((fe={},fe[V.id]=V,fe)):z[V.id].push(S[pe])}}return{component:D,adjList:z,minIdx:ce}},R=0;R<E.length;){var L=E.filter(function(q){return S[q.id]>=R}),O=(0,i.detectStrongConnectComponents)({nodes:L,edges:v.edges}).filter(function(q){return q.length>1});if(O.length===0)break;var B=$(O),U=B.minIdx,W=B.adjList,X=B.component;if(X.length>1){X.forEach(function(q){b[q.id]=new Set});var ie=w[U];if(p&&g&&p.indexOf(ie.id)===-1)return x;_(ie,ie,W),R=U+1}else break}return x};t.detectAllDirectedCycle=c;var f=function(v,p,g,m){return m===void 0&&(m=!0),p?c(v,g,m):u(v,g,m)};t.detectAllCycles=f;var d=l;t.default=d});xn(ey);ey.detectAllUndirectedCycle;ey.detectAllDirectedCycle;ey.detectAllCycles;var H1=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(s,l,u){for(var c=1/0,f,d=0;d<l.length;d++){var h=l[d].id;!u[h]&&s[h]<=c&&(c=s[h],f=l[d])}return f},n=function(s,l,u,c){var f=s.nodes,d=f===void 0?[]:f,h=s.edges,v=h===void 0?[]:h,p={},g={},m={};d.forEach(function(_,T){var E=_.id;g[E]=1/0,E===l&&(g[E]=0)});for(var y=d.length,b=function(T){var E=e(g,d,p),k=E.id;if(p[k]=!0,g[k]===1/0)return"continue";var I=[];u?I=(0,Ai.getOutEdgesNodeId)(k,v):I=(0,Ai.getEdgesByNodeId)(k,v),I.forEach(function(P){var F=P.target,$=P.source,R=F===k?$:F,L=c&&P[c]?P[c]:1;g[R]>g[E.id]+L?(g[R]=g[E.id]+L,m[R]=[E.id]):g[R]===g[E.id]+L&&m[R].push(E.id)})},x=0;x<y;x++)b();m[l]=[l];var w={};for(var S in g)g[S]!==1/0&&a(l,S,m,w);var C={};for(var S in w)C[S]=w[S][0];return{length:g,path:C,allPath:w}},i=n;t.default=i;function a(o,s,l,u){if(o===s)return[o];if(u[s])return u[s];for(var c=[],f=0,d=l[s];f<d.length;f++){var h=d[f],v=a(o,h,l,u);if(!v)return;for(var p=0,g=v;p<g.length;p++){var m=g[p];(0,mm.isArray)(m)?c.push((0,Bx.__spreadArray)((0,Bx.__spreadArray)([],m,!0),[s],!1)):c.push([m,s])}}return u[s]=c,u[s]}});xn(H1);var ty=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.findShortestPath=t.findAllPath=void 0;var e=n(H1);function n(o){return o&&o.__esModule?o:{default:o}}var i=function(s,l,u,c,f){var d=(0,e.default)(s,l,c,f),h=d.length,v=d.path,p=d.allPath;return{length:h[u],path:v[u],allPath:p[u]}};t.findShortestPath=i;var a=function(s,l,u,c){var f;if(l===u)return[[l]];var d=s.edges,h=d===void 0?[]:d,v=[l],p=(f={},f[l]=!0,f),g=[],m=[],y=c?(0,Ai.getNeighbors)(l,h,"target"):(0,Ai.getNeighbors)(l,h);for(g.push(y);v.length>0&&g.length>0;){var b=g[g.length-1];if(b.length){var x=b.shift();x&&(v.push(x),p[x]=!0,y=c?(0,Ai.getNeighbors)(x,h,"target"):(0,Ai.getNeighbors)(x,h),g.push(y.filter(function(C){return!p[C]})))}else{var w=v.pop();p[w]=!1,g.pop();continue}if(v[v.length-1]===u){var S=v.map(function(_){return _});m.push(S);var w=v.pop();p[w]=!1,g.pop()}}return m};t.findAllPath=a});xn(ty);ty.findShortestPath;ty.findAllPath;var WA=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(Zm);function n(o){return o&&o.__esModule?o:{default:o}}var i=function(s,l){for(var u=(0,e.default)(s,l),c=[],f=u.length,d=0;d<f;d+=1){c[d]=[];for(var h=0;h<f;h+=1)d===h?c[d][h]=0:u[d][h]===0||!u[d][h]?c[d][h]=1/0:c[d][h]=u[d][h]}for(var v=0;v<f;v+=1)for(var d=0;d<f;d+=1)for(var h=0;h<f;h+=1)c[d][h]>c[d][v]+c[v][h]&&(c[d][h]=c[d][v]+c[v][h]);return c},a=i;t.default=a});xn(WA);var yz=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(Zm);function n(o){return o&&o.__esModule?o:{default:o}}var i=function(s,l,u,c){l===void 0&&(l=!1),u===void 0&&(u="weight"),c===void 0&&(c=1e3);var f=s.nodes,d=f===void 0?[]:f,h=s.edges,v=h===void 0?[]:h,p={},g={};d.forEach(function(T,E){var k=(0,Ai.uniqueId)();T.clusterId=k,p[k]={id:k,nodes:[T]},g[T.id]={node:T,idx:E}});var m=(0,e.default)(s,l),y={};m.forEach(function(T,E){var k=d[E].id;y[k]={},T.forEach(function(I,P){if(!!I){var F=d[P].id;y[k][F]=I}})});for(var b=0,x=function(){var E=!1;if(d.forEach(function(k){var I={};Object.keys(y[k.id]).forEach(function(U){var W=y[k.id][U],X=g[U].node,ie=X.clusterId;I[ie]||(I[ie]=0),I[ie]+=W});var P=-1/0,F=[];if(Object.keys(I).forEach(function(U){P<I[U]?(P=I[U],F=[U]):P===I[U]&&F.push(U)}),!(F.length===1&&F[0]===k.clusterId)){var $=F.indexOf(k.clusterId);if($>=0&&F.splice($,1),F&&F.length){E=!0;var R=p[k.clusterId],L=R.nodes.indexOf(k);R.nodes.splice(L,1);var O=Math.floor(Math.random()*F.length),B=p[F[O]];B.nodes.push(k),k.clusterId=B.id}}}),!E)return"break";b++};b<c;){var w=x();if(w==="break")break}Object.keys(p).forEach(function(T){var E=p[T];(!E.nodes||!E.nodes.length)&&delete p[T]});var S=[],C={};v.forEach(function(T){var E=T.source,k=T.target,I=T[u]||1,P=g[E].node.clusterId,F=g[k].node.clusterId,$="".concat(P,"---").concat(F);if(C[$])C[$].weight+=I,C[$].count++;else{var R={source:P,target:F,weight:I,count:1};C[$]=R,S.push(R)}});var _=[];return Object.keys(p).forEach(function(T){_.push(p[T])}),{clusters:_,clusterEdges:S}},a=i;t.default=a});xn(yz);var bz=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(){function i(a){this.arr=a}return i.prototype.add=function(a){var o,s=a.arr;if(!((o=this.arr)===null||o===void 0?void 0:o.length))return new i(s);if(!(s==null?void 0:s.length))return new i(this.arr);if(this.arr.length===s.length){var l=[];for(var u in this.arr)l[u]=this.arr[u]+s[u];return new i(l)}},i.prototype.subtract=function(a){var o,s=a.arr;if(!((o=this.arr)===null||o===void 0?void 0:o.length))return new i(s);if(!(s==null?void 0:s.length))return new i(this.arr);if(this.arr.length===s.length){var l=[];for(var u in this.arr)l[u]=this.arr[u]-s[u];return new i(l)}},i.prototype.avg=function(a){var o=[];for(var s in this.arr)o[s]=this.arr[s]/a;return new i(o)},i.prototype.negate=function(){var a=[];for(var o in this.arr)a[o]=-this.arr[o];return new i(a)},i.prototype.squareEuclideanDistance=function(a){var o,s=a.arr;if(!((o=this.arr)===null||o===void 0?void 0:o.length)||!(s==null?void 0:s.length))return 0;if(this.arr.length===s.length){var l=0;for(var u in this.arr)l+=Math.pow(this.arr[u]-a.arr[u],2);return l}},i.prototype.normalize=function(){var a=[],o=(0,mm.clone)(this.arr);o.sort(function(c,f){return c-f});var s=o[o.length-1],l=o[0];for(var u in this.arr)a[u]=(this.arr[u]-l)/(s-l);return new i(a)},i}(),n=e;t.default=n});xn(bz);var gd=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.secondReg=t.dateReg=void 0;var e=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;t.secondReg=e;var n=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;t.dateReg=n});xn(gd);gd.secondReg;gd.dateReg;var xz=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(Zm),n=i(bz);function i(d){return d&&d.__esModule?d:{default:d}}var a=function(h,v,p,g){for(var m=v.length,y=2*g,b=0,x=0;x<m;x++)for(var w=h[x].clusterId,S=0;S<m;S++){var C=h[S].clusterId;if(w===C){var _=v[x][S]||0,T=p[x]||0,E=p[S]||0;b+=_-T*E/y}}return b*=1/y,b},o=function(h){h===void 0&&(h=[]);var v={};h.forEach(function(g){Object.keys(g.properties).forEach(function(m){if(!"".concat(g.properties[m]).match(gd.secondReg)&&!"".concat(g.properties[m]).match(gd.dateReg)&&isNaN(Number(g.properties[m]))||m==="id"){v.hasOwnProperty(m)&&delete v[m];return}v.hasOwnProperty(m)?v[m]+=1:v[m]=1})});var p=Object.keys(v).sort(function(g,m){return v[m]-v[g]});return p.length<100?p:p.slice(0,100)},s=function(h,v){return v.map(function(p){if(h.hasOwnProperty(p)){if(!isNaN(Number(h[p])))return Number(h[p]);if(h[p].match(gd.secondReg)||h[p].match(gd.dateReg))return Number(Date.parse(new Date(h[p])))/1e3}return 0})},l=function(h,v){for(var p=[],g=0;g<v.length;g++)p[g]=s(v[g].properties,h);return p},u=function(h,v){h===void 0&&(h=[]);for(var p=h.length,g=new n.default([]),m=0;m<p;m++)g=g.add(new n.default(v[m]));var y=g.avg(p);y.normalize();for(var b=0,m=0;m<p;m++){var x=new n.default(v[m]),w=x.squareEuclideanDistance(y);b+=w}var S=[];h.forEach(function(){S.push([])});for(var m=0;m<p;m++){var x=new n.default(v[m]);h[m].clusterInertial=0;for(var C=0;C<p;C++){if(m===C){S[m][C]=0;continue}var _=new n.default(v[C]);S[m][C]=x.squareEuclideanDistance(_),h[m].clusterInertial+=S[m][C]}}for(var T=0,E=2*p*b,m=0;m<p;m++)for(var k=h[m].clusterId,C=0;C<p;C++){var I=h[C].clusterId;if(!(m===C||k!==I)){var P=h[m].clusterInertial*h[C].clusterInertial/Math.pow(E,2)-S[m][C]/E;T+=P}}return Number(T.toFixed(4))},c=function(h,v,p,g,m,y){v===void 0&&(v=!1),p===void 0&&(p="weight"),g===void 0&&(g=1e-4),m===void 0&&(m=!1),y===void 0&&(y=1);var b=h.nodes,x=b===void 0?[]:b,w=h.edges,S=w===void 0?[]:w,C=[];if(m){x.forEach(function(ce,_e){ce.properties=ce.properties||{},ce.originIndex=_e});var _=[];x.every(function(ce){return ce.hasOwnProperty("nodeType")})&&(_=Array.from(new Set(x.map(function(ce){return ce.nodeType}))),x.forEach(function(ce){ce.properties.nodeType=_.findIndex(function(_e){return _e===ce.nodeType})}));var T=o(x);C=l(T,x)}var E=1,k={},I={};x.forEach(function(ce,_e){var Me=String(E++);ce.clusterId=Me,k[Me]={id:Me,nodes:[ce]},I[ce.id]={node:ce,idx:_e}});var P=(0,e.default)(h,v),F=[],$={},R=0;P.forEach(function(ce,_e){var Me=0,Ye=x[_e].id;$[Ye]={},ce.forEach(function(De,D){if(!!De){Me+=De;var z=x[D].id;$[Ye][z]=De,R+=De}}),F.push(Me)}),R/=2;for(var L=1/0,O=1/0,B=0,U=[],W={};;){m&&x.every(function(ce){return ce.hasOwnProperty("properties")})?L=a(x,P,F,R)+u(x,C)*y:L=a(x,P,F,R),B===0&&(O=L,U=x,W=k);var X=L>0&&L>O&&L-O<g;if(L>O&&(U=x.map(function(ce){return{node:ce,clusterId:ce.clusterId}}),W=(0,mm.clone)(k),O=L),X||B>100)break;B++,Object.keys(k).forEach(function(ce){var _e=0;S.forEach(function(Me){var Ye=Me.source,De=Me.target,D=I[Ye].node.clusterId,z=I[De].node.clusterId;(D===ce&&z!==ce||z===ce&&D!==ce)&&(_e=_e+(Me[p]||1))}),k[ce].sumTot=_e}),x.forEach(function(ce,_e){var Me=k[ce.clusterId],Ye=0,De,D=F[_e]/(2*R),z=0,V=Me.nodes;V.forEach(function(K){var ee=I[K.id].idx;z+=P[_e][ee]||0});var he=z-Me.sumTot*D,re=V.filter(function(K){return K.id!==ce.id}),pe=[];re.forEach(function(K,ee){pe[ee]=C[K.originIndex]});var Je=u(re,C)*y,We=$[ce.id];if(Object.keys(We).forEach(function(K){var ee=I[K].node,J=ee.clusterId;if(J!==ce.clusterId){var ge=k[J],Ve=ge.nodes;if(!(!Ve||!Ve.length)){var Ge=0;Ve.forEach(function(kt){var Ae=I[kt.id].idx;Ge+=P[_e][Ae]||0});var rt=Ge-ge.sumTot*D,Se=Ve.concat([ce]),ye=[];Se.forEach(function(kt,Ae){ye[Ae]=C[kt.originIndex]});var Re=u(Se,C)*y,St=rt-he;m&&(St=rt+Re-(he+Je)),St>Ye&&(Ye=St,De=ge)}}}),Ye>0){De.nodes.push(ce);var Le=ce.clusterId;ce.clusterId=De.id;var $e=Me.nodes.indexOf(ce);Me.nodes.splice($e,1);var H=0,Y=0;S.forEach(function(K){var ee=K.source,J=K.target,ge=I[ee].node.clusterId,Ve=I[J].node.clusterId;(ge===De.id&&Ve!==De.id||Ve===De.id&&ge!==De.id)&&(H=H+(K[p]||1)),(ge===Le&&Ve!==Le||Ve===Le&&ge!==Le)&&(Y=Y+(K[p]||1))}),De.sumTot=H,Me.sumTot=Y}})}var ie={},q=0;Object.keys(W).forEach(function(ce){var _e=W[ce];if(!_e.nodes||!_e.nodes.length){delete W[ce];return}var Me=String(q+1);Me!==ce&&(_e.id=Me,_e.nodes=_e.nodes.map(function(Ye){return{id:Ye.id,clusterId:Me}}),W[Me]=_e,ie[ce]=Me,delete W[ce],q++)}),U.forEach(function(ce){var _e=ce.node,Me=ce.clusterId;_e.clusterId=Me,_e.clusterId&&ie[_e.clusterId]&&(_e.clusterId=ie[_e.clusterId])});var j=[],fe={};S.forEach(function(ce){var _e=ce.source,Me=ce.target,Ye=ce[p]||1,De=I[_e].node.clusterId,D=I[Me].node.clusterId,z="".concat(De,"---").concat(D);if(fe[z])fe[z].weight+=Ye,fe[z].count++;else{var V={source:De,target:D,weight:Ye,count:1};fe[z]=V,j.push(V)}});var se=[];return Object.keys(W).forEach(function(ce){se.push(W[ce])}),{clusters:se,clusterEdges:j}},f=c;t.default=f});xn(xz);var wz=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(){function i(a){this.count=a.length,this.parent={};for(var o=0,s=a;o<s.length;o++){var l=s[o];this.parent[l]=l}}return i.prototype.find=function(a){for(;this.parent[a]!==a;)a=this.parent[a];return a},i.prototype.union=function(a,o){var s=this.find(a),l=this.find(o);s!==l&&(s<l?(this.parent[o]!==o&&this.union(this.parent[o],a),this.parent[o]=this.parent[a]):(this.parent[a]!==a&&this.union(this.parent[a],o),this.parent[a]=this.parent[o]))},i.prototype.connected=function(a,o){return this.find(a)===this.find(o)},i}(),n=e;t.default=n});xn(wz);var Sz=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(o,s){return o-s},n=function(){function a(o){o===void 0&&(o=e),this.compareFn=o,this.list=[]}return a.prototype.getLeft=function(o){return 2*o+1},a.prototype.getRight=function(o){return 2*o+2},a.prototype.getParent=function(o){return o===0?null:Math.floor((o-1)/2)},a.prototype.isEmpty=function(){return this.list.length<=0},a.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},a.prototype.delMin=function(){var o=this.top(),s=this.list.pop();return this.list.length>0&&(this.list[0]=s,this.moveDown(0)),o},a.prototype.insert=function(o){if(o!==null){this.list.push(o);var s=this.list.length-1;return this.moveUp(s),!0}return!1},a.prototype.moveUp=function(o){for(var s=this.getParent(o);o&&o>0&&this.compareFn(this.list[s],this.list[o])>0;){var l=this.list[s];this.list[s]=this.list[o],this.list[o]=l,o=s,s=this.getParent(o)}},a.prototype.moveDown=function(o){var s,l=o,u=this.getLeft(o),c=this.getRight(o),f=this.list.length;u!==null&&u<f&&this.compareFn(this.list[l],this.list[u])>0?l=u:c!==null&&c<f&&this.compareFn(this.list[l],this.list[c])>0&&(l=c),o!==l&&(s=[this.list[l],this.list[o]],this.list[o]=s[0],this.list[l]=s[1],this.moveDown(l))},a}(),i=n;t.default=i});xn(Sz);var Cz=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(wz),n=i(Sz);function i(u){return u&&u.__esModule?u:{default:u}}var a=function(c,f){var d=[],h=c.nodes,v=h===void 0?[]:h,p=c.edges,g=p===void 0?[]:p;if(v.length===0)return d;var m=v[0],y=new Set;y.add(m);var b=function(T,E){return f?T.weight-E.weight:0},x=new n.default(b);for((0,Ai.getEdgesByNodeId)(m.id,g).forEach(function(_){x.insert(_)});!x.isEmpty();){var w=x.delMin(),S=w.source,C=w.target;y.has(S)&&y.has(C)||(d.push(w),y.has(S)||(y.add(S),(0,Ai.getEdgesByNodeId)(S,g).forEach(function(_){x.insert(_)})),y.has(C)||(y.add(C),(0,Ai.getEdgesByNodeId)(C,g).forEach(function(_){x.insert(_)})))}return d},o=function(c,f){var d=[],h=c.nodes,v=h===void 0?[]:h,p=c.edges,g=p===void 0?[]:p;if(v.length===0)return d;var m=g.map(function(S){return S});f&&m.sort(function(S,C){return S.weight-C.weight});for(var y=new e.default(v.map(function(S){return S.id}));m.length>0;){var b=m.shift(),x=b.source,w=b.target;y.connected(x,w)||(d.push(b),y.union(x,w))}return d},s=function(c,f,d){var h={prim:a,kruskal:o};return d?h[d](c,f):o(c,f)},l=s;t.default=l});xn(Cz);var Ez=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(Jm);function n(o){return o&&o.__esModule?o:{default:o}}var i=function(s,l,u){typeof l!="number"&&(l=1e-6),typeof u!="number"&&(u=.85);for(var c=1,f=0,d=1e3,h=s.nodes,v=h===void 0?[]:h,p=s.edges,g=p===void 0?[]:p,m=v.length,y,b={},x={},w=0;w<m;++w){var S=v[w],C=S.id;b[C]=1/m,x[C]=1/m}for(var _=(0,e.default)(s);d>0&&c>l;){f=0;for(var w=0;w<m;++w){var S=v[w],C=S.id;if(y=0,_[S.id].inDegree===0)b[C]=0;else{for(var T=(0,Ai.getNeighbors)(C,g,"source"),E=0;E<T.length;++E){var k=T[E],I=_[k].outDegree;I>0&&(y+=x[k]/I)}b[C]=u*y,f+=b[C]}}f=(1-f)/m,c=0;for(var w=0;w<m;++w){var S=v[w],C=S.id;y=b[C]+f,c+=Math.abs(y-x[C]),x[C]=y}d-=1}return x},a=i;t.default=a});xn(Ez);var ki=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.VACANT_NODE_LABEL=t.VACANT_NODE_ID=t.VACANT_GRAPH_ID=t.VACANT_EDGE_LABEL=t.VACANT_EDGE_ID=t.Node=t.Graph=t.Edge=t.AUTO_EDGE_ID=void 0;var e=-1;t.VACANT_EDGE_ID=e;var n=-1;t.VACANT_NODE_ID=n;var i="-1";t.VACANT_EDGE_LABEL=i;var a="-1";t.VACANT_NODE_LABEL=a;var o=-1;t.VACANT_GRAPH_ID=o;var s="-1";t.AUTO_EDGE_ID=s;var l=function(){function f(d,h,v,p){d===void 0&&(d=e),h===void 0&&(h=n),v===void 0&&(v=n),p===void 0&&(p=i),this.id=d,this.from=h,this.to=v,this.label=p}return f}();t.Edge=l;var u=function(){function f(d,h){d===void 0&&(d=n),h===void 0&&(h=a),this.id=d,this.label=h,this.edges=[],this.edgeMap={}}return f.prototype.addEdge=function(d){this.edges.push(d),this.edgeMap[d.id]=d},f}();t.Node=u;var c=function(){function f(d,h,v){d===void 0&&(d=n),h===void 0&&(h=!0),v===void 0&&(v=!1),this.id=d,this.edgeIdAutoIncrease=h,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=v}return f.prototype.getNodeNum=function(){return this.nodes.length},f.prototype.addNode=function(d,h){if(!this.nodeMap[d]){var v=new u(d,h);this.nodes.push(v),this.nodeMap[d]=v,this.nodeLabelMap[h]||(this.nodeLabelMap[h]=[]),this.nodeLabelMap[h].push(d)}},f.prototype.addEdge=function(d,h,v,p){if((this.edgeIdAutoIncrease||d===void 0)&&(d=this.counter++),!(this.nodeMap[h]&&this.nodeMap[v]&&this.nodeMap[v].edgeMap[d])){var g=new l(d,h,v,p);if(this.edges.push(g),this.edgeMap[d]=g,this.nodeMap[h].addEdge(g),this.edgeLabelMap[p]||(this.edgeLabelMap[p]=[]),this.edgeLabelMap[p].push(g),!this.directed){var m=new l(d,v,h,p);this.nodeMap[v].addEdge(m),this.edgeLabelMap[p].push(m)}}},f}();t.Graph=c});xn(ki);ki.VACANT_NODE_LABEL;ki.VACANT_NODE_ID;ki.VACANT_GRAPH_ID;ki.VACANT_EDGE_LABEL;ki.VACANT_EDGE_ID;ki.Node;ki.Graph;ki.Edge;ki.AUTO_EDGE_ID;var _z=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(){function f(d,h,v,p,g){this.fromNode=d,this.toNode=h,this.nodeEdgeNodeLabel={nodeLabel1:v||ki.VACANT_NODE_LABEL,edgeLabel:p||ki.VACANT_EDGE_LABEL,nodeLabel2:g||ki.VACANT_NODE_LABEL}}return f.prototype.equalTo=function(d){return this.fromNode===d.formNode&&this.toNode===d.toNode&&this.nodeEdgeNodeLabel===d.nodeEdgeNodeLabel},f.prototype.notEqualTo=function(d){return!this.equalTo(d)},f}(),n=function(){function f(){this.rmpath=[],this.dfsEdgeList=[]}return f.prototype.equalTo=function(d){var h=this.dfsEdgeList.length,v=d.length;if(h!==v)return!1;for(var p=0;p<h;p++)if(this.dfsEdgeList[p]!==d[p])return!1;return!0},f.prototype.notEqualTo=function(d){return!this.equalTo(d)},f.prototype.pushBack=function(d,h,v,p,g){return this.dfsEdgeList.push(new e(d,h,v,p,g)),this.dfsEdgeList},f.prototype.toGraph=function(d,h){d===void 0&&(d=ki.VACANT_GRAPH_ID),h===void 0&&(h=!1);var v=new ki.Graph(d,!0,h);return this.dfsEdgeList.forEach(function(p){var g=p.fromNode,m=p.toNode,y=p.nodeEdgeNodeLabel,b=y.nodeLabel1,x=y.edgeLabel,w=y.nodeLabel2;b!==ki.VACANT_NODE_LABEL&&v.addNode(g,b),w!==ki.VACANT_NODE_LABEL&&v.addNode(m,w),b!==ki.VACANT_NODE_LABEL&&w!==b&&v.addEdge(void 0,g,m,x)}),v},f.prototype.buildRmpath=function(){this.rmpath=[];for(var d=void 0,h=this.dfsEdgeList.length,v=h-1;v>=0;v--){var p=this.dfsEdgeList[v],g=p.fromNode,m=p.toNode;g<m&&(d===void 0||m===d)&&(this.rmpath.push(v),d=g)}return this.rmpath},f.prototype.getNodeNum=function(){var d={};return this.dfsEdgeList.forEach(function(h){d[h.fromNode]||(d[h.fromNode]=!0),d[h.toNode]||(d[h.toNode]=!0)}),Object.keys(d).length},f}(),i=function(){function f(d){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!d){for(;d;){var h=d.edge;this.edges.push(h),this.nodesUsed[h.from]=1,this.nodesUsed[h.to]=1,this.edgesUsed[h.id]=1,d=d.preNode}this.edges=this.edges.reverse()}}return f.prototype.hasNode=function(d){return this.nodesUsed[d.id]===1},f.prototype.hasEdge=function(d){return this.edgesUsed[d.id]===1},f}(),a=function(){function f(d){var h=d.graphs,v=d.minSupport,p=v===void 0?2:v,g=d.minNodeNum,m=g===void 0?1:g,y=d.maxNodeNum,b=y===void 0?4:y,x=d.top,w=x===void 0?10:x,S=d.directed,C=S===void 0?!1:S,_=d.verbose,T=_===void 0?!1:_;this.graphs=h,this.dfsCode=new n,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=p,this.top=w,this.directed=C,this.counter=0,this.maxNodeNum=b,this.minNodeNum=m,this.verbose=T,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return f.prototype.findForwardRootEdges=function(d,h){var v=this,p=[],g=d.nodeMap;return h.edges.forEach(function(m){(v.directed||h.label<=g[m.to].label)&&p.push(m)}),p},f.prototype.findBackwardEdge=function(d,h,v,p){if(!this.directed&&h===v)return null;for(var g=d.nodeMap,m=g[v.to],y=m.edges,b=y.length,x=0;x<b;x++){var w=y[x];if(!(p.hasEdge(w)||w.to!==h.from)){if(this.directed){if(g[h.from].label<g[v.to].label||g[h.from].label===g[v.to].label&&h.label<=w.label)return w}else if(h.label<w.label||h.label===w.label&&g[h.to].label<=g[v.to].label)return w}}return null},f.prototype.findForwardPureEdges=function(d,h,v,p){for(var g=[],m=h.to,y=d.nodeMap[m].edges,b=y.length,x=0;x<b;x++){var w=y[x],S=d.nodeMap[w.to];v<=S.label&&!p.hasNode(S)&&g.push(w)}return g},f.prototype.findForwardRmpathEdges=function(d,h,v,p){for(var g=[],m=d.nodeMap,y=m[h.to].label,b=m[h.from],x=b.edges,w=x.length,S=0;S<w;S++){var C=x[S],_=m[C.to].label;h.to===C.to||v>_||p.hasNode(m[C.to])||(h.label<C.label||h.label===C.label&&y<=_)&&g.push(C)}return g},f.prototype.getSupport=function(d){var h={};return d.forEach(function(v){h[v.graphId]||(h[v.graphId]=!0)}),Object.keys(h).length},f.prototype.findMinLabel=function(d){var h=void 0;return Object.keys(d).forEach(function(v){var p=d[v],g=p.nodeLabel1,m=p.edgeLabel,y=p.nodeLabel2;if(!h){h={nodeLabel1:g,edgeLabel:m,nodeLabel2:y};return}(g<h.nodeLabel1||g===h.nodeLabel1&&m<h.edgeLabel||g===h.nodeLabel1&&m===h.edgeLabel&&y<h.nodeLabel2)&&(h={nodeLabel1:g,edgeLabel:m,nodeLabel2:y})}),h},f.prototype.isMin=function(){var d=this,h=this.dfsCode;if(this.verbose&&console.log("isMin checking",h),h.dfsEdgeList.length===1)return!0;var v=this.directed,p=h.toGraph(ki.VACANT_GRAPH_ID,v),g=p.nodeMap,m=new n,y={};p.nodes.forEach(function(S){var C=d.findForwardRootEdges(p,S);C.forEach(function(_){var T=g[_.to],E="".concat(S.label,"-").concat(_.label,"-").concat(T.label);y[E]||(y[E]={projected:[],nodeLabel1:S.label,edgeLabel:_.label,nodeLabel2:T.label});var k={graphId:p.id,edge:_,preNode:null};y[E].projected.push(k)})});var b=this.findMinLabel(y);if(!!b){m.dfsEdgeList.push(new e(0,1,b.nodeLabel1,b.edgeLabel,b.nodeLabel2));var x=function S(C){for(var _=m.buildRmpath(),T=m.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,E=m.dfsEdgeList[_[0]].toNode,k={},I=!1,P=0,F=v?-1:0,$=function(ce){if(I)return"break";C.forEach(function(_e){var Me=new i(_e),Ye=d.findBackwardEdge(p,Me.edges[_[ce]],Me.edges[_[0]],Me);Ye&&(k[Ye.label]||(k[Ye.label]={projected:[],edgeLabel:Ye.label}),k[Ye.label].projected.push({graphId:p.id,edge:k,preNode:_e}),P=m.dfsEdgeList[_[ce]].fromNode,I=!0)})},R=_.length-1;R>F;R--){var L=$(R);if(L==="break")break}if(I){var O=d.findMinLabel(k);m.dfsEdgeList.push(new e(E,P,ki.VACANT_NODE_LABEL,O.edgeLabel,ki.VACANT_NODE_LABEL));var B=m.dfsEdgeList.length-1;return d.dfsCode.dfsEdgeList[B]!==m.dfsEdgeList[B]?!1:S(k[O.edgeLabel].projected)}var U={};I=!1;var W=0;C.forEach(function(se){var ce=new i(se),_e=d.findForwardPureEdges(p,ce.edges[_[0]],T,ce);_e.length>0&&(I=!0,W=E,_e.forEach(function(Me){var Ye="".concat(Me.label,"-").concat(g[Me.to].label);U[Ye]||(U[Ye]={projected:[],edgeLabel:Me.label,nodeLabel2:g[Me.to].label}),U[Ye].projected.push({graphId:p.id,edge:Me,preNode:se})}))});for(var X=_.length,ie=function(ce){if(I)return"break";var _e=_[ce];C.forEach(function(Me){var Ye=new i(Me),De=d.findForwardRmpathEdges(p,Ye.edges[_e],T,Ye);De.length>0&&(I=!0,W=m.dfsEdgeList[_e].fromNode,De.forEach(function(D){var z="".concat(D.label,"-").concat(g[D.to].label);U[z]||(U[z]={projected:[],edgeLabel:D.label,nodeLabel2:g[D.to].label}),U[z].projected.push({graphId:p.id,edge:D,preNode:Me})}))})},R=0;R<X;R++){var q=ie(R);if(q==="break")break}if(!I)return!0;var j=d.findMinLabel(U);m.dfsEdgeList.push(new e(W,E+1,ki.VACANT_NODE_LABEL,j.edgeLabel,j.nodeLabel2));var fe=m.dfsEdgeList.length-1;return h.dfsEdgeList[fe]!==m.dfsEdgeList[fe]?!1:S(U["".concat(j.edgeLabel,"-").concat(j.nodeLabel2)].projected)},w="".concat(b.nodeLabel1,"-").concat(b.edgeLabel,"-").concat(b.nodeLabel2);return x(y[w].projected)}},f.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var d=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,mm.clone)(d))}},f.prototype.subGraphMining=function(d){var h=this,v=this.getSupport(d);if(!(v<this.minSupport)&&!!this.isMin()){this.report();var p=this.dfsCode.getNodeNum(),g=this.dfsCode.buildRmpath(),m=this.dfsCode.dfsEdgeList[g[0]].toNode,y=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,b={},x={};d.forEach(function(w){for(var S=h.graphs[w.graphId],C=S.nodeMap,_=new i(w),T=g.length-1;T>=0;T--){var E=h.findBackwardEdge(S,_.edges[g[T]],_.edges[g[0]],_);if(E){var k="".concat(h.dfsCode.dfsEdgeList[g[T]].fromNode,"-").concat(E.label);x[k]||(x[k]={projected:[],toNodeId:h.dfsCode.dfsEdgeList[g[T]].fromNode,edgeLabel:E.label}),x[k].projected.push({graphId:w.graphId,edge:E,preNode:w})}}if(!(p>=h.maxNodeNum)){var I=h.findForwardPureEdges(S,_.edges[g[0]],y,_);I.forEach(function(F){var $="".concat(m,"-").concat(F.label,"-").concat(C[F.to].label);b[$]||(b[$]={projected:[],fromNodeId:m,edgeLabel:F.label,nodeLabel2:C[F.to].label}),b[$].projected.push({graphId:w.graphId,edge:F,preNode:w})});for(var P=function($){var R=h.findForwardRmpathEdges(S,_.edges[g[$]],y,_);R.forEach(function(L){var O="".concat(h.dfsCode.dfsEdgeList[g[$]].fromNode,"-").concat(L.label,"-").concat(C[L.to].label);b[O]||(b[O]={projected:[],fromNodeId:h.dfsCode.dfsEdgeList[g[$]].fromNode,edgeLabel:L.label,nodeLabel2:C[L.to].label}),b[O].projected.push({graphId:w.graphId,edge:L,preNode:w})})},T=0;T<g.length;T++)P(T)}}),Object.keys(x).forEach(function(w){var S=x[w],C=S.toNodeId,_=S.edgeLabel;h.dfsCode.dfsEdgeList.push(new e(m,C,"-1",_,"-1")),h.subGraphMining(x[w].projected),h.dfsCode.dfsEdgeList.pop()}),Object.keys(b).forEach(function(w){var S=b[w],C=S.fromNodeId,_=S.edgeLabel,T=S.nodeLabel2;h.dfsCode.dfsEdgeList.push(new e(C,m+1,ki.VACANT_NODE_LABEL,_,T)),h.subGraphMining(b[w].projected),h.dfsCode.dfsEdgeList.pop()})}},f.prototype.generate1EdgeFrequentSubGraphs=function(){var d=this.graphs,h=this.directed,v=this.minSupport,p=this.frequentSize1Subgraphs,g={},m={},y={},b={};return Object.keys(d).forEach(function(x){var w=d[x],S=w.nodeMap;w.nodes.forEach(function(C,_){var T=C.label,E="".concat(x,"-").concat(T);if(!y[E]){var k=g[T]||0;k++,g[T]=k}y[E]={graphKey:x,label:T},C.edges.forEach(function(I){var P=T,F=S[I.to].label;if(!h&&P>F){var $=F;F=P,P=$}var R=I.label,L="".concat(x,"-").concat(P,"-").concat(R,"-").concat(F),O="".concat(P,"-").concat(R,"-").concat(F);if(!m[O]){var B=m[O]||0;B++,m[O]=B}b[L]={graphId:x,nodeLabel1:P,edgeLabel:R,nodeLabel2:F}})})}),Object.keys(g).forEach(function(x){var w=g[x];if(!(w<v)){var S={nodes:[],edges:[]};S.nodes.push({id:"0",label:x}),p.push(S)}}),p},f.prototype.run=function(){var d=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var h=this.graphs;this.directed;var v={};Object.keys(h).forEach(function(p){var g=h[p],m=g.nodeMap;g.nodes.forEach(function(y){var b=d.findForwardRootEdges(g,y);b.forEach(function(x){var w=m[x.to],S="".concat(y.label,"-").concat(x.label,"-").concat(w.label);v[S]||(v[S]={projected:[],nodeLabel1:y.label,edgeLabel:x.label,nodeLabel2:w.label});var C={graphId:p,edge:x,preNode:null};v[S].projected.push(C)})})}),Object.keys(v).forEach(function(p){var g=v[p],m=g.projected,y=g.nodeLabel1,b=g.edgeLabel,x=g.nodeLabel2;d.dfsCode.dfsEdgeList.push(new e(0,1,y,b,x)),d.subGraphMining(m),d.dfsCode.dfsEdgeList.pop()})}},f}(),o=function(d,h,v,p){var g={};return Object.keys(d).forEach(function(m,y){var b=d[m],x=new ki.Graph(y,!0,h),w={};b.nodes.forEach(function(S,C){x.addNode(C,S[v]),w[S.id]=C}),b.edges.forEach(function(S,C){var _=w[S.source],T=w[S.target];x.addEdge(-1,_,T,S[p])}),x&&x.getNodeNum()&&(g[x.id]=x)}),g},s=function(d,h,v){var p=[];return d.forEach(function(g){var m={nodes:[],edges:[]};g.nodes.forEach(function(y){var b;m.nodes.push((b={id:"".concat(y.id)},b[h]=y.label,b))}),g.edges.forEach(function(y){var b;m.edges.push((b={source:"".concat(y.from),target:"".concat(y.to)},b[v]=y.label,b))}),p.push(m)}),p},l="cluster",u=function(d){var h=d.graphs,v=d.directed,p=v===void 0?!1:v,g=d.nodeLabelProp,m=g===void 0?l:g,y=d.edgeLabelProp,b=y===void 0?l:y,x=o(h,p,m,b),w=d.minSupport,S=d.maxNodeNum,C=d.minNodeNum,_=d.verbose,T=d.top,E={graphs:x,minSupport:w,maxNodeNum:S,minNodeNum:C,top:T,verbose:_,directed:p},k=new a(E);k.run();var I=s(k.frequentSubgraphs,m,b);return I},c=u;t.default=c});xn(_z);var Tz=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=a(WA),n=a(_z),i=a(H1);function a(b){return b&&b.__esModule?b:{default:b}}var o=function(x,w,S,C){S===void 0&&(S="cluster"),C===void 0&&(C=2);var _=[],T=x.nodes;return w.forEach(function(E,k){_.push(s(T,E,k,S,C))}),_},s=function(x,w,S,C,_){var T=[S],E=[],k={};return w.forEach(function(I,P){if(I<=_&&S!==P){T.push(P),E.push(x[P]);var F=x[P][C];k[F]?(k[F].count++,k[F].dists.push(I)):k[F]={count:1,dists:[I]}}}),Object.keys(k).forEach(function(I){k[I].dists=k[I].dists.sort(function(P,F){return P-F})}),{nodeIdx:S,nodeId:x[S].id,nodeIdxs:T,neighbors:E,neighborNum:T.length-1,nodeLabelCountMap:k}},l=function(x,w,S,C,_){var T=Math.ceil(S/w),E={},k=0;return C.forEach(function(I,P){for(var F=0,$=0,R=I.nodeIdxs,L=I.neighborNum-1;F<T;){for(var O=R[1+Math.floor(Math.random()*L)],B=0;(E["".concat(P,"-").concat(O)]||E["".concat(O,"-").concat(P)])&&(O=Math.floor(Math.random()*w),B++,!(B>2*w)););if(B<2*w&&(E["".concat(P,"-").concat(O)]={start:P,end:O,distance:_[P][O]},F++,k++,k>=S))return E;if($++,$>2*w)break}if(F<T){var U=T-F;T=(T+U)/(w-P-1)}}),E},u=function(x,w,S,C){var _=S.nodes;return C||(C={}),Object.keys(x).forEach(function(T){var E,k;if(!(C&&C[T])){C[T]={nodes:[],edges:[]};var I=x[T],P=(E=w[I.start])===null||E===void 0?void 0:E.nodeIdxs,F=(k=w[I.end])===null||k===void 0?void 0:k.nodeIdxs;if(!(!P||!F)){var $=new Set(F),R=P.filter(function(W){return $.has(W)});if(!(!R||!R.length)){for(var L={},O=R.length,B=0;B<O;B++){var U=_[R[B]];C[T].nodes.push(U),L[U.id]=!0}S.edges.forEach(function(W){L[W.source]&&L[W.target]&&C[T].edges.push(W)})}}}}),C},c=function(x,w,S,C){var _,T,E={};x.nodes.forEach(function(I){E[I.id]=I});var k=0;return!((_=w==null?void 0:w.edges)===null||_===void 0?void 0:_.length)||((T=w==null?void 0:w.nodes)===null||T===void 0?void 0:T.length)<2?0:(x.edges.forEach(function(I){var P=E[I.source][S],F=E[I.target][S],$=w==null?void 0:w.nodes[0][S],R=w==null?void 0:w.nodes[1][S],L=w==null?void 0:w.edges[0][C];I[C]===L&&(P===$&&F===R||P===R&&F===$)&&k++}),k)},f=function(x,w,S){for(var C=1/0,_=0,T=function(I){var P=x[I],F=Object.keys(P).sort(function(W,X){return P[W]-P[X]}),$=10,R=[];F.forEach(function(W,X){R[X%$]||(R[X%$]={graphs:[],totalCount:0,aveCount:0}),R[X%$].graphs.push(W),R[X%$].totalCount+=P[W]});var L=0,O=[];R.forEach(function(W){var X=W.totalCount/W.graphs.length;W.aveCount=X,O.push(X);var ie=0,q=W.length;W.graphs.forEach(function(j,fe){var se=P[j];W.graphs.forEach(function(ce,_e){fe!==_e&&(ie+=Math.abs(se-P[ce]))})}),ie/=q*(q-1)/2,L+=ie}),L/=R.length;var B=0;O.forEach(function(W,X){O.forEach(function(ie,q){X!==q&&(B+=Math.abs(W-ie))}),B/=O.length*(O.length-1)/2});var U=B-L;C<U&&(C=U,_=I)},E=0;E<w;E++)T(E);return{structure:S[_],structureCountMap:x[_]}},d=function(x,w){var S={},C={};return x.forEach(function(_,T){S[_.id]={idx:T,node:_,degree:0,inDegree:0,outDegree:0};var E=_[w];C[E]||(C[E]=[]),C[E].push(_)}),{nodeMap:S,nodeLabelMap:C}},h=function(x,w,S){var C={},_={};return x.forEach(function(T,E){C["".concat(Ai.uniqueId)]={idx:E,edge:T};var k=T[w];_[k]||(_[k]=[]),_[k].push(T);var I=S[T.source];I&&(I.degree++,I.outDegree++);var P=S[T.target];P&&(P.degree++,P.inDegree++)}),{edgeMap:C,edgeLabelMap:_}},v=function(x,w,S){var C=w.length,_={};return w.forEach(function(T,E){for(var k=S?0:E+1,I=x[E].id,P=k;P<C;P++)if(E!==P){var F=x[P].id,$=T[P];_["".concat(I,"-").concat(F)]=$,S||(_["".concat(F,"-").concat(I)]=$)}}),_},p=function(x,w,S,C,_,T,E,k,I,P,F){var $,R="".concat(w.id,"-").concat(S.id);if(P&&P[R])return P[R];var L=F?F[R]:void 0;if(!L){var O=($={},$[R]={start:C[w.id].idx,end:C[S.id].idx,distance:_},$);F=u(O,T,x,F),L=F[R]}return c(L,E,k,I)},g=function(x,w,S,C){var _,T,E,k=(_=x[w])===null||_===void 0?void 0:_.degree,I=(T=x[w])===null||T===void 0?void 0:T.inDegree,P=(E=x[w])===null||E===void 0?void 0:E.outDegree;return x[w]===void 0&&(k=1/0,I=1/0,P=1/0,C[w].forEach(function(F){var $=S[F.id].degree;k>$&&(k=$);var R=S[F.id].inDegree;I>R&&(I=R);var L=S[F.id].outDegree;P>L&&(P=L)}),x[w]={degree:k,inDegree:I,outDegree:P}),{minPatternNodeLabelDegree:k,minPatternNodeLabelInDegree:I,minPatternNodeLabelOutDegree:P}},m=function(x,w,S,C,_,T,E){var k;if(S===void 0&&(S=!1),T===void 0&&(T="cluster"),E===void 0&&(E="cluster"),!(!x||!x.nodes)){var I=x.nodes.length;if(!!I){var P=(0,e.default)(x,S),F=(0,e.default)(w,S),$=v(x.nodes,P,S),R=v(w.nodes,F,S),L=d(x.nodes,T),O=L.nodeMap,B=L.nodeLabelMap,U=d(w.nodes,T),W=U.nodeMap,X=U.nodeLabelMap;h(x.edges,E,O);var ie=h(w.edges,E,W).edgeLabelMap,q=[];F==null||F.forEach(function(Ne){q=q.concat(Ne)}),_||(_=Math.max.apply(Math,(0,Bx.__spreadArray)((0,Bx.__spreadArray)([],q,!1),[2],!1))),C||(C=_);var j=o(x,P,T,C),fe=o(w,F,T,C),se=Math.min(100,I*(I-1)/2),ce=l(C,I,se,fe,P),_e=u(ce,j,x),Me=10,Ye=1,De=1,D=4,z={graphs:_e,nodeLabelProp:T,edgeLabelProp:E,minSupport:Ye,minNodeNum:De,maxNodeNum:D,directed:S},V=(0,n.default)(z).slice(0,Me),he=V.length,re=[];V.forEach(function(Ne,vt){re[vt]={},Object.keys(_e).forEach(function(Ft){var vr=_e[Ft],zr=c(vr,Ne,T,E);re[vt][Ft]=zr})});var pe=f(re,he,V),Je=pe.structure,We=pe.structureCountMap,Le=w.nodes[0],$e=[],H=(k=w.nodes[0])===null||k===void 0?void 0:k[T],Y=-1/0;w.nodes.forEach(function(Ne){var vt=Ne[T],Ft=B[vt];(Ft==null?void 0:Ft.length)>Y&&(Y=Ft.length,$e=Ft,H=vt,Le=Ne)});var K={},ee={},J={},ge={},Ve={},Ge={};Object.keys(X).forEach(function(Ne,vt){Ve[Ne]=[],S&&(Ge[Ne]=[]);var Ft=X[Ne],vr={};Ft.forEach(function(Rt){var Nt=R["".concat(Le.id,"-").concat(Rt.id)];if(Nt&&Ve[Ne].push(Nt),vr["".concat(Le.id,"-").concat(Rt.id)]={start:0,end:W[Rt.id].idx,distance:Nt},S){var sr=R["".concat(Rt.id,"-").concat(Le.id)];sr&&Ge[Ne].push(sr)}}),Ve[Ne]=Ve[Ne].sort(function(Rt,Nt){return Rt-Nt}),S&&(Ge[Ne]=Ge[Ne].sort(function(Rt,Nt){return Rt-Nt})),ee=u(vr,fe,w,ee);var zr=[];if(Object.keys(vr).forEach(function(Rt){if(J[Rt]){zr.push(J[Rt]);return}var Nt=ee[Rt];J[Rt]=c(Nt,Je,T,E),zr.push(J[Rt])}),zr=zr.sort(function(Rt,Nt){return Nt-Rt}),ge["".concat(Le.id,"-").concat(Ne)]=zr,Ne!==H)for(var or=($e==null?void 0:$e.length)||0,qe=function(Nt){var sr=$e[Nt],fn=j[O[sr.id].idx],on=fn.nodeLabelCountMap[Ne],ln=X[Ne].length;if(!on||on.count<ln)return $e.splice(Nt,1),"continue";for(var Pn=!1,jr=0;jr<ln;jr++)if(on.dists[jr]>Ve[Ne][jr]){Pn=!0;break}if(Pn)return $e.splice(Nt,1),"continue";var hr={};fn.neighbors.forEach(function(dn){var Pr=$["".concat(sr.id,"-").concat(dn.id)];hr["".concat(sr.id,"-").concat(dn.id)]={start:O[sr.id].idx,end:O[dn.id].idx,distance:Pr}}),_e=u(hr,j,x,_e);var Wr=[];Object.keys(hr).forEach(function(dn){if(We[dn]){Wr.push(We[dn]);return}var Pr=_e[dn];We[dn]=c(Pr,Je,T,E),Wr.push(We[dn])}),Wr=Wr.sort(function(dn,Pr){return Pr-dn});for(var xr=!1,jr=0;jr<ln;jr++)if(Wr[jr]<zr[jr]){xr=!0;break}if(xr)return $e.splice(Nt,1),"continue"},st=or-1;st>=0;st--)qe(st)});var rt=[];$e==null||$e.forEach(function(Ne){for(var vt=O[Ne.id].idx,Ft=s(x.nodes,P[vt],vt,T,_),vr=Ft.neighbors,zr=vr.length,or=!1,qe=zr-1;qe>=0;qe--){if(vr.length+1<w.nodes.length){or=!0;return}var st=vr[qe],Rt=st[T];if(!X[Rt]||!X[Rt].length){vr.splice(qe,1);continue}if(!Ve[Rt]||!Ve[Rt].length){vr.splice(qe,1);continue}var Nt="".concat(Ne.id,"-").concat(st.id),sr=$[Nt],fn=Ve[Rt].length-1,on=Ve[Rt][fn];if(sr>on){vr.splice(qe,1);continue}if(S){var ln="".concat(st.id,"-").concat(Ne.id),Pn=$[ln];fn=Ge[Rt].length-1;var jr=Ge[Rt][fn];if(Pn>jr){vr.splice(qe,1);continue}}var hr=We[Nt]?We[Nt]:p(x,Ne,st,O,sr,j,Je,T,E,We,_e),Wr="".concat(Le.id,"-").concat(Rt),xr=ge[Wr][ge[Wr].length-1];if(hr<xr){vr.splice(qe,1);continue}var dn=g(K,Rt,W,X),Pr=dn.minPatternNodeLabelDegree;if(dn.minPatternNodeLabelInDegree,dn.minPatternNodeLabelOutDegree,O[st.id].degree<Pr){vr.splice(qe,1);continue}}or||rt.push({nodes:[Ne].concat(vr)})});var Se=(0,i.default)(w,Le.id,!1).length,ye={};S?(Object.keys(Se).forEach(function(Ne){var vt=W[Ne].node[T];ye[vt]?ye[vt].push(Se[Ne]):ye[vt]=[Se[Ne]]}),Object.keys(ye).forEach(function(Ne){ye[Ne].sort(function(vt,Ft){return vt-Ft})})):ye=Ve;for(var Re=rt.length,St=function(vt){var Ft=rt[vt],vr=Ft.nodes[0],zr={},or={};Ft.nodes.forEach(function(qn,ja){or[qn.id]={idx:ja,node:qn,degree:0,inDegree:0,outDegree:0};var Di=qn[T];zr[Di]?zr[Di]++:zr[Di]=1});var qe=[],st={};x.edges.forEach(function(qn){or[qn.source]&&or[qn.target]&&(qe.push(qn),st[qn[E]]?st[qn[E]]++:st[qn[E]]=1,or[qn.source].degree++,or[qn.target].degree++,or[qn.source].outDegree++,or[qn.target].inDegree++)});for(var Rt=Object.keys(ie).length,Nt=!1,sr=0;sr<Rt;sr++){var fn=Object.keys(ie)[sr];if(!st[fn]||st[fn]<ie[fn].length){Nt=!0;break}}if(Nt)return rt.splice(vt,1),"continue";var on=qe.length;if(on<w.edges.length)return rt.splice(vt,1),"break";for(var ln=!1,Pn=function(ja){var Di=qe[ja],Ro=Di[E],qs=ie[Ro];if(!qs||!qs.length)return st[Ro]--,qs&&st[Ro]<qs.length?(ln=!0,"break"):(qe.splice(ja,1),or[Di.source].degree--,or[Di.target].degree--,or[Di.source].outDegree--,or[Di.target].inDegree--,"continue");var Bh=or[Di.source].node[T],$h=or[Di.target].node[T],Rf=!1;if(qs.forEach(function(zh){var Gh=W[zh.source].node,Uh=W[zh.target].node;Gh[T]===Bh&&Uh[T]===$h&&(Rf=!0),!S&&Gh[T]===$h&&Uh[T]===Bh&&(Rf=!0)}),!Rf)return st[Ro]--,qs&&st[Ro]<qs.length?(ln=!0,"break"):(qe.splice(ja,1),or[Di.source].degree--,or[Di.target].degree--,or[Di.source].outDegree--,or[Di.target].inDegree--,"continue")},sr=on-1;sr>=0;sr--){var jr=Pn(sr);if(jr==="break")break}if(ln)return rt.splice(vt,1),"continue";Ft.edges=qe;var hr=(0,i.default)(Ft,Ft.nodes[0].id,!1).length;if(Object.keys(hr).reverse().forEach(function(qn){if(!(qn===Ft.nodes[0].id||ln)){if(hr[qn]===1/0){var ja=or[qn].node[T];if(zr[ja]--,zr[ja]<X[ja].length){ln=!0;return}var Di=Ft.nodes.indexOf(or[qn].node);Ft.nodes.splice(Di,1),or[qn]=void 0;return}var Ro=O[qn].node[T];if(!ye[Ro]||!ye[Ro].length||hr[qn]>ye[Ro][ye[Ro].length-1]){var ja=or[qn].node[T];if(zr[ja]--,zr[ja]<X[ja].length){ln=!0;return}var Di=Ft.nodes.indexOf(or[qn].node);Ft.nodes.splice(Di,1),or[qn]=void 0}}}),ln)return rt.splice(vt,1),"continue";for(var Wr=!0,xr=0;Wr&&!ln;){Wr=!1;var dn=S?or[vr.id].degree<W[Le.id].degree||or[vr.id].inDegree<W[Le.id].inDegree||or[vr.id].outDegree<W[Le.id].outDegree:or[vr.id].degree<W[Le.id].degree;if(dn){ln=!0;break}if(zr[vr[T]]<X[vr[T]].length){ln=!0;break}for(var Pr=Ft.nodes.length,Xn=Pr-1;Xn>=0;Xn--){var ra=Ft.nodes[Xn],yo=or[ra.id].degree,es=or[ra.id].inDegree,ts=or[ra.id].outDegree,Do=ra[T],Df=g(K,Do,W,X),Nh=Df.minPatternNodeLabelDegree,Tg=Df.minPatternNodeLabelInDegree,Ag=Df.minPatternNodeLabelOutDegree,kg=S?yo<Nh||es<Tg||ts<Ag:yo<Nh;if(kg){if(zr[ra[T]]--,zr[ra[T]]<X[ra[T]].length){ln=!0;break}Ft.nodes.splice(Xn,1),or[ra.id]=void 0,Wr=!0}}if(ln||!Wr&&xr!==0)break;on=qe.length;for(var ac=on-1;ac>=0;ac--){var rs=qe[ac];if(!or[rs.source]||!or[rs.target]){qe.splice(ac,1);var oc=rs[E];if(st[oc]--,or[rs.source]&&(or[rs.source].degree--,or[rs.source].outDegree--),or[rs.target]&&(or[rs.target].degree--,or[rs.target].inDegree--),ie[oc]&&st[oc]<ie[oc].length){ln=!0;break}Wr=!0}}xr++}if(ln||ln||Ft.nodes.length<w.nodes.length||qe.length<w.edges.length)return rt.splice(vt,1),"continue"},kt=Re-1;kt>=0;kt--){var Ae=St(kt);if(Ae==="break")break}for(var ut=rt.length,cr=function(vt){var Ft=rt[vt],vr={};Ft.edges.forEach(function(qe){var st="".concat(qe.source,"-").concat(qe.target,"-").concat(qe.label);vr[st]?vr[st]++:vr[st]=1});for(var zr=function(st){var Rt=rt[st],Nt={};Rt.edges.forEach(function(fn){var on="".concat(fn.source,"-").concat(fn.target,"-").concat(fn.label);Nt[on]?Nt[on]++:Nt[on]=1});var sr=!0;Object.keys(Nt).length!==Object.keys(vr).length?sr=!1:Object.keys(vr).forEach(function(fn){Nt[fn]!==vr[fn]&&(sr=!1)}),sr&&rt.splice(st,1)},or=ut-1;or>vt;or--)zr(or);ut=rt.length},kt=0;kt<=ut-1;kt++)cr(kt);return rt}}},y=m;t.default=y});xn(Tz);var Az=$r(function(r,t){function e(b){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(w){return typeof w}:e=function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},e(b)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GADDI",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"breadthFirstSearch",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"connectedComponent",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"depthFirstSearch",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"detectCycle",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"dijkstra",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"findAllPath",{enumerable:!0,get:function(){return ty.findAllPath}}),Object.defineProperty(t,"findShortestPath",{enumerable:!0,get:function(){return ty.findShortestPath}}),Object.defineProperty(t,"floydWarshall",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"getAdjMatrix",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"getDegree",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"getInDegree",{enumerable:!0,get:function(){return o.getInDegree}}),Object.defineProperty(t,"getNeighbors",{enumerable:!0,get:function(){return Ai.getNeighbors}}),Object.defineProperty(t,"getOutDegree",{enumerable:!0,get:function(){return o.getOutDegree}}),Object.defineProperty(t,"labelPropagation",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"louvain",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"minimumSpanningTree",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"pageRank",{enumerable:!0,get:function(){return v.default}});var n=y(Zm),i=y(mz),a=y(Qm),o=m(Jm),s=y(ey),l=y(HA),u=y(H1),c=y(WA),f=y(yz),d=y(xz),h=y(Cz),v=y(Ez),p=y(Tz);function g(b){if(typeof WeakMap!="function")return null;var x=new WeakMap,w=new WeakMap;return(g=function(C){return C?w:x})(b)}function m(b,x){if(!x&&b&&b.__esModule)return b;if(b===null||e(b)!=="object"&&typeof b!="function")return{default:b};var w=g(x);if(w&&w.has(b))return w.get(b);var S={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in b)if(_!=="default"&&Object.prototype.hasOwnProperty.call(b,_)){var T=C?Object.getOwnPropertyDescriptor(b,_):null;T&&(T.get||T.set)?Object.defineProperty(S,_,T):S[_]=b[_]}return S.default=b,w&&w.set(b,S),S}function y(b){return b&&b.__esModule?b:{default:b}}});xn(Az);var kz=$r(function(r,t){function e(l){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(c){return typeof c}:e=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},e(l)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(Az);function i(l){if(typeof WeakMap!="function")return null;var u=new WeakMap,c=new WeakMap;return(i=function(d){return d?c:u})(l)}function a(l,u){if(!u&&l&&l.__esModule)return l;if(l===null||e(l)!=="object"&&typeof l!="function")return{default:l};var c=i(u);if(c&&c.has(l))return c.get(l);var f={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in l)if(h!=="default"&&Object.prototype.hasOwnProperty.call(l,h)){var v=d?Object.getOwnPropertyDescriptor(l,h):null;v&&(v.get||v.set)?Object.defineProperty(f,h,v):f[h]=l[h]}return f.default=l,c&&c.set(l,f),f}var o=typeof self!="undefined"?self:{};o.onmessage=function(l){var u=l.data,c=u._algorithmType,f=u.data;if(!!c){if(typeof n[c]=="function"){var d=n[c].apply(n,f);o.postMessage({_algorithmType:mi.MESSAGE.SUCCESS,data:d});return}o.postMessage({_algorithmType:mi.MESSAGE.FAILURE})}};var s=null;t.default=s});xn(kz);var Mz=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(kz);function n(o){return o&&o.__esModule?o:{default:o}}var i=function(s){return function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return new Promise(function(c,f){var d=new e.default;d.postMessage({_algorithmType:s,data:l}),d.onmessage=function(h){var v=h.data,p=v.data,g=v._algorithmType;mi.MESSAGE.SUCCESS===g?c(p):f(),d.terminate()}})}},a=i;t.default=a});xn(Mz);var Sr=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.pageRankAsync=t.minimumSpanningTreeAsync=t.louvainAsync=t.labelPropagationAsync=t.getOutDegreeAsync=t.getNeighborsAsync=t.getInDegreeAsync=t.getDegreeAsync=t.getAdjMatrixAsync=t.floydWarshallAsync=t.findShortestPathAsync=t.findAllPathAsync=t.dijkstraAsync=t.detectCycleAsync=t.detectAllUndirectedCycleAsync=t.detectAllDirectedCycleAsync=t.detectAllCyclesAsync=t.connectedComponentAsync=t.GADDIAsync=void 0;var e=n(Mz);function n(C){return C&&C.__esModule?C:{default:C}}var i=function(_,T){return(0,e.default)(mi.ALGORITHM.getAdjMatrix).apply(void 0,[_,T])};t.getAdjMatrixAsync=i;var a=function(_,T){return(0,e.default)(mi.ALGORITHM.connectedComponent).apply(void 0,[_,T])};t.connectedComponentAsync=a;var o=function(_){return(0,e.default)(mi.ALGORITHM.getDegree)(_)};t.getDegreeAsync=o;var s=function(_,T){return(0,e.default)(mi.ALGORITHM.getInDegree)(_,T)};t.getInDegreeAsync=s;var l=function(_,T){return(0,e.default)(mi.ALGORITHM.getOutDegree)(_,T)};t.getOutDegreeAsync=l;var u=function(_){return(0,e.default)(mi.ALGORITHM.detectCycle)(_)};t.detectCycleAsync=u;var c=function(_){return(0,e.default)(mi.ALGORITHM.detectAllCycles)(_)};t.detectAllCyclesAsync=c;var f=function(_){return(0,e.default)(mi.ALGORITHM.detectAllDirectedCycle)(_)};t.detectAllDirectedCycleAsync=f;var d=function(_){return(0,e.default)(mi.ALGORITHM.detectAllUndirectedCycle)(_)};t.detectAllUndirectedCycleAsync=d;var h=function(_,T,E,k){return(0,e.default)(mi.ALGORITHM.dijkstra).apply(void 0,[_,T,E,k])};t.dijkstraAsync=h;var v=function(_,T,E,k){return(0,e.default)(mi.ALGORITHM.findAllPath).apply(void 0,[_,T,E,k])};t.findAllPathAsync=v;var p=function(_,T,E,k,I){return(0,e.default)(mi.ALGORITHM.findShortestPath).apply(void 0,[_,T,E,k,I])};t.findShortestPathAsync=p;var g=function(_,T){return(0,e.default)(mi.ALGORITHM.floydWarshall).apply(void 0,[_,T])};t.floydWarshallAsync=g;var m=function(_,T,E,k){return k===void 0&&(k=1e3),(0,e.default)(mi.ALGORITHM.labelPropagation)(_,T,E,k)};t.labelPropagationAsync=m;var y=function(_,T,E,k){return(0,e.default)(mi.ALGORITHM.louvain)(_,T,E,k)};t.louvainAsync=y;var b=function(_,T,E){return(0,e.default)(mi.ALGORITHM.minimumSpanningTree).apply(void 0,[_,T,E])};t.minimumSpanningTreeAsync=b;var x=function(_,T,E){return(0,e.default)(mi.ALGORITHM.pageRank).apply(void 0,[_,T,E])};t.pageRankAsync=x;var w=function(_,T,E){return(0,e.default)(mi.ALGORITHM.getNeighbors).apply(void 0,[_,T,E])};t.getNeighborsAsync=w;var S=function(_,T,E,k,I,P,F){return E===void 0&&(E=!1),P===void 0&&(P="cluster"),F===void 0&&(F="cluster"),(0,e.default)(mi.ALGORITHM.GADDI).apply(void 0,[_,T,E,k,I,P,F])};t.GADDIAsync=S});xn(Sr);Sr.pageRankAsync;Sr.minimumSpanningTreeAsync;Sr.louvainAsync;Sr.labelPropagationAsync;Sr.getOutDegreeAsync;Sr.getNeighborsAsync;Sr.getInDegreeAsync;Sr.getDegreeAsync;Sr.getAdjMatrixAsync;Sr.floydWarshallAsync;Sr.findShortestPathAsync;Sr.findAllPathAsync;Sr.dijkstraAsync;Sr.detectCycleAsync;Sr.detectAllUndirectedCycleAsync;Sr.detectAllDirectedCycleAsync;Sr.detectAllCyclesAsync;Sr.connectedComponentAsync;Sr.GADDIAsync;var jA=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GADDIAsync",{enumerable:!0,get:function(){return Sr.GADDIAsync}}),Object.defineProperty(t,"connectedComponentAsync",{enumerable:!0,get:function(){return Sr.connectedComponentAsync}}),t.default=void 0,Object.defineProperty(t,"detectAllCyclesAsync",{enumerable:!0,get:function(){return Sr.detectAllCyclesAsync}}),Object.defineProperty(t,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return Sr.detectAllDirectedCycleAsync}}),Object.defineProperty(t,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return Sr.detectAllUndirectedCycleAsync}}),Object.defineProperty(t,"detectCycleAsync",{enumerable:!0,get:function(){return Sr.detectCycleAsync}}),t.detectDirectedCycleAsync=void 0,Object.defineProperty(t,"dijkstraAsync",{enumerable:!0,get:function(){return Sr.dijkstraAsync}}),Object.defineProperty(t,"findAllPathAsync",{enumerable:!0,get:function(){return Sr.findAllPathAsync}}),Object.defineProperty(t,"findShortestPathAsync",{enumerable:!0,get:function(){return Sr.findShortestPathAsync}}),Object.defineProperty(t,"floydWarshallAsync",{enumerable:!0,get:function(){return Sr.floydWarshallAsync}}),Object.defineProperty(t,"getAdjMatrixAsync",{enumerable:!0,get:function(){return Sr.getAdjMatrixAsync}}),Object.defineProperty(t,"getDegreeAsync",{enumerable:!0,get:function(){return Sr.getDegreeAsync}}),Object.defineProperty(t,"getInDegreeAsync",{enumerable:!0,get:function(){return Sr.getInDegreeAsync}}),Object.defineProperty(t,"getNeighborsAsync",{enumerable:!0,get:function(){return Sr.getNeighborsAsync}}),Object.defineProperty(t,"getOutDegreeAsync",{enumerable:!0,get:function(){return Sr.getOutDegreeAsync}}),Object.defineProperty(t,"labelPropagationAsync",{enumerable:!0,get:function(){return Sr.labelPropagationAsync}}),Object.defineProperty(t,"louvainAsync",{enumerable:!0,get:function(){return Sr.louvainAsync}}),Object.defineProperty(t,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return Sr.minimumSpanningTreeAsync}}),Object.defineProperty(t,"pageRankAsync",{enumerable:!0,get:function(){return Sr.pageRankAsync}});var e=Sr.detectCycleAsync;t.detectDirectedCycleAsync=e;var n={getAdjMatrixAsync:Sr.getAdjMatrixAsync,connectedComponentAsync:Sr.connectedComponentAsync,getDegreeAsync:Sr.getDegreeAsync,getInDegreeAsync:Sr.getInDegreeAsync,getOutDegreeAsync:Sr.getOutDegreeAsync,detectCycleAsync:Sr.detectCycleAsync,detectDirectedCycleAsync:e,detectAllCyclesAsync:Sr.detectAllCyclesAsync,detectAllDirectedCycleAsync:Sr.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:Sr.detectAllUndirectedCycleAsync,dijkstraAsync:Sr.dijkstraAsync,findAllPathAsync:Sr.findAllPathAsync,findShortestPathAsync:Sr.findShortestPathAsync,floydWarshallAsync:Sr.floydWarshallAsync,labelPropagationAsync:Sr.labelPropagationAsync,louvainAsync:Sr.louvainAsync,minimumSpanningTreeAsync:Sr.minimumSpanningTreeAsync,pageRankAsync:Sr.pageRankAsync,getNeighborsAsync:Sr.getNeighborsAsync,GADDIAsync:Sr.GADDIAsync};t.default=n}),ope=xn(jA),spe=jA.detectDirectedCycleAsync,lpe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ope,__moduleExports:jA,detectDirectedCycleAsync:spe});function upe(){return window?window.devicePixelRatio:1}function Iz(r,t,e,n){var i=r-e,a=t-n;return Math.sqrt(i*i+a*a)}function md(r,t,e,n,i,a){return i>=r&&i<=r+e&&a>=t&&a<=t+n}function ry(r,t){return!(t.minX>r.maxX||t.maxX<r.minX||t.minY>r.maxY||t.maxY<r.minY)}function cpe(r,t){return!r||!t?r||t:{minX:Math.min(r.minX,t.minX),minY:Math.min(r.minY,t.minY),maxX:Math.max(r.maxX,t.maxX),maxY:Math.max(r.maxY,t.maxY)}}function Pz(r,t){return r[0]===t[0]&&r[1]===t[1]}var fpe=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,dpe=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,hpe=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Dz=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Rz(r,t){var e=r.match(Dz);G(e,function(n){var i=n.split(":");t.addColorStop(i[0],i[1])})}function vpe(r,t,e){var n=fpe.exec(e),i=parseFloat(n[1])%360*(Math.PI/180),a=n[2],o=t.getBBox(),s,l;i>=0&&i<1/2*Math.PI?(s={x:o.minX,y:o.minY},l={x:o.maxX,y:o.maxY}):1/2*Math.PI<=i&&i<Math.PI?(s={x:o.maxX,y:o.minY},l={x:o.minX,y:o.maxY}):Math.PI<=i&&i<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},l={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},l={x:o.maxX,y:o.minY});var u=Math.tan(i),c=u*u,f=(l.x-s.x+u*(l.y-s.y))/(c+1)+s.x,d=u*(l.x-s.x+u*(l.y-s.y))/(c+1)+s.y,h=r.createLinearGradient(s.x,s.y,f,d);return Rz(a,h),h}function ppe(r,t,e){var n=dpe.exec(e),i=parseFloat(n[1]),a=parseFloat(n[2]),o=parseFloat(n[3]),s=n[4];if(o===0){var l=s.match(Dz);return l[l.length-1].split(":")[1]}var u=t.getBBox(),c=u.maxX-u.minX,f=u.maxY-u.minY,d=Math.sqrt(c*c+f*f)/2,h=r.createRadialGradient(u.minX+c*i,u.minY+f*a,0,u.minX+c/2,u.minY+f/2,o*d);return Rz(s,h),h}function gpe(r,t,e){if(t.get("patternSource")&&t.get("patternSource")===e)return t.get("pattern");var n,i,a=hpe.exec(e),o=a[1],s=a[2];function l(){n=r.createPattern(i,o),t.set("pattern",n),t.set("patternSource",e)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),n}function mpe(r,t,e){var n=t.getBBox();if(isNaN(n.x)||isNaN(n.y)||isNaN(n.width)||isNaN(n.height))return e;if(ot(e)){if(e[1]==="("||e[2]==="("){if(e[0]==="l")return vpe(r,t,e);if(e[0]==="r")return ppe(r,t,e);if(e[0]==="p")return gpe(r,t,e)}return e}if(e instanceof CanvasPattern)return e}function ype(r){var t=0,e=0,n=0,i=0;return Qe(r)?r.length===1?t=e=n=i=r[0]:r.length===2?(t=n=r[0],e=i=r[1]):r.length===3?(t=r[0],e=i=r[1],n=r[2]):(t=r[0],e=r[1],n=r[2],i=r[3]):t=e=n=i=r,[t,e,n,i]}function W1(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function YA(r,t){return W1(r)*W1(t)?(r[0]*t[0]+r[1]*t[1])/(W1(r)*W1(t)):1}function Oz(r,t){return(r[0]*t[1]<r[1]*t[0]?-1:1)*Math.acos(YA(r,t))}function j1(r,t){var e=t[1],n=t[2],i=Ux(Vx(t[3]),Math.PI*2),a=t[4],o=t[5],s=r[0],l=r[1],u=t[6],c=t[7],f=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,d=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,h=f*f/(e*e)+d*d/(n*n);h>1&&(e*=Math.sqrt(h),n*=Math.sqrt(h));var v=e*e*(d*d)+n*n*(f*f),p=v?Math.sqrt((e*e*(n*n)-v)/v):1;a===o&&(p*=-1),isNaN(p)&&(p=0);var g=n?p*e*d/n:0,m=e?p*-n*f/e:0,y=(s+u)/2+Math.cos(i)*g-Math.sin(i)*m,b=(l+c)/2+Math.sin(i)*g+Math.cos(i)*m,x=[(f-g)/e,(d-m)/n],w=[(-1*f-g)/e,(-1*d-m)/n],S=Oz([1,0],x),C=Oz(x,w);return YA(x,w)<=-1&&(C=Math.PI),YA(x,w)>=1&&(C=0),o===0&&C>0&&(C=C-2*Math.PI),o===1&&C<0&&(C=C+2*Math.PI),{cx:y,cy:b,rx:Pz(r,[u,c])?0:e,ry:Pz(r,[u,c])?0:n,startAngle:S,endAngle:S+C,xRotation:i,arcFlag:a,sweepFlag:o}}var Y1=Math.sin,X1=Math.cos,XA=Math.atan2,q1=Math.PI;function Lz(r,t,e,n,i,a,o){var s=t.stroke,l=t.lineWidth,u=e-i,c=n-a,f=XA(c,u),d=new rk({type:"path",canvas:r.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*X1(q1/6)+","+10*Y1(q1/6)+" L0,0 L"+10*X1(q1/6)+",-"+10*Y1(q1/6),stroke:s,lineWidth:l}});d.translate(i,a),d.rotateAtPoint(i,a,f),r.set(o?"startArrowShape":"endArrowShape",d)}function Fz(r,t,e,n,i,a,o){var s=t.startArrow,l=t.endArrow,u=t.stroke,c=t.lineWidth,f=o?s:l,d=f.d,h=f.fill,v=f.stroke,p=f.lineWidth,g=Ur(f,["d","fill","stroke","lineWidth"]),m=e-i,y=n-a,b=XA(y,m);d&&(i=i-X1(b)*d,a=a-Y1(b)*d);var x=new rk({type:"path",canvas:r.get("canvas"),isArrowShape:!0,attrs:A(A({},g),{stroke:v||u,lineWidth:p||c,fill:h})});x.translate(i,a),x.rotateAtPoint(i,a,b),r.set(o?"startArrowShape":"endArrowShape",x)}function yd(r,t,e,n,i){var a=XA(n-t,e-r);return{dx:X1(a)*i,dy:Y1(a)*i}}function qA(r,t,e,n,i,a){typeof t.startArrow=="object"?Fz(r,t,e,n,i,a,!0):t.startArrow?Lz(r,t,e,n,i,a,!0):r.set("startArrowShape",null)}function KA(r,t,e,n,i,a){typeof t.endArrow=="object"?Fz(r,t,e,n,i,a,!1):t.endArrow?Lz(r,t,e,n,i,a,!1):r.set("startArrowShape",null)}var Nz={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function $v(r,t){var e=t.attr();for(var n in e){var i=e[n],a=Nz[n]?Nz[n]:n;a==="matrix"&&i?r.transform(i[0],i[1],i[3],i[4],i[6],i[7]):a==="lineDash"&&r.setLineDash?Qe(i)&&r.setLineDash(i):(a==="strokeStyle"||a==="fillStyle"?i=mpe(r,t,i):a==="globalAlpha"&&(i=i*r.globalAlpha),r[a]=i)}}function ZA(r,t,e){for(var n=0;n<t.length;n++){var i=t[n];i.cfg.visible?i.draw(r,e):i.skipDraw()}}function bpe(r,t,e){var n=r.get("refreshElements");G(n,function(i){if(i!==r)for(var a=i.cfg.parent;a&&a!==r&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),n[0]===r?JA(t):QA(t,e)}function QA(r,t){for(var e=0;e<r.length;e++){var n=r[e];if(n.cfg.visible)if(n.cfg.hasChanged)n.cfg.refresh=!0,n.isGroup()&&JA(n.cfg.children);else if(n.cfg.refresh)n.isGroup()&&QA(n.cfg.children,t);else{var i=xpe(n,t);n.cfg.refresh=i,i&&n.isGroup()&&QA(n.cfg.children,t)}}}function Bz(r){for(var t=0;t<r.length;t++){var e=r[t];e.cfg.hasChanged=!1,e.isGroup()&&!e.destroyed&&Bz(e.cfg.children)}}function JA(r,t){for(var e=0;e<r.length;e++){var n=r[e];n.cfg.refresh=!0,n.isGroup()&&JA(n.get("children"))}}function xpe(r,t){var e=r.cfg.cacheCanvasBBox,n=r.cfg.isInView&&e&&ry(e,t);return n}function $z(r,t,e,n){var i=e.path,a=e.startArrow,o=e.endArrow;if(!!i){var s=[0,0],l=[0,0],u={dx:0,dy:0};t.beginPath();for(var c=0;c<i.length;c++){var f=i[c],d=f[0];if(c===0&&a&&a.d){var h=r.getStartTangent();u=yd(h[0][0],h[0][1],h[1][0],h[1][1],a.d)}else if(c===i.length-2&&i[c+1][0]==="Z"&&o&&o.d){var v=i[c+1];if(v[0]==="Z"){var h=r.getEndTangent();u=yd(h[0][0],h[0][1],h[1][0],h[1][1],o.d)}}else if(c===i.length-1&&o&&o.d&&i[0]!=="Z"){var h=r.getEndTangent();u=yd(h[0][0],h[0][1],h[1][0],h[1][1],o.d)}var p=u.dx,g=u.dy;switch(d){case"M":t.moveTo(f[1]-p,f[2]-g),l=[f[1],f[2]];break;case"L":t.lineTo(f[1]-p,f[2]-g);break;case"Q":t.quadraticCurveTo(f[1],f[2],f[3]-p,f[4]-g);break;case"C":t.bezierCurveTo(f[1],f[2],f[3],f[4],f[5]-p,f[6]-g);break;case"A":{var m=void 0;n?(m=n[c],m||(m=j1(s,f),n[c]=m)):m=j1(s,f);var y=m.cx,b=m.cy,x=m.rx,w=m.ry,S=m.startAngle,C=m.endAngle,_=m.xRotation,T=m.sweepFlag;if(t.ellipse)t.ellipse(y,b,x,w,_,S,C,1-T);else{var E=x>w?x:w,k=x>w?1:x/w,I=x>w?w/x:1;t.translate(y,b),t.rotate(_),t.scale(k,I),t.arc(0,0,E,S,C,1-T),t.scale(1/k,1/I),t.rotate(-_),t.translate(-y,-b)}break}case"Z":t.closePath();break}if(d==="Z")s=l;else{var P=f.length;s=[f[P-2],f[P-1]]}}}}function zz(r,t){var e=r.get("canvas");e&&(t==="remove"&&(r._cacheCanvasBBox=r.get("cacheCanvasBBox")),r.get("hasChanged")||(r.set("hasChanged",!0),r.cfg.parent&&r.cfg.parent.get("hasChanged")||(e.refreshElement(r,t,e),e.get("autoDraw")&&e.draw())))}function wpe(r){var t;if(r.destroyed)t=r._cacheCanvasBBox;else{var e=r.get("cacheCanvasBBox"),n=e&&!!(e.width&&e.height),i=r.getCanvasBBox(),a=i&&!!(i.width&&i.height);n&&a?t=cpe(e,i):n?t=e:a&&(t=i)}return t}function Spe(r){if(!r.length)return null;var t=[],e=[],n=[],i=[];return G(r,function(a){var o=wpe(a);o&&(t.push(o.minX),e.push(o.minY),n.push(o.maxX),i.push(o.maxY))}),{minX:sa(t),minY:sa(e),maxX:Xi(n),maxY:Xi(i)}}function Cpe(r,t){return!r||!t||!ry(r,t)?null:{minX:Math.max(r.minX,t.minX),minY:Math.max(r.minY,t.minY),maxX:Math.min(r.maxX,t.maxX),maxY:Math.min(r.maxY,t.maxY)}}var ek=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onCanvasChange=function(e){zz(this,e)},t.prototype.getShapeBase=function(){return ix},t.prototype.getGroupBase=function(){return t},t.prototype._applyClip=function(e,n){n&&(e.save(),$v(e,n),n.createPath(e),e.restore(),e.clip(),n._afterDraw())},t.prototype.cacheCanvasBBox=function(){var e=this.cfg.children,n=[],i=[];G(e,function(d){var h=d.cfg.cacheCanvasBBox;h&&d.cfg.isInView&&(n.push(h.minX,h.maxX),i.push(h.minY,h.maxY))});var a=null;if(n.length){var o=sa(n),s=Xi(n),l=sa(i),u=Xi(i);a={minX:o,minY:l,x:o,y:l,maxX:s,maxY:u,width:s-o,height:u-l};var c=this.cfg.canvas;if(c){var f=c.getViewRange();this.set("isInView",ry(a,f))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},t.prototype.draw=function(e,n){var i=this.cfg.children,a=n?this.cfg.refresh:!0;i.length&&a&&(e.save(),$v(e,this),this._applyClip(e,this.getClip()),ZA(e,i,n),e.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},t}(_1),Epe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.getShapeBase=function(){return ix},t.prototype.getGroupBase=function(){return ek},t.prototype.onCanvasChange=function(e){zz(this,e)},t.prototype.calculateBBox=function(){var e=this.get("type"),n=this.getHitLineWidth(),i=A1(e),a=i(this),o=n/2,s=a.x-o,l=a.y-o,u=a.x+a.width+o,c=a.y+a.height+o;return{x:s,minX:s,y:l,minY:l,width:a.width+n,height:a.height+n,maxX:u,maxY:c}},t.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},t.prototype.isStroke=function(){return!!this.attrs.stroke},t.prototype._applyClip=function(e,n){n&&(e.save(),$v(e,n),n.createPath(e),e.restore(),e.clip(),n._afterDraw())},t.prototype.draw=function(e,n){var i=this.cfg.clipShape;if(n){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!ry(n,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}e.save(),$v(e,this),this._applyClip(e,i),this.drawPath(e),e.restore(),this._afterDraw()},t.prototype.getCanvasViewBox=function(){var e=this.cfg.canvas;return e?e.getViewRange():null},t.prototype.cacheCanvasBBox=function(){var e=this.getCanvasViewBox();if(e){var n=this.getCanvasBBox(),i=ry(n,e);this.set("isInView",i),i?this.set("cacheCanvasBBox",n):this.set("cacheCanvasBBox",null)}},t.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},t.prototype.drawPath=function(e){this.createPath(e),this.strokeAndFill(e),this.afterDrawPath(e)},t.prototype.fill=function(e){e.fill()},t.prototype.stroke=function(e){e.stroke()},t.prototype.strokeAndFill=function(e){var n=this.attrs,i=n.lineWidth,a=n.opacity,o=n.strokeOpacity,s=n.fillOpacity;this.isFill()&&(!nt(s)&&s!==1?(e.globalAlpha=s,this.fill(e),e.globalAlpha=a):this.fill(e)),this.isStroke()&&i>0&&(!nt(o)&&o!==1&&(e.globalAlpha=o),this.stroke(e)),this.afterDrawPath(e)},t.prototype.createPath=function(e){},t.prototype.afterDrawPath=function(e){},t.prototype.isInShape=function(e,n){var i=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(e,n,i,a,o)},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){return!1},t.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var e=this.attrs;return e.lineWidth+e.lineAppendWidth},t}(T1),tl=Epe,_pe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,r:0})},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.attr(),l=s.x,u=s.y,c=s.r,f=o/2,d=Iz(l,u,e,n);return a&&i?d<=c+f:a?d<=c:i?d>=c-f&&d<=c+f:!1},t.prototype.createPath=function(e){var n=this.attr(),i=n.x,a=n.y,o=n.r;e.beginPath(),e.arc(i,a,o,0,Math.PI*2,!1),e.closePath()},t}(tl),Tpe=_pe;function K1(r,t,e,n){return r/(e*e)+t/(n*n)}var Ape=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,rx:0,ry:0})},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.attr(),l=o/2,u=s.x,c=s.y,f=s.rx,d=s.ry,h=(e-u)*(e-u),v=(n-c)*(n-c);return a&&i?K1(h,v,f+l,d+l)<=1:a?K1(h,v,f,d)<=1:i?K1(h,v,f-l,d-l)>=1&&K1(h,v,f+l,d+l)<=1:!1},t.prototype.createPath=function(e){var n=this.attr(),i=n.x,a=n.y,o=n.rx,s=n.ry;if(e.beginPath(),e.ellipse)e.ellipse(i,a,o,s,0,0,Math.PI*2,!1);else{var l=o>s?o:s,u=o>s?1:o/s,c=o>s?s/o:1;e.save(),e.translate(i,a),e.scale(u,c),e.arc(0,0,l,0,Math.PI*2),e.restore(),e.closePath()}},t}(tl),kpe=Ape;function Gz(r){return r instanceof HTMLElement&&ot(r.nodeName)&&r.nodeName.toUpperCase()==="CANVAS"}var Mpe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,width:0,height:0})},t.prototype.initAttrs=function(e){this._setImage(e.img)},t.prototype.isStroke=function(){return!1},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var e=this.get("canvas");e?e.draw():this.createPath(this.get("context"))}},t.prototype._setImage=function(e){var n=this,i=this.attrs;if(ot(e)){var a=new Image;a.onload=function(){if(n.destroyed)return!1;n.attr("img",a),n.set("loading",!1),n._afterLoading();var o=n.get("callback");o&&o.call(n)},a.crossOrigin="Anonymous",a.src=e,this.set("loading",!0)}else e instanceof Image?(i.width||(i.width=e.width),i.height||(i.height=e.height)):Gz(e)&&(i.width||(i.width=Number(e.getAttribute("width"))),i.height||(i.height,Number(e.getAttribute("height"))))},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),e==="img"&&this._setImage(n)},t.prototype.createPath=function(e){if(this.get("loading")){this.set("toDraw",!0),this.set("context",e);return}var n=this.attr(),i=n.x,a=n.y,o=n.width,s=n.height,l=n.sx,u=n.sy,c=n.swidth,f=n.sheight,d=n.img;(d instanceof Image||Gz(d))&&(!nt(l)&&!nt(u)&&!nt(c)&&!nt(f)?e.drawImage(d,l,u,c,f,i,a,o,s):e.drawImage(d,i,a,o,s))},t}(tl),Ipe=Mpe;function Fc(r,t,e,n,i,a,o){var s=Math.min(r,e),l=Math.max(r,e),u=Math.min(t,n),c=Math.max(t,n),f=i/2;return a>=s-f&&a<=l+f&&o>=u-f&&o<=c+f?Ga.pointToLine(r,t,e,n,a,o)<=i/2:!1}var Ppe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),this.setArrow()},t.prototype.setArrow=function(){var e=this.attr(),n=e.x1,i=e.y1,a=e.x2,o=e.y2,s=e.startArrow,l=e.endArrow;s&&qA(this,e,a,o,n,i),l&&KA(this,e,n,i,a,o)},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){if(!i||!o)return!1;var s=this.attr(),l=s.x1,u=s.y1,c=s.x2,f=s.y2;return Fc(l,u,c,f,o,e,n)},t.prototype.createPath=function(e){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2,l=n.startArrow,u=n.endArrow,c={dx:0,dy:0},f={dx:0,dy:0};l&&l.d&&(c=yd(i,a,o,s,n.startArrow.d)),u&&u.d&&(f=yd(i,a,o,s,n.endArrow.d)),e.beginPath(),e.moveTo(i+c.dx,a+c.dy),e.lineTo(o-f.dx,s-f.dy)},t.prototype.afterDrawPath=function(e){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(e),i&&i.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr(),n=e.x1,i=e.y1,a=e.x2,o=e.y2;return Ga.length(n,i,a,o)},t.prototype.getPoint=function(e){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2;return Ga.pointAt(i,a,o,s,e)},t}(tl),Dpe=Ppe,Rpe={circle:function(r,t,e){return[["M",r-e,t],["A",e,e,0,1,0,r+e,t],["A",e,e,0,1,0,r-e,t]]},square:function(r,t,e){return[["M",r-e,t-e],["L",r+e,t-e],["L",r+e,t+e],["L",r-e,t+e],["Z"]]},diamond:function(r,t,e){return[["M",r-e,t],["L",r,t-e],["L",r+e,t],["L",r,t+e],["Z"]]},triangle:function(r,t,e){var n=e*Math.sin(1/3*Math.PI);return[["M",r-e,t+n],["L",r,t-n],["L",r+e,t+n],["Z"]]},"triangle-down":function(r,t,e){var n=e*Math.sin(1/3*Math.PI);return[["M",r-e,t-n],["L",r+e,t-n],["L",r,t+n],["Z"]]}},Ope=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.initAttrs=function(e){this._resetParamsCache()},t.prototype._resetParamsCache=function(){this.set("paramsCache",{})},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),["symbol","x","y","r","radius"].indexOf(e)!==-1&&this._resetParamsCache()},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._getR=function(e){return nt(e.r)?e.radius:e.r},t.prototype._getPath=function(){var e=this.attr(),n=e.x,i=e.y,a=e.symbol||"circle",o=this._getR(e),s,l;if(Kt(a))s=a,l=s(n,i,o),l=F$(l);else{if(s=t.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;l=s(n,i,o)}return l},t.prototype.createPath=function(e){var n=this._getPath(),i=this.get("paramsCache");$z(this,e,{path:n},i)},t.Symbols=Rpe,t}(tl),Lpe=Ope;function Uz(r,t,e){var n=I1();return r.createPath(n),n.isPointInPath(t,e)}var Fpe=1e-6;function tk(r){return Math.abs(r)<Fpe?0:r<0?-1:1}function Npe(r,t,e){return(e[0]-r[0])*(t[1]-r[1])==(t[0]-r[0])*(e[1]-r[1])&&Math.min(r[0],t[0])<=e[0]&&e[0]<=Math.max(r[0],t[0])&&Math.min(r[1],t[1])<=e[1]&&e[1]<=Math.max(r[1],t[1])}function Vz(r,t,e){var n=!1,i=r.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=r[a],s=r[(a+1)%i];if(Npe(o,s,[t,e]))return!0;tk(o[1]-e)>0!=tk(s[1]-e)>0&&tk(t-(e-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(n=!n)}return n}function ny(r,t,e,n,i,a,o,s){var l=(Math.atan2(s-t,o-r)+Math.PI*2)%(Math.PI*2);if(l<n||l>i)return!1;var u={x:r+e*Math.cos(l),y:t+e*Math.sin(l)};return Iz(u.x,u.y,o,s)<=a/2}var Bpe=Zn;function $pe(r){for(var t=!1,e=r.length,n=0;n<e;n++){var i=r[n],a=i[0];if(a==="C"||a==="A"||a==="Q"){t=!0;break}}return t}function zpe(r,t,e,n,i){for(var a=!1,o=t/2,s=0;s<r.length;s++){var l=r[s],u=l.currentPoint,c=l.params,f=l.prePoint,d=l.box;if(!(d&&!md(d.x-o,d.y-o,d.width+t,d.height+t,e,n))){switch(l.command){case"L":case"Z":a=Fc(f[0],f[1],u[0],u[1],t,e,n);break;case"Q":var h=yA.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],e,n);a=h<=t/2;break;case"C":var v=Nv.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],c[5],c[6],e,n,i);a=v<=t/2;break;case"A":var p=l.arcParams,g=p.cx,m=p.cy,y=p.rx,b=p.ry,x=p.startAngle,w=p.endAngle,S=p.xRotation,C=[e,n,1],_=y>b?y:b,T=y>b?1:y/b,E=y>b?b/y:1,k=Bpe(null,[["t",-g,-m],["r",-S],["s",1/T,1/E]]);Pl(C,C,k),a=ny(0,0,_,x,w,t,C[0],C[1]);break}if(a)break}}return a}function Gpe(r){for(var t=r.length,e=[],n=[],i=[],a=0;a<t;a++){var o=r[a],s=o[0];s==="M"?(i.length&&(n.push(i),i=[]),i.push([o[1],o[2]])):s==="Z"?i.length&&(e.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&n.push(i),{polygons:e,polylines:n}}var Z1=A({hasArc:$pe,extractPolygons:Gpe,isPointInStroke:zpe},KT);function Hz(r,t,e){for(var n=!1,i=0;i<r.length;i++){var a=r[i];if(n=Vz(a,t,e),n)break}return n}var Upe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this._setPathArr(e.path),this.setArrow()},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),e==="path"&&this._setPathArr(n),this.setArrow()},t.prototype._setPathArr=function(e){this.attrs.path=F$(e);var n=Z1.hasArc(e);this.set("hasArc",n),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},t.prototype.getSegments=function(){var e=this.get("segements");return e||(e=TA(this.attr("path")),this.set("segments",e)),e},t.prototype.setArrow=function(){var e=this.attr(),n=e.startArrow,i=e.endArrow;if(n){var a=this.getStartTangent();qA(this,e,a[0][0],a[0][1],a[1][0],a[1][1])}if(i){var a=this.getEndTangent();KA(this,e,a[0][0],a[0][1],a[1][0],a[1][1])}},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.getSegments(),l=this.get("hasArc"),u=!1;if(i){var c=this.getTotalLength();u=Z1.isPointInStroke(s,o,e,n,c)}if(!u&&a)if(l)u=Uz(this,e,n);else{var f=this.attr("path"),d=Z1.extractPolygons(f);u=Hz(d.polygons,e,n)||Hz(d.polylines,e,n)}return u},t.prototype.createPath=function(e){var n=this.attr(),i=this.get("paramsCache");$z(this,e,n,i)},t.prototype.afterDrawPath=function(e){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(e),i&&i.draw(e)},t.prototype.getTotalLength=function(){var e=this.get("totalLength");return nt(e)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):e},t.prototype.getPoint=function(e){var n=this.get("tCache");n||(this._calculateCurve(),this._setTcache(),n=this.get("tCache"));var i,a,o=this.get("curve");if(!n||n.length===0)return o?{x:o[0][1],y:o[0][2]}:null;G(n,function(c,f){e>=c[0]&&e<=c[1]&&(i=(e-c[0])/(c[1]-c[0]),a=f)});var s=o[a];if(nt(s)||nt(a))return null;var l=s.length,u=o[a+1];return Nv.pointAt(s[l-2],s[l-1],u[1],u[2],u[3],u[4],u[5],u[6],i)},t.prototype._calculateCurve=function(){var e=this.attr().path;this.set("curve",Z1.pathToCurve(e))},t.prototype._setTcache=function(){var e=0,n=0,i=[],a,o,s,l,u=this.get("curve");if(!!u){if(G(u,function(c,f){s=u[f+1],l=c.length,s&&(e+=Nv.length(c[l-2],c[l-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",e),e===0){this.set("tCache",[]);return}G(u,function(c,f){s=u[f+1],l=c.length,s&&(a=[],a[0]=n/e,o=Nv.length(c[l-2],c[l-1],s[1],s[2],s[3],s[4],s[5],s[6]),n+=o||0,a[1]=n/e,i.push(a))}),this.set("tCache",i)}},t.prototype.getStartTangent=function(){var e=this.getSegments(),n;if(e.length>1){var i=e[0].currentPoint,a=e[1].currentPoint,o=e[1].startTangent;n=[],o?(n.push([i[0]-o[0],i[1]-o[1]]),n.push([i[0],i[1]])):(n.push([a[0],a[1]]),n.push([i[0],i[1]]))}return n},t.prototype.getEndTangent=function(){var e=this.getSegments(),n=e.length,i;if(n>1){var a=e[n-2].currentPoint,o=e[n-1].currentPoint,s=e[n-1].endTangent;i=[],s?(i.push([o[0]-s[0],o[1]-s[1]]),i.push([o[0],o[1]])):(i.push([a[0],a[1]]),i.push([o[0],o[1]]))}return i},t}(tl),rk=Upe;function Wz(r,t,e,n,i){var a=r.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=r[o][0],l=r[o][1],u=r[o+1][0],c=r[o+1][1];if(Fc(s,l,u,c,t,e,n))return!0}if(i){var f=r[0],d=r[a-1];if(Fc(f[0],f[1],d[0],d[1],t,e,n))return!0}return!1}var Vpe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.attr().points,l=!1;return i&&(l=Wz(s,o,e,n,!0)),!l&&a&&(l=Vz(s,e,n)),l},t.prototype.createPath=function(e){var n=this.attr(),i=n.points;if(!(i.length<2)){e.beginPath();for(var a=0;a<i.length;a++){var o=i[a];a===0?e.moveTo(o[0],o[1]):e.lineTo(o[0],o[1])}e.closePath()}},t}(tl),Hpe=Vpe,Wpe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),this.setArrow(),["points"].indexOf(e)!==-1&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.setArrow=function(){var e=this.attr(),n=this.attrs,i=n.points,a=n.startArrow,o=n.endArrow,s=i.length,l=i[0][0],u=i[0][1],c=i[s-1][0],f=i[s-1][1];a&&qA(this,e,i[1][0],i[1][1],l,u),o&&KA(this,e,i[s-2][0],i[s-2][1],c,f)},t.prototype.isFill=function(){return!1},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){if(!i||!o)return!1;var s=this.attr().points;return Wz(s,o,e,n,!1)},t.prototype.isStroke=function(){return!0},t.prototype.createPath=function(e){var n=this.attr(),i=n.points,a=n.startArrow,o=n.endArrow,s=i.length;if(!(i.length<2)){var l=i[0][0],u=i[0][1],c=i[s-1][0],f=i[s-1][1];if(a&&a.d){var d=yd(l,u,i[1][0],i[1][1],a.d);l+=d.dx,u+=d.dy}if(o&&o.d){var d=yd(i[s-2][0],i[s-2][1],c,f,o.d);c-=d.dx,f-=d.dy}e.beginPath(),e.moveTo(l,u);for(var h=0;h<s-1;h++){var v=i[h];e.lineTo(v[0],v[1])}e.lineTo(c,f)}},t.prototype.afterDrawPath=function(e){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(e),i&&i.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr().points,n=this.get("totalLength");return nt(n)?(this.set("totalLength",R$.length(e)),this.get("totalLength")):n},t.prototype.getPoint=function(e){var n=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return G(i,function(s,l){e>=s[0]&&e<=s[1]&&(a=(e-s[0])/(s[1]-s[0]),o=l)}),Ga.pointAt(n[o][0],n[o][1],n[o+1][0],n[o+1][1],a)},t.prototype._setTcache=function(){var e=this.attr().points;if(!(!e||e.length===0)){var n=this.getTotalLength();if(!(n<=0)){var i=0,a=[],o,s;G(e,function(l,u){e[u+1]&&(o=[],o[0]=i/n,s=Ga.length(l[0],l[1],e[u+1][0],e[u+1][1]),i+=s,o[1]=i/n,a.push(o))}),this.set("tCache",a)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,n=[];return n.push([e[1][0],e[1][1]]),n.push([e[0][0],e[0][1]]),n},t.prototype.getEndTangent=function(){var e=this.attr().points,n=e.length-1,i=[];return i.push([e[n-1][0],e[n-1][1]]),i.push([e[n][0],e[n][1]]),i},t}(tl),jpe=Wpe;function Ype(r,t,e,n,i,a,o){var s=i/2;return md(r-s,t-s,e,i,a,o)||md(r+e-s,t-s,i,n,a,o)||md(r+s,t+n-s,e,i,a,o)||md(r-s,t+s,i,n,a,o)}function Xpe(r,t,e,n,i,a,o,s){return Fc(r+i,t,r+e-i,t,a,o,s)||Fc(r+e,t+i,r+e,t+n-i,a,o,s)||Fc(r+e-i,t+n,r+i,t+n,a,o,s)||Fc(r,t+n-i,r,t+i,a,o,s)||ny(r+e-i,t+i,i,1.5*Math.PI,2*Math.PI,a,o,s)||ny(r+e-i,t+n-i,i,0,.5*Math.PI,a,o,s)||ny(r+i,t+n-i,i,.5*Math.PI,Math.PI,a,o,s)||ny(r+i,t+i,i,Math.PI,1.5*Math.PI,a,o,s)}var qpe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.attr(),l=s.x,u=s.y,c=s.width,f=s.height,d=s.radius;if(d){var v=!1;return i&&(v=Xpe(l,u,c,f,d,o,e,n)),!v&&a&&(v=Uz(this,e,n)),v}else{var h=o/2;if(a&&i)return md(l-h,u-h,c+h,f+h,e,n);if(a)return md(l,u,c,f,e,n);if(i)return Ype(l,u,c,f,o,e,n)}},t.prototype.createPath=function(e){var n=this.attr(),i=n.x,a=n.y,o=n.width,s=n.height,l=n.radius;if(e.beginPath(),l===0)e.rect(i,a,o,s);else{var u=ype(l),c=u[0],f=u[1],d=u[2],h=u[3];e.moveTo(i+c,a),e.lineTo(i+o-f,a),f!==0&&e.arc(i+o-f,a+f,f,-Math.PI/2,0),e.lineTo(i+o,a+s-d),d!==0&&e.arc(i+o-d,a+s-d,d,0,Math.PI/2),e.lineTo(i+h,a+s),h!==0&&e.arc(i+h,a+s-h,h,Math.PI/2,Math.PI),e.lineTo(i,a+c),c!==0&&e.arc(i+c,a+c,c,Math.PI,Math.PI*1.5),e.closePath()}},t}(tl),Kpe=qpe,Zpe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.isOnlyHitBox=function(){return!0},t.prototype.initAttrs=function(e){this._assembleFont(),e.text&&this._setText(e.text)},t.prototype._assembleFont=function(){var e=this.attrs;e.font=D1(e)},t.prototype._setText=function(e){var n=null;ot(e)&&e.indexOf(`
`)!==-1&&(n=e.split(`
`)),this.set("textArr",n)},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),e.startsWith("font")&&this._assembleFont(),e==="text"&&this._setText(n)},t.prototype._getSpaceingY=function(){var e=this.attrs,n=e.lineHeight,i=e.fontSize*1;return n?n-i:i*.14},t.prototype._drawTextArr=function(e,n,i){var a=this.attrs,o=a.textBaseline,s=a.x,l=a.y,u=a.fontSize*1,c=this._getSpaceingY(),f=P1(a.text,a.fontSize,a.lineHeight),d;G(n,function(h,v){d=l+v*(c+u)-f+u,o==="middle"&&(d+=f-u-(f-u)/2),o==="top"&&(d+=f-u),nt(h)||(i?e.fillText(h,s,d):e.strokeText(h,s,d))})},t.prototype._drawText=function(e,n){var i=this.attr(),a=i.x,o=i.y,s=this.get("textArr");if(s)this._drawTextArr(e,s,n);else{var l=i.text;nt(l)||(n?e.fillText(l,a,o):e.strokeText(l,a,o))}},t.prototype.strokeAndFill=function(e){var n=this.attrs,i=n.lineWidth,a=n.opacity,o=n.strokeOpacity,s=n.fillOpacity;this.isStroke()&&i>0&&(!nt(o)&&o!==1&&(e.globalAlpha=a),this.stroke(e)),this.isFill()&&(!nt(s)&&s!==1?(e.globalAlpha=s,this.fill(e),e.globalAlpha=a):this.fill(e)),this.afterDrawPath(e)},t.prototype.fill=function(e){this._drawText(e,!0)},t.prototype.stroke=function(e){this._drawText(e,!1)},t}(tl),Qpe=Zpe;function Jpe(r,t){if(t){var e=g1(t);return Su(e,r)}return r}function jz(r,t,e){var n=r.getTotalMatrix();if(n){var i=Jpe([t,e,1],n),a=i[0],o=i[1];return[a,o]}return[t,e]}function Yz(r,t,e){if(r.isCanvas&&r.isCanvas())return!0;if(!Om(r)||r.cfg.isInView===!1)return!1;if(r.cfg.clipShape){var n=jz(r,t,e),i=n[0],a=n[1];if(r.isClipped(i,a))return!1}var o=r.cfg.cacheCanvasBBox||r.getCanvasBBox();return t>=o.minX&&t<=o.maxX&&e>=o.minY&&e<=o.maxY}function Xz(r,t,e){if(!Yz(r,t,e))return null;for(var n=null,i=r.getChildren(),a=i.length,o=a-1;o>=0;o--){var s=i[o];if(s.isGroup())n=Xz(s,t,e);else if(Yz(s,t,e)){var l=s,u=jz(s,t,e),c=u[0],f=u[1];l.isInShape(c,f)&&(n=s)}if(n)break}return n}var _u=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e},t.prototype.onCanvasChange=function(e){(e==="attr"||e==="sort"||e==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},t.prototype.getShapeBase=function(){return ix},t.prototype.getGroupBase=function(){return ek},t.prototype.getPixelRatio=function(){var e=this.get("pixelRatio")||upe();return e>=1?Math.ceil(e):1},t.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},t.prototype.createDom=function(){var e=document.createElement("canvas"),n=e.getContext("2d");return this.set("context",n),e},t.prototype.setDOMSize=function(e,n){r.prototype.setDOMSize.call(this,e,n);var i=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*e,a.height=o*n,o>1&&i.scale(o,o)},t.prototype.clear=function(){r.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),n=this.get("el");e.clearRect(0,0,n.width,n.height)},t.prototype.getShape=function(e,n){var i;return this.get("quickHit")?i=Xz(this,e,n):i=r.prototype.getShape.call(this,e,n,null),i},t.prototype._getRefreshRegion=function(){var e=this.get("refreshElements"),n=this.getViewRange(),i;if(e.length&&e[0]===this)i=n;else if(i=Spe(e),i){i.minX=Math.floor(i.minX),i.minY=Math.floor(i.minY),i.maxX=Math.ceil(i.maxX),i.maxY=Math.ceil(i.maxY),i.maxY+=1;var a=this.get("clipView");a&&(i=Cpe(i,n))}return i},t.prototype.refreshElement=function(e){var n=this.get("refreshElements");n.push(e)},t.prototype._clearFrame=function(){var e=this.get("drawFrame");e&&($B(e),this.set("drawFrame",null),this.set("refreshElements",[]))},t.prototype.draw=function(){var e=this.get("drawFrame");this.get("autoDraw")&&e||this._startDraw()},t.prototype._drawAll=function(){var e=this.get("context"),n=this.get("el"),i=this.getChildren();e.clearRect(0,0,n.width,n.height),$v(e,this),ZA(e,i),this.set("refreshElements",[])},t.prototype._drawRegion=function(){var e=this.get("context"),n=this.get("refreshElements"),i=this.getChildren(),a=this._getRefreshRegion();a?(e.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),e.save(),e.beginPath(),e.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),e.clip(),$v(e,this),bpe(this,i,a),ZA(e,i,a),e.restore()):n.length&&Bz(n),G(n,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},t.prototype._startDraw=function(){var e=this,n=this.get("drawFrame");n||(n=BB(function(){e.get("localRefresh")?e._drawRegion():e._drawAll(),e.set("drawFrame",null)}),this.set("drawFrame",n))},t.prototype.skipDraw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.width=0,e.height=0,e.parentNode.removeChild(e)},t}(E1),ege="0.5.12",tge=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Shape:ix,version:ege,Canvas:_u,Group:ek,getArcParams:j1,Event:Rm,Base:ZT,AbstractCanvas:E1,AbstractGroup:_1,AbstractShape:T1,getBBoxMethod:A1,getTextHeight:P1,assembleFont:D1,isAllowCapture:Om,multiplyVec2:Su,invert:g1,getOffScreenContext:I1,PathUtil:KT}),nk={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},En={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function Ls(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function qz(r){var t=nk[r.type],e=r.getParent();if(!t)throw new Error("the type "+r.type+" is not supported by svg");var n=Ls(t);if(r.get("id")&&(n.id=r.get("id")),r.set("el",n),r.set("attrs",{}),e){var i=e.get("el");i||(i=e.createDom(),e.set("el",i)),i.appendChild(n)}return n}function Kz(r,t){var e=r.get("el"),n=UB(e.children).sort(t),i=document.createDocumentFragment();n.forEach(function(a){i.appendChild(a)}),e.appendChild(i)}function rge(r,t){var e=r.parentNode,n=Array.from(e.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),i=n[t],a=n.indexOf(r);if(i){if(a>t)e.insertBefore(r,i);else if(a<t){var o=n[t+1];o?e.insertBefore(r,o):e.appendChild(r)}}else e.appendChild(r)}function nge(r,t){var e=r.cfg.el,n=r.attr(),i={dx:n.shadowOffsetX,dy:n.shadowOffsetY,blur:n.shadowBlur,color:n.shadowColor};if(!i.dx&&!i.dy&&!i.blur&&!i.color)e.removeAttribute("filter");else{var a=t.find("filter",i);a||(a=t.addShadow(i)),e.setAttribute("filter","url(#"+a+")")}}function iy(r){var t=r.attr().matrix;if(t){for(var e=r.cfg.el,n=[],i=0;i<9;i+=3)n.push(t[i]+","+t[i+1]);n=n.join(","),n.indexOf("NaN")===-1?e.setAttribute("transform","matrix("+n+")"):console.warn("invalid matrix:",t)}}function ay(r,t){var e=r.getClip(),n=r.get("el");if(!e)n.removeAttribute("clip-path");else if(e&&!n.hasAttribute("clip-path")){qz(e),e.createPath(t);var i=t.addClip(e);n.setAttribute("clip-path","url(#"+i+")")}}function Zz(r,t){t.forEach(function(e){e.draw(r)})}function Qz(r,t){var e=r.get("canvas");if(e&&e.get("autoDraw")){var n=e.get("context"),i=r.getParent(),a=i?i.getChildren():[e],o=r.get("el");if(t==="remove"){var s=r.get("isClipShape");if(s){var l=o&&o.parentNode,u=l&&l.parentNode;l&&u&&u.removeChild(l)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(t==="show")o.setAttribute("visibility","visible");else if(t==="hide")o.setAttribute("visibility","hidden");else if(t==="zIndex")rge(o,a.indexOf(r));else if(t==="sort"){var c=r.get("children");c&&c.length&&Kz(r,function(f,d){return c.indexOf(f)-c.indexOf(d)?1:0})}else t==="clear"?o&&(o.innerHTML=""):t==="matrix"?iy(r):t==="clip"?ay(r,n):t==="attr"||t==="add"&&r.draw(n)}}var ik=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.isEntityGroup=function(){return!0},t.prototype.createDom=function(){var e=Ls("g");this.set("el",e);var n=this.getParent();if(n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(e)}return e},t.prototype.afterAttrsChange=function(e){r.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var i=n.get("context");this.createPath(i,e)}},t.prototype.onCanvasChange=function(e){Qz(this,e)},t.prototype.getShapeBase=function(){return ax},t.prototype.getGroupBase=function(){return t},t.prototype.draw=function(e){var n=this.getChildren(),i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||this.createDom(),ay(this,e),this.createPath(e),n.length&&Zz(e,n))},t.prototype.createPath=function(e,n){var i=this.attr(),a=this.get("el");G(n||i,function(o,s){En[s]&&a.setAttribute(En[s],o)}),iy(this)},t}(_1),ige=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="svg",e.canFill=!1,e.canStroke=!1,e}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.afterAttrsChange=function(e){r.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var i=n.get("context");this.draw(i,e)}},t.prototype.getShapeBase=function(){return ax},t.prototype.getGroupBase=function(){return ik},t.prototype.onCanvasChange=function(e){Qz(this,e)},t.prototype.calculateBBox=function(){var e=this.get("el"),n=null;if(e)n=e.getBBox();else{var i=A1(this.get("type"));i&&(n=i(this))}if(n){var a=n.x,o=n.y,s=n.width,l=n.height,u=this.getHitLineWidth(),c=u/2,f=a-c,d=o-c,h=a+s+c,v=o+l+c;return{x:f,y:d,minX:f,minY:d,maxX:h,maxY:v,width:s+u,height:l+u}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},t.prototype.isFill=function(){var e=this.attr(),n=e.fill,i=e.fillStyle;return(n||i||this.isClipShape())&&this.canFill},t.prototype.isStroke=function(){var e=this.attr(),n=e.stroke,i=e.strokeStyle;return(n||i)&&this.canStroke},t.prototype.draw=function(e,n){var i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||qz(this),ay(this,e),this.createPath(e,n),this.shadow(e,n),this.strokeAndFill(e,n),this.transform(n))},t.prototype.createPath=function(e,n){},t.prototype.strokeAndFill=function(e,n){var i=n||this.attr(),a=i.fill,o=i.fillStyle,s=i.stroke,l=i.strokeStyle,u=i.fillOpacity,c=i.strokeOpacity,f=i.lineWidth,d=this.get("el");this.canFill&&(n?"fill"in i?this._setColor(e,"fill",a):"fillStyle"in i&&this._setColor(e,"fill",o):this._setColor(e,"fill",a||o),u&&d.setAttribute(En.fillOpacity,u)),this.canStroke&&f>0&&(n?"stroke"in i?this._setColor(e,"stroke",s):"strokeStyle"in i&&this._setColor(e,"stroke",l):this._setColor(e,"stroke",s||l),c&&d.setAttribute(En.strokeOpacity,c),f&&d.setAttribute(En.lineWidth,f))},t.prototype._setColor=function(e,n,i){var a=this.get("el");if(!i){a.setAttribute(En[n],"none");return}if(i=i.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(i)){var o=e.find("gradient",i);o||(o=e.addGradient(i)),a.setAttribute(En[n],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(i)){var o=e.find("pattern",i);o||(o=e.addPattern(i)),a.setAttribute(En[n],"url(#"+o+")")}else a.setAttribute(En[n],i)},t.prototype.shadow=function(e,n){var i=this.attr(),a=n||i,o=a.shadowOffsetX,s=a.shadowOffsetY,l=a.shadowBlur,u=a.shadowColor;(o||s||l||u)&&nge(this,e)},t.prototype.transform=function(e){var n=this.attr(),i=(e||n).matrix;i&&iy(this)},t.prototype.isInShape=function(e,n){return this.isPointInPath(e,n)},t.prototype.isPointInPath=function(e,n){var i=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=e+o.left,l=n+o.top,u=document.elementFromPoint(s,l);return!!(u&&u.isEqualNode(i))},t.prototype.getHitLineWidth=function(){var e=this.attrs,n=e.lineWidth,i=e.lineAppendWidth;return this.isStroke()?n+i:0},t}(T1),Fs=ige,age=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="circle",e.canFill=!0,e.canStroke=!0,e}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,r:0})},t.prototype.createPath=function(e,n){var i=this.attr(),a=this.get("el");G(n||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):En[s]&&a.setAttribute(En[s],o)})},t}(Fs),oge=age,sge=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="dom",e.canFill=!1,e.canStroke=!1,e}return t.prototype.createPath=function(e,n){var i=this.attr(),a=this.get("el");if(G(n||i,function(u,c){En[c]&&a.setAttribute(En[c],u)}),typeof i.html=="function"){var o=i.html.call(this,i);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,l=s.length-1;l>=0;l--)a.removeChild(s[l]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=i.html},t}(Fs),lge=sge,uge=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="ellipse",e.canFill=!0,e.canStroke=!0,e}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,rx:0,ry:0})},t.prototype.createPath=function(e,n){var i=this.attr(),a=this.get("el");G(n||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):En[s]&&a.setAttribute(En[s],o)})},t}(Fs),cge=uge,fge=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="image",e.canFill=!1,e.canStroke=!1,e}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,width:0,height:0})},t.prototype.createPath=function(e,n){var i=this,a=this.attr(),o=this.get("el");G(n||a,function(s,l){l==="img"?i._setImage(a.img):En[l]&&o.setAttribute(En[l],s)})},t.prototype.setAttr=function(e,n){this.attrs[e]=n,e==="img"&&this._setImage(n)},t.prototype._setImage=function(e){var n=this.attr(),i=this.get("el");if(ot(e))i.setAttribute("href",e);else if(e instanceof window.Image)n.width||(i.setAttribute("width",e.width),this.attr("width",e.width)),n.height||(i.setAttribute("height",e.height),this.attr("height",e.height)),i.setAttribute("href",e.src);else if(e instanceof HTMLElement&&ot(e.nodeName)&&e.nodeName.toUpperCase()==="CANVAS")i.setAttribute("href",e.toDataURL());else if(e instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+e.width),a.setAttribute("height",""+e.height),a.getContext("2d").putImageData(e,0,0),n.width||(i.setAttribute("width",""+e.width),this.attr("width",e.width)),n.height||(i.setAttribute("height",""+e.height),this.attr("height",e.height)),i.setAttribute("href",a.toDataURL())}},t}(Fs),dge=fge,hge=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="line",e.canFill=!1,e.canStroke=!0,e}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,n){var i=this.attr(),a=this.get("el");G(n||i,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var l=an(o)?e.addArrow(i,En[s]):e.getDefaultArrow(i,En[s]);a.setAttribute(En[s],"url(#"+l+")")}else a.removeAttribute(En[s]);else En[s]&&a.setAttribute(En[s],o)})},t.prototype.getTotalLength=function(){var e=this.attr(),n=e.x1,i=e.y1,a=e.x2,o=e.y2;return Ga.length(n,i,a,o)},t.prototype.getPoint=function(e){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2;return Ga.pointAt(i,a,o,s,e)},t}(Fs),vge=hge,Q1={circle:function(r,t,e){return[["M",r,t],["m",-e,0],["a",e,e,0,1,0,e*2,0],["a",e,e,0,1,0,-e*2,0]]},square:function(r,t,e){return[["M",r-e,t-e],["L",r+e,t-e],["L",r+e,t+e],["L",r-e,t+e],["Z"]]},diamond:function(r,t,e){return[["M",r-e,t],["L",r,t-e],["L",r+e,t],["L",r,t+e],["Z"]]},triangle:function(r,t,e){var n=e*Math.sin(1/3*Math.PI);return[["M",r-e,t+n],["L",r,t-n],["L",r+e,t+n],["z"]]},triangleDown:function(r,t,e){var n=e*Math.sin(1/3*Math.PI);return[["M",r-e,t-n],["L",r+e,t-n],["L",r,t+n],["Z"]]}},Jz={get:function(r){return Q1[r]},register:function(r,t){Q1[r]=t},remove:function(r){delete Q1[r]},getAll:function(){return Q1}},pge=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="marker",e.canFill=!0,e.canStroke=!0,e}return t.prototype.createPath=function(e){var n=this.get("el");n.setAttribute("d",this._assembleMarker())},t.prototype._assembleMarker=function(){var e=this._getPath();return Qe(e)?e.map(function(n){return n.join(" ")}).join(""):e},t.prototype._getPath=function(){var e=this.attr(),n=e.x,i=e.y,a=e.r||e.radius,o=e.symbol||"circle",s;return Kt(o)?s=o:s=Jz.get(o),s?s(n,i,a):(console.warn(s+" symbol is not exist."),null)},t.symbolsFactory=Jz,t}(Fs),gge=pge,mge=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="path",e.canFill=!0,e.canStroke=!0,e}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,n){var i=this,a=this.attr(),o=this.get("el");G(n||a,function(s,l){if(l==="path"&&Qe(s))o.setAttribute("d",i._formatPath(s));else if(l==="startArrow"||l==="endArrow")if(s){var u=an(s)?e.addArrow(a,En[l]):e.getDefaultArrow(a,En[l]);o.setAttribute(En[l],"url(#"+u+")")}else o.removeAttribute(En[l]);else En[l]&&o.setAttribute(En[l],s)})},t.prototype._formatPath=function(e){var n=e.map(function(i){return i.join(" ")}).join("");return~n.indexOf("NaN")?"":n},t.prototype.getTotalLength=function(){var e=this.get("el");return e?e.getTotalLength():null},t.prototype.getPoint=function(e){var n=this.get("el"),i=this.getTotalLength();if(i===0)return null;var a=n?n.getPointAtLength(e*i):null;return a?{x:a.x,y:a.y}:null},t}(Fs),yge=mge,bge=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="polygon",e.canFill=!0,e.canStroke=!0,e}return t.prototype.createPath=function(e,n){var i=this.attr(),a=this.get("el");G(n||i,function(o,s){s==="points"&&Qe(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):En[s]&&a.setAttribute(En[s],o)})},t}(Fs),xge=bge,wge=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="polyline",e.canFill=!0,e.canStroke=!0,e}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{startArrow:!1,endArrow:!1})},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),["points"].indexOf(e)!==-1&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.createPath=function(e,n){var i=this.attr(),a=this.get("el");G(n||i,function(o,s){s==="points"&&Qe(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):En[s]&&a.setAttribute(En[s],o)})},t.prototype.getTotalLength=function(){var e=this.attr().points,n=this.get("totalLength");return nt(n)?(this.set("totalLength",R$.length(e)),this.get("totalLength")):n},t.prototype.getPoint=function(e){var n=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return G(i,function(s,l){e>=s[0]&&e<=s[1]&&(a=(e-s[0])/(s[1]-s[0]),o=l)}),Ga.pointAt(n[o][0],n[o][1],n[o+1][0],n[o+1][1],a)},t.prototype._setTcache=function(){var e=this.attr().points;if(!(!e||e.length===0)){var n=this.getTotalLength();if(!(n<=0)){var i=0,a=[],o,s;G(e,function(l,u){e[u+1]&&(o=[],o[0]=i/n,s=Ga.length(l[0],l[1],e[u+1][0],e[u+1][1]),i+=s,o[1]=i/n,a.push(o))}),this.set("tCache",a)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,n=[];return n.push([e[1][0],e[1][1]]),n.push([e[0][0],e[0][1]]),n},t.prototype.getEndTangent=function(){var e=this.attr().points,n=e.length-1,i=[];return i.push([e[n-1][0],e[n-1][1]]),i.push([e[n][0],e[n][1]]),i},t}(Fs),Sge=wge;function Cge(r){var t=0,e=0,n=0,i=0;return Qe(r)?r.length===1?t=e=n=i=r[0]:r.length===2?(t=n=r[0],e=i=r[1]):r.length===3?(t=r[0],e=i=r[1],n=r[2]):(t=r[0],e=r[1],n=r[2],i=r[3]):t=e=n=i=r,{r1:t,r2:e,r3:n,r4:i}}var Ege=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="rect",e.canFill=!0,e.canStroke=!0,e}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.createPath=function(e,n){var i=this,a=this.attr(),o=this.get("el"),s=!1,l=["x","y","width","height","radius"];G(n||a,function(u,c){l.indexOf(c)!==-1&&!s?(o.setAttribute("d",i._assembleRect(a)),s=!0):l.indexOf(c)===-1&&En[c]&&o.setAttribute(En[c],u)})},t.prototype._assembleRect=function(e){var n=e.x,i=e.y,a=e.width,o=e.height,s=e.radius;if(!s)return"M "+n+","+i+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var l=Cge(s);Qe(s)?s.length===1?l.r1=l.r2=l.r3=l.r4=s[0]:s.length===2?(l.r1=l.r3=s[0],l.r2=l.r4=s[1]):s.length===3?(l.r1=s[0],l.r2=l.r4=s[1],l.r3=s[2]):(l.r1=s[0],l.r2=s[1],l.r3=s[2],l.r4=s[3]):l.r1=l.r2=l.r3=l.r4=s;var u=[["M "+(n+l.r1)+","+i],["l "+(a-l.r1-l.r2)+",0"],["a "+l.r2+","+l.r2+",0,0,1,"+l.r2+","+l.r2],["l 0,"+(o-l.r2-l.r3)],["a "+l.r3+","+l.r3+",0,0,1,"+-l.r3+","+l.r3],["l "+(l.r3+l.r4-a)+",0"],["a "+l.r4+","+l.r4+",0,0,1,"+-l.r4+","+-l.r4],["l 0,"+(l.r4+l.r1-o)],["a "+l.r1+","+l.r1+",0,0,1,"+l.r1+","+-l.r1],["z"]];return u.join(" ")},t}(Fs),_ge=Ege,e4=.3,Tge={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},Age={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},kge={left:"left",start:"left",center:"middle",right:"end",end:"end"},Mge=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="text",e.canFill=!0,e.canStroke=!0,e}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.createPath=function(e,n){var i=this,a=this.attr(),o=this.get("el");this._setFont(),G(n||a,function(s,l){l==="text"?i._setText(""+s):l==="matrix"&&s?iy(i):En[l]&&o.setAttribute(En[l],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},t.prototype._setFont=function(){var e=this.get("el"),n=this.attr(),i=n.textBaseline,a=n.textAlign,o=QT();o&&o.name==="firefox"?e.setAttribute("dominant-baseline",Age[i]||"alphabetic"):e.setAttribute("alignment-baseline",Tge[i]||"baseline"),e.setAttribute("text-anchor",kge[a]||"left")},t.prototype._setText=function(e){var n=this.get("el"),i=this.attr(),a=i.x,o=i.textBaseline,s=o===void 0?"bottom":o;if(!e)n.innerHTML="";else if(~e.indexOf(`
`)){var l=e.split(`
`),u=l.length-1,c="";G(l,function(f,d){d===0?s==="alphabetic"?c+='<tspan x="'+a+'" dy="'+-u+'em">'+f+"</tspan>":s==="top"?c+='<tspan x="'+a+'" dy="0.9em">'+f+"</tspan>":s==="middle"?c+='<tspan x="'+a+'" dy="'+-(u-1)/2+'em">'+f+"</tspan>":s==="bottom"?c+='<tspan x="'+a+'" dy="-'+(u+e4)+'em">'+f+"</tspan>":s==="hanging"&&(c+='<tspan x="'+a+'" dy="'+(-(u-1)-e4)+'em">'+f+"</tspan>"):c+='<tspan x="'+a+'" dy="1em">'+f+"</tspan>"}),n.innerHTML=c}else n.innerHTML=e},t}(Fs),Ige=Mge,Pge=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Dge=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Rge=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function t4(r){var t=r.match(Rge);if(!t)return"";var e="";return t.sort(function(n,i){return n=n.split(":"),i=i.split(":"),Number(n[0])-Number(i[0])}),G(t,function(n){n=n.split(":"),e+='<stop offset="'+n[0]+'" stop-color="'+n[1]+'"></stop>'}),e}function Oge(r,t){var e=Pge.exec(r),n=Ux(Vx(parseFloat(e[1])),Math.PI*2),i=e[2],a,o;n>=0&&n<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=n&&n<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=n&&n<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(n),l=s*s,u=(o.x-a.x+s*(o.y-a.y))/(l+1)+a.x,c=s*(o.x-a.x+s*(o.y-a.y))/(l+1)+a.y;t.setAttribute("x1",a.x),t.setAttribute("y1",a.y),t.setAttribute("x2",u),t.setAttribute("y2",c),t.innerHTML=t4(i)}function Lge(r,t){var e=Dge.exec(r),n=parseFloat(e[1]),i=parseFloat(e[2]),a=parseFloat(e[3]),o=e[4];t.setAttribute("cx",n),t.setAttribute("cy",i),t.setAttribute("r",a),t.innerHTML=t4(o)}var Fge=function(){function r(t){this.cfg={};var e=null,n=Rs("gradient_");return t.toLowerCase()[0]==="l"?(e=Ls("linearGradient"),Oge(t,e)):(e=Ls("radialGradient"),Lge(t,e)),e.setAttribute("id",n),this.el=e,this.id=n,this.cfg=t,this}return r.prototype.match=function(t,e){return this.cfg===e},r}(),Nge={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},Bge={x:"-40%",y:"-40%",width:"200%",height:"200%"},$ge=function(){function r(t){this.type="filter",this.cfg={},this.type="filter";var e=Ls("filter");return G(Bge,function(n,i){e.setAttribute(i,n)}),this.el=e,this.id=Rs("filter_"),this.el.id=this.id,this.cfg=t,this._parseShadow(t,e),this}return r.prototype.match=function(t,e){if(this.type!==t)return!1;var n=!0,i=this.cfg;return G(Object.keys(i),function(a){if(i[a]!==e[a])return n=!1,!1}),n},r.prototype.update=function(t,e){var n=this.cfg;return n[Nge[t]]=e,this._parseShadow(n,this.el),this},r.prototype._parseShadow=function(t,e){var n=`<feDropShadow
      dx="`+(t.dx||0)+`"
      dy="`+(t.dy||0)+`"
      stdDeviation="`+(t.blur?t.blur/10:0)+`"
      flood-color="`+(t.color?t.color:"#000")+`"
      flood-opacity="`+(t.opacity?t.opacity:1)+`"
      />`;e.innerHTML=n},r}(),r4=function(){function r(t,e){this.cfg={};var n=Ls("marker"),i=Rs("marker_");n.setAttribute("id",i);var a=Ls("path");a.setAttribute("stroke",t.stroke||"none"),a.setAttribute("fill",t.fill||"none"),n.appendChild(a),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=a,this.id=i;var o=t[e==="marker-start"?"startArrow":"endArrow"];return this.stroke=t.stroke||"#000",o===!0?this._setDefaultPath(e,a):(this.cfg=o,this._setMarker(t.lineWidth,a)),this}return r.prototype.match=function(){return!1},r.prototype._setDefaultPath=function(t,e){var n=this.el;e.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY",""+5)},r.prototype._setMarker=function(t,e){var n=this.el,i=this.cfg.path,a=this.cfg.d;Qe(i)&&(i=i.map(function(o){return o.join(" ")}).join("")),e.setAttribute("d",i),n.appendChild(e),a&&n.setAttribute("refX",""+a/t)},r.prototype.update=function(t){var e=this.child;e.attr?e.attr("fill",t):e.setAttribute("fill",t)},r}(),zge=function(){function r(t){this.type="clip",this.cfg={};var e=Ls("clipPath");this.el=e,this.id=Rs("clip_"),e.id=this.id;var n=t.cfg.el;return e.appendChild(n),this.cfg=t,this}return r.prototype.match=function(){return!1},r.prototype.remove=function(){var t=this.el;t.parentNode.removeChild(t)},r}(),Gge=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Uge=function(){function r(t){this.cfg={};var e=Ls("pattern");e.setAttribute("patternUnits","userSpaceOnUse");var n=Ls("image");e.appendChild(n);var i=Rs("pattern_");e.id=i,this.el=e,this.id=i,this.cfg=t;var a=Gge.exec(t),o=a[2];n.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function l(){e.setAttribute("width",""+s.width),e.setAttribute("height",""+s.height)}return s.complete?l():(s.onload=l,s.src=s.src),this}return r.prototype.match=function(t,e){return this.cfg===e},r}(),Vge=function(){function r(t){var e=Ls("defs"),n=Rs("defs_");e.id=n,t.appendChild(e),this.children=[],this.defaultArrow={},this.el=e,this.canvas=t}return r.prototype.find=function(t,e){for(var n=this.children,i=null,a=0;a<n.length;a++)if(n[a].match(t,e)){i=n[a].id;break}return i},r.prototype.findById=function(t){for(var e=this.children,n=null,i=0;i<e.length;i++)if(e[i].id===t){n=e[i];break}return n},r.prototype.add=function(t){this.children.push(t),t.canvas=this.canvas,t.parent=this},r.prototype.getDefaultArrow=function(t,e){var n=t.stroke||t.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var i=new r4(t,e);return this.defaultArrow[n]=i,this.el.appendChild(i.el),this.add(i),i.id},r.prototype.addGradient=function(t){var e=new Fge(t);return this.el.appendChild(e.el),this.add(e),e.id},r.prototype.addArrow=function(t,e){var n=new r4(t,e);return this.el.appendChild(n.el),this.add(n),n.id},r.prototype.addShadow=function(t){var e=new $ge(t);return this.el.appendChild(e.el),this.add(e),e.id},r.prototype.addPattern=function(t){var e=new Uge(t);return this.el.appendChild(e.el),this.add(e),e.id},r.prototype.addClip=function(t){var e=new zge(t);return this.el.appendChild(e.el),this.add(e),e.id},r}(),zv=function(r){Ie(t,r);function t(e){return r.call(this,A(A({},e),{autoDraw:!0,renderer:"svg"}))||this}return t.prototype.getShapeBase=function(){return ax},t.prototype.getGroupBase=function(){return ik},t.prototype.getShape=function(e,n,i){var a=i.target||i.srcElement;if(!nk[a.tagName]){for(var o=a.parentNode;o&&!nk[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},t.prototype.createDom=function(){var e=Ls("svg"),n=new Vge(e);return e.setAttribute("width",""+this.get("width")),e.setAttribute("height",""+this.get("height")),this.set("context",n),e},t.prototype.onCanvasChange=function(e){var n=this.get("context"),i=this.get("el");if(e==="sort"){var a=this.get("children");a&&a.length&&Kz(this,function(s,l){return a.indexOf(s)-a.indexOf(l)?1:0})}else if(e==="clear"){if(i){i.innerHTML="";var o=n.el;o.innerHTML="",i.appendChild(o)}}else e==="matrix"?iy(this):e==="clip"?ay(this,n):e==="changeSize"&&(i.setAttribute("width",""+this.get("width")),i.setAttribute("height",""+this.get("height")))},t.prototype.draw=function(){var e=this.get("context"),n=this.getChildren();ay(this,e),n.length&&Zz(e,n)},t}(E1),Hge="0.5.6",Wge=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Shape:ax,version:Hge,Canvas:zv,Group:ik,Event:Rm,Base:ZT,AbstractCanvas:E1,AbstractGroup:_1,AbstractShape:T1,getBBoxMethod:A1,getTextHeight:P1,assembleFont:D1,isAllowCapture:Om,multiplyVec2:Su,invert:g1,getOffScreenContext:I1,PathUtil:KT}),oy={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},jge=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")},sy=$r(function(r){var t=Array.prototype.concat,e=Array.prototype.slice,n=r.exports=function(a){for(var o=[],s=0,l=a.length;s<l;s++){var u=a[s];jge(u)?o=t.call(o,e.call(u)):o.push(u)}return o};n.wrap=function(i){return function(){return i(n(arguments))}}}),bd=$r(function(r){var t=Object.hasOwnProperty,e={};for(var n in oy)t.call(oy,n)&&(e[oy[n]]=n);var i=r.exports={to:{},get:{}};i.get=function(s){var l=s.substring(0,3).toLowerCase(),u,c;switch(l){case"hsl":u=i.get.hsl(s),c="hsl";break;case"hwb":u=i.get.hwb(s),c="hwb";break;default:u=i.get.rgb(s),c="rgb";break}return u?{model:c,value:u}:null},i.get.rgb=function(s){if(!s)return null;var l=/^#([a-f0-9]{3,4})$/i,u=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,c=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,f=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,d=/^(\w+)$/,h=[0,0,0,1],v,p,g;if(v=s.match(u)){for(g=v[2],v=v[1],p=0;p<3;p++){var m=p*2;h[p]=parseInt(v.slice(m,m+2),16)}g&&(h[3]=parseInt(g,16)/255)}else if(v=s.match(l)){for(v=v[1],g=v[3],p=0;p<3;p++)h[p]=parseInt(v[p]+v[p],16);g&&(h[3]=parseInt(g+g,16)/255)}else if(v=s.match(c)){for(p=0;p<3;p++)h[p]=parseInt(v[p+1],0);v[4]&&(v[5]?h[3]=parseFloat(v[4])*.01:h[3]=parseFloat(v[4]))}else if(v=s.match(f)){for(p=0;p<3;p++)h[p]=Math.round(parseFloat(v[p+1])*2.55);v[4]&&(v[5]?h[3]=parseFloat(v[4])*.01:h[3]=parseFloat(v[4]))}else return(v=s.match(d))?v[1]==="transparent"?[0,0,0,0]:t.call(oy,v[1])?(h=oy[v[1]],h[3]=1,h):null:null;for(p=0;p<3;p++)h[p]=a(h[p],0,255);return h[3]=a(h[3],0,1),h},i.get.hsl=function(s){if(!s)return null;var l=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,u=s.match(l);if(u){var c=parseFloat(u[4]),f=(parseFloat(u[1])%360+360)%360,d=a(parseFloat(u[2]),0,100),h=a(parseFloat(u[3]),0,100),v=a(isNaN(c)?1:c,0,1);return[f,d,h,v]}return null},i.get.hwb=function(s){if(!s)return null;var l=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,u=s.match(l);if(u){var c=parseFloat(u[4]),f=(parseFloat(u[1])%360+360)%360,d=a(parseFloat(u[2]),0,100),h=a(parseFloat(u[3]),0,100),v=a(isNaN(c)?1:c,0,1);return[f,d,h,v]}return null},i.to.hex=function(){var s=sy(arguments);return"#"+o(s[0])+o(s[1])+o(s[2])+(s[3]<1?o(Math.round(s[3]*255)):"")},i.to.rgb=function(){var s=sy(arguments);return s.length<4||s[3]===1?"rgb("+Math.round(s[0])+", "+Math.round(s[1])+", "+Math.round(s[2])+")":"rgba("+Math.round(s[0])+", "+Math.round(s[1])+", "+Math.round(s[2])+", "+s[3]+")"},i.to.rgb.percent=function(){var s=sy(arguments),l=Math.round(s[0]/255*100),u=Math.round(s[1]/255*100),c=Math.round(s[2]/255*100);return s.length<4||s[3]===1?"rgb("+l+"%, "+u+"%, "+c+"%)":"rgba("+l+"%, "+u+"%, "+c+"%, "+s[3]+")"},i.to.hsl=function(){var s=sy(arguments);return s.length<4||s[3]===1?"hsl("+s[0]+", "+s[1]+"%, "+s[2]+"%)":"hsla("+s[0]+", "+s[1]+"%, "+s[2]+"%, "+s[3]+")"},i.to.hwb=function(){var s=sy(arguments),l="";return s.length>=4&&s[3]!==1&&(l=", "+s[3]),"hwb("+s[0]+", "+s[1]+"%, "+s[2]+"%"+l+")"},i.to.keyword=function(s){return e[s.slice(0,3)]};function a(s,l,u){return Math.min(Math.max(l,s),u)}function o(s){var l=Math.round(s).toString(16).toUpperCase();return l.length<2?"0"+l:l}});bd.to;bd.get;var xd={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Zi=$r(function(r){var t={};for(var e in xd)xd.hasOwnProperty(e)&&(t[xd[e]]=e);var n=r.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var i in n)if(n.hasOwnProperty(i)){if(!("channels"in n[i]))throw new Error("missing channels property: "+i);if(!("labels"in n[i]))throw new Error("missing channel labels property: "+i);if(n[i].labels.length!==n[i].channels)throw new Error("channel and label counts mismatch: "+i);var a=n[i].channels,o=n[i].labels;delete n[i].channels,delete n[i].labels,Object.defineProperty(n[i],"channels",{value:a}),Object.defineProperty(n[i],"labels",{value:o})}n.rgb.hsl=function(l){var u=l[0]/255,c=l[1]/255,f=l[2]/255,d=Math.min(u,c,f),h=Math.max(u,c,f),v=h-d,p,g,m;return h===d?p=0:u===h?p=(c-f)/v:c===h?p=2+(f-u)/v:f===h&&(p=4+(u-c)/v),p=Math.min(p*60,360),p<0&&(p+=360),m=(d+h)/2,h===d?g=0:m<=.5?g=v/(h+d):g=v/(2-h-d),[p,g*100,m*100]},n.rgb.hsv=function(l){var u,c,f,d,h,v=l[0]/255,p=l[1]/255,g=l[2]/255,m=Math.max(v,p,g),y=m-Math.min(v,p,g),b=function(x){return(m-x)/6/y+1/2};return y===0?d=h=0:(h=y/m,u=b(v),c=b(p),f=b(g),v===m?d=f-c:p===m?d=1/3+u-f:g===m&&(d=2/3+c-u),d<0?d+=1:d>1&&(d-=1)),[d*360,h*100,m*100]},n.rgb.hwb=function(l){var u=l[0],c=l[1],f=l[2],d=n.rgb.hsl(l)[0],h=1/255*Math.min(u,Math.min(c,f));return f=1-1/255*Math.max(u,Math.max(c,f)),[d,h*100,f*100]},n.rgb.cmyk=function(l){var u=l[0]/255,c=l[1]/255,f=l[2]/255,d,h,v,p;return p=Math.min(1-u,1-c,1-f),d=(1-u-p)/(1-p)||0,h=(1-c-p)/(1-p)||0,v=(1-f-p)/(1-p)||0,[d*100,h*100,v*100,p*100]};function s(l,u){return Math.pow(l[0]-u[0],2)+Math.pow(l[1]-u[1],2)+Math.pow(l[2]-u[2],2)}n.rgb.keyword=function(l){var u=t[l];if(u)return u;var c=1/0,f;for(var d in xd)if(xd.hasOwnProperty(d)){var h=xd[d],v=s(l,h);v<c&&(c=v,f=d)}return f},n.keyword.rgb=function(l){return xd[l]},n.rgb.xyz=function(l){var u=l[0]/255,c=l[1]/255,f=l[2]/255;u=u>.04045?Math.pow((u+.055)/1.055,2.4):u/12.92,c=c>.04045?Math.pow((c+.055)/1.055,2.4):c/12.92,f=f>.04045?Math.pow((f+.055)/1.055,2.4):f/12.92;var d=u*.4124+c*.3576+f*.1805,h=u*.2126+c*.7152+f*.0722,v=u*.0193+c*.1192+f*.9505;return[d*100,h*100,v*100]},n.rgb.lab=function(l){var u=n.rgb.xyz(l),c=u[0],f=u[1],d=u[2],h,v,p;return c/=95.047,f/=100,d/=108.883,c=c>.008856?Math.pow(c,1/3):7.787*c+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,d=d>.008856?Math.pow(d,1/3):7.787*d+16/116,h=116*f-16,v=500*(c-f),p=200*(f-d),[h,v,p]},n.hsl.rgb=function(l){var u=l[0]/360,c=l[1]/100,f=l[2]/100,d,h,v,p,g;if(c===0)return g=f*255,[g,g,g];f<.5?h=f*(1+c):h=f+c-f*c,d=2*f-h,p=[0,0,0];for(var m=0;m<3;m++)v=u+1/3*-(m-1),v<0&&v++,v>1&&v--,6*v<1?g=d+(h-d)*6*v:2*v<1?g=h:3*v<2?g=d+(h-d)*(2/3-v)*6:g=d,p[m]=g*255;return p},n.hsl.hsv=function(l){var u=l[0],c=l[1]/100,f=l[2]/100,d=c,h=Math.max(f,.01),v,p;return f*=2,c*=f<=1?f:2-f,d*=h<=1?h:2-h,p=(f+c)/2,v=f===0?2*d/(h+d):2*c/(f+c),[u,v*100,p*100]},n.hsv.rgb=function(l){var u=l[0]/60,c=l[1]/100,f=l[2]/100,d=Math.floor(u)%6,h=u-Math.floor(u),v=255*f*(1-c),p=255*f*(1-c*h),g=255*f*(1-c*(1-h));switch(f*=255,d){case 0:return[f,g,v];case 1:return[p,f,v];case 2:return[v,f,g];case 3:return[v,p,f];case 4:return[g,v,f];case 5:return[f,v,p]}},n.hsv.hsl=function(l){var u=l[0],c=l[1]/100,f=l[2]/100,d=Math.max(f,.01),h,v,p;return p=(2-c)*f,h=(2-c)*d,v=c*d,v/=h<=1?h:2-h,v=v||0,p/=2,[u,v*100,p*100]},n.hwb.rgb=function(l){var u=l[0]/360,c=l[1]/100,f=l[2]/100,d=c+f,h,v,p,g;d>1&&(c/=d,f/=d),h=Math.floor(6*u),v=1-f,p=6*u-h,(h&1)!=0&&(p=1-p),g=c+p*(v-c);var m,y,b;switch(h){default:case 6:case 0:m=v,y=g,b=c;break;case 1:m=g,y=v,b=c;break;case 2:m=c,y=v,b=g;break;case 3:m=c,y=g,b=v;break;case 4:m=g,y=c,b=v;break;case 5:m=v,y=c,b=g;break}return[m*255,y*255,b*255]},n.cmyk.rgb=function(l){var u=l[0]/100,c=l[1]/100,f=l[2]/100,d=l[3]/100,h,v,p;return h=1-Math.min(1,u*(1-d)+d),v=1-Math.min(1,c*(1-d)+d),p=1-Math.min(1,f*(1-d)+d),[h*255,v*255,p*255]},n.xyz.rgb=function(l){var u=l[0]/100,c=l[1]/100,f=l[2]/100,d,h,v;return d=u*3.2406+c*-1.5372+f*-.4986,h=u*-.9689+c*1.8758+f*.0415,v=u*.0557+c*-.204+f*1.057,d=d>.0031308?1.055*Math.pow(d,1/2.4)-.055:d*12.92,h=h>.0031308?1.055*Math.pow(h,1/2.4)-.055:h*12.92,v=v>.0031308?1.055*Math.pow(v,1/2.4)-.055:v*12.92,d=Math.min(Math.max(0,d),1),h=Math.min(Math.max(0,h),1),v=Math.min(Math.max(0,v),1),[d*255,h*255,v*255]},n.xyz.lab=function(l){var u=l[0],c=l[1],f=l[2],d,h,v;return u/=95.047,c/=100,f/=108.883,u=u>.008856?Math.pow(u,1/3):7.787*u+16/116,c=c>.008856?Math.pow(c,1/3):7.787*c+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,d=116*c-16,h=500*(u-c),v=200*(c-f),[d,h,v]},n.lab.xyz=function(l){var u=l[0],c=l[1],f=l[2],d,h,v;h=(u+16)/116,d=c/500+h,v=h-f/200;var p=Math.pow(h,3),g=Math.pow(d,3),m=Math.pow(v,3);return h=p>.008856?p:(h-16/116)/7.787,d=g>.008856?g:(d-16/116)/7.787,v=m>.008856?m:(v-16/116)/7.787,d*=95.047,h*=100,v*=108.883,[d,h,v]},n.lab.lch=function(l){var u=l[0],c=l[1],f=l[2],d,h,v;return d=Math.atan2(f,c),h=d*360/2/Math.PI,h<0&&(h+=360),v=Math.sqrt(c*c+f*f),[u,v,h]},n.lch.lab=function(l){var u=l[0],c=l[1],f=l[2],d,h,v;return v=f/360*2*Math.PI,d=c*Math.cos(v),h=c*Math.sin(v),[u,d,h]},n.rgb.ansi16=function(l){var u=l[0],c=l[1],f=l[2],d=1 in arguments?arguments[1]:n.rgb.hsv(l)[2];if(d=Math.round(d/50),d===0)return 30;var h=30+(Math.round(f/255)<<2|Math.round(c/255)<<1|Math.round(u/255));return d===2&&(h+=60),h},n.hsv.ansi16=function(l){return n.rgb.ansi16(n.hsv.rgb(l),l[2])},n.rgb.ansi256=function(l){var u=l[0],c=l[1],f=l[2];if(u===c&&c===f)return u<8?16:u>248?231:Math.round((u-8)/247*24)+232;var d=16+36*Math.round(u/255*5)+6*Math.round(c/255*5)+Math.round(f/255*5);return d},n.ansi16.rgb=function(l){var u=l%10;if(u===0||u===7)return l>50&&(u+=3.5),u=u/10.5*255,[u,u,u];var c=(~~(l>50)+1)*.5,f=(u&1)*c*255,d=(u>>1&1)*c*255,h=(u>>2&1)*c*255;return[f,d,h]},n.ansi256.rgb=function(l){if(l>=232){var u=(l-232)*10+8;return[u,u,u]}l-=16;var c,f=Math.floor(l/36)/5*255,d=Math.floor((c=l%36)/6)/5*255,h=c%6/5*255;return[f,d,h]},n.rgb.hex=function(l){var u=((Math.round(l[0])&255)<<16)+((Math.round(l[1])&255)<<8)+(Math.round(l[2])&255),c=u.toString(16).toUpperCase();return"000000".substring(c.length)+c},n.hex.rgb=function(l){var u=l.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!u)return[0,0,0];var c=u[0];u[0].length===3&&(c=c.split("").map(function(p){return p+p}).join(""));var f=parseInt(c,16),d=f>>16&255,h=f>>8&255,v=f&255;return[d,h,v]},n.rgb.hcg=function(l){var u=l[0]/255,c=l[1]/255,f=l[2]/255,d=Math.max(Math.max(u,c),f),h=Math.min(Math.min(u,c),f),v=d-h,p,g;return v<1?p=h/(1-v):p=0,v<=0?g=0:d===u?g=(c-f)/v%6:d===c?g=2+(f-u)/v:g=4+(u-c)/v+4,g/=6,g%=1,[g*360,v*100,p*100]},n.hsl.hcg=function(l){var u=l[1]/100,c=l[2]/100,f=1,d=0;return c<.5?f=2*u*c:f=2*u*(1-c),f<1&&(d=(c-.5*f)/(1-f)),[l[0],f*100,d*100]},n.hsv.hcg=function(l){var u=l[1]/100,c=l[2]/100,f=u*c,d=0;return f<1&&(d=(c-f)/(1-f)),[l[0],f*100,d*100]},n.hcg.rgb=function(l){var u=l[0]/360,c=l[1]/100,f=l[2]/100;if(c===0)return[f*255,f*255,f*255];var d=[0,0,0],h=u%1*6,v=h%1,p=1-v,g=0;switch(Math.floor(h)){case 0:d[0]=1,d[1]=v,d[2]=0;break;case 1:d[0]=p,d[1]=1,d[2]=0;break;case 2:d[0]=0,d[1]=1,d[2]=v;break;case 3:d[0]=0,d[1]=p,d[2]=1;break;case 4:d[0]=v,d[1]=0,d[2]=1;break;default:d[0]=1,d[1]=0,d[2]=p}return g=(1-c)*f,[(c*d[0]+g)*255,(c*d[1]+g)*255,(c*d[2]+g)*255]},n.hcg.hsv=function(l){var u=l[1]/100,c=l[2]/100,f=u+c*(1-u),d=0;return f>0&&(d=u/f),[l[0],d*100,f*100]},n.hcg.hsl=function(l){var u=l[1]/100,c=l[2]/100,f=c*(1-u)+.5*u,d=0;return f>0&&f<.5?d=u/(2*f):f>=.5&&f<1&&(d=u/(2*(1-f))),[l[0],d*100,f*100]},n.hcg.hwb=function(l){var u=l[1]/100,c=l[2]/100,f=u+c*(1-u);return[l[0],(f-u)*100,(1-f)*100]},n.hwb.hcg=function(l){var u=l[1]/100,c=l[2]/100,f=1-c,d=f-u,h=0;return d<1&&(h=(f-d)/(1-d)),[l[0],d*100,h*100]},n.apple.rgb=function(l){return[l[0]/65535*255,l[1]/65535*255,l[2]/65535*255]},n.rgb.apple=function(l){return[l[0]/255*65535,l[1]/255*65535,l[2]/255*65535]},n.gray.rgb=function(l){return[l[0]/100*255,l[0]/100*255,l[0]/100*255]},n.gray.hsl=n.gray.hsv=function(l){return[0,0,l[0]]},n.gray.hwb=function(l){return[0,100,l[0]]},n.gray.cmyk=function(l){return[0,0,0,l[0]]},n.gray.lab=function(l){return[l[0],0,0]},n.gray.hex=function(l){var u=Math.round(l[0]/100*255)&255,c=(u<<16)+(u<<8)+u,f=c.toString(16).toUpperCase();return"000000".substring(f.length)+f},n.rgb.gray=function(l){var u=(l[0]+l[1]+l[2])/3;return[u/255*100]}});Zi.rgb;Zi.hsl;Zi.hsv;Zi.hwb;Zi.cmyk;Zi.xyz;Zi.lab;Zi.lch;Zi.hex;Zi.keyword;Zi.ansi16;Zi.ansi256;Zi.hcg;Zi.apple;Zi.gray;function Yge(){for(var r={},t=Object.keys(Zi),e=t.length,n=0;n<e;n++)r[t[n]]={distance:-1,parent:null};return r}function Xge(r){var t=Yge(),e=[r];for(t[r].distance=0;e.length;)for(var n=e.pop(),i=Object.keys(Zi[n]),a=i.length,o=0;o<a;o++){var s=i[o],l=t[s];l.distance===-1&&(l.distance=t[n].distance+1,l.parent=n,e.unshift(s))}return t}function qge(r,t){return function(e){return t(r(e))}}function Kge(r,t){for(var e=[t[r].parent,r],n=Zi[t[r].parent][r],i=t[r].parent;t[i].parent;)e.unshift(t[i].parent),n=qge(Zi[t[i].parent][i],n),i=t[i].parent;return n.conversion=e,n}var Zge=function(r){for(var t=Xge(r),e={},n=Object.keys(t),i=n.length,a=0;a<i;a++){var o=n[a],s=t[o];s.parent!==null&&(e[o]=Kge(o,t))}return e},Gv={},Qge=Object.keys(Zi);function Jge(r){var t=function(e){return e==null?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),r(e))};return"conversion"in r&&(t.conversion=r.conversion),t}function eme(r){var t=function(e){if(e==null)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var n=r(e);if(typeof n=="object")for(var i=n.length,a=0;a<i;a++)n[a]=Math.round(n[a]);return n};return"conversion"in r&&(t.conversion=r.conversion),t}Qge.forEach(function(r){Gv[r]={},Object.defineProperty(Gv[r],"channels",{value:Zi[r].channels}),Object.defineProperty(Gv[r],"labels",{value:Zi[r].labels});var t=Zge(r),e=Object.keys(t);e.forEach(function(n){var i=t[n];Gv[r][n]=eme(i),Gv[r][n].raw=Jge(i)})});var vs=Gv,ak=[].slice,n4=["keyword","gray","hex"],ok={};Object.keys(vs).forEach(function(r){ok[ak.call(vs[r].labels).sort().join("")]=r});var J1={};function qa(r,t){if(!(this instanceof qa))return new qa(r,t);if(t&&t in n4&&(t=null),t&&!(t in vs))throw new Error("Unknown model: "+t);var e,n;if(r==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(r instanceof qa)this.model=r.model,this.color=r.color.slice(),this.valpha=r.valpha;else if(typeof r=="string"){var i=bd.get(r);if(i===null)throw new Error("Unable to parse color from string: "+r);this.model=i.model,n=vs[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(r.length){this.model=t||"rgb",n=vs[this.model].channels;var a=ak.call(r,0,n);this.color=sk(a,n),this.valpha=typeof r[n]=="number"?r[n]:1}else if(typeof r=="number")r&=16777215,this.model="rgb",this.color=[r>>16&255,r>>8&255,r&255],this.valpha=1;else{this.valpha=1;var o=Object.keys(r);"alpha"in r&&(o.splice(o.indexOf("alpha"),1),this.valpha=typeof r.alpha=="number"?r.alpha:0);var s=o.sort().join("");if(!(s in ok))throw new Error("Unable to parse color from object: "+JSON.stringify(r));this.model=ok[s];var l=vs[this.model].labels,u=[];for(e=0;e<l.length;e++)u.push(r[l[e]]);this.color=sk(u)}if(J1[this.model])for(n=vs[this.model].channels,e=0;e<n;e++){var c=J1[this.model][e];c&&(this.color[e]=c(this.color[e]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}qa.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(r){var t=this.model in bd.to?this:this.rgb();t=t.round(typeof r=="number"?r:1);var e=t.valpha===1?t.color:t.color.concat(this.valpha);return bd.to[t.model](e)},percentString:function(r){var t=this.rgb().round(typeof r=="number"?r:1),e=t.valpha===1?t.color:t.color.concat(this.valpha);return bd.to.rgb.percent(e)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var r={},t=vs[this.model].channels,e=vs[this.model].labels,n=0;n<t;n++)r[e[n]]=this.color[n];return this.valpha!==1&&(r.alpha=this.valpha),r},unitArray:function(){var r=this.rgb().color;return r[0]/=255,r[1]/=255,r[2]/=255,this.valpha!==1&&r.push(this.valpha),r},unitObject:function(){var r=this.rgb().object();return r.r/=255,r.g/=255,r.b/=255,this.valpha!==1&&(r.alpha=this.valpha),r},round:function(r){return r=Math.max(r||0,0),new qa(this.color.map(rme(r)).concat(this.valpha),this.model)},alpha:function(r){return arguments.length?new qa(this.color.concat(Math.max(0,Math.min(1,r))),this.model):this.valpha},red:Qi("rgb",0,Sa(255)),green:Qi("rgb",1,Sa(255)),blue:Qi("rgb",2,Sa(255)),hue:Qi(["hsl","hsv","hsl","hwb","hcg"],0,function(r){return(r%360+360)%360}),saturationl:Qi("hsl",1,Sa(100)),lightness:Qi("hsl",2,Sa(100)),saturationv:Qi("hsv",1,Sa(100)),value:Qi("hsv",2,Sa(100)),chroma:Qi("hcg",1,Sa(100)),gray:Qi("hcg",2,Sa(100)),white:Qi("hwb",1,Sa(100)),wblack:Qi("hwb",2,Sa(100)),cyan:Qi("cmyk",0,Sa(100)),magenta:Qi("cmyk",1,Sa(100)),yellow:Qi("cmyk",2,Sa(100)),black:Qi("cmyk",3,Sa(100)),x:Qi("xyz",0,Sa(100)),y:Qi("xyz",1,Sa(100)),z:Qi("xyz",2,Sa(100)),l:Qi("lab",0,Sa(100)),a:Qi("lab",1),b:Qi("lab",2),keyword:function(r){return arguments.length?new qa(r):vs[this.model].keyword(this.color)},hex:function(r){return arguments.length?new qa(r):bd.to.hex(this.rgb().round().color)},rgbNumber:function(){var r=this.rgb().color;return(r[0]&255)<<16|(r[1]&255)<<8|r[2]&255},luminosity:function(){for(var r=this.rgb().color,t=[],e=0;e<r.length;e++){var n=r[e]/255;t[e]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(r){var t=this.luminosity(),e=r.luminosity();return t>e?(t+.05)/(e+.05):(e+.05)/(t+.05)},level:function(r){var t=this.contrast(r);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var r=this.rgb().color,t=(r[0]*299+r[1]*587+r[2]*114)/1e3;return t<128},isLight:function(){return!this.isDark()},negate:function(){for(var r=this.rgb(),t=0;t<3;t++)r.color[t]=255-r.color[t];return r},lighten:function(r){var t=this.hsl();return t.color[2]+=t.color[2]*r,t},darken:function(r){var t=this.hsl();return t.color[2]-=t.color[2]*r,t},saturate:function(r){var t=this.hsl();return t.color[1]+=t.color[1]*r,t},desaturate:function(r){var t=this.hsl();return t.color[1]-=t.color[1]*r,t},whiten:function(r){var t=this.hwb();return t.color[1]+=t.color[1]*r,t},blacken:function(r){var t=this.hwb();return t.color[2]+=t.color[2]*r,t},grayscale:function(){var r=this.rgb().color,t=r[0]*.3+r[1]*.59+r[2]*.11;return qa.rgb(t,t,t)},fade:function(r){return this.alpha(this.valpha-this.valpha*r)},opaquer:function(r){return this.alpha(this.valpha+this.valpha*r)},rotate:function(r){var t=this.hsl(),e=t.color[0];return e=(e+r)%360,e=e<0?360+e:e,t.color[0]=e,t},mix:function(r,t){if(!r||!r.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof r);var e=r.rgb(),n=this.rgb(),i=t===void 0?.5:t,a=2*i-1,o=e.alpha()-n.alpha(),s=((a*o==-1?a:(a+o)/(1+a*o))+1)/2,l=1-s;return qa.rgb(s*e.red()+l*n.red(),s*e.green()+l*n.green(),s*e.blue()+l*n.blue(),e.alpha()*i+n.alpha()*(1-i))}};Object.keys(vs).forEach(function(r){if(n4.indexOf(r)===-1){var t=vs[r].channels;qa.prototype[r]=function(){if(this.model===r)return new qa(this);if(arguments.length)return new qa(arguments,r);var e=typeof arguments[t]=="number"?t:this.valpha;return new qa(nme(vs[this.model][r].raw(this.color)).concat(e),r)},qa[r]=function(e){return typeof e=="number"&&(e=sk(ak.call(arguments),t)),new qa(e,r)}}});function tme(r,t){return Number(r.toFixed(t))}function rme(r){return function(t){return tme(t,r)}}function Qi(r,t,e){return r=Array.isArray(r)?r:[r],r.forEach(function(n){(J1[n]||(J1[n]=[]))[t]=e}),r=r[0],function(n){var i;return arguments.length?(e&&(n=e(n)),i=this[r](),i.color[t]=n,i):(i=this[r]().color[t],e&&(i=e(i)),i)}}function Sa(r){return function(t){return Math.max(0,Math.min(r,t))}}function nme(r){return Array.isArray(r)?r:[r]}function sk(r,t){for(var e=0;e<t;e++)typeof r[e]!="number"&&(r[e]=0);return r}var ly=qa,ew=$r(function(r){(function(t){var e=/^\s+/,n=/\s+$/,i=0,a=t.round,o=t.min,s=t.max,l=t.random;function u(D,z){if(D=D||"",z=z||{},D instanceof u)return D;if(!(this instanceof u))return new u(D,z);var V=c(D);this._originalInput=D,this._r=V.r,this._g=V.g,this._b=V.b,this._a=V.a,this._roundA=a(100*this._a)/100,this._format=z.format||V.format,this._gradientType=z.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=V.ok,this._tc_id=i++}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var D=this.toRgb();return(D.r*299+D.g*587+D.b*114)/1e3},getLuminance:function(){var D=this.toRgb(),z,V,he,re,pe,Je;return z=D.r/255,V=D.g/255,he=D.b/255,z<=.03928?re=z/12.92:re=t.pow((z+.055)/1.055,2.4),V<=.03928?pe=V/12.92:pe=t.pow((V+.055)/1.055,2.4),he<=.03928?Je=he/12.92:Je=t.pow((he+.055)/1.055,2.4),.2126*re+.7152*pe+.0722*Je},setAlpha:function(D){return this._a=B(D),this._roundA=a(100*this._a)/100,this},toHsv:function(){var D=v(this._r,this._g,this._b);return{h:D.h*360,s:D.s,v:D.v,a:this._a}},toHsvString:function(){var D=v(this._r,this._g,this._b),z=a(D.h*360),V=a(D.s*100),he=a(D.v*100);return this._a==1?"hsv("+z+", "+V+"%, "+he+"%)":"hsva("+z+", "+V+"%, "+he+"%, "+this._roundA+")"},toHsl:function(){var D=d(this._r,this._g,this._b);return{h:D.h*360,s:D.s,l:D.l,a:this._a}},toHslString:function(){var D=d(this._r,this._g,this._b),z=a(D.h*360),V=a(D.s*100),he=a(D.l*100);return this._a==1?"hsl("+z+", "+V+"%, "+he+"%)":"hsla("+z+", "+V+"%, "+he+"%, "+this._roundA+")"},toHex:function(D){return g(this._r,this._g,this._b,D)},toHexString:function(D){return"#"+this.toHex(D)},toHex8:function(D){return m(this._r,this._g,this._b,this._a,D)},toHex8String:function(D){return"#"+this.toHex8(D)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(U(this._r,255)*100)+"%",g:a(U(this._g,255)*100)+"%",b:a(U(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+a(U(this._r,255)*100)+"%, "+a(U(this._g,255)*100)+"%, "+a(U(this._b,255)*100)+"%)":"rgba("+a(U(this._r,255)*100)+"%, "+a(U(this._g,255)*100)+"%, "+a(U(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:L[g(this._r,this._g,this._b,!0)]||!1},toFilter:function(D){var z="#"+y(this._r,this._g,this._b,this._a),V=z,he=this._gradientType?"GradientType = 1, ":"";if(D){var re=u(D);V="#"+y(re._r,re._g,re._b,re._a)}return"progid:DXImageTransform.Microsoft.gradient("+he+"startColorstr="+z+",endColorstr="+V+")"},toString:function(D){var z=!!D;D=D||this._format;var V=!1,he=this._a<1&&this._a>=0,re=!z&&he&&(D==="hex"||D==="hex6"||D==="hex3"||D==="hex4"||D==="hex8"||D==="name");return re?D==="name"&&this._a===0?this.toName():this.toRgbString():(D==="rgb"&&(V=this.toRgbString()),D==="prgb"&&(V=this.toPercentageRgbString()),(D==="hex"||D==="hex6")&&(V=this.toHexString()),D==="hex3"&&(V=this.toHexString(!0)),D==="hex4"&&(V=this.toHex8String(!0)),D==="hex8"&&(V=this.toHex8String()),D==="name"&&(V=this.toName()),D==="hsl"&&(V=this.toHslString()),D==="hsv"&&(V=this.toHsvString()),V||this.toHexString())},clone:function(){return u(this.toString())},_applyModification:function(D,z){var V=D.apply(null,[this].concat([].slice.call(z)));return this._r=V._r,this._g=V._g,this._b=V._b,this.setAlpha(V._a),this},lighten:function(){return this._applyModification(S,arguments)},brighten:function(){return this._applyModification(C,arguments)},darken:function(){return this._applyModification(_,arguments)},desaturate:function(){return this._applyModification(b,arguments)},saturate:function(){return this._applyModification(x,arguments)},greyscale:function(){return this._applyModification(w,arguments)},spin:function(){return this._applyModification(T,arguments)},_applyCombination:function(D,z){return D.apply(null,[this].concat([].slice.call(z)))},analogous:function(){return this._applyCombination(F,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination($,arguments)},splitcomplement:function(){return this._applyCombination(P,arguments)},triad:function(){return this._applyCombination(k,arguments)},tetrad:function(){return this._applyCombination(I,arguments)}},u.fromRatio=function(D,z){if(typeof D=="object"){var V={};for(var he in D)D.hasOwnProperty(he)&&(he==="a"?V[he]=D[he]:V[he]=fe(D[he]));D=V}return u(D,z)};function c(D){var z={r:0,g:0,b:0},V=1,he=null,re=null,pe=null,Je=!1,We=!1;return typeof D=="string"&&(D=Ye(D)),typeof D=="object"&&(Me(D.r)&&Me(D.g)&&Me(D.b)?(z=f(D.r,D.g,D.b),Je=!0,We=String(D.r).substr(-1)==="%"?"prgb":"rgb"):Me(D.h)&&Me(D.s)&&Me(D.v)?(he=fe(D.s),re=fe(D.v),z=p(D.h,he,re),Je=!0,We="hsv"):Me(D.h)&&Me(D.s)&&Me(D.l)&&(he=fe(D.s),pe=fe(D.l),z=h(D.h,he,pe),Je=!0,We="hsl"),D.hasOwnProperty("a")&&(V=D.a)),V=B(V),{ok:Je,format:D.format||We,r:o(255,s(z.r,0)),g:o(255,s(z.g,0)),b:o(255,s(z.b,0)),a:V}}function f(D,z,V){return{r:U(D,255)*255,g:U(z,255)*255,b:U(V,255)*255}}function d(D,z,V){D=U(D,255),z=U(z,255),V=U(V,255);var he=s(D,z,V),re=o(D,z,V),pe,Je,We=(he+re)/2;if(he==re)pe=Je=0;else{var Le=he-re;switch(Je=We>.5?Le/(2-he-re):Le/(he+re),he){case D:pe=(z-V)/Le+(z<V?6:0);break;case z:pe=(V-D)/Le+2;break;case V:pe=(D-z)/Le+4;break}pe/=6}return{h:pe,s:Je,l:We}}function h(D,z,V){var he,re,pe;D=U(D,360),z=U(z,100),V=U(V,100);function Je($e,H,Y){return Y<0&&(Y+=1),Y>1&&(Y-=1),Y<1/6?$e+(H-$e)*6*Y:Y<1/2?H:Y<2/3?$e+(H-$e)*(2/3-Y)*6:$e}if(z===0)he=re=pe=V;else{var We=V<.5?V*(1+z):V+z-V*z,Le=2*V-We;he=Je(Le,We,D+1/3),re=Je(Le,We,D),pe=Je(Le,We,D-1/3)}return{r:he*255,g:re*255,b:pe*255}}function v(D,z,V){D=U(D,255),z=U(z,255),V=U(V,255);var he=s(D,z,V),re=o(D,z,V),pe,Je,We=he,Le=he-re;if(Je=he===0?0:Le/he,he==re)pe=0;else{switch(he){case D:pe=(z-V)/Le+(z<V?6:0);break;case z:pe=(V-D)/Le+2;break;case V:pe=(D-z)/Le+4;break}pe/=6}return{h:pe,s:Je,v:We}}function p(D,z,V){D=U(D,360)*6,z=U(z,100),V=U(V,100);var he=t.floor(D),re=D-he,pe=V*(1-z),Je=V*(1-re*z),We=V*(1-(1-re)*z),Le=he%6,$e=[V,Je,pe,pe,We,V][Le],H=[We,V,V,Je,pe,pe][Le],Y=[pe,pe,We,V,V,Je][Le];return{r:$e*255,g:H*255,b:Y*255}}function g(D,z,V,he){var re=[j(a(D).toString(16)),j(a(z).toString(16)),j(a(V).toString(16))];return he&&re[0].charAt(0)==re[0].charAt(1)&&re[1].charAt(0)==re[1].charAt(1)&&re[2].charAt(0)==re[2].charAt(1)?re[0].charAt(0)+re[1].charAt(0)+re[2].charAt(0):re.join("")}function m(D,z,V,he,re){var pe=[j(a(D).toString(16)),j(a(z).toString(16)),j(a(V).toString(16)),j(se(he))];return re&&pe[0].charAt(0)==pe[0].charAt(1)&&pe[1].charAt(0)==pe[1].charAt(1)&&pe[2].charAt(0)==pe[2].charAt(1)&&pe[3].charAt(0)==pe[3].charAt(1)?pe[0].charAt(0)+pe[1].charAt(0)+pe[2].charAt(0)+pe[3].charAt(0):pe.join("")}function y(D,z,V,he){var re=[j(se(he)),j(a(D).toString(16)),j(a(z).toString(16)),j(a(V).toString(16))];return re.join("")}u.equals=function(D,z){return!D||!z?!1:u(D).toRgbString()==u(z).toRgbString()},u.random=function(){return u.fromRatio({r:l(),g:l(),b:l()})};function b(D,z){z=z===0?0:z||10;var V=u(D).toHsl();return V.s-=z/100,V.s=W(V.s),u(V)}function x(D,z){z=z===0?0:z||10;var V=u(D).toHsl();return V.s+=z/100,V.s=W(V.s),u(V)}function w(D){return u(D).desaturate(100)}function S(D,z){z=z===0?0:z||10;var V=u(D).toHsl();return V.l+=z/100,V.l=W(V.l),u(V)}function C(D,z){z=z===0?0:z||10;var V=u(D).toRgb();return V.r=s(0,o(255,V.r-a(255*-(z/100)))),V.g=s(0,o(255,V.g-a(255*-(z/100)))),V.b=s(0,o(255,V.b-a(255*-(z/100)))),u(V)}function _(D,z){z=z===0?0:z||10;var V=u(D).toHsl();return V.l-=z/100,V.l=W(V.l),u(V)}function T(D,z){var V=u(D).toHsl(),he=(V.h+z)%360;return V.h=he<0?360+he:he,u(V)}function E(D){var z=u(D).toHsl();return z.h=(z.h+180)%360,u(z)}function k(D){var z=u(D).toHsl(),V=z.h;return[u(D),u({h:(V+120)%360,s:z.s,l:z.l}),u({h:(V+240)%360,s:z.s,l:z.l})]}function I(D){var z=u(D).toHsl(),V=z.h;return[u(D),u({h:(V+90)%360,s:z.s,l:z.l}),u({h:(V+180)%360,s:z.s,l:z.l}),u({h:(V+270)%360,s:z.s,l:z.l})]}function P(D){var z=u(D).toHsl(),V=z.h;return[u(D),u({h:(V+72)%360,s:z.s,l:z.l}),u({h:(V+216)%360,s:z.s,l:z.l})]}function F(D,z,V){z=z||6,V=V||30;var he=u(D).toHsl(),re=360/V,pe=[u(D)];for(he.h=(he.h-(re*z>>1)+720)%360;--z;)he.h=(he.h+re)%360,pe.push(u(he));return pe}function $(D,z){z=z||6;for(var V=u(D).toHsv(),he=V.h,re=V.s,pe=V.v,Je=[],We=1/z;z--;)Je.push(u({h:he,s:re,v:pe})),pe=(pe+We)%1;return Je}u.mix=function(D,z,V){V=V===0?0:V||50;var he=u(D).toRgb(),re=u(z).toRgb(),pe=V/100,Je={r:(re.r-he.r)*pe+he.r,g:(re.g-he.g)*pe+he.g,b:(re.b-he.b)*pe+he.b,a:(re.a-he.a)*pe+he.a};return u(Je)},u.readability=function(D,z){var V=u(D),he=u(z);return(t.max(V.getLuminance(),he.getLuminance())+.05)/(t.min(V.getLuminance(),he.getLuminance())+.05)},u.isReadable=function(D,z,V){var he=u.readability(D,z),re,pe;switch(pe=!1,re=De(V),re.level+re.size){case"AAsmall":case"AAAlarge":pe=he>=4.5;break;case"AAlarge":pe=he>=3;break;case"AAAsmall":pe=he>=7;break}return pe},u.mostReadable=function(D,z,V){var he=null,re=0,pe,Je,We,Le;V=V||{},Je=V.includeFallbackColors,We=V.level,Le=V.size;for(var $e=0;$e<z.length;$e++)pe=u.readability(D,z[$e]),pe>re&&(re=pe,he=u(z[$e]));return u.isReadable(D,he,{level:We,size:Le})||!Je?he:(V.includeFallbackColors=!1,u.mostReadable(D,["#fff","#000"],V))};var R=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},L=u.hexNames=O(R);function O(D){var z={};for(var V in D)D.hasOwnProperty(V)&&(z[D[V]]=V);return z}function B(D){return D=parseFloat(D),(isNaN(D)||D<0||D>1)&&(D=1),D}function U(D,z){ie(D)&&(D="100%");var V=q(D);return D=o(z,s(0,parseFloat(D))),V&&(D=parseInt(D*z,10)/100),t.abs(D-z)<1e-6?1:D%z/parseFloat(z)}function W(D){return o(1,s(0,D))}function X(D){return parseInt(D,16)}function ie(D){return typeof D=="string"&&D.indexOf(".")!=-1&&parseFloat(D)===1}function q(D){return typeof D=="string"&&D.indexOf("%")!=-1}function j(D){return D.length==1?"0"+D:""+D}function fe(D){return D<=1&&(D=D*100+"%"),D}function se(D){return t.round(parseFloat(D)*255).toString(16)}function ce(D){return X(D)/255}var _e=function(){var D="[-\\+]?\\d+%?",z="[-\\+]?\\d*\\.\\d+%?",V="(?:"+z+")|(?:"+D+")",he="[\\s|\\(]+("+V+")[,|\\s]+("+V+")[,|\\s]+("+V+")\\s*\\)?",re="[\\s|\\(]+("+V+")[,|\\s]+("+V+")[,|\\s]+("+V+")[,|\\s]+("+V+")\\s*\\)?";return{CSS_UNIT:new RegExp(V),rgb:new RegExp("rgb"+he),rgba:new RegExp("rgba"+re),hsl:new RegExp("hsl"+he),hsla:new RegExp("hsla"+re),hsv:new RegExp("hsv"+he),hsva:new RegExp("hsva"+re),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Me(D){return!!_e.CSS_UNIT.exec(D)}function Ye(D){D=D.replace(e,"").replace(n,"").toLowerCase();var z=!1;if(R[D])D=R[D],z=!0;else if(D=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var V;return(V=_e.rgb.exec(D))?{r:V[1],g:V[2],b:V[3]}:(V=_e.rgba.exec(D))?{r:V[1],g:V[2],b:V[3],a:V[4]}:(V=_e.hsl.exec(D))?{h:V[1],s:V[2],l:V[3]}:(V=_e.hsla.exec(D))?{h:V[1],s:V[2],l:V[3],a:V[4]}:(V=_e.hsv.exec(D))?{h:V[1],s:V[2],v:V[3]}:(V=_e.hsva.exec(D))?{h:V[1],s:V[2],v:V[3],a:V[4]}:(V=_e.hex8.exec(D))?{r:X(V[1]),g:X(V[2]),b:X(V[3]),a:ce(V[4]),format:z?"name":"hex8"}:(V=_e.hex6.exec(D))?{r:X(V[1]),g:X(V[2]),b:X(V[3]),format:z?"name":"hex"}:(V=_e.hex4.exec(D))?{r:X(V[1]+""+V[1]),g:X(V[2]+""+V[2]),b:X(V[3]+""+V[3]),a:ce(V[4]+""+V[4]),format:z?"name":"hex8"}:(V=_e.hex3.exec(D))?{r:X(V[1]+""+V[1]),g:X(V[2]+""+V[2]),b:X(V[3]+""+V[3]),format:z?"name":"hex"}:!1}function De(D){var z,V;return D=D||{level:"AA",size:"small"},z=(D.level||"AA").toUpperCase(),V=(D.size||"small").toLowerCase(),z!=="AA"&&z!=="AAA"&&(z="AA"),V!=="small"&&V!=="large"&&(V="small"),{level:z,size:V}}r.exports?r.exports=u:window.tinycolor=u})(Math)}),tw=2,i4=.16,ime=.05,ame=.05,ome=.15,a4=5,o4=4,sme=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function s4(r,t,e){var n;return Math.round(r.h)>=60&&Math.round(r.h)<=240?n=e?Math.round(r.h)-tw*t:Math.round(r.h)+tw*t:n=e?Math.round(r.h)+tw*t:Math.round(r.h)-tw*t,n<0?n+=360:n>=360&&(n-=360),n}function l4(r,t,e){if(r.h===0&&r.s===0)return r.s;var n;return e?n=r.s-i4*t:t===o4?n=r.s+i4:n=r.s+ime*t,n>1&&(n=1),e&&t===a4&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2))}function u4(r,t,e){var n;return e?n=r.v+ame*t:n=r.v-ome*t,n>1&&(n=1),Number(n.toFixed(2))}function rw(r){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=[],n=ew(r),i=a4;i>0;i-=1){var a=n.toHsv(),o=ew({h:s4(a,i,!0),s:l4(a,i,!0),v:u4(a,i,!0)}).toHexString();e.push(o)}e.push(n.toHexString());for(var s=1;s<=o4;s+=1){var l=n.toHsv(),u=ew({h:s4(l,s),s:l4(l,s),v:u4(l,s)}).toHexString();e.push(u)}return t.theme==="dark"?sme.map(function(c){var f=c.index,d=c.opacity,h=ew.mix(t.backgroundColor||"#141414",e[f],d*100).toHexString();return h}):e}var lk={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},ho={},uk={};Object.keys(lk).forEach(function(r){ho[r]=rw(lk[r]),ho[r].primary=ho[r][5],uk[r]=rw(lk[r],{theme:"dark",backgroundColor:"#141414"}),uk[r].primary=uk[r][5]});ho.red;ho.volcano;ho.gold;ho.orange;ho.yellow;ho.lime;ho.green;ho.cyan;ho.blue;ho.geekblue;ho.purple;ho.magenta;ho.grey;var Ca=function(t,e,n){var i=ly(t),a=ly(e);return ly([(1-n)*i.red()+n*a.red(),(1-n)*i.green()+n*a.green(),(1-n)*i.blue()+n*a.blue()]).rgb()},lme=function(t,e,n){e===void 0&&(e="#fff"),n===void 0&&(n="rgb(150, 150, 150)");var i=Ca(e,t,.05).rgb().toString(),a=Ca(e,t,.1).rgb().toString(),o=Ca(e,t,.2).rgb().toString(),s=Ca(e,t,.4).rgb().toString(),l=Ca(e,n,.02).rgb().toString(),u=Ca(e,n,.05).rgb().toString(),c=Ca(e,n,.1).rgb().toString(),f=Ca(e,n,.2).rgb().toString(),d=Ca(e,n,.3).rgb().toString(),h=rw(t,{theme:"default",backgroundColor:e}),v=ly(t).hex().toLowerCase(),p=h.indexOf(v),g=t;return p!==-1&&(g=h[p+1]),{mainStroke:t,mainFill:a,activeStroke:t,activeFill:i,inactiveStroke:s,inactiveFill:i,selectedStroke:t,selectedFill:e,highlightStroke:g,highlightFill:o,disableStroke:d,disableFill:u,edgeMainStroke:d,edgeActiveStroke:t,edgeInactiveStroke:f,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:c,comboMainStroke:d,comboMainFill:l,comboActiveStroke:t,comboActiveFill:i,comboInactiveStroke:d,comboInactiveFill:l,comboSelectedStroke:t,comboSelectedFill:l,comboHighlightStroke:g,comboHighlightFill:l,comboDisableStroke:f,comboDisableFill:u}},ume=function(t,e,n){e===void 0&&(e="#fff"),n===void 0&&(n="#777");var i=Ca(e,t,.2).rgb().toString(),a=Ca(e,t,.3).rgb().toString(),o=Ca(e,t,.6).rgb().toString(),s=Ca(e,t,.8).rgb().toString(),l=Ca(e,n,.2).rgb().toString(),u=Ca(e,n,.25).rgb().toString(),c=Ca(e,n,.3).rgb().toString(),f=Ca(e,n,.4).rgb().toString(),d=Ca(e,n,.5).rgb().toString(),h=rw(t,{theme:"dark",backgroundColor:e}),v=ly(t).hex().toLowerCase(),p=h.indexOf(v),g=t;return p!==-1&&(g=h[p+1]),{mainStroke:s,mainFill:i,activeStroke:t,activeFill:a,inactiveStroke:s,inactiveFill:i,selectedStroke:t,selectedFill:i,highlightStroke:t,highlightFill:o,disableStroke:d,disableFill:u,edgeMainStroke:n,edgeActiveStroke:t,edgeInactiveStroke:n,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:c,comboMainStroke:f,comboMainFill:u,comboActiveStroke:t,comboActiveFill:l,comboInactiveStroke:f,comboInactiveFill:u,comboSelectedStroke:t,comboSelectedFill:l,comboHighlightStroke:g,comboHighlightFill:u,comboDisableStroke:f,comboDisableFill:l}},ck=function(t,e,n,i){return e===void 0&&(e="#fff"),n===void 0&&(n="default"),n==="default"?lme(t,e,"rgb(150, 150, 150)"):ume(t,e,"#777")},cme=function(t,e,n,i){e===void 0&&(e="#fff"),n===void 0&&(n="default");var a=[];return t.forEach(function(o){a.push(ck(o,e,n))}),a},fme=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",mixColor:Ca,getColorsWithSubjectColor:ck,getColorSetsBySubjectColors:cme}),dme="rgb(95, 149, 255)",hme="rgb(255, 255, 255)",c4="rgb(0, 0, 0)",gn=ck(dme,hme),wd={version:"0.5.0",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:gn.mainStroke,fill:gn.mainFill},size:20,color:gn.mainStroke,linkPoints:{size:8,lineWidth:1,fill:gn.activeFill,stroke:gn.activeStroke}},nodeStateStyles:{active:{fill:gn.activeFill,stroke:gn.activeStroke,lineWidth:2,shadowColor:gn.mainStroke,shadowBlur:10},selected:{fill:gn.selectedFill,stroke:gn.selectedStroke,lineWidth:4,shadowColor:gn.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:gn.highlightFill,stroke:gn.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:gn.inactiveFill,stroke:gn.inactiveStroke,lineWidth:1},disable:{fill:gn.disableFill,stroke:gn.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:c4,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:gn.edgeMainStroke,lineAppendWidth:2},color:gn.edgeMainStroke},edgeStateStyles:{active:{stroke:gn.edgeActiveStroke,lineWidth:1},selected:{stroke:gn.edgeSelectedStroke,lineWidth:2,shadowColor:gn.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:gn.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:gn.edgeInactiveStroke,lineWidth:1},disable:{stroke:gn.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:c4,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:gn.comboMainFill,lineWidth:1,stroke:gn.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:gn.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:gn.comboActiveStroke,lineWidth:1,fill:gn.comboActiveFill},selected:{stroke:gn.comboSelectedStroke,lineWidth:2,fill:gn.comboSelectedFill,shadowColor:gn.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:gn.comboHighlightStroke,lineWidth:2,fill:gn.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:gn.comboInactiveStroke,fill:gn.comboInactiveFill,lineWidth:1},disable:{stroke:gn.comboDisableStroke,fill:gn.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function rl(r,t,e){if(r){if(typeof r.addEventListener=="function")return r.addEventListener(t,e,!1),{remove:function(){r.removeEventListener(t,e,!1)}};if(typeof r.attachEvent=="function")return r.attachEvent("on"+t,e),{remove:function(){r.detachEvent("on"+t,e)}}}}var uy,fk,f4,dk;function vme(){uy=document.createElement("table"),fk=document.createElement("tr"),f4=/^\s*<(\w+|!)[^>]*>/,dk={tr:document.createElement("tbody"),tbody:uy,thead:uy,tfoot:uy,td:fk,th:fk,"*":document.createElement("div")}}function Qn(r){uy||vme();var t=f4.test(r)&&RegExp.$1;(!t||!(t in dk))&&(t="*");var e=dk[t];r=r.replace(/(^\s*)|(\s*$)/g,""),e.innerHTML=""+r;var n=e.childNodes[0];return e.removeChild(n),n}function $o(r,t,e){var n;try{n=window.getComputedStyle?window.getComputedStyle(r,null)[t]:r.style[t]}catch{}finally{n=n===void 0?e:n}return n}function pme(r,t){var e=$o(r,"height",t);return e==="auto"&&(e=r.offsetHeight),parseFloat(e)}function gme(r,t){var e=pme(r,t),n=parseFloat($o(r,"borderTopWidth"))||0,i=parseFloat($o(r,"paddingTop"))||0,a=parseFloat($o(r,"paddingBottom"))||0,o=parseFloat($o(r,"borderBottomWidth"))||0,s=parseFloat($o(r,"marginTop"))||0,l=parseFloat($o(r,"marginBottom"))||0;return e+n+o+i+a+s+l}function mme(r,t){var e=$o(r,"width",t);return e==="auto"&&(e=r.offsetWidth),parseFloat(e)}function yme(r,t){var e=mme(r,t),n=parseFloat($o(r,"borderLeftWidth"))||0,i=parseFloat($o(r,"paddingLeft"))||0,a=parseFloat($o(r,"paddingRight"))||0,o=parseFloat($o(r,"borderRightWidth"))||0,s=parseFloat($o(r,"marginRight"))||0,l=parseFloat($o(r,"marginLeft"))||0;return e+n+o+i+a+l+s}function Vr(r,t){if(r)for(var e in t)t.hasOwnProperty(e)&&(r.style[e]=t[e]);return r}var bme=el.cloneEvent,xme=el.isViewportChanged,wme=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;return n.extendEvents=[],n.dragging=!1,n.preItem=null,n.graph=e,n.destroyed=!1,n.initEvents(),n}return t.prototype.initEvents=function(){var e=this,n=e.graph,i=e.extendEvents,a=i===void 0?[]:i,o=n.get("canvas"),s=o.get("el"),l=wv(this,"onCanvasEvents"),u=wv(this,"onExtendEvents"),c=wv(this,"onWheelEvent");o.off("*").on("*",l),this.canvasHandler=l,a.push(rl(s,"DOMMouseScroll",c)),a.push(rl(s,"mousewheel",c)),typeof window!="undefined"&&(a.push(rl(window,"keydown",u)),a.push(rl(window,"keyup",u)),a.push(rl(window,"focus",u)))},t.getItemRoot=function(e){for(;e&&!e.get("item");)e=e.get("parent");return e},t.prototype.onCanvasEvents=function(e){var n=this.graph,i=n.get("canvas"),a=e.target,o=e.type;e.canvasX=e.x,e.canvasY=e.y;var s={x:e.canvasX,y:e.canvasY},l=n.get("group"),u=l.getMatrix();if(u||(u=[1,0,0,0,1,0,0,0,1]),xme(u)&&(s=n.getPointByClient(e.clientX,e.clientY)),e.x=s.x,e.y=s.y,e.currentTarget=n,a===i){(o==="mousemove"||o==="mouseleave")&&this.handleMouseMove(e,"canvas"),e.target=i,e.item=null,n.emit(o,e),n.emit("canvas:"+o,e);return}var c=t.getItemRoot(a);if(!c){n.emit(o,e);return}var f=c.get("item");if(!f.destroyed){var d=f.getType();if(e.target=a,e.item=f,e.canvasX===e.x&&e.canvasY===e.y){var h=n.getCanvasByPoint(e.x,e.y);e.canvasX=h.x,e.canvasY=h.y}n.emit(o,e),e.name&&!e.name.includes(":")?n.emit(d+":"+o,e):n.emit(e.name,e),o==="dragstart"&&(this.dragging=!0),o==="dragend"&&(this.dragging=!1),o==="mousemove"&&this.handleMouseMove(e,d)}},t.prototype.onExtendEvents=function(e){this.graph.emit(e.type,e)},t.prototype.onWheelEvent=function(e){nt(e.wheelDelta)&&(e.wheelDelta=-e.detail),this.graph.emit("wheel",e)},t.prototype.handleMouseMove=function(e,n){var i=this,a=i.graph,o=i.preItem,s=a.get("canvas"),l=e.target===s?null:e.item;e=bme(e),o&&o!==l&&!o.destroyed&&(e.item=o,this.emitCustomEvent(o.getType(),"mouseleave",e),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",e)),l&&o!==l&&(e.item=l,this.emitCustomEvent(n,"mouseenter",e),this.dragging&&this.emitCustomEvent(n,"dragenter",e)),this.preItem=l},t.prototype.emitCustomEvent=function(e,n,i){i.type=n,this.graph.emit(e+":"+n,i)},t.prototype.destroy=function(){var e=this,n=e.graph,i=e.canvasHandler,a=e.extendEvents,o=n.get("canvas");o.off("*",i),G(a,function(s){s.remove()}),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0},t}(ipe);class _o{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const cy=r=>typeof r=="string",Ka=Array.isArray,Qt=r=>typeof r=="number",hk=r=>Number.isNaN(Number(r)),Bl=r=>r!==null&&typeof r=="object",vk=r=>{if(r===null)return r;if(r instanceof Date)return new Date(r.getTime());if(r instanceof Array){const t=[];return r.forEach(e=>{t.push(e)}),t.map(e=>vk(e))}if(typeof r=="object"&&r!=={}){const t=Object.assign({},r);return Object.keys(t).forEach(e=>{t[e]=vk(t[e])}),t}return r},An=(r,t)=>{const e=r[t];return Bl(e)?e.cell:e},fy=(r,t,e)=>{const n=[];for(let i=0;i<r;i++)n[i]=0;return e&&e.forEach(i=>{const a=An(i,"source"),o=An(i,"target");a&&(n[t[a]]+=1),o&&(n[t[o]]+=1)}),n},d4=r=>{const t=[],e=r.length;for(let n=0;n<e;n+=1){t[n]=[];for(let i=0;i<e;i+=1)n===i?t[n][i]=0:r[n][i]===0||!r[n][i]?t[n][i]=1/0:t[n][i]=r[n][i]}for(let n=0;n<e;n+=1)for(let i=0;i<e;i+=1)for(let a=0;a<e;a+=1)t[i][a]>t[i][n]+t[n][a]&&(t[i][a]=t[i][n]+t[n][a]);return t},h4=(r,t)=>{const{nodes:e,edges:n}=r,i=[],a={};if(!e)throw new Error("invalid nodes data!");return e&&e.forEach((o,s)=>{a[o.id]=s;const l=[];i.push(l)}),n&&n.forEach(o=>{const s=An(o,"source"),l=An(o,"target"),u=a[s],c=a[l];i[u][c]=1,t||(i[c][u]=1)}),i},Sme=(r,t)=>{const e=[];return r.forEach(n=>{const i=[];n.forEach(a=>{i.push(a*t)}),e.push(i)}),e},v4=(r,t)=>{if(r&&r.children){for(let e=r.children.length-1;e>=0;e--)if(!v4(r.children[e],t))return}return!!t(r)},nw=(r,t)=>{typeof t=="function"&&v4(r,t)},Nc=r=>typeof r=="function",iw=new Map,To=(r,t)=>{if(iw.get(r)&&console.warn(`The layout with the name ${r} exists already, it will be overridden`),Bl(t)){class e extends _o{constructor(i){super();const a=this,o={},s=a.getDefaultCfg();Object.assign(o,s,t,i),Object.keys(o).forEach(l=>{const u=o[l];a[l]=u})}}iw.set(r,e)}else iw.set(r,t);return iw.get(r)};class p4 extends _o{constructor(t){super();this.begin=[0,0],this.preventOverlap=!0,this.preventOverlapPadding=10,this.condense=!1,this.sortBy="degree",this.nodeSize=30,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.row=0,this.col=0,this.cellWidth=0,this.cellHeight=0,this.cellUsed={},this.id2manPos={},this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}execute(){const t=this,e=t.nodes,n=t.edges,i=e.length,a=t.begin;if(i===0)return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n};if(i===1)return e[0].x=a[0],e[0].y=a[1],t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n};const o=[];e.forEach(c=>{o.push(c)});const s={};if(o.forEach((c,f)=>{s[c.id]=f}),(t.sortBy==="degree"||!cy(t.sortBy)||o[0][t.sortBy]===void 0)&&(t.sortBy="degree",hk(e[0].degree))){const c=fy(o.length,s,n);o.forEach((f,d)=>{f.degree=c[d]})}o.sort((c,f)=>f[t.sortBy]-c[t.sortBy]),!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);const l=t.rows,u=t.cols!=null?t.cols:t.columns;if(t.cells=i,l!=null&&u!=null?(t.rows=l,t.cols=u):l!=null&&u==null?(t.rows=l,t.cols=Math.ceil(t.cells/t.rows)):l==null&&u!=null?(t.cols=u,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.cols*t.rows>t.cells){const c=t.small(),f=t.large();(c-1)*f>=t.cells?t.small(c-1):(f-1)*c>=t.cells&&t.large(f-1)}else for(;t.cols*t.rows<t.cells;){const c=t.small(),f=t.large();(f+1)*c>=t.cells?t.large(f+1):t.small(c+1)}t.cellWidth=t.width/t.cols,t.cellHeight=t.height/t.rows,t.condense&&(t.cellWidth=0,t.cellHeight=0),t.preventOverlap&&o.forEach(c=>{(!c.x||!c.y)&&(c.x=0,c.y=0);let f,d;Ka(c.size)?(f=c.size[0],d=c.size[1]):Qt(c.size)?(f=c.size,d=c.size):Bl(c.size)&&(f=c.size.width,d=c.size.height),(f===void 0||d===void 0)&&(Ka(t.nodeSize)?(f=t.nodeSize[0],d=t.nodeSize[1]):Qt(t.nodeSize)?(f=t.nodeSize,d=t.nodeSize):(f=30,d=30));const h=t.preventOverlapPadding,v=f+h,p=d+h;t.cellWidth=Math.max(t.cellWidth,v),t.cellHeight=Math.max(t.cellHeight,p)}),t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(let c=0;c<o.length;c++){const f=o[c];let d;if(t.position&&(d=t.position(f)),d&&(d.row!==void 0||d.col!==void 0)){const h={row:d.row,col:d.col};if(h.col===void 0)for(h.col=0;t.used(h.row,h.col);)h.col++;else if(h.row===void 0)for(h.row=0;t.used(h.row,h.col);)h.row++;t.id2manPos[f.id]=h,t.use(h.row,h.col)}t.getPos(f)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:n,nodes:o}}small(t){const e=this;let n;const i=e.rows||5,a=e.cols||5;return t==null?n=Math.min(i,a):Math.min(i,a)===e.rows?e.rows=t:e.cols=t,n}large(t){const e=this;let n;const i=e.rows||5,a=e.cols||5;return t==null?n=Math.max(i,a):Math.max(i,a)===e.rows?e.rows=t:e.cols=t,n}used(t,e){return this.cellUsed[`c-${t}-${e}`]||!1}use(t,e){const n=this;n.cellUsed[`c-${t}-${e}`]=!0}moveToNextCell(){const t=this,e=t.cols||5;t.col++,t.col>=e&&(t.col=0,t.row++)}getPos(t){const e=this,n=e.begin,i=e.cellWidth,a=e.cellHeight;let o,s;const l=e.id2manPos[t.id];if(l)o=l.col*i+i/2+n[0],s=l.row*a+a/2+n[1];else{for(;e.used(e.row,e.col);)e.moveToNextCell();o=e.col*i+i/2+n[0],s=e.row*a+a/2+n[1],e.use(e.row,e.col),e.moveToNextCell()}t.x=o,t.y=s}getType(){return"grid"}}class g4 extends _o{constructor(t){super();this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],width:300,height:300}}execute(){const t=this,e=t.nodes,n=.9,i=t.center;return!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),e&&e.forEach(a=>{a.x=(Math.random()-.5)*n*t.width+i[0],a.y=(Math.random()-.5)*n*t.height+i[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:this.edges}}getType(){return"random"}}const pk=(r,t)=>{let e;return r?Qt(r)?e=n=>r:e=r:e=n=>t||1,e};class m4 extends _o{constructor(t){super();this.maxIteration=1e3,this.workerEnabled=!1,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.preventOverlap=!0,this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0}}execute(){var t,e;const n=this,i=n.nodes;if(n.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(n.timeInterval),!i||i.length===0){(t=n.onLayoutEnd)===null||t===void 0||t.call(n);return}!n.width&&typeof window!="undefined"&&(n.width=window.innerWidth),!n.height&&typeof window!="undefined"&&(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);const a=n.center;if(i.length===1){i[0].x=a[0],i[0].y=a[1],(e=n.onLayoutEnd)===null||e===void 0||e.call(n);return}const o={},s={};i.forEach((f,d)=>{Qt(f.x)||(f.x=Math.random()*n.width),Qt(f.y)||(f.y=Math.random()*n.height),o[f.id]=f,s[f.id]=d}),n.nodeMap=o,n.nodeIdxMap=s,n.linkDistance=pk(n.linkDistance,1),n.nodeStrength=pk(n.nodeStrength,1),n.edgeStrength=pk(n.edgeStrength,1);const l=n.nodeSize;let u;if(n.preventOverlap){const f=n.nodeSpacing;let d;Qt(f)?d=()=>f:Nc(f)?d=f:d=()=>0,l?Ka(l)?u=h=>(l[0]>l[1]?l[0]:l[1])+d(h):u=h=>l+d(h):u=h=>h.size?Ka(h.size)?(h.size[0]>h.size[1]?h.size[0]:h.size[1])+d(h):Bl(h.size)?(h.size.width>h.size.height?h.size.width:h.size.height)+d(h):h.size+d(h):10+d(h)}n.nodeSize=u;const c=n.edges;n.degrees=fy(i.length,n.nodeIdxMap,c),n.getMass||(n.getMass=f=>n.degrees[n.nodeIdxMap[f.id]]||1),n.run()}run(){var t;const e=this,{maxIteration:n,nodes:i,workerEnabled:a,minMovement:o}=e;if(!!i)if(a){for(let s=0;s<n;s++){const l=e.runOneStep(s);if(e.reachMoveThreshold(i,l,o))break}(t=e.onLayoutEnd)===null||t===void 0||t.call(e)}else{if(typeof window=="undefined")return;let s=0;this.timeInterval=window.setInterval(()=>{var l,u;if(!i)return;const c=e.runOneStep(s)||[];e.reachMoveThreshold(i,c,o)&&((l=e.onLayoutEnd)===null||l===void 0||l.call(e),window.clearInterval(e.timeInterval)),s++,s>=n&&((u=e.onLayoutEnd)===null||u===void 0||u.call(e),window.clearInterval(e.timeInterval))},0)}}reachMoveThreshold(t,e,n){let i=0;return t.forEach((a,o)=>{const s=a.x-e[o].x,l=a.y-e[o].y;i+=Math.sqrt(s*s+l*l)}),i/=t.length,i<n}runOneStep(t){var e;const n=this,{nodes:i,edges:a}=n,o=[],s=[];if(!i)return;i.forEach((c,f)=>{o[2*f]=0,o[2*f+1]=0,s[2*f]=0,s[2*f+1]=0}),n.calRepulsive(o,i),a&&n.calAttractive(o,a),n.calGravity(o,i);const l=Math.max(.02,n.interval-t*.002);n.updateVelocity(o,s,l,i);const u=[];return i.forEach(c=>{u.push({x:c.x,y:c.y})}),n.updatePosition(s,l,i),(e=n.tick)===null||e===void 0||e.call(n),u}calRepulsive(t,e){const n=this,i=n.getMass,a=n.nodeStrength,o=n.factor,s=n.coulombDisScale,l=n.preventOverlap,u=n.nodeSize;e.forEach((c,f)=>{const d=i?i(c):1;e.forEach((h,v)=>{if(f>=v)return;const p=c.x-h.x,g=c.y-h.y,m=Math.sqrt(p*p+g*g)+.01,y=(m+.1)*s,b=p/m,x=g/m,w=(a(c)+a(h))/2*o/(y*y),S=i?i(h):1;if(t[2*f]+=b*w,t[2*f+1]+=x*w,t[2*v]-=b*w,t[2*v+1]-=x*w,l&&m<(u(c)+u(h))/2){const C=(a(c)+a(h))/2/(m*m);t[2*f]+=b*C/d,t[2*f+1]+=x*C/d,t[2*v]-=b*C/S,t[2*v+1]-=x*C/S}})})}calAttractive(t,e){const n=this,i=n.nodeMap,a=n.nodeIdxMap,o=n.linkDistance,s=n.edgeStrength,l=n.getMass;e.forEach((u,c)=>{const f=An(u,"source"),d=An(u,"target"),h=i[f],v=i[d],p=v.x-h.x,g=v.y-h.y,m=Math.sqrt(p*p+g*g)+.01,y=p/m,b=g/m,S=((o(u)||1)-m)*s(u),C=a[f],_=a[d],T=l?l(h):1,E=l?l(v):1;t[2*C]-=y*S/T,t[2*C+1]-=b*S/T,t[2*_]+=y*S/E,t[2*_+1]+=b*S/E})}calGravity(t,e){const n=this,i=n.center,a=n.gravity,o=n.degrees,s=e.length;for(let l=0;l<s;l++){const u=e[l];let c=u.x-i[0],f=u.y-i[1],d=a;if(n.getCenter){const h=n.getCenter(u,o[l]);h&&Qt(h[0])&&Qt(h[1])&&Qt(h[2])&&(c=u.x-h[0],f=u.y-h[1],d=h[2])}!d||(t[2*l]-=d*c,t[2*l+1]-=d*f)}}updateVelocity(t,e,n,i){const a=this,o=n*a.damping;i.forEach((s,l)=>{let u=t[2*l]*o||.01,c=t[2*l+1]*o||.01;const f=Math.sqrt(u*u+c*c);if(f>a.maxSpeed){const d=a.maxSpeed/f;u=d*u,c=d*c}e[2*l]=u,e[2*l+1]=c})}updatePosition(t,e,n){n.forEach((i,a)=>{if(Qt(i.fx)&&Qt(i.fy)){i.x=i.fx,i.y=i.fy;return}const o=t[2*a]*e,s=t[2*a+1]*e;i.x+=o,i.y+=s})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0}getType(){return"gForce"}}function Cme(r,t){var e,n=1;r==null&&(r=0),t==null&&(t=0);function i(){var a,o=e.length,s,l=0,u=0;for(a=0;a<o;++a)s=e[a],l+=s.x,u+=s.y;for(l=(l/o-r)*n,u=(u/o-t)*n,a=0;a<o;++a)s=e[a],s.x-=l,s.y-=u}return i.initialize=function(a){e=a},i.x=function(a){return arguments.length?(r=+a,i):r},i.y=function(a){return arguments.length?(t=+a,i):t},i.strength=function(a){return arguments.length?(n=+a,i):n},i}function Eme(r){const t=+this._x.call(null,r),e=+this._y.call(null,r);return y4(this.cover(t,e),t,e,r)}function y4(r,t,e,n){if(isNaN(t)||isNaN(e))return r;var i,a=r._root,o={data:n},s=r._x0,l=r._y0,u=r._x1,c=r._y1,f,d,h,v,p,g,m,y;if(!a)return r._root=o,r;for(;a.length;)if((p=t>=(f=(s+u)/2))?s=f:u=f,(g=e>=(d=(l+c)/2))?l=d:c=d,i=a,!(a=a[m=g<<1|p]))return i[m]=o,r;if(h=+r._x.call(null,a.data),v=+r._y.call(null,a.data),t===h&&e===v)return o.next=a,i?i[m]=o:r._root=o,r;do i=i?i[m]=new Array(4):r._root=new Array(4),(p=t>=(f=(s+u)/2))?s=f:u=f,(g=e>=(d=(l+c)/2))?l=d:c=d;while((m=g<<1|p)==(y=(v>=d)<<1|h>=f));return i[y]=a,i[m]=o,r}function _me(r){var t,e,n=r.length,i,a,o=new Array(n),s=new Array(n),l=1/0,u=1/0,c=-1/0,f=-1/0;for(e=0;e<n;++e)isNaN(i=+this._x.call(null,t=r[e]))||isNaN(a=+this._y.call(null,t))||(o[e]=i,s[e]=a,i<l&&(l=i),i>c&&(c=i),a<u&&(u=a),a>f&&(f=a));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),e=0;e<n;++e)y4(this,o[e],s[e],r[e]);return this}function Tme(r,t){if(isNaN(r=+r)||isNaN(t=+t))return this;var e=this._x0,n=this._y0,i=this._x1,a=this._y1;if(isNaN(e))i=(e=Math.floor(r))+1,a=(n=Math.floor(t))+1;else{for(var o=i-e||1,s=this._root,l,u;e>r||r>=i||n>t||t>=a;)switch(u=(t<n)<<1|r<e,l=new Array(4),l[u]=s,s=l,o*=2,u){case 0:i=e+o,a=n+o;break;case 1:e=i-o,a=n+o;break;case 2:i=e+o,n=a-o;break;case 3:e=i-o,n=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._y0=n,this._x1=i,this._y1=a,this}function Ame(){var r=[];return this.visit(function(t){if(!t.length)do r.push(t.data);while(t=t.next)}),r}function kme(r){return arguments.length?this.cover(+r[0][0],+r[0][1]).cover(+r[1][0],+r[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ao(r,t,e,n,i){this.node=r,this.x0=t,this.y0=e,this.x1=n,this.y1=i}function Mme(r,t,e){var n,i=this._x0,a=this._y0,o,s,l,u,c=this._x1,f=this._y1,d=[],h=this._root,v,p;for(h&&d.push(new Ao(h,i,a,c,f)),e==null?e=1/0:(i=r-e,a=t-e,c=r+e,f=t+e,e*=e);v=d.pop();)if(!(!(h=v.node)||(o=v.x0)>c||(s=v.y0)>f||(l=v.x1)<i||(u=v.y1)<a))if(h.length){var g=(o+l)/2,m=(s+u)/2;d.push(new Ao(h[3],g,m,l,u),new Ao(h[2],o,m,g,u),new Ao(h[1],g,s,l,m),new Ao(h[0],o,s,g,m)),(p=(t>=m)<<1|r>=g)&&(v=d[d.length-1],d[d.length-1]=d[d.length-1-p],d[d.length-1-p]=v)}else{var y=r-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),x=y*y+b*b;if(x<e){var w=Math.sqrt(e=x);i=r-w,a=t-w,c=r+w,f=t+w,n=h.data}}return n}function Ime(r){if(isNaN(c=+this._x.call(null,r))||isNaN(f=+this._y.call(null,r)))return this;var t,e=this._root,n,i,a,o=this._x0,s=this._y0,l=this._x1,u=this._y1,c,f,d,h,v,p,g,m;if(!e)return this;if(e.length)for(;;){if((v=c>=(d=(o+l)/2))?o=d:l=d,(p=f>=(h=(s+u)/2))?s=h:u=h,t=e,!(e=e[g=p<<1|v]))return this;if(!e.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(n=t,m=g)}for(;e.data!==r;)if(i=e,!(e=e.next))return this;return(a=e.next)&&delete e.next,i?(a?i.next=a:delete i.next,this):t?(a?t[g]=a:delete t[g],(e=t[0]||t[1]||t[2]||t[3])&&e===(t[3]||t[2]||t[1]||t[0])&&!e.length&&(n?n[m]=e:this._root=e),this):(this._root=a,this)}function Pme(r){for(var t=0,e=r.length;t<e;++t)this.remove(r[t]);return this}function Dme(){return this._root}function Rme(){var r=0;return this.visit(function(t){if(!t.length)do++r;while(t=t.next)}),r}function Ome(r){var t=[],e,n=this._root,i,a,o,s,l;for(n&&t.push(new Ao(n,this._x0,this._y0,this._x1,this._y1));e=t.pop();)if(!r(n=e.node,a=e.x0,o=e.y0,s=e.x1,l=e.y1)&&n.length){var u=(a+s)/2,c=(o+l)/2;(i=n[3])&&t.push(new Ao(i,u,c,s,l)),(i=n[2])&&t.push(new Ao(i,a,c,u,l)),(i=n[1])&&t.push(new Ao(i,u,o,s,c)),(i=n[0])&&t.push(new Ao(i,a,o,u,c))}return this}function Lme(r){var t=[],e=[],n;for(this._root&&t.push(new Ao(this._root,this._x0,this._y0,this._x1,this._y1));n=t.pop();){var i=n.node;if(i.length){var a,o=n.x0,s=n.y0,l=n.x1,u=n.y1,c=(o+l)/2,f=(s+u)/2;(a=i[0])&&t.push(new Ao(a,o,s,c,f)),(a=i[1])&&t.push(new Ao(a,c,s,l,f)),(a=i[2])&&t.push(new Ao(a,o,f,c,u)),(a=i[3])&&t.push(new Ao(a,c,f,l,u))}e.push(n)}for(;n=e.pop();)r(n.node,n.x0,n.y0,n.x1,n.y1);return this}function Fme(r){return r[0]}function Nme(r){return arguments.length?(this._x=r,this):this._x}function Bme(r){return r[1]}function $me(r){return arguments.length?(this._y=r,this):this._y}function gk(r,t,e){var n=new mk(t==null?Fme:t,e==null?Bme:e,NaN,NaN,NaN,NaN);return r==null?n:n.addAll(r)}function mk(r,t,e,n,i,a){this._x=r,this._y=t,this._x0=e,this._y0=n,this._x1=i,this._y1=a,this._root=void 0}function b4(r){for(var t={data:r.data},e=t;r=r.next;)e=e.next={data:r.data};return t}var ko=gk.prototype=mk.prototype;ko.copy=function(){var r=new mk(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,e,n;if(!t)return r;if(!t.length)return r._root=b4(t),r;for(e=[{source:t,target:r._root=new Array(4)}];t=e.pop();)for(var i=0;i<4;++i)(n=t.source[i])&&(n.length?e.push({source:n,target:t.target[i]=new Array(4)}):t.target[i]=b4(n));return r};ko.add=Eme;ko.addAll=_me;ko.cover=Tme;ko.data=Ame;ko.extent=kme;ko.find=Mme;ko.remove=Ime;ko.removeAll=Pme;ko.root=Dme;ko.size=Rme;ko.visit=Ome;ko.visitAfter=Lme;ko.x=Nme;ko.y=$me;function Mo(r){return function(){return r}}function Bc(r){return(r()-.5)*1e-6}function zme(r){return r.x+r.vx}function Gme(r){return r.y+r.vy}function x4(r){var t,e,n,i=1,a=1;typeof r!="function"&&(r=Mo(r==null?1:+r));function o(){for(var u,c=t.length,f,d,h,v,p,g,m=0;m<a;++m)for(f=gk(t,zme,Gme).visitAfter(s),u=0;u<c;++u)d=t[u],p=e[d.index],g=p*p,h=d.x+d.vx,v=d.y+d.vy,f.visit(y);function y(b,x,w,S,C){var _=b.data,T=b.r,E=p+T;if(_){if(_.index>d.index){var k=h-_.x-_.vx,I=v-_.y-_.vy,P=k*k+I*I;P<E*E&&(k===0&&(k=Bc(n),P+=k*k),I===0&&(I=Bc(n),P+=I*I),P=(E-(P=Math.sqrt(P)))/P*i,d.vx+=(k*=P)*(E=(T*=T)/(g+T)),d.vy+=(I*=P)*E,_.vx-=k*(E=1-E),_.vy-=I*E)}return}return x>h+E||S<h-E||w>v+E||C<v-E}}function s(u){if(u.data)return u.r=e[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(!!t){var u,c=t.length,f;for(e=new Array(c),u=0;u<c;++u)f=t[u],e[f.index]=+r(f,u,t)}}return o.initialize=function(u,c){t=u,n=c,l()},o.iterations=function(u){return arguments.length?(a=+u,o):a},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(r=typeof u=="function"?u:Mo(+u),l(),o):r},o}function Ume(r){return r.index}function w4(r,t){var e=r.get(t);if(!e)throw new Error("node not found: "+t);return e}function yk(r){var t=Ume,e=f,n,i=Mo(30),a,o,s,l,u,c=1;r==null&&(r=[]);function f(g){return 1/Math.min(s[g.source.index],s[g.target.index])}function d(g){for(var m=0,y=r.length;m<c;++m)for(var b=0,x,w,S,C,_,T,E;b<y;++b)x=r[b],w=x.source,S=x.target,C=S.x+S.vx-w.x-w.vx||Bc(u),_=S.y+S.vy-w.y-w.vy||Bc(u),T=Math.sqrt(C*C+_*_),T=(T-a[b])/T*g*n[b],C*=T,_*=T,S.vx-=C*(E=l[b]),S.vy-=_*E,w.vx+=C*(E=1-E),w.vy+=_*E}function h(){if(!!o){var g,m=o.length,y=r.length,b=new Map(o.map((w,S)=>[t(w,S,o),w])),x;for(g=0,s=new Array(m);g<y;++g)x=r[g],x.index=g,typeof x.source!="object"&&(x.source=w4(b,x.source)),typeof x.target!="object"&&(x.target=w4(b,x.target)),s[x.source.index]=(s[x.source.index]||0)+1,s[x.target.index]=(s[x.target.index]||0)+1;for(g=0,l=new Array(y);g<y;++g)x=r[g],l[g]=s[x.source.index]/(s[x.source.index]+s[x.target.index]);n=new Array(y),v(),a=new Array(y),p()}}function v(){if(!!o)for(var g=0,m=r.length;g<m;++g)n[g]=+e(r[g],g,r)}function p(){if(!!o)for(var g=0,m=r.length;g<m;++g)a[g]=+i(r[g],g,r)}return d.initialize=function(g,m){o=g,u=m,h()},d.links=function(g){return arguments.length?(r=g,h(),d):r},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(e=typeof g=="function"?g:Mo(+g),v(),d):e},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Mo(+g),p(),d):i},d}var Vme={value:()=>{}};function S4(){for(var r=0,t=arguments.length,e={},n;r<t;++r){if(!(n=arguments[r]+"")||n in e||/[\s.]/.test(n))throw new Error("illegal type: "+n);e[n]=[]}return new aw(e)}function aw(r){this._=r}function Hme(r,t){return r.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");if(i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}aw.prototype=S4.prototype={constructor:aw,on:function(r,t){var e=this._,n=Hme(r+"",e),i,a=-1,o=n.length;if(arguments.length<2){for(;++a<o;)if((i=(r=n[a]).type)&&(i=Wme(e[i],r.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(r=n[a]).type)e[i]=C4(e[i],r.name,t);else if(t==null)for(i in e)e[i]=C4(e[i],r.name,null);return this},copy:function(){var r={},t=this._;for(var e in t)r[e]=t[e].slice();return new aw(r)},call:function(r,t){if((i=arguments.length-2)>0)for(var e=new Array(i),n=0,i,a;n<i;++n)e[n]=arguments[n+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(a=this._[r],n=0,i=a.length;n<i;++n)a[n].value.apply(t,e)},apply:function(r,t,e){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var n=this._[r],i=0,a=n.length;i<a;++i)n[i].value.apply(t,e)}};function Wme(r,t){for(var e=0,n=r.length,i;e<n;++e)if((i=r[e]).name===t)return i.value}function C4(r,t,e){for(var n=0,i=r.length;n<i;++n)if(r[n].name===t){r[n]=Vme,r=r.slice(0,n).concat(r.slice(n+1));break}return e!=null&&r.push({name:t,value:e}),r}var Uv=0,dy=0,hy=0,E4=1e3,ow,vy,sw=0,Sd=0,lw=0,py=typeof performance=="object"&&performance.now?performance:Date,_4=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function T4(){return Sd||(_4(jme),Sd=py.now()+lw)}function jme(){Sd=0}function bk(){this._call=this._time=this._next=null}bk.prototype=A4.prototype={constructor:bk,restart:function(r,t,e){if(typeof r!="function")throw new TypeError("callback is not a function");e=(e==null?T4():+e)+(t==null?0:+t),!this._next&&vy!==this&&(vy?vy._next=this:ow=this,vy=this),this._call=r,this._time=e,xk()},stop:function(){this._call&&(this._call=null,this._time=1/0,xk())}};function A4(r,t,e){var n=new bk;return n.restart(r,t,e),n}function Yme(){T4(),++Uv;for(var r=ow,t;r;)(t=Sd-r._time)>=0&&r._call.call(null,t),r=r._next;--Uv}function k4(){Sd=(sw=py.now())+lw,Uv=dy=0;try{Yme()}finally{Uv=0,qme(),Sd=0}}function Xme(){var r=py.now(),t=r-sw;t>E4&&(lw-=t,sw=r)}function qme(){for(var r,t=ow,e,n=1/0;t;)t._call?(n>t._time&&(n=t._time),r=t,t=t._next):(e=t._next,t._next=null,t=r?r._next=e:ow=e);vy=r,xk(n)}function xk(r){if(!Uv){dy&&(dy=clearTimeout(dy));var t=r-Sd;t>24?(r<1/0&&(dy=setTimeout(k4,r-py.now()-lw)),hy&&(hy=clearInterval(hy))):(hy||(sw=py.now(),hy=setInterval(Xme,E4)),Uv=1,_4(k4))}}const Kme=1664525,Zme=1013904223,M4=4294967296;function Qme(){let r=1;return()=>(r=(Kme*r+Zme)%M4)/M4}function Jme(r){return r.x}function eye(r){return r.y}var tye=10,rye=Math.PI*(3-Math.sqrt(5));function I4(r){var t,e=1,n=.001,i=1-Math.pow(n,1/300),a=0,o=.6,s=new Map,l=A4(f),u=S4("tick","end"),c=Qme();r==null&&(r=[]);function f(){d(),u.call("tick",t),e<n&&(l.stop(),u.call("end",t))}function d(p){var g,m=r.length,y;p===void 0&&(p=1);for(var b=0;b<p;++b)for(e+=(a-e)*i,s.forEach(function(x){x(e)}),g=0;g<m;++g)y=r[g],y.fx==null?y.x+=y.vx*=o:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=o:(y.y=y.fy,y.vy=0);return t}function h(){for(var p=0,g=r.length,m;p<g;++p){if(m=r[p],m.index=p,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var y=tye*Math.sqrt(.5+p),b=p*rye;m.x=y*Math.cos(b),m.y=y*Math.sin(b)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function v(p){return p.initialize&&p.initialize(r,c),p}return h(),t={tick:d,restart:function(){return l.restart(f),t},stop:function(){return l.stop(),t},nodes:function(p){return arguments.length?(r=p,h(),s.forEach(v),t):r},alpha:function(p){return arguments.length?(e=+p,t):e},alphaMin:function(p){return arguments.length?(n=+p,t):n},alphaDecay:function(p){return arguments.length?(i=+p,t):+i},alphaTarget:function(p){return arguments.length?(a=+p,t):a},velocityDecay:function(p){return arguments.length?(o=1-p,t):1-o},randomSource:function(p){return arguments.length?(c=p,s.forEach(v),t):c},force:function(p,g){return arguments.length>1?(g==null?s.delete(p):s.set(p,v(g)),t):s.get(p)},find:function(p,g,m){var y=0,b=r.length,x,w,S,C,_;for(m==null?m=1/0:m*=m,y=0;y<b;++y)C=r[y],x=p-C.x,w=g-C.y,S=x*x+w*w,S<m&&(_=C,m=S);return _},on:function(p,g){return arguments.length>1?(u.on(p,g),t):u.on(p)}}}function P4(){var r,t,e,n,i=Mo(-30),a,o=1,s=1/0,l=.81;function u(h){var v,p=r.length,g=gk(r,Jme,eye).visitAfter(f);for(n=h,v=0;v<p;++v)t=r[v],g.visit(d)}function c(){if(!!r){var h,v=r.length,p;for(a=new Array(v),h=0;h<v;++h)p=r[h],a[p.index]=+i(p,h,r)}}function f(h){var v=0,p,g,m=0,y,b,x;if(h.length){for(y=b=x=0;x<4;++x)(p=h[x])&&(g=Math.abs(p.value))&&(v+=p.value,m+=g,y+=g*p.x,b+=g*p.y);h.x=y/m,h.y=b/m}else{p=h,p.x=p.data.x,p.y=p.data.y;do v+=a[p.data.index];while(p=p.next)}h.value=v}function d(h,v,p,g){if(!h.value)return!0;var m=h.x-t.x,y=h.y-t.y,b=g-v,x=m*m+y*y;if(b*b/l<x)return x<s&&(m===0&&(m=Bc(e),x+=m*m),y===0&&(y=Bc(e),x+=y*y),x<o&&(x=Math.sqrt(o*x)),t.vx+=m*h.value*n/x,t.vy+=y*h.value*n/x),!0;if(h.length||x>=s)return;(h.data!==t||h.next)&&(m===0&&(m=Bc(e),x+=m*m),y===0&&(y=Bc(e),x+=y*y),x<o&&(x=Math.sqrt(o*x)));do h.data!==t&&(b=a[h.data.index]*n/x,t.vx+=m*b,t.vy+=y*b);while(h=h.next)}return u.initialize=function(h,v){r=h,e=v,c()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Mo(+h),c(),u):i},u.distanceMin=function(h){return arguments.length?(o=h*h,u):Math.sqrt(o)},u.distanceMax=function(h){return arguments.length?(s=h*h,u):Math.sqrt(s)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function nye(r){var t=Mo(.1),e,n,i;typeof r!="function"&&(r=Mo(r==null?0:+r));function a(s){for(var l=0,u=e.length,c;l<u;++l)c=e[l],c.vx+=(i[l]-c.x)*n[l]*s}function o(){if(!!e){var s,l=e.length;for(n=new Array(l),i=new Array(l),s=0;s<l;++s)n[s]=isNaN(i[s]=+r(e[s],s,e))?0:+t(e[s],s,e)}}return a.initialize=function(s){e=s,o()},a.strength=function(s){return arguments.length?(t=typeof s=="function"?s:Mo(+s),o(),a):t},a.x=function(s){return arguments.length?(r=typeof s=="function"?s:Mo(+s),o(),a):r},a}function iye(r){var t=Mo(.1),e,n,i;typeof r!="function"&&(r=Mo(r==null?0:+r));function a(s){for(var l=0,u=e.length,c;l<u;++l)c=e[l],c.vy+=(i[l]-c.y)*n[l]*s}function o(){if(!!e){var s,l=e.length;for(n=new Array(l),i=new Array(l),s=0;s<l;++s)n[s]=isNaN(i[s]=+r(e[s],s,e))?0:+t(e[s],s,e)}}return a.initialize=function(s){e=s,o()},a.strength=function(s){return arguments.length?(t=typeof s=="function"?s:Mo(+s),o(),a):t},a.y=function(s){return arguments.length?(r=typeof s=="function"?s:Mo(+s),o(),a):r},a}function aye(){function r(q){return()=>q}let t=q=>q.cluster,e=r(1),n=r(-1),i=r(100),a=r(.1),o=[0,0],s=[],l={},u=[],c=100,f=100,d={none:{x:0,y:0}},h=[],v,p="force",g=!0,m=.1;function y(q){if(!g)return y;v.tick(),_();for(let j=0,fe=s.length,se,ce=q*m;j<fe;++j)se=s[j],se.vx+=(d[t(se)].x-se.x)*ce,se.vy+=(d[t(se)].y-se.y)*ce}function b(){!s||x()}function x(){if(!s||!s.length)return;if(t(s[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");const q=w();v=I4(q.nodes).force("x",nye(c).strength(.1)).force("y",iye(f).strength(.1)).force("collide",x4(j=>j.r).iterations(4)).force("charge",P4().strength(n)).force("links",yk(q.nodes.length?q.links:[]).distance(i).strength(a)),h=v.nodes(),_()}function w(){const q=[],j=[],fe={};let se=[],ce={},_e=[];return ce=S(s),_e=C(u),se=Object.keys(ce),se.forEach((Me,Ye)=>{const De=ce[Me];q.push({id:Me,size:De.count,r:Math.sqrt(De.sumforceNodeSize/Math.PI)}),fe[Me]=Ye}),_e.forEach(Me=>{const Ye=An(Me,"source"),De=An(Me,"target"),D=fe[Ye],z=fe[De];D!==void 0&&z!==void 0&&j.push({source:D,target:z,count:Me.count})}),{nodes:q,links:j}}function S(q){const j={};return q.forEach(fe=>{const se=t(fe);j[se]||(j[se]={count:0,sumforceNodeSize:0})}),q.forEach(fe=>{const se=t(fe),ce=e(fe),_e=j[se];_e.count=_e.count+1,_e.sumforceNodeSize=_e.sumforceNodeSize+Math.PI*(ce*ce)*1.3,j[se]=_e}),j}function C(q){const j={},fe=[];return q.forEach(ce=>{const _e=T(ce);let Me=0;j[_e]!==void 0&&(Me=j[_e]),Me+=1,j[_e]=Me}),Object.entries(j).forEach(([ce,_e])=>{const Me=ce.split("~")[0],Ye=ce.split("~")[1];Me!==void 0&&Ye!==void 0&&fe.push({source:Me,target:Ye,count:_e})}),fe}function _(){return d={none:{x:0,y:0}},h.forEach(q=>{d[q.id]={x:q.x-o[0],y:q.y-o[1]}}),d}function T(q){const j=An(q,"source"),fe=An(q,"target"),se=t(l[j]),ce=t(l[fe]);return se<=ce?`${se}~${ce}`:`${ce}~${se}`}function E(q){l={},q.forEach(j=>{l[j.id]=j})}function k(q){return arguments.length?(p=q,b(),y):p}function I(q){return arguments.length?typeof q=="string"?(t=j=>j[q],y):(t=q,y):t}function P(q){return arguments.length?(g=q,y):g}function F(q){return arguments.length?(m=q,y):m}function $(q){return arguments.length?(c=q,y):c}function R(q){return arguments.length?(f=q,y):f}function L(q){return arguments.length?(E(q||[]),s=q||[],y):s}function O(q){return arguments.length?(u=q||[],b(),y):u}function B(q){return arguments.length?(typeof q=="function"?e=q:e=r(+q),b(),y):e}function U(q){return arguments.length?(typeof q=="function"?n=q:n=r(+q),b(),y):n}function W(q){return arguments.length?(typeof q=="function"?i=q:i=r(+q),b(),y):i}function X(q){return arguments.length?(typeof q=="function"?a=q:a=r(+q),b(),y):a}function ie(q){return arguments.length?(o=q,y):o}return y.initialize=q=>{s=q,b()},y.template=k,y.groupBy=I,y.enableGrouping=P,y.strength=F,y.centerX=$,y.centerY=R,y.nodes=L,y.links=O,y.forceNodeSize=B,y.nodeSize=y.forceNodeSize,y.forceCharge=U,y.forceLinkDistance=W,y.forceLinkStrength=X,y.offset=ie,y.getFocis=_,y}const wk={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};class D4 extends _o{constructor(t){super();this.center=[0,0],this.nodeStrength=null,this.edgeStrength=null,this.preventOverlap=!1,this.clusterNodeStrength=null,this.clusterEdgeStrength=null,this.clusterEdgeDistance=null,this.clusterNodeSize=null,this.clusterFociStrength=null,this.linkDistance=50,this.alphaDecay=.028,this.alphaMin=.001,this.alpha=.3,this.collideStrength=1,this.workerEnabled=!1,this.tick=()=>{},this.onLayoutEnd=()=>{},this.ticking=void 0,t&&this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick(){},onLayoutEnd(){},workerEnabled:!1}}init(t){const e=this;e.nodes=t.nodes||[];const n=t.edges||[];e.edges=n.map(i=>{const a={},o=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(i).forEach(s=>{o.indexOf(s)>-1||(a[s]=i[s])}),a}),e.ticking=!1}execute(t){const e=this,n=e.nodes,i=e.edges;if(e.ticking)return;let a=e.forceSimulation;const o=e.alphaMin,s=e.alphaDecay,l=e.alpha;if(a){if(t){if(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(n),e.clusterForce.links(i)),a.nodes(n),i&&e.edgeForce)e.edgeForce.links(i);else if(i&&!e.edgeForce){const u=yk().id(c=>c.id).links(i);e.edgeStrength&&u.strength(e.edgeStrength),e.linkDistance&&u.distance(e.linkDistance),e.edgeForce=u,a.force("link",u)}}e.preventOverlap&&e.overlapProcess(a),a.alpha(l).restart(),this.ticking=!0}else try{const u=P4();if(e.nodeStrength&&u.strength(e.nodeStrength),a=I4().nodes(n),e.clustering){const c=aye();c.centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),i&&c.links(i),n&&c.nodes(n),c.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=c,a.force("group",c)}if(a.force("center",Cme(e.center[0],e.center[1])).force("charge",u).alpha(l).alphaDecay(s).alphaMin(o),e.preventOverlap&&e.overlapProcess(a),i){const c=yk().id(f=>f.id).links(i);e.edgeStrength&&c.strength(e.edgeStrength),e.linkDistance&&c.distance(e.linkDistance),e.edgeForce=c,a.force("link",c)}if(e.workerEnabled&&!sye()&&(e.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!e.workerEnabled)a.on("tick",()=>{e.tick()}).on("end",()=>{e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()}),e.ticking=!0;else{a.stop();const c=oye(a);for(let f=1;f<=c;f++)a.tick(),postMessage({nodes:n,currentTick:f,totalTicks:c,type:wk.TICK},void 0);e.ticking=!1}e.forceSimulation=a,e.ticking=!0}catch(u){e.ticking=!1,console.warn(u)}}overlapProcess(t){const e=this,n=e.nodeSize,i=e.nodeSpacing;let a,o;const s=e.collideStrength;if(Qt(i)?o=()=>i:Nc(i)?o=i:o=()=>0,!n)a=l=>l.size?Ka(l.size)?(l.size[0]>l.size[1]?l.size[0]:l.size[1])/2+o(l):Bl(l.size)?(l.size.width>l.size.height?l.size.width:l.size.height)/2+o(l):l.size/2+o(l):10+o(l);else if(Nc(n))a=l=>n(l)+o(l);else if(Ka(n)){const u=(n[0]>n[1]?n[0]:n[1])/2;a=c=>u+o(c)}else if(Qt(n)){const l=n/2;a=u=>l+o(u)}else a=()=>10;t.force("collisionForce",x4(a).strength(s))}updateCfg(t){const e=this;e.ticking&&(e.forceSimulation.stop(),e.ticking=!1),e.forceSimulation=null,Object.assign(e,t)}destroy(){const t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.nodes=null,t.edges=null,t.destroyed=!0}}function oye(r){const t=r.alphaMin(),e=r.alphaTarget(),n=r.alpha(),i=Math.log((t-e)/(n-e))/Math.log(1-r.alphaDecay());return Math.ceil(i)}function sye(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function lye(r,t,e,n){r.forEach((i,a)=>{r[a].children=[],r[a].parent=[]}),n?t.forEach(i=>{const a=An(i,"source"),o=An(i,"target");let s=0;a&&(s=e[a]);let l=0;o&&(l=e[o]);const u=r[s].children,c=r[l].parent;u.push(r[l].id),c.push(r[s].id)}):t.forEach(i=>{const a=An(i,"source"),o=An(i,"target");let s=0;a&&(s=e[a]);let l=0;o&&(l=e[o]);const u=r[s].children,c=r[l].children;u.push(r[l].id),c.push(r[s].id)})}function uye(r,t,e){const n=e.length;for(let i=0;i<n;i++){const a=An(e[i],"source"),o=An(e[i],"target");if(r.id===a&&t.id===o||t.id===a&&r.id===o)return!0}return!1}function cye(r,t){const e=r.degree,n=t.degree;return e<n?-1:e>n?1:0}class R4 extends _o{constructor(t){super();this.radius=null,this.startRadius=null,this.endRadius=null,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.divisions=1,this.ordering=null,this.angleRatio=1,this.nodes=[],this.edges=[],this.nodeMap={},this.degrees=[],this.width=300,this.height=300,this.updateCfg(t)}getDefaultCfg(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}execute(){const t=this,e=t.nodes,n=t.edges,i=e.length;if(i===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const a=t.center;if(i===1){e[0].x=a[0],e[0].y=a[1],t.onLayoutEnd&&t.onLayoutEnd();return}let o=t.radius,s=t.startRadius,l=t.endRadius;const u=t.divisions,c=t.startAngle,f=t.endAngle,d=(f-c)/i,h={};e.forEach((w,S)=>{h[w.id]=S}),t.nodeMap=h;const v=fy(e.length,h,n);t.degrees=v,!o&&!s&&!l?o=t.height>t.width?t.width/2:t.height/2:!s&&l?s=l:s&&!l&&(l=s);const p=t.angleRatio,g=d*p,m=t.ordering;let y=[];m==="topology"?y=t.topologyOrdering():m==="topology-directed"?y=t.topologyOrdering(!0):m==="degree"?y=t.degreeOrdering():y=e;const b=t.clockwise,x=Math.ceil(i/u);for(let w=0;w<i;++w){let S=o;!S&&s!==null&&l!==null&&(S=s+w*(l-s)/(i-1)),S||(S=10+w*100/(i-1));let C=c+w%x*g+2*Math.PI/u*Math.floor(w/x);b||(C=f-w%x*g-2*Math.PI/u*Math.floor(w/x)),y[w].x=a[0]+Math.cos(C)*S,y[w].y=a[1]+Math.sin(C)*S,y[w].weight=v[w]}return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:y,edges:this.edges}}topologyOrdering(t=!1){const e=this,n=e.degrees,i=e.edges,a=e.nodes,o=vk(a),s=e.nodeMap,l=[o[0]],u=[a[0]],c=[],f=a.length;c[0]=!0,lye(o,i,s,t);let d=0;return o.forEach((h,v)=>{if(v!==0)if((v===f-1||n[v]!==n[v+1]||uye(l[d],h,i))&&!c[v])l.push(h),u.push(a[s[h.id]]),c[v]=!0,d++;else{const p=l[d].children;let g=!1;for(let y=0;y<p.length;y++){const b=s[p[y]];if(n[b]===n[v]&&!c[b]){l.push(o[b]),u.push(a[s[o[b].id]]),c[b]=!0,g=!0;break}}let m=0;for(;!g&&(c[m]||(l.push(o[m]),u.push(a[s[o[m].id]]),c[m]=!0,g=!0),m++,m!==f););}}),u}degreeOrdering(){const t=this,e=t.nodes,n=[],i=t.degrees;return e.forEach((a,o)=>{a.degree=i[o],n.push(a)}),n.sort(cye),n}getType(){return"circular"}}function fye(){this.__data__=[],this.size=0}var dye=fye;function hye(r,t){return r===t||r!==r&&t!==t}var Vv=hye;function vye(r,t){for(var e=r.length;e--;)if(Vv(r[e][0],t))return e;return-1}var uw=vye,pye=Array.prototype,gye=pye.splice;function mye(r){var t=this.__data__,e=uw(t,r);if(e<0)return!1;var n=t.length-1;return e==n?t.pop():gye.call(t,e,1),--this.size,!0}var yye=mye;function bye(r){var t=this.__data__,e=uw(t,r);return e<0?void 0:t[e][1]}var xye=bye;function wye(r){return uw(this.__data__,r)>-1}var Sye=wye;function Cye(r,t){var e=this.__data__,n=uw(e,r);return n<0?(++this.size,e.push([r,t])):e[n][1]=t,this}var Eye=Cye;function Hv(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}Hv.prototype.clear=dye;Hv.prototype.delete=yye;Hv.prototype.get=xye;Hv.prototype.has=Sye;Hv.prototype.set=Eye;var cw=Hv;function _ye(){this.__data__=new cw,this.size=0}var Tye=_ye;function Aye(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e}var kye=Aye;function Mye(r){return this.__data__.get(r)}var Iye=Mye;function Pye(r){return this.__data__.has(r)}var Dye=Pye,Rye=typeof Lc=="object"&&Lc&&Lc.Object===Object&&Lc,O4=Rye,Oye=typeof self=="object"&&self&&self.Object===Object&&self,Lye=O4||Oye||Function("return this")(),nl=Lye,Fye=nl.Symbol,Ns=Fye,L4=Object.prototype,Nye=L4.hasOwnProperty,Bye=L4.toString,gy=Ns?Ns.toStringTag:void 0;function $ye(r){var t=Nye.call(r,gy),e=r[gy];try{r[gy]=void 0;var n=!0}catch{}var i=Bye.call(r);return n&&(t?r[gy]=e:delete r[gy]),i}var zye=$ye,Gye=Object.prototype,Uye=Gye.toString;function Vye(r){return Uye.call(r)}var Hye=Vye,Wye="[object Null]",jye="[object Undefined]",F4=Ns?Ns.toStringTag:void 0;function Yye(r){return r==null?r===void 0?jye:Wye:F4&&F4 in Object(r)?zye(r):Hye(r)}var $c=Yye;function Xye(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}var zo=Xye,qye="[object AsyncFunction]",Kye="[object Function]",Zye="[object GeneratorFunction]",Qye="[object Proxy]";function Jye(r){if(!zo(r))return!1;var t=$c(r);return t==Kye||t==Zye||t==qye||t==Qye}var my=Jye,e0e=nl["__core-js_shared__"],Sk=e0e,N4=function(){var r=/[^.]+$/.exec(Sk&&Sk.keys&&Sk.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t0e(r){return!!N4&&N4 in r}var r0e=t0e,n0e=Function.prototype,i0e=n0e.toString;function a0e(r){if(r!=null){try{return i0e.call(r)}catch{}try{return r+""}catch{}}return""}var Cd=a0e,o0e=/[\\^$.*+?()[\]{}|]/g,s0e=/^\[object .+?Constructor\]$/,l0e=Function.prototype,u0e=Object.prototype,c0e=l0e.toString,f0e=u0e.hasOwnProperty,d0e=RegExp("^"+c0e.call(f0e).replace(o0e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h0e(r){if(!zo(r)||r0e(r))return!1;var t=my(r)?d0e:s0e;return t.test(Cd(r))}var v0e=h0e;function p0e(r,t){return r==null?void 0:r[t]}var g0e=p0e;function m0e(r,t){var e=g0e(r,t);return v0e(e)?e:void 0}var Ed=m0e,y0e=Ed(nl,"Map"),yy=y0e,b0e=Ed(Object,"create"),by=b0e;function x0e(){this.__data__=by?by(null):{},this.size=0}var w0e=x0e;function S0e(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}var C0e=S0e,E0e="__lodash_hash_undefined__",_0e=Object.prototype,T0e=_0e.hasOwnProperty;function A0e(r){var t=this.__data__;if(by){var e=t[r];return e===E0e?void 0:e}return T0e.call(t,r)?t[r]:void 0}var k0e=A0e,M0e=Object.prototype,I0e=M0e.hasOwnProperty;function P0e(r){var t=this.__data__;return by?t[r]!==void 0:I0e.call(t,r)}var D0e=P0e,R0e="__lodash_hash_undefined__";function O0e(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=by&&t===void 0?R0e:t,this}var L0e=O0e;function Wv(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}Wv.prototype.clear=w0e;Wv.prototype.delete=C0e;Wv.prototype.get=k0e;Wv.prototype.has=D0e;Wv.prototype.set=L0e;var B4=Wv;function F0e(){this.size=0,this.__data__={hash:new B4,map:new(yy||cw),string:new B4}}var N0e=F0e;function B0e(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}var $0e=B0e;function z0e(r,t){var e=r.__data__;return $0e(t)?e[typeof t=="string"?"string":"hash"]:e.map}var fw=z0e;function G0e(r){var t=fw(this,r).delete(r);return this.size-=t?1:0,t}var U0e=G0e;function V0e(r){return fw(this,r).get(r)}var H0e=V0e;function W0e(r){return fw(this,r).has(r)}var j0e=W0e;function Y0e(r,t){var e=fw(this,r),n=e.size;return e.set(r,t),this.size+=e.size==n?0:1,this}var X0e=Y0e;function jv(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}jv.prototype.clear=N0e;jv.prototype.delete=U0e;jv.prototype.get=H0e;jv.prototype.has=j0e;jv.prototype.set=X0e;var dw=jv,q0e=200;function K0e(r,t){var e=this.__data__;if(e instanceof cw){var n=e.__data__;if(!yy||n.length<q0e-1)return n.push([r,t]),this.size=++e.size,this;e=this.__data__=new dw(n)}return e.set(r,t),this.size=e.size,this}var Z0e=K0e;function Yv(r){var t=this.__data__=new cw(r);this.size=t.size}Yv.prototype.clear=Tye;Yv.prototype.delete=kye;Yv.prototype.get=Iye;Yv.prototype.has=Dye;Yv.prototype.set=Z0e;var Xv=Yv;function Q0e(r,t){for(var e=-1,n=r==null?0:r.length;++e<n&&t(r[e],e,r)!==!1;);return r}var Ck=Q0e,J0e=function(){try{var r=Ed(Object,"defineProperty");return r({},"",{}),r}catch{}}(),hw=J0e;function ebe(r,t,e){t=="__proto__"&&hw?hw(r,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):r[t]=e}var vw=ebe,tbe=Object.prototype,rbe=tbe.hasOwnProperty;function nbe(r,t,e){var n=r[t];(!(rbe.call(r,t)&&Vv(n,e))||e===void 0&&!(t in r))&&vw(r,t,e)}var pw=nbe;function ibe(r,t,e,n){var i=!e;e||(e={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=n?n(e[s],r[s],s,e,r):void 0;l===void 0&&(l=r[s]),i?vw(e,s,l):pw(e,s,l)}return e}var xy=ibe;function abe(r,t){for(var e=-1,n=Array(r);++e<r;)n[e]=t(e);return n}var obe=abe;function sbe(r){return r!=null&&typeof r=="object"}var il=sbe,lbe="[object Arguments]";function ube(r){return il(r)&&$c(r)==lbe}var $4=ube,z4=Object.prototype,cbe=z4.hasOwnProperty,fbe=z4.propertyIsEnumerable,dbe=$4(function(){return arguments}())?$4:function(r){return il(r)&&cbe.call(r,"callee")&&!fbe.call(r,"callee")},qv=dbe,hbe=Array.isArray,Ji=hbe;function vbe(){return!1}var pbe=vbe,_d=$r(function(r,t){var e=t&&!t.nodeType&&t,n=e&&!0&&r&&!r.nodeType&&r,i=n&&n.exports===e,a=i?nl.Buffer:void 0,o=a?a.isBuffer:void 0,s=o||pbe;r.exports=s}),gbe=9007199254740991,mbe=/^(?:0|[1-9]\d*)$/;function ybe(r,t){var e=typeof r;return t=t==null?gbe:t,!!t&&(e=="number"||e!="symbol"&&mbe.test(r))&&r>-1&&r%1==0&&r<t}var gw=ybe,bbe=9007199254740991;function xbe(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=bbe}var Ek=xbe,wbe="[object Arguments]",Sbe="[object Array]",Cbe="[object Boolean]",Ebe="[object Date]",_be="[object Error]",Tbe="[object Function]",Abe="[object Map]",kbe="[object Number]",Mbe="[object Object]",Ibe="[object RegExp]",Pbe="[object Set]",Dbe="[object String]",Rbe="[object WeakMap]",Obe="[object ArrayBuffer]",Lbe="[object DataView]",Fbe="[object Float32Array]",Nbe="[object Float64Array]",Bbe="[object Int8Array]",$be="[object Int16Array]",zbe="[object Int32Array]",Gbe="[object Uint8Array]",Ube="[object Uint8ClampedArray]",Vbe="[object Uint16Array]",Hbe="[object Uint32Array]",yi={};yi[Fbe]=yi[Nbe]=yi[Bbe]=yi[$be]=yi[zbe]=yi[Gbe]=yi[Ube]=yi[Vbe]=yi[Hbe]=!0;yi[wbe]=yi[Sbe]=yi[Obe]=yi[Cbe]=yi[Lbe]=yi[Ebe]=yi[_be]=yi[Tbe]=yi[Abe]=yi[kbe]=yi[Mbe]=yi[Ibe]=yi[Pbe]=yi[Dbe]=yi[Rbe]=!1;function Wbe(r){return il(r)&&Ek(r.length)&&!!yi[$c(r)]}var jbe=Wbe;function Ybe(r){return function(t){return r(t)}}var mw=Ybe,Kv=$r(function(r,t){var e=t&&!t.nodeType&&t,n=e&&!0&&r&&!r.nodeType&&r,i=n&&n.exports===e,a=i&&O4.process,o=function(){try{var s=n&&n.require&&n.require("util").types;return s||a&&a.binding&&a.binding("util")}catch{}}();r.exports=o}),G4=Kv&&Kv.isTypedArray,Xbe=G4?mw(G4):jbe,wy=Xbe,qbe=Object.prototype,Kbe=qbe.hasOwnProperty;function Zbe(r,t){var e=Ji(r),n=!e&&qv(r),i=!e&&!n&&_d(r),a=!e&&!n&&!i&&wy(r),o=e||n||i||a,s=o?obe(r.length,String):[],l=s.length;for(var u in r)(t||Kbe.call(r,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||gw(u,l)))&&s.push(u);return s}var U4=Zbe,Qbe=Object.prototype;function Jbe(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||Qbe;return r===e}var yw=Jbe;function exe(r,t){return function(e){return r(t(e))}}var V4=exe,txe=V4(Object.keys,Object),rxe=txe,nxe=Object.prototype,ixe=nxe.hasOwnProperty;function axe(r){if(!yw(r))return rxe(r);var t=[];for(var e in Object(r))ixe.call(r,e)&&e!="constructor"&&t.push(e);return t}var _k=axe;function oxe(r){return r!=null&&Ek(r.length)&&!my(r)}var Tu=oxe;function sxe(r){return Tu(r)?U4(r):_k(r)}var zc=sxe;function lxe(r,t){return r&&xy(t,zc(t),r)}var uxe=lxe;function cxe(r){var t=[];if(r!=null)for(var e in Object(r))t.push(e);return t}var fxe=cxe,dxe=Object.prototype,hxe=dxe.hasOwnProperty;function vxe(r){if(!zo(r))return fxe(r);var t=yw(r),e=[];for(var n in r)n=="constructor"&&(t||!hxe.call(r,n))||e.push(n);return e}var pxe=vxe;function gxe(r){return Tu(r)?U4(r,!0):pxe(r)}var Td=gxe;function mxe(r,t){return r&&xy(t,Td(t),r)}var yxe=mxe,H4=$r(function(r,t){var e=t&&!t.nodeType&&t,n=e&&!0&&r&&!r.nodeType&&r,i=n&&n.exports===e,a=i?nl.Buffer:void 0,o=a?a.allocUnsafe:void 0;function s(l,u){if(u)return l.slice();var c=l.length,f=o?o(c):new l.constructor(c);return l.copy(f),f}r.exports=s});function bxe(r,t){var e=-1,n=r.length;for(t||(t=Array(n));++e<n;)t[e]=r[e];return t}var W4=bxe;function xxe(r,t){for(var e=-1,n=r==null?0:r.length,i=0,a=[];++e<n;){var o=r[e];t(o,e,r)&&(a[i++]=o)}return a}var j4=xxe;function wxe(){return[]}var Y4=wxe,Sxe=Object.prototype,Cxe=Sxe.propertyIsEnumerable,X4=Object.getOwnPropertySymbols,Exe=X4?function(r){return r==null?[]:(r=Object(r),j4(X4(r),function(t){return Cxe.call(r,t)}))}:Y4,Tk=Exe;function _xe(r,t){return xy(r,Tk(r),t)}var Txe=_xe;function Axe(r,t){for(var e=-1,n=t.length,i=r.length;++e<n;)r[i+e]=t[e];return r}var Ak=Axe,kxe=V4(Object.getPrototypeOf,Object),bw=kxe,Mxe=Object.getOwnPropertySymbols,Ixe=Mxe?function(r){for(var t=[];r;)Ak(t,Tk(r)),r=bw(r);return t}:Y4,q4=Ixe;function Pxe(r,t){return xy(r,q4(r),t)}var Dxe=Pxe;function Rxe(r,t,e){var n=t(r);return Ji(r)?n:Ak(n,e(r))}var K4=Rxe;function Oxe(r){return K4(r,zc,Tk)}var kk=Oxe;function Lxe(r){return K4(r,Td,q4)}var Fxe=Lxe,Nxe=Ed(nl,"DataView"),Mk=Nxe,Bxe=Ed(nl,"Promise"),Ik=Bxe,$xe=Ed(nl,"Set"),Zv=$xe,zxe=Ed(nl,"WeakMap"),Pk=zxe,Z4="[object Map]",Gxe="[object Object]",Q4="[object Promise]",J4="[object Set]",e6="[object WeakMap]",t6="[object DataView]",Uxe=Cd(Mk),Vxe=Cd(yy),Hxe=Cd(Ik),Wxe=Cd(Zv),jxe=Cd(Pk),Ad=$c;(Mk&&Ad(new Mk(new ArrayBuffer(1)))!=t6||yy&&Ad(new yy)!=Z4||Ik&&Ad(Ik.resolve())!=Q4||Zv&&Ad(new Zv)!=J4||Pk&&Ad(new Pk)!=e6)&&(Ad=function(r){var t=$c(r),e=t==Gxe?r.constructor:void 0,n=e?Cd(e):"";if(n)switch(n){case Uxe:return t6;case Vxe:return Z4;case Hxe:return Q4;case Wxe:return J4;case jxe:return e6}return t});var kd=Ad,Yxe=Object.prototype,Xxe=Yxe.hasOwnProperty;function qxe(r){var t=r.length,e=new r.constructor(t);return t&&typeof r[0]=="string"&&Xxe.call(r,"index")&&(e.index=r.index,e.input=r.input),e}var Kxe=qxe,Zxe=nl.Uint8Array,xw=Zxe;function Qxe(r){var t=new r.constructor(r.byteLength);return new xw(t).set(new xw(r)),t}var Dk=Qxe;function Jxe(r,t){var e=t?Dk(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.byteLength)}var e1e=Jxe,t1e=/\w*$/;function r1e(r){var t=new r.constructor(r.source,t1e.exec(r));return t.lastIndex=r.lastIndex,t}var n1e=r1e,r6=Ns?Ns.prototype:void 0,n6=r6?r6.valueOf:void 0;function i1e(r){return n6?Object(n6.call(r)):{}}var a1e=i1e;function o1e(r,t){var e=t?Dk(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)}var i6=o1e,s1e="[object Boolean]",l1e="[object Date]",u1e="[object Map]",c1e="[object Number]",f1e="[object RegExp]",d1e="[object Set]",h1e="[object String]",v1e="[object Symbol]",p1e="[object ArrayBuffer]",g1e="[object DataView]",m1e="[object Float32Array]",y1e="[object Float64Array]",b1e="[object Int8Array]",x1e="[object Int16Array]",w1e="[object Int32Array]",S1e="[object Uint8Array]",C1e="[object Uint8ClampedArray]",E1e="[object Uint16Array]",_1e="[object Uint32Array]";function T1e(r,t,e){var n=r.constructor;switch(t){case p1e:return Dk(r);case s1e:case l1e:return new n(+r);case g1e:return e1e(r,e);case m1e:case y1e:case b1e:case x1e:case w1e:case S1e:case C1e:case E1e:case _1e:return i6(r,e);case u1e:return new n;case c1e:case h1e:return new n(r);case f1e:return n1e(r);case d1e:return new n;case v1e:return a1e(r)}}var A1e=T1e,a6=Object.create,k1e=function(){function r(){}return function(t){if(!zo(t))return{};if(a6)return a6(t);r.prototype=t;var e=new r;return r.prototype=void 0,e}}(),o6=k1e;function M1e(r){return typeof r.constructor=="function"&&!yw(r)?o6(bw(r)):{}}var s6=M1e,I1e="[object Map]";function P1e(r){return il(r)&&kd(r)==I1e}var D1e=P1e,l6=Kv&&Kv.isMap,R1e=l6?mw(l6):D1e,O1e=R1e,L1e="[object Set]";function F1e(r){return il(r)&&kd(r)==L1e}var N1e=F1e,u6=Kv&&Kv.isSet,B1e=u6?mw(u6):N1e,$1e=B1e,z1e=1,G1e=2,U1e=4,c6="[object Arguments]",V1e="[object Array]",H1e="[object Boolean]",W1e="[object Date]",j1e="[object Error]",f6="[object Function]",Y1e="[object GeneratorFunction]",X1e="[object Map]",q1e="[object Number]",d6="[object Object]",K1e="[object RegExp]",Z1e="[object Set]",Q1e="[object String]",J1e="[object Symbol]",ewe="[object WeakMap]",twe="[object ArrayBuffer]",rwe="[object DataView]",nwe="[object Float32Array]",iwe="[object Float64Array]",awe="[object Int8Array]",owe="[object Int16Array]",swe="[object Int32Array]",lwe="[object Uint8Array]",uwe="[object Uint8ClampedArray]",cwe="[object Uint16Array]",fwe="[object Uint32Array]",di={};di[c6]=di[V1e]=di[twe]=di[rwe]=di[H1e]=di[W1e]=di[nwe]=di[iwe]=di[awe]=di[owe]=di[swe]=di[X1e]=di[q1e]=di[d6]=di[K1e]=di[Z1e]=di[Q1e]=di[J1e]=di[lwe]=di[uwe]=di[cwe]=di[fwe]=!0;di[j1e]=di[f6]=di[ewe]=!1;function ww(r,t,e,n,i,a){var o,s=t&z1e,l=t&G1e,u=t&U1e;if(e&&(o=i?e(r,n,i,a):e(r)),o!==void 0)return o;if(!zo(r))return r;var c=Ji(r);if(c){if(o=Kxe(r),!s)return W4(r,o)}else{var f=kd(r),d=f==f6||f==Y1e;if(_d(r))return H4(r,s);if(f==d6||f==c6||d&&!i){if(o=l||d?{}:s6(r),!s)return l?Dxe(r,yxe(o,r)):Txe(r,uxe(o,r))}else{if(!di[f])return i?r:{};o=A1e(r,f,s)}}a||(a=new Xv);var h=a.get(r);if(h)return h;a.set(r,o),$1e(r)?r.forEach(function(g){o.add(ww(g,t,e,g,r,a))}):O1e(r)&&r.forEach(function(g,m){o.set(m,ww(g,t,e,m,r,a))});var v=u?l?Fxe:kk:l?Td:zc,p=c?void 0:v(r);return Ck(p||r,function(g,m){p&&(m=g,g=r[m]),pw(o,m,ww(g,t,e,m,r,a))}),o}var h6=ww,dwe=4;function hwe(r){return h6(r,dwe)}var vwe=hwe;function pwe(r){return function(){return r}}var Rk=pwe;function gwe(r){return function(t,e,n){for(var i=-1,a=Object(t),o=n(t),s=o.length;s--;){var l=o[r?s:++i];if(e(a[l],l,a)===!1)break}return t}}var mwe=gwe,ywe=mwe(),Ok=ywe;function bwe(r,t){return r&&Ok(r,t,zc)}var Lk=bwe;function xwe(r,t){return function(e,n){if(e==null)return e;if(!Tu(e))return r(e,n);for(var i=e.length,a=t?i:-1,o=Object(e);(t?a--:++a<i)&&n(o[a],a,o)!==!1;);return e}}var wwe=xwe,Swe=wwe(Lk),Sw=Swe;function Cwe(r){return r}var Md=Cwe;function Ewe(r){return typeof r=="function"?r:Md}var v6=Ewe;function _we(r,t){var e=Ji(r)?Ck:Sw;return e(r,v6(t))}var p6=_we,g6=p6;function Twe(r,t){var e=[];return Sw(r,function(n,i,a){t(n,i,a)&&e.push(n)}),e}var Awe=Twe,kwe="__lodash_hash_undefined__";function Mwe(r){return this.__data__.set(r,kwe),this}var Iwe=Mwe;function Pwe(r){return this.__data__.has(r)}var Dwe=Pwe;function Cw(r){var t=-1,e=r==null?0:r.length;for(this.__data__=new dw;++t<e;)this.add(r[t])}Cw.prototype.add=Cw.prototype.push=Iwe;Cw.prototype.has=Dwe;var m6=Cw;function Rwe(r,t){for(var e=-1,n=r==null?0:r.length;++e<n;)if(t(r[e],e,r))return!0;return!1}var Owe=Rwe;function Lwe(r,t){return r.has(t)}var y6=Lwe,Fwe=1,Nwe=2;function Bwe(r,t,e,n,i,a){var o=e&Fwe,s=r.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(r),c=a.get(t);if(u&&c)return u==t&&c==r;var f=-1,d=!0,h=e&Nwe?new m6:void 0;for(a.set(r,t),a.set(t,r);++f<s;){var v=r[f],p=t[f];if(n)var g=o?n(p,v,f,t,r,a):n(v,p,f,r,t,a);if(g!==void 0){if(g)continue;d=!1;break}if(h){if(!Owe(t,function(m,y){if(!y6(h,y)&&(v===m||i(v,m,e,n,a)))return h.push(y)})){d=!1;break}}else if(!(v===p||i(v,p,e,n,a))){d=!1;break}}return a.delete(r),a.delete(t),d}var b6=Bwe;function $we(r){var t=-1,e=Array(r.size);return r.forEach(function(n,i){e[++t]=[i,n]}),e}var zwe=$we;function Gwe(r){var t=-1,e=Array(r.size);return r.forEach(function(n){e[++t]=n}),e}var Fk=Gwe,Uwe=1,Vwe=2,Hwe="[object Boolean]",Wwe="[object Date]",jwe="[object Error]",Ywe="[object Map]",Xwe="[object Number]",qwe="[object RegExp]",Kwe="[object Set]",Zwe="[object String]",Qwe="[object Symbol]",Jwe="[object ArrayBuffer]",eSe="[object DataView]",x6=Ns?Ns.prototype:void 0,Nk=x6?x6.valueOf:void 0;function tSe(r,t,e,n,i,a,o){switch(e){case eSe:if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset)return!1;r=r.buffer,t=t.buffer;case Jwe:return!(r.byteLength!=t.byteLength||!a(new xw(r),new xw(t)));case Hwe:case Wwe:case Xwe:return Vv(+r,+t);case jwe:return r.name==t.name&&r.message==t.message;case qwe:case Zwe:return r==t+"";case Ywe:var s=zwe;case Kwe:var l=n&Uwe;if(s||(s=Fk),r.size!=t.size&&!l)return!1;var u=o.get(r);if(u)return u==t;n|=Vwe,o.set(r,t);var c=b6(s(r),s(t),n,i,a,o);return o.delete(r),c;case Qwe:if(Nk)return Nk.call(r)==Nk.call(t)}return!1}var rSe=tSe,nSe=1,iSe=Object.prototype,aSe=iSe.hasOwnProperty;function oSe(r,t,e,n,i,a){var o=e&nSe,s=kk(r),l=s.length,u=kk(t),c=u.length;if(l!=c&&!o)return!1;for(var f=l;f--;){var d=s[f];if(!(o?d in t:aSe.call(t,d)))return!1}var h=a.get(r),v=a.get(t);if(h&&v)return h==t&&v==r;var p=!0;a.set(r,t),a.set(t,r);for(var g=o;++f<l;){d=s[f];var m=r[d],y=t[d];if(n)var b=o?n(y,m,d,t,r,a):n(m,y,d,r,t,a);if(!(b===void 0?m===y||i(m,y,e,n,a):b)){p=!1;break}g||(g=d=="constructor")}if(p&&!g){var x=r.constructor,w=t.constructor;x!=w&&"constructor"in r&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof w=="function"&&w instanceof w)&&(p=!1)}return a.delete(r),a.delete(t),p}var sSe=oSe,lSe=1,w6="[object Arguments]",S6="[object Array]",Ew="[object Object]",uSe=Object.prototype,C6=uSe.hasOwnProperty;function cSe(r,t,e,n,i,a){var o=Ji(r),s=Ji(t),l=o?S6:kd(r),u=s?S6:kd(t);l=l==w6?Ew:l,u=u==w6?Ew:u;var c=l==Ew,f=u==Ew,d=l==u;if(d&&_d(r)){if(!_d(t))return!1;o=!0,c=!1}if(d&&!c)return a||(a=new Xv),o||wy(r)?b6(r,t,e,n,i,a):rSe(r,t,l,e,n,i,a);if(!(e&lSe)){var h=c&&C6.call(r,"__wrapped__"),v=f&&C6.call(t,"__wrapped__");if(h||v){var p=h?r.value():r,g=v?t.value():t;return a||(a=new Xv),i(p,g,e,n,a)}}return d?(a||(a=new Xv),sSe(r,t,e,n,i,a)):!1}var fSe=cSe;function E6(r,t,e,n,i){return r===t?!0:r==null||t==null||!il(r)&&!il(t)?r!==r&&t!==t:fSe(r,t,e,n,E6,i)}var _6=E6,dSe=1,hSe=2;function vSe(r,t,e,n){var i=e.length,a=i,o=!n;if(r==null)return!a;for(r=Object(r);i--;){var s=e[i];if(o&&s[2]?s[1]!==r[s[0]]:!(s[0]in r))return!1}for(;++i<a;){s=e[i];var l=s[0],u=r[l],c=s[1];if(o&&s[2]){if(u===void 0&&!(l in r))return!1}else{var f=new Xv;if(n)var d=n(u,c,l,r,t,f);if(!(d===void 0?_6(c,u,dSe|hSe,n,f):d))return!1}}return!0}var pSe=vSe;function gSe(r){return r===r&&!zo(r)}var T6=gSe;function mSe(r){for(var t=zc(r),e=t.length;e--;){var n=t[e],i=r[n];t[e]=[n,i,T6(i)]}return t}var ySe=mSe;function bSe(r,t){return function(e){return e==null?!1:e[r]===t&&(t!==void 0||r in Object(e))}}var A6=bSe;function xSe(r){var t=ySe(r);return t.length==1&&t[0][2]?A6(t[0][0],t[0][1]):function(e){return e===r||pSe(e,r,t)}}var wSe=xSe,SSe="[object Symbol]";function CSe(r){return typeof r=="symbol"||il(r)&&$c(r)==SSe}var Id=CSe,ESe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_Se=/^\w*$/;function TSe(r,t){if(Ji(r))return!1;var e=typeof r;return e=="number"||e=="symbol"||e=="boolean"||r==null||Id(r)?!0:_Se.test(r)||!ESe.test(r)||t!=null&&r in Object(t)}var Bk=TSe,ASe="Expected a function";function $k(r,t){if(typeof r!="function"||t!=null&&typeof t!="function")throw new TypeError(ASe);var e=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=e.cache;if(a.has(i))return a.get(i);var o=r.apply(this,n);return e.cache=a.set(i,o)||a,o};return e.cache=new($k.Cache||dw),e}$k.Cache=dw;var kSe=$k,MSe=500;function ISe(r){var t=kSe(r,function(n){return e.size===MSe&&e.clear(),n}),e=t.cache;return t}var PSe=ISe,DSe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,RSe=/\\(\\)?/g,OSe=PSe(function(r){var t=[];return r.charCodeAt(0)===46&&t.push(""),r.replace(DSe,function(e,n,i,a){t.push(i?a.replace(RSe,"$1"):n||e)}),t}),LSe=OSe;function FSe(r,t){for(var e=-1,n=r==null?0:r.length,i=Array(n);++e<n;)i[e]=t(r[e],e,r);return i}var Qv=FSe,NSe=1/0,k6=Ns?Ns.prototype:void 0,M6=k6?k6.toString:void 0;function I6(r){if(typeof r=="string")return r;if(Ji(r))return Qv(r,I6)+"";if(Id(r))return M6?M6.call(r):"";var t=r+"";return t=="0"&&1/r==-NSe?"-0":t}var BSe=I6;function $Se(r){return r==null?"":BSe(r)}var P6=$Se;function zSe(r,t){return Ji(r)?r:Bk(r,t)?[r]:LSe(P6(r))}var _w=zSe,GSe=1/0;function USe(r){if(typeof r=="string"||Id(r))return r;var t=r+"";return t=="0"&&1/r==-GSe?"-0":t}var Sy=USe;function VSe(r,t){t=_w(t,r);for(var e=0,n=t.length;r!=null&&e<n;)r=r[Sy(t[e++])];return e&&e==n?r:void 0}var Tw=VSe;function HSe(r,t,e){var n=r==null?void 0:Tw(r,t);return n===void 0?e:n}var WSe=HSe;function jSe(r,t){return r!=null&&t in Object(r)}var YSe=jSe;function XSe(r,t,e){t=_w(t,r);for(var n=-1,i=t.length,a=!1;++n<i;){var o=Sy(t[n]);if(!(a=r!=null&&e(r,o)))break;r=r[o]}return a||++n!=i?a:(i=r==null?0:r.length,!!i&&Ek(i)&&gw(o,i)&&(Ji(r)||qv(r)))}var D6=XSe;function qSe(r,t){return r!=null&&D6(r,t,YSe)}var R6=qSe,KSe=1,ZSe=2;function QSe(r,t){return Bk(r)&&T6(t)?A6(Sy(r),t):function(e){var n=WSe(e,r);return n===void 0&&n===t?R6(e,r):_6(t,n,KSe|ZSe)}}var JSe=QSe;function eCe(r){return function(t){return t==null?void 0:t[r]}}var O6=eCe;function tCe(r){return function(t){return Tw(t,r)}}var rCe=tCe;function nCe(r){return Bk(r)?O6(Sy(r)):rCe(r)}var iCe=nCe;function aCe(r){return typeof r=="function"?r:r==null?Md:typeof r=="object"?Ji(r)?JSe(r[0],r[1]):wSe(r):iCe(r)}var Au=aCe;function oCe(r,t){var e=Ji(r)?j4:Awe;return e(r,Au(t))}var L6=oCe,sCe=Object.prototype,lCe=sCe.hasOwnProperty;function uCe(r,t){return r!=null&&lCe.call(r,t)}var cCe=uCe;function fCe(r,t){return r!=null&&D6(r,t,cCe)}var F6=fCe,dCe="[object Map]",hCe="[object Set]",vCe=Object.prototype,pCe=vCe.hasOwnProperty;function gCe(r){if(r==null)return!0;if(Tu(r)&&(Ji(r)||typeof r=="string"||typeof r.splice=="function"||_d(r)||wy(r)||qv(r)))return!r.length;var t=kd(r);if(t==dCe||t==hCe)return!r.size;if(yw(r))return!_k(r).length;for(var e in r)if(pCe.call(r,e))return!1;return!0}var mCe=gCe;function yCe(r){return r===void 0}var N6=yCe;function bCe(r,t){var e=-1,n=Tu(r)?Array(r.length):[];return Sw(r,function(i,a,o){n[++e]=t(i,a,o)}),n}var B6=bCe;function xCe(r,t){var e=Ji(r)?Qv:B6;return e(r,Au(t))}var $6=xCe;function wCe(r,t,e,n){var i=-1,a=r==null?0:r.length;for(n&&a&&(e=r[++i]);++i<a;)e=t(e,r[i],i,r);return e}var SCe=wCe;function CCe(r,t,e,n,i){return i(r,function(a,o,s){e=n?(n=!1,a):t(e,a,o,s)}),e}var ECe=CCe;function _Ce(r,t,e){var n=Ji(r)?SCe:ECe,i=arguments.length<3;return n(r,Au(t),e,i,Sw)}var z6=_Ce,TCe="[object String]";function ACe(r){return typeof r=="string"||!Ji(r)&&il(r)&&$c(r)==TCe}var kCe=ACe,MCe=O6("length"),ICe=MCe,PCe="\\ud800-\\udfff",DCe="\\u0300-\\u036f",RCe="\\ufe20-\\ufe2f",OCe="\\u20d0-\\u20ff",LCe=DCe+RCe+OCe,FCe="\\ufe0e\\ufe0f",NCe="\\u200d",BCe=RegExp("["+NCe+PCe+LCe+FCe+"]");function $Ce(r){return BCe.test(r)}var zCe=$Ce,G6="\\ud800-\\udfff",GCe="\\u0300-\\u036f",UCe="\\ufe20-\\ufe2f",VCe="\\u20d0-\\u20ff",HCe=GCe+UCe+VCe,WCe="\\ufe0e\\ufe0f",jCe="["+G6+"]",zk="["+HCe+"]",Gk="\\ud83c[\\udffb-\\udfff]",YCe="(?:"+zk+"|"+Gk+")",U6="[^"+G6+"]",V6="(?:\\ud83c[\\udde6-\\uddff]){2}",H6="[\\ud800-\\udbff][\\udc00-\\udfff]",XCe="\\u200d",W6=YCe+"?",j6="["+WCe+"]?",qCe="(?:"+XCe+"(?:"+[U6,V6,H6].join("|")+")"+j6+W6+")*",KCe=j6+W6+qCe,ZCe="(?:"+[U6+zk+"?",zk,V6,H6,jCe].join("|")+")",Y6=RegExp(Gk+"(?="+Gk+")|"+ZCe+KCe,"g");function QCe(r){for(var t=Y6.lastIndex=0;Y6.test(r);)++t;return t}var JCe=QCe;function e2e(r){return zCe(r)?JCe(r):ICe(r)}var t2e=e2e,r2e="[object Map]",n2e="[object Set]";function i2e(r){if(r==null)return 0;if(Tu(r))return kCe(r)?t2e(r):r.length;var t=kd(r);return t==r2e||t==n2e?r.size:_k(r).length}var a2e=i2e;function o2e(r,t,e){var n=Ji(r),i=n||_d(r)||wy(r);if(t=Au(t),e==null){var a=r&&r.constructor;i?e=n?new a:[]:zo(r)?e=my(a)?o6(bw(r)):{}:e={}}return(i?Ck:Lk)(r,function(o,s,l){return t(e,o,s,l)}),e}var s2e=o2e,X6=Ns?Ns.isConcatSpreadable:void 0;function l2e(r){return Ji(r)||qv(r)||!!(X6&&r&&r[X6])}var u2e=l2e;function q6(r,t,e,n,i){var a=-1,o=r.length;for(e||(e=u2e),i||(i=[]);++a<o;){var s=r[a];t>0&&e(s)?t>1?q6(s,t-1,e,n,i):Ak(i,s):n||(i[i.length]=s)}return i}var Uk=q6;function c2e(r,t,e){switch(e.length){case 0:return r.call(t);case 1:return r.call(t,e[0]);case 2:return r.call(t,e[0],e[1]);case 3:return r.call(t,e[0],e[1],e[2])}return r.apply(t,e)}var f2e=c2e,K6=Math.max;function d2e(r,t,e){return t=K6(t===void 0?r.length-1:t,0),function(){for(var n=arguments,i=-1,a=K6(n.length-t,0),o=Array(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=e(o),f2e(r,this,s)}}var Z6=d2e,h2e=hw?function(r,t){return hw(r,"toString",{configurable:!0,enumerable:!1,value:Rk(t),writable:!0})}:Md,v2e=h2e,p2e=800,g2e=16,m2e=Date.now;function y2e(r){var t=0,e=0;return function(){var n=m2e(),i=g2e-(n-e);if(e=n,i>0){if(++t>=p2e)return arguments[0]}else t=0;return r.apply(void 0,arguments)}}var b2e=y2e,x2e=b2e(v2e),Q6=x2e;function w2e(r,t){return Q6(Z6(r,t,Md),r+"")}var Aw=w2e;function S2e(r,t,e,n){for(var i=r.length,a=e+(n?1:-1);n?a--:++a<i;)if(t(r[a],a,r))return a;return-1}var J6=S2e;function C2e(r){return r!==r}var E2e=C2e;function _2e(r,t,e){for(var n=e-1,i=r.length;++n<i;)if(r[n]===t)return n;return-1}var T2e=_2e;function A2e(r,t,e){return t===t?T2e(r,t,e):J6(r,E2e,e)}var k2e=A2e;function M2e(r,t){var e=r==null?0:r.length;return!!e&&k2e(r,t,0)>-1}var I2e=M2e;function P2e(r,t,e){for(var n=-1,i=r==null?0:r.length;++n<i;)if(e(t,r[n]))return!0;return!1}var D2e=P2e;function R2e(){}var O2e=R2e,L2e=1/0,F2e=Zv&&1/Fk(new Zv([,-0]))[1]==L2e?function(r){return new Zv(r)}:O2e,N2e=F2e,B2e=200;function $2e(r,t,e){var n=-1,i=I2e,a=r.length,o=!0,s=[],l=s;if(e)o=!1,i=D2e;else if(a>=B2e){var u=t?null:N2e(r);if(u)return Fk(u);o=!1,i=y6,l=new m6}else l=t?[]:s;e:for(;++n<a;){var c=r[n],f=t?t(c):c;if(c=e||c!==0?c:0,o&&f===f){for(var d=l.length;d--;)if(l[d]===f)continue e;t&&l.push(f),s.push(c)}else i(l,f,e)||(l!==s&&l.push(f),s.push(c))}return s}var z2e=$2e;function G2e(r){return il(r)&&Tu(r)}var eG=G2e,U2e=Aw(function(r){return z2e(Uk(r,1,eG,!0))}),V2e=U2e;function H2e(r,t){return Qv(t,function(e){return r[e]})}var W2e=H2e;function j2e(r){return r==null?[]:W2e(r,zc(r))}var tG=j2e,kw;if(typeof UA=="function")try{kw={clone:vwe,constant:Rk,each:g6,filter:L6,has:F6,isArray:Ji,isEmpty:mCe,isFunction:my,isUndefined:N6,keys:zc,map:$6,reduce:z6,size:a2e,transform:s2e,union:V2e,values:tG}}catch{}kw||(kw=window._);var tr=kw,Vk=wn,Y2e="\0",Pd="\0",rG="";function wn(r){this._isDirected=tr.has(r,"directed")?r.directed:!0,this._isMultigraph=tr.has(r,"multigraph")?r.multigraph:!1,this._isCompound=tr.has(r,"compound")?r.compound:!1,this._label=void 0,this._defaultNodeLabelFn=tr.constant(void 0),this._defaultEdgeLabelFn=tr.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[Pd]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}wn.prototype._nodeCount=0;wn.prototype._edgeCount=0;wn.prototype.isDirected=function(){return this._isDirected};wn.prototype.isMultigraph=function(){return this._isMultigraph};wn.prototype.isCompound=function(){return this._isCompound};wn.prototype.setGraph=function(r){return this._label=r,this};wn.prototype.graph=function(){return this._label};wn.prototype.setDefaultNodeLabel=function(r){return tr.isFunction(r)||(r=tr.constant(r)),this._defaultNodeLabelFn=r,this};wn.prototype.nodeCount=function(){return this._nodeCount};wn.prototype.nodes=function(){return tr.keys(this._nodes)};wn.prototype.sources=function(){var r=this;return tr.filter(this.nodes(),function(t){return tr.isEmpty(r._in[t])})};wn.prototype.sinks=function(){var r=this;return tr.filter(this.nodes(),function(t){return tr.isEmpty(r._out[t])})};wn.prototype.setNodes=function(r,t){var e=arguments,n=this;return tr.each(r,function(i){e.length>1?n.setNode(i,t):n.setNode(i)}),this};wn.prototype.setNode=function(r,t){return tr.has(this._nodes,r)?(arguments.length>1&&(this._nodes[r]=t),this):(this._nodes[r]=arguments.length>1?t:this._defaultNodeLabelFn(r),this._isCompound&&(this._parent[r]=Pd,this._children[r]={},this._children[Pd][r]=!0),this._in[r]={},this._preds[r]={},this._out[r]={},this._sucs[r]={},++this._nodeCount,this)};wn.prototype.node=function(r){return this._nodes[r]};wn.prototype.hasNode=function(r){return tr.has(this._nodes,r)};wn.prototype.removeNode=function(r){var t=this;if(tr.has(this._nodes,r)){var e=function(n){t.removeEdge(t._edgeObjs[n])};delete this._nodes[r],this._isCompound&&(this._removeFromParentsChildList(r),delete this._parent[r],tr.each(this.children(r),function(n){t.setParent(n)}),delete this._children[r]),tr.each(tr.keys(this._in[r]),e),delete this._in[r],delete this._preds[r],tr.each(tr.keys(this._out[r]),e),delete this._out[r],delete this._sucs[r],--this._nodeCount}return this};wn.prototype.setParent=function(r,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(tr.isUndefined(t))t=Pd;else{t+="";for(var e=t;!tr.isUndefined(e);e=this.parent(e))if(e===r)throw new Error("Setting "+t+" as parent of "+r+" would create a cycle");this.setNode(t)}return this.setNode(r),this._removeFromParentsChildList(r),this._parent[r]=t,this._children[t][r]=!0,this};wn.prototype._removeFromParentsChildList=function(r){delete this._children[this._parent[r]][r]};wn.prototype.parent=function(r){if(this._isCompound){var t=this._parent[r];if(t!==Pd)return t}};wn.prototype.children=function(r){if(tr.isUndefined(r)&&(r=Pd),this._isCompound){var t=this._children[r];if(t)return tr.keys(t)}else{if(r===Pd)return this.nodes();if(this.hasNode(r))return[]}};wn.prototype.predecessors=function(r){var t=this._preds[r];if(t)return tr.keys(t)};wn.prototype.successors=function(r){var t=this._sucs[r];if(t)return tr.keys(t)};wn.prototype.neighbors=function(r){var t=this.predecessors(r);if(t)return tr.union(t,this.successors(r))};wn.prototype.isLeaf=function(r){var t;return this.isDirected()?t=this.successors(r):t=this.neighbors(r),t.length===0};wn.prototype.filterNodes=function(r){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var e=this;tr.each(this._nodes,function(a,o){r(o)&&t.setNode(o,a)}),tr.each(this._edgeObjs,function(a){t.hasNode(a.v)&&t.hasNode(a.w)&&t.setEdge(a,e.edge(a))});var n={};function i(a){var o=e.parent(a);return o===void 0||t.hasNode(o)?(n[a]=o,o):o in n?n[o]:i(o)}return this._isCompound&&tr.each(t.nodes(),function(a){t.setParent(a,i(a))}),t};wn.prototype.setDefaultEdgeLabel=function(r){return tr.isFunction(r)||(r=tr.constant(r)),this._defaultEdgeLabelFn=r,this};wn.prototype.edgeCount=function(){return this._edgeCount};wn.prototype.edges=function(){return tr.values(this._edgeObjs)};wn.prototype.setPath=function(r,t){var e=this,n=arguments;return tr.reduce(r,function(i,a){return n.length>1?e.setEdge(i,a,t):e.setEdge(i,a),a}),this};wn.prototype.setEdge=function(){var r,t,e,n,i=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(r=a.v,t=a.w,e=a.name,arguments.length===2&&(n=arguments[1],i=!0)):(r=a,t=arguments[1],e=arguments[3],arguments.length>2&&(n=arguments[2],i=!0)),r=""+r,t=""+t,tr.isUndefined(e)||(e=""+e);var o=Cy(this._isDirected,r,t,e);if(tr.has(this._edgeLabels,o))return i&&(this._edgeLabels[o]=n),this;if(!tr.isUndefined(e)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(r),this.setNode(t),this._edgeLabels[o]=i?n:this._defaultEdgeLabelFn(r,t,e);var s=X2e(this._isDirected,r,t,e);return r=s.v,t=s.w,Object.freeze(s),this._edgeObjs[o]=s,nG(this._preds[t],r),nG(this._sucs[r],t),this._in[t][o]=s,this._out[r][o]=s,this._edgeCount++,this};wn.prototype.edge=function(r,t,e){var n=arguments.length===1?Hk(this._isDirected,arguments[0]):Cy(this._isDirected,r,t,e);return this._edgeLabels[n]};wn.prototype.hasEdge=function(r,t,e){var n=arguments.length===1?Hk(this._isDirected,arguments[0]):Cy(this._isDirected,r,t,e);return tr.has(this._edgeLabels,n)};wn.prototype.removeEdge=function(r,t,e){var n=arguments.length===1?Hk(this._isDirected,arguments[0]):Cy(this._isDirected,r,t,e),i=this._edgeObjs[n];return i&&(r=i.v,t=i.w,delete this._edgeLabels[n],delete this._edgeObjs[n],iG(this._preds[t],r),iG(this._sucs[r],t),delete this._in[t][n],delete this._out[r][n],this._edgeCount--),this};wn.prototype.inEdges=function(r,t){var e=this._in[r];if(e){var n=tr.values(e);return t?tr.filter(n,function(i){return i.v===t}):n}};wn.prototype.outEdges=function(r,t){var e=this._out[r];if(e){var n=tr.values(e);return t?tr.filter(n,function(i){return i.w===t}):n}};wn.prototype.nodeEdges=function(r,t){var e=this.inEdges(r,t);if(e)return e.concat(this.outEdges(r,t))};function nG(r,t){r[t]?r[t]++:r[t]=1}function iG(r,t){--r[t]||delete r[t]}function Cy(r,t,e,n){var i=""+t,a=""+e;if(!r&&i>a){var o=i;i=a,a=o}return i+rG+a+rG+(tr.isUndefined(n)?Y2e:n)}function X2e(r,t,e,n){var i=""+t,a=""+e;if(!r&&i>a){var o=i;i=a,a=o}var s={v:i,w:a};return n&&(s.name=n),s}function Hk(r,t){return Cy(r,t.v,t.w,t.name)}var q2e="2.1.8",aG={Graph:Vk,version:q2e},Wk={write:K2e,read:J2e};function K2e(r){var t={options:{directed:r.isDirected(),multigraph:r.isMultigraph(),compound:r.isCompound()},nodes:Z2e(r),edges:Q2e(r)};return tr.isUndefined(r.graph())||(t.value=tr.clone(r.graph())),t}function Z2e(r){return tr.map(r.nodes(),function(t){var e=r.node(t),n=r.parent(t),i={v:t};return tr.isUndefined(e)||(i.value=e),tr.isUndefined(n)||(i.parent=n),i})}function Q2e(r){return tr.map(r.edges(),function(t){var e=r.edge(t),n={v:t.v,w:t.w};return tr.isUndefined(t.name)||(n.name=t.name),tr.isUndefined(e)||(n.value=e),n})}function J2e(r){var t=new Vk(r.options).setGraph(r.value);return tr.each(r.nodes,function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),tr.each(r.edges,function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}Wk.write;Wk.read;var eEe=tEe;function tEe(r){var t={},e=[],n;function i(a){tr.has(t,a)||(t[a]=!0,n.push(a),tr.each(r.successors(a),i),tr.each(r.predecessors(a),i))}return tr.each(r.nodes(),function(a){n=[],i(a),n.length&&e.push(n)}),e}var oG=Bs;function Bs(){this._arr=[],this._keyIndices={}}Bs.prototype.size=function(){return this._arr.length};Bs.prototype.keys=function(){return this._arr.map(function(r){return r.key})};Bs.prototype.has=function(r){return tr.has(this._keyIndices,r)};Bs.prototype.priority=function(r){var t=this._keyIndices[r];if(t!==void 0)return this._arr[t].priority};Bs.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key};Bs.prototype.add=function(r,t){var e=this._keyIndices;if(r=String(r),!tr.has(e,r)){var n=this._arr,i=n.length;return e[r]=i,n.push({key:r,priority:t}),this._decrease(i),!0}return!1};Bs.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key};Bs.prototype.decrease=function(r,t){var e=this._keyIndices[r];if(t>this._arr[e].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[e].priority+" New: "+t);this._arr[e].priority=t,this._decrease(e)};Bs.prototype._heapify=function(r){var t=this._arr,e=2*r,n=e+1,i=r;e<t.length&&(i=t[e].priority<t[i].priority?e:i,n<t.length&&(i=t[n].priority<t[i].priority?n:i),i!==r&&(this._swap(r,i),this._heapify(i)))};Bs.prototype._decrease=function(r){for(var t=this._arr,e=t[r].priority,n;r!==0&&(n=r>>1,!(t[n].priority<e));)this._swap(r,n),r=n};Bs.prototype._swap=function(r,t){var e=this._arr,n=this._keyIndices,i=e[r],a=e[t];e[r]=a,e[t]=i,n[a.key]=r,n[i.key]=t};var sG=nEe,rEe=tr.constant(1);function nEe(r,t,e,n){return iEe(r,String(t),e||rEe,n||function(i){return r.outEdges(i)})}function iEe(r,t,e,n){var i={},a=new oG,o,s,l=function(u){var c=u.v!==o?u.v:u.w,f=i[c],d=e(u),h=s.distance+d;if(d<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+u+" Weight: "+d);h<f.distance&&(f.distance=h,f.predecessor=o,a.decrease(c,h))};for(r.nodes().forEach(function(u){var c=u===t?0:Number.POSITIVE_INFINITY;i[u]={distance:c},a.add(u,c)});a.size()>0&&(o=a.removeMin(),s=i[o],s.distance!==Number.POSITIVE_INFINITY);)n(o).forEach(l);return i}var aEe=oEe;function oEe(r,t,e){return tr.transform(r.nodes(),function(n,i){n[i]=sG(r,i,t,e)},{})}var lG=sEe;function sEe(r){var t=0,e=[],n={},i=[];function a(o){var s=n[o]={onStack:!0,lowlink:t,index:t++};if(e.push(o),r.successors(o).forEach(function(c){tr.has(n,c)?n[c].onStack&&(s.lowlink=Math.min(s.lowlink,n[c].index)):(a(c),s.lowlink=Math.min(s.lowlink,n[c].lowlink))}),s.lowlink===s.index){var l=[],u;do u=e.pop(),n[u].onStack=!1,l.push(u);while(o!==u);i.push(l)}}return r.nodes().forEach(function(o){tr.has(n,o)||a(o)}),i}var lEe=uEe;function uEe(r){return tr.filter(lG(r),function(t){return t.length>1||t.length===1&&r.hasEdge(t[0],t[0])})}var cEe=dEe,fEe=tr.constant(1);function dEe(r,t,e){return hEe(r,t||fEe,e||function(n){return r.outEdges(n)})}function hEe(r,t,e){var n={},i=r.nodes();return i.forEach(function(a){n[a]={},n[a][a]={distance:0},i.forEach(function(o){a!==o&&(n[a][o]={distance:Number.POSITIVE_INFINITY})}),e(a).forEach(function(o){var s=o.v===a?o.w:o.v,l=t(o);n[a][s]={distance:l,predecessor:a}})}),i.forEach(function(a){var o=n[a];i.forEach(function(s){var l=n[s];i.forEach(function(u){var c=l[a],f=o[u],d=l[u],h=c.distance+f.distance;h<d.distance&&(d.distance=h,d.predecessor=f.predecessor)})})}),n}var jk=uG;uG.CycleException=Mw;function uG(r){var t={},e={},n=[];function i(a){if(tr.has(e,a))throw new Mw;tr.has(t,a)||(e[a]=!0,t[a]=!0,tr.each(r.predecessors(a),i),delete e[a],n.push(a))}if(tr.each(r.sinks(),i),tr.size(t)!==r.nodeCount())throw new Mw;return n}function Mw(){}Mw.prototype=new Error;var vEe=pEe;function pEe(r){try{jk(r)}catch(t){if(t instanceof jk.CycleException)return!1;throw t}return!0}var cG=gEe;function gEe(r,t,e){tr.isArray(t)||(t=[t]);var n=(r.isDirected()?r.successors:r.neighbors).bind(r),i=[],a={};return tr.each(t,function(o){if(!r.hasNode(o))throw new Error("Graph does not have node: "+o);fG(r,o,e==="post",a,n,i)}),i}function fG(r,t,e,n,i,a){tr.has(n,t)||(n[t]=!0,e||a.push(t),tr.each(i(t),function(o){fG(r,o,e,n,i,a)}),e&&a.push(t))}var mEe=yEe;function yEe(r,t){return cG(r,t,"post")}var bEe=xEe;function xEe(r,t){return cG(r,t,"pre")}var wEe=SEe;function SEe(r,t){var e=new Vk,n={},i=new oG,a;function o(l){var u=l.v===a?l.w:l.v,c=i.priority(u);if(c!==void 0){var f=t(l);f<c&&(n[u]=a,i.decrease(u,f))}}if(r.nodeCount()===0)return e;tr.each(r.nodes(),function(l){i.add(l,Number.POSITIVE_INFINITY),e.setNode(l)}),i.decrease(r.nodes()[0],0);for(var s=!1;i.size()>0;){if(a=i.removeMin(),tr.has(n,a))e.setEdge(a,n[a]);else{if(s)throw new Error("Input graph is not connected: "+r);s=!0}r.nodeEdges(a).forEach(o)}return e}var $s={components:eEe,dijkstra:sG,dijkstraAll:aEe,findCycles:lEe,floydWarshall:cEe,isAcyclic:vEe,postorder:mEe,preorder:bEe,prim:wEe,tarjan:lG,topsort:jk};$s.components;$s.dijkstra;$s.dijkstraAll;$s.findCycles;$s.floydWarshall;$s.isAcyclic;$s.postorder;$s.preorder;$s.prim;$s.tarjan;$s.topsort;var Ey={Graph:aG.Graph,json:Wk,alg:$s,version:aG.version};Ey.Graph;Ey.json;Ey.alg;Ey.version;var Iw;if(typeof UA=="function")try{Iw=Ey}catch{}Iw||(Iw=window.graphlib);var al=Iw,CEe=1,EEe=4;function _Ee(r){return h6(r,CEe|EEe)}var TEe=_Ee;function AEe(r,t,e){if(!zo(e))return!1;var n=typeof t;return(n=="number"?Tu(e)&&gw(t,e.length):n=="string"&&t in e)?Vv(e[t],r):!1}var _y=AEe,dG=Object.prototype,kEe=dG.hasOwnProperty,MEe=Aw(function(r,t){r=Object(r);var e=-1,n=t.length,i=n>2?t[2]:void 0;for(i&&_y(t[0],t[1],i)&&(n=1);++e<n;)for(var a=t[e],o=Td(a),s=-1,l=o.length;++s<l;){var u=o[s],c=r[u];(c===void 0||Vv(c,dG[u])&&!kEe.call(r,u))&&(r[u]=a[u])}return r}),IEe=MEe;function PEe(r){return function(t,e,n){var i=Object(t);if(!Tu(t)){var a=Au(e);t=zc(t),e=function(s){return a(i[s],s,i)}}var o=r(t,e,n);return o>-1?i[a?t[o]:o]:void 0}}var DEe=PEe,REe=/\s/;function OEe(r){for(var t=r.length;t--&&REe.test(r.charAt(t)););return t}var LEe=OEe,FEe=/^\s+/;function NEe(r){return r&&r.slice(0,LEe(r)+1).replace(FEe,"")}var BEe=NEe,hG=0/0,$Ee=/^[-+]0x[0-9a-f]+$/i,zEe=/^0b[01]+$/i,GEe=/^0o[0-7]+$/i,UEe=parseInt;function VEe(r){if(typeof r=="number")return r;if(Id(r))return hG;if(zo(r)){var t=typeof r.valueOf=="function"?r.valueOf():r;r=zo(t)?t+"":t}if(typeof r!="string")return r===0?r:+r;r=BEe(r);var e=zEe.test(r);return e||GEe.test(r)?UEe(r.slice(2),e?2:8):$Ee.test(r)?hG:+r}var HEe=VEe,vG=1/0,WEe=17976931348623157e292;function jEe(r){if(!r)return r===0?r:0;if(r=HEe(r),r===vG||r===-vG){var t=r<0?-1:1;return t*WEe}return r===r?r:0}var Pw=jEe;function YEe(r){var t=Pw(r),e=t%1;return t===t?e?t-e:t:0}var XEe=YEe,qEe=Math.max;function KEe(r,t,e){var n=r==null?0:r.length;if(!n)return-1;var i=e==null?0:XEe(e);return i<0&&(i=qEe(n+i,0)),J6(r,Au(t),i)}var ZEe=KEe,QEe=DEe(ZEe),JEe=QEe;function e_e(r){var t=r==null?0:r.length;return t?Uk(r,1):[]}var pG=e_e;function t_e(r,t){return r==null?r:Ok(r,v6(t),Td)}var r_e=t_e;function n_e(r){var t=r==null?0:r.length;return t?r[t-1]:void 0}var i_e=n_e;function a_e(r,t){var e={};return t=Au(t),Lk(r,function(n,i,a){vw(e,i,t(n,i,a))}),e}var o_e=a_e;function s_e(r,t,e){for(var n=-1,i=r.length;++n<i;){var a=r[n],o=t(a);if(o!=null&&(s===void 0?o===o&&!Id(o):e(o,s)))var s=o,l=a}return l}var Yk=s_e;function l_e(r,t){return r>t}var u_e=l_e;function c_e(r){return r&&r.length?Yk(r,Md,u_e):void 0}var f_e=c_e;function d_e(r,t,e){(e!==void 0&&!Vv(r[t],e)||e===void 0&&!(t in r))&&vw(r,t,e)}var Xk=d_e,h_e="[object Object]",v_e=Function.prototype,p_e=Object.prototype,gG=v_e.toString,g_e=p_e.hasOwnProperty,m_e=gG.call(Object);function y_e(r){if(!il(r)||$c(r)!=h_e)return!1;var t=bw(r);if(t===null)return!0;var e=g_e.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&gG.call(e)==m_e}var b_e=y_e;function x_e(r,t){if(!(t==="constructor"&&typeof r[t]=="function")&&t!="__proto__")return r[t]}var qk=x_e;function w_e(r){return xy(r,Td(r))}var S_e=w_e;function C_e(r,t,e,n,i,a,o){var s=qk(r,e),l=qk(t,e),u=o.get(l);if(u){Xk(r,e,u);return}var c=a?a(s,l,e+"",r,t,o):void 0,f=c===void 0;if(f){var d=Ji(l),h=!d&&_d(l),v=!d&&!h&&wy(l);c=l,d||h||v?Ji(s)?c=s:eG(s)?c=W4(s):h?(f=!1,c=H4(l,!0)):v?(f=!1,c=i6(l,!0)):c=[]:b_e(l)||qv(l)?(c=s,qv(s)?c=S_e(s):(!zo(s)||my(s))&&(c=s6(l))):f=!1}f&&(o.set(l,c),i(c,l,n,a,o),o.delete(l)),Xk(r,e,c)}var E_e=C_e;function mG(r,t,e,n,i){r!==t&&Ok(t,function(a,o){if(i||(i=new Xv),zo(a))E_e(r,t,o,e,mG,n,i);else{var s=n?n(qk(r,o),a,o+"",r,t,i):void 0;s===void 0&&(s=a),Xk(r,o,s)}},Td)}var __e=mG;function T_e(r){return Aw(function(t,e){var n=-1,i=e.length,a=i>1?e[i-1]:void 0,o=i>2?e[2]:void 0;for(a=r.length>3&&typeof a=="function"?(i--,a):void 0,o&&_y(e[0],e[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var s=e[n];s&&r(t,s,n,a)}return t})}var A_e=T_e,k_e=A_e(function(r,t,e){__e(r,t,e)}),M_e=k_e;function I_e(r,t){return r<t}var yG=I_e;function P_e(r){return r&&r.length?Yk(r,Md,yG):void 0}var D_e=P_e;function R_e(r,t){return r&&r.length?Yk(r,Au(t),yG):void 0}var O_e=R_e,L_e=function(){return nl.Date.now()},F_e=L_e;function N_e(r,t,e,n){if(!zo(r))return r;t=_w(t,r);for(var i=-1,a=t.length,o=a-1,s=r;s!=null&&++i<a;){var l=Sy(t[i]),u=e;if(l==="__proto__"||l==="constructor"||l==="prototype")return r;if(i!=o){var c=s[l];u=n?n(c,l,s):void 0,u===void 0&&(u=zo(c)?c:gw(t[i+1])?[]:{})}pw(s,l,u),s=s[l]}return r}var B_e=N_e;function $_e(r,t,e){for(var n=-1,i=t.length,a={};++n<i;){var o=t[n],s=Tw(r,o);e(s,o)&&B_e(a,_w(o,r),s)}return a}var z_e=$_e;function G_e(r,t){return z_e(r,t,function(e,n){return R6(r,n)})}var U_e=G_e;function V_e(r){return Q6(Z6(r,void 0,pG),r+"")}var H_e=V_e,W_e=H_e(function(r,t){return r==null?{}:U_e(r,t)}),j_e=W_e,Y_e=Math.ceil,X_e=Math.max;function q_e(r,t,e,n){for(var i=-1,a=X_e(Y_e((t-r)/(e||1)),0),o=Array(a);a--;)o[n?a:++i]=r,r+=e;return o}var K_e=q_e;function Z_e(r){return function(t,e,n){return n&&typeof n!="number"&&_y(t,e,n)&&(e=n=void 0),t=Pw(t),e===void 0?(e=t,t=0):e=Pw(e),n=n===void 0?t<e?1:-1:Pw(n),K_e(t,e,n,r)}}var Q_e=Z_e,J_e=Q_e(),eTe=J_e;function tTe(r,t){var e=r.length;for(r.sort(t);e--;)r[e]=r[e].value;return r}var rTe=tTe;function nTe(r,t){if(r!==t){var e=r!==void 0,n=r===null,i=r===r,a=Id(r),o=t!==void 0,s=t===null,l=t===t,u=Id(t);if(!s&&!u&&!a&&r>t||a&&o&&l&&!s&&!u||n&&o&&l||!e&&l||!i)return 1;if(!n&&!a&&!u&&r<t||u&&e&&i&&!n&&!a||s&&e&&i||!o&&i||!l)return-1}return 0}var iTe=nTe;function aTe(r,t,e){for(var n=-1,i=r.criteria,a=t.criteria,o=i.length,s=e.length;++n<o;){var l=iTe(i[n],a[n]);if(l){if(n>=s)return l;var u=e[n];return l*(u=="desc"?-1:1)}}return r.index-t.index}var oTe=aTe;function sTe(r,t,e){t.length?t=Qv(t,function(a){return Ji(a)?function(o){return Tw(o,a.length===1?a[0]:a)}:a}):t=[Md];var n=-1;t=Qv(t,mw(Au));var i=B6(r,function(a,o,s){var l=Qv(t,function(u){return u(a)});return{criteria:l,index:++n,value:a}});return rTe(i,function(a,o){return oTe(a,o,e)})}var lTe=sTe,uTe=Aw(function(r,t){if(r==null)return[];var e=t.length;return e>1&&_y(r,t[0],t[1])?t=[]:e>2&&_y(t[0],t[1],t[2])&&(t=[t[0]]),lTe(r,Uk(t,1),[])}),cTe=uTe,fTe=0;function dTe(r){var t=++fTe;return P6(r)+t}var hTe=dTe;function vTe(r,t,e){for(var n=-1,i=r.length,a=t.length,o={};++n<i;){var s=n<a?t[n]:void 0;e(o,r[n],s)}return o}var pTe=vTe;function gTe(r,t){return pTe(r||[],t||[],pw)}var mTe=gTe,Dw;if(typeof UA=="function")try{Dw={cloneDeep:TEe,constant:Rk,defaults:IEe,each:g6,filter:L6,find:JEe,flatten:pG,forEach:p6,forIn:r_e,has:F6,isUndefined:N6,last:i_e,map:$6,mapValues:o_e,max:f_e,merge:M_e,min:D_e,minBy:O_e,now:F_e,pick:j_e,range:eTe,reduce:z6,sortBy:cTe,uniqueId:hTe,values:tG,zipObject:mTe}}catch{}Dw||(Dw=window._);var me=Dw,yTe=Rw;function Rw(){var r={};r._next=r._prev=r,this._sentinel=r}Rw.prototype.dequeue=function(){var r=this._sentinel,t=r._prev;if(t!==r)return bG(t),t};Rw.prototype.enqueue=function(r){var t=this._sentinel;r._prev&&r._next&&bG(r),r._next=t._next,t._next._prev=r,t._next=r,r._prev=t};Rw.prototype.toString=function(){for(var r=[],t=this._sentinel,e=t._prev;e!==t;)r.push(JSON.stringify(e,bTe)),e=e._prev;return"["+r.join(", ")+"]"};function bG(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function bTe(r,t){if(r!=="_next"&&r!=="_prev")return t}var xTe=al.Graph,wTe=CTe,STe=me.constant(1);function CTe(r,t){if(r.nodeCount()<=1)return[];var e=_Te(r,t||STe),n=ETe(e.graph,e.buckets,e.zeroIdx);return me.flatten(me.map(n,function(i){return r.outEdges(i.v,i.w)}),!0)}function ETe(r,t,e){for(var n=[],i=t[t.length-1],a=t[0],o;r.nodeCount();){for(;o=a.dequeue();)Kk(r,t,e,o);for(;o=i.dequeue();)Kk(r,t,e,o);if(r.nodeCount()){for(var s=t.length-2;s>0;--s)if(o=t[s].dequeue(),o){n=n.concat(Kk(r,t,e,o,!0));break}}}return n}function Kk(r,t,e,n,i){var a=i?[]:void 0;return me.forEach(r.inEdges(n.v),function(o){var s=r.edge(o),l=r.node(o.v);i&&a.push({v:o.v,w:o.w}),l.out-=s,Zk(t,e,l)}),me.forEach(r.outEdges(n.v),function(o){var s=r.edge(o),l=o.w,u=r.node(l);u.in-=s,Zk(t,e,u)}),r.removeNode(n.v),a}function _Te(r,t){var e=new xTe,n=0,i=0;me.forEach(r.nodes(),function(s){e.setNode(s,{v:s,in:0,out:0})}),me.forEach(r.edges(),function(s){var l=e.edge(s.v,s.w)||0,u=t(s),c=l+u;e.setEdge(s.v,s.w,c),i=Math.max(i,e.node(s.v).out+=u),n=Math.max(n,e.node(s.w).in+=u)});var a=me.range(i+n+3).map(function(){return new yTe}),o=n+1;return me.forEach(e.nodes(),function(s){Zk(a,o,e.node(s))}),{graph:e,buckets:a,zeroIdx:o}}function Zk(r,t,e){e.out?e.in?r[e.out-e.in+t].enqueue(e):r[r.length-1].enqueue(e):r[0].enqueue(e)}var xG={run:TTe,undo:kTe};function TTe(r){var t=r.graph().acyclicer==="greedy"?wTe(r,e(r)):ATe(r);me.forEach(t,function(n){var i=r.edge(n);r.removeEdge(n),i.forwardName=n.name,i.reversed=!0,r.setEdge(n.w,n.v,i,me.uniqueId("rev"))});function e(n){return function(i){return n.edge(i).weight}}}function ATe(r){var t=[],e={},n={};function i(a){me.has(n,a)||(n[a]=!0,e[a]=!0,me.forEach(r.outEdges(a),function(o){me.has(e,o.w)?t.push(o):i(o.w)}),delete e[a])}return me.forEach(r.nodes(),i),t}function kTe(r){me.forEach(r.edges(),function(t){var e=r.edge(t);if(e.reversed){r.removeEdge(t);var n=e.forwardName;delete e.reversed,delete e.forwardName,r.setEdge(t.w,t.v,e,n)}})}var wG=al.Graph,Ea={addDummyNode:SG,simplify:MTe,asNonCompoundGraph:ITe,successorWeights:PTe,predecessorWeights:DTe,intersectRect:RTe,buildLayerMatrix:OTe,normalizeRanks:LTe,removeEmptyRanks:FTe,addBorderNode:NTe,maxRank:CG,partition:BTe,time:$Te,notime:zTe};function SG(r,t,e,n){var i;do i=me.uniqueId(n);while(r.hasNode(i));return e.dummy=t,r.setNode(i,e),i}function MTe(r){var t=new wG().setGraph(r.graph());return me.forEach(r.nodes(),function(e){t.setNode(e,r.node(e))}),me.forEach(r.edges(),function(e){var n=t.edge(e.v,e.w)||{weight:0,minlen:1},i=r.edge(e);t.setEdge(e.v,e.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})}),t}function ITe(r){var t=new wG({multigraph:r.isMultigraph()}).setGraph(r.graph());return me.forEach(r.nodes(),function(e){r.children(e).length||t.setNode(e,r.node(e))}),me.forEach(r.edges(),function(e){t.setEdge(e,r.edge(e))}),t}function PTe(r){var t=me.map(r.nodes(),function(e){var n={};return me.forEach(r.outEdges(e),function(i){n[i.w]=(n[i.w]||0)+r.edge(i).weight}),n});return me.zipObject(r.nodes(),t)}function DTe(r){var t=me.map(r.nodes(),function(e){var n={};return me.forEach(r.inEdges(e),function(i){n[i.v]=(n[i.v]||0)+r.edge(i).weight}),n});return me.zipObject(r.nodes(),t)}function RTe(r,t){var e=r.x,n=r.y,i=t.x-e,a=t.y-n,o=r.width/2,s=r.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(a)*o>Math.abs(i)*s?(a<0&&(s=-s),l=s*i/a,u=s):(i<0&&(o=-o),l=o,u=o*a/i),{x:e+l,y:n+u}}function OTe(r){var t=me.map(me.range(CG(r)+1),function(){return[]});return me.forEach(r.nodes(),function(e){var n=r.node(e),i=n.rank;me.isUndefined(i)||(t[i][n.order]=e)}),t}function LTe(r){var t=me.min(me.map(r.nodes(),function(e){return r.node(e).rank}));me.forEach(r.nodes(),function(e){var n=r.node(e);me.has(n,"rank")&&(n.rank-=t)})}function FTe(r){var t=me.min(me.map(r.nodes(),function(a){return r.node(a).rank})),e=[];me.forEach(r.nodes(),function(a){var o=r.node(a).rank-t;e[o]||(e[o]=[]),e[o].push(a)});var n=0,i=r.graph().nodeRankFactor;me.forEach(e,function(a,o){me.isUndefined(a)&&o%i!=0?--n:n&&me.forEach(a,function(s){r.node(s).rank+=n})})}function NTe(r,t,e,n){var i={width:0,height:0};return arguments.length>=4&&(i.rank=e,i.order=n),SG(r,"border",i,t)}function CG(r){return me.max(me.map(r.nodes(),function(t){var e=r.node(t).rank;if(!me.isUndefined(e))return e}))}function BTe(r,t){var e={lhs:[],rhs:[]};return me.forEach(r,function(n){t(n)?e.lhs.push(n):e.rhs.push(n)}),e}function $Te(r,t){var e=me.now();try{return t()}finally{console.log(r+" time: "+(me.now()-e)+"ms")}}function zTe(r,t){return t()}var EG={run:GTe,undo:VTe};function GTe(r){r.graph().dummyChains=[],me.forEach(r.edges(),function(t){UTe(r,t)})}function UTe(r,t){var e=t.v,n=r.node(e).rank,i=t.w,a=r.node(i).rank,o=t.name,s=r.edge(t),l=s.labelRank;if(a!==n+1){r.removeEdge(t);var u,c,f;for(f=0,++n;n<a;++f,++n)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:t,rank:n},u=Ea.addDummyNode(r,"edge",c,"_d"),n===l&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),r.setEdge(e,u,{weight:s.weight},o),f===0&&r.graph().dummyChains.push(u),e=u;r.setEdge(e,i,{weight:s.weight},o)}}function VTe(r){me.forEach(r.graph().dummyChains,function(t){var e=r.node(t),n=e.edgeLabel,i;for(r.setEdge(e.edgeObj,n);e.dummy;)i=r.successors(t)[0],r.removeNode(t),n.points.push({x:e.x,y:e.y}),e.dummy==="edge-label"&&(n.x=e.x,n.y=e.y,n.width=e.width,n.height=e.height),t=i,e=r.node(t)})}var Ow={longestPath:HTe,longestPathWithLayer:WTe,slack:jTe};function HTe(r){var t={};function e(n){var i=r.node(n);if(me.has(t,n))return i.rank;t[n]=!0;var a=me.min(me.map(r.outEdges(n),function(o){return e(o.w)-r.edge(o).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}me.forEach(r.sources(),e)}function WTe(r){var t={},e=0;function n(a){var o=r.node(a);if(me.has(t,a))return o.rank;t[a]=!0;var s=me.min(me.map(r.outEdges(a),function(l){return n(l.w)-r.edge(l).minlen}));return(s===Number.POSITIVE_INFINITY||s===void 0||s===null)&&(s=0),o.rank=s,e=Math.min(o.rank,e),o.rank}me.forEach(r.sources(),n),e+=1;function i(a,o){var s=r.node(a),l=isNaN(s.layer)?o:s.layer;(s.rank===void 0||s.rank<l)&&(s.rank=l),me.map(r.outEdges(a),function(u){i(u.w,l+r.edge(u).minlen)})}r.nodes().forEach(function(a){var o=r.node(a);isNaN(o.layer)?o.rank-=e:i(a,o.layer)})}function jTe(r,t){return r.node(t.w).rank-r.node(t.v).rank-r.edge(t).minlen}var _G=al.Graph,Dd=Ow.slack,TG={feasibleTree:YTe,feasibleTreeWithLayer:qTe};function YTe(r){var t=new _G({directed:!1}),e=r.nodes()[0],n=r.nodeCount();t.setNode(e,{});for(var i,a;XTe(t,r)<n;)i=AG(t,r),a=t.hasNode(i.v)?Dd(r,i):-Dd(r,i),kG(t,r,a);return t}function XTe(r,t){function e(n){me.forEach(t.nodeEdges(n),function(i){var a=i.v,o=n===a?i.w:a;!r.hasNode(o)&&!Dd(t,i)&&(r.setNode(o,{}),r.setEdge(n,o,{}),e(o))})}return me.forEach(r.nodes(),e),r.nodeCount()}function qTe(r){var t=new _G({directed:!1}),e=r.nodes()[0],n=r.nodeCount();t.setNode(e,{});for(var i,a;KTe(t,r)<n;)i=AG(t,r),a=t.hasNode(i.v)?Dd(r,i):-Dd(r,i),kG(t,r,a);return t}function KTe(r,t){function e(n){me.forEach(t.nodeEdges(n),function(i){var a=i.v,o=n===a?i.w:a;!r.hasNode(o)&&(t.node(o).layer!==void 0||!Dd(t,i))&&(r.setNode(o,{}),r.setEdge(n,o,{}),e(o))})}return me.forEach(r.nodes(),e),r.nodeCount()}function AG(r,t){return me.minBy(t.edges(),function(e){if(r.hasNode(e.v)!==r.hasNode(e.w))return Dd(t,e)})}function kG(r,t,e){me.forEach(r.nodes(),function(n){t.node(n).rank+=e})}var ZTe=TG.feasibleTree,QTe=Ow.slack,JTe=Ow.longestPath,eAe=al.alg.preorder,tAe=al.alg.postorder,rAe=Ea.simplify,nAe=Rd;Rd.initLowLimValues=Jk;Rd.initCutValues=Qk;Rd.calcCutValue=MG;Rd.leaveEdge=PG;Rd.enterEdge=DG;Rd.exchangeEdges=RG;function Rd(r){r=rAe(r),JTe(r);var t=ZTe(r);Jk(t),Qk(t,r);for(var e,n;e=PG(t);)n=DG(t,r,e),RG(t,r,e,n)}function Qk(r,t){var e=tAe(r,r.nodes());e=e.slice(0,e.length-1),me.forEach(e,function(n){iAe(r,t,n)})}function iAe(r,t,e){var n=r.node(e),i=n.parent;r.edge(e,i).cutvalue=MG(r,t,e)}function MG(r,t,e){var n=r.node(e),i=n.parent,a=!0,o=t.edge(e,i),s=0;return o||(a=!1,o=t.edge(i,e)),s=o.weight,me.forEach(t.nodeEdges(e),function(l){var u=l.v===e,c=u?l.w:l.v;if(c!==i){var f=u===a,d=t.edge(l).weight;if(s+=f?d:-d,oAe(r,e,c)){var h=r.edge(e,c).cutvalue;s+=f?-h:h}}}),s}function Jk(r,t){arguments.length<2&&(t=r.nodes()[0]),IG(r,{},1,t)}function IG(r,t,e,n,i){var a=e,o=r.node(n);return t[n]=!0,me.forEach(r.neighbors(n),function(s){me.has(t,s)||(e=IG(r,t,e,s,n))}),o.low=a,o.lim=e++,i?o.parent=i:delete o.parent,e}function PG(r){return me.find(r.edges(),function(t){return r.edge(t).cutvalue<0})}function DG(r,t,e){var n=e.v,i=e.w;t.hasEdge(n,i)||(n=e.w,i=e.v);var a=r.node(n),o=r.node(i),s=a,l=!1;a.lim>o.lim&&(s=o,l=!0);var u=me.filter(t.edges(),function(c){return l===OG(r,r.node(c.v),s)&&l!==OG(r,r.node(c.w),s)});return me.minBy(u,function(c){return QTe(t,c)})}function RG(r,t,e,n){var i=e.v,a=e.w;r.removeEdge(i,a),r.setEdge(n.v,n.w,{}),Jk(r),Qk(r,t),aAe(r,t)}function aAe(r,t){var e=me.find(r.nodes(),function(i){return!t.node(i).parent}),n=eAe(r,e);n=n.slice(1),me.forEach(n,function(i){var a=r.node(i).parent,o=t.edge(i,a),s=!1;o||(o=t.edge(a,i),s=!0),t.node(i).rank=t.node(a).rank+(s?o.minlen:-o.minlen)})}function oAe(r,t,e){return r.hasEdge(t,e)}function OG(r,t,e){return e.low<=t.lim&&t.lim<=e.lim}var LG=Ow.longestPathWithLayer,sAe=TG.feasibleTreeWithLayer,lAe=uAe;function uAe(r){switch(r.graph().ranker){case"network-simplex":fAe(r);break;case"tight-tree":FG(r);break;case"longest-path":cAe(r);break;default:FG(r)}}var cAe=LG;function FG(r){LG(r),sAe(r)}function fAe(r){nAe(r)}var dAe=hAe;function hAe(r){var t=pAe(r);me.forEach(r.graph().dummyChains,function(e){for(var n=r.node(e),i=n.edgeObj,a=vAe(r,t,i.v,i.w),o=a.path,s=a.lca,l=0,u=o[l],c=!0;e!==i.w;){if(n=r.node(e),c){for(;(u=o[l])!==s&&r.node(u).maxRank<n.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<o.length-1&&r.node(u=o[l+1]).minRank<=n.rank;)l++;u=o[l]}r.setParent(e,u),e=r.successors(e)[0]}})}function vAe(r,t,e,n){var i=[],a=[],o=Math.min(t[e].low,t[n].low),s=Math.max(t[e].lim,t[n].lim),l,u;l=e;do l=r.parent(l),i.push(l);while(l&&(t[l].low>o||s>t[l].lim));for(u=l,l=n;(l=r.parent(l))!==u;)a.push(l);return{path:i.concat(a.reverse()),lca:u}}function pAe(r){var t={},e=0;function n(i){var a=e;me.forEach(r.children(i),n),t[i]={low:a,lim:e++}}return me.forEach(r.children(),n),t}var NG={run:gAe,cleanup:bAe};function gAe(r){var t=Ea.addDummyNode(r,"root",{},"_root"),e=mAe(r),n=me.max(me.values(e))-1,i=2*n+1;r.graph().nestingRoot=t,me.forEach(r.edges(),function(o){r.edge(o).minlen*=i});var a=yAe(r)+1;me.forEach(r.children(),function(o){BG(r,t,i,a,n,e,o)}),r.graph().nodeRankFactor=i}function BG(r,t,e,n,i,a,o){var s=r.children(o);if(!s.length){o!==t&&r.setEdge(t,o,{weight:0,minlen:e});return}var l=Ea.addBorderNode(r,"_bt"),u=Ea.addBorderNode(r,"_bb"),c=r.node(o);r.setParent(l,o),c.borderTop=l,r.setParent(u,o),c.borderBottom=u,me.forEach(s,function(f){BG(r,t,e,n,i,a,f);var d=r.node(f),h=d.borderTop?d.borderTop:f,v=d.borderBottom?d.borderBottom:f,p=d.borderTop?n:2*n,g=h!==v?1:i-a[o]+1;r.setEdge(l,h,{weight:p,minlen:g,nestingEdge:!0}),r.setEdge(v,u,{weight:p,minlen:g,nestingEdge:!0})}),r.parent(o)||r.setEdge(t,l,{weight:0,minlen:i+a[o]})}function mAe(r){var t={};function e(n,i){var a=r.children(n);a&&a.length&&me.forEach(a,function(o){e(o,i+1)}),t[n]=i}return me.forEach(r.children(),function(n){e(n,1)}),t}function yAe(r){return me.reduce(r.edges(),function(t,e){return t+r.edge(e).weight},0)}function bAe(r){var t=r.graph();r.removeNode(t.nestingRoot),delete t.nestingRoot,me.forEach(r.edges(),function(e){var n=r.edge(e);n.nestingEdge&&r.removeEdge(e)})}var xAe=wAe;function wAe(r){function t(e){var n=r.children(e),i=r.node(e);if(n.length&&me.forEach(n,t),me.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,o=i.maxRank+1;a<o;++a)$G(r,"borderLeft","_bl",e,i,a),$G(r,"borderRight","_br",e,i,a)}}me.forEach(r.children(),t)}function $G(r,t,e,n,i,a){var o={width:0,height:0,rank:a,borderType:t},s=i[t][a-1],l=Ea.addDummyNode(r,"border",o,e);i[t][a]=l,r.setParent(l,n),s&&r.setEdge(s,l,{weight:1})}var zG={adjust:SAe,undo:CAe};function SAe(r){var t=r.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&GG(r)}function CAe(r){var t=r.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&EAe(r),(t==="lr"||t==="rl")&&(_Ae(r),GG(r))}function GG(r){me.forEach(r.nodes(),function(t){UG(r.node(t))}),me.forEach(r.edges(),function(t){UG(r.edge(t))})}function UG(r){var t=r.width;r.width=r.height,r.height=t}function EAe(r){me.forEach(r.nodes(),function(t){eM(r.node(t))}),me.forEach(r.edges(),function(t){var e=r.edge(t);me.forEach(e.points,eM),me.has(e,"y")&&eM(e)})}function eM(r){r.y=-r.y}function _Ae(r){me.forEach(r.nodes(),function(t){tM(r.node(t))}),me.forEach(r.edges(),function(t){var e=r.edge(t);me.forEach(e.points,tM),me.has(e,"x")&&tM(e)})}function tM(r){var t=r.x;r.x=r.y,r.y=t}var VG=TAe;function TAe(r){var t={},e=me.filter(r.nodes(),function(l){return!r.children(l).length}),n=me.max(me.map(e,function(l){return r.node(l).rank})),i=me.map(me.range(n+1),function(){return[]});function a(l){if(!me.has(t,l)){t[l]=!0;var u=r.node(l);i[u.rank].push(l),me.forEach(r.successors(l),a)}}var o=me.sortBy(e,function(l){return r.node(l).rank}),s=me.sortBy(me.filter(o,function(l){return r.node(l).fixorder!==void 0}),function(l){return r.node(l).fixorder});return me.forEach(s,function(l){i[r.node(l).rank].push(l),t[l]=!0}),me.forEach(o,a),i}var HG=AAe;function AAe(r,t){for(var e=0,n=1;n<t.length;++n)e+=kAe(r,t[n-1],t[n]);return e}function kAe(r,t,e){for(var n=me.zipObject(e,me.map(e,function(u,c){return c})),i=me.flatten(me.map(t,function(u){return me.sortBy(me.map(r.outEdges(u),function(c){return{pos:n[c.w],weight:r.edge(c).weight}}),"pos")}),!0),a=1;a<e.length;)a<<=1;var o=2*a-1;a-=1;var s=me.map(new Array(o),function(){return 0}),l=0;return me.forEach(i.forEach(function(u){var c=u.pos+a;s[c]+=u.weight;for(var f=0;c>0;)c%2&&(f+=s[c+1]),c=c-1>>1,s[c]+=u.weight;l+=u.weight*f})),l}var MAe=IAe;function IAe(r,t){return me.map(t,function(e){var n=r.inEdges(e);if(n.length){var i=me.reduce(n,function(a,o){var s=r.edge(o),l=r.node(o.v);return{sum:a.sum+s.weight*l.order,weight:a.weight+s.weight}},{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:e}})}var PAe=DAe;function DAe(r,t){var e={};me.forEach(r,function(i,a){var o=e[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:a};me.isUndefined(i.barycenter)||(o.barycenter=i.barycenter,o.weight=i.weight)}),me.forEach(t.edges(),function(i){var a=e[i.v],o=e[i.w];!me.isUndefined(a)&&!me.isUndefined(o)&&(o.indegree++,a.out.push(e[i.w]))});var n=me.filter(e,function(i){return!i.indegree});return RAe(n)}function RAe(r){var t=[];function e(a){return function(o){o.merged||(me.isUndefined(o.barycenter)||me.isUndefined(a.barycenter)||o.barycenter>=a.barycenter)&&OAe(a,o)}}function n(a){return function(o){o.in.push(a),--o.indegree==0&&r.push(o)}}for(;r.length;){var i=r.pop();t.push(i),me.forEach(i.in.reverse(),e(i)),me.forEach(i.out,n(i))}return me.map(me.filter(t,function(a){return!a.merged}),function(a){return me.pick(a,["vs","i","barycenter","weight"])})}function OAe(r,t){var e=0,n=0;r.weight&&(e+=r.barycenter*r.weight,n+=r.weight),t.weight&&(e+=t.barycenter*t.weight,n+=t.weight),r.vs=t.vs.concat(r.vs),r.barycenter=e/n,r.weight=n,r.i=Math.min(t.i,r.i),t.merged=!0}var LAe=FAe;function FAe(r,t,e){var n=Ea.partition(r,function(f){return me.has(f,"fixorder")&&!isNaN(f.fixorder)||me.has(f,"barycenter")}),i=n.lhs,a=me.sortBy(n.rhs,function(f){return-f.i}),o=[],s=0,l=0,u=0;i.sort(NAe(!!t,!!e)),u=WG(o,a,u),me.forEach(i,function(f){u+=f.vs.length,o.push(f.vs),s+=f.barycenter*f.weight,l+=f.weight,u=WG(o,a,u)});var c={vs:me.flatten(o,!0)};return l&&(c.barycenter=s/l,c.weight=l),c}function WG(r,t,e){for(var n;t.length&&(n=me.last(t)).i<=e;)t.pop(),r.push(n.vs),e++;return e}function NAe(r,t){return function(e,n){if(e.fixorder!==void 0&&n.fixorder!==void 0)return e.fixorder-n.fixorder;if(e.barycenter<n.barycenter)return-1;if(e.barycenter>n.barycenter)return 1;if(t&&e.order!==void 0&&n.order!==void 0){if(e.order<n.order)return-1;if(e.order>n.order)return 1}return r?n.i-e.i:e.i-n.i}}var BAe=jG;function jG(r,t,e,n,i){var a=r.children(t),o=r.node(t),s=o?o.borderLeft:void 0,l=o?o.borderRight:void 0,u={};s&&(a=me.filter(a,function(p){return p!==s&&p!==l}));var c=MAe(r,a);me.forEach(c,function(p){if(r.children(p.v).length){var g=jG(r,p.v,e,n);u[p.v]=g,me.has(g,"barycenter")&&zAe(p,g)}});var f=PAe(c,e);$Ae(f,u),me.forEach(f,function(p){var g=r.node(p.vs[0]);p.fixorder=g.fixorder,p.order=g.order});var d=LAe(f,n,i);if(s&&(d.vs=me.flatten([s,d.vs,l],!0),r.predecessors(s).length)){var h=r.node(r.predecessors(s)[0]),v=r.node(r.predecessors(l)[0]);me.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+h.order+v.order)/(d.weight+2),d.weight+=2}return d}function $Ae(r,t){me.forEach(r,function(e){e.vs=me.flatten(e.vs.map(function(n){return t[n]?t[n].vs:n}),!0)})}function zAe(r,t){me.isUndefined(r.barycenter)?(r.barycenter=t.barycenter,r.weight=t.weight):(r.barycenter=(r.barycenter*r.weight+t.barycenter*t.weight)/(r.weight+t.weight),r.weight+=t.weight)}var GAe=al.Graph,UAe=VAe;function VAe(r,t,e){var n=HAe(r),i=new GAe({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(a){return r.node(a)});return me.forEach(r.nodes(),function(a){var o=r.node(a),s=r.parent(a);(o.rank===t||o.minRank<=t&&t<=o.maxRank)&&(i.setNode(a),i.setParent(a,s||n),me.forEach(r[e](a),function(l){var u=l.v===a?l.w:l.v,c=i.edge(u,a),f=me.isUndefined(c)?0:c.weight;i.setEdge(u,a,{weight:r.edge(l).weight+f})}),me.has(o,"minRank")&&i.setNode(a,{borderLeft:o.borderLeft[t],borderRight:o.borderRight[t]}))}),i}function HAe(r){for(var t;r.hasNode(t=me.uniqueId("_root")););return t}var WAe=jAe;function jAe(r,t,e){var n={},i;me.forEach(e,function(a){for(var o=r.parent(a),s,l;o;){if(s=r.parent(o),s?(l=n[s],n[s]=o):(l=i,i=o),l&&l!==o){t.setEdge(l,o);return}o=s}})}var YAe=al.Graph,XAe=qAe;function qAe(r){var t=Ea.maxRank(r),e=YG(r,me.range(1,t+1),"inEdges"),n=YG(r,me.range(t-1,-1,-1),"outEdges"),i=VG(r);rM(r,i);for(var a=Number.POSITIVE_INFINITY,o,s=0,l=0;l<4;++s,++l){XG(s%2?e:n,s%4>=2),i=Ea.buildLayerMatrix(r);var u=HG(r,i);u<a&&(l=0,o=me.cloneDeep(i),a=u)}for(i=VG(r),rM(r,i),s=0,l=0;l<4;++s,++l)XG(s%2?e:n,s%4>=2,!0),i=Ea.buildLayerMatrix(r),u=HG(r,i),u<a&&(l=0,o=me.cloneDeep(i),a=u);rM(r,o)}function YG(r,t,e){return me.map(t,function(n){return UAe(r,n,e)})}function XG(r,t,e){var n=new YAe;me.forEach(r,function(i){var a=i.graph().root,o=BAe(i,a,n,t,e);me.forEach(o.vs,function(s,l){i.node(s).order=l}),WAe(i,n,o.vs)})}function rM(r,t){me.forEach(t,function(e){me.forEach(e,function(n,i){r.node(n).order=i})})}var KAe=al.Graph,ZAe={positionX:eke,findType1Conflicts:qG,findType2Conflicts:KG,addConflict:nM,hasConflict:ZG,verticalAlignment:QG,horizontalCompaction:JG,alignCoordinates:t8,findSmallestWidthAlignment:e8,balance:r8};function qG(r,t){var e={};function n(i,a){var o=0,s=0,l=i.length,u=me.last(a);return me.forEach(a,function(c,f){var d=QAe(r,c),h=d?r.node(d).order:l;(d||c===u)&&(me.forEach(a.slice(s,f+1),function(v){me.forEach(r.predecessors(v),function(p){var g=r.node(p),m=g.order;(m<o||h<m)&&!(g.dummy&&r.node(v).dummy)&&nM(e,p,v)})}),s=f+1,o=h)}),a}return me.reduce(t,n),e}function KG(r,t){var e={};function n(a,o,s,l,u){var c;me.forEach(me.range(o,s),function(f){c=a[f],r.node(c).dummy&&me.forEach(r.predecessors(c),function(d){var h=r.node(d);h.dummy&&(h.order<l||h.order>u)&&nM(e,d,c)})})}function i(a,o){var s=-1,l,u=0;return me.forEach(o,function(c,f){if(r.node(c).dummy==="border"){var d=r.predecessors(c);d.length&&(l=r.node(d[0]).order,n(o,u,f,s,l),u=f,s=l)}n(o,u,o.length,l,a.length)}),o}return me.reduce(t,i),e}function QAe(r,t){if(r.node(t).dummy)return me.find(r.predecessors(t),function(e){return r.node(e).dummy})}function nM(r,t,e){if(t>e){var n=t;t=e,e=n}var i=r[t];i||(r[t]=i={}),i[e]=!0}function ZG(r,t,e){if(t>e){var n=t;t=e,e=n}return me.has(r[t],e)}function QG(r,t,e,n){var i={},a={},o={};return me.forEach(t,function(s){me.forEach(s,function(l,u){i[l]=l,a[l]=l,o[l]=u})}),me.forEach(t,function(s){var l=-1;me.forEach(s,function(u){var c=n(u);if(c.length){c=me.sortBy(c,function(p){return o[p]});for(var f=(c.length-1)/2,d=Math.floor(f),h=Math.ceil(f);d<=h;++d){var v=c[d];a[u]===u&&l<o[v]&&!ZG(e,u,v)&&(a[v]=u,a[u]=i[u]=i[v],l=o[v])}}})}),{root:i,align:a}}function JG(r,t,e,n,i){var a={},o=JAe(r,t,e,i),s=i?"borderLeft":"borderRight";function l(f,d){for(var h=o.nodes(),v=h.pop(),p={};v;)p[v]?f(v):(p[v]=!0,h.push(v),h=h.concat(d(v))),v=h.pop()}function u(f){a[f]=o.inEdges(f).reduce(function(d,h){return Math.max(d,a[h.v]+o.edge(h))},0)}function c(f){var d=o.outEdges(f).reduce(function(v,p){return Math.min(v,a[p.w]-o.edge(p))},Number.POSITIVE_INFINITY),h=r.node(f);d!==Number.POSITIVE_INFINITY&&h.borderType!==s&&(a[f]=Math.max(a[f],d))}return l(u,o.predecessors.bind(o)),l(c,o.successors.bind(o)),me.forEach(n,function(f){a[f]=a[e[f]]}),a}function JAe(r,t,e,n){var i=new KAe,a=r.graph(),o=tke(a.nodesep,a.edgesep,n);return me.forEach(t,function(s){var l;me.forEach(s,function(u){var c=e[u];if(i.setNode(c),l){var f=e[l],d=i.edge(f,c);i.setEdge(f,c,Math.max(o(r,u,l),d||0))}l=u})}),i}function e8(r,t){return me.minBy(me.values(t),function(e){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return me.forIn(e,function(a,o){var s=rke(r,o)/2;n=Math.max(a+s,n),i=Math.min(a-s,i)}),n-i})}function t8(r,t){var e=me.values(t),n=me.min(e),i=me.max(e);me.forEach(["u","d"],function(a){me.forEach(["l","r"],function(o){var s=a+o,l=r[s],u;if(l!==t){var c=me.values(l);u=o==="l"?n-me.min(c):i-me.max(c),u&&(r[s]=me.mapValues(l,function(f){return f+u}))}})})}function r8(r,t){return me.mapValues(r.ul,function(e,n){if(t)return r[t.toLowerCase()][n];var i=me.sortBy(me.map(r,n));return(i[1]+i[2])/2})}function eke(r){var t=Ea.buildLayerMatrix(r),e=me.merge(qG(r,t),KG(r,t)),n={},i;me.forEach(["u","d"],function(o){i=o==="u"?t:me.values(t).reverse(),me.forEach(["l","r"],function(s){s==="r"&&(i=me.map(i,function(f){return me.values(f).reverse()}));var l=(o==="u"?r.predecessors:r.successors).bind(r),u=QG(r,i,e,l),c=JG(r,i,u.root,u.align,s==="r");s==="r"&&(c=me.mapValues(c,function(f){return-f})),n[o+s]=c})});var a=e8(r,n);return t8(n,a),r8(n,r.graph().align)}function tke(r,t,e){return function(n,i,a){var o=n.node(i),s=n.node(a),l=0,u;if(l+=o.width/2,me.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":u=-o.width/2;break;case"r":u=o.width/2;break}if(u&&(l+=e?u:-u),u=0,l+=(o.dummy?t:r)/2,l+=(s.dummy?t:r)/2,l+=s.width/2,me.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=s.width/2;break;case"r":u=-s.width/2;break}return u&&(l+=e?u:-u),u=0,l}}function rke(r,t){return r.node(t).width}var nke=ZAe.positionX,ike=ake;function ake(r){r=Ea.asNonCompoundGraph(r),oke(r),me.forEach(nke(r),function(t,e){r.node(e).x=t})}function oke(r){var t=Ea.buildLayerMatrix(r),e=r.graph().ranksep,n=0;me.forEach(t,function(i){var a=me.max(me.map(i,function(o){return r.node(o).height}));me.forEach(i,function(o){r.node(o).y=n+a/2}),n+=a+e})}var ske=lke;function lke(r,t){var e=me.filter(r.nodes(),function(a){return!r.children(a).length}),n=me.max(me.map(e,function(a){return r.node(a).rank})),i=me.map(me.range(n+1),function(){return[]});me.forEach(t,function(a){var o=r.node(a);o.dummy||(o.fixorder=i[o.rank].length,i[o.rank].push(a))})}var uke=Ea.normalizeRanks,cke=Ea.removeEmptyRanks,Gc=Ea,fke=al.Graph,dke=hke;function hke(r,t){var e=t&&t.debugTiming?Gc.time:Gc.notime;e("layout",function(){t&&!t.keepNodeOrder&&t.prevGraph&&e("  inheritOrder",function(){pke(r,t.prevGraph)});var n=e("  buildLayoutGraph",function(){return _ke(r)});t&&t.edgeLabelSpace===!1||e("  makeSpaceForEdgeLabels",function(){Tke(n)});try{e("  runLayout",function(){vke(n,e,t)})}catch(i){if(i.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,i);return}else throw i}e("  updateInputGraph",function(){gke(r,n)})})}function vke(r,t,e){t("    removeSelfEdges",function(){Lke(r)}),t("    acyclic",function(){xG.run(r)}),t("    nestingGraph.run",function(){NG.run(r)}),t("    rank",function(){lAe(Gc.asNonCompoundGraph(r))}),t("    injectEdgeLabelProxies",function(){Ake(r)}),t("    removeEmptyRanks",function(){cke(r)}),t("    nestingGraph.cleanup",function(){NG.cleanup(r)}),t("    normalizeRanks",function(){uke(r)}),t("    assignRankMinMax",function(){kke(r)}),t("    removeEdgeLabelProxies",function(){Mke(r)}),t("    normalize.run",function(){EG.run(r)}),t("    parentDummyChains",function(){dAe(r)}),t("    addBorderSegments",function(){xAe(r)}),e&&e.keepNodeOrder&&t("    initDataOrder",function(){ske(r,e.nodeOrder)}),t("    order",function(){XAe(r)}),t("    insertSelfEdges",function(){Fke(r)}),t("    adjustCoordinateSystem",function(){zG.adjust(r)}),t("    position",function(){ike(r)}),t("    positionSelfEdges",function(){Nke(r)}),t("    removeBorderNodes",function(){Oke(r)}),t("    normalize.undo",function(){EG.undo(r)}),t("    fixupEdgeLabelCoords",function(){Dke(r)}),t("    undoCoordinateSystem",function(){zG.undo(r)}),t("    translateGraph",function(){Ike(r)}),t("    assignNodeIntersects",function(){Pke(r)}),t("    reversePoints",function(){Rke(r)}),t("    acyclic.undo",function(){xG.undo(r)})}function pke(r,t){var e=t._nodes;me.forEach(r.nodes(),function(n){var i=r.node(n);e[n]!==void 0?(i.fixorder=e[n]._order,delete e[n]._order):delete i.fixorder})}function gke(r,t){me.forEach(r.nodes(),function(e){var n=r.node(e),i=t.node(e);n&&(n.x=i.x,n.y=i.y,n._order=i.order,n._rank=i.rank,t.children(e).length&&(n.width=i.width,n.height=i.height))}),me.forEach(r.edges(),function(e){var n=r.edge(e),i=t.edge(e);n.points=i.points,me.has(i,"x")&&(n.x=i.x,n.y=i.y)}),r.graph().width=t.graph().width,r.graph().height=t.graph().height}var mke=["nodesep","edgesep","ranksep","marginx","marginy"],yke={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},bke=["acyclicer","ranker","rankdir","align"],xke=["width","height","layer","fixorder"],wke={width:0,height:0},Ske=["minlen","weight","width","height","labeloffset"],Cke={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Eke=["labelpos"];function _ke(r){var t=new fke({multigraph:!0,compound:!0}),e=aM(r.graph());return t.setGraph(me.merge({},yke,iM(e,mke),me.pick(e,bke))),me.forEach(r.nodes(),function(n){var i=aM(r.node(n));t.setNode(n,me.defaults(iM(i,xke),wke)),t.setParent(n,r.parent(n))}),me.forEach(r.edges(),function(n){var i=aM(r.edge(n));t.setEdge(n,me.merge({},Cke,iM(i,Ske),me.pick(i,Eke)))}),t}function Tke(r){var t=r.graph();t.ranksep/=2,me.forEach(r.nodes(),function(e){var n=r.node(e);isNaN(n.layer)||(n.layer*=2)}),me.forEach(r.edges(),function(e){var n=r.edge(e);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function Ake(r){me.forEach(r.edges(),function(t){var e=r.edge(t);if(e.width&&e.height){var n=r.node(t.v),i=r.node(t.w),a={rank:(i.rank-n.rank)/2+n.rank,e:t};Gc.addDummyNode(r,"edge-proxy",a,"_ep")}})}function kke(r){var t=0;me.forEach(r.nodes(),function(e){var n=r.node(e);n.borderTop&&(n.minRank=r.node(n.borderTop).rank,n.maxRank=r.node(n.borderBottom).rank,t=me.max(t,n.maxRank))}),r.graph().maxRank=t}function Mke(r){me.forEach(r.nodes(),function(t){var e=r.node(t);e.dummy==="edge-proxy"&&(r.edge(e.e).labelRank=e.rank,r.removeNode(t))})}function Ike(r){var t=Number.POSITIVE_INFINITY,e=0,n=Number.POSITIVE_INFINITY,i=0,a=r.graph(),o=a.marginx||0,s=a.marginy||0;function l(u){var c=u.x,f=u.y,d=u.width,h=u.height;t=Math.min(t,c-d/2),e=Math.max(e,c+d/2),n=Math.min(n,f-h/2),i=Math.max(i,f+h/2)}me.forEach(r.nodes(),function(u){l(r.node(u))}),me.forEach(r.edges(),function(u){var c=r.edge(u);me.has(c,"x")&&l(c)}),t-=o,n-=s,me.forEach(r.nodes(),function(u){var c=r.node(u);c.x-=t,c.y-=n}),me.forEach(r.edges(),function(u){var c=r.edge(u);me.forEach(c.points,function(f){f.x-=t,f.y-=n}),me.has(c,"x")&&(c.x-=t),me.has(c,"y")&&(c.y-=n)}),a.width=e-t+o,a.height=i-n+s}function Pke(r){me.forEach(r.edges(),function(t){var e=r.edge(t),n=r.node(t.v),i=r.node(t.w),a,o;e.points?(a=e.points[0],o=e.points[e.points.length-1]):(e.points=[],a=i,o=n),e.points.unshift(Gc.intersectRect(n,a)),e.points.push(Gc.intersectRect(i,o))})}function Dke(r){me.forEach(r.edges(),function(t){var e=r.edge(t);if(me.has(e,"x"))switch((e.labelpos==="l"||e.labelpos==="r")&&(e.width-=e.labeloffset),e.labelpos){case"l":e.x-=e.width/2+e.labeloffset;break;case"r":e.x+=e.width/2+e.labeloffset;break}})}function Rke(r){me.forEach(r.edges(),function(t){var e=r.edge(t);e.reversed&&e.points.reverse()})}function Oke(r){me.forEach(r.nodes(),function(t){if(r.children(t).length){var e=r.node(t),n=r.node(e.borderTop),i=r.node(e.borderBottom),a=r.node(me.last(e.borderLeft)),o=r.node(me.last(e.borderRight));e.width=Math.abs(o.x-a.x),e.height=Math.abs(i.y-n.y),e.x=a.x+e.width/2,e.y=n.y+e.height/2}}),me.forEach(r.nodes(),function(t){r.node(t).dummy==="border"&&r.removeNode(t)})}function Lke(r){me.forEach(r.edges(),function(t){if(t.v===t.w){var e=r.node(t.v);e.selfEdges||(e.selfEdges=[]),e.selfEdges.push({e:t,label:r.edge(t)}),r.removeEdge(t)}})}function Fke(r){var t=Gc.buildLayerMatrix(r);me.forEach(t,function(e){var n=0;me.forEach(e,function(i,a){var o=r.node(i);o.order=a+n,me.forEach(o.selfEdges,function(s){Gc.addDummyNode(r,"selfedge",{width:s.label.width,height:s.label.height,rank:o.rank,order:a+ ++n,e:s.e,label:s.label},"_se")}),delete o.selfEdges})})}function Nke(r){me.forEach(r.nodes(),function(t){var e=r.node(t);if(e.dummy==="selfedge"){var n=r.node(e.e.v),i=n.x+n.width/2,a=n.y,o=e.x-i,s=n.height/2;r.setEdge(e.e,e.label),r.removeNode(t),e.label.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{x:i+o,y:a},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],e.label.x=e.x,e.label.y=e.y}})}function iM(r,t){return me.mapValues(me.pick(r,t),Number)}function aM(r){var t={};return me.forEach(r,function(e,n){t[n.toLowerCase()]=e}),t}var Bke=al.Graph,$ke={debugOrdering:zke};function zke(r){var t=Ea.buildLayerMatrix(r),e=new Bke({compound:!0,multigraph:!0}).setGraph({});return me.forEach(r.nodes(),function(n){e.setNode(n,{label:n}),e.setParent(n,"layer"+r.node(n).rank)}),me.forEach(r.edges(),function(n){e.setEdge(n.v,n.w,{},n.name)}),me.forEach(t,function(n,i){var a="layer"+i;e.setNode(a,{rank:"same"}),me.reduce(n,function(o,s){return e.setEdge(o,s,{style:"invis"}),s})}),e}var Gke="0.1.1",oM={graphlib:al,layout:dke,debug:$ke,util:{time:Ea.time,notime:Ea.notime},version:Gke};class n8 extends _o{constructor(t){super();this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.keepNodeOrder=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=e=>{const n=this,{nodes:i}=n,a=i.find(o=>o.id===e);return a?a.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}execute(){const t=this,{nodes:e,nodeSize:n,rankdir:i,combos:a}=t;if(!e)return;const o=t.edges||[],s=new oM.graphlib.Graph({multigraph:!0,compound:!0});let l;n?Ka(n)?l=()=>n:l=()=>[n,n]:l=v=>v.size?Ka(v.size)?v.size:Bl(v.size)?[v.size.width||40,v.size.height||40]:[v.size,v.size]:[40,40];let u=Lw(t.nodesepFunc,t.nodesep,50),c=Lw(t.ranksepFunc,t.ranksep,50);(i==="LR"||i==="RL")&&(u=Lw(t.ranksepFunc,t.ranksep,50),c=Lw(t.nodesepFunc,t.nodesep,50)),s.setDefaultEdgeLabel(()=>({})),s.setGraph(t);const f={};e.filter(v=>v.layout!==!1).forEach(v=>{const p=l(v),g=c(v),m=u(v),y=p[0]+2*m,b=p[1]+2*g,x=v.layer;Qt(x)?s.setNode(v.id,{width:y,height:b,layer:x}):s.setNode(v.id,{width:y,height:b}),this.sortByCombo&&v.comboId&&(f[v.comboId]||(f[v.comboId]=!0,s.setNode(v.comboId,{})),s.setParent(v.id,v.comboId))}),this.sortByCombo&&a&&a.forEach(v=>{!v.parentId||(f[v.parentId]||(f[v.parentId]=!0,s.setNode(v.parentId,{})),s.setParent(v.id,v.parentId))}),o.forEach(v=>{const p=An(v,"source"),g=An(v,"target");this.layoutNode(p)&&this.layoutNode(g)&&s.setEdge(p,g,{weight:v.weight||1})});let d;t.preset&&(d=new oM.graphlib.Graph({multigraph:!0,compound:!0}),t.preset.nodes.forEach(v=>{d==null||d.setNode(v.id,v)})),oM.layout(s,{prevGraph:d,edgeLabelSpace:t.edgeLabelSpace,keepNodeOrder:t.keepNodeOrder,nodeOrder:t.nodeOrder});let h;return s.nodes().forEach(v=>{h=s.node(v);const p=e.findIndex(g=>g.id===v);!e[p]||(e[p].x=h.x,e[p].y=h.y,e[p]._order=h._order)}),s.edges().forEach(v=>{h=s.edge(v);const p=o.findIndex(g=>{const m=An(g,"source"),y=An(g,"target");return m===v.v&&y===v.w});t.edgeLabelSpace&&t.controlPoints&&o[p].type!=="loop"&&(o[p].controlPoints=h.points.slice(1,h.points.length-1))}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:o}}getType(){return"dagre"}}function Lw(r,t,e){let n;return r?n=r:Qt(t)?n=()=>t:n=()=>e,n}const Uke=Object.prototype.toString;function Fw(r){return Uke.call(r).endsWith("Array]")}function Vke(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Fw(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var e=t.fromIndex,n=e===void 0?0:e,i=t.toIndex,a=i===void 0?r.length:i;if(n<0||n>=r.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>r.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=r[n],s=n+1;s<a;s++)r[s]>o&&(o=r[s]);return o}function Hke(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Fw(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var e=t.fromIndex,n=e===void 0?0:e,i=t.toIndex,a=i===void 0?r.length:i;if(n<0||n>=r.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>r.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=r[n],s=n+1;s<a;s++)r[s]<o&&(o=r[s]);return o}function i8(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Fw(r)){if(r.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var e;if(t.output!==void 0){if(!Fw(t.output))throw new TypeError("output option must be an array if specified");e=t.output}else e=new Array(r.length);var n=Hke(r),i=Vke(r);if(n===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=t.min,o=a===void 0?t.autoMinMax?n:0:a,s=t.max,l=s===void 0?t.autoMinMax?i:1:s;if(o>=l)throw new RangeError("min option must be smaller than max option");for(var u=(l-o)/(i-n),c=0;c<r.length;c++)e[c]=(r[c]-n)*u+o;return e}const Nw=" ".repeat(2),a8=" ".repeat(4);function Wke(){return o8(this)}function o8(r,t={}){const{maxRows:e=15,maxColumns:n=10,maxNumSize:i=8}=t;return`${r.constructor.name} {
${Nw}[
${a8}${jke(r,e,n,i)}
${Nw}]
${Nw}rows: ${r.rows}
${Nw}columns: ${r.columns}
}`}function jke(r,t,e,n){const{rows:i,columns:a}=r,o=Math.min(i,t),s=Math.min(a,e),l=[];for(let u=0;u<o;u++){let c=[];for(let f=0;f<s;f++)c.push(Yke(r.get(u,f),n));l.push(`${c.join(" ")}`)}return s!==a&&(l[l.length-1]+=` ... ${a-e} more columns`),o!==i&&l.push(`... ${i-t} more rows`),l.join(`
${a8}`)}function Yke(r,t){const e=String(r);if(e.length<=t)return e.padEnd(t," ");const n=r.toPrecision(t-2);if(n.length<=t)return n;const i=r.toExponential(t-2),a=i.indexOf("e"),o=i.slice(a);return i.slice(0,t-o.length)+o}function Xke(r,t){r.prototype.add=function(n){return typeof n=="number"?this.addS(n):this.addM(n)},r.prototype.addS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+n);return this},r.prototype.addM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+n.get(i,a));return this},r.add=function(n,i){return new t(n).add(i)},r.prototype.sub=function(n){return typeof n=="number"?this.subS(n):this.subM(n)},r.prototype.subS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-n);return this},r.prototype.subM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-n.get(i,a));return this},r.sub=function(n,i){return new t(n).sub(i)},r.prototype.subtract=r.prototype.sub,r.prototype.subtractS=r.prototype.subS,r.prototype.subtractM=r.prototype.subM,r.subtract=r.sub,r.prototype.mul=function(n){return typeof n=="number"?this.mulS(n):this.mulM(n)},r.prototype.mulS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*n);return this},r.prototype.mulM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*n.get(i,a));return this},r.mul=function(n,i){return new t(n).mul(i)},r.prototype.multiply=r.prototype.mul,r.prototype.multiplyS=r.prototype.mulS,r.prototype.multiplyM=r.prototype.mulM,r.multiply=r.mul,r.prototype.div=function(n){return typeof n=="number"?this.divS(n):this.divM(n)},r.prototype.divS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/n);return this},r.prototype.divM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/n.get(i,a));return this},r.div=function(n,i){return new t(n).div(i)},r.prototype.divide=r.prototype.div,r.prototype.divideS=r.prototype.divS,r.prototype.divideM=r.prototype.divM,r.divide=r.div,r.prototype.mod=function(n){return typeof n=="number"?this.modS(n):this.modM(n)},r.prototype.modS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%n);return this},r.prototype.modM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%n.get(i,a));return this},r.mod=function(n,i){return new t(n).mod(i)},r.prototype.modulus=r.prototype.mod,r.prototype.modulusS=r.prototype.modS,r.prototype.modulusM=r.prototype.modM,r.modulus=r.mod,r.prototype.and=function(n){return typeof n=="number"?this.andS(n):this.andM(n)},r.prototype.andS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&n);return this},r.prototype.andM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&n.get(i,a));return this},r.and=function(n,i){return new t(n).and(i)},r.prototype.or=function(n){return typeof n=="number"?this.orS(n):this.orM(n)},r.prototype.orS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|n);return this},r.prototype.orM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|n.get(i,a));return this},r.or=function(n,i){return new t(n).or(i)},r.prototype.xor=function(n){return typeof n=="number"?this.xorS(n):this.xorM(n)},r.prototype.xorS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^n);return this},r.prototype.xorM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^n.get(i,a));return this},r.xor=function(n,i){return new t(n).xor(i)},r.prototype.leftShift=function(n){return typeof n=="number"?this.leftShiftS(n):this.leftShiftM(n)},r.prototype.leftShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<n);return this},r.prototype.leftShiftM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<n.get(i,a));return this},r.leftShift=function(n,i){return new t(n).leftShift(i)},r.prototype.signPropagatingRightShift=function(n){return typeof n=="number"?this.signPropagatingRightShiftS(n):this.signPropagatingRightShiftM(n)},r.prototype.signPropagatingRightShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>n);return this},r.prototype.signPropagatingRightShiftM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>n.get(i,a));return this},r.signPropagatingRightShift=function(n,i){return new t(n).signPropagatingRightShift(i)},r.prototype.rightShift=function(n){return typeof n=="number"?this.rightShiftS(n):this.rightShiftM(n)},r.prototype.rightShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>n);return this},r.prototype.rightShiftM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>n.get(i,a));return this},r.rightShift=function(n,i){return new t(n).rightShift(i)},r.prototype.zeroFillRightShift=r.prototype.rightShift,r.prototype.zeroFillRightShiftS=r.prototype.rightShiftS,r.prototype.zeroFillRightShiftM=r.prototype.rightShiftM,r.zeroFillRightShift=r.rightShift,r.prototype.not=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,~this.get(n,i));return this},r.not=function(n){return new t(n).not()},r.prototype.abs=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.abs(this.get(n,i)));return this},r.abs=function(n){return new t(n).abs()},r.prototype.acos=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.acos(this.get(n,i)));return this},r.acos=function(n){return new t(n).acos()},r.prototype.acosh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.acosh(this.get(n,i)));return this},r.acosh=function(n){return new t(n).acosh()},r.prototype.asin=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.asin(this.get(n,i)));return this},r.asin=function(n){return new t(n).asin()},r.prototype.asinh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.asinh(this.get(n,i)));return this},r.asinh=function(n){return new t(n).asinh()},r.prototype.atan=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.atan(this.get(n,i)));return this},r.atan=function(n){return new t(n).atan()},r.prototype.atanh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.atanh(this.get(n,i)));return this},r.atanh=function(n){return new t(n).atanh()},r.prototype.cbrt=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cbrt(this.get(n,i)));return this},r.cbrt=function(n){return new t(n).cbrt()},r.prototype.ceil=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.ceil(this.get(n,i)));return this},r.ceil=function(n){return new t(n).ceil()},r.prototype.clz32=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.clz32(this.get(n,i)));return this},r.clz32=function(n){return new t(n).clz32()},r.prototype.cos=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cos(this.get(n,i)));return this},r.cos=function(n){return new t(n).cos()},r.prototype.cosh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cosh(this.get(n,i)));return this},r.cosh=function(n){return new t(n).cosh()},r.prototype.exp=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.exp(this.get(n,i)));return this},r.exp=function(n){return new t(n).exp()},r.prototype.expm1=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.expm1(this.get(n,i)));return this},r.expm1=function(n){return new t(n).expm1()},r.prototype.floor=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.floor(this.get(n,i)));return this},r.floor=function(n){return new t(n).floor()},r.prototype.fround=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.fround(this.get(n,i)));return this},r.fround=function(n){return new t(n).fround()},r.prototype.log=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log(this.get(n,i)));return this},r.log=function(n){return new t(n).log()},r.prototype.log1p=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log1p(this.get(n,i)));return this},r.log1p=function(n){return new t(n).log1p()},r.prototype.log10=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log10(this.get(n,i)));return this},r.log10=function(n){return new t(n).log10()},r.prototype.log2=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log2(this.get(n,i)));return this},r.log2=function(n){return new t(n).log2()},r.prototype.round=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.round(this.get(n,i)));return this},r.round=function(n){return new t(n).round()},r.prototype.sign=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sign(this.get(n,i)));return this},r.sign=function(n){return new t(n).sign()},r.prototype.sin=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sin(this.get(n,i)));return this},r.sin=function(n){return new t(n).sin()},r.prototype.sinh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sinh(this.get(n,i)));return this},r.sinh=function(n){return new t(n).sinh()},r.prototype.sqrt=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sqrt(this.get(n,i)));return this},r.sqrt=function(n){return new t(n).sqrt()},r.prototype.tan=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.tan(this.get(n,i)));return this},r.tan=function(n){return new t(n).tan()},r.prototype.tanh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.tanh(this.get(n,i)));return this},r.tanh=function(n){return new t(n).tanh()},r.prototype.trunc=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.trunc(this.get(n,i)));return this},r.trunc=function(n){return new t(n).trunc()},r.pow=function(n,i){return new t(n).pow(i)},r.prototype.pow=function(n){return typeof n=="number"?this.powS(n):this.powM(n)},r.prototype.powS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.pow(this.get(i,a),n));return this},r.prototype.powM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.pow(this.get(i,a),n.get(i,a)));return this}}function ol(r,t,e){let n=e?r.rows:r.rows-1;if(t<0||t>n)throw new RangeError("Row index out of range")}function sl(r,t,e){let n=e?r.columns:r.columns-1;if(t<0||t>n)throw new RangeError("Column index out of range")}function Jv(r,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==r.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function ep(r,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==r.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function qke(r,t,e){return{row:Kke(r,t),column:Zke(r,e)}}function Kke(r,t){if(typeof t!="object")throw new TypeError("unexpected type for row indices");if(t.some(n=>n<0||n>=r.rows))throw new RangeError("row indices are out of range");return Array.isArray(t)||(t=Array.from(t)),t}function Zke(r,t){if(typeof t!="object")throw new TypeError("unexpected type for column indices");if(t.some(n=>n<0||n>=r.columns))throw new RangeError("column indices are out of range");return Array.isArray(t)||(t=Array.from(t)),t}function s8(r,t,e,n,i){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if($w("startRow",t),$w("endRow",e),$w("startColumn",n),$w("endColumn",i),t>e||n>i||t<0||t>=r.rows||e<0||e>=r.rows||n<0||n>=r.columns||i<0||i>=r.columns)throw new RangeError("Submatrix indices are out of range")}function Bw(r,t=0){let e=[];for(let n=0;n<r;n++)e.push(t);return e}function $w(r,t){if(typeof t!="number")throw new TypeError(`${r} must be a number`)}function tp(r){if(r.isEmpty())throw new Error("Empty matrix has no elements to index")}function Qke(r){let t=Bw(r.rows);for(let e=0;e<r.rows;++e)for(let n=0;n<r.columns;++n)t[e]+=r.get(e,n);return t}function Jke(r){let t=Bw(r.columns);for(let e=0;e<r.rows;++e)for(let n=0;n<r.columns;++n)t[n]+=r.get(e,n);return t}function eMe(r){let t=0;for(let e=0;e<r.rows;e++)for(let n=0;n<r.columns;n++)t+=r.get(e,n);return t}function tMe(r){let t=Bw(r.rows,1);for(let e=0;e<r.rows;++e)for(let n=0;n<r.columns;++n)t[e]*=r.get(e,n);return t}function rMe(r){let t=Bw(r.columns,1);for(let e=0;e<r.rows;++e)for(let n=0;n<r.columns;++n)t[n]*=r.get(e,n);return t}function nMe(r){let t=1;for(let e=0;e<r.rows;e++)for(let n=0;n<r.columns;n++)t*=r.get(e,n);return t}function iMe(r,t,e){const n=r.rows,i=r.columns,a=[];for(let o=0;o<n;o++){let s=0,l=0,u=0;for(let c=0;c<i;c++)u=r.get(o,c)-e[o],s+=u,l+=u*u;t?a.push((l-s*s/i)/(i-1)):a.push((l-s*s/i)/i)}return a}function aMe(r,t,e){const n=r.rows,i=r.columns,a=[];for(let o=0;o<i;o++){let s=0,l=0,u=0;for(let c=0;c<n;c++)u=r.get(c,o)-e[o],s+=u,l+=u*u;t?a.push((l-s*s/n)/(n-1)):a.push((l-s*s/n)/n)}return a}function oMe(r,t,e){const n=r.rows,i=r.columns,a=n*i;let o=0,s=0,l=0;for(let u=0;u<n;u++)for(let c=0;c<i;c++)l=r.get(u,c)-e,o+=l,s+=l*l;return t?(s-o*o/a)/(a-1):(s-o*o/a)/a}function sMe(r,t){for(let e=0;e<r.rows;e++)for(let n=0;n<r.columns;n++)r.set(e,n,r.get(e,n)-t[e])}function lMe(r,t){for(let e=0;e<r.rows;e++)for(let n=0;n<r.columns;n++)r.set(e,n,r.get(e,n)-t[n])}function uMe(r,t){for(let e=0;e<r.rows;e++)for(let n=0;n<r.columns;n++)r.set(e,n,r.get(e,n)-t)}function cMe(r){const t=[];for(let e=0;e<r.rows;e++){let n=0;for(let i=0;i<r.columns;i++)n+=Math.pow(r.get(e,i),2)/(r.columns-1);t.push(Math.sqrt(n))}return t}function fMe(r,t){for(let e=0;e<r.rows;e++)for(let n=0;n<r.columns;n++)r.set(e,n,r.get(e,n)/t[e])}function dMe(r){const t=[];for(let e=0;e<r.columns;e++){let n=0;for(let i=0;i<r.rows;i++)n+=Math.pow(r.get(i,e),2)/(r.rows-1);t.push(Math.sqrt(n))}return t}function hMe(r,t){for(let e=0;e<r.rows;e++)for(let n=0;n<r.columns;n++)r.set(e,n,r.get(e,n)/t[n])}function vMe(r){const t=r.size-1;let e=0;for(let n=0;n<r.columns;n++)for(let i=0;i<r.rows;i++)e+=Math.pow(r.get(i,n),2)/t;return Math.sqrt(e)}function pMe(r,t){for(let e=0;e<r.rows;e++)for(let n=0;n<r.columns;n++)r.set(e,n,r.get(e,n)/t)}class Sn{static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("data length does not match given dimensions");let a=new Dr(t,e);for(let o=0;o<t;o++)for(let s=0;s<e;s++)a.set(o,s,n[o*e+s]);return a}static rowVector(t){let e=new Dr(1,t.length);for(let n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){let e=new Dr(t.length,1);for(let n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static zeros(t,e){return new Dr(t,e)}static ones(t,e){return new Dr(t,e).fill(1)}static rand(t,e,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{random:i=Math.random}=n;let a=new Dr(t,e);for(let o=0;o<t;o++)for(let s=0;s<e;s++)a.set(o,s,i());return a}static randInt(t,e,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{min:i=0,max:a=1e3,random:o=Math.random}=n;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(i>=a)throw new RangeError("min must be smaller than max");let s=a-i,l=new Dr(t,e);for(let u=0;u<t;u++)for(let c=0;c<e;c++){let f=i+Math.round(o()*s);l.set(u,c,f)}return l}static eye(t,e,n){e===void 0&&(e=t),n===void 0&&(n=1);let i=Math.min(t,e),a=this.zeros(t,e);for(let o=0;o<i;o++)a.set(o,o,n);return a}static diag(t,e,n){let i=t.length;e===void 0&&(e=i),n===void 0&&(n=e);let a=Math.min(i,e,n),o=this.zeros(e,n);for(let s=0;s<a;s++)o.set(s,s,t[s]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,i=t.columns,a=new Dr(n,i);for(let o=0;o<n;o++)for(let s=0;s<i;s++)a.set(o,s,Math.min(t.get(o,s),e.get(o,s)));return a}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,i=t.columns,a=new this(n,i);for(let o=0;o<n;o++)for(let s=0;s<i;s++)a.set(o,s,Math.max(t.get(o,s),e.get(o,s)));return a}static checkMatrix(t){return Sn.isMatrix(t)?t:new Dr(t)}static isMatrix(t){return t!=null&&t.klass==="Matrix"}get size(){return this.rows*this.columns}apply(t){if(typeof t!="function")throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.call(this,e,n);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isEchelonForm(){let t=0,e=0,n=-1,i=!0,a=!1;for(;t<this.rows&&i;){for(e=0,a=!1;e<this.columns&&a===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>n?(a=!0,n=e):(i=!1,a=!0);t++}return i}isReducedEchelonForm(){let t=0,e=0,n=-1,i=!0,a=!1;for(;t<this.rows&&i;){for(e=0,a=!1;e<this.columns&&a===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>n?(a=!0,n=e):(i=!1,a=!0);for(let o=e+1;o<this.rows;o++)this.get(t,o)!==0&&(i=!1);t++}return i}echelonForm(){let t=this.clone(),e=0,n=0;for(;e<t.rows&&n<t.columns;){let i=e;for(let a=e;a<t.rows;a++)t.get(a,n)>t.get(i,n)&&(i=a);if(t.get(i,n)===0)n++;else{t.swapRows(e,i);let a=t.get(e,n);for(let o=n;o<t.columns;o++)t.set(e,o,t.get(e,o)/a);for(let o=e+1;o<t.rows;o++){let s=t.get(o,n)/t.get(e,n);t.set(o,n,0);for(let l=n+1;l<t.columns;l++)t.set(o,l,t.get(o,l)-t.get(e,l)*s)}e++,n++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,n=t.rows,i=n-1;for(;i>=0;)if(t.maxRow(i)===0)i--;else{let a=0,o=!1;for(;a<n&&o===!1;)t.get(i,a)===1?o=!0:a++;for(let s=0;s<i;s++){let l=t.get(s,a);for(let u=a;u<e;u++){let c=t.get(s,u)-l*t.get(i,u);t.set(s,u,c)}}i--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{rows:e=1,columns:n=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let i=new Dr(this.rows*e,this.columns*n);for(let a=0;a<e;a++)for(let o=0;o<n;o++)i.setSubMatrix(this,this.rows*a,this.columns*o);return i}fill(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){ol(this,t);let e=[];for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}getRowVector(t){return Dr.rowVector(this.getRow(t))}setRow(t,e){ol(this,t),e=Jv(this,e);for(let n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){ol(this,t),ol(this,e);for(let n=0;n<this.columns;n++){let i=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,i)}return this}getColumn(t){sl(this,t);let e=[];for(let n=0;n<this.rows;n++)e.push(this.get(n,t));return e}getColumnVector(t){return Dr.columnVector(this.getColumn(t))}setColumn(t,e){sl(this,t),e=ep(this,e);for(let n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){sl(this,t),sl(this,e);for(let n=0;n<this.rows;n++){let i=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,i)}return this}addRowVector(t){t=Jv(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=Jv(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=Jv(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=Jv(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=ep(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=ep(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=ep(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=ep(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){ol(this,t);for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){sl(this,t);for(let n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(){if(this.isEmpty())return NaN;let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxIndex(){tp(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)>t&&(t=this.get(n,i),e[0]=n,e[1]=i);return e}min(){if(this.isEmpty())return NaN;let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minIndex(){tp(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)<t&&(t=this.get(n,i),e[0]=n,e[1]=i);return e}maxRow(t){if(ol(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){ol(this,t),tp(this);let e=this.get(t,0),n=[t,0];for(let i=1;i<this.columns;i++)this.get(t,i)>e&&(e=this.get(t,i),n[1]=i);return n}minRow(t){if(ol(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){ol(this,t),tp(this);let e=this.get(t,0),n=[t,0];for(let i=1;i<this.columns;i++)this.get(t,i)<e&&(e=this.get(t,i),n[1]=i);return n}maxColumn(t){if(sl(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){sl(this,t),tp(this);let e=this.get(0,t),n=[0,t];for(let i=1;i<this.rows;i++)this.get(i,t)>e&&(e=this.get(i,t),n[0]=i);return n}minColumn(t){if(sl(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){sl(this,t),tp(this);let e=this.get(0,t),n=[0,t];for(let i=1;i<this.rows;i++)this.get(i,t)<e&&(e=this.get(i,t),n[0]=i);return n}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let n=0;n<t;n++)e.push(this.get(n,n));return e}norm(t="frobenius"){let e=0;if(t==="max")return this.max();if(t==="frobenius"){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)e=e+this.get(n,i)*this.get(n,i);return Math.sqrt(e)}else throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){Sn.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let n=0;for(let i=0;i<e.length;i++)n+=e[i]*t[i];return n}mmul(t){t=Dr.checkMatrix(t);let e=this.rows,n=this.columns,i=t.columns,a=new Dr(e,i),o=new Float64Array(n);for(let s=0;s<i;s++){for(let l=0;l<n;l++)o[l]=t.get(l,s);for(let l=0;l<e;l++){let u=0;for(let c=0;c<n;c++)u+=this.get(l,c)*o[c];a.set(l,s,u)}}return a}strassen2x2(t){t=Dr.checkMatrix(t);let e=new Dr(2,2);const n=this.get(0,0),i=t.get(0,0),a=this.get(0,1),o=t.get(0,1),s=this.get(1,0),l=t.get(1,0),u=this.get(1,1),c=t.get(1,1),f=(n+u)*(i+c),d=(s+u)*i,h=n*(o-c),v=u*(l-i),p=(n+a)*c,g=(s-n)*(i+o),m=(a-u)*(l+c),y=f+v-p+m,b=h+p,x=d+v,w=f-d+h+g;return e.set(0,0,y),e.set(0,1,b),e.set(1,0,x),e.set(1,1,w),e}strassen3x3(t){t=Dr.checkMatrix(t);let e=new Dr(3,3);const n=this.get(0,0),i=this.get(0,1),a=this.get(0,2),o=this.get(1,0),s=this.get(1,1),l=this.get(1,2),u=this.get(2,0),c=this.get(2,1),f=this.get(2,2),d=t.get(0,0),h=t.get(0,1),v=t.get(0,2),p=t.get(1,0),g=t.get(1,1),m=t.get(1,2),y=t.get(2,0),b=t.get(2,1),x=t.get(2,2),w=(n+i+a-o-s-c-f)*g,S=(n-o)*(-h+g),C=s*(-d+h+p-g-m-y+x),_=(-n+o+s)*(d-h+g),T=(o+s)*(-d+h),E=n*d,k=(-n+u+c)*(d-v+m),I=(-n+u)*(v-m),P=(u+c)*(-d+v),F=(n+i+a-s-l-u-c)*m,$=c*(-d+v+p-g-m-y+b),R=(-a+c+f)*(g+y-b),L=(a-f)*(g-b),O=a*y,B=(c+f)*(-y+b),U=(-a+s+l)*(m+y-x),W=(a-l)*(m-x),X=(s+l)*(-y+x),ie=i*p,q=l*b,j=o*v,fe=u*h,se=f*x,ce=E+O+ie,_e=w+_+T+E+R+O+B,Me=E+k+P+F+O+U+X,Ye=S+C+_+E+O+U+W,De=S+_+T+E+q,D=O+U+W+X+j,z=E+k+I+$+R+L+O,V=R+L+O+B+fe,he=E+k+I+P+se;return e.set(0,0,ce),e.set(0,1,_e),e.set(0,2,Me),e.set(1,0,Ye),e.set(1,1,De),e.set(1,2,D),e.set(2,0,z),e.set(2,1,V),e.set(2,2,he),e}mmulStrassen(t){t=Dr.checkMatrix(t);let e=this.clone(),n=e.rows,i=e.columns,a=t.rows,o=t.columns;i!==a&&console.warn(`Multiplying ${n} x ${i} and ${a} x ${o} matrix: dimensions do not match.`);function s(f,d,h){let v=f.rows,p=f.columns;if(v===d&&p===h)return f;{let g=Sn.zeros(d,h);return g=g.setSubMatrix(f,0,0),g}}let l=Math.max(n,a),u=Math.max(i,o);e=s(e,l,u),t=s(t,l,u);function c(f,d,h,v){if(h<=512||v<=512)return f.mmul(d);h%2==1&&v%2==1?(f=s(f,h+1,v+1),d=s(d,h+1,v+1)):h%2==1?(f=s(f,h+1,v),d=s(d,h+1,v)):v%2==1&&(f=s(f,h,v+1),d=s(d,h,v+1));let p=parseInt(f.rows/2,10),g=parseInt(f.columns/2,10),m=f.subMatrix(0,p-1,0,g-1),y=d.subMatrix(0,p-1,0,g-1),b=f.subMatrix(0,p-1,g,f.columns-1),x=d.subMatrix(0,p-1,g,d.columns-1),w=f.subMatrix(p,f.rows-1,0,g-1),S=d.subMatrix(p,d.rows-1,0,g-1),C=f.subMatrix(p,f.rows-1,g,f.columns-1),_=d.subMatrix(p,d.rows-1,g,d.columns-1),T=c(Sn.add(m,C),Sn.add(y,_),p,g),E=c(Sn.add(w,C),y,p,g),k=c(m,Sn.sub(x,_),p,g),I=c(C,Sn.sub(S,y),p,g),P=c(Sn.add(m,b),_,p,g),F=c(Sn.sub(w,m),Sn.add(y,x),p,g),$=c(Sn.sub(b,C),Sn.add(S,_),p,g),R=Sn.add(T,I);R.sub(P),R.add($);let L=Sn.add(k,P),O=Sn.add(E,I),B=Sn.sub(T,E);B.add(k),B.add(F);let U=Sn.zeros(2*R.rows,2*R.columns);return U=U.setSubMatrix(R,0,0),U=U.setSubMatrix(L,R.rows,0),U=U.setSubMatrix(O,0,R.columns),U=U.setSubMatrix(B,R.rows,R.columns),U.subMatrix(0,h-1,0,v-1)}return c(e,t,l,u)}scaleRows(t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let i=new Dr(this.rows,this.columns);for(let a=0;a<this.rows;a++){const o=this.getRow(a);o.length>0&&i8(o,{min:e,max:n,output:o}),i.setRow(a,o)}return i}scaleColumns(t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let i=new Dr(this.rows,this.columns);for(let a=0;a<this.columns;a++){const o=this.getColumn(a);o.length&&i8(o,{min:e,max:n,output:o}),i.setColumn(a,o)}return i}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let n=0;n<t;n++){let i=this.get(e,n),a=this.get(e,this.columns-1-n);this.set(e,n,a),this.set(e,this.columns-1-n,i)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let n=0;n<t;n++){let i=this.get(n,e),a=this.get(this.rows-1-n,e);this.set(n,e,a),this.set(this.rows-1-n,e,i)}return this}kroneckerProduct(t){t=Dr.checkMatrix(t);let e=this.rows,n=this.columns,i=t.rows,a=t.columns,o=new Dr(e*i,n*a);for(let s=0;s<e;s++)for(let l=0;l<n;l++)for(let u=0;u<i;u++)for(let c=0;c<a;c++)o.set(i*s+u,a*l+c,this.get(s,l)*t.get(u,c));return o}kroneckerSum(t){if(t=Dr.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,n=t.rows,i=this.kroneckerProduct(Dr.eye(n,n)),a=Dr.eye(e,e).kroneckerProduct(t);return i.add(a)}transpose(){let t=new Dr(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t=l8){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=l8){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,i){s8(this,t,e,n,i);let a=new Dr(e-t+1,i-n+1);for(let o=t;o<=e;o++)for(let s=n;s<=i;s++)a.set(o-t,s-n,this.get(o,s));return a}subMatrixRow(t,e,n){if(e===void 0&&(e=0),n===void 0&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let i=new Dr(t.length,n-e+1);for(let a=0;a<t.length;a++)for(let o=e;o<=n;o++){if(t[a]<0||t[a]>=this.rows)throw new RangeError(`Row index out of range: ${t[a]}`);i.set(a,o-e,this.get(t[a],o))}return i}subMatrixColumn(t,e,n){if(e===void 0&&(e=0),n===void 0&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let i=new Dr(n-e+1,t.length);for(let a=0;a<t.length;a++)for(let o=e;o<=n;o++){if(t[a]<0||t[a]>=this.columns)throw new RangeError(`Column index out of range: ${t[a]}`);i.set(o-e,a,this.get(o,t[a]))}return i}setSubMatrix(t,e,n){if(t=Dr.checkMatrix(t),t.isEmpty())return this;let i=e+t.rows-1,a=n+t.columns-1;s8(this,e,i,n,a);for(let o=0;o<t.rows;o++)for(let s=0;s<t.columns;s++)this.set(e+o,n+s,t.get(o,s));return this}selection(t,e){let n=qke(this,t,e),i=new Dr(t.length,e.length);for(let a=0;a<n.row.length;a++){let o=n.row[a];for(let s=0;s<n.column.length;s++){let l=n.column[s];i.set(a,s,this.get(o,l))}}return i}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let n=0;n<t;n++)e+=this.get(n,n);return e}clone(){let t=new Dr(this.rows,this.columns);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}sum(t){switch(t){case"row":return Qke(this);case"column":return Jke(this);case void 0:return eMe(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return tMe(this);case"column":return rMe(this);case void 0:return nMe(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const e=this.sum(t);switch(t){case"row":{for(let n=0;n<this.rows;n++)e[n]/=this.columns;return e}case"column":{for(let n=0;n<this.columns;n++)e[n]/=this.rows;return e}case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");const{unbiased:n=!0,mean:i=this.mean(t)}=e;if(typeof n!="boolean")throw new TypeError("unbiased must be a boolean");switch(t){case"row":{if(!Array.isArray(i))throw new TypeError("mean must be an array");return iMe(this,n,i)}case"column":{if(!Array.isArray(i))throw new TypeError("mean must be an array");return aMe(this,n,i)}case void 0:{if(typeof i!="number")throw new TypeError("mean must be a number");return oMe(this,n,i)}default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){typeof t=="object"&&(e=t,t=void 0);const n=this.variance(t,e);if(t===void 0)return Math.sqrt(n);for(let i=0;i<n.length;i++)n[i]=Math.sqrt(n[i]);return n}center(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");const{center:n=this.mean(t)}=e;switch(t){case"row":{if(!Array.isArray(n))throw new TypeError("center must be an array");return sMe(this,n),this}case"column":{if(!Array.isArray(n))throw new TypeError("center must be an array");return lMe(this,n),this}case void 0:{if(typeof n!="number")throw new TypeError("center must be a number");return uMe(this,n),this}default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");let n=e.scale;switch(t){case"row":{if(n===void 0)n=cMe(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return fMe(this,n),this}case"column":{if(n===void 0)n=dMe(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return hMe(this,n),this}case void 0:{if(n===void 0)n=vMe(this);else if(typeof n!="number")throw new TypeError("scale must be a number");return pMe(this,n),this}default:throw new Error(`invalid option: ${t}`)}}toString(t){return o8(this,t)}}Sn.prototype.klass="Matrix";typeof Symbol!="undefined"&&(Sn.prototype[Symbol.for("nodejs.util.inspect.custom")]=Wke);function l8(r,t){return r-t}Sn.random=Sn.rand;Sn.randomInt=Sn.randInt;Sn.diagonal=Sn.diag;Sn.prototype.diagonal=Sn.prototype.diag;Sn.identity=Sn.eye;Sn.prototype.negate=Sn.prototype.neg;Sn.prototype.tensorProduct=Sn.prototype.kroneckerProduct;class Dr extends Sn{constructor(t,e){super();if(Dr.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>=0)if(this.data=[],Number.isInteger(e)&&e>=0)for(let n=0;n<t;n++)this.data.push(new Float64Array(e));else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(t)){const n=t;if(t=n.length,e=t?n[0].length:0,typeof e!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let i=0;i<t;i++){if(n[i].length!==e)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(n[i]))}}else throw new TypeError("First argument must be a positive number or an array");this.rows=t,this.columns=e}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}removeRow(t){return ol(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return e===void 0&&(e=t,t=this.rows),ol(this,t,!0),e=Float64Array.from(Jv(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){sl(this,t);for(let e=0;e<this.rows;e++){const n=new Float64Array(this.columns-1);for(let i=0;i<t;i++)n[i]=this.data[e][i];for(let i=t+1;i<this.columns;i++)n[i-1]=this.data[e][i];this.data[e]=n}return this.columns-=1,this}addColumn(t,e){typeof e=="undefined"&&(e=t,t=this.columns),sl(this,t,!0),e=ep(this,e);for(let n=0;n<this.rows;n++){const i=new Float64Array(this.columns+1);let a=0;for(;a<t;a++)i[a]=this.data[n][a];for(i[a++]=e[n];a<this.columns+1;a++)i[a]=this.data[n][a-1];this.data[n]=i}return this.columns+=1,this}}Xke(Sn,Dr);class gMe extends Sn{constructor(t){super();this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}}function rp(r,t){let e=0;return Math.abs(r)>Math.abs(t)?(e=t/r,Math.abs(r)*Math.sqrt(1+e*e)):t!==0?(e=r/t,Math.abs(t)*Math.sqrt(1+e*e)):0}class u8{constructor(t,e={}){if(t=gMe.checkMatrix(t),t.isEmpty())throw new Error("Matrix must be non-empty");let n=t.rows,i=t.columns;const{computeLeftSingularVectors:a=!0,computeRightSingularVectors:o=!0,autoTranspose:s=!1}=e;let l=Boolean(a),u=Boolean(o),c=!1,f;if(n<i)if(!s)f=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{f=t.transpose(),n=f.rows,i=f.columns,c=!0;let E=l;l=u,u=E}else f=t.clone();let d=Math.min(n,i),h=Math.min(n+1,i),v=new Float64Array(h),p=new Dr(n,d),g=new Dr(i,i),m=new Float64Array(i),y=new Float64Array(n),b=new Float64Array(h);for(let E=0;E<h;E++)b[E]=E;let x=Math.min(n-1,i),w=Math.max(0,Math.min(i-2,n)),S=Math.max(x,w);for(let E=0;E<S;E++){if(E<x){v[E]=0;for(let k=E;k<n;k++)v[E]=rp(v[E],f.get(k,E));if(v[E]!==0){f.get(E,E)<0&&(v[E]=-v[E]);for(let k=E;k<n;k++)f.set(k,E,f.get(k,E)/v[E]);f.set(E,E,f.get(E,E)+1)}v[E]=-v[E]}for(let k=E+1;k<i;k++){if(E<x&&v[E]!==0){let I=0;for(let P=E;P<n;P++)I+=f.get(P,E)*f.get(P,k);I=-I/f.get(E,E);for(let P=E;P<n;P++)f.set(P,k,f.get(P,k)+I*f.get(P,E))}m[k]=f.get(E,k)}if(l&&E<x)for(let k=E;k<n;k++)p.set(k,E,f.get(k,E));if(E<w){m[E]=0;for(let k=E+1;k<i;k++)m[E]=rp(m[E],m[k]);if(m[E]!==0){m[E+1]<0&&(m[E]=0-m[E]);for(let k=E+1;k<i;k++)m[k]/=m[E];m[E+1]+=1}if(m[E]=-m[E],E+1<n&&m[E]!==0){for(let k=E+1;k<n;k++)y[k]=0;for(let k=E+1;k<n;k++)for(let I=E+1;I<i;I++)y[k]+=m[I]*f.get(k,I);for(let k=E+1;k<i;k++){let I=-m[k]/m[E+1];for(let P=E+1;P<n;P++)f.set(P,k,f.get(P,k)+I*y[P])}}if(u)for(let k=E+1;k<i;k++)g.set(k,E,m[k])}}let C=Math.min(i,n+1);if(x<i&&(v[x]=f.get(x,x)),n<C&&(v[C-1]=0),w+1<C&&(m[w]=f.get(w,C-1)),m[C-1]=0,l){for(let E=x;E<d;E++){for(let k=0;k<n;k++)p.set(k,E,0);p.set(E,E,1)}for(let E=x-1;E>=0;E--)if(v[E]!==0){for(let k=E+1;k<d;k++){let I=0;for(let P=E;P<n;P++)I+=p.get(P,E)*p.get(P,k);I=-I/p.get(E,E);for(let P=E;P<n;P++)p.set(P,k,p.get(P,k)+I*p.get(P,E))}for(let k=E;k<n;k++)p.set(k,E,-p.get(k,E));p.set(E,E,1+p.get(E,E));for(let k=0;k<E-1;k++)p.set(k,E,0)}else{for(let k=0;k<n;k++)p.set(k,E,0);p.set(E,E,1)}}if(u)for(let E=i-1;E>=0;E--){if(E<w&&m[E]!==0)for(let k=E+1;k<i;k++){let I=0;for(let P=E+1;P<i;P++)I+=g.get(P,E)*g.get(P,k);I=-I/g.get(E+1,E);for(let P=E+1;P<i;P++)g.set(P,k,g.get(P,k)+I*g.get(P,E))}for(let k=0;k<i;k++)g.set(k,E,0);g.set(E,E,1)}let _=C-1,T=Number.EPSILON;for(;C>0;){let E,k;for(E=C-2;E>=-1&&E!==-1;E--){const I=Number.MIN_VALUE+T*Math.abs(v[E]+Math.abs(v[E+1]));if(Math.abs(m[E])<=I||Number.isNaN(m[E])){m[E]=0;break}}if(E===C-2)k=4;else{let I;for(I=C-1;I>=E&&I!==E;I--){let P=(I!==C?Math.abs(m[I]):0)+(I!==E+1?Math.abs(m[I-1]):0);if(Math.abs(v[I])<=T*P){v[I]=0;break}}I===E?k=3:I===C-1?k=1:(k=2,E=I)}switch(E++,k){case 1:{let I=m[C-2];m[C-2]=0;for(let P=C-2;P>=E;P--){let F=rp(v[P],I),$=v[P]/F,R=I/F;if(v[P]=F,P!==E&&(I=-R*m[P-1],m[P-1]=$*m[P-1]),u)for(let L=0;L<i;L++)F=$*g.get(L,P)+R*g.get(L,C-1),g.set(L,C-1,-R*g.get(L,P)+$*g.get(L,C-1)),g.set(L,P,F)}break}case 2:{let I=m[E-1];m[E-1]=0;for(let P=E;P<C;P++){let F=rp(v[P],I),$=v[P]/F,R=I/F;if(v[P]=F,I=-R*m[P],m[P]=$*m[P],l)for(let L=0;L<n;L++)F=$*p.get(L,P)+R*p.get(L,E-1),p.set(L,E-1,-R*p.get(L,P)+$*p.get(L,E-1)),p.set(L,P,F)}break}case 3:{const I=Math.max(Math.abs(v[C-1]),Math.abs(v[C-2]),Math.abs(m[C-2]),Math.abs(v[E]),Math.abs(m[E])),P=v[C-1]/I,F=v[C-2]/I,$=m[C-2]/I,R=v[E]/I,L=m[E]/I,O=((F+P)*(F-P)+$*$)/2,B=P*$*(P*$);let U=0;(O!==0||B!==0)&&(O<0?U=0-Math.sqrt(O*O+B):U=Math.sqrt(O*O+B),U=B/(O+U));let W=(R+P)*(R-P)+U,X=R*L;for(let ie=E;ie<C-1;ie++){let q=rp(W,X);q===0&&(q=Number.MIN_VALUE);let j=W/q,fe=X/q;if(ie!==E&&(m[ie-1]=q),W=j*v[ie]+fe*m[ie],m[ie]=j*m[ie]-fe*v[ie],X=fe*v[ie+1],v[ie+1]=j*v[ie+1],u)for(let se=0;se<i;se++)q=j*g.get(se,ie)+fe*g.get(se,ie+1),g.set(se,ie+1,-fe*g.get(se,ie)+j*g.get(se,ie+1)),g.set(se,ie,q);if(q=rp(W,X),q===0&&(q=Number.MIN_VALUE),j=W/q,fe=X/q,v[ie]=q,W=j*m[ie]+fe*v[ie+1],v[ie+1]=-fe*m[ie]+j*v[ie+1],X=fe*m[ie+1],m[ie+1]=j*m[ie+1],l&&ie<n-1)for(let se=0;se<n;se++)q=j*p.get(se,ie)+fe*p.get(se,ie+1),p.set(se,ie+1,-fe*p.get(se,ie)+j*p.get(se,ie+1)),p.set(se,ie,q)}m[C-2]=W;break}case 4:{if(v[E]<=0&&(v[E]=v[E]<0?-v[E]:0,u))for(let I=0;I<=_;I++)g.set(I,E,-g.get(I,E));for(;E<_&&!(v[E]>=v[E+1]);){let I=v[E];if(v[E]=v[E+1],v[E+1]=I,u&&E<i-1)for(let P=0;P<i;P++)I=g.get(P,E+1),g.set(P,E+1,g.get(P,E)),g.set(P,E,I);if(l&&E<n-1)for(let P=0;P<n;P++)I=p.get(P,E+1),p.set(P,E+1,p.get(P,E)),p.set(P,E,I);E++}C--;break}}}if(c){let E=g;g=p,p=E}this.m=n,this.n=i,this.s=v,this.U=p,this.V=g}solve(t){let e=t,n=this.threshold,i=this.s.length,a=Dr.zeros(i,i);for(let d=0;d<i;d++)Math.abs(this.s[d])<=n?a.set(d,d,0):a.set(d,d,1/this.s[d]);let o=this.U,s=this.rightSingularVectors,l=s.mmul(a),u=s.rows,c=o.rows,f=Dr.zeros(u,c);for(let d=0;d<u;d++)for(let h=0;h<c;h++){let v=0;for(let p=0;p<i;p++)v+=l.get(d,p)*o.get(h,p);f.set(d,h,v)}return f.mmul(e)}solveForDiagonal(t){return this.solve(Dr.diag(t))}inverse(){let t=this.V,e=this.threshold,n=t.rows,i=t.columns,a=new Dr(n,this.s.length);for(let c=0;c<n;c++)for(let f=0;f<i;f++)Math.abs(this.s[f])>e&&a.set(c,f,t.get(c,f)/this.s[f]);let o=this.U,s=o.rows,l=o.columns,u=new Dr(n,s);for(let c=0;c<n;c++)for(let f=0;f<s;f++){let d=0;for(let h=0;h<l;h++)d+=a.get(c,h)*o.get(f,h);u.set(c,f,d)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s;for(let i=0,a=n.length;i<a;i++)n[i]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Dr.diag(this.s)}}class mMe{constructor(t){this.distances=t.distances,this.dimension=t.dimension||2,this.linkDistance=t.linkDistance}layout(){const t=this,{dimension:e,distances:n,linkDistance:i}=t;try{const a=Dr.mul(Dr.pow(n,2),-.5),o=a.mean("row"),s=a.mean("column"),l=a.mean();a.add(l).subRowVector(o).subColumnVector(s);const u=new u8(a),c=Dr.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(f=>Dr.mul([f],[c]).toJSON()[0].splice(0,e))}catch{const o=[];for(let s=0;s<n.length;s++){const l=Math.random()*i,u=Math.random()*i;o.push([l,u])}return o}}}const yMe=800;class bMe{constructor(t){this.disp=[],this.positions=t.positions,this.adjMatrix=t.adjMatrix,this.focusID=t.focusID,this.radii=t.radii,this.iterations=t.iterations||10,this.height=t.height||10,this.width=t.width||10,this.speed=t.speed||100,this.gravity=t.gravity||10,this.nodeSizeFunc=t.nodeSizeFunc,this.k=t.k||5,this.strictRadial=t.strictRadial,this.nodes=t.nodes}layout(){const t=this,e=t.positions,n=[],i=t.iterations,a=t.width/10;t.maxDisplace=a,t.disp=n;for(let o=0;o<i;o++)e.forEach((s,l)=>{n[l]={x:0,y:0}}),t.getRepulsion(),t.updatePositions();return e}getRepulsion(){const t=this,e=t.positions,n=t.nodes,i=t.disp,a=t.k,o=t.radii||[];e.forEach((s,l)=>{i[l]={x:0,y:0},e.forEach((u,c)=>{if(l===c||o[l]!==o[c])return;let f=s[0]-u[0],d=s[1]-u[1],h=Math.sqrt(f*f+d*d);if(h===0){h=1;const v=l>c?1:-1;f=.01*v,d=.01*v}if(h<t.nodeSizeFunc(n[l])/2+t.nodeSizeFunc(n[c])/2){const v=a*a/h;i[l].x+=f/h*v,i[l].y+=d/h*v}})})}updatePositions(){const t=this,e=t.positions,n=t.disp,i=t.speed,a=t.strictRadial,o=t.focusID,s=t.maxDisplace||t.width/10;a&&n.forEach((u,c)=>{const f=e[c][0]-e[o][0],d=e[c][1]-e[o][1],h=Math.sqrt(f*f+d*d);let v=d/h,p=-f/h;const g=Math.sqrt(u.x*u.x+u.y*u.y);let m=Math.acos((v*u.x+p*u.y)/g);m>Math.PI/2&&(m-=Math.PI/2,v*=-1,p*=-1);const y=Math.cos(m)*g;u.x=v*y,u.y=p*y});const l=t.radii;e.forEach((u,c)=>{if(c===o)return;const f=Math.sqrt(n[c].x*n[c].x+n[c].y*n[c].y);if(f>0&&c!==o){const d=Math.min(s*(i/yMe),f);if(u[0]+=n[c].x/f*d,u[1]+=n[c].y/f*d,a){let h=u[0]-e[o][0],v=u[1]-e[o][1];const p=Math.sqrt(h*h+v*v);h=h/p*l[c],v=v/p*l[c],u[0]=e[o][0]+h,u[1]=e[o][1]+v}}})}}function xMe(r){const t=r.length,e=r[0].length,n=[];for(let i=0;i<t;i++){const a=[];for(let o=0;o<e;o++)r[i][o]!==0?a.push(1/(r[i][o]*r[i][o])):a.push(0);n.push(a)}return n}function wMe(r,t){let e=-1;return r.forEach((n,i)=>{n.id===t&&(e=i)}),e}function c8(r,t){return Math.sqrt((r[0]-t[0])*(r[0]-t[0])+(r[1]-t[1])*(r[1]-t[1]))}class f8 extends _o{constructor(t){super();this.maxIteration=1e3,this.focusNode=null,this.unitRadius=null,this.linkDistance=50,this.preventOverlap=!1,this.strictRadial=!0,this.maxPreventOverlapIteration=200,this.sortStrength=10,this.nodes=[],this.edges=[],this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}execute(){const t=this,e=t.nodes,n=t.edges||[];if(!e||e.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const i=t.center;if(e.length===1){e[0].x=i[0],e[0].y=i[1],t.onLayoutEnd&&t.onLayoutEnd();return}const a=t.linkDistance;let o=null;if(cy(t.focusNode)){let k=!1;for(let I=0;I<e.length;I++)e[I].id===t.focusNode&&(o=e[I],t.focusNode=o,k=!0,I=e.length);k||(o=null)}else o=t.focusNode;o||(o=e[0],t.focusNode=o);const s=wMe(e,o.id);t.focusIndex=s;const l=h4({nodes:e,edges:n},!1),u=d4(l),c=t.maxToFocus(u,s);t.handleInfinity(u,s,c+1),t.distances=u;const f=u[s],d=t.width||500,h=t.height||500;let v=d-i[0]>i[0]?i[0]:d-i[0],p=h-i[1]>i[1]?i[1]:h-i[1];v===0&&(v=d/2),p===0&&(p=h/2);const g=p>v?v:p,m=Math.max(...f),y=[];f.forEach((k,I)=>{t.unitRadius||(t.unitRadius=g/m),y[I]=k*t.unitRadius}),t.radii=y;const b=t.eIdealDisMatrix();t.eIdealDistances=b;const x=xMe(b);t.weights=x;let S=new mMe({linkDistance:a,distances:b}).layout();S.forEach(k=>{hk(k[0])&&(k[0]=Math.random()*a),hk(k[1])&&(k[1]=Math.random()*a)}),t.positions=S,S.forEach((k,I)=>{e[I].x=k[0]+i[0],e[I].y=k[1]+i[1]}),S.forEach(k=>{k[0]-=S[s][0],k[1]-=S[s][1]}),t.run();const C=t.preventOverlap,_=t.nodeSize;let T;const E=t.strictRadial;if(C){const k=t.nodeSpacing;let I;Qt(k)?I=()=>k:Nc(k)?I=k:I=()=>0,_?Ka(_)?T=$=>(_[0]>_[1]?_[0]:_[1])+I($):T=$=>_+I($):T=$=>$.size?Ka($.size)?($.size[0]>$.size[1]?$.size[0]:$.size[1])+I($):Bl($.size)?($.size.width>$.size.height?$.size.width:$.size.height)+I($):$.size+I($):10+I($);const P={nodes:e,nodeSizeFunc:T,adjMatrix:l,positions:S,radii:y,height:h,width:d,strictRadial:E,focusID:s,iterations:t.maxPreventOverlapIteration||200,k:S.length/4.5};S=new bMe(P).layout()}return S.forEach((k,I)=>{e[I].x=k[0]+i[0],e[I].y=k[1]+i[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}run(){const t=this,e=t.maxIteration,n=t.positions||[],i=t.weights||[],a=t.eIdealDistances||[],o=t.radii||[];for(let s=0;s<=e;s++){const l=s/e;t.oneIteration(l,n,o,a,i)}}oneIteration(t,e,n,i,a){const o=this,s=1-t,l=o.focusIndex;e.forEach((u,c)=>{const f=c8(u,[0,0]),d=f===0?0:1/f;if(c===l)return;let h=0,v=0,p=0;e.forEach((m,y)=>{if(c===y)return;const b=c8(u,m),x=b===0?0:1/b,w=i[y][c];p+=a[c][y],h+=a[c][y]*(m[0]+w*(u[0]-m[0])*x),v+=a[c][y]*(m[1]+w*(u[1]-m[1])*x)});const g=n[c]===0?0:1/n[c];p*=s,p+=t*g*g,h*=s,h+=t*g*u[0]*d,u[0]=h/p,v*=s,v+=t*g*u[1]*d,u[1]=v/p})}eIdealDisMatrix(){const t=this,e=t.nodes;if(!e)return[];const n=t.distances,i=t.linkDistance,a=t.radii||[],o=t.unitRadius||50,s=[];return n&&n.forEach((l,u)=>{const c=[];l.forEach((f,d)=>{if(u===d)c.push(0);else if(a[u]===a[d])if(t.sortBy==="data")c.push(f*(Math.abs(u-d)*t.sortStrength)/(a[u]/o));else if(t.sortBy){let h=e[u][t.sortBy]||0,v=e[d][t.sortBy]||0;cy(h)&&(h=h.charCodeAt(0)),cy(v)&&(v=v.charCodeAt(0)),c.push(f*(Math.abs(h-v)*t.sortStrength)/(a[u]/o))}else c.push(f*i/(a[u]/o));else{const h=(i+o)/2;c.push(f*h)}}),s.push(c)}),s}handleInfinity(t,e,n){const i=t.length;for(let a=0;a<i;a++)if(t[e][a]===1/0){t[e][a]=n,t[a][e]=n;for(let o=0;o<i;o++)t[a][o]!==1/0&&t[e][o]===1/0&&(t[e][o]=n+t[a][o],t[o][e]=n+t[a][o])}for(let a=0;a<i;a++)if(a!==e){for(let o=0;o<i;o++)if(t[a][o]===1/0){let s=Math.abs(t[e][a]-t[e][o]);s=s===0?1:s,t[a][o]=s}}}maxToFocus(t,e){let n=0;for(let i=0;i<t[e].length;i++)t[e][i]!==1/0&&(n=t[e][i]>n?t[e][i]:n);return n}getType(){return"radial"}}class d8 extends _o{constructor(t){super();this.nodeSize=30,this.minNodeSpacing=10,this.preventOverlap=!1,this.equidistant=!1,this.startAngle=3/2*Math.PI,this.clockwise=!0,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}execute(){const t=this,e=t.nodes,n=t.edges,i=e.length;if(i===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const a=t.center;if(i===1){e[0].x=a[0],e[0].y=a[1],t.onLayoutEnd&&t.onLayoutEnd();return}const o=[];let s;Ka(t.nodeSize)?s=Math.max(t.nodeSize[0],t.nodeSize[1]):s=t.nodeSize,e.forEach(v=>{o.push(v);let p=s;Ka(v.size)?p=Math.max(v.size[0],v.size[1]):Qt(v.size)?p=v.size:Bl(v.size)&&(p=Math.max(v.size.width,v.size.height)),s=Math.max(s,p)}),t.clockwise=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise;const l={},u={};if(o.forEach((v,p)=>{l[v.id]=v,u[v.id]=p}),(t.sortBy==="degree"||!cy(t.sortBy)||o[0][t.sortBy]===void 0)&&(t.sortBy="degree",!Qt(e[0].degree))){const v=fy(e.length,u,n);o.forEach((p,g)=>{p.degree=v[g]})}o.sort((v,p)=>p[t.sortBy]-v[t.sortBy]),t.maxValueNode=o[0],t.maxLevelDiff=t.maxLevelDiff||t.maxValueNode[t.sortBy]/4;const c=[[]];let f=c[0];o.forEach(v=>{if(f.length>0){const p=Math.abs(f[0][t.sortBy]-v[t.sortBy]);t.maxLevelDiff&&p>=t.maxLevelDiff&&(f=[],c.push(f))}f.push(v)});let d=s+t.minNodeSpacing;if(!t.preventOverlap){const v=c.length>0&&c[0].length>1,g=(Math.min(t.width,t.height)/2-d)/(c.length+(v?1:0));d=Math.min(d,g)}let h=0;if(c.forEach(v=>{let p=t.sweep;p===void 0&&(p=2*Math.PI-2*Math.PI/v.length);const g=v.dTheta=p/Math.max(1,v.length-1);if(v.length>1&&t.preventOverlap){const m=Math.cos(g)-Math.cos(0),y=Math.sin(g)-Math.sin(0),b=Math.sqrt(d*d/(m*m+y*y));h=Math.max(b,h)}v.r=h,h+=d}),t.equidistant){let v=0,p=0;for(let g=0;g<c.length;g++){const y=c[g].r-p;v=Math.max(v,y)}p=0,c.forEach((g,m)=>{m===0&&(p=g.r),g.r=p,p+=v})}return c.forEach(v=>{const p=v.dTheta,g=v.r;v.forEach((m,y)=>{const b=t.startAngle+(t.clockwise?1:-1)*p*y;m.x=a[0]+g*Math.cos(b),m.y=a[1]+g*Math.sin(b)})}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}getType(){return"concentric"}}class h8 extends _o{constructor(t){super();this.center=[0,0],this.linkDistance=50,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],linkDistance:50}}execute(){const t=this,{nodes:e,edges:n=[]}=t,i=t.center;if(!e||e.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(e.length===1){e[0].x=i[0],e[0].y=i[1],t.onLayoutEnd&&t.onLayoutEnd();return}const a=t.linkDistance,o=h4({nodes:e,edges:n},!1),s=d4(o);t.handleInfinity(s);const l=Sme(s,a);t.scaledDistances=l;const u=t.runMDS();return t.positions=u,u.forEach((c,f)=>{e[f].x=c[0]+i[0],e[f].y=c[1]+i[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}runMDS(){const t=this,e=2,n=t.scaledDistances,i=Dr.mul(Dr.pow(n,2),-.5),a=i.mean("row"),o=i.mean("column"),s=i.mean();i.add(s).subRowVector(a).subColumnVector(o);const l=new u8(i),u=Dr.sqrt(l.diagonalMatrix).diagonal();return l.leftSingularVectors.toJSON().map(c=>Dr.mul([c],[u]).toJSON()[0].splice(0,e))}handleInfinity(t){let e=-999999;t.forEach(n=>{n.forEach(i=>{i!==1/0&&e<i&&(e=i)})}),t.forEach((n,i)=>{n.forEach((a,o)=>{a===1/0&&(t[i][o]=e)})})}getType(){return"mds"}}const SMe=800;class v8 extends _o{constructor(t){super();this.maxIteration=1e3,this.workerEnabled=!1,this.gravity=10,this.speed=5,this.clustering=!1,this.clusterGravity=10,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.onLayoutEnd=()=>{},this.tick=()=>{},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){var t,e;const n=this,i=n.nodes;if(n.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(n.timeInterval),!i||i.length===0){(t=n.onLayoutEnd)===null||t===void 0||t.call(n);return}!n.width&&typeof window!="undefined"&&(n.width=window.innerWidth),!n.height&&typeof window!="undefined"&&(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);const a=n.center;if(i.length===1){i[0].x=a[0],i[0].y=a[1],(e=n.onLayoutEnd)===null||e===void 0||e.call(n);return}const o={},s={};return i.forEach((l,u)=>{Qt(l.x)||(l.x=Math.random()*this.width),Qt(l.y)||(l.y=Math.random()*this.height),o[l.id]=l,s[l.id]=u}),n.nodeMap=o,n.nodeIdxMap=s,n.run()}run(){var t;const e=this,n=e.nodes;if(!n)return;const{edges:i,maxIteration:a,workerEnabled:o}=e,s=e.clustering,l={};if(s){n.forEach(u=>{if(l[u.cluster]===void 0){const f={name:u.cluster,cx:0,cy:0,count:0};l[u.cluster]=f}const c=l[u.cluster];Qt(u.x)&&(c.cx+=u.x),Qt(u.y)&&(c.cy+=u.y),c.count++});for(const u in l)l[u].cx/=l[u].count,l[u].cy/=l[u].count}if(o){for(let u=0;u<a;u++)e.runOneStep(l);(t=e.onLayoutEnd)===null||t===void 0||t.call(e)}else{if(typeof window=="undefined")return;let u=0;this.timeInterval=window.setInterval(()=>{var c;e.runOneStep(l),u++,u>=a&&((c=e.onLayoutEnd)===null||c===void 0||c.call(e),window.clearInterval(e.timeInterval))},0)}return{nodes:n,edges:i}}runOneStep(t){var e;const n=this,i=n.nodes;if(!i)return;const{edges:a,center:o,gravity:s,speed:l,clustering:u}=n,c=n.height*n.width,f=Math.sqrt(c)/10,d=c/(i.length+1),h=Math.sqrt(d),v=[];if(i.forEach((p,g)=>{v[g]={x:0,y:0}}),n.applyCalculate(i,a,v,h,d),u){const p=n.clusterGravity||s;i.forEach((g,m)=>{if(!Qt(g.x)||!Qt(g.y))return;const y=t[g.cluster],b=Math.sqrt((g.x-y.cx)*(g.x-y.cx)+(g.y-y.cy)*(g.y-y.cy)),x=h*p;v[m].x-=x*(g.x-y.cx)/b,v[m].y-=x*(g.y-y.cy)/b});for(const g in t)t[g].cx=0,t[g].cy=0,t[g].count=0;i.forEach(g=>{const m=t[g.cluster];Qt(g.x)&&(m.cx+=g.x),Qt(g.y)&&(m.cy+=g.y),m.count++});for(const g in t)t[g].cx/=t[g].count,t[g].cy/=t[g].count}i.forEach((p,g)=>{if(!Qt(p.x)||!Qt(p.y))return;const m=.01*h*s;v[g].x-=m*(p.x-o[0]),v[g].y-=m*(p.y-o[1])}),i.forEach((p,g)=>{if(Qt(p.fx)&&Qt(p.fy)){p.x=p.fx,p.y=p.fy;return}if(!Qt(p.x)||!Qt(p.y))return;const m=Math.sqrt(v[g].x*v[g].x+v[g].y*v[g].y);if(m>0){const y=Math.min(f*(l/SMe),m);p.x+=v[g].x/m*y,p.y+=v[g].y/m*y}}),(e=n.tick)===null||e===void 0||e.call(n)}applyCalculate(t,e,n,i,a){const o=this;o.calRepulsive(t,n,a),e&&o.calAttractive(e,n,i)}calRepulsive(t,e,n){t.forEach((i,a)=>{e[a]={x:0,y:0},t.forEach((o,s)=>{if(a===s||!Qt(i.x)||!Qt(o.x)||!Qt(i.y)||!Qt(o.y))return;let l=i.x-o.x,u=i.y-o.y,c=l*l+u*u;if(c===0){c=1;const d=a>s?1:-1;l=.01*d,u=.01*d}const f=n/c;e[a].x+=l*f,e[a].y+=u*f})})}calAttractive(t,e,n){t.forEach(i=>{const a=An(i,"source"),o=An(i,"target");if(!a||!o)return;const s=this.nodeIdxMap[a],l=this.nodeIdxMap[o];if(s===l)return;const u=this.nodeMap[a],c=this.nodeMap[o];if(!Qt(c.x)||!Qt(u.x)||!Qt(c.y)||!Qt(u.y))return;const f=c.x-u.x,d=c.y-u.y,h=Math.sqrt(f*f+d*d),v=h*h/n;e[l].x-=f/h*v,e[l].y-=d/h*v,e[s].x+=f/h*v,e[s].y+=d/h*v})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0}getType(){return"fruchterman"}}function mr(r,t,e,n){!e||Object.defineProperty(r,t,{enumerable:e.enumerable,configurable:e.configurable,writable:e.writable,value:e.initializer?e.initializer.call(n):void 0})}function dr(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function p8(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function _r(r,t,e){return t&&p8(r.prototype,t),e&&p8(r,e),r}function yr(r,t,e,n,i){var a={};return Object.keys(n).forEach(function(o){a[o]=n[o]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=e.slice().reverse().reduce(function(o,s){return s(r,t,o)||o},a),i&&a.initializer!==void 0&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),a.initializer===void 0&&(Object.defineProperty(r,t,a),a=null),a}/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var g8;(function(r){(function(t){var e=typeof Lc=="object"?Lc:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),n=i(r);typeof e.Reflect=="undefined"?e.Reflect=r:n=i(e.Reflect,n),t(n);function i(a,o){return function(s,l){typeof a[s]!="function"&&Object.defineProperty(a,s,{configurable:!0,writable:!0,value:l}),o&&o(s,l)}}})(function(t){var e=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",i=n&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",a=n&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",o=typeof Object.create=="function",s={__proto__:[]}instanceof Array,l=!o&&!s,u={create:o?function(){return H(Object.create(null))}:s?function(){return H({__proto__:null})}:function(){return H({})},has:l?function(Y,K){return e.call(Y,K)}:function(Y,K){return K in Y},get:l?function(Y,K){return e.call(Y,K)?Y[K]:void 0}:function(Y,K){return Y[K]}},c=Object.getPrototypeOf(Function),f=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",d=!f&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:We(),h=!f&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Le(),v=!f&&typeof WeakMap=="function"?WeakMap:$e(),p=new v;function g(Y,K,ee,J){if(W(ee)){if(!Me(Y))throw new TypeError;if(!De(K))throw new TypeError;return E(Y,K)}else{if(!Me(Y))throw new TypeError;if(!q(K))throw new TypeError;if(!q(J)&&!W(J)&&!X(J))throw new TypeError;return X(J)&&(J=void 0),ee=_e(ee),k(Y,K,ee,J)}}t("decorate",g);function m(Y,K){function ee(J,ge){if(!q(J))throw new TypeError;if(!W(ge)&&!D(ge))throw new TypeError;L(Y,K,J,ge)}return ee}t("metadata",m);function y(Y,K,ee,J){if(!q(ee))throw new TypeError;return W(J)||(J=_e(J)),L(Y,K,ee,J)}t("defineMetadata",y);function b(Y,K,ee){if(!q(K))throw new TypeError;return W(ee)||(ee=_e(ee)),P(Y,K,ee)}t("hasMetadata",b);function x(Y,K,ee){if(!q(K))throw new TypeError;return W(ee)||(ee=_e(ee)),F(Y,K,ee)}t("hasOwnMetadata",x);function w(Y,K,ee){if(!q(K))throw new TypeError;return W(ee)||(ee=_e(ee)),$(Y,K,ee)}t("getMetadata",w);function S(Y,K,ee){if(!q(K))throw new TypeError;return W(ee)||(ee=_e(ee)),R(Y,K,ee)}t("getOwnMetadata",S);function C(Y,K){if(!q(Y))throw new TypeError;return W(K)||(K=_e(K)),O(Y,K)}t("getMetadataKeys",C);function _(Y,K){if(!q(Y))throw new TypeError;return W(K)||(K=_e(K)),B(Y,K)}t("getOwnMetadataKeys",_);function T(Y,K,ee){if(!q(K))throw new TypeError;W(ee)||(ee=_e(ee));var J=I(K,ee,!1);if(W(J)||!J.delete(Y))return!1;if(J.size>0)return!0;var ge=p.get(K);return ge.delete(ee),ge.size>0||p.delete(K),!0}t("deleteMetadata",T);function E(Y,K){for(var ee=Y.length-1;ee>=0;--ee){var J=Y[ee],ge=J(K);if(!W(ge)&&!X(ge)){if(!De(ge))throw new TypeError;K=ge}}return K}function k(Y,K,ee,J){for(var ge=Y.length-1;ge>=0;--ge){var Ve=Y[ge],Ge=Ve(K,ee,J);if(!W(Ge)&&!X(Ge)){if(!q(Ge))throw new TypeError;J=Ge}}return J}function I(Y,K,ee){var J=p.get(Y);if(W(J)){if(!ee)return;J=new d,p.set(Y,J)}var ge=J.get(K);if(W(ge)){if(!ee)return;ge=new d,J.set(K,ge)}return ge}function P(Y,K,ee){var J=F(Y,K,ee);if(J)return!0;var ge=Je(K);return X(ge)?!1:P(Y,ge,ee)}function F(Y,K,ee){var J=I(K,ee,!1);return W(J)?!1:se(J.has(Y))}function $(Y,K,ee){var J=F(Y,K,ee);if(J)return R(Y,K,ee);var ge=Je(K);if(!X(ge))return $(Y,ge,ee)}function R(Y,K,ee){var J=I(K,ee,!1);if(!W(J))return J.get(Y)}function L(Y,K,ee,J){var ge=I(ee,J,!0);ge.set(Y,K)}function O(Y,K){var ee=B(Y,K),J=Je(Y);if(J===null)return ee;var ge=O(J,K);if(ge.length<=0)return ee;if(ee.length<=0)return ge;for(var Ve=new h,Ge=[],rt=0,Se=ee;rt<Se.length;rt++){var ye=Se[rt],Re=Ve.has(ye);Re||(Ve.add(ye),Ge.push(ye))}for(var St=0,kt=ge;St<kt.length;St++){var ye=kt[St],Re=Ve.has(ye);Re||(Ve.add(ye),Ge.push(ye))}return Ge}function B(Y,K){var ee=[],J=I(Y,K,!1);if(W(J))return ee;for(var ge=J.keys(),Ve=V(ge),Ge=0;;){var rt=re(Ve);if(!rt)return ee.length=Ge,ee;var Se=he(rt);try{ee[Ge]=Se}catch(ye){try{pe(Ve)}finally{throw ye}}Ge++}}function U(Y){if(Y===null)return 1;switch(typeof Y){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Y===null?1:6;default:return 6}}function W(Y){return Y===void 0}function X(Y){return Y===null}function ie(Y){return typeof Y=="symbol"}function q(Y){return typeof Y=="object"?Y!==null:typeof Y=="function"}function j(Y,K){switch(U(Y)){case 0:return Y;case 1:return Y;case 2:return Y;case 3:return Y;case 4:return Y;case 5:return Y}var ee=K===3?"string":K===5?"number":"default",J=z(Y,i);if(J!==void 0){var ge=J.call(Y,ee);if(q(ge))throw new TypeError;return ge}return fe(Y,ee==="default"?"number":ee)}function fe(Y,K){if(K==="string"){var ee=Y.toString;if(Ye(ee)){var J=ee.call(Y);if(!q(J))return J}var ge=Y.valueOf;if(Ye(ge)){var J=ge.call(Y);if(!q(J))return J}}else{var ge=Y.valueOf;if(Ye(ge)){var J=ge.call(Y);if(!q(J))return J}var Ve=Y.toString;if(Ye(Ve)){var J=Ve.call(Y);if(!q(J))return J}}throw new TypeError}function se(Y){return!!Y}function ce(Y){return""+Y}function _e(Y){var K=j(Y,3);return ie(K)?K:ce(K)}function Me(Y){return Array.isArray?Array.isArray(Y):Y instanceof Object?Y instanceof Array:Object.prototype.toString.call(Y)==="[object Array]"}function Ye(Y){return typeof Y=="function"}function De(Y){return typeof Y=="function"}function D(Y){switch(U(Y)){case 3:return!0;case 4:return!0;default:return!1}}function z(Y,K){var ee=Y[K];if(ee!=null){if(!Ye(ee))throw new TypeError;return ee}}function V(Y){var K=z(Y,a);if(!Ye(K))throw new TypeError;var ee=K.call(Y);if(!q(ee))throw new TypeError;return ee}function he(Y){return Y.value}function re(Y){var K=Y.next();return K.done?!1:K}function pe(Y){var K=Y.return;K&&K.call(Y)}function Je(Y){var K=Object.getPrototypeOf(Y);if(typeof Y!="function"||Y===c||K!==c)return K;var ee=Y.prototype,J=ee&&Object.getPrototypeOf(ee);if(J==null||J===Object.prototype)return K;var ge=J.constructor;return typeof ge!="function"||ge===Y?K:ge}function We(){var Y={},K=[],ee=function(){function Ge(rt,Se,ye){this._index=0,this._keys=rt,this._values=Se,this._selector=ye}return Ge.prototype["@@iterator"]=function(){return this},Ge.prototype[a]=function(){return this},Ge.prototype.next=function(){var rt=this._index;if(rt>=0&&rt<this._keys.length){var Se=this._selector(this._keys[rt],this._values[rt]);return rt+1>=this._keys.length?(this._index=-1,this._keys=K,this._values=K):this._index++,{value:Se,done:!1}}return{value:void 0,done:!0}},Ge.prototype.throw=function(rt){throw this._index>=0&&(this._index=-1,this._keys=K,this._values=K),rt},Ge.prototype.return=function(rt){return this._index>=0&&(this._index=-1,this._keys=K,this._values=K),{value:rt,done:!0}},Ge}();return function(){function Ge(){this._keys=[],this._values=[],this._cacheKey=Y,this._cacheIndex=-2}return Object.defineProperty(Ge.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Ge.prototype.has=function(rt){return this._find(rt,!1)>=0},Ge.prototype.get=function(rt){var Se=this._find(rt,!1);return Se>=0?this._values[Se]:void 0},Ge.prototype.set=function(rt,Se){var ye=this._find(rt,!0);return this._values[ye]=Se,this},Ge.prototype.delete=function(rt){var Se=this._find(rt,!1);if(Se>=0){for(var ye=this._keys.length,Re=Se+1;Re<ye;Re++)this._keys[Re-1]=this._keys[Re],this._values[Re-1]=this._values[Re];return this._keys.length--,this._values.length--,rt===this._cacheKey&&(this._cacheKey=Y,this._cacheIndex=-2),!0}return!1},Ge.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Y,this._cacheIndex=-2},Ge.prototype.keys=function(){return new ee(this._keys,this._values,J)},Ge.prototype.values=function(){return new ee(this._keys,this._values,ge)},Ge.prototype.entries=function(){return new ee(this._keys,this._values,Ve)},Ge.prototype["@@iterator"]=function(){return this.entries()},Ge.prototype[a]=function(){return this.entries()},Ge.prototype._find=function(rt,Se){return this._cacheKey!==rt&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=rt)),this._cacheIndex<0&&Se&&(this._cacheIndex=this._keys.length,this._keys.push(rt),this._values.push(void 0)),this._cacheIndex},Ge}();function J(Ge,rt){return Ge}function ge(Ge,rt){return rt}function Ve(Ge,rt){return[Ge,rt]}}function Le(){return function(){function Y(){this._map=new d}return Object.defineProperty(Y.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Y.prototype.has=function(K){return this._map.has(K)},Y.prototype.add=function(K){return this._map.set(K,K),this},Y.prototype.delete=function(K){return this._map.delete(K)},Y.prototype.clear=function(){this._map.clear()},Y.prototype.keys=function(){return this._map.keys()},Y.prototype.values=function(){return this._map.values()},Y.prototype.entries=function(){return this._map.entries()},Y.prototype["@@iterator"]=function(){return this.keys()},Y.prototype[a]=function(){return this.keys()},Y}()}function $e(){var Y=16,K=u.create(),ee=J();return function(){function Se(){this._key=J()}return Se.prototype.has=function(ye){var Re=ge(ye,!1);return Re!==void 0?u.has(Re,this._key):!1},Se.prototype.get=function(ye){var Re=ge(ye,!1);return Re!==void 0?u.get(Re,this._key):void 0},Se.prototype.set=function(ye,Re){var St=ge(ye,!0);return St[this._key]=Re,this},Se.prototype.delete=function(ye){var Re=ge(ye,!1);return Re!==void 0?delete Re[this._key]:!1},Se.prototype.clear=function(){this._key=J()},Se}();function J(){var Se;do Se="@@WeakMap@@"+rt();while(u.has(K,Se));return K[Se]=!0,Se}function ge(Se,ye){if(!e.call(Se,ee)){if(!ye)return;Object.defineProperty(Se,ee,{value:u.create()})}return Se[ee]}function Ve(Se,ye){for(var Re=0;Re<ye;++Re)Se[Re]=Math.random()*255|0;return Se}function Ge(Se){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(Se)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(Se)):Ve(new Uint8Array(Se),Se):Ve(new Array(Se),Se)}function rt(){var Se=Ge(Y);Se[6]=Se[6]&79|64,Se[8]=Se[8]&191|128;for(var ye="",Re=0;Re<Y;++Re){var St=Se[Re];(Re===4||Re===6||Re===8)&&(ye+="-"),St<16&&(ye+="0"),ye+=St.toString(16).toLowerCase()}return ye}}function H(Y){return Y.__=void 0,delete Y.__,Y}})})(g8||(g8={}));var CMe=$r(function(r){var t=function(e){var n=Object.prototype,i=n.hasOwnProperty,a,o=typeof Symbol=="function"?Symbol:{},s=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(O,B,U){return Object.defineProperty(O,B,{value:U,enumerable:!0,configurable:!0,writable:!0}),O[B]}try{c({},"")}catch{c=function(B,U,W){return B[U]=W}}function f(O,B,U,W){var X=B&&B.prototype instanceof y?B:y,ie=Object.create(X.prototype),q=new $(W||[]);return ie._invoke=k(O,U,q),ie}e.wrap=f;function d(O,B,U){try{return{type:"normal",arg:O.call(B,U)}}catch(W){return{type:"throw",arg:W}}}var h="suspendedStart",v="suspendedYield",p="executing",g="completed",m={};function y(){}function b(){}function x(){}var w={};c(w,s,function(){return this});var S=Object.getPrototypeOf,C=S&&S(S(R([])));C&&C!==n&&i.call(C,s)&&(w=C);var _=x.prototype=y.prototype=Object.create(w);b.prototype=x,c(_,"constructor",x),c(x,"constructor",b),b.displayName=c(x,u,"GeneratorFunction");function T(O){["next","throw","return"].forEach(function(B){c(O,B,function(U){return this._invoke(B,U)})})}e.isGeneratorFunction=function(O){var B=typeof O=="function"&&O.constructor;return B?B===b||(B.displayName||B.name)==="GeneratorFunction":!1},e.mark=function(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,x):(O.__proto__=x,c(O,u,"GeneratorFunction")),O.prototype=Object.create(_),O},e.awrap=function(O){return{__await:O}};function E(O,B){function U(ie,q,j,fe){var se=d(O[ie],O,q);if(se.type==="throw")fe(se.arg);else{var ce=se.arg,_e=ce.value;return _e&&typeof _e=="object"&&i.call(_e,"__await")?B.resolve(_e.__await).then(function(Me){U("next",Me,j,fe)},function(Me){U("throw",Me,j,fe)}):B.resolve(_e).then(function(Me){ce.value=Me,j(ce)},function(Me){return U("throw",Me,j,fe)})}}var W;function X(ie,q){function j(){return new B(function(fe,se){U(ie,q,fe,se)})}return W=W?W.then(j,j):j()}this._invoke=X}T(E.prototype),c(E.prototype,l,function(){return this}),e.AsyncIterator=E,e.async=function(O,B,U,W,X){X===void 0&&(X=Promise);var ie=new E(f(O,B,U,W),X);return e.isGeneratorFunction(B)?ie:ie.next().then(function(q){return q.done?q.value:ie.next()})};function k(O,B,U){var W=h;return function(ie,q){if(W===p)throw new Error("Generator is already running");if(W===g){if(ie==="throw")throw q;return L()}for(U.method=ie,U.arg=q;;){var j=U.delegate;if(j){var fe=I(j,U);if(fe){if(fe===m)continue;return fe}}if(U.method==="next")U.sent=U._sent=U.arg;else if(U.method==="throw"){if(W===h)throw W=g,U.arg;U.dispatchException(U.arg)}else U.method==="return"&&U.abrupt("return",U.arg);W=p;var se=d(O,B,U);if(se.type==="normal"){if(W=U.done?g:v,se.arg===m)continue;return{value:se.arg,done:U.done}}else se.type==="throw"&&(W=g,U.method="throw",U.arg=se.arg)}}}function I(O,B){var U=O.iterator[B.method];if(U===a){if(B.delegate=null,B.method==="throw"){if(O.iterator.return&&(B.method="return",B.arg=a,I(O,B),B.method==="throw"))return m;B.method="throw",B.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var W=d(U,O.iterator,B.arg);if(W.type==="throw")return B.method="throw",B.arg=W.arg,B.delegate=null,m;var X=W.arg;if(!X)return B.method="throw",B.arg=new TypeError("iterator result is not an object"),B.delegate=null,m;if(X.done)B[O.resultName]=X.value,B.next=O.nextLoc,B.method!=="return"&&(B.method="next",B.arg=a);else return X;return B.delegate=null,m}T(_),c(_,u,"Generator"),c(_,s,function(){return this}),c(_,"toString",function(){return"[object Generator]"});function P(O){var B={tryLoc:O[0]};1 in O&&(B.catchLoc=O[1]),2 in O&&(B.finallyLoc=O[2],B.afterLoc=O[3]),this.tryEntries.push(B)}function F(O){var B=O.completion||{};B.type="normal",delete B.arg,O.completion=B}function $(O){this.tryEntries=[{tryLoc:"root"}],O.forEach(P,this),this.reset(!0)}e.keys=function(O){var B=[];for(var U in O)B.push(U);return B.reverse(),function W(){for(;B.length;){var X=B.pop();if(X in O)return W.value=X,W.done=!1,W}return W.done=!0,W}};function R(O){if(O){var B=O[s];if(B)return B.call(O);if(typeof O.next=="function")return O;if(!isNaN(O.length)){var U=-1,W=function X(){for(;++U<O.length;)if(i.call(O,U))return X.value=O[U],X.done=!1,X;return X.value=a,X.done=!0,X};return W.next=W}}return{next:L}}e.values=R;function L(){return{value:a,done:!0}}return $.prototype={constructor:$,reset:function(O){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(F),!O)for(var B in this)B.charAt(0)==="t"&&i.call(this,B)&&!isNaN(+B.slice(1))&&(this[B]=a)},stop:function(){this.done=!0;var O=this.tryEntries[0],B=O.completion;if(B.type==="throw")throw B.arg;return this.rval},dispatchException:function(O){if(this.done)throw O;var B=this;function U(fe,se){return ie.type="throw",ie.arg=O,B.next=fe,se&&(B.method="next",B.arg=a),!!se}for(var W=this.tryEntries.length-1;W>=0;--W){var X=this.tryEntries[W],ie=X.completion;if(X.tryLoc==="root")return U("end");if(X.tryLoc<=this.prev){var q=i.call(X,"catchLoc"),j=i.call(X,"finallyLoc");if(q&&j){if(this.prev<X.catchLoc)return U(X.catchLoc,!0);if(this.prev<X.finallyLoc)return U(X.finallyLoc)}else if(q){if(this.prev<X.catchLoc)return U(X.catchLoc,!0)}else if(j){if(this.prev<X.finallyLoc)return U(X.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(O,B){for(var U=this.tryEntries.length-1;U>=0;--U){var W=this.tryEntries[U];if(W.tryLoc<=this.prev&&i.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var X=W;break}}X&&(O==="break"||O==="continue")&&X.tryLoc<=B&&B<=X.finallyLoc&&(X=null);var ie=X?X.completion:{};return ie.type=O,ie.arg=B,X?(this.method="next",this.next=X.finallyLoc,m):this.complete(ie)},complete:function(O,B){if(O.type==="throw")throw O.arg;return O.type==="break"||O.type==="continue"?this.next=O.arg:O.type==="return"?(this.rval=this.arg=O.arg,this.method="return",this.next="end"):O.type==="normal"&&B&&(this.next=B),m},finish:function(O){for(var B=this.tryEntries.length-1;B>=0;--B){var U=this.tryEntries[B];if(U.finallyLoc===O)return this.complete(U.completion,U.afterLoc),F(U),m}},catch:function(O){for(var B=this.tryEntries.length-1;B>=0;--B){var U=this.tryEntries[B];if(U.tryLoc===O){var W=U.completion;if(W.type==="throw"){var X=W.arg;F(U)}return X}}throw new Error("illegal catch attempt")},delegateYield:function(O,B,U){return this.delegate={iterator:R(O),resultName:B,nextLoc:U},this.method==="next"&&(this.arg=a),m}},e}(r.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}),ar=CMe;function m8(r,t,e,n,i,a,o){try{var s=r[a](o),l=s.value}catch(u){e(u);return}s.done?t(l):Promise.resolve(l).then(n,i)}function kn(r){return function(){var t=this,e=arguments;return new Promise(function(n,i){var a=r.apply(t,e);function o(l){m8(a,n,i,o,s,"next",l)}function s(l){m8(a,n,i,o,s,"throw",l)}o(void 0)})}}var EMe=-1,_Me=1;function $l(){return _Me++}var Od=function r(t){dr(this,r)},Ld=function(){function r(t){dr(this,r),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=t}return _r(r,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(e){return this.lookup[e]>-1}},{key:"create",value:function(e,n){this.lookup[e]=this.components.length;var i=new this.clazz(n||{});return this.components.push(i),this.entities.push(e),i}},{key:"remove",value:function(e){var n=this.lookup[e];n>-1&&n<this.components.length-1&&(this.components[n]=this.components[this.components.length-1],this.entities[n]=this.entities[this.entities.length-1],this.lookup[this.entities[n]]=n),this.components.pop(),this.entities.pop(),delete this.lookup[e]}},{key:"removeKeepSorted",value:function(e){var n=this.lookup[e];if(n>-1){var i=this.entities[n];if(n<this.components.length-1){for(var a=n+1;a<this.components.length;++a)this.components[a-1]=this.components[a];for(var o=n+1;o<this.entities.length;++o)this.entities[o-1]=this.entities[o],this.lookup[this.entities[o-1]]=o-1}this.components.pop(),this.entities.pop(),delete this.lookup[i]}}},{key:"moveItem",value:function(e,n){if(e!==n){for(var i=this.components[e],a=this.entities[e],o=e<n?1:-1,s=e;s!==n;s+=o){var l=s+o;this.components[s]=this.components[l],this.entities[s]=this.entities[l],this.lookup[this.entities[s]]=s}this.components[n]=i,this.entities[n]=a,this.lookup[a]=n}}},{key:"getEntity",value:function(e){return this.entities[e]}},{key:"getComponent",value:function(e){return this.components[e]}},{key:"getComponentByEntity",value:function(e){var n=this.lookup[e];return n>-1?this.components[n]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(e){for(var n=0,i=Object.keys(this.lookup);n<i.length;n++){var a=i[n],o=Number(a);if(this.lookup[o]===e)return o}return EMe}},{key:"find",value:function(e){for(var n=0;n<this.getCount();n++){var i=this.getComponent(n);if(e(i,n))return i}return null}},{key:"findIndex",value:function(e){for(var n=0;n<this.getCount();n++){var i=this.getComponent(n);if(e(i,n))return n}return-1}},{key:"forEach",value:function(e){for(var n=0,i=Object.keys(this.lookup);n<i.length;n++){var a=i[n],o=Number(a),s=this.lookup[o];e(o,this.getComponent(s))}}},{key:"forEachAsync",value:function(){var t=kn(ar.mark(function n(i){var a,o,s,l,u;return ar.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:a=0,o=Object.keys(this.lookup);case 1:if(!(a<o.length)){f.next=10;break}return s=o[a],l=Number(s),u=this.lookup[l],f.next=7,i(l,this.getComponent(u));case 7:a++,f.next=1;break;case 10:case"end":return f.stop()}},n,this)}));function e(n){return t.apply(this,arguments)}return e}()},{key:"map",value:function(e){for(var n=[],i=0,a=Object.keys(this.lookup);i<a.length;i++){var o=a[i],s=Number(o),l=this.lookup[s];n.push(e(s,this.getComponent(l)))}return n}}]),r}();function TMe(r){if(Array.isArray(r))return r}function AMe(r,t){var e=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n=[],i=!0,a=!1,o,s;try{for(e=e.call(r);!(i=(o=e.next()).done)&&(n.push(o.value),!(t&&n.length===t));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&e.return!=null&&e.return()}finally{if(a)throw s}}return n}}function sM(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function y8(r,t){if(!!r){if(typeof r=="string")return sM(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return sM(r,t)}}function kMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zw(r,t){return TMe(r)||AMe(r,t)||y8(r,t)||kMe()}var ll="named",b8="name",lM="unmanaged",x8="optional",Gw="inject",Ty="multi_inject",w8="inversify:tagged",S8="inversify:tagged_props",uM="inversify:paramtypes",MMe="design:paramtypes",C8="post_construct";function IMe(){return[Gw,Ty,b8,lM,ll,x8]}var E8=IMe(),Za={Request:"Request",Singleton:"Singleton",Transient:"Transient"},Qa={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},ku={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},PMe=0;function Ay(){return PMe++}var DMe=function(){function r(t,e){this.id=Ay(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=Qa.Invalid,this.constraint=function(n){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return r.prototype.clone=function(){var t=new r(this.serviceIdentifier,this.scope);return t.activated=t.scope===Za.Singleton?this.activated:!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},r}(),RMe="Cannot apply @injectable decorator multiple times.",OMe="Metadata key was used more than once in a parameter:",ky="NULL argument",_8="Key Not Found",LMe="Ambiguous match found for serviceIdentifier:",FMe="Could not unbind serviceIdentifier:",NMe="No matching bindings found for serviceIdentifier:",BMe="Missing required @injectable annotation in:",$Me="Missing required @inject or @multiInject annotation in:",zMe=function(r){return"@inject called with undefined this could mean that the class "+r+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},GMe="Circular dependency found:",UMe="Invalid binding type:",VMe="No snapshot available to restore.",HMe="Invalid return type in middleware. Middleware must return!",WMe="Value provided to function binding must be a function!",jMe="The toSelf function can only be applied when a constructor is used as service identifier",YMe="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",XMe=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return"The number of constructor arguments in the derived class "+(r[0]+" must be >= than the number of constructor arguments of its base class.")},qMe="Invalid Container constructor argument. Container options must be an object.",KMe="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",ZMe="Invalid Container option. Auto bind injectable must be a boolean",QMe="Invalid Container option. Skip base check must be a boolean",JMe=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return"@postConstruct error in class "+r[0]+": "+r[1]},eIe=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return"It looks like there is a circular dependency "+("in one of the '"+r[0]+"' bindings. Please investigate bindings with")+("service identifier '"+r[1]+"'.")},tIe="Maximum call stack size exceeded",rIe=function(){function r(){}return r.prototype.getConstructorMetadata=function(t){var e=Reflect.getMetadata(uM,t),n=Reflect.getMetadata(w8,t);return{compilerGeneratedMetadata:e,userGeneratedMetadata:n||{}}},r.prototype.getPropertiesMetadata=function(t){var e=Reflect.getMetadata(S8,t)||[];return e},r}(),Uw={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};function T8(r){return r instanceof RangeError||r.message===tIe}function My(r){if(typeof r=="function"){var t=r;return t.name}else{if(typeof r=="symbol")return r.toString();var t=r;return t}}function A8(r,t,e){var n="",i=e(r,t);return i.length!==0&&(n=`
Registered bindings:`,i.forEach(function(a){var o="Object";a.implementationType!==null&&(o=Vw(a.implementationType)),n=n+`
 `+o,a.constraint.metaData&&(n=n+" - "+a.constraint.metaData)})),n}function k8(r,t){return r.parentRequest===null?!1:r.parentRequest.serviceIdentifier===t?!0:k8(r.parentRequest,t)}function nIe(r){function t(n,i){i===void 0&&(i=[]);var a=My(n.serviceIdentifier);return i.push(a),n.parentRequest!==null?t(n.parentRequest,i):i}var e=t(r);return e.reverse().join(" --> ")}function M8(r){r.childRequests.forEach(function(t){if(k8(t,t.serviceIdentifier)){var e=nIe(t);throw new Error(GMe+" "+e)}else M8(t)})}function iIe(r,t){if(t.isTagged()||t.isNamed()){var e="",n=t.getNamedTag(),i=t.getCustomTags();return n!==null&&(e+=n.toString()+`
`),i!==null&&i.forEach(function(a){e+=a.toString()+`
`})," "+r+`
 `+r+" - "+e}else return" "+r}function Vw(r){if(r.name)return r.name;var t=r.toString(),e=t.match(/^function\s*([^\s(]+)/);return e?e[1]:"Anonymous function: "+t}var I8=function(){function r(t){this.id=Ay(),this.container=t}return r.prototype.addPlan=function(t){this.plan=t},r.prototype.setCurrentRequest=function(t){this.currentRequest=t},r}(),Uc=function(){function r(t,e){this.key=t,this.value=e}return r.prototype.toString=function(){return this.key===ll?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},r}(),aIe=function(){function r(t,e){this.parentContext=t,this.rootRequest=e}return r}();function P8(r,t,e,n){var i=w8;R8(i,r,t,n,e)}function D8(r,t,e){var n=S8;R8(n,r.constructor,t,e)}function R8(r,t,e,n,i){var a={},o=typeof i=="number",s=i!==void 0&&o?i.toString():e;if(o&&e!==void 0)throw new Error(YMe);Reflect.hasOwnMetadata(r,t)&&(a=Reflect.getMetadata(r,t));var l=a[s];if(!Array.isArray(l))l=[];else for(var u=0,c=l;u<c.length;u++){var f=c[u];if(f.key===n.key)throw new Error(OMe+" "+f.key.toString())}l.push(n),a[s]=l,Reflect.defineMetadata(r,a,t)}var oIe=function(){function r(t){this._cb=t}return r.prototype.unwrap=function(){return this._cb()},r}();function br(r){return function(t,e,n){if(r===void 0)throw new Error(zMe(t.name));var i=new Uc(Gw,r);typeof n=="number"?P8(t,e,n,i):D8(t,e,i)}}var sIe=function(){function r(t){this.str=t}return r.prototype.startsWith=function(t){return this.str.indexOf(t)===0},r.prototype.endsWith=function(t){var e="",n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},r.prototype.contains=function(t){return this.str.indexOf(t)!==-1},r.prototype.equals=function(t){return this.str===t},r.prototype.value=function(){return this.str},r}(),Hw=function(){function r(t,e,n,i){this.id=Ay(),this.type=t,this.serviceIdentifier=n,this.name=new sIe(e||""),this.metadata=new Array;var a=null;typeof i=="string"?a=new Uc(ll,i):i instanceof Uc&&(a=i),a!==null&&this.metadata.push(a)}return r.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){var i=n[e];if(i.key===t)return!0}return!1},r.prototype.isArray=function(){return this.hasTag(Ty)},r.prototype.matchesArray=function(t){return this.matchesTag(Ty)(t)},r.prototype.isNamed=function(){return this.hasTag(ll)},r.prototype.isTagged=function(){return this.metadata.some(function(t){return E8.every(function(e){return t.key!==e})})},r.prototype.isOptional=function(){return this.matchesTag(x8)(!0)},r.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(t){return t.key===ll})[0]:null},r.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(t){return E8.every(function(e){return t.key!==e})}):null},r.prototype.matchesNamedTag=function(t){return this.matchesTag(ll)(t)},r.prototype.matchesTag=function(t){var e=this;return function(n){for(var i=0,a=e.metadata;i<a.length;i++){var o=a[i];if(o.key===t&&o.value===n)return!0}return!1}},r}(),Ww=globalThis&&globalThis.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r};function lIe(r,t){var e=Vw(t),n=O8(r,e,t,!1);return n}function O8(r,t,e,n){var i=r.getConstructorMetadata(e),a=i.compilerGeneratedMetadata;if(a===void 0){var o=BMe+" "+t+".";throw new Error(o)}var s=i.userGeneratedMetadata,l=Object.keys(s),u=e.length===0&&l.length>0,c=l.length>e.length,f=u||c?l.length:e.length,d=cIe(n,t,a,s,f),h=L8(r,e),v=Ww(Ww([],d),h);return v}function uIe(r,t,e,n,i){var a=i[r.toString()]||[],o=N8(a),s=o.unmanaged!==!0,l=n[r],u=o.inject||o.multiInject;if(l=u||l,l instanceof oIe&&(l=l.unwrap()),s){var c=l===Object,f=l===Function,d=l===void 0,h=c||f||d;if(!t&&h){var v=$Me+" argument "+r+" in class "+e+".";throw new Error(v)}var p=new Hw(ku.ConstructorArgument,o.targetName,l);return p.metadata=a,p}return null}function cIe(r,t,e,n,i){for(var a=[],o=0;o<i;o++){var s=o,l=uIe(s,r,t,e,n);l!==null&&a.push(l)}return a}function L8(r,t){for(var e=r.getPropertiesMetadata(t),n=[],i=Object.keys(e),a=0,o=i;a<o.length;a++){var s=o[a],l=e[s],u=N8(e[s]),c=u.targetName||s,f=u.inject||u.multiInject,d=new Hw(ku.ClassProperty,c,f);d.metadata=l,n.push(d)}var h=Object.getPrototypeOf(t.prototype).constructor;if(h!==Object){var v=L8(r,h);n=Ww(Ww([],n),v)}return n}function F8(r,t){var e=Object.getPrototypeOf(t.prototype).constructor;if(e!==Object){var n=Vw(e),i=O8(r,n,e,!0),a=i.map(function(l){return l.metadata.filter(function(u){return u.key===lM})}),o=[].concat.apply([],a).length,s=i.length-o;return s>0?s:F8(r,e)}else return 0}function N8(r){var t={};return r.forEach(function(e){t[e.key.toString()]=e.value}),{inject:t[Gw],multiInject:t[Ty],targetName:t[b8],unmanaged:t[lM]}}var cM=function(){function r(t,e,n,i,a){this.id=Ay(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=a,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=n===null?new Map:null}return r.prototype.addChildRequest=function(t,e,n){var i=new r(t,this.parentContext,this,e,n);return this.childRequests.push(i),i},r}();function fM(r){return r._bindingDictionary}function fIe(r,t,e,n,i,a){var o=r?Ty:Gw,s=new Uc(o,e),l=new Hw(t,n,e,s);if(i!==void 0){var u=new Uc(i,a);l.metadata.push(u)}return l}function B8(r,t,e,n,i){var a=Iy(e.container,i.serviceIdentifier),o=[];return a.length===Uw.NoBindingsAvailable&&e.container.options.autoBindInjectable&&typeof i.serviceIdentifier=="function"&&r.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(e.container.bind(i.serviceIdentifier).toSelf(),a=Iy(e.container,i.serviceIdentifier)),t?o=a:o=a.filter(function(s){var l=new cM(s.serviceIdentifier,e,n,s,i);return s.constraint(l)}),dIe(i.serviceIdentifier,o,i,e.container),o}function dIe(r,t,e,n){switch(t.length){case Uw.NoBindingsAvailable:if(e.isOptional())return t;var i=My(r),a=NMe;throw a+=iIe(i,e),a+=A8(n,i,Iy),new Error(a);case Uw.OnlyOneBindingAvailable:if(!e.isArray())return t;case Uw.MultipleBindingsAvailable:default:if(e.isArray())return t;var i=My(r),a=LMe+" "+i;throw a+=A8(n,i,Iy),new Error(a)}}function $8(r,t,e,n,i,a){var o,s;if(i===null){o=B8(r,t,n,null,a),s=new cM(e,n,null,o,a);var l=new aIe(n,s);n.addPlan(l)}else o=B8(r,t,n,i,a),s=i.addChildRequest(a.serviceIdentifier,o,a);o.forEach(function(u){var c=null;if(a.isArray())c=s.addChildRequest(u.serviceIdentifier,u,a);else{if(u.cache)return;c=s}if(u.type===Qa.Instance&&u.implementationType!==null){var f=lIe(r,u.implementationType);if(!n.container.options.skipBaseClassChecks){var d=F8(r,u.implementationType);if(f.length<d){var h=XMe(Vw(u.implementationType));throw new Error(h)}}f.forEach(function(v){$8(r,!1,v.serviceIdentifier,n,c,v)})}})}function Iy(r,t){var e=[],n=fM(r);return n.hasKey(t)?e=n.get(t):r.parent!==null&&(e=Iy(r.parent,t)),e}function hIe(r,t,e,n,i,a,o,s){s===void 0&&(s=!1);var l=new I8(t),u=fIe(e,n,i,"",a,o);try{return $8(r,s,i,l,null,u),l}catch(c){throw T8(c)&&l.plan&&M8(l.plan.rootRequest),c}}function vIe(r,t,e,n){var i=new Hw(ku.Variable,"",t,new Uc(e,n)),a=new I8(r),o=new cM(t,a,null,[],i);return o}var pIe=globalThis&&globalThis.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r};function gIe(r,t,e){var n=t.filter(function(a){return a.target!==null&&a.target.type===ku.ClassProperty}),i=n.map(e);return n.forEach(function(a,o){var s="";s=a.target.name.value();var l=i[o];r[s]=l}),r}function mIe(r,t){return new(r.bind.apply(r,pIe([void 0],t)))}function yIe(r,t){if(Reflect.hasMetadata(C8,r)){var e=Reflect.getMetadata(C8,r);try{t[e.value]()}catch(n){throw new Error(JMe(r.name,n.message))}}}function bIe(r,t,e){var n=null;if(t.length>0){var i=t.filter(function(o){return o.target!==null&&o.target.type===ku.ConstructorArgument}),a=i.map(e);n=mIe(r,a),n=gIe(n,t,e)}else n=new r;return yIe(r,n),n}var dM=function(r,t,e){try{return e()}catch(n){throw T8(n)?new Error(eIe(r,t.toString())):n}},hM=function(r){return function(t){t.parentContext.setCurrentRequest(t);var e=t.bindings,n=t.childRequests,i=t.target&&t.target.isArray(),a=!t.parentRequest||!t.parentRequest.target||!t.target||!t.parentRequest.target.matchesArray(t.target.serviceIdentifier);if(i&&a)return n.map(function(f){var d=hM(r);return d(f)});var o=null;if(t.target.isOptional()&&e.length===0)return;var s=e[0],l=s.scope===Za.Singleton,u=s.scope===Za.Request;if(l&&s.activated)return s.cache;if(u&&r!==null&&r.has(s.id))return r.get(s.id);if(s.type===Qa.ConstantValue)o=s.cache,s.activated=!0;else if(s.type===Qa.Function)o=s.cache,s.activated=!0;else if(s.type===Qa.Constructor)o=s.implementationType;else if(s.type===Qa.DynamicValue&&s.dynamicValue!==null)o=dM("toDynamicValue",s.serviceIdentifier,function(){return s.dynamicValue(t.parentContext)});else if(s.type===Qa.Factory&&s.factory!==null)o=dM("toFactory",s.serviceIdentifier,function(){return s.factory(t.parentContext)});else if(s.type===Qa.Provider&&s.provider!==null)o=dM("toProvider",s.serviceIdentifier,function(){return s.provider(t.parentContext)});else if(s.type===Qa.Instance&&s.implementationType!==null)o=bIe(s.implementationType,n,hM(r));else{var c=My(t.serviceIdentifier);throw new Error(UMe+" "+c)}return typeof s.onActivation=="function"&&(o=s.onActivation(t.parentContext,o)),l&&(s.cache=o,s.activated=!0),u&&r!==null&&!r.has(s.id)&&r.set(s.id,o),o}};function xIe(r){var t=hM(r.plan.rootRequest.requestScope);return t(r.plan.rootRequest)}var Mu=function(r,t){var e=r.parentRequest;return e!==null?t(e)?!0:Mu(e,t):!1},Py=function(r){return function(t){var e=function(n){return n!==null&&n.target!==null&&n.target.matchesTag(r)(t)};return e.metaData=new Uc(r,t),e}},jw=Py(ll),vM=function(r){return function(t){var e=null;if(t!==null)if(e=t.bindings[0],typeof r=="string"){var n=e.serviceIdentifier;return n===r}else{var i=t.bindings[0].implementationType;return r===i}return!1}},pM=function(){function r(t){this._binding=t}return r.prototype.when=function(t){return this._binding.constraint=t,new Ja(this._binding)},r.prototype.whenTargetNamed=function(t){return this._binding.constraint=jw(t),new Ja(this._binding)},r.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){var e=t.target!==null&&!t.target.isNamed()&&!t.target.isTagged();return e},new Ja(this._binding)},r.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=Py(t)(e),new Ja(this._binding)},r.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return vM(t)(e.parentRequest)},new Ja(this._binding)},r.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return jw(t)(e.parentRequest)},new Ja(this._binding)},r.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return Py(t)(e)(n.parentRequest)},new Ja(this._binding)},r.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return Mu(e,vM(t))},new Ja(this._binding)},r.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!Mu(e,vM(t))},new Ja(this._binding)},r.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return Mu(e,jw(t))},new Ja(this._binding)},r.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!Mu(e,jw(t))},new Ja(this._binding)},r.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return Mu(n,Py(t)(e))},new Ja(this._binding)},r.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!Mu(n,Py(t)(e))},new Ja(this._binding)},r.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return Mu(e,t)},new Ja(this._binding)},r.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!Mu(e,t)},new Ja(this._binding)},r}(),Ja=function(){function r(t){this._binding=t}return r.prototype.onActivation=function(t){return this._binding.onActivation=t,new pM(this._binding)},r}(),Vc=function(){function r(t){this._binding=t,this._bindingWhenSyntax=new pM(this._binding),this._bindingOnSyntax=new Ja(this._binding)}return r.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},r.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},r.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},r.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},r.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},r.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},r.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},r.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},r.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},r.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},r.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},r.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},r.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},r.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},r.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},r.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},r}(),wIe=function(){function r(t){this._binding=t}return r.prototype.inRequestScope=function(){return this._binding.scope=Za.Request,new Vc(this._binding)},r.prototype.inSingletonScope=function(){return this._binding.scope=Za.Singleton,new Vc(this._binding)},r.prototype.inTransientScope=function(){return this._binding.scope=Za.Transient,new Vc(this._binding)},r}(),z8=function(){function r(t){this._binding=t,this._bindingWhenSyntax=new pM(this._binding),this._bindingOnSyntax=new Ja(this._binding),this._bindingInSyntax=new wIe(t)}return r.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},r.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},r.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},r.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},r.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},r.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},r.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},r.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},r.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},r.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},r.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},r.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},r.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},r.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},r.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},r.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},r.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},r.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},r.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},r}(),SIe=function(){function r(t){this._binding=t}return r.prototype.to=function(t){return this._binding.type=Qa.Instance,this._binding.implementationType=t,new z8(this._binding)},r.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+jMe);var t=this._binding.serviceIdentifier;return this.to(t)},r.prototype.toConstantValue=function(t){return this._binding.type=Qa.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Za.Singleton,new Vc(this._binding)},r.prototype.toDynamicValue=function(t){return this._binding.type=Qa.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new z8(this._binding)},r.prototype.toConstructor=function(t){return this._binding.type=Qa.Constructor,this._binding.implementationType=t,this._binding.scope=Za.Singleton,new Vc(this._binding)},r.prototype.toFactory=function(t){return this._binding.type=Qa.Factory,this._binding.factory=t,this._binding.scope=Za.Singleton,new Vc(this._binding)},r.prototype.toFunction=function(t){if(typeof t!="function")throw new Error(WMe);var e=this.toConstantValue(t);return this._binding.type=Qa.Function,this._binding.scope=Za.Singleton,e},r.prototype.toAutoFactory=function(t){return this._binding.type=Qa.Factory,this._binding.factory=function(e){var n=function(){return e.container.get(t)};return n},this._binding.scope=Za.Singleton,new Vc(this._binding)},r.prototype.toProvider=function(t){return this._binding.type=Qa.Provider,this._binding.provider=t,this._binding.scope=Za.Singleton,new Vc(this._binding)},r.prototype.toService=function(t){this.toDynamicValue(function(e){return e.container.get(t)})},r}(),CIe=function(){function r(){}return r.of=function(t,e){var n=new r;return n.bindings=t,n.middleware=e,n},r}(),G8=function(){function r(){this._map=new Map}return r.prototype.getMap=function(){return this._map},r.prototype.add=function(t,e){if(t==null)throw new Error(ky);if(e==null)throw new Error(ky);var n=this._map.get(t);n!==void 0?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},r.prototype.get=function(t){if(t==null)throw new Error(ky);var e=this._map.get(t);if(e!==void 0)return e;throw new Error(_8)},r.prototype.remove=function(t){if(t==null)throw new Error(ky);if(!this._map.delete(t))throw new Error(_8)},r.prototype.removeByCondition=function(t){var e=this;this._map.forEach(function(n,i){var a=n.filter(function(o){return!t(o)});a.length>0?e._map.set(i,a):e._map.delete(i)})},r.prototype.hasKey=function(t){if(t==null)throw new Error(ky);return this._map.has(t)},r.prototype.clone=function(){var t=new r;return this._map.forEach(function(e,n){e.forEach(function(i){return t.add(n,i.clone())})}),t},r.prototype.traverse=function(t){this._map.forEach(function(e,n){t(n,e)})},r}(),EIe=globalThis&&globalThis.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(r,t||[])).next())})},_Ie=globalThis&&globalThis.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){e.label=u[1];break}if(u[0]===6&&e.label<a[1]){e.label=a[1],a=u;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(u);break}a[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(r,e)}catch(c){u=[6,c],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},TIe=globalThis&&globalThis.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},U8=function(){function r(t){this._appliedMiddleware=[];var e=t||{};if(typeof e!="object")throw new Error(""+qMe);if(e.defaultScope===void 0)e.defaultScope=Za.Transient;else if(e.defaultScope!==Za.Singleton&&e.defaultScope!==Za.Transient&&e.defaultScope!==Za.Request)throw new Error(""+KMe);if(e.autoBindInjectable===void 0)e.autoBindInjectable=!1;else if(typeof e.autoBindInjectable!="boolean")throw new Error(""+ZMe);if(e.skipBaseClassChecks===void 0)e.skipBaseClassChecks=!1;else if(typeof e.skipBaseClassChecks!="boolean")throw new Error(""+QMe);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=Ay(),this._bindingDictionary=new G8,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new rIe}return r.merge=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var a=new r,o=TIe([t,e],n).map(function(u){return fM(u)}),s=fM(a);function l(u,c){u.traverse(function(f,d){d.forEach(function(h){c.add(h.serviceIdentifier,h.clone())})})}return o.forEach(function(u){l(u,s)}),a},r.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),i=0,a=t;i<a.length;i++){var o=a[i],s=n(o.id);o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)}},r.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return EIe(this,void 0,void 0,function(){var n,i,a,o,s;return _Ie(this,function(l){switch(l.label){case 0:n=this._getContainerModuleHelpersFactory(),i=0,a=t,l.label=1;case 1:return i<a.length?(o=a[i],s=n(o.id),[4,o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)]):[3,4];case 2:l.sent(),l.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},r.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=function(a){return function(o){return o.moduleId===a}};e.forEach(function(a){var o=i(a.id);t._bindingDictionary.removeByCondition(o)})},r.prototype.bind=function(t){var e=this.options.defaultScope||Za.Transient,n=new DMe(t,e);return this._bindingDictionary.add(t,n),new SIe(n)},r.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},r.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch{throw new Error(FMe+" "+My(t))}},r.prototype.unbindAll=function(){this._bindingDictionary=new G8},r.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},r.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,ll,e)},r.prototype.isBoundTagged=function(t,e,n){var i=!1;if(this._bindingDictionary.hasKey(t)){var a=this._bindingDictionary.get(t),o=vIe(this,t,e,n);i=a.some(function(s){return s.constraint(o)})}return!i&&this.parent&&(i=this.parent.isBoundTagged(t,e,n)),i},r.prototype.snapshot=function(){this._snapshots.push(CIe.of(this._bindingDictionary.clone(),this._middleware))},r.prototype.restore=function(){var t=this._snapshots.pop();if(t===void 0)throw new Error(VMe);this._bindingDictionary=t.bindings,this._middleware=t.middleware},r.prototype.createChild=function(t){var e=new r(t||this.options);return e.parent=this,e},r.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._appliedMiddleware=this._appliedMiddleware.concat(t);var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce(function(i,a){return a(i)},n)},r.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},r.prototype.get=function(t){return this._get(!1,!1,ku.Variable,t)},r.prototype.getTagged=function(t,e,n){return this._get(!1,!1,ku.Variable,t,e,n)},r.prototype.getNamed=function(t,e){return this.getTagged(t,ll,e)},r.prototype.getAll=function(t){return this._get(!0,!0,ku.Variable,t)},r.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,ku.Variable,t,e,n)},r.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,ll,e)},r.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),this._appliedMiddleware.forEach(function(n){e.applyMiddleware(n)}),e.get(t)},r.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(s,l){s._binding.moduleId=l},n=function(s){return function(l){var u=t.bind.bind(t),c=u(l);return e(c,s),c}},i=function(s){return function(l){var u=t.unbind.bind(t);u(l)}},a=function(s){return function(l){var u=t.isBound.bind(t);return u(l)}},o=function(s){return function(l){var u=t.rebind.bind(t),c=u(l);return e(c,s),c}};return function(s){return{bindFunction:n(s),isboundFunction:a(s),rebindFunction:o(s),unbindFunction:i(s)}}},r.prototype._get=function(t,e,n,i,a,o){var s=null,l={avoidConstraints:t,contextInterceptor:function(u){return u},isMultiInject:e,key:a,serviceIdentifier:i,targetType:n,value:o};if(this._middleware){if(s=this._middleware(l),s==null)throw new Error(HMe)}else s=this._planAndResolve()(l);return s},r.prototype._planAndResolve=function(){var t=this;return function(e){var n=hIe(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);n=e.contextInterceptor(n);var i=xIe(n);return i}},r}();function Dn(){return function(r){if(Reflect.hasOwnMetadata(uM,r))throw new Error(RMe);var t=Reflect.getMetadata(MMe,r)||[];return Reflect.defineMetadata(uM,t,r),r}}function zl(r){return function(t,e,n){var i=new Uc(ll,r);typeof n=="number"?P8(t,e,n,i):D8(t,e,i)}}var wt={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},AIe=function r(){dr(this,r),this.index=void 0},kIe=function r(){dr(this,r),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},MIe=function(){function r(){dr(this,r),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return _r(r,[{key:"read",value:function(e){return this.reads.find(function(n){return n.index===e.index})||this.reads.push(e),e}},{key:"sample",value:function(e){return this.read(e),e}},{key:"write",value:function(e,n){var i=this.writes.find(function(l){return l.index===n.index});if(i)return n;var a=e.getResourceNode(n);a.resource.version++,a.resource.imported&&(this.hasSideEffect=!0);var o=e.createResourceNode(a.resource),s=e.getResourceNode(o);return s.writer=this,this.writes.push(o),o}}]),r}();function gM(r,t){return gM=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},gM(r,t)}function vo(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&gM(r,t)}function Gl(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Gl=function(e){return typeof e}:Gl=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gl(r)}function $i(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function po(r,t){if(t&&(Gl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $i(r)}function Rn(r){return Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Rn(r)}var IIe=function r(){dr(this,r),this.first=void 0,this.last=void 0};function PIe(r){var t=DIe();return function(){var n=Rn(r),i;if(t){var a=Rn(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return po(this,i)}}function DIe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var V8=function(r){vo(e,r);var t=PIe(e);function e(){var n;dr(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=t.call.apply(t,[this].concat(a)),n.version=0,n.refs=0,n.name=void 0,n.imported=void 0,n.priority=void 0,n.discardStart=!0,n.discardEnd=!1,n.descriptor=void 0,n.resource=void 0,n}return _r(e,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){!this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){!this.imported}}]),e}(IIe),RIe=function r(){dr(this,r),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0},H8,W8,j8,mM,Y8,X8;function zs(r,t){var e;if(typeof Symbol=="undefined"||r[Symbol.iterator]==null){if(Array.isArray(r)||(e=OIe(r))||t&&r&&typeof r.length=="number"){e&&(r=e);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=r[Symbol.iterator]()},n:function(){var u=e.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function OIe(r,t){if(!!r){if(typeof r=="string")return q8(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return q8(r,t)}}function q8(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var LIe=(H8=Dn(),W8=br(wt.RenderEngine),H8(j8=(mM=(X8=function(){function r(){dr(this,r),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],mr(this,"engine",Y8,this)}return _r(r,[{key:"execute",value:function(){var t=kn(ar.mark(function n(i){return ar.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this.compile(),o.next=3,this.executePassNodes(i);case 3:case"end":return o.stop()}},n,this)}));function e(n){return t.apply(this,arguments)}return e}()},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(e){e.tearDown&&e.tearDown()}),this.reset()}},{key:"addPass",value:function(e,n,i,a){var o=new kIe;o.execute=i,a&&(o.tearDown=a),o.name=e;var s=new MIe;return s.name=e,this.passNodes.push(s),this.frameGraphPasses.push(o),n(this,s,o),o}},{key:"getPass",value:function(e){return this.frameGraphPasses.find(function(n){return n.name===e})}},{key:"compile",value:function(){var e=this,n=zs(this.passNodes),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;a.refCount=a.writes.length+(a.hasSideEffect?1:0),a.reads.forEach(function(O){e.resourceNodes[O.index].readerCount++})}}catch(O){n.e(O)}finally{n.f()}var o=[],s=zs(this.resourceNodes),l;try{for(s.s();!(l=s.n()).done;){var u=l.value;u.readerCount===0&&o.push(u)}}catch(O){s.e(O)}finally{s.f()}for(;o.length;){var c=o.pop(),f=c&&c.writer;if(f&&--f.refCount==0){var d=zs(f.reads),h;try{for(d.s();!(h=d.n()).done;){var v=h.value,p=this.resourceNodes[v.index];--p.readerCount==0&&o.push(p)}}catch(O){d.e(O)}finally{d.f()}}}this.resourceNodes.forEach(function(O){O.resource.refs+=O.readerCount});var g=zs(this.passNodes),m;try{for(g.s();!(m=g.n()).done;){var y=m.value;if(!!y.refCount){var b=zs(y.reads),x;try{for(b.s();!(x=b.n()).done;){var w=x.value,S=this.resourceNodes[w.index].resource;S.first=S.first?S.first:y,S.last=y}}catch(O){b.e(O)}finally{b.f()}var C=zs(y.writes),_;try{for(C.s();!(_=C.n()).done;){var T=_.value,E=this.resourceNodes[T.index].resource;E.first=E.first?E.first:y,E.last=y}}catch(O){C.e(O)}finally{C.f()}}}}catch(O){g.e(O)}finally{g.f()}for(var k=0;k<2;k++){var I=zs(this.resourceNodes),P;try{for(I.s();!(P=I.n()).done;){var F=P.value,$=F.resource;if($.priority===k&&$.refs){var R=$.first,L=$.last;R&&L&&(R.devirtualize.push($),L.destroy.push($))}}}catch(O){I.e(O)}finally{I.f()}}}},{key:"executePassNodes",value:function(){var t=kn(ar.mark(function n(i){var a,o,s,l,u,c,f,d,h,v,p,g,m,y,b,x,w;return ar.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:a=zs(this.passNodes.entries()),C.prev=1,a.s();case 3:if((o=a.n()).done){C.next=18;break}if(s=zw(o.value,2),l=s[0],u=s[1],!u.refCount){C.next=16;break}c=zs(u.devirtualize);try{for(c.s();!(f=c.n()).done;)d=f.value,d.preExecuteDevirtualize(this.engine)}catch(_){c.e(_)}finally{c.f()}h=zs(u.destroy);try{for(h.s();!(v=h.n()).done;)p=v.value,p.preExecuteDestroy(this.engine)}catch(_){h.e(_)}finally{h.f()}return C.next=12,this.frameGraphPasses[l].execute(this,this.frameGraphPasses[l],i);case 12:g=zs(u.devirtualize);try{for(g.s();!(m=g.n()).done;)y=m.value,y.postExecuteDevirtualize(this.engine)}catch(_){g.e(_)}finally{g.f()}b=zs(u.destroy);try{for(b.s();!(x=b.n()).done;)w=x.value,w.postExecuteDestroy(this.engine)}catch(_){b.e(_)}finally{b.f()}case 16:C.next=3;break;case 18:C.next=23;break;case 20:C.prev=20,C.t0=C.catch(1),a.e(C.t0);case 23:return C.prev=23,a.f(),C.finish(23);case 26:this.reset();case 27:case"end":return C.stop()}},n,this,[[1,20,23,26]])}));function e(n){return t.apply(this,arguments)}return e}()},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(e){return this.resourceNodes[e.index]}},{key:"createResourceNode",value:function(e){var n=new RIe;n.resource=e,n.version=e.version,this.resourceNodes.push(n);var i=new AIe;return i.index=this.resourceNodes.length-1,i}},{key:"createTexture",value:function(e,n,i){var a=new V8;return a.name=n,a.descriptor=i,this.createResourceNode(a)}},{key:"createRenderTarget",value:function(e,n,i){var a=new V8;return a.name=n,a.descriptor=i,this.createResourceNode(a)}},{key:"present",value:function(e){this.addPass("Present",function(n,i){i.read(e),i.hasSideEffect=!0},kn(ar.mark(function n(){return ar.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:case"end":return a.stop()}},n)})))}}]),r}(),X8),Y8=yr(mM.prototype,"engine",[W8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mM))||j8);function ft(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var FIe=9007199254740991,NIe="[object Arguments]",BIe="[object Array]",$Ie="[object Boolean]",zIe="[object Date]",GIe="[object Error]",UIe="[object Function]",VIe="[object Map]",HIe="[object Number]",WIe="[object Object]",jIe="[object RegExp]",YIe="[object Set]",XIe="[object String]",qIe="[object WeakMap]",KIe="[object ArrayBuffer]",ZIe="[object DataView]",QIe="[object Float32Array]",JIe="[object Float64Array]",ePe="[object Int8Array]",tPe="[object Int16Array]",rPe="[object Int32Array]",nPe="[object Uint8Array]",iPe="[object Uint8ClampedArray]",aPe="[object Uint16Array]",oPe="[object Uint32Array]",bi={};bi[QIe]=bi[JIe]=bi[ePe]=bi[tPe]=bi[rPe]=bi[nPe]=bi[iPe]=bi[aPe]=bi[oPe]=!0;bi[NIe]=bi[BIe]=bi[KIe]=bi[$Ie]=bi[ZIe]=bi[zIe]=bi[GIe]=bi[UIe]=bi[VIe]=bi[HIe]=bi[WIe]=bi[jIe]=bi[YIe]=bi[XIe]=bi[qIe]=!1;var sPe=Object.prototype,lPe=sPe.toString;function uPe(r){return fPe(r)&&cPe(r.length)&&!!bi[lPe.call(r)]}function cPe(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=FIe}function fPe(r){return!!r&&Gl(r)==="object"}var K8=uPe;function Z8(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function Q8(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Z8(Object(e),!0).forEach(function(n){ft(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Z8(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function dPe(r){var t=hPe();return function(){var n=Rn(r),i;if(t){var a=Rn(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return po(this,i)}}function hPe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var vPe=function(r){vo(e,r);var t=dPe(e);function e(n){var i;return dr(this,e),i=t.call(this,n),i.dirty=!0,i.attributes=[],i.indices=void 0,i.indicesBuffer=void 0,i.vertexCount=0,i.maxInstancedCount=void 0,i.aabb=void 0,i.entity=void 0,Object.assign($i(i),n),i}return _r(e,[{key:"setAttribute",value:function(i,a,o,s){var l=this.attributes.find(function(u){return u.name===i});return l?(l.data=a,l.dirty=!0):this.attributes.push(Q8(Q8({dirty:!0,name:i,data:a},o),{},{bufferGetter:s})),this.dirty=!0,this}},{key:"setIndex",value:function(i){return this.indices=new Uint32Array(i.buffer?i.buffer:i),this.dirty=!0,this}},{key:"applyMatrix",value:function(i){var a=this.attributes.find(function(d){var h=d.name;return h==="position"}),o=this.attributes.find(function(d){var h=d.name;return h==="normal"});if(a&&(a.dirty=!0,a.data&&a.data.length))for(var s=0;s<a.data.length;s+=3){var l=r3(a.data[s],a.data[s+1],a.data[s+2],1);_m(l,l,i),K8(a.data)?a.data.set([l[0],l[1],l[2]],s):(a.data[s]=l[0],a.data[s+1]=l[1],a.data[s+2]=l[2])}if(o){var u=KB(Ev(),i);if(o.data&&o.data.length)for(var c=0;c<o.data.length;c+=3){var f=en(o.data[c],o.data[c+1],o.data[c+2]);Pl(f,f,u),Cm(f,f),K8(o.data)?o.data.set([f[0],f[1],f[2]],c):(o.data[c]=f[0],o.data[c+1]=f[1],o.data[c+2]=f[2])}}}}]),e}(Od),Ue;(function(r){r[r.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",r[r.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",r[r.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r[r.ZERO=0]="ZERO",r[r.ONE=1]="ONE",r[r.SRC_COLOR=768]="SRC_COLOR",r[r.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",r[r.SRC_ALPHA=770]="SRC_ALPHA",r[r.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",r[r.DST_ALPHA=772]="DST_ALPHA",r[r.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",r[r.DST_COLOR=774]="DST_COLOR",r[r.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",r[r.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",r[r.FUNC_ADD=32774]="FUNC_ADD",r[r.BLEND_EQUATION=32777]="BLEND_EQUATION",r[r.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",r[r.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",r[r.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",r[r.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",r[r.MAX_EXT=32776]="MAX_EXT",r[r.MIN_EXT=32775]="MIN_EXT",r[r.BLEND_DST_RGB=32968]="BLEND_DST_RGB",r[r.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",r[r.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",r[r.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",r[r.CONSTANT_COLOR=32769]="CONSTANT_COLOR",r[r.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",r[r.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",r[r.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",r[r.BLEND_COLOR=32773]="BLEND_COLOR",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",r[r.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",r[r.STREAM_DRAW=35040]="STREAM_DRAW",r[r.STATIC_DRAW=35044]="STATIC_DRAW",r[r.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",r[r.BUFFER_SIZE=34660]="BUFFER_SIZE",r[r.BUFFER_USAGE=34661]="BUFFER_USAGE",r[r.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",r[r.FRONT=1028]="FRONT",r[r.BACK=1029]="BACK",r[r.FRONT_AND_BACK=1032]="FRONT_AND_BACK",r[r.CULL_FACE=2884]="CULL_FACE",r[r.BLEND=3042]="BLEND",r[r.DITHER=3024]="DITHER",r[r.STENCIL_TEST=2960]="STENCIL_TEST",r[r.DEPTH_TEST=2929]="DEPTH_TEST",r[r.SCISSOR_TEST=3089]="SCISSOR_TEST",r[r.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",r[r.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",r[r.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",r[r.NO_ERROR=0]="NO_ERROR",r[r.INVALID_ENUM=1280]="INVALID_ENUM",r[r.INVALID_VALUE=1281]="INVALID_VALUE",r[r.INVALID_OPERATION=1282]="INVALID_OPERATION",r[r.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",r[r.CW=2304]="CW",r[r.CCW=2305]="CCW",r[r.LINE_WIDTH=2849]="LINE_WIDTH",r[r.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",r[r.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",r[r.CULL_FACE_MODE=2885]="CULL_FACE_MODE",r[r.FRONT_FACE=2886]="FRONT_FACE",r[r.DEPTH_RANGE=2928]="DEPTH_RANGE",r[r.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",r[r.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",r[r.DEPTH_FUNC=2932]="DEPTH_FUNC",r[r.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",r[r.STENCIL_FUNC=2962]="STENCIL_FUNC",r[r.STENCIL_FAIL=2964]="STENCIL_FAIL",r[r.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",r[r.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",r[r.STENCIL_REF=2967]="STENCIL_REF",r[r.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",r[r.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",r[r.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",r[r.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",r[r.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",r[r.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",r[r.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",r[r.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",r[r.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",r[r.VIEWPORT=2978]="VIEWPORT",r[r.SCISSOR_BOX=3088]="SCISSOR_BOX",r[r.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",r[r.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",r[r.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",r[r.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",r[r.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",r[r.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",r[r.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",r[r.RED_BITS=3410]="RED_BITS",r[r.GREEN_BITS=3411]="GREEN_BITS",r[r.BLUE_BITS=3412]="BLUE_BITS",r[r.ALPHA_BITS=3413]="ALPHA_BITS",r[r.DEPTH_BITS=3414]="DEPTH_BITS",r[r.STENCIL_BITS=3415]="STENCIL_BITS",r[r.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",r[r.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",r[r.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",r[r.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",r[r.SAMPLES=32937]="SAMPLES",r[r.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",r[r.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",r[r.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",r[r.DONT_CARE=4352]="DONT_CARE",r[r.FASTEST=4353]="FASTEST",r[r.NICEST=4354]="NICEST",r[r.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",r[r.BYTE=5120]="BYTE",r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.SHORT=5122]="SHORT",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.INT=5124]="INT",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.FLOAT=5126]="FLOAT",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.ALPHA=6406]="ALPHA",r[r.RGB=6407]="RGB",r[r.RGBA=6408]="RGBA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",r[r.VERTEX_SHADER=35633]="VERTEX_SHADER",r[r.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",r[r.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",r[r.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",r[r.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",r[r.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",r[r.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",r[r.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",r[r.SHADER_TYPE=35663]="SHADER_TYPE",r[r.DELETE_STATUS=35712]="DELETE_STATUS",r[r.LINK_STATUS=35714]="LINK_STATUS",r[r.VALIDATE_STATUS=35715]="VALIDATE_STATUS",r[r.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",r[r.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",r[r.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",r[r.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",r[r.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",r[r.NEVER=512]="NEVER",r[r.LESS=513]="LESS",r[r.EQUAL=514]="EQUAL",r[r.LEQUAL=515]="LEQUAL",r[r.GREATER=516]="GREATER",r[r.NOTEQUAL=517]="NOTEQUAL",r[r.GEQUAL=518]="GEQUAL",r[r.ALWAYS=519]="ALWAYS",r[r.KEEP=7680]="KEEP",r[r.REPLACE=7681]="REPLACE",r[r.INCR=7682]="INCR",r[r.DECR=7683]="DECR",r[r.INVERT=5386]="INVERT",r[r.INCR_WRAP=34055]="INCR_WRAP",r[r.DECR_WRAP=34056]="DECR_WRAP",r[r.VENDOR=7936]="VENDOR",r[r.RENDERER=7937]="RENDERER",r[r.VERSION=7938]="VERSION",r[r.NEAREST=9728]="NEAREST",r[r.LINEAR=9729]="LINEAR",r[r.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",r[r.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",r[r.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",r[r.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",r[r.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",r[r.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",r[r.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",r[r.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE=5890]="TEXTURE",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r[r.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",r[r.TEXTURE0=33984]="TEXTURE0",r[r.TEXTURE1=33985]="TEXTURE1",r[r.TEXTURE2=33986]="TEXTURE2",r[r.TEXTURE3=33987]="TEXTURE3",r[r.TEXTURE4=33988]="TEXTURE4",r[r.TEXTURE5=33989]="TEXTURE5",r[r.TEXTURE6=33990]="TEXTURE6",r[r.TEXTURE7=33991]="TEXTURE7",r[r.TEXTURE8=33992]="TEXTURE8",r[r.TEXTURE9=33993]="TEXTURE9",r[r.TEXTURE10=33994]="TEXTURE10",r[r.TEXTURE11=33995]="TEXTURE11",r[r.TEXTURE12=33996]="TEXTURE12",r[r.TEXTURE13=33997]="TEXTURE13",r[r.TEXTURE14=33998]="TEXTURE14",r[r.TEXTURE15=33999]="TEXTURE15",r[r.TEXTURE16=34e3]="TEXTURE16",r[r.TEXTURE17=34001]="TEXTURE17",r[r.TEXTURE18=34002]="TEXTURE18",r[r.TEXTURE19=34003]="TEXTURE19",r[r.TEXTURE20=34004]="TEXTURE20",r[r.TEXTURE21=34005]="TEXTURE21",r[r.TEXTURE22=34006]="TEXTURE22",r[r.TEXTURE23=34007]="TEXTURE23",r[r.TEXTURE24=34008]="TEXTURE24",r[r.TEXTURE25=34009]="TEXTURE25",r[r.TEXTURE26=34010]="TEXTURE26",r[r.TEXTURE27=34011]="TEXTURE27",r[r.TEXTURE28=34012]="TEXTURE28",r[r.TEXTURE29=34013]="TEXTURE29",r[r.TEXTURE30=34014]="TEXTURE30",r[r.TEXTURE31=34015]="TEXTURE31",r[r.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",r[r.REPEAT=10497]="REPEAT",r[r.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r[r.FLOAT_VEC2=35664]="FLOAT_VEC2",r[r.FLOAT_VEC3=35665]="FLOAT_VEC3",r[r.FLOAT_VEC4=35666]="FLOAT_VEC4",r[r.INT_VEC2=35667]="INT_VEC2",r[r.INT_VEC3=35668]="INT_VEC3",r[r.INT_VEC4=35669]="INT_VEC4",r[r.BOOL=35670]="BOOL",r[r.BOOL_VEC2=35671]="BOOL_VEC2",r[r.BOOL_VEC3=35672]="BOOL_VEC3",r[r.BOOL_VEC4=35673]="BOOL_VEC4",r[r.FLOAT_MAT2=35674]="FLOAT_MAT2",r[r.FLOAT_MAT3=35675]="FLOAT_MAT3",r[r.FLOAT_MAT4=35676]="FLOAT_MAT4",r[r.SAMPLER_2D=35678]="SAMPLER_2D",r[r.SAMPLER_CUBE=35680]="SAMPLER_CUBE",r[r.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",r[r.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",r[r.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",r[r.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",r[r.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",r[r.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",r[r.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",r[r.COMPILE_STATUS=35713]="COMPILE_STATUS",r[r.LOW_FLOAT=36336]="LOW_FLOAT",r[r.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",r[r.HIGH_FLOAT=36338]="HIGH_FLOAT",r[r.LOW_INT=36339]="LOW_INT",r[r.MEDIUM_INT=36340]="MEDIUM_INT",r[r.HIGH_INT=36341]="HIGH_INT",r[r.FRAMEBUFFER=36160]="FRAMEBUFFER",r[r.RENDERBUFFER=36161]="RENDERBUFFER",r[r.RGBA4=32854]="RGBA4",r[r.RGB5_A1=32855]="RGB5_A1",r[r.RGB565=36194]="RGB565",r[r.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",r[r.STENCIL_INDEX=6401]="STENCIL_INDEX",r[r.STENCIL_INDEX8=36168]="STENCIL_INDEX8",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r[r.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",r[r.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",r[r.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",r[r.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",r[r.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",r[r.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",r[r.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",r[r.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",r[r.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",r[r.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",r[r.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",r[r.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",r[r.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",r[r.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",r[r.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",r[r.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",r[r.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",r[r.NONE=0]="NONE",r[r.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",r[r.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",r[r.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",r[r.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",r[r.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",r[r.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",r[r.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",r[r.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",r[r.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",r[r.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",r[r.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",r[r.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",r[r.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",r[r.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",r[r.COPY_SRC=1]="COPY_SRC",r[r.COPY_DST=2]="COPY_DST",r[r.SAMPLED=4]="SAMPLED",r[r.STORAGE=8]="STORAGE",r[r.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Ue||(Ue={}));var J8,eU,tU,rU,Yw,nU,iU,aU,pPe=(J8=Dn(),eU=br(wt.GeometryComponentManager),tU=br(wt.RenderEngine),J8(rU=(Yw=(aU=function(){function r(){dr(this,r),mr(this,"geometry",nU,this),mr(this,"engine",iU,this)}return _r(r,[{key:"execute",value:function(){var t=kn(ar.mark(function n(){var i=this;return ar.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:this.geometry.forEach(function(s,l){l.dirty&&(l.attributes.forEach(function(u){if(u.dirty&&u.data){if(!u.buffer)u.buffer=i.engine.createBuffer({data:u.data,type:Ue.FLOAT});else{var c;(c=u.buffer)===null||c===void 0||c.subData({data:u.data,offset:0})}u.dirty=!1}}),l.indices&&(l.indicesBuffer?l.indicesBuffer.subData({data:l.indices,offset:0}):l.indicesBuffer=i.engine.createElements({data:l.indices,count:l.indices.length,type:Ue.UNSIGNED_INT,usage:Ue.STATIC_DRAW})),l.dirty=!1)});case 1:case"end":return o.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"tearDown",value:function(){this.geometry.forEach(function(e,n){n.indicesBuffer&&n.indicesBuffer.destroy(),n.attributes.forEach(function(i){i.buffer&&i.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},n=e.vertexCount,i=$l();return this.geometry.create(i,{vertexCount:n})}},{key:"createInstancedBufferGeometry",value:function(e){var n=e.maxInstancedCount,i=e.vertexCount,a=$l();return this.geometry.create(a,{maxInstancedCount:n,vertexCount:i})}}]),r}(),aU),nU=yr(Yw.prototype,"geometry",[eU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iU=yr(Yw.prototype,"engine",[tU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yw))||rU);function oU(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function sU(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?oU(Object(e),!0).forEach(function(n){ft(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):oU(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function gPe(r){var t=mPe();return function(){var n=Rn(r),i;if(t){var a=Rn(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return po(this,i)}}function mPe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var yPe=function(r){vo(e,r);var t=gPe(e);function e(n){var i;return dr(this,e),i=t.call(this,n),i.vertexShaderGLSL=void 0,i.fragmentShaderGLSL=void 0,i.defines={},i.dirty=!0,i.uniforms=[],i.cull={enable:!0,face:Ue.BACK},i.depth={enable:!0},i.blend=void 0,i.entity=void 0,i.type=void 0,Object.assign($i(i),n),i}return _r(e,[{key:"setDefines",value:function(i){return this.defines=sU(sU({},this.defines),i),this}},{key:"setCull",value:function(i){return this.cull=i,this}},{key:"setDepth",value:function(i){return this.depth=i,this}},{key:"setBlend",value:function(i){return this.blend=i,this}},{key:"setUniform",value:function(i,a){var o=this;if(typeof i!="string")return Object.keys(i).forEach(function(l){return o.setUniform(l,i[l])}),this;var s=this.uniforms.find(function(l){return l.name===i});return s?(s.dirty=!0,s.data=a):this.uniforms.push({name:i,dirty:!0,data:a}),this.dirty=!0,this}}]),e}(Od),lU,uU,cU,fU,dU,Dy,hU,vU,pU,gU;function mU(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function yU(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?mU(Object(e),!0).forEach(function(n){ft(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):mU(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}var bPe=(lU=Dn(),uU=br(wt.MaterialComponentManager),cU=br(wt.RenderEngine),fU=br(wt.ShaderModuleService),lU(dU=(Dy=(gU=function(){function r(){dr(this,r),mr(this,"material",hU,this),mr(this,"engine",vU,this),mr(this,"shaderModule",pU,this)}return _r(r,[{key:"execute",value:function(){var t=kn(ar.mark(function n(){return ar.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:case"end":return a.stop()}},n)}));function e(){return t.apply(this,arguments)}return e}()},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(e){var n=$l(),i=e.vertexShader,a=e.fragmentShader,o=[];if(!this.engine.supportWebGPU){var s="material-".concat(n);this.shaderModule.registerModule(s,{vs:e.vertexShader,fs:e.fragmentShader});var l=this.shaderModule.getModule(s);i=l.vs,a=l.fs,l.uniforms&&(o=Object.keys(l.uniforms).map(function(u){return{dirty:!0,name:u,data:l.uniforms[u]}}))}return this.material.create(n,yU(yU({vertexShaderGLSL:i,fragmentShaderGLSL:a},e),{},{uniforms:o}))}}]),r}(),gU),hU=yr(Dy.prototype,"material",[uU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vU=yr(Dy.prototype,"engine",[cU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pU=yr(Dy.prototype,"shaderModule",[fU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dy))||dU);function xPe(r){var t=wPe();return function(){var n=Rn(r),i;if(t){var a=Rn(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return po(this,i)}}function wPe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var yM;(function(r){r[r.Standard=0]="Standard"})(yM||(yM={}));var SPe=function(r){vo(e,r);var t=xPe(e);function e(n){var i;return dr(this,e),i=t.call(this,n),i.strategy=yM.Standard,i.visibilityPlaneMask=0,i.visible=!1,Object.assign($i(i),n),i}return e}(Od),bM=function(){function r(t,e){dr(this,r),this.center=void 0,this.halfExtents=void 0,this.min=Vn(),this.max=Vn(),this.update(t,e)}return _r(r,[{key:"update",value:function(e,n){this.center=e||Vn(),this.halfExtents=n||en(.5,.5,.5),this.min=wT(this.min,this.center,this.halfExtents),this.max=wu(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(e,n){wu(this.center,n,e),Sm(this.center,this.center,.5),wT(this.halfExtents,n,e),Sm(this.halfExtents,this.halfExtents,.5),Xa(this.min,e),Xa(this.max,n)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(e){var n=this.center,i=n[0],a=n[1],o=n[2],s=this.halfExtents,l=s[0],u=s[1],c=s[2],f=i-l,d=i+l,h=a-u,v=a+u,p=o-c,g=o+c,m=e.center,y=m[0],b=m[1],x=m[2],w=e.halfExtents,S=w[0],C=w[1],_=w[2],T=y-S,E=y+S,k=b-C,I=b+C,P=x-_,F=x+_;T<f&&(f=T),E>d&&(d=E),k<h&&(h=k),I>v&&(v=I),P<p&&(p=P),F>g&&(g=F),n[0]=(f+d)*.5,n[1]=(h+v)*.5,n[2]=(p+g)*.5,s[0]=(d-f)*.5,s[1]=(v-h)*.5,s[2]=(g-p)*.5,this.min[0]=f,this.min[1]=h,this.min[2]=p,this.max[0]=d,this.max[1]=v,this.max[2]=g}},{key:"intersects",value:function(e){var n=this.getMax(),i=this.getMin(),a=e.getMax(),o=e.getMin();return i[0]<=a[0]&&n[0]>=o[0]&&i[1]<=a[1]&&n[1]>=o[1]&&i[2]<=a[2]&&n[2]>=o[2]}},{key:"containsPoint",value:function(e){var n=this.getMin(),i=this.getMax();return!(e[0]<n[0]||e[0]>i[0]||e[1]<n[1]||e[1]>i[1]||e[2]<n[2]||e[2]>i[2])}},{key:"getNegativeFarPoint",value:function(e){return e.pnVertexFlag===273?Xa(Vn(),this.min):e.pnVertexFlag===272?en(this.min[0],this.min[1],this.max[2]):e.pnVertexFlag===257?en(this.min[0],this.max[1],this.min[2]):e.pnVertexFlag===256?en(this.min[0],this.max[1],this.max[2]):e.pnVertexFlag===17?en(this.max[0],this.min[1],this.min[2]):e.pnVertexFlag===16?en(this.max[0],this.min[1],this.max[2]):e.pnVertexFlag===1?en(this.max[0],this.max[1],this.min[2]):en(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(e){return e.pnVertexFlag===273?Xa(Vn(),this.max):e.pnVertexFlag===272?en(this.max[0],this.max[1],this.min[2]):e.pnVertexFlag===257?en(this.max[0],this.min[1],this.max[2]):e.pnVertexFlag===256?en(this.max[0],this.min[1],this.min[2]):e.pnVertexFlag===17?en(this.min[0],this.max[1],this.max[2]):e.pnVertexFlag===16?en(this.min[0],this.max[1],this.min[2]):e.pnVertexFlag===1?en(this.min[0],this.min[1],this.max[2]):en(this.min[0],this.min[1],this.min[2])}}]),r}();function CPe(r){var t=EPe();return function(){var n=Rn(r),i;if(t){var a=Rn(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return po(this,i)}}function EPe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var _Pe=function(r){vo(e,r);var t=CPe(e);function e(n){var i;return dr(this,e),i=t.call(this,n),i.material=void 0,i.geometry=void 0,i.aabb=new bM,i.aabbDirty=!0,i.model=void 0,i.visible=!0,i.children=[],Object.assign($i(i),n),i}return e}(Od),TPe=function(){function r(t,e){dr(this,r),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=t||0,this.normal=e||en(0,1,0),this.updatePNVertexFlag()}return _r(r,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(e){return Zx(e,this.normal)-this.distance}},{key:"normalize",value:function(){var e=1/t3(this.normal);Sm(this.normal,this.normal,e),this.distance*=e}},{key:"intersectsLine",value:function(e,n,i){var a=this.distanceToPoint(e),o=this.distanceToPoint(n),s=a/(a-o),l=s>=0&&s<=1;return l&&i&&sd(i,e,n,s),l}}]),r}(),Hc;(function(r){r[r.OUTSIDE=4294967295]="OUTSIDE",r[r.INSIDE=0]="INSIDE",r[r.INDETERMINATE=2147483647]="INDETERMINATE"})(Hc||(Hc={}));var APe=function(){function r(t){if(dr(this,r),this.planes=[],t)this.planes=t;else for(var e=0;e<6;e++)this.planes.push(new TPe)}return _r(r,[{key:"extractFromVPMatrix",value:function(e){var n=zw(e,16),i=n[0],a=n[1],o=n[2],s=n[3],l=n[4],u=n[5],c=n[6],f=n[7],d=n[8],h=n[9],v=n[10],p=n[11],g=n[12],m=n[13],y=n[14],b=n[15];Av(this.planes[0].normal,s-i,f-l,p-d),this.planes[0].distance=-(b-g),Av(this.planes[1].normal,s+i,f+l,p+d),this.planes[1].distance=-(b+g),Av(this.planes[2].normal,s+a,f+u,p+h),this.planes[2].distance=-(b+m),Av(this.planes[3].normal,s-a,f-u,p-h),this.planes[3].distance=-(b-m),Av(this.planes[4].normal,s-o,f-c,p-v),this.planes[4].distance=-(b-y),Av(this.planes[5].normal,s+o,f+c,p+v),this.planes[5].distance=-(b+y),this.planes.forEach(function(x){x.normalize(),x.updatePNVertexFlag()})}}]),r}();function kPe(r,t){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t}function MPe(r){var t=zw(r,3),e=t[0],n=t[1],i=t[2],a=e+n*256+i*65536-1;return a}var bU,xU,wU,SU,CU,EU,_U,Fd,TU,AU,kU,MU,IU,PU;function DU(r,t){var e;if(typeof Symbol=="undefined"||r[Symbol.iterator]==null){if(Array.isArray(r)||(e=IPe(r))||t&&r&&typeof r.length=="number"){e&&(r=e);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=r[Symbol.iterator]()},n:function(){var u=e.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function IPe(r,t){if(!!r){if(typeof r=="string")return RU(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return RU(r,t)}}function RU(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var PPe=(bU=Dn(),xU=br(wt.MeshComponentManager),wU=br(wt.CullableComponentManager),SU=br(wt.GeometryComponentManager),CU=br(wt.HierarchyComponentManager),EU=br(wt.TransformComponentManager),bU(_U=(Fd=(PU=function(){function r(){dr(this,r),mr(this,"mesh",TU,this),mr(this,"cullable",AU,this),mr(this,"geometry",kU,this),mr(this,"hierarchy",MU,this),mr(this,"transform",IU,this),this.planes=void 0}return _r(r,[{key:"setFrustumPlanes",value:function(e){this.planes=e}},{key:"execute",value:function(){var t=kn(ar.mark(function n(i){var a,o,s,l,u,c,f,d,h,v,p,g,m,y,b,x,w,S,C,_,T;return ar.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:a=DU(i);try{for(a.s();!(o=a.n()).done;){s=o.value,l=s.getScene(),u=s.getCamera(),c=DU(l.getEntities());try{for(c.s();!(f=c.n()).done;)d=f.value,h=this.mesh.getComponentByEntity(d),h&&(v=this.hierarchy.getComponentByEntity(d),p=this.cullable.getComponentByEntity(d),g=h.geometry,m=this.transform.getComponentByEntity(d),g&&g.aabb&&m&&h.aabbDirty&&(y=m.worldTransform,b=g.aabb,x=b.center,w=b.halfExtents,S=xT(Vn(),x,y),C=kPe(y,Ev()),_=Pl(Vn(),w,C),h.aabb.update(S,_),h.aabbDirty=!1),p&&g&&(T=this.cullable.getComponentByEntity((v==null?void 0:v.parentID)||-1),p.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(h.aabb,(T==null?void 0:T.visibilityPlaneMask)||Hc.INDETERMINATE,this.planes||u.getFrustum().planes),p.visible=p.visibilityPlaneMask!==Hc.OUTSIDE))}catch(I){c.e(I)}finally{c.f()}}}catch(I){a.e(I)}finally{a.f()}case 2:case"end":return k.stop()}},n,this)}));function e(n){return t.apply(this,arguments)}return e}()},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(e,n,i){if(n===Hc.OUTSIDE||n===Hc.INSIDE)return n;for(var a=Hc.INSIDE,o=0,s=i.length;o<s;++o){var l=o<31?1<<o:0;if(!(o<31&&(n&l)==0)){var u=i[o],c=u.normal,f=u.distance;if(Zx(c,e.getNegativeFarPoint(i[o]))+f>0)return Hc.OUTSIDE;Zx(c,e.getPositiveFarPoint(i[o]))+f>0&&(a|=l)}}return a}}]),r}(),PU),TU=yr(Fd.prototype,"mesh",[xU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),AU=yr(Fd.prototype,"cullable",[wU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kU=yr(Fd.prototype,"geometry",[SU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),MU=yr(Fd.prototype,"hierarchy",[CU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),IU=yr(Fd.prototype,"transform",[EU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fd))||_U),OU,LU,FU,NU,BU,$U,zU,GU,UU,VU,HU,WU,ul,jU,YU,XU,qU,KU,ZU,QU,JU,eV,tV,rV;function Xw(r,t){var e;if(typeof Symbol=="undefined"||r[Symbol.iterator]==null){if(Array.isArray(r)||(e=DPe(r))||t&&r&&typeof r.length=="number"){e&&(r=e);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=r[Symbol.iterator]()},n:function(){var u=e.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function DPe(r,t){if(!!r){if(typeof r=="string")return nV(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return nV(r,t)}}function nV(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var np=(OU=Dn(),LU=br(wt.MeshComponentManager),FU=br(wt.GeometryComponentManager),NU=br(wt.MaterialComponentManager),BU=br(wt.CullableComponentManager),$U=br(wt.TransformComponentManager),zU=br(wt.HierarchyComponentManager),GU=br(wt.Systems),UU=zl(wt.FrameGraphSystem),VU=br(wt.RenderEngine),HU=br(wt.ResourcePool),OU(WU=(ul=(rV=tV=function(){function r(){var t=this;dr(this,r),mr(this,"mesh",jU,this),mr(this,"geometry",YU,this),mr(this,"material",XU,this),mr(this,"cullable",qU,this),mr(this,"transform",KU,this),mr(this,"hierarchy",ZU,this),mr(this,"frameGraphSystem",QU,this),mr(this,"engine",JU,this),mr(this,"resourcePool",eV,this),this.modelCache={},this.setup=function(e,n,i){var a=e.createRenderTarget(n,"color buffer",{width:1,height:1,usage:Ue.RENDER_ATTACHMENT|Ue.SAMPLED|Ue.COPY_SRC});i.data={output:n.write(e,a)}},this.execute=function(){var e=kn(ar.mark(function n(i,a,o){var s,l,u,c,f,d;return ar.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:s=i.getResourceNode(a.data.output),l=t.resourcePool.getOrCreateResource(s.resource),u=Xw(o),v.prev=3,u.s();case 5:if((c=u.n()).done){v.next=11;break}return f=c.value,v.next=9,t.initView(f);case 9:v.next=5;break;case 11:v.next=16;break;case 13:v.prev=13,v.t0=v.catch(3),u.e(v.t0);case 16:return v.prev=16,u.f(),v.finish(16);case 19:d=t.engine.getCanvas(),l.resize({width:d.width,height:d.height}),t.engine.setScissor({enable:!1}),t.engine.clear({framebuffer:l,color:o[0].getClearColor(),depth:1}),t.engine.useFramebuffer(l,function(){var p=Xw(o),g;try{for(p.s();!(g=p.n()).done;){var m=g.value;t.renderView(m)}}catch(y){p.e(y)}finally{p.f()}});case 24:case"end":return v.stop()}},n,null,[[3,13,16,19]])}));return function(n,i,a){return e.apply(this,arguments)}}()}return _r(r,[{key:"renderView",value:function(e){var n=e.getScene(),i=e.getCamera(),a=i.getViewTransform(),o=od(Bo(),i.getPerspective(),a);i.getFrustum().extractFromVPMatrix(o);var s=e.getViewport(),l=s.x,u=s.y,c=s.width,f=s.height;this.engine.viewport({x:l,y:u,width:c,height:f});var d=Xw(n.getEntities()),h;try{for(d.s();!(h=d.n()).done;){var v=h.value;this.renderMesh(v,{camera:i,view:e,viewMatrix:a})}}catch(p){d.e(p)}finally{d.f()}}},{key:"renderMesh",value:function(e,n){var i=n.camera,a=n.view,o=n.viewMatrix,s=this.mesh.getComponentByEntity(e);if(!(!s||!s.visible)){var l=s.material,u=s.geometry;if(!(!u||u.dirty||!l)){var c=this.transform.getComponentByEntity(e),f=od(Bo(),o,c.worldTransform),d=a.getViewport(),h=d.width,v=d.height;l.setUniform({projectionMatrix:i.getPerspective(),modelViewMatrix:f,modelMatrix:c.worldTransform,viewMatrix:o,cameraPosition:i.getPosition(),u_viewport:[h,v]}),s.model&&(s.model.draw({uniforms:l.uniforms.reduce(function(p,g){return p[g.name]=g.data,p},{})}),l.uniforms.forEach(function(p){p.dirty=!1}),l.dirty=!1)}}}},{key:"initMesh",value:function(){var t=kn(ar.mark(function n(i,a){var o,s,l,u,c,f,d,h;return ar.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(o=this.mesh.getComponentByEntity(i),o){p.next=3;break}return p.abrupt("return");case 3:if(s=o.material,l=o.geometry,!(!l||l.dirty||!s)){p.next=7;break}return p.abrupt("return");case 7:if(o.model){p.next=24;break}if(u="m-".concat(s.entity,"-g-").concat(l.entity),!this.modelCache[u]){p.next=12;break}return o.model=this.modelCache[u],p.abrupt("return");case 12:return s.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),c=this.engine,f=c.createModel,d=c.createAttribute,h={vs:s.vertexShaderGLSL,fs:s.fragmentShaderGLSL,defines:s.defines,attributes:l.attributes.reduce(function(g,m){return m.data&&m.buffer&&(g[m.name]=d({buffer:m.buffer,attributes:m.attributes,arrayStride:m.arrayStride,stepMode:m.stepMode,divisor:m.stepMode==="vertex"?0:1})),g},{}),uniforms:s.uniforms.reduce(function(g,m){return g[m.name]=m.data,g},{}),scissor:{enable:!0,box:function(){return a.getViewport()}}},s.cull&&(h.cull=s.cull),s.depth&&(h.depth=s.depth),s.blend&&(h.blend=s.blend),l.indicesBuffer&&(h.elements=l.indicesBuffer),l.maxInstancedCount&&(h.instances=l.maxInstancedCount,h.count=l.vertexCount||3),p.next=22,f(h);case 22:o.model=p.sent,this.modelCache[u]=o.model;case 24:case"end":return p.stop()}},n,this)}));function e(n,i){return t.apply(this,arguments)}return e}()},{key:"initView",value:function(){var t=kn(ar.mark(function n(i){var a,o,s,l;return ar.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:a=i.getScene(),o=Xw(a.getEntities()),c.prev=2,o.s();case 4:if((s=o.n()).done){c.next=10;break}return l=s.value,c.next=8,this.initMesh(l,i);case 8:c.next=4;break;case 10:c.next=15;break;case 12:c.prev=12,c.t0=c.catch(2),o.e(c.t0);case 15:return c.prev=15,o.f(),c.finish(15);case 18:case"end":return c.stop()}},n,this,[[2,12,15,18]])}));function e(n){return t.apply(this,arguments)}return e}()}]),r}(),tV.IDENTIFIER="Render Pass",rV),jU=yr(ul.prototype,"mesh",[LU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),YU=yr(ul.prototype,"geometry",[FU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),XU=yr(ul.prototype,"material",[NU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qU=yr(ul.prototype,"cullable",[BU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),KU=yr(ul.prototype,"transform",[$U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ZU=yr(ul.prototype,"hierarchy",[zU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),QU=yr(ul.prototype,"frameGraphSystem",[GU,UU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),JU=yr(ul.prototype,"engine",[VU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eV=yr(ul.prototype,"resourcePool",[HU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ul))||WU),iV,aV,oV,sV,lV,uV,ip,cV,fV,dV,hV,vV,pV;function xM(r,t){var e;if(typeof Symbol=="undefined"||r[Symbol.iterator]==null){if(Array.isArray(r)||(e=RPe(r))||t&&r&&typeof r.length=="number"){e&&(r=e);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=r[Symbol.iterator]()},n:function(){var u=e.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function RPe(r,t){if(!!r){if(typeof r=="string")return gV(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return gV(r,t)}}function gV(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var wM={NONE:0,ENCODE:1,HIGHLIGHT:2},SM=(iV=Dn(),aV=br(wt.RenderEngine),oV=br(wt.ResourcePool),sV=br(wt.RenderPassFactory),lV=br(wt.MeshComponentManager),iV(uV=(ip=(pV=vV=function(){function r(){var t=this;dr(this,r),mr(this,"engine",cV,this),mr(this,"resourcePool",fV,this),mr(this,"renderPassFactory",dV,this),mr(this,"mesh",hV,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(e,n,i){var a=e.createRenderTarget(n,"picking fbo",{width:1,height:1});i.data={output:n.write(e,a)},n.hasSideEffect=!0},this.execute=function(){var e=kn(ar.mark(function n(i,a,o){var s,l,u;return ar.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(t.views=o,!t.alreadyInRendering){f.next=3;break}return f.abrupt("return");case 3:s=xM(o);try{for(u=function(){var h=l.value,v=h.getViewport(),p=v.width,g=v.height;t.alreadyInRendering=!0;var m=i.getResourceNode(a.data.output);t.pickingFBO=t.resourcePool.getOrCreateResource(m.resource),t.pickingFBO.resize({width:p,height:g}),t.engine.useFramebuffer(t.pickingFBO,function(){t.engine.clear({framebuffer:t.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var y=t.renderPassFactory(np.IDENTIFIER),b=[],x=h.getScene(),w=xM(x.getEntities()),S;try{for(w.s();!(S=w.n()).done;){var C=S.value,_=t.mesh.getComponentByEntity(C),T=_.material;T.setUniform("u_PickingStage",wM.ENCODE),b.push(_)}}catch(E){w.e(E)}finally{w.f()}y.renderView(h),b.forEach(function(E){var k=E.material;k.setUniform("u_PickingStage",wM.HIGHLIGHT)}),t.alreadyInRendering=!1})},s.s();!(l=s.n()).done;)u()}catch(d){s.e(d)}finally{s.f()}case 5:case"end":return f.stop()}},n)}));return function(n,i,a){return e.apply(this,arguments)}}(),this.pick=function(e,n){var i=e.x,a=e.y,o=t.engine,s=o.readPixels,l=o.useFramebuffer,u=n.getViewport(),c=u.width,f=u.height,d=i*window.devicePixelRatio,h=a*window.devicePixelRatio;if(!(d>c||d<0||h>f||h<0)){var v,p;return l(t.pickingFBO,function(){v=s({x:Math.round(d),y:Math.round(f-(a+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:t.pickingFBO}),(v[0]!==0||v[1]!==0||v[2]!==0)&&(p=MPe(v),t.highlightEnabled&&t.highlightPickedFeature(v,n))}),p}}}return _r(r,[{key:"enableHighlight",value:function(e){this.highlightEnabled=e}},{key:"setHighlightColor",value:function(e){this.highlightColor=e}},{key:"highlightPickedFeature",value:function(e,n){if(e){var i=xM(n.getScene().getEntities()),a;try{for(i.s();!(a=i.n()).done;){var o=a.value,s=this.mesh.getComponentByEntity(o),l=s.material;l.setUniform("u_PickingStage",wM.HIGHLIGHT),l.setUniform("u_PickingColor",[e[0],e[1],e[2]]),l.setUniform("u_HighlightColor",this.highlightColor)}}catch(u){i.e(u)}finally{i.f()}}}}]),r}(),vV.IDENTIFIER="PixelPicking Pass",pV),cV=yr(ip.prototype,"engine",[aV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fV=yr(ip.prototype,"resourcePool",[oV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dV=yr(ip.prototype,"renderPassFactory",[sV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hV=yr(ip.prototype,"mesh",[lV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ip))||uV),mV,yV,bV,xV,qw,wV,SV,CV,EV,OPe=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,LPe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,FPe=`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`,NPe=`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Kw=(mV=Dn(),yV=br(wt.RenderEngine),bV=br(wt.ResourcePool),mV(xV=(qw=(EV=CV=function r(){var t=this;dr(this,r),mr(this,"engine",wV,this),mr(this,"resourcePool",SV,this),this.model=void 0,this.setup=function(e,n,i){var a=e.getPass(np.IDENTIFIER);if(a){var o=e.createRenderTarget(n,"render to screen",{width:1,height:1});i.data={input:n.read(a.data.output),output:n.write(e,o)}}},this.execute=function(){var e=kn(ar.mark(function n(i,a){var o,s,l,u,c,f,d;return ar.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(o=t.engine,s=o.createModel,l=o.createAttribute,u=o.createBuffer,t.model){v.next=6;break}return v.next=4,s({vs:t.engine.supportWebGPU?NPe:LPe,fs:t.engine.supportWebGPU?FPe:OPe,attributes:{a_Position:l({buffer:u({data:[-4,-4,4,-4,0,4],type:Ue.FLOAT}),size:2,arrayStride:2*4,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:c=v.sent,t.model=c;case 6:f=i.getResourceNode(a.data.input),d=t.resourcePool.getOrCreateResource(f.resource),t.engine.useFramebuffer(null,function(){t.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),t.model.draw({uniforms:{u_Texture:d}})});case 9:case"end":return v.stop()}},n)}));return function(n,i){return e.apply(this,arguments)}}(),this.tearDown=function(){t.model=void 0}},CV.IDENTIFIER="Copy Pass",EV),wV=yr(qw.prototype,"engine",[yV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),SV=yr(qw.prototype,"resourcePool",[bV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qw))||xV),_V,TV,AV,kV,MV,IV,PV,ap,DV,RV,OV,LV,FV,BPe=(_V=Dn(),TV=br(wt.Systems),AV=zl(wt.FrameGraphSystem),kV=br(wt.RenderPassFactory),MV=br(wt.ConfigService),IV=br(wt.ResourcePool),_V(PV=(ap=(FV=function(){function r(){dr(this,r),mr(this,"frameGraphSystem",DV,this),mr(this,"renderPassFactory",RV,this),mr(this,"configService",OV,this),mr(this,"resourcePool",LV,this)}return _r(r,[{key:"execute",value:function(){var t=kn(ar.mark(function n(i){var a,o,s,l,u,c,f,d;return ar.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:a=this.renderPassFactory(np.IDENTIFIER),o=a.setup,s=a.execute,this.frameGraphSystem.addPass(np.IDENTIFIER,o,s),l=this.renderPassFactory(Kw.IDENTIFIER),u=l.setup,c=l.execute,f=l.tearDown,d=this.frameGraphSystem.addPass(Kw.IDENTIFIER,u,c,f),this.frameGraphSystem.present(d.data.output);case 5:case"end":return v.stop()}},n,this)}));function e(n){return t.apply(this,arguments)}return e}()},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(e,n){var i=this.renderPassFactory(SM.IDENTIFIER);return i.pick(e,n)}}]),r}(),FV),DV=yr(ap.prototype,"frameGraphSystem",[TV,AV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),RV=yr(ap.prototype,"renderPassFactory",[kV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),OV=yr(ap.prototype,"configService",[MV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),LV=yr(ap.prototype,"resourcePool",[IV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ap))||PV);function $Pe(r){var t=zPe();return function(){var n=Rn(r),i;if(t){var a=Rn(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return po(this,i)}}function zPe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var GPe=function(r){vo(e,r);var t=$Pe(e);function e(n){var i;return dr(this,e),i=t.call(this,n),i.parentID=void 0,Object.assign($i(i),n),i}return e}(Od),NV,BV,$V,zV,GV,Ry,UV,VV,HV,WV,UPe=(NV=Dn(),BV=br(wt.HierarchyComponentManager),$V=br(wt.TransformComponentManager),zV=br(wt.MeshComponentManager),NV(GV=(Ry=(WV=function(){function r(){dr(this,r),mr(this,"hierarchy",UV,this),mr(this,"transform",VV,this),mr(this,"mesh",HV,this)}return _r(r,[{key:"execute",value:function(){var t=kn(ar.mark(function n(){return ar.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return a.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var e=this;this.transform.forEach(function(n,i){(i.isDirty()||i.isLocalDirty())&&(e.setMeshAABBDirty(e.mesh.getComponentByEntity(n)),i.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var e=this;this.hierarchy.forEach(function(n,i){var a=e.transform.getComponentByEntity(n),o=e.transform.getComponentByEntity(i.parentID);a!==null&&o!==null&&a.updateTransformWithParent(o)})}},{key:"attach",value:function(e,n,i){this.hierarchy.contains(e)&&this.detach(e),this.hierarchy.create(e,{parentID:n});var a=this.mesh.getComponentByEntity(n);if(this.setMeshAABBDirty(a),a&&a.children.indexOf(e)===-1&&a.children.push(e),this.hierarchy.getCount()>1)for(var o=this.hierarchy.getCount()-1;o>0;--o)for(var s=this.hierarchy.getEntity(o),l=0;l<o;++l){var u=this.hierarchy.getComponent(l);if(u.parentID===s){this.hierarchy.moveItem(o,l),++o;break}}this.hierarchy.getComponentByEntity(e);var c=this.transform.getComponentByEntity(n);c===null&&(c=this.transform.create(n));var f=this.transform.getComponentByEntity(e);f===null&&(f=this.transform.create(e),c=this.transform.getComponentByEntity(n)),f.parent=c,!i&&c&&(f.matrixTransform(qx(Bo(),c.worldTransform)),f.updateTransform()),c&&f.updateTransformWithParent(c)}},{key:"detach",value:function(e){var n=this.hierarchy.getComponentByEntity(e);if(n!==null){var i=this.transform.getComponentByEntity(e);i!==null&&(i.parent=null,i.applyTransform()),this.hierarchy.removeKeepSorted(e);var a=this.mesh.getComponentByEntity(n.parentID);if(a){var o=a.children.indexOf(e);a.children.splice(o,1)}this.setMeshAABBDirty(a)}}},{key:"detachChildren",value:function(e){var n=this.mesh.getComponentByEntity(e);n&&(n.children=[]);for(var i=0;i<this.hierarchy.getCount();){var a;if(((a=this.hierarchy.getComponent(i))===null||a===void 0?void 0:a.parentID)===e){var o=this.hierarchy.getEntity(i);this.detach(o)}else++i}}},{key:"setMeshAABBDirty",value:function(e){e&&(e.aabbDirty=!0)}}]),r}(),WV),UV=yr(Ry.prototype,"hierarchy",[BV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),VV=yr(Ry.prototype,"transform",[$V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),HV=yr(Ry.prototype,"mesh",[zV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ry))||GV);function VPe(r){var t=HPe();return function(){var n=Rn(r),i;if(t){var a=Rn(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return po(this,i)}}function HPe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var jV=function(r){vo(e,r);var t=VPe(e);function e(n){var i;return dr(this,e),i=t.call(this,n),i.dirtyFlag=void 0,i.localDirtyFlag=void 0,i.parent=null,i.localPosition=en(0,0,0),i.localRotation=CT(0,0,0,1),i.localScale=en(1,1,1),i.localTransform=Bo(),i.position=en(0,0,0),i.rotation=CT(0,0,0,1),i.scaling=en(1,1,1),i.worldTransform=Bo(),i.matrixTransform=function(){var a=Bo();return function(o){od(a,i.getLocalTransform(),o),Tv(i.localScale,a),xm(i.localPosition,a),wm(i.localRotation,a)}}(),i.rotateRollPitchYaw=function(){var a=wa(),o=wa(),s=wa();return function(l,u,c){i.setDirty(),ST(a,l,0,0),ST(o,0,u,0),ST(s,0,0,c),Os(i.localRotation,a,i.localRotation),Os(i.localRotation,i.localRotation,o),Os(i.localRotation,s,i.localRotation),kv(i.localRotation,i.localRotation)}}(),i.lerp=function(){var a=Vn(),o=wa(),s=Vn(),l=Vn(),u=wa(),c=Vn();return function(f,d,h){i.setDirty(),Tv(a,f.worldTransform),xm(s,f.worldTransform),wm(o,f.worldTransform),Tv(l,d.worldTransform),xm(c,d.worldTransform),wm(u,d.worldTransform),sd(i.localScale,a,l,h),Qx(i.localRotation,o,u,h),sd(i.localPosition,s,c,h)}}(),i.translate=function(){var a=Vn();return function(o){return wu(a,i.getPosition(),o),i.setPosition(a),i.setDirty(!0),$i(i)}}(),i.translateLocal=function(){return function(a){return Gce(a,a,i.localRotation),wu(i.localPosition,i.localPosition,a),i.setLocalDirty(!0),$i(i)}}(),i.setPosition=function(){var a=Bo();return function(o){return i.position=o,i.setLocalDirty(!0),i.parent===null?Xa(i.localPosition,o):(mT(a,i.parent.worldTransform),qx(a,a),xT(i.localPosition,o,a)),$i(i)}}(),i.rotate=function(){var a=wa();return function(o){if(i.parent===null)Os(i.localRotation,i.localRotation,o),kv(i.localRotation,i.localRotation);else{var s=i.getRotation(),l=i.parent.getRotation();Tm(a,l),n3(a,a),Os(a,a,o),Os(i.localRotation,o,s),kv(i.localRotation,i.localRotation)}return i.setLocalDirty(),$i(i)}}(),i.rotateLocal=function(){return function(a){return Os(i.localRotation,i.localRotation,a),kv(i.localRotation,i.localRotation),i.setLocalDirty(!0),$i(i)}}(),i.setRotation=function(){var a=wa();return function(o){return i.parent===null?Tm(i.localRotation,o):(Tm(a,i.parent.getRotation()),n3(a,a),Tm(i.localRotation,a),Wce(i.localRotation,i.localRotation,o)),i.setLocalDirty(!0),$i(i)}}(),i}return _r(e,[{key:"setLocalPosition",value:function(i){Xa(this.localPosition,i),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(i){Xa(this.localScale,i),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(i){return Tm(this.localRotation,i),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;i?this.dirtyFlag|=e.DIRTY:this.dirtyFlag&=~e.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;i?(this.localDirtyFlag|=e.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~e.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&this.parent===null&&(mT(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(i){od(this.worldTransform,i.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),Tv(this.localScale,this.worldTransform),xm(this.localPosition,this.worldTransform),wm(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=en(0,0,0),this.localRotation=CT(0,0,0,1),this.localScale=en(1,1,1)}},{key:"scaleLocal",value:function(i){return this.setLocalDirty(),$ce(this.localScale,this.localScale,i),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(Rce(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return!this.isLocalDirty()&&!this.isDirty()?this.worldTransform:(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform)}},{key:"getPosition",value:function(){return xm(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return wm(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return Tv(this.scaling,this.worldTransform),this.scaling}}]),e}(Od);jV.DIRTY=1<<0;var YV,XV,qV,CM,KV,ZV,WPe=(YV=Dn(),XV=br(wt.RenderEngine),YV(qV=(CM=(ZV=function(){function r(){dr(this,r),mr(this,"engine",KV,this),this.resourcePool={}}return _r(r,[{key:"getOrCreateResource",value:function(e){if(!this.resourcePool[e.name]){var n=e.descriptor,i=n.width,a=n.height,o=n.usage;this.resourcePool[e.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:i,height:a,wrapS:Ue.CLAMP_TO_EDGE,wrapT:Ue.CLAMP_TO_EDGE,usage:o})})}return this.resourcePool[e.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),r}(),ZV),KV=yr(CM.prototype,"engine",[XV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),CM))||qV);function jPe(r){var t=YPe();return function(){var n=Rn(r),i;if(t){var a=Rn(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return po(this,i)}}function YPe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var XPe=function(r){vo(e,r);var t=jPe(e);function e(n){var i;return dr(this,e),i=t.call(this,n),i.name=void 0,i.name=n.name||"",i}return e}(Od),QV,JV,eH,qPe=(QV=Dn(),QV(JV=(eH=function(){function r(){dr(this,r),this.config=void 0}return _r(r,[{key:"get",value:function(){return this.config}},{key:"set",value:function(e){this.config=e}}]),r}(),eH))||JV),tH,rH,nH;(function(r){r.PANSTART="PANSTART",r.PANEND="PANEND",r.PANMOVE="PANMOVE",r.PINCH="PINCH",r.KEYDOWN="KEYDOWN",r.KEYUP="KEYUP",r.HOVER="HOVER"})(nH||(nH={}));var KPe=(tH=Dn(),tH(rH=function(){function r(){dr(this,r)}return _r(r,[{key:"listen",value:function(e){}},{key:"on",value:function(e,n){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),r}())||rH);function ZPe(r){var t=0;switch(r){case"vec2":case"ivec2":t=2;break;case"vec3":case"ivec3":t=3;break;case"vec4":case"ivec4":case"mat2":t=4;break;case"mat3":t=9;break;case"mat4":t=16;break}return t}var QPe=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function iH(r){var t={};return r=r.replace(QPe,function(e,n,i){var a=i.split(":"),o=a[0].trim(),s="";switch(a.length>1&&(s=a[1].trim()),n){case"bool":s=s==="true";break;case"float":case"int":s=Number(s);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":s?s=s.replace("[","").replace("]","").split(",").reduce(function(l,u){return l.push(Number(u.trim())),l},[]):s=new Array(ZPe(n)).fill(0);break}return t[o]=s,"uniform ".concat(n," ").concat(o,`;
`)}),{content:r,uniforms:t}}function JPe(r){return r.filter(function(t,e,n){return n.indexOf(t)===e})}var aH,oH,sH;function lH(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function Oy(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?lH(Object(e),!0).forEach(function(n){ft(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):lH(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}var eDe=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,tDe=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,rDe=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`,nDe=/precision\s+(high|low|medium)p\s+float/,iDe=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,aDe=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,oDe=(aH=Dn(),aH(oH=(sH=function(){function r(){dr(this,r),this.moduleCache={},this.rawContentCache={}}return _r(r,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:tDe,fs:eDe}),this.registerModule("sdf2d",{vs:"",fs:rDe})}},{key:"registerModule",value:function(e,n){if(!this.rawContentCache[e]){var i=n.vs,a=i===void 0?"":i,o=n.fs,s=o===void 0?"":o,l=n.uniforms,u=iH(a),c=u.content,f=u.uniforms,d=iH(s),h=d.content,v=d.uniforms;this.rawContentCache[e]={fs:h,uniforms:Oy(Oy(Oy({},f),v),l),vs:c}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(e){var n=this;if(this.moduleCache[e])return this.moduleCache[e];var i=this.rawContentCache[e].vs||"",a=this.rawContentCache[e].fs||"",o=this.processModule(i,[],"vs"),s=o.content,l=o.includeList,u=this.processModule(a,[],"fs"),c=u.content,f=u.includeList,d=c,h=JPe(l.concat(f).concat(e)).reduce(function(v,p){return Oy(Oy({},v),n.rawContentCache[p].uniforms)},{});return nDe.test(c)||(d=iDe+c),this.moduleCache[e]={fs:d.trim(),uniforms:h,vs:s.trim()},this.moduleCache[e]}},{key:"processModule",value:function(e,n,i){var a=this,o=e.replace(aDe,function(s,l){var u=l.split(" "),c=u[0].replace(/"/g,"");if(n.indexOf(c)>-1)return"";var f=a.rawContentCache[c][i];n.push(c);var d=a.processModule(f||"",n,i),h=d.content;return h});return{content:o,includeList:n}}}]),r}(),sH))||oH),Iu=new U8;Iu.bind(wt.ShaderModuleService).to(oDe).inSingletonScope();Iu.bind(wt.NameComponentManager).toConstantValue(new Ld(XPe));Iu.bind(wt.HierarchyComponentManager).toConstantValue(new Ld(GPe));Iu.bind(wt.TransformComponentManager).toConstantValue(new Ld(jV));Iu.bind(wt.MeshComponentManager).toConstantValue(new Ld(_Pe));Iu.bind(wt.CullableComponentManager).toConstantValue(new Ld(SPe));Iu.bind(wt.GeometryComponentManager).toConstantValue(new Ld(vPe));Iu.bind(wt.MaterialComponentManager).toConstantValue(new Ld(yPe));function sDe(){var r=new U8;return r.parent=Iu,r.bind(wt.Systems).to(UPe).inSingletonScope().whenTargetNamed(wt.SceneGraphSystem),r.bind(wt.Systems).to(LIe).inSingletonScope().whenTargetNamed(wt.FrameGraphSystem),r.bind(wt.Systems).to(PPe).inSingletonScope().whenTargetNamed(wt.MeshSystem),r.bind(wt.Systems).to(pPe).inSingletonScope().whenTargetNamed(wt.GeometrySystem),r.bind(wt.Systems).to(bPe).inSingletonScope().whenTargetNamed(wt.MaterialSystem),r.bind(wt.Systems).to(BPe).inSingletonScope().whenTargetNamed(wt.RendererSystem),r.bind(wt.ResourcePool).to(WPe).inSingletonScope(),r.bind(wt.ConfigService).to(qPe).inSingletonScope(),r.bind(wt.InteractorService).to(KPe).inSingletonScope(),r.bind(wt.RenderPass).to(np).inSingletonScope().whenTargetNamed(np.IDENTIFIER),r.bind(wt.RenderPass).to(Kw).inSingletonScope().whenTargetNamed(Kw.IDENTIFIER),r.bind(wt.RenderPass).to(SM).inSingletonScope().whenTargetNamed(SM.IDENTIFIER),r.bind(wt.RenderPassFactory).toFactory(function(t){return function(e){return t.container.getNamed(wt.RenderPass,e)}}),r}function EM(r){for(var t=new bM,e=en(r[0],r[1],r[2]),n=en(r[0],r[1],r[2]),i=3;i<r.length;){var a=r[i++],o=r[i++],s=r[i++];a<e[0]&&(e[0]=a),o<e[1]&&(e[1]=o),s<e[2]&&(e[2]=s),a>n[0]&&(n[0]=a),o>n[1]&&(n[1]=o),s>n[2]&&(n[2]=s)}return t.setMinMax(e,n),t}var Go=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);Vn();Vn();Vn();Vn();Vn();Vn();var uH;(function(r){r.Normal="normal",r.PostProcessing="post-processing"})(uH||(uH={}));var Nd;(function(r){r.Void="Void",r.Boolean="Boolean",r.Float="Float",r.Uint32="Uint32",r.Int32="Int32",r.Vector="Vector",r.Vector2Float="vec2<f32>",r.Vector3Float="vec3<f32>",r.Vector4Float="vec4<f32>",r.Vector2Boolean="vec2<bool>",r.Vector3Boolean="vec3<bool>",r.Vector4Boolean="vec4<bool>",r.Vector2Uint="vec2<u32>",r.Vector3Uint="vec3<u32>",r.Vector4Uint="vec4<u32>",r.Vector2Int="vec2<i32>",r.Vector3Int="vec3<i32>",r.Vector4Int="vec4<i32>",r.Matrix="Matrix",r.Matrix3x3Float="mat3x3<f32>",r.Matrix4x4Float="mat4x4<i32>",r.Struct="Struct",r.FloatArray="Float[]",r.Vector4FloatArray="vec4<f32>[]"})(Nd||(Nd={}));var cH;(function(r){r.Program="Program",r.Identifier="Identifier",r.VariableDeclaration="VariableDeclaration",r.BlockStatement="BlockStatement",r.ReturnStatement="ReturnStatement",r.FunctionDeclaration="FunctionDeclaration",r.VariableDeclarator="VariableDeclarator",r.AssignmentExpression="AssignmentExpression",r.LogicalExpression="LogicalExpression",r.BinaryExpression="BinaryExpression",r.ArrayExpression="ArrayExpression",r.UnaryExpression="UnaryExpression",r.UpdateExpression="UpdateExpression",r.FunctionExpression="FunctionExpression",r.MemberExpression="MemberExpression",r.ConditionalExpression="ConditionalExpression",r.ExpressionStatement="ExpressionStatement",r.CallExpression="CallExpression",r.NumThreadStatement="NumThreadStatement",r.StorageStatement="StorageStatement",r.DoWhileStatement="DoWhileStatement",r.WhileStatement="WhileStatement",r.ForStatement="ForStatement",r.BreakStatement="BreakStatement",r.ContinueStatement="ContinueStatement",r.IfStatement="IfStatement",r.ImportedFunctionStatement="ImportedFunctionStatement"})(cH||(cH={}));var Wc;(function(r){r.Input="Input",r.Output="Output",r.Uniform="Uniform",r.Workgroup="Workgroup",r.UniformConstant="UniformConstant",r.Image="Image",r.StorageBuffer="StorageBuffer",r.Private="Private",r.Function="Function"})(Wc||(Wc={}));var Ly;(function(r){r.GLSL100="GLSL100",r.GLSL450="GLSL450",r.WGSL="WGSL"})(Ly||(Ly={}));var lDe="__DefineValuePlaceholder__";function _M(r){return typeof r=="number"}function Pu(r){return r===void 0?0:r>360||r<-360?r%360:r}function Bd(r,t,e){return _M(r)?en(r,t,e):r.length===3?xu(r):en(r[0],r[1],r[2])}var fH=function(){function r(t,e){dr(this,r),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=t,this.matrix=Ice(e.matrix),this.right=xu(e.right),this.up=xu(e.up),this.forward=xu(e.forward),this.position=xu(e.position),this.focalPoint=xu(e.focalPoint),this.distanceVector=xu(e.distanceVector),this.azimuth=e.azimuth,this.elevation=e.elevation,this.roll=e.roll,this.relAzimuth=e.relAzimuth,this.relElevation=e.relElevation,this.relRoll=e.relRoll,this.dollyingStep=e.dollyingStep,this.distance=e.distance}return _r(r,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(e){e.matrix=mT(e.matrix,this.matrix),e.right=Xa(e.right,this.right),e.up=Xa(e.up,this.up),e.forward=Xa(e.forward,this.forward),e.position=Xa(e.position,this.position),e.focalPoint=Xa(e.focalPoint,this.focalPoint),e.distanceVector=Xa(e.distanceVector,this.distanceVector),e.azimuth=this.azimuth,e.elevation=this.elevation,e.roll=this.roll,e.relAzimuth=this.relAzimuth,e.relElevation=this.relElevation,e.relRoll=this.relRoll,e.dollyingStep=this.dollyingStep,e.distance=this.distance}}]),r}(),dH,hH,vH,TM,pH,gH,mH,Jn;(function(r){r.ORBITING="ORBITING",r.EXPLORING="EXPLORING",r.TRACKING="TRACKING"})(Jn||(Jn={}));var Zw;(function(r){r.DEFAULT="DEFAULT",r.ROTATIONAL="ROTATIONAL",r.TRANSLATIONAL="TRANSLATIONAL",r.CINEMATIC="CINEMATIC"})(Zw||(Zw={}));var $d;(function(r){r.ORTHOGRAPHIC="ORTHOGRAPHIC",r.PERSPECTIVE="PERSPECTIVE"})($d||($d={}));var Du=Math.PI/180,jc=180/Math.PI,yH=(dH=Dn(),hH=br(wt.InteractorService),dH(vH=(TM=(mH=gH=function(){function r(){dr(this,r),this.matrix=Bo(),this.right=en(1,0,0),this.up=en(0,1,0),this.forward=en(0,0,1),this.position=en(0,0,1),this.focalPoint=en(0,0,0),this.distanceVector=en(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.rotateWorld=!1,mr(this,"interactor",pH,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=Bo(),this.view=void 0,this.following=void 0,this.type=Jn.EXPLORING,this.trackingMode=Zw.DEFAULT,this.projectionMode=$d.PERSPECTIVE,this.frustum=new APe,this.landmarks=[],this.landmarkAnimationID=void 0}return _r(r,[{key:"clone",value:function(){var e=new r;return e.setType(this.type,void 0),e.interactor=this.interactor,e}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(e,n){return this.type=e,this.type===Jn.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Jn.TRACKING&&n!==void 0&&this.setTrackingMode(n),this}},{key:"setProjectionMode",value:function(e){return this.projectionMode=e,this}},{key:"setTrackingMode",value:function(e){if(this.type!==Jn.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=e,this}},{key:"setWorldRotation",value:function(e){this.rotateWorld=e,this._getAngles()}},{key:"getViewTransform",value:function(){return qx(Bo(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(e){return this.matrix=e,this._update(),this}},{key:"setAspect",value:function(e){return this.setPerspective(this.near,this.far,this.fov,e),this}},{key:"setViewOffset",value:function(e,n,i,a,o,s){return this.aspect=e/n,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=a,this.view.width=o,this.view.height=s,this.projectionMode===$d.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===$d.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(e,n,i,a){return this.projectionMode=$d.PERSPECTIVE,this.fov=i,this.near=e,this.far=n,this.aspect=a,Lce(this.perspective,this.fov*Du,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(e,n,i,a,o,s){this.projectionMode=$d.ORTHOGRAPHIC,this.rright=n,this.left=e,this.top=i,this.bottom=a,this.near=o,this.far=s;var l=(this.rright-this.left)/(2*this.zoom),u=(this.top-this.bottom)/(2*this.zoom),c=(this.rright+this.left)/2,f=(this.top+this.bottom)/2,d=c-l,h=c+l,v=f+u,p=f-u;if(this.view!==void 0&&this.view.enabled){var g=(this.rright-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=g*this.view.offsetX,h=d+g*this.view.width,v-=m*this.view.offsetY,p=v-m*this.view.height}return Nce(this.perspective,d,h,v,p,o,s),this}},{key:"setPosition",value:function(e,n,i){return this._setPosition(e,n,i),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(e,n,i){var a=en(0,1,0);if(this.focalPoint=Bd(e,n,i),this.trackingMode===Zw.CINEMATIC){var o=yT(Vn(),this.focalPoint,this.position);e=o[0],n=o[1],i=o[2];var s=Kx(o),l=Math.asin(n/s)*jc,u=90+Math.atan2(i,e)*jc,c=Bo();Dce(c,c,u*Du),Pce(c,c,l*Du),a=xT(Vn(),[0,1,0],c)}return qx(this.matrix,Bce(Bo(),this.position,this.focalPoint,a)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(e){if(!(this.distance===e||e<0)){this.distance=e,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var n=Vn();e=this.distance;var i=this.forward,a=this.focalPoint;return n[0]=e*i[0]+a[0],n[1]=e*i[1]+a[1],n[2]=e*i[2]+a[2],this._setPosition(n),this}}},{key:"setMaxDistance",value:function(e){return this.maxDistance=e,this}},{key:"setMinDistance",value:function(e){return this.minDistance=e,this}},{key:"changeAzimuth",value:function(e){return this.setAzimuth(this.azimuth+e),this}},{key:"changeElevation",value:function(e){return this.setElevation(this.elevation+e),this}},{key:"changeRoll",value:function(e){return this.setRoll(this.roll+e),this}},{key:"setAzimuth",value:function(e){return this.azimuth=Pu(e),this.computeMatrix(),this._getAxes(),this.type===Jn.ORBITING||this.type===Jn.EXPLORING?this._getPosition():this.type===Jn.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(e){return this.elevation=Pu(e),this.computeMatrix(),this._getAxes(),this.type===Jn.ORBITING||this.type===Jn.EXPLORING?this._getPosition():this.type===Jn.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(e){return this.roll=Pu(e),this.computeMatrix(),this._getAxes(),this.type===Jn.ORBITING||this.type===Jn.EXPLORING?this._getPosition():this.type===Jn.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(e,n,i){if(this.type===Jn.EXPLORING){e=Pu(e),n=Pu(n),i=Pu(i);var a=ld(wa(),[1,0,0],(this.rotateWorld?1:-1)*n*Du),o=ld(wa(),[0,1,0],(this.rotateWorld?1:-1)*e*Du),s=ld(wa(),[0,0,1],i*Du),l=Os(wa(),o,a);l=Os(wa(),l,s);var u=JB(Bo(),l);bm(this.matrix,this.matrix,[0,0,-this.distance]),od(this.matrix,this.matrix,u),bm(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+n)>90)return;this.relElevation=Pu(n),this.relAzimuth=Pu(e),this.relRoll=Pu(i),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===Jn.ORBITING||this.type===Jn.EXPLORING?this._getPosition():this.type===Jn.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(e,n){var i=Bd(e,n,0),a=xu(this.position);return wu(a,a,Sm(Vn(),this.right,i[0])),wu(a,a,Sm(Vn(),this.up,i[1])),this._setPosition(a),this}},{key:"dolly",value:function(e){var n=this.forward,i=xu(this.position),a=e*this.dollyingStep,o=this.distance+e*this.dollyingStep;return a=Math.max(Math.min(o,this.maxDistance),this.minDistance)-this.distance,i[0]+=a*n[0],i[1]+=a*n[1],i[2]+=a*n[2],this._setPosition(i),this.type===Jn.ORBITING||this.type===Jn.EXPLORING?this._getDistance():this.type===Jn.TRACKING&&wu(this.focalPoint,i,this.distanceVector),this}},{key:"createLandmark",value:function(e,n){var i=this.clone();i.setPosition(n.position),i.setFocalPoint(n.focalPoint),n.roll!==void 0&&i.setRoll(n.roll);var a=new fH(e,i);return this.landmarks.push(a),a}},{key:"setLandmark",value:function(e){var n=new fH(e,this);return this.landmarks.push(n),this}},{key:"gotoLandmark",value:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,a=this.landmarks.find(function(f){return f.name===e});if(a){if(i===0){a.retrieve(this);return}this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var o=a.getPosition(),s=a.getFocalPoint(),l=a.getRoll(),u,c=function f(d){u===void 0&&(u=d);var h=d-u,v=(1-Math.cos(h/i*Math.PI))/2,p=Vn(),g=Vn(),m=0;sd(p,n.focalPoint,s,v),sd(g,n.position,o,v),m=n.roll*(1-v)+l*v,n.setFocalPoint(p),n.setPosition(g),n.setRoll(m),n.computeMatrix();var y=e3(p,s)+e3(g,o);if(!(y>.01)){n.setFocalPoint(p),n.setPosition(g),n.setRoll(m),n.computeMatrix(),n.interactor.connect();return}h<i&&(n.landmarkAnimationID=window.requestAnimationFrame(f))};window.requestAnimationFrame(c)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var e,n,i=ld(wa(),[0,0,1],this.roll*Du);QB(this.matrix),e=ld(wa(),[1,0,0],(this.rotateWorld&&this.type!==Jn.TRACKING||this.type===Jn.TRACKING?1:-1)*this.elevation*Du),n=ld(wa(),[0,1,0],(this.rotateWorld&&this.type!==Jn.TRACKING||this.type===Jn.TRACKING?1:-1)*this.azimuth*Du);var a=Os(wa(),n,e);a=Os(wa(),a,i);var o=JB(Bo(),a);this.type===Jn.ORBITING||this.type===Jn.EXPLORING?(bm(this.matrix,this.matrix,this.focalPoint),od(this.matrix,this.matrix,o),bm(this.matrix,this.matrix,[0,0,this.distance])):this.type===Jn.TRACKING&&(bm(this.matrix,this.matrix,this.position),od(this.matrix,this.matrix,o))}},{key:"_setPosition",value:function(e,n,i){this.position=Bd(e,n,i);var a=this.matrix;a[12]=this.position[0],a[13]=this.position[1],a[14]=this.position[2],a[15]=1}},{key:"_getAxes",value:function(){Xa(this.right,Bd(_m(Em(),[1,0,0,0],this.matrix))),Xa(this.up,Bd(_m(Em(),[0,1,0,0],this.matrix))),Xa(this.forward,Bd(_m(Em(),[0,0,1,0],this.matrix))),Cm(this.right,this.right),Cm(this.up,this.up),Cm(this.forward,this.forward)}},{key:"_getAngles",value:function(){var e=this.distanceVector[0],n=this.distanceVector[1],i=this.distanceVector[2],a=Kx(this.distanceVector);if(a===0){this.elevation=0,this.azimuth=0;return}this.type===Jn.TRACKING?(this.elevation=Math.asin(n/a)*jc,this.azimuth=Math.atan2(-e,-i)*jc):this.rotateWorld?(this.elevation=Math.asin(n/a)*jc,this.azimuth=Math.atan2(-e,-i)*jc):(this.elevation=-Math.asin(n/a)*jc,this.azimuth=-Math.atan2(-e,-i)*jc)}},{key:"_getPosition",value:function(){Xa(this.position,Bd(_m(Em(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){Pl(this.distanceVector,[0,0,-this.distance],jB(Ev(),this.matrix)),wu(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=yT(Vn(),this.focalPoint,this.position),this.distance=Kx(this.distanceVector),this.dollyingStep=this.distance/100}}]),r}(),gH.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},mH),pH=yr(TM.prototype,"interactor",[hH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),TM))||vH),bH,xH,wH,AM,SH,Fy,CH,Yc=(bH=Dn(),xH=br(wt.GeometryComponentManager),bH(wH=(AM=(CH=Fy=function(){function r(){dr(this,r),this.config=void 0,mr(this,"geometry",SH,this),this.entity=void 0,this.component=void 0}return _r(r,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(e){this.config=e}},{key:"setEntity",value:function(e){this.entity=e,this.component=this.geometry.create(e),this.component.entity=e,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),r}(),Fy.BOX="box",Fy.SPHERE="sphere",Fy.PLANE="plane",Fy.MERGED="merged",CH),SH=yr(AM.prototype,"geometry",[xH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),AM))||wH),ti=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.TextureCompressionBC="texture-compression-bc"}(t.ExtensionName||(t.ExtensionName={})),function(e){e.ClampToEdge="clamp-to-edge",e.Repeat="repeat",e.MirrorRepeat="mirror-repeat"}(t.AddressMode||(t.AddressMode={})),function(e){e.UniformBuffer="uniform-buffer",e.StorageBuffer="storage-buffer",e.ReadonlyStorageBuffer="readonly-storage-buffer",e.Sampler="sampler",e.ComparisonSampler="comparison-sampler",e.SampledTexture="sampled-texture",e.ReadonlyStorageTexture="readonly-storage-texture",e.WriteonlyStorageTexture="writeonly-storage-texture"}(t.BindingType||(t.BindingType={})),function(e){e.Zero="zero",e.One="one",e.SrcColor="src-color",e.OneMinusSrcColor="one-minus-src-color",e.SrcAlpha="src-alpha",e.OneMinusSrcAlpha="one-minus-src-alpha",e.DstColor="dst-color",e.OneMinusDstColor="one-minus-dst-color",e.DstAlpha="dst-alpha",e.OneMinusDstAlpha="one-minus-dst-alpha",e.SrcAlphaSaturated="src-alpha-saturated",e.BlendColor="blend-color",e.OneMinusBlendColor="one-minus-blend-color"}(t.BlendFactor||(t.BlendFactor={})),function(e){e.Add="add",e.Subtract="subtract",e.ReverseSubtract="reverse-subtract",e.Min="min",e.Max="max"}(t.BlendOperation||(t.BlendOperation={})),function(e){e.Never="never",e.Less="less",e.Equal="equal",e.LessEqual="less-equal",e.Greater="greater",e.NotEqual="not-equal",e.GreaterEqual="greater-equal",e.Always="always"}(t.CompareFunction||(t.CompareFunction={})),function(e){e.None="none",e.Front="front",e.Back="back"}(t.CullMode||(t.CullMode={})),function(e){e.Nearest="nearest",e.Linear="linear"}(t.FilterMode||(t.FilterMode={})),function(e){e.CCW="ccw",e.CW="cw"}(t.FrontFace||(t.FrontFace={})),function(e){e.Uint16="uint16",e.Uint32="uint32"}(t.IndexFormat||(t.IndexFormat={})),function(e){e.Vertex="vertex",e.Instance="instance"}(t.InputStepMode||(t.InputStepMode={})),function(e){e.Load="load"}(t.LoadOp||(t.LoadOp={})),function(e){e.PointList="point-list",e.LineList="line-list",e.LineStrip="line-strip",e.TriangleList="triangle-list",e.TriangleStrip="triangle-strip"}(t.PrimitiveTopology||(t.PrimitiveTopology={})),function(e){e.Keep="keep",e.Zero="zero",e.Replace="replace",e.Invert="invert",e.IncrementClamp="increment-clamp",e.DecrementClamp="decrement-clamp",e.IncrementWrap="increment-wrap",e.DecrementWrap="decrement-wrap"}(t.StencilOperation||(t.StencilOperation={})),function(e){e.Store="store",e.Clear="clear"}(t.StoreOp||(t.StoreOp={})),function(e){e.E1d="1d",e.E2d="2d",e.E3d="3d"}(t.TextureDimension||(t.TextureDimension={})),function(e){e.R8Unorm="r8unorm",e.R8Snorm="r8snorm",e.R8Uint="r8uint",e.R8Sint="r8sint",e.R16Uint="r16uint",e.R16Sint="r16sint",e.R16Float="r16float",e.RG8Unorm="rg8unorm",e.RG8Snorm="rg8snorm",e.RG8Uint="rg8uint",e.RG8Sint="rg8sint",e.R32Uint="r32uint",e.R32Sint="r32sint",e.R32Float="r32float",e.RG16Uint="rg16uint",e.RG16Sint="rg16sint",e.RG16Float="rg16float",e.RGBA8Unorm="rgba8unorm",e.RGBA8UnormSRGB="rgba8unorm-srgb",e.RGBA8Snorm="rgba8snorm",e.RGBA8Uint="rgba8uint",e.RGBA8Sint="rgba8sint",e.BGRA8Unorm="bgra8unorm",e.BGRA8UnormSRGB="bgra8unorm-srgb",e.RGB10A2Unorm="rgb10a2unorm",e.RG11B10Float="rg11b10float",e.RG32Uint="rg32uint",e.RG32Sint="rg32sint",e.RG32Float="rg32float",e.RGBA16Uint="rgba16uint",e.RGBA16Sint="rgba16sint",e.RGBA16Float="rgba16float",e.RGBA32Uint="rgba32uint",e.RGBA32Sint="rgba32sint",e.RGBA32Float="rgba32float",e.Depth32Float="depth32float",e.Depth24Plus="depth24plus",e.Depth24PlusStencil8="depth24plus-stencil8"}(t.TextureFormat||(t.TextureFormat={})),function(e){e.Float="float",e.Sint="sint",e.Uint="uint"}(t.TextureComponentType||(t.TextureComponentType={})),function(e){e.E1d="1d",e.E2d="2d",e.E2dArray="2d-array",e.Cube="cube",e.CubeArray="cube-array",e.E3d="3d"}(t.TextureViewDimension||(t.TextureViewDimension={})),function(e){e.Uchar2="uchar2",e.Uchar4="uchar4",e.Char2="char2",e.Char4="char4",e.Uchar2Norm="uchar2norm",e.Uchar4Norm="uchar4norm",e.Char2Norm="char2norm",e.Char4Norm="char4norm",e.Ushort2="ushort2",e.Ushort4="ushort4",e.Short2="short2",e.Short4="short4",e.Ushort2Norm="ushort2norm",e.Ushort4Norm="ushort4norm",e.Short2Norm="short2norm",e.Short4Norm="short4norm",e.Half2="half2",e.Half4="half4",e.Float="float",e.Float2="float2",e.Float3="float3",e.Float4="float4",e.Uint="uint",e.Uint2="uint2",e.Uint3="uint3",e.Uint4="uint4",e.Int="int",e.Int2="int2",e.Int3="int3",e.Int4="int4"}(t.VertexFormat||(t.VertexFormat={})),function(e){e.All="all",e.StencilOnly="stencil-only",e.DepthOnly="depth-only"}(t.TextureAspect||(t.TextureAspect={})),function(e){e.Error="error",e.Warning="warning",e.Info="info"}(t.CompilationMessageType||(t.CompilationMessageType={})),function(e){e.Occlusion="occlusion"}(t.QueryType||(t.QueryType={})),function(e){e[e.MapRead=1]="MapRead",e[e.MapWrite=2]="MapWrite",e[e.CopySrc=4]="CopySrc",e[e.CopyDst=8]="CopyDst",e[e.Index=16]="Index",e[e.Vertex=32]="Vertex",e[e.Uniform=64]="Uniform",e[e.Storage=128]="Storage",e[e.Indirect=256]="Indirect",e[e.QueryResolve=512]="QueryResolve"}(t.BufferUsage||(t.BufferUsage={})),function(e){e[e.Red=1]="Red",e[e.Green=2]="Green",e[e.Blue=4]="Blue",e[e.Alpha=8]="Alpha",e[e.All=15]="All"}(t.ColorWrite||(t.ColorWrite={})),function(e){e[e.Vertex=1]="Vertex",e[e.Fragment=2]="Fragment",e[e.Compute=4]="Compute"}(t.ShaderStage||(t.ShaderStage={})),function(e){e[e.CopySrc=1]="CopySrc",e[e.CopyDst=2]="CopyDst",e[e.Sampled=4]="Sampled",e[e.Storage=8]="Storage",e[e.OutputAttachment=16]="OutputAttachment"}(t.TextureUsage||(t.TextureUsage={})),function(e){e[e.Read=1]="Read",e[e.Write=2]="Write"}(t.MapMode||(t.MapMode={}))});xn(ti);ti.ExtensionName;ti.AddressMode;var kM=ti.BindingType,ps=ti.BlendFactor,Ny=ti.BlendOperation,Ru=ti.CompareFunction,Qw=ti.CullMode;ti.FilterMode;var uDe=ti.FrontFace,cDe=ti.IndexFormat;ti.InputStepMode;var op=ti.LoadOp,zd=ti.PrimitiveTopology,MM=ti.StencilOperation,Gd=ti.StoreOp,IM=ti.TextureDimension,sp=ti.TextureFormat;ti.TextureComponentType;var fDe=ti.TextureViewDimension;ti.VertexFormat;var dDe=ti.TextureAspect;ti.CompilationMessageType;ti.QueryType;var Uo=ti.BufferUsage,hDe=ti.ColorWrite,Jw=ti.ShaderStage,Ud=ti.TextureUsage,vDe=ti.MapMode;function EH(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var pDe={}.toString,gDe=function(t,e){return pDe.call(t)==="[object "+e+"]"},mDe=function(r){return Array.isArray?Array.isArray(r):gDe(r,"Array")},yDe=9007199254740991,bDe="[object Arguments]",xDe="[object Array]",wDe="[object Boolean]",SDe="[object Date]",CDe="[object Error]",EDe="[object Function]",_De="[object Map]",TDe="[object Number]",ADe="[object Object]",kDe="[object RegExp]",MDe="[object Set]",IDe="[object String]",PDe="[object WeakMap]",DDe="[object ArrayBuffer]",RDe="[object DataView]",ODe="[object Float32Array]",LDe="[object Float64Array]",FDe="[object Int8Array]",NDe="[object Int16Array]",BDe="[object Int32Array]",$De="[object Uint8Array]",zDe="[object Uint8ClampedArray]",GDe="[object Uint16Array]",UDe="[object Uint32Array]",xi={};xi[ODe]=xi[LDe]=xi[FDe]=xi[NDe]=xi[BDe]=xi[$De]=xi[zDe]=xi[GDe]=xi[UDe]=!0;xi[bDe]=xi[xDe]=xi[DDe]=xi[wDe]=xi[RDe]=xi[SDe]=xi[CDe]=xi[EDe]=xi[_De]=xi[TDe]=xi[ADe]=xi[kDe]=xi[MDe]=xi[IDe]=xi[PDe]=!1;var VDe=Object.prototype,HDe=VDe.toString;function WDe(r){return YDe(r)&&jDe(r.length)&&!!xi[HDe.call(r)]}function jDe(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=yDe}function YDe(r){return!!r&&Gl(r)==="object"}var _H=WDe,TH,AH,kH,MH,eS,IH,PH,DH;function RH(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function OH(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?RH(Object(e),!0).forEach(function(n){ft(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):RH(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}var LH=(TH=Dn(),AH=br(wt.RenderEngine),kH=br(wt.ConfigService),TH(MH=(eS=(DH=function(){function r(){dr(this,r),mr(this,"engine",IH,this),mr(this,"configService",PH,this),this.entity=$l(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return _r(r,[{key:"init",value:function(){var e=this.configService.get(),n=e.canvas,i=e.engineOptions;this.initPromise=this.engine.init(OH({canvas:n||EH(),swapChainFormat:sp.BGRA8Unorm,antialiasing:!1},i))}},{key:"setBundle",value:function(e){this.compiledBundle=JSON.parse(JSON.stringify(e))}},{key:"setDispatch",value:function(e){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=e),this}},{key:"setMaxIteration",value:function(e){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=e),this}},{key:"setBinding",value:function(e,n){var i=this;if(typeof e=="string"){var a=_M(n)||_H(n)||mDe(n);if(this.compiledBundle&&this.compiledBundle.context){var o=this.compiledBundle.context.defines.find(function(l){return l.name===e});if(o)return o.value=n,this;var s=this.compiledBundle.context.uniforms.find(function(l){return l.name===e});s&&(a?(s.data=n,s.isReferer=!1,s.storageClass===Wc.Uniform?this.model&&this.model.updateUniform(e,n):this.model&&this.model.updateBuffer(e,n)):(s.isReferer=!0,s.data=n))}}else Object.keys(e).forEach(function(l){i.setBinding(l,e[l])});return this}},{key:"execute",value:function(){var t=kn(ar.mark(function n(){var i=this,a,o,s=arguments;return ar.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a=s.length>0&&s[0]!==void 0?s[0]:1,!this.dirty){u.next=6;break}return this.compiledBundle.context&&(a>1?this.compiledBundle.context.maxIteration=a:this.compiledBundle.context.maxIteration++),u.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(c){var f=c.isReferer;return f}).forEach(function(c){var f=c.data,d=c.name;i.model.confirmInput(f.model,d)}),o=0;o<a;o++)this.model.run();return this.engine.endFrame(),u.abrupt("return",this);case 12:case"end":return u.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"getOutput",value:function(){var t=kn(ar.mark(function n(){return ar.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",this.model.readData());case 1:case"end":return a.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"compile",value:function(){var t=kn(ar.mark(function n(){var i,a,o;return ar.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.initPromise;case 2:return i=OH({},this.compiledBundle.context),a=this.engine.supportWebGPU?this.engine.useWGSL?Ly.WGSL:Ly.GLSL450:Ly.GLSL100,o=this.compiledBundle.shaders[a],i.defines.filter(function(u){return u.runtime}).forEach(function(u){var c="".concat(lDe).concat(u.name);o=o.replace(c,"".concat(u.value))}),i.shader=o,i.uniforms.forEach(function(u){if(!u.data&&u.storageClass===Wc.StorageBuffer){var c=1;u.type===Nd.FloatArray?c=1:u.type===Nd.Vector4FloatArray&&(c=4),u.data=new Float32Array(i.output.length*c).fill(0)}}),this.compiledBundle.context=i,l.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=l.sent;case 12:case"end":return l.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()}]),r}(),DH),IH=yr(eS.prototype,"engine",[AH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),PH=yr(eS.prototype,"configService",[kH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eS))||MH),FH,NH,BH,PM,$H,zH,GH,UH=(FH=Dn(),NH=br(wt.MaterialComponentManager),FH(BH=(PM=(GH=zH=function(){function r(){dr(this,r),this.config=void 0,mr(this,"material",$H,this),this.entity=void 0,this.component=void 0}return _r(r,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(e){this.config=e}},{key:"setEntity",value:function(e,n){this.entity=e,this.component=this.material.create(e),this.component.entity=e,this.component.type=n,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),r}(),zH.BASIC="basic",GH),$H=yr(PM.prototype,"material",[NH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),PM))||BH),VH,HH,WH,jH,YH,XH,qH,lp,KH,ZH,QH,JH,tS,eW,Xc=(VH=Dn(),HH=br(wt.MeshComponentManager),WH=br(wt.CullableComponentManager),jH=br(wt.TransformComponentManager),YH=br(wt.Systems),XH=zl(wt.SceneGraphSystem),VH(qH=(lp=(eW=tS=function(){function r(){dr(this,r),this.attributes={},this.config=void 0,mr(this,"mesh",KH,this),mr(this,"cullable",ZH,this),mr(this,"transform",QH,this),mr(this,"sceneGraphSystem",JH,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return _r(r,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(e){this.config=e}},{key:"setEntity",value:function(e){this.entity=e,this.cullable.create(e),this.meshComponent=this.mesh.create(e),this.transformComponent=this.transform.create(e),this.onEntityCreated()}},{key:"setMaterial",value:function(e){return this.meshComponent.material=e,this}},{key:"setGeometry",value:function(e){return this.meshComponent.geometry=e,this}},{key:"setAttributes",value:function(e){var n=this;Object.keys(e).forEach(function(i){e[i]!==void 0&&e[i]!==n.attributes[i]&&(n.onAttributeChanged({name:i,data:e[i]}),n.attributes[i]=e[i])})}},{key:"setVisible",value:function(e){var n=this;return this.meshComponent.visible=e,this.meshComponent.children.forEach(function(i){var a=n.mesh.getComponentByEntity(i);a&&(a.visible=e)}),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(e){return this.sceneGraphSystem.attach(this.entity,e.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(e){var n=e.name,i=e.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(n),i)}},{key:"convertAttributeName2UniformName",value:function(e){return e}}]),r}(),tS.POINT="point",tS.LINE="line",tS.GRID="grid",eW),KH=yr(lp.prototype,"mesh",[HH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ZH=yr(lp.prototype,"cullable",[WH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),QH=yr(lp.prototype,"transform",[jH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),JH=yr(lp.prototype,"sceneGraphSystem",[YH,XH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lp))||qH),XDe=$r(function(r,t){(function(e,n){r.exports=n()})(Lc,function(){var e=function(N){return N instanceof Uint8Array||N instanceof Uint16Array||N instanceof Uint32Array||N instanceof Int8Array||N instanceof Int16Array||N instanceof Int32Array||N instanceof Float32Array||N instanceof Float64Array||N instanceof Uint8ClampedArray},n=function(N,te){for(var ve=Object.keys(te),Ze=0;Ze<ve.length;++Ze)N[ve[Ze]]=te[ve[Ze]];return N},i=`
`;function a(N){return typeof atob!="undefined"?atob(N):"base64:"+N}function o(N){var te=new Error("(regl) "+N);throw console.error(te),te}function s(N,te){N||o(te)}function l(N){return N?": "+N:""}function u(N,te,ve){N in te||o("unknown parameter ("+N+")"+l(ve)+". possible values: "+Object.keys(te).join())}function c(N,te){e(N)||o("invalid parameter type"+l(te)+". must be a typed array")}function f(N,te){switch(te){case"number":return typeof N=="number";case"object":return typeof N=="object";case"string":return typeof N=="string";case"boolean":return typeof N=="boolean";case"function":return typeof N=="function";case"undefined":return typeof N=="undefined";case"symbol":return typeof N=="symbol"}}function d(N,te,ve){f(N,te)||o("invalid parameter type"+l(ve)+". expected "+te+", got "+typeof N)}function h(N,te){N>=0&&(N|0)===N||o("invalid parameter type, ("+N+")"+l(te)+". must be a nonnegative integer")}function v(N,te,ve){te.indexOf(N)<0&&o("invalid value"+l(ve)+". must be one of: "+te)}var p=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function g(N){Object.keys(N).forEach(function(te){p.indexOf(te)<0&&o('invalid regl constructor argument "'+te+'". must be one of '+p)})}function m(N,te){for(N=N+"";N.length<te;)N=" "+N;return N}function y(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function b(N,te){this.number=N,this.line=te,this.errors=[]}function x(N,te,ve){this.file=N,this.line=te,this.message=ve}function w(){var N=new Error,te=(N.stack||N).toString(),ve=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(te);if(ve)return ve[1];var Ze=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(te);return Ze?Ze[1]:"unknown"}function S(){var N=new Error,te=(N.stack||N).toString(),ve=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(te);if(ve)return ve[1];var Ze=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(te);return Ze?Ze[1]:"unknown"}function C(N,te){var ve=N.split(`
`),Ze=1,dt=0,Ke={unknown:new y,0:new y};Ke.unknown.name=Ke[0].name=te||w(),Ke.unknown.lines.push(new b(0,""));for(var it=0;it<ve.length;++it){var Ct=ve[it],_t=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Ct);if(_t)switch(_t[1]){case"line":var It=/(\d+)(\s+\d+)?/.exec(_t[2]);It&&(Ze=It[1]|0,It[2]&&(dt=It[2]|0,dt in Ke||(Ke[dt]=new y)));break;case"define":var Tt=/SHADER_NAME(_B64)?\s+(.*)$/.exec(_t[2]);Tt&&(Ke[dt].name=Tt[1]?a(Tt[2]):Tt[2]);break}Ke[dt].lines.push(new b(Ze++,Ct))}return Object.keys(Ke).forEach(function(Ot){var Ut=Ke[Ot];Ut.lines.forEach(function(Et){Ut.index[Et.number]=Et})}),Ke}function _(N){var te=[];return N.split(`
`).forEach(function(ve){if(!(ve.length<5)){var Ze=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(ve);Ze?te.push(new x(Ze[1]|0,Ze[2]|0,Ze[3].trim())):ve.length>0&&te.push(new x("unknown",0,ve))}}),te}function T(N,te){te.forEach(function(ve){var Ze=N[ve.file];if(Ze){var dt=Ze.index[ve.line];if(dt){dt.errors.push(ve),Ze.hasErrors=!0;return}}N.unknown.hasErrors=!0,N.unknown.lines[0].errors.push(ve)})}function E(N,te,ve,Ze,dt){if(!N.getShaderParameter(te,N.COMPILE_STATUS)){var Ke=N.getShaderInfoLog(te),it=Ze===N.FRAGMENT_SHADER?"fragment":"vertex";L(ve,"string",it+" shader source must be a string",dt);var Ct=C(ve,dt),_t=_(Ke);T(Ct,_t),Object.keys(Ct).forEach(function(It){var Tt=Ct[It];if(!Tt.hasErrors)return;var Ot=[""],Ut=[""];function Et(Lt,ze){Ot.push(Lt),Ut.push(ze||"")}Et("file number "+It+": "+Tt.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Tt.lines.forEach(function(Lt){if(Lt.errors.length>0){Et(m(Lt.number,4)+"|  ","background-color:yellow; font-weight:bold"),Et(Lt.line+i,"color:red; background-color:yellow; font-weight:bold");var ze=0;Lt.errors.forEach(function(at){var Mt=at.message,Yt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Mt);if(Yt){var yt=Yt[1];switch(Mt=Yt[2],yt){case"assign":yt="=";break}ze=Math.max(Lt.line.indexOf(yt,ze),0)}else ze=0;Et(m("| ",6)),Et(m("^^^",ze+3)+i,"font-weight:bold"),Et(m("| ",6)),Et(Mt+i,"font-weight:bold")}),Et(m("| ",6)+i)}else Et(m(Lt.number,4)+"|  "),Et(Lt.line+i,"color:red")}),typeof document!="undefined"&&!window.chrome?(Ut[0]=Ot.join("%c"),console.log.apply(console,Ut)):console.log(Ot.join(""))}),s.raise("Error compiling "+it+" shader, "+Ct[0].name)}}function k(N,te,ve,Ze,dt){if(!N.getProgramParameter(te,N.LINK_STATUS)){var Ke=N.getProgramInfoLog(te),it=C(ve,dt),Ct=C(Ze,dt),_t='Error linking program with vertex shader, "'+Ct[0].name+'", and fragment shader "'+it[0].name+'"';typeof document!="undefined"?console.log("%c"+_t+i+"%c"+Ke,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(_t+i+Ke),s.raise(_t)}}function I(N){N._commandRef=w()}function P(N,te,ve,Ze){I(N);function dt(_t){return _t?Ze.id(_t):0}N._fragId=dt(N.static.frag),N._vertId=dt(N.static.vert);function Ke(_t,It){Object.keys(It).forEach(function(Tt){_t[Ze.id(Tt)]=!0})}var it=N._uniformSet={};Ke(it,te.static),Ke(it,te.dynamic);var Ct=N._attributeSet={};Ke(Ct,ve.static),Ke(Ct,ve.dynamic),N._hasCount="count"in N.static||"count"in N.dynamic||"elements"in N.static||"elements"in N.dynamic}function F(N,te){var ve=S();o(N+" in command "+(te||w())+(ve==="unknown"?"":" called from "+ve))}function $(N,te,ve){N||F(te,ve||w())}function R(N,te,ve,Ze){N in te||F("unknown parameter ("+N+")"+l(ve)+". possible values: "+Object.keys(te).join(),Ze||w())}function L(N,te,ve,Ze){f(N,te)||F("invalid parameter type"+l(ve)+". expected "+te+", got "+typeof N,Ze||w())}function O(N){N()}function B(N,te,ve){N.texture?v(N.texture._texture.internalformat,te,"unsupported texture format for attachment"):v(N.renderbuffer._renderbuffer.format,ve,"unsupported renderbuffer format for attachment")}var U=33071,W=9728,X=9984,ie=9985,q=9986,j=9987,fe=5120,se=5121,ce=5122,_e=5123,Me=5124,Ye=5125,De=5126,D=32819,z=32820,V=33635,he=34042,re=36193,pe={};pe[fe]=pe[se]=1,pe[ce]=pe[_e]=pe[re]=pe[V]=pe[D]=pe[z]=2,pe[Me]=pe[Ye]=pe[De]=pe[he]=4;function Je(N,te){return N===z||N===D||N===V?2:N===he?4:pe[N]*te}function We(N){return!(N&N-1)&&!!N}function Le(N,te,ve){var Ze,dt=te.width,Ke=te.height,it=te.channels;s(dt>0&&dt<=ve.maxTextureSize&&Ke>0&&Ke<=ve.maxTextureSize,"invalid texture shape"),(N.wrapS!==U||N.wrapT!==U)&&s(We(dt)&&We(Ke),"incompatible wrap mode for texture, both width and height must be power of 2"),te.mipmask===1?dt!==1&&Ke!==1&&s(N.minFilter!==X&&N.minFilter!==q&&N.minFilter!==ie&&N.minFilter!==j,"min filter requires mipmap"):(s(We(dt)&&We(Ke),"texture must be a square power of 2 to support mipmapping"),s(te.mipmask===(dt<<1)-1,"missing or incomplete mipmap data")),te.type===De&&(ve.extensions.indexOf("oes_texture_float_linear")<0&&s(N.minFilter===W&&N.magFilter===W,"filter not supported, must enable oes_texture_float_linear"),s(!N.genMipmaps,"mipmap generation not supported with float textures"));var Ct=te.images;for(Ze=0;Ze<16;++Ze)if(Ct[Ze]){var _t=dt>>Ze,It=Ke>>Ze;s(te.mipmask&1<<Ze,"missing mipmap data");var Tt=Ct[Ze];if(s(Tt.width===_t&&Tt.height===It,"invalid shape for mip images"),s(Tt.format===te.format&&Tt.internalformat===te.internalformat&&Tt.type===te.type,"incompatible type for mip image"),!Tt.compressed)if(Tt.data){var Ot=Math.ceil(Je(Tt.type,it)*_t/Tt.unpackAlignment)*Tt.unpackAlignment;s(Tt.data.byteLength===Ot*It,"invalid data for image, buffer size is inconsistent with image format")}else Tt.element||Tt.copy}else N.genMipmaps||s((te.mipmask&1<<Ze)==0,"extra mipmap data");te.compressed&&s(!N.genMipmaps,"mipmap generation for compressed images not supported")}function $e(N,te,ve,Ze){var dt=N.width,Ke=N.height,it=N.channels;s(dt>0&&dt<=Ze.maxTextureSize&&Ke>0&&Ke<=Ze.maxTextureSize,"invalid texture shape"),s(dt===Ke,"cube map must be square"),s(te.wrapS===U&&te.wrapT===U,"wrap mode not supported by cube map");for(var Ct=0;Ct<ve.length;++Ct){var _t=ve[Ct];s(_t.width===dt&&_t.height===Ke,"inconsistent cube map face shape"),te.genMipmaps&&(s(!_t.compressed,"can not generate mipmap for compressed textures"),s(_t.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var It=_t.images,Tt=0;Tt<16;++Tt){var Ot=It[Tt];if(Ot){var Ut=dt>>Tt,Et=Ke>>Tt;s(_t.mipmask&1<<Tt,"missing mipmap data"),s(Ot.width===Ut&&Ot.height===Et,"invalid shape for mip images"),s(Ot.format===N.format&&Ot.internalformat===N.internalformat&&Ot.type===N.type,"incompatible type for mip image"),Ot.compressed||(Ot.data?s(Ot.data.byteLength===Ut*Et*Math.max(Je(Ot.type,it),Ot.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Ot.element||Ot.copy)}}}}var H=n(s,{optional:O,raise:o,commandRaise:F,command:$,parameter:u,commandParameter:R,constructor:g,type:d,commandType:L,isTypedArray:c,nni:h,oneOf:v,shaderError:E,linkError:k,callSite:S,saveCommandRef:I,saveDrawInfo:P,framebufferFormat:B,guessCommand:w,texture2D:Le,textureCube:$e}),Y=0,K=0,ee=5,J=6;function ge(N,te){this.id=Y++,this.type=N,this.data=te}function Ve(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ge(N){if(N.length===0)return[];var te=N.charAt(0),ve=N.charAt(N.length-1);if(N.length>1&&te===ve&&(te==='"'||te==="'"))return['"'+Ve(N.substr(1,N.length-2))+'"'];var Ze=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(N);if(Ze)return Ge(N.substr(0,Ze.index)).concat(Ge(Ze[1])).concat(Ge(N.substr(Ze.index+Ze[0].length)));var dt=N.split(".");if(dt.length===1)return['"'+Ve(N)+'"'];for(var Ke=[],it=0;it<dt.length;++it)Ke=Ke.concat(Ge(dt[it]));return Ke}function rt(N){return"["+Ge(N).join("][")+"]"}function Se(N,te){return new ge(N,rt(te+""))}function ye(N){return typeof N=="function"&&!N._reglType||N instanceof ge}function Re(N,te){if(typeof N=="function")return new ge(K,N);if(typeof N=="number"||typeof N=="boolean")return new ge(ee,N);if(Array.isArray(N))return new ge(J,N.map((ve,Ze)=>Re(ve,te+"["+Ze+"]")));if(N instanceof ge)return N;H(!1,"invalid option type in uniform "+te)}var St={DynamicVariable:ge,define:Se,isDynamic:ye,unbox:Re,accessor:rt},kt={next:typeof requestAnimationFrame=="function"?function(N){return requestAnimationFrame(N)}:function(N){return setTimeout(N,16)},cancel:typeof cancelAnimationFrame=="function"?function(N){return cancelAnimationFrame(N)}:clearTimeout},Ae=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function ut(){var N={"":0},te=[""];return{id:function(ve){var Ze=N[ve];return Ze||(Ze=N[ve]=te.length,te.push(ve),Ze)},str:function(ve){return te[ve]}}}function cr(N,te,ve){var Ze=document.createElement("canvas");n(Ze.style,{border:0,margin:0,padding:0,top:0,left:0}),N.appendChild(Ze),N===document.body&&(Ze.style.position="absolute",n(N.style,{margin:0,padding:0}));function dt(){var Ct=window.innerWidth,_t=window.innerHeight;if(N!==document.body){var It=N.getBoundingClientRect();Ct=It.right-It.left,_t=It.bottom-It.top}Ze.width=ve*Ct,Ze.height=ve*_t,n(Ze.style,{width:Ct+"px",height:_t+"px"})}var Ke;N!==document.body&&typeof ResizeObserver=="function"?(Ke=new ResizeObserver(function(){setTimeout(dt)}),Ke.observe(N)):window.addEventListener("resize",dt,!1);function it(){Ke?Ke.disconnect():window.removeEventListener("resize",dt),N.removeChild(Ze)}return dt(),{canvas:Ze,onDestroy:it}}function Ne(N,te){function ve(Ze){try{return N.getContext(Ze,te)}catch{return null}}return ve("webgl")||ve("experimental-webgl")||ve("webgl-experimental")}function vt(N){return typeof N.nodeName=="string"&&typeof N.appendChild=="function"&&typeof N.getBoundingClientRect=="function"}function Ft(N){return typeof N.drawArrays=="function"||typeof N.drawElements=="function"}function vr(N){return typeof N=="string"?N.split():(H(Array.isArray(N),"invalid extension array"),N)}function zr(N){return typeof N=="string"?(H(typeof document!="undefined","not supported outside of DOM"),document.querySelector(N)):N}function or(N){var te=N||{},ve,Ze,dt,Ke,it={},Ct=[],_t=[],It=typeof window=="undefined"?1:window.devicePixelRatio,Tt=!1,Ot=function(Lt){Lt&&H.raise(Lt)},Ut=function(){};if(typeof te=="string"?(H(typeof document!="undefined","selector queries only supported in DOM enviroments"),ve=document.querySelector(te),H(ve,"invalid query string for element")):typeof te=="object"?vt(te)?ve=te:Ft(te)?(Ke=te,dt=Ke.canvas):(H.constructor(te),"gl"in te?Ke=te.gl:"canvas"in te?dt=zr(te.canvas):"container"in te&&(Ze=zr(te.container)),"attributes"in te&&(it=te.attributes,H.type(it,"object","invalid context attributes")),"extensions"in te&&(Ct=vr(te.extensions)),"optionalExtensions"in te&&(_t=vr(te.optionalExtensions)),"onDone"in te&&(H.type(te.onDone,"function","invalid or missing onDone callback"),Ot=te.onDone),"profile"in te&&(Tt=!!te.profile),"pixelRatio"in te&&(It=+te.pixelRatio,H(It>0,"invalid pixel ratio"))):H.raise("invalid arguments to regl"),ve&&(ve.nodeName.toLowerCase()==="canvas"?dt=ve:Ze=ve),!Ke){if(!dt){H(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Et=cr(Ze||document.body,Ot,It);if(!Et)return null;dt=Et.canvas,Ut=Et.onDestroy}it.premultipliedAlpha===void 0&&(it.premultipliedAlpha=!0),Ke=Ne(dt,it)}return Ke?{gl:Ke,canvas:dt,container:Ze,extensions:Ct,optionalExtensions:_t,pixelRatio:It,profile:Tt,onDone:Ot,onDestroy:Ut}:(Ut(),Ot("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function qe(N,te){var ve={};function Ze(it){H.type(it,"string","extension name must be string");var Ct=it.toLowerCase(),_t;try{_t=ve[Ct]=N.getExtension(Ct)}catch{}return!!_t}for(var dt=0;dt<te.extensions.length;++dt){var Ke=te.extensions[dt];if(!Ze(Ke))return te.onDestroy(),te.onDone('"'+Ke+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return te.optionalExtensions.forEach(Ze),{extensions:ve,restore:function(){Object.keys(ve).forEach(function(it){if(ve[it]&&!Ze(it))throw new Error("(regl): error restoring extension "+it)})}}}function st(N,te){for(var ve=Array(N),Ze=0;Ze<N;++Ze)ve[Ze]=te(Ze);return ve}var Rt=5120,Nt=5121,sr=5122,fn=5123,on=5124,ln=5125,Pn=5126;function jr(N){for(var te=16;te<=1<<28;te*=16)if(N<=te)return te;return 0}function hr(N){var te,ve;return te=(N>65535)<<4,N>>>=te,ve=(N>255)<<3,N>>>=ve,te|=ve,ve=(N>15)<<2,N>>>=ve,te|=ve,ve=(N>3)<<1,N>>>=ve,te|=ve,te|N>>1}function Wr(){var N=st(8,function(){return[]});function te(Ke){var it=jr(Ke),Ct=N[hr(it)>>2];return Ct.length>0?Ct.pop():new ArrayBuffer(it)}function ve(Ke){N[hr(Ke.byteLength)>>2].push(Ke)}function Ze(Ke,it){var Ct=null;switch(Ke){case Rt:Ct=new Int8Array(te(it),0,it);break;case Nt:Ct=new Uint8Array(te(it),0,it);break;case sr:Ct=new Int16Array(te(2*it),0,it);break;case fn:Ct=new Uint16Array(te(2*it),0,it);break;case on:Ct=new Int32Array(te(4*it),0,it);break;case ln:Ct=new Uint32Array(te(4*it),0,it);break;case Pn:Ct=new Float32Array(te(4*it),0,it);break;default:return null}return Ct.length!==it?Ct.subarray(0,it):Ct}function dt(Ke){ve(Ke.buffer)}return{alloc:te,free:ve,allocType:Ze,freeType:dt}}var xr=Wr();xr.zero=Wr();var dn=3408,Pr=3410,Xn=3411,ra=3412,yo=3413,es=3414,ts=3415,Do=33901,Df=33902,Nh=3379,Tg=3386,Ag=34921,kg=36347,ac=36348,rs=35661,oc=35660,qn=34930,ja=36349,Di=34076,Ro=34024,qs=7936,Bh=7937,$h=7938,Rf=35724,zh=34047,Gh=36063,Uh=34852,Mb=3553,_O=34067,lne=34069,une=33984,Mg=6408,oE=5126,TO=5121,sE=36160,cne=36053,fne=36064,dne=16384,hne=function(N,te){var ve=1;te.ext_texture_filter_anisotropic&&(ve=N.getParameter(zh));var Ze=1,dt=1;te.webgl_draw_buffers&&(Ze=N.getParameter(Uh),dt=N.getParameter(Gh));var Ke=!!te.oes_texture_float;if(Ke){var it=N.createTexture();N.bindTexture(Mb,it),N.texImage2D(Mb,0,Mg,1,1,0,Mg,oE,null);var Ct=N.createFramebuffer();if(N.bindFramebuffer(sE,Ct),N.framebufferTexture2D(sE,fne,Mb,it,0),N.bindTexture(Mb,null),N.checkFramebufferStatus(sE)!==cne)Ke=!1;else{N.viewport(0,0,1,1),N.clearColor(1,0,0,1),N.clear(dne);var _t=xr.allocType(oE,4);N.readPixels(0,0,1,1,Mg,oE,_t),N.getError()?Ke=!1:(N.deleteFramebuffer(Ct),N.deleteTexture(it),Ke=_t[0]===1),xr.freeType(_t)}}var It=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Tt=!0;if(!It){var Ot=N.createTexture(),Ut=xr.allocType(TO,36);N.activeTexture(une),N.bindTexture(_O,Ot),N.texImage2D(lne,0,Mg,3,3,0,Mg,TO,Ut),xr.freeType(Ut),N.bindTexture(_O,null),N.deleteTexture(Ot),Tt=!N.getError()}return{colorBits:[N.getParameter(Pr),N.getParameter(Xn),N.getParameter(ra),N.getParameter(yo)],depthBits:N.getParameter(es),stencilBits:N.getParameter(ts),subpixelBits:N.getParameter(dn),extensions:Object.keys(te).filter(function(Et){return!!te[Et]}),maxAnisotropic:ve,maxDrawbuffers:Ze,maxColorAttachments:dt,pointSizeDims:N.getParameter(Do),lineWidthDims:N.getParameter(Df),maxViewportDims:N.getParameter(Tg),maxCombinedTextureUnits:N.getParameter(rs),maxCubeMapSize:N.getParameter(Di),maxRenderbufferSize:N.getParameter(Ro),maxTextureUnits:N.getParameter(qn),maxTextureSize:N.getParameter(Nh),maxAttributes:N.getParameter(Ag),maxVertexUniforms:N.getParameter(kg),maxVertexTextureUnits:N.getParameter(oc),maxVaryingVectors:N.getParameter(ac),maxFragmentUniforms:N.getParameter(ja),glsl:N.getParameter(Rf),renderer:N.getParameter(Bh),vendor:N.getParameter(qs),version:N.getParameter($h),readFloat:Ke,npotTextureCube:Tt}};function Ks(N){return!!N&&typeof N=="object"&&Array.isArray(N.shape)&&Array.isArray(N.stride)&&typeof N.offset=="number"&&N.shape.length===N.stride.length&&(Array.isArray(N.data)||e(N.data))}var ns=function(N){return Object.keys(N).map(function(te){return N[te]})},Ib={shape:mne,flatten:gne};function vne(N,te,ve){for(var Ze=0;Ze<te;++Ze)ve[Ze]=N[Ze]}function pne(N,te,ve,Ze){for(var dt=0,Ke=0;Ke<te;++Ke)for(var it=N[Ke],Ct=0;Ct<ve;++Ct)Ze[dt++]=it[Ct]}function AO(N,te,ve,Ze,dt,Ke){for(var it=Ke,Ct=0;Ct<te;++Ct)for(var _t=N[Ct],It=0;It<ve;++It)for(var Tt=_t[It],Ot=0;Ot<Ze;++Ot)dt[it++]=Tt[Ot]}function kO(N,te,ve,Ze,dt){for(var Ke=1,it=ve+1;it<te.length;++it)Ke*=te[it];var Ct=te[ve];if(te.length-ve==4){var _t=te[ve+1],It=te[ve+2],Tt=te[ve+3];for(it=0;it<Ct;++it)AO(N[it],_t,It,Tt,Ze,dt),dt+=Ke}else for(it=0;it<Ct;++it)kO(N[it],te,ve+1,Ze,dt),dt+=Ke}function gne(N,te,ve,Ze){var dt=1;if(te.length)for(var Ke=0;Ke<te.length;++Ke)dt*=te[Ke];else dt=0;var it=Ze||xr.allocType(ve,dt);switch(te.length){case 0:break;case 1:vne(N,te[0],it);break;case 2:pne(N,te[0],te[1],it);break;case 3:AO(N,te[0],te[1],te[2],it,0);break;default:kO(N,te,0,it,0)}return it}function mne(N){for(var te=[],ve=N;ve.length;ve=ve[0])te.push(ve.length);return te}var lE={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},yne=5120,bne=5122,xne=5124,wne=5121,Sne=5123,Cne=5125,Ene=5126,_ne=5126,Of={int8:yne,int16:bne,int32:xne,uint8:wne,uint16:Sne,uint32:Cne,float:Ene,float32:_ne},Tne=35048,Ane=35040,Pb={dynamic:Tne,stream:Ane,static:35044},uE=Ib.flatten,MO=Ib.shape,IO=35044,kne=35040,cE=5121,fE=5126,sc=[];sc[5120]=1,sc[5122]=2,sc[5124]=4,sc[5121]=1,sc[5123]=2,sc[5125]=4,sc[5126]=4;function Db(N){return lE[Object.prototype.toString.call(N)]|0}function PO(N,te){for(var ve=0;ve<te.length;++ve)N[ve]=te[ve]}function DO(N,te,ve,Ze,dt,Ke,it){for(var Ct=0,_t=0;_t<ve;++_t)for(var It=0;It<Ze;++It)N[Ct++]=te[dt*_t+Ke*It+it]}function Mne(N,te,ve,Ze){var dt=0,Ke={};function it(ze){this.id=dt++,this.buffer=N.createBuffer(),this.type=ze,this.usage=IO,this.byteLength=0,this.dimension=1,this.dtype=cE,this.persistentData=null,ve.profile&&(this.stats={size:0})}it.prototype.bind=function(){N.bindBuffer(this.type,this.buffer)},it.prototype.destroy=function(){Ut(this)};var Ct=[];function _t(ze,at){var Mt=Ct.pop();return Mt||(Mt=new it(ze)),Mt.bind(),Ot(Mt,at,kne,0,1,!1),Mt}function It(ze){Ct.push(ze)}function Tt(ze,at,Mt){ze.byteLength=at.byteLength,N.bufferData(ze.type,at,Mt)}function Ot(ze,at,Mt,Yt,yt,qt){var xt;if(ze.usage=Mt,Array.isArray(at)){if(ze.dtype=Yt||fE,at.length>0){var Bt;if(Array.isArray(at[0])){xt=MO(at);for(var bt=1,$t=1;$t<xt.length;++$t)bt*=xt[$t];ze.dimension=bt,Bt=uE(at,xt,ze.dtype),Tt(ze,Bt,Mt),qt?ze.persistentData=Bt:xr.freeType(Bt)}else if(typeof at[0]=="number"){ze.dimension=yt;var fr=xr.allocType(ze.dtype,at.length);PO(fr,at),Tt(ze,fr,Mt),qt?ze.persistentData=fr:xr.freeType(fr)}else e(at[0])?(ze.dimension=at[0].length,ze.dtype=Yt||Db(at[0])||fE,Bt=uE(at,[at.length,at[0].length],ze.dtype),Tt(ze,Bt,Mt),qt?ze.persistentData=Bt:xr.freeType(Bt)):H.raise("invalid buffer data")}}else if(e(at))ze.dtype=Yt||Db(at),ze.dimension=yt,Tt(ze,at,Mt),qt&&(ze.persistentData=new Uint8Array(new Uint8Array(at.buffer)));else if(Ks(at)){xt=at.shape;var Ar=at.stride,Vt=at.offset,Pt=0,gt=0,wr=0,Fr=0;xt.length===1?(Pt=xt[0],gt=1,wr=Ar[0],Fr=0):xt.length===2?(Pt=xt[0],gt=xt[1],wr=Ar[0],Fr=Ar[1]):H.raise("invalid shape"),ze.dtype=Yt||Db(at.data)||fE,ze.dimension=gt;var Jt=xr.allocType(ze.dtype,Pt*gt);DO(Jt,at.data,Pt,gt,wr,Fr,Vt),Tt(ze,Jt,Mt),qt?ze.persistentData=Jt:xr.freeType(Jt)}else at instanceof ArrayBuffer?(ze.dtype=cE,ze.dimension=yt,Tt(ze,at,Mt),qt&&(ze.persistentData=new Uint8Array(new Uint8Array(at)))):H.raise("invalid buffer data")}function Ut(ze){te.bufferCount--,Ze(ze);var at=ze.buffer;H(at,"buffer must not be deleted already"),N.deleteBuffer(at),ze.buffer=null,delete Ke[ze.id]}function Et(ze,at,Mt,Yt){te.bufferCount++;var yt=new it(at);Ke[yt.id]=yt;function qt(bt){var $t=IO,fr=null,Ar=0,Vt=0,Pt=1;return Array.isArray(bt)||e(bt)||Ks(bt)||bt instanceof ArrayBuffer?fr=bt:typeof bt=="number"?Ar=bt|0:bt&&(H.type(bt,"object","buffer arguments must be an object, a number or an array"),"data"in bt&&(H(fr===null||Array.isArray(fr)||e(fr)||Ks(fr),"invalid data for buffer"),fr=bt.data),"usage"in bt&&(H.parameter(bt.usage,Pb,"invalid buffer usage"),$t=Pb[bt.usage]),"type"in bt&&(H.parameter(bt.type,Of,"invalid buffer type"),Vt=Of[bt.type]),"dimension"in bt&&(H.type(bt.dimension,"number","invalid dimension"),Pt=bt.dimension|0),"length"in bt&&(H.nni(Ar,"buffer length must be a nonnegative integer"),Ar=bt.length|0)),yt.bind(),fr?Ot(yt,fr,$t,Vt,Pt,Yt):(Ar&&N.bufferData(yt.type,Ar,$t),yt.dtype=Vt||cE,yt.usage=$t,yt.dimension=Pt,yt.byteLength=Ar),ve.profile&&(yt.stats.size=yt.byteLength*sc[yt.dtype]),qt}function xt(bt,$t){H($t+bt.byteLength<=yt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+bt.byteLength+" starting from offset "+$t+" to a buffer of size "+yt.byteLength),N.bufferSubData(yt.type,$t,bt)}function Bt(bt,$t){var fr=($t||0)|0,Ar;if(yt.bind(),e(bt)||bt instanceof ArrayBuffer)xt(bt,fr);else if(Array.isArray(bt)){if(bt.length>0)if(typeof bt[0]=="number"){var Vt=xr.allocType(yt.dtype,bt.length);PO(Vt,bt),xt(Vt,fr),xr.freeType(Vt)}else if(Array.isArray(bt[0])||e(bt[0])){Ar=MO(bt);var Pt=uE(bt,Ar,yt.dtype);xt(Pt,fr),xr.freeType(Pt)}else H.raise("invalid buffer data")}else if(Ks(bt)){Ar=bt.shape;var gt=bt.stride,wr=0,Fr=0,Jt=0,Yr=0;Ar.length===1?(wr=Ar[0],Fr=1,Jt=gt[0],Yr=0):Ar.length===2?(wr=Ar[0],Fr=Ar[1],Jt=gt[0],Yr=gt[1]):H.raise("invalid shape");var kr=Array.isArray(bt.data)?yt.dtype:Db(bt.data),Gr=xr.allocType(kr,wr*Fr);DO(Gr,bt.data,wr,Fr,Jt,Yr,bt.offset),xt(Gr,fr),xr.freeType(Gr)}else H.raise("invalid data for buffer subdata");return qt}return Mt||qt(ze),qt._reglType="buffer",qt._buffer=yt,qt.subdata=Bt,ve.profile&&(qt.stats=yt.stats),qt.destroy=function(){Ut(yt)},qt}function Lt(){ns(Ke).forEach(function(ze){ze.buffer=N.createBuffer(),N.bindBuffer(ze.type,ze.buffer),N.bufferData(ze.type,ze.persistentData||ze.byteLength,ze.usage)})}return ve.profile&&(te.getTotalBufferSize=function(){var ze=0;return Object.keys(Ke).forEach(function(at){ze+=Ke[at].stats.size}),ze}),{create:Et,createStream:_t,destroyStream:It,clear:function(){ns(Ke).forEach(Ut),Ct.forEach(Ut)},getBuffer:function(ze){return ze&&ze._buffer instanceof it?ze._buffer:null},restore:Lt,_initBuffer:Ot}}var Ine=0,Pne=0,Dne=1,Rne=1,One=4,Lne=4,Vh={points:Ine,point:Pne,lines:Dne,line:Rne,triangles:One,triangle:Lne,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Fne=0,Nne=1,Ig=4,Bne=5120,Hh=5121,RO=5122,Wh=5123,OO=5124,Lf=5125,dE=34963,$ne=35040,zne=35044;function Gne(N,te,ve,Ze){var dt={},Ke=0,it={uint8:Hh,uint16:Wh};te.oes_element_index_uint&&(it.uint32=Lf);function Ct(Lt){this.id=Ke++,dt[this.id]=this,this.buffer=Lt,this.primType=Ig,this.vertCount=0,this.type=0}Ct.prototype.bind=function(){this.buffer.bind()};var _t=[];function It(Lt){var ze=_t.pop();return ze||(ze=new Ct(ve.create(null,dE,!0,!1)._buffer)),Ot(ze,Lt,$ne,-1,-1,0,0),ze}function Tt(Lt){_t.push(Lt)}function Ot(Lt,ze,at,Mt,Yt,yt,qt){Lt.buffer.bind();var xt;if(ze){var Bt=qt;!qt&&(!e(ze)||Ks(ze)&&!e(ze.data))&&(Bt=te.oes_element_index_uint?Lf:Wh),ve._initBuffer(Lt.buffer,ze,at,Bt,3)}else N.bufferData(dE,yt,at),Lt.buffer.dtype=xt||Hh,Lt.buffer.usage=at,Lt.buffer.dimension=3,Lt.buffer.byteLength=yt;if(xt=qt,!qt){switch(Lt.buffer.dtype){case Hh:case Bne:xt=Hh;break;case Wh:case RO:xt=Wh;break;case Lf:case OO:xt=Lf;break;default:H.raise("unsupported type for element array")}Lt.buffer.dtype=xt}Lt.type=xt,H(xt!==Lf||!!te.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var bt=Yt;bt<0&&(bt=Lt.buffer.byteLength,xt===Wh?bt>>=1:xt===Lf&&(bt>>=2)),Lt.vertCount=bt;var $t=Mt;if(Mt<0){$t=Ig;var fr=Lt.buffer.dimension;fr===1&&($t=Fne),fr===2&&($t=Nne),fr===3&&($t=Ig)}Lt.primType=$t}function Ut(Lt){Ze.elementsCount--,H(Lt.buffer!==null,"must not double destroy elements"),delete dt[Lt.id],Lt.buffer.destroy(),Lt.buffer=null}function Et(Lt,ze){var at=ve.create(null,dE,!0),Mt=new Ct(at._buffer);Ze.elementsCount++;function Yt(yt){if(!yt)at(),Mt.primType=Ig,Mt.vertCount=0,Mt.type=Hh;else if(typeof yt=="number")at(yt),Mt.primType=Ig,Mt.vertCount=yt|0,Mt.type=Hh;else{var qt=null,xt=zne,Bt=-1,bt=-1,$t=0,fr=0;Array.isArray(yt)||e(yt)||Ks(yt)?qt=yt:(H.type(yt,"object","invalid arguments for elements"),"data"in yt&&(qt=yt.data,H(Array.isArray(qt)||e(qt)||Ks(qt),"invalid data for element buffer")),"usage"in yt&&(H.parameter(yt.usage,Pb,"invalid element buffer usage"),xt=Pb[yt.usage]),"primitive"in yt&&(H.parameter(yt.primitive,Vh,"invalid element buffer primitive"),Bt=Vh[yt.primitive]),"count"in yt&&(H(typeof yt.count=="number"&&yt.count>=0,"invalid vertex count for elements"),bt=yt.count|0),"type"in yt&&(H.parameter(yt.type,it,"invalid buffer type"),fr=it[yt.type]),"length"in yt?$t=yt.length|0:($t=bt,fr===Wh||fr===RO?$t*=2:(fr===Lf||fr===OO)&&($t*=4))),Ot(Mt,qt,xt,Bt,bt,$t,fr)}return Yt}return Yt(Lt),Yt._reglType="elements",Yt._elements=Mt,Yt.subdata=function(yt,qt){return at.subdata(yt,qt),Yt},Yt.destroy=function(){Ut(Mt)},Yt}return{create:Et,createStream:It,destroyStream:Tt,getElements:function(Lt){return typeof Lt=="function"&&Lt._elements instanceof Ct?Lt._elements:null},clear:function(){ns(dt).forEach(Ut)}}}var LO=new Float32Array(1),Une=new Uint32Array(LO.buffer),Vne=5123;function FO(N){for(var te=xr.allocType(Vne,N.length),ve=0;ve<N.length;++ve)if(isNaN(N[ve]))te[ve]=65535;else if(N[ve]===1/0)te[ve]=31744;else if(N[ve]===-1/0)te[ve]=64512;else{LO[0]=N[ve];var Ze=Une[0],dt=Ze>>>31<<15,Ke=(Ze<<1>>>24)-127,it=Ze>>13&(1<<10)-1;if(Ke<-24)te[ve]=dt;else if(Ke<-14){var Ct=-14-Ke;te[ve]=dt+(it+(1<<10)>>Ct)}else Ke>15?te[ve]=dt+31744:te[ve]=dt+(Ke+15<<10)+it}return te}function Ri(N){return Array.isArray(N)||e(N)}var NO=function(N){return!(N&N-1)&&!!N},Hne=34467,ml=3553,hE=34067,Rb=34069,Ff=6408,vE=6406,Ob=6407,Pg=6409,Lb=6410,BO=32854,pE=32855,$O=36194,Wne=32819,jne=32820,Yne=33635,Xne=34042,gE=6402,Fb=34041,mE=35904,yE=35906,jh=36193,bE=33776,xE=33777,wE=33778,SE=33779,zO=35986,GO=35987,UO=34798,VO=35840,HO=35841,WO=35842,jO=35843,YO=36196,Yh=5121,CE=5123,EE=5125,Dg=5126,qne=10242,Kne=10243,Zne=10497,_E=33071,Qne=33648,Jne=10240,eie=10241,TE=9728,tie=9729,AE=9984,XO=9985,qO=9986,kE=9987,rie=33170,Nb=4352,nie=4353,iie=4354,aie=34046,oie=3317,sie=37440,lie=37441,uie=37443,KO=37444,Rg=33984,cie=[AE,qO,XO,kE],Bb=[0,Pg,Lb,Ob,Ff],_s={};_s[Pg]=_s[vE]=_s[gE]=1,_s[Fb]=_s[Lb]=2,_s[Ob]=_s[mE]=3,_s[Ff]=_s[yE]=4;function Xh(N){return"[object "+N+"]"}var ZO=Xh("HTMLCanvasElement"),QO=Xh("OffscreenCanvas"),JO=Xh("CanvasRenderingContext2D"),eL=Xh("ImageBitmap"),tL=Xh("HTMLImageElement"),rL=Xh("HTMLVideoElement"),fie=Object.keys(lE).concat([ZO,QO,JO,eL,tL,rL]),qh=[];qh[Yh]=1,qh[Dg]=4,qh[jh]=2,qh[CE]=2,qh[EE]=4;var Pa=[];Pa[BO]=2,Pa[pE]=2,Pa[$O]=2,Pa[Fb]=4,Pa[bE]=.5,Pa[xE]=.5,Pa[wE]=1,Pa[SE]=1,Pa[zO]=.5,Pa[GO]=1,Pa[UO]=1,Pa[VO]=.5,Pa[HO]=.25,Pa[WO]=.5,Pa[jO]=.25,Pa[YO]=.5;function nL(N){return Array.isArray(N)&&(N.length===0||typeof N[0]=="number")}function iL(N){if(!Array.isArray(N))return!1;var te=N.length;return!(te===0||!Ri(N[0]))}function Nf(N){return Object.prototype.toString.call(N)}function aL(N){return Nf(N)===ZO}function oL(N){return Nf(N)===QO}function die(N){return Nf(N)===JO}function hie(N){return Nf(N)===eL}function vie(N){return Nf(N)===tL}function pie(N){return Nf(N)===rL}function ME(N){if(!N)return!1;var te=Nf(N);return fie.indexOf(te)>=0?!0:nL(N)||iL(N)||Ks(N)}function sL(N){return lE[Object.prototype.toString.call(N)]|0}function gie(N,te){var ve=te.length;switch(N.type){case Yh:case CE:case EE:case Dg:var Ze=xr.allocType(N.type,ve);Ze.set(te),N.data=Ze;break;case jh:N.data=FO(te);break;default:H.raise("unsupported texture type, must specify a typed array")}}function lL(N,te){return xr.allocType(N.type===jh?Dg:N.type,te)}function uL(N,te){N.type===jh?(N.data=FO(te),xr.freeType(te)):N.data=te}function mie(N,te,ve,Ze,dt,Ke){for(var it=N.width,Ct=N.height,_t=N.channels,It=it*Ct*_t,Tt=lL(N,It),Ot=0,Ut=0;Ut<Ct;++Ut)for(var Et=0;Et<it;++Et)for(var Lt=0;Lt<_t;++Lt)Tt[Ot++]=te[ve*Et+Ze*Ut+dt*Lt+Ke];uL(N,Tt)}function $b(N,te,ve,Ze,dt,Ke){var it;if(typeof Pa[N]!="undefined"?it=Pa[N]:it=_s[N]*qh[te],Ke&&(it*=6),dt){for(var Ct=0,_t=ve;_t>=1;)Ct+=it*_t*_t,_t/=2;return Ct}else return it*ve*Ze}function yie(N,te,ve,Ze,dt,Ke,it){var Ct={"don't care":Nb,"dont care":Nb,nice:iie,fast:nie},_t={repeat:Zne,clamp:_E,mirror:Qne},It={nearest:TE,linear:tie},Tt=n({mipmap:kE,"nearest mipmap nearest":AE,"linear mipmap nearest":XO,"nearest mipmap linear":qO,"linear mipmap linear":kE},It),Ot={none:0,browser:KO},Ut={uint8:Yh,rgba4:Wne,rgb565:Yne,"rgb5 a1":jne},Et={alpha:vE,luminance:Pg,"luminance alpha":Lb,rgb:Ob,rgba:Ff,rgba4:BO,"rgb5 a1":pE,rgb565:$O},Lt={};te.ext_srgb&&(Et.srgb=mE,Et.srgba=yE),te.oes_texture_float&&(Ut.float32=Ut.float=Dg),te.oes_texture_half_float&&(Ut.float16=Ut["half float"]=jh),te.webgl_depth_texture&&(n(Et,{depth:gE,"depth stencil":Fb}),n(Ut,{uint16:CE,uint32:EE,"depth stencil":Xne})),te.webgl_compressed_texture_s3tc&&n(Lt,{"rgb s3tc dxt1":bE,"rgba s3tc dxt1":xE,"rgba s3tc dxt3":wE,"rgba s3tc dxt5":SE}),te.webgl_compressed_texture_atc&&n(Lt,{"rgb atc":zO,"rgba atc explicit alpha":GO,"rgba atc interpolated alpha":UO}),te.webgl_compressed_texture_pvrtc&&n(Lt,{"rgb pvrtc 4bppv1":VO,"rgb pvrtc 2bppv1":HO,"rgba pvrtc 4bppv1":WO,"rgba pvrtc 2bppv1":jO}),te.webgl_compressed_texture_etc1&&(Lt["rgb etc1"]=YO);var ze=Array.prototype.slice.call(N.getParameter(Hne));Object.keys(Lt).forEach(function(de){var et=Lt[de];ze.indexOf(et)>=0&&(Et[de]=et)});var at=Object.keys(Et);ve.textureFormats=at;var Mt=[];Object.keys(Et).forEach(function(de){var et=Et[de];Mt[et]=de});var Yt=[];Object.keys(Ut).forEach(function(de){var et=Ut[de];Yt[et]=de});var yt=[];Object.keys(It).forEach(function(de){var et=It[de];yt[et]=de});var qt=[];Object.keys(Tt).forEach(function(de){var et=Tt[de];qt[et]=de});var xt=[];Object.keys(_t).forEach(function(de){var et=_t[de];xt[et]=de});var Bt=at.reduce(function(de,et){var Xe=Et[et];return Xe===Pg||Xe===vE||Xe===Pg||Xe===Lb||Xe===gE||Xe===Fb||te.ext_srgb&&(Xe===mE||Xe===yE)?de[Xe]=Xe:Xe===pE||et.indexOf("rgba")>=0?de[Xe]=Ff:de[Xe]=Ob,de},{});function bt(){this.internalformat=Ff,this.format=Ff,this.type=Yh,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=KO,this.width=0,this.height=0,this.channels=0}function $t(de,et){de.internalformat=et.internalformat,de.format=et.format,de.type=et.type,de.compressed=et.compressed,de.premultiplyAlpha=et.premultiplyAlpha,de.flipY=et.flipY,de.unpackAlignment=et.unpackAlignment,de.colorSpace=et.colorSpace,de.width=et.width,de.height=et.height,de.channels=et.channels}function fr(de,et){if(!(typeof et!="object"||!et)){if("premultiplyAlpha"in et&&(H.type(et.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),de.premultiplyAlpha=et.premultiplyAlpha),"flipY"in et&&(H.type(et.flipY,"boolean","invalid texture flip"),de.flipY=et.flipY),"alignment"in et&&(H.oneOf(et.alignment,[1,2,4,8],"invalid texture unpack alignment"),de.unpackAlignment=et.alignment),"colorSpace"in et&&(H.parameter(et.colorSpace,Ot,"invalid colorSpace"),de.colorSpace=Ot[et.colorSpace]),"type"in et){var Xe=et.type;H(te.oes_texture_float||!(Xe==="float"||Xe==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),H(te.oes_texture_half_float||!(Xe==="half float"||Xe==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),H(te.webgl_depth_texture||!(Xe==="uint16"||Xe==="uint32"||Xe==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),H.parameter(Xe,Ut,"invalid texture type"),de.type=Ut[Xe]}var Zt=de.width,Xr=de.height,le=de.channels,Z=!1;"shape"in et?(H(Array.isArray(et.shape)&&et.shape.length>=2,"shape must be an array"),Zt=et.shape[0],Xr=et.shape[1],et.shape.length===3&&(le=et.shape[2],H(le>0&&le<=4,"invalid number of channels"),Z=!0),H(Zt>=0&&Zt<=ve.maxTextureSize,"invalid width"),H(Xr>=0&&Xr<=ve.maxTextureSize,"invalid height")):("radius"in et&&(Zt=Xr=et.radius,H(Zt>=0&&Zt<=ve.maxTextureSize,"invalid radius")),"width"in et&&(Zt=et.width,H(Zt>=0&&Zt<=ve.maxTextureSize,"invalid width")),"height"in et&&(Xr=et.height,H(Xr>=0&&Xr<=ve.maxTextureSize,"invalid height")),"channels"in et&&(le=et.channels,H(le>0&&le<=4,"invalid number of channels"),Z=!0)),de.width=Zt|0,de.height=Xr|0,de.channels=le|0;var Ce=!1;if("format"in et){var Be=et.format;H(te.webgl_depth_texture||!(Be==="depth"||Be==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),H.parameter(Be,Et,"invalid texture format");var He=de.internalformat=Et[Be];de.format=Bt[He],Be in Ut&&("type"in et||(de.type=Ut[Be])),Be in Lt&&(de.compressed=!0),Ce=!0}!Z&&Ce?de.channels=_s[de.format]:Z&&!Ce?de.channels!==Bb[de.format]&&(de.format=de.internalformat=Bb[de.channels]):Ce&&Z&&H(de.channels===_s[de.format],"number of channels inconsistent with specified format")}}function Ar(de){N.pixelStorei(sie,de.flipY),N.pixelStorei(lie,de.premultiplyAlpha),N.pixelStorei(uie,de.colorSpace),N.pixelStorei(oie,de.unpackAlignment)}function Vt(){bt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Pt(de,et){var Xe=null;if(ME(et)?Xe=et:et&&(H.type(et,"object","invalid pixel data type"),fr(de,et),"x"in et&&(de.xOffset=et.x|0),"y"in et&&(de.yOffset=et.y|0),ME(et.data)&&(Xe=et.data)),H(!de.compressed||Xe instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),et.copy){H(!Xe,"can not specify copy and data field for the same texture");var Zt=dt.viewportWidth,Xr=dt.viewportHeight;de.width=de.width||Zt-de.xOffset,de.height=de.height||Xr-de.yOffset,de.needsCopy=!0,H(de.xOffset>=0&&de.xOffset<Zt&&de.yOffset>=0&&de.yOffset<Xr&&de.width>0&&de.width<=Zt&&de.height>0&&de.height<=Xr,"copy texture read out of bounds")}else if(!Xe)de.width=de.width||1,de.height=de.height||1,de.channels=de.channels||4;else if(e(Xe))de.channels=de.channels||4,de.data=Xe,!("type"in et)&&de.type===Yh&&(de.type=sL(Xe));else if(nL(Xe))de.channels=de.channels||4,gie(de,Xe),de.alignment=1,de.needsFree=!0;else if(Ks(Xe)){var le=Xe.data;!Array.isArray(le)&&de.type===Yh&&(de.type=sL(le));var Z=Xe.shape,Ce=Xe.stride,Be,He,Te,Ee,Oe,ue;Z.length===3?(Te=Z[2],ue=Ce[2]):(H(Z.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Te=1,ue=1),Be=Z[0],He=Z[1],Ee=Ce[0],Oe=Ce[1],de.alignment=1,de.width=Be,de.height=He,de.channels=Te,de.format=de.internalformat=Bb[Te],de.needsFree=!0,mie(de,le,Ee,Oe,ue,Xe.offset)}else if(aL(Xe)||oL(Xe)||die(Xe))aL(Xe)||oL(Xe)?de.element=Xe:de.element=Xe.canvas,de.width=de.element.width,de.height=de.element.height,de.channels=4;else if(hie(Xe))de.element=Xe,de.width=Xe.width,de.height=Xe.height,de.channels=4;else if(vie(Xe))de.element=Xe,de.width=Xe.naturalWidth,de.height=Xe.naturalHeight,de.channels=4;else if(pie(Xe))de.element=Xe,de.width=Xe.videoWidth,de.height=Xe.videoHeight,de.channels=4;else if(iL(Xe)){var be=de.width||Xe[0].length,oe=de.height||Xe.length,Fe=de.channels;Ri(Xe[0][0])?Fe=Fe||Xe[0][0].length:Fe=Fe||1;for(var je=Ib.shape(Xe),ct=1,ht=0;ht<je.length;++ht)ct*=je[ht];var lt=lL(de,ct);Ib.flatten(Xe,je,"",lt),uL(de,lt),de.alignment=1,de.width=be,de.height=oe,de.channels=Fe,de.format=de.internalformat=Bb[Fe],de.needsFree=!0}de.type===Dg?H(ve.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):de.type===jh&&H(ve.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function gt(de,et,Xe){var Zt=de.element,Xr=de.data,le=de.internalformat,Z=de.format,Ce=de.type,Be=de.width,He=de.height;Ar(de),Zt?N.texImage2D(et,Xe,Z,Z,Ce,Zt):de.compressed?N.compressedTexImage2D(et,Xe,le,Be,He,0,Xr):de.needsCopy?(Ze(),N.copyTexImage2D(et,Xe,Z,de.xOffset,de.yOffset,Be,He,0)):N.texImage2D(et,Xe,Z,Be,He,0,Z,Ce,Xr||null)}function wr(de,et,Xe,Zt,Xr){var le=de.element,Z=de.data,Ce=de.internalformat,Be=de.format,He=de.type,Te=de.width,Ee=de.height;Ar(de),le?N.texSubImage2D(et,Xr,Xe,Zt,Be,He,le):de.compressed?N.compressedTexSubImage2D(et,Xr,Xe,Zt,Ce,Te,Ee,Z):de.needsCopy?(Ze(),N.copyTexSubImage2D(et,Xr,Xe,Zt,de.xOffset,de.yOffset,Te,Ee)):N.texSubImage2D(et,Xr,Xe,Zt,Te,Ee,Be,He,Z)}var Fr=[];function Jt(){return Fr.pop()||new Vt}function Yr(de){de.needsFree&&xr.freeType(de.data),Vt.call(de),Fr.push(de)}function kr(){bt.call(this),this.genMipmaps=!1,this.mipmapHint=Nb,this.mipmask=0,this.images=Array(16)}function Gr(de,et,Xe){var Zt=de.images[0]=Jt();de.mipmask=1,Zt.width=de.width=et,Zt.height=de.height=Xe,Zt.channels=de.channels=4}function mn(de,et){var Xe=null;if(ME(et))Xe=de.images[0]=Jt(),$t(Xe,de),Pt(Xe,et),de.mipmask=1;else if(fr(de,et),Array.isArray(et.mipmap))for(var Zt=et.mipmap,Xr=0;Xr<Zt.length;++Xr)Xe=de.images[Xr]=Jt(),$t(Xe,de),Xe.width>>=Xr,Xe.height>>=Xr,Pt(Xe,Zt[Xr]),de.mipmask|=1<<Xr;else Xe=de.images[0]=Jt(),$t(Xe,de),Pt(Xe,et),de.mipmask=1;$t(de,de.images[0]),de.compressed&&(de.internalformat===bE||de.internalformat===xE||de.internalformat===wE||de.internalformat===SE)&&H(de.width%4==0&&de.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ji(de,et){for(var Xe=de.images,Zt=0;Zt<Xe.length;++Zt){if(!Xe[Zt])return;gt(Xe[Zt],et,Zt)}}var da=[];function rn(){var de=da.pop()||new kr;bt.call(de),de.mipmask=0;for(var et=0;et<16;++et)de.images[et]=null;return de}function na(de){for(var et=de.images,Xe=0;Xe<et.length;++Xe)et[Xe]&&Yr(et[Xe]),et[Xe]=null;da.push(de)}function ai(){this.minFilter=TE,this.magFilter=TE,this.wrapS=_E,this.wrapT=_E,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Nb}function Yi(de,et){if("min"in et){var Xe=et.min;H.parameter(Xe,Tt),de.minFilter=Tt[Xe],cie.indexOf(de.minFilter)>=0&&!("faces"in et)&&(de.genMipmaps=!0)}if("mag"in et){var Zt=et.mag;H.parameter(Zt,It),de.magFilter=It[Zt]}var Xr=de.wrapS,le=de.wrapT;if("wrap"in et){var Z=et.wrap;typeof Z=="string"?(H.parameter(Z,_t),Xr=le=_t[Z]):Array.isArray(Z)&&(H.parameter(Z[0],_t),H.parameter(Z[1],_t),Xr=_t[Z[0]],le=_t[Z[1]])}else{if("wrapS"in et){var Ce=et.wrapS;H.parameter(Ce,_t),Xr=_t[Ce]}if("wrapT"in et){var Be=et.wrapT;H.parameter(Be,_t),le=_t[Be]}}if(de.wrapS=Xr,de.wrapT=le,"anisotropic"in et){var He=et.anisotropic;H(typeof He=="number"&&He>=1&&He<=ve.maxAnisotropic,"aniso samples must be between 1 and "),de.anisotropic=et.anisotropic}if("mipmap"in et){var Te=!1;switch(typeof et.mipmap){case"string":H.parameter(et.mipmap,Ct,"invalid mipmap hint"),de.mipmapHint=Ct[et.mipmap],de.genMipmaps=!0,Te=!0;break;case"boolean":Te=de.genMipmaps=et.mipmap;break;case"object":H(Array.isArray(et.mipmap),"invalid mipmap type"),de.genMipmaps=!1,Te=!0;break;default:H.raise("invalid mipmap type")}Te&&!("min"in et)&&(de.minFilter=AE)}}function ia(de,et){N.texParameteri(et,eie,de.minFilter),N.texParameteri(et,Jne,de.magFilter),N.texParameteri(et,qne,de.wrapS),N.texParameteri(et,Kne,de.wrapT),te.ext_texture_filter_anisotropic&&N.texParameteri(et,aie,de.anisotropic),de.genMipmaps&&(N.hint(rie,de.mipmapHint),N.generateMipmap(et))}var aa=0,ma={},Da=ve.maxTextureUnits,Oi=Array(Da).map(function(){return null});function Nr(de){bt.call(this),this.mipmask=0,this.internalformat=Ff,this.id=aa++,this.refCount=1,this.target=de,this.texture=N.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new ai,it.profile&&(this.stats={size:0})}function Ra(de){N.activeTexture(Rg),N.bindTexture(de.target,de.texture)}function Tn(){var de=Oi[0];de?N.bindTexture(de.target,de.texture):N.bindTexture(ml,null)}function pr(de){var et=de.texture;H(et,"must not double destroy texture");var Xe=de.unit,Zt=de.target;Xe>=0&&(N.activeTexture(Rg+Xe),N.bindTexture(Zt,null),Oi[Xe]=null),N.deleteTexture(et),de.texture=null,de.params=null,de.pixels=null,de.refCount=0,delete ma[de.id],Ke.textureCount--}n(Nr.prototype,{bind:function(){var de=this;de.bindCount+=1;var et=de.unit;if(et<0){for(var Xe=0;Xe<Da;++Xe){var Zt=Oi[Xe];if(Zt){if(Zt.bindCount>0)continue;Zt.unit=-1}Oi[Xe]=de,et=Xe;break}et>=Da&&H.raise("insufficient number of texture units"),it.profile&&Ke.maxTextureUnits<et+1&&(Ke.maxTextureUnits=et+1),de.unit=et,N.activeTexture(Rg+et),N.bindTexture(de.target,de.texture)}return et},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&pr(this)}});function Zr(de,et){var Xe=new Nr(ml);ma[Xe.id]=Xe,Ke.textureCount++;function Zt(Z,Ce){var Be=Xe.texInfo;ai.call(Be);var He=rn();return typeof Z=="number"?typeof Ce=="number"?Gr(He,Z|0,Ce|0):Gr(He,Z|0,Z|0):Z?(H.type(Z,"object","invalid arguments to regl.texture"),Yi(Be,Z),mn(He,Z)):Gr(He,1,1),Be.genMipmaps&&(He.mipmask=(He.width<<1)-1),Xe.mipmask=He.mipmask,$t(Xe,He),H.texture2D(Be,He,ve),Xe.internalformat=He.internalformat,Zt.width=He.width,Zt.height=He.height,Ra(Xe),ji(He,ml),ia(Be,ml),Tn(),na(He),it.profile&&(Xe.stats.size=$b(Xe.internalformat,Xe.type,He.width,He.height,Be.genMipmaps,!1)),Zt.format=Mt[Xe.internalformat],Zt.type=Yt[Xe.type],Zt.mag=yt[Be.magFilter],Zt.min=qt[Be.minFilter],Zt.wrapS=xt[Be.wrapS],Zt.wrapT=xt[Be.wrapT],Zt}function Xr(Z,Ce,Be,He){H(!!Z,"must specify image data");var Te=Ce|0,Ee=Be|0,Oe=He|0,ue=Jt();return $t(ue,Xe),ue.width=0,ue.height=0,Pt(ue,Z),ue.width=ue.width||(Xe.width>>Oe)-Te,ue.height=ue.height||(Xe.height>>Oe)-Ee,H(Xe.type===ue.type&&Xe.format===ue.format&&Xe.internalformat===ue.internalformat,"incompatible format for texture.subimage"),H(Te>=0&&Ee>=0&&Te+ue.width<=Xe.width&&Ee+ue.height<=Xe.height,"texture.subimage write out of bounds"),H(Xe.mipmask&1<<Oe,"missing mipmap data"),H(ue.data||ue.element||ue.needsCopy,"missing image data"),Ra(Xe),wr(ue,ml,Te,Ee,Oe),Tn(),Yr(ue),Zt}function le(Z,Ce){var Be=Z|0,He=Ce|0||Be;if(Be===Xe.width&&He===Xe.height)return Zt;Zt.width=Xe.width=Be,Zt.height=Xe.height=He,Ra(Xe);for(var Te=0;Xe.mipmask>>Te;++Te){var Ee=Be>>Te,Oe=He>>Te;if(!Ee||!Oe)break;N.texImage2D(ml,Te,Xe.format,Ee,Oe,0,Xe.format,Xe.type,null)}return Tn(),it.profile&&(Xe.stats.size=$b(Xe.internalformat,Xe.type,Be,He,!1,!1)),Zt}return Zt(de,et),Zt.subimage=Xr,Zt.resize=le,Zt._reglType="texture2d",Zt._texture=Xe,it.profile&&(Zt.stats=Xe.stats),Zt.destroy=function(){Xe.decRef()},Zt}function hn(de,et,Xe,Zt,Xr,le){var Z=new Nr(hE);ma[Z.id]=Z,Ke.cubeCount++;var Ce=new Array(6);function Be(Ee,Oe,ue,be,oe,Fe){var je,ct=Z.texInfo;for(ai.call(ct),je=0;je<6;++je)Ce[je]=rn();if(typeof Ee=="number"||!Ee){var ht=Ee|0||1;for(je=0;je<6;++je)Gr(Ce[je],ht,ht)}else if(typeof Ee=="object")if(Oe)mn(Ce[0],Ee),mn(Ce[1],Oe),mn(Ce[2],ue),mn(Ce[3],be),mn(Ce[4],oe),mn(Ce[5],Fe);else if(Yi(ct,Ee),fr(Z,Ee),"faces"in Ee){var lt=Ee.faces;for(H(Array.isArray(lt)&&lt.length===6,"cube faces must be a length 6 array"),je=0;je<6;++je)H(typeof lt[je]=="object"&&!!lt[je],"invalid input for cube map face"),$t(Ce[je],Z),mn(Ce[je],lt[je])}else for(je=0;je<6;++je)mn(Ce[je],Ee);else H.raise("invalid arguments to cube map");for($t(Z,Ce[0]),ve.npotTextureCube||H(NO(Z.width)&&NO(Z.height),"your browser does not support non power or two texture dimensions"),ct.genMipmaps?Z.mipmask=(Ce[0].width<<1)-1:Z.mipmask=Ce[0].mipmask,H.textureCube(Z,ct,Ce,ve),Z.internalformat=Ce[0].internalformat,Be.width=Ce[0].width,Be.height=Ce[0].height,Ra(Z),je=0;je<6;++je)ji(Ce[je],Rb+je);for(ia(ct,hE),Tn(),it.profile&&(Z.stats.size=$b(Z.internalformat,Z.type,Be.width,Be.height,ct.genMipmaps,!0)),Be.format=Mt[Z.internalformat],Be.type=Yt[Z.type],Be.mag=yt[ct.magFilter],Be.min=qt[ct.minFilter],Be.wrapS=xt[ct.wrapS],Be.wrapT=xt[ct.wrapT],je=0;je<6;++je)na(Ce[je]);return Be}function He(Ee,Oe,ue,be,oe){H(!!Oe,"must specify image data"),H(typeof Ee=="number"&&Ee===(Ee|0)&&Ee>=0&&Ee<6,"invalid face");var Fe=ue|0,je=be|0,ct=oe|0,ht=Jt();return $t(ht,Z),ht.width=0,ht.height=0,Pt(ht,Oe),ht.width=ht.width||(Z.width>>ct)-Fe,ht.height=ht.height||(Z.height>>ct)-je,H(Z.type===ht.type&&Z.format===ht.format&&Z.internalformat===ht.internalformat,"incompatible format for texture.subimage"),H(Fe>=0&&je>=0&&Fe+ht.width<=Z.width&&je+ht.height<=Z.height,"texture.subimage write out of bounds"),H(Z.mipmask&1<<ct,"missing mipmap data"),H(ht.data||ht.element||ht.needsCopy,"missing image data"),Ra(Z),wr(ht,Rb+Ee,Fe,je,ct),Tn(),Yr(ht),Be}function Te(Ee){var Oe=Ee|0;if(Oe!==Z.width){Be.width=Z.width=Oe,Be.height=Z.height=Oe,Ra(Z);for(var ue=0;ue<6;++ue)for(var be=0;Z.mipmask>>be;++be)N.texImage2D(Rb+ue,be,Z.format,Oe>>be,Oe>>be,0,Z.format,Z.type,null);return Tn(),it.profile&&(Z.stats.size=$b(Z.internalformat,Z.type,Be.width,Be.height,!1,!0)),Be}}return Be(de,et,Xe,Zt,Xr,le),Be.subimage=He,Be.resize=Te,Be._reglType="textureCube",Be._texture=Z,it.profile&&(Be.stats=Z.stats),Be.destroy=function(){Z.decRef()},Be}function Li(){for(var de=0;de<Da;++de)N.activeTexture(Rg+de),N.bindTexture(ml,null),Oi[de]=null;ns(ma).forEach(pr),Ke.cubeCount=0,Ke.textureCount=0}it.profile&&(Ke.getTotalTextureSize=function(){var de=0;return Object.keys(ma).forEach(function(et){de+=ma[et].stats.size}),de});function bl(){for(var de=0;de<Da;++de){var et=Oi[de];et&&(et.bindCount=0,et.unit=-1,Oi[de]=null)}ns(ma).forEach(function(Xe){Xe.texture=N.createTexture(),N.bindTexture(Xe.target,Xe.texture);for(var Zt=0;Zt<32;++Zt)if((Xe.mipmask&1<<Zt)!=0)if(Xe.target===ml)N.texImage2D(ml,Zt,Xe.internalformat,Xe.width>>Zt,Xe.height>>Zt,0,Xe.internalformat,Xe.type,null);else for(var Xr=0;Xr<6;++Xr)N.texImage2D(Rb+Xr,Zt,Xe.internalformat,Xe.width>>Zt,Xe.height>>Zt,0,Xe.internalformat,Xe.type,null);ia(Xe.texInfo,Xe.target)})}function Hf(){for(var de=0;de<Da;++de){var et=Oi[de];et&&(et.bindCount=0,et.unit=-1,Oi[de]=null),N.activeTexture(Rg+de),N.bindTexture(ml,null),N.bindTexture(hE,null)}}return{create2D:Zr,createCube:hn,clear:Li,getTexture:function(de){return null},restore:bl,refresh:Hf}}var lc=36161,zb=32854,cL=32855,fL=36194,dL=33189,hL=36168,vL=34041,pL=35907,gL=34836,mL=34842,yL=34843,Zs=[];Zs[zb]=2,Zs[cL]=2,Zs[fL]=2,Zs[dL]=2,Zs[hL]=1,Zs[vL]=4,Zs[pL]=4,Zs[gL]=16,Zs[mL]=8,Zs[yL]=6;function bL(N,te,ve){return Zs[N]*te*ve}var bie=function(N,te,ve,Ze,dt){var Ke={rgba4:zb,rgb565:fL,"rgb5 a1":cL,depth:dL,stencil:hL,"depth stencil":vL};te.ext_srgb&&(Ke.srgba=pL),te.ext_color_buffer_half_float&&(Ke.rgba16f=mL,Ke.rgb16f=yL),te.webgl_color_buffer_float&&(Ke.rgba32f=gL);var it=[];Object.keys(Ke).forEach(function(Et){var Lt=Ke[Et];it[Lt]=Et});var Ct=0,_t={};function It(Et){this.id=Ct++,this.refCount=1,this.renderbuffer=Et,this.format=zb,this.width=0,this.height=0,dt.profile&&(this.stats={size:0})}It.prototype.decRef=function(){--this.refCount<=0&&Tt(this)};function Tt(Et){var Lt=Et.renderbuffer;H(Lt,"must not double destroy renderbuffer"),N.bindRenderbuffer(lc,null),N.deleteRenderbuffer(Lt),Et.renderbuffer=null,Et.refCount=0,delete _t[Et.id],Ze.renderbufferCount--}function Ot(Et,Lt){var ze=new It(N.createRenderbuffer());_t[ze.id]=ze,Ze.renderbufferCount++;function at(Yt,yt){var qt=0,xt=0,Bt=zb;if(typeof Yt=="object"&&Yt){var bt=Yt;if("shape"in bt){var $t=bt.shape;H(Array.isArray($t)&&$t.length>=2,"invalid renderbuffer shape"),qt=$t[0]|0,xt=$t[1]|0}else"radius"in bt&&(qt=xt=bt.radius|0),"width"in bt&&(qt=bt.width|0),"height"in bt&&(xt=bt.height|0);"format"in bt&&(H.parameter(bt.format,Ke,"invalid renderbuffer format"),Bt=Ke[bt.format])}else typeof Yt=="number"?(qt=Yt|0,typeof yt=="number"?xt=yt|0:xt=qt):Yt?H.raise("invalid arguments to renderbuffer constructor"):qt=xt=1;if(H(qt>0&&xt>0&&qt<=ve.maxRenderbufferSize&&xt<=ve.maxRenderbufferSize,"invalid renderbuffer size"),!(qt===ze.width&&xt===ze.height&&Bt===ze.format))return at.width=ze.width=qt,at.height=ze.height=xt,ze.format=Bt,N.bindRenderbuffer(lc,ze.renderbuffer),N.renderbufferStorage(lc,Bt,qt,xt),H(N.getError()===0,"invalid render buffer format"),dt.profile&&(ze.stats.size=bL(ze.format,ze.width,ze.height)),at.format=it[ze.format],at}function Mt(Yt,yt){var qt=Yt|0,xt=yt|0||qt;return qt===ze.width&&xt===ze.height||(H(qt>0&&xt>0&&qt<=ve.maxRenderbufferSize&&xt<=ve.maxRenderbufferSize,"invalid renderbuffer size"),at.width=ze.width=qt,at.height=ze.height=xt,N.bindRenderbuffer(lc,ze.renderbuffer),N.renderbufferStorage(lc,ze.format,qt,xt),H(N.getError()===0,"invalid render buffer format"),dt.profile&&(ze.stats.size=bL(ze.format,ze.width,ze.height))),at}return at(Et,Lt),at.resize=Mt,at._reglType="renderbuffer",at._renderbuffer=ze,dt.profile&&(at.stats=ze.stats),at.destroy=function(){ze.decRef()},at}dt.profile&&(Ze.getTotalRenderbufferSize=function(){var Et=0;return Object.keys(_t).forEach(function(Lt){Et+=_t[Lt].stats.size}),Et});function Ut(){ns(_t).forEach(function(Et){Et.renderbuffer=N.createRenderbuffer(),N.bindRenderbuffer(lc,Et.renderbuffer),N.renderbufferStorage(lc,Et.format,Et.width,Et.height)}),N.bindRenderbuffer(lc,null)}return{create:Ot,clear:function(){ns(_t).forEach(Tt)},restore:Ut}},hu=36160,IE=36161,Bf=3553,Gb=34069,xL=36064,wL=36096,SL=36128,CL=33306,EL=36053,xie=36054,wie=36055,Sie=36057,Cie=36061,Eie=36193,_ie=5121,Tie=5126,_L=6407,TL=6408,Aie=6402,kie=[_L,TL],PE=[];PE[TL]=4,PE[_L]=3;var Ub=[];Ub[_ie]=1,Ub[Tie]=4,Ub[Eie]=2;var Mie=32854,Iie=32855,Pie=36194,Die=33189,Rie=36168,AL=34041,Oie=35907,Lie=34836,Fie=34842,Nie=34843,Bie=[Mie,Iie,Pie,Oie,Fie,Nie,Lie],Kh={};Kh[EL]="complete",Kh[xie]="incomplete attachment",Kh[Sie]="incomplete dimensions",Kh[wie]="incomplete, missing attachment",Kh[Cie]="unsupported";function $ie(N,te,ve,Ze,dt,Ke){var it={cur:null,next:null,dirty:!1,setFBO:null},Ct=["rgba"],_t=["rgba4","rgb565","rgb5 a1"];te.ext_srgb&&_t.push("srgba"),te.ext_color_buffer_half_float&&_t.push("rgba16f","rgb16f"),te.webgl_color_buffer_float&&_t.push("rgba32f");var It=["uint8"];te.oes_texture_half_float&&It.push("half float","float16"),te.oes_texture_float&&It.push("float","float32");function Tt(Vt,Pt,gt){this.target=Vt,this.texture=Pt,this.renderbuffer=gt;var wr=0,Fr=0;Pt?(wr=Pt.width,Fr=Pt.height):gt&&(wr=gt.width,Fr=gt.height),this.width=wr,this.height=Fr}function Ot(Vt){Vt&&(Vt.texture&&Vt.texture._texture.decRef(),Vt.renderbuffer&&Vt.renderbuffer._renderbuffer.decRef())}function Ut(Vt,Pt,gt){if(!!Vt)if(Vt.texture){var wr=Vt.texture._texture,Fr=Math.max(1,wr.width),Jt=Math.max(1,wr.height);H(Fr===Pt&&Jt===gt,"inconsistent width/height for supplied texture"),wr.refCount+=1}else{var Yr=Vt.renderbuffer._renderbuffer;H(Yr.width===Pt&&Yr.height===gt,"inconsistent width/height for renderbuffer"),Yr.refCount+=1}}function Et(Vt,Pt){Pt&&(Pt.texture?N.framebufferTexture2D(hu,Vt,Pt.target,Pt.texture._texture.texture,0):N.framebufferRenderbuffer(hu,Vt,IE,Pt.renderbuffer._renderbuffer.renderbuffer))}function Lt(Vt){var Pt=Bf,gt=null,wr=null,Fr=Vt;typeof Vt=="object"&&(Fr=Vt.data,"target"in Vt&&(Pt=Vt.target|0)),H.type(Fr,"function","invalid attachment data");var Jt=Fr._reglType;return Jt==="texture2d"?(gt=Fr,H(Pt===Bf)):Jt==="textureCube"?(gt=Fr,H(Pt>=Gb&&Pt<Gb+6,"invalid cube map target")):Jt==="renderbuffer"?(wr=Fr,Pt=IE):H.raise("invalid regl object for attachment"),new Tt(Pt,gt,wr)}function ze(Vt,Pt,gt,wr,Fr){if(gt){var Jt=Ze.create2D({width:Vt,height:Pt,format:wr,type:Fr});return Jt._texture.refCount=0,new Tt(Bf,Jt,null)}else{var Yr=dt.create({width:Vt,height:Pt,format:wr});return Yr._renderbuffer.refCount=0,new Tt(IE,null,Yr)}}function at(Vt){return Vt&&(Vt.texture||Vt.renderbuffer)}function Mt(Vt,Pt,gt){Vt&&(Vt.texture?Vt.texture.resize(Pt,gt):Vt.renderbuffer&&Vt.renderbuffer.resize(Pt,gt),Vt.width=Pt,Vt.height=gt)}var Yt=0,yt={};function qt(){this.id=Yt++,yt[this.id]=this,this.framebuffer=N.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function xt(Vt){Vt.colorAttachments.forEach(Ot),Ot(Vt.depthAttachment),Ot(Vt.stencilAttachment),Ot(Vt.depthStencilAttachment)}function Bt(Vt){var Pt=Vt.framebuffer;H(Pt,"must not double destroy framebuffer"),N.deleteFramebuffer(Pt),Vt.framebuffer=null,Ke.framebufferCount--,delete yt[Vt.id]}function bt(Vt){var Pt;N.bindFramebuffer(hu,Vt.framebuffer);var gt=Vt.colorAttachments;for(Pt=0;Pt<gt.length;++Pt)Et(xL+Pt,gt[Pt]);for(Pt=gt.length;Pt<ve.maxColorAttachments;++Pt)N.framebufferTexture2D(hu,xL+Pt,Bf,null,0);N.framebufferTexture2D(hu,CL,Bf,null,0),N.framebufferTexture2D(hu,wL,Bf,null,0),N.framebufferTexture2D(hu,SL,Bf,null,0),Et(wL,Vt.depthAttachment),Et(SL,Vt.stencilAttachment),Et(CL,Vt.depthStencilAttachment);var wr=N.checkFramebufferStatus(hu);!N.isContextLost()&&wr!==EL&&H.raise("framebuffer configuration not supported, status = "+Kh[wr]),N.bindFramebuffer(hu,it.next?it.next.framebuffer:null),it.cur=it.next,N.getError()}function $t(Vt,Pt){var gt=new qt;Ke.framebufferCount++;function wr(Jt,Yr){var kr;H(it.next!==gt,"can not update framebuffer which is currently in use");var Gr=0,mn=0,ji=!0,da=!0,rn=null,na=!0,ai="rgba",Yi="uint8",ia=1,aa=null,ma=null,Da=null,Oi=!1;if(typeof Jt=="number")Gr=Jt|0,mn=Yr|0||Gr;else if(!Jt)Gr=mn=1;else{H.type(Jt,"object","invalid arguments for framebuffer");var Nr=Jt;if("shape"in Nr){var Ra=Nr.shape;H(Array.isArray(Ra)&&Ra.length>=2,"invalid shape for framebuffer"),Gr=Ra[0],mn=Ra[1]}else"radius"in Nr&&(Gr=mn=Nr.radius),"width"in Nr&&(Gr=Nr.width),"height"in Nr&&(mn=Nr.height);("color"in Nr||"colors"in Nr)&&(rn=Nr.color||Nr.colors,Array.isArray(rn)&&H(rn.length===1||te.webgl_draw_buffers,"multiple render targets not supported")),rn||("colorCount"in Nr&&(ia=Nr.colorCount|0,H(ia>0,"invalid color buffer count")),"colorTexture"in Nr&&(na=!!Nr.colorTexture,ai="rgba4"),"colorType"in Nr&&(Yi=Nr.colorType,na?(H(te.oes_texture_float||!(Yi==="float"||Yi==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),H(te.oes_texture_half_float||!(Yi==="half float"||Yi==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Yi==="half float"||Yi==="float16"?(H(te.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),ai="rgba16f"):(Yi==="float"||Yi==="float32")&&(H(te.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),ai="rgba32f"),H.oneOf(Yi,It,"invalid color type")),"colorFormat"in Nr&&(ai=Nr.colorFormat,Ct.indexOf(ai)>=0?na=!0:_t.indexOf(ai)>=0?na=!1:na?H.oneOf(Nr.colorFormat,Ct,"invalid color format for texture"):H.oneOf(Nr.colorFormat,_t,"invalid color format for renderbuffer"))),("depthTexture"in Nr||"depthStencilTexture"in Nr)&&(Oi=!!(Nr.depthTexture||Nr.depthStencilTexture),H(!Oi||te.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Nr&&(typeof Nr.depth=="boolean"?ji=Nr.depth:(aa=Nr.depth,da=!1)),"stencil"in Nr&&(typeof Nr.stencil=="boolean"?da=Nr.stencil:(ma=Nr.stencil,ji=!1)),"depthStencil"in Nr&&(typeof Nr.depthStencil=="boolean"?ji=da=Nr.depthStencil:(Da=Nr.depthStencil,ji=!1,da=!1))}var Tn=null,pr=null,Zr=null,hn=null;if(Array.isArray(rn))Tn=rn.map(Lt);else if(rn)Tn=[Lt(rn)];else for(Tn=new Array(ia),kr=0;kr<ia;++kr)Tn[kr]=ze(Gr,mn,na,ai,Yi);H(te.webgl_draw_buffers||Tn.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),H(Tn.length<=ve.maxColorAttachments,"too many color attachments, not supported"),Gr=Gr||Tn[0].width,mn=mn||Tn[0].height,aa?pr=Lt(aa):ji&&!da&&(pr=ze(Gr,mn,Oi,"depth","uint32")),ma?Zr=Lt(ma):da&&!ji&&(Zr=ze(Gr,mn,!1,"stencil","uint8")),Da?hn=Lt(Da):!aa&&!ma&&da&&ji&&(hn=ze(Gr,mn,Oi,"depth stencil","depth stencil")),H(!!aa+!!ma+!!Da<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Li=null;for(kr=0;kr<Tn.length;++kr)if(Ut(Tn[kr],Gr,mn),H(!Tn[kr]||Tn[kr].texture&&kie.indexOf(Tn[kr].texture._texture.format)>=0||Tn[kr].renderbuffer&&Bie.indexOf(Tn[kr].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+kr+" is invalid"),Tn[kr]&&Tn[kr].texture){var bl=PE[Tn[kr].texture._texture.format]*Ub[Tn[kr].texture._texture.type];Li===null?Li=bl:H(Li===bl,"all color attachments much have the same number of bits per pixel.")}return Ut(pr,Gr,mn),H(!pr||pr.texture&&pr.texture._texture.format===Aie||pr.renderbuffer&&pr.renderbuffer._renderbuffer.format===Die,"invalid depth attachment for framebuffer object"),Ut(Zr,Gr,mn),H(!Zr||Zr.renderbuffer&&Zr.renderbuffer._renderbuffer.format===Rie,"invalid stencil attachment for framebuffer object"),Ut(hn,Gr,mn),H(!hn||hn.texture&&hn.texture._texture.format===AL||hn.renderbuffer&&hn.renderbuffer._renderbuffer.format===AL,"invalid depth-stencil attachment for framebuffer object"),xt(gt),gt.width=Gr,gt.height=mn,gt.colorAttachments=Tn,gt.depthAttachment=pr,gt.stencilAttachment=Zr,gt.depthStencilAttachment=hn,wr.color=Tn.map(at),wr.depth=at(pr),wr.stencil=at(Zr),wr.depthStencil=at(hn),wr.width=gt.width,wr.height=gt.height,bt(gt),wr}function Fr(Jt,Yr){H(it.next!==gt,"can not resize a framebuffer which is currently in use");var kr=Math.max(Jt|0,1),Gr=Math.max(Yr|0||kr,1);if(kr===gt.width&&Gr===gt.height)return wr;for(var mn=gt.colorAttachments,ji=0;ji<mn.length;++ji)Mt(mn[ji],kr,Gr);return Mt(gt.depthAttachment,kr,Gr),Mt(gt.stencilAttachment,kr,Gr),Mt(gt.depthStencilAttachment,kr,Gr),gt.width=wr.width=kr,gt.height=wr.height=Gr,bt(gt),wr}return wr(Vt,Pt),n(wr,{resize:Fr,_reglType:"framebuffer",_framebuffer:gt,destroy:function(){Bt(gt),xt(gt)},use:function(Jt){it.setFBO({framebuffer:wr},Jt)}})}function fr(Vt){var Pt=Array(6);function gt(Fr){var Jt;H(Pt.indexOf(it.next)<0,"can not update framebuffer which is currently in use");var Yr={color:null},kr=0,Gr=null,mn="rgba",ji="uint8",da=1;if(typeof Fr=="number")kr=Fr|0;else if(!Fr)kr=1;else{H.type(Fr,"object","invalid arguments for framebuffer");var rn=Fr;if("shape"in rn){var na=rn.shape;H(Array.isArray(na)&&na.length>=2,"invalid shape for framebuffer"),H(na[0]===na[1],"cube framebuffer must be square"),kr=na[0]}else"radius"in rn&&(kr=rn.radius|0),"width"in rn?(kr=rn.width|0,"height"in rn&&H(rn.height===kr,"must be square")):"height"in rn&&(kr=rn.height|0);("color"in rn||"colors"in rn)&&(Gr=rn.color||rn.colors,Array.isArray(Gr)&&H(Gr.length===1||te.webgl_draw_buffers,"multiple render targets not supported")),Gr||("colorCount"in rn&&(da=rn.colorCount|0,H(da>0,"invalid color buffer count")),"colorType"in rn&&(H.oneOf(rn.colorType,It,"invalid color type"),ji=rn.colorType),"colorFormat"in rn&&(mn=rn.colorFormat,H.oneOf(rn.colorFormat,Ct,"invalid color format for texture"))),"depth"in rn&&(Yr.depth=rn.depth),"stencil"in rn&&(Yr.stencil=rn.stencil),"depthStencil"in rn&&(Yr.depthStencil=rn.depthStencil)}var ai;if(Gr)if(Array.isArray(Gr))for(ai=[],Jt=0;Jt<Gr.length;++Jt)ai[Jt]=Gr[Jt];else ai=[Gr];else{ai=Array(da);var Yi={radius:kr,format:mn,type:ji};for(Jt=0;Jt<da;++Jt)ai[Jt]=Ze.createCube(Yi)}for(Yr.color=Array(ai.length),Jt=0;Jt<ai.length;++Jt){var ia=ai[Jt];H(typeof ia=="function"&&ia._reglType==="textureCube","invalid cube map"),kr=kr||ia.width,H(ia.width===kr&&ia.height===kr,"invalid cube map shape"),Yr.color[Jt]={target:Gb,data:ai[Jt]}}for(Jt=0;Jt<6;++Jt){for(var aa=0;aa<ai.length;++aa)Yr.color[aa].target=Gb+Jt;Jt>0&&(Yr.depth=Pt[0].depth,Yr.stencil=Pt[0].stencil,Yr.depthStencil=Pt[0].depthStencil),Pt[Jt]?Pt[Jt](Yr):Pt[Jt]=$t(Yr)}return n(gt,{width:kr,height:kr,color:ai})}function wr(Fr){var Jt,Yr=Fr|0;if(H(Yr>0&&Yr<=ve.maxCubeMapSize,"invalid radius for cube fbo"),Yr===gt.width)return gt;var kr=gt.color;for(Jt=0;Jt<kr.length;++Jt)kr[Jt].resize(Yr);for(Jt=0;Jt<6;++Jt)Pt[Jt].resize(Yr);return gt.width=gt.height=Yr,gt}return gt(Vt),n(gt,{faces:Pt,resize:wr,_reglType:"framebufferCube",destroy:function(){Pt.forEach(function(Fr){Fr.destroy()})}})}function Ar(){it.cur=null,it.next=null,it.dirty=!0,ns(yt).forEach(function(Vt){Vt.framebuffer=N.createFramebuffer(),bt(Vt)})}return n(it,{getFramebuffer:function(Vt){if(typeof Vt=="function"&&Vt._reglType==="framebuffer"){var Pt=Vt._framebuffer;if(Pt instanceof qt)return Pt}return null},create:$t,createCube:fr,clear:function(){ns(yt).forEach(Bt)},restore:Ar})}var zie=5126,kL=34962;function DE(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=zie,this.offset=0,this.stride=0,this.divisor=0}function Gie(N,te,ve,Ze,dt){for(var Ke=ve.maxAttributes,it=new Array(Ke),Ct=0;Ct<Ke;++Ct)it[Ct]=new DE;var _t=0,It={},Tt={Record:DE,scope:{},state:it,currentVAO:null,targetVAO:null,restore:Ut()?yt:function(){},createVAO:qt,getVAO:Lt,destroyBuffer:Ot,setVAO:Ut()?ze:at,clear:Ut()?Mt:function(){}};function Ot(xt){for(var Bt=0;Bt<it.length;++Bt){var bt=it[Bt];bt.buffer===xt&&(N.disableVertexAttribArray(Bt),bt.buffer=null)}}function Ut(){return te.oes_vertex_array_object}function Et(){return te.angle_instanced_arrays}function Lt(xt){return typeof xt=="function"&&xt._vao?xt._vao:null}function ze(xt){if(xt!==Tt.currentVAO){var Bt=Ut();xt?Bt.bindVertexArrayOES(xt.vao):Bt.bindVertexArrayOES(null),Tt.currentVAO=xt}}function at(xt){if(xt!==Tt.currentVAO){if(xt)xt.bindAttrs();else for(var Bt=Et(),bt=0;bt<it.length;++bt){var $t=it[bt];$t.buffer?(N.enableVertexAttribArray(bt),N.vertexAttribPointer(bt,$t.size,$t.type,$t.normalized,$t.stride,$t.offfset),Bt&&$t.divisor&&Bt.vertexAttribDivisorANGLE(bt,$t.divisor)):(N.disableVertexAttribArray(bt),N.vertexAttrib4f(bt,$t.x,$t.y,$t.z,$t.w))}Tt.currentVAO=xt}}function Mt(){ns(It).forEach(function(xt){xt.destroy()})}function Yt(){this.id=++_t,this.attributes=[];var xt=Ut();xt?this.vao=xt.createVertexArrayOES():this.vao=null,It[this.id]=this,this.buffers=[]}Yt.prototype.bindAttrs=function(){for(var xt=Et(),Bt=this.attributes,bt=0;bt<Bt.length;++bt){var $t=Bt[bt];$t.buffer?(N.enableVertexAttribArray(bt),N.bindBuffer(kL,$t.buffer.buffer),N.vertexAttribPointer(bt,$t.size,$t.type,$t.normalized,$t.stride,$t.offset),xt&&$t.divisor&&xt.vertexAttribDivisorANGLE(bt,$t.divisor)):(N.disableVertexAttribArray(bt),N.vertexAttrib4f(bt,$t.x,$t.y,$t.z,$t.w))}for(var fr=Bt.length;fr<Ke;++fr)N.disableVertexAttribArray(fr)},Yt.prototype.refresh=function(){var xt=Ut();xt&&(xt.bindVertexArrayOES(this.vao),this.bindAttrs(),Tt.currentVAO=this)},Yt.prototype.destroy=function(){if(this.vao){var xt=Ut();this===Tt.currentVAO&&(Tt.currentVAO=null,xt.bindVertexArrayOES(null)),xt.deleteVertexArrayOES(this.vao),this.vao=null}It[this.id]&&(delete It[this.id],Ze.vaoCount-=1)};function yt(){var xt=Ut();xt&&ns(It).forEach(function(Bt){Bt.refresh()})}function qt(xt){var Bt=new Yt;Ze.vaoCount+=1;function bt($t){H(Array.isArray($t),"arguments to vertex array constructor must be an array"),H($t.length<Ke,"too many attributes"),H($t.length>0,"must specify at least one attribute");var fr={},Ar=Bt.attributes;Ar.length=$t.length;for(var Vt=0;Vt<$t.length;++Vt){var Pt=$t[Vt],gt=Ar[Vt]=new DE,wr=Pt.data||Pt;if(Array.isArray(wr)||e(wr)||Ks(wr)){var Fr;Bt.buffers[Vt]&&(Fr=Bt.buffers[Vt],e(wr)&&Fr._buffer.byteLength>=wr.byteLength?Fr.subdata(wr):(Fr.destroy(),Bt.buffers[Vt]=null)),Bt.buffers[Vt]||(Fr=Bt.buffers[Vt]=dt.create(Pt,kL,!1,!0)),gt.buffer=dt.getBuffer(Fr),gt.size=gt.buffer.dimension|0,gt.normalized=!1,gt.type=gt.buffer.dtype,gt.offset=0,gt.stride=0,gt.divisor=0,gt.state=1,fr[Vt]=1}else dt.getBuffer(Pt)?(gt.buffer=dt.getBuffer(Pt),gt.size=gt.buffer.dimension|0,gt.normalized=!1,gt.type=gt.buffer.dtype,gt.offset=0,gt.stride=0,gt.divisor=0,gt.state=1):dt.getBuffer(Pt.buffer)?(gt.buffer=dt.getBuffer(Pt.buffer),gt.size=(+Pt.size||gt.buffer.dimension)|0,gt.normalized=!!Pt.normalized||!1,"type"in Pt?(H.parameter(Pt.type,Of,"invalid buffer type"),gt.type=Of[Pt.type]):gt.type=gt.buffer.dtype,gt.offset=(Pt.offset||0)|0,gt.stride=(Pt.stride||0)|0,gt.divisor=(Pt.divisor||0)|0,gt.state=1,H(gt.size>=1&&gt.size<=4,"size must be between 1 and 4"),H(gt.offset>=0,"invalid offset"),H(gt.stride>=0&&gt.stride<=255,"stride must be between 0 and 255"),H(gt.divisor>=0,"divisor must be positive"),H(!gt.divisor||!!te.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Pt?(H(Vt>0,"first attribute must not be a constant"),gt.x=+Pt.x||0,gt.y=+Pt.y||0,gt.z=+Pt.z||0,gt.w=+Pt.w||0,gt.state=2):H(!1,"invalid attribute spec for location "+Vt)}for(var Jt=0;Jt<Bt.buffers.length;++Jt)!fr[Jt]&&Bt.buffers[Jt]&&(Bt.buffers[Jt].destroy(),Bt.buffers[Jt]=null);return Bt.refresh(),bt}return bt.destroy=function(){for(var $t=0;$t<Bt.buffers.length;++$t)Bt.buffers[$t]&&Bt.buffers[$t].destroy();Bt.buffers.length=0,Bt.destroy()},bt._vao=Bt,bt._reglType="vao",bt(xt)}return Tt}var ML=35632,Uie=35633,Vie=35718,Hie=35721;function Wie(N,te,ve,Ze){var dt={},Ke={};function it(ze,at,Mt,Yt){this.name=ze,this.id=at,this.location=Mt,this.info=Yt}function Ct(ze,at){for(var Mt=0;Mt<ze.length;++Mt)if(ze[Mt].id===at.id){ze[Mt].location=at.location;return}ze.push(at)}function _t(ze,at,Mt){var Yt=ze===ML?dt:Ke,yt=Yt[at];if(!yt){var qt=te.str(at);yt=N.createShader(ze),N.shaderSource(yt,qt),N.compileShader(yt),H.shaderError(N,yt,qt,ze,Mt),Yt[at]=yt}return yt}var It={},Tt=[],Ot=0;function Ut(ze,at){this.id=Ot++,this.fragId=ze,this.vertId=at,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Ze.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Et(ze,at,Mt){var Yt,yt,qt=_t(ML,ze.fragId),xt=_t(Uie,ze.vertId),Bt=ze.program=N.createProgram();if(N.attachShader(Bt,qt),N.attachShader(Bt,xt),Mt)for(Yt=0;Yt<Mt.length;++Yt){var bt=Mt[Yt];N.bindAttribLocation(Bt,bt[0],bt[1])}N.linkProgram(Bt),H.linkError(N,Bt,te.str(ze.fragId),te.str(ze.vertId),at);var $t=N.getProgramParameter(Bt,Vie);Ze.profile&&(ze.stats.uniformsCount=$t);var fr=ze.uniforms;for(Yt=0;Yt<$t;++Yt)if(yt=N.getActiveUniform(Bt,Yt),yt)if(yt.size>1)for(var Ar=0;Ar<yt.size;++Ar){var Vt=yt.name.replace("[0]","["+Ar+"]");Ct(fr,new it(Vt,te.id(Vt),N.getUniformLocation(Bt,Vt),yt))}else Ct(fr,new it(yt.name,te.id(yt.name),N.getUniformLocation(Bt,yt.name),yt));var Pt=N.getProgramParameter(Bt,Hie);Ze.profile&&(ze.stats.attributesCount=Pt);var gt=ze.attributes;for(Yt=0;Yt<Pt;++Yt)yt=N.getActiveAttrib(Bt,Yt),yt&&Ct(gt,new it(yt.name,te.id(yt.name),N.getAttribLocation(Bt,yt.name),yt))}Ze.profile&&(ve.getMaxUniformsCount=function(){var ze=0;return Tt.forEach(function(at){at.stats.uniformsCount>ze&&(ze=at.stats.uniformsCount)}),ze},ve.getMaxAttributesCount=function(){var ze=0;return Tt.forEach(function(at){at.stats.attributesCount>ze&&(ze=at.stats.attributesCount)}),ze});function Lt(){dt={},Ke={};for(var ze=0;ze<Tt.length;++ze)Et(Tt[ze],null,Tt[ze].attributes.map(function(at){return[at.location,at.name]}))}return{clear:function(){var ze=N.deleteShader.bind(N);ns(dt).forEach(ze),dt={},ns(Ke).forEach(ze),Ke={},Tt.forEach(function(at){N.deleteProgram(at.program)}),Tt.length=0,It={},ve.shaderCount=0},program:function(ze,at,Mt,Yt){H.command(ze>=0,"missing vertex shader",Mt),H.command(at>=0,"missing fragment shader",Mt);var yt=It[at];yt||(yt=It[at]={});var qt=yt[ze];if(qt&&(qt.refCount++,!Yt))return qt;var xt=new Ut(at,ze);return ve.shaderCount++,Et(xt,Mt,Yt),qt||(yt[ze]=xt),Tt.push(xt),n(xt,{destroy:function(){if(xt.refCount--,xt.refCount<=0){N.deleteProgram(xt.program);var Bt=Tt.indexOf(xt);Tt.splice(Bt,1),ve.shaderCount--}yt[xt.vertId].refCount<=0&&(N.deleteShader(Ke[xt.vertId]),delete Ke[xt.vertId],delete It[xt.fragId][xt.vertId]),Object.keys(It[xt.fragId]).length||(N.deleteShader(dt[xt.fragId]),delete dt[xt.fragId],delete It[xt.fragId])}})},restore:Lt,shader:_t,frag:-1,vert:-1}}var jie=6408,Og=5121,Yie=3333,Vb=5126;function Xie(N,te,ve,Ze,dt,Ke,it){function Ct(Tt){var Ot;te.next===null?(H(dt.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Ot=Og):(H(te.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Ot=te.next.colorAttachments[0].texture._texture.type,Ke.oes_texture_float?(H(Ot===Og||Ot===Vb,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Ot===Vb&&H(it.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):H(Ot===Og,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Ut=0,Et=0,Lt=Ze.framebufferWidth,ze=Ze.framebufferHeight,at=null;e(Tt)?at=Tt:Tt&&(H.type(Tt,"object","invalid arguments to regl.read()"),Ut=Tt.x|0,Et=Tt.y|0,H(Ut>=0&&Ut<Ze.framebufferWidth,"invalid x offset for regl.read"),H(Et>=0&&Et<Ze.framebufferHeight,"invalid y offset for regl.read"),Lt=(Tt.width||Ze.framebufferWidth-Ut)|0,ze=(Tt.height||Ze.framebufferHeight-Et)|0,at=Tt.data||null),at&&(Ot===Og?H(at instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Ot===Vb&&H(at instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),H(Lt>0&&Lt+Ut<=Ze.framebufferWidth,"invalid width for read pixels"),H(ze>0&&ze+Et<=Ze.framebufferHeight,"invalid height for read pixels"),ve();var Mt=Lt*ze*4;return at||(Ot===Og?at=new Uint8Array(Mt):Ot===Vb&&(at=at||new Float32Array(Mt))),H.isTypedArray(at,"data buffer for regl.read() must be a typedarray"),H(at.byteLength>=Mt,"data buffer for regl.read() too small"),N.pixelStorei(Yie,4),N.readPixels(Ut,Et,Lt,ze,jie,Ot,at),at}function _t(Tt){var Ot;return te.setFBO({framebuffer:Tt.framebuffer},function(){Ot=Ct(Tt)}),Ot}function It(Tt){return!Tt||!("framebuffer"in Tt)?Ct(Tt):_t(Tt)}return It}function Zh(N){return Array.prototype.slice.call(N)}function Qh(N){return Zh(N).join("")}function qie(){var N=0,te=[],ve=[];function Ze(Ot){for(var Ut=0;Ut<ve.length;++Ut)if(ve[Ut]===Ot)return te[Ut];var Et="g"+N++;return te.push(Et),ve.push(Ot),Et}function dt(){var Ot=[];function Ut(){Ot.push.apply(Ot,Zh(arguments))}var Et=[];function Lt(){var ze="v"+N++;return Et.push(ze),arguments.length>0&&(Ot.push(ze,"="),Ot.push.apply(Ot,Zh(arguments)),Ot.push(";")),ze}return n(Ut,{def:Lt,toString:function(){return Qh([Et.length>0?"var "+Et.join(",")+";":"",Qh(Ot)])}})}function Ke(){var Ot=dt(),Ut=dt(),Et=Ot.toString,Lt=Ut.toString;function ze(at,Mt){Ut(at,Mt,"=",Ot.def(at,Mt),";")}return n(function(){Ot.apply(Ot,Zh(arguments))},{def:Ot.def,entry:Ot,exit:Ut,save:ze,set:function(at,Mt,Yt){ze(at,Mt),Ot(at,Mt,"=",Yt,";")},toString:function(){return Et()+Lt()}})}function it(){var Ot=Qh(arguments),Ut=Ke(),Et=Ke(),Lt=Ut.toString,ze=Et.toString;return n(Ut,{then:function(){return Ut.apply(Ut,Zh(arguments)),this},else:function(){return Et.apply(Et,Zh(arguments)),this},toString:function(){var at=ze();return at&&(at="else{"+at+"}"),Qh(["if(",Ot,"){",Lt(),"}",at])}})}var Ct=dt(),_t={};function It(Ot,Ut){var Et=[];function Lt(){var yt="a"+Et.length;return Et.push(yt),yt}Ut=Ut||0;for(var ze=0;ze<Ut;++ze)Lt();var at=Ke(),Mt=at.toString,Yt=_t[Ot]=n(at,{arg:Lt,toString:function(){return Qh(["function(",Et.join(),"){",Mt(),"}"])}});return Yt}function Tt(){var Ot=['"use strict";',Ct,"return {"];Object.keys(_t).forEach(function(Lt){Ot.push('"',Lt,'":',_t[Lt].toString(),",")}),Ot.push("}");var Ut=Qh(Ot).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Et=Function.apply(null,te.concat(Ut));return Et.apply(null,ve)}return{global:Ct,link:Ze,block:dt,proc:It,scope:Ke,cond:it,compile:Tt}}var Jh="xyzw".split(""),IL=5121,ev=1,RE=2,OE=0,LE=1,FE=2,NE=3,Hb=4,PL=5,DL=6,RL="dither",OL="blend.enable",LL="blend.color",BE="blend.equation",$E="blend.func",FL="depth.enable",NL="depth.func",BL="depth.range",$L="depth.mask",zE="colorMask",zL="cull.enable",GL="cull.face",GE="frontFace",UE="lineWidth",UL="polygonOffset.enable",VE="polygonOffset.offset",VL="sample.alpha",HL="sample.enable",HE="sample.coverage",WL="stencil.enable",jL="stencil.mask",WE="stencil.func",jE="stencil.opFront",Lg="stencil.opBack",YL="scissor.enable",Wb="scissor.box",vu="viewport",Fg="profile",$f="framebuffer",Ng="vert",Bg="frag",zf="elements",Gf="primitive",Uf="count",jb="offset",Yb="instances",$g="vao",YE="Width",XE="Height",tv=$f+YE,rv=$f+XE,Kie=vu+YE,Zie=vu+XE,XL="drawingBuffer",qL=XL+YE,KL=XL+XE,Qie=[$E,BE,WE,jE,Lg,HE,vu,Wb,VE],nv=34962,Jie=34963,eae=35632,tae=35633,ZL=3553,rae=34067,nae=2884,iae=3042,aae=3024,oae=2960,sae=2929,lae=3089,uae=32823,cae=32926,fae=32928,qE=5126,Xb=35664,qb=35665,Kb=35666,KE=5124,Zb=35667,Qb=35668,Jb=35669,ZE=35670,ex=35671,tx=35672,rx=35673,zg=35674,Gg=35675,Ug=35676,Vg=35678,Hg=35680,QL=4,Wg=1028,Vf=1029,JL=2304,QE=2305,dae=32775,hae=32776,vae=519,uc=7680,eF=0,tF=1,rF=32774,pae=513,nF=36160,gae=36064,yl={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},iF=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],iv={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},cc={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},aF={frag:eae,vert:tae},JE={cw:JL,ccw:QE};function nx(N){return Array.isArray(N)||e(N)||Ks(N)}function oF(N){return N.sort(function(te,ve){return te===vu?-1:ve===vu?1:te<ve?-1:1})}function bo(N,te,ve,Ze){this.thisDep=N,this.contextDep=te,this.propDep=ve,this.append=Ze}function fc(N){return N&&!(N.thisDep||N.contextDep||N.propDep)}function Wi(N){return new bo(!1,!1,!1,N)}function Oo(N,te){var ve=N.type;if(ve===OE){var Ze=N.data.length;return new bo(!0,Ze>=1,Ze>=2,te)}else if(ve===Hb){var dt=N.data;return new bo(dt.thisDep,dt.contextDep,dt.propDep,te)}else{if(ve===PL)return new bo(!1,!1,!1,te);if(ve===DL){for(var Ke=!1,it=!1,Ct=!1,_t=0;_t<N.data.length;++_t){var It=N.data[_t];if(It.type===LE)Ct=!0;else if(It.type===FE)it=!0;else if(It.type===NE)Ke=!0;else if(It.type===OE){Ke=!0;var Tt=It.data;Tt>=1&&(it=!0),Tt>=2&&(Ct=!0)}else It.type===Hb&&(Ke=Ke||It.data.thisDep,it=it||It.data.contextDep,Ct=Ct||It.data.propDep)}return new bo(Ke,it,Ct,te)}else return new bo(ve===NE,ve===FE,ve===LE,te)}}var sF=new bo(!1,!1,!1,function(){});function mae(N,te,ve,Ze,dt,Ke,it,Ct,_t,It,Tt,Ot,Ut,Et,Lt){var ze=It.Record,at={add:32774,subtract:32778,"reverse subtract":32779};ve.ext_blend_minmax&&(at.min=dae,at.max=hae);var Mt=ve.angle_instanced_arrays,Yt=ve.webgl_draw_buffers,yt={dirty:!0,profile:Lt.profile},qt={},xt=[],Bt={},bt={};function $t(le){return le.replace(".","_")}function fr(le,Z,Ce){var Be=$t(le);xt.push(le),qt[Be]=yt[Be]=!!Ce,Bt[Be]=Z}function Ar(le,Z,Ce){var Be=$t(le);xt.push(le),Array.isArray(Ce)?(yt[Be]=Ce.slice(),qt[Be]=Ce.slice()):yt[Be]=qt[Be]=Ce,bt[Be]=Z}fr(RL,aae),fr(OL,iae),Ar(LL,"blendColor",[0,0,0,0]),Ar(BE,"blendEquationSeparate",[rF,rF]),Ar($E,"blendFuncSeparate",[tF,eF,tF,eF]),fr(FL,sae,!0),Ar(NL,"depthFunc",pae),Ar(BL,"depthRange",[0,1]),Ar($L,"depthMask",!0),Ar(zE,zE,[!0,!0,!0,!0]),fr(zL,nae),Ar(GL,"cullFace",Vf),Ar(GE,GE,QE),Ar(UE,UE,1),fr(UL,uae),Ar(VE,"polygonOffset",[0,0]),fr(VL,cae),fr(HL,fae),Ar(HE,"sampleCoverage",[1,!1]),fr(WL,oae),Ar(jL,"stencilMask",-1),Ar(WE,"stencilFunc",[vae,0,-1]),Ar(jE,"stencilOpSeparate",[Wg,uc,uc,uc]),Ar(Lg,"stencilOpSeparate",[Vf,uc,uc,uc]),fr(YL,lae),Ar(Wb,"scissor",[0,0,N.drawingBufferWidth,N.drawingBufferHeight]),Ar(vu,vu,[0,0,N.drawingBufferWidth,N.drawingBufferHeight]);var Vt={gl:N,context:Ut,strings:te,next:qt,current:yt,draw:Ot,elements:Ke,buffer:dt,shader:Tt,attributes:It.state,vao:It,uniforms:_t,framebuffer:Ct,extensions:ve,timer:Et,isBufferArgs:nx},Pt={primTypes:Vh,compareFuncs:iv,blendFuncs:yl,blendEquations:at,stencilOps:cc,glTypes:Of,orientationType:JE};H.optional(function(){Vt.isArrayLike=Ri}),Yt&&(Pt.backBuffer=[Vf],Pt.drawBuffer=st(Ze.maxDrawbuffers,function(le){return le===0?[0]:st(le,function(Z){return gae+Z})}));var gt=0;function wr(){var le=qie(),Z=le.link,Ce=le.global;le.id=gt++,le.batchId="0";var Be=Z(Vt),He=le.shared={props:"a0"};Object.keys(Vt).forEach(function(be){He[be]=Ce.def(Be,".",be)}),H.optional(function(){le.CHECK=Z(H),le.commandStr=H.guessCommand(),le.command=Z(le.commandStr),le.assert=function(be,oe,Fe){be("if(!(",oe,"))",this.CHECK,".commandRaise(",Z(Fe),",",this.command,");")},Pt.invalidBlendCombinations=iF});var Te=le.next={},Ee=le.current={};Object.keys(bt).forEach(function(be){Array.isArray(yt[be])&&(Te[be]=Ce.def(He.next,".",be),Ee[be]=Ce.def(He.current,".",be))});var Oe=le.constants={};Object.keys(Pt).forEach(function(be){Oe[be]=Ce.def(JSON.stringify(Pt[be]))}),le.invoke=function(be,oe){switch(oe.type){case OE:var Fe=["this",He.context,He.props,le.batchId];return be.def(Z(oe.data),".call(",Fe.slice(0,Math.max(oe.data.length+1,4)),")");case LE:return be.def(He.props,oe.data);case FE:return be.def(He.context,oe.data);case NE:return be.def("this",oe.data);case Hb:return oe.data.append(le,be),oe.data.ref;case PL:return oe.data.toString();case DL:return oe.data.map(function(je){return le.invoke(be,je)})}},le.attribCache={};var ue={};return le.scopeAttrib=function(be){var oe=te.id(be);if(oe in ue)return ue[oe];var Fe=It.scope[oe];Fe||(Fe=It.scope[oe]=new ze);var je=ue[oe]=Z(Fe);return je},le}function Fr(le){var Z=le.static,Ce=le.dynamic,Be;if(Fg in Z){var He=!!Z[Fg];Be=Wi(function(Ee,Oe){return He}),Be.enable=He}else if(Fg in Ce){var Te=Ce[Fg];Be=Oo(Te,function(Ee,Oe){return Ee.invoke(Oe,Te)})}return Be}function Jt(le,Z){var Ce=le.static,Be=le.dynamic;if($f in Ce){var He=Ce[$f];return He?(He=Ct.getFramebuffer(He),H.command(He,"invalid framebuffer object"),Wi(function(Ee,Oe){var ue=Ee.link(He),be=Ee.shared;Oe.set(be.framebuffer,".next",ue);var oe=be.context;return Oe.set(oe,"."+tv,ue+".width"),Oe.set(oe,"."+rv,ue+".height"),ue})):Wi(function(Ee,Oe){var ue=Ee.shared;Oe.set(ue.framebuffer,".next","null");var be=ue.context;return Oe.set(be,"."+tv,be+"."+qL),Oe.set(be,"."+rv,be+"."+KL),"null"})}else if($f in Be){var Te=Be[$f];return Oo(Te,function(Ee,Oe){var ue=Ee.invoke(Oe,Te),be=Ee.shared,oe=be.framebuffer,Fe=Oe.def(oe,".getFramebuffer(",ue,")");H.optional(function(){Ee.assert(Oe,"!"+ue+"||"+Fe,"invalid framebuffer object")}),Oe.set(oe,".next",Fe);var je=be.context;return Oe.set(je,"."+tv,Fe+"?"+Fe+".width:"+je+"."+qL),Oe.set(je,"."+rv,Fe+"?"+Fe+".height:"+je+"."+KL),Fe})}else return null}function Yr(le,Z,Ce){var Be=le.static,He=le.dynamic;function Te(ue){if(ue in Be){var be=Be[ue];H.commandType(be,"object","invalid "+ue,Ce.commandStr);var oe=!0,Fe=be.x|0,je=be.y|0,ct,ht;return"width"in be?(ct=be.width|0,H.command(ct>=0,"invalid "+ue,Ce.commandStr)):oe=!1,"height"in be?(ht=be.height|0,H.command(ht>=0,"invalid "+ue,Ce.commandStr)):oe=!1,new bo(!oe&&Z&&Z.thisDep,!oe&&Z&&Z.contextDep,!oe&&Z&&Z.propDep,function(lr,Br){var er=lr.shared.context,gr=ct;"width"in be||(gr=Br.def(er,".",tv,"-",Fe));var Ir=ht;return"height"in be||(Ir=Br.def(er,".",rv,"-",je)),[Fe,je,gr,Ir]})}else if(ue in He){var lt=He[ue],At=Oo(lt,function(lr,Br){var er=lr.invoke(Br,lt);H.optional(function(){lr.assert(Br,er+"&&typeof "+er+'==="object"',"invalid "+ue)});var gr=lr.shared.context,Ir=Br.def(er,".x|0"),yn=Br.def(er,".y|0"),_i=Br.def('"width" in ',er,"?",er,".width|0:","(",gr,".",tv,"-",Ir,")"),xo=Br.def('"height" in ',er,"?",er,".height|0:","(",gr,".",rv,"-",yn,")");return H.optional(function(){lr.assert(Br,_i+">=0&&"+xo+">=0","invalid "+ue)}),[Ir,yn,_i,xo]});return Z&&(At.thisDep=At.thisDep||Z.thisDep,At.contextDep=At.contextDep||Z.contextDep,At.propDep=At.propDep||Z.propDep),At}else return Z?new bo(Z.thisDep,Z.contextDep,Z.propDep,function(lr,Br){var er=lr.shared.context;return[0,0,Br.def(er,".",tv),Br.def(er,".",rv)]}):null}var Ee=Te(vu);if(Ee){var Oe=Ee;Ee=new bo(Ee.thisDep,Ee.contextDep,Ee.propDep,function(ue,be){var oe=Oe.append(ue,be),Fe=ue.shared.context;return be.set(Fe,"."+Kie,oe[2]),be.set(Fe,"."+Zie,oe[3]),oe})}return{viewport:Ee,scissor_box:Te(Wb)}}function kr(le,Z){var Ce=le.static,Be=typeof Ce[Bg]=="string"&&typeof Ce[Ng]=="string";if(Be){if(Object.keys(Z.dynamic).length>0)return null;var He=Z.static,Te=Object.keys(He);if(Te.length>0&&typeof He[Te[0]]=="number"){for(var Ee=[],Oe=0;Oe<Te.length;++Oe)H(typeof He[Te[Oe]]=="number","must specify all vertex attribute locations when using vaos"),Ee.push([He[Te[Oe]]|0,Te[Oe]]);return Ee}}return null}function Gr(le,Z,Ce){var Be=le.static,He=le.dynamic;function Te(oe){if(oe in Be){var Fe=te.id(Be[oe]);H.optional(function(){Tt.shader(aF[oe],Fe,H.guessCommand())});var je=Wi(function(){return Fe});return je.id=Fe,je}else if(oe in He){var ct=He[oe];return Oo(ct,function(ht,lt){var At=ht.invoke(lt,ct),lr=lt.def(ht.shared.strings,".id(",At,")");return H.optional(function(){lt(ht.shared.shader,".shader(",aF[oe],",",lr,",",ht.command,");")}),lr})}return null}var Ee=Te(Bg),Oe=Te(Ng),ue=null,be;return fc(Ee)&&fc(Oe)?(ue=Tt.program(Oe.id,Ee.id,null,Ce),be=Wi(function(oe,Fe){return oe.link(ue)})):be=new bo(Ee&&Ee.thisDep||Oe&&Oe.thisDep,Ee&&Ee.contextDep||Oe&&Oe.contextDep,Ee&&Ee.propDep||Oe&&Oe.propDep,function(oe,Fe){var je=oe.shared.shader,ct;Ee?ct=Ee.append(oe,Fe):ct=Fe.def(je,".",Bg);var ht;Oe?ht=Oe.append(oe,Fe):ht=Fe.def(je,".",Ng);var lt=je+".program("+ht+","+ct;return H.optional(function(){lt+=","+oe.command}),Fe.def(lt+")")}),{frag:Ee,vert:Oe,progVar:be,program:ue}}function mn(le,Z){var Ce=le.static,Be=le.dynamic;function He(){if(zf in Ce){var oe=Ce[zf];nx(oe)?oe=Ke.getElements(Ke.create(oe,!0)):oe&&(oe=Ke.getElements(oe),H.command(oe,"invalid elements",Z.commandStr));var Fe=Wi(function(ct,ht){if(oe){var lt=ct.link(oe);return ct.ELEMENTS=lt,lt}return ct.ELEMENTS=null,null});return Fe.value=oe,Fe}else if(zf in Be){var je=Be[zf];return Oo(je,function(ct,ht){var lt=ct.shared,At=lt.isBufferArgs,lr=lt.elements,Br=ct.invoke(ht,je),er=ht.def("null"),gr=ht.def(At,"(",Br,")"),Ir=ct.cond(gr).then(er,"=",lr,".createStream(",Br,");").else(er,"=",lr,".getElements(",Br,");");return H.optional(function(){ct.assert(Ir.else,"!"+Br+"||"+er,"invalid elements")}),ht.entry(Ir),ht.exit(ct.cond(gr).then(lr,".destroyStream(",er,");")),ct.ELEMENTS=er,er})}return null}var Te=He();function Ee(){if(Gf in Ce){var oe=Ce[Gf];return H.commandParameter(oe,Vh,"invalid primitve",Z.commandStr),Wi(function(je,ct){return Vh[oe]})}else if(Gf in Be){var Fe=Be[Gf];return Oo(Fe,function(je,ct){var ht=je.constants.primTypes,lt=je.invoke(ct,Fe);return H.optional(function(){je.assert(ct,lt+" in "+ht,"invalid primitive, must be one of "+Object.keys(Vh))}),ct.def(ht,"[",lt,"]")})}else if(Te)return fc(Te)?Te.value?Wi(function(je,ct){return ct.def(je.ELEMENTS,".primType")}):Wi(function(){return QL}):new bo(Te.thisDep,Te.contextDep,Te.propDep,function(je,ct){var ht=je.ELEMENTS;return ct.def(ht,"?",ht,".primType:",QL)});return null}function Oe(oe,Fe){if(oe in Ce){var je=Ce[oe]|0;return H.command(!Fe||je>=0,"invalid "+oe,Z.commandStr),Wi(function(ht,lt){return Fe&&(ht.OFFSET=je),je})}else if(oe in Be){var ct=Be[oe];return Oo(ct,function(ht,lt){var At=ht.invoke(lt,ct);return Fe&&(ht.OFFSET=At,H.optional(function(){ht.assert(lt,At+">=0","invalid "+oe)})),At})}else if(Fe&&Te)return Wi(function(ht,lt){return ht.OFFSET="0",0});return null}var ue=Oe(jb,!0);function be(){if(Uf in Ce){var oe=Ce[Uf]|0;return H.command(typeof oe=="number"&&oe>=0,"invalid vertex count",Z.commandStr),Wi(function(){return oe})}else if(Uf in Be){var Fe=Be[Uf];return Oo(Fe,function(ht,lt){var At=ht.invoke(lt,Fe);return H.optional(function(){ht.assert(lt,"typeof "+At+'==="number"&&'+At+">=0&&"+At+"===("+At+"|0)","invalid vertex count")}),At})}else if(Te)if(fc(Te)){if(Te)return ue?new bo(ue.thisDep,ue.contextDep,ue.propDep,function(ht,lt){var At=lt.def(ht.ELEMENTS,".vertCount-",ht.OFFSET);return H.optional(function(){ht.assert(lt,At+">=0","invalid vertex offset/element buffer too small")}),At}):Wi(function(ht,lt){return lt.def(ht.ELEMENTS,".vertCount")});var je=Wi(function(){return-1});return H.optional(function(){je.MISSING=!0}),je}else{var ct=new bo(Te.thisDep||ue.thisDep,Te.contextDep||ue.contextDep,Te.propDep||ue.propDep,function(ht,lt){var At=ht.ELEMENTS;return ht.OFFSET?lt.def(At,"?",At,".vertCount-",ht.OFFSET,":-1"):lt.def(At,"?",At,".vertCount:-1")});return H.optional(function(){ct.DYNAMIC=!0}),ct}return null}return{elements:Te,primitive:Ee(),count:be(),instances:Oe(Yb,!1),offset:ue}}function ji(le,Z){var Ce=le.static,Be=le.dynamic,He={};return xt.forEach(function(Te){var Ee=$t(Te);function Oe(ue,be){if(Te in Ce){var oe=ue(Ce[Te]);He[Ee]=Wi(function(){return oe})}else if(Te in Be){var Fe=Be[Te];He[Ee]=Oo(Fe,function(je,ct){return be(je,ct,je.invoke(ct,Fe))})}}switch(Te){case zL:case OL:case RL:case WL:case FL:case YL:case UL:case VL:case HL:case $L:return Oe(function(ue){return H.commandType(ue,"boolean",Te,Z.commandStr),ue},function(ue,be,oe){return H.optional(function(){ue.assert(be,"typeof "+oe+'==="boolean"',"invalid flag "+Te,ue.commandStr)}),oe});case NL:return Oe(function(ue){return H.commandParameter(ue,iv,"invalid "+Te,Z.commandStr),iv[ue]},function(ue,be,oe){var Fe=ue.constants.compareFuncs;return H.optional(function(){ue.assert(be,oe+" in "+Fe,"invalid "+Te+", must be one of "+Object.keys(iv))}),be.def(Fe,"[",oe,"]")});case BL:return Oe(function(ue){return H.command(Ri(ue)&&ue.length===2&&typeof ue[0]=="number"&&typeof ue[1]=="number"&&ue[0]<=ue[1],"depth range is 2d array",Z.commandStr),ue},function(ue,be,oe){H.optional(function(){ue.assert(be,ue.shared.isArrayLike+"("+oe+")&&"+oe+".length===2&&typeof "+oe+'[0]==="number"&&typeof '+oe+'[1]==="number"&&'+oe+"[0]<="+oe+"[1]","depth range must be a 2d array")});var Fe=be.def("+",oe,"[0]"),je=be.def("+",oe,"[1]");return[Fe,je]});case $E:return Oe(function(ue){H.commandType(ue,"object","blend.func",Z.commandStr);var be="srcRGB"in ue?ue.srcRGB:ue.src,oe="srcAlpha"in ue?ue.srcAlpha:ue.src,Fe="dstRGB"in ue?ue.dstRGB:ue.dst,je="dstAlpha"in ue?ue.dstAlpha:ue.dst;return H.commandParameter(be,yl,Ee+".srcRGB",Z.commandStr),H.commandParameter(oe,yl,Ee+".srcAlpha",Z.commandStr),H.commandParameter(Fe,yl,Ee+".dstRGB",Z.commandStr),H.commandParameter(je,yl,Ee+".dstAlpha",Z.commandStr),H.command(iF.indexOf(be+", "+Fe)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+be+", "+Fe+")",Z.commandStr),[yl[be],yl[Fe],yl[oe],yl[je]]},function(ue,be,oe){var Fe=ue.constants.blendFuncs;H.optional(function(){ue.assert(be,oe+"&&typeof "+oe+'==="object"',"invalid blend func, must be an object")});function je(er,gr){var Ir=be.def('"',er,gr,'" in ',oe,"?",oe,".",er,gr,":",oe,".",er);return H.optional(function(){ue.assert(be,Ir+" in "+Fe,"invalid "+Te+"."+er+gr+", must be one of "+Object.keys(yl))}),Ir}var ct=je("src","RGB"),ht=je("dst","RGB");H.optional(function(){var er=ue.constants.invalidBlendCombinations;ue.assert(be,er+".indexOf("+ct+'+", "+'+ht+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var lt=be.def(Fe,"[",ct,"]"),At=be.def(Fe,"[",je("src","Alpha"),"]"),lr=be.def(Fe,"[",ht,"]"),Br=be.def(Fe,"[",je("dst","Alpha"),"]");return[lt,lr,At,Br]});case BE:return Oe(function(ue){if(typeof ue=="string")return H.commandParameter(ue,at,"invalid "+Te,Z.commandStr),[at[ue],at[ue]];if(typeof ue=="object")return H.commandParameter(ue.rgb,at,Te+".rgb",Z.commandStr),H.commandParameter(ue.alpha,at,Te+".alpha",Z.commandStr),[at[ue.rgb],at[ue.alpha]];H.commandRaise("invalid blend.equation",Z.commandStr)},function(ue,be,oe){var Fe=ue.constants.blendEquations,je=be.def(),ct=be.def(),ht=ue.cond("typeof ",oe,'==="string"');return H.optional(function(){function lt(At,lr,Br){ue.assert(At,Br+" in "+Fe,"invalid "+lr+", must be one of "+Object.keys(at))}lt(ht.then,Te,oe),ue.assert(ht.else,oe+"&&typeof "+oe+'==="object"',"invalid "+Te),lt(ht.else,Te+".rgb",oe+".rgb"),lt(ht.else,Te+".alpha",oe+".alpha")}),ht.then(je,"=",ct,"=",Fe,"[",oe,"];"),ht.else(je,"=",Fe,"[",oe,".rgb];",ct,"=",Fe,"[",oe,".alpha];"),be(ht),[je,ct]});case LL:return Oe(function(ue){return H.command(Ri(ue)&&ue.length===4,"blend.color must be a 4d array",Z.commandStr),st(4,function(be){return+ue[be]})},function(ue,be,oe){return H.optional(function(){ue.assert(be,ue.shared.isArrayLike+"("+oe+")&&"+oe+".length===4","blend.color must be a 4d array")}),st(4,function(Fe){return be.def("+",oe,"[",Fe,"]")})});case jL:return Oe(function(ue){return H.commandType(ue,"number",Ee,Z.commandStr),ue|0},function(ue,be,oe){return H.optional(function(){ue.assert(be,"typeof "+oe+'==="number"',"invalid stencil.mask")}),be.def(oe,"|0")});case WE:return Oe(function(ue){H.commandType(ue,"object",Ee,Z.commandStr);var be=ue.cmp||"keep",oe=ue.ref||0,Fe="mask"in ue?ue.mask:-1;return H.commandParameter(be,iv,Te+".cmp",Z.commandStr),H.commandType(oe,"number",Te+".ref",Z.commandStr),H.commandType(Fe,"number",Te+".mask",Z.commandStr),[iv[be],oe,Fe]},function(ue,be,oe){var Fe=ue.constants.compareFuncs;H.optional(function(){function lt(){ue.assert(be,Array.prototype.join.call(arguments,""),"invalid stencil.func")}lt(oe+"&&typeof ",oe,'==="object"'),lt('!("cmp" in ',oe,")||(",oe,".cmp in ",Fe,")")});var je=be.def('"cmp" in ',oe,"?",Fe,"[",oe,".cmp]",":",uc),ct=be.def(oe,".ref|0"),ht=be.def('"mask" in ',oe,"?",oe,".mask|0:-1");return[je,ct,ht]});case jE:case Lg:return Oe(function(ue){H.commandType(ue,"object",Ee,Z.commandStr);var be=ue.fail||"keep",oe=ue.zfail||"keep",Fe=ue.zpass||"keep";return H.commandParameter(be,cc,Te+".fail",Z.commandStr),H.commandParameter(oe,cc,Te+".zfail",Z.commandStr),H.commandParameter(Fe,cc,Te+".zpass",Z.commandStr),[Te===Lg?Vf:Wg,cc[be],cc[oe],cc[Fe]]},function(ue,be,oe){var Fe=ue.constants.stencilOps;H.optional(function(){ue.assert(be,oe+"&&typeof "+oe+'==="object"',"invalid "+Te)});function je(ct){return H.optional(function(){ue.assert(be,'!("'+ct+'" in '+oe+")||("+oe+"."+ct+" in "+Fe+")","invalid "+Te+"."+ct+", must be one of "+Object.keys(cc))}),be.def('"',ct,'" in ',oe,"?",Fe,"[",oe,".",ct,"]:",uc)}return[Te===Lg?Vf:Wg,je("fail"),je("zfail"),je("zpass")]});case VE:return Oe(function(ue){H.commandType(ue,"object",Ee,Z.commandStr);var be=ue.factor|0,oe=ue.units|0;return H.commandType(be,"number",Ee+".factor",Z.commandStr),H.commandType(oe,"number",Ee+".units",Z.commandStr),[be,oe]},function(ue,be,oe){H.optional(function(){ue.assert(be,oe+"&&typeof "+oe+'==="object"',"invalid "+Te)});var Fe=be.def(oe,".factor|0"),je=be.def(oe,".units|0");return[Fe,je]});case GL:return Oe(function(ue){var be=0;return ue==="front"?be=Wg:ue==="back"&&(be=Vf),H.command(!!be,Ee,Z.commandStr),be},function(ue,be,oe){return H.optional(function(){ue.assert(be,oe+'==="front"||'+oe+'==="back"',"invalid cull.face")}),be.def(oe,'==="front"?',Wg,":",Vf)});case UE:return Oe(function(ue){return H.command(typeof ue=="number"&&ue>=Ze.lineWidthDims[0]&&ue<=Ze.lineWidthDims[1],"invalid line width, must be a positive number between "+Ze.lineWidthDims[0]+" and "+Ze.lineWidthDims[1],Z.commandStr),ue},function(ue,be,oe){return H.optional(function(){ue.assert(be,"typeof "+oe+'==="number"&&'+oe+">="+Ze.lineWidthDims[0]+"&&"+oe+"<="+Ze.lineWidthDims[1],"invalid line width")}),oe});case GE:return Oe(function(ue){return H.commandParameter(ue,JE,Ee,Z.commandStr),JE[ue]},function(ue,be,oe){return H.optional(function(){ue.assert(be,oe+'==="cw"||'+oe+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),be.def(oe+'==="cw"?'+JL+":"+QE)});case zE:return Oe(function(ue){return H.command(Ri(ue)&&ue.length===4,"color.mask must be length 4 array",Z.commandStr),ue.map(function(be){return!!be})},function(ue,be,oe){return H.optional(function(){ue.assert(be,ue.shared.isArrayLike+"("+oe+")&&"+oe+".length===4","invalid color.mask")}),st(4,function(Fe){return"!!"+oe+"["+Fe+"]"})});case HE:return Oe(function(ue){H.command(typeof ue=="object"&&ue,Ee,Z.commandStr);var be="value"in ue?ue.value:1,oe=!!ue.invert;return H.command(typeof be=="number"&&be>=0&&be<=1,"sample.coverage.value must be a number between 0 and 1",Z.commandStr),[be,oe]},function(ue,be,oe){H.optional(function(){ue.assert(be,oe+"&&typeof "+oe+'==="object"',"invalid sample.coverage")});var Fe=be.def('"value" in ',oe,"?+",oe,".value:1"),je=be.def("!!",oe,".invert");return[Fe,je]})}}),He}function da(le,Z){var Ce=le.static,Be=le.dynamic,He={};return Object.keys(Ce).forEach(function(Te){var Ee=Ce[Te],Oe;if(typeof Ee=="number"||typeof Ee=="boolean")Oe=Wi(function(){return Ee});else if(typeof Ee=="function"){var ue=Ee._reglType;ue==="texture2d"||ue==="textureCube"?Oe=Wi(function(be){return be.link(Ee)}):ue==="framebuffer"||ue==="framebufferCube"?(H.command(Ee.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Te+'"',Z.commandStr),Oe=Wi(function(be){return be.link(Ee.color[0])})):H.commandRaise('invalid data for uniform "'+Te+'"',Z.commandStr)}else Ri(Ee)?Oe=Wi(function(be){var oe=be.global.def("[",st(Ee.length,function(Fe){return H.command(typeof Ee[Fe]=="number"||typeof Ee[Fe]=="boolean","invalid uniform "+Te,be.commandStr),Ee[Fe]}),"]");return oe}):H.commandRaise('invalid or missing data for uniform "'+Te+'"',Z.commandStr);Oe.value=Ee,He[Te]=Oe}),Object.keys(Be).forEach(function(Te){var Ee=Be[Te];He[Te]=Oo(Ee,function(Oe,ue){return Oe.invoke(ue,Ee)})}),He}function rn(le,Z){var Ce=le.static,Be=le.dynamic,He={};return Object.keys(Ce).forEach(function(Te){var Ee=Ce[Te],Oe=te.id(Te),ue=new ze;if(nx(Ee))ue.state=ev,ue.buffer=dt.getBuffer(dt.create(Ee,nv,!1,!0)),ue.type=0;else{var be=dt.getBuffer(Ee);if(be)ue.state=ev,ue.buffer=be,ue.type=0;else if(H.command(typeof Ee=="object"&&Ee,"invalid data for attribute "+Te,Z.commandStr),"constant"in Ee){var oe=Ee.constant;ue.buffer="null",ue.state=RE,typeof oe=="number"?ue.x=oe:(H.command(Ri(oe)&&oe.length>0&&oe.length<=4,"invalid constant for attribute "+Te,Z.commandStr),Jh.forEach(function(lr,Br){Br<oe.length&&(ue[lr]=oe[Br])}))}else{nx(Ee.buffer)?be=dt.getBuffer(dt.create(Ee.buffer,nv,!1,!0)):be=dt.getBuffer(Ee.buffer),H.command(!!be,'missing buffer for attribute "'+Te+'"',Z.commandStr);var Fe=Ee.offset|0;H.command(Fe>=0,'invalid offset for attribute "'+Te+'"',Z.commandStr);var je=Ee.stride|0;H.command(je>=0&&je<256,'invalid stride for attribute "'+Te+'", must be integer betweeen [0, 255]',Z.commandStr);var ct=Ee.size|0;H.command(!("size"in Ee)||ct>0&&ct<=4,'invalid size for attribute "'+Te+'", must be 1,2,3,4',Z.commandStr);var ht=!!Ee.normalized,lt=0;"type"in Ee&&(H.commandParameter(Ee.type,Of,"invalid type for attribute "+Te,Z.commandStr),lt=Of[Ee.type]);var At=Ee.divisor|0;"divisor"in Ee&&(H.command(At===0||Mt,'cannot specify divisor for attribute "'+Te+'", instancing not supported',Z.commandStr),H.command(At>=0,'invalid divisor for attribute "'+Te+'"',Z.commandStr)),H.optional(function(){var lr=Z.commandStr,Br=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Ee).forEach(function(er){H.command(Br.indexOf(er)>=0,'unknown parameter "'+er+'" for attribute pointer "'+Te+'" (valid parameters are '+Br+")",lr)})}),ue.buffer=be,ue.state=ev,ue.size=ct,ue.normalized=ht,ue.type=lt||be.dtype,ue.offset=Fe,ue.stride=je,ue.divisor=At}}He[Te]=Wi(function(lr,Br){var er=lr.attribCache;if(Oe in er)return er[Oe];var gr={isStream:!1};return Object.keys(ue).forEach(function(Ir){gr[Ir]=ue[Ir]}),ue.buffer&&(gr.buffer=lr.link(ue.buffer),gr.type=gr.type||gr.buffer+".dtype"),er[Oe]=gr,gr})}),Object.keys(Be).forEach(function(Te){var Ee=Be[Te];function Oe(ue,be){var oe=ue.invoke(be,Ee),Fe=ue.shared,je=ue.constants,ct=Fe.isBufferArgs,ht=Fe.buffer;H.optional(function(){ue.assert(be,oe+"&&(typeof "+oe+'==="object"||typeof '+oe+'==="function")&&('+ct+"("+oe+")||"+ht+".getBuffer("+oe+")||"+ht+".getBuffer("+oe+".buffer)||"+ct+"("+oe+'.buffer)||("constant" in '+oe+"&&(typeof "+oe+'.constant==="number"||'+Fe.isArrayLike+"("+oe+".constant))))",'invalid dynamic attribute "'+Te+'"')});var lt={isStream:be.def(!1)},At=new ze;At.state=ev,Object.keys(At).forEach(function(gr){lt[gr]=be.def(""+At[gr])});var lr=lt.buffer,Br=lt.type;be("if(",ct,"(",oe,")){",lt.isStream,"=true;",lr,"=",ht,".createStream(",nv,",",oe,");",Br,"=",lr,".dtype;","}else{",lr,"=",ht,".getBuffer(",oe,");","if(",lr,"){",Br,"=",lr,".dtype;",'}else if("constant" in ',oe,"){",lt.state,"=",RE,";","if(typeof "+oe+'.constant === "number"){',lt[Jh[0]],"=",oe,".constant;",Jh.slice(1).map(function(gr){return lt[gr]}).join("="),"=0;","}else{",Jh.map(function(gr,Ir){return lt[gr]+"="+oe+".constant.length>"+Ir+"?"+oe+".constant["+Ir+"]:0;"}).join(""),"}}else{","if(",ct,"(",oe,".buffer)){",lr,"=",ht,".createStream(",nv,",",oe,".buffer);","}else{",lr,"=",ht,".getBuffer(",oe,".buffer);","}",Br,'="type" in ',oe,"?",je.glTypes,"[",oe,".type]:",lr,".dtype;",lt.normalized,"=!!",oe,".normalized;");function er(gr){be(lt[gr],"=",oe,".",gr,"|0;")}return er("size"),er("offset"),er("stride"),er("divisor"),be("}}"),be.exit("if(",lt.isStream,"){",ht,".destroyStream(",lr,");","}"),lt}He[Te]=Oo(Ee,Oe)}),He}function na(le,Z){var Ce=le.static,Be=le.dynamic;if($g in Ce){var He=Ce[$g];return He!==null&&It.getVAO(He)===null&&(He=It.createVAO(He)),Wi(function(Ee){return Ee.link(It.getVAO(He))})}else if($g in Be){var Te=Be[$g];return Oo(Te,function(Ee,Oe){var ue=Ee.invoke(Oe,Te);return Oe.def(Ee.shared.vao+".getVAO("+ue+")")})}return null}function ai(le){var Z=le.static,Ce=le.dynamic,Be={};return Object.keys(Z).forEach(function(He){var Te=Z[He];Be[He]=Wi(function(Ee,Oe){return typeof Te=="number"||typeof Te=="boolean"?""+Te:Ee.link(Te)})}),Object.keys(Ce).forEach(function(He){var Te=Ce[He];Be[He]=Oo(Te,function(Ee,Oe){return Ee.invoke(Oe,Te)})}),Be}function Yi(le,Z,Ce,Be,He){var Te=le.static,Ee=le.dynamic;H.optional(function(){var er=[$f,Ng,Bg,zf,Gf,jb,Uf,Yb,Fg,$g].concat(xt);function gr(Ir){Object.keys(Ir).forEach(function(yn){H.command(er.indexOf(yn)>=0,'unknown parameter "'+yn+'"',He.commandStr)})}gr(Te),gr(Ee)});var Oe=kr(le,Z),ue=Jt(le),be=Yr(le,ue,He),oe=mn(le,He),Fe=ji(le,He),je=Gr(le,He,Oe);function ct(er){var gr=be[er];gr&&(Fe[er]=gr)}ct(vu),ct($t(Wb));var ht=Object.keys(Fe).length>0,lt={framebuffer:ue,draw:oe,shader:je,state:Fe,dirty:ht,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(lt.profile=Fr(le),lt.uniforms=da(Ce,He),lt.drawVAO=lt.scopeVAO=na(le),!lt.drawVAO&&je.program&&!Oe&&ve.angle_instanced_arrays){var At=!0,lr=je.program.attributes.map(function(er){var gr=Z.static[er];return At=At&&!!gr,gr});if(At&&lr.length>0){var Br=It.getVAO(It.createVAO(lr));lt.drawVAO=new bo(null,null,null,function(er,gr){return er.link(Br)}),lt.useVAO=!0}}return Oe?lt.useVAO=!0:lt.attributes=rn(Z,He),lt.context=ai(Be),lt}function ia(le,Z,Ce){var Be=le.shared,He=Be.context,Te=le.scope();Object.keys(Ce).forEach(function(Ee){Z.save(He,"."+Ee);var Oe=Ce[Ee],ue=Oe.append(le,Z);Array.isArray(ue)?Te(He,".",Ee,"=[",ue.join(),"];"):Te(He,".",Ee,"=",ue,";")}),Z(Te)}function aa(le,Z,Ce,Be){var He=le.shared,Te=He.gl,Ee=He.framebuffer,Oe;Yt&&(Oe=Z.def(He.extensions,".webgl_draw_buffers"));var ue=le.constants,be=ue.drawBuffer,oe=ue.backBuffer,Fe;Ce?Fe=Ce.append(le,Z):Fe=Z.def(Ee,".next"),Be||Z("if(",Fe,"!==",Ee,".cur){"),Z("if(",Fe,"){",Te,".bindFramebuffer(",nF,",",Fe,".framebuffer);"),Yt&&Z(Oe,".drawBuffersWEBGL(",be,"[",Fe,".colorAttachments.length]);"),Z("}else{",Te,".bindFramebuffer(",nF,",null);"),Yt&&Z(Oe,".drawBuffersWEBGL(",oe,");"),Z("}",Ee,".cur=",Fe,";"),Be||Z("}")}function ma(le,Z,Ce){var Be=le.shared,He=Be.gl,Te=le.current,Ee=le.next,Oe=Be.current,ue=Be.next,be=le.cond(Oe,".dirty");xt.forEach(function(oe){var Fe=$t(oe);if(!(Fe in Ce.state)){var je,ct;if(Fe in Ee){je=Ee[Fe],ct=Te[Fe];var ht=st(yt[Fe].length,function(At){return be.def(je,"[",At,"]")});be(le.cond(ht.map(function(At,lr){return At+"!=="+ct+"["+lr+"]"}).join("||")).then(He,".",bt[Fe],"(",ht,");",ht.map(function(At,lr){return ct+"["+lr+"]="+At}).join(";"),";"))}else{je=be.def(ue,".",Fe);var lt=le.cond(je,"!==",Oe,".",Fe);be(lt),Fe in Bt?lt(le.cond(je).then(He,".enable(",Bt[Fe],");").else(He,".disable(",Bt[Fe],");"),Oe,".",Fe,"=",je,";"):lt(He,".",bt[Fe],"(",je,");",Oe,".",Fe,"=",je,";")}}}),Object.keys(Ce.state).length===0&&be(Oe,".dirty=false;"),Z(be)}function Da(le,Z,Ce,Be){var He=le.shared,Te=le.current,Ee=He.current,Oe=He.gl;oF(Object.keys(Ce)).forEach(function(ue){var be=Ce[ue];if(!(Be&&!Be(be))){var oe=be.append(le,Z);if(Bt[ue]){var Fe=Bt[ue];fc(be)?oe?Z(Oe,".enable(",Fe,");"):Z(Oe,".disable(",Fe,");"):Z(le.cond(oe).then(Oe,".enable(",Fe,");").else(Oe,".disable(",Fe,");")),Z(Ee,".",ue,"=",oe,";")}else if(Ri(oe)){var je=Te[ue];Z(Oe,".",bt[ue],"(",oe,");",oe.map(function(ct,ht){return je+"["+ht+"]="+ct}).join(";"),";")}else Z(Oe,".",bt[ue],"(",oe,");",Ee,".",ue,"=",oe,";")}})}function Oi(le,Z){Mt&&(le.instancing=Z.def(le.shared.extensions,".angle_instanced_arrays"))}function Nr(le,Z,Ce,Be,He){var Te=le.shared,Ee=le.stats,Oe=Te.current,ue=Te.timer,be=Ce.profile;function oe(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Fe,je;function ct(er){Fe=Z.def(),er(Fe,"=",oe(),";"),typeof He=="string"?er(Ee,".count+=",He,";"):er(Ee,".count++;"),Et&&(Be?(je=Z.def(),er(je,"=",ue,".getNumPendingQueries();")):er(ue,".beginQuery(",Ee,");"))}function ht(er){er(Ee,".cpuTime+=",oe(),"-",Fe,";"),Et&&(Be?er(ue,".pushScopeStats(",je,",",ue,".getNumPendingQueries(),",Ee,");"):er(ue,".endQuery();"))}function lt(er){var gr=Z.def(Oe,".profile");Z(Oe,".profile=",er,";"),Z.exit(Oe,".profile=",gr,";")}var At;if(be){if(fc(be)){be.enable?(ct(Z),ht(Z.exit),lt("true")):lt("false");return}At=be.append(le,Z),lt(At)}else At=Z.def(Oe,".profile");var lr=le.block();ct(lr),Z("if(",At,"){",lr,"}");var Br=le.block();ht(Br),Z.exit("if(",At,"){",Br,"}")}function Ra(le,Z,Ce,Be,He){var Te=le.shared;function Ee(ue){switch(ue){case Xb:case Zb:case ex:return 2;case qb:case Qb:case tx:return 3;case Kb:case Jb:case rx:return 4;default:return 1}}function Oe(ue,be,oe){var Fe=Te.gl,je=Z.def(ue,".location"),ct=Z.def(Te.attributes,"[",je,"]"),ht=oe.state,lt=oe.buffer,At=[oe.x,oe.y,oe.z,oe.w],lr=["buffer","normalized","offset","stride"];function Br(){Z("if(!",ct,".buffer){",Fe,".enableVertexAttribArray(",je,");}");var gr=oe.type,Ir;if(oe.size?Ir=Z.def(oe.size,"||",be):Ir=be,Z("if(",ct,".type!==",gr,"||",ct,".size!==",Ir,"||",lr.map(function(_i){return ct+"."+_i+"!=="+oe[_i]}).join("||"),"){",Fe,".bindBuffer(",nv,",",lt,".buffer);",Fe,".vertexAttribPointer(",[je,Ir,gr,oe.normalized,oe.stride,oe.offset],");",ct,".type=",gr,";",ct,".size=",Ir,";",lr.map(function(_i){return ct+"."+_i+"="+oe[_i]+";"}).join(""),"}"),Mt){var yn=oe.divisor;Z("if(",ct,".divisor!==",yn,"){",le.instancing,".vertexAttribDivisorANGLE(",[je,yn],");",ct,".divisor=",yn,";}")}}function er(){Z("if(",ct,".buffer){",Fe,".disableVertexAttribArray(",je,");",ct,".buffer=null;","}if(",Jh.map(function(gr,Ir){return ct+"."+gr+"!=="+At[Ir]}).join("||"),"){",Fe,".vertexAttrib4f(",je,",",At,");",Jh.map(function(gr,Ir){return ct+"."+gr+"="+At[Ir]+";"}).join(""),"}")}ht===ev?Br():ht===RE?er():(Z("if(",ht,"===",ev,"){"),Br(),Z("}else{"),er(),Z("}"))}Be.forEach(function(ue){var be=ue.name,oe=Ce.attributes[be],Fe;if(oe){if(!He(oe))return;Fe=oe.append(le,Z)}else{if(!He(sF))return;var je=le.scopeAttrib(be);H.optional(function(){le.assert(Z,je+".state","missing attribute "+be)}),Fe={},Object.keys(new ze).forEach(function(ct){Fe[ct]=Z.def(je,".",ct)})}Oe(le.link(ue),Ee(ue.info.type),Fe)})}function Tn(le,Z,Ce,Be,He){for(var Te=le.shared,Ee=Te.gl,Oe,ue=0;ue<Be.length;++ue){var be=Be[ue],oe=be.name,Fe=be.info.type,je=Ce.uniforms[oe],ct=le.link(be),ht=ct+".location",lt;if(je){if(!He(je))continue;if(fc(je)){var At=je.value;if(H.command(At!==null&&typeof At!="undefined",'missing uniform "'+oe+'"',le.commandStr),Fe===Vg||Fe===Hg){H.command(typeof At=="function"&&(Fe===Vg&&(At._reglType==="texture2d"||At._reglType==="framebuffer")||Fe===Hg&&(At._reglType==="textureCube"||At._reglType==="framebufferCube")),"invalid texture for uniform "+oe,le.commandStr);var lr=le.link(At._texture||At.color[0]._texture);Z(Ee,".uniform1i(",ht,",",lr+".bind());"),Z.exit(lr,".unbind();")}else if(Fe===zg||Fe===Gg||Fe===Ug){H.optional(function(){H.command(Ri(At),"invalid matrix for uniform "+oe,le.commandStr),H.command(Fe===zg&&At.length===4||Fe===Gg&&At.length===9||Fe===Ug&&At.length===16,"invalid length for matrix uniform "+oe,le.commandStr)});var Br=le.global.def("new Float32Array(["+Array.prototype.slice.call(At)+"])"),er=2;Fe===Gg?er=3:Fe===Ug&&(er=4),Z(Ee,".uniformMatrix",er,"fv(",ht,",false,",Br,");")}else{switch(Fe){case qE:H.commandType(At,"number","uniform "+oe,le.commandStr),Oe="1f";break;case Xb:H.command(Ri(At)&&At.length===2,"uniform "+oe,le.commandStr),Oe="2f";break;case qb:H.command(Ri(At)&&At.length===3,"uniform "+oe,le.commandStr),Oe="3f";break;case Kb:H.command(Ri(At)&&At.length===4,"uniform "+oe,le.commandStr),Oe="4f";break;case ZE:H.commandType(At,"boolean","uniform "+oe,le.commandStr),Oe="1i";break;case KE:H.commandType(At,"number","uniform "+oe,le.commandStr),Oe="1i";break;case ex:H.command(Ri(At)&&At.length===2,"uniform "+oe,le.commandStr),Oe="2i";break;case Zb:H.command(Ri(At)&&At.length===2,"uniform "+oe,le.commandStr),Oe="2i";break;case tx:H.command(Ri(At)&&At.length===3,"uniform "+oe,le.commandStr),Oe="3i";break;case Qb:H.command(Ri(At)&&At.length===3,"uniform "+oe,le.commandStr),Oe="3i";break;case rx:H.command(Ri(At)&&At.length===4,"uniform "+oe,le.commandStr),Oe="4i";break;case Jb:H.command(Ri(At)&&At.length===4,"uniform "+oe,le.commandStr),Oe="4i";break}Z(Ee,".uniform",Oe,"(",ht,",",Ri(At)?Array.prototype.slice.call(At):At,");")}continue}else lt=je.append(le,Z)}else{if(!He(sF))continue;lt=Z.def(Te.uniforms,"[",te.id(oe),"]")}Fe===Vg?(H(!Array.isArray(lt),"must specify a scalar prop for textures"),Z("if(",lt,"&&",lt,'._reglType==="framebuffer"){',lt,"=",lt,".color[0];","}")):Fe===Hg&&(H(!Array.isArray(lt),"must specify a scalar prop for cube maps"),Z("if(",lt,"&&",lt,'._reglType==="framebufferCube"){',lt,"=",lt,".color[0];","}")),H.optional(function(){function xo(Qs,vF){le.assert(Z,Qs,'bad data or missing for uniform "'+oe+'".  '+vF)}function e_(Qs){H(!Array.isArray(lt),"must not specify an array type for uniform"),xo("typeof "+lt+'==="'+Qs+'"',"invalid type, expected "+Qs)}function Ts(Qs,vF){Array.isArray(lt)?H(lt.length===Qs,"must have length "+Qs):xo(Te.isArrayLike+"("+lt+")&&"+lt+".length==="+Qs,"invalid vector, should have length "+Qs,le.commandStr)}function hF(Qs){H(!Array.isArray(lt),"must not specify a value type"),xo("typeof "+lt+'==="function"&&'+lt+'._reglType==="texture'+(Qs===ZL?"2d":"Cube")+'"',"invalid texture type",le.commandStr)}switch(Fe){case KE:e_("number");break;case Zb:Ts(2);break;case Qb:Ts(3);break;case Jb:Ts(4);break;case qE:e_("number");break;case Xb:Ts(2);break;case qb:Ts(3);break;case Kb:Ts(4);break;case ZE:e_("boolean");break;case ex:Ts(2);break;case tx:Ts(3);break;case rx:Ts(4);break;case zg:Ts(4);break;case Gg:Ts(9);break;case Ug:Ts(16);break;case Vg:hF(ZL);break;case Hg:hF(rae);break}});var gr=1;switch(Fe){case Vg:case Hg:var Ir=Z.def(lt,"._texture");Z(Ee,".uniform1i(",ht,",",Ir,".bind());"),Z.exit(Ir,".unbind();");continue;case KE:case ZE:Oe="1i";break;case Zb:case ex:Oe="2i",gr=2;break;case Qb:case tx:Oe="3i",gr=3;break;case Jb:case rx:Oe="4i",gr=4;break;case qE:Oe="1f";break;case Xb:Oe="2f",gr=2;break;case qb:Oe="3f",gr=3;break;case Kb:Oe="4f",gr=4;break;case zg:Oe="Matrix2fv";break;case Gg:Oe="Matrix3fv";break;case Ug:Oe="Matrix4fv";break}if(Z(Ee,".uniform",Oe,"(",ht,","),Oe.charAt(0)==="M"){var yn=Math.pow(Fe-zg+2,2),_i=le.global.def("new Float32Array(",yn,")");Array.isArray(lt)?Z("false,(",st(yn,function(xo){return _i+"["+xo+"]="+lt[xo]}),",",_i,")"):Z("false,(Array.isArray(",lt,")||",lt," instanceof Float32Array)?",lt,":(",st(yn,function(xo){return _i+"["+xo+"]="+lt+"["+xo+"]"}),",",_i,")")}else gr>1?Z(st(gr,function(xo){return Array.isArray(lt)?lt[xo]:lt+"["+xo+"]"})):(H(!Array.isArray(lt),"uniform value must not be an array"),Z(lt));Z(");")}}function pr(le,Z,Ce,Be){var He=le.shared,Te=He.gl,Ee=He.draw,Oe=Be.draw;function ue(){var Ir=Oe.elements,yn,_i=Z;return Ir?((Ir.contextDep&&Be.contextDynamic||Ir.propDep)&&(_i=Ce),yn=Ir.append(le,_i)):yn=_i.def(Ee,".",zf),yn&&_i("if("+yn+")"+Te+".bindBuffer("+Jie+","+yn+".buffer.buffer);"),yn}function be(){var Ir=Oe.count,yn,_i=Z;return Ir?((Ir.contextDep&&Be.contextDynamic||Ir.propDep)&&(_i=Ce),yn=Ir.append(le,_i),H.optional(function(){Ir.MISSING&&le.assert(Z,"false","missing vertex count"),Ir.DYNAMIC&&le.assert(_i,yn+">=0","missing vertex count")})):(yn=_i.def(Ee,".",Uf),H.optional(function(){le.assert(_i,yn+">=0","missing vertex count")})),yn}var oe=ue();function Fe(Ir){var yn=Oe[Ir];return yn?yn.contextDep&&Be.contextDynamic||yn.propDep?yn.append(le,Ce):yn.append(le,Z):Z.def(Ee,".",Ir)}var je=Fe(Gf),ct=Fe(jb),ht=be();if(typeof ht=="number"){if(ht===0)return}else Ce("if(",ht,"){"),Ce.exit("}");var lt,At;Mt&&(lt=Fe(Yb),At=le.instancing);var lr=oe+".type",Br=Oe.elements&&fc(Oe.elements);function er(){function Ir(){Ce(At,".drawElementsInstancedANGLE(",[je,ht,lr,ct+"<<(("+lr+"-"+IL+")>>1)",lt],");")}function yn(){Ce(At,".drawArraysInstancedANGLE(",[je,ct,ht,lt],");")}oe?Br?Ir():(Ce("if(",oe,"){"),Ir(),Ce("}else{"),yn(),Ce("}")):yn()}function gr(){function Ir(){Ce(Te+".drawElements("+[je,ht,lr,ct+"<<(("+lr+"-"+IL+")>>1)"]+");")}function yn(){Ce(Te+".drawArrays("+[je,ct,ht]+");")}oe?Br?Ir():(Ce("if(",oe,"){"),Ir(),Ce("}else{"),yn(),Ce("}")):yn()}Mt&&(typeof lt!="number"||lt>=0)?typeof lt=="string"?(Ce("if(",lt,">0){"),er(),Ce("}else if(",lt,"<0){"),gr(),Ce("}")):er():gr()}function Zr(le,Z,Ce,Be,He){var Te=wr(),Ee=Te.proc("body",He);return H.optional(function(){Te.commandStr=Z.commandStr,Te.command=Te.link(Z.commandStr)}),Mt&&(Te.instancing=Ee.def(Te.shared.extensions,".angle_instanced_arrays")),le(Te,Ee,Ce,Be),Te.compile().body}function hn(le,Z,Ce,Be){Oi(le,Z),Ce.useVAO?Ce.drawVAO?Z(le.shared.vao,".setVAO(",Ce.drawVAO.append(le,Z),");"):Z(le.shared.vao,".setVAO(",le.shared.vao,".targetVAO);"):(Z(le.shared.vao,".setVAO(null);"),Ra(le,Z,Ce,Be.attributes,function(){return!0})),Tn(le,Z,Ce,Be.uniforms,function(){return!0}),pr(le,Z,Z,Ce)}function Li(le,Z){var Ce=le.proc("draw",1);Oi(le,Ce),ia(le,Ce,Z.context),aa(le,Ce,Z.framebuffer),ma(le,Ce,Z),Da(le,Ce,Z.state),Nr(le,Ce,Z,!1,!0);var Be=Z.shader.progVar.append(le,Ce);if(Ce(le.shared.gl,".useProgram(",Be,".program);"),Z.shader.program)hn(le,Ce,Z,Z.shader.program);else{Ce(le.shared.vao,".setVAO(null);");var He=le.global.def("{}"),Te=Ce.def(Be,".id"),Ee=Ce.def(He,"[",Te,"]");Ce(le.cond(Ee).then(Ee,".call(this,a0);").else(Ee,"=",He,"[",Te,"]=",le.link(function(Oe){return Zr(hn,le,Z,Oe,1)}),"(",Be,");",Ee,".call(this,a0);"))}Object.keys(Z.state).length>0&&Ce(le.shared.current,".dirty=true;")}function bl(le,Z,Ce,Be){le.batchId="a1",Oi(le,Z);function He(){return!0}Ra(le,Z,Ce,Be.attributes,He),Tn(le,Z,Ce,Be.uniforms,He),pr(le,Z,Z,Ce)}function Hf(le,Z,Ce,Be){Oi(le,Z);var He=Ce.contextDep,Te=Z.def(),Ee="a0",Oe="a1",ue=Z.def();le.shared.props=ue,le.batchId=Te;var be=le.scope(),oe=le.scope();Z(be.entry,"for(",Te,"=0;",Te,"<",Oe,";++",Te,"){",ue,"=",Ee,"[",Te,"];",oe,"}",be.exit);function Fe(lr){return lr.contextDep&&He||lr.propDep}function je(lr){return!Fe(lr)}if(Ce.needsContext&&ia(le,oe,Ce.context),Ce.needsFramebuffer&&aa(le,oe,Ce.framebuffer),Da(le,oe,Ce.state,Fe),Ce.profile&&Fe(Ce.profile)&&Nr(le,oe,Ce,!1,!0),Be)Ce.useVAO?Ce.drawVAO?Fe(Ce.drawVAO)?oe(le.shared.vao,".setVAO(",Ce.drawVAO.append(le,oe),");"):be(le.shared.vao,".setVAO(",Ce.drawVAO.append(le,be),");"):be(le.shared.vao,".setVAO(",le.shared.vao,".targetVAO);"):(be(le.shared.vao,".setVAO(null);"),Ra(le,be,Ce,Be.attributes,je),Ra(le,oe,Ce,Be.attributes,Fe)),Tn(le,be,Ce,Be.uniforms,je),Tn(le,oe,Ce,Be.uniforms,Fe),pr(le,be,oe,Ce);else{var ct=le.global.def("{}"),ht=Ce.shader.progVar.append(le,oe),lt=oe.def(ht,".id"),At=oe.def(ct,"[",lt,"]");oe(le.shared.gl,".useProgram(",ht,".program);","if(!",At,"){",At,"=",ct,"[",lt,"]=",le.link(function(lr){return Zr(bl,le,Ce,lr,2)}),"(",ht,");}",At,".call(this,a0[",Te,"],",Te,");")}}function de(le,Z){var Ce=le.proc("batch",2);le.batchId="0",Oi(le,Ce);var Be=!1,He=!0;Object.keys(Z.context).forEach(function(ct){Be=Be||Z.context[ct].propDep}),Be||(ia(le,Ce,Z.context),He=!1);var Te=Z.framebuffer,Ee=!1;Te?(Te.propDep?Be=Ee=!0:Te.contextDep&&Be&&(Ee=!0),Ee||aa(le,Ce,Te)):aa(le,Ce,null),Z.state.viewport&&Z.state.viewport.propDep&&(Be=!0);function Oe(ct){return ct.contextDep&&Be||ct.propDep}ma(le,Ce,Z),Da(le,Ce,Z.state,function(ct){return!Oe(ct)}),(!Z.profile||!Oe(Z.profile))&&Nr(le,Ce,Z,!1,"a1"),Z.contextDep=Be,Z.needsContext=He,Z.needsFramebuffer=Ee;var ue=Z.shader.progVar;if(ue.contextDep&&Be||ue.propDep)Hf(le,Ce,Z,null);else{var be=ue.append(le,Ce);if(Ce(le.shared.gl,".useProgram(",be,".program);"),Z.shader.program)Hf(le,Ce,Z,Z.shader.program);else{Ce(le.shared.vao,".setVAO(null);");var oe=le.global.def("{}"),Fe=Ce.def(be,".id"),je=Ce.def(oe,"[",Fe,"]");Ce(le.cond(je).then(je,".call(this,a0,a1);").else(je,"=",oe,"[",Fe,"]=",le.link(function(ct){return Zr(Hf,le,Z,ct,2)}),"(",be,");",je,".call(this,a0,a1);"))}}Object.keys(Z.state).length>0&&Ce(le.shared.current,".dirty=true;")}function et(le,Z){var Ce=le.proc("scope",3);le.batchId="a2";var Be=le.shared,He=Be.current;ia(le,Ce,Z.context),Z.framebuffer&&Z.framebuffer.append(le,Ce),oF(Object.keys(Z.state)).forEach(function(Ee){var Oe=Z.state[Ee],ue=Oe.append(le,Ce);Ri(ue)?ue.forEach(function(be,oe){Ce.set(le.next[Ee],"["+oe+"]",be)}):Ce.set(Be.next,"."+Ee,ue)}),Nr(le,Ce,Z,!0,!0),[zf,jb,Uf,Yb,Gf].forEach(function(Ee){var Oe=Z.draw[Ee];!Oe||Ce.set(Be.draw,"."+Ee,""+Oe.append(le,Ce))}),Object.keys(Z.uniforms).forEach(function(Ee){var Oe=Z.uniforms[Ee].append(le,Ce);Array.isArray(Oe)&&(Oe="["+Oe.join()+"]"),Ce.set(Be.uniforms,"["+te.id(Ee)+"]",Oe)}),Object.keys(Z.attributes).forEach(function(Ee){var Oe=Z.attributes[Ee].append(le,Ce),ue=le.scopeAttrib(Ee);Object.keys(new ze).forEach(function(be){Ce.set(ue,"."+be,Oe[be])})}),Z.scopeVAO&&Ce.set(Be.vao,".targetVAO",Z.scopeVAO.append(le,Ce));function Te(Ee){var Oe=Z.shader[Ee];Oe&&Ce.set(Be.shader,"."+Ee,Oe.append(le,Ce))}Te(Ng),Te(Bg),Object.keys(Z.state).length>0&&(Ce(He,".dirty=true;"),Ce.exit(He,".dirty=true;")),Ce("a1(",le.shared.context,",a0,",le.batchId,");")}function Xe(le){if(!(typeof le!="object"||Ri(le))){for(var Z=Object.keys(le),Ce=0;Ce<Z.length;++Ce)if(St.isDynamic(le[Z[Ce]]))return!0;return!1}}function Zt(le,Z,Ce){var Be=Z.static[Ce];if(!Be||!Xe(Be))return;var He=le.global,Te=Object.keys(Be),Ee=!1,Oe=!1,ue=!1,be=le.global.def("{}");Te.forEach(function(Fe){var je=Be[Fe];if(St.isDynamic(je)){typeof je=="function"&&(je=Be[Fe]=St.unbox(je));var ct=Oo(je,null);Ee=Ee||ct.thisDep,ue=ue||ct.propDep,Oe=Oe||ct.contextDep}else{switch(He(be,".",Fe,"="),typeof je){case"number":He(je);break;case"string":He('"',je,'"');break;case"object":Array.isArray(je)&&He("[",je.join(),"]");break;default:He(le.link(je));break}He(";")}});function oe(Fe,je){Te.forEach(function(ct){var ht=Be[ct];if(!!St.isDynamic(ht)){var lt=Fe.invoke(je,ht);je(be,".",ct,"=",lt,";")}})}Z.dynamic[Ce]=new St.DynamicVariable(Hb,{thisDep:Ee,contextDep:Oe,propDep:ue,ref:be,append:oe}),delete Z.static[Ce]}function Xr(le,Z,Ce,Be,He){var Te=wr();Te.stats=Te.link(He),Object.keys(Z.static).forEach(function(Oe){Zt(Te,Z,Oe)}),Qie.forEach(function(Oe){Zt(Te,le,Oe)});var Ee=Yi(le,Z,Ce,Be,Te);return Li(Te,Ee),et(Te,Ee),de(Te,Ee),n(Te.compile(),{destroy:function(){Ee.shader.program.destroy()}})}return{next:qt,current:yt,procs:function(){var le=wr(),Z=le.proc("poll"),Ce=le.proc("refresh"),Be=le.block();Z(Be),Ce(Be);var He=le.shared,Te=He.gl,Ee=He.next,Oe=He.current;Be(Oe,".dirty=false;"),aa(le,Z),aa(le,Ce,null,!0);var ue;Mt&&(ue=le.link(Mt)),ve.oes_vertex_array_object&&Ce(le.link(ve.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var be=0;be<Ze.maxAttributes;++be){var oe=Ce.def(He.attributes,"[",be,"]"),Fe=le.cond(oe,".buffer");Fe.then(Te,".enableVertexAttribArray(",be,");",Te,".bindBuffer(",nv,",",oe,".buffer.buffer);",Te,".vertexAttribPointer(",be,",",oe,".size,",oe,".type,",oe,".normalized,",oe,".stride,",oe,".offset);").else(Te,".disableVertexAttribArray(",be,");",Te,".vertexAttrib4f(",be,",",oe,".x,",oe,".y,",oe,".z,",oe,".w);",oe,".buffer=null;"),Ce(Fe),Mt&&Ce(ue,".vertexAttribDivisorANGLE(",be,",",oe,".divisor);")}return Ce(le.shared.vao,".currentVAO=null;",le.shared.vao,".setVAO(",le.shared.vao,".targetVAO);"),Object.keys(Bt).forEach(function(je){var ct=Bt[je],ht=Be.def(Ee,".",je),lt=le.block();lt("if(",ht,"){",Te,".enable(",ct,")}else{",Te,".disable(",ct,")}",Oe,".",je,"=",ht,";"),Ce(lt),Z("if(",ht,"!==",Oe,".",je,"){",lt,"}")}),Object.keys(bt).forEach(function(je){var ct=bt[je],ht=yt[je],lt,At,lr=le.block();if(lr(Te,".",ct,"("),Ri(ht)){var Br=ht.length;lt=le.global.def(Ee,".",je),At=le.global.def(Oe,".",je),lr(st(Br,function(er){return lt+"["+er+"]"}),");",st(Br,function(er){return At+"["+er+"]="+lt+"["+er+"];"}).join("")),Z("if(",st(Br,function(er){return lt+"["+er+"]!=="+At+"["+er+"]"}).join("||"),"){",lr,"}")}else lt=Be.def(Ee,".",je),At=Be.def(Oe,".",je),lr(lt,");",Oe,".",je,"=",lt,";"),Z("if(",lt,"!==",At,"){",lr,"}");Ce(lr)}),le.compile()}(),compile:Xr}}function yae(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var bae=34918,xae=34919,lF=35007,wae=function(N,te){if(!te.ext_disjoint_timer_query)return null;var ve=[];function Ze(){return ve.pop()||te.ext_disjoint_timer_query.createQueryEXT()}function dt(Mt){ve.push(Mt)}var Ke=[];function it(Mt){var Yt=Ze();te.ext_disjoint_timer_query.beginQueryEXT(lF,Yt),Ke.push(Yt),Et(Ke.length-1,Ke.length,Mt)}function Ct(){te.ext_disjoint_timer_query.endQueryEXT(lF)}function _t(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var It=[];function Tt(){return It.pop()||new _t}function Ot(Mt){It.push(Mt)}var Ut=[];function Et(Mt,Yt,yt){var qt=Tt();qt.startQueryIndex=Mt,qt.endQueryIndex=Yt,qt.sum=0,qt.stats=yt,Ut.push(qt)}var Lt=[],ze=[];function at(){var Mt,Yt,yt=Ke.length;if(yt!==0){ze.length=Math.max(ze.length,yt+1),Lt.length=Math.max(Lt.length,yt+1),Lt[0]=0,ze[0]=0;var qt=0;for(Mt=0,Yt=0;Yt<Ke.length;++Yt){var xt=Ke[Yt];te.ext_disjoint_timer_query.getQueryObjectEXT(xt,xae)?(qt+=te.ext_disjoint_timer_query.getQueryObjectEXT(xt,bae),dt(xt)):Ke[Mt++]=xt,Lt[Yt+1]=qt,ze[Yt+1]=Mt}for(Ke.length=Mt,Mt=0,Yt=0;Yt<Ut.length;++Yt){var Bt=Ut[Yt],bt=Bt.startQueryIndex,$t=Bt.endQueryIndex;Bt.sum+=Lt[$t]-Lt[bt];var fr=ze[bt],Ar=ze[$t];Ar===fr?(Bt.stats.gpuTime+=Bt.sum/1e6,Ot(Bt)):(Bt.startQueryIndex=fr,Bt.endQueryIndex=Ar,Ut[Mt++]=Bt)}Ut.length=Mt}}return{beginQuery:it,endQuery:Ct,pushScopeStats:Et,update:at,getNumPendingQueries:function(){return Ke.length},clear:function(){ve.push.apply(ve,Ke);for(var Mt=0;Mt<ve.length;Mt++)te.ext_disjoint_timer_query.deleteQueryEXT(ve[Mt]);Ke.length=0,ve.length=0},restore:function(){Ke.length=0,ve.length=0}}},Sae=16384,Cae=256,Eae=1024,_ae=34962,uF="webglcontextlost",cF="webglcontextrestored",fF=1,Tae=2,Aae=3;function dF(N,te){for(var ve=0;ve<N.length;++ve)if(N[ve]===te)return ve;return-1}function kae(N){var te=or(N);if(!te)return null;var ve=te.gl,Ze=ve.getContextAttributes(),dt=ve.isContextLost(),Ke=qe(ve,te);if(!Ke)return null;var it=ut(),Ct=yae(),_t=Ke.extensions,It=wae(ve,_t),Tt=Ae(),Ot=ve.drawingBufferWidth,Ut=ve.drawingBufferHeight,Et={tick:0,time:0,viewportWidth:Ot,viewportHeight:Ut,framebufferWidth:Ot,framebufferHeight:Ut,drawingBufferWidth:Ot,drawingBufferHeight:Ut,pixelRatio:te.pixelRatio},Lt={},ze={elements:null,primitive:4,count:-1,offset:0,instances:-1},at=hne(ve,_t),Mt=Mne(ve,Ct,te,yt),Yt=Gie(ve,_t,at,Ct,Mt);function yt(pr){return Yt.destroyBuffer(pr)}var qt=Gne(ve,_t,Mt,Ct),xt=Wie(ve,it,Ct,te),Bt=yie(ve,_t,at,function(){fr.procs.poll()},Et,Ct,te),bt=bie(ve,_t,at,Ct,te),$t=$ie(ve,_t,at,Bt,bt,Ct),fr=mae(ve,it,_t,at,Mt,qt,Bt,$t,Lt,Yt,xt,ze,Et,It,te),Ar=Xie(ve,$t,fr.procs.poll,Et,Ze,_t,at),Vt=fr.next,Pt=ve.canvas,gt=[],wr=[],Fr=[],Jt=[te.onDestroy],Yr=null;function kr(){if(gt.length===0){It&&It.update(),Yr=null;return}Yr=kt.next(kr),Da();for(var pr=gt.length-1;pr>=0;--pr){var Zr=gt[pr];Zr&&Zr(Et,null,0)}ve.flush(),It&&It.update()}function Gr(){!Yr&&gt.length>0&&(Yr=kt.next(kr))}function mn(){Yr&&(kt.cancel(kr),Yr=null)}function ji(pr){pr.preventDefault(),dt=!0,mn(),wr.forEach(function(Zr){Zr()})}function da(pr){ve.getError(),dt=!1,Ke.restore(),xt.restore(),Mt.restore(),Bt.restore(),bt.restore(),$t.restore(),Yt.restore(),It&&It.restore(),fr.procs.refresh(),Gr(),Fr.forEach(function(Zr){Zr()})}Pt&&(Pt.addEventListener(uF,ji,!1),Pt.addEventListener(cF,da,!1));function rn(){gt.length=0,mn(),Pt&&(Pt.removeEventListener(uF,ji),Pt.removeEventListener(cF,da)),xt.clear(),$t.clear(),bt.clear(),Bt.clear(),qt.clear(),Mt.clear(),Yt.clear(),It&&It.clear(),Jt.forEach(function(pr){pr()})}function na(pr){H(!!pr,"invalid args to regl({...})"),H.type(pr,"object","invalid args to regl({...})");function Zr(He){var Te=n({},He);delete Te.uniforms,delete Te.attributes,delete Te.context,delete Te.vao,"stencil"in Te&&Te.stencil.op&&(Te.stencil.opBack=Te.stencil.opFront=Te.stencil.op,delete Te.stencil.op);function Ee(Oe){if(Oe in Te){var ue=Te[Oe];delete Te[Oe],Object.keys(ue).forEach(function(be){Te[Oe+"."+be]=ue[be]})}}return Ee("blend"),Ee("depth"),Ee("cull"),Ee("stencil"),Ee("polygonOffset"),Ee("scissor"),Ee("sample"),"vao"in He&&(Te.vao=He.vao),Te}function hn(He,Te){var Ee={},Oe={};return Object.keys(He).forEach(function(ue){var be=He[ue];if(St.isDynamic(be)){Oe[ue]=St.unbox(be,ue);return}else if(Te&&Array.isArray(be)){for(var oe=0;oe<be.length;++oe)if(St.isDynamic(be[oe])){Oe[ue]=St.unbox(be,ue);return}}Ee[ue]=be}),{dynamic:Oe,static:Ee}}var Li=hn(pr.context||{},!0),bl=hn(pr.uniforms||{},!0),Hf=hn(pr.attributes||{},!1),de=hn(Zr(pr),!1),et={gpuTime:0,cpuTime:0,count:0},Xe=fr.compile(de,Hf,bl,Li,et),Zt=Xe.draw,Xr=Xe.batch,le=Xe.scope,Z=[];function Ce(He){for(;Z.length<He;)Z.push(null);return Z}function Be(He,Te){var Ee;if(dt&&H.raise("context lost"),typeof He=="function")return le.call(this,null,He,0);if(typeof Te=="function")if(typeof He=="number")for(Ee=0;Ee<He;++Ee)le.call(this,null,Te,Ee);else if(Array.isArray(He))for(Ee=0;Ee<He.length;++Ee)le.call(this,He[Ee],Te,Ee);else return le.call(this,He,Te,0);else if(typeof He=="number"){if(He>0)return Xr.call(this,Ce(He|0),He|0)}else if(Array.isArray(He)){if(He.length)return Xr.call(this,He,He.length)}else return Zt.call(this,He)}return n(Be,{stats:et,destroy:function(){Xe.destroy()}})}var ai=$t.setFBO=na({framebuffer:St.define.call(null,fF,"framebuffer")});function Yi(pr,Zr){var hn=0;fr.procs.poll();var Li=Zr.color;Li&&(ve.clearColor(+Li[0]||0,+Li[1]||0,+Li[2]||0,+Li[3]||0),hn|=Sae),"depth"in Zr&&(ve.clearDepth(+Zr.depth),hn|=Cae),"stencil"in Zr&&(ve.clearStencil(Zr.stencil|0),hn|=Eae),H(!!hn,"called regl.clear with no buffer specified"),ve.clear(hn)}function ia(pr){if(H(typeof pr=="object"&&pr,"regl.clear() takes an object as input"),"framebuffer"in pr)if(pr.framebuffer&&pr.framebuffer_reglType==="framebufferCube")for(var Zr=0;Zr<6;++Zr)ai(n({framebuffer:pr.framebuffer.faces[Zr]},pr),Yi);else ai(pr,Yi);else Yi(null,pr)}function aa(pr){H.type(pr,"function","regl.frame() callback must be a function"),gt.push(pr);function Zr(){var hn=dF(gt,pr);H(hn>=0,"cannot cancel a frame twice");function Li(){var bl=dF(gt,Li);gt[bl]=gt[gt.length-1],gt.length-=1,gt.length<=0&&mn()}gt[hn]=Li}return Gr(),{cancel:Zr}}function ma(){var pr=Vt.viewport,Zr=Vt.scissor_box;pr[0]=pr[1]=Zr[0]=Zr[1]=0,Et.viewportWidth=Et.framebufferWidth=Et.drawingBufferWidth=pr[2]=Zr[2]=ve.drawingBufferWidth,Et.viewportHeight=Et.framebufferHeight=Et.drawingBufferHeight=pr[3]=Zr[3]=ve.drawingBufferHeight}function Da(){Et.tick+=1,Et.time=Nr(),ma(),fr.procs.poll()}function Oi(){Bt.refresh(),ma(),fr.procs.refresh(),It&&It.update()}function Nr(){return(Ae()-Tt)/1e3}Oi();function Ra(pr,Zr){H.type(Zr,"function","listener callback must be a function");var hn;switch(pr){case"frame":return aa(Zr);case"lost":hn=wr;break;case"restore":hn=Fr;break;case"destroy":hn=Jt;break;default:H.raise("invalid event, must be one of frame,lost,restore,destroy")}return hn.push(Zr),{cancel:function(){for(var Li=0;Li<hn.length;++Li)if(hn[Li]===Zr){hn[Li]=hn[hn.length-1],hn.pop();return}}}}var Tn=n(na,{clear:ia,prop:St.define.bind(null,fF),context:St.define.bind(null,Tae),this:St.define.bind(null,Aae),draw:na({}),buffer:function(pr){return Mt.create(pr,_ae,!1,!1)},elements:function(pr){return qt.create(pr,!1)},texture:Bt.create2D,cube:Bt.createCube,renderbuffer:bt.create,framebuffer:$t.create,framebufferCube:$t.createCube,vao:Yt.createVAO,attributes:Ze,frame:aa,on:Ra,limits:at,hasExtension:function(pr){return at.extensions.indexOf(pr.toLowerCase())>=0},read:Ar,destroy:rn,_gl:ve,_refresh:Oi,poll:function(){Da(),It&&It.update()},now:Nr,stats:Ct});return te.onDone(null,Tn),Tn}return kae})}),qDe=function(){function r(t,e){dr(this,r),this.attribute=void 0,this.buffer=void 0;var n=e.buffer,i=e.offset,a=e.stride,o=e.normalized,s=e.size,l=e.divisor;this.buffer=n,this.attribute={buffer:n.get(),offset:i||0,stride:a||0,normalized:o||!1,divisor:l||0},s&&(this.attribute.size=s)}return _r(r,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(e){this.buffer.subData(e)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),r}(),Ou,By,Lu,Gs,$y,qc,zy,rS,Ul,Vd,eo,Vl,Hl,nS,KDe=(Ou={},ft(Ou,Ue.POINTS,"points"),ft(Ou,Ue.LINES,"lines"),ft(Ou,Ue.LINE_LOOP,"line loop"),ft(Ou,Ue.LINE_STRIP,"line strip"),ft(Ou,Ue.TRIANGLES,"triangles"),ft(Ou,Ue.TRIANGLE_FAN,"triangle fan"),ft(Ou,Ue.TRIANGLE_STRIP,"triangle strip"),Ou),tW=(By={},ft(By,Ue.STATIC_DRAW,"static"),ft(By,Ue.DYNAMIC_DRAW,"dynamic"),ft(By,Ue.STREAM_DRAW,"stream"),By),DM=(Lu={},ft(Lu,Ue.BYTE,"int8"),ft(Lu,Ue.UNSIGNED_INT,"int16"),ft(Lu,Ue.INT,"int32"),ft(Lu,Ue.UNSIGNED_BYTE,"uint8"),ft(Lu,Ue.UNSIGNED_SHORT,"uint16"),ft(Lu,Ue.UNSIGNED_INT,"uint32"),ft(Lu,Ue.FLOAT,"float"),Lu),ZDe=(Gs={},ft(Gs,Ue.ALPHA,"alpha"),ft(Gs,Ue.LUMINANCE,"luminance"),ft(Gs,Ue.LUMINANCE_ALPHA,"luminance alpha"),ft(Gs,Ue.RGB,"rgb"),ft(Gs,Ue.RGBA,"rgba"),ft(Gs,Ue.RGBA4,"rgba4"),ft(Gs,Ue.RGB5_A1,"rgb5 a1"),ft(Gs,Ue.RGB565,"rgb565"),ft(Gs,Ue.DEPTH_COMPONENT,"depth"),ft(Gs,Ue.DEPTH_STENCIL,"depth stencil"),Gs),QDe=($y={},ft($y,Ue.DONT_CARE,"dont care"),ft($y,Ue.NICEST,"nice"),ft($y,Ue.FASTEST,"fast"),$y),rW=(qc={},ft(qc,Ue.NEAREST,"nearest"),ft(qc,Ue.LINEAR,"linear"),ft(qc,Ue.LINEAR_MIPMAP_LINEAR,"mipmap"),ft(qc,Ue.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),ft(qc,Ue.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),ft(qc,Ue.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),qc),nW=(zy={},ft(zy,Ue.REPEAT,"repeat"),ft(zy,Ue.CLAMP_TO_EDGE,"clamp"),ft(zy,Ue.MIRRORED_REPEAT,"mirror"),zy),JDe=(rS={},ft(rS,Ue.NONE,"none"),ft(rS,Ue.BROWSER_DEFAULT_WEBGL,"browser"),rS),eRe=(Ul={},ft(Ul,Ue.NEVER,"never"),ft(Ul,Ue.ALWAYS,"always"),ft(Ul,Ue.LESS,"less"),ft(Ul,Ue.LEQUAL,"lequal"),ft(Ul,Ue.GREATER,"greater"),ft(Ul,Ue.GEQUAL,"gequal"),ft(Ul,Ue.EQUAL,"equal"),ft(Ul,Ue.NOTEQUAL,"notequal"),Ul),iW=(Vd={},ft(Vd,Ue.FUNC_ADD,"add"),ft(Vd,Ue.MIN_EXT,"min"),ft(Vd,Ue.MAX_EXT,"max"),ft(Vd,Ue.FUNC_SUBTRACT,"subtract"),ft(Vd,Ue.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Vd),iS=(eo={},ft(eo,Ue.ZERO,"zero"),ft(eo,Ue.ONE,"one"),ft(eo,Ue.SRC_COLOR,"src color"),ft(eo,Ue.ONE_MINUS_SRC_COLOR,"one minus src color"),ft(eo,Ue.SRC_ALPHA,"src alpha"),ft(eo,Ue.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),ft(eo,Ue.DST_COLOR,"dst color"),ft(eo,Ue.ONE_MINUS_DST_COLOR,"one minus dst color"),ft(eo,Ue.DST_ALPHA,"dst alpha"),ft(eo,Ue.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),ft(eo,Ue.CONSTANT_COLOR,"constant color"),ft(eo,Ue.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),ft(eo,Ue.CONSTANT_ALPHA,"constant alpha"),ft(eo,Ue.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),ft(eo,Ue.SRC_ALPHA_SATURATE,"src alpha saturate"),eo),tRe=(Vl={},ft(Vl,Ue.NEVER,"never"),ft(Vl,Ue.ALWAYS,"always"),ft(Vl,Ue.LESS,"less"),ft(Vl,Ue.LEQUAL,"lequal"),ft(Vl,Ue.GREATER,"greater"),ft(Vl,Ue.GEQUAL,"gequal"),ft(Vl,Ue.EQUAL,"equal"),ft(Vl,Ue.NOTEQUAL,"notequal"),Vl),up=(Hl={},ft(Hl,Ue.ZERO,"zero"),ft(Hl,Ue.KEEP,"keep"),ft(Hl,Ue.REPLACE,"replace"),ft(Hl,Ue.INVERT,"invert"),ft(Hl,Ue.INCR,"increment"),ft(Hl,Ue.DECR,"decrement"),ft(Hl,Ue.INCR_WRAP,"increment wrap"),ft(Hl,Ue.DECR_WRAP,"decrement wrap"),Hl),rRe=(nS={},ft(nS,Ue.FRONT,"front"),ft(nS,Ue.BACK,"back"),nS),nRe=function(){function r(t,e){dr(this,r),this.buffer=void 0;var n=e.data,i=e.usage,a=e.type;this.buffer=t.buffer({data:n,usage:tW[i||Ue.STATIC_DRAW],type:DM[a||Ue.UNSIGNED_BYTE]})}return _r(r,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(e){var n=e.data,i=e.offset;this.buffer.subdata(n,i)}}]),r}();function iRe(r){if(Array.isArray(r))return sM(r)}function aRe(r){if(typeof Symbol!="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function oRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ua(r){return iRe(r)||aRe(r)||y8(r)||oRe()}var sRe=9007199254740991,lRe="[object Arguments]",uRe="[object Array]",cRe="[object Boolean]",fRe="[object Date]",dRe="[object Error]",hRe="[object Function]",vRe="[object Map]",pRe="[object Number]",gRe="[object Object]",mRe="[object RegExp]",yRe="[object Set]",bRe="[object String]",xRe="[object WeakMap]",wRe="[object ArrayBuffer]",SRe="[object DataView]",CRe="[object Float32Array]",ERe="[object Float64Array]",_Re="[object Int8Array]",TRe="[object Int16Array]",ARe="[object Int32Array]",kRe="[object Uint8Array]",MRe="[object Uint8ClampedArray]",IRe="[object Uint16Array]",PRe="[object Uint32Array]",wi={};wi[CRe]=wi[ERe]=wi[_Re]=wi[TRe]=wi[ARe]=wi[kRe]=wi[MRe]=wi[IRe]=wi[PRe]=!0;wi[lRe]=wi[uRe]=wi[wRe]=wi[cRe]=wi[SRe]=wi[fRe]=wi[dRe]=wi[hRe]=wi[vRe]=wi[pRe]=wi[gRe]=wi[mRe]=wi[yRe]=wi[bRe]=wi[xRe]=!1;var DRe=Object.prototype,RRe=DRe.toString;function ORe(r){return FRe(r)&&LRe(r.length)&&!!wi[RRe.call(r)]}function LRe(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=sRe}function FRe(r){return!!r&&Gl(r)==="object"}var RM=ORe;function aW(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function oW(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?aW(Object(e),!0).forEach(function(n){ft(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):aW(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}var NRe=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,sW=0,BRe=function(){function r(t,e){var n=this;dr(this,r),this.reGl=t,this.context=e,this.entity=$l(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var i={};this.context.uniforms.forEach(function(u){var c=u.name,f=u.type,d=u.data,h=u.isReferer,v=u.storageClass;if(v===Wc.StorageBuffer){if(h)n.textureCache[c]={data:void 0},i["".concat(c,"Size")]=function(){return d.compiledBundle.context.output.textureSize};else{n.textureCache[c]=n.calcDataTexture(c,f,d);var p=n.textureCache[c],g=p.textureWidth,m=p.isOutput;i["".concat(c,"Size")]=[g,g],m&&(n.outputTextureName=c,n.context.needPingpong&&(n.outputTextureName="".concat(c,"Output"),n.textureCache[n.outputTextureName]=n.calcDataTexture(c,f,d)))}i[c]=function(){return n.textureCache[c].texture}}else if(v===Wc.Uniform){if(d&&(Array.isArray(d)||RM(d))&&d.length>16)throw new Error("invalid data type ".concat(f));i[c]=function(){return u.data}}});var a=this.getOuputDataTexture(),o=a.textureWidth,s=a.texelCount;i.u_OutputTextureSize=[o,o],i.u_OutputTexelCount=s,this.context.output.textureSize=[o,o];var l={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:i,vert:NRe,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(l)}return _r(r,[{key:"run",value:function(){var e=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){e.computeCommand()})}},{key:"readData",value:function(){var t=kn(ar.mark(function n(){var i=this,a,o,s,l,u,c,f,d;return ar.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){a=i.reGl.read()}),!a){v.next=6;break}if(o=this.getOuputDataTexture(),s=o.originalDataLength,l=o.elementsPerTexel,u=o.typedArrayConstructor,c=u===void 0?Float32Array:u,f=[],l!==4)for(d=0;d<a.length;d+=4)l===1?f.push(a[d]):l===2?f.push(a[d],a[d+1]):f.push(a[d],a[d+1],a[d+2]);else f=a;return v.abrupt("return",new c(f.slice(0,s)));case 6:return v.abrupt("return",new Float32Array);case 7:case"end":return v.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"confirmInput",value:function(e,n){var i;this.entity===e.entity?(this.dynamicPingpong=!0,i=this):i=e,this.textureCache[n].id=i.getOuputDataTexture().id,this.textureCache[n].texture=i.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(e,n){var i=this.context.uniforms.find(function(l){var u=l.name;return u===e});if(i){var a=this.calcDataTexture(e,i.type,n),o=a.texture,s=a.data;this.textureCache[e].data=s,this.textureCache[e].texture=o}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var e=this.context.output.name;this.textureCache[e].id=this.getOuputDataTexture().id,this.textureCache[e].texture=this.getOuputDataTexture().texture}var n=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=n}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var e=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=e}},{key:"cloneDataTexture",value:function(e){var n=e.data,i=e.textureWidth;return oW(oW({},e),{},{id:sW++,texture:this.reGl.texture({width:i,height:i,data:n,type:"float"})})}},{key:"calcDataTexture",value:function(e,n,i){var a=1;n===Nd.Vector4FloatArray&&(a=4);for(var o=[],s=0;s<i.length;s+=a)a===1?o.push(i[s],0,0,0):a===2?o.push(i[s],i[s+1],0,0):a===3?o.push(i[s],i[s+1],i[s+2],0):a===4&&o.push(i[s],i[s+1],i[s+2],i[s+3]);var l=i.length,u=Math.ceil(l/a),c=Math.ceil(Math.sqrt(u)),f=c*c;u<f&&o.push.apply(o,ua(new Array((f-u)*4).fill(0)));var d=this.reGl.texture({width:c,height:c,data:o,type:"float"});return{id:sW++,data:o,originalDataLength:l,typedArrayConstructor:RM(i)?i.constructor:void 0,textureWidth:c,texture:d,texelCount:u,elementsPerTexel:a,isOutput:e===this.context.output.name}}}]),r}(),$Re=function(){function r(t,e){dr(this,r),this.elements=void 0;var n=e.data,i=e.usage,a=e.type,o=e.count;this.elements=t.elements({data:n,usage:tW[i||Ue.STATIC_DRAW],type:DM[a||Ue.UNSIGNED_BYTE],count:o})}return _r(r,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(e){var n=e.data;this.elements.subdata(n)}},{key:"destroy",value:function(){this.elements.destroy()}}]),r}(),zRe=function(){function r(t,e){dr(this,r),this.framebuffer=void 0;var n=e.width,i=e.height,a=e.color,o=e.colors;e.depth,e.stencil;var s={width:n,height:i};Array.isArray(o)&&(s.colors=o.map(function(l){return l.get()})),a&&typeof a!="boolean"&&(s.color=a.get()),this.framebuffer=t.framebuffer(s)}return _r(r,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(e){var n=e.width,i=e.height;this.framebuffer.resize(n,i)}}]),r}();function GRe(r){var t=Gl(r);return r!=null&&(t==="object"||t==="function")}function Gy(r){var t={};return Object.keys(r).forEach(function(e){OM(e,r[e],t,"")}),t}function OM(r,t,e,n){if(t===null||typeof t=="number"||typeof t=="boolean"||Array.isArray(t)&&typeof t[0]=="number"||RM(t)||t===""||t.resize!==void 0){e["".concat(n&&n+".").concat(r)]=t;return}GRe(t)&&Object.keys(t).forEach(function(i){OM(i,t[i],e,"".concat(n&&n+".").concat(r))}),Array.isArray(t)&&t.forEach(function(i,a){Object.keys(i).forEach(function(o){OM(o,i[o],e,"".concat(n&&n+".").concat(r,"[").concat(a,"]"))})})}function lW(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function cp(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?lW(Object(e),!0).forEach(function(n){ft(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):lW(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}var URe=function(){function r(t,e){dr(this,r),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=t;var n=e.vs,i=e.fs,a=e.defines,o=e.attributes,s=e.uniforms,l=e.primitive,u=e.count,c=e.elements,f=e.depth,d=e.blend,h=e.stencil,v=e.cull,p=e.instances,g=e.scissor,m=e.viewport,y={};s&&(this.uniforms=Gy(s),Object.keys(s).forEach(function(S){y[S]=t.prop(S)}));var b={};Object.keys(o).forEach(function(S){b[S]=o[S].get()});var x=a&&this.generateDefines(a)||"",w={attributes:b,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(x,`
`).concat(i),uniforms:y,vert:`
`.concat(x,`
`).concat(n),primitive:KDe[l===void 0?Ue.TRIANGLES:l]};p&&(w.instances=p),u&&(w.count=u),c&&(w.elements=c.get()),g&&(w.scissor=g),m&&(w.viewport=m),this.initDepthDrawParams({depth:f},w),this.initBlendDrawParams({blend:d},w),this.initStencilDrawParams({stencil:h},w),this.initCullDrawParams({cull:v},w),this.drawCommand=t(w)}return _r(r,[{key:"addUniforms",value:function(e){this.uniforms=cp(cp({},this.uniforms),Gy(e))}},{key:"draw",value:function(e){var n=cp(cp({},this.uniforms),Gy(e.uniforms||{})),i={};Object.keys(n).forEach(function(a){var o=Gl(n[a]);o==="boolean"||o==="number"||Array.isArray(n[a])||n[a].BYTES_PER_ELEMENT?i[a]=n[a]:o==="string"||(i[a]=n[a].get())}),this.drawCommand(i)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(e,n){var i=e.depth;i&&(n.depth={enable:i.enable===void 0?!0:!!i.enable,mask:i.mask===void 0?!0:!!i.mask,func:eRe[i.func||Ue.LESS],range:i.range||[0,1]})}},{key:"initBlendDrawParams",value:function(e,n){var i=e.blend;if(i){var a=i.enable,o=i.func,s=i.equation,l=i.color,u=l===void 0?[0,0,0,0]:l;n.blend={enable:!!a,func:{srcRGB:iS[o&&o.srcRGB||Ue.SRC_ALPHA],srcAlpha:iS[o&&o.srcAlpha||Ue.SRC_ALPHA],dstRGB:iS[o&&o.dstRGB||Ue.ONE_MINUS_SRC_ALPHA],dstAlpha:iS[o&&o.dstAlpha||Ue.ONE_MINUS_SRC_ALPHA]},equation:{rgb:iW[s&&s.rgb||Ue.FUNC_ADD],alpha:iW[s&&s.alpha||Ue.FUNC_ADD]},color:u}}}},{key:"initStencilDrawParams",value:function(e,n){var i=e.stencil;if(i){var a=i.enable,o=i.mask,s=o===void 0?-1:o,l=i.func,u=l===void 0?{cmp:Ue.ALWAYS,ref:0,mask:-1}:l,c=i.opFront,f=c===void 0?{fail:Ue.KEEP,zfail:Ue.KEEP,zpass:Ue.KEEP}:c,d=i.opBack,h=d===void 0?{fail:Ue.KEEP,zfail:Ue.KEEP,zpass:Ue.KEEP}:d;n.stencil={enable:!!a,mask:s,func:cp(cp({},u),{},{cmp:tRe[u.cmp]}),opFront:{fail:up[f.fail],zfail:up[f.zfail],zpass:up[f.zpass]},opBack:{fail:up[h.fail],zfail:up[h.zfail],zpass:up[h.zpass]}}}}},{key:"initCullDrawParams",value:function(e,n){var i=e.cull;if(i){var a=i.enable,o=i.face,s=o===void 0?Ue.BACK:o;n.cull={enable:!!a,face:rRe[s]}}}},{key:"generateDefines",value:function(e){return Object.keys(e).map(function(n){return"#define ".concat(n," ").concat(Number(e[n]))}).join(`
`)}}]),r}(),VRe=function(){function r(t,e){dr(this,r),this.texture=void 0,this.width=void 0,this.height=void 0;var n=e.data,i=e.type,a=i===void 0?Ue.UNSIGNED_BYTE:i,o=e.width,s=e.height,l=e.flipY,u=l===void 0?!1:l,c=e.format,f=c===void 0?Ue.RGBA:c,d=e.mipmap,h=d===void 0?!1:d,v=e.wrapS,p=v===void 0?Ue.CLAMP_TO_EDGE:v,g=e.wrapT,m=g===void 0?Ue.CLAMP_TO_EDGE:g,y=e.aniso,b=y===void 0?0:y,x=e.alignment,w=x===void 0?1:x,S=e.premultiplyAlpha,C=S===void 0?!1:S,_=e.mag,T=_===void 0?Ue.NEAREST:_,E=e.min,k=E===void 0?Ue.NEAREST:E,I=e.colorSpace,P=I===void 0?Ue.BROWSER_DEFAULT_WEBGL:I;this.width=o,this.height=s;var F={width:o,height:s,type:DM[a],format:ZDe[f],wrapS:nW[p],wrapT:nW[m],mag:rW[T],min:rW[k],alignment:w,flipY:u,colorSpace:JDe[P],premultiplyAlpha:C,aniso:b};n&&(F.data=n),typeof h=="number"?F.mipmap=QDe[h]:typeof h=="boolean"&&(F.mipmap=h),this.texture=t.texture(F)}return _r(r,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(e){var n=e.width,i=e.height;this.texture.resize(n,i),this.width=n,this.height=i}},{key:"destroy",value:function(){this.texture.destroy()}}]),r}(),uW,cW,fW,HRe=(uW=Dn(),uW(cW=(fW=function(){function r(){var t=this;dr(this,r),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var e=kn(ar.mark(function n(i){return ar.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.uniforms){o.next=3;break}return o.next=3,Promise.all(Object.keys(i.uniforms).map(function(){var s=kn(ar.mark(function l(u){var c;return ar.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(i.uniforms[u]&&i.uniforms[u].load!==void 0)){d.next=5;break}return d.next=3,i.uniforms[u].load();case 3:c=d.sent,i.uniforms[u]=c;case 5:case"end":return d.stop()}},l)}));return function(l){return s.apply(this,arguments)}}()));case 3:return o.abrupt("return",new URe(t.gl,i));case 4:case"end":return o.stop()}},n)}));return function(n){return e.apply(this,arguments)}}(),this.createAttribute=function(e){return new qDe(t.gl,e)},this.createBuffer=function(e){return new nRe(t.gl,e)},this.createElements=function(e){return new $Re(t.gl,e)},this.createTexture2D=function(e){return new VRe(t.gl,e)},this.createFramebuffer=function(e){return new zRe(t.gl,e)},this.useFramebuffer=function(e,n){t.gl({framebuffer:e?e.get():null})(n)},this.createComputeModel=function(){var e=kn(ar.mark(function n(i){return ar.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new BRe(t.gl,i));case 1:case"end":return o.stop()}},n)}));return function(n){return e.apply(this,arguments)}}(),this.clear=function(e){var n=e.color,i=e.depth,a=e.stencil,o=e.framebuffer,s=o===void 0?null:o,l={color:n,depth:i,stencil:a};l.framebuffer=s===null?s:s.get(),t.gl.clear(l)},this.setScissor=function(e){t.gl&&t.gl._gl&&(e.enable&&e.box?(t.gl._gl.enable(Ue.SCISSOR_TEST),t.gl._gl.scissor(e.box.x,e.box.y,e.box.width,e.box.height)):t.gl._gl.disable(Ue.SCISSOR_TEST),t.gl._refresh())},this.viewport=function(e){var n=e.x,i=e.y,a=e.width,o=e.height;t.gl&&t.gl._gl&&(t.gl._gl.viewport(n,i,a,o),t.gl._refresh())},this.readPixels=function(e){var n=e.framebuffer,i=e.x,a=e.y,o=e.width,s=e.height,l={x:i,y:a,width:o,height:s};return n&&(l.framebuffer=n.get()),t.gl.read(l)},this.getCanvas=function(){return t.$canvas},this.getGLContext=function(){return t.gl._gl},this.destroy=function(){t.gl&&(t.gl.destroy(),t.inited=!1)}}return _r(r,[{key:"init",value:function(){var t=kn(ar.mark(function n(i){return ar.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this.inited){o.next=2;break}return o.abrupt("return");case 2:return this.$canvas=i.canvas,o.next=5,new Promise(function(s,l){XDe({canvas:i.canvas,attributes:{alpha:!0,antialias:i.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(c,f){(c||!f)&&l(c),s(f)}})});case 5:this.gl=o.sent,this.inited=!0;case 7:case"end":return o.stop()}},n,this)}));function e(n){return t.apply(this,arguments)}return e}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),r}(),fW))||cW);function WRe(){return typeof window!="undefined"}function jRe(r,t,e,n){if(!!WRe()){var i=document.getElementsByTagName("head")[0],a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src",r),n&&(a.id=n),a.onload=function(){t&&t()},a.onerror=function(o){e&&e("Unable to load script '".concat(r,"'"),o)},i.appendChild(a)}}function YRe(r,t){return new Promise(function(e,n){jRe(r,function(){e()},function(i,a){n(a)})})}var aS;function XRe(){return LM.apply(this,arguments)}function LM(){return LM=kn(ar.mark(function r(){return ar.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!aS){e.next=2;break}return e.abrupt("return",aS);case 2:return e.next=4,YRe("https://preview.babylonjs.com/glslang/glslang.js");case 4:return aS=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),e.abrupt("return",aS);case 6:case"end":return e.stop()}},r)})),LM.apply(this,arguments)}var qRe=function(){function r(t,e){dr(this,r),this.engine=t,this.options=e,this.attribute=void 0,this.buffer=void 0;var n=e,i=n.buffer,a=n.offset,o=n.stride,s=n.normalized,l=n.size,u=n.divisor,c=n.arrayStride,f=n.attributes,d=n.stepMode;this.buffer=i,this.attribute={buffer:i.get(),offset:a||0,stride:o||0,normalized:s||!1,divisor:u||0,arrayStride:c||0,attributes:f,stepMode:d||"vertex"},l&&(this.attribute.size=l)}return _r(r,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(e){this.buffer.subData(e)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),r}(),fp=function(){function r(t,e){dr(this,r),this.engine=t,this.options=e,this.buffer=void 0;var n=e,i=n.data,a=n.usage;n.type,this.buffer=this.createBuffer(i instanceof Array?new Float32Array(i):i,a||Uo.Vertex|Uo.CopyDst)}return _r(r,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(e){var n=e.data,i=e.offset;this.setSubData(this.buffer,i,n instanceof Array?new Float32Array(n):n)}},{key:"createBuffer",value:function(e,n){var i=e.byteLength%4,a={size:e.byteLength+i,usage:n},o=this.engine.device.createBuffer(a);return this.setSubData(o,0,e),o}},{key:"setSubData",value:function(e,n,i){var a=Go?this.engine.device.getQueue():this.engine.device.defaultQueue;a.writeBuffer(e,n,i)}}]),r}();function KRe(r){return typeof r=="number"}var ZRe=function(){function r(t,e){dr(this,r),this.engine=t,this.context=e,this.entity=$l(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}return _r(r,[{key:"init",value:function(){var t=kn(ar.mark(function n(){var i=this,a,o,s,l,u,c,f;return ar.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:a=h.sent,o=a.computeStage,s=this.context.uniforms.filter(function(v){return v.storageClass===Wc.StorageBuffer}),l=this.context.uniforms.filter(function(v){return v.storageClass===Wc.Uniform}),u=l.length?1:0,this.bindGroupEntries=[],u&&(c=0,f=[],l.forEach(function(v){if(KRe(v.data))i.uniformGPUBufferLayout.push({name:v.name,offset:c}),c+=4,f.push(v.data);else{var p,g=((p=v.data)===null||p===void 0?void 0:p.length)||1;g===3&&(g=4,v.data.push(0));var m=c/4%4;if(m>0){var y=4-m;if(g>1&&g<=y)g===2&&(y===3&&(c+=4,f.push(0)),f.push.apply(f,ua(v.data)),i.uniformGPUBufferLayout.push({name:v.name,offset:c}));else{for(var b=0;b<y;b++)c+=4,f.push(0);f.push.apply(f,ua(v.data)),i.uniformGPUBufferLayout.push({name:v.name,offset:c})}}c+=4*g}}),this.uniformBuffer=new fp(this.engine,{data:f instanceof Array?new Float32Array(f):f,usage:Uo.Uniform|Uo.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),s.forEach(function(v){if(v.data!==null&&(v.type===Nd.Vector4FloatArray||v.type===Nd.FloatArray)){var p;v.name===i.context.output.name?(p=new fp(i.engine,{data:isFinite(Number(v.data))?[v.data]:v.data,usage:Uo.Storage|Uo.CopyDst|Uo.CopySrc}),i.outputBuffer=p,i.context.output={name:v.name,length:isFinite(Number(v.data))?1:v.data.length,typedArrayConstructor:Float32Array,gpuBuffer:p.get()}):v.isReferer?v.data.model&&v.data.model.outputBuffer&&(p=v.data.model.outputBuffer):p=new fp(i.engine,{data:isFinite(Number(v.data))?[v.data]:v.data,usage:Uo.Storage|Uo.CopyDst|Uo.CopySrc}),i.vertexBuffers[v.name]=p,i.bindGroupEntries.push({binding:u,resource:{name:v.name,refer:p?void 0:v.data,buffer:p?p.get():void 0}}),u++}}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:o}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return h.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"destroy",value:function(){var e=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(n){return e.vertexBuffers[n].destroy()})}},{key:"readData",value:function(){var t=kn(ar.mark(function n(){var i,a,o,s,l,u,c,f,d,h;return ar.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(i=this.context.output,!i){p.next=16;break}if(a=i.length,o=i.typedArrayConstructor,s=i.gpuBuffer,!s){p.next=16;break}return l=a*o.BYTES_PER_ELEMENT,u=this.engine.device.createBuffer({size:l,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),c=this.engine.device.createCommandEncoder(),c.copyBufferToBuffer(s,0,u,0,l),f=Go?this.engine.device.getQueue():this.engine.device.defaultQueue,f.submit([c.finish()]),p.next=12,u.mapAsync(vDe.Read);case 12:return d=u.getMappedRange(),h=new o(d.slice(0)),u.unmap(),p.abrupt("return",h);case 16:return p.abrupt("return",new Float32Array);case 17:case"end":return p.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"run",value:function(){if(this.engine.currentComputePass){var e;this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(e=this.engine.currentComputePass).dispatch.apply(e,ua(this.context.dispatch))}}},{key:"updateBuffer",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=this.vertexBuffers[e];a&&a.subData({data:n,offset:i})}},{key:"updateUniform",value:function(e,n){var i=this.uniformGPUBufferLayout.find(function(a){return a.name===e});i&&this.uniformBuffer.subData({data:Number.isFinite(n)?new Float32Array([n]):new Float32Array(n),offset:i.offset})}},{key:"confirmInput",value:function(e,n){var i=this.vertexBuffers[n],a=e.outputBuffer;if(i&&a&&i!==a){var o=this.engine.device.createCommandEncoder(),s=e.context.output,l=s.length,u=s.typedArrayConstructor,c=l*u.BYTES_PER_ELEMENT;o.copyBufferToBuffer(a.get(),0,i.get(),0,c);var f=Go?this.engine.device.getQueue():this.engine.device.defaultQueue;f.submit([o.finish()])}}},{key:"compileShaderToSpirV",value:function(e,n,i){return this.compileRawShaderToSpirV(i+e,n)}},{key:"compileRawShaderToSpirV",value:function(e,n){return this.engine.glslang.compileGLSL(e,n)}},{key:"compileComputePipelineStageDescriptor",value:function(){var t=kn(ar.mark(function n(i){var a,o;return ar.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(a=i,o=`#version 450
`,this.engine.options.useWGSL){l.next=6;break}return l.next=5,this.compileShaderToSpirV(i,"compute",o);case 5:a=l.sent;case 6:return l.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:a,isWHLSL:Go}),entryPoint:"main"}});case 7:case"end":return l.stop()}},n,this)}));function e(n){return t.apply(this,arguments)}return e}()}]),r}(),QRe=function(){function r(t,e){dr(this,r),this.engine=t,this.options=e,this.indexCount=void 0,this.buffer=void 0;var n=e,i=n.data;n.usage,n.type;var a=n.count;this.indexCount=a||0,this.buffer=new fp(t,{data:i instanceof Array?new Uint16Array(i):i,usage:Uo.Index|Uo.CopyDst})}return _r(r,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(e){this.buffer.subData(e)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),r}(),JRe=function(){function r(t,e){dr(this,r),this.engine=t,this.options=e,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var n=e;n.width,n.height;var i=n.color;n.colors;var a=n.depth;n.stencil,i&&(this.colorTexture=i),a&&(this.depthTexture=a)}return _r(r,[{key:"get",value:function(){var e,n;return{color:(e=this.colorTexture)===null||e===void 0?void 0:e.get(),depth:(n=this.depthTexture)===null||n===void 0?void 0:n.get()}}},{key:"destroy",value:function(){var e,n;(e=this.colorTexture)===null||e===void 0||e.destroy(),(n=this.depthTexture)===null||n===void 0||n.destroy()}},{key:"resize",value:function(e){var n=e.width,i=e.height;if(n!==this.width||i!==this.height){var a,o;(a=this.colorTexture)===null||a===void 0||a.resize({width:n,height:i}),(o=this.depthTexture)===null||o===void 0||o.resize({width:n,height:i})}this.width=n,this.height=i}}]),r}(),Fu,Wl,Hd,Io,dp,oS,Uy,eOe=(Fu={},ft(Fu,Ue.POINTS,zd.PointList),ft(Fu,Ue.LINES,zd.LineList),ft(Fu,Ue.LINE_LOOP,zd.LineList),ft(Fu,Ue.LINE_STRIP,zd.LineStrip),ft(Fu,Ue.TRIANGLES,zd.TriangleList),ft(Fu,Ue.TRIANGLE_FAN,zd.TriangleList),ft(Fu,Ue.TRIANGLE_STRIP,zd.TriangleStrip),Fu),tOe=(Wl={},ft(Wl,Ue.NEVER,Ru.Never),ft(Wl,Ue.ALWAYS,Ru.Always),ft(Wl,Ue.LESS,Ru.Less),ft(Wl,Ue.LEQUAL,Ru.LessEqual),ft(Wl,Ue.GREATER,Ru.Greater),ft(Wl,Ue.GEQUAL,Ru.GreaterEqual),ft(Wl,Ue.EQUAL,Ru.Equal),ft(Wl,Ue.NOTEQUAL,Ru.NotEqual),Wl),dW=(Hd={},ft(Hd,Ue.FUNC_ADD,Ny.Add),ft(Hd,Ue.MIN_EXT,Ny.Min),ft(Hd,Ue.MAX_EXT,Ny.Max),ft(Hd,Ue.FUNC_SUBTRACT,Ny.Subtract),ft(Hd,Ue.FUNC_REVERSE_SUBTRACT,Ny.ReverseSubtract),Hd),sS=(Io={},ft(Io,Ue.ZERO,ps.Zero),ft(Io,Ue.ONE,ps.One),ft(Io,Ue.SRC_COLOR,ps.SrcColor),ft(Io,Ue.ONE_MINUS_SRC_COLOR,ps.OneMinusSrcColor),ft(Io,Ue.SRC_ALPHA,ps.SrcAlpha),ft(Io,Ue.ONE_MINUS_SRC_ALPHA,ps.OneMinusSrcAlpha),ft(Io,Ue.DST_COLOR,ps.DstColor),ft(Io,Ue.ONE_MINUS_DST_COLOR,ps.OneMinusDstColor),ft(Io,Ue.DST_ALPHA,ps.DstAlpha),ft(Io,Ue.ONE_MINUS_DST_ALPHA,ps.OneMinusDstAlpha),ft(Io,Ue.CONSTANT_COLOR,ps.BlendColor),ft(Io,Ue.ONE_MINUS_CONSTANT_COLOR,ps.OneMinusBlendColor),ft(Io,Ue.SRC_ALPHA_SATURATE,ps.SrcAlphaSaturated),Io),rOe=(dp={},ft(dp,Ue.ALPHA,"r8unorm"),ft(dp,Ue.RGBA,"rgba8unorm"),ft(dp,Ue.DEPTH_COMPONENT,"depth32float"),ft(dp,Ue.DEPTH_STENCIL,"depth24plus-stencil8"),dp),hW=(oS={},ft(oS,Ue.NEAREST,"nearest"),ft(oS,Ue.LINEAR,"linear"),oS),FM=(Uy={},ft(Uy,Ue.REPEAT,"repeat"),ft(Uy,Ue.CLAMP_TO_EDGE,"clamp-to-edge"),ft(Uy,Ue.MIRRORED_REPEAT,"mirror-repeat"),Uy);function nOe(r){var t=r.cull;if(!t||!t.enable)return Qw.None;if(t.face)return t.face===Ue.FRONT?Qw.Front:Qw.Back}function iOe(r){var t=r.depth;r.stencil;var e={compare:Ru.Always,depthFailOp:MM.Keep,failOp:MM.Keep,passOp:MM.Keep};return{depthWriteEnabled:t&&t.enable,depthCompare:tOe[(t==null?void 0:t.func)||Ue.ALWAYS],format:sp.Depth24PlusStencil8,stencilFront:e,stencilBack:e,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function aOe(r,t){var e=r.blend;return[{format:t,alphaBlend:{srcFactor:sS[e&&e.func&&e.func.srcAlpha||Ue.ONE],dstFactor:sS[e&&e.func&&e.func.dstAlpha||Ue.ZERO],operation:dW[e&&e.equation&&e.equation.alpha||Ue.FUNC_ADD]},colorBlend:{srcFactor:sS[e&&e.func&&e.func.srcRGB||Ue.ONE],dstFactor:sS[e&&e.func&&e.func.dstRGB||Ue.ZERO],operation:dW[e&&e.equation&&e.equation.rgb||Ue.FUNC_ADD]},writeMask:hDe.All}]}function vW(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function hp(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?vW(Object(e),!0).forEach(function(n){ft(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):vW(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function oOe(r){for(var t=0,e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var a=0,o=n;a<o.length;a++){var s=o[a];t+=s.length}for(var l=new r(t),u=0,c=0,f=n;c<f.length;c++){var d=f[c];l.set(d,u),u+=d.length}return l}var sOe=function(){function r(t,e){dr(this,r),this.engine=t,this.options=e,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}return _r(r,[{key:"init",value:function(){var t=kn(ar.mark(function n(){var i=this,a,o,s,l,u,c,f,d,h,v,p,g,m,y,b,x;return ar.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return a=this.options,o=a.vs,s=a.fs,l=a.attributes,u=a.uniforms,c=a.primitive,f=a.elements,d=a.depth,h=a.blend,v=a.stencil,p=a.cull,S.next=3,this.compilePipelineStageDescriptor(o,s,null);case 3:g=S.sent,m=g.vertexStage,y=g.fragmentStage,u&&this.buildUniformBindGroup(u),f&&(this.indexBuffer=f.get(),this.indexCount=f.indexCount),b={vertexBuffers:Object.keys(l).map(function(C,_){var T=l[C],E=T.get(),k=E.arrayStride,I=E.stepMode,P=E.attributes;return i.attributeCache[C]=T,{arrayStride:k,stepMode:I,attributes:P}})},x={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:eOe[c||Ue.TRIANGLES],rasterizationState:hp(hp({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:nOe({cull:p})}),depthStencilState:iOe({depth:d,stencil:v}),colorStates:aOe({blend:h},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:m,fragmentStage:y,vertexState:b},this.renderPipeline=this.engine.device.createRenderPipeline(x);case 11:case"end":return S.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"addUniforms",value:function(e){this.uniforms=hp(hp({},this.uniforms),Gy(e))}},{key:"draw",value:function(e){var n=this,i=this.engine.getCurrentRenderPass(),a=hp(hp({},this.uniforms),Gy(e.uniforms||{})),o=[];Object.keys(a).forEach(function(s){var l=Gl(a[s]);if(l==="boolean"||l==="number"||Array.isArray(a[s])||a[s].BYTES_PER_ELEMENT){var u,c=(u=n.uniformGPUBufferLayout.find(function(m){var y=m.name;return y===s}))===null||u===void 0?void 0:u.offset;c!==null&&n.uniformBuffer.subData({data:a[s],offset:c})}else{var f,d=(f=n.uniformGPUBufferLayout.find(function(m){var y=m.name;return y===s}))===null||f===void 0?void 0:f.offset;if(d!==null){var h=a[s].get(),v=h.color||h,p=v.texture,g=v.sampler;g&&(o.push({binding:d,resource:g}),d++),o.push({binding:d,resource:p.createView()})}}}),this.uniformBuffer&&(o[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:o}),this.renderPipeline&&i.setPipeline(this.renderPipeline),i.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&i.setIndexBuffer(this.indexBuffer.get(),cDe.Uint32,0),Object.keys(this.attributeCache).forEach(function(s,l){i.setVertexBuffer(0+l,n.attributeCache[s].get().buffer,0)}),this.indexBuffer?i.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):i.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:function(){var t=kn(ar.mark(function n(i,a,o){var s,l,u;return ar.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(s=`#version 450
`,l=i,u=a,this.engine.options.useWGSL){f.next=10;break}return f.next=6,this.compileShaderToSpirV(i,"vertex",s);case 6:return l=f.sent,f.next=9,this.compileShaderToSpirV(a,"fragment",s);case 9:u=f.sent;case 10:return f.abrupt("return",this.createPipelineStageDescriptor(l,u));case 11:case"end":return f.stop()}},n,this)}));function e(n,i,a){return t.apply(this,arguments)}return e}()},{key:"compileShaderToSpirV",value:function(e,n,i){return this.compileRawShaderToSpirV(i+e,n)}},{key:"compileRawShaderToSpirV",value:function(e,n){return this.engine.glslang.compileGLSL(e,n)}},{key:"createPipelineStageDescriptor",value:function(e,n){return{vertexStage:{module:this.engine.device.createShaderModule({code:e,isWHLSL:Go}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:n,isWHLSL:Go}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:uDe.CCW,cullMode:Qw.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(e){var n=this,i=0,a=oOe.apply(void 0,[Float32Array].concat(ua(Object.keys(e).map(function(l){return e[l]?(n.uniformGPUBufferLayout.push({name:l,offset:i}),i+=(e[l].length||1)*4,e[l]):[]})))),o=[],s=!1;a.length&&(s=!0,o.push({binding:0,visibility:Jw.Fragment|Jw.Vertex,type:kM.UniformBuffer})),Object.keys(e).filter(function(l){return e[l]===null}).forEach(function(l,u){n.uniformGPUBufferLayout.push({name:l,offset:u*2+(s?1:0)}),o.push({binding:u*2+(s?1:0),visibility:Jw.Fragment,type:kM.Sampler},{binding:u*2+(s?1:0)+1,visibility:Jw.Fragment,type:kM.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:o}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),s&&(this.uniformBuffer=new fp(this.engine,{data:a instanceof Array?new Float32Array(a):a,usage:Uo.Uniform|Uo.CopyDst}))}}]),r}(),lOe=function(){function r(t,e){dr(this,r),this.engine=t,this.options=e,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return _r(r,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(e){var n=e.width,i=e.height;(n!==this.width||i!==this.height)&&(this.destroy(),this.createTexture()),this.width=n,this.height=i}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var e=this.options;e.data;var n=e.type;n===void 0&&Ue.UNSIGNED_BYTE;var i=e.width,a=e.height;e.flipY;var o=e.format,s=o===void 0?Ue.RGBA:o;e.mipmap;var l=e.wrapS,u=l===void 0?Ue.CLAMP_TO_EDGE:l,c=e.wrapT,f=c===void 0?Ue.CLAMP_TO_EDGE:c,d=e.aniso,h=d===void 0?0:d;e.alignment,e.premultiplyAlpha;var v=e.mag,p=v===void 0?Ue.NEAREST:v,g=e.min,m=g===void 0?Ue.NEAREST:g,y=e.colorSpace;y===void 0&&Ue.BROWSER_DEFAULT_WEBGL;var b=e.usage;this.width=i,this.height=a,this.texture=this.engine.device.createTexture({size:[i,a,1],mipLevelCount:1,sampleCount:1,dimension:IM.E2d,format:rOe[s],usage:b||Ud.Sampled|Ud.CopyDst}),(!b||b&Ud.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:FM[u],addressModeV:FM[f],addressModeW:FM[u],magFilter:hW[p],minFilter:hW[m],maxAnisotropy:h}))}}]),r}(),pW,gW,mW,uOe=(pW=Dn(),pW(gW=(mW=function(){function r(){var t=this;dr(this,r),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(e){e.framebuffer;var n=e.color,i=e.depth,a=e.stencil;t.options.supportCompute&&t.startComputePass(),t.currentRenderTarget?(t.currentRenderPass&&t.endRenderTargetRenderPass(),t.startRenderTargetRenderPass(t.currentRenderTarget,n||null,!!i,!!a)):(t.mainColorAttachments[0].loadValue=n||op.Load,t.mainDepthAttachment.depthLoadValue=i||op.Load,t.mainDepthAttachment.stencilLoadValue=a?t.clearStencilValue:op.Load,t.mainRenderPass&&t.endMainRenderPass(),t.startMainRenderPass())},this.createModel=function(){var e=kn(ar.mark(function n(i){var a;return ar.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=new sOe(t,i),s.next=3,a.init();case 3:return s.abrupt("return",a);case 4:case"end":return s.stop()}},n)}));return function(n){return e.apply(this,arguments)}}(),this.createAttribute=function(e){return new qRe(t,e)},this.createBuffer=function(e){return new fp(t,e)},this.createElements=function(e){return new QRe(t,e)},this.createTexture2D=function(e){return new lOe(t,e)},this.createFramebuffer=function(e){return new JRe(t,e)},this.useFramebuffer=function(e,n){t.currentRenderTarget&&t.unbindFramebuffer(t.currentRenderTarget),t.currentRenderTarget=e,t.currentRenderTargetViewDescriptor={dimension:fDe.E2d,arrayLayerCount:1,aspect:dDe.All},t.currentRenderPass=null,n()},this.createComputeModel=function(){var e=kn(ar.mark(function n(i){var a;return ar.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=new ZRe(t,i),s.next=3,a.init();case 3:return s.abrupt("return",a);case 4:case"end":return s.stop()}},n)}));return function(n){return e.apply(this,arguments)}}(),this.getCanvas=function(){return t.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(e){var n=e.x,i=e.y,a=e.width,o=e.height;if(!t.currentRenderPass)t.transientViewport={x:n,y:i,width:a,height:o};else if(t.transientViewport.x!==1/0){var s=t.getCurrentRenderPass();s.setViewport(t.transientViewport.x,t.transientViewport.y,t.transientViewport.width,t.transientViewport.height,0,1)}else if(n!==t.cachedViewport.x||i!==t.cachedViewport.y||a!==t.cachedViewport.width||o!==t.cachedViewport.height){t.cachedViewport={x:n,y:i,width:a,height:o};var l=t.getCurrentRenderPass();l.setViewport(n,i,a,o,0,1)}},this.readPixels=function(e){throw new Error("Method not implemented.")}}return _r(r,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:function(){var t=kn(ar.mark(function n(i){return ar.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this.canvas=i.canvas,this.options=i,this.useWGSL=!!i.useWGSL,this.mainPassSampleCount=i.antialiasing?this.defaultSampleCount:1,o.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return o.stop()}},n,this)}));function e(n){return t.apply(this,arguments)}return e}()},{key:"setScissor",value:function(e){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(e){return e.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),Go?this.device.getQueue().submit(this.commandBuffers.filter(function(e){return e})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(e){return e}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:function(){var t=kn(ar.mark(function n(){var i,a;return ar.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,XRe();case 2:return this.glslang=s.sent,s.next=5,(i=navigator)===null||i===void 0||(a=i.gpu)===null||a===void 0?void 0:a.requestAdapter();case 5:return this.adapter=s.sent,s.next=8,this.adapter.requestDevice();case 8:this.device=s.sent;case 9:case"end":return s.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(Go?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:Ud.OutputAttachment|Ud.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var e={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:IM.E2d,format:sp.BGRA8Unorm,usage:Ud.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(e),this.mainColorAttachments=[{attachment:Go?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:Gd.Store}]}else this.mainColorAttachments=[{attachment:Go?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:Gd.Store}];var n={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:IM.E2d,format:Go?"depth32float-stencil8":sp.Depth24PlusStencil8,usage:Ud.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(n),this.mainDepthAttachment={attachment:Go?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:Gd.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:Gd.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=Go?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=Go?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(e,n,i){var a,o,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,l=(a=e.get().color)===null||a===void 0?void 0:a.texture,u;l&&(u=l.createView(this.currentRenderTargetViewDescriptor));var c=(o=e.get().depth)===null||o===void 0?void 0:o.texture,f;c&&(f=c.createView());var d=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:u,loadValue:n!==null?n:op.Load,storeOp:Gd.Store}],depthStencilAttachment:c&&f?{attachment:f,depthLoadValue:i?this.clearDepthValue:op.Load,depthStoreOp:Gd.Store,stencilLoadValue:s?this.clearStencilValue:op.Load,stencilStoreOp:Gd.Store}:void 0});this.currentRenderPass=d,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(e){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),r}(),mW))||gW),yW,bW;function cOe(r){var t=fOe();return function(){var n=Rn(r),i;if(t){var a=Rn(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return po(this,i)}}function fOe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var NM=4/64,xW=1-NM*2,dOe=(yW=Dn(),yW(bW=function(r){vo(e,r);var t=cOe(e);function e(){return dr(this,e),t.apply(this,arguments)}return _r(e,[{key:"onEntityCreated",value:function(){var i=this.config,a=i.widthSegments,o=a===void 0?1:a,s=i.heightSegments,l=s===void 0?1:s,u=i.depthSegments,c=u===void 0?1:u,f=i.halfExtents,d=f===void 0?en(.5,.5,.5):f,h=o,v=l,p=c,g=zw(d,3),m=g[0],y=g[1],b=g[2],x=[en(-m,-y,b),en(m,-y,b),en(m,y,b),en(-m,y,b),en(m,-y,-b),en(-m,-y,-b),en(-m,y,-b),en(m,y,-b)],w=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],S=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],C={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},_=[],T=[],E=[],k=[],I=0,P=function(L,O,B){var U,W,X,ie;for(X=0;X<=O;X++)for(ie=0;ie<=B;ie++){var q=Vn(),j=Vn(),fe=Vn(),se=Vn();sd(q,x[w[L][0]],x[w[L][1]],X/O),sd(j,x[w[L][0]],x[w[L][2]],ie/B),wT(fe,j,x[w[L][0]]),wu(se,q,fe),U=X/O,W=ie/B,_.push(se[0],se[1],se[2]),T.push(S[L][0],S[L][1],S[L][2]),E.push(U,W),U/=3,W/=3,U=U*xW+NM,W=W*xW+NM,U+=L%3/3,W+=Math.floor(L/3)/3,X<O&&ie<B&&(k.push(I+B+1,I+1,I),k.push(I+B+1,I+B+2,I+1)),I++}};P(C.FRONT,h,v),P(C.BACK,h,v),P(C.TOP,h,p),P(C.BOTTOM,h,p),P(C.RIGHT,p,v),P(C.LEFT,p,v);var F=EM(_),$=this.getComponent();$.indices=Uint32Array.from(k),$.aabb=F,$.vertexCount=I,$.attributes=[{dirty:!0,name:"position",data:Float32Array.from(_),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(T),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(E),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),e}(Yc))||bW);function hOe(r,t){if(!r&&!t)throw new Error("Please specify valid arguments for parameters a and b.");if(!t||t.length===0)return r;if(!r||r.length===0)return t;if(Object.prototype.toString.call(r)!==Object.prototype.toString.call(t))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var e=new r.constructor(r.length+t.length);return e.set(r),e.set(t,r.length),e}var wW,SW;function vOe(r){var t=pOe();return function(){var n=Rn(r),i;if(t){var a=Rn(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return po(this,i)}}function pOe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var gOe=(wW=Dn(),wW(SW=function(r){vo(e,r);var t=vOe(e);function e(){return dr(this,e),t.apply(this,arguments)}return _r(e,[{key:"onEntityCreated",value:function(){var i=this.config.geometries,a=i===void 0?[]:i,o=this.getComponent();o.aabb=new bM;var s=[],l=[],u=0;a.forEach(function(c){var f=c.aabb,d=c.indices,h=c.vertexCount,v=c.attributes;o.aabb.add(f),o.vertexCount+=h,d&&l.push.apply(l,ua(d.map(function(p){return p+u}))),u+=h,v.forEach(function(p,g){s[g]?p.data&&(_M(p.data)?s[g].push(p.data):_H(p.data)?s[g].data=hOe(s[g].data,p.data):s[g].data=s[g].data.concat(p.data)):(s[g]=p,s[g].dirty=!0)})}),o.attributes=s,o.indices=Uint32Array.from(l),o.dirty=!0}}]),e}(Yc))||SW),CW,EW;function mOe(r){var t=yOe();return function(){var n=Rn(r),i;if(t){var a=Rn(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return po(this,i)}}function yOe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var bOe=(CW=Dn(),CW(EW=function(r){vo(e,r);var t=mOe(e);function e(){return dr(this,e),t.apply(this,arguments)}return _r(e,[{key:"onEntityCreated",value:function(){for(var i=this.config,a=i.halfExtents,o=a===void 0?[.5,.5]:a,s=i.widthSegments,l=s===void 0?5:s,u=i.lengthSegments,c=u===void 0?5:u,f=[],d=[],h=[],v=[],p=0,g=0;g<=l;g++)for(var m=0;m<=c;m++){var y=-o[0]+2*o[0]*g/l,b=0,x=-(-o[1]+2*o[1]*m/c),w=g/l,S=m/c;f.push(y,b,x),d.push(0,1,0),h.push(w,S),g<l&&m<c&&(v.push(p+c+1,p+1,p),v.push(p+c+1,p+c+2,p+1)),p++}var C=EM(f),_=this.getComponent();_.indices=Uint32Array.from(v),_.aabb=C,_.vertexCount=p,_.attributes=[{dirty:!0,name:"position",data:Float32Array.from(f),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(d),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(h),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),e}(Yc))||EW),_W,TW;function xOe(r){var t=wOe();return function(){var n=Rn(r),i;if(t){var a=Rn(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return po(this,i)}}function wOe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var SOe=(_W=Dn(),_W(TW=function(r){vo(e,r);var t=xOe(e);function e(){return dr(this,e),t.apply(this,arguments)}return _r(e,[{key:"onEntityCreated",value:function(){for(var i=this.config,a=i.radius,o=a===void 0?.5:a,s=i.latitudeBands,l=s===void 0?16:s,u=i.longitudeBands,c=u===void 0?16:u,f=[],d=[],h=[],v=[],p=0;p<=l;p++)for(var g=p*Math.PI/l,m=Math.sin(g),y=Math.cos(g),b=0;b<=c;b++){var x=b*2*Math.PI/c-Math.PI/2,w=Math.sin(x),S=Math.cos(x),C=S*m,_=y,T=w*m,E=1-b/c,k=1-p/l;f.push(C*o,_*o,T*o),d.push(C,_,T),h.push(E,k)}for(var I=0;I<l;++I)for(var P=0;P<c;++P){var F=I*(c+1)+P,$=F+c+1;v.push(F+1,$,F),v.push(F+1,$+1,$)}var R=EM(f),L=this.getComponent();L.indices=Uint32Array.from(v),L.aabb=R,L.vertexCount=f.length/3,L.attributes=[{dirty:!0,name:"position",data:Float32Array.from(f),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(d),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(h),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),e}(Yc))||TW),AW,kW,MW,IW,lS,PW,DW,RW;function COe(r){var t=EOe();return function(){var n=Rn(r),i;if(t){var a=Rn(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return po(this,i)}}function EOe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var _Oe=`varying vec4 fragColor;

#pragma include "uv.frag.declaration"
#pragma include "map.frag.declaration"

void main() {
  vec4 diffuseColor = fragColor;

  #pragma include "map.frag.main"

  gl_FragColor = diffuseColor;
}`,TOe=`attribute vec3 position;
attribute vec3 normal;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

#pragma include "uv.vert.declaration"

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;

  #pragma include "uv.vert.main"
}`,AOe=`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`,kOe=`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`,MOe=(AW=Dn(),kW=br(wt.RenderEngine),MW=br(wt.ShaderModuleService),AW(IW=(lS=(RW=function(r){vo(e,r);var t=COe(e);function e(){var n;dr(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=t.call.apply(t,[this].concat(a)),mr(n,"engine",PW,$i(n)),mr(n,"shaderModuleService",DW,$i(n)),n}return _r(e,[{key:"onEntityCreated",value:function(){var i=this.getComponent(),a=this.engine.supportWebGPU?kOe:TOe,o=this.engine.supportWebGPU?AOe:_Oe;this.shaderModuleService.registerModule("material-basic",{vs:a,fs:o});var s=this.shaderModuleService.getModule("material-basic"),l=s.vs,u=s.fs,c=s.uniforms;i.vertexShaderGLSL=l,i.fragmentShaderGLSL=u,i.setUniform(c),this.config.map&&(i.setDefines({USE_UV:1,USE_MAP:1}),i.setUniform({map:this.config.map,uvTransform:Ev()}))}}]),e}(UH),RW),PW=yr(lS.prototype,"engine",[kW],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),DW=yr(lS.prototype,"shaderModuleService",[MW],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lS))||IW),OW,LW,FW,NW,BW,$W,zW,Vy,GW,UW,VW,HW;function IOe(r){var t=POe();return function(){var n=Rn(r),i;if(t){var a=Rn(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return po(this,i)}}function POe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var DOe=`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`,ROe=`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,OOe=(OW=Dn(),LW=br(wt.Systems),FW=zl(wt.MaterialSystem),NW=br(wt.Systems),BW=zl(wt.GeometrySystem),$W=br(wt.ShaderModuleService),OW(zW=(Vy=(HW=function(r){vo(e,r);var t=IOe(e);function e(){var n;dr(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=t.call.apply(t,[this].concat(a)),mr(n,"materialSystem",GW,$i(n)),mr(n,"geometrySystem",UW,$i(n)),mr(n,"shaderModuleService",VW,$i(n)),n}return _r(e,[{key:"onAttributeChanged",value:function(i){var a=i.name,o=i.data,s=this.getMeshComponent();s&&s.material&&(a==="gridColor"?(s.material.setUniform("u_GridColor",o),s.material.setUniform("u_GridColor2",o)):a==="gridSize"&&(s.material.setUniform("u_GridSize",o),s.material.setUniform("u_GridSize2",o)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:ROe,fs:DOe});var i=this.shaderModuleService.getModule("grid"),a=i.vs,o=i.fs,s=i.uniforms,l=this.materialSystem.createShaderMaterial({vertexShader:a,fragmentShader:o});this.setMaterial(l);var u=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(u),l.setCull({enable:!1,face:Ue.BACK}).setDepth({enable:!0,func:Ue.LESS}),l.setUniform(s),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),u.setIndex([0,3,2,2,1,0]),u.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),e}(Xc),HW),GW=yr(Vy.prototype,"materialSystem",[LW,FW],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),UW=yr(Vy.prototype,"geometrySystem",[NW,BW],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),VW=yr(Vy.prototype,"shaderModuleService",[$W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vy))||zW),BM=1e-6,WW=LOe;function LOe(){var r=new Float32Array(2);return r[0]=0,r[1]=0,r}var FOe=NOe;function NOe(r){var t=new Float32Array(2);return t[0]=r[0],t[1]=r[1],t}var BOe=$Oe;function $Oe(r,t){var e=new Float32Array(2);return e[0]=r,e[1]=t,e}var zOe=GOe;function GOe(r,t){return r[0]=t[0],r[1]=t[1],r}var uS=UOe;function UOe(r,t,e){return r[0]=t,r[1]=e,r}var VOe=HOe;function HOe(r,t){var e=r[0],n=r[1],i=t[0],a=t[1];return Math.abs(e-i)<=BM*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(n-a)<=BM*Math.max(1,Math.abs(n),Math.abs(a))}var WOe=jOe;function jOe(r,t){return r[0]===t[0]&&r[1]===t[1]}var jW=YOe;function YOe(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r}var $M=XOe;function XOe(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r}var qOe=$M,YW=KOe;function KOe(r,t,e){return r[0]=t[0]*e[0],r[1]=t[1]*e[1],r}var ZOe=YW,XW=QOe;function QOe(r,t,e){return r[0]=t[0]/e[0],r[1]=t[1]/e[1],r}var JOe=XW,eLe=tLe;function tLe(r,t){return r[0]=1/t[0],r[1]=1/t[1],r}var rLe=nLe;function nLe(r,t,e){return r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r}var iLe=aLe;function aLe(r,t,e){return r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r}var oLe=sLe;function sLe(r,t,e){var n=Math.cos(e),i=Math.sin(e),a=t[0],o=t[1];return r[0]=a*n-o*i,r[1]=a*i+o*n,r}var lLe=uLe;function uLe(r,t){return r[0]=Math.floor(t[0]),r[1]=Math.floor(t[1]),r}var cLe=fLe;function fLe(r,t){return r[0]=Math.ceil(t[0]),r[1]=Math.ceil(t[1]),r}var dLe=hLe;function hLe(r,t){return r[0]=Math.round(t[0]),r[1]=Math.round(t[1]),r}var vLe=pLe;function pLe(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r}var gLe=mLe;function mLe(r,t,e,n){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r}var qW=yLe;function yLe(r,t){var e=t[0]-r[0],n=t[1]-r[1];return Math.sqrt(e*e+n*n)}var bLe=qW,KW=xLe;function xLe(r,t){var e=t[0]-r[0],n=t[1]-r[1];return e*e+n*n}var wLe=KW,ZW=SLe;function SLe(r){var t=r[0],e=r[1];return Math.sqrt(t*t+e*e)}var CLe=ZW,QW=ELe;function ELe(r){var t=r[0],e=r[1];return t*t+e*e}var _Le=QW,TLe=ALe;function ALe(r,t){return r[0]=-t[0],r[1]=-t[1],r}var zM=kLe;function kLe(r,t){var e=t[0],n=t[1],i=e*e+n*n;return i>0&&(i=1/Math.sqrt(i),r[0]=t[0]*i,r[1]=t[1]*i),r}var JW=MLe;function MLe(r,t){return r[0]*t[0]+r[1]*t[1]}var ILe=PLe;function PLe(r,t,e){var n=t[0]*e[1]-t[1]*e[0];return r[0]=r[1]=0,r[2]=n,r}var DLe=RLe;function RLe(r,t,e,n){var i=t[0],a=t[1];return r[0]=i+n*(e[0]-i),r[1]=a+n*(e[1]-a),r}var OLe=LLe;function LLe(r,t){t=t||1;var e=Math.random()*2*Math.PI;return r[0]=Math.cos(e)*t,r[1]=Math.sin(e)*t,r}var FLe=NLe;function NLe(r,t,e){var n=t[0],i=t[1];return r[0]=e[0]*n+e[2]*i,r[1]=e[1]*n+e[3]*i,r}var BLe=$Le;function $Le(r,t,e){var n=t[0],i=t[1];return r[0]=e[0]*n+e[2]*i+e[4],r[1]=e[1]*n+e[3]*i+e[5],r}var zLe=GLe;function GLe(r,t,e){var n=t[0],i=t[1];return r[0]=e[0]*n+e[3]*i+e[6],r[1]=e[1]*n+e[4]*i+e[7],r}var ULe=VLe;function VLe(r,t,e){var n=t[0],i=t[1];return r[0]=e[0]*n+e[4]*i+e[12],r[1]=e[1]*n+e[5]*i+e[13],r}var HLe=WLe,vp=WW();function WLe(r,t,e,n,i,a){var o,s;for(t||(t=2),e||(e=0),n?s=Math.min(n*t+e,r.length):s=r.length,o=e;o<s;o+=t)vp[0]=r[o],vp[1]=r[o+1],i(vp,vp,a),r[o]=vp[0],r[o+1]=vp[1];return r}var jLe=YLe;function YLe(r,t,e){var n=t[0]*t[0]+t[1]*t[1];if(n>e*e){var i=Math.sqrt(n);r[0]=t[0]/i*e,r[1]=t[1]/i*e}else r[0]=t[0],r[1]=t[1];return r}var GM={EPSILON:BM,create:WW,clone:FOe,fromValues:BOe,copy:zOe,set:uS,equals:VOe,exactEquals:WOe,add:jW,subtract:$M,sub:qOe,multiply:YW,mul:ZOe,divide:XW,div:JOe,inverse:eLe,min:rLe,max:iLe,rotate:oLe,floor:lLe,ceil:cLe,round:dLe,scale:vLe,scaleAndAdd:gLe,distance:qW,dist:bLe,squaredDistance:KW,sqrDist:wLe,length:ZW,len:CLe,squaredLength:QW,sqrLen:_Le,negate:TLe,normalize:zM,dot:JW,cross:ILe,lerp:DLe,random:OLe,transformMat2:FLe,transformMat2d:BLe,transformMat3:zLe,transformMat4:ULe,forEach:HLe,limit:jLe},XLe=GM.create,e9=GM.copy,qLe=GM.dot,t9=[0,0],KLe=function(t,e,n,i,a){return jW(t,n,i),zM(t,t),uS(e,-t[1],t[0]),uS(t9,-n[1],n[0]),a/JW(e,t9)},cS=function(t,e){return uS(t,-e[1],e[0]),t},r9=function(t,e,n){return $M(t,e,n),zM(t,t),t};function fS(r,t,e,n,i){Hy(t,n,-i),Hy(t,n,i),r.push(e),r.push(e)}function Hy(r,t,e){r.push([[t[0],t[1]],e])}function ZLe(r,t,e){var n=[0,0],i=[0,0],a=[0,0],o=[0,0],s=-1,l=!1,u=null,c=XLe(),f=e||0,d=3,h=[],v=[],p=[],g=[0,0];t&&(r=r.slice(),r.push(r[0]));for(var m=r.length,y=1;y<m;y++){var b=f,x=r[y-1],w=r[y],S=y<r.length-1?r[y+1]:null;if(g.push(y/m,y/m),r9(n,w,x),u||(u=[0,0],cS(u,n)),l||(l=!0,fS(v,h,x,u,1)),p.push([b+0,b+1,b+2]),!S)cS(u,n),fS(v,h,w,u,1),p.push(s===1?[b,b+2,b+3]:[b+2,b+1,b+3]),f+=2;else{r9(i,S,w);var C=KLe(a,o,n,i,1),_=qLe(a,u)<0?-1:1,T=C>d;if(!isFinite(C)){cS(u,n),fS(v,h,w,u,1),p.push(s===1?[b,b+2,b+3]:[b+2,b+1,b+3]),f+=2,s=_;continue}T?(C=d,g.push(y/m),Hy(h,u,-_),v.push(w),Hy(h,o,C*_),v.push(w),p.push(s!==-_?[b,b+2,b+3]:[b+2,b+1,b+3]),p.push([b+2,b+3,b+4]),cS(c,i),e9(u,c),Hy(h,u,-_),v.push(w),f+=3):(fS(v,h,w,o,C),p.push(s===1?[b,b+2,b+3]:[b+2,b+1,b+3]),_=-1,e9(u,o),f+=2),s=_}}return{normals:h,attrIndex:p,attrPos:v,attrCounters:g}}var n9,i9,a9,o9,s9,l9,u9,Wy,c9,f9,d9,h9;function QLe(r){var t=JLe();return function(){var n=Rn(r),i;if(t){var a=Rn(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return po(this,i)}}function JLe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var eFe=`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`,tFe=`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,rFe=(n9=Dn(),i9=br(wt.Systems),a9=zl(wt.MaterialSystem),o9=br(wt.Systems),s9=zl(wt.GeometrySystem),l9=br(wt.ShaderModuleService),n9(u9=(Wy=(h9=function(r){vo(e,r);var t=QLe(e);function e(){var n;dr(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=t.call.apply(t,[this].concat(a)),mr(n,"materialSystem",c9,$i(n)),mr(n,"geometrySystem",f9,$i(n)),mr(n,"shaderModuleService",d9,$i(n)),n.vertexCount=void 0,n}return _r(e,[{key:"onAttributeChanged",value:function(i){var a=i.name,o=i.data,s=this.getMeshComponent();if(s&&s.material)switch(a){case"dashArray":s.material.setUniform("u_dash_array",o);break;case"dashOffset":s.material.setUniform("u_dash_offset",o);break;case"dashRatio":s.material.setUniform("u_dash_ratio",o);break;case"thickness":s.material.setUniform("u_thickness",o);break;case"color":var l=new Array(this.vertexCount).fill(void 0).map(function(){return o}).reduce(function(u,c){return[].concat(ua(u),ua(c))},[]);s.geometry.setAttribute("a_color",Float32Array.from(l),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]});break}}},{key:"onEntityCreated",value:function(){var i=this;this.shaderModuleService.registerModule("line",{vs:tFe,fs:eFe});var a=this.shaderModuleService.getModule("line"),o=a.vs,s=a.fs,l=a.uniforms,u=this.materialSystem.createShaderMaterial({vertexShader:o,fragmentShader:s}),c=ZLe(this.config.points,!1),f=c.normals,d=c.attrIndex,h=c.attrPos,v=c.attrCounters,p=h.length;this.vertexCount=p;var g=this.geometrySystem.createBufferGeometry({vertexCount:p});this.setMaterial(u),this.setGeometry(g),u.setCull({enable:!1,face:Ue.BACK}).setUniform(l),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var m=[],y=[];f.forEach(function(x){var w=x[0],S=x[1];m.push([w[0],w[1]]),y.push(S)}),g.setIndex(d.reduce(function(x,w){return[].concat(ua(x),ua(w))},[])),g.setAttribute("a_pos",Float32Array.from(h.reduce(function(x,w){return[].concat(ua(x),ua(w))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var b=new Array(p).fill(void 0).map(function(){return ua(i.config.color)}).reduce(function(x,w){return[].concat(ua(x),ua(w))},[]);g.setAttribute("a_color",Float32Array.from(b),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),g.setAttribute("a_line_miter",Float32Array.from(y),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),g.setAttribute("a_line_normal",Float32Array.from(m.reduce(function(x,w){return[].concat(ua(x),ua(w))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),g.setAttribute("a_counters",Float32Array.from(v),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),e}(Xc),h9),c9=yr(Wy.prototype,"materialSystem",[i9,a9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f9=yr(Wy.prototype,"geometrySystem",[o9,s9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d9=yr(Wy.prototype,"shaderModuleService",[l9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wy))||u9);function nFe(r){return[r+1&255,r+1>>8&255,r+1>>8>>8&255]}var v9,p9,g9,m9,y9,b9,x9,jy,w9,S9,C9,E9;function _9(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function iFe(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?_9(Object(e),!0).forEach(function(n){ft(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):_9(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function aFe(r){var t=oFe();return function(){var n=Rn(r),i;if(t){var a=Rn(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return po(this,i)}}function oFe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var sFe=`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`,lFe=`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,uFe=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],cFe=(v9=Dn(),p9=br(wt.Systems),g9=zl(wt.MaterialSystem),m9=br(wt.Systems),y9=zl(wt.GeometrySystem),b9=br(wt.ShaderModuleService),v9(x9=(jy=(E9=function(r){vo(e,r);var t=aFe(e);function e(){var n;dr(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=t.call.apply(t,[this].concat(a)),mr(n,"materialSystem",w9,$i(n)),mr(n,"geometrySystem",S9,$i(n)),mr(n,"shaderModuleService",C9,$i(n)),n}return _r(e,[{key:"onAttributeChanged",value:function(i){var a=i.name,o=i.data,s=this.getMeshComponent();s&&s.material&&(a==="strokeWidth"?s.material.setUniform("u_stroke_width",o):a==="strokeColor"?s.material.setUniform("u_stroke_color",o):a==="strokeOpacity"?s.material.setUniform("u_stroke_opacity",o):a==="opacity"?s.material.setUniform("u_opacity",o):a==="blur"&&s.material.setUniform("u_blur",o))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:lFe,fs:sFe});var i=this.shaderModuleService.getModule("grid"),a=i.vs,o=i.fs,s=i.uniforms,l=this.materialSystem.createShaderMaterial({vertexShader:a,fragmentShader:o,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:Ue.SRC_ALPHA,dstRGB:Ue.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});l.setUniform(iFe({u_device_pixel_ratio:window.devicePixelRatio},s));var u=this.buildAttributes(),c=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:u.instancedOffsets.length/2,vertexCount:6});c.setIndex([0,2,1,0,3,2]),c.setAttribute("position",Float32Array.from(u.positions),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),c.setAttribute("offset",Float32Array.from(u.instancedOffsets),{arrayStride:4*2,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),c.setAttribute("color",Float32Array.from(u.instancedColors),{arrayStride:4*4,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),c.setAttribute("size",Float32Array.from(u.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),c.setAttribute("shape",Float32Array.from(u.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),c.setAttribute("a_PickingColor",Float32Array.from(u.instancedPickingColors),{arrayStride:4*3,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(l),this.setGeometry(c)}},{key:"buildAttribute",value:function(i,a,o){var s,l,u,c;(s=a.instancedPickingColors).push.apply(s,ua(nFe(i.id||o))),a.instancedShapes.push(uFe.indexOf(i.shape||"circle")),(l=a.instancedColors).push.apply(l,ua(i.color||[1,0,0,1])),(u=a.instancedOffsets).push.apply(u,ua(i.position||[0,0])),(c=a.instancedSizes).push.apply(c,ua(i.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var i=this,a={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(o,s){i.buildAttribute(o,a,s)}):this.buildAttribute(this.config,a,0),a}}]),e}(Xc),E9),w9=yr(jy.prototype,"materialSystem",[p9,g9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S9=yr(jy.prototype,"geometrySystem",[m9,y9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C9=yr(jy.prototype,"shaderModuleService",[b9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jy))||x9),T9,A9,k9,M9,I9,Yy,P9,D9,R9,O9;function L9(r,t){var e;if(typeof Symbol=="undefined"||r[Symbol.iterator]==null){if(Array.isArray(r)||(e=fFe(r))||t&&r&&typeof r.length=="number"){e&&(r=e);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=r[Symbol.iterator]()},n:function(){var u=e.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function fFe(r,t){if(!!r){if(typeof r=="string")return F9(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return F9(r,t)}}function F9(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var dFe=`#ifdef USE_MAP
  uniform sampler2D map;
#endif`,hFe=`#ifdef USE_MAP
  vec4 texelColor = texture2D(map, vUv);
  // texelColor = mapTexelToLinear(texelColor);
  diffuseColor *= texelColor;
#endif`,vFe=`#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))
  varying vec2 vUv;
#endif`,pFe=`#ifdef USE_UV
  attribute vec2 uv;
	#ifdef UVS_VERTEX_ONLY
    vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,gFe=`#ifdef USE_UV
  vUv = (uvTransform * vec3(uv, 1)).xy;
#endif`,N9=(T9=Dn(),A9=br(wt.RenderEngine),k9=br(wt.ShaderModuleService),M9=br(wt.ConfigService),T9(I9=(Yy=(O9=function(){function r(){dr(this,r),this.container=void 0,mr(this,"engine",P9,this),mr(this,"shaderModule",D9,this),mr(this,"configService",R9,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}return _r(r,[{key:"init",value:function(){var t=kn(ar.mark(function n(){var i,a,o,s,l;return ar.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:pFe}),this.shaderModule.registerModule("uv.vert.main",{vs:gFe}),this.shaderModule.registerModule("uv.frag.declaration",{fs:vFe}),this.shaderModule.registerModule("map.frag.declaration",{fs:dFe}),this.shaderModule.registerModule("map.frag.main",{fs:hFe}),i=this.container.getAll(wt.Systems),a=this.configService.get(),!a.canvas){c.next=30;break}return c.next=11,this.engine.init({canvas:a.canvas,swapChainFormat:sp.BGRA8Unorm,antialiasing:!1});case 11:o=L9(i),c.prev=12,o.s();case 14:if((s=o.n()).done){c.next=21;break}if(l=s.value,!l.initialize){c.next=19;break}return c.next=19,l.initialize();case 19:c.next=14;break;case 21:c.next=26;break;case 23:c.prev=23,c.t0=c.catch(12),o.e(c.t0);case 26:return c.prev=26,o.f(),c.finish(26);case 29:this.inited=!0;case 30:case"end":return c.stop()}},n,this,[[12,23,26,29]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"render",value:function(){var t=kn(ar.mark(function n(){var i,a,o,s,l,u,c,f=arguments;return ar.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(!this.inited||this.rendering)){h.next=2;break}return h.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(v){v()}),this.rendering=!0,this.engine.beginFrame(),i=this.container.getAll(wt.Systems),a=f.length,o=new Array(a),s=0;s<a;s++)o[s]=f[s];l=L9(i),h.prev=8,l.s();case 10:if((u=l.n()).done){h.next=17;break}if(c=u.value,!c.execute){h.next=15;break}return h.next=15,c.execute(o);case 15:h.next=10;break;case 17:h.next=22;break;case 19:h.prev=19,h.t0=h.catch(8),l.e(h.t0);case 22:return h.prev=22,l.f(),h.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return h.stop()}},n,this,[[8,19,22,25]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"clear",value:function(e){var n=this;return this.inited?this.engine.clear(e):this.pendings.unshift(function(){n.engine.clear(e),n.pendings.shift()}),this}},{key:"setSize",value:function(e){var n=e.width,i=e.height,a=this.engine.getCanvas();return this.size={width:n,height:i},a.width=n,a.height=i,this}},{key:"getSize",value:function(){return this.size}}]),r}(),O9),P9=yr(Yy.prototype,"engine",[A9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D9=yr(Yy.prototype,"shaderModule",[k9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R9=yr(Yy.prototype,"configService",[M9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yy))||I9),B9,$9,z9,G9=(B9=Dn(),B9($9=(z9=function(){function r(){dr(this,r),this.entities=[]}return _r(r,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(e){return this.addEntity(e.getEntity()),this}},{key:"removeRenderable",value:function(e){return this.removeEntity(e.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(e){return this.entities.indexOf(e)===-1&&this.entities.push(e),this}},{key:"removeEntity",value:function(e){var n=this.entities.indexOf(e);return this.entities.splice(n,1),this}}]),r}(),z9))||$9),U9,V9,H9,W9=(U9=Dn(),U9(V9=(H9=function(){function r(){dr(this,r),this.cache={}}return _r(r,[{key:"get",value:function(e){return this.cache[e]}},{key:"set",value:function(e,n){this.cache[e]=n}}]),r}(),H9))||V9),j9,Y9,X9,q9,dS,K9,Z9,Q9;function J9(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function ej(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?J9(Object(e),!0).forEach(function(n){ft(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):J9(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}var tj=(j9=Dn(),Y9=br(W9),X9=br(wt.RenderEngine),j9(q9=(dS=(Q9=function(){function r(){dr(this,r),mr(this,"textureCache",K9,this),mr(this,"engine",Z9,this),this.config=void 0,this.loaded=!1,this.texture=void 0}return _r(r,[{key:"setConfig",value:function(e){this.config=e}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:function(){var t=kn(ar.mark(function n(){var i=this;return ar.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this.config.url){o.next=4;break}return o.abrupt("return",new Promise(function(s,l){var u=i.textureCache.get(i.config.url);if(u)s(u);else{var c=new Image;c.crossOrigin="Anonymous",c.src=i.config.url,c.onload=function(){var f=i.engine.createTexture2D(ej(ej({},i.config),{},{data:c,width:c.width,height:c.height,flipY:!0}));i.textureCache.set(i.config.url,f),i.texture=f,i.loaded=!0,s(f)},c.onerror=function(){l()}}}));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),o.abrupt("return",this.texture);case 7:case"end":return o.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()}]),r}(),Q9),K9=yr(dS.prototype,"textureCache",[Y9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z9=yr(dS.prototype,"engine",[X9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dS))||q9),rj,nj,ij,aj,UM,oj,sj,lj=(rj=Dn(),nj=br(wt.Systems),ij=zl(wt.RendererSystem),rj(aj=(UM=(sj=function(){function r(){dr(this,r),mr(this,"rendererSystem",oj,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return _r(r,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(e){return this.camera=e,this}},{key:"setScene",value:function(e){return this.scene=e,this}},{key:"setViewport",value:function(e){return this.viewport=e,this}},{key:"setClearColor",value:function(e){return this.clearColor=e,this}},{key:"pick",value:function(e){return this.rendererSystem.pick(e,this)}}]),r}(),sj),oj=yr(UM.prototype,"rendererSystem",[nj,ij],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),UM))||aj),uj,cj,fj,VM,dj,hj;function vj(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function mFe(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?vj(Object(e),!0).forEach(function(n){ft(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):vj(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}var hS=(uj=Dn(),cj=br(wt.ConfigService),uj(fj=(VM=(hj=function(){function r(){dr(this,r),mr(this,"configService",dj,this),this.container=void 0}return _r(r,[{key:"getEngine",value:function(){var t=kn(ar.mark(function n(){var i,a,o,s;return ar.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=this.container.get(wt.RenderEngine),a=this.configService.get(),o=a.canvas,s=a.engineOptions,u.next=4,i.init(mFe({canvas:o||EH(),swapChainFormat:sp.BGRA8Unorm,antialiasing:!1},s));case 4:return u.abrupt("return",i);case 5:case"end":return u.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"getTransformComponent",value:function(e){var n=this.container.get(wt.TransformComponentManager);return n.getComponentByEntity(e)}},{key:"getMeshComponent",value:function(e){var n=this.container.get(wt.MeshComponentManager);return n.getComponentByEntity(e)}},{key:"setConfig",value:function(e){this.configService.set(e)}},{key:"setContainer",value:function(e){this.container=e}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return $l()}},{key:"createScene",value:function(){return this.container.get(G9)}},{key:"createCamera",value:function(){return this.container.get(yH)}},{key:"createView",value:function(){return this.container.get(lj)}},{key:"createRenderable",value:function(e,n){var i=e?this.container.getNamed(wt.Renderable,e):this.container.get(Xc),a=$l();return i.setConfig(n||{}),i.setEntity(a),i}},{key:"createGeometry",value:function(e,n){var i=this.container.getNamed(wt.Geometry,e),a=$l();return i.setConfig(n||{}),i.setEntity(a),i.getComponent()}},{key:"createMaterial",value:function(e,n){var i=this.container.getNamed(wt.Material,e),a=$l();return i.setConfig(n||{}),i.setEntity(a,e),i.getComponent()}},{key:"createTexture2D",value:function(e){var n=this.container.get(tj);return n.setConfig(e),n}},{key:"createBufferGeometry",value:function(e){var n=this.container.getNamed(wt.Systems,wt.GeometrySystem);return n.createBufferGeometry(e)}},{key:"createInstancedBufferGeometry",value:function(e){var n=this.container.getNamed(wt.Systems,wt.GeometrySystem);return n.createInstancedBufferGeometry(e)}},{key:"createShaderMaterial",value:function(e){var n=this.container.getNamed(wt.Systems,wt.MaterialSystem);return n.createShaderMaterial(e)}},{key:"createKernel",value:function(e){var n=this.container.get(LH);return typeof e=="string"?n.setBundle(JSON.parse(e)):n.setBundle(e),n.init(),n}},{key:"createRenderer",value:function(){var e=this.container.get(N9);return e.container=this.container,e.init(),e}},{key:"destroy",value:function(){var e=this.container.getAll(wt.Systems);e.forEach(function(a){a.tearDown&&a.tearDown()});var n=this.container.get(wt.RenderEngine);n.destroy();var i=this.container.get(wt.InteractorService);i.destroy()}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=sDe(),i=navigator.gpu?uOe:HRe;n.isBound(wt.RenderEngine)||n.bind(wt.RenderEngine).to(i).inSingletonScope(),n.bind(N9).toSelf(),n.bind(LH).toSelf(),n.bind(Xc).toSelf(),n.bind(lj).toSelf(),n.bind(yH).toSelf(),n.bind(G9).toSelf(),n.bind(r).toSelf(),n.bind(W9).toSelf(),n.bind(tj).toSelf(),n.bind(wt.Geometry).to(dOe).whenTargetNamed(Yc.BOX),n.bind(wt.Geometry).to(SOe).whenTargetNamed(Yc.SPHERE),n.bind(wt.Geometry).to(bOe).whenTargetNamed(Yc.PLANE),n.bind(wt.Geometry).to(gOe).whenTargetNamed(Yc.MERGED),n.bind(wt.Material).to(MOe).whenTargetNamed(UH.BASIC),n.bind(wt.Renderable).to(cFe).whenTargetNamed(Xc.POINT),n.bind(wt.Renderable).to(rFe).whenTargetNamed(Xc.LINE),n.bind(wt.Renderable).to(OOe).whenTargetNamed(Xc.GRID);var a=n.get(r);return a.setContainer(n),a.setConfig(e),a}}]),r}(),hj),dj=yr(VM.prototype,"configService",[cj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),VM))||fj);const pp=(r,t)=>{let e;return r?Qt(r)?e=()=>r:e=r:e=()=>t||1,e},yFe=(r,t)=>{const e=[],n=[],i={};let a=0;for(a=0;a<r.length;a++){const s=r[a];i[s.id]=a,e.push(s.x),e.push(s.y),e.push(0),e.push(0),n.push([])}for(a=0;a<t.length;a++){const s=t[a],l=An(s,"source"),u=An(s,"target");n[i[l]].push(i[u]),n[i[u]].push(i[l])}let o=0;for(a=0;a<r.length;a++){const s=e.length,l=n[a],u=l.length;e[a*4+2]=s,e[a*4+3]=l.length,o=Math.max(o,l.length);for(let c=0;c<u;++c){const f=l[c];e.push(+f)}}for(;e.length%4!=0;)e.push(0);return{maxEdgePerVetex:o,array:new Float32Array(e)}},bFe=(r,t,e,n)=>{const i=[],a=[],o={};let s=0;for(s=0;s<r.length;s++){const u=r[s];o[u.id]=s,i.push(u.x),i.push(u.y),i.push(0),i.push(0),a.push([])}for(s=0;s<t.length;s++){const u=t[s],c=An(u,"source"),f=An(u,"target");a[o[c]].push(o[f]),a[o[c]].push(e(u)),a[o[c]].push(n(u)),a[o[c]].push(0),a[o[f]].push(o[c]),a[o[f]].push(e(u)),a[o[f]].push(n(u)),a[o[f]].push(0)}let l=0;for(s=0;s<r.length;s++){const u=i.length,c=a[s],f=c.length;i[s*4+2]=u+1048576*f/4,i[s*4+3]=0,l=Math.max(l,f/4);for(let d=0;d<f;++d){const h=c[d];i.push(+h)}}for(;i.length%4!=0;)i.push(0);return{maxEdgePerVetex:l,array:new Float32Array(i)}},xFe=(r,t)=>{const e=[],n=r.length,i={};return t.forEach(a=>{r.forEach((o,s)=>{if(i[a[o]]===void 0&&(i[a[o]]=Object.keys(i).length),e.push(i[a[o]]),s===n-1)for(;e.length%4!=0;)e.push(0)})}),{array:new Float32Array(e),count:Object.keys(i).length}},pj=r=>{const t=[],e=r.length,n=r[0].length;for(let i=0;i<n;i++)r.forEach((a,o)=>{if(t.push(a[i]),o===e-1)for(;t.length%4!=0;)t.push(0)});return new Float32Array(t)},wFe='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',SFe='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var vS=globalThis&&globalThis.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(r,t||[])).next())})};class gj extends _o{constructor(t){super();this.maxIteration=1e3,this.gravity=10,this.speed=1,this.clustering=!1,this.clusterField="cluster",this.clusterGravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){return vS(this,void 0,void 0,function*(){const t=this,e=t.nodes;if(!e||e.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const n=t.center;if(e.length===1){e[0].x=n[0],e[0].y=n[1],t.onLayoutEnd&&t.onLayoutEnd();return}const i={},a={};e.forEach((o,s)=>{Qt(o.x)||(o.x=Math.random()*this.width),Qt(o.y)||(o.y=Math.random()*this.height),i[o.id]=o,a[o.id]=s}),t.nodeMap=i,t.nodeIdxMap=a,yield t.run()})}executeWithWorker(t,e){return vS(this,void 0,void 0,function*(){const n=this,i=n.nodes,a=n.center;if(!i||i.length===0)return;if(i.length===1){i[0].x=a[0],i[0].y=a[1];return}const o={},s={};i.forEach((l,u)=>{Qt(l.x)||(l.x=Math.random()*this.width),Qt(l.y)||(l.y=Math.random()*this.height),o[l.id]=l,s[l.id]=u}),n.nodeMap=o,n.nodeIdxMap=s,yield n.run(t,e)})}run(t,e){return vS(this,void 0,void 0,function*(){const n=this,i=n.nodes,a=n.edges,o=n.maxIteration,s=n.center,l=n.height*n.width;let u=Math.sqrt(l)/10;const c=l/(i.length+1),f=Math.sqrt(c),d=n.speed,h=n.clustering,{array:v,count:p}=xFe([n.clusterField],i);i.forEach((E,k)=>{let I=0,P=0;Qt(E.fx)&&Qt(E.fy)&&(I=E.fx||.001,P=E.fy||.001),v[4*k+1]=I,v[4*k+2]=P});const g=i.length,{maxEdgePerVetex:m,array:y}=yFe(i,a),b=n.workerEnabled;let x;b?x=hS.create({canvas:t,engineOptions:{supportCompute:!0}}):x=hS.create({engineOptions:{supportCompute:!0}});const w=n.onLayoutEnd,S=[];for(let E=0;E<p;E++)S.push(0,0,0,0);const C=x.createKernel(wFe).setDispatch([g,1,1]).setBinding({u_Data:y,u_K:f,u_K2:c,u_Gravity:n.gravity,u_ClusterGravity:n.clusterGravity||n.gravity||1,u_Speed:d,u_MaxDisplace:u,u_Clustering:h?1:0,u_Center:s,u_AttributeArray:v,u_ClusterCenters:S,MAX_EDGE_PER_VERTEX:m,VERTEX_COUNT:g});let _;h&&(_=x.createKernel(SFe).setDispatch([p,1,1]).setBinding({u_Data:y,u_NodeAttributes:v,u_ClusterCenters:S,VERTEX_COUNT:g,CLUSTER_COUNT:p})),yield(()=>vS(this,void 0,void 0,function*(){for(let k=0;k<o;k++)yield C.execute(),h&&(_.setBinding({u_Data:C}),yield _.execute(),C.setBinding({u_ClusterCenters:_})),C.setBinding({u_MaxDisplace:u*=.99});const E=yield C.getOutput();t?e.postMessage({type:wk.GPUEND,vertexEdgeData:E}):i.forEach((k,I)=>{const P=E[4*I],F=E[4*I+1];k.x=P,k.y=F}),w&&w()}))()})}getType(){return"fruchterman-gpu"}}const CFe='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',EFe='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var HM=globalThis&&globalThis.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(r,t||[])).next())})};class mj extends _o{constructor(t){super();this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}execute(){return HM(this,void 0,void 0,function*(){const t=this,e=t.nodes;if(!e||e.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const n=t.center;if(e.length===1){e[0].x=n[0],e[0].y=n[1],t.onLayoutEnd&&t.onLayoutEnd();return}const i={},a={};e.forEach((o,s)=>{Qt(o.x)||(o.x=Math.random()*t.width),Qt(o.y)||(o.y=Math.random()*t.height),i[o.id]=o,a[o.id]=s}),t.nodeMap=i,t.nodeIdxMap=a,t.nodeStrength=pp(t.nodeStrength,1),t.edgeStrength=pp(t.edgeStrength,1),yield t.run()})}executeWithWorker(t,e){const n=this,i=n.nodes,a=n.center;if(!i||i.length===0)return;if(i.length===1){i[0].x=a[0],i[0].y=a[1];return}const o={},s={};i.forEach((l,u)=>{Qt(l.x)||(l.x=Math.random()*n.width),Qt(l.y)||(l.y=Math.random()*n.height),o[l.id]=l,s[l.id]=u}),n.nodeMap=o,n.nodeIdxMap=s,n.nodeStrength=pp(n.nodeStrength,1),n.edgeStrength=pp(n.edgeStrength,1),n.run(t,e)}run(t,e){return HM(this,void 0,void 0,function*(){const n=this,i=n.nodes,a=n.edges,o=n.maxIteration;!n.width&&typeof window!="undefined"&&(n.width=window.innerWidth),!n.height&&typeof window!="undefined"&&(n.height=window.innerHeight);const s=i.length;n.linkDistance=pp(n.linkDistance),n.edgeStrength=pp(n.edgeStrength);const{maxEdgePerVetex:l,array:u}=bFe(i,a,n.linkDistance,n.edgeStrength);n.degrees=fy(i.length,n.nodeIdxMap,a);const c=[],f=[],d=[],h=[],v=[],p=[],g=[];n.getMass||(n.getMass=I=>n.degrees[n.nodeIdxMap[I.id]]||1);const m=n.gravity,y=n.center;i.forEach((I,P)=>{c.push(n.getMass(I)),f.push(n.nodeStrength(I)),n.degrees[P]||(n.degrees[P]=0);let F=[y[0],y[1],m];if(n.getCenter){const $=n.getCenter(I,n.degrees[P]);$&&Qt($[0])&&Qt($[1])&&Qt($[2])&&(F=$)}d.push(F[0]),h.push(F[1]),v.push(F[2]),Qt(I.fx)&&Qt(I.fy)?(p.push(I.fx||.001),g.push(I.fy||.001)):(p.push(0),g.push(0))});const b=pj([c,n.degrees,f,p]),x=pj([d,h,v,g]),w=n.workerEnabled;let S;w?S=hS.create({canvas:t,engineOptions:{supportCompute:!0}}):S=hS.create({engineOptions:{supportCompute:!0}});const C=n.onLayoutEnd,_=[];u.forEach(I=>{_.push(I)});for(let I=0;I<4;I++)_.push(0);const T=S.createKernel(CFe).setDispatch([s,1,1]).setBinding({u_Data:u,u_damping:n.damping,u_maxSpeed:n.maxSpeed,u_minMovement:n.minMovement,u_coulombDisScale:n.coulombDisScale,u_factor:n.factor,u_NodeAttributeArray1:b,u_NodeAttributeArray2:x,MAX_EDGE_PER_VERTEX:l,VERTEX_COUNT:s,u_AveMovement:_,u_interval:n.interval}),E=S.createKernel(EFe).setDispatch([1,1,1]).setBinding({u_Data:u,VERTEX_COUNT:s,u_AveMovement:[0,0,0,0]});yield(()=>HM(this,void 0,void 0,function*(){for(let P=0;P<o;P++){yield T.execute(),E.setBinding({u_Data:T}),yield E.execute();const F=Math.max(.02,n.interval-P*.002);T.setBinding({u_interval:F,u_AveMovement:E})}const I=yield T.getOutput();t?e.postMessage({type:wk.GPUEND,vertexEdgeData:I}):i.forEach((P,F)=>{const $=I[4*F],R=I[4*F+1];P.x=$,P.y=R}),C&&C()}))()})}getType(){return"gForce-gpu"}}class yj extends _o{constructor(t){super();this.center=[0,0],this.maxIteration=100,this.gravity=10,this.comboGravity=10,this.linkDistance=10,this.alpha=1,this.alphaMin=.001,this.alphaDecay=1-Math.pow(this.alphaMin,1/300),this.alphaTarget=0,this.velocityDecay=.6,this.edgeStrength=.6,this.nodeStrength=30,this.preventOverlap=!1,this.preventNodeOverlap=!1,this.preventComboOverlap=!1,this.collideStrength=void 0,this.nodeCollideStrength=.5,this.comboCollideStrength=.5,this.comboSpacing=20,this.comboPadding=10,this.optimizeRangeFactor=1,this.onTick=()=>{},this.onLayoutEnd=()=>{},this.depthAttractiveForceScale=1,this.depthRepulsiveForceScale=2,this.nodes=[],this.edges=[],this.combos=[],this.comboTrees=[],this.width=300,this.height=300,this.bias=[],this.nodeMap={},this.oriComboMap={},this.indexMap={},this.comboMap={},this.previousLayouted=!1,this.updateCfg(t)}getDefaultCfg(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}execute(){const t=this,e=t.nodes,n=t.center;if(t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},!e||e.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(e.length===1){e[0].x=n[0],e[0].y=n[1],t.onLayoutEnd&&t.onLayoutEnd();return}t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()}run(){const t=this,e=t.nodes,n=t.previousLayouted?t.maxIteration/5:t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);const i=t.center,a=t.velocityDecay,o=t.comboMap;t.previousLayouted||t.initPos(o);for(let u=0;u<n;u++){const c=[];e.forEach((f,d)=>{c[d]={x:0,y:0}}),t.applyCalculate(c),t.applyComboCenterForce(c),e.forEach((f,d)=>{!Qt(f.x)||!Qt(f.y)||(f.x+=c[d].x*a,f.y+=c[d].y*a)}),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()}const s=[0,0];e.forEach(u=>{!Qt(u.x)||!Qt(u.y)||(s[0]+=u.x,s[1]+=u.y)}),s[0]/=e.length,s[1]/=e.length;const l=[i[0]-s[0],i[1]-s[1]];e.forEach((u,c)=>{!Qt(u.x)||!Qt(u.y)||(u.x+=l[0],u.y+=l[1])}),t.combos.forEach(u=>{const c=o[u.id];c&&c.empty&&(u.x=c.cx||u.x,u.y=c.cy||u.y)}),t.previousLayouted=!0}initVals(){const t=this,e=t.edges,n=t.nodes,i=t.combos,a={},o={},s={};n.forEach((E,k)=>{o[E.id]=E,s[E.id]=k}),t.nodeMap=o,t.indexMap=s;const l={};i.forEach(E=>{l[E.id]=E}),t.oriComboMap=l,t.comboMap=t.getComboMap();const u=t.preventOverlap;t.preventComboOverlap=t.preventComboOverlap||u,t.preventNodeOverlap=t.preventNodeOverlap||u;const c=t.collideStrength;c&&(t.comboCollideStrength=c,t.nodeCollideStrength=c),t.comboCollideStrength=t.comboCollideStrength?t.comboCollideStrength:0,t.nodeCollideStrength=t.nodeCollideStrength?t.nodeCollideStrength:0;for(let E=0;E<e.length;++E){const k=An(e[E],"source"),I=An(e[E],"target");a[k]?a[k]++:a[k]=1,a[I]?a[I]++:a[I]=1}const f=[];for(let E=0;E<e.length;++E){const k=An(e[E],"source"),I=An(e[E],"target");f[E]=a[k]/(a[k]+a[I])}this.bias=f;const d=t.nodeSize,h=t.nodeSpacing;let v,p;if(Qt(h)?p=()=>h:Nc(h)?p=h:p=()=>0,this.nodeSpacing=p,!d)v=E=>E.size?Ka(E.size)?(E.size[0]>E.size[1]?E.size[0]:E.size[1])/2:Bl(E.size)?(E.size.width>E.size.height?E.size.width:E.size.height)/2:E.size/2:10;else if(Nc(d))v=E=>d(E);else if(Ka(d)){const k=(d[0]>d[1]?d[0]:d[1])/2;v=I=>k}else{const E=d/2;v=k=>E}this.nodeSize=v;const g=t.comboSpacing;let m;Qt(g)?m=()=>g:Nc(g)?m=g:m=()=>0,this.comboSpacing=m;const y=t.comboPadding;let b;Qt(y)?b=()=>y:Ka(y)?b=()=>Math.max.apply(null,y):Nc(y)?b=y:b=()=>0,this.comboPadding=b;let x=this.linkDistance,w;x||(x=10),Qt(x)?w=E=>x:w=x,this.linkDistance=w;let S=this.edgeStrength,C;S||(S=1),Qt(S)?C=E=>S:C=S,this.edgeStrength=C;let _=this.nodeStrength,T;_||(_=30),Qt(_)?T=E=>_:T=_,this.nodeStrength=T}initPos(t){this.nodes.forEach((i,a)=>{const o=i.comboId,s=t[o];o&&s?(i.x=s.cx+100/(a+1),i.y=s.cy+100/(a+1)):(i.x=100/(a+1),i.y=100/(a+1))})}getComboMap(){const t=this,e=t.nodeMap,n=t.indexMap,i=t.comboTrees,a=t.oriComboMap,o={};return(i||[]).forEach(s=>{const l=[];nw(s,u=>{if(u.itemType==="node"||!a[u.id])return!0;if(o[u.id]===void 0){const d={id:u.id,name:u.id,cx:0,cy:0,count:0,depth:t.oriComboMap[u.id].depth||0,children:[]};o[u.id]=d}const c=u.children;c&&c.forEach(d=>{if(!o[d.id]&&!e[d.id])return!0;l.push(d)});const f=o[u.id];if(f.cx=0,f.cy=0,l.length===0){f.empty=!0;const d=a[u.id],h=Object.keys(e).length,v=`${u.id}-visual-child-${h}`,p={id:v,x:d.x,y:d.y,depth:f.depth+1,itemType:"node"};t.nodes.push(p),e[v]=p,n[v]=h,f.cx=d.x,f.cy=d.y,l.push(p)}return l.forEach(d=>{if(f.count++,d.itemType!=="node"){const v=o[d.id];Qt(v.cx)&&(f.cx+=v.cx),Qt(v.cy)&&(f.cy+=v.cy);return}const h=e[d.id];!h||(Qt(h.x)&&(f.cx+=h.x),Qt(h.y)&&(f.cy+=h.y))}),f.cx/=f.count,f.cy/=f.count,f.children=l,!0})}),o}applyComboCenterForce(t){const e=this,n=e.gravity,i=e.comboGravity||n,a=this.alpha,o=e.comboTrees,s=e.indexMap,l=e.nodeMap,u=e.comboMap;(o||[]).forEach(c=>{nw(c,f=>{if(f.itemType==="node"||!u[f.id])return!0;const h=u[f.id],v=(h.depth+1)/10*.5,p=h.cx,g=h.cy;return h.cx=0,h.cy=0,h.children.forEach(m=>{if(m.itemType!=="node"){const _=u[m.id];_&&Qt(_.cx)&&(h.cx+=_.cx),_&&Qt(_.cy)&&(h.cy+=_.cy);return}const y=l[m.id],b=y.x-p||.005,x=y.y-g||.005,w=Math.sqrt(b*b+x*x),S=s[y.id],C=i*a/w*v;t[S].x-=b*C,t[S].y-=x*C,Qt(y.x)&&(h.cx+=y.x),Qt(y.y)&&(h.cy+=y.y)}),h.cx/=h.count,h.cy/=h.count,!0})})}applyCalculate(t){const e=this,n=e.comboMap,i=e.nodes,a={};i.forEach((s,l)=>{i.forEach((u,c)=>{if(l<c)return;const f=s.x-u.x||.005,d=s.y-u.y||.005;let h=f*f+d*d;const v=Math.sqrt(h);h<1&&(h=v),a[`${s.id}-${u.id}`]={vx:f,vy:d,vl2:h,vl:v},a[`${u.id}-${s.id}`]={vl2:h,vl:v,vx:-f,vy:-d}})}),e.updateComboSizes(n),e.calRepulsive(t,a),e.calAttractive(t,a),e.preventComboOverlap&&e.comboNonOverlapping(t,n)}updateComboSizes(t){const e=this,n=e.comboTrees,i=e.nodeMap,a=e.nodeSize,o=e.comboSpacing,s=e.comboPadding;(n||[]).forEach(l=>{const u=[];nw(l,c=>{if(c.itemType==="node")return!0;const f=t[c.id];if(!f)return!1;const d=c.children;d&&d.forEach(p=>{!t[p.id]&&!i[p.id]||u.push(p)}),f.minX=1/0,f.minY=1/0,f.maxX=-1/0,f.maxY=-1/0,u.forEach(p=>{if(p.itemType!=="node")return!0;const g=i[p.id];if(!g)return!0;const m=a(g),y=g.x-m,b=g.y-m,x=g.x+m,w=g.y+m;f.minX>y&&(f.minX=y),f.minY>b&&(f.minY=b),f.maxX<x&&(f.maxX=x),f.maxY<w&&(f.maxY=w)});let h=e.oriComboMap[c.id].size||10;Ka(h)&&(h=h[0]);const v=Math.max(f.maxX-f.minX,f.maxY-f.minY,h);return f.r=v/2+o(f)/2+s(f),!0})})}comboNonOverlapping(t,e){const n=this,i=n.comboTree,a=n.comboCollideStrength,o=n.indexMap,s=n.nodeMap;nw(i,l=>{if(!e[l.id]&&!s[l.id]&&l.id!=="comboTreeRoot")return!1;const u=l.children;return u&&u.length>1&&u.forEach((c,f)=>{if(c.itemType==="node")return!1;const d=e[c.id];!d||u.forEach((h,v)=>{if(f<=v||h.itemType==="node")return!1;const p=e[h.id];if(!p)return!1;const g=d.cx-p.cx||.005,m=d.cy-p.cy||.005,y=g*g+m*m,b=d.r||1,x=p.r||1,w=b+x,S=x*x,C=b*b;if(y<w*w){const _=c.children;if(!_||_.length===0)return!1;const T=h.children;if(!T||T.length===0)return!1;const E=Math.sqrt(y),k=(w-E)/E*a,I=g*k,P=m*k,F=S/(C+S),$=1-F;_.forEach(R=>{if(R.itemType!=="node")return!1;if(!s[R.id])return;const L=o[R.id];T.forEach(O=>{if(O.itemType!=="node"||!s[O.id])return!1;const B=o[O.id];t[L].x+=I*F,t[L].y+=P*F,t[B].x-=I*$,t[B].y-=P*$})})}})}),!0})}calRepulsive(t,e){const n=this,i=n.nodes,a=n.width*n.optimizeRangeFactor,o=n.nodeStrength,s=n.alpha,l=n.nodeCollideStrength,u=n.preventNodeOverlap,c=n.nodeSize,f=n.nodeSpacing,d=n.depthRepulsiveForceScale,h=n.center;i.forEach((v,p)=>{if(!(!v.x||!v.y)){if(h){const g=n.gravity,m=v.x-h[0]||.005,y=v.y-h[1]||.005,b=Math.sqrt(m*m+y*y);t[p].x-=m*g*s/b,t[p].y-=y*g*s/b}i.forEach((g,m)=>{if(p===m||!g.x||!g.y)return;const{vl2:y,vl:b}=e[`${v.id}-${g.id}`];if(b>a)return;const{vx:x,vy:w}=e[`${v.id}-${g.id}`];let S=Math.log(Math.abs(g.depth-v.depth)/10)+1||1;S=S<1?1:S,g.comboId!==v.comboId&&(S+=1);const C=S?Math.pow(d,S):1,_=o(g)*s/y*C;if(t[p].x+=x*_,t[p].y+=w*_,p<m&&u){const T=c(v)+f(v)||1,E=c(g)+f(g)||1,k=T+E;if(y<k*k){const I=(k-b)/b*l,P=E*E;let F=P/(T*T+P);const $=x*I,R=w*I;t[p].x+=$*F,t[p].y+=R*F,F=1-F,t[m].x-=$*F,t[m].y-=R*F}}})}})}calAttractive(t,e){const n=this,i=n.edges,a=n.linkDistance,o=n.alpha,s=n.edgeStrength,l=n.bias,u=n.depthAttractiveForceScale;i.forEach((c,f)=>{const d=An(c,"source"),h=An(c,"target");if(!d||!h||d===h)return;const v=n.indexMap[d],p=n.indexMap[h],g=n.nodeMap[d],m=n.nodeMap[h];if(!g||!m)return;let y=g.depth===m.depth?0:Math.log(Math.abs(g.depth-m.depth)/10);g.comboId===m.comboId&&(y=y/2);let b=y?Math.pow(u,y):1;if(g.comboId!==m.comboId&&b===1?b=u/2:g.comboId===m.comboId&&(b=2),!Qt(m.x)||!Qt(g.x)||!Qt(m.y)||!Qt(g.y))return;const{vl:x,vx:w,vy:S}=e[`${h}-${d}`],C=(x-a(c))/x*o*s(c)*b,_=w*C,T=S*C,E=l[f];t[p].x-=_*E,t[p].y-=T*E,t[v].x+=_*(1-E),t[v].y+=T*(1-E)})}getType(){return"comboForce"}}class WM{constructor(t){this.id=t.id||0,this.rx=t.rx,this.ry=t.ry,this.fx=0,this.fy=0,this.mass=t.mass,this.degree=t.degree,this.g=t.g||0}distanceTo(t){const e=this.rx-t.rx,n=this.ry-t.ry;return Math.hypot(e,n)}setPos(t,e){this.rx=t,this.ry=e}resetForce(){this.fx=0,this.fy=0}addForce(t){const e=t.rx-this.rx,n=t.ry-this.ry;let i=Math.hypot(e,n);i=i<1e-4?1e-4:i;const a=this.g*(this.degree+1)*(t.degree+1)/i;this.fx+=a*e/i,this.fy+=a*n/i}in(t){return t.contains(this.rx,this.ry)}add(t){const e=this.mass+t.mass,n=(this.rx*this.mass+t.rx*t.mass)/e,i=(this.ry*this.mass+t.ry*t.mass)/e,a=this.degree+t.degree,o={rx:n,ry:i,mass:e,degree:a};return new WM(o)}}class gp{constructor(t){this.xmid=t.xmid,this.ymid=t.ymid,this.length=t.length,this.massCenter=t.massCenter||[0,0],this.mass=t.mass||1}getLength(){return this.length}contains(t,e){const n=this.length/2;return t<=this.xmid+n&&t>=this.xmid-n&&e<=this.ymid+n&&e>=this.ymid-n}NW(){const t=this.xmid-this.length/4,e=this.ymid+this.length/4,n=this.length/2,i={xmid:t,ymid:e,length:n};return new gp(i)}NE(){const t=this.xmid+this.length/4,e=this.ymid+this.length/4,n=this.length/2,i={xmid:t,ymid:e,length:n};return new gp(i)}SW(){const t=this.xmid-this.length/4,e=this.ymid-this.length/4,n=this.length/2,i={xmid:t,ymid:e,length:n};return new gp(i)}SE(){const t=this.xmid+this.length/4,e=this.ymid-this.length/4,n=this.length/2,i={xmid:t,ymid:e,length:n};return new gp(i)}}class mp{constructor(t){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,t!=null&&(this.quad=t)}insert(t){if(this.body==null){this.body=t;return}this._isExternal()?(this.quad&&(this.NW=new mp(this.quad.NW()),this.NE=new mp(this.quad.NE()),this.SW=new mp(this.quad.SW()),this.SE=new mp(this.quad.SE())),this._putBody(this.body),this._putBody(t),this.body=this.body.add(t)):(this.body=this.body.add(t),this._putBody(t))}_putBody(t){!this.quad||(t.in(this.quad.NW())&&this.NW?this.NW.insert(t):t.in(this.quad.NE())&&this.NE?this.NE.insert(t):t.in(this.quad.SW())&&this.SW?this.SW.insert(t):t.in(this.quad.SE())&&this.SE&&this.SE.insert(t))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(t){if(!(this.body==null||t===this.body))if(this._isExternal())t.addForce(this.body);else{const e=this.quad?this.quad.getLength():0,n=this.body.distanceTo(t);e/n<this.theta?t.addForce(this.body):(this.NW&&this.NW.updateForce(t),this.NE&&this.NE.updateForce(t),this.SW&&this.SW.updateForce(t),this.SE&&this.SE.updateForce(t))}}}class bj extends _o{constructor(t){super();this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.kr=5,this.kg=1,this.mode="normal",this.preventOverlap=!1,this.dissuadeHubs=!1,this.barnesHut=void 0,this.maxIteration=0,this.ks=.1,this.ksmax=10,this.tao=.1,this.onLayoutEnd=()=>{},this.prune=void 0,this.updateCfg(t)}getDefaultCfg(){return{}}execute(){const t=this,{nodes:e,onLayoutEnd:n,prune:i}=t;let a=t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);const o=[],s=e.length;for(let l=0;l<s;l+=1){const u=e[l];let c=10,f=10;Qt(u.size)&&(c=u.size,f=u.size),Ka(u.size)?(isNaN(u.size[0])||(c=u.size[0]),isNaN(u.size[1])||(f=u.size[1])):Bl(u.size)&&(c=u.size.width,f=u.size.height),t.getWidth&&!isNaN(t.getWidth(u))&&(f=t.getWidth(u)),t.getHeight&&!isNaN(t.getHeight(u))&&(c=t.getHeight(u));const d=Math.max(c,f);o.push(d)}t.barnesHut===void 0&&s>250&&(t.barnesHut=!0),t.prune===void 0&&s>100&&(t.prune=!0),this.maxIteration===0&&!t.prune?(a=250,s<=200&&s>100?a=1e3:s>200&&(a=1200),this.maxIteration=a):this.maxIteration===0&&i&&(a=100,s<=200&&s>100?a=500:s>200&&(a=950),this.maxIteration=a),t.kr||(t.kr=50,s>100&&s<=500?t.kr=20:s>500&&(t.kr=1)),t.kg||(t.kg=20,s>100&&s<=500?t.kg=10:s>500&&(t.kg=1)),this.nodes=t.updateNodesByForces(o),n()}updateNodesByForces(t){const e=this,{edges:n,maxIteration:i}=e;let a=e.nodes;const o=n.filter(v=>{const p=An(v,"source"),g=An(v,"target");return p!==g}),s=a.length,l=o.length,u=[],c={},f={},d=[];for(let v=0;v<s;v+=1)c[a[v].id]=v,u[v]=0,(a[v].x===void 0||isNaN(a[v].x))&&(a[v].x=Math.random()*1e3),(a[v].y===void 0||isNaN(a[v].y))&&(a[v].y=Math.random()*1e3),d.push({x:a[v].x,y:a[v].y});for(let v=0;v<l;v+=1){let p,g,m=0,y=0;for(let b=0;b<s;b+=1){const x=An(o[v],"source"),w=An(o[v],"target");a[b].id===x?(p=a[b],m=b):a[b].id===w&&(g=a[b],y=b),f[v]={sourceIdx:m,targetIdx:y}}p&&(u[c[p.id]]+=1),g&&(u[c[g.id]]+=1)}let h=i;if(a=this.iterate(h,c,f,l,u,t),e.prune){for(let v=0;v<l;v+=1)u[f[v].sourceIdx]<=1?(a[f[v].sourceIdx].x=a[f[v].targetIdx].x,a[f[v].sourceIdx].y=a[f[v].targetIdx].y):u[f[v].targetIdx]<=1&&(a[f[v].targetIdx].x=a[f[v].sourceIdx].x,a[f[v].targetIdx].y=a[f[v].sourceIdx].y);e.prune=!1,e.barnesHut=!1,h=100,a=this.iterate(h,c,f,l,u,t)}return a}iterate(t,e,n,i,a,o){const s=this;let{nodes:l}=s;const{kr:u,preventOverlap:c}=s,{barnesHut:f}=s,d=l.length;let h=0;const v=100;let p=t;const g=50;let m=[];const y=[],b=[];for(let x=0;x<d;x+=1)if(m[2*x]=0,m[2*x+1]=0,f){const w={id:x,rx:l[x].x,ry:l[x].y,mass:1,g:u,degree:a[x]};b[x]=new WM(w)}for(;p>0;){for(let w=0;w<d;w+=1)y[2*w]=m[2*w],y[2*w+1]=m[2*w+1],m[2*w]=0,m[2*w+1]=0;m=this.getAttrForces(p,g,i,e,n,a,o,m),f&&(c&&p>g||!c)?m=this.getOptRepGraForces(m,b,a):m=this.getRepGraForces(p,g,m,v,o,a);const x=this.updatePos(m,y,h,a);l=x.nodes,h=x.sg,p--,s.tick&&s.tick()}return l}getAttrForces(t,e,n,i,a,o,s,l){const u=this,{nodes:c,preventOverlap:f,dissuadeHubs:d,mode:h,prune:v}=u;for(let p=0;p<n;p+=1){const g=c[a[p].sourceIdx],m=a[p].sourceIdx,y=c[a[p].targetIdx],b=a[p].targetIdx;if(v&&(o[m]<=1||o[b]<=1))continue;const x=[y.x-g.x,y.y-g.y];let w=Math.hypot(x[0],x[1]);w=w<1e-4?1e-4:w,x[0]=x[0]/w,x[1]=x[1]/w,f&&t<e&&(w=w-s[m]-s[b]);let S=w,C=S;h==="linlog"&&(S=Math.log(1+w),C=S),d&&(S=w/o[m],C=w/o[b]),f&&t<e&&w<=0?(S=0,C=0):f&&t<e&&w>0&&(S=w,C=w),l[2*i[g.id]]+=S*x[0],l[2*i[y.id]]-=C*x[0],l[2*i[g.id]+1]+=S*x[1],l[2*i[y.id]+1]-=C*x[1]}return l}getRepGraForces(t,e,n,i,a,o){const s=this,{nodes:l,preventOverlap:u,kr:c,kg:f,center:d,prune:h}=s,v=l.length;for(let p=0;p<v;p+=1){for(let b=p+1;b<v;b+=1){if(h&&(o[p]<=1||o[b]<=1))continue;const x=[l[b].x-l[p].x,l[b].y-l[p].y];let w=Math.hypot(x[0],x[1]);w=w<1e-4?1e-4:w,x[0]=x[0]/w,x[1]=x[1]/w,u&&t<e&&(w=w-a[p]-a[b]);let S=c*(o[p]+1)*(o[b]+1)/w;u&&t<e&&w<0?S=i*(o[p]+1)*(o[b]+1):u&&t<e&&w===0?S=0:u&&t<e&&w>0&&(S=c*(o[p]+1)*(o[b]+1)/w),n[2*p]-=S*x[0],n[2*b]+=S*x[0],n[2*p+1]-=S*x[1],n[2*b+1]+=S*x[1]}const g=[l[p].x-d[0],l[p].y-d[1]],m=Math.hypot(g[0],g[1]);g[0]=g[0]/m,g[1]=g[1]/m;const y=f*(o[p]+1);n[2*p]-=y*g[0],n[2*p+1]-=y*g[1]}return n}getOptRepGraForces(t,e,n){const i=this,{nodes:a,kg:o,center:s,prune:l}=i,u=a.length;let c=9e10,f=-9e10,d=9e10,h=-9e10;for(let y=0;y<u;y+=1)l&&n[y]<=1||(e[y].setPos(a[y].x,a[y].y),a[y].x>=f&&(f=a[y].x),a[y].x<=c&&(c=a[y].x),a[y].y>=h&&(h=a[y].y),a[y].y<=d&&(d=a[y].y));const v=Math.max(f-c,h-d),p={xmid:(f+c)/2,ymid:(h+d)/2,length:v,massCenter:s,mass:u},g=new gp(p),m=new mp(g);for(let y=0;y<u;y+=1)l&&n[y]<=1||e[y].in(g)&&m.insert(e[y]);for(let y=0;y<u;y+=1){if(l&&n[y]<=1)continue;e[y].resetForce(),m.updateForce(e[y]),t[2*y]-=e[y].fx,t[2*y+1]-=e[y].fy;const b=[a[y].x-s[0],a[y].y-s[1]];let x=Math.hypot(b[0],b[1]);x=x<1e-4?1e-4:x,b[0]=b[0]/x,b[1]=b[1]/x;const w=o*(n[y]+1);t[2*y]-=w*b[0],t[2*y+1]-=w*b[1]}return t}updatePos(t,e,n,i){const a=this,{nodes:o,ks:s,tao:l,prune:u,ksmax:c}=a,f=o.length,d=[],h=[];let v=0,p=0;for(let m=0;m<f;m+=1){if(u&&i[m]<=1)continue;const y=[t[2*m]-e[2*m],t[2*m+1]-e[2*m+1]],b=Math.hypot(y[0],y[1]),x=[t[2*m]+e[2*m],t[2*m+1]+e[2*m+1]],w=Math.hypot(x[0],x[1]);d[m]=b,h[m]=w/2,v+=(i[m]+1)*d[m],p+=(i[m]+1)*h[m]}const g=n;n=l*p/v,g!==0&&(n=n>1.5*g?1.5*g:n);for(let m=0;m<f;m+=1){if(u&&i[m]<=1)continue;let y=s*n/(1+n*Math.sqrt(d[m])),b=Math.hypot(t[2*m],t[2*m+1]);b=b<1e-4?1e-4:b;const x=c/b;y=y>x?x:y;const w=y*t[2*m],S=y*t[2*m+1];o[m].x+=w,o[m].y+=S}return{nodes:o,sg:n}}}const pS={force:D4,fruchterman:v8,forceAtlas2:bj,gForce:m4,dagre:n8,circular:R4,radial:f8,concentric:d8,grid:p4,mds:h8,comboForce:yj,random:g4,"gForce-gpu":mj,"fruchterman-gpu":gj};var _Fe=mm.mix,Nu={assign:_Fe};Nu.assign;var jM=18,TFe=jM*2,xj=jM,AFe={getId:function(t){return t.id||t.name},getPreH:function(t){return t.preH||0},getPreV:function(t){return t.preV||0},getHGap:function(t){return t.hgap||xj},getVGap:function(t){return t.vgap||xj},getChildren:function(t){return t.children},getHeight:function(t){return t.height||TFe},getWidth:function(t){var e=t.label||" ";return t.width||e.split("").length*jM}};function gS(r,t){var e=this;if(e.vgap=e.hgap=0,r instanceof gS)return r;e.data=r;var n=t.getHGap(r),i=t.getVGap(r);return e.preH=t.getPreH(r),e.preV=t.getPreV(r),e.width=t.getWidth(r),e.height=t.getHeight(r),e.width+=e.preH,e.height+=e.preV,e.id=t.getId(r),e.x=e.y=0,e.depth=0,e.children||(e.children=[]),e.addGap(n,i),e}Nu.assign(gS.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(t,e){var n=this;n.hgap+=t,n.vgap+=e,n.width+=2*t,n.height+=2*e},eachNode:function(t){for(var e=this,n=[e],i;i=n.shift();)t(i),n=i.children.concat(n)},DFTraverse:function(t){this.eachNode(t)},BFTraverse:function(t){for(var e=this,n=[e],i;i=n.shift();)t(i),n=n.concat(i.children)},getBoundingBox:function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)}),t},translate:function(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.eachNode(function(n){n.x+=t,n.y+=e,n.x+=n.preH,n.y+=n.preV})},right2left:function(){var t=this,e=t.getBoundingBox();t.eachNode(function(n){n.x=n.x-(n.x-e.left)*2-n.width}),t.translate(e.width,0)},bottom2top:function(){var t=this,e=t.getBoundingBox();t.eachNode(function(n){n.y=n.y-(n.y-e.top)*2-n.height}),t.translate(0,e.height)}});function kFe(r,t,e){t===void 0&&(t={}),t=Nu.assign({},AFe,t);var n=new gS(r,t),i=[n],a;if(!e&&!r.collapsed){for(;a=i.shift();)if(!a.data.collapsed){var o=t.getChildren(a.data),s=o?o.length:0;if(a.children=new Array(s),o&&s)for(var l=0;l<s;l++){var u=new gS(o[l],t);a.children[l]=u,i.push(u),u.parent=a,u.depth=a.depth+1}}}return n}var YM=kFe,MFe=function(){function r(e,n){n===void 0&&(n={});var i=this;i.options=n,i.rootNode=YM(e,n)}var t=r.prototype;return t.execute=function(){throw new Error("please override this method")},r}(),mS=MFe;function Xy(r,t,e,n){n===void 0&&(n=[]);var i=this;i.w=r||0,i.h=t||0,i.y=e||0,i.x=0,i.c=n||[],i.cs=n.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}Xy.fromNode=function(r,t){if(!r)return null;var e=[];return r.children.forEach(function(n){e.push(Xy.fromNode(n,t))}),t?new Xy(r.height,r.width,r.x,e):new Xy(r.width,r.height,r.y,e)};function wj(r,t,e){e?r.y+=t:r.x+=t,r.children.forEach(function(n){wj(n,t,e)})}function Sj(r,t){var e=t?r.y:r.x;return r.children.forEach(function(n){e=Math.min(Sj(n,t),e)}),e}function IFe(r,t){var e=Sj(r,t);wj(r,-e,t)}function Cj(r,t,e){e?t.y=r.x:t.x=r.x,r.c.forEach(function(n,i){Cj(n,t.children[i],e)})}function Ej(r,t,e){e===void 0&&(e=0),t?(r.x=e,e+=r.width):(r.y=e,e+=r.height),r.children.forEach(function(n){Ej(n,t,e)})}var PFe=function(r,t){t===void 0&&(t={});var e=t.isHorizontal;function n(y){if(y.cs===0){i(y);return}n(y.c[0]);for(var b=g(u(y.c[0].el),0,null),x=1;x<y.cs;++x){n(y.c[x]);var w=u(y.c[x].er);a(y,x,b),b=g(w,x,b)}d(y),i(y)}function i(y){y.cs===0?(y.el=y,y.er=y,y.msel=y.mser=0):(y.el=y.c[0].el,y.msel=y.c[0].msel,y.er=y.c[y.cs-1].er,y.mser=y.c[y.cs-1].mser)}function a(y,b,x){for(var w=y.c[b-1],S=w.mod,C=y.c[b],_=C.mod;w!==null&&C!==null;){u(w)>x.low&&(x=x.nxt);var T=S+w.prelim+w.w-(_+C.prelim);T>0&&(_+=T,o(y,b,x.index,T));var E=u(w),k=u(C);E<=k&&(w=l(w),w!==null&&(S+=w.mod)),E>=k&&(C=s(C),C!==null&&(_+=C.mod))}!w&&!!C?c(y,b,C,_):!!w&&!C&&f(y,b,w,S)}function o(y,b,x,w){y.c[b].mod+=w,y.c[b].msel+=w,y.c[b].mser+=w,v(y,b,x,w)}function s(y){return y.cs===0?y.tl:y.c[0]}function l(y){return y.cs===0?y.tr:y.c[y.cs-1]}function u(y){return y.y+y.h}function c(y,b,x,w){var S=y.c[0].el;S.tl=x;var C=w-x.mod-y.c[0].msel;S.mod+=C,S.prelim-=C,y.c[0].el=y.c[b].el,y.c[0].msel=y.c[b].msel}function f(y,b,x,w){var S=y.c[b].er;S.tr=x;var C=w-x.mod-y.c[b].mser;S.mod+=C,S.prelim-=C,y.c[b].er=y.c[b-1].er,y.c[b].mser=y.c[b-1].mser}function d(y){y.prelim=(y.c[0].prelim+y.c[0].mod+y.c[y.cs-1].mod+y.c[y.cs-1].prelim+y.c[y.cs-1].w)/2-y.w/2}function h(y,b){b+=y.mod,y.x=y.prelim+b,p(y);for(var x=0;x<y.cs;x++)h(y.c[x],b)}function v(y,b,x,w){if(x!==b-1){var S=b-x;y.c[x+1].shift+=w/S,y.c[b].shift-=w/S,y.c[b].change-=w-w/S}}function p(y){for(var b=0,x=0,w=0;w<y.cs;w++)b+=y.c[w].shift,x+=b+y.c[w].change,y.c[w].mod+=x}function g(y,b,x){for(;x!==null&&y>=x.low;)x=x.nxt;return{low:y,index:b,nxt:x}}Ej(r,e);var m=Xy.fromNode(r,e);return n(m),h(m,0),Cj(m,r,e),IFe(r,e),r},_j=function(r,t){for(var e=YM(r.data,t,!0),n=YM(r.data,t,!0),i=r.children.length,a=Math.round(i/2),o=t.getSide||function(c,f){return f<a?"right":"left"},s=0;s<i;s++){var l=r.children[s],u=o(l,s);u==="right"?n.children.push(l):e.children.push(l)}return e.eachNode(function(c){c.isRoot()||(c.side="left")}),n.eachNode(function(c){c.isRoot()||(c.side="right")}),{left:e,right:n}},Kc=["LR","RL","TB","BT","H","V"],DFe=["LR","RL","H"],RFe=function(t){return DFe.indexOf(t)>-1},OFe=Kc[0],XM=function(r,t,e){var n=t.direction||OFe;if(t.isHorizontal=RFe(n),n&&Kc.indexOf(n)===-1)throw new TypeError("Invalid direction: "+n);if(n===Kc[0])e(r,t);else if(n===Kc[1])e(r,t),r.right2left();else if(n===Kc[2])e(r,t);else if(n===Kc[3])e(r,t),r.bottom2top();else if(n===Kc[4]||n===Kc[5]){var i=_j(r,t),a=i.left,o=i.right;e(a,t),e(o,t),t.isHorizontal?a.right2left():a.bottom2top(),o.translate(a.x-o.x,a.y-o.y),r.x=a.x,r.y=o.y;var s=r.getBoundingBox();t.isHorizontal?s.top<0&&r.translate(0,-s.top):s.left<0&&r.translate(-s.left,0)}var l=t.fixedRoot;return l===void 0&&(l=!0),l&&r.translate(-(r.x+r.width/2+r.hgap),-(r.y+r.height/2+r.vgap)),r};function LFe(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var FFe=function(r){LFe(t,r);function t(){return r.apply(this,arguments)||this}var e=t.prototype;return e.execute=function(){var i=this;return XM(i.rootNode,i.options,PFe)},t}(mS),NFe={};function BFe(r,t){return t=Nu.assign({},NFe,t),new FFe(r,t).execute()}var $Fe=BFe;function zFe(r,t){t===void 0&&(t=[]);var e=this;e.x=e.y=0,e.leftChild=e.rightChild=null,e.height=0,e.children=t}var GFe={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function Tj(r,t,e){e?(t.x=r.x,t.y=r.y):(t.x=r.y,t.y=r.x),r.children.forEach(function(n,i){Tj(n,t.children[i],e)})}var UFe=function(r,t){t===void 0&&(t={}),t=Nu.assign({},GFe,t);var e=0;function n(l){if(!l)return null;l.width=0,l.depth&&l.depth>e&&(e=l.depth);var u=l.children,c=u.length,f=new zFe(l.height,[]);return u.forEach(function(d,h){var v=n(d);f.children.push(v),h===0&&(f.leftChild=v),h===c-1&&(f.rightChild=v)}),f.originNode=l,f.isLeaf=l.isLeaf(),f}function i(l){if(l.isLeaf||l.children.length===0)l.drawingDepth=e;else{var u=l.children.map(function(f){return i(f)}),c=Math.min.apply(null,u);l.drawingDepth=c-1}return l.drawingDepth}var a;function o(l){l.x=l.drawingDepth*t.rankSep,l.isLeaf?(l.y=0,a&&(l.y=a.y+a.height+t.nodeSep,l.originNode.parent!==a.originNode.parent&&(l.y+=t.subTreeSep)),a=l):(l.children.forEach(function(u){o(u)}),l.y=(l.leftChild.y+l.rightChild.y)/2)}var s=n(r);return i(s),o(s),Tj(s,r,t.isHorizontal),r};function VFe(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var HFe=function(r){VFe(t,r);function t(){return r.apply(this,arguments)||this}var e=t.prototype;return e.execute=function(){var i=this;return i.rootNode.width=0,XM(i.rootNode,i.options,UFe)},t}(mS),WFe={};function jFe(r,t){return t=Nu.assign({},WFe,t),new HFe(r,t).execute()}var YFe=jFe;function XFe(r,t,e,n){var i=typeof e=="function"?e(r):e*r.depth;if(!n)try{if(r.id===r.parent.children[0].id){r.x+=i,r.y=t?t.y:0;return}}catch{}r.x+=i,r.y=t?t.y+t.height:0}var yS=function(r,t,e){var n=null;r.eachNode(function(i){XFe(i,n,t,e),n=i})};function qFe(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var qy=["LR","RL","H"],KFe=qy[0],ZFe=function(r){qFe(t,r);function t(){return r.apply(this,arguments)||this}var e=t.prototype;return e.execute=function(){var i=this,a=i.options,o=i.rootNode;a.isHorizontal=!0;var s=a.indent,l=s===void 0?20:s,u=a.dropCap,c=u===void 0?!0:u,f=a.direction||KFe;if(f&&qy.indexOf(f)===-1)throw new TypeError("Invalid direction: "+f);if(f===qy[0])yS(o,l,c);else if(f===qy[1])yS(o,l,c),o.right2left();else if(f===qy[2]){var d=_j(o,a),h=d.left,v=d.right;yS(h,l,c),h.right2left(),yS(v,l,c);var p=h.getBoundingBox();v.translate(p.width,0),o.x=v.x-o.width/2}return o},t}(mS),QFe={};function JFe(r,t){return t=Nu.assign({},QFe,t),new ZFe(r,t).execute()}var eNe=JFe;function Aj(r,t){var e=0;return r.children.length?r.children.forEach(function(n){e+=Aj(n,t)}):e=r.height,r._subTreeSep=t.getSubTreeSep(r.data),r.totalHeight=Math.max(r.height,e)+2*r._subTreeSep,r.totalHeight}function kj(r){var t=r.children,e=t.length;if(e){t.forEach(function(l){kj(l)});var n=t[0],i=t[e-1],a=i.y-n.y+i.height,o=0;if(t.forEach(function(l){o+=l.totalHeight}),a>r.height)r.y=n.y+a/2-r.height/2;else if(t.length!==1||r.height>o){var s=r.y+(r.height-a)/2-n.y;t.forEach(function(l){l.translate(0,s)})}else r.y=(n.y+n.height/2+i.y+i.height/2)/2-r.height/2}}var tNe={getSubTreeSep:function(){return 0}},rNe=function(r,t){t===void 0&&(t={}),t=Nu.assign({},tNe,t),r.parent={x:0,width:0,height:0,y:0},r.BFTraverse(function(e){e.x=e.parent.x+e.parent.width}),r.parent=null,Aj(r,t),r.startY=0,r.y=r.totalHeight/2-r.height/2,r.eachNode(function(e){var n=e.children,i=n.length;if(i){var a=n[0];if(a.startY=e.startY+e._subTreeSep,i===1)a.y=e.y+e.height/2-a.height/2;else{a.y=a.startY+a.totalHeight/2-a.height/2;for(var o=1;o<i;o++){var s=n[o];s.startY=n[o-1].startY+n[o-1].totalHeight,s.y=s.startY+s.totalHeight/2-s.height/2}}}}),kj(r)};function nNe(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var iNe=function(r){nNe(t,r);function t(){return r.apply(this,arguments)||this}var e=t.prototype;return e.execute=function(){var i=this;return XM(i.rootNode,i.options,rNe)},t}(mS),aNe={};function oNe(r,t){return t=Nu.assign({},aNe,t),new iNe(r,t).execute()}var sNe=oNe,lNe={compactBox:$Fe,dendrogram:YFe,indented:eNe,mindmap:sNe},bS=lNe,Mj=el.traverseTree,uNe=function(t,e){var n;return t?zt(t)?n=function(a){return t}:n=t:n=function(a){return e||1},n},cNe=function(t,e){var n=[],i=[],a={},o=0;for(o=0;o<t.length;o++){var s=t[o];a[s.id]=o,n.push(s.x),n.push(s.y),n.push(0),n.push(0),i.push([])}for(o=0;o<e.length;o++){var l=e[o];i[a[l.source]].push(a[l.target]),i[a[l.target]].push(a[l.source])}var u=0;for(o=0;o<t.length;o++){var c=n.length,f=i[o],d=f.length;n[o*4+2]=c,n[o*4+3]=f.length,u=Math.max(u,f.length);for(var h=0;h<d;++h){var v=f[h];n.push(+v)}}for(;n.length%4!=0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:u}},fNe=function(t,e,n){var i=[],a=[],o={},s=0;for(s=0;s<t.length;s++){var l=t[s];o[l.id]=s,i.push(l.x),i.push(l.y),i.push(0),i.push(0),a.push([])}for(s=0;s<e.length;s++){var u=e[s];a[o[u.source]].push(o[u.target]),a[o[u.source]].push(n(u)),a[o[u.target]].push(o[u.source]),a[o[u.target]].push(n(u))}var c=0;for(s=0;s<t.length;s++){var f=i.length,d=a[s],h=d.length;i[s*4+2]=f,i[s*4+3]=h/2,c=Math.max(c,h/2);for(var v=0;v<h;++v){var p=d[v];i.push(+p)}}for(;i.length%4!=0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:c}},dNe=function(t,e,n,i){var a=[],o=[],s={},l=0;for(l=0;l<t.length;l++){var u=t[l];s[u.id]=l,a.push(u.x),a.push(u.y),a.push(0),a.push(0),o.push([])}for(l=0;l<e.length;l++){var c=e[l];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(n(c)),o[s[c.source]].push(i(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(n(c)),o[s[c.target]].push(i(c)),o[s[c.target]].push(0)}var f=0;for(l=0;l<t.length;l++){var d=a.length,h=o[l],v=h.length;a[l*4+2]=d+1048576*v/4,a[l*4+3]=0,f=Math.max(f,v/4);for(var p=0;p<v;++p){var g=h[p];a.push(+g)}}for(;a.length%4!=0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:f}},hNe=function(t,e){var n=[],i=t.length,a={};return e.forEach(function(o){t.forEach(function(s,l){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),n.push(a[o[s]]),l===i-1)for(;n.length%4!=0;)n.push(0)})}),{array:new Float32Array(n),count:Object.keys(a).length}},vNe=function(t){for(var e=[],n=t.length,i=t[0].length,a=function(l){t.forEach(function(u,c){if(e.push(u[l]),c===n-1)for(;e.length%4!=0;)e.push(0)})},o=0;o<i;o++)a(o);return new Float32Array(e)},pNe=function(t,e){var n=["V","TB","BT"],i={x:1/0,y:1/0},a={x:-1/0,y:-1/0},o="x",s="y";e&&n.indexOf(e)>=0&&(s="x",o="y");var l=0;Mj(t,function(f){return l++,f.x>a.x&&(a.x=f.x),f.x<i.x&&(i.x=f.x),f.y>a.y&&(a.y=f.y),f.y<i.y&&(i.y=f.y),!0});var u=Math.PI*2/l,c=a[s]-i[s];return c===0||Mj(t,function(f){var d=(f[s]-i[s])/c*(Math.PI*2-u)+u,h=Math.abs(o==="x"?f.x-t.x:f.y-t.y);return f.x=h*Math.cos(d),f.y=h*Math.sin(d),!0}),t},gNe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",proccessToFunc:uNe,buildTextureData:cNe,buildTextureDataWithOneEdgeAttr:fNe,buildTextureDataWithTwoEdgeAttr:dNe,attributesToTextureData:hNe,arrayToTextureData:vNe,radialLayout:pNe}),Ij=function r(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var t=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl")))}catch{return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),e},addGetWebGLMessage:function(e){e=e||{};var n=e.parent!==void 0?e.parent:document.body,i=e.id!==void 0?e.id:"oldie",a=r().getWebGLErrorMessage();a.id=i,n.appendChild(a)}}},mNe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",gpuDetector:Ij}),Bu=A(A(A(A({},el),fme),gNe),mNe),yNe=Bu.radialLayout,bNe=function(){function r(t){this.type=t.type,this.radial=t.radial,this.config=t}return r.prototype.init=function(t){var e=this;if(this.data=t,this.radial){this.layoutMethod=function(n){var i=bS[e.type](n,e.config);return yNe(i),i};return}this.layoutMethod=function(n){return bS[e.type](n,e.config)}},r.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},r.prototype.layout=function(t){return this.init(t),this.execute()},r}();To("grid",p4);To("random",g4);To("force",D4);To("circular",R4);To("dagre",n8);To("radial",f8);To("concentric",d8);To("mds",h8);To("fruchterman",v8);To("fruchterman-gpu",gj);To("gForce",m4);To("gForce-gpu",mj);To("comboForce",yj);To("forceAtlas2",bj);var xNe=function(t,e){e.isCustomLayout=!0,pS[t]=To(t,e)},wNe=function(){function r(t,e){var n=t.toString(),i=new Blob(["importScripts('"+e+"');("+n+")()"],{type:"text/javascript"});return new Worker(URL.createObjectURL(i))}return r}(),SNe=function(t){t===void 0&&(t="https://unpkg.com/@antv/layout@latest/dist/layout.min.js");function e(){var i={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var l=s.data.type;return l===i.RUN||l===i.GPURUN}function o(s){var l=this,u=s.data.type;switch(u){case i.RUN:{var c=s.data,f=c.nodes,d=c.edges,h=c.layoutCfg,v=h===void 0?{}:h,p=v.type,g=layout.getLayoutByName(p);if(!g){this.postMessage({type:i.ERROR,message:"layout "+p+" not found"});break}var m;v.onLayoutEnd=function(){l.postMessage({type:i.END,nodes:f}),m==null||m.destroy()},m=new g(v),m.init({nodes:f,edges:d}),m.execute();break}case i.GPURUN:{var y=s.data,b=y.nodes,d=y.edges,x=y.layoutCfg,v=x===void 0?{}:x,w=y.canvas,p=v.type,g=layout.getLayoutByName(p);if(!g){this.postMessage({type:i.ERROR,message:"layout "+p+" not found"});break}if(p.split("-")[1]!=="gpu"){this.postMessage({type:i.ERROR,message:"layout "+p+" does not support GPU"});break}var S=new g(v);S.init({nodes:b,edges:d}),S.executeWithWorker(w,this);break}}}onmessage=function(l){a(l)&&o(l)}}var n=new wNe(e,t);return n},yp={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function xS(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xS=function(e){return typeof e}:xS=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xS(r)}var Pj=function(t){return setTimeout(t,16)},Dj=function(t){return clearTimeout(t)},wS={requestAnimationFrame:function(t){var e=typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||Pj;return e(t)},cancelAnimationFrame:function(t){var e=typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||Dj;return e(t)}},CNe=["fruchterman","gForce"],ENe=["force","grid","circular"],_Ne=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;return n.graph=e,n.layoutCfg=e.get("layout")||{},n.layoutType=n.getLayoutType(),n.worker=null,n.workerData={},n.initLayout(),n}return t.prototype.initLayout=function(){},t.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=SNe(this.layoutCfg.workerScriptURL),this.worker)},t.prototype.stopWorker=function(){var e=this.workerData;!this.worker||(this.worker.terminate(),this.worker=null,e.requestId&&(wS.cancelAnimationFrame(e.requestId),e.requestId=null),e.requestId2&&(wS.cancelAnimationFrame(e.requestId2),e.requestId2=null))},t.prototype.execLayoutMethod=function(e,n){var i=this;return new Promise(function(a,o){return Al(i,void 0,void 0,function(){var s,l,u,c,f,d,h,v,f,p;return kl(this,function(g){switch(g.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];l=e.type,e.onLayoutEnd=function(){s.emit("aftersublayout",{type:l}),a()},l&&this.isGPU&&(this.hasGPUVersion(l)?l=l+"-gpu":console.warn("The '"+l+"' layout does not support GPU calculation for now, it will run in CPU.")),u=l==="force"||l==="g6force"||l==="gForce",u?(c=e.onTick,f=function(){c&&c(),s.refreshPositions()},e.tick=f):e.type==="comboForce"&&(e.comboTrees=s.get("comboTrees")),d=!1;try{h=new pS[l](e)}catch{console.warn("The layout method: '"+l+"' does not exist! Please specify it first."),o()}return d=h.enableTick,d&&(v=e.onTick,f=function(){v&&v(),s.refreshPositions()},h.tick=f),p=this.filterLayoutData(this.data,e),kNe(p,n),h.init(p),s.emit("beforesublayout",{type:l}),[4,h.execute()];case 1:return g.sent(),h.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd(),this.layoutMethods[n]=h,[2]}})})})},t.prototype.updateLayoutMethod=function(e,n){var i=this;return new Promise(function(a,o){return Al(i,void 0,void 0,function(){var s,l,u;return kl(this,function(c){switch(c.label){case 0:return s=this.graph,l=n==null?void 0:n.type,n.onLayoutEnd=function(){s.emit("aftersublayout",{type:l}),a()},u=this.filterLayoutData(this.data,n),e.init(u),e.updateCfg(n),s.emit("beforesublayout",{type:l}),[4,e.execute()];case 1:return c.sent(),e.isCustomLayout&&n.onLayoutEnd&&n.onLayoutEnd(),[2]}})})})},t.prototype.layout=function(e){var n=this,i=this.graph;this.data=this.setDataFromGraph();var a=this.data,o=a.nodes,s=a.hiddenNodes;if(!o)return!1;var l=i.get("width"),u=i.get("height"),c={};Object.assign(c,{width:l,height:u,center:[l/2,u/2]},this.layoutCfg),this.layoutCfg=c,this.destoryLayoutMethods(),i.emit("beforelayout"),this.initPositions(c.center,o),this.initPositions(c.center,s);var f=c.type;f&&f.split("-")[1]==="gpu"&&(f=f.split("-")[0],c.gpuEnabled=!0);var d=!1;c.gpuEnabled&&(d=!0,Ij().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),d=!1)),this.isGPU=d;var h=c.onLayoutEnd,v=c.layoutEndFormatted,p=c.adjust;if(v||(c.layoutEndFormatted=!0,c.onAllLayoutEnd=function(){return Al(n,void 0,void 0,function(){return kl(this,function(m){switch(m.label){case 0:return h&&h(),this.refreshLayout(),p&&c.pipes?[4,this.adjustPipesBox(this.data,p)]:[3,2];case 1:m.sent(),this.refreshLayout(),m.label=2;case 2:return i.emit("afterlayout"),[2]}})})}),this.stopWorker(),c.workerEnabled&&this.layoutWithWorker(this.data))return!0;var g=Promise.resolve();return c.type?g=g.then(function(){return Al(n,void 0,void 0,function(){return kl(this,function(m){switch(m.label){case 0:return[4,this.execLayoutMethod(c,0)];case 1:return[2,m.sent()]}})})}):c.pipes&&c.pipes.forEach(function(m,y){g=g.then(function(){return Al(n,void 0,void 0,function(){return kl(this,function(b){switch(b.label){case 0:return[4,this.execLayoutMethod(m,y)];case 1:return[2,b.sent()]}})})})}),g.then(function(){c.onAllLayoutEnd&&c.onAllLayoutEnd(),e&&e()}).catch(function(m){console.warn("graph layout failed,",m)}),!1},t.prototype.layoutWithWorker=function(e){var n=this,i=this,a=i.layoutCfg,o=i.graph,s=this.getWorker(),l=this.workerData;if(!s)return!1;l.requestId=null,l.requestId2=null,l.currentTick=null,l.currentTickData=null,o.emit("beforelayout");var u=Promise.resolve();if(a.type)u=u.then(function(){return n.runWebworker(s,e,a)});else if(a.pipes)for(var c=function(p){u=u.then(function(){return n.runWebworker(s,e,p)})},f=0,d=a.pipes;f<d.length;f++){var h=d[f];c(h)}return u.then(function(){a.onAllLayoutEnd&&a.onAllLayoutEnd()}).catch(function(v){console.error("layout failed",v)}),!0},t.prototype.runWebworker=function(e,n,i){var a=this,o=this.isGPU,s=this.filterLayoutData(n,i),l=s.nodes,u=s.edges,c=document.createElement("canvas"),f=o&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,d=TNe(i,function(v){return typeof v!="function"});if(!f)e.postMessage({type:yp.RUN,nodes:l,edges:u,layoutCfg:d});else{var h=c.transferControlToOffscreen();d.type=d.type+"-gpu",e.postMessage({type:yp.GPURUN,nodes:l,edges:u,layoutCfg:d,canvas:h},[h])}return new Promise(function(v,p){e.onmessage=function(g){a.handleWorkerMessage(v,p,g,s,i)}})},t.prototype.handleWorkerMessage=function(e,n,i,a,o){var s=this,l=s.graph,u=s.workerData,c=i.data,f=c.type,d=function(){o.onTick&&o.onTick()};switch(f){case yp.TICK:u.currentTick=c.currentTick,u.currentTickData=c,u.requestId||(u.requestId=wS.requestAnimationFrame(function(){qM(a,c),l.refreshPositions(),d(),c.currentTick===c.totalTicks?e():u.currentTick===c.totalTicks&&(u.requestId2=wS.requestAnimationFrame(function(){qM(a,u.currentTickData),l.refreshPositions(),u.requestId2=null,d(),e()})),u.requestId=null}));break;case yp.END:u.currentTick==null&&(qM(a,c),e());break;case yp.GPUEND:u.currentTick==null&&(ANe(a,c),e());break;case yp.ERROR:console.warn("Web-Worker layout error!",c.message),n();break;default:n();break}},t.prototype.updateLayoutCfg=function(e){var n=this,i=this,a=i.graph,o=i.layoutMethods,s=jt({},this.layoutCfg,e);if(this.layoutCfg=s,!(o==null?void 0:o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(e.workerEnabled&&this.layoutWithWorker(this.data))){a.emit("beforelayout");var l=Promise.resolve();o.length===1?l=l.then(function(){return Al(n,void 0,void 0,function(){return kl(this,function(u){switch(u.label){case 0:return[4,this.updateLayoutMethod(o[0],s)];case 1:return[2,u.sent()]}})})}):o==null||o.forEach(function(u,c){var f=s.pipes[c];l=l.then(function(){return Al(n,void 0,void 0,function(){return kl(this,function(d){switch(d.label){case 0:return[4,this.updateLayoutMethod(u,f)];case 1:return[2,d.sent()]}})})})}),l.then(function(){s.onAllLayoutEnd&&s.onAllLayoutEnd()}).catch(function(u){console.warn("layout failed",u)})}},t.prototype.adjustPipesBox=function(e,n){var i=this;return new Promise(function(a){var o=e.nodes;(o==null?void 0:o.length)||a(),ENe.includes(n)||(console.warn("The adjust type "+n+" is not supported yet, please assign it with 'force', 'grid', or 'circular'."),a());var s={center:i.layoutCfg.center,nodeSize:function(v){return Math.max(v.height,v.width)},preventOverlap:!0,onLayoutEnd:function(){}},l=i.getLayoutBBox(o),u=l.groupNodes,c=l.layoutNodes,f=Or(c);s.onLayoutEnd=function(){c==null||c.forEach(function(h,v){var p,g,m,y=h.x-((p=f[v])===null||p===void 0?void 0:p.x),b=h.y-((g=f[v])===null||g===void 0?void 0:g.y);(m=u[v])===null||m===void 0||m.forEach(function(x){x.x+=y,x.y+=b})}),a()};var d=new pS[n](s);d.layout({nodes:c})})},t.prototype.hasGPUVersion=function(e){return CNe.includes(e)},t.prototype.destroy=function(){this.destoryLayoutMethods();var e=this.worker;e&&(e.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},t}(npe);function qM(r,t){for(var e=r.nodes,n=t.nodes,i=e.length,a=0;a<i;a++){var o=e[a];o.x=n[a].x,o.y=n[a].y}}function TNe(r,t){var e={};return r&&xS(r)==="object"?(Object.keys(r).forEach(function(n){r.hasOwnProperty(n)&&t(r[n])&&(e[n]=r[n])}),e):r}function ANe(r,t){for(var e=r.nodes,n=t.vertexEdgeData,i=e.length,a=0;a<i;a++){var o=e[a],s=n[4*a],l=n[4*a+1];o.x=s,o.y=l}}function kNe(r,t){var e;if(!!((e=r==null?void 0:r.nodes)===null||e===void 0?void 0:e.length)){var n=r.nodes;n.forEach(function(i){i.layoutOrder=t})}}var Rj=Zn,MNe="svg",Oj=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this,i=n.get("defaultNode");return i||n.set("defaultNode",{type:"circle"}),i.type||(i.type="circle",n.set("defaultNode",i)),n.destroyed=!1,n}return t.prototype.initLayoutController=function(){var e=new _Ne(this);this.set({layoutController:e})},t.prototype.initEventController=function(){var e=new wme(this);this.set({eventController:e})},t.prototype.initCanvas=function(){var e=this.get("container");if(typeof e=="string"&&(e=document.getElementById(e),this.set("container",e)),!e)throw new Error("invalid container");var n=e.clientWidth,i=e.clientHeight,a=this.get("width")||n,o=this.get("height")||i;!this.get("width")&&!this.get("height")&&(this.set("width",n),this.set("height",i));var s=this.get("renderer"),l;if(s===MNe)l=new zv({container:e,width:a,height:o});else{var u={container:e,width:a,height:o},c=this.get("pixelRatio");c&&(u.pixelRatio=c),l=new _u(u)}this.set("canvas",l)},t.prototype.initPlugins=function(){var e=this;G(e.get("plugins"),function(n){!n.destroyed&&n.initPlugin&&n.initPlugin(e)})},t.prototype.downloadImageWatermark=function(e,n,i,a){return Al(this,void 0,void 0,function(){var o,s,l;return kl(this,function(u){switch(u.label){case 0:return o=e.style.backgroundImage,s=o.slice(5,o.length-2),l=new Image,l.src=s,[4,new Promise(function(c){l.onload=function(){var f=n.createPattern(l,"repeat");n.rect(0,0,i,a),n.fillStyle=f,n.fill(),c("")}})];case 1:return u.sent(),[2]}})})},t.prototype.asyncToDataUrl=function(e,n,i,a,o,s){var l=this,u=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),f=c.getRenderer(),d=s||c.get("el"),h="";e||(e="image/png"),setTimeout(function(){return Al(l,void 0,void 0,function(){var v,p,g,m,y,b,x,w,S,C;return kl(this,function(_){switch(_.label){case 0:return f!=="svg"?[3,1]:(v=d.cloneNode(!0),p=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),g=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",p),g.replaceChild(v,g.documentElement),m=new XMLSerializer().serializeToString(g),h="data:image/svg+xml;charset=utf8,"+encodeURIComponent(m),[3,4]);case 1:return y=void 0,b=d.getContext("2d"),x=a||this.get("width"),w=o||this.get("height"),S=void 0,u?[4,this.downloadImageWatermark(u,b,x,w)]:[3,3];case 2:_.sent(),_.label=3;case 3:if(n){C=typeof window!="undefined"?window.devicePixelRatio:1;try{y=b.getImageData(0,0,x*C,w*C),S=b.globalCompositeOperation,b.globalCompositeOperation="destination-over",b.fillStyle=n,b.fillRect(0,0,x,w)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}h=d.toDataURL(e),n&&(b.clearRect(0,0,x,w),b.putImageData(y,0,0),b.globalCompositeOperation=S),_.label=4;case 4:return i&&i(h),[2]}})})},16)},t.prototype.toDataURL=function(e,n){var i=this.get("canvas"),a=i.getRenderer(),o=i.get("el");e||(e="image/png");var s="";if(a==="svg"){var l=o.cloneNode(!0),u=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",u);c.replaceChild(l,c.documentElement);var f=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,"+encodeURIComponent(f)}else{var d=void 0,h=o.getContext("2d"),v=this.get("width"),p=this.get("height"),g=void 0;if(n){var m=typeof window!="undefined"?window.devicePixelRatio:1;try{d=h.getImageData(0,0,v*m,p*m),g=h.globalCompositeOperation,h.globalCompositeOperation="destination-over",h.fillStyle=n,h.fillRect(0,0,v,p)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(e),n&&(h.clearRect(0,0,v,p),h.putImageData(d,0,0),h.globalCompositeOperation=g)}return s},t.prototype.toFullDataURL=function(e,n,i){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,l=this.get("renderer"),u=Qn('<id="virtual-image"></div>'),c=i?i.backgroundColor:void 0,f=i?i.padding:void 0;f?zt(f)&&(f=[f,f,f,f]):f=[0,0,0,0];var d=o+f[0]+f[2],h=s+f[1]+f[3],v={container:u,height:d,width:h,quickHit:!0},p=l==="svg"?new zv(v):new _u(v),g=this.get("group"),m=g.clone(),y=Or(m.getMatrix());y||(y=[1,0,0,0,1,0,0,0,1]);var b=(a.maxX+a.minX)/2,x=(a.maxY+a.minY)/2;y=Rj(y,[["t",-b,-x],["t",s/2+f[3],o/2+f[0]]]),m.resetMatrix(),m.setMatrix(y),p.add(m);var w=p.get("el"),S="";n||(n="image/png"),setTimeout(function(){if(l==="svg"){var C=w.cloneNode(!0),_=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),T=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",_);T.replaceChild(C,T.documentElement);var E=new XMLSerializer().serializeToString(T);S="data:image/svg+xml;charset=utf8,"+encodeURIComponent(E)}else{var k=void 0,I=w.getContext("2d"),P=void 0;if(c){var F=typeof window!="undefined"?window.devicePixelRatio:1;try{k=I.getImageData(0,0,h*F,d*F),P=I.globalCompositeOperation,I.globalCompositeOperation="destination-over",I.fillStyle=c,I.fillRect(0,0,h,d)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}S=w.toDataURL(n),c&&(I.clearRect(0,0,h,d),I.putImageData(k,0,0),I.globalCompositeOperation=P)}e&&e(S)},16)},t.prototype.downloadFullImage=function(e,n,i){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,l=o.width,u=this.get("renderer"),c=Qn('<id="virtual-image"></div>'),f=document.querySelector(".g6-graph-watermarker"),d=i?i.backgroundColor:void 0,h=i?i.padding:void 0;h?zt(h)&&(h=[h,h,h,h]):h=[0,0,0,0];var v=s+h[0]+h[2],p=l+h[1]+h[3];if(f){var g=this.get("graphWaterMarker").cfg||{},m=g.width,y=g.height;v=Math.ceil(v/y)*y,p=Math.ceil(p/m)*m}var b={container:c,height:v,width:p},x=u==="svg"?new zv(b):new _u(b),w=this.get("group"),S=w.clone(),C=Or(S.getMatrix());C||(C=[1,0,0,0,1,0,0,0,1]);var _=(o.maxX+o.minX)/2,T=(o.maxY+o.minY)/2;C=Rj(C,[["t",-_,-T],["t",l/2+h[3],s/2+h[0]]]),S.resetMatrix(),S.setMatrix(C),x.add(S);var E=x.get("el");n||(n="image/png"),this.asyncToDataUrl(n,d,function(k){var I=document.createElement("a"),P=(e||"graph")+(u==="svg"?".svg":"."+n.split("/")[1]);a.dataURLToImage(k,u,I,P);var F=document.createEvent("MouseEvents");F.initEvent("click",!1,!1),I.dispatchEvent(F)},p,v,E)},t.prototype.downloadImage=function(e,n,i){var a=this,o=this;o.isAnimating()&&o.stopAnimate();var s=o.get("canvas"),l=s.getRenderer();n||(n="image/png");var u=(e||"graph")+(l==="svg"?".svg":n.split("/")[1]),c=document.createElement("a");o.asyncToDataUrl(n,i,function(f){a.dataURLToImage(f,l,c,u);var d=document.createEvent("MouseEvents");d.initEvent("click",!1,!1),c.dispatchEvent(d)})},t.prototype.dataURLToImage=function(e,n,i,a){if(!e||e==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window!="undefined")if(window.Blob&&window.URL&&n!=="svg"){var o=e.split(","),s="";if(o&&o.length>0){var l=o[0].match(/:(.*?);/);l&&l.length>=2&&(s=l[1])}for(var u=atob(o[1]),c=u.length,f=new Uint8Array(c);c--;)f[c]=u.charCodeAt(c);var d=new Blob([f],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(d,a):i.addEventListener("click",function(){i.download=a,i.href=window.URL.createObjectURL(d)})}else i.addEventListener("click",function(){i.download=a,i.href=e})},t.prototype.addPlugin=function(e){var n=this;e.destroyed||(n.get("plugins").push(e),e.initPlugin(n))},t.prototype.removePlugin=function(e){var n=this.get("plugins"),i=n.indexOf(e);i>=0&&(e.destroyPlugin(),n.splice(i,1))},t.prototype.setImageWaterMarker=function(e,n){e===void 0&&(e=wd.waterMarkerImage);var i=this.get("container");ot(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),o=Dt({},wd.imageWaterMarkerConfig,n),s=o.width,l=o.height,u=o.compatible,c=o.image;if(!a){var f={container:i,width:s,height:l,capture:!1},d=this.get("pixelRatio");d&&(f.pixelRatio=d),a=new _u(f),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var h=a.get("context"),v=c.rotate,p=c.x,g=c.y;h.rotate(-v*Math.PI/180);var m=new Image;m.crossOrigin="anonymous",m.src=e,m.onload=function(){if(h.drawImage(m,p,g,c.width,c.height),h.rotate(v*Math.PI/180),u)i.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var y=document.querySelector(".g6-graph-watermarker");y||(y=document.createElement("div"),y.className="g6-graph-watermarker"),y.className="g6-graph-watermarker",a.destroyed||(y.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;",i.appendChild(y))}}},t.prototype.setTextWaterMarker=function(e,n){var i=this.get("container");ot(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),o=Dt({},wd.textWaterMarkerConfig,n),s=o.width,l=o.height,u=o.compatible,c=o.text;if(!a){var f={container:i,width:s,height:l,capture:!1},d=this.get("pixelRatio");d&&(f.pixelRatio=d),a=new _u(f),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var h=a.get("context"),v=c.rotate,p=c.fill,g=c.fontFamily,m=c.fontSize,y=c.baseline,b=c.x,x=c.y,w=c.lineHeight;h.rotate(-v*Math.PI/180),h.font=m+"px "+g,h.fillStyle=p,h.textBaseline=y;for(var S=e.length-1;S>=0;S--)h.fillText(e[S],b,x+S*w);if(h.rotate(v*Math.PI/180),u)i.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var C=document.querySelector(".g6-graph-watermarker");C||(C=document.createElement("div"),C.className="g6-graph-watermarker"),C.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;",i.appendChild(C)}},t.prototype.destroy=function(){var e,n,i,a;G(this.get("plugins"),function(c){c.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var l=o[s];if(!!l){var u=l.parentElement;!u||u.removeChild(l)}}(e=this.get("eventController"))===null||e===void 0||e.destroy(),(n=this.get("layoutController"))===null||n===void 0||n.destroy(),(i=this.get("graphWaterMarker"))===null||i===void 0||i.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),r.prototype.destroy.call(this)},t}(Vve),INe=Bu.radialLayout,PNe=Bu.traverseTree,DNe=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;return n.layoutAnimating=!1,n.set("removeList",[]),n.set("layoutMethod",n.getLayout()),n}return t.prototype.getLayout=function(){var e=this.get("layout");return e?typeof e=="function"?e:(e.type||(e.type="dendrogram"),e.direction||(e.direction="TB"),e.radial?function(n){var i=bS[e.type](n,e);return INe(i),i}:function(n){return bS[e.type](n,e)}):null},t.indexOfChild=function(e,n){var i=-1;return G(e,function(a,o){if(n===a.id)return i=o,!1}),i},t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return e.animate=!0,e},t.prototype.innerAddChild=function(e,n,i){var a=this,o=e.data;o&&(o.x=e.x,o.y=e.y,o.depth=e.depth);var s=a.addItem("node",o,!1);if(n){if(s.set("parent",n),i){var l=n.get("originAttrs");if(l)s.set("originAttrs",l);else{var u=n.getModel();s.set("originAttrs",{x:u.x,y:u.y})}}var c=n.get("children");c?c.push(s):n.set("children",[s]),a.addItem("edge",{source:n.get("id"),target:s.get("id"),id:n.get("id")+":"+s.get("id")},!1)}return G(e.children||[],function(f){a.innerAddChild(f,s,i)}),a.emit("afteraddchild",{item:s,parent:n}),s},t.prototype.innerUpdateChild=function(e,n,i){var a=this,o=a.findById(e.id);if(!o){a.innerAddChild(e,n,i);return}G(e.children||[],function(v){a.innerUpdateChild(v,o,i)});var s=o.get("children");if(s){var l=s.length;if(l>0)for(var u=s.length-1;u>=0;u--){var c=s[u].getModel();t.indexOfChild(e.children||[],c.id)===-1&&(a.innerRemoveChild(c.id,{x:e.x,y:e.y},i),s.splice(u,1))}}var f,d;o.get("originAttrs")&&(f=o.get("originAttrs").x,d=o.get("originAttrs").y);var h=o.getModel();i&&o.set("originAttrs",{x:h.x,y:h.y}),o.set("model",e.data),(f!==e.x||d!==e.y)&&o.updatePosition({x:e.x,y:e.y})},t.prototype.innerRemoveChild=function(e,n,i){var a=this,o=a.findById(e);if(!!o)if(G(o.get("children"),function(l){a.innerRemoveChild(l.getModel().id,n,i)}),i){var s=o.getModel();o.set("to",n),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},t.prototype.changeData=function(e){var n=this;this.getNodes().map(function(i){return n.clearItemStates(i)}),this.getEdges().map(function(i){return n.clearItemStates(i)}),e?(n.data(e),n.render()):n.layout(this.get("fitView"))},t.prototype.changeLayout=function(e){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var n=this;n.updateLayout(e)},t.prototype.updateLayout=function(e){var n=this;if(!e){console.warn("layout cannot be null");return}n.set("layout",e),n.set("layoutMethod",n.getLayout()),n.layout()},t.prototype.refreshLayout=function(e){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var n=this;n.layout(e)},t.prototype.layout=function(e){var n=this,i=n.get("data"),a=n.get("layoutMethod"),o=a?a(i,n.get("layout")):i,s=n.get("animate");if(n.emit("beforerefreshlayout",{data:i,layoutData:o}),n.emit("beforelayout"),n.innerUpdateChild(o,void 0,s),e){var l=n.get("viewController");l.fitView()}s?n.layoutAnimate(o):(n.refresh(),n.paint()),n.emit("afterrefreshlayout",{data:i,layoutData:o}),n.emit("afterlayout")},t.prototype.addChild=function(e,n){var i=this;i.emit("beforeaddchild",{model:e,parent:n}),ot(n)||(n=n.get("id"));var a=i.findDataById(n);a&&(a.children||(a.children=[]),a.children.push(e),i.changeData())},t.prototype.updateChildren=function(e,n){var i=this;if(!n||!i.findById(n)){console.warn("Update children failed! There is no node with id '"+n+"'");return}var a=i.findDataById(n);a.children=e,i.changeData()},t.prototype.updateChild=function(e,n){var i=this;if(!n||!i.findById(n)){i.changeData(e);return}var a=i.findDataById(n),o=i.findById(e.id);if(a.children||(a.children=[]),!o)a.children.push(e);else{var s=t.indexOfChild(a.children,e.id);a.children[s]=e}i.changeData()},t.prototype.removeChild=function(e){var n=this,i=n.findById(e);if(!!i){var a=i.get("parent");if(a&&!a.destroyed){var o=n.findDataById(a.get("id")),s=o&&o.children||[],l=i.getModel(),u=t.indexOfChild(s,l.id);s.splice(u,1)}n.changeData()}},t.prototype.findDataById=function(e,n){var i=this;if(n||(n=i.get("data")),e===n.id)return n;var a=null;return G(n.children||[],function(o){if(o.id===e)return a=o,!1;if(a=i.findDataById(e,o),a)return!1}),a},t.prototype.layoutAnimate=function(e,n){var i=this,a=this.get("animateCfg");i.emit("beforeanimate",{data:e}),i.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){PNe(e,function(s){var l=i.findById(s.id);if(l){var u=l.get("originAttrs"),c=l.get("model");if(u||(u={x:c.x,y:c.y},l.set("originAttrs",u)),n){var f=n(l,o,u,e);l.set("model",Object.assign(c,f))}else c.x=u.x+(s.x-u.x)*o,c.y=u.y+(s.y-u.y)*o}return!0}),G(i.get("removeList"),function(s){var l=s.getModel(),u=s.get("originAttrs"),c=s.get("to");l.x=u.x+(c.x-u.x)*o,l.y=u.y+(c.y-u.y)*o}),i.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){G(i.getNodes(),function(s){s.set("originAttrs",null)}),G(i.get("removeList"),function(s){i.removeItem(s)}),i.set("removeList",[]),a.callback&&a.callback(),i.emit("afteranimate",{data:e})},delay:a.delay})},t.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},t.prototype.isLayoutAnimating=function(){return this.layoutAnimating},t.prototype.render=function(){var e=this,n=e.get("data");if(!n||!an(n)||!Object.keys(n).length)throw new Error("data must be defined first");e.clear(),e.emit("beforerender"),e.layout(this.get("fitView")),e.emit("afterrender")},t.prototype.save=function(){return this.get("data")},t}(Oj),RNe=function(){function r(t){this._cfgs=Dt(this.getDefaultCfgs(),t),this._events={},this.destroyed=!1}return r.prototype.getDefaultCfgs=function(){return{}},r.prototype.initPlugin=function(t){var e=this;e.set("graph",t);var n=e.getEvents(),i={};G(n,function(a,o){var s=wv(e,a);i[o]=s,t.on(o,s)}),this._events=i,this.init()},r.prototype.getEvents=function(){return{}},r.prototype.get=function(t){var e;return(e=this._cfgs)===null||e===void 0?void 0:e[t]},r.prototype.set=function(t,e){this._cfgs[t]=e},r.prototype.destroy=function(){},r.prototype.destroyPlugin=function(){this.destroy();var t=this.get("graph"),e=this._events;G(e,function(n,i){t.off(i,n)}),this._events=null,this._cfgs=null,this.destroyed=!0},r}(),gs=RNe,ONe=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Lj="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",LNe=function(r){ONe(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{img:Lj,follow:!0}},t.prototype.init=function(){var e=this.get("graph"),n=e.get("container"),i=e.get("canvas").get("el"),a=this.get("img")||Lj,o=Qn(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=Qn(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `+a+`;
        user-select: none
        '></div>`);this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),n.insertBefore(o,i)},t.prototype.positionInit=function(){var e=this.get("graph"),n=e.get("minZoom"),i=e.get("width"),a=e.get("height");Vr(this.get("container"),{width:i+"px",height:a+"px"});var o=i*80/n,s=a*80/n;Vr(this.get("gridContainer"),{width:o+"px",height:s+"px",left:"-"+o/2+"px",top:"-"+s/2+"px"})},t.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},t.prototype.updateGrid=function(e){var n=this.get("gridContainer"),i=e.matrix;i||(i=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix("+i[0]+", "+i[1]+", "+i[3]+", "+i[4]+", "+(a?i[6]:"0")+", "+(a?i[7]:"0")+")";Vr(n,{transform:o})},t.prototype.getContainer=function(){return this.get("container")},t.prototype.destroy=function(){var e=this.get("graph"),n=e.get("container"),i=this.get("container");n.removeChild(i)},t}(gs),FNe=LNe,Fj=[],Ky=[],NNe="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function Nj(r,t){if(t=t||{},r===void 0)throw new Error(NNe);var e=t.prepend===!0?"prepend":"append",n=t.container!==void 0?t.container:document.querySelector("head"),i=Fj.indexOf(n);i===-1&&(i=Fj.push(n)-1,Ky[i]={});var a;return Ky[i]!==void 0&&Ky[i][e]!==void 0?a=Ky[i][e]:(a=Ky[i][e]=BNe(),e==="prepend"?n.insertBefore(a,n.childNodes[0]):n.appendChild(a)),r.charCodeAt(0)===65279&&(r=r.substr(1,r.length)),a.styleSheet?a.styleSheet.cssText+=r:a.textContent+=r,a}function BNe(){var r=document.createElement("style");return r.setAttribute("type","text/css"),r}var SS=Nj,$Ne=Nj;SS.insertCss=$Ne;var zNe=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();typeof document!="undefined"&&SS(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var GNe=function(r){zNe(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(n){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(n){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},t.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow"}:{contextmenu:"onMenuShow"}},t.prototype.init=function(){var e=this.get("className"),n=Qn("<div class="+(e||"g6-component-contextmenu")+"></div>");Vr(n,{top:"0px",position:"absolute",visibility:"hidden"});var i=this.get("container");i||(i=this.get("graph").get("container")),ot(i)&&(i=document.getElementById(i)),i.appendChild(n),this.set("menu",n)},t.prototype.onMenuShow=function(e){var n=this;e.preventDefault();var i=this.get("itemTypes");if(e.item){if(e.item&&e.item.getType&&i.indexOf(e.item.getType())===-1){n.onMenuHide();return}}else if(i.indexOf("canvas")===-1){n.onMenuHide();return}var a=this.get("shouldBegin");if(!!a(e)){var o=this.get("menu"),s=this.get("getContent"),l=this.get("graph"),u=s(e,l);ot(u)?o.innerHTML=u:o.innerHTML=u.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var f=function(_){c(_.target,e.item,l)};this.set("handleMenuClickWrapper",f),o.addEventListener("click",f)}var d=l.get("width"),h=l.get("height"),v=o.getBoundingClientRect(),p=this.get("offsetX")||0,g=this.get("offsetY")||0,m=l.getContainer().offsetTop,y=l.getContainer().offsetLeft,b=e.canvasX+y+p,x=e.canvasY+m+g;b+v.width>d&&(b=e.canvasX-v.width-p+y),x+v.height>h&&(x=e.canvasY-v.height-g+m),Vr(o,{top:x+"px",left:b+"px",visibility:"visible"});var w=this.get("trigger")==="click",S=function(_){if(w){w=!1;return}n.onMenuHide()};document.body.addEventListener("click",S),this.set("handler",S)}},t.prototype.removeMenuEventListener=function(){var e=this.get("handleMenuClickWrapper"),n=this.get("handler");if(e){var i=this.get("menu");i.removeEventListener("click",e),this.set("handleMenuClickWrapper",null)}n&&document.body.removeEventListener("click",n)},t.prototype.onMenuHide=function(){var e=this.get("menu");e&&Vr(e,{visibility:"hidden"}),this.removeMenuEventListener()},t.prototype.destroy=function(){var e=this.get("menu");if(this.removeMenuEventListener(),e){var n=this.get("container");n||(n=this.get("graph").get("container")),ot(n)&&(n=document.getElementById(n)),n.removeChild(e)}},t}(gs),UNe=GNe,VNe=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),KM=globalThis&&globalThis.__assign||function(){return KM=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},KM.apply(this,arguments)},Bj=Math.max,HNe=Zn,WNe="default",jNe="keyShape",YNe="delegate",$j="svg",XNe=function(r){VNe(t,r);function t(e){var n=r.call(this,e)||this;return n.handleUpdateCanvas=pm(function(i){var a=n;a.destroyed||a.updateCanvas()},100,!1),n}return t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},t.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},t.prototype.disableRefresh=function(){this.set("refresh",!1)},t.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},t.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},t.prototype.initViewport=function(){var e=this,n=this._cfgs,i=n.size,a=n.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),l=Qn(`
      <div
        class=`+n.viewportClassName+`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff'
        draggable=true>
      </div>`),u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,c=0,f=0,d=!1,h=0,v=0,p=0,g=0,m=0,y=0;l.addEventListener("dragstart",function(b){var x,w;if(b.dataTransfer){var S=new Image;S.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(w=(x=b.dataTransfer).setDragImage)===null||w===void 0||w.call(x,S,0,0);try{b.dataTransfer.setData("text/html","view-port-minimap")}catch{b.dataTransfer.setData("text","view-port-minimap")}}if(n.refresh=!1,b.target===l){var C=l.style;h=parseInt(C.left,10),v=parseInt(C.top,10),p=parseInt(C.width,10),g=parseInt(C.height,10),!(p>i[0]||g>i[1])&&(y=a.getZoom(),m=e.get("ratio"),d=!0,c=b.clientX,f=b.clientY)}},!1),l.addEventListener(u?"dragover":"drag",function(b){if(!(!d||nt(b.clientX)||nt(b.clientY))){var x=c-b.clientX,w=f-b.clientY;(h-x<0||h-x+p>=i[0])&&(x=0),(v-w<0||v-w+g>=i[1])&&(w=0),h-=x,v-=w,Vr(l,{left:h+"px",top:v+"px"}),a.translate(x*y/m,w*y/m),c=b.clientX,f=b.clientY}},!1),l.addEventListener("dragend",function(){d=!1,n.refresh=!0},!1),this.set("viewport",l),s.appendChild(l)}},t.prototype.updateViewport=function(){if(!this.destroyed){var e=this.get("ratio");this.get("dx"),this.get("dy");var n=this.get("totaldx"),i=this.get("totaldy"),a=this.get("graph"),o=this.get("size"),s=a.get("width"),l=a.get("height"),u=a.getPointByCanvas(0,0),c=a.getPointByCanvas(s,l),f=this.get("viewport");f||this.initViewport();var d=(c.x-u.x)*e,h=(c.y-u.y)*e,v=u.x*e+n,p=u.y*e+i,g=v+d,m=p+h;v<0&&(d+=v,v=0),g>o[0]&&(d=d-(g-o[0])),p<0&&(h+=p,p=0),m>o[1]&&(h=h-(m-o[1])),this.set("ratio",e);var y=v+"px",b=p+"px";Vr(f,{left:y,top:b,width:d+"px",height:h+"px"})}},t.prototype.updateGraphShapes=function(){var e=this._cfgs.graph,n=this.get("canvas"),i=e.get("group");if(!i.destroyed){var a=i.clone();a.resetMatrix(),n.clear(),n.add(a);var o=e.get("renderer");o===$j&&this.updateVisible(a)}},t.prototype.updateVisible=function(e){var n=this;if(!e.isGroup()&&!e.get("visible"))e.hide();else{var i=e.get("children");if(!i||!i.length)return;i.forEach(function(a){a.get("visible")||a.hide(),n.updateVisible(a)})}},t.prototype.updateKeyShapes=function(){var e=this,n=this._cfgs.graph,i=this.get("canvas"),a=i.get("children")[0]||i.addGroup();G(n.getEdges(),function(l){e.updateOneEdgeKeyShape(l,a)}),G(n.getNodes(),function(l){e.updateOneNodeKeyShape(l,a)});var o=n.getCombos();if(o&&o.length){var s=a.find(function(l){return l.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){e.destroyed||(G(o,function(l){e.updateOneComboKeyShape(l,s)}),s==null||s.sort(),s==null||s.toBack(),e.updateCanvas())},250)}this.clearDestroyedShapes()},t.prototype.updateOneComboKeyShape=function(e,n){if(!this.destroyed){var i=this.get("itemMap")||{},a=i[e.get("id")],o=e.getBBox(),s=e.get("keyShape").clone(),l=s.attr(),u={x:o.centerX,y:o.centerY};a?u=Object.assign(l,u):(a=s,n.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(u.x=o.minX,u.y=o.minY),a.attr(u),e.isVisible()?a.show():a.hide(),a.exist=!0;var f=e.getModel().depth;isNaN(f)||a.set("zIndex",f),i[e.get("id")]=a,this.set("itemMap",i)}},t.prototype.updateOneNodeKeyShape=function(e,n){var i=this.get("itemMap")||{},a=i[e.get("id")],o=e.getBBox(),s=e.get("keyShape").clone(),l=s.attr(),u={x:o.centerX,y:o.centerY};a?u=Object.assign(l,u):(a=s,n.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(u.x=o.minX,u.y=o.minY),a.attr(u),e.isVisible()?a.show():a.hide(),a.exist=!0;var f=e.getModel().depth;isNaN(f)||a.set("zIndex",f),i[e.get("id")]=a,this.set("itemMap",i)},t.prototype.updateDelegateShapes=function(){var e=this,n=this._cfgs.graph,i=this.get("canvas"),a=i.get("children")[0]||i.addGroup();G(n.getEdges(),function(l){e.updateOneEdgeKeyShape(l,a)}),G(n.getNodes(),function(l){e.updateOneNodeDelegateShape(l,a)});var o=n.getCombos();if(o&&o.length){var s=a.find(function(l){return l.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){e.destroyed||(G(o,function(l){e.updateOneComboKeyShape(l,s)}),s==null||s.sort(),s==null||s.toBack(),e.updateCanvas())},250)}this.clearDestroyedShapes()},t.prototype.clearDestroyedShapes=function(){var e=this.get("itemMap")||{},n=Object.keys(e);if(!(!n||n.length===0))for(var i=n.length-1;i>=0;i--){var a=e[n[i]],o=a.exist;a.exist=!1,o||(a.remove(),delete e[n[i]])}},t.prototype.updateOneEdgeKeyShape=function(e,n){var i=this.get("itemMap")||{},a=i[e.get("id")];if(a){var o=e.get("keyShape").attr("path");a.attr("path",o)}else a=e.get("keyShape").clone(),n.add(a);e.isVisible()?a.show():a.hide(),a.exist=!0,i[e.get("id")]=a,this.set("itemMap",i)},t.prototype.updateOneNodeDelegateShape=function(e,n){var i=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[e.get("id")],s=e.getBBox();if(o){var l={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(l)}else o=n.addShape("rect",{attrs:KM({x:s.minX,y:s.minY,width:s.width,height:s.height},i),name:"minimap-node-shape"});e.isVisible()?o.show():o.hide(),o.exist=!0,a[e.get("id")]=o,this.set("itemMap",a)},t.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},t.prototype.initContainer=function(){var e=this,n=e.get("graph"),i=e.get("size"),a=e.get("className"),o=e.get("container"),s=Qn("<div class='"+a+"' style='width: "+i[0]+"px; height: "+i[1]+"px; overflow: hidden'></div>");ot(o)&&(o=document.getElementById(o)),o?o.appendChild(s):n.get("container").appendChild(s),e.set("container",s);var l=Qn('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(l),l.addEventListener("dragenter",function(f){f.preventDefault()}),l.addEventListener("dragover",function(f){f.preventDefault()});var u,c=n.get("renderer");c===$j?u=new zv({container:l,width:i[0],height:i[1]}):u=new _u({container:l,width:i[0],height:i[1]}),e.set("canvas",u),e.updateCanvas()},t.prototype.updateCanvas=function(){if(!this.destroyed){var e=this.get("refresh");if(!!e){var n=this.get("graph");if(!n.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var i=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case WNe:this.updateGraphShapes();break;case jNe:this.updateKeyShapes();break;case YNe:this.updateDelegateShapes();break}var l=a.get("children")[0];if(!!l){l.resetMatrix();var u=l.getCanvasBBox(),c=n.get("canvas").getCanvasBBox(),f=n.getZoom()||1,d=c.width/f,h=c.height/f;Number.isFinite(u.width)&&(d=Bj(u.width,d),h=Bj(u.height,h)),d+=2*s,h+=2*s;var v=Math.min(i[0]/d,i[1]/h),p=[1,0,0,0,1,0,0,0,1],g=0,m=0;Number.isFinite(u.minX)&&(g=-u.minX),Number.isFinite(u.minY)&&(m=-u.minY);var y=(i[0]-(d-2*s)*v)/2,b=(i[1]-(h-2*s)*v)/2;p=HNe(p,[["t",g,m],["s",v,v],["t",y,b]]),l.setMatrix(p),this.set("ratio",v),this.set("totaldx",y+g*v),this.set("totaldy",b+m*v),this.set("dx",y),this.set("dy",b),this.updateViewport()}}}}}},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.getViewport=function(){return this.get("viewport")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.destroy=function(){this.get("canvas").destroy();var e=this.get("container");e.parentNode.removeChild(e)},t}(gs),qNe=XNe,KNe=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();function jl(r,t,e){var n=r.x-t.x,i=r.y-t.y;return!e||Math.abs(n)>e||Math.abs(i)>e?Math.sqrt(n*n+i*i):e}function ZNe(r,t){return r.x*t.x+r.y*t.y}function zj(r,t){var e=(t.source.y-t.target.y)/(t.source.x-t.target.x),n=(e*e*t.source.x+e*(r.y-t.source.y)+r.x)/(e*e+1),i=e*(n-t.source.x)+t.source.y;return{x:n,y:i}}var QNe=function(r){KNe(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},t.prototype.init=function(){var e=this.get("graph"),n=this.get("onTick"),i=function(){n&&n(),e.refreshPositions()};this.set("tick",i)},t.prototype.bundling=function(e){var n=this;if(n.set("data",e),!n.isTicking()){var i=e.edges||[],a=e.nodes||[],o={},s=!1;if(a.forEach(function(x){(x.x===null||!x.y===null||x.x===void 0||!x.y===void 0)&&(s=!0),o[x.id]=x}),s)throw new Error("please layout the graph or assign x and y for nodes first");n.set("nodeIdMap",o);var l=n.get("divisions"),u=n.get("divRate"),c=n.divideEdges(l);n.set("edgePoints",c);var f=n.getEdgeBundles();n.set("edgeBundles",f);for(var d=n.get("cycles"),h=n.get("iterations"),v=n.get("iterRate"),p=n.get("lambda"),g=0;g<d;g++){for(var m=function(w){var S=[];i.forEach(function(C,_){if(C.source!==C.target){var T=o[C.source],E=o[C.target];S[_]=n.getEdgeForces({source:T,target:E},_,l,p);for(var k=0;k<l+1;k++)c[_][k].x+=S[_][k].x,c[_][k].y+=S[_][k].y}})},y=0;y<h;y++)m(y);p=p/2,l*=u,h*=v,c=n.divideEdges(l),n.set("edgePoints",c)}i.forEach(function(x,w){x.source!==x.target&&(x.type="polyline",x.controlPoints=c[w].slice(1,c[w].length-1))});var b=n.get("graph");b.refresh()}},t.prototype.updateBundling=function(e){var n=this,i=e.data;if(i&&n.set("data",i),n.get("ticking")&&n.set("ticking",!1),Object.keys(e).forEach(function(o){n.set(o,e[o])}),e.onTick){var a=this.get("graph");n.set("tick",function(){e.onTick(),a.refresh()})}n.bundling(i)},t.prototype.divideEdges=function(e){var n=this,i=n.get("data").edges,a=n.get("nodeIdMap"),o=n.get("edgePoints");return(!o||o===void 0)&&(o=[]),i.forEach(function(s,l){(!o[l]||o[l]===void 0)&&(o[l]=[]);var u=a[s.source],c=a[s.target];if(e===1)o[l].push({x:u.x,y:u.y}),o[l].push({x:.5*(u.x+c.x),y:.5*(u.y+c.y)}),o[l].push({x:c.x,y:c.y});else{var f=0;!o[l]||o[l]===[]?f=jl({x:u.x,y:u.y},{x:c.x,y:c.y}):f=n.getEdgeLength(o[l]);var d=f/(e+1),h=d,v=[{x:u.x,y:u.y}];o[l].forEach(function(p,g){if(g!==0){for(var m=jl(p,o[l][g-1]);m>h;){var y=h/m,b={x:o[l][g-1].x,y:o[l][g-1].y};b.x+=y*(p.x-o[l][g-1].x),b.y+=y*(p.y-o[l][g-1].y),v.push(b),m-=h,h=d}h-=m}}),v.push({x:c.x,y:c.y}),o[l]=v}}),o},t.prototype.getEdgeLength=function(e){var n=0;return e.forEach(function(i,a){a!==0&&(n+=jl(i,e[a-1]))}),n},t.prototype.getEdgeBundles=function(){var e=this,n=e.get("data"),i=n.edges||[],a=e.get("bundleThreshold"),o=e.get("nodeIdMap"),s=e.get("edgeBundles");return s||(s=[]),i.forEach(function(l,u){(!s[u]||s[u]===void 0)&&(s[u]=[])}),i.forEach(function(l,u){var c=o[l.source],f=o[l.target];i.forEach(function(d,h){if(!(h<=u)){var v=o[d.source],p=o[d.target],g=e.getBundleScore({source:c,target:f},{source:v,target:p});g>=a&&(s[u].push(h),s[h].push(u))}})}),s},t.prototype.getBundleScore=function(e,n){var i=this;e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,n.vx=n.target.x-n.source.x,n.vy=n.target.y-n.source.y,e.length=jl({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y}),n.length=jl({x:n.source.x,y:n.source.y},{x:n.target.x,y:n.target.y});var a=i.getAngleScore(e,n),o=i.getScaleScore(e,n),s=i.getPositionScore(e,n),l=i.getVisibilityScore(e,n);return a*o*s*l},t.prototype.getAngleScore=function(e,n){var i=ZNe({x:e.vx,y:e.vy},{x:n.vx,y:n.vy});return i/(e.length*n.length)},t.prototype.getScaleScore=function(e,n){var i=(e.length+n.length)/2,a=2/(i/Math.min(e.length,n.length)+Math.max(e.length,n.length)/i);return a},t.prototype.getPositionScore=function(e,n){var i=(e.length+n.length)/2,a={x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2},o={x:(n.source.x+n.target.x)/2,y:(n.source.y+n.target.y)/2},s=jl(a,o);return i/(i+s)},t.prototype.getVisibilityScore=function(e,n){var i=this.getEdgeVisibility(e,n),a=this.getEdgeVisibility(n,e);return i<a?i:a},t.prototype.getEdgeVisibility=function(e,n){var i=zj(n.source,e),a=zj(n.target,e),o={x:(i.x+a.x)/2,y:(i.y+a.y)/2},s={x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2};return Math.max(0,1-2*jl(o,s)/jl(i,a))},t.prototype.getEdgeForces=function(e,n,i,a){for(var o=this,s=o.get("edgePoints"),l=o.get("K"),u=l/(jl(e.source,e.target)*(i+1)),c=[{x:0,y:0}],f=1;f<i;f++){var d={x:0,y:0},h=o.getSpringForce({pre:s[n][f-1],cur:s[n][f],next:s[n][f+1]},u),v=o.getElectrostaticForce(f,n);d.x=a*(h.x+v.x),d.y=a*(h.y+v.y),c.push(d)}return c.push({x:0,y:0}),c},t.prototype.getSpringForce=function(e,n){var i=e.pre.x+e.next.x-2*e.cur.x,a=e.pre.y+e.next.y-2*e.cur.y;return i*=n,a*=n,{x:i,y:a}},t.prototype.getElectrostaticForce=function(e,n){var i=this,a=i.get("eps"),o=i.get("edgeBundles"),s=i.get("edgePoints"),l=o[n],u={x:0,y:0};return l.forEach(function(c){var f={x:s[c][e].x-s[n][e].x,y:s[c][e].y-s[n][e].y};if(Math.abs(f.x)>a||Math.abs(f.y)>a){var d=jl(s[c][e],s[n][e]),h=1/d;u.x+=f.x*h,u.y+=f.y*h}}),u},t.prototype.isTicking=function(){return this.get("ticking")},t.prototype.getSimulation=function(){return this.get("forceSimulation")},t.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),r.prototype.destroy.call(this)},t}(gs),JNe=QNe,eBe=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ZM=globalThis&&globalThis.__assign||function(){return ZM=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ZM.apply(this,arguments)},CS=.05,Gj={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},tBe=function(r){eBe(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:Or(Gj),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},t.prototype.getEvents=function(){var e;switch(this.get("trigger")){case"click":e={click:"magnify"};break;case"drag":e={click:"createDelegate"};break;default:e={mousemove:"magnify"};break}return e},t.prototype.init=function(){var e=this,n=e.get("r");e.set("cachedMagnifiedModels",[]),e.set("cachedOriginPositions",{}),e.set("r2",n*n);var i=e.get("d");e.set("molecularParam",(i+1)*n)},t.prototype.createDelegate=function(e){var n=this,i=this,a=i.get("delegate");(!a||a.destroyed)&&(i.magnify(e),a=i.get("delegate"),a.on("dragstart",function(o){i.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){i.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){i.scaleRByWheel(o)}))},t.prototype.scaleRByWheel=function(e){var n=this;if(!(!e||!e.originalEvent)){e.preventDefault&&e.preventDefault();var i=n.get("graph"),a,o=n.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,l=s||i.getPointByClient(e.clientX,e.clientY);e.originalEvent.wheelDelta<0?a=1-CS:a=1/(1-CS);var u=n.get("maxR"),c=n.get("minR"),f=n.get("r");(f>(u||i.get("height"))&&a>1||f<(c||i.get("height")*.05)&&a<1)&&(a=1),f*=a,n.set("r",f),n.set("r2",f*f);var d=n.get("d");n.set("molecularParam",(d+1)*f),n.set("delegateCenterDiff",void 0),n.magnify(e,l)}},t.prototype.scaleRByDrag=function(e){var n=this;if(!!e){var i=n.get("dragPrePos"),a=n.get("graph"),o,s=a.getPointByClient(e.clientX,e.clientY);e.x-i.x<0?o=1-CS:o=1/(1-CS);var l=n.get("maxR"),u=n.get("minR"),c=n.get("r");(c>(l||a.get("height"))&&o>1||c<(u||a.get("height")*.05)&&o<1)&&(o=1),c*=o,n.set("r",c),n.set("r2",c*c);var f=n.get("d");n.set("molecularParam",(f+1)*c),n.magnify(e,s),n.set("dragPrePos",{x:e.x,y:e.y})}},t.prototype.scaleDByWheel=function(e){var n=this;if(!(!e&&!e.originalEvent)){e.preventDefault&&e.preventDefault();var i=0;e.originalEvent.wheelDelta<0?i=-.1:i=.1;var a=n.get("d"),o=a+i,s=n.get("maxD"),l=n.get("minD");if(o<s&&o>l){n.set("d",o);var u=n.get("r");n.set("molecularParam",(o+1)*u);var c=n.get("delegate"),f=c?{x:c.attr("x"),y:c.attr("y")}:void 0;n.set("delegateCenterDiff",void 0),n.magnify(e,f)}}},t.prototype.scaleDByDrag=function(e){var n=this,i=n.get("dragPrePos"),a=e.x-i.x>0?.1:-.1,o=n.get("d"),s=o+a,l=n.get("maxD"),u=n.get("minD");if(s<l&&s>u){n.set("d",s);var c=n.get("r");n.set("molecularParam",(s+1)*c),n.magnify(e)}n.set("dragPrePos",{x:e.x,y:e.y})},t.prototype.magnify=function(e,n){var i=this;i.restoreCache();var a=i.get("graph"),o=i.get("cachedMagnifiedModels"),s=i.get("cachedOriginPositions"),l=i.get("showLabel"),u=i.get("r"),c=i.get("r2"),f=i.get("d"),d=i.get("molecularParam"),h=a.getNodes(),v=h.length,p=n?{x:n.x,y:n.y}:{x:e.x,y:e.y};i.get("dragging")&&(i.get("trigger")==="mousemove"||i.get("trigger")==="click")&&(p=i.get("cacheCenter"));var g=i.get("delegateCenterDiff");g&&(p.x+=g.x,p.y+=g.y),i.updateDelegate(p,u);for(var m=0;m<v;m++){var y=h[m].getModel(),b=y.x,x=y.y;if(!(isNaN(b)||isNaN(x))){var w=(b-p.x)*(b-p.x)+(x-p.y)*(x-p.y);if(!isNaN(w)&&w<c&&w!==0){var S=Math.sqrt(w),C=d*S/(f*S+u),_=(b-p.x)/S,T=(x-p.y)/S;if(y.x=_*C+p.x,y.y=T*C+p.y,s[y.id]||(s[y.id]={x:b,y:x,texts:[]}),o.push(y),l&&2*S<u)for(var E=h[m],k=E.getContainer(),I=k.getChildren(),P=I.length,F=0;F<P;F++){var $=I[F];$.get("type")==="text"&&(s[y.id].texts.push({visible:$.get("visible"),shape:$}),$.set("visible",!0))}}}}a.refreshPositions()},t.prototype.restoreCache=function(){for(var e=this,n=e.get("cachedMagnifiedModels"),i=e.get("cachedOriginPositions"),a=n.length,o=0;o<a;o++){var s=n[o],l=s.id,u=i[l];s.x=u.x,s.y=u.y;for(var c=u.texts.length,f=0;f<c;f++){var d=u.texts[f];d.shape.set("visible",d.visible)}}e.set("cachedMagnifiedModels",[]),e.set("cachedOriginPositions",{})},t.prototype.updateParams=function(e){var n=this,i=e.r,a=e.d,o=e.trigger,s=e.minD,l=e.maxD,u=e.minR,c=e.maxR,f=e.scaleDBy,d=e.scaleRBy;isNaN(e.r)||(n.set("r",i),n.set("r2",i*i)),isNaN(a)||n.set("d",a),isNaN(l)||n.set("maxD",l),isNaN(s)||n.set("minD",s),isNaN(c)||n.set("maxR",c),isNaN(u)||n.set("minR",u);var h=n.get("d"),v=n.get("r");if(n.set("molecularParam",(h+1)*v),(o==="mousemove"||o==="click"||o==="drag")&&n.set("trigger",o),f==="drag"||f==="wheel"||f==="unset"){n.set("scaleDBy",f),n.get("delegate").remove(),n.get("delegate").destroy();var p=n.get("dPercentText");p&&(p.remove(),p.destroy())}if(d==="drag"||d==="wheel"||d==="unset"){n.set("scaleRBy",d),n.get("delegate").remove(),n.get("delegate").destroy();var p=n.get("dPercentText");p&&(p.remove(),p.destroy())}},t.prototype.updateDelegate=function(e,n){var i=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var l=o.get("group"),u=a.get("delegateStyle")||Gj;s=l.addShape("circle",{attrs:ZM({r:n/1.5,x:e.x,y:e.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(v){a.scaleRByWheel(v)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(v){a.set("dragging",!0),a.set("cacheCenter",{x:v.x,y:v.y}),a.set("dragPrePos",{x:v.x,y:v.y})}),s.on("drag",function(v){a.scaleRByDrag(v)}),s.on("dragend",function(v){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(v){i.scaleDByWheel(v)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(v){a.set("dragging",!0),a.set("cacheCenter",{x:v.x,y:v.y}),a.set("dragPrePos",{x:v.x,y:v.y})}),s.on("drag",function(v){i.scaleDByDrag(v)}),s.on("dragend",function(v){a.set("dragging",!1)})))}else s.attr({x:e.x,y:e.y,r:n/1.5});if(a.get("showDPercent")){var c=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),f=a.get("dPercentText"),d=e.y+n/1.5+16;if(!f||f.destroyed){var h=o.get("group");f=h.addShape("text",{attrs:{text:c+"%",x:e.x,y:d,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",f)}else f.attr({text:c+"%",x:e.x,y:d})}a.set("delegate",s)},t.prototype.clear=function(){var e=this.get("graph");this.restoreCache(),e.refreshPositions();var n=this.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy());var i=this.get("dPercentText");i&&!i.destroyed&&(i.remove(),i.destroy())},t.prototype.destroy=function(){this.clear()},t}(gs),rBe=tBe,nBe=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Uj=.05;typeof document!="undefined"&&SS(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var iBe=function(t){if(!t)return[];if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;){if(e.push(n),n.tagName==="HTML")return e.push(document,window),e;n=n.parentElement}return e},aBe=function(r){nBe(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(n){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},t.prototype.init=function(){var e=this,n=this.get("graph"),i=this.get("getContent"),a=i(n),o=a;ot(a)&&(o=Qn(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var l=this.get("container");l||(l=this.get("graph").get("container")),ot(l)&&(l=document.getElementById(l)),l.appendChild(o),this.set("toolBar",o);var u=this.get("handleClick");o.addEventListener("click",function(f){var d=iBe(f).filter(function(v){return v.nodeName==="LI"});if(d.length!==0){var h=d[0].getAttribute("code");!h||(u?u(h,n):e.handleDefaultOperator(h,n))}});var c=this.get("position");c&&Vr(o,{top:c.y+"px",left:c.x+"px"}),this.bindUndoRedo()},t.prototype.bindUndoRedo=function(){var e=this.get("graph"),n=document.querySelector('.g6-component-toolbar li[code="undo"]'),i=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!n||!i||!a||!o||e.on("stackchange",function(s){var l=s.undoStack,u=s.redoStack,c=l.length,f=u.length;c===1?(n.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(n.removeAttribute("style"),i.removeAttribute("style")),f===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))})},t.prototype.undo=function(){var e=this.get("graph"),n=e.getUndoStack();if(!(!n||n.length===1)){var i=n.pop();if(i){var a=i.action;e.pushStack(a,Or(i.data),"redo");var o=i.data.before;if(a==="add"&&(o=i.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var c=e.findById(u.id);u.visible?e.showItem(c,!1):e.hideItem(c,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){e.updateItem(u.id,u,!1)})});break;case"changedata":e.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var c=u.itemType;delete u.itemType,e.addItem(c,u,!1)})});break}case"add":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){e.removeItem(u.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){e.updateComboTree(u.id,u.parentId,!1)})});break}}}},t.prototype.redo=function(){var e=this.get("graph"),n=e.getRedoStack();if(!(!n||n.length===0)){var i=n.pop();if(i){var a=i.action,o=i.data.after;if(e.pushStack(a,Or(i.data)),a==="delete"&&(o=i.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var c=e.findById(u.id);u.visible?e.showItem(c,!1):e.hideItem(c,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){e.updateItem(u.id,u,!1)})});break;case"changedata":e.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(s){e.removeItem(s.id,!1)}),o.nodes&&o.nodes.forEach(function(s){e.removeItem(s.id,!1)}),o.combos&&o.combos.forEach(function(s){e.removeItem(s.id,!1)});break;case"add":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var c=u.itemType;delete u.itemType,e.addItem(c,u,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){e.updateComboTree(u.id,u.parentId,!1)})});break}}}},t.prototype.handleDefaultOperator=function(e,n){var i=n.getZoom();switch(e){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":{var a=1/(1-Uj*this.get("zoomSensitivity")),o=this.get("maxZoom")||n.get("maxZoom");if(a*i>o)return;n.zoomTo(i*a);break}case"zoomIn":{var s=1-Uj*this.get("zoomSensitivity"),l=this.get("minZoom")||n.get("minZoom");if(s*i<l)return;n.zoomTo(i*s);break}case"realZoom":n.zoomTo(1);break;case"autoZoom":n.fitView([20,20]);break}},t.prototype.destroy=function(){var e=this.get("toolBar");if(e){var n=this.get("container");n||(n=this.get("graph").get("container")),ot(n)&&(n=document.getElementById(n)),n.removeChild(e)}var i=this.get("handleClick");i&&e.removeEventListener("click",i)},t}(gs),oBe=aBe,sBe=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();typeof document!="undefined"&&SS(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var lBe=function(r){sBe(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(n){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`+n.item.getType()+`</h4>
          <span class='tooltip-id'>ID\uFF1A`+n.item.getID()+`</span>
        `},shouldBegin:function(n){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},t.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},t.prototype.init=function(){var e=this,n=e.get("className")||"g6-component-tooltip",i=Qn("<div class="+n+"></div>"),a=e.get("container");a||(a=e.get("graph").get("container")),ot(a)&&(a=document.getElementById(a)),Vr(i,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(i),e.get("trigger")!=="click"&&(i.addEventListener("mouseenter",function(o){Vr(i,{visibility:"visible",display:"unset"})}),i.addEventListener("mouseleave",function(o){e.hideTooltip()})),e.set("tooltip",i)},t.prototype.onClick=function(e){var n=this.get("itemTypes");if(!(e.item&&e.item.getType&&n.indexOf(e.item.getType())===-1)){var i=e.item,a=this.get("graph");this.currentTarget===i?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:e.item,action:"hide"})):(this.currentTarget=i,this.showTooltip(e),a.emit("tooltipchange",{item:e.item,action:"show"}))}},t.prototype.onMouseEnter=function(e){var n=this.get("itemTypes");if(!(e.item&&e.item.getType&&n.indexOf(e.item.getType())===-1)){var i=e.item,a=this.get("graph");this.currentTarget=i,this.showTooltip(e),a.emit("tooltipchange",{item:e.item,action:"show"})}},t.prototype.onMouseMove=function(e){var n=this.get("itemTypes");e.item&&e.item.getType&&n.indexOf(e.item.getType())===-1||!this.currentTarget||e.item!==this.currentTarget||this.showTooltip(e)},t.prototype.onMouseLeave=function(){this.hideTooltip();var e=this.get("graph");e.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},t.prototype.showTooltip=function(e){if(!!e.item){var n=this.get("itemTypes");if(!(e.item.getType&&n.indexOf(e.item.getType())===-1)){var i=this.get("tooltip"),a=this.get("getContent"),o=a(e);ot(o)?i.innerHTML=o:i.innerHTML=o.outerHTML,this.updatePosition(e)}}},t.prototype.hideTooltip=function(){var e=this.get("tooltip");e&&Vr(e,{visibility:"hidden",display:"none"})},t.prototype.updatePosition=function(e){var n=this.get("shouldBegin"),i=this.get("tooltip");if(!n(e)){Vr(i,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),l=this.get("offsetX")||0,u=this.get("offsetY")||0,c=a.getPointByClient(e.clientX,e.clientY),f=this.get("fixToNode"),d=e.item;if(d.getType&&d.getType()==="node"&&f&&Qe(f)&&f.length>=2){var h=d.getBBox();c={x:h.minX+h.width*f[0],y:h.minY+h.height*f[1]}}var v=a.getCanvasByPoint(c.x,c.y),p=v.x,g=v.y,m=a.getContainer(),y={x:p+m.offsetLeft+l,y:g+m.offsetTop+u};Vr(i,{visibility:"visible",display:"unset"});var b=i.getBoundingClientRect();p+b.width+l>o&&(y.x-=b.width+l),g+b.height+u>s&&(y.y-=b.height+u),Vr(i,{left:y.x+"px",top:y.y+"px"})},t.prototype.hide=function(){this.onMouseLeave()},t.prototype.destroy=function(){var e=this.get("tooltip");if(e){var n=this.get("container");n||(n=this.get("graph").get("container")),ot(n)&&(n=document.getElementById(n)),n.removeChild(e)}},t}(gs),uBe=lBe,Vj={};function cBe(r){return Vj[r]}function Yl(r,t){Vj[r]=t}var QM=function(){function r(t){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=t,this.initCfg(),this.init()}return r.prototype.translate=function(t){return t},r.prototype.change=function(t){jt(this.__cfg__,t),this.init()},r.prototype.clone=function(){return this.constructor(this.__cfg__)},r.prototype.getTicks=function(){var t=this;return Kn(this.ticks,function(e,n){return an(e)?e:{text:t.getText(e,n),tickValue:e,value:t.scale(e)}})},r.prototype.getText=function(t,e){var n=this.formatter,i=n?n(t,e):t;return nt(i)||!Kt(i.toString)?"":i.toString()},r.prototype.getConfig=function(t){return this.__cfg__[t]},r.prototype.init=function(){jt(this,this.__cfg__),this.setDomain(),co(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},r.prototype.initCfg=function(){},r.prototype.setDomain=function(){},r.prototype.calculateTicks=function(){var t=this.tickMethod,e=[];if(ot(t)){var n=cBe(t);if(!n)throw new Error("There is no method to to calculate ticks!");e=n(this)}else Kt(t)&&(e=t(this));return e},r.prototype.rangeMin=function(){return this.range[0]},r.prototype.rangeMax=function(){return this.range[1]},r.prototype.calcPercent=function(t,e,n){return zt(t)?(t-e)/(n-e):NaN},r.prototype.calcValue=function(t,e,n){return e+t*(n-e)},r}(),bp=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="cat",e.isCategory=!0,e}return t.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var e=0;e<this.values.length;e++)this.translateIndexMap.set(this.values[e],e)}},t.prototype.translate=function(e){this.buildIndexMap();var n=this.translateIndexMap.get(e);return n===void 0&&(n=zt(e)?e:NaN),n},t.prototype.scale=function(e){var n=this.translate(e),i=this.calcPercent(n,this.min,this.max);return this.calcValue(i,this.rangeMin(),this.rangeMax())},t.prototype.invert=function(e){var n=this.max-this.min,i=this.calcPercent(e,this.rangeMin(),this.rangeMax()),a=Math.round(n*i)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},t.prototype.getText=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=e;return zt(e)&&!this.values.includes(e)&&(a=this.values[a]),r.prototype.getText.apply(this,oi([a],n,!1))},t.prototype.initCfg=function(){this.tickMethod="cat"},t.prototype.setDomain=function(){if(nt(this.getConfig("min"))&&(this.min=0),nt(this.getConfig("max"))){var e=this.values.length;this.max=e>1?e-1:e}this.translateIndexMap&&(this.translateIndexMap=void 0)},t}(QM),Hj=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Zc="[1-9]\\d?",Qc="\\d\\d",fBe="\\d{3}",dBe="\\d{4}",Zy="[^\\s]+",Wj=/\[([^]*?)\]/gm;function jj(r,t){for(var e=[],n=0,i=r.length;n<i;n++)e.push(r[n].substr(0,t));return e}var Yj=function(r){return function(t,e){var n=e[r].map(function(a){return a.toLowerCase()}),i=n.indexOf(t.toLowerCase());return i>-1?i:null}};function Jc(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var n=0,i=t;n<i.length;n++){var a=i[n];for(var o in a)r[o]=a[o]}return r}var Xj=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],qj=["January","February","March","April","May","June","July","August","September","October","November","December"],hBe=jj(qj,3),vBe=jj(Xj,3),JM={dayNamesShort:vBe,dayNames:Xj,monthNamesShort:hBe,monthNames:qj,amPm:["am","pm"],DoFn:function(r){return r+["th","st","nd","rd"][r%10>3?0:(r-r%10!=10?1:0)*r%10]}},ES=Jc({},JM),Kj=function(r){return ES=Jc(ES,r)},Zj=function(r){return r.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Vo=function(r,t){for(t===void 0&&(t=2),r=String(r);r.length<t;)r="0"+r;return r},pBe={D:function(r){return String(r.getDate())},DD:function(r){return Vo(r.getDate())},Do:function(r,t){return t.DoFn(r.getDate())},d:function(r){return String(r.getDay())},dd:function(r){return Vo(r.getDay())},ddd:function(r,t){return t.dayNamesShort[r.getDay()]},dddd:function(r,t){return t.dayNames[r.getDay()]},M:function(r){return String(r.getMonth()+1)},MM:function(r){return Vo(r.getMonth()+1)},MMM:function(r,t){return t.monthNamesShort[r.getMonth()]},MMMM:function(r,t){return t.monthNames[r.getMonth()]},YY:function(r){return Vo(String(r.getFullYear()),4).substr(2)},YYYY:function(r){return Vo(r.getFullYear(),4)},h:function(r){return String(r.getHours()%12||12)},hh:function(r){return Vo(r.getHours()%12||12)},H:function(r){return String(r.getHours())},HH:function(r){return Vo(r.getHours())},m:function(r){return String(r.getMinutes())},mm:function(r){return Vo(r.getMinutes())},s:function(r){return String(r.getSeconds())},ss:function(r){return Vo(r.getSeconds())},S:function(r){return String(Math.round(r.getMilliseconds()/100))},SS:function(r){return Vo(Math.round(r.getMilliseconds()/10),2)},SSS:function(r){return Vo(r.getMilliseconds(),3)},a:function(r,t){return r.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(r,t){return r.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(r){var t=r.getTimezoneOffset();return(t>0?"-":"+")+Vo(Math.floor(Math.abs(t)/60)*100+Math.abs(t)%60,4)},Z:function(r){var t=r.getTimezoneOffset();return(t>0?"-":"+")+Vo(Math.floor(Math.abs(t)/60),2)+":"+Vo(Math.abs(t)%60,2)}},Qj=function(r){return+r-1},Jj=[null,Zc],e7=[null,Zy],t7=["isPm",Zy,function(r,t){var e=r.toLowerCase();return e===t.amPm[0]?0:e===t.amPm[1]?1:null}],r7=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(r){var t=(r+"").match(/([+-]|\d\d)/gi);if(t){var e=+t[1]*60+parseInt(t[2],10);return t[0]==="+"?e:-e}return 0}],gBe={D:["day",Zc],DD:["day",Qc],Do:["day",Zc+Zy,function(r){return parseInt(r,10)}],M:["month",Zc,Qj],MM:["month",Qc,Qj],YY:["year",Qc,function(r){var t=new Date,e=+(""+t.getFullYear()).substr(0,2);return+(""+(+r>68?e-1:e)+r)}],h:["hour",Zc,void 0,"isPm"],hh:["hour",Qc,void 0,"isPm"],H:["hour",Zc],HH:["hour",Qc],m:["minute",Zc],mm:["minute",Qc],s:["second",Zc],ss:["second",Qc],YYYY:["year",dBe],S:["millisecond","\\d",function(r){return+r*100}],SS:["millisecond",Qc,function(r){return+r*10}],SSS:["millisecond",fBe],d:Jj,dd:Jj,ddd:e7,dddd:e7,MMM:["month",Zy,Yj("monthNamesShort")],MMMM:["month",Zy,Yj("monthNames")],a:t7,A:t7,ZZ:r7,Z:r7},_S={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},n7=function(r){return Jc(_S,r)},i7=function(r,t,e){if(t===void 0&&(t=_S.default),e===void 0&&(e={}),typeof r=="number"&&(r=new Date(r)),Object.prototype.toString.call(r)!=="[object Date]"||isNaN(r.getTime()))throw new Error("Invalid Date pass to format");t=_S[t]||t;var n=[];t=t.replace(Wj,function(a,o){return n.push(o),"@@@"});var i=Jc(Jc({},ES),e);return t=t.replace(Hj,function(a){return pBe[a](r,i)}),t.replace(/@@@/g,function(){return n.shift()})};function a7(r,t,e){if(e===void 0&&(e={}),typeof t!="string")throw new Error("Invalid format in fecha parse");if(t=_S[t]||t,r.length>1e3)return null;var n=new Date,i={year:n.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=t.replace(Wj,function(x,w){return o.push(Zj(w)),"@@@"}),l={},u={};s=Zj(s).replace(Hj,function(x){var w=gBe[x],S=w[0],C=w[1],_=w[3];if(l[S])throw new Error("Invalid format. "+S+" specified twice in format");return l[S]=!0,_&&(u[_]=!0),a.push(w),"("+C+")"}),Object.keys(u).forEach(function(x){if(!l[x])throw new Error("Invalid format. "+x+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=r.match(new RegExp(s,"i"));if(!c)return null;for(var f=Jc(Jc({},ES),e),d=1;d<c.length;d++){var h=a[d-1],v=h[0],p=h[2],g=p?p(c[d],f):+c[d];if(g==null)return null;i[v]=g}i.isPm===1&&i.hour!=null&&+i.hour!=12?i.hour=+i.hour+12:i.isPm===0&&+i.hour==12&&(i.hour=0);for(var m=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond),y=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],d=0,b=y.length;d<b;d++)if(l[y[d][0]]&&i[y[d][0]]!==m[y[d][1]]())return null;return i.timezoneOffset==null?m:new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond))}var o7={format:i7,parse:a7,defaultI18n:JM,setGlobalDateI18n:Kj,setGlobalDateMasks:n7},mBe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:o7,assign:Jc,format:i7,parse:a7,defaultI18n:JM,setGlobalDateI18n:Kj,setGlobalDateMasks:n7});function yBe(r){return function(t,e,n,i){for(var a=nt(n)?0:n,o=nt(i)?t.length:i;a<o;){var s=a+o>>>1;r(t[s])>e?o=s:a=s+1}return a}}var s7="format";function l7(r,t){var e=mBe[s7]||o7[s7];return e(r,t)}function TS(r){return ot(r)&&(r.indexOf("T")>0?r=new Date(r).getTime():r=new Date(r.replace(/-/gi,"/")).getTime()),hT(r)&&(r=r.getTime()),r}var cl=1e3,Wd=60*cl,jd=60*Wd,$u=24*jd,Qy=$u*31,u7=$u*365,Jy=[["HH:mm:ss",cl],["HH:mm:ss",cl*10],["HH:mm:ss",cl*30],["HH:mm",Wd],["HH:mm",Wd*10],["HH:mm",Wd*30],["HH",jd],["HH",jd*6],["HH",jd*12],["YYYY-MM-DD",$u],["YYYY-MM-DD",$u*4],["YYYY-WW",$u*7],["YYYY-MM",Qy],["YYYY-MM",Qy*4],["YYYY-MM",Qy*6],["YYYY",$u*380]];function bBe(r,t,e){var n=(t-r)/e,i=yBe(function(o){return o[1]})(Jy,n)-1,a=Jy[i];return i<0?a=Jy[0]:i>=Jy.length&&(a=qi(Jy)),a}var xBe=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="timeCat",e}return t.prototype.translate=function(e){e=TS(e);var n=this.values.indexOf(e);return n===-1&&(zt(e)&&e<this.values.length?n=e:n=NaN),n},t.prototype.getText=function(e,n){var i=this.translate(e);if(i>-1){var a=this.values[i],o=this.formatter;return a=o?o(a,n):l7(a,this.mask),a}return e},t.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},t.prototype.setDomain=function(){var e=this.values;G(e,function(n,i){e[i]=TS(n)}),e.sort(function(n,i){return n-i}),r.prototype.setDomain.call(this)},t}(bp),AS=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.isContinuous=!0,e}return t.prototype.scale=function(e){if(nt(e))return NaN;var n=this.rangeMin(),i=this.rangeMax(),a=this.max,o=this.min;if(a===o)return n;var s=this.getScalePercent(e);return n+s*(i-n)},t.prototype.init=function(){r.prototype.init.call(this);var e=this.ticks,n=Eo(e),i=qi(e);n<this.min&&(this.min=n),i>this.max&&(this.max=i),nt(this.minLimit)||(this.min=n),nt(this.maxLimit)||(this.max=i)},t.prototype.setDomain=function(){var e=uT(this.values),n=e.min,i=e.max;nt(this.min)&&(this.min=n),nt(this.max)&&(this.max=i),this.min>this.max&&(this.min=n,this.max=i)},t.prototype.calculateTicks=function(){var e=this,n=r.prototype.calculateTicks.call(this);return this.nice||(n=ya(n,function(i){return i>=e.min&&i<=e.max})),n},t.prototype.getScalePercent=function(e){var n=this.max,i=this.min;return(e-i)/(n-i)},t.prototype.getInvertPercent=function(e){return(e-this.rangeMin())/(this.rangeMax()-this.rangeMin())},t}(QM),Yd=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}return t.prototype.invert=function(e){var n=this.getInvertPercent(e);return this.min+n*(this.max-this.min)},t.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},t}(AS);function ef(r,t){var e=Math.E,n;return t>=0?n=Math.pow(e,Math.log(t)/r):n=Math.pow(e,Math.log(-t)/r)*-1,n}function Us(r,t){return r===1?1:Math.log(t)/Math.log(r)}function c7(r,t,e){nt(e)&&(e=Math.max.apply(null,r));var n=e;return G(r,function(i){i>0&&i<n&&(n=i)}),n===e&&(n=e/t),n>1&&(n=1),n}var wBe=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="log",e}return t.prototype.invert=function(e){var n=this.base,i=Us(n,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,l=this.positiveMin;if(l){if(e===0)return 0;s=Us(n,l/n);var u=1/(i-s)*o;if(e<u)return e/u*l}else s=Us(n,this.min);var c=(e-a)/o,f=c*(i-s)+s;return Math.pow(n,f)},t.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},t.prototype.setDomain=function(){r.prototype.setDomain.call(this);var e=this.min;if(e<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");e===0&&(this.positiveMin=c7(this.values,this.base,this.max))},t.prototype.getScalePercent=function(e){var n=this.max,i=this.min;if(n===i||e<=0)return 0;var a=this.base,o=this.positiveMin;o&&(i=o*1/a);var s;return e<o?s=e/o/(Us(a,n)-Us(a,i)):s=(Us(a,e)-Us(a,i))/(Us(a,n)-Us(a,i)),s},t}(AS),SBe=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="pow",e}return t.prototype.invert=function(e){var n=this.getInvertPercent(e),i=this.exponent,a=ef(i,this.max),o=ef(i,this.min),s=n*(a-o)+o,l=s>=0?1:-1;return Math.pow(s,i)*l},t.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},t.prototype.getScalePercent=function(e){var n=this.max,i=this.min;if(n===i)return 0;var a=this.exponent,o=(ef(a,e)-ef(a,i))/(ef(a,n)-ef(a,i));return o},t}(AS),CBe=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="time",e}return t.prototype.getText=function(e,n){var i=this.translate(e),a=this.formatter;return a?a(i,n):l7(i,this.mask)},t.prototype.scale=function(e){var n=e;return(ot(n)||hT(n))&&(n=this.translate(n)),r.prototype.scale.call(this,n)},t.prototype.translate=function(e){return TS(e)},t.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},t.prototype.setDomain=function(){var e=this.values,n=this.getConfig("min"),i=this.getConfig("max");if((!nt(n)||!zt(n))&&(this.min=this.translate(this.min)),(!nt(i)||!zt(i))&&(this.max=this.translate(this.max)),e&&e.length){var a=[],o=1/0,s=o,l=0;G(e,function(u){var c=TS(u);if(isNaN(c))throw new TypeError("Invalid Time: "+u+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),l<c&&(l=c),a.push(c)}),e.length>1&&(this.minTickInterval=s-o),nt(n)&&(this.min=o),nt(i)&&(this.max=l)}},t}(Yd),f7=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="quantize",e}return t.prototype.invert=function(e){var n=this.ticks,i=n.length,a=this.getInvertPercent(e),o=Math.floor(a*(i-1));if(o>=i-1)return qi(n);if(o<0)return Eo(n);var s=n[o],l=n[o+1],u=o/(i-1),c=(o+1)/(i-1);return s+(a-u)/(c-u)*(l-s)},t.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},t.prototype.calculateTicks=function(){var e=r.prototype.calculateTicks.call(this);return this.nice||(qi(e)!==this.max&&e.push(this.max),Eo(e)!==this.min&&e.unshift(this.min)),e},t.prototype.getScalePercent=function(e){var n=this.ticks;if(e<Eo(n))return 0;if(e>qi(n))return 1;var i=0;return G(n,function(a,o){if(e>=a)i=o;else return!1}),i/(n.length-1)},t}(AS),EBe=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="quantile",e}return t.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},t}(f7),d7={};function eI(r){return d7[r]}function Xl(r,t){if(eI(r))throw new Error("type '"+r+"' existed.");d7[r]=t}var _Be=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}return t.prototype.calculateTicks=function(){return this.values},t.prototype.scale=function(e){return this.values[0]!==e&&zt(e)?e:this.range[0]},t.prototype.invert=function(e){var n=this.range;return e<n[0]||e>n[1]?NaN:this.values[0]},t}(QM);function xp(r){return Math.abs(r)<1e-15?r:parseFloat(r.toFixed(15))}var TBe=[1,5,2,2.5,4,3],h7=Number.EPSILON*100;function ABe(r,t){return(r%t+t)%t}function kBe(r){return Math.round(r*1e12)/1e12}function MBe(r,t,e,n,i,a){var o=la(t),s=gT(t,r),l=0,u=ABe(n,a);return(u<h7||a-u<h7)&&n<=0&&i>=0&&(l=1),1-s/(o-1)-e+l}function IBe(r,t,e){var n=la(t),i=gT(t,r),a=1;return 1-i/(n-1)-e+a}function PBe(r,t,e,n,i,a){var o=(r-1)/(a-i),s=(t-1)/(Math.max(a,n)-Math.min(e,i));return 2-Math.max(o/s,s/o)}function DBe(r,t){return r>=t?2-(r-1)/(t-1):1}function RBe(r,t,e,n){var i=t-r;return 1-.5*(Math.pow(t-n,2)+Math.pow(r-e,2))/Math.pow(.1*i,2)}function OBe(r,t,e){var n=t-r;if(e>n){var i=(e-n)/2;return 1-Math.pow(i,2)/Math.pow(.1*n,2)}return 1}function LBe(){return 1}function v7(r,t,e,n,i,a){e===void 0&&(e=5),n===void 0&&(n=!0),i===void 0&&(i=TBe),a===void 0&&(a=[.25,.2,.5,.05]);var o=e<0?0:Math.round(e);if(Number.isNaN(r)||Number.isNaN(t)||typeof r!="number"||typeof t!="number"||!o)return{min:0,max:0,ticks:[]};if(t-r<1e-15||o===1)return{min:r,max:t,ticks:[r]};for(var s={score:-2,lmin:0,lmax:0,lstep:0},l=1;l<1/0;){for(var u=0;u<i.length;u+=1){var c=i[u],f=IBe(c,i,l);if(a[0]*f+a[1]+a[2]+a[3]<s.score){l=1/0;break}for(var d=2;d<1/0;){var h=DBe(d,o);if(a[0]*f+a[1]+a[2]*h+a[3]<s.score)break;for(var v=(t-r)/(d+1)/l/c,p=Math.ceil(Math.log10(v));p<1/0;){var g=l*c*Math.pow(10,p),m=OBe(r,t,g*(d-1));if(a[0]*f+a[1]*m+a[2]*h+a[3]<s.score)break;var y=Math.floor(t/g)*l-(d-1)*l,b=Math.ceil(r/g)*l;if(y<=b)for(var x=b-y,w=0;w<=x;w+=1){var S=y+w,C=S*(g/l),_=C+g*(d-1),T=g,E=MBe(c,i,l,C,_,T),k=RBe(r,t,C,_),I=PBe(d,o,r,t,C,_),P=LBe(),F=a[0]*E+a[1]*k+a[2]*I+a[3]*P;F>s.score&&(!n||C<=r&&_>=t)&&(s.lmin=C,s.lmax=_,s.lstep=T,s.score=F)}p+=1}d+=1}}l+=1}var $=xp(s.lmax),R=xp(s.lmin),L=xp(s.lstep),O=Math.floor(kBe(($-R)/L))+1,B=new Array(O);B[0]=xp(R);for(var u=1;u<O;u++)B[u]=xp(B[u-1]+L);return{min:Math.min(r,Eo(B)),max:Math.max(t,qi(B)),ticks:B}}function p7(r){var t=r.values,e=r.tickInterval,n=r.tickCount,i=t;if(zt(e))return ya(i,function(u,c){return c%e==0});var a=r.min,o=r.max;if(nt(a)&&(a=0),nt(o)&&(o=t.length-1),zt(n)&&n<o-a){var s=v7(a,o,n,!1,[1,2,5,3,4,7,6,8,9]).ticks,l=ya(s,function(u){return u>=a&&u<=o});return l.map(function(u){return t[u]})}return t.slice(a,o+1)}function FBe(r){var t=r.min,e=r.max,n=r.nice,i=r.tickCount,a=new NBe;return a.domain([t,e]),n&&a.nice(i),a.ticks(i)}var tI=5,g7=Math.sqrt(50),m7=Math.sqrt(10),y7=Math.sqrt(2),NBe=function(){function r(){this._domain=[0,1]}return r.prototype.domain=function(t){return t?(this._domain=Array.from(t,Number),this):this._domain.slice()},r.prototype.nice=function(t){var e,n;t===void 0&&(t=tI);var i=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],l=this._domain[o],u;return l<s&&(e=[l,s],s=e[0],l=e[1],n=[o,a],a=n[0],o=n[1]),u=kS(s,l,t),u>0?(s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u,u=kS(s,l,t)):u<0&&(s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u,u=kS(s,l,t)),u>0?(i[a]=Math.floor(s/u)*u,i[o]=Math.ceil(l/u)*u,this.domain(i)):u<0&&(i[a]=Math.ceil(s*u)/u,i[o]=Math.floor(l*u)/u,this.domain(i)),this},r.prototype.ticks=function(t){return t===void 0&&(t=tI),BBe(this._domain[0],this._domain[this._domain.length-1],t||tI)},r}();function BBe(r,t,e){var n,i=-1,a,o,s;if(t=+t,r=+r,e=+e,r===t&&e>0)return[r];if((n=t<r)&&(a=r,r=t,t=a),(s=kS(r,t,e))===0||!isFinite(s))return[];if(s>0)for(r=Math.ceil(r/s),t=Math.floor(t/s),o=new Array(a=Math.ceil(t-r+1));++i<a;)o[i]=(r+i)*s;else for(r=Math.floor(r*s),t=Math.ceil(t*s),o=new Array(a=Math.ceil(r-t+1));++i<a;)o[i]=(r-i)/s;return n&&o.reverse(),o}function kS(r,t,e){var n=(t-r)/Math.max(0,e),i=Math.floor(Math.log(n)/Math.LN10),a=n/Math.pow(10,i);return i>=0?(a>=g7?10:a>=m7?5:a>=y7?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=g7?10:a>=m7?5:a>=y7?2:1)}function b7(r,t,e){var n;return e==="ceil"?n=Math.ceil(r/t):e==="floor"?n=Math.floor(r/t):n=Math.round(r/t),n*t}function rI(r,t,e){var n=b7(r,e,"floor"),i=b7(t,e,"ceil");n=Gx(n,e),i=Gx(i,e);for(var a=[],o=n;o<=i;o=o+e){var s=Gx(o,e);a.push(s)}return{min:n,max:i,ticks:a}}function nI(r,t,e){var n,i=r.minLimit,a=r.maxLimit,o=r.min,s=r.max,l=r.tickCount,u=l===void 0?5:l,c=nt(i)?nt(t)?o:t:i,f=nt(a)?nt(e)?s:e:a;if(c>f&&(n=[c,f],f=n[0],c=n[1]),u<=2)return[c,f];for(var d=(f-c)/(u-1),h=[],v=0;v<u;v++)h.push(c+d*v);return h}function $Be(r){var t=r.min,e=r.max,n=r.tickInterval,i=r.minLimit,a=r.maxLimit,o=FBe(r);return!nt(i)||!nt(a)?nI(r,Eo(o),qi(o)):n?rI(t,e,n).ticks:o}function zBe(r){var t=r.min,e=r.max,n=r.tickCount,i=r.nice,a=r.tickInterval,o=r.minLimit,s=r.maxLimit,l=v7(t,e,n,i).ticks;return!nt(o)||!nt(s)?nI(r,Eo(l),qi(l)):a?rI(t,e,a).ticks:l}function GBe(r){var t=r.base,e=r.tickCount,n=r.min,i=r.max,a=r.values,o,s=Us(t,i);if(n>0)o=Math.floor(Us(t,n));else{var l=c7(a,t,i);o=Math.floor(Us(t,l))}for(var u=s-o,c=Math.ceil(u/e),f=[],d=o;d<s+c;d=d+c)f.push(Math.pow(t,d));return n<=0&&f.unshift(0),f}function x7(r,t,e){if(e===void 0&&(e=5),r===t)return{max:t,min:r,ticks:[r]};var n=e<0?0:Math.round(e);if(n===0)return{max:t,min:r,ticks:[]};var i=1.5,a=.5+1.5*i,o=t-r,s=o/n,l=Math.pow(10,Math.floor(Math.log10(s))),u=l;2*l-s<i*(s-u)&&(u=2*l,5*l-s<a*(s-u)&&(u=5*l,10*l-s<i*(s-u)&&(u=10*l)));for(var c=Math.ceil(t/u),f=Math.floor(r/u),d=Math.max(c*u,t),h=Math.min(f*u,r),v=Math.floor((d-h)/u)+1,p=new Array(v),g=0;g<v;g++)p[g]=xp(h+g*u);return{min:h,max:d,ticks:p}}function UBe(r){var t=r.exponent,e=r.tickCount,n=Math.ceil(ef(t,r.max)),i=Math.floor(ef(t,r.min)),a=x7(i,n,e).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,t)*s})}function VBe(r,t){var e=r.length*t;return t===1?r[r.length-1]:t===0?r[0]:e%1!=0?r[Math.ceil(e)-1]:r.length%2==0?(r[e-1]+r[e])/2:r[e]}function HBe(r){var t=r.tickCount,e=r.values;if(!e||!e.length)return[];for(var n=e.slice().sort(function(s,l){return s-l}),i=[],a=0;a<t;a++){var o=a/(t-1);i.push(VBe(n,o))}return i}function WBe(r){var t=r.min,e=r.max,n=r.tickCount,i=r.tickInterval,a=r.minLimit,o=r.maxLimit,s=x7(t,e,n).ticks;return!nt(a)||!nt(o)?nI(r,Eo(s),qi(s)):i?rI(t,e,i).ticks:s}function jBe(r){var t=r.min,e=r.max,n=r.minTickInterval,i=r.tickInterval,a=r.tickCount;if(i)a=Math.ceil((e-t)/i);else{i=bBe(t,e,a)[1];var o=(e-t)/i,s=o/a;s>1&&(i=i*Math.ceil(s)),n&&i<n&&(i=n)}for(var l=[],u=t;u<e+i;u+=i)l.push(u);return l}function YBe(r){var t=p7(r),e=qi(r.values);return e!==qi(t)&&t.push(e),t}function MS(r){return new Date(r).getFullYear()}function XBe(r){return new Date(r,0,1).getTime()}function iI(r){return new Date(r).getMonth()}function qBe(r,t){var e=MS(r),n=MS(t),i=iI(r),a=iI(t);return(n-e)*12+(a-i)%12}function KBe(r,t){return new Date(r,t,1).getTime()}function ZBe(r,t){return Math.ceil((t-r)/$u)}function QBe(r,t){return Math.ceil((t-r)/jd)}function JBe(r,t){return Math.ceil((t-r)/(60*1e3))}function e3e(r){var t=r.min,e=r.max,n=r.minTickInterval,i=r.tickCount,a=r.tickInterval,o=[];a||(a=(e-t)/i,n&&a<n&&(a=n));var s=MS(t);if(a>u7)for(var l=MS(e),u=Math.ceil(a/u7),c=s;c<=l+u;c=c+u)o.push(XBe(c));else if(a>Qy)for(var f=Math.ceil(a/Qy),d=iI(t),h=qBe(t,e),c=0;c<=h+f;c=c+f)o.push(KBe(s,c+d));else if(a>$u)for(var v=new Date(t),p=v.getFullYear(),g=v.getMonth(),m=v.getDate(),y=Math.ceil(a/$u),b=ZBe(t,e),c=0;c<b+y;c=c+y)o.push(new Date(p,g,m+c).getTime());else if(a>jd)for(var v=new Date(t),p=v.getFullYear(),g=v.getMonth(),y=v.getDate(),x=v.getHours(),w=Math.ceil(a/jd),S=QBe(t,e),c=0;c<=S+w;c=c+w)o.push(new Date(p,g,y,x+c).getTime());else if(a>Wd)for(var C=JBe(t,e),_=Math.ceil(a/Wd),c=0;c<=C+_;c=c+_)o.push(t+c*Wd);else{var T=a;T<cl&&(T=cl);for(var E=Math.floor(t/cl)*cl,k=Math.ceil((e-t)/cl),I=Math.ceil(T/cl),c=0;c<k+I;c=c+I)o.push(E+c*cl)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}Yl("cat",p7);Yl("time-cat",YBe);Yl("wilkinson-extended",zBe);Yl("r-pretty",WBe);Yl("time",jBe);Yl("time-pretty",e3e);Yl("log",GBe);Yl("pow",UBe);Yl("quantile",HBe);Yl("d3-linear",$Be);Xl("cat",bp);Xl("category",bp);Xl("identity",_Be);Xl("linear",Yd);Xl("log",wBe);Xl("pow",SBe);Xl("time",CBe);Xl("timeCat",xBe);Xl("quantize",f7);Xl("quantile",EBe);var t3e=globalThis&&globalThis.__spreadArray||function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return r.concat(a||Array.prototype.slice.call(t))};function r3e(r){return Kn(r,function(t,e){var n=e===0?"M":"L",i=t[0],a=t[1];return[n,i,a]})}function w7(r){return r3e(r)}function n3e(r){if(r.length<=2)return w7(r);var t=[];G(r,function(o){ci(o,t.slice(t.length-2))||t.push(o[0],o[1])});var e=CA(t,!1),n=Eo(r),i=n[0],a=n[1];return e.unshift(["M",i,a]),e}function i3e(r,t,e,n){n===void 0&&(n=!0);var i=new Yd({values:r}),a=new bp({values:Kn(r,function(s,l){return l})}),o=Kn(r,function(s,l){return[a.scale(l)*t,e-i.scale(s)*e]});return n?n3e(o):w7(o)}function a3e(r,t,e,n){n===void 0&&(n=5);for(var i=new Yd({values:r}),a=new bp({values:Kn(r,function(d,h){return h})}),o=Kn(r,function(d,h){return[a.scale(h)*t,e-i.scale(d)*e]}),s=[],l=0;l<o.length;l++){var u=o[l],c={x:u[0],y:u[1],y0:e,size:n},f=l3e(c);s.push.apply(s,f)}return u3e(s)}function o3e(r,t){var e=new Yd({values:r}),n=Math.max(0,e.min);return t-e.scale(n)*t}function s3e(r,t,e,n){var i=t3e([],r,!0),a=o3e(n,e);return i.push(["L",t,a]),i.push(["L",0,a]),i.push(["Z"]),i}function l3e(r){var t=r.x,e=r.y,n=r.y0,i=r.size,a,o;Qe(e)?(a=e[0],o=e[1]):(a=n,o=e);var s,l;Qe(t)?(s=t[0],l=t[1]):(s=t-i/2,l=t+i/2);var u=[{x:s,y:a},{x:s,y:o}];return u.push({x:l,y:o},{x:l,y:a}),u}function u3e(r,t){t===void 0&&(t=!0);var e=[],n=r[0];e.push(["M",n.x,n.y]);for(var i=1,a=r.length;i<a;i++)e.push(["L",r[i].x,r[i].y]);return t&&(e.push(["L",n.x,n.y]),e.push(["z"])),e}var e0=globalThis&&globalThis.__assign||function(){return e0=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},e0.apply(this,arguments)},c3e={stroke:"#C5C5C5",strokeOpacity:.85},f3e={fill:"#CACED4",opacity:.85},d3e=function(){function r(t){var e=t.x,n=e===void 0?0:e,i=t.y,a=i===void 0?0:i,o=t.width,s=o===void 0?200:o,l=t.height,u=l===void 0?26:l,c=t.smooth,f=c===void 0?!0:c,d=t.isArea,h=d===void 0?!1:d,v=t.data,p=v===void 0?[]:v,g=t.lineStyle,m=t.areaStyle,y=t.group,b=t.interval,x=b===void 0?null:b;this.group=y,this.x=n,this.y=a,this.width=s,this.height=u,this.data=p,this.smooth=f,this.isArea=h,this.lineStyle=Object.assign({},c3e,g),this.areaStyle=Object.assign({},f3e,m),this.intervalConfig=x,this.renderLine()}return r.prototype.renderLine=function(){var t=this,e=t.x,n=t.y,i=t.width,a=t.height;t.barWidth;var o=t.data,s=t.smooth,l=t.isArea,u=t.lineStyle,c=t.areaStyle,f=this.group.addGroup({name:"trend-group"});if(o){var d=i3e(o,i,a,s);if(f.addShape("path",{attrs:e0({path:d},u)}),l){var h=s3e(d,i,a,o);f.addShape("path",{attrs:e0({path:h},c)})}}this.intervalConfig&&f.addShape("path",{attrs:e0({path:a3e(this.intervalConfig.data,i,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style)}),f.move(e,n)},r.prototype.destory=function(){this.group.destroy()},r}(),h3e=d3e,wp=globalThis&&globalThis.__assign||function(){return wp=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},wp.apply(this,arguments)},v3e={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},p3e={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},g3e=function(){function r(t){var e=t.group,n=t.name,i=t.type,a=t.x,o=a===void 0?0:a,s=t.y,l=s===void 0?0:s,u=t.width,c=u===void 0?2:u,f=t.height,d=f===void 0?24:f,h=t.style,v=h===void 0?{}:h;this.group=e,this.name=n,this.handleType=i,this.x=o,this.y=l,this.width=c,this.height=d,i==="trend"?this.style=wp(wp({},v3e),v):i==="simple"&&(this.style=wp(wp({},p3e),v)),this.renderHandle()}return r.prototype.setX=function(t){this.setXY(t,void 0)},r.prototype.setY=function(t){this.setXY(void 0,t)},r.prototype.setXY=function(t,e){zt(t)&&(this.x=t),zt(e)&&(this.y=e),this.updateXY()},r.prototype.renderHandle=function(){var t=this,e=t.width,n=t.height,i=t.style,a=t.name,o=i.fill,s=i.stroke,l=i.radius,u=i.opacity,c=i.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:e,height:n,fill:o,stroke:s,radius:l,opacity:u,cursor:c},name:a+"-handler"}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:0,r:2*e,fill:o,stroke:s,radius:l,opacity:u,cursor:c},name:a+"-handler"}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:n,r:2*e,fill:o,stroke:s,radius:l,opacity:u,cursor:c},name:a+"-handler"})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:n/2,r:2*e,fill:o,stroke:s,radius:l,opacity:u,cursor:c,lineWidth:2},name:a+"-handler"})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},r.prototype.bindSimpleEvents=function(){var t=this,e=this.name;this.handleGroup.on(e+"-handler:mouseenter",function(){var n=t.style.highLightFill;t.topCircle.attr("fill",n)}),this.handleGroup.on(e+"-handler:mouseleave",function(){var n=t.style.fill;t.topCircle.attr("fill",n)})},r.prototype.bindTrendEvents=function(){var t=this,e=this.name;this.handleGroup.on(e+"-handler:mouseenter",function(){var n=t.style.highLightFill;t.verticalLine.attr("fill",n),t.topCircle.attr("fill",n),t.bottomCircle.attr("fill",n)}),this.handleGroup.on(e+"-handler:mouseleave",function(){var n=t.style.fill;t.verticalLine.attr("fill",n),t.topCircle.attr("fill",n),t.bottomCircle.attr("fill",n)})},r.prototype.show=function(){this.handleGroup.show()},r.prototype.hide=function(){this.handleGroup.hide()},r.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},r}(),S7=g3e,C7="timebarstartplay",E7="timebarendplay",ql="valuechange",Xd="timebarConfigChanged",tf="playPauseBtn",t0="nextStepBtn",r0="preStepBtn",aI=globalThis&&globalThis.__assign||function(){return aI=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},aI.apply(this,arguments)},m3e=function(){function r(t){this.config=Dt({},t),this.init()}return r.prototype.update=function(t){this.config=Dt({},this.config,t),this.updateElement(),this.renderMarker()},r.prototype.init=function(){this.initElement(),this.renderMarker()},r.prototype.initElement=function(){var t=this.config,e=t.group,n=t.style,i=n.scale,a=i===void 0?1:i,o=n.offsetX,s=o===void 0?0:o,l=n.offsetY,u=l===void 0?0:l,c=this.config.x+s,f=this.config.y+u,d=e.addGroup({name:tf});this.startMarkerGroup=d.addGroup({name:tf}),this.circle=e.addShape("circle",{attrs:aI({x:c,y:f,r:this.config.r*a},n),name:tf}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,f,a),fill:n.stroke||"#aaa"}}),this.pauseMarkerGroup=d.addGroup({name:tf});var h=.25*this.config.r*a,v=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*a,y:f-v/2,width:h,height:v,fill:n.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*a,y:f-v/2,width:h,height:v,fill:n.stroke||"#aaa",lineWidth:0}})},r.prototype.updateElement=function(){var t=this.config.style,e=t.scale,n=e===void 0?1:e,i=t.offsetX,a=i===void 0?0:i,o=t.offsetY,s=o===void 0?0:o,l=this.config.x+a,u=this.config.y+s;this.circle.attr("x",l),this.circle.attr("y",u),this.circle.attr("r",this.config.r*n),this.startMarker.attr("path",this.getStartMarkerPath(l,u,n));var c=.25*this.config.r*n,f=.5*this.config.r*Math.sqrt(3)*n;this.pauseLeftMarker.attr("x",l-(1/4+1/8)*this.config.r*n),this.pauseLeftMarker.attr("y",u-f/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",f),this.pauseRightMarker.attr("x",l+1/8*this.config.r*n),this.pauseRightMarker.attr("y",u-f/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",f)},r.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},r.prototype.getStartMarkerPath=function(t,e,n){var i=.5*this.config.r*Math.sqrt(3)*n;return[["M",t-i/Math.sqrt(3)/2,e-i/2],["L",t+i/Math.sqrt(3),e],["L",t-i/Math.sqrt(3)/2,e+i/2]]},r}(),y3e=m3e,ga=globalThis&&globalThis.__assign||function(){return ga=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ga.apply(this,arguments)},n0=Zn,b3e="#aaa",x3e="green",w3e={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},S3e={fill:"#fff"},C3e={fill:"green"},_7={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},T7={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},E3e={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:_7,timeTypeControllerStyle:T7},oI=110,rf=50,_3e=function(){function r(t){this.controllerCfg=Dt({},E3e,t),this.group=t.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType="range",this.fontFamily=t.fontFamily||"Arial, sans-serif",this.init()}return r.prototype.init=function(){this.renderPlayButton()},r.prototype.getNextMarkerPath=function(t,e,n){return[["M",t,e-n],["L",t+n,e],["L",t,e+n],["Z",t,e-n],["M",t,e],["L",t-n,e-n],["L",t-n,e+n],["Z"]]},r.prototype.getPreMarkerPath=function(t,e,n){return[["M",t,e-n],["L",t-n,e],["L",t,e+n],["L",t,e-n],["M",t,e],["L",t+n,e-n],["L",t+n,e+n],["Z"]]},r.prototype.renderPlayButton=function(){var t=this.controllerCfg,e=t.width,n=t.height,i=t.x,a=t.y,o=t.hideTimeTypeController,s=t.fill,l=s===void 0?b3e:s,u=t.stroke,c=u===void 0?x3e:u,f=ga(ga({},w3e),t.playBtnStyle||{}),d=ga(ga({},S3e),t.preBtnStyle||{}),h=ga(ga({},C3e),t.nextBtnStyle||{}),v=n/2-5,p=a+10,g=this.controllerGroup.addShape("rect",{attrs:{x:i,y:p,width:e,height:n,stroke:c,fill:l},name:"container-rect"});this.playButton?this.playButton.update({x:e/2,y:p,r:v}):this.playButton=new y3e({group:this.controllerGroup,x:e/2,y:p+v+5,r:v,isPlay:this.isPlay,style:f});var m=d.offsetX||0,y=d.offsetY||0,b=(d.scale||1)*v;this.controllerGroup.addShape("path",{attrs:ga({path:this.getPreMarkerPath(e/2-5*v+m,p+v+5+y,b*.5)},d),name:r0});var x=h.offsetX||0,w=h.offsetY||0,S=(h.scale||1)*v;this.controllerGroup.addShape("path",{attrs:ga({path:this.getNextMarkerPath(e/2+5*v+x,p+v+5+w,S*.5)},h),name:t0}),g.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var C=this.controllerCfg.scale,_=C===void 0?1:C,T=this.controllerGroup.getCanvasBBox(),E=(T.maxX+T.minX)/2,k=(T.maxY+T.minY)/2,I=n0([1,0,0,0,1,0,0,0,1],[["t",-E,-k],["s",_,_],["t",E,k]]);this.controllerGroup.setMatrix(I)},r.prototype.renderSpeedBtn=function(){var t=this.controllerCfg,e=t.y,n=t.width,i=t.hideTimeTypeController,a=ga(ga({},_7),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,l=a.text,u=l===void 0?{}:l,c=a.pointer,f=c===void 0?{}:c,d=a.scale,h=d===void 0?1:d,v=a.offsetX,p=v===void 0?0:v,g=a.offsetY,m=g===void 0?0:g,y=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=y;var b=5;this.speedAxisY=[19,22,26,32,39];for(var x=0;x<5;x++){var w=e+this.speedAxisY[x],S=n-(i?rf:oI);y.addShape("line",{attrs:ga({x1:S,x2:S+15,y1:w,y2:w},s),speed:b,name:"speed-rect"}),this.speedAxisY[x]=w,b=b-1}this.speedText=y.addShape("text",{attrs:ga({x:n-(i?rf:oI)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},u)}),this.speedPoint=y.addShape("path",{attrs:ga({path:this.getPointerPath(n-(i?rf:oI),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},f)});var C=this.speedGroup.getCanvasBBox(),_=(C.maxX+C.minX)/2,T=(C.maxY+C.minY)/2,E=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];E=n0(E,[["t",-_,-T],["s",h,h],["t",_+p*h,T+m*h]]),this.speedGroup.setMatrix(E)},r.prototype.getPointerPath=function(t,e){return[["M",t,e],["L",t-10,e-4],["L",t-10,e+4],["Z"]]},r.prototype.renderToggleTime=function(){var t,e=this.controllerCfg.width,n=ga(ga({},T7),this.controllerCfg.timeTypeControllerStyle||{}),i=n.scale,a=i===void 0?1:i,o=n.offsetX,s=o===void 0?0:o,l=n.offsetY,u=l===void 0?0:l,c=n.box,f=c===void 0?{}:c,d=n.check,h=d===void 0?{}:d,v=n.text,p=v===void 0?{}:v;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"}),this.toggleGroup.addShape("rect",{attrs:ga({x:e-rf,y:this.speedAxisY[0]+3.5},f),isChecked:!1,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:ga({path:[["M",e-rf+3,this.speedAxisY[1]+6],["L",e-rf+7,this.speedAxisY[1]+10],["L",e-rf+12,this.speedAxisY[1]+4]]},h),capture:!1}),this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:ga({text:((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:e-rf+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},p)});var g=this.toggleGroup.getCanvasBBox(),m=(g.maxX+g.minX)/2,y=(g.maxY+g.minY)/2,b=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];b=n0(b,[["t",-m,-y],["s",a,a],["t",m+s*a,y+u*a]]),this.toggleGroup.setMatrix(b)},r.prototype.bindEvent=function(){var t=this;this.speedGroup.on("speed-rect:click",function(e){var n=e.target.attr("y1"),i=t.speedPoint.attr("matrix"),a=t.speedAxisY.indexOf(i[7]||0),o=t.speedAxisY.indexOf(n),s=t.speedAxisY[o]-t.speedAxisY[a];i=n0(i,[["t",0,s]]),t.speedPoint.setMatrix(i),t.currentSpeed=t.speedAxisY.length-o,t.speedText.attr("text",t.currentSpeed+".0X"),t.group.emit(Xd,{speed:t.currentSpeed,type:t.currentType})}),this.speedGroup.on("mousewheel",function(e){e.preventDefault();var n=t.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],i=n[7],a=t.speedAxisY.indexOf(i);if(a===-1){var o=1/0;t.speedAxisY.forEach(function(l,u){var c=Math.abs(l-i);o>c&&(o=c,a=u)})}e.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(t.speedAxisY.length-1,a+1);var s=t.speedAxisY[a]-i;n=n0(n,[["t",0,s]]),t.speedPoint.setMatrix(n),t.currentSpeed=t.speedAxisY.length-a,t.speedText.attr("text",t.currentSpeed+".0X"),t.group.emit(Xd,{speed:t.currentSpeed,type:t.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(e){var n,i,a=e.target.get("isChecked");a?(t.checkedIcon.hide(),t.checkedText.attr("text",((i=t.controllerCfg)===null||i===void 0?void 0:i.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),t.currentType="range"):(t.checkedIcon.show(),t.checkedText.attr("text",((n=t.controllerCfg)===null||n===void 0?void 0:n.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),t.currentType="single"),e.target.set("isChecked",!a),t.group.emit(Xd,{type:t.currentType,speed:t.currentSpeed})})},r.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},r}(),A7=_3e,fi=globalThis&&globalThis.__assign||function(){return fi=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},fi.apply(this,arguments)},T3e={fill:"#416180",opacity:.05},A3e={fill:"#416180",opacity:.15,radius:5},k3e={fill:"#5B8FF9",opacity:.3,cursor:"grab"},sI=2,M3e={width:sI,height:24},I3e={textBaseline:"middle",fill:"#000",opacity:.45},P3e={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},D3e={lineWidth:1,stroke:"#ccc"},R3e=function(){function r(t){var e=this;this.prevX=0,this.onMouseDown=function(W){return function(X){e.currentHandler=W;var ie=X.originalEvent;ie.stopPropagation(),ie.preventDefault(),e.prevX=ae(ie,"touches.0.pageX",ie.pageX);var q=e.canvas.get("container");q.addEventListener("mousemove",e.onMouseMove),q.addEventListener("mouseup",e.onMouseUp),q.addEventListener("mouseleave",e.onMouseUp),q.addEventListener("touchmove",e.onMouseMove),q.addEventListener("touchend",e.onMouseUp),q.addEventListener("touchcancel",e.onMouseUp)}},this.onMouseMove=function(W){W.stopPropagation(),W.preventDefault();var X=ae(W,"touches.0.pageX",W.pageX),ie=X-e.prevX,q=e.adjustOffsetRange(ie/e.width);e.updateStartEnd(q),e.updateUI(),e.prevX=X},this.onMouseUp=function(){e.currentHandler&&(e.currentHandler=void 0);var W=e.canvas.get("container");W&&(W.removeEventListener("mousemove",e.onMouseMove),W.removeEventListener("mouseup",e.onMouseUp),W.removeEventListener("mouseleave",e.onMouseUp),W.removeEventListener("touchmove",e.onMouseMove),W.removeEventListener("touchend",e.onMouseUp),W.removeEventListener("touchcancel",e.onMouseUp))};var n=t.x,i=n===void 0?0:n,a=t.y,o=a===void 0?0:a,s=t.width,l=s===void 0?100:s,u=t.height,c=t.padding,f=c===void 0?10:c,d=t.trendCfg,h=t.controllerCfg,v=h===void 0?{speed:1}:h,p=t.backgroundStyle,g=p===void 0?{}:p,m=t.foregroundStyle,y=m===void 0?{}:m,b=t.handlerStyle,x=b===void 0?{}:b,w=t.textStyle,S=w===void 0?{}:w,C=t.start,_=C===void 0?0:C,T=t.end,E=T===void 0?1:T,k=t.minText,I=k===void 0?"":k,P=t.maxText,F=P===void 0?"":P,$=t.group,R=t.graph,L=t.canvas,O=t.tick,B=O===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(X){return X},ticks:[]}:O,U=t.type;this.graph=R,this.canvas=L,this.group=$,this.timeBarType=U,this.x=i,this.y=o,this.width=l,this.height=u,this.padding=f,this.ticks=B.ticks,this.trendCfg=d,this.controllerCfg=v,this.currentSpeed=v.speed||1,this.tickLabelFormatter=B.tickLabelFormatter,U==="trend"?this.backgroundStyle=fi(fi({},T3e),g):U==="simple"&&(this.backgroundStyle=fi(fi({},A3e),g)),this.foregroundStyle=fi(fi({},k3e),y),this.handlerStyle=fi(fi({},M3e),x),this.textStyle=fi(fi({},I3e),S),this.tickLabelStyle=fi(fi({},P3e),B.tickLabelStyle),this.tickLineStyle=fi(fi({},D3e),B.tickLineStyle),this.currentMode="range",this.start=_,this.end=E,this.minText=I,this.maxText=F,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return r.prototype.update=function(t){var e=t.x,n=t.y,i=t.width,a=t.height,o=t.minText,s=t.maxText,l=t.start,u=t.end;this.start=Math.min(1,Math.max(l,0)),this.end=Math.min(1,Math.max(u,0)),jt(this,{x:e,y:n,width:i,height:a,minText:o,maxText:s}),this.updateUI()},r.prototype.setText=function(t,e){this.minTextShape.attr("text",t),this.maxTextShape.attr("text",e)},r.prototype.renderSlider=function(){var t=this,e=this,n=e.width,i=e.height,a=e.timeBarType;if(a==="trend"&&la(ae(this.trendCfg,"data"))){var o=new h3e(fi(fi({x:this.x,y:this.y,width:n,height:i},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:fi({x:0,y:0,width:n,height:i},this.backgroundStyle)});var l=this.group.addGroup();a==="trend"?(this.minTextShape=l.addShape("text",{attrs:fi({x:0,y:i/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=l.addShape("text",{attrs:fi({y:i/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})):(this.minTextShape=l.addShape("text",{attrs:fi({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=l.addShape("text",{attrs:fi({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:fi({x:0,y:this.y,height:i},this.foregroundStyle)}),this.foregroundShape.on("mousedown",function(g){g.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(g){g.target.attr("cursor",t.foregroundStyle.cursor||"grab")});var u=ae(this.handlerStyle,"width",2),c=ae(this.handlerStyle,"height",24),f=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new S7({name:"minHandlerShape",group:f,type:a,x:this.x,y:this.y,width:u,height:c,style:this.handlerStyle});var d=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new S7({name:"maxHandlerShape",group:d,type:a,x:this.x,y:this.y,width:u,height:c,style:this.handlerStyle});var h=this.ticks,v=n/(h.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(g){g.destroy()});var p=-1/0;this.textList=h.map(function(g,m){t.tickPosList.push(t.x+m*v);var y;t.tickLabelFormatter?(y=t.tickLabelFormatter(g),!ot(y)&&y&&(y=g.date)):y=g.date;var b=t.group.addShape("text",{attrs:fi({x:t.x+m*v,y:t.y+i+5,text:y,fontFamily:t.fontFamily||"Arial, sans-serif"},t.tickLabelStyle)}),x=t.group.addShape("line",{attrs:fi({x1:t.x+m*v,y1:t.y+i+2,x2:t.x+m*v,y2:t.y+i+6},t.tickLineStyle)});x.toBack();var w=b.getBBox();return w.minX>p?(b.show(),x.show(),p=w.minX+w.width+10):(b.hide(),x.hide()),b}),this.controllerBtnGroup=new A7(fi({group:this.group,x:this.x,y:this.y+i+25,width:n,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents()},r.prototype.bindEvents=function(){var t=this,e=this.group.find(function(i){return i.get("name")==="minHandlerShape"});e&&(e.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),e.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var n=this.group.find(function(i){return i.get("name")==="maxHandlerShape"});n&&(n.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),n.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on(tf+":click",function(){t.isPlay=!t.isPlay,t.currentHandler=t.maxHandlerShape,t.changePlayStatus()}),this.group.on(t0+":click",function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(.01),t.updateUI()}),this.group.on(r0+":click",function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(-.01),t.updateUI()}),this.group.on(Xd,function(i){var a=i.type,o=i.speed;t.currentSpeed=o,t.currentMode=a,a==="single"?(t.minHandlerShape.hide(),t.foregroundShape.hide(),t.minTextShape.hide()):a==="range"&&(t.minHandlerShape.show(),t.foregroundShape.show(),t.minTextShape.show())})},r.prototype.adjustTickIndex=function(t){for(var e=0;e<this.tickPosList.length-1;e++)if(this.tickPosList[e]<=t&&t<=this.tickPosList[e+1])return Math.abs(this.tickPosList[e]-t)<Math.abs(t-this.tickPosList[e+1])?e:e+1;return 0},r.prototype.adjustOffsetRange=function(t){switch(this.currentHandler){case this.minHandlerShape:{var e=0-this.start,n=1-this.start;return Math.min(n,Math.max(e,t))}case this.maxHandlerShape:{var e=0-this.end,n=1-this.end;return Math.min(n,Math.max(e,t))}case this.foregroundShape:{var e=0-this.start,n=1-this.end;return Math.min(n,Math.max(e,t))}default:return 0}},r.prototype.updateStartEnd=function(t){var e=this.ticks[this.adjustTickIndex(this.start*this.width)],n=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=t,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break;case this.foregroundShape:this.start+=t,this.end+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break}},r.prototype.updateUI=function(){var t=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var e=this.x+this.start*this.width,n=this.x+this.end*this.width;this.foregroundShape.attr("x",e),this.foregroundShape.attr("width",n-e);var i=ae(this.handlerStyle,"width",sI);this.setText(this.minText,this.maxText);var a=this.dodgeText([e,n]),o=a[0],s=a[1];this.minHandlerShape.setX(e-i/2),G(o,function(l,u){return t.minTextShape.attr(u,l)}),this.maxHandlerShape.setX(n-i/2),G(s,function(l,u){return t.maxTextShape.attr(u,l)}),this.currentMode==="range"?this.graph.emit(ql,{value:[this.start,this.end].sort()}):this.currentMode==="single"&&this.graph.emit(ql,{value:[this.end,this.end]})},r.prototype.dodgeText=function(t){var e,n,i=2,a=ae(this.handlerStyle,"width",sI),o=this.minTextShape,s=this.maxTextShape,l=t[0],u=t[1],c=!1;l>u&&(e=[u,l],l=e[0],u=e[1],n=[s,o],o=n[0],s=n[1],c=!0);var f=o.getBBox(),d=s.getBBox(),h=null,v=null;return this.timeBarType==="trend"?(h=l-f.width<this.x+i?{x:l+a/2+i,textAlign:"left"}:{x:l-a/2-i,textAlign:"right"},v=u+d.width>this.x+this.width?{x:u-a/2-i,textAlign:"right"}:{x:u+a/2+i,textAlign:"left"}):this.timeBarType==="simple"&&(h=f.width>l-i?{x:l+a/2+i,textAlign:"center"}:{x:l-a/2-i,textAlign:"center"},v=d.width>this.width-u-i?{x:u-a/2-i,textAlign:"center"}:{x:u+a/2+i,textAlign:"center"}),c?[v,h]:[h,v]},r.prototype.startPlay=function(){var t=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var e=t,n=e.ticks,i=e.width,a=t.currentSpeed,o=i/n.length,s=o/((10-a)*1e3/60),l=t.adjustOffsetRange(s/t.width);t.updateStartEnd(l),t.updateUI(),t.isPlay&&(t.playHandler=t.startPlay())}):void 0},r.prototype.changePlayStatus=function(t){t===void 0&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(C7,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit(E7,null))},r.prototype.destory=function(){this.graph.off(ql);var t=this.group,e=t.find(function(i){return i.get("name")==="minHandlerShape"});e&&(e.off("minHandlerShape-handler:mousedown"),e.off("minHandlerShape-handler:touchstart"),e.destroy());var n=t.find(function(i){return i.get("name")==="maxHandlerShape"});n&&(n.off("maxHandlerShape-handler:mousedown"),n.off("maxHandlerShape-handler:touchstart"),n.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),t.off(tf+":click"),t.off(t0+":click"),t.off(r0+":click"),t.off(Xd),t.destroy(),this.trendComponent&&this.trendComponent.destory()},r}(),O3e=R3e,L3e=function(){function r(t){var e=t.x,n=e===void 0?0:e,i=t.y,a=i===void 0?0:i,o=t.container,s=t.text,l=t.padding,u=l===void 0?[4,4,4,4]:l,c=t.className,f=c===void 0?"g6-component-timebar-tooltip":c,d=t.backgroundColor,h=d===void 0?"#000":d,v=t.textColor,p=v===void 0?"#fff":v,g=t.opacity,m=g===void 0?.8:g,y=t.fontSize,b=y===void 0?12:y;this.container=o,this.className=f,this.backgroundColor=h,this.textColor=p,this.x=n,this.y=a,this.text=s,this.padding=u,this.opacity=m,this.fontSize=b,this.render()}return r.prototype.render=function(){var t=this,e=t.className;t.x,t.y;var n=t.backgroundColor,i=t.textColor,a=t.text,o=t.padding,s=t.opacity,l=t.fontSize,u=t.container,c=Qn("<div class='"+e+`' style="position: absolute; width: fit-content; height: fit-content; opacity: `+s+'"></div>');ot(u)&&(u=document.getElementById(u)),u.appendChild(c),t.parentHeight=u.offsetHeight,t.parentWidth=u.offsetWidth,Vr(c,{visibility:"hidden",top:0,left:0});var f=Qn(`
      <div style='position: absolute; white-space:nowrap; background-color: `+n+"; font-size: "+l+"px; border-radius: 4px; width: fit-content; height: fit-content; color: "+i+"; padding: "+o[0]+"px "+o[1]+"px "+o[2]+"px "+o[3]+"px'></div>");f.innerHTML=a,c.appendChild(f),t.backgroundDOM=f;var d=Qn("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid "+n+"'></div>");c.appendChild(d),t.arrowDOM=d,t.container=c},r.prototype.show=function(t){var e=this,n=t.text,i=t.x;t.y,t.clientX,t.clientY,e.backgroundDOM.innerHTML=n;var a=e.backgroundDOM.offsetWidth,o=e.backgroundDOM.offsetHeight,s=e.arrowDOM.offsetWidth,l=e.arrowDOM.offsetHeight;Vr(e.container,{top:-o-l+"px",left:i+"px",visibility:"visible"}),Vr(e.backgroundDOM,{marginLeft:-a/2+"px"}),Vr(e.arrowDOM,{marginLeft:-s/2+"px",top:o+"px"});var u=i-a/2,c=i+a/2;u<0?Vr(e.backgroundDOM,{marginLeft:-a/2-u+"px"}):c>e.parentWidth&&Vr(e.backgroundDOM,{marginLeft:-a/2-c+e.parentWidth+12+"px"})},r.prototype.hide=function(){Vr(this.container,{top:0,left:0,visibility:"hidden"})},r}(),F3e=L3e,lI=globalThis&&globalThis.__assign||function(){return lI=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},lI.apply(this,arguments)},N3e={fill:"#5B8FF9"},B3e={fill:"#e6e8e9"},$3e=function(){function r(t){this.frameCount=0,this.fontFamily="Arial, sans-serif";var e=t.graph,n=t.canvas,i=t.group,a=t.width,o=t.height,s=t.padding,l=t.data,u=t.start,c=t.end,f=t.x,d=f===void 0?0:f,h=t.y,v=h===void 0?0:h,p=t.tickLabelFormatter,g=t.selectedTickStyle,m=g===void 0?N3e:g,y=t.unselectedTickStyle,b=y===void 0?B3e:y,x=t.tooltipBackgroundColor,w=t.tooltipFomatter;this.graph=e,this.group=i,this.sliceGroup=i.addGroup({name:"slice-group"}),this.canvas=n,this.width=a,this.height=o,this.padding=s,this.data=l,this.start=u,this.end=c,this.tickLabelFormatter=p,this.selectedTickStyle=m,this.unselectedTickStyle=b,this.x=d,this.y=v,this.tooltipBackgroundColor=x,this.tooltipFomatter=w,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return r.prototype.renderSlices=function(){var t=this,e=this,n=e.width,i=e.height,a=e.padding,o=e.data,s=e.start,l=e.end,u=e.tickLabelFormatter,c=e.selectedTickStyle,f=e.unselectedTickStyle,d=n-2*a,h=10,v=4,p=3*a+v+h,g=i-p-2*a,m=2,y=o.length,b=(d-m*(y-1))/y;this.tickWidth=b;var x=this.sliceGroup,w=[],S=Math.round(y*s),C=Math.round(y*l);this.startTickRectId=S,this.endTickRectId=C,o.forEach(function(T,E){var k=E>=S&&E<=C,I=k?c:f,P=x.addShape("rect",{attrs:lI({x:a+E*(b+m),y:a,width:b,height:g},I),draggable:!0,name:"tick-rect-"+E}),F=x.addShape("rect",{attrs:{x:a+E*b+m*(2*E-1)/2,y:a,width:E===0||E===y-1?b+m/2:b+m,height:g,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-"+E});F.toFront();var $=P.getBBox(),R=($.minX+$.maxX)/2;w.push({rect:P,pickRect:F,value:T.date,x:R,y:$.minY});var L;if(u?(L=u(T),!ot(L)&&L&&(L=T.date)):E%Math.round(y/10)==0&&(L=T.date),L){var O=$.maxY+a*2;x.addShape("line",{attrs:{stroke:"#BFBFBF",x1:R,y1:O,x2:R,y2:O+v}});var B=O+v+a,U=x.addShape("text",{attrs:{fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:R,y:B,textAlign:"center",text:L,textBaseline:"top",fontSize:10,fontFamily:t.fontFamily||"Arial, sans-serif"},capture:!1}),W=U.getBBox();W.maxX>n?U.attr("textAlign","right"):W.minX<0&&U.attr("textAlign","left")}}),this.tickRects=w;var _=this.group;this.currentSpeed=1,this.controllerBtnGroup=new A7({group:_,x:this.x,y:this.y+i+5,width:n,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"})},r.prototype.initEvent=function(){var t=this,e=this.sliceGroup;e.on("click",function(c){var f=c.target;if(!(f.get("type")!=="rect"||!f.get("name"))){var d=parseInt(f.get("name").split("-")[2],10);if(!isNaN(d)){var h=t.tickRects,v=t.unselectedTickStyle;h.forEach(function(y){y.rect.attr(v)});var p=t.selectedTickStyle;h[d].rect.attr(p),t.startTickRectId=d,t.endTickRectId=d;var g=h.length,m=d/g;t.graph.emit(ql,{value:[m,m]})}}}),e.on("dragstart",function(c){var f=t.tickRects,d=t.unselectedTickStyle;f.forEach(function(y){y.rect.attr(d)});var h=c.target,v=parseInt(h.get("name").split("-")[2],10),p=t.selectedTickStyle;f[v].rect.attr(p),t.startTickRectId=v;var g=f.length,m=v/g;t.graph.emit(ql,{value:[m,m]}),t.dragging=!0}),e.on("dragover",function(c){if(!!t.dragging&&c.target.get("type")==="rect"){for(var f=parseInt(c.target.get("name").split("-")[2],10),d=t.startTickRectId,h=t.tickRects,v=t.selectedTickStyle,p=t.unselectedTickStyle,g=0;g<h.length;g++){var m=g>=d&&g<=f?v:p;h[g].rect.attr(m)}var y=h.length;t.endTickRectId=f;var b=d/y,x=f/y;t.graph.emit(ql,{value:[b,x]})}}),e.on("drop",function(c){if(!!t.dragging&&(t.dragging=!1,c.target.get("type")==="rect")){var f=t.startTickRectId,d=parseInt(c.target.get("name").split("-")[2],10);if(!(d<f)){var h=t.selectedTickStyle,v=t.tickRects;v[d].rect.attr(h),t.endTickRectId=d;var p=v.length,g=f/p,m=d/p;t.graph.emit(ql,{value:[g,m]})}}});var n=this,i=n.tooltipBackgroundColor,a=n.tooltipFomatter,o=n.canvas,s=new F3e({container:o.get("container"),backgroundColor:i}),l=this.tickRects;l.forEach(function(c){var f=c.pickRect;f.on("mouseenter",function(d){var h=d.target;if(h.get("type")==="rect"){var v=parseInt(h.get("name").split("-")[2],10),p=o.getClientByPoint(l[v].x,l[v].y);s.show({x:l[v].x,y:l[v].y,clientX:p.x,clientY:p.y,text:a?a(l[v].value):l[v].value})}}),f.on("mouseleave",function(d){s.hide()})});var u=this.group;u.on(tf+":click",function(){t.isPlay=!t.isPlay,t.changePlayStatus()}),u.on(t0+":click",function(){t.updateStartEnd(1)}),u.on(r0+":click",function(){t.updateStartEnd(-1)}),u.on(Xd,function(c){c.type;var f=c.speed;t.currentSpeed=f})},r.prototype.changePlayStatus=function(t){t===void 0&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(C7,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit(E7,null))},r.prototype.startPlay=function(){var t=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var e=t.currentSpeed;t.frameCount%(60/e)==0&&(t.frameCount=0,t.updateStartEnd(1)),t.frameCount++,t.isPlay&&(t.playHandler=t.startPlay())}):void 0},r.prototype.updateStartEnd=function(t){var e=this,n=this.tickRects,i=n.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=e.endTickRectId;if(t>0?e.endTickRectId++:(n[e.endTickRectId].rect.attr(a),e.endTickRectId--),s!==e.startTickRectId)e.endTickRectId<e.startTickRectId&&(e.startTickRectId=e.endTickRectId);else{for(var l=e.startTickRectId;l<=e.endTickRectId-1;l++)n[l].rect.attr(a);e.startTickRectId=e.endTickRectId}if(n[e.endTickRectId]){n[e.endTickRectId].rect.attr(o);var u=e.startTickRectId/i,c=e.endTickRectId/i;this.graph.emit(ql,{value:[u,c]})}},r.prototype.destory=function(){this.graph.off(ql);var t=this.sliceGroup;t.off("click"),t.off("dragstart"),t.off("dragover"),t.off("drop"),this.tickRects.forEach(function(e){var n=e.pickRect;n.off("mouseenter"),n.off("mouseleave")}),this.tickRects.length=0,t.off(tf+":click"),t.off(t0+":click"),t.off(r0+":click"),t.off(Xd),this.sliceGroup.destroy()},r}(),z3e=$3e,G3e=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),zu=globalThis&&globalThis.__assign||function(){return zu=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},zu.apply(this,arguments)},U3e=globalThis&&globalThis.__rest||function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e},V3e=4,H3e=26,W3e=function(r){G3e(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1}},t.prototype.initContainer=function(){var e=this.get("graph"),n=this._cfgs,i=n.width,a=n.height,o=this.get("className")||"g6-component-timebar",s=this.get("container"),l=this.get("graph").get("container"),u;s?(ot(s)&&(s=document.getElementById(s)),u=s):(u=Qn("<div class='"+o+"'></div>"),Vr(u,{position:"relative"})),l.appendChild(u),this.set("timeBarContainer",u);var c,f=e.get("renderer");f==="SVG"?c=new zv({container:u,width:i,height:a}):c=new _u({container:u,width:i,height:a}),this.set("canvas",c)},t.prototype.init=function(){this.initContainer();var e=this.get("canvas"),n=e.addGroup({name:"timebar-group"});this.set("timeBarGroup",n),this.renderTrend(),this.initEvent();var i=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",i)},t.prototype.renderTrend=function(){var e=this._cfgs,n=e.width,i=e.x,a=e.y,o=e.padding,s=e.type,l=e.trend,u=e.slider,c=e.controllerCfg,f=e.textStyle,d=e.tick,h=e.backgroundStyle,v=e.foregroundStyle,p=l.data,g=U3e(l,["data"]),m=n-2*o,y=s==="trend"?H3e:V3e,b=this.get("graph"),x=this.get("timeBarGroup"),w=this.get("canvas"),S=null;s==="trend"||s==="simple"?S=new O3e(zu(zu({graph:b,canvas:w,group:x,type:s,x:i+o,y:s==="trend"?a+o:a+o+15,width:m,height:y,padding:o,backgroundStyle:h,foregroundStyle:v,trendCfg:zu(zu({},g),{data:p.map(function(C){return C.value})})},u),{tick:{ticks:p,tickLabelFormatter:d.tickLabelFormatter,tickLabelStyle:d.tickLabelStyle,tickLineStyle:d.tickLineStyle},handlerStyle:zu(zu({},u.handlerStyle),{height:u.height||y}),controllerCfg:c,textStyle:f})):s==="tick"&&(S=new z3e(zu({graph:b,canvas:w,group:x,x:i+o,y:a+o},d))),this.set("timebar",S)},t.prototype.filterData=function(e){var n,i=e.value,a=null,o=this._cfgs.type;if(o==="trend"||o==="simple"?a=this._cfgs.trend.data:o==="tick"&&(a=this._cfgs.tick.data),!a||a.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var s=this.get("rangeChange"),l=this.get("graph"),u=Math.round(a.length*i[0]),c=Math.round(a.length*i[1]);c=c>=a.length?a.length-1:c,u=u>=a.length?a.length-1:u;var f=(n=this._cfgs.tick)===null||n===void 0?void 0:n.tickLabelFormatter,d=f?f(a[u]):a[u].date,h=f?f(a[c]):a[c].date;if(o!=="tick"){var v=this.get("timebar");v.setText(d,h)}if(s)s(l,d,h);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=l.get("data"));var p=this.cacheGraphData.nodes.filter(function(y){return y.date>=a[u].date&&y.date<=a[c].date}),g=p.map(function(y){return y.id}),m=[];this.cacheGraphData.edges&&(m=this.cacheGraphData.edges.filter(function(y){return g.includes(y.source)&&g.includes(y.target)}),this.get("filterEdge")&&(m=m.filter(function(y){return y.date>=a[u].date&&y.date<=a[c].date}))),l.changeData({nodes:p,edges:m})}},t.prototype.initEvent=function(){var e=this,n=0,i=0,a=this._cfgs.type;!a||a==="trend"||a==="simple"?(n=this._cfgs.slider.start,i=this._cfgs.slider.end):a==="tick"&&(n=this._cfgs.tick.start,i=this._cfgs.tick.end);var o=this.get("graph");o.on("afterrender",function(s){e.filterData({value:[n,i]})}),o.on(ql,Cv(function(s){e.filterData(s)},200,{trailing:!0,leading:!0}))},t.prototype.destroy=function(){var e=this.get("timebar");e&&e.destory&&e.destory(),r.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var i=this.get("container");i||(i=this.get("graph").get("container")),ot(i)&&(i=document.getElementById(i)),i.removeChild(n)}},t}(gs),j3e=W3e,Y3e=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),X3e=el.applyMatrix;function q3e(r,t){var e,n;if(r.naturalWidth)e=r.naturalWidth,n=r.naturalHeight;else{var i=new Image;i.src=r.src,i.onload=function(){t&&t(i.width,i.height)}}return[e,n]}var K3e=function(r){Y3e(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},t.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},t.prototype.disableRefresh=function(){this.set("refresh",!1)},t.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},t.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},t.prototype.initViewport=function(){var e=this,n=this._cfgs,i=n.graph;if(!this.destroyed){var a=this.get("container");ot(a)&&(a=document.getElementById(a));var o=Qn("<div class="+n.viewportClassName+`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff'>
      </div>`),s=0,l=0,u=!1,c=0,f=0,d=0,h=0,v=0,p=0;a.addEventListener("mousedown",function(g){if(n.refresh=!1,g.target===o){var m=o.style;d=parseInt(m.width,10),h=parseInt(m.height,10);var y=e.get("width"),b=e.get("height");d>y||h>b||(p=i.getZoom(),v=e.get("ratio"),u=!0,s=g.clientX,l=g.clientY)}},!1),a.addEventListener("mousemove",function(g){if(!(!u||nt(g.clientX)||nt(g.clientY))){var m=e.get("width"),y=e.get("height"),b=o.style;c=parseInt(b.left,10),f=parseInt(b.top,10),d=parseInt(b.width,10),h=parseInt(b.height,10);var x=s-g.clientX,w=l-g.clientY;c-x<0?x=c:c-x+d>=m&&(x=0),f-w<0?w=f:f-w+h>=y&&(w=0),c-=x,f-=w,Vr(o,{left:c+"px",top:f+"px"}),i.translate(x*p/v,w*p/v),s=g.clientX,l=g.clientY}},!1),a.addEventListener("mouseleave",function(){u=!1,n.refresh=!0},!1),a.addEventListener("mouseup",function(){u=!1,n.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},t.prototype.updateViewport=function(){if(!this.destroyed){var e=this.get("ratio"),n=this.get("width"),i=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),l=o/s,u=a.getGroup(),c=u.getCanvasBBox(),f=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],d=[c.maxX-c.minX,c.maxY-c.minY],h={centerX:f[0],centerY:f[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>l?(h.width=d[0],h.height=h.width/l):(h.height=d[1],h.width=h.height*l),h.minX=f[0]-h.width/2,h.minY=f[1]-h.height/2;var v=u.getMatrix();v||(v=[1,0,0,0,1,0,0,0,1]);var p=Xx([1,0,0,0,1,0,0,0,1],v),g=X3e({x:h.minX,y:h.minY},p),m=a.getCanvasByPoint(g.x,g.y),y=this.get("viewport");y||this.initViewport();var b=o/h.width,x=b*n,w=b*i,S=n*-m.x/h.width,C=i*-m.y/h.height,_=S+x,T=C+w;S<0&&(x+=S,S=0),_>n&&(x=x-(_-n)),C<0&&(w+=C,C=0),T>i&&(w=w-(T-i)),this.set("ratio",e);var E=S+"px",k=C+"px";Vr(y,{left:E,top:k,width:x+"px",height:w+"px"})}},t.prototype.init=function(){this.initContainer()},t.prototype.initContainer=function(){var e=this,n=e.get("graph"),i=n.get("width"),a=n.get("height"),o=a/i,s=e.get("className"),l=e.get("container"),u=e.get("width"),c=e.get("height");!u&&!c&&(u=200),u?(c=o*u,e.set("height",c)):(u=1/o*c,e.set("width",u));var f=Qn("<div class='"+s+"' style='width: "+u+"px; height: "+c+"px; overflow: hidden; position: relative;'></div>");ot(l)&&(l=document.getElementById(l)),l?l.appendChild(f):n.get("container").appendChild(f),e.set("container",f);var d=Qn('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');f.appendChild(d);var h=Qn('<span style="display: table-cell; vertical-align: middle; "></span>');d.appendChild(h),e.set("containerDOM",d),e.set("containerSpan",h);var v=Qn('<img alt="" src="'+this.get("graphImg")+'" style="display: inline-block; user-select: none;" draggable="false" />');e.set("imgDOM",v),e.updateImgSize(),h.appendChild(v),e.updateCanvas()},t.prototype.updateImgSize=function(){var e=this,n=e.get("imgDOM"),i=e.get("width"),a=e.get("height");n.onload=function(){var o=q3e(n);o[0]>o[1]?n.width=i:n.height=a}},t.prototype.updateCanvas=function(){var e=this.get("refresh");if(!!e){var n=this.get("graph");if(!n.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var i=this.get("width"),a=n.get("canvas").getCanvasBBox(),o=a.width,s=i/o;this.set("ratio",s),this.updateViewport()}}},t.prototype.getViewport=function(){return this.get("viewport")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.updateGraphImg=function(e){var n=this,i=n.get("imgDOM");i.remove(),n.set("graphImg",e);var a=Qn('<img alt="" src="'+e+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');n.set("imgDOM",a),a.src=e,n.updateImgSize();var o=n.get("containerSpan");o.appendChild(a),n.updateCanvas()},t.prototype.destroy=function(){var e=this.get("container");e.parentNode.removeChild(e)},t}(gs),Z3e=K3e,Q3e=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),uI=globalThis&&globalThis.__assign||function(){return uI=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},uI.apply(this,arguments)},J3e=el.distance,k7=.05,M7={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},e5e=function(r){Q3e(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:Or(M7),showLabel:"edge",scaleRBy:"wheel"}},t.prototype.getEvents=function(){var e;switch(this.get("trigger")){case"click":e={click:"filter"};break;case"drag":e={click:"createDelegate"};break;default:e={mousemove:"filter"};break}return e},t.prototype.init=function(){var e=this,n=e.get("showLabel"),i=n==="node"||n==="both",a=n==="edge"||n==="both";e.set("showNodeLabel",i),e.set("showEdgeLabel",a);var o=e.get("shouldShow");o||e.set("shouldShow",function(){return!0})},t.prototype.createDelegate=function(e){var n=this,i=n.get("delegate");(!i||i.destroyed)&&(n.filter(e),i=n.get("delegate"),i.on("dragstart",function(a){}),i.on("drag",function(a){n.filter(a)}),this.get("scaleRBy")==="wheel"&&i.on("mousewheel",function(a){n.scaleRByWheel(a)}))},t.prototype.scaleRByWheel=function(e){var n=this;if(!(!e||!e.originalEvent)){e.preventDefault&&e.preventDefault();var i=n.get("graph"),a,o=n.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0;s||i.getPointByClient(e.clientX,e.clientY),e.originalEvent.wheelDelta<0?a=1-k7:a=1/(1-k7);var l=n.get("maxR"),u=n.get("minR"),c=n.get("r");(c>(l||i.get("height"))&&a>1||c<(u||i.get("height")*.05)&&a<1)&&(a=1),c*=a,n.set("r",c),n.filter(e)}},t.prototype.filter=function(e){var n=this,i=n.get("graph"),a=i.getNodes(),o={},s=n.get("r"),l=n.get("type"),u={x:e.x,y:e.y};n.updateDelegate(u,s);var c=n.get("shouldShow"),f=n.get("vShapes");f&&f.forEach(function(m){m.remove(),m.destroy()}),f=[],a.forEach(function(m){var y=m.getModel(),b=y.x,x=y.y;J3e({x:b,y:x},u)<s&&(o[y.id]=m)});var d=i.getEdges(),h=[];d.forEach(function(m){var y=m.getModel(),b=y.source,x=y.target;c(y)&&(l==="only-source"||l==="one"?o[b]&&!o[x]&&h.push(m):l==="only-target"||l==="one"?o[x]&&!o[b]&&h.push(m):l==="both"&&o[b]&&o[x]&&h.push(m))});var v=n.get("showNodeLabel"),p=n.get("showEdgelabel"),g=i.get("group");h.forEach(function(m){var y=m.get("group").get("children");y.forEach(function(b){var x=b.get("type"),w=g.addShape(x,{attrs:b.attr()});f.push(w),v&&x==="text"&&w.set("visible",!0)})}),Object.keys(o).forEach(function(m){var y=o[m],b=y.get("group").clone();if(g.add(b),f.push(b),p)for(var x=b.get("children"),w=0;w<x.length;w++){var S=x[w];S.get("type")==="text"&&S.set("visible",!0)}}),n.set("vShapes",f)},t.prototype.updateParams=function(e){var n=this,i=e.r,a=e.trigger,o=e.minR,s=e.maxR,l=e.scaleRBy,u=e.showLabel,c=e.shouldShow;if(isNaN(e.r)||n.set("r",i),isNaN(s)||n.set("maxR",s),isNaN(o)||n.set("minR",o),(a==="mousemove"||a==="click")&&n.set("trigger",a),l==="wheel"||l==="unset"){n.set("scaleRBy",l),n.get("delegate").remove(),n.get("delegate").destroy();var f=n.get("dPercentText");f&&(f.remove(),f.destroy())}(u==="node"||u==="both")&&n.set("showNodeLabel",!0),(u==="edge"||u==="both")&&n.set("showEdgeLabel",!0),c&&n.set("shouldShow",c)},t.prototype.updateDelegate=function(e,n){var i=this,a=i.get("graph"),o=i.get("delegate");if(!o||o.destroyed){var s=a.get("group"),l=i.get("delegateStyle")||M7;o=s.addShape("circle",{attrs:uI({r:n,x:e.x,y:e.y},l),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(u){i.scaleRByWheel(u)})}else o.attr({x:e.x,y:e.y,r:n});i.set("delegate",o)},t.prototype.clear=function(){var e=this,n=e.get("vShapes");n&&n.forEach(function(a){a.remove(),a.destroy()}),n=[],e.set("vShapes",n);var i=e.get("delegate");i&&!i.destroyed&&(i.remove(),i.destroy())},t.prototype.destroy=function(){this.clear()},t}(gs),t5e=e5e,r5e=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),n5e=el.pointLineDistance,i5e={stroke:"#FA8C16",lineWidth:1},a5e=function(r){r5e(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{line:i5e,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},t.prototype.init=function(){},t.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},t.prototype.onDragStart=function(){this.initBoxLine()},t.prototype.onDrag=function(e){var n=e.item,i=n.get("delegateShape")||n,a=i.getBBox(),o=n.getModel(),s=o.x-a.x,l=o.y-a.y;this.show({x:a.minX+s,y:a.minY+l},{width:a.width,height:a.height})},t.prototype.onDragEnd=function(){this.destory()},t.prototype.initBoxLine=function(){var e=this._cfgs,n=e.horizontalLines,i=e.verticalLines,a=e.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(l){var u=l.getBBox(),c=l.get("id");a===!0||a==="horizontal"?(n[c+"tltr"]=[u.minX,u.minY,u.maxX,u.minY,l],n[c+"lcrc"]=[u.minX,u.centerY,u.maxX,u.centerY,l],n[c+"blbr"]=[u.minX,u.maxY,u.maxX,u.maxY,l]):a==="center"&&(n[c+"lcrc"]=[u.minX,u.centerY,u.maxX,u.centerY,l]),a===!0||a==="vertical"?(i[c+"tlbl"]=[u.minX,u.minY,u.minX,u.maxY,l],i[c+"tcbc"]=[u.centerX,u.minY,u.centerX,u.maxY,l],i[c+"trbr"]=[u.maxX,u.minY,u.maxX,u.maxY,l]):a==="center"&&(i[c+"tcbc"]=[u.centerX,u.minY,u.centerX,u.maxY,l])})},t.prototype.show=function(e,n){var i=jt({},e);return this.itemAlign(e,n,i),e},t.prototype.itemAlign=function(e,n,i){var a=this,o=this._cfgs,s=o.horizontalLines,l=o.verticalLines,u=o.tolerance,c={x:i.x+n.width/2,y:i.y},f={x:i.x+n.width/2,y:i.y+n.height/2},d={x:i.x+n.width/2,y:i.y+n.height},h={x:i.x,y:i.y+n.height/2},v={x:i.x+n.width,y:i.y+n.height/2},p=[],g=[],m=null;if(this.clearAlignLine(),G(s,function(b){b[4].isVisible&&(p.push(a.getLineDisObject(b,c)),p.push(a.getLineDisObject(b,f)),p.push(a.getLineDisObject(b,d)))}),G(l,function(b){b[4].isVisible&&(g.push(a.getLineDisObject(b,h)),g.push(a.getLineDisObject(b,f)),g.push(a.getLineDisObject(b,v)))}),p.sort(function(b,x){return b.dis-x.dis}),g.sort(function(b,x){return b.dis-x.dis}),p.length!==0&&p[0].dis<u){e.y=p[0].line[1]-p[0].point.y+i.y,m={type:"item",horizontals:[p[0]]};for(var y=1;y<3;y++)p[0].dis===p[y].dis&&m.horizontals.push(p[y])}if(g.length!==0&&g[0].dis<u){e.x=g[0].line[0]-g[0].point.x+i.x,m?m.verticals=[g[0]]:m={type:"item",verticals:[g[0]]};for(var y=1;y<3;y++)g[0].dis===g[y].dis&&m.verticals.push(g[y])}m&&(m.bbox=n,this.addAlignLine(m))},t.prototype.addAlignLine=function(e){var n=e.bbox,i=e.type,a=e.horizontals,o=e.verticals,s=this._cfgs,l=s.line,u=s.alignLines,c=this.get("graph"),f=c.get("group");i==="item"&&(a&&G(a,function(d){var h=d.line,v=d.point,p=(h[0]+h[2])/2,g,m;v.x<p?(g=v.x-n.width/2,m=Math.max(h[0],h[2])):(g=v.x+n.width/2,m=Math.min(h[0],h[2]));var y=jt({x1:g,y1:h[1],x2:m,y2:h[1]},l),b=f.addShape("line",{attrs:y,capture:!1});u.push(b)}),o&&G(o,function(d){var h=d.line,v=d.point,p=(h[1]+h[3])/2,g,m;v.y<p?(g=v.y-n.height/2,m=Math.max(h[1],h[3])):(g=v.y+n.height/2,m=Math.min(h[1],h[3]));var y=jt({x1:h[0],y1:g,x2:h[0],y2:m},l),b=f.addShape("line",{attrs:y,capture:!1});u.push(b)}))},t.prototype.getLineDisObject=function(e,n){return{line:e,point:n,dis:n5e(e,n)}},t.prototype.getContainer=function(){return this.get("container")},t.prototype.clearAlignLine=function(){var e=this._cfgs.alignLines;G(e,function(n){n.remove()}),e.length=0},t.prototype.destory=function(){var e=this._cfgs,n=e.horizontalLines,i=e.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var l=s.get("id");delete n[l+"tltr"],delete n[l+"lcrc"],delete n[l+"blbr"],delete i[l+"tlbl"],delete i[l+"tcbc"],delete i[l+"trbr"]}),this.clearAlignLine()},t}(gs),o5e=a5e,s5e=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Mi=globalThis&&globalThis.__assign||function(){return Mi=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Mi.apply(this,arguments)},l5e=["click","mouseenter"],u5e=function(r){s5e(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},t.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var e=this.get("filter")||{},n=e.multiple;n&&e.trigger==="mouseenter"&&this.set("multiple",!1);var i=this.get("align");if(!i){var a=this.get("position").split("-");a.includes("left")&&(i="left"),a.includes("right")?i="right":i="center",this.set("align",i)}var o=this.get("graph"),s=o.get("container"),l=Qn(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(l),this.set("container",l);var u=this.render();Vr(l,this.getContainerPos(u)),this.bindEvents()},t.prototype.getContainerPos=function(e){e===void 0&&(e=[0,0]);var n=this,i=n.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),l=this.get("position").split("-"),u={top:0,right:1,bottom:2,left:3},c=0,f=0,d={left:(i.getWidth()-e[0])/2+c,top:(i.getHeight()-e[1])/2+f};return l.forEach(function(h){var v=s[u[h]],p=h;switch(h){case"top":v+=f;break;case"left":v+=c;break;case"bottom":v=i.getHeight()-e[1]-v+f,p="top";break;default:v=i.getWidth()-e[0]-v+c,p="left";break}d[p]=v}),d.top+=o+i.getContainer().offsetTop,d.left+=a+i.getContainer().offsetLeft,Object.keys(d).forEach(function(h){d[h]=d[h]+"px"}),d},t.prototype.bindEvents=function(){var e=this,n=e.get("filter");if(!(!n||!n.enable)){var i=n.trigger||"click";l5e.includes(i)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),i="click");var a=e.get("legendCanvas");i==="mouseenter"?(a.on("node-container:mouseenter",function(o){return e.filterData(o)}),a.on("node-container:mouseleave",function(o){e.clearFilter(),e.clearActiveLegend()})):(a.on("node-container:click",function(o){return e.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(e.clearFilter(),e.clearActiveLegend())}))}},t.prototype.changeData=function(e){this.set("data",e);var n=this.render();Vr(this.get("container"),this.getContainerPos(n))},t.prototype.activateLegend=function(e){var n=this.get("filter"),i=n==null?void 0:n.multiple;i||this.clearActiveLegend();var a=e.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(f){f.set("inactive",!0)}):this.clearActiveLegend();var o=(n==null?void 0:n.lengedStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},l=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(f){var d=f.get("children"),h=d[0],v=d[1];h.attr(Mi(Mi({},h.get("oriAttrs")),s)),v.attr(Mi(Mi({},v.get("oriAttrs")),l))});var u=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=u["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(f){var d=f.get("children"),h=d[0],v=d[1];h.attr(Mi(Mi({},h.get("oriAttrs")),u)),v.attr(Mi(Mi({},v.get("oriAttrs")),c))})},t.prototype.findLegendItemsByState=function(e,n,i){n===void 0&&(n="all"),i===void 0&&(i=!0);var a=this.get("legendCanvas").find(function(l){return l.get("name")==="root"}),o=a.find(function(l){return l.get("name")==="node-group"}),s=a.find(function(l){return l.get("name")==="edge-group"});return n==="node"?o.get("children").filter(function(l){return!!l.get(e)===i}):n==="edge"?s.get("children").filter(function(l){return!!l.get(e)===i}):o.get("children").filter(function(l){return!!l.get(e)===i}).concat(s.get("children").filter(function(l){return!!l.get(e)===i}))},t.prototype.clearActiveLegend=function(){var e=this.get("legendCanvas"),n=e.find(function(a){return a.get("name")==="root"}),i=[n.find(function(a){return a.get("name")==="node-group"}),n.find(function(a){return a.get("name")==="edge-group"})];i.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),l=s[0],u=s[1];l.attr(l.get("oriAttrs")),u.attr(u.get("oriAttrs"))})})},t.prototype.filterData=function(e){var n=this.get("filter"),i=n==null?void 0:n.filterFunctions;if(!(!n||!i)){var a=this.get("legendCanvas"),o=this.get("graph"),s=n.graphActiveState||"active",l=n.graphInactiveState||"inactive",u=n.multiple;this.clearFilter(),u||this.clearActiveLegend(),this.activateLegend(e.target);var c=a.find(function(m){return m.get("name")==="root"}),f=c.find(function(m){return m.get("name")==="node-group"}),d=c.find(function(m){return m.get("name")==="edge-group"}),h=f.get("children").filter(function(m){return m.get("active")}),v=d.get("children").filter(function(m){return m.get("active")}),p=0,g=["getNodes","getEdges"];g.forEach(function(m){o[m]().forEach(function(y){var b=!1,x=m==="getNodes"?h:v;x.forEach(function(w){var S=i[w.get("id")];b=b||S(y.getModel())}),b?(o.setItemState(y,l,!1),o.setItemState(y,s,!0),p++):(o.setItemState(y,s,!1),o.setItemState(y,l,!0))})}),p||g.forEach(function(m){o[m]().forEach(function(y){o.clearItemStates(y,[l])})})}},t.prototype.clearFilter=function(){var e=this.get("graph"),n=this.get("filter");if(!!n){var i=n.graphActiveState||"active",a=n.graphInactiveState||"inactive";e.getNodes().forEach(function(o){e.clearItemStates(o,[i,a])}),e.getEdges().forEach(function(o){e.clearItemStates(o,[i,a])})}},t.prototype.render=function(){var e=this;this.processData();var n=this.get("legendCanvas");if(!n){n=new _u({container:this.get("container"),width:200,height:200});var i=n.addGroup({name:"root"});i.addGroup({name:"node-group"}),i.addGroup({name:"edge-group"}),this.set("legendCanvas",n)}var a=n.find(function(L){return L.get("name")==="root"}),o=a.find(function(L){return L.get("name")==="node-group"}),s=a.find(function(L){return L.get("name")==="edge-group"}),l=this.get("itemsData"),u=["nodes","edges"],c=[o,s];u.forEach(function(L,O){l[L].forEach(function(B){var U,W=c[O].addGroup({id:B.id,name:"node-container"}),X,ie=B.type,q=e.getShapeSize(B),j=q.width,fe=q.height,se=q.r,ce=e.getStyle(L.substr(0,4),B);switch(B.type){case"circle":X={r:se,x:0,y:0};break;case"rect":X={width:j,height:fe,x:-j/2,y:-fe/2};break;case"ellipse":X={r1:j,r2:fe,x:0,y:0};break;case"line":X={x1:-j/2,y1:0,x2:j/2,y2:0},ie="line";break;case"quadratic":X={path:[["M",-j/2,0],["Q",0,j/2,j/2,0]]},ie="path";break;case"cubic":X={path:[["M",-j/2,0],["C",-j/6,j/2,j/6,-j/2,j/2,0]]},ie="path";break;default:X={r:se,x:0,y:0};break}var _e=W.addShape(ie,{attrs:Mi(Mi({},X),ce),name:B.type+"-node-keyShape",oriAttrs:Mi({opacity:1},ce)});if(B.label){var Me=_e.getBBox(),Ye=((U=B.labelCfg)===null||U===void 0?void 0:U.style)||{},De=Mi({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},Ye);W.addShape("text",{attrs:Mi({x:Me.maxX+4,y:0,text:B.label},De),className:"legend-label",name:B.type+"-node-text",oriAttrs:De})}})});var f=this.get("padding"),d,h=a.find(function(L){return L.get("name")==="title-container"}),v={height:0,maxY:0,width:0};if(this.get("title")){h||(h=a.addGroup({name:"title-container"}));var p={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:f[0]},g=this.get("titleConfig")||{},m=Object.assign(p,g.style||{});d=h.addShape("text",{attrs:Mi({text:this.get("title")},m)}),v=h.getCanvasBBox(),h.setMatrix([1,0,0,0,1,0,g.offsetX,g.offsetY,1])}this.layoutItems();var y=a.getCanvasBBox(),b=o.getCanvasBBox(),x=b.minX<0?Math.abs(b.minX)+f[3]:f[3],w=v.maxY<b.minY?Math.abs(v.maxY-b.minY)+f[0]:v.maxY+f[0],S=[1,0,0,0,1,0,x,w,1];o.setMatrix(S),y=a.getCanvasBBox();var C=[y.minX+y.width+f[1],y.minY+y.height+f[2]];if(d){var g=Mi({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));v=h.getCanvasBBox();var _=h.getMatrix()||[1,0,0,0,1,0,0,0,1];g.position==="center"?_[6]=C[0]/2+g.offsetX:g.position==="right"?(_[6]=C[0]-f[3]+g.offsetX,d.attr({textAlign:"right"})):(_[6]=f[3]+g.offsetX,d.attr({textAlign:"left"})),h.setMatrix(_),v=h.getCanvasBBox(),x=b.minX<0?Math.abs(b.minX)+f[3]:f[3],w=b.minY<v.maxY?Math.abs(v.maxY-b.minY)+f[0]:v.maxY+f[0],S=[1,0,0,0,1,0,x,w,1],o.setMatrix(S);var T=[1,0,0,0,1,0,x,w,1];this.get("layout")==="vertical"?T[6]+=b.maxX+this.get("horiSep"):T[7]+=b.maxY+this.get("vertiSep"),s.setMatrix(T)}else{b=o.getCanvasBBox();var E=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?E[6]+=S[6]+b.maxX+this.get("horiSep"):E[7]+=S[7]+b.maxY+this.get("vertiSep"),s.setMatrix(E)}y=a.getCanvasBBox(),b=o.getCanvasBBox(),S=o.getMatrix()||[1,0,0,0,1,0,0,0,1];var k=s.getMatrix()||[1,0,0,0,1,0,0,0,1],I=s.getCanvasBBox();C=[Math.max(b.width+S[6],I.width+k[6])+f[1],Math.max(b.height+S[7],I.height+k[7])+f[2]],n.changeSize(C[0],C[1]);var P=this.get("containerStyle"),F=a.getMatrix()||[1,0,0,0,1,0,0,0,1],$=el.invertMatrix({x:0,y:0},F),R=a.addShape("rect",{attrs:Mi({x:$.x+(P.lineWidth||1),y:$.y+(P.lineWidth||1),width:C[0]-2*(P.lineWidth||1),height:C[1]-2*(P.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},P),name:"legend-back-rect",capture:!1});return R.toBack(),C},t.prototype.layoutItems=function(){var e=this.get("legendCanvas"),n=this.get("horiSep"),i=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],l=e.find(function(b){return b.get("name")==="root"}),u=l.find(function(b){return b.get("name")==="node-group"}),c=l.find(function(b){return b.get("name")==="edge-group"}),f={min:0,max:-1/0};u.get("children").forEach(function(b,x){x===0&&(f.min=s[0]);var w=b.get("children")[0],S=b.getCanvasBBox(),C=w.getBBox(),_=C.width,T=C.height,E=0,k=0;a==="vertical"?(E=s[1],k=s[0]+_/2,s[0]=k+S.height+i,S.maxX+E+_/2):(E=s[0]+_/2,k=s[1],s[0]=E+S.width+n,S.maxY+k+T/2),s[0]>f.max&&(f.max=s[0]),b.setMatrix([1,0,0,0,1,0,E,k,1])});var d=f.max-f.min,h={min:0,max:-1/0},v=u.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?v.maxX+n:v.maxY+i,c.get("children").forEach(function(b,x){x===0&&(h.min=s[0]);var w=b.get("children")[0],S=b.getCanvasBBox(),C=w.getBBox(),_=C.width,T=C.height,E=0,k=0;a==="vertical"?(E=s[1],k=s[0],s[0]=k+S.height+i,b.setMatrix([1,0,0,0,1,0,0,k+T/2,1])):(E=s[0],k=s[1],s[0]=E+S.width+n,b.setMatrix([1,0,0,0,1,0,E+_/2,0,1])),s[0]>h.max&&(h.max=s[0])});var p=h.max-h.min;if(o&&o!==""&&o!=="left"){var g=d-p,m=o==="center"?Math.abs(g)/2:Math.abs(g),y=g<0?u:c;y.get("children").forEach(function(b){var x=b.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?x[7]+=m:x[6]+=m,b.setMatrix(x)})}},t.prototype.processData=function(){var e=this.get("data"),n={nodes:[],edges:[]};e.nodes&&(e.nodes.sort(function(i,a){return i.order-a.order}),e.nodes.forEach(function(i){var a,o,s,l,u,c=i.size||[((a=i.style)===null||a===void 0?void 0:a.width)||((o=i.style)===null||o===void 0?void 0:o.r)||8,((s=i.style)===null||s===void 0?void 0:s.height)||((l=i.style)===null||l===void 0?void 0:l.r)||8],f=((u=i.labelCfg)===null||u===void 0?void 0:u.style)||{};n.nodes.push({id:i.id||Rs(),type:i.type||"circle",style:Mi({},i.style),order:i.order,label:i.label,itemType:"node",size:c,labelCfg:{position:"right",style:Mi({fontFamily:"Arial"},f)}})})),e.edges&&(e.edges.sort(function(i,a){return i.order-a.order}),e.edges.forEach(function(i){var a,o,s=i.type||"line";i.type==="cubic-horizontal"&&(s="cubic");var l=((a=i.labelCfg)===null||a===void 0?void 0:a.style)||{},u=i.size||[((o=i.style)===null||o===void 0?void 0:o.width)||8,1];n.edges.push({id:i.id||Rs(),type:s,size:u,style:Mi({lineWidth:Qe(u)?u[1]:1},i.style),order:i.order,label:i.label,itemType:"edge",labelCfg:{position:"right",style:Mi({fontFamily:"Arial"},l)}})})),this.set("itemsData",n)},t.prototype.getContainer=function(){return this.get("container")},t.prototype.formatArray=function(e){var n=this.get(e);if(zt(n))this.set(e,[n,n,n,n]);else if(Qe(n))switch(n.length){case 0:this.set(e,[0,0,0,0]);break;case 1:this.set(e,[n[0],n[0],n[0],n[0]]);break;case 2:this.set(e,[n[0],n[1],n[0],n[1]]);break;case 3:this.set(e,[n[0],n[1],n[2],n[1]]);break}return this.get(e)},t.prototype.getShapeSize=function(e){var n,i,a;return e.size&&(Qe(e.size)?(n=e.size[0],i=e.size[1]||e.size[0],a=e.size[0]/2):zt(e.size)&&(n=e.size,i=e.size,a=e.size/2)),e.style&&(e.style.width&&(n=e.style.width),e.style.height&&(i=e.style.height),e.style.r&&(a=e.style.r)),a||(a=5),n||(n=a),i||(i=a),{width:n,height:i,r:a}},t.prototype.getStyle=function(e,n){var i=e==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return Mi(Mi({},i),n.style||{})},t.prototype.destroy=function(){var e=this.get("graph"),n=e.get("container"),i=this.get("container");n.removeChild(i)},t}(gs),c5e=u5e,f5e={PluginBase:gs,Menu:UNe,Grid:FNe,Minimap:qNe,Bundling:JNe,ToolBar:oBe,Tooltip:uBe,Fisheye:rBe,TimeBar:j3e,ImageMinimap:Z3e,EdgeFilterLens:t5e,SnapLine:o5e,Legend:c5e},_a=f5e;Eu("circle",{options:{size:Xt.defaultNode.size,style:{x:0,y:0,stroke:Xt.defaultNode.style.stroke,fill:Xt.defaultNode.style.fill,lineWidth:Xt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Xt.nodeLabel.style.fill,fontSize:Xt.nodeLabel.style.fontSize,fontFamily:Xt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Xt.defaultNode.linkPoints.size,lineWidth:Xt.defaultNode.linkPoints.lineWidth,fill:Xt.defaultNode.linkPoints.fill,stroke:Xt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:A({},Xt.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(t),o=Dt({},i,t.icon),s=this.type+"-keyShape",l=e.addShape("circle",{attrs:a,className:s,name:s,draggable:!0});e.shapeMap[s]=l;var u=o.width,c=o.height,f=o.show,d=o.text;if(f){var h=this.type+"-icon";d?e.shapeMap[h]=e.addShape("text",{attrs:A({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:h,name:h,draggable:!0}):e.shapeMap[h]=e.addShape("image",{attrs:A({x:-u/2,y:-c/2},o),className:h,name:h,draggable:!0})}return this.drawLinkPoints(t,e),l},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints;if(!!n){var i=n||{},a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=Ur(i,["top","left","right","bottom","size","r"]),d=this.getSize(t),h=d[0]/2;if(o){var v="link-point-left";e.shapeMap[v]=e.addShape("circle",{attrs:A(A({},f),{x:-h,y:0,r:u/2||c||5}),className:v,name:v,isAnchorPoint:!0})}if(s){var p="link-point-right";e.shapeMap[p]=e.addShape("circle",{attrs:A(A({},f),{x:h,y:0,r:u/2||c||5}),className:p,name:p,isAnchorPoint:!0})}if(a){var g="link-point-top";e.shapeMap[g]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:-h,r:u/2||c||5}),className:g,name:g,isAnchorPoint:!0})}if(l){var m="link-point-bottom";e.shapeMap[m]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:h,r:u/2||c||5}),className:m,name:m,isAnchorPoint:!0})}}},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},i=Dt({},e,n),a=this.getSize(t),o=a[0]/2,s=A({x:0,y:0,r:o},i);return s},update:function(t,e,n){var i=e.getContainer(),a=this.getSize(t),o=A({},t.style);t.style.stroke===void 0&&t.color&&(o.stroke=t.color),t.style.r===void 0&&!isNaN(a[0])&&(o.r=a[0]/2),this.updateShape(t,e,o,!0,n),this.updateLinkPoints(t,i)}},"single-node");Eu("rect",{options:{size:[100,30],style:{radius:0,stroke:Xt.defaultNode.style.stroke,fill:Xt.defaultNode.style.fill,lineWidth:Xt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Xt.nodeLabel.style.fill,fontSize:Xt.nodeLabel.style.fontSize,fontFamily:Xt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Xt.defaultNode.linkPoints.size,lineWidth:Xt.defaultNode.linkPoints.lineWidth,fill:Xt.defaultNode.linkPoints.fill,stroke:Xt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:A({},Xt.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t),i=e.addShape("rect",{attrs:n,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return e.shapeMap[this.type+"-keyShape"]=i,this.drawLinkPoints(t,e),i},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=Ur(i,["top","left","right","bottom","size","r"]),d=this.getSize(t),h=d[0],v=d[1];o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:A(A({},f),{x:-h/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:A(A({},f),{x:h/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:-v/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:v/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},i=jt({},e,n),a=this.getSize(t),o=i.width||a[0],s=i.height||a[1],l=A({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(t,e,n){var i=e.getContainer(),a=this.getOptions({}).style,o=this.getSize(t),s=e.get("keyShape");t.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var l={stroke:t.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},u=jt({},a,s.attr(),l);u=jt(u,t.style),this.updateShape(t,e,u,!1,n),this.updateLinkPoints(t,i)}},"single-node");Eu("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:Xt.defaultNode.style.stroke,fill:Xt.defaultNode.style.fill,lineWidth:Xt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Xt.nodeLabel.style.fill,fontSize:Xt.nodeLabel.style.fontSize,fontFamily:Xt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Xt.defaultNode.linkPoints.size,lineWidth:Xt.defaultNode.linkPoints.lineWidth,fill:Xt.defaultNode.linkPoints.fill,stroke:Xt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:A({},Xt.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(t),o=e.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});e.shapeMap["ellipse-keyShape"]=o;var s=i.width,l=i.height,u=i.show,c=i.text;return u&&(c?e.shapeMap[this.type+"-icon"]=e.addShape("text",{attrs:A({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.shapeMap[this.type+"-icon"]=e.addShape("image",{attrs:A({x:-s/2,y:-l/2},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=Ur(i,["top","left","right","bottom","size","r"]),d=this.getSize(t),h=d[0]/2,v=d[1]/2;o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:A(A({},f),{x:-h,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:A(A({},f),{x:h,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:-v,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:v,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},i=jt({},e,n),a=this.getSize(t),o=a[0]/2,s=a[1]/2,l=A({x:0,y:0,rx:o,ry:s},i);return l},update:function(t,e,n){var i=e.getContainer(),a=this.getOptions({}).style,o=this.getSize(t),s={stroke:t.color,rx:o[0]/2,ry:o[1]/2},l=e.get("keyShape"),u=jt({},a,l.attr(),s);u=jt(u,t.style),this.updateShape(t,e,u,!0,n),this.updateLinkPoints(t,i)}},"single-node");Eu("diamond",{options:{size:[80,80],style:{stroke:Xt.defaultNode.style.stroke,fill:Xt.defaultNode.style.fill,lineWidth:Xt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Xt.nodeLabel.style.fill,fontSize:Xt.nodeLabel.style.fontSize,fontFamily:Xt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Xt.defaultNode.linkPoints.size,lineWidth:Xt.defaultNode.linkPoints.lineWidth,fill:Xt.defaultNode.linkPoints.fill,stroke:Xt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:A({},Xt.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(t),o=e.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});e.shapeMap[this.type+"-keyShape"]=o;var s=i.width,l=i.height,u=i.show,c=i.text;return u&&(c?e.shapeMap[this.type+"-icon"]=e.addShape("text",{attrs:A({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.shapeMap[this.type+"-icon"]=e.addShape("image",{attrs:A({x:-s/2,y:-l/2},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=Ur(i,["top","left","right","bottom","size","r"]),d=this.getSize(t),h=d[0],v=d[1];o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:A(A({},f),{x:-h/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:A(A({},f),{x:h/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:-v/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:v/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(t){var e=this.getSize(t),n=e[0],i=e[1],a=[["M",0,-i/2],["L",n/2,0],["L",0,i/2],["L",-n/2,0],["Z"]];return a},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},i=jt({},e,n),a=this.getPath(t),o=A({path:a},i);return o},update:function(t,e,n){var i=e.getContainer(),a=this.getOptions({}).style,o=this.getPath(t),s={stroke:t.color,path:o},l=e.get("keyShape"),u=jt({},a,l.attr(),s);u=jt(u,t.style),this.updateShape(t,e,u,!0,n),this.updateLinkPoints(t,i)}},"single-node");Eu("triangle",{options:{size:40,direction:"up",style:{stroke:Xt.defaultNode.style.stroke,fill:Xt.defaultNode.style.fill,lineWidth:Xt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Xt.nodeLabel.style.fill,fontSize:Xt.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Xt.defaultNode.linkPoints.size,lineWidth:Xt.defaultNode.linkPoints.lineWidth,fill:Xt.defaultNode.linkPoints.fill,stroke:Xt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:A({},Xt.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(t,e){var n=this.mergeStyle||this.getOptions(t),i=n.icon,a=i===void 0?{}:i,o=n.direction,s=this.getShapeStyle(t),l=t.direction||o,u=e.addShape("path",{attrs:s,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});e.shapeMap[this.type+"-keyShape"]=u;var c=a.width,f=a.height,d=a.show,h=a.offset,v=a.text;if(d)if(v)e.shapeMap[this.type+"-icon"]=e.addShape("text",{attrs:A({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});else{var p=-c/2,g=-f/2;(l==="up"||l==="down")&&(g+=h),(l==="left"||l==="right")&&(p+=h),e.shapeMap[this.type+"-icon"]=e.addShape("image",{attrs:A({x:p,y:g},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})}return this.drawLinkPoints(t,e),u},drawLinkPoints:function(t,e){var n=this.mergeStyle||this.getOptions(t),i=n.linkPoints,a=i===void 0?{}:i,o=n.direction,s=t.direction||o,l=a.top,u=a.left,c=a.right,f=a.bottom,d=a.size,h=a.r,v=Ur(a,["top","left","right","bottom","size","r"]),p=this.getSize(t),g=p[0];if(u){var m=null,y=g*Math.sin(1/3*Math.PI),b=g*Math.sin(1/3*Math.PI);s==="up"?m=[-b,y]:s==="down"?m=[-b,-y]:s==="left"&&(m=[-b,b-y]),m&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:A(A({},v),{x:m[0],y:m[1],r:d/2||h||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var x=null,y=g*Math.sin(1/3*Math.PI),b=g*Math.sin(1/3*Math.PI);s==="up"?x=[b,y]:s==="down"?x=[b,-y]:s==="right"&&(x=[b,b-y]),x&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:A(A({},v),{x:x[0],y:x[1],r:d/2||h||5}),className:"link-point-right",name:"link-point-right"}))}if(l){var w=null,y=g*Math.sin(1/3*Math.PI),b=g*Math.sin(1/3*Math.PI);s==="up"?w=[b-y,-y]:s==="left"?w=[b,-y]:s==="right"&&(w=[-b,-y]),w&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:A(A({},v),{x:w[0],y:w[1],r:d/2||h||5}),className:"link-point-top",name:"link-point-top"}))}if(f){var S=null,y=g*Math.sin(1/3*Math.PI),b=g*Math.sin(1/3*Math.PI);s==="down"?S=[-b+y,y]:s==="left"?S=[b,y]:s==="right"&&(S=[-b,y]),S&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:A(A({},v),{x:S[0],y:S[1],r:d/2||h||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(t){var e=(this.mergeStyle||this.getOptions(t)).direction,n=t.direction||e,i=this.getSize(t),a=i[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),l=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return n==="down"?l=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:n==="left"?l=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:n==="right"&&(l=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),l},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},i=jt({},e,n),a=this.getPath(t),o=A({path:a},i);return o},update:function(t,e,n){var i=e.getContainer(),a=this.getOptions({}).style,o=this.getPath(t),s={stroke:t.color,path:o},l=e.get("keyShape"),u=jt({},a,l.attr(),s);u=jt(u,t.style),this.updateShape(t,e,u,!0,n),this.updateLinkPoints(t,i)},updateLinkPoints:function(t,e){var n=this.getOptions({}),i=n.linkPoints,a=n.direction,o=t.direction||a,s=e.shapeMap["link-point-left"]||e.find(function(R){return R.get("className")==="link-point-left"}),l=e.shapeMap["link-point-right"]||e.find(function(R){return R.get("className")==="link-point-right"}),u=e.shapeMap["link-point-top"]||e.find(function(R){return R.get("className")==="link-point-top"}),c=e.shapeMap["link-point-bottom"]||e.find(function(R){return R.get("className")==="link-point-bottom"}),f=i,d=s||l||u||c;d&&(f=d.attr());var h=jt({},f,t.linkPoints),v=h.fill,p=h.stroke,g=h.lineWidth,m=h.size/2;m||(m=h.r);var y=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},b=y.left,x=y.right,w=y.top,S=y.bottom,C=this.getSize(t),_=C[0],T={r:m,fill:v,stroke:p,lineWidth:g},E=null,k=_*Math.sin(1/3*Math.PI),I=_*Math.sin(1/3*Math.PI);o==="up"?E=[-I,k]:o==="down"?E=[-I,-k]:o==="left"&&(E=[-I,I-k]),E&&(s?!b&&b!==void 0?(s.remove(),delete e.shapeMap["link-point-left"]):s.attr(A(A({},T),{x:E[0],y:E[1]})):b&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:A(A({},T),{x:E[0],y:E[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var P=null;o==="up"?P=[I,k]:o==="down"?P=[I,-k]:o==="right"&&(P=[I,I-k]),P&&(l?!x&&x!==void 0?(l.remove(),delete e.shapeMap["link-point-right"]):l.attr(A(A({},T),{x:P[0],y:P[1]})):x&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:A(A({},T),{x:P[0],y:P[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var F=null;o==="up"?F=[I-k,-k]:o==="left"?F=[I,-k]:o==="right"&&(F=[-I,-k]),F&&(u?!w&&w!==void 0?(u.remove(),delete e.shapeMap["link-point-top"]):u.attr(A(A({},T),{x:F[0],y:F[1]})):w&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:A(A({},T),{x:F[0],y:F[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var $=null;o==="down"?$=[-I+k,k]:o==="left"?$=[I,k]:o==="right"&&($=[-I,k]),$&&(c?!S&&S!==void 0?(c.remove(),delete e.shapeMap["link-point-bottom"]):c.attr(A(A({},T),{x:$[0],y:$[1]})):S&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:A(A({},T),{x:$[0],y:$[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node");Eu("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:Xt.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:Xt.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:Xt.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).preRect,i=n===void 0?{}:n,a=this.getShapeStyle(t),o=this.getSize(t),s=o[0],l=o[1],u=e.addShape("rect",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});e.shapeMap[this.type+"-keyShape"]=u;var c=i.show,f=Ur(i,["show"]);return c&&(e.shapeMap["pre-rect"]=e.addShape("rect",{attrs:A({x:-s/2,y:-l/2,height:l},f),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(t,e),this.drawStateIcon(t,e),this.drawLinkPoints(t,e),u},drawLogoIcon:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).logoIcon,i=n===void 0?{}:n,a=this.getSize(t),o=a[0];if(i.show){var s=i.width,l=i.height,u=i.x,c=i.y,f=i.offset,d=i.text,h=Ur(i,["width","height","x","y","offset","text"]);d?e.shapeMap["rect-logo-icon"]=e.addShape("text",{attrs:A({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},h),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):e.shapeMap["rect-logo-icon"]=e.addShape("image",{attrs:A(A({},h),{x:u||-o/2+s+f,y:c||-l/2,width:s,height:l}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).stateIcon,i=n===void 0?{}:n,a=this.getSize(t),o=a[0];if(i.show){var s=i.width,l=i.height,u=i.x,c=i.y,f=i.offset,d=i.text,h=Ur(i,["width","height","x","y","offset","text"]);d?e.shapeMap["rect-state-icon"]=e.addShape("text",{attrs:A({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},h),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):e.shapeMap["rect-state-icon"]=e.addShape("image",{attrs:A(A({},h),{x:u||o/2-s+f,y:c||-l/2,width:s,height:l}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=Ur(i,["top","left","right","bottom","size","r"]),d=this.getSize(t),h=d[0],v=d[1];o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:A(A({},f),{x:-h/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:A(A({},f),{x:h/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:-v/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:v/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(t,e){var n=this.getOptions(t),i=n.labelCfg,a=i===void 0?{}:i,o=n.logoIcon,s=o===void 0?{}:o,l=n.descriptionCfg,u=l===void 0?{}:l,c=this.getSize(t),f=c[0],d=null,h=s.show,v=s.width,p=-f/2+a.offset;h&&(p=-f/2+v+a.offset);var g=a.style,m=u.style,y=u.paddingTop;return ot(t.description)?(d=e.addShape("text",{attrs:A(A({},g),{x:p,y:-5,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0}),e.shapeMap["text-shape"]=d,e.shapeMap["rect-description"]=e.addShape("text",{attrs:A(A({},m),{x:p,y:17+(y||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0})):(d=e.addShape("text",{attrs:A(A({},g),{x:p,y:7,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0}),e.shapeMap["text-shape"]=d),d},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},i=jt({},e,n),a=this.getSize(t),o=i.width||a[0],s=i.height||a[1],l=A({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(t,e){var n=this.mergeStyle||this.getOptions(t),i=n.style,a=i===void 0?{}:i,o=n.labelCfg,s=o===void 0?{}:o,l=n.descriptionCfg,u=l===void 0?{}:l,c=this.getSize(t),f=c[0],d=c[1],h=e.get("keyShape");h.attr(A(A({},a),{x:-f/2,y:-d/2,width:f,height:d}));var v=e.getContainer(),p=v.shapeMap["rect-logo-icon"]||v.find(function(fe){return fe.get("className")==="rect-logo-icon"}),g=p?p.attr():{},m=jt({},g,t.logoIcon),y=m.width;y===void 0&&(y=this.options.logoIcon.width);var b=t.logoIcon?t.logoIcon.show:void 0,x=s.offset,w=-f/2+y+x;!b&&b!==void 0&&(w=-f/2+x);var S=v.shapeMap["node-label"]||v.find(function(fe){return fe.get("className")==="node-label"}),C=v.shapeMap["rect-description"]||v.find(function(fe){return fe.get("className")==="rect-description"});if(t.label)if(!S)v.shapeMap["node-label"]=v.addShape("text",{attrs:A(A({},s.style),{x:w,y:t.description?-5:7,text:t.label}),className:"node-label",name:"node-label",draggable:!0});else{var _=t.labelCfg?t.labelCfg.style:{},T=jt({},S.attr(),_);t.label&&(T.text=t.label),T.x=w,ot(t.description)&&(T.y=-5),C&&(C.resetMatrix(),C.attr({x:w})),S.resetMatrix(),S.attr(T)}if(ot(t.description)){var E=u.paddingTop;if(!C)v.shapeMap["rect-description"]=v.addShape("text",{attrs:A(A({},u.style),{x:w,y:17+(E||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0});else{var _=t.descriptionCfg?t.descriptionCfg.style:{},k=jt({},C.attr(),_);ot(t.description)&&(k.text=t.description),k.x=w,C.resetMatrix(),C.attr(A(A({},k),{y:17+(E||0)}))}}var I=v.shapeMap["pre-rect"]||v.find(function(fe){return fe.get("className")==="pre-rect"});if(I&&!I.destroyed){var P=jt({},I.attr(),t.preRect);I.attr(A(A({},P),{x:-f/2,y:-d/2,height:d}))}if(p&&!p.destroyed)if(!b&&b!==void 0)p.remove(),delete v.shapeMap["pre-rect"];else{var F=m.width,$=m.height,R=m.x,L=m.y,O=m.offset,B=Ur(m,["width","height","x","y","offset"]);p.attr(A(A({},B),{x:R||-f/2+F+O,y:L||-$/2,width:F,height:$}))}else b&&this.drawLogoIcon(t,v);var U=v.shapeMap["rect-state-icon"]||v.find(function(fe){return fe.get("className")==="rect-state-icon"}),W=U?U.attr():{},X=jt({},W,t.stateIcon);if(U){!X.show&&X.show!==void 0&&(U.remove(),delete v.shapeMap["rect-state-icon"]);var ie=X.width,$=X.height,R=X.x,L=X.y,q=X.offset,j=Ur(X,["width","height","x","y","offset"]);U.attr(A(A({},j),{x:R||f/2-ie+q,y:L||-$/2,width:ie,height:$}))}else X.show&&this.drawStateIcon(t,v);this.updateLinkPoints(t,v)}},"single-node");Eu("star",{options:{size:60,style:{stroke:Xt.defaultNode.style.stroke,fill:Xt.defaultNode.style.fill,lineWidth:Xt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Xt.nodeLabel.style.fill,fontSize:Xt.nodeLabel.style.fontSize,fontFamily:Xt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Xt.defaultNode.linkPoints.size,lineWidth:Xt.defaultNode.linkPoints.lineWidth,fill:Xt.defaultNode.linkPoints.fill,stroke:Xt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:A({},Xt.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(t),o=e.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});e.shapeMap[this.type+"-keyShape"]=o;var s=i.width,l=i.height,u=i.show,c=i.text;return u&&(c?e.shapeMap[this.type+"-icon"]=e.addShape("text",{attrs:A({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.shapeMap[this.type+"-icon"]=e.addShape("image",{attrs:A({x:-s/2,y:-l/2},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.leftBottom,u=i.rightBottom,c=i.size,f=i.r,d=Ur(i,["top","left","right","leftBottom","rightBottom","size","r"]),h=this.getSize(t),v=h[0];if(s){var p=Math.cos((18+72*0)/180*Math.PI)*v,g=Math.sin((18+72*0)/180*Math.PI)*v;e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:A(A({},d),{x:p,y:-g,r:c/2||f||5}),className:"link-point-right",name:"link-point-right"})}if(a){var p=Math.cos((18+72*1)/180*Math.PI)*v,g=Math.sin((18+72*1)/180*Math.PI)*v;e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:A(A({},d),{x:p,y:-g,r:c/2||f||5}),className:"link-point-top",name:"link-point-top"})}if(o){var p=Math.cos((18+72*2)/180*Math.PI)*v,g=Math.sin((18+72*2)/180*Math.PI)*v;e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:A(A({},d),{x:p,y:-g,r:c/2||f||5}),className:"link-point-left",name:"link-point-left"})}if(l){var p=Math.cos((18+72*3)/180*Math.PI)*v,g=Math.sin((18+72*3)/180*Math.PI)*v;e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:A(A({},d),{x:p,y:-g,r:c/2||f||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(u){var p=Math.cos((18+72*4)/180*Math.PI)*v,g=Math.sin((18+72*4)/180*Math.PI)*v;e.shapeMap["link-point-right-bottom"]=e.addShape("circle",{attrs:A(A({},d),{x:p,y:-g,r:c/2||f||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(t){for(var e=this.getSize(t),n=e[0],i=n*3/8,a=t.innerR||i,o=[],s=0;s<5;s++){var l=Math.cos((18+72*s)/180*Math.PI)*n,u=Math.sin((18+72*s)/180*Math.PI)*n,c=Math.cos((54+72*s)/180*Math.PI)*a,f=Math.sin((54+72*s)/180*Math.PI)*a;s===0?o.push(["M",l,-u]):o.push(["L",l,-u]),o.push(["L",c,-f])}return o.push(["Z"]),o},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},i=jt({},e,n),a=this.getPath(t),o=A({path:a},i);return o},update:function(t,e,n){var i=e.getContainer(),a=this.getOptions({}).style,o=this.getPath(t),s={stroke:t.color,path:o},l=e.get("keyShape"),u=jt({},a,l.attr(),s);u=jt(u,t.style),this.updateShape(t,e,u,!0,n),this.updateLinkPoints(t,i)},updateLinkPoints:function(t,e){var n=this.getOptions({}).linkPoints,i=e.shapeMap["link-point-left"]||e.find(function(k){return k.get("className")==="link-point-left"}),a=e.shapeMap["link-point-right"]||e.find(function(k){return k.get("className")==="link-point-right"}),o=e.shapeMap["link-point-top"]||e.find(function(k){return k.get("className")==="link-point-top"}),s=e.shapeMap["link-point-left-bottom"]||e.find(function(k){return k.get("className")==="link-point-left-bottom"}),l=e.shapeMap["link-point-left-bottom"]||e.find(function(k){return k.get("className")==="link-point-right-bottom"}),u=n,c=i||a||o||s||l;c&&(u=c.attr());var f=jt({},u,t.linkPoints),d=f.fill,h=f.stroke,v=f.lineWidth,p=f.size/2;p||(p=f.r);var g=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},m=g.left,y=g.right,b=g.top,x=g.leftBottom,w=g.rightBottom,S=this.getSize(t),C=S[0],_={r:p,fill:d,stroke:h,lineWidth:v},T=Math.cos((18+72*0)/180*Math.PI)*C,E=Math.sin((18+72*0)/180*Math.PI)*C;a?!y&&y!==void 0?(a.remove(),delete e.shapeMap["link-point-right"]):a.attr(A(A({},_),{x:T,y:-E})):y&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:A(A({},_),{x:T,y:-E}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),T=Math.cos((18+72*1)/180*Math.PI)*C,E=Math.sin((18+72*1)/180*Math.PI)*C,o?!b&&b!==void 0?(o.remove(),delete e.shapeMap["link-point-top"]):o.attr(A(A({},_),{x:T,y:-E})):b&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:A(A({},_),{x:T,y:-E}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),T=Math.cos((18+72*2)/180*Math.PI)*C,E=Math.sin((18+72*2)/180*Math.PI)*C,i?!m&&m!==void 0?(i.remove(),delete e.shapeMap["link-point-left"]):i.attr(A(A({},_),{x:T,y:-E})):m&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:A(A({},_),{x:T,y:-E}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),T=Math.cos((18+72*3)/180*Math.PI)*C,E=Math.sin((18+72*3)/180*Math.PI)*C,s?!x&&x!==void 0?(s.remove(),delete e.shapeMap["link-point-left-bottom"]):s.attr(A(A({},_),{x:T,y:-E})):x&&(e.shapeMap["link-point-left-bottom"]=e.addShape("circle",{attrs:A(A({},_),{x:T,y:-E}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),T=Math.cos((18+72*4)/180*Math.PI)*C,E=Math.sin((18+72*4)/180*Math.PI)*C,l?!w&&w!==void 0?(s.remove(),delete e.shapeMap["link-point-right-bottom"]):l.attr(A(A({},_),{x:T,y:-E})):w&&(e.shapeMap["link-point-right-bottom"]=e.addShape("circle",{attrs:A(A({},_),{x:T,y:-E}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var i0=el.defaultSubjectColors;Eu("donut",{options:{size:Xt.defaultNode.size,style:{x:0,y:0,stroke:Xt.defaultNode.style.stroke,fill:Xt.defaultNode.style.fill,lineWidth:Xt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Xt.nodeLabel.style.fill,fontSize:Xt.nodeLabel.style.fontSize,fontFamily:Xt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Xt.defaultNode.linkPoints.size,lineWidth:Xt.defaultNode.linkPoints.lineWidth,fill:Xt.defaultNode.linkPoints.fill,stroke:Xt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:A({},Xt.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(t),o=Dt({},i,t.icon),s=e.addShape("circle",{attrs:a,className:this.type+"-keyShape",draggable:!0,name:this.type+"-keyShape"});e.shapeMap[this.type+"-keyShape"]=s;var l=o.width,u=o.height,c=o.show,f=o.text;c&&(f?e.shapeMap[this.type+"-icon"]=e.addShape("text",{attrs:A({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.shapeMap[this.type+"-icon"]=e.addShape("image",{attrs:A({x:-l/2,y:-u/2},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}));var d=s.attr("r"),h=.6*d,v=(d+h)/2,p=t,g=p.donutAttrs,m=g===void 0?{}:g,y=p.donutColorMap,b=y===void 0?{}:y,x=Object.keys(m).length;if(m&&x>1){var w=[],S=0;if(Object.keys(m).forEach(function(E){var k=m[E]||0;!zt(k)||(w.push({key:E,value:k,color:b[E]}),S+=k)}),S){var C=d-h;if(x===1){e.shapeMap["fan-shape-0"]=e.addShape("circle",{attrs:{r:v,x:0,y:0,stroke:w[0].color||i0[0],lineWidth:C},name:"fan-shape-0"});return}var _=[v,0],T=0;w.forEach(function(E,k){var I=E.value/S;if(!(I<.001)){if(I>.999&&(I=1),I===1){e.shapeMap["fan-shape-"+k]=e.addShape("circle",{attrs:{r:v,x:0,y:0,stroke:E.color||i0[k%i0.length],lineWidth:C},name:"fan-shape-"+k});return}E.percent=I,E.angle=I*Math.PI*2,E.beginAgnle=T,T+=E.angle,E.endAngle=T,E.arcBegin=_,E.arcEnd=[v*Math.cos(E.endAngle),-v*Math.sin(E.endAngle)];var P=E.angle>Math.PI?1:0,F=[["M",E.arcBegin[0],E.arcBegin[1]],["A",v,v,0,P,0,E.arcEnd[0],E.arcEnd[1]],["L",E.arcEnd[0],E.arcEnd[1]]];e.shapeMap["fan-shape-"+k]=e.addShape("path",{attrs:{path:F,lineWidth:C,stroke:E.color||i0[k%i0.length]},name:"fan-shape-"+k}),_=E.arcEnd}})}}return this.drawLinkPoints(t,e),s},update:void 0},"circle");var IS=function(t){var e=t.x,n=t.y;return{x:e,y:n,centerX:e,centerY:n,minX:e,minY:n,maxX:e,maxY:n,height:0,width:0}},d5e=function(t){t===void 0&&(t=[]);var e=[],n=[];t.forEach(function(l){e.push(l.x),n.push(l.y)});var i=Math.min.apply(Math,e),a=Math.max.apply(Math,e),o=Math.min.apply(Math,n),s=Math.max.apply(Math,n);return{centerX:(i+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:i,minY:o,height:s-o,width:a-i}},cI=function(t){for(var e=[],n={},i=t.length,a=i-1;a>=0;a--){var o=t[a];o.id=o.x+"|||"+o.y,n[o.id]=o,e.push(o)}return e},I7=function(t){return cI(t)},PS=function(t,e){return t.width||t.height?{centerX:t.centerX,centerY:t.centerY,minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e,height:t.height+2*e,width:t.width+2*e}:t},h5e=function(t,e){var n=Math.abs(t.x-e.centerX),i=Math.abs(t.y-e.centerY);return n===0&&i===0?0:n/e.width>i/e.height},fI=function(t,e,n){var i=h5e(e,t);if(i===0){var a=t.centerX,o=t.centerY;return n.y<e.y?o=t.minY:n.x>e.x?a=t.maxX:n.x<e.x?a=t.minX:n.x===e.x&&(o=t.maxY),{x:a,y:o}}return i?{x:e.x>t.centerX?t.maxX:t.minX,y:e.y}:{x:e.x,y:e.y>t.centerY?t.maxY:t.minY}},P7=function(t,e){var n=Math.min(t.minX,e.minX),i=Math.min(t.minY,e.minY),a=Math.max(t.maxX,e.maxX),o=Math.max(t.maxY,e.maxY);return{centerX:(n+a)/2,centerY:(i+o)/2,minX:n,minY:i,maxX:a,maxY:o,height:o-i,width:a-n}},dI=function(t){return[{x:t.minX,y:t.minY},{x:t.maxX,y:t.minY},{x:t.maxX,y:t.maxY},{x:t.minX,y:t.maxY}]},DS=function(t,e){var n=t.x,i=t.y;return n<e.minX||n>e.maxX||i<e.minY||i>e.maxY},v5e=function(t,e){return e<t.minX||e>t.maxX?[]:[{x:e,y:t.minY},{x:e,y:t.maxY}]},p5e=function(t,e){return e<t.minY||e>t.maxY?[]:[{x:t.minX,y:e},{x:t.maxX,y:e}]},g5e=function(t,e){return v5e(t,e.x).concat(p5e(t,e.y))},a0=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},m5e=function(t,e){var n=-2,i=0;return e.forEach(function(a){a&&(t.x===a.x&&(i+=n),t.y===a.y&&(i+=n))}),i},D7=function(t,e,n,i,a){return a0(t,e)+a0(t,n)+m5e(t,[e,n,i,a])},y5e=function r(t,e,n,i,a){a===void 0&&(a=0),t.unshift(e[i]),n[i]&&n[i]!==i&&a<=100&&r(t,e,n,n[i],a+1)},b5e=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)},RS=function(t,e,n,i){var a=n.x-t.x,o=n.y-t.y,s=i.x-t.x,l=i.y-t.y,u=n.x-e.x,c=n.y-e.y,f=i.x-e.x,d=i.y-e.y,h=a*l-o*s,v=u*d-c*f,p=a*c-o*u,g=s*d-l*f;return h*v<=0&&p*g<=0},hI=function(t,e,n){if(n.width||n.height){var i=dI(n),a=i[0],o=i[1],s=i[2],l=i[3];return RS(t,e,a,o)||RS(t,e,a,l)||RS(t,e,o,s)||RS(t,e,s,l)}return!1},x5e=function(t,e,n,i){var a=[];return t.forEach(function(o){if(o!==e&&(o.x===e.x||o.y===e.y)){if(hI(o,e,n)||hI(o,e,i))return;a.push(o)}}),cI(a)},w5e=function(t,e,n,i,a,o,s){var l=[],u=[e],c={},f={},d={};f[e.id]=0,d[e.id]=D7(e,n,e);var h={};t.forEach(function(m){h[m.id]=m});for(var v,p;u.length;){if(v=void 0,p=1/0,u.forEach(function(m){d[m.id]<=p&&(p=d[m.id],v=m)}),v===n){var g=[];return y5e(g,h,c,n.id),g}b5e(u,v),l.push(v),x5e(t,v,i,a).forEach(function(m){if(l.indexOf(m)===-1){u.indexOf(m)===-1&&u.push(m);var y=d[v.id]+a0(v,m);f[m.id]&&y>=f[m.id]||(c[m.id]=v.id,f[m.id]=y,d[m.id]=f[m.id]+D7(m,n,e,o,s))}})}return[e,n]},S5e=function(t,e,n){return!(t.x===e.x&&e.x===n.x||t.y===e.y&&e.y===n.y)},C5e=function(t,e,n,i){var a=a0(t,e),o=a0(n,e);a<i&&(i=a),o<i&&(i=o);var s={x:e.x-i/a*(e.x-t.x),y:e.y-i/a*(e.y-t.y)},l={x:e.x-i/o*(e.x-n.x),y:e.y-i/o*(e.y-n.y)};return[s,l]},R7=function(t,e){var n=[],i=t[0];return n.push("M"+i.x+" "+i.y),t.forEach(function(a,o){var s=t[o+1],l=t[o+2];if(s&&l)if(S5e(a,s,l)){var u=C5e(a,s,l,e),c=u[0],f=u[1];n.push("L"+c.x+" "+c.y),n.push("Q"+s.x+" "+s.y+" "+f.x+" "+f.y),n.push("L"+f.x+" "+f.y)}else n.push("L"+s.x+" "+s.y);else s&&n.push("L"+s.x+" "+s.y)}),n.join("")},O7=function(t,e,n,i,a){var o,s;if(!n||!n.getType())o=IS(t);else if(n.getType()==="combo"){var l=n.getKeyShape();o=l.getCanvasBBox()||IS(t),o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=n.getBBox();if(!i||!i.getType())s=IS(e);else if(i.getType()==="combo"){var u=i.getKeyShape().getBBox();if(u){var c=i.getModel(),f=c.x,d=c.y;s={x:f,y:d,width:u.width,height:u.height,minX:u.minX+f,maxX:u.maxX+f,minY:u.minY+d,maxY:u.maxY+d},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=IS(e)}else s=i&&i.getBBox();var h=PS(o,a),v=PS(s,a),p=fI(h,t,e),g=fI(v,e,t),m=d5e([p,g]),y=P7(h,m),b=P7(v,m),x=[];x=x.concat(dI(y)).concat(dI(b));var w={x:(t.x+e.x)/2,y:(t.y+e.y)/2};[m,y,b].forEach(function(C){x=x.concat(g5e(C,w).filter(function(_){return DS(_,h)&&DS(_,v)}))}),[{x:p.x,y:g.y},{x:g.x,y:p.y}].forEach(function(C){DS(C,h)&&DS(C,v)&&x.push(C)}),x.unshift(p),x.push(g),x=cI(x);var S=w5e(x,p,g,o,s,t,e);return S.unshift(t),S.push(e),I7(S)},E5e=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},_5e=function(t,e,n,i,a){return I7(O7(t,e,n,i,a.offset))},T5e={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:E5e,fallbackRoute:_5e},Gu=function(t,e){var n=Math.round(Math.abs(t/e)),i=t<0?-1:1;return n<0?0:i*n},A5e=function(t,e,n){var i={};return t.forEach(function(a){if(!!a)for(var o=PS(a.getBBox(),n),s=Gu(o.minX,e);s<=Gu(o.maxX,e);s+=1)for(var l=Gu(o.minY,e);l<=Gu(o.maxY,e);l+=1)i[s+"|||"+l]=!0}),i},vI=function(t,e){var n=e.x-t.x,i=e.y-t.y;return n||i?Math.atan2(i,n):0},L7=function(t,e){var n=Math.abs(t-e);return n>Math.PI?2*Math.PI-n:n},F7=function(t,e,n){for(var i=1/0,a=0,o=e.length;a<o;a++){var s=n(t,e[a]);s<i&&(i=s)}return i},N7=function(t,e,n,i,a){var o=[];if(!n)return[t];var s=a.directions,l=a.offset,u=n.getBBox(),c=e.x>u.minX&&e.x<u.maxX&&e.y>u.minY&&e.y<u.maxY,f=PS(u,l);for(var d in f)f[d]=Gu(f[d],a.gridSize);if(c){for(var h=0,v=s;h<v.length;h++)for(var p=v[h],g=[[{x:f.minX,y:f.minY},{x:f.maxX,y:f.minY}],[{x:f.minX,y:f.minY},{x:f.minX,y:f.maxY}],[{x:f.maxX,y:f.minY},{x:f.maxX,y:f.maxY}],[{x:f.minX,y:f.maxY},{x:f.maxX,y:f.maxY}]],d=0;d<4;d++){var m=g[d],y=el.getLineIntersect(t,{x:t.x+p.stepX*f.width,y:t.y+p.stepY*f.height},m[0],m[1]);y&&!hI(t,y,u)&&(y.id=y.x+"|||"+y.y,o.push(y))}return o}var b=fI(f,t,i);return b.id=b.x+"|||"+b.y,[b]},pI=function(t,e,n,i){var a=vI(t,e);if(!n[t.id]){var o=vI(i,t);return L7(o,a)}var s=vI({x:n[t.id].x,y:n[t.id].y},t);return L7(s,a)},k5e=function(t,e,n,i,a,o,s){var l=[i],u=t.id,c=t.x,f=t.y,d={x:c,y:f,id:u};for(pI(d,o,e,n)&&l.unshift({x:o.x===i.x?i.x:d.x*s,y:o.y===i.y?i.y:d.y*s});e[u]&&e[u].id!==u;){var h={x:c,y:f,id:u},v=e[u].id,p=e[u].x,g=e[u].y,m={x:p,y:g,id:v},y=pI(m,h,e,n);y&&l.unshift({x:m.x===h.x?l[0].x:m.x*s,y:m.y===h.y?l[0].y:m.y*s}),u=v,c=p,f=g}var b={x:c,y:f,id:u};return l[0].x=b.x===n.x?a.x:l[0].x,l[0].y=b.y===n.y?a.y:l[0].y,l.unshift(a),l},M5e=function(t,e,n,i,a){if(isNaN(t.x)||isNaN(e.x))return[];var o=Dt(T5e,a);o.obstacles=o.obstacles||[];var s=o.gridSize,l=A5e(o.obstacles.concat([n,i]),s,o.offset),u={x:Gu(t.x,s),y:Gu(t.y,s)},c={x:Gu(e.x,s),y:Gu(e.y,s)};t.id=u.x+"|||"+u.y,e.id=c.x+"|||"+c.y;var f=N7(u,t,n,c,o),d=N7(c,e,i,u,o);f.forEach(function(P){delete l[P.id]}),d.forEach(function(P){delete l[P.id]});for(var h={},v={},p={},g={},m={},y=0;y<f.length;y++){var b=f[y];h[b.id]=b,g[b.id]=0,m[b.id]=F7(b,d,o.distFunc)}for(var x=o.maximumLoops,w=o.penalties,S,C,_,T,E,k,I;Object.keys(h).length>0&&x>0&&(S=void 0,C=1/0,Object.keys(h).forEach(function(P){var F=h[P].id;m[F]<=C&&(C=m[F],S=h[F])}),!!S);){if(d.findIndex(function(P){return P.x===S.x&&P.y===S.y})>-1)return k5e(S,p,u,e,t,c,s);delete h[S.id],v[S.id]=!0;for(var y=0;y<o.directions.length;y++)_=o.directions[y],T={x:S.x+_.stepX,y:S.y+_.stepY,id:Math.round(S.x)+_.stepX+"|||"+(Math.round(S.y)+_.stepY)},!v[T.id]&&(I=pI(S,T,p,u),!(I>o.maxAllowedDirectionChange)&&(l[T.id]||(h[T.id]||(h[T.id]=T),E=o.distFunc(S,T)+(isNaN(w[I])?s:w[I]),k=g[S.id]+E,!(g[T.id]&&k>=g[T.id])&&(p[T.id]=S,g[T.id]=k,m[T.id]=k+F7(T,d,o.distFunc)))));x-=1}return o.fallbackRoute(t,e,n,i,o)};vz("polyline",{options:{color:Xt.defaultEdge.color,size:Xt.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:Xt.defaultEdge.style.stroke,lineAppendWidth:Xt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Xt.edgeLabel.style.fill,fontSize:Xt.edgeLabel.style.fontSize,fontFamily:Xt.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:A({},Xt.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t);n.radius===0&&delete n.radius;var i=e.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:n});return e.shapeMap["edge-shape"]=i,i},getShapeStyle:function(t){var e=this.options.style,n={stroke:t.color},i=jt({},e,n,t.style);t=this.getPathPoints(t),this.radius=i.radius,this.offset=i.offset;var a=t.startPoint,o=t.endPoint,s=this.getControlPoints(t),l=[a];s&&(l=l.concat(s)),l.push(o);var u=t.sourceNode,c=t.targetNode,f=i.radius,d=this.options.routeCfg,h=jt({},d,t.routeCfg);h.offset=i.offset;var v=this.getPath(l,u,c,f,h);(Qe(v)&&v.length<=1||ot(v)&&v.indexOf("L")===-1)&&(v="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(v="M0 0, L0 0");var p=jt({},Xt.defaultEdge.style,i,{lineWidth:t.size,path:v});return p},updateShapeStyle:function(t,e){var n=e.getContainer();if(!!e.isVisible()){var i={stroke:t.color},a=n.shapeMap["edge-shape"]||n.find(function(x){return x.get("className")==="edge-shape"})||e.getKeyShape(),o=t.size;t=this.getPathPoints(t);var s=t.startPoint,l=t.endPoint,u=this.getControlPoints(t),c=[s];u&&(c=c.concat(u)),c.push(l);var f=a.attr(),d=jt({},i,f,t.style),h=t.sourceNode,v=t.targetNode,p=d.radius,g=this.options.routeCfg,m=jt({},g,t.routeCfg);m.offset=d.offset;var y=this.getPath(c,h,v,p,m);(Qe(y)&&y.length<=1||ot(y)&&y.indexOf("L")===-1)&&(y="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(l.x)||isNaN(l.y))&&(y="M0 0, L0 0"),f.endArrow&&d.endArrow===!1&&(t.style.endArrow={path:""}),f.startArrow&&d.startArrow===!1&&(t.style.startArrow={path:""});var b=jt(i,a.attr(),{lineWidth:o,path:y},t.style);a&&a.attr(b)}},getPath:function(t,e,n,i,a){var o=a.offset,s=a.simple;if(!o||t.length>2){if(i)return R7(t,i);var l=[];return G(t,function(d,h){h===0?l.push(["M",d.x,d.y]):l.push(["L",d.x,d.y])}),l}var u=s?O7(t[t.length-1],t[0],n,e,o):M5e(t[0],t[t.length-1],e,n,a);if(!u||!u.length)return"M0 0, L0 0";if(i){var c=R7(u,i);return c}var f=el.pointsToPolygon(u);return f}},"single-edge");var B7=Bu.cloneEvent,$7=Bu.isNaN,z7=Math.abs,I5e=10,P5e=["shift","ctrl","alt","control"],D5e={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(t){var e=this.origin,n=+t.clientX,i=+t.clientY;if(!($7(n)||$7(i))){var a=n-e.x,o=i-e.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:n,y:i};var s=this.graph.get("width"),l=this.graph.get("height"),u=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,f=this.scalableRange;c<1&&c>-1&&(c=s*c,f=l*f),(u.minX<=s+c&&u.minX+a>s+c||u.maxX+c>=0&&u.maxX+c+a<0)&&(a=0),(u.minY<=l+f&&u.minY+o>l+f||u.maxY+f>=0&&u.maxY+f+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(t){var e=this,n=t.originalEvent.touches,i=n[0],a=n[1];i&&a||(t.preventDefault(),e.onMouseDown(t))},onMouseDown:function(t){var e=this,n=t.originalEvent;if(!(n&&t.name!==V1.TOUCHSTART&&n.button!==0)&&!(t.name!==V1.TOUCHSTART&&typeof window!="undefined"&&window.event&&!window.event.buttons&&!window.event.button)&&!!this.shouldBegin.call(this,t)&&!e.keydown){var i=t.target,a=i&&i.isCanvas&&i.isCanvas();if(!(!this.allowDragOnItem&&!a)&&(e.origin={x:t.clientX,y:t.clientY},e.dragging=!1,this.enableOptimize)){for(var o=this.graph,s=o.getEdges(),l=0,u=s.length;l<u;l++){var c=s[l].get("group").get("children");!c||c.forEach(function(x){x.set("ori-visibility",x.get("ori-visibility")||x.get("visible")),x.hide()})}for(var f=o.getNodes(),d=0,h=f.length;d<h;d++)for(var v=f[d].getContainer(),p=v.get("children"),g=0,m=p;g<m.length;g++){var y=m[g],b=y.get("isKeyShape");b||(y.set("ori-visibility",y.get("ori-visibility")||y.get("visible")),y.hide())}}}},onTouchMove:function(t){var e=this,n=t.originalEvent.touches,i=n[0],a=n[1];if(i&&a){this.onMouseUp(t);return}t.preventDefault(),e.onMouseMove(t)},onMouseMove:function(t){var e=this.graph;if(!this.keydown){var n=t.target,i=n&&n.isCanvas&&n.isCanvas();if(!(!this.allowDragOnItem&&!i)&&(t=B7(t),!!this.origin)){if(this.dragging)t.type="drag",e.emit("canvas:drag",t);else{if(z7(this.origin.x-t.clientX)+z7(this.origin.y-t.clientY)<I5e)return;this.shouldBegin.call(this,t)&&(t.type="dragstart",e.emit("canvas:dragstart",t),this.originPosition={x:t.clientX,y:t.clientY},this.dragging=!0)}this.shouldUpdate.call(this,t)&&this.updateViewport(t)}}},onMouseUp:function(t){var e,n,i=this.graph;if(!this.keydown){var a=i.getZoom(),o=i.get("modeController"),s=(n=(e=o==null?void 0:o.modes[o.mode])===null||e===void 0?void 0:e.filter(function(C){return C.type==="zoom-canvas"}))===null||n===void 0?void 0:n[0],l=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var u=i.getEdges(),c=0,f=u.length;c<f;c++){var d=u[c].get("group").get("children");!d||d.forEach(function(C){var _=C.get("ori-visibility");_&&C.show()})}if(a>l)for(var h=i.getNodes(),v=0,p=h.length;v<p;v++)for(var g=h[v].getContainer(),m=g.get("children"),y=0,b=m;y<b.length;y++){var x=b[y],w=x.get("isKeyShape");if(!w){var S=x.get("ori-visibility");S&&x.show()}}}if(!this.dragging){this.origin=null;return}t=B7(t),this.shouldEnd.call(this,t)&&this.updateViewport(t),t.type="dragend",t.dx=t.clientX-this.originPosition.x,t.dy=t.clientY-this.originPosition.y,i.emit("canvas:dragend",t),this.endDrag()}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1},onKeyDown:function(t){var e=this,n=t.key;!n||(P5e.indexOf(n.toLowerCase())>-1?e.keydown=!0:e.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},R5e={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd"}},validationCombo:function(t){if(!this.origin||!t||t.destroyed)return!1;var e=t.getType();return e==="combo"},onTouchStart:function(t){if(!!t.item){var e=this;try{var n=t.originalEvent.touches,i=n[0],a=n[1];if(i&&a)return;t.preventDefault()}catch{console.warn("Touch original event not exist!")}e.onDragStart(t)}},onTouchMove:function(t){var e=this;try{var n=t.originalEvent.touches,i=n[0],a=n[1];if(i&&a){e.onDragEnd(t);return}t.preventDefault()}catch{console.warn("Touch original event not exist!")}e.onDrag(t)},onDragStart:function(t){var e=this;if(this.currentShouldEnd=!0,!!this.shouldBegin.call(this,t)){var n=t.item;if(!(!n||n.destroyed||n.hasLocked())){var i=n.getContainer();i.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n);var a=t.target;if(a){var o=a.get("isAnchorPoint");if(o)return}var s=this.graph;this.targets=[],this.targetCombo=null;var l=s.findAllByState("node",this.selectedState),u=n.get("id"),c=l.filter(function(d){var h=d.get("id");return u===h});c.length===0?this.targets.push(n):l.length>1?l.forEach(function(d){var h=d.hasLocked();h||e.targets.push(d)}):this.targets.push(n);var f=[];this.targets.forEach(function(d){f.push(Or(d.getModel()))}),this.set("beforeDragNodes",f),this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(d){var h=d.getEdges();h.forEach(function(v){!v.isVisible()||(e.hidenEdge[v.getID()]=!0,v.hide())})}),this.origin={x:t.x,y:t.y},this.point={},this.originPoint={}}}},onDrag:function(t){var e=this;!this.origin||!this.shouldUpdate.call(this,t)||(this.get("enableDelegate")?this.updateDelegate(t):this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge")}):this.targets.map(function(n){e.update(n,t)}))},onDragEnd:function(t){var e=this,n;if(!!this.origin){(n=this.cachedCaptureItems)===null||n===void 0||n.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(l){e.hidenEdge[l.getID()]&&l.show(),l.refresh()})}),this.hidenEdge={};var i=this.graph;if(i.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){a.before.nodes.push({id:o.id,x:o.x,y:o.y})}),this.targets.forEach(function(o){var s=o.getModel();a.after.nodes.push({id:s.id,x:s.x,y:s.y})}),i.pushStack("update",Or(a))}i.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(t){var e=t.item;if(this.currentShouldEnd=this.shouldEnd.call(this,t,e),this.updatePositions(t,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(e))){var n=this.graph;if(this.comboActiveState&&n.setItemState(e,this.comboActiveState,!1),this.targetCombo=e,this.onlyChangeComboSize)n.updateCombos();else{var i=e.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==i.id&&n.updateComboTree(a,i.id)}),n.updateCombo(e)}n.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(t){var e=this.graph;this.currentShouldEnd=this.shouldEnd.call(this,t,void 0),this.updatePositions(t,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?e.updateCombos():this.targets.map(function(n){var i=n.getModel();i.comboId&&e.updateComboTree(n)}))},onDropNode:function(t){if(!(!this.targets||this.targets.length===0)){var e=this,n=t.item,i=e.graph,a=n.getModel().comboId,o=a?i.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd.call(this,t,o),this.updatePositions(t,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)i.updateCombos();else if(a){var s=i.findById(a);e.comboActiveState&&i.setItemState(s,e.comboActiveState,!1),this.targets.map(function(l){var u=l.getModel();a!==u.comboId&&i.updateComboTree(l,a)}),i.updateCombo(s)}else this.targets.map(function(l){var u=l.getModel();u.comboId&&i.updateComboTree(l)});i.emit("dragnodeend",{items:this.targets,targetItem:n})}}},onDragEnter:function(t){var e=t.item;if(!!this.validationCombo(e)){var n=this.graph;this.comboActiveState&&n.setItemState(e,this.comboActiveState,!0)}},onDragLeave:function(t){var e=t.item;if(!!this.validationCombo(e)){var n=this.graph;this.comboActiveState&&n.setItemState(e,this.comboActiveState,!1)}},updatePositions:function(t,e){var n=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge"),updateFunc:this.update}):e||this.targets.map(function(i){return n.update(i,t)}):this.targets.map(function(i){return n.update(i,t,e)}))},update:function(t,e,n){var i=this.origin,a=t.get("model"),o=t.get("id");this.point[o]||(this.point[o]={x:a.x||0,y:a.y||0});var s=e.x-i.x+this.point[o].x,l=e.y-i.y+this.point[o].y;n&&(s+=i.x-e.x,l+=i.y-e.y);var u={x:s,y:l};this.get("updateEdge")?this.graph.updateItem(t,u,!1):t.updatePosition(u)},debounceUpdate:pm(function(r){var t=r.targets,e=r.graph,n=r.point,i=r.origin,a=r.evt,o=r.updateEdge;r.updateFunc,t.map(function(s){var l=s.get("model"),u=s.get("id");n[u]||(n[u]={x:l.x||0,y:l.y||0});var c=a.x-i.x+n[u].x,f=a.y-i.y+n[u].y,d={x:c,y:f};o?e.updateItem(s,d,!1):s.updatePosition(d)})},50,!0),updateDelegate:function(t){var e=this.graph;if(this.delegateRect){var d=t.x-this.origin.x+this.originPoint.minX,h=t.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:d,y:h})}else{var n=e.get("group"),i=Dt({},wd.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(t),o=a.x,s=a.y,l=a.width,u=a.height,c=a.minX,f=a.minY;this.originPoint={x:o,y:s,width:l,height:u,minX:c,minY:f},this.delegateRect=n.addShape("rect",{attrs:A({width:l,height:u,x:o,y:s},i),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(t){var e=this.targets;e.length===0&&e.push(t.item);for(var n=1/0,i=-1/0,a=1/0,o=-1/0,s=0;s<e.length;s++){var l=e[s],u=l.getBBox(),c=u.minX,f=u.minY,d=u.maxX,h=u.maxY;c<n&&(n=c),f<a&&(a=f),d>i&&(i=d),h>o&&(o=h)}var v=Math.floor(n),p=Math.floor(a),g=Math.ceil(i)-Math.floor(n),m=Math.ceil(o)-Math.floor(a);return{x:v,y:p,width:g,height:m,minX:n,minY:a}}},O5e={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(t){var e=this;try{var n=t.originalEvent.touches,i=n[0],a=n[1];if(i&&a)return;t.preventDefault()}catch{console.warn("Touch original event not exist!")}e.setAllItemStates(t)},clearOnTouchStart:function(t){var e=this;try{var n=t.originalEvent.touches,i=n[0],a=n[1];if(i&&a)return;t.preventDefault()}catch{console.warn("Touch original event not exist!")}e.clearActiveState(t)},setAllItemStates:function(t){var e=t.item,n=this.graph;if(this.item=e,!!this.shouldUpdate(t.item,{event:t,action:"activate"})){for(var i=this,a=this.activeState,o=this.inactiveState,s=n.getNodes(),l=n.getCombos(),u=n.getEdges(),c=n.get("vedges"),f=s.length,d=l.length,h=u.length,v=c.length,p=0;p<f;p++){var g=s[p],m=g.hasState("selected");i.resetSelected&&m&&n.setItemState(g,"selected",!1),n.setItemState(g,a,!1),o&&n.setItemState(g,o,!0)}for(var p=0;p<d;p++){var y=l[p],m=y.hasState("selected");i.resetSelected&&m&&n.setItemState(y,"selected",!1),n.setItemState(y,a,!1),o&&n.setItemState(y,o,!0)}for(var p=0;p<h;p++){var b=u[p];n.setItemState(b,a,!1),o&&n.setItemState(b,o,!0)}for(var p=0;p<v;p++){var x=c[p];n.setItemState(x,a,!1),o&&n.setItemState(x,o,!0)}o&&n.setItemState(e,o,!1),n.setItemState(e,a,!0);for(var w=e.getEdges(),S=w.length,p=0;p<S;p++){var b=w[p],C=void 0;b.getSource()===e?C=b.getTarget():C=b.getSource(),o&&n.setItemState(C,o,!1),n.setItemState(C,a,!0),n.setItemState(b,o,!1),n.setItemState(b,a,!0),b.toFront()}n.emit("afteractivaterelations",{item:t.item,action:"activate"})}},clearActiveState:function(t){var e=this,n=e.get("graph");if(!!e.shouldUpdate(t.item,{event:t,action:"deactivate"})){var i=this.activeState,a=this.inactiveState,o=n.get("autoPaint");n.setAutoPaint(!1);for(var s=n.getNodes()||[],l=n.getCombos()||[],u=n.getEdges()||[],c=n.get("vedges")||[],f=s.length,d=l.length,h=u.length,v=c.length,p=0;p<f;p++){var g=s[p];n.clearItemStates(g,[i,a])}for(var p=0;p<d;p++){var m=l[p];n.clearItemStates(m,[i,a])}for(var p=0;p<h;p++){var y=u[p];n.clearItemStates(y,[i,a,"deactivate"])}for(var p=0;p<v;p++){var b=c[p];n.clearItemStates(b,[i,a,"deactivate"])}n.paint(),n.setAutoPaint(o),n.emit("afteractivaterelations",{item:t.item||e.get("item"),action:"deactivate"})}}},OS=Math.min,G7=Math.max,U7=Math.abs,V7="shift",L5e=["drag","shift","ctrl","alt","control"],F5e={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:V7,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return L5e.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=V7,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(t){var e=t.item,n=this.brush;e||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),n||(n=this.createBrush()),this.originPoint={x:t.canvasX,y:t.canvasY},n.attr({width:0,height:0}),n.show(),this.dragging=!0)},onMouseMove:function(t){!this.dragging||this.trigger!=="drag"&&!this.keydown||this.updateBrush(t)},onMouseUp:function(t){this.graph,!(!this.brush&&!this.dragging)&&(this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(t),this.dragging=!1))},clearStates:function(){var t=this,e=t.graph,n=t.selectedState,i=e.findAllByState("node",n),a=e.findAllByState("edge",n);i.forEach(function(o){return e.setItemState(o,n,!1)}),a.forEach(function(o){return e.setItemState(o,n,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedNodes:function(t){var e=this,n=this,i=n.graph,a=n.originPoint,o=n.shouldUpdate,s=this.selectedState,l={x:t.x,y:t.y},u=i.getPointByCanvas(a.x,a.y),c=OS(l.x,u.x),f=G7(l.x,u.x),d=OS(l.y,u.y),h=G7(l.y,u.y),v=[],p=[];i.getNodes().forEach(function(m){if(!!m.isVisible()){var y=m.getBBox();if(y.centerX>=c&&y.centerX<=f&&y.centerY>=d&&y.centerY<=h&&o(m,"select")){v.push(m);var b=m.getModel();p.push(b.id),i.setItemState(m,s,!0)}}});var g=[];this.includeEdges&&v.forEach(function(m){var y=m.getOutEdges();y.forEach(function(b){if(!!b.isVisible()){var x=b.getModel(),w=x.source,S=x.target;p.includes(w)&&p.includes(S)&&o(b,"select")&&(g.push(b),i.setItemState(b,e.selectedState,!0))}})}),this.selectedEdges=g,this.selectedNodes=v,this.onSelect&&this.onSelect(v,g),i.emit("nodeselectchange",{selectedItems:{nodes:v,edges:g},select:!0})},createBrush:function(){var t=this,e=t.graph.get("canvas").addShape("rect",{attrs:t.brushStyle,capture:!1,name:"brush-shape"});return this.brush=e,this.delegate=e,e},updateBrush:function(t){var e=this.originPoint;this.brush.attr({width:U7(t.canvasX-e.x),height:U7(t.canvasY-e.y),x:OS(t.canvasX,e.x),y:OS(t.canvasY,e.y)})},onKeyDown:function(t){var e=t.key;if(!!e){var n=this.trigger.toLowerCase(),i=e.toLowerCase();i===n||i==="control"&&n==="ctrl"||i==="ctrl"&&n==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},H7="shift",N5e=["shift","ctrl","alt","control"],B5e={getDefaultCfg:function(){return{multiple:!0,trigger:H7,selectedState:"selected"}},getEvents:function(){var t=this;return N5e.indexOf(t.trigger.toLowerCase())>-1||(t.trigger=H7,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),t.multiple?{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(t){var e=this,n=t.item;if(!(!n||n.destroyed)){n.getType();var i=e.graph,a=e.keydown,o=e.multiple,s=e.shouldUpdate,l=e.shouldBegin;if(!!l.call(e,t)){if(!a||!o){var u=i.findAllByState("node",e.selectedState).concat(i.findAllByState("combo",e.selectedState));G(u,function(d){d!==n&&i.setItemState(d,e.selectedState,!1)})}if(n.hasState(e.selectedState)){s.call(e,t)&&i.setItemState(n,e.selectedState,!1);var c=i.findAllByState("node",e.selectedState),f=i.findAllByState("combo",e.selectedState);i.emit("nodeselectchange",{target:n,selectedItems:{nodes:c,combos:f},select:!1})}else{s.call(e,t)&&i.setItemState(n,e.selectedState,!0);var c=i.findAllByState("node",e.selectedState),f=i.findAllByState("combo",e.selectedState);i.emit("nodeselectchange",{target:n,selectedItems:{nodes:c,combos:f},select:!0})}}}},onCanvasClick:function(){var t=this,e=this.graph,n=e.findAllByState("node",this.selectedState);G(n,function(a){e.setItemState(a,t.selectedState,!1)});var i=e.findAllByState("combo",this.selectedState);G(i,function(a){e.setItemState(a,t.selectedState,!1)}),e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},onKeyDown:function(t){var e=this,n=t.key;!n||(n.toLowerCase()===this.trigger.toLowerCase()||n.toLowerCase()==="control"?e.keydown=!0:e.keydown=!1)},onKeyUp:function(){var t=this;t.keydown=!1}},$5e=Zn,W7=.05,z5e={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"}}},getEvents:function(){var t=this.fixSelectedItems;return t.fixState||(t.fixState="selected"),t.fixAll&&(t.fixLineWidth=!0,t.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(t){var e=t.originalEvent.touches,n=e[0],i=e[1];t.preventDefault(),!!i&&(this.shouldBegin&&!this.shouldBegin.call(this,t)||(this.startPoint={pageX:n.pageX,pageY:n.pageY},this.moveable=!0,i&&(this.endPoint={pageX:i.pageX,pageY:i.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(t){if(!!this.moveable){t.preventDefault();var e=t.originalEvent.touches,n=e[0],i=e[1];if(!!i){this.endPoint||(this.endPoint={pageX:i.pageX,pageY:i.pageY});var a=function(h,v){return Math.hypot(v.x-h.x,v.y-h.y)},o=a({x:n.pageX,y:n.pageY},{x:i.pageX,y:i.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var l=this.get("minZoom")||this.graph.get("minZoom"),u=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>u||s<l)){var c=this.graph.get("canvas"),f=c.getPointByClient(t.clientX,t.clientY);this.graph.zoomTo(s,{x:f.x,y:f.y}),this.graph.emit("wheelzoom",t)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(t){var e=this,n=this,i=n.graph,a=n.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin.call(this,t))&&!!this.shouldUpdate.call(this,t)){t.preventDefault();var o=i.get("canvas"),s=o.getPointByClient(t.clientX,t.clientY),l=this.get("sensitivity"),u=i.getZoom(),c=u,f=u;t.wheelDelta<0?c=1-W7*l:c=1/(1-W7*l),f=u*c;var d=this.get("minZoom")||i.get("minZoom"),h=this.get("maxZoom")||i.get("maxZoom");if(!(f>h||f<d)){var v=this.get("enableOptimize");if(v){var p=this.get("optimizeZoom"),g=this.get("optimized"),m=i.getNodes(),y=i.getEdges(),b=m.length,x=y.length;if(!g){for(var w=0;w<b;w++){var S=m[w];if(!S.destroyed)for(var C=S.get("group").get("children"),_=C.length,T=0;T<_;T++){var E=C[T];!E.destoryed&&!E.get("isKeyShape")&&(E.set("ori-visibility",E.get("ori-visibility")||E.get("visible")),E.hide())}}for(var k=0;k<x;k++)for(var I=y[k],C=I.get("group").get("children"),_=C.length,T=0;T<_;T++){var E=C[T];E.set("ori-visibility",E.get("ori-visibility")||E.get("visible")),E.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var P=setTimeout(function(){var Je=i.getZoom(),We=e.get("optimized");if(We){e.set("optimized",!1);for(var Le=0;Le<b;Le++){var $e=m[Le],H=$e.get("group").get("children"),Y=H.length;if(Je<p){var K=$e.getKeyShape(),ee=K.get("ori-visibility");ee&&K.show()}else for(var J=0;J<Y;J++){var ge=H[J],ee=ge.get("ori-visibility");!ge.get("visible")&&ee&&ee&&ge.show()}}for(var Ve=0;Ve<x;Ve++){var Ge=y[Ve],H=Ge.get("group").get("children"),Y=H.length;if(Je<p){var K=Ge.getKeyShape(),ee=K.get("ori-visibility");ee&&K.show()}else for(var J=0;J<Y;J++){var ge=H[J];if(!ge.get("visible")){var ee=ge.get("ori-visibility");ee&&ge.show()}}}}},100);this.set("timeout",P)}if(u<=1){var F=void 0,$=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){F=i.findAllByState("node",a.fixState),$=i.findAllByState("edge",a.fixState);for(var R=u/f,L=F.length,O=0;O<L;O++){var S=F[O],B=S.getContainer(),U=S.getModel(),W=S.getOriginStyle(),X=S.getStateStyle(a.fixState),ie=S.get("shapeFactory").getShape(U.type).getStateStyle(a.fixState,S)[a.fixState];if(a.fixAll){if(f<=1){var q=Or(B.getMatrix());q||(q=[1,0,0,0,1,0,0,0,1]);var j=S.getModel(),fe=j.x,se=j.y;q=$5e(q,[["t",-fe,-se],["s",R,R],["t",fe,se]]),B.setMatrix(q)}}else for(var C=B.get("children"),_=C.length,T=0;T<_;T++){var E=C[T],ce=void 0,_e=void 0;if(a.fixLabel){var Me=E.get("type");if(Me==="text"){ce=E.attr("fontSize")||12;var Ye=X[E.get("name")],De=ie[E.get("name")],D=Ye?Ye.fontSize:12,z=De?De.fontSize:12,V=D||z||12;if(f<=1&&E.attr("fontSize",V/f),_e)break}}if(a.fixLineWidth&&E.get("isKeyShape")){_e=E.attr("lineWidth")||0;var he=X.lineWidth||ie.lineWidth||W.lineWidth||0;if(f<=1&&E.attr("lineWidth",he/f),ce)break}}}for(var re=$.length,pe=0;pe<re;pe++)for(var I=$[pe],B=I.getContainer(),C=B.get("children"),U=I.getModel(),X=I.getStateStyle(a.fixState),ie=I.get("shapeFactory").getShape(U.type).getStateStyle(a.fixState,I)[a.fixState],_=C.length,T=0;T<_;T++){var E=C[T],ce=void 0,_e=void 0;if(a.fixLabel||a.fixAll){var Me=E.get("type");if(Me==="text"){ce=E.attr("fontSize")||12;var Ye=X[E.get("name")],De=ie[E.get("name")],D=Ye?Ye.fontSize:12,z=De?De.fontSize:12,V=D||z||12;if(f<=1&&E.attr("fontSize",V/f),_e)break}}if((a.fixLineWidth||a.fixAll)&&E.get("isKeyShape")){_e=E.attr("lineWidth")||0;var he=X.lineWidth||ie.lineWidth||1;if(f<=1&&E.attr("lineWidth",he/f),ce)break}}}}i.zoomTo(f,{x:s.x,y:s.y}),i.emit("wheelzoom",t)}}}},j7={onMouseEnter:function(t){var e=t.item;this.currentTarget=e,this.showTooltip(t),this.graph.emit("tooltipchange",{item:t.item,action:"show"})},onMouseMove:function(t){if(!this.shouldUpdate(t)){this.hideTooltip();return}!this.currentTarget||t.item!==this.currentTarget||this.updatePosition(t)},onMouseLeave:function(t){!this.shouldEnd(t)||(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(t){var e=this.container;if(!(!t.item||t.item.destroyed)){e||(e=this.createTooltip(this.graph.get("canvas")),this.container=e);var n=this.formatText(t.item.get("model"),t);e.innerHTML=n,Vr(this.container,{visibility:"visible"}),this.updatePosition(t)}},hideTooltip:function(){Vr(this.container,{visibility:"hidden"})},updatePosition:function(t){var e=this.get("shouldBegin"),n=this,i=n.width,a=n.height,o=n.container,s=n.graph;if(!e(t)){Vr(o,{visibility:"hidden"});return}var l=s.getPointByClient(t.clientX,t.clientY),u=s.getCanvasByPoint(l.x,l.y),c=u.x,f=u.y,d=o.getBoundingClientRect();c>i/2?c-=d.width:c+=this.offset,f>a/2?f-=d.height:f+=this.offset;var h=c+"px",v=f+"px";Vr(this.container,{left:h,top:v,visibility:"visible"})},createTooltip:function(t){var e=t.get("el");e.style.position="relative";var n=Qn('<div class="g6-tooltip g6-'+this.item+'-tooltip"></div>');return e.parentNode.appendChild(n),Vr(n,{position:"absolute",visibility:"visible"}),this.width=t.get("width"),this.height=t.get("height"),this.container=n,this.graph.get("tooltips").push(n),n}},G5e=A({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(e){return e.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},j7),U5e=A({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(e){return"source: "+e.source+" target: "+e.target}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},j7),Y7="click",V5e=["click","dblclick"],H5e={getDefaultCfg:function(){return{trigger:Y7,onChange:function(){}}},getEvents:function(){var t,e;return V5e.includes(this.trigger)?e=this.trigger:(e=Y7,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),t={},t["node:"+e]="onNodeClick",t.touchstart="onNodeClick",t},onNodeClick:function(t){var e=t.item;if(!!e){var n=this.graph.findDataById(e.get("id"));if(!!n){var i=n.children;if(!(!i||i.length===0)){var a=!n.collapsed;!this.shouldBegin(t,a)||(n.collapsed=a,e.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:t.item,collapsed:a}),!!this.shouldUpdate(t,a)&&(this.onChange(e,a),this.graph.layout()))}}}}},W5e=Bu.calculationItemsBBox,j5e=function r(t,e){if(e(t)!==!1&&t){var n=t.get("combos");if(n.length===0)return!1;G(n,function(i){r(i,e)})}},Y5e={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(t){var e=t.item;if(!e||e.destroyed||!this.shouldUpdate.call(this,t))return!1;var n=e.getType();return n==="combo"},onDragStart:function(t){var e=this,n=this.graph,i=t.item;if(this.currentShouldEnd=!0,!!this.validationCombo(t)){this.targets=[];var a=n.findAllByState("combo",this.selectedState),o=i.get("id"),s=a.filter(function(l){var u=l.get("id");return o===u});s.length===0?this.targets.push(i):this.targets=a,this.activeState&&this.targets.map(function(l){var u=l.getModel();if(u.parentId){var c=n.findById(u.parentId);c&&n.setItemState(c,e.activeState,!0)}}),this.point={},this.originPoint={},this.origin={x:t.x,y:t.y},this.currentItemChildCombos=[],j5e(i,function(l){if(l.destroyed)return!1;var u=l.getModel();return e.currentItemChildCombos.push(u.id),!0})}},onDrag:function(t){var e=this;if(!!this.origin&&!!this.validationCombo(t))if(this.enableDelegate)this.updateDelegate(t);else{if(this.activeState){var n=this.graph,i=t.item,a=i.getModel(),o=n.getCombos(),s=i.getBBox(),l=s.centerX,u=s.centerY,c=s.width,f=o.filter(function(d){var h=d.getModel();return a.parentId,h.id!==a.id&&!e.currentItemChildCombos.includes(h.id)});f.map(function(d){var h=d.getBBox(),v=h.centerX,p=h.centerY,g=h.width,m=l-v,y=u-p,b=2*Math.sqrt(m*m+y*y);c+g-b>.8*c?n.setItemState(d,e.activeState,!0):n.setItemState(d,e.activeState,!1)})}G(this.targets,function(d){e.updateCombo(d,t)})}},updatePositions:function(t,e){var n=this;(this.enableDelegate||e)&&G(this.targets,function(i){n.updateCombo(i,t,e)})},onDrop:function(t){var e=this,n=t.item;if(this.currentShouldEnd=this.shouldEnd.call(this,t,n),this.updatePositions(t,!this.currentShouldEnd),!(!this.currentShouldEnd||!n||!this.targets||n.destroyed)){var i=this.graph,a=n.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(e.activeState&&i.setItemState(n,e.activeState,!1),e.onlyChangeComboSize?i.updateCombo(o):i.updateComboTree(o,a.id)):i.updateCombo(n)}),this.end(n,t),this.endComparison=!0}},onNodeDrop:function(t){var e=this;if(!(!this.targets||this.targets.length===0)){var n=this.graph,i=t.item,a=i.getModel().comboId,o=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd.call(this,t,o),this.updatePositions(t,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(a){if(this.activeState){var l=n.findById(a);n.setItemState(l,this.activeState,!1)}this.targets.map(function(u){e.onlyChangeComboSize?n.updateCombo(u):a!==u.getID()&&(s=n.findById(a),a!==u.getModel().parentId&&n.updateComboTree(u,a))})}else this.targets.map(function(u){if(e.onlyChangeComboSize)n.updateCombo(u);else{var c=u.getModel();c.comboId&&n.updateComboTree(u)}});this.endComparison=!0,this.end(s,t)}}},onDragEnter:function(t){if(!!this.origin&&!!this.validationCombo(t)){var e=t.item,n=this.graph;this.activeState&&n.setItemState(e,this.activeState,!0)}},onDragLeave:function(t){if(!!this.origin&&!!this.validationCombo(t)){var e=t.item,n=this.graph;this.activeState&&n.setItemState(e,this.activeState,!1)}},onDragEnd:function(t){if(!(!this.targets||this.targets.length===0)){var e=t.item;this.currentShouldEnd&&this.updatePositions(t);var n=this.getParentCombo(e.getModel().parentId),i=this.graph;n&&this.activeState&&i.setItemState(n,this.activeState,!1),this.end(void 0,t)}},end:function(t,e){var n=this;if(!!this.origin){var i=this.graph;if(this.delegateShape){var a=i.get("delegateGroup");a.clear(),this.delegateShape=null}t&&this.activeState&&i.setItemState(t,this.activeState,!1),t||this.targets.map(function(o){n.onlyChangeComboSize?i.updateCombo(o):i.updateComboTree(o)}),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(t,e){var n=this;if(e(t)!==!1&&t){var i=t.get("combos");G(i,function(o){n.traverse(o,e)});var a=t.get("nodes");G(a,function(o){n.traverse(o,e)})}},updateCombo:function(t,e,n){var i=this;this.traverse(t,function(a){return a.destroyed?!1:(i.updateSignleItem(a,e,n),!0)})},updateSignleItem:function(t,e,n){var i=this.origin,a=this.graph,o=t.getModel(),s=t.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var l=e.x-i.x+this.point[s].x,u=e.y-i.y+this.point[s].y;n&&(l+=i.x-e.x,u+=i.y-e.y),a.updateItem(t,{x:l,y:u})},getParentCombo:function(t){var e=this.graph;if(!!t){var n=e.findById(t);if(!!n)return n}},updateDelegate:function(t){var e=this.graph;if(this.delegateShape){var d=t.x-this.origin.x+this.originPoint.minX,h=t.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:d,y:h})}else{var n=e.get("delegateGroup"),i=null;this.targets.length>1?i=W5e(this.targets):i=this.targets[0].getBBox();var a=i.x,o=i.y,s=i.width,l=i.height,u=i.minX,c=i.minY;this.originPoint={x:a,y:o,width:s,height:l,minX:u,minY:c};var f=A(A({},wd.delegateStyle),this.delegateStyle);this.delegateShape=n.addShape("rect",{attrs:A({width:i.width,height:i.height,x:i.x,y:i.y},f),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}}},X7="dblclick",X5e=["click","dblclick"],q5e={getDefaultCfg:function(){return{trigger:X7,relayout:!0}},getEvents:function(){var t,e;return X5e.includes(this.trigger)?e=this.trigger:(e=X7,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),t={},t["combo:"+e]="onComboClick",t},onComboClick:function(t){var e=t.item,n=this,i=n.graph,a=n.relayout;if(!(!e||e.destroyed||e.getType()!=="combo")){var o=e.getModel(),s=o.id;!s||(i.collapseExpandCombo(s),a&&i.get("layout")?i.layout():i.refreshPositions())}}},K5e=Bu.isPolygonsIntersect,Z5e=Bu.pathToPoints,q7="shift",Q5e=["drag","shift","ctrl","alt","control"],J5e=function(t,e){var n,i=t.getKeyShape();if(t.get("type")==="path")n=Z5e(i.attr("path"));else{var a=i.getCanvasBBox();n=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return K5e(e,n)},e$e={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:q7,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return Q5e.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=q7,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(t){var e=this.lasso,n=t.item;n||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),e||(e=this.createLasso()),this.dragging=!0,this.originPoint={x:t.x,y:t.y},this.points.push(this.originPoint),e.show())},onDragMove:function(t){!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push({x:t.x,y:t.y}),this.updateLasso(t))},onDragEnd:function(t){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var t=this.points,e=[];return t.length&&(t.forEach(function(n,i){i===0?e.push(["M",n.x,n.y]):e.push(["L",n.x,n.y])}),e.push(["L",t[0].x,t[0].y])),e},clearStates:function(){var t=this,e=t.graph,n=t.selectedState,i=e.findAllByState("node",n),a=e.findAllByState("edge",n);i.forEach(function(o){return e.setItemState(o,n,!1)}),a.forEach(function(o){return e.setItemState(o,n,!1)}),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var t=this,e=this,n=e.graph,i=e.shouldUpdate,a=this.points.map(function(c){return[n.getCanvasByPoint(c.x,c.y).x,n.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],l=[];n.getNodes().forEach(function(c){if(!!c.isVisible()&&J5e(c,a)&&i(c,"select")){s.push(c);var f=c.getModel();l.push(f.id),n.setItemState(c,o,!0)}});var u=[];this.includeEdges&&s.forEach(function(c){var f=c.getOutEdges();f.forEach(function(d){if(!!d.isVisible()){var h=d.getModel(),v=h.source,p=h.target;l.includes(v)&&l.includes(p)&&i(d,"select")&&(u.push(d),n.setItemState(d,t.selectedState,!0))}})}),this.selectedEdges=u,this.selectedNodes=s,this.onSelect&&this.onSelect(s,u),n.emit("nodeselectchange",{selectedItems:{nodes:s,edges:u},select:!0})},createLasso:function(){var t=this,e=t.graph.get("delegateGroup").addShape("path",{attrs:A({path:[]},t.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=e,this.delegate=e,this.points=[],e},updateLasso:function(t){var e=this;this.lasso.attr({path:e.getLassoPath()})},onKeyDown:function(t){var e=t.key;!e||(e.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},K7="click",t$e=["click","drag"],Z7=void 0,r$e=["shift","ctrl","control","alt","meta",void 0],n$e={getDefaultCfg:function(){return{trigger:K7,key:Z7,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var t=this;t$e.indexOf(t.trigger.toLowerCase())>-1||(t.trigger=K7,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),t.key&&r$e.indexOf(t.key.toLowerCase())===-1&&(t.trigger=Z7,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var e;return t.trigger==="drag"?e={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:t.trigger==="click"&&(e={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),t.key&&(e.keydown="onKeyDown",e.keyup="onKeyUp"),e},onDragEnd:function(t){var e=this;if(!(e.key&&!e.keydown)){var n=t.item;(!n||n.getID()===e.source||n.getType()!=="node")&&e.cancelCreating({item:e.edge,x:t.x,y:t.y})}},onClick:function(t){var e=this;if(!(e.key&&!e.keydown)){var n=t.item,i=e.graph,a=n.getModel(),o=e.getEdgeConfig;if(e.addingEdge&&e.edge){if(!e.shouldEnd.call(e,t))return;var s=void 0;o&&Kt(o)?s=o({source:e.source,target:a.id}):s=e.edgeConfig;var l=A({target:a.id},s);if(e.source===a.id&&(l.type="loop"),i.emit("beforecreateedge",{}),i.updateItem(e.edge,l,!1),i.get("enabledStack")){var u=A(A({},e.edge.getModel()),{itemType:"edge"}),c={};c.edges=[u],i.pushStack("add",{before:{},after:c})}i.emit("aftercreateedge",{edge:e.edge}),e.edge.getKeyShape().set("capture",!0),e.edge=null,e.addingEdge=!1}else{if(!e.shouldBegin.call(e,t))return;var s=void 0;o&&Kt(o)?s=o({source:a.id,target:a.id}):s=e.edgeConfig,e.edge=i.addItem("edge",A({source:a.id,target:a.id},s),!1),e.source=a.id,e.addingEdge=!0,e.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(t){var e=this;if(!(e.key&&!e.keydown)){var n={x:t.x,y:t.y};if(!e.graph.findById(e.source)){e.addingEdge=!1;return}e.addingEdge&&e.edge&&e.graph.updateItem(e.edge,{target:n},!1)}},cancelCreating:function(t){var e=this;if(!(e.key&&!e.keydown)){var n=e.graph,i=t.item;if(e.addingEdge&&t.target&&t.target.isCanvas&&t.target.isCanvas()){n.removeItem(e.edge,!1),e.edge=null,e.addingEdge=!1;return}e.addingEdge&&e.edge===i&&(n.removeItem(e.edge,!1),e.edge=null,e.addingEdge=!1)}},onKeyDown:function(t){var e=this,n=t.key;!n||(n.toLowerCase()===e.key.toLowerCase()?e.keydown=!0:e.keydown=!1)},onKeyUp:function(){var t=this;t.addingEdge&&t.edge&&(t.graph.removeItem(t.edge,!1),t.addingEdge=!1,t.edge=null),this.keydown=!1}},Q7="ctrl",i$e=["shift","ctrl","alt","control"],a$e="1",o$e={getDefaultCfg:function(){return{trigger:Q7,combinedKey:a$e,functionName:"fitView",functionParams:[]}},getEvents:function(){return i$e.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Q7,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '"+this.trigger+"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(t){var e=t.key;if(!!e){var n=this.trigger.toLowerCase(),i=e.toLowerCase();this.triggerKeydown||(i===n||i==="control"&&n==="ctrl"||i==="ctrl"&&n==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '"+this.functionName+"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D"),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(i===o||i==="control"&&o==="ctrl"||i==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},s$e=["shift","ctrl","alt","control"],l$e={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0}},getEvents:function(){return(!this.zoomKey||s$e.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(t){var e=this,n=this.graph,i=t[this.zoomKey+"Key"];if(this.zoomKey==="control"&&(i=t.ctrlKey),i){var a=n.get("canvas"),o=a.getPointByClient(t.clientX,t.clientY),s=n.getZoom();t.wheelDelta>0?s=s+s*.05:s=s-s*.05,n.zoomTo(s,{x:o.x,y:o.y})}else{var l=t.deltaX||t.movementX,u=t.deltaY||t.movementY;!u&&navigator.userAgent.indexOf("Firefox")>-1&&(u=-t.wheelDelta*125/3);var c=this.graph.get("width"),f=this.graph.get("height"),d=this.graph.get("canvas").getCanvasBBox(),h=this.scalableRange,v=this.scalableRange;h<1&&h>-1&&(h=c*h,v=f*v);var p=d.minX,g=d.maxX,m=d.minY,y=d.maxY;l>0?g<-h?l=0:g-l<-h&&(l=g+h):l<0&&(p>c+h?l=0:p-l>c+h&&(l=p-(c+h))),u>0?y<-v?u=0:y-u<-v&&(u=y+v):u<0&&(m>f+v?u=0:m-u>f+v&&(u=m-(f+v))),this.get("direction")==="x"?u=0:this.get("direction")==="y"&&(l=0),n.translate(-l,-u)}t.preventDefault();var b=this.get("enableOptimize");if(b){var x=this.get("optimizeZoom"),w=this.get("optimized"),S=n.getNodes(),C=n.getEdges(),_=S.length,T=C.length;if(!w){for(var E=0;E<_;E++){var k=S[E];if(!k.destroyed)for(var I=k.get("group").get("children"),P=I.length,F=0;F<P;F++){var $=I[F];!$.destoryed&&!$.get("isKeyShape")&&($.set("ori-visibility",$.get("ori-visibility")||$.get("visible")),$.hide())}}for(var R=0;R<T;R++)for(var L=C[R],I=L.get("group").get("children"),P=I.length,F=0;F<P;F++){var $=I[F];$.set("ori-visibility",$.get("ori-visibility")||$.get("visible")),$.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var O=setTimeout(function(){var B=n.getZoom(),U=e.get("optimized");if(U){e.set("optimized",!1);for(var W=0;W<_;W++){var X=S[W],ie=X.get("group").get("children"),q=ie.length;if(B<x){var j=X.getKeyShape(),fe=j.get("ori-visibility");fe&&j.show()}else for(var se=0;se<q;se++){var ce=ie[se],fe=ce.get("ori-visibility");!ce.get("visible")&&fe&&fe&&ce.show()}}for(var _e=0;_e<T;_e++){var Me=C[_e],ie=Me.get("group").get("children"),q=ie.length;if(B<x){var j=Me.getKeyShape(),fe=j.get("ori-visibility");fe&&j.show()}else for(var se=0;se<q;se++){var ce=ie[se];if(!ce.get("visible")){var fe=ce.get("ori-visibility");fe&&ce.show()}}}}},100);this.set("timeout",O)}}},u$e={"drag-canvas":D5e,"zoom-canvas":z5e,"drag-node":R5e,"activate-relations":O5e,"brush-select":F5e,"click-select":B5e,"lasso-select":e$e,tooltip:G5e,"edge-tooltip":U5e,"collapse-expand":H5e,"drag-combo":Y5e,"collapse-expand-combo":q5e,"create-edge":n$e,"shortcuts-call":o$e,"scroll-canvas":l$e};G(u$e,function(r,t){pz(t,r)});var c$e=A(A({},xfe),lpe);_a.Grid;var bdt=_a.Minimap;_a.Bundling;_a.Menu;var f$e=_a.Fisheye;_a.ToolBar;var xdt=_a.Tooltip,d$e=_a.TimeBar,h$e=_a.ImageMinimap,v$e=_a.EdgeFilterLens,p$e=_a.SnapLine;_a.Legend;var g$e={version:wd.version,Graph:Oj,TreeGraph:DNe,Util:Bu,Layout:pS,TreeLayout:bNe,registerLayout:xNe,Global:wd,registerBehavior:pz,registerCombo:ape,registerEdge:vz,registerNode:Eu,Minimap:_a.Minimap,Grid:_a.Grid,Bundling:_a.Bundling,Menu:_a.Menu,ToolBar:_a.ToolBar,Tooltip:_a.Tooltip,Legend:_a.Legend,TimeBar:d$e,SnapLine:p$e,Fisheye:f$e,ImageMinimap:h$e,EdgeFilterLens:v$e,Algorithm:c$e,Arrow:Qve,Marker:Jve,Shape:Ti};g$e.version="4.5.0";function gI(){const r=[],t=i=>{const a=r.indexOf(i);a!==-1&&r.splice(a,1)};return{on:i=>(r.push(i),{off:()=>t(i)}),off:t,trigger:i=>{r.forEach(a=>a(i))}}}function J7(r){return Vae()?(Hae(r),!0):!1}const LS=typeof window!="undefined";function m$e(r,t){function e(...n){r(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})}return e}function y$e(r,t={}){let e,n;return a=>{const o=va(r),s=va(t.maxWait);if(e&&clearTimeout(e),o<=0||s!==void 0&&s<=0)return n&&(clearTimeout(n),n=null),a();s&&!n&&(n=setTimeout(()=>{e&&clearTimeout(e),n=null,a()},s)),e=setTimeout(()=>{n&&clearTimeout(n),n=null,a()},o)}}function b$e(r,...t){return t.some(e=>e in r)}function wdt(r,t=200,e={}){return m$e(y$e(t,e),r)}function x$e(r,t,e={}){const{immediate:n=!0}=e,i=ke(!1);let a=null;function o(){a&&(clearTimeout(a),a=null)}function s(){i.value=!1,o()}function l(...u){o(),i.value=!0,a=setTimeout(()=>{i.value=!1,a=null,r(...u)},va(t))}return n&&(i.value=!0,LS&&l()),J7(s),{isPending:i,start:l,stop:s}}function w$e(r){var t;const e=va(r);return(t=e==null?void 0:e.$el)!=null?t:e}const eY=LS?window:void 0;LS&&window.document;LS&&window.navigator;var tY=Object.getOwnPropertySymbols,S$e=Object.prototype.hasOwnProperty,C$e=Object.prototype.propertyIsEnumerable,E$e=(r,t)=>{var e={};for(var n in r)S$e.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&tY)for(var n of tY(r))t.indexOf(n)<0&&C$e.call(r,n)&&(e[n]=r[n]);return e};function Sdt(r,t,e={}){const n=e,{window:i=eY}=n,a=E$e(n,["window"]);let o;const s=i&&"ResizeObserver"in i,l=()=>{o&&(o.disconnect(),o=void 0)},u=nn(()=>w$e(r),f=>{l(),s&&i&&f&&(o=new i.ResizeObserver(t),o.observe(f,a))},{immediate:!0,flush:"post"}),c=()=>{l(),u()};return J7(c),{isSupported:s,stop:c}}var _$e=Object.defineProperty,T$e=Object.defineProperties,A$e=Object.getOwnPropertyDescriptors,rY=Object.getOwnPropertySymbols,k$e=Object.prototype.hasOwnProperty,M$e=Object.prototype.propertyIsEnumerable,nY=(r,t,e)=>t in r?_$e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Uu=(r,t)=>{for(var e in t||(t={}))k$e.call(t,e)&&nY(r,e,t[e]);if(rY)for(var e of rY(t))M$e.call(t,e)&&nY(r,e,t[e]);return r},iY=(r,t)=>T$e(r,A$e(t));const I$e={json:"application/json",text:"text/plain",formData:"multipart/form-data"};function aY(r){return b$e(r,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError")}function mI(r){return r instanceof Headers?Object.fromEntries([...r.entries()]):r}function Cdt(r,...t){var e;const n=typeof AbortController=="function";let i={},a={immediate:!0,refetch:!1,timeout:0};const o={method:"get",type:"text",payload:void 0};t.length>0&&(aY(t[0])?a=Uu(Uu({},a),t[0]):i=t[0]),t.length>1&&aY(t[1])&&(a=Uu(Uu({},a),t[1]));const{fetch:s=(e=eY)==null?void 0:e.fetch,initialData:l,timeout:u}=a,c=gI(),f=gI(),d=gI(),h=ke(!1),v=ke(!1),p=ke(!1),g=ke(null),m=C_(null),y=ke(null),b=C_(l),x=Q(()=>n&&v.value);let w,S;const C=()=>{n&&w&&w.abort()},_=P=>{v.value=P,h.value=!P};u&&(S=x$e(C,u,{immediate:!1}));const T=async(P=!1)=>{var F;_(!0),y.value=null,g.value=null,p.value=!1,w=void 0,n&&(w=new AbortController,w.signal.onabort=()=>p.value=!0,i=iY(Uu({},i),{signal:w.signal}));const $={method:o.method,headers:{}};if(o.payload){const B=mI($.headers);o.payloadType&&(B["Content-Type"]=(F=I$e[o.payloadType])!=null?F:o.payloadType),$.body=o.payloadType==="json"?JSON.stringify(va(o.payload)):va(o.payload)}let R=!1;const L={url:va(r),options:i,cancel:()=>{R=!0}};if(a.beforeFetch&&Object.assign(L,await a.beforeFetch(L)),R||!s)return _(!1),Promise.resolve();let O=null;return S&&S.start(),new Promise((B,U)=>{var W;s(L.url,iY(Uu(Uu({},$),L.options),{headers:Uu(Uu({},mI($.headers)),mI((W=L.options)==null?void 0:W.headers))})).then(async X=>{if(m.value=X,g.value=X.status,O=await X[o.type](),a.afterFetch&&({data:O}=await a.afterFetch({data:O,response:X})),b.value=O,!X.ok)throw new Error(X.statusText);c.trigger(X),B(X)}).catch(async X=>{let ie=X.message||X.name;a.onFetchError&&({data:O,error:ie}=await a.onFetchError({data:O,error:X})),b.value=O,y.value=ie,f.trigger(X),P?U(X):B(void 0)}).finally(()=>{_(!1),S&&S.stop(),d.trigger(null)})})};nn(()=>[va(r),va(a.refetch)],()=>va(a.refetch)&&T(),{deep:!0});const E={isFinished:h,statusCode:g,response:m,error:y,data:b,isFetching:v,canAbort:x,aborted:p,abort:C,execute:T,onFetchResponse:c.on,onFetchError:f.on,onFetchFinally:d.on,get:k("get"),put:k("put"),post:k("post"),delete:k("delete"),json:I("json"),text:I("text"),blob:I("blob"),arrayBuffer:I("arrayBuffer"),formData:I("formData")};function k(P){return(F,$)=>{if(!v.value)return o.method=P,o.payload=F,o.payloadType=$,lo(o.payload)&&nn(()=>[va(o.payload),va(a.refetch)],()=>va(a.refetch)&&T(),{deep:!0}),!$&&va(F)&&Object.getPrototypeOf(va(F))===Object.prototype&&(o.payloadType="json"),E}}function I(P){return()=>{if(!v.value)return o.type=P,E}}return a.immediate&&setTimeout(T,0),E}var oY;(function(r){r.UP="UP",r.RIGHT="RIGHT",r.DOWN="DOWN",r.LEFT="LEFT",r.NONE="NONE"})(oY||(oY={}));let FS=[];const sY=new WeakMap;function P$e(){FS.forEach(r=>r(...sY.get(r))),FS=[]}function NS(r,...t){sY.set(r,t),!FS.includes(r)&&FS.push(r)===1&&requestAnimationFrame(P$e)}function Vu(r,t){let{target:e}=r;for(;e;){if(e.dataset&&e.dataset[t]!==void 0)return!0;e=e.parentElement}return!1}function Ho(r){return typeof r=="string"?r.endsWith("px")?Number(r.slice(0,r.length-2)):Number(r):r}function to(r){if(r!=null)return typeof r=="number"?`${r}px`:r.endsWith("px")?r:`${r}px`}function Sp(r,t){const e=r.trim().split(/\s+/g),n={top:e[0]};switch(e.length){case 1:n.right=e[0],n.bottom=e[0],n.left=e[0];break;case 2:n.right=e[1],n.left=e[1],n.bottom=e[0];break;case 3:n.right=e[1],n.bottom=e[2],n.left=e[1];break;case 4:n.right=e[1],n.bottom=e[2],n.left=e[3];break;default:throw new Error("[seemly/getMargin]:"+r+" is not a valid value.")}return t===void 0?n:n[t]}function D$e(r,t){const[e,n]=r.split(" ");return t?t==="row"?e:n:{row:e,col:n||e}}var lY={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"};const Cp="^\\s*",Ep="\\s*$",qd="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",Kd="([0-9A-Fa-f])",Zd="([0-9A-Fa-f]{2})",R$e=new RegExp(`${Cp}rgb\\s*\\(${qd},${qd},${qd}\\)${Ep}`),O$e=new RegExp(`${Cp}rgba\\s*\\(${qd},${qd},${qd},${qd}\\)${Ep}`),L$e=new RegExp(`${Cp}#${Kd}${Kd}${Kd}${Ep}`),F$e=new RegExp(`${Cp}#${Zd}${Zd}${Zd}${Ep}`),N$e=new RegExp(`${Cp}#${Kd}${Kd}${Kd}${Kd}${Ep}`),B$e=new RegExp(`${Cp}#${Zd}${Zd}${Zd}${Zd}${Ep}`);function Wo(r){return parseInt(r,16)}function Qd(r){try{let t;if(t=F$e.exec(r))return[Wo(t[1]),Wo(t[2]),Wo(t[3]),1];if(t=R$e.exec(r))return[go(t[1]),go(t[5]),go(t[9]),1];if(t=O$e.exec(r))return[go(t[1]),go(t[5]),go(t[9]),o0(t[13])];if(t=L$e.exec(r))return[Wo(t[1]+t[1]),Wo(t[2]+t[2]),Wo(t[3]+t[3]),1];if(t=B$e.exec(r))return[Wo(t[1]),Wo(t[2]),Wo(t[3]),o0(Wo(t[4])/255)];if(t=N$e.exec(r))return[Wo(t[1]+t[1]),Wo(t[2]+t[2]),Wo(t[3]+t[3]),o0(Wo(t[4]+t[4])/255)];if(r in lY)return Qd(lY[r]);throw new Error(`[seemly/rgba]: Invalid color value ${r}.`)}catch(t){throw t}}function $$e(r){return r>1?1:r<0?0:r}function yI(r,t,e,n){return`rgba(${go(r)}, ${go(t)}, ${go(e)}, ${$$e(n)})`}function bI(r,t,e,n,i){return go((r*t*(1-n)+e*n)/i)}function Si(r,t){Array.isArray(r)||(r=Qd(r)),Array.isArray(t)||(t=Qd(t));const e=r[3],n=t[3],i=o0(e+n-e*n);return yI(bI(r[0],e,t[0],n,i),bI(r[1],e,t[1],n,i),bI(r[2],e,t[2],n,i),i)}function qr(r,t){const[e,n,i,a=1]=Array.isArray(r)?r:Qd(r);return t.alpha?yI(e,n,i,t.alpha):yI(e,n,i,a)}function BS(r,t){const[e,n,i,a=1]=Array.isArray(r)?r:Qd(r),{lightness:o=1,alpha:s=1}=t;return z$e([e*o,n*o,i*o,a*s])}function o0(r){const t=Math.round(Number(r)*100)/100;return t>1?1:t<0?0:t}function go(r){const t=Math.round(Number(r));return t>255?255:t<0?0:t}function z$e(r){const[t,e,n]=r;return 3 in r?`rgba(${go(t)}, ${go(e)}, ${go(n)}, ${o0(r[3])})`:`rgba(${go(t)}, ${go(e)}, ${go(n)}, 1)`}globalThis&&globalThis.__awaiter;function _p(r=8){return Math.random().toString(16).slice(2,2+r)}function uY(r,t){const e=[];for(let n=0;n<r;++n)e.push(t);return e}const xI=Symbol("formItem");function fl(r,{defaultSize:t="medium",mergedSize:e,mergedDisabled:n}={}){const i=nr(xI,null);Qr(xI,null);const a=Q(e?()=>e(i):()=>{const{size:s}=r;if(s)return s;if(i){const{mergedSize:l}=i;if(l.value!==void 0)return l.value}return t}),o=Q(n?()=>n(i):()=>{const{disabled:s}=r;return s!==void 0?s:i?i.disabled.value:!1});return os(()=>{i&&i.restoreValidation()}),{mergedSizeRef:a,mergedDisabledRef:o,nTriggerFormBlur(){i&&i.handleContentBlur()},nTriggerFormChange(){i&&i.handleContentChange()},nTriggerFormFocus(){i&&i.handleContentFocus()},nTriggerFormInput(){i&&i.handleContentInput()}}}var G$e=typeof global=="object"&&global&&global.Object===Object&&global,cY=G$e,U$e=typeof self=="object"&&self&&self.Object===Object&&self,V$e=cY||U$e||Function("return this")(),Tp=V$e,H$e=Tp.Symbol,Ap=H$e,fY=Object.prototype,W$e=fY.hasOwnProperty,j$e=fY.toString,s0=Ap?Ap.toStringTag:void 0;function Y$e(r){var t=W$e.call(r,s0),e=r[s0];try{r[s0]=void 0;var n=!0}catch{}var i=j$e.call(r);return n&&(t?r[s0]=e:delete r[s0]),i}var X$e=Object.prototype,q$e=X$e.toString;function K$e(r){return q$e.call(r)}var Z$e="[object Null]",Q$e="[object Undefined]",dY=Ap?Ap.toStringTag:void 0;function l0(r){return r==null?r===void 0?Q$e:Z$e:dY&&dY in Object(r)?Y$e(r):K$e(r)}function kp(r){return r!=null&&typeof r=="object"}var J$e="[object Symbol]";function wI(r){return typeof r=="symbol"||kp(r)&&l0(r)==J$e}function eze(r,t){for(var e=-1,n=r==null?0:r.length,i=Array(n);++e<n;)i[e]=t(r[e],e,r);return i}var tze=Array.isArray,Mp=tze,rze=1/0,hY=Ap?Ap.prototype:void 0,vY=hY?hY.toString:void 0;function pY(r){if(typeof r=="string")return r;if(Mp(r))return eze(r,pY)+"";if(wI(r))return vY?vY.call(r):"";var t=r+"";return t=="0"&&1/r==-rze?"-0":t}function Jd(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}function gY(r){return r}var nze="[object AsyncFunction]",ize="[object Function]",aze="[object GeneratorFunction]",oze="[object Proxy]";function SI(r){if(!Jd(r))return!1;var t=l0(r);return t==ize||t==aze||t==nze||t==oze}var sze=Tp["__core-js_shared__"],CI=sze,mY=function(){var r=/[^.]+$/.exec(CI&&CI.keys&&CI.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function lze(r){return!!mY&&mY in r}var uze=Function.prototype,cze=uze.toString;function fze(r){if(r!=null){try{return cze.call(r)}catch{}try{return r+""}catch{}}return""}var dze=/[\\^$.*+?()[\]{}|]/g,hze=/^\[object .+?Constructor\]$/,vze=Function.prototype,pze=Object.prototype,gze=vze.toString,mze=pze.hasOwnProperty,yze=RegExp("^"+gze.call(mze).replace(dze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function bze(r){if(!Jd(r)||lze(r))return!1;var t=SI(r)?yze:hze;return t.test(fze(r))}function xze(r,t){return r==null?void 0:r[t]}function EI(r,t){var e=xze(r,t);return bze(e)?e:void 0}var yY=Object.create,wze=function(){function r(){}return function(t){if(!Jd(t))return{};if(yY)return yY(t);r.prototype=t;var e=new r;return r.prototype=void 0,e}}(),Sze=wze;function Cze(r,t,e){switch(e.length){case 0:return r.call(t);case 1:return r.call(t,e[0]);case 2:return r.call(t,e[0],e[1]);case 3:return r.call(t,e[0],e[1],e[2])}return r.apply(t,e)}function Eze(r,t){var e=-1,n=r.length;for(t||(t=Array(n));++e<n;)t[e]=r[e];return t}var _ze=800,Tze=16,Aze=Date.now;function kze(r){var t=0,e=0;return function(){var n=Aze(),i=Tze-(n-e);if(e=n,i>0){if(++t>=_ze)return arguments[0]}else t=0;return r.apply(void 0,arguments)}}function Mze(r){return function(){return r}}var Ize=function(){try{var r=EI(Object,"defineProperty");return r({},"",{}),r}catch{}}(),$S=Ize,Pze=$S?function(r,t){return $S(r,"toString",{configurable:!0,enumerable:!1,value:Mze(t),writable:!0})}:gY,Dze=Pze,Rze=kze(Dze),Oze=Rze,Lze=9007199254740991,Fze=/^(?:0|[1-9]\d*)$/;function bY(r,t){var e=typeof r;return t=t==null?Lze:t,!!t&&(e=="number"||e!="symbol"&&Fze.test(r))&&r>-1&&r%1==0&&r<t}function _I(r,t,e){t=="__proto__"&&$S?$S(r,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):r[t]=e}function zS(r,t){return r===t||r!==r&&t!==t}var Nze=Object.prototype,Bze=Nze.hasOwnProperty;function $ze(r,t,e){var n=r[t];(!(Bze.call(r,t)&&zS(n,e))||e===void 0&&!(t in r))&&_I(r,t,e)}function zze(r,t,e,n){var i=!e;e||(e={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=n?n(e[s],r[s],s,e,r):void 0;l===void 0&&(l=r[s]),i?_I(e,s,l):$ze(e,s,l)}return e}var xY=Math.max;function Gze(r,t,e){return t=xY(t===void 0?r.length-1:t,0),function(){for(var n=arguments,i=-1,a=xY(n.length-t,0),o=Array(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=e(o),Cze(r,this,s)}}function Uze(r,t){return Oze(Gze(r,t,gY),r+"")}var Vze=9007199254740991;function wY(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Vze}function TI(r){return r!=null&&wY(r.length)&&!SI(r)}function Hze(r,t,e){if(!Jd(e))return!1;var n=typeof t;return(n=="number"?TI(e)&&bY(t,e.length):n=="string"&&t in e)?zS(e[t],r):!1}function Wze(r){return Uze(function(t,e){var n=-1,i=e.length,a=i>1?e[i-1]:void 0,o=i>2?e[2]:void 0;for(a=r.length>3&&typeof a=="function"?(i--,a):void 0,o&&Hze(e[0],e[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var s=e[n];s&&r(t,s,n,a)}return t})}var jze=Object.prototype;function SY(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||jze;return r===e}function Yze(r,t){for(var e=-1,n=Array(r);++e<r;)n[e]=t(e);return n}var Xze="[object Arguments]";function CY(r){return kp(r)&&l0(r)==Xze}var EY=Object.prototype,qze=EY.hasOwnProperty,Kze=EY.propertyIsEnumerable,Zze=CY(function(){return arguments}())?CY:function(r){return kp(r)&&qze.call(r,"callee")&&!Kze.call(r,"callee")},AI=Zze;function Qze(){return!1}var _Y=typeof exports=="object"&&exports&&!exports.nodeType&&exports,TY=_Y&&typeof module=="object"&&module&&!module.nodeType&&module,Jze=TY&&TY.exports===_Y,AY=Jze?Tp.Buffer:void 0,e4e=AY?AY.isBuffer:void 0,t4e=e4e||Qze,kY=t4e,r4e="[object Arguments]",n4e="[object Array]",i4e="[object Boolean]",a4e="[object Date]",o4e="[object Error]",s4e="[object Function]",l4e="[object Map]",u4e="[object Number]",c4e="[object Object]",f4e="[object RegExp]",d4e="[object Set]",h4e="[object String]",v4e="[object WeakMap]",p4e="[object ArrayBuffer]",g4e="[object DataView]",m4e="[object Float32Array]",y4e="[object Float64Array]",b4e="[object Int8Array]",x4e="[object Int16Array]",w4e="[object Int32Array]",S4e="[object Uint8Array]",C4e="[object Uint8ClampedArray]",E4e="[object Uint16Array]",_4e="[object Uint32Array]",Ci={};Ci[m4e]=Ci[y4e]=Ci[b4e]=Ci[x4e]=Ci[w4e]=Ci[S4e]=Ci[C4e]=Ci[E4e]=Ci[_4e]=!0;Ci[r4e]=Ci[n4e]=Ci[p4e]=Ci[i4e]=Ci[g4e]=Ci[a4e]=Ci[o4e]=Ci[s4e]=Ci[l4e]=Ci[u4e]=Ci[c4e]=Ci[f4e]=Ci[d4e]=Ci[h4e]=Ci[v4e]=!1;function T4e(r){return kp(r)&&wY(r.length)&&!!Ci[l0(r)]}function A4e(r){return function(t){return r(t)}}var MY=typeof exports=="object"&&exports&&!exports.nodeType&&exports,u0=MY&&typeof module=="object"&&module&&!module.nodeType&&module,k4e=u0&&u0.exports===MY,kI=k4e&&cY.process,M4e=function(){try{var r=u0&&u0.require&&u0.require("util").types;return r||kI&&kI.binding&&kI.binding("util")}catch{}}(),IY=M4e,PY=IY&&IY.isTypedArray,I4e=PY?A4e(PY):T4e,DY=I4e,P4e=Object.prototype,D4e=P4e.hasOwnProperty;function R4e(r,t){var e=Mp(r),n=!e&&AI(r),i=!e&&!n&&kY(r),a=!e&&!n&&!i&&DY(r),o=e||n||i||a,s=o?Yze(r.length,String):[],l=s.length;for(var u in r)(t||D4e.call(r,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||bY(u,l)))&&s.push(u);return s}function O4e(r,t){return function(e){return r(t(e))}}function L4e(r){var t=[];if(r!=null)for(var e in Object(r))t.push(e);return t}var F4e=Object.prototype,N4e=F4e.hasOwnProperty;function B4e(r){if(!Jd(r))return L4e(r);var t=SY(r),e=[];for(var n in r)n=="constructor"&&(t||!N4e.call(r,n))||e.push(n);return e}function RY(r){return TI(r)?R4e(r,!0):B4e(r)}var $4e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,z4e=/^\w*$/;function G4e(r,t){if(Mp(r))return!1;var e=typeof r;return e=="number"||e=="symbol"||e=="boolean"||r==null||wI(r)?!0:z4e.test(r)||!$4e.test(r)||t!=null&&r in Object(t)}var U4e=EI(Object,"create"),c0=U4e;function V4e(){this.__data__=c0?c0(null):{},this.size=0}function H4e(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}var W4e="__lodash_hash_undefined__",j4e=Object.prototype,Y4e=j4e.hasOwnProperty;function X4e(r){var t=this.__data__;if(c0){var e=t[r];return e===W4e?void 0:e}return Y4e.call(t,r)?t[r]:void 0}var q4e=Object.prototype,K4e=q4e.hasOwnProperty;function Z4e(r){var t=this.__data__;return c0?t[r]!==void 0:K4e.call(t,r)}var Q4e="__lodash_hash_undefined__";function J4e(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=c0&&t===void 0?Q4e:t,this}function eh(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}eh.prototype.clear=V4e;eh.prototype.delete=H4e;eh.prototype.get=X4e;eh.prototype.has=Z4e;eh.prototype.set=J4e;function e6e(){this.__data__=[],this.size=0}function GS(r,t){for(var e=r.length;e--;)if(zS(r[e][0],t))return e;return-1}var t6e=Array.prototype,r6e=t6e.splice;function n6e(r){var t=this.__data__,e=GS(t,r);if(e<0)return!1;var n=t.length-1;return e==n?t.pop():r6e.call(t,e,1),--this.size,!0}function i6e(r){var t=this.__data__,e=GS(t,r);return e<0?void 0:t[e][1]}function a6e(r){return GS(this.__data__,r)>-1}function o6e(r,t){var e=this.__data__,n=GS(e,r);return n<0?(++this.size,e.push([r,t])):e[n][1]=t,this}function Hu(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}Hu.prototype.clear=e6e;Hu.prototype.delete=n6e;Hu.prototype.get=i6e;Hu.prototype.has=a6e;Hu.prototype.set=o6e;var s6e=EI(Tp,"Map"),OY=s6e;function l6e(){this.size=0,this.__data__={hash:new eh,map:new(OY||Hu),string:new eh}}function u6e(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}function US(r,t){var e=r.__data__;return u6e(t)?e[typeof t=="string"?"string":"hash"]:e.map}function c6e(r){var t=US(this,r).delete(r);return this.size-=t?1:0,t}function f6e(r){return US(this,r).get(r)}function d6e(r){return US(this,r).has(r)}function h6e(r,t){var e=US(this,r),n=e.size;return e.set(r,t),this.size+=e.size==n?0:1,this}function nf(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}nf.prototype.clear=l6e;nf.prototype.delete=c6e;nf.prototype.get=f6e;nf.prototype.has=d6e;nf.prototype.set=h6e;var v6e="Expected a function";function MI(r,t){if(typeof r!="function"||t!=null&&typeof t!="function")throw new TypeError(v6e);var e=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=e.cache;if(a.has(i))return a.get(i);var o=r.apply(this,n);return e.cache=a.set(i,o)||a,o};return e.cache=new(MI.Cache||nf),e}MI.Cache=nf;var p6e=500;function g6e(r){var t=MI(r,function(n){return e.size===p6e&&e.clear(),n}),e=t.cache;return t}var m6e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,y6e=/\\(\\)?/g,b6e=g6e(function(r){var t=[];return r.charCodeAt(0)===46&&t.push(""),r.replace(m6e,function(e,n,i,a){t.push(i?a.replace(y6e,"$1"):n||e)}),t}),x6e=b6e;function LY(r){return r==null?"":pY(r)}function w6e(r,t){return Mp(r)?r:G4e(r,t)?[r]:x6e(LY(r))}var S6e=1/0;function C6e(r){if(typeof r=="string"||wI(r))return r;var t=r+"";return t=="0"&&1/r==-S6e?"-0":t}function E6e(r,t){t=w6e(t,r);for(var e=0,n=t.length;r!=null&&e<n;)r=r[C6e(t[e++])];return e&&e==n?r:void 0}function II(r,t,e){var n=r==null?void 0:E6e(r,t);return n===void 0?e:n}var _6e=O4e(Object.getPrototypeOf,Object),FY=_6e,T6e="[object Object]",A6e=Function.prototype,k6e=Object.prototype,NY=A6e.toString,M6e=k6e.hasOwnProperty,I6e=NY.call(Object);function P6e(r){if(!kp(r)||l0(r)!=T6e)return!1;var t=FY(r);if(t===null)return!0;var e=M6e.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&NY.call(e)==I6e}function D6e(r,t,e){var n=-1,i=r.length;t<0&&(t=-t>i?0:i+t),e=e>i?i:e,e<0&&(e+=i),i=t>e?0:e-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=r[n+t];return a}function R6e(r,t,e){var n=r.length;return e=e===void 0?n:e,!t&&e>=n?r:D6e(r,t,e)}var O6e="\\ud800-\\udfff",L6e="\\u0300-\\u036f",F6e="\\ufe20-\\ufe2f",N6e="\\u20d0-\\u20ff",B6e=L6e+F6e+N6e,$6e="\\ufe0e\\ufe0f",z6e="\\u200d",G6e=RegExp("["+z6e+O6e+B6e+$6e+"]");function BY(r){return G6e.test(r)}function U6e(r){return r.split("")}var $Y="\\ud800-\\udfff",V6e="\\u0300-\\u036f",H6e="\\ufe20-\\ufe2f",W6e="\\u20d0-\\u20ff",j6e=V6e+H6e+W6e,Y6e="\\ufe0e\\ufe0f",X6e="["+$Y+"]",PI="["+j6e+"]",DI="\\ud83c[\\udffb-\\udfff]",q6e="(?:"+PI+"|"+DI+")",zY="[^"+$Y+"]",GY="(?:\\ud83c[\\udde6-\\uddff]){2}",UY="[\\ud800-\\udbff][\\udc00-\\udfff]",K6e="\\u200d",VY=q6e+"?",HY="["+Y6e+"]?",Z6e="(?:"+K6e+"(?:"+[zY,GY,UY].join("|")+")"+HY+VY+")*",Q6e=HY+VY+Z6e,J6e="(?:"+[zY+PI+"?",PI,GY,UY,X6e].join("|")+")",eGe=RegExp(DI+"(?="+DI+")|"+J6e+Q6e,"g");function tGe(r){return r.match(eGe)||[]}function rGe(r){return BY(r)?tGe(r):U6e(r)}function nGe(r){return function(t){t=LY(t);var e=BY(t)?rGe(t):void 0,n=e?e[0]:t.charAt(0),i=e?R6e(e,1).join(""):t.slice(1);return n[r]()+i}}var iGe=nGe("toUpperCase"),aGe=iGe;function oGe(){this.__data__=new Hu,this.size=0}function sGe(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e}function lGe(r){return this.__data__.get(r)}function uGe(r){return this.__data__.has(r)}var cGe=200;function fGe(r,t){var e=this.__data__;if(e instanceof Hu){var n=e.__data__;if(!OY||n.length<cGe-1)return n.push([r,t]),this.size=++e.size,this;e=this.__data__=new nf(n)}return e.set(r,t),this.size=e.size,this}function Ip(r){var t=this.__data__=new Hu(r);this.size=t.size}Ip.prototype.clear=oGe;Ip.prototype.delete=sGe;Ip.prototype.get=lGe;Ip.prototype.has=uGe;Ip.prototype.set=fGe;var WY=typeof exports=="object"&&exports&&!exports.nodeType&&exports,jY=WY&&typeof module=="object"&&module&&!module.nodeType&&module,dGe=jY&&jY.exports===WY,YY=dGe?Tp.Buffer:void 0,XY=YY?YY.allocUnsafe:void 0;function hGe(r,t){if(t)return r.slice();var e=r.length,n=XY?XY(e):new r.constructor(e);return r.copy(n),n}var vGe=Tp.Uint8Array,qY=vGe;function pGe(r){var t=new r.constructor(r.byteLength);return new qY(t).set(new qY(r)),t}function gGe(r,t){var e=t?pGe(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)}function mGe(r){return typeof r.constructor=="function"&&!SY(r)?Sze(FY(r)):{}}function yGe(r){return function(t,e,n){for(var i=-1,a=Object(t),o=n(t),s=o.length;s--;){var l=o[r?s:++i];if(e(a[l],l,a)===!1)break}return t}}var bGe=yGe(),xGe=bGe;function RI(r,t,e){(e!==void 0&&!zS(r[t],e)||e===void 0&&!(t in r))&&_I(r,t,e)}function wGe(r){return kp(r)&&TI(r)}function OI(r,t){if(!(t==="constructor"&&typeof r[t]=="function")&&t!="__proto__")return r[t]}function SGe(r){return zze(r,RY(r))}function CGe(r,t,e,n,i,a,o){var s=OI(r,e),l=OI(t,e),u=o.get(l);if(u){RI(r,e,u);return}var c=a?a(s,l,e+"",r,t,o):void 0,f=c===void 0;if(f){var d=Mp(l),h=!d&&kY(l),v=!d&&!h&&DY(l);c=l,d||h||v?Mp(s)?c=s:wGe(s)?c=Eze(s):h?(f=!1,c=hGe(l,!0)):v?(f=!1,c=gGe(l,!0)):c=[]:P6e(l)||AI(l)?(c=s,AI(s)?c=SGe(s):(!Jd(s)||SI(s))&&(c=mGe(l))):f=!1}f&&(o.set(l,c),i(c,l,n,a,o),o.delete(l)),RI(r,e,c)}function KY(r,t,e,n,i){r!==t&&xGe(t,function(a,o){if(i||(i=new Ip),Jd(a))CGe(r,t,o,e,KY,n,i);else{var s=n?n(OI(r,o),a,o+"",r,t,i):void 0;s===void 0&&(s=a),RI(r,o,s)}},RY)}var EGe=Wze(function(r,t,e){KY(r,t,e)}),f0=EGe;const ZY=Symbol("@css-render/vue3-ssr");function _Ge(r,t){return`<style cssr-id="${r}">
${t}
</style>`}function TGe(r,t){const e=nr(ZY,null);if(e===null){console.error("[css-render/vue3-ssr]: no ssr context found.");return}const{styles:n,ids:i}=e;i.has(r)||n!==null&&(i.add(r),n.push(_Ge(r,t)))}function Pp(){const r=nr(ZY,null);if(r!==null)return{adapter:TGe,context:r}}function AGe(r){let t=0;for(let e=0;e<r.length;++e)r[e]==="&"&&++t;return t}const QY=/\s*,(?![^(]*\))\s*/g,kGe=/\s+/g;function MGe(r,t){const e=[];return t.split(QY).forEach(n=>{let i=AGe(n);if(i){if(i===1){r.forEach(o=>{e.push(n.replace("&",o))});return}}else{r.forEach(o=>{e.push((o&&o+" ")+n)});return}let a=[n];for(;i--;){const o=[];a.forEach(s=>{r.forEach(l=>{o.push(s.replace("&",l))})}),a=o}a.forEach(o=>e.push(o))}),e}function IGe(r,t){const e=[];return t.split(QY).forEach(n=>{r.forEach(i=>{e.push((i&&i+" ")+n)})}),e}function PGe(r){let t=[""];return r.forEach(e=>{e=e&&e.trim(),!!e&&(e.includes("&")?t=MGe(t,e):t=IGe(t,e))}),t.join(", ").replace(kGe," ")}const DGe=/[A-Z]/g;function JY(r){return r.replace(DGe,t=>"-"+t.toLowerCase())}function RGe(r,t="  "){return typeof r=="object"&&r!==null?` {
`+Object.entries(r).map(e=>t+`  ${JY(e[0])}: ${e[1]};`).join(`
`)+`
`+t+"}":`: ${r};`}function OGe(r,t,e){return typeof r=="function"?r({context:t.context,props:e}):r}function eX(r,t,e,n){if(!t)return"";const i=OGe(t,e,n);if(!i)return"";if(typeof i=="string")return`${r} {
${i}
}`;const a=Object.keys(i);if(a.length===0)return e.config.keepEmptyBlock?r+` {
}`:"";const o=r?[r+" {"]:[];return a.forEach(s=>{const l=i[s];if(s==="raw"){o.push(`
`+l+`
`);return}s=JY(s),l!=null&&o.push(`  ${s}${RGe(l)}`)}),r&&o.push("}"),o.join(`
`)}function LI(r,t,e){!r||r.forEach(n=>{if(Array.isArray(n))LI(n,t,e);else if(typeof n=="function"){const i=n(t);Array.isArray(i)?LI(i,t,e):i&&e(i)}else n&&e(n)})}function tX(r,t,e,n,i,a){const o=r.$;!o||typeof o=="string"?t.push(o):typeof o=="function"?t.push(o({context:n.context,props:i})):(o.before&&o.before(n.context),!o.$||typeof o.$=="string"?t.push(o.$):o.$&&t.push(o.$({context:n.context,props:i})));const s=PGe(t),l=eX(s,r.props,n,i);a&&l&&a.insertRule(l),!a&&l.length&&e.push(l),r.children&&LI(r.children,{context:n.context,props:i},u=>{if(typeof u=="string"){const c=eX(s,{raw:u},n,i);a?a.insertRule(c):e.push(c)}else tX(u,t,e,n,i,a)}),t.pop(),o&&o.after&&o.after(n.context)}function rX(r,t,e,n=!1){const i=[];return tX(r,[],i,t,e,n?r.instance.__styleSheet:void 0),n?"":i.join(`

`)}function LGe(r){for(var t=0,e,n=0,i=r.length;i>=4;++n,i-=4)e=r.charCodeAt(n)&255|(r.charCodeAt(++n)&255)<<8|(r.charCodeAt(++n)&255)<<16|(r.charCodeAt(++n)&255)<<24,e=(e&65535)*1540483477+((e>>>16)*59797<<16),e^=e>>>24,t=(e&65535)*1540483477+((e>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(r.charCodeAt(n+2)&255)<<16;case 2:t^=(r.charCodeAt(n+1)&255)<<8;case 1:t^=r.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}function nX(r){if(!r)return;const t=r.parentElement;t&&t.removeChild(r)}function VS(r){return document.querySelector(`style[cssr-id="${r}"]`)}function FGe(r){const t=document.createElement("style");return t.setAttribute("cssr-id",r),t}typeof window!="undefined"&&(window.__cssrContext={});function NGe(r,t,e){const{els:n}=t;if(e===void 0)n.forEach(nX),t.els=[];else{const i=VS(e);i&&n.includes(i)&&(nX(i),t.els=n.filter(a=>a!==i))}}function BGe(r,t){r.push(t)}function $Ge(r,t,e,n,i,a,o,s){var l;if(a&&!s){if(e===void 0){console.error("[css-render/mount]: `id` is required in `slient` mode.");return}const d=window.__cssrContext;d[e]||(d[e]=!0,rX(t,r,n,a));return}let u;if(e===void 0&&(u=t.render(n),e=LGe(u)),s){s.adapter(e,u!=null?u:t.render(n));return}const c=VS(e);if(c!==null&&!o)return c;const f=c!=null?c:FGe(e);if(u===void 0&&(u=t.render(n)),f.textContent=u,c!==null)return c;if(i){const d=(l=document.head.querySelector("style, link"))!==null&&l!==void 0?l:null;document.head.insertBefore(f,d)}else document.head.appendChild(f);return BGe(t.els,f),c!=null?c:f}function zGe(r){return rX(this,this.instance,r)}function GGe(r={}){const{id:t,ssr:e,props:n,head:i=!1,slient:a=!1,force:o=!1}=r;return $Ge(this.instance,this,t,n,i,a,o,e)}function UGe(r={}){const{id:t}=r;NGe(this.instance,this,t)}const HS=function(r,t,e,n){return{instance:r,$:t,props:e,children:n,els:[],render:zGe,mount:GGe,unmount:UGe}},VGe=function(r,t,e,n){return Array.isArray(t)?HS(r,{$:null},null,t):Array.isArray(e)?HS(r,t,null,e):Array.isArray(n)?HS(r,t,e,n):HS(r,t,e,null)};function iX(r={}){let t=null;const e={c:(...n)=>VGe(e,...n),use:(n,...i)=>n.install(e,...i),find:VS,context:{},config:r,get __styleSheet(){if(!t){const n=document.createElement("style");return document.head.appendChild(n),t=document.styleSheets[document.styleSheets.length-1],t}return t}};return e}function HGe(r,t){if(r===void 0)return!1;if(t){const{context:{ids:e}}=t;return e.has(r)}return VS(r)!==null}function WGe(r){let t=".",e="__",n="--",i;if(r){let v=r.blockPrefix;v&&(t=v),v=r.elementPrefix,v&&(e=v),v=r.modifierPrefix,v&&(n=v)}const a={install(v){i=v.c;const p=v.context;p.bem={},p.bem.b=null,p.bem.els=null}};function o(v){let p,g;return{before(m){p=m.bem.b,g=m.bem.els,m.bem.els=null},after(m){m.bem.b=p,m.bem.els=g},$({context:m,props:y}){return v=typeof v=="string"?v:v({context:m,props:y}),m.bem.b=v,`${(y==null?void 0:y.bPrefix)||t}${m.bem.b}`}}}function s(v){let p;return{before(g){p=g.bem.els},after(g){g.bem.els=p},$({context:g,props:m}){return v=typeof v=="string"?v:v({context:g,props:m}),g.bem.els=v.split(",").map(y=>y.trim()),g.bem.els.map(y=>`${(m==null?void 0:m.bPrefix)||t}${g.bem.b}__${y}`).join(", ")}}}function l(v){return{$({context:p,props:g}){v=typeof v=="string"?v:v({context:p,props:g});const m=v.split(",").map(x=>x.trim());function y(x){return m.map(w=>`&${(g==null?void 0:g.bPrefix)||t}${p.bem.b}${x!==void 0?`${e}${x}`:""}${n}${w}`).join(", ")}const b=p.bem.els;return b!==null?y(b[0]):y()}}}function u(v){return{$({context:p,props:g}){v=typeof v=="string"?v:v({context:p,props:g});const m=p.bem.els;return`&:not(${(g==null?void 0:g.bPrefix)||t}${p.bem.b}${m!==null&&m.length>0?`${e}${m[0]}`:""}${n}${v})`}}}return Object.assign(a,{cB:(...v)=>i(o(v[0]),v[1],v[2]),cE:(...v)=>i(s(v[0]),v[1],v[2]),cM:(...v)=>i(l(v[0]),v[1],v[2]),cNotM:(...v)=>i(u(v[0]),v[1],v[2])}),a}function Gt(r,t){return r+(t==="default"?"":t.replace(/^[a-z]/,e=>e.toUpperCase()))}Gt("abc","def");const jGe="n",Wu=`.${jGe}-`,YGe="__",aX="--",oX=iX(),sX=WGe({blockPrefix:Wu,elementPrefix:YGe,modifierPrefix:aX});oX.use(sX);const{c:we,find:Edt}=oX,{cB:ne,cE:xe,cM:Pe,cNotM:Cn}=sX;function lX(r,t){return r===null?t:we([({props:{bPrefix:e}})=>we(`${e||Wu}form-item`,[we(`${e||Wu}form-item-blank`,[we(`&${e||Wu}form-item-blank${aX}${r}`,[t])])])])}function d0(r){return we(({props:{bPrefix:t}})=>`${t||Wu}modal, ${t||Wu}drawer`,[r])}function WS(r){return we(({props:{bPrefix:t}})=>`${t||Wu}popover:not(${t||Wu}tooltip)`,[r])}function uX(r){return we(({props:{bPrefix:t}})=>`&${t||Wu}modal`,r)}const XGe=(...r)=>we(">",[ne(...r)]);var af={fontFamily:'v-sans, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontFamilyMono:"v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace",fontWeight:"400",fontWeightStrong:"500",cubicBezierEaseInOut:"cubic-bezier(.4, 0, .2, 1)",cubicBezierEaseOut:"cubic-bezier(0, 0, .2, 1)",cubicBezierEaseIn:"cubic-bezier(.4, 0, 1, 1)",borderRadius:"3px",borderRadiusSmall:"2px",fontSize:"14px",fontSizeTiny:"12px",fontSizeSmall:"14px",fontSizeMedium:"14px",fontSizeLarge:"15px",fontSizeHuge:"16px",lineHeight:"1.6",heightTiny:"22px",heightSmall:"28px",heightMedium:"34px",heightLarge:"40px",heightHuge:"46px",transformDebounceScale:"scale(1)"};const{fontSize:qGe,fontFamily:KGe,lineHeight:ZGe}=af;var cX=we("body",`
 margin: 0;
 font-size: ${qGe};
 font-family: ${KGe};
 line-height: ${ZGe};
 -webkit-text-size-adjust: 100%;
 -webkit-tap-highlight-color: transparent;
`,[we("input",`
 font-family: inherit;
 font-size: inherit;
 `)]);function QGe(r){const t=ke(!!r.value);if(t.value)return Sl(t);const e=nn(r,n=>{n&&(t.value=!0,e())});return Sl(t)}function On(r){const t=Q(r),e=ke(t.value);return nn(t,n=>{e.value=n}),typeof r=="function"?e:{__v_isRef:!0,get value(){return e.value},set value(n){r.set(n)}}}function FI(){return fv()!==null}const NI=typeof window!="undefined";let Dp,h0;const JGe=()=>{var r,t;Dp=NI?(t=(r=document)===null||r===void 0?void 0:r.fonts)===null||t===void 0?void 0:t.ready:void 0,h0=!1,Dp!==void 0?Dp.then(()=>{h0=!0}):h0=!0};JGe();function e8e(r){if(h0)return;let t=!1;Lo(()=>{h0||Dp==null||Dp.then(()=>{t||r()})}),os(()=>{t=!0})}const t8e={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function r8e(r,t,e){if(r==="mousemoveoutside"){const n=i=>{t.contains(i.target)||e(i)};return{mousemove:n,touchstart:n}}else if(r==="clickoutside"){let n=!1;const i=o=>{n=!t.contains(o.target)},a=o=>{!n||t.contains(o.target)||e(o)};return{mousedown:i,mouseup:a,touchstart:i,touchend:a}}return console.error(`[evtd/create-trap-handler]: name \`${r}\` is invalid. This could be a bug of evtd.`),{}}function fX(r,t,e){const n=t8e[r];let i=n.get(t);i===void 0&&n.set(t,i=new WeakMap);let a=i.get(e);return a===void 0&&i.set(e,a=r8e(r,t,e)),a}function n8e(r,t,e,n){if(r==="mousemoveoutside"||r==="clickoutside"){const i=fX(r,t,e);return Object.keys(i).forEach(a=>{zi(a,document,i[a],n)}),!0}return!1}function i8e(r,t,e,n){if(r==="mousemoveoutside"||r==="clickoutside"){const i=fX(r,t,e);return Object.keys(i).forEach(a=>{Ei(a,document,i[a],n)}),!0}return!1}function a8e(){if(typeof window=="undefined")return{on:()=>{},off:()=>{}};const r=new WeakMap,t=new WeakMap;function e(){r.set(this,!0)}function n(){r.set(this,!0),t.set(this,!0)}function i(C,_,T){const E=C[_];return C[_]=function(){return T.apply(C,arguments),E.apply(C,arguments)},C}function a(C,_){C[_]=Event.prototype[_]}const o=new WeakMap,s=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function l(){var C;return(C=o.get(this))!==null&&C!==void 0?C:null}function u(C,_){s!==void 0&&Object.defineProperty(C,"currentTarget",{configurable:!0,enumerable:!0,get:_!=null?_:s.get})}const c={bubble:{},capture:{}},f={};function d(){const C=function(_){const{type:T,eventPhase:E,target:k,bubbles:I}=_;if(E===2)return;const P=E===1?"capture":"bubble";let F=k;const $=[];for(;F===null&&(F=window),$.push(F),F!==window;)F=F.parentNode||null;const R=c.capture[T],L=c.bubble[T];if(i(_,"stopPropagation",e),i(_,"stopImmediatePropagation",n),u(_,l),P==="capture"){if(R===void 0)return;for(let O=$.length-1;O>=0&&!r.has(_);--O){const B=$[O],U=R.get(B);if(U!==void 0){o.set(_,B);for(const W of U){if(t.has(_))break;W(_)}}if(O===0&&!I&&L!==void 0){const W=L.get(B);if(W!==void 0)for(const X of W){if(t.has(_))break;X(_)}}}}else if(P==="bubble"){if(L===void 0)return;for(let O=0;O<$.length&&!r.has(_);++O){const B=$[O],U=L.get(B);if(U!==void 0){o.set(_,B);for(const W of U){if(t.has(_))break;W(_)}}}}a(_,"stopPropagation"),a(_,"stopImmediatePropagation"),u(_)};return C.displayName="evtdUnifiedHandler",C}function h(){const C=function(_){const{type:T,eventPhase:E}=_;if(E!==2)return;const k=f[T];k!==void 0&&k.forEach(I=>I(_))};return C.displayName="evtdUnifiedWindowEventHandler",C}const v=d(),p=h();function g(C,_){const T=c[C];return T[_]===void 0&&(T[_]=new Map,window.addEventListener(_,v,C==="capture")),T[_]}function m(C){return f[C]===void 0&&(f[C]=new Set,window.addEventListener(C,p)),f[C]}function y(C,_){let T=C.get(_);return T===void 0&&C.set(_,T=new Set),T}function b(C,_,T,E){const k=c[_][T];if(k!==void 0){const I=k.get(C);if(I!==void 0&&I.has(E))return!0}return!1}function x(C,_){const T=f[C];return!!(T!==void 0&&T.has(_))}function w(C,_,T,E){let k;if(typeof E=="object"&&E.once===!0?k=R=>{S(C,_,k,E),T(R)}:k=T,n8e(C,_,k,E))return;const P=E===!0||typeof E=="object"&&E.capture===!0?"capture":"bubble",F=g(P,C),$=y(F,_);if($.has(k)||$.add(k),_===window){const R=m(C);R.has(k)||R.add(k)}}function S(C,_,T,E){if(i8e(C,_,T,E))return;const I=E===!0||typeof E=="object"&&E.capture===!0,P=I?"capture":"bubble",F=g(P,C),$=y(F,_);if(_===window&&!b(_,I?"bubble":"capture",C,T)&&x(C,T)){const L=f[C];L.delete(T),L.size===0&&(window.removeEventListener(C,p),f[C]=void 0)}$.has(T)&&$.delete(T),$.size===0&&F.delete(_),F.size===0&&(window.removeEventListener(C,v,P==="capture"),c[P][C]=void 0)}return{on:w,off:S}}const{on:zi,off:Ei}=a8e(),dX=ke(null);function hX(r){dX.value={x:r.clientX,y:r.clientY}}let jS=0,vX=!0;function pX(){if(!NI)return Sl(ke(null));jS===0&&zi("click",window,hX,!0);const r=()=>{jS+=1};return vX&&(vX=FI())?(pc(r),os(()=>{jS-=1,jS===0&&Ei("click",window,hX,!0)})):r(),Sl(dX)}const o8e=ke(void 0);let YS=0;function gX(){o8e.value=Date.now()}let mX=!0;function yX(r){if(!NI)return Sl(ke(!1));const t=ke(!1);let e=null;function n(){e!==null&&window.clearTimeout(e)}function i(){n(),t.value=!0,e=window.setTimeout(()=>{t.value=!1},r)}YS===0&&zi("click",window,gX,!0);const a=()=>{YS+=1,zi("click",window,i,!0)};return mX&&(mX=FI())?(pc(a),os(()=>{YS-=1,YS===0&&Ei("click",window,gX,!0),Ei("click",window,i,!0),n()})):a(),Sl(t)}function ri(r,t){return nn(r,e=>{e!==void 0&&(t.value=e)}),Q(()=>r.value===void 0?t.value:r.value)}function of(){const r=ke(!1);return Lo(()=>{r.value=!0}),Sl(r)}function XS(r,t){return Q(()=>{for(const e of t)if(r[e]!==void 0)return r[e];return r[t[t.length-1]]})}const s8e=(typeof window=="undefined"?!1:/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream;function l8e(){return s8e}function BI(r={},t){const e=vc({ctrl:!1,command:!1,win:!1,shift:!1,tab:!1}),{keydown:n,keyup:i}=r,a=l=>{switch(l.key){case"Control":e.ctrl=!0;break;case"Meta":e.command=!0,e.win=!0;break;case"Shift":e.shift=!0;break;case"Tab":e.tab=!0;break}n!==void 0&&Object.keys(n).forEach(u=>{if(u!==l.key)return;const c=n[u];if(typeof c=="function")c(l);else{const{stop:f=!1,prevent:d=!1}=c;f&&l.stopPropagation(),d&&l.preventDefault(),c.handler(l)}})},o=l=>{switch(l.key){case"Control":e.ctrl=!1;break;case"Meta":e.command=!1,e.win=!1;break;case"Shift":e.shift=!1;break;case"Tab":e.tab=!1;break}i!==void 0&&Object.keys(i).forEach(u=>{if(u!==l.key)return;const c=i[u];if(typeof c=="function")c(l);else{const{stop:f=!1,prevent:d=!1}=c;f&&l.stopPropagation(),d&&l.preventDefault(),c.handler(l)}})},s=()=>{(t===void 0||t.value)&&(zi("keydown",document,a),zi("keyup",document,o)),t!==void 0&&nn(t,l=>{l?(zi("keydown",document,a),zi("keyup",document,o)):(Ei("keydown",document,a),Ei("keyup",document,o))})};return FI()?(pc(s),os(()=>{(t===void 0||t.value)&&(Ei("keydown",document,a),Ei("keyup",document,o))})):s(),Sl(e)}function bX(r,t="default",e=[]){const i=r.$slots[t];return i===void 0?e:i()}function Kl(r,t=[],e){const n={};return t.forEach(i=>{n[i]=r[i]}),Object.assign(n,e)}function xX(r,t=[],e){const n={};return Object.getOwnPropertyNames(r).forEach(a=>{t.includes(a)||(n[a]=r[a])}),Object.assign(n,e)}function v0(r,t=!0,e=[]){return r.forEach(n=>{if(n!==null){if(typeof n!="object"){(typeof n=="string"||typeof n=="number")&&e.push(rm(String(n)));return}if(Array.isArray(n)){v0(n,t,e);return}if(n.type===Fi){if(n.children===null)return;Array.isArray(n.children)&&v0(n.children,t,e)}else n.type!==ks&&e.push(n)}}),e}function pt(r,...t){if(Array.isArray(r))r.forEach(e=>pt(e,...t));else return r(...t)}function ju(r){return Object.keys(r)}const Hn=(r,...t)=>typeof r=="function"?r(...t):typeof r=="string"?rm(r):typeof r=="number"?rm(String(r)):null;function Zl(r,t){console.error(`[naive/${r}]: ${t}`)}function qS(r,t){throw new Error(`[naive/${r}]: ${t}`)}function u8e(r){switch(typeof r){case"string":return r||void 0;case"number":return String(r);default:return}}function $I(r,t="default",e=void 0){const n=r[t];if(!n)return Zl("getFirstSlotVNode",`slot[${t}] is empty`),null;const i=v0(n(e));return i.length===1?i[0]:(Zl("getFirstSlotVNode",`slot[${t}] should have exactly one child`),null)}function wX(r){return typeof r=="string"?`s-${r}`:`n-${r}`}function c8e(r){return t=>{t?r.value=t.$el:r.value=null}}const f8e=/^(\d|\.)+$/,SX=/(\d|\.)+/;function ca(r,{c:t=1,offset:e=0,attachPx:n=!0}={}){if(typeof r=="number"){const i=(r+e)*t;return i===0?"0":`${i}px`}else if(typeof r=="string")if(f8e.test(r)){const i=(Number(r)+e)*t;return n?i===0?"0":`${i}px`:`${i}`}else{const i=SX.exec(r);return i?r.replace(SX,String((Number(i[0])+e)*t)):r}return r}const zI=Symbol("modalBody"),CX=Symbol("modal"),GI=Symbol("drawerBody"),UI=Symbol("popoverBodyInjection"),VI=Symbol("internal-select-menu"),EX=Symbol("internal-select-menu-body"),_X="__disabled__";function Ua(r){const t=nr(zI,null),e=nr(GI,null),n=nr(UI,null),i=nr(EX,null);return On(()=>{var a;const{to:o}=r;return o!==void 0?o===!1?_X:o===!0?"body":o:(t==null?void 0:t.value)?(a=t.value.$el)!==null&&a!==void 0?a:t.value:(e==null?void 0:e.value)?e.value:(n==null?void 0:n.value)?n.value:(i==null?void 0:i.value)?i.value:o!=null?o:"body"})}Ua.tdkey=_X;Ua.propTo={type:[String,Object,Boolean],default:void 0};let TX=!1;function d8e(){pc(()=>{var r;TX||(TX=!0,((r=window==null?void 0:window.CSS)===null||r===void 0?void 0:r.registerProperty)&&(CSS.registerProperty({name:"--color-start",syntax:"<color>",inherits:!1,initialValue:"#0000"}),CSS.registerProperty({name:"--color-end",syntax:"<color>",inherits:!1,initialValue:"#0000"})))})}function h8e(r,t,e){var n;const i=nr(r,null);if(i===null)return;const a=(n=fv())===null||n===void 0?void 0:n.proxy;nn(e,o),o(e.value),os(()=>{o(void 0,e.value)});function o(u,c){const f=i[t];c!==void 0&&s(f,c),u!==void 0&&l(f,u)}function s(u,c){u[c]||(u[c]=[]),u[c].splice(u[c].findIndex(f=>f===a),1)}function l(u,c){u[c]||(u[c]=[]),~u[c].findIndex(f=>f===a)||u[c].push(a)}}function v8e(r,t,e){if(!t)return r;const n=ke(r.value);let i=null;return nn(r,a=>{i!==null&&window.clearTimeout(i),a===!0?e&&!e.value?n.value=!0:i=window.setTimeout(()=>{n.value=!0},t):n.value=!1}),n}const Rp=Symbol("configProviderInjection"),p8e={abstract:Boolean,bordered:{type:Boolean,default:void 0},clsPrefix:String,locale:Object,dateLocale:Object,namespace:String,rtl:Array,tag:{type:String,default:"div"},hljs:Object,theme:Object,themeOverrides:Object,componentOptions:Object,icons:Object,breakpoints:Object,as:{type:String,validator:()=>(Zl("config-provider","`as` is deprecated, please use `tag` instead."),!0),default:void 0}};mt({name:"ConfigProvider",alias:["App"],props:p8e,setup(r){const t=nr(Rp,null),e=Q(()=>{const{theme:f}=r;if(f===null)return;const d=t==null?void 0:t.mergedThemeRef.value;return f===void 0?d:d===void 0?f:Object.assign({},d,f)}),n=Q(()=>{const{themeOverrides:f}=r;if(f!==null){if(f===void 0)return t==null?void 0:t.mergedThemeOverridesRef.value;{const d=t==null?void 0:t.mergedThemeOverridesRef.value;return d===void 0?f:f0({},d,f)}}}),i=On(()=>{const{namespace:f}=r;return f===void 0?t==null?void 0:t.mergedNamespaceRef.value:f}),a=On(()=>{const{bordered:f}=r;return f===void 0?t==null?void 0:t.mergedBorderedRef.value:f}),o=Q(()=>{const{icons:f}=r;return f===void 0?t==null?void 0:t.mergedIconsRef.value:f}),s=Q(()=>{const{componentOptions:f}=r;return f!==void 0?f:t==null?void 0:t.mergedComponentPropsRef.value}),l=Q(()=>{const{clsPrefix:f}=r;return f!==void 0?f:t==null?void 0:t.mergedClsPrefixRef.value}),u=Q(()=>{const{rtl:f}=r;if(f===void 0)return t==null?void 0:t.mergedRtlRef.value;const d={};for(const h of f)d[h.name]=w_(h);return d}),c=Q(()=>r.breakpoints||(t==null?void 0:t.mergedBreakpointsRef.value));return Qr(Rp,{mergedBreakpointsRef:c,mergedRtlRef:u,mergedIconsRef:o,mergedComponentPropsRef:s,mergedBorderedRef:a,mergedNamespaceRef:i,mergedClsPrefixRef:l,mergedLocaleRef:Q(()=>{const{locale:f}=r;if(f!==null)return f===void 0?t==null?void 0:t.mergedLocaleRef.value:f}),mergedDateLocaleRef:Q(()=>{const{dateLocale:f}=r;if(f!==null)return f===void 0?t==null?void 0:t.mergedDateLocaleRef.value:f}),mergedHljsRef:Q(()=>{const{hljs:f}=r;return f===void 0?t==null?void 0:t.mergedHljsRef.value:f}),mergedThemeRef:e,mergedThemeOverridesRef:n}),{mergedClsPrefix:l,mergedBordered:a,mergedNamespace:i,mergedTheme:e,mergedThemeOverrides:n}},render(){return this.abstract?Jr(this.$slots,"default"):M(this.as||this.tag,{class:`${this.mergedClsPrefix||AX}-config-provider`},Jr(this.$slots,"default"))}});function ro(r){return r}function rr(r,t,e,n,i,a){const o=Pp();if(e){const u=()=>{const c=a==null?void 0:a.value;e.mount({id:c===void 0?t:c+t,head:!0,props:{bPrefix:c?`.${c}-`:void 0},ssr:o}),cX.mount({id:"naive-ui/global",head:!0,ssr:o})};o?u():pc(u)}const s=nr(Rp,null);return Q(()=>{var u;const{theme:{common:c,self:f,peers:d={}}={},themeOverrides:h={},builtinThemeOverrides:v={}}=i,{common:p,peers:g}=h,{common:m=void 0,[r]:{common:y=void 0,self:b=void 0,peers:x={}}={}}=(s==null?void 0:s.mergedThemeRef.value)||{},{common:w=void 0,[r]:S={}}=(s==null?void 0:s.mergedThemeOverridesRef.value)||{},{common:C,peers:_={}}=S,T=f0({},c||y||m||n.common,w,C,p),E=f0((u=f||b||n.self)===null||u===void 0?void 0:u(T),v,S,h);return{common:T,self:E,peers:f0({},n.peers,x,d),peerOverrides:f0({},_,g)}})}rr.props={theme:Object,themeOverrides:Object,builtinThemeOverrides:Object};const AX="n";function pn(r={},t={defaultBordered:!0}){const e=nr(Rp,null);return{NConfigProvider:e,mergedBorderedRef:Q(()=>{var n,i;const{bordered:a}=r;return a!==void 0?a:(i=(n=e==null?void 0:e.mergedBorderedRef.value)!==null&&n!==void 0?n:t.defaultBordered)!==null&&i!==void 0?i:!0}),mergedClsPrefixRef:Q(()=>(e==null?void 0:e.mergedClsPrefixRef.value)||AX),namespaceRef:Q(()=>e==null?void 0:e.mergedNamespaceRef.value)}}const g8e={name:"en-US",global:{undo:"Undo",redo:"Redo",confirm:"Confirm"},Popconfirm:{positiveText:"Confirm",negativeText:"Cancel"},Cascader:{placeholder:"Please Select",loading:"Loading",loadingRequiredMessage:r=>`Please load all ${r}'s descedants before checking it.`},Time:{dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd HH:mm:ss"},DatePicker:{yearFormat:"yyyy",monthFormat:"MMM",dayFormat:"eeeeee",clear:"Clear",now:"Now",confirm:"Confirm",selectTime:"Select Time",selectDate:"Select Date",datePlaceholder:"Select Date",datetimePlaceholder:"Select Date and Time",monthPlaceholder:"Select Month",yearPlaceholder:"Select Year",startDatePlaceholder:"Start Date",endDatePlaceholder:"End Date",startDatetimePlaceholder:"Start Date and Time",endDatetimePlaceholder:"End Date and Time",monthBeforeYear:!0,firstDayOfWeek:6,today:"Today"},DataTable:{checkTableAll:"Select all in the table",uncheckTableAll:"Unselect all in the table",confirm:"Confirm",clear:"Clear"},Transfer:{sourceTitle:"Source",targetTitle:"Target"},Empty:{description:"No Data"},Select:{placeholder:"Please Select"},TimePicker:{placeholder:"Select Time",positiveText:"OK",negativeText:"Cancel",now:"Now"},Pagination:{goto:"Goto",selectionSuffix:"page"},DynamicTags:{add:"Add"},Log:{loading:"Loading"},Input:{placeholder:"Please Input"},InputNumber:{placeholder:"Please Input"},DynamicInput:{create:"Create"},ThemeEditor:{title:"Theme Editor",clearAllVars:"Clear All Variables",clearSearch:"Clear Search",filterCompName:"Filter Component Name",filterVarName:"Filter Variable Name",import:"Import",export:"Export",restore:"Reset to Default"}};var m8e=g8e;function HI(r){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.width?String(t.width):r.defaultWidth,n=r.formats[e]||r.formats[r.defaultWidth];return n}}function Kr(r,t){if(t.length<r)throw new TypeError(r+" argument"+(r>1?"s":"")+" required, but only "+t.length+" present")}function cn(r){Kr(1,arguments);var t=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&t==="[object Date]"?new Date(r.getTime()):typeof r=="number"||t==="[object Number]"?new Date(r):((typeof r=="string"||t==="[object String]")&&typeof console!="undefined"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function Ln(r){if(r===null||r===!0||r===!1)return NaN;var t=Number(r);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function th(r,t){Kr(1,arguments);var e=t||{},n=e.locale,i=n&&n.options&&n.options.weekStartsOn,a=i==null?0:Ln(i),o=e.weekStartsOn==null?a:Ln(e.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=cn(r),l=s.getUTCDay(),u=(l<o?7:0)+l-o;return s.setUTCDate(s.getUTCDate()-u),s.setUTCHours(0,0,0,0),s}function p0(r){return function(t,e){var n=e||{},i=n.context?String(n.context):"standalone",a;if(i==="formatting"&&r.formattingValues){var o=r.defaultFormattingWidth||r.defaultWidth,s=n.width?String(n.width):o;a=r.formattingValues[s]||r.formattingValues[o]}else{var l=r.defaultWidth,u=n.width?String(n.width):r.defaultWidth;a=r.values[u]||r.values[l]}var c=r.argumentCallback?r.argumentCallback(t):t;return a[c]}}function y8e(r){return function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.match(r.matchPattern);if(!n)return null;var i=n[0],a=t.match(r.parsePattern);if(!a)return null;var o=r.valueCallback?r.valueCallback(a[0]):a[0];o=e.valueCallback?e.valueCallback(o):o;var s=t.slice(i.length);return{value:o,rest:s}}}function g0(r){return function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.width,i=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],a=t.match(i);if(!a)return null;var o=a[0],s=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],l=Array.isArray(s)?x8e(s,function(f){return f.test(o)}):b8e(s,function(f){return f.test(o)}),u;u=r.valueCallback?r.valueCallback(l):l,u=e.valueCallback?e.valueCallback(u):u;var c=t.slice(o.length);return{value:u,rest:c}}}function b8e(r,t){for(var e in r)if(r.hasOwnProperty(e)&&t(r[e]))return e}function x8e(r,t){for(var e=0;e<r.length;e++)if(t(r[e]))return e}var w8e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},S8e=function(r,t,e){var n,i=w8e[r];return typeof i=="string"?n=i:t===1?n=i.one:n=i.other.replace("{{count}}",t.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+n:n+" ago":n},C8e=S8e,E8e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},_8e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},T8e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},A8e={date:HI({formats:E8e,defaultWidth:"full"}),time:HI({formats:_8e,defaultWidth:"full"}),dateTime:HI({formats:T8e,defaultWidth:"full"})},k8e=A8e,M8e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},I8e=function(r,t,e,n){return M8e[r]},P8e=I8e,D8e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},R8e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},O8e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},L8e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},F8e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},N8e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},B8e=function(r,t){var e=Number(r),n=e%100;if(n>20||n<10)switch(n%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},$8e={ordinalNumber:B8e,era:p0({values:D8e,defaultWidth:"wide"}),quarter:p0({values:R8e,defaultWidth:"wide",argumentCallback:function(r){return r-1}}),month:p0({values:O8e,defaultWidth:"wide"}),day:p0({values:L8e,defaultWidth:"wide"}),dayPeriod:p0({values:F8e,defaultWidth:"wide",formattingValues:N8e,defaultFormattingWidth:"wide"})},z8e=$8e,G8e=/^(\d+)(th|st|nd|rd)?/i,U8e=/\d+/i,V8e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},H8e={any:[/^b/i,/^(a|c)/i]},W8e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},j8e={any:[/1/i,/2/i,/3/i,/4/i]},Y8e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},X8e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},q8e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},K8e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Z8e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Q8e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},J8e={ordinalNumber:y8e({matchPattern:G8e,parsePattern:U8e,valueCallback:function(r){return parseInt(r,10)}}),era:g0({matchPatterns:V8e,defaultMatchWidth:"wide",parsePatterns:H8e,defaultParseWidth:"any"}),quarter:g0({matchPatterns:W8e,defaultMatchWidth:"wide",parsePatterns:j8e,defaultParseWidth:"any",valueCallback:function(r){return r+1}}),month:g0({matchPatterns:Y8e,defaultMatchWidth:"wide",parsePatterns:X8e,defaultParseWidth:"any"}),day:g0({matchPatterns:q8e,defaultMatchWidth:"wide",parsePatterns:K8e,defaultParseWidth:"any"}),dayPeriod:g0({matchPatterns:Z8e,defaultMatchWidth:"any",parsePatterns:Q8e,defaultParseWidth:"any"})},eUe=J8e,tUe={code:"en-US",formatDistance:C8e,formatLong:k8e,formatRelative:P8e,localize:z8e,match:eUe,options:{weekStartsOn:0,firstWeekContainsDate:1}},WI=tUe;const rUe={name:"en-US",locale:WI};var nUe=rUe;function sf(r){const{mergedLocaleRef:t,mergedDateLocaleRef:e}=nr(Rp,null)||{},n=Q(()=>{var a,o;return(o=(a=t==null?void 0:t.value)===null||a===void 0?void 0:a[r])!==null&&o!==void 0?o:m8e[r]});return{dateLocaleRef:Q(()=>{var a;return(a=e==null?void 0:e.value)!==null&&a!==void 0?a:nUe}),localeRef:n}}function Op(r,t,e){if(!t)return;const n=Pp(),i=()=>{const a=e==null?void 0:e.value;t.mount({id:a===void 0?r:a+r,head:!0,props:{bPrefix:a?`.${a}-`:void 0},ssr:n}),cX.mount({id:"naive-ui/global",head:!0,ssr:n})};n?i():pc(i)}var iUe=mt({name:"ArrowDown",render(){return M("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},M("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},M("g",{"fill-rule":"nonzero"},M("path",{d:"M23.7916,15.2664 C24.0788,14.9679 24.0696,14.4931 23.7711,14.206 C23.4726,13.9188 22.9978,13.928 22.7106,14.2265 L14.7511,22.5007 L14.7511,3.74792 C14.7511,3.33371 14.4153,2.99792 14.0011,2.99792 C13.5869,2.99792 13.2511,3.33371 13.2511,3.74793 L13.2511,22.4998 L5.29259,14.2265 C5.00543,13.928 4.53064,13.9188 4.23213,14.206 C3.93361,14.4931 3.9244,14.9679 4.21157,15.2664 L13.2809,24.6944 C13.6743,25.1034 14.3289,25.1034 14.7223,24.6944 L23.7916,15.2664 Z"}))))}});function Yu(r,t){return mt({name:aGe(r),setup(){const{NConfigProvider:e}=pn();return()=>{var n;const i=(n=e==null?void 0:e.mergedIconsRef.value)===null||n===void 0?void 0:n[r];return i?i():t}}})}var rh=mt({name:"Backward",render(){return M("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},M("path",{d:"M12.2674 15.793C11.9675 16.0787 11.4927 16.0672 11.2071 15.7673L6.20572 10.5168C5.9298 10.2271 5.9298 9.7719 6.20572 9.48223L11.2071 4.23177C11.4927 3.93184 11.9675 3.92031 12.2674 4.206C12.5673 4.49169 12.5789 4.96642 12.2932 5.26634L7.78458 9.99952L12.2932 14.7327C12.5789 15.0326 12.5673 15.5074 12.2674 15.793Z",fill:"currentColor"}))}}),kX=Yu("date",M("svg",{width:"28px",height:"28px",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},M("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},M("g",{"fill-rule":"nonzero"},M("path",{d:"M21.75,3 C23.5449254,3 25,4.45507456 25,6.25 L25,21.75 C25,23.5449254 23.5449254,25 21.75,25 L6.25,25 C4.45507456,25 3,23.5449254 3,21.75 L3,6.25 C3,4.45507456 4.45507456,3 6.25,3 L21.75,3 Z M23.5,9.503 L4.5,9.503 L4.5,21.75 C4.5,22.7164983 5.28350169,23.5 6.25,23.5 L21.75,23.5 C22.7164983,23.5 23.5,22.7164983 23.5,21.75 L23.5,9.503 Z M21.75,4.5 L6.25,4.5 C5.28350169,4.5 4.5,5.28350169 4.5,6.25 L4.5,8.003 L23.5,8.003 L23.5,6.25 C23.5,5.28350169 22.7164983,4.5 21.75,4.5 Z"}))))),aUe=mt({name:"Checkmark",render(){return M("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},M("g",{fill:"none"},M("path",{d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032z",fill:"currentColor"})))}}),jI=mt({name:"ChevronRight",render(){return M("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},M("path",{d:"M5.64645 3.14645C5.45118 3.34171 5.45118 3.65829 5.64645 3.85355L9.79289 8L5.64645 12.1464C5.45118 12.3417 5.45118 12.6583 5.64645 12.8536C5.84171 13.0488 6.15829 13.0488 6.35355 12.8536L10.8536 8.35355C11.0488 8.15829 11.0488 7.84171 10.8536 7.64645L6.35355 3.14645C6.15829 2.95118 5.84171 2.95118 5.64645 3.14645Z",fill:"currentColor"}))}}),oUe=Yu("close",M("svg",{viewBox:"0 0 12 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},M("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},M("g",{fill:"currentColor","fill-rule":"nonzero"},M("path",{d:"M2.08859116,2.2156945 L2.14644661,2.14644661 C2.32001296,1.97288026 2.58943736,1.95359511 2.7843055,2.08859116 L2.85355339,2.14644661 L6,5.293 L9.14644661,2.14644661 C9.34170876,1.95118446 9.65829124,1.95118446 9.85355339,2.14644661 C10.0488155,2.34170876 10.0488155,2.65829124 9.85355339,2.85355339 L6.707,6 L9.85355339,9.14644661 C10.0271197,9.32001296 10.0464049,9.58943736 9.91140884,9.7843055 L9.85355339,9.85355339 C9.67998704,10.0271197 9.41056264,10.0464049 9.2156945,9.91140884 L9.14644661,9.85355339 L6,6.707 L2.85355339,9.85355339 C2.65829124,10.0488155 2.34170876,10.0488155 2.14644661,9.85355339 C1.95118446,9.65829124 1.95118446,9.34170876 2.14644661,9.14644661 L5.293,6 L2.14644661,2.85355339 C1.97288026,2.67998704 1.95359511,2.41056264 2.08859116,2.2156945 L2.14644661,2.14644661 L2.08859116,2.2156945 Z"}))))),sUe=mt({name:"Eye",render(){return M("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},M("path",{d:"M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 0 0-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 0 0 0-17.47C428.89 172.28 347.8 112 255.66 112z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"}),M("circle",{cx:"256",cy:"256",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"}))}}),lUe=mt({name:"EyeOff",render(){return M("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},M("path",{d:"M432 448a15.92 15.92 0 0 1-11.31-4.69l-352-352a16 16 0 0 1 22.62-22.62l352 352A16 16 0 0 1 432 448z",fill:"currentColor"}),M("path",{d:"M255.66 384c-41.49 0-81.5-12.28-118.92-36.5c-34.07-22-64.74-53.51-88.7-91v-.08c19.94-28.57 41.78-52.73 65.24-72.21a2 2 0 0 0 .14-2.94L93.5 161.38a2 2 0 0 0-2.71-.12c-24.92 21-48.05 46.76-69.08 76.92a31.92 31.92 0 0 0-.64 35.54c26.41 41.33 60.4 76.14 98.28 100.65C162 402 207.9 416 255.66 416a239.13 239.13 0 0 0 75.8-12.58a2 2 0 0 0 .77-3.31l-21.58-21.58a4 4 0 0 0-3.83-1a204.8 204.8 0 0 1-51.16 6.47z",fill:"currentColor"}),M("path",{d:"M490.84 238.6c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.66 96a227.34 227.34 0 0 0-74.89 12.83a2 2 0 0 0-.75 3.31l21.55 21.55a4 4 0 0 0 3.88 1a192.82 192.82 0 0 1 50.21-6.69c40.69 0 80.58 12.43 118.55 37c34.71 22.4 65.74 53.88 89.76 91a.13.13 0 0 1 0 .16a310.72 310.72 0 0 1-64.12 72.73a2 2 0 0 0-.15 2.95l19.9 19.89a2 2 0 0 0 2.7.13a343.49 343.49 0 0 0 68.64-78.48a32.2 32.2 0 0 0-.1-34.78z",fill:"currentColor"}),M("path",{d:"M256 160a95.88 95.88 0 0 0-21.37 2.4a2 2 0 0 0-1 3.38l112.59 112.56a2 2 0 0 0 3.38-1A96 96 0 0 0 256 160z",fill:"currentColor"}),M("path",{d:"M165.78 233.66a2 2 0 0 0-3.38 1a96 96 0 0 0 115 115a2 2 0 0 0 1-3.38z",fill:"currentColor"}))}}),uUe=mt({name:"Empty",render(){return M("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},M("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),M("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}}),KS=Yu("error",M("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},M("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},M("g",{"fill-rule":"nonzero"},M("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M17.8838835,16.1161165 L17.7823881,16.0249942 C17.3266086,15.6583353 16.6733914,15.6583353 16.2176119,16.0249942 L16.1161165,16.1161165 L16.0249942,16.2176119 C15.6583353,16.6733914 15.6583353,17.3266086 16.0249942,17.7823881 L16.1161165,17.8838835 L22.233,24 L16.1161165,30.1161165 L16.0249942,30.2176119 C15.6583353,30.6733914 15.6583353,31.3266086 16.0249942,31.7823881 L16.1161165,31.8838835 L16.2176119,31.9750058 C16.6733914,32.3416647 17.3266086,32.3416647 17.7823881,31.9750058 L17.8838835,31.8838835 L24,25.767 L30.1161165,31.8838835 L30.2176119,31.9750058 C30.6733914,32.3416647 31.3266086,32.3416647 31.7823881,31.9750058 L31.8838835,31.8838835 L31.9750058,31.7823881 C32.3416647,31.3266086 32.3416647,30.6733914 31.9750058,30.2176119 L31.8838835,30.1161165 L25.767,24 L31.8838835,17.8838835 L31.9750058,17.7823881 C32.3416647,17.3266086 32.3416647,16.6733914 31.9750058,16.2176119 L31.8838835,16.1161165 L31.7823881,16.0249942 C31.3266086,15.6583353 30.6733914,15.6583353 30.2176119,16.0249942 L30.1161165,16.1161165 L24,22.233 L17.8838835,16.1161165 L17.7823881,16.0249942 L17.8838835,16.1161165 Z"}))))),nh=mt({name:"FastBackward",render(){return M("svg",{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},M("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},M("g",{fill:"currentColor","fill-rule":"nonzero"},M("path",{d:"M8.73171,16.7949 C9.03264,17.0795 9.50733,17.0663 9.79196,16.7654 C10.0766,16.4644 10.0634,15.9897 9.76243,15.7051 L4.52339,10.75 L17.2471,10.75 C17.6613,10.75 17.9971,10.4142 17.9971,10 C17.9971,9.58579 17.6613,9.25 17.2471,9.25 L4.52112,9.25 L9.76243,4.29275 C10.0634,4.00812 10.0766,3.53343 9.79196,3.2325 C9.50733,2.93156 9.03264,2.91834 8.73171,3.20297 L2.31449,9.27241 C2.14819,9.4297 2.04819,9.62981 2.01448,9.8386 C2.00308,9.89058 1.99707,9.94459 1.99707,10 C1.99707,10.0576 2.00356,10.1137 2.01585,10.1675 C2.05084,10.3733 2.15039,10.5702 2.31449,10.7254 L8.73171,16.7949 Z"}))))}}),ih=mt({name:"FastForward",render(){return M("svg",{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},M("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},M("g",{fill:"currentColor","fill-rule":"nonzero"},M("path",{d:"M11.2654,3.20511 C10.9644,2.92049 10.4897,2.93371 10.2051,3.23464 C9.92049,3.53558 9.93371,4.01027 10.2346,4.29489 L15.4737,9.25 L2.75,9.25 C2.33579,9.25 2,9.58579 2,10.0000012 C2,10.4142 2.33579,10.75 2.75,10.75 L15.476,10.75 L10.2346,15.7073 C9.93371,15.9919 9.92049,16.4666 10.2051,16.7675 C10.4897,17.0684 10.9644,17.0817 11.2654,16.797 L17.6826,10.7276 C17.8489,10.5703 17.9489,10.3702 17.9826,10.1614 C17.994,10.1094 18,10.0554 18,10.0000012 C18,9.94241 17.9935,9.88633 17.9812,9.83246 C17.9462,9.62667 17.8467,9.42976 17.6826,9.27455 L11.2654,3.20511 Z"}))))}}),cUe=mt({name:"Filter",render(){return M("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},M("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},M("g",{"fill-rule":"nonzero"},M("path",{d:"M17,19 C17.5522847,19 18,19.4477153 18,20 C18,20.5522847 17.5522847,21 17,21 L11,21 C10.4477153,21 10,20.5522847 10,20 C10,19.4477153 10.4477153,19 11,19 L17,19 Z M21,13 C21.5522847,13 22,13.4477153 22,14 C22,14.5522847 21.5522847,15 21,15 L7,15 C6.44771525,15 6,14.5522847 6,14 C6,13.4477153 6.44771525,13 7,13 L21,13 Z M24,7 C24.5522847,7 25,7.44771525 25,8 C25,8.55228475 24.5522847,9 24,9 L4,9 C3.44771525,9 3,8.55228475 3,8 C3,7.44771525 3.44771525,7 4,7 L24,7 Z"}))))}}),ah=mt({name:"Forward",render(){return M("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},M("path",{d:"M7.73271 4.20694C8.03263 3.92125 8.50737 3.93279 8.79306 4.23271L13.7944 9.48318C14.0703 9.77285 14.0703 10.2281 13.7944 10.5178L8.79306 15.7682C8.50737 16.0681 8.03263 16.0797 7.73271 15.794C7.43279 15.5083 7.42125 15.0336 7.70694 14.7336L12.2155 10.0005L7.70694 5.26729C7.42125 4.96737 7.43279 4.49264 7.73271 4.20694Z",fill:"currentColor"}))}}),ZS=Yu("info",M("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},M("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},M("g",{"fill-rule":"nonzero"},M("path",{d:"M14,2 C20.6274,2 26,7.37258 26,14 C26,20.6274 20.6274,26 14,26 C7.37258,26 2,20.6274 2,14 C2,7.37258 7.37258,2 14,2 Z M14,11 C13.4477,11 13,11.4477 13,12 L13,12 L13,20 C13,20.5523 13.4477,21 14,21 C14.5523,21 15,20.5523 15,20 L15,20 L15,12 C15,11.4477 14.5523,11 14,11 Z M14,6.75 C13.3096,6.75 12.75,7.30964 12.75,8 C12.75,8.69036 13.3096,9.25 14,9.25 C14.6904,9.25 15.25,8.69036 15.25,8 C15.25,7.30964 14.6904,6.75 14,6.75 Z"}))))),MX=mt({name:"More",render(){return M("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},M("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},M("g",{fill:"currentColor","fill-rule":"nonzero"},M("path",{d:"M4,7 C4.55228,7 5,7.44772 5,8 C5,8.55229 4.55228,9 4,9 C3.44772,9 3,8.55229 3,8 C3,7.44772 3.44772,7 4,7 Z M8,7 C8.55229,7 9,7.44772 9,8 C9,8.55229 8.55229,9 8,9 C7.44772,9 7,8.55229 7,8 C7,7.44772 7.44772,7 8,7 Z M12,7 C12.5523,7 13,7.44772 13,8 C13,8.55229 12.5523,9 12,9 C11.4477,9 11,8.55229 11,8 C11,7.44772 11.4477,7 12,7 Z"}))))}}),QS=Yu("success",M("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},M("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},M("g",{"fill-rule":"nonzero"},M("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M32.6338835,17.6161165 C32.1782718,17.1605048 31.4584514,17.1301307 30.9676119,17.5249942 L30.8661165,17.6161165 L20.75,27.732233 L17.1338835,24.1161165 C16.6457281,23.6279612 15.8542719,23.6279612 15.3661165,24.1161165 C14.9105048,24.5717282 14.8801307,25.2915486 15.2749942,25.7823881 L15.3661165,25.8838835 L19.8661165,30.3838835 C20.3217282,30.8394952 21.0415486,30.8698693 21.5323881,30.4750058 L21.6338835,30.3838835 L32.6338835,19.3838835 C33.1220388,18.8957281 33.1220388,18.1042719 32.6338835,17.6161165 Z"}))))),fUe=mt({name:"Switcher",render(){return M("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","enable-background":"new 0 0 512 512"},M("g",null,M("polygon",{points:"192,128 320,256 192,384"})))}}),dUe=Yu("time",M("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},M("path",{d:"M256,64C150,64,64,150,64,256s86,192,192,192,192-86,192-192S362,64,256,64Z",style:`
        fill: none;
        stroke: currentColor;
        stroke-miterlimit: 10;
        stroke-width: 32px;
      `}),M("polyline",{points:"256 128 256 272 352 272",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))),JS=Yu("warning",M("svg",{viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},M("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},M("g",{"fill-rule":"nonzero"},M("path",{d:"M12,2 C17.523,2 22,6.478 22,12 C22,17.522 17.523,22 12,22 C6.477,22 2,17.522 2,12 C2,6.478 6.477,2 12,2 Z M12.0018002,15.0037242 C11.450254,15.0037242 11.0031376,15.4508407 11.0031376,16.0023869 C11.0031376,16.553933 11.450254,17.0010495 12.0018002,17.0010495 C12.5533463,17.0010495 13.0004628,16.553933 13.0004628,16.0023869 C13.0004628,15.4508407 12.5533463,15.0037242 12.0018002,15.0037242 Z M11.99964,7 C11.4868042,7.00018474 11.0642719,7.38637706 11.0066858,7.8837365 L11,8.00036004 L11.0018003,13.0012393 L11.00857,13.117858 C11.0665141,13.6151758 11.4893244,14.0010638 12.0021602,14.0008793 C12.514996,14.0006946 12.9375283,13.6145023 12.9951144,13.1171428 L13.0018002,13.0005193 L13,7.99964009 L12.9932303,7.8830214 C12.9352861,7.38570354 12.5124758,6.99981552 11.99964,7 Z"}))))),IX=mt({name:"ChevronDown",render(){return M("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},M("path",{d:"M3.14645 5.64645C3.34171 5.45118 3.65829 5.45118 3.85355 5.64645L8 9.79289L12.1464 5.64645C12.3417 5.45118 12.6583 5.45118 12.8536 5.64645C13.0488 5.84171 13.0488 6.15829 12.8536 6.35355L8.35355 10.8536C8.15829 11.0488 7.84171 11.0488 7.64645 10.8536L3.14645 6.35355C2.95118 6.15829 2.95118 5.84171 3.14645 5.64645Z",fill:"currentColor"}))}}),hUe=Yu("clear",M("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},M("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},M("g",{fill:"currentColor","fill-rule":"nonzero"},M("path",{d:"M8,2 C11.3137085,2 14,4.6862915 14,8 C14,11.3137085 11.3137085,14 8,14 C4.6862915,14 2,11.3137085 2,8 C2,4.6862915 4.6862915,2 8,2 Z M6.5343055,5.83859116 C6.33943736,5.70359511 6.07001296,5.72288026 5.89644661,5.89644661 L5.89644661,5.89644661 L5.83859116,5.9656945 C5.70359511,6.16056264 5.72288026,6.42998704 5.89644661,6.60355339 L5.89644661,6.60355339 L7.293,8 L5.89644661,9.39644661 L5.83859116,9.4656945 C5.70359511,9.66056264 5.72288026,9.92998704 5.89644661,10.1035534 L5.89644661,10.1035534 L5.9656945,10.1614088 C6.16056264,10.2964049 6.42998704,10.2771197 6.60355339,10.1035534 L6.60355339,10.1035534 L8,8.707 L9.39644661,10.1035534 L9.4656945,10.1614088 C9.66056264,10.2964049 9.92998704,10.2771197 10.1035534,10.1035534 L10.1035534,10.1035534 L10.1614088,10.0343055 C10.2964049,9.83943736 10.2771197,9.57001296 10.1035534,9.39644661 L10.1035534,9.39644661 L8.707,8 L10.1035534,6.60355339 L10.1614088,6.5343055 C10.2964049,6.33943736 10.2771197,6.07001296 10.1035534,5.89644661 L10.1035534,5.89644661 L10.0343055,5.83859116 C9.83943736,5.70359511 9.57001296,5.72288026 9.39644661,5.89644661 L9.39644661,5.89644661 L8,7.293 L6.60355339,5.89644661 Z"}))))),vUe=mt({name:"ChevronDownFilled",render(){return M("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},M("path",{d:"M3.20041 5.73966C3.48226 5.43613 3.95681 5.41856 4.26034 5.70041L8 9.22652L11.7397 5.70041C12.0432 5.41856 12.5177 5.43613 12.7996 5.73966C13.0815 6.0432 13.0639 6.51775 12.7603 6.7996L8.51034 10.7996C8.22258 11.0668 7.77743 11.0668 7.48967 10.7996L3.23966 6.7996C2.93613 6.51775 2.91856 6.0432 3.20041 5.73966Z",fill:"currentColor"}))}}),pUe=Yu("to",M("svg",{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},M("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},M("g",{fill:"currentColor","fill-rule":"nonzero"},M("path",{d:"M11.2654,3.20511 C10.9644,2.92049 10.4897,2.93371 10.2051,3.23464 C9.92049,3.53558 9.93371,4.01027 10.2346,4.29489 L15.4737,9.25 L2.75,9.25 C2.33579,9.25 2,9.58579 2,10.0000012 C2,10.4142 2.33579,10.75 2.75,10.75 L15.476,10.75 L10.2346,15.7073 C9.93371,15.9919 9.92049,16.4666 10.2051,16.7675 C10.4897,17.0684 10.9644,17.0817 11.2654,16.797 L17.6826,10.7276 C17.8489,10.5703 17.9489,10.3702 17.9826,10.1614 C17.994,10.1094 18,10.0554 18,10.0000012 C18,9.94241 17.9935,9.88633 17.9812,9.83246 C17.9462,9.62667 17.8467,9.42976 17.6826,9.27455 L11.2654,3.20511 Z"}))))),m0=mt({name:"BaseIconSwitchTransition",setup(r,{slots:t}){const e=of();return()=>M(pa,{name:"icon-switch-transition",appear:e.value},t)}}),YI=mt({name:"FadeInExpandTransition",props:{appear:Boolean,group:Boolean,mode:String,onLeave:Function,onAfterLeave:Function,onAfterEnter:Function,width:Boolean,reverse:Boolean},setup(r,{slots:t}){function e(s){r.width?s.style.maxWidth=`${s.offsetWidth}px`:s.style.maxHeight=`${s.offsetHeight}px`,s.offsetWidth}function n(s){r.width?s.style.maxWidth="0":s.style.maxHeight="0",s.offsetWidth;const{onLeave:l}=r;l&&l()}function i(s){r.width?s.style.maxWidth="":s.style.maxHeight="";const{onAfterLeave:l}=r;l&&l()}function a(s){if(s.style.transition="none",r.width){const l=s.offsetWidth;s.style.maxWidth="0",s.offsetWidth,s.style.transition="",s.style.maxWidth=`${l}px`}else if(r.reverse)s.style.maxHeight=`${s.offsetHeight}px`,s.offsetHeight,s.style.transition="",s.style.maxHeight="0";else{const l=s.offsetHeight;s.style.maxHeight="0",s.offsetWidth,s.style.transition="",s.style.maxHeight=`${l}px`}s.offsetWidth}function o(s){var l;r.width?s.style.maxWidth="":r.reverse||(s.style.maxHeight=""),(l=r.onAfterEnter)===null||l===void 0||l.call(r)}return()=>{const s=r.group?Yse:pa;return M(s,{name:r.width?"fade-in-width-expand-transition":"fade-in-height-expand-transition",mode:r.mode,appear:r.appear,onEnter:a,onAfterEnter:o,onBeforeLeave:e,onLeave:n,onAfterLeave:i},t)}}}),gUe=ne("base-icon",`
 height: 1em;
 width: 1em;
 line-height: 1em;
 text-align: center;
 display: inline-block;
 position: relative;
 fill: currentColor;
 transform: translateZ(0);
`,[we("svg",{height:"1em",width:"1em"})]),si=mt({name:"BaseIcon",props:{role:String,ariaLabel:String,ariaDisabled:{type:Boolean,default:void 0},ariaHidden:{type:Boolean,default:void 0},clsPrefix:{type:String,required:!0},onClick:Function,onMousedown:Function,onMouseup:Function},setup(r){Op("BaseIcon",gUe,Ht(r,"clsPrefix"))},render(){return M("i",{class:`${this.clsPrefix}-base-icon`,onClick:this.onClick,onMousedown:this.onMousedown,onMouseup:this.onMouseup,role:this.role,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,"aria-disabled":this.ariaDisabled},this.$slots)}}),mUe=ne("base-close",`
 cursor: pointer;
 color: var(--close-color);
`,[we("&:hover",{color:"var(--close-color-hover)"}),we("&:active",{color:"var(--close-color-pressed)"}),Pe("disabled",{cursor:"not-allowed!important",color:"var(--close-color-disabled)"})]),eC=mt({name:"BaseClose",props:{clsPrefix:{type:String,required:!0},disabled:{type:Boolean,default:void 0},onClick:Function},setup(r){return Op("BaseClose",mUe,Ht(r,"clsPrefix")),()=>{const{clsPrefix:t,disabled:e}=r;return M(si,{role:"button",ariaDisabled:e,ariaLabel:"close",clsPrefix:t,class:[`${t}-base-close`,e&&`${t}-base-close--disabled`],onClick:e?void 0:r.onClick},{default:()=>M(oUe,null)})}}}),lf=mt({props:{onFocus:Function,onBlur:Function},setup(r){return()=>M("div",{style:"width: 0; height: 0",tabindex:0,onFocus:r.onFocus,onBlur:r.onBlur})}});const{cubicBezierEaseInOut:yUe,transformDebounceScale:bUe}=af;function oh({originalTransform:r="",left:t=0,top:e=0,transition:n=`all .3s ${yUe} !important`}={}){return[we("&.icon-switch-transition-enter-from, &.icon-switch-transition-leave-to",{transform:r+" scale(0.75)",left:t,top:e,opacity:0}),we("&.icon-switch-transition-enter-to, &.icon-switch-transition-leave-from",{transform:`${bUe} ${r}`,left:t,top:e,opacity:1}),we("&.icon-switch-transition-enter-active, &.icon-switch-transition-leave-active",{transformOrigin:"center",position:"absolute",left:t,top:e,transition:n})]}var xUe=ne("base-loading",`
 position: relative;
 line-height: 0;
 width: 1em;
 height: 1em;
`,[xe("placeholder",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[oh({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),xe("icon",`
 height: 1em;
 width: 1em;
 `,[oh()])]);const XI="1.6s";var sh=mt({name:"BaseLoading",props:{clsPrefix:{type:String,required:!0},scale:{type:Number,default:1},radius:{type:Number,default:100},strokeWidth:{type:Number,default:28},stroke:{type:String,default:void 0},show:{type:Boolean,default:!0}},setup(r){Op("BaseLoading",xUe,Ht(r,"clsPrefix"))},render(){const{clsPrefix:r,radius:t,strokeWidth:e,stroke:n,scale:i}=this,a=t/i;return M("div",{class:`${r}-base-loading`,role:"img","aria-label":"loading"},M(m0,null,{default:()=>this.show?M("svg",{class:`${r}-base-loading__icon`,viewBox:`0 0 ${2*a} ${2*a}`,xmlns:"http://www.w3.org/2000/svg",style:{color:n}},M("g",null,M("animateTransform",{attributeName:"transform",type:"rotate",values:`0 ${a} ${a};270 ${a} ${a}`,begin:"0s",dur:XI,fill:"freeze",repeatCount:"indefinite"}),M("circle",{fill:"none",stroke:"currentColor","stroke-width":e,"stroke-linecap":"round",cx:a,cy:a,r:t-e/2,"stroke-dasharray":5.67*t,"stroke-dashoffset":18.48*t},M("animateTransform",{attributeName:"transform",type:"rotate",values:`0 ${a} ${a};135 ${a} ${a};450 ${a} ${a}`,begin:"0s",dur:XI,fill:"freeze",repeatCount:"indefinite"}),M("animate",{attributeName:"stroke-dashoffset",values:`${5.67*t};${1.42*t};${5.67*t}`,begin:"0s",dur:XI,fill:"freeze",repeatCount:"indefinite"})))):M("div",{key:"placeholder",class:`${r}-base-loading__placeholder`},this.$slots)}))}});function PX(r){return Array.isArray(r)?r:[r]}const qI={STOP:"STOP"};function DX(r,t){const e=t(r);r.children!==void 0&&e!==qI.STOP&&r.children.forEach(n=>DX(n,t))}function wUe(r,t={}){const{preserveGroup:e=!1}=t,n=[],i=e?o=>{o.isLeaf||(n.push(o.key),a(o.children))}:o=>{o.isLeaf||(o.isGroup||n.push(o.key),a(o.children))};function a(o){o.forEach(i)}return a(r),n}function SUe(r,t){const{isLeaf:e}=r;return e!==void 0?e:!t(r)}function CUe(r){return r.children}function EUe(r){return r.key}function _Ue(){return!1}function TUe(r,t){const{isLeaf:e}=r;return!(e===!1&&!Array.isArray(t(r)))}function AUe(r){return r.disabled===!0}function kUe(r,t){return r.isLeaf===!1&&!Array.isArray(t(r))}function KI(r){var t;return r==null?[]:Array.isArray(r)?r:(t=r.checkedKeys)!==null&&t!==void 0?t:[]}function ZI(r){var t;return r==null||Array.isArray(r)?[]:(t=r.indeterminateKeys)!==null&&t!==void 0?t:[]}function MUe(r,t){const e=new Set(r);return t.forEach(n=>{e.has(n)||e.add(n)}),Array.from(e)}function IUe(r,t){const e=new Set(r);return t.forEach(n=>{e.has(n)&&e.delete(n)}),Array.from(e)}function PUe(r){return(r==null?void 0:r.type)==="group"}function RX(r){const t=new Map;return r.forEach((e,n)=>{t.set(e.key,n)}),e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:null}}class DUe extends Error{constructor(){super();this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function RUe(r,t,e){return tC(t.concat(r),e)}function OUe(r,t){const e=new Set;return r.forEach(n=>{const i=t.treeNodeMap.get(n);if(i!==void 0){let a=i.parent;for(;a!==null&&!(a.disabled||e.has(a.key));)e.add(a.key),a=a.parent}}),e}function LUe(r,t,e){const n=tC(t,e),i=tC(r,e,!0),a=OUe(r,e),o=[];return n.forEach(s=>{(i.has(s)||a.has(s))&&o.push(s)}),o.forEach(s=>n.delete(s)),n}function QI(r,t){const{checkedKeys:e,keysToCheck:n,keysToUncheck:i,indeterminateKeys:a,cascade:o,leafOnly:s,checkStrategy:l}=r;if(!o)return n!==void 0?{checkedKeys:MUe(e,n),indeterminateKeys:Array.from(a)}:i!==void 0?{checkedKeys:IUe(e,i),indeterminateKeys:Array.from(a)}:{checkedKeys:Array.from(e),indeterminateKeys:Array.from(a)};const{levelTreeNodeMap:u}=t;let c;i!==void 0?c=LUe(i,e,t):n!==void 0?c=RUe(n,e,t):c=tC(e,t);const f=l==="parent",d=l==="child"||s,h=c,v=new Set,p=Math.max.apply(null,Array.from(u.keys()));for(let g=p;g>=0;g-=1){const m=g===0,y=u.get(g);for(const b of y){if(b.isLeaf)continue;const{key:x,shallowLoaded:w}=b;if(d&&w&&b.children.forEach(T=>{!T.disabled&&!T.isLeaf&&T.shallowLoaded&&h.has(T.key)&&h.delete(T.key)}),b.disabled||!w)continue;let S=!0,C=!1,_=!0;for(const T of b.children){const E=T.key;if(!T.disabled){if(_&&(_=!1),h.has(E))C=!0;else if(v.has(E)){C=!0,S=!1;break}else if(S=!1,C)break}}S&&!_?(f&&b.children.forEach(T=>{!T.disabled&&h.has(T.key)&&h.delete(T.key)}),h.add(x)):C&&v.add(x),m&&d&&h.has(x)&&h.delete(x)}}return{checkedKeys:Array.from(h),indeterminateKeys:Array.from(v)}}function tC(r,t,e=!1){const{treeNodeMap:n,getChildren:i}=t,a=new Set,o=new Set(r);return r.forEach(s=>{const l=n.get(s);l!==void 0&&DX(l,u=>{if(u.disabled)return qI.STOP;const{key:c}=u;if(!a.has(c)&&(a.add(c),o.add(c),kUe(u.rawNode,i))){if(e)return qI.STOP;throw new DUe}})}),o}function FUe(r,{includeGroup:t=!1,includeSelf:e=!0},n){var i;const a=n.treeNodeMap;let o=r==null?null:(i=a.get(r))!==null&&i!==void 0?i:null;const s={keyPath:[],treeNodePath:[],treeNode:o};if(o==null?void 0:o.ignored)return s.treeNode=null,s;for(;o;)!o.ignored&&(t||!o.isGroup)&&s.treeNodePath.push(o),o=o.parent;return s.treeNodePath.reverse(),e||s.treeNodePath.pop(),s.keyPath=s.treeNodePath.map(l=>l.key),s}function NUe(r){if(r.length===0)return null;const t=r[0];return t.isGroup||t.ignored||t.disabled?t.getNext():t}function BUe(r,t){const e=r.siblings,n=e.length,{index:i}=r;return t?e[(i+1)%n]:i===e.length-1?null:e[i+1]}function OX(r,t,{loop:e=!1,includeDisabled:n=!1}={}){const i=t==="prev"?$Ue:BUe,a={reverse:t==="prev"};let o=!1,s=null;function l(u){if(u!==null){if(u===r){if(!o)o=!0;else if(!r.disabled&&!r.isGroup){s=r;return}}else if((!u.disabled||n)&&!u.ignored&&!u.isGroup){s=u;return}if(u.isGroup){const c=JI(u,a);c!==null?s=c:l(i(u,e))}else{const c=i(u,!1);if(c!==null)l(c);else{const f=zUe(u);(f==null?void 0:f.isGroup)?l(i(f,e)):e&&l(i(u,!0))}}}}return l(r),s}function $Ue(r,t){const e=r.siblings,n=e.length,{index:i}=r;return t?e[(i-1+n)%n]:i===0?null:e[i-1]}function zUe(r){return r.parent}function JI(r,t={}){const{reverse:e=!1}=t,{children:n}=r;if(n){const{length:i}=n,a=e?i-1:0,o=e?-1:i,s=e?-1:1;for(let l=a;l!==o;l+=s){const u=n[l];if(!u.disabled&&!u.ignored)if(u.isGroup){const c=JI(u,t);if(c!==null)return c}else return u}}return null}const GUe={getChild(){return this.ignored?null:JI(this)},getParent(){const{parent:r}=this;return(r==null?void 0:r.isGroup)?r.getParent():r},getNext(r={}){return OX(this,"next",r)},getPrev(r={}){return OX(this,"prev",r)}};function eP(r,t){const e=t?new Set(t):void 0,n=[];function i(a){a.forEach(o=>{n.push(o),!(o.isLeaf||!o.children||o.ignored)&&(o.isGroup||e===void 0||e.has(o.key))&&i(o.children)})}return i(r),n}function UUe(r,t){const e=r.key;for(;t;){if(t.key===e)return!0;t=t.parent}return!1}function LX(r,t,e,n,i,a=null,o=0){const s=[];return r.forEach((l,u)=>{var c;const f=Object.create(n);if(f.rawNode=l,f.siblings=s,f.level=o,f.index=u,f.isFirstChild=u===0,f.isLastChild=u+1===r.length,f.parent=a,!f.ignored){const d=i(l);Array.isArray(d)&&(f.children=LX(d,t,e,n,i,f,o+1))}s.push(f),t.set(f.key,f),e.has(o)||e.set(o,[]),(c=e.get(o))===null||c===void 0||c.push(f)}),s}function lh(r,t={}){var e;const n=new Map,i=new Map,{getDisabled:a=AUe,getIgnored:o=_Ue,getIsGroup:s=PUe,getKey:l=EUe}=t,u=(e=t.getChildren)!==null&&e!==void 0?e:CUe,c=t.ignoreEmptyChildren?x=>{const w=u(x);return Array.isArray(w)?w.length?w:null:w}:u,f=Object.assign({get key(){return l(this.rawNode)},get disabled(){return a(this.rawNode)},get isGroup(){return s(this.rawNode)},get isLeaf(){return SUe(this.rawNode,c)},get shallowLoaded(){return TUe(this.rawNode,c)},get ignored(){return o(this.rawNode)},contains(x){return UUe(this,x)}},GUe),d=LX(r,n,i,f,c);function h(x){if(x==null)return null;const w=n.get(x);return w&&!w.isGroup&&!w.ignored?w:null}function v(x){if(x==null)return null;const w=n.get(x);return w&&!w.ignored?w:null}function p(x,w){const S=v(x);return S?S.getPrev(w):null}function g(x,w){const S=v(x);return S?S.getNext(w):null}function m(x){const w=v(x);return w?w.getParent():null}function y(x){const w=v(x);return w?w.getChild():null}const b={treeNodes:d,treeNodeMap:n,levelTreeNodeMap:i,maxLevel:Math.max(...i.keys()),getChildren:c,getFlattenedNodes(x){return eP(d,x)},getNode:h,getPrev:p,getNext:g,getParent:m,getChild:y,getFirstAvailableNode(){return NUe(d)},getPath(x,w={}){return FUe(x,w,b)},getCheckedKeys(x,w={}){const{cascade:S=!0,leafOnly:C=!1,checkStrategy:_="all"}=w;return QI({checkedKeys:KI(x),indeterminateKeys:ZI(x),cascade:S,leafOnly:C,checkStrategy:_},b)},check(x,w,S={}){const{cascade:C=!0,leafOnly:_=!1,checkStrategy:T="all"}=S;return QI({checkedKeys:KI(w),indeterminateKeys:ZI(w),keysToCheck:x==null?[]:PX(x),cascade:C,leafOnly:_,checkStrategy:T},b)},uncheck(x,w,S={}){const{cascade:C=!0,leafOnly:_=!1,checkStrategy:T="all"}=S;return QI({checkedKeys:KI(w),indeterminateKeys:ZI(w),keysToUncheck:x==null?[]:PX(x),cascade:C,leafOnly:_,checkStrategy:T},b)},getNonLeafKeys(x={}){return wUe(d,x)}};return b}function tP(r,t="default"){const e=r[t];if(e===void 0)throw new Error(`[vueuc/binder]: slot[${t}] is empty.`);return e()}function FX(r,t="default"){const e=r[t];if(e===void 0)throw new Error(`[vueuc/binder]: slot[${t}] is empty.`);const n=e();if(n.length===1)return n[0];throw new Error(`[vueuc/binder]: slot[${t}] should have exactly one child.`)}let uf=null;function NX(){if(uf===null&&(uf=document.getElementById("v-binder-view-measurer"),uf===null)){uf=document.createElement("div"),uf.id="v-binder-view-measurer";const{style:r}=uf;r.position="fixed",r.left="0",r.right="0",r.top="0",r.bottom="0",r.pointerEvents="none",r.visibility="hidden",document.body.appendChild(uf)}return uf.getBoundingClientRect()}function VUe(r,t){const e=NX();return{top:t,left:r,height:0,width:0,right:e.width-r,bottom:e.height-t}}function rP(r){const t=r.getBoundingClientRect(),e=NX();return{left:t.left-e.left,top:t.top-e.top,bottom:e.height+e.top-t.bottom,right:e.width+e.left-t.right,width:t.width,height:t.height}}function HUe(r){return r.nodeType===9?null:r.parentNode}function BX(r){if(r===null)return null;const t=HUe(r);if(t===null)return null;if(t.nodeType===9)return document;if(t.nodeType===1){const{overflow:e,overflowX:n,overflowY:i}=getComputedStyle(t);if(/(auto|scroll|overlay)/.test(e+i+n))return t}return BX(t)}const WUe=mt({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(r){var t;Qr("VBinder",(t=fv())===null||t===void 0?void 0:t.proxy);const e=nr("VBinder",null),n=ke(null),i=m=>{n.value=m,e&&r.syncTargetWithParent&&e.setTargetRef(m)};let a=[];const o=()=>{let m=n.value;for(;m=BX(m),m!==null;)a.push(m);for(const y of a)zi("scroll",y,f,!0)},s=()=>{for(const m of a)Ei("scroll",m,f,!0);a=[]},l=new Set,u=m=>{l.size===0&&o(),l.has(m)||l.add(m)},c=m=>{l.has(m)&&l.delete(m),l.size===0&&s()},f=()=>{NS(d)},d=()=>{l.forEach(m=>m())},h=new Set,v=m=>{h.size===0&&zi("resize",window,g),h.has(m)||h.add(m)},p=m=>{h.has(m)&&h.delete(m),h.size===0&&Ei("resize",window,g)},g=()=>{h.forEach(m=>m())};return os(()=>{Ei("resize",window,g),s()}),{targetRef:n,setTargetRef:i,addScrollListener:u,removeScrollListener:c,addResizeListener:v,removeResizeListener:p}},render(){return tP(this.$slots)}});var Lp=WUe,Fp=mt({name:"Target",setup(){const{setTargetRef:r,syncTarget:t}=nr("VBinder");return{syncTarget:t,setTargetDirective:{mounted:r,updated:r}}},render(){const{syncTarget:r,setTargetDirective:t}=this;return r?Cl(FX(this.$slots),[[t]]):FX(this.$slots)}});const Np="@@mmoContext",jUe={mounted(r,{value:t}){r[Np]={handler:void 0},typeof t=="function"&&(r[Np].handler=t,zi("mousemoveoutside",r,t))},updated(r,{value:t}){const e=r[Np];typeof t=="function"?e.handler?e.handler!==t&&(Ei("mousemoveoutside",r,e.handler),e.handler=t,zi("mousemoveoutside",r,t)):(r[Np].handler=t,zi("mousemoveoutside",r,t)):e.handler&&(Ei("mousemoveoutside",r,e.handler),e.handler=void 0)},unmounted(r){const{handler:t}=r[Np];t&&Ei("mousemoveoutside",r,t),r[Np].handler=void 0}};var YUe=jUe;const Bp="@@coContext",XUe={mounted(r,{value:t}){r[Bp]={handler:void 0},typeof t=="function"&&(r[Bp].handler=t,zi("clickoutside",r,t))},updated(r,{value:t}){const e=r[Bp];typeof t=="function"?e.handler?e.handler!==t&&(Ei("clickoutside",r,e.handler),e.handler=t,zi("clickoutside",r,t)):(r[Bp].handler=t,zi("clickoutside",r,t)):e.handler&&(Ei("clickoutside",r,e.handler),e.handler=void 0)},unmounted(r){const{handler:t}=r[Bp];t&&Ei("clickoutside",r,t),r[Bp].handler=void 0}};var cf=XUe;function qUe(r,t){console.error(`[vdirs/${r}]: ${t}`)}class KUe{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(t,e){const{elementZIndex:n}=this;if(e!==void 0){t.style.zIndex=`${e}`,n.delete(t);return}const{nextZIndex:i}=this;n.has(t)&&n.get(t)+1===this.nextZIndex||(t.style.zIndex=`${i}`,n.set(t,i),this.nextZIndex=i+1,this.squashState())}unregister(t){const{elementZIndex:e}=this;e.has(t)?e.delete(t):qUe("vdirs/z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:t}=this;t||(this.nextZIndex=2e3),this.nextZIndex-t>2500&&this.rearrange()}rearrange(){const t=Array.from(this.elementZIndex.entries());t.sort((e,n)=>e[1]-n[1]),this.nextZIndex=2e3,t.forEach(e=>{const n=e[0],i=this.nextZIndex++;`${i}`!==n.style.zIndex&&(n.style.zIndex=`${i}`)})}}var nP=new KUe;const iP="@@ziContext",ZUe={mounted(r,t){const{value:e={}}=t,{zIndex:n,enabled:i}=e;nP.ensureZIndex(r,n),r[iP]={enabled:i}},updated(r,t){const{value:e={}}=t,{zIndex:n,enabled:i}=e,a=r[iP].enabled;i&&!a&&nP.ensureZIndex(r,n),r[iP].enabled=i},unmounted(r){nP.unregister(r)}};var $X=ZUe;function zX(r,t){console.error(`[vueuc/${r}]: ${t}`)}const{c:ff}=iX();function GX(r){return r&-r}class QUe{constructor(t,e){this.l=t,this.min=e;const n=new Array(t+1);for(let i=0;i<t+1;++i)n[i]=0;this.ft=n}add(t,e){if(e===0)return;const{l:n,ft:i}=this;for(t+=1;t<=n;)i[t]+=e,t+=GX(t)}get(t){return this.sum(t+1)-this.sum(t)}sum(t){if(t===0)return 0;const{ft:e,min:n,l:i}=this;if(t===void 0&&(t=i),t>i)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let a=t*n;for(;t>0;)a+=e[t],t-=GX(t);return a}getBound(t){let e=0,n=this.l;for(;n>e;){const i=Math.floor((e+n)/2),a=this.sum(i);if(a>t){n=i;continue}else if(a<t){if(e===i)return this.sum(e+1)<=t?e+1:i;e=i}else return i}return e}}var UX=mt({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(r){return{showTeleport:QGe(Ht(r,"show")),mergedTo:Q(()=>{const{to:t}=r;return t!=null?t:"body"})}},render(){return this.showTeleport?this.disabled?tP(this.$slots):M(vN,{disabled:this.disabled,to:this.mergedTo},tP(this.$slots)):null}});const rC={top:"bottom",bottom:"top",left:"right",right:"left"},VX={start:"end",center:"center",end:"start"},aP={top:"height",bottom:"height",left:"width",right:"width"},JUe={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},eVe={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},tVe={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},HX={top:"end",bottom:"start",left:"end",right:"start"};function rVe(r,t,e,n,i,a){if(!i||a)return{placement:r,top:0,left:0};const[o,s]=r.split("-");let l=s!=null?s:"center",u=0,c=0;if(l!=="center"){const d=tVe[r],h=rC[d],v=aP[d];if(e[v]>t[v]){if(t[d]+t[v]<e[v]){const p=(e[v]-t[v])/2;t[d]<p||t[h]<p?t[d]<t[h]&&(l=VX[s]):l="center"}}else e[v]<t[v]&&t[h]<0&&t[d]>t[h]&&(l=VX[s])}else{const d=o==="bottom"||o==="top"?"left":"top",h=rC[d],v=aP[d],p=(e[v]-t[v])/2;(t[d]<p||t[h]<p)&&(t[d]>t[h]?l=HX[d]:l=HX[h])}let f=o;return t[o]<e[aP[o]]&&t[o]<t[rC[o]]&&(f=rC[o]),{placement:l!=="center"?`${f}-${l}`:f,left:u,top:c}}function nVe(r,t){return t?eVe[r]:JUe[r]}function iVe(r,t,e,n,i,a){if(a)switch(r){case"bottom-start":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left)}px`,transform:""};case"top-end":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left)}px`,transform:""};case"left-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(e.top-t.top+e.height/2)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(e.top-t.top+e.height/2)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(r){case"bottom-start":return{top:`${Math.round(e.top-t.top+e.height+n)}px`,left:`${Math.round(e.left-t.left+i)}px`,transform:""};case"bottom-end":return{top:`${Math.round(e.top-t.top+e.height+n)}px`,left:`${Math.round(e.left-t.left+e.width+i)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(e.top-t.top+n)}px`,left:`${Math.round(e.left-t.left+i)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(e.top-t.top+n)}px`,left:`${Math.round(e.left-t.left+e.width+i)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(e.top-t.top+n)}px`,left:`${Math.round(e.left-t.left+e.width+i)}px`,transform:""};case"right-end":return{top:`${Math.round(e.top-t.top+e.height+n)}px`,left:`${Math.round(e.left-t.left+e.width+i)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(e.top-t.top+n)}px`,left:`${Math.round(e.left-t.left+i)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(e.top-t.top+e.height+n)}px`,left:`${Math.round(e.left-t.left+i)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(e.top-t.top+n)}px`,left:`${Math.round(e.left-t.left+e.width/2+i)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(e.top-t.top+e.height/2+n)}px`,left:`${Math.round(e.left-t.left+e.width+i)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(e.top-t.top+e.height/2+n)}px`,left:`${Math.round(e.left-t.left+i)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(e.top-t.top+e.height+n)}px`,left:`${Math.round(e.left-t.left+e.width/2+i)}px`,transform:"translateX(-50%)"}}}const aVe=ff([ff(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),ff(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[ff("> *",{pointerEvents:"all"})])]);var $p=mt({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},flipLevel:{type:Number,default:1},x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(r){const t=nr("VBinder"),e=On(()=>r.enabled!==void 0?r.enabled:r.show),n=ke(null),i=ke(null),a=()=>{const{syncTrigger:d}=r;d.includes("scroll")&&t.addScrollListener(l),d.includes("resize")&&t.addResizeListener(l)},o=()=>{t.removeScrollListener(l),t.removeResizeListener(l)};Lo(()=>{e.value&&(l(),a())});const s=Pp();aVe.mount({id:"vueuc/binder",head:!0,ssr:s}),os(()=>{o()}),e8e(()=>{e.value&&l()});const l=()=>{if(!e.value)return;const d=n.value;if(d===null)return;const h=t.targetRef,{x:v,y:p,overlap:g}=r,m=v!==void 0&&p!==void 0?VUe(v,p):rP(h),{width:y,minWidth:b,placement:x,flipLevel:w,flip:S}=r;d.setAttribute("v-placement",x),g?d.setAttribute("v-overlap",""):d.removeAttribute("v-overlap");const{style:C}=d;y==="target"?C.width=`${m.width}px`:y!==void 0?C.width=y:C.width="",b==="target"?C.minWidth=`${m.width}px`:b!==void 0?C.minWidth=b:C.minWidth="";const _=rP(d),T=rP(i.value),{left:E,top:k,placement:I}=rVe(x,m,_,w,S,g),P=nVe(I,g),{left:F,top:$,transform:R}=iVe(I,T,m,k,E,g);d.setAttribute("v-placement",I),d.style.transform=`translateX(${F}) translateY(${$}) ${R}`,d.style.transformOrigin=P};nn(e,d=>{d?(a(),u()):o()});const u=()=>{oa().then(l).catch(d=>console.error(d))};["placement","x","y","flipLevel","flip","width","overlap","minWidth"].forEach(d=>{nn(Ht(r,d),l)}),["teleportDisabled"].forEach(d=>{nn(Ht(r,d),u)}),nn(Ht(r,"syncTrigger"),d=>{d.includes("resize")?t.addResizeListener(l):t.removeResizeListener(l),d.includes("scroll")?t.addScrollListener(l):t.removeScrollListener(l)});const c=of(),f=On(()=>{const{to:d}=r;if(d!==void 0)return d;!c.value});return{VBinder:t,mergedEnabled:e,offsetContainerRef:i,followerRef:n,mergedTo:f,syncPosition:l}},render(){return M(UX,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{const r=M("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[M("div",{class:"v-binder-follower-content",ref:"followerRef"},this.$slots)]);return this.zindexable?Cl(r,[[$X,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):r}})}}),WX=function(){if(typeof Map!="undefined")return Map;function r(t,e){var n=-1;return t.some(function(i,a){return i[0]===e?(n=a,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(e){var n=r(this.__entries__,e),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(e,n){var i=r(this.__entries__,e);~i?this.__entries__[i][1]=n:this.__entries__.push([e,n])},t.prototype.delete=function(e){var n=this.__entries__,i=r(n,e);~i&&n.splice(i,1)},t.prototype.has=function(e){return!!~r(this.__entries__,e)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,n){n===void 0&&(n=null);for(var i=0,a=this.__entries__;i<a.length;i++){var o=a[i];e.call(n,o[1],o[0])}},t}()}(),oP=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,nC=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),oVe=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(nC):function(r){return setTimeout(function(){return r(Date.now())},1e3/60)}}(),sVe=2;function lVe(r,t){var e=!1,n=!1,i=0;function a(){e&&(e=!1,r()),n&&s()}function o(){oVe(a)}function s(){var l=Date.now();if(e){if(l-i<sVe)return;n=!0}else e=!0,n=!1,setTimeout(o,t);i=l}return s}var uVe=20,cVe=["top","right","bottom","left","width","height","size","weight"],fVe=typeof MutationObserver!="undefined",dVe=function(){function r(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=lVe(this.refresh.bind(this),uVe)}return r.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},r.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},r.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},r.prototype.updateObservers_=function(){var t=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return t.forEach(function(e){return e.broadcastActive()}),t.length>0},r.prototype.connect_=function(){!oP||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),fVe?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},r.prototype.disconnect_=function(){!oP||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},r.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=e===void 0?"":e,i=cVe.some(function(a){return!!~n.indexOf(a)});i&&this.refresh()},r.getInstance=function(){return this.instance_||(this.instance_=new r),this.instance_},r.instance_=null,r}(),jX=function(r,t){for(var e=0,n=Object.keys(t);e<n.length;e++){var i=n[e];Object.defineProperty(r,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return r},zp=function(r){var t=r&&r.ownerDocument&&r.ownerDocument.defaultView;return t||nC},YX=aC(0,0,0,0);function iC(r){return parseFloat(r)||0}function XX(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return t.reduce(function(n,i){var a=r["border-"+i+"-width"];return n+iC(a)},0)}function hVe(r){for(var t=["top","right","bottom","left"],e={},n=0,i=t;n<i.length;n++){var a=i[n],o=r["padding-"+a];e[a]=iC(o)}return e}function vVe(r){var t=r.getBBox();return aC(0,0,t.width,t.height)}function pVe(r){var t=r.clientWidth,e=r.clientHeight;if(!t&&!e)return YX;var n=zp(r).getComputedStyle(r),i=hVe(n),a=i.left+i.right,o=i.top+i.bottom,s=iC(n.width),l=iC(n.height);if(n.boxSizing==="border-box"&&(Math.round(s+a)!==t&&(s-=XX(n,"left","right")+a),Math.round(l+o)!==e&&(l-=XX(n,"top","bottom")+o)),!mVe(r)){var u=Math.round(s+a)-t,c=Math.round(l+o)-e;Math.abs(u)!==1&&(s-=u),Math.abs(c)!==1&&(l-=c)}return aC(i.left,i.top,s,l)}var gVe=function(){return typeof SVGGraphicsElement!="undefined"?function(r){return r instanceof zp(r).SVGGraphicsElement}:function(r){return r instanceof zp(r).SVGElement&&typeof r.getBBox=="function"}}();function mVe(r){return r===zp(r).document.documentElement}function yVe(r){return oP?gVe(r)?vVe(r):pVe(r):YX}function bVe(r){var t=r.x,e=r.y,n=r.width,i=r.height,a=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,o=Object.create(a.prototype);return jX(o,{x:t,y:e,width:n,height:i,top:e,right:t+n,bottom:i+e,left:t}),o}function aC(r,t,e,n){return{x:r,y:t,width:e,height:n}}var xVe=function(){function r(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=aC(0,0,0,0),this.target=t}return r.prototype.isActive=function(){var t=yVe(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},r.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},r}(),wVe=function(){function r(t,e){var n=bVe(e);jX(this,{target:t,contentRect:n})}return r}(),SVe=function(){function r(t,e,n){if(this.activeObservations_=[],this.observations_=new WX,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return r.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof zp(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new xVe(t)),this.controller_.addObserver(this),this.controller_.refresh())}},r.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof zp(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;!e.has(t)||(e.delete(t),e.size||this.controller_.removeObserver(this))}},r.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},r.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},r.prototype.broadcastActive=function(){if(!!this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(n){return new wVe(n.target,n.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},r.prototype.clearActive=function(){this.activeObservations_.splice(0)},r.prototype.hasActive=function(){return this.activeObservations_.length>0},r}(),qX=typeof WeakMap!="undefined"?new WeakMap:new WX,KX=function(){function r(t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var e=dVe.getInstance(),n=new SVe(t,e,this);qX.set(this,n)}return r}();["observe","unobserve","disconnect"].forEach(function(r){KX.prototype[r]=function(){var t;return(t=qX.get(this))[r].apply(t,arguments)}});var CVe=function(){return typeof nC.ResizeObserver!="undefined"?nC.ResizeObserver:KX}();class EVe{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new CVe(this.handleResize),this.elHandlersMap=new Map}handleResize(t){for(const e of t){const n=this.elHandlersMap.get(e.target);n!==void 0&&n(e)}}registerHandler(t,e){this.elHandlersMap.set(t,e),this.observer.observe(t)}unregisterHandler(t){!this.elHandlersMap.has(t)||(this.elHandlersMap.delete(t),this.observer.unobserve(t))}}var ZX=new EVe,y0=mt({name:"ResizeObserver",props:{onResize:Function},setup(r){return{registered:!1,handleResize(t){const{onResize:e}=r;e!==void 0&&e(t)}}},mounted(){const r=this.$el;r===void 0?zX("resize-observer","$el does not exist."):r.nextElementSibling!==r.nextSibling?zX("resize-observer","$el can not be observed (it may be a text node)."):r.nextElementSibling!==null&&(ZX.registerHandler(r.nextElementSibling,this.handleResize),this.registered=!0)},beforeUnmount(){this.registered&&ZX.unregisterHandler(this.$el.nextElementSibling)},render(){return Jr(this.$slots,"default")}});const _Ve=ff(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[ff("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[ff("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]);var oC=mt({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(r){const t=Pp();_Ve.mount({id:"vueuc/virtual-list",head:!0,ssr:t}),Lo(()=>{const{defaultScrollIndex:x,defaultScrollKey:w}=r;x!=null?f({index:x}):w!=null&&f({key:w})});const e=Q(()=>{const x=new Map,{keyField:w}=r;return r.items.forEach((S,C)=>{x.set(S[w],C)}),x}),n=ke(null),i=ke(void 0),a=new Map,o=Q(()=>{const{items:x,itemSize:w,keyField:S}=r,C=new QUe(x.length,w);return x.forEach((_,T)=>{const E=_[S],k=a.get(E);k!==void 0&&C.add(T,k)}),C}),s=ke(0),l=ke(0),u=On(()=>Math.max(o.value.getBound(l.value-Ho(r.paddingTop))-1,0)),c=Q(()=>{const{value:x}=i;if(x===void 0)return[];const{items:w,itemSize:S}=r,C=u.value,_=Math.min(C+Math.ceil(x/S+1),w.length-1),T=[];for(let E=C;E<=_;++E)T.push(w[E]);return T}),f=x=>{const{left:w,top:S,index:C,key:_,position:T,behavior:E,debounce:k=!0}=x;if(w!==void 0||S!==void 0)h(w,S,E);else if(C!==void 0)d(C,E,k);else if(_!==void 0){const I=e.value.get(_);I!==void 0&&d(I,E,k)}else T==="bottom"?h(0,Number.MAX_SAFE_INTEGER,E):T==="top"&&h(0,0,E)};function d(x,w,S){const{value:C}=o,_=C.sum(x)+Ho(r.paddingTop);if(!S)n.value.scrollTo({left:0,top:_,behavior:w});else{const{scrollTop:T,offsetHeight:E}=n.value;if(_>T){const k=C.get(x);_+k<=T+E||n.value.scrollTo({left:0,top:_+k-E,behavior:w})}else n.value.scrollTo({left:0,top:_,behavior:w})}m=x}function h(x,w,S){n.value.scrollTo({left:x,top:w,behavior:S})}function v(x,w){var S;if(r.ignoreItemResize)return;const{value:C}=o,_=e.value.get(x),T=w.target.offsetHeight;T-r.itemSize===0?a.delete(x):a.set(x,T-r.itemSize);const k=T-C.get(_);k!==0&&(y!==void 0&&_<=y&&((S=n.value)===null||S===void 0||S.scrollBy(0,k)),C.add(_,k),s.value++)}function p(x){NS(b);const{onScroll:w}=r;w!==void 0&&w(x)}function g(x){i.value=x.contentRect.height;const{onResize:w}=r;w!==void 0&&w(x)}let m,y;function b(){const{value:x}=n;x!=null&&(y=m!=null?m:u.value,m=void 0,l.value=n.value.scrollTop)}return{listHeight:i,listStyle:{overflow:"auto"},keyToIndex:e,itemsStyle:Q(()=>{const{itemResizable:x}=r,w=to(o.value.sum());return s.value,[r.itemsStyle,{boxSizing:"content-box",height:x?"":w,minHeight:x?w:"",paddingTop:to(r.paddingTop),paddingBottom:to(r.paddingBottom)}]}),visibleItemsStyle:Q(()=>(s.value,{transform:`translate3d(0, ${to(o.value.sum(u.value))}, 0)`})),viewportItems:c,listElRef:n,itemsElRef:ke(null),scrollTo:f,handleListResize:g,handleListScroll:p,handleItemResize:v}},render(){const{itemResizable:r,keyField:t,keyToIndex:e,visibleItemsTag:n}=this;return M(y0,{onResize:this.handleListResize},{default:()=>{var i,a;return M("div",Tl(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.onWheel,ref:"listElRef"}),[this.items.length!==0?M("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[M(n,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(o=>{const s=o[t],l=e.get(s),u=this.$slots.default({item:o,index:l})[0];return r?M(y0,{key:s,onResize:c=>this.handleItemResize(s,c)},{default:()=>u}):(u.key=s,u)})})]):(a=(i=this.$slots).empty)===null||a===void 0?void 0:a.call(i)])}})}});const uh="v-hidden",TVe=ff("[v-hidden]",{display:"none!important"});var QX=mt({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateOverflow:Function},setup(r,{slots:t}){const e=ke(null),n=ke(null);function i(){const{value:o}=e,{getCounter:s,getTail:l}=r;let u;if(s!==void 0?u=s():u=n.value,!o||!u)return;u.hasAttribute(uh)&&u.removeAttribute(uh);const{children:c}=o,f=o.offsetWidth,d=[],h=t.tail?l==null?void 0:l():null;let v=h?h.offsetWidth:0,p=!1;const g=o.children.length-(t.tail?1:0);for(let y=0;y<g-1;++y){if(y<0)continue;const b=c[y];if(p){b.hasAttribute(uh)||b.setAttribute(uh,"");continue}else b.hasAttribute(uh)&&b.removeAttribute(uh);const x=b.offsetWidth;if(v+=x,d[y]=x,v>f){const{updateCounter:w}=r;for(let S=y;S>=0;--S){const C=g-1-S;w!==void 0?w(C):u.textContent=`${C}`;const _=u.offsetWidth;if(v-=d[S],v+_<=f||S===0){p=!0,y=S-1,h&&(y===-1?(h.style.maxWidth=`${f-_}px`,h.style.boxSizing="border-box"):h.style.maxWidth="");break}}}}const{onUpdateOverflow:m}=r;p?m!==void 0&&m(!0):(m!==void 0&&m(!1),u.setAttribute(uh,""))}const a=Pp();return TVe.mount({id:"vueuc/overflow",head:!0,ssr:a}),Lo(i),{selfRef:e,counterRef:n,sync:i}},render(){const{$slots:r}=this;return oa(this.sync),M("div",{class:"v-overflow",ref:"selfRef"},[Jr(r,"default"),r.counter?r.counter():M("span",{style:{display:"inline-block"},ref:"counterRef"}),r.tail?r.tail():null])}});const Mr={neutralBase:"#FFF",neutralInvertBase:"#000",neutralTextBase:"#000",neutralPopover:"#fff",neutralCard:"#fff",neutralModal:"#fff",neutralBody:"#fff",alpha1:"0.82",alpha2:"0.72",alpha3:"0.38",alpha4:"0.24",alpha5:"0.18",alphaClose:"0.52",alphaDisabled:"0.5",alphaDisabledInput:"0.02",alphaPending:"0.05",alphaTablePending:"0.02",alphaPressed:"0.07",alphaAvatar:"0.2",alphaRail:"0.14",alphaProgressRail:".08",alphaBorder:"0.12",alphaDivider:"0.06",alphaInput:"0",alphaAction:"0.02",alphaTab:"0.04",alphaScrollbar:"0.25",alphaScrollbarHover:"0.4",alphaCode:"0.05",alphaTag:"0.02",primaryHover:"#36ad6a",primaryDefault:"#18a058",primaryActive:"#0c7a43",primarySuppl:"#36ad6a",infoHover:"#4098fc",infoDefault:"#2080f0",infoActive:"#1060c9",infoSuppl:"#4098fc",errorHover:"#de576d",errorDefault:"#d03050",errorActive:"#ab1f3f",errorSuppl:"#de576d",warningHover:"#fcb040",warningDefault:"#f0a020",warningActive:"#c97c10",warningSuppl:"#fcb040",successHover:"#36ad6a",successDefault:"#18a058",successActive:"#0c7a43",successSuppl:"#36ad6a"},AVe=Qd(Mr.neutralBase),JX=Qd(Mr.neutralInvertBase),kVe="rgba("+JX.slice(0,3).join(", ")+", ";function eq(r){return kVe+String(r)+")"}function no(r){const t=Array.from(JX);return t[3]=Number(r),Si(AVe,t)}const MVe=Object.assign(Object.assign({name:"common"},af),{baseColor:Mr.neutralBase,primaryColor:Mr.primaryDefault,primaryColorHover:Mr.primaryHover,primaryColorPressed:Mr.primaryActive,primaryColorSuppl:Mr.primarySuppl,infoColor:Mr.infoDefault,infoColorHover:Mr.infoHover,infoColorPressed:Mr.infoActive,infoColorSuppl:Mr.infoSuppl,successColor:Mr.successDefault,successColorHover:Mr.successHover,successColorPressed:Mr.successActive,successColorSuppl:Mr.successSuppl,warningColor:Mr.warningDefault,warningColorHover:Mr.warningHover,warningColorPressed:Mr.warningActive,warningColorSuppl:Mr.warningSuppl,errorColor:Mr.errorDefault,errorColorHover:Mr.errorHover,errorColorPressed:Mr.errorActive,errorColorSuppl:Mr.errorSuppl,textColorBase:Mr.neutralTextBase,textColor1:"rgb(31, 34, 37)",textColor2:"rgb(51, 54, 57)",textColor3:"rgb(118, 124, 130)",textColorDisabled:no(Mr.alpha4),placeholderColor:no(Mr.alpha4),placeholderColorDisabled:no(Mr.alpha5),iconColor:no(Mr.alpha4),iconColorHover:BS(no(Mr.alpha4),{lightness:.75}),iconColorPressed:BS(no(Mr.alpha4),{lightness:.9}),iconColorDisabled:no(Mr.alpha5),opacity1:Mr.alpha1,opacity2:Mr.alpha2,opacity3:Mr.alpha3,opacity4:Mr.alpha4,opacity5:Mr.alpha5,dividerColor:"rgb(239, 239, 245)",borderColor:"rgb(224, 224, 230)",closeColor:no(Number(Mr.alphaClose)),closeColorHover:no(Number(Mr.alphaClose)*1.25),closeColorPressed:no(Number(Mr.alphaClose)*.8),closeColorDisabled:no(Mr.alpha4),clearColor:no(Mr.alpha4),clearColorHover:BS(no(Mr.alpha4),{lightness:.75}),clearColorPressed:BS(no(Mr.alpha4),{lightness:.9}),scrollbarColor:eq(Mr.alphaScrollbar),scrollbarColorHover:eq(Mr.alphaScrollbarHover),scrollbarWidth:"5px",scrollbarHeight:"5px",scrollbarBorderRadius:"5px",progressRailColor:no(Mr.alphaProgressRail),railColor:"rgb(219, 219, 223)",popoverColor:Mr.neutralPopover,tableColor:Mr.neutralCard,cardColor:Mr.neutralCard,modalColor:Mr.neutralModal,bodyColor:Mr.neutralBody,tagColor:"rgb(250, 250, 252)",avatarColor:no(Mr.alphaAvatar),invertedColor:"rgb(0, 20, 40)",inputColor:no(Mr.alphaInput),codeColor:"rgb(244, 244, 248)",tabColor:"rgb(247, 247, 250)",actionColor:"rgb(250, 250, 252)",tableHeaderColor:"rgb(250, 250, 252)",hoverColor:"rgb(243, 243, 245)",tableColorHover:"rgba(0, 0, 100, 0.03)",tableColorStriped:"rgba(0, 0, 100, 0.02)",pressedColor:"rgb(237, 237, 239)",opacityDisabled:Mr.alphaDisabled,inputColorDisabled:"rgb(250, 250, 252)",buttonColor2:"rgba(46, 51, 56, .05)",buttonColor2Hover:"rgba(46, 51, 56, .09)",buttonColor2Pressed:"rgba(46, 51, 56, .13)",boxShadow1:"0 1px 2px -2px rgba(0, 0, 0, .08), 0 3px 6px 0 rgba(0, 0, 0, .06), 0 5px 12px 4px rgba(0, 0, 0, .04)",boxShadow2:"0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05)",boxShadow3:"0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03)"});var Bn=MVe,IVe={iconSizeSmall:"34px",iconSizeMedium:"40px",iconSizeLarge:"46px",iconSizeHuge:"52px"};const PVe=r=>{const{textColorDisabled:t,iconColor:e,textColor2:n,fontSizeSmall:i,fontSizeMedium:a,fontSizeLarge:o,fontSizeHuge:s}=r;return Object.assign(Object.assign({},IVe),{fontSizeSmall:i,fontSizeMedium:a,fontSizeLarge:o,fontSizeHuge:s,textColor:t,iconColor:e,extraTextColor:n})},DVe={name:"Empty",common:Bn,self:PVe};var sC=DVe,RVe=ne("empty",`
 display: flex;
 flex-direction: column;
 align-items: center;
 font-size: var(--font-size);
`,[xe("icon",`
 width: var(--icon-size);
 height: var(--icon-size);
 font-size: var(--icon-size);
 line-height: var(--icon-size);
 color: var(--icon-color);
 transition:
 color .3s var(--bezier);
 `),xe("description",`
 margin-top: 8px;
 transition: color .3s var(--bezier);
 color: var(--text-color);
 `),xe("extra",`
 text-align: center;
 transition: color .3s var(--bezier);
 margin-top: 12px;
 color: var(--extra-text-color);
 `)]);const OVe=Object.assign(Object.assign({},rr.props),{description:{type:String,default:void 0},showDescription:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function});var sP=mt({name:"Empty",props:OVe,setup(r){const{mergedClsPrefixRef:t}=pn(r),e=rr("Empty","Empty",RVe,sC,r,t),{localeRef:n}=sf("Empty"),i=nr(Rp,null),a=Q(()=>{var s,l,u;return(s=r.description)!==null&&s!==void 0?s:(u=(l=i==null?void 0:i.mergedComponentPropsRef.value)===null||l===void 0?void 0:l.Empty)===null||u===void 0?void 0:u.description}),o=Q(()=>{var s,l;return((l=(s=i==null?void 0:i.mergedComponentPropsRef.value)===null||s===void 0?void 0:s.Empty)===null||l===void 0?void 0:l.renderIcon)||(()=>M(uUe,null))});return{mergedClsPrefix:t,mergedRenderIcon:o,localizedDescription:Q(()=>a.value||n.value.description),cssVars:Q(()=>{const{size:s}=r,{common:{cubicBezierEaseInOut:l},self:{[Gt("iconSize",s)]:u,[Gt("fontSize",s)]:c,textColor:f,iconColor:d,extraTextColor:h}}=e.value;return{"--icon-size":u,"--font-size":c,"--bezier":l,"--text-color":f,"--icon-color":d,"--extra-text-color":h}})}},render(){const{$slots:r,mergedClsPrefix:t}=this;return M("div",{class:`${t}-empty`,style:this.cssVars},M("div",{class:`${t}-empty__icon`},Jr(r,"icon",void 0,()=>[M(si,{clsPrefix:t},{default:this.mergedRenderIcon})])),this.showDescription?M("div",{class:`${t}-empty__description`},Jr(r,"default",void 0,()=>[this.localizedDescription])):null,r.extra?M("div",{class:`${t}-empty__extra`},Jr(r,"extra")):null)}});const LVe=r=>{const{scrollbarColor:t,scrollbarColorHover:e}=r;return{color:t,colorHover:e}},FVe={name:"Scrollbar",common:Bn,self:LVe};var Xu=FVe;const{cubicBezierEaseInOut:tq}=af;function lP({name:r="fade-in",enterDuration:t="0.2s",leaveDuration:e="0.2s",enterCubicBezier:n=tq,leaveCubicBezier:i=tq}={}){return[we(`&.${r}-transition-enter-active`,{transition:`all ${t} ${n}!important`}),we(`&.${r}-transition-leave-active`,{transition:`all ${e} ${i}!important`}),we(`&.${r}-transition-enter-from, &.${r}-transition-leave-to`,{opacity:0}),we(`&.${r}-transition-leave-from, &.${r}-transition-enter-to`,{opacity:1})]}var NVe=ne("scrollbar",`
 overflow: hidden;
 position: relative;
 z-index: auto;
 height: 100%;
 width: 100%;
`,[we(">",[ne("scrollbar-container",`
 width: 100%;
 overflow: scroll;
 height: 100%;
 max-height: inherit;
 scrollbar-width: none;
 `,[we("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),we(">",[ne("scrollbar-content",`
 box-sizing: border-box;
 min-width: 100%;
 `)])]),ne("scrollbar-rail",`
 position: absolute;
 pointer-events: none;
 user-select: none;
 `,[Pe("horizontal",`
 left: 2px;
 right: 2px;
 bottom: 4px;
 height: var(--scrollbar-height);
 `,[we(">",[xe("scrollbar",`
 height: var(--scrollbar-height);
 border-radius: var(--scrollbar-border-radius);
 right: 0;
 `)])]),Pe("vertical",`
 right: 4px;
 top: 2px;
 bottom: 2px;
 width: var(--scrollbar-width);
 `,[we(">",[xe("scrollbar",`
 width: var(--scrollbar-width);
 border-radius: var(--scrollbar-border-radius);
 bottom: 0;
 `)])]),Pe("disabled",[we(">",[xe("scrollbar",{pointerEvents:"none"})])]),we(">",[xe("scrollbar",`
 position: absolute;
 cursor: pointer;
 pointer-events: all;
 background-color: var(--scrollbar-color);
 transition: background-color .2s var(--scrollbar-bezier);
 `,[lP(),we("&:hover",{backgroundColor:"var(--scrollbar-color-hover)"})])])])])]);const BVe=Object.assign(Object.assign({},rr.props),{size:{type:Number,default:5},duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:{type:Boolean,default:!1},container:Function,content:Function,containerStyle:[String,Object],contentClass:String,contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function}),rq=mt({name:"Scrollbar",props:BVe,inheritAttrs:!1,setup(r){const{mergedClsPrefixRef:t}=pn(r),e=ke(null),n=ke(null),i=ke(null),a=ke(null),o=ke(null),s=ke(null),l=ke(null),u=ke(null),c=ke(null),f=ke(null),d=ke(null),h=ke(0),v=ke(0),p=ke(!1),g=ke(!1);let m=!1,y=!1,b,x,w=0,S=0,C=0,_=0;const T=l8e(),E=Q(()=>{const{value:K}=u,{value:ee}=s,{value:J}=f;return K===null||ee===null||J===null?0:Math.min(K,J*K/ee+r.size*1.5)}),k=Q(()=>`${E.value}px`),I=Q(()=>{const{value:K}=c,{value:ee}=l,{value:J}=d;return K===null||ee===null||J===null?0:J*K/ee+r.size*1.5}),P=Q(()=>`${I.value}px`),F=Q(()=>{const{value:K}=u,{value:ee}=h,{value:J}=s,{value:ge}=f;return K===null||J===null||ge===null?0:ee/(J-K)*(ge-E.value)}),$=Q(()=>`${F.value}px`),R=Q(()=>{const{value:K}=c,{value:ee}=v,{value:J}=l,{value:ge}=d;return K===null||J===null||ge===null?0:ee/(J-K)*(ge-I.value)}),L=Q(()=>`${R.value}px`),O=Q(()=>{const{value:K}=u,{value:ee}=s;return K!==null&&ee!==null&&ee>K}),B=Q(()=>{const{value:K}=c,{value:ee}=l;return K!==null&&ee!==null&&ee>K}),U=Q(()=>{const{container:K}=r;return K?K():n.value}),W=Q(()=>{const{content:K}=r;return K?K():i.value}),X=he,ie=K=>{const{onResize:ee}=r;ee&&ee(K),he()},q=(K,ee)=>{if(!r.scrollable)return;if(typeof K=="number"){j(K,ee!=null?ee:0,0,!1,"auto");return}const{left:J,top:ge,index:Ve,elSize:Ge,position:rt,behavior:Se,el:ye,debounce:Re=!0}=K;(J!==void 0||ge!==void 0)&&j(J!=null?J:0,ge!=null?ge:0,0,!1,Se),ye!==void 0?j(0,ye.offsetTop,ye.offsetHeight,Re,Se):Ve!==void 0&&Ge!==void 0?j(0,Ve*Ge,Ge,Re,Se):rt==="bottom"?j(0,Number.MAX_SAFE_INTEGER,0,!1,Se):rt==="top"&&j(0,0,0,!1,Se)};function j(K,ee,J,ge,Ve){const{value:Ge}=U;if(!!Ge){if(ge){const{scrollTop:rt,offsetHeight:Se}=Ge;if(ee>rt){ee+J<=rt+Se||Ge.scrollTo({left:K,top:ee+J-Se,behavior:Ve});return}}Ge.scrollTo({left:K,top:ee,behavior:Ve})}}function fe(){Ye(),De(),he()}function se(){ce()}function ce(){_e(),Me()}function _e(){x!==void 0&&window.clearTimeout(x),x=window.setTimeout(()=>{g.value=!1},r.duration)}function Me(){b!==void 0&&window.clearTimeout(b),b=window.setTimeout(()=>{p.value=!1},r.duration)}function Ye(){b!==void 0&&window.clearTimeout(b),p.value=!0}function De(){x!==void 0&&window.clearTimeout(x),g.value=!0}function D(K){const{onScroll:ee}=r;ee&&ee(K),z()}function z(){const{value:K}=U;K&&(h.value=K.scrollTop,v.value=K.scrollLeft)}function V(){const{value:K}=W;K&&(s.value=K.offsetHeight,l.value=K.offsetWidth);const{value:ee}=U;ee&&(u.value=ee.offsetHeight,c.value=ee.offsetWidth);const{value:J}=o,{value:ge}=a;J&&(d.value=J.offsetWidth),ge&&(f.value=ge.offsetHeight)}function he(){!r.scrollable||(V(),z())}function re(K){var ee;return!((ee=e.value)===null||ee===void 0?void 0:ee.contains(K.target))}function pe(K){K.preventDefault(),K.stopPropagation(),y=!0,zi("mousemove",window,Je,!0),zi("mouseup",window,We,!0),S=v.value,C=K.clientX}function Je(K){if(!y)return;b!==void 0&&window.clearTimeout(b),x!==void 0&&window.clearTimeout(x);const{value:ee}=c,{value:J}=l,{value:ge}=I;if(ee===null||J===null)return;const Ge=(K.clientX-C)*(J-ee)/(ee-ge),rt=J-ee;let Se=S+Ge;Se=Math.min(rt,Se),Se=Math.max(Se,0);const{value:ye}=U;if(ye){ye.scrollLeft=Se;const{internalOnUpdateScrollLeft:Re}=r;Re&&Re(Se)}}function We(K){K.preventDefault(),K.stopPropagation(),Ei("mousemove",window,Je,!0),Ei("mouseup",window,We,!0),y=!1,he(),re(K)&&ce()}function Le(K){K.preventDefault(),K.stopPropagation(),m=!0,zi("mousemove",window,$e,!0),zi("mouseup",window,H,!0),w=h.value,_=K.clientY}function $e(K){if(!m)return;b!==void 0&&window.clearTimeout(b),x!==void 0&&window.clearTimeout(x);const{value:ee}=u,{value:J}=s,{value:ge}=E;if(ee===null||J===null)return;const Ge=(K.clientY-_)*(J-ee)/(ee-ge),rt=J-ee;let Se=w+Ge;Se=Math.min(rt,Se),Se=Math.max(Se,0);const{value:ye}=U;ye&&(ye.scrollTop=Se)}function H(K){K.preventDefault(),K.stopPropagation(),Ei("mousemove",window,$e,!0),Ei("mouseup",window,H,!0),m=!1,he(),re(K)&&ce()}Co(()=>{const{value:K}=B,{value:ee}=O,{value:J}=t,{value:ge}=o,{value:Ve}=a;ge&&(K?ge.classList.remove(`${J}-scrollbar-rail--disabled`):ge.classList.add(`${J}-scrollbar-rail--disabled`)),Ve&&(ee?Ve.classList.remove(`${J}-scrollbar-rail--disabled`):Ve.classList.add(`${J}-scrollbar-rail--disabled`))}),Lo(()=>{r.container||he()}),os(()=>{b!==void 0&&window.clearTimeout(b),x!==void 0&&window.clearTimeout(x),Ei("mousemove",window,$e,!0),Ei("mouseup",window,H,!0)});const Y=rr("Scrollbar","Scrollbar",NVe,Xu,r,t);return{sync:he,scrollTo:q,mergedClsPrefix:t,containerScrollTop:h,wrapperRef:e,containerRef:n,contentRef:i,yRailRef:a,xRailRef:o,needYBar:O,needXBar:B,yBarSizePx:k,xBarSizePx:P,yBarTopPx:$,xBarLeftPx:L,isShowXBar:p,isShowYBar:g,isIos:T,handleScroll:D,handleContentResize:X,handleContainerResize:ie,handleMouseEnterWrapper:fe,handleMouseLeaveWrapper:se,handleYScrollMouseDown:Le,handleXScrollMouseDown:pe,cssVars:Q(()=>{const{common:{cubicBezierEaseInOut:K,scrollbarBorderRadius:ee,scrollbarHeight:J,scrollbarWidth:ge},self:{color:Ve,colorHover:Ge}}=Y.value;return{"--scrollbar-bezier":K,"--scrollbar-color":Ve,"--scrollbar-color-hover":Ge,"--scrollbar-border-radius":ee,"--scrollbar-width":ge,"--scrollbar-height":J}})}},render(){const{$slots:r,mergedClsPrefix:t}=this;if(!this.scrollable)return Jr(r,"default");const e=()=>M("div",Tl(this.$attrs,{ref:"wrapperRef",class:`${t}-scrollbar`,style:this.cssVars,onMouseenter:this.handleMouseEnterWrapper,onMouseleave:this.handleMouseLeaveWrapper}),[this.container?Jr(r,"default"):M("div",{ref:"containerRef",class:`${t}-scrollbar-container`,style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},M(y0,{onResize:this.handleContentResize},{default:()=>M("div",{ref:"contentRef",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${t}-scrollbar-content`,this.contentClass]},r)})),M("div",{ref:"yRailRef",class:`${t}-scrollbar-rail ${t}-scrollbar-rail--vertical`,style:[this.horizontalRailStyle]},M(pa,{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?M("div",{class:`${t}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),M("div",{ref:"xRailRef",class:`${t}-scrollbar-rail ${t}-scrollbar-rail--horizontal`,style:[this.verticalRailStyle]},M(pa,{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?M("div",{class:`${t}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,left:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))]);return this.container?e():M(y0,{onResize:this.handleContainerResize},{default:e})}});var ms=rq;const nq=rq,$Ve=M(aUe);function zVe(r,t){return M(pa,{name:"fade-in-scale-up-transition"},{default:()=>r?M(si,{clsPrefix:t,class:`${t}-base-select-option__check`},{default:()=>$Ve}):null})}var iq=mt({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(r){const{valueRef:t,pendingTmNodeRef:e,multipleRef:n,valueSetRef:i,renderLabelRef:a,renderOptionRef:o,handleOptionClick:s,handleOptionMouseEnter:l}=nr(VI),u=On(()=>{const{value:h}=e;return h?r.tmNode.key===h.key:!1});function c(h){const{tmNode:v}=r;v.disabled||s(h,v)}function f(h){const{tmNode:v}=r;v.disabled||l(h,v)}function d(h){const{tmNode:v}=r,{value:p}=u;v.disabled||p||l(h,v)}return{multiple:n,isGrouped:On(()=>{const{tmNode:h}=r,{parent:v}=h;return v&&v.rawNode.type==="group"}),isPending:u,isSelected:On(()=>{const{value:h}=t,{value:v}=n;if(h===null)return!1;const p=r.tmNode.rawNode.value;if(v){const{value:g}=i;return g.has(p)}else return h===p}),renderLabel:a,renderOption:o,handleMouseMove:d,handleMouseEnter:f,handleClick:c}},render(){const{clsPrefix:r,tmNode:{rawNode:t},isSelected:e,isPending:n,isGrouped:i,multiple:a,renderOption:o,renderLabel:s,handleClick:l,handleMouseEnter:u,handleMouseMove:c}=this,d=zVe(a&&e,r),h=s?[s(t,e),d]:[Hn(t.label,t,e),d],v=M("div",{class:[`${r}-base-select-option`,t.class,{[`${r}-base-select-option--disabled`]:t.disabled,[`${r}-base-select-option--selected`]:e,[`${r}-base-select-option--grouped`]:i,[`${r}-base-select-option--pending`]:n}],style:t.style,onClick:l,onMouseenter:u,onMousemove:c},M("div",{class:`${r}-base-select-option__content`},h));return t.render?t.render({node:v,option:t,selected:e}):o?o({node:v,option:t,selected:e}):v}}),aq=mt({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:r,renderOptionRef:t}=nr(VI);return{renderLabel:r,renderOption:t}},render(){const{clsPrefix:r,renderLabel:t,renderOption:e,tmNode:{rawNode:n}}=this,i=t?t(n,!1):Hn(n.label,n,!1),a=M("div",{class:`${r}-base-select-group-header`},i);return n.render?n.render({node:a,option:n}):e?e({node:a,option:n,selected:!1}):a}});const{cubicBezierEaseIn:oq,cubicBezierEaseOut:sq,transformDebounceScale:GVe}=af;function qu({transformOrigin:r="inherit",duration:t=".2s",enterScale:e=".9",originalTransform:n="",originalTransition:i=""}={}){return[we("&.fade-in-scale-up-transition-leave-active",{transformOrigin:r,transition:`opacity ${t} ${oq}, transform ${t} ${oq} ${i&&","+i}`}),we("&.fade-in-scale-up-transition-enter-active",{transformOrigin:r,transition:`opacity ${t} ${sq}, transform ${t} ${sq} ${i&&","+i}`}),we("&.fade-in-scale-up-transition-enter-from, &.fade-in-scale-up-transition-leave-to",{opacity:0,transform:`${n} scale(${e})`}),we("&.fade-in-scale-up-transition-leave-from, &.fade-in-scale-up-transition-enter-to",{opacity:1,transform:`${n} scale(${GVe})`})]}var UVe=ne("base-select-menu",`
 line-height: 1.5;
 outline: none;
 z-index: 0;
 position: relative;
 border-radius: var(--border-radius);
 transition:
 background-color .3s var(--bezier),
 box-shadow .3s var(--bezier);
 background-color: var(--color);
`,[Pe("multiple",[ne("base-select-option",`
 padding-right: 28px;
 `)]),ne("scrollbar",`
 max-height: var(--height);
 `),ne("virtual-list",`
 max-height: var(--height);
 `),ne("base-select-option",`
 min-height: var(--option-height);
 font-size: var(--option-font-size);
 display: flex;
 align-items: center;
 `,[xe("content",`
 white-space: nowrap;
 text-overflow: ellipsis;
 overflow: hidden;
 `)]),ne("base-select-group-header",`
 min-height: var(--option-height);
 font-size: .93em;
 display: flex;
 align-items: center;
 `),ne("base-select-menu-option-wrapper",`
 position: relative;
 width: 100%;
 `),xe("loading, empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),xe("loading",`
 color: var(--loading-color);
 font-size: var(--loading-size);
 `),xe("action",`
 padding: 8px var(--option-padding-left);
 font-size: var(--option-font-size);
 transition: 
 color .3s var(--bezier);
 border-color .3s var(--bezier);
 border-top: 1px solid var(--action-divider-color);
 color: var(--action-text-color);
 `),ne("base-select-group-header",`
 position: relative;
 cursor: default;
 padding: var(--option-padding);
 color: var(--group-header-text-color);
 `),ne("base-select-option",`
 cursor: pointer;
 position: relative;
 padding: var(--option-padding);
 transition:
 background-color .3s var(--bezier),
 color .3s var(--bezier),
 opacity .3s var(--bezier);
 box-sizing: border-box;
 color: var(--option-text-color);
 opacity: 1;
 `,[we("&:active",`
 color: var(--option-text-color-pressed);
 `),Pe("grouped",`
 padding-left: calc(var(--option-padding-left) * 1.5);
 `),Pe("pending",`
 background-color: var(--option-color-pending);
 `),Pe("selected",`
 color: var(--option-text-color-active);
 background-color: var(--option-color-active);
 `),Pe("disabled",`
 cursor: not-allowed;
 `,[Cn("selected",`
 color: var(--option-text-color-disabled);
 `),Pe("selected",`
 opacity: var(--option-opacity-disabled);
 `)]),xe("check",`
 font-size: 16px;
 position: absolute;
 right: 8px;
 top: calc(50% - 7px);
 color: var(--option-check-color);
 transition: color .3s var(--bezier);
 `,[qu({enterScale:"0.5"})])])]),VVe={height:"calc(var(--option-height) * 7.6)",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"};const HVe=r=>{const{borderRadius:t,popoverColor:e,textColor3:n,dividerColor:i,textColor2:a,primaryColorPressed:o,textColorDisabled:s,primaryColor:l,opacityDisabled:u,hoverColor:c,fontSizeSmall:f,fontSizeMedium:d,fontSizeLarge:h,fontSizeHuge:v,heightSmall:p,heightMedium:g,heightLarge:m,heightHuge:y}=r;return Object.assign(Object.assign({},VVe),{optionFontSizeSmall:f,optionFontSizeMedium:d,optionFontSizeLarge:h,optionFontSizeHuge:v,optionHeightSmall:p,optionHeightMedium:g,optionHeightLarge:m,optionHeightHuge:y,borderRadius:t,color:e,groupHeaderTextColor:n,actionDividerColor:i,optionTextColor:a,optionTextColorPressed:o,optionTextColorDisabled:s,optionTextColorActive:l,optionOpacityDisabled:u,optionCheckColor:l,optionColorPending:c,optionColorActive:c,actionTextColor:a,loadingColor:l})},WVe=ro({name:"InternalSelectMenu",common:Bn,peers:{Scrollbar:Xu,Empty:sC},self:HVe});var lq=WVe,jVe=mt({name:"InternalSelectMenu",props:Object.assign(Object.assign({},rr.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},width:[Number,String],autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onToggle:Function}),setup(r){const t=rr("InternalSelectMenu","InternalSelectMenu",UVe,lq,r,Ht(r,"clsPrefix")),e=ke(null),n=ke(null),i=ke(null),a=Q(()=>r.treeMate.getFlattenedNodes()),o=Q(()=>RX(a.value)),s=ke(null);function l(){const{treeMate:R}=r;E(r.autoPending?r.value===null?R.getFirstAvailableNode():r.multiple?R.getNode((r.value||[])[(r.value||[]).length-1])||R.getFirstAvailableNode():R.getNode(r.value)||R.getFirstAvailableNode():null)}l(),Lo(()=>{Co(()=>{r.show&&(l(),oa(k))})});const u=Q(()=>Ho(t.value.self[Gt("optionHeight",r.size)])),c=Q(()=>Sp(t.value.self[Gt("padding",r.size)])),f=Q(()=>r.multiple&&Array.isArray(r.value)?new Set(r.value):new Set),d=Q(()=>{const R=a.value;return R&&R.length===0}),h=Q(()=>[{width:ca(r.width)},F.value]);nn(Ht(r,"treeMate"),()=>{if(r.autoPending){const R=r.treeMate.getFirstAvailableNode();E(R)}else E(null)});function v(R){const{onToggle:L}=r;L&&L(R)}function p(R){const{onScroll:L}=r;L&&L(R)}function g(R){var L;(L=i.value)===null||L===void 0||L.sync(),p(R)}function m(){var R;(R=i.value)===null||R===void 0||R.sync()}function y(){const{value:R}=s;return R||null}function b(R,L){L.disabled||E(L,!1)}function x(R,L){L.disabled||v(L)}function w(R){var L;Vu(R,"action")||(L=r.onKeyup)===null||L===void 0||L.call(r,R)}function S(R){var L;Vu(R,"action")||(L=r.onKeydown)===null||L===void 0||L.call(r,R)}function C(R){var L;(L=r.onMousedown)===null||L===void 0||L.call(r,R),!r.focusable&&R.preventDefault()}function _(){const{value:R}=s;R&&E(R.getNext({loop:!0}),!0)}function T(){const{value:R}=s;R&&E(R.getPrev({loop:!0}),!0)}function E(R,L=!1){s.value=R,L&&k()}function k(){var R,L;const O=s.value;if(!O)return;const B=o.value(O.key);B!==null&&(r.virtualScroll?(R=n.value)===null||R===void 0||R.scrollTo({index:B}):(L=i.value)===null||L===void 0||L.scrollTo({index:B,elSize:u.value}))}function I(R){var L,O;((L=e.value)===null||L===void 0?void 0:L.contains(R.target))&&((O=r.onFocus)===null||O===void 0||O.call(r,R))}function P(R){var L,O;((L=e.value)===null||L===void 0?void 0:L.contains(R.relatedTarget))||(O=r.onBlur)===null||O===void 0||O.call(r,R)}Qr(VI,{handleOptionMouseEnter:b,handleOptionClick:x,valueSetRef:f,multipleRef:Ht(r,"multiple"),valueRef:Ht(r,"value"),renderLabelRef:Ht(r,"renderLabel"),renderOptionRef:Ht(r,"renderOption"),pendingTmNodeRef:s}),Qr(EX,e),Lo(()=>{const{value:R}=i;R&&R.sync()});const F=Q(()=>{const{size:R}=r,{common:{cubicBezierEaseInOut:L},self:{height:O,borderRadius:B,color:U,groupHeaderTextColor:W,actionDividerColor:X,optionTextColorPressed:ie,optionTextColor:q,optionTextColorDisabled:j,optionTextColorActive:fe,optionOpacityDisabled:se,optionCheckColor:ce,actionTextColor:_e,optionColorPending:Me,optionColorActive:Ye,loadingColor:De,loadingSize:D,[Gt("optionFontSize",R)]:z,[Gt("optionHeight",R)]:V,[Gt("optionPadding",R)]:he}}=t.value;return{"--height":O,"--action-divider-color":X,"--action-text-color":_e,"--bezier":L,"--border-radius":B,"--color":U,"--option-font-size":z,"--group-header-text-color":W,"--option-check-color":ce,"--option-color-pending":Me,"--option-color-active":Ye,"--option-height":V,"--option-opacity-disabled":se,"--option-text-color":q,"--option-text-color-active":fe,"--option-text-color-disabled":j,"--option-text-color-pressed":ie,"--option-padding":he,"--option-padding-left":Sp(he,"left"),"--loading-color":De,"--loading-size":D}});return Object.assign({mergedTheme:t,virtualListRef:n,scrollbarRef:i,style:h,itemSize:u,padding:c,flattenedNodes:a,empty:d,virtualListContainer(){const{value:R}=n;return R==null?void 0:R.listElRef},virtualListContent(){const{value:R}=n;return R==null?void 0:R.itemsElRef},doScroll:p,handleFocusin:I,handleFocusout:P,handleKeyUp:w,handleKeyDown:S,handleMouseDown:C,handleVirtualListResize:m,handleVirtualListScroll:g},{selfRef:e,next:_,prev:T,getPendingTmNode:y})},render(){const{$slots:r,virtualScroll:t,clsPrefix:e,mergedTheme:n}=this;return M("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:[`${e}-base-select-menu`,this.multiple&&`${e}-base-select-menu--multiple`],style:this.style,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},this.loading?M("div",{class:`${e}-base-select-menu__loading`},M(sh,{clsPrefix:e,strokeWidth:20})):this.empty?M("div",{class:`${e}-base-select-menu__empty`},Jr(r,"empty",void 0,()=>[M(sP,{theme:n.peers.Empty,themeOverrides:n.peerOverrides.Empty})])):M(ms,{ref:"scrollbarRef",theme:n.peers.Scrollbar,themeOverrides:n.peerOverrides.Scrollbar,scrollable:this.scrollable,container:t?this.virtualListContainer:void 0,content:t?this.virtualListContent:void 0,onScroll:t?void 0:this.doScroll},{default:()=>t?M(oC,{ref:"virtualListRef",class:`${e}-virtual-list`,items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemResizable:!0},{default:({item:i})=>i.isGroup?M(aq,{key:i.key,clsPrefix:e,tmNode:i}):i.ignored?null:M(iq,{clsPrefix:e,key:i.key,tmNode:i})}):M("div",{class:`${e}-base-select-menu-option-wrapper`,style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map(i=>i.isGroup?M(aq,{key:i.key,clsPrefix:e,tmNode:i}):M(iq,{clsPrefix:e,key:i.key,tmNode:i})))}),r.action&&M("div",{class:`${e}-base-select-menu__action`,"data-action":!0},Jr(r,"action")),r.action&&M(lf,{onFocus:this.onTabOut}))}}),YVe=ne("base-wave",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
`),XVe=mt({name:"BaseWave",props:{clsPrefix:{type:String,required:!0}},setup(r){Op("BaseWave",YVe,Ht(r,"clsPrefix"));const t=ke(null),e=ke(!1);let n=null;return os(()=>{n!==null&&window.clearTimeout(n)}),{active:e,selfRef:t,play(){n!==null&&(window.clearTimeout(n),e.value=!1,n=null),oa(()=>{var i;(i=t.value)===null||i===void 0||i.offsetHeight,e.value=!0,n=window.setTimeout(()=>{e.value=!1,n=null},1e3)})}}},render(){const{clsPrefix:r}=this;return M("div",{ref:"selfRef","aria-hidden":!0,class:[`${r}-base-wave`,this.active&&`${r}-base-wave--active`]})}}),qVe={space:"6px",spaceArrow:"10px",arrowOffset:"10px",arrowOffsetVertical:"10px",arrowHeight:"6px",padding:"8px 14px"};const KVe=r=>{const{boxShadow2:t,popoverColor:e,textColor2:n,borderRadius:i,fontSize:a,dividerColor:o}=r;return Object.assign(Object.assign({},qVe),{fontSize:a,borderRadius:i,color:e,dividerColor:o,textColor:n,boxShadow:t})},ZVe={name:"Popover",common:Bn,self:KVe};var b0=ZVe;const uP={top:"bottom",bottom:"top",left:"right",right:"left"};var QVe=we([ne("popover",`
 transition:
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier),
 color .3s var(--bezier);
 transform-origin: inherit;
 position: relative;
 font-size: var(--font-size);
 color: var(--text-color);
 box-shadow: var(--box-shadow);
 `,[we("&.popover-transition-enter-from, &.popover-transition-leave-to",`
 opacity: 0;
 transform: scale(.85);
 `),we("&.popover-transition-enter-to, &.popover-transition-leave-from",`
 transform: scale(1);
 opacity: 1;
 `),we("&.popover-transition-enter-active",`
 transition:
 opacity .15s var(--bezier-ease-out),
 transform .15s var(--bezier-ease-out);
 `),we("&.popover-transition-leave-active",`
 transition:
 opacity .15s var(--bezier-ease-in),
 transform .15s var(--bezier-ease-in);
 `),Cn("raw",`
 background-color: var(--color);
 border-radius: var(--border-radius);
 `,[Cn("show-header","padding: var(--padding);")]),xe("header",`
 padding: var(--padding);
 border-bottom: 1px solid var(--divider-color);
 transition: border-color .3s var(--bezier);
 `),xe("content",`
 padding: var(--padding);
 `),ne("popover-arrow-wrapper",`
 position: absolute;
 overflow: hidden;
 pointer-events: none;
 `,[ne("popover-arrow",`
 transition: background-color .3s var(--bezier);
 position: absolute;
 display: block;
 width: calc(var(--arrow-height) * 1.414);
 height: calc(var(--arrow-height) * 1.414);
 box-shadow: 0 0 8px 0 rgba(0, 0, 0, .12);
 transform: rotate(45deg);
 background-color: var(--color);
 pointer-events: all;
 `)])]),Vs("top-start",`
 top: calc(-0.707 * var(--arrow-height));
 left: var(--arrow-offset);
 `),Vs("top",`
 top: calc(-0.707 * var(--arrow-height));
 transform: translateX(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 left: 50%;
 `),Vs("top-end",`
 top: calc(-0.707 * var(--arrow-height));
 right: var(--arrow-offset);
 `),Vs("bottom-start",`
 bottom: calc(-0.707 * var(--arrow-height));
 left: var(--arrow-offset);
 `),Vs("bottom",`
 bottom: calc(-0.707 * var(--arrow-height));
 transform: translateX(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 left: 50%;
 `),Vs("bottom-end",`
 bottom: calc(-0.707 * var(--arrow-height));
 right: var(--arrow-offset);
 `),Vs("left-start",`
 left: calc(-0.707 * var(--arrow-height));
 top: var(--arrow-offset-vertical);
 `),Vs("left",`
 left: calc(-0.707 * var(--arrow-height));
 transform: translateY(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 top: 50%;
 `),Vs("left-end",`
 left: calc(-0.707 * var(--arrow-height));
 bottom: var(--arrow-offset-vertical);
 `),Vs("right-start",`
 right: calc(-0.707 * var(--arrow-height));
 top: var(--arrow-offset-vertical);
 `),Vs("right",`
 right: calc(-0.707 * var(--arrow-height));
 transform: translateY(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 top: 50%;
 `),Vs("right-end",`
 right: calc(-0.707 * var(--arrow-height));
 bottom: var(--arrow-offset-vertical);
 `)]);function Vs(r,t){const e=r.split("-")[0],n=["top","bottom"].includes(e)?"height: var(--space-arrow);":"width: var(--space-arrow);";return we(`[v-placement="${r}"] >`,[ne("popover",`
 margin-${uP[e]}: var(--space);
 `,[Pe("show-arrow",`
 margin-${uP[e]}: var(--space-arrow);
 `),Pe("overlap",`
 margin: 0;
 `),XGe("popover-arrow-wrapper",`
 right: 0;
 left: 0;
 top: 0;
 bottom: 0;
 ${e}: 100%;
 ${uP[e]}: auto;
 ${n}
 `,[ne("popover-arrow",t)])])])}const uq=Object.assign(Object.assign({},rr.props),{to:Ua.propTo,show:Boolean,trigger:String,showArrow:Boolean,delay:Number,duration:Number,raw:Boolean,arrowStyle:[String,Object],displayDirective:String,x:Number,y:Number,flip:Boolean,overlap:Boolean,placement:String,width:[Number,String],animated:Boolean,onClickoutside:Function,minWidth:Number,maxWidth:Number}),cq=({arrowStyle:r,clsPrefix:t})=>M("div",{key:"__popover-arrow__",class:`${t}-popover-arrow-wrapper`},M("div",{class:`${t}-popover-arrow`,style:r}));var JVe=mt({name:"PopoverBody",inheritAttrs:!1,props:uq,setup(r,{slots:t,attrs:e}){const{namespaceRef:n,mergedClsPrefixRef:i}=pn(r),a=rr("Popover","Popover",QVe,b0,r,i),o=ke(null),s=nr("NPopover"),l=ke(null),u=ke(r.show),c=Q(()=>{const{trigger:x,onClickoutside:w}=r,S=[],{positionManuallyRef:{value:C}}=s;return C||(x==="click"&&!w&&S.push([cf,m]),x==="hover"&&S.push([YUe,g])),w&&S.push([cf,m]),r.displayDirective==="show"&&S.push([Ox,r.show]),S}),f=Q(()=>[{width:r.width==="trigger"?"":ca(r.width),maxWidth:ca(r.maxWidth),minWidth:ca(r.minWidth)},d.value]),d=Q(()=>{const{common:{cubicBezierEaseInOut:x,cubicBezierEaseIn:w,cubicBezierEaseOut:S},self:{space:C,spaceArrow:_,padding:T,fontSize:E,textColor:k,dividerColor:I,color:P,boxShadow:F,borderRadius:$,arrowHeight:R,arrowOffset:L,arrowOffsetVertical:O}}=a.value;return{"--box-shadow":F,"--bezier":x,"--bezier-ease-in":w,"--bezier-ease-out":S,"--font-size":E,"--text-color":k,"--color":P,"--divider-color":I,"--border-radius":$,"--arrow-height":R,"--arrow-offset":L,"--arrow-offset-vertical":O,"--padding":T,"--space":C,"--space-arrow":_}});s.setBodyInstance({syncPosition:h}),os(()=>{s.setBodyInstance(null)}),nn(Ht(r,"show"),x=>{r.animated||(x?u.value=!0:u.value=!1)});function h(){var x;(x=o.value)===null||x===void 0||x.syncPosition()}function v(x){r.trigger==="hover"&&s.handleMouseEnter(x)}function p(x){r.trigger==="hover"&&s.handleMouseLeave(x)}function g(x){r.trigger==="hover"&&!y().contains(x.target)&&s.handleMouseMoveOutside(x)}function m(x){(r.trigger==="click"&&!y().contains(x.target)||r.onClickoutside)&&s.handleClickOutside(x)}function y(){return s.getTriggerElement()}Qr(UI,l),Qr(GI,null),Qr(zI,null);function b(){let x;const{internalRenderBodyRef:{value:w}}=s,{value:S}=i;if(w)x=w([`${S}-popover`,r.overlap&&`${S}-popover--overlap`],l,f.value,v,p);else{const{value:C}=s.extraClassRef;x=M("div",Tl({class:[`${S}-popover`,C.map(_=>`${S}-${_}`),{[`${S}-popover--overlap`]:r.overlap,[`${S}-popover--show-arrow`]:r.showArrow,[`${S}-popover--show-header`]:!!t.header,[`${S}-popover--raw`]:r.raw}],ref:l,style:f.value,onMouseenter:v,onMouseleave:p},e),[t.header?M(Fi,null,M("div",{class:`${S}-popover__header`},t.header()),M("div",{class:`${S}-popover__content`},t)):Jr(t,"default"),r.showArrow?cq({arrowStyle:r.arrowStyle,clsPrefix:S}):null])}return r.displayDirective==="show"||r.show?Cl(x,c.value):null}return{namespace:n,isMounted:s.isMountedRef,zIndex:s.zIndexRef,followerRef:o,adjustedTo:Ua(r),followerEnabled:u,renderContentNode:b}},render(){return M($p,{zIndex:this.zIndex,show:this.show,enabled:this.followerEnabled,to:this.adjustedTo,x:this.x,y:this.y,flip:this.flip,placement:this.placement,containerClass:this.namespace,ref:"followerRef",overlap:this.overlap,width:this.width==="trigger"?"target":void 0,teleportDisabled:this.adjustedTo===Ua.tdkey},{default:()=>this.animated?M(pa,{name:"popover-transition",appear:this.isMounted,onEnter:()=>{this.followerEnabled=!0},onAfterLeave:()=>{this.followerEnabled=!1}},{default:this.renderContentNode}):this.renderContentNode()})}});const eHe=Object.keys(uq),tHe={focus:["onFocus","onBlur"],click:["onClick"],hover:["onMouseenter","onMouseleave"],manual:[],nested:["onFocus","onBlur","onMouseenter","onMouseleave","onClick"]};function rHe(r,t,e){tHe[t].forEach(n=>{r.props?r.props=Object.assign({},r.props):r.props={};const i=r.props[n],a=e[n];i?r.props[n]=(...o)=>{i(...o),a(...o)}:r.props[n]=a})}const nHe=rm("").type,lC={show:{type:Boolean,default:void 0},defaultShow:Boolean,showArrow:{type:Boolean,default:!0},trigger:{type:String,default:"hover"},delay:{type:Number,default:100},duration:{type:Number,default:100},raw:Boolean,placement:{type:String,default:"top"},x:Number,y:Number,disabled:Boolean,getDisabled:Function,displayDirective:{type:String,default:"if"},arrowStyle:[String,Object],flip:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},width:{type:[Number,String],default:void 0},overlap:Boolean,internalExtraClass:{type:Array,default:()=>[]},onClickoutside:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],zIndex:Number,to:Ua.propTo,internalSyncTargetWithParent:Boolean,internalInheritedEventHandlers:{type:Array,default:()=>[]},onShow:[Function,Array],onHide:[Function,Array],arrow:{type:Boolean,default:void 0},minWidth:Number,maxWidth:Number},iHe=Object.assign(Object.assign(Object.assign({},rr.props),lC),{internalRenderBody:Function});var x0=mt({name:"Popover",inheritAttrs:!1,props:iHe,__popover__:!0,setup(r){const t=of(),e=ke(null),n=Q(()=>r.show),i=ke(r.defaultShow),a=ri(n,i),o=On(()=>r.disabled?!1:a.value),s=()=>{if(r.disabled)return!0;const{getDisabled:P}=r;return!!(P==null?void 0:P())},l=()=>s()?!1:a.value,u=XS(r,["arrow","showArrow"]),c=Q(()=>r.overlap?!1:u.value);let f=null;const d=ke(null),h=ke(null),v=On(()=>r.x!==void 0&&r.y!==void 0);function p(P){const{"onUpdate:show":F,onUpdateShow:$,onShow:R,onHide:L}=r;i.value=P,F&&pt(F,P),$&&pt($,P),P&&R&&pt(R,!0),P&&L&&pt(L,!1)}function g(){f&&f.syncPosition()}function m(){const{value:P}=d;P&&(window.clearTimeout(P),d.value=null)}function y(){const{value:P}=h;P&&(window.clearTimeout(P),h.value=null)}function b(){const P=s();if(r.trigger==="focus"&&!P){if(l())return;p(!0)}}function x(){const P=s();if(r.trigger==="focus"&&!P){if(!l())return;p(!1)}}function w(){const P=s();if(r.trigger==="hover"&&!P){if(y(),d.value!==null||l())return;const F=()=>{p(!0),d.value=null},{delay:$}=r;$===0?F():d.value=window.setTimeout(F,$)}}function S(){const P=s();if(r.trigger==="hover"&&!P){if(m(),h.value!==null||!l())return;const F=()=>{p(!1),h.value=null},{duration:$}=r;$===0?F():h.value=window.setTimeout(F,$)}}function C(){S()}function _(P){var F;!l()||(r.trigger==="click"&&(m(),y(),p(!1)),(F=r.onClickoutside)===null||F===void 0||F.call(r,P))}function T(){if(r.trigger==="click"&&!s()){m(),y();const P=!l();p(P)}}function E(P){i.value=P}function k(){var P;return(P=e.value)===null||P===void 0?void 0:P.targetRef}function I(P){f=P}return Qr("NPopover",{getTriggerElement:k,handleMouseEnter:w,handleMouseLeave:S,handleClickOutside:_,handleMouseMoveOutside:C,setBodyInstance:I,positionManuallyRef:v,isMountedRef:t,zIndexRef:Ht(r,"zIndex"),extraClassRef:Ht(r,"internalExtraClass"),internalRenderBodyRef:Ht(r,"internalRenderBody")}),{binderInstRef:e,positionManually:v,mergedShowConsideringDisabledProp:o,uncontrolledShow:i,mergedShowArrow:c,getMergedShow:l,setShow:E,handleClick:T,handleMouseEnter:w,handleMouseLeave:S,handleFocus:b,handleBlur:x,syncPosition:g}},render(){var r;const{positionManually:t,$slots:e}=this;let n,i=!1;if(!t&&(e.activator?n=$I(e,"activator"):n=$I(e,"trigger"),n)){n=gc(n),n=n.type===nHe?M("span",[n]):n;const a={onClick:this.handleClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onFocus:this.handleFocus,onBlur:this.handleBlur};if((r=n.type)===null||r===void 0?void 0:r.__popover__)i=!0,n.props||(n.props={internalSyncTargetWithParent:!0,internalInheritedEventHandlers:[]}),n.props.internalSyncTargetWithParent=!0,n.props.internalInheritedEventHandlers?n.props.internalInheritedEventHandlers=[a,...n.props.internalInheritedEventHandlers]:n.props.internalInheritedEventHandlers=[a];else{const{internalInheritedEventHandlers:o}=this,s=[a,...o],l={onBlur:u=>{s.forEach(c=>{c.onBlur(u)})},onFocus:u=>{s.forEach(c=>{c.onFocus(u)})},onClick:u=>{s.forEach(c=>{c.onClick(u)})},onMouseenter:u=>{s.forEach(c=>{c.onMouseenter(u)})},onMouseleave:u=>{s.forEach(c=>{c.onMouseleave(u)})}};rHe(n,o?"nested":t?"manual":this.trigger,l)}}return M(Lp,{ref:"binderInstRef",syncTarget:!i,syncTargetWithParent:this.internalSyncTargetWithParent},{default:()=>{this.mergedShowConsideringDisabledProp;const a=this.getMergedShow();return[t?null:M(Fp,null,{default:()=>n}),M(JVe,Kl(this.$props,eHe,Object.assign(Object.assign({},this.$attrs),{showArrow:this.mergedShowArrow,show:a})),e)]}})}}),aHe={closeSizeSmall:"14px",closeSizeMedium:"14px",closeSizeLarge:"14px",padding:"0 7px",closeMargin:"0 0 0 3px",closeMarginRtl:"0 3px 0 0"};const oHe=r=>{const{textColor2:t,primaryColorHover:e,primaryColorPressed:n,primaryColor:i,infoColor:a,successColor:o,warningColor:s,errorColor:l,baseColor:u,borderColor:c,opacityDisabled:f,tagColor:d,closeColor:h,closeColorHover:v,closeColorPressed:p,borderRadiusSmall:g,fontSizeTiny:m,fontSizeSmall:y,fontSizeMedium:b,heightTiny:x,heightSmall:w,heightMedium:S}=r;return Object.assign(Object.assign({},aHe),{heightSmall:x,heightMedium:w,heightLarge:S,borderRadius:g,opacityDisabled:f,fontSizeSmall:m,fontSizeMedium:y,fontSizeLarge:b,textColorCheckable:t,textColorHoverCheckable:e,textColorPressedCheckable:n,textColorChecked:u,colorCheckable:"#0000",colorHoverCheckable:"#0000",colorPressedCheckable:"#0000",colorChecked:i,colorCheckedHover:e,colorCheckedPressed:n,border:`1px solid ${c}`,textColor:t,color:d,closeColor:h,closeColorHover:v,closeColorPressed:p,borderPrimary:`1px solid ${qr(i,{alpha:.3})}`,textColorPrimary:i,colorPrimary:qr(i,{alpha:.1}),closeColorPrimary:qr(i,{alpha:.75}),closeColorHoverPrimary:qr(i,{alpha:.6}),closeColorPressedPrimary:qr(i,{alpha:.9}),borderInfo:`1px solid ${qr(a,{alpha:.3})}`,textColorInfo:a,colorInfo:qr(a,{alpha:.1}),closeColorInfo:qr(a,{alpha:.75}),closeColorHoverInfo:qr(a,{alpha:.6}),closeColorPressedInfo:qr(a,{alpha:.9}),borderSuccess:`1px solid ${qr(o,{alpha:.3})}`,textColorSuccess:o,colorSuccess:qr(o,{alpha:.1}),closeColorSuccess:qr(o,{alpha:.75}),closeColorHoverSuccess:qr(o,{alpha:.6}),closeColorPressedSuccess:qr(o,{alpha:.9}),borderWarning:`1px solid ${qr(s,{alpha:.35})}`,textColorWarning:s,colorWarning:qr(s,{alpha:.12}),closeColorWarning:qr(s,{alpha:.75}),closeColorHoverWarning:qr(s,{alpha:.6}),closeColorPressedWarning:qr(s,{alpha:.9}),borderError:`1px solid ${qr(l,{alpha:.23})}`,textColorError:l,colorError:qr(l,{alpha:.08}),closeColorError:qr(l,{alpha:.65}),closeColorHoverError:qr(l,{alpha:.5}),closeColorPressedError:qr(l,{alpha:.8})})},sHe={name:"Tag",common:Bn,self:oHe};var lHe=sHe,uHe={color:Object,type:{type:String,default:"default"},round:Boolean,size:{type:String,default:"medium"},closable:Boolean,disabled:{type:Boolean,default:void 0}},cHe=ne("tag",`
 white-space: nowrap;
 position: relative;
 box-sizing: border-box;
 cursor: default;
 display: inline-flex;
 align-items: center;
 flex-wrap: nowrap;
 padding: var(--padding);
 border-radius: var(--border-radius);
 color: var(--text-color);
 background-color: var(--color);
 transition: 
 border-color .3s var(--bezier),
 background-color .3s var(--bezier),
 color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 opacity .3s var(--bezier);
 line-height: 1;
 height: var(--height);
 font-size: var(--font-size);
`,[xe("border",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 border: var(--border);
 transition: border-color .3s var(--bezier);
 `),xe("avatar",`
 display: flex;
 margin-right: 6px;
 `),xe("close",`
 font-size: var(--close-size);
 margin: var(--close-margin);
 transition: color .3s var(--bezier);
 cursor: pointer;
 `),Pe("round",`
 padding: 0 calc(var(--height) / 2);
 border-radius: calc(var(--height) / 2);
 `,[xe("avatar",`
 margin-left: calc((var(--height) - 8px) / -2);
 `)]),Pe("disabled",`
 cursor: not-allowed !important;
 opacity: var(--opacity-disabled);
 `),Pe("checkable",`
 cursor: pointer;
 box-shadow: none;
 color: var(--text-color-checkable);
 background-color: var(--color-checkable);
 `,[Cn("disabled",[we("&:hover",{backgroundColor:"var(--color-hover-checkable)"},[Cn("checked",{color:"var(--text-color-hover-checkable)"})]),we("&:active",{backgroundColor:"var(--color-pressed-checkable)"},[Cn("checked",{color:"var(--text-color-pressed-checkable)"})])]),Pe("checked",{color:"var(--text-color-checked)",backgroundColor:"var(--color-checked)"},[Cn("disabled",[we("&:hover",{backgroundColor:"var(--color-checked-hover)"}),we("&:active",{backgroundColor:"var(--color-checked-pressed)"})])])])]);function cP(r,t,e){if(!t)return;const n=Pp(),i=Q(()=>{const{value:o}=t;if(!o)return;const s=o[r];if(!!s)return s}),a=()=>{Co(()=>{const{value:o}=e,s=`${o}${r}Rtl`;if(HGe(s,n))return;const{value:l}=i;!l||l.style.mount({id:s,head:!0,props:{bPrefix:o?`.${o}-`:void 0},ssr:n})})};return n?a():pc(a),i}const fHe=Object.assign(Object.assign(Object.assign({},rr.props),uHe),{bordered:{type:Boolean,default:void 0},checked:Boolean,checkable:Boolean,onClose:[Array,Function],onMouseenter:Function,onMouseleave:Function,"onUpdate:checked":Function,onUpdateChecked:Function,internalStopClickPropagation:Boolean,onCheckedChange:{type:Function,validator:()=>!0,default:void 0}}),dHe=Symbol("tag");var fP=mt({name:"Tag",props:fHe,setup(r){const t=ke(null),{mergedBorderedRef:e,mergedClsPrefixRef:n,NConfigProvider:i}=pn(r),a=rr("Tag","Tag",cHe,lHe,r,n);Qr(dHe,{roundRef:Ht(r,"round")});function o(c){if(!r.disabled&&r.checkable){const{checked:f,onCheckedChange:d,onUpdateChecked:h,"onUpdate:checked":v}=r;h&&h(!f),v&&v(!f),d&&d(!f)}}function s(c){if(r.internalStopClickPropagation&&c.stopPropagation(),!r.disabled){const{onClose:f}=r;f&&pt(f,c)}}const l={setTextContent(c){const{value:f}=t;f&&(f.textContent=c)}},u=cP("Tag",i==null?void 0:i.mergedRtlRef,n);return Object.assign(Object.assign({},l),{rtlEnabled:u,mergedClsPrefix:n,contentRef:t,mergedBordered:e,handleClick:o,handleCloseClick:s,cssVars:Q(()=>{const{type:c,size:f,color:{color:d,textColor:h}={}}=r,{common:{cubicBezierEaseInOut:v},self:{padding:p,closeMargin:g,closeMarginRtl:m,borderRadius:y,opacityDisabled:b,textColorCheckable:x,textColorHoverCheckable:w,textColorPressedCheckable:S,textColorChecked:C,colorCheckable:_,colorHoverCheckable:T,colorPressedCheckable:E,colorChecked:k,colorCheckedHover:I,colorCheckedPressed:P,[Gt("closeSize",f)]:F,[Gt("fontSize",f)]:$,[Gt("height",f)]:R,[Gt("color",c)]:L,[Gt("textColor",c)]:O,[Gt("border",c)]:B,[Gt("closeColor",c)]:U,[Gt("closeColorHover",c)]:W,[Gt("closeColorPressed",c)]:X}}=a.value;return{"--avatar-size-override":`calc(${R} - 8px)`,"--bezier":v,"--border-radius":y,"--border":B,"--close-color":U,"--close-color-hover":W,"--close-color-pressed":X,"--close-margin":g,"--close-margin-rtl":m,"--close-size":F,"--color":d||L,"--color-checkable":_,"--color-checked":k,"--color-checked-hover":I,"--color-checked-pressed":P,"--color-hover-checkable":T,"--color-pressed-checkable":E,"--font-size":$,"--height":R,"--opacity-disabled":b,"--padding":p,"--text-color":h||O,"--text-color-checkable":x,"--text-color-checked":C,"--text-color-hover-checkable":w,"--text-color-pressed-checkable":S}})})},render(){const{mergedClsPrefix:r,rtlEnabled:t,color:{borderColor:e}={},$slots:n}=this;return M("div",{class:[`${r}-tag`,{[`${r}-tag--rtl`]:t,[`${r}-tag--disabled`]:this.disabled,[`${r}-tag--checkable`]:this.checkable,[`${r}-tag--checked`]:this.checkable&&this.checked,[`${r}-tag--round`]:this.round}],style:this.cssVars,onClick:this.handleClick,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},n.avatar&&M("div",{class:`${r}-tag__avatar`},{default:n.avatar}),M("span",{class:`${r}-tag__content`,ref:"contentRef"},this.$slots),!this.checkable&&this.closable?M(eC,{clsPrefix:r,class:`${r}-tag__close`,disabled:this.disabled,onClick:this.handleCloseClick}):null,!this.checkable&&this.mergedBordered?M("div",{class:`${r}-tag__border`,style:{borderColor:e}}):null)}}),hHe=ne("base-clear",`
 flex-shrink: 0;
 height: 1em;
 width: 1em;
 position: relative;
`,[we(">",[xe("clear",`
 font-size: var(--clear-size);
 cursor: pointer;
 color: var(--clear-color);
 transition: color .3s var(--bezier);
 `,[we("&:hover",`
 color: var(--clear-color-hover)!important;
 `),we("&:active",`
 color: var(--clear-color-pressed)!important;
 `)]),xe("placeholder",`
 display: flex;
 `),xe("clear, placeholder",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[oh({originalTransform:"translateX(-50%) translateY(-50%)",left:"50%",top:"50%"})])])]),dP=mt({name:"BaseClear",props:{clsPrefix:{type:String,required:!0},show:Boolean,onClear:Function},setup(r){Op("BaseClear",hHe,Ht(r,"clsPrefix"));const{NConfigProvider:t}=pn();return{NConfigProvider:t,handleMouseDown(e){e.preventDefault()}}},render(){const{clsPrefix:r}=this;return M("div",{class:`${r}-base-clear`},M(m0,null,{default:()=>this.show?M(si,{clsPrefix:r,key:"dismiss",class:`${r}-base-clear__clear`,onClick:this.onClear,onMousedown:this.handleMouseDown,"data-clear":!0},{default:()=>M(hUe,null)}):M("div",{key:"icon",class:`${r}-base-clear__placeholder`},this.$slots)}))}}),fq=mt({name:"InternalSelectionSuffix",props:{clsPrefix:{type:String,required:!0},showArrow:{type:Boolean,default:void 0},showClear:{type:Boolean,default:void 0},loading:{type:Boolean,default:!1},onClear:Function},setup(r){return()=>{const{clsPrefix:t}=r;return M(sh,{clsPrefix:t,class:`${t}-base-suffix`,strokeWidth:24,scale:.85,show:r.loading},{default:()=>r.showArrow?M(dP,{clsPrefix:t,show:r.showClear,onClear:r.onClear},{default:()=>M(si,{clsPrefix:t,class:`${t}-base-suffix__arrow`},{default:()=>M(IX,null)})}):null})}}}),vHe={paddingSingle:"0 26px 0 14px",clearSize:"16px",arrowSize:"16px"};const pHe=r=>{const{borderRadius:t,textColor2:e,textColorDisabled:n,inputColor:i,inputColorDisabled:a,primaryColor:o,primaryColorHover:s,warningColor:l,warningColorHover:u,errorColor:c,errorColorHover:f,borderColor:d,iconColor:h,iconColorDisabled:v,clearColor:p,clearColorHover:g,clearColorPressed:m,placeholderColor:y,placeholderColorDisabled:b,fontSizeTiny:x,fontSizeSmall:w,fontSizeMedium:S,fontSizeLarge:C,heightTiny:_,heightSmall:T,heightMedium:E,heightLarge:k}=r;return Object.assign(Object.assign({},vHe),{fontSizeTiny:x,fontSizeSmall:w,fontSizeMedium:S,fontSizeLarge:C,heightTiny:_,heightSmall:T,heightMedium:E,heightLarge:k,borderRadius:t,textColor:e,textColorDisabled:n,placeholderColor:y,placeholderColorDisabled:b,color:i,colorDisabled:a,colorActive:i,border:`1px solid ${d}`,borderHover:`1px solid ${s}`,borderActive:`1px solid ${o}`,borderFocus:`1px solid ${s}`,boxShadowHover:null,boxShadowActive:`0 0 0 2px ${qr(o,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${qr(o,{alpha:.2})}`,caretColor:o,arrowColor:h,arrowColorDisabled:v,loadingColor:o,borderWarning:`1px solid ${l}`,borderHoverWarning:`1px solid ${u}`,borderActiveWarning:`1px solid ${l}`,borderFocusWarning:`1px solid ${u}`,boxShadowHoverWarning:null,boxShadowActiveWarning:`0 0 0 2px ${qr(l,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${qr(l,{alpha:.2})}`,colorActiveWarning:i,caretColorWarning:l,borderError:`1px solid ${c}`,borderHoverError:`1px solid ${f}`,borderActiveError:`1px solid ${c}`,borderFocusError:`1px solid ${f}`,boxShadowHoverError:null,boxShadowActiveError:`0 0 0 2px ${qr(c,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${qr(c,{alpha:.2})}`,colorActiveError:i,caretColorError:c,clearColor:p,clearColorHover:g,clearColorPressed:m})},gHe=ro({name:"InternalSelection",common:Bn,peers:{Popover:b0},self:pHe});var hP=gHe,mHe=we([ne("base-selection",`
 position: relative;
 z-index: auto;
 box-shadow: none;
 width: 100%;
 max-width: 100%;
 display: inline-block;
 vertical-align: bottom;
 border-radius: var(--border-radius);
 min-height: var(--height);
 line-height: 1.5;
 font-size: var(--font-size);
 `,[ne("base-loading",`
 color: var(--loading-color);
 `),ne("base-selection-tags",{minHeight:"var(--height)"}),xe("border, state-border",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border: var(--border);
 border-radius: inherit;
 transition:
 box-shadow .3s var(--bezier),
 border-color .3s var(--bezier);
 `),xe("state-border",`
 z-index: 1;
 border-color: #0000;
 `),ne("base-suffix",`
 cursor: pointer;
 position: absolute;
 top: 50%;
 transform: translateY(-50%);
 right: 10px;
 `,[xe("arrow",`
 font-size: var(--arrow-size);
 color: var(--arrow-color);
 transition: color .3s var(--bezier);
 `)]),ne("base-selection-overlay",`
 display: flex;
 align-items: center;
 white-space: nowrap;
 overflow: hidden;
 pointer-events: none;
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 padding: var(--padding-single);
 transition: color .3s var(--bezier);
 `),ne("base-selection-placeholder",`
 color: var(--placeholder-color);
 `),ne("base-selection-tags",`
 cursor: pointer;
 outline: none;
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 display: flex;
 padding: 3px 26px 0 14px;
 flex-wrap: wrap;
 align-items: center;
 width: 100%;
 vertical-align: bottom;
 background-color: var(--color);
 border-radius: inherit;
 transition:
 color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier);
 `),ne("base-selection-label",`
 height: var(--height);
 display: inline-flex;
 width: 100%;
 vertical-align: bottom;
 cursor: pointer;
 outline: none;
 z-index: auto;
 box-sizing: border-box;
 position: relative;
 transition:
 color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier);
 border-radius: inherit;
 background-color: var(--color);
 align-items: center;
 `,[ne("base-selection-input",`
 line-height: inherit;
 outline: none;
 cursor: pointer;
 box-sizing: border-box;
 border:none;
 width: 100%;
 padding: var(--padding-single);
 background-color: #0000;
 color: var(--text-color);
 transition: color .3s var(--bezier);
 caret-color: var(--caret-color);
 `,[xe("content",`
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap; 
 `)]),xe("render-label",`
 color: var(--text-color);
 `)]),Cn("disabled",[we("&:hover",[xe("state-border",`
 box-shadow: var(--box-shadow-hover);
 border: var(--border-hover);
 `)]),Pe("focus",[xe("state-border",`
 box-shadow: var(--box-shadow-focus);
 border: var(--border-focus);
 `)]),Pe("active",[xe("state-border",`
 box-shadow: var(--box-shadow-active);
 border: var(--border-active);
 `),ne("base-selection-label",{backgroundColor:"var(--color-active)"}),ne("base-selection-tags",{backgroundColor:"var(--color-active)"})])]),Pe("disabled",{cursor:"not-allowed"},[xe("arrow",`
 color: var(--arrow-color-disabled);
 `),ne("base-selection-label",`
 cursor: not-allowed;
 background-color: var(--color-disabled);
 `,[ne("base-selection-input",`
 cursor: not-allowed;
 color: var(--text-color-disabled);
 `),xe("render-label",`
 color: var(--text-color-disabled);
 `)]),ne("base-selection-tags",`
 cursor: not-allowed;
 background-color: var(--color-disabled);
 `),ne("base-selection-placeholder",`
 cursor: not-allowed;
 color: var(--placeholder-color-disabled);
 `)]),ne("base-selection-input-tag",`
 height: calc(var(--height) - 6px);
 line-height: calc(var(--height) - 6px);
 outline: none;
 display: none;
 position: relative;
 margin-bottom: 3px;
 max-width: 100%;
 vertical-align: bottom;
 `,[xe("input",`
 min-width: 1px;
 padding: 0;
 background-color: #0000;
 outline: none;
 border: none;
 max-width: 100%;
 overflow: hidden;
 width: 1em;
 line-height: inherit;
 cursor: pointer;
 color: var(--text-color);
 caret-color: var(--caret-color);
 `),xe("mirror",`
 position: absolute;
 left: 0;
 top: 0;
 white-space: pre;
 visibility: hidden;
 user-select: none;
 opacity: 0;
 `)])]),ne("base-selection-popover",`
 margin-bottom: -3px;
 display: flex;
 flex-wrap: wrap;
 `),ne("base-selection-tag-wrapper",`
 max-width: 100%;
 display: inline-flex;
 padding: 0 7px 3px 0;
 `,[we("&:last-child",{paddingRight:0}),ne("tag",`
 font-size: 14px;
 max-width: 100%;
 `,[xe("content",`
 text-overflow: ellipsis;
 overflow: hidden;
 `)])]),["warning","error"].map(r=>lX(r,ne("base-selection",[xe("state-border",{border:`var(--border-${r})`}),Cn("disabled",[we("&:hover",[xe("state-border",`
 box-shadow: var(--box-shadow-hover-${r});
 border: var(--border-hover-${r});
 `)]),Pe("active",[xe("state-border",`
 box-shadow: var(--box-shadow-active-${r});
 border: var(--border-active-${r});
 `),ne("base-selection-label",{backgroundColor:`var(--color-active-${r})`}),ne("base-selection-tags",{backgroundColor:`var(--box-shadow-active-${r})`})]),Pe("focus",[xe("state-border",`
 box-shadow: var(--box-shadow-focus-${r});
 border: var(--border-focus-${r});
 `)])])])))]),dq=mt({name:"InternalSelection",props:Object.assign(Object.assign({},rr.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:null},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},inputProps:Object,focused:Boolean,renderTag:Function,onKeyup:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],onClear:Function,onPatternInput:Function,renderLabel:Function}),setup(r){const t=ke(null),e=ke(null),n=ke(null),i=ke(null),a=ke(null),o=ke(null),s=ke(null),l=ke(null),u=ke(null),c=ke(null),f=ke(!1),d=ke(!1),h=ke(!1),v=rr("InternalSelection","InternalSelection",mHe,hP,r,Ht(r,"clsPrefix")),p=Q(()=>r.clearable&&!r.disabled&&(h.value||r.active)),g=Q(()=>r.selectedOption?r.renderTag?r.renderTag({option:r.selectedOption,handleClose:()=>{}}):r.renderLabel?r.renderLabel(r.selectedOption,!0):Hn(r.selectedOption.label,r.selectedOption,!0):r.placeholder),m=Q(()=>{const re=r.selectedOption;if(!!re)return re.label}),y=Q(()=>r.multiple?!!(Array.isArray(r.selectedOptions)&&r.selectedOptions.length):r.selectedOption!==null);function b(){var re;const{value:pe}=t;if(pe){const{value:Je}=e;Je&&(Je.style.width=`${pe.offsetWidth}px`,r.maxTagCount!=="responsive"&&((re=u.value)===null||re===void 0||re.sync()))}}function x(){const{value:re}=c;re&&(re.style.display="none")}function w(){const{value:re}=c;re&&(re.style.display="inline-block")}nn(Ht(r,"active"),re=>{re||x()}),nn(Ht(r,"pattern"),()=>{r.multiple&&oa(b)});function S(re){const{onFocus:pe}=r;pe&&pe(re)}function C(re){const{onBlur:pe}=r;pe&&pe(re)}function _(re){const{onDeleteOption:pe}=r;pe&&pe(re)}function T(re){const{onClear:pe}=r;pe&&pe(re)}function E(re){const{onPatternInput:pe}=r;pe&&pe(re)}function k(re){var pe;(!re.relatedTarget||!((pe=n.value)===null||pe===void 0?void 0:pe.contains(re.relatedTarget)))&&S(re)}function I(re){var pe;((pe=n.value)===null||pe===void 0?void 0:pe.contains(re.relatedTarget))||C(re)}function P(re){T(re)}function F(){h.value=!0}function $(){h.value=!1}function R(re){!r.active||!r.filterable||re.target!==e.value&&re.preventDefault()}function L(re){_(re)}function O(re){if(re.code==="Backspace"&&!r.pattern.length){const{selectedOptions:pe}=r;(pe==null?void 0:pe.length)&&L(pe[pe.length-1])}}const B=ke(!1);let U=null;function W(re){const{value:pe}=t;if(pe){const Je=re.target.value;pe.textContent=Je,b()}B.value?U=re:E(re)}function X(){B.value=!0}function ie(){B.value=!1,E(U),U=null}function q(){d.value=!0}function j(re){d.value=!1}function fe(){if(r.filterable){d.value=!1;const{value:re}=o;re&&re.focus()}else if(r.multiple){const{value:re}=i;re==null||re.focus()}else{const{value:re}=a;re==null||re.focus()}}function se(){const{value:re}=e;re&&(w(),re.focus())}function ce(){const{value:re}=e;re&&re.blur()}function _e(re){const{value:pe}=s;pe&&pe.setTextContent(`+${re}`)}function Me(){const{value:re}=l;return re}function Ye(){return e.value}let De=null;function D(){De!==null&&window.clearTimeout(De)}function z(){r.disabled||r.active||(D(),De=window.setTimeout(()=>{f.value=!0},100))}function V(){D()}function he(re){re||(D(),f.value=!1)}return Lo(()=>{Co(()=>{const re=o.value;!re||(re.tabIndex=r.disabled||d.value?-1:0)})}),{mergedTheme:v,mergedClearable:p,patternInputFocused:d,filterablePlaceholder:g,label:m,selected:y,showTagsPanel:f,isCompositing:B,counterRef:s,counterWrapperRef:l,patternInputMirrorRef:t,patternInputRef:e,selfRef:n,multipleElRef:i,singleElRef:a,patternInputWrapperRef:o,overflowRef:u,inputTagElRef:c,handleMouseDown:R,handleFocusin:k,handleClear:P,handleMouseEnter:F,handleMouseLeave:$,handleDeleteOption:L,handlePatternKeyDown:O,handlePatternInputInput:W,handlePatternInputBlur:j,handlePatternInputFocus:q,handleMouseEnterCounter:z,handleMouseLeaveCounter:V,handleFocusout:I,handleCompositionEnd:ie,handleCompositionStart:X,onPopoverUpdateShow:he,focus:fe,focusInput:se,blurInput:ce,updateCounter:_e,getCounter:Me,getTail:Ye,renderLabel:r.renderLabel,cssVars:Q(()=>{const{size:re}=r,{common:{cubicBezierEaseInOut:pe},self:{borderRadius:Je,color:We,placeholderColor:Le,textColor:$e,paddingSingle:H,caretColor:Y,colorDisabled:K,textColorDisabled:ee,placeholderColorDisabled:J,colorActive:ge,boxShadowFocus:Ve,boxShadowActive:Ge,boxShadowHover:rt,border:Se,borderFocus:ye,borderHover:Re,borderActive:St,arrowColor:kt,arrowColorDisabled:Ae,loadingColor:ut,colorActiveWarning:cr,boxShadowFocusWarning:Ne,boxShadowActiveWarning:vt,boxShadowHoverWarning:Ft,borderWarning:vr,borderFocusWarning:zr,borderHoverWarning:or,borderActiveWarning:qe,colorActiveError:st,boxShadowFocusError:Rt,boxShadowActiveError:Nt,boxShadowHoverError:sr,borderError:fn,borderFocusError:on,borderHoverError:ln,borderActiveError:Pn,clearColor:jr,clearColorHover:hr,clearColorPressed:Wr,clearSize:xr,arrowSize:dn,[Gt("height",re)]:Pr,[Gt("fontSize",re)]:Xn}}=v.value;return{"--bezier":pe,"--border":Se,"--border-active":St,"--border-focus":ye,"--border-hover":Re,"--border-radius":Je,"--box-shadow-active":Ge,"--box-shadow-focus":Ve,"--box-shadow-hover":rt,"--caret-color":Y,"--color":We,"--color-active":ge,"--color-disabled":K,"--font-size":Xn,"--height":Pr,"--padding-single":H,"--placeholder-color":Le,"--placeholder-color-disabled":J,"--text-color":$e,"--text-color-disabled":ee,"--arrow-color":kt,"--arrow-color-disabled":Ae,"--loading-color":ut,"--color-active-warning":cr,"--box-shadow-focus-warning":Ne,"--box-shadow-active-warning":vt,"--box-shadow-hover-warning":Ft,"--border-warning":vr,"--border-focus-warning":zr,"--border-hover-warning":or,"--border-active-warning":qe,"--color-active-error":st,"--box-shadow-focus-error":Rt,"--box-shadow-active-error":Nt,"--box-shadow-hover-error":sr,"--border-error":fn,"--border-focus-error":on,"--border-hover-error":ln,"--border-active-error":Pn,"--clear-size":xr,"--clear-color":jr,"--clear-color-hover":hr,"--clear-color-pressed":Wr,"--arrow-size":dn}})}},render(){const{multiple:r,size:t,disabled:e,filterable:n,maxTagCount:i,bordered:a,clsPrefix:o,renderTag:s,renderLabel:l}=this,u=i==="responsive",c=typeof i=="number",f=u||c,d=M(fq,{clsPrefix:o,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear});let h;if(r){const v=C=>M("div",{class:`${o}-base-selection-tag-wrapper`,key:C.value},s?s({option:C,handleClose:()=>this.handleDeleteOption(C)}):M(fP,{size:t,closable:!C.disabled,disabled:e,internalStopClickPropagation:!0,onClose:()=>this.handleDeleteOption(C)},{default:()=>l?l(C,!0):Hn(C.label,C,!0)})),p=(c?this.selectedOptions.slice(0,i):this.selectedOptions).map(v),g=n?M("div",{class:`${o}-base-selection-input-tag`,ref:"inputTagElRef",key:"__input-tag__"},M("input",Object.assign({},this.inputProps,{ref:"patternInputRef",tabindex:-1,disabled:e,value:this.pattern,autofocus:this.autofocus,class:`${o}-base-selection-input-tag__input`,onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),M("span",{ref:"patternInputMirrorRef",class:`${o}-base-selection-input-tag__mirror`},this.pattern?this.pattern:"")):null,m=u?()=>M("div",{class:`${o}-base-selection-tag-wrapper`,ref:"counterWrapperRef"},M(fP,{ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:e})):void 0;let y;if(c){const C=this.selectedOptions.length-i;C>0&&(y=M("div",{class:`${o}-base-selection-tag-wrapper`,key:"__counter__"},M(fP,{ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:e},{default:()=>`+${C}`})))}const b=u?n?M(QX,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:()=>p,counter:m,tail:()=>g}):M(QX,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:()=>p,counter:m}):c?p.concat(y):p,x=f?()=>M("div",{class:`${o}-base-selection-popover`},u?p:this.selectedOptions.map(v)):void 0,w=f?{show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover}:null,S=!this.selected&&!this.pattern&&!this.isCompositing?M("div",{class:`${o}-base-selection-placeholder ${o}-base-selection-overlay`},this.placeholder):null;if(n){const C=M("div",{ref:"patternInputWrapperRef",class:`${o}-base-selection-tags`},b,u?null:g,d);h=M(Fi,null,f?M(x0,Object.assign({},w),{trigger:()=>C,default:x}):C,S)}else{const C=M("div",{ref:"multipleElRef",class:`${o}-base-selection-tags`,tabindex:e?void 0:0},b,d);h=M(Fi,null,f?M(x0,Object.assign({},w),{trigger:()=>C,default:x}):C,S)}}else if(n){const v=!this.pattern&&(this.active||!this.selected)&&!this.isCompositing;h=M("div",{ref:"patternInputWrapperRef",class:`${o}-base-selection-label`},M("input",Object.assign({},this.inputProps,{ref:"patternInputRef",class:`${o}-base-selection-input`,value:this.patternInputFocused&&this.active?this.pattern:"",placeholder:"",readonly:e,disabled:e,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),v||this.patternInputFocused&&this.active?null:M("div",{class:`${o}-base-selection-label__render-label ${o}-base-selection-overlay`,key:"input"},s?s({option:this.selectedOption,handleClose:()=>{}}):l?l(this.selectedOption,!0):Hn(this.label,this.selectedOption,!0)),v?M("div",{class:`${o}-base-selection-placeholder ${o}-base-selection-overlay`,key:"placeholder"},this.filterablePlaceholder):null,d)}else h=M("div",{ref:"singleElRef",class:`${o}-base-selection-label`,tabindex:this.disabled?void 0:0},this.label!==void 0?M("div",{class:`${o}-base-selection-input`,title:u8e(this.label),key:"input"},M("div",{class:`${o}-base-selection-input__content`},s?s({option:this.selectedOption,handleClose:()=>{}}):l?l(this.selectedOption,!0):Hn(this.label,this.selectedOption,!0))):M("div",{class:`${o}-base-selection-placeholder ${o}-base-selection-overlay`,key:"placeholder"},this.placeholder),d);return M("div",{ref:"selfRef",class:[`${o}-base-selection`,{[`${o}-base-selection--active`]:this.active,[`${o}-base-selection--selected`]:this.selected||this.active&&this.pattern,[`${o}-base-selection--disabled`]:this.disabled,[`${o}-base-selection--multiple`]:this.multiple,[`${o}-base-selection--focus`]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeyup:this.onKeyup,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},h,a?M("div",{class:`${o}-base-selection__border`}):null,a?M("div",{class:`${o}-base-selection__state-border`}):null)}});const{cubicBezierEaseInOut:df}=af;function yHe({duration:r=".2s",delay:t=".1s"}={}){return[we("&.fade-in-width-expand-transition-leave-from, &.fade-in-width-expand-transition-enter-to",{opacity:1}),we("&.fade-in-width-expand-transition-leave-to, &.fade-in-width-expand-transition-enter-from",`
 opacity: 0!important;
 margin-left: 0!important;
 margin-right: 0!important;
 `),we("&.fade-in-width-expand-transition-leave-active",`
 overflow: hidden;
 transition:
 opacity ${r} ${df},
 max-width ${r} ${df} ${t},
 margin-left ${r} ${df} ${t},
 margin-right ${r} ${df} ${t};
 `),we("&.fade-in-width-expand-transition-enter-active",`
 overflow: hidden;
 transition:
 opacity ${r} ${df} ${t},
 max-width ${r} ${df},
 margin-left ${r} ${df},
 margin-right ${r} ${df};
 `)]}const{cubicBezierEaseInOut:Ql,cubicBezierEaseOut:bHe,cubicBezierEaseIn:xHe}=af;function vP({overflow:r="hidden",duration:t=".3s",originalTransition:e="",leavingDelay:n="0s",foldPadding:i=!1,enterToProps:a=void 0,leaveToProps:o=void 0,reverse:s=!1}={}){const l=s?"leave":"enter",u=s?"enter":"leave";return[we(`&.fade-in-height-expand-transition-${u}-from,
 &.fade-in-height-expand-transition-${l}-to`,Object.assign(Object.assign({},a),{opacity:1})),we(`&.fade-in-height-expand-transition-${u}-to,
 &.fade-in-height-expand-transition-${l}-from`,Object.assign(Object.assign({},o),{opacity:0,marginTop:"0 !important",marginBottom:"0 !important",paddingTop:i?"0 !important":void 0,paddingBottom:i?"0 !important":void 0})),we(`&.fade-in-height-expand-transition-${u}-active`,`
 overflow: ${r};
 transition:
 max-height ${t} ${Ql} ${n},
 opacity ${t} ${bHe} ${n},
 margin-top ${t} ${Ql} ${n},
 margin-bottom ${t} ${Ql} ${n},
 padding-top ${t} ${Ql} ${n},
 padding-bottom ${t} ${Ql} ${n}
 ${e?","+e:""}
 `),we(`&.fade-in-height-expand-transition-${l}-active`,`
 overflow: ${r};
 transition:
 max-height ${t} ${Ql},
 opacity ${t} ${xHe},
 margin-top ${t} ${Ql},
 margin-bottom ${t} ${Ql},
 padding-top ${t} ${Ql},
 padding-bottom ${t} ${Ql}
 ${e?","+e:""}
 `)]}var wHe={paddingTiny:"0 8px",paddingSmall:"0 10px",paddingMedium:"0 12px",paddingLarge:"0 14px",clearSize:"16px"};const SHe=r=>{const{textColor2:t,textColor3:e,textColorDisabled:n,primaryColor:i,primaryColorHover:a,inputColor:o,inputColorDisabled:s,borderColor:l,warningColor:u,warningColorHover:c,errorColor:f,errorColorHover:d,borderRadius:h,lineHeight:v,fontSizeTiny:p,fontSizeSmall:g,fontSizeMedium:m,fontSizeLarge:y,heightTiny:b,heightSmall:x,heightMedium:w,heightLarge:S,actionColor:C,clearColor:_,clearColorHover:T,clearColorPressed:E,placeholderColor:k,placeholderColorDisabled:I,iconColor:P,iconColorDisabled:F,iconColorHover:$,iconColorPressed:R}=r;return Object.assign(Object.assign({},wHe),{countTextColor:e,heightTiny:b,heightSmall:x,heightMedium:w,heightLarge:S,fontSizeTiny:p,fontSizeSmall:g,fontSizeMedium:m,fontSizeLarge:y,lineHeight:v,lineHeightTextarea:v,borderRadius:h,iconSize:"16px",groupLabelColor:C,groupLabelTextColor:t,textColor:t,textColorDisabled:n,textDecorationColor:t,caretColor:i,placeholderColor:k,placeholderColorDisabled:I,color:o,colorDisabled:s,colorFocus:o,groupLabelBorder:`1px solid ${l}`,border:`1px solid ${l}`,borderHover:`1px solid ${a}`,borderDisabled:`1px solid ${l}`,borderFocus:`1px solid ${a}`,boxShadowFocus:`0 0 0 2px ${qr(i,{alpha:.2})}`,loadingColor:i,loadingColorWarning:u,borderWarning:`1px solid ${u}`,borderHoverWarning:`1px solid ${c}`,colorFocusWarning:o,borderFocusWarning:`1px solid ${c}`,boxShadowFocusWarning:`0 0 0 2px ${qr(u,{alpha:.2})}`,caretColorWarning:u,loadingColorError:f,borderError:`1px solid ${f}`,borderHoverError:`1px solid ${d}`,colorFocusError:o,borderFocusError:`1px solid ${d}`,boxShadowFocusError:`0 0 0 2px ${qr(f,{alpha:.2})}`,caretColorError:f,clearColor:_,clearColorHover:T,clearColorPressed:E,iconColor:P,iconColorDisabled:F,iconColorHover:$,iconColorPressed:R,suffixTextColor:t})},CHe={name:"Input",common:Bn,self:SHe};var uC=CHe;const hq=Symbol("input");function EHe(r){let t=0;for(const e of r)t++;return t}function cC(r){return["",void 0,null].includes(r)}var vq=mt({name:"InputWordCount",setup(r,{slots:t}){const{mergedValueRef:e,maxlengthRef:n,mergedClsPrefixRef:i}=nr(hq),a=Q(()=>{const{value:o}=e;return o===null||Array.isArray(o)?0:EHe(o)});return()=>{const{value:o}=n,{value:s}=e;return M("span",{class:`${i.value}-input-word-count`},t.default?t.default({value:s===null||Array.isArray(s)?"":s}):o===void 0?a.value:`${a.value} / ${o}`)}}}),_He=we([ne("input",`
 max-width: 100%;
 cursor: text;
 line-height: 1.5;
 z-index: auto;
 outline: none;
 box-sizing: border-box;
 position: relative;
 display: inline-flex;
 border-radius: var(--border-radius);
 background-color: var(--color);
 transition: background-color .3s var(--bezier);
 font-size: var(--font-size);
 --padding-vertical: calc((var(--height) - 1.5 * var(--font-size)) / 2);
 `,[xe("input, textarea",`
 overflow: hidden;
 flex-grow: 1;
 position: relative;
 `),xe("input-el, textarea-el, input-mirror, textarea-mirror, separator, placeholder",`
 box-sizing: border-box;
 font-size: inherit;
 line-height: 1.5;
 font-family: inherit;
 border: none;
 outline: none;
 background-color: #0000;
 text-align: inherit;
 transition:
 caret-color .3s var(--bezier),
 color .3s var(--bezier),
 text-decoration-color .3s var(--bezier);
 `),xe("input-el, textarea-el",`
 -webkit-appearance: none;
 width: 100%;
 min-width: 0;
 text-decoration-color: var(--text-decoration-color);
 color: var(--text-color);
 caret-color: var(--caret-color);
 background-color: transparent;
 `,[we("&::placeholder",{color:"#0000"})]),Pe("round",[Cn("textarea",{borderRadius:"calc(var(--height) / 2)"})]),xe("placeholder",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 overflow: hidden;
 color: var(--placeholder-color);
 `,[we("span",{width:"100%",display:"inline-block"})]),Cn("autosize",{width:"100%"}),Pe("autosize",[xe("textarea-el, input-el",`
 position: absolute;
 top: 0;
 left: 0;
 height: 100%;
 `)]),ne("input-wrapper",`
 overflow: hidden;
 display: inline-flex;
 flex-grow: 1;
 position: relative;
 padding-left: var(--padding-left);
 padding-right: var(--padding-right);
 `),xe("input-mirror",`
 padding: 0;
 height: var(--height);
 overflow: hidden;
 visibility: hidden;
 position: static;
 white-space: nowrap;
 pointer-events: none;
 `),xe("input-el",`
 padding: 0;
 height: var(--height);
 line-height: var(--height);
 `,[we("+",[xe("placeholder",`
 display: flex;
 align-items: center; 
 `)])]),Cn("textarea",[xe("placeholder",{whiteSpace:"nowrap"})]),xe("eye",`
 transition: color .3s var(--bezier);
 `),Pe("textarea",{width:"100%"},[ne("input-word-count",`
 position: absolute;
 right: var(--padding-right);
 bottom: var(--padding-vertical);
 `),Pe("resizable",[ne("input-wrapper",`
 resize: vertical;
 overflow: auto;
 min-height: var(--height);
 `)]),xe("textarea-el, textarea-mirror, placeholder",`
 width: 100%;
 height: 100%;
 padding-left: 0;
 padding-right: 0;
 padding-top: var(--padding-vertical);
 padding-bottom: var(--padding-vertical);
 display: inline-block;
 vertical-align: bottom;
 box-sizing: border-box;
 line-height: var(--line-height-textarea);
 margin: 0;
 resize: none;
 `),xe("textarea-mirror",`
 pointer-events: none;
 overflow: hidden;
 visibility: hidden;
 position: static;
 white-space: pre-wrap;
 overflow-wrap: break-word;
 `)]),Pe("pair",[xe("input-el, placeholder",{textAlign:"center"}),xe("separator",`
 display: flex;
 align-items: center;
 transition: color .3s var(--bezier);
 color: var(--text-color);
 `,[ne("icon",`
 color: var(--icon-color);
 `),ne("base-icon",`
 color: var(--icon-color);
 `)])]),Pe("disabled",{cursor:"not-allowed",backgroundColor:"var(--color-disabled)"},[xe("border",{border:"var(--border-disabled)"}),xe("input-el, textarea-el",{cursor:"not-allowed",color:"var(--text-color-disabled)",textDecorationColor:"var(--text-color-disabled)"}),xe("placeholder",{color:"var(--placeholder-color-disabled)"}),xe("separator",{color:"var(--text-color-disabled)"},[ne("icon",`
 color: var(--icon-color-disabled);
 `),ne("base-icon",`
 color: var(--icon-color-disabled);
 `)]),xe("suffix, prefix",{color:"var(--text-color-disabled)"},[ne("icon",`
 color: var(--icon-color-disabled);
 `),ne("internal-icon",`
 color: var(--icon-color-disabled);
 `)])]),Cn("disabled",[xe("eye",`
 color: var(--icon-color);
 cursor: pointer;
 `,[we("&:hover",`
 color: var(--icon-color-hover);
 `),we("&:active",`
 color: var(--icon-color-pressed);
 `)]),Pe("focus",{backgroundColor:"var(--color-focus)"},[xe("state-border",{border:"var(--border-focus)",boxShadow:"var(--box-shadow-focus)"})]),we("&:hover",[xe("state-border",{border:"var(--border-hover)"})])]),xe("border, state-border",`
 box-sizing: border-box;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border-radius: inherit;
 border: var(--border);
 transition:
 box-shadow .3s var(--bezier),
 border-color .3s var(--bezier);
 `),xe("state-border",`
 border-color: #0000;
 z-index: 1;
 `),xe("prefix",{marginRight:"4px"}),xe("suffix",`
 margin-left: 4px;
 `),xe("suffix, prefix",`
 transition: color .3s var(--bezier);
 flex-wrap: nowrap;
 flex-shrink: 0;
 line-height: var(--height);
 white-space: nowrap;
 display: inline-flex;
 align-items: center;
 justify-content: center;
 color: var(--suffix-text-color);
 `,[ne("base-loading",`
 font-size: var(--icon-size);
 margin-left: 4px;
 color: var(--loading-color);
 `),ne("base-clear",`
 font-size: var(--icon-size);
 margin-left: 4px;
 `,[xe("placeholder",[ne("base-icon",`
 transition: color .3s var(--bezier);
 color: var(--icon-color);
 font-size: var(--icon-size);
 `)])]),ne("icon",`
 transition: color .3s var(--bezier);
 color: var(--icon-color);
 font-size: var(--icon-size);
 `),ne("base-icon",`
 font-size: var(--icon-size);
 `)]),ne("input-word-count",`
 pointer-events: none;
 line-height: 1.5;
 font-size: .85em;
 color: var(--count-text-color);
 transition: color .3s var(--bezier);
 margin-left: 4px;
 font-variant: tabular-nums;
 `)]),["warning","error"].map(r=>lX(r,ne("input",[Cn("disabled",[ne("base-loading",`
 color: var(--loading-color-${r})
 `),xe("input-el, textarea-el",{caretColor:`var(--caret-color-${r})`}),xe("state-border",{border:`var(--border-${r})`}),we("&:hover",[xe("state-border",`
 border: var(--border-hover-${r});
 `)]),we("&:focus",{backgroundColor:`var(--color-focus-${r})`},[xe("state-border",`
 box-shadow: var(--box-shadow-focus-${r});
 border: var(--border-focus-${r});
 `)]),Pe("focus",{backgroundColor:`var(--color-focus-${r})`},[xe("state-border",`
 box-shadow: var(--box-shadow-focus-${r});
 border: var(--border-focus-${r});
 `)])])])))]);const THe=Object.assign(Object.assign({},rr.props),{bordered:{type:Boolean,default:void 0},type:{type:String,default:"text"},placeholder:[Array,String],defaultValue:{type:[String,Array],default:null},value:[String,Array],disabled:{type:Boolean,default:void 0},size:String,rows:{type:[Number,String],default:3},round:Boolean,minlength:[String,Number],maxlength:[String,Number],clearable:Boolean,autosize:{type:[Boolean,Object],default:!1},pair:Boolean,separator:String,readonly:{type:[String,Boolean],default:!1},passivelyActivated:Boolean,showPasswordOn:String,stateful:{type:Boolean,default:!0},autofocus:Boolean,inputProps:Object,resizable:{type:Boolean,default:!0},showCount:Boolean,loading:{type:Boolean,default:void 0},onMousedown:Function,onKeydown:Function,onKeyup:Function,onInput:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClick:[Function,Array],onChange:[Function,Array],onClear:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],textDecoration:[String,Array],attrSize:{type:Number,default:20},onInputBlur:[Function,Array],onInputFocus:[Function,Array],onDeactivate:[Function,Array],onActivate:[Function,Array],onWrapperFocus:[Function,Array],onWrapperBlur:[Function,Array],internalDeactivateOnEnter:Boolean,internalForceFocus:Boolean,showPasswordToggle:Boolean});var ch=mt({name:"Input",props:THe,setup(r){const{mergedClsPrefixRef:t,mergedBorderedRef:e}=pn(r),n=rr("Input","Input",_He,uC,r,t),i=ke(null),a=ke(null),o=ke(null),s=ke(null),l=ke(null),u=ke(null),{localeRef:c}=sf("Input"),f=ke(r.defaultValue),d=Ht(r,"value"),h=ri(d,f),v=fl(r),{mergedSizeRef:p,mergedDisabledRef:g}=v,m=ke(!1),y=ke(!1),b=ke(!1),x=ke(!1);let w=null;const S=Q(()=>{const{placeholder:Ae,pair:ut}=r;return ut?Array.isArray(Ae)?Ae:Ae===void 0?["",""]:[Ae,Ae]:Ae===void 0?[c.value.placeholder]:[Ae]}),C=Q(()=>{const{value:Ae}=b,{value:ut}=h,{value:cr}=S;return!Ae&&(cC(ut)||Array.isArray(ut)&&cC(ut[0]))&&cr[0]}),_=Q(()=>{const{value:Ae}=b,{value:ut}=h,{value:cr}=S;return!Ae&&cr[1]&&(cC(ut)||Array.isArray(ut)&&cC(ut[1]))}),T=On(()=>r.internalForceFocus||m.value),E=On(()=>{if(g.value||r.readonly||!r.clearable||!T.value&&!y.value)return!1;const{value:Ae}=h,{value:ut}=T;return r.pair?!!(Array.isArray(Ae)&&(Ae[0]||Ae[1]))&&(y.value||ut):!!Ae&&(y.value||ut)}),k=Q(()=>{const{showPasswordOn:Ae}=r;if(Ae)return Ae;if(r.showPasswordToggle)return"click"}),I=ke(!1),P=Q(()=>{const{textDecoration:Ae}=r;return Ae?Array.isArray(Ae)?Ae.map(ut=>({textDecoration:ut})):[{textDecoration:Ae}]:["",""]}),F=()=>{if(r.type==="textarea"){const{autosize:Ae}=r;if(typeof Ae=="boolean"||!a.value)return;const{paddingTop:ut,paddingBottom:cr,lineHeight:Ne}=window.getComputedStyle(a.value),vt=Number(ut.slice(0,-2)),Ft=Number(cr.slice(0,-2)),vr=Number(Ne.slice(0,-2)),{value:zr}=o;if(!zr)return;if(Ae.minRows){const or=Math.max(Ae.minRows,1),qe=`${vt+Ft+vr*or}px`;zr.style.minHeight=qe}if(Ae.maxRows){const or=`${vt+Ft+vr*Ae.maxRows}px`;zr.style.maxHeight=or}}},$=Q(()=>{const{maxlength:Ae}=r;return Ae===void 0?void 0:Number(Ae)});Lo(()=>{const{value:Ae}=h;Array.isArray(Ae)||ye(Ae)});const R=fv().proxy;function L(Ae){const{onUpdateValue:ut,"onUpdate:value":cr,onInput:Ne}=r,{nTriggerFormInput:vt}=v;ut&&pt(ut,Ae),cr&&pt(cr,Ae),Ne&&pt(Ne,Ae),f.value=Ae,vt()}function O(Ae){const{onChange:ut}=r,{nTriggerFormChange:cr}=v;ut&&pt(ut,Ae),f.value=Ae,cr()}function B(Ae){const{onBlur:ut}=r,{nTriggerFormBlur:cr}=v;ut&&pt(ut,Ae),cr()}function U(Ae){const{onFocus:ut}=r,{nTriggerFormFocus:cr}=v;ut&&pt(ut,Ae),cr()}function W(Ae){const{onClear:ut}=r;ut&&pt(ut,Ae)}function X(Ae){const{onInputBlur:ut}=r;ut&&pt(ut,Ae)}function ie(Ae){const{onInputFocus:ut}=r;ut&&pt(ut,Ae)}function q(){const{onDeactivate:Ae}=r;Ae&&pt(Ae)}function j(){const{onActivate:Ae}=r;Ae&&pt(Ae)}function fe(Ae){const{onClick:ut}=r;ut&&pt(ut,Ae)}function se(Ae){const{onWrapperFocus:ut}=r;ut&&pt(ut,Ae)}function ce(Ae){const{onWrapperBlur:ut}=r;ut&&pt(ut,Ae)}function _e(){b.value=!0}function Me(Ae){b.value=!1,Ae.target===u.value?Ye(Ae,1):Ye(Ae,0)}function Ye(Ae,ut=0,cr="input"){const Ne=Ae.target.value;if(ye(Ne),w=Ne,b.value)return;const vt=Ne;if(!r.pair)cr==="input"?L(vt):O(vt);else{let{value:Ft}=h;Array.isArray(Ft)?Ft=[...Ft]:Ft=["",""],Ft[ut]=vt,cr==="input"?L(Ft):O(Ft)}R.$forceUpdate()}function De(Ae){X(Ae),Ae.relatedTarget===i.value&&q(),Ae.relatedTarget!==null&&(Ae.relatedTarget===l.value||Ae.relatedTarget===u.value||Ae.relatedTarget===a.value)||(x.value=!1),he(Ae,"blur")}function D(Ae){ie(Ae),m.value=!0,x.value=!0,j(),he(Ae,"focus")}function z(Ae){r.passivelyActivated&&(ce(Ae),he(Ae,"blur"))}function V(Ae){r.passivelyActivated&&(m.value=!0,se(Ae),he(Ae,"focus"))}function he(Ae,ut){Ae.relatedTarget!==null&&(Ae.relatedTarget===l.value||Ae.relatedTarget===u.value||Ae.relatedTarget===a.value||Ae.relatedTarget===i.value)||(ut==="focus"?(U(Ae),m.value=!0):ut==="blur"&&(B(Ae),m.value=!1))}function re(Ae,ut){Ye(Ae,ut,"change")}function pe(Ae){fe(Ae)}function Je(Ae){W(Ae),r.pair?L(["",""]):L("")}function We(Ae){const{onMousedown:ut}=r;ut&&ut(Ae);const{tagName:cr}=Ae.target;if(cr!=="INPUT"&&cr!=="TEXTAREA"){if(r.resizable){const{value:Ne}=i;if(Ne){const{left:vt,top:Ft,width:vr,height:zr}=Ne.getBoundingClientRect(),or=14;if(vt+vr-or<Ae.clientX&&Ae.clientY<vt+vr&&Ft+zr-or<Ae.clientY&&Ae.clientY<Ft+zr)return}}Ae.preventDefault(),m.value||ge()}}function Le(){y.value=!0}function $e(){y.value=!1}function H(){g.value||k.value==="click"&&(I.value=!I.value)}function Y(Ae){if(g.value)return;Ae.preventDefault();const ut=Ne=>{Ne.preventDefault(),Ei("mouseup",document,ut)};if(zi("mouseup",document,ut),k.value!=="mousedown")return;I.value=!0;const cr=()=>{I.value=!1,Ei("mouseup",document,cr)};zi("mouseup",document,cr)}function K(Ae){var ut;switch((ut=r.onKeydown)===null||ut===void 0||ut.call(r,Ae),Ae.code){case"Escape":J();break;case"Enter":case"NumpadEnter":ee(Ae);break}}function ee(Ae){var ut,cr;if(r.passivelyActivated){const{value:Ne}=x;if(Ne){r.internalDeactivateOnEnter&&J();return}Ae.preventDefault(),r.type==="textarea"?(ut=a.value)===null||ut===void 0||ut.focus():(cr=l.value)===null||cr===void 0||cr.focus()}}function J(){r.passivelyActivated&&(x.value=!1,oa(()=>{var Ae;(Ae=i.value)===null||Ae===void 0||Ae.focus()}))}function ge(){var Ae,ut,cr;g.value||(r.passivelyActivated?(Ae=i.value)===null||Ae===void 0||Ae.focus():((ut=a.value)===null||ut===void 0||ut.focus(),(cr=l.value)===null||cr===void 0||cr.focus()))}function Ve(){var Ae;((Ae=i.value)===null||Ae===void 0?void 0:Ae.contains(document.activeElement))&&document.activeElement.blur()}function Ge(){var Ae,ut;(Ae=a.value)===null||Ae===void 0||Ae.select(),(ut=l.value)===null||ut===void 0||ut.select()}function rt(){g.value||(a.value?a.value.focus():l.value&&l.value.focus())}function Se(){const{value:Ae}=i;(Ae==null?void 0:Ae.contains(document.activeElement))&&Ae!==document.activeElement&&J()}function ye(Ae){const{type:ut,pair:cr,autosize:Ne}=r;if(!cr&&Ne)if(ut==="textarea"){const{value:vt}=o;vt&&(vt.textContent=(Ae!=null?Ae:"")+`\r
`)}else{const{value:vt}=s;vt&&(Ae?vt.textContent=Ae:vt.innerHTML="&nbsp;")}}function Re(){F()}let St=null;return Co(()=>{const{autosize:Ae,type:ut}=r;Ae&&ut==="textarea"?St=nn(h,cr=>{!Array.isArray(cr)&&cr!==w&&ye(cr)}):St==null||St()}),Qr(hq,{mergedValueRef:h,maxlengthRef:$,mergedClsPrefixRef:t}),Object.assign(Object.assign({},{wrapperElRef:i,inputElRef:l,textareaElRef:a,isCompositing:b,focus:ge,blur:Ve,select:Ge,deactivate:Se,activate:rt}),{wrapperElRef:i,inputElRef:l,inputMirrorElRef:s,inputEl2Ref:u,textareaElRef:a,textareaMirrorElRef:o,uncontrolledValue:f,mergedValue:h,passwordVisible:I,mergedPlaceholder:S,showPlaceholder1:C,showPlaceholder2:_,mergedFocus:T,isComposing:b,activated:x,showClearButton:E,mergedSize:p,mergedDisabled:g,textDecorationStyle:P,mergedClsPrefix:t,mergedBordered:e,mergedShowPasswordOn:k,handleCompositionStart:_e,handleCompositionEnd:Me,handleInput:Ye,handleInputBlur:De,handleInputFocus:D,handleWrapperBlur:z,handleWrapperFocus:V,handleMouseEnter:Le,handleMouseLeave:$e,handleMouseDown:We,handleChange:re,handleClick:pe,handleClear:Je,handlePasswordToggleClick:H,handlePasswordToggleMousedown:Y,handleWrapperKeyDown:K,handleTextAreaMirrorResize:Re,mergedTheme:n,cssVars:Q(()=>{const{value:Ae}=p,{common:{cubicBezierEaseInOut:ut},self:{color:cr,borderRadius:Ne,textColor:vt,caretColor:Ft,caretColorError:vr,caretColorWarning:zr,textDecorationColor:or,border:qe,borderDisabled:st,borderHover:Rt,borderFocus:Nt,placeholderColor:sr,placeholderColorDisabled:fn,lineHeightTextarea:on,colorDisabled:ln,colorFocus:Pn,textColorDisabled:jr,boxShadowFocus:hr,iconSize:Wr,colorFocusWarning:xr,boxShadowFocusWarning:dn,borderWarning:Pr,borderFocusWarning:Xn,borderHoverWarning:ra,colorFocusError:yo,boxShadowFocusError:es,borderError:ts,borderFocusError:Do,borderHoverError:Df,clearSize:Nh,clearColor:Tg,clearColorHover:Ag,clearColorPressed:kg,iconColor:ac,iconColorDisabled:rs,suffixTextColor:oc,countTextColor:qn,iconColorHover:ja,iconColorPressed:Di,loadingColor:Ro,loadingColorError:qs,loadingColorWarning:Bh,[Gt("padding",Ae)]:$h,[Gt("fontSize",Ae)]:Rf,[Gt("height",Ae)]:zh}}=n.value,{left:Gh,right:Uh}=Sp($h);return{"--bezier":ut,"--count-text-color":qn,"--color":cr,"--font-size":Rf,"--border-radius":Ne,"--height":zh,"--padding-left":Gh,"--padding-right":Uh,"--text-color":vt,"--caret-color":Ft,"--text-decoration-color":or,"--border":qe,"--border-disabled":st,"--border-hover":Rt,"--border-focus":Nt,"--placeholder-color":sr,"--placeholder-color-disabled":fn,"--icon-size":Wr,"--line-height-textarea":on,"--color-disabled":ln,"--color-focus":Pn,"--text-color-disabled":jr,"--box-shadow-focus":hr,"--loading-color":Ro,"--caret-color-warning":zr,"--color-focus-warning":xr,"--box-shadow-focus-warning":dn,"--border-warning":Pr,"--border-focus-warning":Xn,"--border-hover-warning":ra,"--loading-color-warning":Bh,"--caret-color-error":vr,"--color-focus-error":yo,"--box-shadow-focus-error":es,"--border-error":ts,"--border-focus-error":Do,"--border-hover-error":Df,"--loading-color-error":qs,"--clear-color":Tg,"--clear-size":Nh,"--clear-color-hover":Ag,"--clear-color-pressed":kg,"--icon-color":ac,"--icon-color-hover":ja,"--icon-color-pressed":Di,"--icon-color-disabled":rs,"--suffix-text-color":oc}})})},render(){const{mergedClsPrefix:r}=this;return M("div",{ref:"wrapperElRef",class:[`${r}-input`,{[`${r}-input--disabled`]:this.mergedDisabled,[`${r}-input--textarea`]:this.type==="textarea",[`${r}-input--resizable`]:this.resizable&&!this.autosize,[`${r}-input--autosize`]:this.autosize,[`${r}-input--round`]:this.round&&this.type!=="textarea",[`${r}-input--pair`]:this.pair,[`${r}-input--focus`]:this.mergedFocus,[`${r}-input--stateful`]:this.stateful}],style:this.cssVars,tabindex:!this.mergedDisabled&&this.passivelyActivated&&!this.activated?0:void 0,onFocus:this.handleWrapperFocus,onBlur:this.handleWrapperBlur,onClick:this.handleClick,onMousedown:this.handleMouseDown,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd,onKeyup:this.onKeyup,onKeydown:this.handleWrapperKeyDown},M("div",{class:`${r}-input-wrapper`},this.$slots.affix||this.$slots.prefix?M("div",{class:`${r}-input__prefix`},Jr(this.$slots,"affix",void 0,()=>[Jr(this.$slots,"prefix")])):null,this.type==="textarea"?M("div",{class:`${r}-input__textarea`},M("textarea",Object.assign({},this.inputProps,{ref:"textareaElRef",class:`${r}-input__textarea-el`,autofocus:this.autofocus,rows:Number(this.rows),placeholder:this.placeholder,value:this.mergedValue,disabled:this.mergedDisabled,maxlength:this.maxlength,minlength:this.minlength,readonly:this.readonly,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,style:this.textDecorationStyle[0],onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,onInput:this.handleInput,onChange:this.handleChange})),this.showPlaceholder1?M("div",{class:`${r}-input__placeholder`,key:"placeholder"},this.mergedPlaceholder[0]):null,this.autosize?M(y0,{onResize:this.handleTextAreaMirrorResize},{default:()=>M("div",{ref:"textareaMirrorElRef",class:`${r}-input__textarea-mirror`,key:"mirror"})}):null):M("div",{class:`${r}-input__input`},M("input",Object.assign({type:this.type==="password"&&this.mergedShowPasswordOn&&this.passwordVisible?"text":this.type},this.inputProps,{ref:"inputElRef",class:`${r}-input__input-el`,style:this.textDecorationStyle[0],tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[0],disabled:this.mergedDisabled,maxlength:this.maxlength,minlength:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[0]:this.mergedValue,readonly:this.readonly,autofocus:this.autofocus,size:this.attrSize,onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,onInput:t=>this.handleInput(t,0),onChange:t=>this.handleChange(t,0)})),this.showPlaceholder1?M("div",{class:`${r}-input__placeholder`},M("span",null,this.mergedPlaceholder[0])):null,this.autosize?M("div",{class:`${r}-input__input-mirror`,key:"mirror",ref:"inputMirrorElRef"},"\xA0"):null),!this.pair&&(this.$slots.suffix||this.clearable||this.showCount||this.mergedShowPasswordOn||this.loading!==void 0)?M("div",{class:`${r}-input__suffix`},[this.clearable||this.$slots.clear?M(dP,{clsPrefix:r,show:this.showClearButton,onClear:this.handleClear},{default:()=>Jr(this.$slots,"clear")}):null,Jr(this.$slots,"suffix"),this.loading!==void 0?M(fq,{clsPrefix:r,loading:this.loading,showArrow:!1,showClear:!1,style:this.cssVars}):null,this.showCount&&this.type!=="textarea"?M(vq,null,{default:this.$slots.count}):null,this.mergedShowPasswordOn&&this.type==="password"?M(si,{clsPrefix:r,class:`${r}-input__eye`,onMousedown:this.handlePasswordToggleMousedown,onClick:this.handlePasswordToggleClick},{default:()=>this.passwordVisible?M(sUe,null):M(lUe,null)}):null]):null),this.pair?M("span",{class:`${r}-input__separator`},Jr(this.$slots,"separator",void 0,()=>[this.separator])):null,this.pair?M("div",{class:`${r}-input-wrapper`},M("div",{class:`${r}-input__input`},M("input",{ref:"inputEl2Ref",type:this.type,class:`${r}-input__input-el`,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[1],disabled:this.mergedDisabled,maxlength:this.maxlength,minlength:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[1]:void 0,readonly:this.readonly,style:this.textDecorationStyle[1],onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,onInput:t=>this.handleInput(t,1),onChange:t=>this.handleChange(t,1)}),this.showPlaceholder2?M("div",{class:`${r}-input__placeholder`},M("span",null,this.mergedPlaceholder[1])):null),M("div",{class:`${r}-input__suffix`},[this.clearable||this.$slots.clear?M(dP,{clsPrefix:r,show:this.showClearButton,onClear:this.handleClear},{default:()=>Jr(this.$slots,"clear")}):null,Jr(this.$slots,"suffix")])):null,this.mergedBordered?M("div",{class:`${r}-input__border`}):null,this.mergedBordered?M("div",{class:`${r}-input__state-border`}):null,this.showCount&&this.type==="textarea"?M(vq,null,{default:this.$slots.count}):null)}});function AHe(r){return fC(r)?r.name||r.key||"key-required":r.value}function fC(r){return r.type==="group"}function pq(r){return r.type==="ignored"}const kHe={getKey:AHe,getIsGroup:fC,getIgnored:pq};function gq(r,t){try{return!!(1+t.toString().toLowerCase().indexOf(r.trim().toLowerCase()))}catch{return!1}}function MHe(r,t,e){if(!t)return r;function n(i){if(!Array.isArray(i))return[];const a=[];for(const o of i)if(fC(o)){const s=n(o.children);s.length&&a.push(Object.assign({},o,{children:s}))}else{if(pq(o))continue;t(e,o)&&a.push(o)}return a}return n(r)}function IHe(r){const t=new Map;return r.forEach(e=>{fC(e)?e.children.forEach(n=>{t.set(n.value,n)}):t.set(e.value,e)}),t}function PHe(r,t){return t?typeof t.label=="string"?gq(r,t.label):t.value!==void 0?gq(r,String(t.value)):!1:!1}function fh(r){return Si(r,[255,255,255,.16])}function dC(r){return Si(r,[0,0,0,.12])}var DHe={paddingTiny:"0 6px",paddingSmall:"0 10px",paddingMedium:"0 14px",paddingLarge:"0 18px",paddingRoundTiny:"0 10px",paddingRoundSmall:"0 14px",paddingRoundMedium:"0 18px",paddingRoundLarge:"0 22px",iconMarginTiny:"6px",iconMarginSmall:"6px",iconMarginMedium:"6px",iconMarginLarge:"6px",iconSizeTiny:"14px",iconSizeSmall:"18px",iconSizeMedium:"18px",iconSizeLarge:"20px",rippleDuration:".6s"};const RHe=r=>{const{heightTiny:t,heightSmall:e,heightMedium:n,heightLarge:i,borderRadius:a,fontSizeTiny:o,fontSizeSmall:s,fontSizeMedium:l,fontSizeLarge:u,opacityDisabled:c,textColor2:f,textColor3:d,primaryColorHover:h,primaryColorPressed:v,borderColor:p,primaryColor:g,baseColor:m,infoColor:y,infoColorHover:b,infoColorPressed:x,successColor:w,successColorHover:S,successColorPressed:C,warningColor:_,warningColorHover:T,warningColorPressed:E,errorColor:k,errorColorHover:I,errorColorPressed:P,fontWeight:F,buttonColor2:$,buttonColor2Hover:R,buttonColor2Pressed:L,fontWeightStrong:O}=r;return Object.assign(Object.assign({},DHe),{heightTiny:t,heightSmall:e,heightMedium:n,heightLarge:i,borderRadiusTiny:a,borderRadiusSmall:a,borderRadiusMedium:a,borderRadiusLarge:a,fontSizeTiny:o,fontSizeSmall:s,fontSizeMedium:l,fontSizeLarge:u,opacityDisabled:c,colorOpacitySecondary:"0.16",colorOpacitySecondaryHover:"0.2",colorOpacitySecondaryPressed:"0.24",colorSecondary:$,colorSecondaryHover:R,colorSecondaryPressed:L,colorTertiary:$,colorTertiaryHover:R,colorTertiaryPressed:L,colorQuaternary:"#0000",colorQuaternaryHover:R,colorQuaternaryPressed:L,color:"#0000",colorHover:"#0000",colorPressed:"#0000",colorFocus:"#0000",colorDisabled:"#0000",textColor:f,textColorTertiary:d,textColorHover:h,textColorPressed:v,textColorFocus:h,textColorDisabled:f,textColorText:f,textColorTextHover:h,textColorTextPressed:v,textColorTextFocus:h,textColorTextDisabled:f,textColorGhost:f,textColorGhostHover:h,textColorGhostPressed:v,textColorGhostFocus:h,textColorGhostDisabled:f,border:`1px solid ${p}`,borderHover:`1px solid ${h}`,borderPressed:`1px solid ${v}`,borderFocus:`1px solid ${h}`,borderDisabled:`1px solid ${p}`,rippleColor:g,colorPrimary:g,colorHoverPrimary:h,colorPressedPrimary:v,colorFocusPrimary:h,colorDisabledPrimary:g,textColorPrimary:m,textColorHoverPrimary:m,textColorPressedPrimary:m,textColorFocusPrimary:m,textColorDisabledPrimary:m,textColorTextPrimary:g,textColorTextHoverPrimary:h,textColorTextPressedPrimary:v,textColorTextFocusPrimary:h,textColorTextDisabledPrimary:f,textColorGhostPrimary:g,textColorGhostHoverPrimary:h,textColorGhostPressedPrimary:v,textColorGhostFocusPrimary:h,textColorGhostDisabledPrimary:g,borderPrimary:`1px solid ${g}`,borderHoverPrimary:`1px solid ${h}`,borderPressedPrimary:`1px solid ${v}`,borderFocusPrimary:`1px solid ${h}`,borderDisabledPrimary:`1px solid ${g}`,rippleColorPrimary:g,colorInfo:y,colorHoverInfo:b,colorPressedInfo:x,colorFocusInfo:b,colorDisabledInfo:y,textColorInfo:m,textColorHoverInfo:m,textColorPressedInfo:m,textColorFocusInfo:m,textColorDisabledInfo:m,textColorTextInfo:y,textColorTextHoverInfo:b,textColorTextPressedInfo:x,textColorTextFocusInfo:b,textColorTextDisabledInfo:f,textColorGhostInfo:y,textColorGhostHoverInfo:b,textColorGhostPressedInfo:x,textColorGhostFocusInfo:b,textColorGhostDisabledInfo:y,borderInfo:`1px solid ${y}`,borderHoverInfo:`1px solid ${b}`,borderPressedInfo:`1px solid ${x}`,borderFocusInfo:`1px solid ${b}`,borderDisabledInfo:`1px solid ${y}`,rippleColorInfo:y,colorSuccess:w,colorHoverSuccess:S,colorPressedSuccess:C,colorFocusSuccess:S,colorDisabledSuccess:w,textColorSuccess:m,textColorHoverSuccess:m,textColorPressedSuccess:m,textColorFocusSuccess:m,textColorDisabledSuccess:m,textColorTextSuccess:w,textColorTextHoverSuccess:S,textColorTextPressedSuccess:C,textColorTextFocusSuccess:S,textColorTextDisabledSuccess:f,textColorGhostSuccess:w,textColorGhostHoverSuccess:S,textColorGhostPressedSuccess:C,textColorGhostFocusSuccess:S,textColorGhostDisabledSuccess:w,borderSuccess:`1px solid ${w}`,borderHoverSuccess:`1px solid ${S}`,borderPressedSuccess:`1px solid ${C}`,borderFocusSuccess:`1px solid ${S}`,borderDisabledSuccess:`1px solid ${w}`,rippleColorSuccess:w,colorWarning:_,colorHoverWarning:T,colorPressedWarning:E,colorFocusWarning:T,colorDisabledWarning:_,textColorWarning:m,textColorHoverWarning:m,textColorPressedWarning:m,textColorFocusWarning:m,textColorDisabledWarning:m,textColorTextWarning:_,textColorTextHoverWarning:T,textColorTextPressedWarning:E,textColorTextFocusWarning:T,textColorTextDisabledWarning:f,textColorGhostWarning:_,textColorGhostHoverWarning:T,textColorGhostPressedWarning:E,textColorGhostFocusWarning:T,textColorGhostDisabledWarning:_,borderWarning:`1px solid ${_}`,borderHoverWarning:`1px solid ${T}`,borderPressedWarning:`1px solid ${E}`,borderFocusWarning:`1px solid ${T}`,borderDisabledWarning:`1px solid ${_}`,rippleColorWarning:_,colorError:k,colorHoverError:I,colorPressedError:P,colorFocusError:I,colorDisabledError:k,textColorError:m,textColorHoverError:m,textColorPressedError:m,textColorFocusError:m,textColorDisabledError:m,textColorTextError:k,textColorTextHoverError:I,textColorTextPressedError:P,textColorTextFocusError:I,textColorTextDisabledError:f,textColorGhostError:k,textColorGhostHoverError:I,textColorGhostPressedError:P,textColorGhostFocusError:I,textColorGhostDisabledError:k,borderError:`1px solid ${k}`,borderHoverError:`1px solid ${I}`,borderPressedError:`1px solid ${P}`,borderFocusError:`1px solid ${I}`,borderDisabledError:`1px solid ${k}`,rippleColorError:k,waveOpacity:"0.6",fontWeight:F,fontWeightStrong:O})},OHe={name:"Button",common:Bn,self:RHe};var w0=OHe;const Gi="0!important",mq="-1px!important";function Gp(r){return Pe(r+"-type",[we("& +",[ne("button",{},[Pe(r+"-type",[xe("border",{borderLeftWidth:Gi}),xe("state-border",{left:mq})])])])])}function Up(r){return Pe(r+"-type",[we("& +",[ne("button",[Pe(r+"-type",[xe("border",{borderTopWidth:Gi}),xe("state-border",{top:mq})])])])])}var LHe=ne("button-group",`
 flex-wrap: nowrap;
 display: inline-flex;
 position: relative;
`,[Cn("vertical",{flexDirection:"row"},[ne("button",[we("&:first-child:not(:last-child)",`
 margin-right: ${Gi};
 border-top-right-radius: ${Gi};
 border-bottom-right-radius: ${Gi};
 `),we("&:last-child:not(:first-child)",`
 margin-left: ${Gi};
 border-top-left-radius: ${Gi};
 border-bottom-left-radius: ${Gi};
 `),we("&:not(:first-child):not(:last-child)",`
 margin-left: ${Gi};
 margin-right: ${Gi};
 border-radius: ${Gi};
 `),Gp("default"),Pe("ghost",[Gp("primary"),Gp("info"),Gp("success"),Gp("warning"),Gp("error")])])]),Pe("vertical",{flexDirection:"column"},[ne("button",[we("&:first-child:not(:last-child)",`
 margin-bottom: ${Gi};
 margin-left: ${Gi};
 margin-right: ${Gi};
 border-bottom-left-radius: ${Gi};
 border-bottom-right-radius: ${Gi};
 `),we("&:last-child:not(:first-child)",`
 margin-top: ${Gi};
 margin-left: ${Gi};
 margin-right: ${Gi};
 border-top-left-radius: ${Gi};
 border-top-right-radius: ${Gi};
 `),we("&:not(:first-child):not(:last-child)",`
 margin: ${Gi};
 border-radius: ${Gi};
 `),Up("default"),Pe("ghost",[Up("primary"),Up("info"),Up("success"),Up("warning"),Up("error")])])])]);const yq=Symbol("button-group"),FHe={size:{type:String,default:void 0},vertical:Boolean};mt({name:"ButtonGroup",props:FHe,setup(r){const{mergedClsPrefixRef:t}=pn(r);return Op("ButtonGroup",LHe,t),Qr(yq,r),{mergedClsPrefix:t}},render(){const{mergedClsPrefix:r}=this;return M("div",{class:[`${r}-button-group`,this.vertical&&`${r}-button-group--vertical`],role:"group"},this.$slots)}});var NHe=we([ne("button",`
 font-weight: var(--font-weight);
 line-height: 1;
 font-family: inherit;
 padding: var(--padding);
 height: var(--height);
 font-size: var(--font-size);
 border-radius: var(--border-radius);
 color: var(--text-color);
 background-color: var(--color);
 width: var(--width);
 white-space: nowrap;
 outline: none;
 position: relative;
 z-index: auto;
 border: none;
 display: inline-flex;
 flex-wrap: nowrap;
 flex-shrink: 0;
 align-items: center;
 justify-content: center;
 user-select: none;
 text-align: center;
 cursor: pointer;
 text-decoration: none;
 transition:
 color .3s var(--bezier),
 background-color .3s var(--bezier),
 opacity .3s var(--bezier),
 border-color .3s var(--bezier);
 `,[Pe("color",[xe("border",{borderColor:"var(--border-color)"}),Pe("disabled",[xe("border",{borderColor:"var(--border-color-disabled)"})]),Cn("disabled",[we("&:focus",[xe("state-border",{borderColor:"var(--border-color-focus)"})]),we("&:hover",[xe("state-border",{borderColor:"var(--border-color-hover)"})]),we("&:active",[xe("state-border",{borderColor:"var(--border-color-pressed)"})]),Pe("pressed",[xe("state-border",{borderColor:"var(--border-color-pressed)"})])])]),Pe("disabled",{backgroundColor:"var(--color-disabled)",color:"var(--text-color-disabled)"},[xe("border",{border:"var(--border-disabled)"})]),Cn("disabled",[we("&:focus",{backgroundColor:"var(--color-focus)",color:"var(--text-color-focus)"},[xe("state-border",{border:"var(--border-focus)"})]),we("&:hover",{backgroundColor:"var(--color-hover)",color:"var(--text-color-hover)"},[xe("state-border",{border:"var(--border-hover)"})]),we("&:active",{backgroundColor:"var(--color-pressed)",color:"var(--text-color-pressed)"},[xe("state-border",{border:"var(--border-pressed)"})]),Pe("pressed",{backgroundColor:"var(--color-pressed)",color:"var(--text-color-pressed)"},[xe("state-border",{border:"var(--border-pressed)"})])]),ne("base-wave",`
 pointer-events: none;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 animation-iteration-count: 1;
 animation-duration: var(--ripple-duration);
 animation-timing-function: var(--bezier-ease-out), var(--bezier-ease-out);
 `,[Pe("active",{zIndex:1,animationName:"button-wave-spread, button-wave-opacity"})]),typeof window!="undefined"&&"MozBoxSizing"in document.createElement("div").style?we("&::moz-focus-inner",{border:0}):null,xe("border, state-border",`
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 border-radius: inherit;
 transition: border-color .3s var(--bezier);
 pointer-events: none;
 `),xe("border",{border:"var(--border)"}),xe("state-border",{border:"var(--border)",borderColor:"#0000",zIndex:1}),xe("icon",`
 margin: var(--icon-margin);
 margin-left: 0;
 height: var(--icon-size);
 width: var(--icon-size);
 max-width: var(--icon-size);
 font-size: var(--icon-size);
 position: relative;
 flex-shrink: 0;
 `,[ne("icon-slot",`
 height: var(--icon-size);
 width: var(--icon-size);
 position: absolute;
 left: 0;
 top: 50%;
 transform: translateY(-50%);
 display: flex;
 `,[oh({top:"50%",originalTransform:"translateY(-50%)"})]),yHe()]),xe("content",`
 display: flex;
 align-items: center;
 flex-wrap: nowrap;
 `,[we("~",[xe("icon",{margin:"var(--icon-margin)",marginRight:0})])]),Pe("block",`
 display: flex;
 width: 100%;
 `),Pe("dashed",[xe("border, state-border",{borderStyle:"dashed !important"})]),Pe("disabled",{cursor:"not-allowed",opacity:"var(--opacity-disabled)"})]),we("@keyframes button-wave-spread",{from:{boxShadow:"0 0 0.5px 0 var(--ripple-color)"},to:{boxShadow:"0 0 0.5px 4.5px var(--ripple-color)"}}),we("@keyframes button-wave-opacity",{from:{opacity:"var(--wave-opacity)"},to:{opacity:0}})]);const BHe=Object.assign(Object.assign({},rr.props),{color:String,textColor:String,text:Boolean,block:Boolean,loading:Boolean,disabled:Boolean,circle:Boolean,size:String,ghost:Boolean,round:Boolean,secondary:Boolean,tertiary:Boolean,quaternary:Boolean,strong:Boolean,focusable:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},tag:{type:String,default:"button"},type:{type:String,default:"default"},dashed:Boolean,iconPlacement:{type:String,default:"left"},attrType:{type:String,default:"button"},onClick:[Function,Array],bordered:{type:Boolean,default:!0}}),bq=mt({name:"Button",props:BHe,setup(r){const t=ke(null),e=ke(null),n=ke(!1),i=On(()=>!r.quaternary&&!r.tertiary&&!r.secondary&&!r.text&&(!r.color||r.ghost||r.dashed)&&r.bordered),a=nr(yq,{}),{mergedSizeRef:o}=fl({},{defaultSize:"medium",mergedSize:m=>{const{size:y}=r;if(y)return y;const{size:b}=a;if(b)return b;const{mergedSize:x}=m||{};return x?x.value:"medium"}}),s=Q(()=>r.focusable&&!r.disabled),l=m=>{var y;m.preventDefault(),!r.disabled&&s.value&&((y=t.value)===null||y===void 0||y.focus({preventScroll:!0}))},u=m=>{if(!r.disabled){const{onClick:y}=r;if(y&&pt(y,m),!r.text){const{value:b}=e;b&&b.play()}}},c=m=>{switch(m.code){case"Enter":case"NumpadEnter":if(!r.keyboard)return;n.value=!1}},f=m=>{switch(m.code){case"Enter":case"NumpadEnter":if(!r.keyboard){m.preventDefault();return}n.value=!0}},d=()=>{n.value=!1},{mergedClsPrefixRef:h,NConfigProvider:v}=pn(r),p=rr("Button","Button",NHe,w0,r,h),g=cP("Button",v==null?void 0:v.mergedRtlRef,h);return{selfRef:t,waveRef:e,mergedClsPrefix:h,mergedFocusable:s,mergedSize:o,showBorder:i,enterPressed:n,rtlEnabled:g,handleMousedown:l,handleKeydown:f,handleBlur:d,handleKeyup:c,handleClick:u,customColorCssVars:Q(()=>{const{color:m}=r;if(!m)return null;const y=fh(m);return{"--border-color":m,"--border-color-hover":y,"--border-color-pressed":dC(m),"--border-color-focus":y,"--border-color-disabled":m}}),cssVars:Q(()=>{const m=p.value,{common:{cubicBezierEaseInOut:y,cubicBezierEaseOut:b},self:x}=m,{rippleDuration:w,opacityDisabled:S,fontWeight:C,fontWeightStrong:_}=x,T=o.value,{dashed:E,type:k,ghost:I,text:P,color:F,round:$,circle:R,textColor:L,secondary:O,tertiary:B,quaternary:U,strong:W}=r,X={fontWeight:W?_:C};let ie={"--color":"initial","--color-hover":"initial","--color-pressed":"initial","--color-focus":"initial","--color-disabled":"initial","--ripple-color":"initial","--text-color":"initial","--text-color-hover":"initial","--text-color-pressed":"initial","--text-color-focus":"initial","--text-color-disabled":"initial"};const q=k==="tertiary",j=k==="default",fe=q?"default":k;if(P){const re=L||F,pe=re||x[Gt("textColorText",fe)];ie={"--color":"#0000","--color-hover":"#0000","--color-pressed":"#0000","--color-focus":"#0000","--color-disabled":"#0000","--ripple-color":"#0000","--text-color":pe,"--text-color-hover":re?fh(re):x[Gt("textColorTextHover",fe)],"--text-color-pressed":re?dC(re):x[Gt("textColorTextPressed",fe)],"--text-color-focus":re?fh(re):x[Gt("textColorTextHover",fe)],"--text-color-disabled":re||x[Gt("textColorTextDisabled",fe)]}}else if(I||E){const re=L||F;ie={"--color":"#0000","--color-hover":"#0000","--color-pressed":"#0000","--color-focus":"#0000","--color-disabled":"#0000","--ripple-color":F||x[Gt("rippleColor",fe)],"--text-color":re||x[Gt("textColorGhost",fe)],"--text-color-hover":re?fh(re):x[Gt("textColorGhostHover",fe)],"--text-color-pressed":re?dC(re):x[Gt("textColorGhostPressed",fe)],"--text-color-focus":re?fh(re):x[Gt("textColorGhostHover",fe)],"--text-color-disabled":re||x[Gt("textColorGhostDisabled",fe)]}}else if(O){const re=j?x.textColor:q?x.textColorTertiary:x[Gt("color",fe)],pe=F||re,Je=k!=="default"&&k!=="tertiary";ie={"--color":Je?qr(pe,{alpha:Number(x.colorOpacitySecondary)}):x.colorSecondary,"--color-hover":Je?qr(pe,{alpha:Number(x.colorOpacitySecondaryHover)}):x.colorSecondaryHover,"--color-pressed":Je?qr(pe,{alpha:Number(x.colorOpacitySecondaryPressed)}):x.colorSecondaryPressed,"--color-focus":Je?qr(pe,{alpha:Number(x.colorOpacitySecondaryHover)}):x.colorSecondaryHover,"--color-disabled":x.colorSecondary,"--ripple-color":"#0000","--text-color":pe,"--text-color-hover":pe,"--text-color-pressed":pe,"--text-color-focus":pe,"--text-color-disabled":pe}}else if(B||U){const re=j?x.textColor:q?x.textColorTertiary:x[Gt("color",fe)],pe=F||re;B?(ie["--color"]=x.colorTertiary,ie["--color-hover"]=x.colorTertiaryHover,ie["--color-pressed"]=x.colorTertiaryPressed,ie["--color-focus"]=x.colorSecondaryHover,ie["--color-disabled"]=x.colorTertiary):(ie["--color"]=x.colorQuaternary,ie["--color-hover"]=x.colorQuaternaryHover,ie["--color-pressed"]=x.colorQuaternaryPressed,ie["--color-focus"]=x.colorQuaternaryHover,ie["--color-disabled"]=x.colorQuaternary),ie["--ripple-color"]="#0000",ie["--text-color"]=pe,ie["--text-color-hover"]=pe,ie["--text-color-pressed"]=pe,ie["--text-color-focus"]=pe,ie["--text-color-disabled"]=pe}else ie={"--color":F||x[Gt("color",fe)],"--color-hover":F?fh(F):x[Gt("colorHover",fe)],"--color-pressed":F?dC(F):x[Gt("colorPressed",fe)],"--color-focus":F?fh(F):x[Gt("colorFocus",fe)],"--color-disabled":F||x[Gt("colorDisabled",fe)],"--ripple-color":F||x[Gt("rippleColor",fe)],"--text-color":L||(F?x.textColorPrimary:q?x.textColorTertiary:x[Gt("textColor",fe)]),"--text-color-hover":L||(F?x.textColorHoverPrimary:x[Gt("textColorHover",fe)]),"--text-color-pressed":L||(F?x.textColorPressedPrimary:x[Gt("textColorPressed",fe)]),"--text-color-focus":L||(F?x.textColorFocusPrimary:x[Gt("textColorFocus",fe)]),"--text-color-disabled":L||(F?x.textColorDisabledPrimary:x[Gt("textColorDisabled",fe)])};let se={"--border":"initial","--border-hover":"initial","--border-pressed":"initial","--border-focus":"initial","--border-disabled":"initial"};P?se={"--border":"none","--border-hover":"none","--border-pressed":"none","--border-focus":"none","--border-disabled":"none"}:se={"--border":x[Gt("border",fe)],"--border-hover":x[Gt("borderHover",fe)],"--border-pressed":x[Gt("borderPressed",fe)],"--border-focus":x[Gt("borderFocus",fe)],"--border-disabled":x[Gt("borderDisabled",fe)]};const{[Gt("height",T)]:ce,[Gt("fontSize",T)]:_e,[Gt("padding",T)]:Me,[Gt("paddingRound",T)]:Ye,[Gt("iconSize",T)]:De,[Gt("borderRadius",T)]:D,[Gt("iconMargin",T)]:z,waveOpacity:V}=x,he={"--width":R&&!P?ce:"initial","--height":P?"initial":ce,"--font-size":_e,"--padding":R||P?"initial":$?Ye:Me,"--icon-size":De,"--icon-margin":z,"--border-radius":P?"initial":R||$?ce:D};return Object.assign(Object.assign(Object.assign(Object.assign({"--bezier":y,"--bezier-ease-out":b,"--ripple-duration":w,"--opacity-disabled":S,"--wave-opacity":V},X),ie),se),he)})}},render(){const{$slots:r,mergedClsPrefix:t,tag:e}=this;return M(e,{ref:"selfRef",class:[`${t}-button`,`${t}-button--${this.type}-type`,`${t}-button--${this.mergedSize}-type`,this.rtlEnabled&&`${t}-button--rtl`,this.disabled&&`${t}-button--disabled`,this.block&&`${t}-button--block`,this.enterPressed&&`${t}-button--pressed`,!this.text&&this.dashed&&`${t}-button--dashed`,this.color&&`${t}-button--color`,this.secondary&&`${t}-button--secondary`,this.ghost&&`${t}-button--ghost`],tabindex:this.mergedFocusable?0:-1,type:this.attrType,style:this.cssVars,disabled:this.disabled,onClick:this.handleClick,onBlur:this.handleBlur,onMousedown:this.handleMousedown,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},r.default&&this.iconPlacement==="right"?M("div",{class:`${t}-button__content`},r):null,M(YI,{width:!0},{default:()=>r.icon||this.loading?M("span",{class:`${t}-button__icon`,style:{margin:r.default?"":0}},M(m0,null,{default:()=>this.loading?M(sh,{clsPrefix:t,key:"loading",class:`${t}-icon-slot`,strokeWidth:20}):M("div",{key:"icon",class:`${t}-icon-slot`,role:"none"},Jr(r,"icon"))})):null}),r.default&&this.iconPlacement==="left"?M("span",{class:`${t}-button__content`},r):null,this.text?null:M(XVe,{ref:"waveRef",clsPrefix:t}),this.showBorder?M("div",{"aria-hidden":!0,class:`${t}-button__border`,style:this.customColorCssVars}):null,this.showBorder?M("div",{"aria-hidden":!0,class:`${t}-button__state-border`,style:this.customColorCssVars}):null)}});var Va=bq;const S0=bq;function hC(r,t){Kr(2,arguments);var e=cn(r),n=Ln(t);return isNaN(n)?new Date(NaN):(n&&e.setDate(e.getDate()+n),e)}function mo(r,t){Kr(2,arguments);var e=cn(r),n=Ln(t);if(isNaN(n))return new Date(NaN);if(!n)return e;var i=e.getDate(),a=new Date(e.getTime());a.setMonth(e.getMonth()+n+1,0);var o=a.getDate();return i>=o?a:(e.setFullYear(a.getFullYear(),a.getMonth(),i),e)}function $He(r,t){Kr(2,arguments);var e=cn(r).getTime(),n=Ln(t);return new Date(e+n)}function xq(r){var t=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return t.setUTCFullYear(r.getFullYear()),r.getTime()-t.getTime()}function vC(r){Kr(1,arguments);var t=cn(r);return t.setHours(0,0,0,0),t}function pP(r,t){Kr(2,arguments);var e=Ln(t);return mo(r,e*12)}function zHe(r,t){Kr(2,arguments);var e=vC(r),n=vC(t);return e.getTime()===n.getTime()}function GHe(r){return Kr(1,arguments),r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Hs(r){if(Kr(1,arguments),!GHe(r)&&typeof r!="number")return!1;var t=cn(r);return!isNaN(Number(t))}function UHe(r){Kr(1,arguments);var t=cn(r);return t.setSeconds(0,0),t}function hf(r){Kr(1,arguments);var t=cn(r);return t.setDate(1),t.setHours(0,0,0,0),t}function wq(r){Kr(1,arguments);var t=cn(r),e=new Date(0);return e.setFullYear(t.getFullYear(),0,1),e.setHours(0,0,0,0),e}function Sq(r,t){Kr(2,arguments);var e=Ln(t);return $He(r,-e)}function ni(r,t){for(var e=r<0?"-":"",n=Math.abs(r).toString();n.length<t;)n="0"+n;return e+n}var VHe={y:function(r,t){var e=r.getUTCFullYear(),n=e>0?e:1-e;return ni(t==="yy"?n%100:n,t.length)},M:function(r,t){var e=r.getUTCMonth();return t==="M"?String(e+1):ni(e+1,2)},d:function(r,t){return ni(r.getUTCDate(),t.length)},a:function(r,t){var e=r.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h:function(r,t){return ni(r.getUTCHours()%12||12,t.length)},H:function(r,t){return ni(r.getUTCHours(),t.length)},m:function(r,t){return ni(r.getUTCMinutes(),t.length)},s:function(r,t){return ni(r.getUTCSeconds(),t.length)},S:function(r,t){var e=t.length,n=r.getUTCMilliseconds(),i=Math.floor(n*Math.pow(10,e-3));return ni(i,t.length)}},vf=VHe,HHe=864e5;function WHe(r){Kr(1,arguments);var t=cn(r),e=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=t.getTime(),i=e-n;return Math.floor(i/HHe)+1}function Vp(r){Kr(1,arguments);var t=1,e=cn(r),n=e.getUTCDay(),i=(n<t?7:0)+n-t;return e.setUTCDate(e.getUTCDate()-i),e.setUTCHours(0,0,0,0),e}function Cq(r){Kr(1,arguments);var t=cn(r),e=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(e+1,0,4),n.setUTCHours(0,0,0,0);var i=Vp(n),a=new Date(0);a.setUTCFullYear(e,0,4),a.setUTCHours(0,0,0,0);var o=Vp(a);return t.getTime()>=i.getTime()?e+1:t.getTime()>=o.getTime()?e:e-1}function jHe(r){Kr(1,arguments);var t=Cq(r),e=new Date(0);e.setUTCFullYear(t,0,4),e.setUTCHours(0,0,0,0);var n=Vp(e);return n}var YHe=6048e5;function Eq(r){Kr(1,arguments);var t=cn(r),e=Vp(t).getTime()-jHe(t).getTime();return Math.round(e/YHe)+1}function gP(r,t){Kr(1,arguments);var e=cn(r),n=e.getUTCFullYear(),i=t||{},a=i.locale,o=a&&a.options&&a.options.firstWeekContainsDate,s=o==null?1:Ln(o),l=i.firstWeekContainsDate==null?s:Ln(i.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=new Date(0);u.setUTCFullYear(n+1,0,l),u.setUTCHours(0,0,0,0);var c=th(u,t),f=new Date(0);f.setUTCFullYear(n,0,l),f.setUTCHours(0,0,0,0);var d=th(f,t);return e.getTime()>=c.getTime()?n+1:e.getTime()>=d.getTime()?n:n-1}function XHe(r,t){Kr(1,arguments);var e=t||{},n=e.locale,i=n&&n.options&&n.options.firstWeekContainsDate,a=i==null?1:Ln(i),o=e.firstWeekContainsDate==null?a:Ln(e.firstWeekContainsDate),s=gP(r,t),l=new Date(0);l.setUTCFullYear(s,0,o),l.setUTCHours(0,0,0,0);var u=th(l,t);return u}var qHe=6048e5;function _q(r,t){Kr(1,arguments);var e=cn(r),n=th(e,t).getTime()-XHe(e,t).getTime();return Math.round(n/qHe)+1}var Hp={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},KHe={G:function(r,t,e){var n=r.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(n,{width:"abbreviated"});case"GGGGG":return e.era(n,{width:"narrow"});case"GGGG":default:return e.era(n,{width:"wide"})}},y:function(r,t,e){if(t==="yo"){var n=r.getUTCFullYear(),i=n>0?n:1-n;return e.ordinalNumber(i,{unit:"year"})}return vf.y(r,t)},Y:function(r,t,e,n){var i=gP(r,n),a=i>0?i:1-i;if(t==="YY"){var o=a%100;return ni(o,2)}return t==="Yo"?e.ordinalNumber(a,{unit:"year"}):ni(a,t.length)},R:function(r,t){var e=Cq(r);return ni(e,t.length)},u:function(r,t){var e=r.getUTCFullYear();return ni(e,t.length)},Q:function(r,t,e){var n=Math.ceil((r.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return ni(n,2);case"Qo":return e.ordinalNumber(n,{unit:"quarter"});case"QQQ":return e.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,t,e){var n=Math.ceil((r.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return ni(n,2);case"qo":return e.ordinalNumber(n,{unit:"quarter"});case"qqq":return e.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,t,e){var n=r.getUTCMonth();switch(t){case"M":case"MM":return vf.M(r,t);case"Mo":return e.ordinalNumber(n+1,{unit:"month"});case"MMM":return e.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(n,{width:"wide",context:"formatting"})}},L:function(r,t,e){var n=r.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return ni(n+1,2);case"Lo":return e.ordinalNumber(n+1,{unit:"month"});case"LLL":return e.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(n,{width:"wide",context:"standalone"})}},w:function(r,t,e,n){var i=_q(r,n);return t==="wo"?e.ordinalNumber(i,{unit:"week"}):ni(i,t.length)},I:function(r,t,e){var n=Eq(r);return t==="Io"?e.ordinalNumber(n,{unit:"week"}):ni(n,t.length)},d:function(r,t,e){return t==="do"?e.ordinalNumber(r.getUTCDate(),{unit:"date"}):vf.d(r,t)},D:function(r,t,e){var n=WHe(r);return t==="Do"?e.ordinalNumber(n,{unit:"dayOfYear"}):ni(n,t.length)},E:function(r,t,e){var n=r.getUTCDay();switch(t){case"E":case"EE":case"EEE":return e.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(n,{width:"short",context:"formatting"});case"EEEE":default:return e.day(n,{width:"wide",context:"formatting"})}},e:function(r,t,e,n){var i=r.getUTCDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return ni(a,2);case"eo":return e.ordinalNumber(a,{unit:"day"});case"eee":return e.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(i,{width:"short",context:"formatting"});case"eeee":default:return e.day(i,{width:"wide",context:"formatting"})}},c:function(r,t,e,n){var i=r.getUTCDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return ni(a,t.length);case"co":return e.ordinalNumber(a,{unit:"day"});case"ccc":return e.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(i,{width:"narrow",context:"standalone"});case"cccccc":return e.day(i,{width:"short",context:"standalone"});case"cccc":default:return e.day(i,{width:"wide",context:"standalone"})}},i:function(r,t,e){var n=r.getUTCDay(),i=n===0?7:n;switch(t){case"i":return String(i);case"ii":return ni(i,t.length);case"io":return e.ordinalNumber(i,{unit:"day"});case"iii":return e.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(n,{width:"short",context:"formatting"});case"iiii":default:return e.day(n,{width:"wide",context:"formatting"})}},a:function(r,t,e){var n=r.getUTCHours(),i=n/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(r,t,e){var n=r.getUTCHours(),i;switch(n===12?i=Hp.noon:n===0?i=Hp.midnight:i=n/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(r,t,e){var n=r.getUTCHours(),i;switch(n>=17?i=Hp.evening:n>=12?i=Hp.afternoon:n>=4?i=Hp.morning:i=Hp.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(r,t,e){if(t==="ho"){var n=r.getUTCHours()%12;return n===0&&(n=12),e.ordinalNumber(n,{unit:"hour"})}return vf.h(r,t)},H:function(r,t,e){return t==="Ho"?e.ordinalNumber(r.getUTCHours(),{unit:"hour"}):vf.H(r,t)},K:function(r,t,e){var n=r.getUTCHours()%12;return t==="Ko"?e.ordinalNumber(n,{unit:"hour"}):ni(n,t.length)},k:function(r,t,e){var n=r.getUTCHours();return n===0&&(n=24),t==="ko"?e.ordinalNumber(n,{unit:"hour"}):ni(n,t.length)},m:function(r,t,e){return t==="mo"?e.ordinalNumber(r.getUTCMinutes(),{unit:"minute"}):vf.m(r,t)},s:function(r,t,e){return t==="so"?e.ordinalNumber(r.getUTCSeconds(),{unit:"second"}):vf.s(r,t)},S:function(r,t){return vf.S(r,t)},X:function(r,t,e,n){var i=n._originalDate||r,a=i.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return Aq(a);case"XXXX":case"XX":return dh(a);case"XXXXX":case"XXX":default:return dh(a,":")}},x:function(r,t,e,n){var i=n._originalDate||r,a=i.getTimezoneOffset();switch(t){case"x":return Aq(a);case"xxxx":case"xx":return dh(a);case"xxxxx":case"xxx":default:return dh(a,":")}},O:function(r,t,e,n){var i=n._originalDate||r,a=i.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Tq(a,":");case"OOOO":default:return"GMT"+dh(a,":")}},z:function(r,t,e,n){var i=n._originalDate||r,a=i.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Tq(a,":");case"zzzz":default:return"GMT"+dh(a,":")}},t:function(r,t,e,n){var i=n._originalDate||r,a=Math.floor(i.getTime()/1e3);return ni(a,t.length)},T:function(r,t,e,n){var i=n._originalDate||r,a=i.getTime();return ni(a,t.length)}};function Tq(r,t){var e=r>0?"-":"+",n=Math.abs(r),i=Math.floor(n/60),a=n%60;return a===0?e+String(i):e+String(i)+t+ni(a,2)}function Aq(r,t){if(r%60==0){var e=r>0?"-":"+";return e+ni(Math.abs(r)/60,2)}return dh(r,t)}function dh(r,t){var e=t||"",n=r>0?"-":"+",i=Math.abs(r),a=ni(Math.floor(i/60),2),o=ni(i%60,2);return n+a+e+o}var ZHe=KHe;function kq(r,t){switch(r){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function Mq(r,t){switch(r){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}function QHe(r,t){var e=r.match(/(P+)(p+)?/)||[],n=e[1],i=e[2];if(!i)return kq(r,t);var a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",kq(n,t)).replace("{{time}}",Mq(i,t))}var JHe={p:Mq,P:QHe},Iq=JHe,eWe=["D","DD"],tWe=["YY","YYYY"];function Pq(r){return eWe.indexOf(r)!==-1}function Dq(r){return tWe.indexOf(r)!==-1}function pC(r,t,e){if(r==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(e,"`; see: https://git.io/fxCyr"));if(r==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(e,"`; see: https://git.io/fxCyr"));if(r==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(e,"`; see: https://git.io/fxCyr"));if(r==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(e,"`; see: https://git.io/fxCyr"))}var rWe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nWe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,iWe=/^'([^]*?)'?$/,aWe=/''/g,oWe=/[a-zA-Z]/;function hi(r,t,e){Kr(2,arguments);var n=String(t),i=e||{},a=i.locale||WI,o=a.options&&a.options.firstWeekContainsDate,s=o==null?1:Ln(o),l=i.firstWeekContainsDate==null?s:Ln(i.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=a.options&&a.options.weekStartsOn,c=u==null?0:Ln(u),f=i.weekStartsOn==null?c:Ln(i.weekStartsOn);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!a.localize)throw new RangeError("locale must contain localize property");if(!a.formatLong)throw new RangeError("locale must contain formatLong property");var d=cn(r);if(!Hs(d))throw new RangeError("Invalid time value");var h=xq(d),v=Sq(d,h),p={firstWeekContainsDate:l,weekStartsOn:f,locale:a,_originalDate:d},g=n.match(nWe).map(function(m){var y=m[0];if(y==="p"||y==="P"){var b=Iq[y];return b(m,a.formatLong,p)}return m}).join("").match(rWe).map(function(m){if(m==="''")return"'";var y=m[0];if(y==="'")return sWe(m);var b=ZHe[y];if(b)return!i.useAdditionalWeekYearTokens&&Dq(m)&&pC(m,t,r),!i.useAdditionalDayOfYearTokens&&Pq(m)&&pC(m,t,r),b(v,m,a.localize,p);if(y.match(oWe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return m}).join("");return g}function sWe(r){return r.match(iWe)[1].replace(aWe,"'")}function lWe(r,t){if(r==null)throw new TypeError("assign requires that input parameter not be null or undefined");t=t||{};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}function dl(r){Kr(1,arguments);var t=cn(r),e=t.getDate();return e}function uWe(r){Kr(1,arguments);var t=cn(r),e=t.getDay();return e}function cWe(r){Kr(1,arguments);var t=cn(r),e=t.getFullYear(),n=t.getMonth(),i=new Date(0);return i.setFullYear(e,n+1,0),i.setHours(0,0,0,0),i.getDate()}function pf(r){Kr(1,arguments);var t=cn(r),e=t.getHours();return e}function gC(r){Kr(1,arguments);var t=cn(r),e=t.getMinutes();return e}function Ta(r){Kr(1,arguments);var t=cn(r),e=t.getMonth();return e}function mC(r){Kr(1,arguments);var t=cn(r),e=t.getSeconds();return e}function ur(r){Kr(1,arguments);var t=cn(r),e=t.getTime();return e}function Ha(r){return Kr(1,arguments),cn(r).getFullYear()}function mP(r,t,e){Kr(2,arguments);var n=e||{},i=n.locale,a=i&&i.options&&i.options.weekStartsOn,o=a==null?0:Ln(a),s=n.weekStartsOn==null?o:Ln(n.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=cn(r),u=Ln(t),c=l.getUTCDay(),f=u%7,d=(f+7)%7,h=(d<s?7:0)+u-c;return l.setUTCDate(l.getUTCDate()+h),l}function fWe(r,t){Kr(2,arguments);var e=Ln(t);e%7==0&&(e=e-7);var n=1,i=cn(r),a=i.getUTCDay(),o=e%7,s=(o+7)%7,l=(s<n?7:0)+e-a;return i.setUTCDate(i.getUTCDate()+l),i}function dWe(r,t){Kr(2,arguments);var e=cn(r),n=Ln(t),i=Eq(e)-n;return e.setUTCDate(e.getUTCDate()-i*7),e}function hWe(r,t,e){Kr(2,arguments);var n=cn(r),i=Ln(t),a=_q(n,e)-i;return n.setUTCDate(n.getUTCDate()-a*7),n}var vWe=36e5,pWe=6e4,gWe=1e3,fa={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Jl={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ui(r,t,e){var n=t.match(r);if(!n)return null;var i=parseInt(n[0],10);return{value:e?e(i):i,rest:t.slice(n[0].length)}}function eu(r,t){var e=t.match(r);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};var n=e[1]==="+"?1:-1,i=e[2]?parseInt(e[2],10):0,a=e[3]?parseInt(e[3],10):0,o=e[5]?parseInt(e[5],10):0;return{value:n*(i*vWe+a*pWe+o*gWe),rest:t.slice(e[0].length)}}function Rq(r,t){return Ui(fa.anyDigitsSigned,r,t)}function ea(r,t,e){switch(r){case 1:return Ui(fa.singleDigit,t,e);case 2:return Ui(fa.twoDigits,t,e);case 3:return Ui(fa.threeDigits,t,e);case 4:return Ui(fa.fourDigits,t,e);default:return Ui(new RegExp("^\\d{1,"+r+"}"),t,e)}}function yC(r,t,e){switch(r){case 1:return Ui(fa.singleDigitSigned,t,e);case 2:return Ui(fa.twoDigitsSigned,t,e);case 3:return Ui(fa.threeDigitsSigned,t,e);case 4:return Ui(fa.fourDigitsSigned,t,e);default:return Ui(new RegExp("^-?\\d{1,"+r+"}"),t,e)}}function yP(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Oq(r,t){var e=t>0,n=e?t:1-t,i;if(n<=50)i=r||100;else{var a=n+50,o=Math.floor(a/100)*100,s=r>=a%100;i=r+o-(s?100:0)}return e?i:1-i}var mWe=[31,28,31,30,31,30,31,31,30,31,30,31],yWe=[31,29,31,30,31,30,31,31,30,31,30,31];function Lq(r){return r%400==0||r%4==0&&r%100!=0}var bWe={G:{priority:140,parse:function(r,t,e,n){switch(t){case"G":case"GG":case"GGG":return e.era(r,{width:"abbreviated"})||e.era(r,{width:"narrow"});case"GGGGG":return e.era(r,{width:"narrow"});case"GGGG":default:return e.era(r,{width:"wide"})||e.era(r,{width:"abbreviated"})||e.era(r,{width:"narrow"})}},set:function(r,t,e,n){return t.era=e,r.setUTCFullYear(e,0,1),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(r,t,e,n){var i=function(a){return{year:a,isTwoDigitYear:t==="yy"}};switch(t){case"y":return ea(4,r,i);case"yo":return e.ordinalNumber(r,{unit:"year",valueCallback:i});default:return ea(t.length,r,i)}},validate:function(r,t,e){return t.isTwoDigitYear||t.year>0},set:function(r,t,e,n){var i=r.getUTCFullYear();if(e.isTwoDigitYear){var a=Oq(e.year,i);return r.setUTCFullYear(a,0,1),r.setUTCHours(0,0,0,0),r}var o=!("era"in t)||t.era===1?e.year:1-e.year;return r.setUTCFullYear(o,0,1),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(r,t,e,n){var i=function(a){return{year:a,isTwoDigitYear:t==="YY"}};switch(t){case"Y":return ea(4,r,i);case"Yo":return e.ordinalNumber(r,{unit:"year",valueCallback:i});default:return ea(t.length,r,i)}},validate:function(r,t,e){return t.isTwoDigitYear||t.year>0},set:function(r,t,e,n){var i=gP(r,n);if(e.isTwoDigitYear){var a=Oq(e.year,i);return r.setUTCFullYear(a,0,n.firstWeekContainsDate),r.setUTCHours(0,0,0,0),th(r,n)}var o=!("era"in t)||t.era===1?e.year:1-e.year;return r.setUTCFullYear(o,0,n.firstWeekContainsDate),r.setUTCHours(0,0,0,0),th(r,n)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(r,t,e,n){return yC(t==="R"?4:t.length,r)},set:function(r,t,e,n){var i=new Date(0);return i.setUTCFullYear(e,0,4),i.setUTCHours(0,0,0,0),Vp(i)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(r,t,e,n){return yC(t==="u"?4:t.length,r)},set:function(r,t,e,n){return r.setUTCFullYear(e,0,1),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(r,t,e,n){switch(t){case"Q":case"QQ":return ea(t.length,r);case"Qo":return e.ordinalNumber(r,{unit:"quarter"});case"QQQ":return e.quarter(r,{width:"abbreviated",context:"formatting"})||e.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return e.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(r,{width:"wide",context:"formatting"})||e.quarter(r,{width:"abbreviated",context:"formatting"})||e.quarter(r,{width:"narrow",context:"formatting"})}},validate:function(r,t,e){return t>=1&&t<=4},set:function(r,t,e,n){return r.setUTCMonth((e-1)*3,1),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(r,t,e,n){switch(t){case"q":case"qq":return ea(t.length,r);case"qo":return e.ordinalNumber(r,{unit:"quarter"});case"qqq":return e.quarter(r,{width:"abbreviated",context:"standalone"})||e.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return e.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(r,{width:"wide",context:"standalone"})||e.quarter(r,{width:"abbreviated",context:"standalone"})||e.quarter(r,{width:"narrow",context:"standalone"})}},validate:function(r,t,e){return t>=1&&t<=4},set:function(r,t,e,n){return r.setUTCMonth((e-1)*3,1),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(r,t,e,n){var i=function(a){return a-1};switch(t){case"M":return Ui(fa.month,r,i);case"MM":return ea(2,r,i);case"Mo":return e.ordinalNumber(r,{unit:"month",valueCallback:i});case"MMM":return e.month(r,{width:"abbreviated",context:"formatting"})||e.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return e.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(r,{width:"wide",context:"formatting"})||e.month(r,{width:"abbreviated",context:"formatting"})||e.month(r,{width:"narrow",context:"formatting"})}},validate:function(r,t,e){return t>=0&&t<=11},set:function(r,t,e,n){return r.setUTCMonth(e,1),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(r,t,e,n){var i=function(a){return a-1};switch(t){case"L":return Ui(fa.month,r,i);case"LL":return ea(2,r,i);case"Lo":return e.ordinalNumber(r,{unit:"month",valueCallback:i});case"LLL":return e.month(r,{width:"abbreviated",context:"standalone"})||e.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return e.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(r,{width:"wide",context:"standalone"})||e.month(r,{width:"abbreviated",context:"standalone"})||e.month(r,{width:"narrow",context:"standalone"})}},validate:function(r,t,e){return t>=0&&t<=11},set:function(r,t,e,n){return r.setUTCMonth(e,1),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(r,t,e,n){switch(t){case"w":return Ui(fa.week,r);case"wo":return e.ordinalNumber(r,{unit:"week"});default:return ea(t.length,r)}},validate:function(r,t,e){return t>=1&&t<=53},set:function(r,t,e,n){return th(hWe(r,e,n),n)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(r,t,e,n){switch(t){case"I":return Ui(fa.week,r);case"Io":return e.ordinalNumber(r,{unit:"week"});default:return ea(t.length,r)}},validate:function(r,t,e){return t>=1&&t<=53},set:function(r,t,e,n){return Vp(dWe(r,e,n),n)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(r,t,e,n){switch(t){case"d":return Ui(fa.date,r);case"do":return e.ordinalNumber(r,{unit:"date"});default:return ea(t.length,r)}},validate:function(r,t,e){var n=r.getUTCFullYear(),i=Lq(n),a=r.getUTCMonth();return i?t>=1&&t<=yWe[a]:t>=1&&t<=mWe[a]},set:function(r,t,e,n){return r.setUTCDate(e),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(r,t,e,n){switch(t){case"D":case"DD":return Ui(fa.dayOfYear,r);case"Do":return e.ordinalNumber(r,{unit:"date"});default:return ea(t.length,r)}},validate:function(r,t,e){var n=r.getUTCFullYear(),i=Lq(n);return i?t>=1&&t<=366:t>=1&&t<=365},set:function(r,t,e,n){return r.setUTCMonth(0,e),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(r,t,e,n){switch(t){case"E":case"EE":case"EEE":return e.day(r,{width:"abbreviated",context:"formatting"})||e.day(r,{width:"short",context:"formatting"})||e.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return e.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(r,{width:"short",context:"formatting"})||e.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return e.day(r,{width:"wide",context:"formatting"})||e.day(r,{width:"abbreviated",context:"formatting"})||e.day(r,{width:"short",context:"formatting"})||e.day(r,{width:"narrow",context:"formatting"})}},validate:function(r,t,e){return t>=0&&t<=6},set:function(r,t,e,n){return r=mP(r,e,n),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(r,t,e,n){var i=function(a){var o=Math.floor((a-1)/7)*7;return(a+n.weekStartsOn+6)%7+o};switch(t){case"e":case"ee":return ea(t.length,r,i);case"eo":return e.ordinalNumber(r,{unit:"day",valueCallback:i});case"eee":return e.day(r,{width:"abbreviated",context:"formatting"})||e.day(r,{width:"short",context:"formatting"})||e.day(r,{width:"narrow",context:"formatting"});case"eeeee":return e.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(r,{width:"short",context:"formatting"})||e.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return e.day(r,{width:"wide",context:"formatting"})||e.day(r,{width:"abbreviated",context:"formatting"})||e.day(r,{width:"short",context:"formatting"})||e.day(r,{width:"narrow",context:"formatting"})}},validate:function(r,t,e){return t>=0&&t<=6},set:function(r,t,e,n){return r=mP(r,e,n),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(r,t,e,n){var i=function(a){var o=Math.floor((a-1)/7)*7;return(a+n.weekStartsOn+6)%7+o};switch(t){case"c":case"cc":return ea(t.length,r,i);case"co":return e.ordinalNumber(r,{unit:"day",valueCallback:i});case"ccc":return e.day(r,{width:"abbreviated",context:"standalone"})||e.day(r,{width:"short",context:"standalone"})||e.day(r,{width:"narrow",context:"standalone"});case"ccccc":return e.day(r,{width:"narrow",context:"standalone"});case"cccccc":return e.day(r,{width:"short",context:"standalone"})||e.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return e.day(r,{width:"wide",context:"standalone"})||e.day(r,{width:"abbreviated",context:"standalone"})||e.day(r,{width:"short",context:"standalone"})||e.day(r,{width:"narrow",context:"standalone"})}},validate:function(r,t,e){return t>=0&&t<=6},set:function(r,t,e,n){return r=mP(r,e,n),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(r,t,e,n){var i=function(a){return a===0?7:a};switch(t){case"i":case"ii":return ea(t.length,r);case"io":return e.ordinalNumber(r,{unit:"day"});case"iii":return e.day(r,{width:"abbreviated",context:"formatting",valueCallback:i})||e.day(r,{width:"short",context:"formatting",valueCallback:i})||e.day(r,{width:"narrow",context:"formatting",valueCallback:i});case"iiiii":return e.day(r,{width:"narrow",context:"formatting",valueCallback:i});case"iiiiii":return e.day(r,{width:"short",context:"formatting",valueCallback:i})||e.day(r,{width:"narrow",context:"formatting",valueCallback:i});case"iiii":default:return e.day(r,{width:"wide",context:"formatting",valueCallback:i})||e.day(r,{width:"abbreviated",context:"formatting",valueCallback:i})||e.day(r,{width:"short",context:"formatting",valueCallback:i})||e.day(r,{width:"narrow",context:"formatting",valueCallback:i})}},validate:function(r,t,e){return t>=1&&t<=7},set:function(r,t,e,n){return r=fWe(r,e,n),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(r,t,e,n){switch(t){case"a":case"aa":case"aaa":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"})||e.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})||e.dayPeriod(r,{width:"abbreviated",context:"formatting"})||e.dayPeriod(r,{width:"narrow",context:"formatting"})}},set:function(r,t,e,n){return r.setUTCHours(yP(e),0,0,0),r},incompatibleTokens:["b","B","H","K","k","t","T"]},b:{priority:80,parse:function(r,t,e,n){switch(t){case"b":case"bb":case"bbb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"})||e.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})||e.dayPeriod(r,{width:"abbreviated",context:"formatting"})||e.dayPeriod(r,{width:"narrow",context:"formatting"})}},set:function(r,t,e,n){return r.setUTCHours(yP(e),0,0,0),r},incompatibleTokens:["a","B","H","K","k","t","T"]},B:{priority:80,parse:function(r,t,e,n){switch(t){case"B":case"BB":case"BBB":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"})||e.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})||e.dayPeriod(r,{width:"abbreviated",context:"formatting"})||e.dayPeriod(r,{width:"narrow",context:"formatting"})}},set:function(r,t,e,n){return r.setUTCHours(yP(e),0,0,0),r},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(r,t,e,n){switch(t){case"h":return Ui(fa.hour12h,r);case"ho":return e.ordinalNumber(r,{unit:"hour"});default:return ea(t.length,r)}},validate:function(r,t,e){return t>=1&&t<=12},set:function(r,t,e,n){var i=r.getUTCHours()>=12;return i&&e<12?r.setUTCHours(e+12,0,0,0):!i&&e===12?r.setUTCHours(0,0,0,0):r.setUTCHours(e,0,0,0),r},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(r,t,e,n){switch(t){case"H":return Ui(fa.hour23h,r);case"Ho":return e.ordinalNumber(r,{unit:"hour"});default:return ea(t.length,r)}},validate:function(r,t,e){return t>=0&&t<=23},set:function(r,t,e,n){return r.setUTCHours(e,0,0,0),r},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(r,t,e,n){switch(t){case"K":return Ui(fa.hour11h,r);case"Ko":return e.ordinalNumber(r,{unit:"hour"});default:return ea(t.length,r)}},validate:function(r,t,e){return t>=0&&t<=11},set:function(r,t,e,n){var i=r.getUTCHours()>=12;return i&&e<12?r.setUTCHours(e+12,0,0,0):r.setUTCHours(e,0,0,0),r},incompatibleTokens:["a","b","h","H","k","t","T"]},k:{priority:70,parse:function(r,t,e,n){switch(t){case"k":return Ui(fa.hour24h,r);case"ko":return e.ordinalNumber(r,{unit:"hour"});default:return ea(t.length,r)}},validate:function(r,t,e){return t>=1&&t<=24},set:function(r,t,e,n){var i=e<=24?e%24:e;return r.setUTCHours(i,0,0,0),r},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(r,t,e,n){switch(t){case"m":return Ui(fa.minute,r);case"mo":return e.ordinalNumber(r,{unit:"minute"});default:return ea(t.length,r)}},validate:function(r,t,e){return t>=0&&t<=59},set:function(r,t,e,n){return r.setUTCMinutes(e,0,0),r},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(r,t,e,n){switch(t){case"s":return Ui(fa.second,r);case"so":return e.ordinalNumber(r,{unit:"second"});default:return ea(t.length,r)}},validate:function(r,t,e){return t>=0&&t<=59},set:function(r,t,e,n){return r.setUTCSeconds(e,0),r},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(r,t,e,n){var i=function(a){return Math.floor(a*Math.pow(10,-t.length+3))};return ea(t.length,r,i)},set:function(r,t,e,n){return r.setUTCMilliseconds(e),r},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(r,t,e,n){switch(t){case"X":return eu(Jl.basicOptionalMinutes,r);case"XX":return eu(Jl.basic,r);case"XXXX":return eu(Jl.basicOptionalSeconds,r);case"XXXXX":return eu(Jl.extendedOptionalSeconds,r);case"XXX":default:return eu(Jl.extended,r)}},set:function(r,t,e,n){return t.timestampIsSet?r:new Date(r.getTime()-e)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(r,t,e,n){switch(t){case"x":return eu(Jl.basicOptionalMinutes,r);case"xx":return eu(Jl.basic,r);case"xxxx":return eu(Jl.basicOptionalSeconds,r);case"xxxxx":return eu(Jl.extendedOptionalSeconds,r);case"xxx":default:return eu(Jl.extended,r)}},set:function(r,t,e,n){return t.timestampIsSet?r:new Date(r.getTime()-e)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(r,t,e,n){return Rq(r)},set:function(r,t,e,n){return[new Date(e*1e3),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(r,t,e,n){return Rq(r)},set:function(r,t,e,n){return[new Date(e),{timestampIsSet:!0}]},incompatibleTokens:"*"}},xWe=bWe,wWe=10,SWe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,CWe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,EWe=/^'([^]*?)'?$/,_We=/''/g,TWe=/\S/,AWe=/[a-zA-Z]/;function kWe(r,t,e,n){Kr(3,arguments);var i=String(r),a=String(t),o=n||{},s=o.locale||WI;if(!s.match)throw new RangeError("locale must contain match property");var l=s.options&&s.options.firstWeekContainsDate,u=l==null?1:Ln(l),c=o.firstWeekContainsDate==null?u:Ln(o.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=s.options&&s.options.weekStartsOn,d=f==null?0:Ln(f),h=o.weekStartsOn==null?d:Ln(o.weekStartsOn);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(a==="")return i===""?cn(e):new Date(NaN);var v={firstWeekContainsDate:c,weekStartsOn:h,locale:s},p=[{priority:wWe,subPriority:-1,set:MWe,index:0}],g,m=a.match(CWe).map(function(L){var O=L[0];if(O==="p"||O==="P"){var B=Iq[O];return B(L,s.formatLong,v)}return L}).join("").match(SWe),y=[];for(g=0;g<m.length;g++){var b=m[g];!o.useAdditionalWeekYearTokens&&Dq(b)&&pC(b,a,r),!o.useAdditionalDayOfYearTokens&&Pq(b)&&pC(b,a,r);var x=b[0],w=xWe[x];if(w){var S=w.incompatibleTokens;if(Array.isArray(S)){for(var C=void 0,_=0;_<y.length;_++){var T=y[_].token;if(S.indexOf(T)!==-1||T===x){C=y[_];break}}if(C)throw new RangeError("The format string mustn't contain `".concat(C.fullToken,"` and `").concat(b,"` at the same time"))}else if(w.incompatibleTokens==="*"&&y.length)throw new RangeError("The format string mustn't contain `".concat(b,"` and any other token at the same time"));y.push({token:x,fullToken:b});var E=w.parse(i,b,s.match,v);if(!E)return new Date(NaN);p.push({priority:w.priority,subPriority:w.subPriority||0,set:w.set,validate:w.validate,value:E.value,index:p.length}),i=E.rest}else{if(x.match(AWe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");if(b==="''"?b="'":x==="'"&&(b=IWe(b)),i.indexOf(b)===0)i=i.slice(b.length);else return new Date(NaN)}}if(i.length>0&&TWe.test(i))return new Date(NaN);var k=p.map(function(L){return L.priority}).sort(function(L,O){return O-L}).filter(function(L,O,B){return B.indexOf(L)===O}).map(function(L){return p.filter(function(O){return O.priority===L}).sort(function(O,B){return B.subPriority-O.subPriority})}).map(function(L){return L[0]}),I=cn(e);if(isNaN(I))return new Date(NaN);var P=Sq(I,xq(I)),F={};for(g=0;g<k.length;g++){var $=k[g];if($.validate&&!$.validate(P,$.value,v))return new Date(NaN);var R=$.set(P,F,$.value,v);R[0]?(P=R[0],lWe(F,R[1])):P=R}return P}function MWe(r,t){if(t.timestampIsSet)return r;var e=new Date(0);return e.setFullYear(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()),e.setHours(r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()),e}function IWe(r){return r.match(EWe)[1].replace(_We,"'")}function PWe(r){Kr(1,arguments);var t=cn(r);return t.setMinutes(0,0,0),t}function bC(r,t){Kr(2,arguments);var e=cn(r),n=cn(t);return e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()}function bP(r){Kr(1,arguments);var t=cn(r);return t.setMilliseconds(0),t}function Fq(r,t){Kr(2,arguments);var e=cn(r),n=cn(t);return e.getFullYear()===n.getFullYear()}function DWe(r,t){Kr(2,arguments);var e=cn(r),n=Ln(t),i=e.getFullYear(),a=e.getDate(),o=new Date(0);o.setFullYear(i,n,15),o.setHours(0,0,0,0);var s=cWe(o);return e.setMonth(n,Math.min(a,s)),e}function Ws(r,t){if(Kr(2,arguments),typeof t!="object"||t===null)throw new RangeError("values parameter must be an object");var e=cn(r);return isNaN(e.getTime())?new Date(NaN):(t.year!=null&&e.setFullYear(t.year),t.month!=null&&(e=DWe(e,t.month)),t.date!=null&&e.setDate(Ln(t.date)),t.hours!=null&&e.setHours(Ln(t.hours)),t.minutes!=null&&e.setMinutes(Ln(t.minutes)),t.seconds!=null&&e.setSeconds(Ln(t.seconds)),t.milliseconds!=null&&e.setMilliseconds(Ln(t.milliseconds)),e)}function hh(r,t){Kr(2,arguments);var e=cn(r),n=Ln(t);return e.setHours(n),e}function xP(r,t){Kr(2,arguments);var e=cn(r),n=Ln(t);return e.setMinutes(n),e}function wP(r,t){Kr(2,arguments);var e=cn(r),n=Ln(t);return e.setSeconds(n),e}const Nq=1901,SP=40,RWe={date:"yyyy-MM-dd",datetime:"yyyy-MM-dd HH:mm:ss",daterange:"yyyy-MM-dd",datetimerange:"yyyy-MM-dd HH:mm:ss",month:"yyyy-MM",year:"yyyy"},OWe={date:zHe,month:bC,year:Fq};function Wp(r,t,e="date"){const n=OWe[e];return Array.isArray(r)?r.some(i=>n(i,t)):n(r,t)}function CP(r,t,e,n){let i=!1,a=!1,o=!1;return Array.isArray(e)&&(e[0]<r&&r<e[1]&&(i=!0),Wp(e[0],r)&&(a=!0),Wp(e[1],r)&&(o=!0)),{type:"date",dateObject:{date:dl(r),month:Ta(r),year:Ha(r)},inCurrentMonth:bC(r,t),isCurrentDate:Wp(n,r),inSpan:i,startOfSpan:a,endOfSpan:o,selected:e!==null&&Wp(e,r),ts:ur(r)}}function LWe(r,t,e){return{type:"month",dateObject:{month:Ta(r),year:Ha(r)},isCurrentMonth:bC(e,r),selected:t!==null&&Wp(t,r,"month"),ts:ur(r)}}function FWe(r,t,e){return{type:"year",dateObject:{year:Ha(r)},isCurrentYear:Fq(e,r),selected:t!==null&&Wp(t,r,"year"),ts:ur(r)}}function EP(r,t,e,n,i=!1){const a=Ta(r);let o=ur(hf(r)),s=ur(hC(o,-1));const l=[];let u=!i;for(;uWe(s)!==n||u;)l.unshift(CP(s,r,t,e)),s=ur(hC(s,-1)),u=!1;for(;Ta(o)===a;)l.push(CP(o,r,t,e)),o=ur(hC(o,1));const c=i?l.length<=28?28:l.length<=35?35:42:42;for(;l.length<c;)l.push(CP(o,r,t,e)),o=ur(hC(o,1));return l}function NWe(r,t,e){const n=[],i=wq(r);for(let a=0;a<12;a++)n.push(LWe(ur(mo(i,a)),t,e));return n}function BWe(r,t,e){const n=[],i=new Date(Nq,0,1);for(let a=0;a<200;a++)n.push(FWe(ur(pP(i,a)),t,e));return n}function tu(r,t,e,n){const i=kWe(r,t,e,n);return Hs(i)?hi(i,t,n)===r?i:new Date(NaN):i}var $We={paddingSmall:"12px 16px 12px",paddingMedium:"19px 24px 20px",paddingLarge:"23px 32px 24px",paddingHuge:"27px 40px 28px",titleFontSizeSmall:"16px",titleFontSizeMedium:"18px",titleFontSizeLarge:"18px",titleFontSizeHuge:"18px",closeSize:"18px"};const zWe=r=>{const{primaryColor:t,borderRadius:e,lineHeight:n,fontSize:i,cardColor:a,textColor2:o,textColor1:s,dividerColor:l,fontWeightStrong:u,closeColor:c,closeColorHover:f,closeColorPressed:d,modalColor:h,boxShadow1:v,popoverColor:p,actionColor:g}=r;return Object.assign(Object.assign({},$We),{lineHeight:n,color:a,colorModal:h,colorPopover:p,colorTarget:t,colorEmbedded:g,textColor:o,titleTextColor:s,borderColor:l,actionColor:g,titleFontWeight:u,closeColor:c,closeColorHover:f,closeColorPressed:d,fontSizeSmall:i,fontSizeMedium:i,fontSizeLarge:i,fontSizeHuge:i,boxShadow:v,borderRadius:e})},GWe={name:"Card",common:Bn,self:zWe};var Bq=GWe,UWe=we([ne("card",`
 font-size: var(--font-size);
 line-height: var(--line-height);
 display: flex;
 flex-direction: column;
 width: 100%;
 box-sizing: border-box;
 position: relative;
 border-radius: var(--border-radius);
 background-color: var(--color);
 color: var(--text-color);
 transition: 
 color .3s var(--bezier),
 background-color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 border-color .3s var(--bezier);
 `,[Pe("hoverable",[we("&:hover","box-shadow: var(--box-shadow);")]),Pe("content-segmented",[we(">",[xe("content",{paddingTop:"var(--padding-bottom)"})])]),Pe("content-soft-segmented",[we(">",[xe("content",`
 margin: 0 var(--padding-left);
 padding: var(--padding-bottom) 0;
 `)])]),Pe("footer-segmented",[we(">",[xe("footer",{paddingTop:"var(--padding-bottom)"})])]),Pe("footer-soft-segmented",[we(">",[xe("footer",`
 padding: var(--padding-bottom) 0;
 margin: 0 var(--padding-left);
 `)])]),we(">",[ne("card-header",`
 box-sizing: border-box;
 display: flex;
 align-items: center;
 font-size: var(--title-font-size);
 padding:
 var(--padding-top)
 var(--padding-left)
 var(--padding-bottom)
 var(--padding-left);
 `,[xe("main",`
 font-weight: var(--title-font-weight);
 transition: color .3s var(--bezier);
 flex: 1;
 color: var(--title-text-color);
 `),xe("extra",`
 display: flex;
 align-items: center;
 font-size: var(--font-size);
 font-weight: 400;
 transition: color .3s var(--bezier);
 color: var(--text-color);
 `),xe("close",`
 font-size: var(--close-size);
 transition: color .3s var(--bezier);
 `)]),xe("action",`
 box-sizing: border-box;
 transition:
 background-color .3s var(--bezier),
 border-color .3s var(--bezier);
 background-clip: padding-box;
 background-color: var(--action-color);
 `),xe("content","flex: 1;"),xe("content, footer",`
 box-sizing: border-box;
 padding: 0 var(--padding-left) var(--padding-bottom) var(--padding-left);
 font-size: var(--font-size);
 `,[we("&:first-child",{paddingTop:"var(--padding-bottom)"})]),xe("action",`
 background-color: var(--action-color);
 padding: var(--padding-bottom) var(--padding-left);
 `)]),ne("card-cover",`
 overflow: hidden;
 width: 100%;
 border-radius: var(--border-radius) var(--border-radius) 0 0;
 `,[we("img",`
 display: block;
 width: 100%;
 `)]),Pe("bordered",`
 border: 1px solid var(--border-color);
 `,[we("&:target","border-color: var(--color-target);")]),Pe("action-segmented",[we(">",[xe("action",[we("&:not(:first-child)",{borderTop:"1px solid var(--border-color)"})])])]),Pe("content-segmented, content-soft-segmented",[we(">",[xe("content",{transition:"border-color 0.3s var(--bezier)"},[we("&:not(:first-child)",{borderTop:"1px solid var(--border-color)"})])])]),Pe("footer-segmented, footer-soft-segmented",[we(">",[xe("footer",{transition:"border-color 0.3s var(--bezier)"},[we("&:not(:first-child)",{borderTop:"1px solid var(--border-color)"})])])])]),d0(ne("card",{background:"var(--color-modal)"})),WS(ne("card",{background:"var(--color-popover)"})),ne("card",[uX({background:"var(--color-modal)"})])]);const _P={title:String,contentStyle:[Object,String],headerStyle:[Object,String],footerStyle:[Object,String],embedded:Boolean,segmented:{type:[Boolean,Object],default:!1},size:{type:String,default:"medium"},bordered:{type:Boolean,default:!0},closable:{type:Boolean,default:!1},hoverable:Boolean,onClose:[Function,Array]},VWe=ju(_P),HWe=Object.assign(Object.assign({},rr.props),_P);var WWe=mt({name:"Card",props:HWe,setup(r){const t=()=>{const{onClose:o}=r;o&&pt(o)},{mergedClsPrefixRef:e,NConfigProvider:n}=pn(r),i=rr("Card","Card",UWe,Bq,r,e);return{rtlEnabled:cP("Card",n==null?void 0:n.mergedRtlRef,e),mergedClsPrefix:e,mergedTheme:i,handleCloseClick:t,cssVars:Q(()=>{const{size:o}=r,{self:{color:s,colorModal:l,colorTarget:u,textColor:c,titleTextColor:f,titleFontWeight:d,borderColor:h,actionColor:v,borderRadius:p,closeColor:g,closeColorHover:m,closeColorPressed:y,lineHeight:b,closeSize:x,boxShadow:w,colorPopover:S,colorEmbedded:C,[Gt("padding",o)]:_,[Gt("fontSize",o)]:T,[Gt("titleFontSize",o)]:E},common:{cubicBezierEaseInOut:k}}=i.value,{top:I,left:P,bottom:F}=Sp(_);return{"--bezier":k,"--border-radius":p,"--color":r.embedded?C:s,"--color-modal":l,"--color-popover":S,"--color-target":u,"--text-color":c,"--line-height":b,"--action-color":v,"--title-text-color":f,"--title-font-weight":d,"--close-color":g,"--close-color-hover":m,"--close-color-pressed":y,"--border-color":h,"--box-shadow":w,"--padding-top":I,"--padding-bottom":F,"--padding-left":P,"--font-size":T,"--title-font-size":E,"--close-size":x}})}},render(){const{segmented:r,bordered:t,hoverable:e,mergedClsPrefix:n,rtlEnabled:i,$slots:a}=this;return M("div",{class:[`${n}-card`,{[`${n}-card--rtl`]:i,[`${n}-card--content${typeof r!="boolean"&&r.content==="soft"?"-soft":""}-segmented`]:r===!0||r!==!1&&r.content,[`${n}-card--footer${typeof r!="boolean"&&r.footer==="soft"?"-soft":""}-segmented`]:r===!0||r!==!1&&r.footer,[`${n}-card--action-segmented`]:r===!0||r!==!1&&r.action,[`${n}-card--bordered`]:t,[`${n}-card--hoverable`]:e}],style:this.cssVars},a.cover?M("div",{class:`${n}-card-cover`,role:"none"},Jr(a,"cover")):null,a.header||this.title||this.closable?M("div",{class:`${n}-card-header`,style:this.headerStyle},M("div",{class:`${n}-card-header__main`,role:"heading"},Jr(a,"header",{},()=>[this.title])),a["header-extra"]?M("div",{class:`${n}-card-header__extra`},Jr(a,"header-extra")):null,this.closable?M(eC,{clsPrefix:n,class:`${n}-card-header__close`,onClick:this.handleCloseClick}):null):null,M("div",{class:`${n}-card__content`,style:this.contentStyle,role:"none"},a),a.footer?M("div",{class:`${n}-card__footer`,style:this.footerStyle,role:"none"},Jr(a,"footer")):null,a.action?M("div",{class:`${n}-card__action`,role:"none"},Jr(a,"action")):null)}}),jWe={sizeSmall:"14px",sizeMedium:"16px",sizeLarge:"18px",labelPadding:"0 8px"};const YWe=r=>{const{baseColor:t,inputColorDisabled:e,cardColor:n,modalColor:i,popoverColor:a,textColorDisabled:o,borderColor:s,primaryColor:l,textColor2:u,fontSizeSmall:c,fontSizeMedium:f,fontSizeLarge:d,borderRadiusSmall:h}=r;return Object.assign(Object.assign({},jWe),{fontSizeSmall:c,fontSizeMedium:f,fontSizeLarge:d,borderRadius:h,color:t,colorChecked:l,colorDisabled:e,colorDisabledChecked:e,colorTableHeader:n,colorTableHeaderModal:i,colorTableHeaderPopover:a,checkMarkColor:t,checkMarkColorDisabled:o,checkMarkColorDisabledChecked:o,border:`1px solid ${s}`,borderDisabled:`1px solid ${s}`,borderDisabledChecked:`1px solid ${s}`,borderChecked:`1px solid ${l}`,borderFocus:`1px solid ${l}`,boxShadowFocus:`0 0 0 2px ${qr(l,{alpha:.3})}`,textColor:u,textColorDisabled:o})},XWe={name:"Checkbox",common:Bn,self:YWe};var TP=XWe,qWe=M("svg",{viewBox:"0 0 64 64",class:"check-icon"},M("path",{d:"M50.42,16.76L22.34,39.45l-8.1-11.46c-1.12-1.58-3.3-1.96-4.88-0.84c-1.58,1.12-1.95,3.3-0.84,4.88l10.26,14.51  c0.56,0.79,1.42,1.31,2.38,1.45c0.16,0.02,0.32,0.03,0.48,0.03c0.8,0,1.57-0.27,2.2-0.78l30.99-25.03c1.5-1.21,1.74-3.42,0.52-4.92  C54.13,15.78,51.93,15.55,50.42,16.76z"})),KWe=M("svg",{viewBox:"0 0 100 100",class:"line-icon"},M("path",{d:"M80.2,55.5H21.4c-2.8,0-5.1-2.5-5.1-5.5l0,0c0-3,2.3-5.5,5.1-5.5h58.7c2.8,0,5.1,2.5,5.1,5.5l0,0C85.2,53.1,82.9,55.5,80.2,55.5z"}));const $q=Symbol("checkboxGroup"),ZWe={min:Number,max:Number,size:String,value:Array,defaultValue:{type:Array,default:null},disabled:{type:Boolean,default:void 0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:{type:[Function,Array],validator:()=>!0,default:void 0}};var QWe=mt({name:"CheckboxGroup",props:ZWe,setup(r){const{mergedClsPrefixRef:t}=pn(r),e=fl(r),{mergedSizeRef:n,mergedDisabledRef:i}=e,a=ke(r.defaultValue),o=Q(()=>r.value),s=ri(o,a),l=Q(()=>{var f;return((f=s.value)===null||f===void 0?void 0:f.length)||0}),u=Q(()=>Array.isArray(s.value)?new Set(s.value):new Set);function c(f,d){const{nTriggerFormInput:h,nTriggerFormChange:v}=e,{onChange:p,"onUpdate:value":g,onUpdateValue:m}=r;if(Array.isArray(s.value)){const y=Array.from(s.value),b=y.findIndex(x=>x===d);f?~b||(y.push(d),m&&pt(m,y),g&&pt(g,y),h(),v(),a.value=y,p&&pt(p,y)):~b&&(y.splice(b,1),m&&pt(m,y),g&&pt(g,y),p&&pt(p,y),a.value=y,h(),v())}else f?(m&&pt(m,[d]),g&&pt(g,[d]),p&&pt(p,[d]),a.value=[d],h(),v()):(m&&pt(m,[]),g&&pt(g,[]),p&&pt(p,[]),a.value=[],h(),v())}return Qr($q,{checkedCountRef:l,maxRef:Ht(r,"max"),minRef:Ht(r,"min"),valueSetRef:u,disabledRef:i,mergedSizeRef:n,toggleCheckbox:c}),{mergedClsPrefix:t}},render(){return M("div",{class:`${this.mergedClsPrefix}-checkbox-group`,role:"group"},this.$slots)}}),JWe=we([ne("checkbox",`
 line-height: 1;
 font-size: var(--font-size);
 outline: none;
 cursor: pointer;
 display: inline-flex;
 align-items: center;
 white-space: nowrap;
 vertical-align: middle;
 --merged-color-table-header: var(--color-table-header);
 `,[we("&:hover",[ne("checkbox-box",[xe("border",{border:"var(--border-checked)"})])]),we("&:focus:not(:active)",[ne("checkbox-box",[xe("border",{border:"var(--border-focus)",boxShadow:"var(--box-shadow-focus)"})])]),Pe("table-header",[ne("checkbox-box",{backgroundColor:"var(--merged-color-table-header)"})]),Pe("checked",[ne("checkbox-box",{backgroundColor:"var(--color-checked)"},[ne("checkbox-icon",[we(".check-icon",`
 width: 100%;
 opacity: 1;
 transform: scale(1);
 `)])])]),Pe("indeterminate",[ne("checkbox-box",[ne("checkbox-icon",[we(".check-icon",`
 opacity: 0;
 transform: scale(.5);
 `),we(".line-icon",`
 opacity: 1;
 transform: scale(1);
 `)])])]),Pe("checked, indeterminate",[we("&:focus:not(:active)",[ne("checkbox-box",[xe("border",{border:"var(--border-checked)",boxShadow:"var(--box-shadow-focus)"})])]),ne("checkbox-box",`
 background-color: var(--color-checked);
 border-left: 0;
 border-top: 0;
 `,[xe("border",{border:"var(--border-checked)"})])]),Pe("disabled",{cursor:"not-allowed"},[Pe("checked",[ne("checkbox-box",`
 background-color: var(--color-disabled-checked);
 `,[xe("border",{border:"var(--border-disabled-checked)"}),ne("checkbox-icon",[we(".check-icon, .line-icon",{fill:"var(--check-mark-color-disabled-checked)"})])])]),ne("checkbox-box",`
 background-color: var(--color-disabled);
 `,[xe("border",{border:"var(--border-disabled)"}),ne("checkbox-icon",[we(".check-icon, .line-icon",{fill:"var(--check-mark-color-disabled)"})])]),xe("label",{color:"var(--text-color-disabled)"})]),ne("checkbox-box",`
 height: var(--size);
 width: var(--size);
 display: inline-block;
 box-sizing: border-box;
 border-radius: var(--border-radius);
 background-color: var(--color);
 position: relative;
 transition:
 background-color 0.3s var(--bezier);
 `,[xe("border",`
 transition:
 border-color .3s var(--bezier),
 box-shadow .3s var(--bezier);
 border-radius: inherit;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border: var(--border);
 `),ne("checkbox-icon",`
 display: flex;
 align-items: center;
 justify-content: center;
 position: absolute;
 left: 1px;
 right: 1px;
 top: 1px;
 bottom: 1px;
 `,[we(".check-icon, .line-icon",`
 fill: var(--check-mark-color);
 opacity: 0;
 transform: scale(0.5);
 transform-origin: center;
 transition:
 fill 0.3s var(--bezier),
 transform 0.3s var(--bezier),
 opacity 0.3s var(--bezier),
 border-color 0.3s var(--bezier);
 `),oh({left:"1px",top:"1px"})])]),xe("label",`
 color: var(--text-color);
 transition: color .3s var(--bezier);
 user-select: none;
 padding: var(--label-padding);
 `,[we("&:empty",{display:"none"})])]),d0(ne("checkbox",`
 --merged-color-table-header: var(--color-table-header-modal);
 `)),WS(ne("checkbox",`
 --merged-color-table-header: var(--color-table-header-popover);
 `))]);const e9e=Object.assign(Object.assign({},rr.props),{size:String,checked:{type:[Boolean,String,Number],default:void 0},defaultChecked:{type:[Boolean,String,Number],default:!1},value:[String,Number],disabled:{type:Boolean,default:void 0},indeterminate:Boolean,label:String,focusable:{type:Boolean,default:!0},checkedValue:{type:[Boolean,String,Number],default:!0},uncheckedValue:{type:[Boolean,String,Number],default:!1},"onUpdate:checked":[Function,Array],onUpdateChecked:[Function,Array],privateInsideTable:Boolean,onChange:[Function,Array]});var xC=mt({name:"Checkbox",props:e9e,setup(r){const{mergedClsPrefixRef:t}=pn(r),e=fl(r,{mergedSize(p){const{size:g}=r;if(g!==void 0)return g;if(a){const{value:m}=a.mergedSizeRef;if(m!==void 0)return m}if(p){const{mergedSize:m}=p;if(m!==void 0)return m.value}return"medium"},mergedDisabled(p){const{disabled:g}=r;if(g!==void 0)return g;if(a){if(a.disabledRef.value)return!0;const{maxRef:{value:m},checkedCountRef:y}=a;if(m!==void 0&&y.value>=m&&!u.value)return!0;const{minRef:{value:b}}=a;if(b!==void 0&&y.value<=b&&u.value)return!0}return p?p.disabled.value:!1}}),{mergedDisabledRef:n,mergedSizeRef:i}=e,a=nr($q,null),o=ke(r.defaultChecked),s=Ht(r,"checked"),l=ri(s,o),u=On(()=>{if(a){const p=a.valueSetRef.value;return p&&r.value!==void 0?p.has(r.value):!1}else return l.value===r.checkedValue}),c=rr("Checkbox","Checkbox",JWe,TP,r,t);function f(p){if(a&&r.value!==void 0)a.toggleCheckbox(!u.value,r.value);else{const{onChange:g,"onUpdate:checked":m,onUpdateChecked:y}=r,{nTriggerFormInput:b,nTriggerFormChange:x}=e,w=u.value?r.uncheckedValue:r.checkedValue;m&&pt(m,w,p),y&&pt(y,w,p),g&&pt(g,w,p),b(),x(),o.value=w}}function d(p){n.value||f(p)}function h(p){if(!n.value)switch(p.code){case"Space":case"Enter":case"NumpadEnter":f(p)}}function v(p){switch(p.code){case"Space":p.preventDefault()}}return Object.assign(e,{mergedClsPrefix:t,mergedDisabled:n,renderedChecked:u,mergedTheme:c,labelId:_p(),handleClick:d,handleKeyUp:h,handleKeyDown:v,cssVars:Q(()=>{const{value:p}=i,{common:{cubicBezierEaseInOut:g},self:{borderRadius:m,color:y,colorChecked:b,colorDisabled:x,colorTableHeader:w,colorTableHeaderModal:S,colorTableHeaderPopover:C,checkMarkColor:_,checkMarkColorDisabled:T,border:E,borderFocus:k,borderDisabled:I,borderChecked:P,boxShadowFocus:F,textColor:$,textColorDisabled:R,checkMarkColorDisabledChecked:L,colorDisabledChecked:O,borderDisabledChecked:B,labelPadding:U,[Gt("fontSize",p)]:W,[Gt("size",p)]:X}}=c.value;return{"--size":X,"--bezier":g,"--border-radius":m,"--border":E,"--border-checked":P,"--border-focus":k,"--border-disabled":I,"--border-disabled-checked":B,"--box-shadow-focus":F,"--color":y,"--color-checked":b,"--color-table-header":w,"--color-table-header-modal":S,"--color-table-header-popover":C,"--color-disabled":x,"--color-disabled-checked":O,"--text-color":$,"--text-color-disabled":R,"--check-mark-color":_,"--check-mark-color-disabled":T,"--check-mark-color-disabled-checked":L,"--font-size":W,"--label-padding":U}})})},render(){const{$slots:r,renderedChecked:t,mergedDisabled:e,indeterminate:n,privateInsideTable:i,cssVars:a,labelId:o,label:s,mergedClsPrefix:l,focusable:u,handleKeyUp:c,handleKeyDown:f,handleClick:d}=this;return M("div",{class:[`${l}-checkbox`,t&&`${l}-checkbox--checked`,e&&`${l}-checkbox--disabled`,n&&`${l}-checkbox--indeterminate`,i&&`${l}-checkbox--table-header`],tabindex:e||!u?void 0:0,role:"checkbox","aria-checked":n?"mixed":t,"aria-labelledby":o,style:a,onKeyup:c,onKeydown:f,onClick:d,onMousedown:()=>{zi("selectstart",window,h=>{h.preventDefault()},{once:!0})}},M("div",{class:`${l}-checkbox-box`},M(m0,null,{default:()=>this.indeterminate?M("div",{key:"indeterminate",class:`${l}-checkbox-icon`},KWe):M("div",{key:"check",class:`${l}-checkbox-icon`},qWe)}),M("div",{class:`${l}-checkbox-box__border`})),s!==null||r.default?M("span",{class:`${l}-checkbox__label`,id:o},Jr(r,"default",void 0,()=>[s])):null)}});function t9e(r){const{boxShadow2:t}=r;return{menuBoxShadow:t}}const r9e=ro({name:"Select",common:Bn,peers:{InternalSelection:hP,InternalSelectMenu:lq},self:t9e});var zq=r9e,n9e=we([ne("select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 `),ne("select-menu",`
 margin: 4px 0;
 box-shadow: var(--menu-box-shadow);
 `,[qu()])]);const i9e=Object.assign(Object.assign({},rr.props),{to:Ua.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:{type:Function,default:PHe},placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:{type:Function,default:r=>({label:r,value:r})},fallbackOption:{type:[Function,Boolean],default:()=>r=>({label:String(r),value:r})},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],onChange:{type:[Function,Array],validator:()=>!0,default:void 0},items:{type:Array,validator:()=>!0,default:void 0},displayDirective:{type:String,default:"show"}});var a9e=mt({name:"Select",props:i9e,setup(r){const{mergedClsPrefixRef:t,mergedBorderedRef:e,namespaceRef:n}=pn(r),i=rr("Select","Select",n9e,zq,r,t),a=ke(r.defaultValue),o=Ht(r,"value"),s=ri(o,a),l=ke(!1),u=ke(""),c=Q(()=>lh(T.value,kHe)),f=Q(()=>IHe(_.value)),d=ke(!1),h=ri(Ht(r,"show"),d),v=ke(null),p=ke(null),g=ke(null),{localeRef:m}=sf("Select"),y=Q(()=>{var J;return(J=r.placeholder)!==null&&J!==void 0?J:m.value.placeholder}),b=XS(r,["items","options"]),x=ke([]),w=ke([]),S=ke(new Map),C=Q(()=>{const{fallbackOption:J}=r;return J?ge=>Object.assign(J(ge),{value:ge}):!1}),_=Q(()=>w.value.concat(x.value).concat(b.value)),T=Q(()=>{if(r.remote)return b.value;{const{value:J}=_,{value:ge}=u;if(!ge.length||!r.filterable)return J;{const{filter:Ve}=r;return MHe(J,Ve,ge)}}});function E(J){const ge=r.remote,{value:Ve}=S,{value:Ge}=f,{value:rt}=C,Se=[];return J.forEach(ye=>{if(Ge.has(ye))Se.push(Ge.get(ye));else if(ge&&Ve.has(ye))Se.push(Ve.get(ye));else if(rt){const Re=rt(ye);Re&&Se.push(Re)}}),Se}const k=Q(()=>{if(r.multiple){const{value:J}=s;return Array.isArray(J)?E(J):[]}return null}),I=Q(()=>{const{value:J}=s;return!r.multiple&&!Array.isArray(J)?J===null?null:E([J])[0]||null:null}),P=fl(r),{mergedSizeRef:F,mergedDisabledRef:$}=P;function R(J,ge){const{onChange:Ve,"onUpdate:value":Ge,onUpdateValue:rt}=r,{nTriggerFormChange:Se,nTriggerFormInput:ye}=P;Ve&&pt(Ve,J,ge),rt&&pt(rt,J,ge),Ge&&pt(Ge,J,ge),a.value=J,Se(),ye()}function L(J){const{onBlur:ge}=r,{nTriggerFormBlur:Ve}=P;ge&&pt(ge,J),Ve()}function O(){const{onClear:J}=r;J&&pt(J)}function B(J){const{onFocus:ge}=r,{nTriggerFormFocus:Ve}=P;ge&&pt(ge,J),Ve()}function U(J){const{onSearch:ge}=r;ge&&pt(ge,J)}function W(J){const{onScroll:ge}=r;ge&&pt(ge,J)}function X(){var J;const{remote:ge,multiple:Ve}=r;if(ge){const{value:Ge}=S;if(Ve)(J=k.value)===null||J===void 0||J.forEach(rt=>{Ge.set(rt.value,rt)});else{const rt=I.value;rt&&Ge.set(rt.value,rt)}}}function ie(J){const{onUpdateShow:ge,"onUpdate:show":Ve}=r;ge&&pt(ge,J),Ve&&pt(Ve,J),d.value=J}function q(){$.value||(u.value="",ie(!0),d.value=!0,r.filterable&&K())}function j(){ie(!1)}function fe(){u.value=""}function se(){$.value||(h.value?r.filterable||j():q())}function ce(J){var ge,Ve;((Ve=(ge=g.value)===null||ge===void 0?void 0:ge.selfRef)===null||Ve===void 0?void 0:Ve.contains(J.relatedTarget))||(l.value=!1,L(J),j())}function _e(J){B(J),l.value=!0}function Me(J){l.value=!0}function Ye(J){var ge;((ge=v.value)===null||ge===void 0?void 0:ge.$el.contains(J.relatedTarget))||(l.value=!1,L(J),j())}function De(){var J;(J=v.value)===null||J===void 0||J.focus(),j()}function D(J){var ge;h.value&&(((ge=v.value)===null||ge===void 0?void 0:ge.$el.contains(J.target))||j())}function z(J){if(!Array.isArray(J))return[];if(C.value)return Array.from(J);{const{remote:ge}=r,{value:Ve}=f;if(ge){const{value:Ge}=S;return J.filter(rt=>Ve.has(rt)||Ge.has(rt))}else return J.filter(Ge=>Ve.has(Ge))}}function V(J){he(J.rawNode)}function he(J){if($.value)return;const{tag:ge,remote:Ve}=r;if(ge&&!Ve){const{value:Ge}=w,rt=Ge[0]||null;rt&&(x.value.push(rt),w.value=[])}if(Ve&&S.value.set(J.value,J),r.multiple){const Ge=z(s.value),rt=Ge.findIndex(Se=>Se===J.value);if(~rt){if(Ge.splice(rt,1),ge&&!Ve){const Se=re(J.value);~Se&&(x.value.splice(Se,1),u.value="")}}else Ge.push(J.value),u.value="";R(Ge,E(Ge))}else{if(ge&&!Ve){const Ge=re(J.value);~Ge?x.value=[x.value[Ge]]:x.value=[]}Y(),j(),R(J.value,J)}}function re(J){return x.value.findIndex(Ve=>Ve.value===J)}function pe(J){h.value||q();const{value:ge}=J.target;u.value=ge;const{tag:Ve,remote:Ge}=r;if(U(ge),Ve&&!Ge){if(!ge){w.value=[];return}const rt=r.onCreate(ge);b.value.some(Se=>Se.value===rt.value)||x.value.some(Se=>Se.value===rt.value)?w.value=[]:w.value=[rt]}}function Je(J){J.stopPropagation();const{multiple:ge}=r;!ge&&r.filterable&&j(),O(),ge?R([],[]):R(null,null)}function We(J){Vu(J,"action")||J.preventDefault()}function Le(J){W(J)}function $e(J){var ge,Ve,Ge,rt;switch(J.code){case"Space":if(r.filterable)break;case"Enter":case"NumpadEnter":if(h.value){const Se=(ge=g.value)===null||ge===void 0?void 0:ge.getPendingTmNode();Se?V(Se):r.filterable||(j(),Y())}else q();J.preventDefault();break;case"ArrowUp":if(r.loading)return;h.value&&((Ve=g.value)===null||Ve===void 0||Ve.prev());break;case"ArrowDown":if(r.loading)return;h.value?(Ge=g.value)===null||Ge===void 0||Ge.next():q();break;case"Escape":j(),(rt=v.value)===null||rt===void 0||rt.focus();break}}function H(J){switch(J.code){case"Space":r.filterable||J.preventDefault();break;case"ArrowUp":case"ArrowDown":J.preventDefault();break}}function Y(){var J;(J=v.value)===null||J===void 0||J.focus()}function K(){var J;(J=v.value)===null||J===void 0||J.focusInput()}function ee(){var J;(J=p.value)===null||J===void 0||J.syncPosition()}return X(),nn(Ht(r,"options"),X),nn(T,()=>{!h.value||oa(ee)}),nn(s,()=>{!h.value||oa(ee)}),{mergedClsPrefix:t,mergedBordered:e,namespace:n,treeMate:c,isMounted:of(),triggerRef:v,menuRef:g,pattern:u,uncontrolledShow:d,mergedShow:h,adjustedTo:Ua(r),uncontrolledValue:a,mergedValue:s,followerRef:p,localizedPlaceholder:y,selectedOption:I,selectedOptions:k,mergedSize:F,mergedDisabled:$,focused:l,handleMenuFocus:Me,handleMenuBlur:Ye,handleMenuTabOut:De,handleTriggerClick:se,handleToggle:V,handleDeleteOption:he,handlePatternInput:pe,handleClear:Je,handleTriggerBlur:ce,handleTriggerFocus:_e,handleKeyDown:H,handleKeyUp:$e,syncPosition:ee,handleMenuAfterLeave:fe,handleMenuClickOutside:D,handleMenuScroll:Le,handleMenuKeyup:$e,handleMenuKeydown:H,handleMenuMousedown:We,mergedTheme:i,cssVars:Q(()=>{const{self:{menuBoxShadow:J}}=i.value;return{"--menu-box-shadow":J}})}},render(){const{$slots:r,mergedClsPrefix:t}=this;return M("div",{class:`${t}-select`},M(Lp,null,{default:()=>[M(Fp,null,{default:()=>M(dq,{ref:"triggerRef",inputProps:this.inputProps,clsPrefix:t,showArrow:this.showArrow,maxTagCount:this.maxTagCount,bordered:this.mergedBordered,active:this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeyDown,onKeyup:this.handleKeyUp})}),M($p,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===Ua.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>M(pa,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var e,n;return(this.mergedShow||this.displayDirective==="show")&&Cl(M(jVe,Object.assign({},this.menuProps,{ref:"menuRef",virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:[`${t}-select-menu`,(e=this.menuProps)===null||e===void 0?void 0:e.class],clsPrefix:t,focusable:!0,autoPending:!0,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:"medium",renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[(n=this.menuProps)===null||n===void 0?void 0:n.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeyup:this.handleMenuKeyup,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow}),r),this.displayDirective==="show"?[[Ox,this.mergedShow],[cf,this.handleMenuClickOutside]]:[[cf,this.handleMenuClickOutside]])}})})]}))}}),o9e={itemSize:"28px",itemPadding:"0 4px",itemMargin:"0 0 0 8px",buttonIconSize:"16px",inputWidth:"60px",selectWidth:"unset",inputMargin:"0 0 0 8px",selectMargin:"0 0 0 8px",prefixMargin:"0 8px 0 0",suffixMargin:"0 0 0 8px",jumperFontSize:"14px"};const s9e=r=>{const{textColor2:t,primaryColor:e,primaryColorHover:n,primaryColorPressed:i,inputColorDisabled:a,textColorDisabled:o,borderColor:s,borderRadius:l,fontSize:u}=r;return Object.assign(Object.assign({},o9e),{buttonColor:"#0000",buttonColorHover:"#0000",buttonColorPressed:"#0000",buttonBorder:`1px solid ${s}`,buttonBorderHover:`1px solid ${s}`,buttonBorderPressed:`1px solid ${s}`,buttonIconColor:t,buttonIconColorHover:t,buttonIconColorPressed:t,itemTextColor:t,itemTextColorHover:n,itemTextColorPressed:i,itemTextColorActive:e,itemTextColorDisabled:o,itemColor:"#0000",itemColorHover:"#0000",itemColorPressed:"#0000",itemColorActive:"#0000",itemColorActiveHover:"#0000",itemColorDisabled:a,itemBorder:"1px solid #0000",itemBorderHover:"1px solid #0000",itemBorderPressed:"1px solid #0000",itemBorderActive:`1px solid ${e}`,itemBorderDisabled:`1px solid ${s}`,itemBorderRadius:l,itemFontSize:u,jumperTextColor:t,jumperTextColorDisabled:o})},l9e=ro({name:"Pagination",common:Bn,peers:{Select:zq,Input:uC},self:s9e});var Gq=l9e;function u9e(r,t,e=9){if(t===1)return[1];if(t===2)return[1,2];const n=1,i=t;let a=r,o=r;const s=(e-5)/2;o+=Math.ceil(s),o=Math.min(Math.max(o,n+e-3),i-2),a-=Math.floor(s),a=Math.max(Math.min(a,i-e+3),n+2);let l=!1,u=!1;a>n+2&&(l=!0),o<i-2&&(u=!0);const c=[];c.push(n),l?c.push(-2):i>=n+1&&c.push(n+1);for(let f=a;f<=o;++f)c.push(f);return u?c.push(-1):o===i-2&&c[c.length-1]!==i-1&&c.push(i-1),c[c.length-1]!==i&&c.push(i),c}function c9e(r,t){return r.map(e=>{switch(e){case-2:return{type:"fastBackward",label:"fastBackward",active:!1};case-1:return{type:"fastForward",label:"fastForward",active:!1};default:return e===t?{type:"page",label:e,active:!0}:{type:"page",label:e,active:!1}}})}function f9e(r,t,e){const n=u9e(r,t,e);return c9e(n,r)}var d9e=ne("pagination",`
 display: flex;
 vertical-align: middle;
 font-size: var(--item-font-size);
 flex-wrap: nowrap;
`,[ne("pagination-prefix",`
 display: flex;
 align-items: center;
 margin: var(--prefix-margin);
 `),ne("pagination-suffix",`
 display: flex;
 align-items: center;
 margin: var(--suffix-margin);
 `),we("> *:not(:first-child)",{margin:"var(--item-margin)"}),ne("select",{width:"var(--select-width)"}),we("&.transition-disabled",[ne("pagination-item",{transition:"none!important"})]),ne("pagination-quick-jumper",`
 white-space: nowrap;
 display: flex;
 color: var(--jumper-text-color);
 transition: color .3s var(--bezier);
 align-items: center;
 font-size: var(--jumter-font-size);
 `,[ne("input",`
 margin: var(--input-margin);
 width: var(--input-width);
 `)]),ne("pagination-item",`
 position: relative;
 cursor: pointer;
 user-select: none;
 display: flex;
 align-items: center;
 justify-content: center;
 box-sizing: border-box;
 min-width: var(--item-size);
 height: var(--item-size);
 padding: var(--item-padding);
 background-color: var(--item-color);
 color: var(--item-text-color);
 border-radius: var(--item-border-radius);
 border: var(--item-border);
 fill: var(--button-icon-color);
 transition:
 color .3s var(--bezier),
 border-color .3s var(--bezier),
 background-color .3s var(--bezier),
 fill .3s var(--bezier);
 `,[Pe("button",`
 background: var(--button-color);
 color: var(--button-icon-color);
 border: var(--button-border);
 `,[ne("base-icon",`
 font-size: var(--button-icon-size);
 `)]),Cn("disabled",[we("&:hover",{background:"var(--item-color-hover)",color:"var(--item-text-color-hover)",border:"var(--item-border-hover)"},[Pe("button",{background:"var(--button-color-hover)",border:"var(--button-border-hover)",color:"var(--button-icon-color-hover)"})]),we("&:active",{background:"var(--item-color-pressed)",color:"var(--item-text-color-pressed)",border:"var(--item-border-pressed)"},[Pe("button",{background:"var(--button-color-pressed)",border:"var(--button-border-pressed)",color:"var(--button-icon-color-pressed)"})]),Pe("active",{background:"var(--item-color-active)",color:"var(--item-text-color-active)",border:"var(--item-border-active)"},[we("&:hover",{background:"var(--item-color-active-hover)"})])]),Pe("disabled",`
 cursor: not-allowed;
 color: var(--item-text-color-disabled);
 `,[Pe("active, button",{backgroundColor:"var(--item-color-disabled)",border:"var(--item-border-disabled)"})])]),Pe("disabled",{cursor:"not-allowed"},[ne("pagination-quick-jumper",{color:"var(--jumper-text-color-disabled)"})])]);const h9e=Object.assign(Object.assign({},rr.props),{page:Number,defaultPage:{type:Number,default:1},itemCount:Number,pageCount:Number,defaultPageCount:{type:Number,default:1},showSizePicker:Boolean,pageSize:Number,defaultPageSize:{type:Number,default:10},pageSizes:{type:Array,default(){return[10]}},showQuickJumper:Boolean,disabled:Boolean,pageSlot:{type:Number,default:9},prev:Function,next:Function,prefix:Function,suffix:Function,"onUpdate:page":[Function,Array],onUpdatePage:[Function,Array],"onUpdate:pageSize":[Function,Array],onUpdatePageSize:[Function,Array],onPageSizeChange:[Function,Array],onChange:[Function,Array]});var v9e=mt({name:"Pagination",props:h9e,setup(r){const{NConfigProvider:t,mergedClsPrefixRef:e}=pn(r),n=rr("Pagination","Pagination",d9e,Gq,r,e),{localeRef:i}=sf("Pagination"),a=ke(null),o=ke(null),s=ke(""),l=ke(r.defaultPage),u=ke(r.defaultPageSize),c=ri(Ht(r,"page"),l),f=ri(Ht(r,"pageSize"),u),d=Q(()=>{const{itemCount:L}=r;if(L!==void 0)return Math.max(1,Math.ceil(L/f.value));const{pageCount:O}=r;return O!==void 0?O:1}),h=ke(!1),v=ke(!1),p=Q(()=>{const L=i.value.selectionSuffix;return r.pageSizes.map(O=>typeof O=="number"?{label:`${O} / ${L}`,value:O}:O)}),g=Q(()=>{var L,O;return((O=(L=t==null?void 0:t.mergedComponentPropsRef.value)===null||L===void 0?void 0:L.Pagination)===null||O===void 0?void 0:O.inputSize)||"small"}),m=Q(()=>{var L,O;return((O=(L=t==null?void 0:t.mergedComponentPropsRef.value)===null||L===void 0?void 0:L.Pagination)===null||O===void 0?void 0:O.selectSize)||"small"}),y=Q(()=>(c.value-1)*f.value),b=Q(()=>{const L=c.value*f.value-1,{itemCount:O}=r;return O!==void 0&&L>O?O:L}),x=()=>{oa(()=>{var L;const{value:O}=a;!O||(O.classList.add("transition-disabled"),(L=a.value)===null||L===void 0||L.offsetWidth,O.classList.remove("transition-disabled"))})};function w(L){if(L===c.value)return;const{"onUpdate:page":O,onUpdatePage:B,onChange:U}=r;O&&pt(O,L),B&&pt(B,L),U&&pt(U,L),l.value=L}function S(L){if(L===f.value)return;const{"onUpdate:pageSize":O,onUpdatePageSize:B,onPageSizeChange:U}=r;O&&pt(O,L),B&&pt(B,L),U&&pt(U,L),u.value=L,d.value<c.value&&w(d.value)}function C(){if(r.disabled)return;const L=Math.min(c.value+1,d.value);w(L)}function _(){if(r.disabled)return;const L=Math.max(c.value-1,1);w(L)}function T(){if(r.disabled)return;const L=Math.min(c.value+(r.pageSlot-4),d.value);w(L)}function E(){if(r.disabled)return;const L=Math.max(c.value-(r.pageSlot-4),1);w(L)}function k(L){S(L)}function I(L){var O;if(L.code==="Enter"||L.code==="NumpadEnter"){const B=parseInt(s.value);!Number.isNaN(B)&&B>=1&&B<=d.value&&(w(B),s.value="",(O=o.value)===null||O===void 0||O.blur())}}function P(L){if(!r.disabled)switch(L.type){case"page":w(L.label);break;case"fastBackward":E();break;case"fastForward":T();break}}function F(L){if(!r.disabled){switch(L.type){case"fastBackward":v.value=!0;break;case"fastForward":h.value=!0;break;default:return}x()}}function $(L){if(!r.disabled){switch(L.type){case"fastBackward":v.value=!1;break;case"fastForward":h.value=!1;break;default:return}x()}}function R(L){s.value=L}return Co(()=>{c.value,f.value,x()}),{mergedClsPrefix:e,locale:i,selfRef:a,jumperRef:o,mergedPage:c,showFastBackward:v,showFastForward:h,pageItems:Q(()=>f9e(c.value,d.value,r.pageSlot)),jumperValue:s,pageSizeOptions:p,mergedPageSize:f,inputSize:g,selectSize:m,mergedTheme:n,mergedPageCount:d,startIndex:y,endIndex:b,handleJumperInput:R,handleBackwardClick:_,handleForwardClick:C,handlePageItemClick:P,handleSizePickerChange:k,handleQuickJumperKeyUp:I,handlePageItemMouseEnter:F,handlePageItemMouseLeave:$,cssVars:Q(()=>{const{self:{itemSize:L,itemPadding:O,itemMargin:B,inputWidth:U,selectWidth:W,inputMargin:X,selectMargin:ie,buttonBorder:q,buttonBorderHover:j,buttonBorderPressed:fe,buttonIconColor:se,buttonIconColorHover:ce,buttonIconColorPressed:_e,buttonIconSize:Me,itemTextColor:Ye,itemTextColorHover:De,itemTextColorPressed:D,itemTextColorActive:z,itemTextColorDisabled:V,itemColor:he,itemColorHover:re,itemColorPressed:pe,itemColorActive:Je,itemColorActiveHover:We,itemColorDisabled:Le,itemBorder:$e,itemBorderHover:H,itemBorderPressed:Y,itemBorderActive:K,itemBorderDisabled:ee,itemBorderRadius:J,itemFontSize:ge,jumperFontSize:Ve,jumperTextColor:Ge,jumperTextColorDisabled:rt,prefixMargin:Se,suffixMargin:ye,buttonColor:Re,buttonColorHover:St,buttonColorPressed:kt},common:{cubicBezierEaseInOut:Ae}}=n.value;return{"--prefix-margin":Se,"--suffix-margin":ye,"--item-font-size":ge,"--select-width":W,"--select-margin":ie,"--input-width":U,"--input-margin":X,"--item-size":L,"--item-text-color":Ye,"--item-text-color-disabled":V,"--item-text-color-hover":De,"--item-text-color-active":z,"--item-text-color-pressed":D,"--item-color":he,"--item-color-hover":re,"--item-color-disabled":Le,"--item-color-active":Je,"--item-color-active-hover":We,"--item-color-pressed":pe,"--item-border":$e,"--item-border-hover":H,"--item-border-disabled":ee,"--item-border-active":K,"--item-border-pressed":Y,"--item-padding":O,"--item-border-radius":J,"--bezier":Ae,"--jumper-font-size":Ve,"--jumper-text-color":Ge,"--jumper-text-color-disabled":rt,"--item-margin":B,"--button-icon-size":Me,"--button-icon-color":se,"--button-icon-color-hover":ce,"--button-icon-color-pressed":_e,"--button-color-hover":St,"--button-color":Re,"--button-color-pressed":kt,"--button-border":q,"--button-border-hover":j,"--button-border-pressed":fe}})}},render(){const{$slots:r,mergedClsPrefix:t,disabled:e,cssVars:n,mergedPage:i,mergedPageCount:a,pageItems:o,showFastBackward:s,showFastForward:l,showSizePicker:u,showQuickJumper:c,mergedTheme:f,locale:d,inputSize:h,selectSize:v,mergedPageSize:p,pageSizeOptions:g,jumperValue:m,prev:y,next:b,prefix:x,suffix:w,handleJumperInput:S,handleSizePickerChange:C,handleBackwardClick:_,handlePageItemClick:T,handlePageItemMouseEnter:E,handlePageItemMouseLeave:k,handleForwardClick:I,handleQuickJumperKeyUp:P}=this,F=y||r.prev,$=b||r.next;return M("div",{ref:"selfRef",class:[`${t}-pagination`,e&&`${t}-pagination--disabled`],style:n},x||r.prefix?M("div",{class:`${t}-pagination-prefix`},(r.prefix?r.prefix:x)({page:i,pageSize:p,pageCount:a,startIndex:this.startIndex,endIndex:this.endIndex,itemCount:this.itemCount})):null,M("div",{class:[`${t}-pagination-item`,!F&&`${t}-pagination-item--button`,(i<=1||i>a||e)&&`${t}-pagination-item--disabled`],onClick:_},F?F({page:i,pageSize:p,pageCount:a,startIndex:this.startIndex,endIndex:this.endIndex,itemCount:this.itemCount}):M(si,{clsPrefix:t},{default:()=>M(rh,null)})),o.map((R,L)=>M("div",{key:L,class:[`${t}-pagination-item`,{[`${t}-pagination-item--active`]:R.active,[`${t}-pagination-item--disabled`]:e}],onClick:()=>T(R),onMouseenter:()=>E(R),onMouseleave:()=>k(R)},R.type==="page"?R.label:null,R.type==="fastBackward"?s?M(si,{clsPrefix:t},{default:()=>M(nh,null)}):M(si,{clsPrefix:t},{default:()=>M(MX,null)}):null,R.type==="fastForward"?l?M(si,{clsPrefix:t},{default:()=>M(ih,null)}):M(si,{clsPrefix:t},{default:()=>M(MX,null)}):null)),M("div",{class:[`${t}-pagination-item`,!$&&`${t}-pagination-item--button`,{[`${t}-pagination-item--disabled`]:i<1||i>=a||e}],onClick:I},$?$({page:i,pageSize:p,pageCount:a,itemCount:this.itemCount,startIndex:this.startIndex,endIndex:this.endIndex}):M(si,{clsPrefix:t},{default:()=>M(ah,null)})),u?M(a9e,{size:v,placeholder:"",options:g,value:p,disabled:e,theme:f.peers.Select,themeOverrides:f.peerOverrides.Select,onUpdateValue:C}):null,c?M("div",{class:`${t}-pagination-quick-jumper`},d.goto,M(ch,{ref:"jumperRef",value:m,onUpdateValue:S,size:h,placeholder:"",disabled:e,theme:f.peers.Input,themeOverrides:f.peerOverrides.Input,onKeyup:P})):null,w||r.suffix?M("div",{class:`${t}-pagination-suffix`},(r.suffix?r.suffix:w)({page:i,pageSize:p,pageCount:a,startIndex:this.startIndex,endIndex:this.endIndex,itemCount:this.itemCount})):null)}}),p9e={padding:"8px 14px"};const g9e=r=>{const{borderRadius:t,boxShadow2:e,baseColor:n}=r;return Object.assign(Object.assign({},p9e),{borderRadius:t,boxShadow:e,color:"rgba(0, 0, 0, .85)",textColor:n})},m9e=ro({name:"Tooltip",common:Bn,peers:{Popover:b0},self:g9e});var AP=m9e;const y9e=ro({name:"Ellipsis",common:Bn,peers:{Tooltip:AP}});var Uq=y9e,b9e={radioSizeSmall:"14px",radioSizeMedium:"16px",radioSizeLarge:"18px",labelPadding:"0 8px"};const x9e=r=>{const{borderColor:t,primaryColor:e,baseColor:n,textColorDisabled:i,inputColorDisabled:a,textColor2:o,opacityDisabled:s,borderRadius:l,fontSizeSmall:u,fontSizeMedium:c,fontSizeLarge:f,heightSmall:d,heightMedium:h,heightLarge:v}=r;return Object.assign(Object.assign({},b9e),{buttonHeightSmall:d,buttonHeightMedium:h,buttonHeightLarge:v,fontSizeSmall:u,fontSizeMedium:c,fontSizeLarge:f,boxShadow:`inset 0 0 0 1px ${t}`,boxShadowActive:`inset 0 0 0 1px ${e}`,boxShadowFocus:`inset 0 0 0 1px ${e}, 0 0 0 2px ${qr(e,{alpha:.2})}`,boxShadowHover:`inset 0 0 0 1px ${e}`,boxShadowDisabled:`inset 0 0 0 1px ${t}`,color:n,colorDisabled:a,textColor:o,textColorDisabled:i,dotColorActive:e,dotColorDisabled:t,buttonBorderColor:t,buttonBorderColorActive:e,buttonBorderColorHover:t,buttonColor:n,buttonColorActive:n,buttonTextColor:o,buttonTextColorActive:e,buttonTextColorHover:e,opacityDisabled:s,buttonBoxShadowFocus:`inset 0 0 0 1px ${e}, 0 0 0 2px ${qr(e,{alpha:.3})}`,buttonBoxShadowHover:"inset 0 0 0 1px #0000",buttonBoxShadow:"inset 0 0 0 1px #0000",buttonBorderRadius:l})},w9e={name:"Radio",common:Bn,self:x9e};var kP=w9e,S9e={thPaddingSmall:"8px",thPaddingMedium:"12px",thPaddingLarge:"12px",tdPaddingSmall:"8px",tdPaddingMedium:"12px",tdPaddingLarge:"12px",sorterSize:"15px",filterSize:"15px",paginationMargin:"12px 0 0 0",emptyPadding:"16px 0",actionPadding:"8px 12px",actionButtonMargin:"0 8px 0 0"};const C9e=r=>{const{cardColor:t,modalColor:e,popoverColor:n,textColor2:i,textColor1:a,tableHeaderColor:o,tableColorHover:s,iconColor:l,primaryColor:u,fontWeightStrong:c,borderRadius:f,lineHeight:d,fontSizeSmall:h,fontSizeMedium:v,fontSizeLarge:p,dividerColor:g,heightSmall:m,opacityDisabled:y,tableColorStriped:b}=r;return Object.assign(Object.assign({},S9e),{actionDividerColor:g,lineHeight:d,borderRadius:f,fontSizeSmall:h,fontSizeMedium:v,fontSizeLarge:p,borderColor:Si(t,g),tdColorHover:Si(t,s),tdColorStriped:Si(t,b),thColor:Si(t,o),thColorHover:Si(Si(t,o),s),tdColor:t,tdTextColor:i,thTextColor:a,thFontWeight:c,thButtonColorHover:s,thIconColor:l,thIconColorActive:u,borderColorModal:Si(e,g),tdColorHoverModal:Si(e,s),tdColorStripedModal:Si(e,b),thColorModal:Si(e,o),thColorHoverModal:Si(Si(e,o),s),tdColorModal:e,borderColorPopover:Si(n,g),tdColorHoverPopover:Si(n,s),tdColorStripedPopover:Si(n,b),thColorPopover:Si(n,o),thColorHoverPopover:Si(Si(n,o),s),tdColorPopover:n,boxShadowBefore:"inset -12px 0 8px -12px rgba(0, 0, 0, .18)",boxShadowAfter:"inset 12px 0 8px -12px rgba(0, 0, 0, .18)",loadingColor:u,loadingSize:m,opacityLoading:y})},E9e=ro({name:"DataTable",common:Bn,peers:{Button:w0,Checkbox:TP,Radio:kP,Pagination:Gq,Scrollbar:Xu,Empty:sC,Popover:b0,Ellipsis:Uq},self:C9e});var _9e=E9e;const T9e=Object.assign(Object.assign({},lC),rr.props);var Vq=mt({name:"Tooltip",props:T9e,__popover__:!0,setup(r){const t=rr("Tooltip","Tooltip",void 0,AP,r),e=ke(null);return Object.assign(Object.assign({},{syncPosition(){e.value.syncPosition()},setShow(i){e.value.setShow(i)}}),{popoverRef:e,mergedTheme:t,popoverThemeOverrides:Q(()=>t.value.self)})},render(){const{mergedTheme:r,internalExtraClass:t}=this;return M(x0,Object.assign(Object.assign({},this.$props),{theme:r.peers.Popover,themeOverrides:r.peerOverrides.Popover,builtinThemeOverrides:this.popoverThemeOverrides,internalExtraClass:t.concat("tooltip"),ref:"popoverRef"}),this.$slots)}}),A9e=ne("ellipsis",{overflow:"hidden"},[Cn("line-clamp",`
 white-space: nowrap;
 display: inline-block;
 vertical-align: bottom;
 max-width: 100%;
 `),Pe("line-clamp",`
 display: -webkit-inline-box;
 -webkit-box-orient: vertical;
 `),Pe("cursor-pointer",`
 cursor: pointer;
 `)]);function Hq(r){return`${r}-ellipsis--line-clamp`}function Wq(r,t){return`${r}-ellipsis--cursor-${t}`}const k9e=Object.assign(Object.assign({},rr.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}});var jq=mt({name:"Ellipsis",inheritAttrs:!1,props:k9e,setup(r,{slots:t,attrs:e}){const{mergedClsPrefixRef:n}=pn(r),i=rr("Ellipsis","ellipsis",A9e,Uq,r,n),a=ke(null),o=ke(null),s=ke(!1),l=Q(()=>{const{lineClamp:p}=r,{value:g}=s;return p!==void 0?{textOverflow:"","-webkit-line-clamp":g?"":p}:{textOverflow:g?"":"ellipsis","-webkit-line-clamp":""}});function u(){let p=!1;const{value:g}=s;if(g)return!0;const{value:m}=a;if(m){const{lineClamp:y}=r;d(m),y!==void 0?p=m.scrollHeight<=m.offsetHeight:p=m.scrollWidth<=m.offsetWidth,h(m,p)}return p}const c=Q(()=>r.expandTrigger==="click"?()=>{var p;const{value:g}=s;g&&((p=o.value)===null||p===void 0||p.setShow(!1)),s.value=!g}:void 0),f=()=>M("span",Object.assign({},Tl(e,{class:[`${n.value}-ellipsis`,r.lineClamp!==void 0?Hq(n.value):void 0,r.expandTrigger==="click"?Wq(n.value,"pointer"):void 0],style:l.value}),{ref:"triggerRef",onClick:c.value,onMouseenter:r.expandTrigger==="click"?u:void 0}),t);function d(p){if(!p)return;const g=l.value,m=Hq(n.value);r.lineClamp!==void 0?v(p,m,"add"):v(p,m,"remove");for(const y in g)p.style[y]!==g[y]&&(p.style[y]=g[y])}function h(p,g){const m=Wq(n.value,"pointer");r.expandTrigger==="click"&&!g?v(p,m,"add"):v(p,m,"remove")}function v(p,g,m){m==="add"?p.classList.contains(g)||p.classList.add(g):p.classList.contains(g)&&p.classList.remove(g)}return{mergedTheme:i,triggerRef:a,tooltipRef:o,handleClick:c,renderTrigger:f,getTooltipDisabled:u}},render(){var r;const{tooltip:t,renderTrigger:e,$slots:n}=this;if(t){const{mergedTheme:i}=this;return M(Vq,Object.assign({ref:"tooltipRef",placement:"top"},t,{getDisabled:this.getTooltipDisabled,theme:i.peers.Tooltip,themeOverrides:i.peerOverrides.Tooltip}),{trigger:e,default:(r=n.tooltip)!==null&&r!==void 0?r:n.default})}else return e()}}),M9e=mt({name:"DataTableRenderSorter",props:{render:{type:Function,required:!0},order:{type:[String,Boolean],default:!1}},render(){const{render:r,order:t}=this;return r({order:t})}});const Ku=Symbol("dataTable");var I9e=mt({name:"SortIcon",props:{column:{type:Object,required:!0}},setup(r){const{NConfigProvider:t}=pn(),{mergedSortStateRef:e,mergedClsPrefixRef:n}=nr(Ku),i=Q(()=>e.value.find(l=>l.columnKey===r.column.key)),a=Q(()=>i.value!==void 0),o=Q(()=>{const{value:l}=i;return l&&a.value?l.order:!1}),s=Q(()=>{var l,u;return((u=(l=t==null?void 0:t.mergedComponentPropsRef.value)===null||l===void 0?void 0:l.DataTable)===null||u===void 0?void 0:u.renderSorter)||r.column.renderSorter});return{mergedClsPrefix:n,active:a,mergedSortOrder:o,mergedRenderSorter:s}},render(){const{mergedRenderSorter:r,mergedSortOrder:t,mergedClsPrefix:e}=this;return r?M(M9e,{render:r,order:t}):M("span",{class:[`${e}-data-table-sorter`,{[`${e}-data-table-sorter--asc`]:t==="ascend",[`${e}-data-table-sorter--desc`]:t==="descend"}]},M(si,{clsPrefix:e},{default:()=>M(iUe,null)}))}}),P9e=mt({name:"DataTableRenderFilter",props:{render:{type:Function,required:!0},active:{type:Boolean,default:!1},show:{type:Boolean,default:!1}},render(){const{render:r,active:t,show:e}=this;return r({active:t,show:e})}});const D9e={name:String,value:{type:[String,Number],default:"on"},checked:{type:Boolean,default:void 0},defaultChecked:Boolean,disabled:{type:Boolean,default:void 0},size:String,onUpdateChecked:[Function,Array],"onUpdate:checked":[Function,Array],checkedValue:{type:Boolean,validator:()=>(Zl("radio","`checked-value` is deprecated, please use `checked` instead."),!0),default:void 0}},Yq=Symbol("radioGroup");function MP(r){const t=fl(r,{mergedSize(w){const{size:S}=r;if(S!==void 0)return S;if(o){const{mergedSizeRef:{value:C}}=o;if(C!==void 0)return C}return w?w.mergedSize.value:"medium"},mergedDisabled(w){return!!(r.disabled||(o==null?void 0:o.disabledRef.value)||(w==null?void 0:w.disabled.value))}}),{mergedSizeRef:e,mergedDisabledRef:n}=t,i=ke(null),a=ke(null),o=nr(Yq,null),s=ke(r.defaultChecked),l=Ht(r,"checked"),u=ri(l,s),c=On(()=>o?o.valueRef.value===r.value:u.value),f=On(()=>{const{name:w}=r;if(w!==void 0)return w;if(o)return o.nameRef.value}),d=ke(!1);function h(){if(o){const{doUpdateValue:w}=o,{value:S}=r;pt(w,S)}else{const{onUpdateChecked:w,"onUpdate:checked":S}=r,{nTriggerFormInput:C,nTriggerFormChange:_}=t;w&&pt(w,!0),S&&pt(S,!0),C(),_(),s.value=!0}}function v(){n.value||c.value||h()}function p(){v()}function g(){d.value=!1}function m(){d.value=!0}function y(w){var S;switch(w.code){case"Enter":case"NumpadEnter":(S=i.value)===null||S===void 0||S.click()}}function b(){n.value||setTimeout(()=>{var w,S;((w=a.value)===null||w===void 0?void 0:w.contains(document.activeElement))||(S=i.value)===null||S===void 0||S.focus()},0)}function x(){var w;(w=i.value)===null||w===void 0||w.click()}return{mergedClsPrefix:o?o.mergedClsPrefixRef:pn(r).mergedClsPrefixRef,inputRef:i,labelRef:a,mergedName:f,mergedDisabled:n,uncontrolledChecked:s,renderSafeChecked:c,focus:d,mergedSize:e,handleRadioInputChange:p,handleRadioInputBlur:g,handleRadioInputFocus:m,handleKeyUp:y,handleMouseDown:b,handleClick:x}}MP.props=D9e;var R9e=ne("radio",`
 line-height: 1;
 outline: none;
 position: relative;
 user-select: none;
 display: inline-flex;
 vertical-align: middle;
 align-items: center;
 font-size: var(--font-size);
`,[xe("dot",`
 height: var(--radio-size);
 width: var(--radio-size);
 `),xe("radio-input",`
 border: 0;
 width: 0;
 height: 0;
 opacity: 0;
 margin: 0;
 `),xe("dot",`
 background: var(--color);
 box-shadow: var(--box-shadow);
 transition:
 background-color .3s var(--bezier),
 box-shadow .3s var(--bezier);
 position: relative;
 border-radius: 50%;
 `,[we("&::before",`
 content: "";
 opacity: 0;
 position: absolute;
 left: 4px;
 top: 4px;
 height: calc(100% - 8px);
 width: calc(100% - 8px);
 border-radius: 50%;
 transform: scale(.8);
 background: var(--dot-color-active);
 transition: 
 opacity .3s var(--bezier),
 background-color .3s var(--bezier),
 transform .3s var(--bezier);
 `),Pe("checked",{boxShadow:"var(--box-shadow-active)"},[we("&::before",`
 opacity: 1;
 transform: scale(1);
 `)])]),xe("label",`
 color: var(--text-color);
 padding: var(--label-padding);
 display: inline-block;
 white-space: nowrap;
 transition: color .3s var(--bezier);
 `),Cn("disabled",`
 cursor: pointer;
 `,[we("&:hover",[xe("dot",{boxShadow:"var(--box-shadow-hover)"})]),Pe("focus",[we("&:not(:active)",[xe("dot",{boxShadow:"var(--box-shadow-focus)"})])])]),Pe("disabled",`
 cursor: not-allowed;
 `,[xe("dot",{boxShadow:"var(--box-shadow-disabled)",backgroundColor:"var(--color-disabled)"},[we("&::before",{backgroundColor:"var(--dot-color-disabled)"}),Pe("checked",`
 transform: scale(1);
 opacity: 1;
 `)]),xe("label",{color:"var(--text-color-disabled)"})])]),O9e=mt({name:"Radio",props:Object.assign(Object.assign({},rr.props),MP.props),setup(r){const t=MP(r),e=rr("Radio","Radio",R9e,kP,r,t.mergedClsPrefix);return Object.assign(t,{cssVars:Q(()=>{const{mergedSize:{value:n}}=t,{common:{cubicBezierEaseInOut:i},self:{boxShadow:a,boxShadowActive:o,boxShadowDisabled:s,boxShadowFocus:l,boxShadowHover:u,color:c,colorDisabled:f,textColor:d,textColorDisabled:h,dotColorActive:v,dotColorDisabled:p,labelPadding:g,[Gt("fontSize",n)]:m,[Gt("radioSize",n)]:y}}=e.value;return{"--bezier":i,"--box-shadow":a,"--box-shadow-active":o,"--box-shadow-disabled":s,"--box-shadow-focus":l,"--box-shadow-hover":u,"--color":c,"--color-disabled":f,"--dot-color-active":v,"--dot-color-disabled":p,"--font-size":m,"--radio-size":y,"--text-color":d,"--text-color-disabled":h,"--label-padding":g}})})},render(){const{$slots:r,mergedClsPrefix:t}=this;return M("div",{class:[`${t}-radio`,{[`${t}-radio--disabled`]:this.mergedDisabled,[`${t}-radio--checked`]:this.renderSafeChecked,[`${t}-radio--focus`]:this.focus}],style:this.cssVars,onKeyup:this.handleKeyUp,onClick:this.handleClick,onMousedown:this.handleMouseDown},M("input",{ref:"inputRef",type:"radio",class:`${t}-radio__radio-input`,value:this.value,name:this.mergedName,checked:this.renderSafeChecked,disabled:this.mergedDisabled,onChange:this.handleRadioInputChange,onFocus:this.handleRadioInputFocus,onBlur:this.handleRadioInputBlur}),M("div",{class:[`${t}-radio__dot`,this.renderSafeChecked&&`${t}-radio__dot--checked`]}),r.default?M("div",{ref:"labelRef",class:`${t}-radio__label`},r.default()):null)}}),L9e=ne("radio-group",`
 display: inline-block;
 font-size: var(--font-size);
`,[xe("splitor",`
 display: inline-block;
 vertical-align: bottom;
 width: 1px;
 transition:
 background-color .3s var(--bezier),
 opacity .3s var(--bezier);
 background: var(--button-border-color);
 `,[Pe("checked",{backgroundColor:"var(--button-border-color-active)"}),Pe("disabled",{opacity:"var(--opacity-disabled)"})]),Pe("button-group",`
 white-space: nowrap;
 height: var(--height);
 line-height: var(--height);
 `,[ne("radio-button",{height:"var(--height)",lineHeight:"var(--height)"}),xe("splitor",{height:"var(--height)"})]),ne("radio-button",`
 vertical-align: bottom;
 outline: none;
 position: relative;
 user-select: none;
 display: inline-block;
 box-sizing: border-box;
 padding-left: 14px;
 padding-right: 14px;
 white-space: nowrap;
 transition:
 background-color .3s var(--bezier),
 opacity .3s var(--bezier),
 border-color .3s var(--bezier),
 color .3s var(--bezier);
 color: var(--button-text-color);
 border-top: 1px solid var(--button-border-color);
 border-bottom: 1px solid var(--button-border-color);
 `,[xe("radio-input",`
 border: 0;
 width: 0;
 height: 0;
 opacity: 0;
 margin: 0;
 `),xe("state-border",`
 pointer-events: none;
 position: absolute;
 box-shadow: var(--button-box-shadow);
 transition: box-shadow .3s var(--bezier);
 left: -1px;
 bottom: -1px;
 right: -1px;
 top: -1px;
 `),we("&:first-child",`
 border-top-left-radius: var(--button-border-radius);
 border-bottom-left-radius: var(--button-border-radius);
 border-left: 1px solid var(--button-border-color);
 `,[xe("state-border",`
 border-top-left-radius: var(--button-border-radius);
 border-bottom-left-radius: var(--button-border-radius);
 `)]),we("&:last-child",`
 border-top-right-radius: var(--button-border-radius);
 border-bottom-right-radius: var(--button-border-radius);
 border-right: 1px solid var(--button-border-color);
 `,[xe("state-border",`
 border-top-right-radius: var(--button-border-radius);
 border-bottom-right-radius: var(--button-border-radius);
 `)]),Cn("disabled",`
 cursor: pointer;
 `,[we("&:hover",[xe("state-border",`
 transition: box-shadow .3s var(--bezier);
 box-shadow: var(--button-box-shadow-hover);
 `),Cn("checked",{color:"var(--button-text-color-hover)"})]),Pe("focus",[we("&:not(:active)",[xe("state-border",{boxShadow:"var(--button-box-shadow-focus)"})])])]),Pe("checked",`
 background: var(--button-color-active);
 color: var(--button-text-color-active);
 border-color: var(--button-border-color-active);
 `),Pe("disabled",`
 cursor: not-allowed;
 opacity: var(--opacity-disabled);
 `)])]);function F9e(r,t,e){var n;const i=[];let a=!1;for(let o=0;o<r.length;++o){const s=r[o],l=(n=s.type)===null||n===void 0?void 0:n.name;l==="RadioButton"&&(a=!0);const u=s.props;if(l!=="RadioButton"){i.push(s);continue}if(o===0)i.push(s);else{const c=i[i.length-1].props,f=t===c.value,d=c.disabled,h=t===u.value,v=u.disabled,p=(f?2:0)+(d?0:1),g=(h?2:0)+(v?0:1),m={[`${e}-radio-group__splitor--disabled`]:d,[`${e}-radio-group__splitor--checked`]:f},y={[`${e}-radio-group__splitor--disabled`]:v,[`${e}-radio-group__splitor--checked`]:h},b=p<g?y:m;i.push(M("div",{class:[`${e}-radio-group__splitor`,b]}),s)}}return{children:i,isButtonGroup:a}}const N9e=Object.assign(Object.assign({},rr.props),{name:String,value:[String,Number],defaultValue:{type:[String,Number],default:null},size:String,disabled:{type:Boolean,default:void 0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]});var B9e=mt({name:"RadioGroup",props:N9e,setup(r){const t=ke(null),{mergedSizeRef:e,mergedDisabledRef:n,nTriggerFormChange:i,nTriggerFormInput:a,nTriggerFormBlur:o,nTriggerFormFocus:s}=fl(r),{mergedClsPrefixRef:l}=pn(r),u=rr("Radio","RadioGroup",L9e,kP,r,l),c=ke(r.defaultValue),f=Ht(r,"value"),d=ri(f,c);function h(g){const{onUpdateValue:m,"onUpdate:value":y}=r;m&&pt(m,g),y&&pt(y,g),c.value=g,i(),a()}function v(g){const{value:m}=t;!m||m.contains(g.relatedTarget)||s()}function p(g){const{value:m}=t;!m||m.contains(g.relatedTarget)||o()}return Qr(Yq,{mergedClsPrefixRef:l,nameRef:Ht(r,"name"),valueRef:d,disabledRef:n,mergedSizeRef:e,doUpdateValue:h}),{selfElRef:t,mergedClsPrefix:l,mergedValue:d,handleFocusout:p,handleFocusin:v,cssVars:Q(()=>{const{value:g}=e,{common:{cubicBezierEaseInOut:m},self:{buttonBorderColor:y,buttonBorderColorActive:b,buttonBorderRadius:x,buttonBoxShadow:w,buttonBoxShadowFocus:S,buttonBoxShadowHover:C,buttonColorActive:_,buttonTextColor:T,buttonTextColorActive:E,buttonTextColorHover:k,opacityDisabled:I,[Gt("buttonHeight",g)]:P,[Gt("fontSize",g)]:F}}=u.value;return{"--font-size":F,"--bezier":m,"--button-border-color":y,"--button-border-color-active":b,"--button-border-radius":x,"--button-box-shadow":w,"--button-box-shadow-focus":S,"--button-box-shadow-hover":C,"--button-color-active":_,"--button-text-color":T,"--button-text-color-hover":k,"--button-text-color-active":E,"--height":P,"--opacity-disabled":I}})}},render(){const{mergedValue:r,mergedClsPrefix:t,handleFocusin:e,handleFocusout:n}=this,{children:i,isButtonGroup:a}=F9e(v0(bX(this)),r,t);return M("div",{onFocusin:e,onFocusout:n,ref:"selfElRef",class:[`${t}-radio-group`,a&&`${t}-radio-group--button-group`],style:this.cssVars},i)}});const $9e=40,z9e=40;function IP(r){if(r.type==="selection")return $9e;if(r.type==="expand")return z9e;if(!("children"in r))return r.width}function vh(r){return r.type==="selection"?"__n_selection__":r.type==="expand"?"__n_expand__":r.key}function Xq(r){return r&&(typeof r=="object"?Object.assign({},r):r)}function G9e(r){return r==="ascend"?1:r==="descend"?-1:0}function U9e(r){const t=to(IP(r));return{width:t,minWidth:t}}function V9e(r,t,e){return typeof e=="function"?e(r,t):e||""}function PP(r){return r.filterOptionValues!==void 0||r.filterOptionValue===void 0&&r.defaultFilterOptionValues!==void 0}function DP(r){return"children"in r?!1:!!r.sorter}function qq(r){return"children"in r?!1:!!r.filter&&(!!r.filterOptions||!!r.renderFilterMenu)}function Kq(r){if(r){if(r==="descend")return"ascend"}else return"descend";return!1}function H9e(r,t){return r.sorter===void 0?null:t===null||t.columnKey!==r.key?{columnKey:r.key,sorter:r.sorter,order:Kq(!1)}:Object.assign(Object.assign({},t),{order:Kq(t.order)})}function Zq(r,t){return t.find(e=>e.columnKey===r.key&&e.order)!==void 0}var W9e=mt({name:"DataTableFilterMenu",props:{column:{type:Object,required:!0},radioGroupName:{type:String,required:!0},multiple:{type:Boolean,required:!0},value:{type:[Array,String,Number],default:null},options:{type:Array,required:!0},onConfirm:{type:Function,required:!0},onClear:{type:Function,required:!0},onChange:{type:Function,required:!0}},setup(r){const{mergedClsPrefixRef:t,mergedThemeRef:e,localeRef:n}=nr(Ku),i=ke(r.value),a=Q(()=>{const{value:f}=i;return Array.isArray(f)?f:null}),o=Q(()=>{const{value:f}=i;return PP(r.column)?Array.isArray(f)&&f.length&&f[0]||null:Array.isArray(f)?null:f});function s(f){r.onChange(f)}function l(f){r.multiple&&Array.isArray(f)?i.value=f:PP(r.column)&&!Array.isArray(f)?i.value=[f]:i.value=f}function u(){s(i.value),r.onConfirm()}function c(){r.multiple||PP(r.column)?s([]):s(null),r.onClear()}return{mergedClsPrefix:t,mergedTheme:e,locale:n,checkboxGroupValue:a,radioGroupValue:o,handleChange:l,handleConfirmClick:u,handleClearClick:c}},render(){const{mergedTheme:r,locale:t,mergedClsPrefix:e}=this;return M("div",{class:`${e}-data-table-filter-menu`},M(ms,null,{default:()=>{const{checkboxGroupValue:n,handleChange:i}=this;return this.multiple?M(QWe,{value:n,class:`${e}-data-table-filter-menu__group`,onUpdateValue:i},{default:()=>this.options.map(a=>M(xC,{key:a.value,theme:r.peers.Checkbox,themeOverrides:r.peerOverrides.Checkbox,value:a.value},{default:()=>a.label}))}):M(B9e,{name:this.radioGroupName,class:`${e}-data-table-filter-menu__group`,value:this.radioGroupValue,onUpdateValue:this.handleChange},{default:()=>this.options.map(a=>M(O9e,{key:a.value,value:a.value,theme:r.peers.Radio,themeOverrides:r.peerOverrides.Radio},{default:()=>a.label}))})}}),M("div",{class:`${e}-data-table-filter-menu__action`},M(Va,{size:"tiny",theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,onClick:this.handleClearClick},{default:()=>t.clear}),M(Va,{theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,type:"primary",size:"tiny",onClick:this.handleConfirmClick},{default:()=>t.confirm})))}});function j9e(r,t,e){const n=Object.assign({},r);return n[t]=e,n}var Y9e=mt({name:"DataTableFilterButton",props:{column:{type:Object,required:!0},options:{type:Array,default:()=>[]}},setup(r){const{NConfigProvider:t}=pn(),{mergedThemeRef:e,mergedClsPrefixRef:n,mergedFilterStateRef:i,filterMenuCssVarsRef:a,doUpdateFilters:o}=nr(Ku),s=ke(!1),l=i,u=Q(()=>r.column.filterMultiple!==!1),c=Q(()=>{const g=l.value[r.column.key];if(g===void 0){const{value:m}=u;return m?[]:null}return g}),f=Q(()=>{const{value:g}=c;return Array.isArray(g)?g.length>0:g!==null}),d=Q(()=>{var g,m;return((m=(g=t==null?void 0:t.mergedComponentPropsRef.value)===null||g===void 0?void 0:g.DataTable)===null||m===void 0?void 0:m.renderFilter)||r.column.renderFilter});function h(g){const m=j9e(l.value,r.column.key,g);o(m,r.column)}function v(){s.value=!1}function p(){s.value=!1}return{mergedTheme:e,mergedClsPrefix:n,active:f,showPopover:s,mergedRenderFilter:d,filterMultiple:u,mergedFilterValue:c,filterMenuCssVars:a,handleFilterChange:h,handleFilterMenuConfirm:p,handleFilterMenuCancel:v}},render(){const{mergedTheme:r,mergedClsPrefix:t,handleFilterMenuCancel:e}=this;return M(x0,{show:this.showPopover,onUpdateShow:n=>this.showPopover=n,trigger:"click",theme:r.peers.Popover,themeOverrides:r.peerOverrides.Popover,placement:"bottom",style:{padding:0}},{trigger:()=>{const{mergedRenderFilter:n}=this;if(n)return M(P9e,{"data-data-table-filter":!0,render:n,active:this.active,show:this.showPopover});const{renderFilterIcon:i}=this.column;return M("div",{"data-data-table-filter":!0,class:[`${t}-data-table-filter`,{[`${t}-data-table-filter--active`]:this.active,[`${t}-data-table-filter--show`]:this.showPopover}]},i?i({active:this.active,show:this.showPopover}):M(si,{clsPrefix:t},{default:()=>M(cUe,null)}))},default:()=>{const{renderFilterMenu:n}=this.column;return n?n({hide:e}):M(W9e,{style:this.filterMenuCssVars,radioGroupName:String(this.column.key),multiple:this.filterMultiple,value:this.mergedFilterValue,options:this.options,column:this.column,onChange:this.handleFilterChange,onClear:this.handleFilterMenuCancel,onConfirm:this.handleFilterMenuConfirm})}})}}),X9e={padding:"4px 0",optionIconSizeSmall:"14px",optionIconSizeMedium:"16px",optionIconSizeLarge:"16px",optionIconSizeHuge:"18px",optionSuffixWidthSmall:"14px",optionSuffixWidthMedium:"14px",optionSuffixWidthLarge:"16px",optionSuffixWidthHuge:"16px",optionIconSuffixWidthSmall:"32px",optionIconSuffixWidthMedium:"32px",optionIconSuffixWidthLarge:"36px",optionIconSuffixWidthHuge:"36px",optionPrefixWidthSmall:"14px",optionPrefixWidthMedium:"14px",optionPrefixWidthLarge:"16px",optionPrefixWidthHuge:"16px",optionIconPrefixWidthSmall:"36px",optionIconPrefixWidthMedium:"36px",optionIconPrefixWidthLarge:"40px",optionIconPrefixWidthHuge:"40px"};const q9e=r=>{const{primaryColor:t,textColor2:e,dividerColor:n,hoverColor:i,popoverColor:a,invertedColor:o,borderRadius:s,fontSizeSmall:l,fontSizeMedium:u,fontSizeLarge:c,fontSizeHuge:f,heightSmall:d,heightMedium:h,heightLarge:v,heightHuge:p,textColor3:g,opacityDisabled:m}=r;return Object.assign(Object.assign({},X9e),{optionHeightSmall:d,optionHeightMedium:h,optionHeightLarge:v,optionHeightHuge:p,borderRadius:s,fontSizeSmall:l,fontSizeMedium:u,fontSizeLarge:c,fontSizeHuge:f,optionTextColor:e,optionTextColorHover:e,optionTextColorActive:t,optionTextColorChildActive:t,color:a,dividerColor:n,suffixColor:e,prefixColor:e,optionColorHover:i,optionColorActive:qr(t,{alpha:.1}),groupHeaderTextColor:g,optionTextColorInverted:"#BBB",optionTextColorHoverInverted:"#FFF",optionTextColorActiveInverted:"#FFF",optionTextColorChildActiveInverted:"#FFF",colorInverted:o,dividerColorInverted:"#BBB",suffixColorInverted:"#BBB",prefixColorInverted:"#BBB",optionColorHoverInverted:t,optionColorActiveInverted:t,groupHeaderTextColorInverted:"#AAA",optionOpacityDisabled:m})},K9e=ro({name:"Dropdown",common:Bn,peers:{Popover:b0},self:q9e});var Z9e=K9e;const Q9e=r=>{const{textColorBase:t,opacity1:e,opacity2:n,opacity3:i,opacity4:a,opacity5:o}=r;return{color:t,opacity1Depth:e,opacity2Depth:n,opacity3Depth:i,opacity4Depth:a,opacity5Depth:o}},J9e={name:"Icon",common:Bn,self:Q9e};var eje=J9e,tje=ne("icon",`
 height: 1em;
 width: 1em;
 line-height: 1em;
 text-align: center;
 display: inline-block;
 position: relative;
 fill: currentColor;
 transform: translateZ(0);
`,[Pe("color-transition",{transition:"color .3s var(--bezier)"}),Pe("depth",{color:"var(--color)"},[we("svg",{opacity:"var(--opacity)",transition:"opacity .3s var(--bezier)"})]),we("svg",{height:"1em",width:"1em"})]),rje=mt({_n_icon__:!0,name:"Icon",inheritAttrs:!1,props:Object.assign(Object.assign({},rr.props),{depth:[String,Number],size:[Number,String],color:String}),setup(r){const{mergedClsPrefixRef:t}=pn(r),e=rr("Icon","Icon",tje,eje,r,t);return{mergedClsPrefix:t,mergedStyle:Q(()=>{const{size:n,color:i}=r;return{fontSize:ca(n),color:i}}),cssVars:Q(()=>{const{depth:n}=r,{common:{cubicBezierEaseInOut:i},self:a}=e.value;if(n!==void 0){const{color:o,[`opacity${n}Depth`]:s}=a;return{"--bezier":i,"--color":o,"--opacity":s}}return{"--bezier":i}})}},render(){var r;const{$parent:t,depth:e,mergedClsPrefix:n}=this;return((r=t==null?void 0:t.$options)===null||r===void 0?void 0:r._n_icon__)&&Zl("icon","don't wrap `n-icon` inside `n-icon`"),M("i",Tl(this.$attrs,{role:"img",class:[`${n}-icon`,{[`${n}-icon--depth`]:e,[`${n}-icon--color-transition`]:e!==void 0}],style:Object.assign(this.cssVars,this.mergedStyle)}),this.$slots)}});function RP(r,t){return r.type==="submenu"||r.type===void 0&&r[t]!==void 0}function nje(r){return r.type==="group"}function Qq(r){return r.type==="divider"}function ije(r){return r.type==="render"}const Jq=Symbol("dropdown-option");var eK=mt({name:"DropdownOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null},placement:{type:String,default:"right-start"},props:Object},setup(r){const t=nr(wC),{hoverKeyRef:e,keyboardKeyRef:n,lastToggledSubmenuKeyRef:i,pendingKeyPathRef:a,activeKeyPathRef:o,animatedRef:s,mergedShowRef:l,renderLabelRef:u,renderIconRef:c,labelFieldRef:f,childrenFieldRef:d}=t,h=nr(Jq,null),v=nr(OP),p=Q(()=>r.tmNode.rawNode),g=Q(()=>{const{value:P}=d;return RP(r.tmNode.rawNode,P)}),m=Q(()=>{const{disabled:P}=r.tmNode;return P}),y=Q(()=>{if(!g.value)return!1;const{key:P,disabled:F}=r.tmNode;if(F)return!1;const{value:$}=e,{value:R}=n,{value:L}=i,{value:O}=a;return $!==null?O.includes(P):R!==null?O.includes(P)&&O[O.length-1]!==P:L!==null?O.includes(P):!1}),b=Q(()=>n.value===null&&!s.value),x=v8e(y,300,b),w=Q(()=>!!(h==null?void 0:h.enteringSubmenuRef.value)),S=ke(!1);Qr(Jq,{enteringSubmenuRef:S});function C(){S.value=!0}function _(){S.value=!1}function T(){const{parentKey:P,tmNode:F}=r;!l.value||(i.value=P,n.value=null,e.value=F.key)}function E(){const{tmNode:P}=r;!l.value||e.value!==P.key&&T()}function k(P){if(!l.value)return;const{relatedTarget:F}=P;F&&!Vu({target:F},"dropdownOption")&&(e.value=null)}function I(){const{value:P}=g,{tmNode:F}=r;!l.value||!P&&!F.disabled&&(t.doSelect(F.key,F.rawNode),t.doUpdateShow(!1))}return{labelField:f,renderLabel:u,renderIcon:c,siblingHasIcon:v.showIconRef,siblingHasSubmenu:v.hasSubmenuRef,animated:s,mergedShowSubmenu:Q(()=>x.value&&!w.value),rawNode:p,hasSubmenu:g,pending:On(()=>{const{value:P}=a,{key:F}=r.tmNode;return P.includes(F)}),childActive:On(()=>{const{value:P}=o,{key:F}=r.tmNode,$=P.findIndex(R=>F===R);return $===-1?!1:$<P.length-1}),active:On(()=>{const{value:P}=o,{key:F}=r.tmNode,$=P.findIndex(R=>F===R);return $===-1?!1:$===P.length-1}),mergedDisabled:m,handleClick:I,handleMouseMove:E,handleMouseEnter:T,handleMouseLeave:k,handleSubmenuBeforeEnter:C,handleSubmenuAfterEnter:_}},render(){var r;const{animated:t,rawNode:e,mergedShowSubmenu:n,clsPrefix:i,siblingHasIcon:a,siblingHasSubmenu:o,renderLabel:s,renderIcon:l,props:u}=this,c=n?M(rK,{clsPrefix:i,tmNodes:this.tmNode.children,parentKey:this.tmNode.key}):null,f={class:[`${i}-dropdown-option-body`,this.pending&&`${i}-dropdown-option-body--pending`,this.active&&`${i}-dropdown-option-body--active`,this.childActive&&`${i}-dropdown-option-body--child-active`,this.mergedDisabled&&`${i}-dropdown-option-body--disabled`],onMousemove:this.handleMouseMove,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onClick:this.handleClick};return M("div",{class:`${i}-dropdown-option`},M("div",Tl(f,u),[M("div",{"data-dropdown-option":!0,class:[`${i}-dropdown-option-body__prefix`,a&&`${i}-dropdown-option-body__prefix--show-icon`]},[l?l(e):Hn(e.icon)]),M("div",{"data-dropdown-option":!0,class:`${i}-dropdown-option-body__label`},s?s(e):Hn((r=e[this.labelField])!==null&&r!==void 0?r:e.title)),M("div",{"data-dropdown-option":!0,class:[`${i}-dropdown-option-body__suffix`,o&&`${i}-dropdown-option-body__suffix--has-submenu`]},this.hasSubmenu?M(rje,null,{default:()=>M(jI,null)}):null)]),this.hasSubmenu?M(Lp,null,{default:()=>[M(Fp,null,{default:()=>M("div",{class:`${i}-dropdown-offset-container`},M($p,{show:this.mergedShowSubmenu,placement:this.placement,teleportDisabled:!0},{default:()=>M("div",{class:`${i}-dropdown-menu-wrapper`},t?M(pa,{onBeforeEnter:this.handleSubmenuBeforeEnter,onAfterEnter:this.handleSubmenuAfterEnter,name:"fade-in-scale-up-transition",appear:!0},{default:()=>c}):c)}))})]}):null)}}),tK=mt({name:"DropdownDivider",props:{clsPrefix:{type:String,required:!0}},render(){return M("div",{class:`${this.clsPrefix}-dropdown-divider`})}}),aje=mt({name:"DropdownGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{showIconRef:r,hasSubmenuRef:t}=nr(OP),{renderLabelRef:e,labelFieldRef:n}=nr(wC);return{labelField:n,showIcon:r,hasSubmenu:t,renderLabel:e}},render(){var r;const{clsPrefix:t,hasSubmenu:e,showIcon:n,renderLabel:i}=this,{rawNode:a}=this.tmNode;return M("div",{class:`${t}-dropdown-option`},M("div",{class:`${t}-dropdown-option-body ${t}-dropdown-option-body--group`},M("div",{"data-dropdown-option":!0,class:[`${t}-dropdown-option-body__prefix`,n&&`${t}-dropdown-option-body__prefix--show-icon`]},Hn(a.icon)),M("div",{class:`${t}-dropdown-option-body__label`,"data-dropdown-option":!0},i?i(a):Hn((r=a.title)!==null&&r!==void 0?r:a[this.labelField])),M("div",{class:[`${t}-dropdown-option-body__suffix`,e&&`${t}-dropdown-option-body__suffix--has-submenu`],"data-dropdown-option":!0})))}}),oje=mt({name:"NDropdownGroup",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null}},render(){const{tmNode:r,parentKey:t,clsPrefix:e}=this,{children:n}=r;return M(Fi,null,M(aje,{clsPrefix:e,tmNode:r,key:r.key}),n==null?void 0:n.map(i=>Qq(i.rawNode)?M(tK,{clsPrefix:e,key:i.key}):i.isGroup?(Zl("dropdown","`group` node is not allowed to be put in `group` node."),null):M(eK,{clsPrefix:e,tmNode:i,parentKey:t,key:i.key})))}}),sje=mt({name:"DropdownRenderOption",props:{tmNode:{type:Object,required:!0}},render(){const{rawNode:{render:r,props:t}}=this.tmNode;return M("div",t,[r==null?void 0:r()])}});const OP=Symbol("dropdownMenu");var rK=mt({name:"DropdownMenu",props:{showArrow:Boolean,arrowStyle:[String,Object],clsPrefix:{type:String,required:!0},tmNodes:{type:Array,default:()=>[]},parentKey:{type:[String,Number],default:null}},setup(r){const{renderIconRef:t,childrenFieldRef:e}=nr(wC);Qr(OP,{showIconRef:Q(()=>{const n=t.value;return r.tmNodes.some(i=>{var a;if(i.isGroup)return(a=i.children)===null||a===void 0?void 0:a.some(({rawNode:s})=>n?n(s):s.icon);const{rawNode:o}=i;return n?n(o):o.icon})}),hasSubmenuRef:Q(()=>{const{value:n}=e;return r.tmNodes.some(i=>{var a;if(i.isGroup)return(a=i.children)===null||a===void 0?void 0:a.some(({rawNode:s})=>RP(s,n));const{rawNode:o}=i;return RP(o,n)})})})},render(){const{parentKey:r,clsPrefix:t}=this;return M("div",{class:`${t}-dropdown-menu`},this.tmNodes.map(e=>{const{rawNode:n}=e;return ije(n)?M(sje,{tmNode:e,key:e.key}):Qq(n)?M(tK,{clsPrefix:t,key:e.key}):nje(n)?M(oje,{clsPrefix:t,tmNode:e,parentKey:r,key:e.key}):M(eK,{clsPrefix:t,tmNode:e,parentKey:r,key:e.key,props:n.props})}),this.showArrow?cq({clsPrefix:t,arrowStyle:this.arrowStyle}):null)}}),lje=ne("dropdown-menu",`
 transform-origin: inherit;
 padding: var(--padding);
 background-color: var(--color);
 border-radius: var(--border-radius);
 box-shadow: var(--box-shadow);
 transition:
 background-color .3s var(--bezier),
 box-shadow .3s var(--bezier);
`,[qu(),ne("dropdown-option",`
 position: relative;
 `,[we("a",`
 text-decoration: none;
 color: inherit;
 `,[we("&::before",`
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),ne("dropdown-option-body",`
 display: flex;
 cursor: pointer;
 height: var(--option-height);
 line-height: var(--option-height);
 font-size: var(--font-size);
 color: var(--option-text-color);
 transition:
 background-color .3s var(--bezier),
 color .3s var(--bezier);
 `,[Pe("pending",[Cn("disabled",{color:"var(--option-text-color-hover)",backgroundColor:"var(--option-color-hover)"}),xe("prefix, suffix",{color:"var(--option-text-color-hover)"})]),Pe("active",[Cn("disabled",{color:"var(--option-text-color-active)",backgroundColor:"var(--option-color-active)"}),xe("prefix, suffix",{color:"var(--option-text-color-active)"})]),Pe("disabled",{cursor:"not-allowed",opacity:"var(--option-opacity-disabled)"}),Pe("child-active",{color:"var(--option-text-color-child-active)"},[xe("prefix, suffix",{color:"var(--option-text-color-child-active)"})]),Pe("group",{fontSize:"calc(var(--font-size) - 1px)",color:"var(--group-header-text-color)"},[xe("prefix",{width:"calc(var(--option-prefix-width) / 2)"},[Pe("show-icon",{width:"calc(var(--option-icon-prefix-width) / 2)"})])]),xe("prefix",`
 width: var(--option-prefix-width);
 display: flex;
 justify-content: center;
 align-items: center;
 color: var(--prefix-color);
 transition: color .3s var(--bezier);
 `,[Pe("show-icon",{width:"var(--option-icon-prefix-width)"}),ne("icon",{fontSize:"var(--option-icon-size)"})]),xe("label",{whiteSpace:"nowrap",flex:1}),xe("suffix",`
 box-sizing: border-box;
 flex-grow: 0;
 flex-shrink: 0;
 display: flex;
 justify-content: flex-end;
 align-items: center;
 min-width: var(--option-suffix-width);
 padding: 0 8px;
 transition: color .3s var(--bezier);
 color: var(--suffix-color);
 `,[Pe("has-submenu",{width:"var(--option-icon-suffix-width)"}),ne("icon",{fontSize:"var(--option-icon-size)"})]),ne("dropdown-menu",{pointerEvents:"all"})]),ne("dropdown-offset-container",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: -4px;
 bottom: -4px;
 `)]),ne("dropdown-divider",`
 transition: background-color .3s var(--bezier);
 background-color: var(--divider-color);
 height: 1px;
 margin: 4px 0;
 `),ne("dropdown-menu-wrapper",`
 transform-origin: inherit;
 width: fit-content;
 `)]);const wC=Symbol("dropdown"),uje={animated:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},size:{type:String,default:"medium"},inverted:Boolean,placement:{type:String,default:"bottom"},onSelect:[Function,Array],options:{type:Array,default:()=>[]},showArrow:Boolean,renderLabel:Function,renderIcon:Function,labelField:{type:String,default:"label"},keyField:{type:String,default:"key"},childrenField:{type:String,default:"children"},value:[String,Number]},cje=Object.keys(lC),fje=Object.assign(Object.assign(Object.assign({},lC),uje),rr.props);var nK=mt({name:"Dropdown",inheritAttrs:!1,props:fje,setup(r){const t=ke(!1),e=ri(Ht(r,"show"),t),n=Q(()=>{const{keyField:T,childrenField:E}=r;return lh(r.options,{getKey(k){return k[T]},getDisabled(k){return k.disabled===!0},getIgnored(k){return k.type==="divider"||k.type==="render"},getChildren(k){return k[E]}})}),i=Q(()=>n.value.treeNodes),a=ke(null),o=ke(null),s=ke(null),l=Q(()=>{var T,E,k;return(k=(E=(T=a.value)!==null&&T!==void 0?T:o.value)!==null&&E!==void 0?E:s.value)!==null&&k!==void 0?k:null}),u=Q(()=>n.value.getPath(l.value).keyPath),c=Q(()=>n.value.getPath(r.value).keyPath),f=On(()=>r.keyboard&&e.value);BI({keydown:{ArrowUp:{prevent:!0,handler:x},ArrowRight:{prevent:!0,handler:b},ArrowDown:{prevent:!0,handler:w},ArrowLeft:{prevent:!0,handler:y},Escape:m},keyup:{Enter:S}},f);const{mergedClsPrefixRef:d}=pn(r),h=rr("Dropdown","Dropdown",lje,Z9e,r,d);Qr(wC,{labelFieldRef:Ht(r,"labelField"),childrenFieldRef:Ht(r,"childrenField"),renderLabelRef:Ht(r,"renderLabel"),renderIconRef:Ht(r,"renderIcon"),hoverKeyRef:a,keyboardKeyRef:o,lastToggledSubmenuKeyRef:s,pendingKeyPathRef:u,activeKeyPathRef:c,animatedRef:Ht(r,"animated"),mergedShowRef:e,doSelect:v,doUpdateShow:p}),nn(e,T=>{T||g()});function v(T,E){const{onSelect:k}=r;k&&pt(k,T,E)}function p(T){const{"onUpdate:show":E}=r;E&&pt(E,T),t.value=T}function g(){a.value=null,o.value=null,s.value=null}function m(){p(!1)}function y(){_("left")}function b(){_("right")}function x(){_("up")}function w(){_("down")}function S(){const T=C();(T==null?void 0:T.isLeaf)&&(v(T.key,T.rawNode),p(!1))}function C(){var T;const{value:E}=n,{value:k}=l;return!E||k===null?null:(T=E.getNode(k))!==null&&T!==void 0?T:null}function _(T){const{value:E}=l,{value:{getFirstAvailableNode:k}}=n;let I=null;if(E===null){const P=k();P!==null&&(I=P.key)}else{const P=C();if(P){let F;switch(T){case"down":F=P.getNext();break;case"up":F=P.getPrev();break;case"right":F=P.getChild();break;case"left":F=P.getParent();break}F&&(I=F.key)}}I!==null&&(a.value=null,o.value=I)}return{mergedClsPrefix:d,mergedTheme:h,tmNodes:i,mergedShow:e,doUpdateShow:p,cssVars:Q(()=>{const{size:T,inverted:E}=r,{common:{cubicBezierEaseInOut:k},self:I}=h.value,{padding:P,dividerColor:F,borderRadius:$,optionOpacityDisabled:R,[Gt("optionIconSuffixWidth",T)]:L,[Gt("optionSuffixWidth",T)]:O,[Gt("optionIconPrefixWidth",T)]:B,[Gt("optionPrefixWidth",T)]:U,[Gt("fontSize",T)]:W,[Gt("optionHeight",T)]:X,[Gt("optionIconSize",T)]:ie}=I,q={"--bezier":k,"--font-size":W,"--padding":P,"--border-radius":$,"--option-height":X,"--option-prefix-width":U,"--option-icon-prefix-width":B,"--option-suffix-width":O,"--option-icon-suffix-width":L,"--option-icon-size":ie,"--divider-color":F,"--option-opacity-disabled":R};return E?(q["--color"]=I.colorInverted,q["--option-color-hover"]=I.optionColorHoverInverted,q["--option-color-active"]=I.optionColorActiveInverted,q["--option-text-color"]=I.optionTextColorInverted,q["--option-text-color-hover"]=I.optionTextColorHoverInverted,q["--option-text-color-active"]=I.optionTextColorActiveInverted,q["--option-text-color-child-active"]=I.optionTextColorChildActiveInverted,q["--prefix-color"]=I.prefixColorInverted,q["--suffix-color"]=I.suffixColorInverted,q["--group-header-text-color"]=I.groupHeaderTextColorInverted):(q["--color"]=I.color,q["--option-color-hover"]=I.optionColorHover,q["--option-color-active"]=I.optionColorActive,q["--option-text-color"]=I.optionTextColor,q["--option-text-color-hover"]=I.optionTextColorHover,q["--option-text-color-active"]=I.optionTextColorActive,q["--option-text-color-child-active"]=I.optionTextColorChildActive,q["--prefix-color"]=I.prefixColor,q["--suffix-color"]=I.suffixColor,q["--group-header-text-color"]=I.groupHeaderTextColor),q})}},render(){const r=(n,i,a,o,s)=>{const{mergedClsPrefix:l}=this,u={ref:c8e(i),class:[n,`${l}-dropdown`,this.showArrow&&`${l}-popover--show-arrow`],clsPrefix:l,tmNodes:this.tmNodes,style:[a,this.cssVars],showArrow:this.showArrow,arrowStyle:this.arrowStyle,onMouseenter:o,onMouseleave:s};return M(rK,Tl(this.$attrs,u))},{mergedTheme:t}=this,e={show:this.mergedShow,theme:t.peers.Popover,themeOverrides:t.peerOverrides.Popover,internalRenderBody:r,onUpdateShow:this.doUpdateShow};return M(x0,Object.assign({},Kl(this.$props,cje),e),{trigger:this.$slots.default,_:1})}});const iK="_n_all__",aK="_n_none__";function dje(r,t,e,n){return r?i=>{for(const a of r)switch(i){case iK:e(!0);return;case aK:n(!0);return;default:if(typeof a=="object"&&a.key===i){a.onSelect(t.value);return}}}:()=>{}}function hje(r,t){return r?r.map(e=>{switch(e){case"all":return{label:t.checkTableAll,key:iK};case"none":return{label:t.uncheckTableAll,key:aK};default:return e}}):[]}var vje=mt({name:"DataTableSelectionMenu",props:{clsPrefix:{type:String,required:!0}},setup(){const{localeRef:r,checkOptionsRef:t,rawPaginatedDataRef:e,doCheckAll:n,doUncheckAll:i}=nr(Ku);return{handleSelect:Q(()=>dje(t.value,e,n,i)),options:Q(()=>hje(t.value,r.value))}},render(){const{clsPrefix:r}=this;return M(nK,{options:this.options,onSelect:this.handleSelect},{default:()=>M(si,{clsPrefix:r,class:`${r}-data-table-check-extra`},{default:()=>M(IX,null)})})}});function LP(r){return typeof r.title=="function"?r.title(r):r.title}var oK=mt({name:"DataTableHeader",props:{discrete:{type:Boolean,default:!0}},setup(){const{mergedClsPrefixRef:r,scrollXRef:t,fixedColumnLeftMapRef:e,fixedColumnRightMapRef:n,mergedCurrentPageRef:i,allRowsCheckedRef:a,someRowsCheckedRef:o,rowsRef:s,colsRef:l,mergedThemeRef:u,checkOptionsRef:c,mergedSortStateRef:f,componentId:d,scrollPartRef:h,mergedTableLayoutRef:v,headerCheckboxDisabledRef:p,handleTableHeaderScroll:g,deriveNextSorter:m,doUncheckAll:y,doCheckAll:b}=nr(Ku);function x(){o.value||a.value?y():b()}function w(C,_){if(Vu(C,"dataTableFilter")||!DP(_))return;const T=f.value.find(k=>k.columnKey===_.key)||null,E=H9e(_,T);m(E)}function S(){h.value="head"}return{componentId:d,mergedSortState:f,mergedClsPrefix:r,scrollX:t,fixedColumnLeftMap:e,fixedColumnRightMap:n,currentPage:i,allRowsChecked:a,someRowsChecked:o,rows:s,cols:l,mergedTheme:u,checkOptions:c,mergedTableLayout:v,headerCheckboxDisabled:p,handleMouseenter:S,handleCheckboxUpdateChecked:x,handleColHeaderClick:w,handleTableHeaderScroll:g}},render(){const{mergedClsPrefix:r,fixedColumnLeftMap:t,fixedColumnRightMap:e,currentPage:n,allRowsChecked:i,someRowsChecked:a,rows:o,cols:s,mergedTheme:l,checkOptions:u,componentId:c,discrete:f,mergedTableLayout:d,headerCheckboxDisabled:h,mergedSortState:v,handleColHeaderClick:p,handleCheckboxUpdateChecked:g}=this,m=M("thead",{class:`${r}-data-table-thead`,"data-n-id":c},o.map(w=>M("tr",{class:`${r}-data-table-tr`},w.map(({column:S,colSpan:C,rowSpan:_,isLast:T})=>{var E,k;const I=vh(S),{ellipsis:P}=S,F=I in t,$=I in e;return M("th",{key:I,style:{textAlign:S.align,left:to((E=t[I])===null||E===void 0?void 0:E.start),right:to((k=e[I])===null||k===void 0?void 0:k.start)},colspan:C,rowspan:_,"data-col-key":I,class:[`${r}-data-table-th`,(F||$)&&`${r}-data-table-th--fixed-${F?"left":"right"}`,{[`${r}-data-table-th--hover`]:Zq(S,v),[`${r}-data-table-th--filterable`]:qq(S),[`${r}-data-table-th--sortable`]:DP(S),[`${r}-data-table-th--selection`]:S.type==="selection",[`${r}-data-table-th--last`]:T},S.className],onClick:S.type!=="selection"&&S.type!=="expand"&&!("children"in S)?R=>{p(R,S)}:void 0},S.type==="selection"?M(Fi,null,M(xC,{key:n,privateInsideTable:!0,checked:i,indeterminate:a,disabled:h,onUpdateChecked:g}),u?M(vje,{clsPrefix:r}):null):P===!0||P&&!P.tooltip?M("div",{class:`${r}-data-table-th__ellipsis`},LP(S)):P&&P.tooltip?M(jq,{tooltip:P.tooltip,theme:l.peers.Ellipsis,themeOverrides:l.peerOverrides.Ellipsis},{default:()=>LP(S)}):LP(S),DP(S)?M(I9e,{column:S}):null,qq(S)?M(Y9e,{column:S,options:S.filterOptions}):null)}))));if(!f)return m;const{handleTableHeaderScroll:y,handleMouseenter:b,scrollX:x}=this;return M("div",{class:`${r}-data-table-base-table-header`,onScroll:y,onMouseenter:b},M("table",{ref:"body",class:`${r}-data-table-table`,style:{minWidth:ca(x),tableLayout:d}},M("colgroup",null,s.map(w=>M("col",{key:w.key,style:w.style}))),m))}}),pje=mt({name:"DataTableCell",props:{row:{type:Object,required:!0},index:{type:Number,required:!0},column:{type:Object,required:!0},isSummary:Boolean,mergedTheme:{type:Object,required:!0}},render(){const{isSummary:r,column:{render:t,key:e,ellipsis:n},row:i}=this;let a;t&&!r?a=t(i,this.index):r?a=i[e].value:a=II(i,e);const o=typeof n=="object"?n.tooltip:void 0;if(o){const{mergedTheme:s}=this;return M(jq,{tooltip:o,theme:s.peers.Ellipsis,themeOverrides:s.peerOverrides.Ellipsis},{default:()=>a})}return a}}),sK=mt({name:"DataTableExpandTrigger",props:{clsPrefix:{type:String,required:!0},expanded:Boolean,onClick:{type:Function,required:!0}},render(){return M(si,{class:`${this.clsPrefix}-data-table-expand-trigger`,clsPrefix:this.clsPrefix,onClick:this.onClick},{default:()=>M(jI,{style:this.expanded?"transform: rotate(90deg);":void 0})})}}),gje=mt({name:"DataTableBodyCheckbox",props:{rowKey:{type:[String,Number],required:!0},disabled:{type:Boolean,required:!0},onUpdateChecked:{type:Function,required:!0}},setup(r){const{mergedCheckedRowKeySetRef:t,mergedInderminateRowKeySetRef:e}=nr(Ku);return()=>{const{rowKey:n}=r;return M(xC,{privateInsideTable:!0,disabled:r.disabled,indeterminate:e.value.has(n),checked:t.value.has(n),onUpdateChecked:r.onUpdateChecked})}}});function mje(r,t){const e=[];function n(i){i.forEach(a=>{a.children&&t.has(a.key)?(e.push({tmNode:a,striped:!1,key:a.key}),n(a.children)):e.push({key:a.key,tmNode:a,striped:!1})})}return r.forEach(i=>{e.push(i);const{children:a}=i.tmNode;a&&t.has(i.key)&&n(a)}),e}const yje=mt({props:{clsPrefix:{type:String,required:!0},id:{type:String,required:!0},cols:{type:Array,required:!0},onMouseenter:Function,onMouseleave:Function},render(){const{clsPrefix:r,id:t,cols:e,onMouseenter:n,onMouseleave:i}=this;return M("table",{style:{tableLayout:"fixed"},class:`${r}-data-table-table`,onMouseenter:n,onMouseleave:i},M("colgroup",null,e.map(a=>M("col",{key:a.key,style:a.style}))),M("tbody",{"data-n-id":t,class:`${r}-data-table-tbody`},this.$slots))}});var bje=mt({name:"DataTableBody",props:{onResize:Function,showHeader:Boolean,flexHeight:Boolean},setup(r){const{mergedExpandedRowKeysRef:t,mergedClsPrefixRef:e,mergedThemeRef:n,scrollXRef:i,colsRef:a,paginatedDataRef:o,rawPaginatedDataRef:s,fixedColumnLeftMapRef:l,fixedColumnRightMapRef:u,mergedCurrentPageRef:c,rowClassNameRef:f,leftActiveFixedColKeyRef:d,rightActiveFixedColKeyRef:h,renderExpandRef:v,hoverKeyRef:p,summaryRef:g,mergedSortStateRef:m,virtualScrollRef:y,componentId:b,scrollPartRef:x,mergedTableLayoutRef:w,hasChildrenRef:S,firstContentfulColIndexRef:C,indentRef:_,rowPropsRef:T,maxHeightRef:E,stripedRef:k,setHeaderScrollLeft:I,doUpdateExpandedRowKeys:P,handleTableBodyScroll:F,doCheck:$,doUncheck:R}=nr(Ku),L=ke(null),O=ke(null);let B="";const U=Q(()=>new Set(t.value));function W(D,z,V){if(V){const he=o.value.findIndex(re=>re.key===B);if(he!==-1){const re=o.value.findIndex(Le=>Le.key===D.key),pe=Math.min(he,re),Je=Math.max(he,re),We=[];o.value.slice(pe,Je+1).forEach(Le=>{Le.disabled||We.push(Le.key)}),z?$(We):R(We),B=D.key;return}}z?$(D.key):R(D.key),B=D.key}function X(){if(y.value)return fe();const{value:D}=L;return D?D.containerRef:null}function ie(D){const{value:z}=t,V=z.indexOf(D),he=Array.from(z);~V?he.splice(V,1):he.push(D),P(he)}function q(){p.value=null}function j(){x.value="body"}function fe(){const{value:D}=O;return D==null?void 0:D.listElRef}function se(){const{value:D}=O;return D==null?void 0:D.itemsElRef}function ce(D){var z;F(D),(z=L.value)===null||z===void 0||z.sync()}function _e(D){var z;const{onResize:V}=r;V&&V(D),(z=L.value)===null||z===void 0||z.sync()}const Me={getScrollContainer:X},Ye=we([({props:D})=>we([D.leftActiveFixedColKey===null?null:we(`[data-n-id="${D.componentId}"] [data-col-key="${D.leftActiveFixedColKey}"]::after`,{boxShadow:"var(--box-shadow-after)"}),D.rightActiveFixedColKey===null?null:we(`[data-n-id="${D.componentId}"] [data-col-key="${D.rightActiveFixedColKey}"]::before`,{boxShadow:"var(--box-shadow-before)"})])]);let De=!1;return Co(()=>{const{value:D}=d,{value:z}=h;!De&&D===null&&z===null||(Ye.mount({id:`n-${b}`,force:!0,props:{leftActiveFixedColKey:D,rightActiveFixedColKey:z,componentId:b}}),De=!0)}),M_(()=>{Ye.unmount({id:`n-${b}`})}),Object.assign({componentId:b,scrollbarInstRef:L,virtualListRef:O,summary:g,mergedClsPrefix:e,mergedTheme:n,scrollX:i,cols:a,paginatedData:Q(()=>{const{value:D}=k;return o.value.map(D?(z,V)=>({tmNode:z,key:z.key,striped:V%2==1}):z=>({tmNode:z,key:z.key,striped:!1}))}),rawPaginatedData:s,fixedColumnLeftMap:l,fixedColumnRightMap:u,currentPage:c,rowClassName:f,renderExpand:v,mergedExpandedRowKeySet:U,hoverKey:p,mergedSortState:m,virtualScroll:y,mergedTableLayout:w,hasChildren:S,firstContentfulColIndex:C,indent:_,rowProps:T,maxHeight:E,setHeaderScrollLeft:I,handleMouseenterTable:j,handleVirtualListScroll:ce,handleVirtualListResize:_e,handleMouseleaveTable:q,virtualListContainer:fe,virtualListContent:se,handleTableBodyScroll:F,handleCheckboxUpdateChecked:W,handleUpdateExpanded:ie},Me)},render(){const{mergedTheme:r,scrollX:t,mergedClsPrefix:e,virtualScroll:n,maxHeight:i,mergedTableLayout:a,flexHeight:o,onResize:s,setHeaderScrollLeft:l}=this,u=t!==void 0||i!==void 0||o,c=!u&&a==="auto",f=t!==void 0||c,d={minWidth:ca(t)||"100%"};return t&&(d.width="100%"),M(ms,{ref:"scrollbarInstRef",scrollable:u||c,class:`${e}-data-table-base-table-body`,theme:r.peers.Scrollbar,themeOverrides:r.peerOverrides.Scrollbar,contentStyle:d,container:n?this.virtualListContainer:void 0,content:n?this.virtualListContent:void 0,horizontalRailStyle:{zIndex:3},verticalRailStyle:{zIndex:3},xScrollable:f,onScroll:n?void 0:this.handleTableBodyScroll,internalOnUpdateScrollLeft:l,onResize:s},{default:()=>{const h={},v={},{cols:p,paginatedData:g,mergedTheme:m,fixedColumnLeftMap:y,fixedColumnRightMap:b,currentPage:x,rowClassName:w,mergedSortState:S,mergedExpandedRowKeySet:C,componentId:_,showHeader:T,hasChildren:E,firstContentfulColIndex:k,rowProps:I,handleMouseenterTable:P,handleMouseleaveTable:F,renderExpand:$,summary:R,handleCheckboxUpdateChecked:L,handleUpdateExpanded:O}=this,{length:B}=p;let U;const W=E?mje(g,C):g;if(R){const se=R(this.rawPaginatedData);Array.isArray(se)?U=[...W,...se.map((ce,_e)=>({isSummaryRow:!0,key:`__n_summary__${_e}`,tmNode:{rawNode:ce,disabled:!0}}))]:U=[...W,{isSummaryRow:!0,key:"__n_summary__",tmNode:{rawNode:se,disabled:!0}}]}else U=W;const X=E?{width:to(this.indent)}:void 0,ie=[];U.forEach(se=>{$&&C.has(se.key)?ie.push(se,{isExpandedRow:!0,key:se.key,tmNode:se.tmNode}):ie.push(se)});const{length:q}=ie,j={};g.forEach(({tmNode:se},ce)=>{j[ce]=se.key});const fe=(se,ce,_e)=>{if("isExpandedRow"in se){const{tmNode:{key:Je,rawNode:We}}=se;return M("tr",{class:`${e}-data-table-tr`,key:`${Je}__expand`},M("td",{class:[`${e}-data-table-td`,`${e}-data-table-td--last-col`,ce+1===q&&`${e}-data-table-td--last-row`],colspan:B},$(We,ce)))}const Me="isSummaryRow"in se,Ye=!Me&&se.striped,{tmNode:De,key:D}=se,{rawNode:z}=De,V=C.has(D),he=I?I(z,ce):void 0,re=typeof w=="string"?w:V9e(z,ce,w);return M("tr",Object.assign({onMouseenter:()=>{this.hoverKey=D},key:D,class:[`${e}-data-table-tr`,Ye&&`${e}-data-table-tr--striped`,re]},he),p.map((Je,We)=>{var Le,$e,H,Y,K;if(!_e&&ce in h){const Ae=h[ce],ut=Ae.indexOf(We);if(~ut)return Ae.splice(ut,1),null}const{column:ee}=Je,J=vh(Je),{rowSpan:ge,colSpan:Ve}=ee,Ge=Me?((Le=se.tmNode.rawNode[J])===null||Le===void 0?void 0:Le.colSpan)||1:Ve?Ve(z,ce):1,rt=Me?(($e=se.tmNode.rawNode[J])===null||$e===void 0?void 0:$e.rowSpan)||1:ge?ge(z,ce):1,Se=We+Ge===B,ye=ce+rt===q,Re=rt>1;if(Re&&(v[ce]={[We]:[]}),Ge>1||Re)for(let Ae=ce;Ae<ce+rt;++Ae){Re&&v[ce][We].push(j[Ae]);for(let ut=We;ut<We+Ge;++ut)Ae===ce&&ut===We||(Ae in h?h[Ae].push(ut):h[Ae]=[ut])}const St=Re?this.hoverKey:null,{ellipsis:kt}=ee;return M("td",{key:J,style:{textAlign:ee.align||void 0,left:to((H=y[J])===null||H===void 0?void 0:H.start),right:to((Y=b[J])===null||Y===void 0?void 0:Y.start)},colspan:Ge,rowspan:_e?void 0:rt,"data-col-key":J,class:[`${e}-data-table-td`,ee.className,Me&&`${e}-data-table-td--summary`,(St!==null&&v[ce][We].includes(St)||Zq(ee,S))&&`${e}-data-table-td--hover`,ee.fixed&&`${e}-data-table-td--fixed-${ee.fixed}`,ee.align&&`${e}-data-table-td--${ee.align}-align`,{[`${e}-data-table-td--ellipsis`]:kt===!0||kt&&!kt.tooltip,[`${e}-data-table-td--selection`]:ee.type==="selection",[`${e}-data-table-td--expand`]:ee.type==="expand",[`${e}-data-table-td--last-col`]:Se,[`${e}-data-table-td--last-row`]:ye}]},E&&We===k?[uY(Me?0:se.tmNode.level,M("div",{class:`${e}-data-table-indent`,style:X})),Me||!se.tmNode.children?M("div",{class:`${e}-data-table-expand-placeholder`}):M(sK,{class:`${e}-data-table-expand-trigger`,clsPrefix:e,expanded:V,onClick:()=>{O(D)}})]:null,ee.type==="selection"?Me?null:M(gje,{key:x,rowKey:D,disabled:se.tmNode.disabled,onUpdateChecked:(Ae,ut)=>L(se.tmNode,Ae,ut.shiftKey)}):ee.type==="expand"?Me?null:!ee.expandable||((K=ee.expandable)===null||K===void 0?void 0:K.call(ee,z,ce))?M(sK,{clsPrefix:e,expanded:V,onClick:()=>O(D)}):null:M(pje,{index:ce,row:z,column:ee,isSummary:Me,mergedTheme:m}))}))};return n?M(oC,{ref:"virtualListRef",items:ie,itemSize:28,visibleItemsTag:yje,visibleItemsProps:{clsPrefix:e,id:_,cols:p,onMouseenter:P,onMouseleave:F},showScrollbar:!1,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemsStyle:d,itemResizable:!0},{default:({item:se,index:ce})=>fe(se,ce,!0)}):M("table",{class:`${e}-data-table-table`,onMouseleave:F,onMouseenter:P,style:{tableLayout:this.mergedTableLayout}},M("colgroup",null,p.map(se=>M("col",{key:se.key,style:se.style}))),T?M(oK,{discrete:!1}):null,M("tbody",{"data-n-id":_,class:`${e}-data-table-tbody`},ie.map((se,ce)=>fe(se,ce,!1))))}})}}),xje=mt({setup(){const{mergedClsPrefixRef:r,rightFixedColumnsRef:t,leftFixedColumnsRef:e,bodyWidthRef:n,maxHeightRef:i,minHeightRef:a,flexHeightRef:o,syncScrollState:s}=nr(Ku),l=ke(null),u=ke(null),c=ke(null),f=ke(!(e.value.length||t.value.length)),d=Q(()=>({maxHeight:ca(i.value),minHeight:ca(a.value)}));function h(m){n.value=m.contentRect.width,s(),f.value||(f.value=!0)}function v(){const{value:m}=l;return m?m.$el:null}function p(){const{value:m}=u;return m?m.getScrollContainer():null}const g={getBodyElement:p,getHeaderElement:v};return Co(()=>{const{value:m}=c;if(!m)return;const y=`${r.value}-data-table-base-table--transition-disabled`;f.value?setTimeout(()=>{m.classList.remove(y)},0):m.classList.add(y)}),Object.assign({maxHeight:i,mergedClsPrefix:r,selfElRef:c,headerInstRef:l,bodyInstRef:u,bodyStyle:d,flexHeight:o,handleBodyResize:h},g)},render(){const{mergedClsPrefix:r,maxHeight:t,flexHeight:e}=this,n=t===void 0&&!e;return M("div",{class:`${r}-data-table-base-table`,ref:"selfElRef"},n?null:M(oK,{ref:"headerInstRef"}),M(bje,{ref:"bodyInstRef",style:this.bodyStyle,showHeader:n,flexHeight:e,onResize:this.handleBodyResize}),Jr(this.$slots,"default"))}});function wje(r,t){const{paginatedDataRef:e,treeMateRef:n,selectionColumnRef:i}=t,a=ke(r.defaultCheckedRowKeys),o=Q(()=>{const{checkedRowKeys:w}=r;return n.value.getCheckedKeys(w===void 0?a.value:w,{cascade:r.cascade})}),s=Q(()=>o.value.checkedKeys),l=Q(()=>o.value.indeterminateKeys),u=Q(()=>new Set(s.value)),c=Q(()=>new Set(l.value)),f=Q(()=>{const{value:w}=u;return e.value.reduce((S,C)=>{const{key:_,disabled:T}=C;return S+(!T&&w.has(_)?1:0)},0)}),d=Q(()=>e.value.filter(w=>w.disabled).length),h=Q(()=>{const{length:w}=e.value,{value:S}=c;return f.value>0&&f.value<w-d.value||e.value.some(C=>S.has(C.key))}),v=Q(()=>{const{length:w}=e.value;return f.value!==0&&f.value===w-d.value}),p=Q(()=>e.value.length===0);function g(w){const{"onUpdate:checkedRowKeys":S,onUpdateCheckedRowKeys:C,onCheckedRowKeysChange:_}=r;S&&pt(S,w),C&&pt(C,w),_&&pt(_,w),a.value=w}function m(w){g(n.value.check(w,s.value,{cascade:r.cascade}).checkedKeys)}function y(w){g(n.value.uncheck(w,s.value,{cascade:r.cascade}).checkedKeys)}function b(w=!1){const{value:S}=i;if(!S)return;const C=[];(w?n.value.treeNodes:e.value).forEach(_=>{_.disabled||C.push(_.key)}),g(n.value.check(C,s.value,{cascade:!0}).checkedKeys)}function x(w=!1){const{value:S}=i;if(!S)return;const C=[];(w?n.value.treeNodes:e.value).forEach(_=>{_.disabled||C.push(_.key)}),g(n.value.uncheck(C,s.value,{cascade:!0}).checkedKeys)}return{mergedCheckedRowKeySetRef:u,mergedCheckedRowKeysRef:s,mergedInderminateRowKeySetRef:c,someRowsCheckedRef:h,allRowsCheckedRef:v,headerCheckboxDisabledRef:p,doUpdateCheckedRowKeys:g,doCheckAll:b,doUncheckAll:x,doCheck:m,doUncheck:y}}function SC(r){return typeof r=="object"&&typeof r.multiple=="number"?r.multiple:!1}function Sje(r,t){return t&&(r===void 0||r==="default"||typeof r=="object"&&r.compare==="default")?Cje(t):typeof r=="function"?r:r&&typeof r=="object"&&r.compare&&r.compare!=="default"?r.compare:!1}function Cje(r){return(t,e)=>{const n=t[r],i=e[r];return typeof n=="number"&&typeof i=="number"?n-i:typeof n=="string"&&typeof i=="string"?n.localeCompare(i):0}}function Eje(r,{dataRelatedColsRef:t,filteredDataRef:e}){const n=[];t.value.forEach(h=>{var v;h.sorter!==void 0&&d(n,{columnKey:h.key,sorter:h.sorter,order:(v=h.defaultSortOrder)!==null&&v!==void 0?v:!1})});const i=ke(n),a=Q(()=>{const h=t.value.filter(g=>g.type!=="selection"&&g.sorter!==void 0&&(g.sortOrder==="ascend"||g.sortOrder==="descend"||g.sortOrder===!1)),v=h.filter(g=>g.sortOrder!==!1);if(v.length)return v.map(g=>({columnKey:g.key,order:g.sortOrder,sorter:g.sorter}));if(h.length)return[];const{value:p}=i;return Array.isArray(p)?p:p?[p]:[]}),o=Q(()=>{const h=a.value.slice().sort((v,p)=>{const g=SC(v.sorter)||0;return(SC(p.sorter)||0)-g});return h.length?e.value.slice().sort((p,g)=>{let m=0;return h.some(y=>{const{columnKey:b,sorter:x,order:w}=y,S=Sje(x,b);return S&&w&&(m=S(p.rawNode,g.rawNode),m!==0)?(m=m*G9e(w),!0):!1}),m}):e.value});function s(h){let v=a.value.slice();return h&&SC(h.sorter)!==!1?(v=v.filter(p=>SC(p.sorter)!==!1),d(v,h),v):h||null}function l(h){const v=s(h);u(v)}function u(h){const{"onUpdate:sorter":v,onUpdateSorter:p,onSorterChange:g}=r;v&&pt(v,h),p&&pt(p,h),g&&pt(g,h),i.value=h}function c(h,v="ascend"){if(!h)f();else{const p=t.value.find(m=>m.type!=="selection"&&m.type!=="expand"&&m.key===h);if(!p||!p.sorter)return;const g=p.sorter;l({columnKey:h,sorter:g,order:v})}}function f(){u(null)}function d(h,v){const p=h.findIndex(g=>(v==null?void 0:v.columnKey)&&g.columnKey===v.columnKey);p!==void 0&&p>=0?h[p]=v:h.push(v)}return{clearSorter:f,sort:c,sortedDataRef:o,mergedSortStateRef:a,deriveNextSorter:l}}function _je(r,{dataRelatedColsRef:t}){const e=Q(()=>r.columns.find(O=>O.type==="selection")||null),n=Q(()=>{const{childrenKey:O}=r;return lh(r.data,{ignoreEmptyChildren:!0,getKey:r.rowKey,getChildren:B=>B[O],getDisabled:B=>{var U,W;return!!((W=(U=e.value)===null||U===void 0?void 0:U.disabled)===null||W===void 0?void 0:W.call(U,B))}})}),i=On(()=>{const{columns:O}=r,{length:B}=O;for(let U=0;U<B;++U)if(!O[U].type)return U;return 0}),a=ke({}),o=ke(1),s=ke(10),l=Q(()=>{const O=t.value.filter(W=>W.filterOptionValues!==void 0||W.filterOptionValue!==void 0),B={};return O.forEach(W=>{W.type==="selection"||W.type==="expand"||(B[W.key]=W.filterOptionValues||W.filterOptionValue||null)}),Object.assign(Xq(a.value),B)}),u=Q(()=>{const O=l.value,{columns:B}=r;function U(ie){return(q,j)=>!!~String(j[ie]).indexOf(String(q))}const{value:{treeNodes:W}}=n,X=[];return B.forEach(ie=>{ie.type==="selection"||ie.type==="expand"||"children"in ie||X.push([ie.key,ie])}),W?W.filter(ie=>{const{rawNode:q}=ie;for(const[j,fe]of X){let se=O[j];if(se==null||(Array.isArray(se)||(se=[se]),!se.length))continue;const ce=fe.filter==="default"?U(j):fe.filter;if(fe&&typeof ce=="function")if(fe.filterMode==="and"){if(se.some(_e=>!ce(_e,q)))return!1}else{if(se.some(_e=>ce(_e,q)))continue;return!1}}return!0}):[]}),{sortedDataRef:c,deriveNextSorter:f,mergedSortStateRef:d,sort:h,clearSorter:v}=Eje(r,{dataRelatedColsRef:t,filteredDataRef:u});t.value.forEach(O=>{var B;if(O.filter){const U=O.defaultFilterOptionValues;O.filterMultiple?a.value[O.key]=U||[]:U!==void 0?a.value[O.key]=U===null?[]:U:a.value[O.key]=(B=O.defaultFilterOptionValue)!==null&&B!==void 0?B:null}});const p=Q(()=>{const{pagination:O}=r;if(O!==!1)return O.page}),g=Q(()=>{const{pagination:O}=r;if(O!==!1)return O.pageSize}),m=ri(p,o),y=ri(g,s),b=Q(()=>{const{pagination:O}=r;if(O){const{pageCount:B}=O;if(B!==void 0)return B}}),x=Q(()=>{if(r.remote)return n.value.treeNodes;if(!r.pagination)return c.value;const O=y.value,B=(m.value-1)*O;return c.value.slice(B,B+O)}),w=Q(()=>x.value.map(O=>O.rawNode));function S(O){const{pagination:B}=r;if(B){const{onChange:U,"onUpdate:page":W,onUpdatePage:X}=B;U&&pt(U,O),X&&pt(X,O),W&&pt(W,O),E(O)}}function C(O){const{pagination:B}=r;if(B){const{onPageSizeChange:U,"onUpdate:pageSize":W}=B;U&&pt(U,O),W&&pt(W,O),k(O)}}const _=Q(()=>{if(r.remote){const{pagination:O}=r;if(O){const{itemCount:B}=O;if(B!==void 0)return B}return}return u.value.length}),T=Q(()=>Object.assign(Object.assign({},r.pagination),{onChange:void 0,onUpdatePage:void 0,onUpdatePageSize:void 0,onPageSizeChange:void 0,"onUpdate:page":S,"onUpdate:pageSize":C,page:m.value,pageSize:y.value,pageCount:_.value===void 0?b.value:void 0,itemCount:_.value}));function E(O){const{"onUpdate:page":B,onPageChange:U,onUpdatePage:W}=r;W&&pt(W,O),B&&pt(B,O),U&&pt(U,O),o.value=O}function k(O){const{"onUpdate:pageSize":B,onPageSizeChange:U,onUpdatePageSize:W}=r;U&&pt(U,O),W&&pt(W,O),B&&pt(B,O),s.value=O}function I(O,B){const{onUpdateFilters:U,"onUpdate:filters":W,onFiltersChange:X}=r;U&&pt(U,O,B),W&&pt(W,O,B),X&&pt(X,O,B),a.value=O}function P(O){E(O)}function F(){$()}function $(){R({})}function R(O){L(O)}function L(O){O?O&&I(Xq(O)):I({})}return{treeMateRef:n,mergedCurrentPageRef:m,mergedPaginationRef:T,paginatedDataRef:x,rawPaginatedDataRef:w,mergedFilterStateRef:l,mergedSortStateRef:d,hoverKeyRef:ke(null),selectionColumnRef:e,firstContentfulColIndexRef:i,doUpdateFilters:I,deriveNextSorter:f,doUpdatePageSize:k,doUpdatePage:E,filter:L,filters:R,clearFilter:F,clearFilters:$,clearSorter:v,page:P,sort:h}}function Tje(r,{mainTableInstRef:t,mergedCurrentPageRef:e,bodyWidthRef:n,scrollPartRef:i}){let a=0;const o=ke(null),s=ke(null),l=Q(()=>ca(r.scrollX)),u=Q(()=>r.columns.filter(w=>w.fixed==="left")),c=Q(()=>r.columns.filter(w=>w.fixed==="right")),f=Q(()=>{const w={};let S=0;function C(_){_.forEach(T=>{const E={start:S,end:0};w[vh(T)]=E,"children"in T?(C(T.children),E.end=S):(S+=IP(T)||0,E.end=S)})}return C(u.value),w}),d=Q(()=>{const w={};let S=0;function C(_){_.forEach(T=>{const E={start:S,end:0};w[vh(T)]=E,"children"in T?(C(T.children),E.end=S):(S+=IP(T)||0,E.end=S)})}return C(c.value.reverse()),w});function h(){var w,S;const{value:C}=u;let _=0;const{value:T}=f;let E=null;for(let k=0;k<C.length;++k){const I=vh(C[k]);if(a>(((w=T[I])===null||w===void 0?void 0:w.start)||0)-_)E=I,_=((S=T[I])===null||S===void 0?void 0:S.end)||0;else break}o.value=E}function v(){var w,S;const{value:C}=c,_=Number(r.scrollX),{value:T}=n;if(T===null)return;let E=0,k=null;const{value:I}=d;for(let P=0;P<C.length;++P){const F=vh(C[P]);if(Math.round(a+(((w=I[F])===null||w===void 0?void 0:w.start)||0)+T-E)<_)k=F,E=((S=I[F])===null||S===void 0?void 0:S.end)||0;else break}s.value=k}function p(){const w=t.value?t.value.getHeaderElement():null,S=t.value?t.value.getBodyElement():null;return{header:w,body:S}}function g(){const{body:w}=p();w&&(w.scrollTop=0)}function m(){i.value==="head"&&NS(b)}function y(){i.value==="body"&&NS(b)}function b(){const{header:w,body:S}=p();if(!S)return;const{value:C}=n;if(C===null)return;const{value:_}=i;if(r.maxHeight||r.flexHeight){if(!w)return;_==="head"?(a=w.scrollLeft,S.scrollLeft=a):(a=S.scrollLeft,w.scrollLeft=a)}else a=S.scrollLeft;h(),v()}function x(w){const{header:S}=p();!S||(S.scrollLeft=w,b())}return nn(e,()=>{g()}),{styleScrollXRef:l,fixedColumnLeftMapRef:f,fixedColumnRightMapRef:d,leftFixedColumnsRef:u,rightFixedColumnsRef:c,leftActiveFixedColKeyRef:o,rightActiveFixedColKeyRef:s,syncScrollState:b,handleTableBodyScroll:y,handleTableHeaderScroll:m,setHeaderScrollLeft:x}}const lK=kje();var Aje=we([ne("data-table",`
 width: 100%;
 font-size: var(--font-size);
 display: flex;
 flex-direction: column;
 position: relative;
 --merged-th-color: var(--th-color);
 --merged-td-color: var(--td-color);
 --merged-border-color: var(--border-color);
 --merged-th-color-hover: var(--th-color-hover);
 --merged-td-color-hover: var(--td-color-hover);
 --merged-td-color-striped: var(--td-color-striped);
 `,[Pe("flex-height",[we(">",[ne("data-table-wrapper",`
 flex-grow: 1;
 display: flex;
 flex-direction: column;
 `,[we(">",[ne("data-table-base-table",`
 display: flex;
 flex-direction: column;
 flex-grow: 1;
 `,[we(">",[ne("data-table-base-table-body","flex-basis: 0;",[we("&:last-child","flex-grow: 1;")])])])])])])]),we(">",[ne("base-loading",`
 color: var(--loading-color);
 font-size: var(--loading-size);
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 transition: color .3s var(--bezier);
 `,[qu({originalTransform:"translateX(-50%) translateY(-50%)"})])]),ne("data-table-expand-trigger","cursor: pointer;"),ne("data-table-expand-placeholder",`
 margin-right: 8px;
 display: inline-block;
 width: 16px;
 height: 1px;
 `),ne("data-table-indent",`
 display: inline-block;
 height: 1px;
 `),ne("data-table-expand-trigger",`
 margin-right: 8px;
 cursor: pointer;
 font-size: 16px;
 vertical-align: -0.2em;
 `),ne("data-table-thead",{transition:"background-color .3s var(--bezier)",backgroundColor:"var(--merged-th-color)"}),ne("data-table-tr",`
 box-sizing: border-box;
 background-clip: padding-box;
 transition: background-color .3s var(--bezier);
 `,[Pe("striped","background-color: var(--merged-td-color-striped);",[ne("data-table-td","background-color: var(--merged-td-color-striped);")]),we("&:hover","background-color: var(--merged-td-color-hover);",[ne("data-table-td","background-color: var(--merged-td-color-hover);")])]),ne("data-table-th",`
 padding: var(--th-padding);
 position: relative;
 text-align: start;
 box-sizing: border-box;
 background-color: var(--merged-th-color);
 border-color: var(--merged-border-color);
 border-bottom: 1px solid var(--merged-border-color);
 color: var(--th-text-color);
 transition:
 border-color .3s var(--bezier),
 color .3s var(--bezier),
 background-color .3s var(--bezier);
 font-weight: var(--th-font-weight);
 `,[Pe("filterable",{paddingRight:"36px"}),lK,Pe("selection",`
 padding: 0;
 text-align: center;
 line-height: 0;
 z-index: 3;
 `),xe("ellipsis",`
 display: inline-block;
 vertical-align: bottom;
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap;
 max-width: 100%;
 `),Pe("hover",{backgroundColor:"var(--merged-th-color-hover)"}),Pe("sortable",{cursor:"pointer"},[xe("ellipsis",{maxWidth:"calc(100% - 18px)"}),we("&:hover",{backgroundColor:"var(--merged-th-color-hover)"})]),ne("data-table-sorter",`
 height: var(--sorter-size);
 width: var(--sorter-size);
 margin-left: 4px;
 position: relative;
 display: inline-flex;
 vertical-align: -0.2em;
 color: var(--th-icon-color);
 transition: 
 transform .3s var(--bezier),
 color .3s var(--bezier);
 `,[Pe("desc",{transform:"rotate(0)"}),Pe("asc",{transform:"rotate(-180deg)"}),Pe("asc, desc",{color:"var(--th-icon-color-active)"})]),ne("data-table-filter",`
 position: absolute;
 z-index: auto;
 right: 0;
 width: 36px;
 top: 0;
 bottom: 0;
 cursor: pointer;
 display: flex;
 justify-content: center;
 align-items: center;
 transition:
 background-color .3s var(--bezier),
 color .3s var(--bezier);
 font-size: var(--filter-size);
 color: var(--th-icon-color);
 `,[we("&:hover",`
 background-color: var(--th-button-color-hover);
 `),Pe("show",`
 background-color: var(--th-button-color-hover);
 `),Pe("active",`
 background-color: var(--th-button-color-hover);
 color: var(--th-icon-color-active);
 `)])]),ne("data-table-td",`
 padding: var(--td-padding);
 text-align: start;
 box-sizing: border-box;
 border: none;
 background-color: var(--merged-td-color);
 color: var(--td-text-color);
 border-bottom: 1px solid var(--merged-border-color);
 transition:
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier),
 border-color .3s var(--bezier),
 color .3s var(--bezier);
 `,[Pe("last-row",{borderBottom:"0 solid var(--merged-border-color)"},[we("&::after",{bottom:"0 !important"}),we("&::before",{bottom:"0 !important"})]),Pe("summary",`
 background-color: var(--merged-th-color);
 `),Pe("hover",{backgroundColor:"var(--merged-td-color-hover)"}),Pe("ellipsis",`
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap;
 `),Pe("selection, expand",`
 text-align: center;
 padding: 0;
 line-height: 0;
 `),lK]),ne("data-table-empty",`
 padding: var(--empty-padding);
 flex-grow: 1;
 flex-shrink: 0;
 opacity: 1;
 display: flex;
 align-items: center;
 justify-content: center;
 transition: opacity .3s var(--bezier);
 `,[Pe("hide",{opacity:0})]),xe("pagination",`
 margin: var(--pagination-margin);
 display: flex;
 justify-content: flex-end;
 `),ne("data-table-wrapper",`
 position: relative;
 opacity: 1;
 transition: opacity .3s var(--bezier), border-color .3s var(--bezier);
 border-top-left-radius: var(--border-radius);
 border-top-right-radius: var(--border-radius);
 line-height: var(--line-height);
 `),Pe("loading",[ne("data-table-wrapper","opacity: var(--opacity-loading);")]),Pe("single-column",[ne("data-table-td",{borderBottom:"0 solid var(--merged-border-color)"},[we("&::after, &::before",{bottom:"0 !important"})])]),Cn("single-line",[ne("data-table-th",{borderRight:"1px solid var(--merged-border-color)"},[Pe("last",{borderRight:"0 solid var(--merged-border-color)"})]),ne("data-table-td",{borderRight:"1px solid var(--merged-border-color)"},[Pe("last-col",{borderRight:"0 solid var(--merged-border-color)"})])]),Pe("bordered",[ne("data-table-wrapper",`
 border: 1px solid var(--merged-border-color);
 border-bottom-left-radius: var(--border-radius);
 border-bottom-right-radius: var(--border-radius);
 overflow: hidden;
 `)]),ne("data-table-base-table",[Pe("transition-disabled",[ne("data-table-th",[we("&::after, &::before",{transition:"none"})]),ne("data-table-td",[we("&::after, &::before",{transition:"none"})])])]),Pe("bottom-bordered",[ne("data-table-td",[Pe("last-row",{borderBottom:"1px solid var(--merged-border-color)"})])]),ne("data-table-table",`
 font-variant-numeric: tabular-nums;
 width: 100%;
 word-wrap: break-word;
 word-break: break-all;
 transition: background-color .3s var(--bezier);
 border-collapse: separate;
 border-spacing: 0;
 background-color: var(--merged-td-color);
 `),ne("data-table-base-table-header",`
 border-top-left-radius: calc(var(--border-radius) - 1px);
 border-top-right-radius: calc(var(--border-radius) - 1px);
 z-index: 3;
 overflow: scroll;
 flex-shrink: 0;
 transition: border-color .3s var(--bezier);
 scrollbar-width: none;
 `,[we("&::-webkit-scrollbar",{width:0,height:0})]),ne("data-table-check-extra",`
 transition: color .3s var(--bezier);
 color: var(--th-icon-color);
 position: absolute;
 font-size: 14px;
 right: -4px;
 top: 50%;
 transform: translateY(-50%);
 z-index: 1;
 `)]),ne("data-table-filter-menu",[ne("scrollbar",{maxHeight:"240px"}),xe("group",{display:"flex",flexDirection:"column",padding:"12px 12px 0 12px"},[ne("checkbox",{marginBottom:"12px",marginRight:0}),ne("radio",{marginBottom:"12px",marginRight:0})]),xe("action",`
 padding: var(--action-padding);
 display: flex;
 flex-wrap: nowrap;
 justify-content: space-evenly;
 border-top: 1px solid var(--action-divider-color);
 `,[ne("button",[we("&:not(:last-child)",{margin:"var(--action-button-margin)"}),we("&:last-child",{marginRight:0})])]),ne("divider",{margin:"0!important"})]),d0(ne("data-table",`
 --merged-th-color: var(--th-color-modal);
 --merged-td-color: var(--td-color-modal);
 --merged-border-color: var(--border-color-modal);
 --merged-th-color-hover: var(--th-color-hover-modal);
 --merged-td-color-hover: var(--td-color-hover-modal);
 --merged-td-color-striped: var(--td-color-striped-modal);
 `)),WS(ne("data-table",`
 --merged-th-color: var(--th-color-popover);
 --merged-td-color: var(--td-color-popover);
 --merged-border-color: var(--border-color-popover);
 --merged-th-color-hover: var(--th-color-hover-popover);
 --merged-td-color-hover: var(--td-color-hover-popover);
 --merged-td-color-striped: var(--td-color-striped-popover);
 `))]);function kje(){return[Pe("fixed-left",`
 left: 0;
 position: sticky;
 z-index: 2;
 `,[we("&::after",`
 pointer-events: none;
 content: "";
 width: 36px;
 display: inline-block;
 position: absolute;
 top: 0;
 bottom: -1px;
 transition: box-shadow .2s var(--bezier);
 right: -36px;
 `)]),Pe("fixed-right",{right:0,position:"sticky",zIndex:1},[we("&::before",`
 pointer-events: none;
 content: "";
 width: 36px;
 display: inline-block;
 position: absolute;
 top: 0;
 bottom: -1px;
 transition: box-shadow .2s var(--bezier);
 left: -36px;
 `)])]}function Mje(r){const t=[],e=[],n=[],i=new WeakMap;let a=-1,o=0,s=!1;function l(f,d){d>a&&(t[d]=[],a=d);for(const h of f)"children"in h?l(h.children,d+1):(e.push({key:vh(h),style:U9e(h),column:h}),o+=1,s||(s=!!h.ellipsis),n.push(h))}l(r,0);let u=0;function c(f,d){let h=0;f.forEach((v,p)=>{var g;if("children"in v){const m=u,y={column:v,colSpan:0,rowSpan:1,isLast:!1};c(v.children,d+1),v.children.forEach(b=>{var x,w;y.colSpan+=(w=(x=i.get(b))===null||x===void 0?void 0:x.colSpan)!==null&&w!==void 0?w:0}),m+y.colSpan===o&&(y.isLast=!0),i.set(v,y),t[d].push(y)}else{if(u<h){u+=1;return}let m=1;"titleColSpan"in v&&(m=(g=v.titleColSpan)!==null&&g!==void 0?g:1),m>1&&(h=u+m);const y=u+m===o,b={column:v,colSpan:m,rowSpan:a-d+1,isLast:y};i.set(v,b),t[d].push(b),u+=1}})}return c(r,0),{hasEllipsis:s,rows:t,cols:e,dataRelatedCols:n}}function Ije(r){const t=Q(()=>Mje(r.columns));return{rowsRef:Q(()=>t.value.rows),colsRef:Q(()=>t.value.cols),hasEllipsisRef:Q(()=>t.value.hasEllipsis),dataRelatedColsRef:Q(()=>t.value.dataRelatedCols)}}function Pje(r){const t=On(()=>{for(const o of r.columns)if(o.type==="expand")return o.renderExpand}),e=ke(r.defaultExpandedRowKeys),n=Ht(r,"expandedRowKeys"),i=ri(n,e);function a(o){const{onUpdateExpandedRowKeys:s,"onUpdate:expandedRowKeys":l}=r;s&&pt(s,o),l&&pt(l,o),e.value=o}return{mergedExpandedRowKeysRef:i,renderExpandRef:t,doUpdateExpandedRowKeys:a}}const Dje=Object.assign(Object.assign({},rr.props),{pagination:{type:[Object,Boolean],default:!1},minHeight:[Number,String],maxHeight:[Number,String],columns:{type:Array,default:()=>[]},rowClassName:[String,Function],rowProps:Function,rowKey:Function,summary:[Function],data:{type:Array,default:()=>[]},loading:Boolean,bordered:{type:Boolean,default:void 0},bottomBordered:{type:Boolean,default:void 0},striped:Boolean,scrollX:[Number,String],defaultCheckedRowKeys:{type:Array,default:()=>[]},checkedRowKeys:Array,singleLine:{type:Boolean,default:!0},singleColumn:Boolean,size:{type:String,default:"medium"},remote:Boolean,defaultExpandedRowKeys:{type:Array,default:[]},expandedRowKeys:Array,virtualScroll:Boolean,tableLayout:{type:String,default:"auto"},cascade:{type:Boolean,default:!0},childrenKey:{type:String,default:"children"},indent:{type:Number,default:16},flexHeight:Boolean,"onUpdate:page":[Function,Array],onUpdatePage:[Function,Array],"onUpdate:pageSize":[Function,Array],onUpdatePageSize:[Function,Array],"onUpdate:sorter":[Function,Array],onUpdateSorter:[Function,Array],"onUpdate:filters":[Function,Array],onUpdateFilters:[Function,Array],"onUpdate:checkedRowKeys":[Function,Array],onUpdateCheckedRowKeys:[Function,Array],"onUpdate:expandedRowKeys":[Function,Array],onUpdateExpandedRowKeys:[Function,Array],onPageChange:{type:[Function,Array],validator:()=>!0,default:void 0},onPageSizeChange:{type:[Function,Array],validator:()=>!0,default:void 0},onSorterChange:{type:[Function,Array],validator:()=>!0,default:void 0},onFiltersChange:{type:[Function,Array],validator:()=>!0,default:void 0},onCheckedRowKeysChange:{type:[Function,Array],validator:()=>!0,default:void 0}});var _dt=mt({name:"DataTable",alias:["AdvancedTable"],props:Dje,setup(r){const{mergedBorderedRef:t,mergedClsPrefixRef:e}=pn(r),n=Q(()=>{const{bottomBordered:We}=r;return t.value?!1:We!==void 0?We:!0}),i=rr("DataTable","DataTable",Aje,_9e,r,e),a=ke(null),o=ke("body"),s=ke(null),{rowsRef:l,colsRef:u,dataRelatedColsRef:c,hasEllipsisRef:f}=Ije(r),{treeMateRef:d,mergedCurrentPageRef:h,paginatedDataRef:v,rawPaginatedDataRef:p,selectionColumnRef:g,hoverKeyRef:m,mergedPaginationRef:y,mergedFilterStateRef:b,mergedSortStateRef:x,firstContentfulColIndexRef:w,doUpdateFilters:S,deriveNextSorter:C,filter:_,filters:T,clearFilter:E,clearFilters:k,clearSorter:I,page:P,sort:F}=_je(r,{dataRelatedColsRef:c}),{doCheckAll:$,doUncheckAll:R,doCheck:L,doUncheck:O,headerCheckboxDisabledRef:B,someRowsCheckedRef:U,allRowsCheckedRef:W,mergedCheckedRowKeySetRef:X,mergedInderminateRowKeySetRef:ie}=wje(r,{selectionColumnRef:g,treeMateRef:d,paginatedDataRef:v}),{mergedExpandedRowKeysRef:q,renderExpandRef:j,doUpdateExpandedRowKeys:fe}=Pje(r),{handleTableBodyScroll:se,handleTableHeaderScroll:ce,syncScrollState:_e,setHeaderScrollLeft:Me,leftActiveFixedColKeyRef:Ye,rightActiveFixedColKeyRef:De,leftFixedColumnsRef:D,rightFixedColumnsRef:z,fixedColumnLeftMapRef:V,fixedColumnRightMapRef:he}=Tje(r,{scrollPartRef:o,bodyWidthRef:a,mainTableInstRef:s,mergedCurrentPageRef:h}),{localeRef:re}=sf("DataTable"),pe=Q(()=>r.virtualScroll||r.flexHeight||r.maxHeight!==void 0||f.value?"fixed":r.tableLayout);return Qr(Ku,{indentRef:Ht(r,"indent"),firstContentfulColIndexRef:w,bodyWidthRef:a,componentId:_p(),hoverKeyRef:m,mergedClsPrefixRef:e,mergedThemeRef:i,scrollXRef:Q(()=>r.scrollX),rowsRef:l,colsRef:u,paginatedDataRef:v,leftActiveFixedColKeyRef:Ye,rightActiveFixedColKeyRef:De,leftFixedColumnsRef:D,rightFixedColumnsRef:z,fixedColumnLeftMapRef:V,fixedColumnRightMapRef:he,mergedCurrentPageRef:h,someRowsCheckedRef:U,allRowsCheckedRef:W,mergedSortStateRef:x,mergedFilterStateRef:b,loadingRef:Ht(r,"loading"),rowClassNameRef:Ht(r,"rowClassName"),mergedCheckedRowKeySetRef:X,mergedExpandedRowKeysRef:q,mergedInderminateRowKeySetRef:ie,localeRef:re,scrollPartRef:o,rowKeyRef:Ht(r,"rowKey"),renderExpandRef:j,summaryRef:Ht(r,"summary"),virtualScrollRef:Ht(r,"virtualScroll"),rowPropsRef:Ht(r,"rowProps"),stripedRef:Ht(r,"striped"),checkOptionsRef:Q(()=>{const{value:We}=g;return We==null?void 0:We.options}),rawPaginatedDataRef:p,hasChildrenRef:Q(()=>d.value.maxLevel>0),filterMenuCssVarsRef:Q(()=>{const{self:{actionDividerColor:We,actionPadding:Le,actionButtonMargin:$e}}=i.value;return{"--action-padding":Le,"--action-button-margin":$e,"--action-divider-color":We}}),mergedTableLayoutRef:pe,maxHeightRef:Ht(r,"maxHeight"),minHeightRef:Ht(r,"minHeight"),flexHeightRef:Ht(r,"flexHeight"),headerCheckboxDisabledRef:B,syncScrollState:_e,doUpdateFilters:S,deriveNextSorter:C,doCheck:L,doUncheck:O,doCheckAll:$,doUncheckAll:R,doUpdateExpandedRowKeys:fe,handleTableHeaderScroll:ce,handleTableBodyScroll:se,setHeaderScrollLeft:Me}),Object.assign(Object.assign({mainTableInstRef:s,mergedClsPrefix:e,mergedTheme:i,paginatedData:v,mergedBordered:t,mergedBottomBordered:n,mergedPagination:y},{filter:_,filters:T,clearFilters:k,clearSorter:I,page:P,sort:F,clearFilter:E}),{cssVars:Q(()=>{const{size:We}=r,{common:{cubicBezierEaseInOut:Le},self:{borderColor:$e,tdColorHover:H,thColor:Y,thColorHover:K,tdColor:ee,tdTextColor:J,thTextColor:ge,thFontWeight:Ve,thButtonColorHover:Ge,thIconColor:rt,thIconColorActive:Se,filterSize:ye,borderRadius:Re,lineHeight:St,tdColorModal:kt,thColorModal:Ae,borderColorModal:ut,thColorHoverModal:cr,tdColorHoverModal:Ne,borderColorPopover:vt,thColorPopover:Ft,tdColorPopover:vr,tdColorHoverPopover:zr,thColorHoverPopover:or,paginationMargin:qe,emptyPadding:st,boxShadowAfter:Rt,boxShadowBefore:Nt,sorterSize:sr,loadingColor:fn,loadingSize:on,opacityLoading:ln,tdColorStriped:Pn,tdColorStripedModal:jr,tdColorStripedPopover:hr,[Gt("fontSize",We)]:Wr,[Gt("thPadding",We)]:xr,[Gt("tdPadding",We)]:dn}}=i.value;return{"--font-size":Wr,"--th-padding":xr,"--td-padding":dn,"--bezier":Le,"--border-radius":Re,"--line-height":St,"--border-color":$e,"--border-color-modal":ut,"--border-color-popover":vt,"--th-color":Y,"--th-color-hover":K,"--th-color-modal":Ae,"--th-color-hover-modal":cr,"--th-color-popover":Ft,"--th-color-hover-popover":or,"--td-color":ee,"--td-color-hover":H,"--td-color-modal":kt,"--td-color-hover-modal":Ne,"--td-color-popover":vr,"--td-color-hover-popover":zr,"--th-text-color":ge,"--td-text-color":J,"--th-font-weight":Ve,"--th-button-color-hover":Ge,"--th-icon-color":rt,"--th-icon-color-active":Se,"--filter-size":ye,"--pagination-margin":qe,"--empty-padding":st,"--box-shadow-before":Nt,"--box-shadow-after":Rt,"--sorter-size":sr,"--loading-size":on,"--loading-color":fn,"--opacity-loading":ln,"--td-color-striped":Pn,"--td-color-striped-modal":jr,"--td-color-striped-popover":hr}})})},render(){const{mergedClsPrefix:r}=this;return M("div",{class:[`${r}-data-table`,{[`${r}-data-table--bordered`]:this.mergedBordered,[`${r}-data-table--bottom-bordered`]:this.mergedBottomBordered,[`${r}-data-table--single-line`]:this.singleLine,[`${r}-data-table--single-column`]:this.singleColumn,[`${r}-data-table--loading`]:this.loading,[`${r}-data-table--flex-height`]:this.flexHeight}],style:this.cssVars},M("div",{class:`${r}-data-table-wrapper`},M(xje,{ref:"mainTableInstRef"},{default:()=>this.paginatedData.length===0?M("div",{class:[`${r}-data-table-empty`,this.loading&&`${r}-data-table-empty--hide`]},Jr(this.$slots,"empty",void 0,()=>[M(sP,{theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])):null})),this.pagination?M("div",{class:`${r}-data-table__pagination`},M(v9e,Object.assign({theme:this.mergedTheme.peers.Pagination,themeOverrides:this.mergedTheme.peerOverrides.Pagination,disabled:this.loading},this.mergedPagination))):null,M(pa,{name:"fade-in-scale-up-transition"},{default:()=>this.loading?M(sh,{clsPrefix:r,strokeWidth:20}):null}))}}),Rje={itemFontSize:"12px",itemHeight:"36px",itemWidth:"52px",panelActionPadding:"8px 0"};const Oje=r=>{const{popoverColor:t,textColor2:e,primaryColor:n,hoverColor:i,dividerColor:a,opacityDisabled:o,boxShadow2:s,borderRadius:l,iconColor:u,iconColorDisabled:c}=r;return Object.assign(Object.assign({},Rje),{panelColor:t,panelBoxShadow:s,panelDividerColor:a,itemTextColor:e,itemTextColorActive:n,itemColorHover:i,itemOpacityDisabled:o,itemBorderRadius:l,borderRadius:l,iconColor:u,iconColorDisabled:c})},Lje=ro({name:"TimePicker",common:Bn,peers:{Scrollbar:Xu,Button:w0,Input:uC},self:Oje});var uK=Lje,Fje={itemSize:"24px",itemCellWidth:"38px",itemCellHeight:"32px",scrollItemWidth:"80px",scrollItemHeight:"40px",panelExtraFooterPadding:"8px 12px",panelActionPadding:"8px 12px",calendarTitlePadding:"0",calendarTitleHeight:"28px",arrowSize:"14px",panelHeaderPadding:"8px 12px",calendarDaysHeight:"32px",calendarTitleGridTempateColumns:"28px 28px 1fr 28px 28px",calendarLeftPaddingDate:"6px 12px 4px 12px",calendarLeftPaddingDatetime:"4px 12px",calendarLeftPaddingDaterange:"6px 12px 4px 12px",calendarLeftPaddingDatetimerange:"4px 12px",calendarLeftPaddingMonth:"0",calendarLeftPaddingYear:"0",calendarRightPaddingDate:"6px 12px 4px 12px",calendarRightPaddingDatetime:"4px 12px",calendarRightPaddingDaterange:"6px 12px 4px 12px",calendarRightPaddingDatetimerange:"4px 12px",calendarRightPaddingMonth:"0",calendarRightPaddingYear:"0"};const Nje=r=>{const{hoverColor:t,fontSize:e,textColor2:n,textColorDisabled:i,popoverColor:a,primaryColor:o,borderRadiusSmall:s,iconColor:l,iconColorDisabled:u,textColor1:c,dividerColor:f,boxShadow2:d,borderRadius:h,fontWeightStrong:v}=r;return Object.assign(Object.assign({},Fje),{itemFontSize:e,calendarDaysFontSize:e,calendarTitleFontSize:e,itemTextColor:n,itemTextColorDisabled:i,itemTextColorActive:a,itemTextColorCurrent:o,itemColorIncluded:qr(o,{alpha:.1}),itemColorHover:t,itemColorDisabled:t,itemColorActive:o,itemBorderRadius:s,panelColor:a,panelTextColor:n,arrowColor:l,calendarTitleTextColor:c,calendarDaysTextColor:n,panelHeaderDividerColor:f,calendarDaysDividerColor:f,calendarDividerColor:f,panelActionDividerColor:f,panelBoxShadow:d,panelBorderRadius:h,calendarTitleFontWeight:v,scrollItemBorderRadius:h,iconColor:l,iconColorDisabled:u})},Bje=ro({name:"DatePicker",common:Bn,peers:{Input:uC,Button:w0,TimePicker:uK,Scrollbar:Xu},self:Nje});var $je=Bje;function zje(r,t){const e=Q(()=>{const{isTimeDisabled:c}=r,{value:f}=t;if(!(f===null||Array.isArray(f)))return c==null?void 0:c(f)}),n=Q(()=>{var c;return(c=e.value)===null||c===void 0?void 0:c.isHourDisabled}),i=Q(()=>{var c;return(c=e.value)===null||c===void 0?void 0:c.isMinuteDisabled}),a=Q(()=>{var c;return(c=e.value)===null||c===void 0?void 0:c.isSecondDisabled}),o=Q(()=>{const{type:c,isDateDisabled:f}=r,{value:d}=t;return d===null||Array.isArray(d)||!["date","datetime"].includes(c)||!f?!1:f(d)}),s=Q(()=>{const{type:c}=r,{value:f}=t;if(f===null||c==="datetime"||Array.isArray(f))return!1;const d=new Date(f),h=d.getHours(),v=d.getMinutes(),p=d.getMinutes();return(n.value?n.value(h):!1)||(i.value?i.value(v,h):!1)||(a.value?a.value(p,v,h):!1)}),l=Q(()=>o.value||s.value);return{isValueInvalidRef:Q(()=>{const{type:c}=r;return c==="date"?o.value:c==="datetime"?l.value:!1}),isDateInvalidRef:o,isTimeInvalidRef:s,isDateTimeInvalidRef:l,isHourDisabledRef:n,isMinuteDisabledRef:i,isSecondDisabledRef:a}}function Gje(r,t){const e=Q(()=>{const{isTimeDisabled:f}=r,{value:d}=t;return!Array.isArray(d)||!f?[void 0,void 0]:[f==null?void 0:f(d[0],"start",d),f==null?void 0:f(d[1],"end",d)]}),n={isStartHourDisabledRef:Q(()=>{var f;return(f=e.value[0])===null||f===void 0?void 0:f.isHourDisabled}),isEndHourDisabledRef:Q(()=>{var f;return(f=e.value[1])===null||f===void 0?void 0:f.isHourDisabled}),isStartMinuteDisabledRef:Q(()=>{var f;return(f=e.value[0])===null||f===void 0?void 0:f.isMinuteDisabled}),isEndMinuteDisabledRef:Q(()=>{var f;return(f=e.value[1])===null||f===void 0?void 0:f.isMinuteDisabled}),isStartSecondDisabledRef:Q(()=>{var f;return(f=e.value[0])===null||f===void 0?void 0:f.isSecondDisabled}),isEndSecondDisabledRef:Q(()=>{var f;return(f=e.value[1])===null||f===void 0?void 0:f.isSecondDisabled})},i=Q(()=>{const{type:f,isDateDisabled:d}=r,{value:h}=t;return h===null||!Array.isArray(h)||!["daterange","datetimerange"].includes(f)||!d?!1:d(h[0],"start",h)}),a=Q(()=>{const{type:f,isDateDisabled:d}=r,{value:h}=t;return h===null||!Array.isArray(h)||!["daterange","datetimerange"].includes(f)||!d?!1:d(h[1],"end",h)}),o=Q(()=>{const{type:f}=r,{value:d}=t;if(d===null||!Array.isArray(d)||f!=="datetimerange")return!1;const h=pf(d[0]),v=gC(d[0]),p=mC(d[0]),{isStartHourDisabledRef:g,isStartMinuteDisabledRef:m,isStartSecondDisabledRef:y}=n;return(g.value?g.value(h):!1)||(m.value?m.value(v,h):!1)||(y.value?y.value(p,v,h):!1)}),s=Q(()=>{const{type:f}=r,{value:d}=t;if(d===null||!Array.isArray(d)||f!=="datetimerange")return!1;const h=pf(d[1]),v=gC(d[1]),p=mC(d[1]),{isEndHourDisabledRef:g,isEndMinuteDisabledRef:m,isEndSecondDisabledRef:y}=n;return(g.value?g.value(h):!1)||(m.value?m.value(v,h):!1)||(y.value?y.value(p,v,h):!1)}),l=Q(()=>i.value||o.value),u=Q(()=>a.value||s.value),c=Q(()=>l.value||u.value);return Object.assign(Object.assign({},n),{isStartDateInvalidRef:i,isEndDateInvalidRef:a,isStartTimeInvalidRef:o,isEndTimeInvalidRef:s,isStartValueInvalidRef:l,isEndValueInvalidRef:u,isRangeInvalidRef:c})}const CC=Symbol("datePicker"),C0={amHours:["00","01","02","03","04","05","06","07","08","09","10","11"],pmHours:["12","01","02","03","04","05","06","07","08","09","10","11"],hours:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],minutes:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"],seconds:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"],period:["AM","PM"]};function FP(r){return`00${r}`.slice(-2)}function E0(r,t,e){return Array.isArray(t)?(e==="am"?t.filter(n=>n<12):e==="pm"?t.filter(n=>n>=12).map(n=>n===12?12:n-12):t).map(n=>FP(n)):typeof t=="number"?e==="am"?r.filter(n=>{const i=Number(n);return i<12&&i%t==0}):e==="pm"?r.filter(n=>{const i=Number(n);return i>=12&&i%t==0}).map(n=>{const i=Number(n);return FP(i===12?12:i-12)}):r.filter(n=>Number(n)%t==0):e==="am"?r.filter(n=>Number(n)<12):e==="pm"?r.map(n=>Number(n)).filter(n=>Number(n)>=12).map(n=>FP(n===12?12:n-12)):r}function EC(r,t,e){return e?typeof e=="number"?r%e==0:e.includes(r):!0}function Uje(r,t,e){const n=E0(C0[t],e).map(Number);let i,a;for(let o=0;o<n.length;++o){const s=n[o];if(s===r)return s;if(s>r){a=s;break}i=s}return i===void 0?(a||qS("time-picker","Please set 'hours' or 'minutes' or 'seconds' props"),a):a===void 0||a-r>r-i?i:a}function Vje(r){return pf(r)<12?"am":"pm"}const cK=Symbol("timePicker");var _C=mt({name:"TimePickerPanelCol",props:{clsPrefix:{type:String,required:!0},data:{type:Array,required:!0},activeValue:{type:Number,default:null},onItemClick:Function},render(){const{activeValue:r,onItemClick:t,clsPrefix:e}=this;return this.data.map(n=>{const{label:i,disabled:a,value:o}=n,s=r===o;return M("div",{key:i,"data-active":s?"":null,class:[`${e}-time-picker-col__item`,s&&`${e}-time-picker-col__item--active`,a&&`${e}-time-picker-col__item--disabled`],onClick:t&&!a?()=>t(o):void 0},i)})}});const Hje={actions:{type:Array,default:()=>["now","confirm"]},showHour:{type:Boolean,default:!0},showMinute:{type:Boolean,default:!0},showSecond:{type:Boolean,default:!0},showPeriod:{type:Boolean,default:!0},isHourInvalid:Boolean,isMinuteInvalid:Boolean,isSecondInvalid:Boolean,isAmPmInvalid:Boolean,isValueInvalid:Boolean,hourValue:{type:Number,default:null},minuteValue:{type:Number,default:null},secondValue:{type:Number,default:null},amPmValue:{type:String,default:null},isHourDisabled:Function,isMinuteDisabled:Function,isSecondDisabled:Function,onHourClick:{type:Function,required:!0},onMinuteClick:{type:Function,required:!0},onSecondClick:{type:Function,required:!0},onAmPmClick:{type:Function,required:!0},onNowClick:Function,nowText:String,confirmText:String,transitionDisabled:Boolean,onConfirmClick:Function,onFocusin:Function,onFocusout:Function,onFocusDetectorFocus:Function,onKeydown:Function,hours:[Number,Array],minutes:[Number,Array],seconds:[Number,Array],use12Hours:Boolean};var Wje=mt({name:"TimePickerPanel",props:Hje,setup(r){const{mergedThemeRef:t,mergedClsPrefixRef:e}=nr(cK),n=Q(()=>{const{isHourDisabled:s,hours:l,use12Hours:u,amPmValue:c}=r;if(u){const f=c!=null?c:Vje(Date.now());return E0(C0.hours,l,f).map(d=>{const h=Number(d),v=f==="pm"&&h!==12?h+12:h;return{label:d,value:v,disabled:s?s(v):!1}})}else return E0(C0.hours,l).map(f=>({label:f,value:Number(f),disabled:s?s(Number(f)):!1}))}),i=Q(()=>{const{isMinuteDisabled:s,minutes:l}=r;return E0(C0.minutes,l).map(u=>({label:u,value:Number(u),disabled:s?s(Number(u),r.hourValue):!1}))}),a=Q(()=>{const{isSecondDisabled:s,seconds:l}=r;return E0(C0.seconds,l).map(u=>({label:u,value:Number(u),disabled:s?s(Number(u),r.minuteValue,r.hourValue):!1}))}),o=Q(()=>{const{isHourDisabled:s}=r;let l=!0,u=!0;for(let c=0;c<12;++c)if(!(s==null?void 0:s(c))){l=!1;break}for(let c=12;c<24;++c)if(!(s==null?void 0:s(c))){u=!1;break}return[{label:"AM",value:"am",disabled:l},{label:"PM",value:"pm",disabled:u}]});return{mergedTheme:t,mergedClsPrefix:e,hours:n,minutes:i,seconds:a,amPm:o,hourScrollRef:ke(null),minuteScrollRef:ke(null),secondScrollRef:ke(null),amPmScrollRef:ke(null)}},render(){var r,t;const{mergedClsPrefix:e,mergedTheme:n}=this;return M("div",{tabindex:0,class:`${e}-time-picker-panel`,onFocusin:this.onFocusin,onFocusout:this.onFocusout,onKeydown:this.onKeydown},M("div",{class:`${e}-time-picker-cols`},this.showHour?M("div",{class:[`${e}-time-picker-col`,this.isHourInvalid&&`${e}-time-picker-col--invalid`,this.transitionDisabled&&`${e}-time-picker-col--transition-disabled`]},M(ms,{ref:"hourScrollRef",theme:n.peers.Scrollbar,themeOverrides:n.peerOverrides.Scrollbar},{default:()=>[M(_C,{clsPrefix:e,data:this.hours,activeValue:this.hourValue,onItemClick:this.onHourClick}),M("div",{class:`${e}-time-picker-col__padding`})]})):null,this.showMinute?M("div",{class:[`${e}-time-picker-col`,this.transitionDisabled&&`${e}-time-picker-col--transition-disabled`,this.isMinuteInvalid&&`${e}-time-picker-col--invalid`]},M(ms,{ref:"minuteScrollRef",theme:n.peers.Scrollbar,themeOverrides:n.peerOverrides.Scrollbar},{default:()=>[M(_C,{clsPrefix:e,data:this.minutes,activeValue:this.minuteValue,onItemClick:this.onMinuteClick}),M("div",{class:`${e}-time-picker-col__padding`})]})):null,this.showSecond?M("div",{class:[`${e}-time-picker-col`,this.isSecondInvalid&&`${e}-time-picker-col--invalid`,this.transitionDisabled&&`${e}-time-picker-col--transition-disabled`]},M(ms,{ref:"secondScrollRef",theme:n.peers.Scrollbar,themeOverrides:n.peerOverrides.Scrollbar},{default:()=>[M(_C,{clsPrefix:e,data:this.seconds,activeValue:this.secondValue,onItemClick:this.onSecondClick}),M("div",{class:`${e}-time-picker-col__padding`})]})):null,this.use12Hours?M("div",{class:[`${e}-time-picker-col`,this.isAmPmInvalid&&`${e}-time-picker-col--invalid`,this.transitionDisabled&&`${e}-time-picker-col--transition-disabled`]},M(ms,{ref:"amPmScrollRef",theme:n.peers.Scrollbar,themeOverrides:n.peerOverrides.Scrollbar},{default:()=>[M(_C,{clsPrefix:e,data:this.amPm,activeValue:this.amPmValue,onItemClick:this.onAmPmClick}),M("div",{class:`${e}-time-picker-col__padding`})]})):null),M("div",{class:`${e}-time-picker-actions`},((r=this.actions)===null||r===void 0?void 0:r.includes("now"))?M(Va,{size:"tiny",theme:n.peers.Button,themeOverrides:n.peerOverrides.Button,onClick:this.onNowClick},{default:()=>this.nowText}):null,((t=this.actions)===null||t===void 0?void 0:t.includes("confirm"))?M(Va,{size:"tiny",type:"primary",class:`${e}-time-picker-actions__confirm`,theme:n.peers.Button,themeOverrides:n.peerOverrides.Button,disabled:this.isValueInvalid,onClick:this.onConfirmClick},{default:()=>this.confirmText}):null),M(lf,{onFocus:this.onFocusDetectorFocus}))}}),jje=we([ne("time-picker",`
 z-index: auto;
 position: relative;
 `,[ne("time-picker-icon",`
 color: var(--icon-color);
 transition: color .3s var(--bezier);
 `),Pe("disabled",[ne("time-picker-icon",{color:"var(--icon-color-disabled)"})])]),ne("time-picker-panel",`
 transition:
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier);
 outline: none;
 font-size: var(--item-font-size);
 border-radius: var(--border-radius);
 margin: 4px 0;
 min-width: 104px;
 overflow: hidden;
 background-color: var(--panel-color);
 box-shadow: var(--panel-box-shadow);
 `,[qu(),ne("time-picker-actions",`
 padding: var(--panel-action-padding);
 align-items: center;
 display: flex;
 justify-content: space-evenly;
 `),ne("time-picker-cols",`
 height: calc(var(--item-height) * 6);
 display: flex;
 position: relative;
 transition: border-color .3s var(--bezier);
 border-bottom: 1px solid var(--panel-divider-color);
 `),ne("time-picker-col",`
 flex-grow: 1;
 min-width: var(--item-width);
 height: calc(var(--item-height) * 6);
 flex-direction: column;
 transition: box-shadow .3s var(--bezier);
 `,[Pe("transition-disabled",[xe("item","transition: none;",[we("&::before","transition: none;")])]),xe("padding",{height:"calc(var(--item-height) * 5)"}),we("&:first-child","min-width: calc(var(--item-width) + 4px);",[xe("item",[we("&::before","left: 4px;")])]),xe("item",`
 cursor: pointer;
 height: var(--item-height);
 display: flex;
 align-items: center;
 justify-content: center;
 transition: 
 color .3s var(--bezier),
 background-color .3s var(--bezier),
 opacity .3s var(--bezier),
 text-decoration-color .3s var(--bezier);
 background: #0000;
 text-decoration-color: #0000;
 color: var(--item-text-color);
 z-index: 0;
 box-sizing: border-box;
 padding-top: 4px;
 position: relative;
 `,[we("&::before",`
 content: "";
 transition: background-color .3s var(--bezier);
 z-index: -1;
 position: absolute;
 left: 0;
 right: 4px;
 top: 4px;
 bottom: 0;
 border-radius: var(--item-border-radius);
 `),Cn("disabled",[we("&:hover::before",{backgroundColor:"var(--item-color-hover)"})]),Pe("active",`
 color: var(--item-text-color-active);
 `,[we("&::before",`
 background-color: var(--item-color-hover);
 `)]),Pe("disabled",`
 opacity: var(--item-opacity-disabled);
 cursor: not-allowed;
 `)]),Pe("invalid",[xe("item",[Pe("active",`
 text-decoration: line-through;
 text-decoration-color: var(--item-text-color-active);
 `)])])])])]);function NP(r,t){return r===void 0?!0:Array.isArray(r)?r.every(e=>e>=0&&e<=t):r>=0&&r<=t}const Yje=Object.assign(Object.assign({},rr.props),{to:Ua.propTo,bordered:{type:Boolean,default:void 0},actions:Array,defaultValue:{type:Number,default:null},placeholder:String,placement:{type:String,default:"bottom-start"},value:Number,format:{type:String,default:"HH:mm:ss"},isHourDisabled:Function,size:String,isMinuteDisabled:Function,isSecondDisabled:Function,inputReadonly:Boolean,clearable:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onBlur:[Function,Array],onFocus:[Function,Array],stateful:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},disabled:{type:Boolean,default:void 0},show:{type:Boolean,default:void 0},hours:{type:[Number,Array],validator:r=>NP(r,23)},minutes:{type:[Number,Array],validator:r=>NP(r,59)},seconds:{type:[Number,Array],validator:r=>NP(r,59)},use12Hours:Boolean,onChange:[Function,Array]});var BP=mt({name:"TimePicker",props:Yje,setup(r){const{mergedBorderedRef:t,mergedClsPrefixRef:e,namespaceRef:n}=pn(r),{localeRef:i,dateLocaleRef:a}=sf("TimePicker"),o=fl(r),{mergedSizeRef:s,mergedDisabledRef:l}=o,u=rr("TimePicker","TimePicker",jje,uK,r,e),c=BI(),f=ke(null),d=ke(null),h=ke(r.defaultValue),v=Ht(r,"value"),p=ri(v,h),g=Q(()=>({locale:a.value.locale})),{value:m}=p,y=ke(m===null?"":hi(m,r.format,g.value)),b=ke(!1),x=Ht(r,"show"),w=ri(x,b),S=ke(m),C=ke(!1),_=Q(()=>i.value.now),T=Q(()=>r.placeholder!==void 0?r.placeholder:i.value.placeholder),E=Q(()=>i.value.negativeText),k=Q(()=>i.value.positiveText),I=Q(()=>/H|h|K|k/.test(r.format)),P=Q(()=>r.format.includes("m")),F=Q(()=>r.format.includes("s")),$=Q(()=>{const{isHourDisabled:Se}=r;return W.value===null?!1:EC(W.value,"hours",r.hours)?Se?Se(W.value):!1:!0}),R=Q(()=>{const{value:Se}=X,{value:ye}=W;if(Se===null||ye===null)return!1;if(!EC(Se,"minutes",r.minutes))return!0;const{isMinuteDisabled:Re}=r;return Re?Re(Se,ye):!1}),L=Q(()=>{const{value:Se}=X,{value:ye}=W,{value:Re}=ie;if(Re===null||Se===null||ye===null)return!1;if(!EC(Re,"seconds",r.seconds))return!0;const{isSecondDisabled:St}=r;return St?St(Re,Se,ye):!1}),O=Q(()=>$.value||R.value||L.value),B=Q(()=>r.format.length+4),U=Q(()=>{const{value:Se}=p;return Se===null?null:pf(Se)<12?"am":"pm"}),W=Q(()=>{const{value:Se}=p;return Se===null?null:Number(hi(Se,"HH",g.value))}),X=Q(()=>{const{value:Se}=p;return Se===null?null:Number(hi(Se,"mm",g.value))}),ie=Q(()=>{const{value:Se}=p;return Se===null?null:Number(hi(Se,"ss",g.value))});function q(Se){const{onUpdateValue:ye,"onUpdate:value":Re,onChange:St}=r,{nTriggerFormChange:kt,nTriggerFormInput:Ae}=o;ye&&pt(ye,Se),Re&&pt(Re,Se),St&&pt(St,Se),h.value=Se,kt(),Ae()}function j(Se){const{onFocus:ye}=r,{nTriggerFormFocus:Re}=o;ye&&pt(ye,Se),Re()}function fe(Se){const{onBlur:ye}=r,{nTriggerFormBlur:Re}=o;ye&&pt(ye,Se),Re()}function se(Se){Se.stopPropagation(),q(null),he(null)}function ce(){ee({returnFocus:!0})}function _e(Se){var ye;switch(Se.code){case"Escape":ee({returnFocus:!0});break;case"Tab":c.shift&&Se.target===((ye=d.value)===null||ye===void 0?void 0:ye.$el)&&(Se.preventDefault(),ee({returnFocus:!0}));break}}function Me(){C.value=!0,oa(()=>{C.value=!1})}function Ye(Se){l.value||Vu(Se,"clear")||w.value||Y()}function De(Se){typeof Se!="string"&&(p.value===null?q(ur(hh(PWe(new Date),Se))):q(ur(hh(p.value,Se))))}function D(Se){typeof Se!="string"&&(p.value===null?q(ur(xP(UHe(new Date),Se))):q(ur(xP(p.value,Se))))}function z(Se){typeof Se!="string"&&(p.value===null?q(ur(wP(bP(new Date),Se))):q(ur(wP(p.value,Se))))}function V(Se){const{value:ye}=p;if(ye===null){const Re=new Date,St=pf(Re);Se==="pm"&&St<12?q(ur(hh(Re,St+12))):Se==="am"&&St>=12&&q(ur(hh(Re,St-12))),q(ur(Re))}else{const Re=pf(ye);Se==="pm"&&Re<12?q(ur(hh(ye,Re+12))):Se==="am"&&Re>=12&&q(ur(hh(ye,Re-12)))}}function he(Se){Se===void 0&&(Se=p.value),Se===null?y.value="":y.value=hi(Se,r.format,g.value)}function re(Se){H(Se)||j(Se)}function pe(Se){var ye;if(!H(Se))if(w.value){const Re=(ye=d.value)===null||ye===void 0?void 0:ye.$el;(Re==null?void 0:Re.contains(Se.relatedTarget))||(fe(Se),ee({returnFocus:!1}))}else fe(Se)}function Je(){l.value||w.value||Y()}function We(){l.value||(he(),ee({returnFocus:!1}))}function Le(){if(!d.value)return;const{hourScrollRef:Se,minuteScrollRef:ye,secondScrollRef:Re,amPmScrollRef:St}=d.value;[Se,ye,Re,St].forEach(kt=>{var Ae;if(!kt)return;const ut=(Ae=kt.contentRef)===null||Ae===void 0?void 0:Ae.querySelector("[data-active]");ut&&kt.scrollTo({top:ut.offsetTop})})}function $e(Se){b.value=Se}function H(Se){var ye,Re,St;return!!(((Re=(ye=f.value)===null||ye===void 0?void 0:ye.wrapperElRef)===null||Re===void 0?void 0:Re.contains(Se.relatedTarget))||((St=d.value)===null||St===void 0?void 0:St.$el.contains(Se.relatedTarget)))}function Y(){S.value=p.value,$e(!0),oa(Le)}function K(Se){var ye,Re;w.value&&!((Re=(ye=f.value)===null||ye===void 0?void 0:ye.wrapperElRef)===null||Re===void 0?void 0:Re.contains(Se.target))&&ee({returnFocus:!1})}function ee({returnFocus:Se}){var ye;w.value&&($e(!1),Se&&((ye=f.value)===null||ye===void 0||ye.focus()))}function J(Se){if(Se===""){q(null);return}const ye=tu(Se,r.format,new Date,g.value);if(y.value=Se,Hs(ye)){const{value:Re}=p;if(Re!==null){const St=Ws(Re,{hours:pf(ye),minutes:gC(ye),seconds:mC(ye)});q(ur(St))}else q(ur(ye))}}function ge(){q(S.value),$e(!1)}function Ve(){const Se=new Date,ye={hours:pf,minutes:gC,seconds:mC},[Re,St,kt]=["hours","minutes","seconds"].map(ut=>!r[ut]||EC(ye[ut](Se),ut,r[ut])?ye[ut](Se):Uje(ye[ut](Se),ut,r[ut])),Ae=wP(xP(hh(p.value?p.value:ur(Se),Re),St),kt);q(ur(Ae))}function Ge(){he(),ee({returnFocus:!0})}function rt(Se){H(Se)||(fe(Se),ee({returnFocus:!1}))}return nn(p,Se=>{he(Se),Me(),oa(Le)}),nn(w,()=>{O.value&&q(S.value)}),Qr(cK,{mergedThemeRef:u,mergedClsPrefixRef:e}),{mergedBordered:t,mergedClsPrefix:e,namespace:n,uncontrolledValue:h,mergedValue:p,isMounted:of(),inputInstRef:f,panelInstRef:d,adjustedTo:Ua(r),mergedShow:w,localizedNow:_,localizedPlaceholder:T,localizedNegativeText:E,localizedPositiveText:k,hourInFormat:I,minuteInFormat:P,secondInFormat:F,mergedAttrSize:B,displayTimeString:y,mergedSize:s,mergedDisabled:l,isValueInvalid:O,isHourInvalid:$,isMinuteInvalid:R,isSecondInvalid:L,transitionDisabled:C,hourValue:W,minuteValue:X,secondValue:ie,amPmValue:U,handleTimeInputFocus:re,handleTimeInputBlur:pe,handleNowClick:Ve,handleConfirmClick:Ge,handleTimeInputUpdateValue:J,handleMenuFocusOut:rt,handleCancelClick:ge,handleClickOutside:K,handleTimeInputActivate:Je,handleTimeInputDeactivate:We,handleHourClick:De,handleMinuteClick:D,handleSecondClick:z,handleAmPmClick:V,handleTimeInputClear:se,handleFocusDetectorFocus:ce,handleMenuKeyDown:_e,handleTriggerClick:Ye,mergedTheme:u,triggerCssVars:Q(()=>{const{common:{cubicBezierEaseInOut:Se},self:{iconColor:ye,iconColorDisabled:Re}}=u.value;return{"--icon-color":ye,"--icon-color-disabled":Re,"--bezier":Se}}),cssVars:Q(()=>{const{self:{panelColor:Se,itemTextColor:ye,itemTextColorActive:Re,itemColorHover:St,panelDividerColor:kt,panelBoxShadow:Ae,itemOpacityDisabled:ut,borderRadius:cr,itemFontSize:Ne,itemWidth:vt,itemHeight:Ft,panelActionPadding:vr,itemBorderRadius:zr},common:{cubicBezierEaseInOut:or}}=u.value;return{"--bezier":or,"--border-radius":cr,"--item-color-hover":St,"--item-font-size":Ne,"--item-height":Ft,"--item-opacity-disabled":ut,"--item-text-color":ye,"--item-text-color-active":Re,"--item-width":vt,"--panel-action-padding":vr,"--panel-box-shadow":Ae,"--panel-color":Se,"--panel-divider-color":kt,"--item-border-radius":zr}})}},render(){const{mergedClsPrefix:r}=this;return M("div",{class:`${r}-time-picker`,style:this.triggerCssVars},M(Lp,null,{default:()=>[M(Fp,null,{default:()=>M(ch,{ref:"inputInstRef",value:this.displayTimeString,bordered:this.mergedBordered,passivelyActivated:!0,attrSize:this.mergedAttrSize,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,stateful:this.stateful,size:this.mergedSize,placeholder:this.localizedPlaceholder,clearable:this.clearable,disabled:this.mergedDisabled,textDecoration:this.isValueInvalid?"line-through":void 0,onFocus:this.handleTimeInputFocus,onBlur:this.handleTimeInputBlur,onActivate:this.handleTimeInputActivate,onDeactivate:this.handleTimeInputDeactivate,onUpdateValue:this.handleTimeInputUpdateValue,onClear:this.handleTimeInputClear,internalDeactivateOnEnter:!0,internalForceFocus:this.mergedShow,readonly:this.inputReadonly||this.mergedDisabled,onClick:this.handleTriggerClick},this.showIcon?{[this.clearable?"clear":"suffix"]:()=>M(si,{clsPrefix:r,class:`${r}-time-picker-icon`},{default:()=>M(dUe,null)})}:null)}),M($p,{teleportDisabled:this.adjustedTo===Ua.tdkey,show:this.mergedShow,to:this.adjustedTo,containerClass:this.namespace,placement:"bottom-start"},{default:()=>M(pa,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.mergedShow?Cl(M(Wje,{ref:"panelInstRef",actions:this.actions,style:this.cssVars,seconds:this.seconds,minutes:this.minutes,hours:this.hours,transitionDisabled:this.transitionDisabled,hourValue:this.hourValue,showHour:this.hourInFormat,isHourInvalid:this.isHourInvalid,isHourDisabled:this.isHourDisabled,minuteValue:this.minuteValue,showMinute:this.minuteInFormat,isMinuteInvalid:this.isMinuteInvalid,isMinuteDisabled:this.isMinuteDisabled,secondValue:this.secondValue,amPmValue:this.amPmValue,showSecond:this.secondInFormat,isSecondInvalid:this.isSecondInvalid,isSecondDisabled:this.isSecondDisabled,isValueInvalid:this.isValueInvalid,nowText:this.localizedNow,confirmText:this.localizedPositiveText,use12Hours:this.use12Hours,onFocusout:this.handleMenuFocusOut,onKeydown:this.handleMenuKeyDown,onHourClick:this.handleHourClick,onMinuteClick:this.handleMinuteClick,onSecondClick:this.handleSecondClick,onAmPmClick:this.handleAmPmClick,onNowClick:this.handleNowClick,onConfirmClick:this.handleConfirmClick,onFocusDetectorFocus:this.handleFocusDetectorFocus}),[[cf,this.handleClickOutside]]):null})})]}))}});const Xje="yyyy-MM-dd",qje="HH:mm:ss",Kje={active:Boolean,dateFormat:{type:String,default:Xje},timeFormat:{type:String,default:qje},value:{type:[Array,Number],default:null},shortcuts:Object,onConfirm:Function,onClose:Function,onTabOut:Function,onUpdateValue:{type:Function,required:!0}};function _0(r){const{dateLocaleRef:t,timePickerSizeRef:e,localeRef:n,mergedClsPrefixRef:i,mergedThemeRef:a}=nr(CC),o=Q(()=>({locale:t.value.locale})),s=ke(null),l=BI();function u(){const{onConfirm:_}=r;_&&_()}function c(_,T){const{onUpdateValue:E}=r;E(_,T)}function f(_=!1){const{onClose:T}=r;T&&T(_)}function d(){const{onTabOut:_}=r;_&&_()}function h(){c(null,!0),f(!0)}function v(){d()}function p(){r.active&&oa(()=>{const{value:_}=s;if(!_)return;const T=_.querySelectorAll("[data-n-date]");T.forEach(E=>{E.classList.add("transition-disabled")}),_.offsetWidth,T.forEach(E=>{E.classList.remove("transition-disabled")})})}function g(_){_.code==="Tab"&&_.target===s.value&&l.shift&&(_.preventDefault(),d())}function m(_){const{value:T}=s;l.tab&&_.target===T&&(T==null?void 0:T.contains(_.relatedTarget))&&d()}let y=null,b=!1;function x(){y=r.value,b=!0}function w(){b=!1}function S(){b&&(c(y,!1),b=!1)}function C(_){return typeof _=="function"?_():_}return{mergedTheme:a,mergedClsPrefix:i,dateFnsOptions:o,timePickerSize:e,selfRef:s,locale:n,doConfirm:u,doClose:f,doUpdateValue:c,doTabOut:d,handleClearClick:h,handleFocusDetectorFocus:v,disableTransitionOneTick:p,handlePanelKeyDown:g,handlePanelFocus:m,cachePendingValue:x,clearPendingValue:w,restorePendingValue:S,getShortcutValue:C,handleShortcutMouseleave:S}}_0.props=Kje;const Zje=Object.assign(Object.assign({},_0.props),{actions:{type:Array,default:()=>["now","clear","confirm"]}});function ph(r,t){const e=_0(r),{isValueInvalidRef:n,isDateDisabledRef:i,isDateInvalidRef:a,isTimeInvalidRef:o,isDateTimeInvalidRef:s,isHourDisabledRef:l,isMinuteDisabledRef:u,isSecondDisabledRef:c,localeRef:f,firstDayOfWeekRef:d,datePickerSlots:h,scrollYearMonth:v}=nr(CC),p={isValueInvalid:n,isDateDisabled:i,isDateInvalid:a,isTimeInvalid:o,isDateTimeInvalid:s,isHourDisabled:l,isMinuteDisabled:u,isSecondDisabled:c},g=ke(r.value===null||Array.isArray(r.value)?"":hi(r.value,r.dateFormat)),m=ke(r.value===null||Array.isArray(r.value)?Date.now():r.value),y=ke(null),b=ke(null),x=ke(null),w=ke(Date.now()),S=Q(()=>{var De;return EP(m.value,r.value,w.value,(De=d.value)!==null&&De!==void 0?De:f.value.firstDayOfWeek)}),C=Q(()=>NWe(m.value,r.value,w.value)),_=Q(()=>BWe(m.value,r.value,w.value)),T=Q(()=>S.value.slice(0,7).map(De=>{const{ts:D}=De;return hi(D,f.value.dayFormat,e.dateFnsOptions.value)})),E=Q(()=>hi(m.value,f.value.monthFormat,e.dateFnsOptions.value)),k=Q(()=>hi(m.value,f.value.yearFormat,e.dateFnsOptions.value));nn(m,(De,D)=>{bC(De,D)||e.disableTransitionOneTick()}),nn(Q(()=>r.value),De=>{De!==null&&!Array.isArray(De)?(g.value=hi(De,r.dateFormat,e.dateFnsOptions.value),m.value=De):g.value=""});function I(De){return ur(t==="datetime"?bP(De):t==="month"?hf(De):t==="year"?wq(De):vC(De))}function P(De){const{isDateDisabled:{value:D}}=p;return D?D(De):!1}function F(De){const D=tu(De,r.dateFormat,new Date,e.dateFnsOptions.value);if(Hs(D)){if(r.value===null)e.doUpdateValue(ur(I(Date.now())),!1);else if(!Array.isArray(r.value)){const z=Ws(r.value,{year:Ha(D),month:Ta(D),date:dl(D)});e.doUpdateValue(ur(I(ur(z))),!1)}}else g.value=De}function $(){const De=tu(g.value,r.dateFormat,new Date,e.dateFnsOptions.value);if(Hs(De)){if(r.value===null)e.doUpdateValue(ur(I(Date.now())),!1);else if(!Array.isArray(r.value)){const D=Ws(r.value,{year:Ha(De),month:Ta(De),date:dl(De)});e.doUpdateValue(ur(I(ur(D))),!1)}}else B()}function R(){e.doUpdateValue(null,!0),g.value="",e.doClose(!0)}function L(){e.doUpdateValue(ur(I(Date.now())),!0),m.value=Date.now(),e.doClose(!0)}function O(De){if(P(De.ts))return;let D;r.value!==null&&!Array.isArray(r.value)?D=r.value:D=Date.now(),D=ur(Ws(D,De.dateObject)),e.doUpdateValue(I(D),t==="date"||t==="year"),t==="date"?e.doClose():t==="month"?(e.disableTransitionOneTick(),v(D)):t==="year"&&e.doClose()}function B(De){if(r.value===null||Array.isArray(r.value)){g.value="";return}De===void 0&&(De=r.value),g.value=hi(De,r.dateFormat,e.dateFnsOptions.value)}function U(){p.isDateInvalid.value||p.isTimeInvalid.value||(e.doConfirm(),W())}function W(){r.active&&e.doClose()}function X(){m.value=ur(pP(m.value,1))}function ie(){m.value=ur(pP(m.value,-1))}function q(){m.value=ur(mo(m.value,1))}function j(){m.value=ur(mo(m.value,-1))}function fe(){const{value:De}=y;return De==null?void 0:De.listElRef}function se(){const{value:De}=y;return De==null?void 0:De.itemsElRef}function ce(De){var D;(D=x.value)===null||D===void 0||D.sync()}function _e(De){De!==null&&e.doUpdateValue(De,!1)}function Me(De){e.cachePendingValue();const D=e.getShortcutValue(De);typeof D=="number"&&e.doUpdateValue(D,!1)}function Ye(De){const D=e.getShortcutValue(De);typeof D=="number"&&(e.doUpdateValue(D,!1),e.clearPendingValue(),U())}return Object.assign(Object.assign(Object.assign({dateArray:S,monthArray:C,yearArray:_,calendarYear:k,calendarMonth:E,weekdays:T,mergedIsDateDisabled:P,nextYear:X,prevYear:ie,nextMonth:q,prevMonth:j,handleNowClick:L,handleConfirmClick:U,handleSingleShortcutMouseenter:Me,handleSingleShortcutClick:Ye},p),e),{handleDateClick:O,handleDateInputBlur:$,handleDateInput:F,handleTimePickerChange:_e,clearSelectedDateTime:R,virtualListContainer:fe,virtualListContent:se,handleVirtualListScroll:ce,timePickerSize:e.timePickerSize,dateInputValue:g,datePickerSlots:h,monthScrollRef:b,yearScrollRef:y,scrollbarInstRef:x})}ph.props=Zje;var Qje=mt({name:"DateTimePanel",props:ph.props,setup(r){return ph(r,"datetime")},render(){var r,t,e,n;const{mergedClsPrefix:i,mergedTheme:a,shortcuts:o}=this;return M("div",{ref:"selfRef",tabindex:0,class:`${i}-date-panel ${i}-date-panel--datetime`,onKeydown:this.handlePanelKeyDown,onFocus:this.handlePanelFocus},M("div",{class:`${i}-date-panel-header`},M(ch,{value:this.dateInputValue,theme:a.peers.Input,themeOverrides:a.peerOverrides.Input,stateful:!1,size:this.timePickerSize,class:`${i}-date-panel-date-input`,textDecoration:this.isDateInvalid?"line-through":"",placeholder:this.locale.selectDate,onBlur:this.handleDateInputBlur,onUpdateValue:this.handleDateInput}),M(BP,{showIcon:!1,format:this.timeFormat,stateful:!1,theme:a.peers.TimePicker,themeOverrides:a.peerOverrides.TimePicker,to:!1,size:this.timePickerSize,value:Array.isArray(this.value)?null:this.value,placeholder:this.locale.selectTime,isHourDisabled:this.isHourDisabled,isMinuteDisabled:this.isMinuteDisabled,isSecondDisabled:this.isSecondDisabled,onUpdateValue:this.handleTimePickerChange})),M("div",{class:`${i}-date-panel-calendar`},M("div",{class:`${i}-date-panel-month`},M("div",{class:`${i}-date-panel-month__fast-prev`,onClick:this.prevYear},M(nh,null)),M("div",{class:`${i}-date-panel-month__prev`,onClick:this.prevMonth},M(rh,null)),M("div",{class:`${i}-date-panel-month__month-year`},this.locale.monthBeforeYear?`${this.calendarMonth} ${this.calendarYear}`:`${this.calendarYear} ${this.calendarMonth}`),M("div",{class:`${i}-date-panel-month__next`,onClick:this.nextMonth},M(ah,null)),M("div",{class:`${i}-date-panel-month__fast-next`,onClick:this.nextYear},M(ih,null))),M("div",{class:`${i}-date-panel-weekdays`},this.weekdays.map(s=>M("div",{key:s,class:`${i}-date-panel-weekdays__day`},s))),M("div",{class:`${i}-date-panel-dates`},this.dateArray.map((s,l)=>M("div",{"data-n-date":!0,key:l,class:[`${i}-date-panel-date`,{[`${i}-date-panel-date--current`]:s.isCurrentDate,[`${i}-date-panel-date--selected`]:s.selected,[`${i}-date-panel-date--excluded`]:!s.inCurrentMonth,[`${i}-date-panel-date--disabled`]:this.mergedIsDateDisabled(s.ts)}],onClick:()=>this.handleDateClick(s)},s.dateObject.date,s.isCurrentDate?M("div",{class:`${i}-date-panel-date__sup`}):null)))),this.datePickerSlots.footer?M("div",{class:`${i}-date-panel-footer`},Jr(this.datePickerSlots,"footer")):null,((r=this.actions)===null||r===void 0?void 0:r.length)||o?M("div",{class:`${i}-date-panel-actions`},M("div",{class:`${i}-date-panel-actions__prefix`},o&&Object.keys(o).map(s=>{const l=o[s];return Array.isArray(l)?null:M(S0,{size:"tiny",onMouseenter:()=>{this.handleSingleShortcutMouseenter(l)},onClick:()=>{this.handleSingleShortcutClick(l)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>s})})),M("div",{class:`${i}-date-panel-actions__suffix`},((t=this.actions)===null||t===void 0?void 0:t.includes("clear"))?M(Va,{theme:a.peers.Button,themeOverrides:a.peerOverrides.Button,size:"tiny",onClick:this.clearSelectedDateTime},{default:()=>this.locale.clear}):null,((e=this.actions)===null||e===void 0?void 0:e.includes("now"))?M(Va,{theme:a.peers.Button,themeOverrides:a.peerOverrides.Button,size:"tiny",onClick:this.handleNowClick},{default:()=>this.locale.now}):null,((n=this.actions)===null||n===void 0?void 0:n.includes("confirm"))?M(Va,{theme:a.peers.Button,themeOverrides:a.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isDateInvalid,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,M(lf,{onFocus:this.handleFocusDetectorFocus}))}});const Jje=Object.assign(Object.assign({},_0.props),{actions:{type:Array,default:()=>["clear","confirm"]}});function T0(r,t="datetime"){const{isDateDisabledRef:e,isStartHourDisabledRef:n,isEndHourDisabledRef:i,isStartMinuteDisabledRef:a,isEndMinuteDisabledRef:o,isStartSecondDisabledRef:s,isEndSecondDisabledRef:l,isStartDateInvalidRef:u,isEndDateInvalidRef:c,isStartTimeInvalidRef:f,isEndTimeInvalidRef:d,isStartValueInvalidRef:h,isEndValueInvalidRef:v,isRangeInvalidRef:p,localeRef:g,rangesRef:m,closeOnSelectRef:y,updateValueOnCloseRef:b,firstDayOfWeekRef:x,datePickerSlots:w}=nr(CC),S={isDateDisabled:e,isStartHourDisabled:n,isEndHourDisabled:i,isStartMinuteDisabled:a,isEndMinuteDisabled:o,isStartSecondDisabled:s,isEndSecondDisabled:l,isStartDateInvalid:u,isEndDateInvalid:c,isStartTimeInvalid:f,isEndTimeInvalid:d,isStartValueInvalid:h,isEndValueInvalid:v,isRangeInvalid:p},C=_0(r),_=ke(null),T=ke(null),E=ke(Date.now()),k=ke(ur(mo(Date.now(),1))),I=ke(Date.now()),P=ke(!1),F=ke(0),{value:$,dateFormat:R}=r,L=ke(Array.isArray($)?hi($[0],R,C.dateFnsOptions.value):""),O=ke(Array.isArray($)?hi($[1],R,C.dateFnsOptions.value):"");Array.isArray($)&&$e($);const B=Q(()=>P.value?"end":"start"),U=Q(()=>{var Ne;return EP(E.value,r.value,I.value,(Ne=x.value)!==null&&Ne!==void 0?Ne:g.value.firstDayOfWeek)}),W=Q(()=>{var Ne;return EP(k.value,r.value,I.value,(Ne=x.value)!==null&&Ne!==void 0?Ne:g.value.firstDayOfWeek)}),X=Q(()=>U.value.slice(0,7).map(Ne=>{const{ts:vt}=Ne;return hi(vt,g.value.dayFormat,C.dateFnsOptions.value)})),ie=Q(()=>hi(E.value,g.value.monthFormat,C.dateFnsOptions.value)),q=Q(()=>hi(k.value,g.value.monthFormat,C.dateFnsOptions.value)),j=Q(()=>hi(E.value,g.value.yearFormat,C.dateFnsOptions.value)),fe=Q(()=>hi(k.value,g.value.yearFormat,C.dateFnsOptions.value)),se=Q(()=>{const{value:Ne}=r;return Array.isArray(Ne)?Ne[0]:null}),ce=Q(()=>{const{value:Ne}=r;return Array.isArray(Ne)?Ne[1]:null}),_e=Q(()=>{const{shortcuts:Ne}=r;return Ne||m.value});nn(Q(()=>r.value),Ne=>{if(Ne!==null&&Array.isArray(Ne)){const[vt,Ft]=Ne,{dateFormat:vr}=r;L.value=hi(vt,vr,C.dateFnsOptions.value),O.value=hi(Ft,vr,C.dateFnsOptions.value),P.value||$e(Ne)}else L.value="",O.value=""});function Me(Ne,vt){(Ha(Ne)!==Ha(vt)||Ta(Ne)!==Ta(vt))&&C.disableTransitionOneTick()}nn(E,Me),nn(k,Me);function Ye(Ne){const vt=hf(E.value),Ft=hf(k.value);vt>=Ft&&(Ne?k.value=ur(mo(vt,1)):E.value=ur(mo(Ft,-1)))}function De(){E.value=ur(mo(E.value,12)),Ye(!0)}function D(){E.value=ur(mo(E.value,-12)),Ye(!0)}function z(){E.value=ur(mo(E.value,1)),Ye(!0)}function V(){E.value=ur(mo(E.value,-1)),Ye(!0)}function he(){k.value=ur(mo(k.value,12)),Ye(!1)}function re(){k.value=ur(mo(k.value,-12)),Ye(!1)}function pe(){k.value=ur(mo(k.value,1)),Ye(!1)}function Je(){k.value=ur(mo(k.value,-1)),Ye(!1)}function We(Ne){const vt=e.value;if(!vt)return!1;if(!Array.isArray(r.value)||B.value==="start")return vt(Ne,"start",null);{const{value:Ft}=F;return Ne<F.value?vt(Ne,"start",[Ft,Ft]):vt(Ne,"end",[Ft,Ft])}}function Le(Ne){var vt,Ft;((vt=_.value)===null||vt===void 0?void 0:vt.contains(Ne.target))||((Ft=T.value)===null||Ft===void 0?void 0:Ft.contains(Ne.target))||(P.value=!1)}function $e(Ne){if(Ne===null)return;const[vt,Ft]=Ne;E.value=vt,hf(Ft)<=hf(vt)?k.value=ur(hf(mo(vt,1))):k.value=ur(hf(Ft))}function H(Ne){We(Ne.ts)||(P.value?(P.value=!1,y.value&&t==="daterange"&&(b.value?ee():K())):(P.value=!0,F.value=Ne.ts,Ve(Ne.ts)))}function Y(Ne){if(P.value){if(We(Ne.ts))return;Ne.ts>=F.value?Ve(F.value,Ne.ts):Ve(Ne.ts,F.value)}}function K(){p.value||(C.doConfirm(),ee())}function ee(){P.value=!1,r.active&&C.doClose()}function J(Ne){typeof Ne!="number"&&(Ne=ur(Ne)),r.value===null?C.doUpdateValue([Ne,Ne],!1):Array.isArray(r.value)&&C.doUpdateValue([Ne,Math.max(r.value[1],Ne)],!1)}function ge(Ne){typeof Ne!="number"&&(Ne=ur(Ne)),r.value===null?C.doUpdateValue([Ne,Ne],!1):Array.isArray(r.value)&&C.doUpdateValue([Math.min(r.value[0],Ne),Ne],!1)}function Ve(Ne,vt){vt===void 0&&(vt=Ne),typeof Ne!="number"&&(Ne=ur(Ne)),typeof vt!="number"&&(vt=ur(vt)),C.doUpdateValue([Ne,vt],!1)}function Ge(Ne){return ur(t==="datetimerange"?bP(Ne):vC(Ne))}function rt(Ne){const vt=tu(Ne,r.dateFormat,new Date,C.dateFnsOptions.value);if(Hs(vt))if(r.value){if(Array.isArray(r.value)){const Ft=Ws(r.value[0],{year:Ha(vt),month:Ta(vt),date:dl(vt)});J(Ge(ur(Ft)))}}else{const Ft=Ws(new Date,{year:Ha(vt),month:Ta(vt),date:dl(vt)});J(Ge(ur(Ft)))}else L.value=Ne}function Se(Ne){const vt=tu(Ne,r.dateFormat,new Date,C.dateFnsOptions.value);if(Hs(vt)){if(r.value===null){const Ft=Ws(new Date,{year:Ha(vt),month:Ta(vt),date:dl(vt)});ge(Ge(ur(Ft)))}else if(Array.isArray(r.value)){const Ft=Ws(r.value[1],{year:Ha(vt),month:Ta(vt),date:dl(vt)});ge(Ge(ur(Ft)))}}else O.value=Ne}function ye(){const Ne=tu(L.value,r.dateFormat,new Date,C.dateFnsOptions.value),{value:vt}=r;if(Hs(Ne)){if(vt===null){const Ft=Ws(new Date,{year:Ha(Ne),month:Ta(Ne),date:dl(Ne)});J(Ge(ur(Ft)))}else if(Array.isArray(vt)){const Ft=Ws(vt[0],{year:Ha(Ne),month:Ta(Ne),date:dl(Ne)});J(Ge(ur(Ft)))}}else St()}function Re(){const Ne=tu(O.value,r.dateFormat,new Date,C.dateFnsOptions.value),{value:vt}=r;if(Hs(Ne)){if(vt===null){const Ft=Ws(new Date,{year:Ha(Ne),month:Ta(Ne),date:dl(Ne)});ge(Ge(ur(Ft)))}else if(Array.isArray(vt)){const Ft=Ws(vt[1],{year:Ha(Ne),month:Ta(Ne),date:dl(Ne)});ge(Ge(ur(Ft)))}}else St()}function St(Ne){const{value:vt}=r;if(vt===null||!Array.isArray(vt)){L.value="",O.value="";return}const{dateFormat:Ft}=r;Ne===void 0&&(Ne=vt),L.value=hi(Ne[0],Ft,C.dateFnsOptions.value),O.value=hi(Ne[1],Ft,C.dateFnsOptions.value)}function kt(Ne){Ne!==null&&J(Ne)}function Ae(Ne){Ne!==null&&ge(Ne)}function ut(Ne){C.cachePendingValue();const vt=C.getShortcutValue(Ne);!Array.isArray(vt)||Ve(...vt)}function cr(Ne){const vt=C.getShortcutValue(Ne);!Array.isArray(vt)||(Ve(...vt),C.clearPendingValue(),K())}return Object.assign(Object.assign(Object.assign({startDatesElRef:_,endDatesElRef:T,resetSelectingStatus:Le,handleDateClick:H,handleDateMouseEnter:Y,handleConfirmClick:K,startCalendarPrevYear:D,startCalendarPrevMonth:V,startCalendarNextYear:De,startCalendarNextMonth:z,endCalendarPrevYear:re,endCalendarPrevMonth:Je,endCalendarNextMonth:pe,endCalendarNextYear:he,mergedIsDateDisabled:We,changeStartEndTime:Ve,ranges:m,startCalendarMonth:ie,startCalendarYear:j,endCalendarMonth:q,endCalendarYear:fe,weekdays:X,startDateArray:U,endDateArray:W,handleRangeShortcutMouseenter:ut,handleRangeShortcutClick:cr},C),S),{startDateDisplayString:L,endDateInput:O,timePickerSize:C.timePickerSize,startTimeValue:se,endTimeValue:ce,handleFocusDetectorFocus:C.handleFocusDetectorFocus,handleStartTimePickerChange:kt,handleEndTimePickerChange:Ae,handleStartDateInput:rt,handleStartDateInputBlur:ye,handleEndDateInput:Se,handleEndDateInputBlur:Re,datePickerSlots:w,shortcuts:_e})}T0.props=Jje;var e7e=mt({name:"DateTimeRangePanel",props:T0.props,setup(r){return T0(r,"datetimerange")},render(){var r,t,e;const{mergedClsPrefix:n,mergedTheme:i,shortcuts:a}=this;return M("div",{ref:"selfRef",tabindex:0,class:`${n}-date-panel ${n}-date-panel--datetimerange`,onClick:this.resetSelectingStatus,onKeydown:this.handlePanelKeyDown,onFocus:this.handlePanelFocus},M("div",{class:`${n}-date-panel-header`},M(ch,{value:this.startDateDisplayString,theme:i.peers.Input,themeOverrides:i.peerOverrides.Input,size:this.timePickerSize,stateful:!1,class:`${n}-date-panel-date-input`,textDecoration:this.isStartValueInvalid?"line-through":"",placeholder:this.locale.selectDate,onBlur:this.handleStartDateInputBlur,onUpdateValue:this.handleStartDateInput}),M(BP,{size:this.timePickerSize,to:!1,showIcon:!1,theme:i.peers.TimePicker,themeOverrides:i.peerOverrides.TimePicker,stateful:!1,placeholder:this.locale.selectTime,format:this.timeFormat,value:this.startTimeValue,isHourDisabled:this.isStartHourDisabled,isMinuteDisabled:this.isStartMinuteDisabled,isSecondDisabled:this.isStartSecondDisabled,onUpdateValue:this.handleStartTimePickerChange}),M(ch,{value:this.endDateInput,theme:i.peers.Input,themeOverrides:i.peerOverrides.Input,stateful:!1,size:this.timePickerSize,class:`${n}-date-panel-date-input`,textDecoration:this.isEndValueInvalid?"line-through":"",placeholder:this.locale.selectDate,onBlur:this.handleEndDateInputBlur,onUpdateValue:this.handleEndDateInput}),M(BP,{showIcon:!1,theme:i.peers.TimePicker,themeOverrides:i.peerOverrides.TimePicker,to:!1,size:this.timePickerSize,stateful:!1,format:this.timeFormat,placeholder:this.locale.selectTime,value:this.endTimeValue,isHourDisabled:this.isEndHourDisabled,isMinuteDisabled:this.isEndMinuteDisabled,isSecondDisabled:this.isEndSecondDisabled,onUpdateValue:this.handleEndTimePickerChange})),M("div",{ref:"startDatesElRef",class:`${n}-date-panel-calendar ${n}-date-panel-calendar--start`},M("div",{class:`${n}-date-panel-month`},M("div",{class:`${n}-date-panel-month__fast-prev`,onClick:this.startCalendarPrevYear},M(nh,null)),M("div",{class:`${n}-date-panel-month__prev`,onClick:this.startCalendarPrevMonth},M(rh,null)),M("div",{class:`${n}-date-panel-month__month-year`},this.locale.monthBeforeYear?`${this.startCalendarMonth} ${this.startCalendarYear}`:`${this.startCalendarYear} ${this.startCalendarMonth}`),M("div",{class:`${n}-date-panel-month__next`,onClick:this.startCalendarNextMonth},M(ah,null)),M("div",{class:`${n}-date-panel-month__fast-next`,onClick:this.startCalendarNextYear},M(ih,null))),M("div",{class:`${n}-date-panel-weekdays`},this.weekdays.map(o=>M("div",{key:o,class:`${n}-date-panel-weekdays__day`},o))),M("div",{class:`${n}-date-panel__divider`}),M("div",{class:`${n}-date-panel-dates`},this.startDateArray.map((o,s)=>M("div",{"data-n-date":!0,key:s,class:[`${n}-date-panel-date`,{[`${n}-date-panel-date--excluded`]:!o.inCurrentMonth,[`${n}-date-panel-date--current`]:o.isCurrentDate,[`${n}-date-panel-date--selected`]:o.selected,[`${n}-date-panel-date--covered`]:o.inSpan,[`${n}-date-panel-date--start`]:o.startOfSpan,[`${n}-date-panel-date--end`]:o.endOfSpan,[`${n}-date-panel-date--disabled`]:this.mergedIsDateDisabled(o.ts)}],onClick:()=>this.handleDateClick(o),onMouseenter:()=>this.handleDateMouseEnter(o)},o.dateObject.date,o.isCurrentDate?M("div",{class:`${n}-date-panel-date__sup`}):null)))),M("div",{class:`${n}-date-panel__vertical-divider`}),M("div",{ref:"endDatesElRef",class:`${n}-date-panel-calendar ${n}-date-panel-calendar--end`},M("div",{class:`${n}-date-panel-month`},M("div",{class:`${n}-date-panel-month__fast-prev`,onClick:this.endCalendarPrevYear},M(nh,null)),M("div",{class:`${n}-date-panel-month__prev`,onClick:this.endCalendarPrevMonth},M(rh,null)),M("div",{class:`${n}-date-panel-month__month-year`},this.locale.monthBeforeYear?`${this.endCalendarMonth} ${this.endCalendarYear}`:`${this.endCalendarYear} ${this.endCalendarMonth}`),M("div",{class:`${n}-date-panel-month__next`,onClick:this.endCalendarNextMonth},M(ah,null)),M("div",{class:`${n}-date-panel-month__fast-next`,onClick:this.endCalendarNextYear},M(ih,null))),M("div",{class:`${n}-date-panel-weekdays`},this.weekdays.map(o=>M("div",{key:o,class:`${n}-date-panel-weekdays__day`},o))),M("div",{class:`${n}-date-panel__divider`}),M("div",{class:`${n}-date-panel-dates`},this.endDateArray.map((o,s)=>M("div",{"data-n-date":!0,key:s,class:[`${n}-date-panel-date`,{[`${n}-date-panel-date--excluded`]:!o.inCurrentMonth,[`${n}-date-panel-date--current`]:o.isCurrentDate,[`${n}-date-panel-date--selected`]:o.selected,[`${n}-date-panel-date--covered`]:o.inSpan,[`${n}-date-panel-date--start`]:o.startOfSpan,[`${n}-date-panel-date--end`]:o.endOfSpan,[`${n}-date-panel-date--disabled`]:this.mergedIsDateDisabled(o.ts)}],onClick:()=>this.handleDateClick(o),onMouseenter:()=>this.handleDateMouseEnter(o)},o.dateObject.date,o.isCurrentDate?M("div",{class:`${n}-date-panel-date__sup`}):null)))),this.datePickerSlots.footer?M("div",{class:`${n}-date-panel-footer`},Jr(this.datePickerSlots,"footer")):null,((r=this.actions)===null||r===void 0?void 0:r.length)||a?M("div",{class:`${n}-date-panel-actions`},M("div",{class:`${n}-date-panel-actions__prefix`},a&&Object.keys(a).map(o=>{const s=a[o];return Array.isArray(s)||typeof s=="function"?M(S0,{size:"tiny",onMouseenter:()=>{this.handleRangeShortcutMouseenter(s)},onClick:()=>{this.handleRangeShortcutClick(s)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>o}):null})),M("div",{class:`${n}-date-panel-actions__suffix`},((t=this.actions)===null||t===void 0?void 0:t.includes("clear"))?M(Va,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,((e=this.actions)===null||e===void 0?void 0:e.includes("confirm"))?M(Va,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isRangeInvalid,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,M(lf,{onFocus:this.handleFocusDetectorFocus}))}}),t7e=mt({name:"DatePanel",props:ph.props,setup(r){return ph(r,"date")},render(){var r,t,e;const{mergedClsPrefix:n,mergedTheme:i,shortcuts:a}=this;return M("div",{ref:"selfRef",tabindex:0,class:`${n}-date-panel ${n}-date-panel--date`,onFocus:this.handlePanelFocus,onKeydown:this.handlePanelKeyDown},M("div",{class:`${n}-date-panel-calendar`},M("div",{class:`${n}-date-panel-month`},M("div",{class:`${n}-date-panel-month__fast-prev`,onClick:this.prevYear},M(nh,null)),M("div",{class:`${n}-date-panel-month__prev`,onClick:this.prevMonth},M(rh,null)),M("div",{class:`${n}-date-panel-month__month-year`},this.locale.monthBeforeYear?`${this.calendarMonth} ${this.calendarYear}`:`${this.calendarYear} ${this.calendarMonth}`),M("div",{class:`${n}-date-panel-month__next`,onClick:this.nextMonth},M(ah,null)),M("div",{class:`${n}-date-panel-month__fast-next`,onClick:this.nextYear},M(ih,null))),M("div",{class:`${n}-date-panel-weekdays`},this.weekdays.map(o=>M("div",{key:o,class:`${n}-date-panel-weekdays__day`},o))),M("div",{class:`${n}-date-panel-dates`},this.dateArray.map((o,s)=>M("div",{"data-n-date":!0,key:s,class:[`${n}-date-panel-date`,{[`${n}-date-panel-date--current`]:o.isCurrentDate,[`${n}-date-panel-date--selected`]:o.selected,[`${n}-date-panel-date--excluded`]:!o.inCurrentMonth,[`${n}-date-panel-date--disabled`]:this.mergedIsDateDisabled(o.ts)}],onClick:()=>this.handleDateClick(o)},o.dateObject.date,o.isCurrentDate?M("div",{class:`${n}-date-panel-date__sup`}):null)))),this.datePickerSlots.footer?M("div",{class:`${n}-date-panel-footer`},Jr(this.datePickerSlots,"footer")):null,((r=this.actions)===null||r===void 0?void 0:r.length)||a?M("div",{class:`${n}-date-panel-actions`},M("div",{class:`${n}-date-panel-actions__prefix`},a&&Object.keys(a).map(o=>{const s=a[o];return Array.isArray(s)?null:M(S0,{size:"tiny",onMouseenter:()=>{this.handleSingleShortcutMouseenter(s)},onClick:()=>{this.handleSingleShortcutClick(s)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>o})})),M("div",{class:`${n}-date-panel-actions__suffix`},((t=this.actions)===null||t===void 0?void 0:t.includes("clear"))?M(Va,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,((e=this.actions)===null||e===void 0?void 0:e.includes("now"))?M(Va,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",onClick:this.handleNowClick},{default:()=>this.locale.now}):null)):null,M(lf,{onFocus:this.handleFocusDetectorFocus}))}}),r7e=mt({name:"DateRangePanel",props:T0.props,setup(r){return T0(r,"daterange")},render(){var r,t,e;const{mergedClsPrefix:n,mergedTheme:i,shortcuts:a}=this;return M("div",{ref:"selfRef",tabindex:0,class:`${n}-date-panel ${n}-date-panel--daterange`,onClick:this.resetSelectingStatus,onKeydown:this.handlePanelKeyDown,onFocus:this.handlePanelFocus},M("div",{ref:"startDatesElRef",class:`${n}-date-panel-calendar ${n}-date-panel-calendar--start`},M("div",{class:`${n}-date-panel-month`},M("div",{class:`${n}-date-panel-month__fast-prev`,onClick:this.startCalendarPrevYear},M(nh,null)),M("div",{class:`${n}-date-panel-month__prev`,onClick:this.startCalendarPrevMonth},M(rh,null)),M("div",{class:`${n}-date-panel-month__month-year`},this.locale.monthBeforeYear?`${this.startCalendarMonth} ${this.startCalendarYear}`:`${this.startCalendarYear} ${this.startCalendarMonth}`),M("div",{class:`${n}-date-panel-month__next`,onClick:this.startCalendarNextMonth},M(ah,null)),M("div",{class:`${n}-date-panel-month__fast-next`,onClick:this.startCalendarNextYear},M(ih,null))),M("div",{class:`${n}-date-panel-weekdays`},this.weekdays.map(o=>M("div",{key:o,class:`${n}-date-panel-weekdays__day`},o))),M("div",{class:`${n}-date-panel__divider`}),M("div",{class:`${n}-date-panel-dates`},this.startDateArray.map((o,s)=>M("div",{"data-n-date":!0,key:s,class:[`${n}-date-panel-date`,{[`${n}-date-panel-date--excluded`]:!o.inCurrentMonth,[`${n}-date-panel-date--current`]:o.isCurrentDate,[`${n}-date-panel-date--selected`]:o.selected,[`${n}-date-panel-date--covered`]:o.inSpan,[`${n}-date-panel-date--start`]:o.startOfSpan,[`${n}-date-panel-date--end`]:o.endOfSpan,[`${n}-date-panel-date--disabled`]:this.mergedIsDateDisabled(o.ts)}],onClick:()=>this.handleDateClick(o),onMouseenter:()=>this.handleDateMouseEnter(o)},o.dateObject.date,o.isCurrentDate?M("div",{class:`${n}-date-panel-date__sup`}):null)))),M("div",{class:`${n}-date-panel__vertical-divider`}),M("div",{ref:"endDatesElRef",class:`${n}-date-panel-calendar ${n}-date-panel-calendar--end`},M("div",{class:`${n}-date-panel-month`},M("div",{class:`${n}-date-panel-month__fast-prev`,onClick:this.endCalendarPrevYear},M(nh,null)),M("div",{class:`${n}-date-panel-month__prev`,onClick:this.endCalendarPrevMonth},M(rh,null)),M("div",{class:`${n}-date-panel-month__month-year`},this.locale.monthBeforeYear?`${this.endCalendarMonth} ${this.endCalendarYear}`:`${this.endCalendarYear} ${this.endCalendarMonth}`),M("div",{class:`${n}-date-panel-month__next`,onClick:this.endCalendarNextMonth},M(ah,null)),M("div",{class:`${n}-date-panel-month__fast-next`,onClick:this.endCalendarNextYear},M(ih,null))),M("div",{class:`${n}-date-panel-weekdays`},this.weekdays.map(o=>M("div",{key:o,class:`${n}-date-panel-weekdays__day`},o))),M("div",{class:`${n}-date-panel__divider`}),M("div",{class:`${n}-date-panel-dates`},this.endDateArray.map((o,s)=>M("div",{"data-n-date":!0,key:s,class:[`${n}-date-panel-date`,{[`${n}-date-panel-date--excluded`]:!o.inCurrentMonth,[`${n}-date-panel-date--current`]:o.isCurrentDate,[`${n}-date-panel-date--selected`]:o.selected,[`${n}-date-panel-date--covered`]:o.inSpan,[`${n}-date-panel-date--start`]:o.startOfSpan,[`${n}-date-panel-date--end`]:o.endOfSpan,[`${n}-date-panel-date--disabled`]:this.mergedIsDateDisabled(o.ts)}],onClick:()=>this.handleDateClick(o),onMouseenter:()=>this.handleDateMouseEnter(o)},o.dateObject.date,o.isCurrentDate?M("div",{class:`${n}-date-panel-date__sup`}):null)))),this.datePickerSlots.footer?M("div",{class:`${n}-date-panel-footer`},Jr(this.datePickerSlots,"footer")):null,((r=this.actions)===null||r===void 0?void 0:r.length)||a?M("div",{class:`${n}-date-panel-actions`},M("div",{class:`${n}-date-panel-actions__prefix`},a&&Object.keys(a).map(o=>{const s=a[o];return Array.isArray(s)||typeof s=="function"?M(S0,{size:"tiny",onMouseenter:()=>{this.handleRangeShortcutMouseenter(s)},onClick:()=>{this.handleRangeShortcutClick(s)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>o}):null})),M("div",{class:`${n}-date-panel-actions__suffix`},((t=this.actions)===null||t===void 0?void 0:t.includes("clear"))?M(Va,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,((e=this.actions)===null||e===void 0?void 0:e.includes("confirm"))?M(Va,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isRangeInvalid,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,M(lf,{onFocus:this.handleFocusDetectorFocus}))}}),fK=mt({name:"MonthPanel",props:Object.assign(Object.assign({},ph.props),{type:{type:String,required:!0}}),setup(r){const t=ph(r,r.type),e=(n,i,a)=>{const{mergedIsDateDisabled:o,handleDateClick:s}=t;return M("div",{"data-n-date":!0,key:i,class:[`${a}-date-panel-month-calendar__picker-col-item`,{[`${a}-date-panel-month-calendar__picker-col-item--current`]:n.type==="month"?n.isCurrentMonth:n.isCurrentYear,[`${a}-date-panel-month-calendar__picker-col-item--selected`]:n.selected,[`${a}-date-panel-month-calendar__picker-col-item--disabled`]:o(n.ts)}],onClick:()=>s(n)},n.type==="month"?n.dateObject.month+1:n.dateObject.year)};return Object.assign(Object.assign({},t),{renderItem:e})},render(){const{mergedClsPrefix:r,mergedTheme:t,shortcuts:e,actions:n,renderItem:i,type:a}=this;return M("div",{ref:"selfRef",tabindex:0,class:`${r}-date-panel ${r}-date-panel--month`,onFocus:this.handlePanelFocus,onKeydown:this.handlePanelKeyDown},M("div",{class:`${r}-date-panel-month-calendar`},M(ms,{ref:"scrollbarInstRef",class:`${r}-date-panel-month-calendar__picker-col`,theme:t.peers.Scrollbar,themeOverrides:t.peerOverrides.Scrollbar,container:this.virtualListContainer,content:this.virtualListContent,horizontalRailStyle:{zIndex:1},verticalRailStyle:{zIndex:1}},{default:()=>M(oC,{ref:"yearScrollRef",items:this.yearArray,itemSize:SP,showScrollbar:!1,keyField:"ts",onScroll:this.handleVirtualListScroll,paddingBottom:4},{default:({item:o,index:s})=>i(o,s,r)})}),a==="month"?M("div",{class:`${r}-date-panel-month-calendar__picker-col`},M(ms,{ref:"monthScrollRef",theme:t.peers.Scrollbar,themeOverrides:t.peerOverrides.Scrollbar},{default:()=>[this.monthArray.map((o,s)=>i(o,s,r)),M("div",{class:`${r}-date-panel-month-calendar__padding`})]})):null),this.datePickerSlots.footer?M("div",{class:`${r}-date-panel-footer`},{default:this.datePickerSlots.footer}):null,(n==null?void 0:n.length)||e?M("div",{class:`${r}-date-panel-actions`},M("div",{class:`${r}-date-panel-actions__prefix`},e&&Object.keys(e).map(o=>{const s=e[o];return Array.isArray(s)?null:M(S0,{size:"tiny",onMouseenter:()=>{this.handleSingleShortcutMouseenter(s)},onClick:()=>{this.handleSingleShortcutClick(s)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>o})})),M("div",{class:`${r}-date-panel-actions__suffix`},(n==null?void 0:n.includes("clear"))?M(Va,{theme:t.peers.Button,themeOverrides:t.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,(n==null?void 0:n.includes("now"))?M(Va,{theme:t.peers.Button,themeOverrides:t.peerOverrides.Button,size:"tiny",onClick:this.handleNowClick},{default:()=>this.locale.now}):null,(n==null?void 0:n.includes("confirm"))?M(Va,{theme:t.peers.Button,themeOverrides:t.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isDateInvalid,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,M(lf,{onFocus:this.handleFocusDetectorFocus}))}}),n7e=we([ne("date-picker",`
 position: relative;
 z-index: auto;
 `,[ne("date-picker-icon",`
 color: var(--icon-color);
 transition: color .3s var(--bezier);
 `),Pe("disabled",[ne("date-picker-icon",`
 color: var(--icon-color-disabled);
 `)])]),ne("date-panel",`
 outline: none;
 margin: 4px 0;
 display: grid;
 grid-template-columns: 0fr;
 border-radius: var(--panel-border-radius);
 background-color: var(--panel-color);
 box-shadow: var(--panel-box-shadow);
 color: var(--panel-text-color);
 `,[qu(),ne("date-panel-calendar",{padding:"var(--calendar-left-padding)",display:"grid",gridTemplateColumns:"1fr",gridArea:"left-calendar"},[Pe("end",{padding:"var(--calendar-right-padding)",gridArea:"right-calendar"})]),ne("date-panel-month-calendar",{display:"flex",gridArea:"left-calendar"},[xe("picker-col",`
 min-width: var(--scroll-item-width);
 height: calc(var(--scroll-item-height) * 6);
 user-select: none;
 `,[we("&:first-child",`
 min-width: calc(var(--scroll-item-width) + 4px);
 `,[xe("picker-col-item",[we("&::before","left: 4px;")])]),xe("padding",`
 height: calc(var(--scroll-item-height) * 5)
 `)]),xe("picker-col-item",`
 z-index: 0;
 cursor: pointer;
 height: var(--scroll-item-height);
 box-sizing: border-box;
 padding-top: 4px;
 display: flex;
 align-items: center;
 justify-content: center;
 position: relative;
 transition: 
 color .3s var(--bezier),
 background-color .3s var(--bezier);
 background: #0000;
 color: var(--item-text-color);
 `,[we("&::before",`
 z-index: -1;
 content: "";
 position: absolute;
 left: 0;
 right: 4px;
 top: 4px;
 bottom: 0;
 border-radius: var(--scroll-item-border-radius);
 transition: 
 background-color .3s var(--bezier);
 `),Cn("disabled",[we("&:hover::before",`
 background-color: var(--item-color-hover);
 `),Pe("selected",`
 color: var(--item-color-active);
 `,[we("&::before","background-color: var(--item-color-hover);")])]),Pe("disabled",`
 background-color: var(--item-color-disabled);
 cursor: not-allowed;
 `)])]),Pe("date",{gridTemplateAreas:`
 "left-calendar"
 "footer"
 "action"
 `}),Pe("daterange",{gridTemplateAreas:`
 "left-calendar divider right-calendar"
 "footer footer footer"
 "action action action"
 `}),Pe("datetime",{gridTemplateAreas:`
 "header"
 "left-calendar"
 "footer"
 "action"
 `}),Pe("datetimerange",{gridTemplateAreas:`
 "header header header"
 "left-calendar divider right-calendar"
 "footer footer footer"
 "action action action"
 `}),Pe("month",{gridTemplateAreas:`
 "left-calendar"
 "footer"
 "action"
 `}),ne("date-panel-footer",{gridArea:"footer"}),ne("date-panel-actions",{gridArea:"action"}),ne("date-panel-header",{gridArea:"header"}),ne("date-panel-header",`
 box-sizing: border-box;
 width: 100%;
 align-items: center;
 padding: var(--panel-header-padding);
 display: flex;
 justify-content: space-between;
 border-bottom: 1px solid var(--panel-header-divider-color);
 `,[we(">",[we("*:not(:last-child)",{marginRight:"10px"}),we("*",{flex:1,width:0}),ne("time-picker",{zIndex:1})])]),ne("date-panel-month",`
 box-sizing: border-box;
 display: grid;
 grid-template-columns: var(--calendar-title-grid-template-columns);
 align-items: center;
 justify-items: center;
 padding: var(--calendar-title-padding);
 height: var(--calendar-title-height);
 `,[xe("prev, next, fast-prev, fast-next",`
 line-height: 0;
 cursor: pointer;
 width: var(--arrow-size);
 height: var(--arrow-size);
 color: var(--arrow-color);
 `),xe("month-year",`
 font-size: var(--calendar-title-font-size);
 font-weight: var(--calendar-title-font-weight);
 line-height: 17px;
 flex-grow: 1;
 text-align: center;
 color: var(--calendar-title-text-color);
 `)]),ne("date-panel-weekdays",`
 display: grid;
 margin: auto;
 grid-template-columns: repeat(7, var(--item-cell-width));
 grid-template-rows: repeat(1, var(--item-cell-height));
 align-items: center;
 justify-items: center;
 margin-bottom: 4px;
 border-bottom: 1px solid var(--calendar-days-divider-color);
 `,[xe("day",`
 line-height: 15px;
 width: var(--item-size);
 text-align: center;
 font-size: var(--calendar-days-font-size);
 color: var(--item-text-color);
 `)]),ne("date-panel-dates",`
 margin: auto;
 display: grid;
 grid-template-columns: repeat(7, var(--item-cell-width));
 grid-template-rows: repeat(6, var(--item-cell-height));
 align-items: center;
 justify-items: center;
 flex-wrap: wrap;
 `,[ne("date-panel-date",`
 position: relative;
 width: var(--item-size);
 height: var(--item-size);
 line-height: var(--item-size);
 text-align: center;
 font-size: var(--item-font-size);
 border-radius: var(--item-border-radius);
 z-index: 0;
 cursor: pointer;
 transition:
 background-color .2s var(--bezier),
 color .2s var(--bezier);
 `,[Cn("disabled",[Cn("selected",[we("&:hover",{backgroundColor:"var(--item-color-hover)"})])]),Pe("current",[xe("sup",`
 position: absolute;
 top: 2px;
 right: 2px;
 content: "";
 height: 4px;
 width: 4px;
 border-radius: 2px;
 background-color: var(--item-color-active);
 transition:
 background-color .2s var(--bezier);
 `)]),we("&::after",`
 content: "";
 z-index: -1;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 transition: background-color .3s var(--bezier);
 `),Pe("covered, start, end",[Cn("excluded",[we("&::before",`
 content: "";
 z-index: -2;
 position: absolute;
 left: calc((var(--item-size) - var(--item-cell-width)) / 2);
 right: calc((var(--item-size) - var(--item-cell-width)) / 2);
 top: 0;
 bottom: 0;
 background-color: var(--item-color-included);
 `),we("&:nth-child(7n + 1)::before",{borderTopLeftRadius:"var(--item-border-radius)",borderBottomLeftRadius:"var(--item-border-radius)"}),we("&:nth-child(7n + 7)::before",{borderTopRightRadius:"var(--item-border-radius)",borderBottomRightRadius:"var(--item-border-radius)"})])]),Pe("selected",{color:"var(--item-text-color-active)"},[we("&::after",{backgroundColor:"var(--item-color-active)"}),Pe("start",[we("&::before",{left:"50%"})]),Pe("end",[we("&::before",{right:"50%"})]),xe("sup",{backgroundColor:"var(--panel-color)"})]),Pe("excluded",{color:"var(--item-text-color-disabled)"},[Pe("selected",[we("&::after",{backgroundColor:"var(--item-color-disabled)"})])]),Pe("disabled",{cursor:"not-allowed",color:"var(--item-text-color-disabled)"},[Pe("covered",[we("&::before",{backgroundColor:"var(--item-color-disabled)"})]),Pe("selected",[we("&::before",{backgroundColor:"var(--item-color-disabled)"}),we("&::after",{backgroundColor:"var(--item-color-disabled)"})])])])]),xe("vertical-divider",`
 grid-area: divider;
 height: 100%;
 width: 1px;
 background-color: var(--calendar-divider-color);
 `),ne("date-panel-footer",{borderTop:"1px solid var(--panel-action-divider-color)",padding:"var(--panel-extra-footer-padding)"}),ne("date-panel-actions",`
 flex: 1;
 padding: var(--panel-action-padding);
 display: flex;
 align-items: center;
 justify-content: space-between;
 border-top: 1px solid var(--panel-action-divider-color);
 `,[xe("prefix, suffix",`
 display: flex;
 margin-bottom: -8px;
 `),xe("suffix",`
 align-self: flex-end;
 `),xe("prefix",`
 flex-wrap: wrap;
 `),ne("button",`
 margin-bottom: 8px;
 `,[we("&:not(:last-child)",`
 margin-right: 8px;
 `)])])]),we("[data-n-date].transition-disabled",{transition:"none !important"},[we("&::before, &::after",{transition:"none !important"})])]);const i7e=Object.assign(Object.assign({},rr.props),{to:Ua.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,updateValueOnClose:Boolean,defaultValue:{type:[Number,Array],default:null},disabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom-start"},value:[Number,Array],size:String,type:{type:String,default:"date"},separator:String,placeholder:String,startPlaceholder:String,endPlaceholder:String,format:String,dateFormat:String,timeFormat:String,actions:Array,shortcuts:Object,isDateDisabled:Function,isTimeDisabled:Function,show:{type:Boolean,default:void 0},ranges:Object,firstDayOfWeek:Number,inputReadonly:Boolean,closeOnSelect:Boolean,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onChange:{type:[Function,Array],validator:()=>!0,default:void 0}});var Tdt=mt({name:"DatePicker",props:i7e,setup(r,{slots:t}){const{localeRef:e,dateLocaleRef:n}=sf("DatePicker"),i=fl(r),{mergedSizeRef:a,mergedDisabledRef:o}=i,{NConfigProvider:s,mergedClsPrefixRef:l,mergedBorderedRef:u,namespaceRef:c}=pn(r),f=ke(null),d=ke(null),h=ke(null),v=ke(!1),p=Ht(r,"show"),g=ri(p,v),m=ke(r.defaultValue),y=Q(()=>r.value),b=ri(y,m),x=ke(null);Co(()=>{x.value=b.value});const w=ke(""),S=ke(""),C=ke(""),_=rr("DatePicker","DatePicker",n7e,$je,r,l),T=Q(()=>({locale:n.value.locale})),E=Q(()=>{var Y,K;return((K=(Y=s==null?void 0:s.mergedComponentPropsRef.value)===null||Y===void 0?void 0:Y.DatePicker)===null||K===void 0?void 0:K.timePickerSize)||"small"}),k=Q(()=>["daterange","datetimerange"].includes(r.type)),I=Q(()=>{const{placeholder:Y}=r;if(Y===void 0){const{type:K}=r;switch(K){case"date":return e.value.datePlaceholder;case"datetime":return e.value.datetimePlaceholder;case"month":return e.value.monthPlaceholder;case"year":return e.value.yearPlaceholder;default:return""}}else return Y}),P=Q(()=>r.startPlaceholder===void 0?r.type==="daterange"?e.value.startDatePlaceholder:r.type==="datetimerange"?e.value.startDatetimePlaceholder:"":r.startPlaceholder),F=Q(()=>r.endPlaceholder===void 0?r.type==="daterange"?e.value.endDatePlaceholder:r.type==="datetimerange"?e.value.endDatetimePlaceholder:"":r.endPlaceholder),$=Q(()=>r.format||RWe[r.type]),R=Q(()=>{const{actions:Y,type:K}=r;if(Y!==void 0)return Y;switch(K){case"date":return["clear","now"];case"datetime":return["clear","now","confirm"];case"daterange":return["clear","confirm"];case"datetimerange":return["clear","confirm"];case"month":return["clear","now","confirm"];case"year":return["clear","now"];default:{Zl("data-picker","The type is wrong, n-date-picker's type only supports `date`, `datetime`, `daterange` and `datetimerange`.");break}}});function L(Y){x.value=Y}function O(Y){const{"onUpdate:value":K,onUpdateValue:ee,onChange:J}=r,{nTriggerFormChange:ge,nTriggerFormInput:Ve}=i;ee&&pt(ee,Y),K&&pt(K,Y),J&&pt(J,Y),m.value=Y,ge(),Ve()}function B(Y){const{onFocus:K}=r,{nTriggerFormFocus:ee}=i;K&&pt(K,Y),ee()}function U(Y){const{onBlur:K}=r,{nTriggerFormBlur:ee}=i;K&&pt(K,Y),ee()}function W(Y){const{"onUpdate:show":K,onUpdateShow:ee}=r;K&&pt(K,Y),ee&&pt(ee,Y),v.value=Y}function X(Y){Y.code==="Escape"&&Le({returnFocus:!0})}function ie(){var Y;W(!1),(Y=h.value)===null||Y===void 0||Y.deactivate()}function q(){Le({returnFocus:!0})}function j(Y){var K;g.value&&!((K=d.value)===null||K===void 0?void 0:K.contains(Y.target))&&Le({returnFocus:!1})}function fe(Y){Le({returnFocus:!0,disableUpdateOnClose:Y})}function se(Y){if(!f.value)return;const{monthScrollRef:K,yearScrollRef:ee}=f.value,{value:J}=b;if(K){const ge=Ta(Y===void 0?J===null?Date.now():J:Y);K.scrollTo({top:ge*SP})}if(ee){const ge=Ha(Y===void 0?J===null?Date.now():J:Y)-Nq;ee.scrollTo({top:ge*SP})}}function ce(Y,K){K?O(Y):L(Y)}function _e(){O(x.value)}function Me(){const{value:Y}=x;k.value?(Array.isArray(Y)||Y===null)&&De(Y):Array.isArray(Y)||Ye(Y)}function Ye(Y){Y===null?w.value="":w.value=hi(Y,$.value,T.value)}function De(Y){if(Y===null)S.value="",C.value="";else{const K=T.value;S.value=hi(Y[0],$.value,K),C.value=hi(Y[1],$.value,K)}}function D(){g.value||We()}function z(Y){var K;((K=f.value)===null||K===void 0?void 0:K.$el.contains(Y.relatedTarget))||(U(Y),Me(),Le({returnFocus:!1}))}function V(){o.value||(Me(),Le({returnFocus:!1}))}function he(Y){if(Y===""){O(null);return}const K=tu(Y,$.value,new Date,T.value);Hs(K)?(O(ur(K)),Me()):w.value=Y}function re(Y){if(Y[0]===""&&Y[1]===""){O(null);return}const[K,ee]=Y,J=tu(K,$.value,new Date,T.value),ge=tu(ee,$.value,new Date,T.value);Hs(J)&&Hs(ge)?(O([ur(J),ur(ge)]),Me()):[S.value,C.value]=Y}function pe(Y){o.value||Vu(Y,"clear")||g.value||We()}function Je(Y){o.value||B(Y)}function We(){o.value||g.value||(W(!0),(r.type==="month"||r.type==="year")&&oa(se))}function Le({returnFocus:Y,disableUpdateOnClose:K}){var ee;g.value&&(W(!1),r.type!=="date"&&r.updateValueOnClose&&!K&&_e(),Y&&((ee=h.value)===null||ee===void 0||ee.focus()))}nn(x,()=>{Me()}),Me(),nn(g,Y=>{Y||(x.value=b.value)});const $e=zje(r,x),H=Gje(r,x);return Qr(CC,Object.assign(Object.assign(Object.assign({scrollYearMonth:se,mergedClsPrefixRef:l,mergedThemeRef:_,timePickerSizeRef:E,localeRef:e,dateLocaleRef:n,firstDayOfWeekRef:Ht(r,"firstDayOfWeek"),isDateDisabledRef:Ht(r,"isDateDisabled"),rangesRef:Ht(r,"ranges"),closeOnSelectRef:Ht(r,"closeOnSelect"),updateValueOnCloseRef:Ht(r,"updateValueOnClose")},$e),H),{datePickerSlots:t})),{mergedClsPrefix:l,mergedBordered:u,namespace:c,uncontrolledValue:m,pendingValue:x,panelInstRef:f,triggerElRef:d,inputInstRef:h,isMounted:of(),displayTime:w,displayStartTime:S,displayEndTime:C,mergedShow:g,adjustedTo:Ua(r),isRange:k,localizedStartPlaceholder:P,localizedEndPlaceholder:F,mergedSize:a,mergedDisabled:o,localizedPlacehoder:I,isValueInvalid:$e.isValueInvalidRef,isStartValueInvalid:H.isStartValueInvalidRef,isEndValueInvalid:H.isEndValueInvalidRef,handleClickOutside:j,handleKeyDown:X,handleClear:ie,handleTriggerClick:pe,handleInputActivate:D,handleInputDeactivate:V,handleInputFocus:Je,handleInputBlur:z,handlePanelTabOut:q,handlePanelClose:fe,handleRangeUpdateValue:re,handleSingleUpdateValue:he,handlePanelUpdateValue:ce,handlePanelConfirm:_e,mergedTheme:_,actions:R,triggerCssVars:Q(()=>{const{common:{cubicBezierEaseInOut:Y},self:{iconColor:K,iconColorDisabled:ee}}=_.value;return{"--bezier":Y,"--icon-color":K,"--icon-color-disabled":ee}}),cssVars:Q(()=>{const{type:Y}=r,{common:{cubicBezierEaseInOut:K},self:{calendarTitleFontSize:ee,calendarDaysFontSize:J,itemFontSize:ge,itemTextColor:Ve,itemColorDisabled:Ge,itemColorIncluded:rt,itemColorHover:Se,itemColorActive:ye,itemBorderRadius:Re,itemTextColorDisabled:St,itemTextColorActive:kt,panelColor:Ae,panelTextColor:ut,arrowColor:cr,calendarTitleTextColor:Ne,panelActionDividerColor:vt,panelHeaderDividerColor:Ft,calendarDaysDividerColor:vr,panelBoxShadow:zr,panelBorderRadius:or,calendarTitleFontWeight:qe,panelExtraFooterPadding:st,panelActionPadding:Rt,itemSize:Nt,itemCellWidth:sr,itemCellHeight:fn,scrollItemWidth:on,scrollItemHeight:ln,calendarTitlePadding:Pn,calendarTitleHeight:jr,calendarDaysHeight:hr,calendarDaysTextColor:Wr,arrowSize:xr,panelHeaderPadding:dn,calendarDividerColor:Pr,calendarTitleGridTempateColumns:Xn,iconColor:ra,iconColorDisabled:yo,scrollItemBorderRadius:es,[Gt("calendarLeftPadding",Y)]:ts,[Gt("calendarRightPadding",Y)]:Do}}=_.value;return{"--bezier":K,"--panel-border-radius":or,"--panel-color":Ae,"--panel-box-shadow":zr,"--panel-text-color":ut,"--panel-header-padding":dn,"--panel-header-divider-color":Ft,"--calendar-left-padding":ts,"--calendar-right-padding":Do,"--calendar-title-height":jr,"--calendar-title-padding":Pn,"--calendar-title-font-size":ee,"--calendar-title-font-weight":qe,"--calendar-title-text-color":Ne,"--calendar-title-grid-template-columns":Xn,"--calendar-days-height":hr,"--calendar-days-divider-color":vr,"--calendar-days-font-size":J,"--calendar-days-text-color":Wr,"--calendar-divider-color":Pr,"--panel-action-padding":Rt,"--panel-extra-footer-padding":st,"--panel-action-divider-color":vt,"--item-font-size":ge,"--item-border-radius":Re,"--item-size":Nt,"--item-cell-width":sr,"--item-cell-height":fn,"--item-text-color":Ve,"--item-color-included":rt,"--item-color-disabled":Ge,"--item-color-hover":Se,"--item-color-active":ye,"--item-text-color-disabled":St,"--item-text-color-active":kt,"--scroll-item-width":on,"--scroll-item-height":ln,"--scroll-item-border-radius":es,"--arrow-size":xr,"--arrow-color":cr,"--icon-color":ra,"--icon-color-disabled":yo}})}},render(){const{clearable:r}=this,t={bordered:this.mergedBordered,size:this.mergedSize,passivelyActivated:!0,disabled:this.mergedDisabled,readonly:this.inputReadonly||this.mergedDisabled,clearable:r,onClear:this.handleClear,onClick:this.handleTriggerClick,onActivate:this.handleInputActivate,onDeactivate:this.handleInputDeactivate,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur},e={onUpdateValue:this.handlePanelUpdateValue,onTabOut:this.handlePanelTabOut,onClose:this.handlePanelClose,onKeydown:this.handleKeyDown,onConfirm:this.handlePanelConfirm,ref:"panelInstRef",value:this.pendingValue,active:this.mergedShow,actions:this.actions,shortcuts:this.shortcuts,style:this.cssVars},{mergedClsPrefix:n}=this;return M("div",{ref:"triggerElRef",class:[`${n}-date-picker`,this.mergedDisabled&&`${n}-date-picker--disabled`,this.isRange&&`${n}-date-picker--range`],style:this.triggerCssVars,onKeydown:this.handleKeyDown},M(Lp,null,{default:()=>[M(Fp,null,{default:()=>this.isRange?M(ch,Object.assign({ref:"inputInstRef",value:[this.displayStartTime,this.displayEndTime],placeholder:[this.localizedStartPlaceholder,this.localizedEndPlaceholder],textDecoration:[this.isStartValueInvalid?"line-through":"",this.isEndValueInvalid?"line-through":""],pair:!0,onUpdateValue:this.handleRangeUpdateValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,internalForceFocus:this.mergedShow,internalDeactivateOnEnter:!0},t),{separator:()=>this.separator===void 0?M(si,{clsPrefix:n,class:`${n}-date-picker-icon`},{default:()=>M(pUe,null)}):this.separator,[r?"clear":"suffix"]:()=>M(si,{clsPrefix:n,class:`${n}-date-picker-icon`},{default:()=>M(kX,null)})}):M(ch,Object.assign({ref:"inputInstRef",value:this.displayTime,placeholder:this.localizedPlacehoder,textDecoration:this.isValueInvalid&&!this.isRange?"line-through":"",onUpdateValue:this.handleSingleUpdateValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,internalForceFocus:this.mergedShow,internalDeactivateOnEnter:!0},t),{[r?"clear":"suffix"]:()=>M(si,{clsPrefix:n,class:`${n}-date-picker-icon`},{default:()=>M(kX,null)})})}),M($p,{show:this.mergedShow,containerClass:this.namespace,to:this.adjustedTo,teleportDisabled:this.adjustedTo===Ua.tdkey,placement:"bottom-start"},{default:()=>M(pa,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.mergedShow?Cl(this.type==="datetime"?M(Qje,Object.assign({},e)):this.type==="daterange"?M(r7e,Object.assign({},e)):this.type==="datetimerange"?M(e7e,Object.assign({},e)):this.type==="month"?M(fK,Object.assign({},e,{type:"month",key:"month"})):this.type==="year"?M(fK,Object.assign({},e,{type:"year",key:"year"})):M(t7e,Object.assign({},e)),[[cf,this.handleClickOutside]]):null})})]}))}}),a7e={titleFontSize:"18px",padding:"16px 28px 20px 28px",iconSize:"28px",actionSpace:"12px",contentMargin:"8px 0 16px 0",iconMargin:"0 4px 0 0",iconMarginIconTop:"4px 0 8px 0",closeSize:"18px",closeMargin:"22px 28px 0 0",closeMarginIconTop:"12px 18px 0 0"};const o7e=r=>{const{textColor1:t,textColor2:e,modalColor:n,closeColor:i,closeColorHover:a,closeColorPressed:o,infoColor:s,successColor:l,warningColor:u,errorColor:c,primaryColor:f,dividerColor:d,borderRadius:h,fontWeightStrong:v,lineHeight:p,fontSize:g}=r;return Object.assign(Object.assign({},a7e),{fontSize:g,lineHeight:p,border:`1px solid ${d}`,titleTextColor:t,textColor:e,color:n,closeColor:i,closeColorHover:a,closeColorPressed:o,iconColor:f,iconColorInfo:s,iconColorSuccess:l,iconColorWarning:u,iconColorError:c,borderRadius:h,titleFontWeight:v})},s7e=ro({name:"Dialog",common:Bn,peers:{Button:w0},self:o7e});var dK=s7e,l7e=we([ne("dialog",`
 line-height: var(--line-height);
 position: relative;
 background: var(--color);
 color: var(--text-color);
 box-sizing: border-box;
 margin: auto;
 border-radius: var(--border-radius);
 padding: var(--padding);
 transition: 
 border-color .3s var(--bezier),
 background-color .3s var(--bezier),
 color .3s var(--bezier);
 `,[xe("icon",{color:"var(--icon-color)"}),Pe("bordered",{border:"var(--border)"}),Pe("icon-top",[xe("close",{margin:"var(--close-margin)"}),xe("icon",{margin:"var(--icon-margin)"}),xe("content",{textAlign:"center"}),xe("title",{justifyContent:"center"}),xe("action",{justifyContent:"center"})]),Pe("icon-left",[xe("icon",{margin:"var(--icon-margin)"})]),xe("close",`
 font-size: var(--close-size);
 position: absolute;
 right: 0;
 top: 0;
 margin: var(--close-margin);
 transition: .3s color var(--bezier);
 z-index: 1;
 `),xe("content",`
 font-size: var(--font-size);
 margin: var(--content-margin);
 position: relative;
 word-break: break-word;
 `,[we("&:last-child","margin-bottom: 0;")]),xe("action",`
 display: flex;
 justify-content: flex-end;
 `,[we("> *:not(:last-child)",{marginRight:"var(--action-space)"})]),xe("icon",{fontSize:"var(--icon-size)",transition:"color .3s var(--bezier)"}),xe("title",`
 transition: color .3s var(--bezier);
 display: flex;
 align-items: center;
 font-size: var(--title-font-size);
 font-weight: var(--title-font-weight);
 color: var(--title-text-color);
 `),ne("dialog-icon-container",{display:"flex",justifyContent:"center"})]),d0(ne("dialog",`
 width: 446px;
 max-width: calc(100vw - 32px);
 `)),ne("dialog",[uX(`
 width: 446px;
 max-width: calc(100vw - 32px);
 `)])]);const hK=M(ZS,null),vK={default:hK,info:hK,success:M(QS,null),warning:M(JS,null),error:M(KS,null)},TC={icon:Function,type:{type:String,default:"default"},title:[String,Function],closable:{type:Boolean,default:!0},negativeText:String,positiveText:String,content:[String,Function],action:Function,showIcon:{type:Boolean,default:!0},loading:Boolean,bordered:Boolean,iconPlacement:String,onPositiveClick:Function,onNegativeClick:Function,onClose:Function},pK=ju(TC);var gK=mt({name:"Dialog",alias:["NimbusConfirmCard","Confirm"],props:Object.assign(Object.assign({},rr.props),TC),setup(r){const{NConfigProvider:t,mergedClsPrefixRef:e}=pn(r),n=Q(()=>{var l,u,c;const{iconPlacement:f}=r;return(c=f!=null?f:(u=(l=t==null?void 0:t.mergedComponentPropsRef.value)===null||l===void 0?void 0:l.Dialog)===null||u===void 0?void 0:u.iconPlacement)!==null&&c!==void 0?c:"left"});function i(l){const{onPositiveClick:u}=r;u&&u(l)}function a(l){const{onNegativeClick:u}=r;u&&u(l)}function o(){const{onClose:l}=r;l&&l()}const s=rr("Dialog","Dialog",l7e,dK,r,e);return{mergedClsPrefix:e,mergedIconPlacement:n,mergedTheme:s,handlePositiveClick:i,handleNegativeClick:a,handleCloseClick:o,cssVars:Q(()=>{const{type:l,iconPlacement:u}=r,{common:{cubicBezierEaseInOut:c},self:{fontSize:f,lineHeight:d,border:h,titleTextColor:v,textColor:p,color:g,closeColor:m,closeColorHover:y,closeColorPressed:b,borderRadius:x,titleFontWeight:w,titleFontSize:S,padding:C,iconSize:_,actionSpace:T,contentMargin:E,closeSize:k,[u==="top"?"iconMarginIconTop":"iconMargin"]:I,[u==="top"?"closeMarginIconTop":"closeMargin"]:P,[Gt("iconColor",l)]:F}}=s.value;return{"--font-size":f,"--icon-color":F,"--bezier":c,"--close-margin":P,"--icon-margin":I,"--icon-size":_,"--close-size":k,"--close-color":m,"--close-color-hover":y,"--close-color-pressed":b,"--color":g,"--text-color":p,"--border-radius":x,"--padding":C,"--line-height":d,"--border":h,"--content-margin":E,"--title-font-size":S,"--title-font-weight":w,"--title-text-color":v,"--action-space":T}})}},render(){const{$slots:r,bordered:t,mergedIconPlacement:e,cssVars:n,closable:i,showIcon:a,title:o,content:s,action:l,negativeText:u,positiveText:c,handlePositiveClick:f,handleNegativeClick:d,mergedTheme:h,loading:v,type:p,mergedClsPrefix:g}=this;return M("div",{class:[`${g}-dialog`,`${g}-dialog--icon-${e}`,t&&`${g}-dialog--bordered`],style:n},i?M(eC,{clsPrefix:g,class:`${g}-dialog__close`,onClick:this.handleCloseClick}):null,a&&e==="top"?M("div",{class:`${g}-dialog-icon-container`},M(si,{clsPrefix:g,class:`${g}-dialog__icon`},{default:()=>Jr(r,"icon",void 0,()=>[this.icon?Hn(this.icon):vK[this.type]])})):null,M("div",{class:`${g}-dialog__title`},a&&e==="left"?M(si,{clsPrefix:g,class:`${g}-dialog__icon`},{default:()=>Jr(r,"icon",void 0,()=>[this.icon?Hn(this.icon):vK[this.type]])}):null,Jr(r,"header",void 0,()=>[Hn(o)])),M("div",{class:`${g}-dialog__content`},Jr(r,"default",void 0,()=>[Hn(s)])),r.action||c||u||l?M("div",{class:`${g}-dialog__action`},Jr(r,"action",void 0,l?()=>[Hn(l)]:()=>[this.negativeText&&M(Va,{theme:h.peers.Button,themeOverrides:h.peerOverrides.Button,ghost:!0,size:"small",onClick:d},{default:()=>Hn(this.negativeText)}),this.positiveText&&M(Va,{theme:h.peers.Button,themeOverrides:h.peerOverrides.Button,disabled:v,loading:v,size:"small",type:p==="default"?"primary":p,onClick:f},{default:()=>Hn(this.positiveText)})])):null)}});const u7e=r=>{const{modalColor:t,textColor2:e,boxShadow3:n}=r;return{color:t,textColor:e,boxShadow:n}},c7e=ro({name:"Modal",common:Bn,peers:{Scrollbar:Xu,Dialog:dK,Card:Bq},self:u7e});var f7e=c7e;const $P=Object.assign(Object.assign({},_P),TC),d7e=ju($P);var h7e=mt({name:"ModalBody",inheritAttrs:!1,props:Object.assign(Object.assign({show:{type:Boolean,required:!0},preset:String,displayDirective:{type:String,required:!0}},$P),{onClickoutside:{type:Function,required:!0},onBeforeLeave:{type:Function,required:!0},onAfterLeave:{type:Function,required:!0},onPositiveClick:{type:Function,required:!0},onNegativeClick:{type:Function,required:!0},onClose:{type:Function,required:!0},onAfterEnter:Function}),setup(r){const t=ke(null),e=ke(null),n=ke(r.show),i=ke(null),a=ke(null);nn(Ht(r,"show"),g=>{g&&(n.value=!0)});const o=nr(CX);function s(){if(o.transformOriginRef.value==="center")return"";const{value:g}=i,{value:m}=a;if(g===null||m===null)return"";if(e.value){const y=e.value.containerScrollTop;return`${g}px ${m+y}px`}return""}function l(g){if(o.transformOriginRef.value==="center")return;const m=o.getMousePosition();if(!m||!e.value)return;const y=e.value.containerScrollTop,{offsetLeft:b,offsetTop:x}=g;if(m){const w=m.y,S=m.x;i.value=-(b-S),a.value=-(x-w-y)}g.style.transformOrigin=s()}function u(g){oa(()=>{l(g)})}function c(g){g.style.transformOrigin=s(),r.onBeforeLeave()}function f(){n.value=!1,i.value=null,a.value=null,r.onAfterLeave()}function d(){const{onClose:g}=r;g&&g()}function h(){r.onNegativeClick()}function v(){r.onPositiveClick()}function p(g){r.onClickoutside(g)}return Qr(zI,t),Qr(GI,null),Qr(UI,null),{mergedTheme:o.mergedThemeRef,appear:o.appearRef,isMounted:o.isMountedRef,mergedClsPrefix:o.mergedClsPrefixRef,bodyRef:t,scrollbarRef:e,displayed:n,handleClickOutside:p,handlePositiveClick:v,handleNegativeClick:h,handleCloseClick:d,handleAfterLeave:f,handleBeforeLeave:c,handleEnter:u}},render(){const{$slots:r,$attrs:t,handleEnter:e,handleAfterLeave:n,handleBeforeLeave:i,handleClickOutside:a,preset:o,mergedClsPrefix:s}=this;let l=null;if(!o){if(l=$I(r),!l){Zl("modal","default slot is empty");return}l=gc(l),l.props=Tl({class:`${s}-modal`},t,l.props||{})}return this.displayDirective==="show"||this.displayed||this.show?Cl(M("div",{class:`${s}-modal-body-wrapper`},M(ms,{ref:"scrollbarRef",theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,contentClass:`${s}-modal-scroll-content`},{default:()=>{var u;return M(pa,{name:"fade-in-scale-up-transition",appear:(u=this.appear)!==null&&u!==void 0?u:this.isMounted,onEnter:e,onAfterEnter:this.onAfterEnter,onAfterLeave:n,onBeforeLeave:i},{default:()=>Cl(this.preset==="confirm"||this.preset==="dialog"?M(gK,Object.assign({},this.$attrs,{class:[`${s}-modal`,this.$attrs.class],ref:"bodyRef",theme:this.mergedTheme.peers.Dialog,themeOverrides:this.mergedTheme.peerOverrides.Dialog},Kl(this.$props,pK)),r):this.preset==="card"?M(WWe,Object.assign({},this.$attrs,{ref:"bodyRef",class:[`${s}-modal`,this.$attrs.class],theme:this.mergedTheme.peers.Card,themeOverrides:this.mergedTheme.peerOverrides.Card},Kl(this.$props,VWe)),r):l,[[Ox,this.show],[cf,a]])})}})),[[Ox,this.displayDirective==="if"||this.displayed||this.show]]):null}}),v7e=we([ne("modal-container",`
 position: fixed;
 left: 0;
 top: 0;
 height: 0;
 width: 0;
 display: flex;
 `),ne("modal-mask",`
 position: fixed;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 background-color: rgba(0, 0, 0, .4);
 `,[lP({enterDuration:".25s",leaveDuration:".25s",enterCubicBezier:"var(--bezier-ease-out)",leaveCubicBezier:"var(--bezier-ease-out)"})]),ne("modal-body-wrapper",`
 position: fixed;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 overflow: visible;
 `,[ne("modal-scroll-content",`
 min-height: 100%;
 display: flex;
 position: relative;
 `)]),ne("modal",`
 align-self: center;
 color: var(--text-color);
 margin: auto;
 box-shadow: var(--box-shadow);
 `,[qu({duration:".25s",enterScale:".5"})])]);const p7e=Object.assign(Object.assign(Object.assign(Object.assign({},rr.props),{show:Boolean,unstableShowMask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},preset:String,to:[String,Object],displayDirective:{type:String,default:"if"},transformOrigin:{type:String,default:"mouse"}}),$P),{"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onAfterEnter:Function,onBeforeLeave:Function,onAfterLeave:Function,onClose:Function,onPositiveClick:Function,onNegativeClick:Function,onMaskClick:Function,dialog:Boolean,appear:{type:Boolean,default:void 0},overlayStyle:[String,Object],onBeforeHide:Function,onAfterHide:Function,onHide:Function});var g7e=mt({name:"Modal",inheritAttrs:!1,props:p7e,setup(r){const t=ke(null),{mergedClsPrefixRef:e,namespaceRef:n}=pn(r),i=rr("Modal","Modal",v7e,f7e,r,e),a=yX(64),o=pX(),s=of(),l=r.dialog?nr(yK,null):null;function u(g){const{onUpdateShow:m,"onUpdate:show":y,onHide:b}=r;m&&pt(m,g),y&&pt(y,g),b&&!g&&b(g)}function c(){const{onClose:g}=r;g?Promise.resolve(g()).then(m=>{m!==!1&&u(!1)}):u(!1)}function f(){const{onPositiveClick:g}=r;g?Promise.resolve(g()).then(m=>{m!==!1&&u(!1)}):u(!1)}function d(){const{onNegativeClick:g}=r;g?Promise.resolve(g()).then(m=>{m!==!1&&u(!1)}):u(!1)}function h(){const{onBeforeLeave:g,onBeforeHide:m}=r;g&&pt(g),m&&m()}function v(){const{onAfterLeave:g,onAfterHide:m}=r;g&&pt(g),m&&m()}function p(g){var m;const{onMaskClick:y}=r;y&&y(g),r.maskClosable&&((m=t.value)===null||m===void 0?void 0:m.contains(g.target))&&u(!1)}return Qr(CX,{getMousePosition:()=>{if(l){const{clickedRef:g,clickPositionRef:m}=l;if(g.value&&m.value)return m.value}return a.value?o.value:null},mergedClsPrefixRef:e,mergedThemeRef:i,isMountedRef:s,appearRef:Ht(r,"appear"),transformOriginRef:Ht(r,"transformOrigin")}),{mergedClsPrefix:e,namespace:n,isMounted:s,containerRef:t,presetProps:Q(()=>Kl(r,d7e)),handleAfterLeave:v,handleClickoutside:p,handleBeforeLeave:h,doUpdateShow:u,handleNegativeClick:d,handlePositiveClick:f,handleCloseClick:c,cssVars:Q(()=>{const{common:{cubicBezierEaseOut:g},self:{boxShadow:m,color:y,textColor:b}}=i.value;return{"--bezier-ease-out":g,"--box-shadow":m,"--color":y,"--text-color":b}})}},render(){const{mergedClsPrefix:r}=this;return M(UX,{to:this.to,show:this.show},{default:()=>{var t;return[Cl(M("div",{ref:"containerRef",class:[`${r}-modal-container`,this.namespace],style:this.cssVars},this.unstableShowMask?M(pa,{name:"fade-in-transition",key:"mask",appear:(t=this.appear)!==null&&t!==void 0?t:this.isMounted},{default:()=>this.show?M("div",{ref:"containerRef",class:`${r}-modal-mask`}):null}):null,M(h7e,Object.assign({style:this.overlayStyle},this.$attrs,{ref:"bodyWrapper",displayDirective:this.displayDirective,show:this.show,preset:this.preset},this.presetProps,{onClose:this.handleCloseClick,onNegativeClick:this.handleNegativeClick,onPositiveClick:this.handlePositiveClick,onBeforeLeave:this.handleBeforeLeave,onAfterEnter:this.onAfterEnter,onAfterLeave:this.handleAfterLeave,onClickoutside:this.handleClickoutside}),this.$slots)),[[$X,{enabled:this.show}]])]}})}});const m7e=Object.assign(Object.assign({},TC),{internalStyle:[String,Object],maskClosable:{type:Boolean,default:!0},onPositiveClick:Function,onNegativeClick:Function,onClose:Function,onMaskClick:Function});var y7e=mt({name:"DialogEnvironment",props:Object.assign(Object.assign({},m7e),{internalKey:{type:String,required:!0},to:[String,Object],onInternalAfterLeave:{type:Function,required:!0}}),setup(r){const t=ke(!0);function e(){r.onInternalAfterLeave(r.internalKey)}function n(u){const{onPositiveClick:c}=r;c?Promise.resolve(c(u)).then(f=>{f!==!1&&s()}):s()}function i(u){const{onNegativeClick:c}=r;c?Promise.resolve(c(u)).then(f=>{f!==!1&&s()}):s()}function a(){const{onClose:u}=r;u?Promise.resolve(u()).then(c=>{c!==!1&&s()}):s()}function o(u){const{onMaskClick:c,maskClosable:f}=r;c&&(c(u),f&&s())}function s(){t.value=!1}function l(u){t.value=u}return{show:t,hide:s,handleUpdateShow:l,handleAfterLeave:e,handleCloseClick:a,handleNegativeClick:i,handlePositiveClick:n,handleMaskClick:o}},render(){const{handlePositiveClick:r,handleUpdateShow:t,handleNegativeClick:e,handleCloseClick:n,handleAfterLeave:i,handleMaskClick:a,to:o,maskClosable:s,show:l}=this;return M(g7e,{show:l,onUpdateShow:t,onMaskClick:a,appear:!0,dialog:!0,to:o,maskClosable:s,onAfterLeave:i},{default:()=>M(gK,Object.assign({},Kl(this.$props,pK),{style:this.internalStyle,onClose:n,onNegativeClick:e,onPositiveClick:r}))})}});const mK=Symbol("dialogApi"),yK=Symbol("dialogProvider"),b7e={injectionKey:String,to:[String,Object]};var Adt=mt({name:"DialogProvider",props:b7e,setup(){const r=ke([]),t={};function e(s={}){const l=_p(),u=vc(Object.assign(Object.assign({},s),{key:l,destroy:()=>{t[`n-dialog-${l}`].hide()}}));return r.value.push(u),u}const n=["info","success","warning","error"].map(s=>l=>e(Object.assign(Object.assign({},l),{type:s})));function i(s){const{value:l}=r;l.splice(l.findIndex(u=>u.key===s),1)}function a(){Object.values(t).forEach(s=>s.hide())}const o={create:e,destroyAll:a,info:n[0],success:n[1],warning:n[2],error:n[3]};return Qr(mK,o),Qr(yK,{clickedRef:yX(64),clickPositionRef:pX()}),Object.assign(Object.assign({},o),{dialogList:r,dialogInstRefs:t,handleAfterLeave:i})},render(){var r,t;return M(Fi,null,[this.dialogList.map(e=>M(y7e,xX(e,["destroy","style"],{internalStyle:e.style,to:this.to,ref:n=>{n===null?delete this.dialogInstRefs[`n-dialog-${e.key}`]:this.dialogInstRefs[`n-dialog-${e.key}`]=n},internalKey:e.key,onInternalAfterLeave:this.handleAfterLeave}))),(t=(r=this.$slots).default)===null||t===void 0?void 0:t.call(r)])}});function kdt(){const r=nr(mK,null);return r===null&&qS("use-dialog","No outer <n-dialog-provider /> founded."),r}var x7e={gapSmall:"4px 8px",gapMedium:"8px 12px",gapLarge:"12px 16px"};const w7e=()=>x7e,S7e={name:"Space",self:w7e};var C7e=S7e;const E7e=Object.assign(Object.assign({},rr.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,size:{type:[String,Number,Array],default:"medium"},itemStyle:[String,Object],wrap:{type:Boolean,default:!0}});var Mdt=mt({name:"Space",props:E7e,setup(r){const{mergedClsPrefixRef:t}=pn(r),e=rr("Space","Space",void 0,C7e,r,t);return{mergedClsPrefix:t,margin:Q(()=>{const{size:n}=r;if(Array.isArray(n))return{horizontal:n[0],vertical:n[1]};if(typeof n=="number")return{horizontal:n,vertical:n};const{self:{[Gt("gap",n)]:i}}=e.value,{row:a,col:o}=D$e(i);return{horizontal:Ho(o),vertical:Ho(a)}})}},render(){const{vertical:r,align:t,inline:e,justify:n,itemStyle:i,margin:a,wrap:o,mergedClsPrefix:s}=this,l=v0(bX(this));if(!l.length)return null;const u=`${a.horizontal}px`,c=`${a.horizontal/2}px`,f=`${a.vertical}px`,d=`${a.vertical/2}px`,h=l.length-1,v=n.startsWith("space-");return M("div",{role:"none",class:`${s}-space`,style:{display:e?"inline-flex":"flex",flexDirection:r?"column":"row",justifyContent:["start","end"].includes(n)?"flex-"+n:n,flexWrap:!o||r?"nowrap":"wrap",marginTop:r?"":`-${d}`,marginBottom:r?"":`-${d}`,alignItems:t}},l.map((p,g)=>M("div",{role:"none",style:[i,{maxWidth:"100%"},r?{marginBottom:g!==h?f:""}:{marginRight:v?n==="space-between"&&g===h?"":c:g!==h?u:"",marginLeft:v?n==="space-between"&&g===0?"":c:"",paddingTop:d,paddingBottom:d}]},p)))}}),_7e={blankHeightSmall:"28px",blankHeightMedium:"34px",blankHeightLarge:"40px",feedbackPadding:"4px 0 0 2px",feedbackHeightSmall:"24px",feedbackHeightMedium:"24px",feedbackHeightLarge:"26px",feedbackFontSizeSmall:"13px",feedbackFontSizeMedium:"14px",feedbackFontSizeLarge:"14px",labelFontSizeLeftSmall:"14px",labelFontSizeLeftMedium:"14px",labelFontSizeLeftLarge:"15px",labelFontSizeTopSmall:"13px",labelFontSizeTopMedium:"14px",labelFontSizeTopLarge:"14px",labelHeightSmall:"24px",labelHeightMedium:"26px",labelHeightLarge:"28px",labelPaddingVertical:"0 0 8px 2px",labelPaddingHorizontal:"0 12px 0 0",labelTextAlignVertical:"left",labelTextAlignHorizontal:"right"};const T7e=r=>{const{textColor1:t,errorColor:e,warningColor:n,lineHeight:i,textColor3:a}=r;return Object.assign(Object.assign({},_7e),{lineHeight:i,labelTextColor:t,asteriskColor:e,feedbackTextColorError:e,feedbackTextColorWarning:n,feedbackTextColor:a})},A7e={name:"Form",common:Bn,self:T7e};var bK=A7e,k7e=ne("form",[Pe("inline",`
 width: 100%;
 display: inline-flex;
 align-items: flex-start;
 align-content: space-around;
 `,[ne("form-item",{width:"auto",marginRight:"18px"},[we("&:last-child",{marginRight:0})])])]);const A0=Symbol("form"),xK=Symbol("formItemInsts");var M7e=globalThis&&globalThis.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(r,t||[])).next())})};const I7e=Object.assign(Object.assign({},rr.props),{inline:Boolean,labelWidth:[Number,String],labelAlign:String,labelPlacement:{type:String,default:"top"},model:{type:Object,default:()=>{}},rules:Object,disabled:Boolean,size:String,showRequireMark:{type:Boolean,default:void 0},requireMarkPlacement:String,showFeedback:{type:Boolean,default:!0},onSubmit:{type:Function,default:r=>r.preventDefault()},showLabel:{type:Boolean,default:void 0}});var Idt=mt({name:"Form",props:I7e,setup(r){const{mergedClsPrefixRef:t}=pn(r);rr("Form","Form",k7e,bK,r,t);const e={};function n(o,s=()=>!0){return M7e(this,void 0,void 0,function*(){return yield new Promise((l,u)=>{const c=[];for(const f of ju(e)){const d=e[f];for(const h of d)h.path&&c.push(h.internalValidate(null,s))}Promise.all(c).then(f=>{if(f.some(d=>!d.valid)){const d=f.filter(h=>h.errors).map(h=>h.errors);o?o(d):u(d)}else o?o():l()})})})}function i(){for(const o of ju(e)){const s=e[o];for(const l of s)l.restoreValidation()}}return Qr(A0,r),Qr(xK,{formItems:e}),Object.assign({validate:n,restoreValidation:i},{mergedClsPrefix:t})},render(){const{mergedClsPrefix:r}=this;return M("form",{class:[`${r}-form`,this.inline&&`${r}-form--inline`],onSubmit:this.onSubmit},this.$slots)}});function gh(){return gh=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},gh.apply(this,arguments)}function P7e(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,k0(r,t)}function zP(r){return zP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},zP(r)}function k0(r,t){return k0=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},k0(r,t)}function D7e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function AC(r,t,e){return D7e()?AC=Reflect.construct:AC=function(i,a,o){var s=[null];s.push.apply(s,a);var l=Function.bind.apply(i,s),u=new l;return o&&k0(u,o.prototype),u},AC.apply(null,arguments)}function R7e(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function GP(r){var t=typeof Map=="function"?new Map:void 0;return GP=function(n){if(n===null||!R7e(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(n))return t.get(n);t.set(n,i)}function i(){return AC(n,arguments,zP(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),k0(i,n)},GP(r)}var O7e=/%[sdj%]/g,L7e=function(){};typeof process!="undefined"&&process.env;function UP(r){if(!r||!r.length)return null;var t={};return r.forEach(function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)}),t}function ys(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];var i=0,a=e.length;if(typeof r=="function")return r.apply(null,e);if(typeof r=="string"){var o=r.replace(O7e,function(s){if(s==="%%")return"%";if(i>=a)return s;switch(s){case"%s":return String(e[i++]);case"%d":return Number(e[i++]);case"%j":try{return JSON.stringify(e[i++])}catch{return"[Circular]"}break;default:return s}});return o}return r}function F7e(r){return r==="string"||r==="url"||r==="hex"||r==="email"||r==="date"||r==="pattern"}function Aa(r,t){return!!(r==null||t==="array"&&Array.isArray(r)&&!r.length||F7e(t)&&typeof r=="string"&&!r)}function N7e(r,t,e){var n=[],i=0,a=r.length;function o(s){n.push.apply(n,s||[]),i++,i===a&&e(n)}r.forEach(function(s){t(s,o)})}function wK(r,t,e){var n=0,i=r.length;function a(o){if(o&&o.length){e(o);return}var s=n;n=n+1,s<i?t(r[s],a):e([])}a([])}function B7e(r){var t=[];return Object.keys(r).forEach(function(e){t.push.apply(t,r[e]||[])}),t}var SK=function(r){P7e(t,r);function t(e,n){var i;return i=r.call(this,"Async Validation Error")||this,i.errors=e,i.fields=n,i}return t}(GP(Error));function $7e(r,t,e,n,i){if(t.first){var a=new Promise(function(d,h){var v=function(m){return n(m),m.length?h(new SK(m,UP(m))):d(i)},p=B7e(r);wK(p,e,v)});return a.catch(function(d){return d}),a}var o=t.firstFields===!0?Object.keys(r):t.firstFields||[],s=Object.keys(r),l=s.length,u=0,c=[],f=new Promise(function(d,h){var v=function(g){if(c.push.apply(c,g),u++,u===l)return n(c),c.length?h(new SK(c,UP(c))):d(i)};s.length||(n(c),d(i)),s.forEach(function(p){var g=r[p];o.indexOf(p)!==-1?wK(g,e,v):N7e(g,e,v)})});return f.catch(function(d){return d}),f}function z7e(r){return!!(r&&r.message!==void 0)}function G7e(r,t){for(var e=r,n=0;n<t.length;n++){if(e==null)return e;e=e[t[n]]}return e}function CK(r,t){return function(e){var n;return r.fullFields?n=G7e(t,r.fullFields):n=t[e.field||r.fullField],z7e(e)?(e.field=e.field||r.fullField,e.fieldValue=n,e):{message:typeof e=="function"?e():e,fieldValue:n,field:e.field||r.fullField}}}function EK(r,t){if(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];typeof n=="object"&&typeof r[e]=="object"?r[e]=gh({},r[e],n):r[e]=n}}return r}var _K=function(t,e,n,i,a,o){t.required&&(!n.hasOwnProperty(t.field)||Aa(e,o||t.type))&&i.push(ys(a.messages.required,t.fullField))},U7e=function(t,e,n,i,a){(/^\s+$/.test(e)||e==="")&&i.push(ys(a.messages.whitespace,t.fullField))},VP={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},M0={integer:function(t){return M0.number(t)&&parseInt(t,10)===t},float:function(t){return M0.number(t)&&!M0.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!M0.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(VP.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(VP.url)},hex:function(t){return typeof t=="string"&&!!t.match(VP.hex)}},V7e=function(t,e,n,i,a){if(t.required&&e===void 0){_K(t,e,n,i,a);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=t.type;o.indexOf(s)>-1?M0[s](e)||i.push(ys(a.messages.types[s],t.fullField,t.type)):s&&typeof e!==t.type&&i.push(ys(a.messages.types[s],t.fullField,t.type))},H7e=function(t,e,n,i,a){var o=typeof t.len=="number",s=typeof t.min=="number",l=typeof t.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=e,f=null,d=typeof e=="number",h=typeof e=="string",v=Array.isArray(e);if(d?f="number":h?f="string":v&&(f="array"),!f)return!1;v&&(c=e.length),h&&(c=e.replace(u,"_").length),o?c!==t.len&&i.push(ys(a.messages[f].len,t.fullField,t.len)):s&&!l&&c<t.min?i.push(ys(a.messages[f].min,t.fullField,t.min)):l&&!s&&c>t.max?i.push(ys(a.messages[f].max,t.fullField,t.max)):s&&l&&(c<t.min||c>t.max)&&i.push(ys(a.messages[f].range,t.fullField,t.min,t.max))},jp="enum",W7e=function(t,e,n,i,a){t[jp]=Array.isArray(t[jp])?t[jp]:[],t[jp].indexOf(e)===-1&&i.push(ys(a.messages[jp],t.fullField,t[jp].join(", ")))},j7e=function(t,e,n,i,a){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(e)||i.push(ys(a.messages.pattern.mismatch,t.fullField,e,t.pattern));else if(typeof t.pattern=="string"){var o=new RegExp(t.pattern);o.test(e)||i.push(ys(a.messages.pattern.mismatch,t.fullField,e,t.pattern))}}},Mn={required:_K,whitespace:U7e,type:V7e,range:H7e,enum:W7e,pattern:j7e},Y7e=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Aa(e,"string")&&!t.required)return n();Mn.required(t,e,i,o,a,"string"),Aa(e,"string")||(Mn.type(t,e,i,o,a),Mn.range(t,e,i,o,a),Mn.pattern(t,e,i,o,a),t.whitespace===!0&&Mn.whitespace(t,e,i,o,a))}n(o)},X7e=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Aa(e)&&!t.required)return n();Mn.required(t,e,i,o,a),e!==void 0&&Mn.type(t,e,i,o,a)}n(o)},q7e=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(e===""&&(e=void 0),Aa(e)&&!t.required)return n();Mn.required(t,e,i,o,a),e!==void 0&&(Mn.type(t,e,i,o,a),Mn.range(t,e,i,o,a))}n(o)},K7e=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Aa(e)&&!t.required)return n();Mn.required(t,e,i,o,a),e!==void 0&&Mn.type(t,e,i,o,a)}n(o)},Z7e=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Aa(e)&&!t.required)return n();Mn.required(t,e,i,o,a),Aa(e)||Mn.type(t,e,i,o,a)}n(o)},Q7e=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Aa(e)&&!t.required)return n();Mn.required(t,e,i,o,a),e!==void 0&&(Mn.type(t,e,i,o,a),Mn.range(t,e,i,o,a))}n(o)},J7e=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Aa(e)&&!t.required)return n();Mn.required(t,e,i,o,a),e!==void 0&&(Mn.type(t,e,i,o,a),Mn.range(t,e,i,o,a))}n(o)},eYe=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(e==null&&!t.required)return n();Mn.required(t,e,i,o,a,"array"),e!=null&&(Mn.type(t,e,i,o,a),Mn.range(t,e,i,o,a))}n(o)},tYe=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Aa(e)&&!t.required)return n();Mn.required(t,e,i,o,a),e!==void 0&&Mn.type(t,e,i,o,a)}n(o)},rYe="enum",nYe=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Aa(e)&&!t.required)return n();Mn.required(t,e,i,o,a),e!==void 0&&Mn[rYe](t,e,i,o,a)}n(o)},iYe=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Aa(e,"string")&&!t.required)return n();Mn.required(t,e,i,o,a),Aa(e,"string")||Mn.pattern(t,e,i,o,a)}n(o)},aYe=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Aa(e,"date")&&!t.required)return n();if(Mn.required(t,e,i,o,a),!Aa(e,"date")){var l;e instanceof Date?l=e:l=new Date(e),Mn.type(t,l,i,o,a),l&&Mn.range(t,l.getTime(),i,o,a)}}n(o)},oYe=function(t,e,n,i,a){var o=[],s=Array.isArray(e)?"array":typeof e;Mn.required(t,e,i,o,a,s),n(o)},HP=function(t,e,n,i,a){var o=t.type,s=[],l=t.required||!t.required&&i.hasOwnProperty(t.field);if(l){if(Aa(e,o)&&!t.required)return n();Mn.required(t,e,i,s,a,o),Aa(e,o)||Mn.type(t,e,i,s,a)}n(s)},sYe=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Aa(e)&&!t.required)return n();Mn.required(t,e,i,o,a)}n(o)},I0={string:Y7e,method:X7e,number:q7e,boolean:K7e,regexp:Z7e,integer:Q7e,float:J7e,array:eYe,object:tYe,enum:nYe,pattern:iYe,date:aYe,url:HP,hex:HP,email:HP,required:oYe,any:sYe};function WP(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var jP=WP(),P0=function(){function r(e){this.rules=null,this._messages=jP,this.define(e)}var t=r.prototype;return t.define=function(n){var i=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(typeof n!="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(a){var o=n[a];i.rules[a]=Array.isArray(o)?o:[o]})},t.messages=function(n){return n&&(this._messages=EK(WP(),n)),this._messages},t.validate=function(n,i,a){var o=this;i===void 0&&(i={}),a===void 0&&(a=function(){});var s=n,l=i,u=a;if(typeof l=="function"&&(u=l,l={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,s),Promise.resolve(s);function c(p){var g=[],m={};function y(x){if(Array.isArray(x)){var w;g=(w=g).concat.apply(w,x)}else g.push(x)}for(var b=0;b<p.length;b++)y(p[b]);g.length?(m=UP(g),u(g,m)):u(null,s)}if(l.messages){var f=this.messages();f===jP&&(f=WP()),EK(f,l.messages),l.messages=f}else l.messages=this.messages();var d={},h=l.keys||Object.keys(this.rules);h.forEach(function(p){var g=o.rules[p],m=s[p];g.forEach(function(y){var b=y;typeof b.transform=="function"&&(s===n&&(s=gh({},s)),m=s[p]=b.transform(m)),typeof b=="function"?b={validator:b}:b=gh({},b),b.validator=o.getValidationMethod(b),!!b.validator&&(b.field=p,b.fullField=b.fullField||p,b.type=o.getType(b),d[p]=d[p]||[],d[p].push({rule:b,value:m,source:s,field:p}))})});var v={};return $7e(d,l,function(p,g){var m=p.rule,y=(m.type==="object"||m.type==="array")&&(typeof m.fields=="object"||typeof m.defaultField=="object");y=y&&(m.required||!m.required&&p.value),m.field=p.field;function b(S,C){return gh({},C,{fullField:m.fullField+"."+S,fullFields:m.fullFields?[].concat(m.fullFields,[S]):[S]})}function x(S){S===void 0&&(S=[]);var C=Array.isArray(S)?S:[S];!l.suppressWarning&&C.length&&r.warning("async-validator:",C),C.length&&m.message!==void 0&&(C=[].concat(m.message));var _=C.map(CK(m,s));if(l.first&&_.length)return v[m.field]=1,g(_);if(!y)g(_);else{if(m.required&&!p.value)return m.message!==void 0?_=[].concat(m.message).map(CK(m,s)):l.error&&(_=[l.error(m,ys(l.messages.required,m.field))]),g(_);var T={};m.defaultField&&Object.keys(p.value).map(function(I){T[I]=m.defaultField}),T=gh({},T,p.rule.fields);var E={};Object.keys(T).forEach(function(I){var P=T[I],F=Array.isArray(P)?P:[P];E[I]=F.map(b.bind(null,I))});var k=new r(E);k.messages(l.messages),p.rule.options&&(p.rule.options.messages=l.messages,p.rule.options.error=l.error),k.validate(p.value,p.rule.options||l,function(I){var P=[];_&&_.length&&P.push.apply(P,_),I&&I.length&&P.push.apply(P,I),g(P.length?P:null)})}}var w;m.asyncValidator?w=m.asyncValidator(m,p.value,x,p.source,l):m.validator&&(w=m.validator(m,p.value,x,p.source,l),w===!0?x():w===!1?x(typeof m.message=="function"?m.message(m.fullField||m.field):m.message||(m.fullField||m.field)+" fails"):w instanceof Array?x(w):w instanceof Error&&x(w.message)),w&&w.then&&w.then(function(){return x()},function(S){return x(S)})},function(p){c(p)},s)},t.getType=function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!I0.hasOwnProperty(n.type))throw new Error(ys("Unknown rule type %s",n.type));return n.type||"string"},t.getValidationMethod=function(n){if(typeof n.validator=="function")return n.validator;var i=Object.keys(n),a=i.indexOf("message");return a!==-1&&i.splice(a,1),i.length===1&&i[0]==="required"?I0.required:I0[this.getType(n)]||void 0},r}();P0.register=function(t,e){if(typeof e!="function")throw new Error("Cannot register a validator by type, validator is not a function");I0[t]=e};P0.warning=L7e;P0.messages=jP;P0.validators=I0;function lYe(r){const t=nr(A0,null);return{mergedSize:Q(()=>r.size!==void 0?r.size:(t==null?void 0:t.size)!==void 0?t.size:"medium")}}function uYe(r){const t=nr(A0,null),e=Q(()=>{if(n.value==="top")return;const{labelWidth:d}=r;if(d!==void 0)return ca(d);if((t==null?void 0:t.labelWidth)!==void 0)return ca(t.labelWidth)}),n=Q(()=>{const{labelPlacement:d}=r;return d!==void 0?d:(t==null?void 0:t.labelPlacement)?t.labelPlacement:"top"}),i=Q(()=>{const{labelAlign:d}=r;if(d)return d;if(t==null?void 0:t.labelAlign)return t.labelAlign}),a=Q(()=>[{width:e.value},r.labelStyle]),o=Q(()=>{const{showRequireMark:d}=r;return d!==void 0?d:t==null?void 0:t.showRequireMark}),s=Q(()=>{const{requireMarkPlacement:d}=r;return d!==void 0?d:t==null?void 0:t.requireMarkPlacement}),l=ke(!1),u=Q(()=>{const{validationStatus:d}=r;if(d!==void 0)return d;if(l.value)return"error"}),c=Q(()=>{const{showFeedback:d}=r;return d!==void 0?d:(t==null?void 0:t.showFeedback)!==void 0?t.showFeedback:!0}),f=Q(()=>{const{showLabel:d}=r;return d!==void 0?d:(t==null?void 0:t.showLabel)!==void 0?t.showLabel:!0});return{validationErrored:l,mergedLabelStyle:a,mergedLabelPlacement:n,mergedLabelAlign:i,mergedShowRequireMark:o,mergedRequireMarkPlacement:s,mergedValidationStatus:u,mergedShowFeedback:c,mergedShowLabel:f}}function cYe(r){const t=nr(A0,null),e=Q(()=>{const{rulePath:o}=r;if(o!==void 0)return o;const{path:s}=r;if(s!==void 0)return s}),n=Q(()=>{const o=[],{rule:s}=r;if(s!==void 0&&(Array.isArray(s)?o.push(...s):o.push(s)),t){const{rules:l}=t,{value:u}=e;if(l!==void 0&&u!==void 0){const c=II(l,u);c!==void 0&&(Array.isArray(c)?o.push(...c):o.push(c))}}return o}),i=Q(()=>n.value.some(o=>o.required)),a=Q(()=>i.value||r.required);return{mergedRules:n,mergedRequired:a}}var fYe=mt({name:"FormItemFeedback",props:{clsPrefix:{type:String,required:!0},explains:Array,feedback:String},render(){var r;const{feedback:t,clsPrefix:e}=this;return t?M("div",{key:t,class:`${e}-form-item-feedback__line`},t):(r=this.explains)===null||r===void 0?void 0:r.map(n=>M("div",{key:n,class:`${e}-form-item-feedback__line`},n))}});const{cubicBezierEaseInOut:TK}=af;function dYe({name:r="fade-down",fromOffset:t="-4px",enterDuration:e=".3s",leaveDuration:n=".3s",enterCubicBezier:i=TK,leaveCubicBezier:a=TK}={}){return[we(`&.${r}-transition-enter-from, &.${r}-transition-leave-to`,{opacity:0,transform:`translateY(${t})`}),we(`&.${r}-transition-enter-to, &.${r}-transition-leave-from`,{opacity:1,transform:"translateY(0)"}),we(`&.${r}-transition-leave-active`,{transition:`opacity ${n} ${a}, transform ${n} ${a}`}),we(`&.${r}-transition-enter-active`,{transition:`opacity ${e} ${i}, transform ${e} ${i}`})]}var hYe=ne("form-item",{display:"grid",lineHeight:"var(--line-height)"},[ne("form-item-label",`
 grid-area: label;
 align-items: center;
 line-height: 1.25;
 text-align: var(--label-text-align);
 font-size: var(--label-font-size);
 height: var(--label-height);
 padding: var(--label-padding);
 color: var(--label-text-color);
 transition: color .3s var(--bezier);
 box-sizing: border-box;
 `,[xe("asterisk",`
 color: var(--asterisk-color);
 transition: color .3s var(--bezier);
 `)]),ne("form-item-blank",{gridArea:"blank",minHeight:"var(--blank-height)"}),Pe("left-labelled",`
 grid-template-areas:
 "label blank"
 "label feedback";
 grid-template-columns: auto minmax(0, 1fr);
 `,[ne("form-item-label",`
 height: var(--blank-height);
 line-height: var(--blank-height);
 box-sizing: border-box;
 white-space: nowrap;
 flex-shrink: 0;
 flex-grow: 0;
 `)]),Pe("top-labelled",`
 grid-template-areas:
 "label"
 "blank"
 "feedback";
 grid-template-rows: var(--label-height) 1fr;
 grid-template-columns: minmax(0, 100%);
 `,[Pe("no-label",`
 grid-template-areas:
 "blank"
 "feedback";
 grid-template-rows: 1fr;
 `),ne("form-item-label",{display:"flex",alignItems:"flex-end",justifyContent:"var(--label-text-align)"})]),ne("form-item-blank",`
 box-sizing: border-box;
 display: flex;
 align-items: center;
 position: relative;
 `),ne("form-item-feedback-wrapper",`
 grid-area: feedback;
 box-sizing: border-box;
 min-height: var(--feedback-height);
 font-size: var(--feedback-font-size);
 padding: var(--feedback-padding);
 line-height: 1.25;
 transform-origin: top left;
 `,[ne("form-item-feedback",{transition:"color .3s var(--bezier)",color:"var(--feedback-text-color)"},[Pe("warning",{color:"var(--feedback-text-color-warning)"}),Pe("error",{color:"var(--feedback-text-color-error)"}),dYe({fromOffset:"-3px",enterDuration:".3s",leaveDuration:".2s"})])])]),AK=globalThis&&globalThis.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(r,t||[])).next())})};const vYe=Object.assign(Object.assign({},rr.props),{label:String,labelWidth:[Number,String],labelStyle:[String,Object],labelAlign:String,labelPlacement:String,path:String,first:Boolean,rulePath:String,required:Boolean,showRequireMark:{type:Boolean,default:void 0},requireMarkPlacement:String,showFeedback:{type:Boolean,default:void 0},rule:[Object,Array],size:String,ignorePathChange:Boolean,validationStatus:String,feedback:String,showLabel:{type:Boolean,default:void 0}});function kK(r,t){return(...e)=>{var n;try{const i=r(...e);return!t&&(typeof i=="boolean"||i instanceof Error||Array.isArray(i))||((n=i)===null||n===void 0?void 0:n.then)?i:(i===void 0||Zl("form-item/validate",`You return a ${typeof i} typed value in the validator method, which is not recommended. Please use `+(t?"`Promise`":"`boolean`, `Error` or `Promise`")+" typed value instead."),!0)}catch(i){Zl("form-item/validate","An error is catched in the validation, so the validation won't be done. Your callback in `validate` method of `n-form` or `n-form-item` won't be called in this validation."),console.error(i);return}}}var Pdt=mt({name:"FormItem",props:vYe,setup(r){h8e(xK,"formItems",Ht(r,"path"));const{mergedClsPrefixRef:t}=pn(r),e=nr(A0,null),n=lYe(r),i=uYe(r),{validationErrored:a}=i,{mergedRequired:o,mergedRules:s}=cYe(r),{mergedSize:l}=n,{mergedLabelPlacement:u,mergedLabelAlign:c}=i,f=ke([]),d=ke(_p()),h=Q(()=>{const{feedback:_}=r;return _!=null?!0:f.value.length}),v=e?Ht(e,"disabled"):ke(!1),p=rr("Form","FormItem",hYe,bK,r,t);nn(Ht(r,"path"),()=>{r.ignorePathChange||g()});function g(){f.value=[],a.value=!1,r.feedback&&(d.value=_p())}function m(){S("blur")}function y(){S("change")}function b(){S("focus")}function x(){S("input")}function w(_,T){return AK(this,void 0,void 0,function*(){let E,k,I,P;return typeof _=="string"?(E=_,k=T):_!==null&&typeof _=="object"&&(E=_.trigger,k=_.callback,I=_.shouldRuleBeApplied,P=_.options),yield new Promise((F,$)=>{S(E,I,P).then(({valid:R,errors:L})=>{R?(k&&k(),F()):(k&&k(L),$(L))})})})}const S=(_=null,T=()=>!0,E={suppressWarning:!0})=>AK(this,void 0,void 0,function*(){const{path:k}=r;E?E.first||(E.first=r.first):E={};const{value:I}=s,P=e?II(e.model,k,null):void 0,F=(_?I.filter(L=>Array.isArray(L.trigger)?L.trigger.includes(_):L.trigger===_):I).filter(T).map(L=>{const O=Object.assign({},L);return O.validator&&(O.validator=kK(O.validator,!1)),O.asyncValidator&&(O.asyncValidator=kK(O.asyncValidator,!0)),O});if(!F.length)return yield Promise.resolve({valid:!0});const $=k!=null?k:"__n_no_path__",R=new P0({[$]:F});return yield new Promise(L=>{R.validate({[$]:P},E,(O,B)=>{(O==null?void 0:O.length)?(f.value=O.map(U=>(U==null?void 0:U.message)||""),a.value=!0,L({valid:!1,errors:O})):(g(),L({valid:!0}))})})});Qr(xI,{path:Ht(r,"path"),disabled:v,mergedSize:n.mergedSize,restoreValidation:g,handleContentBlur:m,handleContentChange:y,handleContentFocus:b,handleContentInput:x});const C={validate:w,restoreValidation:g,internalValidate:S};return Object.assign(Object.assign(Object.assign(Object.assign({mergedClsPrefix:t,mergedRequired:o,hasFeedback:h,feedbackId:d,explains:f},i),n),C),{cssVars:Q(()=>{var _;const{value:T}=l,{value:E}=u,k=E==="top"?"vertical":"horizontal",{common:{cubicBezierEaseInOut:I},self:{labelTextColor:P,asteriskColor:F,lineHeight:$,feedbackTextColor:R,feedbackTextColorWarning:L,feedbackTextColorError:O,feedbackPadding:B,[Gt("labelHeight",T)]:U,[Gt("blankHeight",T)]:W,[Gt("feedbackFontSize",T)]:X,[Gt("feedbackHeight",T)]:ie,[Gt("labelPadding",k)]:q,[Gt("labelTextAlign",k)]:j,[Gt(Gt("labelFontSize",E),T)]:fe}}=p.value;let se=(_=c.value)!==null&&_!==void 0?_:j;return E==="top"&&(se=se==="right"?"flex-end":"flex-start"),{"--bezier":I,"--line-height":$,"--blank-height":W,"--label-font-size":fe,"--label-text-align":se,"--label-height":U,"--label-padding":q,"--asterisk-color":F,"--label-text-color":P,"--feedback-padding":B,"--feedback-font-size":X,"--feedback-height":ie,"--feedback-text-color":R,"--feedback-text-color-warning":L,"--feedback-text-color-error":O}})})},render(){const{$slots:r,mergedClsPrefix:t,mergedShowLabel:e,mergedShowRequireMark:n,mergedRequireMarkPlacement:i}=this;return M("div",{class:[`${t}-form-item`,`${t}-form-item--${this.mergedSize}-size`,`${t}-form-item--${this.mergedLabelPlacement}-labelled`,!e&&`${t}-form-item--no-label`],style:this.cssVars},e&&(this.label||r.label)?M("label",{class:`${t}-form-item-label`,style:this.mergedLabelStyle},i!=="left"?Jr(r,"label",void 0,()=>[this.label]):null,(n!==void 0?n:this.mergedRequired)?M("span",{class:`${t}-form-item-label__asterisk`},i!=="left"?"\xA0*":"*\xA0"):null,i==="left"?Jr(r,"label",void 0,()=>[this.label]):null):null,M("div",{class:[`${t}-form-item-blank`,this.mergedValidationStatus&&`${t}-form-item-blank--${this.mergedValidationStatus}`]},r),this.mergedShowFeedback?M("div",{key:this.feedbackId,class:`${t}-form-item-feedback-wrapper`},M(pa,{name:"fade-down-transition",mode:"out-in"},{default:()=>{const a=M(fYe,{clsPrefix:t,explains:this.explains,feedback:this.feedback}),{hasFeedback:o,mergedValidationStatus:s}=this;return o?s==="warning"?M("div",{key:"controlled-warning",class:`${t}-form-item-feedback ${t}-form-item-feedback--warning`},a):s==="error"?M("div",{key:"controlled-error",class:`${t}-form-item-feedback ${t}-form-item-feedback--error`},a):s==="success"?M("div",{key:"controlled-success",class:`${t}-form-item-feedback ${t}-form-item-feedback--success`},a):M("div",{key:"controlled-default",class:`${t}-form-item-feedback`},a):null}})):null)}});const pYe=r=>{const{baseColor:t,textColor2:e,bodyColor:n,cardColor:i,dividerColor:a,actionColor:o,scrollbarColor:s,scrollbarColorHover:l,invertedColor:u}=r;return{textColor:e,textColorInverted:"#FFF",color:n,colorEmbedded:o,headerColor:i,headerColorInverted:u,footerColor:o,footerColorInverted:u,headerBorderColor:a,headerBorderColorInverted:u,footerBorderColor:a,footerBorderColorInverted:u,siderBorderColor:a,siderBorderColorInverted:u,siderColor:i,siderColorInverted:u,siderToggleButtonBorder:`1px solid ${a}`,siderToggleButtonColor:t,siderToggleButtonIconColor:e,siderToggleButtonIconColorInverted:e,siderToggleBarColor:Si(n,s),siderToggleBarColorHover:Si(n,l),__invertScrollbar:"true"}},gYe=ro({name:"Layout",common:Bn,peers:{Scrollbar:Xu},self:pYe});var MK=gYe,mYe=ne("layout",`
 color: var(--text-color);
 background-color: var(--color);
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 flex: auto;
 overflow: hidden;
 transition:
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier),
 color .3s var(--bezier);
`,[ne("layout-scroll-container",`
 overflow-x: hidden;
 box-sizing: border-box;
 height: 100%;
 `),Pe("absolute-positioned",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]);const IK=Symbol("layoutSiderInjection"),PK={type:String,default:"static"},yYe={embedded:Boolean,position:PK,nativeScrollbar:{type:Boolean,default:!0},scrollbarProps:Object,onScroll:Function,contentStyle:{type:[String,Object],default:""},hasSider:Boolean,siderPlacement:{type:String,default:"left"}},DK=Symbol("layout");function bYe(r){return mt({name:r?"LayoutContent":"Layout",props:Object.assign(Object.assign({},rr.props),yYe),setup(t){const e=ke(null),n=ke(null),{mergedClsPrefixRef:i}=pn(t),a=rr("Layout","Layout",mYe,MK,t,i);function o(u,c){if(t.nativeScrollbar){const{value:f}=e;f&&(c===void 0?f.scrollTo(u):f.scrollTo(u,c))}else{const{value:f}=n;f&&f.scrollTo(u,c)}}Qr(DK,t);const s={display:"flex",flexWrap:"nowrap",width:"100%",flexDirection:"row"},l={scrollTo:o};return Object.assign({mergedClsPrefix:i,scrollableElRef:e,scrollbarInstRef:n,hasSiderStyle:s,mergedTheme:a,cssVars:Q(()=>{const{common:{cubicBezierEaseInOut:u},self:c}=a.value;return{"--bezier":u,"--color":t.embedded?c.colorEmbedded:c.color,"--text-color":c.textColor}})},l)},render(){const{mergedClsPrefix:t,hasSider:e}=this,n=e?this.hasSiderStyle:void 0,i=[r&&`${t}-layout-content`,`${t}-layout`,`${t}-layout--${this.position}-positioned`];return M("div",{class:i,style:this.cssVars},this.nativeScrollbar?M("div",{ref:"scrollableElRef",class:`${t}-layout-scroll-container`,style:[this.contentStyle,n],onScroll:this.onScroll},this.$slots):M(ms,Object.assign({},this.scrollbarProps,{onScroll:this.onScroll,ref:"scrollbarInstRef",theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,contentStyle:[this.contentStyle,n]}),this.$slots))}})}var Ddt=bYe(!1),xYe=ne("layout-sider",`
 flex-shrink: 0;
 box-sizing: border-box;
 position: relative;
 z-index: 1;
 color: var(--text-color);
 transition:
 color .3s var(--bezier),
 border-color .3s var(--bezier),
 min-width .3s var(--bezier),
 max-width .3s var(--bezier),
 transform .3s var(--bezier),
 background-color .3s var(--bezier);
 background-color: var(--color);
 display: flex;
 justify-content: flex-end;
`,[Pe("right-placement",`
 justify-content: flex-start;
 `,[Pe("bordered",`
 border-right: none;
 border-left: 1px solid var(--border-color);
 `),Pe("collapsed",[ne("layout-toggle-button",[ne("base-icon",`
 transform: rotate(180deg);
 `)]),ne("layout-toggle-bar",[we("&:hover",[xe("top",{transform:"rotate(-12deg) scale(1.15) translateY(-2px)"}),xe("bottom",{transform:"rotate(12deg) scale(1.15) translateY(2px)"})])])]),ne("layout-toggle-button",`
 left: 0;
 transform: translateX(-50%) translateY(-50%);
 `,[ne("base-icon",`
 transform: rotate(0);
 `)]),ne("layout-toggle-bar",`
 left: -28px;
 transform: rotate(180deg);
 `,[we("&:hover",[xe("top",{transform:"rotate(12deg) scale(1.15) translateY(-2px)"}),xe("bottom",{transform:"rotate(-12deg) scale(1.15) translateY(2px)"})])])]),Pe("collapsed",[ne("layout-toggle-bar",[we("&:hover",[xe("top",{transform:"rotate(-12deg) scale(1.15) translateY(-2px)"}),xe("bottom",{transform:"rotate(12deg) scale(1.15) translateY(2px)"})])]),ne("layout-toggle-button",[ne("base-icon",`
 transform: rotate(0);
 `)])]),ne("layout-toggle-button",`
 transition:
 color .3s var(--bezier),
 right .3s var(--bezier),
 left .3s var(--bezier),
 border-color .3s var(--bezier),
 background-color .3s var(--bezier);
 cursor: pointer;
 width: 24px;
 height: 24px;
 position: absolute;
 top: 50%;
 right: 0;
 border-radius: 50%;
 display: flex;
 align-items: center;
 justify-content: center;
 font-size: 18px;
 color: var(--toggle-button-icon-color);
 border: var(--toggle-button-border);
 background-color: var(--toggle-button-color);
 box-shadow: 0 2px 4px 0px rgba(0, 0, 0, .06);
 transform: translateX(50%) translateY(-50%);
 `,[ne("base-icon",`
 transition: transform .3s var(--bezier);
 transform: rotate(180deg);
 `)]),ne("layout-toggle-bar",`
 cursor: pointer;
 height: 72px;
 width: 32px;
 position: absolute;
 top: calc(50% - 36px);
 right: -28px;
 `,[xe("top, bottom",`
 position: absolute;
 width: 4px;
 border-radius: 2px;
 height: 38px;
 left: 14px;
 transition: 
 background-color .3s var(--bezier),
 transform .3s var(--bezier);
 `),xe("bottom",`
 position: absolute;
 top: 34px;
 `),we("&:hover",[xe("top",{transform:"rotate(12deg) scale(1.15) translateY(-2px)"}),xe("bottom",{transform:"rotate(-12deg) scale(1.15) translateY(2px)"})]),xe("top, bottom",{backgroundColor:"var(--toggle-bar-color)"}),we("&:hover",[xe("top, bottom",{backgroundColor:"var(--toggle-bar-color-hover)"})])]),xe("border",`
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 width: 1px;
 transition: background-color .3s var(--bezier);
 `),ne("layout-sider-scroll-container",`
 flex-grow: 1;
 flex-shrink: 0;
 box-sizing: border-box;
 height: 100%;
 opacity: 0;
 transition: opacity .3s var(--bezier);
 max-width: 100%;
 `),Pe("show-content",[ne("layout-sider-scroll-container",{opacity:1})]),Pe("absolute-positioned",`
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 `),Pe("bordered",`
 border-right: 1px solid var(--border-color);
 `)]),wYe=mt({name:"LayoutToggleButton",props:{clsPrefix:{type:String,required:!0},onClick:Function},render(){const{clsPrefix:r}=this;return M("div",{class:`${r}-layout-toggle-button`,onClick:this.onClick},M(si,{clsPrefix:r},{default:()=>M(jI,null)}))}}),SYe=mt({props:{clsPrefix:{type:String,required:!0},onClick:Function},render(){const{clsPrefix:r}=this;return M("div",{onClick:this.onClick,class:`${r}-layout-toggle-bar`},M("div",{class:`${r}-layout-toggle-bar__top`}),M("div",{class:`${r}-layout-toggle-bar__bottom`}))}});const CYe={position:PK,bordered:Boolean,collapsedWidth:{type:Number,default:48},width:{type:[Number,String],default:272},contentStyle:{type:[String,Object],default:""},collapseMode:{type:String,default:"transform"},collapsed:{type:Boolean,default:void 0},defaultCollapsed:Boolean,showCollapsedContent:{type:Boolean,default:!0},showTrigger:{type:[Boolean,String],default:!1},nativeScrollbar:{type:Boolean,default:!0},inverted:Boolean,scrollbarProps:Object,triggerStyle:[String,Object],collapsedTriggerStyle:[String,Object],"onUpdate:collapsed":[Function,Array],onUpdateCollapsed:[Function,Array],onAfterEnter:Function,onAfterLeave:Function,onExpand:[Function,Array],onCollapse:[Function,Array],onScroll:Function};var Rdt=mt({name:"LayoutSider",props:Object.assign(Object.assign({},rr.props),CYe),setup(r){const t=nr(DK),e=ke(null),n=ke(null),i=Q(()=>ca(l.value?r.collapsedWidth:r.width)),a=Q(()=>r.collapseMode!=="transform"?{}:{minWidth:ca(r.width)}),o=Q(()=>t?t.siderPlacement:"left"),s=ke(r.defaultCollapsed),l=ri(Ht(r,"collapsed"),s);function u(p,g){if(r.nativeScrollbar){const{value:m}=e;m&&(g===void 0?m.scrollTo(p):m.scrollTo(p,g))}else{const{value:m}=n;m&&m.scrollTo(p,g)}}function c(){const{"onUpdate:collapsed":p,onUpdateCollapsed:g,onExpand:m,onCollapse:y}=r,{value:b}=l;g&&pt(g,!b),p&&pt(p,!b),s.value=!b,b?m&&pt(m):y&&pt(y)}Qr(IK,{collapsedRef:l,collapseModeRef:Ht(r,"collapseMode")});const{mergedClsPrefixRef:f}=pn(r),d=rr("Layout","LayoutSider",xYe,MK,r,f);function h(p){var g,m;p.propertyName==="max-width"&&(l.value?(g=r.onAfterLeave)===null||g===void 0||g.call(r):(m=r.onAfterEnter)===null||m===void 0||m.call(r))}const v={scrollTo:u};return Object.assign({scrollableElRef:e,scrollbarInstRef:n,mergedClsPrefix:f,mergedTheme:d,styleMaxWidth:i,mergedCollapsed:l,scrollContainerStyle:a,siderPlacement:o,handleTransitionend:h,handleTriggerClick:c,cssVars:Q(()=>{const{common:{cubicBezierEaseInOut:p},self:g}=d.value,{siderToggleButtonColor:m,siderToggleButtonBorder:y,siderToggleBarColor:b,siderToggleBarColorHover:x}=g,w={"--bezier":p,"--toggle-button-color":m,"--toggle-button-border":y,"--toggle-bar-color":b,"--toggle-bar-color-hover":x};return r.inverted?(w["--color"]=g.siderColorInverted,w["--text-color"]=g.textColorInverted,w["--border-color"]=g.siderBorderColorInverted,w["--toggle-button-icon-color"]=g.siderToggleButtonIconColorInverted,w.__invertScrollbar=g.__invertScrollbar):(w["--color"]=g.siderColor,w["--text-color"]=g.textColor,w["--border-color"]=g.siderBorderColor,w["--toggle-button-icon-color"]=g.siderToggleButtonIconColor),w})},v)},render(){const{mergedClsPrefix:r,mergedCollapsed:t,showTrigger:e}=this;return M("aside",{class:[`${r}-layout-sider`,`${r}-layout-sider--${this.position}-positioned`,`${r}-layout-sider--${this.siderPlacement}-placement`,this.bordered&&`${r}-layout-sider--bordered`,t&&`${r}-layout-sider--collapsed`,(!t||this.showCollapsedContent)&&`${r}-layout-sider--show-content`],onTransitionend:this.handleTransitionend,style:[this.cssVars,{maxWidth:this.styleMaxWidth,width:ca(this.width)}]},this.nativeScrollbar?M("div",{class:`${r}-layout-sider-scroll-container`,onScroll:this.onScroll,style:[this.scrollContainerStyle,this.contentStyle,{overflow:"auto"}],ref:"scrollableElRef"},this.$slots):M(ms,Object.assign({},this.scrollbarProps,{onScroll:this.onScroll,ref:"scrollbarInstRef",style:this.scrollContainerStyle,contentStyle:this.contentStyle,theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,builtinThemeOverrides:this.inverted&&this.cssVars.__invertScrollbar==="true"?{colorHover:"rgba(255, 255, 255, .4)",color:"rgba(255, 255, 255, .3)"}:void 0}),this.$slots),e?e==="bar"?M(SYe,{clsPrefix:r,style:t?this.collapsedTriggerStyle:this.triggerStyle,onClick:this.handleTriggerClick}):M(wYe,{clsPrefix:r,style:t?this.collapsedTriggerStyle:this.triggerStyle,onClick:this.handleTriggerClick}):null)}});const EYe=r=>{const{textColor2:t,cardColor:e,modalColor:n,popoverColor:i,dividerColor:a,borderRadius:o,fontSize:s}=r;return{textColor:t,color:e,colorModal:n,colorPopover:i,borderColor:a,borderColorModal:Si(n,a),borderColorPopover:Si(i,a),borderRadius:o,fontSize:s}},_Ye={name:"List",common:Bn,self:EYe};var TYe=_Ye,AYe=we([ne("list",`
 --merged-border-color: var(--border-color);
 --merged-color: var(--color)
 font-size: var(--font-size);
 transition:
 background-color .3s var(--bezier),
 color .3s var(--bezier),
 border-color .3s var(--bezier);
 padding: 0;
 list-style-type: none;
 color: var(--text-color);
 background-color: var(--merged-color);
 `,[Pe("bordered",`
 border-radius: var(--border-radius);
 border: 1px solid var(--merged-border-color);
 `,[ne("list-item",`
 padding: 12px 20px;
 `,[we("&:not(:last-child)",`
 border-bottom: 1px solid var(--merged-border-color);
 `)]),xe("header, footer",`
 padding: 12px 20px;
 `,[we("&:not(:last-child)",`
 border-bottom: 1px solid var(--merged-border-color);
 `)])]),xe("header, footer",`
 padding: 12px 0;
 box-sizing: border-box;
 transition: border-color .3s var(--bezier);
 `,[we("&:not(:last-child)",`
 border-bottom: 1px solid var(--merged-border-color);
 `)]),ne("list-item",`
 padding: 12px 0; 
 box-sizing: border-box;
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition: border-color .3s var(--bezier);
 `,[xe("prefix",`
 margin-right: 20px;
 flex: 0;
 `),xe("suffix",`
 margin-left: 20px;
 flex: 0;
 `),xe("main",`
 flex: 1;
 `),we("&:not(:last-child)",`
 border-bottom: 1px solid var(--merged-border-color);
 `)])]),d0(ne("list",`
 --merged-color: var(--color-modal);
 --merged-border-color: var(--border-color-modal);
 `)),WS(ne("list",`
 --merged-color: var(--color-popover);
 --merged-border-color: var(--border-color-popover);
 `))]);const kYe=Object.assign(Object.assign({},rr.props),{size:{type:String,default:"medium"},bordered:{type:Boolean,default:!1}}),RK=Symbol("list");var Odt=mt({name:"List",props:kYe,setup(r){const{mergedClsPrefixRef:t}=pn(r),e=rr("List","List",AYe,TYe,r,t);return Qr(RK,{mergedClsPrefixRef:t}),{mergedClsPrefix:t,cssVars:Q(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:i,textColor:a,color:o,colorModal:s,colorPopover:l,borderColor:u,borderColorModal:c,borderColorPopover:f,borderRadius:d}}=e.value;return{"--font-size":i,"--bezier":n,"--text-color":a,"--color":o,"--border-radius":d,"--border-color":u,"--border-color-modal":c,"--border-color-popover":f,"--color-modal":s,"--color-popover":l}})}},render(){const{$slots:r,mergedClsPrefix:t}=this;return M("ul",{class:[`${t}-list`,this.bordered&&`${t}-list--bordered`],style:this.cssVars},r.header?M("div",{class:`${t}-list__header`},Jr(r,"header")):null,Jr(r,"default"),r.footer?M("div",{class:`${t}-list__footer`},Jr(r,"footer")):null)}}),Ldt=mt({name:"ListItem",setup(){const r=nr(RK,null);return r||qS("list-item","`n-list-item` must be placed in `n-list`."),{mergedClsPrefix:r.mergedClsPrefixRef}},render(){const{$slots:r,mergedClsPrefix:t}=this;return M("li",{class:`${t}-list-item`},r.prefix?M("div",{class:`${t}-list-item__prefix`},Jr(r,"prefix")):null,r.default?M("div",{class:`${t}-list-item__main`},r):null,r.suffix?M("div",{class:`${t}-list-item__suffix`},Jr(r,"suffix")):null)}});const YP={internalKey:{type:[String,Number],required:!0},root:Boolean,isGroup:Boolean,level:{type:Number,required:!0},title:[String,Function],extra:[String,Function]};var OK=mt({name:"MenuOptionContent",props:{collapsed:Boolean,disabled:Boolean,title:[String,Function],icon:Function,extra:[String,Function],showArrow:Boolean,childActive:Boolean,hover:Boolean,paddingLeft:Number,maxIconSize:{type:Number,required:!0},activeIconSize:{type:Number,required:!0},iconMarginRight:{type:Number,required:!0},clsPrefix:{type:String,required:!0},onClick:Function,tmNode:{type:Object,required:!0}},setup(r){const{props:t}=nr(D0);return{menuProps:t,style:Q(()=>{const{paddingLeft:e}=r;return{paddingLeft:e&&`${e}px`}}),iconStyle:Q(()=>{const{maxIconSize:e,activeIconSize:n,iconMarginRight:i}=r;return{width:`${e}px`,height:`${e}px`,fontSize:`${n}px`,marginRight:`${i}px`}})}},render(){const{clsPrefix:r,tmNode:t,menuProps:{renderIcon:e,renderLabel:n,renderExtra:i,expandIcon:a}}=this,o=e?e(t.rawNode):Hn(this.icon);return M("div",{onClick:this.onClick,role:"none",class:[`${r}-menu-item-content`,{[`${r}-menu-item-content--collapsed`]:this.collapsed,[`${r}-menu-item-content--child-active`]:this.childActive,[`${r}-menu-item-content--disabled`]:this.disabled,[`${r}-menu-item-content--hover`]:this.hover}],style:this.style},o&&M("div",{class:`${r}-menu-item-content__icon`,style:this.iconStyle,role:"none"},[o]),M("div",{class:`${r}-menu-item-content-header`,role:"none"},n?n(t.rawNode):Hn(this.title),this.extra||i?M("span",{class:`${r}-menu-item-content-header__extra`}," ",i?i(t.rawNode):Hn(this.extra)):null),this.showArrow?M(si,{ariaHidden:!0,class:`${r}-menu-item-content__arrow`,clsPrefix:r},{default:()=>a?a(t.rawNode):M(vUe,null)}):null)}});const LK=Object.assign(Object.assign({},YP),{rawNodes:{type:Array,default:()=>[]},tmNodes:{type:Array,default:()=>[]},tmNode:{type:Object,required:!0},disabled:{type:Boolean,default:!1},icon:Function,onClick:Function}),XP=Symbol("submenu");var MYe=mt({name:"Submenu",props:LK,setup(r){const t=qP(r),{NMenu:e,NSubmenu:n}=t,{props:i,mergedCollapsedRef:a}=e,o=Q(()=>{const{disabled:f}=r;return(n==null?void 0:n.mergedDisabledRef.value)||i.disabled?!0:f}),s=ke(!1);Qr(XP,{paddingLeftRef:t.paddingLeft,mergedDisabledRef:o}),Qr(KP,null);function l(){const{onClick:f}=r;f&&f()}function u(){o.value||(a.value||e.toggleExpand(r.internalKey),l())}function c(f){s.value=f}return{menuProps:i,doSelect:e.doSelect,inverted:e.invertedRef,isHorizontal:e.isHorizontalRef,mergedClsPrefix:e.mergedClsPrefixRef,maxIconSize:t.maxIconSize,activeIconSize:t.activeIconSize,iconMarginRight:t.iconMarginRight,dropdownPlacement:t.dropdownPlacement,dropdownShow:s,paddingLeft:t.paddingLeft,mergedDisabled:o,mergedValue:e.mergedValueRef,childActive:On(()=>e.activePathRef.value.includes(r.internalKey)),collapsed:Q(()=>i.mode==="horizontal"?!1:a.value?!0:!e.mergedExpandedKeysRef.value.includes(r.internalKey)),dropdownEnabled:Q(()=>!o.value&&(i.mode==="horizontal"||a.value)),handlePopoverShowChange:c,handleClick:u}},render(){var r;const{mergedClsPrefix:t,menuProps:{renderIcon:e,renderLabel:n}}=this,i=()=>{const{isHorizontal:o,paddingLeft:s,collapsed:l,mergedDisabled:u,maxIconSize:c,activeIconSize:f,title:d,childActive:h,icon:v,handleClick:p,dropdownShow:g,iconMarginRight:m,tmNode:y}=this;return M(OK,{tmNode:y,paddingLeft:s,collapsed:l,disabled:u,iconMarginRight:m,maxIconSize:c,activeIconSize:f,title:d,showArrow:!o,childActive:h,clsPrefix:t,icon:v,hover:g,onClick:p})},a=()=>M(YI,null,{default:()=>{const{tmNodes:o,collapsed:s}=this;return s?null:M("div",{class:`${t}-submenu-children`,role:"menu"},o.map(l=>ZP(l,this.menuProps)))}});return this.root?M(nK,Object.assign({},(r=this.menuProps)===null||r===void 0?void 0:r.dropdownProps,{builtinThemeOverrides:{fontSizeLarge:"14px",optionIconSizeLarge:"18px"},value:this.mergedValue,size:"large",trigger:"hover",disabled:!this.dropdownEnabled,placement:this.dropdownPlacement,keyField:this.menuProps.keyField,labelField:this.menuProps.labelField,childrenField:this.menuProps.childrenField,onUpdateShow:this.handlePopoverShowChange,options:this.rawNodes,onSelect:this.doSelect,inverted:this.inverted,renderIcon:e,renderLabel:n}),{default:()=>M("div",{class:`${t}-submenu`,role:"menuitem","aria-expanded":!this.collapsed},i(),this.isHorizontal?null:a())}):M("div",{class:`${t}-submenu`,role:"menuitem","aria-expanded":!this.collapsed},i(),a())}});const kC=8;function qP(r){const t=nr(D0),{props:e,mergedCollapsedRef:n}=t,i=nr(XP,null),a=nr(KP,null),o=Q(()=>e.mode==="horizontal"),s=Q(()=>o.value?e.dropdownPlacement:"tmNodes"in r?"right-start":"right"),l=Q(()=>{var d;return Math.max((d=e.collapsedIconSize)!==null&&d!==void 0?d:e.iconSize,e.iconSize)}),u=Q(()=>{var d;return!o.value&&r.root&&n.value&&(d=e.collapsedIconSize)!==null&&d!==void 0?d:e.iconSize}),c=Q(()=>{if(o.value)return;const{collapsedWidth:d,indent:h,rootIndent:v}=e,{root:p,isGroup:g}=r,m=v===void 0?h:v;if(p)return n.value?d/2-l.value/2:m;if(a)return h/2+a.paddingLeftRef.value;if(i)return(g?h/2:h)+i.paddingLeftRef.value}),f=Q(()=>{const{collapsedWidth:d,indent:h,rootIndent:v}=e,{value:p}=l,{root:g}=r;return o.value||!g||!n.value?kC:(v===void 0?h:v)+p+kC-(d+p)/2});return{dropdownPlacement:s,activeIconSize:u,maxIconSize:l,paddingLeft:c,iconMarginRight:f,NMenu:t,NSubmenu:i}}const FK=Object.assign(Object.assign({},YP),{tmNodes:{type:Array,required:!0}}),KP=Symbol("menu-item-group");var IYe=mt({name:"MenuOptionGroup",props:FK,setup(r){Qr(XP,null);const t=qP(r);Qr(KP,{paddingLeftRef:t.paddingLeft});const{mergedClsPrefixRef:e,props:n}=nr(D0);return function(){const{value:i}=e,a=t.paddingLeft.value;return M("div",{class:`${i}-menu-item-group`,role:"group"},M("span",{class:`${i}-menu-item-group-title`,style:a!==void 0?`padding-left: ${a}px;`:void 0},Hn(r.title),r.extra?M(Fi,null," ",Hn(r.extra)):null),M("div",null,r.tmNodes.map(o=>ZP(o,n))))}}});const NK=Object.assign(Object.assign({},YP),{tmNode:{type:Object,required:!0},disabled:Boolean,icon:Function,onClick:Function});var PYe=mt({name:"MenuOption",props:NK,setup(r){const t=qP(r),{NSubmenu:e,NMenu:n}=t,{props:i,mergedClsPrefixRef:a,mergedCollapsedRef:o}=n,s=e?e.mergedDisabledRef:{value:!1},l=Q(()=>s.value||r.disabled);function u(f){const{onClick:d}=r;d&&d(f)}function c(f){l.value||(n.doSelect(r.internalKey,r.tmNode.rawNode),u(f))}return{mergedClsPrefix:a,dropdownPlacement:t.dropdownPlacement,paddingLeft:t.paddingLeft,iconMarginRight:t.iconMarginRight,maxIconSize:t.maxIconSize,activeIconSize:t.activeIconSize,mergedTheme:n.mergedThemeRef,menuProps:i,dropdownEnabled:On(()=>r.root&&o.value&&i.mode!=="horizontal"&&!l.value),selected:Q(()=>n.mergedValueRef.value===r.internalKey),mergedDisabled:l,handleClick:c}},render(){const{mergedClsPrefix:r,mergedTheme:t,tmNode:e,menuProps:{renderLabel:n}}=this;return M("div",{role:"menuitem",class:[`${r}-menu-item`,this.selected&&`${r}-menu-item--selected`,this.mergedDisabled&&`${r}-menu-item--disabled`]},M(Vq,{theme:t.peers.Tooltip,themeOverrides:t.peerOverrides.Tooltip,trigger:"hover",placement:this.dropdownPlacement,disabled:!this.dropdownEnabled||this.title===void 0,internalExtraClass:["menu-tooltip"]},{default:()=>n?n(e.rawNode):Hn(this.title),trigger:()=>M(OK,{tmNode:e,clsPrefix:r,paddingLeft:this.paddingLeft,iconMarginRight:this.iconMarginRight,maxIconSize:this.maxIconSize,activeIconSize:this.activeIconSize,title:this.title,extra:this.extra,disabled:this.mergedDisabled,icon:this.icon,onClick:this.handleClick})}))}}),DYe=mt({name:"MenuDivider",setup(){const r=nr(D0),{mergedClsPrefixRef:t,isHorizontalRef:e}=r;return()=>e.value?null:M("div",{class:`${t.value}-menu-divider`})}});const RYe=ju(FK),OYe=ju(NK),LYe=ju(LK);function FYe(r){return r.type==="divider"||r.type==="render"}function NYe(r){return r.type==="divider"}function ZP(r,t){const{rawNode:e}=r;if(FYe(e))return NYe(e)?M(DYe,Object.assign({key:r.key},e.props)):void 0;const{labelField:n}=t,{key:i,level:a,isGroup:o}=r,s=Object.assign(Object.assign({},e),{title:e.title||e[n],extra:e.titleExtra||e.extra,key:i,internalKey:i,level:a,root:a===0,isGroup:o});return r.children?r.isGroup?M(IYe,Kl(s,RYe,{tmNodes:r.children,key:i})):M(MYe,Kl(s,LYe,{key:i,rawNodes:e[t.childrenField],tmNodes:r.children,tmNode:r})):M(PYe,Kl(s,OYe,{key:i,tmNode:r}))}function BYe(r,t,e){return{itemTextColorInverted:r,itemTextColorHoverInverted:t,itemTextColorChildActiveInverted:t,itemTextColorActiveInverted:t,itemIconColorInverted:r,itemIconColorHoverInverted:t,itemIconColorActiveInverted:t,itemIconColorChildActiveInverted:t,itemIconColorCollapsedInverted:r,arrowColorInverted:r,arrowColorHoverInverted:t,arrowColorChildActiveInverted:t,arrowColorActiveInverted:t,groupTextColorInverted:e}}const $Ye=r=>{const{borderRadius:t,textColor3:e,primaryColor:n,textColor2:i,primaryColorHover:a,textColor1:o,fontSize:s,dividerColor:l}=r;return Object.assign({borderRadius:t,color:"#0000",groupTextColor:e,itemColorActive:qr(n,{alpha:.1}),itemColorActiveCollapsed:"#0000",itemTextColor:i,itemTextColorHover:a,itemTextColorChildActive:n,itemTextColorActive:n,itemIconColor:o,itemIconColorHover:a,itemIconColorActive:n,itemIconColorChildActive:n,itemIconColorCollapsed:o,itemHeight:"42px",arrowColor:i,arrowColorHover:a,arrowColorChildActive:n,arrowColorActive:n,colorInverted:"#0000",itemColorActiveInverted:n,itemColorActiveCollapsedInverted:n,borderColorHorizontal:"#0000",fontSize:s,dividerColor:l},BYe("#BBB","#FFF","#AAA"))},zYe=ro({name:"Menu",common:Bn,peers:{Tooltip:AP},self:$Ye});var GYe=zYe,UYe=we([ne("menu",`
 background-color: var(--color);
 color: var(--item-text-color);
 overflow: hidden;
 transition: background-color .3s var(--bezier);
 box-sizing: border-box;
 font-size: var(--font-size);
 padding-bottom: 6px;
 `,[Pe("horizontal",{display:"inline-flex",paddingBottom:0},[ne("submenu",{margin:0}),ne("menu-item",{margin:0},[we("&::before",{backgroundColor:"#0000 !important"}),Pe("selected",[ne("menu-item-content",{borderBottom:"2px solid var(--border-color-horizontal)"})])]),ne("menu-item-content",{padding:"0 20px",borderBottom:"2px solid #0000"},[Pe("child-active",{borderBottom:"2px solid var(--border-color-horizontal)"}),Cn("disabled",[BK({borderBottom:"2px solid var(--border-color-horizontal)"},null)])])]),Pe("collapsed",[ne("menu-item",[Pe("selected",[we("&::before",{backgroundColor:"var(--item-color-active-collapsed) !important"})])]),ne("menu-item-content",[ne("menu-item-content-header",{opacity:0}),xe("arrow",{opacity:0}),xe("icon",{color:"var(--item-icon-color-collapsed)"})])]),ne("menu-item",`
 transition: background-color .3s var(--bezier);
 height: var(--item-height);
 margin-top: 6px;
 position: relative;
 `,[we("&::before",`
 z-index: auto;
 content: "";
 background-color: #0000;
 position: absolute;
 left: 8px;
 right: 8px;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border-radius: var(--border-radius);
 transition: background-color .3s var(--bezier);
 `),Cn("disabled",[we("&:active::before",{backgroundColor:"var(--item-color-active)"})]),Pe("selected",[we("&::before",{backgroundColor:"var(--item-color-active)"}),ne("menu-item-content",[xe("arrow",{color:"var(--arrow-color-active)"}),xe("icon",{color:"var(--item-icon-color-active)"}),ne("menu-item-content-header",{color:"var(--item-text-color-active)"},[xe("extra",{color:"var(--item-text-color-active)"})])])])]),ne("menu-item-content",`
 box-sizing: border-box;
 line-height: 1.75;
 height: 100%;
 display: grid;
 grid-template-areas: "icon content arrow";
 grid-template-columns: auto 1fr auto;
 align-items: center;
 cursor: pointer;
 position: relative;
 z-index: auto;
 padding-right: 18px;
 transition:
 background-color .3s var(--bezier),
 padding-left .3s var(--bezier),
 border-color .3s var(--bezier);
 `,[Pe("disabled",{opacity:".45",cursor:"not-allowed"}),Pe("collapsed",[xe("arrow",{transform:"rotate(0)"})]),Pe("child-active",[ne("menu-item-content-header",{color:"var(--item-text-color-child-active)"},[xe("extra",{color:"var(--item-text-color-child-active)"})]),xe("arrow",{color:"var(--arrow-color-child-active)"}),xe("icon",{color:"var(--item-icon-color-child-active)"})]),Cn("disabled",[BK(null,[xe("arrow",{color:"var(--arrow-color-hover)"}),xe("icon",{color:"var(--item-icon-color-hover)"}),ne("menu-item-content-header",{color:"var(--item-text-color-hover)"},[xe("extra",{color:"var(--item-text-color-hover)"})])])]),xe("icon",`
 grid-area: icon;
 color: var(--item-icon-color);
 transition:
 color .3s var(--bezier),
 font-size .3s var(--bezier),
 margin-right .3s var(--bezier);
 box-sizing: content-box;
 display: inline-flex;
 align-items: center;
 justify-content: center;
 `),xe("arrow",`
 grid-area: arrow;
 font-size: 16px;
 color: var(--arrow-color);
 transform: rotate(180deg);
 opacity: 1;
 transition:
 color .3s var(--bezier),
 transform 0.2s var(--bezier),
 opacity 0.2s var(--bezier);
 `),ne("menu-item-content-header",`
 grid-area: content;
 transition:
 color .3s var(--bezier),
 opacity .3s var(--bezier);
 opacity: 1;
 white-space: nowrap;
 overflow: hidden;
 text-overflow: ellipsis;
 color: var(--item-text-color);
 `,[we("a",`
 text-decoration: none;
 color: inherit;
 `,[we("&::before",`
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),xe("extra",`
 font-size: .93em;
 color: var(--group-text-color);
 transition: color .3s var(--bezier);
 `)])]),ne("submenu",{cursor:"pointer",position:"relative",marginTop:"6px"},[ne("menu-item-content",`
 height: var(--item-height);
 `),ne("submenu-children",{overflow:"hidden",padding:0},[vP({duration:".2s"})])]),ne("menu-item-group",[ne("menu-item-group-title",`
 margin-top: 6px;
 color: var(--group-text-color);
 cursor: default;
 font-size: .93em;
 height: 36px;
 display: flex;
 align-items: center;
 transition:
 padding-left .3s var(--bezier),
 color .3s var(--bezier);
 `)])]),ne("menu-tooltip",[we("a",`
 color: inherit;
 text-decoration: none;
 `)]),ne("menu-divider",`
 transition: background-color .3s var(--bezier);
 background-color: var(--divider-color);
 height: 1px;
 margin: 6px 18px;
 `)]);function BK(r,t){return[Pe("hover",r,t),we("&:hover",r,t)]}const VYe=Object.assign(Object.assign({},rr.props),{options:{type:Array,default:()=>[]},collapsed:{type:Boolean,default:void 0},collapsedWidth:{type:Number,default:48},iconSize:{type:Number,default:20},collapsedIconSize:{type:Number,default:24},rootIndent:Number,indent:{type:Number,default:32},labelField:{type:String,default:"label"},keyField:{type:String,default:"key"},childrenField:{type:String,default:"children"},defaultExpandAll:Boolean,defaultExpandedKeys:Array,expandedKeys:Array,value:[String,Number],defaultValue:{type:[String,Number],default:null},mode:{type:String,default:"vertical"},watchProps:{type:Array,default:void 0},disabled:Boolean,inverted:Boolean,"onUpdate:expandedKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],onUpdateValue:[Function,Array],"onUpdate:value":[Function,Array],expandIcon:Function,renderIcon:Function,renderLabel:Function,renderExtra:Function,dropdownPlacement:{type:String,default:"bottom"},dropdownProps:Object,accordion:Boolean,items:Array,onOpenNamesChange:[Function,Array],onSelect:[Function,Array],onExpandedNamesChange:[Function,Array],expandedNames:Array,defaultExpandedNames:Array}),D0=Symbol("menu");var Fdt=mt({name:"Menu",props:VYe,setup(r){const{mergedClsPrefixRef:t}=pn(r),e=rr("Menu","Menu",UYe,GYe,r,t),n=nr(IK,null),i=Q(()=>{var x;const{collapsed:w}=r;if(w!==void 0)return w;if(n){const{collapseModeRef:S,collapsedRef:C}=n;if(S.value==="width")return(x=C.value)!==null&&x!==void 0?x:!1}return!1}),a=Q(()=>{const{keyField:x,childrenField:w}=r;return lh(r.items||r.options,{getChildren(S){return S[w]},getKey(S){var C;return(C=S[x])!==null&&C!==void 0?C:S.name}})}),o=Q(()=>new Set(a.value.treeNodes.map(x=>x.key))),{watchProps:s}=r,l=ke(null);(s==null?void 0:s.includes("defaultValue"))?Co(()=>{l.value=r.defaultValue}):l.value=r.defaultValue;const u=Ht(r,"value"),c=ri(u,l),f=ke([]),d=()=>{f.value=r.defaultExpandAll?a.value.getNonLeafKeys():r.defaultExpandedNames||r.defaultExpandedKeys||a.value.getPath(c.value,{includeSelf:!1}).keyPath};(s==null?void 0:s.includes("defaultExpandedKeys"))?Co(d):d();const h=XS(r,["expandedNames","expandedKeys"]),v=ri(h,f),p=Q(()=>a.value.treeNodes),g=Q(()=>a.value.getPath(c.value).keyPath);Qr(D0,{props:r,mergedCollapsedRef:i,mergedThemeRef:e,mergedValueRef:c,mergedExpandedKeysRef:v,activePathRef:g,mergedClsPrefixRef:t,isHorizontalRef:Q(()=>r.mode==="horizontal"),invertedRef:Ht(r,"inverted"),doSelect:m,toggleExpand:b});function m(x,w){const{"onUpdate:value":S,onUpdateValue:C,onSelect:_}=r;C&&pt(C,x,w),S&&pt(S,x,w),_&&pt(_,x,w),l.value=x}function y(x){const{"onUpdate:expandedKeys":w,onUpdateExpandedKeys:S,onExpandedNamesChange:C,onOpenNamesChange:_}=r;w&&pt(w,x),S&&pt(S,x),C&&pt(C,x),_&&pt(_,x),f.value=x}function b(x){const w=Array.from(v.value),S=w.findIndex(C=>C===x);if(~S)w.splice(S,1);else{if(r.accordion&&o.value.has(x)){const C=w.findIndex(_=>o.value.has(_));C>-1&&w.splice(C,1)}w.push(x)}y(w)}return{mergedClsPrefix:t,controlledExpandedKeys:h,uncontrolledExpanededKeys:f,mergedExpandedKeys:v,uncontrolledValue:l,mergedValue:c,activePath:g,tmNodes:p,mergedTheme:e,mergedCollapsed:i,cssVars:Q(()=>{const{inverted:x}=r,{common:{cubicBezierEaseInOut:w},self:S}=e.value,{borderRadius:C,borderColorHorizontal:_,fontSize:T,itemHeight:E,dividerColor:k}=S,I={"--divider-color":k,"--bezier":w,"--font-size":T,"--border-color-horizontal":_,"--border-radius":C,"--item-height":E};return x?(I["--group-text-color"]=S.groupTextColorInverted,I["--color"]=S.colorInverted,I["--item-text-color"]=S.itemTextColorInverted,I["--arrow-color"]=S.arrowColorInverted,I["--arrow-color-hover"]=S.arrowColorHoverInverted,I["--arrow-color-active"]=S.arrowColorActiveInverted,I["--arrow-color-child-active"]=S.arrowColorChildActiveInverted,I["--item-icon-color"]=S.itemIconColorInverted,I["--item-text-color-hover"]=S.itemTextColorHoverInverted,I["--item-icon-color-hover"]=S.itemIconColorHoverInverted,I["--item-text-color-active"]=S.itemTextColorActiveInverted,I["--item-icon-color-active"]=S.itemIconColorActiveInverted,I["--item-icon-color-collapsed"]=S.itemIconColorCollapsedInverted,I["--item-color-active"]=S.itemColorActiveInverted,I["--item-color-active-collapsed"]=S.itemColorActiveCollapsedInverted,I["--item-text-color-child-active"]=S.itemTextColorChildActiveInverted,I["--item-icon-color-child-active"]=S.itemIconColorChildActiveInverted):(I["--group-text-color"]=S.groupTextColor,I["--color"]=S.color,I["--item-text-color"]=S.itemTextColor,I["--arrow-color"]=S.arrowColor,I["--arrow-color-hover"]=S.arrowColorHover,I["--arrow-color-active"]=S.arrowColorActive,I["--arrow-color-child-active"]=S.arrowColorChildActive,I["--item-icon-color"]=S.itemIconColor,I["--item-text-color-hover"]=S.itemTextColorHover,I["--item-icon-color-hover"]=S.itemIconColorHover,I["--item-text-color-active"]=S.itemTextColorActive,I["--item-icon-color-active"]=S.itemIconColorActive,I["--item-icon-color-collapsed"]=S.itemIconColorCollapsed,I["--item-color-active"]=S.itemColorActive,I["--item-color-active-collapsed"]=S.itemColorActiveCollapsed,I["--item-text-color-child-active"]=S.itemTextColorChildActive,I["--item-icon-color-child-active"]=S.itemIconColorChildActive),I})}},render(){const{mergedClsPrefix:r,mode:t}=this;return M("div",{role:t==="horizontal"?"menubar":"menu",class:[`${r}-menu`,`${r}-menu--${t}`,this.mergedCollapsed&&`${r}-menu--collapsed`],style:this.cssVars},this.tmNodes.map(e=>ZP(e,this.$props)))}}),HYe={closeMargin:"18px 14px",closeSize:"16px",width:"365px",padding:"16px"};const WYe=r=>{const{textColor2:t,successColor:e,infoColor:n,warningColor:i,errorColor:a,popoverColor:o,closeColor:s,closeColorHover:l,textColor1:u,textColor3:c,borderRadius:f,fontWeightStrong:d,boxShadow2:h,lineHeight:v,fontSize:p}=r;return Object.assign(Object.assign({},HYe),{borderRadius:f,lineHeight:v,fontSize:p,headerFontWeight:d,iconColor:t,iconColorSuccess:e,iconColorInfo:n,iconColorWarning:i,iconColorError:a,color:o,textColor:t,closeColor:s,closeColorHover:l,closeColorPressed:s,headerTextColor:u,descriptionTextColor:c,actionTextColor:t,boxShadow:h})},jYe=ro({name:"Notification",common:Bn,peers:{Scrollbar:Xu},self:WYe});var YYe=jYe,XYe=mt({name:"NotificationContainer",props:{scrollable:{type:Boolean,required:!0},placement:{type:String,required:!0}},setup(){const{mergedThemeRef:r,mergedClsPrefixRef:t}=nr(JP);return{mergedTheme:r,mergedClsPrefix:t}},render(){const{$slots:r,scrollable:t,mergedClsPrefix:e,mergedTheme:n,placement:i}=this;return M("div",{class:[`${e}-notification-container`,t&&`${e}-notification-container--scrollable`,`${e}-notification-container--${i}`]},t?M(ms,{theme:n.peers.Scrollbar,themeOverrides:n.peerOverrides.Scrollbar},r):r)}});const qYe={info:M(ZS,null),success:M(QS,null),warning:M(JS,null),error:M(KS,null),default:null},QP={closable:{type:Boolean,default:!0},type:{type:String,default:"default"},avatar:Function,title:[String,Function],description:[String,Function],content:[String,Function],meta:[String,Function],action:[String,Function],onClose:{type:Function,required:!0}},KYe=ju(QP);var ZYe=mt({name:"Notification",props:QP,setup(r){const{mergedClsPrefixRef:t,mergedThemeRef:e}=nr(JP);return{mergedClsPrefix:t,showAvatar:Q(()=>r.avatar||r.type!=="default"),handleCloseClick(){r.onClose()},cssVars:Q(()=>{const{type:n}=r,{self:{color:i,textColor:a,closeColor:o,closeColorHover:s,closeColorPressed:l,headerTextColor:u,descriptionTextColor:c,actionTextColor:f,borderRadius:d,headerFontWeight:h,boxShadow:v,lineHeight:p,fontSize:g,closeMargin:m,closeSize:y,width:b,padding:x,[Gt("iconColor",n)]:w},common:{cubicBezierEaseOut:S,cubicBezierEaseIn:C,cubicBezierEaseInOut:_}}=e.value,{left:T,right:E,top:k,bottom:I}=Sp(x);return{"--color":i,"--font-size":g,"--text-color":a,"--description-text-color":c,"--action-text-color":f,"--title-text-color":u,"--title-font-weight":h,"--bezier":_,"--bezier-ease-out":S,"--bezier-ease-in":C,"--border-radius":d,"--box-shadow":v,"--close-color":o,"--close-color-hover":s,"--close-color-pressed":l,"--line-height":p,"--icon-color":w,"--close-margin":m,"--close-size":y,"--width":b,"--padding-left":T,"--padding-right":E,"--padding-top":k,"--padding-bottom":I}})}},render(){const{mergedClsPrefix:r}=this;return M("div",{class:[`${r}-notification`,{[`${r}-notification--closable`]:this.closable,[`${r}-notification--show-avatar`]:this.showAvatar}],style:this.cssVars},this.showAvatar?M("div",{class:`${r}-notification__avatar`},this.avatar?Hn(this.avatar):this.type!=="default"?M(si,{clsPrefix:r},{default:()=>qYe[this.type]}):null):null,this.closable?M(eC,{clsPrefix:r,class:`${r}-notification__close`,onClick:this.handleCloseClick}):null,M("div",{ref:"bodyRef",class:`${r}-notification-main`},this.title?M("div",{class:`${r}-notification-main__header`},Hn(this.title)):null,this.description?M("div",{class:`${r}-notification-main__description`},Hn(this.description)):null,this.content?M("pre",{class:`${r}-notification-main__content`},Hn(this.content)):null,this.meta||this.action?M("div",{class:`${r}-notification-main-footer`},this.meta?M("div",{class:`${r}-notification-main-footer__meta`},Hn(this.meta)):null,this.action?M("div",{class:`${r}-notification-main-footer__action`},Hn(this.action)):null):null))}});const QYe=Object.assign(Object.assign({},QP),{duration:Number,onClose:Function,onLeave:Function,onAfterEnter:Function,onAfterLeave:Function,onHide:Function,onAfterShow:Function,onAfterHide:Function});var JYe=mt({name:"NotificationEnvironment",props:Object.assign(Object.assign({},QYe),{internalKey:{type:String,required:!0},onInternalAfterLeave:{type:Function,required:!0}}),setup(r){const t=ke(!0);let e=null;function n(){t.value=!1,e&&window.clearTimeout(e)}function i(c){oa(()=>{c.style.height=`${c.offsetHeight}px`,c.style.maxHeight="0",c.style.transition="none",c.offsetHeight,c.style.transition="",c.style.maxHeight=c.style.height})}function a(c){c.style.height="",c.style.maxHeight="";const{onAfterEnter:f,onAfterShow:d}=r;f&&f(),d&&d()}function o(c){c.style.maxHeight=`${c.offsetHeight}px`,c.style.height=`${c.offsetHeight}px`,c.offsetHeight}function s(c){const{onHide:f}=r;f&&f(),c.style.maxHeight="0",c.offsetHeight}function l(){const{onAfterLeave:c,onInternalAfterLeave:f,onAfterHide:d,internalKey:h}=r;c&&c(),f(h),d&&d()}function u(){const{onClose:c}=r;c?Promise.resolve(c()).then(f=>{f!==!1&&n()}):n()}return Lo(()=>{r.duration&&(e=window.setTimeout(n,r.duration))}),{show:t,hide:n,handleClose:u,handleAfterLeave:l,handleLeave:s,handleBeforeLeave:o,handleAfterEnter:a,handleBeforeEnter:i}},render(){return M(pa,{name:"notification-transition",appear:!0,onBeforeEnter:this.handleBeforeEnter,onAfterEnter:this.handleAfterEnter,onBeforeLeave:this.handleBeforeLeave,onLeave:this.handleLeave,onAfterLeave:this.handleAfterLeave},{default:()=>this.show?M(ZYe,Object.assign({},Kl(this.$props,KYe),{onClose:this.handleClose})):null})}}),eXe=we([ne("notification-container",`
 z-index: 4000;
 position: fixed;
 overflow: visible;
 display: flex;
 flex-direction: column;
 align-items: flex-end;
 `,[we(">",[ne("scrollbar",`
 width: initial;
 overflow: visible;
 height: -moz-fit-content !important;
 height: fit-content !important;
 max-height: 100vh !important;
 `,[we(">",[ne("scrollbar-container",`
 height: -moz-fit-content !important;
 height: fit-content !important;
 max-height: 100vh !important;
 `,[ne("scrollbar-content",`
 padding-top: 12px;
 padding-bottom: 33px;
 `)])])])]),Pe("top-right, bottom-right",[ne("notification",`
 margin-left: 28px;
 margin-right: 16px;
 `)]),Pe("top-left, bottom-left",[ne("notification",`
 margin-left: 16px;
 margin-right: 28px;
 `)]),Pe("top-right",`
 right: 0;
 top: 12px;
 `,[MC("top-right")]),Pe("top-left",`
 left: 0;
 top: 12px;
 `,[MC("top-left")]),Pe("bottom-right",`
 right: 0;
 bottom: 12px;
 `,[MC("bottom-right")]),Pe("bottom-left",`
 left: 0;
 bottom: 12px;
 `,[MC("bottom-left")]),Pe("scrollable",[Pe("top-right",`
 top: 0;
 `),Pe("top-left",`
 top: 0;
 `),Pe("bottom-right",`
 bottom: 0;
 `),Pe("bottom-left",`
 bottom: 0;
 `)]),ne("notification",[we("&.notification-transition-enter-from, &.notification-transition-leave-to",`
 opacity: 0;
 margin-bottom: 0 !important;
 `),we("&.notification-transition-leave-from, &.notification-transition-enter-to",`
 opacity: 1;
 `),we("&.notification-transition-leave-active",`
 transition:
 background-color .3s var(--bezier),
 color .3s var(--bezier),
 opacity .3s var(--bezier),
 transform .3s var(--bezier-ease-in),
 max-height .3s var(--bezier),
 margin-bottom .3s linear,
 box-shadow .3s var(--bezier);
 `)]),ne("notification",`
 background-color: var(--color);
 color: var(--text-color);
 transition:
 background-color .3s var(--bezier),
 color .3s var(--bezier),
 opacity .3s var(--bezier),
 transform .3s var(--bezier-ease-out),
 max-height .3s var(--bezier),
 margin-bottom .3s linear,
 box-shadow .3s var(--bezier);
 font-family: inherit;
 font-size: var(--font-size);
 font-weight: 400;
 position: relative;
 display: flex;
 overflow: hidden;
 flex-shrink: 0;
 margin-bottom: 12px;
 padding-left: var(--padding-left);
 padding-right: var(--padding-right);
 width: var(--width);
 border-radius: var(--border-radius);
 box-shadow: var(--box-shadow);
 box-sizing: border-box;
 opacity: 1;
 `,[xe("avatar",[ne("icon",{color:"var(--icon-color)"}),ne("base-icon",{color:"var(--icon-color)"})]),Pe("show-avatar",[ne("notification-main",`
 margin-left: 40px;
 width: calc(100% - 40px); 
 `)]),Pe("closable",[ne("notification-main",[we("> *:first-child",{paddingRight:"20px"})]),xe("close",`
 position: absolute;
 top: 0;
 right: 0;
 margin: var(--close-margin);
 font-size: var(--close-size);
 transition: color .3s var(--bezier);
 `)]),xe("avatar",`
 position: absolute;
 top: var(--padding-top);
 left: var(--padding-left);
 width: 28px;
 height: 28px;
 font-size: 28px;
 `,[ne("icon",{transition:"color .3s var(--bezier)"})]),ne("notification-main",`
 padding-top: var(--padding-top);
 padding-bottom: var(--padding-bottom);
 box-sizing: border-box;
 display: flex;
 flex-direction: column;
 margin-left: 8px;
 width: calc(100% - 8px);
 `,[ne("notification-main-footer",`
 display: flex;
 align-items: center;
 justify-content: space-between;
 margin-top: 12px;
 `,[xe("meta",`
 font-size: 12px;
 transition: color .3s var(--bezier-ease-out);
 color: var(--description-text-color);
 `),xe("action",`
 cursor: pointer;
 transition: color .3s var(--bezier-ease-out);
 color: var(--action-text-color);
 `)]),xe("header",`
 font-weight: var(--title-font-weight);
 font-size: 16px;
 transition: color .3s var(--bezier-ease-out);
 color: var(--title-text-color);
 `),xe("description",`
 margin-top: 8px;
 font-size: 12px;
 transition: color .3s var(--bezier-ease-out);
 color: var(--description-text-color);
 `),xe("content",`
 line-height: var(--line-height);
 margin: 12px 0 0 0;
 font-family: inherit;
 white-space: pre-wrap;
 word-wrap: break-word;
 transition: color .3s var(--bezier-ease-out);
 color: var(--text-color);
 `,[we("&:first-child",{margin:0})])])])])]);function MC(r){const[t,e]=r.split("-"),n=t==="top"?"-100%":"100%",i="0",a=e==="left"?"calc(-100%)":"calc(100%)",o="0";return ne("notification",[we("&.notification-transition-enter-from, &.notification-transition-leave-to",`
 transform: translate(${a}, ${n});
 `),we("&.notification-transition-leave-from, &.notification-transition-enter-to",`
 transform: translate(${o}, ${i});
 `)])}const JP=Symbol("notificationProvider"),$K=Symbol("notificationApi"),tXe=Object.assign(Object.assign({},rr.props),{to:[String,Object],scrollable:{type:Boolean,default:!0},max:Number,placement:{type:String,default:"top-right"}});var Ndt=mt({name:"NotificationProvider",props:tXe,setup(r){const{mergedClsPrefixRef:t}=pn(r),e=ke([]),n={},i=new Set;function a(d){const h=_p(),v=()=>{i.add(h),n[h]&&n[h].hide()},p=vc(Object.assign(Object.assign({},d),{key:h,destroy:v,hide:v,deactivate:v})),{max:g}=r;if(g&&e.value.length-i.size>=g){let m=!1,y=0;for(const b of e.value){if(!i.has(b.key)){n[b.key]&&(b.destroy(),m=!0);break}y++}m||e.value.splice(y,1)}return e.value.push(p),p}const o=["info","success","warning","error"].map(d=>h=>a(Object.assign(Object.assign({},h),{type:d})));function s(d){i.delete(d),e.value.splice(e.value.findIndex(h=>h.key===d),1)}const l=rr("Notification","Notification",eXe,YYe,r,t),u={create:a,info:o[0],success:o[1],warning:o[2],error:o[3],open:c,destroyAll:f};Qr($K,u),Qr(JP,{mergedClsPrefixRef:t,mergedThemeRef:l});function c(d){return a(d)}function f(){Object.values(e.value).forEach(d=>{d.hide()})}return Object.assign({mergedClsPrefix:t,notificationList:e,notificationRefs:n,handleAfterLeave:s},u)},render(){var r;return M(Fi,null,Jr(this.$slots,"default"),this.notificationList.length?M(vN,{to:(r=this.to)!==null&&r!==void 0?r:"body"},M(XYe,{scrollable:this.scrollable,placement:this.placement},{default:()=>this.notificationList.map(t=>M(JYe,Object.assign({ref:e=>{const n=t.key;e===null?delete this.notificationRefs[n]:this.notificationRefs[n]=e}},xX(t,["destroy","hide","deactivate"]),{internalKey:t.key,onInternalAfterLeave:this.handleAfterLeave})))})):null)}});function Bdt(){const r=nr($K,null);return r===null&&qS("use-notification","No outer `n-notification-provider` found."),r}const rXe=r=>{const{infoColor:t,successColor:e,warningColor:n,errorColor:i,textColor2:a,progressRailColor:o,fontSize:s,fontWeight:l}=r;return{fontSize:s,fontSizeCircle:"28px",fontWeightCircle:l,railColor:o,railHeight:"8px",iconSizeCircle:"36px",iconSizeLine:"18px",iconColor:t,iconColorInfo:t,iconColorSuccess:e,iconColorWarning:n,iconColorError:i,textColorCircle:a,textColorLineInner:"rgb(255, 255, 255)",textColorLineOuter:a,fillColor:t,fillColorInfo:t,fillColorSuccess:e,fillColorWarning:n,fillColorError:i,lineBgProcessing:"linear-gradient(90deg, rgba(255, 255, 255, .3) 0%, rgba(255, 255, 255, .5) 100%)"}},nXe={name:"Progress",common:Bn,self:rXe};var iXe=nXe,aXe=we([ne("progress",{display:"inline-block"},[ne("progress-icon",`
 color: var(--icon-color);
 transition: color .3s var(--bezier);
 `),Pe("line",`
 width: 100%;
 display: block;
 `,[ne("progress-content",`
 display: flex;
 align-items: center;
 `,[ne("progress-graph",{flex:1})]),ne("progress-custom-content",{marginLeft:"14px"}),ne("progress-icon",`
 width: 30px;
 padding-left: 14px;
 height: var(--icon-size-line);
 line-height: var(--icon-size-line);
 font-size: var(--icon-size-line);
 `,[Pe("as-text",`
 color: var(--text-color-line-outer);
 text-align: center;
 width: 40px;
 font-size: var(--font-size);
 padding-left: 4px;
 transition: color .3s var(--bezier);
 `)])]),Pe("circle",{width:"120px"},[ne("progress-custom-content",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 justify-content: center;
 `),ne("progress-text",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 color: inherit;
 font-size: var(--font-size-circle);
 color: var(--text-color-circle);
 font-weight: var(--font-weight-circle);
 transition: color .3s var(--bezier);
 white-space: nowrap;
 `),ne("progress-icon",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 color: var(--icon-color);
 font-size: var(--icon-size-circle);
 `)]),Pe("multiple-circle",{width:"200px",color:"inherit"},[ne("progress-text",`
 font-weight: var(--font-weight-circle);
 color: var(--text-color-circle);
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 justify-content: center;
 transition: color .3s var(--bezier);
 `)]),ne("progress-content",{position:"relative"}),ne("progress-graph",{position:"relative"},[ne("progress-graph-circle",[we("svg",{verticalAlign:"bottom"}),ne("progress-graph-circle-fill",`
 stroke: var(--fill-color);
 transition:
 opacity .3s var(--bezier),
 stroke .3s var(--bezier),
 stroke-dasharray .3s var(--bezier);
 `,[Pe("empty",{opacity:0})]),ne("progress-graph-circle-rail",`
 transition: stroke .3s var(--bezier);
 overflow: hidden;
 stroke: var(--rail-color);
 `)]),ne("progress-graph-line",[Pe("indicator-inside",[ne("progress-graph-line-rail",{height:"16px",borderRadius:"10px"},[ne("progress-graph-line-fill",{height:"inherit",borderRadius:"10px"}),ne("progress-graph-line-indicator",`
 background: #0000;
 white-space: nowrap;
 text-align: right;
 margin-left: 14px;
 margin-right: 14px;
 height: inherit;
 line-height: 16px;
 font-size: 12px;
 color: var(--text-color-line-inner);
 transition: color .3s var(--bezier);
 `)])]),Pe("indicator-inside-label",`
 height: 16px;
 display: flex;
 align-items: center;
 `,[ne("progress-graph-line-rail",{flex:1,transition:"background-color .3s var(--bezier)"}),ne("progress-graph-line-indicator",`
 background: var(--fill-color);
 font-size: 12px;
 transform: translateZ(0);
 display: flex;
 vertical-align: middle;
 height: 16px;
 line-height: 16px;
 padding: 0 10px;
 border-radius: 10px;
 position: absolute;
 white-space: nowrap;
 color: var(--text-color-line-inner);
 transition:
 right .2s var(--bezier),
 color .3s var(--bezier),
 background-color .3s var(--bezier);
 `)]),ne("progress-graph-line-rail",`
 position: relative;
 overflow: hidden;
 height: var(--rail-height);
 border-radius: 5px;
 background-color: var(--rail-color);
 transition: background-color .3s var(--bezier);
 `,[ne("progress-graph-line-fill",`
 background: var(--fill-color);
 position: relative;
 border-radius: 5px;
 height: inherit;
 width: 100%;
 max-width: 0%;
 transition:
 background-color .3s var(--bezier),
 max-width .2s var(--bezier);
 `,[Pe("processing",[we("&::after",`
 content: "";
 background-image: var(--line-bg-processing);
 animation: progress-processing-animation 2s var(--bezier) infinite;
 `)])])])])])]),we("@keyframes progress-processing-animation",`
 0% {
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 100%;
 opacity: 1;
 }
 66% {
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 0;
 opacity: 0;
 }
 100% {
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 0;
 opacity: 0;
 }
 `)]);const oXe={success:M(QS,null),error:M(KS,null),warning:M(JS,null),info:M(ZS,null)};var sXe=mt({name:"ProgressLine",props:{clsPrefix:{type:String,required:!0},percentage:{type:Number,default:0},railColor:String,railStyle:[String,Object],fillColor:String,status:{type:String,required:!0},indicatorPlacement:{type:String,required:!0},indicatorTextColor:String,unit:{type:String,default:"%"},processing:{type:Boolean,required:!0},showIndicator:{type:Boolean,required:!0},height:[String,Number],railBorderRadius:[String,Number],fillBorderRadius:[String,Number]},setup(r,{slots:t}){const e=Q(()=>ca(r.height)),n=Q(()=>r.railBorderRadius!==void 0?ca(r.railBorderRadius):r.height!==void 0?ca(r.height,{c:.5}):""),i=Q(()=>r.fillBorderRadius!==void 0?ca(r.fillBorderRadius):r.railBorderRadius!==void 0?ca(r.railBorderRadius):r.height!==void 0?ca(r.height,{c:.5}):"");return()=>{const{indicatorPlacement:a,railColor:o,railStyle:s,percentage:l,unit:u,indicatorTextColor:c,status:f,showIndicator:d,fillColor:h,processing:v,clsPrefix:p}=r;return M("div",{class:`${p}-progress-content`,role:"none"},M("div",{class:`${p}-progress-graph`,"aria-hidden":!0},M("div",{class:[`${p}-progress-graph-line`,{[`${p}-progress-graph-line--indicator-${a}`]:!0}]},M("div",{class:`${p}-progress-graph-line-rail`,style:[{backgroundColor:o,height:e.value,borderRadius:n.value},s]},M("div",{class:[`${p}-progress-graph-line-fill`,v&&`${p}-progress-graph-line-fill--processing`],style:{maxWidth:`${r.percentage}%`,backgroundColor:h,height:e.value,borderRadius:i.value}},a==="inside"?M("div",{class:`${p}-progress-graph-line-indicator`},`${l}${u}`):null)))),d&&a==="outside"?M("div",null,t.default?M("div",{class:`${p}-progress-custom-content`,style:{color:c},role:"none"},t.default()):f==="default"?M("div",{role:"none",class:`${p}-progress-icon ${p}-progress-icon--as-text`,style:{color:c}},l,u):M("div",{class:`${p}-progress-icon`,"aria-hidden":!0},M(si,{clsPrefix:p},{default:()=>oXe[f]}))):null)}}});const lXe={success:M(QS,null),error:M(KS,null),warning:M(JS,null),info:M(ZS,null)};var uXe=mt({name:"ProgressCircle",props:{clsPrefix:{type:String,required:!0},status:{type:String,required:!0},strokeWidth:{type:Number,required:!0},fillColor:String,railColor:String,railStyle:[String,Object],percentage:{type:Number,default:0},showIndicator:{type:Boolean,reqiuired:!0},indicatorTextColor:String,unit:String,viewBoxWidth:{type:Number,required:!0}},setup(r,{slots:t}){const e=Q(()=>`${Math.PI*r.percentage}, ${r.viewBoxWidth*8}`);return()=>{const{fillColor:n,railColor:i,railStyle:a,strokeWidth:o,status:s,percentage:l,showIndicator:u,indicatorTextColor:c,unit:f,clsPrefix:d}=r;return M("div",{class:`${d}-progress-content`,role:"none"},M("div",{class:`${d}-progress-graph`,"aria-hidden":!0},M("div",{class:`${d}-progress-graph-circle`},M("svg",{viewBox:"0 0 110 110"},M("g",null,M("path",{class:`${d}-progress-graph-circle-rail`,d:"m 55 5 a 50 50 0 1 1 0 100 a 50 50 0 1 1 0 -100","stroke-width":o*1.1,"stroke-linecap":"round",fill:"none",style:[{strokeDashoffset:0,stroke:i},a]})),M("g",null,M("path",{class:[`${d}-progress-graph-circle-fill`,l===0&&`${d}-progress-graph-circle-fill--empty`],d:"m 55 5 a 50 50 0 1 1 0 100 a 50 50 0 1 1 0 -100","stroke-width":o*1.1,"stroke-linecap":"round",fill:"none",style:{strokeDasharray:e.value,strokeDashoffset:0,stroke:n}}))))),u?M("div",null,t.default?M("div",{class:`${d}-progress-custom-content`,role:"none"},t.default()):s!=="default"?M("div",{class:`${d}-progress-icon`,"aria-hidden":!0},M(si,{clsPrefix:d},{default:()=>lXe[s]})):M("div",{class:`${d}-progress-text`,style:{color:c},role:"none"},M("span",{class:`${d}-progress-text__percentage`},l),M("span",{class:`${d}-progress-text__unit`},f))):null)}}});function zK(r,t,e=100){return`m ${e/2} ${e/2-r} a ${r} ${r} 0 1 1 0 ${2*r} a ${r} ${r} 0 1 1 0 -${2*r}`}var cXe=mt({name:"ProgressMultipleCircle",props:{clsPrefix:{type:String,required:!0},viewBoxWidth:{type:Number,required:!0},percentage:{type:Array,default:[0]},strokeWidth:{type:Number,required:!0},circleGap:{type:Number,required:!0},showIndicator:{type:Boolean,required:!0},fillColor:{type:Array,default:()=>[]},railColor:{type:Array,default:()=>[]},railStyle:{type:Array,default:()=>[]}},setup(r,{slots:t}){const e=Q(()=>r.percentage.map((i,a)=>`${Math.PI*i/100*(r.viewBoxWidth/2-r.strokeWidth/2*(1+2*a)-r.circleGap*a)*2}, ${r.viewBoxWidth*8}`));return()=>{const{viewBoxWidth:n,strokeWidth:i,circleGap:a,showIndicator:o,fillColor:s,railColor:l,railStyle:u,percentage:c,clsPrefix:f}=r;return M("div",{class:`${f}-progress-content`,role:"none"},M("div",{class:`${f}-progress-graph`,"aria-hidden":!0},M("div",{class:`${f}-progress-graph-circle`},M("svg",{viewBox:`0 0 ${n} ${n}`},c.map((d,h)=>M("g",{key:h},M("path",{class:`${f}-progress-graph-circle-rail`,d:zK(n/2-i/2*(1+2*h)-a*h,i,n),"stroke-width":i,"stroke-linecap":"round",fill:"none",style:[{strokeDashoffset:0,stroke:l[h]},u[h]]}),M("path",{class:[`${f}-progress-graph-circle-fill`,d===0&&`${f}-progress-graph-circle-fill--empty`],d:zK(n/2-i/2*(1+2*h)-a*h,i,n),"stroke-width":i,"stroke-linecap":"round",fill:"none",style:{strokeDasharray:e.value[h],strokeDashoffset:0,stroke:s[h]}})))))),o&&t.default?M("div",null,M("div",{class:`${f}-progress-text`},t.default())):null)}}});const fXe=Object.assign(Object.assign({},rr.props),{processing:Boolean,type:{type:String,default:"line"},status:{type:String,default:"default"},railColor:[String,Array],railStyle:[String,Array],color:[String,Array],viewBoxWidth:{type:Number,default:100},strokeWidth:{type:Number,default:7},percentage:[Number,Array],unit:{type:String,default:"%"},showIndicator:{type:Boolean,default:!0},indicatorPosition:{type:String,default:"outside"},indicatorPlacement:{type:String,default:"outside"},indicatorTextColor:String,circleGap:{type:Number,default:1},height:Number,borderRadius:[String,Number],fillBorderRadius:[String,Number]});var $dt=mt({name:"Progress",props:fXe,setup(r){const t=Q(()=>r.indicatorPlacement||r.indicatorPosition),{mergedClsPrefixRef:e}=pn(r),n=rr("Progress","Progress",aXe,iXe,r,e);return{mergedClsPrefix:e,mergedIndicatorPlacement:t,cssVars:Q(()=>{const{status:i}=r,{common:{cubicBezierEaseInOut:a},self:{fontSize:o,fontSizeCircle:s,railColor:l,railHeight:u,iconSizeCircle:c,iconSizeLine:f,textColorCircle:d,textColorLineInner:h,textColorLineOuter:v,lineBgProcessing:p,fontWeightCircle:g,[Gt("iconColor",i)]:m,[Gt("fillColor",i)]:y}}=n.value;return{"--bezier":a,"--fill-color":y,"--font-size":o,"--font-size-circle":s,"--font-weight-circle":g,"--icon-color":m,"--icon-size-circle":c,"--icon-size-line":f,"--line-bg-processing":p,"--rail-color":l,"--rail-height":u,"--text-color-circle":d,"--text-color-line-inner":h,"--text-color-line-outer":v}})}},render(){const{type:r,cssVars:t,indicatorTextColor:e,showIndicator:n,status:i,railColor:a,railStyle:o,color:s,percentage:l,viewBoxWidth:u,strokeWidth:c,mergedIndicatorPlacement:f,unit:d,borderRadius:h,fillBorderRadius:v,height:p,processing:g,circleGap:m,mergedClsPrefix:y,$slots:b}=this;return M("div",{class:[`${y}-progress`,`${y}-progress--${r}`,`${y}-progress--${i}`],style:t,"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":l,role:r==="circle"||r==="line"?"progressbar":"none"},r==="circle"?M(uXe,{clsPrefix:y,status:i,showIndicator:n,indicatorTextColor:e,railColor:a,fillColor:s,railStyle:o,percentage:l,viewBoxWidth:u,strokeWidth:c,unit:d},b):r==="line"?M(sXe,{clsPrefix:y,status:i,showIndicator:n,indicatorTextColor:e,railColor:a,fillColor:s,railStyle:o,percentage:l,processing:g,indicatorPlacement:f,unit:d,fillBorderRadius:v,railBorderRadius:h,height:p},b):r==="multiple-circle"?M(cXe,{clsPrefix:y,strokeWidth:c,railColor:a,fillColor:s,railStyle:o,viewBoxWidth:u,percentage:l,showIndicator:n,circleGap:m},b):null)}});const dXe=r=>{const{heightSmall:t,heightMedium:e,heightLarge:n,borderRadius:i}=r;return{color:"#eee",colorEnd:"#ddd",borderRadius:i,heightSmall:t,heightMedium:e,heightLarge:n}},hXe={name:"Skeleton",common:Bn,self:dXe};var vXe=we([ne("skeleton",`
 height: 1em;
 width: 100%;
 transition: background-color .3s var(--bezier);
 transition:
 --color-start .3s var(--bezier),
 --color-end .3s var(--bezier),
 background-color .3s var(--bezier);
 animation: 2s skeleton-loading infinite cubic-bezier(0.36, 0, 0.64, 1);
 background-color: var(--color-start);
 `),we("@keyframes skeleton-loading",`
 0% {
 background: var(--color-start);
 }
 40% {
 background: var(--color-end);
 }
 80% {
 background: var(--color-start);
 }
 100% {
 background: var(--color-start);
 }
 `)]);const pXe=Object.assign(Object.assign({},rr.props),{text:Boolean,round:Boolean,circle:Boolean,height:[String,Number],width:[String,Number],size:String,repeat:{type:Number,default:1},animated:{type:Boolean,default:!0},sharp:{type:Boolean,default:!0}});var zdt=mt({name:"Skeleton",inheritAttrs:!1,props:pXe,setup(r){d8e();const{mergedClsPrefixRef:t}=pn(r),e=rr("Skeleton","Skeleton",vXe,hXe,r,t);return{mergedClsPrefix:t,style:Q(()=>{var n,i;const a=e.value,{common:{cubicBezierEaseInOut:o}}=a,s=a.self,{color:l,colorEnd:u,borderRadius:c}=s;let f;const{circle:d,sharp:h,round:v,width:p,height:g,size:m,text:y,animated:b}=r;m!==void 0&&(f=s[Gt("height",m)]);const x=d?(n=p!=null?p:g)!==null&&n!==void 0?n:f:p,w=(i=d&&p!=null?p:g)!==null&&i!==void 0?i:f;return{display:y?"inline-block":"",verticalAlign:y?"-0.125em":"",borderRadius:d?"50%":v?"4096px":h?"":c,width:typeof x=="number"?to(x):x,height:typeof w=="number"?to(w):w,animation:b?"":"none","--bezier":o,"--color-start":l,"--color-end":u}})}},render(){const{repeat:r,style:t,mergedClsPrefix:e,$attrs:n}=this,i=M("div",Tl({class:`${e}-skeleton`,style:t},n));return r>1?M(Fi,null,Array.apply(null,{length:r}).map(a=>[i,`
`])):i}});const gXe=r=>{const{opacityDisabled:t,heightTiny:e,heightSmall:n,heightMedium:i,heightLarge:a,heightHuge:o,primaryColor:s,fontSize:l}=r;return{fontSize:l,textColor:s,sizeTiny:e,sizeSmall:n,sizeMedium:i,sizeLarge:a,sizeHuge:o,color:s,opacitySpinning:t}},mXe={name:"Spin",common:Bn,self:gXe};var yXe=mXe,bXe=we([we("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),ne("spin-container",{position:"relative"},[ne("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[lP()])]),ne("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),ne("spin",`
 display: inline-flex;
 height: var(--size);
 width: var(--size);
 font-size: var(--size);
 color: var(--color);
 `,[Pe("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),ne("spin-description",`
 display: inline-block;
 font-size: var(--font-size);
 color: var(--text-color);
 transition: color .3s var(--bezier);
 margin-top: 8px;
 `),ne("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--bezier);
 pointer-events: all;
 `,[Pe("spinning",`
 user-select: none;
 pointer-events: none;
 opacity: var(--opacity-spinning);
 `)])]);const xXe={small:20,medium:18,large:16},wXe=Object.assign(Object.assign({},rr.props),{description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0}});var Gdt=mt({name:"Spin",props:wXe,setup(r){const{mergedClsPrefixRef:t}=pn(r),e=rr("Spin","Spin",bXe,yXe,r,t);return{mergedClsPrefix:t,compitableShow:XS(r,["spinning","show"]),mergedStrokeWidth:Q(()=>{const{strokeWidth:n}=r;if(n!==void 0)return n;const{size:i}=r;return xXe[typeof i=="number"?"medium":i]}),cssVars:Q(()=>{const{size:n}=r,{common:{cubicBezierEaseInOut:i},self:a}=e.value,{opacitySpinning:o,color:s,textColor:l}=a,u=typeof n=="number"?to(n):a[Gt("size",n)];return{"--bezier":i,"--opacity-spinning":o,"--size":u,"--color":s,"--text-color":l}})}},render(){var r;const{$slots:t,mergedClsPrefix:e,description:n}=this,i=t.icon&&this.rotate,a=(n||t.description)&&M("div",{class:`${e}-spin-description`},n||((r=t.description)===null||r===void 0?void 0:r.call(t))),o=t.icon?M("div",{class:`${e}-spin-body`},M("div",{class:[`${e}-spin`,i&&`${e}-spin--rotate`],style:t.default?"":this.cssVars},t.icon()),a):M("div",{class:`${e}-spin-body`},M(sh,{clsPrefix:e,style:t.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${e}-spin`}),a);return t.default?M("div",{class:`${e}-spin-container`,style:this.cssVars},M("div",{class:[`${e}-spin-content`,this.compitableShow&&`${e}-spin-content--spinning`]},t),M(pa,{name:"fade-in-transition"},{default:()=>this.compitableShow?o:null})):o}}),SXe={buttonHeightSmall:"14px",buttonHeightMedium:"18px",buttonHeightLarge:"22px",buttonWidthSmall:"14px",buttonWidthMedium:"18px",buttonWidthLarge:"22px",buttonWidthPressedSmall:"20px",buttonWidthPressedMedium:"24px",buttonWidthPressedLarge:"28px",railHeightSmall:"18px",railHeightMedium:"22px",railHeightLarge:"26px",railWidthSmall:"32px",railWidthMedium:"40px",railWidthLarge:"48px"};const CXe=r=>{const{primaryColor:t,opacityDisabled:e,borderRadius:n}=r,i="rgba(0, 0, 0, .14)";return Object.assign(Object.assign({},SXe),{textColor:"white",loadingColor:t,opacityDisabled:e,railColor:i,railColorActive:t,buttonBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",buttonColor:"#FFF",railBorderRadiusSmall:n,railBorderRadiusMedium:n,railBorderRadiusLarge:n,buttonBorderRadiusSmall:n,buttonBorderRadiusMedium:n,buttonBorderRadiusLarge:n,boxShadowFocus:`0 0 0 2px ${qr(t,{alpha:.2})}`})},EXe={name:"Switch",common:Bn,self:CXe};var _Xe=EXe,TXe=ne("switch",`
 height: var(--height);
 min-width: var(--width);
 vertical-align: middle;
 user-select: none;
 display: inline-flex;
 outline: none;
 justify-content: center;
 align-items: center;
`,[xe("children-placeholder",`
 height: var(--rail-height);
 display: flex;
 flex-direction: column;
 overflow: hidden;
 pointer-events: none;
 visibility: hidden;
 `),xe("rail-placeholder",`
 display: flex;
 flex-wrap: none;
 `),xe("button-placeholder",`
 width: calc(1.75 * var(--rail-height));
 height: var(--rail-height);
 `),ne("base-loading",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 font-size: calc(var(--button-width) - 4px);
 color: var(--loading-color);
 transition: color .3s var(--bezier);
 `,[qu({originalTransform:"translateX(-50%) translateY(-50%)"})]),xe("checked, unchecked",`
 transition: color .3s var(--bezier);
 color: var(--text-color);
 box-sizing: border-box;
 position: absolute;
 white-space: nowrap;
 top: 0;
 bottom: 0;
 display: flex;
 align-items: center;
 line-height: 1;
 `),xe("checked",`
 right: 0;
 padding-right: calc(1.25 * var(--rail-height) - var(--offset));
 `),xe("unchecked",`
 left: 0;
 justify-content: flex-end;
 padding-left: calc(1.25 * var(--rail-height) - var(--offset));
 `),we("&:focus",[xe("rail",`
 box-shadow: var(--box-shadow-focus);
 `)]),Pe("round",[xe("rail",{borderRadius:"calc(var(--rail-height) / 2)"},[xe("button",{borderRadius:"calc(var(--button-height) / 2)"})])]),Cn("disabled",[Pe("pressed",[xe("rail",[xe("button",{maxWidth:"var(--button-width-pressed)"})])]),xe("rail",[we("&:active",[xe("button",{maxWidth:"var(--button-width-pressed)"})])]),Pe("active",[Pe("pressed",[xe("rail",[xe("button",{left:"calc(100% - var(--offset) - var(--button-width-pressed))"})])]),xe("rail",[we("&:active",[xe("button",{left:"calc(100% - var(--offset) - var(--button-width-pressed))"})])])])]),Pe("active",[xe("rail",[xe("button",{left:"calc(100% - (var(--rail-height) + var(--button-width)) / 2)"})])]),xe("rail",`
 overflow: hidden;
 height: var(--rail-height);
 min-width: var(--rail-width);
 border-radius: var(--rail-border-radius);
 cursor: pointer;
 position: relative;
 transition:
 background .3s var(--bezier),
 box-shadow .3s var(--bezier);
 background-color: var(--rail-color);
 `,[xe("button",`
 top: var(--offset);
 left: var(--offset);
 height: var(--button-width);
 width: var(--button-width-pressed);
 max-width: var(--button-width);
 border-radius: var(--button-border-radius);
 background-color: var(--button-color);
 box-shadow: var(--button-box-shadow);
 box-sizing: border-box;
 cursor: inherit;
 content: "";
 position: absolute;
 transition:
 background-color .3s var(--bezier),
 left .3s var(--bezier),
 opacity .3s var(--bezier),
 max-width .3s var(--bezier),
 box-shadow .3s var(--bezier);
 `)]),Pe("active",[xe("rail",{backgroundColor:"var(--rail-color-active)"})]),Pe("disabled",[xe("rail",`
 cursor: not-allowed;
 opacity: .5;
 `)])]);const AXe=Object.assign(Object.assign({},rr.props),{size:{type:String,default:"medium"},value:{type:[String,Number,Boolean],default:void 0},loading:Boolean,defaultValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:void 0},round:{type:Boolean,default:!0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],checkedValue:{type:[String,Number,Boolean],default:!0},uncheckedValue:{type:[String,Number,Boolean],default:!1},railStyle:Function,onChange:[Function,Array]});var Udt=mt({name:"Switch",props:AXe,setup(r){const{mergedClsPrefixRef:t}=pn(r),e=rr("Switch","Switch",TXe,_Xe,r,t),n=fl(r),{mergedSizeRef:i,mergedDisabledRef:a}=n,o=ke(r.defaultValue),s=Ht(r,"value"),l=ri(s,o),u=Q(()=>l.value===r.checkedValue),c=ke(!1),f=ke(!1),d=Q(()=>{const{railStyle:w}=r;if(!!w)return w({focused:f.value,checked:u.value})});function h(w){const{"onUpdate:value":S,onChange:C,onUpdateValue:_}=r,{nTriggerFormInput:T,nTriggerFormChange:E}=n;S&&pt(S,w),_&&pt(_,w),C&&pt(C,w),o.value=w,T(),E()}function v(){const{nTriggerFormFocus:w}=n;w()}function p(){const{nTriggerFormBlur:w}=n;w()}function g(){a.value||(l.value!==r.checkedValue?h(r.checkedValue):h(r.uncheckedValue))}function m(){f.value=!0,v()}function y(){f.value=!1,p(),c.value=!1}function b(w){w.code==="Space"&&(h(!l.value),c.value=!1)}function x(w){w.code==="Space"&&(w.preventDefault(),c.value=!0)}return{handleClick:g,handleBlur:y,handleFocus:m,handleKeyup:b,handleKeydown:x,mergedRailStyle:d,pressed:c,mergedClsPrefix:t,mergedValue:l,checked:u,mergedDisabled:a,cssVars:Q(()=>{const{value:w}=i,{self:{opacityDisabled:S,railColor:C,railColorActive:_,buttonBoxShadow:T,buttonColor:E,boxShadowFocus:k,loadingColor:I,textColor:P,[Gt("buttonHeight",w)]:F,[Gt("buttonWidth",w)]:$,[Gt("buttonWidthPressed",w)]:R,[Gt("railHeight",w)]:L,[Gt("railWidth",w)]:O,[Gt("railBorderRadius",w)]:B,[Gt("buttonBorderRadius",w)]:U},common:{cubicBezierEaseInOut:W}}=e.value,X=to((Ho(L)-Ho(F))/2),ie=to(Math.max(Ho(L),Ho(F))),q=Ho(L)>Ho(F)?O:to(Ho(O)+Ho(F)-Ho(L));return{"--bezier":W,"--button-border-radius":U,"--button-box-shadow":T,"--button-color":E,"--button-width":$,"--button-width-pressed":R,"--button-height":F,"--height":ie,"--offset":X,"--opacity-disabled":S,"--rail-border-radius":B,"--rail-color":C,"--rail-color-active":_,"--rail-height":L,"--rail-width":O,"--width":q,"--box-shadow-focus":k,"--loading-color":I,"--text-color":P}})}},render(){const{mergedClsPrefix:r,mergedDisabled:t,checked:e,mergedRailStyle:n,$slots:i}=this,{checked:a,unchecked:o}=i;return M("div",{role:"switch","aria-checked":e,class:[`${r}-switch`,e&&`${r}-switch--active`,t&&`${r}-switch--disabled`,this.round&&`${r}-switch--round`,this.pressed&&`${r}-switch--pressed`],tabindex:this.mergedDisabled?void 0:0,style:this.cssVars,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},M("div",{class:`${r}-switch__rail`,"aria-hidden":"true",style:n},(a||o)&&M("div",{"aria-hidden":!0,class:`${r}-switch__children-placeholder`},M("div",{class:`${r}-switch__rail-placeholder`},M("div",{class:`${r}-switch__button-placeholder`}),a==null?void 0:a()),M("div",{class:`${r}-switch__rail-placeholder`},M("div",{class:`${r}-switch__button-placeholder`}),o==null?void 0:o())),M("div",{class:`${r}-switch__button`},M(pa,{name:"fade-in-scale-up-transition"},{default:()=>this.loading?M(sh,{key:"loading",clsPrefix:r,strokeWidth:20}):null}),a&&M("div",{key:"checked",class:`${r}-switch__checked`},a()),o&&M("div",{key:"unchecked",class:`${r}-switch__unchecked`},o()))))}});const kXe=r=>{const{borderRadiusSmall:t,hoverColor:e,pressedColor:n,primaryColor:i,textColor3:a,textColor2:o,textColorDisabled:s,fontSize:l}=r;return{fontSize:l,nodeBorderRadius:t,nodeColorHover:e,nodeColorPressed:n,nodeColorActive:qr(i,{alpha:.1}),arrowColor:a,nodeTextColor:o,nodeTextColorDisabled:s,loadingColor:i,dropMarkColor:i}},MXe=ro({name:"Tree",common:Bn,peers:{Checkbox:TP,Scrollbar:Xu},self:kXe});var GK=MXe,IXe=mt({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},expanded:Boolean,hide:Boolean,loading:Boolean,onClick:Function},render(){const{clsPrefix:r}=this;return M("span",{"data-switcher":!0,class:[`${r}-tree-node-switcher`,{[`${r}-tree-node-switcher--expanded`]:this.expanded,[`${r}-tree-node-switcher--hide`]:this.hide}],onClick:this.onClick},M("div",{class:`${r}-tree-node-switcher__icon`},M(m0,null,{default:()=>this.loading?M(sh,{clsPrefix:r,key:"loading",radius:85,strokeWidth:20}):M(si,{clsPrefix:r,key:"switcher"},{default:()=>M(fUe,null)})})))}});const IC=Symbol("tree");var PXe=mt({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(r){const t=nr(IC);function e(i){const{onCheck:a}=r;if(a)return a(i)}function n(i){r.indeterminate?e(!1):e(i)}return{handleUpdateValue:n,mergedTheme:t.mergedThemeRef}},render(){const{clsPrefix:r,mergedTheme:t,checked:e,indeterminate:n,disabled:i,focusable:a,handleUpdateValue:o}=this;return M("span",{class:`${r}-tree-node-checkbox`,"data-checkbox":!0},M(xC,{focusable:a,disabled:i,theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,checked:e,indeterminate:n,onUpdateChecked:o}))}}),DXe=mt({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0}},setup(r){const{renderLabelRef:t,renderPrefixRef:e,renderSuffixRef:n,labelFieldRef:i}=nr(IC),a=ke(null);function o(l){const{onClick:u}=r;u&&u(l)}function s(l){o(l)}return{selfRef:a,renderLabel:t,renderPrefix:e,renderSuffix:n,labelField:i,handleClick:s}},render(){const{clsPrefix:r,labelField:t,checked:e=!1,selected:n=!1,renderLabel:i,renderPrefix:a,renderSuffix:o,handleClick:s,onDragstart:l,tmNode:{rawNode:u,rawNode:{prefix:c,suffix:f,[t]:d}}}=this;return M("span",{ref:"selfRef",class:[`${r}-tree-node-content`],onClick:s,draggable:l===void 0?void 0:!0,onDragstart:l},a||c?M("div",{class:`${r}-tree-node-content__prefix`},a?a({option:u,selected:n,checked:e}):Hn(c)):null,M("div",{class:`${r}-tree-node-content__text`},i?i({option:u,selected:n,checked:e}):Hn(d)),o||f?M("div",{class:`${r}-tree-node-content__suffix`},o?o({option:u,selected:n,checked:e}):Hn(f)):null)}});function UK({position:r,offsetLevel:t,indent:e,el:n}){const i={position:"absolute",boxSizing:"border-box",right:0};if(r==="inside")i.left=0,i.top=0,i.bottom=0,i.borderRadius="inherit",i.boxShadow="inset 0 0 0 2px var(--drop-mark-color)";else{const a=r==="before"?"top":"bottom";i[a]=0,i.left=`${n.offsetLeft+6-t*e}px`,i.height="2px",i.backgroundColor="var(--drop-mark-color)",i.transformOrigin=a,i.borderRadius="1px",i.transform=r==="before"?"translateY(-4px)":"translateY(4px)"}return M("div",{style:i})}function RXe({dropPosition:r,node:t}){return t.isLeaf===!1||t.children?!0:r!=="inside"}const OXe=mt({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(r){const t=nr(IC),{droppingNodeParentRef:e,droppingMouseNodeRef:n,draggingNodeRef:i,droppingPositionRef:a,droppingOffsetLevelRef:o,indentRef:s}=t,l=ke(null),u={value:null};Lo(()=>{u.value=l.value.$el});function c(){const{tmNode:b}=r;if(t.remoteRef.value&&!b.isLeaf&&!b.shallowLoaded){t.loadingKeysRef.value.has(b.key)||t.loadingKeysRef.value.add(b.key);const{onLoadRef:{value:x}}=t;x&&x(b.rawNode).then(()=>{t.handleSwitcherClick(b)}).finally(()=>{t.loadingKeysRef.value.delete(b.key)})}else t.handleSwitcherClick(b)}function f(b){Vu(b,"checkbox")||Vu(b,"switcher")||t.handleSelect(r.tmNode)}function d(b){t.handleCheck(r.tmNode,b)}function h(b){t.handleDragStart({event:b,node:r.tmNode})}function v(b){b.currentTarget===b.target&&t.handleDragEnter({event:b,node:r.tmNode})}function p(b){b.preventDefault(),t.handleDragOver({event:b,node:r.tmNode})}function g(b){t.handleDragEnd({event:b,node:r.tmNode})}function m(b){b.currentTarget===b.target&&t.handleDragLeave({event:b,node:r.tmNode})}function y(b){b.preventDefault(),a.value!==null&&t.handleDrop({event:b,node:r.tmNode,dropPosition:a.value})}return{showDropMark:On(()=>{const{value:b}=i;if(!b)return;const{value:x}=a;if(!x)return;const{value:w}=n;if(!w)return;const{tmNode:S}=r;return S.key===w.key}),showDropMarkAsParent:On(()=>{const{value:b}=e;if(!b)return!1;const{tmNode:x}=r,{value:w}=a;return w==="before"||w==="after"?b.key===x.key:!1}),pending:On(()=>t.pendingNodeKeyRef.value===r.tmNode.key),loading:On(()=>t.loadingKeysRef.value.has(r.tmNode.key)),highlight:On(()=>t.highlightKeySetRef.value.has(r.tmNode.key)),checked:On(()=>t.displayedCheckedKeysRef.value.includes(r.tmNode.key)),indeterminate:On(()=>t.displayedIndeterminateKeysRef.value.includes(r.tmNode.key)),selected:On(()=>t.mergedSelectedKeysRef.value.includes(r.tmNode.key)),expanded:On(()=>t.mergedExpandedKeysRef.value.includes(r.tmNode.key)),disabled:Q(()=>t.disabledRef.value||r.tmNode.disabled),checkable:Q(()=>t.checkableRef.value&&(t.cascadeRef.value||t.mergedCheckStrategyRef.value!=="child"||r.tmNode.isLeaf)),checkboxDisabled:Q(()=>!!r.tmNode.rawNode.checkboxDisabled),selectable:Q(()=>t.selectableRef.value&&(t.mergedCheckStrategyRef.value==="child"?r.tmNode.isLeaf:!0)),internalScrollable:t.internalScrollableRef,draggable:t.draggableRef,blockLine:t.blockLineRef,checkboxFocusable:t.internalCheckboxFocusableRef,droppingPosition:a,droppingOffsetLevel:o,indent:s,contentInstRef:l,contentElRef:u,handleCheck:d,handleDrop:y,handleDragStart:h,handleDragEnter:v,handleDragOver:p,handleDragEnd:g,handleDragLeave:m,handleContentClick:f,handleSwitcherClick:c}},render(){const{tmNode:r,clsPrefix:t,checkable:e,selectable:n,selected:i,checked:a,highlight:o,draggable:s,blockLine:l,indent:u,disabled:c,pending:f,internalScrollable:d}=this,h=s&&!c?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,v=d?wX(r.key):void 0;return M("div",Object.assign({class:`${t}-tree-node-wrapper`},h),M("div",{class:[`${t}-tree-node`,{[`${t}-tree-node--selected`]:i,[`${t}-tree-node--checkable`]:e,[`${t}-tree-node--highlight`]:o,[`${t}-tree-node--pending`]:f,[`${t}-tree-node--disabled`]:c,[`${t}-tree-node--selectable`]:n}],"data-key":v,draggable:s&&l,onClick:l&&!c?this.handleContentClick:void 0,onDragstart:s&&l&&!c?this.handleDragStart:void 0},uY(r.level,M("div",{class:`${t}-tree-node-indent`,style:{flex:`0 0 ${u}px`}})),M(IXe,{clsPrefix:t,expanded:this.expanded,loading:this.loading,hide:r.isLeaf,onClick:this.handleSwitcherClick}),e?M(PXe,{focusable:this.checkboxFocusable,disabled:c||this.checkboxDisabled,clsPrefix:t,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null,M(DXe,{ref:"contentInstRef",clsPrefix:t,checked:a,selected:i,onClick:l||c?void 0:this.handleContentClick,onDragstart:s&&!l&&!c?this.handleDragStart:void 0,tmNode:r}),s?this.showDropMark?UK({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:u}):this.showDropMarkAsParent?UK({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:u}):null:null))}});var VK=OXe;function HK(r,t,e,n){r==null||r.forEach(i=>{e(i),HK(i[t],t,e,n),n(i)})}function LXe(r,t,e,n,i){const a=new Set,o=new Set,s=[];return HK(r,n,l=>{if(s.push(l),i(t,l)){o.add(l[e]);for(let u=s.length-2;u>=0;--u)if(!a.has(s[u][e]))a.add(s[u][e]);else return}},()=>{s.pop()}),{expandedKeys:Array.from(a),highlightKeySet:o}}const WK=null;if(typeof window!="undefined"){const r=new Image;r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}const jK=Symbol("tree-select");function FXe({fNodesRef:r,mergedExpandedKeysRef:t,mergedSelectedKeysRef:e,handleSelect:n,handleSwitcherClick:i}){const{value:a}=e,o=nr(jK,null),s=o?o.pendingNodeKeyRef:ke(a.length?a[a.length-1]:null);function l(c){const{value:f}=s;if(f===null){if(["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(c.code)&&f===null){const{value:d}=r;let h=0;for(;h<d.length;){if(!d[h].disabled){s.value=d[h].key;break}h+=1}}}else{const{value:d}=r;let h=d.findIndex(v=>v.key===f);if(!~h)return;if(c.code==="Enter"||c.code==="NumpadEnter")n(d[h]);else if(c.code==="ArrowDown")for(h+=1;h<d.length;){if(!d[h].disabled){s.value=d[h].key;break}h+=1}else if(c.code==="ArrowUp")for(h-=1;h>=0;){if(!d[h].disabled){s.value=d[h].key;break}h-=1}else if(c.code==="ArrowLeft"){const v=d[h];if(v.isLeaf||!t.value.includes(f)){const p=v.getParent();p&&(s.value=p.key)}else i(v)}else if(c.code==="ArrowRight"){const v=d[h];if(v.isLeaf)return;if(!t.value.includes(f))i(v);else for(h+=1;h<d.length;){if(!d[h].disabled){s.value=d[h].key;break}h+=1}}}}function u(c){switch(c.code){case"ArrowUp":case"ArrowDown":c.preventDefault()}}return{pendingNodeKeyRef:s,handleKeyup:l,handleKeydown:u}}var NXe=mt({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:r}=this;return M(YI,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>M("div",{class:[`${r}-tree-motion-wrapper`,`${r}-tree-motion-wrapper--${this.mode}`],style:{height:to(this.height)}},this.nodes.map(t=>M(VK,{clsPrefix:r,tmNode:t})))})}}),BXe=ne("tree",`
 font-size: var(--font-size);
 outline: none;
`,[we("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),we(">",[ne("tree-node",[we("&:first-child",{marginTop:0})])]),ne("tree-node-indent",`
 height: 0;
 `),ne("tree-motion-wrapper",[Pe("expand",[vP({duration:"0.2s"})]),Pe("collapse",[vP({duration:"0.2s",reverse:!0})])]),ne("tree-node-wrapper",`
 padding: 3px 0;
 `),ne("tree-node",`
 position: relative;
 display: flex;
 border-radius: var(--node-border-radius);
 transition: background-color .3s var(--bezier);
 `,[Pe("highlight",[ne("tree-node-content",[xe("text",{borderBottomColor:"var(--node-text-color-disabled)"})])]),Pe("disabled",[ne("tree-node-content",`
 color: var(--node-text-color-disabled);
 cursor: not-allowed;
 `)]),Cn("disabled",[Pe("selectable",[ne("tree-node-content",`
 cursor: pointer;
 `)])])]),Pe("block-node",[ne("tree-node-content",`
 width: 100%;
 `)]),Cn("block-line",[ne("tree-node",[Cn("disabled",[ne("tree-node-content",[we("&:hover",{backgroundColor:"var(--node-color-hover)"})]),Pe("selectable",[ne("tree-node-content",[we("&:active",{backgroundColor:"var(--node-color-pressed)"})])]),Pe("pending",[ne("tree-node-content",`
 background-color: var(--node-color-hover);
 `)]),Pe("selected",[ne("tree-node-content",{backgroundColor:"var(--node-color-active)"})])])])]),Pe("block-line",[ne("tree-node",[Cn("disabled",[we("&:hover",{backgroundColor:"var(--node-color-hover)"}),Pe("selectable",[we("&:active",{backgroundColor:"var(--node-color-pressed)"})]),Pe("pending",`
 background-color: var(--node-color-hover);
 `),Pe("selected",{backgroundColor:"var(--node-color-active)"})]),Pe("disabled",`
 cursor: not-allowed;
 `)])]),ne("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: 24px;
 width: 24px;
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--bezier);
 vertical-align: bottom;
 `,[xe("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--arrow-color);
 transition: color .3s var(--bezier);
 font-size: 14px;
 `,[ne("icon",[oh()]),ne("base-loading",`
 color: var(--loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[oh()])]),Pe("hide",{visibility:"hidden"}),Pe("expanded",{transform:"rotate(90deg)"})]),ne("tree-node-checkbox",`
 display: inline-flex;
 height: 24px;
 width: 16px;
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 margin-right: 4px;
 `),ne("tree-node-content",`
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: 24px;
 box-sizing: border-box;
 line-height: 1.5;
 vertical-align: bottom;
 padding: 0 6px;
 cursor: default;
 border-radius: var(--node-border-radius);
 text-decoration-color: #0000;
 text-decoration-line: underline;
 color: var(--node-text-color);
 transition:
 color .3s var(--bezier),
 text-decoration-color .3s var(--bezier),
 background-color .3s var(--bezier),
 border-color .3s var(--bezier);
 `,[we("&:last-child",{marginBottom:0}),xe("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),xe("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--bezier);
 flex-grow:1;
 `),xe("suffix",`
 display: inline-flex;
 `)])]),$Xe=globalThis&&globalThis.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(r,t||[])).next())})};const PC=30;function eD(r,t){return{getKey(e){return e[r]},getChildren(e){return e[t]},getDisabled(e){return!!(e.disabled||e.checkboxDisabled)}}}const YK={filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array]},zXe=Object.assign(Object.assign(Object.assign(Object.assign({},rr.props),{data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},remote:Boolean,leafOnly:Boolean,multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},indent:{type:Number,default:16},allowDrop:{type:Function,default:RXe},animated:{type:Boolean,default:!0},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),YK),{internalScrollable:Boolean,internalScrollablePadding:String,internalDataTreeMate:Object,internalDisplayTreeMate:Object,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalHideFilteredNode:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"}});var GXe=mt({name:"Tree",props:zXe,setup(r){const{mergedClsPrefixRef:t}=pn(r),e=rr("Tree","Tree",BXe,GK,r,t),n=ke(null),i=ke(null),a=ke(null);function o(){var qe;return(qe=a.value)===null||qe===void 0?void 0:qe.listElRef}function s(){var qe;return(qe=a.value)===null||qe===void 0?void 0:qe.itemsElRef}const l=r.internalDisplayTreeMate?Ht(r,"internalDisplayTreeMate"):Q(()=>lh(r.data,eD(r.keyField,r.childrenField))),u=r.internalDataTreeMate?Ht(r,"internalDataTreeMate"):l,{watchProps:c}=r,f=ke([]);(c==null?void 0:c.includes("defaultCheckedKeys"))?Co(()=>{f.value=r.defaultCheckedKeys}):f.value=r.defaultCheckedKeys;const d=Ht(r,"checkedKeys"),h=ri(d,f),v=Q(()=>u.value.getCheckedKeys(h.value,{cascade:r.cascade})),p=Q(()=>r.leafOnly?"child":r.checkStrategy),g=Q(()=>v.value.checkedKeys),m=Q(()=>{const{indeterminateKeys:qe}=r;return qe!==void 0?qe:v.value.indeterminateKeys}),y=ke([]);(c==null?void 0:c.includes("defaultSelectedKeys"))?Co(()=>{y.value=r.defaultSelectedKeys}):y.value=r.defaultSelectedKeys;const b=Ht(r,"selectedKeys"),x=ri(b,y),w=ke([]),S=()=>{w.value=r.defaultExpandAll?u.value.getNonLeafKeys():r.defaultExpandedKeys};(c==null?void 0:c.includes("defaultExpandedKeys"))?Co(S):S();const C=Ht(r,"expandedKeys"),_=ri(C,w),T=Q(()=>l.value.getFlattenedNodes(_.value)),{pendingNodeKeyRef:E,handleKeyup:k,handleKeydown:I}=FXe({mergedSelectedKeysRef:x,fNodesRef:T,mergedExpandedKeysRef:_,handleSelect:ye,handleSwitcherClick:Se});let P=null,F=null;const $=ke(new Set),R=Ht(r,"internalHighlightKeySet"),L=ri(R,$),O=ke(new Set),B=Q(()=>_.value.filter(qe=>!O.value.has(qe)));let U=0;const W=ke(null),X=ke(null),ie=ke(null),q=ke(null),j=ke(0),fe=Q(()=>{const{value:qe}=X;return qe?qe.parent:null}),se=Q(()=>{const{filter:qe}=r;if(qe)return qe;const{labelField:st}=r;return(Rt,Nt)=>Rt.length?Nt[st].toLowerCase().includes(Rt.toLowerCase()):!0});nn(Ht(r,"data"),()=>{O.value.clear(),E.value=null,ee()},{deep:!1}),nn(Ht(r,"pattern"),qe=>{if(qe){const{expandedKeys:st,highlightKeySet:Rt}=LXe(r.data,r.pattern,r.keyField,r.childrenField,se.value);$.value=Rt,he(st,V(st))}else $.value=new Set});function ce(qe){return $Xe(this,void 0,void 0,function*(){const{onLoad:st}=r;if(!st)return yield Promise.resolve();const{value:Rt}=O;return yield new Promise(Nt=>{Rt.has(qe.key)||(Rt.add(qe.key),st(qe.rawNode).then(()=>{Rt.delete(qe.key),Nt()}).catch(sr=>{console.error(sr),Ve()}))})})}Co(()=>{var qe;const{value:st}=l;if(!st)return;const{getNode:Rt}=st;(qe=_.value)===null||qe===void 0||qe.forEach(Nt=>{const sr=Rt(Nt);sr&&!sr.shallowLoaded&&ce(sr)})});const _e=ke(!1),Me=ke([]);nn(B,(qe,st)=>{if(!r.animated){oa(D);return}const Rt=new Set(st);let Nt=null,sr=null;for(const jr of qe)if(!Rt.has(jr)){if(Nt!==null)return;Nt=jr}const fn=new Set(qe);for(const jr of st)if(!fn.has(jr)){if(sr!==null)return;sr=jr}if(Nt!==null&&sr!==null||Nt===null&&sr===null)return;const{virtualScroll:on}=r,ln=(on?a.value.listElRef:n.value).offsetHeight,Pn=Math.ceil(ln/PC)+1;if(Nt!==null){_e.value=!0,Me.value=l.value.getFlattenedNodes(st);const jr=Me.value.findIndex(hr=>hr.key===Nt);if(~jr){const hr=eP(Me.value[jr].children,qe);Me.value.splice(jr+1,0,{__motion:!0,mode:"expand",height:on?hr.length*PC:void 0,nodes:on?hr.slice(0,Pn):hr})}}if(sr!==null){_e.value=!0,Me.value=l.value.getFlattenedNodes(qe);const jr=Me.value.findIndex(hr=>hr.key===sr);if(~jr){const hr=eP(Me.value[jr].children,qe);Me.value.splice(jr+1,0,{__motion:!0,mode:"collapse",height:on?hr.length*PC:void 0,nodes:on?hr.slice(0,Pn):hr})}}});const Ye=Q(()=>RX(T.value)),De=Q(()=>_e.value?Me.value:T.value);function D(){const{value:qe}=i;qe&&qe.sync()}function z(){_e.value=!1,r.virtualScroll&&oa(D)}function V(qe){const{getNode:st}=u.value;return qe.map(Rt=>{var Nt;return((Nt=st(Rt))===null||Nt===void 0?void 0:Nt.rawNode)||null})}function he(qe,st){const{"onUpdate:expandedKeys":Rt,onUpdateExpandedKeys:Nt}=r;w.value=qe,Rt&&pt(Rt,qe,st),Nt&&pt(Nt,qe,st)}function re(qe,st){const{"onUpdate:checkedKeys":Rt,onUpdateCheckedKeys:Nt}=r;f.value=qe,Nt&&pt(Nt,qe,st),Rt&&pt(Rt,qe,st)}function pe(qe,st){const{"onUpdate:indeterminateKeys":Rt,onUpdateIndeterminateKeys:Nt}=r;Rt&&pt(Rt,qe,st),Nt&&pt(Nt,qe,st)}function Je(qe,st){const{"onUpdate:selectedKeys":Rt,onUpdateSelectedKeys:Nt}=r;y.value=qe,Nt&&pt(Nt,qe,st),Rt&&pt(Rt,qe,st)}function We(qe){const{onDragenter:st}=r;st&&pt(st,qe)}function Le(qe){const{onDragleave:st}=r;st&&pt(st,qe)}function $e(qe){const{onDragend:st}=r;st&&pt(st,qe)}function H(qe){const{onDragstart:st}=r;st&&pt(st,qe)}function Y(qe){const{onDragover:st}=r;st&&pt(st,qe)}function K(qe){const{onDrop:st}=r;st&&pt(st,qe)}function ee(){J(),ge()}function J(){W.value=null}function ge(){j.value=0,X.value=null,ie.value=null,q.value=null,Ve()}function Ve(){P&&(window.clearTimeout(P),P=null),F=null}function Ge(qe,st){if(r.disabled||qe.disabled)return;if(r.internalUnifySelectCheck&&!r.multiple){ye(qe);return}const{checkedKeys:Rt,indeterminateKeys:Nt}=u.value[st?"check":"uncheck"](qe.key,g.value,{cascade:r.cascade,checkStrategy:p.value});re(Rt,V(Rt)),pe(Nt,V(Nt))}function rt(qe){if(r.disabled)return;const{value:st}=_,Rt=st.findIndex(Nt=>Nt===qe);if(~Rt){const Nt=Array.from(st);Nt.splice(Rt,1),he(Nt,V(Nt))}else{const Nt=l.value.getNode(qe);if(!Nt||Nt.isLeaf)return;const sr=st.concat(qe);he(sr,V(sr))}}function Se(qe){r.disabled||_e.value||rt(qe.key)}function ye(qe){if(!(r.disabled||qe.disabled||!r.selectable||p.value==="child"&&!qe.isLeaf)){if(E.value=qe.key,r.internalUnifySelectCheck){const{value:{checkedKeys:st,indeterminateKeys:Rt}}=v;r.multiple?Ge(qe,!(st.includes(qe.key)||Rt.includes(qe.key))):re([qe.key],V([qe.key]))}if(r.multiple){const st=Array.from(x.value),Rt=st.findIndex(Nt=>Nt===qe.key);~Rt?r.cancelable&&st.splice(Rt,1):~Rt||st.push(qe.key),Je(st,V(st))}else x.value.includes(qe.key)?r.cancelable&&Je([],[]):Je([qe.key],V([qe.key]))}}function Re(qe){if(P&&(window.clearTimeout(P),P=null),qe.isLeaf)return;F=qe.key;const st=()=>{if(F!==qe.key)return;const{value:Rt}=ie;if(Rt&&Rt.key===qe.key&&!_.value.includes(qe.key)){const Nt=_.value.concat(qe.key);he(Nt,V(Nt))}P=null,F=null};qe.shallowLoaded?P=window.setTimeout(()=>{st()},1e3):P=window.setTimeout(()=>{ce(qe).then(()=>{st()})},1e3)}function St({event:qe,node:st}){!r.draggable||r.disabled||st.disabled||(Ne({event:qe,node:st},!1),We({event:qe,node:st.rawNode}))}function kt({event:qe,node:st}){!r.draggable||r.disabled||st.disabled||Le({event:qe,node:st.rawNode})}function Ae(qe){qe.target===qe.currentTarget&&ge()}function ut({event:qe,node:st}){ee(),!(!r.draggable||r.disabled||st.disabled)&&$e({event:qe,node:st.rawNode})}function cr({event:qe,node:st}){var Rt;!r.draggable||r.disabled||st.disabled||(WK&&((Rt=qe.dataTransfer)===null||Rt===void 0||Rt.setDragImage(WK,0,0)),U=qe.clientX,W.value=st,H({event:qe,node:st.rawNode}))}function Ne({event:qe,node:st},Rt=!0){var Nt;if(!r.draggable||r.disabled||st.disabled)return;const{value:sr}=W;if(!sr)return;const{allowDrop:fn,indent:on}=r;Rt&&Y({event:qe,node:st.rawNode});const ln=qe.currentTarget,{height:Pn,top:jr}=ln.getBoundingClientRect(),hr=qe.clientY-jr;let Wr;fn({node:st.rawNode,dropPosition:"inside",phase:"drag"})?hr<=8?Wr="before":hr>=Pn-8?Wr="after":Wr="inside":hr<=Pn/2?Wr="before":Wr="after";const{value:dn}=Ye;let Pr,Xn;const ra=dn(st.key);if(ra===null){ge();return}let yo=!1;Wr==="inside"?(Pr=st,Xn="inside"):Wr==="before"?st.isFirstChild?(Pr=st,Xn="before"):(Pr=T.value[ra-1],Xn="after"):(Pr=st,Xn="after"),!Pr.isLeaf&&_.value.includes(Pr.key)&&(yo=!0,Xn==="after"&&(Pr=T.value[ra+1],Pr?Xn="before":(Pr=st,Xn="inside")));const es=Pr;if(ie.value=es,!yo&&sr.isLastChild&&sr.key===Pr.key&&(Xn="after"),Xn==="after"){let ts=U-qe.clientX,Do=0;for(;ts>=on/2&&Pr.parent!==null&&Pr.isLastChild&&Do<1;)ts-=on,Do+=1,Pr=Pr.parent;j.value=Do}else j.value=0;if((sr.contains(Pr)||Xn==="inside"&&((Nt=sr.parent)===null||Nt===void 0?void 0:Nt.key)===Pr.key)&&!(sr.key===es.key&&sr.key===Pr.key)){ge();return}if(!fn({node:Pr.rawNode,dropPosition:Xn,phase:"drag"})){ge();return}if(sr.key===Pr.key)Ve();else if(F!==Pr.key)if(Xn==="inside"){if(r.expandOnDragenter){if(Re(Pr),!Pr.shallowLoaded&&F!==Pr.key){ee();return}}else if(!Pr.shallowLoaded){ee();return}}else Ve();else Xn!=="inside"&&Ve();q.value=Xn,X.value=Pr}function vt({event:qe,node:st,dropPosition:Rt}){if(!r.draggable||r.disabled||st.disabled)return;const{value:Nt}=W,{value:sr}=X,{value:fn}=q;if(!(!Nt||!sr||!fn)&&!!r.allowDrop({node:sr.rawNode,dropPosition:fn,phase:"drag"})&&Nt.key!==sr.key){if(fn==="before"){const on=Nt.getNext({includeDisabled:!0});if(on&&on.key===sr.key){ge();return}}if(fn==="after"){const on=Nt.getPrev({includeDisabled:!0});if(on&&on.key===sr.key){ge();return}}K({event:qe,node:sr.rawNode,dragNode:Nt.rawNode,dropPosition:Rt}),ee()}}function Ft(){D()}function vr(){D()}function zr(qe){var st;if(r.virtualScroll||r.internalScrollable){const{value:Rt}=i;if((st=Rt==null?void 0:Rt.containerRef)===null||st===void 0?void 0:st.contains(qe.relatedTarget))return;E.value=null}else{const{value:Rt}=n;if(Rt==null?void 0:Rt.contains(qe.relatedTarget))return;E.value=null}}nn(E,qe=>{var st,Rt;if(qe!==null){if(r.virtualScroll)(st=a.value)===null||st===void 0||st.scrollTo({key:qe});else if(r.internalScrollable){const{value:Nt}=i;if(Nt===null)return;const sr=(Rt=Nt.contentRef)===null||Rt===void 0?void 0:Rt.querySelector(`[data-key="${wX(qe)}"]`);if(!sr)return;Nt.scrollTo({el:sr})}}}),Qr(IC,{loadingKeysRef:O,highlightKeySetRef:L,displayedCheckedKeysRef:g,displayedIndeterminateKeysRef:m,mergedSelectedKeysRef:x,mergedExpandedKeysRef:_,mergedThemeRef:e,mergedCheckStrategyRef:p,disabledRef:Ht(r,"disabled"),checkableRef:Ht(r,"checkable"),selectableRef:Ht(r,"selectable"),remoteRef:Ht(r,"remote"),onLoadRef:Ht(r,"onLoad"),draggableRef:Ht(r,"draggable"),blockLineRef:Ht(r,"blockLine"),indentRef:Ht(r,"indent"),cascadeRef:Ht(r,"cascade"),droppingMouseNodeRef:ie,droppingNodeParentRef:fe,draggingNodeRef:W,droppingPositionRef:q,droppingOffsetLevelRef:j,fNodesRef:T,pendingNodeKeyRef:E,internalScrollableRef:Ht(r,"internalScrollable"),internalCheckboxFocusableRef:Ht(r,"internalCheckboxFocusable"),renderLabelRef:Ht(r,"renderLabel"),renderPrefixRef:Ht(r,"renderPrefix"),renderSuffixRef:Ht(r,"renderSuffix"),labelFieldRef:Ht(r,"labelField"),handleSwitcherClick:Se,handleDragEnd:ut,handleDragEnter:St,handleDragLeave:kt,handleDragStart:cr,handleDrop:vt,handleDragOver:Ne,handleSelect:ye,handleCheck:Ge});const or={handleKeydown:I,handleKeyup:k};return Object.assign({mergedClsPrefix:t,mergedTheme:e,fNodes:De,aip:_e,selfElRef:n,virtualListInstRef:a,scrollbarInstRef:i,handleFocusout:zr,handleDragLeaveTree:Ae,handleScroll:Ft,getScrollContainer:o,getScrollContent:s,handleAfterEnter:z,handleResize:vr,cssVars:Q(()=>{const{common:{cubicBezierEaseInOut:qe},self:{fontSize:st,nodeBorderRadius:Rt,nodeColorHover:Nt,nodeColorPressed:sr,nodeColorActive:fn,arrowColor:on,loadingColor:ln,nodeTextColor:Pn,nodeTextColorDisabled:jr,dropMarkColor:hr}}=e.value;return{"--arrow-color":on,"--loading-color":ln,"--bezier":qe,"--font-size":st,"--node-border-radius":Rt,"--node-color-active":fn,"--node-color-hover":Nt,"--node-color-pressed":sr,"--node-text-color":Pn,"--node-text-color-disabled":jr,"--drop-mark-color":hr}})},or)},render(){const{mergedClsPrefix:r,blockNode:t,blockLine:e,draggable:n,disabled:i,internalFocusable:a,handleKeyup:o,handleKeydown:s,handleFocusout:l}=this,u=a&&!i,c=u?"0":void 0,f=[`${r}-tree`,(e||t)&&`${r}-tree--block-node`,e&&`${r}-tree--block-line`],d=v=>"__motion"in v?M(NXe,{height:v.height,nodes:v.nodes,clsPrefix:r,mode:v.mode,onAfterEnter:this.handleAfterEnter}):M(VK,{key:v.key,tmNode:v,clsPrefix:r});if(this.virtualScroll){const{mergedTheme:v,internalScrollablePadding:p}=this,g=Sp(p||"0");return M(nq,{ref:"scrollbarInstRef",onDragleave:n?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:f,theme:v.peers.Scrollbar,themeOverrides:v.peerOverrides.Scrollbar,tabindex:c,onKeyup:u?o:void 0,onKeydown:u?s:void 0,onFocusout:u?l:void 0},{default:()=>M(oC,{ref:"virtualListInstRef",items:this.fNodes,itemSize:PC,ignoreItemResize:this.aip,paddingTop:g.top,paddingBottom:g.bottom,style:[this.cssVars,{paddingLeft:g.left,paddingRight:g.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:m})=>d(m)})})}const{internalScrollable:h}=this;return h?M(nq,{class:f,tabindex:c,onKeyup:u?o:void 0,onKeydown:u?s:void 0,onFocusout:u?l:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}},{default:()=>M("div",{onDragleave:n?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(d))}):M("div",{class:f,tabindex:c,ref:"selfElRef",style:this.cssVars,onKeyup:u?o:void 0,onKeydown:u?s:void 0,onFocusout:u?l:void 0,onDragleave:n?this.handleDragLeaveTree:void 0},this.fNodes.map(d))}});const UXe=r=>{const{popoverColor:t,boxShadow2:e,borderRadius:n,heightMedium:i}=r;return{menuPadding:"4px",menuColor:t,menuBoxShadow:e,menuBorderRadius:n,menuHeight:`calc(${i} * 7.6)`}},VXe=ro({name:"TreeSelect",common:Bn,peers:{Tree:GK,Empty:sC,InternalSelection:hP},self:UXe});var HXe=VXe;function XK(r,t){const{rawNode:e}=r;return Object.assign(Object.assign({},e),{label:e[t],value:r.key})}function qK(r,t,e,n){const{rawNode:i}=r;return Object.assign(Object.assign({},i),{value:r.key,label:t.map(a=>a.rawNode[n]).join(e)})}function WXe(r,t,e,n){const i=new Set,a=new Set,o=new Set,s=[],l=[],u=[];function c(d){d.forEach(h=>{if(u.push(h),t(e,h)){i.add(h[n]),o.add(h[n]);for(let v=u.length-2;v>=0;--v){const p=u[v][n];if(!a.has(p))a.add(p),i.has(p)&&i.delete(p);else break}}h.children&&c(h.children),u.pop()})}c(r);function f(d,h){d.forEach(v=>{const p=v[n],g=i.has(p),m=a.has(p);if(!g&&!m)return;const{children:y}=v;if(y)if(g)h.push(v);else{s.push(p);const b=Object.assign(Object.assign({},v),{children:[]});h.push(b),f(y,b.children)}else h.push(v)})}return f(r,l),{filteredTree:l,highlightKeySet:o,expandedKeys:s}}var jXe=we([ne("tree-select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 `),ne("tree-select-menu",`
 position: relative;
 overflow: hidden;
 margin: 4px 0;
 max-height: var(--menu-height);
 transition: box-shadow .3s var(--bezier), background-color .3s var(--bezier);
 border-radius: var(--menu-border-radius);
 box-shadow: var(--menu-box-shadow);
 background-color: var(--menu-color);
 outline: none;
 `,[ne("tree","max-height: inherit;"),xe("empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),qu()])]);const YXe=Object.assign(Object.assign(Object.assign(Object.assign({},rr.props),{bordered:{type:Boolean,default:!0},cascade:Boolean,checkable:Boolean,clearable:Boolean,consistentMenuWidth:{type:Boolean,default:!0},defaultShow:Boolean,defaultValue:{type:[String,Number,Array],default:null},disabled:{type:Boolean,default:void 0},filterable:Boolean,checkStrategy:{type:String,default:"all"},maxTagCount:[String,Number],multiple:Boolean,showPath:Boolean,separator:{type:String,default:" / "},options:{type:Array,default:()=>[]},placeholder:String,placement:{type:String,default:"bottom-start"},show:{type:Boolean,default:void 0},size:String,value:[String,Number,Array],to:Ua.propTo,virtualScroll:{type:Boolean,default:!0}}),YK),{onBlur:Function,onFocus:Function,onUpdateShow:[Function,Array],onUpdateValue:[Function,Array],"onUpdate:value":[Function,Array],"onUpdate:show":[Function,Array],leafOnly:{type:Boolean,default:void 0}});var Vdt=mt({name:"TreeSelect",props:YXe,setup(r){const t=ke(null),e=ke(null),n=ke(null),i=ke(null),{mergedClsPrefixRef:a,namespaceRef:o}=pn(r),{localeRef:s}=sf("Select"),{mergedSizeRef:l,mergedDisabledRef:u,nTriggerFormBlur:c,nTriggerFormChange:f,nTriggerFormFocus:d,nTriggerFormInput:h}=fl(r),v=ke(r.defaultValue),p=Ht(r,"value"),g=ri(p,v),m=ke(r.defaultShow),y=Ht(r,"show"),b=ri(y,m),x=ke(""),w=Q(()=>{const{filter:ye}=r;if(ye)return ye;const{labelField:Re}=r;return(St,kt)=>St.length?kt[Re].toLowerCase().includes(St.toLowerCase()):!0}),S=Q(()=>{if(!r.filterable)return{filteredTree:r.options,highlightKeySet:void 0,expandedKeys:void 0};const{value:ye}=x;return!ye.length||!w.value?{filteredTree:r.options,highlightKeySet:void 0,expandedKeys:void 0}:WXe(r.options,w.value,ye,r.keyField)}),C=Q(()=>lh(r.options,eD(r.keyField,r.childrenField))),_=Q(()=>lh(S.value.filteredTree,eD(r.keyField,r.childrenField))),{value:T}=g,E=ke(r.checkable?null:Array.isArray(T)&&T.length?T[T.length-1]:null),k=Q(()=>r.multiple&&r.cascade&&r.checkable),I=ke(r.defaultExpandAll?_.value.getNonLeafKeys():r.defaultExpandedKeys||r.expandedKeys),P=Ht(r,"expandedKeys"),F=ri(P,I),$=ke(!1),R=Q(()=>{const{placeholder:ye}=r;return ye!==void 0?ye:s.value.placeholder}),L=Q(()=>r.checkable?[]:O.value),O=Q(()=>{const{value:ye}=g;return r.multiple?Array.isArray(ye)?ye:[]:ye===null||Array.isArray(ye)?[]:[ye]}),B=Q(()=>{const{multiple:ye,showPath:Re,separator:St,labelField:kt}=r;if(ye)return null;const{value:Ae}=g;if(!Array.isArray(Ae)&&Ae!==null){const{value:ut}=C,cr=ut.getNode(Ae);if(cr!==null)return Re?qK(cr,ut.getPath(Ae).treeNodePath,St,kt):XK(cr,kt)}return null}),U=Q(()=>{const{multiple:ye,showPath:Re,separator:St}=r;if(!ye)return null;const{value:kt}=g;if(Array.isArray(kt)){const Ae=[],{value:ut}=C,{checkedKeys:cr}=ut.getCheckedKeys(kt,{checkStrategy:r.checkStrategy,cascade:k.value}),{labelField:Ne}=r;return cr.forEach(vt=>{const Ft=ut.getNode(vt);Ft!==null&&Ae.push(Re?qK(Ft,ut.getPath(vt).treeNodePath,St,Ne):XK(Ft,Ne))}),Ae}return[]}),W=Q(()=>{const{self:{menuPadding:ye}}=Se.value;return ye});function X(){var ye;(ye=e.value)===null||ye===void 0||ye.focus()}function ie(){var ye;(ye=e.value)===null||ye===void 0||ye.focusInput()}function q(ye){const{onUpdateShow:Re,"onUpdate:show":St}=r;Re&&pt(Re,ye),St&&pt(St,ye),m.value=ye}function j(ye,Re){const{onUpdateValue:St,"onUpdate:value":kt}=r;St&&pt(St,ye,Re),kt&&pt(kt,ye,Re),v.value=ye,h(),f()}function fe(ye,Re){const{onUpdateIndeterminateKeys:St,"onUpdate:indeterminateKeys":kt}=r;St&&pt(St,ye,Re),kt&&pt(kt,ye,Re)}function se(ye,Re){const{onUpdateExpandedKeys:St,"onUpdate:expandedKeys":kt}=r;St&&pt(St,ye,Re),kt&&pt(kt,ye,Re),I.value=ye}function ce(ye){const{onFocus:Re}=r;Re&&Re(ye),d()}function _e(ye){Me();const{onBlur:Re}=r;Re&&Re(ye),c()}function Me(){q(!1)}function Ye(){u.value||(x.value="",q(!0),r.filterable&&ie())}function De(){x.value=""}function D(ye){var Re;b.value&&(((Re=e.value)===null||Re===void 0?void 0:Re.$el.contains(ye.target))||Me())}function z(){u.value||(b.value?r.filterable||Me():Ye())}function V(ye){const{value:{getNode:Re}}=C;return ye.map(St=>{var kt;return((kt=Re(St))===null||kt===void 0?void 0:kt.rawNode)||null})}function he(ye){const Re=V(ye);r.multiple?j(ye,Re):(ye.length?j(ye[0],Re[0]||null):j(null,null),Me(),r.filterable||X()),r.filterable&&(ie(),x.value="")}function re(ye){r.checkable&&fe(ye,V(ye))}function pe(ye){var Re;((Re=i.value)===null||Re===void 0?void 0:Re.contains(ye.relatedTarget))||($.value=!0,ce(ye))}function Je(ye){var Re;((Re=i.value)===null||Re===void 0?void 0:Re.contains(ye.relatedTarget))||($.value=!1,_e(ye))}function We(ye){var Re,St,kt;((Re=i.value)===null||Re===void 0?void 0:Re.contains(ye.relatedTarget))||((kt=(St=e.value)===null||St===void 0?void 0:St.$el)===null||kt===void 0?void 0:kt.contains(ye.relatedTarget))||($.value=!0,ce(ye))}function Le(ye){var Re,St,kt;((Re=i.value)===null||Re===void 0?void 0:Re.contains(ye.relatedTarget))||((kt=(St=e.value)===null||St===void 0?void 0:St.$el)===null||kt===void 0?void 0:kt.contains(ye.relatedTarget))||($.value=!1,_e(ye))}function $e(ye){ye.stopPropagation();const{multiple:Re}=r;!Re&&r.filterable&&Me(),Re?j([],[]):j(null,null)}function H(ye){const{value:Re}=g;if(Array.isArray(Re)){const St=Re.findIndex(kt=>kt===ye.value);if(~St)if(r.checkable){const{checkedKeys:kt}=C.value.uncheck(ye.value,Re,{cascade:k.value});j(kt,V(kt))}else{const kt=Array.from(Re);kt.splice(St,1),j(kt,V(kt))}}}function Y(ye){const{value:Re}=ye.target;x.value=Re}function K(ye){const{value:Re}=n;Re&&Re.handleKeydown(ye)}function ee(ye){ye.code==="Enter"||ye.code==="NumpadEnter"?(b.value?(J(ye),r.multiple||(Me(),X())):Ye(),ye.preventDefault()):ye.code==="Escape"?(Me(),X()):b.value?J(ye):ye.code==="ArrowDown"&&Ye()}function J(ye){const{value:Re}=n;Re&&Re.handleKeyup(ye)}function ge(){Me(),X()}function Ve(ye){ye.preventDefault()}Qr(jK,{pendingNodeKeyRef:E});function Ge(){var ye;(ye=t.value)===null||ye===void 0||ye.syncPosition()}nn(g,()=>{!b.value||oa(Ge)});let rt;nn(x,(ye,Re)=>{if(!ye.length)rt!==void 0&&se(rt,V(rt));else{Re.length||(rt=F.value);const{expandedKeys:St}=S.value;St!==void 0&&se(St,V(St))}});const Se=rr("TreeSelect","TreeSelect",jXe,HXe,r,a);return{menuElRef:i,triggerInstRef:e,followerInstRef:t,treeInstRef:n,mergedClsPrefix:a,mergedValue:g,mergedShow:b,namespace:o,adjustedTo:Ua(r),isMounted:of(),focused:$,filteredTreeInfo:S,dataTreeMate:C,displayTreeMate:_,menuPadding:W,mergedPlaceholder:R,mergedExpandedKeys:F,treeSelectedKeys:L,treeCheckedKeys:O,mergedSize:l,mergedDisabled:u,selectedOption:B,selectedOptions:U,pattern:x,pendingNodeKey:E,mergedCascade:k,doUpdateExpandedKeys:se,handleMenuLeave:De,handleTriggerClick:z,handleMenuClickoutside:D,handleUpdateCheckedKeys:he,handleUpdateIndeterminateKeys:re,handleTriggerFocus:pe,handleTriggerBlur:Je,handleMenuFocusin:We,handleMenuFocusout:Le,handleClear:$e,handleDeleteOption:H,handlePatternInput:Y,handleKeydown:K,handleKeyup:ee,handleTabOut:ge,handleMenuMousedown:Ve,cssVars:Q(()=>{const{common:{cubicBezierEaseInOut:ye},self:{menuBoxShadow:Re,menuBorderRadius:St,menuColor:kt,menuHeight:Ae}}=Se.value;return{"--menu-box-shadow":Re,"--menu-border-radius":St,"--menu-color":kt,"--menu-height":Ae,"--bezier":ye}}),mergedTheme:Se}},render(){const{mergedTheme:r,mergedClsPrefix:t}=this;return M("div",{class:`${t}-tree-select`},M(Lp,null,{default:()=>[M(Fp,null,{default:()=>M(dq,{ref:"triggerInstRef",focused:this.focused,clsPrefix:t,theme:r.peers.InternalSelection,themeOverrides:r.peerOverrides.InternalSelection,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,size:this.mergedSize,bordered:this.bordered,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,active:this.mergedShow,multiple:this.multiple,maxTagCount:this.maxTagCount,showArrow:!0,filterable:this.filterable,clearable:this.clearable,pattern:this.pattern,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onBlur:this.handleTriggerBlur,onDeleteOption:this.handleDeleteOption,onKeydown:this.handleKeydown,onKeyup:this.handleKeyup})}),M($p,{ref:"followerInstRef",show:this.mergedShow,placement:this.placement,to:this.adjustedTo,teleportDisabled:this.adjustedTo===Ua.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target"},{default:()=>M(pa,{name:"fade-in-scale-up-transition",appear:this.isMounted,onLeave:this.handleMenuLeave},{default:()=>{if(!this.mergedShow)return null;const{mergedClsPrefix:e,filteredTreeInfo:n,checkable:i,multiple:a}=this;return Cl(M("div",{class:`${e}-tree-select-menu`,ref:"menuElRef",style:this.cssVars,tabindex:0,onMousedown:this.handleMenuMousedown,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown,onFocusin:this.handleMenuFocusin,onFocusout:this.handleMenuFocusout},n.filteredTree.length?M(GXe,{ref:"treeInstRef",blockLine:!0,animated:!1,data:n.filteredTree,cancelable:a,labelField:this.labelField,theme:r.peers.Tree,themeOverrides:r.peerOverrides.Tree,defaultExpandAll:this.defaultExpandAll,defaultExpandedKeys:this.defaultExpandedKeys,expandedKeys:this.mergedExpandedKeys,checkedKeys:this.treeCheckedKeys,selectedKeys:this.treeSelectedKeys,checkable:i,checkStrategy:this.checkStrategy,cascade:this.mergedCascade,leafOnly:this.leafOnly,multiple:this.multiple,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,internalDataTreeMate:this.dataTreeMate,internalDisplayTreeMate:this.displayTreeMate,internalHighlightKeySet:n.highlightKeySet,internalUnifySelectCheck:!0,internalScrollable:!0,internalScrollablePadding:this.menuPadding,internalFocusable:!1,internalCheckboxFocusable:!1,onUpdateCheckedKeys:this.handleUpdateCheckedKeys,onUpdateIndeterminateKeys:this.handleUpdateIndeterminateKeys,onUpdateExpandedKeys:this.doUpdateExpandedKeys}):M("div",{class:`${e}-tree-select-menu__empty`},M(sP,{theme:r.peers.Empty,themeOverrides:r.peerOverrides.Empty})),M(lf,{onFocus:this.handleTabOut})),[[cf,this.handleMenuClickoutside]])}})})]}))}}),Hdt=$r(function(r,t){(function(e,n){r.exports=n()})(Lc,function(){var e=1e3,n=6e4,i=36e5,a="millisecond",o="second",s="minute",l="hour",u="day",c="week",f="month",d="quarter",h="year",v="date",p="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},b=function(P,F,$){var R=String(P);return!R||R.length>=F?P:""+Array(F+1-R.length).join($)+P},x={s:b,z:function(P){var F=-P.utcOffset(),$=Math.abs(F),R=Math.floor($/60),L=$%60;return(F<=0?"+":"-")+b(R,2,"0")+":"+b(L,2,"0")},m:function P(F,$){if(F.date()<$.date())return-P($,F);var R=12*($.year()-F.year())+($.month()-F.month()),L=F.clone().add(R,f),O=$-L<0,B=F.clone().add(R+(O?-1:1),f);return+(-(R+($-L)/(O?L-B:B-L))||0)},a:function(P){return P<0?Math.ceil(P)||0:Math.floor(P)},p:function(P){return{M:f,y:h,w:c,d:u,D:v,h:l,m:s,s:o,ms:a,Q:d}[P]||String(P||"").toLowerCase().replace(/s$/,"")},u:function(P){return P===void 0}},w="en",S={};S[w]=y;var C=function(P){return P instanceof k},_=function(P,F,$){var R;if(!P)return w;if(typeof P=="string")S[P]&&(R=P),F&&(S[P]=F,R=P);else{var L=P.name;S[L]=P,R=L}return!$&&R&&(w=R),R||!$&&w},T=function(P,F){if(C(P))return P.clone();var $=typeof F=="object"?F:{};return $.date=P,$.args=arguments,new k($)},E=x;E.l=_,E.i=C,E.w=function(P,F){return T(P,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var k=function(){function P($){this.$L=_($.locale,null,!0),this.parse($)}var F=P.prototype;return F.parse=function($){this.$d=function(R){var L=R.date,O=R.utc;if(L===null)return new Date(NaN);if(E.u(L))return new Date;if(L instanceof Date)return new Date(L);if(typeof L=="string"&&!/Z$/i.test(L)){var B=L.match(g);if(B){var U=B[2]-1||0,W=(B[7]||"0").substring(0,3);return O?new Date(Date.UTC(B[1],U,B[3]||1,B[4]||0,B[5]||0,B[6]||0,W)):new Date(B[1],U,B[3]||1,B[4]||0,B[5]||0,B[6]||0,W)}}return new Date(L)}($),this.$x=$.x||{},this.init()},F.init=function(){var $=this.$d;this.$y=$.getFullYear(),this.$M=$.getMonth(),this.$D=$.getDate(),this.$W=$.getDay(),this.$H=$.getHours(),this.$m=$.getMinutes(),this.$s=$.getSeconds(),this.$ms=$.getMilliseconds()},F.$utils=function(){return E},F.isValid=function(){return this.$d.toString()!==p},F.isSame=function($,R){var L=T($);return this.startOf(R)<=L&&L<=this.endOf(R)},F.isAfter=function($,R){return T($)<this.startOf(R)},F.isBefore=function($,R){return this.endOf(R)<T($)},F.$g=function($,R,L){return E.u($)?this[R]:this.set(L,$)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function($,R){var L=this,O=!!E.u(R)||R,B=E.p($),U=function(ce,_e){var Me=E.w(L.$u?Date.UTC(L.$y,_e,ce):new Date(L.$y,_e,ce),L);return O?Me:Me.endOf(u)},W=function(ce,_e){return E.w(L.toDate()[ce].apply(L.toDate("s"),(O?[0,0,0,0]:[23,59,59,999]).slice(_e)),L)},X=this.$W,ie=this.$M,q=this.$D,j="set"+(this.$u?"UTC":"");switch(B){case h:return O?U(1,0):U(31,11);case f:return O?U(1,ie):U(0,ie+1);case c:var fe=this.$locale().weekStart||0,se=(X<fe?X+7:X)-fe;return U(O?q-se:q+(6-se),ie);case u:case v:return W(j+"Hours",0);case l:return W(j+"Minutes",1);case s:return W(j+"Seconds",2);case o:return W(j+"Milliseconds",3);default:return this.clone()}},F.endOf=function($){return this.startOf($,!1)},F.$set=function($,R){var L,O=E.p($),B="set"+(this.$u?"UTC":""),U=(L={},L[u]=B+"Date",L[v]=B+"Date",L[f]=B+"Month",L[h]=B+"FullYear",L[l]=B+"Hours",L[s]=B+"Minutes",L[o]=B+"Seconds",L[a]=B+"Milliseconds",L)[O],W=O===u?this.$D+(R-this.$W):R;if(O===f||O===h){var X=this.clone().set(v,1);X.$d[U](W),X.init(),this.$d=X.set(v,Math.min(this.$D,X.daysInMonth())).$d}else U&&this.$d[U](W);return this.init(),this},F.set=function($,R){return this.clone().$set($,R)},F.get=function($){return this[E.p($)]()},F.add=function($,R){var L,O=this;$=Number($);var B=E.p(R),U=function(ie){var q=T(O);return E.w(q.date(q.date()+Math.round(ie*$)),O)};if(B===f)return this.set(f,this.$M+$);if(B===h)return this.set(h,this.$y+$);if(B===u)return U(1);if(B===c)return U(7);var W=(L={},L[s]=n,L[l]=i,L[o]=e,L)[B]||1,X=this.$d.getTime()+$*W;return E.w(X,this)},F.subtract=function($,R){return this.add(-1*$,R)},F.format=function($){var R=this,L=this.$locale();if(!this.isValid())return L.invalidDate||p;var O=$||"YYYY-MM-DDTHH:mm:ssZ",B=E.z(this),U=this.$H,W=this.$m,X=this.$M,ie=L.weekdays,q=L.months,j=function(_e,Me,Ye,De){return _e&&(_e[Me]||_e(R,O))||Ye[Me].substr(0,De)},fe=function(_e){return E.s(U%12||12,_e,"0")},se=L.meridiem||function(_e,Me,Ye){var De=_e<12?"AM":"PM";return Ye?De.toLowerCase():De},ce={YY:String(this.$y).slice(-2),YYYY:this.$y,M:X+1,MM:E.s(X+1,2,"0"),MMM:j(L.monthsShort,X,q,3),MMMM:j(q,X),D:this.$D,DD:E.s(this.$D,2,"0"),d:String(this.$W),dd:j(L.weekdaysMin,this.$W,ie,2),ddd:j(L.weekdaysShort,this.$W,ie,3),dddd:ie[this.$W],H:String(U),HH:E.s(U,2,"0"),h:fe(1),hh:fe(2),a:se(U,W,!0),A:se(U,W,!1),m:String(W),mm:E.s(W,2,"0"),s:String(this.$s),ss:E.s(this.$s,2,"0"),SSS:E.s(this.$ms,3,"0"),Z:B};return O.replace(m,function(_e,Me){return Me||ce[_e]||B.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function($,R,L){var O,B=E.p(R),U=T($),W=(U.utcOffset()-this.utcOffset())*n,X=this-U,ie=E.m(this,U);return ie=(O={},O[h]=ie/12,O[f]=ie,O[d]=ie/3,O[c]=(X-W)/6048e5,O[u]=(X-W)/864e5,O[l]=X/i,O[s]=X/n,O[o]=X/e,O)[B]||X,L?ie:E.a(ie)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return S[this.$L]},F.locale=function($,R){if(!$)return this.$L;var L=this.clone(),O=_($,R,!0);return O&&(L.$L=O),L},F.clone=function(){return E.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},P}(),I=k.prototype;return T.prototype=I,[["$ms",a],["$s",o],["$m",s],["$H",l],["$W",u],["$M",f],["$y",h],["$D",v]].forEach(function(P){I[P[1]]=function(F){return this.$g(F,P[0],P[1])}}),T.extend=function(P,F){return P.$i||(P(F,k,T),P.$i=!0),T},T.locale=_,T.isDayjs=C,T.unix=function(P){return T(1e3*P)},T.en=S[w],T.Ls=S,T.p={},T})}),Vi;(function(r){r.FORE="fore",r.MID="mid",r.BG="bg"})(Vi||(Vi={}));var Wt;(function(r){r.TOP="top",r.TOP_LEFT="top-left",r.TOP_RIGHT="top-right",r.RIGHT="right",r.RIGHT_TOP="right-top",r.RIGHT_BOTTOM="right-bottom",r.LEFT="left",r.LEFT_TOP="left-top",r.LEFT_BOTTOM="left-bottom",r.BOTTOM="bottom",r.BOTTOM_LEFT="bottom-left",r.BOTTOM_RIGHT="bottom-right",r.RADIUS="radius",r.CIRCLE="circle",r.NONE="none"})(Wt||(Wt={}));var ka;(function(r){r.AXIS="axis",r.GRID="grid",r.LEGEND="legend",r.TOOLTIP="tooltip",r.ANNOTATION="annotation",r.SLIDER="slider",r.SCROLLBAR="scrollbar",r.OTHER="other"})(ka||(ka={}));var Yp={FORE:3,MID:2,BG:1},Hr;(function(r){r.BEFORE_RENDER="beforerender",r.AFTER_RENDER="afterrender",r.BEFORE_PAINT="beforepaint",r.AFTER_PAINT="afterpaint",r.BEFORE_CHANGE_DATA="beforechangedata",r.AFTER_CHANGE_DATA="afterchangedata",r.BEFORE_CLEAR="beforeclear",r.AFTER_CLEAR="afterclear",r.BEFORE_DESTROY="beforedestroy",r.BEFORE_CHANGE_SIZE="beforechangesize",r.AFTER_CHANGE_SIZE="afterchangesize"})(Hr||(Hr={}));var Xp;(function(r){r.BEFORE_DRAW_ANIMATE="beforeanimate",r.AFTER_DRAW_ANIMATE="afteranimate"})(Xp||(Xp={}));var jo;(function(r){r.MOUSE_ENTER="plot:mouseenter",r.MOUSE_DOWN="plot:mousedown",r.MOUSE_MOVE="plot:mousemove",r.MOUSE_UP="plot:mouseup",r.MOUSE_LEAVE="plot:mouseleave",r.TOUCH_START="plot:touchstart",r.TOUCH_MOVE="plot:touchmove",r.TOUCH_END="plot:touchend",r.TOUCH_CANCEL="plot:touchcancel",r.CLICK="plot:click",r.DBLCLICK="plot:dblclick",r.CONTEXTMENU="plot:contextmenu",r.LEAVE="plot:leave",r.ENTER="plot:enter"})(jo||(jo={}));var DC;(function(r){r.ACTIVE="active",r.INACTIVE="inactive",r.SELECTED="selected",r.DEFAULT="default"})(DC||(DC={}));var R0=["color","shape","size"],Wn="_origin",KK=1,ZK=1,QK=.25,JK={};function XXe(r){var t=JK[r];if(!t)throw new Error("G engine '"+r+"' is not exist, please register it at first.");return t}function eZ(r,t){JK[r]=t}function qXe(r){var t=getComputedStyle(r);return{width:(r.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10),height:(r.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)}}function tZ(r){return typeof r=="number"&&!isNaN(r)}function rZ(r,t,e,n){var i=e,a=n;if(t){var o=qXe(r);i=o.width?o.width:i,a=o.height?o.height:a}return{width:Math.max(tZ(i)?i:KK,KK),height:Math.max(tZ(a)?a:ZK,ZK)}}function KXe(r){var t=r.parentNode;t&&t.removeChild(r)}var tD=function(r){Ie(t,r);function t(e){var n=r.call(this)||this;n.destroyed=!1;var i=e.visible,a=i===void 0?!0:i;return n.visible=a,n}return t.prototype.show=function(){var e=this.visible;e||this.changeVisible(!0)},t.prototype.hide=function(){var e=this.visible;e&&this.changeVisible(!1)},t.prototype.destroy=function(){this.off(),this.destroyed=!0},t.prototype.changeVisible=function(e){this.visible!==e&&(this.visible=e)},t}(ym),nZ=0,ZXe=1/2,QXe=1/2,JXe=.05,RC=function(){function r(t){var e=t.xField,n=t.yField,i=t.adjustNames,a=i===void 0?["x","y"]:i;this.adjustNames=a,this.xField=e,this.yField=n}return r.prototype.isAdjust=function(t){return this.adjustNames.indexOf(t)>=0},r.prototype.getAdjustRange=function(t,e,n){var i=this.yField,a=n.indexOf(e),o=n.length,s,l;return!i&&this.isAdjust("y")?(s=0,l=1):o>1?(s=n[a===0?0:a-1],l=n[a===o-1?o-1:a+1],a!==0?s+=(e-s)/2:s-=(l-e)/2,a!==o-1?l-=(l-e)/2:l+=(e-n[o-2])/2):(s=e===0?0:e-.5,l=e===0?1:e+.5),{pre:s,next:l}},r.prototype.adjustData=function(t,e){var n=this,i=this.getDimValues(e);G(t,function(a,o){G(i,function(s,l){n.adjustDim(l,s,a,o)})})},r.prototype.groupData=function(t,e){return G(t,function(n){n[e]===void 0&&(n[e]=nZ)}),uo(t,e)},r.prototype.adjustDim=function(t,e,n,i){},r.prototype.getDimValues=function(t){var e=this,n=e.xField,i=e.yField,a={},o=[];if(n&&this.isAdjust("x")&&o.push(n),i&&this.isAdjust("y")&&o.push(i),o.forEach(function(l){a[l]=Ds(t,l).sort(function(u,c){return u-c})}),!i&&this.isAdjust("y")){var s="y";a[s]=[nZ,1]}return a},r}(),iZ={},aZ=function(r){return iZ[r.toLowerCase()]},OC=function(r,t){if(aZ(r))throw new Error("Adjust type '"+r+"' existed.");iZ[r.toLowerCase()]=t};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rD=function(r,t){return rD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},rD(r,t)};function LC(r,t){rD(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var ru=function(){return ru=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},ru.apply(this,arguments)},eqe=function(r){LC(t,r);function t(e){var n=r.call(this,e)||this;n.cacheMap={},n.adjustDataArray=[],n.mergeData=[];var i=e.marginRatio,a=i===void 0?ZXe:i,o=e.dodgeRatio,s=o===void 0?QXe:o,l=e.dodgeBy,u=e.intervalPadding,c=e.dodgePadding,f=e.xDimensionLength,d=e.groupNum,h=e.defaultSize,v=e.maxColumnWidth,p=e.minColumnWidth,g=e.columnWidthRatio;return n.marginRatio=a,n.dodgeRatio=s,n.dodgeBy=l,n.intervalPadding=u,n.dodgePadding=c,n.xDimensionLegenth=f,n.groupNum=d,n.defaultSize=h,n.maxColumnWidth=v,n.minColumnWidth=p,n.columnWidthRatio=g,n}return t.prototype.process=function(e){var n=Or(e),i=No(n),a=this.dodgeBy,o=a?DB(i,a):n;return this.cacheMap={},this.adjustDataArray=o,this.mergeData=i,this.adjustData(o,i),this.adjustDataArray=[],this.mergeData=[],n},t.prototype.adjustDim=function(e,n,i,a){var o=this,s=this.getDistribution(e),l=this.groupData(i,e);return G(l,function(u,c){var f;n.length===1?f={pre:n[0]-1,next:n[0]+1}:f=o.getAdjustRange(e,parseFloat(c),n),G(u,function(d){var h=d[e],v=s[h],p=v.indexOf(a);d[e]=o.getDodgeOffset(f,p,v.length)})}),[]},t.prototype.getDodgeOffset=function(e,n,i){var a=this,o=a.dodgeRatio,s=a.marginRatio,l=a.intervalPadding,u=a.dodgePadding,c=e.pre,f=e.next,d=f-c,h;if(!nt(l)&&nt(u)&&l>=0){var v=this.getIntervalOnlyOffset(i,n);h=c+v}else if(!nt(u)&&nt(l)&&u>=0){var v=this.getDodgeOnlyOffset(i,n);h=c+v}else if(!nt(l)&&!nt(u)&&l>=0&&u>=0){var v=this.getIntervalAndDodgeOffset(i,n);h=c+v}else{var p=d*o/i,g=s*p,v=1/2*(d-i*p-(i-1)*g)+((n+1)*p+n*g)-1/2*p-1/2*d;h=(c+f)/2+v}return h},t.prototype.getIntervalOnlyOffset=function(e,n){var i=this,a=i.defaultSize,o=i.intervalPadding,s=i.xDimensionLegenth,l=i.groupNum,u=i.dodgeRatio,c=i.maxColumnWidth,f=i.minColumnWidth,d=i.columnWidthRatio,h=o/s,v=(1-(l-1)*h)/l*u/(e-1),p=((1-h*(l-1))/l-v*(e-1))/e;if(p=nt(d)?p:1/l/e*d,!nt(c)){var g=c/s;p=Math.min(p,g)}if(!nt(f)){var m=f/s;p=Math.max(p,m)}p=a?a/s:p,v=((1-(l-1)*h)/l-e*p)/(e-1);var y=((1/2+n)*p+n*v+1/2*h)*l-h/2;return y},t.prototype.getDodgeOnlyOffset=function(e,n){var i=this,a=i.defaultSize,o=i.dodgePadding,s=i.xDimensionLegenth,l=i.groupNum,u=i.marginRatio,c=i.maxColumnWidth,f=i.minColumnWidth,d=i.columnWidthRatio,h=o/s,v=1*u/(l-1),p=((1-v*(l-1))/l-h*(e-1))/e;if(p=d?1/l/e*d:p,!nt(c)){var g=c/s;p=Math.min(p,g)}if(!nt(f)){var m=f/s;p=Math.max(p,m)}p=a?a/s:p,v=(1-(p*e+h*(e-1))*l)/(l-1);var y=((1/2+n)*p+n*h+1/2*v)*l-v/2;return y},t.prototype.getIntervalAndDodgeOffset=function(e,n){var i=this,a=i.intervalPadding,o=i.dodgePadding,s=i.xDimensionLegenth,l=i.groupNum,u=a/s,c=o/s,f=((1-u*(l-1))/l-c*(e-1))/e,d=((1/2+n)*f+n*c+1/2*u)*l-u/2;return d},t.prototype.getDistribution=function(e){var n=this.adjustDataArray,i=this.cacheMap,a=i[e];return a||(a={},G(n,function(o,s){var l=Ds(o,e);l.length||l.push(0),G(l,function(u){a[u]||(a[u]=[]),a[u].push(s)})}),i[e]=a),a},t}(RC);function tqe(r,t){return(t-r)*Math.random()+r}var rqe=function(r){LC(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.process=function(e){var n=Or(e),i=No(n);return this.adjustData(n,i),n},t.prototype.adjustDim=function(e,n,i){var a=this,o=this.groupData(i,e);return G(o,function(s,l){return a.adjustGroup(s,e,parseFloat(l),n)})},t.prototype.getAdjustOffset=function(e){var n=e.pre,i=e.next,a=(i-n)*JXe;return tqe(n+a,i-a)},t.prototype.adjustGroup=function(e,n,i,a){var o=this,s=this.getAdjustRange(n,i,a);return G(e,function(l){l[n]=o.getAdjustOffset(s)}),e},t}(RC),nD=HB,nqe=function(r){LC(t,r);function t(e){var n=r.call(this,e)||this,i=e.adjustNames,a=i===void 0?["y"]:i,o=e.height,s=o===void 0?NaN:o,l=e.size,u=l===void 0?10:l,c=e.reverseOrder,f=c===void 0?!1:c;return n.adjustNames=a,n.height=s,n.size=u,n.reverseOrder=f,n}return t.prototype.process=function(e){var n=this,i=n.yField,a=n.reverseOrder,o=i?this.processStack(e):this.processOneDimStack(e);return a?this.reverse(o):o},t.prototype.reverse=function(e){return e.slice(0).reverse()},t.prototype.processStack=function(e){var n=this,i=n.xField,a=n.yField,o=n.reverseOrder,s=o?this.reverse(e):e,l=new nD,u=new nD;return s.map(function(c){return c.map(function(f){var d,h=ae(f,i,0),v=ae(f,[a]),p=h.toString();if(v=Qe(v)?v[1]:v,!nt(v)){var g=v>=0?l:u;g.has(p)||g.set(p,0);var m=g.get(p),y=v+m;return g.set(p,y),ru(ru({},f),(d={},d[a]=[m,y],d))}return f})})},t.prototype.processOneDimStack=function(e){var n=this,i=this,a=i.xField,o=i.height,s=i.reverseOrder,l="y",u=s?this.reverse(e):e,c=new nD;return u.map(function(f){return f.map(function(d){var h,v=n.size,p=d[a],g=v*2/o;c.has(p)||c.set(p,g/2);var m=c.get(p);return c.set(p,m+g),ru(ru({},d),(h={},h[l]=m,h))})})},t}(RC),iqe=function(r){LC(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.process=function(e){var n=No(e),i=this,a=i.xField,o=i.yField,s=this.getXValuesMaxMap(n),l=Math.max.apply(Math,Object.keys(s).map(function(u){return s[u]}));return Kn(e,function(u){return Kn(u,function(c){var f,d,h=c[o],v=c[a];if(Qe(h)){var p=(l-s[v])/2;return ru(ru({},c),(f={},f[o]=Kn(h,function(m){return p+m}),f))}var g=(l-h)/2;return ru(ru({},c),(d={},d[o]=[g,h+g],d))})})},t.prototype.getXValuesMaxMap=function(e){var n=this,i=this,a=i.xField,o=i.yField,s=uo(e,function(l){return l[a]});return GB(s,function(l){return n.getDimMaxValue(l,o)})},t.prototype.getDimMaxValue=function(e,n){var i=Kn(e,function(o){return ae(o,n,[])}),a=No(i);return Math.max.apply(Math,a)},t}(RC);OC("Dodge",eqe);OC("Jitter",rqe);OC("Stack",nqe);OC("Symmetric",iqe);var oZ=function(r,t){return ot(t)?t:r.invert(r.scale(t))},O0=function(){function r(t){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(t)}return r.prototype.mapping=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e.map(function(a,o){return t._toOriginParam(a,t.scales[o])});return this.callback.apply(this,i)},r.prototype.getLinearValue=function(t){var e=this.values.length-1,n=Math.floor(e*t),i=e*t-n,a=this.values[n],o=n===e?a:this.values[n+1];return a+(o-a)*i},r.prototype.getNames=function(){for(var t=this.scales,e=this.names,n=Math.min(t.length,e.length),i=[],a=0;a<n;a+=1)i.push(e[a]);return i},r.prototype.getFields=function(){return this.scales.map(function(t){return t.field})},r.prototype.getScale=function(t){return this.scales[this.names.indexOf(t)]},r.prototype.defaultCallback=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.length===0?this.values:e.map(function(i,a){var o=t.scales[a];return o.type==="identity"?o.values[0]:t._getAttributeValue(o,i)})},r.prototype._parseCfg=function(t){var e=this,n=t.type,i=n===void 0?"base":n,a=t.names,o=a===void 0?[]:a,s=t.scales,l=s===void 0?[]:s,u=t.values,c=u===void 0?[]:u,f=t.callback;this.type=i,this.scales=l,this.values=c,this.names=o,this.callback=function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];if(f){var v=f.apply(void 0,d);if(!nt(v))return[v]}return e.defaultCallback.apply(e,d)}},r.prototype._getAttributeValue=function(t,e){if(t.isCategory&&!this.linear){var n=t.translate(e);return this.values[n%this.values.length]}var i=t.scale(e);return this.getLinearValue(i)},r.prototype._toOriginParam=function(t,e){return e.isLinear?t:Qe(t)?t.map(function(n){return oZ(e,n)}):oZ(e,t)},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var iD=function(r,t){return iD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},iD(r,t)};function L0(r,t){iD(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var aqe=/rgba?\(([\s.,0-9]+)\)/,oqe=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,sqe=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,lqe=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,uqe=function(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)},cqe=function(){var r=document.createElement("i");return r.title="Web Colour Picker",r.style.display="none",document.body.appendChild(r),r},aD=function(r,t,e,n){return r[n]+(t[n]-r[n])*e};function sZ(r){return"#"+oD(r[0])+oD(r[1])+oD(r[2])}var lZ=function(r){return[parseInt(r.substr(1,2),16),parseInt(r.substr(3,2),16),parseInt(r.substr(5,2),16)]},oD=function(r){var t=Math.round(r).toString(16);return t.length===1?"0"+t:t},fqe=function(r,t){var e=isNaN(Number(t))||t<0?0:t>1?1:Number(t),n=r.length-1,i=Math.floor(n*e),a=n*e-i,o=r[i],s=i===n?o:r[i+1];return sZ([aD(o,s,a,0),aD(o,s,a,1),aD(o,s,a,2)])},FC,uZ=function(r){if(r[0]==="#"&&r.length===7)return r;FC||(FC=cqe()),FC.style.color=r;var t=document.defaultView.getComputedStyle(FC,"").getPropertyValue("color"),e=aqe.exec(t),n=e[1].split(/\s*,\s*/).map(function(i){return Number(i)});return t=sZ(n),t},dqe=function(r){var t=ot(r)?r.split("-"):r,e=Kn(t,function(n){return lZ(n.indexOf("#")===-1?uZ(n):n)});return function(n){return fqe(e,n)}},hqe=function(r){if(uqe(r)){var t,e=void 0;if(r[0]==="l"){var n=oqe.exec(r),i=+n[1]+90;e=n[2],t="linear-gradient("+i+"deg, "}else if(r[0]==="r"){t="radial-gradient(";var n=sqe.exec(r);e=n[4]}var a=e.match(lqe);return G(a,function(o,s){var l=o.split(":");t+=l[1]+" "+l[0]*100+"%",s!==a.length-1&&(t+=", ")}),t+=")",t}return r},gf={rgb2arr:lZ,gradient:dqe,toRGB:ad(uZ),toCSSGradient:hqe},vqe=function(r){L0(t,r);function t(e){var n=r.call(this,e)||this;return n.type="color",n.names=["color"],ot(n.values)&&(n.linear=!0),n.gradient=gf.gradient(n.values),n}return t.prototype.getLinearValue=function(e){return this.gradient(e)},t}(O0),pqe=function(r){L0(t,r);function t(e){var n=r.call(this,e)||this;return n.type="opacity",n.names=["opacity"],n}return t}(O0),gqe=function(r){L0(t,r);function t(e){var n=r.call(this,e)||this;return n.names=["x","y"],n.type="position",n}return t.prototype.mapping=function(e,n){var i=this.scales,a=i[0],o=i[1];return nt(e)||nt(n)?[]:[Qe(e)?e.map(function(s){return a.scale(s)}):a.scale(e),Qe(n)?n.map(function(s){return o.scale(s)}):o.scale(n)]},t}(O0),mqe=function(r){L0(t,r);function t(e){var n=r.call(this,e)||this;return n.type="shape",n.names=["shape"],n}return t.prototype.getLinearValue=function(e){var n=Math.round((this.values.length-1)*e);return this.values[n]},t}(O0),yqe=function(r){L0(t,r);function t(e){var n=r.call(this,e)||this;return n.type="size",n.names=["size"],n}return t}(O0),cZ={},fZ=function(r){return cZ[r.toLowerCase()]},F0=function(r,t){if(fZ(r))throw new Error("Attribute type '"+r+"' existed.");cZ[r.toLowerCase()]=t};F0("Color",vqe);F0("Opacity",pqe);F0("Position",gqe);F0("Shape",mqe);F0("Size",yqe);var sD=function(){function r(t){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var e=t.start,n=t.end,i=t.matrix,a=i===void 0?[1,0,0,0,1,0,0,0,1]:i,o=t.isTransposed,s=o===void 0?!1:o;this.start=e,this.end=n,this.matrix=a,this.originalMatrix=oi([],a),this.isTransposed=s}return r.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},r.prototype.update=function(t){jt(this,t),this.initial()},r.prototype.convertDim=function(t,e){var n,i=this[e],a=i.start,o=i.end;return this.isReflect(e)&&(n=[o,a],a=n[0],o=n[1]),a+t*(o-a)},r.prototype.invertDim=function(t,e){var n,i=this[e],a=i.start,o=i.end;return this.isReflect(e)&&(n=[o,a],a=n[0],o=n[1]),(t-a)/(o-a)},r.prototype.applyMatrix=function(t,e,n){n===void 0&&(n=0);var i=this.matrix,a=[t,e,n];return Pl(a,a,i),a},r.prototype.invertMatrix=function(t,e,n){n===void 0&&(n=0);var i=this.matrix,a=Xx([0,0,0,0,0,0,0,0,0],i),o=[t,e,n];return a&&Pl(o,o,a),o},r.prototype.convert=function(t){var e=this.convertPoint(t),n=e.x,i=e.y,a=this.applyMatrix(n,i,1);return{x:a[0],y:a[1]}},r.prototype.invert=function(t){var e=this.invertMatrix(t.x,t.y,1);return this.invertPoint({x:e[0],y:e[1]})},r.prototype.rotate=function(t){var e=this.matrix,n=this.center;return Pv(e,e,[-n.x,-n.y]),TT(e,e,t),Pv(e,e,[n.x,n.y]),this},r.prototype.reflect=function(t){return t==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},r.prototype.scale=function(t,e){var n=this.matrix,i=this.center;return Pv(n,n,[-i.x,-i.y]),o3(n,n,[t,e]),Pv(n,n,[i.x,i.y]),this},r.prototype.translate=function(t,e){var n=this.matrix;return Pv(n,n,[t,e]),this},r.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},r.prototype.getCenter=function(){return this.center},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.getRadius=function(){return this.radius},r.prototype.isReflect=function(t){return t==="x"?this.isReflectX:this.isReflectY},r.prototype.resetMatrix=function(t){this.matrix=t||oi([],this.originalMatrix)},r}(),dZ=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;return n.isRect=!0,n.type="cartesian",n.initial(),n}return t.prototype.initial=function(){r.prototype.initial.call(this);var e=this.start,n=this.end;this.x={start:e.x,end:n.x},this.y={start:e.y,end:n.y}},t.prototype.convertPoint=function(e){var n,i=e.x,a=e.y;return this.isTransposed&&(n=[a,i],i=n[0],a=n[1]),{x:this.convertDim(i,"x"),y:this.convertDim(a,"y")}},t.prototype.invertPoint=function(e){var n,i=this.invertDim(e.x,"x"),a=this.invertDim(e.y,"y");return this.isTransposed&&(n=[a,i],i=n[0],a=n[1]),{x:i,y:a}},t}(sD),bqe=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;n.isHelix=!0,n.type="helix";var i=e.startAngle,a=i===void 0?1.25*Math.PI:i,o=e.endAngle,s=o===void 0?7.25*Math.PI:o,l=e.innerRadius,u=l===void 0?0:l,c=e.radius;return n.startAngle=a,n.endAngle=s,n.innerRadius=u,n.radius=c,n.initial(),n}return t.prototype.initial=function(){r.prototype.initial.call(this);var e=(this.endAngle-this.startAngle)/(2*Math.PI)+1,n=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(n=n*this.radius),this.d=Math.floor(n*(1-this.innerRadius)/e),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*n,end:this.innerRadius*n+this.d*.99}},t.prototype.convertPoint=function(e){var n,i=e.x,a=e.y;this.isTransposed&&(n=[a,i],i=n[0],a=n[1]);var o=this.convertDim(i,"x"),s=this.a*o,l=this.convertDim(a,"y");return{x:this.center.x+Math.cos(o)*(s+l),y:this.center.y+Math.sin(o)*(s+l)}},t.prototype.invertPoint=function(e){var n,i=this.d+this.y.start,a=i3([0,0],[e.x,e.y],[this.center.x,this.center.y]),o=AT(a,[1,0],!0),s=o*this.a;Iv(a)<s&&(s=Iv(a));var l=Math.floor((Iv(a)-s)/i);o=2*l*Math.PI+o;var u=this.a*o,c=Iv(a)-u;c=ba(c,0)?0:c;var f=this.invertDim(o,"x"),d=this.invertDim(c,"y");return f=ba(f,0)?0:f,d=ba(d,0)?0:d,this.isTransposed&&(n=[d,f],f=n[0],d=n[1]),{x:f,y:d}},t}(sD),xqe=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;n.isPolar=!0,n.type="polar";var i=e.startAngle,a=i===void 0?-Math.PI/2:i,o=e.endAngle,s=o===void 0?Math.PI*3/2:o,l=e.innerRadius,u=l===void 0?0:l,c=e.radius;return n.startAngle=a,n.endAngle=s,n.innerRadius=u,n.radius=c,n.initial(),n}return t.prototype.initial=function(){for(r.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var e=this.getOneBox(),n=e.maxX-e.minX,i=e.maxY-e.minY,a=Math.abs(e.minX)/n,o=Math.abs(e.minY)/i,s;this.height/i>this.width/n?(s=this.width/n,this.circleCenter={x:this.center.x-(.5-a)*this.width,y:this.center.y-(.5-o)*s*i}):(s=this.height/i,this.circleCenter={x:this.center.x-(.5-a)*s*n,y:this.center.y-(.5-o)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=s*this.radius:(this.radius<=0||this.radius>s)&&(this.polarRadius=s):this.polarRadius=s,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},t.prototype.getRadius=function(){return this.polarRadius},t.prototype.convertPoint=function(e){var n,i=this.getCenter(),a=e.x,o=e.y;return this.isTransposed&&(n=[o,a],a=n[0],o=n[1]),a=this.convertDim(a,"x"),o=this.convertDim(o,"y"),{x:i.x+Math.cos(a)*o,y:i.y+Math.sin(a)*o}},t.prototype.invertPoint=function(e){var n,i=this.getCenter(),a=[e.x-i.x,e.y-i.y],o=this,s=o.startAngle,l=o.endAngle;this.isReflect("x")&&(n=[l,s],s=n[0],l=n[1]);var u=[1,0,0,0,1,0,0,0,1];TT(u,u,s);var c=[1,0,0];Pl(c,c,u);var f=[c[0],c[1]],d=AT(f,a,l<s);ba(d,Math.PI*2)&&(d=0);var h=Iv(a),v=d/(l-s);v=l-s>0?v:-v;var p=this.invertDim(h,"y"),g={x:0,y:0};return g.x=this.isTransposed?p:v,g.y=this.isTransposed?v:p,g},t.prototype.getCenter=function(){return this.circleCenter},t.prototype.getOneBox=function(){var e=this.startAngle,n=this.endAngle;if(Math.abs(n-e)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var i=[0,Math.cos(e),Math.cos(n)],a=[0,Math.sin(e),Math.sin(n)],o=Math.min(e,n);o<Math.max(e,n);o+=Math.PI/18)i.push(Math.cos(o)),a.push(Math.sin(o));return{minX:Math.min.apply(Math,i),maxX:Math.max.apply(Math,i),minY:Math.min.apply(Math,a),maxY:Math.max.apply(Math,a)}},t}(sD),hZ={},wqe=function(r){return hZ[r.toLowerCase()]},NC=function(r,t){hZ[r.toLowerCase()]=t};NC("rect",dZ);NC("cartesian",dZ);NC("polar",xqe);NC("helix",bqe);var N0=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Sqe=new RegExp("([a-z])["+N0+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+N0+"]*,?["+N0+"]*)+)","ig"),Cqe=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+N0+"]*,?["+N0+"]*","ig"),BC=function(r){if(!r)return null;if(Qe(r))return r;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(r).replace(Sqe,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(Cqe,function(l,u){u&&o.push(+u)}),s==="m"&&o.length>2&&(e.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&e.push([i,o[0]]),s==="r")e.push([i].concat(o));else for(;o.length>=t[s]&&(e.push([i].concat(o.splice(0,t[s]))),!!t[s]););return r}),e},Eqe=function(r,t){if(r.length!==t.length)return!1;var e=!0;return G(r,function(n,i){if(n!==t[i])return e=!1,!1}),e};function _qe(r,t,e){var n=null,i=e;return t<i&&(i=t,n="add"),r<i&&(i=r,n="del"),{type:n,min:i}}var Tqe=function(r,t){var e=r.length,n=t.length,i,a,o=0;if(e===0||n===0)return null;for(var s=[],l=0;l<=e;l++)s[l]=[],s[l][0]={min:l};for(var u=0;u<=n;u++)s[0][u]={min:u};for(var l=1;l<=e;l++){i=r[l-1];for(var u=1;u<=n;u++){a=t[u-1],Eqe(i,a)?o=0:o=1;var c=s[l-1][u].min+1,f=s[l][u-1].min+1,d=s[l-1][u-1].min+o;s[l][u]=_qe(c,f,d)}}return s},Aqe=function(r,t){var e=Tqe(r,t),n=r.length,i=t.length,a=[],o=1,s=1;if(e[n][i].min!==n){for(var l=1;l<=n;l++){var u=e[l][l].min;s=l;for(var c=o;c<=i;c++)e[l][c].min<u&&(u=e[l][c].min,s=c);o=s,e[l][o].type&&a.push({index:l-1,type:e[l][o].type})}for(var l=a.length-1;l>=0;l--)o=a[l].index,a[l].type==="add"?r.splice(o,0,[].concat(r[o])):r.splice(o,1)}n=r.length;var f=i-n;if(n<i)for(var l=0;l<f;l++)r[n-1][0]==="z"||r[n-1][0]==="Z"?r.splice(n-2,0,r[n-2]):r.push(r[n-1]),n+=1;return r};function lD(r,t,e){for(var n=[].concat(r),i,a=1/(e+1),o=vZ(t)[0],s=1;s<=e;s++)a*=s,i=Math.floor(r.length*a),i===0?n.unshift([o[0]*a+r[i][0]*(1-a),o[1]*a+r[i][1]*(1-a)]):n.splice(i,0,[o[0]*a+r[i][0]*(1-a),o[1]*a+r[i][1]*(1-a)]);return n}function vZ(r){var t=[];switch(r[0]){case"M":t.push([r[1],r[2]]);break;case"L":t.push([r[1],r[2]]);break;case"A":t.push([r[6],r[7]]);break;case"Q":t.push([r[3],r[4]]),t.push([r[1],r[2]]);break;case"T":t.push([r[1],r[2]]);break;case"C":t.push([r[5],r[6]]),t.push([r[1],r[2]]),t.push([r[3],r[4]]);break;case"S":t.push([r[3],r[4]]),t.push([r[1],r[2]]);break;case"H":t.push([r[1],r[1]]);break;case"V":t.push([r[1],r[1]]);break}return t}var pZ=function(r,t){if(r.length<=1)return r;for(var e,n=0;n<t.length;n++)if(r[n][0]!==t[n][0])switch(e=vZ(r[n]),t[n][0]){case"M":r[n]=["M"].concat(e[0]);break;case"L":r[n]=["L"].concat(e[0]);break;case"A":r[n]=[].concat(t[n]),r[n][6]=e[0][0],r[n][7]=e[0][1];break;case"Q":if(e.length<2)if(n>0)e=lD(e,r[n-1],1);else{r[n]=t[n];break}r[n]=["Q"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;case"T":r[n]=["T"].concat(e[0]);break;case"C":if(e.length<3)if(n>0)e=lD(e,r[n-1],2);else{r[n]=t[n];break}r[n]=["C"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;case"S":if(e.length<2)if(n>0)e=lD(e,r[n-1],1);else{r[n]=t[n];break}r[n]=["S"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;default:r[n]=t[n]}return r},gZ=function(){function r(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return r.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},r.prototype.stopPropagation=function(){this.propagationStopped=!0},r.prototype.toString=function(){var t=this.type;return"[Event (type="+t+")]"},r.prototype.save=function(){},r.prototype.restore=function(){},r}();function mZ(r,t){var e=r.indexOf(t);e!==-1&&r.splice(e,1)}var yZ=typeof window!="undefined"&&typeof window.document!="undefined";function bZ(r,t){if(r.isCanvas())return!0;for(var e=t.getParent(),n=!1;e;){if(e===r){n=!0;break}e=e.getParent()}return n}function xZ(r){return r.cfg.visible&&r.cfg.capture}var wZ=function(r){Ie(t,r);function t(e){var n=r.call(this)||this;n.destroyed=!1;var i=n.getDefaultCfg();return n.cfg=jt(i,e),n}return t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,n){this.cfg[e]=n},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t}(ym);function SZ(r,t){var e=[],n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],l=r[5],u=r[6],c=r[7],f=r[8],d=t[0],h=t[1],v=t[2],p=t[3],g=t[4],m=t[5],y=t[6],b=t[7],x=t[8];return e[0]=d*n+h*o+v*u,e[1]=d*i+h*s+v*c,e[2]=d*a+h*l+v*f,e[3]=p*n+g*o+m*u,e[4]=p*i+g*s+m*c,e[5]=p*a+g*l+m*f,e[6]=y*n+b*o+x*u,e[7]=y*i+b*s+x*c,e[8]=y*a+b*l+x*f,e}function qp(r,t){var e=[],n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function kqe(r){var t=[],e=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],l=r[6],u=r[7],c=r[8],f=c*o-s*u,d=-c*a+s*l,h=u*a-o*l,v=e*f+n*d+i*h;return v?(v=1/v,t[0]=f*v,t[1]=(-c*n+i*u)*v,t[2]=(s*n-i*o)*v,t[3]=d*v,t[4]=(c*e-i*l)*v,t[5]=(-s*e+i*a)*v,t[6]=h*v,t[7]=(-u*e+n*l)*v,t[8]=(o*e-n*a)*v,t):null}var B0=Zn,uD="matrix",Mqe=["zIndex","capture","visible","type"],Iqe=["repeat"],Pqe=":",Dqe="*";function Rqe(r){for(var t=[],e=0;e<r.length;e++)Qe(r[e])?t.push([].concat(r[e])):t.push(r[e]);return t}function Oqe(r,t){var e={},n=t.attrs;for(var i in r)e[i]=n[i];return e}function Lqe(r,t){var e={},n=t.attr();return G(r,function(i,a){Iqe.indexOf(a)===-1&&!ci(n[a],i)&&(e[a]=i)}),e}function Fqe(r,t){if(t.onFrame)return r;var e=t.startTime,n=t.delay,i=t.duration,a=Object.prototype.hasOwnProperty;return G(r,function(o){e+n<o.startTime+o.delay+o.duration&&i>o.delay&&G(t.toAttrs,function(s,l){a.call(o.toAttrs,l)&&(delete o.toAttrs[l],delete o.fromAttrs[l])})}),r}var CZ=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;n.attrs={};var i=n.getDefaultAttrs();return jt(i,e.attrs),n.attrs=i,n.initAttrs(i),n.initAnimate(),n}return t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get("parent")},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.attr=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=n[0],o=n[1];if(!a)return this.attrs;if(an(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return n.length===2?(this.setAttr(a,o),this.afterAttrsChange((e={},e[a]=o,e)),this):this.attrs[a]},t.prototype.isClipped=function(e,n){var i=this.getClip();return i&&!i.isHit(e,n)},t.prototype.setAttr=function(e,n){var i=this.attrs[e];i!==n&&(this.attrs[e]=n,this.onAttrChange(e,n,i))},t.prototype.onAttrChange=function(e,n,i){e==="matrix"&&this.set("totalMatrix",null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var n=this.cfg.applyTo;n&&n.onCanvasChange("clip")}else this.onCanvasChange("attr")},t.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},t.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},t.prototype.setZIndex=function(e){this.set("zIndex",e);var n=this.getParent();return n&&n.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(!!e){var n=e.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.push(this),this.onCanvasChange("zIndex")}},t.prototype.toBack=function(){var e=this.getParent();if(!!e){var n=e.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.unshift(this),this.onCanvasChange("zIndex")}},t.prototype.remove=function(e){e===void 0&&(e=!0);var n=this.getParent();n?(mZ(n.getChildren(),this),n.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr(uD,this.getDefaultMatrix()),this.onCanvasChange("matrix")},t.prototype.getMatrix=function(){return this.attr(uD)},t.prototype.setMatrix=function(e){this.attr(uD,e),this.onCanvasChange("matrix")},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var n=this.attr("matrix"),i=this.cfg.parentMatrix;i&&n?e=SZ(i,n):e=n||i,this.set("totalMatrix",e)}return e},t.prototype.applyMatrix=function(e){var n=this.attr("matrix"),i=null;e&&n?i=SZ(e,n):i=n||e,this.set("totalMatrix",i),this.set("parentMatrix",e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var n=this.attr("matrix");return n?qp(n,e):e},t.prototype.invertFromMatrix=function(e){var n=this.attr("matrix");if(n){var i=kqe(n);if(i)return qp(i,e)}return e},t.prototype.setClip=function(e){var n=this.getCanvas(),i=null;if(e){var a=this.getShapeBase(),o=ls(e.type),s=a[o];s&&(i=new s({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:n}))}return this.set("clipShape",i),this.onCanvasChange("clip"),i},t.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},t.prototype.clone=function(){var e=this,n=this.attrs,i={};G(n,function(s,l){Qe(n[l])?i[l]=Rqe(n[l]):i[l]=n[l]});var a=this.constructor,o=new a({attrs:i});return G(Mqe,function(s){o.set(s,e.get(s))}),o},t.prototype.destroy=function(){var e=this.destroyed;e||(this.attrs={},r.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},t.prototype.animate=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var i=this.get("timeline");i||(i=this.get("canvas").get("timeline"),this.set("timeline",i));var a=this.get("animations")||[];i.timer||i.initTimer();var o=e[0],s=e[1],l=e[2],u=l===void 0?"easeLinear":l,c=e[3],f=c===void 0?us:c,d=e[4],h=d===void 0?0:d,v,p,g,m,y;Kt(o)?(v=o,o={}):an(o)&&o.onFrame&&(v=o.onFrame,p=o.repeat),an(s)?(y=s,s=y.duration,u=y.easing||"easeLinear",h=y.delay||0,p=y.repeat||p||!1,f=y.callback||us,g=y.pauseCallback||us,m=y.resumeCallback||us):(zt(f)&&(h=f,f=null),Kt(u)?(f=u,u="easeLinear"):u=u||"easeLinear");var b=Lqe(o,this),x={fromAttrs:Oqe(b,this),toAttrs:b,duration:s,easing:u,repeat:p,callback:f,pauseCallback:g,resumeCallback:m,delay:h,startTime:i.getTime(),id:Rs(),onFrame:v,pathFormatted:!1};a.length>0?a=Fqe(a,x):i.addAnimator(this),a.push(x),this.set("animations",a),this.set("_pause",{isPaused:!1})}},t.prototype.stopAnimate=function(e){var n=this;e===void 0&&(e=!0);var i=this.get("animations");G(i,function(a){e&&(a.onFrame?n.attr(a.onFrame(1)):n.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},t.prototype.pauseAnimate=function(){var e=this.get("timeline"),n=this.get("animations"),i=e.getTime();return G(n,function(a){a._paused=!0,a._pauseTime=i,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:i}),this},t.prototype.resumeAnimate=function(){var e=this.get("timeline"),n=e.getTime(),i=this.get("animations"),a=this.get("_pause").pauseTime;return G(i,function(o){o.startTime=o.startTime+(n-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",i),this},t.prototype.emitDelegation=function(e,n){var i=this,a=n.propagationPath;this.getEvents();var o;e==="mouseenter"?o=n.fromShape:e==="mouseleave"&&(o=n.toShape);for(var s=function(f){var d=a[f],h=d.get("name");if(h){if((d.isGroup()||d.isCanvas&&d.isCanvas())&&o&&bZ(d,o))return"break";Qe(h)?G(h,function(v){i.emitDelegateEvent(d,v,n)}):l.emitDelegateEvent(d,h,n)}},l=this,u=0;u<a.length;u++){var c=s(u);if(c==="break")break}},t.prototype.emitDelegateEvent=function(e,n,i){var a=this.getEvents(),o=n+Pqe+i.type;(a[o]||a[Dqe])&&(i.name=o,i.currentTarget=e,i.delegateTarget=this,i.delegateObject=e.get("delegateObject"),this.emit(o,i))},t.prototype.translate=function(e,n){e===void 0&&(e=0),n===void 0&&(n=0);var i=this.getMatrix(),a=B0(i,[["t",e,n]]);return this.setMatrix(a),this},t.prototype.move=function(e,n){var i=this.attr("x")||0,a=this.attr("y")||0;return this.translate(e-i,n-a),this},t.prototype.moveTo=function(e,n){return this.move(e,n)},t.prototype.scale=function(e,n){var i=this.getMatrix(),a=B0(i,[["s",e,n||e]]);return this.setMatrix(a),this},t.prototype.rotate=function(e){var n=this.getMatrix(),i=B0(n,[["r",e]]);return this.setMatrix(i),this},t.prototype.rotateAtStart=function(e){var n=this.attr(),i=n.x,a=n.y,o=this.getMatrix(),s=B0(o,[["t",-i,-a],["r",e],["t",i,a]]);return this.setMatrix(s),this},t.prototype.rotateAtPoint=function(e,n,i){var a=this.getMatrix(),o=B0(a,[["t",-e,-n],["r",i],["t",e,n]]);return this.setMatrix(o),this},t}(wZ),EZ={},cD="_INDEX";function _Z(r,t){if(r.set("canvas",t),r.isGroup()){var e=r.get("children");e.length&&e.forEach(function(n){_Z(n,t)})}}function TZ(r,t){if(r.set("timeline",t),r.isGroup()){var e=r.get("children");e.length&&e.forEach(function(n){TZ(n,t)})}}function Nqe(r,t,e){e===void 0&&(e=!0),e?t.destroy():(t.set("parent",null),t.set("canvas",null)),mZ(r.getChildren(),t)}function Bqe(r){return function(t,e){var n=r(t,e);return n===0?t[cD]-e[cD]:n}}var AZ=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,n=-1/0,i=1/0,a=-1/0,o=[],s=[],l=this.getChildren().filter(function(c){return c.get("visible")&&(!c.isGroup()||c.isGroup()&&c.getChildren().length>0)});l.length>0?(G(l,function(c){var f=c.getBBox();o.push(f.minX,f.maxX),s.push(f.minY,f.maxY)}),e=sa(o),n=Xi(o),i=sa(s),a=Xi(s)):(e=0,n=0,i=0,a=0);var u={x:e,y:i,minX:e,minY:i,maxX:n,maxY:a,width:n-e,height:a-i};return u},t.prototype.getCanvasBBox=function(){var e=1/0,n=-1/0,i=1/0,a=-1/0,o=[],s=[],l=this.getChildren().filter(function(c){return c.get("visible")&&(!c.isGroup()||c.isGroup()&&c.getChildren().length>0)});l.length>0?(G(l,function(c){var f=c.getCanvasBBox();o.push(f.minX,f.maxX),s.push(f.minY,f.maxY)}),e=sa(o),n=Xi(o),i=sa(s),a=Xi(s)):(e=0,n=0,i=0,a=0);var u={x:e,y:i,minX:e,minY:i,maxX:n,maxY:a,width:n-e,height:a-i};return u},t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return e.children=[],e},t.prototype.onAttrChange=function(e,n,i){if(r.prototype.onAttrChange.call(this,e,n,i),e==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},t.prototype.applyMatrix=function(e){var n=this.getTotalMatrix();r.prototype.applyMatrix.call(this,e);var i=this.getTotalMatrix();i!==n&&this._applyChildrenMarix(i)},t.prototype._applyChildrenMarix=function(e){var n=this.getChildren();G(n,function(i){i.applyMatrix(e)})},t.prototype.addShape=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0],a=e[1];an(i)?a=i:a.type=i;var o=EZ[a.type];o||(o=ls(a.type),EZ[a.type]=o);var s=this.getShapeBase(),l=new s[o](a);return this.add(l),l},t.prototype.addGroup=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0],a=e[1],o;if(Kt(i))a?o=new i(a):o=new i({parent:this});else{var s=i||{},l=this.getGroupBase();o=new l(s)}return this.add(o),o},t.prototype.getCanvas=function(){var e;return this.isCanvas()?e=this:e=this.get("canvas"),e},t.prototype.getShape=function(e,n,i){if(!xZ(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,e,n,i);else{var s=[e,n,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],i))}return o},t.prototype._findShape=function(e,n,i,a){for(var o=null,s=e.length-1;s>=0;s--){var l=e[s];if(xZ(l)&&(l.isGroup()?o=l.getShape(n,i,a):l.isHit(n,i)&&(o=l)),o)break}return o},t.prototype.add=function(e){var n=this.getCanvas(),i=this.getChildren(),a=this.get("timeline"),o=e.getParent();o&&Nqe(o,e,!1),e.set("parent",this),n&&_Z(e,n),a&&TZ(e,a),i.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var n=this.getTotalMatrix();n&&e.applyMatrix(n)},t.prototype.getChildren=function(){return this.get("children")},t.prototype.sort=function(){var e=this.getChildren();G(e,function(n,i){return n[cD]=i,n}),e.sort(Bqe(function(n,i){return n.get("zIndex")-i.get("zIndex")})),this.onCanvasChange("sort")},t.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),n=e.length-1;n>=0;n--)e[n].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},t.prototype.destroy=function(){this.get("destroyed")||(this.clear(),r.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){var n=this.getChildren();return n[e]},t.prototype.getCount=function(){var e=this.getChildren();return e.length},t.prototype.contain=function(e){var n=this.getChildren();return n.indexOf(e)>-1},t.prototype.removeChild=function(e,n){n===void 0&&(n=!0),this.contain(e)&&e.remove(n)},t.prototype.findAll=function(e){var n=[],i=this.getChildren();return G(i,function(a){e(a)&&n.push(a),a.isGroup()&&(n=n.concat(a.findAll(e)))}),n},t.prototype.find=function(e){var n=null,i=this.getChildren();return G(i,function(a){if(e(a)?n=a:a.isGroup()&&(n=a.find(e)),n)return!1}),n},t.prototype.findById=function(e){return this.find(function(n){return n.get("id")===e})},t.prototype.findByClassName=function(e){return this.find(function(n){return n.get("className")===e})},t.prototype.findAllByName=function(e){return this.findAll(function(n){return n.get("name")===e})},t}(CZ),$qe=function(r){return["fill","stroke","fillStyle","strokeStyle"].includes(r)},zqe=function(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)},kZ=[1,0,0,0,1,0,0,0,1];function Gqe(r,t,e){var n={},i=t.fromAttrs,a=t.toAttrs;if(!r.destroyed){var o;for(var s in a)if(!ci(i[s],a[s]))if(s==="path"){var l=a[s],u=i[s];l.length>u.length?(l=BC(a[s]),u=BC(i[s]),u=Aqe(u,l),u=pZ(u,l),t.fromAttrs.path=u,t.toAttrs.path=l):t.pathFormatted||(l=BC(a[s]),u=BC(i[s]),u=pZ(u,l),t.fromAttrs.path=u,t.toAttrs.path=l,t.pathFormatted=!0),n[s]=[];for(var c=0;c<l.length;c++){for(var f=l[c],d=u[c],h=[],v=0;v<f.length;v++)zt(f[v])&&d&&zt(d[v])?(o=Fv(d[v],f[v]),h.push(o(e))):h.push(f[v]);n[s].push(h)}}else if(s==="matrix"){var p=s$(i[s]||kZ,a[s]||kZ),g=p(e);n[s]=g}else $qe(s)&&zqe(a[s])?n[s]=a[s]:Kt(a[s])||(o=Fv(i[s],a[s]),n[s]=o(e));r.attr(n)}}function Uqe(r,t,e){var n=t.startTime,i=t.delay;if(e<n+i||t._paused)return!1;var a,o=t.duration,s=t.easing;if(e=e-n-t.delay,t.repeat)a=e%o/o,a=w1[s](a);else if(a=e/o,a<1)a=w1[s](a);else return t.onFrame?r.attr(t.onFrame(1)):r.attr(t.toAttrs),!0;if(t.onFrame){var l=t.onFrame(a);r.attr(l)}else Gqe(r,t,a);return!1}var Vqe=function(){function r(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return r.prototype.initTimer=function(){var t=this,e=!1,n,i,a;this.timer=rA(function(o){if(t.current=o,t.animators.length>0){for(var s=t.animators.length-1;s>=0;s--){if(n=t.animators[s],n.destroyed){t.removeAnimator(s);continue}if(!n.isAnimatePaused()){i=n.get("animations");for(var l=i.length-1;l>=0;l--)a=i[l],e=Uqe(n,a,o),e&&(i.splice(l,1),e=!1,a.callback&&a.callback())}i.length===0&&t.removeAnimator(s)}var u=t.canvas.get("autoDraw");u||t.canvas.draw()}})},r.prototype.addAnimator=function(t){this.animators.push(t)},r.prototype.removeAnimator=function(t){this.animators.splice(t,1)},r.prototype.isAnimating=function(){return!!this.animators.length},r.prototype.stop=function(){this.timer&&this.timer.stop()},r.prototype.stopAllAnimations=function(t){t===void 0&&(t=!0),this.animators.forEach(function(e){e.stopAnimate(t)}),this.animators=[],this.canvas.draw()},r.prototype.getTime=function(){return this.current},r}(),Hqe=40,MZ=0,IZ=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function PZ(r,t,e){e.name=t,e.target=r,e.currentTarget=r,e.delegateTarget=r,r.emit(t,e)}function Wqe(r,t,e){if(e.bubbles){var n=void 0,i=!1;if(t==="mouseenter"?(n=e.fromShape,i=!0):t==="mouseleave"&&(i=!0,n=e.toShape),r.isCanvas()&&i)return;if(n&&bZ(r,n)){e.bubbles=!1;return}e.name=t,e.currentTarget=r,e.delegateTarget=r,r.emit(t,e)}}var jqe=function(){function r(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(n){var i=n.type;e._triggerEvent(i,n)},this._onDocumentMove=function(n){var i=e.canvas,a=i.get("el");if(a!==n.target&&(e.dragging||e.currentShape)){var o=e._getPointInfo(n);e.dragging&&e._emitEvent("drag",n,o,e.draggingShape)}},this._onDocumentMouseUp=function(n){var i=e.canvas,a=i.get("el");if(a!==n.target&&e.dragging){var o=e._getPointInfo(n);e.draggingShape&&e._emitEvent("drop",n,o,null),e._emitEvent("dragend",n,o,e.draggingShape),e._afterDrag(e.draggingShape,o,n)}},this.canvas=t.canvas}return r.prototype.init=function(){this._bindEvents()},r.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");G(IZ,function(n){e.addEventListener(n,t._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");G(IZ,function(n){e.removeEventListener(n,t._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._getEventObj=function(t,e,n,i,a,o){var s=new gZ(t,e);return s.fromShape=a,s.toShape=o,s.x=n.x,s.y=n.y,s.clientX=n.clientX,s.clientY=n.clientY,s.propagationPath.push(i),s},r.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},r.prototype._getPointInfo=function(t){var e=this.canvas,n=e.getClientByEvent(t),i=e.getPointByEvent(t);return{x:i.x,y:i.y,clientX:n.x,clientY:n.y}},r.prototype._triggerEvent=function(t,e){var n=this._getPointInfo(e),i=this._getShape(n,e),a=this["_on"+t],o=!1;if(a)a.call(this,n,i,e);else{var s=this.currentShape;t==="mouseenter"||t==="dragenter"||t==="mouseover"?(this._emitEvent(t,e,n,null,null,i),i&&this._emitEvent(t,e,n,i,null,i),t==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):t==="mouseleave"||t==="dragleave"||t==="mouseout"?(o=!0,s&&this._emitEvent(t,e,n,s,s,null),this._emitEvent(t,e,n,null,s,null),t==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(t,e,n,i,null,null)}if(o||(this.currentShape=i),i&&!i.get("destroyed")){var l=this.canvas,u=l.get("el");u.style.cursor=i.attr("cursor")||l.get("cursor")}},r.prototype._onmousedown=function(t,e,n){n.button===MZ&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,t,e,null,null)},r.prototype._emitMouseoverEvents=function(t,e,n,i){var a=this.canvas.get("el");n!==i&&(n&&(this._emitEvent("mouseout",t,e,n,n,i),this._emitEvent("mouseleave",t,e,n,n,i),(!i||i.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),i&&(this._emitEvent("mouseover",t,e,i,n,i),this._emitEvent("mouseenter",t,e,i,n,i)))},r.prototype._emitDragoverEvents=function(t,e,n,i,a){i?(i!==n&&(n&&this._emitEvent("dragleave",t,e,n,n,i),this._emitEvent("dragenter",t,e,i,n,i)),a||this._emitEvent("dragover",t,e,i)):n&&this._emitEvent("dragleave",t,e,n,n,i),a&&this._emitEvent("dragover",t,e,i)},r.prototype._afterDrag=function(t,e,n){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(e,n);i!==t&&this._emitMouseoverEvents(n,e,t,i),this.currentShape=i},r.prototype._onmouseup=function(t,e,n){if(n.button===MZ){var i=this.draggingShape;this.dragging?(i&&this._emitEvent("drop",n,t,e),this._emitEvent("dragend",n,t,i),this._afterDrag(i,t,n)):(this._emitEvent("mouseup",n,t,e),e===this.mousedownShape&&this._emitEvent("click",n,t,e),this.mousedownShape=null,this.mousedownPoint=null)}},r.prototype._ondragover=function(t,e,n){n.preventDefault();var i=this.currentShape;this._emitDragoverEvents(n,t,i,e,!0)},r.prototype._onmousemove=function(t,e,n){var i=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,t,a,e,!1),this._emitEvent("drag",n,t,o);else{var s=this.mousedownPoint;if(s){var l=this.mousedownShape,u=n.timeStamp,c=u-this.mousedownTimeStamp,f=s.clientX-t.clientX,d=s.clientY-t.clientY,h=f*f+d*d;c>120||h>Hqe?l&&l.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,t,o),this.mousedownShape=null,this.mousedownPoint=null):!l&&i.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,t,a,e),this._emitEvent("mousemove",n,t,e)):(this._emitMouseoverEvents(n,t,a,e),this._emitEvent("mousemove",n,t,e))}else this._emitMouseoverEvents(n,t,a,e),this._emitEvent("mousemove",n,t,e)}},r.prototype._emitEvent=function(t,e,n,i,a,o){var s=this._getEventObj(t,e,n,i,a,o);if(i){s.shape=i,PZ(i,t,s);for(var l=i.getParent();l;)l.emitDelegation(t,s),s.propagationStopped||Wqe(l,t,s),s.propagationPath.push(l),l=l.getParent()}else{var u=this.canvas;PZ(u,t,s)}},r.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},r}(),DZ="px",RZ=QT(),Yqe=RZ&&RZ.name==="firefox";(function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},t.prototype.initContainer=function(){var e=this.get("container");ot(e)&&(e=document.getElementById(e),this.set("container",e))},t.prototype.initDom=function(){var e=this.createDom();this.set("el",e);var n=this.get("container");n.appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},t.prototype.initEvents=function(){var e=new jqe({canvas:this});e.init(),this.set("eventController",e)},t.prototype.initTimeline=function(){var e=new Vqe(this);this.set("timeline",e)},t.prototype.setDOMSize=function(e,n){var i=this.get("el");yZ&&(i.style.width=e+DZ,i.style.height=n+DZ)},t.prototype.changeSize=function(e,n){this.setDOMSize(e,n),this.set("width",e),this.set("height",n),this.onCanvasChange("changeSize")},t.prototype.getRenderer=function(){return this.get("renderer")},t.prototype.getCursor=function(){return this.get("cursor")},t.prototype.setCursor=function(e){this.set("cursor",e);var n=this.get("el");yZ&&n&&(n.style.cursor=e)},t.prototype.getPointByEvent=function(e){var n=this.get("supportCSSTransform");if(n){if(Yqe&&!nt(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!nt(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var i=this.getClientByEvent(e),a=i.x,o=i.y;return this.getPointByClient(a,o)},t.prototype.getClientByEvent=function(e){var n=e;return e.touches&&(e.type==="touchend"?n=e.changedTouches[0]:n=e.touches[0]),{x:n.clientX,y:n.clientY}},t.prototype.getPointByClient=function(e,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:e-a.left,y:n-a.top}},t.prototype.getClientByPoint=function(e,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:e+a.left,y:n+a.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){var e=this.get("eventController");e.destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),r.prototype.destroy.call(this))},t})(AZ);(function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var e=r.prototype.clone.call(this),n=this.getChildren(),i=0;i<n.length;i++){var a=n[i];e.add(a.clone())}return e},t})(AZ);(function(r){Ie(t,r);function t(e){return r.call(this,e)||this}return t.prototype._isInBBox=function(e,n){var i=this.getBBox();return i.minX<=e&&i.maxX>=e&&i.minY<=n&&i.maxY>=n},t.prototype.afterAttrsChange=function(e){r.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},t.prototype.applyMatrix=function(e){r.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),n=this.getTotalMatrix(),i=e.minX,a=e.minY,o=e.maxX,s=e.maxY;if(n){var l=qp(n,[e.minX,e.minY]),u=qp(n,[e.maxX,e.minY]),c=qp(n,[e.minX,e.maxY]),f=qp(n,[e.maxX,e.maxY]);i=Math.min(l[0],u[0],c[0],f[0]),o=Math.max(l[0],u[0],c[0],f[0]),a=Math.min(l[1],u[1],c[1],f[1]),s=Math.max(l[1],u[1],c[1],f[1])}var d=this.attrs;if(d.shadowColor){var h=d.shadowBlur,v=h===void 0?0:h,p=d.shadowOffsetX,g=p===void 0?0:p,m=d.shadowOffsetY,y=m===void 0?0:m,b=i-v+g,x=o+v+g,w=a-v+y,S=s+v+y;i=Math.min(i,b),o=Math.max(o,x),a=Math.min(a,w),s=Math.max(s,S)}return{x:i,y:a,minX:i,minY:a,maxX:o,maxY:s,width:o-i,height:s-a}},t.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},t.prototype.isClipShape=function(){return this.get("isClipShape")},t.prototype.isInShape=function(e,n){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,n){var i=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[e,n,1];o=this.invertFromMatrix(o);var s=o[0],l=o[1],u=this._isInBBox(s,l);return this.isOnlyHitBox()?u:!!(u&&!this.isClipped(s,l)&&(this.isInShape(s,l)||i&&i.isHit(s,l)||a&&a.isHit(s,l)))},t})(CZ);var Xqe=new Map;function nu(r,t){Xqe.set(r,t)}function OZ(r){var t=r.attr(),e=t.x,n=t.y,i=t.width,a=t.height;return{x:e,y:n,width:i,height:a}}function LZ(r){var t=r.attr(),e=t.x,n=t.y,i=t.r;return{x:e-i,y:n-i,width:i*2,height:i*2}}function FZ(r,t){return!r||!t?r||t:{minX:Math.min(r.minX,t.minX),minY:Math.min(r.minY,t.minY),maxX:Math.max(r.maxX,t.maxX),maxY:Math.max(r.maxY,t.maxY)}}function fD(r,t){var e=r.get("startArrowShape"),n=r.get("endArrowShape"),i=null,a=null;return e&&(i=e.getCanvasBBox(),t=FZ(t,i)),n&&(a=n.getCanvasBBox(),t=FZ(t,a)),t}function qqe(r){for(var t=r.attr(),e=t.points,n=[],i=[],a=0;a<e.length;a++){var o=e[a];n.push(o[0]),i.push(o[1])}var s=Dc(n,i),l=s.x,u=s.y,c=s.width,f=s.height,d={minX:l,minY:u,maxX:l+c,maxY:u+f};return d=fD(r,d),{x:d.minX,y:d.minY,width:d.maxX-d.minX,height:d.maxY-d.minY}}function Kqe(r){for(var t=r.attr(),e=t.points,n=[],i=[],a=0;a<e.length;a++){var o=e[a];n.push(o[0]),i.push(o[1])}return Dc(n,i)}var dD=null;function Zqe(){if(!dD){var r=document.createElement("canvas");r.width=1,r.height=1,dD=r.getContext("2d")}return dD}function Qqe(r,t,e){var n=1;if(ot(r)&&(n=r.split(`
`).length),n>1){var i=Jqe(t,e);return t*n+i*(n-1)}return t}function Jqe(r,t){return t?t-r:r*.14}function eKe(r,t){var e=Zqe(),n=0;if(nt(r)||r==="")return n;if(e.save(),e.font=t,ot(r)&&r.includes(`
`)){var i=r.split(`
`);G(i,function(a){var o=e.measureText(a).width;n<o&&(n=o)})}else n=e.measureText(r).width;return e.restore(),n}function tKe(r){var t=r.fontSize,e=r.fontFamily,n=r.fontWeight,i=r.fontStyle,a=r.fontVariant;return[i,a,n,t+"px",e].join(" ").trim()}function rKe(r){var t=r.attr(),e=t.x,n=t.y,i=t.text,a=t.fontSize,o=t.lineHeight,s=t.font;s||(s=tKe(t));var l=eKe(i,s),u;if(!l)u={x:e,y:n,width:0,height:0};else{var c=t.textAlign,f=t.textBaseline,d=Qqe(i,a,o),h={x:e,y:n-d};c&&(c==="end"||c==="right"?h.x-=l:c==="center"&&(h.x-=l/2)),f&&(f==="top"?h.y+=d:f==="middle"&&(h.y+=d/2)),u={x:h.x,y:h.y,width:l,height:d}}return u}function nKe(r,t){for(var e=[],n=[],i=[],a=0;a<r.length;a++){var o=r[a],s=o.currentPoint,l=o.params,u=o.prePoint,c=void 0;switch(o.command){case"Q":c=yA.box(u[0],u[1],l[1],l[2],l[3],l[4]);break;case"C":c=Nv.box(u[0],u[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var f=o.arcParams;c=P$.box(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:e.push(s[0]),n.push(s[1]);break}c&&(o.box=c,e.push(c.x,c.x+c.width),n.push(c.y,c.y+c.height)),t&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&i.push(o)}e=e.filter(function(m){return!Number.isNaN(m)}),n=n.filter(function(m){return!Number.isNaN(m)});var d=sa(e),h=sa(n),v=Xi(e),p=Xi(n);if(i.length===0)return{x:d,y:h,width:v-d,height:p-h};for(var a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,g=void 0;s[0]===d?(g=$C(o,t),d=d-g.xExtra):s[0]===v&&(g=$C(o,t),v=v+g.xExtra),s[1]===h?(g=$C(o,t),h=h-g.yExtra):s[1]===p&&(g=$C(o,t),p=p+g.yExtra)}return{x:d,y:h,width:v-d,height:p-h}}function $C(r,t){var e=r.prePoint,n=r.currentPoint,i=r.nextPoint,a=Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2),o=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),s=Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||Math.sin(l)===0||ba(l,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),c=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));u=u>Math.PI/2?Math.PI-u:u,c=c>Math.PI/2?Math.PI-c:c;var f={xExtra:Math.cos(l/2-u)*(t/2*(1/Math.sin(l/2)))-t/2||0,yExtra:Math.cos(c-l/2)*(t/2*(1/Math.sin(l/2)))-t/2||0};return f}function iKe(r){var t=r.attr(),e=t.path,n=t.stroke,i=n?t.lineWidth:0,a=r.get("segments")||TA(e),o=nKe(a,i),s=o.x,l=o.y,u=o.width,c=o.height,f={minX:s,minY:l,maxX:s+u,maxY:l+c};return f=fD(r,f),{x:f.minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY}}function aKe(r){var t=r.attr(),e=t.x1,n=t.y1,i=t.x2,a=t.y2,o=Math.min(e,i),s=Math.max(e,i),l=Math.min(n,a),u=Math.max(n,a),c={minX:o,maxX:s,minY:l,maxY:u};return c=fD(r,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function oKe(r){var t=r.attr(),e=t.x,n=t.y,i=t.rx,a=t.ry;return{x:e-i,y:n-a,width:i*2,height:a*2}}nu("rect",OZ);nu("image",OZ);nu("circle",LZ);nu("marker",LZ);nu("polyline",qqe);nu("polygon",Kqe);nu("text",rKe);nu("path",iKe);nu("line",aKe);nu("ellipse",oKe);function NZ(r,t,e){var n=new gZ(t,e);n.target=r,n.propagationPath.push(r),r.emitDelegation(t,n);for(var i=r.getParent();i;)i.emitDelegation(t,n),n.propagationPath.push(i),i=i.getParent()}var BZ=[1,0,0,0,1,0,0,0,1];function Kp(r,t,e){if(e===void 0&&(e=BZ),!t)return null;var n=Zn(e,[["t",-r.x,-r.y],["r",t],["t",r.x,r.y]]);return n}function hD(r,t){return!r.x&&!r.y?null:Zn(t||BZ,[["t",r.x,r.y]])}function sKe(r){var t=[1,0,0],e=[0,0,0];return Pl(e,t,r),Math.atan2(e[1],e[0])}function zC(r,t){var e=[0,0];return Yce(e,t,r),e}function lKe(r,t){var e=zC(r,[t.minX,t.minY]),n=zC(r,[t.maxX,t.minY]),i=zC(r,[t.minX,t.maxY]),a=zC(r,[t.maxX,t.maxY]),o=Math.min(e[0],n[0],i[0],a[0]),s=Math.max(e[0],n[0],i[0],a[0]),l=Math.min(e[1],n[1],i[1],a[1]),u=Math.max(e[1],n[1],i[1],a[1]);return{x:o,y:l,minX:o,minY:l,maxX:s,maxY:u,width:s-o,height:u-l}}function $Z(r,t,e,n){if(t){var i=Kp({x:e,y:n},t,r.getMatrix());r.setMatrix(i)}}function $0(r,t,e){var n=hD({x:t,y:e});r.attr("matrix",n)}function GC(r){var t=0,e=0,n=0,i=0;return zt(r)?t=e=n=i=r:Qe(r)&&(t=r[0],n=nt(r[1])?r[0]:r[1],i=nt(r[2])?r[0]:r[2],e=nt(r[3])?n:r[3]),[t,n,i,e]}function vD(r){for(var t=r.childNodes,e=t.length,n=e-1;n>=0;n--)r.removeChild(t[n])}function uKe(r,t){return!!r.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function z0(r){var t=r.start,e=r.end,n=Math.min(t.x,e.x),i=Math.min(t.y,e.y),a=Math.max(t.x,e.x),o=Math.max(t.y,e.y);return{x:n,y:i,minX:n,minY:i,maxX:a,maxY:o,width:a-n,height:o-i}}function cKe(r){var t=r.map(function(s){return s.x}),e=r.map(function(s){return s.y}),n=Math.min.apply(Math,t),i=Math.min.apply(Math,e),a=Math.max.apply(Math,t),o=Math.max.apply(Math,e);return{x:n,y:i,minX:n,minY:i,maxX:a,maxY:o,width:a-n,height:o-i}}function UC(r,t,e,n){var i=r+e,a=t+n;return{x:r,y:t,width:e,height:n,minX:r,minY:t,maxX:isNaN(i)?0:i,maxY:isNaN(a)?0:a}}function mh(r,t,e){return(1-e)*r+t*e}function Zp(r,t,e){return{x:r.x+Math.cos(e)*t,y:r.y+Math.sin(e)*t}}function fKe(r,t){var e=t.x-r.x,n=t.y-r.y;return Math.sqrt(e*e+n*n)}var VC=function(r,t,e){return e===void 0&&(e=Math.pow(Number.EPSILON,.5)),[r,t].includes(1/0)?Math.abs(r)===Math.abs(t):Math.abs(r-t)<e};function dKe(r,t){var e=Math.max(r.minX,t.minX),n=Math.max(r.minY,t.minY),i=Math.min(r.maxX,t.maxX),a=Math.min(r.maxY,t.maxY);return UC(e,n,i-e,a-n)}function zZ(r){var t=r.getClip(),e=t&&t.getBBox(),n;if(!r.isGroup())n=r.getBBox();else{var i=1/0,a=-1/0,o=1/0,s=-1/0,l=r.getChildren();l.length>0?G(l,function(u){if(u.get("visible")){if(u.isGroup()&&u.get("children").length===0)return!0;var c=zZ(u),f=u.applyToMatrix([c.minX,c.minY,1]),d=u.applyToMatrix([c.minX,c.maxY,1]),h=u.applyToMatrix([c.maxX,c.minY,1]),v=u.applyToMatrix([c.maxX,c.maxY,1]),p=Math.min(f[0],d[0],h[0],v[0]),g=Math.max(f[0],d[0],h[0],v[0]),m=Math.min(f[1],d[1],h[1],v[1]),y=Math.max(f[1],d[1],h[1],v[1]);p<i&&(i=p),g>a&&(a=g),m<o&&(o=m),y>s&&(s=y)}}):(i=0,a=0,o=0,s=0),n=UC(i,o,a-i,s-o)}return e?dKe(n,e):n}function hKe(r,t){if(!(!r.getClip()&&!t.getClip())){var e=t.getClip();if(!e){r.setClip(null);return}var n={type:e.get("type"),attrs:e.attr()};r.setClip(n)}}function Yo(r){return r+"px"}function GZ(r,t,e,n){var i=fKe(r,t),a=n/i,o=0;return e==="start"?o=0-a:e==="end"&&(o=1+a),{x:mh(r.x,t.x,o),y:mh(r.y,t.y,o)}}var vKe={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},UZ=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;return n.initCfg(),n}return t.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},t.prototype.clear=function(){},t.prototype.update=function(e){var n=this,i=this.get("defaultCfg");G(e,function(a,o){var s=n.get(o),l=a;s!==a&&(an(a)&&i[o]&&(l=Dt({},i[o],a)),n.set(o,l))}),this.updateInner(e),this.afterUpdate(e)},t.prototype.updateInner=function(e){},t.prototype.afterUpdate=function(e){Il(e,"visible")&&(e.visible?this.show():this.hide()),Il(e,"capture")&&this.setCapture(e.capture)},t.prototype.getLayoutBBox=function(){return this.getBBox()},t.prototype.getLocationType=function(){return this.get("locationType")},t.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},t.prototype.setOffset=function(e,n){this.update({offsetX:e,offsetY:n})},t.prototype.setLocation=function(e){var n=A({},e);this.update(n)},t.prototype.getLocation=function(){var e=this,n={},i=this.get("locationType"),a=vKe[i];return G(a,function(o){n[o]=e.get(o)}),n},t.prototype.isList=function(){return!1},t.prototype.isSlider=function(){return!1},t.prototype.init=function(){},t.prototype.initCfg=function(){var e=this,n=this.get("defaultCfg");G(n,function(i,a){var o=e.get(a);if(an(o)){var s=Dt({},i,o);e.set(a,s)}})},t}(wZ),yh="update_status",pKe=["visible","tip","delegateObject"],gKe=["container","group","shapesMap","isRegister","isUpdating","destroyed"],io=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},t.prototype.remove=function(){this.clear();var e=this.get("group");e.remove()},t.prototype.clear=function(){var e=this.get("group");e.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},t.prototype.getChildComponentById=function(e){var n=this.getElementById(e),i=n&&n.get("component");return i},t.prototype.getElementById=function(e){return this.get("shapesMap")[e]},t.prototype.getElementByLocalId=function(e){var n=this.getElementId(e);return this.getElementById(n)},t.prototype.getElementsByName=function(e){var n=[];return G(this.get("shapesMap"),function(i){i.get("name")===e&&n.push(i)}),n},t.prototype.getContainer=function(){return this.get("container")},t.prototype.updateInner=function(e){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},t.prototype.render=function(){var e=this.get("offScreenGroup");e||(e=this.offScreenRender());var n=this.get("group");this.updateElements(e,n),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},t.prototype.show=function(){var e=this.get("group");e.show(),this.set("visible",!0)},t.prototype.hide=function(){var e=this.get("group");e.hide(),this.set("visible",!1)},t.prototype.setCapture=function(e){var n=this.get("group");n.set("capture",e),this.set("capture",e)},t.prototype.destroy=function(){this.removeEvent(),this.remove(),r.prototype.destroy.call(this)},t.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},t.prototype.getLayoutBBox=function(){var e=this.get("group"),n=this.getInnerLayoutBBox(),i=e.getTotalMatrix();return i&&(n=lKe(i,n)),n},t.prototype.on=function(e,n,i){var a=this.get("group");return a.on(e,n,i),this},t.prototype.off=function(e,n){var i=this.get("group");return i&&i.off(e,n),this},t.prototype.emit=function(e,n){var i=this.get("group");i.emit(e,n)},t.prototype.init=function(){r.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},t.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},t.prototype.delegateEmit=function(e,n){var i=this.get("group");n.target=i,i.emit(e,n),NZ(i,e,n)},t.prototype.createOffScreenGroup=function(){var e=this.get("group"),n=e.getGroupBase(),i=new n({delegateObject:this.getDelegateObject()});return i},t.prototype.applyOffset=function(){var e=this.get("offsetX"),n=this.get("offsetY");this.moveElementTo(this.get("group"),{x:e,y:n})},t.prototype.initGroup=function(){var e=this.get("container");this.set("group",e.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},t.prototype.offScreenRender=function(){this.clearOffScreenCache();var e=this.createOffScreenGroup();return this.renderInner(e),this.set("offScreenGroup",e),this.set("offScreenBBox",zZ(e)),e},t.prototype.addGroup=function(e,n){this.appendDelegateObject(e,n);var i=e.addGroup(n);return this.get("isRegister")&&this.registerElement(i),i},t.prototype.addShape=function(e,n){this.appendDelegateObject(e,n);var i=e.addShape(n);return this.get("isRegister")&&this.registerElement(i),i},t.prototype.addComponent=function(e,n){var i=n.id,a=n.component,o=Ur(n,["id","component"]),s=new a(A(A({},o),{id:i,container:e,updateAutoRender:this.get("updateAutoRender")}));return s.init(),s.render(),this.get("isRegister")&&this.registerElement(s.get("group")),s},t.prototype.initEvent=function(){},t.prototype.removeEvent=function(){var e=this.get("group");e.off()},t.prototype.getElementId=function(e){var n=this.get("id"),i=this.get("name");return n+"-"+i+"-"+e},t.prototype.registerElement=function(e){var n=e.get("id");this.get("shapesMap")[n]=e},t.prototype.unregisterElement=function(e){var n=e.get("id");delete this.get("shapesMap")[n]},t.prototype.moveElementTo=function(e,n){var i=hD(n);e.attr("matrix",i)},t.prototype.addAnimation=function(e,n,i){var a=n.attr("opacity");nt(a)&&(a=1),n.attr("opacity",0),n.animate({opacity:a},i)},t.prototype.removeAnimation=function(e,n,i){n.animate({opacity:0},i)},t.prototype.updateAnimation=function(e,n,i,a){n.animate(i,a)},t.prototype.updateElements=function(e,n){var i=this,a=this.get("animate"),o=this.get("animateOption"),s=e.getChildren().slice(0),l;G(s,function(u){var c=u.get("id"),f=i.getElementById(c),d=u.get("name");if(f)if(u.get("isComponent")){var h=u.get("component"),v=f.get("component"),p=Hx(h.cfg,_B(nd(h.cfg),gKe));v.update(p),f.set(yh,"update")}else{var g=i.getReplaceAttrs(f,u);a&&o.update?i.updateAnimation(d,f,g,o.update):f.attr(g),u.isGroup()&&i.updateElements(u,f),G(pKe,function(x){f.set(x,u.get(x))}),hKe(f,u),l=f,f.set(yh,"update")}else{n.add(u);var m=n.getChildren();if(m.splice(m.length-1,1),l){var y=m.indexOf(l);m.splice(y+1,0,u)}else m.unshift(u);if(i.registerElement(u),u.set(yh,"add"),u.get("isComponent")){var h=u.get("component");h.set("container",n)}else u.isGroup()&&i.registerNewGroup(u);if(l=u,a){var b=i.get("isInit")?o.appear:o.enter;b&&i.addAnimation(d,u,b)}}})},t.prototype.clearUpdateStatus=function(e){var n=e.getChildren();G(n,function(i){i.set(yh,null)})},t.prototype.clearOffScreenCache=function(){var e=this.get("offScreenGroup");e&&e.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},t.prototype.getDelegateObject=function(){var e,n=this.get("name"),i=(e={},e[n]=this,e.component=this,e);return i},t.prototype.appendDelegateObject=function(e,n){var i=e.get("delegateObject");n.delegateObject||(n.delegateObject={}),jt(n.delegateObject,i)},t.prototype.getReplaceAttrs=function(e,n){var i=e.attr(),a=n.attr();return G(i,function(o,s){a[s]===void 0&&(a[s]=void 0)}),a},t.prototype.registerNewGroup=function(e){var n=this,i=e.getChildren();G(i,function(a){n.registerElement(a),a.set(yh,"add"),a.isGroup()&&n.registerNewGroup(a)})},t.prototype.deleteElements=function(){var e=this,n=this.get("shapesMap"),i=[];G(n,function(s,l){!s.get(yh)||s.destroyed?i.push([l,s]):s.set(yh,null)});var a=this.get("animate"),o=this.get("animateOption");G(i,function(s){var l=s[0],u=s[1];if(!u.destroyed){var c=u.get("name");if(a&&o.leave){var f=jt({callback:function(){e.removeElement(u)}},o.leave);e.removeAnimation(c,u,f)}else e.removeElement(u)}delete n[l]})},t.prototype.removeElement=function(e){if(e.get("isGroup")){var n=e.get("component");n&&n.destroy()}e.remove()},t}(UZ),pD="\u2026";function mKe(r){for(var t=0,e=0;e<r.length;e++)t+=bh(r,e);return t}function bh(r,t){return r.charCodeAt(t)>0&&r.charCodeAt(t)<128?1:2}function yKe(r,t,e){e===void 0&&(e="tail");var n=r.length,i="";if(e==="tail"){for(var a=0,o=0;a<t;){var s=bh(r,o);if(a+s<=t)i+=r[o],a+=bh(r,o),o++;else break}i+=pD}else if(e==="head"){for(var a=0,o=n-1;a<t;){var s=bh(r,o);if(a+s<=t)i+=r[o],a+=bh(r,o),o--;else break}i=pD+i}else{for(var l="",u="",a=0,c=0,f=n-1;a<t;){var d=bh(r,c),h=!1;d+a<=t&&(l+=r[c],c++,a+=d,h=!0);var v=bh(r,f);if(v+a<=t&&(u=r[f]+u,a+=v,f--,h=!0),!h)break}i=l+pD+u}return i}var bKe="\u2026",xKe=2,wKe=400;function SKe(r){for(var t=r.map(function(l){var u=l.attr("text");return nt(u)?"":""+u}),e=0,n=0,i=0;i<t.length;i+=1){for(var a=0,o=0;o<=t[i].length;o+=1){var s=t[i].charCodeAt(o);s>=19968&&s<=40869?a+=2:a+=1}a>e&&(e=a,n=i)}return r[n].getBBox().width}function gD(r){if(r.length>wKe)return SKe(r);var t=0;return G(r,function(e){var n=e.getBBox(),i=n.width;t<i&&(t=i)}),t}function CKe(r,t){var e=t.getCanvasBBox();return r?e.width:e.height}function G0(r,t,e,n){var i;n===void 0&&(n="tail");var a=(i=t.attr("text"))!==null&&i!==void 0?i:"";if(n==="tail"){var o=Hx(t.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),s=VB(a,e,o,"\u2026");return a!==s?(t.attr("text",s),t.set("tip",a),!0):(t.set("tip",null),!1)}var l=CKe(r,t),u=mKe(a),c=!1;if(e<l){var f=Math.floor(e/l*u)-xKe,d=void 0;f>=0?d=yKe(a,f,n):d=bKe,d&&(t.attr("text",d),c=!0)}return c?t.set("tip",a):t.set("tip",null),c}function HC(r,t){var e=t.x,n=t.y,i=t.content,a=t.style,o=t.id,s=t.name,l=t.rotate,u=t.maxLength,c=t.autoEllipsis,f=t.isVertical,d=t.ellipsisPosition,h=t.background,v=r.addGroup({id:o+"-group",name:s+"-group",attrs:{x:e,y:n}}),p=v.addShape({type:"text",id:o,name:s,attrs:A({x:0,y:0,text:i},a)}),g=GC(ae(h,"padding",0));if(u&&c){var m=u-(g[1]+g[3]);G0(!f,p,m,d)}if(h){var y=ae(h,"style",{}),b=p.getCanvasBBox(),x=b.minX,w=b.minY,S=b.width,C=b.height,_=v.addShape("rect",{id:o+"-bg",name:o+"-bg",attrs:A({x:x-g[3],y:w-g[0],width:S+g[1]+g[3],height:C+g[0]+g[2]},y)});_.toBack()}$0(v,e,n),$Z(v,l,e,n)}var sn={fontFamily:`
  BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4},EKe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:sn.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:sn.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:sn.lineColor,lineWidth:1}}}})},t.prototype.renderInner=function(e){this.renderLine(e),this.get("text")&&this.renderLabel(e)},t.prototype.renderLine=function(e){var n=this.get("start"),i=this.get("end"),a=this.get("style");this.addShape(e,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:A({x1:n.x,y1:n.y,x2:i.x,y2:i.y},a)})},t.prototype.getLabelPoint=function(e,n,i){var a;return i==="start"?a=0:i==="center"?a=.5:ot(i)&&i.indexOf("%")!==-1?a=parseInt(i,10)/100:zt(i)?a=i:a=1,(a>1||a<0)&&(a=1),{x:mh(e.x,n.x,a),y:mh(e.y,n.y,a)}},t.prototype.renderLabel=function(e){var n=this.get("text"),i=this.get("start"),a=this.get("end"),o=n.position,s=n.content,l=n.style,u=n.offsetX,c=n.offsetY,f=n.autoRotate,d=n.maxLength,h=n.autoEllipsis,v=n.ellipsisPosition,p=n.background,g=n.isVertical,m=g===void 0?!1:g,y=this.getLabelPoint(i,a,o),b=y.x+u,x=y.y+c,w={id:this.getElementId("line-text"),name:"annotation-line-text",x:b,y:x,content:s,style:l,maxLength:d,autoEllipsis:h,ellipsisPosition:v,background:p,isVertical:m};if(f){var S=[a.x-i.x,a.y-i.y];w.rotate=Math.atan2(S[1],S[0])}HC(e,w)},t}(io),_Ke=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:sn.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:sn.fontFamily}}})},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetLocation()},t.prototype.renderInner=function(e){var n=this.getLocation(),i=n.x,a=n.y,o=this.get("content"),s=this.get("style"),l=this.getElementId("text"),u=this.get("name")+"-text",c=this.get("maxLength"),f=this.get("autoEllipsis"),d=this.get("isVertical"),h=this.get("ellipsisPosition"),v=this.get("background"),p=this.get("rotate"),g={id:l,name:u,x:i,y:a,content:o,style:s,maxLength:c,autoEllipsis:f,isVertical:d,ellipsisPosition:h,background:v,rotate:p};HC(e,g)},t.prototype.resetLocation=function(){var e=this.getElementByLocalId("text-group");if(e){var n=this.getLocation(),i=n.x,a=n.y,o=this.get("rotate");$0(e,i,a),$Z(e,o,i,a)}},t}(io),TKe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},t.prototype.renderInner=function(e){this.renderArc(e)},t.prototype.getArcPath=function(){var e=this.getLocation(),n=e.center,i=e.radius,a=e.startAngle,o=e.endAngle,s=Zp(n,i,a),l=Zp(n,i,o),u=o-a>Math.PI?1:0,c=[["M",s.x,s.y]];if(o-a==Math.PI*2){var f=Zp(n,i,a+Math.PI);c.push(["A",i,i,0,u,1,f.x,f.y]),c.push(["A",i,i,0,u,1,l.x,l.y])}else c.push(["A",i,i,0,u,1,l.x,l.y]);return c},t.prototype.renderArc=function(e){var n=this.getArcPath(),i=this.get("style");this.addShape(e,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:A({path:n},i)})},t}(io),AKe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:sn.regionColor,opacity:.4}}})},t.prototype.renderInner=function(e){this.renderRegion(e)},t.prototype.renderRegion=function(e){var n=this.get("start"),i=this.get("end"),a=this.get("style"),o=z0({start:n,end:i});this.addShape(e,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:A({x:o.x,y:o.y,width:o.width,height:o.height},a)})},t}(io),kKe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},t.prototype.renderInner=function(e){this.renderImage(e)},t.prototype.getImageAttrs=function(){var e=this.get("start"),n=this.get("end"),i=this.get("style"),a=z0({start:e,end:n}),o=this.get("src");return A({x:a.x,y:a.y,img:o,width:a.width,height:a.height},i)},t.prototype.renderImage=function(e){this.addShape(e,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},t}(io),MKe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:sn.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:sn.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:sn.fontFamily}}}})},t.prototype.renderInner=function(e){ae(this.get("line"),"display")&&this.renderLine(e),ae(this.get("text"),"display")&&this.renderText(e),ae(this.get("point"),"display")&&this.renderPoint(e),this.get("autoAdjust")&&this.autoAdjust(e)},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},t.prototype.renderPoint=function(e){var n=this.getShapeAttrs().point;this.addShape(e,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:n})},t.prototype.renderLine=function(e){var n=this.getShapeAttrs().line;this.addShape(e,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:n})},t.prototype.renderText=function(e){var n=this.getShapeAttrs().text,i=n.x,a=n.y,o=n.text,s=Ur(n,["x","y","text"]),l=this.get("text"),u=l.background,c=l.maxLength,f=l.autoEllipsis,d=l.isVertival,h=l.ellipsisPosition,v={x:i,y:a,id:this.getElementId("text"),name:"annotation-text",content:o,style:s,background:u,maxLength:c,autoEllipsis:f,isVertival:d,ellipsisPosition:h};HC(e,v)},t.prototype.autoAdjust=function(e){var n=this.get("direction"),i=this.get("x"),a=this.get("y"),o=ae(this.get("line"),"length",0),s=this.get("coordinateBBox"),l=e.getBBox(),u=l.minX,c=l.maxX,f=l.minY,d=l.maxY,h=e.findById(this.getElementId("text-group")),v=e.findById(this.getElementId("text")),p=e.findById(this.getElementId("line"));if(!!s){if(h){if(i+u<=s.minX){var g=s.minX-(i+u);$0(h,h.attr("x")+g,h.attr("y"))}if(i+c>=s.maxX){var g=i+c-s.maxX;$0(h,h.attr("x")-g,h.attr("y"))}}if(n==="upward"&&a+f<=s.minY||n!=="upward"&&a+d>=s.maxY){var m=void 0,y=void 0;n==="upward"&&a+f<=s.minY?(m="top",y=1):(m="bottom",y=-1),v.attr("textBaseline",m),p&&p.attr("path",[["M",0,0],["L",0,o*y]]),$0(h,h.attr("x"),(o+2)*y)}}},t.prototype.getShapeAttrs=function(){var e=ae(this.get("line"),"display"),n=ae(this.get("point"),"style",{}),i=ae(this.get("line"),"style",{}),a=ae(this.get("text"),"style",{}),o=this.get("direction"),s=e?ae(this.get("line"),"length",0):0,l=o==="upward"?-1:1;return{point:A({x:0,y:0},n),line:A({path:[["M",0,0],["L",0,s*l]]},i),text:A({x:0,y:(s+2)*l,text:ae(this.get("text"),"content",""),textBaseline:o==="upward"?"bottom":"top"},a)}},t}(io),IKe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:sn.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:sn.textColor,fontFamily:sn.fontFamily}}}})},t.prototype.renderInner=function(e){var n=ae(this.get("region"),"style",{});ae(this.get("text"),"style",{});var i=this.get("lineLength")||0,a=this.get("points");if(!!a.length){var o=cKe(a),s=[];s.push(["M",a[0].x,o.minY-i]),a.forEach(function(u){s.push(["L",u.x,u.y])}),s.push(["L",a[a.length-1].x,a[a.length-1].y-i]),this.addShape(e,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:A({path:s},n)});var l=A({id:this.getElementId("text"),name:"annotation-text",x:(o.minX+o.maxX)/2,y:o.minY-i},this.get("text"));HC(e,l)}},t}(io),PKe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},t.prototype.renderInner=function(e){var n=this,i=this.get("start"),a=this.get("end"),o=this.addGroup(e,{id:this.getElementId("region-filter"),capture:!1});G(this.get("shapes"),function(l,u){var c=l.get("type"),f=Or(l.attr());n.adjustShapeAttrs(f),n.addShape(o,{id:n.getElementId("shape-"+c+"-"+u),capture:!1,type:c,attrs:f})});var s=z0({start:i,end:a});o.setClip({type:"rect",attrs:{x:s.minX,y:s.minY,width:s.width,height:s.height}})},t.prototype.adjustShapeAttrs=function(e){var n=this.get("color");e.fill&&(e.fill=e.fillStyle=n),e.stroke=e.strokeStyle=n},t}(io),DKe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"shape",draw:us})},t.prototype.renderInner=function(e){var n=this.get("render");Kt(n)&&n(e)},t}(io),mD=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},t.prototype.getContainer=function(){return this.get("container")},t.prototype.show=function(){var e=this.get("container");e.style.display="",this.set("visible",!0)},t.prototype.hide=function(){var e=this.get("container");e.style.display="none",this.set("visible",!1)},t.prototype.setCapture=function(e){var n=this.getContainer(),i=e?"auto":"none";n.style.pointerEvents=i,this.set("capture",e)},t.prototype.getBBox=function(){var e=this.getContainer(),n=parseFloat(e.style.left)||0,i=parseFloat(e.style.top)||0;return UC(n,i,e.clientWidth,e.clientHeight)},t.prototype.clear=function(){var e=this.get("container");vD(e)},t.prototype.destroy=function(){this.removeEvent(),this.removeDom(),r.prototype.destroy.call(this)},t.prototype.init=function(){r.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},t.prototype.initCapture=function(){this.setCapture(this.get("capture"))},t.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},t.prototype.initDom=function(){},t.prototype.initContainer=function(){var e=this.get("container");if(nt(e)){e=this.createDom();var n=this.get("parent");ot(n)&&(n=document.getElementById(n),this.set("parent",n)),n.appendChild(e),this.set("container",e)}else ot(e)&&(e=document.getElementById(e),this.set("container",e));this.get("parent")||this.set("parent",e.parentNode)},t.prototype.resetStyles=function(){var e=this.get("domStyles"),n=this.get("defaultStyles");e?e=Dt({},n,e):e=n,this.set("domStyles",e)},t.prototype.applyStyles=function(){var e=this.get("domStyles");if(!!e){var n=this.getContainer();this.applyChildrenStyles(n,e);var i=this.get("containerClassName");if(i&&uKe(n,i)){var a=e[i];Vr(n,a)}}},t.prototype.applyChildrenStyles=function(e,n){G(n,function(i,a){var o=e.getElementsByClassName(a);G(o,function(s){Vr(s,i)})})},t.prototype.applyStyle=function(e,n){var i=this.get("domStyles");Vr(n,i[e])},t.prototype.createDom=function(){var e=this.get("containerTpl");return Qn(e)},t.prototype.initEvent=function(){},t.prototype.removeDom=function(){var e=this.get("container");e&&e.parentNode&&e.parentNode.removeChild(e)},t.prototype.removeEvent=function(){},t.prototype.updateInner=function(e){Il(e,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},t.prototype.resetPosition=function(){},t}(UZ),RKe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},t.prototype.render=function(){var e=this.getContainer(),n=this.get("html");vD(e);var i=Kt(n)?n(e):n;vT(i)?e.appendChild(i):ot(i)&&e.appendChild(Qn(i)),this.resetPosition()},t.prototype.resetPosition=function(){var e=this.getContainer(),n=this.getLocation(),i=n.x,a=n.y,o=this.get("alignX"),s=this.get("alignY"),l=this.get("offsetX"),u=this.get("offsetY"),c=yme(e),f=gme(e),d={x:i,y:a};o==="middle"?d.x-=Math.round(c/2):o==="right"&&(d.x-=Math.round(c)),s==="middle"?d.y-=Math.round(f/2):s==="bottom"&&(d.y-=Math.round(f)),l&&(d.x+=l),u&&(d.y+=u),Vr(e,{position:"absolute",left:d.x+"px",top:d.y+"px",zIndex:this.get("zIndex")})},t}(mD),OKe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Line:EKe,Text:_Ke,Arc:TKe,Region:AKe,Image:kKe,DataMarker:MKe,DataRegion:IKe,RegionFilter:PKe,Shape:DKe,Html:RKe});function U0(r,t,e){var n=t+"Style",i=null;return G(e,function(a,o){r[o]&&a[n]&&(i||(i={}),jt(i,a[n]))}),i}var VZ=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:sn.lineColor}},tickLine:{style:{lineWidth:1,stroke:sn.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:sn.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:sn.textColor,fontFamily:sn.fontFamily,fontWeight:"normal"},offset:10,offsetX:0,offsetY:0},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:sn.textColor,textBaseline:"middle",fontFamily:sn.fontFamily,textAlign:"center"}},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:sn.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},t.prototype.renderInner=function(e){this.get("line")&&this.drawLine(e),this.drawTicks(e),this.get("title")&&this.drawTitle(e)},t.prototype.isList=function(){return!0},t.prototype.getItems=function(){return this.get("ticks")},t.prototype.setItems=function(e){this.update({ticks:e})},t.prototype.updateItem=function(e,n){jt(e,n),this.clear(),this.render()},t.prototype.clearItems=function(){var e=this.getElementByLocalId("label-group");e&&e.clear()},t.prototype.setItemState=function(e,n,i){e[n]=i,this.updateTickStates(e)},t.prototype.hasState=function(e,n){return!!e[n]},t.prototype.getItemStates=function(e){var n=this.get("tickStates"),i=[];return G(n,function(a,o){e[o]&&i.push(o)}),i},t.prototype.clearItemsState=function(e){var n=this,i=this.getItemsByState(e);G(i,function(a){n.setItemState(a,e,!1)})},t.prototype.getItemsByState=function(e){var n=this,i=this.getItems();return ya(i,function(a){return n.hasState(a,e)})},t.prototype.getSidePoint=function(e,n){var i=this,a=i.getSideVector(n,e);return{x:e.x+a[0],y:e.y+a[1]}},t.prototype.getTextAnchor=function(e){var n;return ba(e[0],0)?n="center":e[0]>0?n="start":e[0]<0&&(n="end"),n},t.prototype.getTextBaseline=function(e){var n;return ba(e[1],0)?n="middle":e[1]>0?n="top":e[1]<0&&(n="bottom"),n},t.prototype.processOverlap=function(e){},t.prototype.drawLine=function(e){var n=this.getLinePath(),i=this.get("line");this.addShape(e,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:jt({path:n},i.style)})},t.prototype.getTickLineItems=function(e){var n=this,i=[],a=this.get("tickLine"),o=a.alignTick,s=a.length,l=1,u=e.length;return u>=2&&(l=e[1].value-e[0].value),G(e,function(c){var f=c.point;o||(f=n.getTickPoint(c.value-l/2));var d=n.getSidePoint(f,s);i.push({startPoint:f,tickValue:c.value,endPoint:d,tickId:c.id,id:"tickline-"+c.id})}),i},t.prototype.getSubTickLineItems=function(e){var n=[],i=this.get("subTickLine"),a=i.count,o=e.length;if(o>=2)for(var s=0;s<o-1;s++)for(var l=e[s],u=e[s+1],c=0;c<a;c++){var f=(c+1)/(a+1),d=(1-f)*l.tickValue+f*u.tickValue,h=this.getTickPoint(d),v=this.getSidePoint(h,i.length);n.push({startPoint:h,endPoint:v,tickValue:d,id:"sub-"+l.id+"-"+c})}return n},t.prototype.getTickLineAttrs=function(e,n,i,a){var o=this.get(n).style,s={points:[e.startPoint,e.endPoint]},l=ae(this.get("theme"),["tickLine","style"],{});o=Kt(o)?jt({},l,o(s,i,a)):o;var u=e.startPoint,c=e.endPoint;return A({x1:u.x,y1:u.y,x2:c.x,y2:c.y},o)},t.prototype.drawTick=function(e,n,i,a,o){this.addShape(n,{type:"line",id:this.getElementId(e.id),name:"axis-"+i,attrs:this.getTickLineAttrs(e,i,a,o)})},t.prototype.drawTickLines=function(e){var n=this,i=this.get("ticks"),a=this.get("subTickLine"),o=this.getTickLineItems(i),s=this.addGroup(e,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),l=this.get("tickLine");if(G(o,function(c,f){if(l.displayWithLabel){var d=n.getElementId("label-"+c.tickId);e.findById(d)&&n.drawTick(c,s,"tickLine",f,o)}else n.drawTick(c,s,"tickLine",f,o)}),a){var u=this.getSubTickLineItems(o);G(u,function(c,f){n.drawTick(c,s,"subTickLine",f,u)})}},t.prototype.processTicks=function(){var e=this,n=this.get("ticks");G(n,function(i){i.point=e.getTickPoint(i.value),nt(i.id)&&(i.id=i.name)})},t.prototype.drawTicks=function(e){var n=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(e),this.get("tickLine")&&this.drawTickLines(e);var i=this.get("ticks");G(i,function(a){n.applyTickStates(a,e)})},t.prototype.optimizeTicks=function(){var e=this.get("optimize"),n=this.get("ticks");if(e&&e.enable&&e.threshold>0){var i=la(n);if(i>e.threshold){var a=Math.ceil(i/e.threshold),o=n.filter(function(s,l){return l%a==0});this.set("ticks",o),this.set("originalTicks",n)}}},t.prototype.getLabelAttrs=function(e,n,i){var a=this.get("label"),o=a.offset,s=a.offsetX,l=a.offsetY,u=a.rotate,c=a.formatter,f=this.getSidePoint(e.point,o),d=this.getSideVector(o,f),h=c?c(e.name,e,n):e.name,v=a.style;v=Kt(v)?ae(this.get("theme"),["label","style"],{}):v;var p=jt({x:f.x+s,y:f.y+l,text:h,textAlign:this.getTextAnchor(d),textBaseline:this.getTextBaseline(d)},v);return u&&(p.matrix=Kp(f,u)),p},t.prototype.drawLabels=function(e){var n=this,i=this.get("ticks"),a=this.addGroup(e,{name:"axis-label-group",id:this.getElementId("label-group")});G(i,function(d,h){n.addShape(a,{type:"text",name:"axis-label",id:n.getElementId("label-"+d.id),attrs:n.getLabelAttrs(d,h,i),delegateObject:{tick:d,item:d,index:h}})}),this.processOverlap(a);var o=a.getChildren(),s=ae(this.get("theme"),["label","style"],{}),l=this.get("label"),u=l.style,c=l.formatter;if(Kt(u)){var f=o.map(function(d){return ae(d.get("delegateObject"),"tick")});G(o,function(d,h){var v=d.get("delegateObject").tick,p=c?c(v.name,v,h):v.name,g=jt({},s,u(p,h,f));d.attr(g)})}},t.prototype.getTitleAttrs=function(){var e=this.get("title"),n=e.style,i=e.position,a=e.offset,o=e.spacing,s=o===void 0?0:o,l=e.autoRotate,u=n.fontSize,c=.5;i==="start"?c=0:i==="end"&&(c=1);var f=this.getTickPoint(c),d=this.getSidePoint(f,a||s+u/2),h=jt({x:d.x,y:d.y,text:e.text},n),v=e.rotate,p=v;if(nt(v)&&l){var g=this.getAxisVector(f),m=[1,0];p=AT(g,m,!0)}if(p){var y=Kp(d,p);h.matrix=y}return h},t.prototype.drawTitle=function(e){this.addShape(e,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:this.getTitleAttrs()})},t.prototype.applyTickStates=function(e,n){var i=this.getItemStates(e);if(i.length){var a=this.get("tickStates"),o=this.getElementId("label-"+e.id),s=n.findById(o);if(s){var l=U0(e,"label",a);l&&s.attr(l)}var u=this.getElementId("tickline-"+e.id),c=n.findById(u);if(c){var f=U0(e,"tickLine",a);f&&c.attr(f)}}},t.prototype.updateTickStates=function(e){var n=this.getItemStates(e),i=this.get("tickStates"),a=this.get("label"),o=this.getElementByLocalId("label-"+e.id),s=this.get("tickLine"),l=this.getElementByLocalId("tickline-"+e.id);if(n.length){if(o){var u=U0(e,"label",i);u&&o.attr(u)}if(l){var c=U0(e,"tickLine",i);c&&l.attr(c)}}else o&&o.attr(a.style),l&&l.attr(s.style)},t}(io);function yD(r,t,e,n){var i=t.getChildren(),a=!1;return G(i,function(o){var s=G0(r,o,e,n);a=a||s}),a}function LKe(){return HZ}function FKe(r,t,e){return yD(r,t,e,"head")}function HZ(r,t,e){return yD(r,t,e,"tail")}function NKe(r,t,e){return yD(r,t,e,"middle")}var BKe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:LKe,ellipsisHead:FKe,ellipsisTail:HZ,ellipsisMiddle:NKe});function $Ke(r){var t=r.attr("matrix");return t&&t[0]!==1}function WZ(r){var t=$Ke(r)?sKe(r.attr("matrix")):0;return t%360}function bD(r,t,e,n){var i=!1,a=WZ(t),o=Math.abs(r?e.attr("y")-t.attr("y"):e.attr("x")-t.attr("x")),s=(r?e.attr("y")>t.attr("y"):e.attr("x")>t.attr("x"))?t.getBBox():e.getBBox();if(r){var l=Math.abs(Math.cos(a));VC(l,0,Math.PI/180)?i=s.width+n>o:i=s.height/l+n>o}else{var l=Math.abs(Math.sin(a));VC(l,0,Math.PI/180)?i=s.width+n>o:i=s.height/l+n>o}return i}function V0(r,t,e,n){var i=(n==null?void 0:n.minGap)||0,a=t.getChildren().slice().filter(function(h){return h.get("visible")});if(!a.length)return!1;var o=!1;e&&a.reverse();for(var s=a.length,l=a[0],u=l,c=1;c<s;c++){var f=a[c];f.getBBox();var d=bD(r,u,f,i);d?(f.hide(),o=!0):u=f}return o}function jZ(r,t,e){var n=(e==null?void 0:e.minGap)||0,i=t.getChildren().slice();if(i.length<2)return!1;var a=!1,o=i[0],s=o.getBBox(),l=i[1],u=i.length,c=WZ(o),f=Math.abs(r?l.attr("y")-o.attr("y"):l.attr("x")-o.attr("x")),d=0;if(r){var h=Math.abs(Math.cos(c));if(VC(h,0,Math.PI/180)){var v=gD(i);d=(v+n)/f}else d=(s.height/h+n)/f}else{var h=Math.abs(Math.sin(c));if(VC(h,0,Math.PI/180)){var v=gD(i);d=(v+n)/f}else d=(s.height/h+n)/f}if(d>1){d=Math.ceil(d);for(var p=0;p<u;p++)p%d!=0&&(i[p].hide(),a=!0)}return a}function zKe(){return YZ}function GKe(r,t,e,n){return V0(r,t,!1,n)}function UKe(r,t,e,n){return V0(r,t,!0,n)}function VKe(r,t,e,n){var i=(n==null?void 0:n.minGap)||0,a=t.getChildren().slice();if(a.length<=2)return!1;for(var o=!1,s=a.length,l=a[0],u=a[s-1],c=l,f=1;f<s-1;f++){var d=a[f];d.getBBox();var h=bD(r,c,d,i);h?(d.hide(),o=!0):c=d}var v=bD(r,c,u,i);return v&&(c.hide(),o=!0),o}function YZ(r,t,e,n){var i=jZ(r,t,n);return V0(r,t,!1)&&(i=!0),i}function HKe(r,t,e,n){var i=t.getChildren().slice(),a=jZ(r,t,n);if(i.length>2){var o=i[0],s=i[i.length-1];o.get("visible")||(o.show(),V0(r,t,!1,n)&&(a=!0)),s.get("visible")||(s.show(),V0(r,t,!0,n)&&(a=!0))}return a}var WKe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:zKe,reserveFirst:GKe,reserveLast:UKe,reserveBoth:VKe,equidistance:YZ,equidistanceWithReverseBoth:HKe});function jKe(r,t){G(r,function(e){var n=e.attr("x"),i=e.attr("y"),a=Kp({x:n,y:i},t);e.attr("matrix",a)})}function XZ(r,t,e,n){var i=t.getChildren();if(!i.length||!r&&i.length<2)return!1;var a=gD(i),o=!1;if(r)o=!!e&&a>e;else{var s=Math.abs(i[1].attr("x")-i[0].attr("x"));o=a>s}if(o){var l=n(e,a);jKe(i,l)}return o}function YKe(){return qZ}function qZ(r,t,e,n){return XZ(r,t,e,function(){return zt(n)?n:r?sn.verticalAxisRotate:sn.horizontalAxisRotate})}function XKe(r,t,e){return XZ(r,t,e,function(n,i){if(!n)return r?sn.verticalAxisRotate:sn.horizontalAxisRotate;if(r)return-Math.acos(n/i);var a=0;return n>i?a=Math.PI/4:(a=Math.asin(n/i),a>Math.PI/4&&(a=Math.PI/4)),a})}var qKe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:YKe,fixedAngle:qZ,unfixedAngle:XKe}),KZ=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",autoHide:WKe,autoRotate:qKe,autoEllipsis:BKe}),KKe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{type:"line",locationType:"region",start:null,end:null})},t.prototype.getLinePath=function(){var e=this.get("start"),n=this.get("end"),i=[];return i.push(["M",e.x,e.y]),i.push(["L",n.x,n.y]),i},t.prototype.getInnerLayoutBBox=function(){var e=this.get("start"),n=this.get("end"),i=r.prototype.getInnerLayoutBBox.call(this),a=Math.min(e.x,n.x,i.x),o=Math.min(e.y,n.y,i.y),s=Math.max(e.x,n.x,i.maxX),l=Math.max(e.y,n.y,i.maxY);return{x:a,y:o,minX:a,minY:o,maxX:s,maxY:l,width:s-a,height:l-o}},t.prototype.isVertical=function(){var e=this.get("start"),n=this.get("end");return ba(e.x,n.x)},t.prototype.isHorizontal=function(){var e=this.get("start"),n=this.get("end");return ba(e.y,n.y)},t.prototype.getTickPoint=function(e){var n=this,i=n.get("start"),a=n.get("end"),o=a.x-i.x,s=a.y-i.y;return{x:i.x+o*e,y:i.y+s*e}},t.prototype.getSideVector=function(e){var n=this.getAxisVector(),i=Tc([0,0],n),a=this.get("verticalFactor"),o=[i[1],i[0]*-1];return gi([0,0],o,e*a)},t.prototype.getAxisVector=function(){var e=this.get("start"),n=this.get("end");return[n.x-e.x,n.y-e.y]},t.prototype.processOverlap=function(e){var n=this,i=this.isVertical(),a=this.isHorizontal();if(!(!i&&!a)){var o=this.get("label"),s=this.get("title"),l=this.get("verticalLimitLength"),u=o.offset,c=l,f=0,d=0;s&&(f=s.style.fontSize,d=s.spacing),c&&(c=c-u-d-f);var h=this.get("overlapOrder");if(G(h,function(g){o[g]&&n.canProcessOverlap(g)&&n.autoProcessOverlap(g,o[g],e,c)}),s&&nt(s.offset)){var v=e.getCanvasBBox(),p=i?v.width:v.height;s.offset=u+p+d+f/2}}},t.prototype.canProcessOverlap=function(e){var n=this.get("label");return e==="autoRotate"?nt(n.rotate):!0},t.prototype.autoProcessOverlap=function(e,n,i,a){var o=this,s=this.isVertical(),l=!1,u=KZ[e];if(n===!0)this.get("label"),l=u.getDefault()(s,i,a);else if(Kt(n))l=n(s,i,a);else if(an(n)){var c=n;u[c.type]&&(l=u[c.type](s,i,a,c.cfg))}else u[n]&&(l=u[n](s,i,a));if(e==="autoRotate"){if(l){var f=i.getChildren(),d=this.get("verticalFactor");G(f,function(v){var p=v.attr("textAlign");if(p==="center"){var g=d>0?"end":"start";v.attr("textAlign",g)}})}}else if(e==="autoHide"){var h=i.getChildren().slice(0);G(h,function(v){v.get("visible")||(o.get("isRegister")&&o.unregisterElement(v),v.remove())})}},t}(VZ),ZKe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},t.prototype.getLinePath=function(){var e=this.get("center"),n=e.x,i=e.y,a=this.get("radius"),o=a,s=this.get("startAngle"),l=this.get("endAngle"),u=[];if(Math.abs(l-s)===Math.PI*2)u=[["M",n,i-o],["A",a,o,0,1,1,n,i+o],["A",a,o,0,1,1,n,i-o],["Z"]];else{var c=this.getCirclePoint(s),f=this.getCirclePoint(l),d=Math.abs(l-s)>Math.PI?1:0,h=s>l?0:1;u=[["M",n,i],["L",c.x,c.y],["A",a,o,0,d,h,f.x,f.y],["L",n,i]]}return u},t.prototype.getTickPoint=function(e){var n=this.get("startAngle"),i=this.get("endAngle"),a=n+(i-n)*e;return this.getCirclePoint(a)},t.prototype.getSideVector=function(e,n){var i=this.get("center"),a=[n.x-i.x,n.y-i.y],o=this.get("verticalFactor"),s=Iv(a);return gi(a,a,o*e/s),a},t.prototype.getAxisVector=function(e){var n=this.get("center"),i=[e.x-n.x,e.y-n.y];return[i[1],-1*i[0]]},t.prototype.getCirclePoint=function(e,n){var i=this.get("center");return n=n||this.get("radius"),{x:i.x+Math.cos(e)*n,y:i.y+Math.sin(e)*n}},t.prototype.canProcessOverlap=function(e){var n=this.get("label");return e==="autoRotate"?nt(n.rotate):!0},t.prototype.processOverlap=function(e){var n=this,i=this.get("label"),a=this.get("title"),o=this.get("verticalLimitLength"),s=i.offset,l=o,u=0,c=0;a&&(u=a.style.fontSize,c=a.spacing),l&&(l=l-s-c-u);var f=this.get("overlapOrder");if(G(f,function(h){i[h]&&n.canProcessOverlap(h)&&n.autoProcessOverlap(h,i[h],e,l)}),a&&nt(a.offset)){var d=e.getCanvasBBox().height;a.offset=s+d+c+u/2}},t.prototype.autoProcessOverlap=function(e,n,i,a){var o=this,s=!1,l=KZ[e];if(a>0)if(n===!0)s=l.getDefault()(!1,i,a);else if(Kt(n))s=n(!1,i,a);else if(an(n)){var u=n;l[u.type]&&(s=l[u.type](!1,i,a,u.cfg))}else l[n]&&(s=l[n](!1,i,a));if(e==="autoRotate"){if(s){var c=i.getChildren(),f=this.get("verticalFactor");G(c,function(h){var v=h.attr("textAlign");if(v==="center"){var p=f>0?"end":"start";h.attr("textAlign",p)}})}}else if(e==="autoHide"){var d=i.getChildren().slice(0);G(d,function(h){h.get("visible")||(o.get("isRegister")&&o.unregisterElement(h),h.remove())})}},t}(VZ),xD=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:sn.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:sn.textColor,textAlign:"center",textBaseline:"middle",fontFamily:sn.fontFamily}},textBackground:{padding:5,style:{stroke:sn.lineColor}}}})},t.prototype.renderInner=function(e){this.get("line")&&this.renderLine(e),this.get("text")&&(this.renderText(e),this.renderBackground(e))},t.prototype.renderText=function(e){var n=this.get("text"),i=n.style,a=n.autoRotate,o=n.content;if(!nt(o)){var s=this.getTextPoint(),l=null;if(a){var u=this.getRotateAngle();l=Kp(s,u)}this.addShape(e,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:A(A(A({},s),{text:o,matrix:l}),i)})}},t.prototype.renderLine=function(e){var n=this.getLinePath(),i=this.get("line"),a=i.style;this.addShape(e,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:A({path:n},a)})},t.prototype.renderBackground=function(e){var n=this.getElementId("text"),i=e.findById(n),a=this.get("textBackground");if(a&&i){var o=i.getBBox(),s=GC(a.padding),l=a.style,u=this.addShape(e,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:A({x:o.x-s[3],y:o.y-s[0],width:o.width+s[1]+s[3],height:o.height+s[0]+s[2],matrix:i.attr("matrix")},l)});u.toBack()}},t}(io),ZZ=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{type:"line",locationType:"region",start:null,end:null})},t.prototype.getRotateAngle=function(){var e=this.getLocation(),n=e.start,i=e.end,a=this.get("text").position,o=Math.atan2(i.y-n.y,i.x-n.x),s=a==="start"?o-Math.PI/2:o+Math.PI/2;return s},t.prototype.getTextPoint=function(){var e=this.getLocation(),n=e.start,i=e.end,a=this.get("text"),o=a.position,s=a.offset;return GZ(n,i,o,s)},t.prototype.getLinePath=function(){var e=this.getLocation(),n=e.start,i=e.end;return[["M",n.x,n.y],["L",i.x,i.y]]},t}(xD),QKe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},t.prototype.getRotateAngle=function(){var e=this.getLocation(),n=e.startAngle,i=e.endAngle,a=this.get("text").position,o=a==="start"?n+Math.PI/2:i-Math.PI/2;return o},t.prototype.getTextPoint=function(){var e=this.get("text"),n=e.position,i=e.offset,a=this.getLocation(),o=a.center,s=a.radius,l=a.startAngle,u=a.endAngle,c=n==="start"?l:u,f=this.getRotateAngle()-Math.PI,d=Zp(o,s,c),h=Math.cos(f)*i,v=Math.sin(f)*i;return{x:d.x+h,y:d.y+v}},t.prototype.getLinePath=function(){var e=this.getLocation(),n=e.center,i=e.radius,a=e.startAngle,o=e.endAngle,s=null;if(o-a==Math.PI*2){var l=n.x,u=n.y;s=[["M",l,u-i],["A",i,i,0,1,1,l,u+i],["A",i,i,0,1,1,l,u-i],["Z"]]}else{var c=Zp(n,i,a),f=Zp(n,i,o),d=Math.abs(o-a)>Math.PI?1:0,h=a>o?0:1;s=[["M",c.x,c.y],["A",i,i,0,d,h,f.x,f.y]]}return s},t}(xD),H0="g2-crosshair",wD=H0+"-line",SD=H0+"-text",W0,JKe=(W0={},W0[""+H0]={position:"relative"},W0[""+wD]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},W0[""+SD]={position:"absolute",color:sn.textColor,fontFamily:sn.fontFamily},W0),eZe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+H0+'"></div>',crosshairTpl:'<div class="'+wD+'"></div>',textTpl:'<span class="'+SD+'">{content}</span>',domStyles:null,containerClassName:H0,defaultStyles:JKe,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},t.prototype.render=function(){this.resetText(),this.resetPosition()},t.prototype.initCrossHair=function(){var e=this.getContainer(),n=this.get("crosshairTpl"),i=Qn(n);e.appendChild(i),this.applyStyle(wD,i),this.set("crosshairEl",i)},t.prototype.getTextPoint=function(){var e=this.getLocation(),n=e.start,i=e.end,a=this.get("text"),o=a.position,s=a.offset;return GZ(n,i,o,s)},t.prototype.resetText=function(){var e=this.get("text"),n=this.get("textEl");if(e){var i=e.content;if(!n){var a=this.getContainer(),o=dT(this.get("textTpl"),e);n=Qn(o),a.appendChild(n),this.applyStyle(SD,n),this.set("textEl",n)}n.innerHTML=i}else n&&n.remove()},t.prototype.isVertical=function(e,n){return e.x===n.x},t.prototype.resetPosition=function(){var e=this.get("crosshairEl");e||(this.initCrossHair(),e=this.get("crosshairEl"));var n=this.get("start"),i=this.get("end"),a=Math.min(n.x,i.x),o=Math.min(n.y,i.y);this.isVertical(n,i)?Vr(e,{width:"1px",height:Yo(Math.abs(i.y-n.y))}):Vr(e,{height:"1px",width:Yo(Math.abs(i.x-n.x))}),Vr(e,{top:Yo(o),left:Yo(a)}),this.alignText()},t.prototype.alignText=function(){var e=this.get("textEl");if(e){var n=this.get("text").align,i=e.clientWidth,a=this.getTextPoint();switch(n){case"center":a.x=a.x-i/2;break;case"right":a.x=a.x-i}Vr(e,{top:Yo(a.y),left:Yo(a.x)})}},t.prototype.updateInner=function(e){Il(e,"text")&&this.resetText(),r.prototype.updateInner.call(this,e)},t}(mD),QZ=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Line:ZZ,Circle:QKe,Base:xD,Html:eZe}),JZ=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:sn.lineColor}}}})},t.prototype.getLineType=function(){var e=this.get("line")||this.get("defaultCfg").line;return e.type},t.prototype.renderInner=function(e){this.drawGrid(e)},t.prototype.getAlternatePath=function(e,n){var i=this.getGridPath(e),a=n.slice(0).reverse(),o=this.getGridPath(a,!0),s=this.get("closed");return s?i=i.concat(o):(o[0][0]="L",i=i.concat(o),i.push(["Z"])),i},t.prototype.getPathStyle=function(){return this.get("line").style},t.prototype.drawGrid=function(e){var n=this,i=this.get("line"),a=this.get("items"),o=this.get("alternateColor"),s=null;G(a,function(l,u){var c=l.id||u;if(i){var f=n.getPathStyle();f=Kt(f)?f(l,u,a):f;var d=n.getElementId("line-"+c),h=n.getGridPath(l.points);n.addShape(e,{type:"path",name:"grid-line",id:d,attrs:jt({path:h},f)})}if(o&&u>0){var v=n.getElementId("region-"+c),p=u%2==0;if(ot(o))p&&n.drawAlternateRegion(v,e,s.points,l.points,o);else{var g=p?o[1]:o[0];n.drawAlternateRegion(v,e,s.points,l.points,g)}}s=l})},t.prototype.drawAlternateRegion=function(e,n,i,a,o){var s=this.getAlternatePath(i,a);this.addShape(n,{type:"path",id:e,name:"grid-region",attrs:{path:s,fill:o}})},t}(io);function tZe(r,t,e,n){var i=e-r,a=n-t;return Math.sqrt(i*i+a*a)}var rZe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{type:"circle",center:null,closed:!0})},t.prototype.getGridPath=function(e,n){var i=this.getLineType(),a=this.get("closed"),o=[];if(e.length)if(i==="circle"){var s=this.get("center"),l=e[0],u=tZe(s.x,s.y,l.x,l.y),c=n?0:1;a?(o.push(["M",s.x,s.y-u]),o.push(["A",u,u,0,0,c,s.x,s.y+u]),o.push(["A",u,u,0,0,c,s.x,s.y-u]),o.push(["Z"])):G(e,function(f,d){d===0?o.push(["M",f.x,f.y]):o.push(["A",u,u,0,0,c,f.x,f.y])})}else G(e,function(f,d){d===0?o.push(["M",f.x,f.y]):o.push(["L",f.x,f.y])}),a&&o.push(["Z"]);return o},t}(JZ),nZe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{type:"line"})},t.prototype.getGridPath=function(e){var n=[];return G(e,function(i,a){a===0?n.push(["M",i.x,i.y]):n.push(["L",i.x,i.y])}),n},t}(JZ),eQ=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},t.prototype.getLayoutBBox=function(){var e=r.prototype.getLayoutBBox.call(this),n=this.get("maxWidth"),i=this.get("maxHeight"),a=e.width,o=e.height;return n&&(a=Math.min(a,n)),i&&(o=Math.min(o,i)),UC(e.minX,e.minY,a,o)},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetLocation()},t.prototype.resetLocation=function(){var e=this.get("x"),n=this.get("y"),i=this.get("offsetX"),a=this.get("offsetY");this.moveElementTo(this.get("group"),{x:e+i,y:n+a})},t.prototype.applyOffset=function(){this.resetLocation()},t.prototype.getDrawPoint=function(){return this.get("currentPoint")},t.prototype.setDrawPoint=function(e){return this.set("currentPoint",e)},t.prototype.renderInner=function(e){this.resetDraw(),this.get("title")&&this.drawTitle(e),this.drawLegendContent(e),this.get("background")&&this.drawBackground(e)},t.prototype.drawBackground=function(e){var n=this.get("background"),i=e.getBBox(),a=GC(n.padding),o=A({x:0,y:0,width:i.width+a[1]+a[3],height:i.height+a[0]+a[2]},n.style),s=this.addShape(e,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:o});s.toBack()},t.prototype.drawTitle=function(e){var n=this.get("currentPoint"),i=this.get("title"),a=i.spacing,o=i.style,s=i.text,l=this.addShape(e,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:A({text:s,x:n.x,y:n.y},o)}),u=l.getBBox();this.set("currentPoint",{x:n.x,y:u.maxY+a})},t.prototype.resetDraw=function(){var e=this.get("background"),n={x:0,y:0};if(e){var i=GC(e.padding);n.x=i[3],n.y=i[0]}this.set("currentPoint",n)},t}(io),CD={marker:{style:{inactiveFill:"#000",inactiveOpacity:.45,fill:"#000",opacity:1,size:12}},text:{style:{fill:"#ccc",fontSize:12}}},WC={fill:sn.textColor,fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:sn.fontFamily,fontWeight:"normal",lineHeight:12},iZe=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.currentPageIndex=1,e.totalPagesCnt=1,e.pageWidth=0,e.pageHeight=0,e.startX=0,e.startY=0,e.onNavigationBack=function(){var n=e.getElementByLocalId("item-group");if(e.currentPageIndex>1){e.currentPageIndex-=1,e.updateNavigation();var i=e.getCurrentNavigationMatrix();e.get("animate")?n.animate({matrix:i},100):n.attr({matrix:i})}},e.onNavigationAfter=function(){var n=e.getElementByLocalId("item-group");if(e.currentPageIndex<e.totalPagesCnt){e.currentPageIndex+=1,e.updateNavigation();var i=e.getCurrentNavigationMatrix();e.get("animate")?n.animate({matrix:i},100):n.attr({matrix:i})}},e}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:sn.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:sn.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},pageNavigator:CD,itemName:{spacing:16,style:WC},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:WC},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:sn.uncheckedColor},markerStyle:{fill:sn.uncheckedColor,stroke:sn.uncheckedColor}},inactive:{nameStyle:{fill:sn.uncheckedColor},markerStyle:{opacity:.2}}}}})},t.prototype.isList=function(){return!0},t.prototype.getItems=function(){return this.get("items")},t.prototype.setItems=function(e){this.update({items:e})},t.prototype.updateItem=function(e,n){jt(e,n),this.clear(),this.render()},t.prototype.clearItems=function(){var e=this.getElementByLocalId("item-group");e&&e.clear()},t.prototype.setItemState=function(e,n,i){e[n]=i;var a=this.getElementByLocalId("item-"+e.id);if(a){var o=this.getItems(),s=o.indexOf(e),l=this.createOffScreenGroup(),u=this.drawItem(e,s,this.getItemHeight(),l);this.updateElements(u,a),this.clearUpdateStatus(a)}},t.prototype.hasState=function(e,n){return!!e[n]},t.prototype.getItemStates=function(e){var n=this.get("itemStates"),i=[];return G(n,function(a,o){e[o]&&i.push(o)}),i},t.prototype.clearItemsState=function(e){var n=this,i=this.getItemsByState(e);G(i,function(a){n.setItemState(a,e,!1)})},t.prototype.getItemsByState=function(e){var n=this,i=this.getItems();return ya(i,function(a){return n.hasState(a,e)})},t.prototype.drawLegendContent=function(e){this.processItems(),this.drawItems(e)},t.prototype.processItems=function(){var e=this.get("items");G(e,function(n){n.id||(n.id=n.name)})},t.prototype.drawItems=function(e){var n=this,i=this.addGroup(e,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),a=this.addGroup(i,{id:this.getElementId("item-group"),name:"legend-item-group"}),o=this.getItemHeight(),s=this.get("itemWidth"),l=this.get("itemSpacing"),u=this.get("itemMarginBottom"),c=this.get("currentPoint"),f=c.x,d=c.y,h=this.get("layout"),v=this.get("items"),p=!1,g=0,m=this.get("maxWidth"),y=this.get("maxHeight");G(v,function(b,x){var w=n.drawItem(b,x,o,a),S=w.getBBox(),C=s||S.width;C>g&&(g=C),h==="horizontal"?(m&&m<c.x+C-f&&(p=!0,c.x=f,c.y+=o+u),n.moveElementTo(w,c),c.x+=C+l):(y&&y<c.y+o+u-d&&(p=!0,c.x+=g+l,c.y=d,g=0),n.moveElementTo(w,c),c.y+=o+u)}),p&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=f,this.startY=d,this.adjustNavigation(e,a))},t.prototype.getItemHeight=function(){var e=this.get("itemHeight");if(!e){var n=(this.get("itemName")||{}).style;if(Kt(n)){var i=this.getItems();i.forEach(function(a,o){var s=A(A({},WC),n(a,o,i)).fontSize;e<s&&(e=s)})}else n&&(e=n.fontSize)}return e},t.prototype.drawMarker=function(e,n,i,a){var o=A(A(A({x:0,y:a/2},n.style),{symbol:ae(i.marker,"symbol","circle")}),ae(i.marker,"style",{})),s=this.addShape(e,{type:"marker",id:this.getElementId("item-"+i.id+"-marker"),name:"legend-item-marker",attrs:o}),l=s.getBBox();s.attr("x",l.width/2);var u=s.attr(),c=u.stroke,f=u.fill;return c&&s.set("isStroke",!0),f&&s.set("isFill",!0),s},t.prototype.drawItemText=function(e,n,i,a,o,s,l){var u=i.formatter,c=i.style,f=A(A({x:s,y:o/2,text:u?u(a[n],a,l):a[n]},WC),Kt(c)?c(a,l,this.getItems()):c);return this.addShape(e,{type:"text",id:this.getElementId("item-"+a.id+"-"+n),name:"legend-item-"+n,attrs:f})},t.prototype.drawItem=function(e,n,i,a){var o="item-"+e.id,s=this.addGroup(a,{name:"legend-item-container",id:this.getElementId("item-container-"+o),delegateObject:{item:e,index:n}}),l=this.addGroup(s,{name:"legend-item",id:this.getElementId(o),delegateObject:{item:e,index:n}}),u=this.get("marker"),c=this.get("itemName"),f=this.get("itemValue"),d=this.get("itemBackground"),h=this.getLimitItemWidth(),v=0;if(u){var p=this.drawMarker(l,u,e,i),g=u.spacing,m=ae(e,["marker","spacing"]);zt(m)&&(g=m),v=p.getBBox().maxX+g}if(c){var y=this.drawItemText(l,"name",c,e,i,v,n);h&&G0(!0,y,ei(h-v,0,h)),v=y.getBBox().maxX+c.spacing}if(f){var b=this.drawItemText(l,"value",f,e,i,v,n);h&&(f.alignRight?(b.attr({textAlign:"right",x:h}),G0(!0,b,ei(h-v,0,h),"head")):G0(!0,b,ei(h-v,0,h)))}if(d){var x=l.getBBox(),w=this.addShape(l,{type:"rect",name:"legend-item-background",id:this.getElementId(o+"-background"),attrs:A({x:0,y:0,width:x.width,height:i},d.style)});w.toBack()}return this.applyItemStates(e,l),l},t.prototype.adjustNavigation=function(e,n){var i=this,a=this.startX,o=this.startY,s=this.get("layout"),l=n.findAll(function(E){return E.get("name")==="legend-item"}),u=this.get("maxWidth"),c=this.get("maxHeight"),f=this.get("itemWidth"),d=this.get("itemSpacing"),h=this.getItemHeight(),v=Dt({},CD,this.get("pageNavigator")),p=this.drawNavigation(e,s,"00/00",v),g=p.getBBox(),m={x:a,y:o},y=1,b=0,x=0,w=0,S=this.get("itemMarginBottom");if(s==="horizontal"){var C=this.get("maxRow")||1,_=h+(C===1?0:S);this.pageHeight=_*C,G(l,function(E){var k=E.getBBox(),I=f||k.width;(b&&b<m.x+I+d||u<m.x+I+d+g.width)&&(y===1&&(b=m.x+d,i.pageWidth=b,i.moveElementTo(p,{x:u-d-g.width-g.minX,y:m.y+h/2-g.height/2-g.minY})),y+=1,m.x=a,m.y+=_),i.moveElementTo(E,m),E.getParent().setClip({type:"rect",attrs:{x:m.x,y:m.y,width:I+d,height:h}}),m.x+=I+d})}else{G(l,function(E){var k=E.getBBox();k.width>x&&(x=k.width)}),w=x,x+=d,u&&(x=Math.min(u,x),w=Math.min(u,w)),this.pageWidth=x,this.pageHeight=c-Math.max(g.height,h+S);var T=Math.floor(this.pageHeight/(h+S));G(l,function(E,k){k!==0&&k%T==0&&(y+=1,m.x+=x,m.y=o),i.moveElementTo(E,m),E.getParent().setClip({type:"rect",attrs:{x:m.x,y:m.y,width:x,height:h}}),m.y+=h+S}),this.totalPagesCnt=y,this.moveElementTo(p,{x:a+w/2-g.width/2-g.minX,y:c-g.height-g.minY})}this.pageHeight&&this.pageWidth&&n.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),s==="horizontal"&&this.get("maxRow")?this.totalPagesCnt=Math.ceil(y/this.get("maxRow")):this.totalPagesCnt=y,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(p),n.attr("matrix",this.getCurrentNavigationMatrix())},t.prototype.drawNavigation=function(e,n,i,a){var o={x:0,y:0},s=this.addGroup(e,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),l=ae(a.marker,"style",{}),u=l.size,c=u===void 0?12:u,f=Ur(l,["size"]),d=this.drawArrow(s,o,"navigation-arrow-left",n==="horizontal"?"up":"left",c,f);d.on("click",this.onNavigationBack);var h=d.getBBox();o.x+=h.width+2;var v=this.addShape(s,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:A({x:o.x,y:o.y+c/2,text:i,textBaseline:"middle"},ae(a.text,"style"))}),p=v.getBBox();o.x+=p.width+2;var g=this.drawArrow(s,o,"navigation-arrow-right",n==="horizontal"?"down":"right",c,f);return g.on("click",this.onNavigationAfter),s},t.prototype.updateNavigation=function(e){var n=Dt({},CD,this.get("pageNavigator")),i=n.marker.style,a=i.fill,o=i.opacity,s=i.inactiveFill,l=i.inactiveOpacity,u=this.currentPageIndex+"/"+this.totalPagesCnt,c=e?e.getChildren()[1]:this.getElementByLocalId("navigation-text"),f=e?e.findById(this.getElementId("navigation-arrow-left")):this.getElementByLocalId("navigation-arrow-left"),d=e?e.findById(this.getElementId("navigation-arrow-right")):this.getElementByLocalId("navigation-arrow-right"),h=c.getBBox();c.attr("text",u);var v=c.getBBox();c.attr("x",c.attr("x")-(v.width-h.width)/2),f.attr("opacity",this.currentPageIndex===1?l:o),f.attr("fill",this.currentPageIndex===1?s:a),f.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),d.attr("opacity",this.currentPageIndex===this.totalPagesCnt?l:o),d.attr("fill",this.currentPageIndex===this.totalPagesCnt?s:a),d.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer")},t.prototype.drawArrow=function(e,n,i,a,o,s){var l=n.x,u=n.y,c={right:90*Math.PI/180,left:(360-90)*Math.PI/180,up:0,down:180*Math.PI/180},f=this.addShape(e,{type:"path",id:this.getElementId(i),name:i,attrs:A({path:[["M",l+o/2,u],["L",l,u+o],["L",l+o,u+o],["Z"]],cursor:"pointer"},s)});return f.attr("matrix",Kp({x:l+o/2,y:u+o/2},c[a])),f},t.prototype.getCurrentNavigationMatrix=function(){var e=this,n=e.currentPageIndex,i=e.pageWidth,a=e.pageHeight,o=this.get("layout"),s=o==="horizontal"?{x:0,y:a*(1-n)}:{x:i*(1-n),y:0};return hD(s)},t.prototype.applyItemStates=function(e,n){var i=this.getItemStates(e),a=i.length>0;if(a){var o=n.getChildren(),s=this.get("itemStates");G(o,function(l){var u=l.get("name"),c=u.split("-")[2],f=U0(e,c,s);f&&(l.attr(f),c==="marker"&&!(l.get("isStroke")&&l.get("isFill"))&&(l.get("isStroke")&&l.attr("fill",null),l.get("isFill")&&l.attr("stroke",null)))})}},t.prototype.getLimitItemWidth=function(){var e=this.get("itemWidth"),n=this.get("maxItemWidth");return n?e&&(n=e<=n?e:n):e&&(n=e),n},t}(eQ),aZe=1.4,tQ=.4,oZe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:sn.textColor,textBaseline:"middle",fontFamily:sn.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:sn.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},t.prototype.isSlider=function(){return!0},t.prototype.getValue=function(){return this.getCurrentValue()},t.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},t.prototype.setRange=function(e,n){this.update({min:e,max:n})},t.prototype.setValue=function(e){var n=this.getValue();this.set("value",e);var i=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(i),this.delegateEmit("valuechanged",{originValue:n,value:e})},t.prototype.initEvent=function(){var e=this.get("group");this.bindSliderEvent(e),this.bindRailEvent(e),this.bindTrackEvent(e)},t.prototype.drawLegendContent=function(e){this.drawRail(e),this.drawLabels(e),this.fixedElements(e),this.resetTrack(e),this.resetTrackClip(e),this.get("slidable")&&this.resetHandlers(e)},t.prototype.bindSliderEvent=function(e){this.bindHandlersEvent(e)},t.prototype.bindHandlersEvent=function(e){var n=this;e.on("legend-handler-min:drag",function(i){var a=n.getValueByCanvasPoint(i.x,i.y),o=n.getCurrentValue(),s=o[1];s<a&&(s=a),n.setValue([a,s])}),e.on("legend-handler-max:drag",function(i){var a=n.getValueByCanvasPoint(i.x,i.y),o=n.getCurrentValue(),s=o[0];s>a&&(s=a),n.setValue([s,a])})},t.prototype.bindRailEvent=function(e){},t.prototype.bindTrackEvent=function(e){var n=this,i=null;e.on("legend-track:dragstart",function(a){i={x:a.x,y:a.y}}),e.on("legend-track:drag",function(a){if(!!i){var o=n.getValueByCanvasPoint(i.x,i.y),s=n.getValueByCanvasPoint(a.x,a.y),l=n.getCurrentValue(),u=l[1]-l[0],c=n.getRange(),f=s-o;f<0?l[0]+f>c.min?n.setValue([l[0]+f,l[1]+f]):n.setValue([c.min,c.min+u]):f>0&&(f>0&&l[1]+f<c.max?n.setValue([l[0]+f,l[1]+f]):n.setValue([c.max-u,c.max])),i={x:a.x,y:a.y}}}),e.on("legend-track:dragend",function(a){i=null})},t.prototype.drawLabels=function(e){this.drawLabel("min",e),this.drawLabel("max",e)},t.prototype.drawLabel=function(e,n){var i=this.get("label"),a=i.style,o=i.align,s=i.formatter,l=this.get(e),u=this.getLabelAlignAttrs(e,o),c="label-"+e;this.addShape(n,{type:"text",id:this.getElementId(c),name:"legend-label-"+e,attrs:A(A({x:0,y:0,text:Kt(s)?s(l):l},a),u)})},t.prototype.getLabelAlignAttrs=function(e,n){var i=this.isVertical(),a="center",o="middle";return i?(a="start",n!=="rail"?e==="min"?o="top":o="bottom":o="top"):n!=="rail"?(o="top",e==="min"?a="start":a="end"):(a="start",o="middle"),{textAlign:a,textBaseline:o}},t.prototype.getRailPath=function(e,n,i,a){var o=this.get("rail"),s=o.size,l=o.defaultLength,u=o.type,c=this.isVertical(),f=l,d=i,h=a;d||(d=c?s:f),h||(h=c?f:s);var v=[];return u==="color"?(v.push(["M",e,n]),v.push(["L",e+d,n]),v.push(["L",e+d,n+h]),v.push(["L",e,n+h]),v.push(["Z"])):(v.push(["M",e+d,n]),v.push(["L",e+d,n+h]),v.push(["L",e,n+h]),v.push(["Z"])),v},t.prototype.drawRail=function(e){var n=this.get("rail"),i=n.style;this.addShape(e,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:A({path:this.getRailPath(0,0)},i)})},t.prototype.getTrackColor=function(e){var n=e.length;if(!n)return null;if(n===1)return e[0];var i;this.isVertical()?i="l(90)":i="l(0)";for(var a=0;a<n;a++){var o=a/(n-1);i+=" "+o+":"+e[a]}return i},t.prototype.getTrackPath=function(e){var n=this.getRailShape(e),i=n.attr("path");return Or(i)},t.prototype.getClipTrackAttrs=function(e){var n=this.getCurrentValue(),i=n[0],a=n[1],o=this.getRailBBox(e),s=this.getPointByValue(i,e),l=this.getPointByValue(a,e),u=this.isVertical(),c,f,d,h;return u?(c=o.minX,f=s.y,d=o.width,h=l.y-s.y):(c=s.x,f=o.minY,d=l.x-s.x,h=o.height),{x:c,y:f,width:d,height:h}},t.prototype.getTrackAttrs=function(e){var n=this.get("track"),i=this.get("colors"),a=this.getTrackPath(e);return jt({path:a,fill:this.getTrackColor(i)},n.style)},t.prototype.resetTrackClip=function(e){var n=e||this.get("group"),i=this.getElementId("track"),a=n.findById(i),o=a.getClip(),s=this.getClipTrackAttrs(e);o?o.attr(s):a.setClip({type:"rect",attrs:s})},t.prototype.resetTrack=function(e){var n=this.getElementId("track"),i=e.findById(n),a=this.getTrackAttrs(e);i?i.attr(a):this.addShape(e,{type:"path",id:n,draggable:this.get("slidable"),name:"legend-track",attrs:a})},t.prototype.getPointByValue=function(e,n){var i=this.getRange(),a=i.min,o=i.max,s=(e-a)/(o-a),l=this.getRailBBox(n),u=this.isVertical(),c={x:0,y:0};return u?(c.x=l.minX+l.width/2,c.y=mh(l.minY,l.maxY,s)):(c.x=mh(l.minX,l.maxX,s),c.y=l.minY+l.height/2),c},t.prototype.getRailShape=function(e){var n=e||this.get("group");return n.findById(this.getElementId("rail"))},t.prototype.getRailBBox=function(e){var n=this.getRailShape(e),i=n.getBBox();return i},t.prototype.getRailCanvasBBox=function(){var e=this.get("group"),n=e.findById(this.getElementId("rail")),i=n.getCanvasBBox();return i},t.prototype.isVertical=function(){return this.get("layout")==="vertical"},t.prototype.getValueByCanvasPoint=function(e,n){var i=this.getRange(),a=i.min,o=i.max,s=this.getRailCanvasBBox(),l=this.isVertical(),u=this.get("step"),c;l?c=(n-s.minY)/s.height:c=(e-s.minX)/s.width;var f=mh(a,o,c);if(u){var d=Math.round((f-a)/u);f=a+d*u}return f>o&&(f=o),f<a&&(f=a),f},t.prototype.getCurrentValue=function(){var e=this.get("value");if(!e){var n=this.get("values");return n?[Math.max(Math.min.apply(Math,Yn(n,[this.get("max")])),this.get("min")),Math.min(Math.max.apply(Math,Yn(n,[this.get("min")])),this.get("max"))]:[this.get("min"),this.get("max")]}return e},t.prototype.resetHandlers=function(e){var n=this.getCurrentValue(),i=n[0],a=n[1];this.resetHandler(e,"min",i),this.resetHandler(e,"max",a)},t.prototype.getHandlerPath=function(e,n){var i=this.isVertical(),a=[],o=e.size,s=n.x,l=n.y,u=o*aZe,c=o/2,f=o/6;if(i){var d=s+u*tQ;a.push(["M",s,l]),a.push(["L",d,l+c]),a.push(["L",s+u,l+c]),a.push(["L",s+u,l-c]),a.push(["L",d,l-c]),a.push(["Z"]),a.push(["M",d,l+f]),a.push(["L",s+u-2,l+f]),a.push(["M",d,l-f]),a.push(["L",s+u-2,l-f])}else{var h=l+u*tQ;a.push(["M",s,l]),a.push(["L",s-c,h]),a.push(["L",s-c,l+u]),a.push(["L",s+c,l+u]),a.push(["L",s+c,h]),a.push(["Z"]),a.push(["M",s-f,h]),a.push(["L",s-f,l+u-2]),a.push(["M",s+f,h]),a.push(["L",s+f,l+u-2])}return a},t.prototype.resetHandler=function(e,n,i){var a=this.getPointByValue(i,e),o=this.get("handler"),s=this.getHandlerPath(o,a),l=this.getElementId("handler-"+n),u=e.findById(l),c=this.isVertical();u?u.attr("path",s):this.addShape(e,{type:"path",name:"legend-handler-"+n,draggable:!0,id:l,attrs:A(A({path:s},o.style),{cursor:c?"ns-resize":"ew-resize"})})},t.prototype.fixedElements=function(e){var n=e.findById(this.getElementId("rail")),i=e.findById(this.getElementId("label-min")),a=e.findById(this.getElementId("label-max")),o=this.getDrawPoint();this.isVertical()?this.fixedVertail(i,a,n,o):this.fixedHorizontal(i,a,n,o)},t.prototype.fitRailLength=function(e,n,i,a){var o=this.isVertical(),s=o?"height":"width",l=this.get("label"),u=l.align,c=l.spacing,f=this.get("max"+ls(s));if(f){var d=u==="rail"?i[s]+e[s]+n[s]+c*2:i[s],h=d-f;h>0&&this.changeRailLength(a,s,i[s]-h)}},t.prototype.changeRailLength=function(e,n,i){var a=e.getBBox(),o;n==="height"?o=this.getRailPath(a.x,a.y,a.width,i):o=this.getRailPath(a.x,a.y,i,a.height),e.attr("path",o)},t.prototype.changeRailPosition=function(e,n,i){var a=e.getBBox(),o=this.getRailPath(n,i,a.width,a.height);e.attr("path",o)},t.prototype.fixedHorizontal=function(e,n,i,a){var o=this.get("label"),s=o.align,l=o.spacing,u=i.getBBox(),c=e.getBBox(),f=n.getBBox(),d=u.height;this.fitRailLength(c,f,u,i),u=i.getBBox(),s==="rail"?(e.attr({x:a.x,y:a.y+d/2}),this.changeRailPosition(i,a.x+c.width+l,a.y),n.attr({x:a.x+c.width+u.width+l*2,y:a.y+d/2})):s==="top"?(e.attr({x:a.x,y:a.y}),n.attr({x:a.x+u.width,y:a.y}),this.changeRailPosition(i,a.x,a.y+c.height+l)):(this.changeRailPosition(i,a.x,a.y),e.attr({x:a.x,y:a.y+u.height+l}),n.attr({x:a.x+u.width,y:a.y+u.height+l}))},t.prototype.fixedVertail=function(e,n,i,a){var o=this.get("label"),s=o.align,l=o.spacing,u=i.getBBox(),c=e.getBBox(),f=n.getBBox();if(this.fitRailLength(c,f,u,i),u=i.getBBox(),s==="rail")e.attr({x:a.x,y:a.y}),this.changeRailPosition(i,a.x,a.y+c.height+l),n.attr({x:a.x,y:a.y+c.height+u.height+l*2});else if(s==="right")e.attr({x:a.x+u.width+l,y:a.y}),this.changeRailPosition(i,a.x,a.y),n.attr({x:a.x+u.width+l,y:a.y+u.height});else{var d=Math.max(c.width,f.width);e.attr({x:a.x,y:a.y}),this.changeRailPosition(i,a.x+d+l,a.y),n.attr({x:a.x,y:a.y+u.height})}},t}(eQ),Qp="g2-tooltip",Jp="g2-tooltip-title",j0="g2-tooltip-list",jC="g2-tooltip-list-item",YC="g2-tooltip-marker",XC="g2-tooltip-value",rQ="g2-tooltip-name",ED="g2-tooltip-crosshair-x",_D="g2-tooltip-crosshair-y",sZe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",CONTAINER_CLASS:Qp,TITLE_CLASS:Jp,LIST_CLASS:j0,LIST_ITEM_CLASS:jC,MARKER_CLASS:YC,VALUE_CLASS:XC,NAME_CLASS:rQ,CROSSHAIR_X:ED,CROSSHAIR_Y:_D}),iu,lZe=(iu={},iu[""+Qp]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:sn.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},iu[""+Jp]={marginBottom:"4px"},iu[""+j0]={margin:"0px",listStyleType:"none",padding:"0px"},iu[""+jC]={listStyleType:"none",marginBottom:"4px"},iu[""+YC]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},iu[""+XC]={display:"inline-block",float:"right",marginLeft:"30px"},iu[""+ED]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},iu[""+_D]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},iu);function uZe(r,t,e,n,i){var a={left:r<i.x,right:r+e>i.x+i.width,top:t<i.y,bottom:t+n>i.y+i.height};return a}function cZe(r,t,e,n,i,a){var o=r,s=t;switch(a){case"left":o=r-n-e,s=t-i/2;break;case"right":o=r+e,s=t-i/2;break;case"top":o=r-n/2,s=t-i-e;break;case"bottom":o=r-n/2,s=t+e;break;default:o=r+e,s=t-i-e;break}return{x:o,y:s}}function fZe(r,t,e,n,i,a,o){var s=cZe(r,t,e,n,i,a);if(o){var l=uZe(s.x,s.y,n,i,o);a==="auto"?(l.right&&(s.x=Math.max(0,r-n-e)),l.top&&(s.y=Math.max(0,t-i-e))):a==="top"||a==="bottom"?(l.left&&(s.x=o.x),l.right&&(s.x=o.x+o.width-n),a==="top"&&l.top&&(s.y=t+e),a==="bottom"&&l.bottom&&(s.y=t-i-e)):(l.top&&(s.y=o.y),l.bottom&&(s.y=o.y+o.height-i),a==="left"&&l.left&&(s.x=r+e),a==="right"&&l.right&&(s.x=r-n-e))}return s}function dZe(r,t){var e=!1;return G(t,function(n){if(Il(r,n))return e=!0,!1}),e}var hZe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+Qp+'"><div class="'+Jp+'"></div><ul class="'+j0+'"></ul></div>',itemTpl:'<li class="'+jC+`" data-index={index}>
          <span class="`+YC+`" style="background:{color}"></span>
          <span class="`+rQ+`">{name}</span>:
          <span class="`+XC+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+ED+'"></div>',yCrosshairTpl:'<div class="'+_D+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:Qp,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:lZe})},t.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},t.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},t.prototype.show=function(){var e=this.getContainer();!e||this.destroyed||(this.set("visible",!0),Vr(e,{visibility:"visible"}),this.setCrossHairsVisible(!0))},t.prototype.hide=function(){var e=this.getContainer();!e||this.destroyed||(this.set("visible",!1),Vr(e,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},t.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetPosition()},t.prototype.setCrossHairsVisible=function(e){var n=e?"":"none",i=this.get("xCrosshairDom"),a=this.get("yCrosshairDom");i&&Vr(i,{display:n}),a&&Vr(a,{display:n})},t.prototype.initContainer=function(){if(r.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var e=this.getHtmlContentNode();this.get("parent").appendChild(e),this.set("container",e),this.resetStyles(),this.applyStyles()}},t.prototype.updateInner=function(e){this.get("customContent")?this.renderCustomContent():(dZe(e,["title","showTitle"])&&this.resetTitle(),Il(e,"items")&&this.renderItems()),r.prototype.updateInner.call(this,e)},t.prototype.initDom=function(){this.cacheDoms()},t.prototype.removeDom=function(){r.prototype.removeDom.call(this),this.clearCrosshairs()},t.prototype.resetPosition=function(){var e=this.get("x"),n=this.get("y"),i=this.get("offset"),a=this.getOffset(),o=a.offsetX,s=a.offsetY,l=this.get("position"),u=this.get("region"),c=this.getContainer(),f=this.getBBox(),d=f.width,h=f.height,v;u&&(v=z0(u));var p=fZe(e,n,i,d,h,l,v);Vr(c,{left:Yo(p.x+o),top:Yo(p.y+s)}),this.resetCrosshairs()},t.prototype.renderCustomContent=function(){var e=this.getHtmlContentNode(),n=this.get("parent"),i=this.get("container");i&&i.parentNode===n?n.replaceChild(e,i):n.appendChild(e),this.set("container",e),this.resetStyles(),this.applyStyles()},t.prototype.getHtmlContentNode=function(){var e,n=this.get("customContent");if(n){var i=n(this.get("title"),this.get("items"));vT(i)?e=i:e=Qn(i)}return e},t.prototype.cacheDoms=function(){var e=this.getContainer(),n=e.getElementsByClassName(Jp)[0],i=e.getElementsByClassName(j0)[0];this.set("titleDom",n),this.set("listDom",i)},t.prototype.resetTitle=function(){var e=this.get("title"),n=this.get("showTitle");n&&e?this.setTitle(e):this.setTitle("")},t.prototype.setTitle=function(e){var n=this.get("titleDom");n&&(n.innerText=e)},t.prototype.resetCrosshairs=function(){var e=this.get("crosshairsRegion"),n=this.get("crosshairs");if(!e||!n)this.clearCrosshairs();else{var i=z0(e),a=this.get("xCrosshairDom"),o=this.get("yCrosshairDom");n==="x"?(this.resetCrosshair("x",i),o&&(o.remove(),this.set("yCrosshairDom",null))):n==="y"?(this.resetCrosshair("y",i),a&&(a.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",i),this.resetCrosshair("y",i)),this.setCrossHairsVisible(this.get("visible"))}},t.prototype.resetCrosshair=function(e,n){var i=this.checkCrosshair(e),a=this.get(e);e==="x"?Vr(i,{left:Yo(a),top:Yo(n.y),height:Yo(n.height)}):Vr(i,{top:Yo(a),left:Yo(n.x),width:Yo(n.width)})},t.prototype.checkCrosshair=function(e){var n=e+"CrosshairDom",i=e+"CrosshairTpl",a="CROSSHAIR_"+e.toUpperCase(),o=sZe[a],s=this.get(n),l=this.get("parent");return s||(s=Qn(this.get(i)),this.applyStyle(o,s),l.appendChild(s),this.set(n,s)),s},t.prototype.renderItems=function(){this.clearItemDoms();var e=this.get("items"),n=this.get("itemTpl"),i=this.get("listDom");i&&(G(e,function(a){var o=gf.toCSSGradient(a.color),s=A(A({},a),{color:o}),l=dT(n,s),u=Qn(l);i.appendChild(u)}),this.applyChildrenStyles(i,this.get("domStyles")))},t.prototype.clearItemDoms=function(){this.get("listDom")&&vD(this.get("listDom"))},t.prototype.clearCrosshairs=function(){var e=this.get("xCrosshairDom"),n=this.get("yCrosshairDom");e&&e.remove(),n&&n.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},t}(mD),vZe={opacity:0},pZe={stroke:"#C5C5C5",strokeOpacity:.85},gZe={fill:"#CACED4",opacity:.85};function mZe(r){return Kn(r,function(t,e){var n=e===0?"M":"L",i=t[0],a=t[1];return[n,i,a]})}function nQ(r){return mZe(r)}function yZe(r){if(r.length<=2)return nQ(r);var t=[];G(r,function(o){ci(o,t.slice(t.length-2))||t.push(o[0],o[1])});var e=CA(t,!1),n=Eo(r),i=n[0],a=n[1];return e.unshift(["M",i,a]),e}function bZe(r,t,e,n){n===void 0&&(n=!0);var i=new Yd({values:r}),a=new bp({values:Kn(r,function(s,l){return l})}),o=Kn(r,function(s,l){return[a.scale(l)*t,e-i.scale(s)*e]});return n?yZe(o):nQ(o)}function xZe(r,t){var e=new Yd({values:r}),n=Math.max(0,e.min);return t-e.scale(n)*t}function wZe(r,t,e,n){var i=Yn(r),a=xZe(n,e);return i.push(["L",t,a]),i.push(["L",0,a]),i.push(["Z"]),i}var SZe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:vZe,lineStyle:pZe,areaStyle:gZe})},t.prototype.renderInner=function(e){var n=this.cfg,i=n.width,a=n.height,o=n.data,s=n.smooth,l=n.isArea,u=n.backgroundStyle,c=n.lineStyle,f=n.areaStyle;this.addShape(e,{id:this.getElementId("background"),type:"rect",attrs:A({x:0,y:0,width:i,height:a},u)});var d=bZe(o,i,a,s);if(this.addShape(e,{id:this.getElementId("line"),type:"path",attrs:A({path:d},c)}),l){var h=wZe(d,i,a,o);this.addShape(e,{id:this.getElementId("area"),type:"path",attrs:A({path:h},f)})}},t.prototype.applyOffset=function(){var e=this.cfg,n=e.x,i=e.y;this.moveElementTo(this.get("group"),{x:n,y:i})},t}(io),iQ={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},aQ=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"handler",x:0,y:0,width:10,height:24,style:iQ})},t.prototype.renderInner=function(e){var n=this.cfg,i=n.width,a=n.height,o=n.style,s=o.fill,l=o.stroke,u=o.radius,c=o.opacity,f=o.cursor;this.addShape(e,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:i,height:a,fill:s,stroke:l,radius:u,opacity:c,cursor:f}});var d=1/3*i,h=2/3*i,v=1/4*a,p=3/4*a;this.addShape(e,{id:this.getElementId("line-left"),type:"line",attrs:{x1:d,y1:v,x2:d,y2:p,stroke:l,cursor:f}}),this.addShape(e,{id:this.getElementId("line-right"),type:"line",attrs:{x1:h,y1:v,x2:h,y2:p,stroke:l,cursor:f}})},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.bindEvents=function(){var e=this;this.get("group").on("mouseenter",function(){var n=e.get("style").highLightFill;e.getElementByLocalId("background").attr("fill",n),e.draw()}),this.get("group").on("mouseleave",function(){var n=e.get("style").fill;e.getElementByLocalId("background").attr("fill",n),e.draw()})},t.prototype.draw=function(){var e=this.get("container").get("canvas");e&&e.draw()},t}(io),CZe={fill:"#416180",opacity:.05},EZe={fill:"#5B8FF9",opacity:.15,cursor:"move"},qC=10,_Ze={width:qC,height:24},TZe={textBaseline:"middle",fill:"#000",opacity:.45},AZe="sliderchange",kZe=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.onMouseDown=function(n){return function(i){e.currentTarget=n;var a=i.originalEvent;a.stopPropagation(),a.preventDefault(),e.prevX=ae(a,"touches.0.pageX",a.pageX),e.prevY=ae(a,"touches.0.pageY",a.pageY);var o=e.getContainerDOM();o.addEventListener("mousemove",e.onMouseMove),o.addEventListener("mouseup",e.onMouseUp),o.addEventListener("mouseleave",e.onMouseUp),o.addEventListener("touchmove",e.onMouseMove),o.addEventListener("touchend",e.onMouseUp),o.addEventListener("touchcancel",e.onMouseUp)}},e.onMouseMove=function(n){var i=e.cfg.width,a=[e.get("start"),e.get("end")];n.stopPropagation(),n.preventDefault();var o=ae(n,"touches.0.pageX",n.pageX),s=ae(n,"touches.0.pageY",n.pageY),l=o-e.prevX,u=e.adjustOffsetRange(l/i);e.updateStartEnd(u),e.updateUI(e.getElementByLocalId("foreground"),e.getElementByLocalId("minText"),e.getElementByLocalId("maxText")),e.prevX=o,e.prevY=s,e.draw(),e.emit(AZe,[e.get("start"),e.get("end")].sort()),e.delegateEmit("valuechanged",{originValue:a,value:[e.get("start"),e.get("end")]})},e.onMouseUp=function(){e.currentTarget&&(e.currentTarget=void 0);var n=e.getContainerDOM();n&&(n.removeEventListener("mousemove",e.onMouseMove),n.removeEventListener("mouseup",e.onMouseUp),n.removeEventListener("mouseleave",e.onMouseUp),n.removeEventListener("touchmove",e.onMouseMove),n.removeEventListener("touchend",e.onMouseUp),n.removeEventListener("touchcancel",e.onMouseUp))},e}return t.prototype.setRange=function(e,n){this.set("minLimit",e),this.set("maxLimit",n);var i=this.get("start"),a=this.get("end"),o=ei(i,e,n),s=ei(a,e,n);!this.get("isInit")&&(i!==o||a!==s)&&this.setValue([o,s])},t.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},t.prototype.setValue=function(e){var n=this.getRange();if(Qe(e)&&e.length===2){var i=[this.get("start"),this.get("end")];this.update({start:ei(e[0],n.min,n.max),end:ei(e[1],n.min,n.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:i,value:e})}},t.prototype.getValue=function(){return[this.get("start"),this.get("end")]},t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:CZe,foregroundStyle:EZe,handlerStyle:_Ze,textStyle:TZe}})},t.prototype.update=function(e){var n=e.start,i=e.end,a=A({},e);nt(n)||(a.start=ei(n,0,1)),nt(i)||(a.end=ei(i,0,1)),r.prototype.update.call(this,a),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},t.prototype.init=function(){this.set("start",ei(this.get("start"),0,1)),this.set("end",ei(this.get("end"),0,1)),r.prototype.init.call(this)},t.prototype.render=function(){r.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},t.prototype.renderInner=function(e){var n=this.cfg;n.start,n.end;var i=n.width,a=n.height,o=n.trendCfg,s=o===void 0?{}:o,l=n.minText,u=n.maxText,c=n.backgroundStyle,f=c===void 0?{}:c,d=n.foregroundStyle,h=d===void 0?{}:d,v=n.textStyle,p=v===void 0?{}:v,g=Dt({},iQ,this.cfg.handlerStyle);la(ae(s,"data"))&&(this.trend=this.addComponent(e,A({component:SZe,id:this.getElementId("trend"),x:0,y:0,width:i,height:a},s))),this.addShape(e,{id:this.getElementId("background"),type:"rect",attrs:A({x:0,y:0,width:i,height:a},f)}),this.addShape(e,{id:this.getElementId("minText"),type:"text",attrs:A({y:a/2,textAlign:"right",text:l,silent:!1},p)}),this.addShape(e,{id:this.getElementId("maxText"),type:"text",attrs:A({y:a/2,textAlign:"left",text:u,silent:!1},p)}),this.addShape(e,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:A({y:0,height:a},h)});var m=ae(g,"width",qC),y=ae(g,"height",24);this.minHandler=this.addComponent(e,{component:aQ,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(a-y)/2,width:m,height:y,cursor:"ew-resize",style:g}),this.maxHandler=this.addComponent(e,{component:aQ,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(a-y)/2,width:m,height:y,cursor:"ew-resize",style:g})},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.updateUI=function(e,n,i){var a=this.cfg,o=a.start,s=a.end,l=a.width,u=a.minText,c=a.maxText,f=a.handlerStyle,d=a.height,h=o*l,v=s*l;this.trend&&(this.trend.update({width:l,height:d}),this.get("updateAutoRender")||this.trend.render()),e.attr("x",h),e.attr("width",v-h);var p=ae(f,"width",qC);n.attr("text",u),i.attr("text",c);var g=this._dodgeText([h,v],n,i),m=g[0],y=g[1];this.minHandler&&(this.minHandler.update({x:h-p/2}),this.get("updateAutoRender")||this.minHandler.render()),G(m,function(b,x){return n.attr(x,b)}),this.maxHandler&&(this.maxHandler.update({x:v-p/2}),this.get("updateAutoRender")||this.maxHandler.render()),G(y,function(b,x){return i.attr(x,b)})},t.prototype.bindEvents=function(){var e=this.get("group");e.on("handler-min:mousedown",this.onMouseDown("minHandler")),e.on("handler-min:touchstart",this.onMouseDown("minHandler")),e.on("handler-max:mousedown",this.onMouseDown("maxHandler")),e.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var n=e.findById(this.getElementId("foreground"));n.on("mousedown",this.onMouseDown("foreground")),n.on("touchstart",this.onMouseDown("foreground"))},t.prototype.adjustOffsetRange=function(e){var n=this.cfg,i=n.start,a=n.end;switch(this.currentTarget){case"minHandler":{var o=0-i,s=1-i;return Math.min(s,Math.max(o,e))}case"maxHandler":{var o=0-a,s=1-a;return Math.min(s,Math.max(o,e))}case"foreground":{var o=0-i,s=1-a;return Math.min(s,Math.max(o,e))}}},t.prototype.updateStartEnd=function(e){var n=this.cfg,i=n.start,a=n.end;switch(this.currentTarget){case"minHandler":i+=e;break;case"maxHandler":a+=e;break;case"foreground":i+=e,a+=e;break}this.set("start",i),this.set("end",a)},t.prototype._dodgeText=function(e,n,i){var a,o,s=this.cfg,l=s.handlerStyle,u=s.width,c=2,f=ae(l,"width",qC),d=e[0],h=e[1],v=!1;d>h&&(a=[h,d],d=a[0],h=a[1],o=[i,n],n=o[0],i=o[1],v=!0);var p=n.getBBox(),g=i.getBBox(),m=p.width>d-c?{x:d+f/2+c,textAlign:"left"}:{x:d-f/2-c,textAlign:"right"},y=g.width>u-h-c?{x:h-f/2-c,textAlign:"right"}:{x:h+f/2+c,textAlign:"left"};return v?[y,m]:[m,y]},t.prototype.draw=function(){var e=this.get("container"),n=e&&e.get("canvas");n&&n.draw()},t.prototype.getContainerDOM=function(){var e=this.get("container"),n=e&&e.get("canvas");return n&&n.get("container")},t}(io),MZe={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},TD={default:MZe,hover:{thumbColor:"rgba(0,0,0,0.2)"}},IZe=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.clearEvents=us,e.onStartEvent=function(n){return function(i){e.isMobile=n,i.originalEvent.preventDefault();var a=n?ae(i.originalEvent,"touches.0.clientX"):i.clientX,o=n?ae(i.originalEvent,"touches.0.clientY"):i.clientY;e.startPos=e.cfg.isHorizontal?a:o,e.bindLaterEvent()}},e.bindLaterEvent=function(){var n=e.getContainerDOM(),i=[];e.isMobile?i=[rl(n,"touchmove",e.onMouseMove),rl(n,"touchend",e.onMouseUp),rl(n,"touchcancel",e.onMouseUp)]:i=[rl(n,"mousemove",e.onMouseMove),rl(n,"mouseup",e.onMouseUp),rl(n,"mouseleave",e.onMouseUp)],e.clearEvents=function(){i.forEach(function(a){a.remove()})}},e.onMouseMove=function(n){var i=e.cfg,a=i.isHorizontal,o=i.thumbOffset;n.preventDefault();var s=e.isMobile?ae(n,"touches.0.clientX"):n.clientX,l=e.isMobile?ae(n,"touches.0.clientY"):n.clientY,u=a?s:l,c=u-e.startPos;e.startPos=u,e.updateThumbOffset(o+c)},e.onMouseUp=function(n){n.preventDefault(),e.clearEvents()},e.onTrackClick=function(n){var i=e.cfg,a=i.isHorizontal,o=i.x,s=i.y,l=i.thumbLen,u=e.getContainerDOM(),c=u.getBoundingClientRect(),f=n.clientX,d=n.clientY,h=a?f-c.left-o-l/2:d-c.top-s-l/2,v=e.validateRange(h);e.updateThumbOffset(v)},e.onThumbMouseOver=function(){var n=e.cfg.theme.hover.thumbColor;e.getElementByLocalId("thumb").attr("stroke",n),e.draw()},e.onThumbMouseOut=function(){var n=e.cfg.theme.default.thumbColor;e.getElementByLocalId("thumb").attr("stroke",n),e.draw()},e}return t.prototype.setRange=function(e,n){this.set("minLimit",e),this.set("maxLimit",n);var i=this.getValue(),a=ei(i,e,n);i!==a&&!this.get("isInit")&&this.setValue(a)},t.prototype.getRange=function(){var e=this.get("minLimit")||0,n=this.get("maxLimit")||1;return{min:e,max:n}},t.prototype.setValue=function(e){var n=this.getRange(),i=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*ei(e,n.min,n.max)}),this.delegateEmit("valuechange",{originalValue:i,value:this.getValue()})},t.prototype.getValue=function(){return ei(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:TD})},t.prototype.renderInner=function(e){this.renderTrackShape(e),this.renderThumbShape(e)},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.renderTrackShape=function(e){var n=this.cfg,i=n.trackLen,a=n.theme,o=a===void 0?{default:{}}:a,s=Dt({},TD,o).default,l=s.lineCap,u=s.trackColor,c=s.size,f=ae(this.cfg,"size",c),d=this.get("isHorizontal")?{x1:0+f/2,y1:f/2,x2:i-f/2,y2:f/2,lineWidth:f,stroke:u,lineCap:l}:{x1:f/2,y1:0+f/2,x2:f/2,y2:i-f/2,lineWidth:f,stroke:u,lineCap:l};return this.addShape(e,{id:this.getElementId("track"),name:"track",type:"line",attrs:d})},t.prototype.renderThumbShape=function(e){var n=this.cfg,i=n.thumbOffset,a=n.thumbLen,o=n.theme,s=Dt({},TD,o).default,l=s.size,u=s.lineCap,c=s.thumbColor,f=ae(this.cfg,"size",l),d=this.get("isHorizontal")?{x1:i+f/2,y1:f/2,x2:i+a-f/2,y2:f/2,lineWidth:f,stroke:c,lineCap:u,cursor:"default"}:{x1:f/2,y1:i+f/2,x2:f/2,y2:i+a-f/2,lineWidth:f,stroke:c,lineCap:u,cursor:"default"};return this.addShape(e,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:d})},t.prototype.bindEvents=function(){var e=this.get("group");e.on("mousedown",this.onStartEvent(!1)),e.on("mouseup",this.onMouseUp),e.on("touchstart",this.onStartEvent(!0)),e.on("touchend",this.onMouseUp);var n=e.findById(this.getElementId("track"));n.on("click",this.onTrackClick);var i=e.findById(this.getElementId("thumb"));i.on("mouseover",this.onThumbMouseOver),i.on("mouseout",this.onThumbMouseOut)},t.prototype.getContainerDOM=function(){var e=this.get("container"),n=e&&e.get("canvas");return n&&n.get("container")},t.prototype.validateRange=function(e){var n=this.cfg,i=n.thumbLen,a=n.trackLen,o=e;return e+i>a?o=a-i:e+i<i&&(o=0),o},t.prototype.draw=function(){var e=this.get("container"),n=e&&e.get("canvas");n&&n.draw()},t.prototype.updateThumbOffset=function(e){var n=this.cfg,i=n.thumbOffset,a=n.isHorizontal,o=n.thumbLen,s=n.size,l=this.validateRange(e);if(l!==i){var u=this.getElementByLocalId("thumb");a?u.attr({x1:l+s/2,x2:l+o-s/2}):u.attr({y1:l+s/2,y2:l+o-s/2}),this.emitOffsetChange(l)}},t.prototype.emitOffsetChange=function(e){var n=this.cfg,i=n.thumbOffset,a=n.trackLen,o=n.thumbLen;this.cfg.thumbOffset=e,this.emit("scrollchange",{thumbOffset:e,ratio:ei(e/(a-o),0,1)}),this.delegateEmit("valuechange",{originalValue:i,value:e})},t}(io),PZe=KKe,DZe=ZKe,RZe=nZe,OZe=rZe,oQ=iZe,LZe=oZe,sQ=hZe;function FZe(r){if(co(r))return null;var t=r[0].x,e=r[0].x,n=r[0].y,i=r[0].y;return G(r,function(a){t=t>a.x?a.x:t,e=e<a.x?a.x:e,n=n>a.y?a.y:n,i=i<a.y?a.y:i}),{minX:t,maxX:e,minY:n,maxY:i,centerX:(t+e)/2,centerY:(n+i)/2}}function lQ(r){return Array.from(new Set(r)).length===1}function uQ(r){return(sa(r)+Xi(r))/2}function ta(r,t,e,n){return{x:r+e*Math.cos(n),y:t+e*Math.sin(n)}}function mf(r,t,e,n,i,a){a===void 0&&(a=0);var o=ta(r,t,e,n),s=ta(r,t,e,i),l=ta(r,t,a,n),u=ta(r,t,a,i);if(i-n==Math.PI*2){var c=ta(r,t,e,n+Math.PI),f=ta(r,t,a,n+Math.PI),d=[["M",o.x,o.y],["A",e,e,0,1,1,c.x,c.y],["A",e,e,0,1,1,s.x,s.y],["M",l.x,l.y]];return a&&(d.push(["A",a,a,0,1,0,f.x,f.y]),d.push(["A",a,a,0,1,0,u.x,u.y])),d.push(["M",o.x,o.y]),d.push(["Z"]),d}var h=i-n<=Math.PI?0:1,v=[["M",o.x,o.y],["A",e,e,0,h,1,s.x,s.y],["L",u.x,u.y]];return a&&v.push(["A",a,a,0,h,0,l.x,l.y]),v.push(["L",o.x,o.y]),v.push(["Z"]),v}function cQ(r,t,e,n,i){var a=ta(r,t,e,n),o=ta(r,t,e,i);if(ba(i-n,Math.PI*2)){var s=ta(r,t,e,n+Math.PI);return[["M",a.x,a.y],["A",e,e,0,1,1,s.x,s.y],["A",e,e,0,1,1,a.x,a.y],["A",e,e,0,1,0,s.x,s.y],["A",e,e,0,1,0,a.x,a.y],["Z"]]}var l=i-n<=Math.PI?0:1;return[["M",a.x,a.y],["A",e,e,0,l,1,o.x,o.y]]}function Y0(r,t){var e=r.points,n=FZe(e),i,a,o=t.startAngle,s=t.endAngle,l=s-o;return t.isTransposed?(i=n.maxY*l,a=n.minY*l):(i=n.maxX*l,a=n.minX*l),i+=o,a+=o,{startAngle:a,endAngle:i}}function NZe(r,t){if(zt(r)&&zt(t))return[r,t];if(r=r,t=t,lQ(r)||lQ(t))return[uQ(r),uQ(t)];for(var e=-1,n=0,i=0,a,o=r.length-1,s,l=0;++e<r.length;)a=o,o=e,l+=s=r[a]*t[o]-r[o]*t[a],n+=(r[a]+r[o])*s,i+=(t[a]+t[o])*s;return l*=3,[n/l,i/l]}function fQ(r,t){var e=r.attr(),n=t.attr();return G(e,function(i,a){n[a]===void 0&&(n[a]=void 0)}),n}function eg(r,t,e){var n=Math.min(t,e),i=Math.max(t,e);return r>=n&&r<=i}function BZe(r,t,e){if(ot(r))return r.padEnd(t,e);if(Qe(r)){var n=r.length;if(n<t)for(var i=t-n,a=0;a<i;a++)r.push(e)}return r}function Xo(r,t){return typeof r=="object"&&t.forEach(function(e){delete r[e]}),r}function yf(r,t,e){t===void 0&&(t=[]),e===void 0&&(e=new Map);for(var n=0,i=r;n<i.length;n++){var a=i[n];e.has(a)||(t.push(a),e.set(a,!0))}return t}var Po=function(){function r(t,e,n,i){t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=t,this.y=e,this.height=i,this.width=n}return r.fromRange=function(t,e,n,i){return new r(t,e,n-t,i-e)},r.fromObject=function(t){return new r(t.minX,t.minY,t.width,t.height)},Object.defineProperty(r.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),r.prototype.isEqual=function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},r.prototype.contains=function(t){return t.minX>=this.minX&&t.maxX<=this.maxX&&t.minY>=this.minY&&t.maxY<=this.maxY},r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.clone();return G(t,function(i){n.x=Math.min(i.x,n.x),n.y=Math.min(i.y,n.y),n.width=Math.max(i.maxX,n.maxX)-n.x,n.height=Math.max(i.maxY,n.maxY)-n.y}),n},r.prototype.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.clone();return G(t,function(i){n.x=Math.max(i.x,n.x),n.y=Math.max(i.y,n.y),n.width=Math.min(i.maxX,n.maxX)-n.x,n.height=Math.min(i.maxY,n.maxY)-n.y}),n},r.prototype.cut=function(t,e){var n=t.width,i=t.height;switch(e){case Wt.TOP:case Wt.TOP_LEFT:case Wt.TOP_RIGHT:return r.fromRange(this.minX,this.minY+i,this.maxX,this.maxY);case Wt.RIGHT:case Wt.RIGHT_TOP:case Wt.RIGHT_BOTTOM:return r.fromRange(this.minX,this.minY,this.maxX-n,this.maxY);case Wt.BOTTOM:case Wt.BOTTOM_LEFT:case Wt.BOTTOM_RIGHT:return r.fromRange(this.minX,this.minY,this.maxX,this.maxY-i);case Wt.LEFT:case Wt.LEFT_TOP:case Wt.LEFT_BOTTOM:return r.fromRange(this.minX+n,this.minY,this.maxX,this.maxY);default:return this}},r.prototype.shrink=function(t){var e=t[0],n=t[1],i=t[2],a=t[3];return new r(this.x+a,this.y+e,this.width-a-n,this.height-e-i)},r.prototype.expand=function(t){var e=t[0],n=t[1],i=t[2],a=t[3];return new r(this.x-a,this.y-e,this.width+a+n,this.height+e+i)},r.prototype.exceed=function(t){return[Math.max(-this.minY+t.minY,0),Math.max(this.maxX-t.maxX,0),Math.max(this.maxY-t.maxY,0),Math.max(-this.minX+t.minX,0)]},r.prototype.collide=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},r.prototype.size=function(){return this.width*this.height},r.prototype.isPointIn=function(t){return t.x>=this.minX&&t.x<=this.maxX&&t.y>=this.minY&&t.y<=this.maxY},r}();function $Ze(r){return[[r.minX,r.minY],[r.maxX,r.minY],[r.maxX,r.maxY],[r.minX,r.maxY]]}function X0(r){if(r.isPolar&&!r.isTransposed)return(r.endAngle-r.startAngle)*r.getRadius();var t=r.convert({x:0,y:0}),e=r.convert({x:1,y:0});return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function zZe(r){if(r.isPolar){var t=r.startAngle,e=r.endAngle;return e-t==Math.PI*2}return!1}function KC(r,t){var e=r.getCenter();return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function AD(r,t){var e=!1;if(r)if(r.type==="theta"){var n=r.start,i=r.end;e=eg(t.x,n.x,i.x)&&eg(t.y,n.y,i.y)}else{var a=r.invert(t);e=eg(a.x,0,1)&&eg(a.y,0,1)}return e}function tg(r,t){var e=r.getCenter();return Math.atan2(t.y-e.y,t.x-e.x)}function dQ(r,t){t===void 0&&(t=0);var e=r.start,n=r.end,i=r.getWidth(),a=r.getHeight();if(r.isPolar){var o=r.startAngle,s=r.endAngle,l=r.getCenter(),u=r.getRadius();return{type:"path",startState:{path:mf(l.x,l.y,u+t,o,o)},endState:function(f){var d=(s-o)*f+o,h=mf(l.x,l.y,u+t,o,d);return{path:h}},attrs:{path:mf(l.x,l.y,u+t,o,s)}}}var c;return r.isTransposed?c={height:a+t*2}:c={width:i+t*2},{type:"rect",startState:{x:e.x-t,y:n.y-t,width:r.isTransposed?i+t*2:0,height:r.isTransposed?0:a+t*2},endState:c,attrs:{x:e.x-t,y:n.y-t,width:i+t*2,height:a+t*2}}}function GZe(r,t){t===void 0&&(t=0);var e=r.start,n=r.end,i=r.getWidth(),a=r.getHeight(),o=Math.min(e.x,n.x),s=Math.min(e.y,n.y);return Po.fromRange(o-t,s-t,o+i+t,s+a+t)}var UZe=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function VZe(r){var t="linear";return UZe.test(r)?t="timeCat":ot(r)&&(t="cat"),t}function HZe(r,t,e){var n=t||[];if(zt(r)||nt(TB(n,r))&&co(e)){var i=eI("identity");return new i({field:r.toString(),values:[r]})}var a=Ds(n,r),o=ae(e,"type",VZe(a[0])),s=eI(o);return new s(A({field:r,values:a},e))}function WZe(r,t){if(r.type!=="identity"&&t.type!=="identity"){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);r.change(e)}}function q0(r){return r.alias||r.field}function hQ(r,t,e){var n=r.values,i=n.length,a;if(i===1)a=[.5,1];else{var o=1,s=0;zZe(t)?t.isTransposed?(o=ae(e,"widthRatio.multiplePie",1/1.3),s=1/i*o,a=[s/2,1-s/2]):a=[0,1-1/i]:(s=1/i/2,a=[s,1-s])}return a}function jZe(r){var t=r.values.filter(function(e){return!nt(e)&&!isNaN(e)});return Math.max.apply(Math,oi(oi([],t,!1),[nt(r.max)?-1/0:r.max],!1))}function YZe(r){var t,e;switch(r){case Wt.TOP:t={x:0,y:1},e={x:1,y:1};break;case Wt.RIGHT:t={x:1,y:0},e={x:1,y:1};break;case Wt.BOTTOM:t={x:0,y:0},e={x:1,y:0};break;case Wt.LEFT:t={x:0,y:0},e={x:0,y:1};break;default:t=e={x:0,y:0}}return{start:t,end:e}}function XZe(r){var t,e;return r.isTransposed?(t={x:0,y:0},e={x:1,y:0}):(t={x:0,y:0},e={x:0,y:1}),{start:t,end:e}}function ZC(r,t){var e={start:{x:0,y:0},end:{x:0,y:0}};r.isRect?e=YZe(t):r.isPolar&&(e=XZe(r));var n=e.start,i=e.end;return{start:r.convert(n),end:r.convert(i)}}function vQ(r){var t=r.start,e=r.end;return t.x===e.x}function pQ(r,t){var e=r.start,n=r.end,i=vQ(r);return i?(e.y-n.y)*(t.x-e.x)>0?1:-1:(n.x-e.x)*(e.y-t.y)>0?-1:1}function QC(r,t){var e=ae(r,["components","axis"],{});return Dt({},ae(e,["common"],{}),Dt({},ae(e,[t],{})))}function gQ(r,t,e){var n=ae(r,["components","axis"],{});return Dt({},ae(n,["common","title"],{}),Dt({},ae(n,[t,"title"],{})),e)}function kD(r){var t=r.x,e=r.y,n=r.circleCenter,i=e.start>e.end,a=r.isTransposed?r.convert({x:i?0:1,y:0}):r.convert({x:0,y:i?0:1}),o=[a.x-n.x,a.y-n.y],s=[1,0],l=a.y>n.y?_T(o,s):_T(o,s)*-1,u=l+(t.end-t.start),c=Math.sqrt(Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2));return{center:n,radius:c,startAngle:l,endAngle:u}}function JC(r,t){return bu(r)?r===!1?!1:{}:ae(r,[t])}function mQ(r,t){return ae(r,"position",t)}function yQ(r,t){return ae(t,["title","text"],q0(r))}var rg=function(){function r(t,e){this.destroyed=!1,this.facets=[],this.view=t,this.cfg=Dt({},this.getDefaultCfg(),e)}return r.prototype.init=function(){this.container||(this.container=this.createContainer());var t=this.view.getData();this.facets=this.generateFacets(t)},r.prototype.render=function(){this.renderViews()},r.prototype.update=function(){},r.prototype.clear=function(){this.clearFacetViews()},r.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},r.prototype.facetToView=function(t){var e=t.region,n=t.data,i=t.padding,a=i===void 0?this.cfg.padding:i,o=this.view.createView({region:e,padding:a});o.data(n||[]),t.view=o,this.beforeEachView(o,t);var s=this.cfg.eachView;return s&&s(o,t),this.afterEachView(o,t),o},r.prototype.createContainer=function(){var t=this.view.getLayer(Vi.FORE);return t.addGroup()},r.prototype.renderViews=function(){this.createFacetViews()},r.prototype.createFacetViews=function(){var t=this;return this.facets.map(function(e){return t.facetToView(e)})},r.prototype.clearFacetViews=function(){var t=this;G(this.facets,function(e){e.view&&(t.view.removeView(e.view),e.view=void 0)})},r.prototype.parseSpacing=function(){var t=this.view.viewBBox,e=t.width,n=t.height,i=this.cfg.spacing;return i.map(function(a,o){return zt(a)?a/(o===0?e:n):parseFloat(a)/100})},r.prototype.getFieldValues=function(t,e){var n=[],i={};return G(t,function(a){var o=a[e];!nt(o)&&!i[o]&&(n.push(o),i[o]=!0)}),n},r.prototype.getRegion=function(t,e,n,i){var a=this.parseSpacing(),o=a[0],s=a[1],l=(1+o)/(e===0?1:e)-o,u=(1+s)/(t===0?1:t)-s,c={x:(l+o)*n,y:(u+s)*i},f={x:c.x+l,y:c.y+u};return{start:c,end:f}},r.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,spacing:[0,0],padding:10,fields:[]}},r.prototype.getDefaultTitleCfg=function(){var t=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:t}}},r.prototype.processAxis=function(t,e){var n=t.getOptions(),i=n.coordinate,a=t.geometries,o=ae(i,"type","rect");if(o==="rect"&&a.length){nt(n.axes)&&(n.axes={});var s=n.axes,l=a[0].getXYFields(),u=l[0],c=l[1],f=JC(s,u),d=JC(s,c);f!==!1&&(n.axes[u]=this.getXAxisOption(u,s,f,e)),d!==!1&&(n.axes[c]=this.getYAxisOption(c,s,d,e))}},r.prototype.getFacetDataFilter=function(t){return function(e){return zx(t,function(n){var i=n.field,a=n.value;return!nt(a)&&i?e[i]===a:!0})}},r}(),bQ={},qZe=function(r){return bQ[id(r)]},ng=function(r,t){bQ[id(r)]=t},vi=function(){function r(t,e){this.context=t,this.cfg=e,t.addAction(this)}return r.prototype.applyCfg=function(t){jt(this,t)},r.prototype.init=function(){this.applyCfg(this.cfg)},r.prototype.destroy=function(){this.context.removeAction(this),this.context=null},r}(),KZe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.execute=function(){this.callback&&this.callback(this.context)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.callback=null},t}(vi),MD={};function ZZe(r,t){var e=MD[r],n=null;if(e){var i=e.ActionClass,a=e.cfg;n=new i(t,a),n.name=r,n.init()}return n}function e2(r){var t=MD[r];return ae(t,"ActionClass")}function Cr(r,t,e){MD[r]={ActionClass:t,cfg:e}}function QZe(r,t){var e=new KZe(t);return e.callback=r,e.name="callback",e}function JZe(r,t){var e=[];if(r.length){e.push(["M",r[0].x,r[0].y]);for(var n=1,i=r.length;n<i;n+=1){var a=r[n];e.push(["L",a.x,a.y])}t&&e.push(["Z"])}return e}function ID(r,t){for(var e=[r[0]],n=1,i=r.length;n<i;n=n+2){var a=t.convert({x:r[n],y:r[n+1]});e.push(a.x,a.y)}return e}function xQ(r,t){var e=t.isTransposed,n=r[1],i=r[6],a=r[7],o=t.convert({x:i,y:a}),s=e?0:1;return["A",n,n,0,0,s,o.x,o.y]}function eQe(r,t,e){var n=e.isTransposed,i=e.startAngle,a=e.endAngle,o=r[0].toLowerCase()==="a"?{x:r[6],y:r[7]}:{x:r[1],y:r[2]},s={x:t[1],y:t[2]},l=[],u=n?"y":"x",c=Math.abs(s[u]-o[u])*(a-i),f=s[u]>=o[u]?1:0,d=c>Math.PI?1:0,h=e.convert(s),v=KC(e,h);if(v>=.5)if(c===Math.PI*2){var p={x:(s.x+o.x)/2,y:(s.y+o.y)/2},g=e.convert(p);l.push(["A",v,v,0,d,f,g.x,g.y]),l.push(["A",v,v,0,d,f,h.x,h.y])}else l.push(["A",v,v,0,d,f,h.x,h.y]);return l}function tQe(r){G(r,function(t,e){var n=t;if(n[0].toLowerCase()==="a"){var i=r[e-1],a=r[e+1];a&&a[0].toLowerCase()==="a"?i&&i[0].toLowerCase()==="l"&&(i[0]="M"):i&&i[0].toLowerCase()==="a"&&a&&a[0].toLowerCase()==="l"&&(a[0]="M")}})}var rQe=function(r,t,e,n){var i=[],a=!!n,o,s,l,u,c,f,d;if(a){l=n[0],u=n[1];for(var h=0,v=r.length;h<v;h++){var p=r[h];l=Na([0,0],l,p),u=Ba([0,0],u,p)}}for(var h=0,g=r.length;h<g;h++){var p=r[h];if(h===0&&!e)d=p;else if(h===g-1&&!e)f=p,i.push(d),i.push(f);else{o=r[e?h?h-1:g-1:h-1],s=r[e?(h+1)%g:h+1];var m=[0,0];m=ud(m,s,o),m=gi(m,m,t);var y=Mv(p,o),b=Mv(p,s),x=y+b;x!==0&&(y/=x,b/=x);var w=gi([0,0],m,-y),S=gi([0,0],m,b);f=Bi([0,0],p,w),c=Bi([0,0],p,S),c=Na([0,0],c,Ba([0,0],s,p)),c=Ba([0,0],c,Na([0,0],s,p)),w=ud([0,0],c,p),w=gi([0,0],w,-y/b),f=Bi([0,0],p,w),f=Na([0,0],f,Ba([0,0],o,p)),f=Ba([0,0],f,Na([0,0],o,p)),S=ud([0,0],p,f),S=gi([0,0],S,b/y),c=Bi([0,0],p,S),a&&(f=Ba([0,0],f,l),f=Na([0,0],f,u),c=Ba([0,0],c,l),c=Na([0,0],c,u)),i.push(d),i.push(f),d=c}}return e&&i.push(i.shift()),i};function wQ(r,t,e){for(var n=!!t,i=[],a=0,o=r.length;a<o;a+=2)i.push([r[a],r[a+1]]);for(var s=rQe(i,.4,n,e),l=i.length,u=[],c,f,d,a=0;a<l-1;a++)c=s[a*2],f=s[a*2+1],d=i[a+1],u.push(["C",c[0],c[1],f[0],f[1],d[0],d[1]]);return n&&(c=s[l],f=s[l+1],d=i[0],u.push(["C",c[0],c[1],f[0],f[1],d[0],d[1]])),u}function K0(r,t){return JZe(r,t)}function t2(r,t,e){var n=[],i=r[0],a=null;if(r.length<=2)return K0(r,t);for(var o=0,s=r.length;o<s;o++){var l=r[o];(!a||!(a.x===l.x&&a.y===l.y))&&(n.push(l.x),n.push(l.y),a=l)}var u=e||[[0,0],[1,1]],c=wQ(n,t,u);return c.unshift(["M",i.x,i.y]),c}function nQe(r,t){var e=[];return G(t,function(n){var i=n[0];switch(i.toLowerCase()){case"m":case"l":case"c":e.push(ID(n,r));break;case"a":e.push(xQ(n,r));break;case"z":default:e.push(n);break}}),e}function iQe(r,t){var e=[],n,i,a,o;return G(t,function(s,l){var u=s[0];switch(u.toLowerCase()){case"m":case"c":case"q":e.push(ID(s,r));break;case"l":n=t[l-1],i=s,a=r.isTransposed,o=a?n[n.length-2]===i[1]:n[n.length-1]===i[2],o?e=e.concat(eQe(n,i,r)):e.push(ID(s,r));break;case"a":e.push(xQ(s,r));break;case"z":default:e.push(s);break}}),tQe(e),e}function SQ(r,t){var e=r.event,n=e.target,i=n.getCanvasBBox();return i.width>=t||i.height>=t?i:null}function aQe(r,t){var e=r.event,n=e.target,i=n.getCanvasBBox();return i.width>=t||i.height>=t?n.attr("path"):null}function bf(r){var t=r.event,e,n=t.target;return n&&(e=n.get("element")),e}function ig(r){var t=r.event,e=t.target,n;return e&&(n=e.get("delegateObject")),n}function CQ(r){var t=r.event.gEvent;return!(t&&t.fromShape&&t.toShape&&t.fromShape.get("element")===t.toShape.get("element"))}function Z0(r){return r&&r.component&&r.component.isList()}function EQ(r){return r&&r.component&&r.component.isSlider()}function Q0(r){var t=r.event,e=t.target;return e&&e.get("name")==="mask"}function PD(r,t){var e=r.event.target;if(e.get("type")==="path"){var n=aQe(r,t);return n?lQe(r.view,n):void 0}var i=SQ(r,t);return i?DD(r.view,i):null}function _Q(r,t,e){var n=SQ(r,e);if(!n)return null;var i=r.view,a=OD(i,t,{x:n.x,y:n.y}),o=OD(i,t,{x:n.maxX,y:n.maxY}),s={minX:a.x,minY:a.y,maxX:o.x,maxY:o.y};return DD(t,s)}function Wa(r){var t=r.geometries,e=[];return G(t,function(n){var i=n.elements;e=e.concat(i)}),r.views&&r.views.length&&G(r.views,function(n){e=e.concat(Wa(n))}),e}function oQe(r,t,e){var n=Wa(r);return n.filter(function(i){return hl(i,t)===e})}function TQ(r,t){var e=r.geometries,n=[];return G(e,function(i){var a=i.getElementsBy(function(o){return o.hasState(t)});n=n.concat(a)}),n}function hl(r,t){var e=r.getModel(),n=e.data,i;return Qe(n)?i=n[0][t]:i=n[t],i}function sQe(r,t){return!(t.minX>r.maxX||t.maxX<r.minX||t.minY>r.maxY||t.maxY<r.minY)}function DD(r,t){var e=Wa(r),n=[];return G(e,function(i){var a=i.shape,o=a.getCanvasBBox();sQe(t,o)&&n.push(i)}),n}function AQ(r){var t=[];return G(r,function(e){var n=e[0];if(n!=="A")for(var i=1;i<e.length;i=i+2)t.push([e[i],e[i+1]]);else{var a=e.length;t.push([e[a-2],e[a-1]])}}),t}function lQe(r,t){var e=Wa(r),n=AQ(t),i=e.filter(function(a){var o=a.shape,s;if(o.get("type")==="path")s=AQ(o.attr("path"));else{var l=o.getCanvasBBox();s=$Ze(l)}return sve(n,s)});return i}function kQ(r){return r.getComponents().map(function(t){return t.component})}function RD(r,t){var e=t.x-r.x,n=t.y-r.y;return Math.sqrt(e*e+n*n)}function uQe(r,t){if(r.length<=2)return K0(r,!1);var e=r[0],n=[];G(r,function(a){n.push(a.x),n.push(a.y)});var i=wQ(n,t,null);return i.unshift(["M",e.x,e.y]),i}function MQ(r,t){return r.x<=t.x&&r.maxX>=t.x&&r.y<=t.y&&r.maxY>t.y}function au(r){var t=r.parent,e=null;return t&&(e=t.views.filter(function(n){return n!==r})),e}function cQe(r,t){var e=r.getCoordinate();return e.invert(t)}function OD(r,t,e){var n=cQe(r,e);return t.getCoordinate().convert(n)}function IQ(r,t,e,n){var i=!1;return G(r,function(a){if(a[e]===t[e]&&a[n]===t[n])return i=!0,!1}),i}function ag(r,t){var e=r.getScaleByField(t);return!e&&r.views&&G(r.views,function(n){if(e=ag(n,t),e)return!1}),e}var fQe=function(){function r(t){this.actions=[],this.event=null,this.cacheMap={},this.view=t}return r.prototype.cache=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length===1)return this.cacheMap[t[0]];t.length===2&&(this.cacheMap[t[0]]=t[1])},r.prototype.getAction=function(t){return this.actions.find(function(e){return e.name===t})},r.prototype.addAction=function(t){this.actions.push(t)},r.prototype.removeAction=function(t){var e=this.actions,n=this.actions.indexOf(t);n>=0&&e.splice(n,1)},r.prototype.getCurrentPoint=function(){var t=this.event;if(t)if(t.target instanceof HTMLElement){var e=this.view.getCanvas(),n=e.getPointByClient(t.clientX,t.clientY);return n}else return{x:t.x,y:t.y};return null},r.prototype.getCurrentShape=function(){return ae(this.event,["gEvent","shape"])},r.prototype.isInPlot=function(){var t=this.getCurrentPoint();return t?this.view.isPointInPlot(t):!1},r.prototype.isInShape=function(t){var e=this.getCurrentShape();return e?e.get("name")===t:!1},r.prototype.isInComponent=function(t){var e=kQ(this.view),n=this.getCurrentPoint();return n?!!e.find(function(i){var a=i.getBBox();return t?i.get("name")===t&&MQ(a,n):MQ(a,n)}):!1},r.prototype.destroy=function(){G(this.actions.slice(),function(t){t.destroy()}),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},r}(),dQe=function(){function r(t,e){this.view=t,this.cfg=e}return r.prototype.init=function(){this.initEvents()},r.prototype.initEvents=function(){},r.prototype.clearEvents=function(){},r.prototype.destroy=function(){this.clearEvents()},r}();function PQ(r,t,e){var n=r.split(":"),i=n[0],a=t.getAction(i)||ZZe(i,t);if(!a)throw new Error("There is no action named "+i);var o=n[1];return{action:a,methodName:o,arg:e}}function DQ(r){var t=r.action,e=r.methodName,n=r.arg;if(t[e])t[e](n);else throw new Error("Action("+t.name+") doesn't have a method called "+e)}var bs={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},hQe=function(r){Ie(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.callbackCaches={},i.emitCaches={},i.steps=n,i}return t.prototype.init=function(){this.initContext(),r.prototype.init.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},t.prototype.initEvents=function(){var e=this;G(this.steps,function(n,i){G(n,function(a){var o=e.getActionCallback(i,a);o&&e.bindEvent(a.trigger,o)})})},t.prototype.clearEvents=function(){var e=this;G(this.steps,function(n,i){G(n,function(a){var o=e.getActionCallback(i,a);o&&e.offEvent(a.trigger,o)})})},t.prototype.initContext=function(){var e=this.view,n=new fQe(e);this.context=n;var i=this.steps;G(i,function(a){G(a,function(o){if(Kt(o.action))o.actionObject={action:QZe(o.action,n),methodName:"execute"};else if(ot(o.action))o.actionObject=PQ(o.action,n,o.arg);else if(Qe(o.action)){var s=o.action,l=Qe(o.arg)?o.arg:[o.arg];o.actionObject=[],G(s,function(u,c){o.actionObject.push(PQ(u,n,l[c]))})}})})},t.prototype.isAllowStep=function(e){var n=this.currentStepName,i=this.steps;if(n===e||e===bs.SHOW_ENABLE)return!0;if(e===bs.PROCESSING)return n===bs.START;if(e===bs.START)return n!==bs.PROCESSING;if(e===bs.END)return n===bs.PROCESSING||n===bs.START;if(e===bs.ROLLBACK){if(i[bs.END])return n===bs.END;if(n===bs.START)return!0}return!1},t.prototype.isAllowExecute=function(e,n){if(this.isAllowStep(e)){var i=this.getKey(e,n);return n.once&&this.emitCaches[i]?!1:n.isEnable?n.isEnable(this.context):!0}return!1},t.prototype.enterStep=function(e){this.currentStepName=e,this.emitCaches={}},t.prototype.afterExecute=function(e,n){e!==bs.SHOW_ENABLE&&this.currentStepName!==e&&this.enterStep(e);var i=this.getKey(e,n);this.emitCaches[i]=!0},t.prototype.getKey=function(e,n){return e+n.trigger+n.action},t.prototype.getActionCallback=function(e,n){var i=this,a=this.context,o=this.callbackCaches,s=n.actionObject;if(n.action&&s){var l=this.getKey(e,n);if(!o[l]){var u=function(c){a.event=c,i.isAllowExecute(e,n)?(Qe(s)?G(s,function(f){a.event=c,DQ(f)}):(a.event=c,DQ(s)),i.afterExecute(e,n),n.callback&&(a.event=c,n.callback(a))):a.event=null};n.debounce?o[l]=pm(u,n.debounce.wait,n.debounce.immediate):n.throttle?o[l]=Cv(u,n.throttle.wait,{leading:n.throttle.leading,trailing:n.throttle.trailing}):o[l]=u}return o[l]}return null},t.prototype.bindEvent=function(e,n){var i=e.split(":");i[0]==="window"?window.addEventListener(i[1],n):i[0]==="document"?document.addEventListener(i[1],n):this.view.on(e,n)},t.prototype.offEvent=function(e,n){var i=e.split(":");i[0]==="window"?window.removeEventListener(i[1],n):i[0]==="document"?document.removeEventListener(i[1],n):this.view.off(e,n)},t}(dQe),RQ={};function vQe(r){return RQ[id(r)]}function Lr(r,t){RQ[id(r)]=t}function pQe(r,t,e){var n=vQe(r);if(!n)return null;if(Ni(n)){var i=jt(Or(n),e);return new hQe(t,i)}else{var a=n;return new a(t,e)}}function gQe(r){return{title:{autoRotate:!0,position:"center",spacing:r.axisTitleSpacing,style:{fill:r.axisTitleTextFillColor,fontSize:r.axisTitleTextFontSize,lineHeight:r.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:r.fontFamily}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:r.axisLabelOffset,style:{fill:r.axisLabelFillColor,fontSize:r.axisLabelFontSize,lineHeight:r.axisLabelLineHeight,fontFamily:r.fontFamily}},line:{style:{lineWidth:r.axisLineBorder,stroke:r.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:r.axisGridBorderColor,lineWidth:r.axisGridBorder,lineDash:r.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:r.axisTickLineBorder,stroke:r.axisTickLineBorderColor},alignTick:!0,length:r.axisTickLineLength},subTickLine:null,animate:!0}}function mQe(r){return{title:null,marker:{symbol:"circle",spacing:r.legendMarkerSpacing,style:{r:r.legendCircleMarkerSize,fill:r.legendMarkerColor}},itemName:{spacing:5,style:{fill:r.legendItemNameFillColor,fontFamily:r.fontFamily,fontSize:r.legendItemNameFontSize,lineHeight:r.legendItemNameLineHeight,fontWeight:r.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:r.legendPageNavigatorMarkerSize,inactiveFill:r.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:r.legendPageNavigatorMarkerInactiveFillOpacity,fill:r.legendPageNavigatorMarkerFillColor,opacity:r.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:r.legendPageNavigatorTextFillColor,fontSize:r.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:r.legendItemSpacing,itemMarginBottom:r.legendItemMarginBottom,padding:r.legendPadding}}function OQ(r){var t,e={point:{default:{fill:r.pointFillColor,r:r.pointSize,stroke:r.pointBorderColor,lineWidth:r.pointBorder,fillOpacity:r.pointFillOpacity},active:{stroke:r.pointActiveBorderColor,lineWidth:r.pointActiveBorder},selected:{stroke:r.pointSelectedBorderColor,lineWidth:r.pointSelectedBorder},inactive:{fillOpacity:r.pointInactiveFillOpacity,strokeOpacity:r.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:r.hollowPointFillColor,lineWidth:r.hollowPointBorder,stroke:r.hollowPointBorderColor,strokeOpacity:r.hollowPointBorderOpacity,r:r.hollowPointSize},active:{stroke:r.hollowPointActiveBorderColor,strokeOpacity:r.hollowPointActiveBorderOpacity},selected:{lineWidth:r.hollowPointSelectedBorder,stroke:r.hollowPointSelectedBorderColor,strokeOpacity:r.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:r.hollowPointInactiveBorderOpacity}},area:{default:{fill:r.areaFillColor,fillOpacity:r.areaFillOpacity,stroke:null},active:{fillOpacity:r.areaActiveFillOpacity},selected:{fillOpacity:r.areaSelectedFillOpacity},inactive:{fillOpacity:r.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:r.hollowAreaBorderColor,lineWidth:r.hollowAreaBorder,strokeOpacity:r.hollowAreaBorderOpacity},active:{fill:null,lineWidth:r.hollowAreaActiveBorder},selected:{fill:null,lineWidth:r.hollowAreaSelectedBorder},inactive:{strokeOpacity:r.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:r.intervalFillColor,fillOpacity:r.intervalFillOpacity},active:{stroke:r.intervalActiveBorderColor,lineWidth:r.intervalActiveBorder},selected:{stroke:r.intervalSelectedBorderColor,lineWidth:r.intervalSelectedBorder},inactive:{fillOpacity:r.intervalInactiveFillOpacity,strokeOpacity:r.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:r.hollowIntervalFillColor,stroke:r.hollowIntervalBorderColor,lineWidth:r.hollowIntervalBorder,strokeOpacity:r.hollowIntervalBorderOpacity},active:{stroke:r.hollowIntervalActiveBorderColor,lineWidth:r.hollowIntervalActiveBorder,strokeOpacity:r.hollowIntervalActiveBorderOpacity},selected:{stroke:r.hollowIntervalSelectedBorderColor,lineWidth:r.hollowIntervalSelectedBorder,strokeOpacity:r.hollowIntervalSelectedBorderOpacity},inactive:{stroke:r.hollowIntervalInactiveBorderColor,lineWidth:r.hollowIntervalInactiveBorder,strokeOpacity:r.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:r.lineBorderColor,lineWidth:r.lineBorder,strokeOpacity:r.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:r.lineActiveBorder},selected:{lineWidth:r.lineSelectedBorder},inactive:{strokeOpacity:r.lineInactiveBorderOpacity}}},n=gQe(r),i=mQe(r);return{background:r.backgroundColor,defaultColor:r.brandColor,subColor:r.subColor,semanticRed:r.paletteSemanticRed,semanticGreen:r.paletteSemanticGreen,padding:"auto",fontFamily:r.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:r.paletteQualitative10,colors20:r.paletteQualitative20,sequenceColors:r.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:function(a){var o=a.geometry.coordinate;if(o.isPolar&&o.isTransposed){var s=Y0(a.getModel(),o),l=s.startAngle,u=s.endAngle,c=(l+u)/2,f=7.5,d=f*Math.cos(c),h=f*Math.sin(c);return{matrix:Zn(null,[["t",d,h]])}}return e.interval.selected}}},"hollow-rect":{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},line:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},tick:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},funnel:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:e.interval.selected}},pyramid:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:e.interval.selected}}},line:{line:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},dot:{default:{style:A(A({},e.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:A(A({},e.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:A(A({},e.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:A(A({},e.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:A(A({},e.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:A(A({},e.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:A(A({},e.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:A(A({},e.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},hv:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},vh:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},hvh:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},vhv:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}}},polygon:{polygon:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:e.interval.selected}}},point:{circle:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},square:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},bowtie:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},diamond:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},hexagon:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},triangle:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},"triangle-down":{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},"hollow-circle":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-square":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-bowtie":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-diamond":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-hexagon":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-triangle":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-triangle-down":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},cross:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},tick:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},plus:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},hyphen:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},line:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}}},area:{area:{default:{style:e.area.default},active:{style:e.area.active},inactive:{style:e.area.inactive},selected:{style:e.area.selected}},smooth:{default:{style:e.area.default},active:{style:e.area.active},inactive:{style:e.area.inactive},selected:{style:e.area.selected}},line:{default:{style:e.hollowArea.default},active:{style:e.hollowArea.active},inactive:{style:e.hollowArea.inactive},selected:{style:e.hollowArea.selected}},"smooth-line":{default:{style:e.hollowArea.default},active:{style:e.hollowArea.active},inactive:{style:e.hollowArea.inactive},selected:{style:e.hollowArea.selected}}},schema:{candle:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},box:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}}},edge:{line:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},vhv:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},smooth:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},arc:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}}},violin:{violin:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},smooth:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},hollow:{default:{style:e.hollowArea.default},active:{style:e.hollowArea.active},inactive:{style:e.hollowArea.inactive},selected:{style:e.hollowArea.selected}},"hollow-smooth":{default:{style:e.hollowArea.default},active:{style:e.hollowArea.active},inactive:{style:e.hollowArea.inactive},selected:{style:e.hollowArea.selected}}}},components:{axis:{common:n,top:{position:"top",grid:null,title:null,verticalLimitLength:1/2},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:1/2},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:Dt({},n.grid,{line:{type:"line"}})},radius:{title:null,grid:Dt({},n.grid,{line:{type:"circle"}})}},legend:{common:i,right:{layout:"vertical",padding:r.legendVerticalPadding},left:{layout:"vertical",padding:r.legendVerticalPadding},top:{layout:"horizontal",padding:r.legendHorizontalPadding},bottom:{layout:"horizontal",padding:r.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:r.sliderRailHeight,defaultLength:r.sliderRailWidth,style:{fill:r.sliderRailFillColor,stroke:r.sliderRailBorderColor,lineWidth:r.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:r.sliderLabelTextFillColor,fontSize:r.sliderLabelTextFontSize,lineHeight:r.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:r.fontFamily}},handler:{size:r.sliderHandlerWidth,style:{fill:r.sliderHandlerFillColor,stroke:r.sliderHandlerBorderColor}},slidable:!0,padding:i.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:r.tooltipCrosshairsBorderColor,lineWidth:r.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(t={},t[""+Qp]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:r.tooltipContainerFillColor,opacity:r.tooltipContainerFillOpacity,boxShadow:r.tooltipContainerShadow,borderRadius:r.tooltipContainerBorderRadius+"px",color:r.tooltipTextFillColor,fontSize:r.tooltipTextFontSize+"px",fontFamily:r.fontFamily,lineHeight:r.tooltipTextLineHeight+"px",padding:"0 12px 0 12px"},t[""+Jp]={marginBottom:"12px",marginTop:"12px"},t[""+j0]={margin:0,listStyleType:"none",padding:0},t[""+jC]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},t[""+YC]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},t[""+XC]={display:"inline-block",float:"right",marginLeft:"30px"},t)},annotation:{arc:{style:{stroke:r.annotationArcBorderColor,lineWidth:r.annotationArcBorder},animate:!0},line:{style:{stroke:r.annotationLineBorderColor,lineDash:r.annotationLineDash,lineWidth:r.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,textAlign:"start",fontFamily:r.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:r.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:r.annotationRegionBorder,stroke:r.annotationRegionBorderColor,fill:r.annotationRegionFillColor,fillOpacity:r.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:r.brandColor,lineWidth:2}},line:{style:{stroke:r.annotationLineBorderColor,lineWidth:r.annotationLineBorder},length:r.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,fontFamily:r.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:r.annotationRegionFillColor,fillOpacity:r.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,fontFamily:r.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:r.cSliderBackgroundFillColor,opacity:r.cSliderBackgroundFillOpacity},foregroundStyle:{fill:r.cSliderForegroundFillColor,opacity:r.cSliderForegroundFillOpacity},handlerStyle:{width:r.cSliderHandlerWidth,height:r.cSliderHandlerHeight,fill:r.cSliderHandlerFillColor,opacity:r.cSliderHandlerFillOpacity,stroke:r.cSliderHandlerBorderColor,lineWidth:r.cSliderHandlerBorder,radius:r.cSliderHandlerBorderRadius,highLightFill:r.cSliderHandlerHighlightFillColor},textStyle:{fill:r.cSliderTextFillColor,opacity:r.cSliderTextFillOpacity,fontSize:r.cSliderTextFontSize,lineHeight:r.cSliderTextLineHeight,fontWeight:r.cSliderTextFontWeight,stroke:r.cSliderTextBorderColor,lineWidth:r.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:r.scrollbarTrackFillColor,thumbColor:r.scrollbarThumbFillColor}},hover:{style:{thumbColor:r.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:r.labelFillColor,fontSize:r.labelFontSize,fontFamily:r.fontFamily,stroke:r.labelBorderColor,lineWidth:r.labelBorder},fillColorDark:r.labelFillColorDark,fillColorLight:r.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:r.innerLabelFillColor,fontSize:r.innerLabelFontSize,fontFamily:r.fontFamily,stroke:r.innerLabelBorderColor,lineWidth:r.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:r.overflowLabelFillColor,fontSize:r.overflowLabelFontSize,fontFamily:r.fontFamily,stroke:r.overflowLabelBorderColor,lineWidth:r.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:r.labelLineBorder}},autoRotate:!0}}}var Fn={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},J0={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},yQe=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],bQe=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],xQe=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],LQ=function(r){r===void 0&&(r={});var t=r.backgroundColor,e=t===void 0?"transparent":t,n=r.subColor,i=n===void 0?"rgba(0,0,0,0.05)":n,a=r.paletteQualitative10,o=a===void 0?yQe:a,s=r.paletteQualitative20,l=s===void 0?bQe:s,u=r.paletteSemanticRed,c=u===void 0?"#F4664A":u,f=r.paletteSemanticGreen,d=f===void 0?"#30BF78":f,h=r.paletteSemanticYellow,v=h===void 0?"#FAAD14":h,p=r.paletteSequence,g=p===void 0?xQe:p,m=r.fontFamily,y=m===void 0?`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:m,b=r.brandColor,x=b===void 0?o[0]:b;return{backgroundColor:e,brandColor:x,subColor:i,paletteQualitative10:o,paletteQualitative20:l,paletteSemanticRed:c,paletteSemanticGreen:d,paletteSemanticYellow:v,paletteSequence:g,fontFamily:y,axisLineBorderColor:Fn[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:Fn[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:Fn[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:Fn[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:Fn[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:Fn[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:Fn[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:x,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:Fn[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:Fn[100],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:Fn[100],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:Fn[45],legendPageNavigatorTextFontSize:12,sliderRailFillColor:Fn[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:Fn[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Fn[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Fn[25],annotationArcBorderColor:Fn[15],annotationArcBorder:1,annotationLineBorderColor:Fn[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:Fn[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:Fn[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:Fn[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:Fn[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:Fn[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:J0[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:Fn[65],overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:J0[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:Fn[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:x,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:J0[100],pointBorderOpacity:1,pointActiveBorderColor:Fn[100],pointSelectedBorder:2,pointSelectedBorderColor:Fn[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:x,hollowPointBorderOpacity:.95,hollowPointFillColor:J0[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:Fn[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:Fn[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:x,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:x,areaFillOpacity:.25,areaActiveFillColor:x,areaActiveFillOpacity:.5,areaSelectedFillColor:x,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:x,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:Fn[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:Fn[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:x,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:Fn[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:Fn[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:x,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:J0[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:Fn[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:Fn[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}};LQ();function r2(r){var t=r.styleSheet,e=t===void 0?{}:t,n=Ur(r,["styleSheet"]),i=LQ(e);return Dt({},OQ(i),n)}var wQe=r2({}),LD={default:wQe};function eb(r){return ae(LD,id(r),LD.default)}function SQe(r,t){LD[id(r)]=r2(t)}function FQ(r,t,e){var n=e.translate(r),i=e.translate(t);return ba(n,i)}function CQe(r,t){var e=t.coordinate,n=t.getXScale(),i=n.range,a=i[i.length-1],o=i[0],s=e.invert(r),l=s.x;return e.isPolar&&l>(1+a)/2&&(l=o),n.translate(n.invert(l))}function NQ(r,t,e){var n=e.coordinate,i=e.getYScale(),a=i.field,o=n.invert(t),s=i.invert(o.y),l=Ps(r,function(u){var c=u[Wn];return c[a][0]<=s&&c[a][1]>=s});return l||r[r.length-1]}var EQe=ad(function(r){if(r.isCategory)return 1;for(var t=r.values,e=t.length,n=r.translate(t[0]),i=n,a=0;a<e;a++){var o=t[a],s=r.translate(o);s<n&&(n=s),s>i&&(i=s)}return(i-n)/(e-1)});function _Qe(r,t,e){var n=t.getAttribute("position"),i=n.getFields(),a=t.scales,o=Kt(e)||!e?i[0]:e,s=a[o],l=s?s.getText(r[o]):r[o]||o;return Kt(e)?e(l,r):l}function TQe(r){var t=Sv(r.attributes);return ya(t,function(e){return Ml(R0,e.type)})}function BQ(r){for(var t=TQe(r),e,n=0,i=t;n<i.length;n++){var a=i[n],o=a.getScale(a.type);if(o&&o.isLinear){e=o;break}}var s=r.getXScale(),l=r.getYScale();return e||l||s}function AQe(r,t){var e=t.field,n=r[e];if(Qe(n)){var i=n.map(function(a){return t.getText(a)});return i.join("-")}return t.getText(n)}function kQe(r,t){var e,n=t.getGroupScales();if(n.length&&(e=n[0]),e){var i=e.field;return e.getText(r[i])}var a=BQ(t);return q0(a)}function $Q(r,t,e){if(t.length===0)return null;var n=e.type,i=e.getXScale(),a=e.getYScale(),o=i.field,s=a.field,l=null;if(n==="heatmap"||n==="point"){for(var u=e.coordinate,c=u.invert(r),f=i.invert(c.x),d=a.invert(c.y),h=1/0,v=0;v<t.length;v++){var p=t[v],g=p[Wn],m=Math.pow(g[o]-f,2)+Math.pow(g[s]-d,2);m<h&&(h=m,l=p)}return l}var y=t[0],b=t[t.length-1],x=CQe(r,e),w=y[Wn][o],S=y[Wn][s],C=b[Wn][o],_=a.isLinear&&Qe(S);if(Qe(w)){for(var v=0;v<t.length;v++){var T=t[v],g=T[Wn];if(i.translate(g[o][0])<=x&&i.translate(g[o][1])>=x)if(_)Qe(l)||(l=[]),l.push(T);else{l=T;break}}Qe(l)&&(l=NQ(l,r,e))}else{var E=void 0;if(!i.isLinear&&i.type!=="timeCat"){for(var v=0;v<t.length;v++){var T=t[v],g=T[Wn];if(FQ(g[o],x,i))if(_)Qe(l)||(l=[]),l.push(T);else{l=T;break}else i.translate(g[o])<=x&&(b=T,E=t[v+1])}Qe(l)&&(l=NQ(l,r,e))}else{if((x>i.translate(C)||x<i.translate(w))&&(x>i.max||x<i.min))return null;for(var k=0,I=t.length-1,P=void 0;k<=I;){P=Math.floor((k+I)/2);var F=t[P][Wn][o];if(FQ(F,x,i))return t[P];i.translate(F)<=i.translate(x)?(k=P+1,b=t[P],E=t[P+1]):(I===0&&(b=t[0]),I=P-1)}}b&&E&&Math.abs(i.translate(b[Wn][o])-x)>Math.abs(i.translate(E[Wn][o])-x)&&(b=E)}var $=EQe(e.getXScale());return!l&&Math.abs(i.translate(b[Wn][o])-x)<=$/2&&(l=b),l}function FD(r,t,e,n){e===void 0&&(e=""),n===void 0&&(n=!1);var i=r[Wn],a=_Qe(i,t,e),o=t.tooltipOption,s=t.theme.defaultColor,l=[],u,c;function f(C,_){if(n||!nt(_)&&_!==""){var T={title:a,data:i,mappingData:r,name:C,value:_,color:r.color||s,marker:!0};l.push(T)}}if(an(o)){var d=o.fields,h=o.callback;if(h){var v=d.map(function(C){return r[Wn][C]}),p=h.apply(void 0,v),g=A({data:r[Wn],mappingData:r,title:a,color:r.color||s,marker:!0},p);l.push(g)}else for(var m=t.scales,y=0,b=d;y<b.length;y++){var x=b[y];if(!nt(i[x])){var w=m[x];u=q0(w),c=w.getText(i[x]),f(u,c)}}}else{var S=BQ(t);c=AQe(i,S),u=kQe(i,t),f(u,c)}return l}function zQ(r,t,e,n){var i=n.showNil,a=[],o=r.dataArray;if(!co(o)){r.sort(o);for(var s=0,l=o;s<l.length;s++){var u=l[s],c=$Q(t,u,r);if(c){var f=r.getElementId(c),d=r.elementsMap[f];if(r.type==="heatmap"||d.visible){var h=FD(c,r,e,i);h.length&&a.push(h)}}}}return a}function GQ(r,t,e,n){var i=n.showNil,a=[],o=r.container,s=o.getShape(t.x,t.y);if(s&&s.get("visible")&&s.get("origin")){var l=s.get("origin").mappingData,u=FD(l,r,e,i);u.length&&a.push(u)}return a}function ND(r,t,e){for(var n=[],i=r.geometries,a=e.shared,o=e.title,s=e.reversed,l=0,u=i;l<u.length;l++){var c=u[l];if(c.visible&&c.tooltipOption!==!1){var f=c.type,d=void 0;["point","edge","polygon"].includes(f)?d=GQ(c,t,o,e):["area","line","path","heatmap"].includes(f)||a!==!1?d=zQ(c,t,o,e):d=GQ(c,t,o,e),d.length&&(s&&d.reverse(),n.push(d))}}return n}function MQe(r,t,e){for(var n=ND(r,t,e),i=0,a=r.views;i<a.length;i++){var o=a[i];n=n.concat(ND(o,t,e))}return n}function IQe(r){return!zt(r)&&!Qe(r)}function BD(r){r===void 0&&(r=0);var t=Qe(r)?r:[r];switch(t.length){case 0:t=[0,0,0,0];break;case 1:t=new Array(4).fill(t[0]);break;case 2:t=oi(oi([],t,!0),t,!0);break;case 3:t=oi(oi([],t,!0),[t[1]],!1);break;default:t=t.slice(0,4);break}return t}var $D={};function xh(r,t){$D[r]=t}function PQe(){return Object.keys($D)}function DQe(r){return $D[r]}var RQe=function(){function r(t){this.option=this.wrapperOption(t)}return r.prototype.update=function(t){return this.option=this.wrapperOption(t),this},r.prototype.hasAction=function(t){var e=this.option.actions;return vm(e,function(n){return n[0]===t})},r.prototype.create=function(t,e){var n=this.option,i=n.type,a=n.cfg,o=i==="theta",s=A({start:t,end:e},a),l=wqe(o?"polar":i);return this.coordinate=new l(s),this.coordinate.type=i,o&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},r.prototype.adjust=function(t,e){return this.coordinate.update({start:t,end:e}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},r.prototype.rotate=function(t){return this.option.actions.push(["rotate",t]),this},r.prototype.reflect=function(t){return this.option.actions.push(["reflect",t]),this},r.prototype.scale=function(t,e){return this.option.actions.push(["scale",t,e]),this},r.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},r.prototype.getOption=function(){return this.option},r.prototype.getCoordinate=function(){return this.coordinate},r.prototype.wrapperOption=function(t){return A({type:"rect",actions:[],cfg:{}},t)},r.prototype.execActions=function(t){var e=this,n=this.option.actions;G(n,function(i){var a,o=i[0],s=i.slice(1),l=nt(t)?!0:t.includes(o);l&&(a=e.coordinate)[o].apply(a,s)})},r}(),pi=function(){function r(t,e,n){this.view=t,this.gEvent=e,this.data=n,this.type=e.type}return r.fromData=function(t,e,n){return new r(t,new Rm(e,{}),n)},Object.defineProperty(r.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[Event (type="+this.type+")]"},r.prototype.clone=function(){return new r(this.view,this.gEvent,this.data)},r}();function OQe(r){var t=r.getController("axis"),e=r.getController("legend"),n=r.getController("annotation"),i=r.getController("slider"),a=r.getController("scrollbar");[t,i,a,e,n].forEach(function(o){o&&o.layout()})}var LQe=function(){function r(){this.scales=new Map,this.syncScales=new Map}return r.prototype.createScale=function(t,e,n,i){var a=n,o=this.getScaleMeta(i);if(e.length===0&&o){var s=o.scale,l={type:s.type};s.isCategory&&(l.values=s.values),a=Dt(l,o.scaleDef,n)}var u=HZe(t,e,a);return this.cacheScale(u,n,i),u},r.prototype.sync=function(t,e){var n=this;this.syncScales.forEach(function(i,a){var o=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,l=[];G(i,function(u){var c=n.getScale(u);s=zt(c.max)?Math.max(s,c.max):s,o=zt(c.min)?Math.min(o,c.min):o,G(c.values,function(f){l.includes(f)||l.push(f)})}),G(i,function(u){var c=n.getScale(u);if(c.isContinuous)c.change({min:o,max:s,values:l});else if(c.isCategory){var f=c.range,d=n.getScaleMeta(u);l&&!ae(d,["scaleDef","range"])&&(f=hQ(Dt({},c,{values:l}),t,e)),c.change({values:l,range:f})}})})},r.prototype.cacheScale=function(t,e,n){var i=this.getScaleMeta(n);i&&i.scale.type===t.type?(WZe(i.scale,t),i.scaleDef=e):(i={key:n,scale:t,scaleDef:e},this.scales.set(n,i));var a=this.getSyncKey(i);if(i.syncKey=a,this.removeFromSyncScales(n),a){var o=this.syncScales.get(a);o||(o=[],this.syncScales.set(a,o)),o.push(n)}},r.prototype.getScale=function(t){var e=this.getScaleMeta(t);if(!e){var n=qi(t.split("-")),i=this.syncScales.get(n);i&&i.length&&(e=this.getScaleMeta(i[0]))}return e&&e.scale},r.prototype.deleteScale=function(t){var e=this.getScaleMeta(t);if(e){var n=e.syncKey,i=this.syncScales.get(n);if(i&&i.length){var a=i.indexOf(t);a!==-1&&i.splice(a,1)}}this.scales.delete(t)},r.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},r.prototype.removeFromSyncScales=function(t){var e=this;this.syncScales.forEach(function(n,i){var a=n.indexOf(t);if(a!==-1)return n.splice(a,1),n.length===0&&e.syncScales.delete(i),!1})},r.prototype.getSyncKey=function(t){var e=t.scale,n=t.scaleDef,i=e.field,a=ae(n,["sync"]);return a===!0?i:a===!1?void 0:a},r.prototype.getScaleMeta=function(t){return this.scales.get(t)},r}(),n2=function(){function r(t,e,n,i){t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=0),this.top=t,this.right=e,this.bottom=n,this.left=i}return r.instance=function(t,e,n,i){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=0),new r(t,e,n,i)},r.prototype.max=function(t){var e=t[0],n=t[1],i=t[2],a=t[3];return this.top=Math.max(this.top,e),this.right=Math.max(this.right,n),this.bottom=Math.max(this.bottom,i),this.left=Math.max(this.left,a),this},r.prototype.shrink=function(t){var e=t[0],n=t[1],i=t[2],a=t[3];return this.top+=e,this.right+=n,this.bottom+=i,this.left+=a,this},r.prototype.inc=function(t,e){var n=t.width,i=t.height;switch(e){case Wt.TOP:case Wt.TOP_LEFT:case Wt.TOP_RIGHT:this.top+=i;break;case Wt.RIGHT:case Wt.RIGHT_TOP:case Wt.RIGHT_BOTTOM:this.right+=n;break;case Wt.BOTTOM:case Wt.BOTTOM_LEFT:case Wt.BOTTOM_RIGHT:this.bottom+=i;break;case Wt.LEFT:case Wt.LEFT_TOP:case Wt.LEFT_BOTTOM:this.left+=n;break}return this},r.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},r.prototype.clone=function(){return new(r.bind.apply(r,oi([void 0],this.getPadding(),!1)))},r}();function FQe(r){var t=r.padding;if(!IQe(t))return new(n2.bind.apply(n2,oi([void 0],BD(t),!1)));var e=r.viewBBox,n=new n2,i=[],a=[],o=[];return G(r.getComponents(),function(s){var l=s.type;l===ka.AXIS?i.push(s):[ka.LEGEND,ka.SLIDER,ka.SCROLLBAR].includes(l)?a.push(s):l!==ka.GRID&&l!==ka.TOOLTIP&&o.push(s)}),G(i,function(s){var l=s.component,u=l.getLayoutBBox(),c=new Po(u.x,u.y,u.width,u.height),f=c.exceed(e);n.max(f)}),G(a,function(s){var l=s.component,u=s.direction,c=l.getLayoutBBox(),f=l.get("padding"),d=new Po(c.x,c.y,c.width,c.height).expand(f);n.inc(d,u)}),G(o,function(s){var l=s.component,u=s.direction,c=l.getLayoutBBox(),f=new Po(c.x,c.y,c.width,c.height);n.inc(f,u)}),n}function NQe(r,t,e){var n=e.instance();t.forEach(function(i){i.autoPadding=n.max(i.autoPadding.getPadding())})}var UQ=function(r){Ie(t,r);function t(e){var n=r.call(this,{visible:e.visible})||this;n.views=[],n.geometries=[],n.controllers=[],n.interactions={},n.limitInPlot=!1,n.options={data:[],animate:!0},n.usedControllers=PQe(),n.scalePool=new LQe,n.layoutFunc=OQe,n.isPreMouseInPlot=!1,n.isDataChanged=!1,n.isCoordinateChanged=!1,n.createdScaleKeys=new Map,n.onCanvasEvent=function(b){var x=b.name;if(!x.includes(":")){var w=n.createViewEvent(b);n.doPlotEvent(w),n.emit(x,w)}},n.onDelegateEvents=function(b){var x=b.name;if(!!x.includes(":")){var w=n.createViewEvent(b);n.emit(x,w)}};var i=e.id,a=i===void 0?Rs("view"):i,o=e.parent,s=e.canvas,l=e.backgroundGroup,u=e.middleGroup,c=e.foregroundGroup,f=e.region,d=f===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:f,h=e.padding,v=e.appendPadding,p=e.theme,g=e.options,m=e.limitInPlot,y=e.syncViewPadding;return n.parent=o,n.canvas=s,n.backgroundGroup=l,n.middleGroup=u,n.foregroundGroup=c,n.region=d,n.padding=h,n.appendPadding=v,n.options=A(A({},n.options),g),n.limitInPlot=m,n.id=a,n.syncViewPadding=y,n.themeObject=an(p)?Dt({},eb("default"),r2(p)):eb(p),n.init(),n}return t.prototype.setLayout=function(e){this.layoutFunc=e},t.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},t.prototype.render=function(e,n){e===void 0&&(e=!1),this.emit(Hr.BEFORE_RENDER,pi.fromData(this,Hr.BEFORE_RENDER,n)),this.paint(e),this.emit(Hr.AFTER_RENDER,pi.fromData(this,Hr.AFTER_RENDER,n)),this.visible===!1&&this.changeVisible(!1)},t.prototype.clear=function(){var e=this;this.emit(Hr.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var n=this.geometries,i=0;i<n.length;i++)n[i].clear(),n[i].container.remove(!0),n[i].labelsContainer.remove(!0);this.geometries=[];for(var a=this.controllers,i=0;i<a.length;i++)a[i].name==="annotation"?a[i].clear(!0):a[i].clear();this.createdScaleKeys.forEach(function(s,l){e.getRootView().scalePool.deleteScale(l)}),this.createdScaleKeys.clear();for(var o=this.views,i=0;i<o.length;i++)o[i].clear();this.emit(Hr.AFTER_CLEAR)},t.prototype.destroy=function(){this.emit(Hr.BEFORE_DESTROY);var e=this.interactions;G(e,function(s){s&&s.destroy()}),this.clear();for(var n=this.controllers,i=0,a=n.length;i<a;i++){var o=n[i];o.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),r.prototype.destroy.call(this)},t.prototype.changeVisible=function(e){r.prototype.changeVisible.call(this,e);for(var n=this.geometries,i=0,a=n.length;i<a;i++){var o=n[i];o.changeVisible(e)}for(var s=this.controllers,i=0,a=s.length;i<a;i++){var l=s[i];l.changeVisible(e)}return this.foregroundGroup.set("visible",e),this.middleGroup.set("visible",e),this.backgroundGroup.set("visible",e),this.getCanvas().draw(),this},t.prototype.data=function(e){return Ki(this.options,"data",e),this.isDataChanged=!0,this},t.prototype.source=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(e)},t.prototype.filter=function(e,n){return Kt(n)?(Ki(this.options,["filters",e],n),this):(!n&&ae(this.options,["filters",e])&&delete this.options.filters[e],this)},t.prototype.axis=function(e,n){return bu(e)?Ki(this.options,["axes"],e):Ki(this.options,["axes",e],n),this},t.prototype.legend=function(e,n){return bu(e)?Ki(this.options,["legends"],e):ot(e)?(Ki(this.options,["legends",e],n),Ni(n)&&(n==null?void 0:n.selected)&&Ki(this.options,["filters",e],function(i){var a;return(a=n==null?void 0:n.selected[i])!==null&&a!==void 0?a:!0})):Ki(this.options,["legends"],e),this},t.prototype.scale=function(e,n){var i=this;return ot(e)?Ki(this.options,["scales",e],n):an(e)&&G(e,function(a,o){Ki(i.options,["scales",o],a)}),this},t.prototype.tooltip=function(e){return Ki(this.options,"tooltip",e),this},t.prototype.annotation=function(){return this.getController("annotation")},t.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},t.prototype.coordinate=function(e,n){return ot(e)?Ki(this.options,"coordinate",{type:e,cfg:n}):Ki(this.options,"coordinate",e),this.coordinateController.update(this.options.coordinate),this.coordinateController},t.prototype.coord=function(e,n){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(e,n)},t.prototype.facet=function(e,n){this.facetInstance&&this.facetInstance.destroy();var i=qZe(e);if(!i)throw new Error("facet '"+e+"' is not exist!");return this.facetInstance=new i(this,A(A({},n),{type:e})),this},t.prototype.animate=function(e){return Ki(this.options,"animate",e),this},t.prototype.updateOptions=function(e){return this.clear(),jt(this.options,e),this.views.forEach(function(n){return n.destroy()}),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},t.prototype.option=function(e,n){if(t.prototype[e])throw new Error(`Can't use built in variable name "`+e+'", please change another one.');return Ki(this.options,e,n),this},t.prototype.theme=function(e){return this.themeObject=an(e)?Dt({},this.themeObject,r2(e)):eb(e),this},t.prototype.interaction=function(e,n){var i=this.interactions[e];i&&i.destroy();var a=pQe(e,this,n);return a&&(a.init(),this.interactions[e]=a),this},t.prototype.removeInteraction=function(e){var n=this.interactions[e];n&&(n.destroy(),this.interactions[e]=void 0)},t.prototype.changeData=function(e){this.isDataChanged=!0,this.emit(Hr.BEFORE_CHANGE_DATA,pi.fromData(this,Hr.BEFORE_CHANGE_DATA,null)),this.data(e),this.paint(!0);for(var n=this.views,i=0,a=n.length;i<a;i++){var o=n[i];o.changeData(e)}this.emit(Hr.AFTER_CHANGE_DATA,pi.fromData(this,Hr.AFTER_CHANGE_DATA,null))},t.prototype.createView=function(e){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var n={data:this.options.data,scales:Or(this.options.scales),axes:Or(this.options.axes),coordinate:Or(this.coordinateController.getOption()),tooltip:Or(this.options.tooltip),legends:Or(this.options.legends),animate:this.options.animate,visible:this.visible},i=new t(A(A({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:Yp.BG}),middleGroup:this.middleGroup.addGroup({zIndex:Yp.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:Yp.FORE}),theme:this.themeObject,padding:this.padding},e),{options:A(A({},n),ae(e,"options",{}))}));return this.views.push(i),i},t.prototype.view=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(e)},t.prototype.removeView=function(e){var n=IB(this.views,function(i){return i===e})[0];return n&&n.destroy(),n},t.prototype.getCoordinate=function(){return this.coordinateInstance},t.prototype.getTheme=function(){return this.themeObject},t.prototype.getXScale=function(){var e=this.geometries[0];return e?e.getXScale():null},t.prototype.getYScales=function(){var e={},n=[];return this.geometries.forEach(function(i){var a=i.getYScale(),o=a.field;e[o]||(e[o]=!0,n.push(a))}),n},t.prototype.getScalesByDim=function(e){for(var n=this.geometries,i={},a=0,o=n.length;a<o;a++){var s=n[a],l=e==="x"?s.getXScale():s.getYScale();l&&!i[l.field]&&(i[l.field]=l)}return i},t.prototype.getScale=function(e,n){var i=n||this.getScaleKey(e);return this.getRootView().scalePool.getScale(i)},t.prototype.getScaleByField=function(e,n){return this.getScale(e,n)},t.prototype.getOptions=function(){return this.options},t.prototype.getData=function(){return this.filteredData},t.prototype.getOriginalData=function(){return this.options.data},t.prototype.getPadding=function(){return this.autoPadding.getPadding()},t.prototype.getGeometries=function(){return this.geometries},t.prototype.getElements=function(){return Ya(this.geometries,function(e,n){return e.concat(n.getElements())},[])},t.prototype.getElementsBy=function(e){return this.getElements().filter(function(n){return e(n)})},t.prototype.getLayer=function(e){return e===Vi.BG?this.backgroundGroup:e===Vi.MID?this.middleGroup:e===Vi.FORE?this.foregroundGroup:this.foregroundGroup},t.prototype.isPointInPlot=function(e){return AD(this.getCoordinate(),e)},t.prototype.getLegendAttributes=function(){return No(this.geometries.map(function(e){return e.getGroupAttributes()}))},t.prototype.getGroupScales=function(){var e=this.geometries.map(function(n){return n.getGroupScales()});return yf(No(e))},t.prototype.getCanvas=function(){return this.getRootView().canvas},t.prototype.getRootView=function(){for(var e=this;;){if(e.parent){e=e.parent;continue}break}return e},t.prototype.getXY=function(e){var n=this.getCoordinate(),i=this.getScalesByDim("x"),a=this.getScalesByDim("y"),o,s;if(G(e,function(l,u){i[u]&&(o=i[u].scale(l)),a[u]&&(s=a[u].scale(l))}),!nt(o)&&!nt(s))return n.convert({x:o,y:s})},t.prototype.getController=function(e){return Ps(this.controllers,function(n){return n.name===e})},t.prototype.showTooltip=function(e){var n=this.getController("tooltip");return n&&n.showTooltip(e),this},t.prototype.hideTooltip=function(){var e=this.getController("tooltip");return e&&e.hideTooltip(),this},t.prototype.lockTooltip=function(){var e=this.getController("tooltip");return e&&e.lockTooltip(),this},t.prototype.unlockTooltip=function(){var e=this.getController("tooltip");return e&&e.unlockTooltip(),this},t.prototype.isTooltipLocked=function(){var e=this.getController("tooltip");return e&&e.isTooltipLocked()},t.prototype.getTooltipItems=function(e){var n=this.getController("tooltip");return n?n.getTooltipItems(e):[]},t.prototype.getSnapRecords=function(e){for(var n=this.geometries,i=[],a=0,o=n.length;a<o;a++){var s=n[a],l=s.dataArray;s.sort(l);for(var u=void 0,c=0,f=l.length;c<f;c++){var d=l[c];u=$Q(e,d,s),u&&i.push(u)}}for(var h=this.views,a=0,o=h.length;a<o;a++){var v=h[a],p=v.getSnapRecords(e);i=i.concat(p)}return i},t.prototype.getComponents=function(){for(var e=[],n=this.controllers,i=0,a=n.length;i<a;i++){var o=n[i];e=e.concat(o.getComponents())}return e},t.prototype.filterData=function(e){var n=this.options.filters;return la(n)===0?e:ya(e,function(i,a){var o=Object.keys(n);return o.every(function(s){var l=n[s];return l(i[s],i,a)})})},t.prototype.filterFieldData=function(e,n){var i=this.options.filters,a=ae(i,e);return _c(a)?n:n.filter(function(o,s){return a(o[e],o,s)})},t.prototype.adjustCoordinate=function(){var e=this.getCoordinate(),n=e.start,i=e.end,a=this.coordinateBBox.bl,o=this.coordinateBBox.tr;if(ci(n,a)&&ci(i,o)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(a,o)},t.prototype.paint=function(e){this.renderDataRecursive(e),this.syncScale(),this.emit(Hr.BEFORE_PAINT),this.renderPaddingRecursive(e),this.renderLayoutRecursive(e),this.renderBackgroundStyleShape(),this.renderPaintRecursive(e),this.emit(Hr.AFTER_PAINT),this.isDataChanged=!1},t.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var e=ae(this.themeObject,"background");if(e){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var n=this.viewBBox,i=n.x,a=n.y,o=n.width,s=n.height;this.backgroundStyleRectShape.attr({fill:e,x:i,y:a,width:o,height:s})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},t.prototype.renderPaddingRecursive=function(e){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(e),this.autoPadding=FQe(this).shrink(BD(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();for(var n=this.views,i=0,a=n.length;i<a;i++){var o=n[i];o.renderPaddingRecursive(e)}},t.prototype.renderLayoutRecursive=function(e){var n=this.syncViewPadding===!0?NQe:Kt(this.syncViewPadding)?this.syncViewPadding:void 0;n&&(n(this,this.views,n2),this.views.forEach(function(l){l.coordinateBBox=l.viewBBox.shrink(l.autoPadding.getPadding()),l.adjustCoordinate()})),this.doLayout();for(var i=this.views,a=0,o=i.length;a<o;a++){var s=i[a];s.renderLayoutRecursive(e)}},t.prototype.renderPaintRecursive=function(e){var n=this.middleGroup;if(this.limitInPlot){var i=dQ(this.coordinateInstance),a=i.type,o=i.attrs;n.setClip({type:a,attrs:o})}else n.setClip(void 0);this.paintGeometries(e),this.renderComponents(e);for(var s=this.views,l=0,u=s.length;l<u;l++){var c=s[l];c.renderPaintRecursive(e)}},t.prototype.createScale=function(e,n,i,a){var o=ae(this.options.scales,[e]),s=A(A({},o),i);return this.parent?this.parent.createScale(e,n,s,a):this.scalePool.createScale(e,n,s,a)},t.prototype.renderDataRecursive=function(e){this.doFilterData(),this.createCoordinate(),this.initGeometries(e),this.renderFacet(e);for(var n=this.views,i=0,a=n.length;i<a;i++){var o=n[i];o.renderDataRecursive(e)}},t.prototype.calculateViewBBox=function(){var e,n,i,a;if(this.parent){var o=this.parent.coordinateBBox;e=o.x,n=o.y,i=o.width,a=o.height}else e=0,n=0,i=this.canvas.get("width"),a=this.canvas.get("height");var s=this.region,l=s.start,u=s.end,c=new Po(e+i*l.x,n+a*l.y,i*(u.x-l.x),a*(u.y-l.y));(!this.viewBBox||!this.viewBBox.isEqual(c))&&(this.viewBBox=new Po(e+i*l.x,n+a*l.y,i*(u.x-l.x),a*(u.y-l.y))),this.coordinateBBox=this.viewBBox},t.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},t.prototype.initComponentController=function(){for(var e=this.usedControllers,n=0,i=e.length;n<i;n++){var a=e[n],o=DQe(a);o&&this.controllers.push(new o(this))}},t.prototype.createViewEvent=function(e){var n=e.shape,i=e.name,a=n?n.get("origin"):null,o=new pi(this,e,a);return o.type=i,o},t.prototype.doPlotEvent=function(e){var n=e.type,i=e.x,a=e.y,o={x:i,y:a},s=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(s.includes(n)){var l=this.isPointInPlot(o),u=e.clone();if(l){var c="plot:"+n;u.type=c,this.emit(c,u),(n==="mouseleave"||n==="touchend")&&(this.isPreMouseInPlot=!1)}n==="mousemove"||n==="touchmove"?(this.isPreMouseInPlot&&!l?(n==="mousemove"&&(u.type=jo.MOUSE_LEAVE,this.emit(jo.MOUSE_LEAVE,u)),u.type=jo.LEAVE,this.emit(jo.LEAVE,u)):!this.isPreMouseInPlot&&l&&(n==="mousemove"&&(u.type=jo.MOUSE_ENTER,this.emit(jo.MOUSE_ENTER,u)),u.type=jo.ENTER,this.emit(jo.ENTER,u)),this.isPreMouseInPlot=l):(n==="mouseleave"||n==="touchend")&&this.isPreMouseInPlot&&(n==="mouseleave"&&(u.type=jo.MOUSE_LEAVE,this.emit(jo.MOUSE_LEAVE,u)),u.type=jo.LEAVE,this.emit(jo.LEAVE,u),this.isPreMouseInPlot=!1)}},t.prototype.doFilterData=function(){var e=this.options.data;this.filteredData=this.filterData(e)},t.prototype.initGeometries=function(e){this.createOrUpdateScales();for(var n=this.getCoordinate(),i=ae(this.options,"scales",{}),a=this.geometries,o=0,s=a.length;o<s;o++){var l=a[o];l.scales=this.getGeometryScales();var u={coordinate:n,scaleDefs:i,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};e?l.update(u):l.init(u)}this.adjustScales()},t.prototype.createOrUpdateScales=function(){for(var e=this.getScaleFields(),n=this.getGroupedFields(),i=this.getOptions(),a=i.data,o=i.scales,s=o===void 0?{}:o,l=this.filteredData,u=0,c=e.length;u<c;u++){var f=e[u],d=s[f],h=this.getScaleKey(f);this.createScale(f,n.includes(f)?a:l,d,h),this.createdScaleKeys.set(h,!0)}},t.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},t.prototype.getGeometryScales=function(){for(var e=this.getScaleFields(),n={},i=0;i<e.length;i++){var a=e[i];n[a]=this.getScaleByField(a)}return n},t.prototype.getScaleFields=function(){for(var e=[],n=new Map,i=this.geometries,a=0;a<i.length;a++){var o=i[a],s=o.getScaleFields();yf(s,e,n)}return e},t.prototype.getGroupedFields=function(){for(var e=[],n=new Map,i=this.geometries,a=0;a<i.length;a++){var o=i[a],s=o.getGroupFields();yf(s,e,n)}return e},t.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},t.prototype.adjustCategoryScaleRange=function(){var e=this,n=oi([this.getXScale()],this.getYScales(),!0).filter(function(o){return!!o}),i=this.getCoordinate(),a=this.options.scales;G(n,function(o){var s=o.field,l=o.values,u=o.isCategory,c=o.isIdentity;(u||c)&&l&&!ae(a,[s,"range"])&&(o.range=hQ(o,i,e.theme))})},t.prototype.initComponents=function(e){for(var n=this.controllers,i=0;i<n.length;i++){var a=n[i];e?a.update():(a.clear(),a.render())}},t.prototype.doLayout=function(){this.layoutFunc(this)},t.prototype.createCoordinate=function(){var e=this.coordinateBBox.bl,n=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(e,n)},t.prototype.paintGeometries=function(e){for(var n=this.options.animate,i=this.getCoordinate(),a={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},o=this.geometries,s=0;s<o.length;s++){var l=o[s];l.coordinate=i,l.canvasRegion=a,n||l.animate(!1),l.paint(e)}},t.prototype.renderComponents=function(e){for(var n=0;n<this.getComponents().length;n++){var i=this.getComponents()[n];i.component.render()}},t.prototype.renderFacet=function(e){this.facetInstance&&(e?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},t.prototype.initOptions=function(){var e=this,n=this.options,i=n.geometries,a=i===void 0?[]:i,o=n.interactions,s=o===void 0?[]:o,l=n.views,u=l===void 0?[]:l,c=n.annotations,f=c===void 0?[]:c,d=n.coordinate,h=n.events,v=n.facets;this.coordinateController?d&&this.coordinateController.update(d):this.coordinateController=new RQe(d);for(var p=0;p<a.length;p++){var g=a[p];this.createGeometry(g)}for(var m=0;m<s.length;m++){var y=s[m],b=y.type,x=y.cfg;this.interaction(b,x)}for(var w=0;w<u.length;w++){var S=u[w];this.createView(S)}for(var C=this.getController("annotation"),_=0;_<f.length;_++){var T=f[_];C.annotation(T)}h&&G(h,function(E,k){e.on(k,E)}),v&&G(v,function(E){var k=E.type,I=Ur(E,["type"]);e.facet(k,I)})},t.prototype.createGeometry=function(e){var n=e.type,i=e.cfg,a=i===void 0?{}:i;if(this[n]){var o=this[n](a);G(e,function(s,l){Kt(o[l])&&o[l](s)})}},t.prototype.getScaleKey=function(e){return this.id+"-"+e},t}(tD);function ou(r,t){UQ.prototype[r.toLowerCase()]=function(e){e===void 0&&(e={});var n=A({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},e),i=new t(n);return this.geometries.push(i),i}}var BQe=function(r){Ie(t,r);function t(e){var n=this,i=e.container,a=e.width,o=e.height,s=e.autoFit,l=s===void 0?!1:s,u=e.padding,c=e.appendPadding,f=e.renderer,d=f===void 0?"canvas":f,h=e.pixelRatio,v=e.localRefresh,p=v===void 0?!0:v,g=e.visible,m=g===void 0?!0:g,y=e.supportCSSTransform,b=y===void 0?!1:y,x=e.defaultInteractions,w=x===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text"]:x,S=e.options,C=e.limitInPlot,_=e.theme,T=e.syncViewPadding,E=ot(i)?document.getElementById(i):i,k=Qn('<div style="position:relative;"></div>');E.appendChild(k);var I=rZ(E,l,a,o),P=XXe(d),F=new P.Canvas(A({container:k,pixelRatio:h,localRefresh:p,supportCSSTransform:b},I));return n=r.call(this,{parent:null,canvas:F,backgroundGroup:F.addGroup({zIndex:Yp.BG}),middleGroup:F.addGroup({zIndex:Yp.MID}),foregroundGroup:F.addGroup({zIndex:Yp.FORE}),padding:u,appendPadding:c,visible:m,options:S,limitInPlot:C,theme:_,syncViewPadding:T})||this,n.onResize=pm(function(){n.forceFit()},300),n.ele=E,n.canvas=F,n.width=I.width,n.height=I.height,n.autoFit=l,n.localRefresh=p,n.renderer=d,n.wrapperElement=k,n.updateCanvasStyle(),n.bindAutoFit(),n.initDefaultInteractions(w),n}return t.prototype.initDefaultInteractions=function(e){var n=this;G(e,function(i){n.interaction(i)})},t.prototype.aria=function(e){var n="aria-label";e===!1?this.ele.removeAttribute(n):this.ele.setAttribute(n,e.label)},t.prototype.changeSize=function(e,n){return this.width===e&&this.height===n?this:(this.emit(Hr.BEFORE_CHANGE_SIZE),this.width=e,this.height=n,this.canvas.changeSize(e,n),this.render(!0),this.emit(Hr.AFTER_CHANGE_SIZE),this)},t.prototype.clear=function(){r.prototype.clear.call(this),this.aria(!1)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),KXe(this.wrapperElement),this.wrapperElement=null},t.prototype.changeVisible=function(e){return r.prototype.changeVisible.call(this,e),this.wrapperElement.style.display=e?"":"none",this},t.prototype.forceFit=function(){if(!this.destroyed){var e=rZ(this.ele,!0,this.width,this.height),n=e.width,i=e.height;this.changeSize(n,i)}},t.prototype.updateCanvasStyle=function(){Vr(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},t.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},t.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},t}(UQ),og=function(){function r(t){this.visible=!0,this.components=[],this.view=t}return r.prototype.clear=function(t){G(this.components,function(e){e.component.destroy()}),this.components=[]},r.prototype.destroy=function(){this.clear()},r.prototype.getComponents=function(){return this.components},r.prototype.changeVisible=function(t){this.visible!==t&&(this.components.forEach(function(e){t?e.component.show():e.component.hide()}),this.visible=t)},r}();function $Qe(r){for(var t=[],e=function(i){var a=r[i],o=Ps(t,function(s){return s.color===a.color&&s.name===a.name&&s.value===a.value&&s.title===a.title});o||t.push(a)},n=0;n<r.length;n++)e(n);return t}var VQ=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.isLocked=!1,e}return Object.defineProperty(t.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.isVisible=function(){var e=this.view.getOptions().tooltip;return e!==!1},t.prototype.render=function(){},t.prototype.showTooltip=function(e){if(this.point=e,!!this.isVisible()){var n=this.view,i=this.getTooltipItems(e);if(!i.length){this.hideTooltip();return}var a=this.getTitle(i),o={x:i[0].x,y:i[0].y};n.emit("tooltip:show",pi.fromData(n,"tooltip:show",A({items:i,title:a},e)));var s=this.getTooltipCfg(),l=s.follow,u=s.showMarkers,c=s.showCrosshairs,f=s.showContent,d=s.marker,h=this.items,v=this.title;if(!ci(v,a)||!ci(h,i)?(n.emit("tooltip:change",pi.fromData(n,"tooltip:change",A({items:i,title:a},e))),(Kt(f)?f(i):f)&&(this.tooltip||this.renderTooltip(),this.tooltip.update(jt({},s,{items:this.getItemsAfterProcess(i),title:a},l?e:{})),this.tooltip.show()),u&&this.renderTooltipMarkers(i,d)):(this.tooltip&&l&&(this.tooltip.update(e),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=i,this.title=a,c){var p=ae(s,["crosshairs","follow"],!1);this.renderCrosshairs(p?e:o,s)}}},t.prototype.hideTooltip=function(){var e=this.getTooltipCfg().follow;if(!e){this.point=null;return}var n=this.tooltipMarkersGroup;n&&n.hide();var i=this.xCrosshair,a=this.yCrosshair;i&&i.hide(),a&&a.hide();var o=this.tooltip;o&&o.hide(),this.view.emit("tooltip:hide",pi.fromData(this.view,"tooltip:hide",{})),this.point=null},t.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},t.prototype.unlockTooltip=function(){this.isLocked=!1;var e=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(e.capture)},t.prototype.isTooltipLocked=function(){return this.isLocked},t.prototype.clear=function(){var e=this,n=e.tooltip,i=e.xCrosshair,a=e.yCrosshair,o=e.tooltipMarkersGroup;n&&(n.hide(),n.clear()),i&&i.clear(),a&&a.clear(),o&&o.clear(),(n==null?void 0:n.get("customContent"))&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},t.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},t.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},t.prototype.changeVisible=function(e){if(this.visible!==e){var n=this,i=n.tooltip,a=n.tooltipMarkersGroup,o=n.xCrosshair,s=n.yCrosshair;e?(i&&i.show(),a&&a.show(),o&&o.show(),s&&s.show()):(i&&i.hide(),a&&a.hide(),o&&o.hide(),s&&s.hide()),this.visible=e}},t.prototype.getTooltipItems=function(e){var n=this.findItemsFromView(this.view,e);if(n.length){n=No(n);for(var i=0,a=n;i<a.length;i++)for(var o=a[i],s=0,l=o;s<l.length;s++){var u=l[s],c=u.mappingData,f=c.x,d=c.y;u.x=Qe(f)?f[f.length-1]:f,u.y=Qe(d)?d[d.length-1]:d}var h=this.getTooltipCfg().shared;if(h===!1&&n.length>1){for(var v=n[0],p=Math.abs(e.y-v[0].y),g=0,m=n;g<m.length;g++){var y=m[g],b=Math.abs(e.y-y[0].y);b<=p&&(v=y,p=b)}n=[v]}return $Qe(No(n))}return[]},t.prototype.layout=function(){},t.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var e=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}})}},t.prototype.isCursorEntered=function(e){if(this.tooltip){var n=this.tooltip.getContainer(),i=this.tooltip.get("capture");if(n&&i){var a=n.getBoundingClientRect(),o=a.x,s=a.y,l=a.width,u=a.height;return new Po(o,s,l,u).isPointIn(e)}}return!1},t.prototype.getTooltipCfg=function(){var e=this.view,n=e.getOptions().tooltip,i=this.processCustomContent(n),a=e.getTheme(),o=ae(a,["components","tooltip"],{}),s=ae(i,"enterable",o.enterable);return Dt({},o,i,{capture:!!(s||this.isLocked)})},t.prototype.processCustomContent=function(e){if(bu(e)||!ae(e,"customContent"))return e;var n=e.customContent,i=function(a,o){var s=n(a,o)||"";return ot(s)?'<div class="g2-tooltip">'+s+"</div>":s};return A(A({},e),{customContent:i})},t.prototype.getTitle=function(e){var n=e[0].title||e[0].name;return this.title=n,n},t.prototype.renderTooltip=function(){var e=this.view.getCanvas(),n={start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}},i=this.getTooltipCfg(),a=new sQ(A(A({parent:e.get("el").parentNode,region:n},i),{visible:!1,crosshairs:null}));a.init(),this.tooltip=a},t.prototype.renderTooltipMarkers=function(e,n){for(var i=this.getTooltipMarkersGroup(),a=0,o=e;a<o.length;a++){var s=o[a],l=s.x,u=s.y,c=A(A({fill:s.color,symbol:"circle",shadowColor:s.color},n),{x:l,y:u});i.addShape("marker",{attrs:c})}},t.prototype.renderCrosshairs=function(e,n){var i=ae(n,["crosshairs","type"],"x");i==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(e,n)):i==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(e,n)):i==="xy"&&(this.renderXCrosshairs(e,n),this.renderYCrosshairs(e,n))},t.prototype.renderXCrosshairs=function(e,n){var i=this.getViewWithGeometry(this.view).getCoordinate();if(!!AD(i,e)){var a,o;if(i.isRect)i.isTransposed?(a={x:i.start.x,y:e.y},o={x:i.end.x,y:e.y}):(a={x:e.x,y:i.end.y},o={x:e.x,y:i.start.y});else{var s=tg(i,e),l=i.getCenter(),u=i.getRadius();o=ta(l.x,l.y,u,s),a=l}var c=Dt({start:a,end:o,container:this.getTooltipCrosshairsGroup()},ae(n,"crosshairs",{}),this.getCrosshairsText("x",e,n));delete c.type;var f=this.xCrosshair;f?f.update(c):(f=new ZZ(c),f.init()),f.render(),f.show(),this.xCrosshair=f}},t.prototype.renderYCrosshairs=function(e,n){var i=this.getViewWithGeometry(this.view).getCoordinate();if(!!AD(i,e)){var a,o;if(i.isRect){var s=void 0,l=void 0;i.isTransposed?(s={x:e.x,y:i.end.y},l={x:e.x,y:i.start.y}):(s={x:i.start.x,y:e.y},l={x:i.end.x,y:e.y}),a={start:s,end:l},o="Line"}else a={center:i.getCenter(),radius:KC(i,e),startAngle:i.startAngle,endAngle:i.endAngle},o="Circle";a=Dt({container:this.getTooltipCrosshairsGroup()},a,ae(n,"crosshairs",{}),this.getCrosshairsText("y",e,n)),delete a.type;var u=this.yCrosshair;u?i.isRect&&u.get("type")==="circle"||!i.isRect&&u.get("type")==="line"?(u=new QZ[o](a),u.init()):u.update(a):(u=new QZ[o](a),u.init()),u.render(),u.show(),this.yCrosshair=u}},t.prototype.getCrosshairsText=function(e,n,i){var a=ae(i,["crosshairs","text"]),o=ae(i,["crosshairs","follow"]),s=this.items;if(a){var l=this.getViewWithGeometry(this.view),u=s[0],c=l.getXScale(),f=l.getYScales()[0],d=void 0,h=void 0;if(o){var v=this.view.getCoordinate().invert(n);d=c.invert(v.x),h=f.invert(v.y)}else d=u.data[c.field],h=u.data[f.field];var p=e==="x"?d:h;return Kt(a)?a=a(e,p,s,n):a.content=p,{text:a}}},t.prototype.getGuideGroup=function(){if(!this.guideGroup){var e=this.view.foregroundGroup;this.guideGroup=e.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},t.prototype.getTooltipMarkersGroup=function(){var e=this.tooltipMarkersGroup;return e&&!e.destroyed?(e.clear(),e.show()):(e=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),e.toFront(),this.tooltipMarkersGroup=e),e},t.prototype.getTooltipCrosshairsGroup=function(){var e=this.tooltipCrosshairsGroup;return e||(e=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),e.toBack(),this.tooltipCrosshairsGroup=e),e},t.prototype.findItemsFromView=function(e,n){if(e.getOptions().tooltip===!1)return[];for(var i=this.getTooltipCfg(),a=ND(e,n,i),o=0,s=e.views;o<s.length;o++){var l=s[o];a=a.concat(this.findItemsFromView(l,n))}return a},t.prototype.getViewWithGeometry=function(e){var n=this;return e.geometries.length?e:Ps(e.views,function(i){return n.getViewWithGeometry(i)})},t.prototype.getItemsAfterProcess=function(e){var n=this.getTooltipCfg().customItems,i=n||function(a){return a};return i(e)},t}(og),HQ={};function WQ(r){return HQ[r.toLowerCase()]}function xs(r,t){HQ[r.toLowerCase()]=t}var sg={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},zQe={interval:function(r){return{enter:{animation:r.isRect?r.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:r.isPolar&&r.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},jQ={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(r){var t;return r.isRect?t=r.isTransposed?"grow-in-x":"grow-in-y":(t="grow-in-xy",r.isPolar&&r.isTransposed&&(t="wave-in")),{animation:t}},schema:function(r){var t;return r.isRect?t=r.isTransposed?"grow-in-x":"grow-in-y":t="grow-in-xy",{animation:t}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function GQe(r,t){return{delay:Kt(r.delay)?r.delay(t):r.delay,easing:Kt(r.easing)?r.easing(t):r.easing,duration:Kt(r.duration)?r.duration(t):r.duration,callback:r.callback,repeat:r.repeat}}function YQ(r,t,e){var n=zQe[r];return n&&(Kt(n)&&(n=n(t)),n=Dt({},sg,n),e)?n[e]:n}function lg(r,t,e){var n=ae(r.get("origin"),"data",Wn),i=t.animation,a=GQe(t,n);if(i){var o=WQ(i);o&&o(r,a,e)}else r.animate(e.toAttrs,a)}function UQe(r,t,e,n,i){if(jQ[e]){var a=jQ[e](n),o=WQ(ae(a,"animation",""));if(o){var s=A(A(A({},sg.appear),a),t);r.stopAnimate(),o(r,s,{coordinate:n,minYPoint:i,toAttrs:null})}}}var zD="element-background",XQ=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;n.states=[];var i=e.shapeFactory,a=e.container,o=e.offscreenGroup,s=e.elementIndex,l=e.visible,u=l===void 0?!0:l;return n.shapeFactory=i,n.container=a,n.offscreenGroup=o,n.visible=u,n.elementIndex=s,n}return t.prototype.draw=function(e,n){n===void 0&&(n=!1),this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.drawShape(e,n),this.visible===!1&&this.changeVisible(!1)},t.prototype.update=function(e){var n=this,i=n.shapeFactory,a=n.shape;if(!!a){this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.setShapeInfo(a,e);var o=this.getOffscreenGroup(),s=i.drawShape(this.shapeType,e,o);s.cfg.data=this.data,s.cfg.origin=e,s.cfg.element=this,this.syncShapeStyle(a,s,this.getStates(),this.getAnimateCfg("update"))}},t.prototype.destroy=function(){var e=this,n=e.shapeFactory,i=e.shape;if(i){var a=this.getAnimateCfg("leave");a?lg(i,a,{coordinate:n.coordinate,toAttrs:A({},i.attr())}):i.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,r.prototype.destroy.call(this)},t.prototype.changeVisible=function(e){r.prototype.changeVisible.call(this,e),e?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(n){n.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(n){n.hide()}))},t.prototype.setState=function(e,n){var i=this,a=i.states,o=i.shapeFactory,s=i.model,l=i.shape,u=i.shapeType,c=a.indexOf(e);if(n){if(c>-1)return;a.push(e),(e==="active"||e==="selected")&&(l==null||l.toFront())}else{if(c===-1)return;a.splice(c,1),(e==="active"||e==="selected")&&(this.geometry.zIndexReversed?l.setZIndex(this.geometry.elements.length-this.elementIndex):l.setZIndex(this.elementIndex))}var f=o.drawShape(u,s,this.getOffscreenGroup());a.length?this.syncShapeStyle(l,f,a,null):this.syncShapeStyle(l,f,["reset"],null),f.remove(!0);var d={state:e,stateStatus:n,element:this,target:this.container};this.container.emit("statechange",d),NZ(this.shape,"statechange",d)},t.prototype.clearStates=function(){var e=this,n=this.states;G(n,function(i){e.setState(i,!1)}),this.states=[]},t.prototype.hasState=function(e){return this.states.includes(e)},t.prototype.getStates=function(){return this.states},t.prototype.getData=function(){return this.data},t.prototype.getModel=function(){return this.model},t.prototype.getBBox=function(){var e=this,n=e.shape,i=e.labelShape,a={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return n&&(a=n.getCanvasBBox()),i&&i.forEach(function(o){var s=o.getCanvasBBox();a.x=Math.min(s.x,a.x),a.y=Math.min(s.y,a.y),a.minX=Math.min(s.minX,a.minX),a.minY=Math.min(s.minY,a.minY),a.maxX=Math.max(s.maxX,a.maxX),a.maxY=Math.max(s.maxY,a.maxY)}),a.width=a.maxX-a.minX,a.height=a.maxY-a.minY,a},t.prototype.getStatesStyle=function(){if(!this.statesStyle){var e=this,n=e.shapeType,i=e.geometry,a=e.shapeFactory,o=i.stateOption,s=a.defaultShapeType,l=a.theme[n]||a.theme[s];this.statesStyle=Dt({},l,o)}return this.statesStyle},t.prototype.getStateStyle=function(e,n){var i=this.getStatesStyle(),a=ae(i,[e,"style"],{}),o=a[n]||a;return Kt(o)?o(this):o},t.prototype.getAnimateCfg=function(e){var n=this,i=this.animate;if(i){var a=i[e];return a&&A(A({},a),{callback:function(){var o;Kt(a.callback)&&a.callback(),(o=n.geometry)===null||o===void 0||o.emit(Xp.AFTER_DRAW_ANIMATE)}})}return null},t.prototype.drawShape=function(e,n){var i;n===void 0&&(n=!1);var a=this,o=a.shapeFactory,s=a.container,l=a.shapeType;if(this.shape=o.drawShape(l,e,s),this.shape){this.setShapeInfo(this.shape,e);var u=this.shape.cfg.name;u?ot(u)&&(this.shape.cfg.name=["element",u]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var c=n?"enter":"appear",f=this.getAnimateCfg(c);f&&((i=this.geometry)===null||i===void 0||i.emit(Xp.BEFORE_DRAW_ANIMATE),lg(this.shape,f,{coordinate:o.coordinate,toAttrs:A({},this.shape.attr())}))}},t.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},t.prototype.setShapeInfo=function(e,n){var i=this;if(e.cfg.origin=n,e.cfg.element=this,e.isGroup()){var a=e.get("children");a.forEach(function(o){i.setShapeInfo(o,n)})}},t.prototype.syncShapeStyle=function(e,n,i,a,o){var s=this,l;if(i===void 0&&(i=[]),o===void 0&&(o=0),!(!e||!n)){var u=e.get("clipShape"),c=n.get("clipShape");if(this.syncShapeStyle(u,c,i,a),e.isGroup())for(var f=e.get("children"),d=n.get("children"),h=0;h<f.length;h++)this.syncShapeStyle(f[h],d[h],i,a,o+h);else{if(!co(i)&&!ci(i,["reset"])){var v=e.get("name");Qe(v)&&(v=v[1]),G(i,function(g){if(n.get("name")!==zD){var m=s.getStateStyle(g,v||o);n.attr(m)}})}var p=fQ(e,n);this.animate?a?((l=this.geometry)===null||l===void 0||l.emit(Xp.BEFORE_DRAW_ANIMATE),lg(e,a,{coordinate:this.shapeFactory.coordinate,toAttrs:p,shapeModel:this.model})):co(i)?e.attr(p):(e.stopAnimate(),e.animate(p,{duration:300})):e.attr(p)}}},t.prototype.getShapeType=function(e){var n=ae(e,"shape");return Qe(n)?n[0]:n},t}(tD),qQ={},KQ={};function VQe(r){return qQ[r.toLowerCase()]}function tb(r,t){qQ[r.toLowerCase()]=t}function HQe(r){return KQ[r.toLowerCase()]}function qo(r,t){KQ[r.toLowerCase()]=t}var WQe={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(r,t){var e=this.getShape(r);return e.getPoints?e.getPoints(t):this.getDefaultPoints(t)},getShape:function(r){var t=this[r]||this[this.defaultShapeType];return t.coordinate=this.coordinate,t},getDefaultPoints:function(){return[]},getDefaultStyle:function(r){return ae(r,[this.defaultShapeType,"default","style"],{})},getMarker:function(r,t){var e=this.getShape(r);if(!e.getMarker){var n=this.defaultShapeType;e=this.getShape(n)}var i=this.theme,a=ae(i,[r,"default"],{}),o=e.getMarker(t);return Dt({},a,o)},drawShape:function(r,t,e){var n=this.getShape(r);return n.draw(t,e)}},jQe={coordinate:null,parsePath:function(r){var t=this.coordinate,e=jm(r);return t.isPolar?e=iQe(t,e):e=nQe(t,e),e},parsePoint:function(r){var t=this.coordinate;return t.convert(r)},parsePoints:function(r){var t=this.coordinate;return r.map(function(e){return t.convert(e)})},draw:function(r,t){}},GD={};function xf(r,t){var e=ls(r),n=A(A(A({},WQe),t),{geometryType:r});return GD[e]=n,n}function In(r,t,e){var n=ls(r),i=GD[n],a=A(A({},jQe),e);return i[t]=a,a}function ZQ(r){var t=ls(r);return GD[t]}function YQe(r,t,e){if(e===void 0&&(e={}),!t)return[r];var n=cT(r,t),i=[];if(t.length===1&&e[t[0]])for(var a=e[t[0]],o=0,s=a;o<s.length;o++){var l=s[o],u=n["_"+l];u&&i.push(u)}else for(var c in n)if(n.hasOwnProperty(c)){var f=n[c];i.push(f)}return i}function QQ(r,t){return vm(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(e){return!ci(r[e],t[e])})}function rb(r){return Qe(r)?r:r.split("*")}function JQ(r,t){for(var e=[],n=[],i=[],a=new Map,o=0;o<t.length;o++){var s=t[o];r[s]?n.push(s):e.push(s),a.set(s,!0)}return Object.keys(r).forEach(function(l){a.has(l)||i.push(l)}),{added:e,updated:n,removed:i}}function XQe(r,t){var e=[];return G(t,function(n,i){var a=i.split(" ")[0];a===r&&e.push(n)}),e}var wf=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;n.type="base",n.attributes={},n.elements=[],n.elementsMap={},n.animateOption=!0,n.attributeOption={},n.lastElementsMap={},n.generatePoints=!1,n.beforeMappingData=null,n.adjusts={},n.idFields=[],n.hasSorted=!1,n.isCoordinateChanged=!1;var i=e.container,a=e.labelsContainer,o=e.coordinate,s=e.data,l=e.sortable,u=l===void 0?!1:l,c=e.visible,f=c===void 0?!0:c,d=e.theme,h=e.scales,v=h===void 0?{}:h,p=e.scaleDefs,g=p===void 0?{}:p,m=e.intervalPadding,y=e.dodgePadding,b=e.maxColumnWidth,x=e.minColumnWidth,w=e.columnWidthRatio,S=e.roseWidthRatio,C=e.multiplePieWidthRatio,_=e.zIndexReversed;return n.container=i,n.labelsContainer=a,n.coordinate=o,n.data=s,n.sortable=u,n.visible=f,n.userTheme=d,n.scales=v,n.scaleDefs=g,n.intervalPadding=m,n.dodgePadding=y,n.maxColumnWidth=b,n.minColumnWidth=x,n.columnWidthRatio=w,n.roseWidthRatio=S,n.multiplePieWidthRatio=C,n.zIndexReversed=_,n}return t.prototype.position=function(e){var n=e;Ni(e)||(n={fields:rb(e)});var i=ae(n,"fields");return i.length===1&&(i.unshift("1"),Ki(n,"fields",i)),Ki(this.attributeOption,"position",n),this},t.prototype.color=function(e,n){return this.createAttrOption("color",e,n),this},t.prototype.shape=function(e,n){return this.createAttrOption("shape",e,n),this},t.prototype.size=function(e,n){return this.createAttrOption("size",e,n),this},t.prototype.adjust=function(e){var n=e;return(ot(e)||Ni(e))&&(n=[e]),G(n,function(i,a){an(i)||(n[a]={type:i})}),this.adjustOption=n,this},t.prototype.style=function(e,n){if(ot(e)){var i=rb(e);this.styleOption={fields:i,callback:n}}else{var a=e,i=a.fields,o=a.callback,s=a.cfg;i||o||s?this.styleOption=e:this.styleOption={cfg:e}}return this},t.prototype.tooltip=function(e,n){if(ot(e)){var i=rb(e);this.tooltipOption={fields:i,callback:n}}else this.tooltipOption=e;return this},t.prototype.animate=function(e){return this.animateOption=e,this},t.prototype.label=function(e,n,i){if(ot(e)){var a={},o=rb(e);a.fields=o,Kt(n)?a.callback=n:Ni(n)&&(a.cfg=n),i&&(a.cfg=i),this.labelOption=a}else this.labelOption=e;return this},t.prototype.state=function(e){return this.stateOption=e,this},t.prototype.customInfo=function(e){return this.customOption=e,this},t.prototype.init=function(e){e===void 0&&(e={}),this.setCfg(e),this.initAttributes(),this.processData(this.data),this.adjustScale()},t.prototype.update=function(e){e===void 0&&(e={});var n=e.data,i=e.isDataChanged,a=e.isCoordinateChanged,o=this,s=o.attributeOption,l=o.lastAttributeOption;ci(s,l)?n&&(i||!ci(n,this.data))?(this.setCfg(e),this.initAttributes(),this.processData(n)):this.setCfg(e):this.init(e),this.adjustScale(),this.isCoordinateChanged=a},t.prototype.paint=function(e){e===void 0&&(e=!1),this.animateOption&&(this.animateOption=Dt({},YQ(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elementsMap={},this.elements=[];var n=this.getOffscreenGroup();n.clear();var i=this.beforeMappingData,a=this.beforeMapping(i);this.dataArray=new Array(a.length);for(var o=0;o<a.length;o++){var s=a[o];this.dataArray[o]=this.mapping(s)}if(this.updateElements(this.dataArray,e),this.lastElementsMap=this.elementsMap,this.canDoGroupAnimation(e)){var l=this.container,u=this.type,c=this.coordinate,f=ae(this.animateOption,"appear"),d=this.getYScale(),h=c.convert({x:0,y:d.scale(this.getYMinValue())});UQe(l,f,u,c,h)}this.labelOption&&this.renderLabels(No(this.dataArray),e),this.lastAttributeOption=A({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},t.prototype.clear=function(){var e=this,n=e.container,i=e.geometryLabel,a=e.offscreenGroup;n&&n.clear(),i&&i.clear(),a&&a.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},t.prototype.destroy=function(){this.clear();var e=this.container;e.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,r.prototype.destroy.call(this)},t.prototype.getGroupScales=function(){return this.groupScales},t.prototype.getAttribute=function(e){return this.attributes[e]},t.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},t.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},t.prototype.getGroupAttributes=function(){var e=[];return G(this.attributes,function(n){R0.includes(n.type)&&e.push(n)}),e},t.prototype.getDefaultValue=function(e){var n,i=this.getAttribute(e);return i&&co(i.scales)&&(n=i.values[0]),n},t.prototype.getAttributeValues=function(e,n){for(var i=[],a=e.scales,o=0,s=a.length;o<s;o++){var l=a[o],u=l.field;l.isIdentity?i.push(l.values):i.push(n[u])}return e.mapping.apply(e,i)},t.prototype.getAdjust=function(e){return this.adjusts[e]},t.prototype.getCoordinate=function(){return this.coordinate},t.prototype.getData=function(){return this.data},t.prototype.getShapeMarker=function(e,n){var i=this.getShapeFactory();return i.getMarker(e,n)},t.prototype.getElementsBy=function(e){return this.elements.filter(function(n){return e(n)})},t.prototype.getElements=function(){return this.elements},t.prototype.getElementId=function(e){e=Qe(e)?e[0]:e;var n=e[Wn];if(this.idFields.length){for(var i=n[this.idFields[0]],a=1;a<this.idFields.length;a++)i+="-"+n[this.idFields[a]];return i}var o=this.type,s=this.getXScale(),l=this.getYScale(),u=s.field||"x",c=l.field||"y",f=n[c],d;s.type==="identity"?d=s.values[0]:d=n[u];var h;o==="interval"||o==="schema"?h=""+d:o==="line"||o==="area"||o==="path"?h=o:h=d+"-"+f;var v=this.groupScales;co(v)&&(v=ae(this.getAttribute("color"),"scales",[]));for(var a=0,p=v.length;a<p;a++){var g=v[a],m=g.field;h=h+"-"+n[m]}var y=this.getAdjust("dodge");if(y){var b=y.dodgeBy;b&&(h=h+"-"+n[b])}return this.getAdjust("jitter")&&(h=h+"-"+e.x+"-"+e.y),h},t.prototype.getScaleFields=function(){var e=[],n=new Map,i=this,a=i.attributeOption,o=i.labelOption,s=i.tooltipOption;for(var l in a)if(a.hasOwnProperty(l)){var u=a[l];u.fields?yf(u.fields,e,n):u.values&&yf(u.values,e,n)}return o&&o.fields&&yf(o.fields,e,n),an(s)&&s.fields&&yf(s.fields,e,n),e},t.prototype.changeVisible=function(e){r.prototype.changeVisible.call(this,e);for(var n=this.elements,i=0,a=n.length;i<a;i++){var o=n[i];o.changeVisible(e)}e?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},t.prototype.getFields=function(){var e=new Map,n=[];return Object.values(this.attributeOption).forEach(function(i){var a=(i==null?void 0:i.fields)||[];a.forEach(function(o){e.has(o)||n.push(o),e.set(o,!0)})},[]),n},t.prototype.getGroupFields=function(){for(var e=[],n=new Map,i=0,a=R0.length;i<a;i++){var o=R0[i],s=this.attributeOption[o];s&&s.fields&&yf(s.fields,e,n)}return e},t.prototype.getXYFields=function(){var e=this.attributeOption.position.fields,n=e[0],i=e[1];return[n,i]},t.prototype.getXField=function(){return ae(this.getXYFields(),[0])},t.prototype.getYField=function(){return ae(this.getXYFields(),[1])},t.prototype.getShapes=function(){return this.elements.map(function(e){return e.shape})},t.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},t.prototype.sort=function(e){if(!this.hasSorted)for(var n=this.getXScale(),i=n.field,a=0;a<e.length;a++){var o=e[a];o.sort(function(s,l){return n.translate(s[Wn][i])-n.translate(l[Wn][i])})}this.hasSorted=!0},t.prototype.adjustScale=function(){var e=this.getYScale();e&&this.getAdjust("stack")&&this.updateStackRange(e,this.beforeMappingData)},t.prototype.getShapeFactory=function(){var e=this.shapeType;if(!!ZQ(e))return this.shapeFactory||(this.shapeFactory=Or(ZQ(e))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[e]||{},this.shapeFactory},t.prototype.createShapePointsCfg=function(e){var n=this.getXScale(),i=this.getYScale(),a=this.normalizeValues(e[n.field],n),o;return i?o=this.normalizeValues(e[i.field],i):o=e.y?e.y:.1,{x:a,y:o,y0:i?i.scale(this.getYMinValue()):void 0}},t.prototype.createElement=function(e,n,i){i===void 0&&(i=!1);var a=this.container,o=this.getDrawCfg(e),s=this.getShapeFactory(),l=new XQ({shapeFactory:s,container:a,offscreenGroup:this.getOffscreenGroup(),elementIndex:n});return l.animate=this.animateOption,l.geometry=this,l.draw(o,i),l},t.prototype.getDrawCfg=function(e){var n=e[Wn],i={mappingData:e,data:n,x:e.x,y:e.y,color:e.color,size:e.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},a=e.shape;!a&&this.getShapeFactory()&&(a=this.getShapeFactory().defaultShapeType),i.shape=a;var o=this.theme.geometries[this.shapeType];i.defaultStyle=ae(o,[a,"default"],{}).style,!i.defaultStyle&&this.getShapeFactory()&&(i.defaultStyle=this.getShapeFactory().getDefaultStyle(o));var s=this.styleOption;return s&&(i.style=this.getStyleCfg(s,n)),this.generatePoints&&(i.points=e.points,i.nextPoints=e.nextPoints),i},t.prototype.updateElements=function(e,n){n===void 0&&(n=!1);for(var i=new Map,a=[],o=new Map,s=0,l=0;l<e.length;l++)for(var u=e[l],c=0;c<u.length;c++){var f=u[c],d=this.getElementId(f),h=i.has(d)?d+"-"+l+"-"+c:d;a.push(h),i.set(h,f),o.set(h,s),s++}this.elements=new Array(s);for(var v=JQ(this.lastElementsMap,a),p=v.added,g=v.updated,m=v.removed,y=0,b=p;y<b.length;y++){var d=b[y],f=i.get(d),l=o.get(d),x=this.createElement(f,l,n);this.elements[l]=x,this.elementsMap[d]=x,x.shape&&x.shape.setZIndex(this.zIndexReversed?this.elements.length-l:l)}for(var w=0,S=g;w<S.length;w++){var d=S[w],x=this.lastElementsMap[d],f=i.get(d),C=this.getDrawCfg(f),_=x.getModel(),l=o.get(d);(this.isCoordinateChanged||QQ(C,_))&&(x.animate=this.animateOption,x.update(C)),this.elements[l]=x,this.elementsMap[d]=x,x.shape&&x.shape.setZIndex(this.zIndexReversed?this.elements.length-l:l)}for(var T=0,E=m;T<E.length;T++){var d=E[T],x=this.lastElementsMap[d];x.animate=this.animateOption,x.destroy()}},t.prototype.getLabelType=function(){var e=this,n=e.labelOption,i=e.coordinate,a=e.type,o=i.type,s=i.isTransposed,l=ae(n,["cfg","type"]);return l||(o==="polar"?l=s?"pie":"polar":o==="theta"?l="pie":a==="interval"||a==="polygon"?l="interval":l="base"),l},t.prototype.getYMinValue=function(){var e=this.getYScale(),n=e.min,i=e.max,a;return n>=0?a=n:i<=0?a=i:a=0,a},t.prototype.createAttrOption=function(e,n,i){if(nt(n)||an(n))an(n)&&ci(Object.keys(n),["values"])?Ki(this.attributeOption,e,{fields:n.values}):Ki(this.attributeOption,e,n);else{var a={};zt(n)?a.values=[n]:a.fields=rb(n),i&&(Kt(i)?a.callback=i:a.values=i),Ki(this.attributeOption,e,a)}},t.prototype.initAttributes=function(){var e=this,n=this,i=n.attributes,a=n.attributeOption,o=n.theme,s=n.shapeType;this.groupScales=[];var l={},u=function(d){if(a.hasOwnProperty(d)){var h=a[d];if(!h)return{value:void 0};var v=A({},h),p=v.callback,g=v.values,m=v.fields,y=m===void 0?[]:m,b=y.map(function(w){var S=e.scales[w];return S.isCategory&&!l[w]&&R0.includes(d)&&(e.groupScales.push(S),l[w]=!0),S});v.scales=b,d!=="position"&&b.length===1&&b[0].type==="identity"?v.values=b[0].values:!p&&!g&&(d==="size"?v.values=o.sizes:d==="shape"?v.values=o.shapes[s]||[]:d==="color"&&(b.length?v.values=b[0].values.length<=10?o.colors10:o.colors20:v.values=o.colors10));var x=fZ(d);i[d]=new x(v)}};for(var c in a){var f=u(c);if(typeof f=="object")return f.value}},t.prototype.processData=function(e){this.hasSorted=!1;for(var n=this.getAttribute("position").scales,i=n.filter(function(w){return w.isCategory}),a=this.groupData(e),o=[],s=0,l=a.length;s<l;s++){for(var u=a[s],c=[],f=0,d=u.length;f<d;f++){var h=u[f],v={};for(var p in h)v[p]=h[p];v[Wn]=h;for(var g=0,m=i;g<m.length;g++){var y=m[g],b=y.field;v[b]=y.translate(v[b])}c.push(v)}o.push(c)}var x=this.adjustData(o);return this.beforeMappingData=x,x},t.prototype.adjustData=function(e){var n=this.adjustOption,i=this,a=i.intervalPadding,o=i.dodgePadding,s=i.theme,l=this.maxColumnWidth||s.maxColumnWidth,u=this.minColumnWidth||s.minColumnWidth,c=this.columnWidthRatio||s.columnWidthRatio,f=e;if(n){var d=this.getXScale(),h=this.getYScale(),v=d.field,p=h?h.field:null,g=X0(this.coordinate),m=d.values.length,y=this.getAttribute("size"),b=void 0;y&&(b=y.values[0]);for(var x=0,w=n.length;x<w;x++){var S=n[x],C=A({xField:v,yField:p,intervalPadding:a,dodgePadding:o,xDimensionLength:g,groupNum:m,defaultSize:b,maxColumnWidth:l,minColumnWidth:u,columnWidthRatio:c},S),_=S.type;if(_==="dodge"){var T=[];if(d.isCategory||d.type==="identity")T.push("x");else if(!h)T.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");C.adjustNames=T,C.dodgeRatio=c}else if(_==="stack"){var E=this.coordinate;if(!h){C.height=E.getHeight();var k=this.getDefaultValue("size")||3;C.size=k}!E.isTransposed&&nt(C.reverseOrder)&&(C.reverseOrder=!0)}var I=aZ(_),P=new I(C);f=P.process(f),this.adjusts[_]=P}}return f},t.prototype.groupData=function(e){for(var n=this.getGroupScales(),i=this.scaleDefs,a={},o=[],s=0;s<n.length;s++){var l=n[s],u=l.field;o.push(u),ae(i,[u,"values"])&&(a[u]=i[u].values)}return YQe(e,o,a)},t.prototype.updateStackRange=function(e,n){for(var i=No(n),a=e.field,o=e.min,s=e.max,l=0;l<i.length;l++){var u=i[l],c=Math.min.apply(null,u[a]),f=Math.max.apply(null,u[a]);c<o&&(o=c),f>s&&(s=f)}var d=this.scaleDefs,h={};o<e.min&&!ae(d,[a,"min"])&&(h.min=o),s>e.max&&!ae(d,[a,"max"])&&(h.max=s),e.change(h)},t.prototype.beforeMapping=function(e){var n=e;if(this.sortable&&this.sort(n),this.generatePoints)for(var i=0,a=n.length;i<a;i++){var o=n[i];this.generateShapePoints(o);var s=n[i+1];s&&(this.generateShapePoints(s),o[0].nextPoints=s[0].points)}return n},t.prototype.generateShapePoints=function(e){for(var n=this.getShapeFactory(),i=this.getAttribute("shape"),a=0;a<e.length;a++){var o=e[a],s=this.createShapePointsCfg(o),l=i?this.getAttributeValues(i,o):null,u=n.getShapePoints(l,s);o.points=u}},t.prototype.normalizeValues=function(e,n){var i=[];if(Qe(e))for(var a=0;a<e.length;a++){var o=e[a];i.push(n.scale(o))}else i=n.scale(e);return i},t.prototype.mapping=function(e){for(var n=this.attributes,i=[],a=0;a<e.length;a++){var o=e[a],s={_origin:o[Wn],points:o.points,nextPoints:o.nextPoints};for(var l in n)if(n.hasOwnProperty(l)){var u=n[l],c=u.names,f=this.getAttributeValues(u,o);if(c.length>1)for(var d=0;d<f.length;d+=1){var h=f[d],v=c[d];s[v]=Qe(h)&&h.length===1?h[0]:h}else s[c[0]]=f.length===1?f[0]:f}this.convertPoint(s),i.push(s)}return i},t.prototype.convertPoint=function(e){var n=e.x,i=e.y,a,o,s,l=this.coordinate;if(Qe(n)&&Qe(i)){a=[],o=[];for(var u=0,c=0,f=n.length,d=i.length;u<f&&c<d;u+=1,c+=1)s=l.convert({x:n[u],y:i[c]}),a.push(s.x),o.push(s.y)}else if(Qe(i)){o=[];for(var h=0;h<i.length;h++){var v=i[h];s=l.convert({x:n,y:v}),a&&a!==s.x?(Qe(a)||(a=[a]),a.push(s.x)):a=s.x,o.push(s.y)}}else if(Qe(n)){a=[];for(var h=0;h<n.length;h++){var p=n[h];s=l.convert({x:p,y:i}),o&&o!==s.y?(Qe(o)||(o=[o]),o.push(s.y)):o=s.y,a.push(s.x)}}else{var g=l.convert({x:n,y:i});a=g.x,o=g.y}e.x=a,e.y=o},t.prototype.getStyleCfg=function(e,n){var i=e.fields,a=i===void 0?[]:i,o=e.callback,s=e.cfg;if(s)return s;var l=a.map(function(u){return n[u]});return o.apply(void 0,l)},t.prototype.setCfg=function(e){var n=this,i=e.coordinate,a=e.data,o=e.theme,s=e.scaleDefs;i&&(this.coordinate=i),a&&(this.data=a),s&&(this.scaleDefs=s,this.idFields=[],G(s,function(l,u){l&&l.key&&n.idFields.push(u)})),o&&(this.theme=this.userTheme?Dt({},o,this.userTheme):o)},t.prototype.renderLabels=function(e,n){n===void 0&&(n=!1);var i=this.geometryLabel;if(!i){var a=this.getLabelType(),o=VQe(a);i=new o(this),this.geometryLabel=i}i.render(e,n);var s=i.labelsRenderer.shapesMap;G(this.elementsMap,function(l,u){var c=XQe(u,s);if(c.length){l.labelShape=c;for(var f=0;f<c.length;f++)for(var d=c[f],h=d.getChildren(),v=0;v<h.length;v++){var p=h[v];p.cfg.name=["element","label"],p.cfg.element=l}}})},t.prototype.canDoGroupAnimation=function(e){return!e&&this.animateOption&&(ae(this.animateOption,"appear")===void 0||ae(this.animateOption,"appear")&&ae(this.animateOption,["appear","animation"])===void 0)},t}(tD),i2=Zn;function nb(r,t,e){var n=i2(r.getMatrix(),[["t",t,e]]);r.setMatrix(n)}function qQe(r,t){var e=r.attr(),n=e.x,i=e.y,a=i2(r.getMatrix(),[["t",-n,-i],["r",t],["t",n,i]]);return a}function UD(r,t){var e=qQe(r,t);r.setMatrix(e)}function KQe(r,t){var e=r.getBBox(),n=(e.minX+e.maxX)/2,i=(e.minY+e.maxY)/2;r.applyToMatrix([n,i,1]);var a=i2(r.getMatrix(),[["t",-n,-i],["s",t,t],["t",n,i]]);r.setMatrix(a)}function Sf(r){return r.find(function(t){return t.get("type")==="text"})}function VD(r,t,e){e===void 0&&(e=[0,0,0,0]);var n=r.getChildren()[0];if(n){var i=n.clone();(t==null?void 0:t.rotate)&&UD(i,-t.rotate);var a=i.getCanvasBBox(),o=a.x,s=a.y,l=a.width,u=a.height;i.destroy();var c=e;return nt(c)?c=[2,2,2,2]:zt(c)&&(c=new Array(4).fill(c)),{x:o-c[3],y:s-c[0],width:l+c[1]+c[3],height:u+c[0]+c[2],rotation:(t==null?void 0:t.rotate)||0}}}function ZQe(r,t,e){e===void 0&&(e=0);var n=Math.max(0,Math.min(r.x+r.width+e,t.x+t.width+e)-Math.max(r.x-e,t.x-e)),i=Math.max(0,Math.min(r.y+r.height+e,t.y+t.height+e)-Math.max(r.y-e,t.y-e));return n*i}function QQe(r,t){var e=r.getBBox();return vm(t,function(n){var i=n.getBBox();return ZQe(e,i,2)>0})}function eJ(r,t,e){var n=e.data,i=e.origin,a=e.animateCfg,o=e.coordinate,s=ae(a,"update");r.set("data",n),r.set("origin",i),r.set("animateCfg",a),r.set("coordinate",o),r.set("visible",t.get("visible")),r.getChildren().forEach(function(l,u){var c=t.getChildByIndex(u);if(!c)r.removeChild(l),l.remove(!0);else{l.set("data",n),l.set("origin",i),l.set("animateCfg",a),l.set("coordinate",o);var f=fQ(l,c);s?lg(l,s,{toAttrs:f,coordinate:o}):l.attr(f),c.isGroup()&&eJ(l,c,e)}}),G(t.getChildren(),function(l,u){u>=r.getCount()&&(l.destroyed||r.add(l))})}var JQe=function(){function r(t){this.shapesMap={},this.lastShapesMap={};var e=t.layout,n=t.container;this.layout=e,this.container=n}return r.prototype.render=function(t,e,n){var i=this;n===void 0&&(n=!1),this.shapesMap={};var a=this.container,o=this.createOffscreenGroup();if(t.length){for(var s=0,l=t;s<l.length;s++){var u=l[s];u&&this.renderLabel(u,o)}this.doLayout(t,e),this.renderLabelLine(t),this.renderLabelBackground(t),this.adjustLabel(t)}var c=this.lastShapesMap,f=this.shapesMap;G(f,function(d,h){if(d.destroyed)delete f[h];else{if(c[h]){var v=d.get("data"),p=d.get("origin"),g=d.get("coordinate"),m=d.get("animateCfg"),y=c[h];eJ(y,f[h],{data:v,origin:p,animateCfg:m,coordinate:g}),i.shapesMap[h]=y}else{a.add(d);var b=ae(d.get("animateCfg"),n?"enter":"appear");b&&lg(d,b,{toAttrs:A({},d.attr()),coordinate:d.get("coordinate")})}delete c[h]}}),G(c,function(d){var h=ae(d.get("animateCfg"),"leave");h?lg(d,h,{toAttrs:null,coordinate:d.get("coordinate")}):d.remove(!0)}),this.lastShapesMap=f,o.destroy()},r.prototype.clear=function(){this.container.clear(),this.shapesMap={},this.lastShapesMap={}},r.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null,this.lastShapesMap=null},r.prototype.renderLabel=function(t,e){var n=t.id,i=t.elementId,a=t.data,o=t.mappingData,s=t.coordinate,l=t.animate,u=t.content,c={id:n,elementId:i,data:a,origin:A(A({},o),{data:o[Wn]}),coordinate:s},f=e.addGroup(A({name:"label",animateCfg:this.animate===!1||l===null||l===!1?!1:Dt({},this.animate,l)},c)),d;if(u.isGroup&&u.isGroup()||u.isShape&&u.isShape()){var h=u.getCanvasBBox(),v=h.width,p=h.height,g=ae(t,"textAlign","left"),m=t.x,y=t.y-p/2;g==="center"?m=m-v/2:(g==="right"||g==="end")&&(m=m-v),nb(u,m,y),d=u,f.add(u)}else{var b=ae(t,["style","fill"]);d=f.addShape("text",A({attrs:A(A({x:t.x,y:t.y,textAlign:t.textAlign,textBaseline:ae(t,"textBaseline","middle"),text:t.content},t.style),{fill:FB(b)?t.color:b})},c))}t.rotate&&UD(d,t.rotate),this.shapesMap[n]=f},r.prototype.doLayout=function(t,e){var n=this;if(this.layout){var i=Qe(this.layout)?this.layout:[this.layout];G(i,function(a){var o=HQe(ae(a,"type",""));if(o){var s=[],l=[];G(n.shapesMap,function(u,c){s.push(u),l.push(e[u.get("elementId")])}),o(t,s,l,n.region,a.cfg)}})}},r.prototype.renderLabelLine=function(t){var e=this;G(t,function(n){var i=ae(n,"coordinate");if(!(!n||!i)){var a=i.getCenter(),o=i.getRadius();if(!!n.labelLine){var s=ae(n,"labelLine",{}),l=n.id,u=s.path;if(!u){var c=ta(a.x,a.y,o,n.angle);u=[["M",c.x,c.y],["L",n.x,n.y]]}var f=e.shapesMap[l];f.destroyed||f.addShape("path",{capture:!1,attrs:A({path:u,stroke:n.color?n.color:ae(n,["style","fill"],"#000"),fill:null},s.style),id:l,origin:n.mappingData,data:n.data,coordinate:n.coordinate})}}})},r.prototype.renderLabelBackground=function(t){var e=this;G(t,function(n){var i=ae(n,"coordinate"),a=ae(n,"background");if(!(!a||!i)){var o=n.id,s=e.shapesMap[o];if(!s.destroyed){var l=s.getChildren()[0];if(l){var u=VD(s,n,a.padding),c=u.rotation,f=Ur(u,["rotation"]),d=s.addShape("rect",{attrs:A(A({},f),a.style||{}),id:o,origin:n.mappingData,data:n.data,coordinate:n.coordinate});if(d.setZIndex(-1),c){var h=l.getMatrix();d.setMatrix(h)}}}}})},r.prototype.createOffscreenGroup=function(){var t=this.container,e=t.getGroupBase(),n=new e({});return n},r.prototype.adjustLabel=function(t){var e=this;G(t,function(n){if(n){var i=n.id,a=e.shapesMap[i];if(!a.destroyed){var o=a.findAll(function(s){return s.get("type")!=="path"});G(o,function(s){s&&(n.offsetX&&s.attr("x",s.attr("x")+n.offsetX),n.offsetY&&s.attr("y",s.attr("y")+n.offsetY))})}}})},r}();function tJ(r){var t=0;return G(r,function(e){t+=e}),t/r.length}var a2=function(){function r(t){this.geometry=t}return r.prototype.getLabelItems=function(t){var e=this,n=[],i=this.getLabelCfgs(t);return G(t,function(a,o){var s=i[o];if(!s||nt(a.x)||nt(a.y)){n.push(null);return}var l=Qe(s.content)?s.content:[s.content];s.content=l;var u=l.length;G(l,function(c,f){if(nt(c)||c===""){n.push(null);return}var d=A(A({},s),e.getLabelPoint(s,a,f));d.textAlign||(d.textAlign=e.getLabelAlign(d,f,u)),d.offset<=0&&(d.labelLine=null),n.push(d)})}),n},r.prototype.render=function(t,e){e===void 0&&(e=!1);var n=this.getLabelItems(t),i=this.getLabelsRenderer(),a=this.getGeometryShapes();i.render(n,a,e)},r.prototype.clear=function(){var t=this.labelsRenderer;t&&t.clear()},r.prototype.destroy=function(){var t=this.labelsRenderer;t&&t.destroy(),this.labelsRenderer=null},r.prototype.getCoordinate=function(){return this.geometry.coordinate},r.prototype.getDefaultLabelCfg=function(t,e){var n=this.geometry,i=n.type,a=n.theme;return i==="polygon"||i==="interval"&&e==="middle"||t<0&&!["line","point","path"].includes(i)?ae(a,"innerLabels",{}):ae(a,"labels",{})},r.prototype.getThemedLabelCfg=function(t){var e=this.geometry,n=this.getDefaultLabelCfg(),i=e.type,a=e.theme,o;return i==="polygon"||t.offset<0&&!["line","point","path"].includes(i)?o=Dt({},n,a.innerLabels,t):o=Dt({},n,a.labels,t),o},r.prototype.setLabelPosition=function(t,e,n,i){},r.prototype.getLabelOffset=function(t){var e=this.getCoordinate(),n=this.getOffsetVector(t);return e.isTransposed?n[0]:n[1]},r.prototype.getLabelOffsetPoint=function(t,e,n){var i=t.offset,a=this.getCoordinate(),o=a.isTransposed,s=o?"x":"y",l=o?1:-1,u={x:0,y:0};return e>0||n===1?u[s]=i*l:u[s]=i*l*-1,u},r.prototype.getLabelPoint=function(t,e,n){var i=this.getCoordinate(),a=t.content.length;function o(g,m,y){y===void 0&&(y=!1);var b=g;return Qe(b)&&(t.content.length===1?y?b=tJ(b):b.length<=2?b=b[g.length-1]:b=tJ(b):b=b[m]),b}var s={content:t.content[n],x:0,y:0,start:{x:0,y:0},color:"#fff"},l=Qe(e.shape)?e.shape[0]:e.shape,u=l==="funnel"||l==="pyramid";if(this.geometry.type==="polygon"){var c=NZe(e.x,e.y);s.x=c[0],s.y=c[1]}else this.geometry.type==="interval"&&!u?(s.x=o(e.x,n,!0),s.y=o(e.y,n)):(s.x=o(e.x,n),s.y=o(e.y,n));if(u){var f=ae(e,"nextPoints"),d=ae(e,"points");if(f){var h=i.convert(d[1]),v=i.convert(f[1]);s.x=(h.x+v.x)/2,s.y=(h.y+v.y)/2}else if(l==="pyramid"){var h=i.convert(d[1]),v=i.convert(d[2]);s.x=(h.x+v.x)/2,s.y=(h.y+v.y)/2}}t.position&&this.setLabelPosition(s,e,n,t.position);var p=this.getLabelOffsetPoint(t,n,a);return s.start={x:s.x,y:s.y},s.x+=p.x,s.y+=p.y,s.color=e.color,s},r.prototype.getLabelAlign=function(t,e,n){var i="center",a=this.getCoordinate();if(a.isTransposed){var o=t.offset;o<0?i="right":o===0?i="center":i="left",n>1&&e===0&&(i==="right"?i="left":i==="left"&&(i="right"))}return i},r.prototype.getLabelId=function(t){var e=this.geometry,n=e.type,i=e.getXScale(),a=e.getYScale(),o=t[Wn],s=e.getElementId(t);return n==="line"||n==="area"?s+=" "+o[i.field]:n==="path"&&(s+=" "+o[i.field]+"-"+o[a.field]),s},r.prototype.getLabelsRenderer=function(){var t=this.geometry,e=t.labelsContainer,n=t.labelOption,i=t.canvasRegion,a=t.animateOption,o=this.geometry.coordinate,s=this.labelsRenderer;return s||(s=new JQe({container:e,layout:ae(n,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=s),s.region=i,s.animate=a?YQ("label",o):!1,s},r.prototype.getLabelCfgs=function(t){var e=this,n=this.geometry,i=n.labelOption,a=n.scales,o=n.coordinate,s=i,l=s.fields,u=s.callback,c=s.cfg,f=l.map(function(h){return a[h]}),d=[];return G(t,function(h,v){var p=h[Wn],g=e.getLabelText(p,f),m;if(u){var y=l.map(function(C){return p[C]});if(m=u.apply(void 0,y),nt(m)){d.push(null);return}}var b=A(A({id:e.getLabelId(h),elementId:e.geometry.getElementId(h),data:p,mappingData:h,coordinate:o},c),m);Kt(b.position)&&(b.position=b.position(p,h,v));var x=e.getLabelOffset(b.offset||0),w=e.getDefaultLabelCfg(x,b.position);b=Dt({},w,b),b.offset=e.getLabelOffset(b.offset||0);var S=b.content;Kt(S)?b.content=S(p,h,v):_c(S)&&(b.content=g[0]),d.push(b)}),d},r.prototype.getLabelText=function(t,e){var n=[];return G(e,function(i){var a=t[i.field];Qe(a)?a=a.map(function(o){return i.getText(o)}):a=i.getText(a),nt(a)||a===""?n.push(null):n.push(a)}),n},r.prototype.getOffsetVector=function(t){t===void 0&&(t=0);var e=this.getCoordinate(),n=0;return zt(t)&&(n=t),e.isTransposed?e.applyMatrix(n,0):e.applyMatrix(0,n)},r.prototype.getGeometryShapes=function(){var t=this.geometry,e={};return G(t.elementsMap,function(n,i){e[i]=n.shape}),G(t.getOffscreenGroup().getChildren(),function(n){var i=t.getElementId(n.get("origin").mappingData);e[i]=n}),e},r}();function HD(r,t,e){if(!r)return e;var n;if(r.callback&&r.callback.length>1){var i=Array(r.callback.length-1).fill("");n=r.mapping.apply(r,oi([t],i,!1)).join("")}else n=r.mapping(t).join("");return n||e}var wh={hexagon:function(r,t,e){var n=e/2*Math.sqrt(3);return[["M",r,t-e],["L",r+n,t-e/2],["L",r+n,t+e/2],["L",r,t+e],["L",r-n,t+e/2],["L",r-n,t-e/2],["Z"]]},bowtie:function(r,t,e){var n=e-1.5;return[["M",r-e,t-n],["L",r+e,t+n],["L",r+e,t-n],["L",r-e,t+n],["Z"]]},cross:function(r,t,e){return[["M",r-e,t-e],["L",r+e,t+e],["M",r+e,t-e],["L",r-e,t+e]]},tick:function(r,t,e){return[["M",r-e/2,t-e],["L",r+e/2,t-e],["M",r,t-e],["L",r,t+e],["M",r-e/2,t+e],["L",r+e/2,t+e]]},plus:function(r,t,e){return[["M",r-e,t],["L",r+e,t],["M",r,t-e],["L",r,t+e]]},hyphen:function(r,t,e){return[["M",r-e,t],["L",r+e,t]]},line:function(r,t,e){return[["M",r,t-e],["L",r,t+e]]}},eJe=["line","cross","tick","plus","hyphen"];function tJe(r,t){return Kt(t)?t(r):Dt({},r,t)}function rJe(r,t){var e=r.symbol;if(ot(e)&&eJe.indexOf(e)!==-1){var n=ae(r,"style",{}),i=ae(n,"lineWidth",1),a=n.stroke||n.fill||t;r.style=Dt({},r.style,{lineWidth:i,stroke:a,fill:null})}}function rJ(r){var t=r.symbol;ot(t)&&wh[t]&&(r.symbol=wh[t])}function WD(r){return r.startsWith(Wt.LEFT)||r.startsWith(Wt.RIGHT)?"vertical":"horizontal"}function nJ(r,t,e,n,i){var a=e.getScale(e.type);if(a.isCategory){var o=a.field,s=t.getAttribute("color"),l=t.getAttribute("shape"),u=r.getTheme().defaultColor,c=t.coordinate.isPolar;return a.getTicks().map(function(f,d){var h,v=f.text,p=f.value,g=v,m=a.invert(p),y=r.filterFieldData(o,[(h={},h[o]=m,h)]).length===0;G(r.views,function(C){var _;C.filterFieldData(o,[(_={},_[o]=m,_)]).length||(y=!0)});var b=HD(s,m,u),x=HD(l,m,"point"),w=t.getShapeMarker(x,{color:b,isInPolar:c}),S=i;return Kt(S)&&(S=S(g,d,A({name:g,value:m},Dt({},n,w)))),w=Dt({},n,w,Xo(A({},S),["style"])),rJe(w,b),S&&S.style&&(w.style=tJe(w.style,S.style)),rJ(w),{id:m,name:g,value:m,marker:w,unchecked:y}})}return[]}function nJe(r,t,e){return e.map(function(n,i){var a=t;Kt(a)&&(a=a(n.name,i,Dt({},r,n)));var o=Kt(n.marker)?n.marker(n.name,i,Dt({},r,n)):n.marker,s=Dt({},r,a,o);return rJ(s),n.marker=s,n})}function iJ(r,t){var e=ae(r,["components","legend"],{});return Dt({},ae(e,["common"],{}),Dt({},ae(e,[t],{})))}function jD(r){return r?!1:r==null||isNaN(r)}function aJ(r){if(Qe(r))return jD(r[1].y);var t=r.y;return Qe(t)?jD(t[0]):jD(t)}function o2(r,t,e){if(t===void 0&&(t=!1),e===void 0&&(e=!0),!r.length||r.length===1&&!e)return[];if(t){for(var n=[],i=0,a=r.length;i<a;i++){var o=r[i];aJ(o)||n.push(o)}return[n]}for(var s=[],l=[],i=0,a=r.length;i<a;i++){var o=r[i];aJ(o)?l.length&&(l.length===1&&!e||s.push(l),l=[]):l.push(o)}return l.length&&s.push(l),s}function oJ(r){for(var t=[],e=0;e<r.length;e++){var n=r[e];if(n){var i=e===0?"M":"L";t.push([i,n.x,n.y])}}var a=r[0];return a&&(t.push(["L",a.x,a.y]),t.push(["z"])),t}function sJ(r){for(var t=r.length/2,e=[],n=[],i=0;i<r.length;i++)i<t?e.push(r[i]):n.push(r[i]);var a=t2(e,!1),o=t2(n,!1);n.length&&a.push(["L",n[0].x,n[0].y]),o.shift();var s=a.concat(o);return e.length&&s.push(["L",e[0].x,e[0].y]),s.push(["z"]),s}function Hi(r,t,e,n){n===void 0&&(n="");var i=r.style,a=i===void 0?{}:i,o=r.defaultStyle,s=r.color,l=r.size,u=A(A({},o),a);return s&&(t&&(a.stroke||(u.stroke=s)),e&&(a.fill||(u.fill=s))),n&&nt(a[n])&&!nt(l)&&(u[n]=l),u}function lJ(r){return Dt({},{fill:"#CCD6EC",fillOpacity:.3},ae(r,["background","style"]))}function YD(r){var t=r.x,e=Qe(r.y)?r.y:[r.y];return e.map(function(n,i){return{x:Qe(t)?t[i]:t,y:n}})}var iJe={line:function(r,t,e){return[["M",r-e,t],["L",r+e,t]]},dot:function(r,t,e){return[["M",r-e,t],["L",r+e,t]]},dash:function(r,t,e){return[["M",r-e,t],["L",r+e,t]]},smooth:function(r,t,e){return[["M",r-e,t],["A",e/2,e/2,0,1,1,r,t],["A",e/2,e/2,0,1,0,r+e,t]]},hv:function(r,t,e){return[["M",r-e-1,t-2.5],["L",r,t-2.5],["L",r,t+2.5],["L",r+e+1,t+2.5]]},vh:function(r,t,e){return[["M",r-e-1,t+2.5],["L",r,t+2.5],["L",r,t-2.5],["L",r+e+1,t-2.5]]},hvh:function(r,t,e){return[["M",r-(e+1),t+2.5],["L",r-e/2,t+2.5],["L",r-e/2,t-2.5],["L",r+e/2,t-2.5],["L",r+e/2,t+2.5],["L",r+e+1,t+2.5]]},vhv:function(r,t){return[["M",r-5,t+2.5],["L",r-5,t],["L",r,t],["L",r,t-3],["L",r,t+3],["L",r+6.5,t+3]]}};function uJ(r,t){var e=r.color;return{symbol:iJe[t],style:{lineWidth:2,r:6,stroke:e}}}function aJe(r,t,e){for(var n=r.isStack,i=r.connectNulls,a=r.isInCircle,o=r.showSinglePoint,s=Hi(r,!0,!1,"lineWidth"),l=o2(r.points,i,o),u=[],c=0,f=l.length;c<f;c++){var d=l[c];u=u.concat(cJ(d,a,n,t,e,s))}return s.path=u,s}function XD(r,t,e,n,i){if(r.length===1)return[["M",r[0].x,r[0].y-i.lineWidth/2],["L",r[0].x,r[0].y],["L",r[0].x,r[0].y+i.lineWidth/2]];var a;return e?(t&&r.length&&r.push({x:r[0].x,y:r[0].y}),a=t2(r,!1,n)):(a=K0(r,!1),t&&a.push(["Z"])),a}function oJe(r,t,e,n,i,a){var o=[],s=[];G(r,function(c){var f=YD(c);o.push(f[1]),s.push(f[0])});var l=XD(o,t,n,i,a),u=XD(s,t,n,i,a);return e?l:l.concat(u)}function cJ(r,t,e,n,i,a){if(r.length){var o=r[0];return Qe(o.y)?oJe(r,t,e,n,i,a):XD(r,t,n,i,a)}return[]}xf("line",{defaultShapeType:"line"});G(["line","dot","dash","smooth"],function(r){In("line",r,{draw:function(t,e){var n=r==="smooth",i;if(n){var a=this.coordinate,o=a.start,s=a.end;i=[[o.x,s.y],[s.x,o.y]]}var l=aJe(t,n,i),u=e.addShape({type:"path",attrs:l,name:"line",capture:!n});return u},getMarker:function(t){return uJ(t,r)}})});var Ko={getLegendItems:nJ,translate:nb,rotate:UD,zoom:KQe,transform:i2,getAngle:Y0,getSectorPath:mf,polarToCartesian:ta,getDelegationObject:ig,getTooltipItems:FD,getMappingValue:HD,getPath:cJ,getPathPoints:o2},Sh={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},jn={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},vl=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],sJe=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],lJe=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],uJe=function(r){r===void 0&&(r={});var t=r.backgroundColor,e=t===void 0?"#141414":t,n=r.subColor,i=n===void 0?"rgba(255,255,255,0.05)":n,a=r.paletteQualitative10,o=a===void 0?vl:a,s=r.paletteQualitative20,l=s===void 0?sJe:s,u=r.paletteSemanticRed,c=u===void 0?"#F4664A":u,f=r.paletteSemanticGreen,d=f===void 0?"#30BF78":f,h=r.paletteSemanticYellow,v=h===void 0?"#FAAD14":h,p=r.paletteSequence,g=p===void 0?lJe:p,m=r.fontFamily,y=m===void 0?`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:m,b=r.brandColor,x=b===void 0?o[0]:b;return{backgroundColor:e,brandColor:x,subColor:i,paletteQualitative10:o,paletteQualitative20:l,paletteSemanticRed:c,paletteSemanticGreen:d,paletteSemanticYellow:v,paletteSequence:g,fontFamily:y,axisLineBorderColor:jn[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:jn[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:jn[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:jn[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:jn[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:jn[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:jn[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:vl[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:jn[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:jn[45],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:jn[45],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:jn[65],legendPageNavigatorTextFontSize:12,sliderRailFillColor:jn[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:jn[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Sh[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Sh[25],annotationArcBorderColor:jn[15],annotationArcBorder:1,annotationLineBorderColor:jn[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:jn[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:jn[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:jn[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:jn[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:jn[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Sh[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:jn[65],overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Sh[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:jn[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:vl[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Sh[100],pointBorderOpacity:1,pointActiveBorderColor:jn[100],pointSelectedBorder:2,pointSelectedBorderColor:jn[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:vl[0],hollowPointBorderOpacity:.95,hollowPointFillColor:Sh[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:jn[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:jn[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:vl[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:vl[0],areaFillOpacity:.25,areaActiveFillColor:vl[0],areaActiveFillOpacity:.5,areaSelectedFillColor:vl[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:vl[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:jn[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:jn[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:vl[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:jn[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:jn[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:vl[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Sh[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:jn[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:jn[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}},cJe=uJe(),qD=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;n.type="path",n.shapeType="line";var i=e.connectNulls,a=i===void 0?!1:i,o=e.showSinglePoint,s=o===void 0?!0:o;return n.connectNulls=a,n.showSinglePoint=s,n}return t.prototype.updateElements=function(e,n){n===void 0&&(n=!1);for(var i=new Map,a=new Map,o=[],s=0,l=0;l<e.length;l++){var u=e[l],c=this.getElementId(u);o.push(c),i.set(c,u),a.set(c,s),s++}this.elements=new Array(s);for(var f=JQ(this.lastElementsMap,o),d=f.added,h=f.updated,v=f.removed,p=0,g=d;p<g.length;p++){var c=g[p],u=i.get(c),m=this.getShapeFactory(),y=this.getShapeInfo(u),l=a.get(c),b=new XQ({shapeFactory:m,container:this.container,offscreenGroup:this.getOffscreenGroup(),elementIndex:l});b.geometry=this,b.animate=this.animateOption,b.draw(y,n),this.elementsMap[c]=b,this.elements[l]=b}for(var x=0,w=h;x<w.length;x++){var c=w[x],u=i.get(c),b=this.lastElementsMap[c],l=a.get(c),y=this.getShapeInfo(u),S=b.getModel();(this.isCoordinateChanged||QQ(S,y))&&(b.animate=this.animateOption,b.update(y)),this.elementsMap[c]=b,this.elements[l]=b}for(var C=0,_=v;C<_.length;C++){var c=_[C],b=this.lastElementsMap[c];b.animate=this.animateOption,b.destroy()}},t.prototype.getPointsAndData=function(e){for(var n=[],i=[],a=0,o=e.length;a<o;a++){var s=e[a];n.push({x:s.x,y:s.y}),i.push(s[Wn])}return{points:n,data:i}},t.prototype.getShapeInfo=function(e){var n=this.getDrawCfg(e[0]),i=this.getPointsAndData(e),a=i.points,o=i.data;return n.mappingData=e,n.data=o,n.isStack=!!this.getAdjust("stack"),n.points=a,n.connectNulls=this.connectNulls,n.showSinglePoint=this.showSinglePoint,n},t}(wf);function fJe(r,t,e,n,i){var a=[];if(r.length){for(var o=[],s=[],l=0,u=r.length;l<u;l++){var c=r[l];o.push(c[1]),s.push(c[0])}s=s.reverse(),G([o,s],function(f,d){var h=[],v=n.parsePoints(f),p=v[0];o.length===1&&s.length===1?h=d===0?[["M",p.x-.5,p.y],["L",p.x+.5,p.y]]:[["L",p.x+.5,p.y],["L",p.x-.5,p.y]]:(t&&v.push({x:p.x,y:p.y}),e?h=t2(v,!1,i):h=K0(v,!1),d>0&&(h[0][0]="L")),a=a.concat(h)}),a.push(["Z"])}return a}function s2(r,t,e,n,i){for(var a=Hi(r,t,!t,"lineWidth"),o=r.connectNulls,s=r.isInCircle,l=r.points,u=r.showSinglePoint,c=o2(l,o,u),f=[],d=0,h=c.length;d<h;d++){var v=c[d];f=f.concat(fJe(v,s,e,n,i))}return a.path=f,a}function fJ(r){var t=r.start,e=r.end;return[[t.x,e.y],[e.x,t.y]]}xf("area",{defaultShapeType:"area",getDefaultPoints:function(r){var t=r.x,e=r.y0,n=Qe(r.y)?r.y:[e,r.y];return n.map(function(i){return{x:t,y:i}})}});In("area","area",{draw:function(r,t){var e=s2(r,!1,!1,this),n=t.addShape({type:"path",attrs:e,name:"area"});return n},getMarker:function(r){var t=r.color;return{symbol:function(e,n,i){return i===void 0&&(i=5.5),[["M",e-i,n-4],["L",e+i,n-4],["L",e+i,n+4],["L",e-i,n+4],["Z"]]},style:{r:5,fill:t}}}});var dJe=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;n.type="area",n.shapeType="area",n.generatePoints=!0,n.startOnZero=!0;var i=e.startOnZero,a=i===void 0?!0:i,o=e.sortable,s=o===void 0?!1:o,l=e.showSinglePoint,u=l===void 0?!1:l;return n.startOnZero=a,n.sortable=s,n.showSinglePoint=u,n}return t.prototype.getPointsAndData=function(e){for(var n=[],i=[],a=0,o=e.length;a<o;a++){var s=e[a];n.push(s.points),i.push(s[Wn])}return{points:n,data:i}},t.prototype.getYMinValue=function(){if(this.startOnZero)return r.prototype.getYMinValue.call(this);var e=this.getYScale();return e.min},t}(qD);xf("edge",{defaultShapeType:"line",getDefaultPoints:function(r){return YD(r)}});In("edge","line",{draw:function(r,t){var e=Hi(r,!0,!1,"lineWidth"),n=K0(this.parsePoints(r.points),this.coordinate.isPolar);return t.addShape("path",{attrs:A(A({},e),{path:n})})},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});var hJe=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="edge",e.shapeType="edge",e.generatePoints=!0,e}return t}(wf),vJe=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="heatmap",e.paletteCache={},e}return t.prototype.updateElements=function(e,n){for(var i=0;i<e.length;i++){var a=e[i],o=this.prepareRange(a),s=this.prepareSize(),l=ae(this.styleOption,["cfg","shadowBlur"]);zt(l)||(l=s/2),this.prepareGreyScaleBlurredCircle(s,l),this.drawWithRange(a,o,s,l)}},t.prototype.color=function(e,n){return this.createAttrOption("color",e,typeof n!="function"?n:""),this},t.prototype.clear=function(){r.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},t.prototype.prepareRange=function(e){var n=this.getAttribute("color"),i=n.getFields()[0],a=1/0,o=-1/0;return e.forEach(function(s){var l=s[Wn][i];l>o&&(o=l),l<a&&(a=l)}),a===o&&(a=o-1),[a,o]},t.prototype.prepareSize=function(){var e=this.getDefaultValue("size");return zt(e)||(e=this.getDefaultSize()),e},t.prototype.prepareGreyScaleBlurredCircle=function(e,n){var i=this.getGrayScaleBlurredCanvas(),a=e+n,o=i.getContext("2d");i.width=i.height=a*2,o.clearRect(0,0,i.width,i.height),o.shadowOffsetX=o.shadowOffsetY=a*2,o.shadowBlur=n,o.shadowColor="black",o.beginPath(),o.arc(-a,-a,e,0,Math.PI*2,!0),o.closePath(),o.fill()},t.prototype.drawWithRange=function(e,n,i,a){var o=this.coordinate,s=o.start,l=o.end,u=this.coordinate.getWidth(),c=this.coordinate.getHeight(),f=this.getAttribute("color"),d=f.getFields()[0];this.clearShadowCanvasCtx();var h=this.getShadowCanvasCtx();n&&(e=e.filter(function(_){return _[Wn][d]<=n[1]&&_[Wn][d]>=n[0]}));for(var v=this.scales[d],p=0,g=e;p<g.length;p++){var m=g[p],y=this.getDrawCfg(m),b=y.x,x=y.y,w=v.scale(m[Wn][d]);this.drawGrayScaleBlurredCircle(b-s.x,x-l.y,i+a,w,h)}var S=h.getImageData(0,0,u,c);this.clearShadowCanvasCtx(),this.colorize(S),h.putImageData(S,0,0);var C=this.getImageShape();C.attr("x",s.x),C.attr("y",l.y),C.attr("width",u),C.attr("height",c),C.attr("img",h.canvas),C.set("origin",this.getShapeInfo(e))},t.prototype.getDefaultSize=function(){var e=this.getAttribute("position"),n=this.coordinate;return Math.min(n.getWidth()/(e.scales[0].ticks.length*4),n.getHeight()/(e.scales[1].ticks.length*4))},t.prototype.clearShadowCanvasCtx=function(){var e=this.getShadowCanvasCtx();e.clearRect(0,0,e.canvas.width,e.canvas.height)},t.prototype.getShadowCanvasCtx=function(){var e=this.shadowCanvas;return e||(e=document.createElement("canvas"),this.shadowCanvas=e),e.width=this.coordinate.getWidth(),e.height=this.coordinate.getHeight(),e.getContext("2d")},t.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},t.prototype.drawGrayScaleBlurredCircle=function(e,n,i,a,o){var s=this.getGrayScaleBlurredCanvas();o.globalAlpha=a,o.drawImage(s,e-i,n-i)},t.prototype.colorize=function(e){for(var n=this.getAttribute("color"),i=e.data,a=this.paletteCache,o=3;o<i.length;o+=4){var s=i[o];if(zt(s)){var l=a[s]?a[s]:gf.rgb2arr(n.gradient(s/256));i[o-3]=l[0],i[o-2]=l[1],i[o-1]=l[2],i[o]=s}}},t.prototype.getImageShape=function(){var e=this.imageShape;if(e)return e;var n=this.container;return e=n.addShape({type:"image",attrs:{}}),this.imageShape=e,e},t.prototype.getShapeInfo=function(e){var n=this.getDrawCfg(e[0]),i=e.map(function(a){return a[Wn]});return A(A({},n),{mappingData:e,data:i})},t}(wf);function KD(r){var t=r.x,e=r.y,n=r.y0,i=r.size,a,o;Qe(e)?(a=e[0],o=e[1]):(a=n,o=e);var s,l;Qe(t)?(s=t[0],l=t[1]):(s=t-i/2,l=t+i/2);var u=[{x:s,y:a},{x:s,y:o}];return u.push({x:l,y:o},{x:l,y:a}),u}function ZD(r,t){t===void 0&&(t=!0);var e=[],n=r[0];e.push(["M",n.x,n.y]);for(var i=1,a=r.length;i<a;i++)e.push(["L",r[i].x,r[i].y]);return t&&(e.push(["L",n.x,n.y]),e.push(["z"])),e}function ib(r,t){var e=0,n=0,i=0,a=0;return Qe(r)?r.length===1?e=n=i=a=r[0]:r.length===2?(e=i=r[0],n=a=r[1]):r.length===3?(e=r[0],n=a=r[1],i=r[2]):(e=r[0],n=r[1],i=r[2],a=r[3]):e=n=i=a=r,e+n>t&&(e=e?t/(1+n/e):0,n=t-e),i+a>t&&(i=i?t/(1+a/i):0,a=t-i),[e||0,n||0,i||0,a||0]}function dJ(r,t,e){var n=[];if(e.isRect){var i=e.isTransposed?{x:e.start.x,y:t[0].y}:{x:t[0].x,y:e.start.y},a=e.isTransposed?{x:e.end.x,y:t[2].y}:{x:t[3].x,y:e.end.y},o=ae(r,["background","style","radius"]);if(o){var s=e.isTransposed?Math.abs(t[0].y-t[2].y):t[2].x-t[1].x,l=e.isTransposed?e.getWidth():e.getHeight(),u=ib(o,Math.min(s,l)),c=u[0],f=u[1],d=u[2],h=u[3];n.push(["M",i.x,a.y+c]),c!==0&&n.push(["A",c,c,0,0,1,i.x+c,a.y]),n.push(["L",a.x-f,a.y]),f!==0&&n.push(["A",f,f,0,0,1,a.x,a.y+f]),n.push(["L",a.x,i.y-d]),d!==0&&n.push(["A",d,d,0,0,1,a.x-d,i.y]),n.push(["L",i.x+h,i.y]),h!==0&&n.push(["A",h,h,0,0,1,i.x,i.y-h])}else n.push(["M",i.x,i.y]),n.push(["L",a.x,i.y]),n.push(["L",a.x,a.y]),n.push(["L",i.x,a.y]),n.push(["L",i.x,i.y]);n.push(["z"])}if(e.isPolar){var v=e.getCenter(),p=Y0(r,e),g=p.startAngle,m=p.endAngle;if(e.type!=="theta"&&!e.isTransposed)n=mf(v.x,v.y,e.getRadius(),g,m);else{var y=function(w){return Math.pow(w,2)},c=Math.sqrt(y(v.x-t[0].x)+y(v.y-t[0].y)),f=Math.sqrt(y(v.x-t[2].x)+y(v.y-t[2].y));n=mf(v.x,v.y,c,e.startAngle,e.endAngle,f)}}return n}function pJe(r,t,e){var n=e.getWidth(),i=e.getHeight(),a=e.type==="rect",o=[],s=(r[2].x-r[1].x)/2,l=e.isTransposed?s*i/n:s*n/i;return t==="round"?(a?(o.push(["M",r[0].x,r[0].y+l]),o.push(["L",r[1].x,r[1].y-l]),o.push(["A",s,s,0,0,1,r[2].x,r[2].y-l]),o.push(["L",r[3].x,r[3].y+l]),o.push(["A",s,s,0,0,1,r[0].x,r[0].y+l])):(o.push(["M",r[0].x,r[0].y]),o.push(["L",r[1].x,r[1].y]),o.push(["A",s,s,0,0,1,r[2].x,r[2].y]),o.push(["L",r[3].x,r[3].y]),o.push(["A",s,s,0,0,1,r[0].x,r[0].y])),o.push(["z"])):o=ZD(r),o}function hJ(r,t,e){var n=[];return nt(t)?e?n.push(["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["L",(r[2].x+r[3].x)/2,(r[2].y+r[3].y)/2],["Z"]):n.push(["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["L",r[2].x,r[2].y],["L",r[3].x,r[3].y],["Z"]):n.push(["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["L",t[1].x,t[1].y],["L",t[0].x,t[0].y],["Z"]),n}function gJe(r,t,e){var n,i,a,o,s=r[0],l=r[1],u=r[2],c=r[3],f=[0,0,0,0],d=f[0],h=f[1],v=f[2],p=f[3];s.y<l.y?(l=r[0],s=r[1],c=r[2],u=r[3],n=ib(e,Math.min(c.x-s.x,s.y-l.y)),p=n[0],v=n[1],h=n[2],d=n[3]):(i=ib(e,Math.min(c.x-s.x,s.y-l.y)),d=i[0],h=i[1],v=i[2],p=i[3]),t.isTransposed&&(s=r[0],c=r[1],u=r[2],l=r[3],r[0].x>r[1].x?(c=r[0],s=r[1],l=r[2],u=r[3],a=ib(e,Math.min(c.x-s.x,s.y-l.y)),d=a[0],p=a[1],v=a[2],h=a[3]):(o=ib(e,Math.min(c.x-s.x,s.y-l.y)),h=o[0],v=o[1],p=o[2],d=o[3]));var g=[];return g.push(["M",l.x,l.y+d]),d!==0&&g.push(["A",d,d,0,0,1,l.x+d,l.y]),g.push(["L",u.x-h,u.y]),h!==0&&g.push(["A",h,h,0,0,1,u.x,u.y+h]),g.push(["L",c.x,c.y-v]),v!==0&&g.push(["A",v,v,0,0,1,c.x-v,c.y]),g.push(["L",s.x+p,s.y]),p!==0&&g.push(["A",p,p,0,0,1,s.x,s.y-p]),g.push(["L",l.x,l.y+d]),g.push(["z"]),g}xf("interval",{defaultShapeType:"rect",getDefaultPoints:function(r){return KD(r)}});In("interval","rect",{draw:function(r,t){var e=Hi(r,!1,!0),n=t,i=r==null?void 0:r.background;if(i){n=t.addGroup();var a=lJ(r),o=dJ(r,this.parsePoints(r.points),this.coordinate);n.addShape("path",{attrs:A(A({},a),{path:o}),zIndex:-1,name:zD})}var s;e.radius&&this.coordinate.isRect?s=gJe(this.parsePoints(r.points),this.coordinate,e.radius):s=this.parsePath(pJe(r.points,e.lineCap,this.coordinate));var l=n.addShape("path",{attrs:A(A({},e),{path:s}),name:"interval"});return i?n:l},getMarker:function(r){var t=r.color,e=r.isInPolar;return e?{symbol:"circle",style:{r:4.5,fill:t}}:{symbol:"square",style:{r:4,fill:t}}}});function mJe(r,t){var e=r.length,n=r;ot(n[0])&&(n=r.map(function(s){return t.translate(s)}));for(var i=n[1]-n[0],a=2;a<e;a++){var o=n[a]-n[a-1];i>o&&(i=o)}return i}function yJe(r,t){if(t){var e=No(r),n=Ds(e,t);return n.length}return r.length}function QD(r){var t=r.theme,e=r.coordinate,n=r.getXScale(),i=n.values,a=r.beforeMappingData,o=i.length,s=X0(r.coordinate),l=r.intervalPadding,u=r.dodgePadding,c=r.maxColumnWidth||t.maxColumnWidth,f=r.minColumnWidth||t.minColumnWidth,d=r.columnWidthRatio||t.columnWidthRatio,h=r.multiplePieWidthRatio||t.multiplePieWidthRatio,v=r.roseWidthRatio||t.roseWidthRatio;if(n.isLinear&&i.length>1){i.sort();var p=mJe(i,n);o=(n.max-n.min)/p,i.length>o&&(o=i.length)}var g=n.range,m=1/o,y=1;if(e.isPolar?e.isTransposed&&o>1?y=h:y=v:(n.isLinear&&(m*=g[1]-g[0]),y=d),!nt(l)&&l>=0){var b=l/s;m=(1-(o-1)*b)/o}else m*=y;if(r.getAdjust("dodge")){var x=r.getAdjust("dodge"),w=x.dodgeBy,S=yJe(a,w);if(!nt(u)&&u>=0){var C=u/s;m=(m-C*(S-1))/S}else!nt(l)&&l>=0&&(m*=y),m=m/S;m=m>=0?m:0}if(!nt(c)&&c>=0){var _=c/s;m>_&&(m=_)}if(!nt(f)&&f>=0){var T=f/s;m<T&&(m=T)}return m}var bJe=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;n.type="interval",n.shapeType="interval",n.generatePoints=!0;var i=e.background;return n.background=i,n}return t.prototype.createShapePointsCfg=function(e){var n=r.prototype.createShapePointsCfg.call(this,e),i,a=this.getAttribute("size");if(a){i=this.getAttributeValues(a,e)[0];var o=this.coordinate,s=X0(o);i=i/s}else this.defaultSize||(this.defaultSize=QD(this)),i=this.defaultSize;return n.size=i,n},t.prototype.adjustScale=function(){r.prototype.adjustScale.call(this);var e=this.getYScale();if(this.coordinate.type==="theta")e.change({nice:!1,min:0,max:jZe(e)});else{var n=this.scaleDefs,i=e.field,a=e.min,o=e.max,s=e.type;s!=="time"&&(a>0&&!ae(n,[i,"min"])&&e.change({min:0}),o<=0&&!ae(n,[i,"max"])&&e.change({max:0}))}},t.prototype.getDrawCfg=function(e){var n=r.prototype.getDrawCfg.call(this,e);return n.background=this.background,n},t}(wf),xJe=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;n.type="line";var i=e.sortable,a=i===void 0?!1:i;return n.sortable=a,n}return t}(qD),vJ=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],wJe=["cross","tick","plus","hyphen","line"];function JD(r,t,e,n,i){var a=Hi(t,i,!i,"r"),o=r.parsePoints(t.points),s=o[0];if(t.isStack)s=o[1];else if(o.length>1){for(var l=e.addGroup(),u=0,c=o;u<c.length;u++){var f=c[u];l.addShape({type:"marker",attrs:A(A(A({},a),{symbol:wh[n]||n}),f)})}return l}return e.addShape({type:"marker",attrs:A(A(A({},a),{symbol:wh[n]||n}),s)})}xf("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(r){return YD(r)}});G(vJ,function(r){In("point","hollow-"+r,{draw:function(t,e){return JD(this,t,e,r,!0)},getMarker:function(t){var e=t.color;return{symbol:wh[r]||r,style:{r:4.5,stroke:e,fill:null}}}})});var SJe=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="point",e.shapeType="point",e.generatePoints=!0,e}return t.prototype.getDrawCfg=function(e){var n=r.prototype.getDrawCfg.call(this,e);return A(A({},n),{isStack:!!this.getAdjust("stack")})},t}(wf);function CJe(r){for(var t=r[0],e=1,n=[["M",t.x,t.y]];e<r.length;){var i=r[e];(i.x!==r[e-1].x||i.y!==r[e-1].y)&&(n.push(["L",i.x,i.y]),i.x===t.x&&i.y===t.y&&e<r.length-1&&(t=r[e+1],n.push(["Z"]),n.push(["M",t.x,t.y]),e++)),e++}return ci(qi(n),t)||n.push(["L",t.x,t.y]),n.push(["Z"]),n}xf("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(r){var t=[];return G(r.x,function(e,n){var i=r.y[n];t.push({x:e,y:i})}),t}});In("polygon","polygon",{draw:function(r,t){if(!co(r.points)){var e=Hi(r,!0,!0),n=this.parsePath(CJe(r.points));return t.addShape("path",{attrs:A(A({},e),{path:n}),name:"polygon"})}},getMarker:function(r){var t=r.color;return{symbol:"square",style:{r:4,fill:t}}}});var EJe=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="polygon",e.shapeType="polygon",e.generatePoints=!0,e}return t.prototype.createShapePointsCfg=function(e){var n=r.prototype.createShapePointsCfg.call(this,e),i=n.x,a=n.y,o;if(!(Qe(i)&&Qe(a))){var s=this.getXScale(),l=this.getYScale(),u=s.values.length,c=l.values.length,f=.5*1/u,d=.5*1/c;s.isCategory&&l.isCategory?(i=[i-f,i-f,i+f,i+f],a=[a-d,a+d,a+d,a-d]):Qe(i)?(o=i,i=[o[0],o[0],o[1],o[1]],a=[a-d/2,a+d/2,a+d/2,a-d/2]):Qe(a)&&(o=a,a=[o[0],o[1],o[1],o[0]],i=[i-f/2,i-f/2,i+f/2,i+f/2]),n.x=i,n.y=a}return n},t}(wf);xf("schema",{defaultShapeType:""});var _Je=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="schema",e.shapeType="schema",e.generatePoints=!0,e}return t.prototype.createShapePointsCfg=function(e){var n=r.prototype.createShapePointsCfg.call(this,e),i,a=this.getAttribute("size");if(a){i=this.getAttributeValues(a,e)[0];var o=this.coordinate,s=X0(o);i=i/s}else this.defaultSize||(this.defaultSize=QD(this)),i=this.defaultSize;return n.size=i,n},t}(wf);function TJe(r){if(!Qe(r))return[];var t=Xi(r);return Kn(r,function(e){return e/t})}xf("violin",{defaultShapeType:"violin",getDefaultPoints:function(r){var t=r.size/2,e=[],n=TJe(r._size);return G(r.y,function(i,a){var o=n[a]*t,s=a===0,l=a===r.y.length-1;e.push({isMin:s,isMax:l,x:r.x-o,y:i}),e.unshift({isMin:s,isMax:l,x:r.x+o,y:i})}),e}});In("violin","violin",{draw:function(r,t){var e=Hi(r,!0,!0),n=this.parsePath(oJ(r.points));return t.addShape("path",{attrs:A(A({},e),{path:n}),name:"violin"})},getMarker:function(r){var t=r.color;return{symbol:"circle",style:{r:4,fill:t}}}});var AJe=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="violin",e.shapeType="violin",e.generatePoints=!0,e}return t.prototype.createShapePointsCfg=function(e){var n=r.prototype.createShapePointsCfg.call(this,e),i,a=this.getAttribute("size");if(a){i=this.getAttributeValues(a,e)[0];var o=this.coordinate,s=X0(o);i=i/s}else this.defaultSize||(this.defaultSize=QD(this)),i=this.defaultSize;return n.size=i,n._size=ae(e[Wn],[this._sizeField]),n},t.prototype.initAttributes=function(){var e=this.attributeOption,n=e.size?e.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=n,delete e.size,r.prototype.initAttributes.call(this)},t}(wf);In("area","line",{draw:function(r,t){var e=s2(r,!0,!1,this),n=t.addShape({type:"path",attrs:e,name:"area"});return n},getMarker:function(r){var t=r.color;return{symbol:function(e,n,i){return i===void 0&&(i=5.5),[["M",e-i,n-4],["L",e+i,n-4],["L",e+i,n+4],["L",e-i,n+4],["Z"]]},style:{r:5,stroke:t,fill:null}}}});In("area","smooth",{draw:function(r,t){var e=this.coordinate,n=s2(r,!1,!0,this,fJ(e)),i=t.addShape({type:"path",attrs:n,name:"area"});return i},getMarker:function(r){var t=r.color;return{symbol:function(e,n,i){return i===void 0&&(i=5.5),[["M",e-i,n-4],["L",e+i,n-4],["L",e+i,n+4],["L",e-i,n+4],["Z"]]},style:{r:5,fill:t}}}});In("area","smooth-line",{draw:function(r,t){var e=this.coordinate,n=s2(r,!0,!0,this,fJ(e)),i=t.addShape({type:"path",attrs:n,name:"area"});return i},getMarker:function(r){var t=r.color;return{symbol:function(e,n,i){return i===void 0&&(i=5.5),[["M",e-i,n-4],["L",e+i,n-4],["L",e+i,n+4],["L",e-i,n+4],["Z"]]},style:{r:5,stroke:t,fill:null}}}});function eR(r,t){return["C",r.x*1/2+t.x*1/2,r.y,r.x*1/2+t.x*1/2,t.y,t.x,t.y]}function tR(r,t){var e=[];e.push({x:t.x,y:t.y}),e.push(r);var n=["Q"];return G(e,function(i){n.push(i.x,i.y)}),n}function kJe(r,t,e){var n=tR(t,e),i=[["M",r.x,r.y]];return i.push(n),i}function MJe(r,t){var e=tR(r[1],t),n=tR(r[3],t),i=[["M",r[0].x,r[0].y]];return i.push(n),i.push(["L",r[3].x,r[3].y]),i.push(["L",r[2].x,r[2].y]),i.push(e),i.push(["L",r[1].x,r[1].y]),i.push(["L",r[0].x,r[0].y]),i.push(["Z"]),i}In("edge","arc",{draw:function(r,t){var e=Hi(r,!0,!1,"lineWidth"),n=r.points,i=n.length>2?"weight":"normal",a;if(r.isInCircle){var o={x:0,y:1};return i==="normal"?a=kJe(n[0],n[1],o):(e.fill=e.stroke,a=MJe(n,o)),a=this.parsePath(a),t.addShape("path",{attrs:A(A({},e),{path:a})})}else{if(i==="normal")return n=this.parsePoints(n),a=cQ((n[1].x+n[0].x)/2,n[0].y,Math.abs(n[1].x-n[0].x)/2,Math.PI,Math.PI*2),t.addShape("path",{attrs:A(A({},e),{path:a})});var s=eR(n[1],n[3]),l=eR(n[2],n[0]);return a=[["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],s,["L",n[3].x,n[3].y],["L",n[2].x,n[2].y],l,["Z"]],a=this.parsePath(a),e.fill=e.stroke,t.addShape("path",{attrs:A(A({},e),{path:a})})}},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});function IJe(r,t){var e=eR(r,t),n=[["M",r.x,r.y]];return n.push(e),n}In("edge","smooth",{draw:function(r,t){var e=Hi(r,!0,!1,"lineWidth"),n=r.points,i=this.parsePath(IJe(n[0],n[1]));return t.addShape("path",{attrs:A(A({},e),{path:i})})},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});var l2=1/3;function PJe(r,t){var e=[];e.push({x:r.x,y:r.y*(1-l2)+t.y*l2}),e.push({x:t.x,y:r.y*(1-l2)+t.y*l2}),e.push(t);var n=[["M",r.x,r.y]];return G(e,function(i){n.push(["L",i.x,i.y])}),n}In("edge","vhv",{draw:function(r,t){var e=Hi(r,!0,!1,"lineWidth"),n=r.points,i=this.parsePath(PJe(n[0],n[1]));return t.addShape("path",{attrs:A(A({},e),{path:i})})},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});In("interval","funnel",{getPoints:function(r){return r.size=r.size*2,KD(r)},draw:function(r,t){var e=Hi(r,!1,!0),n=this.parsePath(hJ(r.points,r.nextPoints,!1)),i=t.addShape("path",{attrs:A(A({},e),{path:n}),name:"interval"});return i},getMarker:function(r){var t=r.color;return{symbol:"square",style:{r:4,fill:t}}}});In("interval","hollow-rect",{draw:function(r,t){var e=Hi(r,!0,!1),n=t,i=r==null?void 0:r.background;if(i){n=t.addGroup();var a=lJ(r),o=dJ(r,this.parsePoints(r.points),this.coordinate);n.addShape("path",{attrs:A(A({},a),{path:o}),zIndex:-1,name:zD})}var s=this.parsePath(ZD(r.points)),l=n.addShape("path",{attrs:A(A({},e),{path:s}),name:"interval"});return i?n:l},getMarker:function(r){var t=r.color,e=r.isInPolar;return e?{symbol:"circle",style:{r:4.5,stroke:t,fill:null}}:{symbol:"square",style:{r:4,stroke:t,fill:null}}}});function DJe(r){var t=r.x,e=r.y,n=r.y0;return Qe(e)?e.map(function(i,a){return{x:Qe(t)?t[a]:t,y:i}}):[{x:t,y:n},{x:t,y:e}]}In("interval","line",{getPoints:function(r){return DJe(r)},draw:function(r,t){var e=Hi(r,!0,!1,"lineWidth"),n=Xo(A({},e),["fill"]),i=this.parsePath(ZD(r.points,!1)),a=t.addShape("path",{attrs:A(A({},n),{path:i}),name:"interval"});return a},getMarker:function(r){var t=r.color;return{symbol:function(e,n,i){return[["M",e,n-i],["L",e,n+i]]},style:{r:5,stroke:t}}}});In("interval","pyramid",{getPoints:function(r){return r.size=r.size*2,KD(r)},draw:function(r,t){var e=Hi(r,!1,!0),n=this.parsePath(hJ(r.points,r.nextPoints,!0)),i=t.addShape("path",{attrs:A(A({},e),{path:n}),name:"interval"});return i},getMarker:function(r){var t=r.color;return{symbol:"square",style:{r:4,fill:t}}}});function RJe(r){var t=r.x,e=r.y,n=r.y0,i=r.size,a,o;Qe(e)?(a=e[0],o=e[1]):(a=n,o=e);var s=t+i/2,l=t-i/2;return[{x:t,y:a},{x:t,y:o},{x:l,y:a},{x:s,y:a},{x:l,y:o},{x:s,y:o}]}function OJe(r){return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y]]}In("interval","tick",{getPoints:function(r){return RJe(r)},draw:function(r,t){var e=Hi(r,!0,!1),n=this.parsePath(OJe(r.points)),i=t.addShape("path",{attrs:A(A({},e),{path:n}),name:"interval"});return i},getMarker:function(r){var t=r.color;return{symbol:function(e,n,i){return[["M",e-i/2,n-i],["L",e+i/2,n-i],["M",e,n-i],["L",e,n+i],["M",e-i/2,n+i],["L",e+i/2,n+i]]},style:{r:5,stroke:t}}}});var LJe=function(r,t,e){var n=r.x,i=r.y,a=t.x,o=t.y,s;switch(e){case"hv":s=[{x:a,y:i}];break;case"vh":s=[{x:n,y:o}];break;case"hvh":var l=(a+n)/2;s=[{x:l,y:i},{x:l,y:o}];break;case"vhv":var u=(i+o)/2;s=[{x:n,y:u},{x:a,y:u}];break}return s};function FJe(r,t){var e=[];return G(r,function(n,i){var a=r[i+1];if(e.push(n),a){var o=LJe(n,a,t);e=e.concat(o)}}),e}function NJe(r){return r.map(function(t,e){return e===0?["M",t.x,t.y]:["L",t.x,t.y]})}function BJe(r,t){var e=o2(r.points,r.connectNulls,r.showSinglePoint),n=[];return G(e,function(i){var a=FJe(i,t);n=n.concat(NJe(a))}),A(A({},Hi(r,!0,!1,"lineWidth")),{path:n})}G(["hv","vh","hvh","vhv"],function(r){In("line",r,{draw:function(t,e){var n=BJe(t,r),i=e.addShape({type:"path",attrs:n,name:"line"});return i},getMarker:function(t){return uJ(t,r)}})});G(wJe,function(r){In("point",r,{draw:function(t,e){return JD(this,t,e,r,!0)},getMarker:function(t){var e=t.color;return{symbol:wh[r],style:{r:4.5,stroke:e,fill:null}}}})});In("point","image",{draw:function(r,t){var e=Hi(r,!1,!1,"r").r,n=this.parsePoints(r.points),i=n[0];if(r.isStack)i=n[1];else if(n.length>1){for(var a=t.addGroup(),o=0,s=n;o<s.length;o++){var l=s[o];a.addShape("image",{attrs:{x:l.x-e/2,y:l.y-e,width:e,height:e,img:r.shape[1]}})}return a}return t.addShape("image",{attrs:{x:i.x-e/2,y:i.y-e,width:e,height:e,img:r.shape[1]}})},getMarker:function(r){var t=r.color;return{symbol:"circle",style:{r:4.5,fill:t}}}});G(vJ,function(r){In("point",r,{draw:function(t,e){return JD(this,t,e,r,!1)},getMarker:function(t){var e=t.color;return{symbol:wh[r]||r,style:{r:4.5,fill:e}}}})});function pJ(r){var t=Qe(r)?r:[r],e=t[0],n=t[t.length-1],i=t.length>1?t[1]:e,a=t.length>3?t[3]:n,o=t.length>2?t[2]:i;return{min:e,max:n,min1:i,max1:a,median:o}}function gJ(r,t,e){var n=e/2,i;if(Qe(t)){var a=pJ(t),o=a.min,s=a.max,l=a.median,u=a.min1,c=a.max1,f=r-n,d=r+n;i=[[f,s],[d,s],[r,s],[r,c],[f,u],[f,c],[d,c],[d,u],[r,u],[r,o],[f,o],[d,o],[f,l],[d,l]]}else{t=nt(t)?.5:t;var h=pJ(r),o=h.min,s=h.max,l=h.median,u=h.min1,c=h.max1,v=t-n,p=t+n;i=[[o,v],[o,p],[o,t],[u,t],[u,v],[u,p],[c,p],[c,v],[c,t],[s,t],[s,v],[s,p],[l,v],[l,p]]}return i.map(function(g){return{x:g[0],y:g[1]}})}function $Je(r){return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y],["L",r[6].x,r[6].y],["L",r[7].x,r[7].y],["L",r[4].x,r[4].y],["Z"],["M",r[8].x,r[8].y],["L",r[9].x,r[9].y],["M",r[10].x,r[10].y],["L",r[11].x,r[11].y],["M",r[12].x,r[12].y],["L",r[13].x,r[13].y]]}In("schema","box",{getPoints:function(r){var t=r.x,e=r.y,n=r.size;return gJ(t,e,n)},draw:function(r,t){var e=Hi(r,!0,!1),n=this.parsePath($Je(r.points)),i=t.addShape("path",{attrs:A(A({},e),{path:n,name:"schema"})});return i},getMarker:function(r){var t=r.color;return{symbol:function(e,n,i){var a=[n-6,n-3,n,n+3,n+6],o=gJ(e,a,i);return[["M",o[0].x+1,o[0].y],["L",o[1].x-1,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["M",o[4].x,o[4].y],["L",o[5].x,o[5].y],["L",o[6].x,o[6].y],["L",o[7].x,o[7].y],["L",o[4].x,o[4].y],["Z"],["M",o[8].x,o[8].y],["L",o[9].x,o[9].y],["M",o[10].x+1,o[10].y],["L",o[11].x-1,o[11].y],["M",o[12].x,o[12].y],["L",o[13].x,o[13].y]]},style:{r:6,lineWidth:1,stroke:t}}}});function zJe(r){var t=Qe(r)?r:[r],e=t.sort(function(n,i){return i-n});return BZe(e,4,e[e.length-1])}function mJ(r,t,e){var n=zJe(t);return[{x:r,y:n[0]},{x:r,y:n[1]},{x:r-e/2,y:n[2]},{x:r-e/2,y:n[1]},{x:r+e/2,y:n[1]},{x:r+e/2,y:n[2]},{x:r,y:n[2]},{x:r,y:n[3]}]}function GJe(r){return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["L",r[4].x,r[4].y],["L",r[5].x,r[5].y],["Z"],["M",r[6].x,r[6].y],["L",r[7].x,r[7].y]]}In("schema","candle",{getPoints:function(r){var t=r.x,e=r.y,n=r.size;return mJ(t,e,n)},draw:function(r,t){var e=Hi(r,!0,!0),n=this.parsePath(GJe(r.points)),i=t.addShape("path",{attrs:A(A({},e),{path:n,name:"schema"})});return i},getMarker:function(r){var t=r.color;return{symbol:function(e,n,i){var a=[n+7.5,n+3,n-3,n-7.5],o=mJ(e,a,i);return[["M",o[0].x,o[0].y],["L",o[1].x,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["L",o[4].x,o[4].y],["L",o[5].x,o[5].y],["Z"],["M",o[6].x,o[6].y],["L",o[7].x,o[7].y]]},style:{lineWidth:1,stroke:t,fill:t,r:6}}}});function UJe(r,t){var e=Math.abs(r[0].x-r[2].x),n=Math.abs(r[0].y-r[2].y),i=Math.min(e,n);t&&(i=ei(t,0,Math.min(e,n))),i=i/2;var a=(r[0].x+r[2].x)/2,o=(r[0].y+r[2].y)/2;return{x:a-i,y:o-i,width:i*2,height:i*2}}In("polygon","square",{draw:function(r,t){if(!co(r.points)){var e=Hi(r,!0,!0),n=this.parsePoints(r.points);return t.addShape("rect",{attrs:A(A({},e),UJe(n,r.size)),name:"polygon"})}},getMarker:function(r){var t=r.color;return{symbol:"square",style:{r:4,fill:t}}}});In("violin","smooth",{draw:function(r,t){var e=Hi(r,!0,!0),n=this.parsePath(sJ(r.points));return t.addShape("path",{attrs:A(A({},e),{path:n})})},getMarker:function(r){var t=r.color;return{symbol:"circle",style:{stroke:null,r:4,fill:t}}}});In("violin","hollow",{draw:function(r,t){var e=Hi(r,!0,!1),n=this.parsePath(oJ(r.points));return t.addShape("path",{attrs:A(A({},e),{path:n})})},getMarker:function(r){var t=r.color;return{symbol:"circle",style:{r:4,fill:null,stroke:t}}}});In("violin","hollow-smooth",{draw:function(r,t){var e=Hi(r,!0,!1),n=this.parsePath(sJ(r.points));return t.addShape("path",{attrs:A(A({},e),{path:n})})},getMarker:function(r){var t=r.color;return{symbol:"circle",style:{r:4,fill:null,stroke:t}}}});var VJe=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getLabelValueDir=function(e){var n="y",i=e.points;return i[0][n]<=i[2][n]?1:-1},t.prototype.getLabelOffsetPoint=function(e,n,i,a){var o,s=r.prototype.getLabelOffsetPoint.call(this,e,n,i),l=this.getCoordinate(),u=l.isTransposed,c=u?"x":"y",f=this.getLabelValueDir(e.mappingData);return s=A(A({},s),(o={},o[c]=s[c]*f,o)),l.isReflect("x")&&(s=A(A({},s),{x:s.x*-1})),l.isReflect("y")&&(s=A(A({},s),{y:s.y*-1})),s},t.prototype.getThemedLabelCfg=function(e){var n=this.geometry,i=this.getDefaultLabelCfg(),a=n.theme;return Dt({},i,a.labels,e.position==="middle"?{offset:0}:{},e)},t.prototype.setLabelPosition=function(e,n,i,a){var o=this.getCoordinate(),s=o.isTransposed,l=n.points,u=o.convert(l[0]),c=o.convert(l[2]),f=this.getLabelValueDir(n),d,h,v,p,g=Qe(n.shape)?n.shape[0]:n.shape;if(g==="funnel"||g==="pyramid"){var m=ae(n,"nextPoints"),y=ae(n,"points");if(m){var b=o.convert(y[0]),x=o.convert(y[1]),w=o.convert(m[0]),S=o.convert(m[1]);s?(d=Math.min(w.y,b.y),v=Math.max(w.y,b.y),h=(x.x+S.x)/2,p=(b.x+w.x)/2):(d=Math.min((x.y+S.y)/2,(b.y+w.y)/2),v=Math.max((x.y+S.y)/2,(b.y+w.y)/2),h=S.x,p=b.x)}else d=Math.min(c.y,u.y),v=Math.max(c.y,u.y),h=c.x,p=u.x}else d=Math.min(c.y,u.y),v=Math.max(c.y,u.y),h=c.x,p=u.x;switch(a){case"right":e.x=h,e.y=(d+v)/2,e.textAlign=ae(e,"textAlign",f>0?"left":"right");break;case"left":e.x=p,e.y=(d+v)/2,e.textAlign=ae(e,"textAlign",f>0?"left":"right");break;case"bottom":s&&(e.x=(h+p)/2),e.y=v,e.textAlign=ae(e,"textAlign","center"),e.textBaseline=ae(e,"textBaseline",f>0?"bottom":"top");break;case"middle":s&&(e.x=(h+p)/2),e.y=(d+v)/2,e.textAlign=ae(e,"textAlign","center"),e.textBaseline=ae(e,"textBaseline","middle");break;case"top":s&&(e.x=(h+p)/2),e.y=d,e.textAlign=ae(e,"textAlign","center"),e.textBaseline=ae(e,"textBaseline",f>0?"bottom":"top");break}},t}(a2),u2=Math.PI/2,yJ=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getLabelOffset=function(e){var n=this.getCoordinate(),i=0;if(zt(e))i=e;else if(ot(e)&&e.indexOf("%")!==-1){var a=n.getRadius();n.innerRadius>0&&(a=a*(1-n.innerRadius)),i=parseFloat(e)*.01*a}return i},t.prototype.getLabelItems=function(e){var n=r.prototype.getLabelItems.call(this,e),i=this.geometry.getYScale();return Kn(n,function(a){if(a&&i){var o=i.scale(ae(a.data,i.field));return A(A({},a),{percent:o})}return a})},t.prototype.getLabelAlign=function(e){var n=this.getCoordinate(),i;if(e.labelEmit)i=e.angle<=Math.PI/2&&e.angle>=-Math.PI/2?"left":"right";else if(!n.isTransposed)i="center";else{var a=n.getCenter(),o=e.offset;Math.abs(e.x-a.x)<1?i="center":e.angle>Math.PI||e.angle<=0?i=o>0?"left":"right":i=o>0?"right":"left"}return i},t.prototype.getLabelPoint=function(e,n,i){var a=1,o,s=e.content[i];this.isToMiddle(n)?o=this.getMiddlePoint(n.points):(e.content.length===1&&i===0?i=1:i===0&&(a=-1),o=this.getArcPoint(n,i));var l=e.offset*a,u=this.getPointAngle(o),c=e.labelEmit,f=this.getCirclePoint(u,l,o,c);return f.r===0?f.content="":(f.content=s,f.angle=u,f.color=n.color),f.rotate=e.autoRotate?this.getLabelRotate(u,l,c):e.rotate,f.start={x:o.x,y:o.y},f},t.prototype.getArcPoint=function(e,n){return n===void 0&&(n=0),!Qe(e.x)&&!Qe(e.y)?{x:e.x,y:e.y}:{x:Qe(e.x)?e.x[n]:e.x,y:Qe(e.y)?e.y[n]:e.y}},t.prototype.getPointAngle=function(e){return tg(this.getCoordinate(),e)},t.prototype.getCirclePoint=function(e,n,i,a){var o=this.getCoordinate(),s=o.getCenter(),l=KC(o,i);if(l===0)return A(A({},s),{r:l});var u=e;if(o.isTransposed&&l>n&&!a){var c=Math.asin(n/(2*l));u=e+c*2}else l=l+n;return{x:s.x+l*Math.cos(u),y:s.y+l*Math.sin(u),r:l}},t.prototype.getLabelRotate=function(e,n,i){var a=e+u2;return i&&(a-=u2),a&&(a>u2?a=a-Math.PI:a<-u2&&(a=a+Math.PI)),a},t.prototype.getMiddlePoint=function(e){var n=this.getCoordinate(),i=e.length,a={x:0,y:0};return G(e,function(o){a.x+=o.x,a.y+=o.y}),a.x/=i,a.y/=i,a=n.convert(a),a},t.prototype.isToMiddle=function(e){return e.x.length>2},t}(a2),HJe=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.defaultLayout="distribute",e}return t.prototype.getDefaultLabelCfg=function(e,n){var i=r.prototype.getDefaultLabelCfg.call(this,e,n);return Dt({},i,ae(this.geometry.theme,"pieLabels",{}))},t.prototype.getLabelOffset=function(e){return r.prototype.getLabelOffset.call(this,e)||0},t.prototype.getLabelRotate=function(e,n,i){var a;return n<0&&(a=e,a>Math.PI/2&&(a=a-Math.PI),a<-Math.PI/2&&(a=a+Math.PI)),a},t.prototype.getLabelAlign=function(e){var n=this.getCoordinate(),i=n.getCenter(),a;return e.angle<=Math.PI/2&&e.x>=i.x?a="left":a="right",e.offset<=0&&(a==="right"?a="left":a="right"),a},t.prototype.getArcPoint=function(e){return e},t.prototype.getPointAngle=function(e){var n=this.getCoordinate(),i={x:Qe(e.x)?e.x[0]:e.x,y:e.y[0]},a={x:Qe(e.x)?e.x[1]:e.x,y:e.y[1]},o,s=tg(n,i);if(e.points&&e.points[0].y===e.points[1].y)o=s;else{var l=tg(n,a);s>=l&&(l=l+Math.PI*2),o=s+(l-s)/2}return o},t.prototype.getCirclePoint=function(e,n){var i=this.getCoordinate(),a=i.getCenter(),o=i.getRadius()+n;return A(A({},ta(a.x,a.y,o,e)),{angle:e,r:o})},t}(yJ),bJ=4;function WJe(r,t,e,n,i,a){var o=!0,s=n.start,l=n.end,u=Math.min(s.y,l.y),c=Math.abs(s.y-l.y),f,d=0,h=Number.MIN_VALUE,v=t.map(function(w){return w.y>d&&(d=w.y),w.y<h&&(h=w.y),{size:e,targets:[w.y-u]}});for(h-=u,d-u>c&&(c=d-u);o;)for(v.forEach(function(w){var S=(Math.min.apply(h,w.targets)+Math.max.apply(h,w.targets))/2;w.pos=Math.min(Math.max(h,S-w.size/2),c-w.size)}),o=!1,f=v.length;f--;)if(f>0){var p=v[f-1],g=v[f];p.pos+p.size>g.pos&&(p.size+=g.size,p.targets=p.targets.concat(g.targets),p.pos+p.size>c&&(p.pos=c-p.size),v.splice(f,1),o=!0)}f=0,v.forEach(function(w){var S=u+e/2;w.targets.forEach(function(){t[f].y=w.pos+S,S+=e,f++})});for(var m={},y=0,b=r;y<b.length;y++){var x=b[y];m[x.get("id")]=x}t.forEach(function(w){var S=w.r*w.r,C=Math.pow(Math.abs(w.y-i.y),2);if(S<C)w.x=i.x;else{var _=Math.sqrt(S-C);a?w.x=i.x+_:w.x=i.x-_}var T=m[w.id];T.attr("x",w.x),T.attr("y",w.y);var E=Ps(T.getChildren(),function(k){return k.get("type")==="text"});E&&(E.attr("y",w.y),E.attr("x",w.x))})}function jJe(r,t,e,n){if(!(!r.length||!t.length)){var i=r[0]?r[0].offset:0,a=t[0].get("coordinate"),o=a.getRadius(),s=a.getCenter();if(i>0){var l=14,u=o+i,c=u*2+l*2,f={start:a.start,end:a.end},d=[[],[]];r.forEach(function(h){!h||(h.textAlign==="right"?d[0].push(h):d[1].push(h))}),d.forEach(function(h,v){var p=c/l;h.length>p&&(h.sort(function(g,m){return m["..percent"]-g["..percent"]}),h.splice(p,h.length-p)),h.sort(function(g,m){return g.y-m.y}),WJe(t,h,l,f,s,v)})}G(r,function(h){if(h&&h.labelLine){var v=h.offset,p=h.angle,g=ta(s.x,s.y,o,p),m=ta(s.x,s.y,o+v/2,p),y=h.x+ae(h,"offsetX",0),b=h.y+ae(h,"offsetY",0),x={x:y-Math.cos(p)*bJ,y:b-Math.sin(p)*bJ};an(h.labelLine)||(h.labelLine={}),h.labelLine.path=["M "+g.x,g.y+" Q"+m.x,m.y+" "+x.x,x.y].join(",")}})}}function xJ(r,t,e){var n=r.filter(function(v){return!v.invisible});n.sort(function(v,p){return v.y-p.y});var i=!0,a=e.minY,o=e.maxY,s=Math.abs(a-o),l,u=0,c=Number.MIN_VALUE,f=n.map(function(v){return v.y>u&&(u=v.y),v.y<c&&(c=v.y),{content:v.content,size:t,targets:[v.y-a],pos:null}});for(c-=a,u-a>s&&(s=u-a);i;)for(f.forEach(function(v){var p=(Math.min.apply(c,v.targets)+Math.max.apply(c,v.targets))/2;v.pos=Math.min(Math.max(c,p-v.size/2),s-v.size),v.pos=Math.max(0,v.pos)}),i=!1,l=f.length;l--;)if(l>0){var d=f[l-1],h=f[l];d.pos+d.size>h.pos&&(d.size+=h.size,d.targets=d.targets.concat(h.targets),d.pos+d.size>s&&(d.pos=s-d.size),f.splice(l,1),i=!0)}l=0,f.forEach(function(v){var p=a+t/2;v.targets.forEach(function(){n[l].y=v.pos+p,p+=t,l++})})}var wJ=4;function YJe(r,t){var e=t.getCenter(),n=t.getRadius();if(r&&r.labelLine){var i=r.angle,a=r.offset,o=ta(e.x,e.y,n,i),s=r.x+ae(r,"offsetX",0)*(Math.cos(i)>0?1:-1),l=r.y+ae(r,"offsetY",0)*(Math.sin(i)>0?1:-1),u={x:s-Math.cos(i)*wJ,y:l-Math.sin(i)*wJ},c=r.labelLine.smooth,f=[],d=u.x-e.x,h=u.y-e.y,v=Math.atan(h/d);if(d<0&&(v+=Math.PI),c===!1){an(r.labelLine)||(r.labelLine={});var p=0;(i<0&&i>-Math.PI/2||i>Math.PI*1.5)&&u.y>o.y&&(p=1),i>=0&&i<Math.PI/2&&u.y>o.y&&(p=1),i>=Math.PI/2&&i<Math.PI&&o.y>u.y&&(p=1),(i<-Math.PI/2||i>=Math.PI&&i<Math.PI*1.5)&&o.y>u.y&&(p=1);var g=a/2>4?4:Math.max(a/2-1,0),m=ta(e.x,e.y,n+g,i),y=ta(e.x,e.y,n+a/2,v),b=0;f.push("M "+o.x+" "+o.y),f.push("L "+m.x+" "+m.y),f.push("A "+e.x+" "+e.y+" 0 "+b+" "+p+" "+y.x+" "+y.y),f.push("L "+u.x+" "+u.y)}else{var m=ta(e.x,e.y,n+(a/2>4?4:Math.max(a/2-1,0)),i),x=o.x<e.x?1:-1;f.push("M "+u.x+" "+u.y);var w=(o.y-e.y)/(o.x-e.x),S=(u.y-e.y)/(u.x-e.x);Math.abs(w-S)>Math.pow(Math.E,-16)&&f.push.apply(f,["C",u.x+x*4,u.y,2*m.x-o.x,2*m.y-o.y,o.x,o.y]),f.push("L "+o.x+" "+o.y)}r.labelLine.path=f.join(" ")}}function XJe(r,t,e,n){var i=ya(r,function(S){return!nt(S)}),a=t[0]&&t[0].get("coordinate");if(!!a){for(var o=a.getCenter(),s=a.getRadius(),l={},u=0,c=t;u<c.length;u++){var f=c[u];l[f.get("id")]=f}var d=ae(i[0],"labelHeight",14),h=ae(i[0],"offset",0);if(!(h<=0)){var v="left",p="right",g=uo(i,function(S){return S.x<o.x?v:p}),m=a.start,y=a.end,b=Math.min((s+h+d)*2,a.getHeight()),x=b/2,w={minX:m.x,maxX:y.x,minY:o.y-x,maxY:o.y+x};G(g,function(S,C){var _=Math.floor(b/d);S.length>_&&(S.sort(function(T,E){return E.percent-T.percent}),G(S,function(T,E){E+1>_&&(l[T.id].set("visible",!1),T.invisible=!0)})),xJ(S,d,w)}),G(g,function(S,C){G(S,function(_){var T=C===p,E=l[_.id],k=E.getChildByIndex(0);if(k){var I=s+h,P=_.y-o.y,F=Math.pow(I,2),$=Math.pow(P,2),R=F-$>0?F-$:0,L=Math.sqrt(R),O=Math.abs(Math.cos(_.angle)*I);T?_.x=o.x+Math.max(L,O):_.x=o.x-Math.max(L,O)}k&&(k.attr("y",_.y),k.attr("x",_.x)),YJe(_,a)})})}}}var rR=4,qJe=4,SJ=4;function KJe(r,t,e){var n=t.getCenter(),i=t.getRadius(),a={x:r.x-(e?SJ:-SJ),y:r.y},o=ta(n.x,n.y,i+rR,r.angle),s={x:a.x,y:a.y},l={x:o.x,y:o.y},u=ta(n.x,n.y,i,r.angle),c="";if(a.y!==o.y){var f=e?4:-4;s.y=a.y,r.angle<0&&r.angle>=-Math.PI/2&&(s.x=Math.max(o.x,a.x-f),a.y<o.y?l.y=s.y:(l.y=o.y,l.x=Math.max(l.x,s.x-f))),r.angle>0&&r.angle<Math.PI/2&&(s.x=Math.max(o.x,a.x-f),a.y>o.y?l.y=s.y:(l.y=o.y,l.x=Math.max(l.x,s.x-f))),r.angle>Math.PI/2&&(s.x=Math.min(o.x,a.x-f),a.y>o.y?l.y=s.y:(l.y=o.y,l.x=Math.min(l.x,s.x-f))),r.angle<-Math.PI/2&&(s.x=Math.min(o.x,a.x-f),a.y<o.y?l.y=s.y:(l.y=o.y,l.x=Math.min(l.x,s.x-f)))}c=["M "+a.x+","+a.y,"L "+s.x+","+s.y,"L "+l.x+","+l.y,"L "+o.x+","+o.y,"L "+u.x+","+u.y].join(" "),r.labelLine=Dt({},r.labelLine,{path:c})}function ZJe(r,t,e,n){var i=t[0]&&t[0].get("coordinate");if(!!i){for(var a=i.getCenter(),o=i.getRadius(),s={},l=0,u=t;l<u.length;l++){var c=u[l];s[c.get("id")]=c}var f=ae(r[0],"labelHeight",14),d=Math.max(ae(r[0],"offset",0),rR);G(r,function(S){var C=ae(s,[S.id]);if(!!C){var _=S.x>a.x||S.x===a.x&&S.y>a.y,T=nt(S.offsetX)?qJe:S.offsetX,E=ta(a.x,a.y,o+rR,S.angle),k=d+T;S.x=a.x+(_?1:-1)*(o+k),S.y=E.y}});var h=i.start,v=i.end,p="left",g="right",m=uo(r,function(S){return S.x<a.x?p:g}),y=(o+d)*2+f;G(m,function(S){var C=S.length*f;C>y&&(y=Math.min(C,Math.abs(h.y-v.y)))});var b={minX:h.x,maxX:v.x,minY:a.y-y/2,maxY:a.y+y/2};G(m,function(S,C){var _=y/f;S.length>_&&(S.sort(function(T,E){return E.percent-T.percent}),G(S,function(T,E){E>_&&(s[T.id].set("visible",!1),T.invisible=!0)})),xJ(S,f,b)});var x=b.minY,w=b.maxY;G(m,function(S,C){var _=C===g;G(S,function(T){var E=ae(s,T&&[T.id]);if(!!E){if(T.y<x||T.y>w){E.set("visible",!1);return}var k=E.getChildByIndex(0),I=k.getCanvasBBox(),P={x:_?I.x:I.maxX,y:I.y+I.height/2};nb(k,T.x-P.x,T.y-P.y),T.labelLine&&KJe(T,i,_)}})})}}function QJe(r,t,e,n){G(t,function(i){var a=n.minX,o=n.minY,s=n.maxX,l=n.maxY,u=i.getCanvasBBox(),c=u.minX,f=u.minY,d=u.maxX,h=u.maxY,v=u.x,p=u.y,g=u.width,m=u.height,y=v,b=p;(c<a||d<a)&&(y=a),(f<o||h<o)&&(b=o),c>s?y=s-g:d>s&&(y=y-(d-s)),f>l?b=l-m:h>l&&(b=b-(h-l)),(y!==v||b!==p)&&nb(i,y-v,b-p)})}function JJe(r,t,e,n){G(t,function(i,a){var o=i.getCanvasBBox(),s=e[a].getBBox();(o.minX<s.minX||o.minY<s.minY||o.maxX>s.maxX||o.maxY>s.maxY)&&i.remove(!0)})}var eet=100,CJ=function(){function r(t){t===void 0&&(t={}),this.bitmap={};var e=t.xGap,n=e===void 0?1:e,i=t.yGap,a=i===void 0?8:i;this.xGap=n,this.yGap=a}return r.prototype.hasGap=function(t){for(var e=!0,n=this.bitmap,i=Math.round(t.minX),a=Math.round(t.maxX),o=Math.round(t.minY),s=Math.round(t.maxY),l=i;l<=a;l+=1){if(!n[l]){n[l]={};continue}if(l===i||l===a){for(var u=o;u<=s;u++)if(n[l][u]){e=!1;break}}else if(n[l][o]||n[l][s]){e=!1;break}}return e},r.prototype.fillGap=function(t){for(var e=this.bitmap,n=Math.round(t.minX),i=Math.round(t.maxX),a=Math.round(t.minY),o=Math.round(t.maxY),s=n;s<=i;s+=1)e[s]||(e[s]={});for(var s=n;s<=i;s+=this.xGap){for(var l=a;l<=o;l+=this.yGap)e[s][l]=!0;e[s][o]=!0}if(this.yGap!==1)for(var s=a;s<=o;s+=1)e[n][s]=!0,e[i][s]=!0;if(this.xGap!==1)for(var s=n;s<=i;s+=1)e[s][a]=!0,e[s][o]=!0},r.prototype.destroy=function(){this.bitmap={}},r}();function tet(r,t,e){e===void 0&&(e=eet);var n=-1,i=r.attr(),a=i.x,o=i.y,s=r.getCanvasBBox(),l=Math.sqrt(s.width*s.width+s.height*s.height),u,c=-n,f=0,d=0,h=function(m){var y=m*.1;return[y*Math.cos(y),y*Math.sin(y)]};if(t.hasGap(s))return t.fillGap(s),!0;for(var v=!1,p=0,g={};Math.min(Math.abs(f),Math.abs(d))<l&&p<e;)if(u=h(c+=n),f=~~u[0],d=~~u[1],!(!f&&!d||g[f+"-"+d])&&(r.attr({x:a+f,y:o+d}),f+d<0&&r.attr("textAlign","right"),p++,t.hasGap(r.getCanvasBBox()))){t.fillGap(r.getCanvasBBox()),v=!0,g[f+"-"+d]=!0;break}return v}function ret(r,t,e,n){var i=r.getCanvasBBox(),a=i.width,o=i.height,s={x:t,y:e,textAlign:"center"};switch(n){case 0:s.y-=o+1,s.x+=1,s.textAlign="left";break;case 1:s.y-=o+1,s.x-=1,s.textAlign="right";break;case 2:s.y+=o+1,s.x-=1,s.textAlign="right";break;case 3:s.y+=o+1,s.x+=1,s.textAlign="left";break;case 5:s.y-=o*2+2;break;case 6:s.y+=o*2+2;break;case 7:s.x+=a+1,s.textAlign="left";break;case 8:s.x-=a+1,s.textAlign="right";break}return r.attr(s),r.getCanvasBBox()}function net(r,t,e,n){var i=new CJ;G(t,function(a){var o=a.find(function(s){return s.get("type")==="text"});tet(o,i)||a.remove(!0)}),i.destroy()}function iet(r,t,e,n){var i=new CJ;G(t,function(a){for(var o=a.find(function(h){return h.get("type")==="text"}),s=o.attr(),l=s.x,u=s.y,c=!1,f=0;f<=8;f++){var d=ret(o,l,u,f);if(i.hasGap(d)){i.fillGap(d),c=!0;break}}c||a.remove(!0)}),i.destroy()}var aet=ET;function EJ(r){if(r.length>4)return[];var t=function(i,a){return[a.x-i.x,a.y-i.y]},e=t(r[0],r[1]),n=t(r[1],r[2]);return[e,n]}function c2(r,t,e){t===void 0&&(t=0),e===void 0&&(e={x:0,y:0});var n=r.x,i=r.y;return{x:(n-e.x)*Math.cos(-t)+(i-e.y)*Math.sin(-t)+e.x,y:(e.x-n)*Math.sin(-t)+(i-e.y)*Math.cos(-t)+e.y}}function _J(r){var t=[{x:r.x,y:r.y},{x:r.x+r.width,y:r.y},{x:r.x+r.width,y:r.y+r.height},{x:r.x,y:r.y+r.height}],e=r.rotation;return e?[c2(t[0],e,t[0]),c2(t[1],e,t[0]),c2(t[2],e,t[0]),c2(t[3],e,t[0])]:t}function TJ(r,t){if(r.length>4)return{min:0,max:0};var e=[];return r.forEach(function(n){e.push(aet([n.x,n.y],t))}),{min:Math.min.apply(Math,e),max:Math.max.apply(Math,e)}}function oet(r,t){return r.max>t.min&&r.min<t.max}function set(r){return zt(r)&&!Number.isNaN(r)&&r!==1/0&&r!==-1/0}function AJ(r){return Object.values(r).every(set)}function uet(r,t,e){return e===void 0&&(e=0),!(t.x>r.x+r.width+e||t.x+t.width<r.x-e||t.y>r.y+r.height+e||t.y+t.height<r.y-e)}function cet(r,t){if(!AJ(r)||!AJ(t))return!1;if(!r.rotation&&!t.rotation)return uet(r,t);for(var e=_J(r),n=_J(t),i=oi(oi([],EJ(e),!0),EJ(n),!0),a=0;a<i.length;a++){var o=i[a],s=TJ(e,o),l=TJ(n,o);if(!oet(s,l))return!1}return!0}function fet(r,t,e,n){for(var i=0;i<t.length;i++){var a=t[i];if(t[i].get("visible"))for(var o=i+1;o<t.length;o++){var s=t[o];if(a&&s&&a!==s&&s.get("visible")){var l=VD(a,r[i],ae(r[i],"background.padding")),u=VD(s,r[o],ae(r[o],"background.padding"));cet(l,u)&&t[o].set("visible",!1)}}}}var kJ={"#5B8FF9":!0},det=function(r){var t=gf.toRGB(r).toUpperCase();if(kJ[t])return kJ[t];var e=gf.rgb2arr(t),n=e[0],i=e[1],a=e[2],o=(n*299+i*587+a*114)/1e3<128;return o};function het(r,t,e){if(e.length!==0){var n=e[0].get("element"),i=n.geometry.theme,a=i.labels||{},o=a.fillColorLight,s=a.fillColorDark;e.forEach(function(l,u){var c=t[u],f=c.find(function(m){return m.get("type")==="text"}),d=Po.fromObject(l.getBBox()),h=Po.fromObject(f.getCanvasBBox()),v=!d.contains(h),p=l.attr("fill"),g=det(p);v?f.attr(i.overflowLabels.style):g?o&&f.attr("fill",o):s&&f.attr("fill",s)})}}function vet(r,t,e){var n=r.coordinate,i=Sf(t),a=Po.fromObject(i.getCanvasBBox()),o=Po.fromObject(e.getBBox());return n.isTransposed?o.height>=a.height:o.width>=a.width}function pet(r,t,e){var n=!!r.getAdjust("stack");return n||t.every(function(i,a){var o=e[a];return vet(r,i,o)})}function get(r,t,e){var n=r.coordinate,i=Po.fromObject(e.getBBox()),a=Sf(t);n.isTransposed?a.attr({x:i.minX+i.width/2,textAlign:"center"}):a.attr({y:i.minY+i.height/2,textBaseline:"middle"})}function met(r,t,e){var n;if(e.length!==0){var i=(n=e[0])===null||n===void 0?void 0:n.get("element"),a=i==null?void 0:i.geometry;if(!(!a||a.type!=="interval")){var o=pet(a,t,e);o&&e.forEach(function(s,l){var u=t[l];get(a,u,s)})}}}function yet(r){var t=500,e=[],n=Math.max(Math.floor(r.length/t),1);return G(r,function(i,a){a%n==0?e.push(i):i.set("visible",!1)}),e}function bet(r,t,e){var n;if(e.length!==0){var i=(n=e[0])===null||n===void 0?void 0:n.get("element"),a=i==null?void 0:i.geometry;if(!(!a||a.type!=="interval")){var o=yet(t),s=a.getXYFields()[0],l=[],u=[],c=uo(o,function(p){return p.get("data")[s]}),f=Cc(Kn(o,function(p){return p.get("data")[s]})),d;o.forEach(function(p){p.set("visible",!0)});var h=function(p){p&&(p.length&&u.push(p.pop()),u.push.apply(u,p))};for(la(f)>0&&(d=f.shift(),h(c[d])),la(f)>0&&(d=f.pop(),h(c[d])),G(f.reverse(),function(p){h(c[p])});u.length>0;){var v=u.shift();v.get("visible")&&(QQe(v,l)?v.set("visible",!1):l.push(v))}}}}function xet(r,t){var e=r.getXYFields()[1],n=[],i=t.sort(function(a,o){return a.get("data")[e]-a.get("data")[e]});return i.length>0&&n.push(i.shift()),i.length>0&&n.push(i.pop()),n.push.apply(n,i),n}function MJ(r,t,e){return r.some(function(n){return e(n,t)})}function wet(r,t,e){e===void 0&&(e=0);var n=Math.max(0,Math.min(r.x+r.width+e,t.x+t.width+e)-Math.max(r.x-e,t.x-e)),i=Math.max(0,Math.min(r.y+r.height+e,t.y+t.height+e)-Math.max(r.y-e,t.y-e));return n*i}function IJ(r,t){return MJ(r,t,function(e,n){var i=Sf(e),a=Sf(n);return wet(i.getCanvasBBox(),a.getCanvasBBox(),2)>0})}function Cet(r,t,e,n,i){var a,o;if(e.length!==0){var s=(a=e[0])===null||a===void 0?void 0:a.get("element"),l=s==null?void 0:s.geometry;if(!(!l||l.type!=="point")){var u=l.getXYFields(),c=u[0],f=u[1],d=uo(t,function(p){return p.get("data")[c]}),h=[],v=i&&i.offset||((o=r[0])===null||o===void 0?void 0:o.offset)||12;Kn(nd(d).reverse(),function(p){for(var g=xet(l,d[p]);g.length;){var m=g.shift(),y=Sf(m);if(MJ(h,m,function(w,S){return w.get("data")[c]===S.get("data")[c]&&w.get("data")[f]===S.get("data")[f]})){y.set("visible",!1);continue}var b=IJ(h,m),x=!1;if(b&&(y.attr("y",y.attr("y")+2*v),x=IJ(h,m)),x){y.set("visible",!1);continue}h.push(m)}})}}}function Eet(r,t){var e=r.getXYFields()[1],n=[],i=t.sort(function(a,o){return a.get("data")[e]-a.get("data")[e]});return i.length>0&&n.push(i.shift()),i.length>0&&n.push(i.pop()),n.push.apply(n,i),n}function PJ(r,t,e){return r.some(function(n){return e(n,t)})}function _et(r,t,e){e===void 0&&(e=0);var n=Math.max(0,Math.min(r.x+r.width+e,t.x+t.width+e)-Math.max(r.x-e,t.x-e)),i=Math.max(0,Math.min(r.y+r.height+e,t.y+t.height+e)-Math.max(r.y-e,t.y-e));return n*i}function DJ(r,t){return PJ(r,t,function(e,n){var i=Sf(e),a=Sf(n);return _et(i.getCanvasBBox(),a.getCanvasBBox(),2)>0})}function Tet(r,t,e,n,i){var a,o;if(e.length!==0){var s=(a=e[0])===null||a===void 0?void 0:a.get("element"),l=s==null?void 0:s.geometry;if(!(!l||["path","line","area"].indexOf(l.type)<0)){var u=l.getXYFields(),c=u[0],f=u[1],d=uo(t,function(p){return p.get("data")[c]}),h=[],v=i&&i.offset||((o=r[0])===null||o===void 0?void 0:o.offset)||12;Kn(nd(d).reverse(),function(p){for(var g=Eet(l,d[p]);g.length;){var m=g.shift(),y=Sf(m);if(PJ(h,m,function(w,S){return w.get("data")[c]===S.get("data")[c]&&w.get("data")[f]===S.get("data")[f]})){y.set("visible",!1);continue}var b=DJ(h,m),x=!1;if(b&&(y.attr("y",y.attr("y")+2*v),x=DJ(h,m)),x){y.set("visible",!1);continue}h.push(m)}})}}}var nR;function Aet(){return nR||(nR=document.createElement("canvas").getContext("2d")),nR}var f2=ad(function(r,t){t===void 0&&(t={});var e=t.fontSize,n=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant,s=Aet();return s.font=[a,o,i,e+"px",n].join(" "),s.measureText(ot(r)?r:"").width},function(r,t){return t===void 0&&(t={}),oi([r],Sv(t),!0).join("")}),ket=function(r,t,e){var n=16,i=f2("...",e),a;ot(r)?a=r:a=Ec(r);var o=t,s=[],l,u;if(f2(r,e)<=t)return r;for(;l=a.substr(0,n),u=f2(l,e),!(u+i>o&&u>o);)if(s.push(l),o-=u,a=a.substr(n),!a)return s.join("");for(;l=a.substr(0,1),u=f2(l,e),!(u+i>o);)if(s.push(l),o-=u,a=a.substr(1),!a)return s.join("");return s.join("")+"..."};function Met(r,t,e,n,i){if(!(t.length<=0)){var a=(i==null?void 0:i.direction)||["top","right","bottom","left"],o=(i==null?void 0:i.action)||"translate",s=(i==null?void 0:i.margin)||0,l=t[0].get("coordinate");if(!!l){var u=GZe(l,s),c=u.minX,f=u.minY,d=u.maxX,h=u.maxY;G(t,function(v){var p=v.getCanvasBBox(),g=p.minX,m=p.minY,y=p.maxX,b=p.maxY,x=p.x,w=p.y,S=p.width,C=p.height,_=x,T=w;if(a.indexOf("left")>=0&&(g<c||y<c)&&(_=c),a.indexOf("top")>=0&&(m<f||b<f)&&(T=f),a.indexOf("right")>=0&&(g>d?_=d-S:y>d&&(_=_-(y-d))),a.indexOf("bottom")>=0&&(m>h?T=h-C:b>h&&(T=T-(b-h))),_!==x||T!==w){var E=_-x;if(o==="translate")nb(v,E,T-w);else if(o==="ellipsis"){var k=v.findAll(function(I){return I.get("type")==="text"});k.forEach(function(I){var P=Hx(I.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),F=I.getCanvasBBox(),$=ket(I.attr("text"),F.width-Math.abs(E),P);I.attr("text",$)})}else v.hide()}})}}}function Iet(r,t,e){var n={fillOpacity:nt(r.attr("fillOpacity"))?1:r.attr("fillOpacity"),strokeOpacity:nt(r.attr("strokeOpacity"))?1:r.attr("strokeOpacity"),opacity:nt(r.attr("opacity"))?1:r.attr("opacity")};r.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),r.animate(n,t)}function Pet(r,t,e){var n={fillOpacity:0,strokeOpacity:0,opacity:0},i=t.easing,a=t.duration,o=t.delay;r.animate(n,a,i,function(){r.remove(!0)},o)}function Det(r,t,e){var n,i=t[0],a=t[1];return r.applyToMatrix([i,a,1]),e==="x"?(r.setMatrix(Zn(r.getMatrix(),[["t",-i,-a],["s",.01,1],["t",i,a]])),n=Zn(r.getMatrix(),[["t",-i,-a],["s",100,1],["t",i,a]])):e==="y"?(r.setMatrix(Zn(r.getMatrix(),[["t",-i,-a],["s",1,.01],["t",i,a]])),n=Zn(r.getMatrix(),[["t",-i,-a],["s",1,100],["t",i,a]])):e==="xy"&&(r.setMatrix(Zn(r.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]])),n=Zn(r.getMatrix(),[["t",-i,-a],["s",100,100],["t",i,a]])),n}function iR(r,t,e,n,i){var a=e.start,o=e.end,s=e.getWidth(),l=e.getHeight(),u,c;i==="y"?(u=a.x+s/2,c=n.y<a.y?n.y:a.y):i==="x"?(u=n.x>a.x?n.x:a.x,c=a.y+l/2):i==="xy"&&(e.isPolar?(u=e.getCenter().x,c=e.getCenter().y):(u=(a.x+o.x)/2,c=(a.y+o.y)/2));var f=Det(r,[u,c],i);r.animate({matrix:f},t)}function Ret(r,t,e){var n=e.coordinate,i=e.minYPoint;iR(r,t,n,i,"x")}function Oet(r,t,e){var n=e.coordinate,i=e.minYPoint;iR(r,t,n,i,"y")}function Let(r,t,e){var n=e.coordinate,i=e.minYPoint;iR(r,t,n,i,"xy")}function Fet(r,t,e){var n=r.getTotalLength();r.attr("lineDash",[n]),r.animate(function(i){return{lineDashOffset:(1-i)*n}},t)}function Net(r,t,e){var n=e.toAttrs,i=n.x,a=n.y;delete n.x,delete n.y,r.attr(n),r.animate({x:i,y:a},t)}function Bet(r,t,e){var n=r.getBBox(),i=r.get("origin").mappingData,a=i.points,o=a[0].y-a[1].y>0?n.maxX:n.minX,s=(n.minY+n.maxY)/2;r.applyToMatrix([o,s,1]);var l=Zn(r.getMatrix(),[["t",-o,-s],["s",.01,1],["t",o,s]]);r.setMatrix(l),r.animate({matrix:Zn(r.getMatrix(),[["t",-o,-s],["s",100,1],["t",o,s]])},t)}function $et(r,t,e){var n=r.getBBox(),i=r.get("origin").mappingData,a=(n.minX+n.maxX)/2,o=i.points,s=o[0].y-o[1].y<=0?n.maxY:n.minY;r.applyToMatrix([a,s,1]);var l=Zn(r.getMatrix(),[["t",-a,-s],["s",1,.01],["t",a,s]]);r.setMatrix(l),r.animate({matrix:Zn(r.getMatrix(),[["t",-a,-s],["s",1,100],["t",a,s]])},t)}function RJ(r,t){var e,n=j1(r,t),i=n.startAngle,a=n.endAngle;return!ba(i,-Math.PI*.5)&&i<-Math.PI*.5&&(i+=Math.PI*2),!ba(a,-Math.PI*.5)&&a<-Math.PI*.5&&(a+=Math.PI*2),t[5]===0&&(e=[a,i],i=e[0],a=e[1]),ba(i,Math.PI*1.5)&&(i=Math.PI*-.5),ba(a,Math.PI*-.5)&&(a=Math.PI*1.5),{startAngle:i,endAngle:a}}function OJ(r){var t;return r[0]==="M"||r[0]==="L"?t=[r[1],r[2]]:(r[0]==="a"||r[0]==="A"||r[0]==="C")&&(t=[r[r.length-2],r[r.length-1]]),t}function LJ(r){var t,e,n,i=r.filter(function(b){return b[0]==="A"||b[0]==="a"});if(i.length===0)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var a=i[0],o=i.length>1?i[1]:i[0],s=r.indexOf(a),l=r.indexOf(o),u=OJ(r[s-1]),c=OJ(r[l-1]),f=RJ(u,a),d=f.startAngle,h=f.endAngle,v=RJ(c,o),p=v.startAngle,g=v.endAngle;ba(d,p)&&ba(h,g)?(e=d,n=h):(e=Math.min(d,p),n=Math.max(h,g));var m=a[1],y=i[i.length-1][1];return m<y?(t=[y,m],m=t[0],y=t[1]):m===y&&(y=0),{startAngle:e,endAngle:n,radius:m,innerRadius:y}}function zet(r,t,e){var n=e.toAttrs,i=e.coordinate,a=n.path||[],o=a.map(function(y){return y[0]});if(!(a.length<1)){var s=LJ(a),l=s.startAngle,u=s.endAngle,c=s.radius,f=s.innerRadius,d=LJ(r.attr("path")),h=d.startAngle,v=d.endAngle,p=i.getCenter(),g=l-h,m=u-v;if(g===0&&m===0){r.attr("path",a);return}r.animate(function(y){var b=h+y*g,x=v+y*m;return A(A({},n),{path:ci(o,["M","A","A","Z"])?cQ(p.x,p.y,c,b,x):mf(p.x,p.y,c,b,x,f)})},A(A({},t),{callback:function(){r.attr("path",a)}}))}}function Get(r,t,e){var n=dQ(e.coordinate,20),i=n.type,a=n.startState,o=n.endState,s=r.setClip({type:i,attrs:a});s.animate(o,A(A({},t),{callback:function(){r&&!r.get("destroyed")&&r.set("clipShape",null),s.remove(!0)}}))}function aR(r,t,e){if(r.isGroup())G(r.getChildren(),function(s){aR(s,t,e)});else{var n=r.getBBox(),i=(n.minX+n.maxX)/2,a=(n.minY+n.maxY)/2;if(r.applyToMatrix([i,a,1]),e==="zoomIn"){var o=Zn(r.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]]);r.setMatrix(o),r.animate({matrix:Zn(r.getMatrix(),[["t",-i,-a],["s",100,100],["t",i,a]])},t)}else r.animate({matrix:Zn(r.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]])},A(A({},t),{callback:function(){r.remove(!0)}}))}}function Uet(r,t,e){aR(r,t,"zoomIn")}function Vet(r,t,e){aR(r,t,"zoomOut")}function Zu(r){return[Wt.TOP,Wt.BOTTOM].includes(r)?{offsetX:0,offsetY:r===Wt.TOP?-8:8,style:{textAlign:"center",textBaseline:r===Wt.TOP?"bottom":"top"}}:[Wt.LEFT,Wt.RIGHT].includes(r)?{offsetX:r===Wt.LEFT?-8:8,offsetY:0,style:{textAlign:r===Wt.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function oR(r,t,e){return{x:r.x+t*Math.cos(e),y:r.y+t*Math.sin(e)}}var Het=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return Dt({},r.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this)})},t.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.getRegion=function(e,n){var i=1/2,a={x:.5,y:.5},o=Math.PI*2/e,s=-1*Math.PI/2+o*n,l=i/(1+1/Math.sin(o/2)),u=oR(a,i-l,s),c=Math.PI*5/4,f=Math.PI*1/4;return{start:oR(u,l,c),end:oR(u,l,f)}},t.prototype.afterEachView=function(e,n){this.processAxis(e,n)},t.prototype.beforeEachView=function(e,n){},t.prototype.generateFacets=function(e){var n=this,i=this.cfg,a=i.fields,o=i.type,s=a[0];if(!s)throw new Error("No `fields` specified!");var l=this.getFieldValues(e,s),u=l.length,c=[];return l.forEach(function(f,d){var h=[{field:s,value:f,values:l}],v=ya(e,n.getFacetDataFilter(h)),p={type:o,data:v,region:n.getRegion(u,d),columnValue:f,columnField:s,columnIndex:d,columnValuesLength:u,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};c.push(p)}),c},t.prototype.getXAxisOption=function(e,n,i,a){return i},t.prototype.getYAxisOption=function(e,n,i,a){return i},t.prototype.renderTitle=function(){var e=this;G(this.facets,function(n){var i=n.columnValue,a=n.view,o=ae(e.cfg.title,"formatter"),s=Dt({position:["50%","0%"],content:o?o(i):i},Zu(Wt.TOP),e.cfg.title);a.annotation().text(s)})},t}(rg),Wet=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return Dt({},r.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this)})},t.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.afterEachView=function(e,n){this.processAxis(e,n)},t.prototype.beforeEachView=function(e,n){},t.prototype.generateFacets=function(e){var n=this,i=this.cfg.fields,a=this.cfg.cols,o=i[0];if(!o)throw new Error("No `fields` specified!");var s=this.getFieldValues(e,o),l=s.length;a=a||l;var u=this.getPageCount(l,a),c=[];return s.forEach(function(f,d){var h=n.getRowCol(d,a),v=h.row,p=h.col,g=[{field:o,value:f,values:s}],m=ya(e,n.getFacetDataFilter(g)),y={type:n.cfg.type,data:m,region:n.getRegion(u,a,p,v),columnValue:f,rowValue:f,columnField:o,rowField:null,columnIndex:p,rowIndex:v,columnValuesLength:a,rowValuesLength:u,total:l};c.push(y)}),c},t.prototype.getXAxisOption=function(e,n,i,a){return a.rowIndex!==a.rowValuesLength-1&&a.columnValuesLength*a.rowIndex+a.columnIndex+1+a.columnValuesLength<=a.total?A(A({},i),{label:null,title:null}):i},t.prototype.getYAxisOption=function(e,n,i,a){return a.columnIndex!==0?A(A({},i),{title:null,label:null}):i},t.prototype.renderTitle=function(){var e=this;G(this.facets,function(n){var i=n.columnValue,a=n.view,o=ae(e.cfg.title,"formatter"),s=Dt({position:["50%","0%"],content:o?o(i):i},Zu(Wt.TOP),e.cfg.title);a.annotation().text(s)})},t.prototype.getPageCount=function(e,n){return Math.floor((e+n-1)/n)},t.prototype.getRowCol=function(e,n){var i=Math.floor(e/n),a=e%n;return{row:i,col:a}},t}(rg),jet=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return Dt({},r.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:A({},r.prototype.getDefaultTitleCfg.call(this)),rowTitle:A({},r.prototype.getDefaultTitleCfg.call(this))})},t.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.afterEachView=function(e,n){this.processAxis(e,n)},t.prototype.beforeEachView=function(e,n){},t.prototype.generateFacets=function(e){for(var n=this.cfg,i=n.fields,a=n.type,o=i.length,s=o,l=[],u=0;u<s;u++)for(var c=i[u],f=0;f<o;f++){var d=i[f],h={type:a,data:e,region:this.getRegion(o,s,u,f),columnValue:c,rowValue:d,columnField:c,rowField:d,columnIndex:u,rowIndex:f,columnValuesLength:s,rowValuesLength:o};l.push(h)}return l},t.prototype.getXAxisOption=function(e,n,i,a){return a.rowIndex!==a.rowValuesLength-1?A(A({},i),{label:null,title:null}):i},t.prototype.getYAxisOption=function(e,n,i,a){return a.columnIndex!==0?A(A({},i),{title:null,label:null}):i},t.prototype.renderTitle=function(){var e=this;G(this.facets,function(n,i){var a=n.columnIndex,o=n.rowIndex,s=n.columnValuesLength;n.rowValuesLength;var l=n.columnValue,u=n.rowValue,c=n.view;if(o===0){var f=ae(e.cfg.columnTitle,"formatter"),d=Dt({position:["50%","0%"],content:f?f(l):l},Zu(Wt.TOP),e.cfg.columnTitle);c.annotation().text(d)}if(a===s-1){var f=ae(e.cfg.rowTitle,"formatter"),d=Dt({position:["100%","50%"],content:f?f(u):u},Zu(Wt.RIGHT),e.cfg.rowTitle);c.annotation().text(d)}})},t}(rg),Yet=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return Dt({},r.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this),transpose:!1})},t.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.beforeEachView=function(e,n){this.cfg.transpose?n.columnIndex%2==0?e.coordinate().transpose().reflect("x"):e.coordinate().transpose():n.rowIndex%2!=0&&e.coordinate().reflect("y")},t.prototype.afterEachView=function(e,n){this.processAxis(e,n)},t.prototype.generateFacets=function(e){var n=this,i=this.cfg.fields[0],a=[],o=1,s=1,l=[""],u=[""],c,f;return this.cfg.transpose?(c=i,l=this.getFieldValues(e,c).slice(0,2),o=l.length):(f=i,u=this.getFieldValues(e,f).slice(0,2),s=u.length),l.forEach(function(d,h){u.forEach(function(v,p){var g=[{field:c,value:d,values:l},{field:f,value:v,values:u}],m=ya(e,n.getFacetDataFilter(g)),y={type:n.cfg.type,data:m,region:n.getRegion(s,o,h,p),columnValue:d,rowValue:v,columnField:c,rowField:f,columnIndex:h,rowIndex:p,columnValuesLength:o,rowValuesLength:s};a.push(y)})}),a},t.prototype.getXAxisOption=function(e,n,i,a){return a.columnIndex===1||a.rowIndex===1?A(A({},i),{label:null,title:null}):i},t.prototype.getYAxisOption=function(e,n,i,a){return i},t.prototype.renderTitle=function(){var e=this;G(this.facets,function(n,i){var a=n.columnValue,o=n.rowValue,s=n.view,l=ae(e.cfg.title,"formatter");if(e.cfg.transpose){var u=Dt({position:["50%","0%"],content:l?l(a):a},Zu(Wt.TOP),e.cfg.title);s.annotation().text(u)}else{var u=Dt({position:["100%","50%"],content:l?l(o):o},Zu(Wt.RIGHT),e.cfg.title);s.annotation().text(u)}})},t}(rg),Xet=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.afterEachView=function(e,n){this.processAxis(e,n)},t.prototype.beforeEachView=function(e,n){},t.prototype.getDefaultCfg=function(){return Dt({},r.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:A({},r.prototype.getDefaultTitleCfg.call(this)),rowTitle:A({},r.prototype.getDefaultTitleCfg.call(this))})},t.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.generateFacets=function(e){var n=this,i=this.cfg.fields,a=i[0],o=i[1],s=[],l=1,u=1,c=[""],f=[""];return a&&(c=this.getFieldValues(e,a),l=c.length),o&&(f=this.getFieldValues(e,o),u=f.length),c.forEach(function(d,h){f.forEach(function(v,p){var g=[{field:a,value:d,values:c},{field:o,value:v,values:f}],m=ya(e,n.getFacetDataFilter(g)),y={type:n.cfg.type,data:m,region:n.getRegion(u,l,h,p),columnValue:d,rowValue:v,columnField:a,rowField:o,columnIndex:h,rowIndex:p,columnValuesLength:l,rowValuesLength:u};s.push(y)})}),s},t.prototype.renderTitle=function(){var e=this;G(this.facets,function(n,i){var a=n.columnIndex,o=n.rowIndex,s=n.columnValuesLength,l=n.columnValue,u=n.rowValue,c=n.view;if(o===0){var f=ae(e.cfg.columnTitle,"formatter"),d=Dt({position:["50%","0%"],content:f?f(l):l},Zu(Wt.TOP),e.cfg.columnTitle);c.annotation().text(d)}if(a===s-1){var f=ae(e.cfg.rowTitle,"formatter"),d=Dt({position:["100%","50%"],content:f?f(u):u},Zu(Wt.RIGHT),e.cfg.rowTitle);c.annotation().text(d)}})},t.prototype.getXAxisOption=function(e,n,i,a){return a.rowIndex!==a.rowValuesLength-1?A(A({},i),{title:null,label:null}):a.columnIndex!==Math.floor((a.columnValuesLength-1)/2)?A(A({},i),{title:null}):i},t.prototype.getYAxisOption=function(e,n,i,a){return a.columnIndex!==0?A(A({},i),{title:null,label:null}):a.rowIndex!==Math.floor((a.rowValuesLength-1)/2)?A(A({},i),{title:null}):i},t}(rg),qet=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.afterChartRender=function(){e.facets&&e.cfg.line&&(e.container.clear(),e.drawLines(e.facets))},e}return t.prototype.afterEachView=function(e,n){this.processAxis(e,n)},t.prototype.beforeEachView=function(e,n){},t.prototype.init=function(){r.prototype.init.call(this),this.view.on(Hr.AFTER_RENDER,this.afterChartRender)},t.prototype.getDefaultCfg=function(){return Dt({},r.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this)})},t.prototype.generateFacets=function(e){var n=this.cfg.fields;if(!n.length)throw new Error("Please specify for the fields for rootFacet!");var i=[],a={type:this.cfg.type,data:e,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return i.push(a),a.children=this.getChildFacets(e,1,i),this.setRegion(i),i},t.prototype.setRegion=function(e){var n=this;this.forceColIndex(e),e.forEach(function(i){i.region=n.getRegion(i.rowValuesLength,i.columnValuesLength,i.columnIndex,i.rowIndex)})},t.prototype.getRegion=function(e,n,i,a){var o=1/n,s=1/e,l={x:o*i,y:s*a},u={x:l.x+o,y:l.y+s*2/3};return{start:l,end:u}},t.prototype.forceColIndex=function(e){var n=this,i=[],a=0;e.forEach(function(d){n.isLeaf(d)&&(i.push(d),d.columnIndex=a,a++)}),i.forEach(function(d){d.columnValuesLength=i.length});for(var o=this.cfg.fields.length,s=o-1;s>=0;s--)for(var l=this.getFacetsByLevel(e,s),u=0,c=l;u<c.length;u++){var f=c[u];this.isLeaf(f)||(f.originColIndex=f.columnIndex,f.columnIndex=this.getRegionIndex(f.children),f.columnValuesLength=i.length)}},t.prototype.getFacetsByLevel=function(e,n){var i=[];return e.forEach(function(a){a.rowIndex===n&&i.push(a)}),i},t.prototype.getRegionIndex=function(e){var n=e[0],i=e[e.length-1];return(i.columnIndex-n.columnIndex)/2+n.columnIndex},t.prototype.isLeaf=function(e){return!e.children||!e.children.length},t.prototype.getRows=function(){return this.cfg.fields.length+1},t.prototype.getChildFacets=function(e,n,i){var a=this,o=this.cfg.fields,s=o.length;if(!(s<n)){var l=[],u=o[n-1],c=this.getFieldValues(e,u);return c.forEach(function(f,d){var h=[{field:u,value:f,values:c}],v=e.filter(a.getFacetDataFilter(h));if(v.length){var p={type:a.cfg.type,data:v,region:null,columnValue:f,rowValue:"",columnField:u,rowField:"",columnIndex:d,rowValuesLength:a.getRows(),columnValuesLength:1,rowIndex:n,children:a.getChildFacets(v,n+1,i)};l.push(p),i.push(p)}}),l}},t.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.renderTitle=function(){var e=this;G(this.facets,function(n){var i=n.columnValue,a=n.view,o=ae(e.cfg.title,"formatter"),s=Dt({position:["50%","0%"],content:o?o(i):i},Zu(Wt.TOP),e.cfg.title);a.annotation().text(s)})},t.prototype.drawLines=function(e){var n=this;e.forEach(function(i){if(!n.isLeaf(i)){var a=i.children;n.addFacetLines(i,a)}})},t.prototype.addFacetLines=function(e,n){var i=this,a=e.view,o=a.coordinateBBox,s={x:o.x+o.width/2,y:o.y+o.height};n.forEach(function(l){var u=l.view.coordinateBBox,c={x:u.bl.x+(u.tr.x-u.bl.x)/2,y:u.tr.y},f={x:s.x,y:s.y+(c.y-s.y)/2},d={x:c.x,y:f.y};i.drawLine([s,f,d,c])})},t.prototype.getPath=function(e){var n=[],i=this.cfg.line.smooth;return i?(n.push(["M",e[0].x,e[0].y]),n.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y])):e.forEach(function(a,o){o===0?n.push(["M",a.x,a.y]):n.push(["L",a.x,a.y])}),n},t.prototype.drawLine=function(e){var n=this.getPath(e),i=this.cfg.line.style;this.container.addShape("path",{attrs:jt({path:n},i)})},t.prototype.getXAxisOption=function(e,n,i,a){return a.rowIndex!==a.rowValuesLength-1?A(A({},i),{title:null,label:null}):i},t.prototype.getYAxisOption=function(e,n,i,a){return a.originColIndex!==0&&a.columnIndex!==0?A(A({},i),{title:null,label:null}):i},t}(rg);function FJ(r){var t=oi([],r,!0);t.sort(function(n,i){return n-i});var e=t.length;return e===0?0:e%2==1?t[(e-1)/2]:(t[e/2]+t[e/2-1])/2}function Ket(r){var t=Ya(r,function(e,n){return e+=isNaN(n)||!zt(n)?0:n},0);return r.length===0?0:t/r.length}function d2(r,t){if(!t)return null;var e;switch(r){case"start":return 0;case"center":return .5;case"end":return 1;case"median":{e=t.isCategory?FJ(t.values.map(function(n,i){return i})):FJ(t.values);break}case"mean":{e=t.isCategory?(t.values.length-1)/2:Ket(t.values);break}case"min":e=t.isCategory?0:t[r];break;case"max":e=t.isCategory?t.values.length-1:t[r];break;default:e=r;break}return t.scale(e)}var h2=["regionFilter","shape"],Zet=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;return n.cache=new Map,n.foregroundContainer=n.view.getLayer(Vi.FORE).addGroup(),n.backgroundContainer=n.view.getLayer(Vi.BG).addGroup(),n.option=[],n}return Object.defineProperty(t.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.layout=function(){this.update()},t.prototype.render=function(){},t.prototype.update=function(){var e=this;this.onAfterRender(function(){var i=new Map;G(e.option,function(a){if(Ml(h2,a.type)){var o=e.updateOrCreate(a);o&&i.set(e.getCacheKey(a),o)}}),e.cache=e.syncCache(i)});var n=new Map;G(this.option,function(i){if(!Ml(h2,i.type)){var a=e.updateOrCreate(i);a&&n.set(e.getCacheKey(i),a)}}),this.cache=this.syncCache(n)},t.prototype.clear=function(e){e===void 0&&(e=!1),r.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),e&&(this.option=[])},t.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},t.prototype.getComponents=function(){var e=[];return this.cache.forEach(function(n){e.push(n)}),e},t.prototype.clearComponents=function(){this.getComponents().forEach(function(e){e.component.destroy()}),this.cache.clear()},t.prototype.onAfterRender=function(e){this.view.getOptions().animate?this.view.geometries.forEach(function(n){n.animateOption&&n.once(Xp.AFTER_DRAW_ANIMATE,function(){e()})}):this.view.getRootView().once(Hr.AFTER_RENDER,function(){e()})},t.prototype.createAnnotation=function(e){var n=e.type,i=OKe[ls(n)];if(i){var a=this.getAnnotationTheme(n),o=this.getAnnotationCfg(n,e,a),s=new i(o);return{component:s,layer:this.isTop(o)?Vi.FORE:Vi.BG,direction:Wt.NONE,type:ka.ANNOTATION,extra:e}}},t.prototype.annotation=function(e){this.option.push(e)},t.prototype.arc=function(e){return this.annotation(A({type:"arc"},e)),this},t.prototype.image=function(e){return this.annotation(A({type:"image"},e)),this},t.prototype.line=function(e){return this.annotation(A({type:"line"},e)),this},t.prototype.region=function(e){return this.annotation(A({type:"region"},e)),this},t.prototype.text=function(e){return this.annotation(A({type:"text"},e)),this},t.prototype.dataMarker=function(e){return this.annotation(A({type:"dataMarker"},e)),this},t.prototype.dataRegion=function(e){this.annotation(A({type:"dataRegion"},e))},t.prototype.regionFilter=function(e){this.annotation(A({type:"regionFilter"},e))},t.prototype.shape=function(e){this.annotation(A({type:"shape"},e))},t.prototype.html=function(e){this.annotation(A({type:"html"},e))},t.prototype.parsePosition=function(e){var n=this.view.getXScale(),i=this.view.getScalesByDim("y"),a=Kt(e)?e.call(null,n,i):e,o=0,s=0;if(Qe(a)){var l=a[0],u=a[1];if(ot(l)&&l.indexOf("%")!==-1&&!isNaN(l.slice(0,-1)))return this.parsePercentPosition(a);o=d2(l,n),s=d2(u,Object.values(i)[0])}else if(!nt(a))for(var c=0,f=nd(a);c<f.length;c++){var d=f[c],h=a[d];d===n.field&&(o=d2(h,n)),i[d]&&(s=d2(h,i[d]))}return this.view.getCoordinate().convert({x:o,y:s})},t.prototype.getRegionPoints=function(e,n){var i=this,a=this.view.getXScale(),o=this.view.getScalesByDim("y"),s=Object.values(o)[0],l=a.field,u=this.view.getData(),c=Qe(e)?e[0]:e[l],f=Qe(n)?n[0]:n[l],d=[],h;return G(u,function(v,p){if(v[l]===c&&(h=p),p>=h){var g=i.parsePosition([v[l],v[s.field]]);g&&d.push(g)}if(v[l]===f)return!1}),d},t.prototype.parsePercentPosition=function(e){var n=parseFloat(e[0])/100,i=parseFloat(e[1])/100,a=this.view.getCoordinate(),o=a.start,s=a.end,l={x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)},u=a.getWidth()*n+l.x,c=a.getHeight()*i+l.y;return{x:u,y:c}},t.prototype.getCoordinateBBox=function(){var e=this.view.getCoordinate(),n=e.start,i=e.end,a=e.getWidth(),o=e.getHeight(),s={x:Math.min(n.x,i.x),y:Math.min(n.y,i.y)};return{x:s.x,y:s.y,minX:s.x,minY:s.y,maxX:s.x+a,maxY:s.y+o,width:a,height:o}},t.prototype.getAnnotationCfg=function(e,n,i){var a=this,o=this.view.getCoordinate(),s=this.view.getCanvas(),l={};if(nt(n))return null;if(e==="arc"){var u=n,c=u.start,f=u.end,d=Ur(u,["start","end"]),h=this.parsePosition(c),v=this.parsePosition(f),p=tg(o,h),g=tg(o,v);p>g&&(g=Math.PI*2+g),l=A(A({},d),{center:o.getCenter(),radius:KC(o,h),startAngle:p,endAngle:g})}else if(e==="image"){var m=n,c=m.start,f=m.end,d=Ur(m,["start","end"]);l=A(A({},d),{start:this.parsePosition(c),end:this.parsePosition(f),src:n.src})}else if(e==="line"){var y=n,c=y.start,f=y.end,d=Ur(y,["start","end"]);l=A(A({},d),{start:this.parsePosition(c),end:this.parsePosition(f),text:ae(n,"text",null)})}else if(e==="region"){var b=n,c=b.start,f=b.end,d=Ur(b,["start","end"]);l=A(A({},d),{start:this.parsePosition(c),end:this.parsePosition(f)})}else if(e==="text"){var x=this.view.getData(),w=n,S=w.position,C=w.content,d=Ur(w,["position","content"]),_=C;Kt(C)&&(_=C(x)),l=A(A(A({},this.parsePosition(S)),d),{content:_})}else if(e==="dataMarker"){var T=n,S=T.position,E=T.point,k=T.line,I=T.text,P=T.autoAdjust,F=T.direction,d=Ur(T,["position","point","line","text","autoAdjust","direction"]);l=A(A(A({},d),this.parsePosition(S)),{coordinateBBox:this.getCoordinateBBox(),point:E,line:k,text:I,autoAdjust:P,direction:F})}else if(e==="dataRegion"){var $=n,c=$.start,f=$.end,R=$.region,I=$.text,L=$.lineLength,d=Ur($,["start","end","region","text","lineLength"]);l=A(A({},d),{points:this.getRegionPoints(c,f),region:R,text:I,lineLength:L})}else if(e==="regionFilter"){var O=n,c=O.start,f=O.end,B=O.apply,U=O.color,d=Ur(O,["start","end","apply","color"]),W=this.view.geometries,X=[],ie=function(V){!V||(V.isGroup()?V.getChildren().forEach(function(he){return ie(he)}):X.push(V))};G(W,function(V){B?Ml(B,V.type)&&G(V.elements,function(he){ie(he.shape)}):G(V.elements,function(he){ie(he.shape)})}),l=A(A({},d),{color:U,shapes:X,start:this.parsePosition(c),end:this.parsePosition(f)})}else if(e==="shape"){var q=n,j=q.render,fe=Ur(q,["render"]),se=function(De){if(Kt(n.render))return j(De,a.view,{parsePosition:a.parsePosition.bind(a)})};l=A(A({},fe),{render:se})}else if(e==="html"){var ce=n,_e=ce.html,S=ce.position,fe=Ur(ce,["html","position"]),Me=function(z){return Kt(_e)?_e(z,a.view):_e};l=A(A(A({},fe),this.parsePosition(S)),{parent:s.get("el").parentNode,html:Me})}var Ye=Dt({},i,A(A({},l),{top:n.top,style:n.style,offsetX:n.offsetX,offsetY:n.offsetY}));return e!=="html"&&(Ye.container=this.getComponentContainer(Ye)),Ye.animate=this.view.getOptions().animate&&Ye.animate&&ae(n,"animate",Ye.animate),Ye.animateOption=Dt({},sg,Ye.animateOption,n.animateOption),Ye},t.prototype.isTop=function(e){return ae(e,"top",!0)},t.prototype.getComponentContainer=function(e){return this.isTop(e)?this.foregroundContainer:this.backgroundContainer},t.prototype.getAnnotationTheme=function(e){return ae(this.view.getTheme(),["components","annotation",e],{})},t.prototype.updateOrCreate=function(e){var n=this.cache.get(this.getCacheKey(e));if(n){var i=e.type,a=this.getAnnotationTheme(i),o=this.getAnnotationCfg(i,e,a);Xo(o,["container"]),n.component.update(o),Ml(h2,e.type)&&n.component.render()}else n=this.createAnnotation(e),n&&(n.component.init(),Ml(h2,e.type)&&n.component.render());return n},t.prototype.syncCache=function(e){var n=this,i=new Map(this.cache);return e.forEach(function(a,o){i.set(o,a)}),i.forEach(function(a,o){Ps(n.option,function(s){return o===n.getCacheKey(s)})||(a.component.destroy(),i.delete(o))}),i},t.prototype.getCacheKey=function(e){return e},t}(og);function NJ(r,t){var e=Dt({},ae(r,["components","axis","common"]),ae(r,["components","axis",t]));return ae(e,["grid"],{})}function v2(r,t,e,n){var i=[],a=t.getTicks();return r.isPolar&&a.push({value:1,text:"",tickValue:""}),a.reduce(function(o,s,l){var u=s.value;if(n)i.push({points:[r.convert(e==="y"?{x:0,y:u}:{x:u,y:0}),r.convert(e==="y"?{x:1,y:u}:{x:u,y:1})]});else if(l){var c=o.value,f=(c+u)/2;i.push({points:[r.convert(e==="y"?{x:0,y:f}:{x:f,y:0}),r.convert(e==="y"?{x:1,y:f}:{x:f,y:1})]})}return s},a[0]),i}function sR(r,t,e,n,i){var a=t.values.length,o=[],s=e.getTicks();return s.reduce(function(l,u){var c=l?l.value:u.value,f=u.value,d=(c+f)/2;return i==="x"?o.push({points:[r.convert({x:n?f:d,y:0}),r.convert({x:n?f:d,y:1})]}):o.push({points:Kn(Array(a+1),function(h,v){return r.convert({x:v/a,y:n?f:d})})}),u},s[0]),o}function BJ(r,t){var e=ae(t,"grid");if(e===null)return!1;var n=ae(r,"grid");return!(e===void 0&&n===null)}var Cf=["container"],$J=A(A({},sg),{appear:null}),Qet=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;return n.cache=new Map,n.gridContainer=n.view.getLayer(Vi.BG).addGroup(),n.gridForeContainer=n.view.getLayer(Vi.FORE).addGroup(),n.axisContainer=n.view.getLayer(Vi.BG).addGroup(),n.axisForeContainer=n.view.getLayer(Vi.FORE).addGroup(),n}return Object.defineProperty(t.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.render=function(){this.update()},t.prototype.layout=function(){var e=this,n=this.view.getCoordinate();G(this.getComponents(),function(i){var a=i.component,o=i.direction,s=i.type,l=i.extra,u=l.dim,c=l.scale,f=l.alignTick,d;if(s===ka.AXIS)n.isPolar?u==="x"?d=n.isTransposed?ZC(n,o):kD(n):u==="y"&&(d=n.isTransposed?kD(n):ZC(n,o)):d=ZC(n,o);else if(s===ka.GRID)if(n.isPolar){var h=void 0;n.isTransposed?h=u==="x"?sR(n,e.view.getYScales()[0],c,f,u):v2(n,c,u,f):h=u==="x"?v2(n,c,u,f):sR(n,e.view.getXScale(),c,f,u),d={items:h,center:e.view.getCoordinate().getCenter()}}else d={items:v2(n,c,u,f)};a.update(d)})},t.prototype.update=function(){this.option=this.view.getOptions().axes;var e=new Map;this.updateXAxes(e),this.updateYAxes(e);var n=new Map;this.cache.forEach(function(i,a){e.has(a)?n.set(a,i):i.component.destroy()}),this.cache=n},t.prototype.clear=function(){r.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},t.prototype.getComponents=function(){var e=[];return this.cache.forEach(function(n){e.push(n)}),e},t.prototype.updateXAxes=function(e){var n=this.view.getXScale();if(!(!n||n.isIdentity)){var i=JC(this.option,n.field);if(i!==!1){var a=mQ(i,Wt.BOTTOM),o=Vi.BG,s="x",l=this.view.getCoordinate(),u=this.getId("axis",n.field),c=this.getId("grid",n.field);if(l.isRect){var f=this.cache.get(u);if(f){var d=this.getLineAxisCfg(n,i,a);Xo(d,Cf),f.component.update(d),e.set(u,f)}else f=this.createLineAxis(n,i,o,a,s),this.cache.set(u,f),e.set(u,f);var h=this.cache.get(c);if(h){var d=this.getLineGridCfg(n,i,a,s);Xo(d,Cf),h.component.update(d),e.set(c,h)}else h=this.createLineGrid(n,i,o,a,s),h&&(this.cache.set(c,h),e.set(c,h))}else if(l.isPolar){var f=this.cache.get(u);if(f){var d=l.isTransposed?this.getLineAxisCfg(n,i,Wt.RADIUS):this.getCircleAxisCfg(n,i,a);Xo(d,Cf),f.component.update(d),e.set(u,f)}else{if(l.isTransposed){if(_c(i))return;f=this.createLineAxis(n,i,o,Wt.RADIUS,s)}else f=this.createCircleAxis(n,i,o,a,s);this.cache.set(u,f),e.set(u,f)}var h=this.cache.get(c);if(h){var d=l.isTransposed?this.getCircleGridCfg(n,i,Wt.RADIUS,s):this.getLineGridCfg(n,i,Wt.CIRCLE,s);Xo(d,Cf),h.component.update(d),e.set(c,h)}else{if(l.isTransposed){if(_c(i))return;h=this.createCircleGrid(n,i,o,Wt.RADIUS,s)}else h=this.createLineGrid(n,i,o,Wt.CIRCLE,s);h&&(this.cache.set(c,h),e.set(c,h))}}}}},t.prototype.updateYAxes=function(e){var n=this,i=this.view.getYScales();G(i,function(a,o){if(!(!a||a.isIdentity)){var s=a.field,l=JC(n.option,s);if(l!==!1){var u=Vi.BG,c="y",f=n.getId("axis",s),d=n.getId("grid",s),h=n.view.getCoordinate();if(h.isRect){var v=mQ(l,o===0?Wt.LEFT:Wt.RIGHT),p=n.cache.get(f);if(p){var g=n.getLineAxisCfg(a,l,v);Xo(g,Cf),p.component.update(g),e.set(f,p)}else p=n.createLineAxis(a,l,u,v,c),n.cache.set(f,p),e.set(f,p);var m=n.cache.get(d);if(m){var g=n.getLineGridCfg(a,l,v,c);Xo(g,Cf),m.component.update(g),e.set(d,m)}else m=n.createLineGrid(a,l,u,v,c),m&&(n.cache.set(d,m),e.set(d,m))}else if(h.isPolar){var p=n.cache.get(f);if(p){var g=h.isTransposed?n.getCircleAxisCfg(a,l,Wt.CIRCLE):n.getLineAxisCfg(a,l,Wt.RADIUS);Xo(g,Cf),p.component.update(g),e.set(f,p)}else{if(h.isTransposed){if(_c(l))return;p=n.createCircleAxis(a,l,u,Wt.CIRCLE,c)}else p=n.createLineAxis(a,l,u,Wt.RADIUS,c);n.cache.set(f,p),e.set(f,p)}var m=n.cache.get(d);if(m){var g=h.isTransposed?n.getLineGridCfg(a,l,Wt.CIRCLE,c):n.getCircleGridCfg(a,l,Wt.RADIUS,c);Xo(g,Cf),m.component.update(g),e.set(d,m)}else{if(h.isTransposed){if(_c(l))return;m=n.createLineGrid(a,l,u,Wt.CIRCLE,c)}else m=n.createCircleGrid(a,l,u,Wt.RADIUS,c);m&&(n.cache.set(d,m),e.set(d,m))}}}}})},t.prototype.createLineAxis=function(e,n,i,a,o){var s={component:new PZe(this.getLineAxisCfg(e,n,a)),layer:i,direction:a===Wt.RADIUS?Wt.NONE:a,type:ka.AXIS,extra:{dim:o,scale:e}};return s.component.set("field",e.field),s.component.init(),s},t.prototype.createLineGrid=function(e,n,i,a,o){var s=this.getLineGridCfg(e,n,a,o);if(s){var l={component:new RZe(s),layer:i,direction:Wt.NONE,type:ka.GRID,extra:{dim:o,scale:e,alignTick:ae(s,"alignTick",!0)}};return l.component.init(),l}},t.prototype.createCircleAxis=function(e,n,i,a,o){var s={component:new DZe(this.getCircleAxisCfg(e,n,a)),layer:i,direction:a,type:ka.AXIS,extra:{dim:o,scale:e}};return s.component.set("field",e.field),s.component.init(),s},t.prototype.createCircleGrid=function(e,n,i,a,o){var s=this.getCircleGridCfg(e,n,a,o);if(s){var l={component:new OZe(s),layer:i,direction:Wt.NONE,type:ka.GRID,extra:{dim:o,scale:e,alignTick:ae(s,"alignTick",!0)}};return l.component.init(),l}},t.prototype.getLineAxisCfg=function(e,n,i){var a=ae(n,["top"])?this.axisForeContainer:this.axisContainer,o=this.view.getCoordinate(),s=ZC(o,i),l=yQ(e,n),u=QC(this.view.getTheme(),i),c=ae(n,["title"])?Dt({title:{style:{text:l}}},{title:gQ(this.view.getTheme(),i,n.title)},n):n,f=Dt(A(A({container:a},s),{ticks:e.getTicks().map(function(b){return{id:""+b.tickValue,name:b.text,value:b.value}}),verticalFactor:o.isPolar?pQ(s,o.getCenter())*-1:pQ(s,o.getCenter()),theme:u}),u,c),d=this.getAnimateCfg(f),h=d.animate,v=d.animateOption;f.animateOption=v,f.animate=h;var p=vQ(s),g=ae(f,"verticalLimitLength",p?1/3:1/2);if(g<=1){var m=this.view.getCanvas().get("width"),y=this.view.getCanvas().get("height");f.verticalLimitLength=g*(p?m:y)}return f},t.prototype.getLineGridCfg=function(e,n,i,a){if(!!BJ(QC(this.view.getTheme(),i),n)){var o=NJ(this.view.getTheme(),i),s=Dt({container:ae(n,["top"])?this.gridForeContainer:this.gridContainer},o,ae(n,"grid"),this.getAnimateCfg(n));return s.items=v2(this.view.getCoordinate(),e,a,ae(s,"alignTick",!0)),s}},t.prototype.getCircleAxisCfg=function(e,n,i){var a=ae(n,["top"])?this.axisForeContainer:this.axisContainer,o=this.view.getCoordinate(),s=e.getTicks().map(function(p){return{id:""+p.tickValue,name:p.text,value:p.value}});!e.isCategory&&Math.abs(o.endAngle-o.startAngle)===Math.PI*2&&s.pop();var l=yQ(e,n),u=QC(this.view.getTheme(),Wt.CIRCLE),c=ae(n,["title"])?Dt({title:{style:{text:l}}},{title:gQ(this.view.getTheme(),i,n.title)},n):n,f=Dt(A(A({container:a},kD(this.view.getCoordinate())),{ticks:s,verticalFactor:1,theme:u}),u,c),d=this.getAnimateCfg(f),h=d.animate,v=d.animateOption;return f.animate=h,f.animateOption=v,f},t.prototype.getCircleGridCfg=function(e,n,i,a){if(!!BJ(QC(this.view.getTheme(),i),n)){var o=NJ(this.view.getTheme(),Wt.RADIUS),s=Dt({container:ae(n,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},o,ae(n,"grid"),this.getAnimateCfg(n)),l=ae(s,"alignTick",!0),u=a==="x"?this.view.getYScales()[0]:this.view.getXScale();return s.items=sR(this.view.getCoordinate(),u,e,l,a),s}},t.prototype.getId=function(e,n){var i=this.view.getCoordinate();return e+"-"+n+"-"+i.type},t.prototype.getAnimateCfg=function(e){return{animate:this.view.getOptions().animate&&ae(e,"animate"),animateOption:e&&e.animateOption?Dt({},$J,e.animateOption):$J}},t}(og);function Ef(r,t,e){return e===Wt.TOP?[r.minX+r.width/2-t.width/2,r.minY]:e===Wt.BOTTOM?[r.minX+r.width/2-t.width/2,r.maxY-t.height]:e===Wt.LEFT?[r.minX,r.minY+r.height/2-t.height/2]:e===Wt.RIGHT?[r.maxX-t.width,r.minY+r.height/2-t.height/2]:e===Wt.TOP_LEFT||e===Wt.LEFT_TOP?[r.tl.x,r.tl.y]:e===Wt.TOP_RIGHT||e===Wt.RIGHT_TOP?[r.tr.x-t.width,r.tr.y]:e===Wt.BOTTOM_LEFT||e===Wt.LEFT_BOTTOM?[r.bl.x,r.bl.y-t.height]:e===Wt.BOTTOM_RIGHT||e===Wt.RIGHT_BOTTOM?[r.br.x-t.width,r.br.y-t.height]:[0,0]}function zJ(r,t){return bu(r)?r===!1?!1:{}:ae(r,[t],r)}function p2(r){return ae(r,"position",Wt.BOTTOM)}var Jet=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;return n.container=n.view.getLayer(Vi.FORE).addGroup(),n}return Object.defineProperty(t.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.render=function(){this.update()},t.prototype.layout=function(){var e=this;this.layoutBBox=this.view.viewBBox,G(this.components,function(n){var i=n.component,a=n.direction,o=WD(a),s=i.get("maxWidthRatio"),l=i.get("maxHeightRatio"),u=e.getCategoryLegendSizeCfg(o,s,l),c=i.get("maxWidth"),f=i.get("maxHeight");i.update({maxWidth:Math.min(u.maxWidth,c||0),maxHeight:Math.min(u.maxHeight,f||0)});var d=i.get("padding"),h=i.getLayoutBBox(),v=new Po(h.x,h.y,h.width,h.height).expand(d),p=Ef(e.view.viewBBox,v,a),g=p[0],m=p[1],y=Ef(e.layoutBBox,v,a),b=y[0],x=y[1],w=0,S=0;a.startsWith("top")||a.startsWith("bottom")?(w=g,S=x):(w=b,S=m),i.setLocation({x:w+d[3],y:S+d[0]}),e.layoutBBox=e.layoutBBox.cut(v,a)})},t.prototype.update=function(){var e=this;this.option=this.view.getOptions().legends;var n={},i=function(d,h,v){var p=e.getId(v.field),g=e.getComponentById(p);if(g){var m=void 0,y=zJ(e.option,v.field);y!==!1&&(ae(y,"custom")?m=e.getCategoryCfg(d,h,v,y,!0):v.isLinear?m=e.getContinuousCfg(d,h,v,y):v.isCategory&&(m=e.getCategoryCfg(d,h,v,y))),m&&(Xo(m,["container"]),g.direction=p2(y),g.component.update(m),n[p]=!0)}else{var b=e.createFieldLegend(d,h,v);b&&(b.component.init(),e.components.push(b),n[p]=!0)}};if(ae(this.option,"custom")){var a="global-custom",o=this.getComponentById(a);if(o){var s=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);Xo(s,["container"]),o.component.update(s),n[a]=!0}else{var l=this.createCustomLegend(void 0,void 0,void 0,this.option);if(l){l.init();var u=Vi.FORE,c=p2(this.option);this.components.push({id:a,component:l,layer:u,direction:c,type:ka.LEGEND,extra:void 0}),n[a]=!0}}}else this.loopLegends(i);var f=[];G(this.getComponents(),function(d){n[d.id]?f.push(d):d.component.destroy()}),this.components=f},t.prototype.clear=function(){r.prototype.clear.call(this),this.container.clear()},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.container.remove(!0)},t.prototype.getGeometries=function(e){var n=this,i=e.geometries;return G(e.views,function(a){i=i.concat(n.getGeometries(a))}),i},t.prototype.loopLegends=function(e){var n=this.view.getRootView()===this.view;if(!!n){var i=this.getGeometries(this.view),a={};G(i,function(o){var s=o.getGroupAttributes();G(s,function(l){var u=l.getScale(l.type);!u||u.type==="identity"||a[u.field]||(e(o,l,u),a[u.field]=!0)})})}},t.prototype.createFieldLegend=function(e,n,i){var a,o=zJ(this.option,i.field),s=Vi.FORE,l=p2(o);if(o!==!1&&(ae(o,"custom")?a=this.createCustomLegend(e,n,i,o):i.isLinear?a=this.createContinuousLegend(e,n,i,o):i.isCategory&&(a=this.createCategoryLegend(e,n,i,o))),a)return a.set("field",i.field),{id:this.getId(i.field),component:a,layer:s,direction:l,type:ka.LEGEND,extra:{scale:i}}},t.prototype.createCustomLegend=function(e,n,i,a){var o=this.getCategoryCfg(e,n,i,a,!0);return new oQ(o)},t.prototype.createContinuousLegend=function(e,n,i,a){var o=this.getContinuousCfg(e,n,i,Xo(a,["value"]));return new LZe(o)},t.prototype.createCategoryLegend=function(e,n,i,a){var o=this.getCategoryCfg(e,n,i,a);return new oQ(o)},t.prototype.getContinuousCfg=function(e,n,i,a){var o=i.getTicks(),s=Ps(o,function(p){return p.value===0}),l=Ps(o,function(p){return p.value===1}),u=o.map(function(p){var g=p.value,m=p.tickValue,y=n.mapping(i.invert(g)).join("");return{value:m,attrValue:y,color:y,scaleValue:g}});s||u.push({value:i.min,attrValue:n.mapping(i.invert(0)).join(""),color:n.mapping(i.invert(0)).join(""),scaleValue:0}),l||u.push({value:i.max,attrValue:n.mapping(i.invert(1)).join(""),color:n.mapping(i.invert(1)).join(""),scaleValue:1}),u.sort(function(p,g){return p.value-g.value});var c={min:Eo(u).value,max:qi(u).value,colors:[],rail:{type:n.type},track:{}};n.type==="size"&&(c.track={style:{fill:n.type==="size"?this.view.getTheme().defaultColor:void 0}}),n.type==="color"&&(c.colors=u.map(function(p){return p.attrValue}));var f=this.container,d=p2(a),h=WD(d),v=ae(a,"title");return v&&(v=Dt({text:q0(i)},v)),c.container=f,c.layout=h,c.title=v,c.animateOption=sg,this.mergeLegendCfg(c,a,"continuous")},t.prototype.getCategoryCfg=function(e,n,i,a,o){var s=this.container,l=ae(a,"position",Wt.BOTTOM),u=iJ(this.view.getTheme(),l),c=ae(u,["marker"]),f=ae(a,"marker"),d=WD(l),h=ae(u,["pageNavigator"]),v=ae(a,"pageNavigator"),p=o?nJe(c,f,a.items):nJ(this.view,e,n,c,f),g=ae(a,"title");g&&(g=Dt({text:i?q0(i):""},g));var m=ae(a,"maxWidthRatio"),y=ae(a,"maxHeightRatio"),b=this.getCategoryLegendSizeCfg(d,m,y);b.container=s,b.layout=d,b.items=p,b.title=g,b.animateOption=sg,b.pageNavigator=Dt({},h,v);var x=this.mergeLegendCfg(b,a,l);x.reversed&&x.items.reverse();var w=ae(x,"maxItemWidth");return w&&w<=1&&(x.maxItemWidth=this.view.viewBBox.width*w),x},t.prototype.mergeLegendCfg=function(e,n,i){var a=i.split("-")[0],o=iJ(this.view.getTheme(),a);return Dt({},o,e,n)},t.prototype.getId=function(e){return this.name+"-"+e},t.prototype.getComponentById=function(e){return Ps(this.components,function(n){return n.id===e})},t.prototype.getCategoryLegendSizeCfg=function(e,n,i){n===void 0&&(n=QK),i===void 0&&(i=QK);var a=this.view.viewBBox,o=a.width,s=a.height;return e==="vertical"?{maxWidth:o*n,maxHeight:s}:{maxWidth:o,maxHeight:s*i}},t}(og),ett=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;return n.onChangeFn=us,n.resetMeasure=function(){n.clear()},n.onValueChange=function(i){var a=i[0],o=i[1];n.start=a,n.end=o,n.changeViewData(a,o)},n.container=n.view.getLayer(Vi.FORE).addGroup(),n.onChangeFn=Cv(n.onValueChange,20,{leading:!0}),n.width=0,n.view.on(Hr.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(Hr.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return Object.defineProperty(t.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){r.prototype.destroy.call(this),this.view.off(Hr.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(Hr.BEFORE_CHANGE_SIZE,this.resetMeasure)},t.prototype.init=function(){},t.prototype.render=function(){this.option=this.view.getOptions().slider;var e=this.getSliderCfg(),n=e.start,i=e.end;nt(this.start)&&(this.start=n,this.end=i);var a=this.view.getOptions().data;this.option&&!co(a)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},t.prototype.layout=function(){var e=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout(function(){e.view.destroyed||e.changeViewData(e.start,e.end)},0)),this.slider){var n=this.view.coordinateBBox.width,i=this.slider.component.get("padding"),a=i[0];i[1],i[2];var o=i[3],s=this.slider.component.getLayoutBBox(),l=new Po(s.x,s.y,Math.min(s.width,n),s.height).expand(i),u=this.getMinMaxText(this.start,this.end),c=u.minText,f=u.maxText,d=Ef(this.view.viewBBox,l,Wt.BOTTOM);d[0];var h=d[1],v=Ef(this.view.coordinateBBox,l,Wt.BOTTOM),p=v[0];v[1],this.slider.component.update(A(A({},this.getSliderCfg()),{x:p+o,y:h+a,width:this.width,start:this.start,end:this.end,minText:c,maxText:f})),this.view.viewBBox=this.view.viewBBox.cut(l,Wt.BOTTOM)}},t.prototype.update=function(){this.render()},t.prototype.createSlider=function(){var e=this.getSliderCfg(),n=new kZe(A({container:this.container},e));return n.init(),{component:n,layer:Vi.FORE,direction:Wt.BOTTOM,type:ka.SLIDER}},t.prototype.updateSlider=function(){var e=this.getSliderCfg();if(this.width){var n=this.getMinMaxText(this.start,this.end),i=n.minText,a=n.maxText;e=A(A({},e),{width:this.width,start:this.start,end:this.end,minText:i,maxText:a})}return this.slider.component.update(e),this.slider},t.prototype.measureSlider=function(){var e=this.getSliderCfg().width;this.width=e},t.prototype.getSliderCfg=function(){var e={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if(an(this.option)){var n=A({data:this.getData()},ae(this.option,"trendCfg",{}));e=Dt({},e,this.getThemeOptions(),this.option),e=A(A({},e),{trendCfg:n})}return e.start=ei(Math.min(nt(e.start)?0:e.start,nt(e.end)?1:e.end),0,1),e.end=ei(Math.max(nt(e.start)?0:e.start,nt(e.end)?1:e.end),0,1),e},t.prototype.getData=function(){var e=this.view.getOptions().data,n=this.view.getYScales()[0],i=this.view.getGroupScales();if(i.length){var a=i[0],o=a.field,s=a.ticks;return e.reduce(function(l,u){return u[o]===s[0]&&l.push(u[n.field]),l},[])}return e.map(function(l){return l[n.field]||0})},t.prototype.getThemeOptions=function(){var e=this.view.getTheme();return ae(e,["components","slider","common"],{})},t.prototype.getMinMaxText=function(e,n){var i=this.view.getOptions().data,a=this.view.getXScale(),o=Ds(i,a.field),s=o,l=la(i);if(!a||!l)return{};var u=la(s),c=Math.floor(e*(u-1)),f=Math.floor(n*(u-1)),d=ae(s,[c]),h=ae(s,[f]),v=this.getSliderCfg().formatter;return v&&(d=v(d,i[c],c),h=v(h,i[f],f)),{minText:d,maxText:h}},t.prototype.changeViewData=function(e,n){var i=this.view.getOptions().data,a=this.view.getXScale(),o=la(i);if(!(!a||!o)){var s=Ds(i,a.field),l=s,u=la(l),c=Math.floor(e*(u-1)),f=Math.floor(n*(u-1));this.view.filter(a.field,function(d,h){var v=l.indexOf(d);return v>-1?eg(v,c,f):!0}),this.view.render(!0)}},t.prototype.getComponents=function(){return this.slider?[this.slider]:[]},t.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},t}(og),g2=0,GJ=8,ttt=32,rtt=20,ntt=function(r){Ie(t,r);function t(e){var n=r.call(this,e)||this;return n.onChangeFn=us,n.resetMeasure=function(){n.clear()},n.onValueChange=function(i){var a=i.ratio,o=n.getValidScrollbarCfg().animate;n.ratio=ei(a,0,1);var s=n.view.getOptions().animate;o||n.view.animate(!1),n.changeViewData(n.getScrollRange(),!0),n.view.animate(s)},n.container=n.view.getLayer(Vi.FORE).addGroup(),n.onChangeFn=Cv(n.onValueChange,20,{leading:!0}),n.trackLen=0,n.thumbLen=0,n.ratio=0,n.view.on(Hr.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(Hr.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return Object.defineProperty(t.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){r.prototype.destroy.call(this),this.view.off(Hr.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(Hr.BEFORE_CHANGE_SIZE,this.resetMeasure)},t.prototype.init=function(){},t.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},t.prototype.layout=function(){var e=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout(function(){e.view.destroyed||e.changeViewData(e.getScrollRange(),!0)})),this.scrollbar){var n=this.view.coordinateBBox.width,i=this.scrollbar.component.get("padding"),a=this.scrollbar.component.getLayoutBBox(),o=new Po(a.x,a.y,Math.min(a.width,n),a.height).expand(i),s=this.getScrollbarComponentCfg(),l=void 0,u=void 0;if(s.isHorizontal){var c=Ef(this.view.viewBBox,o,Wt.BOTTOM);c[0];var f=c[1],d=Ef(this.view.coordinateBBox,o,Wt.BOTTOM),h=d[0];d[1],l=h,u=f}else{var v=Ef(this.view.viewBBox,o,Wt.RIGHT);v[0];var f=v[1],p=Ef(this.view.viewBBox,o,Wt.RIGHT),h=p[0];p[1],l=h,u=f}l+=i[3],u+=i[0],this.trackLen?this.scrollbar.component.update(A(A({},s),{x:l,y:u,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update(A(A({},s),{x:l,y:u})),this.view.viewBBox=this.view.viewBBox.cut(o,s.isHorizontal?Wt.BOTTOM:Wt.RIGHT)}},t.prototype.update=function(){this.render()},t.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},t.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},t.prototype.setValue=function(e){this.onValueChange({ratio:e})},t.prototype.getValue=function(){return this.ratio},t.prototype.getThemeOptions=function(){var e=this.view.getTheme();return ae(e,["components","scrollbar","common"],{})},t.prototype.getScrollbarTheme=function(e){var n=ae(this.view.getTheme(),["components","scrollbar"]),i=e||{},a=i.thumbHighlightColor,o=Ur(i,["thumbHighlightColor"]);return{default:Dt({},ae(n,["default","style"],{}),o),hover:Dt({},ae(n,["hover","style"],{}),{thumbColor:a})}},t.prototype.measureScrollbar=function(){var e=this.view.getXScale(),n=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var i=this.getScrollbarComponentCfg(),a=i.trackLen,o=i.thumbLen;this.trackLen=a,this.thumbLen=o,this.xScaleCfg={field:e.field,values:e.values||[]},this.yScalesCfg=n},t.prototype.getScrollRange=function(){var e=Math.floor((this.cnt-this.step)*ei(this.ratio,0,1)),n=Math.min(e+this.step-1,this.cnt-1);return[e,n]},t.prototype.changeViewData=function(e,n){var i=this,a=e[0],o=e[1],s=this.getValidScrollbarCfg().type,l=s!=="vertical",u=Ds(this.data,this.xScaleCfg.field),c=l?u:u.reverse();this.yScalesCfg.forEach(function(f){i.view.scale(f.field,{formatter:f.formatter,type:f.type,min:f.min,max:f.max})}),this.view.filter(this.xScaleCfg.field,function(f){var d=c.indexOf(f);return d>-1?eg(d,a,o):!0}),this.view.render(!0)},t.prototype.createScrollbar=function(){var e=this.getValidScrollbarCfg().type,n=e!=="vertical",i=new IZe(A(A({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return i.init(),{component:i,layer:Vi.FORE,direction:n?Wt.BOTTOM:Wt.RIGHT,type:ka.SCROLLBAR}},t.prototype.updateScrollbar=function(){var e=this.getScrollbarComponentCfg(),n=this.trackLen?A(A({},e),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):A({},e);return this.scrollbar.component.update(n),this.scrollbar},t.prototype.getStep=function(){if(this.step)return this.step;var e=this.view.coordinateBBox,n=this.getValidScrollbarCfg(),i=n.type,a=n.categorySize,o=i!=="vertical";return Math.floor((o?e.width:e.height)/a)},t.prototype.getCnt=function(){if(this.cnt)return this.cnt;var e=this.view.getXScale(),n=this.getScrollbarData(),i=Ds(n,e.field);return la(i)},t.prototype.getScrollbarComponentCfg=function(){var e=this.view,n=e.coordinateBBox,i=e.viewBBox,a=this.getValidScrollbarCfg(),o=a.type,s=a.padding,l=a.width,u=a.height,c=a.style,f=o!=="vertical",d=s[0],h=s[1],v=s[2],p=s[3],g=f?{x:n.minX+p,y:i.maxY-u-v}:{x:i.maxX-l-h,y:n.minY+d},m=this.getStep(),y=this.getCnt(),b=f?n.width-p-h:n.height-d-v,x=Math.max(b*ei(m/y,0,1),rtt);return A(A({},this.getThemeOptions()),{x:g.x,y:g.y,size:f?u:l,isHorizontal:f,trackLen:b,thumbLen:x,thumbOffset:0,theme:this.getScrollbarTheme(c)})},t.prototype.getValidScrollbarCfg=function(){var e={type:"horizontal",categorySize:ttt,width:GJ,height:GJ,padding:[0,0,0,0],animate:!0,style:{}};return an(this.option)&&(e=A(A({},e),this.option)),(!an(this.option)||!this.option.padding)&&(e.padding=e.type==="horizontal"?[g2,0,g2,0]:[0,g2,0,g2]),e},t.prototype.getScrollbarData=function(){var e=this.view.getCoordinate(),n=this.getValidScrollbarCfg(),i=this.view.getOptions().data||[];return e.isReflect("y")&&n.type==="vertical"&&(i=oi([],i,!0).reverse()),i},t}(og),itt={fill:"#CCD6EC",opacity:.3};function att(r,t,e){var n=MQe(r,t,e);if(n.length){n=No(n);for(var i=0,a=n;i<a.length;i++)for(var o=a[i],s=0,l=o;s<l.length;s++){var u=l[s],c=u.mappingData,f=c.x,d=c.y;u.x=Qe(f)?f[f.length-1]:f,u.y=Qe(d)?d[d.length-1]:d}var h=e.shared;if(h===!1&&n.length>1){for(var v=n[0],p=Math.abs(t.y-v[0].y),g=0,m=n;g<m.length;g++){var y=m[g],b=Math.abs(t.y-y[0].y);b<=p&&(v=y,p=b)}n=[v]}return Cc(No(n))}return[]}var ott=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.show=function(e){var n=this.context.view,i=this.context.event,a=n.getController("tooltip").getTooltipCfg(),o=att(n,{x:i.x,y:i.y},a);if(!ci(o,this.items)&&(this.items=o,o.length)){var s=n.getXScale().field,l=o[0].data[s],u=[],c=n.geometries;if(G(c,function(O){if(O.type==="interval"||O.type==="schema"){var B=O.getElementsBy(function(U){var W=U.getData();return W[s]===l});u=u.concat(B)}}),u.length){var f=n.getCoordinate(),d=u[0].shape.getCanvasBBox(),h=u[0].shape.getCanvasBBox(),v=d;G(u,function(O){var B=O.shape.getCanvasBBox();f.isTransposed?(B.minY<d.minY&&(d=B),B.maxY>h.maxY&&(h=B)):(B.minX<d.minX&&(d=B),B.maxX>h.maxX&&(h=B)),v.x=Math.min(B.minX,v.minX),v.y=Math.min(B.minY,v.minY),v.width=Math.max(B.maxX,v.maxX)-v.x,v.height=Math.max(B.maxY,v.maxY)-v.y});var p=n.backgroundGroup,g=n.coordinateBBox,m=void 0;if(f.isRect){var y=n.getXScale(),b=e||{},x=b.appendRatio,w=b.appendWidth;nt(w)&&(x=nt(x)?y.isLinear?0:.25:x,w=f.isTransposed?x*h.height:x*d.width);var S=void 0,C=void 0,_=void 0,T=void 0;f.isTransposed?(S=g.minX,C=Math.min(h.minY,d.minY)-w,_=g.width,T=v.height+w*2):(S=Math.min(d.minX,h.minX)-w,C=g.minY,_=v.width+w*2,T=g.height),m=[["M",S,C],["L",S+_,C],["L",S+_,C+T],["L",S,C+T],["Z"]]}else{var E=Eo(u),k=qi(u),I=Y0(E.getModel(),f).startAngle,P=Y0(k.getModel(),f).endAngle,F=f.getCenter(),$=f.getRadius(),R=f.innerRadius*$;m=mf(F.x,F.y,$,I,P,R)}if(this.regionPath)this.regionPath.attr("path",m),this.regionPath.show();else{var L=ae(e,"style",itt);this.regionPath=p.addShape({type:"path",name:"active-region",capture:!1,attrs:A(A({},L),{path:m})})}}}},t.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},t.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),r.prototype.destroy.call(this)},t}(vi),UJ=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.timeStamp=0,e}return t.prototype.show=function(){var e=this.context,n=e.event,i=e.view,a=i.isTooltipLocked();if(!a){var o=this.timeStamp,s=+new Date,l=ae(e.view.getOptions(),"tooltip.showDelay",16);if(s-o>l){var u=this.location,c={x:n.x,y:n.y};(!u||!ci(u,c))&&this.showTooltip(i,c),this.timeStamp=s,this.location=c}}},t.prototype.hide=function(){var e=this.context.view,n=e.getController("tooltip"),i=this.context.event,a=i.clientX,o=i.clientY;n.isCursorEntered({x:a,y:o})||e.isTooltipLocked()||(this.hideTooltip(e),this.location=null)},t.prototype.showTooltip=function(e,n){e.showTooltip(n)},t.prototype.hideTooltip=function(e){e.hideTooltip()},t}(vi),stt=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.showTooltip=function(e,n){var i=au(e);G(i,function(a){var o=OD(e,a,n);a.showTooltip(o)})},t.prototype.hideTooltip=function(e){var n=au(e);G(n,function(i){i.hideTooltip()})},t}(UJ),ltt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.timeStamp=0,e}return t.prototype.destroy=function(){r.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},t.prototype.show=function(){var e=this.context,n=e.event,i=this.timeStamp,a=+new Date;if(a-i>16){var o=this.location,s={x:n.x,y:n.y};(!o||!ci(o,s))&&this.showTooltip(s),this.timeStamp=a,this.location=s}},t.prototype.hide=function(){this.hideTooltip(),this.location=null},t.prototype.showTooltip=function(e){var n=this.context,i=n.event,a=i.target;if(a&&a.get("tip")){this.tooltip||this.renderTooltip();var o=a.get("tip");this.tooltip.update(A({title:o},e)),this.tooltip.show()}},t.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},t.prototype.renderTooltip=function(){var e,n=this.context.view,i=n.canvas,a={start:{x:0,y:0},end:{x:i.get("width"),y:i.get("height")}},o=n.getTheme(),s=ae(o,["components","tooltip","domStyles"],{}),l=new sQ({parent:i.get("el").parentNode,region:a,visible:!1,crosshairs:null,domStyles:A({},Dt({},s,(e={},e[Qp]={"max-width":"50%"},e[Jp]={"word-break":"break-all"},e)))});l.init(),l.setCapture(!1),this.tooltip=l},t}(vi),lR=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="",e}return t.prototype.hasState=function(e){return e.hasState(this.stateName)},t.prototype.setElementState=function(e,n){e.setState(this.stateName,n)},t.prototype.setState=function(){this.setStateEnable(!0)},t.prototype.clear=function(){var e=this.context.view;this.clearViewState(e)},t.prototype.clearViewState=function(e){var n=this,i=TQ(e,this.stateName);G(i,function(a){n.setElementState(a,!1)})},t}(vi);function VJ(r){return ae(r.get("delegateObject"),"item")}var uR=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.ignoreListItemStates=["unchecked"],e}return t.prototype.isItemIgnore=function(e,n){var i=this.ignoreListItemStates,a=i.filter(function(o){return n.hasState(e,o)});return!!a.length},t.prototype.setStateByComponent=function(e,n,i){var a=this.context.view,o=e.get("field"),s=Wa(a);this.setElementsStateByItem(s,o,n,i)},t.prototype.setStateByElement=function(e,n){this.setElementState(e,n)},t.prototype.isMathItem=function(e,n,i){var a=this.context.view,o=ag(a,n),s=hl(e,n);return!nt(s)&&i.name===o.getText(s)},t.prototype.setElementsStateByItem=function(e,n,i,a){var o=this;G(e,function(s){o.isMathItem(s,n,i)&&s.setState(o.stateName,a)})},t.prototype.setStateEnable=function(e){var n=bf(this.context);if(n)CQ(this.context)&&this.setStateByElement(n,e);else{var i=ig(this.context);if(Z0(i)){var a=i.item,o=i.component;if(a&&o&&!this.isItemIgnore(a,o)){var s=this.context.event.gEvent;if(s&&s.fromShape&&s.toShape&&VJ(s.fromShape)===VJ(s.toShape))return;this.setStateByComponent(o,a,e)}}}},t.prototype.toggle=function(){var e=bf(this.context);if(e){var n=e.hasState(this.stateName);this.setElementState(e,!n)}},t.prototype.reset=function(){this.setStateEnable(!1)},t}(lR),utt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="active",e}return t.prototype.active=function(){this.setState()},t}(uR),ctt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.cache={},e}return t.prototype.getColorScale=function(e,n){var i=n.geometry.getAttribute("color");if(!i)return null;var a=e.getScaleByField(i.getFields()[0]);return a},t.prototype.getLinkPath=function(e,n){var i=this.context.view,a=i.getCoordinate().isTransposed,o=e.shape.getCanvasBBox(),s=n.shape.getCanvasBBox(),l=a?[["M",o.minX,o.minY],["L",s.minX,s.maxY],["L",s.maxX,s.maxY],["L",o.maxX,o.minY],["Z"]]:[["M",o.maxX,o.minY],["L",s.minX,s.minY],["L",s.minX,s.maxY],["L",o.maxX,o.maxY],["Z"]];return l},t.prototype.addLinkShape=function(e,n,i,a){var o={opacity:.4,fill:n.shape.attr("fill")};e.addShape({type:"path",attrs:A(A({},Dt({},o,Kt(a)?a(o,n):a)),{path:this.getLinkPath(n,i)})})},t.prototype.linkByElement=function(e,n){var i=this,a=this.context.view,o=this.getColorScale(a,e);if(!!o){var s=hl(e,o.field);if(!this.cache[s]){var l=oQe(a,o.field,s),u=this.linkGroup,c=u.addGroup();this.cache[s]=c;var f=l.length;G(l,function(d,h){if(h<f-1){var v=l[h+1];i.addLinkShape(c,d,v,n)}})}}},t.prototype.removeLink=function(e){var n=this.getColorScale(this.context.view,e);if(!!n){var i=hl(e,n.field);this.cache[i]&&(this.cache[i].remove(),this.cache[i]=null)}},t.prototype.link=function(e){var n=this.context;this.linkGroup||(this.linkGroup=n.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var i=bf(n);i&&this.linkByElement(i,e==null?void 0:e.style)},t.prototype.unlink=function(){var e=bf(this.context);e&&this.removeLink(e)},t.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},t}(vi),cR=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.startPoint=null,e.endPoint=null,e.isStarted=!1,e.effectSiblings=!1,e.effectByRecord=!1,e}return t.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},t.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},t.prototype.getIntersectElements=function(){var e=null;if(Q0(this.context))e=PD(this.context,10);else{var n=this.startPoint,i=this.isStarted?this.getCurrentPoint():this.endPoint;if(!n||!i)return;var a={minX:Math.min(n.x,i.x),minY:Math.min(n.y,i.y),maxX:Math.max(n.x,i.x),maxY:Math.max(n.y,i.y)},o=this.context.view;e=DD(o,a)}return e},t.prototype.setStateEnable=function(e){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(e);else{var n=Wa(this.context.view),i=this.getIntersectElements();i&&i.length?this.effectByRecord?this.setSiblingsStateByRecord(i,e):this.setElementsState(i,e,n):this.clear()}},t.prototype.setSiblingsStateByRecord=function(e,n){var i=this,a=this.context.view,o=au(a),s=e.map(function(c){return c.getModel().data}),l=a.getXScale().field,u=a.getYScales()[0].field;G(o,function(c){var f=Wa(c),d=f.filter(function(h){var v=h.getModel().data;return IQ(s,v,l,u)});i.setElementsState(d,n,f)})},t.prototype.setSiblingsState=function(e){var n=this,i=this.context.view,a=au(i);Q0(this.context)&&G(a,function(o){var s=Wa(o),l=_Q(n.context,o,10);l&&l.length?n.setElementsState(l,e,s):n.clearViewState(o)})},t.prototype.setElementsState=function(e,n,i){var a=this;G(i,function(o){e.includes(o)?a.setElementState(o,n):a.setElementState(o,!1)})},t.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},t.prototype.clear=function(){var e=this,n=this.context.view;if(this.effectSiblings){var i=au(n);G(i,function(a){e.clearViewState(a)})}else this.clearViewState(n)},t}(lR),ftt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="active",e}return t.prototype.active=function(){this.setState()},t}(cR),fR=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setStateEnable=function(e){var n=bf(this.context);if(n){if(!CQ(this.context))return;e?(this.clear(),this.setElementState(n,!0)):this.hasState(n)&&this.setElementState(n,!1)}},t.prototype.toggle=function(){var e=bf(this.context);if(e){var n=this.hasState(e);n||this.clear(),this.setElementState(e,!n)}},t.prototype.reset=function(){this.setStateEnable(!1)},t}(lR),dtt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="active",e}return t.prototype.active=function(){this.setState()},t}(fR),ab="inactive",ob="active";function dR(r){var t=Wa(r);G(t,function(e){e.hasState(ob)&&e.setState(ob,!1),e.hasState(ab)&&e.setState(ab,!1)})}function HJ(r,t,e){G(r,function(n){t(n)?(n.hasState(ab)&&n.setState(ab,!1),n.setState(ob,e)):(n.hasState(ob)&&n.setState(ob,!1),n.setState(ab,e))})}var Ch=DC.INACTIVE,Qu=DC.ACTIVE,hR=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName=Qu,e}return t.prototype.setElementsStateByItem=function(e,n,i,a){var o=this,s=function(l){return o.isMathItem(l,n,i)};this.setHighlightBy(e,s,a)},t.prototype.setElementHighlight=function(e,n){n(e)?(e.hasState(Ch)&&e.setState(Ch,!1),e.setState(Qu,!0)):e.hasState(Qu)||e.setState(Ch,!0)},t.prototype.setHighlightBy=function(e,n,i){var a=this;if(i)G(e,function(l){a.setElementHighlight(l,n)});else{var o=TQ(this.context.view,Qu),s=!0;G(o,function(l){if(!n(l))return s=!1,!1}),s?this.clear():G(e,function(l){n(l)&&(l.hasState(Qu)&&l.setState(Qu,!1),l.setState(Ch,!0))})}},t.prototype.setElementState=function(e,n){var i=this.context.view,a=Wa(i);this.setHighlightBy(a,function(o){return e===o},n)},t.prototype.highlight=function(){this.setState()},t.prototype.clear=function(){var e=this.context.view;dR(e)},t}(uR),htt=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setStateByElement=function(e,n){var i=this.context.view,a=e.geometry.getAttribute("color");if(!!a){var o=i.getScaleByField(a.getFields()[0]),s=hl(e,o.field),l=Wa(i),u=l.filter(function(c){return hl(c,o.field)===s});this.setHighlightBy(l,function(c){return u.includes(c)},n)}},t}(hR),vtt=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setElementHighlight=function(e,n){n(e)?(e.hasState(Ch)&&e.setState(Ch,!1),e.setState(Qu,!0)):(e.setState(Ch,!0),e.hasState(Qu)&&e.setState(Qu,!1))},t.prototype.setStateByElement=function(e,n){var i=this.context.view,a=i.getXScale(),o=hl(e,a.field),s=Wa(i),l=s.filter(function(u){return hl(u,a.field)===o});this.setHighlightBy(s,function(u){return l.includes(u)},n)},t.prototype.toggle=function(){var e=bf(this.context);if(e){var n=e.hasState(this.stateName);this.setStateByElement(e,!n)}},t}(hR),su;(function(r){r.BEFORE_HIGHLIGHT="element-range-highlight:beforehighlight",r.AFTER_HIGHLIGHT="element-range-highlight:afterhighlight",r.BEFORE_CLEAR="element-range-highlight:beforeclear",r.AFTER_CLEAR="element-range-highlight:afterclear"})(su||(su={}));var WJ=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="active",e}return t.prototype.clearViewState=function(e){dR(e)},t.prototype.highlight=function(){var e=this.context,n=e.view,i=e.event,a=this.getIntersectElements(),o={view:n,event:i,highlightElements:a};n.emit(su.BEFORE_HIGHLIGHT,pi.fromData(n,su.BEFORE_HIGHLIGHT,o)),this.setState(),n.emit(su.AFTER_HIGHLIGHT,pi.fromData(n,su.AFTER_HIGHLIGHT,o))},t.prototype.clear=function(){var e=this.context.view;e.emit(su.BEFORE_CLEAR,pi.fromData(e,su.BEFORE_CLEAR,{})),r.prototype.clear.call(this),e.emit(su.AFTER_CLEAR,pi.fromData(e,su.AFTER_CLEAR,{}))},t.prototype.setElementsState=function(e,n,i){HJ(i,function(a){return e.indexOf(a)>=0},n)},t}(cR),ptt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="active",e}return t.prototype.highlight=function(){this.setState()},t.prototype.setElementState=function(e,n){var i=this.context.view,a=Wa(i);HJ(a,function(o){return e===o},n)},t.prototype.clear=function(){var e=this.context.view;dR(e)},t}(fR),gtt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="selected",e}return t.prototype.selected=function(){this.setState()},t}(cR),mtt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="selected",e}return t.prototype.selected=function(){this.setState()},t}(uR),ytt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="selected",e}return t.prototype.selected=function(){this.setState()},t}(fR),sb=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="",e.ignoreItemStates=[],e}return t.prototype.getTriggerListInfo=function(){var e=ig(this.context),n=null;return Z0(e)&&(n={item:e.item,list:e.component}),n},t.prototype.getAllowComponents=function(){var e=this,n=this.context.view,i=kQ(n),a=[];return G(i,function(o){o.isList()&&e.allowSetStateByElement(o)&&a.push(o)}),a},t.prototype.hasState=function(e,n){return e.hasState(n,this.stateName)},t.prototype.clearAllComponentsState=function(){var e=this,n=this.getAllowComponents();G(n,function(i){i.clearItemsState(e.stateName)})},t.prototype.allowSetStateByElement=function(e){var n=e.get("field");if(!n)return!1;if(this.cfg&&this.cfg.componentNames){var i=e.get("name");if(this.cfg.componentNames.indexOf(i)===-1)return!1}var a=this.context.view,o=ag(a,n);return o&&o.isCategory},t.prototype.allowSetStateByItem=function(e,n){var i=this.ignoreItemStates;if(i.length){var a=i.filter(function(o){return n.hasState(e,o)});return a.length===0}return!0},t.prototype.setStateByElement=function(e,n,i){var a=e.get("field"),o=this.context.view,s=ag(o,a),l=hl(n,a),u=s.getText(l);this.setItemsState(e,u,i)},t.prototype.setStateEnable=function(e){var n=this,i=bf(this.context);if(i){var a=this.getAllowComponents();G(a,function(u){n.setStateByElement(u,i,e)})}else{var o=ig(this.context);if(Z0(o)){var s=o.item,l=o.component;this.allowSetStateByElement(l)&&this.allowSetStateByItem(s,l)&&this.setItemState(l,s,e)}}},t.prototype.setItemsState=function(e,n,i){var a=this,o=e.getItems();G(o,function(s){s.name===n&&a.setItemState(e,s,i)})},t.prototype.setItemState=function(e,n,i){e.setItemState(n,this.stateName,i)},t.prototype.setState=function(){this.setStateEnable(!0)},t.prototype.reset=function(){this.setStateEnable(!1)},t.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var n=e.list,i=e.item,a=this.hasState(n,i);this.setItemState(n,i,!a)}},t.prototype.clear=function(){var e=this.getTriggerListInfo();e?e.list.clearItemsState(this.stateName):this.clearAllComponentsState()},t}(vi),btt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="active",e}return t.prototype.active=function(){this.setState()},t}(sb),jJ="inactive",YJ="active";function xtt(r){var t=r.getItems();G(t,function(e){r.hasState(e,YJ)&&r.setItemState(e,YJ,!1),r.hasState(e,jJ)&&r.setItemState(e,jJ,!1)})}var lb="inactive",Eh="active",vR=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName=Eh,e.ignoreItemStates=["unchecked"],e}return t.prototype.setItemsState=function(e,n,i){this.setHighlightBy(e,function(a){return a.name===n},i)},t.prototype.setItemState=function(e,n,i){e.getItems(),this.setHighlightBy(e,function(a){return a===n},i)},t.prototype.setHighlightBy=function(e,n,i){var a=e.getItems();if(i)G(a,function(l){n(l)?(e.hasState(l,lb)&&e.setItemState(l,lb,!1),e.setItemState(l,Eh,!0)):e.hasState(l,Eh)||e.setItemState(l,lb,!0)});else{var o=e.getItemsByState(Eh),s=!0;G(o,function(l){if(!n(l))return s=!1,!1}),s?this.clear():G(a,function(l){n(l)&&(e.hasState(l,Eh)&&e.setItemState(l,Eh,!1),e.setItemState(l,lb,!0))})}},t.prototype.highlight=function(){this.setState()},t.prototype.clear=function(){var e=this.getTriggerListInfo();if(e)xtt(e.list);else{var n=this.getAllowComponents();G(n,function(i){i.clearItemsState(Eh),i.clearItemsState(lb)})}},t}(sb),wtt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="selected",e}return t.prototype.selected=function(){this.setState()},t}(sb),Stt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="unchecked",e}return t.prototype.unchecked=function(){this.setState()},t}(sb),ug="unchecked",m2="checked",Ctt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName=m2,e}return t.prototype.setItemState=function(e,n,i){this.setCheckedBy(e,function(a){return a===n},i)},t.prototype.setCheckedBy=function(e,n,i){var a=e.getItems();i&&G(a,function(o){n(o)?(e.hasState(o,ug)&&e.setItemState(o,ug,!1),e.setItemState(o,m2,!0)):e.hasState(o,m2)||e.setItemState(o,ug,!0)})},t.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var n=e.list,i=e.item,a=!vm(n.getItems(),function(o){return n.hasState(o,ug)});a||n.hasState(i,ug)?this.setItemState(n,i,!0):this.reset()}},t.prototype.checked=function(){this.setState()},t.prototype.reset=function(){var e=this.getAllowComponents();G(e,function(n){n.clearItemsState(m2),n.clearItemsState(ug)})},t}(sb),pR=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.maskShape=null,e.points=[],e.starting=!1,e.moving=!1,e.preMovePoint=null,e.shapeType="path",e}return t.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},t.prototype.emitEvent=function(e){var n="mask:"+e,i=this.context.view,a=this.context.event;i.emit(n,{target:this.maskShape,shape:this.maskShape,points:this.points,x:a.x,y:a.y})},t.prototype.createMask=function(){var e=this.context.view,n=this.getMaskAttrs(),i=e.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:A({fill:"#C5D4EB",opacity:.3},n)});return i},t.prototype.getMaskPath=function(){return[]},t.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},t.prototype.start=function(e){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(e==null?void 0:e.maskStyle),this.emitEvent("start")},t.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},t.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var e=this.getCurrentPoint(),n=this.preMovePoint,i=e.x-n.x,a=e.y-n.y,o=this.points;G(o,function(s){s.x+=i,s.y+=a}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=e}},t.prototype.updateMask=function(e){var n=Dt({},this.getMaskAttrs(),e);this.maskShape.attr(n)},t.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},t.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},t.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},t.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},t.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,r.prototype.destroy.call(this)},t}(vi),Ett=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.shapeType="circle",e}return t.prototype.getMaskAttrs=function(){var e=this.points,n=qi(this.points),i=0,a=0,o=0;if(e.length){var s=e[0];i=RD(s,n)/2,a=(n.x+s.x)/2,o=(n.y+s.y)/2}return{x:a,y:o,r:i}},t}(pR),XJ=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.shapeType="rect",e}return t.prototype.getRegion=function(){var e=this.points;return{start:Eo(e),end:qi(e)}},t.prototype.getMaskAttrs=function(){var e=this.getRegion(),n=e.start,i=e.end,a=Math.min(n.x,i.x),o=Math.min(n.y,i.y),s=Math.abs(i.x-n.x),l=Math.abs(i.y-n.y);return{x:a,y:o,width:s,height:l}},t}(pR);function qJ(r){r.x=ei(r.x,0,1),r.y=ei(r.y,0,1)}var KJ=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.dim="x",e.inPlot=!0,e}return t.prototype.getRegion=function(){var e=null,n=null,i=this.points,a=this.dim,o=this.context.view.getCoordinate(),s=o.invert(Eo(i)),l=o.invert(qi(i));return this.inPlot&&(qJ(s),qJ(l)),a==="x"?(e=o.convert({x:s.x,y:0}),n=o.convert({x:l.x,y:1})):(e=o.convert({x:0,y:s.y}),n=o.convert({x:1,y:l.y})),{start:e,end:n}},t}(XJ),ZJ=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getMaskPath=function(){var e=this.points,n=[];return e.length&&(G(e,function(i,a){a===0?n.push(["M",i.x,i.y]):n.push(["L",i.x,i.y])}),n.push(["L",e[0].x,e[0].y])),n},t.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},t.prototype.addPoint=function(){this.resize()},t}(pR),_tt=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getMaskPath=function(){var e=this.points;return uQe(e,!0)},t}(ZJ),Ttt=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setCursor=function(e){var n=this.context.view;n.getCanvas().setCursor(e)},t.prototype.default=function(){this.setCursor("default")},t.prototype.pointer=function(){this.setCursor("pointer")},t.prototype.move=function(){this.setCursor("move")},t.prototype.crosshair=function(){this.setCursor("crosshair")},t.prototype.wait=function(){this.setCursor("wait")},t.prototype.help=function(){this.setCursor("help")},t.prototype.text=function(){this.setCursor("text")},t.prototype.eResize=function(){this.setCursor("e-resize")},t.prototype.wResize=function(){this.setCursor("w-resize")},t.prototype.nResize=function(){this.setCursor("n-resize")},t.prototype.sResize=function(){this.setCursor("s-resize")},t.prototype.neResize=function(){this.setCursor("ne-resize")},t.prototype.nwResize=function(){this.setCursor("nw-resize")},t.prototype.seResize=function(){this.setCursor("se-resize")},t.prototype.swResize=function(){this.setCursor("sw-resize")},t.prototype.nsResize=function(){this.setCursor("ns-resize")},t.prototype.ewResize=function(){this.setCursor("ew-resize")},t}(vi),Att=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.filterView=function(e,n,i){var a=this;e.getScaleByField(n)&&e.filter(n,i),e.views&&e.views.length&&G(e.views,function(o){a.filterView(o,n,i)})},t.prototype.filter=function(){var e=ig(this.context);if(e){var n=this.context.view,i=e.component,a=i.get("field");if(Z0(e)){if(a){var o=i.getItemsByState("unchecked"),s=ag(n,a),l=o.map(function(d){return d.name});l.length?this.filterView(n,a,function(d){var h=s.getText(d);return!l.includes(h)}):this.filterView(n,a,null),n.render(!0)}}else if(EQ(e)){var u=i.getValue(),c=u[0],f=u[1];this.filterView(n,a,function(d){return d>=c&&d<=f}),n.render(!0)}}},t}(vi);function QJ(r,t,e,n){var i=Math.min(e[t],n[t]),a=Math.max(e[t],n[t]),o=r.range,s=o[0],l=o[1];if(i<s&&(i=s),a>l&&(a=l),i===l&&a===l)return null;var u=r.invert(i),c=r.invert(a);if(r.isCategory){var f=r.values.indexOf(u),d=r.values.indexOf(c),h=r.values.slice(f,d+1);return function(v){return h.includes(v)}}else return function(v){return v>=u&&v<=c}}var Zo;(function(r){r.FILTER="brush-filter-processing",r.RESET="brush-filter-reset",r.BEFORE_FILTER="brush-filter:beforefilter",r.AFTER_FILTER="brush-filter:afterfilter",r.BEFORE_RESET="brush-filter:beforereset",r.AFTER_RESET="brush-filter:afterreset"})(Zo||(Zo={}));var y2=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.dims=["x","y"],e.startPoint=null,e.isStarted=!1,e}return t.prototype.hasDim=function(e){return this.dims.includes(e)},t.prototype.start=function(){var e=this.context;this.isStarted=!0,this.startPoint=e.getCurrentPoint()},t.prototype.filter=function(){var e,n;if(Q0(this.context)){var i=this.context.event.target,a=i.getCanvasBBox();e={x:a.x,y:a.y},n={x:a.maxX,y:a.maxY}}else{if(!this.isStarted)return;e=this.startPoint,n=this.context.getCurrentPoint()}if(!(Math.abs(e.x-n.x)<5||Math.abs(e.x-n.y)<5)){var o=this.context,s=o.view,l=o.event,u={view:s,event:l,dims:this.dims};s.emit(Zo.BEFORE_FILTER,pi.fromData(s,Zo.BEFORE_FILTER,u));var c=s.getCoordinate(),f=c.invert(n),d=c.invert(e);if(this.hasDim("x")){var h=s.getXScale(),v=QJ(h,"x",f,d);this.filterView(s,h.field,v)}if(this.hasDim("y")){var p=s.getYScales()[0],v=QJ(p,"y",f,d);this.filterView(s,p.field,v)}this.reRender(s,{source:Zo.FILTER}),s.emit(Zo.AFTER_FILTER,pi.fromData(s,Zo.AFTER_FILTER,u))}},t.prototype.end=function(){this.isStarted=!1},t.prototype.reset=function(){var e=this.context.view;if(e.emit(Zo.BEFORE_RESET,pi.fromData(e,Zo.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim("x")){var n=e.getXScale();this.filterView(e,n.field,null)}if(this.hasDim("y")){var i=e.getYScales()[0];this.filterView(e,i.field,null)}this.reRender(e,{source:Zo.RESET}),e.emit(Zo.AFTER_RESET,pi.fromData(e,Zo.AFTER_RESET,{}))},t.prototype.filterView=function(e,n,i){e.filter(n,i)},t.prototype.reRender=function(e,n){e.render(!0,n)},t}(vi),gR=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.filterView=function(e,n,i){var a=au(e);G(a,function(o){o.filter(n,i)})},t.prototype.reRender=function(e){var n=au(e);G(n,function(i){i.render(!0)})},t}(y2),ktt=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.filter=function(){var e=ig(this.context),n=this.context.view,i=Wa(n);if(Q0(this.context)){var a=PD(this.context,10);a&&G(i,function(v){a.includes(v)?v.show():v.hide()})}else if(e){var o=e.component,s=o.get("field");if(Z0(e)){if(s){var l=o.getItemsByState("unchecked"),u=ag(n,s),c=l.map(function(v){return v.name});G(i,function(v){var p=hl(v,s),g=u.getText(p);c.indexOf(g)>=0?v.hide():v.show()})}}else if(EQ(e)){var f=o.getValue(),d=f[0],h=f[1];G(i,function(v){var p=hl(v,s);p>=d&&p<=h?v.show():v.hide()})}}},t.prototype.clear=function(){var e=Wa(this.context.view);G(e,function(n){n.show()})},t.prototype.reset=function(){this.clear()},t}(vi),JJ=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.byRecord=!1,e}return t.prototype.filter=function(){Q0(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},t.prototype.filterByRecord=function(){var e=this.context.view,n=PD(this.context,10);if(!!n){var i=e.getXScale().field,a=e.getYScales()[0].field,o=n.map(function(l){return l.getModel().data}),s=au(e);G(s,function(l){var u=Wa(l);G(u,function(c){var f=c.getModel().data;IQ(o,f,i,a)?c.show():c.hide()})})}},t.prototype.filterByBBox=function(){var e=this,n=this.context.view,i=au(n);G(i,function(a){var o=_Q(e.context,a,10),s=Wa(a);o&&G(s,function(l){o.includes(l)?l.show():l.hide()})})},t.prototype.reset=function(){var e=au(this.context.view);G(e,function(n){var i=Wa(n);G(i,function(a){a.show()})})},t}(vi),Mtt=10,Itt=5,Ptt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.buttonGroup=null,e.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},e}return t.prototype.getButtonCfg=function(){return Dt(this.buttonCfg,this.cfg)},t.prototype.drawButton=function(){var e=this.getButtonCfg(),n=this.context.view.foregroundGroup.addGroup({name:e.name}),i=n.addShape({type:"text",name:"button-text",attrs:A({text:e.text},e.textStyle)}),a=i.getBBox(),o=BD(e.padding),s=n.addShape({type:"rect",name:"button-rect",attrs:A({x:a.x-o[3],y:a.y-o[0],width:a.width+o[1]+o[3],height:a.height+o[0]+o[2]},e.style)});s.toBack(),n.on("mouseenter",function(){s.attr(e.activeStyle)}),n.on("mouseleave",function(){s.attr(e.style)}),this.buttonGroup=n},t.prototype.resetPosition=function(){var e=this.context.view,n=e.getCoordinate(),i=n.convert({x:1,y:1}),a=this.buttonGroup,o=a.getBBox(),s=Zn(null,[["t",i.x-o.width-Mtt,i.y+o.height+Itt]]);a.setMatrix(s)},t.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},t.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},t.prototype.destroy=function(){var e=this.buttonGroup;e&&e.remove(),r.prototype.destroy.call(this)},t}(vi),Dtt=4,Rtt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.starting=!1,e.dragStart=!1,e}return t.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},t.prototype.drag=function(){if(!!this.startPoint){var e=this.context.getCurrentPoint(),n=this.context.view,i=this.context.event;this.dragStart?n.emit("drag",{target:i.target,x:i.x,y:i.y}):RD(e,this.startPoint)>Dtt&&(n.emit("dragstart",{target:i.target,x:i.x,y:i.y}),this.dragStart=!0)}},t.prototype.end=function(){if(this.dragStart){var e=this.context.view,n=this.context.event;e.emit("dragend",{target:n.target,x:n.x,y:n.y})}this.starting=!1,this.dragStart=!1},t}(vi),Ott=5,Ltt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.starting=!1,e.isMoving=!1,e.startPoint=null,e.startMatrix=null,e}return t.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},t.prototype.move=function(){if(!!this.starting){var e=this.startPoint,n=this.context.getCurrentPoint(),i=RD(e,n);if(i>Ott&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var a=this.context.view,o=Zn(this.startMatrix,[["t",n.x-e.x,n.y-e.y]]);a.backgroundGroup.setMatrix(o),a.foregroundGroup.setMatrix(o),a.middleGroup.setMatrix(o)}}},t.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},t.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var e=this.context.view;e.backgroundGroup.resetMatrix(),e.foregroundGroup.resetMatrix(),e.middleGroup.resetMatrix(),this.isMoving=!1},t}(vi),eee="x",tee="y",ree=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.dims=[eee,tee],e.cfgFields=["dims"],e.cacheScaleDefs={},e}return t.prototype.hasDim=function(e){return this.dims.includes(e)},t.prototype.getScale=function(e){var n=this.context.view;return e==="x"?n.getXScale():n.getYScales()[0]},t.prototype.resetDim=function(e){var n=this.context.view;if(this.hasDim(e)&&this.cacheScaleDefs[e]){var i=this.getScale(e);n.scale(i.field,this.cacheScaleDefs[e]),this.cacheScaleDefs[e]=null}},t.prototype.reset=function(){this.resetDim(eee),this.resetDim(tee);var e=this.context.view;e.render(!0)},t}(vi),Ftt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.startPoint=null,e.starting=!1,e.startCache={},e}return t.prototype.start=function(){var e=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var n=this.dims;G(n,function(i){var a=e.getScale(i),o=a.min,s=a.max,l=a.values;e.startCache[i]={min:o,max:s,values:l}})},t.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},t.prototype.translate=function(){var e=this;if(!!this.starting){var n=this.startPoint,i=this.context.view.getCoordinate(),a=this.context.getCurrentPoint(),o=i.invert(n),s=i.invert(a),l=s.x-o.x,u=s.y-o.y,c=this.context.view,f=this.dims;G(f,function(d){e.translateDim(d,{x:l*-1,y:u*-1})}),c.render(!0)}},t.prototype.translateDim=function(e,n){if(this.hasDim(e)){var i=this.getScale(e);i.isLinear&&this.translateLinear(e,i,n)}},t.prototype.translateLinear=function(e,n,i){var a=this.context.view,o=this.startCache[e],s=o.min,l=o.max,u=l-s,c=i[e]*u;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:n.nice,min:s,max:l}),a.scale(n.field,{nice:!1,min:s+c,max:l+c})},t.prototype.reset=function(){r.prototype.reset.call(this),this.startPoint=null,this.starting=!1},t}(ree),Ntt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.zoomRatio=.05,e}return t.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},t.prototype.zoom=function(e){var n=this,i=this.dims;G(i,function(a){n.zoomDim(a,e)}),this.context.view.render(!0)},t.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},t.prototype.zoomDim=function(e,n){if(this.hasDim(e)){var i=this.getScale(e);i.isLinear&&this.zoomLinear(e,i,n)}},t.prototype.zoomLinear=function(e,n,i){var a=this.context.view;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:n.nice,min:n.min,max:n.max});var o=this.cacheScaleDefs[e],s=o.max-o.min,l=n.min,u=n.max,c=i*s,f=l-c,d=u+c,h=d-f,v=h/s;d>f&&v<100&&v>.01&&a.scale(n.field,{nice:!1,min:l-c,max:u+c})},t}(ree);function Btt(r){var t=r.gEvent.originalEvent;return t.deltaY>0}var $tt=1,ztt=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.scroll=function(e){var n=this.context,i=n.view,a=n.event;if(!!i.getOptions().scrollbar){var o=(e==null?void 0:e.wheelDelta)||$tt,s=i.getController("scrollbar"),l=i.getXScale(),u=i.getOptions().data,c=la(Ds(u,l.field)),f=la(l.values),d=s.getValue(),h=Math.floor((c-f)*d),v=h+(Btt(a)?o:-o),p=o/(c-f)/1e4,g=ei(v/(c-f)+p,0,1);s.setValue(g)}},t}(vi);SQe("dark",OQ(cJe));eZ("canvas",tge);eZ("svg",Wge);ou("Polygon",EJe);ou("Interval",bJe);ou("Schema",_Je);ou("Path",qD);ou("Point",SJe);ou("Line",xJe);ou("Area",dJe);ou("Edge",hJe);ou("Heatmap",vJe);ou("Violin",AJe);tb("base",a2);tb("interval",VJe);tb("pie",HJe);tb("polar",yJ);qo("overlap",iet);qo("distribute",jJe);qo("fixed-overlap",net);qo("hide-overlap",fet);qo("limit-in-shape",JJe);qo("limit-in-canvas",QJe);qo("limit-in-plot",Met);qo("pie-outer",XJe);qo("adjust-color",het);qo("interval-adjust-position",met);qo("interval-hide-overlap",bet);qo("point-adjust-position",Cet);qo("pie-spider",ZJe);qo("path-adjust-position",Tet);xs("fade-in",Iet);xs("fade-out",Pet);xs("grow-in-x",Ret);xs("grow-in-xy",Let);xs("grow-in-y",Oet);xs("scale-in-x",Bet);xs("scale-in-y",$et);xs("wave-in",Get);xs("zoom-in",Uet);xs("zoom-out",Vet);xs("position-update",Net);xs("sector-path-update",zet);xs("path-in",Fet);ng("rect",Xet);ng("mirror",Yet);ng("list",Wet);ng("matrix",jet);ng("circle",Het);ng("tree",qet);xh("axis",Qet);xh("legend",Jet);xh("tooltip",VQ);xh("annotation",Zet);xh("slider",ett);xh("scrollbar",ntt);Cr("tooltip",UJ);Cr("sibling-tooltip",stt);Cr("ellipsis-text",ltt);Cr("element-active",utt);Cr("element-single-active",dtt);Cr("element-range-active",ftt);Cr("element-highlight",hR);Cr("element-highlight-by-x",vtt);Cr("element-highlight-by-color",htt);Cr("element-single-highlight",ptt);Cr("element-range-highlight",WJ);Cr("element-sibling-highlight",WJ,{effectSiblings:!0,effectByRecord:!0});Cr("element-selected",mtt);Cr("element-single-selected",ytt);Cr("element-range-selected",gtt);Cr("element-link-by-color",ctt);Cr("active-region",ott);Cr("list-active",btt);Cr("list-selected",wtt);Cr("list-highlight",vR);Cr("list-unchecked",Stt);Cr("list-checked",Ctt);Cr("legend-item-highlight",vR,{componentNames:["legend"]});Cr("axis-label-highlight",vR,{componentNames:["axis"]});Cr("rect-mask",XJ);Cr("x-rect-mask",KJ,{dim:"x"});Cr("y-rect-mask",KJ,{dim:"y"});Cr("circle-mask",Ett);Cr("path-mask",ZJ);Cr("smooth-path-mask",_tt);Cr("cursor",Ttt);Cr("data-filter",Att);Cr("brush",y2);Cr("brush-x",y2,{dims:["x"]});Cr("brush-y",y2,{dims:["y"]});Cr("sibling-filter",gR);Cr("sibling-x-filter",gR);Cr("sibling-y-filter",gR);Cr("element-filter",ktt);Cr("element-sibling-filter",JJ);Cr("element-sibling-filter-record",JJ,{byRecord:!0});Cr("view-drag",Rtt);Cr("view-move",Ltt);Cr("scale-translate",Ftt);Cr("scale-zoom",Ntt);Cr("reset-button",Ptt,{name:"reset-button",text:"reset"});Cr("mousewheel-scroll",ztt);function _f(r){return r.isInPlot()}Lr("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]});Lr("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]});Lr("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]});Lr("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]});Lr("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]});Lr("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]});Lr("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]});Lr("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]});Lr("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]});Lr("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]});Lr("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]});Lr("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(r){return!r.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(r){return!r.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]});Lr("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:_f,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:_f,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:_f,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]});Lr("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]});Lr("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:_f,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:_f,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:_f,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]});Lr("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:_f,action:"path-mask:start"},{trigger:"mousedown",isEnable:_f,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]});Lr("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]});Lr("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter"]}]});Lr("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]});Lr("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]});Lr("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","element-filter:filter"]}]});Lr("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]});function nee(r){return r.gEvent.preventDefault(),r.gEvent.originalEvent.deltaY>0}Lr("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(r){return nee(r.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(r){return!nee(r.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]});Lr("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]});Lr("plot-mousewheel-scroll",{start:[{trigger:"plot:mousewheel",action:"mousewheel-scroll:scroll"}]});function Tr(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){return r.reduce(function(n,i){return i(n)},e)}}function Nn(r,t){var e={};return r!==null&&typeof r=="object"&&t.forEach(function(n){var i=r[n];i!==void 0&&(e[n]=i)}),e}function iee(r,t){return t?Ya(t,function(e,n,i){return e.replace(new RegExp("{\\s*"+i+"\\s*}","g"),n)},r):r}var pl;(function(r){r.ERROR="error",r.WARN="warn",r.INFO="log"})(pl||(pl={}));var Gtt="AntV/G2Plot";function Utt(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=0;return Gtt+": "+r.replace(/%s/g,function(){return""+t[n++]})}function Ju(r,t,e){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];t||console[r](Utt.apply(void 0,Yn([e],n)))}function mR(r){if(!r)return{width:0,height:0};var t=getComputedStyle(r);return{width:(r.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10),height:(r.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)}}function ao(r,t){return r.geometries.find(function(e){return e.type===t})}function b2(r){return Ya(r.geometries,function(t,e){return t.concat(e.elements)},[])}function ub(r){return ae(r,["views","length"],0)<=0?b2(r):Ya(r.views,function(t,e){return t.concat(ub(e))},b2(r))}function Vtt(r){return ae(r,["views","length"],0)<=0?r.geometries:Ya(r.views,function(t,e){return t.concat(e.geometries)},r.geometries)}function tn(r,t){return r.views.find(function(e){return e.id===t})}function cb(r){var t=r.parent;return t?t.views:[]}function aee(r){return cb(r).filter(function(t){return t!==r})}function Ma(r){if(!Is(r,"Object"))return r;var t=A({},r);return t.formatter&&!t.content&&(t.content=t.formatter),t}function Htt(r,t){var e=[];if(r.length){e.push(["M",r[0].x,r[0].y]);for(var n=1,i=r.length;n<i;n+=1){var a=r[n];e.push(["L",a.x,a.y])}t&&e.push(["Z"])}return e}var Wtt=function(r,t,e,n){var i=[],a,o,s=!!n,l,u;if(s){l=[1/0,1/0],u=[-1/0,-1/0];for(var c=0,f=r.length;c<f;c++){var d=r[c];l=Na([0,0],l,d),u=Ba([0,0],u,d)}l=Na([0,0],l,n[0]),u=Ba([0,0],u,n[1])}for(var c=0,h=r.length;c<h;c++){var d=r[c];if(e)a=r[c?c-1:h-1],o=r[(c+1)%h];else if(c===0||c===h-1){i.push(d);continue}else a=r[c-1],o=r[c+1];var v=[0,0];v=ud(v,o,a),v=gi(v,v,t);var p=Mv(d,a),g=Mv(d,o),m=p+g;m!==0&&(p/=m,g/=m);var y=gi([0,0],v,-p),b=gi([0,0],v,g),x=Bi([0,0],d,y),w=Bi([0,0],d,b);s&&(x=Ba([0,0],x,l),x=Na([0,0],x,u),w=Ba([0,0],w,l),w=Na([0,0],w,u)),i.push(x),i.push(w)}return e&&i.push(i.shift()),i};function jtt(r,t,e){for(var n=!!t,i=[],a=0,o=r.length;a<o;a+=2)i.push([r[a],r[a+1]]);for(var s=Wtt(i,.4,n,e),l=i.length,u=[],c,f,d,a=0;a<l-1;a++)c=s[a*2],f=s[a*2+1],d=i[a+1],u.push(["C",c[0],c[1],f[0],f[1],d[0],d[1]]);return n&&(c=s[l],f=s[l+1],d=i[0],u.push(["C",c[0],c[1],f[0],f[1],d[0],d[1]])),u}function Ytt(r,t,e){var n=[],i=r[0],a=null;if(r.length<=2)return Htt(r,t);for(var o=0,s=r.length;o<s;o++){var l=r[o];(!a||!(a.x===l.x&&a.y===l.y))&&(n.push(l.x),n.push(l.y),a=l)}var u=e||[[0,0],[1,1]],c=jtt(n,t,u);return c.unshift(["M",i.x,i.y]),c}var Xtt=5,qtt={}.toString,oee=function(r,t){return qtt.call(r)==="[object "+t+"]"},Ktt=function(r){return oee(r,"Array")},Ztt=function(r){return typeof r=="object"&&r!==null},see=function(r){if(!Ztt(r)||!oee(r,"Object"))return!1;for(var t=r;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(r)===t},lee=function(r,t,e,n){e=e||0,n=n||Xtt;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=t[i];a?see(a)?(see(r[i])||(r[i]={}),e<n?lee(r[i],a,e+1,n):r[i]=t[i]):Ktt(a)?(r[i]=[],r[i]=r[i].concat(a)):r[i]=a:r[i]=a}},tt=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var n=0;n<t.length;n+=1)lee(r,t[n]);return r};function uee(r){if(!r)return r;var t=r.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g);return t.map(function(e){return e.toLowerCase()}).join("-")}function cee(r){var t={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},e=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];ae(r,"fill")&&(t.color=r.fill);var n=Nn(r,e),i=n.shadowColor,a=n.shadowBlur,o=a===void 0?0:a,s=n.shadowOffsetX,l=s===void 0?0:s,u=n.shadowOffsetY,c=u===void 0?0:u;t["text-shadow"]=""+[i,l+"px",c+"px",o+"px"].join(" ");var f=Nn(r,e),d=f.stroke,h=f.lineWidth,v=h===void 0?0:h;return t["-webkit-text-stroke"]=""+[v+"px",d].join(" "),G(r,function(p,g){["fontSize"].includes(g)&&zt(p)?t[uee(g)]=p+"px":g&&!e.includes(g)&&(t[uee(g)]=""+p)}),t}function fee(r,t){r.style["pointer-events"]="none",G(t,function(e,n){n&&e&&(r.style[n]=e)})}var x2=function(r,t,e){var n=t.statistic,i=t.plotType,a=n.title,o=n.content;[a,o].forEach(function(s,l){if(!!s){var u="";l===0?u=o?"translate(-50%, -100%)":"translate(-50%, -50%)":u=a?"translate(-50%, 0)":"translate(-50%, -50%)";var c=Kt(s.style)?s.style(e):s.style;r.annotation().html(A({position:["50%","50%"],html:function(f,d){var h=d.getCoordinate(),v=0;if(i==="pie"||i==="ring-progress")v=h.getRadius()*h.innerRadius*2;else if(i==="liquid"){var p=ae(d.geometries,[0,"elements",0,"shape"]);if(p){var g=p.find(function(x){return x.get("name")==="wrap"}),m=g.getCanvasBBox().width;v=m}}else v||(v=h.getWidth());fee(f,A({width:v+"px",transform:u},cee(c)));var y=d.getData();if(s.customHtml)return s.customHtml(f,d,e,y);var b=s.content;return s.formatter&&(b=s.formatter(e,y)),b?ot(b)?b:""+b:"<div></div>"},key:(l===0?"top":"bottom")+"-statistic"},Nn(s,["offsetX","offsetY","rotate","style","formatter"])))}})},Qtt=function(r,t,e){var n=t.statistic,i=n.title,a=n.content;[i,a].forEach(function(o){if(!!o){var s=Kt(o.style)?o.style(e):o.style;r.annotation().html(A({position:["50%","100%"],html:function(l,u){var c=u.getCoordinate(),f=u.views[0].getCoordinate(),d=f.getCenter(),h=f.getRadius(),v=Math.max(Math.sin(f.startAngle),Math.sin(f.endAngle))*h,p=d.y+v-c.y.start-parseFloat(ae(s,"fontSize",0)),g=c.getRadius()*c.innerRadius*2;fee(l,A({width:g+"px",transform:"translate(-50%, "+p+"px)"},cee(s)));var m=u.getData();if(o.customHtml)return o.customHtml(l,u,e,m);var y=o.content;return o.formatter&&(y=o.formatter(e,m)),y?ot(y)?y:""+y:"<div></div>"}},Nn(o,["offsetX","offsetY","rotate","style","formatter"])))}})},yR;function Jtt(){return yR||(yR=document.createElement("canvas").getContext("2d")),yR}ad(function(r,t){t===void 0&&(t={});var e=t.fontSize,n=t.fontFamily,i=n===void 0?"sans-serif":n,a=t.fontWeight,o=t.fontStyle,s=t.fontVariant,l=Jtt();l.font=[o,a,s,e+"px",i].join(" ");var u=l.measureText(ot(r)?r:"");return u.width},function(r,t){return t===void 0&&(t={}),Yn([r],Sv(t)).join("")});function _h(r){return typeof r=="number"&&!isNaN(r)}function ert(r,t,e){var n=Math.min(t,e),i=Math.max(t,e);return r>=n&&r<=i}function bR(r,t){var e=r.filter(function(a){var o=ae(a,[t]);return zt(o)&&!isNaN(o)}),n=e.every(function(a){return ae(a,[t])>=0}),i=e.every(function(a){return ae(a,[t])<=0});return n?{min:0}:i?{max:0}:{}}function dee(r,t,e,n,i){if(i===void 0&&(i=[]),!Array.isArray(r))return{nodes:[],links:[]};var a=[],o={},s=-1;return r.forEach(function(l){var u=l[t],c=l[e],f=l[n],d=Nn(l,i);o[u]||(o[u]=A({id:++s,name:u},d)),o[c]||(o[c]=A({id:++s,name:c},d)),a.push(A({source:o[u].id,target:o[c].id,value:f},d))}),{nodes:Object.values(o).sort(function(l,u){return l.id-u.id}),links:a}}function cg(r,t){var e=ya(r,function(n){var i=n[t];return i===null||typeof i=="number"&&!isNaN(i)});return Ju(pl.WARN,e.length===r.length,"illegal data existed in chart data."),e}function Tf(r){if(zt(r))return[r,r,r,r];if(Qe(r)){var t=r.length;if(t===1)return[r[0],r[0],r[0],r[0]];if(t===2)return[r[0],r[1],r[0],r[1]];if(t===3)return[r[0],r[1],r[2],r[1]];if(t===4)return r}return[0,0,0,0]}function w2(r,t,e){t===void 0&&(t="bottom"),e===void 0&&(e=25);var n=Tf(r),i=[t.startsWith("top")?e:0,t.startsWith("right")?e:0,t.startsWith("bottom")?e:0,t.startsWith("left")?e:0];return[n[0]+i[0],n[1]+i[1],n[2]+i[2],n[3]+i[3]]}function xR(r){var t=r.map(function(n){return Tf(n)}),e=[0,0,0,0];return t.length>0&&(e=e.map(function(n,i){return t.forEach(function(a,o){n+=t[o][i]}),n})),e}var trt={locale:"en-US"},S2={};function hee(r,t){S2[r]=t}function C2(r){return{get:function(t,e){return iee(ae(S2[r],t)||ae(S2[trt.locale],t)||ae(S2["en-US"],t)||t,e)}}}var rrt={locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}},nrt={locale:"zh-CN",general:{increase:"\u589E\u52A0",decrease:"\u51CF\u5C11",root:"\u521D\u59CB"},statistic:{total:"\u603B\u8BA1"},conversionTag:{label:"\u8F6C\u5316\u7387"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"\u603B\u8BA1"}},vee=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=1,n=function(){return"".concat(e++)};t.default=n});xn(vee);var wR=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,o=null;return function(){for(var s=this,l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];clearTimeout(o),o=setTimeout(function(){i.apply(s,u)},a)}};t.default=e});xn(wR);var lu=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SensorTabIndex=t.SensorClassName=t.SizeSensorId=void 0;var e="size-sensor-id";t.SizeSensorId=e;var n="size-sensor-object";t.SensorClassName=n;var i="-1";t.SensorTabIndex=i});xn(lu);lu.SensorTabIndex;lu.SensorClassName;lu.SizeSensorId;var SR=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createSensor=void 0;var e=n(wR);function n(a){return a&&a.__esModule?a:{default:a}}var i=function(o){var s=void 0,l=[],u=function(){getComputedStyle(o).position==="static"&&(o.style.position="relative");var p=document.createElement("object");return p.onload=function(){p.contentDocument.defaultView.addEventListener("resize",c),c()},p.style.display="block",p.style.position="absolute",p.style.top="0",p.style.left="0",p.style.height="100%",p.style.width="100%",p.style.overflow="hidden",p.style.pointerEvents="none",p.style.zIndex="-1",p.style.opacity="0",p.setAttribute("class",lu.SensorClassName),p.setAttribute("tabindex",lu.SensorTabIndex),p.type="text/html",o.appendChild(p),p.data="about:blank",p},c=(0,e.default)(function(){l.forEach(function(v){v(o)})}),f=function(p){s||(s=u()),l.indexOf(p)===-1&&l.push(p)},d=function(){s&&s.parentNode&&(s.contentDocument&&s.contentDocument.defaultView.removeEventListener("resize",c),s.parentNode.removeChild(s),s=void 0,l=[])},h=function(p){var g=l.indexOf(p);g!==-1&&l.splice(g,1),l.length===0&&s&&d()};return{element:o,bind:f,destroy:d,unbind:h}};t.createSensor=i});xn(SR);SR.createSensor;var CR=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createSensor=void 0;var e=n(wR);function n(a){return a&&a.__esModule?a:{default:a}}var i=function(o){var s=void 0,l=[],u=(0,e.default)(function(){l.forEach(function(v){v(o)})}),c=function(){var p=new ResizeObserver(u);return p.observe(o),u(),p},f=function(p){s||(s=c()),l.indexOf(p)===-1&&l.push(p)},d=function(){s.disconnect(),l=[],s=void 0},h=function(p){var g=l.indexOf(p);g!==-1&&l.splice(g,1),l.length===0&&s&&d()};return{element:o,bind:f,destroy:d,unbind:h}};t.createSensor=i});xn(CR);CR.createSensor;var ER=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createSensor=void 0;var e=typeof ResizeObserver!="undefined"?CR.createSensor:SR.createSensor;t.createSensor=e});xn(ER);ER.createSensor;var fg=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.removeSensor=t.getSensor=void 0;var e=n(vee);function n(s){return s&&s.__esModule?s:{default:s}}var i={},a=function(l){var u=l.getAttribute(lu.SizeSensorId);if(u&&i[u])return i[u];var c=(0,e.default)();l.setAttribute(lu.SizeSensorId,c);var f=(0,ER.createSensor)(l);return i[c]=f,f};t.getSensor=a;var o=function(l){var u=l.element.getAttribute(lu.SizeSensorId);l.element.removeAttribute(lu.SizeSensorId),l.destroy(),u&&i[u]&&delete i[u]};t.removeSensor=o});xn(fg);fg.removeSensor;fg.getSensor;var E2=$r(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ver=t.clear=t.bind=void 0;var e=function(o,s){var l=(0,fg.getSensor)(o);return l.bind(s),function(){l.unbind(s)}};t.bind=e;var n=function(o){var s=(0,fg.getSensor)(o);(0,fg.removeSensor)(s)};t.clear=n;var i="1.0.1";t.ver=i});xn(E2);E2.ver;E2.clear;var irt=E2.bind,pee="data-chart-source-type",gee=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],Rr=function(r){Ie(t,r);function t(e,n){var i=r.call(this)||this;return i.container=typeof e=="string"?document.getElementById(e):e,i.options=tt({},i.getDefaultOptions(),n),i.createG2(),i.bindEvents(),i}return t.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},t.prototype.createG2=function(){var e=this.options,n=e.width,i=e.height,a=e.defaultInteractions;this.chart=new BQe(A(A(A(A({container:this.container,autoFit:!1},this.getChartSize(n,i)),{localRefresh:!1}),Nn(this.options,gee)),{defaultInteractions:a})),this.container.setAttribute(pee,"G2Plot")},t.prototype.getChartSize=function(e,n){var i=mR(this.container);return{width:e||i.width||400,height:n||i.height||400}},t.prototype.bindEvents=function(){var e=this;this.chart&&this.chart.on("*",function(n){(n==null?void 0:n.type)&&e.emit(n.type,n)})},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},t.prototype.update=function(e){this.updateOption(e),this.render()},t.prototype.updateOption=function(e){this.options=tt({},this.options,e)},t.prototype.setState=function(e,n,i){i===void 0&&(i=!0);var a=ub(this.chart);G(a,function(o){n(o.getData())&&o.setState(e,i)})},t.prototype.getStates=function(){var e=ub(this.chart),n=[];return G(e,function(i){var a=i.getData(),o=i.getStates();G(o,function(s){n.push({data:a,state:s,geometry:i.geometry,element:i})})}),n},t.prototype.changeData=function(e){this.update({data:e})},t.prototype.changeSize=function(e,n){this.chart.changeSize(e,n)},t.prototype.addAnnotations=function(e){var n=Yn(e),i=this.chart.getController("annotation"),a=i.getComponents().map(function(l){return l.extra});i.clear(!0);for(var o=function(l){var u=a[l],c=n.findIndex(function(f){return f.id&&f.id===u.id});c!==-1&&(u=tt({},u,n[c]),n.splice(c,1)),i.annotation(u)},s=0;s<a.length;s++)o(s);n.forEach(function(l){return i.annotation(l)}),this.chart.render(!0)},t.prototype.removeAnnotations=function(e){var n=this.chart.getController("annotation"),i=n.getComponents().map(function(s){return s.extra});n.clear(!0);for(var a=function(s){var l=i[s];e.find(function(u){return u.id&&u.id===l.id})||n.annotation(l)},o=0;o<i.length;o++)a(o);this.chart.render(!0)},t.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(pee)},t.prototype.execAdaptor=function(){var e=this.getSchemaAdaptor(),n=this.options,i=n.padding,a=n.appendPadding;this.chart.padding=i,this.chart.appendPadding=a,e({chart:this.chart,options:this.options})},t.prototype.triggerResize=function(){this.chart.forceFit()},t.prototype.bindSizeSensor=function(){var e=this;if(!this.unbind){var n=this.options.autoFit,i=n===void 0?!0:n;i&&(this.unbind=irt(this.container,function(){var a=mR(e.container),o=a.width,s=a.height;(o!==e.chart.width||s!==e.chart.height)&&e.triggerResize()}))}},t.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},t}(ym),Qo=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"];function _2(){return typeof window=="object"?window==null?void 0:window.devicePixelRatio:2}function _R(r,t){t===void 0&&(t=r);var e=document.createElement("canvas"),n=_2();e.width=r*n,e.height=t*n,e.style.width=r+"px",e.style.height=t+"px";var i=e.getContext("2d");return i.scale(n,n),e}function TR(r,t,e,n){n===void 0&&(n=e);var i=t.backgroundColor,a=t.opacity;r.globalAlpha=a,r.fillStyle=i,r.beginPath(),r.fillRect(0,0,e,n),r.closePath()}function mee(r,t,e){var n=r+t;return e?n*2:n}function yee(r,t){var e=t?[[r*(1/4),r*(1/4)],[r*(3/4),r*(3/4)]]:[[r*(1/2),r*(1/2)]];return e}function AR(r,t){var e=t*Math.PI/180,n={a:Math.cos(e)*(1/r),b:Math.sin(e)*(1/r),c:-Math.sin(e)*(1/r),d:Math.cos(e)*(1/r),e:0,f:0};return n}var art={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function ort(r,t,e,n){var i=t.size,a=t.fill,o=t.lineWidth,s=t.stroke,l=t.fillOpacity;r.beginPath(),r.globalAlpha=l,r.fillStyle=a,r.strokeStyle=s,r.lineWidth=o,r.arc(e,n,i/2,0,2*Math.PI,!1),r.fill(),o&&r.stroke(),r.closePath()}function srt(r){var t=tt({},art,r),e=t.size,n=t.padding,i=t.isStagger,a=t.rotation,o=mee(e,n,i),s=yee(o,i),l=_R(o,o),u=l.getContext("2d");TR(u,t,o);for(var c=0,f=s;c<f.length;c++){var d=f[c],h=d[0],v=d[1];ort(u,t,h,v)}var p=u.createPattern(l,"repeat");if(p){var g=_2(),m=AR(g,a);p.setTransform(m)}return p}var lrt={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function urt(r,t,e){var n=t.stroke,i=t.lineWidth,a=t.strokeOpacity,o=new Path2D(e);r.globalAlpha=a,r.lineCap="square",r.strokeStyle=i?n:"transparent",r.lineWidth=i,r.stroke(o)}function crt(r){var t=tt({},lrt,r),e=t.spacing,n=t.rotation,i=t.lineWidth,a=e+i||1,o=e+i||1,s=`
            M 0 0 L `+a+` 0
            M 0 `+o+" L "+a+" "+o+`
            `,l=_R(a,o),u=l.getContext("2d");TR(u,t,a,o),urt(u,t,s);var c=u.createPattern(l,"repeat");if(c){var f=_2(),d=AR(f,n);c.setTransform(d)}return c}var frt={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function drt(r,t,e,n){var i=t.stroke,a=t.size,o=t.fill,s=t.lineWidth,l=t.fillOpacity;r.globalAlpha=l,r.strokeStyle=i,r.lineWidth=s,r.fillStyle=o,r.strokeRect(e-a/2,n-a/2,a,a),r.fillRect(e-a/2,n-a/2,a,a)}function hrt(r){var t=tt({},frt,r),e=t.size,n=t.padding,i=t.isStagger,a=t.rotation,o=mee(e,n,i),s=yee(o,i),l=_R(o,o),u=l.getContext("2d");TR(u,t,o);for(var c=0,f=s;c<f.length;c++){var d=f[c],h=d[0],v=d[1];drt(u,t,h,v)}var p=u.createPattern(l,"repeat");if(p){var g=_2(),m=AR(g,a);p.setTransform(m)}return p}function vrt(r){var t=r.type,e=r.cfg,n;switch(t){case"dot":n=srt(e);break;case"line":n=crt(e);break;case"square":n=hrt(e);break}return n}function ws(r){var t=this;return function(e){var n,i=e.options,a=e.chart,o=i.pattern;if(!o)return e;var s=function(l){for(var u,c,f,d=[],h=1;h<arguments.length;h++)d[h-1]=arguments[h];var v=a.getTheme().defaultColor,p=v,g=(c=(u=a.geometries)===null||u===void 0?void 0:u[0])===null||c===void 0?void 0:c.getAttribute("color");if(g){var m=g.getFields()[0],y=ae(l,m);p=Ko.getMappingValue(g,y,((f=g.values)===null||f===void 0?void 0:f[0])||v)}var b=o;typeof o=="function"&&(b=o.call(t,l,p)),b instanceof CanvasPattern||(b=vrt(tt({},{cfg:{backgroundColor:p}},b)));var x=i[r];return A(A({},typeof x=="function"?x.call.apply(x,Yn([t,l],d)):x||{}),{fill:b||p})};return tt({},e,{options:(n={},n[r]=s,n)})}}function fb(r){var t=r.chart,e=r.options,n=e.legend,i=e.colorField,a=e.seriesField;return n===!1?t.legend(!1):(i||a)&&t.legend(i||a,n),r}function Ia(r){var t=r.chart,e=r.options,n=e.tooltip;return n!==void 0&&t.tooltip(n),r}function ii(r){var t=r.chart,e=r.options,n=e.interactions;return G(n,function(i){i.enable===!1?t.removeInteraction(i.type):t.interaction(i.type,i.cfg||{})}),r}function $n(r){var t=r.chart,e=r.options,n=e.animation;return typeof n=="boolean"?t.animate(n):t.animate(!0),G(t.geometries,function(i){i.animate(n)}),r}function _n(r){var t=r.chart,e=r.options,n=e.theme;return n&&t.theme(n),r}function Af(r){var t=r.chart,e=r.options,n=e.state;return n&&G(t.geometries,function(i){i.state(n)}),r}function T2(r){var t=r.chart,e=r.options,n=e.slider;return t.option("slider",n),r}function prt(r){var t=r.chart,e=r.options,n=e.scrollbar;return t.option("scrollbar",n),r}function Ii(r,t){return function(e){var n=e.chart,i=e.options,a={};return G(r,function(o,s){a[s]=Nn(o,Qo)}),a=tt({},t,i.meta,a),n.scale(a),e}}function Pi(r){return function(t){var e=t.chart,n=t.options,i=e.getController("annotation");return G(Yn(n.annotations||[],r||[]),function(a){i.annotation(a)}),t}}function Th(r){var t=r.chart,e=r.options,n=e.yAxis,i=e.limitInPlot,a=i;return an(n)&&nt(i)&&(Object.values(Nn(n,["min","max","minLimit","maxLimit"])).some(function(o){return!nt(o)})?a=!0:a=!1),t.limitInPlot=a,r}function js(r,t){if(r===!1)return{fields:!1};var e=ae(r,"fields"),n=ae(r,"formatter");return n&&!e&&(e=t),{fields:e,formatter:n}}function A2(r,t){var e=r.type,n=r.xField,i=r.yField,a=r.colorField,o=r.shapeField,s=r.sizeField,l=r.styleField,u=r.rawFields,c=u===void 0?[]:u,f=[];if(t==="color")f=Yn([a||n],c);else if(t==="shape")f=Yn([o||n],c);else if(t==="size")f=Yn([s||n],c);else{f=Yn([n,i,a,o,s,l],c);var d=["x","y","color","shape","size","style"].indexOf(t),h=f[d];f.splice(d,1),f.unshift(h)}var v=Cc(f.filter(function(g){return!!g})),p=e==="line"&&[n,i].includes(v.join("*"))?"":v.join("*");return{mappingFields:v,tileMappingField:p}}function dg(r,t){if(!!t)return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i={};return r.forEach(function(a,o){i[a]=e[o]}),delete i.undefined,t(i)}}function Jo(r){var t=r.chart,e=r.options,n=e.type,i=e.args,a=e.mapping,o=e.xField,s=e.yField,l=e.colorField,u=e.shapeField,c=e.sizeField,f=e.tooltipFields,d=e.label,h=e.state,v=e.customInfo;if(!a)return r;var p=a.color,g=a.shape,m=a.size,y=a.style,b=a.tooltip,x=t[n](i).position(o+"*"+s);if(ot(p))l?x.color(l,p):x.color(p);else if(Kt(p)){var w=A2(e,"color"),S=w.mappingFields,C=w.tileMappingField;x.color(C,dg(S,p))}else l&&x.color(l,p);if(ot(g))u?x.shape(u,[g]):x.shape(g);else if(Kt(g)){var _=A2(e,"shape"),S=_.mappingFields,C=_.tileMappingField;x.shape(C,dg(S,g))}else u&&x.shape(u,g);if(zt(m))c?x.size(c,m):x.size(m);else if(Kt(m)){var T=A2(e,"size"),S=T.mappingFields,C=T.tileMappingField;x.size(C,dg(S,m))}else c&&x.size(c,m);if(Kt(y)){var E=A2(e,"style"),S=E.mappingFields,C=E.tileMappingField;x.style(C,dg(S,y))}else an(y)&&x.style(y);if(f===!1?x.tooltip(!1):co(f)||x.tooltip(f.join("*"),dg(f,b)),d===!1)x.label(!1);else if(d){var k=d.callback,I=d.fields,P=Ur(d,["callback","fields"]);x.label({fields:I||[s],callback:k,cfg:Ma(P)})}return h&&x.state(h),v&&x.customInfo(v),[o,s].filter(function(F){return F!==l}).forEach(function(F){t.legend(F,!1)}),A(A({},r),{ext:{geometry:x}})}function k2(r){var t=r.options,e=t.area,n=t.xField,i=t.yField,a=t.seriesField,o=t.smooth,s=t.tooltip,l=js(s,[n,i,a]),u=l.fields,c=l.formatter;return e?Jo(tt({},r,{options:{type:"area",colorField:a,tooltipFields:u,mapping:A({shape:o?"smooth":"area",tooltip:c},e)}})):r}function hg(r){var t=r.options,e=t.line,n=t.stepType,i=t.xField,a=t.yField,o=t.seriesField,s=t.smooth,l=t.connectNulls,u=t.tooltip,c=js(u,[i,a,o]),f=c.fields,d=c.formatter;return e?Jo(tt({},r,{options:{type:"line",colorField:o,tooltipFields:f,mapping:Dt({shape:n||(s?"smooth":"line"),tooltip:d},e),args:{connectNulls:l}}})):r}function Ss(r){var t=r.options,e=t.point,n=t.xField,i=t.yField,a=t.seriesField,o=t.sizeField,s=t.shapeField,l=t.tooltip,u=js(l,[n,i,a,o,s]),c=u.fields,f=u.formatter;return e?Jo(tt({},r,{options:{type:"point",colorField:a,shapeField:s,tooltipFields:c,mapping:A({tooltip:f},e)}})):r}function grt(r){var t=r.chart,e=r.options,n=r.ext,i=e.seriesField,a=e.isGroup,o=e.isStack,s=e.marginRatio,l=e.widthRatio,u=e.groupField,c=e.theme,f=[];if(i&&(a&&f.push({type:"dodge",dodgeBy:u||i,marginRatio:s}),o&&f.push({type:"stack",marginRatio:s})),f.length&&(n==null?void 0:n.geometry)){var d=n==null?void 0:n.geometry;d.adjust(f)}return nt(l)||t.theme(tt({},an(c)?c:eb(c),{columnWidthRatio:l})),r}function oo(r){var t=r.options,e=t.xField,n=t.yField,i=t.interval,a=t.seriesField,o=t.tooltip,s=t.minColumnWidth,l=t.maxColumnWidth,u=t.columnBackground,c=t.dodgePadding,f=t.intervalPadding,d=js(o,[e,n,a]),h=d.fields,v=d.formatter,p=(i?Jo(tt({},r,{options:{type:"interval",colorField:a,tooltipFields:h,mapping:A({tooltip:v},i),args:{dodgePadding:c,intervalPadding:f,minColumnWidth:s,maxColumnWidth:l,background:u}}})):r).ext;return grt(A(A({},r),{ext:p}))}function M2(r){var t=r.options,e=t.polygon,n=t.xField,i=t.yField,a=t.seriesField,o=t.tooltip,s=js(o,[n,i,a]),l=s.fields,u=s.formatter;return e?Jo(tt({},r,{options:{type:"polygon",colorField:a,tooltipFields:l,mapping:A({tooltip:u},e)}})):r}function bee(r){var t=r.options,e=t.edge,n=t.xField,i=t.yField,a=t.seriesField,o=t.tooltip,s=js(o,[n,i,a]),l=s.fields,u=s.formatter;return e?Jo(tt({},r,{options:{type:"edge",colorField:a,tooltipFields:l,mapping:A({tooltip:u},e)}})):r}function kR(r){var t=r.options,e=t.schema,n=t.xField,i=t.yField,a=t.seriesField,o=t.tooltip,s=js(o,[n,i,a]),l=s.fields,u=s.formatter;return e?Jo(tt({},r,{options:{type:"schema",colorField:a,tooltipFields:l,mapping:A({tooltip:u},e)}})):r}function mrt(r){var t=r.options,e=t.violin,n=t.xField,i=t.yField,a=t.seriesField,o=t.sizeField,s=t.tooltip,l=js(s,[n,i,a,o]),u=l.fields,c=l.formatter;return e?Jo(tt({},r,{options:{type:"violin",colorField:a,tooltipFields:u,mapping:A({tooltip:c},e)}})):r}function yrt(r){var t=r.chart,e=r.options,n=e.data,i=e.color,a=e.lineStyle,o=e.lineShape,s=e.point,l=e.area,u=e.seriesField,c=s==null?void 0:s.state;t.data(n);var f=tt({},r,{options:{shapeField:u,line:{color:i,style:a,shape:o},point:s&&A({color:i,shape:"circle"},s),area:l&&A({color:i},l),label:void 0}}),d=tt({},f,{options:{tooltip:!1,state:c}}),h=tt({},f,{options:{tooltip:!1,state:c}});return hg(f),Ss(d),k2(h),r}function I2(r){var t,e,n=r.options,i=n.xAxis,a=n.yAxis,o=n.xField,s=n.yField,l=n.data;return Tr(Ii((t={},t[o]=i,t[s]=a,t),(e={},e[o]={type:"cat"},e[s]=bR(l,s),e)))(r)}function brt(r){var t=r.chart,e=r.options,n=e.reflect;if(n){var i=n;Qe(i)||(i=[i]);var a=i.map(function(o){return["reflect",o]});t.coordinate({type:"rect",actions:a})}return r}function xee(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return n===!1?t.axis(a,!1):t.axis(a,n),i===!1?t.axis(o,!1):t.axis(o,i),r}function wee(r){var t=r.chart,e=r.options,n=e.legend,i=e.seriesField;return n&&i?t.legend(i,n):n===!1&&t.legend(!1),r}function xrt(r){var t=r.chart,e=r.options,n=e.label,i=e.yField,a=ao(t,"line");if(!n)a.label(!1);else{var o=n.callback,s=Ur(n,["callback"]);a.label({fields:[i],callback:o,cfg:A({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Ma(s))})}return r}function wrt(r){var t=r.chart,e=r.options,n=e.isStack;return n&&G(t.geometries,function(i){i.adjust("stack")}),r}function See(r){return Tr(yrt,I2,wrt,_n,brt,xee,wee,Ia,xrt,T2,ii,$n,Pi(),Th)(r)}var Srt=tt({},Rr.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left"},isStack:!1}),Crt=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.active=function(){var e=this.getView(),n=this.context.event;if(n.data){var i=n.data.items,a=e.geometries.filter(function(o){return o.type==="point"});G(a,function(o){G(o.elements,function(s){var l=lT(i,function(u){return u.data===s.data})!==-1;s.setState("active",l)})})}},t.prototype.reset=function(){var e=this.getView(),n=e.geometries.filter(function(i){return i.type==="point"});G(n,function(i){G(i.elements,function(a){a.setState("active",!1)})})},t.prototype.getView=function(){return this.context.view},t}(vi);Cr("marker-active",Crt);Lr("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var Ert=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="line",e}return t.getDefaultOptions=function(){return Srt},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this,i=n.chart,a=n.options;I2({chart:i,options:a}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return See},t}(Rr);function Cee(r,t,e,n){var i=Ya(r,function(a,o){var s=o[e],l=a.has(s)?a.get(s):0,u=o[t];return l=_h(u)?l+u:l,a.set(s,l),a},new Map);return Kn(r,function(a){var o,s=a[t],l=a[e],u=_h(s)?s/i.get(l):0;return A(A({},a),(o={},o[n]=u,o))})}function _rt(r,t,e,n){var i=Ya(r,function(a,o){var s=Ya(e,function(c,f){return""+c+o[f]},""),l=a.has(s)?a.get(s):0,u=o[t];return l=_h(u)?l+u:l,a.set(s,l),a},new Map);return Kn(r,function(a){var o,s=a[t],l=Ya(e,function(c,f){return""+c+a[f]},""),u=_h(s)?s/i.get(l):0;return A(A({},a),(o={},o[n]=u,o))})}function db(r,t,e,n,i){return i?Cee(r,t,e,n):r}function Trt(r){var t=r.chart,e=r.options,n=e.data,i=e.areaStyle,a=e.color,o=e.point,s=e.line,l=e.isPercent,u=e.xField,c=e.yField,f=e.tooltip,d=e.seriesField,h=e.startOnZero,v=o==null?void 0:o.state,p=db(n,c,u,c,l);t.data(p);var g=l?A({formatter:function(x){return{name:x[d]||x[u],value:(Number(x[c])*100).toFixed(2)+"%"}}},f):f,m=tt({},r,{options:{area:{color:a,style:i},line:s&&A({color:a},s),point:o&&A({color:a},o),tooltip:g,label:void 0,args:{startOnZero:h}}}),y=tt({options:{line:{size:2}}},m,{options:{sizeField:d,tooltip:!1}}),b=tt({},m,{options:{tooltip:!1,state:v}});return k2(m),hg(y),Ss(b),r}function Art(r){var t=r.chart,e=r.options,n=e.label,i=e.yField,a=ao(t,"area");if(!n)a.label(!1);else{var o=n.callback,s=Ur(n,["callback"]);a.label({fields:[i],callback:o,cfg:A({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Ma(s))})}return r}function krt(r){var t=r.chart,e=r.options,n=e.isStack,i=e.isPercent,a=e.seriesField;return(i||n)&&a&&G(t.geometries,function(o){o.adjust("stack")}),r}function Eee(r){return Tr(_n,ws("areaStyle"),Trt,I2,krt,xee,wee,Ia,Art,T2,Pi(),ii,$n,Th)(r)}var Mrt=tt({},Rr.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left"}}),Irt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="area",e}return t.getDefaultOptions=function(){return Mrt},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this.options,i=n.isPercent,a=n.xField,o=n.yField,s=this,l=s.chart,u=s.options;I2({chart:l,options:u}),this.chart.changeData(db(e,o,a,o,i))},t.prototype.getSchemaAdaptor=function(){return Eee},t}(Rr);function _ee(r,t){return!zt(r)||!zt(t)?"-":r===t?"100%":r===0?"\u221E":t===0?"-\u221E":(100*t/r).toFixed(2)+"%"}function Prt(r,t){return tt({size:t?32:80,spacing:t?8:12,offset:t?32:0,arrow:r.arrow!==!1&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:r.text!==!1&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:_ee}},r)}function P2(r,t){return Kn(t.getModel().points,function(e){return r.convertPoint(e)})}function Drt(r,t,e){var n=r.view,i=r.geometry,a=r.group,o=r.options,s=r.horizontal,l=o.offset,u=o.size,c=o.arrow,f=n.getCoordinate(),d=P2(f,t)[s?3:0],h=P2(f,e)[s?0:3],v=h.y-d.y,p=h.x-d.x;if(typeof c!="boolean"){var g=c.headSize,m=o.spacing,y;s?(p-g)/2<m?(m=Math.max(1,(p-g)/2),y=[[d.x+m,d.y-l],[d.x+m,d.y-l-u],[h.x-m,h.y-l-u/2]]):y=[[d.x+m,d.y-l],[d.x+m,d.y-l-u],[h.x-m-g,h.y-l-u],[h.x-m,h.y-l-u/2],[h.x-m-g,h.y-l]]:(v-g)/2<m?(m=Math.max(1,(v-g)/2),y=[[d.x+l,d.y+m],[d.x+l+u,d.y+m],[h.x+l+u/2,h.y-m]]):y=[[d.x+l,d.y+m],[d.x+l+u,d.y+m],[h.x+l+u,h.y-m-g],[h.x+l+u/2,h.y-m],[h.x+l,h.y-m-g]],a.addShape("polygon",{id:n.id+"-conversion-tag-arrow-"+i.getElementId(t.getModel().mappingData),name:"conversion-tag-arrow",origin:{element:t,nextElement:e},attrs:A(A({},c.style||{}),{points:y})})}}function Rrt(r,t,e){var n,i,a,o=r.view,s=r.geometry,l=r.group,u=r.options,c=r.field,f=r.horizontal,d=u.offset,h=u.size;if(typeof u.text!="boolean"){var v=o.getCoordinate(),p=((n=u.text)===null||n===void 0?void 0:n.formatter)&&((i=u.text)===null||i===void 0?void 0:i.formatter(t.getData()[c],e.getData()[c])),g=P2(v,t)[f?3:0],m=P2(v,e)[f?0:3],y=l.addShape("text",{id:o.id+"-conversion-tag-text-"+s.getElementId(t.getModel().mappingData),name:"conversion-tag-text",origin:{element:t,nextElement:e},attrs:A(A({},((a=u.text)===null||a===void 0?void 0:a.style)||{}),{text:p,x:f?(g.x+m.x)/2:g.x+d+h/2,y:f?g.y-d-h/2:(g.y+m.y)/2})});if(f){var b=m.x-g.x,x=y.getBBox().width;if(x>b){var w=x/p.length,S=Math.max(1,Math.ceil(b/w)-1),C=p.slice(0,S)+"...";y.attr("text",C)}}}}function Ort(r,t,e){Drt(r,t,e),Rrt(r,t,e)}function Lrt(r,t,e){return t===void 0&&(t=!0),e===void 0&&(e=!1),function(n){var i=n.options,a=n.chart,o=i.conversionTag,s=i.theme;return o&&!e&&(a.theme(tt({},an(s)?s:eb(s),{columnWidthRatio:1/3})),a.annotation().shape({render:function(l,u){var c=l.addGroup({id:a.id+"-conversion-tag-group",name:"conversion-tag-group"}),f=Ps(a.geometries,function(v){return v.type==="interval"}),d={view:u,geometry:f,group:c,field:r,horizontal:t,options:Prt(o,t)},h=t?f.elements:f.elements.slice().reverse();G(h,function(v,p){p>0&&Ort(d,h[p-1],v)})}})),n}}var Ah={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},MR=function(r,t){return r==="hover"?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:t}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:t}]}]};Lr(Ah.hover,{start:MR(Ah.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]});Lr(Ah.click,{start:MR(Ah.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});function Frt(r){return r===void 0&&(r=!1),function(t){var e=t.chart,n=t.options,i=n.connectedArea,a=function(){e.removeInteraction(Ah.hover),e.removeInteraction(Ah.click)};if(!r&&i){var o=i.trigger||"hover";a(),e.interaction(Ah[o],{start:MR(o,i.style)})}else a();return t}}var Nrt=10,Brt=5,$rt={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}},zrt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.buttonGroup=null,e.buttonCfg=A({name:"button"},$rt),e}return t.prototype.getButtonCfg=function(){var e=this.context.view,n=ae(e,["interactions","filter-action","cfg","buttonConfig"]);return tt(this.buttonCfg,n,this.cfg)},t.prototype.drawButton=function(){var e=this.getButtonCfg(),n=this.context.view.foregroundGroup.addGroup({name:e.name}),i=this.drawText(n);this.drawBackground(n,i.getBBox()),this.buttonGroup=n},t.prototype.drawText=function(e){var n,i=this.getButtonCfg();return e.addShape({type:"text",name:"button-text",attrs:A({text:i.text},(n=i.textStyle)===null||n===void 0?void 0:n.default)})},t.prototype.drawBackground=function(e,n){var i,a=this.getButtonCfg(),o=Tf(a.padding),s=e.addShape({type:"rect",name:"button-rect",attrs:A({x:n.x-o[3],y:n.y-o[0],width:n.width+o[1]+o[3],height:n.height+o[0]+o[2]},(i=a.buttonStyle)===null||i===void 0?void 0:i.default)});return s.toBack(),e.on("mouseenter",function(){var l;s.attr((l=a.buttonStyle)===null||l===void 0?void 0:l.active)}),e.on("mouseleave",function(){var l;s.attr((l=a.buttonStyle)===null||l===void 0?void 0:l.default)}),s},t.prototype.resetPosition=function(){var e=this.context.view,n=e.getCoordinate(),i=n.convert({x:1,y:1}),a=this.buttonGroup,o=a.getBBox(),s=Ko.transform(null,[["t",i.x-o.width-Nrt,i.y+o.height+Brt]]);a.setMatrix(s)},t.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},t.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},t.prototype.destroy=function(){var e=this.buttonGroup;e&&e.remove(),r.prototype.destroy.call(this)},t}(vi);Cr("brush-reset-button",zrt,{name:"brush-reset-button"});Lr("filter-action",{});function ec(r){return r.isInPlot()}function kh(r,t,e){var n=t||"rect";switch(r){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:ec,action:["brush:start",n+"-mask:start",n+"-mask:show"],arg:[null,{maskStyle:e==null?void 0:e.style}]}],processing:[{trigger:"mousemove",isEnable:ec,action:[n+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:ec,action:["brush:filter","brush:end",n+"-mask:end",n+"-mask:hide","brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(i){return!i.isInShape("mask")},action:[n+"-mask:start",n+"-mask:show"],arg:[{maskStyle:e==null?void 0:e.style}]},{trigger:"mask:dragstart",action:[n+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[n+"-mask:resize"]},{trigger:"mask:drag",action:[n+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[n+"-mask:end"]},{trigger:"mask:dragend",action:[n+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(i){return!i.isInPlot()},action:["element-range-highlight:clear",n+"-mask:end",n+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",n+"-mask:hide"]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:ec,action:["brush-x:start",n+"-mask:start",n+"-mask:show"],arg:[null,{maskStyle:e==null?void 0:e.style}]}],processing:[{trigger:"mousemove",isEnable:ec,action:[n+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:ec,action:["brush-x:filter","brush-x:end",n+"-mask:end",n+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(i){return!i.isInShape("mask")},action:[n+"-mask:start",n+"-mask:show"],arg:[{maskStyle:e==null?void 0:e.style}]},{trigger:"mask:dragstart",action:[n+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[n+"-mask:resize"]},{trigger:"mask:drag",action:[n+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[n+"-mask:end"]},{trigger:"mask:dragend",action:[n+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(i){return!i.isInPlot()},action:["element-range-highlight:clear",n+"-mask:end",n+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",n+"-mask:hide"]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:ec,action:["brush-y:start",n+"-mask:start",n+"-mask:show"],arg:[null,{maskStyle:e==null?void 0:e.style}]}],processing:[{trigger:"mousemove",isEnable:ec,action:[n+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:ec,action:["brush-y:filter","brush-y:end",n+"-mask:end",n+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(i){return!i.isInShape("mask")},action:[n+"-mask:start",n+"-mask:show"],arg:[{maskStyle:e==null?void 0:e.style}]},{trigger:"mask:dragstart",action:[n+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[n+"-mask:resize"]},{trigger:"mask:drag",action:[n+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[n+"-mask:end"]},{trigger:"mask:dragend",action:[n+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(i){return!i.isInPlot()},action:["element-range-highlight:clear",n+"-mask:end",n+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",n+"-mask:hide"]}]};default:return{}}}Lr("brush",kh("brush"));Lr("brush-highlight",kh("brush-highlight"));Lr("brush-x",kh("brush-x","x-rect"));Lr("brush-y",kh("brush-y","y-rect"));Lr("brush-x-highlight",kh("brush-x-highlight","x-rect"));Lr("brush-y-highlight",kh("brush-y-highlight","y-rect"));var Tee=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function Aee(r){var t=r.options,e=t.brush,n=ya(t.interactions||[],function(i){return Tee.indexOf(i.type)===-1});return(e==null?void 0:e.enabled)&&(Tee.forEach(function(i){var a,o=!1;switch(e.type){case"x-rect":o=i===(e.action==="highlight"?"brush-x-highlight":"brush-x");break;case"y-rect":o=i===(e.action==="highlight"?"brush-y-highlight":"brush-y");break;default:o=i===(e.action==="highlight"?"brush-highlight":"brush");break}var s={type:i,enable:o};(((a=e.mask)===null||a===void 0?void 0:a.style)||e.type)&&(s.cfg=kh(i,e.type,e.mask)),n.push(s)}),(e==null?void 0:e.action)!=="highlight"&&n.push({type:"filter-action",cfg:{buttonConfig:e.button}})),tt({},r,{options:{interactions:n}})}function Grt(r){var t=r.options,e=t.legend,n=t.seriesField,i=t.isStack;return n?e!==!1&&(e=A({position:i?"right-top":"top-left"},e)):e=!1,r.options.legend=e,r}function Urt(r){var t=r.chart,e=r.options,n=e.data,i=e.columnStyle,a=e.color,o=e.columnWidthRatio,s=e.isPercent,l=e.isGroup,u=e.isStack,c=e.xField,f=e.yField,d=e.seriesField,h=e.groupField,v=e.tooltip,p=e.shape,g=s&&l&&u?_rt(n,f,[c,h],f):db(n,f,c,f,s),m=[];u&&d&&!l?g.forEach(function(x){var w=m.find(function(S){return S[c]===x[c]&&S[d]===x[d]});w?w[f]+=x[f]||0:m.push(A({},x))}):m=g,t.data(m);var y=s?A({formatter:function(x){return{name:l&&u?x[d]+" - "+x[h]:x[d]||x[c],value:(Number(x[f])*100).toFixed(2)+"%"}}},v):v,b=tt({},r,{options:{data:m,widthRatio:o,tooltip:y,interval:{shape:p,style:i,color:a}}});return oo(b),b}function IR(r){var t,e,n=r.options,i=n.xAxis,a=n.yAxis,o=n.xField,s=n.yField,l=n.data,u=n.isPercent,c=u?{max:1,min:0,minLimit:0,maxLimit:1}:{};return Tr(Ii((t={},t[o]=i,t[s]=a,t),(e={},e[o]={type:"cat"},e[s]=A(A({},bR(l,s)),c),e)))(r)}function Vrt(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return n===!1?t.axis(a,!1):t.axis(a,n),i===!1?t.axis(o,!1):t.axis(o,i),r}function Hrt(r){var t=r.chart,e=r.options,n=e.legend,i=e.seriesField;return n&&i?t.legend(i,n):n===!1&&t.legend(!1),r}function Wrt(r){var t=r.chart,e=r.options,n=e.label,i=e.yField,a=e.isRange,o=ao(t,"interval");if(!n)o.label(!1);else{var s=n.callback,l=Ur(n,["callback"]);o.label({fields:[i],callback:s,cfg:A({layout:(l==null?void 0:l.position)?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Ma(a?A({content:function(u){var c;return(c=u[i])===null||c===void 0?void 0:c.join("-")}},l):l))})}return r}function jrt(r){var t=r.chart,e=r.options,n=e.tooltip,i=e.isGroup,a=e.isStack,o=e.groupField,s=e.data,l=e.xField,u=e.yField,c=e.seriesField;if(n===!1)t.tooltip(!1);else{var f=n;if(i&&a){var d=(f==null?void 0:f.formatter)||function(h){return{name:h[c]+" - "+h[o],value:h[u]}};f=A(A({},f),{customItems:function(h){var v=[];return G(h,function(p){var g=ya(s,function(m){return sT(m,Nn(p.data,[l,c]))});g.forEach(function(m){v.push(A(A(A({},p),{value:m[u],data:m,mappingData:{_origin:m}}),d(m)))})}),v}})}t.tooltip(f)}return r}function D2(r,t){t===void 0&&(t=!1);var e=r.options,n=e.seriesField;return Tr(Grt,_n,ws("columnStyle"),Af,Urt,IR,Vrt,Hrt,jrt,T2,prt,Wrt,Aee,ii,$n,Pi(),Lrt(e.yField,!t,!!n),Frt(!e.isStack),Th)(r)}var Yrt=tt({},Rr.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]}),Xrt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="column",e}return t.getDefaultOptions=function(){return Yrt},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this.options,i=n.yField,a=n.xField,o=n.isPercent,s=this,l=s.chart,u=s.options;IR({chart:l,options:u}),this.chart.changeData(db(e,i,a,i,o))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return D2},t}(Rr);function kee(r){return r&&r.slice().reverse()}function Mee(r){var t=r.chart,e=r.options,n=e.xField,i=e.yField,a=e.xAxis,o=e.yAxis,s=e.barStyle,l=e.barWidthRatio,u=e.label,c=e.data,f=e.seriesField,d=e.isStack,h=e.minBarWidth,v=e.maxBarWidth;u&&!u.position&&(u.position="left",u.layout||(u.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]));var p=e.legend;f?p!==!1&&(p=A({position:d?"top-left":"right-top",reversed:!d},p||{})):p=!1,r.options.legend=p;var g=e.tooltip;return f&&g!==!1&&(g=A({reversed:!d},g||{})),r.options.tooltip=g,t.coordinate().transpose(),D2({chart:t,options:A(A({},e),{label:u,xField:i,yField:n,xAxis:o,yAxis:a,columnStyle:s,columnWidthRatio:l,minColumnWidth:h,maxColumnWidth:v,columnBackground:e.barBackground,data:kee(c)})},!0)}var qrt=tt({},Rr.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]}),Krt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="bar",e}return t.getDefaultOptions=function(){return qrt},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this,i=n.chart,a=n.options,o=a.xField,s=a.yField,l=a.isPercent,u=A(A({},a),{xField:s,yField:o});IR({chart:i,options:u}),i.changeData(db(kee(e),o,s,o,l))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Mee},t}(Rr),Iee=tt({},Rr.getDefaultOptions(),{legend:{position:"right"},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}});function Zrt(r,t){var e=null;return G(r,function(n){typeof n[t]=="number"&&(e+=n[t])}),e}function Qrt(r,t){var e;switch(r){case"inner":return e="-30%",ot(t)&&t.endsWith("%")?parseFloat(t)*.01>0?e:t:t<0?t:e;case"outer":return e=12,ot(t)&&t.endsWith("%")?parseFloat(t)*.01<0?e:t:t>0?t:e;default:return t}}function R2(r,t){return zx(cg(r,t),function(e){return e[t]===0})}var Jrt=[1,0,0,0,1,0,0,0,1];function PR(r,t){var e=Yn(t||Jrt);return Ko.transform(e,r)}var ent=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getActiveElements=function(){var e=Ko.getDelegationObject(this.context);if(e){var n=this.context.view,i=e.component,a=e.item,o=i.get("field");if(o){var s=n.geometries[0].elements;return s.filter(function(l){return l.getModel().data[o]===a.value})}}return[]},t.prototype.getActiveElementLabels=function(){var e=this.context.view,n=this.getActiveElements(),i=e.geometries[0].labelsContainer.getChildren();return i.filter(function(a){return n.find(function(o){return ci(o.getData(),a.get("data"))})})},t.prototype.transfrom=function(e){e===void 0&&(e=7.5);var n=this.getActiveElements(),i=this.getActiveElementLabels();n.forEach(function(a,o){var s=i[o],l=a.geometry.coordinate;if(l.isPolar&&l.isTransposed){var u=Ko.getAngle(a.getModel(),l),c=u.startAngle,f=u.endAngle,d=(c+f)/2,h=e,v=h*Math.cos(d),p=h*Math.sin(d);a.shape.setMatrix(PR([["t",v,p]])),s.setMatrix(PR([["t",v,p]]))}})},t.prototype.active=function(){this.transfrom()},t.prototype.reset=function(){this.transfrom(0)},t}(vi);function tnt(r){var t=r.event,e,n=t.target;return n&&(e=n.get("element")),e}var rnt=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getAnnotations=function(e){var n=e||this.context.view;return n.getController("annotation").option},t.prototype.getInitialAnnotation=function(){return this.initialAnnotation},t.prototype.init=function(){var e=this,n=this.context.view;n.removeInteraction("tooltip"),n.on("afterchangesize",function(){var i=e.getAnnotations(n);e.initialAnnotation=i})},t.prototype.change=function(e){var n=this.context,i=n.view,a=n.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var o=ae(a,["data","data"]);if(a.type.match("legend-item")){var s=Ko.getDelegationObject(this.context),l=i.getGroupedFields()[0];if(s&&l){var u=s.item;o=i.getData().find(function(h){return h[l]===u.value})}}if(o){var c=ae(e,"annotations",[]),f=ae(e,"statistic",{});i.getController("annotation").clear(!0),G(c,function(h){typeof h=="object"&&i.annotation()[h.type](h)}),x2(i,{statistic:f,plotType:"pie"},o),i.render(!0)}var d=tnt(this.context);d&&d.shape.toFront()},t.prototype.reset=function(){var e=this.context.view,n=e.getController("annotation");n.clear(!0);var i=this.getInitialAnnotation();G(i,function(a){e.annotation()[a.type](a)}),e.render(!0)},t}(vi),Pee="pie-statistic";Cr(Pee,rnt);Lr("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]});Cr("pie-legend",ent);Lr("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});function nnt(r){var t=r.chart,e=r.options,n=e.data,i=e.angleField,a=e.colorField,o=e.color,s=e.pieStyle,l=cg(n,i);if(R2(l,i)){var u="$$percentage$$";l=l.map(function(f){var d;return A(A({},f),(d={},d[u]=1/l.length,d))}),t.data(l);var c=tt({},r,{options:{xField:"1",yField:u,seriesField:a,isStack:!0,interval:{color:o,style:s},args:{zIndexReversed:!0}}});oo(c)}else{t.data(l);var c=tt({},r,{options:{xField:"1",yField:i,seriesField:a,isStack:!0,interval:{color:o,style:s},args:{zIndexReversed:!0}}});oo(c)}return r}function int(r){var t,e=r.chart,n=r.options,i=n.meta,a=n.colorField,o=tt({},i);return e.scale(o,(t={},t[a]={type:"cat"},t)),r}function ant(r){var t=r.chart,e=r.options,n=e.radius,i=e.innerRadius,a=e.startAngle,o=e.endAngle;return t.coordinate({type:"theta",cfg:{radius:n,innerRadius:i,startAngle:a,endAngle:o}}),r}function ont(r){var t=r.chart,e=r.options,n=e.label,i=e.colorField,a=e.angleField,o=t.geometries[0];if(!n)o.label(!1);else{var s=n.callback,l=Ur(n,["callback"]),u=Ma(l);if(u.content){var c=u.content;u.content=function(v,p,g){var m=v[i],y=v[a],b=t.getScaleByField(a),x=b==null?void 0:b.scale(y);return Kt(c)?c(A(A({},v),{percent:x}),p,g):ot(c)?iee(c,{value:y,name:m,percentage:zt(x)&&!nt(y)?(x*100).toFixed(2)+"%":null}):c}}var f={inner:"",outer:"pie-outer",spider:"pie-spider"},d=u.type?f[u.type]:"pie-outer",h=u.layout?Qe(u.layout)?u.layout:[u.layout]:[];u.layout=(d?[{type:d}]:[]).concat(h),o.label({fields:i?[a,i]:[a],callback:s,cfg:A(A({},u),{offset:Qrt(u.type,u.offset),type:"pie"})})}return r}function Dee(r){var t=r.innerRadius,e=r.statistic,n=r.angleField,i=r.colorField,a=r.meta,o=r.locale,s=C2(o);if(t&&e){var l=tt({},Iee.statistic,e),u=l.title,c=l.content;return u!==!1&&(u=tt({},{formatter:function(f){return f?f[i]:nt(u.content)?s.get(["statistic","total"]):u.content}},u)),c!==!1&&(c=tt({},{formatter:function(f,d){var h=f?f[n]:Zrt(d,n),v=ae(a,[n,"formatter"])||function(p){return p};return f||nt(c.content)?v(h):c.content}},c)),tt({},{statistic:{title:u,content:c}},r)}return r}function Ree(r){var t=r.chart,e=r.options,n=Dee(e),i=n.innerRadius,a=n.statistic;return t.getController("annotation").clear(!0),Tr(Pi())(r),i&&a&&x2(t,{statistic:a,plotType:"pie"}),r}function snt(r){var t=r.chart,e=r.options,n=e.tooltip,i=e.colorField,a=e.angleField,o=e.data;if(n===!1)t.tooltip(n);else if(t.tooltip(tt({},n,{shared:!1})),R2(o,a)){var s=ae(n,"fields"),l=ae(n,"formatter");co(ae(n,"fields"))&&(s=[i,a],l=l||function(u){return{name:u[i],value:Ec(u[a])}}),t.geometries[0].tooltip(s.join("*"),dg(s,l))}return r}function lnt(r){var t=r.chart,e=r.options,n=Dee(e),i=n.interactions,a=n.statistic,o=n.annotations;return G(i,function(s){var l,u;if(s.enable===!1)t.removeInteraction(s.type);else if(s.type==="pie-statistic-active"){var c=[];((l=s.cfg)===null||l===void 0?void 0:l.start)||(c=[{trigger:"element:mouseenter",action:Pee+":change",arg:{statistic:a,annotations:o}}]),G((u=s.cfg)===null||u===void 0?void 0:u.start,function(f){c.push(A(A({},f),{arg:{statistic:a,annotations:o}}))}),t.interaction(s.type,tt({},s.cfg,{start:c}))}else t.interaction(s.type,s.cfg||{})}),r}function Oee(r){return Tr(ws("pieStyle"),nnt,int,_n,ant,fb,snt,ont,Af,Ree,lnt,$n)(r)}var unt=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="pie",e}return t.getDefaultOptions=function(){return Iee},t.prototype.changeData=function(e){this.chart.emit(Hr.BEFORE_CHANGE_DATA,pi.fromData(this.chart,Hr.BEFORE_CHANGE_DATA,null));var n=this.options,i=this.options.angleField,a=cg(n.data,i),o=cg(e,i);R2(a,i)||R2(o,i)?this.update({data:e}):(this.updateOption({data:e}),this.chart.data(o),Ree({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(Hr.AFTER_CHANGE_DATA,pi.fromData(this.chart,Hr.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Oee},t}(Rr);function cnt(r){var t=r.chart,e=r.options,n=e.data,i=e.sectorStyle,a=e.color;return t.data(n),Tr(oo)(tt({},r,{options:{marginRatio:1,interval:{style:i,color:a}}})),r}function fnt(r){var t=r.chart,e=r.options,n=e.label,i=e.xField,a=ao(t,"interval");if(n===!1)a.label(!1);else if(an(n)){var o=n.callback,s=n.fields,l=Ur(n,["callback","fields"]),u=l.offset,c=l.layout;(u===void 0||u>=0)&&(c=c?Qe(c)?c:[c]:[],l.layout=ya(c,function(f){return f.type!=="limit-in-shape"}),l.layout.length||delete l.layout),a.label({fields:s||[i],callback:o,cfg:Ma(l)})}else Ju(pl.WARN,n===null,"the label option must be an Object."),a.label({fields:[i]});return r}function dnt(r){var t=r.chart,e=r.options,n=e.legend,i=e.seriesField;return n===!1?t.legend(!1):i&&t.legend(i,n),r}function hnt(r){var t=r.chart,e=r.options,n=e.radius,i=e.innerRadius,a=e.startAngle,o=e.endAngle;return t.coordinate({type:"polar",cfg:{radius:n,innerRadius:i,startAngle:a,endAngle:o}}),r}function vnt(r){var t,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return Tr(Ii((t={},t[a]=n,t[o]=i,t)))(r)}function pnt(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return n?t.axis(a,n):t.axis(a,!1),i?t.axis(o,i):t.axis(o,!1),r}function gnt(r){Tr(ws("sectorStyle"),cnt,vnt,fnt,hnt,pnt,dnt,Ia,ii,$n,_n,Pi(),Af)(r)}var mnt=tt({},Rr.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right"},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="rose",e}return t.getDefaultOptions=function(){return mnt},t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return gnt},t})(Rr);var ynt={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function bnt(r,t){return t=jt({},ynt,t),xnt(r,t)}function xnt(r,t){var e=Rnt();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach(function(l){nt(t[l])||e[l](t[l])}),e.words(r),t.imageMask&&e.createMask(t.imageMask);var n=e.start(),i=n._tags;i.forEach(function(l){l.x+=t.size[0]/2,l.y+=t.size[1]/2});var a=t.size,o=a[0],s=a[1];return i.push({text:"",value:0,x:0,y:0,opacity:0}),i.push({text:"",value:0,x:o,y:s,opacity:0}),i}var DR=Math.PI/180,hb=1<<11>>5,O2=1<<11;function wnt(r){return r.text}function Snt(){return"serif"}function Lee(){return"normal"}function Cnt(r){return r.value}function Ent(){return~~(Math.random()*2)*90}function _nt(){return 1}function Tnt(r,t,e,n){if(!t.sprite){var i=r.context,a=r.ratio;i.clearRect(0,0,(hb<<5)/a,O2/a);var o=0,s=0,l=0,u=e.length;for(--n;++n<u;){t=e[n],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font;var c=i.measureText(t.text+"m").width*a,f=t.size<<1;if(t.rotate){var d=Math.sin(t.rotate*DR),h=Math.cos(t.rotate*DR),v=c*h,p=c*d,g=f*h,m=f*d;c=Math.max(Math.abs(v+m),Math.abs(v-m))+31>>5<<5,f=~~Math.max(Math.abs(p+g),Math.abs(p-g))}else c=c+31>>5<<5;if(f>l&&(l=f),o+c>=hb<<5&&(o=0,s+=l,l=0),s+f>=O2)break;i.translate((o+(c>>1))/a,(s+(f>>1))/a),t.rotate&&i.rotate(t.rotate*DR),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=f,t.xoff=o,t.yoff=s,t.x1=c>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var y=i.getImageData(0,0,(hb<<5)/a,O2/a).data,b=[];--n>=0;)if(t=e[n],!!t.hasText){for(var c=t.width,x=c>>5,f=t.y1-t.y0,w=0;w<f*x;w++)b[w]=0;if(o=t.xoff,o==null)return;s=t.yoff;for(var S=0,C=-1,_=0;_<f;_++){for(var w=0;w<c;w++){var T=x*_+(w>>5),E=y[(s+_)*(hb<<5)+(o+w)<<2]?1<<31-w%32:0;b[T]|=E,S|=E}S?C=_:(t.y0++,f--,_--,s++)}t.y1=t.y0+C,t.sprite=b.slice(0,(t.y1-t.y0)*x)}}}function Ant(r,t,e){e>>=5;for(var n=r.sprite,i=r.width>>5,a=r.x-(i<<4),o=a&127,s=32-o,l=r.y1-r.y0,u=(r.y+r.y0)*e+(a>>5),c,f=0;f<l;f++){c=0;for(var d=0;d<=i;d++)if((c<<s|(d<i?(c=n[f*i+d])>>>o:0))&t[u+d])return!0;u+=e}return!1}function knt(r,t){var e=r[0],n=r[1];t.x+t.x0<e.x&&(e.x=t.x+t.x0),t.y+t.y0<e.y&&(e.y=t.y+t.y0),t.x+t.x1>n.x&&(n.x=t.x+t.x1),t.y+t.y1>n.y&&(n.y=t.y+t.y1)}function Mnt(r,t){return r.x+r.x1>t[0].x&&r.x+r.x0<t[1].x&&r.y+r.y1>t[0].y&&r.y+r.y0<t[1].y}function Fee(r){var t=r[0]/r[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function Int(r){var t=4,e=t*r[0]/r[1],n=0,i=0;return function(a){var o=a<0?-1:1;switch(Math.sqrt(1+4*o*a)-o&3){case 0:n+=e;break;case 1:i+=t;break;case 2:n-=e;break;default:i-=t;break}return[n,i]}}function Nee(r){for(var t=[],e=-1;++e<r;)t[e]=0;return t}function Pnt(){return document.createElement("canvas")}function uu(r){return Kt(r)?r:function(){return r}}var Dnt={archimedean:Fee,rectangular:Int};function Rnt(){var r=[256,256],t=Snt,e=Cnt,n=Lee,i=Ent,a=_nt,o=Fee,s=Math.random,l=[],u=1/0,c=wnt,f=Lee,d=Pnt,h={};h.start=function(){var g=r[0],m=r[1],y=v(d()),b=h.board?h.board:Nee((r[0]>>5)*r[1]),x=l.length,w=[],S=l.map(function(E,k,I){return E.text=c.call(this,E,k,I),E.font=t.call(this,E,k,I),E.style=f.call(this,E,k,I),E.weight=n.call(this,E,k,I),E.rotate=i.call(this,E,k,I),E.size=~~e.call(this,E,k,I),E.padding=a.call(this,E,k,I),E}).sort(function(E,k){return k.size-E.size}),C=-1,_=h.board?[{x:0,y:0},{x:g,y:m}]:null;T();function T(){for(var E=Date.now();Date.now()-E<u&&++C<x;){var k=S[C];k.x=g*(s()+.5)>>1,k.y=m*(s()+.5)>>1,Tnt(y,k,S,C),k.hasText&&p(b,k,_)&&(w.push(k),_?h.hasImage||knt(_,k):_=[{x:k.x+k.x0,y:k.y+k.y0},{x:k.x+k.x1,y:k.y+k.y1}],k.x-=r[0]>>1,k.y-=r[1]>>1)}h._tags=w,h._bounds=_}return h};function v(g){g.width=g.height=1;var m=Math.sqrt(g.getContext("2d").getImageData(0,0,1,1).data.length>>2);g.width=(hb<<5)/m,g.height=O2/m;var y=g.getContext("2d");return y.fillStyle=y.strokeStyle="red",y.textAlign="center",{context:y,ratio:m}}function p(g,m,y){for(var b=m.x,x=m.y,w=Math.sqrt(r[0]*r[0]+r[1]*r[1]),S=o(r),C=s()<.5?1:-1,_,T=-C,E,k;(_=S(T+=C))&&(E=~~_[0],k=~~_[1],!(Math.min(Math.abs(E),Math.abs(k))>=w));)if(m.x=b+E,m.y=x+k,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>r[0]||m.y+m.y1>r[1])&&(!y||!Ant(m,g,r[0]))&&(!y||Mnt(m,y))){for(var I=m.sprite,P=m.width>>5,F=r[0]>>5,$=m.x-(P<<4),R=$&127,L=32-R,O=m.y1-m.y0,B=void 0,U=(m.y+m.y0)*F+($>>5),W=0;W<O;W++){B=0;for(var X=0;X<=P;X++)g[U+X]|=B<<L|(X<P?(B=I[W*P+X])>>>R:0);U+=F}return delete m.sprite,!0}return!1}return h.createMask=function(g){var m=document.createElement("canvas"),y=r[0],b=r[1];if(!(!y||!b)){var x=y>>5,w=Nee((y>>5)*b);m.width=y,m.height=b;var S=m.getContext("2d");S.drawImage(g,0,0,g.width,g.height,0,0,y,b);for(var C=S.getImageData(0,0,y,b).data,_=0;_<b;_++)for(var T=0;T<y;T++){var E=x*_+(T>>5),k=_*y+T<<2,I=C[k]>=250&&C[k+1]>=250&&C[k+2]>=250,P=I?1<<31-T%32:0;w[E]|=P}h.board=w,h.hasImage=!0}},h.timeInterval=function(g){u=g==null?1/0:g},h.words=function(g){l=g},h.size=function(g){r=[+g[0],+g[1]]},h.font=function(g){t=uu(g)},h.fontWeight=function(g){n=uu(g)},h.rotate=function(g){i=uu(g)},h.spiral=function(g){o=Dnt[g]||g},h.fontSize=function(g){e=uu(g)},h.padding=function(g){a=uu(g)},h.random=function(g){s=uu(g)},h}function Bee(r){var t=r.options,e=r.chart,n=e,i=n.width,a=n.height,o=n.padding,s=n.appendPadding,l=n.ele,u=t.data,c=t.imageMask,f=t.wordField,d=t.weightField,h=t.colorField,v=t.wordStyle,p=t.timeInterval,g=t.random,m=t.spiral,y=t.autoFit,b=y===void 0?!0:y,x=t.placementStrategy;if(!u||!u.length)return[];var w=v.fontFamily,S=v.fontWeight,C=v.padding,_=v.fontSize,T=Bnt(u,d),E=[Gnt(T),Unt(T)],k=u.map(function(F){return{text:F[f],value:F[d],color:F[h],datum:F}}),I={imageMask:c,font:w,fontSize:Nnt(_,E),fontWeight:S,size:Ont({width:i,height:a,padding:o,appendPadding:s,autoFit:b,container:l}),padding:C,timeInterval:p,random:g,spiral:m,rotate:$nt(t)};if(Kt(x)){var P=k.map(function(F,$,R){return A(A(A({},F),{hasText:!!F.text,font:uu(I.font)(F,$,R),weight:uu(I.fontWeight)(F,$,R),rotate:uu(I.rotate)(F,$,R),size:uu(I.fontSize)(F,$,R),style:"normal"}),x.call(e,F,$,R))});return P.push({text:"",value:0,x:0,y:0,opacity:0}),P.push({text:"",value:0,x:I.size[0],y:I.size[1],opacity:0}),P}return bnt(k,I)}function Ont(r){var t=r.width,e=r.height,n=r.container,i=r.autoFit,a=r.padding,o=r.appendPadding;if(i){var s=mR(n);t=s.width,e=s.height}t=t||400,e=e||400;var l=Lnt({padding:a,appendPadding:o}),u=l[0],c=l[1],f=l[2],d=l[3],h=[t-(d+c),e-(u+f)];return h}function Lnt(r){var t=Tf(r.padding),e=Tf(r.appendPadding),n=t[0]+e[0],i=t[1]+e[1],a=t[2]+e[2],o=t[3]+e[3];return[n,i,a,o]}function Fnt(r){return new Promise(function(t,e){if(r instanceof HTMLImageElement){t(r);return}if(ot(r)){var n=new Image;n.crossOrigin="anonymous",n.src=r,n.onload=function(){t(n)},n.onerror=function(){Ju(pl.ERROR,!1,"image %s load failed !!!",r),e()};return}Ju(pl.WARN,r===void 0,"The type of imageMask option must be String or HTMLImageElement."),e()})}function Nnt(r,t){if(Kt(r))return r;if(Qe(r)){var e=r[0],n=r[1];if(!t)return function(){return(n+e)/2};var i=t[0],a=t[1];return a===i?function(){return(n+e)/2}:function(s){var l=s.value;return(n-e)/(a-i)*(l-i)+e}}return function(){return r}}function Bnt(r,t){return r.map(function(e){return e[t]}).filter(function(e){return typeof e=="number"&&!isNaN(e)})}function $nt(r){var t=znt(r),e=t.rotation,n=t.rotationSteps;if(!Qe(e))return e;var i=e[0],a=e[1],o=n===1?0:(a-i)/(n-1);return function(){return a===i?a:Math.floor(Math.random()*n)*o}}function znt(r){var t=r.wordStyle.rotationSteps;return t<1&&(Ju(pl.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),t=1),{rotation:r.wordStyle.rotation,rotationSteps:t}}function Gnt(r){return Math.min.apply(Math,r)}function Unt(r){return Math.max.apply(Math,r)}var RR="color",Vnt=tt({},Rr.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value",RR],formatter:function(r){return{name:r.text,value:r.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}});function Hnt(r){var t=r.chart,e=r.options,n=e.colorField,i=e.color,a=Bee(r);t.data(a);var o=tt({},r,{options:{xField:"x",yField:"y",seriesField:n&&RR,rawFields:Kt(i)&&Yn(ae(e,"rawFields",[]),["datum"]),point:{color:i,shape:"word-cloud"}}}),s=Ss(o).ext;return s.geometry.label(!1),t.coordinate().reflect("y"),t.axis(!1),r}function Wnt(r){return Tr(Ii({x:{nice:!1},y:{nice:!1}}))(r)}function jnt(r){var t=r.chart,e=r.options,n=e.legend,i=e.colorField;return n===!1?t.legend(!1):i&&t.legend(RR,n),r}function Ynt(r){Tr(Hnt,Wnt,Ia,jnt,ii,$n,_n,Af)(r)}In("point","word-cloud",{draw:function(r,t){var e=r.x,n=r.y,i=t.addShape("text",{attrs:A(A({},Xnt(r)),{x:e,y:n})}),a=r.data.rotate;return typeof a=="number"&&Ko.rotate(i,a*Math.PI/180),i}});function Xnt(r){return{fontSize:r.data.size,text:r.data.text,textAlign:"center",fontFamily:r.data.font,fontWeight:r.data.weight,fill:r.color||r.defaultStyle.stroke,textBaseline:"alphabetic"}}(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="word-cloud",e}return t.getDefaultOptions=function(){return Vnt},t.prototype.changeData=function(e){this.updateOption({data:e}),this.options.imageMask?this.render():this.chart.changeData(Bee({chart:this.chart,options:this.options}))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.render=function(){var e=this;return new Promise(function(n){var i=e.options.imageMask;if(!i){r.prototype.render.call(e),n();return}var a=function(o){e.options=A(A({},e.options),{imageMask:o||null}),r.prototype.render.call(e),n()};Fnt(i).then(a).catch(a)})},t.prototype.getSchemaAdaptor=function(){return Ynt},t.prototype.triggerResize=function(){var e=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout(function(){r.prototype.triggerResize.call(e)}))},t})(Rr);function kf(r,t){return qnt(r)||Knt(r,t)||Znt()}function qnt(r){if(Array.isArray(r))return r}function Knt(r,t){var e=[],n=!0,i=!1,a=void 0;try{for(var o=r[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(e.push(s.value),!(t&&e.length===t));n=!0);}catch(l){i=!0,a=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(i)throw a}}return e}function Znt(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function OR(r,t,e,n){r=r.filter(function(v,p){var g=t(v,p),m=e(v,p);return g!=null&&isFinite(g)&&m!=null&&isFinite(m)}),n&&r.sort(function(v,p){return t(v)-t(p)});for(var i=r.length,a=new Float64Array(i),o=new Float64Array(i),s=0,l=0,u,c,f,d=0;d<i;)f=r[d],a[d]=u=+t(f,d,r),o[d]=c=+e(f,d,r),++d,s+=(u-s)/d,l+=(c-l)/d;for(var h=0;h<i;++h)a[h]-=s,o[h]-=l;return[a,o,s,l]}function Mh(r,t,e,n){for(var i=0,a=0,o=r.length;a<o;a++){var s=r[a],l=+t(s,a,r),u=+e(s,a,r);l!=null&&isFinite(l)&&u!=null&&isFinite(u)&&n(l,u,i++)}}function vg(r,t,e,n,i){var a=0,o=0;return Mh(r,t,e,function(s,l){var u=l-i(s),c=l-n;a+=u*u,o+=c*c}),1-a/o}function $ee(r){return Math.atan2(r[1][1]-r[0][1],r[1][0]-r[0][0])*180/Math.PI}function Qnt(r){return[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]}function vb(r,t,e){for(var n=Math.log(t-r)*Math.LOG10E+1|0,i=1*Math.pow(10,-n/2-1),a=1e4,o=[l(r),l(t)],s=0;u(o)&&s<a;);return o;function l(c){return[c,e(c)]}function u(c){s++;for(var f=c.length,d=!1,h=0;h<f-1;h++){var v=c[h],p=c[h+1],g=Qnt([v,p]),m=l(g[0]),y=$ee([v,g]),b=$ee([v,m]),x=Math.abs(y-b);x>i&&(c.splice(h+1,0,m),d=!0)}return d}}function pb(r,t,e,n){var i=n-r*r,a=Math.abs(i)<1e-24?0:(e-r*t)/i,o=t-a*r;return[o,a]}function Jnt(){var r=function(a){return a[0]},t=function(a){return a[1]},e;function n(i){var a=0,o=0,s=0,l=0,u=0,c=0,f=e?+e[0]:1/0,d=e?+e[1]:-1/0;Mh(i,r,t,function(b,x){var w=Math.log(x),S=b*x;++a,o+=(x-o)/a,l+=(S-l)/a,c+=(b*S-c)/a,s+=(x*w-s)/a,u+=(S*w-u)/a,e||(b<f&&(f=b),b>d&&(d=b))});var h=pb(l/o,s/o,u/o,c/o),v=kf(h,2),p=v[0],g=v[1];p=Math.exp(p);var m=function(x){return p*Math.exp(g*x)},y=vb(f,d,m);return y.a=p,y.b=g,y.predict=m,y.rSquared=vg(i,r,t,o,m),y}return n.domain=function(i){return arguments.length?(e=i,n):e},n.x=function(i){return arguments.length?(r=i,n):r},n.y=function(i){return arguments.length?(t=i,n):t},n}function zee(){var r=function(a){return a[0]},t=function(a){return a[1]},e;function n(i){var a=0,o=0,s=0,l=0,u=0,c=e?+e[0]:1/0,f=e?+e[1]:-1/0;Mh(i,r,t,function(y,b){++a,o+=(y-o)/a,s+=(b-s)/a,l+=(y*b-l)/a,u+=(y*y-u)/a,e||(y<c&&(c=y),y>f&&(f=y))});var d=pb(o,s,l,u),h=kf(d,2),v=h[0],p=h[1],g=function(b){return p*b+v},m=[[c,g(c)],[f,g(f)]];return m.a=p,m.b=v,m.predict=g,m.rSquared=vg(i,r,t,s,g),m}return n.domain=function(i){return arguments.length?(e=i,n):e},n.x=function(i){return arguments.length?(r=i,n):r},n.y=function(i){return arguments.length?(t=i,n):t},n}function eit(r){r.sort(function(e,n){return e-n});var t=r.length/2;return t%1==0?(r[t-1]+r[t])/2:r[Math.floor(t)]}var Gee=2,Uee=1e-12;function tit(){var r=function(a){return a[0]},t=function(a){return a[1]},e=.3;function n(i){for(var a=OR(i,r,t,!0),o=kf(a,4),s=o[0],l=o[1],u=o[2],c=o[3],f=s.length,d=Math.max(2,~~(e*f)),h=new Float64Array(f),v=new Float64Array(f),p=new Float64Array(f).fill(1),g=-1;++g<=Gee;){for(var m=[0,d-1],y=0;y<f;++y){for(var b=s[y],x=m[0],w=m[1],S=b-s[x]>s[w]-b?x:w,C=0,_=0,T=0,E=0,k=0,I=1/Math.abs(s[S]-b||1),P=x;P<=w;++P){var F=s[P],$=l[P],R=rit(Math.abs(b-F)*I)*p[P],L=F*R;C+=R,_+=L,T+=$*R,E+=$*L,k+=F*L}var O=pb(_/C,T/C,E/C,k/C),B=kf(O,2),U=B[0],W=B[1];h[y]=U+W*b,v[y]=Math.abs(l[y]-h[y]),nit(s,y+1,m)}if(g===Gee)break;var X=eit(v);if(Math.abs(X)<Uee)break;for(var ie=0,q,j;ie<f;++ie)q=v[ie]/(6*X),p[ie]=q>=1?Uee:(j=1-q*q)*j}return iit(s,h,u,c)}return n.bandwidth=function(i){return arguments.length?(e=i,n):e},n.x=function(i){return arguments.length?(r=i,n):r},n.y=function(i){return arguments.length?(t=i,n):t},n}function rit(r){return(r=1-r*r*r)*r*r}function nit(r,t,e){var n=r[t],i=e[0],a=e[1]+1;if(!(a>=r.length))for(;t>i&&r[a]-n<=n-r[i];)e[0]=++i,e[1]=a,++a}function iit(r,t,e,n){for(var i=r.length,a=[],o=0,s=0,l=[],u;o<i;++o)u=r[o]+e,l[0]===u?l[1]+=(t[o]-l[1])/++s:(s=0,l[1]+=n,l=[u,t[o]],a.push(l));return l[1]+=n,a}function ait(){var r=function(o){return o[0]},t=function(o){return o[1]},e=Math.E,n;function i(a){var o=0,s=0,l=0,u=0,c=0,f=n?+n[0]:1/0,d=n?+n[1]:-1/0,h=Math.log(e);Mh(a,r,t,function(x,w){var S=Math.log(x)/h;++o,s+=(S-s)/o,l+=(w-l)/o,u+=(S*w-u)/o,c+=(S*S-c)/o,n||(x<f&&(f=x),x>d&&(d=x))});var v=pb(s,l,u,c),p=kf(v,2),g=p[0],m=p[1],y=function(w){return m*Math.log(w)/h+g},b=vb(f,d,y);return b.a=m,b.b=g,b.predict=y,b.rSquared=vg(a,r,t,l,y),b}return i.domain=function(a){return arguments.length?(n=a,i):n},i.x=function(a){return arguments.length?(r=a,i):r},i.y=function(a){return arguments.length?(t=a,i):t},i.base=function(a){return arguments.length?(e=a,i):e},i}function Vee(){var r=function(a){return a[0]},t=function(a){return a[1]},e;function n(i){var a=OR(i,r,t),o=kf(a,4),s=o[0],l=o[1],u=o[2],c=o[3],f=s.length,d=0,h=0,v=0,p=0,g=0,m,y,b,x;for(m=0;m<f;)y=s[m],b=l[m++],x=y*y,d+=(x-d)/m,h+=(x*y-h)/m,v+=(x*x-v)/m,p+=(y*b-p)/m,g+=(x*b-g)/m;var w=0,S=0,C=e?+e[0]:1/0,_=e?+e[1]:-1/0;Mh(i,r,t,function(R,L){S++,w+=(L-w)/S,e||(R<C&&(C=R),R>_&&(_=R))});var T=v-d*d,E=d*T-h*h,k=(g*d-p*h)/E,I=(p*T-g*h)/E,P=-k*d,F=function(L){return L=L-u,k*L*L+I*L+P+c},$=vb(C,_,F);return $.a=k,$.b=I-2*k*u,$.c=P-I*u+k*u*u+c,$.predict=F,$.rSquared=vg(i,r,t,w,F),$}return n.domain=function(i){return arguments.length?(e=i,n):e},n.x=function(i){return arguments.length?(r=i,n):r},n.y=function(i){return arguments.length?(t=i,n):t},n}function oit(){var r=function(o){return o[0]},t=function(o){return o[1]},e=3,n;function i(a){if(e===1){var o=zee().x(r).y(t).domain(n)(a);return o.coefficients=[o.b,o.a],delete o.a,delete o.b,o}if(e===2){var s=Vee().x(r).y(t).domain(n)(a);return s.coefficients=[s.c,s.b,s.a],delete s.a,delete s.b,delete s.c,s}var l=OR(a,r,t),u=kf(l,4),c=u[0],f=u[1],d=u[2],h=u[3],v=c.length,p=[],g=[],m=e+1,y=0,b=0,x=n?+n[0]:1/0,w=n?+n[1]:-1/0;Mh(a,r,t,function(F,$){++b,y+=($-y)/b,n||(F<x&&(x=F),F>w&&(w=F))});var S,C,_,T,E;for(S=0;S<m;++S){for(_=0,T=0;_<v;++_)T+=Math.pow(c[_],S)*f[_];for(p.push(T),E=new Float64Array(m),C=0;C<m;++C){for(_=0,T=0;_<v;++_)T+=Math.pow(c[_],S+C);E[C]=T}g.push(E)}g.push(p);var k=lit(g),I=function($){$-=d;var R=h+k[0]+k[1]*$+k[2]*$*$;for(S=3;S<m;++S)R+=k[S]*Math.pow($,S);return R},P=vb(x,w,I);return P.coefficients=sit(m,k,-d,h),P.predict=I,P.rSquared=vg(a,r,t,y,I),P}return i.domain=function(a){return arguments.length?(n=a,i):n},i.x=function(a){return arguments.length?(r=a,i):r},i.y=function(a){return arguments.length?(t=a,i):t},i.order=function(a){return arguments.length?(e=a,i):e},i}function sit(r,t,e,n){var i=Array(r),a,o,s,l;for(a=0;a<r;++a)i[a]=0;for(a=r-1;a>=0;--a)for(s=t[a],l=1,i[a]+=s,o=1;o<=a;++o)l*=(a+1-o)/o,i[a-o]+=s*Math.pow(e,o)*l;return i[0]+=n,i}function lit(r){var t=r.length-1,e=[],n,i,a,o,s;for(n=0;n<t;++n){for(o=n,i=n+1;i<t;++i)Math.abs(r[n][i])>Math.abs(r[n][o])&&(o=i);for(a=n;a<t+1;++a)s=r[a][n],r[a][n]=r[a][o],r[a][o]=s;for(i=n+1;i<t;++i)for(a=t;a>=n;a--)r[a][i]-=r[a][n]*r[n][i]/r[n][n]}for(i=t-1;i>=0;--i){for(s=0,a=i+1;a<t;++a)s+=r[a][i]*e[a];e[i]=(r[t][i]-s)/r[i][i]}return e}function uit(){var r=function(a){return a[0]},t=function(a){return a[1]},e;function n(i){var a=0,o=0,s=0,l=0,u=0,c=0,f=e?+e[0]:1/0,d=e?+e[1]:-1/0;Mh(i,r,t,function(b,x){var w=Math.log(b),S=Math.log(x);++a,o+=(w-o)/a,s+=(S-s)/a,l+=(w*S-l)/a,u+=(w*w-u)/a,c+=(x-c)/a,e||(b<f&&(f=b),b>d&&(d=b))});var h=pb(o,s,l,u),v=kf(h,2),p=v[0],g=v[1];p=Math.exp(p);var m=function(x){return p*Math.pow(x,g)},y=vb(f,d,m);return y.a=p,y.b=g,y.predict=m,y.rSquared=vg(i,r,t,c,m),y}return n.domain=function(i){return arguments.length?(e=i,n):e},n.x=function(i){return arguments.length?(r=i,n):r},n.y=function(i){return arguments.length?(t=i,n):t},n}var cit={exp:Jnt,linear:zee,loess:tit,log:ait,poly:oit,pow:uit,quad:Vee};function fit(r,t){var e=10,n={regionStyle:[{position:{start:[r,"max"],end:["max",t]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[r,t]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",t],end:[r,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[r,t],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",t],offsetX:-e,offsetY:-e,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",t],offsetX:e,offsetY:-e,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",t],offsetX:e,offsetY:e,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",t],offsetX:-e,offsetY:e,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]};return n}var dit=function(r,t){var e=t.view,n=t.options,i=n.xField,a=n.yField,o=e.getScaleByField(i),s=e.getScaleByField(a),l=r.map(function(u){return e.getCoordinate().convert({x:o.scale(u[0]),y:s.scale(u[1])})});return Ytt(l,!1)},hit=function(r){var t=r.options,e=t.xField,n=t.yField,i=t.data,a=t.regressionLine,o=a.type,s=o===void 0?"linear":o,l=a.algorithm,u;if(l)u=Qe(l)?l:l(i);else{var c=cit[s]().x(function(f){return f[e]}).y(function(f){return f[n]});u=c(i)}return dit(u,r)},vit=function(r){var t,e=r.meta,n=e===void 0?{}:e,i=r.xField,a=r.yField,o=r.data,s=o[0][i],l=o[0][a],u=s>0,c=l>0;function f(d,h){var v=ae(n,[d]);function p(m){return ae(v,m)}var g={};return h==="x"?(zt(s)&&(zt(p("min"))||(g.min=u?0:s*2),zt(p("max"))||(g.max=u?s*2:0)),g):(zt(l)&&(zt(p("min"))||(g.min=c?0:l*2),zt(p("max"))||(g.max=c?l*2:0)),g)}return A(A({},n),(t={},t[i]=A(A({},n[i]),f(i,"x")),t[a]=A(A({},n[a]),f(a,"y")),t))};function Hee(r){var t=r.data,e=t===void 0?[]:t,n=r.xField,i=r.yField;if(e.length){for(var a=!0,o=!0,s=e[0],l=void 0,u=1;u<e.length&&(l=e[u],s[n]!==l[n]&&(a=!1),s[i]!==l[i]&&(o=!1),!(!a&&!o));u++)s=l;var c=[];a&&c.push(n),o&&c.push(i);var f=Nn(vit(r),c);return tt({},r,{meta:f})}return r}function pit(r){var t=r.chart,e=r.options,n=e.data,i=e.type,a=e.color,o=e.shape,s=e.pointStyle,l=e.shapeField,u=e.colorField,c=e.xField,f=e.yField,d=e.sizeField,h=e.size,v=e.tooltip;d&&(h||(h=[2,8]),zt(h)&&(h=[h,h])),v&&!v.fields&&(v=A(A({},v),{fields:[c,f,u,d,l]})),t.data(n),Ss(tt({},r,{options:{seriesField:u,point:{color:a,shape:o,size:h,style:s},tooltip:v}}));var p=ao(t,"point");return i&&p.adjust(i),r}function L2(r){var t,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField,s=Hee(e);return Tr(Ii((t={},t[a]=n,t[o]=i,t)))(tt({},r,{options:s}))}function git(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return t.axis(a,n),t.axis(o,i),r}function mit(r){var t=r.chart,e=r.options,n=e.legend,i=e.colorField,a=e.shapeField,o=e.sizeField,s=e.shapeLegend,l=e.sizeLegend,u=n!==!1;return i&&t.legend(i,u?n:!1),a&&(s?t.legend(a,s):t.legend(a,s===!1?!1:n)),o&&t.legend(o,l||!1),!u&&!s&&!l&&t.legend(!1),r}function yit(r){var t=r.chart,e=r.options,n=e.label,i=e.yField,a=ao(t,"point");if(!n)a.label(!1);else{var o=n.callback,s=Ur(n,["callback"]);a.label({fields:[i],callback:o,cfg:Ma(s)})}return r}function bit(r){var t=r.options,e=t.quadrant,n=[];if(e){var i=e.xBaseline,a=i===void 0?0:i,o=e.yBaseline,s=o===void 0?0:o,l=e.labels,u=e.regionStyle,c=e.lineStyle,f=fit(a,s),d=new Array(4).join(",").split(",");d.forEach(function(h,v){n.push(A(A({type:"region",top:!1},f.regionStyle[v].position),{style:tt({},f.regionStyle[v].style,u==null?void 0:u[v])}),A({type:"text",top:!0},tt({},f.labelStyle[v],l==null?void 0:l[v])))}),n.push({type:"line",top:!1,start:["min",s],end:["max",s],style:tt({},f.lineStyle,c)},{type:"line",top:!1,start:[a,"min"],end:[a,"max"],style:tt({},f.lineStyle,c)})}return Tr(Pi(n))(r)}function xit(r){var t=r.options,e=r.chart,n=t.regressionLine;if(n){var i=n.style,a=n.top,o=a===void 0?!1:a,s={stroke:"#9ba29a",lineWidth:2,opacity:.5};e.annotation().shape({top:o,render:function(l,u){var c=l.addGroup({id:e.id+"-regression-line",name:"regression-line-group"}),f=hit({view:u,options:t});c.addShape("path",{name:"regression-line",attrs:A(A({path:f},s),i)})}})}return r}function wit(r){var t=r.chart,e=r.options,n=e.tooltip;return n?t.tooltip(n):n===!1&&t.tooltip(!1),r}function Wee(r){return Tr(pit,L2,git,mit,wit,yit,Aee,ii,bit,$n,_n,xit)(r)}var Sit=tt({},Rr.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});Lr("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var Cit=function(r){Ie(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.type="scatter",i.on(Hr.BEFORE_RENDER,function(a){var o,s,l=i,u=l.options,c=l.chart;if(((o=a.data)===null||o===void 0?void 0:o.source)===Zo.FILTER){var f=i.chart.filterData(i.chart.getData());L2({chart:c,options:A(A({},u),{data:f})})}((s=a.data)===null||s===void 0?void 0:s.source)===Zo.RESET&&L2({chart:c,options:u})}),i}return t.getDefaultOptions=function(){return Sit},t.prototype.changeData=function(e){this.updateOption(Hee(tt({},this.options,{data:e})));var n=this,i=n.options,a=n.chart;L2({chart:a,options:i}),this.chart.changeData(e)},t.prototype.getSchemaAdaptor=function(){return Wee},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t}(Rr);function Eit(r){var t=r.chart,e=r.options,n=e.data,i=e.lineStyle,a=e.color,o=e.point,s=e.area;t.data(n);var l=tt({},r,{options:{line:{style:i,color:a},point:o&&A({color:a},o),area:s&&A({color:a},s),label:void 0}}),u=tt({},l,{options:{tooltip:!1}}),c=(o==null?void 0:o.state)||e.state,f=tt({},l,{options:{tooltip:!1,state:c}});return hg(l),Ss(f),k2(u),r}function _it(r){var t,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return Tr(Ii((t={},t[a]=n,t[o]=i,t)))(r)}function Tit(r){var t=r.chart,e=r.options,n=e.radius,i=e.startAngle,a=e.endAngle;return t.coordinate("polar",{radius:n,startAngle:i,endAngle:a}),r}function Ait(r){var t=r.chart,e=r.options,n=e.xField,i=e.xAxis,a=e.yField,o=e.yAxis;return t.axis(n,i),t.axis(a,o),r}function kit(r){var t=r.chart,e=r.options,n=e.label,i=e.yField,a=ao(t,"line");if(!n)a.label(!1);else{var o=n.callback,s=Ur(n,["callback"]);a.label({fields:[i],callback:o,cfg:Ma(s)})}return r}function Mit(r){return Tr(Eit,_it,_n,Tit,Ait,fb,Ia,kit,ii,$n,Pi())(r)}var Iit=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),t.prototype.getTooltipItems=function(e){var n=this.getTooltipCfg(),i=n.shared,a=n.title,o=r.prototype.getTooltipItems.call(this,e);if(o.length>0){var s=this.view.geometries[0],l=s.dataArray,u=o[0].name,c=[];return l.forEach(function(f){f.forEach(function(d){var h=Ko.getTooltipItems(d,s),v=h[0];if(!i&&v&&v.name===u){var p=nt(a)?u:a;c.push(A(A({},v),{name:v.title,title:p}))}else if(i&&v){var p=nt(a)?v.name||u:a;c.push(A(A({},v),{name:v.title,title:p}))}})}),c}return[]},t}(VQ);xh("radar-tooltip",Iit);var Pit=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(){var e=this.context.view;e.removeInteraction("tooltip")},t.prototype.show=function(){var e=this.context.event,n=this.getTooltipController();n.showTooltip({x:e.x,y:e.y})},t.prototype.hide=function(){var e=this.getTooltipController();e.hideTooltip()},t.prototype.getTooltipController=function(){var e=this.context.view;return e.getController("radar-tooltip")},t}(vi);Cr("radar-tooltip",Pit);Lr("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="radar",e}return t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return tt({},r.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},t.prototype.getSchemaAdaptor=function(){return Mit},t})(Rr);var pg;(function(r){r.Left="Left",r.Right="Right"})(pg||(pg={}));var Ih;(function(r){r.Line="line",r.Column="column"})(Ih||(Ih={}));var Cs="left-axes-view",Es="right-axes-view",jee={nice:!0,label:{autoHide:!0,autoRotate:!1}},Dit=A(A({},jee),{position:"left"}),Rit=A(A({},jee),{position:"right",grid:null});function LR(r){return ae(r,"geometry")===Ih.Line}function FR(r){return ae(r,"geometry")===Ih.Column}function Yee(r,t,e){return FR(e)?tt({},{geometry:Ih.Column,label:e.label&&e.isRange?{content:function(n){var i;return(i=n[t])===null||i===void 0?void 0:i.join("-")}}:void 0},e):A({geometry:Ih.Line},e)}function Xee(r,t){var e=r[0],n=r[1];if(Qe(t)){var i=t[0],a=t[1];return[i,a]}var o=ae(t,e),s=ae(t,n);return[o,s]}function qee(r,t){return t===pg.Left?r===!1?!1:tt({},Dit,r):t===pg.Right?r===!1?!1:tt({},Rit,r):r}function Kee(r){var t=r.view,e=r.geometryOption,n=r.yField,i=r.legend,a=ae(i,"marker"),o=ao(t,LR(e)?"line":"interval");if(!e.seriesField){var s=ae(t,"options.scales."+n+".alias")||n,l=o.getAttribute("color"),u=t.getTheme().defaultColor;l&&(u=Ko.getMappingValue(l,s,ae(l,["values",0],u)));var c=(Kt(a)?a:!co(a)&&tt({},{style:{stroke:u,fill:u}},a))||(LR(e)?{symbol:function(d,h,v){return[["M",d-v,h],["L",d+v,h]]},style:{lineWidth:2,r:6,stroke:u}}:{symbol:"square",style:{fill:u}});return[{value:n,name:s,marker:c,isGeometry:!0,viewId:t.id}]}var f=o.getGroupAttributes();return Ya(f,function(d,h){var v=Ko.getLegendItems(t,o,h,t.getTheme(),a);return d.concat(v)},[])}function Oit(r){var t=r.options,e=r.chart,n=t.geometryOption,i=n.isStack,a=n.color,o=n.seriesField,s=n.groupField,l=n.isGroup,u=["xField","yField"];if(LR(n)){hg(tt({},r,{options:A(A(A({},Nn(t,u)),n),{line:{color:n.color,style:n.lineStyle}})})),Ss(tt({},r,{options:A(A(A({},Nn(t,u)),n),{point:n.point&&A({color:a,shape:"circle"},n.point)})}));var c=[];l&&c.push({type:"dodge",dodgeBy:s||o,customOffset:0}),i&&c.push({type:"stack"}),c.length&&G(e.geometries,function(f){f.adjust(c)})}return FR(n)&&D2(tt({},r,{options:A(A(A({},Nn(t,u)),n),{widthRatio:n.columnWidthRatio,interval:A(A({},Nn(n,["color"])),{style:n.columnStyle})})})),r}var Zee=function(r,t){var e=t[0],n=t[1],i=r.getOptions().data,a=r.getXScale(),o=la(i);if(!(!a||!o)){var s=Ds(i,a.field),l=s,u=la(l),c=Math.floor(e*(u-1)),f=Math.floor(n*(u-1));r.filter(a.field,function(d){var h=l.indexOf(d);return h>-1?ert(h,c,f):!0}),r.render(!0)}};function Lit(r){var t,e=r.options,n=e.geometryOptions,i=n===void 0?[]:n,a=e.xField,o=e.yField,s=zx(i,function(l){var u=l.geometry;return u===Ih.Line||u===void 0});return tt({},{options:{geometryOptions:[],meta:(t={},t[a]={type:"cat",sync:!0,range:s?[0,1]:void 0},t),tooltip:{showMarkers:s,showCrosshairs:s,shared:!0,crosshairs:{type:"x"}},interactions:s?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},r,{options:{yAxis:Xee(o,e.yAxis),geometryOptions:[Yee(a,o[0],i[0]),Yee(a,o[1],i[1])],annotations:Xee(o,e.annotations)}})}function Fit(r){var t,e,n=r.chart,i=r.options,a=i.geometryOptions,o={line:0,column:1},s=[{type:(t=a[0])===null||t===void 0?void 0:t.geometry,id:Cs},{type:(e=a[1])===null||e===void 0?void 0:e.geometry,id:Es}];return s.sort(function(l,u){return-o[l.type]+o[u.type]}).forEach(function(l){return n.createView({id:l.id})}),r}function Nit(r){var t=r.chart,e=r.options,n=e.xField,i=e.yField,a=e.geometryOptions,o=e.data,s=e.tooltip,l=[A(A({},a[0]),{id:Cs,data:o[0],yField:i[0]}),A(A({},a[1]),{id:Es,data:o[1],yField:i[1]})];return l.forEach(function(u){var c=u.id,f=u.data,d=u.yField,h=FR(u)&&u.isPercent,v=h?Cee(f,d,n,d):f,p=tn(t,c).data(v),g=h?A({formatter:function(m){return{name:m[u.seriesField]||d,value:(Number(m[d])*100).toFixed(2)+"%"}}},s):s;Oit({chart:p,options:{xField:n,yField:d,tooltip:g,geometryOption:u}})}),r}function Bit(r){var t,e=r.chart,n=r.options,i=n.geometryOptions,a=((t=e.getTheme())===null||t===void 0?void 0:t.colors10)||[],o=0;return e.once("beforepaint",function(){G(i,function(s,l){var u=tn(e,l===0?Cs:Es);if(!s.color){var c=u.getGroupScales(),f=ae(c,[0,"values","length"],1),d=a.slice(o,o+f).concat(l===0?[]:a);u.geometries.forEach(function(h){s.seriesField?h.color(s.seriesField,d):h.color(d[0])}),o+=f}}),e.render(!0)}),r}function $it(r){var t,e,n=r.chart,i=r.options,a=i.xAxis,o=i.yAxis,s=i.xField,l=i.yField;return Ii((t={},t[s]=a,t[l[0]]=o[0],t))(tt({},r,{chart:tn(n,Cs)})),Ii((e={},e[s]=a,e[l[1]]=o[1],e))(tt({},r,{chart:tn(n,Es)})),r}function zit(r){var t=r.chart,e=r.options,n=tn(t,Cs),i=tn(t,Es),a=e.xField,o=e.yField,s=e.xAxis,l=e.yAxis;return t.axis(a,!1),t.axis(o[0],!1),t.axis(o[1],!1),n.axis(a,s),n.axis(o[0],qee(l[0],pg.Left)),i.axis(a,!1),i.axis(o[1],qee(l[1],pg.Right)),r}function Git(r){var t=r.chart,e=r.options,n=e.tooltip,i=tn(t,Cs),a=tn(t,Es);return t.tooltip(n),i.tooltip({shared:!0}),a.tooltip({shared:!0}),r}function Uit(r){var t=r.chart;return ii(tt({},r,{chart:tn(t,Cs)})),ii(tt({},r,{chart:tn(t,Es)})),r}function Vit(r){var t=r.chart,e=r.options,n=e.annotations,i=ae(n,[0]),a=ae(n,[1]);return Pi(i)(tt({},r,{chart:tn(t,Cs),options:{annotations:i}})),Pi(a)(tt({},r,{chart:tn(t,Es),options:{annotations:a}})),r}function Hit(r){var t=r.chart;return _n(tt({},r,{chart:tn(t,Cs)})),_n(tt({},r,{chart:tn(t,Es)})),_n(r),r}function Wit(r){var t=r.chart;return $n(tt({},r,{chart:tn(t,Cs)})),$n(tt({},r,{chart:tn(t,Es)})),r}function jit(r){var t=r.chart,e=r.options,n=e.yAxis;return Th(tt({},r,{chart:tn(t,Cs),options:{yAxis:n[0]}})),Th(tt({},r,{chart:tn(t,Es),options:{yAxis:n[1]}})),r}function Yit(r){var t=r.chart,e=r.options,n=e.legend,i=e.geometryOptions,a=e.yField,o=e.data,s=tn(t,Cs),l=tn(t,Es);if(n===!1)t.legend(!1);else if(an(n)&&n.custom===!0)t.legend(n);else{var u=ae(i,[0,"legend"],n),c=ae(i,[1,"legend"],n);t.once("beforepaint",function(){var f=o[0].length?Kee({view:s,geometryOption:i[0],yField:a[0],legend:u}):[],d=o[1].length?Kee({view:l,geometryOption:i[1],yField:a[1],legend:c}):[];t.legend(tt({},n,{custom:!0,items:f.concat(d)}))}),i[0].seriesField&&s.legend(i[0].seriesField,u),i[1].seriesField&&l.legend(i[1].seriesField,c),t.on("legend-item:click",function(f){var d=ae(f,"gEvent.delegateObject",{});if(d&&d.item){var h=d.item,v=h.value,p=h.isGeometry,g=h.viewId;if(p){var m=lT(a,function(x){return x===v});if(m>-1){var y=ae(tn(t,g),"geometries");G(y,function(x){x.changeVisible(!d.item.unchecked)})}}else{var b=ae(t.getController("legend"),"option.items",[]);G(t.views,function(x){var w=x.getGroupScales();G(w,function(S){S.values&&S.values.indexOf(v)>-1&&x.filter(S.field,function(C){var _=Ps(b,function(T){return T.value===C});return!_.unchecked})}),t.render(!0)})}}})}return r}function Xit(r){var t=r.chart,e=r.options,n=e.slider,i=tn(t,Cs),a=tn(t,Es);return n&&(i.option("slider",n),i.on("slider:valuechanged",function(o){var s=o.event,l=s.value,u=s.originValue;ci(l,u)||Zee(a,l)}),t.once("afterpaint",function(){if(!bu(n)){var o=n.start,s=n.end;(o||s)&&Zee(a,[o,s])}})),r}function qit(r){return Tr(Lit,Fit,Hit,Nit,$it,zit,jit,Git,Uit,Vit,Wit,Bit,Yit,Xit)(r)}(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="dual-axes",e}return t.prototype.getDefaultOptions=function(){return tt({},r.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},t.prototype.getSchemaAdaptor=function(){return qit},t})(Rr);var gb="x",gg="y",Qee={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(r,t){return""+ae(t,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},Kit={appendPadding:2,tooltip:A({},Qee),animation:{}};function Ph(r){return Kn(r||[],function(t,e){return{x:""+e,y:t}})}function Zit(r){var t=r.chart,e=r.options,n=e.data,i=e.color,a=e.areaStyle,o=e.point,s=e.line,l=o==null?void 0:o.state,u=Ph(n);t.data(u);var c=tt({},r,{options:{xField:gb,yField:gg,area:{color:i,style:a},line:s,point:o}}),f=tt({},c,{options:{tooltip:!1}}),d=tt({},c,{options:{tooltip:!1,state:l}});return k2(c),hg(f),Ss(d),t.axis(!1),t.legend(!1),r}function mg(r){var t,e,n=r.options,i=n.xAxis,a=n.yAxis,o=n.data,s=Ph(o);return Tr(Ii((t={},t[gb]=i,t[gg]=a,t),(e={},e[gb]={type:"cat"},e[gg]=bR(s,gg),e)))(r)}function Jee(r){return Tr(ws("areaStyle"),Zit,mg,Ia,_n,$n,Pi())(r)}function Qit(r){var t=r.chart,e=r.options,n=e.data,i=e.color,a=e.lineStyle,o=e.point,s=o==null?void 0:o.state,l=Ph(n);t.data(l);var u=tt({},r,{options:{xField:gb,yField:gg,line:{color:i,style:a},point:o}}),c=tt({},u,{options:{tooltip:!1,state:s}});return hg(u),Ss(c),t.axis(!1),t.legend(!1),r}function ete(r){return Tr(Qit,mg,_n,Ia,$n,Pi())(r)}var Jit=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="tiny-line",e}return t.getDefaultOptions=function(){return Kit},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this,i=n.chart,a=n.options;mg({chart:i,options:a}),i.changeData(Ph(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ete},t}(Rr);function eat(r){var t=r.chart,e=r.options,n=e.data,i=e.color,a=e.columnStyle,o=e.columnWidthRatio,s=Ph(n);t.data(s);var l=tt({},r,{options:{xField:gb,yField:gg,widthRatio:o,interval:{style:a,color:i}}});return oo(l),t.axis(!1),t.legend(!1),t.interaction("element-active"),r}function tte(r){return Tr(_n,ws("columnStyle"),eat,mg,Ia,$n,Pi())(r)}var tat={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(r,t){return""+ae(t,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},rat={appendPadding:2,tooltip:A({},tat),animation:{}},nat=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="tiny-column",e}return t.getDefaultOptions=function(){return rat},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this,i=n.chart,a=n.options;mg({chart:i,options:a}),i.changeData(Ph(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return tte},t}(Rr),iat={appendPadding:2,tooltip:A({},Qee),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},aat=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="tiny-area",e}return t.getDefaultOptions=function(){return iat},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this,i=n.chart,a=n.options;mg({chart:i,options:a}),i.changeData(Ph(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Jee},t}(Rr);function rte(r,t,e){if(e===1)return[0,t];var n=Math.floor(r/t);return[t*n,t*(n+1)]}function oat(r){return Math.ceil(Math.log(r.length)/Math.LN2)+1}function nte(r,t,e,n,i){var a=Or(r);PB(a,t);var o=Ds(a,t),s=uT(o),l=s.max-s.min,u=e;if(!e&&n&&(u=n>1?l/(n-1):s.max),!e&&!n){var c=oat(o);u=l/c}var f={},d=uo(a,i);co(d)?G(a,function(v){var p=v[t],g=rte(p,u,n),m=g[0]+"-"+g[1];Il(f,m)||(f[m]={range:g,count:0}),f[m].count+=1}):Object.keys(d).forEach(function(v){G(d[v],function(p){var g=p[t],m=rte(g,u,n),y=m[0]+"-"+m[1],b=y+"-"+v;Il(f,b)||(f[b]={range:m,count:0},f[b][i]=v),f[b].count+=1})});var h=[];return G(f,function(v){h.push(v)}),h}var F2="range",mb="count",sat=tt({},Rr.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function lat(r){var t=r.chart,e=r.options,n=e.data,i=e.binField,a=e.binNumber,o=e.binWidth,s=e.color,l=e.stackField,u=e.legend,c=e.columnStyle,f=nte(n,i,o,a,l);t.data(f);var d=tt({},r,{options:{xField:F2,yField:mb,seriesField:l,isStack:!0,interval:{color:s,style:c}}});return oo(d),u&&l&&t.legend(l,u),r}function uat(r){var t,e=r.options,n=e.xAxis,i=e.yAxis;return Tr(Ii((t={},t[F2]=n,t[mb]=i,t)))(r)}function cat(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis;return n===!1?t.axis(F2,!1):t.axis(F2,n),i===!1?t.axis(mb,!1):t.axis(mb,i),r}function fat(r){var t=r.chart,e=r.options,n=e.label,i=ao(t,"interval");if(!n)i.label(!1);else{var a=n.callback,o=Ur(n,["callback"]);i.label({fields:[mb],callback:a,cfg:Ma(o)})}return r}function ite(r){return Tr(_n,ws("columnStyle"),lat,uat,cat,Af,fat,Ia,ii,$n)(r)}var dat=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="histogram",e}return t.getDefaultOptions=function(){return sat},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this.options,i=n.binField,a=n.binNumber,o=n.binWidth,s=n.stackField;this.chart.changeData(nte(e,i,o,a,s))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ite},t}(Rr),ate=["#FAAD14","#E8EDF3"],hat={percent:.2,color:ate,animation:{}};function NR(r){var t=ei(_h(r)?r:0,0,1);return[{type:"current",percent:t},{type:"target",percent:1-t}]}function ote(r){var t=r.chart,e=r.options,n=e.percent,i=e.progressStyle,a=e.color,o=e.barWidthRatio;t.data(NR(n));var s=tt({},r,{options:{xField:"1",yField:"percent",seriesField:"type",isStack:!0,widthRatio:o,interval:{style:i,color:ot(a)?[a,ate[1]]:a},args:{zIndexReversed:!0}}});return oo(s),t.tooltip(!1),t.axis(!1),t.legend(!1),r}function vat(r){var t=r.chart;return t.coordinate("rect").transpose(),r}function ste(r){return Tr(ote,Ii({}),vat,$n,_n,Pi())(r)}var pat=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="process",e}return t.getDefaultOptions=function(){return hat},t.prototype.changeData=function(e){this.updateOption({percent:e}),this.chart.changeData(NR(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ste},t}(Rr);function gat(r){var t=r.chart,e=r.options,n=e.innerRadius,i=e.radius;return t.coordinate("theta",{innerRadius:n,radius:i}),r}function lte(r,t){var e=r.chart,n=r.options,i=n.innerRadius,a=n.statistic,o=n.percent,s=n.meta;if(e.getController("annotation").clear(!0),i&&a){var l=ae(s,["percent","formatter"])||function(c){return(c*100).toFixed(2)+"%"},u=a.content;u&&(u=tt({},u,{content:nt(u.content)?l(o):u.content})),x2(e,{statistic:A(A({},a),{content:u}),plotType:"ring-progress"},{percent:o})}return t&&e.render(!0),r}function ute(r){return Tr(ote,Ii({}),gat,lte,$n,_n,Pi())(r)}var mat={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},yat=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="ring-process",e}return t.getDefaultOptions=function(){return mat},t.prototype.changeData=function(e){this.chart.emit(Hr.BEFORE_CHANGE_DATA,pi.fromData(this.chart,Hr.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(NR(e)),lte({chart:this.chart,options:this.options},!0),this.chart.emit(Hr.AFTER_CHANGE_DATA,pi.fromData(this.chart,Hr.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ute},t}(Rr);function bat(r){var t=r.chart,e=r.options,n=e.data,i=e.type,a=e.xField,o=e.yField,s=e.colorField,l=e.sizeField,u=e.sizeRatio,c=e.shape,f=e.color,d=e.tooltip,h=e.heatmapStyle;t.data(n);var v="polygon";i==="density"&&(v="heatmap");var p=js(d,[a,o,s]),g=p.fields,m=p.formatter,y=1;return(u||u===0)&&(!c&&!l?console.warn("sizeRatio is not in effect: Must define shape or sizeField first"):u<0||u>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):y=u),Jo(tt({},r,{options:{type:v,colorField:s,tooltipFields:g,shapeField:l||"",label:void 0,mapping:{tooltip:m,shape:c&&(l?function(b){var x=n.map(function(C){return C[l]}),w=Math.min.apply(Math,x),S=Math.max.apply(Math,x);return[c,(ae(b,l)-w)/(S-w),y]}:function(){return[c,1,y]}),color:f||s&&t.getTheme().sequenceColors.join("-"),style:h}}})),r}function xat(r){var t,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return Tr(Ii((t={},t[a]=n,t[o]=i,t)))(r)}function wat(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return n===!1?t.axis(a,!1):t.axis(a,n),i===!1?t.axis(o,!1):t.axis(o,i),r}function Sat(r){var t=r.chart,e=r.options,n=e.legend,i=e.colorField,a=e.sizeField,o=e.sizeLegend,s=n!==!1;return i&&t.legend(i,s?n:!1),a&&t.legend(a,o===void 0?n:o),!s&&!o&&t.legend(!1),r}function Cat(r){var t=r.chart,e=r.options,n=e.label,i=e.colorField,a=e.type,o=ao(t,a==="density"?"heatmap":"polygon");if(!n)o.label(!1);else if(i){var s=n.callback,l=Ur(n,["callback"]);o.label({fields:[i],callback:s,cfg:Ma(l)})}return r}function Eat(r){var t=r.chart,e=r.options,n=e.coordinate,i=e.reflect;return n&&t.coordinate({type:n.type||"rect",cfg:n.cfg}),i&&t.coordinate().reflect(i),r}function _at(r){return Tr(_n,ws("heatmapStyle"),xat,Eat,bat,wat,Sat,Ia,Cat,Pi(),ii,$n,Af)(r)}var Tat=tt({},Rr.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});In("polygon","circle",{draw:function(r,t){var e,n,i=r.x,a=r.y,o=this.parsePoints(r.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),u=Math.min(s,l)/2,c=Number(r.shape[1]),f=Number(r.shape[2]),d=Math.sqrt(f),h=u*d*Math.sqrt(c),v=((e=r.style)===null||e===void 0?void 0:e.fill)||r.color||((n=r.defaultStyle)===null||n===void 0?void 0:n.fill),p=t.addShape("circle",{attrs:A(A(A({x:i,y:a,r:h},r.defaultStyle),r.style),{fill:v})});return p}});In("polygon","square",{draw:function(r,t){var e,n,i=r.x,a=r.y,o=this.parsePoints(r.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),u=Math.min(s,l),c=Number(r.shape[1]),f=Number(r.shape[2]),d=Math.sqrt(f),h=u*d*Math.sqrt(c),v=((e=r.style)===null||e===void 0?void 0:e.fill)||r.color||((n=r.defaultStyle)===null||n===void 0?void 0:n.fill),p=t.addShape("rect",{attrs:A(A(A({x:i-h/2,y:a-h/2,width:h,height:h},r.defaultStyle),r.style),{fill:v})});return p}});(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="heatmap",e}return t.getDefaultOptions=function(){return Tat},t.prototype.getSchemaAdaptor=function(){return _at},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t})(Rr);var BR,yg="$$range$$",Aat="low-q1-median-q3-high",kat="$$y_outliers$$",cte="outliers_view",Mat=tt({},Rr.getDefaultOptions(),{meta:(BR={},BR[yg]={min:0,alias:Aat},BR),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),fte=function(r,t){var e=r;if(Array.isArray(t)){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4];e=Kn(r,function(l){return l[yg]=[l[n],l[i],l[a],l[o],l[s]],l})}return e};function Iat(r){var t=r.chart,e=r.options,n=e.xField,i=e.yField,a=e.groupField,o=e.color,s=e.tooltip,l=e.boxStyle;t.data(fte(e.data,i));var u=Qe(i)?yg:i,c=i?Qe(i)?i:[i]:[],f=s;f!==!1&&(f=tt({},{fields:Qe(i)?i:[]},f));var d=kR(tt({},r,{options:{xField:n,yField:u,seriesField:a,tooltip:f,rawFields:c,label:!1,schema:{shape:"box",color:o,style:l}}})).ext;return a&&d.geometry.adjust("dodge"),r}function Pat(r){var t=r.chart,e=r.options,n=e.xField,i=e.data,a=e.outliersField,o=e.outliersStyle,s=e.padding,l=e.label;if(!a)return r;var u=t.createView({padding:s,id:cte}),c=i.reduce(function(f,d){var h=d[a];return h.forEach(function(v){var p;return f.push(A(A({},d),(p={},p[a]=v,p)))}),f},[]);return u.data(c),Ss({chart:u,options:{xField:n,yField:a,point:{shape:"circle",style:o},label:l}}),u.axis(!1),r}function Dat(r){var t,e,n=r.chart,i=r.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,u=i.yField,c=i.outliersField,f=Array.isArray(u)?yg:u,d={};if(c){var h=kat;d=(t={},t[c]={sync:h,nice:!0},t[f]={sync:h,nice:!0},t)}var v=tt(d,a,(e={},e[l]=Nn(o,Qo),e[f]=Nn(s,Qo),e));return n.scale(v),r}function Rat(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField,s=Array.isArray(o)?yg:o;return n===!1?t.axis(a,!1):t.axis(a,n),i===!1?t.axis(yg,!1):t.axis(s,i),r}function Oat(r){var t=r.chart,e=r.options,n=e.legend,i=e.groupField;return i?n?t.legend(i,n):t.legend(i,{position:"bottom"}):t.legend(!1),r}function Lat(r){return Tr(Iat,Pat,Dat,Rat,Oat,Ia,ii,$n,_n)(r)}(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="box",e}return t.getDefaultOptions=function(){return Mat},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this.options.yField,i=this.chart.views.find(function(a){return a.id===cte});i&&i.data(e),this.chart.changeData(fte(e,n))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Lat},t})(Rr);var so=$r(function(r){var t=r.exports;r.exports.isNumber=function(e){return typeof e=="number"},r.exports.findMin=function(e){if(e.length===0)return 1/0;for(var n=e[0],i=1;i<e.length;i++)n=Math.min(n,e[i]);return n},r.exports.findMax=function(e){if(e.length===0)return-1/0;for(var n=e[0],i=1;i<e.length;i++)n=Math.max(n,e[i]);return n},r.exports.findMinMulti=function(e){for(var n=t.findMin(e[0]),i=1;i<e.length;i++)n=Math.min(n,t.findMin(e[i]));return n},r.exports.findMaxMulti=function(e){for(var n=t.findMax(e[0]),i=1;i<e.length;i++)n=Math.max(n,t.findMax(e[i]));return n},r.exports.inside=function(e,n,i){return e<=i&&i<=n}});so.isNumber;so.findMin;so.findMax;so.findMinMulti;so.findMaxMulti;so.inside;var Dh=$r(function(r){var t=50,e=2,n=Math.log(2),i=r.exports;function a(s){return 1-Math.abs(s)}r.exports.getUnifiedMinMax=function(s,l){return i.getUnifiedMinMaxMulti([s],l)},r.exports.getUnifiedMinMaxMulti=function(s,l){l=l||{};var u=!1,c=!1,f=so.isNumber(l.width)?l.width:e,d=so.isNumber(l.size)?l.size:t,h=so.isNumber(l.min)?l.min:(u=!0,so.findMinMulti(s)),v=so.isNumber(l.max)?l.max:(c=!0,so.findMaxMulti(s)),p=v-h,g=p/(d-1);return u&&(h=h-2*f*g),c&&(v=v+2*f*g),{min:h,max:v}},r.exports.create=function(s,l){if(l=l||{},!s||s.length===0)return[];var u=so.isNumber(l.size)?l.size:t,c=so.isNumber(l.width)?l.width:e,f=i.getUnifiedMinMax(s,{size:u,width:c,min:l.min,max:l.max}),d=f.min,h=f.max,v=h-d,p=v/(u-1);if(v===0)return[{x:d,y:1}];for(var g=[],m=0;m<u;m++)g.push({x:d+m*p,y:0});var y=function(E){return Math.floor((E-d)/p)},b=o(a,c),x=b[c],w=b[c-1]-b[c-2],S=0;s.forEach(function(E){var k=y(E);if(!(k+c<0||k-c>=g.length)){var I=Math.max(k-c,0),P=k,F=Math.min(k+c,g.length-1),$=I-(k-c),R=k+c-F,L=b[-c-1+$]||0,O=b[-c-1+R]||0,B=x/(x-L-O);$>0&&(S+=B*($-1)*w);var U=Math.max(0,k-c+1);so.inside(0,g.length-1,U)&&(g[U].y+=B*1*w),so.inside(0,g.length-1,P+1)&&(g[P+1].y-=B*2*w),so.inside(0,g.length-1,F+1)&&(g[F+1].y+=B*1*w)}});var C=S,_=0,T=0;return g.forEach(function(E){_+=E.y,C+=_,E.y=C,T+=C}),T>0&&g.forEach(function(E){E.y/=T}),g};function o(s,l){for(var u={},c=0,f=-l;f<=l;f++)c+=s(f/l),u[f]=c;return u}r.exports.getExpectedValueFromPdf=function(s){if(!(!s||s.length===0)){var l=0;return s.forEach(function(u){l+=u.x*u.y}),l}},r.exports.getXWithLeftTailArea=function(s,l){if(!(!s||s.length===0)){for(var u=0,c=0,f=0;f<s.length&&(c=f,u+=s[f].y,!(u>=l));f++);return s[c].x}},r.exports.getPerplexity=function(s){if(!(!s||s.length===0)){var l=0;return s.forEach(function(u){var c=Math.log(u.y);isFinite(c)&&(l+=u.y*c)}),l=-l/n,Math.pow(2,l)}}});Dh.getUnifiedMinMax;Dh.getUnifiedMinMaxMulti;Dh.create;Dh.getExpectedValueFromPdf;Dh.getXWithLeftTailArea;Dh.getPerplexity;function dte(r,t){var e=r.length*t;if(r.length===0)throw new Error("quantile requires at least one data point.");if(t<0||t>1)throw new Error("quantiles must be between 0 and 1");return t===1?r[r.length-1]:t===0?r[0]:e%1!=0?r[Math.ceil(e)-1]:r.length%2==0?(r[e-1]+r[e])/2:r[e]}function yb(r,t,e){var n=r[t];r[t]=r[e],r[e]=n}function N2(r,t,e,n){for(e=e||0,n=n||r.length-1;n>e;){if(n-e>600){var i=n-e+1,a=t-e+1,o=Math.log(i),s=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*s*(i-s)/i);a-i/2<0&&(l*=-1);var u=Math.max(e,Math.floor(t-a*s/i+l)),c=Math.min(n,Math.floor(t+(i-a)*s/i+l));N2(r,t,u,c)}var f=r[t],d=e,h=n;for(yb(r,e,t),r[n]>f&&yb(r,e,n);d<h;){for(yb(r,d,h),d++,h--;r[d]<f;)d++;for(;r[h]>f;)h--}r[e]===f?yb(r,e,h):(h++,yb(r,h,n)),h<=t&&(e=h+1),t<=h&&(n=h-1)}}function bb(r,t){var e=r.slice();if(Array.isArray(t)){Fat(e,t);for(var n=[],i=0;i<t.length;i++)n[i]=dte(e,t[i]);return n}else{var a=vte(e.length,t);return hte(e,a,0,e.length-1),dte(e,t)}}function hte(r,t,e,n){t%1==0?N2(r,t,e,n):(t=Math.floor(t),N2(r,t,e,n),N2(r,t+1,t+1,n))}function Fat(r,t){for(var e=[0],n=0;n<t.length;n++)e.push(vte(r.length,t[n]));e.push(r.length-1),e.sort(Nat);for(var i=[0,e.length-1];i.length;){var a=Math.ceil(i.pop()),o=Math.floor(i.pop());if(!(a-o<=1)){var s=Math.floor((o+a)/2);hte(r,e[s],Math.floor(e[o]),Math.ceil(e[a])),i.push(o,s,s,a)}}}function Nat(r,t){return r-t}function vte(r,t){var e=r*t;return t===1?r-1:t===0?0:e%1!=0?Math.ceil(e)-1:r%2==0?e-.5:e}var pte=function(r){return{low:sa(r),high:Xi(r),q1:bb(r,.25),q3:bb(r,.75),median:bb(r,[.5]),minMax:[sa(r),Xi(r)],quantile:[bb(r,.25),bb(r,.75)]}},gte=function(r,t){var e=Dh.create(r,t);return{violinSize:e.map(function(n){return n.y}),violinY:e.map(function(n){return n.x})}},mte=function(r){var t=r.xField,e=r.yField,n=r.seriesField,i=r.data,a=r.kde,o={min:a.min,max:a.max,size:a.sampleSize,width:a.width};if(!n){var s=uo(i,t);return Object.keys(s).map(function(c){var f=s[c],d=f.map(function(h){return h[e]});return A(A({x:c},gte(d,o)),pte(d))})}var l=[],u=uo(i,n);return Object.keys(u).forEach(function(c){var f=uo(u[c],t);return Object.keys(f).forEach(function(d){var h,v=f[d],p=v.map(function(g){return g[e]});l.push(A(A((h={x:d},h[n]=c,h),gte(p,o)),pte(p)))})}),l},Ys="x",Rh="violinY",Bat="violinSize",yte="minMax",bte="quantile",xte="median",$R="violin_view",$at="min_max_view",zat="quantile_view",Gat="median_view",Uat=tt({},Rr.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),B2=["low","high","q1","q3","median"],$2=[{type:"dodge",marginRatio:1/32}];function Vat(r){var t=r.chart,e=r.options;return t.data(mte(e)),r}function Hat(r){var t=r.chart,e=r.options,n=e.seriesField,i=e.color,a=e.shape,o=a===void 0?"violin":a,s=e.violinStyle,l=e.tooltip,u=e.state,c=t.createView({id:$R});return mrt({chart:c,options:{xField:Ys,yField:Rh,seriesField:n||Ys,sizeField:Bat,tooltip:A({fields:B2},l),violin:{style:s,color:i,shape:o},state:u}}),c.geometries[0].adjust($2),r}function Wat(r){var t=r.chart,e=r.options,n=e.seriesField,i=e.color,a=e.tooltip,o=e.box;if(o===!1)return r;var s=t.createView({id:$at});oo({chart:s,options:{xField:Ys,yField:yte,seriesField:n||Ys,tooltip:A({fields:B2},a),state:typeof o=="object"?o.state:{},interval:{color:i,size:1,style:{lineWidth:0}}}}),s.geometries[0].adjust($2);var l=t.createView({id:zat});oo({chart:l,options:{xField:Ys,yField:bte,seriesField:n||Ys,tooltip:A({fields:B2},a),state:typeof o=="object"?o.state:{},interval:{color:i,size:8,style:{fillOpacity:1}}}}),l.geometries[0].adjust($2);var u=t.createView({id:Gat});return Ss({chart:u,options:{xField:Ys,yField:xte,seriesField:n||Ys,tooltip:A({fields:B2},a),state:typeof o=="object"?o.state:{},point:{color:i,size:1,style:{fill:"white",lineWidth:0}}}}),u.geometries[0].adjust($2),l.axis(!1),s.axis(!1),u.axis(!1),u.legend(!1),s.legend(!1),l.legend(!1),r}function jat(r){var t,e=r.chart,n=r.options,i=n.meta,a=n.xAxis,o=n.yAxis,s={},l=tt(s,i,(t={},t[Ys]=A(A({sync:!0},Nn(a,Qo)),{type:"cat"}),t[Rh]=A({sync:!0},Nn(o,Qo)),t[yte]=A({sync:Rh},Nn(o,Qo)),t[bte]=A({sync:Rh},Nn(o,Qo)),t[xte]=A({sync:Rh},Nn(o,Qo)),t));return e.scale(l),r}function Yat(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=tn(t,$R);return n===!1?a.axis(Ys,!1):a.axis(Ys,n),i===!1?a.axis(Rh,!1):a.axis(Rh,i),t.axis(!1),r}function Xat(r){var t=r.chart,e=r.options,n=e.legend,i=e.seriesField,a=e.shape;if(n===!1)t.legend(!1);else{var o=i||Ys,s=Wx(n,["selected"]);(!a||!a.startsWith("hollow"))&&(ae(s,["marker","style","lineWidth"])||Ki(s,["marker","style","lineWidth"],0)),t.legend(o,s),ae(n,"selected")&&G(t.views,function(l){return l.legend(o,n)})}return r}function qat(r){var t=r.chart,e=tn(t,$R);return Pi()(A(A({},r),{chart:e})),r}function Kat(r){var t=r.chart,e=r.options,n=e.animation;return G(t.views,function(i){typeof n=="boolean"?i.animate(n):i.animate(!0),G(i.geometries,function(a){a.animate(n)})}),r}function Zat(r){return Tr(_n,Vat,Hat,Wat,jat,Ia,Yat,Xat,ii,qat,Kat)(r)}(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="violin",e}return t.getDefaultOptions=function(){return Uat},t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(mte(this.options))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Zat},t})(Rr);var Qat=function(r){return function(t,e){var n=[];return n[0]=r(t[0],e[0]),n[1]=r(t[1],e[1]),n[2]=r(t[2],e[2]),n}},wte={normal:function(r){return r},multiply:function(r,t){return r*t/255},screen:function(r,t){return 255*(1-(1-r/255)*(1-t/255))},overlay:function(r,t){return t<128?2*r*t/255:255*(1-2*(1-r/255)*(1-t/255))},darken:function(r,t){return r>t?t:r},lighten:function(r,t){return r>t?r:t},dodge:function(r,t){return r===255?255:(r=255*(t/255)/(1-r/255),r>255?255:r)},burn:function(r,t){return t===255?255:r===0?0:255*(1-Math.min(1,(1-t/255)/(r/255)))}},Jat=function(r){if(!wte[r])throw new Error("unknown blend mode "+r);return wte[r]};function eot(r,t,e){e===void 0&&(e="normal");var n=Qat(Jat(e))(z2(r),z2(t)),i=z2(r),a=i[0],o=i[1],s=i[2],l=i[3],u=z2(t),c=u[0],f=u[1],d=u[2],h=u[3],v=Number((l+h*(1-l)).toFixed(2)),p=Math.round((l*(1-h)*(a/255)+l*h*(n[0]/255)+(1-l)*h*(c/255))/v*255),g=Math.round((l*(1-h)*(o/255)+l*h*(n[1]/255)+(1-l)*h*(f/255))/v*255),m=Math.round((l*(1-h)*(s/255)+l*h*(n[2]/255)+(1-l)*h*(d/255))/v*255);return"rgba("+p+", "+g+", "+m+", "+v+")"}function z2(r){var t=r.replace("/s+/g",""),e;return typeof t=="string"&&!t.startsWith("rgba")&&!t.startsWith("#")?e=gf.rgb2arr(gf.toRGB(t)).concat([1]):(t.startsWith("rgba")&&(e=t.replace("rgba(","").replace(")","").split(",")),t.startsWith("#")&&(e=gf.rgb2arr(t).concat([1])),e.map(function(n,i){return i===3?Number(n):n|0}))}function tot(r,t,e,n){n=n||{};var i=n.maxIterations||100,a=n.tolerance||1e-10,o=r(t),s=r(e),l=e-t;if(o*s>0)throw"Initial bisect points must have opposite signs";if(o===0)return t;if(s===0)return e;for(var u=0;u<i;++u){l/=2;var c=t+l,f=r(c);if(f*o>=0&&(t=c),Math.abs(l)<a||f===0)return c}return t+l}function zR(r){for(var t=new Array(r),e=0;e<r;++e)t[e]=0;return t}function Ste(r,t){return zR(r).map(function(){return zR(t)})}function bg(r,t){for(var e=0,n=0;n<r.length;++n)e+=r[n]*t[n];return e}function GR(r){return Math.sqrt(bg(r,r))}function UR(r,t,e){for(var n=0;n<t.length;++n)r[n]=t[n]*e}function tc(r,t,e,n,i){for(var a=0;a<r.length;++a)r[a]=t*e[a]+n*i[a]}function Cte(r,t,e){e=e||{};var n=e.maxIterations||t.length*200,i=e.nonZeroDelta||1.05,a=e.zeroDelta||.001,o=e.minErrorDelta||1e-6,s=e.minErrorDelta||1e-5,l=e.rho!==void 0?e.rho:1,u=e.chi!==void 0?e.chi:2,c=e.psi!==void 0?e.psi:-.5,f=e.sigma!==void 0?e.sigma:.5,d,h=t.length,v=new Array(h+1);v[0]=t,v[0].fx=r(t),v[0].id=0;for(var p=0;p<h;++p){var g=t.slice();g[p]=g[p]?g[p]*i:a,v[p+1]=g,v[p+1].fx=r(g),v[p+1].id=p+1}function m(I){for(var P=0;P<I.length;P++)v[h][P]=I[P];v[h].fx=I.fx}for(var y=function(I,P){return I.fx-P.fx},b=t.slice(),x=t.slice(),w=t.slice(),S=t.slice(),C=0;C<n;++C){if(v.sort(y),e.history){var _=v.map(function(I){var P=I.slice();return P.fx=I.fx,P.id=I.id,P});_.sort(function(I,P){return I.id-P.id}),e.history.push({x:v[0].slice(),fx:v[0].fx,simplex:_})}for(d=0,p=0;p<h;++p)d=Math.max(d,Math.abs(v[0][p]-v[1][p]));if(Math.abs(v[0].fx-v[h].fx)<o&&d<s)break;for(p=0;p<h;++p){b[p]=0;for(var T=0;T<h;++T)b[p]+=v[T][p];b[p]/=h}var E=v[h];if(tc(x,1+l,b,-l,E),x.fx=r(x),x.fx<v[0].fx)tc(S,1+u,b,-u,E),S.fx=r(S),S.fx<x.fx?m(S):m(x);else if(x.fx>=v[h-1].fx){var k=!1;if(x.fx>E.fx?(tc(w,1+c,b,-c,E),w.fx=r(w),w.fx<E.fx?m(w):k=!0):(tc(w,1-c*l,b,c*l,E),w.fx=r(w),w.fx<x.fx?m(w):k=!0),k){if(f>=1)break;for(p=1;p<v.length;++p)tc(v[p],1-f,v[0],f,v[p]),v[p].fx=r(v[p])}}else m(x)}return v.sort(y),{fx:v[0].fx,x:v[0]}}function rot(r,t,e,n,i,a,o){var s=e.fx,l=bg(e.fxprime,t),u=s,c=s,f=l,d=0;i=i||1,a=a||1e-6,o=o||.1;function h(p,g,m){for(var y=0;y<16;++y)if(i=(p+g)/2,tc(n.x,1,e.x,i,t),u=n.fx=r(n.x,n.fxprime),f=bg(n.fxprime,t),u>s+a*i*l||u>=m)g=i;else{if(Math.abs(f)<=-o*l)return i;f*(g-p)>=0&&(g=p),p=i,m=u}return 0}for(var v=0;v<10;++v){if(tc(n.x,1,e.x,i,t),u=n.fx=r(n.x,n.fxprime),f=bg(n.fxprime,t),u>s+a*i*l||v&&u>=c)return h(d,i,c);if(Math.abs(f)<=-o*l)return i;if(f>=0)return h(i,d,u);c=u,d=i,i*=2}return i}function not(r,t,e){var n={x:t.slice(),fx:0,fxprime:t.slice()},i={x:t.slice(),fx:0,fxprime:t.slice()},a=t.slice(),o,s,l=1,u;e=e||{},u=e.maxIterations||t.length*20,n.fx=r(n.x,n.fxprime),o=n.fxprime.slice(),UR(o,n.fxprime,-1);for(var c=0;c<u;++c){if(l=rot(r,o,n,i,l),e.history&&e.history.push({x:n.x.slice(),fx:n.fx,fxprime:n.fxprime.slice(),alpha:l}),!l)UR(o,n.fxprime,-1);else{tc(a,1,i.fxprime,-1,n.fxprime);var f=bg(n.fxprime,n.fxprime),d=Math.max(0,bg(a,i.fxprime)/f);tc(o,d,o,-1,i.fxprime),s=n,n=i,i=s}if(GR(n.fxprime)<=1e-5)break}return e.history&&e.history.push({x:n.x.slice(),fx:n.fx,fxprime:n.fxprime.slice(),alpha:l}),n}var Ete=1e-10;function VR(r,t){var e=aot(r),n=e.filter(function(C){return iot(C,r)}),i=0,a=0,o,s=[];if(n.length>1){var l=Ate(n);for(o=0;o<n.length;++o){var u=n[o];u.angle=Math.atan2(u.x-l.x,u.y-l.y)}n.sort(function(C,_){return _.angle-C.angle});var c=n[n.length-1];for(o=0;o<n.length;++o){var f=n[o];a+=(c.x+f.x)*(f.y-c.y);for(var d={x:(f.x+c.x)/2,y:(f.y+c.y)/2},h=null,v=0;v<f.parentIndex.length;++v)if(c.parentIndex.indexOf(f.parentIndex[v])>-1){var p=r[f.parentIndex[v]],g=Math.atan2(f.x-p.x,f.y-p.y),m=Math.atan2(c.x-p.x,c.y-p.y),y=m-g;y<0&&(y+=2*Math.PI);var b=m-y/2,x=gl(d,{x:p.x+p.radius*Math.sin(b),y:p.y+p.radius*Math.cos(b)});x>p.radius*2&&(x=p.radius*2),(h===null||h.width>x)&&(h={circle:p,width:x,p1:f,p2:c})}h!==null&&(s.push(h),i+=HR(h.circle.radius,h.width),c=f)}}else{var w=r[0];for(o=1;o<r.length;++o)r[o].radius<w.radius&&(w=r[o]);var S=!1;for(o=0;o<r.length;++o)if(gl(r[o],w)>Math.abs(w.radius-r[o].radius)){S=!0;break}S?i=a=0:(i=w.radius*w.radius*Math.PI,s.push({circle:w,p1:{x:w.x,y:w.y+w.radius},p2:{x:w.x-Ete,y:w.y+w.radius},width:w.radius*2}))}return a/=2,t&&(t.area=i+a,t.arcArea=i,t.polygonArea=a,t.arcs=s,t.innerPoints=n,t.intersectionPoints=e),i+a}function iot(r,t){for(var e=0;e<t.length;++e)if(gl(r,t[e])>t[e].radius+Ete)return!1;return!0}function aot(r){for(var t=[],e=0;e<r.length;++e)for(var n=e+1;n<r.length;++n)for(var i=Tte(r[e],r[n]),a=0;a<i.length;++a){var o=i[a];o.parentIndex=[e,n],t.push(o)}return t}function HR(r,t){return r*r*Math.acos(1-t/r)-(r-t)*Math.sqrt(t*(2*r-t))}function gl(r,t){return Math.sqrt((r.x-t.x)*(r.x-t.x)+(r.y-t.y)*(r.y-t.y))}function _te(r,t,e){if(e>=r+t)return 0;if(e<=Math.abs(r-t))return Math.PI*Math.min(r,t)*Math.min(r,t);var n=r-(e*e-t*t+r*r)/(2*e),i=t-(e*e-r*r+t*t)/(2*e);return HR(r,n)+HR(t,i)}function Tte(r,t){var e=gl(r,t),n=r.radius,i=t.radius;if(e>=n+i||e<=Math.abs(n-i))return[];var a=(n*n-i*i+e*e)/(2*e),o=Math.sqrt(n*n-a*a),s=r.x+a*(t.x-r.x)/e,l=r.y+a*(t.y-r.y)/e,u=-(t.y-r.y)*(o/e),c=-(t.x-r.x)*(o/e);return[{x:s+u,y:l-c},{x:s-u,y:l+c}]}function Ate(r){for(var t={x:0,y:0},e=0;e<r.length;++e)t.x+=r[e].x,t.y+=r[e].y;return t.x/=r.length,t.y/=r.length,t}function oot(r,t){t=t||{},t.maxIterations=t.maxIterations||500;var e=t.initialLayout||cot,n=t.lossFunction||jR;r=sot(r);var i=e(r,t),a=[],o=[],s;for(s in i)i.hasOwnProperty(s)&&(a.push(i[s].x),a.push(i[s].y),o.push(s));for(var l=Cte(function(f){for(var d={},h=0;h<o.length;++h){var v=o[h];d[v]={x:f[2*h],y:f[2*h+1],radius:i[v].radius}}return n(d,r)},a,t),u=l.x,c=0;c<o.length;++c)s=o[c],i[s].x=u[2*c],i[s].y=u[2*c+1];return i}var kte=1e-10;function WR(r,t,e){return Math.min(r,t)*Math.min(r,t)*Math.PI<=e+kte?Math.abs(r-t):tot(function(n){return _te(r,t,n)-e},0,r+t)}function sot(r){r=r.slice();var t=[],e={},n,i,a,o;for(n=0;n<r.length;++n){var s=r[n];s.sets.length==1?t.push(s.sets[0]):s.sets.length==2&&(a=s.sets[0],o=s.sets[1],e[[a,o]]=!0,e[[o,a]]=!0)}for(t.sort(function(l,u){return l>u?1:-1}),n=0;n<t.length;++n)for(a=t[n],i=n+1;i<t.length;++i)o=t[i],[a,o]in e||r.push({sets:[a,o],size:0});return r}function lot(r,t,e){var n=Ste(t.length,t.length),i=Ste(t.length,t.length);return r.filter(function(a){return a.sets.length==2}).map(function(a){var o=e[a.sets[0]],s=e[a.sets[1]],l=Math.sqrt(t[o].size/Math.PI),u=Math.sqrt(t[s].size/Math.PI),c=WR(l,u,a.size);n[o][s]=n[s][o]=c;var f=0;a.size+1e-10>=Math.min(t[o].size,t[s].size)?f=1:a.size<=1e-10&&(f=-1),i[o][s]=i[s][o]=f}),{distances:n,constraints:i}}function uot(r,t,e,n){var i=0,a;for(a=0;a<t.length;++a)t[a]=0;for(a=0;a<e.length;++a)for(var o=r[2*a],s=r[2*a+1],l=a+1;l<e.length;++l){var u=r[2*l],c=r[2*l+1],f=e[a][l],d=n[a][l],h=(u-o)*(u-o)+(c-s)*(c-s),v=Math.sqrt(h),p=h-f*f;d>0&&v<=f||d<0&&v>=f||(i+=2*p*p,t[2*a]+=4*p*(o-u),t[2*a+1]+=4*p*(s-c),t[2*l]+=4*p*(u-o),t[2*l+1]+=4*p*(c-s))}return i}function cot(r,t){var e=dot(r,t),n=t.lossFunction||jR;if(r.length>=8){var i=fot(r,t),a=n(i,r),o=n(e,r);a+1e-8<o&&(e=i)}return e}function fot(r,t){t=t||{};var e=t.restarts||10,n=[],i={},a;for(a=0;a<r.length;++a){var o=r[a];o.sets.length==1&&(i[o.sets[0]]=n.length,n.push(o))}var s=lot(r,n,i),l=s.distances,u=s.constraints,c=GR(l.map(GR))/l.length;l=l.map(function(y){return y.map(function(b){return b/c})});var f=function(y,b){return uot(y,b,l,u)},d,h;for(a=0;a<e;++a){var v=zR(l.length*2).map(Math.random);h=not(f,v,t),(!d||h.fx<d.fx)&&(d=h)}var p=d.x,g={};for(a=0;a<n.length;++a){var m=n[a];g[m.sets[0]]={x:p[2*a]*c,y:p[2*a+1]*c,radius:Math.sqrt(m.size/Math.PI)}}if(t.history)for(a=0;a<t.history.length;++a)UR(t.history[a].x,c);return g}function dot(r,t){for(var e=t&&t.lossFunction?t.lossFunction:jR,n={},i={},a,o=0;o<r.length;++o){var s=r[o];s.sets.length==1&&(a=s.sets[0],n[a]={x:1e10,y:1e10,rowid:Object.keys(n).length,size:s.size,radius:Math.sqrt(s.size/Math.PI)},i[a]=[])}r=r.filter(function(R){return R.sets.length==2});for(var o=0;o<r.length;++o){var l=r[o],u=l.hasOwnProperty("weight")?l.weight:1,c=l.sets[0],f=l.sets[1];l.size+kte>=Math.min(n[c].size,n[f].size)&&(u=0),i[c].push({set:f,size:l.size,weight:u}),i[f].push({set:c,size:l.size,weight:u})}var d=[];for(a in i)if(i.hasOwnProperty(a)){for(var h=0,o=0;o<i[a].length;++o)h+=i[a][o].size*i[a][o].weight;d.push({set:a,size:h})}function v(R,L){return L.size-R.size}d.sort(v);var p={};function g(R){return R.set in p}function m(R,L){n[L].x=R.x,n[L].y=R.y,p[L]=!0}m({x:0,y:0},d[0].set);for(var o=1;o<d.length;++o){var y=d[o].set,b=i[y].filter(g);if(a=n[y],b.sort(v),b.length===0)throw"ERROR: missing pairwise overlap information";for(var x=[],w=0;w<b.length;++w){var S=n[b[w].set],C=WR(a.radius,S.radius,b[w].size);x.push({x:S.x+C,y:S.y}),x.push({x:S.x-C,y:S.y}),x.push({y:S.y+C,x:S.x}),x.push({y:S.y-C,x:S.x});for(var _=w+1;_<b.length;++_)for(var T=n[b[_].set],E=WR(a.radius,T.radius,b[_].size),k=Tte({x:S.x,y:S.y,radius:C},{x:T.x,y:T.y,radius:E}),I=0;I<k.length;++I)x.push(k[I])}for(var P=1e50,F=x[0],w=0;w<x.length;++w){n[y].x=x[w].x,n[y].y=x[w].y;var $=e(n,r);$<P&&(P=$,F=x[w])}m(F,y)}return n}function jR(r,t){var e=0;function n(c){return c.map(function(f){return r[f]})}for(var i=0;i<t.length;++i){var a=t[i],o=void 0;if(a.sets.length!=1){if(a.sets.length==2){var s=r[a.sets[0]],l=r[a.sets[1]];o=_te(s.radius,l.radius,gl(s,l))}else o=VR(n(a.sets));var u=a.hasOwnProperty("weight")?a.weight:1;e+=u*(o-a.size)*(o-a.size)}}return e}function hot(r){var t=function(e){var n=Math.max.apply(null,r.map(function(a){return a[e]+a.radius})),i=Math.min.apply(null,r.map(function(a){return a[e]-a.radius}));return{max:n,min:i}};return{xRange:t("x"),yRange:t("y")}}function vot(r,t,e,n){var i=[],a=[];for(var o in r)r.hasOwnProperty(o)&&(a.push(o),i.push(r[o]));t-=2*n,e-=2*n;var s=hot(i),l=s.xRange,u=s.yRange;if(l.max==l.min||u.max==u.min)return console.log("not scaling solution: zero size detected"),r;for(var c=t/(l.max-l.min),f=e/(u.max-u.min),d=Math.min(f,c),h=(t-(l.max-l.min)*d)/2,v=(e-(u.max-u.min)*d)/2,p={},g=0;g<i.length;++g){var m=i[g];p[a[g]]={radius:d*m.radius,x:n+h+(m.x-l.min)*d,y:n+v+(m.y-u.min)*d}}return p}function YR(r,t,e){var n=t[0].radius-gl(t[0],r),i,a;for(i=1;i<t.length;++i)a=t[i].radius-gl(t[i],r),a<=n&&(n=a);for(i=0;i<e.length;++i)a=gl(e[i],r)-e[i].radius,a<=n&&(n=a);return n}function Mte(r,t){var e=[],n;for(n=0;n<r.length;++n){var i=r[n];e.push({x:i.x,y:i.y}),e.push({x:i.x+i.radius/2,y:i.y}),e.push({x:i.x-i.radius/2,y:i.y}),e.push({x:i.x,y:i.y+i.radius/2}),e.push({x:i.x,y:i.y-i.radius/2})}var a=e[0],o=YR(e[0],r,t);for(n=1;n<e.length;++n){var s=YR(e[n],r,t);s>=o&&(a=e[n],o=s)}var l=Cte(function(d){return-1*YR({x:d[0],y:d[1]},r,t)},[a.x,a.y],{maxIterations:500,minErrorDelta:1e-10}).x,u={x:l[0],y:l[1]},c=!0;for(n=0;n<r.length;++n)if(gl(u,r[n])>r[n].radius){c=!1;break}for(n=0;n<t.length;++n)if(gl(u,t[n])<t[n].radius){c=!1;break}if(!c)if(r.length==1)u={x:r[0].x,y:r[0].y};else{var f={};VR(r,f),f.arcs.length===0?u={x:0,y:-1e3,disjoint:!0}:f.arcs.length==1?u={x:f.arcs[0].circle.x,y:f.arcs[0].circle.y}:t.length?u=Mte(r,[]):u=Ate(f.arcs.map(function(d){return d.p1}))}return u}function pot(r){var t={},e=[];for(var n in r)e.push(n),t[n]=[];for(var i=0;i<e.length;i++)for(var a=r[e[i]],o=i+1;o<e.length;++o){var s=r[e[o]],l=gl(a,s);l+s.radius<=a.radius+1e-10?t[e[o]].push(e[i]):l+a.radius<=s.radius+1e-10&&t[e[i]].push(e[o])}return t}function got(r,t){for(var e={},n=pot(r),i=0;i<t.length;++i){for(var a=t[i].sets,o={},s={},l=0;l<a.length;++l){o[a[l]]=!0;for(var u=n[a[l]],c=0;c<u.length;++c)s[u[c]]=!0}var f=[],d=[];for(var h in r)h in o?f.push(r[h]):h in s||d.push(r[h]);var v=Mte(f,d);e[a]=v,v.disjoint&&t[i].size>0&&console.log("WARNING: area "+a+" not represented on screen")}return e}function mot(r,t,e){var n=[],i=r-e,a=t;return n.push("M",i,a),n.push("A",e,e,0,1,0,i+2*e,a),n.push("A",e,e,0,1,0,i,a),n.join(" ")}function yot(r){var t={};VR(r,t);var e=t.arcs;if(e.length===0)return"M 0 0";if(e.length==1){var n=e[0].circle;return mot(n.x,n.y,n.radius)}else{for(var i=[`
M`,e[0].p2.x,e[0].p2.y],a=0;a<e.length;++a){var o=e[a],s=o.circle.radius,l=o.width>s;i.push(`
A`,s,s,0,l?1:0,1,o.p1.x,o.p1.y)}return i.join(" ")}}var rc="id",XR="path",bot={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(r){return{name:r.id,value:r.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]},xot=ad(function(r,t,e,n){var i=new Map,a=r.length;return t.forEach(function(o,s){if(o[n].length===1)i.set(o[rc],r[(s+a)%a]);else{var l=o[n].map(function(u){return i.get(u)});i.set(o[rc],l.slice(1).reduce(function(u,c){return eot(u,c,e)},l[0]))}}),i},function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return JSON.stringify(r)});function wot(r,t,e,n){n===void 0&&(n=0);var i=r.data,a=r.setsField,o=r.sizeField;if(i.length===0)return Ju(pl.WARN,!1,"warn: %s","\u6570\u636E\u4E0D\u80FD\u4E3A\u7A7A"),[];var s=i.map(function(f){var d;return A(A({},f),(d={sets:f[a]||[],size:f[o]},d[XR]="",d[rc]="",d))});s.sort(function(f,d){return f.sets.length-d.sets.length});var l=oot(s),u=vot(l,t,e,n),c=got(u,s);return s.forEach(function(f){var d=f.sets,h=d.join(",");f[rc]=h;var v=d.map(function(m){return u[m]}),p=yot(v);/[zZ]$/.test(p)||(p+=" Z"),f[XR]=p;var g=c[h]||{x:0,y:0};jt(f,g)}),s}function Sot(r,t){for(var e=0;e<t.length;e++)if(!r.includes(t[e]))return!1;return!0}function Cot(r){return tt({},r.defaultStyle,{fill:r.color},r.style)}In("schema","venn",{draw:function(r,t){var e=r.data,n=jm(e[XR]),i=Cot(r),a=t.addGroup({name:"venn-shape"});a.addShape("path",{attrs:A(A({},i),{path:n}),name:"venn-path"});var o=r.customInfo,s=o.offsetX,l=o.offsetY,u=Ko.transform(null,[["t",s,l]]);return a.setMatrix(u),a},getMarker:function(r){var t=r.color;return{symbol:"circle",style:{lineWidth:0,stroke:t,fill:t,r:4}}}});var Eot=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getLabelPoint=function(e,n,i){var a=e.data,o=a.x,s=a.y,l=e.customLabelInfo,u=l.offsetX,c=l.offsetY;return{content:e.content[i],x:o+u,y:s+c}},t}(a2);tb("venn",Eot);function G2(r){if(!!r){var t=r.geometries[0].elements;t.forEach(function(e){e.shape.toFront()})}}var _ot=e2("element-active"),Tot=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.syncElementsPos=function(){G2(this.context.view)},t.prototype.active=function(){r.prototype.active.call(this),this.syncElementsPos()},t.prototype.toggle=function(){r.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){r.prototype.reset.call(this),this.syncElementsPos()},t}(_ot),Aot=e2("element-highlight"),kot=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.syncElementsPos=function(){G2(this.context.view)},t.prototype.highlight=function(){r.prototype.highlight.call(this),this.syncElementsPos()},t.prototype.toggle=function(){r.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.clear=function(){r.prototype.clear.call(this),this.syncElementsPos()},t.prototype.reset=function(){r.prototype.reset.call(this),this.syncElementsPos()},t}(Aot),Mot=e2("element-selected"),Iot=e2("element-single-selected"),Pot=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.syncElementsPos=function(){G2(this.context.view)},t.prototype.selected=function(){r.prototype.selected.call(this),this.syncElementsPos()},t.prototype.toggle=function(){r.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){r.prototype.reset.call(this),this.syncElementsPos()},t}(Mot),Dot=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.syncElementsPos=function(){G2(this.context.view)},t.prototype.selected=function(){r.prototype.selected.call(this),this.syncElementsPos()},t.prototype.toggle=function(){r.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){r.prototype.reset.call(this),this.syncElementsPos()},t}(Iot);Cr("venn-element-active",Tot);Cr("venn-element-highlight",kot);Cr("venn-element-selected",Pot);Cr("venn-element-single-selected",Dot);Lr("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]});Lr("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]});Lr("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]});Lr("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]});Lr("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]});Lr("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});var Rot=40;function Ite(r,t,e){var n=r.chart,i=r.options,a=i.blendMode,o=i.setsField,s=n.getTheme(),l=s.colors10,u=s.colors20,c=e;Qe(c)||(c=t.filter(function(d){return d[o].length===1}).length<=10?l:u);var f=xot(c,t,a,o);return function(d){return f.get(d)||c[0]}}function Oot(r,t){var e=r.options,n=e.color;if(typeof n!="function"){var i=typeof n=="string"?[n]:n,a=Ite(r,t,i);return function(o){return a(o[rc])}}return n}function Lot(r){var t=r.chart,e=r.options,n=e.legend,i=e.appendPadding,a=e.padding,o=Tf(i);return n!==!1&&(o=w2(i,ae(n,"position"),Rot)),t.appendPadding=xR([o,a]),r}function Fot(r){var t=r.options,e=t.data;e||(Ju(pl.WARN,!1,"warn: %s","\u6570\u636E\u4E0D\u80FD\u4E3A\u7A7A"),e=[]);var n=e.filter(function(a){return a.sets.length===1}).map(function(a){return a.sets[0]}),i=e.filter(function(a){var o=a.sets;return Sot(n,o)});return ci(i,e)||Ju(pl.WARN,!1,"warn: %s","\u4EA4\u96C6\u4E2D\u4E0D\u80FD\u51FA\u73B0\u4E0D\u5B58\u5728\u7684\u96C6\u5408, \u8BF7\u8F93\u5165\u5408\u6CD5\u6570\u636E"),Dt({},r,{options:{data:i}})}function Not(r){var t=r.chart,e=r.options,n=e.pointStyle,i=e.setsField,a=e.sizeField,o=Tf(t.appendPadding),s=o[0],l=o[1],u=o[2],c=o[3],f={offsetX:c,offsetY:s},d=t.viewBBox,h=d.width,v=d.height,p=wot(e,Math.max(h-(l+c),0),Math.max(v-(s+u),0),0);t.data(p);var g=kR(tt({},r,{options:{xField:"x",yField:"y",sizeField:a,seriesField:rc,rawFields:[i,a],schema:{shape:"venn",style:n}}})).ext,m=g.geometry;m.customInfo(f);var y=Oot(r,p);return typeof y=="function"&&m.color(rc,function(b){var x=p.find(function(S){return S[rc]===b}),w=Ite(r,p)(b);return y(x,w)}),r}function Bot(r){var t=r.chart,e=r.options,n=e.label,i=Tf(t.appendPadding),a=i[0],o=i[3],s={offsetX:o,offsetY:a},l=ao(t,"schema");if(!n)l.label(!1);else{var u=n.callback,c=Ur(n,["callback"]);l.label({fields:["id"],callback:u,cfg:Dt({},Ma(c),{type:"venn",customLabelInfo:s})})}return r}function $ot(r){var t=r.chart,e=r.options,n=e.legend,i=e.sizeField;return t.legend(rc,n),t.legend(i,!1),r}function zot(r){var t=r.chart;return t.axis(!1),r}function Got(r){var t=r.options,e=r.chart,n=t.interactions;if(n){var i={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};ii(tt({},r,{options:{interactions:n.map(function(a){return A(A({},a),{type:i[a.type]||a.type})})}}))}return e.removeInteraction("legend-active"),e.removeInteraction("legend-highlight"),r}function Uot(r){return Tr(Lot,_n,Fot,Not,Bot,Ii({}),$ot,zot,Ia,Got,$n)(r)}(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="venn",e}return t.getDefaultOptions=function(){return bot},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Uot},t.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},t})(Rr);var xb="$$stock-range$$",U2="trend",Pte="up",Dte="down",Vot={showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(r,t,e){var n;if(r==="x"){var i=e[0];n=i?i.title:t}else n=t;return{position:r==="y"?"start":"end",content:n,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},Hot=tt({},Rr.getDefaultOptions(),{tooltip:Vot,interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function Rte(r,t){return Kn(r,function(e){if(Qe(t)){var n=t[0],i=t[1],a=t[2],o=t[3];e[U2]=e[n]<=e[i]?Pte:Dte,e[xb]=[e[n],e[i],e[a],e[o]]}return e})}function Wot(r){var t=r.chart,e=r.options,n=e.yField,i=e.data,a=e.risingFill,o=e.fallingFill,s=e.tooltip,l=e.stockStyle;t.data(Rte(i,n));var u=s;return u!==!1&&(u=tt({},{fields:n},u)),kR(tt({},r,{options:{schema:{shape:"candle",color:[a,o],style:l},yField:xb,seriesField:U2,rawFields:n,tooltip:u}})),r}function jot(r){var t,e,n=r.chart,i=r.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,u=(t={},t[l]={type:"timeCat",tickCount:6},t[U2]={values:[Pte,Dte]},t),c=tt(u,a,(e={},e[l]=Nn(o,Qo),e[xb]=Nn(s,Qo),e));return n.scale(c),r}function Yot(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField;return n===!1?t.axis(a,!1):t.axis(a,n),i===!1?t.axis(xb,!1):t.axis(xb,i),r}function Xot(r){var t=r.chart,e=r.options,n=e.tooltip;return n!==!1?t.tooltip(n):t.tooltip(!1),r}function qot(r){var t=r.chart,e=r.options,n=e.legend;return n?t.legend(U2,n):n===!1&&t.legend(!1),r}function Kot(r){Tr(_n,Wot,jot,Yot,Xot,qot,ii,$n,Pi(),T2)(r)}(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="stock",e}return t.getDefaultOptions=function(){return Hot},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Kot},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this.options.yField;this.chart.changeData(Rte(e,n))},t})(Rr);var qR,Mf="$$percentage$$",If="$$mappingValue$$",nc="$$conversion$$",KR="$$totalPercentage$$",wb="$$x$$",Sb="$$y$$",Zot={appendPadding:[0,80],minSize:0,maxSize:1,meta:(qR={},qR[If]={min:0,max:1,nice:!1},qR),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}};function Ote(r,t,e){var n=[],i=e.yField,a=e.maxSize,o=e.minSize,s=ae(fT(t,i),[i]),l=zt(a)?a:1,u=zt(o)?o:0;return n=Kn(r,function(c,f){var d=(c[i]||0)/s;return c[Mf]=d,c[If]=(l-u)*d+u,c[nc]=[ae(r,[f-1,i]),c[i]],c}),n}function ZR(r){return function(t){var e=t.chart,n=t.options,i=n.conversionTag,a=e.getOptions().data;if(i){var o=i.formatter;a.forEach(function(s,l){if(!(l<=0||Number.isNaN(s[If]))){var u=r(s,l,a,{top:!0,text:{content:Kt(o)?o(s,a):o,offsetX:i.offsetX,offsetY:i.offsetY,position:"end",autoRotate:!1,style:A({textAlign:"start",textBaseline:"middle"},i.style)}});e.annotation().line(u)}})}return t}}function Qot(r){var t=r.chart,e=r.options,n=e.data,i=n===void 0?[]:n,a=e.yField,o=e.maxSize,s=e.minSize,l=Ote(i,i,{yField:a,maxSize:o,minSize:s});return t.data(l),r}function Jot(r){var t=r.chart,e=r.options,n=e.xField,i=e.yField,a=e.color,o=e.tooltip,s=e.label,l=e.shape,u=l===void 0?"funnel":l,c=e.funnelStyle,f=e.state,d=js(o,[n,i]),h=d.fields,v=d.formatter;Jo({chart:t,options:{type:"interval",xField:n,yField:If,colorField:n,tooltipFields:Qe(h)&&h.concat([Mf,nc]),mapping:{shape:u,tooltip:v,color:a,style:c},label:s,state:f}});var p=ao(r.chart,"interval");return p.adjust("symmetric"),r}function est(r){var t=r.chart,e=r.options,n=e.isTransposed;return t.coordinate({type:"rect",actions:n?[]:[["transpose"],["scale",1,-1]]}),r}function tst(r){var t=r.options,e=t.maxSize,n=function(i,a,o,s){var l=e-(e-i[If])/2;return A(A({},s),{start:[a-.5,l],end:[a-.5,l+.05]})};return ZR(n)(r),r}function Lte(r){return Tr(Qot,Jot,est,tst)(r)}function rst(r){var t,e=r.chart,n=r.options,i=n.data,a=i===void 0?[]:i,o=n.yField;return e.data(a),e.scale((t={},t[o]={sync:!0},t)),r}function nst(r){var t=r.chart,e=r.options,n=e.data,i=e.xField,a=e.yField,o=e.color,s=e.compareField,l=e.isTransposed,u=e.tooltip,c=e.maxSize,f=e.minSize,d=e.label,h=e.funnelStyle,v=e.state;return t.facet("mirror",{fields:[s],transpose:!l,padding:l?0:[32,0,0,0],eachView:function(p,g){var m=l?g.rowIndex:g.columnIndex;l||p.coordinate({type:"rect",actions:[["transpose"],["scale",m===0?-1:1,-1]]});var y=Ote(g.data,n,{yField:a,maxSize:c,minSize:f});p.data(y);var b=js(u,[i,a,s]),x=b.fields,w=b.formatter,S=l?{offset:m===0?10:-23,position:m===0?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:m===0?"end":"start"}};Jo({chart:p,options:{type:"interval",xField:i,yField:If,colorField:i,tooltipFields:Qe(x)&&x.concat([Mf,nc]),mapping:{shape:"funnel",tooltip:w,color:o,style:h},label:d===!1?!1:tt({},S,d),state:v}})}}),r}function ist(r){var t=r.chart,e=r.options,n=e.conversionTag,i=e.isTransposed;return t.once("beforepaint",function(){t.views.forEach(function(a,o){var s=function(l,u,c,f){var d=o===0?-1:1;return tt({},f,{start:[u-.5,l[If]],end:[u-.5,l[If]+.05],text:i?{style:{textAlign:"start"}}:{offsetX:n!==!1?d*n.offsetX:0,style:{textAlign:o===0?"end":"start"}}})};ZR(s)(tt({},{chart:a,options:e}))})}),r}function ast(r){return Tr(rst,nst,ist)(r)}function ost(r){var t,e=r.chart,n=r.options,i=n.data,a=i===void 0?[]:i,o=n.yField;return e.data(a),e.scale((t={},t[o]={sync:!0},t)),r}function sst(r){var t=r.chart,e=r.options,n=e.seriesField,i=e.isTransposed;return t.facet("rect",{fields:[n],padding:[i?0:32,10,0,10],eachView:function(a,o){Lte(tt({},r,{chart:a,options:{data:o.data}}))}}),r}function lst(r){return Tr(ost,sst)(r)}function ust(r){var t=r.chart,e=r.options,n=e.data,i=n===void 0?[]:n,a=e.yField,o=Ya(i,function(u,c){return u+(c[a]||0)},0),s=fT(i,a)[a],l=Kn(i,function(u,c){var f=[],d=[];if(u[KR]=(u[a]||0)/o,c){var h=i[c-1][wb],v=i[c-1][Sb];f[0]=h[3],d[0]=v[3],f[1]=h[2],d[1]=v[2]}else f[0]=-.5,d[0]=1,f[1]=.5,d[1]=1;return d[2]=d[1]-u[KR],f[2]=(d[2]+1)/4,d[3]=d[2],f[3]=-f[2],u[wb]=f,u[Sb]=d,u[Mf]=(u[a]||0)/s,u[nc]=[ae(i,[c-1,a]),u[a]],u});return t.data(l),r}function cst(r){var t=r.chart,e=r.options,n=e.xField,i=e.yField,a=e.color,o=e.tooltip,s=e.label,l=e.funnelStyle,u=e.state,c=js(o,[n,i]),f=c.fields,d=c.formatter;return Jo({chart:t,options:{type:"polygon",xField:wb,yField:Sb,colorField:n,tooltipFields:Qe(f)&&f.concat([Mf,nc]),label:s,state:u,mapping:{tooltip:d,color:a,style:l}}}),r}function fst(r){var t=r.chart,e=r.options,n=e.isTransposed;return t.coordinate({type:"rect",actions:n?[["transpose"],["reflect","x"]]:[]}),r}function dst(r){var t=function(e,n,i,a){return A(A({},a),{start:[e[wb][1],e[Sb][1]],end:[e[wb][1]+.05,e[Sb][1]]})};return ZR(t)(r),r}function hst(r){return Tr(ust,cst,fst,dst)(r)}function vst(r){var t=r.options,e=t.compareField,n=t.xField,i=t.yField,a=t.locale,o=t.funnelStyle,s=t.data,l=C2(a),u={label:e?{fields:[n,i,e,Mf,nc],formatter:function(f){return""+f[i]}}:{fields:[n,i,Mf,nc],offset:0,position:"middle",formatter:function(f){return f[n]+" "+f[i]}},tooltip:{title:n,formatter:function(f){return{name:f[n],value:f[i]}}},conversionTag:{formatter:function(f){return l.get(["conversionTag","label"])+": "+_ee.apply(void 0,f[nc])}}},c;return(e||o)&&(c=function(f){return tt({},e&&{lineWidth:1,stroke:"#fff"},Kt(o)?o(f):o)}),tt({options:u},r,{options:{funnelStyle:c,data:Or(s)}})}function pst(r){var t=r.options,e=t.compareField,n=t.dynamicHeight,i=t.seriesField;return i?lst(r):e?ast(r):n?hst(r):Lte(r)}function gst(r){var t,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return Tr(Ii((t={},t[a]=n,t[o]=i,t)))(r)}function mst(r){var t=r.chart;return t.axis(!1),r}function yst(r){var t=r.chart,e=r.options,n=e.legend;return n===!1?t.legend(!1):t.legend(n),r}function Fte(r){return Tr(vst,pst,gst,mst,Ia,ii,yst,$n,_n,Pi())(r)}var bst=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="funnel",e}return t.getDefaultOptions=function(){return Zot},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Fte},t.prototype.setState=function(e,n,i){i===void 0&&(i=!0);var a=ub(this.chart);G(a,function(o){n(o.getData())&&o.setState(e,i)})},t.prototype.getStates=function(){var e=ub(this.chart),n=[];return G(e,function(i){var a=i.getData(),o=i.getStates();G(o,function(s){n.push({data:a,state:s,geometry:i.geometry,element:i})})}),n},t.CONVERSATION_FIELD=nc,t.PERCENT_FIELD=Mf,t.TOTAL_PERCENT_FIELD=KR,t}(Rr),xst="liquid";function Nte(r){return[{percent:r,type:xst}]}function wst(r){var t=r.chart,e=r.options,n=e.percent,i=e.liquidStyle,a=e.radius,o=e.outline,s=e.wave,l=e.shape;t.scale({percent:{min:0,max:1}}),t.data(Nte(n));var u=e.color||t.getTheme().defaultColor,c=tt({},r,{options:{xField:"type",yField:"percent",widthRatio:a,interval:{color:u,style:i,shape:"liquid-fill-gauge"}}}),f=oo(c).ext,d=f.geometry,h=t.getTheme().background,v={radius:a,outline:o,wave:s,shape:l,background:h};return d.customInfo(v),t.legend(!1),t.axis(!1),t.tooltip(!1),r}function Bte(r,t){var e=r.chart,n=r.options,i=n.statistic,a=n.percent,o=n.meta;e.getController("annotation").clear(!0);var s=ae(o,["percent","formatter"])||function(u){return(u*100).toFixed(2)+"%"},l=i.content;return l&&(l=tt({},l,{content:nt(l.content)?s(a):l.content})),x2(e,{statistic:A(A({},i),{content:l}),plotType:"liquid"},{percent:a}),t&&e.render(!0),r}function Sst(r){return Tr(_n,ws("liquidStyle"),wst,Bte,Ii({}),$n,ii)(r)}var Cst={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"},$te=5e3;function zte(r,t,e){return r+(t-r)*e}function Est(r){var t=A({opacity:1},r.style);return r.color&&!t.fill&&(t.fill=r.color),t}function _st(r){var t={fill:"#fff",fillOpacity:0,lineWidth:4},e=jt({},t,r.style);return r.color&&!e.stroke&&(e.stroke=r.color),zt(r.opacity)&&(e.opacity=e.strokeOpacity=r.opacity),e}function Tst(r,t,e,n){return t===0?[[r+1/2*e/Math.PI/2,n/2],[r+1/2*e/Math.PI,n],[r+e/4,n]]:t===1?[[r+1/2*e/Math.PI/2*(Math.PI-2),n],[r+1/2*e/Math.PI/2*(Math.PI-1),n/2],[r+e/4,0]]:t===2?[[r+1/2*e/Math.PI/2,-n/2],[r+1/2*e/Math.PI,-n],[r+e/4,-n]]:[[r+1/2*e/Math.PI/2*(Math.PI-2),-n],[r+1/2*e/Math.PI/2*(Math.PI-1),-n/2],[r+e/4,0]]}function Ast(r,t,e,n,i,a,o){for(var s=Math.ceil(2*r/e*4)*4,l=[],u=n;u<-Math.PI*2;)u+=Math.PI*2;for(;u>0;)u-=Math.PI*2;u=u/Math.PI/2*e;var c=a-r+u-r*2;l.push(["M",c,t]);for(var f=0,d=0;d<s;++d){var h=d%4,v=Tst(d*e/4,h,e,i);l.push(["C",v[0][0]+c,-v[0][1]+t,v[1][0]+c,-v[1][1]+t,v[2][0]+c,-v[2][1]+t]),d===s-1&&(f=v[2][0])}return l.push(["L",f+c,o+r]),l.push(["L",c,o+r]),l.push(["Z"]),l}function kst(r,t,e,n,i,a,o,s,l){for(var u=i.fill,c=i.opacity,f=o.getBBox(),d=f.maxX-f.minX,h=f.maxY-f.minY,v=0;v<n;v++){var p=n<=1?0:v/(n-1),g=a.addShape("path",{name:"waterwave-path",attrs:{path:Ast(s,f.minY+h*e,l,0,d/32,r,t),fill:u,opacity:zte(.2,.9,p)*c}});try{var m=PR([["t",l,0]]);g.stopAnimate(),g.animate({matrix:m},{duration:zte(.5*$te,$te,p),repeat:!0})}catch{console.warn("off-screen group animate error!")}}}function Mst(r,t,e,n){var i=e*2/3,a=Math.max(i,n),o=i/2,s=r,l=o+t-a/2,u=Math.asin(o/((a-o)*.85)),c=Math.sin(u)*o,f=Math.cos(u)*o,d=s-f,h=l+c,v=r,p=l+o/Math.sin(u);return`
      M `+d+" "+h+`
      A `+o+" "+o+" 0 1 1 "+(d+f*2)+" "+h+`
      Q `+v+" "+p+" "+r+" "+(t+a/2)+`
      Q `+v+" "+p+" "+d+" "+h+`
      Z 
    `}function Ist(r,t,e,n){var i=e/2,a=n/2;return`
      M `+r+" "+(t-a)+` 
      a `+i+" "+a+" 0 1 0 0 "+a*2+`
      a `+i+" "+a+" 0 1 0 0 "+-a*2+`
      Z
    `}function Pst(r,t,e,n){var i=n/2,a=e/2;return`
      M `+r+" "+(t-i)+`
      L `+(r+a)+" "+t+`
      L `+r+" "+(t+i)+`
      L `+(r-a)+" "+t+`
      Z
    `}function Dst(r,t,e,n){var i=n/2,a=e/2;return`
      M `+r+" "+(t-i)+`
      L `+(r+a)+" "+(t+i)+`
      L `+(r-a)+" "+(t+i)+`
      Z
    `}function Rst(r,t,e,n){var i=.618,a=n/2,o=e/2*i;return`
      M `+(r-o)+" "+(t-a)+`
      L `+(r+o)+" "+(t-a)+`
      L `+(r+o)+" "+(t+a)+`
      L `+(r-o)+" "+(t+a)+`
      Z
    `}In("interval","liquid-fill-gauge",{draw:function(r,t){var e=.5,n=.5,i=r.customInfo,a=i,o=a.radius,s=a.shape,l=a.background,u=i.outline,c=i.wave,f=u.border,d=u.distance,h=c.count,v=c.length,p=Ya(r.points,function(I,P){return Math.min(I,P.x)},1/0),g=this.parsePoint({x:e,y:n}),m=this.parsePoint({x:p,y:n}),y=g.x-m.x,b=Math.min(y,m.y*o),x=Est(r),w=_st(jt({},r,u)),S=b-f/2,C={pin:Mst,circle:Ist,diamond:Pst,triangle:Dst,rect:Rst},_=typeof s=="function"?s:C[s]||C.circle,T=_(g.x,g.y,S*2,S*2),E=t.addGroup({name:"waves"}),k=E.setClip({type:"path",attrs:{path:T}});return kst(g.x,g.y,1-r.points[1].y,h,x,E,k,b*2,v),t.addShape("path",{name:"distance",attrs:{path:T,fill:"transparent",lineWidth:f+d*2,stroke:l==="transparent"?"#fff":l}}),t.addShape("path",{name:"wrap",attrs:jt(w,{path:T,fill:"transparent",lineWidth:f})}),t}});(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="liquid",e}return t.getDefaultOptions=function(){return Cst},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.changeData=function(e){this.chart.emit(Hr.BEFORE_CHANGE_DATA,pi.fromData(this.chart,Hr.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(Nte(e)),Bte({chart:this.chart,options:this.options},!0),this.chart.emit(Hr.AFTER_CHANGE_DATA,pi.fromData(this.chart,Hr.AFTER_CHANGE_DATA,null))},t.prototype.getSchemaAdaptor=function(){return Sst},t})(Rr);function Gte(r){var t=r.data,e=r.xField,n=r.measureField,i=r.rangeField,a=r.targetField,o=r.layout,s=[],l=[];t.forEach(function(f,d){var h;f[i].sort(function(v,p){return v-p}),f[i].forEach(function(v,p){var g,m=p===0?v:f[i][p]-f[i][p-1];s.push((g={rKey:i+"_"+p},g[e]=e?f[e]:String(d),g[i]=m,g))}),f[n].forEach(function(v,p){var g;s.push((g={mKey:f[n].length>1?n+"_"+p:""+n},g[e]=e?f[e]:String(d),g[n]=v,g))}),s.push((h={tKey:""+a},h[e]=e?f[e]:String(d),h[a]=f[a],h)),l.push(f[i],f[n],f[a])});var u=Math.min.apply(Math,l.flat(1/0)),c=Math.max.apply(Math,l.flat(1/0));return u=u>0?0:u,o==="vertical"&&s.reverse(),{min:u,max:c,ds:s}}function Ost(r){var t=r.chart,e=r.options,n=e.bulletStyle,i=e.targetField,a=e.rangeField,o=e.measureField,s=e.xField,l=e.color,u=e.layout,c=e.size,f=e.label,d=Gte(e),h=d.min,v=d.max,p=d.ds;t.data(p);var g=tt({},r,{options:{xField:s,yField:a,seriesField:"rKey",isStack:!0,label:ae(f,"range"),interval:{color:ae(l,"range"),style:ae(n,"range"),size:ae(c,"range")}}});oo(g),t.geometries[0].tooltip(!1);var m=tt({},r,{options:{xField:s,yField:o,seriesField:"mKey",isStack:!0,label:ae(f,"measure"),interval:{color:ae(l,"measure"),style:ae(n,"measure"),size:ae(c,"measure")}}});oo(m);var y=tt({},r,{options:{xField:s,yField:i,seriesField:"tKey",label:ae(f,"target"),point:{color:ae(l,"target"),style:ae(n,"target"),size:Kt(ae(c,"target"))?function(b){return ae(c,"target")(b)/2}:ae(c,"target")/2,shape:u==="horizontal"?"line":"hyphen"}}});return Ss(y),u==="horizontal"&&t.coordinate().transpose(),A(A({},r),{ext:{data:{min:h,max:v}}})}function Ute(r){var t,e,n=r.options,i=r.ext,a=n.xAxis,o=n.yAxis,s=n.targetField,l=n.rangeField,u=n.measureField,c=n.xField,f=i.data;return Tr(Ii((t={},t[c]=a,t[u]=o,t),(e={},e[u]={min:f==null?void 0:f.min,max:f==null?void 0:f.max,sync:!0},e[s]={sync:""+u},e[l]={sync:""+u},e)))(r)}function Lst(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.measureField,s=e.rangeField,l=e.targetField;return t.axis(""+s,!1),t.axis(""+l,!1),n===!1?t.axis(""+a,!1):t.axis(""+a,n),i===!1?t.axis(""+o,!1):t.axis(""+o,i),r}function Fst(r){var t=r.chart,e=r.options,n=e.legend;return t.removeInteraction("legend-filter"),t.legend(n),t.legend("rKey",!1),t.legend("mKey",!1),t.legend("tKey",!1),r}function Nst(r){var t=r.chart,e=r.options,n=e.label,i=e.measureField,a=e.targetField,o=e.rangeField,s=t.geometries,l=s[0],u=s[1],c=s[2];return ae(n,"range")?l.label(""+o,A({layout:[{type:"limit-in-plot"}]},Ma(n.range))):l.label(!1),ae(n,"measure")?u.label(""+i,A({layout:[{type:"limit-in-plot"}]},Ma(n.measure))):u.label(!1),ae(n,"target")?c.label(""+a,A({layout:[{type:"limit-in-plot"}]},Ma(n.target))):c.label(!1),r}function Bst(r){Tr(Ost,Ute,Lst,Fst,_n,Nst,Ia,ii,$n)(r)}var $st=tt({},Rr.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}});(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="bullet",e}return t.getDefaultOptions=function(){return $st},t.prototype.changeData=function(e){this.updateOption({data:e});var n=Gte(this.options),i=n.min,a=n.max,o=n.ds;Ute({options:this.options,ext:{data:{min:i,max:a}},chart:this.chart}),this.chart.changeData(o)},t.prototype.getSchemaAdaptor=function(){return Bst},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t})(Rr);var Vte="nodeIndex",Hte="childNodeCount",QR="nodeAncestor",JR="Invalid field: it must be a string!";function eO(r,t){var e=r.field,n=r.fields;if(ot(e))return e;if(Qe(e))return console.warn(JR),e[0];if(console.warn(JR+" will try to get fields instead."),ot(n))return n;if(Qe(n)&&n.length)return n[0];if(t)return t;throw new TypeError(JR)}function tO(r){var t=[];if(r&&r.each){var e,n;r.each(function(i){var a,o;i.parent!==e?(e=i.parent,n=0):n+=1;var s=ya((((a=i.ancestors)===null||a===void 0?void 0:a.call(i))||[]).map(function(l){return t.find(function(u){return u.name===l.name})||l}),function(l){var u=l.depth;return u>0&&u<i.depth});i[QR]=s,i[Hte]=((o=i.children)===null||o===void 0?void 0:o.length)||0,i[Vte]=n,t.push(i)})}else r&&r.eachNode&&r.eachNode(function(i){t.push(i)});return t}var rO="ancestor-node",Wte="value",Cb="path",zst=[Cb,Vte,QR,Hte,"name","depth","height"],Gst=tt({},Rr.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}}),jte=4,Ust=0,Yte=5,Xte="drilldown-bread-crumb",Vst={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},Eb="hierarchy-data-transform-params",Hst=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.name="drill-down",e.historyCache=[],e.breadCrumbGroup=null,e.breadCrumbCfg=Vst,e}return t.prototype.click=function(){var e=ae(this.context,["event","data","data"]);if(!e)return!1;this.drill(e),this.drawBreadCrumb()},t.prototype.resetPosition=function(){if(!!this.breadCrumbGroup){var e=this.context.view.getCoordinate(),n=this.breadCrumbGroup,i=n.getBBox(),a=this.getButtonCfg().position,o={x:e.start.x,y:e.end.y-(i.height+Yte*2)};e.isPolar&&(o={x:0,y:0}),a==="bottom-left"&&(o={x:e.start.x,y:e.start.y});var s=Ko.transform(null,[["t",o.x+Ust,o.y+i.height+Yte]]);n.setMatrix(s)}},t.prototype.back=function(){la(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},t.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},t.prototype.drill=function(e){var n=this.context.view,i=ae(n,["interactions","drill-down","cfg","transformData"],function(u){return u}),a=i(A({data:e.data},e[Eb]));n.changeData(a);for(var o=[],s=e;s;){var l=s.data;o.unshift({id:l.name+"_"+s.height+"_"+s.depth,name:l.name,children:i(A({data:l},e[Eb]))}),s=s.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(o)},t.prototype.backTo=function(e){if(!(!e||e.length<=0)){var n=this.context.view,i=qi(e).children;n.changeData(i),e.length>1?(this.historyCache=e,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},t.prototype.getButtonCfg=function(){var e=this.context.view,n=ae(e,["interactions","drill-down","cfg","drillDownConfig"]);return tt(this.breadCrumbCfg,n==null?void 0:n.breadCrumb,this.cfg)},t.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},t.prototype.drawBreadCrumbGroup=function(){var e=this,n=this.getButtonCfg(),i=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:Xte});var a=0;i.forEach(function(o,s){var l=e.breadCrumbGroup.addShape({type:"text",id:o.id,name:Xte+"_"+o.name+"_text",attrs:A(A({text:s===0&&!nt(n.rootText)?n.rootText:o.name},n.textStyle),{x:a,y:0})}),u=l.getBBox();if(a+=u.width+jte,l.on("click",function(d){var h,v=d.target.get("id");if(v!==((h=qi(i))===null||h===void 0?void 0:h.id)){var p=i.slice(0,i.findIndex(function(g){return g.id===v})+1);e.backTo(p)}}),l.on("mouseenter",function(d){var h,v=d.target.get("id");v!==((h=qi(i))===null||h===void 0?void 0:h.id)?l.attr(n.activeTextStyle):l.attr({cursor:"default"})}),l.on("mouseleave",function(){l.attr(n.textStyle)}),s<i.length-1){var c=e.breadCrumbGroup.addShape({type:"text",name:n.name+"_"+o.name+"_divider",attrs:A(A({text:n.dividerText},n.textStyle),{x:a,y:0})}),f=c.getBBox();a+=f.width+jte}})},t.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},t.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),r.prototype.destroy.call(this)},t}(vi);function Wst(r,t){return r.parent===t.parent?1:2}function jst(r){return r.reduce(Yst,0)/r.length}function Yst(r,t){return r+t.x}function Xst(r){return 1+r.reduce(qst,0)}function qst(r,t){return Math.max(r,t.y)}function Kst(r){for(var t;t=r.children;)r=t[0];return r}function Zst(r){for(var t;t=r.children;)r=t[t.length-1];return r}function Qst(){var r=Wst,t=1,e=1,n=!1;function i(a){var o,s=0;a.eachAfter(function(d){var h=d.children;h?(d.x=jst(h),d.y=Xst(h)):(d.x=o?s+=r(d,o):0,d.y=0,o=d)});var l=Kst(a),u=Zst(a),c=l.x-r(l,u)/2,f=u.x+r(u,l)/2;return a.eachAfter(n?function(d){d.x=(d.x-a.x)*t,d.y=(a.y-d.y)*e}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(a.y?d.y/a.y:1))*e})}return i.separation=function(a){return arguments.length?(r=a,i):r},i.size=function(a){return arguments.length?(n=!1,t=+a[0],e=+a[1],i):n?null:[t,e]},i.nodeSize=function(a){return arguments.length?(n=!0,t=+a[0],e=+a[1],i):n?[t,e]:null},i}function Jst(r){var t=0,e=r.children,n=e&&e.length;if(!n)t=1;else for(;--n>=0;)t+=e[n].value;r.value=t}function elt(){return this.eachAfter(Jst)}function tlt(r,t){let e=-1;for(const n of this)r.call(t,n,++e,this);return this}function rlt(r,t){for(var e=this,n=[e],i,a,o=-1;e=n.pop();)if(r.call(t,e,++o,this),i=e.children)for(a=i.length-1;a>=0;--a)n.push(i[a]);return this}function nlt(r,t){for(var e=this,n=[e],i=[],a,o,s,l=-1;e=n.pop();)if(i.push(e),a=e.children)for(o=0,s=a.length;o<s;++o)n.push(a[o]);for(;e=i.pop();)r.call(t,e,++l,this);return this}function ilt(r,t){let e=-1;for(const n of this)if(r.call(t,n,++e,this))return n}function alt(r){return this.eachAfter(function(t){for(var e=+r(t.data)||0,n=t.children,i=n&&n.length;--i>=0;)e+=n[i].value;t.value=e})}function olt(r){return this.eachBefore(function(t){t.children&&t.children.sort(r)})}function slt(r){for(var t=this,e=llt(t,r),n=[t];t!==e;)t=t.parent,n.push(t);for(var i=n.length;r!==e;)n.splice(i,0,r),r=r.parent;return n}function llt(r,t){if(r===t)return r;var e=r.ancestors(),n=t.ancestors(),i=null;for(r=e.pop(),t=n.pop();r===t;)i=r,r=e.pop(),t=n.pop();return i}function ult(){for(var r=this,t=[r];r=r.parent;)t.push(r);return t}function clt(){return Array.from(this)}function flt(){var r=[];return this.eachBefore(function(t){t.children||r.push(t)}),r}function dlt(){var r=this,t=[];return r.each(function(e){e!==r&&t.push({source:e.parent,target:e})}),t}function*hlt(){var r=this,t,e=[r],n,i,a;do for(t=e.reverse(),e=[];r=t.pop();)if(yield r,n=r.children)for(i=0,a=n.length;i<a;++i)e.push(n[i]);while(e.length)}function xg(r,t){r instanceof Map?(r=[void 0,r],t===void 0&&(t=glt)):t===void 0&&(t=plt);for(var e=new wg(r),n,i=[e],a,o,s,l;n=i.pop();)if((o=t(n.data))&&(l=(o=Array.from(o)).length))for(n.children=o,s=l-1;s>=0;--s)i.push(a=o[s]=new wg(o[s])),a.parent=n,a.depth=n.depth+1;return e.eachBefore(qte)}function vlt(){return xg(this).eachBefore(mlt)}function plt(r){return r.children}function glt(r){return Array.isArray(r)?r[1]:null}function mlt(r){r.data.value!==void 0&&(r.value=r.data.value),r.data=r.data.data}function qte(r){var t=0;do r.height=t;while((r=r.parent)&&r.height<++t)}function wg(r){this.data=r,this.depth=this.height=0,this.parent=null}wg.prototype=xg.prototype={constructor:wg,count:elt,each:tlt,eachAfter:nlt,eachBefore:rlt,find:ilt,sum:alt,sort:olt,path:slt,ancestors:ult,descendants:clt,leaves:flt,links:dlt,copy:vlt,[Symbol.iterator]:hlt};function ylt(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function blt(r){for(var t=r.length,e,n;t;)n=Math.random()*t--|0,e=r[t],r[t]=r[n],r[n]=e;return r}function Kte(r){for(var t=0,e=(r=blt(Array.from(r))).length,n=[],i,a;t<e;)i=r[t],a&&Zte(a,i)?++t:(a=wlt(n=xlt(n,i)),t=0);return a}function xlt(r,t){var e,n;if(nO(t,r))return[t];for(e=0;e<r.length;++e)if(V2(t,r[e])&&nO(_b(r[e],t),r))return[r[e],t];for(e=0;e<r.length-1;++e)for(n=e+1;n<r.length;++n)if(V2(_b(r[e],r[n]),t)&&V2(_b(r[e],t),r[n])&&V2(_b(r[n],t),r[e])&&nO(Qte(r[e],r[n],t),r))return[r[e],r[n],t];throw new Error}function V2(r,t){var e=r.r-t.r,n=t.x-r.x,i=t.y-r.y;return e<0||e*e<n*n+i*i}function Zte(r,t){var e=r.r-t.r+Math.max(r.r,t.r,1)*1e-9,n=t.x-r.x,i=t.y-r.y;return e>0&&e*e>n*n+i*i}function nO(r,t){for(var e=0;e<t.length;++e)if(!Zte(r,t[e]))return!1;return!0}function wlt(r){switch(r.length){case 1:return Slt(r[0]);case 2:return _b(r[0],r[1]);case 3:return Qte(r[0],r[1],r[2])}}function Slt(r){return{x:r.x,y:r.y,r:r.r}}function _b(r,t){var e=r.x,n=r.y,i=r.r,a=t.x,o=t.y,s=t.r,l=a-e,u=o-n,c=s-i,f=Math.sqrt(l*l+u*u);return{x:(e+a+l/f*c)/2,y:(n+o+u/f*c)/2,r:(f+i+s)/2}}function Qte(r,t,e){var n=r.x,i=r.y,a=r.r,o=t.x,s=t.y,l=t.r,u=e.x,c=e.y,f=e.r,d=n-o,h=n-u,v=i-s,p=i-c,g=l-a,m=f-a,y=n*n+i*i-a*a,b=y-o*o-s*s+l*l,x=y-u*u-c*c+f*f,w=h*v-d*p,S=(v*x-p*b)/(w*2)-n,C=(p*g-v*m)/w,_=(h*b-d*x)/(w*2)-i,T=(d*m-h*g)/w,E=C*C+T*T-1,k=2*(a+S*C+_*T),I=S*S+_*_-a*a,P=-(E?(k+Math.sqrt(k*k-4*E*I))/(2*E):I/k);return{x:n+S+C*P,y:i+_+T*P,r:P}}function Jte(r,t,e){var n=r.x-t.x,i,a,o=r.y-t.y,s,l,u=n*n+o*o;u?(a=t.r+e.r,a*=a,l=r.r+e.r,l*=l,a>l?(i=(u+l-a)/(2*u),s=Math.sqrt(Math.max(0,l/u-i*i)),e.x=r.x-i*n-s*o,e.y=r.y-i*o+s*n):(i=(u+a-l)/(2*u),s=Math.sqrt(Math.max(0,a/u-i*i)),e.x=t.x+i*n-s*o,e.y=t.y+i*o+s*n)):(e.x=t.x+e.r,e.y=t.y)}function ere(r,t){var e=r.r+t.r-1e-6,n=t.x-r.x,i=t.y-r.y;return e>0&&e*e>n*n+i*i}function tre(r){var t=r._,e=r.next._,n=t.r+e.r,i=(t.x*e.r+e.x*t.r)/n,a=(t.y*e.r+e.y*t.r)/n;return i*i+a*a}function H2(r){this._=r,this.next=null,this.previous=null}function rre(r){if(!(i=(r=ylt(r)).length))return 0;var t,e,n,i,a,o,s,l,u,c,f;if(t=r[0],t.x=0,t.y=0,!(i>1))return t.r;if(e=r[1],t.x=-e.r,e.x=t.r,e.y=0,!(i>2))return t.r+e.r;Jte(e,t,n=r[2]),t=new H2(t),e=new H2(e),n=new H2(n),t.next=n.previous=e,e.next=t.previous=n,n.next=e.previous=t;e:for(s=3;s<i;++s){Jte(t._,e._,n=r[s]),n=new H2(n),l=e.next,u=t.previous,c=e._.r,f=t._.r;do if(c<=f){if(ere(l._,n._)){e=l,t.next=e,e.previous=t,--s;continue e}c+=l._.r,l=l.next}else{if(ere(u._,n._)){t=u,t.next=e,e.previous=t,--s;continue e}f+=u._.r,u=u.previous}while(l!==u.next);for(n.previous=t,n.next=e,t.next=e.previous=e=n,a=tre(t);(n=n.next)!==e;)(o=tre(n))<a&&(t=n,a=o);e=t.next}for(t=[e._],n=e;(n=n.next)!==e;)t.push(n._);for(n=Kte(t),s=0;s<i;++s)t=r[s],t.x-=n.x,t.y-=n.y;return n.r}function Clt(r){return rre(r),r}function Elt(r){return r==null?null:W2(r)}function W2(r){if(typeof r!="function")throw new Error;return r}function Oh(){return 0}function Sg(r){return function(){return r}}function _lt(r){return Math.sqrt(r.value)}function nre(){var r=null,t=1,e=1,n=Oh;function i(a){return a.x=t/2,a.y=e/2,r?a.eachBefore(ire(r)).eachAfter(iO(n,.5)).eachBefore(are(1)):a.eachBefore(ire(_lt)).eachAfter(iO(Oh,1)).eachAfter(iO(n,a.r/Math.min(t,e))).eachBefore(are(Math.min(t,e)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(r=Elt(a),i):r},i.size=function(a){return arguments.length?(t=+a[0],e=+a[1],i):[t,e]},i.padding=function(a){return arguments.length?(n=typeof a=="function"?a:Sg(+a),i):n},i}function ire(r){return function(t){t.children||(t.r=Math.max(0,+r(t)||0))}}function iO(r,t){return function(e){if(n=e.children){var n,i,a=n.length,o=r(e)*t||0,s;if(o)for(i=0;i<a;++i)n[i].r+=o;if(s=rre(n),o)for(i=0;i<a;++i)n[i].r-=o;e.r=s+o}}}function are(r){return function(t){var e=t.parent;t.r*=r,e&&(t.x=e.x+r*t.x,t.y=e.y+r*t.y)}}function ore(r){r.x0=Math.round(r.x0),r.y0=Math.round(r.y0),r.x1=Math.round(r.x1),r.y1=Math.round(r.y1)}function Tb(r,t,e,n,i){for(var a=r.children,o,s=-1,l=a.length,u=r.value&&(n-t)/r.value;++s<l;)o=a[s],o.y0=e,o.y1=i,o.x0=t,o.x1=t+=o.value*u}function sre(){var r=1,t=1,e=0,n=!1;function i(o){var s=o.height+1;return o.x0=o.y0=e,o.x1=r,o.y1=t/s,o.eachBefore(a(t,s)),n&&o.eachBefore(ore),o}function a(o,s){return function(l){l.children&&Tb(l,l.x0,o*(l.depth+1)/s,l.x1,o*(l.depth+2)/s);var u=l.x0,c=l.y0,f=l.x1-e,d=l.y1-e;f<u&&(u=f=(u+f)/2),d<c&&(c=d=(c+d)/2),l.x0=u,l.y0=c,l.x1=f,l.y1=d}}return i.round=function(o){return arguments.length?(n=!!o,i):n},i.size=function(o){return arguments.length?(r=+o[0],t=+o[1],i):[r,t]},i.padding=function(o){return arguments.length?(e=+o,i):e},i}var Tlt={depth:-1},lre={};function Alt(r){return r.id}function klt(r){return r.parentId}function Mlt(){var r=Alt,t=klt;function e(n){var i=Array.from(n),a=i.length,o,s,l,u,c,f,d,h=new Map;for(s=0;s<a;++s)o=i[s],c=i[s]=new wg(o),(f=r(o,s,n))!=null&&(f+="")&&(d=c.id=f,h.set(d,h.has(d)?lre:c)),(f=t(o,s,n))!=null&&(f+="")&&(c.parent=f);for(s=0;s<a;++s)if(c=i[s],f=c.parent){if(u=h.get(f),!u)throw new Error("missing: "+f);if(u===lre)throw new Error("ambiguous: "+f);u.children?u.children.push(c):u.children=[c],c.parent=u}else{if(l)throw new Error("multiple roots");l=c}if(!l)throw new Error("no root");if(l.parent=Tlt,l.eachBefore(function(v){v.depth=v.parent.depth+1,--a}).eachBefore(qte),l.parent=null,a>0)throw new Error("cycle");return l}return e.id=function(n){return arguments.length?(r=W2(n),e):r},e.parentId=function(n){return arguments.length?(t=W2(n),e):t},e}function Ilt(r,t){return r.parent===t.parent?1:2}function aO(r){var t=r.children;return t?t[0]:r.t}function oO(r){var t=r.children;return t?t[t.length-1]:r.t}function Plt(r,t,e){var n=e/(t.i-r.i);t.c-=n,t.s+=e,r.c+=n,t.z+=e,t.m+=e}function Dlt(r){for(var t=0,e=0,n=r.children,i=n.length,a;--i>=0;)a=n[i],a.z+=t,a.m+=t,t+=a.s+(e+=a.c)}function Rlt(r,t,e){return r.a.parent===t.parent?r.a:e}function j2(r,t){this._=r,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}j2.prototype=Object.create(wg.prototype);function Olt(r){for(var t=new j2(r,0),e,n=[t],i,a,o,s;e=n.pop();)if(a=e._.children)for(e.children=new Array(s=a.length),o=s-1;o>=0;--o)n.push(i=e.children[o]=new j2(a[o],o)),i.parent=e;return(t.parent=new j2(null,0)).children=[t],t}function Llt(){var r=Ilt,t=1,e=1,n=null;function i(u){var c=Olt(u);if(c.eachAfter(a),c.parent.m=-c.z,c.eachBefore(o),n)u.eachBefore(l);else{var f=u,d=u,h=u;u.eachBefore(function(y){y.x<f.x&&(f=y),y.x>d.x&&(d=y),y.depth>h.depth&&(h=y)});var v=f===d?1:r(f,d)/2,p=v-f.x,g=t/(d.x+v+p),m=e/(h.depth||1);u.eachBefore(function(y){y.x=(y.x+p)*g,y.y=y.depth*m})}return u}function a(u){var c=u.children,f=u.parent.children,d=u.i?f[u.i-1]:null;if(c){Dlt(u);var h=(c[0].z+c[c.length-1].z)/2;d?(u.z=d.z+r(u._,d._),u.m=u.z-h):u.z=h}else d&&(u.z=d.z+r(u._,d._));u.parent.A=s(u,d,u.parent.A||f[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,c,f){if(c){for(var d=u,h=u,v=c,p=d.parent.children[0],g=d.m,m=h.m,y=v.m,b=p.m,x;v=oO(v),d=aO(d),v&&d;)p=aO(p),h=oO(h),h.a=u,x=v.z+y-d.z-g+r(v._,d._),x>0&&(Plt(Rlt(v,u,f),u,x),g+=x,m+=x),y+=v.m,g+=d.m,b+=p.m,m+=h.m;v&&!oO(h)&&(h.t=v,h.m+=y-m),d&&!aO(p)&&(p.t=d,p.m+=g-b,f=u)}return f}function l(u){u.x*=t,u.y=u.depth*e}return i.separation=function(u){return arguments.length?(r=u,i):r},i.size=function(u){return arguments.length?(n=!1,t=+u[0],e=+u[1],i):n?null:[t,e]},i.nodeSize=function(u){return arguments.length?(n=!0,t=+u[0],e=+u[1],i):n?[t,e]:null},i}function Y2(r,t,e,n,i){for(var a=r.children,o,s=-1,l=a.length,u=r.value&&(i-e)/r.value;++s<l;)o=a[s],o.x0=t,o.x1=n,o.y0=e,o.y1=e+=o.value*u}var ure=(1+Math.sqrt(5))/2;function cre(r,t,e,n,i,a){for(var o=[],s=t.children,l,u,c=0,f=0,d=s.length,h,v,p=t.value,g,m,y,b,x,w,S;c<d;){h=i-e,v=a-n;do g=s[f++].value;while(!g&&f<d);for(m=y=g,w=Math.max(v/h,h/v)/(p*r),S=g*g*w,x=Math.max(y/S,S/m);f<d;++f){if(g+=u=s[f].value,u<m&&(m=u),u>y&&(y=u),S=g*g*w,b=Math.max(y/S,S/m),b>x){g-=u;break}x=b}o.push(l={value:g,dice:h<v,children:s.slice(c,f)}),l.dice?Tb(l,e,n,i,p?n+=v*g/p:a):Y2(l,e,n,p?e+=h*g/p:i,a),p-=g,c=f}return o}var fre=function r(t){function e(n,i,a,o,s){cre(t,n,i,a,o,s)}return e.ratio=function(n){return r((n=+n)>1?n:1)},e}(ure);function dre(){var r=fre,t=!1,e=1,n=1,i=[0],a=Oh,o=Oh,s=Oh,l=Oh,u=Oh;function c(d){return d.x0=d.y0=0,d.x1=e,d.y1=n,d.eachBefore(f),i=[0],t&&d.eachBefore(ore),d}function f(d){var h=i[d.depth],v=d.x0+h,p=d.y0+h,g=d.x1-h,m=d.y1-h;g<v&&(v=g=(v+g)/2),m<p&&(p=m=(p+m)/2),d.x0=v,d.y0=p,d.x1=g,d.y1=m,d.children&&(h=i[d.depth+1]=a(d)/2,v+=u(d)-h,p+=o(d)-h,g-=s(d)-h,m-=l(d)-h,g<v&&(v=g=(v+g)/2),m<p&&(p=m=(p+m)/2),r(d,v,p,g,m))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(e=+d[0],n=+d[1],c):[e,n]},c.tile=function(d){return arguments.length?(r=W2(d),c):r},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(a=typeof d=="function"?d:Sg(+d),c):a},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:Sg(+d),c):o},c.paddingRight=function(d){return arguments.length?(s=typeof d=="function"?d:Sg(+d),c):s},c.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:Sg(+d),c):l},c.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:Sg(+d),c):u},c}function Flt(r,t,e,n,i){var a=r.children,o,s=a.length,l,u=new Array(s+1);for(u[0]=l=o=0;o<s;++o)u[o+1]=l+=a[o].value;c(0,s,r.value,t,e,n,i);function c(f,d,h,v,p,g,m){if(f>=d-1){var y=a[f];y.x0=v,y.y0=p,y.x1=g,y.y1=m;return}for(var b=u[f],x=h/2+b,w=f+1,S=d-1;w<S;){var C=w+S>>>1;u[C]<x?w=C+1:S=C}x-u[w-1]<u[w]-x&&f+1<w&&--w;var _=u[w]-b,T=h-_;if(g-v>m-p){var E=h?(v*T+g*_)/h:g;c(f,w,_,v,p,E,m),c(w,d,T,E,p,g,m)}else{var k=h?(p*T+m*_)/h:m;c(f,w,_,v,p,g,k),c(w,d,T,v,k,g,m)}}}function Nlt(r,t,e,n,i){(r.depth&1?Y2:Tb)(r,t,e,n,i)}var Blt=function r(t){function e(n,i,a,o,s){if((l=n._squarify)&&l.ratio===t)for(var l,u,c,f,d=-1,h,v=l.length,p=n.value;++d<v;){for(u=l[d],c=u.children,f=u.value=0,h=c.length;f<h;++f)u.value+=c[f].value;u.dice?Tb(u,i,a,o,p?a+=(s-a)*u.value/p:s):Y2(u,i,a,p?i+=(o-i)*u.value/p:o,s),p-=u.value}else n._squarify=l=cre(t,n,i,a,o,s),l.ratio=t}return e.ratio=function(n){return r((n=+n)>1?n:1)},e}(ure),hre=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",cluster:Qst,hierarchy:xg,pack:nre,packSiblings:Clt,packEnclose:Kte,partition:sre,stratify:Mlt,tree:Llt,treemap:dre,treemapBinary:Flt,treemapDice:Tb,treemapSlice:Y2,treemapSliceDice:Nlt,treemapSquarify:fre,treemapResquarify:Blt}),$lt={field:"value",size:[1,1],round:!1,padding:0,sort:function(r,t){return t.value-r.value},as:["x","y"],ignoreParentValue:!0};function zlt(r,t){t=jt({},$lt,t);var e=t.as;if(!Qe(e)||e.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var n;try{n=eO(t)}catch(l){console.warn(l)}var i=function(l){return sre().size(t.size).round(t.round).padding(t.padding)(xg(l).sum(function(u){return la(u.children)?t.ignoreParentValue?0:u[n]-Ya(u.children,function(c,f){return c+f[n]},0):u[n]}).sort(t.sort))},a=i(r),o=e[0],s=e[1];return a.each(function(l){var u,c;l[o]=[l.x0,l.x1,l.x1,l.x0],l[s]=[l.y1,l.y1,l.y0,l.y0],l.name=l.name||((u=l.data)===null||u===void 0?void 0:u.name)||((c=l.data)===null||c===void 0?void 0:c.label),l.data.name=l.name,["x0","x1","y0","y1"].forEach(function(f){e.indexOf(f)===-1&&delete l[f]})}),tO(a)}var Glt={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(r,t){return t.value-r.value},ratio:.5*(1+Math.sqrt(5))};function Ult(r,t){return r==="treemapSquarify"?hre[r].ratio(t):hre[r]}function vre(r,t){t=jt({},Glt,t);var e=t.as;if(!Qe(e)||e.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var n;try{n=eO(t)}catch(u){console.warn(u)}var i=Ult(t.tile,t.ratio),a=function(u){return dre().tile(i).size(t.size).round(t.round).padding(t.padding).paddingInner(t.paddingInner).paddingOuter(t.paddingOuter).paddingTop(t.paddingTop).paddingRight(t.paddingRight).paddingBottom(t.paddingBottom).paddingLeft(t.paddingLeft)(xg(u).sum(function(c){return t.ignoreParentValue&&c.children?0:c[n]}).sort(t.sort))},o=a(r),s=e[0],l=e[1];return o.each(function(u){u[s]=[u.x0,u.x1,u.x1,u.x0],u[l]=[u.y1,u.y1,u.y0,u.y0],["x0","x1","y0","y1"].forEach(function(c){e.indexOf(c)===-1&&delete u[c]})}),tO(o)}function pre(r){var t=r.data,e=r.colorField,n=r.rawFields,i=r.hierarchyConfig,a=i===void 0?{}:i,o=a.activeDepth,s={partition:zlt,treemap:vre},l=r.seriesField,u=r.type||"partition",c=s[u](t,A(A({field:l||"value"},Wx(a,["activeDepth"])),{type:"hierarchy."+u,as:["x","y"]})),f=[];return c.forEach(function(d){var h,v,p,g,m,y;if(d.depth===0||o>0&&d.depth>o)return null;for(var b=d.data.name,x=A({},d);x.depth>1;)b=((v=x.parent.data)===null||v===void 0?void 0:v.name)+" / "+b,x=x.parent;var w=A(A(A({},Nn(d.data,Yn(n||[],[a.field]))),(h={},h[Cb]=b,h[rO]=x.data.name,h)),d);l&&(w[l]=d.data[l]||((g=(p=d.parent)===null||p===void 0?void 0:p.data)===null||g===void 0?void 0:g[l])),e&&(w[e]=d.data[e]||((y=(m=d.parent)===null||m===void 0?void 0:m.data)===null||y===void 0?void 0:y[e])),w.ext=a,w[Eb]={hierarchyConfig:a,colorField:e,rawFields:n},f.push(w)}),f}function Vlt(r){var t=r.chart,e=r.options,n=e.color,i=e.colorField,a=i===void 0?rO:i,o=e.sunburstStyle,s=e.rawFields,l=s===void 0?[]:s,u=pre(e);t.data(u);var c;return o&&(c=function(f){return tt({},{fillOpacity:Math.pow(.85,f.depth)},Kt(o)?o(f):o)}),M2(tt({},r,{options:{xField:"x",yField:"y",seriesField:a,rawFields:Cc(Yn(zst,l)),polygon:{color:n,style:c}}})),r}function Hlt(r){var t=r.chart;return t.axis(!1),r}function Wlt(r){var t=r.chart;return t.legend(!1),r}function jlt(r){var t=r.chart,e=r.options,n=e.label,i=ao(t,"polygon");if(!n)i.label(!1);else{var a=n.fields,o=a===void 0?["name"]:a,s=n.callback,l=Ur(n,["fields","callback"]);i.label({fields:o,callback:s,cfg:Ma(l)})}return r}function Ylt(r){var t=r.chart,e=r.options,n=e.innerRadius,i=e.radius,a=e.reflect,o=t.coordinate({type:"polar",cfg:{innerRadius:n,radius:i}});return a&&o.reflect(a),r}function Xlt(r){var t,e=r.options,n=e.hierarchyConfig,i=e.meta;return Tr(Ii({},(t={},t[Wte]=ae(i,ae(n,["field"],"value")),t)))(r)}function qlt(r){var t=r.chart,e=r.options,n=e.tooltip;if(n===!1)t.tooltip(!1);else{var i=n;ae(n,"fields")||(i=tt({},{customItems:function(a){return a.map(function(o){var s=ae(t.getOptions(),"scales"),l=ae(s,[Cb,"formatter"],function(c){return c}),u=ae(s,[Wte,"formatter"],function(c){return c});return A(A({},o),{name:l(o.data[Cb]),value:u(o.data.value)})})}},i)),t.tooltip(i)}return r}function Klt(r){var t=r.drilldown,e=r.interactions,n=e===void 0?[]:e;return(t==null?void 0:t.enabled)?tt({},r,{interactions:Yn(n,[{type:"drill-down",cfg:{drillDownConfig:t,transformData:pre}}])}):r}function Zlt(r){var t=r.chart,e=r.options,n=e.drilldown;return ii({chart:t,options:Klt(e)}),(n==null?void 0:n.enabled)&&(t.appendPadding=w2(t.appendPadding,ae(n,["breadCrumb","position"]))),r}function Qlt(r){return Tr(_n,ws("sunburstStyle"),Vlt,Hlt,Xlt,Wlt,Ylt,qlt,jlt,Zlt,$n,Pi())(r)}function gre(r){var t=ae(r,["event","data","data"],{});return Qe(t.children)&&t.children.length>0}function mre(r){var t=r.view.getCoordinate(),e=t.innerRadius;if(e){var n=r.event,i=n.x,a=n.y,o=t.center,s=o.x,l=o.y,u=t.getRadius()*e,c=Math.sqrt(Math.pow(s-i,2)+Math.pow(l-a,2));return c<u}return!1}Cr("drill-down-action",Hst);Lr("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:gre},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:mre}],start:[{trigger:"element:click",isEnable:gre,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:mre,action:["drill-down-action:back"]}]});(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="sunburst",e}return t.getDefaultOptions=function(){return Gst},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Qlt},t.SUNBURST_ANCESTOR_FIELD=rO,t.SUNBURST_PATH_FIELD=Cb,t.NODE_ANCESTORS_FIELD=QR,t})(Rr);var X2,q2="range",yre="type",Pf="percent",Jlt="#f0f0f0",bre="indicator-view",xre="range-view",eut={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(X2={},X2[q2]={sync:"v"},X2[Pf]={sync:"v",tickCount:5,tickInterval:.2},X2),animation:!1};function tut(r,t){return r.map(function(e,n){var i;return i={},i[q2]=e-(r[n-1]||0),i[yre]=""+n,i[Pf]=t,i}).filter(function(e){return!!e[q2]})}function wre(r){var t;return[(t={},t[Pf]=ei(r,0,1),t)]}function Sre(r,t){var e=ae(t,["ticks"],[]),n=la(e)?e:[0,ei(r,0,1),1];return tut(n,r)}function rut(r){var t=r.chart,e=r.options,n=e.percent,i=e.range,a=e.radius,o=e.innerRadius,s=e.startAngle,l=e.endAngle,u=e.axis,c=e.indicator,f=e.gaugeStyle,d=e.type,h=e.meter,v=i.color,p=i.width;if(c){var g=wre(n),m=t.createView({id:bre});m.data(g),m.point().position(Pf+"*1").shape(c.shape||"gauge-indicator").customInfo({defaultColor:t.getTheme().defaultColor,indicator:c}),m.coordinate("polar",{startAngle:s,endAngle:l,radius:o*a}),m.axis(Pf,u),m.scale(Pf,Nn(u,Qo))}var y=Sre(n,e.range),b=t.createView({id:xre});b.data(y);var x=ot(v)?[v,Jlt]:v,w=oo({chart:b,options:{xField:"1",yField:q2,seriesField:yre,rawFields:[Pf],isStack:!0,interval:{color:x,style:f,shape:d==="meter"?"meter-gauge":null},args:{zIndexReversed:!0},minColumnWidth:p,maxColumnWidth:p}}).ext,S=w.geometry;return S.customInfo({meter:h}),b.coordinate("polar",{innerRadius:o,radius:a,startAngle:s,endAngle:l}).transpose(),r}function nut(r){var t;return Tr(Ii((t={range:{min:0,max:1,maxLimit:1,minLimit:0}},t[Pf]={},t)))(r)}function Cre(r,t){var e=r.chart,n=r.options,i=n.statistic,a=n.percent;if(e.getController("annotation").clear(!0),i){var o=i.content,s=void 0;o&&(s=tt({},{content:(a*100).toFixed(2)+"%",style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},o)),Qtt(e,{statistic:A(A({},i),{content:s})},{percent:a})}return t&&e.render(!0),r}function iut(r){var t=r.chart;return t.legend(!1),t.tooltip(!1),r}function Ere(r){return Tr(_n,$n,rut,nut,Cre,ii,Pi(),iut)(r)}In("point","gauge-indicator",{draw:function(r,t){var e=r.customInfo,n=e.indicator,i=e.defaultColor,a=n,o=a.pointer,s=a.pin,l=t.addGroup(),u=this.parsePoint({x:0,y:0});return o&&l.addShape("line",{name:"pointer",attrs:A({x1:u.x,y1:u.y,x2:r.x,y2:r.y,stroke:i},o.style)}),s&&l.addShape("circle",{name:"pin",attrs:A({x:u.x,y:u.y,stroke:i},s.style)}),l}});In("interval","meter-gauge",{draw:function(r,t){var e=r.customInfo.meter,n=e===void 0?{}:e,i=n.steps,a=i===void 0?50:i,o=n.stepRatio,s=o===void 0?.5:o;a=a<1?1:a,s=ei(s,0,1);var l=this.coordinate,u=l.startAngle,c=l.endAngle,f=0;if(s>0&&s<1){var d=c-u;f=d/a/(s/(1-s)+1-1/a)}for(var h=f/(1-s)*s,v=t.addGroup(),p=this.coordinate.getCenter(),g=this.coordinate.getRadius(),m=Ko.getAngle(r,this.coordinate),y=m.startAngle,b=m.endAngle,x=y;x<b;){var w=void 0,S=(x-u)%(h+f);S<h?w=x+(h-S):(x+=h+f-S,w=x+h);var C=Ko.getSectorPath(p.x,p.y,g,x,Math.min(w,b),g*this.coordinate.innerRadius);v.addShape("path",{name:"meter-gauge",attrs:{path:C,fill:r.color,stroke:r.color,lineWidth:.5}}),x=w+f}return v}});var aut=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="gauge",e}return t.getDefaultOptions=function(){return eut},t.prototype.changeData=function(e){this.chart.emit(Hr.BEFORE_CHANGE_DATA,pi.fromData(this.chart,Hr.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e});var n=this.chart.views.find(function(a){return a.id===bre});n&&n.data(wre(e));var i=this.chart.views.find(function(a){return a.id===xre});i&&i.data(Sre(e,this.options.range)),Cre({chart:this.chart,options:this.options},!0),this.chart.emit(Hr.AFTER_CHANGE_DATA,pi.fromData(this.chart,Hr.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ere},t}(Rr),Xs="$$yField$$",K2="$$diffField$$",sO="$$absoluteField$$",lO="$$isTotal$$",out={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function sut(r,t,e,n,i){var a,o=[];if(Ya(r,function(l,u){var c;Ju(pl.WARN,zt(u[e]),u[e]+" is not a valid number");var f=_c(u[e])?null:u[e];return o.push(A(A({},u),(c={},c[n]=[l,l+f],c))),l+f},0),o.length&&i){var s=ae(o,[[r.length-1],n,[1]]);o.push((a={},a[t]=i.label,a[e]=s,a[n]=[0,s],a))}return o}function _re(r,t,e,n){var i=sut(r,t,e,Xs,n);return i.map(function(a,o){var s;return an(a)?A(A({},a),(s={},s[sO]=a[Xs][1],s[K2]=a[Xs][1]-a[Xs][0],s[lO]=o===r.length,s)):a})}function lut(r){for(var t=[],e=0;e<r.length;e++){var n=r[e];if(n){var i=e===0?"M":"L";t.push([i,n.x,n.y])}}var a=r[0];return t.push(["L",a.x,a.y]),t.push(["z"]),t}function uut(r){return tt({},r.defaultStyle,r.style,{fill:r.color})}In("interval","waterfall",{draw:function(r,t){var e=r.customInfo,n=r.points,i=r.nextPoints,a=t.addGroup(),o=this.parsePath(lut(n)),s=uut(r);a.addShape("path",{attrs:A(A({},s),{path:o})});var l=ae(e,"leaderLine");if(l&&i){var u=[["M",n[2].x,n[2].y],["L",i[0].x,i[0].y]];n[2].y===i[1].y&&(u[1]=["L",i[1].x,i[1].y]),u=this.parsePath(u),a.addShape("path",{attrs:A({path:u},l.style||{})})}return a}});function cut(r){var t=r.options,e=t.locale,n=t.total,i=C2(e).get(["waterfall","total"]);return n&&typeof n.label!="string"&&i&&(r.options.total.label=i),r}function fut(r){var t=r.chart,e=r.options,n=e.data,i=e.xField,a=e.yField,o=e.total,s=e.leaderLine,l=e.columnWidthRatio,u=e.waterfallStyle,c=e.risingFill,f=e.fallingFill,d=e.color;t.data(_re(n,i,a,o));var h=d||function(m){return ae(m,[lO])?ae(o,["style","fill"],""):ae(m,[Xs,1])-ae(m,[Xs,0])>0?c:f},v=tt({},r,{options:{xField:i,yField:Xs,seriesField:i,rawFields:[a,K2,lO,Xs],widthRatio:l,interval:{style:u,shape:"waterfall",color:h}}}),p=oo(v).ext,g=p.geometry;return g.customInfo({leaderLine:s}),r}function dut(r){var t,e,n=r.options,i=n.xAxis,a=n.yAxis,o=n.xField,s=n.yField,l=n.meta,u=tt({},{alias:s},ae(l,s));return Tr(Ii((t={},t[o]=i,t[s]=a,t[Xs]=a,t),tt({},l,(e={},e[Xs]=u,e[K2]=u,e[sO]=u,e))))(r)}function hut(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return n===!1?t.axis(a,!1):t.axis(a,n),i===!1?(t.axis(o,!1),t.axis(Xs,!1)):(t.axis(o,i),t.axis(Xs,i)),r}function vut(r){var t=r.chart,e=r.options,n=e.legend,i=e.total,a=e.risingFill,o=e.fallingFill,s=e.locale,l=C2(s);if(n===!1)t.legend(!1);else{var u=[{name:l.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:a}}},{name:l.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:o}}}];i&&u.push({name:i.label||"",value:"total",marker:{symbol:"square",style:tt({},{r:5},ae(i,"style"))}}),t.legend(tt({},{custom:!0,position:"top",items:u},n)),t.removeInteraction("legend-filter")}return r}function put(r){var t=r.chart,e=r.options,n=e.label,i=e.labelMode,a=e.xField,o=ao(t,"interval");if(!n)o.label(!1);else{var s=n.callback,l=Ur(n,["callback"]);o.label({fields:i==="absolute"?[sO,a]:[K2,a],callback:s,cfg:Ma(l)})}return r}function gut(r){var t=r.chart,e=r.options,n=e.tooltip,i=e.xField,a=e.yField;if(n!==!1){t.tooltip(A({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[a]},n));var o=t.geometries[0];(n==null?void 0:n.formatter)?o.tooltip(i+"*"+a,n.formatter):o.tooltip(a)}else t.tooltip(!1);return r}function mut(r){return Tr(cut,_n,fut,dut,hut,vut,gut,put,Af,ii,$n,Pi())(r)}(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="waterfall",e}return t.getDefaultOptions=function(){return out},t.prototype.changeData=function(e){var n=this.options,i=n.xField,a=n.yField,o=n.total;this.updateOption({data:e}),this.chart.changeData(_re(e,i,a,o))},t.prototype.getSchemaAdaptor=function(){return mut},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t})(Rr);function yut(r,t,e){var n=e.map(function(o){return o[t]}).filter(function(o){return o!==void 0}),i=n.length>0?Math.max.apply(Math,n):0,a=Math.abs(r)%360;return a?i*360/a:i}function but(r,t,e){var n=[];return r.forEach(function(i){var a=n.find(function(o){return o[t]===i[t]});a?a[e]+=i[e]||null:n.push(A({},i))}),n}function xut(r){var t=r.chart,e=r.options,n=e.barStyle,i=e.color,a=e.tooltip,o=e.colorField,s=e.type,l=e.xField,u=e.yField,c=e.data,f=cg(c,u);t.data(f);var d=tt({},r,{options:{tooltip:a,seriesField:o,interval:{style:n,color:i,shape:s==="line"?"line":"intervel"},minColumnWidth:e.minBarWidth,maxColumnWidth:e.maxBarWidth,columnBackground:e.barBackground}});return oo(d),s==="line"&&Ss({chart:t,options:{xField:l,yField:u,seriesField:o,point:{shape:"circle",color:i}}}),r}function Tre(r){var t,e=r.options,n=e.yField,i=e.xField,a=e.data,o=e.isStack,s=e.isGroup,l=e.colorField,u=e.maxAngle,c=o&&!s&&l?but(a,i,n):a,f=cg(c,n);return Tr(Ii((t={},t[n]={min:0,max:yut(u,n,f)},t)))(r)}function wut(r){var t=r.chart,e=r.options,n=e.radius,i=e.innerRadius,a=e.startAngle,o=e.endAngle;return t.coordinate({type:"polar",cfg:{radius:n,innerRadius:i,startAngle:a,endAngle:o}}).transpose(),r}function Sut(r){var t=r.chart,e=r.options,n=e.xField,i=e.xAxis;return t.axis(n,i),r}function Cut(r){var t=r.chart,e=r.options,n=e.label,i=e.yField,a=ao(t,"interval");if(!n)a.label(!1);else{var o=n.callback,s=Ur(n,["callback"]);a.label({fields:[i],callback:o,cfg:A(A({},Ma(s)),{type:"polar"})})}return r}function Eut(r){return Tr(ws("barStyle"),xut,Tre,Sut,wut,ii,$n,_n,Ia,fb,Pi(),Cut)(r)}var _ut=tt({},Rr.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240});(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="radial-bar",e}return t.getDefaultOptions=function(){return _ut},t.prototype.changeData=function(e){this.updateOption({data:e}),Tre({chart:this.chart,options:this.options}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Eut},t})(Rr);var cu="first-axes-view",fu="second-axes-view",Lh="series-field-key";function Are(r,t,e,n,i){var a=[];t.forEach(function(f){n.forEach(function(d){var h,v=(h={},h[r]=d[r],h[e]=f,h[f]=d[f],h);a.push(v)})});var o=Object.values(uo(a,e)),s=o[0],l=s===void 0?[]:s,u=o[1],c=u===void 0?[]:u;return i?[l.reverse(),c.reverse()]:[l,c]}function ic(r){return r!=="vertical"}function Tut(r,t,e){var n=t[0],i=t[1],a=n.autoPadding,o=i.autoPadding,s=r.__axisPosition,l=s.layout,u=s.position;if(ic(l)&&u==="top"&&(n.autoPadding=e.instance(a.top,0,a.bottom,a.left),i.autoPadding=e.instance(o.top,a.left,o.bottom,0)),ic(l)&&u==="bottom"&&(n.autoPadding=e.instance(a.top,a.right/2+5,a.bottom,a.left),i.autoPadding=e.instance(o.top,o.right,o.bottom,a.right/2+5)),!ic(l)&&u==="bottom"){var c=a.left>=o.left?a.left:o.left;n.autoPadding=e.instance(a.top,a.right,a.bottom/2+5,c),i.autoPadding=e.instance(a.bottom/2+5,o.right,o.bottom,c)}if(!ic(l)&&u==="top"){var c=a.left>=o.left?a.left:o.left;n.autoPadding=e.instance(a.top,a.right,0,c),i.autoPadding=e.instance(0,o.right,a.top,c)}}function Aut(r){var t=r.chart,e=r.options,n=e.data,i=e.xField,a=e.yField,o=e.color,s=e.barStyle,l=e.widthRatio,u=e.legend,c=e.layout,f=Are(i,a,Lh,n,ic(c));u?t.legend(Lh,u):u===!1&&t.legend(!1);var d,h,v=f[0],p=f[1];ic(c)?(d=t.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:cu}),d.coordinate().transpose().reflect("x"),h=t.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:fu}),h.coordinate().transpose(),d.data(v),h.data(p)):(d=t.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:cu}),h=t.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:fu}),h.coordinate().reflect("y"),d.data(v),h.data(p));var g=tt({},r,{chart:d,options:{widthRatio:l,xField:i,yField:a[0],seriesField:Lh,interval:{color:o,style:s}}});oo(g);var m=tt({},r,{chart:h,options:{xField:i,yField:a[1],seriesField:Lh,widthRatio:l,interval:{color:o,style:s}}});return oo(m),r}function kut(r){var t,e,n,i=r.options,a=r.chart,o=i.xAxis,s=i.yAxis,l=i.xField,u=i.yField,c=tn(a,cu),f=tn(a,fu),d={};return nd((i==null?void 0:i.meta)||{}).map(function(h){ae(i==null?void 0:i.meta,[h,"alias"])&&(d[h]=i.meta[h].alias)}),a.scale((t={},t[Lh]={sync:!0,formatter:function(h){return ae(d,h,h)}},t)),Ii((e={},e[l]=o,e[u[0]]=s[u[0]],e))(tt({},r,{chart:c})),Ii((n={},n[l]=o,n[u[1]]=s[u[1]],n))(tt({},r,{chart:f})),r}function Mut(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField,s=e.layout,l=tn(t,cu),u=tn(t,fu);return(n==null?void 0:n.position)==="bottom"?u.axis(a,A(A({},n),{label:{formatter:function(){return""}}})):u.axis(a,!1),n===!1?l.axis(a,!1):l.axis(a,A({position:ic(s)?"top":"bottom"},n)),i===!1?(l.axis(o[0],!1),u.axis(o[1],!1)):(l.axis(o[0],i[o[0]]),u.axis(o[1],i[o[1]])),t.__axisPosition={position:l.getOptions().axes[a].position,layout:s},r}function Iut(r){var t=r.chart;return ii(tt({},r,{chart:tn(t,cu)})),ii(tt({},r,{chart:tn(t,fu)})),r}function Put(r){var t=r.chart,e=r.options,n=e.yField,i=e.yAxis;return Th(tt({},r,{chart:tn(t,cu),options:{yAxis:i[n[0]]}})),Th(tt({},r,{chart:tn(t,fu),options:{yAxis:i[n[1]]}})),r}function Dut(r){var t=r.chart;return _n(tt({},r,{chart:tn(t,cu)})),_n(tt({},r,{chart:tn(t,fu)})),r}function Rut(r){var t=r.chart;return $n(tt({},r,{chart:tn(t,cu)})),$n(tt({},r,{chart:tn(t,fu)})),r}function Out(r){var t=this,e,n,i=r.chart,a=r.options,o=a.label,s=a.yField,l=a.layout,u=tn(i,cu),c=tn(i,fu),f=ao(u,"interval"),d=ao(c,"interval");if(!o)f.label(!1),d.label(!1);else{var h=o.callback,v=Ur(o,["callback"]);v.position||(v.position="middle"),v.offset===void 0&&(v.offset=2);var p=A({},v);if(ic(l)){var g=((e=p.style)===null||e===void 0?void 0:e.textAlign)||(v.position==="middle"?"center":"left");v.style=tt({},v.style,{textAlign:g});var m={left:"right",right:"left",center:"center"};p.style=tt({},p.style,{textAlign:m[g]})}else{var y={top:"bottom",bottom:"top",middle:"middle"};typeof v.position=="string"?v.position=y[v.position]:typeof v.position=="function"&&(v.position=function(){for(var w=[],S=0;S<arguments.length;S++)w[S]=arguments[S];return y[v.position.apply(t,w)]});var b=((n=p.style)===null||n===void 0?void 0:n.textBaseline)||"bottom";p.style=tt({},p.style,{textBaseline:b});var x={top:"bottom",bottom:"top",middle:"middle"};v.style=tt({},v.style,{textBaseline:x[b]})}f.label({fields:[s[0]],callback:h,cfg:Ma(p)}),d.label({fields:[s[1]],callback:h,cfg:Ma(v)})}return r}function Lut(r){return Tr(Aut,kut,Mut,Put,Dut,Out,Ia,Iut,Rut)(r)}(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="bidirectional-bar",e}return t.getDefaultOptions=function(){return tt({},r.getDefaultOptions.call(this),{syncViewPadding:Tut})},t.prototype.changeData=function(e){e===void 0&&(e=[]),this.chart.emit(Hr.BEFORE_CHANGE_DATA,pi.fromData(this.chart,Hr.BEFORE_CHANGE_DATA,null)),this.updateOption({data:e});var n=this.options,i=n.xField,a=n.yField,o=n.layout,s=Are(i,a,Lh,e,ic(o)),l=s[0],u=s[1],c=tn(this.chart,cu),f=tn(this.chart,fu);c.data(l),f.data(u),this.chart.render(!0),this.chart.emit(Hr.AFTER_CHANGE_DATA,pi.fromData(this.chart,Hr.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Lut},t.SERIES_FIELD_KEY=Lh,t})(Rr);function kre(r,t){if(!!Qe(r))return r.find(function(e){return e.type===t})}function Mre(r,t){var e=kre(r,t);return e&&e.enable!==!1}function uO(r){var t=r.interactions,e=r.drilldown;return ae(e,"enabled")||Mre(t,"treemap-drill-down")}function Fut(r){var t=r.interactions["drill-down"];if(!!t){var e=t.context.actions.find(function(n){return n.name==="drill-down-action"});e.reset()}}function cO(r){var t=r.data,e=r.colorField,n=r.enableDrillDown,i=r.hierarchyConfig,a=vre(t,A(A({},i),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),o=[];return a.forEach(function(s){if(s.depth===0||n&&s.depth!==1||!n&&s.children)return null;var l=s.ancestors().map(function(d){return{data:d.data,height:d.height,value:d.value}}),u=n&&Qe(t.path)?l.concat(t.path.slice(1)):l,c=Object.assign({},s.data,A({x:s.x,y:s.y,depth:s.depth,value:s.value,path:u},s));if(!s.data[e]&&s.parent){var f=s.ancestors().find(function(d){return d.data[e]});c[e]=f==null?void 0:f.data[e]}else c[e]=s.data[e];c[Eb]={hierarchyConfig:i,colorField:e,enableDrillDown:n},o.push(c)}),o}function Nut(r){var t=r.options,e=t.colorField;return tt({options:{rawFields:["value"],tooltip:{fields:["name","value",e,"path"],formatter:function(n){return{name:n.name,value:n.value}}}}},r)}function But(r){var t=r.chart,e=r.options,n=e.color,i=e.colorField,a=e.rectStyle,o=e.hierarchyConfig,s=e.rawFields,l=cO({data:e.data,colorField:e.colorField,enableDrillDown:uO(e),hierarchyConfig:o});return t.data(l),M2(tt({},r,{options:{xField:"x",yField:"y",seriesField:i,rawFields:s,polygon:{color:n,style:a}}})),t.coordinate().reflect("y"),r}function $ut(r){var t=r.chart;return t.axis(!1),r}function zut(r){var t=r.drilldown,e=r.interactions,n=e===void 0?[]:e,i=uO(r);return i?tt({},r,{interactions:Yn(n,[{type:"drill-down",cfg:{drillDownConfig:t,transformData:cO}}])}):r}function Gut(r){var t=r.chart,e=r.options,n=e.interactions,i=e.drilldown;ii({chart:t,options:zut(e)});var a=kre(n,"view-zoom");a&&(a.enable!==!1?t.getCanvas().on("mousewheel",function(s){s.preventDefault()}):t.getCanvas().off("mousewheel"));var o=uO(e);return o&&(t.appendPadding=w2(t.appendPadding,ae(i,["breadCrumb","position"]))),r}function Uut(r){return Tr(Nut,_n,ws("rectStyle"),But,$ut,fb,Ia,Gut,$n,Pi())(r)}var Vut={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"\u521D\u59CB",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}};(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="treemap",e}return t.getDefaultOptions=function(){return Vut},t.prototype.changeData=function(e){var n=this.options,i=n.colorField,a=n.interactions,o=n.hierarchyConfig;this.updateOption({data:e});var s=cO({data:e,colorField:i,enableDrillDown:Mre(a,"treemap-drill-down"),hierarchyConfig:o});this.chart.changeData(s),Fut(this.chart)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Uut},t})(Rr);function Hut(r){return r.target.depth}function Wut(r){return r.depth}function jut(r,t){return t-1-r.height}function fO(r,t){return r.sourceLinks.length?r.depth:t-1}function Yut(r){return r.targetLinks.length?r.depth:r.sourceLinks.length?OB(r.sourceLinks,Hut)-1:0}function Z2(r){return function(){return r}}function dO(r,t){for(var e=0,n=0;n<r.length;n++)e+=t(r[n]);return e}function hO(r,t){for(var e=-1/0,n=0;n<r.length;n++)e=Math.max(t(r[n]),e);return e}function Xut(r,t){for(var e=1/0,n=0;n<r.length;n++)e=Math.min(t(r[n]),e);return e}function Ire(r,t){return Q2(r.source,t.source)||r.index-t.index}function Pre(r,t){return Q2(r.target,t.target)||r.index-t.index}function Q2(r,t){return r.y0-t.y0}function vO(r){return r.value}function qut(r){return r.index}function Kut(r){return r.nodes}function Zut(r){return r.links}function Dre(r,t){var e=r.get(t);if(!e)throw new Error("missing: "+t);return e}function Rre(r){for(var t=r.nodes,e=0,n=t;e<n.length;e++){for(var i=n[e],a=i.y0,o=a,s=0,l=i.sourceLinks;s<l.length;s++){var u=l[s];u.y0=a+u.width/2,a+=u.width}for(var c=0,f=i.targetLinks;c<f.length;c++){var u=f[c];u.y1=o+u.width/2,o+=u.width}}}function Qut(){var r=0,t=0,e=1,n=1,i=24,a=8,o,s=qut,l=fO,u,c,f,d=Kut,h=Zut,v=6;function p(R){var L={nodes:d(R),links:h(R)};return g(L),m(L),y(L),b(L),S(L),Rre(L),L}p.update=function(R){return Rre(R),R},p.nodeId=function(R){return arguments.length?(s=typeof R=="function"?R:Z2(R),p):s},p.nodeAlign=function(R){return arguments.length?(l=typeof R=="function"?R:Z2(R),p):l},p.nodeDepth=function(R){return arguments.length?(u=R,p):u},p.nodeSort=function(R){return arguments.length?(c=R,p):c},p.nodeWidth=function(R){return arguments.length?(i=+R,p):i},p.nodePadding=function(R){return arguments.length?(a=o=+R,p):a},p.nodes=function(R){return arguments.length?(d=typeof R=="function"?R:Z2(R),p):d},p.links=function(R){return arguments.length?(h=typeof R=="function"?R:Z2(R),p):h},p.linkSort=function(R){return arguments.length?(f=R,p):f},p.size=function(R){return arguments.length?(r=t=0,e=+R[0],n=+R[1],p):[e-r,n-t]},p.extent=function(R){return arguments.length?(r=+R[0][0],e=+R[1][0],t=+R[0][1],n=+R[1][1],p):[[r,t],[e,n]]},p.iterations=function(R){return arguments.length?(v=+R,p):v};function g(R){var L=R.nodes,O=R.links;L.forEach(function(j,fe){j.index=fe,j.sourceLinks=[],j.targetLinks=[]});var B=new Map(L.map(function(j){return[s(j),j]}));if(O.forEach(function(j,fe){j.index=fe;var se=j.source,ce=j.target;typeof se!="object"&&(se=j.source=Dre(B,se)),typeof ce!="object"&&(ce=j.target=Dre(B,ce)),se.sourceLinks.push(j),ce.targetLinks.push(j)}),f!=null)for(var U=0,W=L;U<W.length;U++){var X=W[U],ie=X.sourceLinks,q=X.targetLinks;ie.sort(f),q.sort(f)}}function m(R){for(var L=R.nodes,O=0,B=L;O<B.length;O++){var U=B[O];U.value=U.fixedValue===void 0?Math.max(dO(U.sourceLinks,vO),dO(U.targetLinks,vO)):U.fixedValue}}function y(R){for(var L=R.nodes,O=L.length,B=new Set(L),U=new Set,W=0;B.size;){if(B.forEach(function(j){j.depth=W;for(var fe=0,se=j.sourceLinks;fe<se.length;fe++){var ce=se[fe].target;U.add(ce)}}),++W>O)throw new Error("circular link");B=U,U=new Set}if(u)for(var X=Math.max(hO(L,function(j){return j.depth})+1,0),ie=void 0,q=0;q<L.length;q++)ie=L[q],ie.depth=u.call(null,ie,X)}function b(R){for(var L=R.nodes,O=L.length,B=new Set(L),U=new Set,W=0;B.size;){if(B.forEach(function(X){X.height=W;for(var ie=0,q=X.targetLinks;ie<q.length;ie++){var j=q[ie].source;U.add(j)}}),++W>O)throw new Error("circular link");B=U,U=new Set}}function x(R){for(var L=R.nodes,O=Math.max(hO(L,function(ce){return ce.depth})+1,0),B=(e-r-i)/(O-1),U=new Array(O).fill(0).map(function(){return[]}),W=0,X=L;W<X.length;W++){var ie=X[W],q=Math.max(0,Math.min(O-1,Math.floor(l.call(null,ie,O))));ie.layer=q,ie.x0=r+q*B,ie.x1=ie.x0+i,U[q]?U[q].push(ie):U[q]=[ie]}if(c)for(var j=0,fe=U;j<fe.length;j++){var se=fe[j];se.sort(c)}return U}function w(R){for(var L=Xut(R,function(_e){return(n-t-(_e.length-1)*o)/dO(_e,vO)}),O=0,B=R;O<B.length;O++){for(var U=B[O],W=t,X=0,ie=U;X<ie.length;X++){var q=ie[X];q.y0=W,q.y1=W+q.value*L,W=q.y1+o;for(var j=0,fe=q.sourceLinks;j<fe.length;j++){var se=fe[j];se.width=se.value*L}}W=(n-W+o)/(U.length+1);for(var ce=0;ce<U.length;++ce){var q=U[ce];q.y0+=W*(ce+1),q.y1+=W*(ce+1)}P(U)}}function S(R){var L=x(R);o=Math.min(a,(n-t)/(hO(L,function(W){return W.length})-1)),w(L);for(var O=0;O<v;++O){var B=Math.pow(.99,O),U=Math.max(1-B,(O+1)/v);_(L,B,U),C(L,B,U)}}function C(R,L,O){for(var B=1,U=R.length;B<U;++B){for(var W=R[B],X=0,ie=W;X<ie.length;X++){for(var q=ie[X],j=0,fe=0,se=0,ce=q.targetLinks;se<ce.length;se++){var _e=ce[se],Me=_e.source,Ye=_e.value,De=Ye*(q.layer-Me.layer);j+=F(Me,q)*De,fe+=De}if(fe>0){var D=(j/fe-q.y0)*L;q.y0+=D,q.y1+=D,I(q)}}c===void 0&&W.sort(Q2),W.length&&T(W,O)}}function _(R,L,O){for(var B=R.length,U=B-2;U>=0;--U){for(var W=R[U],X=0,ie=W;X<ie.length;X++){for(var q=ie[X],j=0,fe=0,se=0,ce=q.sourceLinks;se<ce.length;se++){var _e=ce[se],Me=_e.target,Ye=_e.value,De=Ye*(Me.layer-q.layer);j+=$(q,Me)*De,fe+=De}if(fe>0){var D=(j/fe-q.y0)*L;q.y0+=D,q.y1+=D,I(q)}}c===void 0&&W.sort(Q2),W.length&&T(W,O)}}function T(R,L){var O=R.length>>1,B=R[O];k(R,B.y0-o,O-1,L),E(R,B.y1+o,O+1,L),k(R,n,R.length-1,L),E(R,t,0,L)}function E(R,L,O,B){for(;O<R.length;++O){var U=R[O],W=(L-U.y0)*B;W>1e-6&&(U.y0+=W,U.y1+=W),L=U.y1+o}}function k(R,L,O,B){for(;O>=0;--O){var U=R[O],W=(U.y1-L)*B;W>1e-6&&(U.y0-=W,U.y1-=W),L=U.y0-o}}function I(R){var L=R.sourceLinks,O=R.targetLinks;if(f===void 0){for(var B=0,U=O;B<U.length;B++){var W=U[B].source.sourceLinks;W.sort(Pre)}for(var X=0,ie=L;X<ie.length;X++){var q=ie[X].target.targetLinks;q.sort(Ire)}}}function P(R){if(f===void 0)for(var L=0,O=R;L<O.length;L++){var B=O[L],U=B.sourceLinks,W=B.targetLinks;U.sort(Pre),W.sort(Ire)}}function F(R,L){for(var O=R.y0-(R.sourceLinks.length-1)*o/2,B=0,U=R.sourceLinks;B<U.length;B++){var W=U[B],X=W.target,ie=W.width;if(X===L)break;O+=ie+o}for(var q=0,j=L.targetLinks;q<j.length;q++){var fe=j[q],X=fe.source,ie=fe.width;if(X===R)break;O-=ie}return O}function $(R,L){for(var O=L.y0-(L.targetLinks.length-1)*o/2,B=0,U=L.targetLinks;B<U.length;B++){var W=U[B],X=W.source,ie=W.width;if(X===R)break;O+=ie+o}for(var q=0,j=R.sourceLinks;q<j.length;q++){var fe=j[q],X=fe.target,ie=fe.width;if(X===L)break;O-=ie}return O}return p}var Jut={left:Wut,right:jut,center:Yut,justify:fO},ect={nodeId:function(r){return r.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function tct(r){var t=ot(r)?Jut[r]:Kt(r)?r:null;return t||fO}function rct(r){return jt({},ect,r)}function nct(r,t){var e=rct(r),n=e.nodeId,i=e.nodeSort,a=e.nodeAlign,o=e.nodeWidth,s=e.nodePadding,l=e.nodeDepth,u=Qut().nodeSort(i).nodeWidth(o).nodePadding(s).nodeDepth(l).nodeAlign(tct(a)).extent([[0,0],[1,1]]).nodeId(n),c=u(t);return c.nodes.forEach(function(f){var d=f.x0,h=f.x1,v=f.y0,p=f.y1;f.x=[d,h,h,d],f.y=[v,v,p,p]}),c.links.forEach(function(f){var d=f.source,h=f.target,v=d.x1,p=h.x0;f.x=[v,v,p,p];var g=f.width/2;f.y=[f.y0+g,f.y0-g,f.y1+g,f.y1-g]}),c}function ict(r,t,e){var n=[];return r.forEach(function(i){var a=i[t],o=i[e];n.includes(a)||n.push(a),n.includes(o)||n.push(o)}),n}function act(r,t,e,n){var i={};return t.forEach(function(a){i[a]={},t.forEach(function(o){i[a][o]=0})}),r.forEach(function(a){i[a[e]][a[n]]=1}),i}function oct(r,t,e){if(!Qe(r))return[];var n=[],i=ict(r,t,e),a=act(r,i,t,e),o={};i.forEach(function(l){o[l]=0});function s(l){o[l]=1,i.forEach(function(u){if(a[l][u]!=0)if(o[u]==1)n.push(l+"_"+u);else{if(o[u]==-1)return;s(u)}}),o[l]=-1}return i.forEach(function(l){o[l]!=-1&&s(l)}),n.length!==0&&console.warn("sankey data contains circle, "+n.length+" records removed.",n),r.filter(function(l){return n.findIndex(function(u){return u===l[t]+"_"+l[e]})<0})}function sct(r){return r==="node-link"}function lct(r,t,e){return _h(r)?r/e:t}function uct(r,t,e){return _h(r)?r/e:t}function Ore(r,t,e){var n=r.dataType,i=r.data,a=r.sourceField,o=r.targetField,s=r.weightField,l=r.nodeAlign,u=r.nodeSort,c=r.nodePadding,f=r.nodePaddingRatio,d=r.nodeWidth,h=r.nodeWidthRatio,v=r.nodeDepth,p=r.rawFields,g=p===void 0?[]:p,m;sct(n)?m=i:m=dee(oct(i,a,o),a,o,s,g);var y=nct({nodeAlign:l,nodePadding:uct(c,f,e),nodeWidth:lct(d,h,t),nodeSort:u,nodeDepth:v},m),b=y.nodes,x=y.links;return{nodes:b.map(function(w){return A(A({},Nn(w,Yn(["x","y","name"],g))),{isNode:!0})}),edges:x.map(function(w){return A(A({source:w.source.name,target:w.target.name,name:w.source.name||w.target.name},Nn(w,Yn(["x","y","value"],g))),{isNode:!1})})}}var Lre="x",Fre="y",Nre="name",pO="nodes",gO="edges";function cct(r){var t=r.options,e=t.rawFields,n=e===void 0?[]:e;return tt({},{options:{tooltip:{fields:Cc(Yn(["name","source","target","value","isNode"],n))},label:{fields:Cc(Yn(["x","name"],n))}}},r)}function fct(r){var t=r.chart,e=r.options,n=e.color,i=e.nodeStyle,a=e.edgeStyle,o=e.label,s=e.tooltip,l=e.nodeState,u=e.edgeState;t.legend(!1),t.tooltip(s),t.axis(!1),t.coordinate().reflect("y");var c=Ore(e,t.width,t.height),f=c.nodes,d=c.edges,h=t.createView({id:gO});h.data(d),bee({chart:h,options:{xField:Lre,yField:Fre,seriesField:Nre,edge:{color:n,style:a,shape:"arc"},tooltip:s,state:u}});var v=t.createView({id:pO});return v.data(f),M2({chart:v,options:{xField:Lre,yField:Fre,seriesField:Nre,polygon:{color:n,style:i},label:o,tooltip:s,state:l}}),t.interaction("element-active"),t.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),r}function dct(r){var t=r.chart,e=r.options,n=e.animation;typeof n=="boolean"?t.animate(n):t.animate(!0);var i=Yn(t.views[0].geometries,t.views[1].geometries);return i.forEach(function(a){a.animate(n)}),r}function hct(r){var t=r.chart,e=r.options,n=e.nodeDraggable,i="sankey-node-draggable";return n?t.interaction(i):t.removeInteraction(i),r}function vct(r){return Tr(cct,fct,ii,hct,dct,_n)(r)}var pct=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.isDragging=!1,e}return t.prototype.isNodeElement=function(){var e=ae(this.context,"event.target");if(e){var n=e.get("element");return n&&n.getModel().data.isNode}return!1},t.prototype.getNodeView=function(){return tn(this.context.view,pO)},t.prototype.getEdgeView=function(){return tn(this.context.view,gO)},t.prototype.getCurrentDatumIdx=function(e){return this.getNodeView().geometries[0].elements.indexOf(e)},t.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:ae(this.context,"event.x"),y:ae(this.context,"event.y")};var e=this.context.event.target.get("element"),n=this.getCurrentDatumIdx(e);if(n===-1)return;this.currentElementIdx=n,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},t.prototype.translate=function(){if(this.isDragging){var e=this.context.view,n={x:ae(this.context,"event.x"),y:ae(this.context,"event.y")},i=n.x-this.prevPoint.x,a=n.y-this.prevPoint.y,o=this.getNodeView(),s=o.geometries[0].elements[this.currentElementIdx];if(s&&s.getModel()){var l=s.getModel().data,u=o.getOptions().data,c=o.getCoordinate(),f={x:i/c.getWidth(),y:a/c.getHeight()},d=A(A({},l),{x:l.x.map(function(m){return m+=f.x}),y:l.y.map(function(m){return m+=f.y})}),h=Yn(u);h[this.currentElementIdx]=d,o.data(h);var v=l.name,p=this.getEdgeView(),g=p.getOptions().data;g.forEach(function(m){m.source===v&&(m.x[0]+=f.x,m.x[1]+=f.x,m.y[0]+=f.y,m.y[1]+=f.y),m.target===v&&(m.x[2]+=f.x,m.x[3]+=f.x,m.y[2]+=f.y,m.y[3]+=f.y)}),p.data(g),this.prevPoint=n,e.render(!0)}}},t.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},t}(vi);Cr("sankey-node-drag",pct);Lr("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(r){return r.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]});(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="sankey",e}return t.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(e){var n=e.name;return n},callback:function(e){var n=e[1]===1;return{style:{fill:"#545454",textAlign:n?"end":"start"},offsetX:n?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(e){return!ae(e,[0,"data","isNode"])},formatter:function(e){var n=e.source,i=e.target,a=e.value;return{name:n+" -> "+i,value:a}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},t.prototype.changeData=function(e){this.updateOption({data:e});var n=Ore(this.options,this.chart.width,this.chart.height),i=n.nodes,a=n.edges,o=tn(this.chart,pO),s=tn(this.chart,gO);o.changeData(i),s.changeData(a)},t.prototype.getSchemaAdaptor=function(){return vct},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t})(Rr);var gct={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(r){return r.id},source:function(r){return r.source},target:function(r){return r.target},sourceWeight:function(r){return r.value||1},targetWeight:function(r){return r.value||1},sortBy:null};function mct(r,t,e){G(r,function(n,i){n.inEdges=t.filter(function(a){return""+e.target(a)==""+i}),n.outEdges=t.filter(function(a){return""+e.source(a)==""+i}),n.edges=n.outEdges.concat(n.inEdges),n.frequency=n.edges.length,n.value=0,n.inEdges.forEach(function(a){n.value+=e.targetWeight(a)}),n.outEdges.forEach(function(a){n.value+=e.sourceWeight(a)})})}function yct(r,t){var e={weight:function(i,a){return a.value-i.value},frequency:function(i,a){return a.frequency-i.frequency},id:function(i,a){return(""+t.id(i)).localeCompare(""+t.id(a))}},n=e[t.sortBy];!n&&Kt(t.sortBy)&&(n=t.sortBy),n&&r.sort(n)}function bct(r,t){var e=r.length;if(!e)throw new TypeError("Invalid nodes: it's empty!");if(t.weight){var n=t.nodePaddingRatio;if(n<0||n>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var i=n/(2*e),a=t.nodeWidthRatio;if(a<=0||a>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var o=0;r.forEach(function(l){o+=l.value}),r.forEach(function(l){l.weight=l.value/o,l.width=l.weight*(1-n),l.height=a}),r.forEach(function(l,u){for(var c=0,f=u-1;f>=0;f--)c+=r[f].width+2*i;var d=l.minX=i+c,h=l.maxX=l.minX+l.width,v=l.minY=t.y-a/2,p=l.maxY=v+a;l.x=[d,h,h,d],l.y=[v,v,p,p]})}else{var s=1/e;r.forEach(function(l,u){l.x=(u+.5)*s,l.y=t.y})}return r}function xct(r,t,e){if(e.weight){var n={};G(r,function(i,a){n[a]=i.value}),t.forEach(function(i){var a=e.source(i),o=e.target(i),s=r[a],l=r[o];if(s&&l){var u=n[a],c=e.sourceWeight(i),f=s.minX+(s.value-u)/s.value*s.width,d=f+c/s.value*s.width;n[a]-=c;var h=n[o],v=e.targetWeight(i),p=l.minX+(l.value-h)/l.value*l.width,g=p+v/l.value*l.width;n[o]-=v;var m=e.y;i.x=[f,d,p,g],i.y=[m,m,m,m],i.source=s,i.target=l}})}else t.forEach(function(i){var a=r[e.source(i)],o=r[e.target(i)];a&&o&&(i.x=[a.x,o.x],i.y=[a.y,o.y],i.source=a,i.target=o)});return t}function wct(r){return jt({},gct,r)}function Sct(r,t){var e=wct(r),n={},i=t.nodes,a=t.links;i.forEach(function(l){var u=e.id(l);n[u]=l}),mct(n,a,e),yct(i,e);var o=bct(i,e),s=xct(n,a,e);return{nodes:o,links:s}}var Bre="x",$re="y",zre="name",Gre="source",Cct={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(r,t){var e=(r[0]+r[1])/2,n=e>.5?-4:4;return{labelEmit:!0,style:{fill:"#8c8c8c"},offsetX:n,content:t}}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(r){return!ae(r,[0,"data","isNode"])},formatter:function(r){var t=r.source,e=r.target,n=r.value;return{name:t+" -> "+e,value:n}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function Ect(r){var t=r.options,e=t.data,n=t.sourceField,i=t.targetField,a=t.weightField,o=t.nodePaddingRatio,s=t.nodeWidthRatio,l=t.rawFields,u=l===void 0?[]:l,c=dee(e,n,i,a),f=Sct({weight:!0,nodePaddingRatio:o,nodeWidthRatio:s},c),d=f.nodes,h=f.links,v=d.map(function(g){return A(A({},Nn(g,Yn(["id","x","y","name"],u))),{isNode:!0})}),p=h.map(function(g){return A(A({source:g.source.name,target:g.target.name,name:g.source.name||g.target.name},Nn(g,Yn(["x","y","value"],u))),{isNode:!1})});return A(A({},r),{ext:A(A({},r.ext),{chordData:{nodesData:v,edgesData:p}})})}function _ct(r){var t,e=r.chart;return e.scale((t={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}},t[zre]={sync:"color"},t[Gre]={sync:"color"},t)),r}function Tct(r){var t=r.chart;return t.axis(!1),r}function Act(r){var t=r.chart;return t.legend(!1),r}function kct(r){var t=r.chart,e=r.options,n=e.tooltip;return t.tooltip(n),r}function Mct(r){var t=r.chart;return t.coordinate("polar").reflect("y"),r}function Ict(r){var t=r.chart,e=r.options,n=r.ext.chordData.nodesData,i=e.nodeStyle,a=e.label,o=e.tooltip,s=t.createView();return s.data(n),M2({chart:s,options:{xField:Bre,yField:$re,seriesField:zre,polygon:{style:i},label:a,tooltip:o}}),r}function Pct(r){var t=r.chart,e=r.options,n=r.ext.chordData.edgesData,i=e.edgeStyle,a=e.tooltip,o=t.createView();o.data(n);var s={xField:Bre,yField:$re,seriesField:Gre,edge:{style:i,shape:"arc"},tooltip:a};return bee({chart:o,options:s}),r}function Dct(r){var t=r.chart,e=r.options,n=e.animation;return typeof n=="boolean"?t.animate(n):t.animate(!0),G(Vtt(t),function(i){i.animate(n)}),r}function Rct(r){return Tr(_n,Ect,Mct,_ct,Tct,Act,kct,Pct,Ict,ii,Af,Dct)(r)}(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="chord",e}return t.getDefaultOptions=function(){return Cct},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Rct},t})(Rr);var Oct={field:"value",as:["x","y","r"],sort:function(r,t){return t.value-r.value}};function Lct(r,t){t=jt({},Oct,t);var e=t.as;if(!Qe(e)||e.length!==3)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var n;try{n=eO(t)}catch(u){console.warn(u)}var i=function(u){return nre().size(t.size).padding(t.padding)(xg(u).sum(function(c){return c[n]}).sort(t.sort))},a=i(r),o=e[0],s=e[1],l=e[2];return a.each(function(u){u[o]=u.x,u[s]=u.y,u[l]=u.r}),tO(a)}function Ure(r){var t=r.data,e=r.hierarchyConfig,n=r.rawFields,i=n===void 0?[]:n,a=r.enableDrillDown,o=Lct(t,A(A({},e),{field:"value",as:["x","y","r"]})),s=[];return o.forEach(function(l){for(var u,c=l.data.name,f=A({},l);f.depth>1;)c=((u=f.parent.data)===null||u===void 0?void 0:u.name)+" / "+c,f=f.parent;if(a&&l.depth>2)return null;var d=tt({},l.data,A(A(A({},Nn(l.data,i)),{path:c}),l));d.ext=e,d[Eb]={hierarchyConfig:e,rawFields:i,enableDrillDown:a},s.push(d)}),s}function Vre(r,t,e){var n=xR([r,t]),i=n[0],a=n[1],o=n[2],s=n[3],l=e.width,u=e.height,c=l-(s+a),f=u-(i+o),d=Math.min(c,f),h=(c-d)/2,v=(f-d)/2,p=i+v,g=a+h,m=o+v,y=s+h,b=[p,g,m,y],x=d<0?0:d;return{finalPadding:b,finalSize:x}}var Fct=["x","y","r","name","value","path","depth"],Nct={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}};function Bct(r){var t=r.chart,e=Math.min(t.viewBBox.width,t.viewBBox.height);return tt({options:{size:function(n){var i=n.r;return i*e}}},r)}function $ct(r){var t=r.options,e=r.chart,n=e.viewBBox,i=t.padding,a=t.appendPadding,o=t.drilldown,s=a;if(o==null?void 0:o.enabled){var l=w2(e.appendPadding,ae(o,["breadCrumb","position"]));s=xR([l,a])}var u=Vre(i,s,n).finalPadding;return e.padding=u,e.appendPadding=0,r}function zct(r){var t=r.chart,e=r.options,n=t.padding,i=t.appendPadding,a=e.color,o=e.colorField,s=e.pointStyle,l=e.hierarchyConfig,u=e.sizeField,c=e.rawFields,f=c===void 0?[]:c,d=e.drilldown,h=Ure({data:e.data,hierarchyConfig:l,enableDrillDown:d==null?void 0:d.enabled,rawFields:f});t.data(h);var v=t.viewBBox,p=Vre(n,i,v).finalSize,g=function(m){var y=m.r;return y*p};return u&&(g=function(m){return m[u]*p}),Ss(tt({},r,{options:{xField:"x",yField:"y",seriesField:o,sizeField:u,rawFields:Yn(Fct,f),point:{color:a,style:s,shape:"circle",size:g}}})),r}function Gct(r){return Tr(Ii({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(r)}function Uct(r){var t=r.chart,e=r.options,n=e.tooltip;if(n===!1)t.tooltip(!1);else{var i=n;ae(n,"fields")||(i=tt({},{customItems:function(a){return a.map(function(o){var s=ae(t.getOptions(),"scales"),l=ae(s,["name","formatter"],function(c){return c}),u=ae(s,["value","formatter"],function(c){return c});return A(A({},o),{name:l(o.data.name),value:u(o.data.value)})})}},i)),t.tooltip(i)}return r}function Vct(r){var t=r.chart;return t.axis(!1),r}function Hct(r){var t=r.drilldown,e=r.interactions,n=e===void 0?[]:e;return(t==null?void 0:t.enabled)?tt({},r,{interactions:Yn(n,[{type:"drill-down",cfg:{drillDownConfig:t,transformData:Ure,enableDrillDown:!0}}])}):r}function Wct(r){var t=r.chart,e=r.options;return ii({chart:t,options:Hct(e)}),r}function jct(r){return Tr(ws("pointStyle"),Bct,$ct,_n,Gct,zct,Vct,fb,Uct,Wct,$n,Pi())(r)}(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="circle-packing",e}return t.getDefaultOptions=function(){return Nct},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return jct},t.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},t})(Rr);(function(r){Ie(t,r);function t(e,n,i,a){var o=r.call(this,e,tt({},a,n))||this;return o.type="g2-plot",o.defaultOptions=a,o.adaptor=i,o}return t.prototype.getDefaultOptions=function(){return this.defaultOptions},t.prototype.getSchemaAdaptor=function(){return this.adaptor},t})(Rr);var Yct={line:See,pie:Oee,column:D2,bar:Mee,area:Eee,gauge:Ere,"tiny-line":ete,"tiny-column":tte,"tiny-area":Jee,"ring-progress":ute,progress:ste,scatter:Wee,histogram:ite,funnel:Fte},Xct={line:Ert,pie:unt,column:Xrt,bar:Krt,area:Irt,gauge:aut,"tiny-line":Jit,"tiny-column":nat,"tiny-area":aat,"ring-progress":yat,progress:pat,scatter:Cit,histogram:dat,funnel:bst},qct={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function Hre(r,t,e){var n=Xct[r];if(!n){console.error("could not find "+r+" plot");return}var i=Yct[r];i({chart:t,options:tt({},n.getDefaultOptions(),ae(qct,r,{}),e)})}function Kct(r){var t=r.chart,e=r.options,n=e.views,i=e.legend;return G(n,function(a){var o=a.region,s=a.data,l=a.meta,u=a.axes,c=a.coordinate,f=a.interactions,d=a.annotations,h=a.tooltip,v=a.geometries,p=t.createView({region:o});p.data(s);var g={};u&&G(u,function(m,y){g[y]=Nn(m,Qo)}),g=tt({},l,g),p.scale(g),u?G(u,function(m,y){p.axis(y,m)}):p.axis(!1),p.coordinate(c),G(v,function(m){var y=Jo({chart:p,options:m}).ext,b=m.adjust;b&&y.geometry.adjust(b)}),G(f,function(m){m.enable===!1?p.removeInteraction(m.type):p.interaction(m.type,m.cfg)}),G(d,function(m){p.annotation()[m.type](A({},m))}),typeof a.animation=="boolean"?p.animate(!1):(p.animate(!0),G(p.geometries,function(m){m.animate(a.animation)})),h&&(p.interaction("tooltip"),p.tooltip(h))}),i?G(i,function(a,o){t.legend(o,a)}):t.legend(!1),t.tooltip(e.tooltip),r}function Zct(r){var t=r.chart,e=r.options,n=e.plots;return G(n,function(i){var a=i.type,o=i.region,s=i.options,l=s===void 0?{}:s,u=l.tooltip,c=t.createView(A({region:o},Nn(l,gee)));u&&c.interaction("tooltip"),Hre(a,c,l)}),r}function Qct(r){return Tr($n,Kct,Zct,ii,$n,_n,Ia)(r)}function Jct(r,t){var e=r.getModel(),n=e.data,i;return Qe(n)?i=n[0][t]:i=n[t],i}function eft(r){var t=b2(r);G(t,function(e){e.hasState("active")&&e.setState("active",!1),e.hasState("selected")&&e.setState("selected",!1),e.hasState("inactive")&&e.setState("inactive",!1)})}var tft=function(r){Ie(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getAssociationItems=function(e,n){var i,a=this.context.event,o=n||{},s=o.linkField,l=o.dim,u=[];if((i=a.data)===null||i===void 0?void 0:i.data){var c=a.data.data;G(e,function(f){var d,h,v=s;if(l==="x"?v=f.getXScale().field:l==="y"?v=(d=f.getYScales().find(function(g){return g.field===v}))===null||d===void 0?void 0:d.field:v||(v=(h=f.getGroupScales()[0])===null||h===void 0?void 0:h.field),!!v){var p=Kn(b2(f),function(g){var m=!1,y=!1,b=Qe(c)?ae(c[0],v):ae(c,v);return Jct(g,v)===b?m=!0:y=!0,{element:g,view:f,active:m,inactive:y}});u.push.apply(u,p)}})}return u},t.prototype.showTooltip=function(e){var n=aee(this.context.view),i=this.getAssociationItems(n,e);G(i,function(a){if(a.active){var o=a.element.shape.getCanvasBBox();a.view.showTooltip({x:o.minX+o.width/2,y:o.minY+o.height/2})}})},t.prototype.hideTooltip=function(){var e=aee(this.context.view);G(e,function(n){n.hideTooltip()})},t.prototype.active=function(e){var n=cb(this.context.view),i=this.getAssociationItems(n,e);G(i,function(a){var o=a.active,s=a.element;o&&s.setState("active",!0)})},t.prototype.selected=function(e){var n=cb(this.context.view),i=this.getAssociationItems(n,e);G(i,function(a){var o=a.active,s=a.element;o&&s.setState("selected",!0)})},t.prototype.highlight=function(e){var n=cb(this.context.view),i=this.getAssociationItems(n,e);G(i,function(a){var o=a.inactive,s=a.element;o&&s.setState("inactive",!0)})},t.prototype.reset=function(){var e=cb(this.context.view);G(e,function(n){eft(n)})},t}(vi);Cr("association",tft);Lr("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});Lr("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});Lr("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});Lr("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});var rft=function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="mix",e}return t.prototype.getSchemaAdaptor=function(){return Qct},t}(Rr);function nft(r,t){var e=t.data,n=t.coordinate,i=t.interactions,a=t.annotations,o=t.animation,s=t.tooltip,l=t.axes,u=t.meta,c=t.geometries;e&&r.data(e);var f={};l&&G(l,function(d,h){f[h]=Nn(d,Qo)}),f=tt({},u,f),r.scale(f),n&&r.coordinate(n),l===!1?r.axis(!1):G(l,function(d,h){r.axis(h,d)}),G(c,function(d){var h=Jo({chart:r,options:d}).ext,v=d.adjust;v&&h.geometry.adjust(v)}),G(i,function(d){d.enable===!1?r.removeInteraction(d.type):r.interaction(d.type,d.cfg)}),G(a,function(d){r.annotation()[d.type](A({},d))}),typeof o=="boolean"?r.animate(!1):(r.animate(!0),G(r.geometries,function(d){d.animate(o)})),s?(r.interaction("tooltip"),r.tooltip(s)):s===!1&&r.removeInteraction("tooltip")}function ift(r){var t=r.chart,e=r.options,n=e.type,i=e.data,a=e.fields,o=e.eachView,s=Wx(e,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return t.data(i),t.facet(n,A(A({},s),{fields:a,eachView:function(l,u){var c=o(l,u);if(c.geometries)nft(l,c);else{var f=c,d=f.options;d.tooltip&&l.interaction("tooltip"),Hre(f.type,l,d)}}})),r}function aft(r){var t=r.chart,e=r.options,n=e.axes,i=e.meta,a=e.tooltip,o=e.coordinate,s=e.theme,l=e.legend,u=e.interactions,c=e.annotations,f={};return n&&G(n,function(d,h){f[h]=Nn(d,Qo)}),f=tt({},i,f),t.scale(f),t.coordinate(o),n?G(n,function(d,h){t.axis(h,d)}):t.axis(!1),a?(t.interaction("tooltip"),t.tooltip(a)):a===!1&&t.removeInteraction("tooltip"),t.legend(l),s&&t.theme(s),G(u,function(d){d.enable===!1?t.removeInteraction(d.type):t.interaction(d.type,d.cfg)}),G(c,function(d){t.annotation()[d.type](A({},d))}),r}function oft(r){return Tr(_n,ift,aft)(r)}var sft={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}};(function(r){Ie(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="area",e}return t.getDefaultOptions=function(){return sft},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return oft},t})(Rr);var Cg;(function(r){r.DEV="DEV",r.BETA="BETA",r.STABLE="STABLE"})(Cg||(Cg={}));function lft(r,t){console.warn(r===Cg.DEV?"Plot '"+t+"' is in DEV stage, just give us issues.":r===Cg.BETA?"Plot '"+t+"' is in BETA stage, DO NOT use it in production env.":r===Cg.STABLE?"Plot '"+t+`' is in STABLE stage, import it by "import { `+t+` } from '@antv/g2plot'".`:"invalid Stage type.")}(function(){function r(){}return Object.defineProperty(r,"MultiView",{get:function(){return lft(Cg.STABLE,"MultiView"),rft},enumerable:!1,configurable:!0}),r})();hee("en-US",rrt);hee("zh-CN",nrt);var Wre=function(t,e){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return t.apply(e,i)}},Fh=Object.prototype.toString;function mO(r){return Fh.call(r)==="[object Array]"}function yO(r){return typeof r=="undefined"}function uft(r){return r!==null&&!yO(r)&&r.constructor!==null&&!yO(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function cft(r){return Fh.call(r)==="[object ArrayBuffer]"}function fft(r){return typeof FormData!="undefined"&&r instanceof FormData}function dft(r){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(r):t=r&&r.buffer&&r.buffer instanceof ArrayBuffer,t}function hft(r){return typeof r=="string"}function vft(r){return typeof r=="number"}function jre(r){return r!==null&&typeof r=="object"}function J2(r){if(Fh.call(r)!=="[object Object]")return!1;var t=Object.getPrototypeOf(r);return t===null||t===Object.prototype}function pft(r){return Fh.call(r)==="[object Date]"}function gft(r){return Fh.call(r)==="[object File]"}function mft(r){return Fh.call(r)==="[object Blob]"}function Yre(r){return Fh.call(r)==="[object Function]"}function yft(r){return jre(r)&&Yre(r.pipe)}function bft(r){return typeof URLSearchParams!="undefined"&&r instanceof URLSearchParams}function xft(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function wft(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function bO(r,t){if(!(r===null||typeof r=="undefined"))if(typeof r!="object"&&(r=[r]),mO(r))for(var e=0,n=r.length;e<n;e++)t.call(null,r[e],e,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.call(null,r[i],i,r)}function xO(){var r={};function t(i,a){J2(r[a])&&J2(i)?r[a]=xO(r[a],i):J2(i)?r[a]=xO({},i):mO(i)?r[a]=i.slice():r[a]=i}for(var e=0,n=arguments.length;e<n;e++)bO(arguments[e],t);return r}function Sft(r,t,e){return bO(t,function(i,a){e&&typeof i=="function"?r[a]=Wre(i,e):r[a]=i}),r}function Cft(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}var Er={isArray:mO,isArrayBuffer:cft,isBuffer:uft,isFormData:fft,isArrayBufferView:dft,isString:hft,isNumber:vft,isObject:jre,isPlainObject:J2,isUndefined:yO,isDate:pft,isFile:gft,isBlob:mft,isFunction:Yre,isStream:yft,isURLSearchParams:bft,isStandardBrowserEnv:wft,forEach:bO,merge:xO,extend:Sft,trim:xft,stripBOM:Cft};function Xre(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var qre=function(t,e,n){if(!e)return t;var i;if(n)i=n(e);else if(Er.isURLSearchParams(e))i=e.toString();else{var a=[];Er.forEach(e,function(l,u){l===null||typeof l=="undefined"||(Er.isArray(l)?u=u+"[]":l=[l],Er.forEach(l,function(f){Er.isDate(f)?f=f.toISOString():Er.isObject(f)&&(f=JSON.stringify(f)),a.push(Xre(u)+"="+Xre(f))}))}),i=a.join("&")}if(i){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t};function eE(){this.handlers=[]}eE.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};eE.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};eE.prototype.forEach=function(t){Er.forEach(this.handlers,function(n){n!==null&&t(n)})};var Kre=eE,Zre=function(t,e){Er.forEach(t,function(i,a){a!==e&&a.toUpperCase()===e.toUpperCase()&&(t[e]=i,delete t[a])})},Qre=function(t,e,n,i,a){return t.config=e,n&&(t.code=n),t.request=i,t.response=a,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},tE=function(t,e,n,i,a){var o=new Error(t);return Qre(o,e,n,i,a)},Eft=function(t,e,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(tE("Request failed with status code "+n.status,n.config,null,n.request,n))},_ft=Er.isStandardBrowserEnv()?function(){return{write:function(e,n,i,a,o,s){var l=[];l.push(e+"="+encodeURIComponent(n)),Er.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),Er.isString(a)&&l.push("path="+a),Er.isString(o)&&l.push("domain="+o),s===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){var n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Tft=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)},Aft=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t},kft=function(t,e){return t&&!Tft(e)?Aft(t,e):e},Mft=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Ift=function(t){var e={},n,i,a;return t&&Er.forEach(t.split(`
`),function(s){if(a=s.indexOf(":"),n=Er.trim(s.substr(0,a)).toLowerCase(),i=Er.trim(s.substr(a+1)),n){if(e[n]&&Mft.indexOf(n)>=0)return;n==="set-cookie"?e[n]=(e[n]?e[n]:[]).concat([i]):e[n]=e[n]?e[n]+", "+i:i}}),e},Pft=Er.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a"),n;function i(a){var o=a;return t&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=i(window.location.href),function(o){var s=Er.isString(o)?i(o):o;return s.protocol===n.protocol&&s.host===n.host}}():function(){return function(){return!0}}();function wO(r){this.message=r}wO.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};wO.prototype.__CANCEL__=!0;var rE=wO,nE=Lft,Jre=function(t){return new Promise(function(n,i){var a=t.data,o=t.headers,s=t.responseType,l;function u(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}Er.isFormData(a)&&delete o["Content-Type"];var c=new XMLHttpRequest;if(t.auth){var f=t.auth.username||"",d=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.Authorization="Basic "+btoa(f+":"+d)}var h=kft(t.baseURL,t.url);c.open(t.method.toUpperCase(),qre(h,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function v(){if(!!c){var g="getAllResponseHeaders"in c?Ift(c.getAllResponseHeaders()):null,m=!s||s==="text"||s==="json"?c.responseText:c.response,y={data:m,status:c.status,statusText:c.statusText,headers:g,config:t,request:c};Eft(function(x){n(x),u()},function(x){i(x),u()},y),c=null}}if("onloadend"in c?c.onloadend=v:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(v)},c.onabort=function(){!c||(i(tE("Request aborted",t,"ECONNABORTED",c)),c=null)},c.onerror=function(){i(tE("Network Error",t,null,c)),c=null},c.ontimeout=function(){var m=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",y=t.transitional||nE.transitional;t.timeoutErrorMessage&&(m=t.timeoutErrorMessage),i(tE(m,t,y.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",c)),c=null},Er.isStandardBrowserEnv()){var p=(t.withCredentials||Pft(h))&&t.xsrfCookieName?_ft.read(t.xsrfCookieName):void 0;p&&(o[t.xsrfHeaderName]=p)}"setRequestHeader"in c&&Er.forEach(o,function(m,y){typeof a=="undefined"&&y.toLowerCase()==="content-type"?delete o[y]:c.setRequestHeader(y,m)}),Er.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),s&&s!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(l=function(g){!c||(i(!g||g&&g.type?new rE("canceled"):g),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l))),a||(a=null),c.send(a)})},Dft={"Content-Type":"application/x-www-form-urlencoded"};function ene(r,t){!Er.isUndefined(r)&&Er.isUndefined(r["Content-Type"])&&(r["Content-Type"]=t)}function Rft(){var r;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(r=Jre),r}function Oft(r,t,e){if(Er.isString(r))try{return(t||JSON.parse)(r),Er.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(r)}var iE={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Rft(),transformRequest:[function(t,e){return Zre(e,"Accept"),Zre(e,"Content-Type"),Er.isFormData(t)||Er.isArrayBuffer(t)||Er.isBuffer(t)||Er.isStream(t)||Er.isFile(t)||Er.isBlob(t)?t:Er.isArrayBufferView(t)?t.buffer:Er.isURLSearchParams(t)?(ene(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Er.isObject(t)||e&&e["Content-Type"]==="application/json"?(ene(e,"application/json"),Oft(t)):t}],transformResponse:[function(t){var e=this.transitional||iE.transitional,n=e&&e.silentJSONParsing,i=e&&e.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&Er.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(a)throw o.name==="SyntaxError"?Qre(o,this,"E_JSON_PARSE"):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Er.forEach(["delete","get","head"],function(t){iE.headers[t]={}});Er.forEach(["post","put","patch"],function(t){iE.headers[t]=Er.merge(Dft)});var Lft=iE,SO=function(t,e,n){var i=this||nE;return Er.forEach(n,function(o){t=o.call(i,t,e)}),t},tne=function(t){return!!(t&&t.__CANCEL__)};function CO(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new rE("canceled")}var rne=function(t){CO(t),t.headers=t.headers||{},t.data=SO.call(t,t.data,t.headers,t.transformRequest),t.headers=Er.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Er.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var e=t.adapter||nE.adapter;return e(t).then(function(i){return CO(t),i.data=SO.call(t,i.data,i.headers,t.transformResponse),i},function(i){return tne(i)||(CO(t),i&&i.response&&(i.response.data=SO.call(t,i.response.data,i.response.headers,t.transformResponse))),Promise.reject(i)})},Ab=function(t,e){e=e||{};var n={};function i(c,f){return Er.isPlainObject(c)&&Er.isPlainObject(f)?Er.merge(c,f):Er.isPlainObject(f)?Er.merge({},f):Er.isArray(f)?f.slice():f}function a(c){if(Er.isUndefined(e[c])){if(!Er.isUndefined(t[c]))return i(void 0,t[c])}else return i(t[c],e[c])}function o(c){if(!Er.isUndefined(e[c]))return i(void 0,e[c])}function s(c){if(Er.isUndefined(e[c])){if(!Er.isUndefined(t[c]))return i(void 0,t[c])}else return i(void 0,e[c])}function l(c){if(c in e)return i(t[c],e[c]);if(c in t)return i(void 0,t[c])}var u={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l};return Er.forEach(Object.keys(t).concat(Object.keys(e)),function(f){var d=u[f]||a,h=d(f);Er.isUndefined(h)&&d!==l||(n[f]=h)}),n},nne={version:"0.24.0"},Fft=nne.version,EO={};["object","boolean","number","function","string","symbol"].forEach(function(r,t){EO[r]=function(n){return typeof n===r||"a"+(t<1?"n ":" ")+r}});var ine={};EO.transitional=function(t,e,n){function i(a,o){return"[Axios v"+Fft+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,s){if(t===!1)throw new Error(i(o," has been removed"+(e?" in "+e:"")));return e&&!ine[o]&&(ine[o]=!0,console.warn(i(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(a,o,s):!0}};function Nft(r,t,e){if(typeof r!="object")throw new TypeError("options must be an object");for(var n=Object.keys(r),i=n.length;i-- >0;){var a=n[i],o=t[a];if(o){var s=r[a],l=s===void 0||o(s,a,r);if(l!==!0)throw new TypeError("option "+a+" must be "+l);continue}if(e!==!0)throw Error("Unknown option "+a)}}var ane={assertOptions:Nft,validators:EO},Eg=ane.validators;function kb(r){this.defaults=r,this.interceptors={request:new Kre,response:new Kre}}kb.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=Ab(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;e!==void 0&&ane.assertOptions(e,{silentJSONParsing:Eg.transitional(Eg.boolean),forcedJSONParsing:Eg.transitional(Eg.boolean),clarifyTimeoutError:Eg.transitional(Eg.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(t)===!1||(i=i&&d.synchronous,n.unshift(d.fulfilled,d.rejected))});var a=[];this.interceptors.response.forEach(function(d){a.push(d.fulfilled,d.rejected)});var o;if(!i){var s=[rne,void 0];for(Array.prototype.unshift.apply(s,n),s=s.concat(a),o=Promise.resolve(t);s.length;)o=o.then(s.shift(),s.shift());return o}for(var l=t;n.length;){var u=n.shift(),c=n.shift();try{l=u(l)}catch(f){c(f);break}}try{o=rne(l)}catch(f){return Promise.reject(f)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};kb.prototype.getUri=function(t){return t=Ab(this.defaults,t),qre(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};Er.forEach(["delete","get","head","options"],function(t){kb.prototype[t]=function(e,n){return this.request(Ab(n||{},{method:t,url:e,data:(n||{}).data}))}});Er.forEach(["post","put","patch"],function(t){kb.prototype[t]=function(e,n,i){return this.request(Ab(i||{},{method:t,url:e,data:n}))}});var aE=kb;function _g(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(i){t=i});var e=this;this.promise.then(function(n){if(!!e._listeners){var i,a=e._listeners.length;for(i=0;i<a;i++)e._listeners[i](n);e._listeners=null}}),this.promise.then=function(n){var i,a=new Promise(function(o){e.subscribe(o),i=o}).then(n);return a.cancel=function(){e.unsubscribe(i)},a},r(function(i){e.reason||(e.reason=new rE(i),t(e.reason))})}_g.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};_g.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};_g.prototype.unsubscribe=function(t){if(!!this._listeners){var e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}};_g.source=function(){var t,e=new _g(function(i){t=i});return{token:e,cancel:t}};var Bft=_g,$ft=function(t){return function(n){return t.apply(null,n)}},zft=function(t){return typeof t=="object"&&t.isAxiosError===!0};function one(r){var t=new aE(r),e=Wre(aE.prototype.request,t);return Er.extend(e,aE.prototype,t),Er.extend(e,t),e.create=function(i){return one(Ab(r,i))},e}var du=one(nE);du.Axios=aE;du.Cancel=rE;du.CancelToken=Bft;du.isCancel=tne;du.VERSION=nne.version;du.all=function(t){return Promise.all(t)};du.spread=$ft;du.isAxiosError=zft;var sne=du,Gft=du;sne.default=Gft;var Wdt=sne;const Uft={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Vft=Un("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M344 280l88-88"},null,-1),Hft=Un("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M232 216l64 64"},null,-1),Wft=Un("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M80 320l104-104"},null,-1),jft=Un("circle",{cx:"456",cy:"168",r:"24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Yft=Un("circle",{cx:"320",cy:"304",r:"24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Xft=Un("circle",{cx:"208",cy:"192",r:"24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),qft=Un("circle",{cx:"56",cy:"344",r:"24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1);var jdt=mt({name:"AnalyticsOutline",render:function(t,e){return em(),tm("svg",Uft,[Vft,Hft,Wft,jft,Yft,Xft,qft])}});const Kft={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Zft=Un("path",{d:"M480 496H48a32 32 0 0 1-32-32V32a16 16 0 0 1 32 0v432h432a16 16 0 0 1 0 32z",fill:"currentColor"},null,-1),Qft=Un("path",{d:"M156 432h-40a36 36 0 0 1-36-36V244a36 36 0 0 1 36-36h40a36 36 0 0 1 36 36v152a36 36 0 0 1-36 36z",fill:"currentColor"},null,-1),Jft=Un("path",{d:"M300 432h-40a36 36 0 0 1-36-36V196a36 36 0 0 1 36-36h40a36 36 0 0 1 36 36v200a36 36 0 0 1-36 36z",fill:"currentColor"},null,-1),edt=Un("path",{d:"M443.64 432h-40a36 36 0 0 1-36-36V132a36 36 0 0 1 36-36h40a36 36 0 0 1 36 36v264a36 36 0 0 1-36 36z",fill:"currentColor"},null,-1);var Ydt=mt({name:"BarChart",render:function(t,e){return em(),tm("svg",Kft,[Zft,Qft,Jft,edt])}});const tdt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},rdt=Un("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M160 144h288"},null,-1),ndt=Un("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M160 256h288"},null,-1),idt=Un("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M160 368h288"},null,-1),adt=Un("circle",{cx:"80",cy:"144",r:"16",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),odt=Un("circle",{cx:"80",cy:"256",r:"16",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),sdt=Un("circle",{cx:"80",cy:"368",r:"16",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1);var Xdt=mt({name:"List",render:function(t,e){return em(),tm("svg",tdt,[rdt,ndt,idt,adt,odt,sdt])}});export{Fdt as $,a9e as A,udt as B,Xrt as C,cdt as D,M as E,Fi as F,g$e as G,Va as H,g7e as I,Odt as J,Ldt as K,zdt as L,bdt as M,Gdt as N,$dt as O,unt as P,_dt as Q,Pdt as R,ch as S,xdt as T,Idt as U,Tdt as V,v9e as W,kdt as X,vc as Y,Wdt as Z,hdt as _,mt as a,ydt as a0,pc as a1,jdt as a2,rje as a3,Ydt as a4,Xdt as a5,Ddt as a6,Rdt as a7,mdt as a8,gdt as a9,Adt as aa,Ndt as ab,pdt as ac,O9e as b,B9e as c,Hdt as d,Udt as e,Vdt as f,Cdt as g,Sdt as h,Q as i,fdt as j,ddt as k,Un as l,Coe as m,oa as n,Lo as o,em as p,xN as q,ke as r,vdt as s,wdt as t,Bdt as u,rm as v,nn as w,tm as x,ldt as y,Mdt as z};
