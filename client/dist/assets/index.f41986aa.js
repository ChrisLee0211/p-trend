var me=Object.defineProperty,fe=Object.defineProperties;var ge=Object.getOwnPropertyDescriptors;var le=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable;var se=(e,t,a)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,E=(e,t)=>{for(var a in t||(t={}))ye.call(t,a)&&se(e,a,t[a]);if(le)for(var a of le(t))$e.call(t,a)&&se(e,a,t[a]);return e},V=(e,t)=>fe(e,ge(t));import{r as y,o as Z,M as Fe,T as be,d as x,a as T,N as De,b as W,c as J,e as we,f as Se,u as L,w as K,g as re,h as P,i as p,j as C,k as h,l as f,n as Ce,G as ke,m as b,p as _,F as I,q as j,s as ue,t as z,v as A,x as M,y as R,z as q,C as ee,A as G,B as Y,P as Ee,D as O,E as te,H as ie,I as Te,J as Be,K as Ae,L as Ne,O as Pe,Q as ze,R as Me,S as Ie,U as Oe,V as Re,W as Ve,X as Le,Y as ce,Z as Ue,_ as je,$ as Ge,a0 as Ye,a1 as He,a2 as ae,a3 as We,a4 as Je,a5 as Ke,a6 as qe,a7 as Xe,a8 as Qe,a9 as Ze,aa as xe}from"./vendor.662f2dca.js";const et=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=a(r);fetch(r.href,s)}};et();const tt=(e,t)=>{const a=y();return Z(()=>{a.value=new Fe({container:document.getElementById(t),className:e,type:"delegate",size:[150,150]})}),[a]},at=e=>{const t=y();return Z(()=>{t.value=new be({container:document.getElementById(e),offsetX:10,offsetY:10,getContent(a){var r,s;const n=(s=(r=a==null?void 0:a.item)==null?void 0:r._cfg)==null?void 0:s.model;if(n){const l=n.path||"none",u=n.name,c='<div style="max-width:200px;word-break: break-all;">',d="</div>",o=`
                    <p>\u6A21\u5757\u540D\u79F0:  ${u}</p>
                    <p>\u8DEF\u5F84:  ${l}</p> 
                    `;let i="";const v=["utime","ctime","fileSize","importTimes"],m={utime:{label:"\u6700\u8FD1\u4FEE\u6539\u65F6\u95F4",getValue(F){return x(F).format("YYYY-MM-DD")}},ctime:{label:"\u521B\u5EFA\u65F6\u95F4",getValue(F){return x(F).format("YYYY-MM-DD")}},fileSize:{label:"\u6587\u4EF6\u5927\u5C0F",getValue(F){return`${(Number(F)/1024).toFixed(2)}kb`}},importTimes:{label:"\u88AB\u5F15\u7528\u6B21\u6570",getValue(F){return`${F}`}}};for(const F in n)if(v.includes(F)&&n[F]){const $=m[F].label,g=m[F].getValue(n[F]);i=i+`<p>${$}: ${g}</p>`}return c+o+i+d}return"<h1></h1>"},itemTypes:["node"]})}),[t]},nt=(e,t)=>{var s;const a=[],n={id:t,children:[],name:t},r=e.map((l,u)=>{let c={id:l.path,children:[],name:l.name};return a.includes(l.path)?c.id=l.path+`${u}`:a.push(l.path),c=E(E({},c),l),l.deps.length&&(c.children=l.deps.map((d,o)=>{let i={id:d.path,childen:[],name:d.name};return a.includes(d.path)?i.id=`${Math.random()*10}`+d.path:a.push(d.path),i=E(E({},i),d),i})),c});return r.length&&((s=n==null?void 0:n.children)==null||s.push(...r)),n},ot=(e,t,a)=>{var d,o;let n=E({},e);try{n=JSON.parse(JSON.stringify(e))}catch(i){console.error(i)}const r={};for(let i=0;i<t.length;i++)r[t[i].moduleId]=i;const s=Object.keys(r),l={id:a,name:n.name,path:n.path,isFolder:n.isFolder,children:n.children},u=[];let c=0;for(u.push(l);u.length;){c=c+1;const i=u.pop();if(s.includes(i.moduleId)){const v=r[i.moduleId],m=t[v];i.fileSize=m.fileSize||0,i.ctime=m.ctime,i.mtime=m.utime,i.importTimes=(d=m==null?void 0:m.reference)==null?void 0:d.length,i.isDep=!0}if((o=i==null?void 0:i.children)==null?void 0:o.length)for(let v=0;v<i.children.length;v++){const m=i.children[v];m.id=`${m.path}-${c}`,u.push(m)}else i.id=`${i.path}-${c}`}return l},ne=(e,t)=>{var l;let a=E({},e);try{a=JSON.parse(JSON.stringify(e))}catch(u){console.error(u)}const n={id:t,name:a.name,path:a.path,isFolder:a.isFolder,children:a.children},r=[];let s=0;for(r.push(n);r.length;){s=s+1;const u=r.pop();if((l=u==null?void 0:u.children)==null?void 0:l.length){const c=u.children.map(d=>V(E({},d),{id:`${d.path}-${s}`}));r.push(...c)}else u.id=`${u.path}-${s}`}return n},lt=e=>{var r;const t=E({},e),a={name:t.path,path:t.path,key:t.path,label:t.path,children:t.children.filter(s=>s.isFolder).map(s=>V(E({},s),{parent:{name:t.name,path:t.path},key:"",label:""}))},n=[];for(n.push(...a.children);n.length;){const s=n.pop();s.isFolder&&(s.children=s.children.filter(u=>u.isFolder).map(u=>V(E({},u),{parent:{name:s.name,path:s.path},key:"",label:""})),s.children.length?n.push(...s.children):Reflect.deleteProperty(s,"children"));const l=s.path.split((r=s==null?void 0:s.parent)==null?void 0:r.path);s.label=l[l.length-1],s.key=s.path}return[a]};var B=(e,t)=>{const a=e.__vccOpts||e;for(const[n,r]of t)a[n]=r;return a};const st=T({name:"Graph",components:{NSpin:De,NRadio:W,NRadioGroup:J,NSwitch:we,NTreeSelect:Se},setup(){const e=y(!0),t=y(!0),a=y(null),n=y(null),[r]=tt("miniMap","miniMap"),[s]=at("tooltip"),l=y(null),u=y([]),c=y(""),{onFetchResponse:d,data:o}=L(`http://localhost:${window.preloadState.port}/graph`,{method:"GET"}).json();d($=>{$.status===200&&(l.value=ne(o.value.tree,o.value.entry),u.value=lt(o.value.tree),u.value.length&&(c.value=u.value[0].key),console.log("dirOpts ===>",u.value))}),K(l,$=>{$!==null&&t.value&&Ce(()=>{n.value=new ke.TreeGraph({container:a.value,modes:{default:[{type:"collapse-expand",onChange:function(w,k){const U=w.getModel();return U.collapsed=k,!0}},"drag-canvas","zoom-canvas"]},defaultNode:{size:26,anchorPoints:[[0,.5],[1,.5]]},defaultEdge:{type:"cubic-horizontal"},plugins:[r.value,s.value],layout:{type:"compactBox",direction:"LR",getId:function(w){return w.id},getHeight:function(){return 20},getWidth:function(){return 20},getVGap:function(){return 10},getHGap:function(){return 100}}}),n.value.node(g=>{let w={label:g.name,labelCfg:{offset:10,position:g.children&&g.children.length>0?"left":"right"}};return(g==null?void 0:g.isDep)&&(w=V(E({},w),{style:{shadowBlur:10,fill:"#1a414e",stroke:"black"}})),w}),n.value.on("afterlayout",g=>{e.value=!1,t.value=!1}),n.value.data(l.value),n.value.render(),n.value.fitView()})});const i=ue(($,g)=>{n.value&&(n.value.changeSize($,g),n.value.fitView(20))},100);re(a,$=>{const g=$[0],{width:w,height:k}=g.contentRect;i(w,k)});const v=y("project"),m=[{label:"\u9879\u76EE\u7ED3\u6784",value:"project"},{label:"\u6A21\u5757\u7ED3\u6784",value:"module"}];K(v,($,g)=>{var w,k,U;$==="project"&&((w=n.value)==null||w.changeData(ne(o.value.tree,o.value.entry))),$==="module"&&((k=n.value)==null||k.changeData(nt(o.value.nodes,o.value.entry)),D.value=!1),(U=n.value)==null||U.fitView()});const D=y(!1),F=P(()=>v.value!=="project");return K(D,$=>{var w,k;let g=l.value;$===!0?g=ot(o.value.tree,o.value.deps,o.value.entry):g=ne(o.value.tree,o.value.entry),console.log("targetTreeData ===>",g),(w=n.value)==null||w.changeData(g),(k=n.value)==null||k.fitView()}),{loading:e,graphRef:a,graphType:m,selectGraphType:v,showDeps:D,disableShowDeps:F,dirOpts:u}}}),rt={class:"graph"},ut={class:"graph-main-wrapper"},it={class:"graph-tools"},ct={class:"graph-tools-panel"},dt={class:"graph-tools-panel-item"},pt={class:"graph-tools-panel-item-main"},ht=z(" \u56FE\u7C7B\u578B\uFF1A "),_t={class:"graph-tools-panel-item-main"},vt=z(" \u5F53\u524D\u76EE\u5F55\uFF1A "),mt={class:"graph-tools-panel-item"},ft=z(" \u4F9D\u8D56\u6807\u8BB0\uFF1A "),gt={id:"graph-root"},yt={class:"graph-container",ref:"graphRef"},$t=_("div",{id:"miniMap"},null,-1),Ft={id:"tooltip",class:"tooltip-wrap",ref:"tooltipRef"};function bt(e,t,a,n,r,s){const l=p("n-radio"),u=p("n-space"),c=p("n-radio-group"),d=p("n-tree-select"),o=p("n-switch"),i=p("n-spin");return b(),C("div",rt,[h(i,{size:"large",show:e.loading},{default:f(()=>[_("div",ut,[_("div",it,[_("div",ct,[_("div",dt,[_("div",pt,[ht,h(c,{value:e.selectGraphType,"onUpdate:value":t[0]||(t[0]=v=>e.selectGraphType=v),name:"radiogroup"},{default:f(()=>[h(u,null,{default:f(()=>[(b(!0),C(I,null,j(e.graphType,v=>(b(),A(l,{key:v.value,value:v.value},{default:f(()=>[z(M(v.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_("div",_t,[vt,h(d,{options:e.dirOpts,"default-value":"Drive My Car"},null,8,["options"])])]),_("div",mt,[ft,h(o,{value:e.showDeps,"onUpdate:value":t[1]||(t[1]=v=>e.showDeps=v),disabled:e.disableShowDeps},null,8,["value","disabled"])])])]),_("div",gt,[_("div",yt,null,512),$t,_("div",Ft,null,512)])])]),_:1},8,["show"])])}var Dt=B(st,[["render",bt]]);const wt=e=>{if(!e)return 0+"b";let t=e+"b",a=[e],n=0,r=["B","KB","MB","GB","TB"];for(;a.length;){const s=a.pop(),l=Number(s)/1024;n=n+1,t=l.toFixed(2)+r[n],l>1024&&a.push(l)}return t},oe=()=>{const e=[{label:"\u524D5",value:5},{label:"\u524D10",value:10},{label:"\u524D15",value:15}];return{value:y(e[0].value),limitOptions:e}},X=(e,t)=>{const a=ue((n,r)=>{e.value&&e.value.changeSize(n,r)});re(t,n=>{const r=n[0],{width:s,height:l}=r.contentRect;a(s,l)})};const St=T({name:"fileSizeChart",components:{NSpace:R,NRadio:W,NRadioGroup:J,NSelect:q},setup(){const e=y(),t=y(),a=y("folder"),n=y({}),r=m=>{if(Number(m)in n.value)return n.value[m];{const D=wt(m);return n.value[m]=D,D}},s=m=>m.slice(0).sort((D,F)=>F.fileSize-D.fileSize),{value:l,limitOptions:u}=oe(),c=P(()=>`http://localhost:${window.preloadState.port}/chart/size?limit=${l.value}`),{onFetchResponse:d,data:o,isFetching:i}=L(c,{refetch:!0}).json();d(()=>{var D,F,$,g;if(o.value===null)return;const m=a.value==="folder"?o.value.tree:o.value.nodes;t.value?t.value.changeData(s(m)):(t.value=new ee(e.value,{data:s(m),width:(F=(D=e.value)==null?void 0:D.offsetWidth)!=null?F:0,height:(g=($=e.value)==null?void 0:$.offsetHeight)!=null?g:0,xField:"fileName",yField:"fileSize",padding:"auto",color:"#a3a3c2",appendPadding:10,tooltip:{formatter(w){return{name:"\u6587\u4EF6\u5927\u5C0F",value:`${r(w.fileSize)}`}}}}),t.value.render())}),X(t,e);const v=[{value:"folder",label:"\u76EE\u5F55"},{value:"module",label:"\u6A21\u5757"}];return K(a,m=>{if(o.value===null)return;const D=m==="folder"?o.value.tree:o.value.nodes;t.value&&t.value.changeData(s(D))}),{chartRef:e,chartTypes:v,chartType:a,limitOptions:u,limit:l}}}),Ct=e=>(G("data-v-1f4c7d86"),e=e(),Y(),e),kt=Ct(()=>_("div",{class:"chart-title"},"\u6587\u4EF6\u5927\u5C0F",-1)),Et={class:"chart-main",id:"size-chart",ref:"chartRef"},Tt={class:"chart-tool"};function Bt(e,t,a,n,r,s){const l=p("n-radio"),u=p("n-space"),c=p("n-radio-group"),d=p("n-select");return b(),C(I,null,[kt,_("div",Et,null,512),_("div",Tt,[h(u,null,{default:f(()=>[h(c,{value:e.chartType,"onUpdate:value":t[0]||(t[0]=o=>e.chartType=o),name:""},{default:f(()=>[h(u,null,{default:f(()=>[(b(!0),C(I,null,j(e.chartTypes,o=>(b(),A(l,{key:o.value,value:o.value},{default:f(()=>[z(M(o.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"]),h(d,{size:"small",value:e.limit,"onUpdate:value":t[1]||(t[1]=o=>e.limit=o),options:e.limitOptions},null,8,["value","options"])]),_:1})])],64)}var At=B(St,[["render",Bt],["__scopeId","data-v-1f4c7d86"]]);const de=()=>({value:y("down"),sortOptions:[{label:"\u5347\u5E8F",value:"up"},{label:"\u5012\u5E8F",value:"down"}]});const Nt=T({name:"dependenceChart",components:{NSpace:R,NSelect:q,NRadio:W,NRadioGroup:J},setup(){const e=y(),t=y(),{value:a,limitOptions:n}=oe(),{value:r,sortOptions:s}=de(),l=P(()=>`http://localhost:${window.preloadState.port}/chart/deps?limit=${a.value}&sort=${r.value}`),{onFetchResponse:u,data:c,onFetchError:d}=L(l,{refetch:!0}).json(),o=P(()=>c.value&&c.value.nodes?c.value.nodes.map(i=>V(E({},i),{depCount:i.deps.length})).sort((i,v)=>v.depCount-i.depCount):[]);return d(i=>{console.log(i)}),u(()=>{var i,v,m,D;t.value?t.value.changeData(o.value):(t.value=new ee(e.value,{data:o.value,width:(v=(i=e.value)==null?void 0:i.offsetWidth)!=null?v:0,height:(D=(m=e.value)==null?void 0:m.offsetHeight)!=null?D:0,xField:"fileName",yField:"depCount",padding:"auto",color:"#ff4d4d",appendPadding:10,tooltip:{formatter(F){return{name:"\u4F9D\u8D56\u6570\u91CF",value:`${F.depCount}`}}}}),t.value.render())}),X(t,e),{chartRef:e,limitOptions:n,limit:a,sortType:r,sortOptions:s}}}),Pt=e=>(G("data-v-05887df4"),e=e(),Y(),e),zt=Pt(()=>_("div",{class:"chart-title"},"\u4F9D\u8D56\u6570",-1)),Mt={class:"chart-main",id:"deps-chart",ref:"chartRef"},It={class:"chart-tool"};function Ot(e,t,a,n,r,s){const l=p("n-select"),u=p("n-radio"),c=p("n-space"),d=p("n-radio-group");return b(),C(I,null,[zt,_("div",Mt,null,512),_("div",It,[h(c,null,{default:f(()=>[h(l,{size:"small",value:e.limit,"onUpdate:value":t[0]||(t[0]=o=>e.limit=o),options:e.limitOptions},null,8,["value","options"]),h(d,{value:e.sortType,"onUpdate:value":t[1]||(t[1]=o=>e.sortType=o),name:"radiogroup"},{default:f(()=>[h(c,null,{default:f(()=>[(b(!0),C(I,null,j(e.sortOptions,o=>(b(),A(u,{key:o.value,value:o.value},{default:f(()=>[z(M(o.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})])],64)}var Rt=B(Nt,[["render",Ot],["__scopeId","data-v-05887df4"]]);const Vt=T({name:"referenceChart",components:{NSpace:R,NSelect:q,NRadio:W,NRadioGroup:J},setup(){const e=y(),t=y(),{value:a,limitOptions:n}=oe(),{value:r,sortOptions:s}=de(),l=P(()=>`http://localhost:${window.preloadState.port}/chart/reference?limit=${a.value}&sort=${r.value}`),{onFetchResponse:u,data:c,onFetchError:d}=L(l,{refetch:!0}).json(),o=P(()=>c.value&&c.value.nodes?c.value.nodes.map(i=>E({},i)).sort((i,v)=>v.reference-i.reference):[]);return d(i=>{console.log(i)}),u(()=>{var i,v,m,D;t.value?t.value.changeData(o.value):(t.value=new ee(e.value,{data:o.value,width:(v=(i=e.value)==null?void 0:i.offsetWidth)!=null?v:0,height:(D=(m=e.value)==null?void 0:m.offsetHeight)!=null?D:0,xField:"fileName",yField:"reference",padding:"auto",appendPadding:10,color:"#40bf80",tooltip:{formatter(F){return{name:"\u88AB\u5F15\u7528\u6B21\u6570",value:`${F.reference}`}}}}),t.value.render())}),X(t,e),{chartRef:e,limitOptions:n,limit:a,sortType:r,sortOptions:s}}}),Lt=e=>(G("data-v-408ff517"),e=e(),Y(),e),Ut=Lt(()=>_("div",{class:"chart-title"},"\u88AB\u5F15\u7528\u6B21\u6570",-1)),jt={class:"chart-main",id:"reference-chart",ref:"chartRef"},Gt={class:"chart-tool"};function Yt(e,t,a,n,r,s){const l=p("n-select"),u=p("n-radio"),c=p("n-space"),d=p("n-radio-group");return b(),C(I,null,[Ut,_("div",jt,null,512),_("div",Gt,[h(c,null,{default:f(()=>[h(l,{size:"small",value:e.limit,"onUpdate:value":t[0]||(t[0]=o=>e.limit=o),options:e.limitOptions},null,8,["value","options"]),h(d,{value:e.sortType,"onUpdate:value":t[1]||(t[1]=o=>e.sortType=o),name:"radiogroup"},{default:f(()=>[h(c,null,{default:f(()=>[(b(!0),C(I,null,j(e.sortOptions,o=>(b(),A(u,{key:o.value,value:o.value},{default:f(()=>[z(M(o.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})])],64)}var Ht=B(Vt,[["render",Yt],["__scopeId","data-v-408ff517"]]);const Wt=T({name:"typesChart",components:{NSpace:R,NSelect:q},setup(){const e=y(),t=y(),a=P(()=>`http://localhost:${window.preloadState.port}/chart/types`),{onFetchResponse:n,data:r,onFetchError:s}=L(a.value,{refetch:!0}).json(),l=P(()=>{var u,c;return(c=(u=r.value)==null?void 0:u.types)!=null?c:[]});return s(u=>{console.log(u)}),n(()=>{var u,c,d,o;t.value?t.value.changeData(l.value):(console.log("chartData",l.value),t.value=new Ee(e.value,{data:l.value,width:(c=(u=e.value)==null?void 0:u.offsetWidth)!=null?c:0,height:(o=(d=e.value)==null?void 0:d.offsetHeight)!=null?o:0,angleField:"num",colorField:"fileType",padding:16,label:{type:"inner",offset:"-30%",content:({percent:i})=>`${(i*100).toFixed(0)}%`,style:{fontSize:14,textAlign:"center"}},interactions:[{type:"element-active"}]}),t.value.render())}),X(t,e),{chartRef:e}}}),Jt=e=>(G("data-v-25e7897e"),e=e(),Y(),e),Kt=Jt(()=>_("div",{class:"chart-title"},"\u7C7B\u578B\u6BD4\u4F8B",-1)),qt={class:"chart-main",id:"types-chart",ref:"chartRef"};function Xt(e,t,a,n,r,s){return b(),C(I,null,[Kt,_("div",qt,null,512)],64)}var Qt=B(Wt,[["render",Xt],["__scopeId","data-v-25e7897e"]]);const Zt=T({name:"Chart",components:{"size-chart":At,"deps-chart":Rt,"reference-chart":Ht,"types-chart":Qt},setup(){}}),xt={class:"chart"},ea=_("header",{class:"chart-header"},"Chart Analysis",-1),ta={class:"chart-content"},aa={class:"chart-content-item"},na={class:"chart-content-item"},oa={class:"chart-content-item"},la={class:"chart-content-item"};function sa(e,t,a,n,r,s){const l=p("size-chart"),u=p("deps-chart"),c=p("reference-chart"),d=p("types-chart");return b(),C("div",xt,[ea,_("section",ta,[_("div",aa,[h(l)]),_("div",na,[h(u)]),_("div",oa,[h(c)]),_("div",la,[h(d)])])])}var ra=B(Zt,[["render",sa]]);const pe=e=>x(e).format("YYYY-MM-DD"),ua=e=>`${(Number(e)/1024).toFixed(2)}kb`,ia=(e,t)=>[{type:"selection"},{title:"\u6587\u4EF6\u540D",key:"name",align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"ctime",align:"center",render(a){const n=a==null?void 0:a.ctime;return n?pe(n):"none"}},{title:"\u66F4\u65B0\u65F6\u95F4",key:"utime",align:"center",render(a){const n=a==null?void 0:a.utime;return n?pe(n):"none"}},{title:"\u6587\u4EF6\u5927\u5C0F",key:"fileSize",align:"center",render(a){const n=a==null?void 0:a.fileSize;return n?ua(n):"none"}},{title:"\u4F9D\u8D56\u6570",key:"deps",align:"center",render(a){return a.deps.length}},{title:"\u64CD\u4F5C",key:"action",align:"center",render(a){return O("div",{style:"width:100%;display:flex;justify-content:center"},[O(te,{text:!0,style:"margin-right:10px",onClick:n=>{e(a)}},{default:()=>"\u8BE6\u60C5"}),O(te,{text:!0,textColor:"red",onClick:()=>{t(a)}},{default:()=>"\u5220\u9664"})])}}];const ca=T({name:"fileNodeDetail",props:{detail:{type:Object,default:()=>null},visible:{type:Boolean,default:!1},setDetailVisible:{type:Function,default:()=>{}}},components:{NModal:ie,NList:Te,NListItem:Be,NSkeleton:Ae,NSpace:R},setup(){}}),da={key:1,class:"table-detail"},pa={class:"table-detail-path"},ha={class:"table-detail-deps-list"},_a={class:"table-detail-deps-list-title"};function va(e,t,a,n,r,s){const l=p("n-skeleton"),u=p("n-list-item"),c=p("n-list"),d=p("n-space"),o=p("n-modal");return b(),A(o,{show:e.visible,"onUpdate:show":t[0]||(t[0]=i=>e.visible=i),preset:"card",size:"medium",style:{width:"60vw"},title:"\u8BE6\u60C5\u4FE1\u606F",bordered:!1,"mask-closable":"",onUpdateShow:e.setDetailVisible},{default:f(()=>[e.detail?(b(),C("section",da,[h(d,{vertical:!0},{default:f(()=>{var i,v;return[_("div",pa,"\u8DEF\u5F84\uFF1A"+M((v=(i=e.detail)==null?void 0:i.path)!=null?v:""),1),_("div",ha,[_("div",_a,"\u5185\u90E8\u4F9D\u8D56\uFF1A"+M(e.detail.deps.length)+" \u4E2A",1),h(c,{bordered:""},{default:f(()=>[(b(!0),C(I,null,j(e.detail.deps,m=>(b(),A(u,{key:m.path},{default:f(()=>[z(M(m.path),1)]),_:2},1024))),128))]),_:1})])]}),_:1})])):(b(),A(l,{key:0,text:"",repeat:5}))]),_:1},8,["show","onUpdateShow"])}var ma=B(ca,[["render",va],["__scopeId","data-v-eb5c921a"]]);const fa=T({name:"LoadingModal",props:{visible:{type:Boolean,default:!1},limit:{type:Number,default:1},success:{type:Number,default:1},fail:{type:Number,default:0}},components:{NModal:ie,NSpace:R,NProgress:Ne},setup(e){return{percent:P(()=>(Number(e.success+e.fail)/Number(e.limit)*100).toFixed(0))}}}),ga=_("div",null,"\u6B63\u5728\u5220\u9664\u5566\uFF0C\u522B\u6025\uFF5E\uFF5E",-1),ya={style:{color:"lightblue"}},$a={style:{color:"red"}};function Fa(e,t,a,n,r,s){const l=p("n-progress"),u=p("n-space"),c=p("n-modal");return b(),A(c,{show:e.visible,"onUpdate:show":t[0]||(t[0]=d=>e.visible=d),preset:"card",size:"medium",style:{width:"40vw"},title:"\u4EFB\u52A1\u8FDB\u5EA6",bordered:!1,"mask-closable":!1},{default:f(()=>[h(u,{vertical:!0},{default:f(()=>[ga,h(l,{type:"line",status:"success",height:24,percentage:Number(e.percent),"border-radius":"12px 12px 12px 12px"},{default:f(()=>[z(M(e.percent)+"% ",1)]),_:1},8,["percentage"]),_("div",ya,"\u5DF2\u5B8C\u6210\u4E86"+M(e.success)+"\u4E2A",1),_("div",$a,"\u6709"+M(e.fail)+"\u4E2A\u5220\u9664\u5931\u8D25\u4E86\uFF01",1)]),_:1})]),_:1},8,["show"])}var ba=B(fa,[["render",Fa]]);const Da=T({name:"Table",components:{NDataTable:Pe,NFormItem:ze,NButton:te,NInput:Me,NForm:Ie,NDatePicker:Oe,NPagination:Re,NSpace:R,Detail:ma,LoadingModal:ba},setup(){const e=Ve(),t=y(!1),a=y(0),n=y(),r=y(!1),s=S=>{r.value=S},c=ia(S=>{r.value=!0,n.value=S},S=>{e.warning({title:"\u63D0\u793A",content:"\u786E\u5B9A\u8981\u5220\u9664\u6307\u5B9A\u7684\u6587\u4EF6\u5417\uFF1F",positiveText:"\u5220\u9664",negativeText:"\u4E0D\u5220",onPositiveClick:()=>new Promise((N,H)=>{ce.post(`http://localhost:${window.preloadState.port}/table/delete`,{path:S.path}).then(ve=>(ve.data.result&&D(),N))})})}),d=P(()=>v.value?v.value.data:[]),o=Le({page:1,pageSize:10,name:"",updatedAt:null,createdAt:null}),i=P(()=>{const S=new URL(`http://localhost:${window.preloadState.port}/table`),N=S.searchParams;return o.createdAt&&(N.set("ctimeStart",String(o.createdAt[0])),N.set("ctimeEnd",String(o.createdAt[1]))),o.updatedAt&&(N.set("utimeStart",String(o.updatedAt[0])),N.set("utimeEnd",String(o.updatedAt[1]))),o.name&&o.name!==""&&N.set("name",o.name),N.set("page",String(o.page)),N.set("pageSize",String(o.pageSize)),S.toString()}),{data:v,onFetchFinally:m,execute:D}=L(i,{refetch:!0,beforeFetch(){t.value=!0}}).json();m(()=>{t.value=!1,a.value=v.value?v.value.total:0});const F=S=>{o.page=S},$=y(!1),g=y([]),w=y(0),k=y(0);return{searchParams:o,loading:t,tableData:d,tableColumn:c,total:a,changePage:F,detailInfo:n,detailVisible:r,setDetailVisible:s,handleSelect:S=>{g.value=S},currentSelections:g,batchRemoveFiles:()=>{console.log("\u5F53\u524D\u9009\u4E2D\u4E86",g.value),e.warning({title:"\u63D0\u793A",content:"\u786E\u5B9A\u8981\u5220\u9664\u6307\u5B9A\u7684\u6587\u4EF6\u5417\uFF1F",positiveText:"\u5220\u9664",negativeText:"\u4E0D\u5220",onPositiveClick:()=>{$.value=!0;for(let S=0;S<g.value.length;S++){const N=g.value[S];ce.post(`http://localhost:${window.preloadState.port}/table/delete`,{path:N}).then(H=>{H.data&&(w.value=w.value+1)}).catch(H=>{k.value=k.value+1}).finally(()=>{w.value+k.value===g.value.length&&setTimeout(()=>{$.value=!1,k.value=0,w.value=0,D()},2e3)})}}})},loadingModalVisible:$,success:w,fail:k}}}),wa={class:"table"},Sa={class:"table-tool"},Ca=z("\u641C\u7D22"),ka={class:"table-container"},Ea=z("\u5220\u9664");function Ta(e,t,a,n,r,s){const l=p("n-input"),u=p("n-form-item"),c=p("n-date-picker"),d=p("n-button"),o=p("n-form"),i=p("n-data-table"),v=p("n-pagination"),m=p("n-space"),D=p("Detail"),F=p("LoadingModal");return b(),C("div",wa,[_("section",Sa,[h(o,{inline:"","label-width":80,model:e.searchParams,"label-placement":"left",ref:"formRef"},{default:f(()=>[h(u,{label:"\u6587\u4EF6\u540D",path:"searchParams.name"},{default:f(()=>[h(l,{placeholder:"\u6587\u4EF6\u540D\u6216\u8DEF\u5F84",value:e.searchParams.name,"onUpdate:value":t[0]||(t[0]=$=>e.searchParams.name=$)},null,8,["value"])]),_:1}),h(u,{label:"\u66F4\u65B0\u65F6\u95F4",path:"searchParams.updatedAt"},{default:f(()=>[h(c,{value:e.searchParams.updatedAt,"onUpdate:value":t[1]||(t[1]=$=>e.searchParams.updatedAt=$),type:"datetimerange",clearable:""},null,8,["value"])]),_:1}),h(u,{label:"\u521B\u5EFA\u65F6\u95F4",path:"searchParams.createdAt"},{default:f(()=>[h(c,{value:e.searchParams.createdAt,"onUpdate:value":t[2]||(t[2]=$=>e.searchParams.createdAt=$),type:"datetimerange",clearable:""},null,8,["value"])]),_:1}),h(u,null,{default:f(()=>[h(d,null,{default:f(()=>[Ca]),_:1})]),_:1})]),_:1},8,["model"])]),_("section",ka,[h(m,{vertical:""},{default:f(()=>[e.currentSelections.length?(b(),A(d,{key:0,onClick:e.batchRemoveFiles},{default:f(()=>[Ea]),_:1},8,["onClick"])):Ue("",!0),h(i,{columns:e.tableColumn,data:e.tableData,loading:e.loading,"row-key":$=>$.path,"onUpdate:checkedRowKeys":e.handleSelect},null,8,["columns","data","loading","row-key","onUpdate:checkedRowKeys"]),h(m,{justify:"center"},{default:f(()=>[h(v,{page:e.searchParams.page,"onUpdate:page":t[3]||(t[3]=$=>e.searchParams.page=$),"item-count":e.total,onChange:e.changePage},null,8,["page","item-count","onChange"])]),_:1})]),_:1})]),h(D,{detail:e.detailInfo,visible:e.detailVisible,setDetailVisible:e.setDetailVisible},null,8,["detail","visible","setDetailVisible"]),h(F,{visible:e.loadingModalVisible,limit:e.currentSelections.length,success:e.success,fail:e.fail},null,8,["visible","limit","success","fail"])])}var Ba=B(Da,[["render",Ta]]);const Aa=T({name:"Menu",components:{"n-menu":je},props:{collapsed:{type:Boolean,require:!0}},setup(e,t){const a=y([]),n=Ge();return Ye(()=>{var u;const l=_e.find(c=>c.name==="Layout");l&&((u=l.children)==null?void 0:u.length)&&(a.value=l.children.map(c=>{var d;return{label:(d=c.meta)==null?void 0:d.title,key:c.path}}))}),{menuOptions:a,renderMenuIcon:l=>l.key==="/graph"?O(ae,null,{default:()=>O(He)}):l.key==="/chart"?O(ae,null,{default:()=>O(We)}):O(ae,null,{default:()=>O(Je)}),handleClick:(l,u)=>{n.push({path:l})}}}});function Na(e,t,a,n,r,s){const l=p("n-menu");return b(),A(l,{collapsed:e.collapsed,"collapsed-width":64,"collapsed-icon-size":22,options:e.menuOptions,"render-icon":e.renderMenuIcon,"onUpdate:value":e.handleClick},null,8,["collapsed","options","render-icon","onUpdate:value"])}var Pa=B(Aa,[["render",Na]]);const za=T({name:"Layout",components:{NSpace:R,NLayout:Ke,Menu:Pa,NLayoutSider:qe},setup(){return{collapsed:y(!0)}}});function Ma(e,t,a,n,r,s){const l=p("Menu"),u=p("n-layout-sider"),c=p("router-view"),d=p("n-layout"),o=p("n-space");return b(),A(o,{vertical:""},{default:f(()=>[h(d,{"content-style":{height:"100vh"},"has-sider":""},{default:f(()=>[h(u,{bordered:"","collapse-mode":"width","collapsed-width":64,width:240,collapsed:e.collapsed,"show-trigger":"",onCollapse:t[0]||(t[0]=i=>e.collapsed=!0),onExpand:t[1]||(t[1]=i=>e.collapsed=!1)},{default:f(()=>[h(l,{collapsed:e.collapsed},null,8,["collapsed"])]),_:1},8,["collapsed"]),h(d,{embedded:""},{default:f(()=>[h(c)]),_:1})]),_:1})]),_:1})}var he=B(za,[["render",Ma]]);const _e=[{path:"/",component:he,name:"Layout",redirect(){return{name:"Graph"}},children:[{path:"/graph",component:Dt,name:"Graph",meta:{title:"\u4F9D\u8D56\u6811"}},{path:"/chart",component:ra,name:"Chart",meta:{title:"\u5206\u6790\u56FE"}},{path:"/table",component:Ba,name:"Table",meta:{title:"\u8868\u683C\u5206\u6790"}}]}],Ia=Xe({history:Qe(),routes:_e});const Oa=T({name:"PageLoading"}),Q=e=>(G("data-v-9f7b7bb4"),e=e(),Y(),e),Ra={class:"sk-folding-cube"},Va=Q(()=>_("div",{class:"sk-cube1 sk-cube"},null,-1)),La=Q(()=>_("div",{class:"sk-cube2 sk-cube"},null,-1)),Ua=Q(()=>_("div",{class:"sk-cube4 sk-cube"},null,-1)),ja=Q(()=>_("div",{class:"sk-cube3 sk-cube"},null,-1)),Ga=[Va,La,Ua,ja];function Ya(e,t,a,n,r,s){return b(),C("div",Ra,Ga)}var Ha=B(Oa,[["render",Ya],["__scopeId","data-v-9f7b7bb4"]]);const Wa=T({name:"App",components:{PageLoading:Ha,Layout:he,NDialogProvider:Ze},setup(){const e=y(!1);return Z(()=>{setTimeout(()=>{e.value=!0},2e3)}),{isInitFinished:e}}}),Ja={class:"container"},Ka={key:0,class:"loading-wrappper"},qa=_("p",null,"\u8FD8\u5728\u521D\u59CB\u5316\u554A\uFF0C\u7B49\u4E00\u4E0B\uFF5E",-1),Xa={key:1,class:"main-wrapper"};function Qa(e,t,a,n,r,s){const l=p("PageLoading"),u=p("router-view"),c=p("n-dialog-provider");return b(),A(c,null,{default:f(()=>[_("div",Ja,[e.isInitFinished?(b(),C("div",Xa,[h(u)])):(b(),C("div",Ka,[qa,h(l)]))])]),_:1})}var Za=B(Wa,[["render",Qa]]);xe(Za).use(Ia).mount("#app");
