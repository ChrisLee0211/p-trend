var $e=Object.defineProperty,be=Object.defineProperties;var Fe=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var De=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var re=(e,t,a)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,T=(e,t)=>{for(var a in t||(t={}))De.call(t,a)&&re(e,a,t[a]);if(se)for(var a of se(t))we.call(t,a)&&re(e,a,t[a]);return e},G=(e,t)=>be(e,Fe(t));import{r as g,o as x,M as Se,T as ke,d as ee,n as ue,G as Ce,a as N,N as Ee,b as J,c as K,e as Te,f as Ne,g as O,u as Be,h as U,i as ie,w as q,j as z,k as p,l as k,m as h,p as m,q as $,s as v,F as R,t as j,v as ce,x as M,y as A,z as I,A as X,C as te,B as Y,D as H,P as Ae,E as V,H as ae,I as de,J as Pe,K as ze,L as Me,O as Ie,Q as Oe,R as Re,S as Ve,U as Le,V as Ue,W as Ge,X as je,Y as Ye,Z as pe,_ as He,$ as We,a0 as Je,a1 as Ke,a2 as qe,a3 as ne,a4 as Xe,a5 as Qe,a6 as Ze,a7 as xe,a8 as et,a9 as tt,aa as at,ab as nt,ac as ot}from"./vendor.af09249a.js";const lt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const n of l.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function a(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=a(r);fetch(r.href,l)}};lt();const st=(e,t)=>{const a=g();return x(()=>{a.value=new Se({container:document.getElementById(t),className:e,type:"delegate",size:[150,150]})}),[a]},rt=e=>{const t=g();return x(()=>{t.value=new ke({container:document.getElementById(e),offsetX:10,offsetY:10,getContent(a){var r,l;const s=(l=(r=a==null?void 0:a.item)==null?void 0:r._cfg)==null?void 0:l.model;if(s){const n=s.path||"none",o=s.name,i='<div style="max-width:200px;word-break: break-all;">',c="</div>",u=`
                    <p>\u6A21\u5757\u540D\u79F0:  ${o}</p>
                    <p>\u8DEF\u5F84:  ${n}</p> 
                    `;let d="";const f=["utime","ctime","fileSize","importTimes"],_={utime:{label:"\u6700\u8FD1\u4FEE\u6539\u65F6\u95F4",getValue(y){return ee(y).format("YYYY-MM-DD")}},ctime:{label:"\u521B\u5EFA\u65F6\u95F4",getValue(y){return ee(y).format("YYYY-MM-DD")}},fileSize:{label:"\u6587\u4EF6\u5927\u5C0F",getValue(y){return`${(Number(y)/1024).toFixed(2)}kb`}},importTimes:{label:"\u88AB\u5F15\u7528\u6B21\u6570",getValue(y){return`${y}`}}};for(const y in s)if(f.includes(y)&&s[y]){const D=_[y].label,C=_[y].getValue(s[y]);d=d+`<p>${D}: ${C}</p>`}return i+u+d+c}return"<h1></h1>"},itemTypes:["node"]})}),[t]},ut=(e,t)=>{var l;const a=[],s={id:t,children:[],name:t},r=e.map((n,o)=>{let i={id:n.path,children:[],name:n.name};return a.includes(n.path)?i.id=n.path+`${o}`:a.push(n.path),i=T(T({},i),n),n.deps.length&&(i.children=n.deps.map((c,u)=>{let d={id:c.path,childen:[],name:c.name};return a.includes(c.path)?d.id=`${Math.random()*10}`+c.path:a.push(c.path),d=T(T({},d),c),d})),i});return r.length&&((l=s==null?void 0:s.children)==null||l.push(...r)),s},he=(e,t,a)=>{var c,u;let s=T({},e);try{s=JSON.parse(JSON.stringify(e))}catch(d){console.error(d)}const r={};for(let d=0;d<t.length;d++)r[t[d].moduleId]=d;const l=Object.keys(r),n={id:a,name:s.name,path:s.path,isFolder:s.isFolder,children:s.children},o=[];let i=0;for(o.push(n);o.length;){i=i+1;const d=o.pop();if(l.includes(d.moduleId)){const f=r[d.moduleId],_=t[f];d.fileSize=_.fileSize||0,d.ctime=_.ctime,d.mtime=_.utime,d.importTimes=(c=_==null?void 0:_.reference)==null?void 0:c.length,d.isDep=!0}if((u=d==null?void 0:d.children)==null?void 0:u.length)for(let f=0;f<d.children.length;f++){const _=d.children[f];_.id=`${_.path}-${i}`,o.push(_)}else d.id=`${d.path}-${i}`}return n},oe=(e,t)=>{var n;let a=T({},e);try{a=JSON.parse(JSON.stringify(e))}catch(o){console.error(o)}const s={id:t,name:a.name,path:a.path,isFolder:a.isFolder,children:a.children},r=[];let l=0;for(r.push(s);r.length;){l=l+1;const o=r.pop();if((n=o==null?void 0:o.children)==null?void 0:n.length){const i=o.children.map(c=>G(T({},c),{id:`${c.path}-${l}`}));r.push(...i)}else o.id=`${o.path}-${l}`}return s},it=e=>{var r;const t=T({},e),a={name:t.path,path:t.path,key:t.path,label:t.path,children:t.children.filter(l=>l.isFolder).map(l=>G(T({},l),{parent:{name:t.name,path:t.path},key:"",label:""}))},s=[];for(s.push(...a.children);s.length;){const l=s.pop();l.isFolder&&(l.children=l.children.filter(o=>o.isFolder).map(o=>G(T({},o),{parent:{name:l.name,path:l.path},key:"",label:""})),l.children.length?s.push(...l.children):Reflect.deleteProperty(l,"children"));const n=l.path.split((r=l==null?void 0:l.parent)==null?void 0:r.path);l.label=n[n.length-1],l.key=l.path}return[a]},_e=new Map,ct=(e,t)=>{var n;const a=_e.get(e);if(a)return a;const s=t;let r=null;const l=[];for(l.push(s);l.length;){const o=l.pop();if(o.path===e){r=o,_e.set(e,o);break}((n=o.children)==null?void 0:n.length)&&l.push(...o.children)}return r},dt=e=>{const t=g(null),a=g(!0),s=g(!0);return{graphIns:t,initGraph:(l,n)=>{l&&a.value&&ue(()=>{t.value=new Ce.TreeGraph({container:e.value,modes:{default:[{type:"collapse-expand",onChange:function(i,c){const u=i.getModel();return u.collapsed=c,!0}},"drag-canvas","zoom-canvas"]},defaultNode:{size:26,anchorPoints:[[0,.5],[1,.5]]},defaultEdge:{type:"cubic-horizontal"},plugins:n,layout:{type:"compactBox",direction:"LR",getId:function(i){return i.id},getHeight:function(){return 20},getWidth:function(){return 20},getVGap:function(){return 10},getHGap:function(){return 100}}}),t.value.node(o=>{let i={label:o.name,labelCfg:{offset:10,position:o.children&&o.children.length>0?"left":"right"}};return(o==null?void 0:o.isDep)&&(i=G(T({},i),{style:{shadowBlur:10,fill:"#1a414e",stroke:"black"}})),i}),t.value.on("afterlayout",o=>{a.value=!1,s.value=!1}),t.value.data(l),t.value.render(),t.value.fitView()})},loading:s}};var B=(e,t)=>{const a=e.__vccOpts||e;for(const[s,r]of t)a[s]=r;return a};const pt=N({name:"Graph",components:{NSpin:Ee,NRadio:J,NRadioGroup:K,NSwitch:Te,NTreeSelect:Ne,NSpace:O},setup(){const e=Be(),t=g(null),[a]=st("miniMap","miniMap"),[s]=rt("tooltip"),r=g(null),{initGraph:l,graphIns:n,loading:o}=dt(t),{onFetchResponse:i,data:c}=U(`http://localhost:${window.preloadState.port}/graph`,{method:"GET"}).json();i(b=>{b.status===200&&(r.value=oe(c.value.tree,c.value.entry),l(r.value,[a.value,s.value]))});const u=ce((b,w)=>{n.value&&(n.value.changeSize(b,w),n.value.fitView(20))},100);ie(t,b=>{const w=b[0],{width:E,height:L}=w.contentRect;u(E,L)});const d=g("project"),f=[{label:"\u9879\u76EE\u7ED3\u6784",value:"project"},{label:"\u6A21\u5757\u7ED3\u6784",value:"module"}];q(d,(b,w)=>{var E,L,S;b==="project"&&((E=n.value)==null||E.changeData(oe(c.value.tree,c.value.entry))),b==="module"&&((L=n.value)==null||L.changeData(ut(c.value.nodes,c.value.entry)),_.value=!1),(S=n.value)==null||S.fitView()});const _=g(!1),F=z(()=>d.value!=="project");q(_,b=>{ue(()=>{var E,L,S;let w=(E=n.value)==null?void 0:E.save();b===!0?w=he(w,c.value.deps,c.value.entry):w=oe(w,c.value.entry),(L=n.value)==null||L.changeData(w),(S=n.value)==null||S.fitView()})});const y=g([]),D=g("");return q(r,()=>{r.value&&(y.value=it(c.value.tree),y.value.length&&(D.value=y.value[0].key))}),{loading:o,graphRef:t,graphType:f,selectGraphType:d,showDeps:_,disableShowDeps:F,dirOpts:y,dirSrc:D,handleChangeDir:b=>{var w;try{if(r.value&&n.value){let E=ct(b,r.value);if(E)_.value&&(E=he(E,c.value.deps,c.value.entry)),n.value.changeData(E),(w=n.value)==null||w.fitView();else throw new Error}else throw new Error}catch{e.error({meta:"\u8B66\u544A",content:"\u65E0\u6CD5\u89E3\u6790\u8BE5\u76EE\u5F55"})}}}}}),ht={class:"graph"},_t={class:"graph-main-wrapper"},vt={class:"graph-tools"},mt={class:"graph-tools-panel"},ft={class:"graph-tools-panel-item"},gt={class:"graph-tools-panel-item-main"},yt=M(" \u56FE\u7C7B\u578B\uFF1A "),$t={class:"graph-tools-panel-item-main"},bt=M(" \u5F53\u524D\u76EE\u5F55\uFF1A "),Ft={class:"graph-tools-panel-item"},Dt=M(" \u4F9D\u8D56\u6807\u8BB0\uFF1A "),wt={id:"graph-root"},St={class:"graph-container",ref:"graphRef"},kt=v("div",{id:"miniMap"},null,-1),Ct={id:"tooltip",class:"tooltip-wrap",ref:"tooltipRef"};function Et(e,t,a,s,r,l){const n=p("n-radio"),o=p("n-space"),i=p("n-radio-group"),c=p("n-tree-select"),u=p("n-switch"),d=p("n-spin");return $(),k("div",ht,[h(d,{size:"large",show:e.loading},{default:m(()=>[v("div",_t,[v("div",vt,[v("div",mt,[v("div",ft,[v("div",gt,[yt,h(i,{value:e.selectGraphType,"onUpdate:value":t[0]||(t[0]=f=>e.selectGraphType=f),name:"radiogroup"},{default:m(()=>[h(o,null,{default:m(()=>[($(!0),k(R,null,j(e.graphType,f=>($(),A(n,{key:f.value,value:f.value},{default:m(()=>[M(I(f.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),v("div",$t,[bt,h(c,{options:e.dirOpts,"virtual-scroll":"",value:e.dirSrc,"onUpdate:value":e.handleChangeDir},null,8,["options","value","onUpdate:value"])])]),v("div",Ft,[Dt,h(u,{value:e.showDeps,"onUpdate:value":t[1]||(t[1]=f=>e.showDeps=f),disabled:e.disableShowDeps},null,8,["value","disabled"])])])]),v("div",wt,[v("div",St,null,512),kt,v("div",Ct,null,512)])])]),_:1},8,["show"])])}var Tt=B(pt,[["render",Et]]);const Nt=e=>{if(!e)return 0+"b";let t=e+"b",a=[e],s=0,r=["B","KB","MB","GB","TB"];for(;a.length;){const l=a.pop(),n=Number(l)/1024;s=s+1,t=n.toFixed(2)+r[s],n>1024&&a.push(n)}return t},le=()=>{const e=[{label:"\u524D5",value:5},{label:"\u524D10",value:10},{label:"\u524D15",value:15}];return{value:g(e[0].value),limitOptions:e}},Q=(e,t)=>{const a=ce((s,r)=>{e.value&&e.value.changeSize(s,r)});ie(t,s=>{const r=s[0],{width:l,height:n}=r.contentRect;a(l,n)})};const Bt=N({name:"fileSizeChart",components:{NSpace:O,NRadio:J,NRadioGroup:K,NSelect:X},setup(){const e=g(),t=g(),a=g("folder"),s=g({}),r=_=>{if(Number(_)in s.value)return s.value[_];{const F=Nt(_);return s.value[_]=F,F}},l=_=>_.slice(0).sort((F,y)=>y.fileSize-F.fileSize),{value:n,limitOptions:o}=le(),i=z(()=>`http://localhost:${window.preloadState.port}/chart/size?limit=${n.value}`),{onFetchResponse:c,data:u,isFetching:d}=U(i,{refetch:!0}).json();c(()=>{var F,y,D,C;if(u.value===null)return;const _=a.value==="folder"?u.value.tree:u.value.nodes;t.value?t.value.changeData(l(_)):(t.value=new te(e.value,{data:l(_),width:(y=(F=e.value)==null?void 0:F.offsetWidth)!=null?y:0,height:(C=(D=e.value)==null?void 0:D.offsetHeight)!=null?C:0,xField:"fileName",yField:"fileSize",padding:"auto",color:"#a3a3c2",appendPadding:10,tooltip:{formatter(b){return{name:"\u6587\u4EF6\u5927\u5C0F",value:`${r(b.fileSize)}`}}}}),t.value.render())}),Q(t,e);const f=[{value:"folder",label:"\u76EE\u5F55"},{value:"module",label:"\u6A21\u5757"}];return q(a,_=>{if(u.value===null)return;const F=_==="folder"?u.value.tree:u.value.nodes;t.value&&t.value.changeData(l(F))}),{chartRef:e,chartTypes:f,chartType:a,limitOptions:o,limit:n}}}),At=e=>(Y("data-v-1f4c7d86"),e=e(),H(),e),Pt=At(()=>v("div",{class:"chart-title"},"\u6587\u4EF6\u5927\u5C0F",-1)),zt={class:"chart-main",id:"size-chart",ref:"chartRef"},Mt={class:"chart-tool"};function It(e,t,a,s,r,l){const n=p("n-radio"),o=p("n-space"),i=p("n-radio-group"),c=p("n-select");return $(),k(R,null,[Pt,v("div",zt,null,512),v("div",Mt,[h(o,null,{default:m(()=>[h(i,{value:e.chartType,"onUpdate:value":t[0]||(t[0]=u=>e.chartType=u),name:""},{default:m(()=>[h(o,null,{default:m(()=>[($(!0),k(R,null,j(e.chartTypes,u=>($(),A(n,{key:u.value,value:u.value},{default:m(()=>[M(I(u.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"]),h(c,{size:"small",value:e.limit,"onUpdate:value":t[1]||(t[1]=u=>e.limit=u),options:e.limitOptions},null,8,["value","options"])]),_:1})])],64)}var Ot=B(Bt,[["render",It],["__scopeId","data-v-1f4c7d86"]]);const ve=()=>({value:g("down"),sortOptions:[{label:"\u5347\u5E8F",value:"up"},{label:"\u5012\u5E8F",value:"down"}]});const Rt=N({name:"dependenceChart",components:{NSpace:O,NSelect:X,NRadio:J,NRadioGroup:K},setup(){const e=g(),t=g(),{value:a,limitOptions:s}=le(),{value:r,sortOptions:l}=ve(),n=z(()=>`http://localhost:${window.preloadState.port}/chart/deps?limit=${a.value}&sort=${r.value}`),{onFetchResponse:o,data:i,onFetchError:c}=U(n,{refetch:!0}).json(),u=z(()=>i.value&&i.value.nodes?i.value.nodes:[]);return c(d=>{console.log(d)}),o(()=>{var d,f,_,F;t.value?t.value.changeData(u.value):(t.value=new te(e.value,{data:u.value,width:(f=(d=e.value)==null?void 0:d.offsetWidth)!=null?f:0,height:(F=(_=e.value)==null?void 0:_.offsetHeight)!=null?F:0,xField:"fileName",yField:"depsLength",padding:"auto",color:"#ff4d4d",appendPadding:10,tooltip:{formatter(y){return{name:"\u4F9D\u8D56\u6570\u91CF",value:`${y.depsLength}`}}}}),t.value.render())}),Q(t,e),{chartRef:e,limitOptions:s,limit:a,sortType:r,sortOptions:l}}}),Vt=e=>(Y("data-v-7ae095d9"),e=e(),H(),e),Lt=Vt(()=>v("div",{class:"chart-title"},"\u4F9D\u8D56\u6570",-1)),Ut={class:"chart-main",id:"deps-chart",ref:"chartRef"},Gt={class:"chart-tool"};function jt(e,t,a,s,r,l){const n=p("n-select"),o=p("n-radio"),i=p("n-space"),c=p("n-radio-group");return $(),k(R,null,[Lt,v("div",Ut,null,512),v("div",Gt,[h(i,null,{default:m(()=>[h(n,{size:"small",value:e.limit,"onUpdate:value":t[0]||(t[0]=u=>e.limit=u),options:e.limitOptions},null,8,["value","options"]),h(c,{value:e.sortType,"onUpdate:value":t[1]||(t[1]=u=>e.sortType=u),name:"radiogroup"},{default:m(()=>[h(i,null,{default:m(()=>[($(!0),k(R,null,j(e.sortOptions,u=>($(),A(o,{key:u.value,value:u.value},{default:m(()=>[M(I(u.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})])],64)}var Yt=B(Rt,[["render",jt],["__scopeId","data-v-7ae095d9"]]);const Ht=N({name:"referenceChart",components:{NSpace:O,NSelect:X,NRadio:J,NRadioGroup:K},setup(){const e=g(),t=g(),{value:a,limitOptions:s}=le(),{value:r,sortOptions:l}=ve(),n=z(()=>`http://localhost:${window.preloadState.port}/chart/reference?limit=${a.value}&sort=${r.value}`),{onFetchResponse:o,data:i,onFetchError:c}=U(n,{refetch:!0}).json(),u=z(()=>i.value&&i.value.nodes?i.value.nodes.map(d=>T({},d)):[]);return c(d=>{console.log(d)}),o(()=>{var d,f,_,F;t.value?(t.value.changeData(u.value),t.value.update({})):(t.value=new te(e.value,{data:u.value,width:(f=(d=e.value)==null?void 0:d.offsetWidth)!=null?f:0,height:(F=(_=e.value)==null?void 0:_.offsetHeight)!=null?F:0,xField:"filePath",yField:"reference",padding:"auto",appendPadding:10,color:"#40bf80",tooltip:{formatter(y){return{name:"\u88AB\u5F15\u7528\u6B21\u6570",value:`${y.reference}`}}},xAxis:{label:{formatter(y,D,C){var w;const b=(w=u.value[C])==null?void 0:w.fileName;return b!=null?b:y}}}}),t.value.render())}),Q(t,e),{chartRef:e,limitOptions:s,limit:a,sortType:r,sortOptions:l}}}),Wt=e=>(Y("data-v-6e6ba024"),e=e(),H(),e),Jt=Wt(()=>v("div",{class:"chart-title"},"\u88AB\u5F15\u7528\u6B21\u6570",-1)),Kt={class:"chart-main",id:"reference-chart",ref:"chartRef"},qt={class:"chart-tool"};function Xt(e,t,a,s,r,l){const n=p("n-select"),o=p("n-radio"),i=p("n-space"),c=p("n-radio-group");return $(),k(R,null,[Jt,v("div",Kt,null,512),v("div",qt,[h(i,null,{default:m(()=>[h(n,{size:"small",value:e.limit,"onUpdate:value":t[0]||(t[0]=u=>e.limit=u),options:e.limitOptions},null,8,["value","options"]),h(c,{value:e.sortType,"onUpdate:value":t[1]||(t[1]=u=>e.sortType=u),name:"radiogroup"},{default:m(()=>[h(i,null,{default:m(()=>[($(!0),k(R,null,j(e.sortOptions,u=>($(),A(o,{key:u.value,value:u.value},{default:m(()=>[M(I(u.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})])],64)}var Qt=B(Ht,[["render",Xt],["__scopeId","data-v-6e6ba024"]]);const Zt=N({name:"typesChart",components:{NSpace:O,NSelect:X},setup(){const e=g(),t=g(),a=z(()=>`http://localhost:${window.preloadState.port}/chart/types`),{onFetchResponse:s,data:r,onFetchError:l}=U(a.value,{refetch:!0}).json(),n=z(()=>{var o,i;return(i=(o=r.value)==null?void 0:o.types)!=null?i:[]});return l(o=>{console.log(o)}),s(()=>{var o,i,c,u;t.value?t.value.changeData(n.value):(console.log("chartData",n.value),t.value=new Ae(e.value,{data:n.value,width:(i=(o=e.value)==null?void 0:o.offsetWidth)!=null?i:0,height:(u=(c=e.value)==null?void 0:c.offsetHeight)!=null?u:0,angleField:"num",colorField:"fileType",padding:16,label:{type:"inner",offset:"-30%",content:({percent:d})=>`${(d*100).toFixed(0)}%`,style:{fontSize:14,textAlign:"center"}},interactions:[{type:"element-active"}]}),t.value.render())}),Q(t,e),{chartRef:e}}}),xt=e=>(Y("data-v-25e7897e"),e=e(),H(),e),ea=xt(()=>v("div",{class:"chart-title"},"\u7C7B\u578B\u6BD4\u4F8B",-1)),ta={class:"chart-main",id:"types-chart",ref:"chartRef"};function aa(e,t,a,s,r,l){return $(),k(R,null,[ea,v("div",ta,null,512)],64)}var na=B(Zt,[["render",aa],["__scopeId","data-v-25e7897e"]]);const oa=N({name:"Chart",components:{"size-chart":Ot,"deps-chart":Yt,"reference-chart":Qt,"types-chart":na},setup(){}}),la={class:"chart"},sa=v("header",{class:"chart-header"},"Chart Analysis",-1),ra={class:"chart-content"},ua={class:"chart-content-item"},ia={class:"chart-content-item"},ca={class:"chart-content-item"},da={class:"chart-content-item"};function pa(e,t,a,s,r,l){const n=p("size-chart"),o=p("deps-chart"),i=p("reference-chart"),c=p("types-chart");return $(),k("div",la,[sa,v("section",ra,[v("div",ua,[h(n)]),v("div",ia,[h(o)]),v("div",ca,[h(i)]),v("div",da,[h(c)])])])}var ha=B(oa,[["render",pa]]);const me=e=>ee(e).format("YYYY-MM-DD"),_a=e=>`${(Number(e)/1024).toFixed(2)}kb`,va=(e,t)=>[{type:"selection"},{title:"\u6587\u4EF6\u540D",key:"name",align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"ctime",align:"center",render(a){const s=a==null?void 0:a.ctime;return s?me(s):"none"}},{title:"\u66F4\u65B0\u65F6\u95F4",key:"utime",align:"center",render(a){const s=a==null?void 0:a.utime;return s?me(s):"none"}},{title:"\u6587\u4EF6\u5927\u5C0F",key:"fileSize",align:"center",render(a){const s=a==null?void 0:a.fileSize;return s?_a(s):"none"}},{title:"\u4F9D\u8D56\u6570",key:"deps",align:"center",render(a){return a.deps.length}},{title:"\u64CD\u4F5C",key:"action",align:"center",render(a){return V("div",{style:"width:100%;display:flex;justify-content:center"},[V(ae,{text:!0,style:"margin-right:10px",onClick:s=>{e(a)}},{default:()=>"\u8BE6\u60C5"}),V(ae,{text:!0,textColor:"red",onClick:()=>{t(a)}},{default:()=>"\u5220\u9664"})])}}];const ma=N({name:"fileNodeDetail",props:{detail:{type:Object,default:()=>null},visible:{type:Boolean,default:!1},setDetailVisible:{type:Function,default:()=>{}}},components:{NModal:de,NList:Pe,NListItem:ze,NSkeleton:Me,NSpace:O},setup(){}}),fa={key:1,class:"table-detail"},ga={class:"table-detail-path"},ya={class:"table-detail-deps-list"},$a={class:"table-detail-deps-list-title"};function ba(e,t,a,s,r,l){const n=p("n-skeleton"),o=p("n-list-item"),i=p("n-list"),c=p("n-space"),u=p("n-modal");return $(),A(u,{show:e.visible,"onUpdate:show":t[0]||(t[0]=d=>e.visible=d),preset:"card",size:"medium",style:{width:"60vw"},title:"\u8BE6\u60C5\u4FE1\u606F",bordered:!1,"mask-closable":"",onUpdateShow:e.setDetailVisible},{default:m(()=>[e.detail?($(),k("section",fa,[h(c,{vertical:!0},{default:m(()=>{var d,f;return[v("div",ga,"\u8DEF\u5F84\uFF1A"+I((f=(d=e.detail)==null?void 0:d.path)!=null?f:""),1),v("div",ya,[v("div",$a,"\u5185\u90E8\u4F9D\u8D56\uFF1A"+I(e.detail.deps.length)+" \u4E2A",1),h(i,{bordered:""},{default:m(()=>[($(!0),k(R,null,j(e.detail.deps,_=>($(),A(o,{key:_.path},{default:m(()=>[M(I(_.path),1)]),_:2},1024))),128))]),_:1})])]}),_:1})])):($(),A(n,{key:0,text:"",repeat:5}))]),_:1},8,["show","onUpdateShow"])}var Fa=B(ma,[["render",ba],["__scopeId","data-v-eb5c921a"]]);const Da=N({name:"LoadingModal",props:{visible:{type:Boolean,default:!1},limit:{type:Number,default:1},success:{type:Number,default:1},fail:{type:Number,default:0}},components:{NModal:de,NSpace:O,NProgress:Ie},setup(e){return{percent:z(()=>(Number(e.success+e.fail)/Number(e.limit)*100).toFixed(0))}}}),wa=v("div",null,"\u6B63\u5728\u5220\u9664\u5566\uFF0C\u522B\u6025\uFF5E\uFF5E",-1),Sa={style:{color:"lightblue"}},ka={style:{color:"red"}};function Ca(e,t,a,s,r,l){const n=p("n-progress"),o=p("n-space"),i=p("n-modal");return $(),A(i,{show:e.visible,"onUpdate:show":t[0]||(t[0]=c=>e.visible=c),preset:"card",size:"medium",style:{width:"40vw"},title:"\u4EFB\u52A1\u8FDB\u5EA6",bordered:!1,"mask-closable":!1},{default:m(()=>[h(o,{vertical:!0},{default:m(()=>[wa,h(n,{type:"line",status:"success",height:24,percentage:Number(e.percent),"border-radius":"12px 12px 12px 12px"},{default:m(()=>[M(I(e.percent)+"% ",1)]),_:1},8,["percentage"]),v("div",Sa,"\u5DF2\u5B8C\u6210\u4E86"+I(e.success)+"\u4E2A",1),v("div",ka,"\u6709"+I(e.fail)+"\u4E2A\u5220\u9664\u5931\u8D25\u4E86\uFF01",1)]),_:1})]),_:1},8,["show"])}var Ea=B(Da,[["render",Ca]]);const Ta=N({name:"Table",components:{NDataTable:Oe,NFormItem:Re,NButton:ae,NInput:Ve,NForm:Le,NDatePicker:Ue,NPagination:Ge,NSpace:O,Detail:Fa,LoadingModal:Ea},setup(){const e=je(),t=g(!1),a=g(0),s=g(),r=g(!1),l=S=>{r.value=S},i=va(S=>{r.value=!0,s.value=S},S=>{e.warning({title:"\u63D0\u793A",content:"\u786E\u5B9A\u8981\u5220\u9664\u6307\u5B9A\u7684\u6587\u4EF6\u5417\uFF1F",positiveText:"\u5220\u9664",negativeText:"\u4E0D\u5220",onPositiveClick:()=>new Promise((P,W)=>{pe.post(`http://localhost:${window.preloadState.port}/table/delete`,{path:S.path}).then(ye=>{ye.data.result&&F(),P()})})})}),c=z(()=>f.value?f.value.data:[]),u=Ye({page:1,pageSize:10,name:"",updatedAt:null,createdAt:null}),d=z(()=>{const S=new URL(`http://localhost:${window.preloadState.port}/table`),P=S.searchParams;return u.createdAt&&(P.set("ctimeStart",String(u.createdAt[0])),P.set("ctimeEnd",String(u.createdAt[1]))),u.updatedAt&&(P.set("utimeStart",String(u.updatedAt[0])),P.set("utimeEnd",String(u.updatedAt[1]))),u.name&&u.name!==""&&P.set("name",u.name),P.set("page",String(u.page)),P.set("pageSize",String(u.pageSize)),S.toString()}),{data:f,onFetchFinally:_,execute:F}=U(d,{refetch:!0,beforeFetch(){t.value=!0}}).json();_(()=>{t.value=!1,a.value=f.value?f.value.total:0});const y=S=>{u.page=S},D=g(!1),C=g([]),b=g(0),w=g(0);return{searchParams:u,loading:t,tableData:c,tableColumn:i,total:a,changePage:y,detailInfo:s,detailVisible:r,setDetailVisible:l,handleSelect:S=>{C.value=S},currentSelections:C,batchRemoveFiles:()=>{console.log("\u5F53\u524D\u9009\u4E2D\u4E86",C.value),e.warning({title:"\u63D0\u793A",content:"\u786E\u5B9A\u8981\u5220\u9664\u6307\u5B9A\u7684\u6587\u4EF6\u5417\uFF1F",positiveText:"\u5220\u9664",negativeText:"\u4E0D\u5220",onPositiveClick:()=>{D.value=!0;for(let S=0;S<C.value.length;S++){const P=C.value[S];pe.post(`http://localhost:${window.preloadState.port}/table/delete`,{path:P}).then(W=>{W.data&&(b.value=b.value+1)}).catch(W=>{w.value=w.value+1}).finally(()=>{b.value+w.value===C.value.length&&setTimeout(()=>{D.value=!1,w.value=0,b.value=0,F()},2e3)})}}})},loadingModalVisible:D,success:b,fail:w}}}),Na={class:"table"},Ba={class:"table-tool"},Aa=M("\u641C\u7D22"),Pa={class:"table-container"},za=M("\u5220\u9664");function Ma(e,t,a,s,r,l){const n=p("n-input"),o=p("n-form-item"),i=p("n-date-picker"),c=p("n-button"),u=p("n-form"),d=p("n-data-table"),f=p("n-pagination"),_=p("n-space"),F=p("Detail"),y=p("LoadingModal");return $(),k("div",Na,[v("section",Ba,[h(u,{inline:"","label-width":80,model:e.searchParams,"label-placement":"left",ref:"formRef"},{default:m(()=>[h(o,{label:"\u6587\u4EF6\u540D",path:"searchParams.name"},{default:m(()=>[h(n,{placeholder:"\u6587\u4EF6\u540D\u6216\u8DEF\u5F84",value:e.searchParams.name,"onUpdate:value":t[0]||(t[0]=D=>e.searchParams.name=D)},null,8,["value"])]),_:1}),h(o,{label:"\u66F4\u65B0\u65F6\u95F4",path:"searchParams.updatedAt"},{default:m(()=>[h(i,{value:e.searchParams.updatedAt,"onUpdate:value":t[1]||(t[1]=D=>e.searchParams.updatedAt=D),type:"datetimerange",clearable:""},null,8,["value"])]),_:1}),h(o,{label:"\u521B\u5EFA\u65F6\u95F4",path:"searchParams.createdAt"},{default:m(()=>[h(i,{value:e.searchParams.createdAt,"onUpdate:value":t[2]||(t[2]=D=>e.searchParams.createdAt=D),type:"datetimerange",clearable:""},null,8,["value"])]),_:1}),h(o,null,{default:m(()=>[h(c,null,{default:m(()=>[Aa]),_:1})]),_:1})]),_:1},8,["model"])]),v("section",Pa,[h(_,{vertical:""},{default:m(()=>[e.currentSelections.length?($(),A(c,{key:0,onClick:e.batchRemoveFiles},{default:m(()=>[za]),_:1},8,["onClick"])):He("",!0),h(d,{columns:e.tableColumn,data:e.tableData,loading:e.loading,"row-key":D=>D.path,"onUpdate:checkedRowKeys":e.handleSelect},null,8,["columns","data","loading","row-key","onUpdate:checkedRowKeys"]),h(_,{justify:"center"},{default:m(()=>[h(f,{page:e.searchParams.page,"onUpdate:page":t[3]||(t[3]=D=>e.searchParams.page=D),"item-count":e.total,onChange:e.changePage},null,8,["page","item-count","onChange"])]),_:1})]),_:1})]),h(F,{detail:e.detailInfo,visible:e.detailVisible,setDetailVisible:e.setDetailVisible},null,8,["detail","visible","setDetailVisible"]),h(y,{visible:e.loadingModalVisible,limit:e.currentSelections.length,success:e.success,fail:e.fail},null,8,["visible","limit","success","fail"])])}var Ia=B(Ta,[["render",Ma]]);const Oa=N({name:"Menu",components:{"n-menu":We},props:{collapsed:{type:Boolean,require:!0}},setup(e,t){const a=g([]),s=Je();return Ke(()=>{var o;const n=ge.find(i=>i.name==="Layout");n&&((o=n.children)==null?void 0:o.length)&&(a.value=n.children.map(i=>{var c;return{label:(c=i.meta)==null?void 0:c.title,key:i.path}}))}),{menuOptions:a,renderMenuIcon:n=>n.key==="/graph"?V(ne,null,{default:()=>V(qe)}):n.key==="/chart"?V(ne,null,{default:()=>V(Xe)}):V(ne,null,{default:()=>V(Qe)}),handleClick:(n,o)=>{s.push({path:n})}}}});function Ra(e,t,a,s,r,l){const n=p("n-menu");return $(),A(n,{collapsed:e.collapsed,"collapsed-width":64,"collapsed-icon-size":22,options:e.menuOptions,"render-icon":e.renderMenuIcon,"onUpdate:value":e.handleClick},null,8,["collapsed","options","render-icon","onUpdate:value"])}var Va=B(Oa,[["render",Ra]]);const La=N({name:"Layout",components:{NSpace:O,NLayout:Ze,Menu:Va,NLayoutSider:xe},setup(){return{collapsed:g(!0)}}});function Ua(e,t,a,s,r,l){const n=p("Menu"),o=p("n-layout-sider"),i=p("router-view"),c=p("n-layout"),u=p("n-space");return $(),A(u,{vertical:""},{default:m(()=>[h(c,{"content-style":{height:"100vh"},"has-sider":""},{default:m(()=>[h(o,{bordered:"","collapse-mode":"width","collapsed-width":64,width:240,collapsed:e.collapsed,"show-trigger":"",onCollapse:t[0]||(t[0]=d=>e.collapsed=!0),onExpand:t[1]||(t[1]=d=>e.collapsed=!1)},{default:m(()=>[h(n,{collapsed:e.collapsed},null,8,["collapsed"])]),_:1},8,["collapsed"]),h(c,{embedded:""},{default:m(()=>[h(i)]),_:1})]),_:1})]),_:1})}var fe=B(La,[["render",Ua]]);const ge=[{path:"/",component:fe,name:"Layout",redirect(){return{name:"Graph"}},children:[{path:"/graph",component:Tt,name:"Graph",meta:{title:"\u4F9D\u8D56\u6811"}},{path:"/chart",component:ha,name:"Chart",meta:{title:"\u5206\u6790\u56FE"}},{path:"/table",component:Ia,name:"Table",meta:{title:"\u8868\u683C\u5206\u6790"}}]}],Ga=et({history:tt(),routes:ge});const ja=N({name:"PageLoading"}),Z=e=>(Y("data-v-9f7b7bb4"),e=e(),H(),e),Ya={class:"sk-folding-cube"},Ha=Z(()=>v("div",{class:"sk-cube1 sk-cube"},null,-1)),Wa=Z(()=>v("div",{class:"sk-cube2 sk-cube"},null,-1)),Ja=Z(()=>v("div",{class:"sk-cube4 sk-cube"},null,-1)),Ka=Z(()=>v("div",{class:"sk-cube3 sk-cube"},null,-1)),qa=[Ha,Wa,Ja,Ka];function Xa(e,t,a,s,r,l){return $(),k("div",Ya,qa)}var Qa=B(ja,[["render",Xa],["__scopeId","data-v-9f7b7bb4"]]);const Za=N({name:"App",components:{PageLoading:Qa,Layout:fe,NDialogProvider:at,NNotificationProvider:nt},setup(){const e=g(!1);return x(()=>{setTimeout(()=>{e.value=!0},2e3)}),{isInitFinished:e}}}),xa={class:"container"},en={key:0,class:"loading-wrappper"},tn=v("p",null,"\u8FD8\u5728\u521D\u59CB\u5316\u554A\uFF0C\u7B49\u4E00\u4E0B\uFF5E",-1),an={key:1,class:"main-wrapper"};function nn(e,t,a,s,r,l){const n=p("PageLoading"),o=p("router-view"),i=p("n-notification-provider"),c=p("n-dialog-provider");return $(),A(c,null,{default:m(()=>[h(i,null,{default:m(()=>[v("div",xa,[e.isInitFinished?($(),k("div",an,[h(o)])):($(),k("div",en,[tn,h(n)]))])]),_:1})]),_:1})}var on=B(Za,[["render",nn]]);ot(on).use(Ga).mount("#app");
