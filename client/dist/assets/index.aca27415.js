var $e=Object.defineProperty,be=Object.defineProperties;var De=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable;var ue=(e,t,a)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,N=(e,t)=>{for(var a in t||(t={}))we.call(t,a)&&ue(e,a,t[a]);if(se)for(var a of se(t))Ee.call(t,a)&&ue(e,a,t[a]);return e},G=(e,t)=>be(e,De(t));import{r as F,o as x,M as ke,T as Ce,d as ee,n as re,G as Se,a as P,N as Be,b as J,c as K,e as Te,f as Ne,g as R,u as ie,h as U,i as ce,w as q,j as M,k as p,l as B,m as h,p as m,q as w,s as v,F as V,t as j,v as de,x as I,y as z,z as O,A as X,C as te,B as H,D as Y,P as Pe,E as Ae,H as ze,I as L,J as ae,K as pe,L as Me,O as Ie,Q as Oe,R as Re,S as Ve,U as Le,V as Ue,W as Ge,X as je,Y as He,Z as Ye,_ as We,$ as he,a0 as Je,a1 as Ke,a2 as qe,a3 as Xe,a4 as Qe,a5 as ne,a6 as Ze,a7 as xe,a8 as et,a9 as tt,aa as at,ab as nt,ac as ot,ad as lt,ae as st}from"./vendor.74c25ba9.js";const ut=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const o of u.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerpolicy&&(u.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?u.credentials="include":s.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(s){if(s.ep)return;s.ep=!0;const u=a(s);fetch(s.href,u)}};ut();const rt=(e,t)=>{const a=F();return x(()=>{a.value=new ke({container:document.getElementById(t),className:e,type:"delegate",size:[150,150]})}),[a]},it=e=>{const t=F();return x(()=>{t.value=new Ce({container:document.getElementById(e),offsetX:10,offsetY:10,getContent(a){var s,u;const n=(u=(s=a==null?void 0:a.item)==null?void 0:s._cfg)==null?void 0:u.model;if(n){const o=n.path||"none",l=n.name,r='<div style="max-width:200px;word-break: break-all;">',c="</div>",i=`
                    <p>\u6A21\u5757\u540D\u79F0:  ${l}</p>
                    <p>\u8DEF\u5F84:  ${o}</p> 
                    `;let d="";const f=["utime","ctime","fileSize","importTimes"],g={utime:{label:"\u6700\u8FD1\u4FEE\u6539\u65F6\u95F4",getValue(_){return ee(_).format("YYYY-MM-DD")}},ctime:{label:"\u521B\u5EFA\u65F6\u95F4",getValue(_){return ee(_).format("YYYY-MM-DD")}},fileSize:{label:"\u6587\u4EF6\u5927\u5C0F",getValue(_){return`${(Number(_)/1024).toFixed(2)}kb`}},importTimes:{label:"\u88AB\u5F15\u7528\u6B21\u6570",getValue(_){return`${_}`}}};for(const _ in n)if(f.includes(_)&&n[_]){const y=g[_].label,k=g[_].getValue(n[_]);d=d+`<p>${y}: ${k}</p>`}return r+i+d+c}return"<h1></h1>"},itemTypes:["node"]})}),[t]},ct=(e,t)=>{var u;const a=[],n={id:t,children:[],name:t},s=e.map((o,l)=>{let r={id:o.path,children:[],name:o.name};return a.includes(o.path)?r.id=o.path+`${l}`:a.push(o.path),r=N(N({},r),o),o.deps.length&&(r.children=o.deps.map((c,i)=>{let d={id:c.path,childen:[],name:c.name};return a.includes(c.path)?d.id=`${Math.random()*10}`+c.path:a.push(c.path),d=N(N({},d),c),d})),r});return s.length&&((u=n==null?void 0:n.children)==null||u.push(...s)),n},ve=(e,t,a)=>{var c,i;let n=N({},e);try{n=JSON.parse(JSON.stringify(e))}catch(d){console.error(d)}const s={};for(let d=0;d<t.length;d++)s[t[d].moduleId]=d;const u=Object.keys(s),o={id:a,name:n.name,path:n.path,isFolder:n.isFolder,children:n.children},l=[];let r=0;for(l.push(o);l.length;){r=r+1;const d=l.pop();if(u.includes(d.moduleId)){const f=s[d.moduleId],g=t[f];d.fileSize=g.fileSize||0,d.ctime=g.ctime,d.mtime=g.utime,d.importTimes=(c=g==null?void 0:g.reference)==null?void 0:c.length,d.isDep=!0}if((i=d==null?void 0:d.children)==null?void 0:i.length)for(let f=0;f<d.children.length;f++){const g=d.children[f];g.id=`${g.path}-${r}`,l.push(g)}else d.id=`${d.path}-${r}`}return o},oe=(e,t)=>{var o;let a=N({},e);try{a=JSON.parse(JSON.stringify(e))}catch(l){console.error(l)}const n={id:t,name:a.name,path:a.path,isFolder:a.isFolder,children:a.children},s=[];let u=0;for(s.push(n);s.length;){u=u+1;const l=s.pop();if((o=l==null?void 0:l.children)==null?void 0:o.length){const r=l.children.map(c=>G(N({},c),{id:`${c.path}-${u}`}));s.push(...r)}else l.id=`${l.path}-${u}`}return n},dt=e=>{var s;const t=N({},e),a={name:t.path,path:t.path,key:t.path,label:t.path,children:t.children.filter(u=>u.isFolder).map(u=>G(N({},u),{parent:{name:t.name,path:t.path},key:"",label:""}))},n=[];for(n.push(...a.children);n.length;){const u=n.pop();u.isFolder&&(u.children=u.children.filter(l=>l.isFolder).map(l=>G(N({},l),{parent:{name:u.name,path:u.path},key:"",label:""})),u.children.length?n.push(...u.children):Reflect.deleteProperty(u,"children"));const o=u.path.split((s=u==null?void 0:u.parent)==null?void 0:s.path);u.label=o[o.length-1],u.key=u.path}return[a]},_e=new Map,pt=(e,t)=>{var o;const a=_e.get(e);if(a)return a;const n=t;let s=null;const u=[];for(u.push(n);u.length;){const l=u.pop();if(l.path===e){s=l,_e.set(e,l);break}((o=l.children)==null?void 0:o.length)&&u.push(...l.children)}return s},ht=e=>{const t=F(null),a=F(!0),n=F(!0);return{graphIns:t,initGraph:(u,o)=>{u&&a.value&&re(()=>{t.value=new Se.TreeGraph({container:e.value,modes:{default:[{type:"collapse-expand",onChange:function(r,c){const i=r.getModel();return i.collapsed=c,!0}},"drag-canvas","zoom-canvas"]},defaultNode:{size:26,anchorPoints:[[0,.5],[1,.5]]},defaultEdge:{type:"cubic-horizontal"},plugins:o,layout:{type:"compactBox",direction:"LR",getId:function(r){return r.id},getHeight:function(){return 20},getWidth:function(){return 20},getVGap:function(){return 10},getHGap:function(){return 100}}}),t.value.node(l=>{let r={label:l.name,labelCfg:{offset:10,position:l.children&&l.children.length>0?"left":"right"}};return(l==null?void 0:l.isDep)&&(r=G(N({},r),{style:{shadowBlur:10,fill:"#1a414e",stroke:"black"}})),r}),t.value.on("afterlayout",l=>{a.value=!1,n.value=!1}),t.value.data(u),t.value.render(),t.value.fitView()})},loading:n}};var A=(e,t)=>{const a=e.__vccOpts||e;for(const[n,s]of t)a[n]=s;return a};const vt=P({name:"Graph",components:{NSpin:Be,NRadio:J,NRadioGroup:K,NSwitch:Te,NTreeSelect:Ne,NSpace:R},setup(){const e=ie(),t=F(null),[a]=rt("miniMap","miniMap"),[n]=it("tooltip"),s=F(null),{initGraph:u,graphIns:o,loading:l}=ht(t),{onFetchResponse:r,data:c}=U(`http://localhost:${window.preloadState.port}/graph`,{method:"GET"}).json();r($=>{$.status===200&&(s.value=oe(c.value.tree,c.value.entry),u(s.value,[a.value,n.value]))});const i=de(($,b)=>{o.value&&(o.value.changeSize($,b),o.value.fitView(20))},100);ce(t,$=>{const b=$[0],{width:E,height:S}=b.contentRect;i(E,S)});const d=F("project"),f=[{label:"\u9879\u76EE\u7ED3\u6784",value:"project"},{label:"\u6A21\u5757\u7ED3\u6784",value:"module"}];q(d,($,b)=>{var E,S,D;$==="project"&&((E=o.value)==null||E.changeData(oe(c.value.tree,c.value.entry))),$==="module"&&((S=o.value)==null||S.changeData(ct(c.value.nodes,c.value.entry)),g.value=!1),(D=o.value)==null||D.fitView()});const g=F(!1),C=M(()=>d.value!=="project");q(g,$=>{re(()=>{var E,S,D;let b=(E=o.value)==null?void 0:E.save();$===!0?b=ve(b,c.value.deps,c.value.entry):b=oe(b,c.value.entry),(S=o.value)==null||S.changeData(b),(D=o.value)==null||D.fitView()})});const _=F([]),y=F("");return q(s,()=>{s.value&&(_.value=dt(c.value.tree),_.value.length&&(y.value=_.value[0].key))}),{loading:l,graphRef:t,graphType:f,selectGraphType:d,showDeps:g,disableShowDeps:C,dirOpts:_,dirSrc:y,handleChangeDir:$=>{var b;try{if(s.value&&o.value){let E=pt($,s.value);if(E)g.value&&(E=ve(E,c.value.deps,c.value.entry)),o.value.changeData(E),(b=o.value)==null||b.fitView();else throw new Error}else throw new Error}catch{e.error({meta:"\u8B66\u544A",content:"\u65E0\u6CD5\u89E3\u6790\u8BE5\u76EE\u5F55"})}}}}}),_t={class:"graph"},ft={class:"graph-main-wrapper"},mt={class:"graph-tools"},gt={class:"graph-tools-panel"},Ft={class:"graph-tools-panel-item"},yt={class:"graph-tools-panel-item-main"},$t=I(" \u56FE\u7C7B\u578B\uFF1A "),bt={class:"graph-tools-panel-item-main"},Dt=I(" \u5F53\u524D\u76EE\u5F55\uFF1A "),wt={class:"graph-tools-panel-item"},Et=I(" \u4F9D\u8D56\u6807\u8BB0\uFF1A "),kt={id:"graph-root"},Ct={class:"graph-container",ref:"graphRef"},St=v("div",{id:"miniMap"},null,-1),Bt={id:"tooltip",class:"tooltip-wrap",ref:"tooltipRef"};function Tt(e,t,a,n,s,u){const o=p("n-radio"),l=p("n-space"),r=p("n-radio-group"),c=p("n-tree-select"),i=p("n-switch"),d=p("n-spin");return w(),B("div",_t,[h(d,{size:"large",show:e.loading},{default:m(()=>[v("div",ft,[v("div",mt,[v("div",gt,[v("div",Ft,[v("div",yt,[$t,h(r,{value:e.selectGraphType,"onUpdate:value":t[0]||(t[0]=f=>e.selectGraphType=f),name:"radiogroup"},{default:m(()=>[h(l,null,{default:m(()=>[(w(!0),B(V,null,j(e.graphType,f=>(w(),z(o,{key:f.value,value:f.value},{default:m(()=>[I(O(f.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),v("div",bt,[Dt,h(c,{options:e.dirOpts,"virtual-scroll":"",value:e.dirSrc,"onUpdate:value":e.handleChangeDir},null,8,["options","value","onUpdate:value"])])]),v("div",wt,[Et,h(i,{value:e.showDeps,"onUpdate:value":t[1]||(t[1]=f=>e.showDeps=f),disabled:e.disableShowDeps},null,8,["value","disabled"])])])]),v("div",kt,[v("div",Ct,null,512),St,v("div",Bt,null,512)])])]),_:1},8,["show"])])}var Nt=A(vt,[["render",Tt]]);const Pt=e=>{if(!e)return 0+"b";let t=e+"b",a=[e],n=0,s=["B","KB","MB","GB","TB"];for(;a.length;){const u=a.pop(),o=Number(u)/1024;n=n+1,t=o.toFixed(2)+s[n],o>1024&&a.push(o)}return t},le=()=>{const e=[{label:"\u524D5",value:5},{label:"\u524D10",value:10},{label:"\u524D15",value:15}];return{value:F(e[0].value),limitOptions:e}},Q=(e,t)=>{const a=de((n,s)=>{e.value&&e.value.changeSize(n,s)});ce(t,n=>{const s=n[0],{width:u,height:o}=s.contentRect;a(u,o)})};const At=P({name:"fileSizeChart",components:{NSpace:R,NRadio:J,NRadioGroup:K,NSelect:X},setup(e,{emit:t}){const a=F(),n=F(),s=F("folder"),u=F({}),o=_=>{if(Number(_)in u.value)return u.value[_];{const y=Pt(_);return u.value[_]=y,y}},l=_=>_.slice(0).sort((y,k)=>k.fileSize-y.fileSize),{value:r,limitOptions:c}=le(),i=M(()=>`http://localhost:${window.preloadState.port}/chart/size?limit=${r.value}`),{onFetchResponse:d,data:f,isFetching:g}=U(i,{refetch:!0}).json();d(()=>{var y,k,$,b;if(f.value===null)return;const _=s.value==="folder"?f.value.tree:f.value.nodes;n.value?n.value.changeData(l(_)):(n.value=new te(a.value,{data:l(_),width:(k=(y=a.value)==null?void 0:y.offsetWidth)!=null?k:0,height:(b=($=a.value)==null?void 0:$.offsetHeight)!=null?b:0,xField:"fileName",yField:"fileSize",padding:"auto",color:"#a3a3c2",appendPadding:10,tooltip:{showTitle:!0,title:"\u70B9\u51FB\u67F1\u4F53\u4EE5\u67E5\u770B\u6587\u4EF6\u8DEF\u5F84",formatter(E){return{name:"\u6587\u4EF6\u5927\u5C0F",value:`${o(E.fileSize)}`}}}}),n.value.render(),n.value.on("element:click",E=>{var D;const S=E.data;if(S.data){const T=(D=S.data)==null?void 0:D.filePath;t("handleClick",T)}}))}),Q(n,a);const C=[{value:"folder",label:"\u76EE\u5F55"},{value:"module",label:"\u6A21\u5757"}];return q(s,_=>{if(f.value===null)return;const y=_==="folder"?f.value.tree:f.value.nodes;n.value&&n.value.changeData(l(y))}),{chartRef:a,chartTypes:C,chartType:s,limitOptions:c,limit:r}}}),zt=e=>(H("data-v-1e37b4c9"),e=e(),Y(),e),Mt=zt(()=>v("div",{class:"chart-title"},"\u6587\u4EF6\u5927\u5C0F",-1)),It={class:"chart-main",id:"size-chart",ref:"chartRef"},Ot={class:"chart-tool"};function Rt(e,t,a,n,s,u){const o=p("n-radio"),l=p("n-space"),r=p("n-radio-group"),c=p("n-select");return w(),B(V,null,[Mt,v("div",It,null,512),v("div",Ot,[h(l,null,{default:m(()=>[h(r,{value:e.chartType,"onUpdate:value":t[0]||(t[0]=i=>e.chartType=i),name:""},{default:m(()=>[h(l,null,{default:m(()=>[(w(!0),B(V,null,j(e.chartTypes,i=>(w(),z(o,{key:i.value,value:i.value},{default:m(()=>[I(O(i.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"]),h(c,{size:"small",value:e.limit,"onUpdate:value":t[1]||(t[1]=i=>e.limit=i),options:e.limitOptions},null,8,["value","options"])]),_:1})])],64)}var Vt=A(At,[["render",Rt],["__scopeId","data-v-1e37b4c9"]]);const fe=()=>({value:F("down"),sortOptions:[{label:"\u5347\u5E8F",value:"up"},{label:"\u5012\u5E8F",value:"down"}]});const Lt=P({name:"dependenceChart",components:{NSpace:R,NSelect:X,NRadio:J,NRadioGroup:K},setup(e,{emit:t}){const a=F(),n=F(),{value:s,limitOptions:u}=le(),{value:o,sortOptions:l}=fe(),r=M(()=>`http://localhost:${window.preloadState.port}/chart/deps?limit=${s.value}&sort=${o.value}`),{onFetchResponse:c,data:i,onFetchError:d}=U(r,{refetch:!0}).json(),f=M(()=>i.value&&i.value.nodes?i.value.nodes:[]);return d(g=>{console.log(g)}),c(()=>{var g,C,_,y;n.value?n.value.changeData(f.value):(n.value=new te(a.value,{data:f.value,width:(C=(g=a.value)==null?void 0:g.offsetWidth)!=null?C:0,height:(y=(_=a.value)==null?void 0:_.offsetHeight)!=null?y:0,xField:"fileName",yField:"depsLength",padding:"auto",color:"#ff4d4d",appendPadding:10,tooltip:{showTitle:!0,title:"\u70B9\u51FB\u67F1\u4F53\u4EE5\u67E5\u770B\u6587\u4EF6\u8DEF\u5F84",formatter(k){return{name:"\u4F9D\u8D56\u6570\u91CF",value:`${k.depsLength}`}}}}),n.value.on("element:click",k=>{var b;const $=k.data;if($.data){const E=(b=$.data)==null?void 0:b.filePath;t("handleClick",E)}}),n.value.render())}),Q(n,a),{chartRef:a,limitOptions:u,limit:s,sortType:o,sortOptions:l}}}),Ut=e=>(H("data-v-a324f3d4"),e=e(),Y(),e),Gt=Ut(()=>v("div",{class:"chart-title"},"\u4F9D\u8D56\u6570",-1)),jt={class:"chart-main",id:"deps-chart",ref:"chartRef"},Ht={class:"chart-tool"};function Yt(e,t,a,n,s,u){const o=p("n-select"),l=p("n-radio"),r=p("n-space"),c=p("n-radio-group");return w(),B(V,null,[Gt,v("div",jt,null,512),v("div",Ht,[h(r,null,{default:m(()=>[h(o,{size:"small",value:e.limit,"onUpdate:value":t[0]||(t[0]=i=>e.limit=i),options:e.limitOptions},null,8,["value","options"]),h(c,{value:e.sortType,"onUpdate:value":t[1]||(t[1]=i=>e.sortType=i),name:"radiogroup"},{default:m(()=>[h(r,null,{default:m(()=>[(w(!0),B(V,null,j(e.sortOptions,i=>(w(),z(l,{key:i.value,value:i.value},{default:m(()=>[I(O(i.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})])],64)}var Wt=A(Lt,[["render",Yt],["__scopeId","data-v-a324f3d4"]]);const Jt=P({name:"referenceChart",components:{NSpace:R,NSelect:X,NRadio:J,NRadioGroup:K},setup(e,{emit:t}){const a=ie(),n=F(),s=F(),{value:u,limitOptions:o}=le(),{value:l,sortOptions:r}=fe(),c=M(()=>`http://localhost:${window.preloadState.port}/chart/reference?limit=${u.value}&sort=${l.value}`),{onFetchResponse:i,data:d,onFetchError:f}=U(c,{refetch:!0}).json(),g=M(()=>d.value&&d.value.nodes?d.value.nodes.map(C=>N({},C)):[]);return f(C=>{console.log(C),a.error({meta:"\u8B66\u544A",content:"\u52A0\u8F7D\u56FE\u8868\u5931\u8D25"})}),i(()=>{var C,_,y,k;s.value?(s.value.changeData(g.value),s.value.update({})):(s.value=new te(n.value,{data:g.value,width:(_=(C=n.value)==null?void 0:C.offsetWidth)!=null?_:0,height:(k=(y=n.value)==null?void 0:y.offsetHeight)!=null?k:0,xField:"fileName",yField:"reference",padding:"auto",appendPadding:10,color:"#40bf80",tooltip:{showTitle:!0,title:"\u70B9\u51FB\u67F1\u4F53\u4EE5\u67E5\u770B\u6587\u4EF6\u8DEF\u5F84",formatter($){return{name:"\u88AB\u5F15\u7528\u6B21\u6570",value:`${$.reference}`}}},xAxis:{label:{formatter($,b,E){var D;const S=(D=g.value[E])==null?void 0:D.fileName;return S!=null?S:$}}}}),s.value.render(),s.value.on("element:click",$=>{var E;const b=$.data;if(b.data){const S=(E=b.data)==null?void 0:E.filePath;t("handleClick",S)}}))}),Q(s,n),{chartRef:n,limitOptions:o,limit:u,sortType:l,sortOptions:r}}}),Kt=e=>(H("data-v-76f0b21d"),e=e(),Y(),e),qt=Kt(()=>v("div",{class:"chart-title"},"\u88AB\u5F15\u7528\u6B21\u6570",-1)),Xt={class:"chart-main",id:"reference-chart",ref:"chartRef"},Qt={class:"chart-tool"};function Zt(e,t,a,n,s,u){const o=p("n-select"),l=p("n-radio"),r=p("n-space"),c=p("n-radio-group");return w(),B(V,null,[qt,v("div",Xt,null,512),v("div",Qt,[h(r,null,{default:m(()=>[h(o,{size:"small",value:e.limit,"onUpdate:value":t[0]||(t[0]=i=>e.limit=i),options:e.limitOptions},null,8,["value","options"]),h(c,{value:e.sortType,"onUpdate:value":t[1]||(t[1]=i=>e.sortType=i),name:"radiogroup"},{default:m(()=>[h(r,null,{default:m(()=>[(w(!0),B(V,null,j(e.sortOptions,i=>(w(),z(l,{key:i.value,value:i.value},{default:m(()=>[I(O(i.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})])],64)}var xt=A(Jt,[["render",Zt],["__scopeId","data-v-76f0b21d"]]);const ea=P({name:"typesChart",components:{NSpace:R,NSelect:X},setup(){const e=F(),t=F(),a=M(()=>`http://localhost:${window.preloadState.port}/chart/types`),{onFetchResponse:n,data:s,onFetchError:u}=U(a.value,{refetch:!0}).json(),o=M(()=>{var l,r;return(r=(l=s.value)==null?void 0:l.types)!=null?r:[]});return u(l=>{console.log(l)}),n(()=>{var l,r,c,i;t.value?t.value.changeData(o.value):(console.log("chartData",o.value),t.value=new Pe(e.value,{data:o.value,width:(r=(l=e.value)==null?void 0:l.offsetWidth)!=null?r:0,height:(i=(c=e.value)==null?void 0:c.offsetHeight)!=null?i:0,angleField:"num",colorField:"fileType",padding:16,label:{type:"inner",offset:"-30%",content:({percent:d})=>`${(d*100).toFixed(0)}%`,style:{fontSize:14,textAlign:"center"}},interactions:[{type:"element-active"}]}),t.value.render())}),Q(t,e),{chartRef:e}}}),ta=e=>(H("data-v-25e7897e"),e=e(),Y(),e),aa=ta(()=>v("div",{class:"chart-title"},"\u7C7B\u578B\u6BD4\u4F8B",-1)),na={class:"chart-main",id:"types-chart",ref:"chartRef"};function oa(e,t,a,n,s,u){return w(),B(V,null,[aa,v("div",na,null,512)],64)}var la=A(ea,[["render",oa],["__scopeId","data-v-25e7897e"]]);const sa=P({name:"Chart",components:{"size-chart":Vt,"deps-chart":Wt,"reference-chart":xt,"types-chart":la},setup(){const e=F("");return{filePath:e,setFilePath:a=>{e.value=a}}}}),ua={class:"chart"},ra=v("header",{class:"chart-header"},"Chart Analysis",-1),ia={class:"chart-content"},ca={class:"chart-content-item"},da={class:"chart-content-item"},pa={class:"chart-content-item"},ha={class:"chart-content-item"};function va(e,t,a,n,s,u){const o=p("size-chart"),l=p("deps-chart"),r=p("reference-chart"),c=p("types-chart");return w(),B("div",ua,[ra,Ae(v("div",{class:"chart-helper"},"\u5F53\u524D\u6587\u4EF6: "+O(e.filePath),513),[[ze,e.filePath.length>0]]),v("section",ia,[v("div",ca,[h(o,{onHandleClick:e.setFilePath},null,8,["onHandleClick"])]),v("div",da,[h(l,{onHandleClick:e.setFilePath},null,8,["onHandleClick"])]),v("div",pa,[h(r,{onHandleClick:e.setFilePath},null,8,["onHandleClick"])]),v("div",ha,[h(c)])])])}var _a=A(sa,[["render",va]]);const me=e=>ee(e).format("YYYY-MM-DD"),fa=e=>`${(Number(e)/1024).toFixed(2)}kb`,ma=(e,t)=>[{type:"selection"},{title:"\u6587\u4EF6\u540D",key:"name",align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"ctime",align:"center",render(a){const n=a==null?void 0:a.ctime;return n?me(n):"none"}},{title:"\u66F4\u65B0\u65F6\u95F4",key:"utime",align:"center",render(a){const n=a==null?void 0:a.utime;return n?me(n):"none"}},{title:"\u6587\u4EF6\u5927\u5C0F",key:"fileSize",align:"center",render(a){const n=a==null?void 0:a.fileSize;return n?fa(n):"none"}},{title:"\u4F9D\u8D56\u6570",key:"deps",align:"center",render(a){return a.deps.length}},{title:"\u64CD\u4F5C",key:"action",align:"center",render(a){return L("div",{style:"width:100%;display:flex;justify-content:center"},[L(ae,{text:!0,style:"margin-right:10px",onClick:n=>{e(a)}},{default:()=>"\u8BE6\u60C5"}),L(ae,{text:!0,textColor:"red",onClick:()=>{t(a)}},{default:()=>"\u5220\u9664"})])}}];const ga=P({name:"fileNodeDetail",props:{detail:{type:Object,default:()=>null},visible:{type:Boolean,default:!1},setDetailVisible:{type:Function,default:()=>{}}},components:{NModal:pe,NList:Me,NListItem:Ie,NSkeleton:Oe,NSpace:R},setup(){}}),Fa={key:1,class:"table-detail"},ya={class:"table-detail-path"},$a={class:"table-detail-deps-list"},ba={class:"table-detail-deps-list-title"};function Da(e,t,a,n,s,u){const o=p("n-skeleton"),l=p("n-list-item"),r=p("n-list"),c=p("n-space"),i=p("n-modal");return w(),z(i,{show:e.visible,"onUpdate:show":t[0]||(t[0]=d=>e.visible=d),preset:"card",size:"medium",style:{width:"60vw"},title:"\u8BE6\u60C5\u4FE1\u606F",bordered:!1,"mask-closable":"",onUpdateShow:e.setDetailVisible},{default:m(()=>[e.detail?(w(),B("section",Fa,[h(c,{vertical:!0},{default:m(()=>{var d,f;return[v("div",ya,"\u8DEF\u5F84\uFF1A"+O((f=(d=e.detail)==null?void 0:d.path)!=null?f:""),1),v("div",$a,[v("div",ba,"\u5185\u90E8\u4F9D\u8D56\uFF1A"+O(e.detail.deps.length)+" \u4E2A",1),h(r,{bordered:""},{default:m(()=>[(w(!0),B(V,null,j(e.detail.deps,g=>(w(),z(l,{key:g.path},{default:m(()=>[I(O(g.path),1)]),_:2},1024))),128))]),_:1})])]}),_:1})])):(w(),z(o,{key:0,text:"",repeat:5}))]),_:1},8,["show","onUpdateShow"])}var wa=A(ga,[["render",Da],["__scopeId","data-v-eb5c921a"]]);const Ea=P({name:"LoadingModal",props:{visible:{type:Boolean,default:!1},limit:{type:Number,default:1},success:{type:Number,default:1},fail:{type:Number,default:0}},components:{NModal:pe,NSpace:R,NProgress:Re},setup(e){return{percent:M(()=>(Number(e.success+e.fail)/Number(e.limit)*100).toFixed(0))}}}),ka=v("div",null,"\u6B63\u5728\u5220\u9664\u5566\uFF0C\u522B\u6025\uFF5E\uFF5E",-1),Ca={style:{color:"lightblue"}},Sa={style:{color:"red"}};function Ba(e,t,a,n,s,u){const o=p("n-progress"),l=p("n-space"),r=p("n-modal");return w(),z(r,{show:e.visible,"onUpdate:show":t[0]||(t[0]=c=>e.visible=c),preset:"card",size:"medium",style:{width:"40vw"},title:"\u4EFB\u52A1\u8FDB\u5EA6",bordered:!1,"mask-closable":!1},{default:m(()=>[h(l,{vertical:!0},{default:m(()=>[ka,h(o,{type:"line",status:"success",height:24,percentage:Number(e.percent),"border-radius":"12px 12px 12px 12px"},{default:m(()=>[I(O(e.percent)+"% ",1)]),_:1},8,["percentage"]),v("div",Ca,"\u5DF2\u5B8C\u6210\u4E86"+O(e.success)+"\u4E2A",1),v("div",Sa,"\u6709"+O(e.fail)+"\u4E2A\u5220\u9664\u5931\u8D25\u4E86\uFF01",1)]),_:1})]),_:1},8,["show"])}var Ta=A(Ea,[["render",Ba]]);const Na=P({name:"Table",components:{NDataTable:Ve,NFormItem:Le,NButton:ae,NInput:Ue,NForm:Ge,NDatePicker:je,NPagination:He,NSpace:R,Detail:wa,LoadingModal:Ta},setup(){const e=Ye(),t=F(!1),a=F(0),n=F(),s=F(!1),u=D=>{s.value=D},r=ma(D=>{s.value=!0,n.value=D},D=>{e.warning({title:"\u63D0\u793A",content:"\u786E\u5B9A\u8981\u5220\u9664\u6307\u5B9A\u7684\u6587\u4EF6\u5417\uFF1F",positiveText:"\u5220\u9664",negativeText:"\u4E0D\u5220",onPositiveClick:()=>new Promise((T,W)=>{he.post(`http://localhost:${window.preloadState.port}/table/delete`,{path:D.path}).then(ye=>{ye.data.result&&C(),T()})})})}),c=M(()=>f.value?f.value.data:[]),i=We({page:1,pageSize:10,name:"",updatedAt:null,createdAt:null}),d=M(()=>{const D=new URL(`http://localhost:${window.preloadState.port}/table`),T=D.searchParams;return i.createdAt&&(T.set("ctimeStart",String(i.createdAt[0])),T.set("ctimeEnd",String(i.createdAt[1]))),i.updatedAt&&(T.set("utimeStart",String(i.updatedAt[0])),T.set("utimeEnd",String(i.updatedAt[1]))),i.name&&i.name!==""&&T.set("name",i.name),T.set("page",String(i.page)),T.set("pageSize",String(i.pageSize)),D.toString()}),{data:f,onFetchFinally:g,execute:C}=U(d,{refetch:!0,beforeFetch(){t.value=!0}}).json();g(()=>{t.value=!1,a.value=f.value?f.value.total:0});const _=D=>{i.page=D},y=F(!1),k=F([]),$=F(0),b=F(0);return{searchParams:i,loading:t,tableData:c,tableColumn:r,total:a,changePage:_,detailInfo:n,detailVisible:s,setDetailVisible:u,handleSelect:D=>{k.value=D},currentSelections:k,batchRemoveFiles:()=>{console.log("\u5F53\u524D\u9009\u4E2D\u4E86",k.value),e.warning({title:"\u63D0\u793A",content:"\u786E\u5B9A\u8981\u5220\u9664\u6307\u5B9A\u7684\u6587\u4EF6\u5417\uFF1F",positiveText:"\u5220\u9664",negativeText:"\u4E0D\u5220",onPositiveClick:()=>{y.value=!0;for(let D=0;D<k.value.length;D++){const T=k.value[D];he.post(`http://localhost:${window.preloadState.port}/table/delete`,{path:T}).then(W=>{W.data&&($.value=$.value+1)}).catch(W=>{b.value=b.value+1}).finally(()=>{$.value+b.value===k.value.length&&setTimeout(()=>{y.value=!1,b.value=0,$.value=0,C()},2e3)})}}})},loadingModalVisible:y,success:$,fail:b}}}),Pa={class:"table"},Aa={class:"table-tool"},za=I("\u641C\u7D22"),Ma={class:"table-container"},Ia=I("\u5220\u9664");function Oa(e,t,a,n,s,u){const o=p("n-input"),l=p("n-form-item"),r=p("n-date-picker"),c=p("n-button"),i=p("n-form"),d=p("n-data-table"),f=p("n-pagination"),g=p("n-space"),C=p("Detail"),_=p("LoadingModal");return w(),B("div",Pa,[v("section",Aa,[h(i,{inline:"","label-width":80,model:e.searchParams,"label-placement":"left",ref:"formRef"},{default:m(()=>[h(l,{label:"\u6587\u4EF6\u540D",path:"searchParams.name"},{default:m(()=>[h(o,{placeholder:"\u6587\u4EF6\u540D\u6216\u8DEF\u5F84",value:e.searchParams.name,"onUpdate:value":t[0]||(t[0]=y=>e.searchParams.name=y)},null,8,["value"])]),_:1}),h(l,{label:"\u66F4\u65B0\u65F6\u95F4",path:"searchParams.updatedAt"},{default:m(()=>[h(r,{value:e.searchParams.updatedAt,"onUpdate:value":t[1]||(t[1]=y=>e.searchParams.updatedAt=y),type:"datetimerange",clearable:""},null,8,["value"])]),_:1}),h(l,{label:"\u521B\u5EFA\u65F6\u95F4",path:"searchParams.createdAt"},{default:m(()=>[h(r,{value:e.searchParams.createdAt,"onUpdate:value":t[2]||(t[2]=y=>e.searchParams.createdAt=y),type:"datetimerange",clearable:""},null,8,["value"])]),_:1}),h(l,null,{default:m(()=>[h(c,null,{default:m(()=>[za]),_:1})]),_:1})]),_:1},8,["model"])]),v("section",Ma,[h(g,{vertical:""},{default:m(()=>[e.currentSelections.length?(w(),z(c,{key:0,onClick:e.batchRemoveFiles},{default:m(()=>[Ia]),_:1},8,["onClick"])):Je("",!0),h(d,{columns:e.tableColumn,data:e.tableData,loading:e.loading,"row-key":y=>y.path,"onUpdate:checkedRowKeys":e.handleSelect},null,8,["columns","data","loading","row-key","onUpdate:checkedRowKeys"]),h(g,{justify:"center"},{default:m(()=>[h(f,{page:e.searchParams.page,"onUpdate:page":t[3]||(t[3]=y=>e.searchParams.page=y),"item-count":e.total,onChange:e.changePage},null,8,["page","item-count","onChange"])]),_:1})]),_:1})]),h(C,{detail:e.detailInfo,visible:e.detailVisible,setDetailVisible:e.setDetailVisible},null,8,["detail","visible","setDetailVisible"]),h(_,{visible:e.loadingModalVisible,limit:e.currentSelections.length,success:e.success,fail:e.fail},null,8,["visible","limit","success","fail"])])}var Ra=A(Na,[["render",Oa]]);const Va=P({name:"Menu",components:{"n-menu":Ke},props:{collapsed:{type:Boolean,require:!0}},setup(e,t){const a=F([]),n=qe();return Xe(()=>{var l;const o=Fe.find(r=>r.name==="Layout");o&&((l=o.children)==null?void 0:l.length)&&(a.value=o.children.map(r=>{var c;return{label:(c=r.meta)==null?void 0:c.title,key:r.path}}))}),{menuOptions:a,renderMenuIcon:o=>o.key==="/graph"?L(ne,null,{default:()=>L(Qe)}):o.key==="/chart"?L(ne,null,{default:()=>L(Ze)}):L(ne,null,{default:()=>L(xe)}),handleClick:(o,l)=>{n.push({path:o})}}}});function La(e,t,a,n,s,u){const o=p("n-menu");return w(),z(o,{collapsed:e.collapsed,"collapsed-width":64,"collapsed-icon-size":22,options:e.menuOptions,"render-icon":e.renderMenuIcon,"onUpdate:value":e.handleClick},null,8,["collapsed","options","render-icon","onUpdate:value"])}var Ua=A(Va,[["render",La]]);const Ga=P({name:"Layout",components:{NSpace:R,NLayout:et,Menu:Ua,NLayoutSider:tt},setup(){return{collapsed:F(!0)}}});function ja(e,t,a,n,s,u){const o=p("Menu"),l=p("n-layout-sider"),r=p("router-view"),c=p("n-layout"),i=p("n-space");return w(),z(i,{vertical:""},{default:m(()=>[h(c,{"content-style":{height:"100vh"},"has-sider":""},{default:m(()=>[h(l,{bordered:"","collapse-mode":"width","collapsed-width":64,width:240,collapsed:e.collapsed,"show-trigger":"",onCollapse:t[0]||(t[0]=d=>e.collapsed=!0),onExpand:t[1]||(t[1]=d=>e.collapsed=!1)},{default:m(()=>[h(o,{collapsed:e.collapsed},null,8,["collapsed"])]),_:1},8,["collapsed"]),h(c,{embedded:""},{default:m(()=>[h(r)]),_:1})]),_:1})]),_:1})}var ge=A(Ga,[["render",ja]]);const Fe=[{path:"/",component:ge,name:"Layout",redirect(){return{name:"Graph"}},children:[{path:"/graph",component:Nt,name:"Graph",meta:{title:"\u4F9D\u8D56\u6811"}},{path:"/chart",component:_a,name:"Chart",meta:{title:"\u5206\u6790\u56FE"}},{path:"/table",component:Ra,name:"Table",meta:{title:"\u8868\u683C\u5206\u6790"}}]}],Ha=at({history:nt(),routes:Fe});const Ya=P({name:"PageLoading"}),Z=e=>(H("data-v-9f7b7bb4"),e=e(),Y(),e),Wa={class:"sk-folding-cube"},Ja=Z(()=>v("div",{class:"sk-cube1 sk-cube"},null,-1)),Ka=Z(()=>v("div",{class:"sk-cube2 sk-cube"},null,-1)),qa=Z(()=>v("div",{class:"sk-cube4 sk-cube"},null,-1)),Xa=Z(()=>v("div",{class:"sk-cube3 sk-cube"},null,-1)),Qa=[Ja,Ka,qa,Xa];function Za(e,t,a,n,s,u){return w(),B("div",Wa,Qa)}var xa=A(Ya,[["render",Za],["__scopeId","data-v-9f7b7bb4"]]);const en=P({name:"App",components:{PageLoading:xa,Layout:ge,NDialogProvider:ot,NNotificationProvider:lt},setup(){const e=F(!1);return x(()=>{setTimeout(()=>{e.value=!0},2e3)}),{isInitFinished:e}}}),tn={class:"container"},an={key:0,class:"loading-wrappper"},nn=v("p",null,"\u8FD8\u5728\u521D\u59CB\u5316\u554A\uFF0C\u7B49\u4E00\u4E0B\uFF5E",-1),on={key:1,class:"main-wrapper"};function ln(e,t,a,n,s,u){const o=p("PageLoading"),l=p("router-view"),r=p("n-notification-provider"),c=p("n-dialog-provider");return w(),z(c,null,{default:m(()=>[h(r,null,{default:m(()=>[v("div",tn,[e.isInitFinished?(w(),B("div",on,[h(l)])):(w(),B("div",an,[nn,h(o)]))])]),_:1})]),_:1})}var sn=A(en,[["render",ln]]);st(sn).use(Ha).mount("#app");
