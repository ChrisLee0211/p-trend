var tx=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get Base(){return Qs},get Circle(){return tpe},get Ellipse(){return npe},get Image(){return ape},get Line(){return spe},get Marker(){return cpe},get Path(){return HA},get Polygon(){return bpe},get Polyline(){return wpe},get Rect(){return _pe},get Text(){return Ape}}),rx=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get Base(){return Ps},get Circle(){return Lpe},get Dom(){return Npe},get Ellipse(){return $pe},get Image(){return Gpe},get Line(){return Vpe},get Marker(){return Wpe},get Path(){return Ype},get Polygon(){return qpe},get Polyline(){return Zpe},get Rect(){return ege},get Text(){return age}});function VE(r,t){const e=Object.create(null),n=r.split(",");for(let i=0;i<n.length;i++)e[n[i]]=!0;return t?i=>!!e[i.toLowerCase()]:i=>!!e[i]}const nae="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",iae=VE(nae);function nF(r){return!!r||r===""}function HE(r){if(Jr(r)){const t={};for(let e=0;e<r.length;e++){const n=r[e],i=Pa(n)?sae(n):HE(n);if(i)for(const a in i)t[a]=i[a]}return t}else{if(Pa(r))return r;if(ca(r))return r}}const aae=/;(?![^(]*\))/g,oae=/:(.+)/;function sae(r){const t={};return r.split(aae).forEach(e=>{if(e){const n=e.split(oae);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function WE(r){let t="";if(Pa(r))t=r;else if(Jr(r))for(let e=0;e<r.length;e++){const n=WE(r[e]);n&&(t+=n+" ")}else if(ca(r))for(const e in r)r[e]&&(t+=e+" ");return t.trim()}const fft=r=>r==null?"":Jr(r)||ca(r)&&(r.toString===lF||!an(r.toString))?JSON.stringify(r,iF,2):String(r),iF=(r,t)=>t&&t.__v_isRef?iF(r,t.value):nv(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[n,i])=>(e[`${n} =>`]=i,e),{})}:oF(t)?{[`Set(${t.size})`]:[...t.values()]}:ca(t)&&!Jr(t)&&!uF(t)?String(t):t,ei={},rv=[],qs=()=>{},lae=()=>!1,uae=/^on[^a-z]/,nx=r=>uae.test(r),jE=r=>r.startsWith("onUpdate:"),Ia=Object.assign,aF=(r,t)=>{const e=r.indexOf(t);e>-1&&r.splice(e,1)},cae=Object.prototype.hasOwnProperty,Rn=(r,t)=>cae.call(r,t),Jr=Array.isArray,nv=r=>ix(r)==="[object Map]",oF=r=>ix(r)==="[object Set]",an=r=>typeof r=="function",Pa=r=>typeof r=="string",YE=r=>typeof r=="symbol",ca=r=>r!==null&&typeof r=="object",sF=r=>ca(r)&&an(r.then)&&an(r.catch),lF=Object.prototype.toString,ix=r=>lF.call(r),fae=r=>ix(r).slice(8,-1),uF=r=>ix(r)==="[object Object]",XE=r=>Pa(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,ax=VE(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ox=r=>{const t=Object.create(null);return e=>t[e]||(t[e]=r(e))},dae=/-(\w)/g,bl=ox(r=>r.replace(dae,(t,e)=>e?e.toUpperCase():"")),hae=/\B([A-Z])/g,iv=ox(r=>r.replace(hae,"-$1").toLowerCase()),sx=ox(r=>r.charAt(0).toUpperCase()+r.slice(1)),qE=ox(r=>r?`on${sx(r)}`:""),$g=(r,t)=>!Object.is(r,t),KE=(r,t)=>{for(let e=0;e<r.length;e++)r[e](t)},lx=(r,t,e)=>{Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value:e})},cF=r=>{const t=parseFloat(r);return isNaN(t)?r:t};let fF;const vae=()=>fF||(fF=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let xl;const ux=[];class pae{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&xl&&(this.parent=xl,this.index=(xl.scopes||(xl.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&(ux.push(this),xl=this)}off(){this.active&&(ux.pop(),xl=ux[ux.length-1])}stop(t){if(this.active){if(this.effects.forEach(e=>e.stop()),this.cleanups.forEach(e=>e()),this.scopes&&this.scopes.forEach(e=>e.stop(!0)),this.parent&&!t){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}function gae(r,t){t=t||xl,t&&t.active&&t.effects.push(r)}function mae(){return xl}function yae(r){xl&&xl.cleanups.push(r)}const ZE=r=>{const t=new Set(r);return t.w=0,t.n=0,t},dF=r=>(r.w&lc)>0,hF=r=>(r.n&lc)>0,bae=({deps:r})=>{if(r.length)for(let t=0;t<r.length;t++)r[t].w|=lc},xae=r=>{const{deps:t}=r;if(t.length){let e=0;for(let n=0;n<t.length;n++){const i=t[n];dF(i)&&!hF(i)?i.delete(r):t[e++]=i,i.w&=~lc,i.n&=~lc}t.length=e}},QE=new WeakMap;let zg=0,lc=1;const JE=30,Gg=[];let Bf;const $f=Symbol(""),e_=Symbol("");class t_{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],gae(this,n)}run(){if(!this.active)return this.fn();if(!Gg.includes(this))try{return Gg.push(Bf=this),wae(),lc=1<<++zg,zg<=JE?bae(this):vF(this),this.fn()}finally{zg<=JE&&xae(this),lc=1<<--zg,zf(),Gg.pop();const t=Gg.length;Bf=t>0?Gg[t-1]:void 0}}stop(){this.active&&(vF(this),this.onStop&&this.onStop(),this.active=!1)}}function vF(r){const{deps:t}=r;if(t.length){for(let e=0;e<t.length;e++)t[e].delete(r);t.length=0}}let av=!0;const r_=[];function ov(){r_.push(av),av=!1}function wae(){r_.push(av),av=!0}function zf(){const r=r_.pop();av=r===void 0?!0:r}function Qo(r,t,e){if(!pF())return;let n=QE.get(r);n||QE.set(r,n=new Map);let i=n.get(e);i||n.set(e,i=ZE()),gF(i)}function pF(){return av&&Bf!==void 0}function gF(r,t){let e=!1;zg<=JE?hF(r)||(r.n|=lc,e=!dF(r)):e=!r.has(Bf),e&&(r.add(Bf),Bf.deps.push(r))}function hu(r,t,e,n,i,a){const o=QE.get(r);if(!o)return;let s=[];if(t==="clear")s=[...o.values()];else if(e==="length"&&Jr(r))o.forEach((l,u)=>{(u==="length"||u>=n)&&s.push(l)});else switch(e!==void 0&&s.push(o.get(e)),t){case"add":Jr(r)?XE(e)&&s.push(o.get("length")):(s.push(o.get($f)),nv(r)&&s.push(o.get(e_)));break;case"delete":Jr(r)||(s.push(o.get($f)),nv(r)&&s.push(o.get(e_)));break;case"set":nv(r)&&s.push(o.get($f));break}if(s.length===1)s[0]&&n_(s[0]);else{const l=[];for(const u of s)u&&l.push(...u);n_(ZE(l))}}function n_(r,t){for(const e of Jr(r)?r:[...r])(e!==Bf||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Sae=VE("__proto__,__v_isRef,__isVue"),mF=new Set(Object.getOwnPropertyNames(Symbol).map(r=>Symbol[r]).filter(YE)),Cae=i_(),Eae=i_(!1,!0),_ae=i_(!0),yF=Tae();function Tae(){const r={};return["includes","indexOf","lastIndexOf"].forEach(t=>{r[t]=function(...e){const n=On(this);for(let a=0,o=this.length;a<o;a++)Qo(n,"get",a+"");const i=n[t](...e);return i===-1||i===!1?n[t](...e.map(On)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{r[t]=function(...e){ov();const n=On(this)[t].apply(this,e);return zf(),n}}),r}function i_(r=!1,t=!1){return function(n,i,a){if(i==="__v_isReactive")return!r;if(i==="__v_isReadonly")return r;if(i==="__v_raw"&&a===(r?t?Uae:AF:t?TF:_F).get(n))return n;const o=Jr(n);if(!r&&o&&Rn(yF,i))return Reflect.get(yF,i,a);const s=Reflect.get(n,i,a);return(YE(i)?mF.has(i):Sae(i))||(r||Qo(n,"get",i),t)?s:io(s)?!o||!XE(i)?s.value:s:ca(s)?r?wl(s):Gf(s):s}}const Aae=bF(),Mae=bF(!0);function bF(r=!1){return function(e,n,i,a){let o=e[n];if(!r&&!l_(i)&&(i=On(i),o=On(o),!Jr(e)&&io(o)&&!io(i)))return o.value=i,!0;const s=Jr(e)&&XE(n)?Number(n)<e.length:Rn(e,n),l=Reflect.set(e,n,i,a);return e===On(a)&&(s?$g(i,o)&&hu(e,"set",n,i):hu(e,"add",n,i)),l}}function kae(r,t){const e=Rn(r,t);r[t];const n=Reflect.deleteProperty(r,t);return n&&e&&hu(r,"delete",t,void 0),n}function Iae(r,t){const e=Reflect.has(r,t);return(!YE(t)||!mF.has(t))&&Qo(r,"has",t),e}function Pae(r){return Qo(r,"iterate",Jr(r)?"length":$f),Reflect.ownKeys(r)}const xF={get:Cae,set:Aae,deleteProperty:kae,has:Iae,ownKeys:Pae},Dae={get:_ae,set(r,t){return!0},deleteProperty(r,t){return!0}},Rae=Ia({},xF,{get:Eae,set:Mae}),a_=r=>r,cx=r=>Reflect.getPrototypeOf(r);function fx(r,t,e=!1,n=!1){r=r.__v_raw;const i=On(r),a=On(t);t!==a&&!e&&Qo(i,"get",t),!e&&Qo(i,"get",a);const{has:o}=cx(i),s=n?a_:e?c_:Ug;if(o.call(i,t))return s(r.get(t));if(o.call(i,a))return s(r.get(a));r!==i&&r.get(t)}function dx(r,t=!1){const e=this.__v_raw,n=On(e),i=On(r);return r!==i&&!t&&Qo(n,"has",r),!t&&Qo(n,"has",i),r===i?e.has(r):e.has(r)||e.has(i)}function hx(r,t=!1){return r=r.__v_raw,!t&&Qo(On(r),"iterate",$f),Reflect.get(r,"size",r)}function wF(r){r=On(r);const t=On(this);return cx(t).has.call(t,r)||(t.add(r),hu(t,"add",r,r)),this}function SF(r,t){t=On(t);const e=On(this),{has:n,get:i}=cx(e);let a=n.call(e,r);a||(r=On(r),a=n.call(e,r));const o=i.call(e,r);return e.set(r,t),a?$g(t,o)&&hu(e,"set",r,t):hu(e,"add",r,t),this}function CF(r){const t=On(this),{has:e,get:n}=cx(t);let i=e.call(t,r);i||(r=On(r),i=e.call(t,r)),n&&n.call(t,r);const a=t.delete(r);return i&&hu(t,"delete",r,void 0),a}function EF(){const r=On(this),t=r.size!==0,e=r.clear();return t&&hu(r,"clear",void 0,void 0),e}function vx(r,t){return function(n,i){const a=this,o=a.__v_raw,s=On(o),l=t?a_:r?c_:Ug;return!r&&Qo(s,"iterate",$f),o.forEach((u,c)=>n.call(i,l(u),l(c),a))}}function px(r,t,e){return function(...n){const i=this.__v_raw,a=On(i),o=nv(a),s=r==="entries"||r===Symbol.iterator&&o,l=r==="keys"&&o,u=i[r](...n),c=e?a_:t?c_:Ug;return!t&&Qo(a,"iterate",l?e_:$f),{next(){const{value:f,done:d}=u.next();return d?{value:f,done:d}:{value:s?[c(f[0]),c(f[1])]:c(f),done:d}},[Symbol.iterator](){return this}}}}function uc(r){return function(...t){return r==="delete"?!1:this}}function Oae(){const r={get(a){return fx(this,a)},get size(){return hx(this)},has:dx,add:wF,set:SF,delete:CF,clear:EF,forEach:vx(!1,!1)},t={get(a){return fx(this,a,!1,!0)},get size(){return hx(this)},has:dx,add:wF,set:SF,delete:CF,clear:EF,forEach:vx(!1,!0)},e={get(a){return fx(this,a,!0)},get size(){return hx(this,!0)},has(a){return dx.call(this,a,!0)},add:uc("add"),set:uc("set"),delete:uc("delete"),clear:uc("clear"),forEach:vx(!0,!1)},n={get(a){return fx(this,a,!0,!0)},get size(){return hx(this,!0)},has(a){return dx.call(this,a,!0)},add:uc("add"),set:uc("set"),delete:uc("delete"),clear:uc("clear"),forEach:vx(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{r[a]=px(a,!1,!1),e[a]=px(a,!0,!1),t[a]=px(a,!1,!0),n[a]=px(a,!0,!0)}),[r,e,t,n]}const[Lae,Fae,Nae,Bae]=Oae();function o_(r,t){const e=t?r?Bae:Nae:r?Fae:Lae;return(n,i,a)=>i==="__v_isReactive"?!r:i==="__v_isReadonly"?r:i==="__v_raw"?n:Reflect.get(Rn(e,i)&&i in n?e:n,i,a)}const $ae={get:o_(!1,!1)},zae={get:o_(!1,!0)},Gae={get:o_(!0,!1)},_F=new WeakMap,TF=new WeakMap,AF=new WeakMap,Uae=new WeakMap;function Vae(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Hae(r){return r.__v_skip||!Object.isExtensible(r)?0:Vae(fae(r))}function Gf(r){return r&&r.__v_isReadonly?r:s_(r,!1,xF,$ae,_F)}function Wae(r){return s_(r,!1,Rae,zae,TF)}function wl(r){return s_(r,!0,Dae,Gae,AF)}function s_(r,t,e,n,i){if(!ca(r)||r.__v_raw&&!(t&&r.__v_isReactive))return r;const a=i.get(r);if(a)return a;const o=Hae(r);if(o===0)return r;const s=new Proxy(r,o===2?n:e);return i.set(r,s),s}function sv(r){return l_(r)?sv(r.__v_raw):!!(r&&r.__v_isReactive)}function l_(r){return!!(r&&r.__v_isReadonly)}function MF(r){return sv(r)||l_(r)}function On(r){const t=r&&r.__v_raw;return t?On(t):r}function u_(r){return lx(r,"__v_skip",!0),r}const Ug=r=>ca(r)?Gf(r):r,c_=r=>ca(r)?wl(r):r;function kF(r){pF()&&(r=On(r),r.dep||(r.dep=ZE()),gF(r.dep))}function IF(r,t){r=On(r),r.dep&&n_(r.dep)}function io(r){return Boolean(r&&r.__v_isRef===!0)}function Oe(r){return PF(r,!1)}function f_(r){return PF(r,!0)}function PF(r,t){return io(r)?r:new jae(r,t)}class jae{constructor(t,e){this._shallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:On(t),this._value=e?t:Ug(t)}get value(){return kF(this),this._value}set value(t){t=this._shallow?t:On(t),$g(t,this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:Ug(t),IF(this))}}function fa(r){return io(r)?r.value:r}const Yae={get:(r,t,e)=>fa(Reflect.get(r,t,e)),set:(r,t,e,n)=>{const i=r[t];return io(i)&&!io(e)?(i.value=e,!0):Reflect.set(r,t,e,n)}};function DF(r){return sv(r)?r:new Proxy(r,Yae)}class Xae{constructor(t,e){this._object=t,this._key=e,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(t){this._object[this._key]=t}}function Kt(r,t){const e=r[t];return io(e)?e:new Xae(r,t)}class qae{constructor(t,e,n){this._setter=e,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new t_(t,()=>{this._dirty||(this._dirty=!0,IF(this))}),this.__v_isReadonly=n}get value(){const t=On(this);return kF(t),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function re(r,t){let e,n;const i=an(r);return i?(e=r,n=qs):(e=r.get,n=r.set),new qae(e,n,i||!n)}Promise.resolve();function Kae(r,t,...e){const n=r.vnode.props||ei;let i=e;const a=t.startsWith("update:"),o=a&&t.slice(7);if(o&&o in n){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:d}=n[c]||ei;d?i=e.map(h=>h.trim()):f&&(i=e.map(cF))}let s,l=n[s=qE(t)]||n[s=qE(bl(t))];!l&&a&&(l=n[s=qE(iv(t))]),l&&Es(l,r,6,i);const u=n[s+"Once"];if(u){if(!r.emitted)r.emitted={};else if(r.emitted[s])return;r.emitted[s]=!0,Es(u,r,6,i)}}function RF(r,t,e=!1){const n=t.emitsCache,i=n.get(r);if(i!==void 0)return i;const a=r.emits;let o={},s=!1;if(!an(r)){const l=u=>{const c=RF(u,t,!0);c&&(s=!0,Ia(o,c))};!e&&t.mixins.length&&t.mixins.forEach(l),r.extends&&l(r.extends),r.mixins&&r.mixins.forEach(l)}return!a&&!s?(n.set(r,null),null):(Jr(a)?a.forEach(l=>o[l]=null):Ia(o,a),n.set(r,o),o)}function d_(r,t){return!r||!nx(t)?!1:(t=t.slice(2).replace(/Once$/,""),Rn(r,t[0].toLowerCase()+t.slice(1))||Rn(r,iv(t))||Rn(r,t))}let Jo=null,gx=null;function mx(r){const t=Jo;return Jo=r,gx=r&&r.type.__scopeId||null,t}function dft(r){gx=r}function hft(){gx=null}function Zae(r,t=Jo,e){if(!t||r._n)return r;const n=(...i)=>{n._d&&iN(-1);const a=mx(t),o=r(...i);return mx(a),n._d&&iN(1),o};return n._n=!0,n._c=!0,n._d=!0,n}function h_(r){const{type:t,vnode:e,proxy:n,withProxy:i,props:a,propsOptions:[o],slots:s,attrs:l,emit:u,render:c,renderCache:f,data:d,setupState:h,ctx:v,inheritAttrs:p}=r;let g,m;const y=mx(r);try{if(e.shapeFlag&4){const x=i||n;g=Cl(c.call(x,x,f,a,h,d,v)),m=l}else{const x=t;g=Cl(x.length>1?x(a,{attrs:l,slots:s,emit:u}):x(a,null)),m=t.props?l:Qae(l)}}catch(x){jg.length=0,Mx(x,r,1),g=Ln(Cs)}let b=g;if(m&&p!==!1){const x=Object.keys(m),{shapeFlag:w}=b;x.length&&w&(1|6)&&(o&&x.some(jE)&&(m=Jae(m,o)),b=fc(b,m))}return e.dirs&&(b.dirs=b.dirs?b.dirs.concat(e.dirs):e.dirs),e.transition&&(b.transition=e.transition),g=b,mx(y),g}const Qae=r=>{let t;for(const e in r)(e==="class"||e==="style"||nx(e))&&((t||(t={}))[e]=r[e]);return t},Jae=(r,t)=>{const e={};for(const n in r)(!jE(n)||!(n.slice(9)in t))&&(e[n]=r[n]);return e};function eoe(r,t,e){const{props:n,children:i,component:a}=r,{props:o,children:s,patchFlag:l}=t,u=a.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return n?OF(n,o,u):!!o;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const d=c[f];if(o[d]!==n[d]&&!d_(u,d))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:n===o?!1:n?o?OF(n,o,u):!0:!!o;return!1}function OF(r,t,e){const n=Object.keys(t);if(n.length!==Object.keys(r).length)return!0;for(let i=0;i<n.length;i++){const a=n[i];if(t[a]!==r[a]&&!d_(e,a))return!0}return!1}function toe({vnode:r,parent:t},e){for(;t&&t.subTree===r;)(r=t.vnode).el=e,t=t.parent}const roe=r=>r.__isSuspense;function noe(r,t){t&&t.pendingBranch?Jr(r)?t.effects.push(...r):t.effects.push(r):Zoe(r)}function rn(r,t){if(Da){let e=Da.provides;const n=Da.parent&&Da.parent.provides;n===e&&(e=Da.provides=Object.create(n)),e[r]=t}}function or(r,t,e=!1){const n=Da||Jo;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&r in i)return i[r];if(arguments.length>1)return e&&an(t)?t.call(n.proxy):t}}function LF(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ss(()=>{r.isMounted=!0}),es(()=>{r.isUnmounting=!0}),r}const ws=[Function,Array],ioe={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ws,onEnter:ws,onAfterEnter:ws,onEnterCancelled:ws,onBeforeLeave:ws,onLeave:ws,onAfterLeave:ws,onLeaveCancelled:ws,onBeforeAppear:ws,onAppear:ws,onAfterAppear:ws,onAppearCancelled:ws},setup(r,{slots:t}){const e=lv(),n=LF();let i;return()=>{const a=t.default&&p_(t.default(),!0);if(!a||!a.length)return;const o=On(r),{mode:s}=o,l=a[0];if(n.isLeaving)return v_(l);const u=BF(l);if(!u)return v_(l);const c=Vg(u,o,n,e);Hg(u,c);const f=e.subTree,d=f&&BF(f);let h=!1;const{getTransitionKey:v}=u.type;if(v){const p=v();i===void 0?i=p:p!==i&&(i=p,h=!0)}if(d&&d.type!==Cs&&(!Wf(u,d)||h)){const p=Vg(d,o,n,e);if(Hg(d,p),s==="out-in")return n.isLeaving=!0,p.afterLeave=()=>{n.isLeaving=!1,e.update()},v_(l);s==="in-out"&&u.type!==Cs&&(p.delayLeave=(g,m,y)=>{const b=NF(n,d);b[String(d.key)]=d,g._leaveCb=()=>{m(),g._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=y})}return l}}},FF=ioe;function NF(r,t){const{leavingVNodes:e}=r;let n=e.get(t.type);return n||(n=Object.create(null),e.set(t.type,n)),n}function Vg(r,t,e,n){const{appear:i,mode:a,persisted:o=!1,onBeforeEnter:s,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:f,onLeave:d,onAfterLeave:h,onLeaveCancelled:v,onBeforeAppear:p,onAppear:g,onAfterAppear:m,onAppearCancelled:y}=t,b=String(r.key),x=NF(e,r),w=(C,_)=>{C&&Es(C,n,9,_)},S={mode:a,persisted:o,beforeEnter(C){let _=s;if(!e.isMounted)if(i)_=p||s;else return;C._leaveCb&&C._leaveCb(!0);const T=x[b];T&&Wf(r,T)&&T.el._leaveCb&&T.el._leaveCb(),w(_,[C])},enter(C){let _=l,T=u,E=c;if(!e.isMounted)if(i)_=g||l,T=m||u,E=y||c;else return;let M=!1;const k=C._enterCb=P=>{M||(M=!0,P?w(E,[C]):w(T,[C]),S.delayedLeave&&S.delayedLeave(),C._enterCb=void 0)};_?(_(C,k),_.length<=1&&k()):k()},leave(C,_){const T=String(r.key);if(C._enterCb&&C._enterCb(!0),e.isUnmounting)return _();w(f,[C]);let E=!1;const M=C._leaveCb=k=>{E||(E=!0,_(),k?w(v,[C]):w(h,[C]),C._leaveCb=void 0,x[T]===r&&delete x[T])};x[T]=r,d?(d(C,M),d.length<=1&&M()):M()},clone(C){return Vg(C,t,e,n)}};return S}function v_(r){if(yx(r))return r=fc(r),r.children=null,r}function BF(r){return yx(r)?r.children?r.children[0]:void 0:r}function Hg(r,t){r.shapeFlag&6&&r.component?Hg(r.component.subTree,t):r.shapeFlag&128?(r.ssContent.transition=t.clone(r.ssContent),r.ssFallback.transition=t.clone(r.ssFallback)):r.transition=t}function p_(r,t=!1){let e=[],n=0;for(let i=0;i<r.length;i++){const a=r[i];a.type===Wi?(a.patchFlag&128&&n++,e=e.concat(p_(a.children,t))):(t||a.type!==Cs)&&e.push(a)}if(n>1)for(let i=0;i<e.length;i++)e[i].patchFlag=-2;return e}function xt(r){return an(r)?{setup:r,name:r.name}:r}const g_=r=>!!r.type.__asyncLoader,yx=r=>r.type.__isKeepAlive;function aoe(r,t){$F(r,"a",t)}function ooe(r,t){$F(r,"da",t)}function $F(r,t,e=Da){const n=r.__wdc||(r.__wdc=()=>{let i=e;for(;i;){if(i.isDeactivated)return;i=i.parent}return r()});if(bx(t,n,e),e){let i=e.parent;for(;i&&i.parent;)yx(i.parent.vnode)&&soe(n,t,e,i),i=i.parent}}function soe(r,t,e,n){const i=bx(t,r,n,!0);m_(()=>{aF(n[t],i)},e)}function bx(r,t,e=Da,n=!1){if(e){const i=e[r]||(e[r]=[]),a=t.__weh||(t.__weh=(...o)=>{if(e.isUnmounted)return;ov(),uv(e);const s=Es(t,e,r,o);return jf(),zf(),s});return n?i.unshift(a):i.push(a),a}}const vu=r=>(t,e=Da)=>(!Ax||r==="sp")&&bx(r,t,e),cc=vu("bm"),Ss=vu("m"),loe=vu("bu"),zF=vu("u"),es=vu("bum"),m_=vu("um"),uoe=vu("sp"),coe=vu("rtg"),foe=vu("rtc");function doe(r,t=Da){bx("ec",r,t)}let y_=!0;function hoe(r){const t=VF(r),e=r.proxy,n=r.ctx;y_=!1,t.beforeCreate&&GF(t.beforeCreate,r,"bc");const{data:i,computed:a,methods:o,watch:s,provide:l,inject:u,created:c,beforeMount:f,mounted:d,beforeUpdate:h,updated:v,activated:p,deactivated:g,beforeDestroy:m,beforeUnmount:y,destroyed:b,unmounted:x,render:w,renderTracked:S,renderTriggered:C,errorCaptured:_,serverPrefetch:T,expose:E,inheritAttrs:M,components:k,directives:P,filters:F}=t;if(u&&voe(u,n,null,r.appContext.config.unwrapInjectedRef),o)for(const L in o){const O=o[L];an(O)&&(n[L]=O.bind(e))}if(i){const L=i.call(e,e);ca(L)&&(r.data=Gf(L))}if(y_=!0,a)for(const L in a){const O=a[L],B=an(O)?O.bind(e,e):an(O.get)?O.get.bind(e,e):qs,U=!an(O)&&an(O.set)?O.set.bind(e):qs,W=re({get:B,set:U});Object.defineProperty(n,L,{enumerable:!0,configurable:!0,get:()=>W.value,set:X=>W.value=X})}if(s)for(const L in s)UF(s[L],n,e,L);if(l){const L=an(l)?l.call(e):l;Reflect.ownKeys(L).forEach(O=>{rn(O,L[O])})}c&&GF(c,r,"c");function R(L,O){Jr(O)?O.forEach(B=>L(B.bind(e))):O&&L(O.bind(e))}if(R(cc,f),R(Ss,d),R(loe,h),R(zF,v),R(aoe,p),R(ooe,g),R(doe,_),R(foe,S),R(coe,C),R(es,y),R(m_,x),R(uoe,T),Jr(E))if(E.length){const L=r.exposed||(r.exposed={});E.forEach(O=>{Object.defineProperty(L,O,{get:()=>e[O],set:B=>e[O]=B})})}else r.exposed||(r.exposed={});w&&r.render===qs&&(r.render=w),M!=null&&(r.inheritAttrs=M),k&&(r.components=k),P&&(r.directives=P)}function voe(r,t,e=qs,n=!1){Jr(r)&&(r=b_(r));for(const i in r){const a=r[i];let o;ca(a)?"default"in a?o=or(a.from||i,a.default,!0):o=or(a.from||i):o=or(a),io(o)&&n?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):t[i]=o}}function GF(r,t,e){Es(Jr(r)?r.map(n=>n.bind(t.proxy)):r.bind(t.proxy),t,e)}function UF(r,t,e,n){const i=n.includes(".")?xN(e,n):()=>e[n];if(Pa(r)){const a=t[r];an(a)&&fn(i,a)}else if(an(r))fn(i,r.bind(e));else if(ca(r))if(Jr(r))r.forEach(a=>UF(a,t,e,n));else{const a=an(r.handler)?r.handler.bind(e):t[r.handler];an(a)&&fn(i,a,r)}}function VF(r){const t=r.type,{mixins:e,extends:n}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:o}}=r.appContext,s=a.get(t);let l;return s?l=s:!i.length&&!e&&!n?l=t:(l={},i.length&&i.forEach(u=>xx(l,u,o,!0)),xx(l,t,o)),a.set(t,l),l}function xx(r,t,e,n=!1){const{mixins:i,extends:a}=t;a&&xx(r,a,e,!0),i&&i.forEach(o=>xx(r,o,e,!0));for(const o in t)if(!(n&&o==="expose")){const s=poe[o]||e&&e[o];r[o]=s?s(r[o],t[o]):t[o]}return r}const poe={data:HF,props:Uf,emits:Uf,methods:Uf,computed:Uf,beforeCreate:yo,created:yo,beforeMount:yo,mounted:yo,beforeUpdate:yo,updated:yo,beforeDestroy:yo,beforeUnmount:yo,destroyed:yo,unmounted:yo,activated:yo,deactivated:yo,errorCaptured:yo,serverPrefetch:yo,components:Uf,directives:Uf,watch:moe,provide:HF,inject:goe};function HF(r,t){return t?r?function(){return Ia(an(r)?r.call(this,this):r,an(t)?t.call(this,this):t)}:t:r}function goe(r,t){return Uf(b_(r),b_(t))}function b_(r){if(Jr(r)){const t={};for(let e=0;e<r.length;e++)t[r[e]]=r[e];return t}return r}function yo(r,t){return r?[...new Set([].concat(r,t))]:t}function Uf(r,t){return r?Ia(Ia(Object.create(null),r),t):t}function moe(r,t){if(!r)return t;if(!t)return r;const e=Ia(Object.create(null),r);for(const n in t)e[n]=yo(r[n],t[n]);return e}function yoe(r,t,e,n=!1){const i={},a={};lx(a,Ex,1),r.propsDefaults=Object.create(null),WF(r,t,i,a);for(const o in r.propsOptions[0])o in i||(i[o]=void 0);e?r.props=n?i:Wae(i):r.type.props?r.props=i:r.props=a,r.attrs=a}function boe(r,t,e,n){const{props:i,attrs:a,vnode:{patchFlag:o}}=r,s=On(i),[l]=r.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=r.vnode.dynamicProps;for(let f=0;f<c.length;f++){let d=c[f];const h=t[d];if(l)if(Rn(a,d))h!==a[d]&&(a[d]=h,u=!0);else{const v=bl(d);i[v]=x_(l,s,v,h,r,!1)}else h!==a[d]&&(a[d]=h,u=!0)}}}else{WF(r,t,i,a)&&(u=!0);let c;for(const f in s)(!t||!Rn(t,f)&&((c=iv(f))===f||!Rn(t,c)))&&(l?e&&(e[f]!==void 0||e[c]!==void 0)&&(i[f]=x_(l,s,f,void 0,r,!0)):delete i[f]);if(a!==s)for(const f in a)(!t||!Rn(t,f))&&(delete a[f],u=!0)}u&&hu(r,"set","$attrs")}function WF(r,t,e,n){const[i,a]=r.propsOptions;let o=!1,s;if(t)for(let l in t){if(ax(l))continue;const u=t[l];let c;i&&Rn(i,c=bl(l))?!a||!a.includes(c)?e[c]=u:(s||(s={}))[c]=u:d_(r.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,o=!0)}if(a){const l=On(e),u=s||ei;for(let c=0;c<a.length;c++){const f=a[c];e[f]=x_(i,l,f,u[f],r,!Rn(u,f))}}return o}function x_(r,t,e,n,i,a){const o=r[e];if(o!=null){const s=Rn(o,"default");if(s&&n===void 0){const l=o.default;if(o.type!==Function&&an(l)){const{propsDefaults:u}=i;e in u?n=u[e]:(uv(i),n=u[e]=l.call(null,t),jf())}else n=l}o[0]&&(a&&!s?n=!1:o[1]&&(n===""||n===iv(e))&&(n=!0))}return n}function jF(r,t,e=!1){const n=t.propsCache,i=n.get(r);if(i)return i;const a=r.props,o={},s=[];let l=!1;if(!an(r)){const c=f=>{l=!0;const[d,h]=jF(f,t,!0);Ia(o,d),h&&s.push(...h)};!e&&t.mixins.length&&t.mixins.forEach(c),r.extends&&c(r.extends),r.mixins&&r.mixins.forEach(c)}if(!a&&!l)return n.set(r,rv),rv;if(Jr(a))for(let c=0;c<a.length;c++){const f=bl(a[c]);YF(f)&&(o[f]=ei)}else if(a)for(const c in a){const f=bl(c);if(YF(f)){const d=a[c],h=o[f]=Jr(d)||an(d)?{type:d}:d;if(h){const v=KF(Boolean,h.type),p=KF(String,h.type);h[0]=v>-1,h[1]=p<0||v<p,(v>-1||Rn(h,"default"))&&s.push(f)}}}const u=[o,s];return n.set(r,u),u}function YF(r){return r[0]!=="$"}function XF(r){const t=r&&r.toString().match(/^\s*function (\w+)/);return t?t[1]:r===null?"null":""}function qF(r,t){return XF(r)===XF(t)}function KF(r,t){return Jr(t)?t.findIndex(e=>qF(e,r)):an(t)&&qF(t,r)?0:-1}const ZF=r=>r[0]==="_"||r==="$stable",w_=r=>Jr(r)?r.map(Cl):[Cl(r)],xoe=(r,t,e)=>{const n=Zae((...i)=>w_(t(...i)),e);return n._c=!1,n},QF=(r,t,e)=>{const n=r._ctx;for(const i in r){if(ZF(i))continue;const a=r[i];if(an(a))t[i]=xoe(i,a,n);else if(a!=null){const o=w_(a);t[i]=()=>o}}},JF=(r,t)=>{const e=w_(t);r.slots.default=()=>e},woe=(r,t)=>{if(r.vnode.shapeFlag&32){const e=t._;e?(r.slots=On(t),lx(t,"_",e)):QF(t,r.slots={})}else r.slots={},t&&JF(r,t);lx(r.slots,Ex,1)},Soe=(r,t,e)=>{const{vnode:n,slots:i}=r;let a=!0,o=ei;if(n.shapeFlag&32){const s=t._;s?e&&s===1?a=!1:(Ia(i,t),!e&&s===1&&delete i._):(a=!t.$stable,QF(t,i)),o=t}else t&&(JF(r,t),o={default:1});if(a)for(const s in i)!ZF(s)&&!(s in o)&&delete i[s]};function pu(r,t){const e=Jo;if(e===null)return r;const n=e.proxy,i=r.dirs||(r.dirs=[]);for(let a=0;a<t.length;a++){let[o,s,l,u=ei]=t[a];an(o)&&(o={mounted:o,updated:o}),o.deep&&Yf(s),i.push({dir:o,instance:n,value:s,oldValue:void 0,arg:l,modifiers:u})}return r}function Vf(r,t,e,n){const i=r.dirs,a=t&&t.dirs;for(let o=0;o<i.length;o++){const s=i[o];a&&(s.oldValue=a[o].value);let l=s.dir[n];l&&(ov(),Es(l,e,8,[r.el,s,r,t]),zf())}}function eN(){return{app:null,config:{isNativeTag:lae,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Coe=0;function Eoe(r,t){return function(n,i=null){i!=null&&!ca(i)&&(i=null);const a=eN(),o=new Set;let s=!1;const l=a.app={_uid:Coe++,_component:n,_props:i,_container:null,_context:a,_instance:null,version:Joe,get config(){return a.config},set config(u){},use(u,...c){return o.has(u)||(u&&an(u.install)?(o.add(u),u.install(l,...c)):an(u)&&(o.add(u),u(l,...c))),l},mixin(u){return a.mixins.includes(u)||a.mixins.push(u),l},component(u,c){return c?(a.components[u]=c,l):a.components[u]},directive(u,c){return c?(a.directives[u]=c,l):a.directives[u]},mount(u,c,f){if(!s){const d=Ln(n,i);return d.appContext=a,c&&t?t(d,u):r(d,u,f),s=!0,l._container=u,u.__vue_app__=l,k_(d.component)||d.component.proxy}},unmount(){s&&(r(null,l._container),delete l._container.__vue_app__)},provide(u,c){return a.provides[u]=c,l}};return l}}const bo=noe;function _oe(r){return Toe(r)}function Toe(r,t){const e=vae();e.__VUE__=!0;const{insert:n,remove:i,patchProp:a,createElement:o,createText:s,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:d,setScopeId:h=qs,cloneNode:v,insertStaticContent:p}=r,g=(D,z,H,he=null,te=null,ge=null,Qe=!1,Ve=null,Ie=!!z.dynamicChildren)=>{if(D===z)return;D&&!Wf(D,z)&&(he=ue(D),ae(D,te,ge,!0),D=null),z.patchFlag===-2&&(Ie=!1,z.dynamicChildren=null);const{type:Be,ref:V,shapeFlag:j}=z;switch(Be){case __:m(D,z,H,he);break;case Cs:y(D,z,H,he);break;case T_:D==null&&b(z,H,he,Qe);break;case Wi:P(D,z,H,he,te,ge,Qe,Ve,Ie);break;default:j&1?S(D,z,H,he,te,ge,Qe,Ve,Ie):j&6?F(D,z,H,he,te,ge,Qe,Ve,Ie):(j&64||j&128)&&Be.process(D,z,H,he,te,ge,Qe,Ve,Ie,De)}V!=null&&te&&S_(V,D&&D.ref,ge,z||D,!z)},m=(D,z,H,he)=>{if(D==null)n(z.el=s(z.children),H,he);else{const te=z.el=D.el;z.children!==D.children&&u(te,z.children)}},y=(D,z,H,he)=>{D==null?n(z.el=l(z.children||""),H,he):z.el=D.el},b=(D,z,H,he)=>{[D.el,D.anchor]=p(D.children,z,H,he)},x=({el:D,anchor:z},H,he)=>{let te;for(;D&&D!==z;)te=d(D),n(D,H,he),D=te;n(z,H,he)},w=({el:D,anchor:z})=>{let H;for(;D&&D!==z;)H=d(D),i(D),D=H;i(z)},S=(D,z,H,he,te,ge,Qe,Ve,Ie)=>{Qe=Qe||z.type==="svg",D==null?C(z,H,he,te,ge,Qe,Ve,Ie):E(D,z,te,ge,Qe,Ve,Ie)},C=(D,z,H,he,te,ge,Qe,Ve)=>{let Ie,Be;const{type:V,props:j,shapeFlag:q,transition:ee,patchFlag:Q,dirs:me}=D;if(D.el&&v!==void 0&&Q===-1)Ie=D.el=v(D.el);else{if(Ie=D.el=o(D.type,ge,j&&j.is,j),q&8?c(Ie,D.children):q&16&&T(D.children,Ie,null,he,te,ge&&V!=="foreignObject",Qe,Ve),me&&Vf(D,null,he,"created"),j){for(const ze in j)ze!=="value"&&!ax(ze)&&a(Ie,ze,null,j[ze],ge,D.children,he,te,le);"value"in j&&a(Ie,"value",null,j.value),(Be=j.onVnodeBeforeMount)&&Sl(Be,he,D)}_(Ie,D,D.scopeId,Qe,he)}me&&Vf(D,null,he,"beforeMount");const He=(!te||te&&!te.pendingBranch)&&ee&&!ee.persisted;He&&ee.beforeEnter(Ie),n(Ie,z,H),((Be=j&&j.onVnodeMounted)||He||me)&&bo(()=>{Be&&Sl(Be,he,D),He&&ee.enter(Ie),me&&Vf(D,null,he,"mounted")},te)},_=(D,z,H,he,te)=>{if(H&&h(D,H),he)for(let ge=0;ge<he.length;ge++)h(D,he[ge]);if(te){let ge=te.subTree;if(z===ge){const Qe=te.vnode;_(D,Qe,Qe.scopeId,Qe.slotScopeIds,te.parent)}}},T=(D,z,H,he,te,ge,Qe,Ve,Ie=0)=>{for(let Be=Ie;Be<D.length;Be++){const V=D[Be]=Ve?dc(D[Be]):Cl(D[Be]);g(null,V,z,H,he,te,ge,Qe,Ve)}},E=(D,z,H,he,te,ge,Qe)=>{const Ve=z.el=D.el;let{patchFlag:Ie,dynamicChildren:Be,dirs:V}=z;Ie|=D.patchFlag&16;const j=D.props||ei,q=z.props||ei;let ee;(ee=q.onVnodeBeforeUpdate)&&Sl(ee,H,z,D),V&&Vf(z,D,H,"beforeUpdate");const Q=te&&z.type!=="foreignObject";if(Be?M(D.dynamicChildren,Be,Ve,H,he,Q,ge):Qe||B(D,z,Ve,null,H,he,Q,ge,!1),Ie>0){if(Ie&16)k(Ve,z,j,q,H,he,te);else if(Ie&2&&j.class!==q.class&&a(Ve,"class",null,q.class,te),Ie&4&&a(Ve,"style",j.style,q.style,te),Ie&8){const me=z.dynamicProps;for(let He=0;He<me.length;He++){const ze=me[He],it=j[ze],we=q[ze];(we!==it||ze==="value")&&a(Ve,ze,it,we,te,D.children,H,he,le)}}Ie&1&&D.children!==z.children&&c(Ve,z.children)}else!Qe&&Be==null&&k(Ve,z,j,q,H,he,te);((ee=q.onVnodeUpdated)||V)&&bo(()=>{ee&&Sl(ee,H,z,D),V&&Vf(z,D,H,"updated")},he)},M=(D,z,H,he,te,ge,Qe)=>{for(let Ve=0;Ve<z.length;Ve++){const Ie=D[Ve],Be=z[Ve],V=Ie.el&&(Ie.type===Wi||!Wf(Ie,Be)||Ie.shapeFlag&(6|64))?f(Ie.el):H;g(Ie,Be,V,null,he,te,ge,Qe,!0)}},k=(D,z,H,he,te,ge,Qe)=>{if(H!==he){for(const Ve in he){if(ax(Ve))continue;const Ie=he[Ve],Be=H[Ve];Ie!==Be&&Ve!=="value"&&a(D,Ve,Be,Ie,Qe,z.children,te,ge,le)}if(H!==ei)for(const Ve in H)!ax(Ve)&&!(Ve in he)&&a(D,Ve,H[Ve],null,Qe,z.children,te,ge,le);"value"in he&&a(D,"value",H.value,he.value)}},P=(D,z,H,he,te,ge,Qe,Ve,Ie)=>{const Be=z.el=D?D.el:s(""),V=z.anchor=D?D.anchor:s("");let{patchFlag:j,dynamicChildren:q,slotScopeIds:ee}=z;ee&&(Ve=Ve?Ve.concat(ee):ee),D==null?(n(Be,H,he),n(V,H,he),T(z.children,H,V,te,ge,Qe,Ve,Ie)):j>0&&j&64&&q&&D.dynamicChildren?(M(D.dynamicChildren,q,H,te,ge,Qe,Ve),(z.key!=null||te&&z===te.subTree)&&C_(D,z,!0)):B(D,z,H,V,te,ge,Qe,Ve,Ie)},F=(D,z,H,he,te,ge,Qe,Ve,Ie)=>{z.slotScopeIds=Ve,D==null?z.shapeFlag&512?te.ctx.activate(z,H,he,Qe,Ie):$(z,H,he,te,ge,Qe,Ie):R(D,z,Ie)},$=(D,z,H,he,te,ge,Qe)=>{const Ve=D.component=zoe(D,he,te);if(yx(D)&&(Ve.ctx.renderer=De),Goe(Ve),Ve.asyncDep){if(te&&te.registerDep(Ve,L),!D.el){const Ie=Ve.subTree=Ln(Cs);y(null,Ie,z,H)}return}L(Ve,D,z,H,te,ge,Qe)},R=(D,z,H)=>{const he=z.component=D.component;if(eoe(D,z,H))if(he.asyncDep&&!he.asyncResolved){O(he,z,H);return}else he.next=z,qoe(he.update),he.update();else z.component=D.component,z.el=D.el,he.vnode=z},L=(D,z,H,he,te,ge,Qe)=>{const Ve=()=>{if(D.isMounted){let{next:V,bu:j,u:q,parent:ee,vnode:Q}=D,me=V,He;Ie.allowRecurse=!1,V?(V.el=Q.el,O(D,V,Qe)):V=Q,j&&KE(j),(He=V.props&&V.props.onVnodeBeforeUpdate)&&Sl(He,ee,V,Q),Ie.allowRecurse=!0;const ze=h_(D),it=D.subTree;D.subTree=ze,g(it,ze,f(it.el),ue(it),D,te,ge),V.el=ze.el,me===null&&toe(D,ze.el),q&&bo(q,te),(He=V.props&&V.props.onVnodeUpdated)&&bo(()=>Sl(He,ee,V,Q),te)}else{let V;const{el:j,props:q}=z,{bm:ee,m:Q,parent:me}=D,He=g_(z);if(Ie.allowRecurse=!1,ee&&KE(ee),!He&&(V=q&&q.onVnodeBeforeMount)&&Sl(V,me,z),Ie.allowRecurse=!0,j&&ke){const ze=()=>{D.subTree=h_(D),ke(j,D.subTree,D,te,null)};He?z.type.__asyncLoader().then(()=>!D.isUnmounted&&ze()):ze()}else{const ze=D.subTree=h_(D);g(null,ze,H,he,D,te,ge),z.el=ze.el}if(Q&&bo(Q,te),!He&&(V=q&&q.onVnodeMounted)){const ze=z;bo(()=>Sl(V,me,ze),te)}z.shapeFlag&256&&D.a&&bo(D.a,te),D.isMounted=!0,z=H=he=null}},Ie=new t_(Ve,()=>vN(D.update),D.scope),Be=D.update=Ie.run.bind(Ie);Be.id=D.uid,Ie.allowRecurse=Be.allowRecurse=!0,Be()},O=(D,z,H)=>{z.component=D;const he=D.vnode.props;D.vnode=z,D.next=null,boe(D,z.props,he,H),Soe(D,z.children,H),ov(),R_(void 0,D.update),zf()},B=(D,z,H,he,te,ge,Qe,Ve,Ie=!1)=>{const Be=D&&D.children,V=D?D.shapeFlag:0,j=z.children,{patchFlag:q,shapeFlag:ee}=z;if(q>0){if(q&128){W(Be,j,H,he,te,ge,Qe,Ve,Ie);return}else if(q&256){U(Be,j,H,he,te,ge,Qe,Ve,Ie);return}}ee&8?(V&16&&le(Be,te,ge),j!==Be&&c(H,j)):V&16?ee&16?W(Be,j,H,he,te,ge,Qe,Ve,Ie):le(Be,te,ge,!0):(V&8&&c(H,""),ee&16&&T(j,H,he,te,ge,Qe,Ve,Ie))},U=(D,z,H,he,te,ge,Qe,Ve,Ie)=>{D=D||rv,z=z||rv;const Be=D.length,V=z.length,j=Math.min(Be,V);let q;for(q=0;q<j;q++){const ee=z[q]=Ie?dc(z[q]):Cl(z[q]);g(D[q],ee,H,null,te,ge,Qe,Ve,Ie)}Be>V?le(D,te,ge,!0,!1,j):T(z,H,he,te,ge,Qe,Ve,Ie,j)},W=(D,z,H,he,te,ge,Qe,Ve,Ie)=>{let Be=0;const V=z.length;let j=D.length-1,q=V-1;for(;Be<=j&&Be<=q;){const ee=D[Be],Q=z[Be]=Ie?dc(z[Be]):Cl(z[Be]);if(Wf(ee,Q))g(ee,Q,H,null,te,ge,Qe,Ve,Ie);else break;Be++}for(;Be<=j&&Be<=q;){const ee=D[j],Q=z[q]=Ie?dc(z[q]):Cl(z[q]);if(Wf(ee,Q))g(ee,Q,H,null,te,ge,Qe,Ve,Ie);else break;j--,q--}if(Be>j){if(Be<=q){const ee=q+1,Q=ee<V?z[ee].el:he;for(;Be<=q;)g(null,z[Be]=Ie?dc(z[Be]):Cl(z[Be]),H,Q,te,ge,Qe,Ve,Ie),Be++}}else if(Be>q)for(;Be<=j;)ae(D[Be],te,ge,!0),Be++;else{const ee=Be,Q=Be,me=new Map;for(Be=Q;Be<=q;Be++){const Jt=z[Be]=Ie?dc(z[Be]):Cl(z[Be]);Jt.key!=null&&me.set(Jt.key,Be)}let He,ze=0;const it=q-Q+1;let we=!1,nt=0;const st=new Array(it);for(Be=0;Be<it;Be++)st[Be]=0;for(Be=ee;Be<=j;Be++){const Jt=D[Be];if(ze>=it){ae(Jt,te,ge,!0);continue}let Ae;if(Jt.key!=null)Ae=me.get(Jt.key);else for(He=Q;He<=q;He++)if(st[He-Q]===0&&Wf(Jt,z[He])){Ae=He;break}Ae===void 0?ae(Jt,te,ge,!0):(st[Ae-Q]=Be+1,Ae>=nt?nt=Ae:we=!0,g(Jt,z[Ae],H,null,te,ge,Qe,Ve,Ie),ze++)}const jt=we?Aoe(st):rv;for(He=jt.length-1,Be=it-1;Be>=0;Be--){const Jt=Q+Be,Ae=z[Jt],ut=Jt+1<V?z[Jt+1].el:he;st[Be]===0?g(null,Ae,H,ut,te,ge,Qe,Ve,Ie):we&&(He<0||Be!==jt[He]?X(Ae,H,ut,2):He--)}}},X=(D,z,H,he,te=null)=>{const{el:ge,type:Qe,transition:Ve,children:Ie,shapeFlag:Be}=D;if(Be&6){X(D.component.subTree,z,H,he);return}if(Be&128){D.suspense.move(z,H,he);return}if(Be&64){Qe.move(D,z,H,De);return}if(Qe===Wi){n(ge,z,H);for(let j=0;j<Ie.length;j++)X(Ie[j],z,H,he);n(D.anchor,z,H);return}if(Qe===T_){x(D,z,H);return}if(he!==2&&Be&1&&Ve)if(he===0)Ve.beforeEnter(ge),n(ge,z,H),bo(()=>Ve.enter(ge),te);else{const{leave:j,delayLeave:q,afterLeave:ee}=Ve,Q=()=>n(ge,z,H),me=()=>{j(ge,()=>{Q(),ee&&ee()})};q?q(ge,Q,me):me()}else n(ge,z,H)},ae=(D,z,H,he=!1,te=!1)=>{const{type:ge,props:Qe,ref:Ve,children:Ie,dynamicChildren:Be,shapeFlag:V,patchFlag:j,dirs:q}=D;if(Ve!=null&&S_(Ve,null,H,D,!0),V&256){z.ctx.deactivate(D);return}const ee=V&1&&q,Q=!g_(D);let me;if(Q&&(me=Qe&&Qe.onVnodeBeforeUnmount)&&Sl(me,z,D),V&6)fe(D.component,H,he);else{if(V&128){D.suspense.unmount(H,he);return}ee&&Vf(D,null,z,"beforeUnmount"),V&64?D.type.remove(D,z,H,te,De,he):Be&&(ge!==Wi||j>0&&j&64)?le(Be,z,H,!1,!0):(ge===Wi&&j&(128|256)||!te&&V&16)&&le(Ie,z,H),he&&Z(D)}(Q&&(me=Qe&&Qe.onVnodeUnmounted)||ee)&&bo(()=>{me&&Sl(me,z,D),ee&&Vf(D,null,z,"unmounted")},H)},Z=D=>{const{type:z,el:H,anchor:he,transition:te}=D;if(z===Wi){Y(H,he);return}if(z===T_){w(D);return}const ge=()=>{i(H),te&&!te.persisted&&te.afterLeave&&te.afterLeave()};if(D.shapeFlag&1&&te&&!te.persisted){const{leave:Qe,delayLeave:Ve}=te,Ie=()=>Qe(H,ge);Ve?Ve(D.el,ge,Ie):Ie()}else ge()},Y=(D,z)=>{let H;for(;D!==z;)H=d(D),i(D),D=H;i(z)},fe=(D,z,H)=>{const{bum:he,scope:te,update:ge,subTree:Qe,um:Ve}=D;he&&KE(he),te.stop(),ge&&(ge.active=!1,ae(Qe,D,z,H)),Ve&&bo(Ve,z),bo(()=>{D.isUnmounted=!0},z),z&&z.pendingBranch&&!z.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===z.pendingId&&(z.deps--,z.deps===0&&z.resolve())},le=(D,z,H,he=!1,te=!1,ge=0)=>{for(let Qe=ge;Qe<D.length;Qe++)ae(D[Qe],z,H,he,te)},ue=D=>D.shapeFlag&6?ue(D.component.subTree):D.shapeFlag&128?D.suspense.next():d(D.anchor||D.el),Ee=(D,z,H)=>{D==null?z._vnode&&ae(z._vnode,null,null,!0):g(z._vnode||null,D,z,null,null,null,H),mN(),z._vnode=D},De={p:g,um:ae,m:X,r:Z,mt:$,mc:T,pc:B,pbc:M,n:ue,o:r};let je,ke;return t&&([je,ke]=t(De)),{render:Ee,hydrate:je,createApp:Eoe(Ee,je)}}function S_(r,t,e,n,i=!1){if(Jr(r)){r.forEach((d,h)=>S_(d,t&&(Jr(t)?t[h]:t),e,n,i));return}if(g_(n)&&!i)return;const a=n.shapeFlag&4?k_(n.component)||n.component.proxy:n.el,o=i?null:a,{i:s,r:l}=r,u=t&&t.r,c=s.refs===ei?s.refs={}:s.refs,f=s.setupState;if(u!=null&&u!==l&&(Pa(u)?(c[u]=null,Rn(f,u)&&(f[u]=null)):io(u)&&(u.value=null)),Pa(l)){const d=()=>{c[l]=o,Rn(f,l)&&(f[l]=o)};o?(d.id=-1,bo(d,e)):d()}else if(io(l)){const d=()=>{l.value=o};o?(d.id=-1,bo(d,e)):d()}else an(l)&&hc(l,s,12,[o,c])}function Sl(r,t,e,n=null){Es(r,t,7,[e,n])}function C_(r,t,e=!1){const n=r.children,i=t.children;if(Jr(n)&&Jr(i))for(let a=0;a<n.length;a++){const o=n[a];let s=i[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[a]=dc(i[a]),s.el=o.el),e||C_(o,s))}}function Aoe(r){const t=r.slice(),e=[0];let n,i,a,o,s;const l=r.length;for(n=0;n<l;n++){const u=r[n];if(u!==0){if(i=e[e.length-1],r[i]<u){t[n]=i,e.push(n);continue}for(a=0,o=e.length-1;a<o;)s=a+o>>1,r[e[s]]<u?a=s+1:o=s;u<r[e[a]]&&(a>0&&(t[n]=e[a-1]),e[a]=n)}}for(a=e.length,o=e[a-1];a-- >0;)e[a]=o,o=t[o];return e}const Moe=r=>r.__isTeleport,Wg=r=>r&&(r.disabled||r.disabled===""),tN=r=>typeof SVGElement!="undefined"&&r instanceof SVGElement,E_=(r,t)=>{const e=r&&r.to;return Pa(e)?t?t(e):null:e},koe={__isTeleport:!0,process(r,t,e,n,i,a,o,s,l,u){const{mc:c,pc:f,pbc:d,o:{insert:h,querySelector:v,createText:p,createComment:g}}=u,m=Wg(t.props);let{shapeFlag:y,children:b,dynamicChildren:x}=t;if(r==null){const w=t.el=p(""),S=t.anchor=p("");h(w,e,n),h(S,e,n);const C=t.target=E_(t.props,v),_=t.targetAnchor=p("");C&&(h(_,C),o=o||tN(C));const T=(E,M)=>{y&16&&c(b,E,M,i,a,o,s,l)};m?T(e,S):C&&T(C,_)}else{t.el=r.el;const w=t.anchor=r.anchor,S=t.target=r.target,C=t.targetAnchor=r.targetAnchor,_=Wg(r.props),T=_?e:S,E=_?w:C;if(o=o||tN(S),x?(d(r.dynamicChildren,x,T,i,a,o,s),C_(r,t,!0)):l||f(r,t,T,E,i,a,o,s,!1),m)_||wx(t,e,w,u,1);else if((t.props&&t.props.to)!==(r.props&&r.props.to)){const M=t.target=E_(t.props,v);M&&wx(t,M,null,u,0)}else _&&wx(t,S,C,u,1)}},remove(r,t,e,n,{um:i,o:{remove:a}},o){const{shapeFlag:s,children:l,anchor:u,targetAnchor:c,target:f,props:d}=r;if(f&&a(c),(o||!Wg(d))&&(a(u),s&16))for(let h=0;h<l.length;h++){const v=l[h];i(v,t,e,!0,!!v.dynamicChildren)}},move:wx,hydrate:Ioe};function wx(r,t,e,{o:{insert:n},m:i},a=2){a===0&&n(r.targetAnchor,t,e);const{el:o,anchor:s,shapeFlag:l,children:u,props:c}=r,f=a===2;if(f&&n(o,t,e),(!f||Wg(c))&&l&16)for(let d=0;d<u.length;d++)i(u[d],t,e,2);f&&n(s,t,e)}function Ioe(r,t,e,n,i,a,{o:{nextSibling:o,parentNode:s,querySelector:l}},u){const c=t.target=E_(t.props,l);if(c){const f=c._lpa||c.firstChild;t.shapeFlag&16&&(Wg(t.props)?(t.anchor=u(o(r),t,s(r),e,n,i,a),t.targetAnchor=f):(t.anchor=o(r),t.targetAnchor=u(f,t,c,e,n,i,a)),c._lpa=t.targetAnchor&&o(t.targetAnchor))}return t.anchor&&o(t.anchor)}const Poe=koe,rN="components";function vft(r,t){return Roe(rN,r,!0,t)||r}const Doe=Symbol();function Roe(r,t,e=!0,n=!1){const i=Jo||Da;if(i){const a=i.type;if(r===rN){const s=Woe(a);if(s&&(s===t||s===bl(t)||s===sx(bl(t))))return a}const o=nN(i[r]||a[r],t)||nN(i.appContext[r],t);return!o&&n?a:o}}function nN(r,t){return r&&(r[t]||r[bl(t)]||r[sx(bl(t))])}const Wi=Symbol(void 0),__=Symbol(void 0),Cs=Symbol(void 0),T_=Symbol(void 0),jg=[];let Hf=null;function Yg(r=!1){jg.push(Hf=r?null:[])}function Ooe(){jg.pop(),Hf=jg[jg.length-1]||null}let Sx=1;function iN(r){Sx+=r}function aN(r){return r.dynamicChildren=Sx>0?Hf||rv:null,Ooe(),Sx>0&&Hf&&Hf.push(r),r}function pft(r,t,e,n,i,a){return aN(sN(r,t,e,n,i,a,!0))}function Xg(r,t,e,n,i){return aN(Ln(r,t,e,n,i,!0))}function Cx(r){return r?r.__v_isVNode===!0:!1}function Wf(r,t){return r.type===t.type&&r.key===t.key}const Ex="__vInternal",oN=({key:r})=>r!=null?r:null,_x=({ref:r})=>r!=null?Pa(r)||io(r)||an(r)?{i:Jo,r}:r:null;function sN(r,t=null,e=null,n=0,i=null,a=r===Wi?0:1,o=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:r,props:t,key:t&&oN(t),ref:t&&_x(t),scopeId:gx,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return s?(A_(l,e),a&128&&r.normalize(l)):e&&(l.shapeFlag|=Pa(e)?8:16),Sx>0&&!o&&Hf&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&Hf.push(l),l}const Ln=Loe;function Loe(r,t=null,e=null,n=0,i=null,a=!1){if((!r||r===Doe)&&(r=Cs),Cx(r)){const s=fc(r,t,!0);return e&&A_(s,e),s}if(joe(r)&&(r=r.__vccOpts),t){t=Foe(t);let{class:s,style:l}=t;s&&!Pa(s)&&(t.class=WE(s)),ca(l)&&(MF(l)&&!Jr(l)&&(l=Ia({},l)),t.style=HE(l))}const o=Pa(r)?1:roe(r)?128:Moe(r)?64:ca(r)?4:an(r)?2:0;return sN(r,t,e,n,i,o,a,!0)}function Foe(r){return r?MF(r)||Ex in r?Ia({},r):r:null}function fc(r,t,e=!1){const{props:n,ref:i,patchFlag:a,children:o}=r,s=t?El(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:s,key:s&&oN(s),ref:t&&t.ref?e&&i?Jr(i)?i.concat(_x(t)):[i,_x(t)]:_x(t):i,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:o,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:t&&r.type!==Wi?a===-1?16:a|16:a,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&fc(r.ssContent),ssFallback:r.ssFallback&&fc(r.ssFallback),el:r.el,anchor:r.anchor}}function qg(r=" ",t=0){return Ln(__,null,r,t)}function gft(r="",t=!1){return t?(Yg(),Xg(Cs,null,r)):Ln(Cs,null,r)}function Cl(r){return r==null||typeof r=="boolean"?Ln(Cs):Jr(r)?Ln(Wi,null,r.slice()):typeof r=="object"?dc(r):Ln(__,null,String(r))}function dc(r){return r.el===null||r.memo?r:fc(r)}function A_(r,t){let e=0;const{shapeFlag:n}=r;if(t==null)t=null;else if(Jr(t))e=16;else if(typeof t=="object")if(n&(1|64)){const i=t.default;i&&(i._c&&(i._d=!1),A_(r,i()),i._c&&(i._d=!0));return}else{e=32;const i=t._;!i&&!(Ex in t)?t._ctx=Jo:i===3&&Jo&&(Jo.slots._===1?t._=1:(t._=2,r.patchFlag|=1024))}else an(t)?(t={default:t,_ctx:Jo},e=32):(t=String(t),n&64?(e=16,t=[qg(t)]):e=8);r.children=t,r.shapeFlag|=e}function El(...r){const t={};for(let e=0;e<r.length;e++){const n=r[e];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=WE([t.class,n.class]));else if(i==="style")t.style=HE([t.style,n.style]);else if(nx(i)){const a=t[i],o=n[i];a!==o&&!(Jr(a)&&a.includes(o))&&(t[i]=a?[].concat(a,o):o)}else i!==""&&(t[i]=n[i])}return t}function mft(r,t,e,n){let i;const a=e&&e[n];if(Jr(r)||Pa(r)){i=new Array(r.length);for(let o=0,s=r.length;o<s;o++)i[o]=t(r[o],o,void 0,a&&a[o])}else if(typeof r=="number"){i=new Array(r);for(let o=0;o<r;o++)i[o]=t(o+1,o,void 0,a&&a[o])}else if(ca(r))if(r[Symbol.iterator])i=Array.from(r,(o,s)=>t(o,s,void 0,a&&a[s]));else{const o=Object.keys(r);i=new Array(o.length);for(let s=0,l=o.length;s<l;s++){const u=o[s];i[s]=t(r[u],u,s,a&&a[s])}}else i=[];return e&&(e[n]=i),i}function qr(r,t,e={},n,i){if(Jo.isCE)return Ln("slot",t==="default"?null:{name:t},n&&n());let a=r[t];a&&a._c&&(a._d=!1),Yg();const o=a&&lN(a(e)),s=Xg(Wi,{key:e.key||`_${t}`},o||(n?n():[]),o&&r._===1?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),a&&a._c&&(a._d=!0),s}function lN(r){return r.some(t=>Cx(t)?!(t.type===Cs||t.type===Wi&&!lN(t.children)):!0)?r:null}const M_=r=>r?uN(r)?k_(r)||r.proxy:M_(r.parent):null,Tx=Ia(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>M_(r.parent),$root:r=>M_(r.root),$emit:r=>r.emit,$options:r=>VF(r),$forceUpdate:r=>()=>vN(r.update),$nextTick:r=>Ha.bind(r.proxy),$watch:r=>Qoe.bind(r)}),Noe={get({_:r},t){const{ctx:e,setupState:n,data:i,props:a,accessCache:o,type:s,appContext:l}=r;let u;if(t[0]!=="$"){const h=o[t];if(h!==void 0)switch(h){case 1:return n[t];case 2:return i[t];case 4:return e[t];case 3:return a[t]}else{if(n!==ei&&Rn(n,t))return o[t]=1,n[t];if(i!==ei&&Rn(i,t))return o[t]=2,i[t];if((u=r.propsOptions[0])&&Rn(u,t))return o[t]=3,a[t];if(e!==ei&&Rn(e,t))return o[t]=4,e[t];y_&&(o[t]=0)}}const c=Tx[t];let f,d;if(c)return t==="$attrs"&&Qo(r,"get",t),c(r);if((f=s.__cssModules)&&(f=f[t]))return f;if(e!==ei&&Rn(e,t))return o[t]=4,e[t];if(d=l.config.globalProperties,Rn(d,t))return d[t]},set({_:r},t,e){const{data:n,setupState:i,ctx:a}=r;if(i!==ei&&Rn(i,t))i[t]=e;else if(n!==ei&&Rn(n,t))n[t]=e;else if(Rn(r.props,t))return!1;return t[0]==="$"&&t.slice(1)in r?!1:(a[t]=e,!0)},has({_:{data:r,setupState:t,accessCache:e,ctx:n,appContext:i,propsOptions:a}},o){let s;return!!e[o]||r!==ei&&Rn(r,o)||t!==ei&&Rn(t,o)||(s=a[0])&&Rn(s,o)||Rn(n,o)||Rn(Tx,o)||Rn(i.config.globalProperties,o)}},Boe=eN();let $oe=0;function zoe(r,t,e){const n=r.type,i=(t?t.appContext:r.appContext)||Boe,a={uid:$oe++,vnode:r,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,update:null,scope:new pae(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:jF(n,i),emitsOptions:RF(n,i),emit:null,emitted:null,propsDefaults:ei,inheritAttrs:n.inheritAttrs,ctx:ei,data:ei,props:ei,attrs:ei,slots:ei,refs:ei,setupState:ei,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Kae.bind(null,a),r.ce&&r.ce(a),a}let Da=null;const lv=()=>Da||Jo,uv=r=>{Da=r,r.scope.on()},jf=()=>{Da&&Da.scope.off(),Da=null};function uN(r){return r.vnode.shapeFlag&4}let Ax=!1;function Goe(r,t=!1){Ax=t;const{props:e,children:n}=r.vnode,i=uN(r);yoe(r,e,i,t),woe(r,n);const a=i?Uoe(r,t):void 0;return Ax=!1,a}function Uoe(r,t){const e=r.type;r.accessCache=Object.create(null),r.proxy=u_(new Proxy(r.ctx,Noe));const{setup:n}=e;if(n){const i=r.setupContext=n.length>1?Hoe(r):null;uv(r),ov();const a=hc(n,r,0,[r.props,i]);if(zf(),jf(),sF(a)){if(a.then(jf,jf),t)return a.then(o=>{cN(r,o,t)}).catch(o=>{Mx(o,r,0)});r.asyncDep=a}else cN(r,a,t)}else dN(r,t)}function cN(r,t,e){an(t)?r.type.__ssrInlineRender?r.ssrRender=t:r.render=t:ca(t)&&(r.setupState=DF(t)),dN(r,e)}let fN;function dN(r,t,e){const n=r.type;if(!r.render){if(!t&&fN&&!n.render){const i=n.template;if(i){const{isCustomElement:a,compilerOptions:o}=r.appContext.config,{delimiters:s,compilerOptions:l}=n,u=Ia(Ia({isCustomElement:a,delimiters:s},o),l);n.render=fN(i,u)}}r.render=n.render||qs}uv(r),ov(),hoe(r),zf(),jf()}function Voe(r){return new Proxy(r.attrs,{get(t,e){return Qo(r,"get","$attrs"),t[e]}})}function Hoe(r){const t=n=>{r.exposed=n||{}};let e;return{get attrs(){return e||(e=Voe(r))},slots:r.slots,emit:r.emit,expose:t}}function k_(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(DF(u_(r.exposed)),{get(t,e){if(e in t)return t[e];if(e in Tx)return Tx[e](r)}}))}function Woe(r){return an(r)&&r.displayName||r.name}function joe(r){return an(r)&&"__vccOpts"in r}function hc(r,t,e,n){let i;try{i=n?r(...n):r()}catch(a){Mx(a,t,e)}return i}function Es(r,t,e,n){if(an(r)){const a=hc(r,t,e,n);return a&&sF(a)&&a.catch(o=>{Mx(o,t,e)}),a}const i=[];for(let a=0;a<r.length;a++)i.push(Es(r[a],t,e,n));return i}function Mx(r,t,e,n=!0){const i=t?t.vnode:null;if(t){let a=t.parent;const o=t.proxy,s=e;for(;a;){const u=a.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](r,o,s)===!1)return}a=a.parent}const l=t.appContext.config.errorHandler;if(l){hc(l,null,10,[r,o,s]);return}}Yoe(r,e,i,n)}function Yoe(r,t,e,n=!0){console.error(r)}let kx=!1,I_=!1;const ts=[];let gu=0;const Kg=[];let Zg=null,cv=0;const Qg=[];let vc=null,fv=0;const hN=Promise.resolve();let P_=null,D_=null;function Ha(r){const t=P_||hN;return r?t.then(this?r.bind(this):r):t}function Xoe(r){let t=gu+1,e=ts.length;for(;t<e;){const n=t+e>>>1;Jg(ts[n])<r?t=n+1:e=n}return t}function vN(r){(!ts.length||!ts.includes(r,kx&&r.allowRecurse?gu+1:gu))&&r!==D_&&(r.id==null?ts.push(r):ts.splice(Xoe(r.id),0,r),pN())}function pN(){!kx&&!I_&&(I_=!0,P_=hN.then(yN))}function qoe(r){const t=ts.indexOf(r);t>gu&&ts.splice(t,1)}function gN(r,t,e,n){Jr(r)?e.push(...r):(!t||!t.includes(r,r.allowRecurse?n+1:n))&&e.push(r),pN()}function Koe(r){gN(r,Zg,Kg,cv)}function Zoe(r){gN(r,vc,Qg,fv)}function R_(r,t=null){if(Kg.length){for(D_=t,Zg=[...new Set(Kg)],Kg.length=0,cv=0;cv<Zg.length;cv++)Zg[cv]();Zg=null,cv=0,D_=null,R_(r,t)}}function mN(r){if(Qg.length){const t=[...new Set(Qg)];if(Qg.length=0,vc){vc.push(...t);return}for(vc=t,vc.sort((e,n)=>Jg(e)-Jg(n)),fv=0;fv<vc.length;fv++)vc[fv]();vc=null,fv=0}}const Jg=r=>r.id==null?1/0:r.id;function yN(r){I_=!1,kx=!0,R_(r),ts.sort((e,n)=>Jg(e)-Jg(n));const t=qs;try{for(gu=0;gu<ts.length;gu++){const e=ts[gu];e&&e.active!==!1&&hc(e,null,14)}}finally{gu=0,ts.length=0,mN(),kx=!1,P_=null,(ts.length||Kg.length||Qg.length)&&yN(r)}}function Ks(r,t){return O_(r,null,t)}const bN={};function fn(r,t,e){return O_(r,t,e)}function O_(r,t,{immediate:e,deep:n,flush:i,onTrack:a,onTrigger:o}=ei){const s=Da;let l,u=!1,c=!1;if(io(r)?(l=()=>r.value,u=!!r._shallow):sv(r)?(l=()=>r,n=!0):Jr(r)?(c=!0,u=r.some(sv),l=()=>r.map(m=>{if(io(m))return m.value;if(sv(m))return Yf(m);if(an(m))return hc(m,s,2)})):an(r)?t?l=()=>hc(r,s,2):l=()=>{if(!(s&&s.isUnmounted))return f&&f(),Es(r,s,3,[d])}:l=qs,t&&n){const m=l;l=()=>Yf(m())}let f,d=m=>{f=g.onStop=()=>{hc(m,s,4)}};if(Ax)return d=qs,t?e&&Es(t,s,3,[l(),c?[]:void 0,d]):l(),qs;let h=c?[]:bN;const v=()=>{if(!!g.active)if(t){const m=g.run();(n||u||(c?m.some((y,b)=>$g(y,h[b])):$g(m,h)))&&(f&&f(),Es(t,s,3,[m,h===bN?void 0:h,d]),h=m)}else g.run()};v.allowRecurse=!!t;let p;i==="sync"?p=v:i==="post"?p=()=>bo(v,s&&s.suspense):p=()=>{!s||s.isMounted?Koe(v):v()};const g=new t_(l,p);return t?e?v():h=g.run():i==="post"?bo(g.run.bind(g),s&&s.suspense):g.run(),()=>{g.stop(),s&&s.scope&&aF(s.scope.effects,g)}}function Qoe(r,t,e){const n=this.proxy,i=Pa(r)?r.includes(".")?xN(n,r):()=>n[r]:r.bind(n,n);let a;an(t)?a=t:(a=t.handler,e=t);const o=Da;uv(this);const s=O_(i,a.bind(n),e);return o?uv(o):jf(),s}function xN(r,t){const e=t.split(".");return()=>{let n=r;for(let i=0;i<e.length&&n;i++)n=n[e[i]];return n}}function Yf(r,t){if(!ca(r)||r.__v_skip||(t=t||new Set,t.has(r)))return r;if(t.add(r),io(r))Yf(r.value,t);else if(Jr(r))for(let e=0;e<r.length;e++)Yf(r[e],t);else if(oF(r)||nv(r))r.forEach(e=>{Yf(e,t)});else if(uF(r))for(const e in r)Yf(r[e],t);return r}function I(r,t,e){const n=arguments.length;return n===2?ca(t)&&!Jr(t)?Cx(t)?Ln(r,null,[t]):Ln(r,t):Ln(r,null,t):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&Cx(e)&&(e=[e]),Ln(r,t,e))}const Joe="3.2.24",ese="http://www.w3.org/2000/svg",dv=typeof document!="undefined"?document:null,wN=new Map,tse={insert:(r,t,e)=>{t.insertBefore(r,e||null)},remove:r=>{const t=r.parentNode;t&&t.removeChild(r)},createElement:(r,t,e,n)=>{const i=t?dv.createElementNS(ese,r):dv.createElement(r,e?{is:e}:void 0);return r==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:r=>dv.createTextNode(r),createComment:r=>dv.createComment(r),setText:(r,t)=>{r.nodeValue=t},setElementText:(r,t)=>{r.textContent=t},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>dv.querySelector(r),setScopeId(r,t){r.setAttribute(t,"")},cloneNode(r){const t=r.cloneNode(!0);return"_value"in r&&(t._value=r._value),t},insertStaticContent(r,t,e,n){const i=e?e.previousSibling:t.lastChild;let a=wN.get(r);if(!a){const o=dv.createElement("template");if(o.innerHTML=n?`<svg>${r}</svg>`:r,a=o.content,n){const s=a.firstChild;for(;s.firstChild;)a.appendChild(s.firstChild);a.removeChild(s)}wN.set(r,a)}return t.insertBefore(a.cloneNode(!0),e),[i?i.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}};function rse(r,t,e){const n=r._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?r.removeAttribute("class"):e?r.setAttribute("class",t):r.className=t}function nse(r,t,e){const n=r.style,i=Pa(e);if(e&&!i){for(const a in e)L_(n,a,e[a]);if(t&&!Pa(t))for(const a in t)e[a]==null&&L_(n,a,"")}else{const a=n.display;i?t!==e&&(n.cssText=e):t&&r.removeAttribute("style"),"_vod"in r&&(n.display=a)}}const SN=/\s*!important$/;function L_(r,t,e){if(Jr(e))e.forEach(n=>L_(r,t,n));else if(t.startsWith("--"))r.setProperty(t,e);else{const n=ise(r,t);SN.test(e)?r.setProperty(iv(n),e.replace(SN,""),"important"):r[n]=e}}const CN=["Webkit","Moz","ms"],F_={};function ise(r,t){const e=F_[t];if(e)return e;let n=bl(t);if(n!=="filter"&&n in r)return F_[t]=n;n=sx(n);for(let i=0;i<CN.length;i++){const a=CN[i]+n;if(a in r)return F_[t]=a}return t}const EN="http://www.w3.org/1999/xlink";function ase(r,t,e,n,i){if(n&&t.startsWith("xlink:"))e==null?r.removeAttributeNS(EN,t.slice(6,t.length)):r.setAttributeNS(EN,t,e);else{const a=iae(t);e==null||a&&!nF(e)?r.removeAttribute(t):r.setAttribute(t,a?"":e)}}function ose(r,t,e,n,i,a,o){if(t==="innerHTML"||t==="textContent"){n&&o(n,i,a),r[t]=e==null?"":e;return}if(t==="value"&&r.tagName!=="PROGRESS"&&!r.tagName.includes("-")){r._value=e;const s=e==null?"":e;(r.value!==s||r.tagName==="OPTION")&&(r.value=s),e==null&&r.removeAttribute(t);return}if(e===""||e==null){const s=typeof r[t];if(s==="boolean"){r[t]=nF(e);return}else if(e==null&&s==="string"){r[t]="",r.removeAttribute(t);return}else if(s==="number"){try{r[t]=0}catch{}r.removeAttribute(t);return}}try{r[t]=e}catch{}}let Ix=Date.now,_N=!1;if(typeof window!="undefined"){Ix()>document.createEvent("Event").timeStamp&&(Ix=()=>performance.now());const r=navigator.userAgent.match(/firefox\/(\d+)/i);_N=!!(r&&Number(r[1])<=53)}let N_=0;const sse=Promise.resolve(),lse=()=>{N_=0},use=()=>N_||(sse.then(lse),N_=Ix());function cse(r,t,e,n){r.addEventListener(t,e,n)}function fse(r,t,e,n){r.removeEventListener(t,e,n)}function dse(r,t,e,n,i=null){const a=r._vei||(r._vei={}),o=a[t];if(n&&o)o.value=n;else{const[s,l]=hse(t);if(n){const u=a[t]=vse(n,i);cse(r,s,u,l)}else o&&(fse(r,s,o,l),a[t]=void 0)}}const TN=/(?:Once|Passive|Capture)$/;function hse(r){let t;if(TN.test(r)){t={};let e;for(;e=r.match(TN);)r=r.slice(0,r.length-e[0].length),t[e[0].toLowerCase()]=!0}return[iv(r.slice(2)),t]}function vse(r,t){const e=n=>{const i=n.timeStamp||Ix();(_N||i>=e.attached-1)&&Es(pse(n,e.value),t,5,[n])};return e.value=r,e.attached=use(),e}function pse(r,t){if(Jr(t)){const e=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{e.call(r),r._stopped=!0},t.map(n=>i=>!i._stopped&&n(i))}else return t}const AN=/^on[a-z]/,gse=(r,t,e,n,i=!1,a,o,s,l)=>{t==="class"?rse(r,n,i):t==="style"?nse(r,e,n):nx(t)?jE(t)||dse(r,t,e,n,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):mse(r,t,n,i))?ose(r,t,n,a,o,s,l):(t==="true-value"?r._trueValue=n:t==="false-value"&&(r._falseValue=n),ase(r,t,n,i))};function mse(r,t,e,n){return n?!!(t==="innerHTML"||t==="textContent"||t in r&&AN.test(t)&&an(e)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&r.tagName==="INPUT"||t==="type"&&r.tagName==="TEXTAREA"||AN.test(t)&&Pa(e)?!1:t in r}const pc="transition",em="animation",Ra=(r,{slots:t})=>I(FF,IN(r),t);Ra.displayName="Transition";const MN={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},yse=Ra.props=Ia({},FF.props,MN),Xf=(r,t=[])=>{Jr(r)?r.forEach(e=>e(...t)):r&&r(...t)},kN=r=>r?Jr(r)?r.some(t=>t.length>1):r.length>1:!1;function IN(r){const t={};for(const k in r)k in MN||(t[k]=r[k]);if(r.css===!1)return t;const{name:e="v",type:n,duration:i,enterFromClass:a=`${e}-enter-from`,enterActiveClass:o=`${e}-enter-active`,enterToClass:s=`${e}-enter-to`,appearFromClass:l=a,appearActiveClass:u=o,appearToClass:c=s,leaveFromClass:f=`${e}-leave-from`,leaveActiveClass:d=`${e}-leave-active`,leaveToClass:h=`${e}-leave-to`}=r,v=bse(i),p=v&&v[0],g=v&&v[1],{onBeforeEnter:m,onEnter:y,onEnterCancelled:b,onLeave:x,onLeaveCancelled:w,onBeforeAppear:S=m,onAppear:C=y,onAppearCancelled:_=b}=t,T=(k,P,F)=>{qf(k,P?c:s),qf(k,P?u:o),F&&F()},E=(k,P)=>{qf(k,h),qf(k,d),P&&P()},M=k=>(P,F)=>{const $=k?C:y,R=()=>T(P,k,F);Xf($,[P,R]),PN(()=>{qf(P,k?l:a),mu(P,k?c:s),kN($)||DN(P,n,p,R)})};return Ia(t,{onBeforeEnter(k){Xf(m,[k]),mu(k,a),mu(k,o)},onBeforeAppear(k){Xf(S,[k]),mu(k,l),mu(k,u)},onEnter:M(!1),onAppear:M(!0),onLeave(k,P){const F=()=>E(k,P);mu(k,f),FN(),mu(k,d),PN(()=>{qf(k,f),mu(k,h),kN(x)||DN(k,n,g,F)}),Xf(x,[k,F])},onEnterCancelled(k){T(k,!1),Xf(b,[k])},onAppearCancelled(k){T(k,!0),Xf(_,[k])},onLeaveCancelled(k){E(k),Xf(w,[k])}})}function bse(r){if(r==null)return null;if(ca(r))return[B_(r.enter),B_(r.leave)];{const t=B_(r);return[t,t]}}function B_(r){return cF(r)}function mu(r,t){t.split(/\s+/).forEach(e=>e&&r.classList.add(e)),(r._vtc||(r._vtc=new Set)).add(t)}function qf(r,t){t.split(/\s+/).forEach(n=>n&&r.classList.remove(n));const{_vtc:e}=r;e&&(e.delete(t),e.size||(r._vtc=void 0))}function PN(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let xse=0;function DN(r,t,e,n){const i=r._endId=++xse,a=()=>{i===r._endId&&n()};if(e)return setTimeout(a,e);const{type:o,timeout:s,propCount:l}=RN(r,t);if(!o)return n();const u=o+"end";let c=0;const f=()=>{r.removeEventListener(u,d),a()},d=h=>{h.target===r&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},s+1),r.addEventListener(u,d)}function RN(r,t){const e=window.getComputedStyle(r),n=v=>(e[v]||"").split(", "),i=n(pc+"Delay"),a=n(pc+"Duration"),o=ON(i,a),s=n(em+"Delay"),l=n(em+"Duration"),u=ON(s,l);let c=null,f=0,d=0;t===pc?o>0&&(c=pc,f=o,d=a.length):t===em?u>0&&(c=em,f=u,d=l.length):(f=Math.max(o,u),c=f>0?o>u?pc:em:null,d=c?c===pc?a.length:l.length:0);const h=c===pc&&/\b(transform|all)(,|$)/.test(e[pc+"Property"]);return{type:c,timeout:f,propCount:d,hasTransform:h}}function ON(r,t){for(;r.length<t.length;)r=r.concat(r);return Math.max(...t.map((e,n)=>LN(e)+LN(r[n])))}function LN(r){return Number(r.slice(0,-1).replace(",","."))*1e3}function FN(){return document.body.offsetHeight}const NN=new WeakMap,BN=new WeakMap,wse={name:"TransitionGroup",props:Ia({},yse,{tag:String,moveClass:String}),setup(r,{slots:t}){const e=lv(),n=LF();let i,a;return zF(()=>{if(!i.length)return;const o=r.moveClass||`${r.name||"v"}-move`;if(!Tse(i[0].el,e.vnode.el,o))return;i.forEach(Cse),i.forEach(Ese);const s=i.filter(_se);FN(),s.forEach(l=>{const u=l.el,c=u.style;mu(u,o),c.transform=c.webkitTransform=c.transitionDuration="";const f=u._moveCb=d=>{d&&d.target!==u||(!d||/transform$/.test(d.propertyName))&&(u.removeEventListener("transitionend",f),u._moveCb=null,qf(u,o))};u.addEventListener("transitionend",f)})}),()=>{const o=On(r),s=IN(o);let l=o.tag||Wi;i=a,a=t.default?p_(t.default()):[];for(let u=0;u<a.length;u++){const c=a[u];c.key!=null&&Hg(c,Vg(c,s,n,e))}if(i)for(let u=0;u<i.length;u++){const c=i[u];Hg(c,Vg(c,s,n,e)),NN.set(c,c.el.getBoundingClientRect())}return Ln(l,null,a)}}},Sse=wse;function Cse(r){const t=r.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function Ese(r){BN.set(r,r.el.getBoundingClientRect())}function _se(r){const t=NN.get(r),e=BN.get(r),n=t.left-e.left,i=t.top-e.top;if(n||i){const a=r.el.style;return a.transform=a.webkitTransform=`translate(${n}px,${i}px)`,a.transitionDuration="0s",r}}function Tse(r,t,e){const n=r.cloneNode();r._vtc&&r._vtc.forEach(o=>{o.split(/\s+/).forEach(s=>s&&n.classList.remove(s))}),e.split(/\s+/).forEach(o=>o&&n.classList.add(o)),n.style.display="none";const i=t.nodeType===1?t:t.parentNode;i.appendChild(n);const{hasTransform:a}=RN(n);return i.removeChild(n),a}const Px={beforeMount(r,{value:t},{transition:e}){r._vod=r.style.display==="none"?"":r.style.display,e&&t?e.beforeEnter(r):tm(r,t)},mounted(r,{value:t},{transition:e}){e&&t&&e.enter(r)},updated(r,{value:t,oldValue:e},{transition:n}){!t!=!e&&(n?t?(n.beforeEnter(r),tm(r,!0),n.enter(r)):n.leave(r,()=>{tm(r,!1)}):tm(r,t))},beforeUnmount(r,{value:t}){tm(r,t)}};function tm(r,t){r.style.display=t?r._vod:"none"}const Ase=Ia({patchProp:gse},tse);let $N;function Mse(){return $N||($N=_oe(Ase))}const yft=(...r)=>{const t=Mse().createApp(...r),{mount:e}=t;return t.mount=n=>{const i=kse(n);if(!i)return;const a=t._component;!an(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.innerHTML="";const o=e(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function kse(r){return Pa(r)?document.querySelector(r):r}/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const zN=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",hv=r=>zN?Symbol(r):"_vr_"+r,Ise=hv("rvlm"),GN=hv("rvd"),Dx=hv("r"),UN=hv("rl"),$_=hv("rvl"),vv=typeof window!="undefined";function Pse(r){return r.__esModule||zN&&r[Symbol.toStringTag]==="Module"}const ti=Object.assign;function z_(r,t){const e={};for(const n in t){const i=t[n];e[n]=Array.isArray(i)?i.map(r):r(i)}return e}const rm=()=>{},Dse=/\/$/,Rse=r=>r.replace(Dse,"");function G_(r,t,e="/"){let n,i={},a="",o="";const s=t.indexOf("?"),l=t.indexOf("#",s>-1?s:0);return s>-1&&(n=t.slice(0,s),a=t.slice(s+1,l>-1?l:t.length),i=r(a)),l>-1&&(n=n||t.slice(0,l),o=t.slice(l,t.length)),n=Nse(n!=null?n:t,e),{fullPath:n+(a&&"?")+a+o,path:n,query:i,hash:o}}function Ose(r,t){const e=t.query?r(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function VN(r,t){return!t||!r.toLowerCase().startsWith(t.toLowerCase())?r:r.slice(t.length)||"/"}function Lse(r,t,e){const n=t.matched.length-1,i=e.matched.length-1;return n>-1&&n===i&&pv(t.matched[n],e.matched[i])&&HN(t.params,e.params)&&r(t.query)===r(e.query)&&t.hash===e.hash}function pv(r,t){return(r.aliasOf||r)===(t.aliasOf||t)}function HN(r,t){if(Object.keys(r).length!==Object.keys(t).length)return!1;for(const e in r)if(!Fse(r[e],t[e]))return!1;return!0}function Fse(r,t){return Array.isArray(r)?WN(r,t):Array.isArray(t)?WN(t,r):r===t}function WN(r,t){return Array.isArray(t)?r.length===t.length&&r.every((e,n)=>e===t[n]):r.length===1&&r[0]===t}function Nse(r,t){if(r.startsWith("/"))return r;if(!r)return t;const e=t.split("/"),n=r.split("/");let i=e.length-1,a,o;for(a=0;a<n.length;a++)if(o=n[a],!(i===1||o==="."))if(o==="..")i--;else break;return e.slice(0,i).join("/")+"/"+n.slice(a-(a===n.length?1:0)).join("/")}var nm;(function(r){r.pop="pop",r.push="push"})(nm||(nm={}));var im;(function(r){r.back="back",r.forward="forward",r.unknown=""})(im||(im={}));function Bse(r){if(!r)if(vv){const t=document.querySelector("base");r=t&&t.getAttribute("href")||"/",r=r.replace(/^\w+:\/\/[^\/]+/,"")}else r="/";return r[0]!=="/"&&r[0]!=="#"&&(r="/"+r),Rse(r)}const $se=/^[^#]+#/;function zse(r,t){return r.replace($se,"#")+t}function Gse(r,t){const e=document.documentElement.getBoundingClientRect(),n=r.getBoundingClientRect();return{behavior:t.behavior,left:n.left-e.left-(t.left||0),top:n.top-e.top-(t.top||0)}}const Rx=()=>({left:window.pageXOffset,top:window.pageYOffset});function Use(r){let t;if("el"in r){const e=r.el,n=typeof e=="string"&&e.startsWith("#"),i=typeof e=="string"?n?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!i)return;t=Gse(i,r)}else t=r;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function jN(r,t){return(history.state?history.state.position-t:-1)+r}const U_=new Map;function Vse(r,t){U_.set(r,t)}function Hse(r){const t=U_.get(r);return U_.delete(r),t}let Wse=()=>location.protocol+"//"+location.host;function YN(r,t){const{pathname:e,search:n,hash:i}=t,a=r.indexOf("#");if(a>-1){let s=i.includes(r.slice(a))?r.slice(a).length:1,l=i.slice(s);return l[0]!=="/"&&(l="/"+l),VN(l,"")}return VN(e,r)+n+i}function jse(r,t,e,n){let i=[],a=[],o=null;const s=({state:d})=>{const h=YN(r,location),v=e.value,p=t.value;let g=0;if(d){if(e.value=h,t.value=d,o&&o===v){o=null;return}g=p?d.position-p.position:0}else n(h);i.forEach(m=>{m(e.value,v,{delta:g,type:nm.pop,direction:g?g>0?im.forward:im.back:im.unknown})})};function l(){o=e.value}function u(d){i.push(d);const h=()=>{const v=i.indexOf(d);v>-1&&i.splice(v,1)};return a.push(h),h}function c(){const{history:d}=window;!d.state||d.replaceState(ti({},d.state,{scroll:Rx()}),"")}function f(){for(const d of a)d();a=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:f}}function XN(r,t,e,n=!1,i=!1){return{back:r,current:t,forward:e,replaced:n,position:window.history.length,scroll:i?Rx():null}}function Yse(r){const{history:t,location:e}=window,n={value:YN(r,e)},i={value:t.state};i.value||a(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(l,u,c){const f=r.indexOf("#"),d=f>-1?(e.host&&document.querySelector("base")?r:r.slice(f))+l:Wse()+r+l;try{t[c?"replaceState":"pushState"](u,"",d),i.value=u}catch(h){console.error(h),e[c?"replace":"assign"](d)}}function o(l,u){const c=ti({},t.state,XN(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});a(l,c,!0),n.value=l}function s(l,u){const c=ti({},i.value,t.state,{forward:l,scroll:Rx()});a(c.current,c,!0);const f=ti({},XN(n.value,l,null),{position:c.position+1},u);a(l,f,!1),n.value=l}return{location:n,state:i,push:s,replace:o}}function Xse(r){r=Bse(r);const t=Yse(r),e=jse(r,t.state,t.location,t.replace);function n(a,o=!0){o||e.pauseListeners(),history.go(a)}const i=ti({location:"",base:r,go:n,createHref:zse.bind(null,r)},t,e);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function bft(r){return r=location.host?r||location.pathname+location.search:"",r.includes("#")||(r+="#"),Xse(r)}function qse(r){return typeof r=="string"||r&&typeof r=="object"}function qN(r){return typeof r=="string"||typeof r=="symbol"}const gc={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},KN=hv("nf");var ZN;(function(r){r[r.aborted=4]="aborted",r[r.cancelled=8]="cancelled",r[r.duplicated=16]="duplicated"})(ZN||(ZN={}));function gv(r,t){return ti(new Error,{type:r,[KN]:!0},t)}function Kf(r,t){return r instanceof Error&&KN in r&&(t==null||!!(r.type&t))}const QN="[^/]+?",Kse={sensitive:!1,strict:!1,start:!0,end:!0},Zse=/[.+*?^${}()[\]/\\]/g;function Qse(r,t){const e=ti({},Kse,t),n=[];let i=e.start?"^":"";const a=[];for(const u of r){const c=u.length?[]:[90];e.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const d=u[f];let h=40+(e.sensitive?.25:0);if(d.type===0)f||(i+="/"),i+=d.value.replace(Zse,"\\$&"),h+=40;else if(d.type===1){const{value:v,repeatable:p,optional:g,regexp:m}=d;a.push({name:v,repeatable:p,optional:g});const y=m||QN;if(y!==QN){h+=10;try{new RegExp(`(${y})`)}catch(x){throw new Error(`Invalid custom RegExp for param "${v}" (${y}): `+x.message)}}let b=p?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(b=g&&u.length<2?`(?:/${b})`:"/"+b),g&&(b+="?"),i+=b,h+=20,g&&(h+=-8),p&&(h+=-20),y===".*"&&(h+=-50)}c.push(h)}n.push(c)}if(e.strict&&e.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}e.strict||(i+="/?"),e.end?i+="$":e.strict&&(i+="(?:/|$)");const o=new RegExp(i,e.sensitive?"":"i");function s(u){const c=u.match(o),f={};if(!c)return null;for(let d=1;d<c.length;d++){const h=c[d]||"",v=a[d-1];f[v.name]=h&&v.repeatable?h.split("/"):h}return f}function l(u){let c="",f=!1;for(const d of r){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const h of d)if(h.type===0)c+=h.value;else if(h.type===1){const{value:v,repeatable:p,optional:g}=h,m=v in u?u[v]:"";if(Array.isArray(m)&&!p)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const y=Array.isArray(m)?m.join("/"):m;if(!y)if(g)d.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${v}"`);c+=y}}return c}return{re:o,score:n,keys:a,parse:s,stringify:l}}function Jse(r,t){let e=0;for(;e<r.length&&e<t.length;){const n=t[e]-r[e];if(n)return n;e++}return r.length<t.length?r.length===1&&r[0]===40+40?-1:1:r.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function ele(r,t){let e=0;const n=r.score,i=t.score;for(;e<n.length&&e<i.length;){const a=Jse(n[e],i[e]);if(a)return a;e++}return i.length-n.length}const tle={type:0,value:""},rle=/[a-zA-Z0-9_]/;function nle(r){if(!r)return[[]];if(r==="/")return[[tle]];if(!r.startsWith("/"))throw new Error(`Invalid path "${r}"`);function t(h){throw new Error(`ERR (${e})/"${u}": ${h}`)}let e=0,n=e;const i=[];let a;function o(){a&&i.push(a),a=[]}let s=0,l,u="",c="";function f(){!u||(e===0?a.push({type:0,value:u}):e===1||e===2||e===3?(a.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function d(){u+=l}for(;s<r.length;){if(l=r[s++],l==="\\"&&e!==2){n=e,e=4;continue}switch(e){case 0:l==="/"?(u&&f(),o()):l===":"?(f(),e=1):d();break;case 4:d(),e=n;break;case 1:l==="("?e=2:rle.test(l)?d():(f(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:e=3:c+=l;break;case 3:f(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,c="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),o(),i}function ile(r,t,e){const n=Qse(nle(r.path),e),i=ti(n,{record:r,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function ale(r,t){const e=[],n=new Map;t=e3({strict:!1,end:!0,sensitive:!1},t);function i(c){return n.get(c)}function a(c,f,d){const h=!d,v=sle(c);v.aliasOf=d&&d.record;const p=e3(t,c),g=[v];if("alias"in c){const b=typeof c.alias=="string"?[c.alias]:c.alias;for(const x of b)g.push(ti({},v,{components:d?d.record.components:v.components,path:x,aliasOf:d?d.record:v}))}let m,y;for(const b of g){const{path:x}=b;if(f&&x[0]!=="/"){const w=f.record.path,S=w[w.length-1]==="/"?"":"/";b.path=f.record.path+(x&&S+x)}if(m=ile(b,f,p),d?d.alias.push(m):(y=y||m,y!==m&&y.alias.push(m),h&&c.name&&!JN(m)&&o(c.name)),"children"in v){const w=v.children;for(let S=0;S<w.length;S++)a(w[S],m,d&&d.children[S])}d=d||m,l(m)}return y?()=>{o(y)}:rm}function o(c){if(qN(c)){const f=n.get(c);f&&(n.delete(c),e.splice(e.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=e.indexOf(c);f>-1&&(e.splice(f,1),c.record.name&&n.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function s(){return e}function l(c){let f=0;for(;f<e.length&&ele(c,e[f])>=0;)f++;e.splice(f,0,c),c.record.name&&!JN(c)&&n.set(c.record.name,c)}function u(c,f){let d,h={},v,p;if("name"in c&&c.name){if(d=n.get(c.name),!d)throw gv(1,{location:c});p=d.record.name,h=ti(ole(f.params,d.keys.filter(y=>!y.optional).map(y=>y.name)),c.params),v=d.stringify(h)}else if("path"in c)v=c.path,d=e.find(y=>y.re.test(v)),d&&(h=d.parse(v),p=d.record.name);else{if(d=f.name?n.get(f.name):e.find(y=>y.re.test(f.path)),!d)throw gv(1,{location:c,currentLocation:f});p=d.record.name,h=ti({},f.params,c.params),v=d.stringify(h)}const g=[];let m=d;for(;m;)g.unshift(m.record),m=m.parent;return{name:p,path:v,params:h,matched:g,meta:ule(g)}}return r.forEach(c=>a(c)),{addRoute:a,resolve:u,removeRoute:o,getRoutes:s,getRecordMatcher:i}}function ole(r,t){const e={};for(const n of t)n in r&&(e[n]=r[n]);return e}function sle(r){return{path:r.path,redirect:r.redirect,name:r.name,meta:r.meta||{},aliasOf:void 0,beforeEnter:r.beforeEnter,props:lle(r),children:r.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in r?r.components||{}:{default:r.component}}}function lle(r){const t={},e=r.props||!1;if("component"in r)t.default=e;else for(const n in r.components)t[n]=typeof e=="boolean"?e:e[n];return t}function JN(r){for(;r;){if(r.record.aliasOf)return!0;r=r.parent}return!1}function ule(r){return r.reduce((t,e)=>ti(t,e.meta),{})}function e3(r,t){const e={};for(const n in r)e[n]=n in t?t[n]:r[n];return e}const t3=/#/g,cle=/&/g,fle=/\//g,dle=/=/g,hle=/\?/g,r3=/\+/g,vle=/%5B/g,ple=/%5D/g,n3=/%5E/g,gle=/%60/g,i3=/%7B/g,mle=/%7C/g,a3=/%7D/g,yle=/%20/g;function V_(r){return encodeURI(""+r).replace(mle,"|").replace(vle,"[").replace(ple,"]")}function ble(r){return V_(r).replace(i3,"{").replace(a3,"}").replace(n3,"^")}function H_(r){return V_(r).replace(r3,"%2B").replace(yle,"+").replace(t3,"%23").replace(cle,"%26").replace(gle,"`").replace(i3,"{").replace(a3,"}").replace(n3,"^")}function xle(r){return H_(r).replace(dle,"%3D")}function wle(r){return V_(r).replace(t3,"%23").replace(hle,"%3F")}function Sle(r){return r==null?"":wle(r).replace(fle,"%2F")}function Ox(r){try{return decodeURIComponent(""+r)}catch{}return""+r}function Cle(r){const t={};if(r===""||r==="?")return t;const n=(r[0]==="?"?r.slice(1):r).split("&");for(let i=0;i<n.length;++i){const a=n[i].replace(r3," "),o=a.indexOf("="),s=Ox(o<0?a:a.slice(0,o)),l=o<0?null:Ox(a.slice(o+1));if(s in t){let u=t[s];Array.isArray(u)||(u=t[s]=[u]),u.push(l)}else t[s]=l}return t}function o3(r){let t="";for(let e in r){const n=r[e];if(e=xle(e),n==null){n!==void 0&&(t+=(t.length?"&":"")+e);continue}(Array.isArray(n)?n.map(a=>a&&H_(a)):[n&&H_(n)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+e,a!=null&&(t+="="+a))})}return t}function Ele(r){const t={};for(const e in r){const n=r[e];n!==void 0&&(t[e]=Array.isArray(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}function am(){let r=[];function t(n){return r.push(n),()=>{const i=r.indexOf(n);i>-1&&r.splice(i,1)}}function e(){r=[]}return{add:t,list:()=>r,reset:e}}function mc(r,t,e,n,i){const a=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((o,s)=>{const l=f=>{f===!1?s(gv(4,{from:e,to:t})):f instanceof Error?s(f):qse(f)?s(gv(2,{from:t,to:f})):(a&&n.enterCallbacks[i]===a&&typeof f=="function"&&a.push(f),o())},u=r.call(n&&n.instances[i],t,e,l);let c=Promise.resolve(u);r.length<3&&(c=c.then(l)),c.catch(f=>s(f))})}function W_(r,t,e,n){const i=[];for(const a of r)for(const o in a.components){let s=a.components[o];if(!(t!=="beforeRouteEnter"&&!a.instances[o]))if(_le(s)){const u=(s.__vccOpts||s)[t];u&&i.push(mc(u,e,n,a,o))}else{let l=s();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${a.path}"`));const c=Pse(u)?u.default:u;a.components[o]=c;const d=(c.__vccOpts||c)[t];return d&&mc(d,e,n,a,o)()}))}}return i}function _le(r){return typeof r=="object"||"displayName"in r||"props"in r||"__vccOpts"in r}function s3(r){const t=or(Dx),e=or(UN),n=re(()=>t.resolve(fa(r.to))),i=re(()=>{const{matched:l}=n.value,{length:u}=l,c=l[u-1],f=e.matched;if(!c||!f.length)return-1;const d=f.findIndex(pv.bind(null,c));if(d>-1)return d;const h=l3(l[u-2]);return u>1&&l3(c)===h&&f[f.length-1].path!==h?f.findIndex(pv.bind(null,l[u-2])):d}),a=re(()=>i.value>-1&&kle(e.params,n.value.params)),o=re(()=>i.value>-1&&i.value===e.matched.length-1&&HN(e.params,n.value.params));function s(l={}){return Mle(l)?t[fa(r.replace)?"replace":"push"](fa(r.to)).catch(rm):Promise.resolve()}return{route:n,href:re(()=>n.value.href),isActive:a,isExactActive:o,navigate:s}}const Tle=xt({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:s3,setup(r,{slots:t}){const e=Gf(s3(r)),{options:n}=or(Dx),i=re(()=>({[u3(r.activeClass,n.linkActiveClass,"router-link-active")]:e.isActive,[u3(r.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const a=t.default&&t.default(e);return r.custom?a:I("a",{"aria-current":e.isExactActive?r.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:i.value},a)}}}),Ale=Tle;function Mle(r){if(!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)&&!r.defaultPrevented&&!(r.button!==void 0&&r.button!==0)){if(r.currentTarget&&r.currentTarget.getAttribute){const t=r.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return r.preventDefault&&r.preventDefault(),!0}}function kle(r,t){for(const e in t){const n=t[e],i=r[e];if(typeof n=="string"){if(n!==i)return!1}else if(!Array.isArray(i)||i.length!==n.length||n.some((a,o)=>a!==i[o]))return!1}return!0}function l3(r){return r?r.aliasOf?r.aliasOf.path:r.path:""}const u3=(r,t,e)=>r!=null?r:t!=null?t:e,Ile=xt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(r,{attrs:t,slots:e}){const n=or($_),i=re(()=>r.route||n.value),a=or(GN,0),o=re(()=>i.value.matched[a]);rn(GN,a+1),rn(Ise,o),rn($_,i);const s=Oe();return fn(()=>[s.value,o.value,r.name],([l,u,c],[f,d,h])=>{u&&(u.instances[c]=l,d&&d!==u&&l&&l===f&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),l&&u&&(!d||!pv(u,d)||!f)&&(u.enterCallbacks[c]||[]).forEach(v=>v(l))},{flush:"post"}),()=>{const l=i.value,u=o.value,c=u&&u.components[r.name],f=r.name;if(!c)return c3(e.default,{Component:c,route:l});const d=u.props[r.name],h=d?d===!0?l.params:typeof d=="function"?d(l):d:null,p=I(c,ti({},h,t,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(u.instances[f]=null)},ref:s}));return c3(e.default,{Component:p,route:l})||p}}});function c3(r,t){if(!r)return null;const e=r(t);return e.length===1?e[0]:e}const Ple=Ile;function xft(r){const t=ale(r.routes,r),e=r.parseQuery||Cle,n=r.stringifyQuery||o3,i=r.history,a=am(),o=am(),s=am(),l=f_(gc);let u=gc;vv&&r.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=z_.bind(null,Y=>""+Y),f=z_.bind(null,Sle),d=z_.bind(null,Ox);function h(Y,fe){let le,ue;return qN(Y)?(le=t.getRecordMatcher(Y),ue=fe):ue=Y,t.addRoute(ue,le)}function v(Y){const fe=t.getRecordMatcher(Y);fe&&t.removeRoute(fe)}function p(){return t.getRoutes().map(Y=>Y.record)}function g(Y){return!!t.getRecordMatcher(Y)}function m(Y,fe){if(fe=ti({},fe||l.value),typeof Y=="string"){const ke=G_(e,Y,fe.path),D=t.resolve({path:ke.path},fe),z=i.createHref(ke.fullPath);return ti(ke,D,{params:d(D.params),hash:Ox(ke.hash),redirectedFrom:void 0,href:z})}let le;if("path"in Y)le=ti({},Y,{path:G_(e,Y.path,fe.path).path});else{const ke=ti({},Y.params);for(const D in ke)ke[D]==null&&delete ke[D];le=ti({},Y,{params:f(Y.params)}),fe.params=f(fe.params)}const ue=t.resolve(le,fe),Ee=Y.hash||"";ue.params=c(d(ue.params));const De=Ose(n,ti({},Y,{hash:ble(Ee),path:ue.path})),je=i.createHref(De);return ti({fullPath:De,hash:Ee,query:n===o3?Ele(Y.query):Y.query||{}},ue,{redirectedFrom:void 0,href:je})}function y(Y){return typeof Y=="string"?G_(e,Y,l.value.path):ti({},Y)}function b(Y,fe){if(u!==Y)return gv(8,{from:fe,to:Y})}function x(Y){return C(Y)}function w(Y){return x(ti(y(Y),{replace:!0}))}function S(Y){const fe=Y.matched[Y.matched.length-1];if(fe&&fe.redirect){const{redirect:le}=fe;let ue=typeof le=="function"?le(Y):le;return typeof ue=="string"&&(ue=ue.includes("?")||ue.includes("#")?ue=y(ue):{path:ue},ue.params={}),ti({query:Y.query,hash:Y.hash,params:Y.params},ue)}}function C(Y,fe){const le=u=m(Y),ue=l.value,Ee=Y.state,De=Y.force,je=Y.replace===!0,ke=S(le);if(ke)return C(ti(y(ke),{state:Ee,force:De,replace:je}),fe||le);const D=le;D.redirectedFrom=fe;let z;return!De&&Lse(n,ue,le)&&(z=gv(16,{to:D,from:ue}),U(ue,ue,!0,!1)),(z?Promise.resolve(z):T(D,ue)).catch(H=>Kf(H)?H:L(H,D,ue)).then(H=>{if(H){if(Kf(H,2))return C(ti(y(H.to),{state:Ee,force:De,replace:je}),fe||D)}else H=M(D,ue,!0,je,Ee);return E(D,ue,H),H})}function _(Y,fe){const le=b(Y,fe);return le?Promise.reject(le):Promise.resolve()}function T(Y,fe){let le;const[ue,Ee,De]=Dle(Y,fe);le=W_(ue.reverse(),"beforeRouteLeave",Y,fe);for(const ke of ue)ke.leaveGuards.forEach(D=>{le.push(mc(D,Y,fe))});const je=_.bind(null,Y,fe);return le.push(je),mv(le).then(()=>{le=[];for(const ke of a.list())le.push(mc(ke,Y,fe));return le.push(je),mv(le)}).then(()=>{le=W_(Ee,"beforeRouteUpdate",Y,fe);for(const ke of Ee)ke.updateGuards.forEach(D=>{le.push(mc(D,Y,fe))});return le.push(je),mv(le)}).then(()=>{le=[];for(const ke of Y.matched)if(ke.beforeEnter&&!fe.matched.includes(ke))if(Array.isArray(ke.beforeEnter))for(const D of ke.beforeEnter)le.push(mc(D,Y,fe));else le.push(mc(ke.beforeEnter,Y,fe));return le.push(je),mv(le)}).then(()=>(Y.matched.forEach(ke=>ke.enterCallbacks={}),le=W_(De,"beforeRouteEnter",Y,fe),le.push(je),mv(le))).then(()=>{le=[];for(const ke of o.list())le.push(mc(ke,Y,fe));return le.push(je),mv(le)}).catch(ke=>Kf(ke,8)?ke:Promise.reject(ke))}function E(Y,fe,le){for(const ue of s.list())ue(Y,fe,le)}function M(Y,fe,le,ue,Ee){const De=b(Y,fe);if(De)return De;const je=fe===gc,ke=vv?history.state:{};le&&(ue||je?i.replace(Y.fullPath,ti({scroll:je&&ke&&ke.scroll},Ee)):i.push(Y.fullPath,Ee)),l.value=Y,U(Y,fe,le,je),B()}let k;function P(){k=i.listen((Y,fe,le)=>{const ue=m(Y),Ee=S(ue);if(Ee){C(ti(Ee,{replace:!0}),ue).catch(rm);return}u=ue;const De=l.value;vv&&Vse(jN(De.fullPath,le.delta),Rx()),T(ue,De).catch(je=>Kf(je,4|8)?je:Kf(je,2)?(C(je.to,ue).then(ke=>{Kf(ke,4|16)&&!le.delta&&le.type===nm.pop&&i.go(-1,!1)}).catch(rm),Promise.reject()):(le.delta&&i.go(-le.delta,!1),L(je,ue,De))).then(je=>{je=je||M(ue,De,!1),je&&(le.delta?i.go(-le.delta,!1):le.type===nm.pop&&Kf(je,4|16)&&i.go(-1,!1)),E(ue,De,je)}).catch(rm)})}let F=am(),$=am(),R;function L(Y,fe,le){B(Y);const ue=$.list();return ue.length?ue.forEach(Ee=>Ee(Y,fe,le)):console.error(Y),Promise.reject(Y)}function O(){return R&&l.value!==gc?Promise.resolve():new Promise((Y,fe)=>{F.add([Y,fe])})}function B(Y){R||(R=!0,P(),F.list().forEach(([fe,le])=>Y?le(Y):fe()),F.reset())}function U(Y,fe,le,ue){const{scrollBehavior:Ee}=r;if(!vv||!Ee)return Promise.resolve();const De=!le&&Hse(jN(Y.fullPath,0))||(ue||!le)&&history.state&&history.state.scroll||null;return Ha().then(()=>Ee(Y,fe,De)).then(je=>je&&Use(je)).catch(je=>L(je,Y,fe))}const W=Y=>i.go(Y);let X;const ae=new Set;return{currentRoute:l,addRoute:h,removeRoute:v,hasRoute:g,getRoutes:p,resolve:m,options:r,push:x,replace:w,go:W,back:()=>W(-1),forward:()=>W(1),beforeEach:a.add,beforeResolve:o.add,afterEach:s.add,onError:$.add,isReady:O,install(Y){const fe=this;Y.component("RouterLink",Ale),Y.component("RouterView",Ple),Y.config.globalProperties.$router=fe,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>fa(l)}),vv&&!X&&l.value===gc&&(X=!0,x(i.location).catch(Ee=>{}));const le={};for(const Ee in gc)le[Ee]=re(()=>l.value[Ee]);Y.provide(Dx,fe),Y.provide(UN,Gf(le)),Y.provide($_,l);const ue=Y.unmount;ae.add(Y),Y.unmount=function(){ae.delete(Y),ae.size<1&&(u=gc,k&&k(),l.value=gc,X=!1,R=!1),ue()}}}}function mv(r){return r.reduce((t,e)=>t.then(()=>e()),Promise.resolve())}function Dle(r,t){const e=[],n=[],i=[],a=Math.max(t.matched.length,r.matched.length);for(let o=0;o<a;o++){const s=t.matched[o];s&&(r.matched.find(u=>pv(u,s))?n.push(s):e.push(s));const l=r.matched[o];l&&(t.matched.find(u=>pv(u,l))||i.push(l))}return[e,n,i]}function wft(){return or(Dx)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var j_=function(r,t){return j_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},j_(r,t)};function Te(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");j_(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var A=function(){return A=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},A.apply(this,arguments)};function Lr(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e}function Rle(r,t,e,n){var i=arguments.length,a=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,t,e,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(a=(i<3?o(a):i>3?o(t,e,a):o(t,e))||a);return i>3&&a&&Object.defineProperty(t,e,a),a}function Ole(r,t){return function(e,n){t(e,n,r)}}function Lle(r,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,t)}function _l(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(r,t||[])).next())})}function Tl(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){e.label=u[1];break}if(u[0]===6&&e.label<a[1]){e.label=a[1],a=u;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(u);break}a[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(r,e)}catch(c){u=[6,c],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Y_=Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]};function Fle(r,t){for(var e in r)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&Y_(t,r,e)}function X_(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f3(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a}function Nle(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(f3(arguments[t]));return r}function $n(){for(var r=0,t=0,e=arguments.length;t<e;t++)r+=arguments[t].length;for(var n=Array(r),i=0,t=0;t<e;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function Jn(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return r.concat(a||Array.prototype.slice.call(t))}function om(r){return this instanceof om?(this.v=r,this):new om(r)}function Ble(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(r,t||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){n[d]&&(i[d]=function(h){return new Promise(function(v,p){a.push([d,h,v,p])>1||s(d,h)})})}function s(d,h){try{l(n[d](h))}catch(v){f(a[0][3],v)}}function l(d){d.value instanceof om?Promise.resolve(d.value.v).then(u,c):f(a[0][2],d)}function u(d){s("next",d)}function c(d){s("throw",d)}function f(d,h){d(h),a.shift(),a.length&&s(a[0][0],a[0][1])}}function $le(r){var t,e;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,a){t[i]=r[i]?function(o){return(e=!e)?{value:om(r[i](o)),done:i==="return"}:a?a(o):o}:a}}function zle(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=r[Symbol.asyncIterator],e;return t?t.call(r):(r=typeof X_=="function"?X_(r):r[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(a){e[a]=r[a]&&function(o){return new Promise(function(s,l){o=r[a](o),i(s,l,o.done,o.value)})}}function i(a,o,s,l){Promise.resolve(l).then(function(u){a({value:u,done:s})},o)}}function Gle(r,t){return Object.defineProperty?Object.defineProperty(r,"raw",{value:t}):r.raw=t,r}var Ule=Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t};function Vle(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&Y_(t,r,e);return Ule(t,r),t}function Hle(r){return r&&r.__esModule?r:{default:r}}function Wle(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)}function jle(r,t,e,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!i:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,e):i?i.value=e:t.set(r,e),e}var Lx=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",__extends:Te,get __assign(){return A},__rest:Lr,__decorate:Rle,__param:Ole,__metadata:Lle,__awaiter:_l,__generator:Tl,__createBinding:Y_,__exportStar:Fle,__values:X_,__read:f3,__spread:Nle,__spreadArrays:$n,__spreadArray:Jn,__await:om,__asyncGenerator:Ble,__asyncDelegator:$le,__asyncValues:zle,__makeTemplateObject:Gle,__importStar:Vle,__importDefault:Hle,__classPrivateFieldGet:Wle,__classPrivateFieldSet:jle}),Po=function(r){return r!==null&&typeof r!="function"&&isFinite(r.length)},Al=function(r,t){return Po(r)?r.indexOf(t)>-1:!1},va=function(r,t){if(!Po(r))return r;for(var e=[],n=0;n<r.length;n++){var i=r[n];t(i,n)&&e.push(i)}return e},d3=function(r,t){return t===void 0&&(t=[]),va(r,function(e){return!Al(t,e)})},Yle={}.toString,_s=function(r,t){return Yle.call(r)==="[object "+t+"]"},Vt=function(r){return _s(r,"Function")},Je=function(r){return r==null},qe=function(r){return Array.isArray?Array.isArray(r):_s(r,"Array")},Kr=function(r){var t=typeof r;return r!==null&&t==="object"||t==="function"};function G(r,t){if(!!r){var e;if(qe(r))for(var n=0,i=r.length;n<i&&(e=t(r[n],n),e!==!1);n++);else if(Kr(r)){for(var a in r)if(r.hasOwnProperty(a)&&(e=t(r[a],a),e===!1))break}}}var Zf=Object.keys?function(r){return Object.keys(r)}:function(r){var t=[];return G(r,function(e,n){Vt(r)&&n==="prototype"||t.push(n)}),t};function q_(r,t){var e=Zf(t),n=e.length;if(Je(r))return!n;for(var i=0;i<n;i+=1){var a=e[i];if(t[a]!==r[a]||!(a in r))return!1}return!0}var Fx=function(r){return typeof r=="object"&&r!==null},Ri=function(r){if(!Fx(r)||!_s(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var t=r;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(r)===t};function Ts(r,t){if(!qe(r))return null;var e;if(Vt(t)&&(e=t),Ri(t)&&(e=function(i){return q_(i,t)}),e){for(var n=0;n<r.length;n+=1)if(e(r[n]))return r[n]}return null}function K_(r,t,e){e===void 0&&(e=0);for(var n=e;n<r.length;n++)if(t(r[n],n))return n;return-1}var h3=function(r,t){for(var e=null,n=0;n<r.length;n++){var i=r[n],a=i[t];if(!Je(a)){qe(a)?e=a[0]:e=a;break}}return e},Do=function(r){if(!qe(r))return[];for(var t=[],e=0;e<r.length;e++)t=t.concat(r[e]);return t},v3=function(r,t){if(t===void 0&&(t=[]),!qe(r))t.push(r);else for(var e=0;e<r.length;e+=1)v3(r[e],t);return t},ji=function(r){if(!!qe(r))return r.reduce(function(t,e){return Math.max(t,e)},r[0])},ia=function(r){if(!!qe(r))return r.reduce(function(t,e){return Math.min(t,e)},r[0])},Z_=function(r){var t=r.filter(function(o){return!isNaN(o)});if(!t.length)return{min:0,max:0};if(qe(r[0])){for(var e=[],n=0;n<r.length;n++)e=e.concat(r[n]);t=e}var i=ji(t),a=ia(t);return{min:a,max:i}},p3=Array.prototype,Xle=p3.splice,qle=p3.indexOf,Kle=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var n=0;n<t.length;n++)for(var i=t[n],a=-1;(a=qle.call(r,i))>-1;)Xle.call(r,a,1);return r},Zle=Array.prototype.splice,g3=function(t,e){if(!Po(t))return[];for(var n=t?e.length:0,i=n-1;n--;){var a=void 0,o=e[n];(n===i||o!==a)&&(a=o,Zle.call(t,o,1))}return t},Wa=function(r,t,e){if(!qe(r)&&!Ri(r))return r;var n=e;return G(r,function(i,a){n=t(n,i,a)}),n},m3=function(r,t){var e=[];if(!Po(r))return e;for(var n=-1,i=[],a=r.length;++n<a;){var o=r[n];t(o,n,r)&&(e.push(o),i.push(n))}return g3(r,i),e},rt=function(r){return _s(r,"String")};function y3(r,t){var e;if(Vt(t))e=function(i,a){return t(i)-t(a)};else{var n=[];rt(t)?n.push(t):qe(t)&&(n=t),e=function(i,a){for(var o=0;o<n.length;o+=1){var s=n[o];if(i[s]>a[s])return 1;if(i[s]<a[s])return-1}return 0}}return r.sort(e),r}function yc(r,t){t===void 0&&(t=new Map);var e=[];if(Array.isArray(r))for(var n=0,i=r.length;n<i;n++){var a=r[n];t.has(a)||(e.push(a),t.set(a,!0))}return e}var Qle=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return yc([].concat.apply([],r))},As=function(r,t){for(var e=[],n={},i=0;i<r.length;i++){var a=r[i],o=a[t];if(!Je(o)){qe(o)||(o=[o]);for(var s=0;s<o.length;s++){var l=o[s];n[l]||(e.push(l),n[l]=!0)}}}return e};function xo(r){if(Po(r))return r[0]}function Yi(r){if(Po(r)){var t=r;return t[t.length-1]}}function Jle(r,t){return qe(r)||rt(r)?r[0]===t:!1}function eue(r,t){return qe(r)||rt(r)?r[r.length-1]===t:!1}var Nx=function(r,t){for(var e=0;e<r.length;e++)if(!t(r[e],e))return!1;return!0},sm=function(r,t){for(var e=0;e<r.length;e++)if(t(r[e],e))return!0;return!1},tue=Object.prototype.hasOwnProperty;function ao(r,t){if(!t||!qe(r))return{};for(var e={},n=Vt(t)?t:function(s){return s[t]},i,a=0;a<r.length;a++){var o=r[a];i=n(o),tue.call(e,i)?e[i].push(o):e[i]=[o]}return e}function Q_(r,t){if(!t)return{0:r};if(!Vt(t)){var e=qe(t)?t:t.replace(/\s+/g,"").split("*");t=function(n){for(var i="_",a=0,o=e.length;a<o;a++)i+=n[e[a]]&&n[e[a]].toString();return i}}return ao(r,t)}var b3=function(r,t){if(!t)return[r];var e=Q_(r,t),n=[];for(var i in e)n.push(e[i]);return n};function rue(r,t){return r["_wrap_"+t]}function yv(r,t){if(r["_wrap_"+t])return r["_wrap_"+t];var e=function(n){r[t](n)};return r["_wrap_"+t]=e,e}var x3={};function nue(r){var t=x3[r];if(!t){for(var e=r.toString(16),n=e.length;n<6;n++)e="0"+e;t="#"+e,x3[r]=t}return t}function iue(r){var t=0,e=0,n=0,i=0;return qe(r)?r.length===1?t=e=n=i=r[0]:r.length===2?(t=n=r[0],e=i=r[1]):r.length===3?(t=r[0],e=i=r[1],n=r[2]):(t=r[0],e=r[1],n=r[2],i=r[3]):t=e=n=i=r,{r1:t,r2:e,r3:n,r4:i}}var Yn=function(r,t,e){return r<t?t:r>e?e:r},Bx=function(r,t){var e=t.toString(),n=e.indexOf(".");if(n===-1)return Math.round(r);var i=e.substr(n+1).length;return i>20&&(i=20),parseFloat(r.toFixed(i))},Rt=function(r){return _s(r,"Number")},aue=function(r){return Rt(r)&&r%1!=0},oue=function(r){return Rt(r)&&r%2==0},sue=Number.isInteger?Number.isInteger:function(r){return Rt(r)&&r%1==0},lue=function(r){return Rt(r)&&r<0},uue=1e-5;function pa(r,t,e){return e===void 0&&(e=uue),Math.abs(r-t)<e}var cue=function(r){return Rt(r)&&r%2!=0},fue=function(r){return Rt(r)&&r>0},J_=function(r,t){if(!!qe(r)){for(var e,n=-1/0,i=0;i<r.length;i++){var a=r[i],o=Vt(t)?t(a):a[t];o>n&&(e=a,n=o)}return e}},w3=function(r,t){if(!!qe(r)){for(var e,n=1/0,i=0;i<r.length;i++){var a=r[i],o=Vt(t)?t(a):a[t];o<n&&(e=a,n=o)}return e}},$x=function(r,t){return(r%t+t)%t},due=180/Math.PI,hue=function(r){return due*r},vue=parseInt,pue=Math.PI/180,zx=function(r){return pue*r},Ml=function(r,t){return r.hasOwnProperty(t)},bv=Object.values?function(r){return Object.values(r)}:function(r){var t=[];return G(r,function(e,n){Vt(r)&&n==="prototype"||t.push(e)}),t},gue=function(r,t){return Al(bv(r),t)},bc=function(r){return Je(r)?"":r.toString()},Qf=function(r){return bc(r).toLowerCase()},mue=function(r){var t=bc(r);return t.charAt(0).toLowerCase()+t.substring(1)};function eT(r,t){return!r||!t?r:r.replace(/\\?\{([^{}]+)\}/g,function(e,n){return e.charAt(0)==="\\"?e.slice(1):t[n]===void 0?"":t[n]})}var yue=function(r){return bc(r).toUpperCase()},rs=function(r){var t=bc(r);return t.charAt(0).toUpperCase()+t.substring(1)},bue={}.toString,S3=function(r){return bue.call(r).replace(/^\[object /,"").replace(/]$/,"")},xue=function(r){return _s(r,"Arguments")},yu=function(r){return _s(r,"Boolean")},tT=function(r){return _s(r,"Date")},wue=function(r){return _s(r,"Error")};function Sue(r){return Rt(r)&&isFinite(r)}var C3=function(r){return r===null},Cue=Object.prototype,E3=function(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||Cue;return r===e},Eue=function(r){return _s(r,"RegExp")},xc=function(r){return r===void 0},rT=function(r){return r instanceof Element||r instanceof HTMLDocument};function _3(r){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)};return t(r)}function T3(r){var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;t(r)}function nT(r,t){for(var e in t)t.hasOwnProperty(e)&&e!=="constructor"&&t[e]!==void 0&&(r[e]=t[e])}function $t(r,t,e,n){return t&&nT(r,t),e&&nT(r,e),n&&nT(r,n),r}var _ue=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var e=r[0],n=1;n<r.length;n++){var i=r[n];Vt(i)&&(i=i.prototype),$t(e.prototype,i)}},Mr=function(r){if(typeof r!="object"||r===null)return r;var t;if(qe(r)){t=[];for(var e=0,n=r.length;e<n;e++)typeof r[e]=="object"&&r[e]!=null?t[e]=Mr(r[e]):t[e]=r[e]}else{t={};for(var i in r)typeof r[i]=="object"&&r[i]!=null?t[i]=Mr(r[i]):t[i]=r[i]}return t};function lm(r,t,e){var n;return function(){var i=this,a=arguments,o=function(){n=null,e||r.apply(i,a)},s=e&&!n;clearTimeout(n),n=setTimeout(o,t),s&&r.apply(i,a)}}var Jf=function(r,t){if(!Vt(r))throw new TypeError("Expected a function");var e=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=t?t.apply(this,n):n[0],o=e.cache;if(o.has(a))return o.get(a);var s=r.apply(this,n);return o.set(a,s),s};return e.cache=new Map,e},Tue=5;function A3(r,t,e,n){e=e||0,n=n||Tue;for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];a!==null&&Ri(a)?(Ri(r[i])||(r[i]={}),e<n?A3(r[i],a,e+1,n):r[i]=t[i]):qe(a)?(r[i]=[],r[i]=r[i].concat(a)):a!==void 0&&(r[i]=a)}}var Mt=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var n=0;n<t.length;n+=1)A3(r,t[n]);return r},Aue=function(r,t,e,n){Vt(t)||(e=t,t=r,r=function(){});var i=Object.create?function(o,s){return Object.create(o,{constructor:{value:s}})}:function(o,s){function l(){}l.prototype=o;var u=new l;return u.constructor=s,u},a=i(t.prototype,r);return r.prototype=$t(a,r.prototype),r.superclass=i(t.prototype,t),$t(a,e),$t(r,n),r},iT=function(r,t){if(!Po(r))return-1;var e=Array.prototype.indexOf;if(e)return e.call(r,t);for(var n=-1,i=0;i<r.length;i++)if(r[i]===t){n=i;break}return n},Mue=Object.prototype.hasOwnProperty;function oo(r){if(Je(r))return!0;if(Po(r))return!r.length;var t=S3(r);if(t==="Map"||t==="Set")return!r.size;if(E3(r))return!Object.keys(r).length;for(var e in r)if(Mue.call(r,e))return!1;return!0}var ri=function(r,t){if(r===t)return!0;if(!r||!t||rt(r)||rt(t))return!1;if(Po(r)||Po(t)){if(r.length!==t.length)return!1;for(var e=!0,n=0;n<r.length&&(e=ri(r[n],t[n]),!!e);n++);return e}if(Fx(r)||Fx(t)){var i=Object.keys(r),a=Object.keys(t);if(i.length!==a.length)return!1;for(var e=!0,n=0;n<i.length&&(e=ri(r[i[n]],t[i[n]]),!!e);n++);return e}return!1},kue=function(r,t,e){return Vt(e)?!!e(r,t):ri(r,t)},Gn=function(r,t){if(!Po(r))return r;for(var e=[],n=0;n<r.length;n++){var i=r[n];e.push(t(i,n))}return e},Iue=function(r){return r},M3=function(r,t){t===void 0&&(t=Iue);var e={};return Kr(r)&&!Je(r)&&Object.keys(r).forEach(function(n){e[n]=t(r[n],n)}),e},ne=function(r,t,e){for(var n=0,i=rt(t)?t.split("."):t;r&&n<i.length;)r=r[i[n++]];return r===void 0||n<i.length?e:r},Xi=function(r,t,e){var n=r,i=rt(t)?t.split("."):t;return i.forEach(function(a,o){o<i.length-1?(Kr(n[a])||(n[a]=Rt(i[o+1])?[]:{}),n=n[a]):n[a]=e}),r},Pue=Object.prototype.hasOwnProperty,Gx=function(r,t){if(r===null||!Ri(r))return{};var e={};return G(t,function(n){Pue.call(r,n)&&(e[n]=r[n])}),e},Ux=function(r,t){return Wa(r,function(e,n,i){return t.includes(i)||(e[i]=n),e},{})},xv=function(r,t,e){var n,i,a,o,s=0;e||(e={});var l=function(){s=e.leading===!1?0:Date.now(),n=null,o=r.apply(i,a),n||(i=a=null)},u=function(){var c=Date.now();!s&&e.leading===!1&&(s=c);var f=t-(c-s);return i=this,a=arguments,f<=0||f>t?(n&&(clearTimeout(n),n=null),s=c,o=r.apply(i,a),n||(i=a=null)):!n&&e.trailing!==!1&&(n=setTimeout(l,f)),o};return u.cancel=function(){clearTimeout(n),s=0,n=i=a=null},u},k3=function(r){return Po(r)?Array.prototype.slice.call(r):[]},Vx={},Ms=function(r){return r=r||"g",Vx[r]?Vx[r]+=1:Vx[r]=1,r+Vx[r]},ns=function(){},Due=function(r){return r};function aa(r){return Je(r)?0:Po(r)?r.length:Object.keys(r).length}var Hx,um=Jf(function(r,t){t===void 0&&(t={});var e=t.fontSize,n=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant;return Hx||(Hx=document.createElement("canvas").getContext("2d")),Hx.font=[a,o,i,e+"px",n].join(" "),Hx.measureText(rt(r)?r:"").width},function(r,t){return t===void 0&&(t={}),$n([r],bv(t)).join("")}),I3=function(r,t,e,n){n===void 0&&(n="...");var i=16,a=um(n,e),o=rt(r)?r:bc(r),s=t,l=[],u,c;if(um(r,e)<=t)return r;for(;u=o.substr(0,i),c=um(u,e),!(c+a>s&&c>s);)if(l.push(u),s-=c,o=o.substr(i),!o)return l.join("");for(;u=o.substr(0,1),c=um(u,e),!(c+a>s);)if(l.push(u),s-=c,o=o.substr(1),!o)return l.join("");return""+l.join("")+n},P3=function(){function r(){this.map={}}return r.prototype.has=function(t){return this.map[t]!==void 0},r.prototype.get=function(t,e){var n=this.map[t];return n===void 0?e:n},r.prototype.set=function(t,e){this.map[t]=e},r.prototype.clear=function(){this.map={}},r.prototype.delete=function(t){delete this.map[t]},r.prototype.size=function(){return Object.keys(this.map).length},r}(),cm=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",contains:Al,includes:Al,difference:d3,find:Ts,findIndex:K_,firstValue:h3,flatten:Do,flattenDeep:v3,getRange:Z_,pull:Kle,pullAt:g3,reduce:Wa,remove:m3,sortBy:y3,union:Qle,uniq:yc,valuesOfKey:As,head:xo,last:Yi,startsWith:Jle,endsWith:eue,filter:va,every:Nx,some:sm,group:b3,groupBy:ao,groupToMap:Q_,getWrapBehavior:rue,wrapBehavior:yv,number2color:nue,parseRadius:iue,clamp:Yn,fixedBase:Bx,isDecimal:aue,isEven:oue,isInteger:sue,isNegative:lue,isNumberEqual:pa,isOdd:cue,isPositive:fue,max:ji,maxBy:J_,min:ia,minBy:w3,mod:$x,toDegree:hue,toInteger:vue,toRadian:zx,forIn:G,has:Ml,hasKey:Ml,hasValue:gue,keys:Zf,isMatch:q_,values:bv,lowerCase:Qf,lowerFirst:mue,substitute:eT,upperCase:yue,upperFirst:rs,getType:S3,isArguments:xue,isArray:qe,isArrayLike:Po,isBoolean:yu,isDate:tT,isError:wue,isFunction:Vt,isFinite:Sue,isNil:Je,isNull:C3,isNumber:Rt,isObject:Kr,isObjectLike:Fx,isPlainObject:Ri,isPrototype:E3,isRegExp:Eue,isString:rt,isType:_s,isUndefined:xc,isElement:rT,requestAnimationFrame:_3,clearAnimationFrame:T3,augment:_ue,clone:Mr,debounce:lm,memoize:Jf,deepMix:Mt,each:G,extend:Aue,indexOf:iT,isEmpty:oo,isEqual:ri,isEqualWith:kue,map:Gn,mapValues:M3,mix:$t,assign:$t,get:ne,set:Xi,pick:Gx,omit:Ux,throttle:xv,toArray:k3,toString:bc,uniqueId:Ms,noop:ns,identity:Due,size:aa,measureTextWidth:um,getEllipsisText:I3,Cache:P3}),Rue={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(t){return Object.assign(this,t),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(t){var e=this,n=this.events;this.graph=t,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&t.get("canvas").set("draggable",!0),G(n,function(i,a){t.on(a,i)}),document.addEventListener("visibilitychange",function(){e.keydown=!1})},unbind:function(t){var e=this.events,n=t.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&t.get("canvas").set("draggable",!1),G(e,function(i,a){t.off(a,i)}),t.get("canvas").set("draggable",n)},get:function(t){return this[t]},set:function(t,e){return this[t]=e,this}},D3=function(){function r(){}return r.registerBehavior=function(t,e){if(!e)throw new Error("please specify handler for this behavior: "+t);var n=Mr(Rue);Object.assign(n,e);var i=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var l=this.getEvents();this.events=null;var u={};l&&(G(l,function(c,f){u[f]=yv(s,c)}),this.events=u)};i.prototype=n,r.types[t]=i},r.hasBehavior=function(t){return!!r.types[t]},r.getBehavior=function(t){return r.types[t]},r.types={},r}(),Oue="*",fm=function(){function r(){this._events={}}return r.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},r.prototype.once=function(t,e){return this.on(t,e,!0),this},r.prototype.emit=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=this._events[t]||[],o=this._events[Oue]||[],s=function(l){for(var u=l.length,c=0;c<u;c++)if(!!l[c]){var f=l[c],d=f.callback,h=f.once;h&&(l.splice(c,1),l.length===0&&delete e._events[t],u--,c--),d.apply(e,n)}};s(a),s(o)},r.prototype.off=function(t,e){if(!t)this._events={};else if(!e)delete this._events[t];else{for(var n=this._events[t]||[],i=n.length,a=0;a<i;a++)n[a].callback===e&&(n.splice(a,1),i--,a--);n.length===0&&delete this._events[t]}return this},r.prototype.getEvents=function(){return this._events},r}(),is=1e-6,ga=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=0,t=arguments.length;t--;)r+=arguments[t]*arguments[t];return Math.sqrt(r)});function wv(){var r=new ga(9);return ga!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function R3(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[4],r[4]=t[5],r[5]=t[6],r[6]=t[8],r[7]=t[9],r[8]=t[10],r}function Lue(r){var t=new ga(9);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function Fue(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r}function Nue(r,t,e,n,i,a,o,s,l){var u=new ga(9);return u[0]=r,u[1]=t,u[2]=e,u[3]=n,u[4]=i,u[5]=a,u[6]=o,u[7]=s,u[8]=l,u}function Bue(r,t,e,n,i,a,o,s,l,u){return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r[4]=a,r[5]=o,r[6]=s,r[7]=l,r[8]=u,r}function $ue(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function zue(r,t){if(r===t){var e=t[1],n=t[2],i=t[5];r[1]=t[3],r[2]=t[6],r[3]=e,r[5]=t[7],r[6]=n,r[7]=i}else r[0]=t[0],r[1]=t[3],r[2]=t[6],r[3]=t[1],r[4]=t[4],r[5]=t[7],r[6]=t[2],r[7]=t[5],r[8]=t[8];return r}function Wx(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=c*o-s*u,d=-c*a+s*l,h=u*a-o*l,v=e*f+n*d+i*h;return v?(v=1/v,r[0]=f*v,r[1]=(-c*n+i*u)*v,r[2]=(s*n-i*o)*v,r[3]=d*v,r[4]=(c*e-i*l)*v,r[5]=(-s*e+i*a)*v,r[6]=h*v,r[7]=(-u*e+n*l)*v,r[8]=(o*e-n*a)*v,r):null}function Gue(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return r[0]=o*c-s*u,r[1]=i*u-n*c,r[2]=n*s-i*o,r[3]=s*l-a*c,r[4]=e*c-i*l,r[5]=i*a-e*s,r[6]=a*u-o*l,r[7]=n*l-e*u,r[8]=e*o-n*a,r}function Uue(r){var t=r[0],e=r[1],n=r[2],i=r[3],a=r[4],o=r[5],s=r[6],l=r[7],u=r[8];return t*(u*a-o*l)+e*(-u*i+o*s)+n*(l*i-a*s)}function Sv(r,t,e){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=e[0],h=e[1],v=e[2],p=e[3],g=e[4],m=e[5],y=e[6],b=e[7],x=e[8];return r[0]=d*n+h*o+v*u,r[1]=d*i+h*s+v*c,r[2]=d*a+h*l+v*f,r[3]=p*n+g*o+m*u,r[4]=p*i+g*s+m*c,r[5]=p*a+g*l+m*f,r[6]=y*n+b*o+x*u,r[7]=y*i+b*s+x*c,r[8]=y*a+b*l+x*f,r}function Vue(r,t,e){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=e[0],h=e[1];return r[0]=n,r[1]=i,r[2]=a,r[3]=o,r[4]=s,r[5]=l,r[6]=d*n+h*o+u,r[7]=d*i+h*s+c,r[8]=d*a+h*l+f,r}function Hue(r,t,e){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=Math.sin(e),h=Math.cos(e);return r[0]=h*n+d*o,r[1]=h*i+d*s,r[2]=h*a+d*l,r[3]=h*o-d*n,r[4]=h*s-d*i,r[5]=h*l-d*a,r[6]=u,r[7]=c,r[8]=f,r}function Wue(r,t,e){var n=e[0],i=e[1];return r[0]=n*t[0],r[1]=n*t[1],r[2]=n*t[2],r[3]=i*t[3],r[4]=i*t[4],r[5]=i*t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r}function O3(r,t){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=t[0],r[7]=t[1],r[8]=1,r}function L3(r,t){var e=Math.sin(t),n=Math.cos(t);return r[0]=n,r[1]=e,r[2]=0,r[3]=-e,r[4]=n,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function F3(r,t){return r[0]=t[0],r[1]=0,r[2]=0,r[3]=0,r[4]=t[1],r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function jue(r,t){return r[0]=t[0],r[1]=t[1],r[2]=0,r[3]=t[2],r[4]=t[3],r[5]=0,r[6]=t[4],r[7]=t[5],r[8]=1,r}function Yue(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=e+e,s=n+n,l=i+i,u=e*o,c=n*o,f=n*s,d=i*o,h=i*s,v=i*l,p=a*o,g=a*s,m=a*l;return r[0]=1-f-v,r[3]=c-m,r[6]=d+g,r[1]=c+m,r[4]=1-u-v,r[7]=h-p,r[2]=d-g,r[5]=h+p,r[8]=1-u-f,r}function N3(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],v=t[12],p=t[13],g=t[14],m=t[15],y=e*s-n*o,b=e*l-i*o,x=e*u-a*o,w=n*l-i*s,S=n*u-a*s,C=i*u-a*l,_=c*p-f*v,T=c*g-d*v,E=c*m-h*v,M=f*g-d*p,k=f*m-h*p,P=d*m-h*g,F=y*P-b*k+x*M+w*E-S*T+C*_;return F?(F=1/F,r[0]=(s*P-l*k+u*M)*F,r[1]=(l*E-o*P-u*T)*F,r[2]=(o*k-s*E+u*_)*F,r[3]=(i*k-n*P-a*M)*F,r[4]=(e*P-i*E+a*T)*F,r[5]=(n*E-e*k-a*_)*F,r[6]=(p*C-g*S+m*w)*F,r[7]=(g*x-v*C-m*b)*F,r[8]=(v*S-p*x+m*y)*F,r):null}function Xue(r,t,e){return r[0]=2/t,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/e,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}function que(r){return"mat3("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+")"}function Kue(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])}function Zue(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r[2]=t[2]+e[2],r[3]=t[3]+e[3],r[4]=t[4]+e[4],r[5]=t[5]+e[5],r[6]=t[6]+e[6],r[7]=t[7]+e[7],r[8]=t[8]+e[8],r}function B3(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],r[3]=t[3]-e[3],r[4]=t[4]-e[4],r[5]=t[5]-e[5],r[6]=t[6]-e[6],r[7]=t[7]-e[7],r[8]=t[8]-e[8],r}function Que(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r[3]=t[3]*e,r[4]=t[4]*e,r[5]=t[5]*e,r[6]=t[6]*e,r[7]=t[7]*e,r[8]=t[8]*e,r}function Jue(r,t,e,n){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r[2]=t[2]+e[2]*n,r[3]=t[3]+e[3]*n,r[4]=t[4]+e[4]*n,r[5]=t[5]+e[5]*n,r[6]=t[6]+e[6]*n,r[7]=t[7]+e[7]*n,r[8]=t[8]+e[8]*n,r}function ece(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]&&r[3]===t[3]&&r[4]===t[4]&&r[5]===t[5]&&r[6]===t[6]&&r[7]===t[7]&&r[8]===t[8]}function tce(r,t){var e=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],l=r[6],u=r[7],c=r[8],f=t[0],d=t[1],h=t[2],v=t[3],p=t[4],g=t[5],m=t[6],y=t[7],b=t[8];return Math.abs(e-f)<=is*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(n-d)<=is*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-h)<=is*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-v)<=is*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(o-p)<=is*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-g)<=is*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-m)<=is*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(u-y)<=is*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-b)<=is*Math.max(1,Math.abs(c),Math.abs(b))}var rce=Sv,nce=B3,ice=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:wv,fromMat4:R3,clone:Lue,copy:Fue,fromValues:Nue,set:Bue,identity:$ue,transpose:zue,invert:Wx,adjoint:Gue,determinant:Uue,multiply:Sv,translate:Vue,rotate:Hue,scale:Wue,fromTranslation:O3,fromRotation:L3,fromScaling:F3,fromMat2d:jue,fromQuat:Yue,normalFromMat4:N3,projection:Xue,str:que,frob:Kue,add:Zue,subtract:B3,multiplyScalar:Que,multiplyScalarAndAdd:Jue,exactEquals:ece,equals:tce,mul:rce,sub:nce});function Ro(){var r=new ga(16);return ga!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function ace(r){var t=new ga(16);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function aT(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function $3(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function jx(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],v=t[12],p=t[13],g=t[14],m=t[15],y=e*s-n*o,b=e*l-i*o,x=e*u-a*o,w=n*l-i*s,S=n*u-a*s,C=i*u-a*l,_=c*p-f*v,T=c*g-d*v,E=c*m-h*v,M=f*g-d*p,k=f*m-h*p,P=d*m-h*g,F=y*P-b*k+x*M+w*E-S*T+C*_;return F?(F=1/F,r[0]=(s*P-l*k+u*M)*F,r[1]=(i*k-n*P-a*M)*F,r[2]=(p*C-g*S+m*w)*F,r[3]=(d*S-f*C-h*w)*F,r[4]=(l*E-o*P-u*T)*F,r[5]=(e*P-i*E+a*T)*F,r[6]=(g*x-v*C-m*b)*F,r[7]=(c*C-d*x+h*b)*F,r[8]=(o*k-s*E+u*_)*F,r[9]=(n*E-e*k-a*_)*F,r[10]=(v*S-p*x+m*y)*F,r[11]=(f*x-c*S-h*y)*F,r[12]=(s*T-o*M-l*_)*F,r[13]=(e*M-n*T+i*_)*F,r[14]=(p*b-v*w-g*y)*F,r[15]=(c*w-f*b+d*y)*F,r):null}function ed(r,t,e){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],h=t[10],v=t[11],p=t[12],g=t[13],m=t[14],y=t[15],b=e[0],x=e[1],w=e[2],S=e[3];return r[0]=b*n+x*s+w*f+S*p,r[1]=b*i+x*l+w*d+S*g,r[2]=b*a+x*u+w*h+S*m,r[3]=b*o+x*c+w*v+S*y,b=e[4],x=e[5],w=e[6],S=e[7],r[4]=b*n+x*s+w*f+S*p,r[5]=b*i+x*l+w*d+S*g,r[6]=b*a+x*u+w*h+S*m,r[7]=b*o+x*c+w*v+S*y,b=e[8],x=e[9],w=e[10],S=e[11],r[8]=b*n+x*s+w*f+S*p,r[9]=b*i+x*l+w*d+S*g,r[10]=b*a+x*u+w*h+S*m,r[11]=b*o+x*c+w*v+S*y,b=e[12],x=e[13],w=e[14],S=e[15],r[12]=b*n+x*s+w*f+S*p,r[13]=b*i+x*l+w*d+S*g,r[14]=b*a+x*u+w*h+S*m,r[15]=b*o+x*c+w*v+S*y,r}function dm(r,t,e){var n=e[0],i=e[1],a=e[2],o,s,l,u,c,f,d,h,v,p,g,m;return t===r?(r[12]=t[0]*n+t[4]*i+t[8]*a+t[12],r[13]=t[1]*n+t[5]*i+t[9]*a+t[13],r[14]=t[2]*n+t[6]*i+t[10]*a+t[14],r[15]=t[3]*n+t[7]*i+t[11]*a+t[15]):(o=t[0],s=t[1],l=t[2],u=t[3],c=t[4],f=t[5],d=t[6],h=t[7],v=t[8],p=t[9],g=t[10],m=t[11],r[0]=o,r[1]=s,r[2]=l,r[3]=u,r[4]=c,r[5]=f,r[6]=d,r[7]=h,r[8]=v,r[9]=p,r[10]=g,r[11]=m,r[12]=o*n+c*i+v*a+t[12],r[13]=s*n+f*i+p*a+t[13],r[14]=l*n+d*i+g*a+t[14],r[15]=u*n+h*i+m*a+t[15]),r}function oce(r,t,e){var n=Math.sin(e),i=Math.cos(e),a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11];return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[4]=a*i+u*n,r[5]=o*i+c*n,r[6]=s*i+f*n,r[7]=l*i+d*n,r[8]=u*i-a*n,r[9]=c*i-o*n,r[10]=f*i-s*n,r[11]=d*i-l*n,r}function sce(r,t,e){var n=Math.sin(e),i=Math.cos(e),a=t[0],o=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],d=t[11];return t!==r&&(r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=a*i-u*n,r[1]=o*i-c*n,r[2]=s*i-f*n,r[3]=l*i-d*n,r[8]=a*n+u*i,r[9]=o*n+c*i,r[10]=s*n+f*i,r[11]=l*n+d*i,r}function hm(r,t){return r[0]=t[12],r[1]=t[13],r[2]=t[14],r}function Cv(r,t){var e=t[0],n=t[1],i=t[2],a=t[4],o=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return r[0]=Math.hypot(e,n,i),r[1]=Math.hypot(a,o,s),r[2]=Math.hypot(l,u,c),r}function vm(r,t){var e=new ga(3);Cv(e,t);var n=1/e[0],i=1/e[1],a=1/e[2],o=t[0]*n,s=t[1]*i,l=t[2]*a,u=t[4]*n,c=t[5]*i,f=t[6]*a,d=t[8]*n,h=t[9]*i,v=t[10]*a,p=o+c+v,g=0;return p>0?(g=Math.sqrt(p+1)*2,r[3]=.25*g,r[0]=(f-h)/g,r[1]=(d-l)/g,r[2]=(s-u)/g):o>c&&o>v?(g=Math.sqrt(1+o-c-v)*2,r[3]=(f-h)/g,r[0]=.25*g,r[1]=(s+u)/g,r[2]=(d+l)/g):c>v?(g=Math.sqrt(1+c-o-v)*2,r[3]=(d-l)/g,r[0]=(s+u)/g,r[1]=.25*g,r[2]=(f+h)/g):(g=Math.sqrt(1+v-o-c)*2,r[3]=(s-u)/g,r[0]=(d+l)/g,r[1]=(f+h)/g,r[2]=.25*g),r}function lce(r,t,e,n){var i=t[0],a=t[1],o=t[2],s=t[3],l=i+i,u=a+a,c=o+o,f=i*l,d=i*u,h=i*c,v=a*u,p=a*c,g=o*c,m=s*l,y=s*u,b=s*c,x=n[0],w=n[1],S=n[2];return r[0]=(1-(v+g))*x,r[1]=(d+b)*x,r[2]=(h-y)*x,r[3]=0,r[4]=(d-b)*w,r[5]=(1-(f+g))*w,r[6]=(p+m)*w,r[7]=0,r[8]=(h+y)*S,r[9]=(p-m)*S,r[10]=(1-(f+v))*S,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function z3(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=e+e,s=n+n,l=i+i,u=e*o,c=n*o,f=n*s,d=i*o,h=i*s,v=i*l,p=a*o,g=a*s,m=a*l;return r[0]=1-f-v,r[1]=c+m,r[2]=d-g,r[3]=0,r[4]=c-m,r[5]=1-u-v,r[6]=h+p,r[7]=0,r[8]=d+g,r[9]=h-p,r[10]=1-u-f,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function uce(r,t,e,n,i){var a=1/Math.tan(t/2),o;return r[0]=a/e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0?(o=1/(n-i),r[10]=(i+n)*o,r[14]=2*i*n*o):(r[10]=-1,r[14]=-2*n),r}var cce=uce;function fce(r,t,e,n,i,a,o){var s=1/(t-e),l=1/(n-i),u=1/(a-o);return r[0]=-2*s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*l,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*u,r[11]=0,r[12]=(t+e)*s,r[13]=(i+n)*l,r[14]=(o+a)*u,r[15]=1,r}var dce=fce;function hce(r,t,e,n){var i,a,o,s,l,u,c,f,d,h,v=t[0],p=t[1],g=t[2],m=n[0],y=n[1],b=n[2],x=e[0],w=e[1],S=e[2];return Math.abs(v-x)<is&&Math.abs(p-w)<is&&Math.abs(g-S)<is?$3(r):(c=v-x,f=p-w,d=g-S,h=1/Math.hypot(c,f,d),c*=h,f*=h,d*=h,i=y*d-b*f,a=b*c-m*d,o=m*f-y*c,h=Math.hypot(i,a,o),h?(h=1/h,i*=h,a*=h,o*=h):(i=0,a=0,o=0),s=f*o-d*a,l=d*i-c*o,u=c*a-f*i,h=Math.hypot(s,l,u),h?(h=1/h,s*=h,l*=h,u*=h):(s=0,l=0,u=0),r[0]=i,r[1]=s,r[2]=c,r[3]=0,r[4]=a,r[5]=l,r[6]=f,r[7]=0,r[8]=o,r[9]=u,r[10]=d,r[11]=0,r[12]=-(i*v+a*p+o*g),r[13]=-(s*v+l*p+u*g),r[14]=-(c*v+f*p+d*g),r[15]=1,r)}function Fn(){var r=new ga(3);return ga!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function bu(r){var t=new ga(3);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function Yx(r){var t=r[0],e=r[1],n=r[2];return Math.hypot(t,e,n)}function Wr(r,t,e){var n=new ga(3);return n[0]=r,n[1]=t,n[2]=e,n}function ja(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r}function Ev(r,t,e,n){return r[0]=t,r[1]=e,r[2]=n,r}function xu(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r[2]=t[2]+e[2],r}function oT(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],r}function vce(r,t,e){return r[0]=t[0]*e[0],r[1]=t[1]*e[1],r[2]=t[2]*e[2],r}function pm(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r}function pce(r,t){var e=t[0]-r[0],n=t[1]-r[1],i=t[2]-r[2];return Math.hypot(e,n,i)}function gm(r,t){var e=t[0],n=t[1],i=t[2],a=e*e+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),r[0]=t[0]*a,r[1]=t[1]*a,r[2]=t[2]*a,r}function Xx(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]}function sT(r,t,e){var n=t[0],i=t[1],a=t[2],o=e[0],s=e[1],l=e[2];return r[0]=i*l-a*s,r[1]=a*o-n*l,r[2]=n*s-i*o,r}function td(r,t,e,n){var i=t[0],a=t[1],o=t[2];return r[0]=i+n*(e[0]-i),r[1]=a+n*(e[1]-a),r[2]=o+n*(e[2]-o),r}function lT(r,t,e){var n=t[0],i=t[1],a=t[2],o=e[3]*n+e[7]*i+e[11]*a+e[15];return o=o||1,r[0]=(e[0]*n+e[4]*i+e[8]*a+e[12])/o,r[1]=(e[1]*n+e[5]*i+e[9]*a+e[13])/o,r[2]=(e[2]*n+e[6]*i+e[10]*a+e[14])/o,r}function kl(r,t,e){var n=t[0],i=t[1],a=t[2];return r[0]=n*e[0]+i*e[3]+a*e[6],r[1]=n*e[1]+i*e[4]+a*e[7],r[2]=n*e[2]+i*e[5]+a*e[8],r}function gce(r,t,e){var n=e[0],i=e[1],a=e[2],o=e[3],s=t[0],l=t[1],u=t[2],c=i*u-a*l,f=a*s-n*u,d=n*l-i*s,h=i*d-a*f,v=a*c-n*d,p=n*f-i*c,g=o*2;return c*=g,f*=g,d*=g,h*=2,v*=2,p*=2,r[0]=s+c+h,r[1]=l+f+v,r[2]=u+d+p,r}var uT=oT,G3=pce,U3=Yx;(function(){var r=Fn();return function(t,e,n,i,a,o){var s,l;for(e||(e=3),n||(n=0),i?l=Math.min(i*e+n,t.length):l=t.length,s=n;s<l;s+=e)r[0]=t[s],r[1]=t[s+1],r[2]=t[s+2],a(r,r,o),t[s]=r[0],t[s+1]=r[1],t[s+2]=r[2];return t}})();function mm(){var r=new ga(4);return ga!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function V3(r,t,e,n){var i=new ga(4);return i[0]=r,i[1]=t,i[2]=e,i[3]=n,i}function mce(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r}function yce(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=e*e+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),r[0]=e*o,r[1]=n*o,r[2]=i*o,r[3]=a*o,r}function ym(r,t,e){var n=t[0],i=t[1],a=t[2],o=t[3];return r[0]=e[0]*n+e[4]*i+e[8]*a+e[12]*o,r[1]=e[1]*n+e[5]*i+e[9]*a+e[13]*o,r[2]=e[2]*n+e[6]*i+e[10]*a+e[14]*o,r[3]=e[3]*n+e[7]*i+e[11]*a+e[15]*o,r}(function(){var r=mm();return function(t,e,n,i,a,o){var s,l;for(e||(e=4),n||(n=0),i?l=Math.min(i*e+n,t.length):l=t.length,s=n;s<l;s+=e)r[0]=t[s],r[1]=t[s+1],r[2]=t[s+2],r[3]=t[s+3],a(r,r,o),t[s]=r[0],t[s+1]=r[1],t[s+2]=r[2],t[s+3]=r[3];return t}})();function ma(){var r=new ga(4);return ga!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function rd(r,t,e){e=e*.5;var n=Math.sin(e);return r[0]=n*t[0],r[1]=n*t[1],r[2]=n*t[2],r[3]=Math.cos(e),r}function ks(r,t,e){var n=t[0],i=t[1],a=t[2],o=t[3],s=e[0],l=e[1],u=e[2],c=e[3];return r[0]=n*c+o*s+i*u-a*l,r[1]=i*c+o*l+a*s-n*u,r[2]=a*c+o*u+n*l-i*s,r[3]=o*c-n*s-i*l-a*u,r}function qx(r,t,e,n){var i=t[0],a=t[1],o=t[2],s=t[3],l=e[0],u=e[1],c=e[2],f=e[3],d,h,v,p,g;return h=i*l+a*u+o*c+s*f,h<0&&(h=-h,l=-l,u=-u,c=-c,f=-f),1-h>is?(d=Math.acos(h),v=Math.sin(d),p=Math.sin((1-n)*d)/v,g=Math.sin(n*d)/v):(p=1-n,g=n),r[0]=p*i+g*l,r[1]=p*a+g*u,r[2]=p*o+g*c,r[3]=p*s+g*f,r}function H3(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=e*e+n*n+i*i+a*a,s=o?1/o:0;return r[0]=-e*s,r[1]=-n*s,r[2]=-i*s,r[3]=a*s,r}function bce(r,t){var e=t[0]+t[4]+t[8],n;if(e>0)n=Math.sqrt(e+1),r[3]=.5*n,n=.5/n,r[0]=(t[5]-t[7])*n,r[1]=(t[6]-t[2])*n,r[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;n=Math.sqrt(t[i*3+i]-t[a*3+a]-t[o*3+o]+1),r[i]=.5*n,n=.5/n,r[3]=(t[a*3+o]-t[o*3+a])*n,r[a]=(t[a*3+i]+t[i*3+a])*n,r[o]=(t[o*3+i]+t[i*3+o])*n}return r}function cT(r,t,e,n){var i=.5*Math.PI/180;t*=i,e*=i,n*=i;var a=Math.sin(t),o=Math.cos(t),s=Math.sin(e),l=Math.cos(e),u=Math.sin(n),c=Math.cos(n);return r[0]=a*l*c-o*s*u,r[1]=o*s*c+a*l*u,r[2]=o*l*u-a*s*c,r[3]=o*l*c+a*s*u,r}var fT=V3,bm=mce,xce=ks,_v=yce;(function(){var r=Fn(),t=Wr(1,0,0),e=Wr(0,1,0);return function(n,i,a){var o=Xx(i,a);return o<-.999999?(sT(r,t,i),U3(r)<1e-6&&sT(r,e,i),gm(r,r),rd(n,r,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(sT(r,i,a),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=1+o,_v(n,n))}})();(function(){var r=ma(),t=ma();return function(e,n,i,a,o,s){return qx(r,n,o,s),qx(t,i,a,s),qx(e,r,t,2*s*(1-s)),e}})();(function(){var r=wv();return function(t,e,n,i){return r[0]=n[0],r[3]=n[1],r[6]=n[2],r[1]=i[0],r[4]=i[1],r[7]=i[2],r[2]=-e[0],r[5]=-e[1],r[8]=-e[2],_v(t,bce(t,r))}})();function wce(){var r=new ga(2);return ga!=Float32Array&&(r[0]=0,r[1]=0),r}function Oi(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r}function W3(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r}function Oa(r,t,e){return r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r}function La(r,t,e){return r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r}function di(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r}function Tv(r,t){var e=t[0]-r[0],n=t[1]-r[1];return Math.hypot(e,n)}function Av(r){var t=r[0],e=r[1];return Math.hypot(t,e)}function wc(r,t){var e=t[0],n=t[1],i=e*e+n*n;return i>0&&(i=1/Math.sqrt(i)),r[0]=t[0]*i,r[1]=t[1]*i,r}function dT(r,t){return r[0]*t[0]+r[1]*t[1]}function Sce(r,t,e){var n=t[0],i=t[1];return r[0]=e[0]*n+e[3]*i+e[6],r[1]=e[1]*n+e[4]*i+e[7],r}function hT(r,t){var e=r[0],n=r[1],i=t[0],a=t[1],o=Math.sqrt(e*e+n*n)*Math.sqrt(i*i+a*a),s=o&&(e*i+n*a)/o;return Math.acos(Math.min(Math.max(s,-1),1))}function j3(r,t){return r[0]===t[0]&&r[1]===t[1]}var nd=W3;(function(){var r=wce();return function(t,e,n,i,a,o){var s,l;for(e||(e=2),n||(n=0),i?l=Math.min(i*e+n,t.length):l=t.length,s=n;s<l;s+=e)r[0]=t[s],r[1]=t[s+1],a(r,r,o),t[s]=r[0],t[s+1]=r[1];return t}})();function Mv(r,t,e){var n=[0,0,0,0,0,0,0,0,0];return O3(n,e),Sv(r,n,t)}function vT(r,t,e){var n=[0,0,0,0,0,0,0,0,0];return L3(n,e),Sv(r,n,t)}function Y3(r,t,e){var n=[0,0,0,0,0,0,0,0,0];return F3(n,e),Sv(r,n,t)}function Cce(r,t,e){return Sv(r,e,t)}function Un(r,t){for(var e=r?[].concat(r):[1,0,0,0,1,0,0,0,1],n=0,i=t.length;n<i;n++){var a=t[n];switch(a[0]){case"t":Mv(e,e,[a[1],a[2]]);break;case"s":Y3(e,e,[a[1],a[2]]);break;case"r":vT(e,e,a[1]);break;case"m":Cce(e,e,a[1]);break}}return e}function Ece(r,t){return r[0]*t[1]-t[0]*r[1]}function pT(r,t,e){var n=hT(r,t),i=Ece(r,t)>=0;return e?i?Math.PI*2-n:n:i?n:Math.PI*2-n}var id=function(t,e){var n=t.nodes,i=t.edges,a=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.source,u=s.target,c=o[l],f=o[u];!c&&c!==0||!f&&f!==0||(a[c][f]=1,e||(a[f][c]=1))}),a},_ce=function(t,e){return t===e},X3=function(){function r(t,e){e===void 0&&(e=null),this.value=t,this.next=e}return r.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},r}(),q3=function(){function r(t){t===void 0&&(t=_ce),this.head=null,this.tail=null,this.compare=t}return r.prototype.prepend=function(t){var e=new X3(t,this.head);return this.head=e,this.tail||(this.tail=e),this},r.prototype.append=function(t){var e=new X3(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},r.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var n=this.head;if(n!==null)for(;n.next;)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},r.prototype.find=function(t){var e=t.value,n=e===void 0?void 0:e,i=t.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||n!==void 0&&this.compare(o.value,n))return o;o=o.next}return null},r.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},r.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},r.prototype.fromArray=function(t){var e=this;return t.forEach(function(n){return e.append(n)}),this},r.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},r.prototype.reverse=function(){for(var t=this.head,e=null,n=null;t;)n=t.next,t.next=e,e=t,t=n;this.tail=this.head,this.head=e},r.prototype.toString=function(t){return t===void 0&&(t=void 0),this.toArray().map(function(e){return e.toString(t)}).toString()},r}(),Tce=function(){function r(){this.linkedList=new q3}return r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},r.prototype.enqueue=function(t){this.linkedList.append(t)},r.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},r.prototype.toString=function(t){return this.linkedList.toString(t)},r}(),as=function(t,e,n){e===void 0&&(e=[]);var i=e.filter(function(l){return l.source===t||l.target===t});if(n==="target"){var a=function(u){return u.source===t};return i.filter(a).map(function(l){return l.target})}if(n==="source"){var o=function(u){return u.target===t};return i.filter(o).map(function(l){return l.source})}var s=function(u){return u.source===t?u.target:u.source};return i.map(s)},Ace=function(t,e){return e.filter(function(n){return n.source===t})},Kx=function(t,e){return e.filter(function(n){return n.source===t||n.target===t})},K3=function(t){t===void 0&&(t=0);var e="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(t,"-").concat(e).concat(n)};function Mce(r){r===void 0&&(r={});var t=r,e=function(){},n=function(){var i={};return function(a){var o=a.next,s=o;return i[s]?!1:(i[s]=!0,!0)}}();return t.allowTraversal=r.allowTraversal||n,t.enter=r.enter||e,t.leave=r.leave||e,t}var Z3=function(t,e,n,i){i===void 0&&(i=!0);var a=Mce(n),o=new Tce,s=t.edges,l=s===void 0?[]:s;o.enqueue(e);for(var u="",c=function(){var d=o.dequeue();a.enter({current:d,previous:u}),as(d,l,i?"target":void 0).forEach(function(h){a.allowTraversal({previous:u,current:d,next:h})&&o.enqueue(h)}),a.leave({current:d,previous:u}),u=d};!o.isEmpty();)c()},kce=function(t){for(var e=t.nodes,n=e===void 0?[]:e,i=t.edges,a=i===void 0?[]:i,o=[],s={},l=[],u=function h(v){l.push(v),s[v.id]=!0;for(var p=as(v.id,a),g=function(b){var x=p[b];if(!s[x]){var w=n.filter(function(S){return S.id===x});w.length>0&&h(w[0])}},m=0;m<p.length;++m)g(m)},c=0;c<n.length;c++){var f=n[c];if(!s[f.id]){u(f);for(var d=[];l.length>0;)d.push(l.pop());o.push(d)}}return o},Q3=function(t){for(var e=t.nodes,n=e===void 0?[]:e,i=t.edges,a=i===void 0?[]:i,o=[],s={},l={},u={},c=[],f=0,d=function g(m){l[m.id]=f,u[m.id]=f,f+=1,o.push(m),s[m.id]=!0;for(var y=as(m.id,a,"target").filter(function(C){return n.map(function(_){return _.id}).indexOf(C)>-1}),b=function(_){var T=y[_];if(!l[T]&&l[T]!==0){var E=n.filter(function(M){return M.id===T});E.length>0&&g(E[0]),u[m.id]=Math.min(u[m.id],u[T])}else s[T]&&(u[m.id]=Math.min(u[m.id],l[T]))},x=0;x<y.length;x++)b(x);if(u[m.id]===l[m.id]){for(var w=[];o.length>0;){var S=o.pop();if(s[S.id]=!1,w.push(S),S===m)break}w.length>0&&c.push(w)}},h=0,v=n;h<v.length;h++){var p=v[h];!l[p.id]&&l[p.id]!==0&&d(p)}return c};function gT(r,t){return t?Q3(r):kce(r)}var Sc=function(t){var e={},n=t.nodes,i=n===void 0?[]:n,a=t.edges,o=a===void 0?[]:a;return i.forEach(function(s){e[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){e[s.source].degree++,e[s.source].outDegree++,e[s.target].degree++,e[s.target].inDegree++}),e},J3=function(t,e){var n=Sc(t);return n[e]?Sc(t)[e].inDegree:0},eB=function(t,e){var n=Sc(t);return n[e]?Sc(t)[e].outDegree:0};function Ice(r){r===void 0&&(r={});var t=r,e=function(){},n=function(){var i={};return function(a){var o=a.next;return i[o]?!1:(i[o]=!0,!0)}}();return t.allowTraversal=r.allowTraversal||n,t.enter=r.enter||e,t.leave=r.leave||e,t}function tB(r,t,e,n){n.enter({current:t,previous:e});var i=r.edges,a=i===void 0?[]:i;as(t,a,"target").forEach(function(o){n.allowTraversal({previous:e,current:t,next:o})&&tB(r,o,t,n)}),n.leave({current:t,previous:e})}function mT(r,t,e){tB(r,t,"",Ice(e))}var yT=function(t){var e=null,n=t.nodes,i=n===void 0?[]:n,a={},o={},s={},l={};i.forEach(function(f){o[f.id]=f});for(var u={enter:function(d){var h=d.current,v=d.previous;if(s[h]){e={};for(var p=h,g=v;g!==h;)e[p]=g,p=g,g=a[g];e[p]=g}else s[h]=h,delete o[h],a[h]=v},leave:function(d){var h=d.current;l[h]=h,delete s[h]},allowTraversal:function(d){var h=d.next;return e?!1:!l[h]}};Object.keys(o).length;){var c=Object.keys(o)[0];mT(t,c,u)}return e},bT=function(t,e,n){var i,a;n===void 0&&(n=!0);for(var o=[],s=gT(t,!1),l=0,u=s;l<u.length;l++){var c=u[l];if(!!c.length)for(var f=c[0],d=f.id,h=[f],v=(i={},i[d]=f,i),p=(a={},a[d]=new Set,a);h.length>0;)for(var g=h.pop(),m=g.id,y=as(m,t.edges),b=function(S){var C,_=y[S],T=t.nodes.find(function($){return $.id===_});if(_===m)o.push((C={},C[_]=g,C));else if(!(_ in p))v[_]=g,h.push(T),p[_]=new Set([g]);else if(!p[m].has(T)){for(var E=!0,M=[T,g],k=v[m];p[_].size&&!p[_].has(k)&&(M.push(k),k!==v[k.id]);)k=v[k.id];if(M.push(k),e&&n?(E=!1,M.findIndex(function($){return e.indexOf($.id)>-1})>-1&&(E=!0)):e&&!n&&M.findIndex(function($){return e.indexOf($.id)>-1})>-1&&(E=!1),E){for(var P={},F=1;F<M.length;F+=1)P[M[F-1].id]=M[F];M.length&&(P[M[M.length-1].id]=M[0]),o.push(P)}p[_].add(g)}},x=0;x<y.length;x+=1)b(x)}return o},xT=function(t,e,n){n===void 0&&(n=!0);for(var i=[],a=new Set,o=[],s=[],l={},u={},c=function(k){for(var P=[k];P.length>0;){var F=P.pop();a.has(F)&&(a.delete(F),o[F.id].forEach(function($){P.push($)}),o[F.id].clear())}},f=function M(k,P,F){var $=!1;if(e&&n===!1&&e.indexOf(k.id)>-1)return $;i.push(k),a.add(k);for(var R=F[k.id],L=0;L<R.length;L+=1){var O=l[R[L]];if(O===P){for(var B={},U=1;U<i.length;U+=1)B[i[U-1].id]=i[U];i.length&&(B[i[i.length-1].id]=i[0]),s.push(B),$=!0}else a.has(O)||M(O,P,F)&&($=!0)}if($)c(k);else for(var L=0;L<R.length;L+=1){var O=l[R[L]];o[O.id].has(k)||o[O.id].add(k)}return i.pop(),$},d=t.nodes,h=d===void 0?[]:d,v=0;v<h.length;v+=1){var p=h[v],g=p.id;u[g]=v,l[v]=p}if(e&&n)for(var m=function(k){var P=e[k];u[h[k].id]=u[P],u[P]=0,l[0]=h.find(function(F){return F.id===P}),l[u[h[k].id]]=h[k]},v=0;v<e.length;v++)m(v);for(var y=function(k){for(var P,F,$=1/0,R=0;R<k.length;R+=1)for(var L=k[R],O=0;O<L.length;O++){var B=u[L[O].id];B<$&&($=B,F=R)}for(var U=k[F],W=[],R=0;R<U.length;R+=1){var X=U[R];W[X.id]=[];for(var ae=0,Z=as(X.id,t.edges,"target").filter(function(le){return U.map(function(ue){return ue.id}).indexOf(le)>-1});ae<Z.length;ae++){var Y=Z[ae];Y===X.id&&!(n===!1&&e.indexOf(X.id)>-1)?s.push((P={},P[X.id]=X,P)):W[X.id].push(u[Y])}}return{component:U,adjList:W,minIdx:$}},b=0;b<h.length;){var x=h.filter(function(M){return u[M.id]>=b}),w=Q3({nodes:x,edges:t.edges}).filter(function(M){return M.length>1});if(w.length===0)break;var S=y(w),C=S.minIdx,_=S.adjList,T=S.component;if(T.length>1){T.forEach(function(M){o[M.id]=new Set});var E=l[C];if(e&&n&&e.indexOf(E.id)===-1)return s;f(E,E,_),b=C+1}else break}return s},rB=function(t,e,n,i){return i===void 0&&(i=!0),e?xT(t,n,i):bT(t,n,i)},Pce=function(t,e,n){for(var i=1/0,a,o=0;o<e.length;o++){var s=e[o].id;!n[s]&&t[s]<=i&&(i=t[s],a=e[o])}return a},xm=function(t,e,n,i){var a=t.nodes,o=a===void 0?[]:a,s=t.edges,l=s===void 0?[]:s,u={},c={},f={};o.forEach(function(y,b){var x=y.id;c[x]=1/0,x===e&&(c[x]=0)});for(var d=o.length,h=function(b){var x=Pce(c,o,u),w=x.id;if(u[w]=!0,c[w]===1/0)return"continue";var S=[];n?S=Ace(w,l):S=Kx(w,l),S.forEach(function(C){var _=C.target,T=C.source,E=_===w?T:_,M=i&&C[i]?C[i]:1;c[E]>c[x.id]+M?(c[E]=c[x.id]+M,f[E]=[x.id]):c[E]===c[x.id]+M&&f[E].push(x.id)})},v=0;v<d;v++)h();f[e]=[e];var p={};for(var g in c)c[g]!==1/0&&nB(e,g,f,p);var m={};for(var g in p)m[g]=p[g][0];return{length:c,path:m,allPath:p}};function nB(r,t,e,n){if(r===t)return[r];if(n[t])return n[t];for(var i=[],a=0,o=e[t];a<o.length;a++){var s=o[a],l=nB(r,s,e,n);if(!l)return;for(var u=0,c=l;u<c.length;u++){var f=c[u];qe(f)?i.push(Jn(Jn([],f,!0),[t],!1)):i.push([f,t])}}return n[t]=i,n[t]}var iB=function(t,e,n,i,a){var o=xm(t,e,i,a),s=o.length,l=o.path,u=o.allPath;return{length:s[n],path:l[n],allPath:u[n]}},aB=function(t,e,n,i){var a;if(e===n)return[[e]];var o=t.edges,s=o===void 0?[]:o,l=[e],u=(a={},a[e]=!0,a),c=[],f=[],d=i?as(e,s,"target"):as(e,s);for(c.push(d);l.length>0&&c.length>0;){var h=c[c.length-1];if(h.length){var v=h.shift();v&&(l.push(v),u[v]=!0,d=i?as(v,s,"target"):as(v,s),c.push(d.filter(function(m){return!u[m]})))}else{var p=l.pop();u[p]=!1,c.pop();continue}if(l[l.length-1]===n){var g=l.map(function(y){return y});f.push(g);var p=l.pop();u[p]=!1,c.pop()}}return f},wm=function(t,e){for(var n=id(t,e),i=[],a=n.length,o=0;o<a;o+=1){i[o]=[];for(var s=0;s<a;s+=1)o===s?i[o][s]=0:n[o][s]===0||!n[o][s]?i[o][s]=1/0:i[o][s]=n[o][s]}for(var l=0;l<a;l+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)i[o][s]>i[o][l]+i[l][s]&&(i[o][s]=i[o][l]+i[l][s]);return i},oB=function(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e3);var a=t.nodes,o=a===void 0?[]:a,s=t.edges,l=s===void 0?[]:s,u={},c={};o.forEach(function(b,x){var w=K3();b.clusterId=w,u[w]={id:w,nodes:[b]},c[b.id]={node:b,idx:x}});var f=id(t,e),d={};f.forEach(function(b,x){var w=o[x].id;d[w]={},b.forEach(function(S,C){if(!!S){var _=o[C].id;d[w][_]=S}})});for(var h=0,v=function(){var x=!1;if(o.forEach(function(w){var S={};Object.keys(d[w.id]).forEach(function(F){var $=d[w.id][F],R=c[F].node,L=R.clusterId;S[L]||(S[L]=0),S[L]+=$});var C=-1/0,_=[];if(Object.keys(S).forEach(function(F){C<S[F]?(C=S[F],_=[F]):C===S[F]&&_.push(F)}),!(_.length===1&&_[0]===w.clusterId)){var T=_.indexOf(w.clusterId);if(T>=0&&_.splice(T,1),_&&_.length){x=!0;var E=u[w.clusterId],M=E.nodes.indexOf(w);E.nodes.splice(M,1);var k=Math.floor(Math.random()*_.length),P=u[_[k]];P.nodes.push(w),w.clusterId=P.id}}}),!x)return"break";h++};h<i;){var p=v();if(p==="break")break}Object.keys(u).forEach(function(b){var x=u[b];(!x.nodes||!x.nodes.length)&&delete u[b]});var g=[],m={};l.forEach(function(b){var x=b.source,w=b.target,S=b[n]||1,C=c[x].node.clusterId,_=c[w].node.clusterId,T="".concat(C,"---").concat(_);if(m[T])m[T].weight+=S,m[T].count++;else{var E={source:C,target:_,weight:S,count:1};m[T]=E,g.push(E)}});var y=[];return Object.keys(u).forEach(function(b){y.push(u[b])}),{clusters:y,clusterEdges:g}},Sm=function(){function r(t){this.arr=t}return r.prototype.add=function(t){var e,n=t.arr;if(!((e=this.arr)===null||e===void 0?void 0:e.length))return new r(n);if(!(n==null?void 0:n.length))return new r(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]+n[a];return new r(i)}},r.prototype.subtract=function(t){var e,n=t.arr;if(!((e=this.arr)===null||e===void 0?void 0:e.length))return new r(n);if(!(n==null?void 0:n.length))return new r(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]-n[a];return new r(i)}},r.prototype.avg=function(t){var e=[];for(var n in this.arr)e[n]=this.arr[n]/t;return new r(e)},r.prototype.negate=function(){var t=[];for(var e in this.arr)t[e]=-this.arr[e];return new r(t)},r.prototype.squareEuclideanDistance=function(t){var e,n=t.arr;if(!((e=this.arr)===null||e===void 0?void 0:e.length)||!(n==null?void 0:n.length))return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-t.arr[a],2);return i}},r.prototype.normalize=function(){var t=[],e=Mr(this.arr);e.sort(function(o,s){return o-s});var n=e[e.length-1],i=e[0];for(var a in this.arr)t[a]=(this.arr[a]-i)/(n-i);return new r(t)},r}(),sB=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,lB=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,uB=function(t,e,n,i){for(var a=e.length,o=2*i,s=0,l=0;l<a;l++)for(var u=t[l].clusterId,c=0;c<a;c++){var f=t[c].clusterId;if(u===f){var d=e[l][c]||0,h=n[l]||0,v=n[c]||0;s+=d-h*v/o}}return s*=1/o,s},Dce=function(t){t===void 0&&(t=[]);var e={};t.forEach(function(i){Object.keys(i.properties).forEach(function(a){if(!"".concat(i.properties[a]).match(sB)&&!"".concat(i.properties[a]).match(lB)&&isNaN(Number(i.properties[a]))||a==="id"){e.hasOwnProperty(a)&&delete e[a];return}e.hasOwnProperty(a)?e[a]+=1:e[a]=1})});var n=Object.keys(e).sort(function(i,a){return e[a]-e[i]});return n.length<100?n:n.slice(0,100)},Rce=function(t,e){return e.map(function(n){if(t.hasOwnProperty(n)){if(!isNaN(Number(t[n])))return Number(t[n]);if(t[n].match(sB)||t[n].match(lB))return Number(Date.parse(new Date(t[n])))/1e3}return 0})},Oce=function(t,e){for(var n=[],i=0;i<e.length;i++)n[i]=Rce(e[i].properties,t);return n},wT=function(t,e){t===void 0&&(t=[]);for(var n=t.length,i=new Sm([]),a=0;a<n;a++)i=i.add(new Sm(e[a]));var o=i.avg(n);o.normalize();for(var s=0,a=0;a<n;a++){var l=new Sm(e[a]),u=l.squareEuclideanDistance(o);s+=u}var c=[];t.forEach(function(){c.push([])});for(var a=0;a<n;a++){var l=new Sm(e[a]);t[a].clusterInertial=0;for(var f=0;f<n;f++){if(a===f){c[a][f]=0;continue}var d=new Sm(e[f]);c[a][f]=l.squareEuclideanDistance(d),t[a].clusterInertial+=c[a][f]}}for(var h=0,v=2*n*s,a=0;a<n;a++)for(var p=t[a].clusterId,f=0;f<n;f++){var g=t[f].clusterId;if(!(a===f||p!==g)){var m=t[a].clusterInertial*t[f].clusterInertial/Math.pow(v,2)-c[a][f]/v;h+=m}}return Number(h.toFixed(4))},cB=function(t,e,n,i,a,o){e===void 0&&(e=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e-4),a===void 0&&(a=!1),o===void 0&&(o=1);var s=t.nodes,l=s===void 0?[]:s,u=t.edges,c=u===void 0?[]:u,f=[];if(a){l.forEach(function(R,L){R.properties=R.properties||{},R.originIndex=L});var d=[];l.every(function(R){return R.hasOwnProperty("nodeType")})&&(d=Array.from(new Set(l.map(function(R){return R.nodeType}))),l.forEach(function(R){R.properties.nodeType=d.findIndex(function(L){return L===R.nodeType})}));var h=Dce(l);f=Oce(h,l)}var v=1,p={},g={};l.forEach(function(R,L){var O=String(v++);R.clusterId=O,p[O]={id:O,nodes:[R]},g[R.id]={node:R,idx:L}});var m=id(t,e),y=[],b={},x=0;m.forEach(function(R,L){var O=0,B=l[L].id;b[B]={},R.forEach(function(U,W){if(!!U){O+=U;var X=l[W].id;b[B][X]=U,x+=U}}),y.push(O)}),x/=2;for(var w=1/0,S=1/0,C=0,_=[],T={};;){a&&l.every(function(R){return R.hasOwnProperty("properties")})?w=uB(l,m,y,x)+wT(l,f)*o:w=uB(l,m,y,x),C===0&&(S=w,_=l,T=p);var E=w>0&&w>S&&w-S<i;if(w>S&&(_=l.map(function(R){return{node:R,clusterId:R.clusterId}}),T=Mr(p),S=w),E||C>100)break;C++,Object.keys(p).forEach(function(R){var L=0;c.forEach(function(O){var B=O.source,U=O.target,W=g[B].node.clusterId,X=g[U].node.clusterId;(W===R&&X!==R||X===R&&W!==R)&&(L=L+(O[n]||1))}),p[R].sumTot=L}),l.forEach(function(R,L){var O=p[R.clusterId],B=0,U,W=y[L]/(2*x),X=0,ae=O.nodes;ae.forEach(function(D){var z=g[D.id].idx;X+=m[L][z]||0});var Z=X-O.sumTot*W,Y=ae.filter(function(D){return D.id!==R.id}),fe=[];Y.forEach(function(D,z){fe[z]=f[D.originIndex]});var le=wT(Y,f)*o,ue=b[R.id];if(Object.keys(ue).forEach(function(D){var z=g[D].node,H=z.clusterId;if(H!==R.clusterId){var he=p[H],te=he.nodes;if(!(!te||!te.length)){var ge=0;te.forEach(function(j){var q=g[j.id].idx;ge+=m[L][q]||0});var Qe=ge-he.sumTot*W,Ve=te.concat([R]),Ie=[];Ve.forEach(function(j,q){Ie[q]=f[j.originIndex]});var Be=wT(Ve,f)*o,V=Qe-Z;a&&(V=Qe+Be-(Z+le)),V>B&&(B=V,U=he)}}}),B>0){U.nodes.push(R);var Ee=R.clusterId;R.clusterId=U.id;var De=O.nodes.indexOf(R);O.nodes.splice(De,1);var je=0,ke=0;c.forEach(function(D){var z=D.source,H=D.target,he=g[z].node.clusterId,te=g[H].node.clusterId;(he===U.id&&te!==U.id||te===U.id&&he!==U.id)&&(je=je+(D[n]||1)),(he===Ee&&te!==Ee||te===Ee&&he!==Ee)&&(ke=ke+(D[n]||1))}),U.sumTot=je,O.sumTot=ke}})}var M={},k=0;Object.keys(T).forEach(function(R){var L=T[R];if(!L.nodes||!L.nodes.length){delete T[R];return}var O=String(k+1);O!==R&&(L.id=O,L.nodes=L.nodes.map(function(B){return{id:B.id,clusterId:O}}),T[O]=L,M[R]=O,delete T[R],k++)}),_.forEach(function(R){var L=R.node,O=R.clusterId;L.clusterId=O,L.clusterId&&M[L.clusterId]&&(L.clusterId=M[L.clusterId])});var P=[],F={};c.forEach(function(R){var L=R.source,O=R.target,B=R[n]||1,U=g[L].node.clusterId,W=g[O].node.clusterId,X="".concat(U,"---").concat(W);if(F[X])F[X].weight+=B,F[X].count++;else{var ae={source:U,target:W,weight:B,count:1};F[X]=ae,P.push(ae)}});var $=[];return Object.keys(T).forEach(function(R){$.push(T[R])}),{clusters:$,clusterEdges:P}},Lce=function(){function r(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var i=n[e];this.parent[i]=i}}return r.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},r.prototype.union=function(t,e){var n=this.find(t),i=this.find(e);n!==i&&(n<i?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},r.prototype.connected=function(t,e){return this.find(t)===this.find(e)},r}(),Fce=function(t,e){return t-e},Nce=function(){function r(t){t===void 0&&(t=Fce),this.compareFn=t,this.list=[]}return r.prototype.getLeft=function(t){return 2*t+1},r.prototype.getRight=function(t){return 2*t+2},r.prototype.getParent=function(t){return t===0?null:Math.floor((t-1)/2)},r.prototype.isEmpty=function(){return this.list.length<=0},r.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},r.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},r.prototype.insert=function(t){if(t!==null){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},r.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},r.prototype.moveDown=function(t){var e,n=t,i=this.getLeft(t),a=this.getRight(t),o=this.list.length;i!==null&&i<o&&this.compareFn(this.list[n],this.list[i])>0?n=i:a!==null&&a<o&&this.compareFn(this.list[n],this.list[a])>0&&(n=a),t!==n&&(e=[this.list[n],this.list[t]],this.list[t]=e[0],this.list[n]=e[1],this.moveDown(n))},r}(),Bce=function(t,e){var n=[],i=t.nodes,a=i===void 0?[]:i,o=t.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=a[0],u=new Set;u.add(l);var c=function(g,m){return e?g.weight-m.weight:0},f=new Nce(c);for(Kx(l.id,s).forEach(function(p){f.insert(p)});!f.isEmpty();){var d=f.delMin(),h=d.source,v=d.target;u.has(h)&&u.has(v)||(n.push(d),u.has(h)||(u.add(h),Kx(h,s).forEach(function(p){f.insert(p)})),u.has(v)||(u.add(v),Kx(v,s).forEach(function(p){f.insert(p)})))}return n},fB=function(t,e){var n=[],i=t.nodes,a=i===void 0?[]:i,o=t.edges,s=o===void 0?[]:o;if(a.length===0)return n;var l=s.map(function(h){return h});e&&l.sort(function(h,v){return h.weight-v.weight});for(var u=new Lce(a.map(function(h){return h.id}));l.length>0;){var c=l.shift(),f=c.source,d=c.target;u.connected(f,d)||(n.push(c),u.union(f,d))}return n},dB=function(t,e,n){var i={prim:Bce,kruskal:fB};return n?i[n](t,e):fB(t,e)},hB=function(t,e,n){typeof e!="number"&&(e=1e-6),typeof n!="number"&&(n=.85);for(var i=1,a=0,o=1e3,s=t.nodes,l=s===void 0?[]:s,u=t.edges,c=u===void 0?[]:u,f=l.length,d,h={},v={},p=0;p<f;++p){var g=l[p],m=g.id;h[m]=1/f,v[m]=1/f}for(var y=Sc(t);o>0&&i>e;){a=0;for(var p=0;p<f;++p){var g=l[p],m=g.id;if(d=0,y[g.id].inDegree===0)h[m]=0;else{for(var b=as(m,c,"source"),x=0;x<b.length;++x){var w=b[x],S=y[w].outDegree;S>0&&(d+=v[w]/S)}h[m]=n*d,a+=h[m]}}a=(1-a)/f,i=0;for(var p=0;p<f;++p){var g=l[p],m=g.id;d=h[m]+a,i+=Math.abs(d-v[m]),v[m]=d}o-=1}return v},$ce=-1,Zx=-1,vB="-1",Il="-1",pB=-1,gB=function(){function r(t,e,n,i){t===void 0&&(t=$ce),e===void 0&&(e=Zx),n===void 0&&(n=Zx),i===void 0&&(i=vB),this.id=t,this.from=e,this.to=n,this.label=i}return r}(),zce=function(){function r(t,e){t===void 0&&(t=Zx),e===void 0&&(e=Il),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return r.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},r}(),mB=function(){function r(t,e,n){t===void 0&&(t=Zx),e===void 0&&(e=!0),n===void 0&&(n=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return r.prototype.getNodeNum=function(){return this.nodes.length},r.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var n=new zce(t,e);this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},r.prototype.addEdge=function(t,e,n,i){if((this.edgeIdAutoIncrease||t===void 0)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[t])){var a=new gB(t,e,n,i);if(this.edges.push(a),this.edgeMap[t]=a,this.nodeMap[e].addEdge(a),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(a),!this.directed){var o=new gB(t,n,e,i);this.nodeMap[n].addEdge(o),this.edgeLabelMap[i].push(o)}}},r}(),ad=function(){function r(t,e,n,i,a){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||Il,edgeLabel:i||vB,nodeLabel2:a||Il}}return r.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},r.prototype.notEqualTo=function(t){return!this.equalTo(t)},r}(),yB=function(){function r(){this.rmpath=[],this.dfsEdgeList=[]}return r.prototype.equalTo=function(t){var e=this.dfsEdgeList.length,n=t.length;if(e!==n)return!1;for(var i=0;i<e;i++)if(this.dfsEdgeList[i]!==t[i])return!1;return!0},r.prototype.notEqualTo=function(t){return!this.equalTo(t)},r.prototype.pushBack=function(t,e,n,i,a){return this.dfsEdgeList.push(new ad(t,e,n,i,a)),this.dfsEdgeList},r.prototype.toGraph=function(t,e){t===void 0&&(t=pB),e===void 0&&(e=!1);var n=new mB(t,!0,e);return this.dfsEdgeList.forEach(function(i){var a=i.fromNode,o=i.toNode,s=i.nodeEdgeNodeLabel,l=s.nodeLabel1,u=s.edgeLabel,c=s.nodeLabel2;l!==Il&&n.addNode(a,l),c!==Il&&n.addNode(o,c),l!==Il&&c!==l&&n.addEdge(void 0,a,o,u)}),n},r.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length,n=e-1;n>=0;n--){var i=this.dfsEdgeList[n],a=i.fromNode,o=i.toNode;a<o&&(t===void 0||o===t)&&(this.rmpath.push(n),t=a)}return this.rmpath},r.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach(function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)}),Object.keys(t).length},r}(),Qx=function(){function r(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return r.prototype.hasNode=function(t){return this.nodesUsed[t.id]===1},r.prototype.hasEdge=function(t){return this.edgesUsed[t.id]===1},r}(),Gce=function(){function r(t){var e=t.graphs,n=t.minSupport,i=n===void 0?2:n,a=t.minNodeNum,o=a===void 0?1:a,s=t.maxNodeNum,l=s===void 0?4:s,u=t.top,c=u===void 0?10:u,f=t.directed,d=f===void 0?!1:f,h=t.verbose,v=h===void 0?!1:h;this.graphs=e,this.dfsCode=new yB,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=c,this.directed=d,this.counter=0,this.maxNodeNum=l,this.minNodeNum=o,this.verbose=v,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return r.prototype.findForwardRootEdges=function(t,e){var n=this,i=[],a=t.nodeMap;return e.edges.forEach(function(o){(n.directed||e.label<=a[o.to].label)&&i.push(o)}),i},r.prototype.findBackwardEdge=function(t,e,n,i){if(!this.directed&&e===n)return null;for(var a=t.nodeMap,o=a[n.to],s=o.edges,l=s.length,u=0;u<l;u++){var c=s[u];if(!(i.hasEdge(c)||c.to!==e.from)){if(this.directed){if(a[e.from].label<a[n.to].label||a[e.from].label===a[n.to].label&&e.label<=c.label)return c}else if(e.label<c.label||e.label===c.label&&a[e.to].label<=a[n.to].label)return c}}return null},r.prototype.findForwardPureEdges=function(t,e,n,i){for(var a=[],o=e.to,s=t.nodeMap[o].edges,l=s.length,u=0;u<l;u++){var c=s[u],f=t.nodeMap[c.to];n<=f.label&&!i.hasNode(f)&&a.push(c)}return a},r.prototype.findForwardRmpathEdges=function(t,e,n,i){for(var a=[],o=t.nodeMap,s=o[e.to].label,l=o[e.from],u=l.edges,c=u.length,f=0;f<c;f++){var d=u[f],h=o[d.to].label;e.to===d.to||n>h||i.hasNode(o[d.to])||(e.label<d.label||e.label===d.label&&s<=h)&&a.push(d)}return a},r.prototype.getSupport=function(t){var e={};return t.forEach(function(n){e[n.graphId]||(e[n.graphId]=!0)}),Object.keys(e).length},r.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach(function(n){var i=t[n],a=i.nodeLabel1,o=i.edgeLabel,s=i.nodeLabel2;if(!e){e={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<e.nodeLabel1||a===e.nodeLabel1&&o<e.edgeLabel||a===e.nodeLabel1&&o===e.edgeLabel&&s<e.nodeLabel2)&&(e={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),e},r.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),e.dfsEdgeList.length===1)return!0;var n=this.directed,i=e.toGraph(pB,n),a=i.nodeMap,o=new yB,s={};i.nodes.forEach(function(f){var d=t.findForwardRootEdges(i,f);d.forEach(function(h){var v=a[h.to],p="".concat(f.label,"-").concat(h.label,"-").concat(v.label);s[p]||(s[p]={projected:[],nodeLabel1:f.label,edgeLabel:h.label,nodeLabel2:v.label});var g={graphId:i.id,edge:h,preNode:null};s[p].projected.push(g)})});var l=this.findMinLabel(s);if(!!l){o.dfsEdgeList.push(new ad(0,1,l.nodeLabel1,l.edgeLabel,l.nodeLabel2));var u=function f(d){for(var h=o.buildRmpath(),v=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,p=o.dfsEdgeList[h[0]].toNode,g={},m=!1,y=0,b=n?-1:0,x=function(L){if(m)return"break";d.forEach(function(O){var B=new Qx(O),U=t.findBackwardEdge(i,B.edges[h[L]],B.edges[h[0]],B);U&&(g[U.label]||(g[U.label]={projected:[],edgeLabel:U.label}),g[U.label].projected.push({graphId:i.id,edge:g,preNode:O}),y=o.dfsEdgeList[h[L]].fromNode,m=!0)})},w=h.length-1;w>b;w--){var S=x(w);if(S==="break")break}if(m){var C=t.findMinLabel(g);o.dfsEdgeList.push(new ad(p,y,Il,C.edgeLabel,Il));var _=o.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[_]!==o.dfsEdgeList[_]?!1:f(g[C.edgeLabel].projected)}var T={};m=!1;var E=0;d.forEach(function(R){var L=new Qx(R),O=t.findForwardPureEdges(i,L.edges[h[0]],v,L);O.length>0&&(m=!0,E=p,O.forEach(function(B){var U="".concat(B.label,"-").concat(a[B.to].label);T[U]||(T[U]={projected:[],edgeLabel:B.label,nodeLabel2:a[B.to].label}),T[U].projected.push({graphId:i.id,edge:B,preNode:R})}))});for(var M=h.length,k=function(L){if(m)return"break";var O=h[L];d.forEach(function(B){var U=new Qx(B),W=t.findForwardRmpathEdges(i,U.edges[O],v,U);W.length>0&&(m=!0,E=o.dfsEdgeList[O].fromNode,W.forEach(function(X){var ae="".concat(X.label,"-").concat(a[X.to].label);T[ae]||(T[ae]={projected:[],edgeLabel:X.label,nodeLabel2:a[X.to].label}),T[ae].projected.push({graphId:i.id,edge:X,preNode:B})}))})},w=0;w<M;w++){var P=k(w);if(P==="break")break}if(!m)return!0;var F=t.findMinLabel(T);o.dfsEdgeList.push(new ad(E,p+1,Il,F.edgeLabel,F.nodeLabel2));var $=o.dfsEdgeList.length-1;return e.dfsEdgeList[$]!==o.dfsEdgeList[$]?!1:f(T["".concat(F.edgeLabel,"-").concat(F.nodeLabel2)].projected)},c="".concat(l.nodeLabel1,"-").concat(l.edgeLabel,"-").concat(l.nodeLabel2);return u(s[c].projected)}},r.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(Mr(t))}},r.prototype.subGraphMining=function(t){var e=this,n=this.getSupport(t);if(!(n<this.minSupport)&&!!this.isMin()){this.report();var i=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l={},u={};t.forEach(function(c){for(var f=e.graphs[c.graphId],d=f.nodeMap,h=new Qx(c),v=a.length-1;v>=0;v--){var p=e.findBackwardEdge(f,h.edges[a[v]],h.edges[a[0]],h);if(p){var g="".concat(e.dfsCode.dfsEdgeList[a[v]].fromNode,"-").concat(p.label);u[g]||(u[g]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[a[v]].fromNode,edgeLabel:p.label}),u[g].projected.push({graphId:c.graphId,edge:p,preNode:c})}}if(!(i>=e.maxNodeNum)){var m=e.findForwardPureEdges(f,h.edges[a[0]],s,h);m.forEach(function(b){var x="".concat(o,"-").concat(b.label,"-").concat(d[b.to].label);l[x]||(l[x]={projected:[],fromNodeId:o,edgeLabel:b.label,nodeLabel2:d[b.to].label}),l[x].projected.push({graphId:c.graphId,edge:b,preNode:c})});for(var y=function(x){var w=e.findForwardRmpathEdges(f,h.edges[a[x]],s,h);w.forEach(function(S){var C="".concat(e.dfsCode.dfsEdgeList[a[x]].fromNode,"-").concat(S.label,"-").concat(d[S.to].label);l[C]||(l[C]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[a[x]].fromNode,edgeLabel:S.label,nodeLabel2:d[S.to].label}),l[C].projected.push({graphId:c.graphId,edge:S,preNode:c})})},v=0;v<a.length;v++)y(v)}}),Object.keys(u).forEach(function(c){var f=u[c],d=f.toNodeId,h=f.edgeLabel;e.dfsCode.dfsEdgeList.push(new ad(o,d,"-1",h,"-1")),e.subGraphMining(u[c].projected),e.dfsCode.dfsEdgeList.pop()}),Object.keys(l).forEach(function(c){var f=l[c],d=f.fromNodeId,h=f.edgeLabel,v=f.nodeLabel2;e.dfsCode.dfsEdgeList.push(new ad(d,o+1,Il,h,v)),e.subGraphMining(l[c].projected),e.dfsCode.dfsEdgeList.pop()})}},r.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,i=this.frequentSize1Subgraphs,a={},o={},s={},l={};return Object.keys(t).forEach(function(u){var c=t[u],f=c.nodeMap;c.nodes.forEach(function(d,h){var v=d.label,p="".concat(u,"-").concat(v);if(!s[p]){var g=a[v]||0;g++,a[v]=g}s[p]={graphKey:u,label:v},d.edges.forEach(function(m){var y=v,b=f[m.to].label;if(!e&&y>b){var x=b;b=y,y=x}var w=m.label,S="".concat(u,"-").concat(y,"-").concat(w,"-").concat(b),C="".concat(y,"-").concat(w,"-").concat(b);if(!o[C]){var _=o[C]||0;_++,o[C]=_}l[S]={graphId:u,nodeLabel1:y,edgeLabel:w,nodeLabel2:b}})})}),Object.keys(a).forEach(function(u){var c=a[u];if(!(c<n)){var f={nodes:[],edges:[]};f.nodes.push({id:"0",label:u}),i.push(f)}}),i},r.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs;this.directed;var n={};Object.keys(e).forEach(function(i){var a=e[i],o=a.nodeMap;a.nodes.forEach(function(s){var l=t.findForwardRootEdges(a,s);l.forEach(function(u){var c=o[u.to],f="".concat(s.label,"-").concat(u.label,"-").concat(c.label);n[f]||(n[f]={projected:[],nodeLabel1:s.label,edgeLabel:u.label,nodeLabel2:c.label});var d={graphId:i,edge:u,preNode:null};n[f].projected.push(d)})})}),Object.keys(n).forEach(function(i){var a=n[i],o=a.projected,s=a.nodeLabel1,l=a.edgeLabel,u=a.nodeLabel2;t.dfsCode.dfsEdgeList.push(new ad(0,1,s,l,u)),t.subGraphMining(o),t.dfsCode.dfsEdgeList.pop()})}},r}(),Uce=function(t,e,n,i){var a={};return Object.keys(t).forEach(function(o,s){var l=t[o],u=new mB(s,!0,e),c={};l.nodes.forEach(function(f,d){u.addNode(d,f[n]),c[f.id]=d}),l.edges.forEach(function(f,d){var h=c[f.source],v=c[f.target];u.addEdge(-1,h,v,f[i])}),u&&u.getNodeNum()&&(a[u.id]=u)}),a},Vce=function(t,e,n){var i=[];return t.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var l;o.nodes.push((l={id:"".concat(s.id)},l[e]=s.label,l))}),a.edges.forEach(function(s){var l;o.edges.push((l={source:"".concat(s.from),target:"".concat(s.to)},l[n]=s.label,l))}),i.push(o)}),i},bB="cluster",Hce=function(t){var e=t.graphs,n=t.directed,i=n===void 0?!1:n,a=t.nodeLabelProp,o=a===void 0?bB:a,s=t.edgeLabelProp,l=s===void 0?bB:s,u=Uce(e,i,o,l),c=t.minSupport,f=t.maxNodeNum,d=t.minNodeNum,h=t.verbose,v=t.top,p={graphs:u,minSupport:c,maxNodeNum:f,minNodeNum:d,top:v,verbose:h,directed:i},g=new Gce(p);g.run();var m=Vce(g.frequentSubgraphs,o,l);return m},xB=function(t,e,n,i){n===void 0&&(n="cluster"),i===void 0&&(i=2);var a=[],o=t.nodes;return e.forEach(function(s,l){a.push(wB(o,s,l,n,i))}),a},wB=function(t,e,n,i,a){var o=[n],s=[],l={};return e.forEach(function(u,c){if(u<=a&&n!==c){o.push(c),s.push(t[c]);var f=t[c][i];l[f]?(l[f].count++,l[f].dists.push(u)):l[f]={count:1,dists:[u]}}}),Object.keys(l).forEach(function(u){l[u].dists=l[u].dists.sort(function(c,f){return c-f})}),{nodeIdx:n,nodeId:t[n].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:l}},Wce=function(t,e,n,i,a){var o=Math.ceil(n/e),s={},l=0;return i.forEach(function(u,c){for(var f=0,d=0,h=u.nodeIdxs,v=u.neighborNum-1;f<o;){for(var p=h[1+Math.floor(Math.random()*v)],g=0;(s["".concat(c,"-").concat(p)]||s["".concat(p,"-").concat(c)])&&(p=Math.floor(Math.random()*e),g++,!(g>2*e)););if(g<2*e&&(s["".concat(c,"-").concat(p)]={start:c,end:p,distance:a[c][p]},f++,l++,l>=n))return s;if(d++,d>2*e)break}if(f<o){var m=o-f;o=(o+m)/(e-c-1)}}),s},Jx=function(t,e,n,i){var a=n.nodes;return i||(i={}),Object.keys(t).forEach(function(o){var s,l;if(!(i&&i[o])){i[o]={nodes:[],edges:[]};var u=t[o],c=(s=e[u.start])===null||s===void 0?void 0:s.nodeIdxs,f=(l=e[u.end])===null||l===void 0?void 0:l.nodeIdxs;if(!(!c||!f)){var d=new Set(f),h=c.filter(function(y){return d.has(y)});if(!(!h||!h.length)){for(var v={},p=h.length,g=0;g<p;g++){var m=a[h[g]];i[o].nodes.push(m),v[m.id]=!0}n.edges.forEach(function(y){v[y.source]&&v[y.target]&&i[o].edges.push(y)})}}}}),i},e1=function(t,e,n,i){var a,o,s={};t.nodes.forEach(function(u){s[u.id]=u});var l=0;return!((a=e==null?void 0:e.edges)===null||a===void 0?void 0:a.length)||((o=e==null?void 0:e.nodes)===null||o===void 0?void 0:o.length)<2?0:(t.edges.forEach(function(u){var c=s[u.source][n],f=s[u.target][n],d=e==null?void 0:e.nodes[0][n],h=e==null?void 0:e.nodes[1][n],v=e==null?void 0:e.edges[0][i];u[i]===v&&(c===d&&f===h||c===h&&f===d)&&l++}),l)},jce=function(t,e,n){for(var i=1/0,a=0,o=function(u){var c=t[u],f=Object.keys(c).sort(function(y,b){return c[y]-c[b]}),d=10,h=[];f.forEach(function(y,b){h[b%d]||(h[b%d]={graphs:[],totalCount:0,aveCount:0}),h[b%d].graphs.push(y),h[b%d].totalCount+=c[y]});var v=0,p=[];h.forEach(function(y){var b=y.totalCount/y.graphs.length;y.aveCount=b,p.push(b);var x=0,w=y.length;y.graphs.forEach(function(S,C){var _=c[S];y.graphs.forEach(function(T,E){C!==E&&(x+=Math.abs(_-c[T]))})}),x/=w*(w-1)/2,v+=x}),v/=h.length;var g=0;p.forEach(function(y,b){p.forEach(function(x,w){b!==w&&(g+=Math.abs(y-x))}),g/=p.length*(p.length-1)/2});var m=g-v;i<m&&(i=m,a=u)},s=0;s<e;s++)o(s);return{structure:n[a],structureCountMap:t[a]}},SB=function(t,e){var n={},i={};return t.forEach(function(a,o){n[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[e];i[s]||(i[s]=[]),i[s].push(a)}),{nodeMap:n,nodeLabelMap:i}},CB=function(t,e,n){var i={},a={};return t.forEach(function(o,s){i["".concat(K3)]={idx:s,edge:o};var l=o[e];a[l]||(a[l]=[]),a[l].push(o);var u=n[o.source];u&&(u.degree++,u.outDegree++);var c=n[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:i,edgeLabelMap:a}},EB=function(t,e,n){var i=e.length,a={};return e.forEach(function(o,s){for(var l=n?0:s+1,u=t[s].id,c=l;c<i;c++)if(s!==c){var f=t[c].id,d=o[c];a["".concat(u,"-").concat(f)]=d,n||(a["".concat(f,"-").concat(u)]=d)}}),a},Yce=function(t,e,n,i,a,o,s,l,u,c,f){var d,h="".concat(e.id,"-").concat(n.id);if(c&&c[h])return c[h];var v=f?f[h]:void 0;if(!v){var p=(d={},d[h]={start:i[e.id].idx,end:i[n.id].idx,distance:a},d);f=Jx(p,o,t,f),v=f[h]}return e1(v,s,l,u)},_B=function(t,e,n,i){var a,o,s,l=(a=t[e])===null||a===void 0?void 0:a.degree,u=(o=t[e])===null||o===void 0?void 0:o.inDegree,c=(s=t[e])===null||s===void 0?void 0:s.outDegree;return t[e]===void 0&&(l=1/0,u=1/0,c=1/0,i[e].forEach(function(f){var d=n[f.id].degree;l>d&&(l=d);var h=n[f.id].inDegree;u>h&&(u=h);var v=n[f.id].outDegree;c>v&&(c=v)}),t[e]={degree:l,inDegree:u,outDegree:c}),{minPatternNodeLabelDegree:l,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:c}},TB=function(t,e,n,i,a,o,s){var l;if(n===void 0&&(n=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!t||!t.nodes)){var u=t.nodes.length;if(!!u){var c=wm(t,n),f=wm(e,n),d=EB(t.nodes,c,n),h=EB(e.nodes,f,n),v=SB(t.nodes,o),p=v.nodeMap,g=v.nodeLabelMap,m=SB(e.nodes,o),y=m.nodeMap,b=m.nodeLabelMap;CB(t.edges,s,p);var x=CB(e.edges,s,y).edgeLabelMap,w=[];f==null||f.forEach(function(Ie){w=w.concat(Ie)}),a||(a=Math.max.apply(Math,Jn(Jn([],w,!1),[2],!1))),i||(i=a);var S=xB(t,c,o,i),C=xB(e,f,o,i),_=Math.min(100,u*(u-1)/2),T=Wce(i,u,_,C,c),E=Jx(T,S,t),M=10,k=1,P=1,F=4,$={graphs:E,nodeLabelProp:o,edgeLabelProp:s,minSupport:k,minNodeNum:P,maxNodeNum:F,directed:n},R=Hce($).slice(0,M),L=R.length,O=[];R.forEach(function(Ie,Be){O[Be]={},Object.keys(E).forEach(function(V){var j=E[V],q=e1(j,Ie,o,s);O[Be][V]=q})});var B=jce(O,L,R),U=B.structure,W=B.structureCountMap,X=e.nodes[0],ae=[],Z=(l=e.nodes[0])===null||l===void 0?void 0:l[o],Y=-1/0;e.nodes.forEach(function(Ie){var Be=Ie[o],V=g[Be];(V==null?void 0:V.length)>Y&&(Y=V.length,ae=V,Z=Be,X=Ie)});var fe={},le={},ue={},Ee={},De={},je={};Object.keys(b).forEach(function(Ie,Be){De[Ie]=[],n&&(je[Ie]=[]);var V=b[Ie],j={};V.forEach(function(He){var ze=h["".concat(X.id,"-").concat(He.id)];if(ze&&De[Ie].push(ze),j["".concat(X.id,"-").concat(He.id)]={start:0,end:y[He.id].idx,distance:ze},n){var it=h["".concat(He.id,"-").concat(X.id)];it&&je[Ie].push(it)}}),De[Ie]=De[Ie].sort(function(He,ze){return He-ze}),n&&(je[Ie]=je[Ie].sort(function(He,ze){return He-ze})),le=Jx(j,C,e,le);var q=[];if(Object.keys(j).forEach(function(He){if(ue[He]){q.push(ue[He]);return}var ze=le[He];ue[He]=e1(ze,U,o,s),q.push(ue[He])}),q=q.sort(function(He,ze){return ze-He}),Ee["".concat(X.id,"-").concat(Ie)]=q,Ie!==Z)for(var ee=(ae==null?void 0:ae.length)||0,Q=function(ze){var it=ae[ze],we=S[p[it.id].idx],nt=we.nodeLabelCountMap[Ie],st=b[Ie].length;if(!nt||nt.count<st)return ae.splice(ze,1),"continue";for(var jt=!1,Jt=0;Jt<st;Jt++)if(nt.dists[Jt]>De[Ie][Jt]){jt=!0;break}if(jt)return ae.splice(ze,1),"continue";var Ae={};we.neighbors.forEach(function(Le){var dt=d["".concat(it.id,"-").concat(Le.id)];Ae["".concat(it.id,"-").concat(Le.id)]={start:p[it.id].idx,end:p[Le.id].idx,distance:dt}}),E=Jx(Ae,S,t,E);var ut=[];Object.keys(Ae).forEach(function(Le){if(W[Le]){ut.push(W[Le]);return}var dt=E[Le];W[Le]=e1(dt,U,o,s),ut.push(W[Le])}),ut=ut.sort(function(Le,dt){return dt-Le});for(var ur=!1,Jt=0;Jt<st;Jt++)if(ut[Jt]<q[Jt]){ur=!0;break}if(ur)return ae.splice(ze,1),"continue"},me=ee-1;me>=0;me--)Q(me)});var ke=[];ae==null||ae.forEach(function(Ie){for(var Be=p[Ie.id].idx,V=wB(t.nodes,c[Be],Be,o,a),j=V.neighbors,q=j.length,ee=!1,Q=q-1;Q>=0;Q--){if(j.length+1<e.nodes.length){ee=!0;return}var me=j[Q],He=me[o];if(!b[He]||!b[He].length){j.splice(Q,1);continue}if(!De[He]||!De[He].length){j.splice(Q,1);continue}var ze="".concat(Ie.id,"-").concat(me.id),it=d[ze],we=De[He].length-1,nt=De[He][we];if(it>nt){j.splice(Q,1);continue}if(n){var st="".concat(me.id,"-").concat(Ie.id),jt=d[st];we=je[He].length-1;var Jt=je[He][we];if(jt>Jt){j.splice(Q,1);continue}}var Ae=W[ze]?W[ze]:Yce(t,Ie,me,p,it,S,U,o,s,W,E),ut="".concat(X.id,"-").concat(He),ur=Ee[ut][Ee[ut].length-1];if(Ae<ur){j.splice(Q,1);continue}var Le=_B(fe,He,y,b),dt=Le.minPatternNodeLabelDegree;if(Le.minPatternNodeLabelInDegree,Le.minPatternNodeLabelOutDegree,p[me.id].degree<dt){j.splice(Q,1);continue}}ee||ke.push({nodes:[Ie].concat(j)})});var D=xm(e,X.id,!1).length,z={};n?(Object.keys(D).forEach(function(Ie){var Be=y[Ie].node[o];z[Be]?z[Be].push(D[Ie]):z[Be]=[D[Ie]]}),Object.keys(z).forEach(function(Ie){z[Ie].sort(function(Be,V){return Be-V})})):z=De;for(var H=ke.length,he=function(Be){var V=ke[Be],j=V.nodes[0],q={},ee={};V.nodes.forEach(function(Br,on){ee[Br.id]={idx:on,node:Br,degree:0,inDegree:0,outDegree:0};var mr=Br[o];q[mr]?q[mr]++:q[mr]=1});var Q=[],me={};t.edges.forEach(function(Br){ee[Br.source]&&ee[Br.target]&&(Q.push(Br),me[Br[s]]?me[Br[s]]++:me[Br[s]]=1,ee[Br.source].degree++,ee[Br.target].degree++,ee[Br.source].outDegree++,ee[Br.target].inDegree++)});for(var He=Object.keys(x).length,ze=!1,it=0;it<He;it++){var we=Object.keys(x)[it];if(!me[we]||me[we]<x[we].length){ze=!0;break}}if(ze)return ke.splice(Be,1),"continue";var nt=Q.length;if(nt<e.edges.length)return ke.splice(Be,1),"break";for(var st=!1,jt=function(on){var mr=Q[on],ln=mr[s],fi=x[ln];if(!fi||!fi.length)return me[ln]--,fi&&me[ln]<fi.length?(st=!0,"break"):(Q.splice(on,1),ee[mr.source].degree--,ee[mr.target].degree--,ee[mr.source].outDegree--,ee[mr.target].inDegree--,"continue");var po=ee[mr.source].node[o],Ua=ee[mr.target].node[o],ys=!1;if(fi.forEach(function(hl){var vl=y[hl.source].node,pl=y[hl.target].node;vl[o]===po&&pl[o]===Ua&&(ys=!0),!n&&vl[o]===Ua&&pl[o]===po&&(ys=!0)}),!ys)return me[ln]--,fi&&me[ln]<fi.length?(st=!0,"break"):(Q.splice(on,1),ee[mr.source].degree--,ee[mr.target].degree--,ee[mr.source].outDegree--,ee[mr.target].inDegree--,"continue")},it=nt-1;it>=0;it--){var Jt=jt(it);if(Jt==="break")break}if(st)return ke.splice(Be,1),"continue";V.edges=Q;var Ae=xm(V,V.nodes[0].id,!1).length;if(Object.keys(Ae).reverse().forEach(function(Br){if(!(Br===V.nodes[0].id||st)){if(Ae[Br]===1/0){var on=ee[Br].node[o];if(q[on]--,q[on]<b[on].length){st=!0;return}var mr=V.nodes.indexOf(ee[Br].node);V.nodes.splice(mr,1),ee[Br]=void 0;return}var ln=p[Br].node[o];if(!z[ln]||!z[ln].length||Ae[Br]>z[ln][z[ln].length-1]){var on=ee[Br].node[o];if(q[on]--,q[on]<b[on].length){st=!0;return}var mr=V.nodes.indexOf(ee[Br].node);V.nodes.splice(mr,1),ee[Br]=void 0}}}),st)return ke.splice(Be,1),"continue";for(var ut=!0,ur=0;ut&&!st;){ut=!1;var Le=n?ee[j.id].degree<y[X.id].degree||ee[j.id].inDegree<y[X.id].inDegree||ee[j.id].outDegree<y[X.id].outDegree:ee[j.id].degree<y[X.id].degree;if(Le){st=!0;break}if(q[j[o]]<b[j[o]].length){st=!0;break}for(var dt=V.nodes.length,Bt=dt-1;Bt>=0;Bt--){var cr=V.nodes[Bt],$r=ee[cr.id].degree,nr=ee[cr.id].inDegree,tn=ee[cr.id].outDegree,Er=cr[o],zr=_B(fe,Er,y,b),Qr=zr.minPatternNodeLabelDegree,_n=zr.minPatternNodeLabelInDegree,jn=zr.minPatternNodeLabelOutDegree,ii=n?$r<Qr||nr<_n||tn<jn:$r<Qr;if(ii){if(q[cr[o]]--,q[cr[o]]<b[cr[o]].length){st=!0;break}V.nodes.splice(Bt,1),ee[cr.id]=void 0,ut=!0}}if(st||!ut&&ur!==0)break;nt=Q.length;for(var bn=nt-1;bn>=0;bn--){var ai=Q[bn];if(!ee[ai.source]||!ee[ai.target]){Q.splice(bn,1);var Zn=ai[s];if(me[Zn]--,ee[ai.source]&&(ee[ai.source].degree--,ee[ai.source].outDegree--),ee[ai.target]&&(ee[ai.target].degree--,ee[ai.target].inDegree--),x[Zn]&&me[Zn]<x[Zn].length){st=!0;break}ut=!0}}ur++}if(st||st||V.nodes.length<e.nodes.length||Q.length<e.edges.length)return ke.splice(Be,1),"continue"},te=H-1;te>=0;te--){var ge=he(te);if(ge==="break")break}for(var Qe=ke.length,Ve=function(Be){var V=ke[Be],j={};V.edges.forEach(function(Q){var me="".concat(Q.source,"-").concat(Q.target,"-").concat(Q.label);j[me]?j[me]++:j[me]=1});for(var q=function(me){var He=ke[me],ze={};He.edges.forEach(function(we){var nt="".concat(we.source,"-").concat(we.target,"-").concat(we.label);ze[nt]?ze[nt]++:ze[nt]=1});var it=!0;Object.keys(ze).length!==Object.keys(j).length?it=!1:Object.keys(j).forEach(function(we){ze[we]!==j[we]&&(it=!1)}),it&&ke.splice(me,1)},ee=Qe-1;ee>Be;ee--)q(ee);Qe=ke.length},te=0;te<=Qe-1;te++)Ve(te);return ke}}},t1=function(){function r(t){t===void 0&&(t=10),this.linkedList=new q3,this.maxStep=t}return Object.defineProperty(r.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},r.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},r.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},r.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},r.prototype.toArray=function(){return this.linkedList.toArray().map(function(t){return t.value})},r.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},r}(),AB=yT,Xce={getAdjMatrix:id,breadthFirstSearch:Z3,connectedComponent:gT,getDegree:Sc,getInDegree:J3,getOutDegree:eB,detectCycle:yT,detectDirectedCycle:AB,detectAllCycles:rB,detectAllDirectedCycle:xT,detectAllUndirectedCycle:bT,depthFirstSearch:mT,dijkstra:xm,findAllPath:aB,findShortestPath:iB,floydWarshall:wm,labelPropagation:oB,louvain:cB,minimumSpanningTree:dB,pageRank:hB,getNeighbors:as,Stack:t1,GADDI:TB},qce=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getAdjMatrix:id,breadthFirstSearch:Z3,connectedComponent:gT,getDegree:Sc,getInDegree:J3,getOutDegree:eB,detectCycle:yT,detectDirectedCycle:AB,detectAllCycles:rB,detectAllDirectedCycle:xT,detectAllUndirectedCycle:bT,depthFirstSearch:mT,dijkstra:xm,findAllPath:aB,findShortestPath:iB,floydWarshall:wm,labelPropagation:oB,louvain:cB,minimumSpanningTree:dB,pageRank:hB,getNeighbors:as,Stack:t1,GADDI:TB,default:Xce}),r1=Un,Kce=function(t){return function(e,n){return e[t]-n[t]}},MB=function(t,e,n){return t>=e&&t<=n},n1=function(t,e,n,i){var a=1e-4,o={x:n.x-t.x,y:n.y-t.y},s={x:e.x-t.x,y:e.y-t.y},l={x:i.x-n.x,y:i.y-n.y},u=s.x*l.y-s.y*l.x,c=u*u,f=1/u,d=s.x*s.x+s.y*s.y,h=l.x*l.x+l.y*l.y;if(c>a*d*h){var v=(o.x*l.y-o.y*l.x)*f,p=(o.x*s.y-o.y*s.x)*f;return!MB(v,0,1)||!MB(p,0,1)?null:{x:t.x+v*s.x,y:t.y+v*s.y}}return null},kB=function(t,e){var n=t.x,i=t.y,a=t.width,o=t.height,s=n+a/2,l=i+o/2,u=[],c={x:s,y:l};u.push({x:n,y:i}),u.push({x:n+a,y:i}),u.push({x:n+a,y:i+o}),u.push({x:n,y:i+o}),u.push({x:n,y:i});for(var f=null,d=1;d<u.length&&(f=n1(u[d-1],u[d],c,e),!f);d++);return f},IB=function(t,e){var n=t.x,i=t.y,a=t.r,o=e.x,s=e.y,l=o-n,u=s-i;if(l*l+u*u<a*a)return null;var c=Math.atan(u/l);return{x:n+Math.abs(a*Math.cos(c))*Math.sign(l),y:i+Math.abs(a*Math.sin(c))*Math.sign(u)}},PB=function(t,e){var n=t.rx,i=t.ry,a=t.x,o=t.y,s=e.x-a,l=e.y-o,u=Math.atan2(l/i,s/n);return u<0&&(u+=2*Math.PI),{x:a+n*Math.cos(u),y:o+i*Math.sin(u)}},i1=function(t,e,n){n===void 0&&(n=1);var i=[t.x,t.y,n];return(!e||isNaN(e[0]))&&(e=[1,0,0,0,1,0,0,0,1]),kl(i,i,e),{x:i[0],y:i[1]}},DB=function(t,e,n){n===void 0&&(n=1),(!e||isNaN(e[0]))&&(e=[1,0,0,0,1,0,0,0,1]);var i=Wx([1,0,0,0,1,0,0,0,1],e);i||(i=[1,0,0,0,1,0,0,0,1]);var a=[t.x,t.y,n];return kl(a,a,i),{x:a[0],y:a[1]}},ST=function(t,e,n){var i=t.x-e.x,a=t.y-e.y,o=t.x-n.x,s=t.y-n.y,l=(t.x*t.x-e.x*e.x-e.y*e.y+t.y*t.y)/2,u=(t.x*t.x-n.x*n.x-n.y*n.y+t.y*t.y)/2,c=a*o-i*s;return{x:-(s*l-a*u)/c,y:-(i*u-o*l)/c}},a1=function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)},Zce=function(t,e){var n=[];return t.forEach(function(i){var a=[];i.forEach(function(o){a.push(o*e)}),n.push(a)}),n},Qce=function(t){for(var e=[],n=t.length,i=0;i<n;i+=1){e[i]=[];for(var a=0;a<n;a+=1)i===a?e[i][a]=0:t[i][a]===0||!t[i][a]?e[i][a]=1/0:e[i][a]=t[i][a]}for(var o=0;o<n;o+=1)for(var i=0;i<n;i+=1)for(var a=0;a<n;a+=1)e[i][a]>e[i][o]+e[o][a]&&(e[i][a]=e[i][o]+e[o][a]);return e},Jce=function(t,e){var n=t.nodes,i=t.edges,a=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),i&&i.forEach(function(s){var l=s.source,u=s.target,c=o[l],f=o[u];a[c][f]=1,e||(a[f][c]=1)}),a},RB=function(t,e){t.translate(e.x,e.y)},OB=function(t,e,n,i){i===void 0&&(i={duration:500});var a=t.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=t.getCanvasBBox(),s=e.x-o.minX,l=e.y-o.minY;if(n){var u=s*a[0],c=l*a[4],f=0,d=0,h=0,v=0;t.animate(function(g){return h=u*g,v=c*g,a=r1(a,[["t",h-f,v-d]]),f=h,d=v,{matrix:a}},i)}else{var p=r1(a,[["t",s,l]]);t.setMatrix(p)}},efe=function(t,e){var n=t.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=e;qe(e)||(i=[e,e]),qe(e)&&e.length===1&&(i=[e[0],e[0]]),n=r1(n,[["s",i[0],i[1]]]),t.setMatrix(n)},tfe=function(t,e){var n=t.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]),n=r1(n,[["r",e]]),t.setMatrix(n)},rfe=function(t,e,n){for(var i=[],a=0;a<t;a++)i[a]=0;return n.forEach(function(o){o.source&&(i[e[o.source]]+=1),o.target&&(i[e[o.target]]+=1)}),i};function nfe(r,t,e){return(e[0]-r[0])*(t[1]-r[1])==(t[0]-r[0])*(e[1]-r[1])&&Math.min(r[0],t[0])<=e[0]&&e[0]<=Math.max(r[0],t[0])&&Math.min(r[1],t[1])<=e[1]&&e[1]<=Math.max(r[1],t[1])}var Cm=function(t,e,n){var i=!1,a=t.length,o=1e-6;function s(f){return Math.abs(f)<o?0:f<0?-1:1}if(a<=2)return!1;for(var l=0;l<a;l++){var u=t[l],c=t[(l+1)%a];if(nfe(u,c,[e,n]))return!0;s(u[1]-n)>0!=s(c[1]-n)>0&&s(e-(n-u[1])*(u[0]-c[0])/(u[1]-c[1])-u[0])<0&&(i=!i)}return i},LB=function(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)},ife=function(t,e){var n=!1;return G(t,function(i){if(n1(i.from,i.to,e.from,e.to))return n=!0,!1}),n},FB=function(t,e){var n=function(d){var h=d.map(function(p){return p[0]}),v=d.map(function(p){return p[1]});return{minX:Math.min.apply(null,h),maxX:Math.max.apply(null,h),minY:Math.min.apply(null,v),maxY:Math.max.apply(null,v)}},i=function(d){for(var h=[],v=d.length,p=0;p<v-1;p++){var g=d[p],m=d[p+1];h.push({from:{x:g[0],y:g[1]},to:{x:m[0],y:m[1]}})}if(h.length>1){var y=d[0],b=d[v-1];h.push({from:{x:b[0],y:b[1]},to:{x:y[0],y:y[1]}})}return h};if(t.length<2||e.length<2)return!1;var a=n(t),o=n(e);if(!LB(a,o))return!1;var s=!1;if(G(e,function(f){if(Cm(t,f[0],f[1]))return s=!0,!1}),s||(G(t,function(f){if(Cm(e,f[0],f[1]))return s=!0,!1}),s))return!0;var l=i(t),u=i(e),c=!1;return G(u,function(f){if(ife(l,f))return c=!0,!1}),c},od=function(){function r(t,e,n,i){this.x1=t,this.y1=e,this.x2=n,this.y2=i}return r.prototype.getBBox=function(){var t=Math.min(this.x1,this.x2),e=Math.min(this.y1,this.y2),n=Math.max(this.x1,this.x2),i=Math.max(this.y1,this.y2),a={x:t,y:e,minX:t,minY:e,maxX:n,maxY:i,width:n-t,height:i-e};return a},r}(),CT=function(t,e){var n={top:[t.minX,t.minY,t.maxX,t.minY],left:[t.minX,t.minY,t.minX,t.maxY],bottom:[t.minX,t.maxY,t.maxX,t.maxY],right:[t.maxX,t.minY,t.maxX,t.maxY]};return n[e]},afe=function(t,e){var n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),i=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),a=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(a){var o=n/a,s=i/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},NB=function(t,e){for(var n=["top","left","bottom","right"],i=t.getBBox(),a=0,o=[],s=0;s<4;s++){var l=CT(i,n[s]),u=l[0],c=l[1],f=l[2],d=l[3];o[s]=n1({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:u,y:c},{x:f,y:d}),o[s]&&(a+=1)}return[o,a]},ET=function(t,e){for(var n=["top","left","bottom","right"],i=t.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var l=CT(i,n[s]),u=l[0],c=l[1],f=l[2],d=l[3],h=afe(e,new od(u,c,f,d));h=Math.abs(h-.5),h>=0&&h<=1&&(o+=1,a=h<a?h:a)}return o===0?-1:a},BB=function(t){var e=0,n=0;if(t.length>0){for(var i=0,a=t;i<a.length;i++){var o=a[i];e+=o.x,n+=o.y}e/=t.length,n/=t.length}return{x:e,y:n}},o1=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},$B=function(t,e){var n=e.x1,i=e.y1,a=e.x2-n,o=e.y2-i,s=t.x-n,l=t.y-i,u=s*a+l*o,c;u<=0?c=0:(s=a-s,l=o-l,u=s*a+l*o,u<=0?c=0:c=u*u/(a*a+o*o));var f=s*s+l*l-c;return f<0&&(f=0),f},_T=function(t,e,n){return n===void 0&&(n=.001),Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<Math.pow(n,2)},zB=function(t,e){var n=t.x<e.x,i=t.x>e.x+e.width,a=t.y>e.y+e.height,o=t.y<e.y,s=n||i||a||o;if(!s)return 0;if(a&&!n&&!i)return Math.pow(e.y+e.height-t.y,2);if(o&&!n&&!i)return Math.pow(t.y-e.y,2);if(n&&!a&&!o)return Math.pow(e.x-t.x,2);if(i&&!a&&!o)return Math.pow(e.x+e.width-t.x,2);var l=Math.min(Math.abs(e.x-t.x),Math.abs(e.x+e.width-t.x)),u=Math.min(Math.abs(e.y-t.y),Math.abs(e.y+e.height-t.y));return l*l+u*u},ofe=function(t,e){var n=t[0],i=t[1],a=t[2],o=t[3],s=e.x,l=e.y,u=[a-n,o-i];if(j3(u,[0,0]))return NaN;var c=[-u[1],u[0]];wc(c,c);var f=[s-n,l-i];return Math.abs(dT(f,c))},GB=function(t,e,n){return t+(e-t)*n},sfe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",compare:Kce,getLineIntersect:n1,getRectIntersectByPoint:kB,getCircleIntersectByPoint:IB,getEllipseIntersectByPoint:PB,applyMatrix:i1,invertMatrix:DB,getCircleCenterByPoints:ST,distance:a1,scaleMatrix:Zce,floydWarshall:Qce,getAdjMatrix:Jce,translate:RB,move:OB,scale:efe,rotate:tfe,getDegree:rfe,isPointInPolygon:Cm,intersectBBox:LB,isPolygonsIntersect:FB,Line:od,getBBoxBoundLine:CT,itemIntersectByLine:NB,fractionToLine:ET,getPointsCenter:BB,squareDist:o1,pointLineSquareDist:$B,isPointsOverlap:_T,pointRectSquareDist:zB,pointLineDistance:ofe,lerp:GB}),Cc="rgb(95, 149, 255)",lfe="rgb(255, 255, 255)",UB="rgb(0, 0, 0)",TT="rgb(247, 250, 255)",VB="rgb(239, 244, 255)",s1="rgb(253, 253, 253)",HB="rgb(250, 250, 250)",l1="rgb(224, 224, 224)",WB="rgb(234, 234, 234)",ufe="rgb(245, 245, 245)",cfe="rgb(191, 213, 255)",jB="#4572d9",ffe="rgb(223, 234, 255)",dn={mainStroke:Cc,mainFill:VB,activeStroke:Cc,activeFill:TT,inactiveStroke:cfe,inactiveFill:TT,selectedStroke:Cc,selectedFill:lfe,highlightStroke:jB,highlightFill:ffe,disableStroke:l1,disableFill:HB,edgeMainStroke:l1,edgeActiveStroke:Cc,edgeInactiveStroke:WB,edgeSelectedStroke:Cc,edgeHighlightStroke:Cc,edgeDisableStroke:ufe,comboMainStroke:l1,comboMainFill:s1,comboActiveStroke:Cc,comboActiveFill:TT,comboInactiveStroke:l1,comboInactiveFill:s1,comboSelectedStroke:Cc,comboSelectedFill:s1,comboHighlightStroke:jB,comboHighlightFill:s1,comboDisableStroke:WB,comboDisableFill:HB},Zt={version:"0.5.0",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:dn.mainStroke,fill:VB},size:20,color:dn.mainStroke,linkPoints:{size:8,lineWidth:1,fill:dn.activeFill,stroke:dn.activeStroke}},nodeStateStyles:{active:{fill:dn.activeFill,stroke:dn.activeStroke,lineWidth:2,shadowColor:dn.mainStroke,shadowBlur:10},selected:{fill:dn.selectedFill,stroke:dn.selectedStroke,lineWidth:4,shadowColor:dn.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:dn.highlightFill,stroke:dn.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:dn.inactiveFill,stroke:dn.inactiveStroke,lineWidth:1},disable:{fill:dn.disableFill,stroke:dn.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:UB,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:dn.edgeMainStroke,lineAppendWidth:2},color:dn.edgeMainStroke},edgeStateStyles:{active:{stroke:dn.edgeActiveStroke,lineWidth:1},selected:{stroke:dn.edgeSelectedStroke,lineWidth:2,shadowColor:dn.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:dn.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:dn.edgeInactiveStroke,lineWidth:1},disable:{stroke:dn.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:UB,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:dn.comboMainFill,lineWidth:1,stroke:dn.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:dn.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:dn.comboActiveStroke,lineWidth:1,fill:dn.comboActiveFill},selected:{stroke:dn.comboSelectedStroke,lineWidth:2,fill:dn.comboSelectedFill,shadowColor:dn.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:dn.comboHighlightStroke,lineWidth:2,fill:dn.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:dn.comboInactiveStroke,fill:dn.comboInactiveFill,lineWidth:1},disable:{stroke:dn.comboDisableStroke,fill:dn.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},dfe={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,"0":.6,"1":.40099945068359377,"2":.6,"3":.6,"4":.6,"5":.6,"6":.6,"7":.5469985961914062,"8":.6,"9":.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Pl=Math.PI,AT=Math.sin,MT=Math.cos,Fa=AT(Pl/8),Na=MT(Pl/8),u1=function(t,e){var n=t.getBBox(),i={x:n.minX,y:n.minY},a={x:n.maxX,y:n.maxY};if(e){var o=e.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),i=i1(i,o),a=i1(a,o)}var s=i.x,l=i.y,u=a.x,c=a.y;return{x:s,y:l,minX:s,minY:l,maxX:u,maxY:c,width:u-s,height:c-l}},YB=function(t){var e=t.sourceNode||t.targetNode,n=e.get("group"),i=n.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var a=e.getKeyShape(),o=a.getBBox(),s=t.loopCfg||{},l=s.dist||Math.max(o.width,o.height)*2,u=s.position||Zt.defaultLoopPosition,c=[i[6],i[7]],f=[t.startPoint.x,t.startPoint.y],d=[t.endPoint.x,t.endPoint.y],h=o.height/2,v=o.height/2,p=h*Fa,g=h*Na,m=v*Fa,y=v*Na;if(f[0]===d[0]&&f[1]===d[1]){switch(u){case"top":f=[c[0]-p,c[1]-g],d=[c[0]+m,c[1]-y];break;case"top-right":h=o.height/2,v=o.width/2,p=h*Fa,g=h*Na,m=v*Fa,y=v*Na,f=[c[0]+p,c[1]-g],d=[c[0]+y,c[1]-m];break;case"right":h=o.width/2,v=o.width/2,p=h*Fa,g=h*Na,m=v*Fa,y=v*Na,f=[c[0]+g,c[1]-p],d=[c[0]+y,c[1]+m];break;case"bottom-right":h=o.width/2,v=o.height/2,p=h*Fa,g=h*Na,m=v*Fa,y=v*Na,f=[c[0]+g,c[1]+p],d=[c[0]+m,c[1]+y];break;case"bottom":h=o.height/2,v=o.height/2,p=h*Fa,g=h*Na,m=v*Fa,y=v*Na,f=[c[0]+p,c[1]+g],d=[c[0]-m,c[1]+y];break;case"bottom-left":h=o.height/2,v=o.width/2,p=h*Fa,g=h*Na,m=v*Fa,y=v*Na,f=[c[0]-p,c[1]+g],d=[c[0]-y,c[1]+m];break;case"left":h=o.width/2,v=o.width/2,p=h*Fa,g=h*Na,m=v*Fa,y=v*Na,f=[c[0]-g,c[1]+p],d=[c[0]-y,c[1]-m];break;case"top-left":h=o.width/2,v=o.height/2,p=h*Fa,g=h*Na,m=v*Fa,y=v*Na,f=[c[0]-g,c[1]-p],d=[c[0]-m,c[1]-y];break;default:h=o.width/2,v=o.width/2,p=h*Fa,g=h*Na,m=v*Fa,y=v*Na,f=[c[0]-p,c[1]-g],d=[c[0]+m,c[1]-y]}if(s.clockwise===!1){var b=[f[0],f[1]];f=[d[0],d[1]],d=[b[0],b[1]]}}var x=[f[0]-c[0],f[1]-c[1]],w=(h+l)/h,S=(v+l)/v;s.clockwise===!1&&(w=(v+l)/v,S=(h+l)/h);var C=di([0,0],x,w),_=[c[0]+C[0],c[1]+C[1]],T=[d[0]-c[0],d[1]-c[1]],E=di([0,0],T,S),M=[c[0]+E[0],c[1]+E[1]];return t.startPoint={x:f[0],y:f[1]},t.endPoint={x:d[0],y:d[1]},t.controlPoints=[{x:_[0],y:_[1]},{x:M[0],y:M[1]}],t},kT=function(t,e,n,i,a){var o=1e-4,s=[],l=t==null?void 0:t.getPoint(e);if(!l)return{x:0,y:0,angle:0};if(e<o)s=t.getStartTangent().reverse();else if(e>1-o)s=t.getEndTangent();else{var u=t==null?void 0:t.getPoint(e+o);s.push([l.x,l.y]),s.push([u.x,u.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=Pl*2),n&&(l.x+=MT(c)*n,l.y+=AT(c)*n),i){var f=c-Pl/2;c>1/2*Pl&&c<3*1/2*Pl&&(f-=Pl),l.x+=MT(f)*i,l.y+=AT(f)*i}var d={x:l.x,y:l.y,angle:c};return a?(c>.5*Pl&&c<1.5*Pl&&(c-=Pl),A({rotate:c},d)):d},XB=function r(t,e){if(e(t)===!1)return!1;if(t&&t.children){for(var n=t.children.length-1;n>=0;n--)if(!r(t.children[n],e))return!1}return!0},hfe=function r(t,e){if(t&&t.children){for(var n=t.children.length-1;n>=0;n--)if(!r(t.children[n],e))return}return e(t)!==!1},os=function(t,e){typeof e=="function"&&XB(t,e)},Ec=function(t,e){typeof e=="function"&&hfe(t,e)},qB=function(t,e){return e*(dfe[t]||1)},KB=function(t,e){var n=0,i=new RegExp("[\u4E00-\u9FA5]+");return t.split("").forEach(function(a){i.test(a)?n+=e:n+=qB(a,e)}),[n,e]},IT=function(t,e){var n=[],i={},a={};t.forEach(function(l){a[l.id]=l}),t.forEach(function(l,u){var c=Mr(l);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo "+c.id+" can not be the same as the combo's id"),delete c.parentId):c.parentId&&!a[c.parentId]&&(console.warn("The parent combo for combo "+c.id+" does not exist!"),delete c.parentId);var f=i[c.id];if(f){if(c.children=f.children,i[c.id]=c,f=c,!f.parentId){n.push(f);return}var d=i[f.parentId];if(d)d.children?d.children.push(c):d.children=[c];else{var h={id:f.parentId,children:[f]};i[f.parentId]=h,i[c.id]=c}return}if(rt(l.parentId)){var v=i[l.parentId];if(v)v.children?v.children.push(c):v.children=[c],i[c.id]=c;else{var p={id:l.parentId,children:[c]};i[p.id]=p,i[c.id]=c}}else n.push(c),i[c.id]=c});var o={};(e||[]).forEach(function(l){o[l.id]=l;var u=i[l.comboId];if(u){var c={id:l.id,comboId:l.comboId};u.children?u.children.push(c):u.children=[c],c.itemType="node",i[l.id]=c}});var s=0;return n.forEach(function(l){l.depth=s+10,XB(l,function(u){var c,f=i[u.id].itemType;f==="node"?c=i[u.comboId]:c=i[u.parentId],c&&f==="node"?u.depth=s+1:u.depth=s+10,s<u.depth&&(s=u.depth);var d=o[u.id];return d&&(d.depth=u.depth),!0})}),n},PT=function(t,e,n){var i=t,a,o={root:{children:t}},s=!1,l="root";(t||[]).forEach(function(h){if(!s){if(h.id===e){a=h,h.itemType==="combo"?a.parentId=n:a.comboId=n,s=!0;return}os(h,function(v){return o[v.id]={children:v.children},i=o[v.parentId||v.comboId||"root"].children,v&&(v.removed||e===v.id)&&i?(l=v.parentId||v.comboId||"root",a=v,v.itemType==="combo"?a.parentId=n:a.comboId=n,s=!0,!1):!0})}}),i=o[l].children;var u=i?i.indexOf(a):-1;if(u>-1&&i.splice(u,1),s||(a={id:e,itemType:"node",comboId:n},o[e]={children:void 0}),e){var c=!1;if(n){var f=0;(t||[]).forEach(function(h){c||os(h,function(v){return n===v.id?(c=!0,v.children?v.children.push(a):v.children=[a],f=v.depth,a.itemType==="node"?a.depth=f+2:a.depth=f+1,!1):!0})})}else(!n||!c)&&a.itemType!=="node"&&t.push(a);var d=a.depth;os(a,function(h){return h.itemType==="node"?d+=2:d+=1,h.depth=d,!0})}return t},Em=function(t,e){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return!t||t.length===0||(t.forEach(function(i){var a=e.findById(i.id);if(!(!a||!a.isVisible())){a.set("bboxCanvasCache",void 0);var o=a.getCanvasBBox();o.x&&n.minX>o.minX&&(n.minX=o.minX),o.y&&n.minY>o.minY&&(n.minY=o.minY),o.x&&n.maxX<o.maxX&&(n.maxX=o.maxX),o.y&&n.maxY<o.maxY&&(n.maxY=o.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,Object.keys(n).forEach(function(i){(n[i]===1/0||n[i]===-1/0)&&(n[i]=void 0)})),n},vfe=function(t){var e=Rt(t.x)||Rt(t.y)||t.type||t.anchorPoints||t.size;return t.style&&(e=e||Rt(t.style.r)||Rt(t.style.width)||Rt(t.style.height)||Rt(t.style.rx)||Rt(t.style.ry)),e},c1=function(t){var e={};return Object.keys(t).forEach(function(n){var i=t[n];if(Kr(i)&&!qe(i)){var a={};Object.keys(i).forEach(function(o){var s=i[o];o==="img"&&!rt(s)||(a[o]=Mr(s))}),e[n]=a}else e[n]=Mr(i)}),e},pfe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getBBox:u1,getLoopCfgs:YB,getLabelPosition:kT,traverseTree:os,traverseTreeUp:Ec,getLetterWidth:qB,getTextSize:KB,plainCombosToTrees:IT,reconstructTree:PT,getComboBBox:Em,shouldRefreshEdge:vfe,cloneBesidesImg:c1}),ZB=function(t){var e;if(!t)return console.error("G6 Error Tips: the data must be defined"),!1;var n=t.nodes,i=t.edges,a=t.combos,o=a===void 0?[]:a;if(!n&&!i){var s=!0;return os(t,function(h){return rt(h.id)?!0:(s=!1,!1)}),s}var l=(n||[]).find(function(h){return!rt(h.id)});if(l)return console.warn("G6 Warning Tips: missing 'id' property, or %c"+l.id+"%c is not a string.","font-size: 20px; color: red;",""),!1;var u=(n||[]).map(function(h){return h.id}),c=(e=o)===null||e===void 0?void 0:e.map(function(h){return h.id}),f=Jn(Jn([],u,!0),c,!0),d=(i||[]).find(function(h){return!f.includes(h.source)||!f.includes(h.target)});return d?(console.warn("G6 Warning Tips: The source %c"+d.source+"%c or the target %c"+d.target+"%c of the edge do not exist in the nodes or combos.","font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},gfe=function(t,e){if(t==="node"||t==="combo"){if(e.id&&!rt(e.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c"+e.id+"%c is not a string.","font-size: 20px; color: red;",""),!1}else if(t==="edge"&&(!e.source||!e.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},mfe=function(){function r(t){this.graph=t,this.destroyed=!1,this.modes=t.get("modes")||{default:[]},this.formatModes(),this.mode=t.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return r.prototype.formatModes=function(){var t=this.modes;G(t,function(e){G(e,function(n,i){rt(n)&&(e[i]={type:n})})})},r.prototype.setBehaviors=function(t){var e=this.graph,n=this.modes[t],i=[],a;G(n||[],function(o){var s=D3.getBehavior(o.type||o);!s||(a=new s(o),a&&(a.bind(e),i.push(a)))}),this.currentBehaves=i},r.mergeBehaviors=function(t,e){return G(e,function(n){t.indexOf(n)<0&&(rt(n)&&(n={type:n}),t.push(n))}),t},r.filterBehaviors=function(t,e){var n=[];return t.forEach(function(i){var a="";rt(i)?a=i:a=i.type,e.indexOf(a)<0&&n.push(i)}),n},r.prototype.setMode=function(t){var e=this,n=e.modes,i=e.graph,a=t,o=n[a];!o||(i.emit("beforemodechange",{mode:t}),G(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(i)}),this.setBehaviors(a),i.emit("aftermodechange",{mode:t}),this.mode=t)},r.prototype.getMode=function(){return this.mode},r.prototype.manipulateBehaviors=function(t,e,n){var i=this,a;if(qe(t)?a=t:a=[t],qe(e))return G(e,function(s){i.modes[s]?n?i.modes[s]=r.mergeBehaviors(i.modes[s]||[],a):i.modes[s]=r.filterBehaviors(i.modes[s]||[],a):n&&(i.modes[s]=a)}),this;var o=e;return e||(o=this.mode),this.modes[o]||n&&(this.modes[o]=a),n?this.modes[o]=r.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=r.filterBehaviors(this.modes[o]||[],a),this.formatModes(),this.setMode(this.mode),this},r.prototype.updateBehavior=function(t,e,n){rt(t)&&(t={type:t});var i=[];if(!n||n===this.mode||n==="default"){if(i=this.currentBehaves,!i||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=i.length,o=0;o<a;o++){var s=i[o];if(s.type===t.type)return s.updateCfg(e),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(i=this.modes[n],!i||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var l=i.length,o=0;o<l;o++){var s=i[o];if(s.type===t.type||s===t.type)return s===t.type&&(s={type:s}),Object.assign(s,e),i[o]=s,this;o===l-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},r.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},r}(),_m=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,yfe=new RegExp("([a-z])["+_m+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+_m+"]*,?["+_m+"]*)+)","ig"),bfe=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+_m+"]*,?["+_m+"]*","ig"),kv=function(r){if(!r)return null;if(qe(r))return r;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(r).replace(yfe,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(bfe,function(l,u){u&&o.push(+u)}),s==="m"&&o.length>2&&(e.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&e.push([i,o[0]]),s==="r")e.push([i].concat(o));else for(;o.length>=t[s]&&(e.push([i].concat(o.splice(0,t[s]))),!!t[s]););return r}),e},DT=function(r,t){for(var e=[],n=0,i=r.length;i-2*!t>n;n+=2){var a=[{x:+r[n-2],y:+r[n-1]},{x:+r[n],y:+r[n+1]},{x:+r[n+2],y:+r[n+3]},{x:+r[n+4],y:+r[n+5]}];t?n?i-4===n?a[3]={x:+r[0],y:+r[1]}:i-2===n&&(a[2]={x:+r[0],y:+r[1]},a[3]={x:+r[2],y:+r[3]}):a[0]={x:+r[i-2],y:+r[i-1]}:i-4===n?a[3]=a[2]:n||(a[0]={x:+r[n],y:+r[n+1]}),e.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return e},f1=function(r,t,e,n,i){var a=[];if(i===null&&n===null&&(n=e),r=+r,t=+t,e=+e,n=+n,i!==null){var o=Math.PI/180,s=r+e*Math.cos(-n*o),l=r+e*Math.cos(-i*o),u=t+e*Math.sin(-n*o),c=t+e*Math.sin(-i*o);a=[["M",s,u],["A",e,e,0,+(i-n>180),0,l,c]]}else a=[["M",r,t],["m",0,-n],["a",e,n,0,1,1,0,2*n],["a",e,n,0,1,1,0,-2*n],["z"]];return a},RT=function(r){if(r=kv(r),!r||!r.length)return[["M",0,0]];var t=[],e=0,n=0,i=0,a=0,o=0,s,l;r[0][0]==="M"&&(e=+r[0][1],n=+r[0][2],i=e,a=n,o++,t[0]=["M",e,n]);for(var u=r.length===3&&r[0][0]==="M"&&r[1][0].toUpperCase()==="R"&&r[2][0].toUpperCase()==="Z",c=void 0,f=void 0,d=o,h=r.length;d<h;d++){if(t.push(c=[]),f=r[d],s=f[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=+f[6]+e,c[7]=+f[7]+n;break;case"V":c[1]=+f[1]+n;break;case"H":c[1]=+f[1]+e;break;case"R":l=[e,n].concat(f.slice(1));for(var v=2,p=l.length;v<p;v++)l[v]=+l[v]+e,l[++v]=+l[v]+n;t.pop(),t=t.concat(DT(l,u));break;case"O":t.pop(),l=f1(e,n,f[1],f[2]),l.push(l[0]),t=t.concat(l);break;case"U":t.pop(),t=t.concat(f1(e,n,f[1],f[2],f[3])),c=["U"].concat(t[t.length-1].slice(-2));break;case"M":i=+f[1]+e,a=+f[2]+n;break;default:for(var v=1,p=f.length;v<p;v++)c[v]=+f[v]+(v%2?e:n)}else if(s==="R")l=[e,n].concat(f.slice(1)),t.pop(),t=t.concat(DT(l,u)),c=["R"].concat(f.slice(-2));else if(s==="O")t.pop(),l=f1(e,n,f[1],f[2]),l.push(l[0]),t=t.concat(l);else if(s==="U")t.pop(),t=t.concat(f1(e,n,f[1],f[2],f[3])),c=["U"].concat(t[t.length-1].slice(-2));else for(var g=0,m=f.length;g<m;g++)c[g]=f[g];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":e=+i,n=+a;break;case"H":e=c[1];break;case"V":n=c[1];break;case"M":i=c[c.length-2],a=c[c.length-1];break;default:e=c[c.length-2],n=c[c.length-1]}}return t},d1=function(r,t,e,n){return[r,t,e,n,e,n]},QB=function(r,t,e,n,i,a){var o=1/3,s=2/3;return[o*r+s*e,o*t+s*n,o*i+s*e,o*a+s*n,i,a]},JB=function(r,t,e,n,i,a,o,s,l,u){e===n&&(e+=1);var c=Math.PI*120/180,f=Math.PI/180*(+i||0),d=[],h,v,p,g,m,y=function(le,ue,Ee){var De=le*Math.cos(Ee)-ue*Math.sin(Ee),je=le*Math.sin(Ee)+ue*Math.cos(Ee);return{x:De,y:je}};if(u)v=u[0],p=u[1],g=u[2],m=u[3];else{h=y(r,t,-f),r=h.x,t=h.y,h=y(s,l,-f),s=h.x,l=h.y,r===s&&t===l&&(s+=1,l+=1);var b=(r-s)/2,x=(t-l)/2,w=b*b/(e*e)+x*x/(n*n);w>1&&(w=Math.sqrt(w),e=w*e,n=w*n);var S=e*e,C=n*n,_=(a===o?-1:1)*Math.sqrt(Math.abs((S*C-S*x*x-C*b*b)/(S*x*x+C*b*b)));g=_*e*x/n+(r+s)/2,m=_*-n*b/e+(t+l)/2,v=Math.asin(((t-m)/n).toFixed(9)),p=Math.asin(((l-m)/n).toFixed(9)),v=r<g?Math.PI-v:v,p=s<g?Math.PI-p:p,v<0&&(v=Math.PI*2+v),p<0&&(p=Math.PI*2+p),o&&v>p&&(v=v-Math.PI*2),!o&&p>v&&(p=p-Math.PI*2)}var T=p-v;if(Math.abs(T)>c){var E=p,M=s,k=l;p=v+c*(o&&p>v?1:-1),s=g+e*Math.cos(p),l=m+n*Math.sin(p),d=JB(s,l,e,n,i,0,o,M,k,[p,E,g,m])}T=p-v;var P=Math.cos(v),F=Math.sin(v),$=Math.cos(p),R=Math.sin(p),L=Math.tan(T/4),O=4/3*e*L,B=4/3*n*L,U=[r,t],W=[r+O*F,t-B*P],X=[s+O*R,l-B*$],ae=[s,l];if(W[0]=2*U[0]-W[0],W[1]=2*U[1]-W[1],u)return[W,X,ae].concat(d);d=[W,X,ae].concat(d).join().split(",");for(var Z=[],Y=0,fe=d.length;Y<fe;Y++)Z[Y]=Y%2?y(d[Y-1],d[Y],f).y:y(d[Y],d[Y+1],f).x;return Z},OT=function(r,t){var e=RT(r),n=t&&RT(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],l="",u="",c,f=function(b,x,w){var S,C;if(!b)return["C",x.x,x.y,x.x,x.y,x.x,x.y];switch(!(b[0]in{T:1,Q:1})&&(x.qx=x.qy=null),b[0]){case"M":x.X=b[1],x.Y=b[2];break;case"A":b=["C"].concat(JB.apply(0,[x.x,x.y].concat(b.slice(1))));break;case"S":w==="C"||w==="S"?(S=x.x*2-x.bx,C=x.y*2-x.by):(S=x.x,C=x.y),b=["C",S,C].concat(b.slice(1));break;case"T":w==="Q"||w==="T"?(x.qx=x.x*2-x.qx,x.qy=x.y*2-x.qy):(x.qx=x.x,x.qy=x.y),b=["C"].concat(QB(x.x,x.y,x.qx,x.qy,b[1],b[2]));break;case"Q":x.qx=b[1],x.qy=b[2],b=["C"].concat(QB(x.x,x.y,b[1],b[2],b[3],b[4]));break;case"L":b=["C"].concat(d1(x.x,x.y,b[1],b[2]));break;case"H":b=["C"].concat(d1(x.x,x.y,b[1],x.y));break;case"V":b=["C"].concat(d1(x.x,x.y,x.x,b[1]));break;case"Z":b=["C"].concat(d1(x.x,x.y,x.X,x.Y));break}return b},d=function(b,x){if(b[x].length>7){b[x].shift();for(var w=b[x];w.length;)o[x]="A",n&&(s[x]="A"),b.splice(x++,0,["C"].concat(w.splice(0,6)));b.splice(x,1),c=Math.max(e.length,n&&n.length||0)}},h=function(b,x,w,S,C){b&&x&&b[C][0]==="M"&&x[C][0]!=="M"&&(x.splice(C,0,["M",S.x,S.y]),w.bx=0,w.by=0,w.x=b[C][1],w.y=b[C][2],c=Math.max(e.length,n&&n.length||0))};c=Math.max(e.length,n&&n.length||0);for(var v=0;v<c;v++){e[v]&&(l=e[v][0]),l!=="C"&&(o[v]=l,v&&(u=o[v-1])),e[v]=f(e[v],i,u),o[v]!=="A"&&l==="C"&&(o[v]="C"),d(e,v),n&&(n[v]&&(l=n[v][0]),l!=="C"&&(s[v]=l,v&&(u=s[v-1])),n[v]=f(n[v],a,u),s[v]!=="A"&&l==="C"&&(s[v]="C"),d(n,v)),h(e,n,i,a,v),h(n,e,a,i,v);var p=e[v],g=n&&n[v],m=p.length,y=n&&g.length;i.x=p[m-2],i.y=p[m-1],i.bx=parseFloat(p[m-4])||i.x,i.by=parseFloat(p[m-3])||i.y,a.bx=n&&(parseFloat(g[y-4])||a.x),a.by=n&&(parseFloat(g[y-3])||a.y),a.x=n&&g[y-2],a.y=n&&g[y-1]}return n?[e,n]:e},xfe=/,?([a-z]),?/gi,e5=function(r){return r.join(",").replace(xfe,"$1")},t5=function(r,t,e,n,i){var a=-3*t+9*e-9*n+3*i,o=r*a+6*t-12*e+6*n;return r*o-3*t+3*e},r5=function(r,t,e,n,i,a,o,s,l){l===null&&(l=1),l=l>1?1:l<0?0:l;for(var u=l/2,c=12,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,v=0;v<c;v++){var p=u*f[v]+u,g=t5(p,r,e,i,o),m=t5(p,t,n,a,s),y=g*g+m*m;h+=d[v]*Math.sqrt(y)}return u*h},wfe=function(r,t,e,n,i,a,o,s){for(var l=[],u=[[],[]],c,f,d,h,v=0;v<2;++v){if(v===0?(f=6*r-12*e+6*i,c=-3*r+9*e-9*i+3*o,d=3*e-3*r):(f=6*t-12*n+6*a,c=-3*t+9*n-9*a+3*s,d=3*n-3*t),Math.abs(c)<1e-12){if(Math.abs(f)<1e-12)continue;h=-d/f,h>0&&h<1&&l.push(h);continue}var p=f*f-4*d*c,g=Math.sqrt(p);if(!(p<0)){var m=(-f+g)/(2*c);m>0&&m<1&&l.push(m);var y=(-f-g)/(2*c);y>0&&y<1&&l.push(y)}}for(var b=l.length,x=b,w;b--;)h=l[b],w=1-h,u[0][b]=w*w*w*r+3*w*w*h*e+3*w*h*h*i+h*h*h*o,u[1][b]=w*w*w*t+3*w*w*h*n+3*w*h*h*a+h*h*h*s;return u[0][x]=r,u[1][x]=t,u[0][x+1]=o,u[1][x+1]=s,u[0].length=u[1].length=x+2,{min:{x:Math.min.apply(0,u[0]),y:Math.min.apply(0,u[1])},max:{x:Math.max.apply(0,u[0]),y:Math.max.apply(0,u[1])}}},Sfe=function(r,t,e,n,i,a,o,s){if(!(Math.max(r,e)<Math.min(i,o)||Math.min(r,e)>Math.max(i,o)||Math.max(t,n)<Math.min(a,s)||Math.min(t,n)>Math.max(a,s))){var l=(r*n-t*e)*(i-o)-(r-e)*(i*s-a*o),u=(r*n-t*e)*(a-s)-(t-n)*(i*s-a*o),c=(r-e)*(a-s)-(t-n)*(i-o);if(!!c){var f=l/c,d=u/c,h=+f.toFixed(2),v=+d.toFixed(2);if(!(h<+Math.min(r,e).toFixed(2)||h>+Math.max(r,e).toFixed(2)||h<+Math.min(i,o).toFixed(2)||h>+Math.max(i,o).toFixed(2)||v<+Math.min(t,n).toFixed(2)||v>+Math.max(t,n).toFixed(2)||v<+Math.min(a,s).toFixed(2)||v>+Math.max(a,s).toFixed(2)))return{x:f,y:d}}}},_c=function(r,t,e){return t>=r.x&&t<=r.x+r.width&&e>=r.y&&e<=r.y+r.height},n5=function(r,t,e,n,i){if(i)return[["M",+r+ +i,t],["l",e-i*2,0],["a",i,i,0,0,1,i,i],["l",0,n-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-e,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-n],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",r,t],["l",e,0],["l",0,n],["l",-e,0],["z"]];return a.parsePathArray=e5,a},LT=function(r,t,e,n){return r===null&&(r=t=e=n=0),t===null&&(t=r.y,e=r.width,n=r.height,r=r.x),{x:r,y:t,width:e,w:e,height:n,h:n,x2:r+e,y2:t+n,cx:r+e/2,cy:t+n/2,r1:Math.min(e,n)/2,r2:Math.max(e,n)/2,r0:Math.sqrt(e*e+n*n)/2,path:n5(r,t,e,n),vb:[r,t,e,n].join(" ")}},Cfe=function(r,t){return r=LT(r),t=LT(t),_c(t,r.x,r.y)||_c(t,r.x2,r.y)||_c(t,r.x,r.y2)||_c(t,r.x2,r.y2)||_c(r,t.x,t.y)||_c(r,t.x2,t.y)||_c(r,t.x,t.y2)||_c(r,t.x2,t.y2)||(r.x<t.x2&&r.x>t.x||t.x<r.x2&&t.x>r.x)&&(r.y<t.y2&&r.y>t.y||t.y<r.y2&&t.y>r.y)},i5=function(r,t,e,n,i,a,o,s){qe(r)||(r=[r,t,e,n,i,a,o,s]);var l=wfe.apply(null,r);return LT(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},a5=function(r,t,e,n,i,a,o,s,l){var u=1-l,c=Math.pow(u,3),f=Math.pow(u,2),d=l*l,h=d*l,v=c*r+f*3*l*e+u*3*l*l*i+h*o,p=c*t+f*3*l*n+u*3*l*l*a+h*s,g=r+2*l*(e-r)+d*(i-2*e+r),m=t+2*l*(n-t)+d*(a-2*n+t),y=e+2*l*(i-e)+d*(o-2*i+e),b=n+2*l*(a-n)+d*(s-2*a+n),x=u*r+l*e,w=u*t+l*n,S=u*i+l*o,C=u*a+l*s,_=90-Math.atan2(g-y,m-b)*180/Math.PI;return{x:v,y:p,m:{x:g,y:m},n:{x:y,y:b},start:{x,y:w},end:{x:S,y:C},alpha:_}},Efe=function(r,t,e){var n=i5(r),i=i5(t);if(!Cfe(n,i))return e?0:[];for(var a=r5.apply(0,r),o=r5.apply(0,t),s=~~(a/8),l=~~(o/8),u=[],c=[],f={},d=e?0:[],h=0;h<s+1;h++){var v=a5.apply(0,r.concat(h/s));u.push({x:v.x,y:v.y,t:h/s})}for(var h=0;h<l+1;h++){var v=a5.apply(0,t.concat(h/l));c.push({x:v.x,y:v.y,t:h/l})}for(var h=0;h<s;h++)for(var p=0;p<l;p++){var g=u[h],m=u[h+1],y=c[p],b=c[p+1],x=Math.abs(m.x-g.x)<.001?"y":"x",w=Math.abs(b.x-y.x)<.001?"y":"x",S=Sfe(g.x,g.y,m.x,m.y,y.x,y.y,b.x,b.y);if(S){if(f[S.x.toFixed(4)]===S.y.toFixed(4))continue;f[S.x.toFixed(4)]=S.y.toFixed(4);var C=g.t+Math.abs((S[x]-g[x])/(m[x]-g[x]))*(m.t-g.t),_=y.t+Math.abs((S[w]-y[w])/(b[w]-y[w]))*(b.t-y.t);C>=0&&C<=1&&_>=0&&_<=1&&(e?d+=1:d.push({x:S.x,y:S.y,t1:C,t2:_}))}}return d},_fe=function(r,t,e){r=OT(r),t=OT(t);for(var n,i,a,o,s,l,u,c,f,d,h=e?0:[],v=0,p=r.length;v<p;v++){var g=r[v];if(g[0]==="M")n=s=g[1],i=l=g[2];else{g[0]==="C"?(f=[n,i].concat(g.slice(1)),n=f[6],i=f[7]):(f=[n,i,n,i,s,l,s,l],n=s,i=l);for(var m=0,y=t.length;m<y;m++){var b=t[m];if(b[0]==="M")a=u=b[1],o=c=b[2];else{b[0]==="C"?(d=[a,o].concat(b.slice(1)),a=d[6],o=d[7]):(d=[a,o,a,o,u,c,u,c],a=u,o=c);var x=Efe(f,d,e);if(e)h+=x;else{for(var w=0,S=x.length;w<S;w++)x[w].segment1=v,x[w].segment2=m,x[w].bez1=f,x[w].bez2=d;h=h.concat(x)}}}}}return h},Tfe=function(r,t){return _fe(r,t)};function Afe(r,t){var e=[],n=[];function i(a,o){if(a.length===1)e.push(a[0]),n.push(a[0]);else{for(var s=[],l=0;l<a.length-1;l++)l===0&&e.push(a[0]),l===a.length-2&&n.push(a[l+1]),s[l]=[(1-o)*a[l][0]+o*a[l+1][0],(1-o)*a[l][1]+o*a[l+1][1]];i(s,o)}}return r.length&&i(r,t),{left:e,right:n.reverse()}}function Mfe(r,t,e){var n=[[r[1],r[2]]];e=e||2;var i=[];t[0]==="A"?(n.push(t[6]),n.push(t[7])):t[0]==="C"?(n.push([t[1],t[2]]),n.push([t[3],t[4]]),n.push([t[5],t[6]])):t[0]==="S"||t[0]==="Q"?(n.push([t[1],t[2]]),n.push([t[3],t[4]])):n.push([t[1],t[2]]);for(var a=n,o=1/e,s=0;s<e-1;s++){var l=o/(1-o*s),u=Afe(a,l);i.push(u.left),a=u.right}i.push(a);var c=i.map(function(f){var d=[];return f.length===4&&(d.push("C"),d=d.concat(f[2])),f.length>=3&&(f.length===3&&d.push("Q"),d=d.concat(f[1])),f.length===2&&d.push("L"),d=d.concat(f[f.length-1]),d});return c}var kfe=function(r,t,e){if(e===1)return[[].concat(r)];var n=[];if(t[0]==="L"||t[0]==="C"||t[0]==="Q")n=n.concat(Mfe(r,t,e));else{var i=[].concat(r);i[0]==="M"&&(i[0]="L");for(var a=0;a<=e-1;a++)n.push(i)}return n},Ife=function(r,t){if(r.length===1)return r;var e=r.length-1,n=t.length-1,i=e/n,a=[];if(r.length===1&&r[0][0]==="M"){for(var o=0;o<n-e;o++)r.push(r[0]);return r}for(var o=0;o<n;o++){var s=Math.floor(i*o);a[s]=(a[s]||0)+1}var l=a.reduce(function(u,c,f){return f===e?u.concat(r[e]):u.concat(kfe(r[f],r[f+1],c))},[]);return l.unshift(r[0]),(t[n]==="Z"||t[n]==="z")&&l.push("Z"),l},Pfe=function(r,t){if(r.length!==t.length)return!1;var e=!0;return G(r,function(n,i){if(n!==t[i])return e=!1,!1}),e};function Dfe(r,t,e){var n=null,i=e;return t<i&&(i=t,n="add"),r<i&&(i=r,n="del"),{type:n,min:i}}var Rfe=function(r,t){var e=r.length,n=t.length,i,a,o=0;if(e===0||n===0)return null;for(var s=[],l=0;l<=e;l++)s[l]=[],s[l][0]={min:l};for(var u=0;u<=n;u++)s[0][u]={min:u};for(var l=1;l<=e;l++){i=r[l-1];for(var u=1;u<=n;u++){a=t[u-1],Pfe(i,a)?o=0:o=1;var c=s[l-1][u].min+1,f=s[l][u-1].min+1,d=s[l-1][u-1].min+o;s[l][u]=Dfe(c,f,d)}}return s},o5=function(r,t){var e=Rfe(r,t),n=r.length,i=t.length,a=[],o=1,s=1;if(e[n][i].min!==n){for(var l=1;l<=n;l++){var u=e[l][l].min;s=l;for(var c=o;c<=i;c++)e[l][c].min<u&&(u=e[l][c].min,s=c);o=s,e[l][o].type&&a.push({index:l-1,type:e[l][o].type})}for(var l=a.length-1;l>=0;l--)o=a[l].index,a[l].type==="add"?r.splice(o,0,[].concat(r[o])):r.splice(o,1)}n=r.length;var f=i-n;if(n<i)for(var l=0;l<f;l++)r[n-1][0]==="z"||r[n-1][0]==="Z"?r.splice(n-2,0,r[n-2]):r.push(r[n-1]),n+=1;return r};function FT(r,t,e){for(var n=[].concat(r),i,a=1/(e+1),o=s5(t)[0],s=1;s<=e;s++)a*=s,i=Math.floor(r.length*a),i===0?n.unshift([o[0]*a+r[i][0]*(1-a),o[1]*a+r[i][1]*(1-a)]):n.splice(i,0,[o[0]*a+r[i][0]*(1-a),o[1]*a+r[i][1]*(1-a)]);return n}function s5(r){var t=[];switch(r[0]){case"M":t.push([r[1],r[2]]);break;case"L":t.push([r[1],r[2]]);break;case"A":t.push([r[6],r[7]]);break;case"Q":t.push([r[3],r[4]]),t.push([r[1],r[2]]);break;case"T":t.push([r[1],r[2]]);break;case"C":t.push([r[5],r[6]]),t.push([r[1],r[2]]),t.push([r[3],r[4]]);break;case"S":t.push([r[3],r[4]]),t.push([r[1],r[2]]);break;case"H":t.push([r[1],r[1]]);break;case"V":t.push([r[1],r[1]]);break}return t}var NT=function(r,t){if(r.length<=1)return r;for(var e,n=0;n<t.length;n++)if(r[n][0]!==t[n][0])switch(e=s5(r[n]),t[n][0]){case"M":r[n]=["M"].concat(e[0]);break;case"L":r[n]=["L"].concat(e[0]);break;case"A":r[n]=[].concat(t[n]),r[n][6]=e[0][0],r[n][7]=e[0][1];break;case"Q":if(e.length<2)if(n>0)e=FT(e,r[n-1],1);else{r[n]=t[n];break}r[n]=["Q"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;case"T":r[n]=["T"].concat(e[0]);break;case"C":if(e.length<3)if(n>0)e=FT(e,r[n-1],2);else{r[n]=t[n];break}r[n]=["C"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;case"S":if(e.length<2)if(n>0)e=FT(e,r[n-1],1);else{r[n]=t[n];break}r[n]=["S"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;default:r[n]=t[n]}return r},BT=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",catmullRomToBezier:DT,fillPath:Ife,fillPathByDiff:o5,formatPath:NT,intersection:Tfe,parsePathArray:e5,parsePathString:kv,pathToAbsolute:RT,pathToCurve:OT,rectPath:n5}),Tm=function(){function r(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return r.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},r.prototype.stopPropagation=function(){this.propagationStopped=!0},r.prototype.toString=function(){var t=this.type;return"[Event (type="+t+")]"},r.prototype.save=function(){},r.prototype.restore=function(){},r}();function l5(r,t){var e=r.indexOf(t);e!==-1&&r.splice(e,1)}var u5=typeof window!="undefined"&&typeof window.document!="undefined";function c5(r,t){if(r.isCanvas())return!0;for(var e=t.getParent(),n=!1;e;){if(e===r){n=!0;break}e=e.getParent()}return n}function Am(r){return r.cfg.visible&&r.cfg.capture}var $T=function(r){Te(t,r);function t(e){var n=r.call(this)||this;n.destroyed=!1;var i=n.getDefaultCfg();return n.cfg=$t(i,e),n}return t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,n){this.cfg[e]=n},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t}(fm),f5=globalThis&&globalThis.__spreadArray||function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return r.concat(a||Array.prototype.slice.call(t))},Ofe=function(){function r(t,e,n){this.name=t,this.version=e,this.os=n,this.type="browser"}return r}(),Lfe=function(){function r(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return r}(),Ffe=function(){function r(t,e,n,i){this.name=t,this.version=e,this.os=n,this.bot=i,this.type="bot-device"}return r}(),Nfe=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}(),Bfe=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}(),$fe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,zfe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,d5=3,Gfe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",$fe]],h5=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function zT(r){return r?v5(r):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new Bfe:typeof navigator!="undefined"?v5(navigator.userAgent):Hfe()}function Ufe(r){return r!==""&&Gfe.reduce(function(t,e){var n=e[0],i=e[1];if(t)return t;var a=i.exec(r);return!!a&&[n,a]},!1)}function v5(r){var t=Ufe(r);if(!t)return null;var e=t[0],n=t[1];if(e==="searchbot")return new Nfe;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<d5&&(i=f5(f5([],i,!0),Wfe(d5-i.length),!0)):i=[];var a=i.join("."),o=Vfe(r),s=zfe.exec(r);return s&&s[1]?new Ffe(e,a,o,s[1]):new Ofe(e,a,o)}function Vfe(r){for(var t=0,e=h5.length;t<e;t++){var n=h5[t],i=n[0],a=n[1],o=a.exec(r);if(o)return i}return null}function Hfe(){var r=typeof process!="undefined"&&process.version;return r?new Lfe(process.version.slice(1)):null}function Wfe(r){for(var t=[],e=0;e<r;e++)t.push("0");return t}function p5(r,t){var e=[],n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],l=r[5],u=r[6],c=r[7],f=r[8],d=t[0],h=t[1],v=t[2],p=t[3],g=t[4],m=t[5],y=t[6],b=t[7],x=t[8];return e[0]=d*n+h*o+v*u,e[1]=d*i+h*s+v*c,e[2]=d*a+h*l+v*f,e[3]=p*n+g*o+m*u,e[4]=p*i+g*s+m*c,e[5]=p*a+g*l+m*f,e[6]=y*n+b*o+x*u,e[7]=y*i+b*s+x*c,e[8]=y*a+b*l+x*f,e}function wu(r,t){var e=[],n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function h1(r){var t=[],e=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],l=r[6],u=r[7],c=r[8],f=c*o-s*u,d=-c*a+s*l,h=u*a-o*l,v=e*f+n*d+i*h;return v?(v=1/v,t[0]=f*v,t[1]=(-c*n+i*u)*v,t[2]=(s*n-i*o)*v,t[3]=d*v,t[4]=(c*e-i*l)*v,t[5]=(-s*e+i*a)*v,t[6]=h*v,t[7]=(-u*e+n*l)*v,t[8]=(o*e-n*a)*v,t):null}var Mm=Un,GT="matrix",jfe=["zIndex","capture","visible","type"],Yfe=["repeat"],Xfe=":",qfe="*";function Kfe(r){for(var t=[],e=0;e<r.length;e++)qe(r[e])?t.push([].concat(r[e])):t.push(r[e]);return t}function Zfe(r,t){var e={},n=t.attrs;for(var i in r)e[i]=n[i];return e}function Qfe(r,t){var e={},n=t.attr();return G(r,function(i,a){Yfe.indexOf(a)===-1&&!ri(n[a],i)&&(e[a]=i)}),e}function Jfe(r,t){if(t.onFrame)return r;var e=t.startTime,n=t.delay,i=t.duration,a=Object.prototype.hasOwnProperty;return G(r,function(o){e+n<o.startTime+o.delay+o.duration&&i>o.delay&&G(t.toAttrs,function(s,l){a.call(o.toAttrs,l)&&(delete o.toAttrs[l],delete o.fromAttrs[l])})}),r}var g5=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;n.attrs={};var i=n.getDefaultAttrs();return $t(i,e.attrs),n.attrs=i,n.initAttrs(i),n.initAnimate(),n}return t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get("parent")},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.attr=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=n[0],o=n[1];if(!a)return this.attrs;if(Kr(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return n.length===2?(this.setAttr(a,o),this.afterAttrsChange((e={},e[a]=o,e)),this):this.attrs[a]},t.prototype.isClipped=function(e,n){var i=this.getClip();return i&&!i.isHit(e,n)},t.prototype.setAttr=function(e,n){var i=this.attrs[e];i!==n&&(this.attrs[e]=n,this.onAttrChange(e,n,i))},t.prototype.onAttrChange=function(e,n,i){e==="matrix"&&this.set("totalMatrix",null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var n=this.cfg.applyTo;n&&n.onCanvasChange("clip")}else this.onCanvasChange("attr")},t.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},t.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},t.prototype.setZIndex=function(e){this.set("zIndex",e);var n=this.getParent();return n&&n.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(!!e){var n=e.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.push(this),this.onCanvasChange("zIndex")}},t.prototype.toBack=function(){var e=this.getParent();if(!!e){var n=e.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.unshift(this),this.onCanvasChange("zIndex")}},t.prototype.remove=function(e){e===void 0&&(e=!0);var n=this.getParent();n?(l5(n.getChildren(),this),n.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr(GT,this.getDefaultMatrix()),this.onCanvasChange("matrix")},t.prototype.getMatrix=function(){return this.attr(GT)},t.prototype.setMatrix=function(e){this.attr(GT,e),this.onCanvasChange("matrix")},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var n=this.attr("matrix"),i=this.cfg.parentMatrix;i&&n?e=p5(i,n):e=n||i,this.set("totalMatrix",e)}return e},t.prototype.applyMatrix=function(e){var n=this.attr("matrix"),i=null;e&&n?i=p5(e,n):i=n||e,this.set("totalMatrix",i),this.set("parentMatrix",e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var n=this.attr("matrix");return n?wu(n,e):e},t.prototype.invertFromMatrix=function(e){var n=this.attr("matrix");if(n){var i=h1(n);if(i)return wu(i,e)}return e},t.prototype.setClip=function(e){var n=this.getCanvas(),i=null;if(e){var a=this.getShapeBase(),o=rs(e.type),s=a[o];s&&(i=new s({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:n}))}return this.set("clipShape",i),this.onCanvasChange("clip"),i},t.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},t.prototype.clone=function(){var e=this,n=this.attrs,i={};G(n,function(s,l){qe(n[l])?i[l]=Kfe(n[l]):i[l]=n[l]});var a=this.constructor,o=new a({attrs:i});return G(jfe,function(s){o.set(s,e.get(s))}),o},t.prototype.destroy=function(){var e=this.destroyed;e||(this.attrs={},r.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},t.prototype.animate=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var i=this.get("timeline");i||(i=this.get("canvas").get("timeline"),this.set("timeline",i));var a=this.get("animations")||[];i.timer||i.initTimer();var o=e[0],s=e[1],l=e[2],u=l===void 0?"easeLinear":l,c=e[3],f=c===void 0?ns:c,d=e[4],h=d===void 0?0:d,v,p,g,m,y;Vt(o)?(v=o,o={}):Kr(o)&&o.onFrame&&(v=o.onFrame,p=o.repeat),Kr(s)?(y=s,s=y.duration,u=y.easing||"easeLinear",h=y.delay||0,p=y.repeat||p||!1,f=y.callback||ns,g=y.pauseCallback||ns,m=y.resumeCallback||ns):(Rt(f)&&(h=f,f=null),Vt(u)?(f=u,u="easeLinear"):u=u||"easeLinear");var b=Qfe(o,this),x={fromAttrs:Zfe(b,this),toAttrs:b,duration:s,easing:u,repeat:p,callback:f,pauseCallback:g,resumeCallback:m,delay:h,startTime:i.getTime(),id:Ms(),onFrame:v,pathFormatted:!1};a.length>0?a=Jfe(a,x):i.addAnimator(this),a.push(x),this.set("animations",a),this.set("_pause",{isPaused:!1})}},t.prototype.stopAnimate=function(e){var n=this;e===void 0&&(e=!0);var i=this.get("animations");G(i,function(a){e&&(a.onFrame?n.attr(a.onFrame(1)):n.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},t.prototype.pauseAnimate=function(){var e=this.get("timeline"),n=this.get("animations"),i=e.getTime();return G(n,function(a){a._paused=!0,a._pauseTime=i,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:i}),this},t.prototype.resumeAnimate=function(){var e=this.get("timeline"),n=e.getTime(),i=this.get("animations"),a=this.get("_pause").pauseTime;return G(i,function(o){o.startTime=o.startTime+(n-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",i),this},t.prototype.emitDelegation=function(e,n){var i=this,a=n.propagationPath;this.getEvents();var o;e==="mouseenter"?o=n.fromShape:e==="mouseleave"&&(o=n.toShape);for(var s=function(f){var d=a[f],h=d.get("name");if(h){if((d.isGroup()||d.isCanvas&&d.isCanvas())&&o&&c5(d,o))return"break";qe(h)?G(h,function(v){i.emitDelegateEvent(d,v,n)}):l.emitDelegateEvent(d,h,n)}},l=this,u=0;u<a.length;u++){var c=s(u);if(c==="break")break}},t.prototype.emitDelegateEvent=function(e,n,i){var a=this.getEvents(),o=n+Xfe+i.type;(a[o]||a[qfe])&&(i.name=o,i.currentTarget=e,i.delegateTarget=this,i.delegateObject=e.get("delegateObject"),this.emit(o,i))},t.prototype.translate=function(e,n){e===void 0&&(e=0),n===void 0&&(n=0);var i=this.getMatrix(),a=Mm(i,[["t",e,n]]);return this.setMatrix(a),this},t.prototype.move=function(e,n){var i=this.attr("x")||0,a=this.attr("y")||0;return this.translate(e-i,n-a),this},t.prototype.moveTo=function(e,n){return this.move(e,n)},t.prototype.scale=function(e,n){var i=this.getMatrix(),a=Mm(i,[["s",e,n||e]]);return this.setMatrix(a),this},t.prototype.rotate=function(e){var n=this.getMatrix(),i=Mm(n,[["r",e]]);return this.setMatrix(i),this},t.prototype.rotateAtStart=function(e){var n=this.attr(),i=n.x,a=n.y,o=this.getMatrix(),s=Mm(o,[["t",-i,-a],["r",e],["t",i,a]]);return this.setMatrix(s),this},t.prototype.rotateAtPoint=function(e,n,i){var a=this.getMatrix(),o=Mm(a,[["t",-e,-n],["r",i],["t",e,n]]);return this.setMatrix(o),this},t}($T),m5={},UT="_INDEX";function y5(r,t){if(r.set("canvas",t),r.isGroup()){var e=r.get("children");e.length&&e.forEach(function(n){y5(n,t)})}}function b5(r,t){if(r.set("timeline",t),r.isGroup()){var e=r.get("children");e.length&&e.forEach(function(n){b5(n,t)})}}function ede(r,t,e){e===void 0&&(e=!0),e?t.destroy():(t.set("parent",null),t.set("canvas",null)),l5(r.getChildren(),t)}function tde(r){return function(t,e){var n=r(t,e);return n===0?t[UT]-e[UT]:n}}var x5=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,n=-1/0,i=1/0,a=-1/0,o=[],s=[],l=this.getChildren().filter(function(c){return c.get("visible")&&(!c.isGroup()||c.isGroup()&&c.getChildren().length>0)});l.length>0?(G(l,function(c){var f=c.getBBox();o.push(f.minX,f.maxX),s.push(f.minY,f.maxY)}),e=ia(o),n=ji(o),i=ia(s),a=ji(s)):(e=0,n=0,i=0,a=0);var u={x:e,y:i,minX:e,minY:i,maxX:n,maxY:a,width:n-e,height:a-i};return u},t.prototype.getCanvasBBox=function(){var e=1/0,n=-1/0,i=1/0,a=-1/0,o=[],s=[],l=this.getChildren().filter(function(c){return c.get("visible")&&(!c.isGroup()||c.isGroup()&&c.getChildren().length>0)});l.length>0?(G(l,function(c){var f=c.getCanvasBBox();o.push(f.minX,f.maxX),s.push(f.minY,f.maxY)}),e=ia(o),n=ji(o),i=ia(s),a=ji(s)):(e=0,n=0,i=0,a=0);var u={x:e,y:i,minX:e,minY:i,maxX:n,maxY:a,width:n-e,height:a-i};return u},t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return e.children=[],e},t.prototype.onAttrChange=function(e,n,i){if(r.prototype.onAttrChange.call(this,e,n,i),e==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},t.prototype.applyMatrix=function(e){var n=this.getTotalMatrix();r.prototype.applyMatrix.call(this,e);var i=this.getTotalMatrix();i!==n&&this._applyChildrenMarix(i)},t.prototype._applyChildrenMarix=function(e){var n=this.getChildren();G(n,function(i){i.applyMatrix(e)})},t.prototype.addShape=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0],a=e[1];Kr(i)?a=i:a.type=i;var o=m5[a.type];o||(o=rs(a.type),m5[a.type]=o);var s=this.getShapeBase(),l=new s[o](a);return this.add(l),l},t.prototype.addGroup=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0],a=e[1],o;if(Vt(i))a?o=new i(a):o=new i({parent:this});else{var s=i||{},l=this.getGroupBase();o=new l(s)}return this.add(o),o},t.prototype.getCanvas=function(){var e;return this.isCanvas()?e=this:e=this.get("canvas"),e},t.prototype.getShape=function(e,n,i){if(!Am(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,e,n,i);else{var s=[e,n,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],i))}return o},t.prototype._findShape=function(e,n,i,a){for(var o=null,s=e.length-1;s>=0;s--){var l=e[s];if(Am(l)&&(l.isGroup()?o=l.getShape(n,i,a):l.isHit(n,i)&&(o=l)),o)break}return o},t.prototype.add=function(e){var n=this.getCanvas(),i=this.getChildren(),a=this.get("timeline"),o=e.getParent();o&&ede(o,e,!1),e.set("parent",this),n&&y5(e,n),a&&b5(e,a),i.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var n=this.getTotalMatrix();n&&e.applyMatrix(n)},t.prototype.getChildren=function(){return this.get("children")},t.prototype.sort=function(){var e=this.getChildren();G(e,function(n,i){return n[UT]=i,n}),e.sort(tde(function(n,i){return n.get("zIndex")-i.get("zIndex")})),this.onCanvasChange("sort")},t.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),n=e.length-1;n>=0;n--)e[n].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},t.prototype.destroy=function(){this.get("destroyed")||(this.clear(),r.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){var n=this.getChildren();return n[e]},t.prototype.getCount=function(){var e=this.getChildren();return e.length},t.prototype.contain=function(e){var n=this.getChildren();return n.indexOf(e)>-1},t.prototype.removeChild=function(e,n){n===void 0&&(n=!0),this.contain(e)&&e.remove(n)},t.prototype.findAll=function(e){var n=[],i=this.getChildren();return G(i,function(a){e(a)&&n.push(a),a.isGroup()&&(n=n.concat(a.findAll(e)))}),n},t.prototype.find=function(e){var n=null,i=this.getChildren();return G(i,function(a){if(e(a)?n=a:a.isGroup()&&(n=a.find(e)),n)return!1}),n},t.prototype.findById=function(e){return this.find(function(n){return n.get("id")===e})},t.prototype.findByClassName=function(e){return this.find(function(n){return n.get("className")===e})},t.prototype.findAllByName=function(e){return this.findAll(function(n){return n.get("name")===e})},t}(g5),Iv=0,km=0,Im=0,w5=1e3,v1,Pm,p1=0,sd=0,g1=0,Dm=typeof performance=="object"&&performance.now?performance:Date,S5=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function C5(){return sd||(S5(rde),sd=Dm.now()+g1)}function rde(){sd=0}function VT(){this._call=this._time=this._next=null}VT.prototype=HT.prototype={constructor:VT,restart:function(r,t,e){if(typeof r!="function")throw new TypeError("callback is not a function");e=(e==null?C5():+e)+(t==null?0:+t),!this._next&&Pm!==this&&(Pm?Pm._next=this:v1=this,Pm=this),this._call=r,this._time=e,WT()},stop:function(){this._call&&(this._call=null,this._time=1/0,WT())}};function HT(r,t,e){var n=new VT;return n.restart(r,t,e),n}function nde(){C5(),++Iv;for(var r=v1,t;r;)(t=sd-r._time)>=0&&r._call.call(null,t),r=r._next;--Iv}function E5(){sd=(p1=Dm.now())+g1,Iv=km=0;try{nde()}finally{Iv=0,ade(),sd=0}}function ide(){var r=Dm.now(),t=r-p1;t>w5&&(g1-=t,p1=r)}function ade(){for(var r,t=v1,e,n=1/0;t;)t._call?(n>t._time&&(n=t._time),r=t,t=t._next):(e=t._next,t._next=null,t=r?r._next=e:v1=e);Pm=r,WT(n)}function WT(r){if(!Iv){km&&(km=clearTimeout(km));var t=r-sd;t>24?(r<1/0&&(km=setTimeout(E5,r-Dm.now()-g1)),Im&&(Im=clearInterval(Im))):(Im||(p1=Dm.now(),Im=setInterval(ide,w5)),Iv=1,S5(E5))}}function ode(r){return+r}function sde(r){return r*r}function lde(r){return r*(2-r)}function _5(r){return((r*=2)<=1?r*r:--r*(2-r)+1)/2}function ude(r){return r*r*r}function cde(r){return--r*r*r+1}function T5(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}var jT=3,fde=function r(t){t=+t;function e(n){return Math.pow(n,t)}return e.exponent=r,e}(jT),dde=function r(t){t=+t;function e(n){return 1-Math.pow(1-n,t)}return e.exponent=r,e}(jT),A5=function r(t){t=+t;function e(n){return((n*=2)<=1?Math.pow(n,t):2-Math.pow(2-n,t))/2}return e.exponent=r,e}(jT),M5=Math.PI,k5=M5/2;function hde(r){return+r==1?1:1-Math.cos(r*k5)}function vde(r){return Math.sin(r*k5)}function I5(r){return(1-Math.cos(M5*r))/2}function Tc(r){return(Math.pow(2,-10*r)-.0009765625)*1.0009775171065494}function pde(r){return Tc(1-+r)}function gde(r){return 1-Tc(r)}function P5(r){return((r*=2)<=1?Tc(1-r):2-Tc(r-1))/2}function mde(r){return 1-Math.sqrt(1-r*r)}function yde(r){return Math.sqrt(1- --r*r)}function D5(r){return((r*=2)<=1?1-Math.sqrt(1-r*r):Math.sqrt(1-(r-=2)*r)+1)/2}var YT=4/11,bde=6/11,xde=8/11,wde=3/4,Sde=9/11,Cde=10/11,Ede=15/16,_de=21/22,Tde=63/64,m1=1/YT/YT;function Ade(r){return 1-Rm(1-r)}function Rm(r){return(r=+r)<YT?m1*r*r:r<xde?m1*(r-=bde)*r+wde:r<Cde?m1*(r-=Sde)*r+Ede:m1*(r-=_de)*r+Tde}function Mde(r){return((r*=2)<=1?1-Rm(1-r):Rm(r-1)+1)/2}var XT=1.70158,kde=function r(t){t=+t;function e(n){return(n=+n)*n*(t*(n-1)+n)}return e.overshoot=r,e}(XT),Ide=function r(t){t=+t;function e(n){return--n*n*((n+1)*t+n)+1}return e.overshoot=r,e}(XT),R5=function r(t){t=+t;function e(n){return((n*=2)<1?n*n*((t+1)*n-t):(n-=2)*n*((t+1)*n+t)+2)/2}return e.overshoot=r,e}(XT),Pv=2*Math.PI,qT=1,KT=.3,Pde=function r(t,e){var n=Math.asin(1/(t=Math.max(1,t)))*(e/=Pv);function i(a){return t*Tc(- --a)*Math.sin((n-a)/e)}return i.amplitude=function(a){return r(a,e*Pv)},i.period=function(a){return r(t,a)},i}(qT,KT),O5=function r(t,e){var n=Math.asin(1/(t=Math.max(1,t)))*(e/=Pv);function i(a){return 1-t*Tc(a=+a)*Math.sin((a+n)/e)}return i.amplitude=function(a){return r(a,e*Pv)},i.period=function(a){return r(t,a)},i}(qT,KT),Dde=function r(t,e){var n=Math.asin(1/(t=Math.max(1,t)))*(e/=Pv);function i(a){return((a=a*2-1)<0?t*Tc(-a)*Math.sin((n-a)/e):2-t*Tc(a)*Math.sin((n+a)/e))/2}return i.amplitude=function(a){return r(a,e*Pv)},i.period=function(a){return r(t,a)},i}(qT,KT),y1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",easeLinear:ode,easeQuad:_5,easeQuadIn:sde,easeQuadOut:lde,easeQuadInOut:_5,easeCubic:T5,easeCubicIn:ude,easeCubicOut:cde,easeCubicInOut:T5,easePoly:A5,easePolyIn:fde,easePolyOut:dde,easePolyInOut:A5,easeSin:I5,easeSinIn:hde,easeSinOut:vde,easeSinInOut:I5,easeExp:P5,easeExpIn:pde,easeExpOut:gde,easeExpInOut:P5,easeCircle:D5,easeCircleIn:mde,easeCircleOut:yde,easeCircleInOut:D5,easeBounce:Rm,easeBounceIn:Ade,easeBounceOut:Rm,easeBounceInOut:Mde,easeBack:R5,easeBackIn:kde,easeBackOut:Ide,easeBackInOut:R5,easeElastic:O5,easeElasticIn:Pde,easeElasticOut:O5,easeElasticInOut:Dde});function ZT(r,t,e){r.prototype=t.prototype=e,e.constructor=r}function L5(r,t){var e=Object.create(r.prototype);for(var n in t)e[n]=t[n];return e}function Om(){}var Lm=.7,b1=1/Lm,Dv="\\s*([+-]?\\d+)\\s*",Fm="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Dl="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Rde=/^#([0-9a-f]{3,8})$/,Ode=new RegExp("^rgb\\("+[Dv,Dv,Dv]+"\\)$"),Lde=new RegExp("^rgb\\("+[Dl,Dl,Dl]+"\\)$"),Fde=new RegExp("^rgba\\("+[Dv,Dv,Dv,Fm]+"\\)$"),Nde=new RegExp("^rgba\\("+[Dl,Dl,Dl,Fm]+"\\)$"),Bde=new RegExp("^hsl\\("+[Fm,Dl,Dl]+"\\)$"),$de=new RegExp("^hsla\\("+[Fm,Dl,Dl,Fm]+"\\)$"),F5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ZT(Om,Nm,{copy:function(r){return Object.assign(new this.constructor,this,r)},displayable:function(){return this.rgb().displayable()},hex:N5,formatHex:N5,formatHsl:zde,formatRgb:B5,toString:B5});function N5(){return this.rgb().formatHex()}function zde(){return V5(this).formatHsl()}function B5(){return this.rgb().formatRgb()}function Nm(r){var t,e;return r=(r+"").trim().toLowerCase(),(t=Rde.exec(r))?(e=t[1].length,t=parseInt(t[1],16),e===6?$5(t):e===3?new ss(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?x1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?x1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ode.exec(r))?new ss(t[1],t[2],t[3],1):(t=Lde.exec(r))?new ss(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Fde.exec(r))?x1(t[1],t[2],t[3],t[4]):(t=Nde.exec(r))?x1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Bde.exec(r))?U5(t[1],t[2]/100,t[3]/100,1):(t=$de.exec(r))?U5(t[1],t[2]/100,t[3]/100,t[4]):F5.hasOwnProperty(r)?$5(F5[r]):r==="transparent"?new ss(NaN,NaN,NaN,0):null}function $5(r){return new ss(r>>16&255,r>>8&255,r&255,1)}function x1(r,t,e,n){return n<=0&&(r=t=e=NaN),new ss(r,t,e,n)}function Gde(r){return r instanceof Om||(r=Nm(r)),r?(r=r.rgb(),new ss(r.r,r.g,r.b,r.opacity)):new ss}function QT(r,t,e,n){return arguments.length===1?Gde(r):new ss(r,t,e,n==null?1:n)}function ss(r,t,e,n){this.r=+r,this.g=+t,this.b=+e,this.opacity=+n}ZT(ss,QT,L5(Om,{brighter:function(r){return r=r==null?b1:Math.pow(b1,r),new ss(this.r*r,this.g*r,this.b*r,this.opacity)},darker:function(r){return r=r==null?Lm:Math.pow(Lm,r),new ss(this.r*r,this.g*r,this.b*r,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:z5,formatHex:z5,formatRgb:G5,toString:G5}));function z5(){return"#"+JT(this.r)+JT(this.g)+JT(this.b)}function G5(){var r=this.opacity;return r=isNaN(r)?1:Math.max(0,Math.min(1,r)),(r===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(r===1?")":", "+r+")")}function JT(r){return r=Math.max(0,Math.min(255,Math.round(r)||0)),(r<16?"0":"")+r.toString(16)}function U5(r,t,e,n){return n<=0?r=t=e=NaN:e<=0||e>=1?r=t=NaN:t<=0&&(r=NaN),new Rl(r,t,e,n)}function V5(r){if(r instanceof Rl)return new Rl(r.h,r.s,r.l,r.opacity);if(r instanceof Om||(r=Nm(r)),!r)return new Rl;if(r instanceof Rl)return r;r=r.rgb();var t=r.r/255,e=r.g/255,n=r.b/255,i=Math.min(t,e,n),a=Math.max(t,e,n),o=NaN,s=a-i,l=(a+i)/2;return s?(t===a?o=(e-n)/s+(e<n)*6:e===a?o=(n-t)/s+2:o=(t-e)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Rl(o,s,l,r.opacity)}function Ude(r,t,e,n){return arguments.length===1?V5(r):new Rl(r,t,e,n==null?1:n)}function Rl(r,t,e,n){this.h=+r,this.s=+t,this.l=+e,this.opacity=+n}ZT(Rl,Ude,L5(Om,{brighter:function(r){return r=r==null?b1:Math.pow(b1,r),new Rl(this.h,this.s,this.l*r,this.opacity)},darker:function(r){return r=r==null?Lm:Math.pow(Lm,r),new Rl(this.h,this.s,this.l*r,this.opacity)},rgb:function(){var r=this.h%360+(this.h<0)*360,t=isNaN(r)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*t,i=2*e-n;return new ss(eA(r>=240?r-240:r+120,i,n),eA(r,i,n),eA(r<120?r+240:r-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var r=this.opacity;return r=isNaN(r)?1:Math.max(0,Math.min(1,r)),(r===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(r===1?")":", "+r+")")}}));function eA(r,t,e){return(r<60?t+(e-t)*r/60:r<180?e:r<240?t+(e-t)*(240-r)/60:t)*255}function tA(r){return function(){return r}}function Vde(r,t){return function(e){return r+e*t}}function Hde(r,t,e){return r=Math.pow(r,e),t=Math.pow(t,e)-r,e=1/e,function(n){return Math.pow(r+n*t,e)}}function Wde(r){return(r=+r)==1?H5:function(t,e){return e-t?Hde(t,e,r):tA(isNaN(t)?e:t)}}function H5(r,t){var e=t-r;return e?Vde(r,e):tA(isNaN(r)?t:r)}var W5=function r(t){var e=Wde(t);function n(i,a){var o=e((i=QT(i)).r,(a=QT(a)).r),s=e(i.g,a.g),l=e(i.b,a.b),u=H5(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return n.gamma=r,n}(1);function j5(r,t){t||(t=[]);var e=r?Math.min(t.length,r.length):0,n=t.slice(),i;return function(a){for(i=0;i<e;++i)n[i]=r[i]*(1-a)+t[i]*a;return n}}function Y5(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function X5(r,t){return(Y5(t)?j5:q5)(r,t)}function q5(r,t){var e=t?t.length:0,n=r?Math.min(e,r.length):0,i=new Array(n),a=new Array(e),o;for(o=0;o<n;++o)i[o]=Rv(r[o],t[o]);for(;o<e;++o)a[o]=t[o];return function(s){for(o=0;o<n;++o)a[o]=i[o](s);return a}}function jde(r,t){var e=new Date;return r=+r,t=+t,function(n){return e.setTime(r*(1-n)+t*n),e}}function rA(r,t){return r=+r,t=+t,function(e){return r*(1-e)+t*e}}function Yde(r,t){var e={},n={},i;(r===null||typeof r!="object")&&(r={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in r?e[i]=Rv(r[i],t[i]):n[i]=t[i];return function(a){for(i in e)n[i]=e[i](a);return n}}var nA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,iA=new RegExp(nA.source,"g");function Xde(r){return function(){return r}}function qde(r){return function(t){return r(t)+""}}function Kde(r,t){var e=nA.lastIndex=iA.lastIndex=0,n,i,a,o=-1,s=[],l=[];for(r=r+"",t=t+"";(n=nA.exec(r))&&(i=iA.exec(t));)(a=i.index)>e&&(a=t.slice(e,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:rA(n,i)})),e=iA.lastIndex;return e<t.length&&(a=t.slice(e),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?qde(l[0].x):Xde(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function Rv(r,t){var e=typeof t,n;return t==null||e==="boolean"?tA(t):(e==="number"?rA:e==="string"?(n=Nm(t))?(t=n,W5):Kde:t instanceof Nm?W5:t instanceof Date?jde:Y5(t)?j5:Array.isArray(t)?q5:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Yde:rA)(r,t)}var Zde=function(r){return["fill","stroke","fillStyle","strokeStyle"].includes(r)},Qde=function(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)},K5=[1,0,0,0,1,0,0,0,1];function Jde(r,t,e){var n={},i=t.fromAttrs,a=t.toAttrs;if(!r.destroyed){var o;for(var s in a)if(!ri(i[s],a[s]))if(s==="path"){var l=a[s],u=i[s];l.length>u.length?(l=kv(a[s]),u=kv(i[s]),u=o5(u,l),u=NT(u,l),t.fromAttrs.path=u,t.toAttrs.path=l):t.pathFormatted||(l=kv(a[s]),u=kv(i[s]),u=NT(u,l),t.fromAttrs.path=u,t.toAttrs.path=l,t.pathFormatted=!0),n[s]=[];for(var c=0;c<l.length;c++){for(var f=l[c],d=u[c],h=[],v=0;v<f.length;v++)Rt(f[v])&&d&&Rt(d[v])?(o=Rv(d[v],f[v]),h.push(o(e))):h.push(f[v]);n[s].push(h)}}else if(s==="matrix"){var p=X5(i[s]||K5,a[s]||K5),g=p(e);n[s]=g}else Zde(s)&&Qde(a[s])?n[s]=a[s]:Vt(a[s])||(o=Rv(i[s],a[s]),n[s]=o(e));r.attr(n)}}function ehe(r,t,e){var n=t.startTime,i=t.delay;if(e<n+i||t._paused)return!1;var a,o=t.duration,s=t.easing;if(e=e-n-t.delay,t.repeat)a=e%o/o,a=y1[s](a);else if(a=e/o,a<1)a=y1[s](a);else return t.onFrame?r.attr(t.onFrame(1)):r.attr(t.toAttrs),!0;if(t.onFrame){var l=t.onFrame(a);r.attr(l)}else Jde(r,t,a);return!1}var the=function(){function r(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return r.prototype.initTimer=function(){var t=this,e=!1,n,i,a;this.timer=HT(function(o){if(t.current=o,t.animators.length>0){for(var s=t.animators.length-1;s>=0;s--){if(n=t.animators[s],n.destroyed){t.removeAnimator(s);continue}if(!n.isAnimatePaused()){i=n.get("animations");for(var l=i.length-1;l>=0;l--)a=i[l],e=ehe(n,a,o),e&&(i.splice(l,1),e=!1,a.callback&&a.callback())}i.length===0&&t.removeAnimator(s)}var u=t.canvas.get("autoDraw");u||t.canvas.draw()}})},r.prototype.addAnimator=function(t){this.animators.push(t)},r.prototype.removeAnimator=function(t){this.animators.splice(t,1)},r.prototype.isAnimating=function(){return!!this.animators.length},r.prototype.stop=function(){this.timer&&this.timer.stop()},r.prototype.stopAllAnimations=function(t){t===void 0&&(t=!0),this.animators.forEach(function(e){e.stopAnimate(t)}),this.animators=[],this.canvas.draw()},r.prototype.getTime=function(){return this.current},r}(),rhe=40,Z5=0,Q5=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function J5(r,t,e){e.name=t,e.target=r,e.currentTarget=r,e.delegateTarget=r,r.emit(t,e)}function nhe(r,t,e){if(e.bubbles){var n=void 0,i=!1;if(t==="mouseenter"?(n=e.fromShape,i=!0):t==="mouseleave"&&(i=!0,n=e.toShape),r.isCanvas()&&i)return;if(n&&c5(r,n)){e.bubbles=!1;return}e.name=t,e.currentTarget=r,e.delegateTarget=r,r.emit(t,e)}}var ihe=function(){function r(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(n){var i=n.type;e._triggerEvent(i,n)},this._onDocumentMove=function(n){var i=e.canvas,a=i.get("el");if(a!==n.target&&(e.dragging||e.currentShape)){var o=e._getPointInfo(n);e.dragging&&e._emitEvent("drag",n,o,e.draggingShape)}},this._onDocumentMouseUp=function(n){var i=e.canvas,a=i.get("el");if(a!==n.target&&e.dragging){var o=e._getPointInfo(n);e.draggingShape&&e._emitEvent("drop",n,o,null),e._emitEvent("dragend",n,o,e.draggingShape),e._afterDrag(e.draggingShape,o,n)}},this.canvas=t.canvas}return r.prototype.init=function(){this._bindEvents()},r.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");G(Q5,function(n){e.addEventListener(n,t._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");G(Q5,function(n){e.removeEventListener(n,t._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._getEventObj=function(t,e,n,i,a,o){var s=new Tm(t,e);return s.fromShape=a,s.toShape=o,s.x=n.x,s.y=n.y,s.clientX=n.clientX,s.clientY=n.clientY,s.propagationPath.push(i),s},r.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},r.prototype._getPointInfo=function(t){var e=this.canvas,n=e.getClientByEvent(t),i=e.getPointByEvent(t);return{x:i.x,y:i.y,clientX:n.x,clientY:n.y}},r.prototype._triggerEvent=function(t,e){var n=this._getPointInfo(e),i=this._getShape(n,e),a=this["_on"+t],o=!1;if(a)a.call(this,n,i,e);else{var s=this.currentShape;t==="mouseenter"||t==="dragenter"||t==="mouseover"?(this._emitEvent(t,e,n,null,null,i),i&&this._emitEvent(t,e,n,i,null,i),t==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):t==="mouseleave"||t==="dragleave"||t==="mouseout"?(o=!0,s&&this._emitEvent(t,e,n,s,s,null),this._emitEvent(t,e,n,null,s,null),t==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(t,e,n,i,null,null)}if(o||(this.currentShape=i),i&&!i.get("destroyed")){var l=this.canvas,u=l.get("el");u.style.cursor=i.attr("cursor")||l.get("cursor")}},r.prototype._onmousedown=function(t,e,n){n.button===Z5&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,t,e,null,null)},r.prototype._emitMouseoverEvents=function(t,e,n,i){var a=this.canvas.get("el");n!==i&&(n&&(this._emitEvent("mouseout",t,e,n,n,i),this._emitEvent("mouseleave",t,e,n,n,i),(!i||i.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),i&&(this._emitEvent("mouseover",t,e,i,n,i),this._emitEvent("mouseenter",t,e,i,n,i)))},r.prototype._emitDragoverEvents=function(t,e,n,i,a){i?(i!==n&&(n&&this._emitEvent("dragleave",t,e,n,n,i),this._emitEvent("dragenter",t,e,i,n,i)),a||this._emitEvent("dragover",t,e,i)):n&&this._emitEvent("dragleave",t,e,n,n,i),a&&this._emitEvent("dragover",t,e,i)},r.prototype._afterDrag=function(t,e,n){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(e,n);i!==t&&this._emitMouseoverEvents(n,e,t,i),this.currentShape=i},r.prototype._onmouseup=function(t,e,n){if(n.button===Z5){var i=this.draggingShape;this.dragging?(i&&this._emitEvent("drop",n,t,e),this._emitEvent("dragend",n,t,i),this._afterDrag(i,t,n)):(this._emitEvent("mouseup",n,t,e),e===this.mousedownShape&&this._emitEvent("click",n,t,e),this.mousedownShape=null,this.mousedownPoint=null)}},r.prototype._ondragover=function(t,e,n){n.preventDefault();var i=this.currentShape;this._emitDragoverEvents(n,t,i,e,!0)},r.prototype._onmousemove=function(t,e,n){var i=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,t,a,e,!1),this._emitEvent("drag",n,t,o);else{var s=this.mousedownPoint;if(s){var l=this.mousedownShape,u=n.timeStamp,c=u-this.mousedownTimeStamp,f=s.clientX-t.clientX,d=s.clientY-t.clientY,h=f*f+d*d;c>120||h>rhe?l&&l.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,t,o),this.mousedownShape=null,this.mousedownPoint=null):!l&&i.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,t,a,e),this._emitEvent("mousemove",n,t,e)):(this._emitMouseoverEvents(n,t,a,e),this._emitEvent("mousemove",n,t,e))}else this._emitMouseoverEvents(n,t,a,e),this._emitEvent("mousemove",n,t,e)}},r.prototype._emitEvent=function(t,e,n,i,a,o){var s=this._getEventObj(t,e,n,i,a,o);if(i){s.shape=i,J5(i,t,s);for(var l=i.getParent();l;)l.emitDelegation(t,s),s.propagationStopped||nhe(l,t,s),s.propagationPath.push(l),l=l.getParent()}else{var u=this.canvas;J5(u,t,s)}},r.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},r}(),e$="px",t$=zT(),ahe=t$&&t$.name==="firefox",w1=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},t.prototype.initContainer=function(){var e=this.get("container");rt(e)&&(e=document.getElementById(e),this.set("container",e))},t.prototype.initDom=function(){var e=this.createDom();this.set("el",e);var n=this.get("container");n.appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},t.prototype.initEvents=function(){var e=new ihe({canvas:this});e.init(),this.set("eventController",e)},t.prototype.initTimeline=function(){var e=new the(this);this.set("timeline",e)},t.prototype.setDOMSize=function(e,n){var i=this.get("el");u5&&(i.style.width=e+e$,i.style.height=n+e$)},t.prototype.changeSize=function(e,n){this.setDOMSize(e,n),this.set("width",e),this.set("height",n),this.onCanvasChange("changeSize")},t.prototype.getRenderer=function(){return this.get("renderer")},t.prototype.getCursor=function(){return this.get("cursor")},t.prototype.setCursor=function(e){this.set("cursor",e);var n=this.get("el");u5&&n&&(n.style.cursor=e)},t.prototype.getPointByEvent=function(e){var n=this.get("supportCSSTransform");if(n){if(ahe&&!Je(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!Je(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var i=this.getClientByEvent(e),a=i.x,o=i.y;return this.getPointByClient(a,o)},t.prototype.getClientByEvent=function(e){var n=e;return e.touches&&(e.type==="touchend"?n=e.changedTouches[0]:n=e.touches[0]),{x:n.clientX,y:n.clientY}},t.prototype.getPointByClient=function(e,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:e-a.left,y:n-a.top}},t.prototype.getClientByPoint=function(e,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:e+a.left,y:n+a.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){var e=this.get("eventController");e.destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),r.prototype.destroy.call(this))},t}(x5),S1=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var e=r.prototype.clone.call(this),n=this.getChildren(),i=0;i<n.length;i++){var a=n[i];e.add(a.clone())}return e},t}(x5),C1=function(r){Te(t,r);function t(e){return r.call(this,e)||this}return t.prototype._isInBBox=function(e,n){var i=this.getBBox();return i.minX<=e&&i.maxX>=e&&i.minY<=n&&i.maxY>=n},t.prototype.afterAttrsChange=function(e){r.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},t.prototype.applyMatrix=function(e){r.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),n=this.getTotalMatrix(),i=e.minX,a=e.minY,o=e.maxX,s=e.maxY;if(n){var l=wu(n,[e.minX,e.minY]),u=wu(n,[e.maxX,e.minY]),c=wu(n,[e.minX,e.maxY]),f=wu(n,[e.maxX,e.maxY]);i=Math.min(l[0],u[0],c[0],f[0]),o=Math.max(l[0],u[0],c[0],f[0]),a=Math.min(l[1],u[1],c[1],f[1]),s=Math.max(l[1],u[1],c[1],f[1])}var d=this.attrs;if(d.shadowColor){var h=d.shadowBlur,v=h===void 0?0:h,p=d.shadowOffsetX,g=p===void 0?0:p,m=d.shadowOffsetY,y=m===void 0?0:m,b=i-v+g,x=o+v+g,w=a-v+y,S=s+v+y;i=Math.min(i,b),o=Math.max(o,x),a=Math.min(a,w),s=Math.max(s,S)}return{x:i,y:a,minX:i,minY:a,maxX:o,maxY:s,width:o-i,height:s-a}},t.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},t.prototype.isClipShape=function(){return this.get("isClipShape")},t.prototype.isInShape=function(e,n){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,n){var i=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[e,n,1];o=this.invertFromMatrix(o);var s=o[0],l=o[1],u=this._isInBBox(s,l);return this.isOnlyHitBox()?u:!!(u&&!this.isClipped(s,l)&&(this.isInShape(s,l)||i&&i.isHit(s,l)||a&&a.isHit(s,l)))},t}(g5),r$=new Map;function Ol(r,t){r$.set(r,t)}function E1(r){return r$.get(r)}function n$(r){var t=r.attr(),e=t.x,n=t.y,i=t.width,a=t.height;return{x:e,y:n,width:i,height:a}}function i$(r){var t=r.attr(),e=t.x,n=t.y,i=t.r;return{x:e-i,y:n-i,width:i*2,height:i*2}}function a$(r){return Math.min.apply(null,r)}function o$(r){return Math.max.apply(null,r)}function so(r,t,e,n){var i=r-e,a=t-n;return Math.sqrt(i*i+a*a)}function _1(r,t){return Math.abs(r-t)<.001}function Ac(r,t){var e=a$(r),n=a$(t),i=o$(r),a=o$(t);return{x:e,y:n,width:i-e,height:a-n}}function T1(r){return(r+Math.PI*2)%(Math.PI*2)}var Ba={box:function(r,t,e,n){return Ac([r,e],[t,n])},length:function(r,t,e,n){return so(r,t,e,n)},pointAt:function(r,t,e,n,i){return{x:(1-i)*r+i*e,y:(1-i)*t+i*n}},pointDistance:function(r,t,e,n,i,a){var o=(e-r)*(i-r)+(n-t)*(a-t);if(o<0)return so(r,t,i,a);var s=(e-r)*(e-r)+(n-t)*(n-t);return o>s?so(e,n,i,a):this.pointToLine(r,t,e,n,i,a)},pointToLine:function(r,t,e,n,i,a){var o=[e-r,n-t];if(j3(o,[0,0]))return Math.sqrt((i-r)*(i-r)+(a-t)*(a-t));var s=[-o[1],o[0]];wc(s,s);var l=[i-r,a-t];return Math.abs(dT(l,s))},tangentAngle:function(r,t,e,n){return Math.atan2(n-t,e-r)}},ohe=1e-4;function s$(r,t,e,n,i,a){var o,s=1/0,l=[e,n],u=20;a&&a>200&&(u=a/10);for(var c=1/u,f=c/10,d=0;d<=u;d++){var h=d*c,v=[i.apply(null,r.concat([h])),i.apply(null,t.concat([h]))],p=so(l[0],l[1],v[0],v[1]);p<s&&(o=h,s=p)}if(o===0)return{x:r[0],y:t[0]};if(o===1){var g=r.length;return{x:r[g-1],y:t[g-1]}}s=1/0;for(var d=0;d<32&&!(f<ohe);d++){var m=o-f,y=o+f,v=[i.apply(null,r.concat([m])),i.apply(null,t.concat([m]))],p=so(l[0],l[1],v[0],v[1]);if(m>=0&&p<s)o=m,s=p;else{var b=[i.apply(null,r.concat([y])),i.apply(null,t.concat([y]))],x=so(l[0],l[1],b[0],b[1]);y<=1&&x<s?(o=y,s=x):f*=.5}}return{x:i.apply(null,r.concat([o])),y:i.apply(null,t.concat([o]))}}function she(r,t){for(var e=0,n=r.length,i=0;i<n;i++){var a=r[i],o=t[i],s=r[(i+1)%n],l=t[(i+1)%n];e+=so(a,o,s,l)}return e/2}function Mc(r,t,e,n){var i=1-n;return i*i*r+2*n*i*t+n*n*e}function l$(r,t,e){var n=r+e-2*t;if(_1(n,0))return[.5];var i=(r-t)/n;return i<=1&&i>=0?[i]:[]}function u$(r,t,e,n){return 2*(1-n)*(t-r)+2*n*(e-t)}function c$(r,t,e,n,i,a,o){var s=Mc(r,e,i,o),l=Mc(t,n,a,o),u=Ba.pointAt(r,t,e,n,o),c=Ba.pointAt(e,n,i,a,o);return[[r,t,u.x,u.y,s,l],[s,l,c.x,c.y,i,a]]}function aA(r,t,e,n,i,a,o){if(o===0)return(so(r,t,e,n)+so(e,n,i,a)+so(r,t,i,a))/2;var s=c$(r,t,e,n,i,a,.5),l=s[0],u=s[1];return l.push(o-1),u.push(o-1),aA.apply(null,l)+aA.apply(null,u)}var oA={box:function(r,t,e,n,i,a){var o=l$(r,e,i)[0],s=l$(t,n,a)[0],l=[r,i],u=[t,a];return o!==void 0&&l.push(Mc(r,e,i,o)),s!==void 0&&u.push(Mc(t,n,a,s)),Ac(l,u)},length:function(r,t,e,n,i,a){return aA(r,t,e,n,i,a,3)},nearestPoint:function(r,t,e,n,i,a,o,s){return s$([r,e,i],[t,n,a],o,s,Mc)},pointDistance:function(r,t,e,n,i,a,o,s){var l=this.nearestPoint(r,t,e,n,i,a,o,s);return so(l.x,l.y,o,s)},interpolationAt:Mc,pointAt:function(r,t,e,n,i,a,o){return{x:Mc(r,e,i,o),y:Mc(t,n,a,o)}},divide:function(r,t,e,n,i,a,o){return c$(r,t,e,n,i,a,o)},tangentAngle:function(r,t,e,n,i,a,o){var s=u$(r,e,i,o),l=u$(t,n,a,o),u=Math.atan2(l,s);return T1(u)}};function kc(r,t,e,n,i){var a=1-i;return a*a*a*r+3*t*i*a*a+3*e*i*i*a+n*i*i*i}function f$(r,t,e,n,i){var a=1-i;return 3*(a*a*(t-r)+2*a*i*(e-t)+i*i*(n-e))}function sA(r,t,e,n){var i=-3*r+9*t-9*e+3*n,a=6*r-12*t+6*e,o=3*t-3*r,s=[],l,u,c;if(_1(i,0))_1(a,0)||(l=-o/a,l>=0&&l<=1&&s.push(l));else{var f=a*a-4*i*o;_1(f,0)?s.push(-a/(2*i)):f>0&&(c=Math.sqrt(f),l=(-a+c)/(2*i),u=(-a-c)/(2*i),l>=0&&l<=1&&s.push(l),u>=0&&u<=1&&s.push(u))}return s}function d$(r,t,e,n,i,a,o,s,l){var u=kc(r,e,i,o,l),c=kc(t,n,a,s,l),f=Ba.pointAt(r,t,e,n,l),d=Ba.pointAt(e,n,i,a,l),h=Ba.pointAt(i,a,o,s,l),v=Ba.pointAt(f.x,f.y,d.x,d.y,l),p=Ba.pointAt(d.x,d.y,h.x,h.y,l);return[[r,t,f.x,f.y,v.x,v.y,u,c],[u,c,p.x,p.y,h.x,h.y,o,s]]}function lA(r,t,e,n,i,a,o,s,l){if(l===0)return she([r,e,i,o],[t,n,a,s]);var u=d$(r,t,e,n,i,a,o,s,.5),c=u[0],f=u[1];return c.push(l-1),f.push(l-1),lA.apply(null,c)+lA.apply(null,f)}var Ov={extrema:sA,box:function(r,t,e,n,i,a,o,s){for(var l=[r,o],u=[t,s],c=sA(r,e,i,o),f=sA(t,n,a,s),d=0;d<c.length;d++)l.push(kc(r,e,i,o,c[d]));for(var d=0;d<f.length;d++)u.push(kc(t,n,a,s,f[d]));return Ac(l,u)},length:function(r,t,e,n,i,a,o,s){return lA(r,t,e,n,i,a,o,s,3)},nearestPoint:function(r,t,e,n,i,a,o,s,l,u,c){return s$([r,e,i,o],[t,n,a,s],l,u,kc,c)},pointDistance:function(r,t,e,n,i,a,o,s,l,u,c){var f=this.nearestPoint(r,t,e,n,i,a,o,s,l,u,c);return so(f.x,f.y,l,u)},interpolationAt:kc,pointAt:function(r,t,e,n,i,a,o,s,l){return{x:kc(r,e,i,o,l),y:kc(t,n,a,s,l)}},divide:function(r,t,e,n,i,a,o,s,l){return d$(r,t,e,n,i,a,o,s,l)},tangentAngle:function(r,t,e,n,i,a,o,s,l){var u=f$(r,e,i,o,l),c=f$(t,n,a,s,l);return T1(Math.atan2(c,u))}};function h$(r,t){var e=Math.abs(r);return t>0?e:e*-1}var lhe={box:function(r,t,e,n){return{x:r-e,y:t-n,width:e*2,height:n*2}},length:function(r,t,e,n){return Math.PI*(3*(e+n)-Math.sqrt((3*e+n)*(e+3*n)))},nearestPoint:function(r,t,e,n,i,a){var o=e,s=n;if(o===0||s===0)return{x:r,y:t};for(var l=i-r,u=a-t,c=Math.abs(l),f=Math.abs(u),d=o*o,h=s*s,v=Math.PI/4,p,g,m=0;m<4;m++){p=o*Math.cos(v),g=s*Math.sin(v);var y=(d-h)*Math.pow(Math.cos(v),3)/o,b=(h-d)*Math.pow(Math.sin(v),3)/s,x=p-y,w=g-b,S=c-y,C=f-b,_=Math.hypot(w,x),T=Math.hypot(C,S),E=_*Math.asin((x*C-w*S)/(_*T)),M=E/Math.sqrt(d+h-p*p-g*g);v+=M,v=Math.min(Math.PI/2,Math.max(0,v))}return{x:r+h$(p,l),y:t+h$(g,u)}},pointDistance:function(r,t,e,n,i,a){var o=this.nearestPoint(r,t,e,n,i,a);return so(o.x,o.y,i,a)},pointAt:function(r,t,e,n,i){var a=2*Math.PI*i;return{x:r+e*Math.cos(a),y:t+n*Math.sin(a)}},tangentAngle:function(r,t,e,n,i){var a=2*Math.PI*i,o=Math.atan2(n*Math.cos(a),-e*Math.sin(a));return T1(o)}};function uhe(r,t,e,n,i,a,o,s){return-1*e*Math.cos(i)*Math.sin(s)-n*Math.sin(i)*Math.cos(s)}function che(r,t,e,n,i,a,o,s){return-1*e*Math.sin(i)*Math.sin(s)+n*Math.cos(i)*Math.cos(s)}function fhe(r,t,e){return Math.atan(-t/r*Math.tan(e))}function dhe(r,t,e){return Math.atan(t/(r*Math.tan(e)))}function v$(r,t,e,n,i,a){return e*Math.cos(i)*Math.cos(a)-n*Math.sin(i)*Math.sin(a)+r}function p$(r,t,e,n,i,a){return e*Math.sin(i)*Math.cos(a)+n*Math.cos(i)*Math.sin(a)+t}function hhe(r,t,e,n){var i=Math.atan2(n*r,e*t);return(i+Math.PI*2)%(Math.PI*2)}function g$(r,t,e){return{x:r*Math.cos(e),y:t*Math.sin(e)}}function m$(r,t,e){var n=Math.cos(e),i=Math.sin(e);return[r*n-t*i,r*i+t*n]}var y$={box:function(r,t,e,n,i,a,o){for(var s=fhe(e,n,i),l=1/0,u=-1/0,c=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var d=s+f;a<o?a<d&&d<o&&c.push(d):o<d&&d<a&&c.push(d)}for(var f=0;f<c.length;f++){var h=v$(r,t,e,n,i,c[f]);h<l&&(l=h),h>u&&(u=h)}for(var v=dhe(e,n,i),p=1/0,g=-1/0,m=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var y=v+f;a<o?a<y&&y<o&&m.push(y):o<y&&y<a&&m.push(y)}for(var f=0;f<m.length;f++){var b=p$(r,t,e,n,i,m[f]);b<p&&(p=b),b>g&&(g=b)}return{x:l,y:p,width:u-l,height:g-p}},length:function(r,t,e,n,i,a,o){},nearestPoint:function(r,t,e,n,i,a,o,s,l){var u=m$(s-r,l-t,-i),c=u[0],f=u[1],d=lhe.nearestPoint(0,0,e,n,c,f),h=hhe(e,n,d.x,d.y);h<a?d=g$(e,n,a):h>o&&(d=g$(e,n,o));var v=m$(d.x,d.y,i);return{x:v[0]+r,y:v[1]+t}},pointDistance:function(r,t,e,n,i,a,o,s,l){var u=this.nearestPoint(r,t,e,n,s,l);return so(u.x,u.y,s,l)},pointAt:function(r,t,e,n,i,a,o,s){var l=(o-a)*s+a;return{x:v$(r,t,e,n,i,l),y:p$(r,t,e,n,i,l)}},tangentAngle:function(r,t,e,n,i,a,o,s){var l=(o-a)*s+a,u=uhe(r,t,e,n,i,a,o,l),c=che(r,t,e,n,i,a,o,l);return T1(Math.atan2(c,u))}};function b$(r){for(var t=0,e=[],n=0;n<r.length-1;n++){var i=r[n],a=r[n+1],o=so(i[0],i[1],a[0],a[1]),s={from:i,to:a,length:o};e.push(s),t+=o}return{segments:e,totalLength:t}}function vhe(r){if(r.length<2)return 0;for(var t=0,e=0;e<r.length-1;e++){var n=r[e],i=r[e+1];t+=so(n[0],n[1],i[0],i[1])}return t}function phe(r,t){if(t>1||t<0||r.length<2)return null;var e=b$(r),n=e.segments,i=e.totalLength;if(i===0)return{x:r[0][0],y:r[0][1]};for(var a=0,o=null,s=0;s<n.length;s++){var l=n[s],u=l.from,c=l.to,f=l.length/i;if(t>=a&&t<=a+f){var d=(t-a)/f;o=Ba.pointAt(u[0],u[1],c[0],c[1],d);break}a+=f}return o}function ghe(r,t){if(t>1||t<0||r.length<2)return 0;for(var e=b$(r),n=e.segments,i=e.totalLength,a=0,o=0,s=0;s<n.length;s++){var l=n[s],u=l.from,c=l.to,f=l.length/i;if(t>=a&&t<=a+f){o=Math.atan2(c[1]-u[1],c[0]-u[0]);break}a+=f}return o}function mhe(r,t,e){for(var n=1/0,i=0;i<r.length-1;i++){var a=r[i],o=r[i+1],s=Ba.pointDistance(a[0],a[1],o[0],o[1],t,e);s<n&&(n=s)}return n}var x$={box:function(r){for(var t=[],e=[],n=0;n<r.length;n++){var i=r[n];t.push(i[0]),e.push(i[1])}return Ac(t,e)},length:function(r){return vhe(r)},pointAt:function(r,t){return phe(r,t)},pointDistance:function(r,t,e){return mhe(r,t,e)},tangentAngle:function(r,t){return ghe(r,t)}};function w$(r,t){return!r||!t?r||t:{minX:Math.min(r.minX,t.minX),minY:Math.min(r.minY,t.minY),maxX:Math.max(r.maxX,t.maxX),maxY:Math.max(r.maxY,t.maxY)}}function uA(r,t){var e=r.get("startArrowShape"),n=r.get("endArrowShape"),i=null,a=null;return e&&(i=e.getCanvasBBox(),t=w$(t,i)),n&&(a=n.getCanvasBBox(),t=w$(t,a)),t}function yhe(r){for(var t=r.attr(),e=t.points,n=[],i=[],a=0;a<e.length;a++){var o=e[a];n.push(o[0]),i.push(o[1])}var s=Ac(n,i),l=s.x,u=s.y,c=s.width,f=s.height,d={minX:l,minY:u,maxX:l+c,maxY:u+f};return d=uA(r,d),{x:d.minX,y:d.minY,width:d.maxX-d.minX,height:d.maxY-d.minY}}function bhe(r){for(var t=r.attr(),e=t.points,n=[],i=[],a=0;a<e.length;a++){var o=e[a];n.push(o[0]),i.push(o[1])}return Ac(n,i)}var cA=null;function A1(){if(!cA){var r=document.createElement("canvas");r.width=1,r.height=1,cA=r.getContext("2d")}return cA}function M1(r,t,e){var n=1;if(rt(r)&&(n=r.split(`
`).length),n>1){var i=xhe(t,e);return t*n+i*(n-1)}return t}function xhe(r,t){return t?t-r:r*.14}function whe(r,t){var e=A1(),n=0;if(Je(r)||r==="")return n;if(e.save(),e.font=t,rt(r)&&r.includes(`
`)){var i=r.split(`
`);G(i,function(a){var o=e.measureText(a).width;n<o&&(n=o)})}else n=e.measureText(r).width;return e.restore(),n}function k1(r){var t=r.fontSize,e=r.fontFamily,n=r.fontWeight,i=r.fontStyle,a=r.fontVariant;return[i,a,n,t+"px",e].join(" ").trim()}function She(r){var t=r.attr(),e=t.x,n=t.y,i=t.text,a=t.fontSize,o=t.lineHeight,s=t.font;s||(s=k1(t));var l=whe(i,s),u;if(!l)u={x:e,y:n,width:0,height:0};else{var c=t.textAlign,f=t.textBaseline,d=M1(i,a,o),h={x:e,y:n-d};c&&(c==="end"||c==="right"?h.x-=l:c==="center"&&(h.x-=l/2)),f&&(f==="top"?h.y+=d:f==="middle"&&(h.y+=d/2)),u={x:h.x,y:h.y,width:l,height:d}}return u}var Che=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,Ehe=/[^\s\,]+/ig;function _he(r){var t=r||[];if(qe(t))return t;if(rt(t))return t=t.match(Che),G(t,function(e,n){if(e=e.match(Ehe),e[0].length>1){var i=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=i}G(e,function(a,o){isNaN(a)||(e[o]=+a)}),t[n]=e}),t}function The(r,t,e,n){var i=[],a=!!n,o,s,l,u,c,f,d;if(a){l=n[0],u=n[1];for(var h=0,v=r.length;h<v;h+=1){var p=r[h];l=Oa([0,0],l,p),u=La([0,0],u,p)}}for(var h=0,g=r.length;h<g;h+=1){var p=r[h];if(h===0&&!e)d=p;else if(h===g-1&&!e)f=p,i.push(d),i.push(f);else{var m=[h?h-1:g-1,h-1][e?0:1];o=r[m],s=r[e?(h+1)%g:h+1];var y=[0,0];y=nd(y,s,o),y=di(y,y,t);var b=Tv(p,o),x=Tv(p,s),w=b+x;w!==0&&(b/=w,x/=w);var S=di([0,0],y,-b),C=di([0,0],y,x);f=Oi([0,0],p,S),c=Oi([0,0],p,C),c=Oa([0,0],c,La([0,0],s,p)),c=La([0,0],c,Oa([0,0],s,p)),S=nd([0,0],c,p),S=di([0,0],S,-b/x),f=Oi([0,0],p,S),f=Oa([0,0],f,La([0,0],o,p)),f=La([0,0],f,Oa([0,0],o,p)),C=nd([0,0],p,f),C=di([0,0],C,x/b),c=Oi([0,0],p,C),a&&(f=La([0,0],f,l),f=Oa([0,0],f,u),c=La([0,0],c,l),c=Oa([0,0],c,u)),i.push(d),i.push(f),d=c}}return e&&i.push(i.shift()),i}function fA(r,t,e){t===void 0&&(t=!1),e===void 0&&(e=[[0,0],[1,1]]);for(var n=!!t,i=[],a=0,o=r.length;a<o;a+=2)i.push([r[a],r[a+1]]);for(var s=The(i,.4,n,e),l=i.length,u=[],c,f,d,a=0;a<l-1;a+=1)c=s[a*2],f=s[a*2+1],d=i[a+1],u.push(["C",c[0],c[1],f[0],f[1],d[0],d[1]]);return n&&(c=s[l],f=s[l+1],d=i[0],u.push(["C",c[0],c[1],f[0],f[1],d[0],d[1]])),u}var Bm=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Ahe=new RegExp("([a-z])["+Bm+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Bm+"]*,?["+Bm+"]*)+)","ig"),Mhe=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Bm+"]*,?["+Bm+"]*","ig");function $m(r){if(!r)return null;if(qe(r))return r;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(r).replace(Ahe,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(Mhe,function(l,u){u&&o.push(+u)}),s==="m"&&o.length>2&&(e.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&e.push([i,o[0]]),s==="r")e.push([i].concat(o));else for(;o.length>=t[s]&&(e.push([i].concat(o.splice(0,t[s]))),!!t[s]););return""}),e}var khe=/[a-z]/;function S$(r,t){return[t[0]+(t[0]-r[0]),t[1]+(t[1]-r[1])]}function C$(r){var t=$m(r);if(!t||!t.length)return[["M",0,0]];for(var e=!1,n=0;n<t.length;n++){var i=t[n][0];if(khe.test(i)||["V","H","T","S"].indexOf(i)>=0){e=!0;break}}if(!e)return t;var a=[],o=0,s=0,l=0,u=0,c=0,f=t[0];(f[0]==="M"||f[0]==="m")&&(o=+f[1],s=+f[2],l=o,u=s,c++,a[0]=["M",o,s]);for(var n=c,d=t.length;n<d;n++){var h=t[n],v=a[n-1],p=[],i=h[0],g=i.toUpperCase();if(i!==g)switch(p[0]=g,g){case"A":p[1]=h[1],p[2]=h[2],p[3]=h[3],p[4]=h[4],p[5]=h[5],p[6]=+h[6]+o,p[7]=+h[7]+s;break;case"V":p[1]=+h[1]+s;break;case"H":p[1]=+h[1]+o;break;case"M":l=+h[1]+o,u=+h[2]+s,p[1]=l,p[2]=u;break;default:for(var m=1,y=h.length;m<y;m++)p[m]=+h[m]+(m%2?o:s)}else p=t[n];switch(g){case"Z":o=+l,s=+u;break;case"H":o=p[1],p=["L",o,s];break;case"V":s=p[1],p=["L",o,s];break;case"T":o=p[1],s=p[2];var b=S$([v[1],v[2]],[v[3],v[4]]);p=["Q",b[0],b[1],o,s];break;case"S":o=p[p.length-2],s=p[p.length-1];var x=v.length,w=S$([v[x-4],v[x-3]],[v[x-2],v[x-1]]);p=["C",w[0],w[1],p[1],p[2],o,s];break;case"M":l=p[p.length-2],u=p[p.length-1];break;default:o=p[p.length-2],s=p[p.length-1]}a.push(p)}return a}function I1(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function dA(r,t){return I1(r)*I1(t)?(r[0]*t[0]+r[1]*t[1])/(I1(r)*I1(t)):1}function E$(r,t){return(r[0]*t[1]<r[1]*t[0]?-1:1)*Math.acos(dA(r,t))}function hA(r,t){return r[0]===t[0]&&r[1]===t[1]}function Ihe(r,t){var e=t[1],n=t[2],i=$x(zx(t[3]),Math.PI*2),a=t[4],o=t[5],s=r[0],l=r[1],u=t[6],c=t[7],f=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,d=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,h=f*f/(e*e)+d*d/(n*n);h>1&&(e*=Math.sqrt(h),n*=Math.sqrt(h));var v=e*e*(d*d)+n*n*(f*f),p=v?Math.sqrt((e*e*(n*n)-v)/v):1;a===o&&(p*=-1),isNaN(p)&&(p=0);var g=n?p*e*d/n:0,m=e?p*-n*f/e:0,y=(s+u)/2+Math.cos(i)*g-Math.sin(i)*m,b=(l+c)/2+Math.sin(i)*g+Math.cos(i)*m,x=[(f-g)/e,(d-m)/n],w=[(-1*f-g)/e,(-1*d-m)/n],S=E$([1,0],x),C=E$(x,w);return dA(x,w)<=-1&&(C=Math.PI),dA(x,w)>=1&&(C=0),o===0&&C>0&&(C=C-2*Math.PI),o===1&&C<0&&(C=C+2*Math.PI),{cx:y,cy:b,rx:hA(r,[u,c])?0:e,ry:hA(r,[u,c])?0:n,startAngle:S,endAngle:S+C,xRotation:i,arcFlag:a,sweepFlag:o}}function _$(r,t){return[t[0]+(t[0]-r[0]),t[1]+(t[1]-r[1])]}function vA(r){r=_he(r);for(var t=[],e=null,n=null,i=null,a=0,o=r.length,s=0;s<o;s++){var l=r[s];n=r[s+1];var u=l[0],c={command:u,prePoint:e,params:l,startTangent:null,endTangent:null};switch(u){case"M":i=[l[1],l[2]],a=s;break;case"A":var f=Ihe(e,l);c.arcParams=f;break}if(u==="Z")e=i,n=r[a+1];else{var d=l.length;e=[l[d-2],l[d-1]]}n&&n[0]==="Z"&&(n=r[a],t[a]&&(t[a].prePoint=e)),c.currentPoint=e,t[a]&&hA(e,t[a].currentPoint)&&(t[a].prePoint=c.prePoint);var h=n?[n[n.length-2],n[n.length-1]]:null;c.nextPoint=h;var v=c.prePoint;if(["L","H","V"].includes(u))c.startTangent=[v[0]-e[0],v[1]-e[1]],c.endTangent=[e[0]-v[0],e[1]-v[1]];else if(u==="Q"){var p=[l[1],l[2]];c.startTangent=[v[0]-p[0],v[1]-p[1]],c.endTangent=[e[0]-p[0],e[1]-p[1]]}else if(u==="T"){var g=t[s-1],p=_$(g.currentPoint,v);g.command==="Q"?(c.command="Q",c.startTangent=[v[0]-p[0],v[1]-p[1]],c.endTangent=[e[0]-p[0],e[1]-p[1]]):(c.command="TL",c.startTangent=[v[0]-e[0],v[1]-e[1]],c.endTangent=[e[0]-v[0],e[1]-v[1]])}else if(u==="C"){var m=[l[1],l[2]],y=[l[3],l[4]];c.startTangent=[v[0]-m[0],v[1]-m[1]],c.endTangent=[e[0]-y[0],e[1]-y[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[m[0]-y[0],m[1]-y[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[y[0]-m[0],y[1]-m[1]])}else if(u==="S"){var g=t[s-1],m=_$(g.currentPoint,v),y=[l[1],l[2]];g.command==="C"?(c.command="C",c.startTangent=[v[0]-m[0],v[1]-m[1]],c.endTangent=[e[0]-y[0],e[1]-y[1]]):(c.command="SQ",c.startTangent=[v[0]-y[0],v[1]-y[1]],c.endTangent=[e[0]-y[0],e[1]-y[1]])}else if(u==="A"){var b=.001,x=c.arcParams||{},w=x.cx,S=w===void 0?0:w,C=x.cy,_=C===void 0?0:C,T=x.rx,E=T===void 0?0:T,M=x.ry,k=M===void 0?0:M,P=x.sweepFlag,F=P===void 0?0:P,$=x.startAngle,R=$===void 0?0:$,L=x.endAngle,O=L===void 0?0:L;F===0&&(b*=-1);var B=E*Math.cos(R-b)+S,U=k*Math.sin(R-b)+_;c.startTangent=[B-i[0],U-i[1]];var W=E*Math.cos(R+O+b)+S,X=k*Math.sin(R+O-b)+_;c.endTangent=[v[0]-W,v[1]-X]}t.push(c)}return t}var T$=function(r,t,e){return r>=t&&r<=e};function Phe(r,t,e,n){var i=.001,a={x:e.x-r.x,y:e.y-r.y},o={x:t.x-r.x,y:t.y-r.y},s={x:n.x-e.x,y:n.y-e.y},l=o.x*s.y-o.y*s.x,u=l*l,c=o.x*o.x+o.y*o.y,f=s.x*s.x+s.y*s.y,d=null;if(u>i*c*f){var h=(a.x*s.y-a.y*s.x)/l,v=(a.x*o.y-a.y*o.x)/l;T$(h,0,1)&&T$(v,0,1)&&(d={x:r.x+h*o.x,y:r.y+h*o.y})}return d}var Dhe=1e-6;function pA(r){return Math.abs(r)<Dhe?0:r<0?-1:1}function Rhe(r,t,e){return(e[0]-r[0])*(t[1]-r[1])==(t[0]-r[0])*(e[1]-r[1])&&Math.min(r[0],t[0])<=e[0]&&e[0]<=Math.max(r[0],t[0])&&Math.min(r[1],t[1])<=e[1]&&e[1]<=Math.max(r[1],t[1])}function A$(r,t,e){var n=!1,i=r.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=r[a],s=r[(a+1)%i];if(Rhe(o,s,[t,e]))return!0;pA(o[1]-e)>0!=pA(s[1]-e)>0&&pA(t-(e-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(n=!n)}return n}function M$(r){for(var t=[],e=r.length,n=0;n<e-1;n++){var i=r[n],a=r[n+1];t.push({from:{x:i[0],y:i[1]},to:{x:a[0],y:a[1]}})}if(t.length>1){var o=r[0],s=r[e-1];t.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return t}function Ohe(r,t){var e=!1;return G(r,function(n){if(Phe(n.from,n.to,t.from,t.to))return e=!0,!1}),e}function k$(r){var t=r.map(function(n){return n[0]}),e=r.map(function(n){return n[1]});return{minX:Math.min.apply(null,t),maxX:Math.max.apply(null,t),minY:Math.min.apply(null,e),maxY:Math.max.apply(null,e)}}function Lhe(r,t){return!(t.minX>r.maxX||t.maxX<r.minX||t.minY>r.maxY||t.maxY<r.minY)}function Fhe(r,t){if(r.length<2||t.length<2)return!1;var e=k$(r),n=k$(t);if(!Lhe(e,n))return!1;var i=!1;if(G(t,function(l){if(A$(r,l[0],l[1]))return i=!0,!1}),i||(G(r,function(l){if(A$(t,l[0],l[1]))return i=!0,!1}),i))return!0;var a=M$(r),o=M$(t),s=!1;return G(o,function(l){if(Ohe(a,l))return s=!0,!1}),s}function Nhe(r,t){for(var e=[],n=[],i=[],a=0;a<r.length;a++){var o=r[a],s=o.currentPoint,l=o.params,u=o.prePoint,c=void 0;switch(o.command){case"Q":c=oA.box(u[0],u[1],l[1],l[2],l[3],l[4]);break;case"C":c=Ov.box(u[0],u[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var f=o.arcParams;c=y$.box(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:e.push(s[0]),n.push(s[1]);break}c&&(o.box=c,e.push(c.x,c.x+c.width),n.push(c.y,c.y+c.height)),t&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&i.push(o)}e=e.filter(function(m){return!Number.isNaN(m)}),n=n.filter(function(m){return!Number.isNaN(m)});var d=ia(e),h=ia(n),v=ji(e),p=ji(n);if(i.length===0)return{x:d,y:h,width:v-d,height:p-h};for(var a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,g=void 0;s[0]===d?(g=P1(o,t),d=d-g.xExtra):s[0]===v&&(g=P1(o,t),v=v+g.xExtra),s[1]===h?(g=P1(o,t),h=h-g.yExtra):s[1]===p&&(g=P1(o,t),p=p+g.yExtra)}return{x:d,y:h,width:v-d,height:p-h}}function P1(r,t){var e=r.prePoint,n=r.currentPoint,i=r.nextPoint,a=Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2),o=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),s=Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||Math.sin(l)===0||pa(l,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),c=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));u=u>Math.PI/2?Math.PI-u:u,c=c>Math.PI/2?Math.PI-c:c;var f={xExtra:Math.cos(l/2-u)*(t/2*(1/Math.sin(l/2)))-t/2||0,yExtra:Math.cos(c-l/2)*(t/2*(1/Math.sin(l/2)))-t/2||0};return f}function Bhe(r){var t=r.attr(),e=t.path,n=t.stroke,i=n?t.lineWidth:0,a=r.get("segments")||vA(e),o=Nhe(a,i),s=o.x,l=o.y,u=o.width,c=o.height,f={minX:s,minY:l,maxX:s+u,maxY:l+c};return f=uA(r,f),{x:f.minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY}}function $he(r){var t=r.attr(),e=t.x1,n=t.y1,i=t.x2,a=t.y2,o=Math.min(e,i),s=Math.max(e,i),l=Math.min(n,a),u=Math.max(n,a),c={minX:o,maxX:s,minY:l,maxY:u};return c=uA(r,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function zhe(r){var t=r.attr(),e=t.x,n=t.y,i=t.rx,a=t.ry;return{x:e-i,y:n-a,width:i*2,height:a*2}}Ol("rect",n$);Ol("image",n$);Ol("circle",i$);Ol("marker",i$);Ol("polyline",yhe);Ol("polygon",bhe);Ol("text",She);Ol("path",Bhe);Ol("line",$he);Ol("ellipse",zhe);var Ghe=function(r){Te(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.item=n.item,i.canvasX=n.canvasX,i.canvasY=n.canvasY,i.wheelDelta=n.wheelDelta,i.detail=n.detail,i}return t}(Tm),gA=function(t){return t+"-"+Math.random()+Date.now()},mA=function(t){if(qe(t))switch(t.length){case 4:return t;case 3:return t.push(t[1]),t;case 2:return t.concat(t);case 1:return[t[0],t[0],t[0],t[0]];default:return[0,0,0,0]}if(Rt(t))return[t,t,t,t];if(rt(t)){var e=parseInt(t,10);return[e,e,e,e]}return[0,0,0,0]},Uhe=function(t){var e=new Ghe(t.type,t);return e.clientX=t.clientX,e.clientY=t.clientY,e.x=t.x,e.y=t.y,e.target=t.target,e.currentTarget=t.currentTarget,e.bubbles=!0,e.item=t.item,e},Vhe=function(t){if(!t)return!1;for(var e=9,n=[1,0,0,0,1,0,0,0,1],i=0;i<e;i++)if(t[i]!==n[i])return!0;return!1},D1=function(t){return Number.isNaN(Number(t))},I$=function(t){for(var e=1/0,n=-1/0,i=1/0,a=-1/0,o=0;o<t.length;o++){var s=t[o],l=s.getBBox(),u=l.minX,c=l.minY,f=l.maxX,d=l.maxY;u<e&&(e=u),c<i&&(i=c),f>n&&(n=f),d>a&&(a=d)}var h=Math.floor(e),v=Math.floor(i),p=Math.ceil(n)-Math.floor(e),g=Math.ceil(a)-Math.floor(i);return{x:h,y:v,width:p,height:g,minX:e,minY:i,maxX:n,maxY:a}},Hhe=function(t,e,n,i,a){e===void 0&&(e=15),n===void 0&&(n="quadratic"),i===void 0&&(i=void 0),a===void 0&&(a=void 0);for(var o=t.length,s=e*2,l=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],u={},c=[],f={},d=0;d<o;d++){var h=t[d],v=h.source,p=h.target,g=v+"-"+p;if(!c[d]){u[g]||(u[g]=[]),c[d]=!0,u[g].push(h);for(var m=0;m<o;m++)if(d!==m){var y=t[m],b=y.source,x=y.target;c[m]||(v===x&&p===b?(u[g].push(y),c[m]=!0,f[b+"|"+x+"|"+(u[g].length-1)]=!0):v===b&&p===x&&(u[g].push(y),c[m]=!0))}}}for(var w in u)for(var S=u[w],C=S.length,_=0;_<C;_++){var T=S[_];if(T.source===T.target){a&&(T.type=a),T.loopCfg={position:l[_%8],dist:Math.floor(_/8)*20+50};continue}if(C===1&&i&&T.source!==T.target){T.type=i;continue}T.type=n;var E=(_%2==0?1:-1)*(f[T.source+"|"+T.target+"|"+_]?-1:1);C%2==1?T.curveOffset=E*Math.ceil(_/2)*s:T.curveOffset=E*(Math.floor(_/2)*s+e)}return t},Whe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",uniqueId:gA,formatPadding:mA,cloneEvent:Uhe,isViewportChanged:Vhe,isNaN:D1,calculationItemsBBox:I$,processParallelEdges:Hhe}),jhe=function(){function r(t){this.destroyed=!1,this.graph=t,this.destroyed=!1}return r.prototype.getViewCenter=function(){var t=this.getFormatPadding(),e=this.graph,n=this.graph.get("width"),i=e.get("height");return{x:(n-t[1]-t[3])/2+t[3],y:(i-t[0]-t[2])/2+t[0]}},r.prototype.fitCenter=function(){var t=this.graph,e=t.get("group");e.resetMatrix();var n=e.getCanvasBBox();if(!(n.width===0||n.height===0)){var i=this.getViewCenter(),a={x:n.x+n.width/2,y:n.y+n.height/2};t.translate(i.x-a.x,i.y-a.y)}},r.prototype.fitView=function(){var t=this.graph,e=this.getFormatPadding(),n=t.get("width"),i=t.get("height"),a=t.get("group");a.resetMatrix();var o=a.getCanvasBBox();if(!(o.width===0||o.height===0)){var s=this.getViewCenter(),l={x:o.x+o.width/2,y:o.y+o.height/2};t.translate(s.x-l.x,s.y-l.y);var u=(n-e[1]-e[3])/o.width,c=(i-e[0]-e[2])/o.height,f=u;u>c&&(f=c),t.zoom(f,s)||console.warn("zoom failed, ratio out of range, ratio: %f",f)}},r.prototype.fitViewByRules=function(t){var e=t.onlyOutOfViewPort,n=e===void 0?!1:e,i=t.direction,a=i===void 0?"both":i,o=t.ratioRule,s=o===void 0?"min":o,l=this.graph,u=this.getFormatPadding(),c=l.get("width"),f=l.get("height"),d=l.get("group");d.resetMatrix();var h=d.getCanvasBBox();if(!(h.width===0||h.height===0)){var v=this.getViewCenter(),p={x:h.x+h.width/2,y:h.y+h.height/2};l.translate(v.x-p.x,v.y-p.y);var g=(c-u[1]-u[3])/h.width,m=(f-u[0]-u[2])/h.height,y;a==="x"?y=g:a==="y"?y=m:y=s==="max"?Math.max(g,m):Math.min(g,m),n&&(y=y<1?y:1);var b=l.getZoom(),x=b*y,w=l.get("minZoom");x<w&&(x=w,console.warn("fitview failed, ratio out of range, ratio: %f",y,"graph minzoom has been used instead")),l.zoomTo(x,v)}},r.prototype.getFormatPadding=function(){var t=this.graph.get("fitViewPadding");return mA(t)},r.prototype.focusPoint=function(t,e,n){var i=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),e){var l=(o.x-t.x)*s[0],u=(o.y-t.y)*s[4],c=0,f=0,d=0,h=0;this.graph.get("canvas").animate(function(v){d=l*v,h=u*v,i.graph.translate(d-c,h-f),c=d,f=h},A({},n))}else this.graph.translate((o.x-t.x)*s[0],(o.y-t.y)*s[4])},r.prototype.getPointByCanvas=function(t,e){var n=this.graph.get("group").getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=DB({x:t,y:e},n);return i},r.prototype.getPointByClient=function(t,e){var n=this.graph.get("canvas"),i=n.getPointByClient(t,e);return this.getPointByCanvas(i.x,i.y)},r.prototype.getClientByPoint=function(t,e){var n=this.graph.get("canvas"),i=this.getCanvasByPoint(t,e),a=n.getClientByPoint(i.x,i.y);return{x:a.x,y:a.y}},r.prototype.getCanvasByPoint=function(t,e){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),i1({x:t,y:e},n)},r.prototype.focus=function(t,e,n){if(rt(t)&&(t=this.graph.findById(t)),t){var i=0,a=0;if(t.getType&&t.getType()==="edge"){var o=t.getSource().get("group").getMatrix(),s=t.getTarget().get("group").getMatrix();o&&s?(i=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(i=o?o[6]:s[6],a=o?o[7]:s[7])}else{var l=t.get("group"),u=l.getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),i=u[6],a=u[7]}this.focusPoint({x:i,y:a},e,n)}},r.prototype.changeSize=function(t,e){var n=this.graph;if(!Rt(t)||!Rt(e))throw Error("invalid canvas width & height, please make sure width & height type is number");n.set({width:t,height:e});var i=n.get("canvas");i.changeSize(t,e);var a=n.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},r.prototype.destroy=function(){this.graph=null,this.destroyed=!1},r}();function R1(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?R1=function(e){return typeof e}:R1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R1(r)}function P$(r){if(typeof r!="string")return r;var t=function(C){if(typeof C!="string")return C;try{return JSON.parse(C.trim())}catch{return C.trim()}},e=t(r);if(typeof e!="string")return e;for(var n=function(C){return C[C.length-1]},i=r.trim(),a=[],o=[],s=function(){for(var C=[],_=0;_<arguments.length;_++)C[_]=arguments[_];return C.some(function(T){return n(o)===T})},l=function(){return n(a)},u=null,c=0,f="";c<i.length;){var d=i[c],h=s('"',"'");if(!h&&!d.trim()){c+=1;continue}var v=i[c-1]==="\\",p=s("}"),g=s("]"),m=s(","),y=l();if(h)if(n(o)===d&&!v){o.pop();var b=t(f);y.push(b),u=b,f=""}else f+=d;else if(g&&d===",")f&&(y.push(t(f)),f="");else if(p&&d===":")o.push(","),f&&(y.push(f),f="");else if(m&&d===",")f&&(y.push(t(f)),f=""),o.pop();else if(d==="}"&&(p||m)){f&&(y.push(t(f)),f=""),m&&o.pop();for(var x={},w=1;w<y.length;w+=2)x[y[w-1]]=y[w];a.pop(),a.length&&n(a).push(x),o.pop(),u=x}else d==="]"&&g?(f&&(y.push(t(f)),f=""),a.pop(),a.length&&n(a).push(y),o.pop(),u=y):d==="{"?(a.push([]),o.push("}")):d==="["?(a.push([]),o.push("]")):d==='"'?o.push('"'):d==="'"?o.push("'"):f+=d;c+=1}return u||f}var Yhe=function(t){return t.split("-").reduce(function(e,n){return e+n.charAt(0).toUpperCase()+n.slice(1)})},Xhe=function(t){return function(e){for(var n=t.length,i=[],a=0,o="";a<n;)if(t[a]==="{"&&t[a+1]==="{")i.push(o),o="",a+=2;else if(t[a]==="}"&&t[a+1]==="}"){if(i.length){var s=i.pop();o=ne(e,o,s.endsWith("=")?'"{'+o+'}"':o),i.push(s+o)}a+=2,o=""}else o+=t[a],a+=1;return i.push(o),i.map(function(l,u){return i[u-1]&&i[u-1].endsWith("=")?'"{'+l+'}"':l}).join("")}};function D$(r,t){var e={},n=r.getAttributeNames&&r.getAttributeNames()||[],i=r.children&&Array.from(r.children).map(function(s){return D$(s,t)}),a={},o=r.tagName?r.tagName.toLowerCase():"group";return o==="text"&&(e.text=r.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(n).forEach(function(s){var l=Yhe(s),u=r.getAttribute(s);try{if(l==="style"||l==="attrs"){var c=P$(u);e=A(A({},e),c)}else a[l]=P$(u)}catch(f){if(l==="style")throw f;a[l]=u}}),a.attrs=e,t&&t.style&&a.name&&R1(t.style[a.name])==="object"&&(a.attrs=A(A({},a.attrs),t.style[a.name])),t&&t.style&&a.keyshape&&(a.attrs=A(A({},a.attrs),t.style)),i.length&&(a.children=i),a}function qhe(r,t,e){var n=r.attrs,i=n===void 0?{}:n,a={x:t.x||0,y:t.y||0,width:e.width||0,height:e.height||0},o,s;switch(r.type){case"maker":case"circle":i.r&&(s=2*i.r,o=2*i.r);break;case"text":i.text&&(s=KB(i.text,i.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,r.attrs=A({fontSize:12,fill:"#000"},i));break;default:i.width&&(s=i.width),i.height&&(o=i.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),i.marginTop&&(a.y+=i.marginTop),i.marginLeft&&(a.x+=i.marginLeft),a}function R$(r,t){var e;t===void 0&&(t={x:0,y:0});var n=A({x:0,y:0,width:0,height:0},t);if((e=r.children)===null||e===void 0?void 0:e.length){var i=r.attrs,a=i===void 0?{}:i,o=a.marginTop,s=A({},t);o&&(s.y+=o);for(var l=0;l<r.children.length;l++){r.children[l].attrs.key=(a.key||"root")+" -"+l+" ";var u=R$(r.children[l],s);if(u.bbox){var c=u.bbox;u.attrs.next==="inline"?s.x+=u.bbox.width:s.y+=u.bbox.height,c.width+c.x>n.width&&(n.width=c.width+c.x),c.height+c.y>n.height&&(n.height=c.height+c.y)}}}return r.bbox=qhe(r,t,n),r.attrs=A(A({},r.attrs),r.bbox),r}function O$(r,t){var e,n,i,a,o=(r||{}).type,s=((t==null?void 0:t.attrs)||{}).key;if(s&&r&&(r.attrs.key=s),!r&&t)return{action:"delete",val:t,type:o,key:s};if(r&&!t)return{action:"add",val:r,type:o};if(!r&&!t)return{action:"same",type:o};var l=[];if(((e=r.children)===null||e===void 0?void 0:e.length)>0||((n=t.children)===null||n===void 0?void 0:n.length)>0)for(var u=Math.max((i=r.children)===null||i===void 0?void 0:i.length,(a=t.children)===null||a===void 0?void 0:a.length),c=t.children||[],f=r.children||[],d=0;d<u;d+=1)l.push(O$(f[d],c[d]));var h=Object.keys(t.attrs),v=Object.keys(r.attrs);return t.type!==r.type?{action:"restructure",nowTarget:r,formerTarget:t,key:s,children:l}:h.filter(function(p){return p!=="children"}).some(function(p){return r.attrs[p]!==t.attrs[p]||!v.includes(p)})?{action:"change",val:r,children:l,type:o,key:s}:{action:"same",children:l,type:o,key:s}}function L$(r){var t={},e=function(i){var a=typeof r=="function"?r(i):r,o=Xhe(a)(i),s=document.createElement("div");s.innerHTML=o;var l=s.children[0],u=R$(D$(l,i));return s.remove(),u};return{draw:function(i,a){var o=e(i),s=a,l=function u(c){var f=c.attrs,d=f===void 0?{}:f,h=c.bbox,v=c.type,p=c.children,g=Lr(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var m=a.addShape(c.type,A({attrs:d,origin:{bbox:h,type:v,children:p}},g));c.keyshape&&(s=m)}c.children&&c.children.forEach(function(y){return u(y)})};return l(o),t[i.id]=[o],s},update:function(i,a){t[i.id]||(t[i.id]=[]);var o=a.getContainer(),s=o.get("children"),l=e(i),u=t[i.id].pop(),c=O$(l,u),f=function v(p){var g;p.type!=="group"&&o.addShape(p.type,{attrs:p.attrs}),((g=p.children)===null||g===void 0?void 0:g.length)&&p.children.map(function(m){return v(m)})},d=function v(p){var g,m=s.find(function(y){return y.attrs.key===p.attrs.key});m&&o.removeChild(m),((g=p.children)===null||g===void 0?void 0:g.length)&&p.children.map(function(y){return v(y)})},h=function v(p){var g=p.key;if(p.type!=="group"){var m=s.find(function(b){return b.attrs.key===g});switch(p.action){case"change":if(m){var y=p.val.keyshape?a.getOriginStyle():{};m.attr(A(A({},y),p.val.attrs))}break;case"add":f(p.val);break;case"delete":d(p.val);break;case"restructure":d(p.formerTarget),f(p.nowTarget);break}}p.children&&p.children.forEach(function(b){return v(b)})};h(c),t[i.id].push(l)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var yA={};function F$(r){return yA[r]||(yA[r]=rs(r)),yA[r]}var Khe={defaultShapeType:"defaultType",className:null,getShape:function(t){var e=this,n=e[t]||e[e.defaultShapeType]||e["simple-circle"];return n},draw:function(t,e,n){var i=this.getShape(t);n.shapeMap={};var a=i.draw(e,n);return i.afterDraw&&i.afterDraw(e,n,a),a},baseUpdate:function(t,e,n,i){var a,o,s=this.getShape(t);s.update&&(s.mergeStyle=(a=s.getOptions)===null||a===void 0?void 0:a.call(s,e,i),(o=s.update)===null||o===void 0||o.call(s,e,n,i)),s.afterUpdate&&s.afterUpdate(e,n)},setState:function(t,e,n,i){var a=this.getShape(t);a.setState(e,n,i)},shouldUpdate:function(t){var e=this.getShape(t);return!!e.update},getControlPoints:function(t,e){var n=this.getShape(t);return n.getControlPoints(e)},getAnchorPoints:function(t,e){var n=this.getShape(t);return n.getAnchorPoints(e)}},bA={options:{},draw:function(t,e){return this.drawShape(t,e)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e=this.options.anchorPoints,n=t.anchorPoints||e;return n}},Ci=function(){function r(){}return r.registerFactory=function(t,e){var n=F$(t),i=Khe,a=A(A({},i),e);return r[n]=a,a.className=n,a},r.getFactory=function(t){var e=F$(t);return r[e]},r.registerNode=function(t,e,n){var i=r.Node,a;if(typeof e=="string"||typeof e=="function"){var o=L$(e);a=A(A({},i.getShape("single-node")),o)}else if(e.jsx){var s=e.jsx,o=L$(s);a=A(A(A({},i.getShape("single-node")),o),e)}else{i.getShape(n);var l=n?i.getShape(n):bA;a=A(A({},l),e)}return a.type=t,a.itemType="node",i[t]=a,a},r.registerEdge=function(t,e,n){var i=r.Edge,a=n?i.getShape(n):bA,o=A(A({},a),e);return o.type=t,o.itemType="edge",i[t]=o,o},r.registerCombo=function(t,e,n){var i=r.Combo,a=n?i.getShape(n):bA,o=A(A({},a),e);return o.type=t,o.itemType="combo",i[t]=o,o},r}();Ci.registerFactory("node",{defaultShapeType:"circle"});Ci.registerFactory("edge",{defaultShapeType:"line"});Ci.registerFactory("combo",{defaultShapeType:"circle"});var xA="bboxCache",wA="bboxCanvasCache",N$=function(){function r(t){this._cfg={},this.destroyed=!1;var e={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(e,this.getDefaultCfg(),t);var n=this.get("model"),i=n.id,a=this.get("type");i||(i=gA(a),this.get("model").id=i),this.set("id",i);var o=t.group;o&&(o.set("item",this),o.set("id",i)),this.init(),this.draw();var s=n.shape||n.type||(a==="edge"?"line":"circle"),l=this.get("shapeFactory");if(l&&l[s]){var u=l[s].options;if(u&&u.stateStyles){var c=this.get("styles")||n.stateStyles;c=Mt({},u.stateStyles,c),this.set("styles",c)}}}return r.prototype.calculateBBox=function(){var t=this.get("keyShape"),e=this.get("group"),n=u1(t,e);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},r.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group"),n=u1(t,e);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},r.prototype.drawInner=function(){var t=this,e=t.get("shapeFactory"),n=t.get("group"),i=t.get("model");n.clear();var a=i.visible;if(a!==void 0&&!a&&t.changeVisibility(a),!!e){t.updatePosition(i);var o=t.getShapeCfg(i),s=o.type,l=e.draw(s,o,n);l&&(t.set("keyShape",l),l.set("isKeyShape",!0),l.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(e,s)}},r.prototype.setOriginStyle=function(){var t=this.get("group"),e=t.get("children"),n=this.getKeyShape(),i=this,a=n.get("name");if(this.get("originStyle")){var h=this.get("originStyle");a&&!h[a]&&(h[a]={});for(var v=this.getCurrentStatesStyle(),p=function(m){var y=e[m],b=y.get("name"),x=y.attr();if(b&&b!==a){var w=v[b];h[b]||(h[b]={}),w?Object.keys(x).forEach(function(_){var T=x[_];T!==w[_]&&(h[b][_]=T)}):h[b]=y.get("type")!=="image"?Mr(x):i.getShapeStyleByName(b)}else{var S=y.attr(),C={};Object.keys(v).forEach(function(_){var T=v[_];(_===a||!Ri(T))&&(C[_]=T)}),Object.keys(S).forEach(function(_){var T=S[_];C[_]!==T&&(a?h[a][_]=T:h[_]=T)})}},s=0;s<e.length;s++)p(s);delete h.path,delete h.matrix,delete h.x,delete h.y,h[a]&&(delete h[a].x,delete h[a].y,delete h[a].matrix,delete h[a].path),i.set("originStyle",h)}else{for(var o={},s=0;s<e.length;s++){var l=e[s],u=l.get("type"),c=l.get("name");if(c&&c!==a)o[c]=u!=="image"?Mr(l.attr()):i.getShapeStyleByName(c),u==="text"&&o[c]&&(delete o[c].x,delete o[c].y,delete o[c].matrix);else{var f=i.getShapeStyleByName();if(delete f.path,delete f.matrix,!a)Object.assign(o,f);else if(c)o[a]=f;else{var d=gA("shape");l.set("name",d),t.shapeMap[d]=l,o[d]=u!=="image"?Mr(l.attr()):i.getShapeStyleByName(c)}}}i.set("originStyle",o)}},r.prototype.restoreStates=function(t,e){var n=this,i=n.get("states");G(i,function(a){t.setState(e,a,!0,n)})},r.prototype.init=function(){var t=Ci.getFactory(this.get("type"));this.set("shapeFactory",t)},r.prototype.get=function(t){return this._cfg[t]},r.prototype.set=function(t,e){Ri(t)?this._cfg=A(A({},this._cfg),t):this._cfg[t]=e},r.prototype.getDefaultCfg=function(){return{}},r.prototype.clearCache=function(){this.set(xA,null),this.set(wA,null)},r.prototype.beforeDraw=function(){},r.prototype.afterDraw=function(){},r.prototype.afterUpdate=function(){},r.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},r.prototype.getShapeStyleByName=function(t){var e=this.get("group"),n;if(t?n=e.shapeMap[t]:n=this.getKeyShape(),n){var i={};return G(n.attr(),function(a,o){(o!=="img"||rt(a))&&(i[o]=a)}),i}return{}},r.prototype.getShapeCfg=function(t,e){var n=this.get("styles");if(n){var i=t;return i.style=A(A({},n),t.style),i}return t},r.prototype.getStateStyle=function(t){var e=this.get("styles"),n=e&&e[t];return n},r.prototype.getOriginStyle=function(){return this.get("originStyle")},r.prototype.getCurrentStatesStyle=function(){var t=this,e={},n=t.getStates();return!n||!n.length?this.get("originStyle"):(G(t.getStates(),function(i){e=Object.assign(e,t.getStateStyle(i))}),e)},r.prototype.setState=function(t,e){var n=this.get("states"),i=this.get("shapeFactory"),a=t,o=t;rt(e)&&(a=t+":"+e,o=t+":");var s=n;if(yu(e)){var l=n.indexOf(o);if(e){if(l>-1)return;n.push(a)}else l>-1&&n.splice(l,1)}else if(rt(e)){var u=n.filter(function(d){return d.includes(o)});u.length>0&&this.clearStates(u),s=s.filter(function(d){return!d.includes(o)}),s.push(a),this.set("states",s)}if(i){var c=this.get("model"),f=c.type;i.setState(f,t,e,this)}},r.prototype.clearStates=function(t){var e=this,n=e.getStates(),i=e.get("shapeFactory"),a=e.get("model"),o=a.type;t||(t=n),rt(t)&&(t=[t]);var s=n.filter(function(l){return t.indexOf(l)===-1});e.set("states",s),t.forEach(function(l){i.setState(o,l,!1,e)})},r.prototype.getContainer=function(){return this.get("group")},r.prototype.getKeyShape=function(){return this.get("keyShape")},r.prototype.getModel=function(){return this.get("model")},r.prototype.getType=function(){return this.get("type")},r.prototype.getID=function(){return this.get("id")},r.prototype.isItem=function(){return!0},r.prototype.getStates=function(){return this.get("states")},r.prototype.hasState=function(t){var e=this.getStates();return e.indexOf(t)>=0},r.prototype.refresh=function(t){var e=this.get("model");this.updatePosition(e),this.updateShape(t),this.afterUpdate(),this.clearCache()},r.prototype.getUpdateType=function(t){},r.prototype.update=function(t,e){e===void 0&&(e=void 0);var n=this.get("model");if(e==="move")this.updatePosition(t);else{var i=n.visible,a=t.visible;i!==a&&a!==void 0&&this.changeVisibility(a);var o={x:n.x,y:n.y};t.x=isNaN(+t.x)?n.x:+t.x,t.y=isNaN(+t.y)?n.y:+t.y;var s=this.get("styles");if(t.stateStyles){var l=t.stateStyles;$t(s,l),delete t.stateStyles}Object.assign(n,t),(o.x!==t.x||o.y!==t.y)&&this.updatePosition(t),this.updateShape(e)}this.afterUpdate(),this.clearCache()},r.prototype.updateShape=function(t){var e=this.get("shapeFactory"),n=this.get("model"),i=n.type;if(e.shouldUpdate(i)&&i===this.get("currentShape")){var a=this.getShapeCfg(n,t);e.baseUpdate(i,a,this,t),t!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(e,i)},r.prototype.updatePosition=function(t){var e=this.get("model"),n=isNaN(+t.x)?+e.x:+t.x,i=isNaN(+t.y)?+e.y:+t.y,a=this.get("group");if(isNaN(n)||isNaN(i))return!1;e.x=n,e.y=i;var o=a.getMatrix();return o&&o[6]===n&&o[7]===i?!1:(a.resetMatrix(),RB(a,{x:n,y:i}),this.clearCache(),!0)},r.prototype.getBBox=function(){var t=this.get(xA);return t||(t=this.calculateBBox(),this.set(xA,t)),t},r.prototype.getCanvasBBox=function(){var t=this.get(wA);return t||(t=this.calculateCanvasBBox(),this.set(wA,t)),t},r.prototype.toFront=function(){var t=this.get("group");t.toFront()},r.prototype.toBack=function(){var t=this.get("group");t.toBack()},r.prototype.show=function(){this.changeVisibility(!0)},r.prototype.hide=function(){this.changeVisibility(!1)},r.prototype.changeVisibility=function(t){var e=this.get("group");t?e.show():e.hide(),this.set("visible",t)},r.prototype.isVisible=function(){return this.get("visible")},r.prototype.enableCapture=function(t){var e=this.get("group");e&&e.set("capture",t)},r.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),e.shapeMap={},this.clearCache(),e.remove(),this._cfg=null,this.destroyed=!0}},r}(),O1={source:"start",target:"end"},Ll="Node",Lv="Point",Zhe="Anchor",Qhe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},t.prototype.setEnd=function(e,n){var i=O1[e]+Lv,a=e+Ll,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),Ri(n)?(this.set(i,n),this.set(a,null)):n&&(n.addEdge(this),this.set(a,n),this.set(i,null))},t.prototype.getLinkPoint=function(e,n,i){var a=O1[e]+Lv,o=e+Ll,s=this.get(a);if(!s){var l=this.get(o),u=e+Zhe,c=this.getPrePoint(e,i),f=n[u];Je(f)||(s=l.getLinkPointByAnchor(f)),s=s||l.getLinkPoint(c),Je(s.index)||this.set(e+"AnchorIndex",s.index)}return s},t.prototype.getPrePoint=function(e,n){if(n&&n.length){var i=e==="source"?0:n.length-1;return n[i]}var a=e==="source"?"target":"source";return this.getEndPoint(a)},t.prototype.getEndPoint=function(e){var n=e+Ll,i=O1[e]+Lv,a=this.get(n);return a?a.get("model"):this.get(i)},t.prototype.getControlPointsByCenter=function(e){var n=this.getEndPoint("source"),i=this.getEndPoint("target"),a=this.get("shapeFactory"),o=e.type;return a.getControlPoints(o,{startPoint:n,endPoint:i})},t.prototype.getEndCenter=function(e){var n=e+Ll,i=O1[e]+Lv,a=this.get(n);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(i)},t.prototype.init=function(){r.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},t.prototype.getShapeCfg=function(e,n){var i=this,a=i.get("linkCenter"),o=(n==null?void 0:n.includes("move"))?e:r.prototype.getShapeCfg.call(this,e);if(a)o.startPoint=i.getEndCenter("source"),o.endPoint=i.getEndCenter("target");else{var s=o.controlPoints||i.getControlPointsByCenter(o);o.startPoint=i.getLinkPoint("source",e,s),o.endPoint=i.getLinkPoint("target",e,s)}return o.sourceNode=i.get("sourceNode"),o.targetNode=i.get("targetNode"),o},t.prototype.getModel=function(){var e=this.get("model"),n=this.get("source"+Ll),i=this.get("target"+Ll);return n?delete e["source"+Ll]:e.source=this.get("start"+Lv),i?delete e["target"+Ll]:e.target=this.get("end"+Lv),!rt(e.source)&&!Ri(e.source)&&(e.source=e.source.getID()),!rt(e.target)&&!Ri(e.target)&&(e.target=e.target.getID()),e},t.prototype.setSource=function(e){this.setEnd("source",e),this.set("source",e)},t.prototype.setTarget=function(e){this.setEnd("target",e),this.set("target",e)},t.prototype.getSource=function(){return this.get("source")},t.prototype.getTarget=function(){return this.get("target")},t.prototype.updatePosition=function(){return!1},t.prototype.update=function(e,n){n===void 0&&(n=void 0);var i=this.get("model"),a=i.visible,o=e.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("styles");if(e.stateStyles){var l=e.stateStyles;$t(s,l),delete e.stateStyles}Object.assign(i,e),this.updateShape(n),this.afterUpdate(),this.clearCache()},t.prototype.destroy=function(){var e=this.get("source"+Ll),n=this.get("target"+Ll);e&&!e.destroyed&&e.removeEdge(this),n&&!n.destroyed&&n.removeEdge(this),r.prototype.destroy.call(this)},t}(N$),SA="anchorPointsCache",Jhe="bboxCache",B$=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getNearestPoint=function(e,n){for(var i=0,a=e[0],o=a1(e[0],n),s=0;s<e.length;s++){var l=e[s],u=a1(l,n);u<o&&(a=l,o=u,i=s)}return a.anchorIndex=i,a},t.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},t.prototype.getEdges=function(){return this.get("edges")},t.prototype.getInEdges=function(){var e=this;return this.get("edges").filter(function(n){return n.get("target")===e})},t.prototype.getOutEdges=function(){var e=this;return this.get("edges").filter(function(n){return n.get("source")===e})},t.prototype.getNeighbors=function(e){var n=this,i=this.get("edges");if(e==="target"){var a=function(u){return u.getSource()===n};return i.filter(a).map(function(l){return l.getTarget()})}if(e==="source"){var o=function(u){return u.getTarget()===n};return i.filter(o).map(function(l){return l.getSource()})}var s=function(u){return u.getSource()===n?u.getTarget():u.getSource()};return i.map(s)},t.prototype.getLinkPointByAnchor=function(e){var n=this.getAnchorPoints();return n[e]},t.prototype.getLinkPoint=function(e){var n=this.get("keyShape"),i=n.get("type"),a=this.get("type"),o,s,l=this.getBBox();a==="combo"?(o=l.centerX||(l.maxX+l.minX)/2,s=l.centerY||(l.maxY+l.minY)/2):(o=l.centerX,s=l.centerY);var u=this.getAnchorPoints(),c;switch(i){case"circle":c=IB({x:o,y:s,r:l.width/2},e);break;case"ellipse":c=PB({x:o,y:s,rx:l.width/2,ry:l.height/2},e);break;default:c=kB(l,e)}var f=c;return u.length&&(f||(f=e),f=this.getNearestPoint(u,f)),f||(f={x:o,y:s}),f},t.prototype.getAnchorPoints=function(){var e=this.get(SA);if(!e){e=[];var n=this.get("shapeFactory"),i=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,l=n.getAnchorPoints(s,o)||[];G(l,function(u,c){var f={x:i.minX+u[0]*i.width,y:i.minY+u[1]*i.height,anchorIndex:c};e.push(f)}),this.set(SA,e)}return e},t.prototype.addEdge=function(e){this.get("edges").push(e)},t.prototype.lock=function(){this.set("locked",!0)},t.prototype.unlock=function(){this.set("locked",!1)},t.prototype.hasLocked=function(){return this.get("locked")},t.prototype.removeEdge=function(e){var n=this.getEdges(),i=n.indexOf(e);i>-1&&n.splice(i,1)},t.prototype.clearCache=function(){this.set(Jhe,null),this.set(SA,null)},t.prototype.getUpdateType=function(e){var n,i,a,o,s;if(!!e){var l=!Je(e.x),u=!Je(e.y),c=Object.keys(e);if(c.length===1&&(l||u)||c.length===2&&l&&u)return"move";if(Rt(e.x)||Rt(e.y)||e.type||e.anchorPoints||e.size||(e==null?void 0:e.style)&&(((n=e==null?void 0:e.style)===null||n===void 0?void 0:n.r)||((i=e==null?void 0:e.style)===null||i===void 0?void 0:i.width)||((a=e==null?void 0:e.style)===null||a===void 0?void 0:a.height)||((o=e==null?void 0:e.style)===null||o===void 0?void 0:o.rx)||((s=e==null?void 0:e.style)===null||s===void 0?void 0:s.ry)))return"bbox|label";var f=c.includes("label")||c.includes("labelCfg");return f?"style|label":"style"}},t}(N$),$$="bboxCache",z$="bboxCanvasCache",CA="sizeCache",G$="anchorPointsCache",eve=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},t.prototype.getShapeCfg=function(e){var n=this.get("styles"),i=this.get("bbox");if(n&&i){var a=e,o={r:Math.hypot(i.height,i.width)/2||Zt.defaultCombo.size[0]/2,width:i.width||Zt.defaultCombo.size[0],height:i.height||Zt.defaultCombo.size[1]};a.style=A(A(A({},n),e.style),o);var s=e.padding||Zt.defaultCombo.padding;return Rt(s)?(o.r+=s,o.width+=s*2,o.height+=s*2):(o.r+=s[0],o.width+=s[1]+s[3]||s[1]*2,o.height+=s[0]+s[2]||s[0]*2),this.set(CA,o),a}return e},t.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var e=this.get("keyShape"),n=this.get("group"),i=u1(e,n);i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2;var a=this.get(CA),o=this.get($$)||{},s=o.x,l=o.x;if(a){a.width=Math.max(a.width,i.width),a.height=Math.max(a.height,i.height);var u=e.get("type");u==="circle"?(i.width=a.r*2,i.height=a.r*2):(i.width=a.width,i.height=a.height),i.minX=i.centerX-i.width/2,i.minY=i.centerY-i.height/2,i.maxX=i.centerX+i.width/2,i.maxY=i.centerY+i.height/2}else i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2;return i.x=i.minX,i.y=i.minY,(i.x!==s||i.y!==l)&&this.set(G$,null),i}},t.prototype.getChildren=function(){var e=this;return{nodes:e.getNodes(),combos:e.getCombos()}},t.prototype.getNodes=function(){var e=this;return e.get("nodes")},t.prototype.getCombos=function(){var e=this;return e.get("combos")},t.prototype.addChild=function(e){var n=this,i=e.getType();switch(i){case"node":n.addNode(e);break;case"combo":n.addCombo(e);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},t.prototype.addCombo=function(e){var n=this;return n.get("combos").push(e),!0},t.prototype.addNode=function(e){var n=this;return n.get("nodes").push(e),!0},t.prototype.removeChild=function(e){var n=this,i=e.getType();switch(i){case"node":n.removeNode(e);break;case"combo":n.removeCombo(e);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},t.prototype.removeCombo=function(e){if(!!e){var n=this.getCombos(),i=n.indexOf(e);return i>-1?(n.splice(i,1),!0):!1}},t.prototype.removeNode=function(e){if(!!e){var n=this.getNodes(),i=n.indexOf(e);return i>-1?(n.splice(i,1),!0):!1}},t.prototype.getUpdateType=function(e){},t.prototype.getBBox=function(){this.set(z$,null);var e=this.calculateCanvasBBox();return e},t.prototype.clearCache=function(){this.set($$,null),this.set(z$,null),this.set(G$,null)},t.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),n=this.get("group");e&&n.stopAnimate(),n.shapeMap={},this.clearCache(),this.set(CA,null),this.set("bbox",null),n.remove(),this._cfg=null,this.destroyed=!0}},t}(B$),zm="node",L1="edge",U$="vedge",Gm="combo",tve="default",V$="Mapper",Su="stateStyles",rve=function(){function r(t){var e=this;this.edgeToBeUpdateMap={},this.throttleRefresh=xv(function(n){var i,a=e.graph;if(!(!a||a.get("destroyed"))){var o=e.edgeToBeUpdateMap;!o||!((i=Object.keys(o))===null||i===void 0?void 0:i.length)||(Object.keys(o).forEach(function(s){var l=o[s].edge;!l||l.destroyed||l.refresh(o[s].updateType)}),e.edgeToBeUpdateMap={})}},16,{trailing:!0,leading:!0}),this.graph=t,this.destroyed=!1}return r.prototype.addItem=function(t,e){var n=this.graph,i=t===U$?L1:t,a=n.get(i+"Group")||n.get("group"),o=rs(i),s=null,l=n.get(i+rs(Su))||{},u=n.get(tve+o);e[Su]&&(l=e[Su]),u&&G(u,function(y,b){Kr(y)&&!qe(y)?e[b]=Mt({},y,e[b]):qe(y)?e[b]=e[b]||Mr(u[b]):e[b]=e[b]||u[b]});var c=n.get(i+V$);if(c){var f=c(e);f[Su]&&(l=f[Su],delete f[Su]),G(f,function(y,b){Kr(y)&&!qe(y)?e[b]=Mt({},e[b],y):e[b]=f[b]||e[b]})}if(n.emit("beforeadditem",{type:t,model:e}),t===L1||t===U$){var d=void 0,h=void 0;if(d=e.source,h=e.target,d&&rt(d)&&(d=n.findById(d)),h&&rt(h)&&(h=n.findById(h)),!d||!h){console.warn("The source or target node of edge "+e.id+" does not exist!");return}d.getType&&d.getType()==="combo"&&(e.isComboEdge=!0),h.getType&&h.getType()==="combo"&&(e.isComboEdge=!0),s=new Qhe({model:e,source:d,target:h,styles:l,linkCenter:n.get("linkCenter"),group:a.addGroup()})}else if(t===zm)s=new B$({model:e,styles:l,group:a.addGroup()});else if(t===Gm){var v=e.children,p=Em(v,n);isNaN(p.x)?isNaN(e.x)&&(e.x=Math.random()*100):e.x=p.x,isNaN(p.y)?isNaN(e.y)&&(e.y=Math.random()*100):e.y=p.y;var g=a.addGroup();g.setZIndex(e.depth),s=new eve({model:e,styles:l,bbox:e.collapsed?Em([],n):p,group:g});var m=s.getModel();(v||[]).forEach(function(y){var b=n.findById(y.id);s.addChild(b),y.depth=m.depth+2}),e.collapsed&&setTimeout(function(){s.destroyed||n.collapseCombo(s)},0)}if(s)return n.get(t+"s").push(s),n.get("itemMap")[s.get("id")]=s,n.emit("afteradditem",{item:s,model:e}),s},r.prototype.updateItem=function(t,e){var n=this,i,a,o=this.graph;if(rt(t)&&(t=o.findById(t)),!(!t||t.destroyed)){var s="";t.getType&&(s=t.getType());var l=o.get(s+V$),u=t.getModel(),c=t.getUpdateType(e);if(l){var f=Mt({},u,e),d=l(f),h=Mt({},u,d,e);d[Su]&&(t.set("styles",h[Su]),delete h[Su]),G(h,function(w,S){e[S]=w})}else G(e,function(w,S){u[S]&&Kr(w)&&!qe(w)&&(e[S]=A(A({},u[S]),e[S]))});if(o.emit("beforeupdateitem",{item:t,cfg:e}),s===L1){if(e.source){var v=e.source;rt(v)&&(v=o.findById(v)),t.setSource(v)}if(e.target){var p=e.target;rt(p)&&(p=o.findById(p)),t.setTarget(p)}t.update(e)}if(s===zm||s===Gm){t.update(e,c);var g=t.getEdges(),m=(c==null?void 0:c.includes("bbox"))||c==="move";if(s===zm)c==="move"?G(g,function(w){n.edgeToBeUpdateMap[w.getID()]={edge:w,updateType:c},n.throttleRefresh()}):m&&G(g,function(w){w.refresh(c)});else if(m&&s===Gm){var y=t.get("shapeFactory"),b=u.type||"circle",x=u.animate===void 0||e.animate===void 0?(a=(i=y[b])===null||i===void 0?void 0:i.options)===null||a===void 0?void 0:a.animate:u.animate||e.animate;x?setTimeout(function(){if(!(!t||t.destroyed)){var w=t.getKeyShape();!w||w.destroyed||G(g,function(S){S&&!S.destroyed&&S.refresh()})}},201):G(g,function(w){w.refresh()})}}o.emit("afterupdateitem",{item:t,cfg:e})}},r.prototype.updateCombo=function(t,e){var n=this,i,a,o=this.graph;if(rt(t)&&(t=o.findById(t)),!(!t||t.destroyed)){var s=t.getModel(),l=Em(s.collapsed?[]:e,o),u=s.collapsed?Em(e,o):l,c=u.x,f=u.y;t.set("bbox",l),t.update({x:c,y:f});var d=t.get("shapeFactory"),h=s.type||"circle",v=s.animate===void 0?(a=(i=d[h])===null||i===void 0?void 0:i.options)===null||a===void 0?void 0:a.animate:s.animate;v?setTimeout(function(){if(!(!t||t.destroyed)){var p=t.getKeyShape();!p||p.destroyed||(t.getShapeCfg(s),n.updateComboEdges(t))}},201):this.updateComboEdges(t)}},r.prototype.updateComboEdges=function(t){for(var e=t.getEdges()||[],n=0;n<e.length;n++){var i=e[n];if(i&&!i.destroyed){var a=i.get("shapeFactory"),o=i.getShapeCfg(i.getModel()),s=i.getContainer();s.clear();var l=a.draw(o.type,o,s);i.set("keyShape",l),l.set("isKeyShape",!0),l.set("draggable",!0),i.setOriginStyle()}}},r.prototype.collapseCombo=function(t){var e=this.graph;rt(t)&&(t=e.findById(t));var n=t.getChildren();n.nodes.forEach(function(i){e.hideItem(i)}),n.combos.forEach(function(i){e.hideItem(i)})},r.prototype.expandCombo=function(t){var e=this.graph;rt(t)&&(t=e.findById(t));var n=t.getChildren();n.nodes.forEach(function(i){e.showItem(i)}),n.combos.forEach(function(i){i.getModel().collapsed?i.show():e.showItem(i)})},r.prototype.removeItem=function(t){var e=this,n=this.graph;if(rt(t)&&(t=n.findById(t)),!(!t||t.destroyed)){var i=Mr(t.getModel());n.emit("beforeremoveitem",{item:i});var a="";t.getType&&(a=t.getType());var o=n.get(a+"s"),s=o.indexOf(t);if(s>-1&&o.splice(s,1),a===L1){var l=n.get("v"+a+"s"),u=l.indexOf(t);u>-1&&l.splice(u,1)}var c=t.get("id"),f=n.get("itemMap");delete f[c];var d=n.get("comboTrees"),h=t.get("id");if(a===zm){var v=t.getModel().comboId;if(d&&v){var p=d,g=!1;d.forEach(function(S){g||os(S,function(C){if(C.id===h&&p){var _=p.indexOf(C);return p.splice(_,1),g=!0,!1}return p=C.children,!0})})}for(var m=t.getEdges(),y=m.length-1;y>=0;y--)n.removeItem(m[y],!1);v&&n.updateCombo(v)}else if(a===Gm){var b=t.getModel().parentId,x,w=!1;(d||[]).forEach(function(C){w||os(C,function(_){return _.id===h?(x=_,w=!0,!1):!0})}),x.removed=!0,x&&x.children&&x.children.forEach(function(C){e.removeItem(C.id)});for(var m=t.getEdges(),y=m.length;y>=0;y--)n.removeItem(m[y],!1);b&&n.updateCombo(b)}t.destroy(),n.emit("afterremoveitem",{item:i,type:a})}},r.prototype.setItemState=function(t,e,n){var i=this.graph,a=e;rt(n)&&(a=e+":"+n),!(t.hasState(a)===n&&n||rt(n)&&t.hasState(a))&&(i.emit("beforeitemstatechange",{item:t,state:a,enabled:n}),t.setState(e,n),i.autoPaint(),i.emit("afteritemstatechange",{item:t,state:a,enabled:n}))},r.prototype.priorityState=function(t,e){var n=this.graph,i=t;rt(t)&&(i=n.findById(t)),this.setItemState(i,e,!1),this.setItemState(i,e,!0)},r.prototype.clearItemStates=function(t,e){var n=this.graph;rt(t)&&(t=n.findById(t)),n.emit("beforeitemstatesclear",{item:t,states:e}),t.clearStates(e),n.emit("afteritemstatesclear",{item:t,states:e})},r.prototype.refreshItem=function(t){var e=this.graph;rt(t)&&(t=e.findById(t)),e.emit("beforeitemrefresh",{item:t}),t.refresh(),e.emit("afteritemrefresh",{item:t})},r.prototype.addCombos=function(t,e){var n=this,i=this.graph;(t||[]).forEach(function(o){Ec(o,function(s){var l;return e.forEach(function(u){u.id===s.id&&(u.children=s.children,u.depth=s.depth,l=u)}),l&&n.addItem("combo",l),!0})});var a=i.get("comboGroup");a&&a.sort()},r.prototype.changeItemVisibility=function(t,e){var n=this,i=this.graph;if(rt(t)&&(t=i.findById(t)),!t){console.warn("The item to be shown or hidden does not exist!");return}if(i.emit("beforeitemvisibilitychange",{item:t,visible:e}),t.changeVisibility(e),t.getType&&t.getType()===zm){var a=t.getEdges();G(a,function(c){e&&!(c.get("source").isVisible()&&c.get("target").isVisible())||n.changeItemVisibility(c,e)})}else if(t.getType&&t.getType()===Gm){var o=i.get("comboTrees"),s=t.get("id"),l=[],u=!1;(o||[]).forEach(function(f){u||!f.children||f.children.length===0||os(f,function(d){return d.id===s?(l=d.children,u=!0,!1):!0})}),l&&(!e||e&&!t.getModel().collapsed)&&l.forEach(function(f){var d=i.findById(f.id);n.changeItemVisibility(d,e)});var a=t.getEdges();G(a,function(f){e&&!(f.get("source").isVisible()&&f.get("target").isVisible())||n.changeItemVisibility(f,e)})}return i.emit("afteritemvisibilitychange",{item:t,visible:e}),t},r.prototype.destroy=function(){this.graph=null,this.destroyed=!0},r}(),ld=null,nve=function(){function r(t){this.graph=t,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return r.checkCache=function(t,e,n){if(!!n[e]){var i=n[e].indexOf(t);i>=0&&n[e].splice(i,1)}},r.cacheState=function(t,e,n){n[e]||(n[e]=[]),n[e].push(t)},r.prototype.updateState=function(t,e,n){var i=this,a=r.checkCache,o=r.cacheState;if(!t.destroyed){var s=this.cachedStates,l=s.enabled,u=s.disabled;n?(a(t,e,u),o(t,e,l)):(a(t,e,l),o(t,e,u)),ld&&clearTimeout(ld),ld=setTimeout(function(){ld=null,i.updateGraphStates()},16)}},r.prototype.updateStates=function(t,e,n){var i=this;rt(e)?this.updateState(t,e,n):e.forEach(function(a){i.updateState(t,a,n)})},r.prototype.updateGraphStates=function(){var t=this.graph.get("states"),e=this.cachedStates;G(e.disabled,function(n,i){t[i]&&(t[i]=t[i].filter(function(a){return n.indexOf(a)<0&&!n.destroyed}))}),G(e.enabled,function(n,i){if(!t[i])t[i]=n;else{var a={};t[i].forEach(function(o){o.destroyed||(a[o.get("id")]=!0)}),n.forEach(function(o){if(!o.destroyed){var s=o.get("id");a[s]||(a[s]=!0,t[i].push(o))}})}}),this.graph.emit("graphstatechange",{states:t}),this.cachedStates={enabled:{},disabled:{}}},r.prototype.destroy=function(){this.graph=null,this.cachedStates=null,ld&&clearTimeout(ld),ld=null,this.destroyed=!0},r}(),ive=function(t,e){return!t||!e?t:t.replace(/\\?\{([^{}]+)\}/g,function(n,i){if(n.charAt(0)==="\\")return n.slice(1);var a=e[i];return a===0&&(a="0"),a||""})},H$=function(t){var e=[];if(t.length<2)throw new Error("point length must largn than 2, now it's "+t.length);for(var n=0,i=t;n<i.length;n++){var a=i[n],o=a.x,s=a.y;e.push(o),e.push(s)}var l=fA(e);return l.unshift(["M",t[0].x,t[0].y]),l},F1=function(t,e,n,i){n===void 0&&(n=0),i===void 0&&(i=0);var a={x:(1-n)*t.x+n*e.x,y:(1-n)*t.y+n*e.y},o=[0,0];wc(o,[e.x-t.x,e.y-t.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*i,o[0]*i];return a.x+=s[0],a.y+=s[1],a},ave=function(t,e){var n=t.length;if(!n)return"";for(var i="",a="",o=0;o<n;o++){var s=t[o];o===0?a="M{x} {y}":a="L{x} {y}",i+=ive(a,s)}return e&&(i+="Z"),i},EA=function(t){var e=[];return t.forEach(function(n){var i=n[0];if(i!=="A")for(var a=1;a<n.length;a=a+2)e.push([n[a],n[a+1]]);else{var o=n.length;e.push([n[o-2],n[o-1]])}}),e},_A=function(t){if(t.length<2)throw new Error("point length must largn than 2, now it's "+t.length);var e=t[0],n=t[1],i=t[t.length-1],a=t[t.length-2];t.unshift(i),t.unshift(a),t.push(e),t.push(n);for(var o=[],s=1;s<t.length-2;s+=1){var l=t[s-1].x,u=t[s-1].y,c=t[s].x,f=t[s].y,d=t[s+1].x,h=t[s+1].y,v=s!==t.length-2?t[s+2].x:d,p=s!==t.length-2?t[s+2].y:h,g=c+(d-l)/6,m=f+(h-u)/6,y=d-(v-c)/6,b=h-(p-f)/6;o.push(["C",g,m,y,b,d,h])}return o.unshift(["M",i.x,i.y]),o},W$=function(t,e){return di([0,0],wc([0,0],t),e)},j$=function(t,e){var n=[t[1]-e[1],e[0]-t[0]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(i===0)throw new Error("p0 should not be equal to p1");return[n[0]/i,n[1]/i]},Y$=function(t,e){return[e[0]-t[0],e[1]-t[1]]};function TA(r,t){var e=function(f){var d=[f[0][0],f[0][1]-t],h=[f[0][0],f[0][1]+t];return"M "+d+" A "+t+","+t+",0,0,0,"+h+" A "+t+","+t+",0,0,0,"+d},n=function(f){var d=di([0,0],j$(f[0],f[1]),t),h=di([0,0],d,-1),v=Oi([0,0],f[0],d),p=Oi([0,0],f[1],d),g=Oi([0,0],f[1],h),m=Oi([0,0],f[0],h);return"M "+v+" L "+p+" A "+[t,t,"0,0,0",g].join(",")+" L "+m+" A "+[t,t,"0,0,0",v].join(",")};if(!r||r.length<1)return"";if(r.length===1)return e(r);if(r.length===2)return n(r);for(var i=new Array(r.length),a=0;a<i.length;++a){var o=a===0?r[r.length-1]:r[a-1],s=r[a],l=di([0,0],j$(o,s),t);i[a]=[Oi([0,0],o,l),Oi([0,0],s,l)]}var u="A "+[t,t,"0,0,0,"].join(",");return i=i.map(function(c,f){var d="";return f===0&&(d="M "+i[i.length-1][1]+" "),d+=u+c[0]+" L "+c[1],d}),i.join(" ")}function X$(r,t){var e=r.length,n=function(c){var f=[c[0][0],c[0][1]-t],d=[c[0][0],c[0][1]+t];return"M "+f+" A "+[t,t,"0,0,0",d].join(",")+" A "+[t,t,"0,0,0",f].join(",")},i=function(c){var f=Y$(c[0],c[1]),d=W$(f,t),h=Oi([0,0],c[0],di([0,0],d,-1)),v=Oi([0,0],c[1],d),p=1.2*t,g=W$(wc([0,0],f),p),m=di([0,0],g,-1),y=Oi([0,0],h,m),b=Oi([0,0],v,m),x=Oi([0,0],h,g);return"M "+h+" C "+[y,b,v].join(",")+" S "+[x,h].join(",")+" Z"};if(!r||e<1)return"";if(e===1)return n(r);if(e===2)return i(r);for(var a=r.map(function(u,c){var f=r[(c+1)%e];return{p:u,v:wc([0,0],Y$(u,f))}}),o=0;o<a.length;++o){var s=o>0?o-1:e-1,l=wc([0,0],Oi([0,0],a[s].v,di([0,0],a[o].v,-1)));a[o].p=Oi([0,0],a[o].p,di([0,0],l,t))}return a.map(function(u){var c=u.p;return{x:c[0],y:c[1]}})}var ove=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getSpline:H$,getControlPoint:F1,pointsToPolygon:ave,pathToPoints:EA,getClosedSpline:_A,roundedHull:TA,paddedHull:X$}),q$=function(t,e,n){return(t.y-n.y)*(e.x-n.x)-(t.x-n.x)*(e.y-n.y)},K$=function(t){var e=t.map(function(s){return{x:s.getModel().x,y:s.getModel().y}});if(e.sort(function(s,l){return s.x===l.x?s.y-l.y:s.x-l.x}),e.length===1)return e;for(var n=[],i=0;i<e.length;i++){for(;n.length>=2&&q$(n[n.length-2],n[n.length-1],e[i])<=0;)n.pop();n.push(e[i])}for(var a=[],i=e.length-1;i>=0;i--){for(;a.length>=2&&q$(a[a.length-2],a[a.length-1],e[i])<=0;)a.pop();a.push(e[i])}a.pop(),n.pop();var o=n.concat(a);return o},sve={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function lve(r,t,e){var n=!1,i=function(l,u){return t.cells[l+u*t.width]},a=function(l,u){var c=0;return i(l-1,u-1)>=e&&(c+=1),i(l,u-1)>e&&(c+=2),i(l-1,u)>e&&(c+=4),i(l,u)>e&&(c+=8),c},o=function(l,u){for(var c=l,f=u,d,h,v=0;v<t.width*t.height;v++){if(d=c,h=f,r.findIndex(function(g){return g.x===c&&g.y===f})>-1){if(!(r[0].x!==c||r[0].y!==f))return!0}else r.push({x:c,y:f});var p=a(c,f);switch(p){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:d===0&&(h===-1?c-=1:c+=1);break;case 1:case 13:case 5:f--;break;case 9:d===1&&(h===0?f-=1:f+=1);break;case 10:case 8:case 11:f++;break;default:return console.warn("Marching squares invalid state: "+p),!0}}};this.march=function(){for(var s=0;s<t.width&&!n;s+=1)for(var l=0;l<t.height&&!n;l+=1)i(s,l)>e&&a(s,l)!==15&&(n=o(s,l));return n}}var uve=function(t,e,n){var i=Math.ceil(t/n),a=Math.ceil(e/n),o=new Float32Array(Math.max(0,i*a)).fill(0);return{cells:o,width:i,height:a}},cve=function(t,e,n){var i=null,a=Number.POSITIVE_INFINITY;return e.forEach(function(o){var s={x:t.getModel().x,y:t.getModel().y},l={x:o.getModel().x,y:o.getModel().y},u=o1(s,l),c=new od(s.x,s.y,l.x,l.y),f=n.reduce(function(d,h){return ET(h,c)>0?d+1:d},0);u*Math.pow(f+1,2)<a&&(i=o,a=u*Math.pow(f+1,2))}),i},Z$=function(t,e){var n=Number.POSITIVE_INFINITY,i=null;return t.forEach(function(a){var o=ET(a,e);o>=0&&o<n&&(i=a,n=o)}),i},fve=function(t,e,n,i){var a=[],o=[];o.push(t);for(var s=!0,l=0,u=function(h,v){var p=!1;return v.forEach(function(g){p||(_T(h,{x:g.x1,y:g.y1})||_T(h,{x:g.x2,y:g.y2}))&&(p=!0)}),p},c=function(h,v){for(var p=0,g=v;p<g.length;p++){var m=g[p],y=m.getBBox(),b=[[y.x,y.y],[y.x+y.width,y.y],[y.x,y.y+y.height],[y.x+y.width,y.y+y.height]];if(Cm(b,h.x,h.y))return!0}return!1};s&&l<n;){s=!1;for(var f=function(){var h=o.pop(),v=Z$(e,h);if(v){var p=NB(v,h),g=p[0],m=p[1];if(m===2){var y=function(x){for(var w=i,S=Q$(v,w,g,x),C=u(S,o)||u(S,a),_=c(S,e);!C&&_&&w>=1;)w/=1.5,S=Q$(v,w,g,x),C=u(S,o)||u(S,a),_=c(S,e);S&&!C&&(!x||!_)&&(o.push(new od(h.x1,h.y1,S.x,S.y)),o.push(new od(S.x,S.y,h.x2,h.y2)),s=!0)};y(!0),s||y(!1)}}s||a.push(h),l+=1};!s&&o.length;)f()}for(;o.length;)a.push(o.pop());return a};function dve(r,t,e,n,i){var a=cve(r,e,t);if(a===null)return[];var o=function(f){for(var d=[];f.length>0;){var h=f.pop();if(f.length===0){d.push(h);break}var v=f.pop(),p=new od(h.x1,h.y1,v.x2,v.y2),g=Z$(t,p);g?(d.push(h),f.push(v)):f.push(p)}return d},s=new od(r.getModel().x,r.getModel().y,a.getModel().x,a.getModel().y),l=fve(s,t,n,i),u=o(l);return u}var hve=function(t,e,n){var i=Object.assign(sve,n),a=BB(t.map(function(y){return{x:y.getModel().x,y:y.getModel().y}}));t=t.sort(function(y,b){return o1({x:y.getModel().x,y:y.getModel().y},a)-o1({x:b.getModel().x,y:b.getModel().y},a)});var o=[],s=[];t.forEach(function(y){var b=dve(y,e,o,i.maxRoutingIterations,i.morphBuffer);b.forEach(function(x){s.push(x)}),o.push(y)});for(var l=vve(t,s,i.nodeR0),u=uve(l.width,l.height,i.pixelGroupSize),c=[],f=[],d=0;d<i.maxMarchingIterations;d++)if(pve(t,e,s,l,u,i),c=[],f=[],!!new lve(c,u,i.threshold).march()){var h=c.map(function(y){return{x:Math.round(y.x*i.pixelGroupSize+l.minX),y:Math.round(y.y*i.pixelGroupSize+l.minY)}});if(h){var v=h.length;if(i.skip>1)for(v=Math.floor(h.length/i.skip);v<3&&i.skip>1;)i.skip-=1,v=Math.floor(h.length/i.skip);for(var p=0,g=0;g<v;g+=1,p+=i.skip)f.push({x:h[p].x,y:h[p].y})}var m=function(){for(var b=0,x=t;b<x.length;b++){var w=x[b],S=f.map(function(C){return[C.x,C.y]});if(!Cm(S,w.getBBox().centerX,w.getBBox().centerY))return!1}return!0};if(f&&m())return f;if(i.threshold*=.9,d<=i.maxMarchingIterations*.5)i.memberInfluenceFactor*=1.2,i.edgeInfluenceFactor*=1.2;else if(i.nonMemberInfluenceFactor!==0&&e.length>0)i.nonMemberInfluenceFactor*=.8;else break}return f};function vve(r,t,e){var n={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},i=[];r.forEach(function(l){i.push(l.getBBox())}),t.forEach(function(l){i.push(l.getBBox())});for(var a=0,o=i;a<o.length;a++){var s=o[a];n.minX=(s.minX<n.minX?s.minX:n.minX)-e,n.minY=(s.minY<n.minY?s.minY:n.minY)-e,n.maxX=(s.maxX>n.maxX?s.maxX:n.maxX)+e,n.maxY=(s.maxY>n.maxY?s.maxY:n.maxY)+e}return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.x=n.minX,n.y=n.minY,n}function pve(r,t,e,n,i,a){function o(h,v){var p=Math.floor((h-v)/a.pixelGroupSize);return p<0?0:p}function s(h,v){return h*a.pixelGroupSize+v}var l=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),u=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),c=function(v,p){var g=Math.min(o(v.minX,p+n.minX),i.width),m=Math.min(o(v.minY,p+n.minY),i.height),y=Math.min(o(v.maxX,-p+n.minX),i.width),b=Math.min(o(v.maxY,-p+n.minY),i.height);return[g,m,y,b]},f=function(v,p){for(var g=v.getBBox(),m=c(g,a.nodeR1),y=m[0],b=m[1],x=m[2],w=m[3],S=b;S<w;S+=1)for(var C=y;C<x;C+=1)if(!(p<0&&i[C+S*i.width]<=0)){var _=s(C,n.minX),T=s(S,n.minY),E=zB({x:_,y:T},{x:g.minX,y:g.minY,width:g.width,height:g.height});if(E<Math.pow(a.nodeR1,2)){var M=Math.sqrt(E)-a.nodeR1;i.cells[C+S*i.width]+=p*M*M}}},d=function(v,p){for(var g=v.getBBox(),m=c(g,a.edgeR1),y=m[0],b=m[1],x=m[2],w=m[3],S=b;S<w;S+=1)for(var C=y;C<x;C+=1)if(!(p<0&&i.cells[C+S*i.width]<=0)){var _=s(C,n.minX),T=s(S,n.minY),E=$B({x:_,y:T},v);if(E<Math.pow(a.edgeR1,2)){var M=Math.sqrt(E)-a.edgeR1;i.cells[C+S*i.width]+=p*M*M}}};a.nodeInfluenceFactor&&r.forEach(function(h){f(h,a.nodeInfluenceFactor/l)}),a.edgeInfluenceFactor&&e.forEach(function(h){d(h,a.edgeInfluenceFactor/u)}),a.negativeNodeInfluenceFactor&&t.forEach(function(h){f(h,a.negativeNodeInfluenceFactor/l)})}function Q$(r,t,e,n){var i=r.getBBox(),a=e[0],o=e[1],s=e[2],l=e[3],u={topLeft:{x:i.minX-t,y:i.minY-t},topRight:{x:i.maxX+t,y:i.minY-t},bottomLeft:{x:i.minX-t,y:i.maxY+t},bottomRight:{x:i.maxX+t,y:i.maxY+t}},c=i.height*i.width;function f(v,p){return i.width*((v.y-i.minY+(p.y-i.minY))*.5)}if(o){if(a)return n?u.topLeft:u.bottomRight;if(s)return n?u.bottomLeft:u.topRight;var d=f(o,l);return d<c*.5?o.y>l.y?n?u.topLeft:u.bottomRight:n?u.topRight:u.bottomLeft:o.y<l.y?n?u.bottomLeft:u.topRight:n?u.bottomRight:u.topLeft}if(l){if(a)return n?u.topRight:u.bottomLeft;if(s)return n?u.bottomRight:u.topLeft}var h=f(a,s);return h<c*.5?a.x>s.x?n?u.topLeft:u.bottomRight:n?u.bottomLeft:u.topRight:a.x<s.x?n?u.topRight:u.bottomLeft:n?u.bottomRight:u.topLeft}var gve=function(){function r(t,e){this.cfg=Mt(this.getDefaultCfg(),e),this.graph=t,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(n){return rt(n)?t.findById(n):n}),this.nonMembers=this.cfg.nonMembers.map(function(n){return rt(n)?t.findById(n):n}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return r.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},r.prototype.setPadding=function(){var t=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+t:10+t,this.cfg.bubbleCfg={nodeR0:this.padding-t,nodeR1:this.padding-t,morphBuffer:this.padding-t}},r.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},r.prototype.calcPath=function(t,e){var n,i,a;switch(this.type){case"round-convex":n=K$(t),a=TA(n.map(function(o){return[o.x,o.y]}),this.padding),i=$m(a);break;case"smooth-convex":n=K$(t),n.length===2?(a=TA(n.map(function(o){return[o.x,o.y]}),this.padding),i=$m(a)):n.length>2&&(a=X$(n.map(function(o){return[o.x,o.y]}),this.padding),i=_A(a));break;case"bubble":n=hve(t,e,this.cfg.bubbleCfg),i=n.length>=2&&_A(n);break}return i},r.prototype.render=function(){this.group.addShape("path",{attrs:A({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},r.prototype.addMember=function(t){if(!!t){rt(t)&&(t=this.graph.findById(t)),this.members.push(t);var e=this.nonMembers.indexOf(t);return e>-1&&this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},r.prototype.addNonMember=function(t){if(!!t){rt(t)&&(t=this.graph.findById(t)),this.nonMembers.push(t);var e=this.members.indexOf(t);return e>-1&&this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},r.prototype.removeMember=function(t){if(!!t){rt(t)&&(t=this.graph.findById(t));var e=this.members.indexOf(t);return e>-1?(this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0):!1}},r.prototype.removeNonMember=function(t){if(!!t){rt(t)&&(t=this.graph.findById(t));var e=this.nonMembers.indexOf(t);return e>-1?(this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0):!1}},r.prototype.updateData=function(t,e){var n=this;this.group.findById(this.id).remove(),t&&(this.members=t.map(function(i){return rt(i)?n.graph.findById(i):i})),e&&(this.nonMembers=e.map(function(i){return rt(i)?n.graph.findById(i):i})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},r.prototype.updateStyle=function(t){var e=this.group.findById(this.id);e.attr(A({},t))},r.prototype.updateCfg=function(t){var e=this;this.cfg=Mt(this.cfg,t),this.id=this.cfg.id,this.group=this.cfg.group,t.members&&(this.members=this.cfg.members.map(function(n){return rt(n)?e.graph.findById(n):n})),t.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(n){return rt(n)?e.graph.findById(n):n})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},r.prototype.contain=function(t){var e=this,n;rt(t)?n=this.graph.findById(t):n=t;var i,a=n.getKeyShape();if(n.get("type")==="path")i=EA(a.attr("path"));else{var o=a.getCanvasBBox();i=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return i=i.map(function(s){var l=e.graph.getPointByCanvas(s[0],s[1]);return[l.x,l.y]}),FB(i,EA(this.path))},r.prototype.destroy=function(){this.group.remove(),this.cfg=null},r}(),Um=Un,mve="node",yve=function(r){Te(t,r);function t(e){var n=r.call(this)||this;return n.cfg=Mt(n.getDefaultCfg(),e),n.init(),n.animating=!1,n.destroyed=!1,n.cfg.enabledStack&&(n.undoStack=new t1(n.cfg.maxStep),n.redoStack=new t1(n.cfg.maxStep)),n}return t.prototype.init=function(){this.initCanvas();var e=new jhe(this),n=new mfe(this),i=new rve(this),a=new nve(this);this.set({viewController:e,modeController:n,itemController:i,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},t.prototype.initGroups=function(){var e=this.get("canvas");if(!!e){var n=e.get("el"),i=(n||{}).id,a=i===void 0?"g6":i,o=e.addGroup({id:a+"-root",className:Zt.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:a+"-edge",className:Zt.edgeContainerClassName}),l=o.addGroup({id:a+"-node",className:Zt.nodeContainerClassName}),u=o.addGroup({id:a+"-combo",className:Zt.comboContainerClassName});u.toBack(),this.set({nodeGroup:l,edgeGroup:s,comboGroup:u})}var c=o.addGroup({id:a+"-delegate",className:Zt.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},t.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},t.prototype.set=function(e,n){return Ri(e)?this.cfg=A(A({},this.cfg),e):this.cfg[e]=n,this},t.prototype.get=function(e){var n;return(n=this.cfg)===null||n===void 0?void 0:n[e]},t.prototype.getGroup=function(){return this.get("group")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.getMinZoom=function(){return this.get("minZoom")},t.prototype.setMinZoom=function(e){return this.set("minZoom",e)},t.prototype.getMaxZoom=function(){return this.get("maxZoom")},t.prototype.setMaxZoom=function(e){return this.set("maxZoom",e)},t.prototype.getWidth=function(){return this.get("width")},t.prototype.getHeight=function(){return this.get("height")},t.prototype.clearItemStates=function(e,n){rt(e)&&(e=this.findById(e));var i=this.get("itemController");n||(n=e.get("states")),i.clearItemStates(e,n);var a=this.get("stateController");a.updateStates(e,n,!1)},t.prototype.node=function(e){typeof e=="function"&&this.set("nodeMapper",e)},t.prototype.edge=function(e){typeof e=="function"&&this.set("edgeMapper",e)},t.prototype.combo=function(e){typeof e=="function"&&this.set("comboMapper",e)},t.prototype.findById=function(e){return this.get("itemMap")[e]},t.prototype.find=function(e,n){var i,a=this.get(e+"s");return G(a,function(o,s){if(n(o,s))return i=o,i}),i},t.prototype.findAll=function(e,n){var i=[];return G(this.get(e+"s"),function(a,o){n(a,o)&&i.push(a)}),i},t.prototype.findAllByState=function(e,n){return this.findAll(e,function(i){return i.hasState(n)})},t.prototype.translate=function(e,n){var i=this.get("group"),a=Mr(i.getMatrix());a||(a=[1,0,0,0,1,0,0,0,1]),a=Um(a,[["t",e,n]]),i.setMatrix(a),this.emit("viewportchange",{action:"translate",matrix:i.getMatrix()}),this.autoPaint()},t.prototype.moveTo=function(e,n,i,a){var o=this.get("group");OB(o,{x:e,y:n},i,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},t.prototype.fitView=function(e,n){e&&this.set("fitViewPadding",e);var i=this.get("viewController");n?i.fitViewByRules(n):i.fitView(),this.autoPaint()},t.prototype.fitCenter=function(){var e=this.get("viewController");e.fitCenter(),this.autoPaint()},t.prototype.addBehaviors=function(e,n){var i=this.get("modeController");return i.manipulateBehaviors(e,n,!0),this},t.prototype.removeBehaviors=function(e,n){var i=this.get("modeController");return i.manipulateBehaviors(e,n,!1),this},t.prototype.updateBehavior=function(e,n,i){var a=this.get("modeController");return a.updateBehavior(e,n,i),this},t.prototype.zoom=function(e,n,i,a){var o=this,s=this.get("group"),l=Mr(s.getMatrix()),u=this.get("minZoom"),c=this.get("maxZoom");if(l||(l=[1,0,0,0,1,0,0,0,1]),n?l=Um(l,[["t",-n.x,-n.y],["s",e,e],["t",n.x,n.y]]):l=Um(l,[["s",e,e]]),u&&l[0]<u||c&&l[0]>c)return!1;if(i){var f=Mr(s.getMatrix());f||(f=[1,0,0,0,1,0,0,0,1]);var d=f[0],h=d*e,v=void 0;if(!a)v={duration:500,callback:function(){o.emit("viewportchange",{action:"zoom",matrix:f})}};else if(a.callback){var p=a.callback;v=Mr(a),v.callback=function(){o.emit("viewportchange",{action:"zoom",matrix:f}),p()}}else v=a;s.animate(function(g){if(g===1)f=l;else{var m=GB(d,h,g)/f[0];n?f=Um(f,[["t",-n.x,-n.y],["s",m,m],["t",n.x,n.y]]):f=Um(f,[["s",m,m]])}return{matrix:f}},v)}else s.setMatrix(l),this.emit("viewportchange",{action:"zoom",matrix:l}),this.autoPaint();return!0},t.prototype.zoomTo=function(e,n){var i=e/this.getZoom();return this.zoom(i,n)},t.prototype.focusItem=function(e,n,i){var a=this.get("viewController"),o=!1;n?o=!0:n===void 0&&(o=this.get("animate"));var s={};i?s=i:i===void 0&&(s=this.get("animateCfg")),a.focus(e,o,s),this.autoPaint()},t.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},t.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},t.prototype.getPointByClient=function(e,n){var i=this.get("viewController");return i.getPointByClient(e,n)},t.prototype.getClientByPoint=function(e,n){var i=this.get("viewController");return i.getClientByPoint(e,n)},t.prototype.getPointByCanvas=function(e,n){var i=this.get("viewController");return i.getPointByCanvas(e,n)},t.prototype.getCanvasByPoint=function(e,n){var i=this.get("viewController");return i.getCanvasByPoint(e,n)},t.prototype.getGraphCenterPoint=function(){var e=this.get("group").getCanvasBBox();return{x:(e.minX+e.maxX)/2,y:(e.minY+e.maxY)/2}},t.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},t.prototype.showItem=function(e,n){n===void 0&&(n=!0);var i=this.get("itemController"),a=i.changeItemVisibility(e,!0);if(n&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),l={},u={};switch(s){case"node":l.nodes=[{id:o,visible:!1}],u.nodes=[{id:o,visible:!0}];break;case"edge":l.nodes=[{id:o,visible:!1}],u.edges=[{id:o,visible:!0}];break;case"combo":l.nodes=[{id:o,visible:!1}],u.combos=[{id:o,visible:!0}];break}this.pushStack("visible",{before:l,after:u})}},t.prototype.hideItem=function(e,n){n===void 0&&(n=!0);var i=this.get("itemController"),a=i.changeItemVisibility(e,!1);if(n&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),l={},u={};switch(s){case"node":l.nodes=[{id:o,visible:!0}],u.nodes=[{id:o,visible:!1}];break;case"edge":l.nodes=[{id:o,visible:!0}],u.edges=[{id:o,visible:!1}];break;case"combo":l.nodes=[{id:o,visible:!0}],u.combos=[{id:o,visible:!1}];break}this.pushStack("visible",{before:l,after:u})}},t.prototype.refreshItem=function(e){var n=this.get("itemController");n.refreshItem(e)},t.prototype.setAutoPaint=function(e){var n=this;n.set("autoPaint",e);var i=n.get("canvas");i.set("autoDraw",e)},t.prototype.remove=function(e,n){n===void 0&&(n=!0),this.removeItem(e,n)},t.prototype.removeItem=function(e,n){n===void 0&&(n=!0);var i=e;if(rt(e)&&(i=this.findById(e)),!i&&rt(e))console.warn("The item to be removed does not exist!");else if(i){var a="";if(i.getType&&(a=i.getType()),n&&this.get("enabledStack")){var o=A(A({},i.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var l=i.getEdges(),u=l.length-1;u>=0;u--)s.edges.push(A(A({},l[u].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var c=i.getModel();c.comboId&&this.updateComboTree(i,void 0,!1)}var f=this.get("itemController");if(f.removeItem(i),a==="combo"){var d=PT(this.get("comboTrees"));this.set("comboTrees",d)}}},t.prototype.addItem=function(e,n,i,a){i===void 0&&(i=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController");if(!gfe(e,n))return!1;if(n.id&&this.findById(n.id)){console.warn("This item exists already. Be sure the id %c"+n.id+"%c is unique.","font-size: 20px; color: red;","");return}var l,u=this.get("comboTrees");if(u||(u=[]),e==="combo"){var c=this.get("itemMap"),f=!1;if(u.forEach(function(x){f||Ec(x,function(w){if(n.parentId===w.id){f=!0;var S=A({id:n.id,depth:w.depth+2},n);w.children?w.children.push(S):w.children=[S],n.depth=S.depth,l=s.addItem(e,n)}var C=c[w.id];return f&&C&&C.getType&&C.getType()==="combo"&&s.updateCombo(C,w.children),!0})}),!f){var d=A({id:n.id,depth:0},n);n.depth=d.depth,u.push(d),l=s.addItem(e,n)}this.set("comboTrees",u)}else if(e==="node"&&rt(n.comboId)&&u){var h=this.findById(n.comboId);h&&h.getType&&h.getType()!=="combo"&&console.warn("'"+n.comboId+"' is not a id of a combo in the graph, the node will be added without combo."),l=s.addItem(e,n);var v=this.get("itemMap"),p=!1,g=!1;(u||[]).forEach(function(x){g||p||Ec(x,function(w){if(w.id===n.id)return g=!0,!1;if(n.comboId===w.id&&!g){p=!0;var S=Mr(n);S.itemType="node",w.children?w.children.push(S):w.children=[S],S.depth=w.depth+1}return p&&v[w.id].getType&&v[w.id].getType()==="combo"&&s.updateCombo(v[w.id],w.children),!0})})}else l=s.addItem(e,n);if(e==="node"&&n.comboId||e==="combo"&&n.parentId){var h=this.findById(n.comboId||n.parentId);h&&h.getType&&h.getType()==="combo"&&h.addChild(l)}var m=this.get("combos");if(m&&m.length>0&&this.sortCombos(),this.autoPaint(),i&&this.get("enabledStack")){var y=A(A({},l.getModel()),{itemType:e}),b={};switch(e){case"node":b.nodes=[y];break;case"edge":b.edges=[y];break;case"combo":b.combos=[y];break}this.pushStack("add",{before:{},after:b})}return l},t.prototype.add=function(e,n,i,a){return i===void 0&&(i=!0),a===void 0&&(a=!0),this.addItem(e,n,i,a)},t.prototype.updateItem=function(e,n,i){var a=this;i===void 0&&(i=!0);var o=this.get("itemController"),s;rt(e)?s=this.findById(e):s=e;var l=Mr(s.getModel()),u="";s.getType&&(u=s.getType());var c=Jn([],s.getStates(),!0);if(u==="combo"&&G(c,function(v){return a.setItemState(s,v,!1)}),o.updateItem(s,n),u==="combo"&&G(c,function(v){return a.setItemState(s,v,!0)}),i&&this.get("enabledStack")){var f={nodes:[],edges:[],combos:[]},d={nodes:[],edges:[],combos:[]},h=A({id:l.id},n);switch(u){case"node":f.nodes.push(l),d.nodes.push(h);break;case"edge":f.edges.push(l),d.edges.push(h);break;case"combo":f.combos.push(l),d.combos.push(h);break}u==="node"&&f.nodes.push(l),this.pushStack("update",{before:f,after:d})}},t.prototype.update=function(e,n,i){i===void 0&&(i=!0),this.updateItem(e,n,i)},t.prototype.setItemState=function(e,n,i){rt(e)&&(e=this.findById(e));var a=this.get("itemController");a.setItemState(e,n,i);var o=this.get("stateController");rt(i)?o.updateState(e,n+":"+i,!0):o.updateState(e,n,i)},t.prototype.priorityState=function(e,n){var i=this.get("itemController");i.priorityState(e,n)},t.prototype.data=function(e){ZB(e),this.set("data",e)},t.prototype.render=function(){var e=this;this.set("comboSorted",!1);var n=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!n)throw new Error("data must be defined first");var i=n.nodes,a=i===void 0?[]:i,o=n.edges,s=o===void 0?[]:o,l=n.combos,u=l===void 0?[]:l;if(this.clear(!0),this.emit("beforerender"),G(a,function(g){e.add("node",g,!1,!1)}),u&&u.length!==0){var c=IT(u,a);this.set("comboTrees",c),e.addCombos(u)}G(s,function(g){e.add("edge",g,!1,!1)});var f=e.get("animate");(e.get("fitView")||e.get("fitCenter"))&&e.set("animate",!1);var d=e.get("layoutController");if(d){if(d.layout(h),this.destroyed)return}else e.get("fitView")&&e.fitView(),e.get("fitCenter")&&e.fitCenter(),e.emit("afterrender"),e.set("animate",f);function h(){e.get("fitView")?e.fitView():e.get("fitCenter")&&e.fitCenter(),e.autoPaint(),e.emit("afterrender"),(e.get("fitView")||e.get("fitCenter"))&&e.set("animate",f)}if(!this.get("groupByTypes"))if(u&&u.length!==0)this.sortCombos();else if(n.nodes&&n.edges&&n.nodes.length<n.edges.length){var v=this.getNodes();v.forEach(function(g){g.toFront()})}else{var p=this.getEdges();p.forEach(function(g){g.toBack()})}this.get("enabledStack")&&this.pushStack("render")},t.prototype.read=function(e){this.data(e),this.render()},t.prototype.diffItems=function(e,n,i){var a=this,o,s=this.get("itemMap");G(i,function(l){if(o=s[l.id],o){if(a.get("animate")&&e===mve){var u=o.getContainer().getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:u[6],y:u[7]})}a.updateItem(o,l,!1)}else o=a.addItem(e,l,!1);o&&n[e+"s"].push(o)})},t.prototype.changeData=function(e,n){n===void 0&&(n=!0);var i=this;if(!ZB(e))return this;n&&this.get("enabledStack")&&this.pushStack("changedata",{before:i.save(),after:e}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(p){return i.clearItemStates(p)}),this.getEdges().map(function(p){return i.clearItemStates(p)});var a=this.get("canvas"),o=a.get("localRefresh");a.set("localRefresh",!1),i.get("data")||(i.data(e),i.render());var s=this.get("itemMap"),l={nodes:[],edges:[]},u=e.combos;if(u){var c=IT(u,e.nodes);this.set("comboTrees",c)}else this.set("comboTrees",[]);this.diffItems("node",l,e.nodes),G(s,function(p,g){s[g].getModel().depth=0,!(p.getType&&p.getType()==="edge")&&(p.getType&&p.getType()==="combo"?(delete s[g],p.destroy()):l.nodes.indexOf(p)<0&&(delete s[g],i.remove(p,!1)))});for(var f=this.getCombos(),d=f.length,h=d-1;h>=0;h--)f[h].destroyed&&f.splice(h,1);u&&(i.addCombos(u),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,e.edges),G(s,function(p,g){p.getType&&(p.getType()==="node"||p.getType()==="combo")||l.edges.indexOf(p)<0&&(delete s[g],i.remove(p,!1))}),this.set({nodes:l.nodes,edges:l.edges});var v=this.get("layoutController");return v&&(v.changeData(),i.get("animate")&&!v.getLayoutType()?i.positionsAnimate():i.autoPaint()),setTimeout(function(){a.set("localRefresh",o)},16),this},t.prototype.addCombos=function(e){var n=this,i=n.get("comboTrees"),a=this.get("itemController");a.addCombos(i,e)},t.prototype.createCombo=function(e,n){var i=this;this.set("comboSorted",!1);var a="",o;if(!!e){if(rt(e))a=e,o={id:e};else{if(a=e.id,!a){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}o=e}var s=n.map(function(u){var c=i.findById(u),f=c.getModel(),d="";c.getType&&(d=c.getType());var h={id:c.getID(),itemType:d};return d==="combo"?(h.parentId=a,f.parentId=a):d==="node"&&(h.comboId=a,f.comboId=a),h});o.children=s,this.addItem("combo",o,!1),this.set("comboSorted",!1);var l=this.get("comboTrees");(l||[]).forEach(function(u){Ec(u,function(c){return c.id===a?(c.itemType="combo",c.children=s,!1):!0})}),l&&this.sortCombos()}},t.prototype.uncombo=function(e){var n=this,i,a=this,o=e;if(rt(e)&&(o=this.findById(e)),!o||o.getType&&o.getType()!=="combo"){console.warn("The item is not a combo!");return}var s=o.getModel().parentId,l=a.get("comboTrees");l||(l=[]);var u=this.get("itemMap"),c=o.get("id"),f,d=[],h=this.get("combos"),v=this.findById(s);if(l.forEach(function(g){f||Ec(g,function(m){var y;if(m.id===c){f=m;var b=o.getEdges();b.forEach(function(w){n.removeItem(w,!1)});var x=h.indexOf(o);h.splice(x,1),delete u[c],o.destroy(),n.emit("afterremoveitem",{item:o,type:"combo"})}if(s&&f&&m.id===s){v.removeCombo(o),d=m.children;var x=d.indexOf(f);return x!==-1&&d.splice(x,1),(y=f.children)===null||y===void 0||y.forEach(function(S){var C=n.findById(S.id),_=C.getModel();C.getType&&C.getType()==="combo"?(S.parentId=s,delete S.comboId,_.parentId=s,delete _.comboId):C.getType&&C.getType()==="node"&&(S.comboId=s,_.comboId=s),v.addChild(C),d.push(S)}),!1}return!0})}),!s&&f){var p=l.indexOf(f);l.splice(p,1),(i=f.children)===null||i===void 0||i.forEach(function(g){g.parentId=void 0;var m=n.findById(g.id).getModel();delete m.parentId,delete m.comboId,g.itemType!=="node"&&l.push(g)})}},t.prototype.updateCombos=function(){var e=this,n=this,i=this.get("comboTrees"),a=n.get("itemController"),o=n.get("itemMap");(i||[]).forEach(function(s){Ec(s,function(l){if(!l)return!0;var u=o[l.id];if(u&&u.getType&&u.getType()==="combo"){var c=Jn([],u.getStates(),!0);G(c,function(f){return e.setItemState(u,f,!1)}),a.updateCombo(u,l.children),G(c,function(f){return e.setItemState(u,f,!0)})}return!0})}),n.sortCombos()},t.prototype.updateCombo=function(e){var n=this,i=this,a=e,o;if(rt(e)&&(a=this.findById(e)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),l=i.get("itemController"),u=i.get("itemMap");(s||[]).forEach(function(c){Ec(c,function(f){if(!f)return!0;var d=u[f.id];if(o===f.id&&d&&d.getType&&d.getType()==="combo"){var h=Jn([],d.getStates(),!0);G(h,function(v){d.getStateStyle(v)&&n.setItemState(d,v,!1)}),l.updateCombo(d,f.children),G(h,function(v){d.getStateStyle(v)&&n.setItemState(d,v,!0)}),o&&(o=f.parentId)}return!0})})},t.prototype.updateComboTree=function(e,n,i){i===void 0&&(i=!0);var a=this;this.set("comboSorted",!1);var o;rt(e)?o=a.findById(e):o=e;var s=o.getModel(),l=s.comboId||s.parentId,u="";if(o.getType&&(u=o.getType()),n&&u==="combo"){var c=this.get("comboTrees"),f=!0,d;if((c||[]).forEach(function(y){d||os(y,function(b){if(!d)return b.id===o.getID()&&(d=b),!0})}),os(d,function(y){return y.id===n?(f=!1,!1):!0}),!f){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(i&&this.get("enabledStack")){var h={},v={};u==="combo"?(h.combos=[{id:s.id,parentId:s.parentId}],v.combos=[{id:s.id,parentId:n}]):u==="node"&&(h.nodes=[{id:s.id,parentId:s.comboId}],v.nodes=[{id:s.id,parentId:n}]),this.pushStack("updateComboTree",{before:h,after:v})}if(s.parentId||s.comboId){var p=this.findById(s.parentId||s.comboId);p&&p.removeChild(o)}if(u==="combo"?s.parentId=n:u==="node"&&(s.comboId=n),n){var g=this.findById(n);g&&g.addChild(o)}if(l){var g=this.findById(l);g&&g.removeChild(o)}var m=PT(this.get("comboTrees"),s.id,n);this.set("comboTrees",m),this.updateCombos()},t.prototype.save=function(){var e=[],n=[],i=[];return G(this.get("nodes"),function(a){e.push(a.getModel())}),G(this.get("edges"),function(a){n.push(a.getModel())}),G(this.get("combos"),function(a){i.push(a.getModel())}),{nodes:e,edges:n,combos:i}},t.prototype.changeSize=function(e,n){var i=this.get("viewController");return i.changeSize(e,n),this},t.prototype.refresh=function(){var e=this;if(e.emit("beforegraphrefresh"),e.get("animate"))e.positionsAnimate();else{var n=e.get("nodes"),i=e.get("edges"),a=e.get("edges");G(n,function(o){o.refresh()}),G(i,function(o){o.refresh()}),G(a,function(o){o.refresh()})}e.emit("aftergraphrefresh"),e.autoPaint()},t.prototype.getNodes=function(){return this.get("nodes")},t.prototype.getEdges=function(){return this.get("edges")},t.prototype.getCombos=function(){return this.get("combos")},t.prototype.getComboChildren=function(e){if(rt(e)&&(e=this.findById(e)),!e||e.getType&&e.getType()!=="combo"){console.warn("The combo does not exist!");return}return e.getChildren()},t.prototype.positionsAnimate=function(){var e=this;e.emit("beforeanimate");var n=e.get("animateCfg"),i=n.onFrame,a=e.getNodes(),o=a.map(function(l){var u=l.getModel();return{id:u.id,x:u.x,y:u.y}});e.isAnimating()&&e.stopAnimate();var s=e.get("canvas");s.animate(function(l){G(o,function(u){var c=e.findById(u.id);if(!(!c||c.destroyed)){var f=c.get("originAttrs"),d=c.get("model");if(!f){var h=c.getContainer().getMatrix();h||(h=[1,0,0,0,1,0,0,0,1]),f={x:h[6],y:h[7]},c.set("originAttrs",f)}if(i){var v=i(c,l,u,f);c.set("model",Object.assign(d,v))}else d.x=f.x+(u.x-f.x)*l,d.y=f.y+(u.y-f.y)*l}}),e.refreshPositions()},{duration:n.duration,easing:n.easing,callback:function(){G(a,function(u){u.set("originAttrs",null)}),n.callback&&n.callback(),e.emit("afteranimate"),e.animating=!1}})},t.prototype.refreshPositions=function(){var e=this;e.emit("beforegraphrefreshposition");var n=e.get("nodes"),i=e.get("edges"),a=e.get("vedges"),o=e.get("combos"),s,l={};G(n,function(u){s=u.getModel();var c=u.get("originAttrs");if(!(c&&s.x===c.x&&s.y===c.y)){var f=u.updatePosition({x:s.x,y:s.y});l[s.id]=f,s.comboId&&(l[s.comboId]=l[s.comboId]||f)}}),o&&o.length!==0&&e.updateCombos(),G(i,function(u){var c=u.getSource().getModel(),f=u.getTarget();if(!Ri(f)){var d=f.getModel();(l[c.id]||l[d.id]||u.getModel().isComboEdge)&&u.refresh()}}),G(a,function(u){u.refresh()}),e.emit("aftergraphrefreshposition"),e.autoPaint()},t.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},t.prototype.isAnimating=function(){return this.animating},t.prototype.getZoom=function(){var e=this.get("group").getMatrix();return e?e[0]:1},t.prototype.getCurrentMode=function(){var e=this.get("modeController");return e.getMode()},t.prototype.setMode=function(e){var n=this.get("modeController");return n.setMode(e),this},t.prototype.clear=function(e){var n;return e===void 0&&(e=!1),(n=this.get("canvas"))===null||n===void 0||n.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),e||this.emit("afterrender"),this},t.prototype.updateLayout=function(e,n,i){var a=this,o=this.get("layoutController");if(rt(e)&&(e={type:e}),n){var s=i;s||(n==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var l=["force","gForce","fruchterman"];l.includes(e.type)||!e.type&&l.includes(o==null?void 0:o.layoutType)?e.center=[s.x,s.y]:this.once("afterlayout",function(f){var d=a.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*d[0]+d[6],s.y=s.y*d[0]+d[7];var h=a.getGroup().getCanvasBBox(),v=h.minX,p=h.maxX,g=h.minY,m=h.maxY,y={x:(v+p)/2,y:(g+m)/2};n==="begin"&&(y.x=v,y.y=g),a.translate(s.x-y.x,s.y-y.y)})}var u=this.get("layout"),c={};Object.assign(c,u,e),this.set("layout",c),o.isLayoutTypeSame(c)&&c.gpuEnabled===u.gpuEnabled?o.updateLayoutCfg(c):o.changeLayout(c)},t.prototype.destroyLayout=function(){var e=this.get("layoutController");e.destroyLayout()},t.prototype.layout=function(){var e=this.get("layoutController"),n=this.get("layout");if(!(!n||!e)){if(n.workerEnabled){e.layout();return}e.layoutMethod?e.relayout(!0):e.layout()}},t.prototype.collapseCombo=function(e){var n=this;if(rt(e)&&(e=this.findById(e)),!e){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:e});var i=e.getModel(),a=this.get("itemController");a.collapseCombo(e),i.collapsed=!0;var o=this.getEdges().concat(this.get("vedges")),s=[],l=[],u=this.get("comboTrees"),c=!1;(u||[]).forEach(function(h){c||os(h,function(v){if(c&&v.depth<=i.depth)return!1;if(i.id===v.id&&(c=!0),c){var p=n.findById(v.id);p&&p.getType&&p.getType()==="combo"&&(s=s.concat(p.getNodes()),l=l.concat(p.getCombos()))}return!0})});var f={},d=[];o.forEach(function(h){if(!(h.isVisible()&&!h.getModel().isVEdge)){var v=h.getSource(),p=h.getTarget();if((s.includes(v)||l.includes(v))&&!s.includes(p)&&!l.includes(p)||v.getModel().id===i.id){var g=h.getModel();if(g.isVEdge){n.removeItem(h,!1);return}for(var m=p.getModel();!p.isVisible();){if(p=n.findById(m.parentId||m.comboId),!p||!m.parentId&&!m.comboId)return;m=p.getModel()}var y=m.id;if(f[i.id+"-"+y]){f[i.id+"-"+y]+=g.size||1;return}var b=n.addItem("vedge",{source:i.id,target:y,isVEdge:!0},!1);f[i.id+"-"+y]=g.size||1,d.push(b)}else if(!s.includes(v)&&!l.includes(v)&&(s.includes(p)||l.includes(p))||p.getModel().id===i.id){var g=h.getModel();if(g.isVEdge){n.removeItem(h,!1);return}for(var x=v.getModel();!v.isVisible();){if(v=n.findById(x.parentId||x.comboId),!v||!x.parentId&&!x.comboId)return;x=v.getModel()}var w=x.id;if(f[w+"-"+i.id]){f[w+"-"+i.id]+=g.size||1;return}var b=n.addItem("vedge",{target:i.id,source:w,isVEdge:!0},!1);f[w+"-"+i.id]=g.size||1,d.push(b)}}}),d.forEach(function(h){var v=h.getModel();n.updateItem(h,{size:f[v.source+"-"+v.target]},!1)}),this.emit("aftercollapseexpandcombo",{action:"collapse",item:e})},t.prototype.expandCombo=function(e){var n=this;if(rt(e)&&(e=this.findById(e)),!e||e.getType&&e.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:e});var i=e.getModel(),a=this.get("itemController");a.expandCombo(e),i.collapsed=!1;var o=this.getEdges().concat(this.get("vedges")),s=[],l=[],u=this.get("comboTrees"),c=!1;(u||[]).forEach(function(h){c||os(h,function(v){if(c&&v.depth<=i.depth)return!1;if(i.id===v.id&&(c=!0),c){var p=n.findById(v.id);p&&p.getType&&p.getType()==="combo"&&(s=s.concat(p.getNodes()),l=l.concat(p.getCombos()))}return!0})});var f={},d={};o.forEach(function(h){if(!(h.isVisible()&&!h.getModel().isVEdge)){var v=h.getSource(),p=h.getTarget(),g=v.get("id"),m=p.get("id");if((s.includes(v)||l.includes(v))&&!s.includes(p)&&!l.includes(p)||g===i.id){if(h.getModel().isVEdge){n.removeItem(h,!1);return}for(var y=p.getModel();!p.isVisible();){if(p=n.findById(y.comboId||y.parentId),!p||!y.parentId&&!y.comboId)return;y=p.getModel()}m=y.id;for(var b=v.getModel();!v.isVisible();){if(v=n.findById(b.comboId||b.parentId),!v||!b.parentId&&!b.comboId)return;if(b.comboId===i.id||b.parentId===i.id)break;b=v.getModel()}if(g=b.id,m){var x=g+"-"+m;if(f[x]){f[x]+=h.getModel().size||1,n.updateItem(d[x],{size:f[x]},!1);return}var w=n.addItem("vedge",{source:g,target:m,isVEdge:!0},!1);f[x]=h.getModel().size||1,d[x]=w}}else if(!s.includes(v)&&!l.includes(v)&&(s.includes(p)||l.includes(p))||m===i.id){if(h.getModel().isVEdge){n.removeItem(h,!1);return}for(var b=v.getModel();!v.isVisible();){if(v=n.findById(b.comboId||b.parentId),!v||!b.parentId&&!b.comboId)return;b=v.getModel()}g=b.id;for(var y=p.getModel();!p.isVisible();){if(p=n.findById(y.comboId||y.parentId),!p||!y.parentId&&!y.comboId)return;if(y.comboId===i.id||y.parentId===i.id)break;y=p.getModel()}if(m=y.id,g){var x=g+"-"+m;if(f[x]){f[x]+=h.getModel().size||1,n.updateItem(d[x],{size:f[x]},!1);return}var w=n.addItem("vedge",{target:m,source:g,isVEdge:!0},!1);f[x]=h.getModel().size||1,d[x]=w}}else(s.includes(v)||l.includes(v))&&(s.includes(p)||l.includes(p))&&v.isVisible()&&p.isVisible()&&h.show()}}),this.emit("aftercollapseexpandcombo",{action:"expand",item:e})},t.prototype.collapseExpandCombo=function(e){if(rt(e)&&(e=this.findById(e)),!(!e||e.getType&&e.getType()!=="combo")){for(var n=e.getModel(),i=this.findById(n.parentId);i;){var a=i.getModel();if(a.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),i=void 0;return}i=this.findById(a.parentId)}var o=n.collapsed;o?this.expandCombo(e):this.collapseCombo(e),this.updateCombo(e)}},t.prototype.sortCombos=function(){var e=this,n=this.get("comboSorted");if(!n){this.set("comboSorted",!0);var i=[],a={},o=this.get("comboTrees");(o||[]).forEach(function(l){os(l,function(u){return i[u.depth]?i[u.depth].push(u.id):i[u.depth]=[u.id],a[u.id]=u.depth,!0})});var s=this.getEdges().concat(this.get("vedges"));(s||[]).forEach(function(l){var u=l.getModel(),c=a[u.source]||0,f=a[u.target]||0,d=Math.max(c,f);i[d]?i[d].push(u.id):i[d]=[u.id]}),i.forEach(function(l){if(!(!l||!l.length))for(var u=l.length-1;u>=0;u--){var c=e.findById(l[u]);c&&c.toFront()}})}},t.prototype.getNeighbors=function(e,n){var i=e;return rt(e)&&(i=this.findById(e)),i.getNeighbors(n)},t.prototype.getNodeDegree=function(e,n,i){n===void 0&&(n=void 0),i===void 0&&(i=!1);var a=e;rt(e)&&(a=this.findById(e));var o=this.get("degrees");(!o||i)&&(o=Sc(this.save()),this.set("degrees",o));var s=o[a.getID()],l=0;if(!s)return 0;switch(n){case"in":l=s.inDegree;break;case"out":l=s.outDegree;break;case"all":l=s;break;default:l=s.degree;break}return l},t.prototype.getUndoStack=function(){return this.undoStack},t.prototype.getRedoStack=function(){return this.redoStack},t.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},t.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},t.prototype.pushStack=function(e,n,i){if(e===void 0&&(e="update"),i===void 0&&(i="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=n?Mr(n):{before:{},after:Mr(this.save())};i==="redo"?this.redoStack.push({action:e,data:a}):this.undoStack.push({action:e,data:a}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})},t.prototype.getAdjMatrix=function(e,n){e===void 0&&(e=!0),n===void 0&&(n=this.get("directed"));var i=this.get("adjMatrix");return(!i||!e)&&(i=id(this.save(),n),this.set("adjMatrix",i)),i},t.prototype.getShortestPathMatrix=function(e,n){e===void 0&&(e=!0),n===void 0&&(n=this.get("directed"));var i=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!i||!e)&&(i=id(this.save(),n),this.set("adjMatrix",i)),(!a||!e)&&(a=wm(this.save(),n),this.set("shortestPathMatrix",a)),a},t.prototype.on=function(e,n,i){return r.prototype.on.call(this,e,n,i)},t.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},t.prototype.createHull=function(e){if(!e.members||e.members.length<1){console.warn("Create hull failed! The members is empty.");return}var n=this.get("hullGroup"),i=this.get("hullMap");if(i||(i={},this.set("hullMap",i)),(!n||n.get("destroyed"))&&(n=this.get("group").addGroup({id:"hullGroup"}),n.toBack(),this.set("hullGroup",n)),i[e.id])return console.warn("Existed hull id."),i[e.id];var a=n.addGroup({id:e.id+"-container"}),o=new gve(this,A(A({},e),{group:a})),s=o.id;return i[s]=o,o},t.prototype.getHulls=function(){return this.get("hullMap")},t.prototype.getHullById=function(e){return this.get("hullMap")[e]},t.prototype.removeHull=function(e){var n,i;rt(e)?i=this.getHullById(e):i=e,(n=this.get("hullMap"))===null||n===void 0||delete n[i.id],i.destroy()},t.prototype.removeHulls=function(){var e=this.getHulls();!e||!Object.keys(e).length||(Object.keys(e).forEach(function(n){var i=e[n];i.destroy()}),this.set("hullMap",{}))},t}(fm);function N1(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?N1=function(e){return typeof e}:N1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N1(r)}var ud=Un,J$="-shape",AA="-label",B1=["startArrow","endArrow"],e4={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},bve={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},$1={edge:bve,node:e4,combo:e4},MA="-label-bg",kA={options:{labelCfg:{style:{fontFamily:Zt.windowFontFamily}},descriptionCfg:{style:{fontFamily:Zt.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(t){return{}},getOptions:function(t,e){return e==="move"||(e==null?void 0:e.includes("bbox"))?{}:Mt({},this.options,this.getCustomConfig(t)||{},t)},draw:function(t,e){e.shapeMap={},this.mergeStyle=this.getOptions(t);var n=this.drawShape(t,e);if(n.set("className",this.itemType+J$),e.shapeMap[this.itemType+J$]=n,t.label){var i=this.drawLabel(t,e);i.set("className",this.itemType+AA),e.shapeMap[this.itemType+AA]=i}return n},afterDraw:function(t,e,n){},drawShape:function(t,e){return null},drawLabel:function(t,e){var n=(this.mergeStyle||this.getOptions(t)||{}).labelCfg,i=n||{},a=this.getLabelStyle(t,i,e),o=a.rotate;delete a.rotate;var s=e.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape"});if(e.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var l=s.getBBox(),u=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":u=ud(u,[["t",-l.width/2,-l.height/2],["r",o],["t",l.width/2,l.height/2]]);break;case"lefttop":u=ud(u,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":u=ud(u,[["t",-a.x,-a.y-l.height/2],["r",o],["t",a.x,a.y+l.height/2]]);break;default:u=ud(u,[["t",-l.width/2,-l.height/2],["r",o],["t",l.width/2,l.height/2]]);break}else u=ud(u,[["t",-a.x,-a.y-l.height/2],["r",o],["t",a.x,a.y+l.height/2]]);s.setMatrix(u)}if(a.background){var c=this.drawLabelBg(t,e,s),f=this.itemType+MA;c.set("classname",f),e.shapeMap[f]=c,s.toFront()}return s},drawLabelBg:function(t,e,n){var i=this.options.labelCfg,a=$t({},i,t.labelCfg),o=this.getLabelBgStyleByPosition(n,t,a,e),s=e.addShape("rect",{name:"text-bg-shape",attrs:o});return e.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(t,e,n){return{text:t.label}},getLabelBgStyleByPosition:function(t,e,n,i){return{}},getLabelStyle:function(t,e,n){var i=this.getLabelStyleByPosition(t,e,n),a=this.itemType+"Label",o=Zt[a]?Zt[a].style:null;return A(A(A({},o),i),e.style)},getShapeStyle:function(t){return t.style},update:function(t,e,n){this.updateShapeStyle(t,e,n),this.updateLabel(t,e,n)},updateShapeStyle:function(t,e,n){var i,a=e.getContainer(),o=e.getKeyShape(),s=$t({},o.attr(),t.style),l=function(f){var d,h=s[f];if(Ri(h)){var v=((i=a.shapeMap)===null||i===void 0?void 0:i[f])||a.find(function(p){return p.get("name")===f});v==null||v.attr(h)}else o.attr((d={},d[f]=h,d))};for(var u in s)l(u)},updateLabel:function(t,e,n){var i,a;if(t.label||t.label===""){var o=e.getContainer(),s=(this.mergeStyle||this.getOptions({},n)||{}).labelCfg,l=s===void 0?{}:s,u=this.itemType+AA,c=o.shapeMap[u]||o.find(function(S){return S.get("className")===u}),f=this.itemType+MA,d=o.shapeMap[f]||o.find(function(S){return S.get("className")===f});if(c){(!n||n==="bbox|label"||this.itemType==="edge"&&n!=="style")&&(l=Mt(l,t.labelCfg));var v=this.getLabelStyleByPosition(t,l,o),p=(i=t.labelCfg)===null||i===void 0?void 0:i.style,g=A(A({},v),p),m=g.rotate;if(delete g.rotate,!isNaN(m)&&m!==""){var y=[1,0,0,0,1,0,0,0,1];y=ud(y,[["t",-g.x,-g.y],["r",m],["t",g.x,g.y]]),g.matrix=y,c.attr(g)}else((a=c.getMatrix())===null||a===void 0?void 0:a[4])!==1&&c.resetMatrix(),c.attr(g);if(!d)g.background&&(d=this.drawLabelBg(t,o,c),d.set("classname",f),o.shapeMap[f]=d,c.toFront());else if(g.background){var b=this.getLabelBgStyleByPosition(c,t,l,o),x=b;if(!isNaN(m)&&m!==""){var w=[1,0,0,0,1,0,0,0,1];w=ud(w,[["t",-x.x,-x.y],["r",m],["t",x.x,x.y]]),x.matrix=w}else d.resetMatrix();d.attr(x)}else o.removeChild(d)}else{var h=this.drawLabel(t,o);h.set("className",u),o.shapeMap[u]=h}}},afterUpdate:function(t,e){},setState:function(t,e,n){var i,a,o,s=n.get("keyShape");if(!(!s||s.destroyed)){var l=n.getType(),u=yu(e)?t:t+":"+e,c=this.getStateStyle(u,n),f=n.getStateStyle(u);if(!(!f&&!c)){var d=$t({},f||c),h=n.getContainer(),v={x:1,y:1,cx:1,cy:1};if(l==="combo"&&(v.r=1,v.width=1,v.height=1),e){var p=function(R){var L,O=d[R];if(Ri(O)&&!B1.includes(R)){var B=((o=h.shapeMap)===null||o===void 0?void 0:o[R])||h.find(function(U){return U.get("name")===R});B==null||B.attr(O)}else s.attr((L={},L[R]=O,L))};for(var g in d)p(g)}else{var m=c1(n.getCurrentStatesStyle()),y=n.getModel(),b=$t({},y.style,c1(n.getOriginStyle())),x=s.get("name"),w=s.attr(),S={};Object.keys(w).forEach(function($){if($!=="img"){var R=w[$];R&&N1(R)==="object"?S[$]=Mr(R):S[$]=R}});var C={},_=function(R){var L=d[R];if(Ri(L)&&!B1.includes(R)){var O=h.shapeMap[R]||h.find(function(W){return W.get("name")===R});if(O){var B=c1(O.attr());G(L,function(W,X){if(R===x&&S[X]&&!v[X]){delete S[X];var ae=b[R][X]||$1[l][X];s.attr(X,ae)}else if(B[X]||B[X]===0){delete B[X];var Z=b[R][X]||$1[l][X];O.attr(X,Z)}}),C[R]=B}}else if(S[R]&&!v[R]){delete S[R];var U=b[R]||(b[x]?b[x][R]:void 0)||$1[l][R];s.attr(R,U)}};for(var T in d)_(T);x?C[x]=S:$t(C,S);for(var g in m)if(!v[g]){var E=m[g];(!Ri(E)||B1.includes(g))&&(x?($t(b[x],(a={},a[g]=E,a)),delete b[g]):$t(b,(i={},i[g]=E,i)),delete m[g])}var M={};Mt(M,b,C,m);var k=!1,P=function(R){var L,O,B=M[R];if(Ri(B)&&!B1.includes(R)){var U=h.shapeMap[R]||h.find(function(X){return X.get("name")===R});U&&(U.get("type")==="text"&&(delete B.x,delete B.y,delete B.matrix),R===x&&(l==="combo"&&(delete B.r,delete B.width,delete B.height),k=!0),U.attr(B))}else if(!k){var W=B||$1[l][R];l==="combo"?x||s.attr((L={},L[R]=W,L)):s.attr((O={},O[R]=W,O))}};for(var F in M)P(F)}}}},getStateStyle:function(t,e){var n=e.getModel(),i=e.getType(),a=this.getOptions(n),o=a.stateStyles,s=a.style,l=s===void 0?{}:s,u=n.stateStyles?n.stateStyles[t]:o&&o[t];return i==="combo"?Mr(u):$t({},l,u)},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e,n,i=(t==null?void 0:t.anchorPoints)||((e=this.getCustomConfig(t))===null||e===void 0?void 0:e.anchorPoints)||((n=this.options)===null||n===void 0?void 0:n.anchorPoints);return i}},xve={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Zt.nodeLabel.offset,getSize:function(t){var e,n=((e=this.mergeStyle)===null||e===void 0?void 0:e.size)||t.size||this.getOptions({}).size||Zt.defaultNode.size;return qe(n)&&n.length===1&&(n=[n[0],n[0]]),qe(n)||(n=[n,n]),n},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition;if(n==="center")return{x:0,y:0,text:t.label};var i=e.offset;Je(i)&&(i=this.offset);var a=this.getSize(t),o;switch(n){case"top":o={x:0,y:-a[1]/2-i,textBaseline:"bottom"};break;case"bottom":o={x:0,y:a[1]/2+i,textBaseline:"top"};break;case"left":o={x:-a[0]/2-i,y:0,textAlign:"right"};break;default:o={x:a[0]/2+i,y:0,textAlign:"left"};break}return o.text=t.label,o},getLabelBgStyleByPosition:function(t,e,n,i){var a;if(!t)return{};var o=(a=n.style)===null||a===void 0?void 0:a.background;if(!o)return{};var s=t.getBBox(),l=mA(o.padding),u=s.width+l[1]+l[3],c=s.height+l[0]+l[2];return A(A({x:s.minX-l[3],y:s.minY-l[0]},o),{width:u,height:c})},drawShape:function(t,e){var n=this.shapeType,i=this.getShapeStyle(t),a=e.addShape(n,{attrs:i,draggable:!0,name:"node-shape"});return e.shapeMap["node-shape"]=a,a},updateLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,i=e.shapeMap["link-point-left"]||e.find(function(M){return M.get("className")==="link-point-left"}),a=e.shapeMap["link-point-right"]||e.find(function(M){return M.get("className")==="link-point-right"}),o=e.shapeMap["link-point-top"]||e.find(function(M){return M.get("className")==="link-point-top"}),s=e.shapeMap["link-point-bottom"]||e.find(function(M){return M.get("className")==="link-point-bottom"}),l;i&&(l=i.attr()),a&&!l&&(l=a.attr()),o&&!l&&(l=o.attr()),s&&!l&&(l=s.attr()),l||(l=n);var u=$t({},l,t.linkPoints),c=u.fill,f=u.stroke,d=u.lineWidth,h=u.size/2;h||(h=u.r);var v=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},p=v.left,g=v.right,m=v.top,y=v.bottom,b=this.getSize(t),x=b[0],w=b[1],S={r:h,fill:c,stroke:f,lineWidth:d};if(i)!p&&p!==void 0?(i.remove(),delete e.shapeMap["link-point-left"]):i.attr(A(A({},S),{x:-x/2,y:0}));else if(p){var C="link-point-left";e.shapeMap[C]=e.addShape("circle",{attrs:A(A({},S),{x:-x/2,y:0}),className:C,name:C,isAnchorPoint:!0})}if(a)!g&&g!==void 0&&(a.remove(),delete e.shapeMap["link-point-right"]),a.attr(A(A({},S),{x:x/2,y:0}));else if(g){var _="link-point-right";e.shapeMap[_]=e.addShape("circle",{attrs:A(A({},S),{x:x/2,y:0}),className:_,name:_,isAnchorPoint:!0})}if(o)!m&&m!==void 0&&(o.remove(),delete e.shapeMap["link-point-top"]),o.attr(A(A({},S),{x:0,y:-w/2}));else if(m){var T="link-point-top";e.shapeMap[T]=e.addShape("circle",{attrs:A(A({},S),{x:0,y:-w/2}),className:T,name:T,isAnchorPoint:!0})}if(s)!y&&y!==void 0?(s.remove(),delete e.shapeMap["link-point-bottom"]):s.attr(A(A({},S),{x:0,y:w/2}));else if(y){var E="link-point-bottom";e.shapeMap[E]=e.addShape("circle",{attrs:A(A({},S),{x:0,y:w/2}),className:E,name:E,isAnchorPoint:!0})}},updateShape:function(t,e,n,i,a){var o=e.get("keyShape");o.attr(A({},n)),this.updateLabel(t,e,a),i&&this.updateIcon(t,e)},updateIcon:function(t,e){var n=this,i=e.getContainer(),a=(this.mergeStyle||this.getOptions(t)).icon,o=(t.icon?t.icon:{show:void 0}).show,s=i.shapeMap[this.type+"-icon"]||i.find(function(p){return p.get("name")===n.type+"-icon"});if(s)if(o||o===void 0){var l=$t({},s.attr(),a),u=l.width,c=u===void 0?20:u,f=l.height,d=f===void 0?20:f;s.attr(A(A({},l),{x:-c/2,y:-d/2}))}else s.remove();else if(o){var c=a.width,d=a.height,h=this.type+"-icon";i.shapeMap[h]=i.addShape("image",{attrs:A(A({},a),{x:-c/2,y:-d/2}),className:h,name:h});var v=i.shapeMap["node-label"]||i.find(function(m){return m.get("name")==="node-label"});v&&v.toFront()}}},wve=A(A({},kA),xve);Ci.registerNode("single-node",wve);var Vm="edge-shape";function Sve(r){var t=r;return r==="start"?t="end":r==="end"&&(t="start"),t}var Cve={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Zt.defaultEdge.size,style:{x:0,y:0,stroke:Zt.defaultEdge.style.stroke,lineAppendWidth:Zt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Zt.edgeLabel.style.fill,fontSize:Zt.edgeLabel.style.fontSize,fontFamily:Zt.windowFontFamily}},stateStyles:A({},Zt.edgeStateStyles)},getPath:function(t){var e=[];return G(t,function(n,i){i===0?e.push(["M",n.x,n.y]):e.push(["L",n.x,n.y])}),e},getShapeStyle:function(t){var e=this.options.style,n={stroke:t.color},i=$t({},e,n,t.style),a=t.size||Zt.defaultEdge.size;t=this.getPathPoints(t);var o=t.startPoint,s=t.endPoint,l=this.getControlPoints(t),u=[o];l&&(u=u.concat(l)),u.push(s);var c=this.getPath(u),f=$t({},Zt.defaultEdge.style,{stroke:Zt.defaultEdge.color,lineWidth:a,path:c},i);return f},updateShapeStyle:function(t,e,n){var i,a=e.getContainer(),o=((i=e.getKeyShape)===null||i===void 0?void 0:i.call(e))||a.shapeMap["edge-shape"],s=t.size;t=this.getPathPoints(t);var l=t.startPoint,u=t.endPoint,c=this.getControlPoints(t),f=[l];c&&(f=f.concat(c)),f.push(u);var d=o.attr(),h=t.style||{};h.stroke===void 0&&(h.stroke=t.color);var v=t.sourceNode,p=t.targetNode,g={radius:h.radius};c||(g={source:v,target:p,offset:h.offset,radius:h.radius});var m=this.getPath(f,g),y={};n==="move"?y={path:m}:(d.endArrow&&h.endArrow===!1&&(t.style.endArrow={path:""}),d.startArrow&&h.startArrow===!1&&(t.style.startArrow={path:""}),y=A({},t.style),y.lineWidth===void 0&&(y.lineWdith=(Rt(s)?s:s==null?void 0:s[0])||d.lineWidth),y.path===void 0&&(y.path=m),y.stroke===void 0&&(y.stroke=d.stroke||t.color)),o&&o.attr(y)},getLabelStyleByPosition:function(t,e,n){var i=e.position||this.labelPosition,a={},o=n==null?void 0:n.shapeMap[Vm],s;i==="start"?s=0:i==="end"?s=1:s=.5;var l=e.refX||this.refX,u=e.refY||this.refY;if(t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y)return a.x=t.startPoint.x+l,a.y=t.startPoint.y+u,a.text=t.label,a;var c;Je(e.autoRotate)?c=this.labelAutoRotate:c=e.autoRotate;var f=kT(o,s,l,u,c);return a.x=f.x,a.y=f.y,a.rotate=f.rotate,a.textAlign=this._getTextAlign(i,f.angle),a.text=t.label,a},getLabelBgStyleByPosition:function(t,e,n,i){if(!t)return{};var a=t.getBBox(),o=n.style&&n.style.background;if(!o)return{};var s=o.padding,l=a.width+s[1]+s[3],u=a.height+s[0]+s[2],c=n.position||this.labelPosition,f=A(A({},o),{width:l,height:u,x:a.minX-s[2],y:a.minY-s[0],rotate:0}),d;Je(n.autoRotate)?d=this.labelAutoRotate:d=n.autoRotate;var h=i==null?void 0:i.shapeMap[Vm],v;c==="start"?v=0:c==="end"?v=1:v=.5;var p=n.refX||this.refX,g=n.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return f.x=e.startPoint.x+p-l/2,f.y=e.startPoint.y+g-u/2,f;var m=p-l/2;n.position==="start"?m=p-s[2]:n.position==="end"&&(m=p-l);var y=kT(h,v,m,g+u/2,d);return d&&(f.x=y.x,f.y=y.y),f.rotate=y.rotate,f},_getTextAlign:function(t,e){var n="center";return e?(e=e%(Math.PI*2),t!=="center"&&(e>=0&&e<=Math.PI/2||e>=3/2*Math.PI&&e<2*Math.PI?n=t:n=Sve(t)),n):t},getControlPoints:function(t){return t.controlPoints},getPathPoints:function(t){return t},drawShape:function(t,e){var n=this.getShapeStyle(t),i=e.addShape("path",{className:Vm,name:Vm,attrs:n});return e.shapeMap[Vm]=i,i},drawLabel:function(t,e){var n=this.options.labelCfg,i=Mt({},n,t.labelCfg),a=this.getLabelStyle(t,i,e),o=a.rotate;delete a.rotate;var s=e.addShape("text",{attrs:a,name:"text-shape"});if(e.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),a.background){var l=this.drawLabelBg(t,e,s,a,o),u=this.itemType+MA;l.set("classname",u),e.shapeMap[u]=l,s.toFront()}return s},drawLabelBg:function(t,e,n,i,a){var o=this.options.labelCfg,s=Mt({},o,t.labelCfg),l=this.getLabelBgStyleByPosition(n,t,s,e);delete l.rotate;var u=e.addShape("rect",{name:"text-bg-shape",attrs:l});return e.shapeMap["text-bg-shape"]=u,isNaN(a)||u.rotateAtStart(a),u}},Eve=A(A({},kA),Cve);Ci.registerEdge("single-edge",Eve);Ci.registerEdge("line",{getControlPoints:function(){}},"single-edge");Ci.registerEdge("spline",{getPath:function(t){var e=H$(t);return e}},"single-edge");Ci.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint,i={x:(e.x+n.x)/2,y:(e.y+n.y)/2},a,o;if(t.controlPoints!==void 0){if(o=t.controlPoints[0],a=ST(e,o,n),e.x<=n.x&&e.y>n.y?this.clockwise=a.x>o.x?0:1:e.x<=n.x&&e.y<n.y?this.clockwise=a.x>o.x?1:0:e.x>n.x&&e.y<=n.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-e.x)/(o.y-e.y)==(n.x-e.x)/(n.y-e.y))return[]}else{t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),qe(t.curveOffset)&&(t.curveOffset=t.curveOffset[0]),t.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:n.x-e.x,y:n.y-e.y},l=Math.atan2(s.y,s.x);o={x:t.curveOffset*Math.cos(-Math.PI/2+l)+i.x,y:t.curveOffset*Math.sin(-Math.PI/2+l)+i.y},a=ST(e,o,n)}var u=a1(e,a),c=[{x:u,y:u}];return c},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),t.length===2?e.push(["L",t[1].x,t[1].y]):e.push(["A",t[1].x,t[1].y,0,0,this.clockwise,t[2].x,t[2].y]),e}},"single-edge");Ci.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(t){var e=t.controlPoints;if(!e||!e.length){var n=t.startPoint,i=t.endPoint;t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),t.curvePosition===void 0&&(t.curvePosition=this.curvePosition),qe(this.curveOffset)&&(t.curveOffset=t.curveOffset[0]),qe(this.curvePosition)&&(t.curvePosition=t.curveOffset[0]);var a=F1(n,i,t.curvePosition,t.curveOffset);e=[a]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["Q",t[1].x,t[1].y,t[2].x,t[2].y]),e}},"single-edge");Ci.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(t){var e=t.controlPoints;if(t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),t.curvePosition===void 0&&(t.curvePosition=this.curvePosition),Rt(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),Rt(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]),!e||!e.length||e.length<2){var n=t.startPoint,i=t.endPoint,a=F1(n,i,t.curvePosition[0],t.curveOffset[0]),o=F1(n,i,t.curvePosition[1],t.curveOffset[1]);e=[a,o]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]),e}},"single-edge");Ci.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint;t.curvePosition===void 0&&(t.curvePosition=this.curvePosition),t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),t.minCurveOffset===void 0&&(t.minCurveOffset=this.minCurveOffset),Rt(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),Rt(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),Rt(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var i=n.y-e.y,a=[0,0];t.curveOffset?a=t.curveOffset:Math.abs(i)<Math.abs(t.minCurveOffset[0])&&(a=t.minCurveOffset);var o={x:e.x,y:e.y+i*this.curvePosition[0]+a[0]},s={x:n.x,y:n.y-i*this.curvePosition[1]+a[1]};return[o,s]}},"cubic");Ci.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint;t.curvePosition===void 0&&(t.curvePosition=this.curvePosition),t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),t.minCurveOffset===void 0&&(t.minCurveOffset=this.minCurveOffset),Rt(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),Rt(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),Rt(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var i=n.x-e.x,a=[0,0];t.curveOffset?a=t.curveOffset:Math.abs(i)<Math.abs(t.minCurveOffset[0])&&(a=t.minCurveOffset);var o={x:e.x+i*this.curvePosition[0]+a[0],y:e.y},s={x:n.x-i*this.curvePosition[1]+a[1],y:n.y},l=[o,s];return l}},"cubic");Ci.registerEdge("loop",{getPathPoints:function(t){return YB(t)},getControlPoints:function(t){return t.controlPoints},afterDraw:function(t){t.controlPoints=void 0},afterUpdate:function(t){t.controlPoints=void 0}},"cubic");var _ve={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Zt.comboLabel.refX,refY:Zt.comboLabel.refY,options:{style:{stroke:Zt.defaultCombo.style.stroke,fill:Zt.defaultCombo.style.fill,lineWidth:Zt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Zt.comboLabel.style.fill,fontSize:Zt.comboLabel.style.fontSize,fontFamily:Zt.windowFontFamily}},stateStyles:A({},Zt.comboStateStyles)},getSize:function(t){var e=Mr(t.size||this.options.size||Zt.defaultCombo.size);return qe(e)&&e.length===1&&(e=[e[0],e[0]]),qe(e)||(e=[e,e]),e},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition,i=t.style,a=t.padding||this.options.padding;qe(a)&&(a=a[0]);var o=e.refX,s=e.refY;Je(o)&&(o=this.refX),Je(s)&&(s=this.refY);var l=this.getSize(t),u=Math.max(i.r,l[0]/2)||l[0]/2,c=u+a,f;switch(n){case"top":f={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":f={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":f={x:-c+o,y:0,textAlign:"left"};break;case"center":f={x:0,y:0,text:t.label,textAlign:"center"};break;default:f={x:c+o,y:0,textAlign:"right"};break}return f.text=t.label,f},drawShape:function(t,e){var n=this.shapeType,i=this.getShapeStyle(t),a=e.addShape(n,{attrs:i,draggable:!0,name:"combo-shape"});return a},updateShape:function(t,e,n){var i=e.get("keyShape"),a=t.animate===void 0?this.options.animate:t.animate;a&&i.animate?i.animate(n,{duration:200,easing:"easeLinear"}):i.attr(A({},n)),this.updateLabel(t,e)}},Tve=A(A({},kA),_ve);Ci.registerCombo("single-combo",Tve);Ci.registerCombo("circle",{options:{size:[Zt.defaultCombo.size[0],Zt.defaultCombo.size[0]],padding:Zt.defaultCombo.padding[0],animate:!0,style:{stroke:Zt.defaultCombo.style.stroke,fill:Zt.defaultCombo.style.fill,lineWidth:Zt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Zt.comboLabel.style.fill,fontSize:Zt.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:A({},Zt.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(t,e){var n=this.getShapeStyle(t);delete n.height,delete n.width;var i=e.addShape("circle",{attrs:n,className:"circle-combo",name:"circle-combo",draggable:!0});return i},getShapeStyle:function(t){var e=this.options.style,n=t.padding||this.options.padding;qe(n)&&(n=n[0]);var i={stroke:t.color},a=$t({},e,i,t.style),o;if(t.fixSize)o=Rt(t.fixSize)?t.fixSize:t.fixSize[0];else{var s=this.getSize(t);!Rt(a.r)||isNaN(a.r)?o=s[0]/2||Zt.defaultCombo.style.r:o=Math.max(a.r,s[0]/2)||s[0]/2}a.r=o+n;var l=A({x:0,y:0},a);return t.style?t.style.r=o:t.style={r:o},l},update:function(t,e){var n=this.getSize(t),i=t.padding||this.options.padding;qe(i)&&(i=i[0]);var a=Mr(t.style),o;t.fixSize?o=Rt(t.fixSize)?t.fixSize:t.fixSize[0]:o=Math.max(a.r,n[0]/2)||n[0]/2,a.r=o+i;var s=e.get("sizeCache");s&&(s.r=a.r);var l={stroke:t.color},u=e.get("keyShape"),c=$t({},u.attr(),l,a);t.style?t.style.r=o:t.style={r:o},this.updateShape(t,e,c,!0)}},"single-combo");Ci.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Zt.defaultCombo.style.stroke,fill:Zt.defaultCombo.style.fill,lineWidth:Zt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Zt.comboLabel.style.fill,fontSize:Zt.comboLabel.style.fontSize,fontFamily:Zt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:A({},Zt.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(t,e){var n=this.getShapeStyle(t),i=e.addShape("rect",{attrs:n,className:"rect-combo",name:"rect-combo",draggable:!0});return i},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition,i=t.style,a=t.padding||this.options.padding;Rt(a)&&(a=[a,a,a,a]);var o=e.refX,s=e.refY;Je(o)&&(o=this.refX),Je(s)&&(s=this.refY);var l=i.width/2+a[3],u=i.height/2+a[0],c;switch(n){case"top":c={x:0-l+o,y:0-u+s,textBaseline:"top",textAlign:"left"};break;case"bottom":c={x:0,y:u+s,textBaseline:"bottom",textAlign:"center"};break;case"left":c={x:0-l+s,y:0,textAlign:"left"};break;case"center":c={x:0,y:0,text:t.label,textAlign:"center"};break;default:c={x:l+o,y:0,textAlign:"right"};break}return c.text=t.label,c},getShapeStyle:function(t){var e=this.options.style,n=t.padding||this.options.padding;Rt(n)&&(n=[n,n,n,n]);var i={stroke:t.color},a=$t({},e,i,t.style),o=this.getSize(t),s,l,u=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;u?Rt(u)?(s=u,l=u):(s=u[0],l=u[1]):(!Rt(a.width)||isNaN(a.width)?s=o[0]||Zt.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!Rt(a.height)||isNaN(a.height)?l=o[1]||Zt.defaultCombo.style.height:l=Math.max(a.height,o[1])||o[1]);var c=-s/2-n[3],f=-l/2-n[0];a.width=s+n[1]+n[3],a.height=l+n[0]+n[2];var d=A({x:c,y:f},a);return t.style?(t.style.width=s,t.style.height=l):t.style={width:s,height:l},d},update:function(t,e){var n=this.getSize(t),i=t.padding||this.options.padding;Rt(i)&&(i=[i,i,i,i]);var a=Mr(t.style),o,s,l=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;l?Rt(l)?(o=l,s=l):(o=l[0],s=l[1]):(o=Math.max(a.width,n[0])||n[0],s=Math.max(a.height,n[1])||n[1]),a.width=o+i[1]+i[3],a.height=s+i[0]+i[2];var u=e.get("sizeCache");u&&(u.width=a.width,u.height=a.height),a.x=-o/2-i[3],a.y=-s/2-i[0];var c={stroke:t.color},f=e.get("keyShape"),d=$t({},f.attr(),c,a);t.style?(t.style.width=o,t.style.height=s):t.style={width:o,height:s},this.updateShape(t,e,d,!1)},updateShape:function(t,e,n){var i=e.get("keyShape"),a=t.animate===void 0?this.options.animate:t.animate;a&&i.animate?i.animate(n,{duration:200,easing:"easeLinear"}):i.attr(A({},n)),this.updateLabel(t,e)}},"single-combo");Ci.registerNode("simple-circle",{options:{size:Zt.defaultNode.size,style:{x:0,y:0,stroke:Zt.defaultNode.style.stroke,fill:Zt.defaultNode.style.fill,lineWidth:Zt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Zt.nodeLabel.style.fill,fontSize:Zt.nodeLabel.style.fontSize,fontFamily:Zt.windowFontFamily}},stateStyles:A({},Zt.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(t,e){var n=this.getShapeStyle(t),i=this.type+"-keyShape",a=e.addShape("circle",{attrs:n,className:this.type+"-keyShape",name:i,draggable:!0});return e.shapeMap[i]=a,a},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},i=Mt({},e,n),a=this.getSize(t),o=a[0]/2,s=A({x:0,y:0,r:o},i);return s},update:function(t,e,n){var i=this.getSize(t),a={stroke:t.color,r:i[0]/2},o=e.get("keyShape"),s=Mt({},o.attr(),a,t.style);this.updateShape(t,e,s,!0,n)}},"single-node");Ci.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:Zt.defaultNode.style.stroke,fill:Zt.defaultNode.style.fill,lineWidth:Zt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Zt.nodeLabel.style.fill,fontSize:Zt.nodeLabel.style.fontSize,fontFamily:Zt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:A({},Zt.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t),i=e.addShape("rect",{attrs:n,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return i},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},i=$t({},e,n),a=this.getSize(t),o=i.width||a[0],s=i.height||a[1],l=A({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(t,e,n){e.getContainer();var i=(this.mergeStyle||this.getOptions(t)).style,a=this.getSize(t),o=e.get("keyShape");t.size||(a[0]=o.attr("width")||i.width,a[1]=o.attr("height")||i.height);var s={stroke:t.color,x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]},l=$t({},i,o.attr(),s);l=$t(l,t.style),this.updateShape(t,e,l,!1,n)}},"single-node");Ci.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:Zt.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(t,e){var n=this.shapeType,i=this.getShapeStyle(t);delete i.fill;var a=e.addShape(n,{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(t,a),a},drawClip:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).clipCfg;if(!!n.show){var i=n.type,a=n.x,o=n.y,s=n.style;if(i==="circle"){var l=n.r;e.setClip({type:"circle",attrs:A({r:l,x:a,y:o},s)})}else if(i==="rect"){var u=n.width,c=n.height,f=a-u/2,d=o-c/2;e.setClip({type:"rect",attrs:A({x:f,y:d,width:u,height:c},s)})}else if(i==="ellipse"){var h=n.rx,v=n.ry;e.setClip({type:"ellipse",attrs:A({x:a,y:o,rx:h,ry:v},s)})}else if(i==="polygon"){var p=n.points;e.setClip({type:"polygon",attrs:A({points:p},s)})}else if(i==="path"){var g=n.path;e.setClip({type:"path",attrs:A({path:g},s)})}}},getShapeStyle:function(t){var e=this.mergeStyle||this.getOptions(t),n=e.style,i=e.img,a=this.getSize(t),o=a[0],s=a[1];n&&(o=n.width||a[0],s=n.height||a[1]);var l=A({x:-o/2,y:-s/2,width:o,height:s,img:i},n);return l},updateShapeStyle:function(t,e){var n=e.getContainer(),i=this.itemType+"-shape",a=n.shapeMap[i]||n.find(function(s){return s.get("className")===i})||e.getKeyShape(),o=this.getShapeStyle(t);a&&!a.destroyed&&a.attr(o)}},"single-node");var Ave={triangle:function(t,e,n){t===void 0&&(t=10),e===void 0&&(e=15),n===void 0&&(n=0);var i=n*2,a="M "+i+",0 L "+(i+e)+",-"+t/2+" L "+(i+e)+","+t/2+" Z";return a},vee:function(t,e,n){t===void 0&&(t=15),e===void 0&&(e=20),n===void 0&&(n=0);var i=n*2,a="M "+i+",0 L "+(i+e)+",-"+t/2+`
        L `+(i+2*e/3)+",0 L "+(i+e)+","+t/2+" Z";return a},circle:function(t,e){t===void 0&&(t=5),e===void 0&&(e=0);var n=e*2,i="M "+n+`, 0
            a `+t+","+t+" 0 1,0 "+t*2+`,0
            a `+t+","+t+" 0 1,0 "+-t*2+",0";return i},rect:function(t,e,n){t===void 0&&(t=10),e===void 0&&(e=10),n===void 0&&(n=0);var i=n*2,a="M "+i+","+-t/2+` 
        L `+(i+e)+","+-t/2+` 
        L `+(i+e)+","+t/2+` 
        L `+i+","+t/2+" Z";return a},diamond:function(t,e,n){t===void 0&&(t=15),e===void 0&&(e=15),n===void 0&&(n=0);var i=n*2,a="M "+i+`,0 
        L `+(i+e/2)+","+-t/2+` 
        L `+(i+e)+`,0 
        L `+(i+e/2)+","+t/2+" Z";return a},triangleRect:function(t,e,n,i,a,o){t===void 0&&(t=15),e===void 0&&(e=15),n===void 0&&(n=15),i===void 0&&(i=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,l=s+e+a,u="M "+s+",0 L "+(s+e)+",-"+t/2+" L "+(s+e)+","+t/2+` Z
            M `+l+", -"+n/2+`
            L `+(l+i)+" -"+n/2+`
            L `+(l+i)+" "+n/2+`
            L `+l+" "+n/2+`
            Z`;return u}},Mve={collapse:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,n*2,0],["a",n,n,0,1,0,-n*2,0],["M",t-n+4,e],["L",t+n-4,e]]},expand:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,n*2,0],["a",n,n,0,1,0,-n*2,0],["M",t-n+4,e],["L",t-n+2*n-4,e],["M",t-n+n,e-n+4],["L",t,e+n-4]]},upTriangle:function(t,e,n){var i=n*Math.cos(Math.PI/6),a=n*Math.sin(Math.PI/6);return[["M",t-i,e+a],["L",t+i,e+a],["L",t,e-n],["Z"]]},downTriangle:function(t,e,n){var i=n*Math.cos(Math.PI/6),a=n*Math.sin(Math.PI/6);return[["M",t-i,e-a],["L",t+i,e-a],["L",t,e+n],["Z"]]}},kve=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],Ive=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",defaultSubjectColors:kve}),Pve=Un,Zs=A(A(A(A(A(A({},Whe),pfe),ove),sfe),Ive),{transform:Pve,mat3:ice}),Dve=function(){function r(t){this.graph=t,this.layoutCfg=t.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return r.prototype.initLayout=function(){},r.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},r.prototype.getLayoutCfgType=function(t){var e=t.type;if(e)return e;var n=t.pipes;return Array.isArray(n)?n.map(function(i){return(i==null?void 0:i.type)||""}):null},r.prototype.isLayoutTypeSame=function(t){var e=this.getLayoutCfgType(t);return Array.isArray(this.layoutType)?this.layoutType.every(function(n,i){return n===e[i]}):(t==null?void 0:t.type)===this.layoutType},r.prototype.refreshLayout=function(){var t=this.graph;!t||(t.get("animate")?t.positionsAnimate():t.refreshPositions())},r.prototype.changeLayout=function(t){this.layoutCfg=t,this.destoryLayoutMethods(),this.layout()},r.prototype.changeData=function(){this.destoryLayoutMethods(),this.layout()},r.prototype.destoryLayoutMethods=function(){var t=this.layoutMethods;t==null||t.forEach(function(e){e.destroy()}),this.layoutMethods=[]},r.prototype.destroyLayout=function(){var t=this.graph;this.destoryLayoutMethods(),t.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},r.prototype.setDataFromGraph=function(){for(var t=[],e=[],n=[],i=[],a=[],o=[],s=[],l=this.graph.getNodes(),u=this.graph.getEdges(),c=this.graph.getCombos(),f=l.length,d=0;d<f;d++){var h=l[d];if(!(!h||h.destroyed)){var v=h.getModel();if(!h.isVisible()){e.push(v);continue}t.push(v)}}for(var p=u.length,d=0;d<p;d++){var g=u[d];if(!(!g||g.destroyed)){var v=g.getModel();if(!g.isVisible()){i.push(v);continue}v.isComboEdge?a.push(v):n.push(v)}}for(var m=c.length,d=0;d<m;d++){var y=c[d];if(!y.destroyed){var v=y.getModel();if(!y.isVisible()){i.push(v);continue}o.push(v)}}return{nodes:t,hiddenNodes:e,edges:n,hiddenEdges:i,combos:o,hiddenCombos:s,comboEdges:a}},r.prototype.reLayoutMethod=function(t,e){var n=this;return new Promise(function(i,a){var o=n.graph,s=e==null?void 0:e.type;e.onLayoutEnd=function(){o.emit("aftersublayout",{type:s}),i()},t.init(n.data),s==="force"&&(t.ticking=!1,t.forceSimulation.stop()),o.emit("beforesublayout",{type:s}),t.execute(),t.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd()})},r.prototype.relayout=function(t){var e=this,n=this,i=n.graph,a=n.layoutMethods,o=n.layoutCfg;if(t){this.data=this.setDataFromGraph();var s=this.data.nodes;if(!s)return!1;this.initPositions(o.center,s)}i.emit("beforelayout");var l=Promise.resolve();a==null||a.forEach(function(u,c){var f=o[c];l=l.then(function(){return e.reLayoutMethod(u,f)})}),l.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd()}).catch(function(u){console.warn("relayout failed",u)})},r.prototype.filterLayoutData=function(t,e){var n=t.nodes,i=t.edges,a=Lr(t,["nodes","edges"]);if(!n)return t;var o,s;Vt(e==null?void 0:e.nodesFilter)?o=e.nodesFilter:o=function(){return!0};var l=n.filter(o);if(Vt(e==null?void 0:e.edgesFilter))s=e.edgesFilter;else{var u=l.reduce(function(c,f){return c[f.id]=!0,c},{});s=function(f){return u[f.source]&&u[f.target]}}return A({nodes:l,edges:i.filter(s)},a)},r.prototype.getLayoutBBox=function(t){var e=this.graph,n=ao(e.getNodes(),function(o){return o.getModel().layoutOrder}),i=Object.values(n).map(function(o){var s=I$(o);return s.size=[s.width,s.height],s}),a=Object.values(ao(t,"layoutOrder"));return{groupNodes:a,layoutNodes:i}},r.prototype.layoutAnimate=function(){},r.prototype.moveToZero=function(){var t=this.graph,e=t.get("data"),n=e.nodes;if(!(n[0].x===void 0||n[0].x===null||D1(n[0].x))){for(var i=[0,0],a=n.length,o=0;o<a;o++){var s=n[o];i[0]+=s.x,i[1]+=s.y}i[0]/=n.length,i[1]/=n.length;for(var o=0;o<a;o++){var s=n[o];s.x-=i[0],s.y-=i[1]}}},r.prototype.initPositions=function(t,e){var n=this.graph;if(!e)return!1;var i=e?e.length:0;if(!!i){var a=n.get("width")*.85,o=n.get("height")*.85,s=Math.ceil(Math.sqrt(i)*(a/o)),l=Math.ceil(i/s),u=a/(s-1),c=o/(l-1);(!isFinite(u)||!u)&&(u=0),(!isFinite(c)||!u)&&(c=0);for(var f=t[0]-a/2,d=t[1]-o/2,h=!0,v=0;v<i;v++){var p=e[v];D1(+p.x)&&(h=!1,p.x=v%s*u+f),D1(+p.y)&&(h=!1,p.y=Math.floor(v/s)*c+d)}return h}},r.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},r}(),Rve=function(){function r(t){this.graph=t,this.destroyed=!1,this.initEvents()}return r}(),z1;(function(r){r.CLICK="click",r.DBLCLICK="dblclick",r.MOUSEDOWN="mousedown",r.MOUDEUP="mouseup",r.CONTEXTMENU="contextmenu",r.MOUSEENTER="mouseenter",r.MOUSEOUT="mouseout",r.MOUSEOVER="mouseover",r.MOUSEMOVE="mousemove",r.MOUSELEAVE="mouseleave",r.DRAGSTART="dragstart",r.DRAGEND="dragend",r.DRAG="drag",r.DRAGENTER="dragenter",r.DRAGLEAVE="dragleave",r.DRAGOVER="dragover",r.DRAGOUT="dragout",r.DDROP="drop",r.KEYUP="keyup",r.KEYDOWN="keydown",r.WHEEL="wheel",r.FOCUS="focus",r.BLUR="blur",r.TOUCHSTART="touchstart",r.TOUCHMOVE="touchmove",r.TOUCHEND="touchend",r.CANVAS_TOUCHSTART="canvas:touchstart",r.CANVAS_TOUCHMOVE="canvas:touchmove",r.CANVAS_TOUCHEND="canvas:touchend",r.NODE_TOUCHSTART="node:touchstart",r.NODE_TOUCHMOVE="node:touchmove",r.NODE_TOUCHEND="node:touchend",r.COMBO_TOUCHSTART="combo:touchstart",r.COMBO_TOUCHMOVE="combo:touchmove",r.COMBO_TOUCHEND="combo:touchend",r.EDGE_TOUCHSTART="edge:touchstart",r.EDGE_TOUCHMOVE="edge:touchmove",r.EDGE_TOUCHEND="edge:touchend",r.NODE_CONTEXTMENU="node:contextmenu",r.NODE_CLICK="node:click",r.NODE_DBLCLICK="node:dblclick",r.NODE_MOUSEDOWN="node:mousedown",r.NODE_MOUSEUP="node:mouseup",r.NODE_MOUSEENTER="node:mouseenter",r.NODE_MOUSELEAVE="node:mouseleave",r.NODE_MOUSEMOVE="node:mousemove",r.NODE_MOUSEOUT="node:mouseout",r.NODE_MOUSEOVER="node:mouseover",r.NODE_DROP="node:drop",r.NODE_DRAGOVER="node:dragover",r.NODE_DRAGENTER="node:dragenter",r.NODE_DRAGLEAVE="node:dragleave",r.NODE_DRAGSTART="node:dragstart",r.NODE_DRAG="node:drag",r.NODE_DRAGEND="node:dragend",r.NODE_TAP="node:tap",r.NODE_PANSTART="node:panstart",r.NODE_PANMOVE="node:panmove",r.NODE_PANEND="node:panend",r.COMBO_CONTEXTMENU="combo:contextmenu",r.COMBO_CLICK="combo:click",r.COMBO_DBLCLICK="combo:dblclick",r.COMBO_MOUSEDOWN="combo:mousedown",r.COMBO_MOUSEUP="combo:mouseup",r.COMBO_MOUSEENTER="combo:mouseenter",r.COMBO_MOUSELEAVE="combo:mouseleave",r.COMBO_MOUSEMOVE="combo:mousemove",r.COMBO_MOUSEOUT="combo:mouseout",r.COMBO_MOUSEOVER="combo:mouseover",r.COMBO_DROP="combo:drop",r.COMBO_DRAGOVER="combo:dragover",r.COMBO_DRAGENTER="combo:dragenter",r.COMBO_DRAGLEAVE="combo:dragleave",r.COMBO_DRAGSTART="combo:dragstart",r.COMBO_DRAG="combo:drag",r.COMBO_DRAGEND="combo:dragend",r.COMBO_TAP="combo:tap",r.COMBO_PANSTART="combo:panstart",r.COMBO_PANMOVE="combo:panmove",r.COMBO_PANEND="combo:panend",r.EDGE_CONTEXTMENU="edge:contextmenu",r.EDGE_CLICK="edge:click",r.EDGE_DBLCLICK="edge:dblclick",r.EDGE_MOUSEDOWN="edge:mousedown",r.EDGE_MOUSEUP="edge:mouseup",r.EDGE_MOUSEENTER="edge:mouseenter",r.EDGE_MOUSELEAVE="edge:mouseleave",r.EDGE_MOUSEMOVE="edge:mousemove",r.EDGE_MOUSEOUT="edge:mouseout",r.EDGE_MOUSEOVER="edge:mouseover",r.EDGE_DROP="edge:drop",r.EDGE_DRAGOVER="edge:dragover",r.EDGE_DRAGENTER="edge:dragenter",r.EDGE_DRAGLEAVE="edge:dragleave",r.CANVAS_CONTEXTMENU="canvas:contextmenu",r.CANVAS_CLICK="canvas:click",r.CANVAS_DBLCLICK="canvas:dblclick",r.CANVAS_MOUSEDOWN="canvas:mousedown",r.CANVAS_MOUSEUP="canvas:mouseup",r.CANVAS_MOUSEENTER="canvas:mouseenter",r.CANVAS_MOUSELEAVE="canvas:mouseleave",r.CANVAS_MOUSEMOVE="canvas:mousemove",r.CANVAS_MOUSEOUT="canvas:mouseout",r.CANVAS_MOUSEOVER="canvas:mouseover",r.CANVAS_DROP="canvas:drop",r.CANVAS_DRAGENTER="canvas:dragenter",r.CANVAS_DRAGLEAVE="canvas:dragleave",r.CANVAS_DRAGSTART="canvas:dragstart",r.CANVAS_DRAG="canvas:drag",r.CANVAS_DRAGEND="canvas:dragend",r.CANVAS_TAP="canvas:tap",r.CANVAS_PANSTART="canvas:panstart",r.CANVAS_PANMOVE="canvas:panmove",r.CANVAS_PANEND="canvas:panend",r.BEFORERENDER="beforerender",r.AFTERRENDER="afterrender",r.BEFOREADDITEM="beforeadditem",r.AFTERADDITEM="afteradditem",r.BEFOREREMOVEITEM="beforeremoveitem",r.AFTERREMOVEITEM="afterremoveitem",r.BEFOREUPDATEITEM="beforeupdateitem",r.AFTERUPDATEITEM="afterupdateitem",r.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",r.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",r.BEFOREITEMSTATECHANGE="beforeitemstatechange",r.AFTERITEMSTATECHANGE="afteritemstatechange",r.BEFOREITEMREFRESH="beforeitemrefresh",r.AFTERITEMREFRESH="afteritemrefresh",r.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",r.AFTERITEMSTATESCLEAR="afteritemstatesclear",r.BEFOREMODECHANGE="beforemodechange",r.AFTERMODECHANGE="aftermodechange",r.BEFORELAYOUT="beforelayout",r.AFTERLAYOUT="afterlayout",r.BEFORECREATEEDGE="beforecreateedge",r.AFTERCREATEEDGE="aftercreateedge",r.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",r.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",r.BEFOREGRAPHREFRESH="beforegraphrefresh",r.AFTERGRAPHREFRESH="aftergraphrefresh",r.BEFOREANIMATE="beforeanimate",r.AFTERANIMATE="afteranimate",r.BEFOREPAINT="beforepaint",r.AFTERPAINT="afterpaint",r.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",r.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",r.GRAPHSTATECHANGE="graphstatechange",r.AFTERACTIVATERELATIONS="afteractivaterelations",r.NODESELECTCHANGE="nodeselectchange",r.TOOLTIPCHANGE="tooltipchange",r.WHEELZOOM="wheelzoom",r.VIEWPORTCHANGE="viewportchange",r.DRAGNODEEND="dragnodeend",r.STACKCHANGE="stackchange",r.TAP="tap",r.PINCHSTART="pinchstart",r.PINCHMOVE="pinchmove",r.PANSTART="panstart",r.PANMOVE="panmove",r.PANEND="panend"})(z1||(z1={}));var Cu=Ci.registerNode,t4=Ci.registerEdge,Ove=Ci.registerCombo,r4=D3.registerBehavior,Gt=Zt,Ic=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function IA(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function hn(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Rr(r,t){return t={exports:{}},r(t,t.exports),t.exports}var hi=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGE=t.ALGORITHM=void 0;var e={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};t.ALGORITHM=e;var n={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};t.MESSAGE=n});hn(hi);hi.MESSAGE;hi.ALGORITHM;var Hm=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(a,o){var s=a.nodes,l=a.edges,u=[],c={};if(!s)throw new Error("invalid nodes data!");return s&&s.forEach(function(f,d){c[f.id]=d;var h=[];u.push(h)}),l&&l.forEach(function(f){var d=f.source,h=f.target,v=c[d],p=c[h];!v&&v!==0||!p&&p!==0||(u[v][p]=1,o||(u[p][v]=1))}),u},n=e;t.default=n});hn(Hm);var PA=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LinkedListNode=void 0;var e=function(s,l){return s===l},n=function(){function o(s,l){l===void 0&&(l=null),this.value=s,this.next=l}return o.prototype.toString=function(s){return s?s(this.value):"".concat(this.value)},o}();t.LinkedListNode=n;var i=function(){function o(s){s===void 0&&(s=e),this.head=null,this.tail=null,this.compare=s}return o.prototype.prepend=function(s){var l=new n(s,this.head);return this.head=l,this.tail||(this.tail=l),this},o.prototype.append=function(s){var l=new n(s);return this.head?(this.tail.next=l,this.tail=l,this):(this.head=l,this.tail=l,this)},o.prototype.delete=function(s){if(!this.head)return null;for(var l=null;this.head&&this.compare(this.head.value,s);)l=this.head,this.head=this.head.next;var u=this.head;if(u!==null)for(;u.next;)this.compare(u.next.value,s)?(l=u.next,u.next=u.next.next):u=u.next;return this.compare(this.tail.value,s)&&(this.tail=u),l},o.prototype.find=function(s){var l=s.value,u=l===void 0?void 0:l,c=s.callback,f=c===void 0?void 0:c;if(!this.head)return null;for(var d=this.head;d;){if(f&&f(d.value)||u!==void 0&&this.compare(d.value,u))return d;d=d.next}return null},o.prototype.deleteTail=function(){var s=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,s;for(var l=this.head;l.next;)l.next.next?l=l.next:l.next=null;return this.tail=l,s},o.prototype.deleteHead=function(){if(!this.head)return null;var s=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),s},o.prototype.fromArray=function(s){var l=this;return s.forEach(function(u){return l.append(u)}),this},o.prototype.toArray=function(){for(var s=[],l=this.head;l;)s.push(l),l=l.next;return s},o.prototype.reverse=function(){for(var s=this.head,l=null,u=null;s;)u=s.next,s.next=l,l=s,s=u;this.tail=this.head,this.head=l},o.prototype.toString=function(s){return s===void 0&&(s=void 0),this.toArray().map(function(l){return l.toString(s)}).toString()},o}(),a=i;t.default=a});hn(PA);PA.LinkedListNode;var n4=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(PA);function n(o){return o&&o.__esModule?o:{default:o}}var i=function(){function o(){this.linkedList=new e.default}return o.prototype.isEmpty=function(){return!this.linkedList.head},o.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},o.prototype.enqueue=function(s){this.linkedList.append(s)},o.prototype.dequeue=function(){var s=this.linkedList.deleteHead();return s?s.value:null},o.prototype.toString=function(s){return this.linkedList.toString(s)},o}(),a=i;t.default=a});hn(n4);var Ei=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueId=t.getOutEdgesNodeId=t.getNeighbors=t.getEdgesByNodeId=void 0;var e=function(s,l,u){l===void 0&&(l=[]);var c=l.filter(function(v){return v.source===s||v.target===s});if(u==="target"){var f=function(p){return p.source===s};return c.filter(f).map(function(v){return v.target})}if(u==="source"){var d=function(p){return p.target===s};return c.filter(d).map(function(v){return v.source})}var h=function(p){return p.source===s?p.target:p.source};return c.map(h)};t.getNeighbors=e;var n=function(s,l){return l.filter(function(u){return u.source===s})};t.getOutEdgesNodeId=n;var i=function(s,l){return l.filter(function(u){return u.source===s||u.target===s})};t.getEdgesByNodeId=i;var a=function(s){s===void 0&&(s=0);var l="".concat(Math.random()).split(".")[1].substr(0,5),u="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(s,"-").concat(l).concat(u)};t.uniqueId=a});hn(Ei);Ei.uniqueId;Ei.getOutEdgesNodeId;Ei.getNeighbors;Ei.getEdgesByNodeId;var i4=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(n4);function n(s){return s&&s.__esModule?s:{default:s}}function i(s){s===void 0&&(s={});var l=s,u=function(){},c=function(){var f={};return function(d){var h=d.next,v=h;return f[v]?!1:(f[v]=!0,!0)}}();return l.allowTraversal=s.allowTraversal||c,l.enter=s.enter||u,l.leave=s.leave||u,l}var a=function(l,u,c,f){f===void 0&&(f=!0);var d=i(c),h=new e.default,v=l.edges,p=v===void 0?[]:v;h.enqueue(u);for(var g="",m=function(){var b=h.dequeue();d.enter({current:b,previous:g}),(0,Ei.getNeighbors)(b,p,f?"target":void 0).forEach(function(x){d.allowTraversal({previous:g,current:b,next:x})&&h.enqueue(x)}),d.leave({current:b,previous:g}),g=b};!h.isEmpty();)m()},o=a;t.default=o});hn(i4);var Wm=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,t.detectStrongConnectComponents=t.detectConnectedComponents=void 0;var e=function(o){for(var s=o.nodes,l=s===void 0?[]:s,u=o.edges,c=u===void 0?[]:u,f=[],d={},h=[],v=function y(b){h.push(b),d[b.id]=!0;for(var x=(0,Ei.getNeighbors)(b.id,c),w=function(_){var T=x[_];if(!d[T]){var E=l.filter(function(M){return M.id===T});E.length>0&&y(E[0])}},S=0;S<x.length;++S)w(S)},p=0;p<l.length;p++){var g=l[p];if(!d[g.id]){v(g);for(var m=[];h.length>0;)m.push(h.pop());f.push(m)}}return f};t.detectConnectedComponents=e;var n=function(o){for(var s=o.nodes,l=s===void 0?[]:s,u=o.edges,c=u===void 0?[]:u,f=[],d={},h={},v={},p=[],g=0,m=function w(S){h[S.id]=g,v[S.id]=g,g+=1,f.push(S),d[S.id]=!0;for(var C=(0,Ei.getNeighbors)(S.id,c,"target").filter(function(k){return l.map(function(P){return P.id}).indexOf(k)>-1}),_=function(P){var F=C[P];if(!h[F]&&h[F]!==0){var $=l.filter(function(R){return R.id===F});$.length>0&&w($[0]),v[S.id]=Math.min(v[S.id],v[F])}else d[F]&&(v[S.id]=Math.min(v[S.id],h[F]))},T=0;T<C.length;T++)_(T);if(v[S.id]===h[S.id]){for(var E=[];f.length>0;){var M=f.pop();if(d[M.id]=!1,E.push(M),M===S)break}E.length>0&&p.push(E)}},y=0,b=l;y<b.length;y++){var x=b[y];!h[x.id]&&h[x.id]!==0&&m(x)}return p};t.detectStrongConnectComponents=n;function i(a,o){return o?n(a):e(a)}});hn(Wm);Wm.detectStrongConnectComponents;Wm.detectConnectedComponents;var jm=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getOutDegree=t.getInDegree=t.default=void 0;var e=function(s){var l={},u=s.nodes,c=u===void 0?[]:u,f=s.edges,d=f===void 0?[]:f;return c.forEach(function(h){l[h.id]={degree:0,inDegree:0,outDegree:0}}),d.forEach(function(h){l[h.source].degree++,l[h.source].outDegree++,l[h.target].degree++,l[h.target].inDegree++}),l},n=e;t.default=n;var i=function(s,l){var u=e(s);return u[l]?e(s)[l].inDegree:0};t.getInDegree=i;var a=function(s,l){var u=e(s);return u[l]?e(s)[l].outDegree:0};t.getOutDegree=a});hn(jm);jm.getOutDegree;jm.getInDegree;var DA=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;function e(a){a===void 0&&(a={});var o=a,s=function(){},l=function(){var u={};return function(c){var f=c.next;return u[f]?!1:(u[f]=!0,!0)}}();return o.allowTraversal=a.allowTraversal||l,o.enter=a.enter||s,o.leave=a.leave||s,o}function n(a,o,s,l){l.enter({current:o,previous:s});var u=a.edges,c=u===void 0?[]:u;(0,Ei.getNeighbors)(o,c,"target").forEach(function(f){l.allowTraversal({previous:s,current:o,next:f})&&n(a,f,o,l)}),l.leave({current:o,previous:s})}function i(a,o,s){n(a,o,"",e(s))}});hn(DA);var Ym=Rr(function(r,t){function e(h){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(p){return typeof p}:e=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},e(h)}Object.defineProperty(t,"__esModule",{value:!0}),t.detectAllUndirectedCycle=t.detectAllDirectedCycle=t.detectAllCycles=t.default=void 0;var n=s(DA),i=o(Wm);function a(h){if(typeof WeakMap!="function")return null;var v=new WeakMap,p=new WeakMap;return(a=function(m){return m?p:v})(h)}function o(h,v){if(!v&&h&&h.__esModule)return h;if(h===null||e(h)!=="object"&&typeof h!="function")return{default:h};var p=a(v);if(p&&p.has(h))return p.get(h);var g={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in h)if(y!=="default"&&Object.prototype.hasOwnProperty.call(h,y)){var b=m?Object.getOwnPropertyDescriptor(h,y):null;b&&(b.get||b.set)?Object.defineProperty(g,y,b):g[y]=h[y]}return g.default=h,p&&p.set(h,g),g}function s(h){return h&&h.__esModule?h:{default:h}}var l=function(v){var p=null,g=v.nodes,m=g===void 0?[]:g,y={},b={},x={},w={};m.forEach(function(_){b[_.id]=_});for(var S={enter:function(T){var E=T.current,M=T.previous;if(x[E]){p={};for(var k=E,P=M;P!==E;)p[k]=P,k=P,P=y[P];p[k]=P}else x[E]=E,delete b[E],y[E]=M},leave:function(T){var E=T.current;w[E]=E,delete x[E]},allowTraversal:function(T){var E=T.next;return p?!1:!w[E]}};Object.keys(b).length;){var C=Object.keys(b)[0];(0,n.default)(v,C,S)}return p},u=function(v,p,g){var m,y;g===void 0&&(g=!0);for(var b=[],x=(0,i.default)(v,!1),w=0,S=x;w<S.length;w++){var C=S[w];if(!!C.length)for(var _=C[0],T=_.id,E=[_],M=(m={},m[T]=_,m),k=(y={},y[T]=new Set,y);E.length>0;)for(var P=E.pop(),F=P.id,$=(0,Ei.getNeighbors)(F,v.edges),R=function(B){var U,W=$[B],X=v.nodes.find(function(ue){return ue.id===W});if(W===F)b.push((U={},U[W]=P,U));else if(!(W in k))M[W]=P,E.push(X),k[W]=new Set([P]);else if(!k[F].has(X)){for(var ae=!0,Z=[X,P],Y=M[F];k[W].size&&!k[W].has(Y)&&(Z.push(Y),Y!==M[Y.id]);)Y=M[Y.id];if(Z.push(Y),p&&g?(ae=!1,Z.findIndex(function(ue){return p.indexOf(ue.id)>-1})>-1&&(ae=!0)):p&&!g&&Z.findIndex(function(ue){return p.indexOf(ue.id)>-1})>-1&&(ae=!1),ae){for(var fe={},le=1;le<Z.length;le+=1)fe[Z[le-1].id]=Z[le];Z.length&&(fe[Z[Z.length-1].id]=Z[0]),b.push(fe)}k[W].add(P)}},L=0;L<$.length;L+=1)R(L)}return b};t.detectAllUndirectedCycle=u;var c=function(v,p,g){g===void 0&&(g=!0);for(var m=[],y=new Set,b=[],x=[],w={},S={},C=function(Y){for(var fe=[Y];fe.length>0;){var le=fe.pop();y.has(le)&&(y.delete(le),b[le.id].forEach(function(ue){fe.push(ue)}),b[le.id].clear())}},_=function Z(Y,fe,le){var ue=!1;if(p&&g===!1&&p.indexOf(Y.id)>-1)return ue;m.push(Y),y.add(Y);for(var Ee=le[Y.id],De=0;De<Ee.length;De+=1){var je=w[Ee[De]];if(je===fe){for(var ke={},D=1;D<m.length;D+=1)ke[m[D-1].id]=m[D];m.length&&(ke[m[m.length-1].id]=m[0]),x.push(ke),ue=!0}else y.has(je)||Z(je,fe,le)&&(ue=!0)}if(ue)C(Y);else for(var De=0;De<Ee.length;De+=1){var je=w[Ee[De]];b[je.id].has(Y)||b[je.id].add(Y)}return m.pop(),ue},T=v.nodes,E=T===void 0?[]:T,M=0;M<E.length;M+=1){var k=E[M],P=k.id;S[P]=M,w[M]=k}if(p&&g)for(var F=function(Y){var fe=p[Y];S[E[Y].id]=S[fe],S[fe]=0,w[0]=E.find(function(le){return le.id===fe}),w[S[E[Y].id]]=E[Y]},M=0;M<p.length;M++)F(M);for(var $=function(Y){for(var fe,le,ue=1/0,Ee=0;Ee<Y.length;Ee+=1)for(var De=Y[Ee],je=0;je<De.length;je++){var ke=S[De[je].id];ke<ue&&(ue=ke,le=Ee)}for(var D=Y[le],z=[],Ee=0;Ee<D.length;Ee+=1){var H=D[Ee];z[H.id]=[];for(var he=0,te=(0,Ei.getNeighbors)(H.id,v.edges,"target").filter(function(Ve){return D.map(function(Ie){return Ie.id}).indexOf(Ve)>-1});he<te.length;he++){var ge=te[he];ge===H.id&&!(g===!1&&p.indexOf(H.id)>-1)?x.push((fe={},fe[H.id]=H,fe)):z[H.id].push(S[ge])}}return{component:D,adjList:z,minIdx:ue}},R=0;R<E.length;){var L=E.filter(function(Z){return S[Z.id]>=R}),O=(0,i.detectStrongConnectComponents)({nodes:L,edges:v.edges}).filter(function(Z){return Z.length>1});if(O.length===0)break;var B=$(O),U=B.minIdx,W=B.adjList,X=B.component;if(X.length>1){X.forEach(function(Z){b[Z.id]=new Set});var ae=w[U];if(p&&g&&p.indexOf(ae.id)===-1)return x;_(ae,ae,W),R=U+1}else break}return x};t.detectAllDirectedCycle=c;var f=function(v,p,g,m){return m===void 0&&(m=!0),p?c(v,g,m):u(v,g,m)};t.detectAllCycles=f;var d=l;t.default=d});hn(Ym);Ym.detectAllUndirectedCycle;Ym.detectAllDirectedCycle;Ym.detectAllCycles;var G1=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(s,l,u){for(var c=1/0,f,d=0;d<l.length;d++){var h=l[d].id;!u[h]&&s[h]<=c&&(c=s[h],f=l[d])}return f},n=function(s,l,u,c){var f=s.nodes,d=f===void 0?[]:f,h=s.edges,v=h===void 0?[]:h,p={},g={},m={};d.forEach(function(_,T){var E=_.id;g[E]=1/0,E===l&&(g[E]=0)});for(var y=d.length,b=function(T){var E=e(g,d,p),M=E.id;if(p[M]=!0,g[M]===1/0)return"continue";var k=[];u?k=(0,Ei.getOutEdgesNodeId)(M,v):k=(0,Ei.getEdgesByNodeId)(M,v),k.forEach(function(P){var F=P.target,$=P.source,R=F===M?$:F,L=c&&P[c]?P[c]:1;g[R]>g[E.id]+L?(g[R]=g[E.id]+L,m[R]=[E.id]):g[R]===g[E.id]+L&&m[R].push(E.id)})},x=0;x<y;x++)b();m[l]=[l];var w={};for(var S in g)g[S]!==1/0&&a(l,S,m,w);var C={};for(var S in w)C[S]=w[S][0];return{length:g,path:C,allPath:w}},i=n;t.default=i;function a(o,s,l,u){if(o===s)return[o];if(u[s])return u[s];for(var c=[],f=0,d=l[s];f<d.length;f++){var h=d[f],v=a(o,h,l,u);if(!v)return;for(var p=0,g=v;p<g.length;p++){var m=g[p];(0,cm.isArray)(m)?c.push((0,Lx.__spreadArray)((0,Lx.__spreadArray)([],m,!0),[s],!1)):c.push([m,s])}}return u[s]=c,u[s]}});hn(G1);var Xm=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.findShortestPath=t.findAllPath=void 0;var e=n(G1);function n(o){return o&&o.__esModule?o:{default:o}}var i=function(s,l,u,c,f){var d=(0,e.default)(s,l,c,f),h=d.length,v=d.path,p=d.allPath;return{length:h[u],path:v[u],allPath:p[u]}};t.findShortestPath=i;var a=function(s,l,u,c){var f;if(l===u)return[[l]];var d=s.edges,h=d===void 0?[]:d,v=[l],p=(f={},f[l]=!0,f),g=[],m=[],y=c?(0,Ei.getNeighbors)(l,h,"target"):(0,Ei.getNeighbors)(l,h);for(g.push(y);v.length>0&&g.length>0;){var b=g[g.length-1];if(b.length){var x=b.shift();x&&(v.push(x),p[x]=!0,y=c?(0,Ei.getNeighbors)(x,h,"target"):(0,Ei.getNeighbors)(x,h),g.push(y.filter(function(C){return!p[C]})))}else{var w=v.pop();p[w]=!1,g.pop();continue}if(v[v.length-1]===u){var S=v.map(function(_){return _});m.push(S);var w=v.pop();p[w]=!1,g.pop()}}return m};t.findAllPath=a});hn(Xm);Xm.findShortestPath;Xm.findAllPath;var RA=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(Hm);function n(o){return o&&o.__esModule?o:{default:o}}var i=function(s,l){for(var u=(0,e.default)(s,l),c=[],f=u.length,d=0;d<f;d+=1){c[d]=[];for(var h=0;h<f;h+=1)d===h?c[d][h]=0:u[d][h]===0||!u[d][h]?c[d][h]=1/0:c[d][h]=u[d][h]}for(var v=0;v<f;v+=1)for(var d=0;d<f;d+=1)for(var h=0;h<f;h+=1)c[d][h]>c[d][v]+c[v][h]&&(c[d][h]=c[d][v]+c[v][h]);return c},a=i;t.default=a});hn(RA);var a4=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(Hm);function n(o){return o&&o.__esModule?o:{default:o}}var i=function(s,l,u,c){l===void 0&&(l=!1),u===void 0&&(u="weight"),c===void 0&&(c=1e3);var f=s.nodes,d=f===void 0?[]:f,h=s.edges,v=h===void 0?[]:h,p={},g={};d.forEach(function(T,E){var M=(0,Ei.uniqueId)();T.clusterId=M,p[M]={id:M,nodes:[T]},g[T.id]={node:T,idx:E}});var m=(0,e.default)(s,l),y={};m.forEach(function(T,E){var M=d[E].id;y[M]={},T.forEach(function(k,P){if(!!k){var F=d[P].id;y[M][F]=k}})});for(var b=0,x=function(){var E=!1;if(d.forEach(function(M){var k={};Object.keys(y[M.id]).forEach(function(U){var W=y[M.id][U],X=g[U].node,ae=X.clusterId;k[ae]||(k[ae]=0),k[ae]+=W});var P=-1/0,F=[];if(Object.keys(k).forEach(function(U){P<k[U]?(P=k[U],F=[U]):P===k[U]&&F.push(U)}),!(F.length===1&&F[0]===M.clusterId)){var $=F.indexOf(M.clusterId);if($>=0&&F.splice($,1),F&&F.length){E=!0;var R=p[M.clusterId],L=R.nodes.indexOf(M);R.nodes.splice(L,1);var O=Math.floor(Math.random()*F.length),B=p[F[O]];B.nodes.push(M),M.clusterId=B.id}}}),!E)return"break";b++};b<c;){var w=x();if(w==="break")break}Object.keys(p).forEach(function(T){var E=p[T];(!E.nodes||!E.nodes.length)&&delete p[T]});var S=[],C={};v.forEach(function(T){var E=T.source,M=T.target,k=T[u]||1,P=g[E].node.clusterId,F=g[M].node.clusterId,$="".concat(P,"---").concat(F);if(C[$])C[$].weight+=k,C[$].count++;else{var R={source:P,target:F,weight:k,count:1};C[$]=R,S.push(R)}});var _=[];return Object.keys(p).forEach(function(T){_.push(p[T])}),{clusters:_,clusterEdges:S}},a=i;t.default=a});hn(a4);var o4=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(){function i(a){this.arr=a}return i.prototype.add=function(a){var o,s=a.arr;if(!((o=this.arr)===null||o===void 0?void 0:o.length))return new i(s);if(!(s==null?void 0:s.length))return new i(this.arr);if(this.arr.length===s.length){var l=[];for(var u in this.arr)l[u]=this.arr[u]+s[u];return new i(l)}},i.prototype.subtract=function(a){var o,s=a.arr;if(!((o=this.arr)===null||o===void 0?void 0:o.length))return new i(s);if(!(s==null?void 0:s.length))return new i(this.arr);if(this.arr.length===s.length){var l=[];for(var u in this.arr)l[u]=this.arr[u]-s[u];return new i(l)}},i.prototype.avg=function(a){var o=[];for(var s in this.arr)o[s]=this.arr[s]/a;return new i(o)},i.prototype.negate=function(){var a=[];for(var o in this.arr)a[o]=-this.arr[o];return new i(a)},i.prototype.squareEuclideanDistance=function(a){var o,s=a.arr;if(!((o=this.arr)===null||o===void 0?void 0:o.length)||!(s==null?void 0:s.length))return 0;if(this.arr.length===s.length){var l=0;for(var u in this.arr)l+=Math.pow(this.arr[u]-a.arr[u],2);return l}},i.prototype.normalize=function(){var a=[],o=(0,cm.clone)(this.arr);o.sort(function(c,f){return c-f});var s=o[o.length-1],l=o[0];for(var u in this.arr)a[u]=(this.arr[u]-l)/(s-l);return new i(a)},i}(),n=e;t.default=n});hn(o4);var cd=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.secondReg=t.dateReg=void 0;var e=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;t.secondReg=e;var n=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;t.dateReg=n});hn(cd);cd.secondReg;cd.dateReg;var s4=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(Hm),n=i(o4);function i(d){return d&&d.__esModule?d:{default:d}}var a=function(h,v,p,g){for(var m=v.length,y=2*g,b=0,x=0;x<m;x++)for(var w=h[x].clusterId,S=0;S<m;S++){var C=h[S].clusterId;if(w===C){var _=v[x][S]||0,T=p[x]||0,E=p[S]||0;b+=_-T*E/y}}return b*=1/y,b},o=function(h){h===void 0&&(h=[]);var v={};h.forEach(function(g){Object.keys(g.properties).forEach(function(m){if(!"".concat(g.properties[m]).match(cd.secondReg)&&!"".concat(g.properties[m]).match(cd.dateReg)&&isNaN(Number(g.properties[m]))||m==="id"){v.hasOwnProperty(m)&&delete v[m];return}v.hasOwnProperty(m)?v[m]+=1:v[m]=1})});var p=Object.keys(v).sort(function(g,m){return v[m]-v[g]});return p.length<100?p:p.slice(0,100)},s=function(h,v){return v.map(function(p){if(h.hasOwnProperty(p)){if(!isNaN(Number(h[p])))return Number(h[p]);if(h[p].match(cd.secondReg)||h[p].match(cd.dateReg))return Number(Date.parse(new Date(h[p])))/1e3}return 0})},l=function(h,v){for(var p=[],g=0;g<v.length;g++)p[g]=s(v[g].properties,h);return p},u=function(h,v){h===void 0&&(h=[]);for(var p=h.length,g=new n.default([]),m=0;m<p;m++)g=g.add(new n.default(v[m]));var y=g.avg(p);y.normalize();for(var b=0,m=0;m<p;m++){var x=new n.default(v[m]),w=x.squareEuclideanDistance(y);b+=w}var S=[];h.forEach(function(){S.push([])});for(var m=0;m<p;m++){var x=new n.default(v[m]);h[m].clusterInertial=0;for(var C=0;C<p;C++){if(m===C){S[m][C]=0;continue}var _=new n.default(v[C]);S[m][C]=x.squareEuclideanDistance(_),h[m].clusterInertial+=S[m][C]}}for(var T=0,E=2*p*b,m=0;m<p;m++)for(var M=h[m].clusterId,C=0;C<p;C++){var k=h[C].clusterId;if(!(m===C||M!==k)){var P=h[m].clusterInertial*h[C].clusterInertial/Math.pow(E,2)-S[m][C]/E;T+=P}}return Number(T.toFixed(4))},c=function(h,v,p,g,m,y){v===void 0&&(v=!1),p===void 0&&(p="weight"),g===void 0&&(g=1e-4),m===void 0&&(m=!1),y===void 0&&(y=1);var b=h.nodes,x=b===void 0?[]:b,w=h.edges,S=w===void 0?[]:w,C=[];if(m){x.forEach(function(ue,Ee){ue.properties=ue.properties||{},ue.originIndex=Ee});var _=[];x.every(function(ue){return ue.hasOwnProperty("nodeType")})&&(_=Array.from(new Set(x.map(function(ue){return ue.nodeType}))),x.forEach(function(ue){ue.properties.nodeType=_.findIndex(function(Ee){return Ee===ue.nodeType})}));var T=o(x);C=l(T,x)}var E=1,M={},k={};x.forEach(function(ue,Ee){var De=String(E++);ue.clusterId=De,M[De]={id:De,nodes:[ue]},k[ue.id]={node:ue,idx:Ee}});var P=(0,e.default)(h,v),F=[],$={},R=0;P.forEach(function(ue,Ee){var De=0,je=x[Ee].id;$[je]={},ue.forEach(function(ke,D){if(!!ke){De+=ke;var z=x[D].id;$[je][z]=ke,R+=ke}}),F.push(De)}),R/=2;for(var L=1/0,O=1/0,B=0,U=[],W={};;){m&&x.every(function(ue){return ue.hasOwnProperty("properties")})?L=a(x,P,F,R)+u(x,C)*y:L=a(x,P,F,R),B===0&&(O=L,U=x,W=M);var X=L>0&&L>O&&L-O<g;if(L>O&&(U=x.map(function(ue){return{node:ue,clusterId:ue.clusterId}}),W=(0,cm.clone)(M),O=L),X||B>100)break;B++,Object.keys(M).forEach(function(ue){var Ee=0;S.forEach(function(De){var je=De.source,ke=De.target,D=k[je].node.clusterId,z=k[ke].node.clusterId;(D===ue&&z!==ue||z===ue&&D!==ue)&&(Ee=Ee+(De[p]||1))}),M[ue].sumTot=Ee}),x.forEach(function(ue,Ee){var De=M[ue.clusterId],je=0,ke,D=F[Ee]/(2*R),z=0,H=De.nodes;H.forEach(function(q){var ee=k[q.id].idx;z+=P[Ee][ee]||0});var he=z-De.sumTot*D,te=H.filter(function(q){return q.id!==ue.id}),ge=[];te.forEach(function(q,ee){ge[ee]=C[q.originIndex]});var Qe=u(te,C)*y,Ve=$[ue.id];if(Object.keys(Ve).forEach(function(q){var ee=k[q].node,Q=ee.clusterId;if(Q!==ue.clusterId){var me=M[Q],He=me.nodes;if(!(!He||!He.length)){var ze=0;He.forEach(function(Jt){var Ae=k[Jt.id].idx;ze+=P[Ee][Ae]||0});var it=ze-me.sumTot*D,we=He.concat([ue]),nt=[];we.forEach(function(Jt,Ae){nt[Ae]=C[Jt.originIndex]});var st=u(we,C)*y,jt=it-he;m&&(jt=it+st-(he+Qe)),jt>je&&(je=jt,ke=me)}}}),je>0){ke.nodes.push(ue);var Ie=ue.clusterId;ue.clusterId=ke.id;var Be=De.nodes.indexOf(ue);De.nodes.splice(Be,1);var V=0,j=0;S.forEach(function(q){var ee=q.source,Q=q.target,me=k[ee].node.clusterId,He=k[Q].node.clusterId;(me===ke.id&&He!==ke.id||He===ke.id&&me!==ke.id)&&(V=V+(q[p]||1)),(me===Ie&&He!==Ie||He===Ie&&me!==Ie)&&(j=j+(q[p]||1))}),ke.sumTot=V,De.sumTot=j}})}var ae={},Z=0;Object.keys(W).forEach(function(ue){var Ee=W[ue];if(!Ee.nodes||!Ee.nodes.length){delete W[ue];return}var De=String(Z+1);De!==ue&&(Ee.id=De,Ee.nodes=Ee.nodes.map(function(je){return{id:je.id,clusterId:De}}),W[De]=Ee,ae[ue]=De,delete W[ue],Z++)}),U.forEach(function(ue){var Ee=ue.node,De=ue.clusterId;Ee.clusterId=De,Ee.clusterId&&ae[Ee.clusterId]&&(Ee.clusterId=ae[Ee.clusterId])});var Y=[],fe={};S.forEach(function(ue){var Ee=ue.source,De=ue.target,je=ue[p]||1,ke=k[Ee].node.clusterId,D=k[De].node.clusterId,z="".concat(ke,"---").concat(D);if(fe[z])fe[z].weight+=je,fe[z].count++;else{var H={source:ke,target:D,weight:je,count:1};fe[z]=H,Y.push(H)}});var le=[];return Object.keys(W).forEach(function(ue){le.push(W[ue])}),{clusters:le,clusterEdges:Y}},f=c;t.default=f});hn(s4);var l4=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(){function i(a){this.count=a.length,this.parent={};for(var o=0,s=a;o<s.length;o++){var l=s[o];this.parent[l]=l}}return i.prototype.find=function(a){for(;this.parent[a]!==a;)a=this.parent[a];return a},i.prototype.union=function(a,o){var s=this.find(a),l=this.find(o);s!==l&&(s<l?(this.parent[o]!==o&&this.union(this.parent[o],a),this.parent[o]=this.parent[a]):(this.parent[a]!==a&&this.union(this.parent[a],o),this.parent[a]=this.parent[o]))},i.prototype.connected=function(a,o){return this.find(a)===this.find(o)},i}(),n=e;t.default=n});hn(l4);var u4=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(o,s){return o-s},n=function(){function a(o){o===void 0&&(o=e),this.compareFn=o,this.list=[]}return a.prototype.getLeft=function(o){return 2*o+1},a.prototype.getRight=function(o){return 2*o+2},a.prototype.getParent=function(o){return o===0?null:Math.floor((o-1)/2)},a.prototype.isEmpty=function(){return this.list.length<=0},a.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},a.prototype.delMin=function(){var o=this.top(),s=this.list.pop();return this.list.length>0&&(this.list[0]=s,this.moveDown(0)),o},a.prototype.insert=function(o){if(o!==null){this.list.push(o);var s=this.list.length-1;return this.moveUp(s),!0}return!1},a.prototype.moveUp=function(o){for(var s=this.getParent(o);o&&o>0&&this.compareFn(this.list[s],this.list[o])>0;){var l=this.list[s];this.list[s]=this.list[o],this.list[o]=l,o=s,s=this.getParent(o)}},a.prototype.moveDown=function(o){var s,l=o,u=this.getLeft(o),c=this.getRight(o),f=this.list.length;u!==null&&u<f&&this.compareFn(this.list[l],this.list[u])>0?l=u:c!==null&&c<f&&this.compareFn(this.list[l],this.list[c])>0&&(l=c),o!==l&&(s=[this.list[l],this.list[o]],this.list[o]=s[0],this.list[l]=s[1],this.moveDown(l))},a}(),i=n;t.default=i});hn(u4);var c4=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(l4),n=i(u4);function i(u){return u&&u.__esModule?u:{default:u}}var a=function(c,f){var d=[],h=c.nodes,v=h===void 0?[]:h,p=c.edges,g=p===void 0?[]:p;if(v.length===0)return d;var m=v[0],y=new Set;y.add(m);var b=function(T,E){return f?T.weight-E.weight:0},x=new n.default(b);for((0,Ei.getEdgesByNodeId)(m.id,g).forEach(function(_){x.insert(_)});!x.isEmpty();){var w=x.delMin(),S=w.source,C=w.target;y.has(S)&&y.has(C)||(d.push(w),y.has(S)||(y.add(S),(0,Ei.getEdgesByNodeId)(S,g).forEach(function(_){x.insert(_)})),y.has(C)||(y.add(C),(0,Ei.getEdgesByNodeId)(C,g).forEach(function(_){x.insert(_)})))}return d},o=function(c,f){var d=[],h=c.nodes,v=h===void 0?[]:h,p=c.edges,g=p===void 0?[]:p;if(v.length===0)return d;var m=g.map(function(S){return S});f&&m.sort(function(S,C){return S.weight-C.weight});for(var y=new e.default(v.map(function(S){return S.id}));m.length>0;){var b=m.shift(),x=b.source,w=b.target;y.connected(x,w)||(d.push(b),y.union(x,w))}return d},s=function(c,f,d){var h={prim:a,kruskal:o};return d?h[d](c,f):o(c,f)},l=s;t.default=l});hn(c4);var f4=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(jm);function n(o){return o&&o.__esModule?o:{default:o}}var i=function(s,l,u){typeof l!="number"&&(l=1e-6),typeof u!="number"&&(u=.85);for(var c=1,f=0,d=1e3,h=s.nodes,v=h===void 0?[]:h,p=s.edges,g=p===void 0?[]:p,m=v.length,y,b={},x={},w=0;w<m;++w){var S=v[w],C=S.id;b[C]=1/m,x[C]=1/m}for(var _=(0,e.default)(s);d>0&&c>l;){f=0;for(var w=0;w<m;++w){var S=v[w],C=S.id;if(y=0,_[S.id].inDegree===0)b[C]=0;else{for(var T=(0,Ei.getNeighbors)(C,g,"source"),E=0;E<T.length;++E){var M=T[E],k=_[M].outDegree;k>0&&(y+=x[M]/k)}b[C]=u*y,f+=b[C]}}f=(1-f)/m,c=0;for(var w=0;w<m;++w){var S=v[w],C=S.id;y=b[C]+f,c+=Math.abs(y-x[C]),x[C]=y}d-=1}return x},a=i;t.default=a});hn(f4);var _i=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.VACANT_NODE_LABEL=t.VACANT_NODE_ID=t.VACANT_GRAPH_ID=t.VACANT_EDGE_LABEL=t.VACANT_EDGE_ID=t.Node=t.Graph=t.Edge=t.AUTO_EDGE_ID=void 0;var e=-1;t.VACANT_EDGE_ID=e;var n=-1;t.VACANT_NODE_ID=n;var i="-1";t.VACANT_EDGE_LABEL=i;var a="-1";t.VACANT_NODE_LABEL=a;var o=-1;t.VACANT_GRAPH_ID=o;var s="-1";t.AUTO_EDGE_ID=s;var l=function(){function f(d,h,v,p){d===void 0&&(d=e),h===void 0&&(h=n),v===void 0&&(v=n),p===void 0&&(p=i),this.id=d,this.from=h,this.to=v,this.label=p}return f}();t.Edge=l;var u=function(){function f(d,h){d===void 0&&(d=n),h===void 0&&(h=a),this.id=d,this.label=h,this.edges=[],this.edgeMap={}}return f.prototype.addEdge=function(d){this.edges.push(d),this.edgeMap[d.id]=d},f}();t.Node=u;var c=function(){function f(d,h,v){d===void 0&&(d=n),h===void 0&&(h=!0),v===void 0&&(v=!1),this.id=d,this.edgeIdAutoIncrease=h,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=v}return f.prototype.getNodeNum=function(){return this.nodes.length},f.prototype.addNode=function(d,h){if(!this.nodeMap[d]){var v=new u(d,h);this.nodes.push(v),this.nodeMap[d]=v,this.nodeLabelMap[h]||(this.nodeLabelMap[h]=[]),this.nodeLabelMap[h].push(d)}},f.prototype.addEdge=function(d,h,v,p){if((this.edgeIdAutoIncrease||d===void 0)&&(d=this.counter++),!(this.nodeMap[h]&&this.nodeMap[v]&&this.nodeMap[v].edgeMap[d])){var g=new l(d,h,v,p);if(this.edges.push(g),this.edgeMap[d]=g,this.nodeMap[h].addEdge(g),this.edgeLabelMap[p]||(this.edgeLabelMap[p]=[]),this.edgeLabelMap[p].push(g),!this.directed){var m=new l(d,v,h,p);this.nodeMap[v].addEdge(m),this.edgeLabelMap[p].push(m)}}},f}();t.Graph=c});hn(_i);_i.VACANT_NODE_LABEL;_i.VACANT_NODE_ID;_i.VACANT_GRAPH_ID;_i.VACANT_EDGE_LABEL;_i.VACANT_EDGE_ID;_i.Node;_i.Graph;_i.Edge;_i.AUTO_EDGE_ID;var d4=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(){function f(d,h,v,p,g){this.fromNode=d,this.toNode=h,this.nodeEdgeNodeLabel={nodeLabel1:v||_i.VACANT_NODE_LABEL,edgeLabel:p||_i.VACANT_EDGE_LABEL,nodeLabel2:g||_i.VACANT_NODE_LABEL}}return f.prototype.equalTo=function(d){return this.fromNode===d.formNode&&this.toNode===d.toNode&&this.nodeEdgeNodeLabel===d.nodeEdgeNodeLabel},f.prototype.notEqualTo=function(d){return!this.equalTo(d)},f}(),n=function(){function f(){this.rmpath=[],this.dfsEdgeList=[]}return f.prototype.equalTo=function(d){var h=this.dfsEdgeList.length,v=d.length;if(h!==v)return!1;for(var p=0;p<h;p++)if(this.dfsEdgeList[p]!==d[p])return!1;return!0},f.prototype.notEqualTo=function(d){return!this.equalTo(d)},f.prototype.pushBack=function(d,h,v,p,g){return this.dfsEdgeList.push(new e(d,h,v,p,g)),this.dfsEdgeList},f.prototype.toGraph=function(d,h){d===void 0&&(d=_i.VACANT_GRAPH_ID),h===void 0&&(h=!1);var v=new _i.Graph(d,!0,h);return this.dfsEdgeList.forEach(function(p){var g=p.fromNode,m=p.toNode,y=p.nodeEdgeNodeLabel,b=y.nodeLabel1,x=y.edgeLabel,w=y.nodeLabel2;b!==_i.VACANT_NODE_LABEL&&v.addNode(g,b),w!==_i.VACANT_NODE_LABEL&&v.addNode(m,w),b!==_i.VACANT_NODE_LABEL&&w!==b&&v.addEdge(void 0,g,m,x)}),v},f.prototype.buildRmpath=function(){this.rmpath=[];for(var d=void 0,h=this.dfsEdgeList.length,v=h-1;v>=0;v--){var p=this.dfsEdgeList[v],g=p.fromNode,m=p.toNode;g<m&&(d===void 0||m===d)&&(this.rmpath.push(v),d=g)}return this.rmpath},f.prototype.getNodeNum=function(){var d={};return this.dfsEdgeList.forEach(function(h){d[h.fromNode]||(d[h.fromNode]=!0),d[h.toNode]||(d[h.toNode]=!0)}),Object.keys(d).length},f}(),i=function(){function f(d){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!d){for(;d;){var h=d.edge;this.edges.push(h),this.nodesUsed[h.from]=1,this.nodesUsed[h.to]=1,this.edgesUsed[h.id]=1,d=d.preNode}this.edges=this.edges.reverse()}}return f.prototype.hasNode=function(d){return this.nodesUsed[d.id]===1},f.prototype.hasEdge=function(d){return this.edgesUsed[d.id]===1},f}(),a=function(){function f(d){var h=d.graphs,v=d.minSupport,p=v===void 0?2:v,g=d.minNodeNum,m=g===void 0?1:g,y=d.maxNodeNum,b=y===void 0?4:y,x=d.top,w=x===void 0?10:x,S=d.directed,C=S===void 0?!1:S,_=d.verbose,T=_===void 0?!1:_;this.graphs=h,this.dfsCode=new n,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=p,this.top=w,this.directed=C,this.counter=0,this.maxNodeNum=b,this.minNodeNum=m,this.verbose=T,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return f.prototype.findForwardRootEdges=function(d,h){var v=this,p=[],g=d.nodeMap;return h.edges.forEach(function(m){(v.directed||h.label<=g[m.to].label)&&p.push(m)}),p},f.prototype.findBackwardEdge=function(d,h,v,p){if(!this.directed&&h===v)return null;for(var g=d.nodeMap,m=g[v.to],y=m.edges,b=y.length,x=0;x<b;x++){var w=y[x];if(!(p.hasEdge(w)||w.to!==h.from)){if(this.directed){if(g[h.from].label<g[v.to].label||g[h.from].label===g[v.to].label&&h.label<=w.label)return w}else if(h.label<w.label||h.label===w.label&&g[h.to].label<=g[v.to].label)return w}}return null},f.prototype.findForwardPureEdges=function(d,h,v,p){for(var g=[],m=h.to,y=d.nodeMap[m].edges,b=y.length,x=0;x<b;x++){var w=y[x],S=d.nodeMap[w.to];v<=S.label&&!p.hasNode(S)&&g.push(w)}return g},f.prototype.findForwardRmpathEdges=function(d,h,v,p){for(var g=[],m=d.nodeMap,y=m[h.to].label,b=m[h.from],x=b.edges,w=x.length,S=0;S<w;S++){var C=x[S],_=m[C.to].label;h.to===C.to||v>_||p.hasNode(m[C.to])||(h.label<C.label||h.label===C.label&&y<=_)&&g.push(C)}return g},f.prototype.getSupport=function(d){var h={};return d.forEach(function(v){h[v.graphId]||(h[v.graphId]=!0)}),Object.keys(h).length},f.prototype.findMinLabel=function(d){var h=void 0;return Object.keys(d).forEach(function(v){var p=d[v],g=p.nodeLabel1,m=p.edgeLabel,y=p.nodeLabel2;if(!h){h={nodeLabel1:g,edgeLabel:m,nodeLabel2:y};return}(g<h.nodeLabel1||g===h.nodeLabel1&&m<h.edgeLabel||g===h.nodeLabel1&&m===h.edgeLabel&&y<h.nodeLabel2)&&(h={nodeLabel1:g,edgeLabel:m,nodeLabel2:y})}),h},f.prototype.isMin=function(){var d=this,h=this.dfsCode;if(this.verbose&&console.log("isMin checking",h),h.dfsEdgeList.length===1)return!0;var v=this.directed,p=h.toGraph(_i.VACANT_GRAPH_ID,v),g=p.nodeMap,m=new n,y={};p.nodes.forEach(function(S){var C=d.findForwardRootEdges(p,S);C.forEach(function(_){var T=g[_.to],E="".concat(S.label,"-").concat(_.label,"-").concat(T.label);y[E]||(y[E]={projected:[],nodeLabel1:S.label,edgeLabel:_.label,nodeLabel2:T.label});var M={graphId:p.id,edge:_,preNode:null};y[E].projected.push(M)})});var b=this.findMinLabel(y);if(!!b){m.dfsEdgeList.push(new e(0,1,b.nodeLabel1,b.edgeLabel,b.nodeLabel2));var x=function S(C){for(var _=m.buildRmpath(),T=m.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,E=m.dfsEdgeList[_[0]].toNode,M={},k=!1,P=0,F=v?-1:0,$=function(ue){if(k)return"break";C.forEach(function(Ee){var De=new i(Ee),je=d.findBackwardEdge(p,De.edges[_[ue]],De.edges[_[0]],De);je&&(M[je.label]||(M[je.label]={projected:[],edgeLabel:je.label}),M[je.label].projected.push({graphId:p.id,edge:M,preNode:Ee}),P=m.dfsEdgeList[_[ue]].fromNode,k=!0)})},R=_.length-1;R>F;R--){var L=$(R);if(L==="break")break}if(k){var O=d.findMinLabel(M);m.dfsEdgeList.push(new e(E,P,_i.VACANT_NODE_LABEL,O.edgeLabel,_i.VACANT_NODE_LABEL));var B=m.dfsEdgeList.length-1;return d.dfsCode.dfsEdgeList[B]!==m.dfsEdgeList[B]?!1:S(M[O.edgeLabel].projected)}var U={};k=!1;var W=0;C.forEach(function(le){var ue=new i(le),Ee=d.findForwardPureEdges(p,ue.edges[_[0]],T,ue);Ee.length>0&&(k=!0,W=E,Ee.forEach(function(De){var je="".concat(De.label,"-").concat(g[De.to].label);U[je]||(U[je]={projected:[],edgeLabel:De.label,nodeLabel2:g[De.to].label}),U[je].projected.push({graphId:p.id,edge:De,preNode:le})}))});for(var X=_.length,ae=function(ue){if(k)return"break";var Ee=_[ue];C.forEach(function(De){var je=new i(De),ke=d.findForwardRmpathEdges(p,je.edges[Ee],T,je);ke.length>0&&(k=!0,W=m.dfsEdgeList[Ee].fromNode,ke.forEach(function(D){var z="".concat(D.label,"-").concat(g[D.to].label);U[z]||(U[z]={projected:[],edgeLabel:D.label,nodeLabel2:g[D.to].label}),U[z].projected.push({graphId:p.id,edge:D,preNode:De})}))})},R=0;R<X;R++){var Z=ae(R);if(Z==="break")break}if(!k)return!0;var Y=d.findMinLabel(U);m.dfsEdgeList.push(new e(W,E+1,_i.VACANT_NODE_LABEL,Y.edgeLabel,Y.nodeLabel2));var fe=m.dfsEdgeList.length-1;return h.dfsEdgeList[fe]!==m.dfsEdgeList[fe]?!1:S(U["".concat(Y.edgeLabel,"-").concat(Y.nodeLabel2)].projected)},w="".concat(b.nodeLabel1,"-").concat(b.edgeLabel,"-").concat(b.nodeLabel2);return x(y[w].projected)}},f.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var d=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,cm.clone)(d))}},f.prototype.subGraphMining=function(d){var h=this,v=this.getSupport(d);if(!(v<this.minSupport)&&!!this.isMin()){this.report();var p=this.dfsCode.getNodeNum(),g=this.dfsCode.buildRmpath(),m=this.dfsCode.dfsEdgeList[g[0]].toNode,y=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,b={},x={};d.forEach(function(w){for(var S=h.graphs[w.graphId],C=S.nodeMap,_=new i(w),T=g.length-1;T>=0;T--){var E=h.findBackwardEdge(S,_.edges[g[T]],_.edges[g[0]],_);if(E){var M="".concat(h.dfsCode.dfsEdgeList[g[T]].fromNode,"-").concat(E.label);x[M]||(x[M]={projected:[],toNodeId:h.dfsCode.dfsEdgeList[g[T]].fromNode,edgeLabel:E.label}),x[M].projected.push({graphId:w.graphId,edge:E,preNode:w})}}if(!(p>=h.maxNodeNum)){var k=h.findForwardPureEdges(S,_.edges[g[0]],y,_);k.forEach(function(F){var $="".concat(m,"-").concat(F.label,"-").concat(C[F.to].label);b[$]||(b[$]={projected:[],fromNodeId:m,edgeLabel:F.label,nodeLabel2:C[F.to].label}),b[$].projected.push({graphId:w.graphId,edge:F,preNode:w})});for(var P=function($){var R=h.findForwardRmpathEdges(S,_.edges[g[$]],y,_);R.forEach(function(L){var O="".concat(h.dfsCode.dfsEdgeList[g[$]].fromNode,"-").concat(L.label,"-").concat(C[L.to].label);b[O]||(b[O]={projected:[],fromNodeId:h.dfsCode.dfsEdgeList[g[$]].fromNode,edgeLabel:L.label,nodeLabel2:C[L.to].label}),b[O].projected.push({graphId:w.graphId,edge:L,preNode:w})})},T=0;T<g.length;T++)P(T)}}),Object.keys(x).forEach(function(w){var S=x[w],C=S.toNodeId,_=S.edgeLabel;h.dfsCode.dfsEdgeList.push(new e(m,C,"-1",_,"-1")),h.subGraphMining(x[w].projected),h.dfsCode.dfsEdgeList.pop()}),Object.keys(b).forEach(function(w){var S=b[w],C=S.fromNodeId,_=S.edgeLabel,T=S.nodeLabel2;h.dfsCode.dfsEdgeList.push(new e(C,m+1,_i.VACANT_NODE_LABEL,_,T)),h.subGraphMining(b[w].projected),h.dfsCode.dfsEdgeList.pop()})}},f.prototype.generate1EdgeFrequentSubGraphs=function(){var d=this.graphs,h=this.directed,v=this.minSupport,p=this.frequentSize1Subgraphs,g={},m={},y={},b={};return Object.keys(d).forEach(function(x){var w=d[x],S=w.nodeMap;w.nodes.forEach(function(C,_){var T=C.label,E="".concat(x,"-").concat(T);if(!y[E]){var M=g[T]||0;M++,g[T]=M}y[E]={graphKey:x,label:T},C.edges.forEach(function(k){var P=T,F=S[k.to].label;if(!h&&P>F){var $=F;F=P,P=$}var R=k.label,L="".concat(x,"-").concat(P,"-").concat(R,"-").concat(F),O="".concat(P,"-").concat(R,"-").concat(F);if(!m[O]){var B=m[O]||0;B++,m[O]=B}b[L]={graphId:x,nodeLabel1:P,edgeLabel:R,nodeLabel2:F}})})}),Object.keys(g).forEach(function(x){var w=g[x];if(!(w<v)){var S={nodes:[],edges:[]};S.nodes.push({id:"0",label:x}),p.push(S)}}),p},f.prototype.run=function(){var d=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var h=this.graphs;this.directed;var v={};Object.keys(h).forEach(function(p){var g=h[p],m=g.nodeMap;g.nodes.forEach(function(y){var b=d.findForwardRootEdges(g,y);b.forEach(function(x){var w=m[x.to],S="".concat(y.label,"-").concat(x.label,"-").concat(w.label);v[S]||(v[S]={projected:[],nodeLabel1:y.label,edgeLabel:x.label,nodeLabel2:w.label});var C={graphId:p,edge:x,preNode:null};v[S].projected.push(C)})})}),Object.keys(v).forEach(function(p){var g=v[p],m=g.projected,y=g.nodeLabel1,b=g.edgeLabel,x=g.nodeLabel2;d.dfsCode.dfsEdgeList.push(new e(0,1,y,b,x)),d.subGraphMining(m),d.dfsCode.dfsEdgeList.pop()})}},f}(),o=function(d,h,v,p){var g={};return Object.keys(d).forEach(function(m,y){var b=d[m],x=new _i.Graph(y,!0,h),w={};b.nodes.forEach(function(S,C){x.addNode(C,S[v]),w[S.id]=C}),b.edges.forEach(function(S,C){var _=w[S.source],T=w[S.target];x.addEdge(-1,_,T,S[p])}),x&&x.getNodeNum()&&(g[x.id]=x)}),g},s=function(d,h,v){var p=[];return d.forEach(function(g){var m={nodes:[],edges:[]};g.nodes.forEach(function(y){var b;m.nodes.push((b={id:"".concat(y.id)},b[h]=y.label,b))}),g.edges.forEach(function(y){var b;m.edges.push((b={source:"".concat(y.from),target:"".concat(y.to)},b[v]=y.label,b))}),p.push(m)}),p},l="cluster",u=function(d){var h=d.graphs,v=d.directed,p=v===void 0?!1:v,g=d.nodeLabelProp,m=g===void 0?l:g,y=d.edgeLabelProp,b=y===void 0?l:y,x=o(h,p,m,b),w=d.minSupport,S=d.maxNodeNum,C=d.minNodeNum,_=d.verbose,T=d.top,E={graphs:x,minSupport:w,maxNodeNum:S,minNodeNum:C,top:T,verbose:_,directed:p},M=new a(E);M.run();var k=s(M.frequentSubgraphs,m,b);return k},c=u;t.default=c});hn(d4);var h4=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=a(RA),n=a(d4),i=a(G1);function a(b){return b&&b.__esModule?b:{default:b}}var o=function(x,w,S,C){S===void 0&&(S="cluster"),C===void 0&&(C=2);var _=[],T=x.nodes;return w.forEach(function(E,M){_.push(s(T,E,M,S,C))}),_},s=function(x,w,S,C,_){var T=[S],E=[],M={};return w.forEach(function(k,P){if(k<=_&&S!==P){T.push(P),E.push(x[P]);var F=x[P][C];M[F]?(M[F].count++,M[F].dists.push(k)):M[F]={count:1,dists:[k]}}}),Object.keys(M).forEach(function(k){M[k].dists=M[k].dists.sort(function(P,F){return P-F})}),{nodeIdx:S,nodeId:x[S].id,nodeIdxs:T,neighbors:E,neighborNum:T.length-1,nodeLabelCountMap:M}},l=function(x,w,S,C,_){var T=Math.ceil(S/w),E={},M=0;return C.forEach(function(k,P){for(var F=0,$=0,R=k.nodeIdxs,L=k.neighborNum-1;F<T;){for(var O=R[1+Math.floor(Math.random()*L)],B=0;(E["".concat(P,"-").concat(O)]||E["".concat(O,"-").concat(P)])&&(O=Math.floor(Math.random()*w),B++,!(B>2*w)););if(B<2*w&&(E["".concat(P,"-").concat(O)]={start:P,end:O,distance:_[P][O]},F++,M++,M>=S))return E;if($++,$>2*w)break}if(F<T){var U=T-F;T=(T+U)/(w-P-1)}}),E},u=function(x,w,S,C){var _=S.nodes;return C||(C={}),Object.keys(x).forEach(function(T){var E,M;if(!(C&&C[T])){C[T]={nodes:[],edges:[]};var k=x[T],P=(E=w[k.start])===null||E===void 0?void 0:E.nodeIdxs,F=(M=w[k.end])===null||M===void 0?void 0:M.nodeIdxs;if(!(!P||!F)){var $=new Set(F),R=P.filter(function(W){return $.has(W)});if(!(!R||!R.length)){for(var L={},O=R.length,B=0;B<O;B++){var U=_[R[B]];C[T].nodes.push(U),L[U.id]=!0}S.edges.forEach(function(W){L[W.source]&&L[W.target]&&C[T].edges.push(W)})}}}}),C},c=function(x,w,S,C){var _,T,E={};x.nodes.forEach(function(k){E[k.id]=k});var M=0;return!((_=w==null?void 0:w.edges)===null||_===void 0?void 0:_.length)||((T=w==null?void 0:w.nodes)===null||T===void 0?void 0:T.length)<2?0:(x.edges.forEach(function(k){var P=E[k.source][S],F=E[k.target][S],$=w==null?void 0:w.nodes[0][S],R=w==null?void 0:w.nodes[1][S],L=w==null?void 0:w.edges[0][C];k[C]===L&&(P===$&&F===R||P===R&&F===$)&&M++}),M)},f=function(x,w,S){for(var C=1/0,_=0,T=function(k){var P=x[k],F=Object.keys(P).sort(function(W,X){return P[W]-P[X]}),$=10,R=[];F.forEach(function(W,X){R[X%$]||(R[X%$]={graphs:[],totalCount:0,aveCount:0}),R[X%$].graphs.push(W),R[X%$].totalCount+=P[W]});var L=0,O=[];R.forEach(function(W){var X=W.totalCount/W.graphs.length;W.aveCount=X,O.push(X);var ae=0,Z=W.length;W.graphs.forEach(function(Y,fe){var le=P[Y];W.graphs.forEach(function(ue,Ee){fe!==Ee&&(ae+=Math.abs(le-P[ue]))})}),ae/=Z*(Z-1)/2,L+=ae}),L/=R.length;var B=0;O.forEach(function(W,X){O.forEach(function(ae,Z){X!==Z&&(B+=Math.abs(W-ae))}),B/=O.length*(O.length-1)/2});var U=B-L;C<U&&(C=U,_=k)},E=0;E<w;E++)T(E);return{structure:S[_],structureCountMap:x[_]}},d=function(x,w){var S={},C={};return x.forEach(function(_,T){S[_.id]={idx:T,node:_,degree:0,inDegree:0,outDegree:0};var E=_[w];C[E]||(C[E]=[]),C[E].push(_)}),{nodeMap:S,nodeLabelMap:C}},h=function(x,w,S){var C={},_={};return x.forEach(function(T,E){C["".concat(Ei.uniqueId)]={idx:E,edge:T};var M=T[w];_[M]||(_[M]=[]),_[M].push(T);var k=S[T.source];k&&(k.degree++,k.outDegree++);var P=S[T.target];P&&(P.degree++,P.inDegree++)}),{edgeMap:C,edgeLabelMap:_}},v=function(x,w,S){var C=w.length,_={};return w.forEach(function(T,E){for(var M=S?0:E+1,k=x[E].id,P=M;P<C;P++)if(E!==P){var F=x[P].id,$=T[P];_["".concat(k,"-").concat(F)]=$,S||(_["".concat(F,"-").concat(k)]=$)}}),_},p=function(x,w,S,C,_,T,E,M,k,P,F){var $,R="".concat(w.id,"-").concat(S.id);if(P&&P[R])return P[R];var L=F?F[R]:void 0;if(!L){var O=($={},$[R]={start:C[w.id].idx,end:C[S.id].idx,distance:_},$);F=u(O,T,x,F),L=F[R]}return c(L,E,M,k)},g=function(x,w,S,C){var _,T,E,M=(_=x[w])===null||_===void 0?void 0:_.degree,k=(T=x[w])===null||T===void 0?void 0:T.inDegree,P=(E=x[w])===null||E===void 0?void 0:E.outDegree;return x[w]===void 0&&(M=1/0,k=1/0,P=1/0,C[w].forEach(function(F){var $=S[F.id].degree;M>$&&(M=$);var R=S[F.id].inDegree;k>R&&(k=R);var L=S[F.id].outDegree;P>L&&(P=L)}),x[w]={degree:M,inDegree:k,outDegree:P}),{minPatternNodeLabelDegree:M,minPatternNodeLabelInDegree:k,minPatternNodeLabelOutDegree:P}},m=function(x,w,S,C,_,T,E){var M;if(S===void 0&&(S=!1),T===void 0&&(T="cluster"),E===void 0&&(E="cluster"),!(!x||!x.nodes)){var k=x.nodes.length;if(!!k){var P=(0,e.default)(x,S),F=(0,e.default)(w,S),$=v(x.nodes,P,S),R=v(w.nodes,F,S),L=d(x.nodes,T),O=L.nodeMap,B=L.nodeLabelMap,U=d(w.nodes,T),W=U.nodeMap,X=U.nodeLabelMap;h(x.edges,E,O);var ae=h(w.edges,E,W).edgeLabelMap,Z=[];F==null||F.forEach(function(Le){Z=Z.concat(Le)}),_||(_=Math.max.apply(Math,(0,Lx.__spreadArray)((0,Lx.__spreadArray)([],Z,!1),[2],!1))),C||(C=_);var Y=o(x,P,T,C),fe=o(w,F,T,C),le=Math.min(100,k*(k-1)/2),ue=l(C,k,le,fe,P),Ee=u(ue,Y,x),De=10,je=1,ke=1,D=4,z={graphs:Ee,nodeLabelProp:T,edgeLabelProp:E,minSupport:je,minNodeNum:ke,maxNodeNum:D,directed:S},H=(0,n.default)(z).slice(0,De),he=H.length,te=[];H.forEach(function(Le,dt){te[dt]={},Object.keys(Ee).forEach(function(Bt){var cr=Ee[Bt],$r=c(cr,Le,T,E);te[dt][Bt]=$r})});var ge=f(te,he,H),Qe=ge.structure,Ve=ge.structureCountMap,Ie=w.nodes[0],Be=[],V=(M=w.nodes[0])===null||M===void 0?void 0:M[T],j=-1/0;w.nodes.forEach(function(Le){var dt=Le[T],Bt=B[dt];(Bt==null?void 0:Bt.length)>j&&(j=Bt.length,Be=Bt,V=dt,Ie=Le)});var q={},ee={},Q={},me={},He={},ze={};Object.keys(X).forEach(function(Le,dt){He[Le]=[],S&&(ze[Le]=[]);var Bt=X[Le],cr={};Bt.forEach(function(zr){var Qr=R["".concat(Ie.id,"-").concat(zr.id)];if(Qr&&He[Le].push(Qr),cr["".concat(Ie.id,"-").concat(zr.id)]={start:0,end:W[zr.id].idx,distance:Qr},S){var _n=R["".concat(zr.id,"-").concat(Ie.id)];_n&&ze[Le].push(_n)}}),He[Le]=He[Le].sort(function(zr,Qr){return zr-Qr}),S&&(ze[Le]=ze[Le].sort(function(zr,Qr){return zr-Qr})),ee=u(cr,fe,w,ee);var $r=[];if(Object.keys(cr).forEach(function(zr){if(Q[zr]){$r.push(Q[zr]);return}var Qr=ee[zr];Q[zr]=c(Qr,Qe,T,E),$r.push(Q[zr])}),$r=$r.sort(function(zr,Qr){return Qr-zr}),me["".concat(Ie.id,"-").concat(Le)]=$r,Le!==V)for(var nr=(Be==null?void 0:Be.length)||0,tn=function(Qr){var _n=Be[Qr],jn=Y[O[_n.id].idx],ii=jn.nodeLabelCountMap[Le],bn=X[Le].length;if(!ii||ii.count<bn)return Be.splice(Qr,1),"continue";for(var ai=!1,Zn=0;Zn<bn;Zn++)if(ii.dists[Zn]>He[Le][Zn]){ai=!0;break}if(ai)return Be.splice(Qr,1),"continue";var Br={};jn.neighbors.forEach(function(ln){var fi=$["".concat(_n.id,"-").concat(ln.id)];Br["".concat(_n.id,"-").concat(ln.id)]={start:O[_n.id].idx,end:O[ln.id].idx,distance:fi}}),Ee=u(Br,Y,x,Ee);var on=[];Object.keys(Br).forEach(function(ln){if(Ve[ln]){on.push(Ve[ln]);return}var fi=Ee[ln];Ve[ln]=c(fi,Qe,T,E),on.push(Ve[ln])}),on=on.sort(function(ln,fi){return fi-ln});for(var mr=!1,Zn=0;Zn<bn;Zn++)if(on[Zn]<$r[Zn]){mr=!0;break}if(mr)return Be.splice(Qr,1),"continue"},Er=nr-1;Er>=0;Er--)tn(Er)});var it=[];Be==null||Be.forEach(function(Le){for(var dt=O[Le.id].idx,Bt=s(x.nodes,P[dt],dt,T,_),cr=Bt.neighbors,$r=cr.length,nr=!1,tn=$r-1;tn>=0;tn--){if(cr.length+1<w.nodes.length){nr=!0;return}var Er=cr[tn],zr=Er[T];if(!X[zr]||!X[zr].length){cr.splice(tn,1);continue}if(!He[zr]||!He[zr].length){cr.splice(tn,1);continue}var Qr="".concat(Le.id,"-").concat(Er.id),_n=$[Qr],jn=He[zr].length-1,ii=He[zr][jn];if(_n>ii){cr.splice(tn,1);continue}if(S){var bn="".concat(Er.id,"-").concat(Le.id),ai=$[bn];jn=ze[zr].length-1;var Zn=ze[zr][jn];if(ai>Zn){cr.splice(tn,1);continue}}var Br=Ve[Qr]?Ve[Qr]:p(x,Le,Er,O,_n,Y,Qe,T,E,Ve,Ee),on="".concat(Ie.id,"-").concat(zr),mr=me[on][me[on].length-1];if(Br<mr){cr.splice(tn,1);continue}var ln=g(q,zr,W,X),fi=ln.minPatternNodeLabelDegree;if(ln.minPatternNodeLabelInDegree,ln.minPatternNodeLabelOutDegree,O[Er.id].degree<fi){cr.splice(tn,1);continue}}nr||it.push({nodes:[Le].concat(cr)})});var we=(0,i.default)(w,Ie.id,!1).length,nt={};S?(Object.keys(we).forEach(function(Le){var dt=W[Le].node[T];nt[dt]?nt[dt].push(we[Le]):nt[dt]=[we[Le]]}),Object.keys(nt).forEach(function(Le){nt[Le].sort(function(dt,Bt){return dt-Bt})})):nt=He;for(var st=it.length,jt=function(dt){var Bt=it[dt],cr=Bt.nodes[0],$r={},nr={};Bt.nodes.forEach(function(zn,Va){nr[zn.id]={idx:Va,node:zn,degree:0,inDegree:0,outDegree:0};var ki=zn[T];$r[ki]?$r[ki]++:$r[ki]=1});var tn=[],Er={};x.edges.forEach(function(zn){nr[zn.source]&&nr[zn.target]&&(tn.push(zn),Er[zn[E]]?Er[zn[E]]++:Er[zn[E]]=1,nr[zn.source].degree++,nr[zn.target].degree++,nr[zn.source].outDegree++,nr[zn.target].inDegree++)});for(var zr=Object.keys(ae).length,Qr=!1,_n=0;_n<zr;_n++){var jn=Object.keys(ae)[_n];if(!Er[jn]||Er[jn]<ae[jn].length){Qr=!0;break}}if(Qr)return it.splice(dt,1),"continue";var ii=tn.length;if(ii<w.edges.length)return it.splice(dt,1),"break";for(var bn=!1,ai=function(Va){var ki=tn[Va],ko=ki[E],Ws=ae[ko];if(!Ws||!Ws.length)return Er[ko]--,Ws&&Er[ko]<Ws.length?(bn=!0,"break"):(tn.splice(Va,1),nr[ki.source].degree--,nr[ki.target].degree--,nr[ki.source].outDegree--,nr[ki.target].inDegree--,"continue");var Lh=nr[ki.source].node[T],Fh=nr[ki.target].node[T],Tf=!1;if(Ws.forEach(function(Nh){var Bh=W[Nh.source].node,$h=W[Nh.target].node;Bh[T]===Lh&&$h[T]===Fh&&(Tf=!0),!S&&Bh[T]===Fh&&$h[T]===Lh&&(Tf=!0)}),!Tf)return Er[ko]--,Ws&&Er[ko]<Ws.length?(bn=!0,"break"):(tn.splice(Va,1),nr[ki.source].degree--,nr[ki.target].degree--,nr[ki.source].outDegree--,nr[ki.target].inDegree--,"continue")},_n=ii-1;_n>=0;_n--){var Zn=ai(_n);if(Zn==="break")break}if(bn)return it.splice(dt,1),"continue";Bt.edges=tn;var Br=(0,i.default)(Bt,Bt.nodes[0].id,!1).length;if(Object.keys(Br).reverse().forEach(function(zn){if(!(zn===Bt.nodes[0].id||bn)){if(Br[zn]===1/0){var Va=nr[zn].node[T];if($r[Va]--,$r[Va]<X[Va].length){bn=!0;return}var ki=Bt.nodes.indexOf(nr[zn].node);Bt.nodes.splice(ki,1),nr[zn]=void 0;return}var ko=O[zn].node[T];if(!nt[ko]||!nt[ko].length||Br[zn]>nt[ko][nt[ko].length-1]){var Va=nr[zn].node[T];if($r[Va]--,$r[Va]<X[Va].length){bn=!0;return}var ki=Bt.nodes.indexOf(nr[zn].node);Bt.nodes.splice(ki,1),nr[zn]=void 0}}}),bn)return it.splice(dt,1),"continue";for(var on=!0,mr=0;on&&!bn;){on=!1;var ln=S?nr[cr.id].degree<W[Ie.id].degree||nr[cr.id].inDegree<W[Ie.id].inDegree||nr[cr.id].outDegree<W[Ie.id].outDegree:nr[cr.id].degree<W[Ie.id].degree;if(ln){bn=!0;break}if($r[cr[T]]<X[cr[T]].length){bn=!0;break}for(var fi=Bt.nodes.length,po=fi-1;po>=0;po--){var Ua=Bt.nodes[po],ys=nr[Ua.id].degree,hl=nr[Ua.id].inDegree,vl=nr[Ua.id].outDegree,pl=Ua[T],_f=g(q,pl,W,X),Oh=_f.minPatternNodeLabelDegree,bg=_f.minPatternNodeLabelInDegree,xg=_f.minPatternNodeLabelOutDegree,wg=S?ys<Oh||hl<bg||vl<xg:ys<Oh;if(wg){if($r[Ua[T]]--,$r[Ua[T]]<X[Ua[T]].length){bn=!0;break}Bt.nodes.splice(po,1),nr[Ua.id]=void 0,on=!0}}if(bn||!on&&mr!==0)break;ii=tn.length;for(var tc=ii-1;tc>=0;tc--){var Ko=tn[tc];if(!nr[Ko.source]||!nr[Ko.target]){tn.splice(tc,1);var rc=Ko[E];if(Er[rc]--,nr[Ko.source]&&(nr[Ko.source].degree--,nr[Ko.source].outDegree--),nr[Ko.target]&&(nr[Ko.target].degree--,nr[Ko.target].inDegree--),ae[rc]&&Er[rc]<ae[rc].length){bn=!0;break}on=!0}}mr++}if(bn||bn||Bt.nodes.length<w.nodes.length||tn.length<w.edges.length)return it.splice(dt,1),"continue"},Jt=st-1;Jt>=0;Jt--){var Ae=jt(Jt);if(Ae==="break")break}for(var ut=it.length,ur=function(dt){var Bt=it[dt],cr={};Bt.edges.forEach(function(tn){var Er="".concat(tn.source,"-").concat(tn.target,"-").concat(tn.label);cr[Er]?cr[Er]++:cr[Er]=1});for(var $r=function(Er){var zr=it[Er],Qr={};zr.edges.forEach(function(jn){var ii="".concat(jn.source,"-").concat(jn.target,"-").concat(jn.label);Qr[ii]?Qr[ii]++:Qr[ii]=1});var _n=!0;Object.keys(Qr).length!==Object.keys(cr).length?_n=!1:Object.keys(cr).forEach(function(jn){Qr[jn]!==cr[jn]&&(_n=!1)}),_n&&it.splice(Er,1)},nr=ut-1;nr>dt;nr--)$r(nr);ut=it.length},Jt=0;Jt<=ut-1;Jt++)ur(Jt);return it}}},y=m;t.default=y});hn(h4);var v4=Rr(function(r,t){function e(b){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(w){return typeof w}:e=function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},e(b)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GADDI",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"breadthFirstSearch",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"connectedComponent",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"depthFirstSearch",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"detectCycle",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"dijkstra",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"findAllPath",{enumerable:!0,get:function(){return Xm.findAllPath}}),Object.defineProperty(t,"findShortestPath",{enumerable:!0,get:function(){return Xm.findShortestPath}}),Object.defineProperty(t,"floydWarshall",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"getAdjMatrix",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"getDegree",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"getInDegree",{enumerable:!0,get:function(){return o.getInDegree}}),Object.defineProperty(t,"getNeighbors",{enumerable:!0,get:function(){return Ei.getNeighbors}}),Object.defineProperty(t,"getOutDegree",{enumerable:!0,get:function(){return o.getOutDegree}}),Object.defineProperty(t,"labelPropagation",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"louvain",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"minimumSpanningTree",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"pageRank",{enumerable:!0,get:function(){return v.default}});var n=y(Hm),i=y(i4),a=y(Wm),o=m(jm),s=y(Ym),l=y(DA),u=y(G1),c=y(RA),f=y(a4),d=y(s4),h=y(c4),v=y(f4),p=y(h4);function g(b){if(typeof WeakMap!="function")return null;var x=new WeakMap,w=new WeakMap;return(g=function(C){return C?w:x})(b)}function m(b,x){if(!x&&b&&b.__esModule)return b;if(b===null||e(b)!=="object"&&typeof b!="function")return{default:b};var w=g(x);if(w&&w.has(b))return w.get(b);var S={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in b)if(_!=="default"&&Object.prototype.hasOwnProperty.call(b,_)){var T=C?Object.getOwnPropertyDescriptor(b,_):null;T&&(T.get||T.set)?Object.defineProperty(S,_,T):S[_]=b[_]}return S.default=b,w&&w.set(b,S),S}function y(b){return b&&b.__esModule?b:{default:b}}});hn(v4);var p4=Rr(function(r,t){function e(l){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(c){return typeof c}:e=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},e(l)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(v4);function i(l){if(typeof WeakMap!="function")return null;var u=new WeakMap,c=new WeakMap;return(i=function(d){return d?c:u})(l)}function a(l,u){if(!u&&l&&l.__esModule)return l;if(l===null||e(l)!=="object"&&typeof l!="function")return{default:l};var c=i(u);if(c&&c.has(l))return c.get(l);var f={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in l)if(h!=="default"&&Object.prototype.hasOwnProperty.call(l,h)){var v=d?Object.getOwnPropertyDescriptor(l,h):null;v&&(v.get||v.set)?Object.defineProperty(f,h,v):f[h]=l[h]}return f.default=l,c&&c.set(l,f),f}var o=typeof self!="undefined"?self:{};o.onmessage=function(l){var u=l.data,c=u._algorithmType,f=u.data;if(!!c){if(typeof n[c]=="function"){var d=n[c].apply(n,f);o.postMessage({_algorithmType:hi.MESSAGE.SUCCESS,data:d});return}o.postMessage({_algorithmType:hi.MESSAGE.FAILURE})}};var s=null;t.default=s});hn(p4);var g4=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(p4);function n(o){return o&&o.__esModule?o:{default:o}}var i=function(s){return function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return new Promise(function(c,f){var d=new e.default;d.postMessage({_algorithmType:s,data:l}),d.onmessage=function(h){var v=h.data,p=v.data,g=v._algorithmType;hi.MESSAGE.SUCCESS===g?c(p):f(),d.terminate()}})}},a=i;t.default=a});hn(g4);var pr=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.pageRankAsync=t.minimumSpanningTreeAsync=t.louvainAsync=t.labelPropagationAsync=t.getOutDegreeAsync=t.getNeighborsAsync=t.getInDegreeAsync=t.getDegreeAsync=t.getAdjMatrixAsync=t.floydWarshallAsync=t.findShortestPathAsync=t.findAllPathAsync=t.dijkstraAsync=t.detectCycleAsync=t.detectAllUndirectedCycleAsync=t.detectAllDirectedCycleAsync=t.detectAllCyclesAsync=t.connectedComponentAsync=t.GADDIAsync=void 0;var e=n(g4);function n(C){return C&&C.__esModule?C:{default:C}}var i=function(_,T){return(0,e.default)(hi.ALGORITHM.getAdjMatrix).apply(void 0,[_,T])};t.getAdjMatrixAsync=i;var a=function(_,T){return(0,e.default)(hi.ALGORITHM.connectedComponent).apply(void 0,[_,T])};t.connectedComponentAsync=a;var o=function(_){return(0,e.default)(hi.ALGORITHM.getDegree)(_)};t.getDegreeAsync=o;var s=function(_,T){return(0,e.default)(hi.ALGORITHM.getInDegree)(_,T)};t.getInDegreeAsync=s;var l=function(_,T){return(0,e.default)(hi.ALGORITHM.getOutDegree)(_,T)};t.getOutDegreeAsync=l;var u=function(_){return(0,e.default)(hi.ALGORITHM.detectCycle)(_)};t.detectCycleAsync=u;var c=function(_){return(0,e.default)(hi.ALGORITHM.detectAllCycles)(_)};t.detectAllCyclesAsync=c;var f=function(_){return(0,e.default)(hi.ALGORITHM.detectAllDirectedCycle)(_)};t.detectAllDirectedCycleAsync=f;var d=function(_){return(0,e.default)(hi.ALGORITHM.detectAllUndirectedCycle)(_)};t.detectAllUndirectedCycleAsync=d;var h=function(_,T,E,M){return(0,e.default)(hi.ALGORITHM.dijkstra).apply(void 0,[_,T,E,M])};t.dijkstraAsync=h;var v=function(_,T,E,M){return(0,e.default)(hi.ALGORITHM.findAllPath).apply(void 0,[_,T,E,M])};t.findAllPathAsync=v;var p=function(_,T,E,M,k){return(0,e.default)(hi.ALGORITHM.findShortestPath).apply(void 0,[_,T,E,M,k])};t.findShortestPathAsync=p;var g=function(_,T){return(0,e.default)(hi.ALGORITHM.floydWarshall).apply(void 0,[_,T])};t.floydWarshallAsync=g;var m=function(_,T,E,M){return M===void 0&&(M=1e3),(0,e.default)(hi.ALGORITHM.labelPropagation)(_,T,E,M)};t.labelPropagationAsync=m;var y=function(_,T,E,M){return(0,e.default)(hi.ALGORITHM.louvain)(_,T,E,M)};t.louvainAsync=y;var b=function(_,T,E){return(0,e.default)(hi.ALGORITHM.minimumSpanningTree).apply(void 0,[_,T,E])};t.minimumSpanningTreeAsync=b;var x=function(_,T,E){return(0,e.default)(hi.ALGORITHM.pageRank).apply(void 0,[_,T,E])};t.pageRankAsync=x;var w=function(_,T,E){return(0,e.default)(hi.ALGORITHM.getNeighbors).apply(void 0,[_,T,E])};t.getNeighborsAsync=w;var S=function(_,T,E,M,k,P,F){return E===void 0&&(E=!1),P===void 0&&(P="cluster"),F===void 0&&(F="cluster"),(0,e.default)(hi.ALGORITHM.GADDI).apply(void 0,[_,T,E,M,k,P,F])};t.GADDIAsync=S});hn(pr);pr.pageRankAsync;pr.minimumSpanningTreeAsync;pr.louvainAsync;pr.labelPropagationAsync;pr.getOutDegreeAsync;pr.getNeighborsAsync;pr.getInDegreeAsync;pr.getDegreeAsync;pr.getAdjMatrixAsync;pr.floydWarshallAsync;pr.findShortestPathAsync;pr.findAllPathAsync;pr.dijkstraAsync;pr.detectCycleAsync;pr.detectAllUndirectedCycleAsync;pr.detectAllDirectedCycleAsync;pr.detectAllCyclesAsync;pr.connectedComponentAsync;pr.GADDIAsync;var OA=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GADDIAsync",{enumerable:!0,get:function(){return pr.GADDIAsync}}),Object.defineProperty(t,"connectedComponentAsync",{enumerable:!0,get:function(){return pr.connectedComponentAsync}}),t.default=void 0,Object.defineProperty(t,"detectAllCyclesAsync",{enumerable:!0,get:function(){return pr.detectAllCyclesAsync}}),Object.defineProperty(t,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return pr.detectAllDirectedCycleAsync}}),Object.defineProperty(t,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return pr.detectAllUndirectedCycleAsync}}),Object.defineProperty(t,"detectCycleAsync",{enumerable:!0,get:function(){return pr.detectCycleAsync}}),t.detectDirectedCycleAsync=void 0,Object.defineProperty(t,"dijkstraAsync",{enumerable:!0,get:function(){return pr.dijkstraAsync}}),Object.defineProperty(t,"findAllPathAsync",{enumerable:!0,get:function(){return pr.findAllPathAsync}}),Object.defineProperty(t,"findShortestPathAsync",{enumerable:!0,get:function(){return pr.findShortestPathAsync}}),Object.defineProperty(t,"floydWarshallAsync",{enumerable:!0,get:function(){return pr.floydWarshallAsync}}),Object.defineProperty(t,"getAdjMatrixAsync",{enumerable:!0,get:function(){return pr.getAdjMatrixAsync}}),Object.defineProperty(t,"getDegreeAsync",{enumerable:!0,get:function(){return pr.getDegreeAsync}}),Object.defineProperty(t,"getInDegreeAsync",{enumerable:!0,get:function(){return pr.getInDegreeAsync}}),Object.defineProperty(t,"getNeighborsAsync",{enumerable:!0,get:function(){return pr.getNeighborsAsync}}),Object.defineProperty(t,"getOutDegreeAsync",{enumerable:!0,get:function(){return pr.getOutDegreeAsync}}),Object.defineProperty(t,"labelPropagationAsync",{enumerable:!0,get:function(){return pr.labelPropagationAsync}}),Object.defineProperty(t,"louvainAsync",{enumerable:!0,get:function(){return pr.louvainAsync}}),Object.defineProperty(t,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return pr.minimumSpanningTreeAsync}}),Object.defineProperty(t,"pageRankAsync",{enumerable:!0,get:function(){return pr.pageRankAsync}});var e=pr.detectCycleAsync;t.detectDirectedCycleAsync=e;var n={getAdjMatrixAsync:pr.getAdjMatrixAsync,connectedComponentAsync:pr.connectedComponentAsync,getDegreeAsync:pr.getDegreeAsync,getInDegreeAsync:pr.getInDegreeAsync,getOutDegreeAsync:pr.getOutDegreeAsync,detectCycleAsync:pr.detectCycleAsync,detectDirectedCycleAsync:e,detectAllCyclesAsync:pr.detectAllCyclesAsync,detectAllDirectedCycleAsync:pr.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:pr.detectAllUndirectedCycleAsync,dijkstraAsync:pr.dijkstraAsync,findAllPathAsync:pr.findAllPathAsync,findShortestPathAsync:pr.findShortestPathAsync,floydWarshallAsync:pr.floydWarshallAsync,labelPropagationAsync:pr.labelPropagationAsync,louvainAsync:pr.louvainAsync,minimumSpanningTreeAsync:pr.minimumSpanningTreeAsync,pageRankAsync:pr.pageRankAsync,getNeighborsAsync:pr.getNeighborsAsync,GADDIAsync:pr.GADDIAsync};t.default=n}),Lve=hn(OA),Fve=OA.detectDirectedCycleAsync,Nve=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Lve,__moduleExports:OA,detectDirectedCycleAsync:Fve});function Bve(){return window?window.devicePixelRatio:1}function m4(r,t,e,n){var i=r-e,a=t-n;return Math.sqrt(i*i+a*a)}function fd(r,t,e,n,i,a){return i>=r&&i<=r+e&&a>=t&&a<=t+n}function qm(r,t){return!(t.minX>r.maxX||t.maxX<r.minX||t.minY>r.maxY||t.maxY<r.minY)}function $ve(r,t){return!r||!t?r||t:{minX:Math.min(r.minX,t.minX),minY:Math.min(r.minY,t.minY),maxX:Math.max(r.maxX,t.maxX),maxY:Math.max(r.maxY,t.maxY)}}function y4(r,t){return r[0]===t[0]&&r[1]===t[1]}var zve=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Gve=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Uve=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,b4=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function x4(r,t){var e=r.match(b4);G(e,function(n){var i=n.split(":");t.addColorStop(i[0],i[1])})}function Vve(r,t,e){var n=zve.exec(e),i=parseFloat(n[1])%360*(Math.PI/180),a=n[2],o=t.getBBox(),s,l;i>=0&&i<1/2*Math.PI?(s={x:o.minX,y:o.minY},l={x:o.maxX,y:o.maxY}):1/2*Math.PI<=i&&i<Math.PI?(s={x:o.maxX,y:o.minY},l={x:o.minX,y:o.maxY}):Math.PI<=i&&i<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},l={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},l={x:o.maxX,y:o.minY});var u=Math.tan(i),c=u*u,f=(l.x-s.x+u*(l.y-s.y))/(c+1)+s.x,d=u*(l.x-s.x+u*(l.y-s.y))/(c+1)+s.y,h=r.createLinearGradient(s.x,s.y,f,d);return x4(a,h),h}function Hve(r,t,e){var n=Gve.exec(e),i=parseFloat(n[1]),a=parseFloat(n[2]),o=parseFloat(n[3]),s=n[4];if(o===0){var l=s.match(b4);return l[l.length-1].split(":")[1]}var u=t.getBBox(),c=u.maxX-u.minX,f=u.maxY-u.minY,d=Math.sqrt(c*c+f*f)/2,h=r.createRadialGradient(u.minX+c*i,u.minY+f*a,0,u.minX+c/2,u.minY+f/2,o*d);return x4(s,h),h}function Wve(r,t,e){if(t.get("patternSource")&&t.get("patternSource")===e)return t.get("pattern");var n,i,a=Uve.exec(e),o=a[1],s=a[2];function l(){n=r.createPattern(i,o),t.set("pattern",n),t.set("patternSource",e)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),n}function jve(r,t,e){var n=t.getBBox();if(isNaN(n.x)||isNaN(n.y)||isNaN(n.width)||isNaN(n.height))return e;if(rt(e)){if(e[1]==="("||e[2]==="("){if(e[0]==="l")return Vve(r,t,e);if(e[0]==="r")return Hve(r,t,e);if(e[0]==="p")return Wve(r,t,e)}return e}if(e instanceof CanvasPattern)return e}function Yve(r){var t=0,e=0,n=0,i=0;return qe(r)?r.length===1?t=e=n=i=r[0]:r.length===2?(t=n=r[0],e=i=r[1]):r.length===3?(t=r[0],e=i=r[1],n=r[2]):(t=r[0],e=r[1],n=r[2],i=r[3]):t=e=n=i=r,[t,e,n,i]}function U1(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function LA(r,t){return U1(r)*U1(t)?(r[0]*t[0]+r[1]*t[1])/(U1(r)*U1(t)):1}function w4(r,t){return(r[0]*t[1]<r[1]*t[0]?-1:1)*Math.acos(LA(r,t))}function V1(r,t){var e=t[1],n=t[2],i=$x(zx(t[3]),Math.PI*2),a=t[4],o=t[5],s=r[0],l=r[1],u=t[6],c=t[7],f=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,d=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,h=f*f/(e*e)+d*d/(n*n);h>1&&(e*=Math.sqrt(h),n*=Math.sqrt(h));var v=e*e*(d*d)+n*n*(f*f),p=v?Math.sqrt((e*e*(n*n)-v)/v):1;a===o&&(p*=-1),isNaN(p)&&(p=0);var g=n?p*e*d/n:0,m=e?p*-n*f/e:0,y=(s+u)/2+Math.cos(i)*g-Math.sin(i)*m,b=(l+c)/2+Math.sin(i)*g+Math.cos(i)*m,x=[(f-g)/e,(d-m)/n],w=[(-1*f-g)/e,(-1*d-m)/n],S=w4([1,0],x),C=w4(x,w);return LA(x,w)<=-1&&(C=Math.PI),LA(x,w)>=1&&(C=0),o===0&&C>0&&(C=C-2*Math.PI),o===1&&C<0&&(C=C+2*Math.PI),{cx:y,cy:b,rx:y4(r,[u,c])?0:e,ry:y4(r,[u,c])?0:n,startAngle:S,endAngle:S+C,xRotation:i,arcFlag:a,sweepFlag:o}}var H1=Math.sin,W1=Math.cos,FA=Math.atan2,j1=Math.PI;function S4(r,t,e,n,i,a,o){var s=t.stroke,l=t.lineWidth,u=e-i,c=n-a,f=FA(c,u),d=new HA({type:"path",canvas:r.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*W1(j1/6)+","+10*H1(j1/6)+" L0,0 L"+10*W1(j1/6)+",-"+10*H1(j1/6),stroke:s,lineWidth:l}});d.translate(i,a),d.rotateAtPoint(i,a,f),r.set(o?"startArrowShape":"endArrowShape",d)}function C4(r,t,e,n,i,a,o){var s=t.startArrow,l=t.endArrow,u=t.stroke,c=t.lineWidth,f=o?s:l,d=f.d,h=f.fill,v=f.stroke,p=f.lineWidth,g=Lr(f,["d","fill","stroke","lineWidth"]),m=e-i,y=n-a,b=FA(y,m);d&&(i=i-W1(b)*d,a=a-H1(b)*d);var x=new HA({type:"path",canvas:r.get("canvas"),isArrowShape:!0,attrs:A(A({},g),{stroke:v||u,lineWidth:p||c,fill:h})});x.translate(i,a),x.rotateAtPoint(i,a,b),r.set(o?"startArrowShape":"endArrowShape",x)}function dd(r,t,e,n,i){var a=FA(n-t,e-r);return{dx:W1(a)*i,dy:H1(a)*i}}function NA(r,t,e,n,i,a){typeof t.startArrow=="object"?C4(r,t,e,n,i,a,!0):t.startArrow?S4(r,t,e,n,i,a,!0):r.set("startArrowShape",null)}function BA(r,t,e,n,i,a){typeof t.endArrow=="object"?C4(r,t,e,n,i,a,!1):t.endArrow?S4(r,t,e,n,i,a,!1):r.set("startArrowShape",null)}var E4={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Fv(r,t){var e=t.attr();for(var n in e){var i=e[n],a=E4[n]?E4[n]:n;a==="matrix"&&i?r.transform(i[0],i[1],i[3],i[4],i[6],i[7]):a==="lineDash"&&r.setLineDash?qe(i)&&r.setLineDash(i):(a==="strokeStyle"||a==="fillStyle"?i=jve(r,t,i):a==="globalAlpha"&&(i=i*r.globalAlpha),r[a]=i)}}function $A(r,t,e){for(var n=0;n<t.length;n++){var i=t[n];i.cfg.visible?i.draw(r,e):i.skipDraw()}}function Xve(r,t,e){var n=r.get("refreshElements");G(n,function(i){if(i!==r)for(var a=i.cfg.parent;a&&a!==r&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),n[0]===r?GA(t):zA(t,e)}function zA(r,t){for(var e=0;e<r.length;e++){var n=r[e];if(n.cfg.visible)if(n.cfg.hasChanged)n.cfg.refresh=!0,n.isGroup()&&GA(n.cfg.children);else if(n.cfg.refresh)n.isGroup()&&zA(n.cfg.children,t);else{var i=qve(n,t);n.cfg.refresh=i,i&&n.isGroup()&&zA(n.cfg.children,t)}}}function _4(r){for(var t=0;t<r.length;t++){var e=r[t];e.cfg.hasChanged=!1,e.isGroup()&&!e.destroyed&&_4(e.cfg.children)}}function GA(r,t){for(var e=0;e<r.length;e++){var n=r[e];n.cfg.refresh=!0,n.isGroup()&&GA(n.get("children"))}}function qve(r,t){var e=r.cfg.cacheCanvasBBox,n=r.cfg.isInView&&e&&qm(e,t);return n}function T4(r,t,e,n){var i=e.path,a=e.startArrow,o=e.endArrow;if(!!i){var s=[0,0],l=[0,0],u={dx:0,dy:0};t.beginPath();for(var c=0;c<i.length;c++){var f=i[c],d=f[0];if(c===0&&a&&a.d){var h=r.getStartTangent();u=dd(h[0][0],h[0][1],h[1][0],h[1][1],a.d)}else if(c===i.length-2&&i[c+1][0]==="Z"&&o&&o.d){var v=i[c+1];if(v[0]==="Z"){var h=r.getEndTangent();u=dd(h[0][0],h[0][1],h[1][0],h[1][1],o.d)}}else if(c===i.length-1&&o&&o.d&&i[0]!=="Z"){var h=r.getEndTangent();u=dd(h[0][0],h[0][1],h[1][0],h[1][1],o.d)}var p=u.dx,g=u.dy;switch(d){case"M":t.moveTo(f[1]-p,f[2]-g),l=[f[1],f[2]];break;case"L":t.lineTo(f[1]-p,f[2]-g);break;case"Q":t.quadraticCurveTo(f[1],f[2],f[3]-p,f[4]-g);break;case"C":t.bezierCurveTo(f[1],f[2],f[3],f[4],f[5]-p,f[6]-g);break;case"A":{var m=void 0;n?(m=n[c],m||(m=V1(s,f),n[c]=m)):m=V1(s,f);var y=m.cx,b=m.cy,x=m.rx,w=m.ry,S=m.startAngle,C=m.endAngle,_=m.xRotation,T=m.sweepFlag;if(t.ellipse)t.ellipse(y,b,x,w,_,S,C,1-T);else{var E=x>w?x:w,M=x>w?1:x/w,k=x>w?w/x:1;t.translate(y,b),t.rotate(_),t.scale(M,k),t.arc(0,0,E,S,C,1-T),t.scale(1/M,1/k),t.rotate(-_),t.translate(-y,-b)}break}case"Z":t.closePath();break}if(d==="Z")s=l;else{var P=f.length;s=[f[P-2],f[P-1]]}}}}function A4(r,t){var e=r.get("canvas");e&&(t==="remove"&&(r._cacheCanvasBBox=r.get("cacheCanvasBBox")),r.get("hasChanged")||(r.set("hasChanged",!0),r.cfg.parent&&r.cfg.parent.get("hasChanged")||(e.refreshElement(r,t,e),e.get("autoDraw")&&e.draw())))}function Kve(r){var t;if(r.destroyed)t=r._cacheCanvasBBox;else{var e=r.get("cacheCanvasBBox"),n=e&&!!(e.width&&e.height),i=r.getCanvasBBox(),a=i&&!!(i.width&&i.height);n&&a?t=$ve(e,i):n?t=e:a&&(t=i)}return t}function Zve(r){if(!r.length)return null;var t=[],e=[],n=[],i=[];return G(r,function(a){var o=Kve(a);o&&(t.push(o.minX),e.push(o.minY),n.push(o.maxX),i.push(o.maxY))}),{minX:ia(t),minY:ia(e),maxX:ji(n),maxY:ji(i)}}function Qve(r,t){return!r||!t||!qm(r,t)?null:{minX:Math.max(r.minX,t.minX),minY:Math.max(r.minY,t.minY),maxX:Math.min(r.maxX,t.maxX),maxY:Math.min(r.maxY,t.maxY)}}var UA=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onCanvasChange=function(e){A4(this,e)},t.prototype.getShapeBase=function(){return tx},t.prototype.getGroupBase=function(){return t},t.prototype._applyClip=function(e,n){n&&(e.save(),Fv(e,n),n.createPath(e),e.restore(),e.clip(),n._afterDraw())},t.prototype.cacheCanvasBBox=function(){var e=this.cfg.children,n=[],i=[];G(e,function(d){var h=d.cfg.cacheCanvasBBox;h&&d.cfg.isInView&&(n.push(h.minX,h.maxX),i.push(h.minY,h.maxY))});var a=null;if(n.length){var o=ia(n),s=ji(n),l=ia(i),u=ji(i);a={minX:o,minY:l,x:o,y:l,maxX:s,maxY:u,width:s-o,height:u-l};var c=this.cfg.canvas;if(c){var f=c.getViewRange();this.set("isInView",qm(a,f))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},t.prototype.draw=function(e,n){var i=this.cfg.children,a=n?this.cfg.refresh:!0;i.length&&a&&(e.save(),Fv(e,this),this._applyClip(e,this.getClip()),$A(e,i,n),e.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},t}(S1),Jve=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.getShapeBase=function(){return tx},t.prototype.getGroupBase=function(){return UA},t.prototype.onCanvasChange=function(e){A4(this,e)},t.prototype.calculateBBox=function(){var e=this.get("type"),n=this.getHitLineWidth(),i=E1(e),a=i(this),o=n/2,s=a.x-o,l=a.y-o,u=a.x+a.width+o,c=a.y+a.height+o;return{x:s,minX:s,y:l,minY:l,width:a.width+n,height:a.height+n,maxX:u,maxY:c}},t.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},t.prototype.isStroke=function(){return!!this.attrs.stroke},t.prototype._applyClip=function(e,n){n&&(e.save(),Fv(e,n),n.createPath(e),e.restore(),e.clip(),n._afterDraw())},t.prototype.draw=function(e,n){var i=this.cfg.clipShape;if(n){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!qm(n,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}e.save(),Fv(e,this),this._applyClip(e,i),this.drawPath(e),e.restore(),this._afterDraw()},t.prototype.getCanvasViewBox=function(){var e=this.cfg.canvas;return e?e.getViewRange():null},t.prototype.cacheCanvasBBox=function(){var e=this.getCanvasViewBox();if(e){var n=this.getCanvasBBox(),i=qm(n,e);this.set("isInView",i),i?this.set("cacheCanvasBBox",n):this.set("cacheCanvasBBox",null)}},t.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},t.prototype.drawPath=function(e){this.createPath(e),this.strokeAndFill(e),this.afterDrawPath(e)},t.prototype.fill=function(e){e.fill()},t.prototype.stroke=function(e){e.stroke()},t.prototype.strokeAndFill=function(e){var n=this.attrs,i=n.lineWidth,a=n.opacity,o=n.strokeOpacity,s=n.fillOpacity;this.isFill()&&(!Je(s)&&s!==1?(e.globalAlpha=s,this.fill(e),e.globalAlpha=a):this.fill(e)),this.isStroke()&&i>0&&(!Je(o)&&o!==1&&(e.globalAlpha=o),this.stroke(e)),this.afterDrawPath(e)},t.prototype.createPath=function(e){},t.prototype.afterDrawPath=function(e){},t.prototype.isInShape=function(e,n){var i=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(e,n,i,a,o)},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){return!1},t.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var e=this.attrs;return e.lineWidth+e.lineAppendWidth},t}(C1),Qs=Jve,epe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,r:0})},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.attr(),l=s.x,u=s.y,c=s.r,f=o/2,d=m4(l,u,e,n);return a&&i?d<=c+f:a?d<=c:i?d>=c-f&&d<=c+f:!1},t.prototype.createPath=function(e){var n=this.attr(),i=n.x,a=n.y,o=n.r;e.beginPath(),e.arc(i,a,o,0,Math.PI*2,!1),e.closePath()},t}(Qs),tpe=epe;function Y1(r,t,e,n){return r/(e*e)+t/(n*n)}var rpe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,rx:0,ry:0})},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.attr(),l=o/2,u=s.x,c=s.y,f=s.rx,d=s.ry,h=(e-u)*(e-u),v=(n-c)*(n-c);return a&&i?Y1(h,v,f+l,d+l)<=1:a?Y1(h,v,f,d)<=1:i?Y1(h,v,f-l,d-l)>=1&&Y1(h,v,f+l,d+l)<=1:!1},t.prototype.createPath=function(e){var n=this.attr(),i=n.x,a=n.y,o=n.rx,s=n.ry;if(e.beginPath(),e.ellipse)e.ellipse(i,a,o,s,0,0,Math.PI*2,!1);else{var l=o>s?o:s,u=o>s?1:o/s,c=o>s?s/o:1;e.save(),e.translate(i,a),e.scale(u,c),e.arc(0,0,l,0,Math.PI*2),e.restore(),e.closePath()}},t}(Qs),npe=rpe;function M4(r){return r instanceof HTMLElement&&rt(r.nodeName)&&r.nodeName.toUpperCase()==="CANVAS"}var ipe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,width:0,height:0})},t.prototype.initAttrs=function(e){this._setImage(e.img)},t.prototype.isStroke=function(){return!1},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var e=this.get("canvas");e?e.draw():this.createPath(this.get("context"))}},t.prototype._setImage=function(e){var n=this,i=this.attrs;if(rt(e)){var a=new Image;a.onload=function(){if(n.destroyed)return!1;n.attr("img",a),n.set("loading",!1),n._afterLoading();var o=n.get("callback");o&&o.call(n)},a.crossOrigin="Anonymous",a.src=e,this.set("loading",!0)}else e instanceof Image?(i.width||(i.width=e.width),i.height||(i.height=e.height)):M4(e)&&(i.width||(i.width=Number(e.getAttribute("width"))),i.height||(i.height,Number(e.getAttribute("height"))))},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),e==="img"&&this._setImage(n)},t.prototype.createPath=function(e){if(this.get("loading")){this.set("toDraw",!0),this.set("context",e);return}var n=this.attr(),i=n.x,a=n.y,o=n.width,s=n.height,l=n.sx,u=n.sy,c=n.swidth,f=n.sheight,d=n.img;(d instanceof Image||M4(d))&&(!Je(l)&&!Je(u)&&!Je(c)&&!Je(f)?e.drawImage(d,l,u,c,f,i,a,o,s):e.drawImage(d,i,a,o,s))},t}(Qs),ape=ipe;function Pc(r,t,e,n,i,a,o){var s=Math.min(r,e),l=Math.max(r,e),u=Math.min(t,n),c=Math.max(t,n),f=i/2;return a>=s-f&&a<=l+f&&o>=u-f&&o<=c+f?Ba.pointToLine(r,t,e,n,a,o)<=i/2:!1}var ope=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),this.setArrow()},t.prototype.setArrow=function(){var e=this.attr(),n=e.x1,i=e.y1,a=e.x2,o=e.y2,s=e.startArrow,l=e.endArrow;s&&NA(this,e,a,o,n,i),l&&BA(this,e,n,i,a,o)},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){if(!i||!o)return!1;var s=this.attr(),l=s.x1,u=s.y1,c=s.x2,f=s.y2;return Pc(l,u,c,f,o,e,n)},t.prototype.createPath=function(e){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2,l=n.startArrow,u=n.endArrow,c={dx:0,dy:0},f={dx:0,dy:0};l&&l.d&&(c=dd(i,a,o,s,n.startArrow.d)),u&&u.d&&(f=dd(i,a,o,s,n.endArrow.d)),e.beginPath(),e.moveTo(i+c.dx,a+c.dy),e.lineTo(o-f.dx,s-f.dy)},t.prototype.afterDrawPath=function(e){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(e),i&&i.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr(),n=e.x1,i=e.y1,a=e.x2,o=e.y2;return Ba.length(n,i,a,o)},t.prototype.getPoint=function(e){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2;return Ba.pointAt(i,a,o,s,e)},t}(Qs),spe=ope,lpe={circle:function(r,t,e){return[["M",r-e,t],["A",e,e,0,1,0,r+e,t],["A",e,e,0,1,0,r-e,t]]},square:function(r,t,e){return[["M",r-e,t-e],["L",r+e,t-e],["L",r+e,t+e],["L",r-e,t+e],["Z"]]},diamond:function(r,t,e){return[["M",r-e,t],["L",r,t-e],["L",r+e,t],["L",r,t+e],["Z"]]},triangle:function(r,t,e){var n=e*Math.sin(1/3*Math.PI);return[["M",r-e,t+n],["L",r,t-n],["L",r+e,t+n],["Z"]]},"triangle-down":function(r,t,e){var n=e*Math.sin(1/3*Math.PI);return[["M",r-e,t-n],["L",r+e,t-n],["L",r,t+n],["Z"]]}},upe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.initAttrs=function(e){this._resetParamsCache()},t.prototype._resetParamsCache=function(){this.set("paramsCache",{})},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),["symbol","x","y","r","radius"].indexOf(e)!==-1&&this._resetParamsCache()},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._getR=function(e){return Je(e.r)?e.radius:e.r},t.prototype._getPath=function(){var e=this.attr(),n=e.x,i=e.y,a=e.symbol||"circle",o=this._getR(e),s,l;if(Vt(a))s=a,l=s(n,i,o),l=C$(l);else{if(s=t.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;l=s(n,i,o)}return l},t.prototype.createPath=function(e){var n=this._getPath(),i=this.get("paramsCache");T4(this,e,{path:n},i)},t.Symbols=lpe,t}(Qs),cpe=upe;function k4(r,t,e){var n=A1();return r.createPath(n),n.isPointInPath(t,e)}var fpe=1e-6;function VA(r){return Math.abs(r)<fpe?0:r<0?-1:1}function dpe(r,t,e){return(e[0]-r[0])*(t[1]-r[1])==(t[0]-r[0])*(e[1]-r[1])&&Math.min(r[0],t[0])<=e[0]&&e[0]<=Math.max(r[0],t[0])&&Math.min(r[1],t[1])<=e[1]&&e[1]<=Math.max(r[1],t[1])}function I4(r,t,e){var n=!1,i=r.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=r[a],s=r[(a+1)%i];if(dpe(o,s,[t,e]))return!0;VA(o[1]-e)>0!=VA(s[1]-e)>0&&VA(t-(e-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(n=!n)}return n}function Km(r,t,e,n,i,a,o,s){var l=(Math.atan2(s-t,o-r)+Math.PI*2)%(Math.PI*2);if(l<n||l>i)return!1;var u={x:r+e*Math.cos(l),y:t+e*Math.sin(l)};return m4(u.x,u.y,o,s)<=a/2}var hpe=Un;function vpe(r){for(var t=!1,e=r.length,n=0;n<e;n++){var i=r[n],a=i[0];if(a==="C"||a==="A"||a==="Q"){t=!0;break}}return t}function ppe(r,t,e,n,i){for(var a=!1,o=t/2,s=0;s<r.length;s++){var l=r[s],u=l.currentPoint,c=l.params,f=l.prePoint,d=l.box;if(!(d&&!fd(d.x-o,d.y-o,d.width+t,d.height+t,e,n))){switch(l.command){case"L":case"Z":a=Pc(f[0],f[1],u[0],u[1],t,e,n);break;case"Q":var h=oA.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],e,n);a=h<=t/2;break;case"C":var v=Ov.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],c[5],c[6],e,n,i);a=v<=t/2;break;case"A":var p=l.arcParams,g=p.cx,m=p.cy,y=p.rx,b=p.ry,x=p.startAngle,w=p.endAngle,S=p.xRotation,C=[e,n,1],_=y>b?y:b,T=y>b?1:y/b,E=y>b?b/y:1,M=hpe(null,[["t",-g,-m],["r",-S],["s",1/T,1/E]]);kl(C,C,M),a=Km(0,0,_,x,w,t,C[0],C[1]);break}if(a)break}}return a}function gpe(r){for(var t=r.length,e=[],n=[],i=[],a=0;a<t;a++){var o=r[a],s=o[0];s==="M"?(i.length&&(n.push(i),i=[]),i.push([o[1],o[2]])):s==="Z"?i.length&&(e.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&n.push(i),{polygons:e,polylines:n}}var X1=A({hasArc:vpe,extractPolygons:gpe,isPointInStroke:ppe},BT);function P4(r,t,e){for(var n=!1,i=0;i<r.length;i++){var a=r[i];if(n=I4(a,t,e),n)break}return n}var mpe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this._setPathArr(e.path),this.setArrow()},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),e==="path"&&this._setPathArr(n),this.setArrow()},t.prototype._setPathArr=function(e){this.attrs.path=C$(e);var n=X1.hasArc(e);this.set("hasArc",n),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},t.prototype.getSegments=function(){var e=this.get("segements");return e||(e=vA(this.attr("path")),this.set("segments",e)),e},t.prototype.setArrow=function(){var e=this.attr(),n=e.startArrow,i=e.endArrow;if(n){var a=this.getStartTangent();NA(this,e,a[0][0],a[0][1],a[1][0],a[1][1])}if(i){var a=this.getEndTangent();BA(this,e,a[0][0],a[0][1],a[1][0],a[1][1])}},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.getSegments(),l=this.get("hasArc"),u=!1;if(i){var c=this.getTotalLength();u=X1.isPointInStroke(s,o,e,n,c)}if(!u&&a)if(l)u=k4(this,e,n);else{var f=this.attr("path"),d=X1.extractPolygons(f);u=P4(d.polygons,e,n)||P4(d.polylines,e,n)}return u},t.prototype.createPath=function(e){var n=this.attr(),i=this.get("paramsCache");T4(this,e,n,i)},t.prototype.afterDrawPath=function(e){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(e),i&&i.draw(e)},t.prototype.getTotalLength=function(){var e=this.get("totalLength");return Je(e)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):e},t.prototype.getPoint=function(e){var n=this.get("tCache");n||(this._calculateCurve(),this._setTcache(),n=this.get("tCache"));var i,a,o=this.get("curve");if(!n||n.length===0)return o?{x:o[0][1],y:o[0][2]}:null;G(n,function(c,f){e>=c[0]&&e<=c[1]&&(i=(e-c[0])/(c[1]-c[0]),a=f)});var s=o[a];if(Je(s)||Je(a))return null;var l=s.length,u=o[a+1];return Ov.pointAt(s[l-2],s[l-1],u[1],u[2],u[3],u[4],u[5],u[6],i)},t.prototype._calculateCurve=function(){var e=this.attr().path;this.set("curve",X1.pathToCurve(e))},t.prototype._setTcache=function(){var e=0,n=0,i=[],a,o,s,l,u=this.get("curve");if(!!u){if(G(u,function(c,f){s=u[f+1],l=c.length,s&&(e+=Ov.length(c[l-2],c[l-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",e),e===0){this.set("tCache",[]);return}G(u,function(c,f){s=u[f+1],l=c.length,s&&(a=[],a[0]=n/e,o=Ov.length(c[l-2],c[l-1],s[1],s[2],s[3],s[4],s[5],s[6]),n+=o||0,a[1]=n/e,i.push(a))}),this.set("tCache",i)}},t.prototype.getStartTangent=function(){var e=this.getSegments(),n;if(e.length>1){var i=e[0].currentPoint,a=e[1].currentPoint,o=e[1].startTangent;n=[],o?(n.push([i[0]-o[0],i[1]-o[1]]),n.push([i[0],i[1]])):(n.push([a[0],a[1]]),n.push([i[0],i[1]]))}return n},t.prototype.getEndTangent=function(){var e=this.getSegments(),n=e.length,i;if(n>1){var a=e[n-2].currentPoint,o=e[n-1].currentPoint,s=e[n-1].endTangent;i=[],s?(i.push([o[0]-s[0],o[1]-s[1]]),i.push([o[0],o[1]])):(i.push([a[0],a[1]]),i.push([o[0],o[1]]))}return i},t}(Qs),HA=mpe;function D4(r,t,e,n,i){var a=r.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=r[o][0],l=r[o][1],u=r[o+1][0],c=r[o+1][1];if(Pc(s,l,u,c,t,e,n))return!0}if(i){var f=r[0],d=r[a-1];if(Pc(f[0],f[1],d[0],d[1],t,e,n))return!0}return!1}var ype=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.attr().points,l=!1;return i&&(l=D4(s,o,e,n,!0)),!l&&a&&(l=I4(s,e,n)),l},t.prototype.createPath=function(e){var n=this.attr(),i=n.points;if(!(i.length<2)){e.beginPath();for(var a=0;a<i.length;a++){var o=i[a];a===0?e.moveTo(o[0],o[1]):e.lineTo(o[0],o[1])}e.closePath()}},t}(Qs),bpe=ype,xpe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),this.setArrow(),["points"].indexOf(e)!==-1&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.setArrow=function(){var e=this.attr(),n=this.attrs,i=n.points,a=n.startArrow,o=n.endArrow,s=i.length,l=i[0][0],u=i[0][1],c=i[s-1][0],f=i[s-1][1];a&&NA(this,e,i[1][0],i[1][1],l,u),o&&BA(this,e,i[s-2][0],i[s-2][1],c,f)},t.prototype.isFill=function(){return!1},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){if(!i||!o)return!1;var s=this.attr().points;return D4(s,o,e,n,!1)},t.prototype.isStroke=function(){return!0},t.prototype.createPath=function(e){var n=this.attr(),i=n.points,a=n.startArrow,o=n.endArrow,s=i.length;if(!(i.length<2)){var l=i[0][0],u=i[0][1],c=i[s-1][0],f=i[s-1][1];if(a&&a.d){var d=dd(l,u,i[1][0],i[1][1],a.d);l+=d.dx,u+=d.dy}if(o&&o.d){var d=dd(i[s-2][0],i[s-2][1],c,f,o.d);c-=d.dx,f-=d.dy}e.beginPath(),e.moveTo(l,u);for(var h=0;h<s-1;h++){var v=i[h];e.lineTo(v[0],v[1])}e.lineTo(c,f)}},t.prototype.afterDrawPath=function(e){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(e),i&&i.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr().points,n=this.get("totalLength");return Je(n)?(this.set("totalLength",x$.length(e)),this.get("totalLength")):n},t.prototype.getPoint=function(e){var n=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return G(i,function(s,l){e>=s[0]&&e<=s[1]&&(a=(e-s[0])/(s[1]-s[0]),o=l)}),Ba.pointAt(n[o][0],n[o][1],n[o+1][0],n[o+1][1],a)},t.prototype._setTcache=function(){var e=this.attr().points;if(!(!e||e.length===0)){var n=this.getTotalLength();if(!(n<=0)){var i=0,a=[],o,s;G(e,function(l,u){e[u+1]&&(o=[],o[0]=i/n,s=Ba.length(l[0],l[1],e[u+1][0],e[u+1][1]),i+=s,o[1]=i/n,a.push(o))}),this.set("tCache",a)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,n=[];return n.push([e[1][0],e[1][1]]),n.push([e[0][0],e[0][1]]),n},t.prototype.getEndTangent=function(){var e=this.attr().points,n=e.length-1,i=[];return i.push([e[n-1][0],e[n-1][1]]),i.push([e[n][0],e[n][1]]),i},t}(Qs),wpe=xpe;function Spe(r,t,e,n,i,a,o){var s=i/2;return fd(r-s,t-s,e,i,a,o)||fd(r+e-s,t-s,i,n,a,o)||fd(r+s,t+n-s,e,i,a,o)||fd(r-s,t+s,i,n,a,o)}function Cpe(r,t,e,n,i,a,o,s){return Pc(r+i,t,r+e-i,t,a,o,s)||Pc(r+e,t+i,r+e,t+n-i,a,o,s)||Pc(r+e-i,t+n,r+i,t+n,a,o,s)||Pc(r,t+n-i,r,t+i,a,o,s)||Km(r+e-i,t+i,i,1.5*Math.PI,2*Math.PI,a,o,s)||Km(r+e-i,t+n-i,i,0,.5*Math.PI,a,o,s)||Km(r+i,t+n-i,i,.5*Math.PI,Math.PI,a,o,s)||Km(r+i,t+i,i,Math.PI,1.5*Math.PI,a,o,s)}var Epe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.attr(),l=s.x,u=s.y,c=s.width,f=s.height,d=s.radius;if(d){var v=!1;return i&&(v=Cpe(l,u,c,f,d,o,e,n)),!v&&a&&(v=k4(this,e,n)),v}else{var h=o/2;if(a&&i)return fd(l-h,u-h,c+h,f+h,e,n);if(a)return fd(l,u,c,f,e,n);if(i)return Spe(l,u,c,f,o,e,n)}},t.prototype.createPath=function(e){var n=this.attr(),i=n.x,a=n.y,o=n.width,s=n.height,l=n.radius;if(e.beginPath(),l===0)e.rect(i,a,o,s);else{var u=Yve(l),c=u[0],f=u[1],d=u[2],h=u[3];e.moveTo(i+c,a),e.lineTo(i+o-f,a),f!==0&&e.arc(i+o-f,a+f,f,-Math.PI/2,0),e.lineTo(i+o,a+s-d),d!==0&&e.arc(i+o-d,a+s-d,d,0,Math.PI/2),e.lineTo(i+h,a+s),h!==0&&e.arc(i+h,a+s-h,h,Math.PI/2,Math.PI),e.lineTo(i,a+c),c!==0&&e.arc(i+c,a+c,c,Math.PI,Math.PI*1.5),e.closePath()}},t}(Qs),_pe=Epe,Tpe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.isOnlyHitBox=function(){return!0},t.prototype.initAttrs=function(e){this._assembleFont(),e.text&&this._setText(e.text)},t.prototype._assembleFont=function(){var e=this.attrs;e.font=k1(e)},t.prototype._setText=function(e){var n=null;rt(e)&&e.indexOf(`
`)!==-1&&(n=e.split(`
`)),this.set("textArr",n)},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),e.startsWith("font")&&this._assembleFont(),e==="text"&&this._setText(n)},t.prototype._getSpaceingY=function(){var e=this.attrs,n=e.lineHeight,i=e.fontSize*1;return n?n-i:i*.14},t.prototype._drawTextArr=function(e,n,i){var a=this.attrs,o=a.textBaseline,s=a.x,l=a.y,u=a.fontSize*1,c=this._getSpaceingY(),f=M1(a.text,a.fontSize,a.lineHeight),d;G(n,function(h,v){d=l+v*(c+u)-f+u,o==="middle"&&(d+=f-u-(f-u)/2),o==="top"&&(d+=f-u),Je(h)||(i?e.fillText(h,s,d):e.strokeText(h,s,d))})},t.prototype._drawText=function(e,n){var i=this.attr(),a=i.x,o=i.y,s=this.get("textArr");if(s)this._drawTextArr(e,s,n);else{var l=i.text;Je(l)||(n?e.fillText(l,a,o):e.strokeText(l,a,o))}},t.prototype.strokeAndFill=function(e){var n=this.attrs,i=n.lineWidth,a=n.opacity,o=n.strokeOpacity,s=n.fillOpacity;this.isStroke()&&i>0&&(!Je(o)&&o!==1&&(e.globalAlpha=a),this.stroke(e)),this.isFill()&&(!Je(s)&&s!==1?(e.globalAlpha=s,this.fill(e),e.globalAlpha=a):this.fill(e)),this.afterDrawPath(e)},t.prototype.fill=function(e){this._drawText(e,!0)},t.prototype.stroke=function(e){this._drawText(e,!1)},t}(Qs),Ape=Tpe;function Mpe(r,t){if(t){var e=h1(t);return wu(e,r)}return r}function R4(r,t,e){var n=r.getTotalMatrix();if(n){var i=Mpe([t,e,1],n),a=i[0],o=i[1];return[a,o]}return[t,e]}function O4(r,t,e){if(r.isCanvas&&r.isCanvas())return!0;if(!Am(r)||r.cfg.isInView===!1)return!1;if(r.cfg.clipShape){var n=R4(r,t,e),i=n[0],a=n[1];if(r.isClipped(i,a))return!1}var o=r.cfg.cacheCanvasBBox||r.getCanvasBBox();return t>=o.minX&&t<=o.maxX&&e>=o.minY&&e<=o.maxY}function L4(r,t,e){if(!O4(r,t,e))return null;for(var n=null,i=r.getChildren(),a=i.length,o=a-1;o>=0;o--){var s=i[o];if(s.isGroup())n=L4(s,t,e);else if(O4(s,t,e)){var l=s,u=R4(s,t,e),c=u[0],f=u[1];l.isInShape(c,f)&&(n=s)}if(n)break}return n}var Eu=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e},t.prototype.onCanvasChange=function(e){(e==="attr"||e==="sort"||e==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},t.prototype.getShapeBase=function(){return tx},t.prototype.getGroupBase=function(){return UA},t.prototype.getPixelRatio=function(){var e=this.get("pixelRatio")||Bve();return e>=1?Math.ceil(e):1},t.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},t.prototype.createDom=function(){var e=document.createElement("canvas"),n=e.getContext("2d");return this.set("context",n),e},t.prototype.setDOMSize=function(e,n){r.prototype.setDOMSize.call(this,e,n);var i=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*e,a.height=o*n,o>1&&i.scale(o,o)},t.prototype.clear=function(){r.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),n=this.get("el");e.clearRect(0,0,n.width,n.height)},t.prototype.getShape=function(e,n){var i;return this.get("quickHit")?i=L4(this,e,n):i=r.prototype.getShape.call(this,e,n,null),i},t.prototype._getRefreshRegion=function(){var e=this.get("refreshElements"),n=this.getViewRange(),i;if(e.length&&e[0]===this)i=n;else if(i=Zve(e),i){i.minX=Math.floor(i.minX),i.minY=Math.floor(i.minY),i.maxX=Math.ceil(i.maxX),i.maxY=Math.ceil(i.maxY),i.maxY+=1;var a=this.get("clipView");a&&(i=Qve(i,n))}return i},t.prototype.refreshElement=function(e){var n=this.get("refreshElements");n.push(e)},t.prototype._clearFrame=function(){var e=this.get("drawFrame");e&&(T3(e),this.set("drawFrame",null),this.set("refreshElements",[]))},t.prototype.draw=function(){var e=this.get("drawFrame");this.get("autoDraw")&&e||this._startDraw()},t.prototype._drawAll=function(){var e=this.get("context"),n=this.get("el"),i=this.getChildren();e.clearRect(0,0,n.width,n.height),Fv(e,this),$A(e,i),this.set("refreshElements",[])},t.prototype._drawRegion=function(){var e=this.get("context"),n=this.get("refreshElements"),i=this.getChildren(),a=this._getRefreshRegion();a?(e.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),e.save(),e.beginPath(),e.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),e.clip(),Fv(e,this),Xve(this,i,a),$A(e,i,a),e.restore()):n.length&&_4(n),G(n,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},t.prototype._startDraw=function(){var e=this,n=this.get("drawFrame");n||(n=_3(function(){e.get("localRefresh")?e._drawRegion():e._drawAll(),e.set("drawFrame",null)}),this.set("drawFrame",n))},t.prototype.skipDraw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.width=0,e.height=0,e.parentNode.removeChild(e)},t}(w1),kpe="0.5.12",Ipe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Shape:tx,version:kpe,Canvas:Eu,Group:UA,getArcParams:V1,Event:Tm,Base:$T,AbstractCanvas:w1,AbstractGroup:S1,AbstractShape:C1,getBBoxMethod:E1,getTextHeight:M1,assembleFont:k1,isAllowCapture:Am,multiplyVec2:wu,invert:h1,getOffScreenContext:A1,PathUtil:BT}),WA={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},gn={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function Is(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function F4(r){var t=WA[r.type],e=r.getParent();if(!t)throw new Error("the type "+r.type+" is not supported by svg");var n=Is(t);if(r.get("id")&&(n.id=r.get("id")),r.set("el",n),r.set("attrs",{}),e){var i=e.get("el");i||(i=e.createDom(),e.set("el",i)),i.appendChild(n)}return n}function N4(r,t){var e=r.get("el"),n=k3(e.children).sort(t),i=document.createDocumentFragment();n.forEach(function(a){i.appendChild(a)}),e.appendChild(i)}function Ppe(r,t){var e=r.parentNode,n=Array.from(e.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),i=n[t],a=n.indexOf(r);if(i){if(a>t)e.insertBefore(r,i);else if(a<t){var o=n[t+1];o?e.insertBefore(r,o):e.appendChild(r)}}else e.appendChild(r)}function Dpe(r,t){var e=r.cfg.el,n=r.attr(),i={dx:n.shadowOffsetX,dy:n.shadowOffsetY,blur:n.shadowBlur,color:n.shadowColor};if(!i.dx&&!i.dy&&!i.blur&&!i.color)e.removeAttribute("filter");else{var a=t.find("filter",i);a||(a=t.addShadow(i)),e.setAttribute("filter","url(#"+a+")")}}function Zm(r){var t=r.attr().matrix;if(t){for(var e=r.cfg.el,n=[],i=0;i<9;i+=3)n.push(t[i]+","+t[i+1]);n=n.join(","),n.indexOf("NaN")===-1?e.setAttribute("transform","matrix("+n+")"):console.warn("invalid matrix:",t)}}function Qm(r,t){var e=r.getClip(),n=r.get("el");if(!e)n.removeAttribute("clip-path");else if(e&&!n.hasAttribute("clip-path")){F4(e),e.createPath(t);var i=t.addClip(e);n.setAttribute("clip-path","url(#"+i+")")}}function B4(r,t){t.forEach(function(e){e.draw(r)})}function $4(r,t){var e=r.get("canvas");if(e&&e.get("autoDraw")){var n=e.get("context"),i=r.getParent(),a=i?i.getChildren():[e],o=r.get("el");if(t==="remove"){var s=r.get("isClipShape");if(s){var l=o&&o.parentNode,u=l&&l.parentNode;l&&u&&u.removeChild(l)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(t==="show")o.setAttribute("visibility","visible");else if(t==="hide")o.setAttribute("visibility","hidden");else if(t==="zIndex")Ppe(o,a.indexOf(r));else if(t==="sort"){var c=r.get("children");c&&c.length&&N4(r,function(f,d){return c.indexOf(f)-c.indexOf(d)?1:0})}else t==="clear"?o&&(o.innerHTML=""):t==="matrix"?Zm(r):t==="clip"?Qm(r,n):t==="attr"||t==="add"&&r.draw(n)}}var jA=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.isEntityGroup=function(){return!0},t.prototype.createDom=function(){var e=Is("g");this.set("el",e);var n=this.getParent();if(n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(e)}return e},t.prototype.afterAttrsChange=function(e){r.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var i=n.get("context");this.createPath(i,e)}},t.prototype.onCanvasChange=function(e){$4(this,e)},t.prototype.getShapeBase=function(){return rx},t.prototype.getGroupBase=function(){return t},t.prototype.draw=function(e){var n=this.getChildren(),i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||this.createDom(),Qm(this,e),this.createPath(e),n.length&&B4(e,n))},t.prototype.createPath=function(e,n){var i=this.attr(),a=this.get("el");G(n||i,function(o,s){gn[s]&&a.setAttribute(gn[s],o)}),Zm(this)},t}(S1),Rpe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="svg",e.canFill=!1,e.canStroke=!1,e}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.afterAttrsChange=function(e){r.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var i=n.get("context");this.draw(i,e)}},t.prototype.getShapeBase=function(){return rx},t.prototype.getGroupBase=function(){return jA},t.prototype.onCanvasChange=function(e){$4(this,e)},t.prototype.calculateBBox=function(){var e=this.get("el"),n=null;if(e)n=e.getBBox();else{var i=E1(this.get("type"));i&&(n=i(this))}if(n){var a=n.x,o=n.y,s=n.width,l=n.height,u=this.getHitLineWidth(),c=u/2,f=a-c,d=o-c,h=a+s+c,v=o+l+c;return{x:f,y:d,minX:f,minY:d,maxX:h,maxY:v,width:s+u,height:l+u}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},t.prototype.isFill=function(){var e=this.attr(),n=e.fill,i=e.fillStyle;return(n||i||this.isClipShape())&&this.canFill},t.prototype.isStroke=function(){var e=this.attr(),n=e.stroke,i=e.strokeStyle;return(n||i)&&this.canStroke},t.prototype.draw=function(e,n){var i=this.get("el");this.get("destroyed")?i&&i.parentNode.removeChild(i):(i||F4(this),Qm(this,e),this.createPath(e,n),this.shadow(e,n),this.strokeAndFill(e,n),this.transform(n))},t.prototype.createPath=function(e,n){},t.prototype.strokeAndFill=function(e,n){var i=n||this.attr(),a=i.fill,o=i.fillStyle,s=i.stroke,l=i.strokeStyle,u=i.fillOpacity,c=i.strokeOpacity,f=i.lineWidth,d=this.get("el");this.canFill&&(n?"fill"in i?this._setColor(e,"fill",a):"fillStyle"in i&&this._setColor(e,"fill",o):this._setColor(e,"fill",a||o),u&&d.setAttribute(gn.fillOpacity,u)),this.canStroke&&f>0&&(n?"stroke"in i?this._setColor(e,"stroke",s):"strokeStyle"in i&&this._setColor(e,"stroke",l):this._setColor(e,"stroke",s||l),c&&d.setAttribute(gn.strokeOpacity,c),f&&d.setAttribute(gn.lineWidth,f))},t.prototype._setColor=function(e,n,i){var a=this.get("el");if(!i){a.setAttribute(gn[n],"none");return}if(i=i.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(i)){var o=e.find("gradient",i);o||(o=e.addGradient(i)),a.setAttribute(gn[n],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(i)){var o=e.find("pattern",i);o||(o=e.addPattern(i)),a.setAttribute(gn[n],"url(#"+o+")")}else a.setAttribute(gn[n],i)},t.prototype.shadow=function(e,n){var i=this.attr(),a=n||i,o=a.shadowOffsetX,s=a.shadowOffsetY,l=a.shadowBlur,u=a.shadowColor;(o||s||l||u)&&Dpe(this,e)},t.prototype.transform=function(e){var n=this.attr(),i=(e||n).matrix;i&&Zm(this)},t.prototype.isInShape=function(e,n){return this.isPointInPath(e,n)},t.prototype.isPointInPath=function(e,n){var i=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=e+o.left,l=n+o.top,u=document.elementFromPoint(s,l);return!!(u&&u.isEqualNode(i))},t.prototype.getHitLineWidth=function(){var e=this.attrs,n=e.lineWidth,i=e.lineAppendWidth;return this.isStroke()?n+i:0},t}(C1),Ps=Rpe,Ope=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="circle",e.canFill=!0,e.canStroke=!0,e}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,r:0})},t.prototype.createPath=function(e,n){var i=this.attr(),a=this.get("el");G(n||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):gn[s]&&a.setAttribute(gn[s],o)})},t}(Ps),Lpe=Ope,Fpe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="dom",e.canFill=!1,e.canStroke=!1,e}return t.prototype.createPath=function(e,n){var i=this.attr(),a=this.get("el");if(G(n||i,function(u,c){gn[c]&&a.setAttribute(gn[c],u)}),typeof i.html=="function"){var o=i.html.call(this,i);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,l=s.length-1;l>=0;l--)a.removeChild(s[l]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=i.html},t}(Ps),Npe=Fpe,Bpe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="ellipse",e.canFill=!0,e.canStroke=!0,e}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,rx:0,ry:0})},t.prototype.createPath=function(e,n){var i=this.attr(),a=this.get("el");G(n||i,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):gn[s]&&a.setAttribute(gn[s],o)})},t}(Ps),$pe=Bpe,zpe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="image",e.canFill=!1,e.canStroke=!1,e}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,width:0,height:0})},t.prototype.createPath=function(e,n){var i=this,a=this.attr(),o=this.get("el");G(n||a,function(s,l){l==="img"?i._setImage(a.img):gn[l]&&o.setAttribute(gn[l],s)})},t.prototype.setAttr=function(e,n){this.attrs[e]=n,e==="img"&&this._setImage(n)},t.prototype._setImage=function(e){var n=this.attr(),i=this.get("el");if(rt(e))i.setAttribute("href",e);else if(e instanceof window.Image)n.width||(i.setAttribute("width",e.width),this.attr("width",e.width)),n.height||(i.setAttribute("height",e.height),this.attr("height",e.height)),i.setAttribute("href",e.src);else if(e instanceof HTMLElement&&rt(e.nodeName)&&e.nodeName.toUpperCase()==="CANVAS")i.setAttribute("href",e.toDataURL());else if(e instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+e.width),a.setAttribute("height",""+e.height),a.getContext("2d").putImageData(e,0,0),n.width||(i.setAttribute("width",""+e.width),this.attr("width",e.width)),n.height||(i.setAttribute("height",""+e.height),this.attr("height",e.height)),i.setAttribute("href",a.toDataURL())}},t}(Ps),Gpe=zpe,Upe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="line",e.canFill=!1,e.canStroke=!0,e}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,n){var i=this.attr(),a=this.get("el");G(n||i,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var l=Kr(o)?e.addArrow(i,gn[s]):e.getDefaultArrow(i,gn[s]);a.setAttribute(gn[s],"url(#"+l+")")}else a.removeAttribute(gn[s]);else gn[s]&&a.setAttribute(gn[s],o)})},t.prototype.getTotalLength=function(){var e=this.attr(),n=e.x1,i=e.y1,a=e.x2,o=e.y2;return Ba.length(n,i,a,o)},t.prototype.getPoint=function(e){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2;return Ba.pointAt(i,a,o,s,e)},t}(Ps),Vpe=Upe,q1={circle:function(r,t,e){return[["M",r,t],["m",-e,0],["a",e,e,0,1,0,e*2,0],["a",e,e,0,1,0,-e*2,0]]},square:function(r,t,e){return[["M",r-e,t-e],["L",r+e,t-e],["L",r+e,t+e],["L",r-e,t+e],["Z"]]},diamond:function(r,t,e){return[["M",r-e,t],["L",r,t-e],["L",r+e,t],["L",r,t+e],["Z"]]},triangle:function(r,t,e){var n=e*Math.sin(1/3*Math.PI);return[["M",r-e,t+n],["L",r,t-n],["L",r+e,t+n],["z"]]},triangleDown:function(r,t,e){var n=e*Math.sin(1/3*Math.PI);return[["M",r-e,t-n],["L",r+e,t-n],["L",r,t+n],["Z"]]}},z4={get:function(r){return q1[r]},register:function(r,t){q1[r]=t},remove:function(r){delete q1[r]},getAll:function(){return q1}},Hpe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="marker",e.canFill=!0,e.canStroke=!0,e}return t.prototype.createPath=function(e){var n=this.get("el");n.setAttribute("d",this._assembleMarker())},t.prototype._assembleMarker=function(){var e=this._getPath();return qe(e)?e.map(function(n){return n.join(" ")}).join(""):e},t.prototype._getPath=function(){var e=this.attr(),n=e.x,i=e.y,a=e.r||e.radius,o=e.symbol||"circle",s;return Vt(o)?s=o:s=z4.get(o),s?s(n,i,a):(console.warn(s+" symbol is not exist."),null)},t.symbolsFactory=z4,t}(Ps),Wpe=Hpe,jpe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="path",e.canFill=!0,e.canStroke=!0,e}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,n){var i=this,a=this.attr(),o=this.get("el");G(n||a,function(s,l){if(l==="path"&&qe(s))o.setAttribute("d",i._formatPath(s));else if(l==="startArrow"||l==="endArrow")if(s){var u=Kr(s)?e.addArrow(a,gn[l]):e.getDefaultArrow(a,gn[l]);o.setAttribute(gn[l],"url(#"+u+")")}else o.removeAttribute(gn[l]);else gn[l]&&o.setAttribute(gn[l],s)})},t.prototype._formatPath=function(e){var n=e.map(function(i){return i.join(" ")}).join("");return~n.indexOf("NaN")?"":n},t.prototype.getTotalLength=function(){var e=this.get("el");return e?e.getTotalLength():null},t.prototype.getPoint=function(e){var n=this.get("el"),i=this.getTotalLength();if(i===0)return null;var a=n?n.getPointAtLength(e*i):null;return a?{x:a.x,y:a.y}:null},t}(Ps),Ype=jpe,Xpe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="polygon",e.canFill=!0,e.canStroke=!0,e}return t.prototype.createPath=function(e,n){var i=this.attr(),a=this.get("el");G(n||i,function(o,s){s==="points"&&qe(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):gn[s]&&a.setAttribute(gn[s],o)})},t}(Ps),qpe=Xpe,Kpe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="polyline",e.canFill=!0,e.canStroke=!0,e}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{startArrow:!1,endArrow:!1})},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),["points"].indexOf(e)!==-1&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.createPath=function(e,n){var i=this.attr(),a=this.get("el");G(n||i,function(o,s){s==="points"&&qe(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):gn[s]&&a.setAttribute(gn[s],o)})},t.prototype.getTotalLength=function(){var e=this.attr().points,n=this.get("totalLength");return Je(n)?(this.set("totalLength",x$.length(e)),this.get("totalLength")):n},t.prototype.getPoint=function(e){var n=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return G(i,function(s,l){e>=s[0]&&e<=s[1]&&(a=(e-s[0])/(s[1]-s[0]),o=l)}),Ba.pointAt(n[o][0],n[o][1],n[o+1][0],n[o+1][1],a)},t.prototype._setTcache=function(){var e=this.attr().points;if(!(!e||e.length===0)){var n=this.getTotalLength();if(!(n<=0)){var i=0,a=[],o,s;G(e,function(l,u){e[u+1]&&(o=[],o[0]=i/n,s=Ba.length(l[0],l[1],e[u+1][0],e[u+1][1]),i+=s,o[1]=i/n,a.push(o))}),this.set("tCache",a)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,n=[];return n.push([e[1][0],e[1][1]]),n.push([e[0][0],e[0][1]]),n},t.prototype.getEndTangent=function(){var e=this.attr().points,n=e.length-1,i=[];return i.push([e[n-1][0],e[n-1][1]]),i.push([e[n][0],e[n][1]]),i},t}(Ps),Zpe=Kpe;function Qpe(r){var t=0,e=0,n=0,i=0;return qe(r)?r.length===1?t=e=n=i=r[0]:r.length===2?(t=n=r[0],e=i=r[1]):r.length===3?(t=r[0],e=i=r[1],n=r[2]):(t=r[0],e=r[1],n=r[2],i=r[3]):t=e=n=i=r,{r1:t,r2:e,r3:n,r4:i}}var Jpe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="rect",e.canFill=!0,e.canStroke=!0,e}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.createPath=function(e,n){var i=this,a=this.attr(),o=this.get("el"),s=!1,l=["x","y","width","height","radius"];G(n||a,function(u,c){l.indexOf(c)!==-1&&!s?(o.setAttribute("d",i._assembleRect(a)),s=!0):l.indexOf(c)===-1&&gn[c]&&o.setAttribute(gn[c],u)})},t.prototype._assembleRect=function(e){var n=e.x,i=e.y,a=e.width,o=e.height,s=e.radius;if(!s)return"M "+n+","+i+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var l=Qpe(s);qe(s)?s.length===1?l.r1=l.r2=l.r3=l.r4=s[0]:s.length===2?(l.r1=l.r3=s[0],l.r2=l.r4=s[1]):s.length===3?(l.r1=s[0],l.r2=l.r4=s[1],l.r3=s[2]):(l.r1=s[0],l.r2=s[1],l.r3=s[2],l.r4=s[3]):l.r1=l.r2=l.r3=l.r4=s;var u=[["M "+(n+l.r1)+","+i],["l "+(a-l.r1-l.r2)+",0"],["a "+l.r2+","+l.r2+",0,0,1,"+l.r2+","+l.r2],["l 0,"+(o-l.r2-l.r3)],["a "+l.r3+","+l.r3+",0,0,1,"+-l.r3+","+l.r3],["l "+(l.r3+l.r4-a)+",0"],["a "+l.r4+","+l.r4+",0,0,1,"+-l.r4+","+-l.r4],["l 0,"+(l.r4+l.r1-o)],["a "+l.r1+","+l.r1+",0,0,1,"+l.r1+","+-l.r1],["z"]];return u.join(" ")},t}(Ps),ege=Jpe,G4=.3,tge={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},rge={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},nge={left:"left",start:"left",center:"middle",right:"end",end:"end"},ige=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="text",e.canFill=!0,e.canStroke=!0,e}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return A(A({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.createPath=function(e,n){var i=this,a=this.attr(),o=this.get("el");this._setFont(),G(n||a,function(s,l){l==="text"?i._setText(""+s):l==="matrix"&&s?Zm(i):gn[l]&&o.setAttribute(gn[l],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},t.prototype._setFont=function(){var e=this.get("el"),n=this.attr(),i=n.textBaseline,a=n.textAlign,o=zT();o&&o.name==="firefox"?e.setAttribute("dominant-baseline",rge[i]||"alphabetic"):e.setAttribute("alignment-baseline",tge[i]||"baseline"),e.setAttribute("text-anchor",nge[a]||"left")},t.prototype._setText=function(e){var n=this.get("el"),i=this.attr(),a=i.x,o=i.textBaseline,s=o===void 0?"bottom":o;if(!e)n.innerHTML="";else if(~e.indexOf(`
`)){var l=e.split(`
`),u=l.length-1,c="";G(l,function(f,d){d===0?s==="alphabetic"?c+='<tspan x="'+a+'" dy="'+-u+'em">'+f+"</tspan>":s==="top"?c+='<tspan x="'+a+'" dy="0.9em">'+f+"</tspan>":s==="middle"?c+='<tspan x="'+a+'" dy="'+-(u-1)/2+'em">'+f+"</tspan>":s==="bottom"?c+='<tspan x="'+a+'" dy="-'+(u+G4)+'em">'+f+"</tspan>":s==="hanging"&&(c+='<tspan x="'+a+'" dy="'+(-(u-1)-G4)+'em">'+f+"</tspan>"):c+='<tspan x="'+a+'" dy="1em">'+f+"</tspan>"}),n.innerHTML=c}else n.innerHTML=e},t}(Ps),age=ige,oge=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,sge=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,lge=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function U4(r){var t=r.match(lge);if(!t)return"";var e="";return t.sort(function(n,i){return n=n.split(":"),i=i.split(":"),Number(n[0])-Number(i[0])}),G(t,function(n){n=n.split(":"),e+='<stop offset="'+n[0]+'" stop-color="'+n[1]+'"></stop>'}),e}function uge(r,t){var e=oge.exec(r),n=$x(zx(parseFloat(e[1])),Math.PI*2),i=e[2],a,o;n>=0&&n<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=n&&n<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=n&&n<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(n),l=s*s,u=(o.x-a.x+s*(o.y-a.y))/(l+1)+a.x,c=s*(o.x-a.x+s*(o.y-a.y))/(l+1)+a.y;t.setAttribute("x1",a.x),t.setAttribute("y1",a.y),t.setAttribute("x2",u),t.setAttribute("y2",c),t.innerHTML=U4(i)}function cge(r,t){var e=sge.exec(r),n=parseFloat(e[1]),i=parseFloat(e[2]),a=parseFloat(e[3]),o=e[4];t.setAttribute("cx",n),t.setAttribute("cy",i),t.setAttribute("r",a),t.innerHTML=U4(o)}var fge=function(){function r(t){this.cfg={};var e=null,n=Ms("gradient_");return t.toLowerCase()[0]==="l"?(e=Is("linearGradient"),uge(t,e)):(e=Is("radialGradient"),cge(t,e)),e.setAttribute("id",n),this.el=e,this.id=n,this.cfg=t,this}return r.prototype.match=function(t,e){return this.cfg===e},r}(),dge={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},hge={x:"-40%",y:"-40%",width:"200%",height:"200%"},vge=function(){function r(t){this.type="filter",this.cfg={},this.type="filter";var e=Is("filter");return G(hge,function(n,i){e.setAttribute(i,n)}),this.el=e,this.id=Ms("filter_"),this.el.id=this.id,this.cfg=t,this._parseShadow(t,e),this}return r.prototype.match=function(t,e){if(this.type!==t)return!1;var n=!0,i=this.cfg;return G(Object.keys(i),function(a){if(i[a]!==e[a])return n=!1,!1}),n},r.prototype.update=function(t,e){var n=this.cfg;return n[dge[t]]=e,this._parseShadow(n,this.el),this},r.prototype._parseShadow=function(t,e){var n=`<feDropShadow
      dx="`+(t.dx||0)+`"
      dy="`+(t.dy||0)+`"
      stdDeviation="`+(t.blur?t.blur/10:0)+`"
      flood-color="`+(t.color?t.color:"#000")+`"
      flood-opacity="`+(t.opacity?t.opacity:1)+`"
      />`;e.innerHTML=n},r}(),V4=function(){function r(t,e){this.cfg={};var n=Is("marker"),i=Ms("marker_");n.setAttribute("id",i);var a=Is("path");a.setAttribute("stroke",t.stroke||"none"),a.setAttribute("fill",t.fill||"none"),n.appendChild(a),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=a,this.id=i;var o=t[e==="marker-start"?"startArrow":"endArrow"];return this.stroke=t.stroke||"#000",o===!0?this._setDefaultPath(e,a):(this.cfg=o,this._setMarker(t.lineWidth,a)),this}return r.prototype.match=function(){return!1},r.prototype._setDefaultPath=function(t,e){var n=this.el;e.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY",""+5)},r.prototype._setMarker=function(t,e){var n=this.el,i=this.cfg.path,a=this.cfg.d;qe(i)&&(i=i.map(function(o){return o.join(" ")}).join("")),e.setAttribute("d",i),n.appendChild(e),a&&n.setAttribute("refX",""+a/t)},r.prototype.update=function(t){var e=this.child;e.attr?e.attr("fill",t):e.setAttribute("fill",t)},r}(),pge=function(){function r(t){this.type="clip",this.cfg={};var e=Is("clipPath");this.el=e,this.id=Ms("clip_"),e.id=this.id;var n=t.cfg.el;return e.appendChild(n),this.cfg=t,this}return r.prototype.match=function(){return!1},r.prototype.remove=function(){var t=this.el;t.parentNode.removeChild(t)},r}(),gge=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,mge=function(){function r(t){this.cfg={};var e=Is("pattern");e.setAttribute("patternUnits","userSpaceOnUse");var n=Is("image");e.appendChild(n);var i=Ms("pattern_");e.id=i,this.el=e,this.id=i,this.cfg=t;var a=gge.exec(t),o=a[2];n.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function l(){e.setAttribute("width",""+s.width),e.setAttribute("height",""+s.height)}return s.complete?l():(s.onload=l,s.src=s.src),this}return r.prototype.match=function(t,e){return this.cfg===e},r}(),yge=function(){function r(t){var e=Is("defs"),n=Ms("defs_");e.id=n,t.appendChild(e),this.children=[],this.defaultArrow={},this.el=e,this.canvas=t}return r.prototype.find=function(t,e){for(var n=this.children,i=null,a=0;a<n.length;a++)if(n[a].match(t,e)){i=n[a].id;break}return i},r.prototype.findById=function(t){for(var e=this.children,n=null,i=0;i<e.length;i++)if(e[i].id===t){n=e[i];break}return n},r.prototype.add=function(t){this.children.push(t),t.canvas=this.canvas,t.parent=this},r.prototype.getDefaultArrow=function(t,e){var n=t.stroke||t.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var i=new V4(t,e);return this.defaultArrow[n]=i,this.el.appendChild(i.el),this.add(i),i.id},r.prototype.addGradient=function(t){var e=new fge(t);return this.el.appendChild(e.el),this.add(e),e.id},r.prototype.addArrow=function(t,e){var n=new V4(t,e);return this.el.appendChild(n.el),this.add(n),n.id},r.prototype.addShadow=function(t){var e=new vge(t);return this.el.appendChild(e.el),this.add(e),e.id},r.prototype.addPattern=function(t){var e=new mge(t);return this.el.appendChild(e.el),this.add(e),e.id},r.prototype.addClip=function(t){var e=new pge(t);return this.el.appendChild(e.el),this.add(e),e.id},r}(),Nv=function(r){Te(t,r);function t(e){return r.call(this,A(A({},e),{autoDraw:!0,renderer:"svg"}))||this}return t.prototype.getShapeBase=function(){return rx},t.prototype.getGroupBase=function(){return jA},t.prototype.getShape=function(e,n,i){var a=i.target||i.srcElement;if(!WA[a.tagName]){for(var o=a.parentNode;o&&!WA[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},t.prototype.createDom=function(){var e=Is("svg"),n=new yge(e);return e.setAttribute("width",""+this.get("width")),e.setAttribute("height",""+this.get("height")),this.set("context",n),e},t.prototype.onCanvasChange=function(e){var n=this.get("context"),i=this.get("el");if(e==="sort"){var a=this.get("children");a&&a.length&&N4(this,function(s,l){return a.indexOf(s)-a.indexOf(l)?1:0})}else if(e==="clear"){if(i){i.innerHTML="";var o=n.el;o.innerHTML="",i.appendChild(o)}}else e==="matrix"?Zm(this):e==="clip"?Qm(this,n):e==="changeSize"&&(i.setAttribute("width",""+this.get("width")),i.setAttribute("height",""+this.get("height")))},t.prototype.draw=function(){var e=this.get("context"),n=this.getChildren();Qm(this,e),n.length&&B4(e,n)},t}(w1),bge="0.5.6",xge=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Shape:rx,version:bge,Canvas:Nv,Group:jA,Event:Tm,Base:$T,AbstractCanvas:w1,AbstractGroup:S1,AbstractShape:C1,getBBoxMethod:E1,getTextHeight:M1,assembleFont:k1,isAllowCapture:Am,multiplyVec2:wu,invert:h1,getOffScreenContext:A1,PathUtil:BT}),Jm={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},wge=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")},ey=Rr(function(r){var t=Array.prototype.concat,e=Array.prototype.slice,n=r.exports=function(a){for(var o=[],s=0,l=a.length;s<l;s++){var u=a[s];wge(u)?o=t.call(o,e.call(u)):o.push(u)}return o};n.wrap=function(i){return function(){return i(n(arguments))}}}),hd=Rr(function(r){var t=Object.hasOwnProperty,e={};for(var n in Jm)t.call(Jm,n)&&(e[Jm[n]]=n);var i=r.exports={to:{},get:{}};i.get=function(s){var l=s.substring(0,3).toLowerCase(),u,c;switch(l){case"hsl":u=i.get.hsl(s),c="hsl";break;case"hwb":u=i.get.hwb(s),c="hwb";break;default:u=i.get.rgb(s),c="rgb";break}return u?{model:c,value:u}:null},i.get.rgb=function(s){if(!s)return null;var l=/^#([a-f0-9]{3,4})$/i,u=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,c=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,f=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,d=/^(\w+)$/,h=[0,0,0,1],v,p,g;if(v=s.match(u)){for(g=v[2],v=v[1],p=0;p<3;p++){var m=p*2;h[p]=parseInt(v.slice(m,m+2),16)}g&&(h[3]=parseInt(g,16)/255)}else if(v=s.match(l)){for(v=v[1],g=v[3],p=0;p<3;p++)h[p]=parseInt(v[p]+v[p],16);g&&(h[3]=parseInt(g+g,16)/255)}else if(v=s.match(c)){for(p=0;p<3;p++)h[p]=parseInt(v[p+1],0);v[4]&&(v[5]?h[3]=parseFloat(v[4])*.01:h[3]=parseFloat(v[4]))}else if(v=s.match(f)){for(p=0;p<3;p++)h[p]=Math.round(parseFloat(v[p+1])*2.55);v[4]&&(v[5]?h[3]=parseFloat(v[4])*.01:h[3]=parseFloat(v[4]))}else return(v=s.match(d))?v[1]==="transparent"?[0,0,0,0]:t.call(Jm,v[1])?(h=Jm[v[1]],h[3]=1,h):null:null;for(p=0;p<3;p++)h[p]=a(h[p],0,255);return h[3]=a(h[3],0,1),h},i.get.hsl=function(s){if(!s)return null;var l=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,u=s.match(l);if(u){var c=parseFloat(u[4]),f=(parseFloat(u[1])%360+360)%360,d=a(parseFloat(u[2]),0,100),h=a(parseFloat(u[3]),0,100),v=a(isNaN(c)?1:c,0,1);return[f,d,h,v]}return null},i.get.hwb=function(s){if(!s)return null;var l=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,u=s.match(l);if(u){var c=parseFloat(u[4]),f=(parseFloat(u[1])%360+360)%360,d=a(parseFloat(u[2]),0,100),h=a(parseFloat(u[3]),0,100),v=a(isNaN(c)?1:c,0,1);return[f,d,h,v]}return null},i.to.hex=function(){var s=ey(arguments);return"#"+o(s[0])+o(s[1])+o(s[2])+(s[3]<1?o(Math.round(s[3]*255)):"")},i.to.rgb=function(){var s=ey(arguments);return s.length<4||s[3]===1?"rgb("+Math.round(s[0])+", "+Math.round(s[1])+", "+Math.round(s[2])+")":"rgba("+Math.round(s[0])+", "+Math.round(s[1])+", "+Math.round(s[2])+", "+s[3]+")"},i.to.rgb.percent=function(){var s=ey(arguments),l=Math.round(s[0]/255*100),u=Math.round(s[1]/255*100),c=Math.round(s[2]/255*100);return s.length<4||s[3]===1?"rgb("+l+"%, "+u+"%, "+c+"%)":"rgba("+l+"%, "+u+"%, "+c+"%, "+s[3]+")"},i.to.hsl=function(){var s=ey(arguments);return s.length<4||s[3]===1?"hsl("+s[0]+", "+s[1]+"%, "+s[2]+"%)":"hsla("+s[0]+", "+s[1]+"%, "+s[2]+"%, "+s[3]+")"},i.to.hwb=function(){var s=ey(arguments),l="";return s.length>=4&&s[3]!==1&&(l=", "+s[3]),"hwb("+s[0]+", "+s[1]+"%, "+s[2]+"%"+l+")"},i.to.keyword=function(s){return e[s.slice(0,3)]};function a(s,l,u){return Math.min(Math.max(l,s),u)}function o(s){var l=Math.round(s).toString(16).toUpperCase();return l.length<2?"0"+l:l}});hd.to;hd.get;var vd={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},qi=Rr(function(r){var t={};for(var e in vd)vd.hasOwnProperty(e)&&(t[vd[e]]=e);var n=r.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var i in n)if(n.hasOwnProperty(i)){if(!("channels"in n[i]))throw new Error("missing channels property: "+i);if(!("labels"in n[i]))throw new Error("missing channel labels property: "+i);if(n[i].labels.length!==n[i].channels)throw new Error("channel and label counts mismatch: "+i);var a=n[i].channels,o=n[i].labels;delete n[i].channels,delete n[i].labels,Object.defineProperty(n[i],"channels",{value:a}),Object.defineProperty(n[i],"labels",{value:o})}n.rgb.hsl=function(l){var u=l[0]/255,c=l[1]/255,f=l[2]/255,d=Math.min(u,c,f),h=Math.max(u,c,f),v=h-d,p,g,m;return h===d?p=0:u===h?p=(c-f)/v:c===h?p=2+(f-u)/v:f===h&&(p=4+(u-c)/v),p=Math.min(p*60,360),p<0&&(p+=360),m=(d+h)/2,h===d?g=0:m<=.5?g=v/(h+d):g=v/(2-h-d),[p,g*100,m*100]},n.rgb.hsv=function(l){var u,c,f,d,h,v=l[0]/255,p=l[1]/255,g=l[2]/255,m=Math.max(v,p,g),y=m-Math.min(v,p,g),b=function(x){return(m-x)/6/y+1/2};return y===0?d=h=0:(h=y/m,u=b(v),c=b(p),f=b(g),v===m?d=f-c:p===m?d=1/3+u-f:g===m&&(d=2/3+c-u),d<0?d+=1:d>1&&(d-=1)),[d*360,h*100,m*100]},n.rgb.hwb=function(l){var u=l[0],c=l[1],f=l[2],d=n.rgb.hsl(l)[0],h=1/255*Math.min(u,Math.min(c,f));return f=1-1/255*Math.max(u,Math.max(c,f)),[d,h*100,f*100]},n.rgb.cmyk=function(l){var u=l[0]/255,c=l[1]/255,f=l[2]/255,d,h,v,p;return p=Math.min(1-u,1-c,1-f),d=(1-u-p)/(1-p)||0,h=(1-c-p)/(1-p)||0,v=(1-f-p)/(1-p)||0,[d*100,h*100,v*100,p*100]};function s(l,u){return Math.pow(l[0]-u[0],2)+Math.pow(l[1]-u[1],2)+Math.pow(l[2]-u[2],2)}n.rgb.keyword=function(l){var u=t[l];if(u)return u;var c=1/0,f;for(var d in vd)if(vd.hasOwnProperty(d)){var h=vd[d],v=s(l,h);v<c&&(c=v,f=d)}return f},n.keyword.rgb=function(l){return vd[l]},n.rgb.xyz=function(l){var u=l[0]/255,c=l[1]/255,f=l[2]/255;u=u>.04045?Math.pow((u+.055)/1.055,2.4):u/12.92,c=c>.04045?Math.pow((c+.055)/1.055,2.4):c/12.92,f=f>.04045?Math.pow((f+.055)/1.055,2.4):f/12.92;var d=u*.4124+c*.3576+f*.1805,h=u*.2126+c*.7152+f*.0722,v=u*.0193+c*.1192+f*.9505;return[d*100,h*100,v*100]},n.rgb.lab=function(l){var u=n.rgb.xyz(l),c=u[0],f=u[1],d=u[2],h,v,p;return c/=95.047,f/=100,d/=108.883,c=c>.008856?Math.pow(c,1/3):7.787*c+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,d=d>.008856?Math.pow(d,1/3):7.787*d+16/116,h=116*f-16,v=500*(c-f),p=200*(f-d),[h,v,p]},n.hsl.rgb=function(l){var u=l[0]/360,c=l[1]/100,f=l[2]/100,d,h,v,p,g;if(c===0)return g=f*255,[g,g,g];f<.5?h=f*(1+c):h=f+c-f*c,d=2*f-h,p=[0,0,0];for(var m=0;m<3;m++)v=u+1/3*-(m-1),v<0&&v++,v>1&&v--,6*v<1?g=d+(h-d)*6*v:2*v<1?g=h:3*v<2?g=d+(h-d)*(2/3-v)*6:g=d,p[m]=g*255;return p},n.hsl.hsv=function(l){var u=l[0],c=l[1]/100,f=l[2]/100,d=c,h=Math.max(f,.01),v,p;return f*=2,c*=f<=1?f:2-f,d*=h<=1?h:2-h,p=(f+c)/2,v=f===0?2*d/(h+d):2*c/(f+c),[u,v*100,p*100]},n.hsv.rgb=function(l){var u=l[0]/60,c=l[1]/100,f=l[2]/100,d=Math.floor(u)%6,h=u-Math.floor(u),v=255*f*(1-c),p=255*f*(1-c*h),g=255*f*(1-c*(1-h));switch(f*=255,d){case 0:return[f,g,v];case 1:return[p,f,v];case 2:return[v,f,g];case 3:return[v,p,f];case 4:return[g,v,f];case 5:return[f,v,p]}},n.hsv.hsl=function(l){var u=l[0],c=l[1]/100,f=l[2]/100,d=Math.max(f,.01),h,v,p;return p=(2-c)*f,h=(2-c)*d,v=c*d,v/=h<=1?h:2-h,v=v||0,p/=2,[u,v*100,p*100]},n.hwb.rgb=function(l){var u=l[0]/360,c=l[1]/100,f=l[2]/100,d=c+f,h,v,p,g;d>1&&(c/=d,f/=d),h=Math.floor(6*u),v=1-f,p=6*u-h,(h&1)!=0&&(p=1-p),g=c+p*(v-c);var m,y,b;switch(h){default:case 6:case 0:m=v,y=g,b=c;break;case 1:m=g,y=v,b=c;break;case 2:m=c,y=v,b=g;break;case 3:m=c,y=g,b=v;break;case 4:m=g,y=c,b=v;break;case 5:m=v,y=c,b=g;break}return[m*255,y*255,b*255]},n.cmyk.rgb=function(l){var u=l[0]/100,c=l[1]/100,f=l[2]/100,d=l[3]/100,h,v,p;return h=1-Math.min(1,u*(1-d)+d),v=1-Math.min(1,c*(1-d)+d),p=1-Math.min(1,f*(1-d)+d),[h*255,v*255,p*255]},n.xyz.rgb=function(l){var u=l[0]/100,c=l[1]/100,f=l[2]/100,d,h,v;return d=u*3.2406+c*-1.5372+f*-.4986,h=u*-.9689+c*1.8758+f*.0415,v=u*.0557+c*-.204+f*1.057,d=d>.0031308?1.055*Math.pow(d,1/2.4)-.055:d*12.92,h=h>.0031308?1.055*Math.pow(h,1/2.4)-.055:h*12.92,v=v>.0031308?1.055*Math.pow(v,1/2.4)-.055:v*12.92,d=Math.min(Math.max(0,d),1),h=Math.min(Math.max(0,h),1),v=Math.min(Math.max(0,v),1),[d*255,h*255,v*255]},n.xyz.lab=function(l){var u=l[0],c=l[1],f=l[2],d,h,v;return u/=95.047,c/=100,f/=108.883,u=u>.008856?Math.pow(u,1/3):7.787*u+16/116,c=c>.008856?Math.pow(c,1/3):7.787*c+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,d=116*c-16,h=500*(u-c),v=200*(c-f),[d,h,v]},n.lab.xyz=function(l){var u=l[0],c=l[1],f=l[2],d,h,v;h=(u+16)/116,d=c/500+h,v=h-f/200;var p=Math.pow(h,3),g=Math.pow(d,3),m=Math.pow(v,3);return h=p>.008856?p:(h-16/116)/7.787,d=g>.008856?g:(d-16/116)/7.787,v=m>.008856?m:(v-16/116)/7.787,d*=95.047,h*=100,v*=108.883,[d,h,v]},n.lab.lch=function(l){var u=l[0],c=l[1],f=l[2],d,h,v;return d=Math.atan2(f,c),h=d*360/2/Math.PI,h<0&&(h+=360),v=Math.sqrt(c*c+f*f),[u,v,h]},n.lch.lab=function(l){var u=l[0],c=l[1],f=l[2],d,h,v;return v=f/360*2*Math.PI,d=c*Math.cos(v),h=c*Math.sin(v),[u,d,h]},n.rgb.ansi16=function(l){var u=l[0],c=l[1],f=l[2],d=1 in arguments?arguments[1]:n.rgb.hsv(l)[2];if(d=Math.round(d/50),d===0)return 30;var h=30+(Math.round(f/255)<<2|Math.round(c/255)<<1|Math.round(u/255));return d===2&&(h+=60),h},n.hsv.ansi16=function(l){return n.rgb.ansi16(n.hsv.rgb(l),l[2])},n.rgb.ansi256=function(l){var u=l[0],c=l[1],f=l[2];if(u===c&&c===f)return u<8?16:u>248?231:Math.round((u-8)/247*24)+232;var d=16+36*Math.round(u/255*5)+6*Math.round(c/255*5)+Math.round(f/255*5);return d},n.ansi16.rgb=function(l){var u=l%10;if(u===0||u===7)return l>50&&(u+=3.5),u=u/10.5*255,[u,u,u];var c=(~~(l>50)+1)*.5,f=(u&1)*c*255,d=(u>>1&1)*c*255,h=(u>>2&1)*c*255;return[f,d,h]},n.ansi256.rgb=function(l){if(l>=232){var u=(l-232)*10+8;return[u,u,u]}l-=16;var c,f=Math.floor(l/36)/5*255,d=Math.floor((c=l%36)/6)/5*255,h=c%6/5*255;return[f,d,h]},n.rgb.hex=function(l){var u=((Math.round(l[0])&255)<<16)+((Math.round(l[1])&255)<<8)+(Math.round(l[2])&255),c=u.toString(16).toUpperCase();return"000000".substring(c.length)+c},n.hex.rgb=function(l){var u=l.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!u)return[0,0,0];var c=u[0];u[0].length===3&&(c=c.split("").map(function(p){return p+p}).join(""));var f=parseInt(c,16),d=f>>16&255,h=f>>8&255,v=f&255;return[d,h,v]},n.rgb.hcg=function(l){var u=l[0]/255,c=l[1]/255,f=l[2]/255,d=Math.max(Math.max(u,c),f),h=Math.min(Math.min(u,c),f),v=d-h,p,g;return v<1?p=h/(1-v):p=0,v<=0?g=0:d===u?g=(c-f)/v%6:d===c?g=2+(f-u)/v:g=4+(u-c)/v+4,g/=6,g%=1,[g*360,v*100,p*100]},n.hsl.hcg=function(l){var u=l[1]/100,c=l[2]/100,f=1,d=0;return c<.5?f=2*u*c:f=2*u*(1-c),f<1&&(d=(c-.5*f)/(1-f)),[l[0],f*100,d*100]},n.hsv.hcg=function(l){var u=l[1]/100,c=l[2]/100,f=u*c,d=0;return f<1&&(d=(c-f)/(1-f)),[l[0],f*100,d*100]},n.hcg.rgb=function(l){var u=l[0]/360,c=l[1]/100,f=l[2]/100;if(c===0)return[f*255,f*255,f*255];var d=[0,0,0],h=u%1*6,v=h%1,p=1-v,g=0;switch(Math.floor(h)){case 0:d[0]=1,d[1]=v,d[2]=0;break;case 1:d[0]=p,d[1]=1,d[2]=0;break;case 2:d[0]=0,d[1]=1,d[2]=v;break;case 3:d[0]=0,d[1]=p,d[2]=1;break;case 4:d[0]=v,d[1]=0,d[2]=1;break;default:d[0]=1,d[1]=0,d[2]=p}return g=(1-c)*f,[(c*d[0]+g)*255,(c*d[1]+g)*255,(c*d[2]+g)*255]},n.hcg.hsv=function(l){var u=l[1]/100,c=l[2]/100,f=u+c*(1-u),d=0;return f>0&&(d=u/f),[l[0],d*100,f*100]},n.hcg.hsl=function(l){var u=l[1]/100,c=l[2]/100,f=c*(1-u)+.5*u,d=0;return f>0&&f<.5?d=u/(2*f):f>=.5&&f<1&&(d=u/(2*(1-f))),[l[0],d*100,f*100]},n.hcg.hwb=function(l){var u=l[1]/100,c=l[2]/100,f=u+c*(1-u);return[l[0],(f-u)*100,(1-f)*100]},n.hwb.hcg=function(l){var u=l[1]/100,c=l[2]/100,f=1-c,d=f-u,h=0;return d<1&&(h=(f-d)/(1-d)),[l[0],d*100,h*100]},n.apple.rgb=function(l){return[l[0]/65535*255,l[1]/65535*255,l[2]/65535*255]},n.rgb.apple=function(l){return[l[0]/255*65535,l[1]/255*65535,l[2]/255*65535]},n.gray.rgb=function(l){return[l[0]/100*255,l[0]/100*255,l[0]/100*255]},n.gray.hsl=n.gray.hsv=function(l){return[0,0,l[0]]},n.gray.hwb=function(l){return[0,100,l[0]]},n.gray.cmyk=function(l){return[0,0,0,l[0]]},n.gray.lab=function(l){return[l[0],0,0]},n.gray.hex=function(l){var u=Math.round(l[0]/100*255)&255,c=(u<<16)+(u<<8)+u,f=c.toString(16).toUpperCase();return"000000".substring(f.length)+f},n.rgb.gray=function(l){var u=(l[0]+l[1]+l[2])/3;return[u/255*100]}});qi.rgb;qi.hsl;qi.hsv;qi.hwb;qi.cmyk;qi.xyz;qi.lab;qi.lch;qi.hex;qi.keyword;qi.ansi16;qi.ansi256;qi.hcg;qi.apple;qi.gray;function Sge(){for(var r={},t=Object.keys(qi),e=t.length,n=0;n<e;n++)r[t[n]]={distance:-1,parent:null};return r}function Cge(r){var t=Sge(),e=[r];for(t[r].distance=0;e.length;)for(var n=e.pop(),i=Object.keys(qi[n]),a=i.length,o=0;o<a;o++){var s=i[o],l=t[s];l.distance===-1&&(l.distance=t[n].distance+1,l.parent=n,e.unshift(s))}return t}function Ege(r,t){return function(e){return t(r(e))}}function _ge(r,t){for(var e=[t[r].parent,r],n=qi[t[r].parent][r],i=t[r].parent;t[i].parent;)e.unshift(t[i].parent),n=Ege(qi[t[i].parent][i],n),i=t[i].parent;return n.conversion=e,n}var Tge=function(r){for(var t=Cge(r),e={},n=Object.keys(t),i=n.length,a=0;a<i;a++){var o=n[a],s=t[o];s.parent!==null&&(e[o]=_ge(o,t))}return e},Bv={},Age=Object.keys(qi);function Mge(r){var t=function(e){return e==null?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),r(e))};return"conversion"in r&&(t.conversion=r.conversion),t}function kge(r){var t=function(e){if(e==null)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var n=r(e);if(typeof n=="object")for(var i=n.length,a=0;a<i;a++)n[a]=Math.round(n[a]);return n};return"conversion"in r&&(t.conversion=r.conversion),t}Age.forEach(function(r){Bv[r]={},Object.defineProperty(Bv[r],"channels",{value:qi[r].channels}),Object.defineProperty(Bv[r],"labels",{value:qi[r].labels});var t=Tge(r),e=Object.keys(t);e.forEach(function(n){var i=t[n];Bv[r][n]=kge(i),Bv[r][n].raw=Mge(i)})});var ls=Bv,YA=[].slice,H4=["keyword","gray","hex"],XA={};Object.keys(ls).forEach(function(r){XA[YA.call(ls[r].labels).sort().join("")]=r});var K1={};function Ya(r,t){if(!(this instanceof Ya))return new Ya(r,t);if(t&&t in H4&&(t=null),t&&!(t in ls))throw new Error("Unknown model: "+t);var e,n;if(r==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(r instanceof Ya)this.model=r.model,this.color=r.color.slice(),this.valpha=r.valpha;else if(typeof r=="string"){var i=hd.get(r);if(i===null)throw new Error("Unable to parse color from string: "+r);this.model=i.model,n=ls[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(r.length){this.model=t||"rgb",n=ls[this.model].channels;var a=YA.call(r,0,n);this.color=qA(a,n),this.valpha=typeof r[n]=="number"?r[n]:1}else if(typeof r=="number")r&=16777215,this.model="rgb",this.color=[r>>16&255,r>>8&255,r&255],this.valpha=1;else{this.valpha=1;var o=Object.keys(r);"alpha"in r&&(o.splice(o.indexOf("alpha"),1),this.valpha=typeof r.alpha=="number"?r.alpha:0);var s=o.sort().join("");if(!(s in XA))throw new Error("Unable to parse color from object: "+JSON.stringify(r));this.model=XA[s];var l=ls[this.model].labels,u=[];for(e=0;e<l.length;e++)u.push(r[l[e]]);this.color=qA(u)}if(K1[this.model])for(n=ls[this.model].channels,e=0;e<n;e++){var c=K1[this.model][e];c&&(this.color[e]=c(this.color[e]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Ya.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(r){var t=this.model in hd.to?this:this.rgb();t=t.round(typeof r=="number"?r:1);var e=t.valpha===1?t.color:t.color.concat(this.valpha);return hd.to[t.model](e)},percentString:function(r){var t=this.rgb().round(typeof r=="number"?r:1),e=t.valpha===1?t.color:t.color.concat(this.valpha);return hd.to.rgb.percent(e)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var r={},t=ls[this.model].channels,e=ls[this.model].labels,n=0;n<t;n++)r[e[n]]=this.color[n];return this.valpha!==1&&(r.alpha=this.valpha),r},unitArray:function(){var r=this.rgb().color;return r[0]/=255,r[1]/=255,r[2]/=255,this.valpha!==1&&r.push(this.valpha),r},unitObject:function(){var r=this.rgb().object();return r.r/=255,r.g/=255,r.b/=255,this.valpha!==1&&(r.alpha=this.valpha),r},round:function(r){return r=Math.max(r||0,0),new Ya(this.color.map(Pge(r)).concat(this.valpha),this.model)},alpha:function(r){return arguments.length?new Ya(this.color.concat(Math.max(0,Math.min(1,r))),this.model):this.valpha},red:Ki("rgb",0,ya(255)),green:Ki("rgb",1,ya(255)),blue:Ki("rgb",2,ya(255)),hue:Ki(["hsl","hsv","hsl","hwb","hcg"],0,function(r){return(r%360+360)%360}),saturationl:Ki("hsl",1,ya(100)),lightness:Ki("hsl",2,ya(100)),saturationv:Ki("hsv",1,ya(100)),value:Ki("hsv",2,ya(100)),chroma:Ki("hcg",1,ya(100)),gray:Ki("hcg",2,ya(100)),white:Ki("hwb",1,ya(100)),wblack:Ki("hwb",2,ya(100)),cyan:Ki("cmyk",0,ya(100)),magenta:Ki("cmyk",1,ya(100)),yellow:Ki("cmyk",2,ya(100)),black:Ki("cmyk",3,ya(100)),x:Ki("xyz",0,ya(100)),y:Ki("xyz",1,ya(100)),z:Ki("xyz",2,ya(100)),l:Ki("lab",0,ya(100)),a:Ki("lab",1),b:Ki("lab",2),keyword:function(r){return arguments.length?new Ya(r):ls[this.model].keyword(this.color)},hex:function(r){return arguments.length?new Ya(r):hd.to.hex(this.rgb().round().color)},rgbNumber:function(){var r=this.rgb().color;return(r[0]&255)<<16|(r[1]&255)<<8|r[2]&255},luminosity:function(){for(var r=this.rgb().color,t=[],e=0;e<r.length;e++){var n=r[e]/255;t[e]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(r){var t=this.luminosity(),e=r.luminosity();return t>e?(t+.05)/(e+.05):(e+.05)/(t+.05)},level:function(r){var t=this.contrast(r);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var r=this.rgb().color,t=(r[0]*299+r[1]*587+r[2]*114)/1e3;return t<128},isLight:function(){return!this.isDark()},negate:function(){for(var r=this.rgb(),t=0;t<3;t++)r.color[t]=255-r.color[t];return r},lighten:function(r){var t=this.hsl();return t.color[2]+=t.color[2]*r,t},darken:function(r){var t=this.hsl();return t.color[2]-=t.color[2]*r,t},saturate:function(r){var t=this.hsl();return t.color[1]+=t.color[1]*r,t},desaturate:function(r){var t=this.hsl();return t.color[1]-=t.color[1]*r,t},whiten:function(r){var t=this.hwb();return t.color[1]+=t.color[1]*r,t},blacken:function(r){var t=this.hwb();return t.color[2]+=t.color[2]*r,t},grayscale:function(){var r=this.rgb().color,t=r[0]*.3+r[1]*.59+r[2]*.11;return Ya.rgb(t,t,t)},fade:function(r){return this.alpha(this.valpha-this.valpha*r)},opaquer:function(r){return this.alpha(this.valpha+this.valpha*r)},rotate:function(r){var t=this.hsl(),e=t.color[0];return e=(e+r)%360,e=e<0?360+e:e,t.color[0]=e,t},mix:function(r,t){if(!r||!r.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof r);var e=r.rgb(),n=this.rgb(),i=t===void 0?.5:t,a=2*i-1,o=e.alpha()-n.alpha(),s=((a*o==-1?a:(a+o)/(1+a*o))+1)/2,l=1-s;return Ya.rgb(s*e.red()+l*n.red(),s*e.green()+l*n.green(),s*e.blue()+l*n.blue(),e.alpha()*i+n.alpha()*(1-i))}};Object.keys(ls).forEach(function(r){if(H4.indexOf(r)===-1){var t=ls[r].channels;Ya.prototype[r]=function(){if(this.model===r)return new Ya(this);if(arguments.length)return new Ya(arguments,r);var e=typeof arguments[t]=="number"?t:this.valpha;return new Ya(Dge(ls[this.model][r].raw(this.color)).concat(e),r)},Ya[r]=function(e){return typeof e=="number"&&(e=qA(YA.call(arguments),t)),new Ya(e,r)}}});function Ige(r,t){return Number(r.toFixed(t))}function Pge(r){return function(t){return Ige(t,r)}}function Ki(r,t,e){return r=Array.isArray(r)?r:[r],r.forEach(function(n){(K1[n]||(K1[n]=[]))[t]=e}),r=r[0],function(n){var i;return arguments.length?(e&&(n=e(n)),i=this[r](),i.color[t]=n,i):(i=this[r]().color[t],e&&(i=e(i)),i)}}function ya(r){return function(t){return Math.max(0,Math.min(r,t))}}function Dge(r){return Array.isArray(r)?r:[r]}function qA(r,t){for(var e=0;e<t;e++)typeof r[e]!="number"&&(r[e]=0);return r}var ty=Ya,Z1=Rr(function(r){(function(t){var e=/^\s+/,n=/\s+$/,i=0,a=t.round,o=t.min,s=t.max,l=t.random;function u(D,z){if(D=D||"",z=z||{},D instanceof u)return D;if(!(this instanceof u))return new u(D,z);var H=c(D);this._originalInput=D,this._r=H.r,this._g=H.g,this._b=H.b,this._a=H.a,this._roundA=a(100*this._a)/100,this._format=z.format||H.format,this._gradientType=z.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=H.ok,this._tc_id=i++}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var D=this.toRgb();return(D.r*299+D.g*587+D.b*114)/1e3},getLuminance:function(){var D=this.toRgb(),z,H,he,te,ge,Qe;return z=D.r/255,H=D.g/255,he=D.b/255,z<=.03928?te=z/12.92:te=t.pow((z+.055)/1.055,2.4),H<=.03928?ge=H/12.92:ge=t.pow((H+.055)/1.055,2.4),he<=.03928?Qe=he/12.92:Qe=t.pow((he+.055)/1.055,2.4),.2126*te+.7152*ge+.0722*Qe},setAlpha:function(D){return this._a=B(D),this._roundA=a(100*this._a)/100,this},toHsv:function(){var D=v(this._r,this._g,this._b);return{h:D.h*360,s:D.s,v:D.v,a:this._a}},toHsvString:function(){var D=v(this._r,this._g,this._b),z=a(D.h*360),H=a(D.s*100),he=a(D.v*100);return this._a==1?"hsv("+z+", "+H+"%, "+he+"%)":"hsva("+z+", "+H+"%, "+he+"%, "+this._roundA+")"},toHsl:function(){var D=d(this._r,this._g,this._b);return{h:D.h*360,s:D.s,l:D.l,a:this._a}},toHslString:function(){var D=d(this._r,this._g,this._b),z=a(D.h*360),H=a(D.s*100),he=a(D.l*100);return this._a==1?"hsl("+z+", "+H+"%, "+he+"%)":"hsla("+z+", "+H+"%, "+he+"%, "+this._roundA+")"},toHex:function(D){return g(this._r,this._g,this._b,D)},toHexString:function(D){return"#"+this.toHex(D)},toHex8:function(D){return m(this._r,this._g,this._b,this._a,D)},toHex8String:function(D){return"#"+this.toHex8(D)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(U(this._r,255)*100)+"%",g:a(U(this._g,255)*100)+"%",b:a(U(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+a(U(this._r,255)*100)+"%, "+a(U(this._g,255)*100)+"%, "+a(U(this._b,255)*100)+"%)":"rgba("+a(U(this._r,255)*100)+"%, "+a(U(this._g,255)*100)+"%, "+a(U(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:L[g(this._r,this._g,this._b,!0)]||!1},toFilter:function(D){var z="#"+y(this._r,this._g,this._b,this._a),H=z,he=this._gradientType?"GradientType = 1, ":"";if(D){var te=u(D);H="#"+y(te._r,te._g,te._b,te._a)}return"progid:DXImageTransform.Microsoft.gradient("+he+"startColorstr="+z+",endColorstr="+H+")"},toString:function(D){var z=!!D;D=D||this._format;var H=!1,he=this._a<1&&this._a>=0,te=!z&&he&&(D==="hex"||D==="hex6"||D==="hex3"||D==="hex4"||D==="hex8"||D==="name");return te?D==="name"&&this._a===0?this.toName():this.toRgbString():(D==="rgb"&&(H=this.toRgbString()),D==="prgb"&&(H=this.toPercentageRgbString()),(D==="hex"||D==="hex6")&&(H=this.toHexString()),D==="hex3"&&(H=this.toHexString(!0)),D==="hex4"&&(H=this.toHex8String(!0)),D==="hex8"&&(H=this.toHex8String()),D==="name"&&(H=this.toName()),D==="hsl"&&(H=this.toHslString()),D==="hsv"&&(H=this.toHsvString()),H||this.toHexString())},clone:function(){return u(this.toString())},_applyModification:function(D,z){var H=D.apply(null,[this].concat([].slice.call(z)));return this._r=H._r,this._g=H._g,this._b=H._b,this.setAlpha(H._a),this},lighten:function(){return this._applyModification(S,arguments)},brighten:function(){return this._applyModification(C,arguments)},darken:function(){return this._applyModification(_,arguments)},desaturate:function(){return this._applyModification(b,arguments)},saturate:function(){return this._applyModification(x,arguments)},greyscale:function(){return this._applyModification(w,arguments)},spin:function(){return this._applyModification(T,arguments)},_applyCombination:function(D,z){return D.apply(null,[this].concat([].slice.call(z)))},analogous:function(){return this._applyCombination(F,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination($,arguments)},splitcomplement:function(){return this._applyCombination(P,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},u.fromRatio=function(D,z){if(typeof D=="object"){var H={};for(var he in D)D.hasOwnProperty(he)&&(he==="a"?H[he]=D[he]:H[he]=fe(D[he]));D=H}return u(D,z)};function c(D){var z={r:0,g:0,b:0},H=1,he=null,te=null,ge=null,Qe=!1,Ve=!1;return typeof D=="string"&&(D=je(D)),typeof D=="object"&&(De(D.r)&&De(D.g)&&De(D.b)?(z=f(D.r,D.g,D.b),Qe=!0,Ve=String(D.r).substr(-1)==="%"?"prgb":"rgb"):De(D.h)&&De(D.s)&&De(D.v)?(he=fe(D.s),te=fe(D.v),z=p(D.h,he,te),Qe=!0,Ve="hsv"):De(D.h)&&De(D.s)&&De(D.l)&&(he=fe(D.s),ge=fe(D.l),z=h(D.h,he,ge),Qe=!0,Ve="hsl"),D.hasOwnProperty("a")&&(H=D.a)),H=B(H),{ok:Qe,format:D.format||Ve,r:o(255,s(z.r,0)),g:o(255,s(z.g,0)),b:o(255,s(z.b,0)),a:H}}function f(D,z,H){return{r:U(D,255)*255,g:U(z,255)*255,b:U(H,255)*255}}function d(D,z,H){D=U(D,255),z=U(z,255),H=U(H,255);var he=s(D,z,H),te=o(D,z,H),ge,Qe,Ve=(he+te)/2;if(he==te)ge=Qe=0;else{var Ie=he-te;switch(Qe=Ve>.5?Ie/(2-he-te):Ie/(he+te),he){case D:ge=(z-H)/Ie+(z<H?6:0);break;case z:ge=(H-D)/Ie+2;break;case H:ge=(D-z)/Ie+4;break}ge/=6}return{h:ge,s:Qe,l:Ve}}function h(D,z,H){var he,te,ge;D=U(D,360),z=U(z,100),H=U(H,100);function Qe(Be,V,j){return j<0&&(j+=1),j>1&&(j-=1),j<1/6?Be+(V-Be)*6*j:j<1/2?V:j<2/3?Be+(V-Be)*(2/3-j)*6:Be}if(z===0)he=te=ge=H;else{var Ve=H<.5?H*(1+z):H+z-H*z,Ie=2*H-Ve;he=Qe(Ie,Ve,D+1/3),te=Qe(Ie,Ve,D),ge=Qe(Ie,Ve,D-1/3)}return{r:he*255,g:te*255,b:ge*255}}function v(D,z,H){D=U(D,255),z=U(z,255),H=U(H,255);var he=s(D,z,H),te=o(D,z,H),ge,Qe,Ve=he,Ie=he-te;if(Qe=he===0?0:Ie/he,he==te)ge=0;else{switch(he){case D:ge=(z-H)/Ie+(z<H?6:0);break;case z:ge=(H-D)/Ie+2;break;case H:ge=(D-z)/Ie+4;break}ge/=6}return{h:ge,s:Qe,v:Ve}}function p(D,z,H){D=U(D,360)*6,z=U(z,100),H=U(H,100);var he=t.floor(D),te=D-he,ge=H*(1-z),Qe=H*(1-te*z),Ve=H*(1-(1-te)*z),Ie=he%6,Be=[H,Qe,ge,ge,Ve,H][Ie],V=[Ve,H,H,Qe,ge,ge][Ie],j=[ge,ge,Ve,H,H,Qe][Ie];return{r:Be*255,g:V*255,b:j*255}}function g(D,z,H,he){var te=[Y(a(D).toString(16)),Y(a(z).toString(16)),Y(a(H).toString(16))];return he&&te[0].charAt(0)==te[0].charAt(1)&&te[1].charAt(0)==te[1].charAt(1)&&te[2].charAt(0)==te[2].charAt(1)?te[0].charAt(0)+te[1].charAt(0)+te[2].charAt(0):te.join("")}function m(D,z,H,he,te){var ge=[Y(a(D).toString(16)),Y(a(z).toString(16)),Y(a(H).toString(16)),Y(le(he))];return te&&ge[0].charAt(0)==ge[0].charAt(1)&&ge[1].charAt(0)==ge[1].charAt(1)&&ge[2].charAt(0)==ge[2].charAt(1)&&ge[3].charAt(0)==ge[3].charAt(1)?ge[0].charAt(0)+ge[1].charAt(0)+ge[2].charAt(0)+ge[3].charAt(0):ge.join("")}function y(D,z,H,he){var te=[Y(le(he)),Y(a(D).toString(16)),Y(a(z).toString(16)),Y(a(H).toString(16))];return te.join("")}u.equals=function(D,z){return!D||!z?!1:u(D).toRgbString()==u(z).toRgbString()},u.random=function(){return u.fromRatio({r:l(),g:l(),b:l()})};function b(D,z){z=z===0?0:z||10;var H=u(D).toHsl();return H.s-=z/100,H.s=W(H.s),u(H)}function x(D,z){z=z===0?0:z||10;var H=u(D).toHsl();return H.s+=z/100,H.s=W(H.s),u(H)}function w(D){return u(D).desaturate(100)}function S(D,z){z=z===0?0:z||10;var H=u(D).toHsl();return H.l+=z/100,H.l=W(H.l),u(H)}function C(D,z){z=z===0?0:z||10;var H=u(D).toRgb();return H.r=s(0,o(255,H.r-a(255*-(z/100)))),H.g=s(0,o(255,H.g-a(255*-(z/100)))),H.b=s(0,o(255,H.b-a(255*-(z/100)))),u(H)}function _(D,z){z=z===0?0:z||10;var H=u(D).toHsl();return H.l-=z/100,H.l=W(H.l),u(H)}function T(D,z){var H=u(D).toHsl(),he=(H.h+z)%360;return H.h=he<0?360+he:he,u(H)}function E(D){var z=u(D).toHsl();return z.h=(z.h+180)%360,u(z)}function M(D){var z=u(D).toHsl(),H=z.h;return[u(D),u({h:(H+120)%360,s:z.s,l:z.l}),u({h:(H+240)%360,s:z.s,l:z.l})]}function k(D){var z=u(D).toHsl(),H=z.h;return[u(D),u({h:(H+90)%360,s:z.s,l:z.l}),u({h:(H+180)%360,s:z.s,l:z.l}),u({h:(H+270)%360,s:z.s,l:z.l})]}function P(D){var z=u(D).toHsl(),H=z.h;return[u(D),u({h:(H+72)%360,s:z.s,l:z.l}),u({h:(H+216)%360,s:z.s,l:z.l})]}function F(D,z,H){z=z||6,H=H||30;var he=u(D).toHsl(),te=360/H,ge=[u(D)];for(he.h=(he.h-(te*z>>1)+720)%360;--z;)he.h=(he.h+te)%360,ge.push(u(he));return ge}function $(D,z){z=z||6;for(var H=u(D).toHsv(),he=H.h,te=H.s,ge=H.v,Qe=[],Ve=1/z;z--;)Qe.push(u({h:he,s:te,v:ge})),ge=(ge+Ve)%1;return Qe}u.mix=function(D,z,H){H=H===0?0:H||50;var he=u(D).toRgb(),te=u(z).toRgb(),ge=H/100,Qe={r:(te.r-he.r)*ge+he.r,g:(te.g-he.g)*ge+he.g,b:(te.b-he.b)*ge+he.b,a:(te.a-he.a)*ge+he.a};return u(Qe)},u.readability=function(D,z){var H=u(D),he=u(z);return(t.max(H.getLuminance(),he.getLuminance())+.05)/(t.min(H.getLuminance(),he.getLuminance())+.05)},u.isReadable=function(D,z,H){var he=u.readability(D,z),te,ge;switch(ge=!1,te=ke(H),te.level+te.size){case"AAsmall":case"AAAlarge":ge=he>=4.5;break;case"AAlarge":ge=he>=3;break;case"AAAsmall":ge=he>=7;break}return ge},u.mostReadable=function(D,z,H){var he=null,te=0,ge,Qe,Ve,Ie;H=H||{},Qe=H.includeFallbackColors,Ve=H.level,Ie=H.size;for(var Be=0;Be<z.length;Be++)ge=u.readability(D,z[Be]),ge>te&&(te=ge,he=u(z[Be]));return u.isReadable(D,he,{level:Ve,size:Ie})||!Qe?he:(H.includeFallbackColors=!1,u.mostReadable(D,["#fff","#000"],H))};var R=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},L=u.hexNames=O(R);function O(D){var z={};for(var H in D)D.hasOwnProperty(H)&&(z[D[H]]=H);return z}function B(D){return D=parseFloat(D),(isNaN(D)||D<0||D>1)&&(D=1),D}function U(D,z){ae(D)&&(D="100%");var H=Z(D);return D=o(z,s(0,parseFloat(D))),H&&(D=parseInt(D*z,10)/100),t.abs(D-z)<1e-6?1:D%z/parseFloat(z)}function W(D){return o(1,s(0,D))}function X(D){return parseInt(D,16)}function ae(D){return typeof D=="string"&&D.indexOf(".")!=-1&&parseFloat(D)===1}function Z(D){return typeof D=="string"&&D.indexOf("%")!=-1}function Y(D){return D.length==1?"0"+D:""+D}function fe(D){return D<=1&&(D=D*100+"%"),D}function le(D){return t.round(parseFloat(D)*255).toString(16)}function ue(D){return X(D)/255}var Ee=function(){var D="[-\\+]?\\d+%?",z="[-\\+]?\\d*\\.\\d+%?",H="(?:"+z+")|(?:"+D+")",he="[\\s|\\(]+("+H+")[,|\\s]+("+H+")[,|\\s]+("+H+")\\s*\\)?",te="[\\s|\\(]+("+H+")[,|\\s]+("+H+")[,|\\s]+("+H+")[,|\\s]+("+H+")\\s*\\)?";return{CSS_UNIT:new RegExp(H),rgb:new RegExp("rgb"+he),rgba:new RegExp("rgba"+te),hsl:new RegExp("hsl"+he),hsla:new RegExp("hsla"+te),hsv:new RegExp("hsv"+he),hsva:new RegExp("hsva"+te),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function De(D){return!!Ee.CSS_UNIT.exec(D)}function je(D){D=D.replace(e,"").replace(n,"").toLowerCase();var z=!1;if(R[D])D=R[D],z=!0;else if(D=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var H;return(H=Ee.rgb.exec(D))?{r:H[1],g:H[2],b:H[3]}:(H=Ee.rgba.exec(D))?{r:H[1],g:H[2],b:H[3],a:H[4]}:(H=Ee.hsl.exec(D))?{h:H[1],s:H[2],l:H[3]}:(H=Ee.hsla.exec(D))?{h:H[1],s:H[2],l:H[3],a:H[4]}:(H=Ee.hsv.exec(D))?{h:H[1],s:H[2],v:H[3]}:(H=Ee.hsva.exec(D))?{h:H[1],s:H[2],v:H[3],a:H[4]}:(H=Ee.hex8.exec(D))?{r:X(H[1]),g:X(H[2]),b:X(H[3]),a:ue(H[4]),format:z?"name":"hex8"}:(H=Ee.hex6.exec(D))?{r:X(H[1]),g:X(H[2]),b:X(H[3]),format:z?"name":"hex"}:(H=Ee.hex4.exec(D))?{r:X(H[1]+""+H[1]),g:X(H[2]+""+H[2]),b:X(H[3]+""+H[3]),a:ue(H[4]+""+H[4]),format:z?"name":"hex8"}:(H=Ee.hex3.exec(D))?{r:X(H[1]+""+H[1]),g:X(H[2]+""+H[2]),b:X(H[3]+""+H[3]),format:z?"name":"hex"}:!1}function ke(D){var z,H;return D=D||{level:"AA",size:"small"},z=(D.level||"AA").toUpperCase(),H=(D.size||"small").toLowerCase(),z!=="AA"&&z!=="AAA"&&(z="AA"),H!=="small"&&H!=="large"&&(H="small"),{level:z,size:H}}r.exports?r.exports=u:window.tinycolor=u})(Math)}),Q1=2,W4=.16,Rge=.05,Oge=.05,Lge=.15,j4=5,Y4=4,Fge=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function X4(r,t,e){var n;return Math.round(r.h)>=60&&Math.round(r.h)<=240?n=e?Math.round(r.h)-Q1*t:Math.round(r.h)+Q1*t:n=e?Math.round(r.h)+Q1*t:Math.round(r.h)-Q1*t,n<0?n+=360:n>=360&&(n-=360),n}function q4(r,t,e){if(r.h===0&&r.s===0)return r.s;var n;return e?n=r.s-W4*t:t===Y4?n=r.s+W4:n=r.s+Rge*t,n>1&&(n=1),e&&t===j4&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2))}function K4(r,t,e){var n;return e?n=r.v+Oge*t:n=r.v-Lge*t,n>1&&(n=1),Number(n.toFixed(2))}function J1(r){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=[],n=Z1(r),i=j4;i>0;i-=1){var a=n.toHsv(),o=Z1({h:X4(a,i,!0),s:q4(a,i,!0),v:K4(a,i,!0)}).toHexString();e.push(o)}e.push(n.toHexString());for(var s=1;s<=Y4;s+=1){var l=n.toHsv(),u=Z1({h:X4(l,s),s:q4(l,s),v:K4(l,s)}).toHexString();e.push(u)}return t.theme==="dark"?Fge.map(function(c){var f=c.index,d=c.opacity,h=Z1.mix(t.backgroundColor||"#141414",e[f],d*100).toHexString();return h}):e}var KA={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},lo={},ZA={};Object.keys(KA).forEach(function(r){lo[r]=J1(KA[r]),lo[r].primary=lo[r][5],ZA[r]=J1(KA[r],{theme:"dark",backgroundColor:"#141414"}),ZA[r].primary=ZA[r][5]});lo.red;lo.volcano;lo.gold;lo.orange;lo.yellow;lo.lime;lo.green;lo.cyan;lo.blue;lo.geekblue;lo.purple;lo.magenta;lo.grey;var ba=function(t,e,n){var i=ty(t),a=ty(e);return ty([(1-n)*i.red()+n*a.red(),(1-n)*i.green()+n*a.green(),(1-n)*i.blue()+n*a.blue()]).rgb()},Nge=function(t,e,n){e===void 0&&(e="#fff"),n===void 0&&(n="rgb(150, 150, 150)");var i=ba(e,t,.05).rgb().toString(),a=ba(e,t,.1).rgb().toString(),o=ba(e,t,.2).rgb().toString(),s=ba(e,t,.4).rgb().toString(),l=ba(e,n,.02).rgb().toString(),u=ba(e,n,.05).rgb().toString(),c=ba(e,n,.1).rgb().toString(),f=ba(e,n,.2).rgb().toString(),d=ba(e,n,.3).rgb().toString(),h=J1(t,{theme:"default",backgroundColor:e}),v=ty(t).hex().toLowerCase(),p=h.indexOf(v),g=t;return p!==-1&&(g=h[p+1]),{mainStroke:t,mainFill:a,activeStroke:t,activeFill:i,inactiveStroke:s,inactiveFill:i,selectedStroke:t,selectedFill:e,highlightStroke:g,highlightFill:o,disableStroke:d,disableFill:u,edgeMainStroke:d,edgeActiveStroke:t,edgeInactiveStroke:f,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:c,comboMainStroke:d,comboMainFill:l,comboActiveStroke:t,comboActiveFill:i,comboInactiveStroke:d,comboInactiveFill:l,comboSelectedStroke:t,comboSelectedFill:l,comboHighlightStroke:g,comboHighlightFill:l,comboDisableStroke:f,comboDisableFill:u}},Bge=function(t,e,n){e===void 0&&(e="#fff"),n===void 0&&(n="#777");var i=ba(e,t,.2).rgb().toString(),a=ba(e,t,.3).rgb().toString(),o=ba(e,t,.6).rgb().toString(),s=ba(e,t,.8).rgb().toString(),l=ba(e,n,.2).rgb().toString(),u=ba(e,n,.25).rgb().toString(),c=ba(e,n,.3).rgb().toString(),f=ba(e,n,.4).rgb().toString(),d=ba(e,n,.5).rgb().toString(),h=J1(t,{theme:"dark",backgroundColor:e}),v=ty(t).hex().toLowerCase(),p=h.indexOf(v),g=t;return p!==-1&&(g=h[p+1]),{mainStroke:s,mainFill:i,activeStroke:t,activeFill:a,inactiveStroke:s,inactiveFill:i,selectedStroke:t,selectedFill:i,highlightStroke:t,highlightFill:o,disableStroke:d,disableFill:u,edgeMainStroke:n,edgeActiveStroke:t,edgeInactiveStroke:n,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:c,comboMainStroke:f,comboMainFill:u,comboActiveStroke:t,comboActiveFill:l,comboInactiveStroke:f,comboInactiveFill:u,comboSelectedStroke:t,comboSelectedFill:l,comboHighlightStroke:g,comboHighlightFill:u,comboDisableStroke:f,comboDisableFill:l}},QA=function(t,e,n,i){return e===void 0&&(e="#fff"),n===void 0&&(n="default"),n==="default"?Nge(t,e,"rgb(150, 150, 150)"):Bge(t,e,"#777")},$ge=function(t,e,n,i){e===void 0&&(e="#fff"),n===void 0&&(n="default");var a=[];return t.forEach(function(o){a.push(QA(o,e,n))}),a},zge=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",mixColor:ba,getColorsWithSubjectColor:QA,getColorSetsBySubjectColors:$ge}),Gge="rgb(95, 149, 255)",Uge="rgb(255, 255, 255)",Z4="rgb(0, 0, 0)",sn=QA(Gge,Uge),pd={version:"0.5.0",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:sn.mainStroke,fill:sn.mainFill},size:20,color:sn.mainStroke,linkPoints:{size:8,lineWidth:1,fill:sn.activeFill,stroke:sn.activeStroke}},nodeStateStyles:{active:{fill:sn.activeFill,stroke:sn.activeStroke,lineWidth:2,shadowColor:sn.mainStroke,shadowBlur:10},selected:{fill:sn.selectedFill,stroke:sn.selectedStroke,lineWidth:4,shadowColor:sn.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:sn.highlightFill,stroke:sn.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:sn.inactiveFill,stroke:sn.inactiveStroke,lineWidth:1},disable:{fill:sn.disableFill,stroke:sn.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:Z4,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:sn.edgeMainStroke,lineAppendWidth:2},color:sn.edgeMainStroke},edgeStateStyles:{active:{stroke:sn.edgeActiveStroke,lineWidth:1},selected:{stroke:sn.edgeSelectedStroke,lineWidth:2,shadowColor:sn.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:sn.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:sn.edgeInactiveStroke,lineWidth:1},disable:{stroke:sn.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:Z4,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:sn.comboMainFill,lineWidth:1,stroke:sn.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:sn.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:sn.comboActiveStroke,lineWidth:1,fill:sn.comboActiveFill},selected:{stroke:sn.comboSelectedStroke,lineWidth:2,fill:sn.comboSelectedFill,shadowColor:sn.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:sn.comboHighlightStroke,lineWidth:2,fill:sn.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:sn.comboInactiveStroke,fill:sn.comboInactiveFill,lineWidth:1},disable:{stroke:sn.comboDisableStroke,fill:sn.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function Js(r,t,e){if(r){if(typeof r.addEventListener=="function")return r.addEventListener(t,e,!1),{remove:function(){r.removeEventListener(t,e,!1)}};if(typeof r.attachEvent=="function")return r.attachEvent("on"+t,e),{remove:function(){r.detachEvent("on"+t,e)}}}}var ry,JA,Q4,eM;function Vge(){ry=document.createElement("table"),JA=document.createElement("tr"),Q4=/^\s*<(\w+|!)[^>]*>/,eM={tr:document.createElement("tbody"),tbody:ry,thead:ry,tfoot:ry,td:JA,th:JA,"*":document.createElement("div")}}function Vn(r){ry||Vge();var t=Q4.test(r)&&RegExp.$1;(!t||!(t in eM))&&(t="*");var e=eM[t];r=r.replace(/(^\s*)|(\s*$)/g,""),e.innerHTML=""+r;var n=e.childNodes[0];return e.removeChild(n),n}function Oo(r,t,e){var n;try{n=window.getComputedStyle?window.getComputedStyle(r,null)[t]:r.style[t]}catch{}finally{n=n===void 0?e:n}return n}function Hge(r,t){var e=Oo(r,"height",t);return e==="auto"&&(e=r.offsetHeight),parseFloat(e)}function Wge(r,t){var e=Hge(r,t),n=parseFloat(Oo(r,"borderTopWidth"))||0,i=parseFloat(Oo(r,"paddingTop"))||0,a=parseFloat(Oo(r,"paddingBottom"))||0,o=parseFloat(Oo(r,"borderBottomWidth"))||0,s=parseFloat(Oo(r,"marginTop"))||0,l=parseFloat(Oo(r,"marginBottom"))||0;return e+n+o+i+a+s+l}function jge(r,t){var e=Oo(r,"width",t);return e==="auto"&&(e=r.offsetWidth),parseFloat(e)}function Yge(r,t){var e=jge(r,t),n=parseFloat(Oo(r,"borderLeftWidth"))||0,i=parseFloat(Oo(r,"paddingLeft"))||0,a=parseFloat(Oo(r,"paddingRight"))||0,o=parseFloat(Oo(r,"borderRightWidth"))||0,s=parseFloat(Oo(r,"marginRight"))||0,l=parseFloat(Oo(r,"marginLeft"))||0;return e+n+o+i+a+l+s}function Fr(r,t){if(r)for(var e in t)t.hasOwnProperty(e)&&(r.style[e]=t[e]);return r}var Xge=Zs.cloneEvent,qge=Zs.isViewportChanged,Kge=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;return n.extendEvents=[],n.dragging=!1,n.preItem=null,n.graph=e,n.destroyed=!1,n.initEvents(),n}return t.prototype.initEvents=function(){var e=this,n=e.graph,i=e.extendEvents,a=i===void 0?[]:i,o=n.get("canvas"),s=o.get("el"),l=yv(this,"onCanvasEvents"),u=yv(this,"onExtendEvents"),c=yv(this,"onWheelEvent");o.off("*").on("*",l),this.canvasHandler=l,a.push(Js(s,"DOMMouseScroll",c)),a.push(Js(s,"mousewheel",c)),typeof window!="undefined"&&(a.push(Js(window,"keydown",u)),a.push(Js(window,"keyup",u)),a.push(Js(window,"focus",u)))},t.getItemRoot=function(e){for(;e&&!e.get("item");)e=e.get("parent");return e},t.prototype.onCanvasEvents=function(e){var n=this.graph,i=n.get("canvas"),a=e.target,o=e.type;e.canvasX=e.x,e.canvasY=e.y;var s={x:e.canvasX,y:e.canvasY},l=n.get("group"),u=l.getMatrix();if(u||(u=[1,0,0,0,1,0,0,0,1]),qge(u)&&(s=n.getPointByClient(e.clientX,e.clientY)),e.x=s.x,e.y=s.y,e.currentTarget=n,a===i){(o==="mousemove"||o==="mouseleave")&&this.handleMouseMove(e,"canvas"),e.target=i,e.item=null,n.emit(o,e),n.emit("canvas:"+o,e);return}var c=t.getItemRoot(a);if(!c){n.emit(o,e);return}var f=c.get("item");if(!f.destroyed){var d=f.getType();if(e.target=a,e.item=f,e.canvasX===e.x&&e.canvasY===e.y){var h=n.getCanvasByPoint(e.x,e.y);e.canvasX=h.x,e.canvasY=h.y}n.emit(o,e),e.name&&!e.name.includes(":")?n.emit(d+":"+o,e):n.emit(e.name,e),o==="dragstart"&&(this.dragging=!0),o==="dragend"&&(this.dragging=!1),o==="mousemove"&&this.handleMouseMove(e,d)}},t.prototype.onExtendEvents=function(e){this.graph.emit(e.type,e)},t.prototype.onWheelEvent=function(e){Je(e.wheelDelta)&&(e.wheelDelta=-e.detail),this.graph.emit("wheel",e)},t.prototype.handleMouseMove=function(e,n){var i=this,a=i.graph,o=i.preItem,s=a.get("canvas"),l=e.target===s?null:e.item;e=Xge(e),o&&o!==l&&!o.destroyed&&(e.item=o,this.emitCustomEvent(o.getType(),"mouseleave",e),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",e)),l&&o!==l&&(e.item=l,this.emitCustomEvent(n,"mouseenter",e),this.dragging&&this.emitCustomEvent(n,"dragenter",e)),this.preItem=l},t.prototype.emitCustomEvent=function(e,n,i){i.type=n,this.graph.emit(e+":"+n,i)},t.prototype.destroy=function(){var e=this,n=e.graph,i=e.canvasHandler,a=e.extendEvents,o=n.get("canvas");o.off("*",i),G(a,function(s){s.remove()}),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0},t}(Rve);class wo{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const ny=r=>typeof r=="string",Xa=Array.isArray,Wt=r=>typeof r=="number",tM=r=>Number.isNaN(Number(r)),Fl=r=>r!==null&&typeof r=="object",rM=r=>{if(r===null)return r;if(r instanceof Date)return new Date(r.getTime());if(r instanceof Array){const t=[];return r.forEach(e=>{t.push(e)}),t.map(e=>rM(e))}if(typeof r=="object"&&r!=={}){const t=Object.assign({},r);return Object.keys(t).forEach(e=>{t[e]=rM(t[e])}),t}return r},wn=(r,t)=>{const e=r[t];return Fl(e)?e.cell:e},iy=(r,t,e)=>{const n=[];for(let i=0;i<r;i++)n[i]=0;return e&&e.forEach(i=>{const a=wn(i,"source"),o=wn(i,"target");a&&(n[t[a]]+=1),o&&(n[t[o]]+=1)}),n},J4=r=>{const t=[],e=r.length;for(let n=0;n<e;n+=1){t[n]=[];for(let i=0;i<e;i+=1)n===i?t[n][i]=0:r[n][i]===0||!r[n][i]?t[n][i]=1/0:t[n][i]=r[n][i]}for(let n=0;n<e;n+=1)for(let i=0;i<e;i+=1)for(let a=0;a<e;a+=1)t[i][a]>t[i][n]+t[n][a]&&(t[i][a]=t[i][n]+t[n][a]);return t},ez=(r,t)=>{const{nodes:e,edges:n}=r,i=[],a={};if(!e)throw new Error("invalid nodes data!");return e&&e.forEach((o,s)=>{a[o.id]=s;const l=[];i.push(l)}),n&&n.forEach(o=>{const s=wn(o,"source"),l=wn(o,"target"),u=a[s],c=a[l];i[u][c]=1,t||(i[c][u]=1)}),i},Zge=(r,t)=>{const e=[];return r.forEach(n=>{const i=[];n.forEach(a=>{i.push(a*t)}),e.push(i)}),e},tz=(r,t)=>{if(r&&r.children){for(let e=r.children.length-1;e>=0;e--)if(!tz(r.children[e],t))return}return!!t(r)},ew=(r,t)=>{typeof t=="function"&&tz(r,t)},Dc=r=>typeof r=="function",tw=new Map,So=(r,t)=>{if(tw.get(r)&&console.warn(`The layout with the name ${r} exists already, it will be overridden`),Fl(t)){class e extends wo{constructor(i){super();const a=this,o={},s=a.getDefaultCfg();Object.assign(o,s,t,i),Object.keys(o).forEach(l=>{const u=o[l];a[l]=u})}}tw.set(r,e)}else tw.set(r,t);return tw.get(r)};class rz extends wo{constructor(t){super();this.begin=[0,0],this.preventOverlap=!0,this.preventOverlapPadding=10,this.condense=!1,this.sortBy="degree",this.nodeSize=30,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.row=0,this.col=0,this.cellWidth=0,this.cellHeight=0,this.cellUsed={},this.id2manPos={},this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}execute(){const t=this,e=t.nodes,n=t.edges,i=e.length,a=t.begin;if(i===0)return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n};if(i===1)return e[0].x=a[0],e[0].y=a[1],t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n};const o=[];e.forEach(c=>{o.push(c)});const s={};if(o.forEach((c,f)=>{s[c.id]=f}),(t.sortBy==="degree"||!ny(t.sortBy)||o[0][t.sortBy]===void 0)&&(t.sortBy="degree",tM(e[0].degree))){const c=iy(o.length,s,n);o.forEach((f,d)=>{f.degree=c[d]})}o.sort((c,f)=>f[t.sortBy]-c[t.sortBy]),!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);const l=t.rows,u=t.cols!=null?t.cols:t.columns;if(t.cells=i,l!=null&&u!=null?(t.rows=l,t.cols=u):l!=null&&u==null?(t.rows=l,t.cols=Math.ceil(t.cells/t.rows)):l==null&&u!=null?(t.cols=u,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.cols*t.rows>t.cells){const c=t.small(),f=t.large();(c-1)*f>=t.cells?t.small(c-1):(f-1)*c>=t.cells&&t.large(f-1)}else for(;t.cols*t.rows<t.cells;){const c=t.small(),f=t.large();(f+1)*c>=t.cells?t.large(f+1):t.small(c+1)}t.cellWidth=t.width/t.cols,t.cellHeight=t.height/t.rows,t.condense&&(t.cellWidth=0,t.cellHeight=0),t.preventOverlap&&o.forEach(c=>{(!c.x||!c.y)&&(c.x=0,c.y=0);let f,d;Xa(c.size)?(f=c.size[0],d=c.size[1]):Wt(c.size)?(f=c.size,d=c.size):Fl(c.size)&&(f=c.size.width,d=c.size.height),(f===void 0||d===void 0)&&(Xa(t.nodeSize)?(f=t.nodeSize[0],d=t.nodeSize[1]):Wt(t.nodeSize)?(f=t.nodeSize,d=t.nodeSize):(f=30,d=30));const h=t.preventOverlapPadding,v=f+h,p=d+h;t.cellWidth=Math.max(t.cellWidth,v),t.cellHeight=Math.max(t.cellHeight,p)}),t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(let c=0;c<o.length;c++){const f=o[c];let d;if(t.position&&(d=t.position(f)),d&&(d.row!==void 0||d.col!==void 0)){const h={row:d.row,col:d.col};if(h.col===void 0)for(h.col=0;t.used(h.row,h.col);)h.col++;else if(h.row===void 0)for(h.row=0;t.used(h.row,h.col);)h.row++;t.id2manPos[f.id]=h,t.use(h.row,h.col)}t.getPos(f)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:n,nodes:o}}small(t){const e=this;let n;const i=e.rows||5,a=e.cols||5;return t==null?n=Math.min(i,a):Math.min(i,a)===e.rows?e.rows=t:e.cols=t,n}large(t){const e=this;let n;const i=e.rows||5,a=e.cols||5;return t==null?n=Math.max(i,a):Math.max(i,a)===e.rows?e.rows=t:e.cols=t,n}used(t,e){return this.cellUsed[`c-${t}-${e}`]||!1}use(t,e){const n=this;n.cellUsed[`c-${t}-${e}`]=!0}moveToNextCell(){const t=this,e=t.cols||5;t.col++,t.col>=e&&(t.col=0,t.row++)}getPos(t){const e=this,n=e.begin,i=e.cellWidth,a=e.cellHeight;let o,s;const l=e.id2manPos[t.id];if(l)o=l.col*i+i/2+n[0],s=l.row*a+a/2+n[1];else{for(;e.used(e.row,e.col);)e.moveToNextCell();o=e.col*i+i/2+n[0],s=e.row*a+a/2+n[1],e.use(e.row,e.col),e.moveToNextCell()}t.x=o,t.y=s}getType(){return"grid"}}class nz extends wo{constructor(t){super();this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],width:300,height:300}}execute(){const t=this,e=t.nodes,n=.9,i=t.center;return!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),e&&e.forEach(a=>{a.x=(Math.random()-.5)*n*t.width+i[0],a.y=(Math.random()-.5)*n*t.height+i[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:this.edges}}getType(){return"random"}}const nM=(r,t)=>{let e;return r?Wt(r)?e=n=>r:e=r:e=n=>t||1,e};class iz extends wo{constructor(t){super();this.maxIteration=1e3,this.workerEnabled=!1,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.preventOverlap=!0,this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0}}execute(){var t,e;const n=this,i=n.nodes;if(n.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(n.timeInterval),!i||i.length===0){(t=n.onLayoutEnd)===null||t===void 0||t.call(n);return}!n.width&&typeof window!="undefined"&&(n.width=window.innerWidth),!n.height&&typeof window!="undefined"&&(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);const a=n.center;if(i.length===1){i[0].x=a[0],i[0].y=a[1],(e=n.onLayoutEnd)===null||e===void 0||e.call(n);return}const o={},s={};i.forEach((f,d)=>{Wt(f.x)||(f.x=Math.random()*n.width),Wt(f.y)||(f.y=Math.random()*n.height),o[f.id]=f,s[f.id]=d}),n.nodeMap=o,n.nodeIdxMap=s,n.linkDistance=nM(n.linkDistance,1),n.nodeStrength=nM(n.nodeStrength,1),n.edgeStrength=nM(n.edgeStrength,1);const l=n.nodeSize;let u;if(n.preventOverlap){const f=n.nodeSpacing;let d;Wt(f)?d=()=>f:Dc(f)?d=f:d=()=>0,l?Xa(l)?u=h=>(l[0]>l[1]?l[0]:l[1])+d(h):u=h=>l+d(h):u=h=>h.size?Xa(h.size)?(h.size[0]>h.size[1]?h.size[0]:h.size[1])+d(h):Fl(h.size)?(h.size.width>h.size.height?h.size.width:h.size.height)+d(h):h.size+d(h):10+d(h)}n.nodeSize=u;const c=n.edges;n.degrees=iy(i.length,n.nodeIdxMap,c),n.getMass||(n.getMass=f=>n.degrees[n.nodeIdxMap[f.id]]||1),n.run()}run(){var t;const e=this,{maxIteration:n,nodes:i,workerEnabled:a,minMovement:o}=e;if(!!i)if(a){for(let s=0;s<n;s++){const l=e.runOneStep(s);if(e.reachMoveThreshold(i,l,o))break}(t=e.onLayoutEnd)===null||t===void 0||t.call(e)}else{if(typeof window=="undefined")return;let s=0;this.timeInterval=window.setInterval(()=>{var l,u;if(!i)return;const c=e.runOneStep(s)||[];e.reachMoveThreshold(i,c,o)&&((l=e.onLayoutEnd)===null||l===void 0||l.call(e),window.clearInterval(e.timeInterval)),s++,s>=n&&((u=e.onLayoutEnd)===null||u===void 0||u.call(e),window.clearInterval(e.timeInterval))},0)}}reachMoveThreshold(t,e,n){let i=0;return t.forEach((a,o)=>{const s=a.x-e[o].x,l=a.y-e[o].y;i+=Math.sqrt(s*s+l*l)}),i/=t.length,i<n}runOneStep(t){var e;const n=this,{nodes:i,edges:a}=n,o=[],s=[];if(!i)return;i.forEach((c,f)=>{o[2*f]=0,o[2*f+1]=0,s[2*f]=0,s[2*f+1]=0}),n.calRepulsive(o,i),a&&n.calAttractive(o,a),n.calGravity(o,i);const l=Math.max(.02,n.interval-t*.002);n.updateVelocity(o,s,l,i);const u=[];return i.forEach(c=>{u.push({x:c.x,y:c.y})}),n.updatePosition(s,l,i),(e=n.tick)===null||e===void 0||e.call(n),u}calRepulsive(t,e){const n=this,i=n.getMass,a=n.nodeStrength,o=n.factor,s=n.coulombDisScale,l=n.preventOverlap,u=n.nodeSize;e.forEach((c,f)=>{const d=i?i(c):1;e.forEach((h,v)=>{if(f>=v)return;const p=c.x-h.x,g=c.y-h.y,m=Math.sqrt(p*p+g*g)+.01,y=(m+.1)*s,b=p/m,x=g/m,w=(a(c)+a(h))/2*o/(y*y),S=i?i(h):1;if(t[2*f]+=b*w,t[2*f+1]+=x*w,t[2*v]-=b*w,t[2*v+1]-=x*w,l&&m<(u(c)+u(h))/2){const C=(a(c)+a(h))/2/(m*m);t[2*f]+=b*C/d,t[2*f+1]+=x*C/d,t[2*v]-=b*C/S,t[2*v+1]-=x*C/S}})})}calAttractive(t,e){const n=this,i=n.nodeMap,a=n.nodeIdxMap,o=n.linkDistance,s=n.edgeStrength,l=n.getMass;e.forEach((u,c)=>{const f=wn(u,"source"),d=wn(u,"target"),h=i[f],v=i[d],p=v.x-h.x,g=v.y-h.y,m=Math.sqrt(p*p+g*g)+.01,y=p/m,b=g/m,S=((o(u)||1)-m)*s(u),C=a[f],_=a[d],T=l?l(h):1,E=l?l(v):1;t[2*C]-=y*S/T,t[2*C+1]-=b*S/T,t[2*_]+=y*S/E,t[2*_+1]+=b*S/E})}calGravity(t,e){const n=this,i=n.center,a=n.gravity,o=n.degrees,s=e.length;for(let l=0;l<s;l++){const u=e[l];let c=u.x-i[0],f=u.y-i[1],d=a;if(n.getCenter){const h=n.getCenter(u,o[l]);h&&Wt(h[0])&&Wt(h[1])&&Wt(h[2])&&(c=u.x-h[0],f=u.y-h[1],d=h[2])}!d||(t[2*l]-=d*c,t[2*l+1]-=d*f)}}updateVelocity(t,e,n,i){const a=this,o=n*a.damping;i.forEach((s,l)=>{let u=t[2*l]*o||.01,c=t[2*l+1]*o||.01;const f=Math.sqrt(u*u+c*c);if(f>a.maxSpeed){const d=a.maxSpeed/f;u=d*u,c=d*c}e[2*l]=u,e[2*l+1]=c})}updatePosition(t,e,n){n.forEach((i,a)=>{if(Wt(i.fx)&&Wt(i.fy)){i.x=i.fx,i.y=i.fy;return}const o=t[2*a]*e,s=t[2*a+1]*e;i.x+=o,i.y+=s})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0}getType(){return"gForce"}}function Qge(r,t){var e,n=1;r==null&&(r=0),t==null&&(t=0);function i(){var a,o=e.length,s,l=0,u=0;for(a=0;a<o;++a)s=e[a],l+=s.x,u+=s.y;for(l=(l/o-r)*n,u=(u/o-t)*n,a=0;a<o;++a)s=e[a],s.x-=l,s.y-=u}return i.initialize=function(a){e=a},i.x=function(a){return arguments.length?(r=+a,i):r},i.y=function(a){return arguments.length?(t=+a,i):t},i.strength=function(a){return arguments.length?(n=+a,i):n},i}function Jge(r){const t=+this._x.call(null,r),e=+this._y.call(null,r);return az(this.cover(t,e),t,e,r)}function az(r,t,e,n){if(isNaN(t)||isNaN(e))return r;var i,a=r._root,o={data:n},s=r._x0,l=r._y0,u=r._x1,c=r._y1,f,d,h,v,p,g,m,y;if(!a)return r._root=o,r;for(;a.length;)if((p=t>=(f=(s+u)/2))?s=f:u=f,(g=e>=(d=(l+c)/2))?l=d:c=d,i=a,!(a=a[m=g<<1|p]))return i[m]=o,r;if(h=+r._x.call(null,a.data),v=+r._y.call(null,a.data),t===h&&e===v)return o.next=a,i?i[m]=o:r._root=o,r;do i=i?i[m]=new Array(4):r._root=new Array(4),(p=t>=(f=(s+u)/2))?s=f:u=f,(g=e>=(d=(l+c)/2))?l=d:c=d;while((m=g<<1|p)==(y=(v>=d)<<1|h>=f));return i[y]=a,i[m]=o,r}function eme(r){var t,e,n=r.length,i,a,o=new Array(n),s=new Array(n),l=1/0,u=1/0,c=-1/0,f=-1/0;for(e=0;e<n;++e)isNaN(i=+this._x.call(null,t=r[e]))||isNaN(a=+this._y.call(null,t))||(o[e]=i,s[e]=a,i<l&&(l=i),i>c&&(c=i),a<u&&(u=a),a>f&&(f=a));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),e=0;e<n;++e)az(this,o[e],s[e],r[e]);return this}function tme(r,t){if(isNaN(r=+r)||isNaN(t=+t))return this;var e=this._x0,n=this._y0,i=this._x1,a=this._y1;if(isNaN(e))i=(e=Math.floor(r))+1,a=(n=Math.floor(t))+1;else{for(var o=i-e||1,s=this._root,l,u;e>r||r>=i||n>t||t>=a;)switch(u=(t<n)<<1|r<e,l=new Array(4),l[u]=s,s=l,o*=2,u){case 0:i=e+o,a=n+o;break;case 1:e=i-o,a=n+o;break;case 2:i=e+o,n=a-o;break;case 3:e=i-o,n=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._y0=n,this._x1=i,this._y1=a,this}function rme(){var r=[];return this.visit(function(t){if(!t.length)do r.push(t.data);while(t=t.next)}),r}function nme(r){return arguments.length?this.cover(+r[0][0],+r[0][1]).cover(+r[1][0],+r[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Co(r,t,e,n,i){this.node=r,this.x0=t,this.y0=e,this.x1=n,this.y1=i}function ime(r,t,e){var n,i=this._x0,a=this._y0,o,s,l,u,c=this._x1,f=this._y1,d=[],h=this._root,v,p;for(h&&d.push(new Co(h,i,a,c,f)),e==null?e=1/0:(i=r-e,a=t-e,c=r+e,f=t+e,e*=e);v=d.pop();)if(!(!(h=v.node)||(o=v.x0)>c||(s=v.y0)>f||(l=v.x1)<i||(u=v.y1)<a))if(h.length){var g=(o+l)/2,m=(s+u)/2;d.push(new Co(h[3],g,m,l,u),new Co(h[2],o,m,g,u),new Co(h[1],g,s,l,m),new Co(h[0],o,s,g,m)),(p=(t>=m)<<1|r>=g)&&(v=d[d.length-1],d[d.length-1]=d[d.length-1-p],d[d.length-1-p]=v)}else{var y=r-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),x=y*y+b*b;if(x<e){var w=Math.sqrt(e=x);i=r-w,a=t-w,c=r+w,f=t+w,n=h.data}}return n}function ame(r){if(isNaN(c=+this._x.call(null,r))||isNaN(f=+this._y.call(null,r)))return this;var t,e=this._root,n,i,a,o=this._x0,s=this._y0,l=this._x1,u=this._y1,c,f,d,h,v,p,g,m;if(!e)return this;if(e.length)for(;;){if((v=c>=(d=(o+l)/2))?o=d:l=d,(p=f>=(h=(s+u)/2))?s=h:u=h,t=e,!(e=e[g=p<<1|v]))return this;if(!e.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(n=t,m=g)}for(;e.data!==r;)if(i=e,!(e=e.next))return this;return(a=e.next)&&delete e.next,i?(a?i.next=a:delete i.next,this):t?(a?t[g]=a:delete t[g],(e=t[0]||t[1]||t[2]||t[3])&&e===(t[3]||t[2]||t[1]||t[0])&&!e.length&&(n?n[m]=e:this._root=e),this):(this._root=a,this)}function ome(r){for(var t=0,e=r.length;t<e;++t)this.remove(r[t]);return this}function sme(){return this._root}function lme(){var r=0;return this.visit(function(t){if(!t.length)do++r;while(t=t.next)}),r}function ume(r){var t=[],e,n=this._root,i,a,o,s,l;for(n&&t.push(new Co(n,this._x0,this._y0,this._x1,this._y1));e=t.pop();)if(!r(n=e.node,a=e.x0,o=e.y0,s=e.x1,l=e.y1)&&n.length){var u=(a+s)/2,c=(o+l)/2;(i=n[3])&&t.push(new Co(i,u,c,s,l)),(i=n[2])&&t.push(new Co(i,a,c,u,l)),(i=n[1])&&t.push(new Co(i,u,o,s,c)),(i=n[0])&&t.push(new Co(i,a,o,u,c))}return this}function cme(r){var t=[],e=[],n;for(this._root&&t.push(new Co(this._root,this._x0,this._y0,this._x1,this._y1));n=t.pop();){var i=n.node;if(i.length){var a,o=n.x0,s=n.y0,l=n.x1,u=n.y1,c=(o+l)/2,f=(s+u)/2;(a=i[0])&&t.push(new Co(a,o,s,c,f)),(a=i[1])&&t.push(new Co(a,c,s,l,f)),(a=i[2])&&t.push(new Co(a,o,f,c,u)),(a=i[3])&&t.push(new Co(a,c,f,l,u))}e.push(n)}for(;n=e.pop();)r(n.node,n.x0,n.y0,n.x1,n.y1);return this}function fme(r){return r[0]}function dme(r){return arguments.length?(this._x=r,this):this._x}function hme(r){return r[1]}function vme(r){return arguments.length?(this._y=r,this):this._y}function iM(r,t,e){var n=new aM(t==null?fme:t,e==null?hme:e,NaN,NaN,NaN,NaN);return r==null?n:n.addAll(r)}function aM(r,t,e,n,i,a){this._x=r,this._y=t,this._x0=e,this._y0=n,this._x1=i,this._y1=a,this._root=void 0}function oz(r){for(var t={data:r.data},e=t;r=r.next;)e=e.next={data:r.data};return t}var Eo=iM.prototype=aM.prototype;Eo.copy=function(){var r=new aM(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,e,n;if(!t)return r;if(!t.length)return r._root=oz(t),r;for(e=[{source:t,target:r._root=new Array(4)}];t=e.pop();)for(var i=0;i<4;++i)(n=t.source[i])&&(n.length?e.push({source:n,target:t.target[i]=new Array(4)}):t.target[i]=oz(n));return r};Eo.add=Jge;Eo.addAll=eme;Eo.cover=tme;Eo.data=rme;Eo.extent=nme;Eo.find=ime;Eo.remove=ame;Eo.removeAll=ome;Eo.root=sme;Eo.size=lme;Eo.visit=ume;Eo.visitAfter=cme;Eo.x=dme;Eo.y=vme;function _o(r){return function(){return r}}function Rc(r){return(r()-.5)*1e-6}function pme(r){return r.x+r.vx}function gme(r){return r.y+r.vy}function sz(r){var t,e,n,i=1,a=1;typeof r!="function"&&(r=_o(r==null?1:+r));function o(){for(var u,c=t.length,f,d,h,v,p,g,m=0;m<a;++m)for(f=iM(t,pme,gme).visitAfter(s),u=0;u<c;++u)d=t[u],p=e[d.index],g=p*p,h=d.x+d.vx,v=d.y+d.vy,f.visit(y);function y(b,x,w,S,C){var _=b.data,T=b.r,E=p+T;if(_){if(_.index>d.index){var M=h-_.x-_.vx,k=v-_.y-_.vy,P=M*M+k*k;P<E*E&&(M===0&&(M=Rc(n),P+=M*M),k===0&&(k=Rc(n),P+=k*k),P=(E-(P=Math.sqrt(P)))/P*i,d.vx+=(M*=P)*(E=(T*=T)/(g+T)),d.vy+=(k*=P)*E,_.vx-=M*(E=1-E),_.vy-=k*E)}return}return x>h+E||S<h-E||w>v+E||C<v-E}}function s(u){if(u.data)return u.r=e[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(!!t){var u,c=t.length,f;for(e=new Array(c),u=0;u<c;++u)f=t[u],e[f.index]=+r(f,u,t)}}return o.initialize=function(u,c){t=u,n=c,l()},o.iterations=function(u){return arguments.length?(a=+u,o):a},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(r=typeof u=="function"?u:_o(+u),l(),o):r},o}function mme(r){return r.index}function lz(r,t){var e=r.get(t);if(!e)throw new Error("node not found: "+t);return e}function oM(r){var t=mme,e=f,n,i=_o(30),a,o,s,l,u,c=1;r==null&&(r=[]);function f(g){return 1/Math.min(s[g.source.index],s[g.target.index])}function d(g){for(var m=0,y=r.length;m<c;++m)for(var b=0,x,w,S,C,_,T,E;b<y;++b)x=r[b],w=x.source,S=x.target,C=S.x+S.vx-w.x-w.vx||Rc(u),_=S.y+S.vy-w.y-w.vy||Rc(u),T=Math.sqrt(C*C+_*_),T=(T-a[b])/T*g*n[b],C*=T,_*=T,S.vx-=C*(E=l[b]),S.vy-=_*E,w.vx+=C*(E=1-E),w.vy+=_*E}function h(){if(!!o){var g,m=o.length,y=r.length,b=new Map(o.map((w,S)=>[t(w,S,o),w])),x;for(g=0,s=new Array(m);g<y;++g)x=r[g],x.index=g,typeof x.source!="object"&&(x.source=lz(b,x.source)),typeof x.target!="object"&&(x.target=lz(b,x.target)),s[x.source.index]=(s[x.source.index]||0)+1,s[x.target.index]=(s[x.target.index]||0)+1;for(g=0,l=new Array(y);g<y;++g)x=r[g],l[g]=s[x.source.index]/(s[x.source.index]+s[x.target.index]);n=new Array(y),v(),a=new Array(y),p()}}function v(){if(!!o)for(var g=0,m=r.length;g<m;++g)n[g]=+e(r[g],g,r)}function p(){if(!!o)for(var g=0,m=r.length;g<m;++g)a[g]=+i(r[g],g,r)}return d.initialize=function(g,m){o=g,u=m,h()},d.links=function(g){return arguments.length?(r=g,h(),d):r},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(e=typeof g=="function"?g:_o(+g),v(),d):e},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:_o(+g),p(),d):i},d}var yme={value:()=>{}};function uz(){for(var r=0,t=arguments.length,e={},n;r<t;++r){if(!(n=arguments[r]+"")||n in e||/[\s.]/.test(n))throw new Error("illegal type: "+n);e[n]=[]}return new rw(e)}function rw(r){this._=r}function bme(r,t){return r.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");if(i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}rw.prototype=uz.prototype={constructor:rw,on:function(r,t){var e=this._,n=bme(r+"",e),i,a=-1,o=n.length;if(arguments.length<2){for(;++a<o;)if((i=(r=n[a]).type)&&(i=xme(e[i],r.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(r=n[a]).type)e[i]=cz(e[i],r.name,t);else if(t==null)for(i in e)e[i]=cz(e[i],r.name,null);return this},copy:function(){var r={},t=this._;for(var e in t)r[e]=t[e].slice();return new rw(r)},call:function(r,t){if((i=arguments.length-2)>0)for(var e=new Array(i),n=0,i,a;n<i;++n)e[n]=arguments[n+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(a=this._[r],n=0,i=a.length;n<i;++n)a[n].value.apply(t,e)},apply:function(r,t,e){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var n=this._[r],i=0,a=n.length;i<a;++i)n[i].value.apply(t,e)}};function xme(r,t){for(var e=0,n=r.length,i;e<n;++e)if((i=r[e]).name===t)return i.value}function cz(r,t,e){for(var n=0,i=r.length;n<i;++n)if(r[n].name===t){r[n]=yme,r=r.slice(0,n).concat(r.slice(n+1));break}return e!=null&&r.push({name:t,value:e}),r}var $v=0,ay=0,oy=0,fz=1e3,nw,sy,iw=0,gd=0,aw=0,ly=typeof performance=="object"&&performance.now?performance:Date,dz=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function hz(){return gd||(dz(wme),gd=ly.now()+aw)}function wme(){gd=0}function sM(){this._call=this._time=this._next=null}sM.prototype=vz.prototype={constructor:sM,restart:function(r,t,e){if(typeof r!="function")throw new TypeError("callback is not a function");e=(e==null?hz():+e)+(t==null?0:+t),!this._next&&sy!==this&&(sy?sy._next=this:nw=this,sy=this),this._call=r,this._time=e,lM()},stop:function(){this._call&&(this._call=null,this._time=1/0,lM())}};function vz(r,t,e){var n=new sM;return n.restart(r,t,e),n}function Sme(){hz(),++$v;for(var r=nw,t;r;)(t=gd-r._time)>=0&&r._call.call(null,t),r=r._next;--$v}function pz(){gd=(iw=ly.now())+aw,$v=ay=0;try{Sme()}finally{$v=0,Eme(),gd=0}}function Cme(){var r=ly.now(),t=r-iw;t>fz&&(aw-=t,iw=r)}function Eme(){for(var r,t=nw,e,n=1/0;t;)t._call?(n>t._time&&(n=t._time),r=t,t=t._next):(e=t._next,t._next=null,t=r?r._next=e:nw=e);sy=r,lM(n)}function lM(r){if(!$v){ay&&(ay=clearTimeout(ay));var t=r-gd;t>24?(r<1/0&&(ay=setTimeout(pz,r-ly.now()-aw)),oy&&(oy=clearInterval(oy))):(oy||(iw=ly.now(),oy=setInterval(Cme,fz)),$v=1,dz(pz))}}const _me=1664525,Tme=1013904223,gz=4294967296;function Ame(){let r=1;return()=>(r=(_me*r+Tme)%gz)/gz}function Mme(r){return r.x}function kme(r){return r.y}var Ime=10,Pme=Math.PI*(3-Math.sqrt(5));function mz(r){var t,e=1,n=.001,i=1-Math.pow(n,1/300),a=0,o=.6,s=new Map,l=vz(f),u=uz("tick","end"),c=Ame();r==null&&(r=[]);function f(){d(),u.call("tick",t),e<n&&(l.stop(),u.call("end",t))}function d(p){var g,m=r.length,y;p===void 0&&(p=1);for(var b=0;b<p;++b)for(e+=(a-e)*i,s.forEach(function(x){x(e)}),g=0;g<m;++g)y=r[g],y.fx==null?y.x+=y.vx*=o:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=o:(y.y=y.fy,y.vy=0);return t}function h(){for(var p=0,g=r.length,m;p<g;++p){if(m=r[p],m.index=p,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var y=Ime*Math.sqrt(.5+p),b=p*Pme;m.x=y*Math.cos(b),m.y=y*Math.sin(b)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function v(p){return p.initialize&&p.initialize(r,c),p}return h(),t={tick:d,restart:function(){return l.restart(f),t},stop:function(){return l.stop(),t},nodes:function(p){return arguments.length?(r=p,h(),s.forEach(v),t):r},alpha:function(p){return arguments.length?(e=+p,t):e},alphaMin:function(p){return arguments.length?(n=+p,t):n},alphaDecay:function(p){return arguments.length?(i=+p,t):+i},alphaTarget:function(p){return arguments.length?(a=+p,t):a},velocityDecay:function(p){return arguments.length?(o=1-p,t):1-o},randomSource:function(p){return arguments.length?(c=p,s.forEach(v),t):c},force:function(p,g){return arguments.length>1?(g==null?s.delete(p):s.set(p,v(g)),t):s.get(p)},find:function(p,g,m){var y=0,b=r.length,x,w,S,C,_;for(m==null?m=1/0:m*=m,y=0;y<b;++y)C=r[y],x=p-C.x,w=g-C.y,S=x*x+w*w,S<m&&(_=C,m=S);return _},on:function(p,g){return arguments.length>1?(u.on(p,g),t):u.on(p)}}}function yz(){var r,t,e,n,i=_o(-30),a,o=1,s=1/0,l=.81;function u(h){var v,p=r.length,g=iM(r,Mme,kme).visitAfter(f);for(n=h,v=0;v<p;++v)t=r[v],g.visit(d)}function c(){if(!!r){var h,v=r.length,p;for(a=new Array(v),h=0;h<v;++h)p=r[h],a[p.index]=+i(p,h,r)}}function f(h){var v=0,p,g,m=0,y,b,x;if(h.length){for(y=b=x=0;x<4;++x)(p=h[x])&&(g=Math.abs(p.value))&&(v+=p.value,m+=g,y+=g*p.x,b+=g*p.y);h.x=y/m,h.y=b/m}else{p=h,p.x=p.data.x,p.y=p.data.y;do v+=a[p.data.index];while(p=p.next)}h.value=v}function d(h,v,p,g){if(!h.value)return!0;var m=h.x-t.x,y=h.y-t.y,b=g-v,x=m*m+y*y;if(b*b/l<x)return x<s&&(m===0&&(m=Rc(e),x+=m*m),y===0&&(y=Rc(e),x+=y*y),x<o&&(x=Math.sqrt(o*x)),t.vx+=m*h.value*n/x,t.vy+=y*h.value*n/x),!0;if(h.length||x>=s)return;(h.data!==t||h.next)&&(m===0&&(m=Rc(e),x+=m*m),y===0&&(y=Rc(e),x+=y*y),x<o&&(x=Math.sqrt(o*x)));do h.data!==t&&(b=a[h.data.index]*n/x,t.vx+=m*b,t.vy+=y*b);while(h=h.next)}return u.initialize=function(h,v){r=h,e=v,c()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:_o(+h),c(),u):i},u.distanceMin=function(h){return arguments.length?(o=h*h,u):Math.sqrt(o)},u.distanceMax=function(h){return arguments.length?(s=h*h,u):Math.sqrt(s)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function Dme(r){var t=_o(.1),e,n,i;typeof r!="function"&&(r=_o(r==null?0:+r));function a(s){for(var l=0,u=e.length,c;l<u;++l)c=e[l],c.vx+=(i[l]-c.x)*n[l]*s}function o(){if(!!e){var s,l=e.length;for(n=new Array(l),i=new Array(l),s=0;s<l;++s)n[s]=isNaN(i[s]=+r(e[s],s,e))?0:+t(e[s],s,e)}}return a.initialize=function(s){e=s,o()},a.strength=function(s){return arguments.length?(t=typeof s=="function"?s:_o(+s),o(),a):t},a.x=function(s){return arguments.length?(r=typeof s=="function"?s:_o(+s),o(),a):r},a}function Rme(r){var t=_o(.1),e,n,i;typeof r!="function"&&(r=_o(r==null?0:+r));function a(s){for(var l=0,u=e.length,c;l<u;++l)c=e[l],c.vy+=(i[l]-c.y)*n[l]*s}function o(){if(!!e){var s,l=e.length;for(n=new Array(l),i=new Array(l),s=0;s<l;++s)n[s]=isNaN(i[s]=+r(e[s],s,e))?0:+t(e[s],s,e)}}return a.initialize=function(s){e=s,o()},a.strength=function(s){return arguments.length?(t=typeof s=="function"?s:_o(+s),o(),a):t},a.y=function(s){return arguments.length?(r=typeof s=="function"?s:_o(+s),o(),a):r},a}function Ome(){function r(Z){return()=>Z}let t=Z=>Z.cluster,e=r(1),n=r(-1),i=r(100),a=r(.1),o=[0,0],s=[],l={},u=[],c=100,f=100,d={none:{x:0,y:0}},h=[],v,p="force",g=!0,m=.1;function y(Z){if(!g)return y;v.tick(),_();for(let Y=0,fe=s.length,le,ue=Z*m;Y<fe;++Y)le=s[Y],le.vx+=(d[t(le)].x-le.x)*ue,le.vy+=(d[t(le)].y-le.y)*ue}function b(){!s||x()}function x(){if(!s||!s.length)return;if(t(s[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");const Z=w();v=mz(Z.nodes).force("x",Dme(c).strength(.1)).force("y",Rme(f).strength(.1)).force("collide",sz(Y=>Y.r).iterations(4)).force("charge",yz().strength(n)).force("links",oM(Z.nodes.length?Z.links:[]).distance(i).strength(a)),h=v.nodes(),_()}function w(){const Z=[],Y=[],fe={};let le=[],ue={},Ee=[];return ue=S(s),Ee=C(u),le=Object.keys(ue),le.forEach((De,je)=>{const ke=ue[De];Z.push({id:De,size:ke.count,r:Math.sqrt(ke.sumforceNodeSize/Math.PI)}),fe[De]=je}),Ee.forEach(De=>{const je=wn(De,"source"),ke=wn(De,"target"),D=fe[je],z=fe[ke];D!==void 0&&z!==void 0&&Y.push({source:D,target:z,count:De.count})}),{nodes:Z,links:Y}}function S(Z){const Y={};return Z.forEach(fe=>{const le=t(fe);Y[le]||(Y[le]={count:0,sumforceNodeSize:0})}),Z.forEach(fe=>{const le=t(fe),ue=e(fe),Ee=Y[le];Ee.count=Ee.count+1,Ee.sumforceNodeSize=Ee.sumforceNodeSize+Math.PI*(ue*ue)*1.3,Y[le]=Ee}),Y}function C(Z){const Y={},fe=[];return Z.forEach(ue=>{const Ee=T(ue);let De=0;Y[Ee]!==void 0&&(De=Y[Ee]),De+=1,Y[Ee]=De}),Object.entries(Y).forEach(([ue,Ee])=>{const De=ue.split("~")[0],je=ue.split("~")[1];De!==void 0&&je!==void 0&&fe.push({source:De,target:je,count:Ee})}),fe}function _(){return d={none:{x:0,y:0}},h.forEach(Z=>{d[Z.id]={x:Z.x-o[0],y:Z.y-o[1]}}),d}function T(Z){const Y=wn(Z,"source"),fe=wn(Z,"target"),le=t(l[Y]),ue=t(l[fe]);return le<=ue?`${le}~${ue}`:`${ue}~${le}`}function E(Z){l={},Z.forEach(Y=>{l[Y.id]=Y})}function M(Z){return arguments.length?(p=Z,b(),y):p}function k(Z){return arguments.length?typeof Z=="string"?(t=Y=>Y[Z],y):(t=Z,y):t}function P(Z){return arguments.length?(g=Z,y):g}function F(Z){return arguments.length?(m=Z,y):m}function $(Z){return arguments.length?(c=Z,y):c}function R(Z){return arguments.length?(f=Z,y):f}function L(Z){return arguments.length?(E(Z||[]),s=Z||[],y):s}function O(Z){return arguments.length?(u=Z||[],b(),y):u}function B(Z){return arguments.length?(typeof Z=="function"?e=Z:e=r(+Z),b(),y):e}function U(Z){return arguments.length?(typeof Z=="function"?n=Z:n=r(+Z),b(),y):n}function W(Z){return arguments.length?(typeof Z=="function"?i=Z:i=r(+Z),b(),y):i}function X(Z){return arguments.length?(typeof Z=="function"?a=Z:a=r(+Z),b(),y):a}function ae(Z){return arguments.length?(o=Z,y):o}return y.initialize=Z=>{s=Z,b()},y.template=M,y.groupBy=k,y.enableGrouping=P,y.strength=F,y.centerX=$,y.centerY=R,y.nodes=L,y.links=O,y.forceNodeSize=B,y.nodeSize=y.forceNodeSize,y.forceCharge=U,y.forceLinkDistance=W,y.forceLinkStrength=X,y.offset=ae,y.getFocis=_,y}const uM={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};class bz extends wo{constructor(t){super();this.center=[0,0],this.nodeStrength=null,this.edgeStrength=null,this.preventOverlap=!1,this.clusterNodeStrength=null,this.clusterEdgeStrength=null,this.clusterEdgeDistance=null,this.clusterNodeSize=null,this.clusterFociStrength=null,this.linkDistance=50,this.alphaDecay=.028,this.alphaMin=.001,this.alpha=.3,this.collideStrength=1,this.workerEnabled=!1,this.tick=()=>{},this.onLayoutEnd=()=>{},this.ticking=void 0,t&&this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick(){},onLayoutEnd(){},workerEnabled:!1}}init(t){const e=this;e.nodes=t.nodes||[];const n=t.edges||[];e.edges=n.map(i=>{const a={},o=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(i).forEach(s=>{o.indexOf(s)>-1||(a[s]=i[s])}),a}),e.ticking=!1}execute(t){const e=this,n=e.nodes,i=e.edges;if(e.ticking)return;let a=e.forceSimulation;const o=e.alphaMin,s=e.alphaDecay,l=e.alpha;if(a){if(t){if(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(n),e.clusterForce.links(i)),a.nodes(n),i&&e.edgeForce)e.edgeForce.links(i);else if(i&&!e.edgeForce){const u=oM().id(c=>c.id).links(i);e.edgeStrength&&u.strength(e.edgeStrength),e.linkDistance&&u.distance(e.linkDistance),e.edgeForce=u,a.force("link",u)}}e.preventOverlap&&e.overlapProcess(a),a.alpha(l).restart(),this.ticking=!0}else try{const u=yz();if(e.nodeStrength&&u.strength(e.nodeStrength),a=mz().nodes(n),e.clustering){const c=Ome();c.centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),i&&c.links(i),n&&c.nodes(n),c.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=c,a.force("group",c)}if(a.force("center",Qge(e.center[0],e.center[1])).force("charge",u).alpha(l).alphaDecay(s).alphaMin(o),e.preventOverlap&&e.overlapProcess(a),i){const c=oM().id(f=>f.id).links(i);e.edgeStrength&&c.strength(e.edgeStrength),e.linkDistance&&c.distance(e.linkDistance),e.edgeForce=c,a.force("link",c)}if(e.workerEnabled&&!Fme()&&(e.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!e.workerEnabled)a.on("tick",()=>{e.tick()}).on("end",()=>{e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()}),e.ticking=!0;else{a.stop();const c=Lme(a);for(let f=1;f<=c;f++)a.tick(),postMessage({nodes:n,currentTick:f,totalTicks:c,type:uM.TICK},void 0);e.ticking=!1}e.forceSimulation=a,e.ticking=!0}catch(u){e.ticking=!1,console.warn(u)}}overlapProcess(t){const e=this,n=e.nodeSize,i=e.nodeSpacing;let a,o;const s=e.collideStrength;if(Wt(i)?o=()=>i:Dc(i)?o=i:o=()=>0,!n)a=l=>l.size?Xa(l.size)?(l.size[0]>l.size[1]?l.size[0]:l.size[1])/2+o(l):Fl(l.size)?(l.size.width>l.size.height?l.size.width:l.size.height)/2+o(l):l.size/2+o(l):10+o(l);else if(Dc(n))a=l=>n(l)+o(l);else if(Xa(n)){const u=(n[0]>n[1]?n[0]:n[1])/2;a=c=>u+o(c)}else if(Wt(n)){const l=n/2;a=u=>l+o(u)}else a=()=>10;t.force("collisionForce",sz(a).strength(s))}updateCfg(t){const e=this;e.ticking&&(e.forceSimulation.stop(),e.ticking=!1),e.forceSimulation=null,Object.assign(e,t)}destroy(){const t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.nodes=null,t.edges=null,t.destroyed=!0}}function Lme(r){const t=r.alphaMin(),e=r.alphaTarget(),n=r.alpha(),i=Math.log((t-e)/(n-e))/Math.log(1-r.alphaDecay());return Math.ceil(i)}function Fme(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function Nme(r,t,e,n){r.forEach((i,a)=>{r[a].children=[],r[a].parent=[]}),n?t.forEach(i=>{const a=wn(i,"source"),o=wn(i,"target");let s=0;a&&(s=e[a]);let l=0;o&&(l=e[o]);const u=r[s].children,c=r[l].parent;u.push(r[l].id),c.push(r[s].id)}):t.forEach(i=>{const a=wn(i,"source"),o=wn(i,"target");let s=0;a&&(s=e[a]);let l=0;o&&(l=e[o]);const u=r[s].children,c=r[l].children;u.push(r[l].id),c.push(r[s].id)})}function Bme(r,t,e){const n=e.length;for(let i=0;i<n;i++){const a=wn(e[i],"source"),o=wn(e[i],"target");if(r.id===a&&t.id===o||t.id===a&&r.id===o)return!0}return!1}function $me(r,t){const e=r.degree,n=t.degree;return e<n?-1:e>n?1:0}class xz extends wo{constructor(t){super();this.radius=null,this.startRadius=null,this.endRadius=null,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.divisions=1,this.ordering=null,this.angleRatio=1,this.nodes=[],this.edges=[],this.nodeMap={},this.degrees=[],this.width=300,this.height=300,this.updateCfg(t)}getDefaultCfg(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}execute(){const t=this,e=t.nodes,n=t.edges,i=e.length;if(i===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const a=t.center;if(i===1){e[0].x=a[0],e[0].y=a[1],t.onLayoutEnd&&t.onLayoutEnd();return}let o=t.radius,s=t.startRadius,l=t.endRadius;const u=t.divisions,c=t.startAngle,f=t.endAngle,d=(f-c)/i,h={};e.forEach((w,S)=>{h[w.id]=S}),t.nodeMap=h;const v=iy(e.length,h,n);t.degrees=v,!o&&!s&&!l?o=t.height>t.width?t.width/2:t.height/2:!s&&l?s=l:s&&!l&&(l=s);const p=t.angleRatio,g=d*p,m=t.ordering;let y=[];m==="topology"?y=t.topologyOrdering():m==="topology-directed"?y=t.topologyOrdering(!0):m==="degree"?y=t.degreeOrdering():y=e;const b=t.clockwise,x=Math.ceil(i/u);for(let w=0;w<i;++w){let S=o;!S&&s!==null&&l!==null&&(S=s+w*(l-s)/(i-1)),S||(S=10+w*100/(i-1));let C=c+w%x*g+2*Math.PI/u*Math.floor(w/x);b||(C=f-w%x*g-2*Math.PI/u*Math.floor(w/x)),y[w].x=a[0]+Math.cos(C)*S,y[w].y=a[1]+Math.sin(C)*S,y[w].weight=v[w]}return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:y,edges:this.edges}}topologyOrdering(t=!1){const e=this,n=e.degrees,i=e.edges,a=e.nodes,o=rM(a),s=e.nodeMap,l=[o[0]],u=[a[0]],c=[],f=a.length;c[0]=!0,Nme(o,i,s,t);let d=0;return o.forEach((h,v)=>{if(v!==0)if((v===f-1||n[v]!==n[v+1]||Bme(l[d],h,i))&&!c[v])l.push(h),u.push(a[s[h.id]]),c[v]=!0,d++;else{const p=l[d].children;let g=!1;for(let y=0;y<p.length;y++){const b=s[p[y]];if(n[b]===n[v]&&!c[b]){l.push(o[b]),u.push(a[s[o[b].id]]),c[b]=!0,g=!0;break}}let m=0;for(;!g&&(c[m]||(l.push(o[m]),u.push(a[s[o[m].id]]),c[m]=!0,g=!0),m++,m!==f););}}),u}degreeOrdering(){const t=this,e=t.nodes,n=[],i=t.degrees;return e.forEach((a,o)=>{a.degree=i[o],n.push(a)}),n.sort($me),n}getType(){return"circular"}}function zme(){this.__data__=[],this.size=0}var Gme=zme;function Ume(r,t){return r===t||r!==r&&t!==t}var zv=Ume;function Vme(r,t){for(var e=r.length;e--;)if(zv(r[e][0],t))return e;return-1}var ow=Vme,Hme=Array.prototype,Wme=Hme.splice;function jme(r){var t=this.__data__,e=ow(t,r);if(e<0)return!1;var n=t.length-1;return e==n?t.pop():Wme.call(t,e,1),--this.size,!0}var Yme=jme;function Xme(r){var t=this.__data__,e=ow(t,r);return e<0?void 0:t[e][1]}var qme=Xme;function Kme(r){return ow(this.__data__,r)>-1}var Zme=Kme;function Qme(r,t){var e=this.__data__,n=ow(e,r);return n<0?(++this.size,e.push([r,t])):e[n][1]=t,this}var Jme=Qme;function Gv(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}Gv.prototype.clear=Gme;Gv.prototype.delete=Yme;Gv.prototype.get=qme;Gv.prototype.has=Zme;Gv.prototype.set=Jme;var sw=Gv;function eye(){this.__data__=new sw,this.size=0}var tye=eye;function rye(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e}var nye=rye;function iye(r){return this.__data__.get(r)}var aye=iye;function oye(r){return this.__data__.has(r)}var sye=oye,lye=typeof Ic=="object"&&Ic&&Ic.Object===Object&&Ic,wz=lye,uye=typeof self=="object"&&self&&self.Object===Object&&self,cye=wz||uye||Function("return this")(),el=cye,fye=el.Symbol,Ds=fye,Sz=Object.prototype,dye=Sz.hasOwnProperty,hye=Sz.toString,uy=Ds?Ds.toStringTag:void 0;function vye(r){var t=dye.call(r,uy),e=r[uy];try{r[uy]=void 0;var n=!0}catch{}var i=hye.call(r);return n&&(t?r[uy]=e:delete r[uy]),i}var pye=vye,gye=Object.prototype,mye=gye.toString;function yye(r){return mye.call(r)}var bye=yye,xye="[object Null]",wye="[object Undefined]",Cz=Ds?Ds.toStringTag:void 0;function Sye(r){return r==null?r===void 0?wye:xye:Cz&&Cz in Object(r)?pye(r):bye(r)}var Oc=Sye;function Cye(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}var Lo=Cye,Eye="[object AsyncFunction]",_ye="[object Function]",Tye="[object GeneratorFunction]",Aye="[object Proxy]";function Mye(r){if(!Lo(r))return!1;var t=Oc(r);return t==_ye||t==Tye||t==Eye||t==Aye}var cy=Mye,kye=el["__core-js_shared__"],cM=kye,Ez=function(){var r=/[^.]+$/.exec(cM&&cM.keys&&cM.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function Iye(r){return!!Ez&&Ez in r}var Pye=Iye,Dye=Function.prototype,Rye=Dye.toString;function Oye(r){if(r!=null){try{return Rye.call(r)}catch{}try{return r+""}catch{}}return""}var md=Oye,Lye=/[\\^$.*+?()[\]{}|]/g,Fye=/^\[object .+?Constructor\]$/,Nye=Function.prototype,Bye=Object.prototype,$ye=Nye.toString,zye=Bye.hasOwnProperty,Gye=RegExp("^"+$ye.call(zye).replace(Lye,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Uye(r){if(!Lo(r)||Pye(r))return!1;var t=cy(r)?Gye:Fye;return t.test(md(r))}var Vye=Uye;function Hye(r,t){return r==null?void 0:r[t]}var Wye=Hye;function jye(r,t){var e=Wye(r,t);return Vye(e)?e:void 0}var yd=jye,Yye=yd(el,"Map"),fy=Yye,Xye=yd(Object,"create"),dy=Xye;function qye(){this.__data__=dy?dy(null):{},this.size=0}var Kye=qye;function Zye(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}var Qye=Zye,Jye="__lodash_hash_undefined__",e0e=Object.prototype,t0e=e0e.hasOwnProperty;function r0e(r){var t=this.__data__;if(dy){var e=t[r];return e===Jye?void 0:e}return t0e.call(t,r)?t[r]:void 0}var n0e=r0e,i0e=Object.prototype,a0e=i0e.hasOwnProperty;function o0e(r){var t=this.__data__;return dy?t[r]!==void 0:a0e.call(t,r)}var s0e=o0e,l0e="__lodash_hash_undefined__";function u0e(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=dy&&t===void 0?l0e:t,this}var c0e=u0e;function Uv(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}Uv.prototype.clear=Kye;Uv.prototype.delete=Qye;Uv.prototype.get=n0e;Uv.prototype.has=s0e;Uv.prototype.set=c0e;var _z=Uv;function f0e(){this.size=0,this.__data__={hash:new _z,map:new(fy||sw),string:new _z}}var d0e=f0e;function h0e(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}var v0e=h0e;function p0e(r,t){var e=r.__data__;return v0e(t)?e[typeof t=="string"?"string":"hash"]:e.map}var lw=p0e;function g0e(r){var t=lw(this,r).delete(r);return this.size-=t?1:0,t}var m0e=g0e;function y0e(r){return lw(this,r).get(r)}var b0e=y0e;function x0e(r){return lw(this,r).has(r)}var w0e=x0e;function S0e(r,t){var e=lw(this,r),n=e.size;return e.set(r,t),this.size+=e.size==n?0:1,this}var C0e=S0e;function Vv(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}Vv.prototype.clear=d0e;Vv.prototype.delete=m0e;Vv.prototype.get=b0e;Vv.prototype.has=w0e;Vv.prototype.set=C0e;var uw=Vv,E0e=200;function _0e(r,t){var e=this.__data__;if(e instanceof sw){var n=e.__data__;if(!fy||n.length<E0e-1)return n.push([r,t]),this.size=++e.size,this;e=this.__data__=new uw(n)}return e.set(r,t),this.size=e.size,this}var T0e=_0e;function Hv(r){var t=this.__data__=new sw(r);this.size=t.size}Hv.prototype.clear=tye;Hv.prototype.delete=nye;Hv.prototype.get=aye;Hv.prototype.has=sye;Hv.prototype.set=T0e;var Wv=Hv;function A0e(r,t){for(var e=-1,n=r==null?0:r.length;++e<n&&t(r[e],e,r)!==!1;);return r}var fM=A0e,M0e=function(){try{var r=yd(Object,"defineProperty");return r({},"",{}),r}catch{}}(),cw=M0e;function k0e(r,t,e){t=="__proto__"&&cw?cw(r,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):r[t]=e}var fw=k0e,I0e=Object.prototype,P0e=I0e.hasOwnProperty;function D0e(r,t,e){var n=r[t];(!(P0e.call(r,t)&&zv(n,e))||e===void 0&&!(t in r))&&fw(r,t,e)}var dw=D0e;function R0e(r,t,e,n){var i=!e;e||(e={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=n?n(e[s],r[s],s,e,r):void 0;l===void 0&&(l=r[s]),i?fw(e,s,l):dw(e,s,l)}return e}var hy=R0e;function O0e(r,t){for(var e=-1,n=Array(r);++e<r;)n[e]=t(e);return n}var L0e=O0e;function F0e(r){return r!=null&&typeof r=="object"}var tl=F0e,N0e="[object Arguments]";function B0e(r){return tl(r)&&Oc(r)==N0e}var Tz=B0e,Az=Object.prototype,$0e=Az.hasOwnProperty,z0e=Az.propertyIsEnumerable,G0e=Tz(function(){return arguments}())?Tz:function(r){return tl(r)&&$0e.call(r,"callee")&&!z0e.call(r,"callee")},jv=G0e,U0e=Array.isArray,Zi=U0e;function V0e(){return!1}var H0e=V0e,bd=Rr(function(r,t){var e=t&&!t.nodeType&&t,n=e&&!0&&r&&!r.nodeType&&r,i=n&&n.exports===e,a=i?el.Buffer:void 0,o=a?a.isBuffer:void 0,s=o||H0e;r.exports=s}),W0e=9007199254740991,j0e=/^(?:0|[1-9]\d*)$/;function Y0e(r,t){var e=typeof r;return t=t==null?W0e:t,!!t&&(e=="number"||e!="symbol"&&j0e.test(r))&&r>-1&&r%1==0&&r<t}var hw=Y0e,X0e=9007199254740991;function q0e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=X0e}var dM=q0e,K0e="[object Arguments]",Z0e="[object Array]",Q0e="[object Boolean]",J0e="[object Date]",ebe="[object Error]",tbe="[object Function]",rbe="[object Map]",nbe="[object Number]",ibe="[object Object]",abe="[object RegExp]",obe="[object Set]",sbe="[object String]",lbe="[object WeakMap]",ube="[object ArrayBuffer]",cbe="[object DataView]",fbe="[object Float32Array]",dbe="[object Float64Array]",hbe="[object Int8Array]",vbe="[object Int16Array]",pbe="[object Int32Array]",gbe="[object Uint8Array]",mbe="[object Uint8ClampedArray]",ybe="[object Uint16Array]",bbe="[object Uint32Array]",vi={};vi[fbe]=vi[dbe]=vi[hbe]=vi[vbe]=vi[pbe]=vi[gbe]=vi[mbe]=vi[ybe]=vi[bbe]=!0;vi[K0e]=vi[Z0e]=vi[ube]=vi[Q0e]=vi[cbe]=vi[J0e]=vi[ebe]=vi[tbe]=vi[rbe]=vi[nbe]=vi[ibe]=vi[abe]=vi[obe]=vi[sbe]=vi[lbe]=!1;function xbe(r){return tl(r)&&dM(r.length)&&!!vi[Oc(r)]}var wbe=xbe;function Sbe(r){return function(t){return r(t)}}var vw=Sbe,Yv=Rr(function(r,t){var e=t&&!t.nodeType&&t,n=e&&!0&&r&&!r.nodeType&&r,i=n&&n.exports===e,a=i&&wz.process,o=function(){try{var s=n&&n.require&&n.require("util").types;return s||a&&a.binding&&a.binding("util")}catch{}}();r.exports=o}),Mz=Yv&&Yv.isTypedArray,Cbe=Mz?vw(Mz):wbe,vy=Cbe,Ebe=Object.prototype,_be=Ebe.hasOwnProperty;function Tbe(r,t){var e=Zi(r),n=!e&&jv(r),i=!e&&!n&&bd(r),a=!e&&!n&&!i&&vy(r),o=e||n||i||a,s=o?L0e(r.length,String):[],l=s.length;for(var u in r)(t||_be.call(r,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||hw(u,l)))&&s.push(u);return s}var kz=Tbe,Abe=Object.prototype;function Mbe(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||Abe;return r===e}var pw=Mbe;function kbe(r,t){return function(e){return r(t(e))}}var Iz=kbe,Ibe=Iz(Object.keys,Object),Pbe=Ibe,Dbe=Object.prototype,Rbe=Dbe.hasOwnProperty;function Obe(r){if(!pw(r))return Pbe(r);var t=[];for(var e in Object(r))Rbe.call(r,e)&&e!="constructor"&&t.push(e);return t}var hM=Obe;function Lbe(r){return r!=null&&dM(r.length)&&!cy(r)}var _u=Lbe;function Fbe(r){return _u(r)?kz(r):hM(r)}var Lc=Fbe;function Nbe(r,t){return r&&hy(t,Lc(t),r)}var Bbe=Nbe;function $be(r){var t=[];if(r!=null)for(var e in Object(r))t.push(e);return t}var zbe=$be,Gbe=Object.prototype,Ube=Gbe.hasOwnProperty;function Vbe(r){if(!Lo(r))return zbe(r);var t=pw(r),e=[];for(var n in r)n=="constructor"&&(t||!Ube.call(r,n))||e.push(n);return e}var Hbe=Vbe;function Wbe(r){return _u(r)?kz(r,!0):Hbe(r)}var xd=Wbe;function jbe(r,t){return r&&hy(t,xd(t),r)}var Ybe=jbe,Pz=Rr(function(r,t){var e=t&&!t.nodeType&&t,n=e&&!0&&r&&!r.nodeType&&r,i=n&&n.exports===e,a=i?el.Buffer:void 0,o=a?a.allocUnsafe:void 0;function s(l,u){if(u)return l.slice();var c=l.length,f=o?o(c):new l.constructor(c);return l.copy(f),f}r.exports=s});function Xbe(r,t){var e=-1,n=r.length;for(t||(t=Array(n));++e<n;)t[e]=r[e];return t}var Dz=Xbe;function qbe(r,t){for(var e=-1,n=r==null?0:r.length,i=0,a=[];++e<n;){var o=r[e];t(o,e,r)&&(a[i++]=o)}return a}var Rz=qbe;function Kbe(){return[]}var Oz=Kbe,Zbe=Object.prototype,Qbe=Zbe.propertyIsEnumerable,Lz=Object.getOwnPropertySymbols,Jbe=Lz?function(r){return r==null?[]:(r=Object(r),Rz(Lz(r),function(t){return Qbe.call(r,t)}))}:Oz,vM=Jbe;function exe(r,t){return hy(r,vM(r),t)}var txe=exe;function rxe(r,t){for(var e=-1,n=t.length,i=r.length;++e<n;)r[i+e]=t[e];return r}var pM=rxe,nxe=Iz(Object.getPrototypeOf,Object),gw=nxe,ixe=Object.getOwnPropertySymbols,axe=ixe?function(r){for(var t=[];r;)pM(t,vM(r)),r=gw(r);return t}:Oz,Fz=axe;function oxe(r,t){return hy(r,Fz(r),t)}var sxe=oxe;function lxe(r,t,e){var n=t(r);return Zi(r)?n:pM(n,e(r))}var Nz=lxe;function uxe(r){return Nz(r,Lc,vM)}var gM=uxe;function cxe(r){return Nz(r,xd,Fz)}var fxe=cxe,dxe=yd(el,"DataView"),mM=dxe,hxe=yd(el,"Promise"),yM=hxe,vxe=yd(el,"Set"),Xv=vxe,pxe=yd(el,"WeakMap"),bM=pxe,Bz="[object Map]",gxe="[object Object]",$z="[object Promise]",zz="[object Set]",Gz="[object WeakMap]",Uz="[object DataView]",mxe=md(mM),yxe=md(fy),bxe=md(yM),xxe=md(Xv),wxe=md(bM),wd=Oc;(mM&&wd(new mM(new ArrayBuffer(1)))!=Uz||fy&&wd(new fy)!=Bz||yM&&wd(yM.resolve())!=$z||Xv&&wd(new Xv)!=zz||bM&&wd(new bM)!=Gz)&&(wd=function(r){var t=Oc(r),e=t==gxe?r.constructor:void 0,n=e?md(e):"";if(n)switch(n){case mxe:return Uz;case yxe:return Bz;case bxe:return $z;case xxe:return zz;case wxe:return Gz}return t});var Sd=wd,Sxe=Object.prototype,Cxe=Sxe.hasOwnProperty;function Exe(r){var t=r.length,e=new r.constructor(t);return t&&typeof r[0]=="string"&&Cxe.call(r,"index")&&(e.index=r.index,e.input=r.input),e}var _xe=Exe,Txe=el.Uint8Array,mw=Txe;function Axe(r){var t=new r.constructor(r.byteLength);return new mw(t).set(new mw(r)),t}var xM=Axe;function Mxe(r,t){var e=t?xM(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.byteLength)}var kxe=Mxe,Ixe=/\w*$/;function Pxe(r){var t=new r.constructor(r.source,Ixe.exec(r));return t.lastIndex=r.lastIndex,t}var Dxe=Pxe,Vz=Ds?Ds.prototype:void 0,Hz=Vz?Vz.valueOf:void 0;function Rxe(r){return Hz?Object(Hz.call(r)):{}}var Oxe=Rxe;function Lxe(r,t){var e=t?xM(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)}var Wz=Lxe,Fxe="[object Boolean]",Nxe="[object Date]",Bxe="[object Map]",$xe="[object Number]",zxe="[object RegExp]",Gxe="[object Set]",Uxe="[object String]",Vxe="[object Symbol]",Hxe="[object ArrayBuffer]",Wxe="[object DataView]",jxe="[object Float32Array]",Yxe="[object Float64Array]",Xxe="[object Int8Array]",qxe="[object Int16Array]",Kxe="[object Int32Array]",Zxe="[object Uint8Array]",Qxe="[object Uint8ClampedArray]",Jxe="[object Uint16Array]",e1e="[object Uint32Array]";function t1e(r,t,e){var n=r.constructor;switch(t){case Hxe:return xM(r);case Fxe:case Nxe:return new n(+r);case Wxe:return kxe(r,e);case jxe:case Yxe:case Xxe:case qxe:case Kxe:case Zxe:case Qxe:case Jxe:case e1e:return Wz(r,e);case Bxe:return new n;case $xe:case Uxe:return new n(r);case zxe:return Dxe(r);case Gxe:return new n;case Vxe:return Oxe(r)}}var r1e=t1e,jz=Object.create,n1e=function(){function r(){}return function(t){if(!Lo(t))return{};if(jz)return jz(t);r.prototype=t;var e=new r;return r.prototype=void 0,e}}(),Yz=n1e;function i1e(r){return typeof r.constructor=="function"&&!pw(r)?Yz(gw(r)):{}}var Xz=i1e,a1e="[object Map]";function o1e(r){return tl(r)&&Sd(r)==a1e}var s1e=o1e,qz=Yv&&Yv.isMap,l1e=qz?vw(qz):s1e,u1e=l1e,c1e="[object Set]";function f1e(r){return tl(r)&&Sd(r)==c1e}var d1e=f1e,Kz=Yv&&Yv.isSet,h1e=Kz?vw(Kz):d1e,v1e=h1e,p1e=1,g1e=2,m1e=4,Zz="[object Arguments]",y1e="[object Array]",b1e="[object Boolean]",x1e="[object Date]",w1e="[object Error]",Qz="[object Function]",S1e="[object GeneratorFunction]",C1e="[object Map]",E1e="[object Number]",Jz="[object Object]",_1e="[object RegExp]",T1e="[object Set]",A1e="[object String]",M1e="[object Symbol]",k1e="[object WeakMap]",I1e="[object ArrayBuffer]",P1e="[object DataView]",D1e="[object Float32Array]",R1e="[object Float64Array]",O1e="[object Int8Array]",L1e="[object Int16Array]",F1e="[object Int32Array]",N1e="[object Uint8Array]",B1e="[object Uint8ClampedArray]",$1e="[object Uint16Array]",z1e="[object Uint32Array]",oi={};oi[Zz]=oi[y1e]=oi[I1e]=oi[P1e]=oi[b1e]=oi[x1e]=oi[D1e]=oi[R1e]=oi[O1e]=oi[L1e]=oi[F1e]=oi[C1e]=oi[E1e]=oi[Jz]=oi[_1e]=oi[T1e]=oi[A1e]=oi[M1e]=oi[N1e]=oi[B1e]=oi[$1e]=oi[z1e]=!0;oi[w1e]=oi[Qz]=oi[k1e]=!1;function yw(r,t,e,n,i,a){var o,s=t&p1e,l=t&g1e,u=t&m1e;if(e&&(o=i?e(r,n,i,a):e(r)),o!==void 0)return o;if(!Lo(r))return r;var c=Zi(r);if(c){if(o=_xe(r),!s)return Dz(r,o)}else{var f=Sd(r),d=f==Qz||f==S1e;if(bd(r))return Pz(r,s);if(f==Jz||f==Zz||d&&!i){if(o=l||d?{}:Xz(r),!s)return l?sxe(r,Ybe(o,r)):txe(r,Bbe(o,r))}else{if(!oi[f])return i?r:{};o=r1e(r,f,s)}}a||(a=new Wv);var h=a.get(r);if(h)return h;a.set(r,o),v1e(r)?r.forEach(function(g){o.add(yw(g,t,e,g,r,a))}):u1e(r)&&r.forEach(function(g,m){o.set(m,yw(g,t,e,m,r,a))});var v=u?l?fxe:gM:l?xd:Lc,p=c?void 0:v(r);return fM(p||r,function(g,m){p&&(m=g,g=r[m]),dw(o,m,yw(g,t,e,m,r,a))}),o}var e6=yw,G1e=4;function U1e(r){return e6(r,G1e)}var V1e=U1e;function H1e(r){return function(){return r}}var wM=H1e;function W1e(r){return function(t,e,n){for(var i=-1,a=Object(t),o=n(t),s=o.length;s--;){var l=o[r?s:++i];if(e(a[l],l,a)===!1)break}return t}}var j1e=W1e,Y1e=j1e(),SM=Y1e;function X1e(r,t){return r&&SM(r,t,Lc)}var CM=X1e;function q1e(r,t){return function(e,n){if(e==null)return e;if(!_u(e))return r(e,n);for(var i=e.length,a=t?i:-1,o=Object(e);(t?a--:++a<i)&&n(o[a],a,o)!==!1;);return e}}var K1e=q1e,Z1e=K1e(CM),bw=Z1e;function Q1e(r){return r}var Cd=Q1e;function J1e(r){return typeof r=="function"?r:Cd}var t6=J1e;function ewe(r,t){var e=Zi(r)?fM:bw;return e(r,t6(t))}var r6=ewe,n6=r6;function twe(r,t){var e=[];return bw(r,function(n,i,a){t(n,i,a)&&e.push(n)}),e}var rwe=twe,nwe="__lodash_hash_undefined__";function iwe(r){return this.__data__.set(r,nwe),this}var awe=iwe;function owe(r){return this.__data__.has(r)}var swe=owe;function xw(r){var t=-1,e=r==null?0:r.length;for(this.__data__=new uw;++t<e;)this.add(r[t])}xw.prototype.add=xw.prototype.push=awe;xw.prototype.has=swe;var i6=xw;function lwe(r,t){for(var e=-1,n=r==null?0:r.length;++e<n;)if(t(r[e],e,r))return!0;return!1}var uwe=lwe;function cwe(r,t){return r.has(t)}var a6=cwe,fwe=1,dwe=2;function hwe(r,t,e,n,i,a){var o=e&fwe,s=r.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(r),c=a.get(t);if(u&&c)return u==t&&c==r;var f=-1,d=!0,h=e&dwe?new i6:void 0;for(a.set(r,t),a.set(t,r);++f<s;){var v=r[f],p=t[f];if(n)var g=o?n(p,v,f,t,r,a):n(v,p,f,r,t,a);if(g!==void 0){if(g)continue;d=!1;break}if(h){if(!uwe(t,function(m,y){if(!a6(h,y)&&(v===m||i(v,m,e,n,a)))return h.push(y)})){d=!1;break}}else if(!(v===p||i(v,p,e,n,a))){d=!1;break}}return a.delete(r),a.delete(t),d}var o6=hwe;function vwe(r){var t=-1,e=Array(r.size);return r.forEach(function(n,i){e[++t]=[i,n]}),e}var pwe=vwe;function gwe(r){var t=-1,e=Array(r.size);return r.forEach(function(n){e[++t]=n}),e}var EM=gwe,mwe=1,ywe=2,bwe="[object Boolean]",xwe="[object Date]",wwe="[object Error]",Swe="[object Map]",Cwe="[object Number]",Ewe="[object RegExp]",_we="[object Set]",Twe="[object String]",Awe="[object Symbol]",Mwe="[object ArrayBuffer]",kwe="[object DataView]",s6=Ds?Ds.prototype:void 0,_M=s6?s6.valueOf:void 0;function Iwe(r,t,e,n,i,a,o){switch(e){case kwe:if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset)return!1;r=r.buffer,t=t.buffer;case Mwe:return!(r.byteLength!=t.byteLength||!a(new mw(r),new mw(t)));case bwe:case xwe:case Cwe:return zv(+r,+t);case wwe:return r.name==t.name&&r.message==t.message;case Ewe:case Twe:return r==t+"";case Swe:var s=pwe;case _we:var l=n&mwe;if(s||(s=EM),r.size!=t.size&&!l)return!1;var u=o.get(r);if(u)return u==t;n|=ywe,o.set(r,t);var c=o6(s(r),s(t),n,i,a,o);return o.delete(r),c;case Awe:if(_M)return _M.call(r)==_M.call(t)}return!1}var Pwe=Iwe,Dwe=1,Rwe=Object.prototype,Owe=Rwe.hasOwnProperty;function Lwe(r,t,e,n,i,a){var o=e&Dwe,s=gM(r),l=s.length,u=gM(t),c=u.length;if(l!=c&&!o)return!1;for(var f=l;f--;){var d=s[f];if(!(o?d in t:Owe.call(t,d)))return!1}var h=a.get(r),v=a.get(t);if(h&&v)return h==t&&v==r;var p=!0;a.set(r,t),a.set(t,r);for(var g=o;++f<l;){d=s[f];var m=r[d],y=t[d];if(n)var b=o?n(y,m,d,t,r,a):n(m,y,d,r,t,a);if(!(b===void 0?m===y||i(m,y,e,n,a):b)){p=!1;break}g||(g=d=="constructor")}if(p&&!g){var x=r.constructor,w=t.constructor;x!=w&&"constructor"in r&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof w=="function"&&w instanceof w)&&(p=!1)}return a.delete(r),a.delete(t),p}var Fwe=Lwe,Nwe=1,l6="[object Arguments]",u6="[object Array]",ww="[object Object]",Bwe=Object.prototype,c6=Bwe.hasOwnProperty;function $we(r,t,e,n,i,a){var o=Zi(r),s=Zi(t),l=o?u6:Sd(r),u=s?u6:Sd(t);l=l==l6?ww:l,u=u==l6?ww:u;var c=l==ww,f=u==ww,d=l==u;if(d&&bd(r)){if(!bd(t))return!1;o=!0,c=!1}if(d&&!c)return a||(a=new Wv),o||vy(r)?o6(r,t,e,n,i,a):Pwe(r,t,l,e,n,i,a);if(!(e&Nwe)){var h=c&&c6.call(r,"__wrapped__"),v=f&&c6.call(t,"__wrapped__");if(h||v){var p=h?r.value():r,g=v?t.value():t;return a||(a=new Wv),i(p,g,e,n,a)}}return d?(a||(a=new Wv),Fwe(r,t,e,n,i,a)):!1}var zwe=$we;function f6(r,t,e,n,i){return r===t?!0:r==null||t==null||!tl(r)&&!tl(t)?r!==r&&t!==t:zwe(r,t,e,n,f6,i)}var d6=f6,Gwe=1,Uwe=2;function Vwe(r,t,e,n){var i=e.length,a=i,o=!n;if(r==null)return!a;for(r=Object(r);i--;){var s=e[i];if(o&&s[2]?s[1]!==r[s[0]]:!(s[0]in r))return!1}for(;++i<a;){s=e[i];var l=s[0],u=r[l],c=s[1];if(o&&s[2]){if(u===void 0&&!(l in r))return!1}else{var f=new Wv;if(n)var d=n(u,c,l,r,t,f);if(!(d===void 0?d6(c,u,Gwe|Uwe,n,f):d))return!1}}return!0}var Hwe=Vwe;function Wwe(r){return r===r&&!Lo(r)}var h6=Wwe;function jwe(r){for(var t=Lc(r),e=t.length;e--;){var n=t[e],i=r[n];t[e]=[n,i,h6(i)]}return t}var Ywe=jwe;function Xwe(r,t){return function(e){return e==null?!1:e[r]===t&&(t!==void 0||r in Object(e))}}var v6=Xwe;function qwe(r){var t=Ywe(r);return t.length==1&&t[0][2]?v6(t[0][0],t[0][1]):function(e){return e===r||Hwe(e,r,t)}}var Kwe=qwe,Zwe="[object Symbol]";function Qwe(r){return typeof r=="symbol"||tl(r)&&Oc(r)==Zwe}var Ed=Qwe,Jwe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,eSe=/^\w*$/;function tSe(r,t){if(Zi(r))return!1;var e=typeof r;return e=="number"||e=="symbol"||e=="boolean"||r==null||Ed(r)?!0:eSe.test(r)||!Jwe.test(r)||t!=null&&r in Object(t)}var TM=tSe,rSe="Expected a function";function AM(r,t){if(typeof r!="function"||t!=null&&typeof t!="function")throw new TypeError(rSe);var e=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=e.cache;if(a.has(i))return a.get(i);var o=r.apply(this,n);return e.cache=a.set(i,o)||a,o};return e.cache=new(AM.Cache||uw),e}AM.Cache=uw;var nSe=AM,iSe=500;function aSe(r){var t=nSe(r,function(n){return e.size===iSe&&e.clear(),n}),e=t.cache;return t}var oSe=aSe,sSe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lSe=/\\(\\)?/g,uSe=oSe(function(r){var t=[];return r.charCodeAt(0)===46&&t.push(""),r.replace(sSe,function(e,n,i,a){t.push(i?a.replace(lSe,"$1"):n||e)}),t}),cSe=uSe;function fSe(r,t){for(var e=-1,n=r==null?0:r.length,i=Array(n);++e<n;)i[e]=t(r[e],e,r);return i}var qv=fSe,dSe=1/0,p6=Ds?Ds.prototype:void 0,g6=p6?p6.toString:void 0;function m6(r){if(typeof r=="string")return r;if(Zi(r))return qv(r,m6)+"";if(Ed(r))return g6?g6.call(r):"";var t=r+"";return t=="0"&&1/r==-dSe?"-0":t}var hSe=m6;function vSe(r){return r==null?"":hSe(r)}var y6=vSe;function pSe(r,t){return Zi(r)?r:TM(r,t)?[r]:cSe(y6(r))}var Sw=pSe,gSe=1/0;function mSe(r){if(typeof r=="string"||Ed(r))return r;var t=r+"";return t=="0"&&1/r==-gSe?"-0":t}var py=mSe;function ySe(r,t){t=Sw(t,r);for(var e=0,n=t.length;r!=null&&e<n;)r=r[py(t[e++])];return e&&e==n?r:void 0}var Cw=ySe;function bSe(r,t,e){var n=r==null?void 0:Cw(r,t);return n===void 0?e:n}var xSe=bSe;function wSe(r,t){return r!=null&&t in Object(r)}var SSe=wSe;function CSe(r,t,e){t=Sw(t,r);for(var n=-1,i=t.length,a=!1;++n<i;){var o=py(t[n]);if(!(a=r!=null&&e(r,o)))break;r=r[o]}return a||++n!=i?a:(i=r==null?0:r.length,!!i&&dM(i)&&hw(o,i)&&(Zi(r)||jv(r)))}var b6=CSe;function ESe(r,t){return r!=null&&b6(r,t,SSe)}var x6=ESe,_Se=1,TSe=2;function ASe(r,t){return TM(r)&&h6(t)?v6(py(r),t):function(e){var n=xSe(e,r);return n===void 0&&n===t?x6(e,r):d6(t,n,_Se|TSe)}}var MSe=ASe;function kSe(r){return function(t){return t==null?void 0:t[r]}}var w6=kSe;function ISe(r){return function(t){return Cw(t,r)}}var PSe=ISe;function DSe(r){return TM(r)?w6(py(r)):PSe(r)}var RSe=DSe;function OSe(r){return typeof r=="function"?r:r==null?Cd:typeof r=="object"?Zi(r)?MSe(r[0],r[1]):Kwe(r):RSe(r)}var Tu=OSe;function LSe(r,t){var e=Zi(r)?Rz:rwe;return e(r,Tu(t))}var S6=LSe,FSe=Object.prototype,NSe=FSe.hasOwnProperty;function BSe(r,t){return r!=null&&NSe.call(r,t)}var $Se=BSe;function zSe(r,t){return r!=null&&b6(r,t,$Se)}var C6=zSe,GSe="[object Map]",USe="[object Set]",VSe=Object.prototype,HSe=VSe.hasOwnProperty;function WSe(r){if(r==null)return!0;if(_u(r)&&(Zi(r)||typeof r=="string"||typeof r.splice=="function"||bd(r)||vy(r)||jv(r)))return!r.length;var t=Sd(r);if(t==GSe||t==USe)return!r.size;if(pw(r))return!hM(r).length;for(var e in r)if(HSe.call(r,e))return!1;return!0}var jSe=WSe;function YSe(r){return r===void 0}var E6=YSe;function XSe(r,t){var e=-1,n=_u(r)?Array(r.length):[];return bw(r,function(i,a,o){n[++e]=t(i,a,o)}),n}var _6=XSe;function qSe(r,t){var e=Zi(r)?qv:_6;return e(r,Tu(t))}var T6=qSe;function KSe(r,t,e,n){var i=-1,a=r==null?0:r.length;for(n&&a&&(e=r[++i]);++i<a;)e=t(e,r[i],i,r);return e}var ZSe=KSe;function QSe(r,t,e,n,i){return i(r,function(a,o,s){e=n?(n=!1,a):t(e,a,o,s)}),e}var JSe=QSe;function eCe(r,t,e){var n=Zi(r)?ZSe:JSe,i=arguments.length<3;return n(r,Tu(t),e,i,bw)}var A6=eCe,tCe="[object String]";function rCe(r){return typeof r=="string"||!Zi(r)&&tl(r)&&Oc(r)==tCe}var nCe=rCe,iCe=w6("length"),aCe=iCe,oCe="\\ud800-\\udfff",sCe="\\u0300-\\u036f",lCe="\\ufe20-\\ufe2f",uCe="\\u20d0-\\u20ff",cCe=sCe+lCe+uCe,fCe="\\ufe0e\\ufe0f",dCe="\\u200d",hCe=RegExp("["+dCe+oCe+cCe+fCe+"]");function vCe(r){return hCe.test(r)}var pCe=vCe,M6="\\ud800-\\udfff",gCe="\\u0300-\\u036f",mCe="\\ufe20-\\ufe2f",yCe="\\u20d0-\\u20ff",bCe=gCe+mCe+yCe,xCe="\\ufe0e\\ufe0f",wCe="["+M6+"]",MM="["+bCe+"]",kM="\\ud83c[\\udffb-\\udfff]",SCe="(?:"+MM+"|"+kM+")",k6="[^"+M6+"]",I6="(?:\\ud83c[\\udde6-\\uddff]){2}",P6="[\\ud800-\\udbff][\\udc00-\\udfff]",CCe="\\u200d",D6=SCe+"?",R6="["+xCe+"]?",ECe="(?:"+CCe+"(?:"+[k6,I6,P6].join("|")+")"+R6+D6+")*",_Ce=R6+D6+ECe,TCe="(?:"+[k6+MM+"?",MM,I6,P6,wCe].join("|")+")",O6=RegExp(kM+"(?="+kM+")|"+TCe+_Ce,"g");function ACe(r){for(var t=O6.lastIndex=0;O6.test(r);)++t;return t}var MCe=ACe;function kCe(r){return pCe(r)?MCe(r):aCe(r)}var ICe=kCe,PCe="[object Map]",DCe="[object Set]";function RCe(r){if(r==null)return 0;if(_u(r))return nCe(r)?ICe(r):r.length;var t=Sd(r);return t==PCe||t==DCe?r.size:hM(r).length}var OCe=RCe;function LCe(r,t,e){var n=Zi(r),i=n||bd(r)||vy(r);if(t=Tu(t),e==null){var a=r&&r.constructor;i?e=n?new a:[]:Lo(r)?e=cy(a)?Yz(gw(r)):{}:e={}}return(i?fM:CM)(r,function(o,s,l){return t(e,o,s,l)}),e}var FCe=LCe,L6=Ds?Ds.isConcatSpreadable:void 0;function NCe(r){return Zi(r)||jv(r)||!!(L6&&r&&r[L6])}var BCe=NCe;function F6(r,t,e,n,i){var a=-1,o=r.length;for(e||(e=BCe),i||(i=[]);++a<o;){var s=r[a];t>0&&e(s)?t>1?F6(s,t-1,e,n,i):pM(i,s):n||(i[i.length]=s)}return i}var IM=F6;function $Ce(r,t,e){switch(e.length){case 0:return r.call(t);case 1:return r.call(t,e[0]);case 2:return r.call(t,e[0],e[1]);case 3:return r.call(t,e[0],e[1],e[2])}return r.apply(t,e)}var zCe=$Ce,N6=Math.max;function GCe(r,t,e){return t=N6(t===void 0?r.length-1:t,0),function(){for(var n=arguments,i=-1,a=N6(n.length-t,0),o=Array(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=e(o),zCe(r,this,s)}}var B6=GCe,UCe=cw?function(r,t){return cw(r,"toString",{configurable:!0,enumerable:!1,value:wM(t),writable:!0})}:Cd,VCe=UCe,HCe=800,WCe=16,jCe=Date.now;function YCe(r){var t=0,e=0;return function(){var n=jCe(),i=WCe-(n-e);if(e=n,i>0){if(++t>=HCe)return arguments[0]}else t=0;return r.apply(void 0,arguments)}}var XCe=YCe,qCe=XCe(VCe),$6=qCe;function KCe(r,t){return $6(B6(r,t,Cd),r+"")}var Ew=KCe;function ZCe(r,t,e,n){for(var i=r.length,a=e+(n?1:-1);n?a--:++a<i;)if(t(r[a],a,r))return a;return-1}var z6=ZCe;function QCe(r){return r!==r}var JCe=QCe;function e2e(r,t,e){for(var n=e-1,i=r.length;++n<i;)if(r[n]===t)return n;return-1}var t2e=e2e;function r2e(r,t,e){return t===t?t2e(r,t,e):z6(r,JCe,e)}var n2e=r2e;function i2e(r,t){var e=r==null?0:r.length;return!!e&&n2e(r,t,0)>-1}var a2e=i2e;function o2e(r,t,e){for(var n=-1,i=r==null?0:r.length;++n<i;)if(e(t,r[n]))return!0;return!1}var s2e=o2e;function l2e(){}var u2e=l2e,c2e=1/0,f2e=Xv&&1/EM(new Xv([,-0]))[1]==c2e?function(r){return new Xv(r)}:u2e,d2e=f2e,h2e=200;function v2e(r,t,e){var n=-1,i=a2e,a=r.length,o=!0,s=[],l=s;if(e)o=!1,i=s2e;else if(a>=h2e){var u=t?null:d2e(r);if(u)return EM(u);o=!1,i=a6,l=new i6}else l=t?[]:s;e:for(;++n<a;){var c=r[n],f=t?t(c):c;if(c=e||c!==0?c:0,o&&f===f){for(var d=l.length;d--;)if(l[d]===f)continue e;t&&l.push(f),s.push(c)}else i(l,f,e)||(l!==s&&l.push(f),s.push(c))}return s}var p2e=v2e;function g2e(r){return tl(r)&&_u(r)}var G6=g2e,m2e=Ew(function(r){return p2e(IM(r,1,G6,!0))}),y2e=m2e;function b2e(r,t){return qv(t,function(e){return r[e]})}var x2e=b2e;function w2e(r){return r==null?[]:x2e(r,Lc(r))}var U6=w2e,_w;if(typeof IA=="function")try{_w={clone:V1e,constant:wM,each:n6,filter:S6,has:C6,isArray:Zi,isEmpty:jSe,isFunction:cy,isUndefined:E6,keys:Lc,map:T6,reduce:A6,size:OCe,transform:FCe,union:y2e,values:U6}}catch{}_w||(_w=window._);var qt=_w,PM=vn,S2e="\0",_d="\0",V6="";function vn(r){this._isDirected=qt.has(r,"directed")?r.directed:!0,this._isMultigraph=qt.has(r,"multigraph")?r.multigraph:!1,this._isCompound=qt.has(r,"compound")?r.compound:!1,this._label=void 0,this._defaultNodeLabelFn=qt.constant(void 0),this._defaultEdgeLabelFn=qt.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[_d]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}vn.prototype._nodeCount=0;vn.prototype._edgeCount=0;vn.prototype.isDirected=function(){return this._isDirected};vn.prototype.isMultigraph=function(){return this._isMultigraph};vn.prototype.isCompound=function(){return this._isCompound};vn.prototype.setGraph=function(r){return this._label=r,this};vn.prototype.graph=function(){return this._label};vn.prototype.setDefaultNodeLabel=function(r){return qt.isFunction(r)||(r=qt.constant(r)),this._defaultNodeLabelFn=r,this};vn.prototype.nodeCount=function(){return this._nodeCount};vn.prototype.nodes=function(){return qt.keys(this._nodes)};vn.prototype.sources=function(){var r=this;return qt.filter(this.nodes(),function(t){return qt.isEmpty(r._in[t])})};vn.prototype.sinks=function(){var r=this;return qt.filter(this.nodes(),function(t){return qt.isEmpty(r._out[t])})};vn.prototype.setNodes=function(r,t){var e=arguments,n=this;return qt.each(r,function(i){e.length>1?n.setNode(i,t):n.setNode(i)}),this};vn.prototype.setNode=function(r,t){return qt.has(this._nodes,r)?(arguments.length>1&&(this._nodes[r]=t),this):(this._nodes[r]=arguments.length>1?t:this._defaultNodeLabelFn(r),this._isCompound&&(this._parent[r]=_d,this._children[r]={},this._children[_d][r]=!0),this._in[r]={},this._preds[r]={},this._out[r]={},this._sucs[r]={},++this._nodeCount,this)};vn.prototype.node=function(r){return this._nodes[r]};vn.prototype.hasNode=function(r){return qt.has(this._nodes,r)};vn.prototype.removeNode=function(r){var t=this;if(qt.has(this._nodes,r)){var e=function(n){t.removeEdge(t._edgeObjs[n])};delete this._nodes[r],this._isCompound&&(this._removeFromParentsChildList(r),delete this._parent[r],qt.each(this.children(r),function(n){t.setParent(n)}),delete this._children[r]),qt.each(qt.keys(this._in[r]),e),delete this._in[r],delete this._preds[r],qt.each(qt.keys(this._out[r]),e),delete this._out[r],delete this._sucs[r],--this._nodeCount}return this};vn.prototype.setParent=function(r,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(qt.isUndefined(t))t=_d;else{t+="";for(var e=t;!qt.isUndefined(e);e=this.parent(e))if(e===r)throw new Error("Setting "+t+" as parent of "+r+" would create a cycle");this.setNode(t)}return this.setNode(r),this._removeFromParentsChildList(r),this._parent[r]=t,this._children[t][r]=!0,this};vn.prototype._removeFromParentsChildList=function(r){delete this._children[this._parent[r]][r]};vn.prototype.parent=function(r){if(this._isCompound){var t=this._parent[r];if(t!==_d)return t}};vn.prototype.children=function(r){if(qt.isUndefined(r)&&(r=_d),this._isCompound){var t=this._children[r];if(t)return qt.keys(t)}else{if(r===_d)return this.nodes();if(this.hasNode(r))return[]}};vn.prototype.predecessors=function(r){var t=this._preds[r];if(t)return qt.keys(t)};vn.prototype.successors=function(r){var t=this._sucs[r];if(t)return qt.keys(t)};vn.prototype.neighbors=function(r){var t=this.predecessors(r);if(t)return qt.union(t,this.successors(r))};vn.prototype.isLeaf=function(r){var t;return this.isDirected()?t=this.successors(r):t=this.neighbors(r),t.length===0};vn.prototype.filterNodes=function(r){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var e=this;qt.each(this._nodes,function(a,o){r(o)&&t.setNode(o,a)}),qt.each(this._edgeObjs,function(a){t.hasNode(a.v)&&t.hasNode(a.w)&&t.setEdge(a,e.edge(a))});var n={};function i(a){var o=e.parent(a);return o===void 0||t.hasNode(o)?(n[a]=o,o):o in n?n[o]:i(o)}return this._isCompound&&qt.each(t.nodes(),function(a){t.setParent(a,i(a))}),t};vn.prototype.setDefaultEdgeLabel=function(r){return qt.isFunction(r)||(r=qt.constant(r)),this._defaultEdgeLabelFn=r,this};vn.prototype.edgeCount=function(){return this._edgeCount};vn.prototype.edges=function(){return qt.values(this._edgeObjs)};vn.prototype.setPath=function(r,t){var e=this,n=arguments;return qt.reduce(r,function(i,a){return n.length>1?e.setEdge(i,a,t):e.setEdge(i,a),a}),this};vn.prototype.setEdge=function(){var r,t,e,n,i=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(r=a.v,t=a.w,e=a.name,arguments.length===2&&(n=arguments[1],i=!0)):(r=a,t=arguments[1],e=arguments[3],arguments.length>2&&(n=arguments[2],i=!0)),r=""+r,t=""+t,qt.isUndefined(e)||(e=""+e);var o=gy(this._isDirected,r,t,e);if(qt.has(this._edgeLabels,o))return i&&(this._edgeLabels[o]=n),this;if(!qt.isUndefined(e)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(r),this.setNode(t),this._edgeLabels[o]=i?n:this._defaultEdgeLabelFn(r,t,e);var s=C2e(this._isDirected,r,t,e);return r=s.v,t=s.w,Object.freeze(s),this._edgeObjs[o]=s,H6(this._preds[t],r),H6(this._sucs[r],t),this._in[t][o]=s,this._out[r][o]=s,this._edgeCount++,this};vn.prototype.edge=function(r,t,e){var n=arguments.length===1?DM(this._isDirected,arguments[0]):gy(this._isDirected,r,t,e);return this._edgeLabels[n]};vn.prototype.hasEdge=function(r,t,e){var n=arguments.length===1?DM(this._isDirected,arguments[0]):gy(this._isDirected,r,t,e);return qt.has(this._edgeLabels,n)};vn.prototype.removeEdge=function(r,t,e){var n=arguments.length===1?DM(this._isDirected,arguments[0]):gy(this._isDirected,r,t,e),i=this._edgeObjs[n];return i&&(r=i.v,t=i.w,delete this._edgeLabels[n],delete this._edgeObjs[n],W6(this._preds[t],r),W6(this._sucs[r],t),delete this._in[t][n],delete this._out[r][n],this._edgeCount--),this};vn.prototype.inEdges=function(r,t){var e=this._in[r];if(e){var n=qt.values(e);return t?qt.filter(n,function(i){return i.v===t}):n}};vn.prototype.outEdges=function(r,t){var e=this._out[r];if(e){var n=qt.values(e);return t?qt.filter(n,function(i){return i.w===t}):n}};vn.prototype.nodeEdges=function(r,t){var e=this.inEdges(r,t);if(e)return e.concat(this.outEdges(r,t))};function H6(r,t){r[t]?r[t]++:r[t]=1}function W6(r,t){--r[t]||delete r[t]}function gy(r,t,e,n){var i=""+t,a=""+e;if(!r&&i>a){var o=i;i=a,a=o}return i+V6+a+V6+(qt.isUndefined(n)?S2e:n)}function C2e(r,t,e,n){var i=""+t,a=""+e;if(!r&&i>a){var o=i;i=a,a=o}var s={v:i,w:a};return n&&(s.name=n),s}function DM(r,t){return gy(r,t.v,t.w,t.name)}var E2e="2.1.8",j6={Graph:PM,version:E2e},RM={write:_2e,read:M2e};function _2e(r){var t={options:{directed:r.isDirected(),multigraph:r.isMultigraph(),compound:r.isCompound()},nodes:T2e(r),edges:A2e(r)};return qt.isUndefined(r.graph())||(t.value=qt.clone(r.graph())),t}function T2e(r){return qt.map(r.nodes(),function(t){var e=r.node(t),n=r.parent(t),i={v:t};return qt.isUndefined(e)||(i.value=e),qt.isUndefined(n)||(i.parent=n),i})}function A2e(r){return qt.map(r.edges(),function(t){var e=r.edge(t),n={v:t.v,w:t.w};return qt.isUndefined(t.name)||(n.name=t.name),qt.isUndefined(e)||(n.value=e),n})}function M2e(r){var t=new PM(r.options).setGraph(r.value);return qt.each(r.nodes,function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),qt.each(r.edges,function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}RM.write;RM.read;var k2e=I2e;function I2e(r){var t={},e=[],n;function i(a){qt.has(t,a)||(t[a]=!0,n.push(a),qt.each(r.successors(a),i),qt.each(r.predecessors(a),i))}return qt.each(r.nodes(),function(a){n=[],i(a),n.length&&e.push(n)}),e}var Y6=Rs;function Rs(){this._arr=[],this._keyIndices={}}Rs.prototype.size=function(){return this._arr.length};Rs.prototype.keys=function(){return this._arr.map(function(r){return r.key})};Rs.prototype.has=function(r){return qt.has(this._keyIndices,r)};Rs.prototype.priority=function(r){var t=this._keyIndices[r];if(t!==void 0)return this._arr[t].priority};Rs.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key};Rs.prototype.add=function(r,t){var e=this._keyIndices;if(r=String(r),!qt.has(e,r)){var n=this._arr,i=n.length;return e[r]=i,n.push({key:r,priority:t}),this._decrease(i),!0}return!1};Rs.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key};Rs.prototype.decrease=function(r,t){var e=this._keyIndices[r];if(t>this._arr[e].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[e].priority+" New: "+t);this._arr[e].priority=t,this._decrease(e)};Rs.prototype._heapify=function(r){var t=this._arr,e=2*r,n=e+1,i=r;e<t.length&&(i=t[e].priority<t[i].priority?e:i,n<t.length&&(i=t[n].priority<t[i].priority?n:i),i!==r&&(this._swap(r,i),this._heapify(i)))};Rs.prototype._decrease=function(r){for(var t=this._arr,e=t[r].priority,n;r!==0&&(n=r>>1,!(t[n].priority<e));)this._swap(r,n),r=n};Rs.prototype._swap=function(r,t){var e=this._arr,n=this._keyIndices,i=e[r],a=e[t];e[r]=a,e[t]=i,n[a.key]=r,n[i.key]=t};var X6=D2e,P2e=qt.constant(1);function D2e(r,t,e,n){return R2e(r,String(t),e||P2e,n||function(i){return r.outEdges(i)})}function R2e(r,t,e,n){var i={},a=new Y6,o,s,l=function(u){var c=u.v!==o?u.v:u.w,f=i[c],d=e(u),h=s.distance+d;if(d<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+u+" Weight: "+d);h<f.distance&&(f.distance=h,f.predecessor=o,a.decrease(c,h))};for(r.nodes().forEach(function(u){var c=u===t?0:Number.POSITIVE_INFINITY;i[u]={distance:c},a.add(u,c)});a.size()>0&&(o=a.removeMin(),s=i[o],s.distance!==Number.POSITIVE_INFINITY);)n(o).forEach(l);return i}var O2e=L2e;function L2e(r,t,e){return qt.transform(r.nodes(),function(n,i){n[i]=X6(r,i,t,e)},{})}var q6=F2e;function F2e(r){var t=0,e=[],n={},i=[];function a(o){var s=n[o]={onStack:!0,lowlink:t,index:t++};if(e.push(o),r.successors(o).forEach(function(c){qt.has(n,c)?n[c].onStack&&(s.lowlink=Math.min(s.lowlink,n[c].index)):(a(c),s.lowlink=Math.min(s.lowlink,n[c].lowlink))}),s.lowlink===s.index){var l=[],u;do u=e.pop(),n[u].onStack=!1,l.push(u);while(o!==u);i.push(l)}}return r.nodes().forEach(function(o){qt.has(n,o)||a(o)}),i}var N2e=B2e;function B2e(r){return qt.filter(q6(r),function(t){return t.length>1||t.length===1&&r.hasEdge(t[0],t[0])})}var $2e=G2e,z2e=qt.constant(1);function G2e(r,t,e){return U2e(r,t||z2e,e||function(n){return r.outEdges(n)})}function U2e(r,t,e){var n={},i=r.nodes();return i.forEach(function(a){n[a]={},n[a][a]={distance:0},i.forEach(function(o){a!==o&&(n[a][o]={distance:Number.POSITIVE_INFINITY})}),e(a).forEach(function(o){var s=o.v===a?o.w:o.v,l=t(o);n[a][s]={distance:l,predecessor:a}})}),i.forEach(function(a){var o=n[a];i.forEach(function(s){var l=n[s];i.forEach(function(u){var c=l[a],f=o[u],d=l[u],h=c.distance+f.distance;h<d.distance&&(d.distance=h,d.predecessor=f.predecessor)})})}),n}var OM=K6;K6.CycleException=Tw;function K6(r){var t={},e={},n=[];function i(a){if(qt.has(e,a))throw new Tw;qt.has(t,a)||(e[a]=!0,t[a]=!0,qt.each(r.predecessors(a),i),delete e[a],n.push(a))}if(qt.each(r.sinks(),i),qt.size(t)!==r.nodeCount())throw new Tw;return n}function Tw(){}Tw.prototype=new Error;var V2e=H2e;function H2e(r){try{OM(r)}catch(t){if(t instanceof OM.CycleException)return!1;throw t}return!0}var Z6=W2e;function W2e(r,t,e){qt.isArray(t)||(t=[t]);var n=(r.isDirected()?r.successors:r.neighbors).bind(r),i=[],a={};return qt.each(t,function(o){if(!r.hasNode(o))throw new Error("Graph does not have node: "+o);Q6(r,o,e==="post",a,n,i)}),i}function Q6(r,t,e,n,i,a){qt.has(n,t)||(n[t]=!0,e||a.push(t),qt.each(i(t),function(o){Q6(r,o,e,n,i,a)}),e&&a.push(t))}var j2e=Y2e;function Y2e(r,t){return Z6(r,t,"post")}var X2e=q2e;function q2e(r,t){return Z6(r,t,"pre")}var K2e=Z2e;function Z2e(r,t){var e=new PM,n={},i=new Y6,a;function o(l){var u=l.v===a?l.w:l.v,c=i.priority(u);if(c!==void 0){var f=t(l);f<c&&(n[u]=a,i.decrease(u,f))}}if(r.nodeCount()===0)return e;qt.each(r.nodes(),function(l){i.add(l,Number.POSITIVE_INFINITY),e.setNode(l)}),i.decrease(r.nodes()[0],0);for(var s=!1;i.size()>0;){if(a=i.removeMin(),qt.has(n,a))e.setEdge(a,n[a]);else{if(s)throw new Error("Input graph is not connected: "+r);s=!0}r.nodeEdges(a).forEach(o)}return e}var Os={components:k2e,dijkstra:X6,dijkstraAll:O2e,findCycles:N2e,floydWarshall:$2e,isAcyclic:V2e,postorder:j2e,preorder:X2e,prim:K2e,tarjan:q6,topsort:OM};Os.components;Os.dijkstra;Os.dijkstraAll;Os.findCycles;Os.floydWarshall;Os.isAcyclic;Os.postorder;Os.preorder;Os.prim;Os.tarjan;Os.topsort;var my={Graph:j6.Graph,json:RM,alg:Os,version:j6.version};my.Graph;my.json;my.alg;my.version;var Aw;if(typeof IA=="function")try{Aw=my}catch{}Aw||(Aw=window.graphlib);var rl=Aw,Q2e=1,J2e=4;function eEe(r){return e6(r,Q2e|J2e)}var tEe=eEe;function rEe(r,t,e){if(!Lo(e))return!1;var n=typeof t;return(n=="number"?_u(e)&&hw(t,e.length):n=="string"&&t in e)?zv(e[t],r):!1}var yy=rEe,J6=Object.prototype,nEe=J6.hasOwnProperty,iEe=Ew(function(r,t){r=Object(r);var e=-1,n=t.length,i=n>2?t[2]:void 0;for(i&&yy(t[0],t[1],i)&&(n=1);++e<n;)for(var a=t[e],o=xd(a),s=-1,l=o.length;++s<l;){var u=o[s],c=r[u];(c===void 0||zv(c,J6[u])&&!nEe.call(r,u))&&(r[u]=a[u])}return r}),aEe=iEe;function oEe(r){return function(t,e,n){var i=Object(t);if(!_u(t)){var a=Tu(e);t=Lc(t),e=function(s){return a(i[s],s,i)}}var o=r(t,e,n);return o>-1?i[a?t[o]:o]:void 0}}var sEe=oEe,lEe=/\s/;function uEe(r){for(var t=r.length;t--&&lEe.test(r.charAt(t)););return t}var cEe=uEe,fEe=/^\s+/;function dEe(r){return r&&r.slice(0,cEe(r)+1).replace(fEe,"")}var hEe=dEe,eG=0/0,vEe=/^[-+]0x[0-9a-f]+$/i,pEe=/^0b[01]+$/i,gEe=/^0o[0-7]+$/i,mEe=parseInt;function yEe(r){if(typeof r=="number")return r;if(Ed(r))return eG;if(Lo(r)){var t=typeof r.valueOf=="function"?r.valueOf():r;r=Lo(t)?t+"":t}if(typeof r!="string")return r===0?r:+r;r=hEe(r);var e=pEe.test(r);return e||gEe.test(r)?mEe(r.slice(2),e?2:8):vEe.test(r)?eG:+r}var bEe=yEe,tG=1/0,xEe=17976931348623157e292;function wEe(r){if(!r)return r===0?r:0;if(r=bEe(r),r===tG||r===-tG){var t=r<0?-1:1;return t*xEe}return r===r?r:0}var Mw=wEe;function SEe(r){var t=Mw(r),e=t%1;return t===t?e?t-e:t:0}var CEe=SEe,EEe=Math.max;function _Ee(r,t,e){var n=r==null?0:r.length;if(!n)return-1;var i=e==null?0:CEe(e);return i<0&&(i=EEe(n+i,0)),z6(r,Tu(t),i)}var TEe=_Ee,AEe=sEe(TEe),MEe=AEe;function kEe(r){var t=r==null?0:r.length;return t?IM(r,1):[]}var rG=kEe;function IEe(r,t){return r==null?r:SM(r,t6(t),xd)}var PEe=IEe;function DEe(r){var t=r==null?0:r.length;return t?r[t-1]:void 0}var REe=DEe;function OEe(r,t){var e={};return t=Tu(t),CM(r,function(n,i,a){fw(e,i,t(n,i,a))}),e}var LEe=OEe;function FEe(r,t,e){for(var n=-1,i=r.length;++n<i;){var a=r[n],o=t(a);if(o!=null&&(s===void 0?o===o&&!Ed(o):e(o,s)))var s=o,l=a}return l}var LM=FEe;function NEe(r,t){return r>t}var BEe=NEe;function $Ee(r){return r&&r.length?LM(r,Cd,BEe):void 0}var zEe=$Ee;function GEe(r,t,e){(e!==void 0&&!zv(r[t],e)||e===void 0&&!(t in r))&&fw(r,t,e)}var FM=GEe,UEe="[object Object]",VEe=Function.prototype,HEe=Object.prototype,nG=VEe.toString,WEe=HEe.hasOwnProperty,jEe=nG.call(Object);function YEe(r){if(!tl(r)||Oc(r)!=UEe)return!1;var t=gw(r);if(t===null)return!0;var e=WEe.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&nG.call(e)==jEe}var XEe=YEe;function qEe(r,t){if(!(t==="constructor"&&typeof r[t]=="function")&&t!="__proto__")return r[t]}var NM=qEe;function KEe(r){return hy(r,xd(r))}var ZEe=KEe;function QEe(r,t,e,n,i,a,o){var s=NM(r,e),l=NM(t,e),u=o.get(l);if(u){FM(r,e,u);return}var c=a?a(s,l,e+"",r,t,o):void 0,f=c===void 0;if(f){var d=Zi(l),h=!d&&bd(l),v=!d&&!h&&vy(l);c=l,d||h||v?Zi(s)?c=s:G6(s)?c=Dz(s):h?(f=!1,c=Pz(l,!0)):v?(f=!1,c=Wz(l,!0)):c=[]:XEe(l)||jv(l)?(c=s,jv(s)?c=ZEe(s):(!Lo(s)||cy(s))&&(c=Xz(l))):f=!1}f&&(o.set(l,c),i(c,l,n,a,o),o.delete(l)),FM(r,e,c)}var JEe=QEe;function iG(r,t,e,n,i){r!==t&&SM(t,function(a,o){if(i||(i=new Wv),Lo(a))JEe(r,t,o,e,iG,n,i);else{var s=n?n(NM(r,o),a,o+"",r,t,i):void 0;s===void 0&&(s=a),FM(r,o,s)}},xd)}var e_e=iG;function t_e(r){return Ew(function(t,e){var n=-1,i=e.length,a=i>1?e[i-1]:void 0,o=i>2?e[2]:void 0;for(a=r.length>3&&typeof a=="function"?(i--,a):void 0,o&&yy(e[0],e[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var s=e[n];s&&r(t,s,n,a)}return t})}var r_e=t_e,n_e=r_e(function(r,t,e){e_e(r,t,e)}),i_e=n_e;function a_e(r,t){return r<t}var aG=a_e;function o_e(r){return r&&r.length?LM(r,Cd,aG):void 0}var s_e=o_e;function l_e(r,t){return r&&r.length?LM(r,Tu(t),aG):void 0}var u_e=l_e,c_e=function(){return el.Date.now()},f_e=c_e;function d_e(r,t,e,n){if(!Lo(r))return r;t=Sw(t,r);for(var i=-1,a=t.length,o=a-1,s=r;s!=null&&++i<a;){var l=py(t[i]),u=e;if(l==="__proto__"||l==="constructor"||l==="prototype")return r;if(i!=o){var c=s[l];u=n?n(c,l,s):void 0,u===void 0&&(u=Lo(c)?c:hw(t[i+1])?[]:{})}dw(s,l,u),s=s[l]}return r}var h_e=d_e;function v_e(r,t,e){for(var n=-1,i=t.length,a={};++n<i;){var o=t[n],s=Cw(r,o);e(s,o)&&h_e(a,Sw(o,r),s)}return a}var p_e=v_e;function g_e(r,t){return p_e(r,t,function(e,n){return x6(r,n)})}var m_e=g_e;function y_e(r){return $6(B6(r,void 0,rG),r+"")}var b_e=y_e,x_e=b_e(function(r,t){return r==null?{}:m_e(r,t)}),w_e=x_e,S_e=Math.ceil,C_e=Math.max;function E_e(r,t,e,n){for(var i=-1,a=C_e(S_e((t-r)/(e||1)),0),o=Array(a);a--;)o[n?a:++i]=r,r+=e;return o}var __e=E_e;function T_e(r){return function(t,e,n){return n&&typeof n!="number"&&yy(t,e,n)&&(e=n=void 0),t=Mw(t),e===void 0?(e=t,t=0):e=Mw(e),n=n===void 0?t<e?1:-1:Mw(n),__e(t,e,n,r)}}var A_e=T_e,M_e=A_e(),k_e=M_e;function I_e(r,t){var e=r.length;for(r.sort(t);e--;)r[e]=r[e].value;return r}var P_e=I_e;function D_e(r,t){if(r!==t){var e=r!==void 0,n=r===null,i=r===r,a=Ed(r),o=t!==void 0,s=t===null,l=t===t,u=Ed(t);if(!s&&!u&&!a&&r>t||a&&o&&l&&!s&&!u||n&&o&&l||!e&&l||!i)return 1;if(!n&&!a&&!u&&r<t||u&&e&&i&&!n&&!a||s&&e&&i||!o&&i||!l)return-1}return 0}var R_e=D_e;function O_e(r,t,e){for(var n=-1,i=r.criteria,a=t.criteria,o=i.length,s=e.length;++n<o;){var l=R_e(i[n],a[n]);if(l){if(n>=s)return l;var u=e[n];return l*(u=="desc"?-1:1)}}return r.index-t.index}var L_e=O_e;function F_e(r,t,e){t.length?t=qv(t,function(a){return Zi(a)?function(o){return Cw(o,a.length===1?a[0]:a)}:a}):t=[Cd];var n=-1;t=qv(t,vw(Tu));var i=_6(r,function(a,o,s){var l=qv(t,function(u){return u(a)});return{criteria:l,index:++n,value:a}});return P_e(i,function(a,o){return L_e(a,o,e)})}var N_e=F_e,B_e=Ew(function(r,t){if(r==null)return[];var e=t.length;return e>1&&yy(r,t[0],t[1])?t=[]:e>2&&yy(t[0],t[1],t[2])&&(t=[t[0]]),N_e(r,IM(t,1),[])}),$_e=B_e,z_e=0;function G_e(r){var t=++z_e;return y6(r)+t}var U_e=G_e;function V_e(r,t,e){for(var n=-1,i=r.length,a=t.length,o={};++n<i;){var s=n<a?t[n]:void 0;e(o,r[n],s)}return o}var H_e=V_e;function W_e(r,t){return H_e(r||[],t||[],dw)}var j_e=W_e,kw;if(typeof IA=="function")try{kw={cloneDeep:tEe,constant:wM,defaults:aEe,each:n6,filter:S6,find:MEe,flatten:rG,forEach:r6,forIn:PEe,has:C6,isUndefined:E6,last:REe,map:T6,mapValues:LEe,max:zEe,merge:i_e,min:s_e,minBy:u_e,now:f_e,pick:w_e,range:k_e,reduce:A6,sortBy:$_e,uniqueId:U_e,values:U6,zipObject:j_e}}catch{}kw||(kw=window._);var pe=kw,Y_e=Iw;function Iw(){var r={};r._next=r._prev=r,this._sentinel=r}Iw.prototype.dequeue=function(){var r=this._sentinel,t=r._prev;if(t!==r)return oG(t),t};Iw.prototype.enqueue=function(r){var t=this._sentinel;r._prev&&r._next&&oG(r),r._next=t._next,t._next._prev=r,t._next=r,r._prev=t};Iw.prototype.toString=function(){for(var r=[],t=this._sentinel,e=t._prev;e!==t;)r.push(JSON.stringify(e,X_e)),e=e._prev;return"["+r.join(", ")+"]"};function oG(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function X_e(r,t){if(r!=="_next"&&r!=="_prev")return t}var q_e=rl.Graph,K_e=Q_e,Z_e=pe.constant(1);function Q_e(r,t){if(r.nodeCount()<=1)return[];var e=eTe(r,t||Z_e),n=J_e(e.graph,e.buckets,e.zeroIdx);return pe.flatten(pe.map(n,function(i){return r.outEdges(i.v,i.w)}),!0)}function J_e(r,t,e){for(var n=[],i=t[t.length-1],a=t[0],o;r.nodeCount();){for(;o=a.dequeue();)BM(r,t,e,o);for(;o=i.dequeue();)BM(r,t,e,o);if(r.nodeCount()){for(var s=t.length-2;s>0;--s)if(o=t[s].dequeue(),o){n=n.concat(BM(r,t,e,o,!0));break}}}return n}function BM(r,t,e,n,i){var a=i?[]:void 0;return pe.forEach(r.inEdges(n.v),function(o){var s=r.edge(o),l=r.node(o.v);i&&a.push({v:o.v,w:o.w}),l.out-=s,$M(t,e,l)}),pe.forEach(r.outEdges(n.v),function(o){var s=r.edge(o),l=o.w,u=r.node(l);u.in-=s,$M(t,e,u)}),r.removeNode(n.v),a}function eTe(r,t){var e=new q_e,n=0,i=0;pe.forEach(r.nodes(),function(s){e.setNode(s,{v:s,in:0,out:0})}),pe.forEach(r.edges(),function(s){var l=e.edge(s.v,s.w)||0,u=t(s),c=l+u;e.setEdge(s.v,s.w,c),i=Math.max(i,e.node(s.v).out+=u),n=Math.max(n,e.node(s.w).in+=u)});var a=pe.range(i+n+3).map(function(){return new Y_e}),o=n+1;return pe.forEach(e.nodes(),function(s){$M(a,o,e.node(s))}),{graph:e,buckets:a,zeroIdx:o}}function $M(r,t,e){e.out?e.in?r[e.out-e.in+t].enqueue(e):r[r.length-1].enqueue(e):r[0].enqueue(e)}var sG={run:tTe,undo:nTe};function tTe(r){var t=r.graph().acyclicer==="greedy"?K_e(r,e(r)):rTe(r);pe.forEach(t,function(n){var i=r.edge(n);r.removeEdge(n),i.forwardName=n.name,i.reversed=!0,r.setEdge(n.w,n.v,i,pe.uniqueId("rev"))});function e(n){return function(i){return n.edge(i).weight}}}function rTe(r){var t=[],e={},n={};function i(a){pe.has(n,a)||(n[a]=!0,e[a]=!0,pe.forEach(r.outEdges(a),function(o){pe.has(e,o.w)?t.push(o):i(o.w)}),delete e[a])}return pe.forEach(r.nodes(),i),t}function nTe(r){pe.forEach(r.edges(),function(t){var e=r.edge(t);if(e.reversed){r.removeEdge(t);var n=e.forwardName;delete e.reversed,delete e.forwardName,r.setEdge(t.w,t.v,e,n)}})}var lG=rl.Graph,xa={addDummyNode:uG,simplify:iTe,asNonCompoundGraph:aTe,successorWeights:oTe,predecessorWeights:sTe,intersectRect:lTe,buildLayerMatrix:uTe,normalizeRanks:cTe,removeEmptyRanks:fTe,addBorderNode:dTe,maxRank:cG,partition:hTe,time:vTe,notime:pTe};function uG(r,t,e,n){var i;do i=pe.uniqueId(n);while(r.hasNode(i));return e.dummy=t,r.setNode(i,e),i}function iTe(r){var t=new lG().setGraph(r.graph());return pe.forEach(r.nodes(),function(e){t.setNode(e,r.node(e))}),pe.forEach(r.edges(),function(e){var n=t.edge(e.v,e.w)||{weight:0,minlen:1},i=r.edge(e);t.setEdge(e.v,e.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})}),t}function aTe(r){var t=new lG({multigraph:r.isMultigraph()}).setGraph(r.graph());return pe.forEach(r.nodes(),function(e){r.children(e).length||t.setNode(e,r.node(e))}),pe.forEach(r.edges(),function(e){t.setEdge(e,r.edge(e))}),t}function oTe(r){var t=pe.map(r.nodes(),function(e){var n={};return pe.forEach(r.outEdges(e),function(i){n[i.w]=(n[i.w]||0)+r.edge(i).weight}),n});return pe.zipObject(r.nodes(),t)}function sTe(r){var t=pe.map(r.nodes(),function(e){var n={};return pe.forEach(r.inEdges(e),function(i){n[i.v]=(n[i.v]||0)+r.edge(i).weight}),n});return pe.zipObject(r.nodes(),t)}function lTe(r,t){var e=r.x,n=r.y,i=t.x-e,a=t.y-n,o=r.width/2,s=r.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(a)*o>Math.abs(i)*s?(a<0&&(s=-s),l=s*i/a,u=s):(i<0&&(o=-o),l=o,u=o*a/i),{x:e+l,y:n+u}}function uTe(r){var t=pe.map(pe.range(cG(r)+1),function(){return[]});return pe.forEach(r.nodes(),function(e){var n=r.node(e),i=n.rank;pe.isUndefined(i)||(t[i][n.order]=e)}),t}function cTe(r){var t=pe.min(pe.map(r.nodes(),function(e){return r.node(e).rank}));pe.forEach(r.nodes(),function(e){var n=r.node(e);pe.has(n,"rank")&&(n.rank-=t)})}function fTe(r){var t=pe.min(pe.map(r.nodes(),function(a){return r.node(a).rank})),e=[];pe.forEach(r.nodes(),function(a){var o=r.node(a).rank-t;e[o]||(e[o]=[]),e[o].push(a)});var n=0,i=r.graph().nodeRankFactor;pe.forEach(e,function(a,o){pe.isUndefined(a)&&o%i!=0?--n:n&&pe.forEach(a,function(s){r.node(s).rank+=n})})}function dTe(r,t,e,n){var i={width:0,height:0};return arguments.length>=4&&(i.rank=e,i.order=n),uG(r,"border",i,t)}function cG(r){return pe.max(pe.map(r.nodes(),function(t){var e=r.node(t).rank;if(!pe.isUndefined(e))return e}))}function hTe(r,t){var e={lhs:[],rhs:[]};return pe.forEach(r,function(n){t(n)?e.lhs.push(n):e.rhs.push(n)}),e}function vTe(r,t){var e=pe.now();try{return t()}finally{console.log(r+" time: "+(pe.now()-e)+"ms")}}function pTe(r,t){return t()}var fG={run:gTe,undo:yTe};function gTe(r){r.graph().dummyChains=[],pe.forEach(r.edges(),function(t){mTe(r,t)})}function mTe(r,t){var e=t.v,n=r.node(e).rank,i=t.w,a=r.node(i).rank,o=t.name,s=r.edge(t),l=s.labelRank;if(a!==n+1){r.removeEdge(t);var u,c,f;for(f=0,++n;n<a;++f,++n)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:t,rank:n},u=xa.addDummyNode(r,"edge",c,"_d"),n===l&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),r.setEdge(e,u,{weight:s.weight},o),f===0&&r.graph().dummyChains.push(u),e=u;r.setEdge(e,i,{weight:s.weight},o)}}function yTe(r){pe.forEach(r.graph().dummyChains,function(t){var e=r.node(t),n=e.edgeLabel,i;for(r.setEdge(e.edgeObj,n);e.dummy;)i=r.successors(t)[0],r.removeNode(t),n.points.push({x:e.x,y:e.y}),e.dummy==="edge-label"&&(n.x=e.x,n.y=e.y,n.width=e.width,n.height=e.height),t=i,e=r.node(t)})}var Pw={longestPath:bTe,longestPathWithLayer:xTe,slack:wTe};function bTe(r){var t={};function e(n){var i=r.node(n);if(pe.has(t,n))return i.rank;t[n]=!0;var a=pe.min(pe.map(r.outEdges(n),function(o){return e(o.w)-r.edge(o).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}pe.forEach(r.sources(),e)}function xTe(r){var t={},e=0;function n(a){var o=r.node(a);if(pe.has(t,a))return o.rank;t[a]=!0;var s=pe.min(pe.map(r.outEdges(a),function(l){return n(l.w)-r.edge(l).minlen}));return(s===Number.POSITIVE_INFINITY||s===void 0||s===null)&&(s=0),o.rank=s,e=Math.min(o.rank,e),o.rank}pe.forEach(r.sources(),n),e+=1;function i(a,o){var s=r.node(a),l=isNaN(s.layer)?o:s.layer;(s.rank===void 0||s.rank<l)&&(s.rank=l),pe.map(r.outEdges(a),function(u){i(u.w,l+r.edge(u).minlen)})}r.nodes().forEach(function(a){var o=r.node(a);isNaN(o.layer)?o.rank-=e:i(a,o.layer)})}function wTe(r,t){return r.node(t.w).rank-r.node(t.v).rank-r.edge(t).minlen}var dG=rl.Graph,Td=Pw.slack,hG={feasibleTree:STe,feasibleTreeWithLayer:ETe};function STe(r){var t=new dG({directed:!1}),e=r.nodes()[0],n=r.nodeCount();t.setNode(e,{});for(var i,a;CTe(t,r)<n;)i=vG(t,r),a=t.hasNode(i.v)?Td(r,i):-Td(r,i),pG(t,r,a);return t}function CTe(r,t){function e(n){pe.forEach(t.nodeEdges(n),function(i){var a=i.v,o=n===a?i.w:a;!r.hasNode(o)&&!Td(t,i)&&(r.setNode(o,{}),r.setEdge(n,o,{}),e(o))})}return pe.forEach(r.nodes(),e),r.nodeCount()}function ETe(r){var t=new dG({directed:!1}),e=r.nodes()[0],n=r.nodeCount();t.setNode(e,{});for(var i,a;_Te(t,r)<n;)i=vG(t,r),a=t.hasNode(i.v)?Td(r,i):-Td(r,i),pG(t,r,a);return t}function _Te(r,t){function e(n){pe.forEach(t.nodeEdges(n),function(i){var a=i.v,o=n===a?i.w:a;!r.hasNode(o)&&(t.node(o).layer!==void 0||!Td(t,i))&&(r.setNode(o,{}),r.setEdge(n,o,{}),e(o))})}return pe.forEach(r.nodes(),e),r.nodeCount()}function vG(r,t){return pe.minBy(t.edges(),function(e){if(r.hasNode(e.v)!==r.hasNode(e.w))return Td(t,e)})}function pG(r,t,e){pe.forEach(r.nodes(),function(n){t.node(n).rank+=e})}var TTe=hG.feasibleTree,ATe=Pw.slack,MTe=Pw.longestPath,kTe=rl.alg.preorder,ITe=rl.alg.postorder,PTe=xa.simplify,DTe=Ad;Ad.initLowLimValues=GM;Ad.initCutValues=zM;Ad.calcCutValue=gG;Ad.leaveEdge=yG;Ad.enterEdge=bG;Ad.exchangeEdges=xG;function Ad(r){r=PTe(r),MTe(r);var t=TTe(r);GM(t),zM(t,r);for(var e,n;e=yG(t);)n=bG(t,r,e),xG(t,r,e,n)}function zM(r,t){var e=ITe(r,r.nodes());e=e.slice(0,e.length-1),pe.forEach(e,function(n){RTe(r,t,n)})}function RTe(r,t,e){var n=r.node(e),i=n.parent;r.edge(e,i).cutvalue=gG(r,t,e)}function gG(r,t,e){var n=r.node(e),i=n.parent,a=!0,o=t.edge(e,i),s=0;return o||(a=!1,o=t.edge(i,e)),s=o.weight,pe.forEach(t.nodeEdges(e),function(l){var u=l.v===e,c=u?l.w:l.v;if(c!==i){var f=u===a,d=t.edge(l).weight;if(s+=f?d:-d,LTe(r,e,c)){var h=r.edge(e,c).cutvalue;s+=f?-h:h}}}),s}function GM(r,t){arguments.length<2&&(t=r.nodes()[0]),mG(r,{},1,t)}function mG(r,t,e,n,i){var a=e,o=r.node(n);return t[n]=!0,pe.forEach(r.neighbors(n),function(s){pe.has(t,s)||(e=mG(r,t,e,s,n))}),o.low=a,o.lim=e++,i?o.parent=i:delete o.parent,e}function yG(r){return pe.find(r.edges(),function(t){return r.edge(t).cutvalue<0})}function bG(r,t,e){var n=e.v,i=e.w;t.hasEdge(n,i)||(n=e.w,i=e.v);var a=r.node(n),o=r.node(i),s=a,l=!1;a.lim>o.lim&&(s=o,l=!0);var u=pe.filter(t.edges(),function(c){return l===wG(r,r.node(c.v),s)&&l!==wG(r,r.node(c.w),s)});return pe.minBy(u,function(c){return ATe(t,c)})}function xG(r,t,e,n){var i=e.v,a=e.w;r.removeEdge(i,a),r.setEdge(n.v,n.w,{}),GM(r),zM(r,t),OTe(r,t)}function OTe(r,t){var e=pe.find(r.nodes(),function(i){return!t.node(i).parent}),n=kTe(r,e);n=n.slice(1),pe.forEach(n,function(i){var a=r.node(i).parent,o=t.edge(i,a),s=!1;o||(o=t.edge(a,i),s=!0),t.node(i).rank=t.node(a).rank+(s?o.minlen:-o.minlen)})}function LTe(r,t,e){return r.hasEdge(t,e)}function wG(r,t,e){return e.low<=t.lim&&t.lim<=e.lim}var SG=Pw.longestPathWithLayer,FTe=hG.feasibleTreeWithLayer,NTe=BTe;function BTe(r){switch(r.graph().ranker){case"network-simplex":zTe(r);break;case"tight-tree":CG(r);break;case"longest-path":$Te(r);break;default:CG(r)}}var $Te=SG;function CG(r){SG(r),FTe(r)}function zTe(r){DTe(r)}var GTe=UTe;function UTe(r){var t=HTe(r);pe.forEach(r.graph().dummyChains,function(e){for(var n=r.node(e),i=n.edgeObj,a=VTe(r,t,i.v,i.w),o=a.path,s=a.lca,l=0,u=o[l],c=!0;e!==i.w;){if(n=r.node(e),c){for(;(u=o[l])!==s&&r.node(u).maxRank<n.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<o.length-1&&r.node(u=o[l+1]).minRank<=n.rank;)l++;u=o[l]}r.setParent(e,u),e=r.successors(e)[0]}})}function VTe(r,t,e,n){var i=[],a=[],o=Math.min(t[e].low,t[n].low),s=Math.max(t[e].lim,t[n].lim),l,u;l=e;do l=r.parent(l),i.push(l);while(l&&(t[l].low>o||s>t[l].lim));for(u=l,l=n;(l=r.parent(l))!==u;)a.push(l);return{path:i.concat(a.reverse()),lca:u}}function HTe(r){var t={},e=0;function n(i){var a=e;pe.forEach(r.children(i),n),t[i]={low:a,lim:e++}}return pe.forEach(r.children(),n),t}var EG={run:WTe,cleanup:XTe};function WTe(r){var t=xa.addDummyNode(r,"root",{},"_root"),e=jTe(r),n=pe.max(pe.values(e))-1,i=2*n+1;r.graph().nestingRoot=t,pe.forEach(r.edges(),function(o){r.edge(o).minlen*=i});var a=YTe(r)+1;pe.forEach(r.children(),function(o){_G(r,t,i,a,n,e,o)}),r.graph().nodeRankFactor=i}function _G(r,t,e,n,i,a,o){var s=r.children(o);if(!s.length){o!==t&&r.setEdge(t,o,{weight:0,minlen:e});return}var l=xa.addBorderNode(r,"_bt"),u=xa.addBorderNode(r,"_bb"),c=r.node(o);r.setParent(l,o),c.borderTop=l,r.setParent(u,o),c.borderBottom=u,pe.forEach(s,function(f){_G(r,t,e,n,i,a,f);var d=r.node(f),h=d.borderTop?d.borderTop:f,v=d.borderBottom?d.borderBottom:f,p=d.borderTop?n:2*n,g=h!==v?1:i-a[o]+1;r.setEdge(l,h,{weight:p,minlen:g,nestingEdge:!0}),r.setEdge(v,u,{weight:p,minlen:g,nestingEdge:!0})}),r.parent(o)||r.setEdge(t,l,{weight:0,minlen:i+a[o]})}function jTe(r){var t={};function e(n,i){var a=r.children(n);a&&a.length&&pe.forEach(a,function(o){e(o,i+1)}),t[n]=i}return pe.forEach(r.children(),function(n){e(n,1)}),t}function YTe(r){return pe.reduce(r.edges(),function(t,e){return t+r.edge(e).weight},0)}function XTe(r){var t=r.graph();r.removeNode(t.nestingRoot),delete t.nestingRoot,pe.forEach(r.edges(),function(e){var n=r.edge(e);n.nestingEdge&&r.removeEdge(e)})}var qTe=KTe;function KTe(r){function t(e){var n=r.children(e),i=r.node(e);if(n.length&&pe.forEach(n,t),pe.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,o=i.maxRank+1;a<o;++a)TG(r,"borderLeft","_bl",e,i,a),TG(r,"borderRight","_br",e,i,a)}}pe.forEach(r.children(),t)}function TG(r,t,e,n,i,a){var o={width:0,height:0,rank:a,borderType:t},s=i[t][a-1],l=xa.addDummyNode(r,"border",o,e);i[t][a]=l,r.setParent(l,n),s&&r.setEdge(s,l,{weight:1})}var AG={adjust:ZTe,undo:QTe};function ZTe(r){var t=r.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&MG(r)}function QTe(r){var t=r.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&JTe(r),(t==="lr"||t==="rl")&&(eAe(r),MG(r))}function MG(r){pe.forEach(r.nodes(),function(t){kG(r.node(t))}),pe.forEach(r.edges(),function(t){kG(r.edge(t))})}function kG(r){var t=r.width;r.width=r.height,r.height=t}function JTe(r){pe.forEach(r.nodes(),function(t){UM(r.node(t))}),pe.forEach(r.edges(),function(t){var e=r.edge(t);pe.forEach(e.points,UM),pe.has(e,"y")&&UM(e)})}function UM(r){r.y=-r.y}function eAe(r){pe.forEach(r.nodes(),function(t){VM(r.node(t))}),pe.forEach(r.edges(),function(t){var e=r.edge(t);pe.forEach(e.points,VM),pe.has(e,"x")&&VM(e)})}function VM(r){var t=r.x;r.x=r.y,r.y=t}var IG=tAe;function tAe(r){var t={},e=pe.filter(r.nodes(),function(l){return!r.children(l).length}),n=pe.max(pe.map(e,function(l){return r.node(l).rank})),i=pe.map(pe.range(n+1),function(){return[]});function a(l){if(!pe.has(t,l)){t[l]=!0;var u=r.node(l);i[u.rank].push(l),pe.forEach(r.successors(l),a)}}var o=pe.sortBy(e,function(l){return r.node(l).rank}),s=pe.sortBy(pe.filter(o,function(l){return r.node(l).fixorder!==void 0}),function(l){return r.node(l).fixorder});return pe.forEach(s,function(l){i[r.node(l).rank].push(l),t[l]=!0}),pe.forEach(o,a),i}var PG=rAe;function rAe(r,t){for(var e=0,n=1;n<t.length;++n)e+=nAe(r,t[n-1],t[n]);return e}function nAe(r,t,e){for(var n=pe.zipObject(e,pe.map(e,function(u,c){return c})),i=pe.flatten(pe.map(t,function(u){return pe.sortBy(pe.map(r.outEdges(u),function(c){return{pos:n[c.w],weight:r.edge(c).weight}}),"pos")}),!0),a=1;a<e.length;)a<<=1;var o=2*a-1;a-=1;var s=pe.map(new Array(o),function(){return 0}),l=0;return pe.forEach(i.forEach(function(u){var c=u.pos+a;s[c]+=u.weight;for(var f=0;c>0;)c%2&&(f+=s[c+1]),c=c-1>>1,s[c]+=u.weight;l+=u.weight*f})),l}var iAe=aAe;function aAe(r,t){return pe.map(t,function(e){var n=r.inEdges(e);if(n.length){var i=pe.reduce(n,function(a,o){var s=r.edge(o),l=r.node(o.v);return{sum:a.sum+s.weight*l.order,weight:a.weight+s.weight}},{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:e}})}var oAe=sAe;function sAe(r,t){var e={};pe.forEach(r,function(i,a){var o=e[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:a};pe.isUndefined(i.barycenter)||(o.barycenter=i.barycenter,o.weight=i.weight)}),pe.forEach(t.edges(),function(i){var a=e[i.v],o=e[i.w];!pe.isUndefined(a)&&!pe.isUndefined(o)&&(o.indegree++,a.out.push(e[i.w]))});var n=pe.filter(e,function(i){return!i.indegree});return lAe(n)}function lAe(r){var t=[];function e(a){return function(o){o.merged||(pe.isUndefined(o.barycenter)||pe.isUndefined(a.barycenter)||o.barycenter>=a.barycenter)&&uAe(a,o)}}function n(a){return function(o){o.in.push(a),--o.indegree==0&&r.push(o)}}for(;r.length;){var i=r.pop();t.push(i),pe.forEach(i.in.reverse(),e(i)),pe.forEach(i.out,n(i))}return pe.map(pe.filter(t,function(a){return!a.merged}),function(a){return pe.pick(a,["vs","i","barycenter","weight"])})}function uAe(r,t){var e=0,n=0;r.weight&&(e+=r.barycenter*r.weight,n+=r.weight),t.weight&&(e+=t.barycenter*t.weight,n+=t.weight),r.vs=t.vs.concat(r.vs),r.barycenter=e/n,r.weight=n,r.i=Math.min(t.i,r.i),t.merged=!0}var cAe=fAe;function fAe(r,t,e){var n=xa.partition(r,function(f){return pe.has(f,"fixorder")&&!isNaN(f.fixorder)||pe.has(f,"barycenter")}),i=n.lhs,a=pe.sortBy(n.rhs,function(f){return-f.i}),o=[],s=0,l=0,u=0;i.sort(dAe(!!t,!!e)),u=DG(o,a,u),pe.forEach(i,function(f){u+=f.vs.length,o.push(f.vs),s+=f.barycenter*f.weight,l+=f.weight,u=DG(o,a,u)});var c={vs:pe.flatten(o,!0)};return l&&(c.barycenter=s/l,c.weight=l),c}function DG(r,t,e){for(var n;t.length&&(n=pe.last(t)).i<=e;)t.pop(),r.push(n.vs),e++;return e}function dAe(r,t){return function(e,n){if(e.fixorder!==void 0&&n.fixorder!==void 0)return e.fixorder-n.fixorder;if(e.barycenter<n.barycenter)return-1;if(e.barycenter>n.barycenter)return 1;if(t&&e.order!==void 0&&n.order!==void 0){if(e.order<n.order)return-1;if(e.order>n.order)return 1}return r?n.i-e.i:e.i-n.i}}var hAe=RG;function RG(r,t,e,n,i){var a=r.children(t),o=r.node(t),s=o?o.borderLeft:void 0,l=o?o.borderRight:void 0,u={};s&&(a=pe.filter(a,function(p){return p!==s&&p!==l}));var c=iAe(r,a);pe.forEach(c,function(p){if(r.children(p.v).length){var g=RG(r,p.v,e,n);u[p.v]=g,pe.has(g,"barycenter")&&pAe(p,g)}});var f=oAe(c,e);vAe(f,u),pe.forEach(f,function(p){var g=r.node(p.vs[0]);p.fixorder=g.fixorder,p.order=g.order});var d=cAe(f,n,i);if(s&&(d.vs=pe.flatten([s,d.vs,l],!0),r.predecessors(s).length)){var h=r.node(r.predecessors(s)[0]),v=r.node(r.predecessors(l)[0]);pe.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+h.order+v.order)/(d.weight+2),d.weight+=2}return d}function vAe(r,t){pe.forEach(r,function(e){e.vs=pe.flatten(e.vs.map(function(n){return t[n]?t[n].vs:n}),!0)})}function pAe(r,t){pe.isUndefined(r.barycenter)?(r.barycenter=t.barycenter,r.weight=t.weight):(r.barycenter=(r.barycenter*r.weight+t.barycenter*t.weight)/(r.weight+t.weight),r.weight+=t.weight)}var gAe=rl.Graph,mAe=yAe;function yAe(r,t,e){var n=bAe(r),i=new gAe({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(a){return r.node(a)});return pe.forEach(r.nodes(),function(a){var o=r.node(a),s=r.parent(a);(o.rank===t||o.minRank<=t&&t<=o.maxRank)&&(i.setNode(a),i.setParent(a,s||n),pe.forEach(r[e](a),function(l){var u=l.v===a?l.w:l.v,c=i.edge(u,a),f=pe.isUndefined(c)?0:c.weight;i.setEdge(u,a,{weight:r.edge(l).weight+f})}),pe.has(o,"minRank")&&i.setNode(a,{borderLeft:o.borderLeft[t],borderRight:o.borderRight[t]}))}),i}function bAe(r){for(var t;r.hasNode(t=pe.uniqueId("_root")););return t}var xAe=wAe;function wAe(r,t,e){var n={},i;pe.forEach(e,function(a){for(var o=r.parent(a),s,l;o;){if(s=r.parent(o),s?(l=n[s],n[s]=o):(l=i,i=o),l&&l!==o){t.setEdge(l,o);return}o=s}})}var SAe=rl.Graph,CAe=EAe;function EAe(r){var t=xa.maxRank(r),e=OG(r,pe.range(1,t+1),"inEdges"),n=OG(r,pe.range(t-1,-1,-1),"outEdges"),i=IG(r);HM(r,i);for(var a=Number.POSITIVE_INFINITY,o,s=0,l=0;l<4;++s,++l){LG(s%2?e:n,s%4>=2),i=xa.buildLayerMatrix(r);var u=PG(r,i);u<a&&(l=0,o=pe.cloneDeep(i),a=u)}for(i=IG(r),HM(r,i),s=0,l=0;l<4;++s,++l)LG(s%2?e:n,s%4>=2,!0),i=xa.buildLayerMatrix(r),u=PG(r,i),u<a&&(l=0,o=pe.cloneDeep(i),a=u);HM(r,o)}function OG(r,t,e){return pe.map(t,function(n){return mAe(r,n,e)})}function LG(r,t,e){var n=new SAe;pe.forEach(r,function(i){var a=i.graph().root,o=hAe(i,a,n,t,e);pe.forEach(o.vs,function(s,l){i.node(s).order=l}),xAe(i,n,o.vs)})}function HM(r,t){pe.forEach(t,function(e){pe.forEach(e,function(n,i){r.node(n).order=i})})}var _Ae=rl.Graph,TAe={positionX:kAe,findType1Conflicts:FG,findType2Conflicts:NG,addConflict:WM,hasConflict:BG,verticalAlignment:$G,horizontalCompaction:zG,alignCoordinates:UG,findSmallestWidthAlignment:GG,balance:VG};function FG(r,t){var e={};function n(i,a){var o=0,s=0,l=i.length,u=pe.last(a);return pe.forEach(a,function(c,f){var d=AAe(r,c),h=d?r.node(d).order:l;(d||c===u)&&(pe.forEach(a.slice(s,f+1),function(v){pe.forEach(r.predecessors(v),function(p){var g=r.node(p),m=g.order;(m<o||h<m)&&!(g.dummy&&r.node(v).dummy)&&WM(e,p,v)})}),s=f+1,o=h)}),a}return pe.reduce(t,n),e}function NG(r,t){var e={};function n(a,o,s,l,u){var c;pe.forEach(pe.range(o,s),function(f){c=a[f],r.node(c).dummy&&pe.forEach(r.predecessors(c),function(d){var h=r.node(d);h.dummy&&(h.order<l||h.order>u)&&WM(e,d,c)})})}function i(a,o){var s=-1,l,u=0;return pe.forEach(o,function(c,f){if(r.node(c).dummy==="border"){var d=r.predecessors(c);d.length&&(l=r.node(d[0]).order,n(o,u,f,s,l),u=f,s=l)}n(o,u,o.length,l,a.length)}),o}return pe.reduce(t,i),e}function AAe(r,t){if(r.node(t).dummy)return pe.find(r.predecessors(t),function(e){return r.node(e).dummy})}function WM(r,t,e){if(t>e){var n=t;t=e,e=n}var i=r[t];i||(r[t]=i={}),i[e]=!0}function BG(r,t,e){if(t>e){var n=t;t=e,e=n}return pe.has(r[t],e)}function $G(r,t,e,n){var i={},a={},o={};return pe.forEach(t,function(s){pe.forEach(s,function(l,u){i[l]=l,a[l]=l,o[l]=u})}),pe.forEach(t,function(s){var l=-1;pe.forEach(s,function(u){var c=n(u);if(c.length){c=pe.sortBy(c,function(p){return o[p]});for(var f=(c.length-1)/2,d=Math.floor(f),h=Math.ceil(f);d<=h;++d){var v=c[d];a[u]===u&&l<o[v]&&!BG(e,u,v)&&(a[v]=u,a[u]=i[u]=i[v],l=o[v])}}})}),{root:i,align:a}}function zG(r,t,e,n,i){var a={},o=MAe(r,t,e,i),s=i?"borderLeft":"borderRight";function l(f,d){for(var h=o.nodes(),v=h.pop(),p={};v;)p[v]?f(v):(p[v]=!0,h.push(v),h=h.concat(d(v))),v=h.pop()}function u(f){a[f]=o.inEdges(f).reduce(function(d,h){return Math.max(d,a[h.v]+o.edge(h))},0)}function c(f){var d=o.outEdges(f).reduce(function(v,p){return Math.min(v,a[p.w]-o.edge(p))},Number.POSITIVE_INFINITY),h=r.node(f);d!==Number.POSITIVE_INFINITY&&h.borderType!==s&&(a[f]=Math.max(a[f],d))}return l(u,o.predecessors.bind(o)),l(c,o.successors.bind(o)),pe.forEach(n,function(f){a[f]=a[e[f]]}),a}function MAe(r,t,e,n){var i=new _Ae,a=r.graph(),o=IAe(a.nodesep,a.edgesep,n);return pe.forEach(t,function(s){var l;pe.forEach(s,function(u){var c=e[u];if(i.setNode(c),l){var f=e[l],d=i.edge(f,c);i.setEdge(f,c,Math.max(o(r,u,l),d||0))}l=u})}),i}function GG(r,t){return pe.minBy(pe.values(t),function(e){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return pe.forIn(e,function(a,o){var s=PAe(r,o)/2;n=Math.max(a+s,n),i=Math.min(a-s,i)}),n-i})}function UG(r,t){var e=pe.values(t),n=pe.min(e),i=pe.max(e);pe.forEach(["u","d"],function(a){pe.forEach(["l","r"],function(o){var s=a+o,l=r[s],u;if(l!==t){var c=pe.values(l);u=o==="l"?n-pe.min(c):i-pe.max(c),u&&(r[s]=pe.mapValues(l,function(f){return f+u}))}})})}function VG(r,t){return pe.mapValues(r.ul,function(e,n){if(t)return r[t.toLowerCase()][n];var i=pe.sortBy(pe.map(r,n));return(i[1]+i[2])/2})}function kAe(r){var t=xa.buildLayerMatrix(r),e=pe.merge(FG(r,t),NG(r,t)),n={},i;pe.forEach(["u","d"],function(o){i=o==="u"?t:pe.values(t).reverse(),pe.forEach(["l","r"],function(s){s==="r"&&(i=pe.map(i,function(f){return pe.values(f).reverse()}));var l=(o==="u"?r.predecessors:r.successors).bind(r),u=$G(r,i,e,l),c=zG(r,i,u.root,u.align,s==="r");s==="r"&&(c=pe.mapValues(c,function(f){return-f})),n[o+s]=c})});var a=GG(r,n);return UG(n,a),VG(n,r.graph().align)}function IAe(r,t,e){return function(n,i,a){var o=n.node(i),s=n.node(a),l=0,u;if(l+=o.width/2,pe.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":u=-o.width/2;break;case"r":u=o.width/2;break}if(u&&(l+=e?u:-u),u=0,l+=(o.dummy?t:r)/2,l+=(s.dummy?t:r)/2,l+=s.width/2,pe.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=s.width/2;break;case"r":u=-s.width/2;break}return u&&(l+=e?u:-u),u=0,l}}function PAe(r,t){return r.node(t).width}var DAe=TAe.positionX,RAe=OAe;function OAe(r){r=xa.asNonCompoundGraph(r),LAe(r),pe.forEach(DAe(r),function(t,e){r.node(e).x=t})}function LAe(r){var t=xa.buildLayerMatrix(r),e=r.graph().ranksep,n=0;pe.forEach(t,function(i){var a=pe.max(pe.map(i,function(o){return r.node(o).height}));pe.forEach(i,function(o){r.node(o).y=n+a/2}),n+=a+e})}var FAe=NAe;function NAe(r,t){var e=pe.filter(r.nodes(),function(a){return!r.children(a).length}),n=pe.max(pe.map(e,function(a){return r.node(a).rank})),i=pe.map(pe.range(n+1),function(){return[]});pe.forEach(t,function(a){var o=r.node(a);o.dummy||(o.fixorder=i[o.rank].length,i[o.rank].push(a))})}var BAe=xa.normalizeRanks,$Ae=xa.removeEmptyRanks,Fc=xa,zAe=rl.Graph,GAe=UAe;function UAe(r,t){var e=t&&t.debugTiming?Fc.time:Fc.notime;e("layout",function(){t&&!t.keepNodeOrder&&t.prevGraph&&e("  inheritOrder",function(){HAe(r,t.prevGraph)});var n=e("  buildLayoutGraph",function(){return eMe(r)});t&&t.edgeLabelSpace===!1||e("  makeSpaceForEdgeLabels",function(){tMe(n)});try{e("  runLayout",function(){VAe(n,e,t)})}catch(i){if(i.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,i);return}else throw i}e("  updateInputGraph",function(){WAe(r,n)})})}function VAe(r,t,e){t("    removeSelfEdges",function(){cMe(r)}),t("    acyclic",function(){sG.run(r)}),t("    nestingGraph.run",function(){EG.run(r)}),t("    rank",function(){NTe(Fc.asNonCompoundGraph(r))}),t("    injectEdgeLabelProxies",function(){rMe(r)}),t("    removeEmptyRanks",function(){$Ae(r)}),t("    nestingGraph.cleanup",function(){EG.cleanup(r)}),t("    normalizeRanks",function(){BAe(r)}),t("    assignRankMinMax",function(){nMe(r)}),t("    removeEdgeLabelProxies",function(){iMe(r)}),t("    normalize.run",function(){fG.run(r)}),t("    parentDummyChains",function(){GTe(r)}),t("    addBorderSegments",function(){qTe(r)}),e&&e.keepNodeOrder&&t("    initDataOrder",function(){FAe(r,e.nodeOrder)}),t("    order",function(){CAe(r)}),t("    insertSelfEdges",function(){fMe(r)}),t("    adjustCoordinateSystem",function(){AG.adjust(r)}),t("    position",function(){RAe(r)}),t("    positionSelfEdges",function(){dMe(r)}),t("    removeBorderNodes",function(){uMe(r)}),t("    normalize.undo",function(){fG.undo(r)}),t("    fixupEdgeLabelCoords",function(){sMe(r)}),t("    undoCoordinateSystem",function(){AG.undo(r)}),t("    translateGraph",function(){aMe(r)}),t("    assignNodeIntersects",function(){oMe(r)}),t("    reversePoints",function(){lMe(r)}),t("    acyclic.undo",function(){sG.undo(r)})}function HAe(r,t){var e=t._nodes;pe.forEach(r.nodes(),function(n){var i=r.node(n);e[n]!==void 0?(i.fixorder=e[n]._order,delete e[n]._order):delete i.fixorder})}function WAe(r,t){pe.forEach(r.nodes(),function(e){var n=r.node(e),i=t.node(e);n&&(n.x=i.x,n.y=i.y,n._order=i.order,n._rank=i.rank,t.children(e).length&&(n.width=i.width,n.height=i.height))}),pe.forEach(r.edges(),function(e){var n=r.edge(e),i=t.edge(e);n.points=i.points,pe.has(i,"x")&&(n.x=i.x,n.y=i.y)}),r.graph().width=t.graph().width,r.graph().height=t.graph().height}var jAe=["nodesep","edgesep","ranksep","marginx","marginy"],YAe={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},XAe=["acyclicer","ranker","rankdir","align"],qAe=["width","height","layer","fixorder"],KAe={width:0,height:0},ZAe=["minlen","weight","width","height","labeloffset"],QAe={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},JAe=["labelpos"];function eMe(r){var t=new zAe({multigraph:!0,compound:!0}),e=YM(r.graph());return t.setGraph(pe.merge({},YAe,jM(e,jAe),pe.pick(e,XAe))),pe.forEach(r.nodes(),function(n){var i=YM(r.node(n));t.setNode(n,pe.defaults(jM(i,qAe),KAe)),t.setParent(n,r.parent(n))}),pe.forEach(r.edges(),function(n){var i=YM(r.edge(n));t.setEdge(n,pe.merge({},QAe,jM(i,ZAe),pe.pick(i,JAe)))}),t}function tMe(r){var t=r.graph();t.ranksep/=2,pe.forEach(r.nodes(),function(e){var n=r.node(e);isNaN(n.layer)||(n.layer*=2)}),pe.forEach(r.edges(),function(e){var n=r.edge(e);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function rMe(r){pe.forEach(r.edges(),function(t){var e=r.edge(t);if(e.width&&e.height){var n=r.node(t.v),i=r.node(t.w),a={rank:(i.rank-n.rank)/2+n.rank,e:t};Fc.addDummyNode(r,"edge-proxy",a,"_ep")}})}function nMe(r){var t=0;pe.forEach(r.nodes(),function(e){var n=r.node(e);n.borderTop&&(n.minRank=r.node(n.borderTop).rank,n.maxRank=r.node(n.borderBottom).rank,t=pe.max(t,n.maxRank))}),r.graph().maxRank=t}function iMe(r){pe.forEach(r.nodes(),function(t){var e=r.node(t);e.dummy==="edge-proxy"&&(r.edge(e.e).labelRank=e.rank,r.removeNode(t))})}function aMe(r){var t=Number.POSITIVE_INFINITY,e=0,n=Number.POSITIVE_INFINITY,i=0,a=r.graph(),o=a.marginx||0,s=a.marginy||0;function l(u){var c=u.x,f=u.y,d=u.width,h=u.height;t=Math.min(t,c-d/2),e=Math.max(e,c+d/2),n=Math.min(n,f-h/2),i=Math.max(i,f+h/2)}pe.forEach(r.nodes(),function(u){l(r.node(u))}),pe.forEach(r.edges(),function(u){var c=r.edge(u);pe.has(c,"x")&&l(c)}),t-=o,n-=s,pe.forEach(r.nodes(),function(u){var c=r.node(u);c.x-=t,c.y-=n}),pe.forEach(r.edges(),function(u){var c=r.edge(u);pe.forEach(c.points,function(f){f.x-=t,f.y-=n}),pe.has(c,"x")&&(c.x-=t),pe.has(c,"y")&&(c.y-=n)}),a.width=e-t+o,a.height=i-n+s}function oMe(r){pe.forEach(r.edges(),function(t){var e=r.edge(t),n=r.node(t.v),i=r.node(t.w),a,o;e.points?(a=e.points[0],o=e.points[e.points.length-1]):(e.points=[],a=i,o=n),e.points.unshift(Fc.intersectRect(n,a)),e.points.push(Fc.intersectRect(i,o))})}function sMe(r){pe.forEach(r.edges(),function(t){var e=r.edge(t);if(pe.has(e,"x"))switch((e.labelpos==="l"||e.labelpos==="r")&&(e.width-=e.labeloffset),e.labelpos){case"l":e.x-=e.width/2+e.labeloffset;break;case"r":e.x+=e.width/2+e.labeloffset;break}})}function lMe(r){pe.forEach(r.edges(),function(t){var e=r.edge(t);e.reversed&&e.points.reverse()})}function uMe(r){pe.forEach(r.nodes(),function(t){if(r.children(t).length){var e=r.node(t),n=r.node(e.borderTop),i=r.node(e.borderBottom),a=r.node(pe.last(e.borderLeft)),o=r.node(pe.last(e.borderRight));e.width=Math.abs(o.x-a.x),e.height=Math.abs(i.y-n.y),e.x=a.x+e.width/2,e.y=n.y+e.height/2}}),pe.forEach(r.nodes(),function(t){r.node(t).dummy==="border"&&r.removeNode(t)})}function cMe(r){pe.forEach(r.edges(),function(t){if(t.v===t.w){var e=r.node(t.v);e.selfEdges||(e.selfEdges=[]),e.selfEdges.push({e:t,label:r.edge(t)}),r.removeEdge(t)}})}function fMe(r){var t=Fc.buildLayerMatrix(r);pe.forEach(t,function(e){var n=0;pe.forEach(e,function(i,a){var o=r.node(i);o.order=a+n,pe.forEach(o.selfEdges,function(s){Fc.addDummyNode(r,"selfedge",{width:s.label.width,height:s.label.height,rank:o.rank,order:a+ ++n,e:s.e,label:s.label},"_se")}),delete o.selfEdges})})}function dMe(r){pe.forEach(r.nodes(),function(t){var e=r.node(t);if(e.dummy==="selfedge"){var n=r.node(e.e.v),i=n.x+n.width/2,a=n.y,o=e.x-i,s=n.height/2;r.setEdge(e.e,e.label),r.removeNode(t),e.label.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{x:i+o,y:a},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],e.label.x=e.x,e.label.y=e.y}})}function jM(r,t){return pe.mapValues(pe.pick(r,t),Number)}function YM(r){var t={};return pe.forEach(r,function(e,n){t[n.toLowerCase()]=e}),t}var hMe=rl.Graph,vMe={debugOrdering:pMe};function pMe(r){var t=xa.buildLayerMatrix(r),e=new hMe({compound:!0,multigraph:!0}).setGraph({});return pe.forEach(r.nodes(),function(n){e.setNode(n,{label:n}),e.setParent(n,"layer"+r.node(n).rank)}),pe.forEach(r.edges(),function(n){e.setEdge(n.v,n.w,{},n.name)}),pe.forEach(t,function(n,i){var a="layer"+i;e.setNode(a,{rank:"same"}),pe.reduce(n,function(o,s){return e.setEdge(o,s,{style:"invis"}),s})}),e}var gMe="0.1.1",XM={graphlib:rl,layout:GAe,debug:vMe,util:{time:xa.time,notime:xa.notime},version:gMe};class HG extends wo{constructor(t){super();this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.keepNodeOrder=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=e=>{const n=this,{nodes:i}=n,a=i.find(o=>o.id===e);return a?a.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}execute(){const t=this,{nodes:e,nodeSize:n,rankdir:i,combos:a}=t;if(!e)return;const o=t.edges||[],s=new XM.graphlib.Graph({multigraph:!0,compound:!0});let l;n?Xa(n)?l=()=>n:l=()=>[n,n]:l=v=>v.size?Xa(v.size)?v.size:Fl(v.size)?[v.size.width||40,v.size.height||40]:[v.size,v.size]:[40,40];let u=Dw(t.nodesepFunc,t.nodesep,50),c=Dw(t.ranksepFunc,t.ranksep,50);(i==="LR"||i==="RL")&&(u=Dw(t.ranksepFunc,t.ranksep,50),c=Dw(t.nodesepFunc,t.nodesep,50)),s.setDefaultEdgeLabel(()=>({})),s.setGraph(t);const f={};e.filter(v=>v.layout!==!1).forEach(v=>{const p=l(v),g=c(v),m=u(v),y=p[0]+2*m,b=p[1]+2*g,x=v.layer;Wt(x)?s.setNode(v.id,{width:y,height:b,layer:x}):s.setNode(v.id,{width:y,height:b}),this.sortByCombo&&v.comboId&&(f[v.comboId]||(f[v.comboId]=!0,s.setNode(v.comboId,{})),s.setParent(v.id,v.comboId))}),this.sortByCombo&&a&&a.forEach(v=>{!v.parentId||(f[v.parentId]||(f[v.parentId]=!0,s.setNode(v.parentId,{})),s.setParent(v.id,v.parentId))}),o.forEach(v=>{const p=wn(v,"source"),g=wn(v,"target");this.layoutNode(p)&&this.layoutNode(g)&&s.setEdge(p,g,{weight:v.weight||1})});let d;t.preset&&(d=new XM.graphlib.Graph({multigraph:!0,compound:!0}),t.preset.nodes.forEach(v=>{d==null||d.setNode(v.id,v)})),XM.layout(s,{prevGraph:d,edgeLabelSpace:t.edgeLabelSpace,keepNodeOrder:t.keepNodeOrder,nodeOrder:t.nodeOrder});let h;return s.nodes().forEach(v=>{h=s.node(v);const p=e.findIndex(g=>g.id===v);!e[p]||(e[p].x=h.x,e[p].y=h.y,e[p]._order=h._order)}),s.edges().forEach(v=>{h=s.edge(v);const p=o.findIndex(g=>{const m=wn(g,"source"),y=wn(g,"target");return m===v.v&&y===v.w});t.edgeLabelSpace&&t.controlPoints&&o[p].type!=="loop"&&(o[p].controlPoints=h.points.slice(1,h.points.length-1))}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:o}}getType(){return"dagre"}}function Dw(r,t,e){let n;return r?n=r:Wt(t)?n=()=>t:n=()=>e,n}const mMe=Object.prototype.toString;function Rw(r){return mMe.call(r).endsWith("Array]")}function yMe(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Rw(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var e=t.fromIndex,n=e===void 0?0:e,i=t.toIndex,a=i===void 0?r.length:i;if(n<0||n>=r.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>r.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=r[n],s=n+1;s<a;s++)r[s]>o&&(o=r[s]);return o}function bMe(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Rw(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var e=t.fromIndex,n=e===void 0?0:e,i=t.toIndex,a=i===void 0?r.length:i;if(n<0||n>=r.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>r.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=r[n],s=n+1;s<a;s++)r[s]<o&&(o=r[s]);return o}function WG(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Rw(r)){if(r.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var e;if(t.output!==void 0){if(!Rw(t.output))throw new TypeError("output option must be an array if specified");e=t.output}else e=new Array(r.length);var n=bMe(r),i=yMe(r);if(n===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=t.min,o=a===void 0?t.autoMinMax?n:0:a,s=t.max,l=s===void 0?t.autoMinMax?i:1:s;if(o>=l)throw new RangeError("min option must be smaller than max option");for(var u=(l-o)/(i-n),c=0;c<r.length;c++)e[c]=(r[c]-n)*u+o;return e}const Ow=" ".repeat(2),jG=" ".repeat(4);function xMe(){return YG(this)}function YG(r,t={}){const{maxRows:e=15,maxColumns:n=10,maxNumSize:i=8}=t;return`${r.constructor.name} {
${Ow}[
${jG}${wMe(r,e,n,i)}
${Ow}]
${Ow}rows: ${r.rows}
${Ow}columns: ${r.columns}
}`}function wMe(r,t,e,n){const{rows:i,columns:a}=r,o=Math.min(i,t),s=Math.min(a,e),l=[];for(let u=0;u<o;u++){let c=[];for(let f=0;f<s;f++)c.push(SMe(r.get(u,f),n));l.push(`${c.join(" ")}`)}return s!==a&&(l[l.length-1]+=` ... ${a-e} more columns`),o!==i&&l.push(`... ${i-t} more rows`),l.join(`
${jG}`)}function SMe(r,t){const e=String(r);if(e.length<=t)return e.padEnd(t," ");const n=r.toPrecision(t-2);if(n.length<=t)return n;const i=r.toExponential(t-2),a=i.indexOf("e"),o=i.slice(a);return i.slice(0,t-o.length)+o}function CMe(r,t){r.prototype.add=function(n){return typeof n=="number"?this.addS(n):this.addM(n)},r.prototype.addS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+n);return this},r.prototype.addM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+n.get(i,a));return this},r.add=function(n,i){return new t(n).add(i)},r.prototype.sub=function(n){return typeof n=="number"?this.subS(n):this.subM(n)},r.prototype.subS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-n);return this},r.prototype.subM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-n.get(i,a));return this},r.sub=function(n,i){return new t(n).sub(i)},r.prototype.subtract=r.prototype.sub,r.prototype.subtractS=r.prototype.subS,r.prototype.subtractM=r.prototype.subM,r.subtract=r.sub,r.prototype.mul=function(n){return typeof n=="number"?this.mulS(n):this.mulM(n)},r.prototype.mulS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*n);return this},r.prototype.mulM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*n.get(i,a));return this},r.mul=function(n,i){return new t(n).mul(i)},r.prototype.multiply=r.prototype.mul,r.prototype.multiplyS=r.prototype.mulS,r.prototype.multiplyM=r.prototype.mulM,r.multiply=r.mul,r.prototype.div=function(n){return typeof n=="number"?this.divS(n):this.divM(n)},r.prototype.divS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/n);return this},r.prototype.divM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/n.get(i,a));return this},r.div=function(n,i){return new t(n).div(i)},r.prototype.divide=r.prototype.div,r.prototype.divideS=r.prototype.divS,r.prototype.divideM=r.prototype.divM,r.divide=r.div,r.prototype.mod=function(n){return typeof n=="number"?this.modS(n):this.modM(n)},r.prototype.modS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%n);return this},r.prototype.modM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%n.get(i,a));return this},r.mod=function(n,i){return new t(n).mod(i)},r.prototype.modulus=r.prototype.mod,r.prototype.modulusS=r.prototype.modS,r.prototype.modulusM=r.prototype.modM,r.modulus=r.mod,r.prototype.and=function(n){return typeof n=="number"?this.andS(n):this.andM(n)},r.prototype.andS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&n);return this},r.prototype.andM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&n.get(i,a));return this},r.and=function(n,i){return new t(n).and(i)},r.prototype.or=function(n){return typeof n=="number"?this.orS(n):this.orM(n)},r.prototype.orS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|n);return this},r.prototype.orM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|n.get(i,a));return this},r.or=function(n,i){return new t(n).or(i)},r.prototype.xor=function(n){return typeof n=="number"?this.xorS(n):this.xorM(n)},r.prototype.xorS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^n);return this},r.prototype.xorM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^n.get(i,a));return this},r.xor=function(n,i){return new t(n).xor(i)},r.prototype.leftShift=function(n){return typeof n=="number"?this.leftShiftS(n):this.leftShiftM(n)},r.prototype.leftShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<n);return this},r.prototype.leftShiftM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<n.get(i,a));return this},r.leftShift=function(n,i){return new t(n).leftShift(i)},r.prototype.signPropagatingRightShift=function(n){return typeof n=="number"?this.signPropagatingRightShiftS(n):this.signPropagatingRightShiftM(n)},r.prototype.signPropagatingRightShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>n);return this},r.prototype.signPropagatingRightShiftM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>n.get(i,a));return this},r.signPropagatingRightShift=function(n,i){return new t(n).signPropagatingRightShift(i)},r.prototype.rightShift=function(n){return typeof n=="number"?this.rightShiftS(n):this.rightShiftM(n)},r.prototype.rightShiftS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>n);return this},r.prototype.rightShiftM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>n.get(i,a));return this},r.rightShift=function(n,i){return new t(n).rightShift(i)},r.prototype.zeroFillRightShift=r.prototype.rightShift,r.prototype.zeroFillRightShiftS=r.prototype.rightShiftS,r.prototype.zeroFillRightShiftM=r.prototype.rightShiftM,r.zeroFillRightShift=r.rightShift,r.prototype.not=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,~this.get(n,i));return this},r.not=function(n){return new t(n).not()},r.prototype.abs=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.abs(this.get(n,i)));return this},r.abs=function(n){return new t(n).abs()},r.prototype.acos=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.acos(this.get(n,i)));return this},r.acos=function(n){return new t(n).acos()},r.prototype.acosh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.acosh(this.get(n,i)));return this},r.acosh=function(n){return new t(n).acosh()},r.prototype.asin=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.asin(this.get(n,i)));return this},r.asin=function(n){return new t(n).asin()},r.prototype.asinh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.asinh(this.get(n,i)));return this},r.asinh=function(n){return new t(n).asinh()},r.prototype.atan=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.atan(this.get(n,i)));return this},r.atan=function(n){return new t(n).atan()},r.prototype.atanh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.atanh(this.get(n,i)));return this},r.atanh=function(n){return new t(n).atanh()},r.prototype.cbrt=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cbrt(this.get(n,i)));return this},r.cbrt=function(n){return new t(n).cbrt()},r.prototype.ceil=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.ceil(this.get(n,i)));return this},r.ceil=function(n){return new t(n).ceil()},r.prototype.clz32=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.clz32(this.get(n,i)));return this},r.clz32=function(n){return new t(n).clz32()},r.prototype.cos=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cos(this.get(n,i)));return this},r.cos=function(n){return new t(n).cos()},r.prototype.cosh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.cosh(this.get(n,i)));return this},r.cosh=function(n){return new t(n).cosh()},r.prototype.exp=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.exp(this.get(n,i)));return this},r.exp=function(n){return new t(n).exp()},r.prototype.expm1=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.expm1(this.get(n,i)));return this},r.expm1=function(n){return new t(n).expm1()},r.prototype.floor=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.floor(this.get(n,i)));return this},r.floor=function(n){return new t(n).floor()},r.prototype.fround=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.fround(this.get(n,i)));return this},r.fround=function(n){return new t(n).fround()},r.prototype.log=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log(this.get(n,i)));return this},r.log=function(n){return new t(n).log()},r.prototype.log1p=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log1p(this.get(n,i)));return this},r.log1p=function(n){return new t(n).log1p()},r.prototype.log10=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log10(this.get(n,i)));return this},r.log10=function(n){return new t(n).log10()},r.prototype.log2=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.log2(this.get(n,i)));return this},r.log2=function(n){return new t(n).log2()},r.prototype.round=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.round(this.get(n,i)));return this},r.round=function(n){return new t(n).round()},r.prototype.sign=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sign(this.get(n,i)));return this},r.sign=function(n){return new t(n).sign()},r.prototype.sin=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sin(this.get(n,i)));return this},r.sin=function(n){return new t(n).sin()},r.prototype.sinh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sinh(this.get(n,i)));return this},r.sinh=function(n){return new t(n).sinh()},r.prototype.sqrt=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.sqrt(this.get(n,i)));return this},r.sqrt=function(n){return new t(n).sqrt()},r.prototype.tan=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.tan(this.get(n,i)));return this},r.tan=function(n){return new t(n).tan()},r.prototype.tanh=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.tanh(this.get(n,i)));return this},r.tanh=function(n){return new t(n).tanh()},r.prototype.trunc=function(){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.set(n,i,Math.trunc(this.get(n,i)));return this},r.trunc=function(n){return new t(n).trunc()},r.pow=function(n,i){return new t(n).pow(i)},r.prototype.pow=function(n){return typeof n=="number"?this.powS(n):this.powM(n)},r.prototype.powS=function(n){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.pow(this.get(i,a),n));return this},r.prototype.powM=function(n){if(n=t.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.pow(this.get(i,a),n.get(i,a)));return this}}function nl(r,t,e){let n=e?r.rows:r.rows-1;if(t<0||t>n)throw new RangeError("Row index out of range")}function il(r,t,e){let n=e?r.columns:r.columns-1;if(t<0||t>n)throw new RangeError("Column index out of range")}function Kv(r,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==r.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function Zv(r,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==r.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function EMe(r,t,e){return{row:_Me(r,t),column:TMe(r,e)}}function _Me(r,t){if(typeof t!="object")throw new TypeError("unexpected type for row indices");if(t.some(n=>n<0||n>=r.rows))throw new RangeError("row indices are out of range");return Array.isArray(t)||(t=Array.from(t)),t}function TMe(r,t){if(typeof t!="object")throw new TypeError("unexpected type for column indices");if(t.some(n=>n<0||n>=r.columns))throw new RangeError("column indices are out of range");return Array.isArray(t)||(t=Array.from(t)),t}function XG(r,t,e,n,i){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Fw("startRow",t),Fw("endRow",e),Fw("startColumn",n),Fw("endColumn",i),t>e||n>i||t<0||t>=r.rows||e<0||e>=r.rows||n<0||n>=r.columns||i<0||i>=r.columns)throw new RangeError("Submatrix indices are out of range")}function Lw(r,t=0){let e=[];for(let n=0;n<r;n++)e.push(t);return e}function Fw(r,t){if(typeof t!="number")throw new TypeError(`${r} must be a number`)}function Qv(r){if(r.isEmpty())throw new Error("Empty matrix has no elements to index")}function AMe(r){let t=Lw(r.rows);for(let e=0;e<r.rows;++e)for(let n=0;n<r.columns;++n)t[e]+=r.get(e,n);return t}function MMe(r){let t=Lw(r.columns);for(let e=0;e<r.rows;++e)for(let n=0;n<r.columns;++n)t[n]+=r.get(e,n);return t}function kMe(r){let t=0;for(let e=0;e<r.rows;e++)for(let n=0;n<r.columns;n++)t+=r.get(e,n);return t}function IMe(r){let t=Lw(r.rows,1);for(let e=0;e<r.rows;++e)for(let n=0;n<r.columns;++n)t[e]*=r.get(e,n);return t}function PMe(r){let t=Lw(r.columns,1);for(let e=0;e<r.rows;++e)for(let n=0;n<r.columns;++n)t[n]*=r.get(e,n);return t}function DMe(r){let t=1;for(let e=0;e<r.rows;e++)for(let n=0;n<r.columns;n++)t*=r.get(e,n);return t}function RMe(r,t,e){const n=r.rows,i=r.columns,a=[];for(let o=0;o<n;o++){let s=0,l=0,u=0;for(let c=0;c<i;c++)u=r.get(o,c)-e[o],s+=u,l+=u*u;t?a.push((l-s*s/i)/(i-1)):a.push((l-s*s/i)/i)}return a}function OMe(r,t,e){const n=r.rows,i=r.columns,a=[];for(let o=0;o<i;o++){let s=0,l=0,u=0;for(let c=0;c<n;c++)u=r.get(c,o)-e[o],s+=u,l+=u*u;t?a.push((l-s*s/n)/(n-1)):a.push((l-s*s/n)/n)}return a}function LMe(r,t,e){const n=r.rows,i=r.columns,a=n*i;let o=0,s=0,l=0;for(let u=0;u<n;u++)for(let c=0;c<i;c++)l=r.get(u,c)-e,o+=l,s+=l*l;return t?(s-o*o/a)/(a-1):(s-o*o/a)/a}function FMe(r,t){for(let e=0;e<r.rows;e++)for(let n=0;n<r.columns;n++)r.set(e,n,r.get(e,n)-t[e])}function NMe(r,t){for(let e=0;e<r.rows;e++)for(let n=0;n<r.columns;n++)r.set(e,n,r.get(e,n)-t[n])}function BMe(r,t){for(let e=0;e<r.rows;e++)for(let n=0;n<r.columns;n++)r.set(e,n,r.get(e,n)-t)}function $Me(r){const t=[];for(let e=0;e<r.rows;e++){let n=0;for(let i=0;i<r.columns;i++)n+=Math.pow(r.get(e,i),2)/(r.columns-1);t.push(Math.sqrt(n))}return t}function zMe(r,t){for(let e=0;e<r.rows;e++)for(let n=0;n<r.columns;n++)r.set(e,n,r.get(e,n)/t[e])}function GMe(r){const t=[];for(let e=0;e<r.columns;e++){let n=0;for(let i=0;i<r.rows;i++)n+=Math.pow(r.get(i,e),2)/(r.rows-1);t.push(Math.sqrt(n))}return t}function UMe(r,t){for(let e=0;e<r.rows;e++)for(let n=0;n<r.columns;n++)r.set(e,n,r.get(e,n)/t[n])}function VMe(r){const t=r.size-1;let e=0;for(let n=0;n<r.columns;n++)for(let i=0;i<r.rows;i++)e+=Math.pow(r.get(i,n),2)/t;return Math.sqrt(e)}function HMe(r,t){for(let e=0;e<r.rows;e++)for(let n=0;n<r.columns;n++)r.set(e,n,r.get(e,n)/t)}class pn{static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("data length does not match given dimensions");let a=new Tr(t,e);for(let o=0;o<t;o++)for(let s=0;s<e;s++)a.set(o,s,n[o*e+s]);return a}static rowVector(t){let e=new Tr(1,t.length);for(let n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){let e=new Tr(t.length,1);for(let n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static zeros(t,e){return new Tr(t,e)}static ones(t,e){return new Tr(t,e).fill(1)}static rand(t,e,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{random:i=Math.random}=n;let a=new Tr(t,e);for(let o=0;o<t;o++)for(let s=0;s<e;s++)a.set(o,s,i());return a}static randInt(t,e,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{min:i=0,max:a=1e3,random:o=Math.random}=n;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(i>=a)throw new RangeError("min must be smaller than max");let s=a-i,l=new Tr(t,e);for(let u=0;u<t;u++)for(let c=0;c<e;c++){let f=i+Math.round(o()*s);l.set(u,c,f)}return l}static eye(t,e,n){e===void 0&&(e=t),n===void 0&&(n=1);let i=Math.min(t,e),a=this.zeros(t,e);for(let o=0;o<i;o++)a.set(o,o,n);return a}static diag(t,e,n){let i=t.length;e===void 0&&(e=i),n===void 0&&(n=e);let a=Math.min(i,e,n),o=this.zeros(e,n);for(let s=0;s<a;s++)o.set(s,s,t[s]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,i=t.columns,a=new Tr(n,i);for(let o=0;o<n;o++)for(let s=0;s<i;s++)a.set(o,s,Math.min(t.get(o,s),e.get(o,s)));return a}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,i=t.columns,a=new this(n,i);for(let o=0;o<n;o++)for(let s=0;s<i;s++)a.set(o,s,Math.max(t.get(o,s),e.get(o,s)));return a}static checkMatrix(t){return pn.isMatrix(t)?t:new Tr(t)}static isMatrix(t){return t!=null&&t.klass==="Matrix"}get size(){return this.rows*this.columns}apply(t){if(typeof t!="function")throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.call(this,e,n);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isEchelonForm(){let t=0,e=0,n=-1,i=!0,a=!1;for(;t<this.rows&&i;){for(e=0,a=!1;e<this.columns&&a===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>n?(a=!0,n=e):(i=!1,a=!0);t++}return i}isReducedEchelonForm(){let t=0,e=0,n=-1,i=!0,a=!1;for(;t<this.rows&&i;){for(e=0,a=!1;e<this.columns&&a===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>n?(a=!0,n=e):(i=!1,a=!0);for(let o=e+1;o<this.rows;o++)this.get(t,o)!==0&&(i=!1);t++}return i}echelonForm(){let t=this.clone(),e=0,n=0;for(;e<t.rows&&n<t.columns;){let i=e;for(let a=e;a<t.rows;a++)t.get(a,n)>t.get(i,n)&&(i=a);if(t.get(i,n)===0)n++;else{t.swapRows(e,i);let a=t.get(e,n);for(let o=n;o<t.columns;o++)t.set(e,o,t.get(e,o)/a);for(let o=e+1;o<t.rows;o++){let s=t.get(o,n)/t.get(e,n);t.set(o,n,0);for(let l=n+1;l<t.columns;l++)t.set(o,l,t.get(o,l)-t.get(e,l)*s)}e++,n++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,n=t.rows,i=n-1;for(;i>=0;)if(t.maxRow(i)===0)i--;else{let a=0,o=!1;for(;a<n&&o===!1;)t.get(i,a)===1?o=!0:a++;for(let s=0;s<i;s++){let l=t.get(s,a);for(let u=a;u<e;u++){let c=t.get(s,u)-l*t.get(i,u);t.set(s,u,c)}}i--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{rows:e=1,columns:n=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let i=new Tr(this.rows*e,this.columns*n);for(let a=0;a<e;a++)for(let o=0;o<n;o++)i.setSubMatrix(this,this.rows*a,this.columns*o);return i}fill(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){nl(this,t);let e=[];for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}getRowVector(t){return Tr.rowVector(this.getRow(t))}setRow(t,e){nl(this,t),e=Kv(this,e);for(let n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){nl(this,t),nl(this,e);for(let n=0;n<this.columns;n++){let i=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,i)}return this}getColumn(t){il(this,t);let e=[];for(let n=0;n<this.rows;n++)e.push(this.get(n,t));return e}getColumnVector(t){return Tr.columnVector(this.getColumn(t))}setColumn(t,e){il(this,t),e=Zv(this,e);for(let n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){il(this,t),il(this,e);for(let n=0;n<this.rows;n++){let i=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,i)}return this}addRowVector(t){t=Kv(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=Kv(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=Kv(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=Kv(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=Zv(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=Zv(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=Zv(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=Zv(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){nl(this,t);for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){il(this,t);for(let n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(){if(this.isEmpty())return NaN;let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxIndex(){Qv(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)>t&&(t=this.get(n,i),e[0]=n,e[1]=i);return e}min(){if(this.isEmpty())return NaN;let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minIndex(){Qv(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)<t&&(t=this.get(n,i),e[0]=n,e[1]=i);return e}maxRow(t){if(nl(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){nl(this,t),Qv(this);let e=this.get(t,0),n=[t,0];for(let i=1;i<this.columns;i++)this.get(t,i)>e&&(e=this.get(t,i),n[1]=i);return n}minRow(t){if(nl(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){nl(this,t),Qv(this);let e=this.get(t,0),n=[t,0];for(let i=1;i<this.columns;i++)this.get(t,i)<e&&(e=this.get(t,i),n[1]=i);return n}maxColumn(t){if(il(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){il(this,t),Qv(this);let e=this.get(0,t),n=[0,t];for(let i=1;i<this.rows;i++)this.get(i,t)>e&&(e=this.get(i,t),n[0]=i);return n}minColumn(t){if(il(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){il(this,t),Qv(this);let e=this.get(0,t),n=[0,t];for(let i=1;i<this.rows;i++)this.get(i,t)<e&&(e=this.get(i,t),n[0]=i);return n}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let n=0;n<t;n++)e.push(this.get(n,n));return e}norm(t="frobenius"){let e=0;if(t==="max")return this.max();if(t==="frobenius"){for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)e=e+this.get(n,i)*this.get(n,i);return Math.sqrt(e)}else throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){pn.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let n=0;for(let i=0;i<e.length;i++)n+=e[i]*t[i];return n}mmul(t){t=Tr.checkMatrix(t);let e=this.rows,n=this.columns,i=t.columns,a=new Tr(e,i),o=new Float64Array(n);for(let s=0;s<i;s++){for(let l=0;l<n;l++)o[l]=t.get(l,s);for(let l=0;l<e;l++){let u=0;for(let c=0;c<n;c++)u+=this.get(l,c)*o[c];a.set(l,s,u)}}return a}strassen2x2(t){t=Tr.checkMatrix(t);let e=new Tr(2,2);const n=this.get(0,0),i=t.get(0,0),a=this.get(0,1),o=t.get(0,1),s=this.get(1,0),l=t.get(1,0),u=this.get(1,1),c=t.get(1,1),f=(n+u)*(i+c),d=(s+u)*i,h=n*(o-c),v=u*(l-i),p=(n+a)*c,g=(s-n)*(i+o),m=(a-u)*(l+c),y=f+v-p+m,b=h+p,x=d+v,w=f-d+h+g;return e.set(0,0,y),e.set(0,1,b),e.set(1,0,x),e.set(1,1,w),e}strassen3x3(t){t=Tr.checkMatrix(t);let e=new Tr(3,3);const n=this.get(0,0),i=this.get(0,1),a=this.get(0,2),o=this.get(1,0),s=this.get(1,1),l=this.get(1,2),u=this.get(2,0),c=this.get(2,1),f=this.get(2,2),d=t.get(0,0),h=t.get(0,1),v=t.get(0,2),p=t.get(1,0),g=t.get(1,1),m=t.get(1,2),y=t.get(2,0),b=t.get(2,1),x=t.get(2,2),w=(n+i+a-o-s-c-f)*g,S=(n-o)*(-h+g),C=s*(-d+h+p-g-m-y+x),_=(-n+o+s)*(d-h+g),T=(o+s)*(-d+h),E=n*d,M=(-n+u+c)*(d-v+m),k=(-n+u)*(v-m),P=(u+c)*(-d+v),F=(n+i+a-s-l-u-c)*m,$=c*(-d+v+p-g-m-y+b),R=(-a+c+f)*(g+y-b),L=(a-f)*(g-b),O=a*y,B=(c+f)*(-y+b),U=(-a+s+l)*(m+y-x),W=(a-l)*(m-x),X=(s+l)*(-y+x),ae=i*p,Z=l*b,Y=o*v,fe=u*h,le=f*x,ue=E+O+ae,Ee=w+_+T+E+R+O+B,De=E+M+P+F+O+U+X,je=S+C+_+E+O+U+W,ke=S+_+T+E+Z,D=O+U+W+X+Y,z=E+M+k+$+R+L+O,H=R+L+O+B+fe,he=E+M+k+P+le;return e.set(0,0,ue),e.set(0,1,Ee),e.set(0,2,De),e.set(1,0,je),e.set(1,1,ke),e.set(1,2,D),e.set(2,0,z),e.set(2,1,H),e.set(2,2,he),e}mmulStrassen(t){t=Tr.checkMatrix(t);let e=this.clone(),n=e.rows,i=e.columns,a=t.rows,o=t.columns;i!==a&&console.warn(`Multiplying ${n} x ${i} and ${a} x ${o} matrix: dimensions do not match.`);function s(f,d,h){let v=f.rows,p=f.columns;if(v===d&&p===h)return f;{let g=pn.zeros(d,h);return g=g.setSubMatrix(f,0,0),g}}let l=Math.max(n,a),u=Math.max(i,o);e=s(e,l,u),t=s(t,l,u);function c(f,d,h,v){if(h<=512||v<=512)return f.mmul(d);h%2==1&&v%2==1?(f=s(f,h+1,v+1),d=s(d,h+1,v+1)):h%2==1?(f=s(f,h+1,v),d=s(d,h+1,v)):v%2==1&&(f=s(f,h,v+1),d=s(d,h,v+1));let p=parseInt(f.rows/2,10),g=parseInt(f.columns/2,10),m=f.subMatrix(0,p-1,0,g-1),y=d.subMatrix(0,p-1,0,g-1),b=f.subMatrix(0,p-1,g,f.columns-1),x=d.subMatrix(0,p-1,g,d.columns-1),w=f.subMatrix(p,f.rows-1,0,g-1),S=d.subMatrix(p,d.rows-1,0,g-1),C=f.subMatrix(p,f.rows-1,g,f.columns-1),_=d.subMatrix(p,d.rows-1,g,d.columns-1),T=c(pn.add(m,C),pn.add(y,_),p,g),E=c(pn.add(w,C),y,p,g),M=c(m,pn.sub(x,_),p,g),k=c(C,pn.sub(S,y),p,g),P=c(pn.add(m,b),_,p,g),F=c(pn.sub(w,m),pn.add(y,x),p,g),$=c(pn.sub(b,C),pn.add(S,_),p,g),R=pn.add(T,k);R.sub(P),R.add($);let L=pn.add(M,P),O=pn.add(E,k),B=pn.sub(T,E);B.add(M),B.add(F);let U=pn.zeros(2*R.rows,2*R.columns);return U=U.setSubMatrix(R,0,0),U=U.setSubMatrix(L,R.rows,0),U=U.setSubMatrix(O,0,R.columns),U=U.setSubMatrix(B,R.rows,R.columns),U.subMatrix(0,h-1,0,v-1)}return c(e,t,l,u)}scaleRows(t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let i=new Tr(this.rows,this.columns);for(let a=0;a<this.rows;a++){const o=this.getRow(a);o.length>0&&WG(o,{min:e,max:n,output:o}),i.setRow(a,o)}return i}scaleColumns(t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let i=new Tr(this.rows,this.columns);for(let a=0;a<this.columns;a++){const o=this.getColumn(a);o.length&&WG(o,{min:e,max:n,output:o}),i.setColumn(a,o)}return i}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let n=0;n<t;n++){let i=this.get(e,n),a=this.get(e,this.columns-1-n);this.set(e,n,a),this.set(e,this.columns-1-n,i)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let n=0;n<t;n++){let i=this.get(n,e),a=this.get(this.rows-1-n,e);this.set(n,e,a),this.set(this.rows-1-n,e,i)}return this}kroneckerProduct(t){t=Tr.checkMatrix(t);let e=this.rows,n=this.columns,i=t.rows,a=t.columns,o=new Tr(e*i,n*a);for(let s=0;s<e;s++)for(let l=0;l<n;l++)for(let u=0;u<i;u++)for(let c=0;c<a;c++)o.set(i*s+u,a*l+c,this.get(s,l)*t.get(u,c));return o}kroneckerSum(t){if(t=Tr.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,n=t.rows,i=this.kroneckerProduct(Tr.eye(n,n)),a=Tr.eye(e,e).kroneckerProduct(t);return i.add(a)}transpose(){let t=new Tr(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t=qG){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=qG){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,i){XG(this,t,e,n,i);let a=new Tr(e-t+1,i-n+1);for(let o=t;o<=e;o++)for(let s=n;s<=i;s++)a.set(o-t,s-n,this.get(o,s));return a}subMatrixRow(t,e,n){if(e===void 0&&(e=0),n===void 0&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let i=new Tr(t.length,n-e+1);for(let a=0;a<t.length;a++)for(let o=e;o<=n;o++){if(t[a]<0||t[a]>=this.rows)throw new RangeError(`Row index out of range: ${t[a]}`);i.set(a,o-e,this.get(t[a],o))}return i}subMatrixColumn(t,e,n){if(e===void 0&&(e=0),n===void 0&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let i=new Tr(n-e+1,t.length);for(let a=0;a<t.length;a++)for(let o=e;o<=n;o++){if(t[a]<0||t[a]>=this.columns)throw new RangeError(`Column index out of range: ${t[a]}`);i.set(o-e,a,this.get(o,t[a]))}return i}setSubMatrix(t,e,n){if(t=Tr.checkMatrix(t),t.isEmpty())return this;let i=e+t.rows-1,a=n+t.columns-1;XG(this,e,i,n,a);for(let o=0;o<t.rows;o++)for(let s=0;s<t.columns;s++)this.set(e+o,n+s,t.get(o,s));return this}selection(t,e){let n=EMe(this,t,e),i=new Tr(t.length,e.length);for(let a=0;a<n.row.length;a++){let o=n.row[a];for(let s=0;s<n.column.length;s++){let l=n.column[s];i.set(a,s,this.get(o,l))}}return i}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let n=0;n<t;n++)e+=this.get(n,n);return e}clone(){let t=new Tr(this.rows,this.columns);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}sum(t){switch(t){case"row":return AMe(this);case"column":return MMe(this);case void 0:return kMe(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return IMe(this);case"column":return PMe(this);case void 0:return DMe(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const e=this.sum(t);switch(t){case"row":{for(let n=0;n<this.rows;n++)e[n]/=this.columns;return e}case"column":{for(let n=0;n<this.columns;n++)e[n]/=this.rows;return e}case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");const{unbiased:n=!0,mean:i=this.mean(t)}=e;if(typeof n!="boolean")throw new TypeError("unbiased must be a boolean");switch(t){case"row":{if(!Array.isArray(i))throw new TypeError("mean must be an array");return RMe(this,n,i)}case"column":{if(!Array.isArray(i))throw new TypeError("mean must be an array");return OMe(this,n,i)}case void 0:{if(typeof i!="number")throw new TypeError("mean must be a number");return LMe(this,n,i)}default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){typeof t=="object"&&(e=t,t=void 0);const n=this.variance(t,e);if(t===void 0)return Math.sqrt(n);for(let i=0;i<n.length;i++)n[i]=Math.sqrt(n[i]);return n}center(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");const{center:n=this.mean(t)}=e;switch(t){case"row":{if(!Array.isArray(n))throw new TypeError("center must be an array");return FMe(this,n),this}case"column":{if(!Array.isArray(n))throw new TypeError("center must be an array");return NMe(this,n),this}case void 0:{if(typeof n!="number")throw new TypeError("center must be a number");return BMe(this,n),this}default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");let n=e.scale;switch(t){case"row":{if(n===void 0)n=$Me(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return zMe(this,n),this}case"column":{if(n===void 0)n=GMe(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return UMe(this,n),this}case void 0:{if(n===void 0)n=VMe(this);else if(typeof n!="number")throw new TypeError("scale must be a number");return HMe(this,n),this}default:throw new Error(`invalid option: ${t}`)}}toString(t){return YG(this,t)}}pn.prototype.klass="Matrix";typeof Symbol!="undefined"&&(pn.prototype[Symbol.for("nodejs.util.inspect.custom")]=xMe);function qG(r,t){return r-t}pn.random=pn.rand;pn.randomInt=pn.randInt;pn.diagonal=pn.diag;pn.prototype.diagonal=pn.prototype.diag;pn.identity=pn.eye;pn.prototype.negate=pn.prototype.neg;pn.prototype.tensorProduct=pn.prototype.kroneckerProduct;class Tr extends pn{constructor(t,e){super();if(Tr.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>=0)if(this.data=[],Number.isInteger(e)&&e>=0)for(let n=0;n<t;n++)this.data.push(new Float64Array(e));else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(t)){const n=t;if(t=n.length,e=t?n[0].length:0,typeof e!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let i=0;i<t;i++){if(n[i].length!==e)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(n[i]))}}else throw new TypeError("First argument must be a positive number or an array");this.rows=t,this.columns=e}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}removeRow(t){return nl(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return e===void 0&&(e=t,t=this.rows),nl(this,t,!0),e=Float64Array.from(Kv(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){il(this,t);for(let e=0;e<this.rows;e++){const n=new Float64Array(this.columns-1);for(let i=0;i<t;i++)n[i]=this.data[e][i];for(let i=t+1;i<this.columns;i++)n[i-1]=this.data[e][i];this.data[e]=n}return this.columns-=1,this}addColumn(t,e){typeof e=="undefined"&&(e=t,t=this.columns),il(this,t,!0),e=Zv(this,e);for(let n=0;n<this.rows;n++){const i=new Float64Array(this.columns+1);let a=0;for(;a<t;a++)i[a]=this.data[n][a];for(i[a++]=e[n];a<this.columns+1;a++)i[a]=this.data[n][a-1];this.data[n]=i}return this.columns+=1,this}}CMe(pn,Tr);class WMe extends pn{constructor(t){super();this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}}function Jv(r,t){let e=0;return Math.abs(r)>Math.abs(t)?(e=t/r,Math.abs(r)*Math.sqrt(1+e*e)):t!==0?(e=r/t,Math.abs(t)*Math.sqrt(1+e*e)):0}class KG{constructor(t,e={}){if(t=WMe.checkMatrix(t),t.isEmpty())throw new Error("Matrix must be non-empty");let n=t.rows,i=t.columns;const{computeLeftSingularVectors:a=!0,computeRightSingularVectors:o=!0,autoTranspose:s=!1}=e;let l=Boolean(a),u=Boolean(o),c=!1,f;if(n<i)if(!s)f=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{f=t.transpose(),n=f.rows,i=f.columns,c=!0;let E=l;l=u,u=E}else f=t.clone();let d=Math.min(n,i),h=Math.min(n+1,i),v=new Float64Array(h),p=new Tr(n,d),g=new Tr(i,i),m=new Float64Array(i),y=new Float64Array(n),b=new Float64Array(h);for(let E=0;E<h;E++)b[E]=E;let x=Math.min(n-1,i),w=Math.max(0,Math.min(i-2,n)),S=Math.max(x,w);for(let E=0;E<S;E++){if(E<x){v[E]=0;for(let M=E;M<n;M++)v[E]=Jv(v[E],f.get(M,E));if(v[E]!==0){f.get(E,E)<0&&(v[E]=-v[E]);for(let M=E;M<n;M++)f.set(M,E,f.get(M,E)/v[E]);f.set(E,E,f.get(E,E)+1)}v[E]=-v[E]}for(let M=E+1;M<i;M++){if(E<x&&v[E]!==0){let k=0;for(let P=E;P<n;P++)k+=f.get(P,E)*f.get(P,M);k=-k/f.get(E,E);for(let P=E;P<n;P++)f.set(P,M,f.get(P,M)+k*f.get(P,E))}m[M]=f.get(E,M)}if(l&&E<x)for(let M=E;M<n;M++)p.set(M,E,f.get(M,E));if(E<w){m[E]=0;for(let M=E+1;M<i;M++)m[E]=Jv(m[E],m[M]);if(m[E]!==0){m[E+1]<0&&(m[E]=0-m[E]);for(let M=E+1;M<i;M++)m[M]/=m[E];m[E+1]+=1}if(m[E]=-m[E],E+1<n&&m[E]!==0){for(let M=E+1;M<n;M++)y[M]=0;for(let M=E+1;M<n;M++)for(let k=E+1;k<i;k++)y[M]+=m[k]*f.get(M,k);for(let M=E+1;M<i;M++){let k=-m[M]/m[E+1];for(let P=E+1;P<n;P++)f.set(P,M,f.get(P,M)+k*y[P])}}if(u)for(let M=E+1;M<i;M++)g.set(M,E,m[M])}}let C=Math.min(i,n+1);if(x<i&&(v[x]=f.get(x,x)),n<C&&(v[C-1]=0),w+1<C&&(m[w]=f.get(w,C-1)),m[C-1]=0,l){for(let E=x;E<d;E++){for(let M=0;M<n;M++)p.set(M,E,0);p.set(E,E,1)}for(let E=x-1;E>=0;E--)if(v[E]!==0){for(let M=E+1;M<d;M++){let k=0;for(let P=E;P<n;P++)k+=p.get(P,E)*p.get(P,M);k=-k/p.get(E,E);for(let P=E;P<n;P++)p.set(P,M,p.get(P,M)+k*p.get(P,E))}for(let M=E;M<n;M++)p.set(M,E,-p.get(M,E));p.set(E,E,1+p.get(E,E));for(let M=0;M<E-1;M++)p.set(M,E,0)}else{for(let M=0;M<n;M++)p.set(M,E,0);p.set(E,E,1)}}if(u)for(let E=i-1;E>=0;E--){if(E<w&&m[E]!==0)for(let M=E+1;M<i;M++){let k=0;for(let P=E+1;P<i;P++)k+=g.get(P,E)*g.get(P,M);k=-k/g.get(E+1,E);for(let P=E+1;P<i;P++)g.set(P,M,g.get(P,M)+k*g.get(P,E))}for(let M=0;M<i;M++)g.set(M,E,0);g.set(E,E,1)}let _=C-1,T=Number.EPSILON;for(;C>0;){let E,M;for(E=C-2;E>=-1&&E!==-1;E--){const k=Number.MIN_VALUE+T*Math.abs(v[E]+Math.abs(v[E+1]));if(Math.abs(m[E])<=k||Number.isNaN(m[E])){m[E]=0;break}}if(E===C-2)M=4;else{let k;for(k=C-1;k>=E&&k!==E;k--){let P=(k!==C?Math.abs(m[k]):0)+(k!==E+1?Math.abs(m[k-1]):0);if(Math.abs(v[k])<=T*P){v[k]=0;break}}k===E?M=3:k===C-1?M=1:(M=2,E=k)}switch(E++,M){case 1:{let k=m[C-2];m[C-2]=0;for(let P=C-2;P>=E;P--){let F=Jv(v[P],k),$=v[P]/F,R=k/F;if(v[P]=F,P!==E&&(k=-R*m[P-1],m[P-1]=$*m[P-1]),u)for(let L=0;L<i;L++)F=$*g.get(L,P)+R*g.get(L,C-1),g.set(L,C-1,-R*g.get(L,P)+$*g.get(L,C-1)),g.set(L,P,F)}break}case 2:{let k=m[E-1];m[E-1]=0;for(let P=E;P<C;P++){let F=Jv(v[P],k),$=v[P]/F,R=k/F;if(v[P]=F,k=-R*m[P],m[P]=$*m[P],l)for(let L=0;L<n;L++)F=$*p.get(L,P)+R*p.get(L,E-1),p.set(L,E-1,-R*p.get(L,P)+$*p.get(L,E-1)),p.set(L,P,F)}break}case 3:{const k=Math.max(Math.abs(v[C-1]),Math.abs(v[C-2]),Math.abs(m[C-2]),Math.abs(v[E]),Math.abs(m[E])),P=v[C-1]/k,F=v[C-2]/k,$=m[C-2]/k,R=v[E]/k,L=m[E]/k,O=((F+P)*(F-P)+$*$)/2,B=P*$*(P*$);let U=0;(O!==0||B!==0)&&(O<0?U=0-Math.sqrt(O*O+B):U=Math.sqrt(O*O+B),U=B/(O+U));let W=(R+P)*(R-P)+U,X=R*L;for(let ae=E;ae<C-1;ae++){let Z=Jv(W,X);Z===0&&(Z=Number.MIN_VALUE);let Y=W/Z,fe=X/Z;if(ae!==E&&(m[ae-1]=Z),W=Y*v[ae]+fe*m[ae],m[ae]=Y*m[ae]-fe*v[ae],X=fe*v[ae+1],v[ae+1]=Y*v[ae+1],u)for(let le=0;le<i;le++)Z=Y*g.get(le,ae)+fe*g.get(le,ae+1),g.set(le,ae+1,-fe*g.get(le,ae)+Y*g.get(le,ae+1)),g.set(le,ae,Z);if(Z=Jv(W,X),Z===0&&(Z=Number.MIN_VALUE),Y=W/Z,fe=X/Z,v[ae]=Z,W=Y*m[ae]+fe*v[ae+1],v[ae+1]=-fe*m[ae]+Y*v[ae+1],X=fe*m[ae+1],m[ae+1]=Y*m[ae+1],l&&ae<n-1)for(let le=0;le<n;le++)Z=Y*p.get(le,ae)+fe*p.get(le,ae+1),p.set(le,ae+1,-fe*p.get(le,ae)+Y*p.get(le,ae+1)),p.set(le,ae,Z)}m[C-2]=W;break}case 4:{if(v[E]<=0&&(v[E]=v[E]<0?-v[E]:0,u))for(let k=0;k<=_;k++)g.set(k,E,-g.get(k,E));for(;E<_&&!(v[E]>=v[E+1]);){let k=v[E];if(v[E]=v[E+1],v[E+1]=k,u&&E<i-1)for(let P=0;P<i;P++)k=g.get(P,E+1),g.set(P,E+1,g.get(P,E)),g.set(P,E,k);if(l&&E<n-1)for(let P=0;P<n;P++)k=p.get(P,E+1),p.set(P,E+1,p.get(P,E)),p.set(P,E,k);E++}C--;break}}}if(c){let E=g;g=p,p=E}this.m=n,this.n=i,this.s=v,this.U=p,this.V=g}solve(t){let e=t,n=this.threshold,i=this.s.length,a=Tr.zeros(i,i);for(let d=0;d<i;d++)Math.abs(this.s[d])<=n?a.set(d,d,0):a.set(d,d,1/this.s[d]);let o=this.U,s=this.rightSingularVectors,l=s.mmul(a),u=s.rows,c=o.rows,f=Tr.zeros(u,c);for(let d=0;d<u;d++)for(let h=0;h<c;h++){let v=0;for(let p=0;p<i;p++)v+=l.get(d,p)*o.get(h,p);f.set(d,h,v)}return f.mmul(e)}solveForDiagonal(t){return this.solve(Tr.diag(t))}inverse(){let t=this.V,e=this.threshold,n=t.rows,i=t.columns,a=new Tr(n,this.s.length);for(let c=0;c<n;c++)for(let f=0;f<i;f++)Math.abs(this.s[f])>e&&a.set(c,f,t.get(c,f)/this.s[f]);let o=this.U,s=o.rows,l=o.columns,u=new Tr(n,s);for(let c=0;c<n;c++)for(let f=0;f<s;f++){let d=0;for(let h=0;h<l;h++)d+=a.get(c,h)*o.get(f,h);u.set(c,f,d)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s;for(let i=0,a=n.length;i<a;i++)n[i]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Tr.diag(this.s)}}class jMe{constructor(t){this.distances=t.distances,this.dimension=t.dimension||2,this.linkDistance=t.linkDistance}layout(){const t=this,{dimension:e,distances:n,linkDistance:i}=t;try{const a=Tr.mul(Tr.pow(n,2),-.5),o=a.mean("row"),s=a.mean("column"),l=a.mean();a.add(l).subRowVector(o).subColumnVector(s);const u=new KG(a),c=Tr.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(f=>Tr.mul([f],[c]).toJSON()[0].splice(0,e))}catch{const o=[];for(let s=0;s<n.length;s++){const l=Math.random()*i,u=Math.random()*i;o.push([l,u])}return o}}}const YMe=800;class XMe{constructor(t){this.disp=[],this.positions=t.positions,this.adjMatrix=t.adjMatrix,this.focusID=t.focusID,this.radii=t.radii,this.iterations=t.iterations||10,this.height=t.height||10,this.width=t.width||10,this.speed=t.speed||100,this.gravity=t.gravity||10,this.nodeSizeFunc=t.nodeSizeFunc,this.k=t.k||5,this.strictRadial=t.strictRadial,this.nodes=t.nodes}layout(){const t=this,e=t.positions,n=[],i=t.iterations,a=t.width/10;t.maxDisplace=a,t.disp=n;for(let o=0;o<i;o++)e.forEach((s,l)=>{n[l]={x:0,y:0}}),t.getRepulsion(),t.updatePositions();return e}getRepulsion(){const t=this,e=t.positions,n=t.nodes,i=t.disp,a=t.k,o=t.radii||[];e.forEach((s,l)=>{i[l]={x:0,y:0},e.forEach((u,c)=>{if(l===c||o[l]!==o[c])return;let f=s[0]-u[0],d=s[1]-u[1],h=Math.sqrt(f*f+d*d);if(h===0){h=1;const v=l>c?1:-1;f=.01*v,d=.01*v}if(h<t.nodeSizeFunc(n[l])/2+t.nodeSizeFunc(n[c])/2){const v=a*a/h;i[l].x+=f/h*v,i[l].y+=d/h*v}})})}updatePositions(){const t=this,e=t.positions,n=t.disp,i=t.speed,a=t.strictRadial,o=t.focusID,s=t.maxDisplace||t.width/10;a&&n.forEach((u,c)=>{const f=e[c][0]-e[o][0],d=e[c][1]-e[o][1],h=Math.sqrt(f*f+d*d);let v=d/h,p=-f/h;const g=Math.sqrt(u.x*u.x+u.y*u.y);let m=Math.acos((v*u.x+p*u.y)/g);m>Math.PI/2&&(m-=Math.PI/2,v*=-1,p*=-1);const y=Math.cos(m)*g;u.x=v*y,u.y=p*y});const l=t.radii;e.forEach((u,c)=>{if(c===o)return;const f=Math.sqrt(n[c].x*n[c].x+n[c].y*n[c].y);if(f>0&&c!==o){const d=Math.min(s*(i/YMe),f);if(u[0]+=n[c].x/f*d,u[1]+=n[c].y/f*d,a){let h=u[0]-e[o][0],v=u[1]-e[o][1];const p=Math.sqrt(h*h+v*v);h=h/p*l[c],v=v/p*l[c],u[0]=e[o][0]+h,u[1]=e[o][1]+v}}})}}function qMe(r){const t=r.length,e=r[0].length,n=[];for(let i=0;i<t;i++){const a=[];for(let o=0;o<e;o++)r[i][o]!==0?a.push(1/(r[i][o]*r[i][o])):a.push(0);n.push(a)}return n}function KMe(r,t){let e=-1;return r.forEach((n,i)=>{n.id===t&&(e=i)}),e}function ZG(r,t){return Math.sqrt((r[0]-t[0])*(r[0]-t[0])+(r[1]-t[1])*(r[1]-t[1]))}class QG extends wo{constructor(t){super();this.maxIteration=1e3,this.focusNode=null,this.unitRadius=null,this.linkDistance=50,this.preventOverlap=!1,this.strictRadial=!0,this.maxPreventOverlapIteration=200,this.sortStrength=10,this.nodes=[],this.edges=[],this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}execute(){const t=this,e=t.nodes,n=t.edges||[];if(!e||e.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const i=t.center;if(e.length===1){e[0].x=i[0],e[0].y=i[1],t.onLayoutEnd&&t.onLayoutEnd();return}const a=t.linkDistance;let o=null;if(ny(t.focusNode)){let M=!1;for(let k=0;k<e.length;k++)e[k].id===t.focusNode&&(o=e[k],t.focusNode=o,M=!0,k=e.length);M||(o=null)}else o=t.focusNode;o||(o=e[0],t.focusNode=o);const s=KMe(e,o.id);t.focusIndex=s;const l=ez({nodes:e,edges:n},!1),u=J4(l),c=t.maxToFocus(u,s);t.handleInfinity(u,s,c+1),t.distances=u;const f=u[s],d=t.width||500,h=t.height||500;let v=d-i[0]>i[0]?i[0]:d-i[0],p=h-i[1]>i[1]?i[1]:h-i[1];v===0&&(v=d/2),p===0&&(p=h/2);const g=p>v?v:p,m=Math.max(...f),y=[];f.forEach((M,k)=>{t.unitRadius||(t.unitRadius=g/m),y[k]=M*t.unitRadius}),t.radii=y;const b=t.eIdealDisMatrix();t.eIdealDistances=b;const x=qMe(b);t.weights=x;let S=new jMe({linkDistance:a,distances:b}).layout();S.forEach(M=>{tM(M[0])&&(M[0]=Math.random()*a),tM(M[1])&&(M[1]=Math.random()*a)}),t.positions=S,S.forEach((M,k)=>{e[k].x=M[0]+i[0],e[k].y=M[1]+i[1]}),S.forEach(M=>{M[0]-=S[s][0],M[1]-=S[s][1]}),t.run();const C=t.preventOverlap,_=t.nodeSize;let T;const E=t.strictRadial;if(C){const M=t.nodeSpacing;let k;Wt(M)?k=()=>M:Dc(M)?k=M:k=()=>0,_?Xa(_)?T=$=>(_[0]>_[1]?_[0]:_[1])+k($):T=$=>_+k($):T=$=>$.size?Xa($.size)?($.size[0]>$.size[1]?$.size[0]:$.size[1])+k($):Fl($.size)?($.size.width>$.size.height?$.size.width:$.size.height)+k($):$.size+k($):10+k($);const P={nodes:e,nodeSizeFunc:T,adjMatrix:l,positions:S,radii:y,height:h,width:d,strictRadial:E,focusID:s,iterations:t.maxPreventOverlapIteration||200,k:S.length/4.5};S=new XMe(P).layout()}return S.forEach((M,k)=>{e[k].x=M[0]+i[0],e[k].y=M[1]+i[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}run(){const t=this,e=t.maxIteration,n=t.positions||[],i=t.weights||[],a=t.eIdealDistances||[],o=t.radii||[];for(let s=0;s<=e;s++){const l=s/e;t.oneIteration(l,n,o,a,i)}}oneIteration(t,e,n,i,a){const o=this,s=1-t,l=o.focusIndex;e.forEach((u,c)=>{const f=ZG(u,[0,0]),d=f===0?0:1/f;if(c===l)return;let h=0,v=0,p=0;e.forEach((m,y)=>{if(c===y)return;const b=ZG(u,m),x=b===0?0:1/b,w=i[y][c];p+=a[c][y],h+=a[c][y]*(m[0]+w*(u[0]-m[0])*x),v+=a[c][y]*(m[1]+w*(u[1]-m[1])*x)});const g=n[c]===0?0:1/n[c];p*=s,p+=t*g*g,h*=s,h+=t*g*u[0]*d,u[0]=h/p,v*=s,v+=t*g*u[1]*d,u[1]=v/p})}eIdealDisMatrix(){const t=this,e=t.nodes;if(!e)return[];const n=t.distances,i=t.linkDistance,a=t.radii||[],o=t.unitRadius||50,s=[];return n&&n.forEach((l,u)=>{const c=[];l.forEach((f,d)=>{if(u===d)c.push(0);else if(a[u]===a[d])if(t.sortBy==="data")c.push(f*(Math.abs(u-d)*t.sortStrength)/(a[u]/o));else if(t.sortBy){let h=e[u][t.sortBy]||0,v=e[d][t.sortBy]||0;ny(h)&&(h=h.charCodeAt(0)),ny(v)&&(v=v.charCodeAt(0)),c.push(f*(Math.abs(h-v)*t.sortStrength)/(a[u]/o))}else c.push(f*i/(a[u]/o));else{const h=(i+o)/2;c.push(f*h)}}),s.push(c)}),s}handleInfinity(t,e,n){const i=t.length;for(let a=0;a<i;a++)if(t[e][a]===1/0){t[e][a]=n,t[a][e]=n;for(let o=0;o<i;o++)t[a][o]!==1/0&&t[e][o]===1/0&&(t[e][o]=n+t[a][o],t[o][e]=n+t[a][o])}for(let a=0;a<i;a++)if(a!==e){for(let o=0;o<i;o++)if(t[a][o]===1/0){let s=Math.abs(t[e][a]-t[e][o]);s=s===0?1:s,t[a][o]=s}}}maxToFocus(t,e){let n=0;for(let i=0;i<t[e].length;i++)t[e][i]!==1/0&&(n=t[e][i]>n?t[e][i]:n);return n}getType(){return"radial"}}class JG extends wo{constructor(t){super();this.nodeSize=30,this.minNodeSpacing=10,this.preventOverlap=!1,this.equidistant=!1,this.startAngle=3/2*Math.PI,this.clockwise=!0,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}execute(){const t=this,e=t.nodes,n=t.edges,i=e.length;if(i===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const a=t.center;if(i===1){e[0].x=a[0],e[0].y=a[1],t.onLayoutEnd&&t.onLayoutEnd();return}const o=[];let s;Xa(t.nodeSize)?s=Math.max(t.nodeSize[0],t.nodeSize[1]):s=t.nodeSize,e.forEach(v=>{o.push(v);let p=s;Xa(v.size)?p=Math.max(v.size[0],v.size[1]):Wt(v.size)?p=v.size:Fl(v.size)&&(p=Math.max(v.size.width,v.size.height)),s=Math.max(s,p)}),t.clockwise=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise;const l={},u={};if(o.forEach((v,p)=>{l[v.id]=v,u[v.id]=p}),(t.sortBy==="degree"||!ny(t.sortBy)||o[0][t.sortBy]===void 0)&&(t.sortBy="degree",!Wt(e[0].degree))){const v=iy(e.length,u,n);o.forEach((p,g)=>{p.degree=v[g]})}o.sort((v,p)=>p[t.sortBy]-v[t.sortBy]),t.maxValueNode=o[0],t.maxLevelDiff=t.maxLevelDiff||t.maxValueNode[t.sortBy]/4;const c=[[]];let f=c[0];o.forEach(v=>{if(f.length>0){const p=Math.abs(f[0][t.sortBy]-v[t.sortBy]);t.maxLevelDiff&&p>=t.maxLevelDiff&&(f=[],c.push(f))}f.push(v)});let d=s+t.minNodeSpacing;if(!t.preventOverlap){const v=c.length>0&&c[0].length>1,g=(Math.min(t.width,t.height)/2-d)/(c.length+(v?1:0));d=Math.min(d,g)}let h=0;if(c.forEach(v=>{let p=t.sweep;p===void 0&&(p=2*Math.PI-2*Math.PI/v.length);const g=v.dTheta=p/Math.max(1,v.length-1);if(v.length>1&&t.preventOverlap){const m=Math.cos(g)-Math.cos(0),y=Math.sin(g)-Math.sin(0),b=Math.sqrt(d*d/(m*m+y*y));h=Math.max(b,h)}v.r=h,h+=d}),t.equidistant){let v=0,p=0;for(let g=0;g<c.length;g++){const y=c[g].r-p;v=Math.max(v,y)}p=0,c.forEach((g,m)=>{m===0&&(p=g.r),g.r=p,p+=v})}return c.forEach(v=>{const p=v.dTheta,g=v.r;v.forEach((m,y)=>{const b=t.startAngle+(t.clockwise?1:-1)*p*y;m.x=a[0]+g*Math.cos(b),m.y=a[1]+g*Math.sin(b)})}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}getType(){return"concentric"}}class e8 extends wo{constructor(t){super();this.center=[0,0],this.linkDistance=50,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],linkDistance:50}}execute(){const t=this,{nodes:e,edges:n=[]}=t,i=t.center;if(!e||e.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(e.length===1){e[0].x=i[0],e[0].y=i[1],t.onLayoutEnd&&t.onLayoutEnd();return}const a=t.linkDistance,o=ez({nodes:e,edges:n},!1),s=J4(o);t.handleInfinity(s);const l=Zge(s,a);t.scaledDistances=l;const u=t.runMDS();return t.positions=u,u.forEach((c,f)=>{e[f].x=c[0]+i[0],e[f].y=c[1]+i[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}runMDS(){const t=this,e=2,n=t.scaledDistances,i=Tr.mul(Tr.pow(n,2),-.5),a=i.mean("row"),o=i.mean("column"),s=i.mean();i.add(s).subRowVector(a).subColumnVector(o);const l=new KG(i),u=Tr.sqrt(l.diagonalMatrix).diagonal();return l.leftSingularVectors.toJSON().map(c=>Tr.mul([c],[u]).toJSON()[0].splice(0,e))}handleInfinity(t){let e=-999999;t.forEach(n=>{n.forEach(i=>{i!==1/0&&e<i&&(e=i)})}),t.forEach((n,i)=>{n.forEach((a,o)=>{a===1/0&&(t[i][o]=e)})})}getType(){return"mds"}}const ZMe=800;class t8 extends wo{constructor(t){super();this.maxIteration=1e3,this.workerEnabled=!1,this.gravity=10,this.speed=5,this.clustering=!1,this.clusterGravity=10,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.onLayoutEnd=()=>{},this.tick=()=>{},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){var t,e;const n=this,i=n.nodes;if(n.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(n.timeInterval),!i||i.length===0){(t=n.onLayoutEnd)===null||t===void 0||t.call(n);return}!n.width&&typeof window!="undefined"&&(n.width=window.innerWidth),!n.height&&typeof window!="undefined"&&(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);const a=n.center;if(i.length===1){i[0].x=a[0],i[0].y=a[1],(e=n.onLayoutEnd)===null||e===void 0||e.call(n);return}const o={},s={};return i.forEach((l,u)=>{Wt(l.x)||(l.x=Math.random()*this.width),Wt(l.y)||(l.y=Math.random()*this.height),o[l.id]=l,s[l.id]=u}),n.nodeMap=o,n.nodeIdxMap=s,n.run()}run(){var t;const e=this,n=e.nodes;if(!n)return;const{edges:i,maxIteration:a,workerEnabled:o}=e,s=e.clustering,l={};if(s){n.forEach(u=>{if(l[u.cluster]===void 0){const f={name:u.cluster,cx:0,cy:0,count:0};l[u.cluster]=f}const c=l[u.cluster];Wt(u.x)&&(c.cx+=u.x),Wt(u.y)&&(c.cy+=u.y),c.count++});for(const u in l)l[u].cx/=l[u].count,l[u].cy/=l[u].count}if(o){for(let u=0;u<a;u++)e.runOneStep(l);(t=e.onLayoutEnd)===null||t===void 0||t.call(e)}else{if(typeof window=="undefined")return;let u=0;this.timeInterval=window.setInterval(()=>{var c;e.runOneStep(l),u++,u>=a&&((c=e.onLayoutEnd)===null||c===void 0||c.call(e),window.clearInterval(e.timeInterval))},0)}return{nodes:n,edges:i}}runOneStep(t){var e;const n=this,i=n.nodes;if(!i)return;const{edges:a,center:o,gravity:s,speed:l,clustering:u}=n,c=n.height*n.width,f=Math.sqrt(c)/10,d=c/(i.length+1),h=Math.sqrt(d),v=[];if(i.forEach((p,g)=>{v[g]={x:0,y:0}}),n.applyCalculate(i,a,v,h,d),u){const p=n.clusterGravity||s;i.forEach((g,m)=>{if(!Wt(g.x)||!Wt(g.y))return;const y=t[g.cluster],b=Math.sqrt((g.x-y.cx)*(g.x-y.cx)+(g.y-y.cy)*(g.y-y.cy)),x=h*p;v[m].x-=x*(g.x-y.cx)/b,v[m].y-=x*(g.y-y.cy)/b});for(const g in t)t[g].cx=0,t[g].cy=0,t[g].count=0;i.forEach(g=>{const m=t[g.cluster];Wt(g.x)&&(m.cx+=g.x),Wt(g.y)&&(m.cy+=g.y),m.count++});for(const g in t)t[g].cx/=t[g].count,t[g].cy/=t[g].count}i.forEach((p,g)=>{if(!Wt(p.x)||!Wt(p.y))return;const m=.01*h*s;v[g].x-=m*(p.x-o[0]),v[g].y-=m*(p.y-o[1])}),i.forEach((p,g)=>{if(Wt(p.fx)&&Wt(p.fy)){p.x=p.fx,p.y=p.fy;return}if(!Wt(p.x)||!Wt(p.y))return;const m=Math.sqrt(v[g].x*v[g].x+v[g].y*v[g].y);if(m>0){const y=Math.min(f*(l/ZMe),m);p.x+=v[g].x/m*y,p.y+=v[g].y/m*y}}),(e=n.tick)===null||e===void 0||e.call(n)}applyCalculate(t,e,n,i,a){const o=this;o.calRepulsive(t,n,a),e&&o.calAttractive(e,n,i)}calRepulsive(t,e,n){t.forEach((i,a)=>{e[a]={x:0,y:0},t.forEach((o,s)=>{if(a===s||!Wt(i.x)||!Wt(o.x)||!Wt(i.y)||!Wt(o.y))return;let l=i.x-o.x,u=i.y-o.y,c=l*l+u*u;if(c===0){c=1;const d=a>s?1:-1;l=.01*d,u=.01*d}const f=n/c;e[a].x+=l*f,e[a].y+=u*f})})}calAttractive(t,e,n){t.forEach(i=>{const a=wn(i,"source"),o=wn(i,"target");if(!a||!o)return;const s=this.nodeIdxMap[a],l=this.nodeIdxMap[o];if(s===l)return;const u=this.nodeMap[a],c=this.nodeMap[o];if(!Wt(c.x)||!Wt(u.x)||!Wt(c.y)||!Wt(u.y))return;const f=c.x-u.x,d=c.y-u.y,h=Math.sqrt(f*f+d*d),v=h*h/n;e[l].x-=f/h*v,e[l].y-=d/h*v,e[s].x+=f/h*v,e[s].y+=d/h*v})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0}getType(){return"fruchterman"}}function fr(r,t,e,n){!e||Object.defineProperty(r,t,{enumerable:e.enumerable,configurable:e.configurable,writable:e.writable,value:e.initializer?e.initializer.call(n):void 0})}function ar(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function r8(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function br(r,t,e){return t&&r8(r.prototype,t),e&&r8(r,e),r}function dr(r,t,e,n,i){var a={};return Object.keys(n).forEach(function(o){a[o]=n[o]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=e.slice().reverse().reduce(function(o,s){return s(r,t,o)||o},a),i&&a.initializer!==void 0&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),a.initializer===void 0&&(Object.defineProperty(r,t,a),a=null),a}/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var n8;(function(r){(function(t){var e=typeof Ic=="object"?Ic:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),n=i(r);typeof e.Reflect=="undefined"?e.Reflect=r:n=i(e.Reflect,n),t(n);function i(a,o){return function(s,l){typeof a[s]!="function"&&Object.defineProperty(a,s,{configurable:!0,writable:!0,value:l}),o&&o(s,l)}}})(function(t){var e=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",i=n&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",a=n&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",o=typeof Object.create=="function",s={__proto__:[]}instanceof Array,l=!o&&!s,u={create:o?function(){return V(Object.create(null))}:s?function(){return V({__proto__:null})}:function(){return V({})},has:l?function(j,q){return e.call(j,q)}:function(j,q){return q in j},get:l?function(j,q){return e.call(j,q)?j[q]:void 0}:function(j,q){return j[q]}},c=Object.getPrototypeOf(Function),f=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",d=!f&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Ve(),h=!f&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Ie(),v=!f&&typeof WeakMap=="function"?WeakMap:Be(),p=new v;function g(j,q,ee,Q){if(W(ee)){if(!De(j))throw new TypeError;if(!ke(q))throw new TypeError;return E(j,q)}else{if(!De(j))throw new TypeError;if(!Z(q))throw new TypeError;if(!Z(Q)&&!W(Q)&&!X(Q))throw new TypeError;return X(Q)&&(Q=void 0),ee=Ee(ee),M(j,q,ee,Q)}}t("decorate",g);function m(j,q){function ee(Q,me){if(!Z(Q))throw new TypeError;if(!W(me)&&!D(me))throw new TypeError;L(j,q,Q,me)}return ee}t("metadata",m);function y(j,q,ee,Q){if(!Z(ee))throw new TypeError;return W(Q)||(Q=Ee(Q)),L(j,q,ee,Q)}t("defineMetadata",y);function b(j,q,ee){if(!Z(q))throw new TypeError;return W(ee)||(ee=Ee(ee)),P(j,q,ee)}t("hasMetadata",b);function x(j,q,ee){if(!Z(q))throw new TypeError;return W(ee)||(ee=Ee(ee)),F(j,q,ee)}t("hasOwnMetadata",x);function w(j,q,ee){if(!Z(q))throw new TypeError;return W(ee)||(ee=Ee(ee)),$(j,q,ee)}t("getMetadata",w);function S(j,q,ee){if(!Z(q))throw new TypeError;return W(ee)||(ee=Ee(ee)),R(j,q,ee)}t("getOwnMetadata",S);function C(j,q){if(!Z(j))throw new TypeError;return W(q)||(q=Ee(q)),O(j,q)}t("getMetadataKeys",C);function _(j,q){if(!Z(j))throw new TypeError;return W(q)||(q=Ee(q)),B(j,q)}t("getOwnMetadataKeys",_);function T(j,q,ee){if(!Z(q))throw new TypeError;W(ee)||(ee=Ee(ee));var Q=k(q,ee,!1);if(W(Q)||!Q.delete(j))return!1;if(Q.size>0)return!0;var me=p.get(q);return me.delete(ee),me.size>0||p.delete(q),!0}t("deleteMetadata",T);function E(j,q){for(var ee=j.length-1;ee>=0;--ee){var Q=j[ee],me=Q(q);if(!W(me)&&!X(me)){if(!ke(me))throw new TypeError;q=me}}return q}function M(j,q,ee,Q){for(var me=j.length-1;me>=0;--me){var He=j[me],ze=He(q,ee,Q);if(!W(ze)&&!X(ze)){if(!Z(ze))throw new TypeError;Q=ze}}return Q}function k(j,q,ee){var Q=p.get(j);if(W(Q)){if(!ee)return;Q=new d,p.set(j,Q)}var me=Q.get(q);if(W(me)){if(!ee)return;me=new d,Q.set(q,me)}return me}function P(j,q,ee){var Q=F(j,q,ee);if(Q)return!0;var me=Qe(q);return X(me)?!1:P(j,me,ee)}function F(j,q,ee){var Q=k(q,ee,!1);return W(Q)?!1:le(Q.has(j))}function $(j,q,ee){var Q=F(j,q,ee);if(Q)return R(j,q,ee);var me=Qe(q);if(!X(me))return $(j,me,ee)}function R(j,q,ee){var Q=k(q,ee,!1);if(!W(Q))return Q.get(j)}function L(j,q,ee,Q){var me=k(ee,Q,!0);me.set(j,q)}function O(j,q){var ee=B(j,q),Q=Qe(j);if(Q===null)return ee;var me=O(Q,q);if(me.length<=0)return ee;if(ee.length<=0)return me;for(var He=new h,ze=[],it=0,we=ee;it<we.length;it++){var nt=we[it],st=He.has(nt);st||(He.add(nt),ze.push(nt))}for(var jt=0,Jt=me;jt<Jt.length;jt++){var nt=Jt[jt],st=He.has(nt);st||(He.add(nt),ze.push(nt))}return ze}function B(j,q){var ee=[],Q=k(j,q,!1);if(W(Q))return ee;for(var me=Q.keys(),He=H(me),ze=0;;){var it=te(He);if(!it)return ee.length=ze,ee;var we=he(it);try{ee[ze]=we}catch(nt){try{ge(He)}finally{throw nt}}ze++}}function U(j){if(j===null)return 1;switch(typeof j){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return j===null?1:6;default:return 6}}function W(j){return j===void 0}function X(j){return j===null}function ae(j){return typeof j=="symbol"}function Z(j){return typeof j=="object"?j!==null:typeof j=="function"}function Y(j,q){switch(U(j)){case 0:return j;case 1:return j;case 2:return j;case 3:return j;case 4:return j;case 5:return j}var ee=q===3?"string":q===5?"number":"default",Q=z(j,i);if(Q!==void 0){var me=Q.call(j,ee);if(Z(me))throw new TypeError;return me}return fe(j,ee==="default"?"number":ee)}function fe(j,q){if(q==="string"){var ee=j.toString;if(je(ee)){var Q=ee.call(j);if(!Z(Q))return Q}var me=j.valueOf;if(je(me)){var Q=me.call(j);if(!Z(Q))return Q}}else{var me=j.valueOf;if(je(me)){var Q=me.call(j);if(!Z(Q))return Q}var He=j.toString;if(je(He)){var Q=He.call(j);if(!Z(Q))return Q}}throw new TypeError}function le(j){return!!j}function ue(j){return""+j}function Ee(j){var q=Y(j,3);return ae(q)?q:ue(q)}function De(j){return Array.isArray?Array.isArray(j):j instanceof Object?j instanceof Array:Object.prototype.toString.call(j)==="[object Array]"}function je(j){return typeof j=="function"}function ke(j){return typeof j=="function"}function D(j){switch(U(j)){case 3:return!0;case 4:return!0;default:return!1}}function z(j,q){var ee=j[q];if(ee!=null){if(!je(ee))throw new TypeError;return ee}}function H(j){var q=z(j,a);if(!je(q))throw new TypeError;var ee=q.call(j);if(!Z(ee))throw new TypeError;return ee}function he(j){return j.value}function te(j){var q=j.next();return q.done?!1:q}function ge(j){var q=j.return;q&&q.call(j)}function Qe(j){var q=Object.getPrototypeOf(j);if(typeof j!="function"||j===c||q!==c)return q;var ee=j.prototype,Q=ee&&Object.getPrototypeOf(ee);if(Q==null||Q===Object.prototype)return q;var me=Q.constructor;return typeof me!="function"||me===j?q:me}function Ve(){var j={},q=[],ee=function(){function ze(it,we,nt){this._index=0,this._keys=it,this._values=we,this._selector=nt}return ze.prototype["@@iterator"]=function(){return this},ze.prototype[a]=function(){return this},ze.prototype.next=function(){var it=this._index;if(it>=0&&it<this._keys.length){var we=this._selector(this._keys[it],this._values[it]);return it+1>=this._keys.length?(this._index=-1,this._keys=q,this._values=q):this._index++,{value:we,done:!1}}return{value:void 0,done:!0}},ze.prototype.throw=function(it){throw this._index>=0&&(this._index=-1,this._keys=q,this._values=q),it},ze.prototype.return=function(it){return this._index>=0&&(this._index=-1,this._keys=q,this._values=q),{value:it,done:!0}},ze}();return function(){function ze(){this._keys=[],this._values=[],this._cacheKey=j,this._cacheIndex=-2}return Object.defineProperty(ze.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),ze.prototype.has=function(it){return this._find(it,!1)>=0},ze.prototype.get=function(it){var we=this._find(it,!1);return we>=0?this._values[we]:void 0},ze.prototype.set=function(it,we){var nt=this._find(it,!0);return this._values[nt]=we,this},ze.prototype.delete=function(it){var we=this._find(it,!1);if(we>=0){for(var nt=this._keys.length,st=we+1;st<nt;st++)this._keys[st-1]=this._keys[st],this._values[st-1]=this._values[st];return this._keys.length--,this._values.length--,it===this._cacheKey&&(this._cacheKey=j,this._cacheIndex=-2),!0}return!1},ze.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=j,this._cacheIndex=-2},ze.prototype.keys=function(){return new ee(this._keys,this._values,Q)},ze.prototype.values=function(){return new ee(this._keys,this._values,me)},ze.prototype.entries=function(){return new ee(this._keys,this._values,He)},ze.prototype["@@iterator"]=function(){return this.entries()},ze.prototype[a]=function(){return this.entries()},ze.prototype._find=function(it,we){return this._cacheKey!==it&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=it)),this._cacheIndex<0&&we&&(this._cacheIndex=this._keys.length,this._keys.push(it),this._values.push(void 0)),this._cacheIndex},ze}();function Q(ze,it){return ze}function me(ze,it){return it}function He(ze,it){return[ze,it]}}function Ie(){return function(){function j(){this._map=new d}return Object.defineProperty(j.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),j.prototype.has=function(q){return this._map.has(q)},j.prototype.add=function(q){return this._map.set(q,q),this},j.prototype.delete=function(q){return this._map.delete(q)},j.prototype.clear=function(){this._map.clear()},j.prototype.keys=function(){return this._map.keys()},j.prototype.values=function(){return this._map.values()},j.prototype.entries=function(){return this._map.entries()},j.prototype["@@iterator"]=function(){return this.keys()},j.prototype[a]=function(){return this.keys()},j}()}function Be(){var j=16,q=u.create(),ee=Q();return function(){function we(){this._key=Q()}return we.prototype.has=function(nt){var st=me(nt,!1);return st!==void 0?u.has(st,this._key):!1},we.prototype.get=function(nt){var st=me(nt,!1);return st!==void 0?u.get(st,this._key):void 0},we.prototype.set=function(nt,st){var jt=me(nt,!0);return jt[this._key]=st,this},we.prototype.delete=function(nt){var st=me(nt,!1);return st!==void 0?delete st[this._key]:!1},we.prototype.clear=function(){this._key=Q()},we}();function Q(){var we;do we="@@WeakMap@@"+it();while(u.has(q,we));return q[we]=!0,we}function me(we,nt){if(!e.call(we,ee)){if(!nt)return;Object.defineProperty(we,ee,{value:u.create()})}return we[ee]}function He(we,nt){for(var st=0;st<nt;++st)we[st]=Math.random()*255|0;return we}function ze(we){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(we)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(we)):He(new Uint8Array(we),we):He(new Array(we),we)}function it(){var we=ze(j);we[6]=we[6]&79|64,we[8]=we[8]&191|128;for(var nt="",st=0;st<j;++st){var jt=we[st];(st===4||st===6||st===8)&&(nt+="-"),jt<16&&(nt+="0"),nt+=jt.toString(16).toLowerCase()}return nt}}function V(j){return j.__=void 0,delete j.__,j}})})(n8||(n8={}));var QMe=Rr(function(r){var t=function(e){var n=Object.prototype,i=n.hasOwnProperty,a,o=typeof Symbol=="function"?Symbol:{},s=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(O,B,U){return Object.defineProperty(O,B,{value:U,enumerable:!0,configurable:!0,writable:!0}),O[B]}try{c({},"")}catch{c=function(B,U,W){return B[U]=W}}function f(O,B,U,W){var X=B&&B.prototype instanceof y?B:y,ae=Object.create(X.prototype),Z=new $(W||[]);return ae._invoke=M(O,U,Z),ae}e.wrap=f;function d(O,B,U){try{return{type:"normal",arg:O.call(B,U)}}catch(W){return{type:"throw",arg:W}}}var h="suspendedStart",v="suspendedYield",p="executing",g="completed",m={};function y(){}function b(){}function x(){}var w={};c(w,s,function(){return this});var S=Object.getPrototypeOf,C=S&&S(S(R([])));C&&C!==n&&i.call(C,s)&&(w=C);var _=x.prototype=y.prototype=Object.create(w);b.prototype=x,c(_,"constructor",x),c(x,"constructor",b),b.displayName=c(x,u,"GeneratorFunction");function T(O){["next","throw","return"].forEach(function(B){c(O,B,function(U){return this._invoke(B,U)})})}e.isGeneratorFunction=function(O){var B=typeof O=="function"&&O.constructor;return B?B===b||(B.displayName||B.name)==="GeneratorFunction":!1},e.mark=function(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,x):(O.__proto__=x,c(O,u,"GeneratorFunction")),O.prototype=Object.create(_),O},e.awrap=function(O){return{__await:O}};function E(O,B){function U(ae,Z,Y,fe){var le=d(O[ae],O,Z);if(le.type==="throw")fe(le.arg);else{var ue=le.arg,Ee=ue.value;return Ee&&typeof Ee=="object"&&i.call(Ee,"__await")?B.resolve(Ee.__await).then(function(De){U("next",De,Y,fe)},function(De){U("throw",De,Y,fe)}):B.resolve(Ee).then(function(De){ue.value=De,Y(ue)},function(De){return U("throw",De,Y,fe)})}}var W;function X(ae,Z){function Y(){return new B(function(fe,le){U(ae,Z,fe,le)})}return W=W?W.then(Y,Y):Y()}this._invoke=X}T(E.prototype),c(E.prototype,l,function(){return this}),e.AsyncIterator=E,e.async=function(O,B,U,W,X){X===void 0&&(X=Promise);var ae=new E(f(O,B,U,W),X);return e.isGeneratorFunction(B)?ae:ae.next().then(function(Z){return Z.done?Z.value:ae.next()})};function M(O,B,U){var W=h;return function(ae,Z){if(W===p)throw new Error("Generator is already running");if(W===g){if(ae==="throw")throw Z;return L()}for(U.method=ae,U.arg=Z;;){var Y=U.delegate;if(Y){var fe=k(Y,U);if(fe){if(fe===m)continue;return fe}}if(U.method==="next")U.sent=U._sent=U.arg;else if(U.method==="throw"){if(W===h)throw W=g,U.arg;U.dispatchException(U.arg)}else U.method==="return"&&U.abrupt("return",U.arg);W=p;var le=d(O,B,U);if(le.type==="normal"){if(W=U.done?g:v,le.arg===m)continue;return{value:le.arg,done:U.done}}else le.type==="throw"&&(W=g,U.method="throw",U.arg=le.arg)}}}function k(O,B){var U=O.iterator[B.method];if(U===a){if(B.delegate=null,B.method==="throw"){if(O.iterator.return&&(B.method="return",B.arg=a,k(O,B),B.method==="throw"))return m;B.method="throw",B.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var W=d(U,O.iterator,B.arg);if(W.type==="throw")return B.method="throw",B.arg=W.arg,B.delegate=null,m;var X=W.arg;if(!X)return B.method="throw",B.arg=new TypeError("iterator result is not an object"),B.delegate=null,m;if(X.done)B[O.resultName]=X.value,B.next=O.nextLoc,B.method!=="return"&&(B.method="next",B.arg=a);else return X;return B.delegate=null,m}T(_),c(_,u,"Generator"),c(_,s,function(){return this}),c(_,"toString",function(){return"[object Generator]"});function P(O){var B={tryLoc:O[0]};1 in O&&(B.catchLoc=O[1]),2 in O&&(B.finallyLoc=O[2],B.afterLoc=O[3]),this.tryEntries.push(B)}function F(O){var B=O.completion||{};B.type="normal",delete B.arg,O.completion=B}function $(O){this.tryEntries=[{tryLoc:"root"}],O.forEach(P,this),this.reset(!0)}e.keys=function(O){var B=[];for(var U in O)B.push(U);return B.reverse(),function W(){for(;B.length;){var X=B.pop();if(X in O)return W.value=X,W.done=!1,W}return W.done=!0,W}};function R(O){if(O){var B=O[s];if(B)return B.call(O);if(typeof O.next=="function")return O;if(!isNaN(O.length)){var U=-1,W=function X(){for(;++U<O.length;)if(i.call(O,U))return X.value=O[U],X.done=!1,X;return X.value=a,X.done=!0,X};return W.next=W}}return{next:L}}e.values=R;function L(){return{value:a,done:!0}}return $.prototype={constructor:$,reset:function(O){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(F),!O)for(var B in this)B.charAt(0)==="t"&&i.call(this,B)&&!isNaN(+B.slice(1))&&(this[B]=a)},stop:function(){this.done=!0;var O=this.tryEntries[0],B=O.completion;if(B.type==="throw")throw B.arg;return this.rval},dispatchException:function(O){if(this.done)throw O;var B=this;function U(fe,le){return ae.type="throw",ae.arg=O,B.next=fe,le&&(B.method="next",B.arg=a),!!le}for(var W=this.tryEntries.length-1;W>=0;--W){var X=this.tryEntries[W],ae=X.completion;if(X.tryLoc==="root")return U("end");if(X.tryLoc<=this.prev){var Z=i.call(X,"catchLoc"),Y=i.call(X,"finallyLoc");if(Z&&Y){if(this.prev<X.catchLoc)return U(X.catchLoc,!0);if(this.prev<X.finallyLoc)return U(X.finallyLoc)}else if(Z){if(this.prev<X.catchLoc)return U(X.catchLoc,!0)}else if(Y){if(this.prev<X.finallyLoc)return U(X.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(O,B){for(var U=this.tryEntries.length-1;U>=0;--U){var W=this.tryEntries[U];if(W.tryLoc<=this.prev&&i.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var X=W;break}}X&&(O==="break"||O==="continue")&&X.tryLoc<=B&&B<=X.finallyLoc&&(X=null);var ae=X?X.completion:{};return ae.type=O,ae.arg=B,X?(this.method="next",this.next=X.finallyLoc,m):this.complete(ae)},complete:function(O,B){if(O.type==="throw")throw O.arg;return O.type==="break"||O.type==="continue"?this.next=O.arg:O.type==="return"?(this.rval=this.arg=O.arg,this.method="return",this.next="end"):O.type==="normal"&&B&&(this.next=B),m},finish:function(O){for(var B=this.tryEntries.length-1;B>=0;--B){var U=this.tryEntries[B];if(U.finallyLoc===O)return this.complete(U.completion,U.afterLoc),F(U),m}},catch:function(O){for(var B=this.tryEntries.length-1;B>=0;--B){var U=this.tryEntries[B];if(U.tryLoc===O){var W=U.completion;if(W.type==="throw"){var X=W.arg;F(U)}return X}}throw new Error("illegal catch attempt")},delegateYield:function(O,B,U){return this.delegate={iterator:R(O),resultName:B,nextLoc:U},this.method==="next"&&(this.arg=a),m}},e}(r.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}),Qt=QMe;function i8(r,t,e,n,i,a,o){try{var s=r[a](o),l=s.value}catch(u){e(u);return}s.done?t(l):Promise.resolve(l).then(n,i)}function Sn(r){return function(){var t=this,e=arguments;return new Promise(function(n,i){var a=r.apply(t,e);function o(l){i8(a,n,i,o,s,"next",l)}function s(l){i8(a,n,i,o,s,"throw",l)}o(void 0)})}}var JMe=-1,eke=1;function Nl(){return eke++}var Md=function r(t){ar(this,r)},kd=function(){function r(t){ar(this,r),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=t}return br(r,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(e){return this.lookup[e]>-1}},{key:"create",value:function(e,n){this.lookup[e]=this.components.length;var i=new this.clazz(n||{});return this.components.push(i),this.entities.push(e),i}},{key:"remove",value:function(e){var n=this.lookup[e];n>-1&&n<this.components.length-1&&(this.components[n]=this.components[this.components.length-1],this.entities[n]=this.entities[this.entities.length-1],this.lookup[this.entities[n]]=n),this.components.pop(),this.entities.pop(),delete this.lookup[e]}},{key:"removeKeepSorted",value:function(e){var n=this.lookup[e];if(n>-1){var i=this.entities[n];if(n<this.components.length-1){for(var a=n+1;a<this.components.length;++a)this.components[a-1]=this.components[a];for(var o=n+1;o<this.entities.length;++o)this.entities[o-1]=this.entities[o],this.lookup[this.entities[o-1]]=o-1}this.components.pop(),this.entities.pop(),delete this.lookup[i]}}},{key:"moveItem",value:function(e,n){if(e!==n){for(var i=this.components[e],a=this.entities[e],o=e<n?1:-1,s=e;s!==n;s+=o){var l=s+o;this.components[s]=this.components[l],this.entities[s]=this.entities[l],this.lookup[this.entities[s]]=s}this.components[n]=i,this.entities[n]=a,this.lookup[a]=n}}},{key:"getEntity",value:function(e){return this.entities[e]}},{key:"getComponent",value:function(e){return this.components[e]}},{key:"getComponentByEntity",value:function(e){var n=this.lookup[e];return n>-1?this.components[n]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(e){for(var n=0,i=Object.keys(this.lookup);n<i.length;n++){var a=i[n],o=Number(a);if(this.lookup[o]===e)return o}return JMe}},{key:"find",value:function(e){for(var n=0;n<this.getCount();n++){var i=this.getComponent(n);if(e(i,n))return i}return null}},{key:"findIndex",value:function(e){for(var n=0;n<this.getCount();n++){var i=this.getComponent(n);if(e(i,n))return n}return-1}},{key:"forEach",value:function(e){for(var n=0,i=Object.keys(this.lookup);n<i.length;n++){var a=i[n],o=Number(a),s=this.lookup[o];e(o,this.getComponent(s))}}},{key:"forEachAsync",value:function(){var t=Sn(Qt.mark(function n(i){var a,o,s,l,u;return Qt.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:a=0,o=Object.keys(this.lookup);case 1:if(!(a<o.length)){f.next=10;break}return s=o[a],l=Number(s),u=this.lookup[l],f.next=7,i(l,this.getComponent(u));case 7:a++,f.next=1;break;case 10:case"end":return f.stop()}},n,this)}));function e(n){return t.apply(this,arguments)}return e}()},{key:"map",value:function(e){for(var n=[],i=0,a=Object.keys(this.lookup);i<a.length;i++){var o=a[i],s=Number(o),l=this.lookup[s];n.push(e(s,this.getComponent(l)))}return n}}]),r}();function tke(r){if(Array.isArray(r))return r}function rke(r,t){var e=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n=[],i=!0,a=!1,o,s;try{for(e=e.call(r);!(i=(o=e.next()).done)&&(n.push(o.value),!(t&&n.length===t));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&e.return!=null&&e.return()}finally{if(a)throw s}}return n}}function qM(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function a8(r,t){if(!!r){if(typeof r=="string")return qM(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return qM(r,t)}}function nke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nw(r,t){return tke(r)||rke(r,t)||a8(r,t)||nke()}var al="named",o8="name",KM="unmanaged",s8="optional",Bw="inject",by="multi_inject",l8="inversify:tagged",u8="inversify:tagged_props",ZM="inversify:paramtypes",ike="design:paramtypes",c8="post_construct";function ake(){return[Bw,by,o8,KM,al,s8]}var f8=ake(),qa={Request:"Request",Singleton:"Singleton",Transient:"Transient"},Ka={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},Au={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},oke=0;function xy(){return oke++}var ske=function(){function r(t,e){this.id=xy(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=Ka.Invalid,this.constraint=function(n){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return r.prototype.clone=function(){var t=new r(this.serviceIdentifier,this.scope);return t.activated=t.scope===qa.Singleton?this.activated:!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},r}(),lke="Cannot apply @injectable decorator multiple times.",uke="Metadata key was used more than once in a parameter:",wy="NULL argument",d8="Key Not Found",cke="Ambiguous match found for serviceIdentifier:",fke="Could not unbind serviceIdentifier:",dke="No matching bindings found for serviceIdentifier:",hke="Missing required @injectable annotation in:",vke="Missing required @inject or @multiInject annotation in:",pke=function(r){return"@inject called with undefined this could mean that the class "+r+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},gke="Circular dependency found:",mke="Invalid binding type:",yke="No snapshot available to restore.",bke="Invalid return type in middleware. Middleware must return!",xke="Value provided to function binding must be a function!",wke="The toSelf function can only be applied when a constructor is used as service identifier",Ske="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",Cke=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return"The number of constructor arguments in the derived class "+(r[0]+" must be >= than the number of constructor arguments of its base class.")},Eke="Invalid Container constructor argument. Container options must be an object.",_ke="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",Tke="Invalid Container option. Auto bind injectable must be a boolean",Ake="Invalid Container option. Skip base check must be a boolean",Mke=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return"@postConstruct error in class "+r[0]+": "+r[1]},kke=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return"It looks like there is a circular dependency "+("in one of the '"+r[0]+"' bindings. Please investigate bindings with")+("service identifier '"+r[1]+"'.")},Ike="Maximum call stack size exceeded",Pke=function(){function r(){}return r.prototype.getConstructorMetadata=function(t){var e=Reflect.getMetadata(ZM,t),n=Reflect.getMetadata(l8,t);return{compilerGeneratedMetadata:e,userGeneratedMetadata:n||{}}},r.prototype.getPropertiesMetadata=function(t){var e=Reflect.getMetadata(u8,t)||[];return e},r}(),$w={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};function h8(r){return r instanceof RangeError||r.message===Ike}function Sy(r){if(typeof r=="function"){var t=r;return t.name}else{if(typeof r=="symbol")return r.toString();var t=r;return t}}function v8(r,t,e){var n="",i=e(r,t);return i.length!==0&&(n=`
Registered bindings:`,i.forEach(function(a){var o="Object";a.implementationType!==null&&(o=zw(a.implementationType)),n=n+`
 `+o,a.constraint.metaData&&(n=n+" - "+a.constraint.metaData)})),n}function p8(r,t){return r.parentRequest===null?!1:r.parentRequest.serviceIdentifier===t?!0:p8(r.parentRequest,t)}function Dke(r){function t(n,i){i===void 0&&(i=[]);var a=Sy(n.serviceIdentifier);return i.push(a),n.parentRequest!==null?t(n.parentRequest,i):i}var e=t(r);return e.reverse().join(" --> ")}function g8(r){r.childRequests.forEach(function(t){if(p8(t,t.serviceIdentifier)){var e=Dke(t);throw new Error(gke+" "+e)}else g8(t)})}function Rke(r,t){if(t.isTagged()||t.isNamed()){var e="",n=t.getNamedTag(),i=t.getCustomTags();return n!==null&&(e+=n.toString()+`
`),i!==null&&i.forEach(function(a){e+=a.toString()+`
`})," "+r+`
 `+r+" - "+e}else return" "+r}function zw(r){if(r.name)return r.name;var t=r.toString(),e=t.match(/^function\s*([^\s(]+)/);return e?e[1]:"Anonymous function: "+t}var m8=function(){function r(t){this.id=xy(),this.container=t}return r.prototype.addPlan=function(t){this.plan=t},r.prototype.setCurrentRequest=function(t){this.currentRequest=t},r}(),Nc=function(){function r(t,e){this.key=t,this.value=e}return r.prototype.toString=function(){return this.key===al?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},r}(),Oke=function(){function r(t,e){this.parentContext=t,this.rootRequest=e}return r}();function y8(r,t,e,n){var i=l8;x8(i,r,t,n,e)}function b8(r,t,e){var n=u8;x8(n,r.constructor,t,e)}function x8(r,t,e,n,i){var a={},o=typeof i=="number",s=i!==void 0&&o?i.toString():e;if(o&&e!==void 0)throw new Error(Ske);Reflect.hasOwnMetadata(r,t)&&(a=Reflect.getMetadata(r,t));var l=a[s];if(!Array.isArray(l))l=[];else for(var u=0,c=l;u<c.length;u++){var f=c[u];if(f.key===n.key)throw new Error(uke+" "+f.key.toString())}l.push(n),a[s]=l,Reflect.defineMetadata(r,a,t)}var Lke=function(){function r(t){this._cb=t}return r.prototype.unwrap=function(){return this._cb()},r}();function hr(r){return function(t,e,n){if(r===void 0)throw new Error(pke(t.name));var i=new Nc(Bw,r);typeof n=="number"?y8(t,e,n,i):b8(t,e,i)}}var Fke=function(){function r(t){this.str=t}return r.prototype.startsWith=function(t){return this.str.indexOf(t)===0},r.prototype.endsWith=function(t){var e="",n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},r.prototype.contains=function(t){return this.str.indexOf(t)!==-1},r.prototype.equals=function(t){return this.str===t},r.prototype.value=function(){return this.str},r}(),Gw=function(){function r(t,e,n,i){this.id=xy(),this.type=t,this.serviceIdentifier=n,this.name=new Fke(e||""),this.metadata=new Array;var a=null;typeof i=="string"?a=new Nc(al,i):i instanceof Nc&&(a=i),a!==null&&this.metadata.push(a)}return r.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){var i=n[e];if(i.key===t)return!0}return!1},r.prototype.isArray=function(){return this.hasTag(by)},r.prototype.matchesArray=function(t){return this.matchesTag(by)(t)},r.prototype.isNamed=function(){return this.hasTag(al)},r.prototype.isTagged=function(){return this.metadata.some(function(t){return f8.every(function(e){return t.key!==e})})},r.prototype.isOptional=function(){return this.matchesTag(s8)(!0)},r.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(t){return t.key===al})[0]:null},r.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(t){return f8.every(function(e){return t.key!==e})}):null},r.prototype.matchesNamedTag=function(t){return this.matchesTag(al)(t)},r.prototype.matchesTag=function(t){var e=this;return function(n){for(var i=0,a=e.metadata;i<a.length;i++){var o=a[i];if(o.key===t&&o.value===n)return!0}return!1}},r}(),Uw=globalThis&&globalThis.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r};function Nke(r,t){var e=zw(t),n=w8(r,e,t,!1);return n}function w8(r,t,e,n){var i=r.getConstructorMetadata(e),a=i.compilerGeneratedMetadata;if(a===void 0){var o=hke+" "+t+".";throw new Error(o)}var s=i.userGeneratedMetadata,l=Object.keys(s),u=e.length===0&&l.length>0,c=l.length>e.length,f=u||c?l.length:e.length,d=$ke(n,t,a,s,f),h=S8(r,e),v=Uw(Uw([],d),h);return v}function Bke(r,t,e,n,i){var a=i[r.toString()]||[],o=E8(a),s=o.unmanaged!==!0,l=n[r],u=o.inject||o.multiInject;if(l=u||l,l instanceof Lke&&(l=l.unwrap()),s){var c=l===Object,f=l===Function,d=l===void 0,h=c||f||d;if(!t&&h){var v=vke+" argument "+r+" in class "+e+".";throw new Error(v)}var p=new Gw(Au.ConstructorArgument,o.targetName,l);return p.metadata=a,p}return null}function $ke(r,t,e,n,i){for(var a=[],o=0;o<i;o++){var s=o,l=Bke(s,r,t,e,n);l!==null&&a.push(l)}return a}function S8(r,t){for(var e=r.getPropertiesMetadata(t),n=[],i=Object.keys(e),a=0,o=i;a<o.length;a++){var s=o[a],l=e[s],u=E8(e[s]),c=u.targetName||s,f=u.inject||u.multiInject,d=new Gw(Au.ClassProperty,c,f);d.metadata=l,n.push(d)}var h=Object.getPrototypeOf(t.prototype).constructor;if(h!==Object){var v=S8(r,h);n=Uw(Uw([],n),v)}return n}function C8(r,t){var e=Object.getPrototypeOf(t.prototype).constructor;if(e!==Object){var n=zw(e),i=w8(r,n,e,!0),a=i.map(function(l){return l.metadata.filter(function(u){return u.key===KM})}),o=[].concat.apply([],a).length,s=i.length-o;return s>0?s:C8(r,e)}else return 0}function E8(r){var t={};return r.forEach(function(e){t[e.key.toString()]=e.value}),{inject:t[Bw],multiInject:t[by],targetName:t[o8],unmanaged:t[KM]}}var QM=function(){function r(t,e,n,i,a){this.id=xy(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=a,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=n===null?new Map:null}return r.prototype.addChildRequest=function(t,e,n){var i=new r(t,this.parentContext,this,e,n);return this.childRequests.push(i),i},r}();function JM(r){return r._bindingDictionary}function zke(r,t,e,n,i,a){var o=r?by:Bw,s=new Nc(o,e),l=new Gw(t,n,e,s);if(i!==void 0){var u=new Nc(i,a);l.metadata.push(u)}return l}function _8(r,t,e,n,i){var a=Cy(e.container,i.serviceIdentifier),o=[];return a.length===$w.NoBindingsAvailable&&e.container.options.autoBindInjectable&&typeof i.serviceIdentifier=="function"&&r.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(e.container.bind(i.serviceIdentifier).toSelf(),a=Cy(e.container,i.serviceIdentifier)),t?o=a:o=a.filter(function(s){var l=new QM(s.serviceIdentifier,e,n,s,i);return s.constraint(l)}),Gke(i.serviceIdentifier,o,i,e.container),o}function Gke(r,t,e,n){switch(t.length){case $w.NoBindingsAvailable:if(e.isOptional())return t;var i=Sy(r),a=dke;throw a+=Rke(i,e),a+=v8(n,i,Cy),new Error(a);case $w.OnlyOneBindingAvailable:if(!e.isArray())return t;case $w.MultipleBindingsAvailable:default:if(e.isArray())return t;var i=Sy(r),a=cke+" "+i;throw a+=v8(n,i,Cy),new Error(a)}}function T8(r,t,e,n,i,a){var o,s;if(i===null){o=_8(r,t,n,null,a),s=new QM(e,n,null,o,a);var l=new Oke(n,s);n.addPlan(l)}else o=_8(r,t,n,i,a),s=i.addChildRequest(a.serviceIdentifier,o,a);o.forEach(function(u){var c=null;if(a.isArray())c=s.addChildRequest(u.serviceIdentifier,u,a);else{if(u.cache)return;c=s}if(u.type===Ka.Instance&&u.implementationType!==null){var f=Nke(r,u.implementationType);if(!n.container.options.skipBaseClassChecks){var d=C8(r,u.implementationType);if(f.length<d){var h=Cke(zw(u.implementationType));throw new Error(h)}}f.forEach(function(v){T8(r,!1,v.serviceIdentifier,n,c,v)})}})}function Cy(r,t){var e=[],n=JM(r);return n.hasKey(t)?e=n.get(t):r.parent!==null&&(e=Cy(r.parent,t)),e}function Uke(r,t,e,n,i,a,o,s){s===void 0&&(s=!1);var l=new m8(t),u=zke(e,n,i,"",a,o);try{return T8(r,s,i,l,null,u),l}catch(c){throw h8(c)&&l.plan&&g8(l.plan.rootRequest),c}}function Vke(r,t,e,n){var i=new Gw(Au.Variable,"",t,new Nc(e,n)),a=new m8(r),o=new QM(t,a,null,[],i);return o}var Hke=globalThis&&globalThis.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r};function Wke(r,t,e){var n=t.filter(function(a){return a.target!==null&&a.target.type===Au.ClassProperty}),i=n.map(e);return n.forEach(function(a,o){var s="";s=a.target.name.value();var l=i[o];r[s]=l}),r}function jke(r,t){return new(r.bind.apply(r,Hke([void 0],t)))}function Yke(r,t){if(Reflect.hasMetadata(c8,r)){var e=Reflect.getMetadata(c8,r);try{t[e.value]()}catch(n){throw new Error(Mke(r.name,n.message))}}}function Xke(r,t,e){var n=null;if(t.length>0){var i=t.filter(function(o){return o.target!==null&&o.target.type===Au.ConstructorArgument}),a=i.map(e);n=jke(r,a),n=Wke(n,t,e)}else n=new r;return Yke(r,n),n}var ek=function(r,t,e){try{return e()}catch(n){throw h8(n)?new Error(kke(r,t.toString())):n}},tk=function(r){return function(t){t.parentContext.setCurrentRequest(t);var e=t.bindings,n=t.childRequests,i=t.target&&t.target.isArray(),a=!t.parentRequest||!t.parentRequest.target||!t.target||!t.parentRequest.target.matchesArray(t.target.serviceIdentifier);if(i&&a)return n.map(function(f){var d=tk(r);return d(f)});var o=null;if(t.target.isOptional()&&e.length===0)return;var s=e[0],l=s.scope===qa.Singleton,u=s.scope===qa.Request;if(l&&s.activated)return s.cache;if(u&&r!==null&&r.has(s.id))return r.get(s.id);if(s.type===Ka.ConstantValue)o=s.cache,s.activated=!0;else if(s.type===Ka.Function)o=s.cache,s.activated=!0;else if(s.type===Ka.Constructor)o=s.implementationType;else if(s.type===Ka.DynamicValue&&s.dynamicValue!==null)o=ek("toDynamicValue",s.serviceIdentifier,function(){return s.dynamicValue(t.parentContext)});else if(s.type===Ka.Factory&&s.factory!==null)o=ek("toFactory",s.serviceIdentifier,function(){return s.factory(t.parentContext)});else if(s.type===Ka.Provider&&s.provider!==null)o=ek("toProvider",s.serviceIdentifier,function(){return s.provider(t.parentContext)});else if(s.type===Ka.Instance&&s.implementationType!==null)o=Xke(s.implementationType,n,tk(r));else{var c=Sy(t.serviceIdentifier);throw new Error(mke+" "+c)}return typeof s.onActivation=="function"&&(o=s.onActivation(t.parentContext,o)),l&&(s.cache=o,s.activated=!0),u&&r!==null&&!r.has(s.id)&&r.set(s.id,o),o}};function qke(r){var t=tk(r.plan.rootRequest.requestScope);return t(r.plan.rootRequest)}var Mu=function(r,t){var e=r.parentRequest;return e!==null?t(e)?!0:Mu(e,t):!1},Ey=function(r){return function(t){var e=function(n){return n!==null&&n.target!==null&&n.target.matchesTag(r)(t)};return e.metaData=new Nc(r,t),e}},Vw=Ey(al),rk=function(r){return function(t){var e=null;if(t!==null)if(e=t.bindings[0],typeof r=="string"){var n=e.serviceIdentifier;return n===r}else{var i=t.bindings[0].implementationType;return r===i}return!1}},nk=function(){function r(t){this._binding=t}return r.prototype.when=function(t){return this._binding.constraint=t,new Za(this._binding)},r.prototype.whenTargetNamed=function(t){return this._binding.constraint=Vw(t),new Za(this._binding)},r.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){var e=t.target!==null&&!t.target.isNamed()&&!t.target.isTagged();return e},new Za(this._binding)},r.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=Ey(t)(e),new Za(this._binding)},r.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return rk(t)(e.parentRequest)},new Za(this._binding)},r.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return Vw(t)(e.parentRequest)},new Za(this._binding)},r.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return Ey(t)(e)(n.parentRequest)},new Za(this._binding)},r.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return Mu(e,rk(t))},new Za(this._binding)},r.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!Mu(e,rk(t))},new Za(this._binding)},r.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return Mu(e,Vw(t))},new Za(this._binding)},r.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!Mu(e,Vw(t))},new Za(this._binding)},r.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return Mu(n,Ey(t)(e))},new Za(this._binding)},r.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!Mu(n,Ey(t)(e))},new Za(this._binding)},r.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return Mu(e,t)},new Za(this._binding)},r.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!Mu(e,t)},new Za(this._binding)},r}(),Za=function(){function r(t){this._binding=t}return r.prototype.onActivation=function(t){return this._binding.onActivation=t,new nk(this._binding)},r}(),Bc=function(){function r(t){this._binding=t,this._bindingWhenSyntax=new nk(this._binding),this._bindingOnSyntax=new Za(this._binding)}return r.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},r.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},r.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},r.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},r.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},r.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},r.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},r.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},r.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},r.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},r.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},r.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},r.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},r.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},r.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},r.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},r}(),Kke=function(){function r(t){this._binding=t}return r.prototype.inRequestScope=function(){return this._binding.scope=qa.Request,new Bc(this._binding)},r.prototype.inSingletonScope=function(){return this._binding.scope=qa.Singleton,new Bc(this._binding)},r.prototype.inTransientScope=function(){return this._binding.scope=qa.Transient,new Bc(this._binding)},r}(),A8=function(){function r(t){this._binding=t,this._bindingWhenSyntax=new nk(this._binding),this._bindingOnSyntax=new Za(this._binding),this._bindingInSyntax=new Kke(t)}return r.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},r.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},r.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},r.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},r.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},r.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},r.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},r.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},r.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},r.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},r.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},r.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},r.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},r.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},r.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},r.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},r.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},r.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},r.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},r}(),Zke=function(){function r(t){this._binding=t}return r.prototype.to=function(t){return this._binding.type=Ka.Instance,this._binding.implementationType=t,new A8(this._binding)},r.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+wke);var t=this._binding.serviceIdentifier;return this.to(t)},r.prototype.toConstantValue=function(t){return this._binding.type=Ka.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=qa.Singleton,new Bc(this._binding)},r.prototype.toDynamicValue=function(t){return this._binding.type=Ka.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new A8(this._binding)},r.prototype.toConstructor=function(t){return this._binding.type=Ka.Constructor,this._binding.implementationType=t,this._binding.scope=qa.Singleton,new Bc(this._binding)},r.prototype.toFactory=function(t){return this._binding.type=Ka.Factory,this._binding.factory=t,this._binding.scope=qa.Singleton,new Bc(this._binding)},r.prototype.toFunction=function(t){if(typeof t!="function")throw new Error(xke);var e=this.toConstantValue(t);return this._binding.type=Ka.Function,this._binding.scope=qa.Singleton,e},r.prototype.toAutoFactory=function(t){return this._binding.type=Ka.Factory,this._binding.factory=function(e){var n=function(){return e.container.get(t)};return n},this._binding.scope=qa.Singleton,new Bc(this._binding)},r.prototype.toProvider=function(t){return this._binding.type=Ka.Provider,this._binding.provider=t,this._binding.scope=qa.Singleton,new Bc(this._binding)},r.prototype.toService=function(t){this.toDynamicValue(function(e){return e.container.get(t)})},r}(),Qke=function(){function r(){}return r.of=function(t,e){var n=new r;return n.bindings=t,n.middleware=e,n},r}(),M8=function(){function r(){this._map=new Map}return r.prototype.getMap=function(){return this._map},r.prototype.add=function(t,e){if(t==null)throw new Error(wy);if(e==null)throw new Error(wy);var n=this._map.get(t);n!==void 0?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},r.prototype.get=function(t){if(t==null)throw new Error(wy);var e=this._map.get(t);if(e!==void 0)return e;throw new Error(d8)},r.prototype.remove=function(t){if(t==null)throw new Error(wy);if(!this._map.delete(t))throw new Error(d8)},r.prototype.removeByCondition=function(t){var e=this;this._map.forEach(function(n,i){var a=n.filter(function(o){return!t(o)});a.length>0?e._map.set(i,a):e._map.delete(i)})},r.prototype.hasKey=function(t){if(t==null)throw new Error(wy);return this._map.has(t)},r.prototype.clone=function(){var t=new r;return this._map.forEach(function(e,n){e.forEach(function(i){return t.add(n,i.clone())})}),t},r.prototype.traverse=function(t){this._map.forEach(function(e,n){t(n,e)})},r}(),Jke=globalThis&&globalThis.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(r,t||[])).next())})},eIe=globalThis&&globalThis.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){e.label=u[1];break}if(u[0]===6&&e.label<a[1]){e.label=a[1],a=u;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(u);break}a[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(r,e)}catch(c){u=[6,c],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},tIe=globalThis&&globalThis.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},k8=function(){function r(t){this._appliedMiddleware=[];var e=t||{};if(typeof e!="object")throw new Error(""+Eke);if(e.defaultScope===void 0)e.defaultScope=qa.Transient;else if(e.defaultScope!==qa.Singleton&&e.defaultScope!==qa.Transient&&e.defaultScope!==qa.Request)throw new Error(""+_ke);if(e.autoBindInjectable===void 0)e.autoBindInjectable=!1;else if(typeof e.autoBindInjectable!="boolean")throw new Error(""+Tke);if(e.skipBaseClassChecks===void 0)e.skipBaseClassChecks=!1;else if(typeof e.skipBaseClassChecks!="boolean")throw new Error(""+Ake);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=xy(),this._bindingDictionary=new M8,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new Pke}return r.merge=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var a=new r,o=tIe([t,e],n).map(function(u){return JM(u)}),s=JM(a);function l(u,c){u.traverse(function(f,d){d.forEach(function(h){c.add(h.serviceIdentifier,h.clone())})})}return o.forEach(function(u){l(u,s)}),a},r.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),i=0,a=t;i<a.length;i++){var o=a[i],s=n(o.id);o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)}},r.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Jke(this,void 0,void 0,function(){var n,i,a,o,s;return eIe(this,function(l){switch(l.label){case 0:n=this._getContainerModuleHelpersFactory(),i=0,a=t,l.label=1;case 1:return i<a.length?(o=a[i],s=n(o.id),[4,o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)]):[3,4];case 2:l.sent(),l.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},r.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=function(a){return function(o){return o.moduleId===a}};e.forEach(function(a){var o=i(a.id);t._bindingDictionary.removeByCondition(o)})},r.prototype.bind=function(t){var e=this.options.defaultScope||qa.Transient,n=new ske(t,e);return this._bindingDictionary.add(t,n),new Zke(n)},r.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},r.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch{throw new Error(fke+" "+Sy(t))}},r.prototype.unbindAll=function(){this._bindingDictionary=new M8},r.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},r.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,al,e)},r.prototype.isBoundTagged=function(t,e,n){var i=!1;if(this._bindingDictionary.hasKey(t)){var a=this._bindingDictionary.get(t),o=Vke(this,t,e,n);i=a.some(function(s){return s.constraint(o)})}return!i&&this.parent&&(i=this.parent.isBoundTagged(t,e,n)),i},r.prototype.snapshot=function(){this._snapshots.push(Qke.of(this._bindingDictionary.clone(),this._middleware))},r.prototype.restore=function(){var t=this._snapshots.pop();if(t===void 0)throw new Error(yke);this._bindingDictionary=t.bindings,this._middleware=t.middleware},r.prototype.createChild=function(t){var e=new r(t||this.options);return e.parent=this,e},r.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._appliedMiddleware=this._appliedMiddleware.concat(t);var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce(function(i,a){return a(i)},n)},r.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},r.prototype.get=function(t){return this._get(!1,!1,Au.Variable,t)},r.prototype.getTagged=function(t,e,n){return this._get(!1,!1,Au.Variable,t,e,n)},r.prototype.getNamed=function(t,e){return this.getTagged(t,al,e)},r.prototype.getAll=function(t){return this._get(!0,!0,Au.Variable,t)},r.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,Au.Variable,t,e,n)},r.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,al,e)},r.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),this._appliedMiddleware.forEach(function(n){e.applyMiddleware(n)}),e.get(t)},r.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(s,l){s._binding.moduleId=l},n=function(s){return function(l){var u=t.bind.bind(t),c=u(l);return e(c,s),c}},i=function(s){return function(l){var u=t.unbind.bind(t);u(l)}},a=function(s){return function(l){var u=t.isBound.bind(t);return u(l)}},o=function(s){return function(l){var u=t.rebind.bind(t),c=u(l);return e(c,s),c}};return function(s){return{bindFunction:n(s),isboundFunction:a(s),rebindFunction:o(s),unbindFunction:i(s)}}},r.prototype._get=function(t,e,n,i,a,o){var s=null,l={avoidConstraints:t,contextInterceptor:function(u){return u},isMultiInject:e,key:a,serviceIdentifier:i,targetType:n,value:o};if(this._middleware){if(s=this._middleware(l),s==null)throw new Error(bke)}else s=this._planAndResolve()(l);return s},r.prototype._planAndResolve=function(){var t=this;return function(e){var n=Uke(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);n=e.contextInterceptor(n);var i=qke(n);return i}},r}();function Tn(){return function(r){if(Reflect.hasOwnMetadata(ZM,r))throw new Error(lke);var t=Reflect.getMetadata(ike,r)||[];return Reflect.defineMetadata(ZM,t,r),r}}function Bl(r){return function(t,e,n){var i=new Nc(al,r);typeof n=="number"?y8(t,e,n,i):b8(t,e,i)}}var mt={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},rIe=function r(){ar(this,r),this.index=void 0},nIe=function r(){ar(this,r),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},iIe=function(){function r(){ar(this,r),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return br(r,[{key:"read",value:function(e){return this.reads.find(function(n){return n.index===e.index})||this.reads.push(e),e}},{key:"sample",value:function(e){return this.read(e),e}},{key:"write",value:function(e,n){var i=this.writes.find(function(l){return l.index===n.index});if(i)return n;var a=e.getResourceNode(n);a.resource.version++,a.resource.imported&&(this.hasSideEffect=!0);var o=e.createResourceNode(a.resource),s=e.getResourceNode(o);return s.writer=this,this.writes.push(o),o}}]),r}();function ik(r,t){return ik=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},ik(r,t)}function uo(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&ik(r,t)}function $l(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$l=function(e){return typeof e}:$l=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$l(r)}function Li(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function co(r,t){if(t&&($l(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Li(r)}function An(r){return An=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},An(r)}var aIe=function r(){ar(this,r),this.first=void 0,this.last=void 0};function oIe(r){var t=sIe();return function(){var n=An(r),i;if(t){var a=An(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return co(this,i)}}function sIe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var I8=function(r){uo(e,r);var t=oIe(e);function e(){var n;ar(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=t.call.apply(t,[this].concat(a)),n.version=0,n.refs=0,n.name=void 0,n.imported=void 0,n.priority=void 0,n.discardStart=!0,n.discardEnd=!1,n.descriptor=void 0,n.resource=void 0,n}return br(e,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){!this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){!this.imported}}]),e}(aIe),lIe=function r(){ar(this,r),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0},P8,D8,R8,ak,O8,L8;function Ls(r,t){var e;if(typeof Symbol=="undefined"||r[Symbol.iterator]==null){if(Array.isArray(r)||(e=uIe(r))||t&&r&&typeof r.length=="number"){e&&(r=e);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=r[Symbol.iterator]()},n:function(){var u=e.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function uIe(r,t){if(!!r){if(typeof r=="string")return F8(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return F8(r,t)}}function F8(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var cIe=(P8=Tn(),D8=hr(mt.RenderEngine),P8(R8=(ak=(L8=function(){function r(){ar(this,r),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],fr(this,"engine",O8,this)}return br(r,[{key:"execute",value:function(){var t=Sn(Qt.mark(function n(i){return Qt.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this.compile(),o.next=3,this.executePassNodes(i);case 3:case"end":return o.stop()}},n,this)}));function e(n){return t.apply(this,arguments)}return e}()},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(e){e.tearDown&&e.tearDown()}),this.reset()}},{key:"addPass",value:function(e,n,i,a){var o=new nIe;o.execute=i,a&&(o.tearDown=a),o.name=e;var s=new iIe;return s.name=e,this.passNodes.push(s),this.frameGraphPasses.push(o),n(this,s,o),o}},{key:"getPass",value:function(e){return this.frameGraphPasses.find(function(n){return n.name===e})}},{key:"compile",value:function(){var e=this,n=Ls(this.passNodes),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;a.refCount=a.writes.length+(a.hasSideEffect?1:0),a.reads.forEach(function(O){e.resourceNodes[O.index].readerCount++})}}catch(O){n.e(O)}finally{n.f()}var o=[],s=Ls(this.resourceNodes),l;try{for(s.s();!(l=s.n()).done;){var u=l.value;u.readerCount===0&&o.push(u)}}catch(O){s.e(O)}finally{s.f()}for(;o.length;){var c=o.pop(),f=c&&c.writer;if(f&&--f.refCount==0){var d=Ls(f.reads),h;try{for(d.s();!(h=d.n()).done;){var v=h.value,p=this.resourceNodes[v.index];--p.readerCount==0&&o.push(p)}}catch(O){d.e(O)}finally{d.f()}}}this.resourceNodes.forEach(function(O){O.resource.refs+=O.readerCount});var g=Ls(this.passNodes),m;try{for(g.s();!(m=g.n()).done;){var y=m.value;if(!!y.refCount){var b=Ls(y.reads),x;try{for(b.s();!(x=b.n()).done;){var w=x.value,S=this.resourceNodes[w.index].resource;S.first=S.first?S.first:y,S.last=y}}catch(O){b.e(O)}finally{b.f()}var C=Ls(y.writes),_;try{for(C.s();!(_=C.n()).done;){var T=_.value,E=this.resourceNodes[T.index].resource;E.first=E.first?E.first:y,E.last=y}}catch(O){C.e(O)}finally{C.f()}}}}catch(O){g.e(O)}finally{g.f()}for(var M=0;M<2;M++){var k=Ls(this.resourceNodes),P;try{for(k.s();!(P=k.n()).done;){var F=P.value,$=F.resource;if($.priority===M&&$.refs){var R=$.first,L=$.last;R&&L&&(R.devirtualize.push($),L.destroy.push($))}}}catch(O){k.e(O)}finally{k.f()}}}},{key:"executePassNodes",value:function(){var t=Sn(Qt.mark(function n(i){var a,o,s,l,u,c,f,d,h,v,p,g,m,y,b,x,w;return Qt.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:a=Ls(this.passNodes.entries()),C.prev=1,a.s();case 3:if((o=a.n()).done){C.next=18;break}if(s=Nw(o.value,2),l=s[0],u=s[1],!u.refCount){C.next=16;break}c=Ls(u.devirtualize);try{for(c.s();!(f=c.n()).done;)d=f.value,d.preExecuteDevirtualize(this.engine)}catch(_){c.e(_)}finally{c.f()}h=Ls(u.destroy);try{for(h.s();!(v=h.n()).done;)p=v.value,p.preExecuteDestroy(this.engine)}catch(_){h.e(_)}finally{h.f()}return C.next=12,this.frameGraphPasses[l].execute(this,this.frameGraphPasses[l],i);case 12:g=Ls(u.devirtualize);try{for(g.s();!(m=g.n()).done;)y=m.value,y.postExecuteDevirtualize(this.engine)}catch(_){g.e(_)}finally{g.f()}b=Ls(u.destroy);try{for(b.s();!(x=b.n()).done;)w=x.value,w.postExecuteDestroy(this.engine)}catch(_){b.e(_)}finally{b.f()}case 16:C.next=3;break;case 18:C.next=23;break;case 20:C.prev=20,C.t0=C.catch(1),a.e(C.t0);case 23:return C.prev=23,a.f(),C.finish(23);case 26:this.reset();case 27:case"end":return C.stop()}},n,this,[[1,20,23,26]])}));function e(n){return t.apply(this,arguments)}return e}()},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(e){return this.resourceNodes[e.index]}},{key:"createResourceNode",value:function(e){var n=new lIe;n.resource=e,n.version=e.version,this.resourceNodes.push(n);var i=new rIe;return i.index=this.resourceNodes.length-1,i}},{key:"createTexture",value:function(e,n,i){var a=new I8;return a.name=n,a.descriptor=i,this.createResourceNode(a)}},{key:"createRenderTarget",value:function(e,n,i){var a=new I8;return a.name=n,a.descriptor=i,this.createResourceNode(a)}},{key:"present",value:function(e){this.addPass("Present",function(n,i){i.read(e),i.hasSideEffect=!0},Sn(Qt.mark(function n(){return Qt.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:case"end":return a.stop()}},n)})))}}]),r}(),L8),O8=dr(ak.prototype,"engine",[D8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ak))||R8);function lt(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var fIe=9007199254740991,dIe="[object Arguments]",hIe="[object Array]",vIe="[object Boolean]",pIe="[object Date]",gIe="[object Error]",mIe="[object Function]",yIe="[object Map]",bIe="[object Number]",xIe="[object Object]",wIe="[object RegExp]",SIe="[object Set]",CIe="[object String]",EIe="[object WeakMap]",_Ie="[object ArrayBuffer]",TIe="[object DataView]",AIe="[object Float32Array]",MIe="[object Float64Array]",kIe="[object Int8Array]",IIe="[object Int16Array]",PIe="[object Int32Array]",DIe="[object Uint8Array]",RIe="[object Uint8ClampedArray]",OIe="[object Uint16Array]",LIe="[object Uint32Array]",pi={};pi[AIe]=pi[MIe]=pi[kIe]=pi[IIe]=pi[PIe]=pi[DIe]=pi[RIe]=pi[OIe]=pi[LIe]=!0;pi[dIe]=pi[hIe]=pi[_Ie]=pi[vIe]=pi[TIe]=pi[pIe]=pi[gIe]=pi[mIe]=pi[yIe]=pi[bIe]=pi[xIe]=pi[wIe]=pi[SIe]=pi[CIe]=pi[EIe]=!1;var FIe=Object.prototype,NIe=FIe.toString;function BIe(r){return zIe(r)&&$Ie(r.length)&&!!pi[NIe.call(r)]}function $Ie(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=fIe}function zIe(r){return!!r&&$l(r)==="object"}var N8=BIe;function B8(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function $8(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?B8(Object(e),!0).forEach(function(n){lt(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):B8(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function GIe(r){var t=UIe();return function(){var n=An(r),i;if(t){var a=An(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return co(this,i)}}function UIe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var VIe=function(r){uo(e,r);var t=GIe(e);function e(n){var i;return ar(this,e),i=t.call(this,n),i.dirty=!0,i.attributes=[],i.indices=void 0,i.indicesBuffer=void 0,i.vertexCount=0,i.maxInstancedCount=void 0,i.aabb=void 0,i.entity=void 0,Object.assign(Li(i),n),i}return br(e,[{key:"setAttribute",value:function(i,a,o,s){var l=this.attributes.find(function(u){return u.name===i});return l?(l.data=a,l.dirty=!0):this.attributes.push($8($8({dirty:!0,name:i,data:a},o),{},{bufferGetter:s})),this.dirty=!0,this}},{key:"setIndex",value:function(i){return this.indices=new Uint32Array(i.buffer?i.buffer:i),this.dirty=!0,this}},{key:"applyMatrix",value:function(i){var a=this.attributes.find(function(d){var h=d.name;return h==="position"}),o=this.attributes.find(function(d){var h=d.name;return h==="normal"});if(a&&(a.dirty=!0,a.data&&a.data.length))for(var s=0;s<a.data.length;s+=3){var l=V3(a.data[s],a.data[s+1],a.data[s+2],1);ym(l,l,i),N8(a.data)?a.data.set([l[0],l[1],l[2]],s):(a.data[s]=l[0],a.data[s+1]=l[1],a.data[s+2]=l[2])}if(o){var u=N3(wv(),i);if(o.data&&o.data.length)for(var c=0;c<o.data.length;c+=3){var f=Wr(o.data[c],o.data[c+1],o.data[c+2]);kl(f,f,u),gm(f,f),N8(o.data)?o.data.set([f[0],f[1],f[2]],c):(o.data[c]=f[0],o.data[c+1]=f[1],o.data[c+2]=f[2])}}}}]),e}(Md),Ne;(function(r){r[r.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",r[r.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",r[r.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r[r.ZERO=0]="ZERO",r[r.ONE=1]="ONE",r[r.SRC_COLOR=768]="SRC_COLOR",r[r.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",r[r.SRC_ALPHA=770]="SRC_ALPHA",r[r.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",r[r.DST_ALPHA=772]="DST_ALPHA",r[r.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",r[r.DST_COLOR=774]="DST_COLOR",r[r.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",r[r.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",r[r.FUNC_ADD=32774]="FUNC_ADD",r[r.BLEND_EQUATION=32777]="BLEND_EQUATION",r[r.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",r[r.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",r[r.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",r[r.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",r[r.MAX_EXT=32776]="MAX_EXT",r[r.MIN_EXT=32775]="MIN_EXT",r[r.BLEND_DST_RGB=32968]="BLEND_DST_RGB",r[r.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",r[r.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",r[r.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",r[r.CONSTANT_COLOR=32769]="CONSTANT_COLOR",r[r.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",r[r.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",r[r.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",r[r.BLEND_COLOR=32773]="BLEND_COLOR",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",r[r.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",r[r.STREAM_DRAW=35040]="STREAM_DRAW",r[r.STATIC_DRAW=35044]="STATIC_DRAW",r[r.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",r[r.BUFFER_SIZE=34660]="BUFFER_SIZE",r[r.BUFFER_USAGE=34661]="BUFFER_USAGE",r[r.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",r[r.FRONT=1028]="FRONT",r[r.BACK=1029]="BACK",r[r.FRONT_AND_BACK=1032]="FRONT_AND_BACK",r[r.CULL_FACE=2884]="CULL_FACE",r[r.BLEND=3042]="BLEND",r[r.DITHER=3024]="DITHER",r[r.STENCIL_TEST=2960]="STENCIL_TEST",r[r.DEPTH_TEST=2929]="DEPTH_TEST",r[r.SCISSOR_TEST=3089]="SCISSOR_TEST",r[r.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",r[r.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",r[r.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",r[r.NO_ERROR=0]="NO_ERROR",r[r.INVALID_ENUM=1280]="INVALID_ENUM",r[r.INVALID_VALUE=1281]="INVALID_VALUE",r[r.INVALID_OPERATION=1282]="INVALID_OPERATION",r[r.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",r[r.CW=2304]="CW",r[r.CCW=2305]="CCW",r[r.LINE_WIDTH=2849]="LINE_WIDTH",r[r.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",r[r.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",r[r.CULL_FACE_MODE=2885]="CULL_FACE_MODE",r[r.FRONT_FACE=2886]="FRONT_FACE",r[r.DEPTH_RANGE=2928]="DEPTH_RANGE",r[r.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",r[r.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",r[r.DEPTH_FUNC=2932]="DEPTH_FUNC",r[r.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",r[r.STENCIL_FUNC=2962]="STENCIL_FUNC",r[r.STENCIL_FAIL=2964]="STENCIL_FAIL",r[r.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",r[r.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",r[r.STENCIL_REF=2967]="STENCIL_REF",r[r.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",r[r.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",r[r.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",r[r.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",r[r.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",r[r.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",r[r.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",r[r.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",r[r.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",r[r.VIEWPORT=2978]="VIEWPORT",r[r.SCISSOR_BOX=3088]="SCISSOR_BOX",r[r.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",r[r.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",r[r.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",r[r.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",r[r.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",r[r.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",r[r.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",r[r.RED_BITS=3410]="RED_BITS",r[r.GREEN_BITS=3411]="GREEN_BITS",r[r.BLUE_BITS=3412]="BLUE_BITS",r[r.ALPHA_BITS=3413]="ALPHA_BITS",r[r.DEPTH_BITS=3414]="DEPTH_BITS",r[r.STENCIL_BITS=3415]="STENCIL_BITS",r[r.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",r[r.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",r[r.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",r[r.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",r[r.SAMPLES=32937]="SAMPLES",r[r.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",r[r.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",r[r.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",r[r.DONT_CARE=4352]="DONT_CARE",r[r.FASTEST=4353]="FASTEST",r[r.NICEST=4354]="NICEST",r[r.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",r[r.BYTE=5120]="BYTE",r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.SHORT=5122]="SHORT",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.INT=5124]="INT",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.FLOAT=5126]="FLOAT",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.ALPHA=6406]="ALPHA",r[r.RGB=6407]="RGB",r[r.RGBA=6408]="RGBA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",r[r.VERTEX_SHADER=35633]="VERTEX_SHADER",r[r.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",r[r.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",r[r.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",r[r.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",r[r.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",r[r.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",r[r.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",r[r.SHADER_TYPE=35663]="SHADER_TYPE",r[r.DELETE_STATUS=35712]="DELETE_STATUS",r[r.LINK_STATUS=35714]="LINK_STATUS",r[r.VALIDATE_STATUS=35715]="VALIDATE_STATUS",r[r.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",r[r.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",r[r.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",r[r.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",r[r.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",r[r.NEVER=512]="NEVER",r[r.LESS=513]="LESS",r[r.EQUAL=514]="EQUAL",r[r.LEQUAL=515]="LEQUAL",r[r.GREATER=516]="GREATER",r[r.NOTEQUAL=517]="NOTEQUAL",r[r.GEQUAL=518]="GEQUAL",r[r.ALWAYS=519]="ALWAYS",r[r.KEEP=7680]="KEEP",r[r.REPLACE=7681]="REPLACE",r[r.INCR=7682]="INCR",r[r.DECR=7683]="DECR",r[r.INVERT=5386]="INVERT",r[r.INCR_WRAP=34055]="INCR_WRAP",r[r.DECR_WRAP=34056]="DECR_WRAP",r[r.VENDOR=7936]="VENDOR",r[r.RENDERER=7937]="RENDERER",r[r.VERSION=7938]="VERSION",r[r.NEAREST=9728]="NEAREST",r[r.LINEAR=9729]="LINEAR",r[r.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",r[r.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",r[r.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",r[r.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",r[r.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",r[r.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",r[r.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",r[r.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE=5890]="TEXTURE",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r[r.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",r[r.TEXTURE0=33984]="TEXTURE0",r[r.TEXTURE1=33985]="TEXTURE1",r[r.TEXTURE2=33986]="TEXTURE2",r[r.TEXTURE3=33987]="TEXTURE3",r[r.TEXTURE4=33988]="TEXTURE4",r[r.TEXTURE5=33989]="TEXTURE5",r[r.TEXTURE6=33990]="TEXTURE6",r[r.TEXTURE7=33991]="TEXTURE7",r[r.TEXTURE8=33992]="TEXTURE8",r[r.TEXTURE9=33993]="TEXTURE9",r[r.TEXTURE10=33994]="TEXTURE10",r[r.TEXTURE11=33995]="TEXTURE11",r[r.TEXTURE12=33996]="TEXTURE12",r[r.TEXTURE13=33997]="TEXTURE13",r[r.TEXTURE14=33998]="TEXTURE14",r[r.TEXTURE15=33999]="TEXTURE15",r[r.TEXTURE16=34e3]="TEXTURE16",r[r.TEXTURE17=34001]="TEXTURE17",r[r.TEXTURE18=34002]="TEXTURE18",r[r.TEXTURE19=34003]="TEXTURE19",r[r.TEXTURE20=34004]="TEXTURE20",r[r.TEXTURE21=34005]="TEXTURE21",r[r.TEXTURE22=34006]="TEXTURE22",r[r.TEXTURE23=34007]="TEXTURE23",r[r.TEXTURE24=34008]="TEXTURE24",r[r.TEXTURE25=34009]="TEXTURE25",r[r.TEXTURE26=34010]="TEXTURE26",r[r.TEXTURE27=34011]="TEXTURE27",r[r.TEXTURE28=34012]="TEXTURE28",r[r.TEXTURE29=34013]="TEXTURE29",r[r.TEXTURE30=34014]="TEXTURE30",r[r.TEXTURE31=34015]="TEXTURE31",r[r.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",r[r.REPEAT=10497]="REPEAT",r[r.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r[r.FLOAT_VEC2=35664]="FLOAT_VEC2",r[r.FLOAT_VEC3=35665]="FLOAT_VEC3",r[r.FLOAT_VEC4=35666]="FLOAT_VEC4",r[r.INT_VEC2=35667]="INT_VEC2",r[r.INT_VEC3=35668]="INT_VEC3",r[r.INT_VEC4=35669]="INT_VEC4",r[r.BOOL=35670]="BOOL",r[r.BOOL_VEC2=35671]="BOOL_VEC2",r[r.BOOL_VEC3=35672]="BOOL_VEC3",r[r.BOOL_VEC4=35673]="BOOL_VEC4",r[r.FLOAT_MAT2=35674]="FLOAT_MAT2",r[r.FLOAT_MAT3=35675]="FLOAT_MAT3",r[r.FLOAT_MAT4=35676]="FLOAT_MAT4",r[r.SAMPLER_2D=35678]="SAMPLER_2D",r[r.SAMPLER_CUBE=35680]="SAMPLER_CUBE",r[r.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",r[r.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",r[r.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",r[r.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",r[r.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",r[r.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",r[r.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",r[r.COMPILE_STATUS=35713]="COMPILE_STATUS",r[r.LOW_FLOAT=36336]="LOW_FLOAT",r[r.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",r[r.HIGH_FLOAT=36338]="HIGH_FLOAT",r[r.LOW_INT=36339]="LOW_INT",r[r.MEDIUM_INT=36340]="MEDIUM_INT",r[r.HIGH_INT=36341]="HIGH_INT",r[r.FRAMEBUFFER=36160]="FRAMEBUFFER",r[r.RENDERBUFFER=36161]="RENDERBUFFER",r[r.RGBA4=32854]="RGBA4",r[r.RGB5_A1=32855]="RGB5_A1",r[r.RGB565=36194]="RGB565",r[r.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",r[r.STENCIL_INDEX=6401]="STENCIL_INDEX",r[r.STENCIL_INDEX8=36168]="STENCIL_INDEX8",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r[r.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",r[r.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",r[r.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",r[r.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",r[r.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",r[r.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",r[r.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",r[r.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",r[r.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",r[r.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",r[r.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",r[r.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",r[r.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",r[r.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",r[r.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",r[r.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",r[r.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",r[r.NONE=0]="NONE",r[r.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",r[r.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",r[r.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",r[r.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",r[r.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",r[r.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",r[r.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",r[r.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",r[r.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",r[r.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",r[r.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",r[r.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",r[r.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",r[r.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",r[r.COPY_SRC=1]="COPY_SRC",r[r.COPY_DST=2]="COPY_DST",r[r.SAMPLED=4]="SAMPLED",r[r.STORAGE=8]="STORAGE",r[r.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Ne||(Ne={}));var z8,G8,U8,V8,Hw,H8,W8,j8,HIe=(z8=Tn(),G8=hr(mt.GeometryComponentManager),U8=hr(mt.RenderEngine),z8(V8=(Hw=(j8=function(){function r(){ar(this,r),fr(this,"geometry",H8,this),fr(this,"engine",W8,this)}return br(r,[{key:"execute",value:function(){var t=Sn(Qt.mark(function n(){var i=this;return Qt.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:this.geometry.forEach(function(s,l){l.dirty&&(l.attributes.forEach(function(u){if(u.dirty&&u.data){if(!u.buffer)u.buffer=i.engine.createBuffer({data:u.data,type:Ne.FLOAT});else{var c;(c=u.buffer)===null||c===void 0||c.subData({data:u.data,offset:0})}u.dirty=!1}}),l.indices&&(l.indicesBuffer?l.indicesBuffer.subData({data:l.indices,offset:0}):l.indicesBuffer=i.engine.createElements({data:l.indices,count:l.indices.length,type:Ne.UNSIGNED_INT,usage:Ne.STATIC_DRAW})),l.dirty=!1)});case 1:case"end":return o.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"tearDown",value:function(){this.geometry.forEach(function(e,n){n.indicesBuffer&&n.indicesBuffer.destroy(),n.attributes.forEach(function(i){i.buffer&&i.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},n=e.vertexCount,i=Nl();return this.geometry.create(i,{vertexCount:n})}},{key:"createInstancedBufferGeometry",value:function(e){var n=e.maxInstancedCount,i=e.vertexCount,a=Nl();return this.geometry.create(a,{maxInstancedCount:n,vertexCount:i})}}]),r}(),j8),H8=dr(Hw.prototype,"geometry",[G8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W8=dr(Hw.prototype,"engine",[U8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hw))||V8);function Y8(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function X8(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Y8(Object(e),!0).forEach(function(n){lt(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Y8(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function WIe(r){var t=jIe();return function(){var n=An(r),i;if(t){var a=An(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return co(this,i)}}function jIe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var YIe=function(r){uo(e,r);var t=WIe(e);function e(n){var i;return ar(this,e),i=t.call(this,n),i.vertexShaderGLSL=void 0,i.fragmentShaderGLSL=void 0,i.defines={},i.dirty=!0,i.uniforms=[],i.cull={enable:!0,face:Ne.BACK},i.depth={enable:!0},i.blend=void 0,i.entity=void 0,i.type=void 0,Object.assign(Li(i),n),i}return br(e,[{key:"setDefines",value:function(i){return this.defines=X8(X8({},this.defines),i),this}},{key:"setCull",value:function(i){return this.cull=i,this}},{key:"setDepth",value:function(i){return this.depth=i,this}},{key:"setBlend",value:function(i){return this.blend=i,this}},{key:"setUniform",value:function(i,a){var o=this;if(typeof i!="string")return Object.keys(i).forEach(function(l){return o.setUniform(l,i[l])}),this;var s=this.uniforms.find(function(l){return l.name===i});return s?(s.dirty=!0,s.data=a):this.uniforms.push({name:i,dirty:!0,data:a}),this.dirty=!0,this}}]),e}(Md),q8,K8,Z8,Q8,J8,_y,eU,tU,rU,nU;function iU(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function aU(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?iU(Object(e),!0).forEach(function(n){lt(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):iU(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}var XIe=(q8=Tn(),K8=hr(mt.MaterialComponentManager),Z8=hr(mt.RenderEngine),Q8=hr(mt.ShaderModuleService),q8(J8=(_y=(nU=function(){function r(){ar(this,r),fr(this,"material",eU,this),fr(this,"engine",tU,this),fr(this,"shaderModule",rU,this)}return br(r,[{key:"execute",value:function(){var t=Sn(Qt.mark(function n(){return Qt.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:case"end":return a.stop()}},n)}));function e(){return t.apply(this,arguments)}return e}()},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(e){var n=Nl(),i=e.vertexShader,a=e.fragmentShader,o=[];if(!this.engine.supportWebGPU){var s="material-".concat(n);this.shaderModule.registerModule(s,{vs:e.vertexShader,fs:e.fragmentShader});var l=this.shaderModule.getModule(s);i=l.vs,a=l.fs,l.uniforms&&(o=Object.keys(l.uniforms).map(function(u){return{dirty:!0,name:u,data:l.uniforms[u]}}))}return this.material.create(n,aU(aU({vertexShaderGLSL:i,fragmentShaderGLSL:a},e),{},{uniforms:o}))}}]),r}(),nU),eU=dr(_y.prototype,"material",[K8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tU=dr(_y.prototype,"engine",[Z8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rU=dr(_y.prototype,"shaderModule",[Q8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_y))||J8);function qIe(r){var t=KIe();return function(){var n=An(r),i;if(t){var a=An(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return co(this,i)}}function KIe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var ok;(function(r){r[r.Standard=0]="Standard"})(ok||(ok={}));var ZIe=function(r){uo(e,r);var t=qIe(e);function e(n){var i;return ar(this,e),i=t.call(this,n),i.strategy=ok.Standard,i.visibilityPlaneMask=0,i.visible=!1,Object.assign(Li(i),n),i}return e}(Md),sk=function(){function r(t,e){ar(this,r),this.center=void 0,this.halfExtents=void 0,this.min=Fn(),this.max=Fn(),this.update(t,e)}return br(r,[{key:"update",value:function(e,n){this.center=e||Fn(),this.halfExtents=n||Wr(.5,.5,.5),this.min=uT(this.min,this.center,this.halfExtents),this.max=xu(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(e,n){xu(this.center,n,e),pm(this.center,this.center,.5),uT(this.halfExtents,n,e),pm(this.halfExtents,this.halfExtents,.5),ja(this.min,e),ja(this.max,n)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(e){var n=this.center,i=n[0],a=n[1],o=n[2],s=this.halfExtents,l=s[0],u=s[1],c=s[2],f=i-l,d=i+l,h=a-u,v=a+u,p=o-c,g=o+c,m=e.center,y=m[0],b=m[1],x=m[2],w=e.halfExtents,S=w[0],C=w[1],_=w[2],T=y-S,E=y+S,M=b-C,k=b+C,P=x-_,F=x+_;T<f&&(f=T),E>d&&(d=E),M<h&&(h=M),k>v&&(v=k),P<p&&(p=P),F>g&&(g=F),n[0]=(f+d)*.5,n[1]=(h+v)*.5,n[2]=(p+g)*.5,s[0]=(d-f)*.5,s[1]=(v-h)*.5,s[2]=(g-p)*.5,this.min[0]=f,this.min[1]=h,this.min[2]=p,this.max[0]=d,this.max[1]=v,this.max[2]=g}},{key:"intersects",value:function(e){var n=this.getMax(),i=this.getMin(),a=e.getMax(),o=e.getMin();return i[0]<=a[0]&&n[0]>=o[0]&&i[1]<=a[1]&&n[1]>=o[1]&&i[2]<=a[2]&&n[2]>=o[2]}},{key:"containsPoint",value:function(e){var n=this.getMin(),i=this.getMax();return!(e[0]<n[0]||e[0]>i[0]||e[1]<n[1]||e[1]>i[1]||e[2]<n[2]||e[2]>i[2])}},{key:"getNegativeFarPoint",value:function(e){return e.pnVertexFlag===273?ja(Fn(),this.min):e.pnVertexFlag===272?Wr(this.min[0],this.min[1],this.max[2]):e.pnVertexFlag===257?Wr(this.min[0],this.max[1],this.min[2]):e.pnVertexFlag===256?Wr(this.min[0],this.max[1],this.max[2]):e.pnVertexFlag===17?Wr(this.max[0],this.min[1],this.min[2]):e.pnVertexFlag===16?Wr(this.max[0],this.min[1],this.max[2]):e.pnVertexFlag===1?Wr(this.max[0],this.max[1],this.min[2]):Wr(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(e){return e.pnVertexFlag===273?ja(Fn(),this.max):e.pnVertexFlag===272?Wr(this.max[0],this.max[1],this.min[2]):e.pnVertexFlag===257?Wr(this.max[0],this.min[1],this.max[2]):e.pnVertexFlag===256?Wr(this.max[0],this.min[1],this.min[2]):e.pnVertexFlag===17?Wr(this.min[0],this.max[1],this.max[2]):e.pnVertexFlag===16?Wr(this.min[0],this.max[1],this.min[2]):e.pnVertexFlag===1?Wr(this.min[0],this.min[1],this.max[2]):Wr(this.min[0],this.min[1],this.min[2])}}]),r}();function QIe(r){var t=JIe();return function(){var n=An(r),i;if(t){var a=An(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return co(this,i)}}function JIe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var ePe=function(r){uo(e,r);var t=QIe(e);function e(n){var i;return ar(this,e),i=t.call(this,n),i.material=void 0,i.geometry=void 0,i.aabb=new sk,i.aabbDirty=!0,i.model=void 0,i.visible=!0,i.children=[],Object.assign(Li(i),n),i}return e}(Md),tPe=function(){function r(t,e){ar(this,r),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=t||0,this.normal=e||Wr(0,1,0),this.updatePNVertexFlag()}return br(r,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(e){return Xx(e,this.normal)-this.distance}},{key:"normalize",value:function(){var e=1/U3(this.normal);pm(this.normal,this.normal,e),this.distance*=e}},{key:"intersectsLine",value:function(e,n,i){var a=this.distanceToPoint(e),o=this.distanceToPoint(n),s=a/(a-o),l=s>=0&&s<=1;return l&&i&&td(i,e,n,s),l}}]),r}(),$c;(function(r){r[r.OUTSIDE=4294967295]="OUTSIDE",r[r.INSIDE=0]="INSIDE",r[r.INDETERMINATE=2147483647]="INDETERMINATE"})($c||($c={}));var rPe=function(){function r(t){if(ar(this,r),this.planes=[],t)this.planes=t;else for(var e=0;e<6;e++)this.planes.push(new tPe)}return br(r,[{key:"extractFromVPMatrix",value:function(e){var n=Nw(e,16),i=n[0],a=n[1],o=n[2],s=n[3],l=n[4],u=n[5],c=n[6],f=n[7],d=n[8],h=n[9],v=n[10],p=n[11],g=n[12],m=n[13],y=n[14],b=n[15];Ev(this.planes[0].normal,s-i,f-l,p-d),this.planes[0].distance=-(b-g),Ev(this.planes[1].normal,s+i,f+l,p+d),this.planes[1].distance=-(b+g),Ev(this.planes[2].normal,s+a,f+u,p+h),this.planes[2].distance=-(b+m),Ev(this.planes[3].normal,s-a,f-u,p-h),this.planes[3].distance=-(b-m),Ev(this.planes[4].normal,s-o,f-c,p-v),this.planes[4].distance=-(b-y),Ev(this.planes[5].normal,s+o,f+c,p+v),this.planes[5].distance=-(b+y),this.planes.forEach(function(x){x.normalize(),x.updatePNVertexFlag()})}}]),r}();function nPe(r,t){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t}function iPe(r){var t=Nw(r,3),e=t[0],n=t[1],i=t[2],a=e+n*256+i*65536-1;return a}var oU,sU,lU,uU,cU,fU,dU,Id,hU,vU,pU,gU,mU,yU;function bU(r,t){var e;if(typeof Symbol=="undefined"||r[Symbol.iterator]==null){if(Array.isArray(r)||(e=aPe(r))||t&&r&&typeof r.length=="number"){e&&(r=e);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=r[Symbol.iterator]()},n:function(){var u=e.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function aPe(r,t){if(!!r){if(typeof r=="string")return xU(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return xU(r,t)}}function xU(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var oPe=(oU=Tn(),sU=hr(mt.MeshComponentManager),lU=hr(mt.CullableComponentManager),uU=hr(mt.GeometryComponentManager),cU=hr(mt.HierarchyComponentManager),fU=hr(mt.TransformComponentManager),oU(dU=(Id=(yU=function(){function r(){ar(this,r),fr(this,"mesh",hU,this),fr(this,"cullable",vU,this),fr(this,"geometry",pU,this),fr(this,"hierarchy",gU,this),fr(this,"transform",mU,this),this.planes=void 0}return br(r,[{key:"setFrustumPlanes",value:function(e){this.planes=e}},{key:"execute",value:function(){var t=Sn(Qt.mark(function n(i){var a,o,s,l,u,c,f,d,h,v,p,g,m,y,b,x,w,S,C,_,T;return Qt.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:a=bU(i);try{for(a.s();!(o=a.n()).done;){s=o.value,l=s.getScene(),u=s.getCamera(),c=bU(l.getEntities());try{for(c.s();!(f=c.n()).done;)d=f.value,h=this.mesh.getComponentByEntity(d),h&&(v=this.hierarchy.getComponentByEntity(d),p=this.cullable.getComponentByEntity(d),g=h.geometry,m=this.transform.getComponentByEntity(d),g&&g.aabb&&m&&h.aabbDirty&&(y=m.worldTransform,b=g.aabb,x=b.center,w=b.halfExtents,S=lT(Fn(),x,y),C=nPe(y,wv()),_=kl(Fn(),w,C),h.aabb.update(S,_),h.aabbDirty=!1),p&&g&&(T=this.cullable.getComponentByEntity((v==null?void 0:v.parentID)||-1),p.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(h.aabb,(T==null?void 0:T.visibilityPlaneMask)||$c.INDETERMINATE,this.planes||u.getFrustum().planes),p.visible=p.visibilityPlaneMask!==$c.OUTSIDE))}catch(k){c.e(k)}finally{c.f()}}}catch(k){a.e(k)}finally{a.f()}case 2:case"end":return M.stop()}},n,this)}));function e(n){return t.apply(this,arguments)}return e}()},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(e,n,i){if(n===$c.OUTSIDE||n===$c.INSIDE)return n;for(var a=$c.INSIDE,o=0,s=i.length;o<s;++o){var l=o<31?1<<o:0;if(!(o<31&&(n&l)==0)){var u=i[o],c=u.normal,f=u.distance;if(Xx(c,e.getNegativeFarPoint(i[o]))+f>0)return $c.OUTSIDE;Xx(c,e.getPositiveFarPoint(i[o]))+f>0&&(a|=l)}}return a}}]),r}(),yU),hU=dr(Id.prototype,"mesh",[sU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vU=dr(Id.prototype,"cullable",[lU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pU=dr(Id.prototype,"geometry",[uU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gU=dr(Id.prototype,"hierarchy",[cU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mU=dr(Id.prototype,"transform",[fU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Id))||dU),wU,SU,CU,EU,_U,TU,AU,MU,kU,IU,PU,DU,ol,RU,OU,LU,FU,NU,BU,$U,zU,GU,UU,VU;function Ww(r,t){var e;if(typeof Symbol=="undefined"||r[Symbol.iterator]==null){if(Array.isArray(r)||(e=sPe(r))||t&&r&&typeof r.length=="number"){e&&(r=e);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=r[Symbol.iterator]()},n:function(){var u=e.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function sPe(r,t){if(!!r){if(typeof r=="string")return HU(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return HU(r,t)}}function HU(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var ep=(wU=Tn(),SU=hr(mt.MeshComponentManager),CU=hr(mt.GeometryComponentManager),EU=hr(mt.MaterialComponentManager),_U=hr(mt.CullableComponentManager),TU=hr(mt.TransformComponentManager),AU=hr(mt.HierarchyComponentManager),MU=hr(mt.Systems),kU=Bl(mt.FrameGraphSystem),IU=hr(mt.RenderEngine),PU=hr(mt.ResourcePool),wU(DU=(ol=(VU=UU=function(){function r(){var t=this;ar(this,r),fr(this,"mesh",RU,this),fr(this,"geometry",OU,this),fr(this,"material",LU,this),fr(this,"cullable",FU,this),fr(this,"transform",NU,this),fr(this,"hierarchy",BU,this),fr(this,"frameGraphSystem",$U,this),fr(this,"engine",zU,this),fr(this,"resourcePool",GU,this),this.modelCache={},this.setup=function(e,n,i){var a=e.createRenderTarget(n,"color buffer",{width:1,height:1,usage:Ne.RENDER_ATTACHMENT|Ne.SAMPLED|Ne.COPY_SRC});i.data={output:n.write(e,a)}},this.execute=function(){var e=Sn(Qt.mark(function n(i,a,o){var s,l,u,c,f,d;return Qt.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:s=i.getResourceNode(a.data.output),l=t.resourcePool.getOrCreateResource(s.resource),u=Ww(o),v.prev=3,u.s();case 5:if((c=u.n()).done){v.next=11;break}return f=c.value,v.next=9,t.initView(f);case 9:v.next=5;break;case 11:v.next=16;break;case 13:v.prev=13,v.t0=v.catch(3),u.e(v.t0);case 16:return v.prev=16,u.f(),v.finish(16);case 19:d=t.engine.getCanvas(),l.resize({width:d.width,height:d.height}),t.engine.setScissor({enable:!1}),t.engine.clear({framebuffer:l,color:o[0].getClearColor(),depth:1}),t.engine.useFramebuffer(l,function(){var p=Ww(o),g;try{for(p.s();!(g=p.n()).done;){var m=g.value;t.renderView(m)}}catch(y){p.e(y)}finally{p.f()}});case 24:case"end":return v.stop()}},n,null,[[3,13,16,19]])}));return function(n,i,a){return e.apply(this,arguments)}}()}return br(r,[{key:"renderView",value:function(e){var n=e.getScene(),i=e.getCamera(),a=i.getViewTransform(),o=ed(Ro(),i.getPerspective(),a);i.getFrustum().extractFromVPMatrix(o);var s=e.getViewport(),l=s.x,u=s.y,c=s.width,f=s.height;this.engine.viewport({x:l,y:u,width:c,height:f});var d=Ww(n.getEntities()),h;try{for(d.s();!(h=d.n()).done;){var v=h.value;this.renderMesh(v,{camera:i,view:e,viewMatrix:a})}}catch(p){d.e(p)}finally{d.f()}}},{key:"renderMesh",value:function(e,n){var i=n.camera,a=n.view,o=n.viewMatrix,s=this.mesh.getComponentByEntity(e);if(!(!s||!s.visible)){var l=s.material,u=s.geometry;if(!(!u||u.dirty||!l)){var c=this.transform.getComponentByEntity(e),f=ed(Ro(),o,c.worldTransform),d=a.getViewport(),h=d.width,v=d.height;l.setUniform({projectionMatrix:i.getPerspective(),modelViewMatrix:f,modelMatrix:c.worldTransform,viewMatrix:o,cameraPosition:i.getPosition(),u_viewport:[h,v]}),s.model&&(s.model.draw({uniforms:l.uniforms.reduce(function(p,g){return p[g.name]=g.data,p},{})}),l.uniforms.forEach(function(p){p.dirty=!1}),l.dirty=!1)}}}},{key:"initMesh",value:function(){var t=Sn(Qt.mark(function n(i,a){var o,s,l,u,c,f,d,h;return Qt.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(o=this.mesh.getComponentByEntity(i),o){p.next=3;break}return p.abrupt("return");case 3:if(s=o.material,l=o.geometry,!(!l||l.dirty||!s)){p.next=7;break}return p.abrupt("return");case 7:if(o.model){p.next=24;break}if(u="m-".concat(s.entity,"-g-").concat(l.entity),!this.modelCache[u]){p.next=12;break}return o.model=this.modelCache[u],p.abrupt("return");case 12:return s.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),c=this.engine,f=c.createModel,d=c.createAttribute,h={vs:s.vertexShaderGLSL,fs:s.fragmentShaderGLSL,defines:s.defines,attributes:l.attributes.reduce(function(g,m){return m.data&&m.buffer&&(g[m.name]=d({buffer:m.buffer,attributes:m.attributes,arrayStride:m.arrayStride,stepMode:m.stepMode,divisor:m.stepMode==="vertex"?0:1})),g},{}),uniforms:s.uniforms.reduce(function(g,m){return g[m.name]=m.data,g},{}),scissor:{enable:!0,box:function(){return a.getViewport()}}},s.cull&&(h.cull=s.cull),s.depth&&(h.depth=s.depth),s.blend&&(h.blend=s.blend),l.indicesBuffer&&(h.elements=l.indicesBuffer),l.maxInstancedCount&&(h.instances=l.maxInstancedCount,h.count=l.vertexCount||3),p.next=22,f(h);case 22:o.model=p.sent,this.modelCache[u]=o.model;case 24:case"end":return p.stop()}},n,this)}));function e(n,i){return t.apply(this,arguments)}return e}()},{key:"initView",value:function(){var t=Sn(Qt.mark(function n(i){var a,o,s,l;return Qt.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:a=i.getScene(),o=Ww(a.getEntities()),c.prev=2,o.s();case 4:if((s=o.n()).done){c.next=10;break}return l=s.value,c.next=8,this.initMesh(l,i);case 8:c.next=4;break;case 10:c.next=15;break;case 12:c.prev=12,c.t0=c.catch(2),o.e(c.t0);case 15:return c.prev=15,o.f(),c.finish(15);case 18:case"end":return c.stop()}},n,this,[[2,12,15,18]])}));function e(n){return t.apply(this,arguments)}return e}()}]),r}(),UU.IDENTIFIER="Render Pass",VU),RU=dr(ol.prototype,"mesh",[SU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),OU=dr(ol.prototype,"geometry",[CU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),LU=dr(ol.prototype,"material",[EU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),FU=dr(ol.prototype,"cullable",[_U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),NU=dr(ol.prototype,"transform",[TU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),BU=dr(ol.prototype,"hierarchy",[AU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$U=dr(ol.prototype,"frameGraphSystem",[MU,kU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zU=dr(ol.prototype,"engine",[IU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),GU=dr(ol.prototype,"resourcePool",[PU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ol))||DU),WU,jU,YU,XU,qU,KU,tp,ZU,QU,JU,eV,tV,rV;function lk(r,t){var e;if(typeof Symbol=="undefined"||r[Symbol.iterator]==null){if(Array.isArray(r)||(e=lPe(r))||t&&r&&typeof r.length=="number"){e&&(r=e);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=r[Symbol.iterator]()},n:function(){var u=e.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function lPe(r,t){if(!!r){if(typeof r=="string")return nV(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return nV(r,t)}}function nV(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var uk={NONE:0,ENCODE:1,HIGHLIGHT:2},ck=(WU=Tn(),jU=hr(mt.RenderEngine),YU=hr(mt.ResourcePool),XU=hr(mt.RenderPassFactory),qU=hr(mt.MeshComponentManager),WU(KU=(tp=(rV=tV=function(){function r(){var t=this;ar(this,r),fr(this,"engine",ZU,this),fr(this,"resourcePool",QU,this),fr(this,"renderPassFactory",JU,this),fr(this,"mesh",eV,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(e,n,i){var a=e.createRenderTarget(n,"picking fbo",{width:1,height:1});i.data={output:n.write(e,a)},n.hasSideEffect=!0},this.execute=function(){var e=Sn(Qt.mark(function n(i,a,o){var s,l,u;return Qt.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(t.views=o,!t.alreadyInRendering){f.next=3;break}return f.abrupt("return");case 3:s=lk(o);try{for(u=function(){var h=l.value,v=h.getViewport(),p=v.width,g=v.height;t.alreadyInRendering=!0;var m=i.getResourceNode(a.data.output);t.pickingFBO=t.resourcePool.getOrCreateResource(m.resource),t.pickingFBO.resize({width:p,height:g}),t.engine.useFramebuffer(t.pickingFBO,function(){t.engine.clear({framebuffer:t.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var y=t.renderPassFactory(ep.IDENTIFIER),b=[],x=h.getScene(),w=lk(x.getEntities()),S;try{for(w.s();!(S=w.n()).done;){var C=S.value,_=t.mesh.getComponentByEntity(C),T=_.material;T.setUniform("u_PickingStage",uk.ENCODE),b.push(_)}}catch(E){w.e(E)}finally{w.f()}y.renderView(h),b.forEach(function(E){var M=E.material;M.setUniform("u_PickingStage",uk.HIGHLIGHT)}),t.alreadyInRendering=!1})},s.s();!(l=s.n()).done;)u()}catch(d){s.e(d)}finally{s.f()}case 5:case"end":return f.stop()}},n)}));return function(n,i,a){return e.apply(this,arguments)}}(),this.pick=function(e,n){var i=e.x,a=e.y,o=t.engine,s=o.readPixels,l=o.useFramebuffer,u=n.getViewport(),c=u.width,f=u.height,d=i*window.devicePixelRatio,h=a*window.devicePixelRatio;if(!(d>c||d<0||h>f||h<0)){var v,p;return l(t.pickingFBO,function(){v=s({x:Math.round(d),y:Math.round(f-(a+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:t.pickingFBO}),(v[0]!==0||v[1]!==0||v[2]!==0)&&(p=iPe(v),t.highlightEnabled&&t.highlightPickedFeature(v,n))}),p}}}return br(r,[{key:"enableHighlight",value:function(e){this.highlightEnabled=e}},{key:"setHighlightColor",value:function(e){this.highlightColor=e}},{key:"highlightPickedFeature",value:function(e,n){if(e){var i=lk(n.getScene().getEntities()),a;try{for(i.s();!(a=i.n()).done;){var o=a.value,s=this.mesh.getComponentByEntity(o),l=s.material;l.setUniform("u_PickingStage",uk.HIGHLIGHT),l.setUniform("u_PickingColor",[e[0],e[1],e[2]]),l.setUniform("u_HighlightColor",this.highlightColor)}}catch(u){i.e(u)}finally{i.f()}}}}]),r}(),tV.IDENTIFIER="PixelPicking Pass",rV),ZU=dr(tp.prototype,"engine",[jU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),QU=dr(tp.prototype,"resourcePool",[YU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),JU=dr(tp.prototype,"renderPassFactory",[XU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eV=dr(tp.prototype,"mesh",[qU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tp))||KU),iV,aV,oV,sV,jw,lV,uV,cV,fV,uPe=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,cPe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,fPe=`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`,dPe=`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Yw=(iV=Tn(),aV=hr(mt.RenderEngine),oV=hr(mt.ResourcePool),iV(sV=(jw=(fV=cV=function r(){var t=this;ar(this,r),fr(this,"engine",lV,this),fr(this,"resourcePool",uV,this),this.model=void 0,this.setup=function(e,n,i){var a=e.getPass(ep.IDENTIFIER);if(a){var o=e.createRenderTarget(n,"render to screen",{width:1,height:1});i.data={input:n.read(a.data.output),output:n.write(e,o)}}},this.execute=function(){var e=Sn(Qt.mark(function n(i,a){var o,s,l,u,c,f,d;return Qt.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(o=t.engine,s=o.createModel,l=o.createAttribute,u=o.createBuffer,t.model){v.next=6;break}return v.next=4,s({vs:t.engine.supportWebGPU?dPe:cPe,fs:t.engine.supportWebGPU?fPe:uPe,attributes:{a_Position:l({buffer:u({data:[-4,-4,4,-4,0,4],type:Ne.FLOAT}),size:2,arrayStride:2*4,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:c=v.sent,t.model=c;case 6:f=i.getResourceNode(a.data.input),d=t.resourcePool.getOrCreateResource(f.resource),t.engine.useFramebuffer(null,function(){t.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),t.model.draw({uniforms:{u_Texture:d}})});case 9:case"end":return v.stop()}},n)}));return function(n,i){return e.apply(this,arguments)}}(),this.tearDown=function(){t.model=void 0}},cV.IDENTIFIER="Copy Pass",fV),lV=dr(jw.prototype,"engine",[aV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uV=dr(jw.prototype,"resourcePool",[oV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jw))||sV),dV,hV,vV,pV,gV,mV,yV,rp,bV,xV,wV,SV,CV,hPe=(dV=Tn(),hV=hr(mt.Systems),vV=Bl(mt.FrameGraphSystem),pV=hr(mt.RenderPassFactory),gV=hr(mt.ConfigService),mV=hr(mt.ResourcePool),dV(yV=(rp=(CV=function(){function r(){ar(this,r),fr(this,"frameGraphSystem",bV,this),fr(this,"renderPassFactory",xV,this),fr(this,"configService",wV,this),fr(this,"resourcePool",SV,this)}return br(r,[{key:"execute",value:function(){var t=Sn(Qt.mark(function n(i){var a,o,s,l,u,c,f,d;return Qt.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:a=this.renderPassFactory(ep.IDENTIFIER),o=a.setup,s=a.execute,this.frameGraphSystem.addPass(ep.IDENTIFIER,o,s),l=this.renderPassFactory(Yw.IDENTIFIER),u=l.setup,c=l.execute,f=l.tearDown,d=this.frameGraphSystem.addPass(Yw.IDENTIFIER,u,c,f),this.frameGraphSystem.present(d.data.output);case 5:case"end":return v.stop()}},n,this)}));function e(n){return t.apply(this,arguments)}return e}()},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(e,n){var i=this.renderPassFactory(ck.IDENTIFIER);return i.pick(e,n)}}]),r}(),CV),bV=dr(rp.prototype,"frameGraphSystem",[hV,vV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xV=dr(rp.prototype,"renderPassFactory",[pV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wV=dr(rp.prototype,"configService",[gV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),SV=dr(rp.prototype,"resourcePool",[mV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rp))||yV);function vPe(r){var t=pPe();return function(){var n=An(r),i;if(t){var a=An(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return co(this,i)}}function pPe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var gPe=function(r){uo(e,r);var t=vPe(e);function e(n){var i;return ar(this,e),i=t.call(this,n),i.parentID=void 0,Object.assign(Li(i),n),i}return e}(Md),EV,_V,TV,AV,MV,Ty,kV,IV,PV,DV,mPe=(EV=Tn(),_V=hr(mt.HierarchyComponentManager),TV=hr(mt.TransformComponentManager),AV=hr(mt.MeshComponentManager),EV(MV=(Ty=(DV=function(){function r(){ar(this,r),fr(this,"hierarchy",kV,this),fr(this,"transform",IV,this),fr(this,"mesh",PV,this)}return br(r,[{key:"execute",value:function(){var t=Sn(Qt.mark(function n(){return Qt.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return a.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var e=this;this.transform.forEach(function(n,i){(i.isDirty()||i.isLocalDirty())&&(e.setMeshAABBDirty(e.mesh.getComponentByEntity(n)),i.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var e=this;this.hierarchy.forEach(function(n,i){var a=e.transform.getComponentByEntity(n),o=e.transform.getComponentByEntity(i.parentID);a!==null&&o!==null&&a.updateTransformWithParent(o)})}},{key:"attach",value:function(e,n,i){this.hierarchy.contains(e)&&this.detach(e),this.hierarchy.create(e,{parentID:n});var a=this.mesh.getComponentByEntity(n);if(this.setMeshAABBDirty(a),a&&a.children.indexOf(e)===-1&&a.children.push(e),this.hierarchy.getCount()>1)for(var o=this.hierarchy.getCount()-1;o>0;--o)for(var s=this.hierarchy.getEntity(o),l=0;l<o;++l){var u=this.hierarchy.getComponent(l);if(u.parentID===s){this.hierarchy.moveItem(o,l),++o;break}}this.hierarchy.getComponentByEntity(e);var c=this.transform.getComponentByEntity(n);c===null&&(c=this.transform.create(n));var f=this.transform.getComponentByEntity(e);f===null&&(f=this.transform.create(e),c=this.transform.getComponentByEntity(n)),f.parent=c,!i&&c&&(f.matrixTransform(jx(Ro(),c.worldTransform)),f.updateTransform()),c&&f.updateTransformWithParent(c)}},{key:"detach",value:function(e){var n=this.hierarchy.getComponentByEntity(e);if(n!==null){var i=this.transform.getComponentByEntity(e);i!==null&&(i.parent=null,i.applyTransform()),this.hierarchy.removeKeepSorted(e);var a=this.mesh.getComponentByEntity(n.parentID);if(a){var o=a.children.indexOf(e);a.children.splice(o,1)}this.setMeshAABBDirty(a)}}},{key:"detachChildren",value:function(e){var n=this.mesh.getComponentByEntity(e);n&&(n.children=[]);for(var i=0;i<this.hierarchy.getCount();){var a;if(((a=this.hierarchy.getComponent(i))===null||a===void 0?void 0:a.parentID)===e){var o=this.hierarchy.getEntity(i);this.detach(o)}else++i}}},{key:"setMeshAABBDirty",value:function(e){e&&(e.aabbDirty=!0)}}]),r}(),DV),kV=dr(Ty.prototype,"hierarchy",[_V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),IV=dr(Ty.prototype,"transform",[TV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),PV=dr(Ty.prototype,"mesh",[AV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ty))||MV);function yPe(r){var t=bPe();return function(){var n=An(r),i;if(t){var a=An(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return co(this,i)}}function bPe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var RV=function(r){uo(e,r);var t=yPe(e);function e(n){var i;return ar(this,e),i=t.call(this,n),i.dirtyFlag=void 0,i.localDirtyFlag=void 0,i.parent=null,i.localPosition=Wr(0,0,0),i.localRotation=fT(0,0,0,1),i.localScale=Wr(1,1,1),i.localTransform=Ro(),i.position=Wr(0,0,0),i.rotation=fT(0,0,0,1),i.scaling=Wr(1,1,1),i.worldTransform=Ro(),i.matrixTransform=function(){var a=Ro();return function(o){ed(a,i.getLocalTransform(),o),Cv(i.localScale,a),hm(i.localPosition,a),vm(i.localRotation,a)}}(),i.rotateRollPitchYaw=function(){var a=ma(),o=ma(),s=ma();return function(l,u,c){i.setDirty(),cT(a,l,0,0),cT(o,0,u,0),cT(s,0,0,c),ks(i.localRotation,a,i.localRotation),ks(i.localRotation,i.localRotation,o),ks(i.localRotation,s,i.localRotation),_v(i.localRotation,i.localRotation)}}(),i.lerp=function(){var a=Fn(),o=ma(),s=Fn(),l=Fn(),u=ma(),c=Fn();return function(f,d,h){i.setDirty(),Cv(a,f.worldTransform),hm(s,f.worldTransform),vm(o,f.worldTransform),Cv(l,d.worldTransform),hm(c,d.worldTransform),vm(u,d.worldTransform),td(i.localScale,a,l,h),qx(i.localRotation,o,u,h),td(i.localPosition,s,c,h)}}(),i.translate=function(){var a=Fn();return function(o){return xu(a,i.getPosition(),o),i.setPosition(a),i.setDirty(!0),Li(i)}}(),i.translateLocal=function(){return function(a){return gce(a,a,i.localRotation),xu(i.localPosition,i.localPosition,a),i.setLocalDirty(!0),Li(i)}}(),i.setPosition=function(){var a=Ro();return function(o){return i.position=o,i.setLocalDirty(!0),i.parent===null?ja(i.localPosition,o):(aT(a,i.parent.worldTransform),jx(a,a),lT(i.localPosition,o,a)),Li(i)}}(),i.rotate=function(){var a=ma();return function(o){if(i.parent===null)ks(i.localRotation,i.localRotation,o),_v(i.localRotation,i.localRotation);else{var s=i.getRotation(),l=i.parent.getRotation();bm(a,l),H3(a,a),ks(a,a,o),ks(i.localRotation,o,s),_v(i.localRotation,i.localRotation)}return i.setLocalDirty(),Li(i)}}(),i.rotateLocal=function(){return function(a){return ks(i.localRotation,i.localRotation,a),_v(i.localRotation,i.localRotation),i.setLocalDirty(!0),Li(i)}}(),i.setRotation=function(){var a=ma();return function(o){return i.parent===null?bm(i.localRotation,o):(bm(a,i.parent.getRotation()),H3(a,a),bm(i.localRotation,a),xce(i.localRotation,i.localRotation,o)),i.setLocalDirty(!0),Li(i)}}(),i}return br(e,[{key:"setLocalPosition",value:function(i){ja(this.localPosition,i),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(i){ja(this.localScale,i),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(i){return bm(this.localRotation,i),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;i?this.dirtyFlag|=e.DIRTY:this.dirtyFlag&=~e.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;i?(this.localDirtyFlag|=e.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~e.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&this.parent===null&&(aT(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(i){ed(this.worldTransform,i.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),Cv(this.localScale,this.worldTransform),hm(this.localPosition,this.worldTransform),vm(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=Wr(0,0,0),this.localRotation=fT(0,0,0,1),this.localScale=Wr(1,1,1)}},{key:"scaleLocal",value:function(i){return this.setLocalDirty(),vce(this.localScale,this.localScale,i),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(lce(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return!this.isLocalDirty()&&!this.isDirty()?this.worldTransform:(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform)}},{key:"getPosition",value:function(){return hm(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return vm(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return Cv(this.scaling,this.worldTransform),this.scaling}}]),e}(Md);RV.DIRTY=1<<0;var OV,LV,FV,fk,NV,BV,xPe=(OV=Tn(),LV=hr(mt.RenderEngine),OV(FV=(fk=(BV=function(){function r(){ar(this,r),fr(this,"engine",NV,this),this.resourcePool={}}return br(r,[{key:"getOrCreateResource",value:function(e){if(!this.resourcePool[e.name]){var n=e.descriptor,i=n.width,a=n.height,o=n.usage;this.resourcePool[e.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:i,height:a,wrapS:Ne.CLAMP_TO_EDGE,wrapT:Ne.CLAMP_TO_EDGE,usage:o})})}return this.resourcePool[e.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),r}(),BV),NV=dr(fk.prototype,"engine",[LV],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fk))||FV);function wPe(r){var t=SPe();return function(){var n=An(r),i;if(t){var a=An(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return co(this,i)}}function SPe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var CPe=function(r){uo(e,r);var t=wPe(e);function e(n){var i;return ar(this,e),i=t.call(this,n),i.name=void 0,i.name=n.name||"",i}return e}(Md),$V,zV,GV,EPe=($V=Tn(),$V(zV=(GV=function(){function r(){ar(this,r),this.config=void 0}return br(r,[{key:"get",value:function(){return this.config}},{key:"set",value:function(e){this.config=e}}]),r}(),GV))||zV),UV,VV,HV;(function(r){r.PANSTART="PANSTART",r.PANEND="PANEND",r.PANMOVE="PANMOVE",r.PINCH="PINCH",r.KEYDOWN="KEYDOWN",r.KEYUP="KEYUP",r.HOVER="HOVER"})(HV||(HV={}));var _Pe=(UV=Tn(),UV(VV=function(){function r(){ar(this,r)}return br(r,[{key:"listen",value:function(e){}},{key:"on",value:function(e,n){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),r}())||VV);function TPe(r){var t=0;switch(r){case"vec2":case"ivec2":t=2;break;case"vec3":case"ivec3":t=3;break;case"vec4":case"ivec4":case"mat2":t=4;break;case"mat3":t=9;break;case"mat4":t=16;break}return t}var APe=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function WV(r){var t={};return r=r.replace(APe,function(e,n,i){var a=i.split(":"),o=a[0].trim(),s="";switch(a.length>1&&(s=a[1].trim()),n){case"bool":s=s==="true";break;case"float":case"int":s=Number(s);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":s?s=s.replace("[","").replace("]","").split(",").reduce(function(l,u){return l.push(Number(u.trim())),l},[]):s=new Array(TPe(n)).fill(0);break}return t[o]=s,"uniform ".concat(n," ").concat(o,`;
`)}),{content:r,uniforms:t}}function MPe(r){return r.filter(function(t,e,n){return n.indexOf(t)===e})}var jV,YV,XV;function qV(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function Ay(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?qV(Object(e),!0).forEach(function(n){lt(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):qV(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}var kPe=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,IPe=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,PPe=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`,DPe=/precision\s+(high|low|medium)p\s+float/,RPe=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,OPe=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,LPe=(jV=Tn(),jV(YV=(XV=function(){function r(){ar(this,r),this.moduleCache={},this.rawContentCache={}}return br(r,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:IPe,fs:kPe}),this.registerModule("sdf2d",{vs:"",fs:PPe})}},{key:"registerModule",value:function(e,n){if(!this.rawContentCache[e]){var i=n.vs,a=i===void 0?"":i,o=n.fs,s=o===void 0?"":o,l=n.uniforms,u=WV(a),c=u.content,f=u.uniforms,d=WV(s),h=d.content,v=d.uniforms;this.rawContentCache[e]={fs:h,uniforms:Ay(Ay(Ay({},f),v),l),vs:c}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(e){var n=this;if(this.moduleCache[e])return this.moduleCache[e];var i=this.rawContentCache[e].vs||"",a=this.rawContentCache[e].fs||"",o=this.processModule(i,[],"vs"),s=o.content,l=o.includeList,u=this.processModule(a,[],"fs"),c=u.content,f=u.includeList,d=c,h=MPe(l.concat(f).concat(e)).reduce(function(v,p){return Ay(Ay({},v),n.rawContentCache[p].uniforms)},{});return DPe.test(c)||(d=RPe+c),this.moduleCache[e]={fs:d.trim(),uniforms:h,vs:s.trim()},this.moduleCache[e]}},{key:"processModule",value:function(e,n,i){var a=this,o=e.replace(OPe,function(s,l){var u=l.split(" "),c=u[0].replace(/"/g,"");if(n.indexOf(c)>-1)return"";var f=a.rawContentCache[c][i];n.push(c);var d=a.processModule(f||"",n,i),h=d.content;return h});return{content:o,includeList:n}}}]),r}(),XV))||YV),ku=new k8;ku.bind(mt.ShaderModuleService).to(LPe).inSingletonScope();ku.bind(mt.NameComponentManager).toConstantValue(new kd(CPe));ku.bind(mt.HierarchyComponentManager).toConstantValue(new kd(gPe));ku.bind(mt.TransformComponentManager).toConstantValue(new kd(RV));ku.bind(mt.MeshComponentManager).toConstantValue(new kd(ePe));ku.bind(mt.CullableComponentManager).toConstantValue(new kd(ZIe));ku.bind(mt.GeometryComponentManager).toConstantValue(new kd(VIe));ku.bind(mt.MaterialComponentManager).toConstantValue(new kd(YIe));function FPe(){var r=new k8;return r.parent=ku,r.bind(mt.Systems).to(mPe).inSingletonScope().whenTargetNamed(mt.SceneGraphSystem),r.bind(mt.Systems).to(cIe).inSingletonScope().whenTargetNamed(mt.FrameGraphSystem),r.bind(mt.Systems).to(oPe).inSingletonScope().whenTargetNamed(mt.MeshSystem),r.bind(mt.Systems).to(HIe).inSingletonScope().whenTargetNamed(mt.GeometrySystem),r.bind(mt.Systems).to(XIe).inSingletonScope().whenTargetNamed(mt.MaterialSystem),r.bind(mt.Systems).to(hPe).inSingletonScope().whenTargetNamed(mt.RendererSystem),r.bind(mt.ResourcePool).to(xPe).inSingletonScope(),r.bind(mt.ConfigService).to(EPe).inSingletonScope(),r.bind(mt.InteractorService).to(_Pe).inSingletonScope(),r.bind(mt.RenderPass).to(ep).inSingletonScope().whenTargetNamed(ep.IDENTIFIER),r.bind(mt.RenderPass).to(Yw).inSingletonScope().whenTargetNamed(Yw.IDENTIFIER),r.bind(mt.RenderPass).to(ck).inSingletonScope().whenTargetNamed(ck.IDENTIFIER),r.bind(mt.RenderPassFactory).toFactory(function(t){return function(e){return t.container.getNamed(mt.RenderPass,e)}}),r}function dk(r){for(var t=new sk,e=Wr(r[0],r[1],r[2]),n=Wr(r[0],r[1],r[2]),i=3;i<r.length;){var a=r[i++],o=r[i++],s=r[i++];a<e[0]&&(e[0]=a),o<e[1]&&(e[1]=o),s<e[2]&&(e[2]=s),a>n[0]&&(n[0]=a),o>n[1]&&(n[1]=o),s>n[2]&&(n[2]=s)}return t.setMinMax(e,n),t}var Fo=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);Fn();Fn();Fn();Fn();Fn();Fn();var KV;(function(r){r.Normal="normal",r.PostProcessing="post-processing"})(KV||(KV={}));var Pd;(function(r){r.Void="Void",r.Boolean="Boolean",r.Float="Float",r.Uint32="Uint32",r.Int32="Int32",r.Vector="Vector",r.Vector2Float="vec2<f32>",r.Vector3Float="vec3<f32>",r.Vector4Float="vec4<f32>",r.Vector2Boolean="vec2<bool>",r.Vector3Boolean="vec3<bool>",r.Vector4Boolean="vec4<bool>",r.Vector2Uint="vec2<u32>",r.Vector3Uint="vec3<u32>",r.Vector4Uint="vec4<u32>",r.Vector2Int="vec2<i32>",r.Vector3Int="vec3<i32>",r.Vector4Int="vec4<i32>",r.Matrix="Matrix",r.Matrix3x3Float="mat3x3<f32>",r.Matrix4x4Float="mat4x4<i32>",r.Struct="Struct",r.FloatArray="Float[]",r.Vector4FloatArray="vec4<f32>[]"})(Pd||(Pd={}));var ZV;(function(r){r.Program="Program",r.Identifier="Identifier",r.VariableDeclaration="VariableDeclaration",r.BlockStatement="BlockStatement",r.ReturnStatement="ReturnStatement",r.FunctionDeclaration="FunctionDeclaration",r.VariableDeclarator="VariableDeclarator",r.AssignmentExpression="AssignmentExpression",r.LogicalExpression="LogicalExpression",r.BinaryExpression="BinaryExpression",r.ArrayExpression="ArrayExpression",r.UnaryExpression="UnaryExpression",r.UpdateExpression="UpdateExpression",r.FunctionExpression="FunctionExpression",r.MemberExpression="MemberExpression",r.ConditionalExpression="ConditionalExpression",r.ExpressionStatement="ExpressionStatement",r.CallExpression="CallExpression",r.NumThreadStatement="NumThreadStatement",r.StorageStatement="StorageStatement",r.DoWhileStatement="DoWhileStatement",r.WhileStatement="WhileStatement",r.ForStatement="ForStatement",r.BreakStatement="BreakStatement",r.ContinueStatement="ContinueStatement",r.IfStatement="IfStatement",r.ImportedFunctionStatement="ImportedFunctionStatement"})(ZV||(ZV={}));var zc;(function(r){r.Input="Input",r.Output="Output",r.Uniform="Uniform",r.Workgroup="Workgroup",r.UniformConstant="UniformConstant",r.Image="Image",r.StorageBuffer="StorageBuffer",r.Private="Private",r.Function="Function"})(zc||(zc={}));var My;(function(r){r.GLSL100="GLSL100",r.GLSL450="GLSL450",r.WGSL="WGSL"})(My||(My={}));var NPe="__DefineValuePlaceholder__";function hk(r){return typeof r=="number"}function Iu(r){return r===void 0?0:r>360||r<-360?r%360:r}function Dd(r,t,e){return hk(r)?Wr(r,t,e):r.length===3?bu(r):Wr(r[0],r[1],r[2])}var QV=function(){function r(t,e){ar(this,r),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=t,this.matrix=ace(e.matrix),this.right=bu(e.right),this.up=bu(e.up),this.forward=bu(e.forward),this.position=bu(e.position),this.focalPoint=bu(e.focalPoint),this.distanceVector=bu(e.distanceVector),this.azimuth=e.azimuth,this.elevation=e.elevation,this.roll=e.roll,this.relAzimuth=e.relAzimuth,this.relElevation=e.relElevation,this.relRoll=e.relRoll,this.dollyingStep=e.dollyingStep,this.distance=e.distance}return br(r,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(e){e.matrix=aT(e.matrix,this.matrix),e.right=ja(e.right,this.right),e.up=ja(e.up,this.up),e.forward=ja(e.forward,this.forward),e.position=ja(e.position,this.position),e.focalPoint=ja(e.focalPoint,this.focalPoint),e.distanceVector=ja(e.distanceVector,this.distanceVector),e.azimuth=this.azimuth,e.elevation=this.elevation,e.roll=this.roll,e.relAzimuth=this.relAzimuth,e.relElevation=this.relElevation,e.relRoll=this.relRoll,e.dollyingStep=this.dollyingStep,e.distance=this.distance}}]),r}(),JV,eH,tH,vk,rH,nH,iH,Hn;(function(r){r.ORBITING="ORBITING",r.EXPLORING="EXPLORING",r.TRACKING="TRACKING"})(Hn||(Hn={}));var Xw;(function(r){r.DEFAULT="DEFAULT",r.ROTATIONAL="ROTATIONAL",r.TRANSLATIONAL="TRANSLATIONAL",r.CINEMATIC="CINEMATIC"})(Xw||(Xw={}));var Rd;(function(r){r.ORTHOGRAPHIC="ORTHOGRAPHIC",r.PERSPECTIVE="PERSPECTIVE"})(Rd||(Rd={}));var Pu=Math.PI/180,Gc=180/Math.PI,aH=(JV=Tn(),eH=hr(mt.InteractorService),JV(tH=(vk=(iH=nH=function(){function r(){ar(this,r),this.matrix=Ro(),this.right=Wr(1,0,0),this.up=Wr(0,1,0),this.forward=Wr(0,0,1),this.position=Wr(0,0,1),this.focalPoint=Wr(0,0,0),this.distanceVector=Wr(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.rotateWorld=!1,fr(this,"interactor",rH,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=Ro(),this.view=void 0,this.following=void 0,this.type=Hn.EXPLORING,this.trackingMode=Xw.DEFAULT,this.projectionMode=Rd.PERSPECTIVE,this.frustum=new rPe,this.landmarks=[],this.landmarkAnimationID=void 0}return br(r,[{key:"clone",value:function(){var e=new r;return e.setType(this.type,void 0),e.interactor=this.interactor,e}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(e,n){return this.type=e,this.type===Hn.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Hn.TRACKING&&n!==void 0&&this.setTrackingMode(n),this}},{key:"setProjectionMode",value:function(e){return this.projectionMode=e,this}},{key:"setTrackingMode",value:function(e){if(this.type!==Hn.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=e,this}},{key:"setWorldRotation",value:function(e){this.rotateWorld=e,this._getAngles()}},{key:"getViewTransform",value:function(){return jx(Ro(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(e){return this.matrix=e,this._update(),this}},{key:"setAspect",value:function(e){return this.setPerspective(this.near,this.far,this.fov,e),this}},{key:"setViewOffset",value:function(e,n,i,a,o,s){return this.aspect=e/n,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=a,this.view.width=o,this.view.height=s,this.projectionMode===Rd.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Rd.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(e,n,i,a){return this.projectionMode=Rd.PERSPECTIVE,this.fov=i,this.near=e,this.far=n,this.aspect=a,cce(this.perspective,this.fov*Pu,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(e,n,i,a,o,s){this.projectionMode=Rd.ORTHOGRAPHIC,this.rright=n,this.left=e,this.top=i,this.bottom=a,this.near=o,this.far=s;var l=(this.rright-this.left)/(2*this.zoom),u=(this.top-this.bottom)/(2*this.zoom),c=(this.rright+this.left)/2,f=(this.top+this.bottom)/2,d=c-l,h=c+l,v=f+u,p=f-u;if(this.view!==void 0&&this.view.enabled){var g=(this.rright-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=g*this.view.offsetX,h=d+g*this.view.width,v-=m*this.view.offsetY,p=v-m*this.view.height}return dce(this.perspective,d,h,v,p,o,s),this}},{key:"setPosition",value:function(e,n,i){return this._setPosition(e,n,i),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(e,n,i){var a=Wr(0,1,0);if(this.focalPoint=Dd(e,n,i),this.trackingMode===Xw.CINEMATIC){var o=oT(Fn(),this.focalPoint,this.position);e=o[0],n=o[1],i=o[2];var s=Yx(o),l=Math.asin(n/s)*Gc,u=90+Math.atan2(i,e)*Gc,c=Ro();sce(c,c,u*Pu),oce(c,c,l*Pu),a=lT(Fn(),[0,1,0],c)}return jx(this.matrix,hce(Ro(),this.position,this.focalPoint,a)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(e){if(!(this.distance===e||e<0)){this.distance=e,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var n=Fn();e=this.distance;var i=this.forward,a=this.focalPoint;return n[0]=e*i[0]+a[0],n[1]=e*i[1]+a[1],n[2]=e*i[2]+a[2],this._setPosition(n),this}}},{key:"setMaxDistance",value:function(e){return this.maxDistance=e,this}},{key:"setMinDistance",value:function(e){return this.minDistance=e,this}},{key:"changeAzimuth",value:function(e){return this.setAzimuth(this.azimuth+e),this}},{key:"changeElevation",value:function(e){return this.setElevation(this.elevation+e),this}},{key:"changeRoll",value:function(e){return this.setRoll(this.roll+e),this}},{key:"setAzimuth",value:function(e){return this.azimuth=Iu(e),this.computeMatrix(),this._getAxes(),this.type===Hn.ORBITING||this.type===Hn.EXPLORING?this._getPosition():this.type===Hn.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(e){return this.elevation=Iu(e),this.computeMatrix(),this._getAxes(),this.type===Hn.ORBITING||this.type===Hn.EXPLORING?this._getPosition():this.type===Hn.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(e){return this.roll=Iu(e),this.computeMatrix(),this._getAxes(),this.type===Hn.ORBITING||this.type===Hn.EXPLORING?this._getPosition():this.type===Hn.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(e,n,i){if(this.type===Hn.EXPLORING){e=Iu(e),n=Iu(n),i=Iu(i);var a=rd(ma(),[1,0,0],(this.rotateWorld?1:-1)*n*Pu),o=rd(ma(),[0,1,0],(this.rotateWorld?1:-1)*e*Pu),s=rd(ma(),[0,0,1],i*Pu),l=ks(ma(),o,a);l=ks(ma(),l,s);var u=z3(Ro(),l);dm(this.matrix,this.matrix,[0,0,-this.distance]),ed(this.matrix,this.matrix,u),dm(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+n)>90)return;this.relElevation=Iu(n),this.relAzimuth=Iu(e),this.relRoll=Iu(i),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===Hn.ORBITING||this.type===Hn.EXPLORING?this._getPosition():this.type===Hn.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(e,n){var i=Dd(e,n,0),a=bu(this.position);return xu(a,a,pm(Fn(),this.right,i[0])),xu(a,a,pm(Fn(),this.up,i[1])),this._setPosition(a),this}},{key:"dolly",value:function(e){var n=this.forward,i=bu(this.position),a=e*this.dollyingStep,o=this.distance+e*this.dollyingStep;return a=Math.max(Math.min(o,this.maxDistance),this.minDistance)-this.distance,i[0]+=a*n[0],i[1]+=a*n[1],i[2]+=a*n[2],this._setPosition(i),this.type===Hn.ORBITING||this.type===Hn.EXPLORING?this._getDistance():this.type===Hn.TRACKING&&xu(this.focalPoint,i,this.distanceVector),this}},{key:"createLandmark",value:function(e,n){var i=this.clone();i.setPosition(n.position),i.setFocalPoint(n.focalPoint),n.roll!==void 0&&i.setRoll(n.roll);var a=new QV(e,i);return this.landmarks.push(a),a}},{key:"setLandmark",value:function(e){var n=new QV(e,this);return this.landmarks.push(n),this}},{key:"gotoLandmark",value:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,a=this.landmarks.find(function(f){return f.name===e});if(a){if(i===0){a.retrieve(this);return}this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var o=a.getPosition(),s=a.getFocalPoint(),l=a.getRoll(),u,c=function f(d){u===void 0&&(u=d);var h=d-u,v=(1-Math.cos(h/i*Math.PI))/2,p=Fn(),g=Fn(),m=0;td(p,n.focalPoint,s,v),td(g,n.position,o,v),m=n.roll*(1-v)+l*v,n.setFocalPoint(p),n.setPosition(g),n.setRoll(m),n.computeMatrix();var y=G3(p,s)+G3(g,o);if(!(y>.01)){n.setFocalPoint(p),n.setPosition(g),n.setRoll(m),n.computeMatrix(),n.interactor.connect();return}h<i&&(n.landmarkAnimationID=window.requestAnimationFrame(f))};window.requestAnimationFrame(c)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var e,n,i=rd(ma(),[0,0,1],this.roll*Pu);$3(this.matrix),e=rd(ma(),[1,0,0],(this.rotateWorld&&this.type!==Hn.TRACKING||this.type===Hn.TRACKING?1:-1)*this.elevation*Pu),n=rd(ma(),[0,1,0],(this.rotateWorld&&this.type!==Hn.TRACKING||this.type===Hn.TRACKING?1:-1)*this.azimuth*Pu);var a=ks(ma(),n,e);a=ks(ma(),a,i);var o=z3(Ro(),a);this.type===Hn.ORBITING||this.type===Hn.EXPLORING?(dm(this.matrix,this.matrix,this.focalPoint),ed(this.matrix,this.matrix,o),dm(this.matrix,this.matrix,[0,0,this.distance])):this.type===Hn.TRACKING&&(dm(this.matrix,this.matrix,this.position),ed(this.matrix,this.matrix,o))}},{key:"_setPosition",value:function(e,n,i){this.position=Dd(e,n,i);var a=this.matrix;a[12]=this.position[0],a[13]=this.position[1],a[14]=this.position[2],a[15]=1}},{key:"_getAxes",value:function(){ja(this.right,Dd(ym(mm(),[1,0,0,0],this.matrix))),ja(this.up,Dd(ym(mm(),[0,1,0,0],this.matrix))),ja(this.forward,Dd(ym(mm(),[0,0,1,0],this.matrix))),gm(this.right,this.right),gm(this.up,this.up),gm(this.forward,this.forward)}},{key:"_getAngles",value:function(){var e=this.distanceVector[0],n=this.distanceVector[1],i=this.distanceVector[2],a=Yx(this.distanceVector);if(a===0){this.elevation=0,this.azimuth=0;return}this.type===Hn.TRACKING?(this.elevation=Math.asin(n/a)*Gc,this.azimuth=Math.atan2(-e,-i)*Gc):this.rotateWorld?(this.elevation=Math.asin(n/a)*Gc,this.azimuth=Math.atan2(-e,-i)*Gc):(this.elevation=-Math.asin(n/a)*Gc,this.azimuth=-Math.atan2(-e,-i)*Gc)}},{key:"_getPosition",value:function(){ja(this.position,Dd(ym(mm(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){kl(this.distanceVector,[0,0,-this.distance],R3(wv(),this.matrix)),xu(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=oT(Fn(),this.focalPoint,this.position),this.distance=Yx(this.distanceVector),this.dollyingStep=this.distance/100}}]),r}(),nH.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},iH),rH=dr(vk.prototype,"interactor",[eH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vk))||tH),oH,sH,lH,pk,uH,ky,cH,Uc=(oH=Tn(),sH=hr(mt.GeometryComponentManager),oH(lH=(pk=(cH=ky=function(){function r(){ar(this,r),this.config=void 0,fr(this,"geometry",uH,this),this.entity=void 0,this.component=void 0}return br(r,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(e){this.config=e}},{key:"setEntity",value:function(e){this.entity=e,this.component=this.geometry.create(e),this.component.entity=e,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),r}(),ky.BOX="box",ky.SPHERE="sphere",ky.PLANE="plane",ky.MERGED="merged",cH),uH=dr(pk.prototype,"geometry",[sH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pk))||lH),Xn=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.TextureCompressionBC="texture-compression-bc"}(t.ExtensionName||(t.ExtensionName={})),function(e){e.ClampToEdge="clamp-to-edge",e.Repeat="repeat",e.MirrorRepeat="mirror-repeat"}(t.AddressMode||(t.AddressMode={})),function(e){e.UniformBuffer="uniform-buffer",e.StorageBuffer="storage-buffer",e.ReadonlyStorageBuffer="readonly-storage-buffer",e.Sampler="sampler",e.ComparisonSampler="comparison-sampler",e.SampledTexture="sampled-texture",e.ReadonlyStorageTexture="readonly-storage-texture",e.WriteonlyStorageTexture="writeonly-storage-texture"}(t.BindingType||(t.BindingType={})),function(e){e.Zero="zero",e.One="one",e.SrcColor="src-color",e.OneMinusSrcColor="one-minus-src-color",e.SrcAlpha="src-alpha",e.OneMinusSrcAlpha="one-minus-src-alpha",e.DstColor="dst-color",e.OneMinusDstColor="one-minus-dst-color",e.DstAlpha="dst-alpha",e.OneMinusDstAlpha="one-minus-dst-alpha",e.SrcAlphaSaturated="src-alpha-saturated",e.BlendColor="blend-color",e.OneMinusBlendColor="one-minus-blend-color"}(t.BlendFactor||(t.BlendFactor={})),function(e){e.Add="add",e.Subtract="subtract",e.ReverseSubtract="reverse-subtract",e.Min="min",e.Max="max"}(t.BlendOperation||(t.BlendOperation={})),function(e){e.Never="never",e.Less="less",e.Equal="equal",e.LessEqual="less-equal",e.Greater="greater",e.NotEqual="not-equal",e.GreaterEqual="greater-equal",e.Always="always"}(t.CompareFunction||(t.CompareFunction={})),function(e){e.None="none",e.Front="front",e.Back="back"}(t.CullMode||(t.CullMode={})),function(e){e.Nearest="nearest",e.Linear="linear"}(t.FilterMode||(t.FilterMode={})),function(e){e.CCW="ccw",e.CW="cw"}(t.FrontFace||(t.FrontFace={})),function(e){e.Uint16="uint16",e.Uint32="uint32"}(t.IndexFormat||(t.IndexFormat={})),function(e){e.Vertex="vertex",e.Instance="instance"}(t.InputStepMode||(t.InputStepMode={})),function(e){e.Load="load"}(t.LoadOp||(t.LoadOp={})),function(e){e.PointList="point-list",e.LineList="line-list",e.LineStrip="line-strip",e.TriangleList="triangle-list",e.TriangleStrip="triangle-strip"}(t.PrimitiveTopology||(t.PrimitiveTopology={})),function(e){e.Keep="keep",e.Zero="zero",e.Replace="replace",e.Invert="invert",e.IncrementClamp="increment-clamp",e.DecrementClamp="decrement-clamp",e.IncrementWrap="increment-wrap",e.DecrementWrap="decrement-wrap"}(t.StencilOperation||(t.StencilOperation={})),function(e){e.Store="store",e.Clear="clear"}(t.StoreOp||(t.StoreOp={})),function(e){e.E1d="1d",e.E2d="2d",e.E3d="3d"}(t.TextureDimension||(t.TextureDimension={})),function(e){e.R8Unorm="r8unorm",e.R8Snorm="r8snorm",e.R8Uint="r8uint",e.R8Sint="r8sint",e.R16Uint="r16uint",e.R16Sint="r16sint",e.R16Float="r16float",e.RG8Unorm="rg8unorm",e.RG8Snorm="rg8snorm",e.RG8Uint="rg8uint",e.RG8Sint="rg8sint",e.R32Uint="r32uint",e.R32Sint="r32sint",e.R32Float="r32float",e.RG16Uint="rg16uint",e.RG16Sint="rg16sint",e.RG16Float="rg16float",e.RGBA8Unorm="rgba8unorm",e.RGBA8UnormSRGB="rgba8unorm-srgb",e.RGBA8Snorm="rgba8snorm",e.RGBA8Uint="rgba8uint",e.RGBA8Sint="rgba8sint",e.BGRA8Unorm="bgra8unorm",e.BGRA8UnormSRGB="bgra8unorm-srgb",e.RGB10A2Unorm="rgb10a2unorm",e.RG11B10Float="rg11b10float",e.RG32Uint="rg32uint",e.RG32Sint="rg32sint",e.RG32Float="rg32float",e.RGBA16Uint="rgba16uint",e.RGBA16Sint="rgba16sint",e.RGBA16Float="rgba16float",e.RGBA32Uint="rgba32uint",e.RGBA32Sint="rgba32sint",e.RGBA32Float="rgba32float",e.Depth32Float="depth32float",e.Depth24Plus="depth24plus",e.Depth24PlusStencil8="depth24plus-stencil8"}(t.TextureFormat||(t.TextureFormat={})),function(e){e.Float="float",e.Sint="sint",e.Uint="uint"}(t.TextureComponentType||(t.TextureComponentType={})),function(e){e.E1d="1d",e.E2d="2d",e.E2dArray="2d-array",e.Cube="cube",e.CubeArray="cube-array",e.E3d="3d"}(t.TextureViewDimension||(t.TextureViewDimension={})),function(e){e.Uchar2="uchar2",e.Uchar4="uchar4",e.Char2="char2",e.Char4="char4",e.Uchar2Norm="uchar2norm",e.Uchar4Norm="uchar4norm",e.Char2Norm="char2norm",e.Char4Norm="char4norm",e.Ushort2="ushort2",e.Ushort4="ushort4",e.Short2="short2",e.Short4="short4",e.Ushort2Norm="ushort2norm",e.Ushort4Norm="ushort4norm",e.Short2Norm="short2norm",e.Short4Norm="short4norm",e.Half2="half2",e.Half4="half4",e.Float="float",e.Float2="float2",e.Float3="float3",e.Float4="float4",e.Uint="uint",e.Uint2="uint2",e.Uint3="uint3",e.Uint4="uint4",e.Int="int",e.Int2="int2",e.Int3="int3",e.Int4="int4"}(t.VertexFormat||(t.VertexFormat={})),function(e){e.All="all",e.StencilOnly="stencil-only",e.DepthOnly="depth-only"}(t.TextureAspect||(t.TextureAspect={})),function(e){e.Error="error",e.Warning="warning",e.Info="info"}(t.CompilationMessageType||(t.CompilationMessageType={})),function(e){e.Occlusion="occlusion"}(t.QueryType||(t.QueryType={})),function(e){e[e.MapRead=1]="MapRead",e[e.MapWrite=2]="MapWrite",e[e.CopySrc=4]="CopySrc",e[e.CopyDst=8]="CopyDst",e[e.Index=16]="Index",e[e.Vertex=32]="Vertex",e[e.Uniform=64]="Uniform",e[e.Storage=128]="Storage",e[e.Indirect=256]="Indirect",e[e.QueryResolve=512]="QueryResolve"}(t.BufferUsage||(t.BufferUsage={})),function(e){e[e.Red=1]="Red",e[e.Green=2]="Green",e[e.Blue=4]="Blue",e[e.Alpha=8]="Alpha",e[e.All=15]="All"}(t.ColorWrite||(t.ColorWrite={})),function(e){e[e.Vertex=1]="Vertex",e[e.Fragment=2]="Fragment",e[e.Compute=4]="Compute"}(t.ShaderStage||(t.ShaderStage={})),function(e){e[e.CopySrc=1]="CopySrc",e[e.CopyDst=2]="CopyDst",e[e.Sampled=4]="Sampled",e[e.Storage=8]="Storage",e[e.OutputAttachment=16]="OutputAttachment"}(t.TextureUsage||(t.TextureUsage={})),function(e){e[e.Read=1]="Read",e[e.Write=2]="Write"}(t.MapMode||(t.MapMode={}))});hn(Xn);Xn.ExtensionName;Xn.AddressMode;var gk=Xn.BindingType,us=Xn.BlendFactor,Iy=Xn.BlendOperation,Du=Xn.CompareFunction,qw=Xn.CullMode;Xn.FilterMode;var BPe=Xn.FrontFace,$Pe=Xn.IndexFormat;Xn.InputStepMode;var np=Xn.LoadOp,Od=Xn.PrimitiveTopology,mk=Xn.StencilOperation,Ld=Xn.StoreOp,yk=Xn.TextureDimension,ip=Xn.TextureFormat;Xn.TextureComponentType;var zPe=Xn.TextureViewDimension;Xn.VertexFormat;var GPe=Xn.TextureAspect;Xn.CompilationMessageType;Xn.QueryType;var No=Xn.BufferUsage,UPe=Xn.ColorWrite,Kw=Xn.ShaderStage,Fd=Xn.TextureUsage,VPe=Xn.MapMode;function fH(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var HPe={}.toString,WPe=function(t,e){return HPe.call(t)==="[object "+e+"]"},jPe=function(r){return Array.isArray?Array.isArray(r):WPe(r,"Array")},YPe=9007199254740991,XPe="[object Arguments]",qPe="[object Array]",KPe="[object Boolean]",ZPe="[object Date]",QPe="[object Error]",JPe="[object Function]",eDe="[object Map]",tDe="[object Number]",rDe="[object Object]",nDe="[object RegExp]",iDe="[object Set]",aDe="[object String]",oDe="[object WeakMap]",sDe="[object ArrayBuffer]",lDe="[object DataView]",uDe="[object Float32Array]",cDe="[object Float64Array]",fDe="[object Int8Array]",dDe="[object Int16Array]",hDe="[object Int32Array]",vDe="[object Uint8Array]",pDe="[object Uint8ClampedArray]",gDe="[object Uint16Array]",mDe="[object Uint32Array]",gi={};gi[uDe]=gi[cDe]=gi[fDe]=gi[dDe]=gi[hDe]=gi[vDe]=gi[pDe]=gi[gDe]=gi[mDe]=!0;gi[XPe]=gi[qPe]=gi[sDe]=gi[KPe]=gi[lDe]=gi[ZPe]=gi[QPe]=gi[JPe]=gi[eDe]=gi[tDe]=gi[rDe]=gi[nDe]=gi[iDe]=gi[aDe]=gi[oDe]=!1;var yDe=Object.prototype,bDe=yDe.toString;function xDe(r){return SDe(r)&&wDe(r.length)&&!!gi[bDe.call(r)]}function wDe(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=YPe}function SDe(r){return!!r&&$l(r)==="object"}var dH=xDe,hH,vH,pH,gH,Zw,mH,yH,bH;function xH(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function wH(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?xH(Object(e),!0).forEach(function(n){lt(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):xH(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}var SH=(hH=Tn(),vH=hr(mt.RenderEngine),pH=hr(mt.ConfigService),hH(gH=(Zw=(bH=function(){function r(){ar(this,r),fr(this,"engine",mH,this),fr(this,"configService",yH,this),this.entity=Nl(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return br(r,[{key:"init",value:function(){var e=this.configService.get(),n=e.canvas,i=e.engineOptions;this.initPromise=this.engine.init(wH({canvas:n||fH(),swapChainFormat:ip.BGRA8Unorm,antialiasing:!1},i))}},{key:"setBundle",value:function(e){this.compiledBundle=JSON.parse(JSON.stringify(e))}},{key:"setDispatch",value:function(e){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=e),this}},{key:"setMaxIteration",value:function(e){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=e),this}},{key:"setBinding",value:function(e,n){var i=this;if(typeof e=="string"){var a=hk(n)||dH(n)||jPe(n);if(this.compiledBundle&&this.compiledBundle.context){var o=this.compiledBundle.context.defines.find(function(l){return l.name===e});if(o)return o.value=n,this;var s=this.compiledBundle.context.uniforms.find(function(l){return l.name===e});s&&(a?(s.data=n,s.isReferer=!1,s.storageClass===zc.Uniform?this.model&&this.model.updateUniform(e,n):this.model&&this.model.updateBuffer(e,n)):(s.isReferer=!0,s.data=n))}}else Object.keys(e).forEach(function(l){i.setBinding(l,e[l])});return this}},{key:"execute",value:function(){var t=Sn(Qt.mark(function n(){var i=this,a,o,s=arguments;return Qt.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a=s.length>0&&s[0]!==void 0?s[0]:1,!this.dirty){u.next=6;break}return this.compiledBundle.context&&(a>1?this.compiledBundle.context.maxIteration=a:this.compiledBundle.context.maxIteration++),u.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(c){var f=c.isReferer;return f}).forEach(function(c){var f=c.data,d=c.name;i.model.confirmInput(f.model,d)}),o=0;o<a;o++)this.model.run();return this.engine.endFrame(),u.abrupt("return",this);case 12:case"end":return u.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"getOutput",value:function(){var t=Sn(Qt.mark(function n(){return Qt.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",this.model.readData());case 1:case"end":return a.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"compile",value:function(){var t=Sn(Qt.mark(function n(){var i,a,o;return Qt.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.initPromise;case 2:return i=wH({},this.compiledBundle.context),a=this.engine.supportWebGPU?this.engine.useWGSL?My.WGSL:My.GLSL450:My.GLSL100,o=this.compiledBundle.shaders[a],i.defines.filter(function(u){return u.runtime}).forEach(function(u){var c="".concat(NPe).concat(u.name);o=o.replace(c,"".concat(u.value))}),i.shader=o,i.uniforms.forEach(function(u){if(!u.data&&u.storageClass===zc.StorageBuffer){var c=1;u.type===Pd.FloatArray?c=1:u.type===Pd.Vector4FloatArray&&(c=4),u.data=new Float32Array(i.output.length*c).fill(0)}}),this.compiledBundle.context=i,l.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=l.sent;case 12:case"end":return l.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()}]),r}(),bH),mH=dr(Zw.prototype,"engine",[vH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yH=dr(Zw.prototype,"configService",[pH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zw))||gH),CH,EH,_H,bk,TH,AH,MH,kH=(CH=Tn(),EH=hr(mt.MaterialComponentManager),CH(_H=(bk=(MH=AH=function(){function r(){ar(this,r),this.config=void 0,fr(this,"material",TH,this),this.entity=void 0,this.component=void 0}return br(r,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(e){this.config=e}},{key:"setEntity",value:function(e,n){this.entity=e,this.component=this.material.create(e),this.component.entity=e,this.component.type=n,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),r}(),AH.BASIC="basic",MH),TH=dr(bk.prototype,"material",[EH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bk))||_H),IH,PH,DH,RH,OH,LH,FH,ap,NH,BH,$H,zH,Qw,GH,Vc=(IH=Tn(),PH=hr(mt.MeshComponentManager),DH=hr(mt.CullableComponentManager),RH=hr(mt.TransformComponentManager),OH=hr(mt.Systems),LH=Bl(mt.SceneGraphSystem),IH(FH=(ap=(GH=Qw=function(){function r(){ar(this,r),this.attributes={},this.config=void 0,fr(this,"mesh",NH,this),fr(this,"cullable",BH,this),fr(this,"transform",$H,this),fr(this,"sceneGraphSystem",zH,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return br(r,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(e){this.config=e}},{key:"setEntity",value:function(e){this.entity=e,this.cullable.create(e),this.meshComponent=this.mesh.create(e),this.transformComponent=this.transform.create(e),this.onEntityCreated()}},{key:"setMaterial",value:function(e){return this.meshComponent.material=e,this}},{key:"setGeometry",value:function(e){return this.meshComponent.geometry=e,this}},{key:"setAttributes",value:function(e){var n=this;Object.keys(e).forEach(function(i){e[i]!==void 0&&e[i]!==n.attributes[i]&&(n.onAttributeChanged({name:i,data:e[i]}),n.attributes[i]=e[i])})}},{key:"setVisible",value:function(e){var n=this;return this.meshComponent.visible=e,this.meshComponent.children.forEach(function(i){var a=n.mesh.getComponentByEntity(i);a&&(a.visible=e)}),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(e){return this.sceneGraphSystem.attach(this.entity,e.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(e){var n=e.name,i=e.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(n),i)}},{key:"convertAttributeName2UniformName",value:function(e){return e}}]),r}(),Qw.POINT="point",Qw.LINE="line",Qw.GRID="grid",GH),NH=dr(ap.prototype,"mesh",[PH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),BH=dr(ap.prototype,"cullable",[DH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$H=dr(ap.prototype,"transform",[RH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zH=dr(ap.prototype,"sceneGraphSystem",[OH,LH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ap))||FH),CDe=Rr(function(r,t){(function(e,n){r.exports=n()})(Ic,function(){var e=function(N){return N instanceof Uint8Array||N instanceof Uint16Array||N instanceof Uint32Array||N instanceof Int8Array||N instanceof Int16Array||N instanceof Int32Array||N instanceof Float32Array||N instanceof Float64Array||N instanceof Uint8ClampedArray},n=function(N,J){for(var ve=Object.keys(J),Xe=0;Xe<ve.length;++Xe)N[ve[Xe]]=J[ve[Xe]];return N},i=`
`;function a(N){return typeof atob!="undefined"?atob(N):"base64:"+N}function o(N){var J=new Error("(regl) "+N);throw console.error(J),J}function s(N,J){N||o(J)}function l(N){return N?": "+N:""}function u(N,J,ve){N in J||o("unknown parameter ("+N+")"+l(ve)+". possible values: "+Object.keys(J).join())}function c(N,J){e(N)||o("invalid parameter type"+l(J)+". must be a typed array")}function f(N,J){switch(J){case"number":return typeof N=="number";case"object":return typeof N=="object";case"string":return typeof N=="string";case"boolean":return typeof N=="boolean";case"function":return typeof N=="function";case"undefined":return typeof N=="undefined";case"symbol":return typeof N=="symbol"}}function d(N,J,ve){f(N,J)||o("invalid parameter type"+l(ve)+". expected "+J+", got "+typeof N)}function h(N,J){N>=0&&(N|0)===N||o("invalid parameter type, ("+N+")"+l(J)+". must be a nonnegative integer")}function v(N,J,ve){J.indexOf(N)<0&&o("invalid value"+l(ve)+". must be one of: "+J)}var p=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function g(N){Object.keys(N).forEach(function(J){p.indexOf(J)<0&&o('invalid regl constructor argument "'+J+'". must be one of '+p)})}function m(N,J){for(N=N+"";N.length<J;)N=" "+N;return N}function y(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function b(N,J){this.number=N,this.line=J,this.errors=[]}function x(N,J,ve){this.file=N,this.line=J,this.message=ve}function w(){var N=new Error,J=(N.stack||N).toString(),ve=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(J);if(ve)return ve[1];var Xe=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(J);return Xe?Xe[1]:"unknown"}function S(){var N=new Error,J=(N.stack||N).toString(),ve=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(J);if(ve)return ve[1];var Xe=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(J);return Xe?Xe[1]:"unknown"}function C(N,J){var ve=N.split(`
`),Xe=1,ct=0,Ye={unknown:new y,0:new y};Ye.unknown.name=Ye[0].name=J||w(),Ye.unknown.lines.push(new b(0,""));for(var et=0;et<ve.length;++et){var yt=ve[et],wt=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(yt);if(wt)switch(wt[1]){case"line":var _t=/(\d+)(\s+\d+)?/.exec(wt[2]);_t&&(Xe=_t[1]|0,_t[2]&&(ct=_t[2]|0,ct in Ye||(Ye[ct]=new y)));break;case"define":var St=/SHADER_NAME(_B64)?\s+(.*)$/.exec(wt[2]);St&&(Ye[ct].name=St[1]?a(St[2]):St[2]);break}Ye[ct].lines.push(new b(Xe++,yt))}return Object.keys(Ye).forEach(function(kt){var Lt=Ye[kt];Lt.lines.forEach(function(bt){Lt.index[bt.number]=bt})}),Ye}function _(N){var J=[];return N.split(`
`).forEach(function(ve){if(!(ve.length<5)){var Xe=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(ve);Xe?J.push(new x(Xe[1]|0,Xe[2]|0,Xe[3].trim())):ve.length>0&&J.push(new x("unknown",0,ve))}}),J}function T(N,J){J.forEach(function(ve){var Xe=N[ve.file];if(Xe){var ct=Xe.index[ve.line];if(ct){ct.errors.push(ve),Xe.hasErrors=!0;return}}N.unknown.hasErrors=!0,N.unknown.lines[0].errors.push(ve)})}function E(N,J,ve,Xe,ct){if(!N.getShaderParameter(J,N.COMPILE_STATUS)){var Ye=N.getShaderInfoLog(J),et=Xe===N.FRAGMENT_SHADER?"fragment":"vertex";L(ve,"string",et+" shader source must be a string",ct);var yt=C(ve,ct),wt=_(Ye);T(yt,wt),Object.keys(yt).forEach(function(_t){var St=yt[_t];if(!St.hasErrors)return;var kt=[""],Lt=[""];function bt(It,Fe){kt.push(It),Lt.push(Fe||"")}bt("file number "+_t+": "+St.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),St.lines.forEach(function(It){if(It.errors.length>0){bt(m(It.number,4)+"|  ","background-color:yellow; font-weight:bold"),bt(It.line+i,"color:red; background-color:yellow; font-weight:bold");var Fe=0;It.errors.forEach(function(tt){var Et=tt.message,zt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Et);if(zt){var vt=zt[1];switch(Et=zt[2],vt){case"assign":vt="=";break}Fe=Math.max(It.line.indexOf(vt,Fe),0)}else Fe=0;bt(m("| ",6)),bt(m("^^^",Fe+3)+i,"font-weight:bold"),bt(m("| ",6)),bt(Et+i,"font-weight:bold")}),bt(m("| ",6)+i)}else bt(m(It.number,4)+"|  "),bt(It.line+i,"color:red")}),typeof document!="undefined"&&!window.chrome?(Lt[0]=kt.join("%c"),console.log.apply(console,Lt)):console.log(kt.join(""))}),s.raise("Error compiling "+et+" shader, "+yt[0].name)}}function M(N,J,ve,Xe,ct){if(!N.getProgramParameter(J,N.LINK_STATUS)){var Ye=N.getProgramInfoLog(J),et=C(ve,ct),yt=C(Xe,ct),wt='Error linking program with vertex shader, "'+yt[0].name+'", and fragment shader "'+et[0].name+'"';typeof document!="undefined"?console.log("%c"+wt+i+"%c"+Ye,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(wt+i+Ye),s.raise(wt)}}function k(N){N._commandRef=w()}function P(N,J,ve,Xe){k(N);function ct(wt){return wt?Xe.id(wt):0}N._fragId=ct(N.static.frag),N._vertId=ct(N.static.vert);function Ye(wt,_t){Object.keys(_t).forEach(function(St){wt[Xe.id(St)]=!0})}var et=N._uniformSet={};Ye(et,J.static),Ye(et,J.dynamic);var yt=N._attributeSet={};Ye(yt,ve.static),Ye(yt,ve.dynamic),N._hasCount="count"in N.static||"count"in N.dynamic||"elements"in N.static||"elements"in N.dynamic}function F(N,J){var ve=S();o(N+" in command "+(J||w())+(ve==="unknown"?"":" called from "+ve))}function $(N,J,ve){N||F(J,ve||w())}function R(N,J,ve,Xe){N in J||F("unknown parameter ("+N+")"+l(ve)+". possible values: "+Object.keys(J).join(),Xe||w())}function L(N,J,ve,Xe){f(N,J)||F("invalid parameter type"+l(ve)+". expected "+J+", got "+typeof N,Xe||w())}function O(N){N()}function B(N,J,ve){N.texture?v(N.texture._texture.internalformat,J,"unsupported texture format for attachment"):v(N.renderbuffer._renderbuffer.format,ve,"unsupported renderbuffer format for attachment")}var U=33071,W=9728,X=9984,ae=9985,Z=9986,Y=9987,fe=5120,le=5121,ue=5122,Ee=5123,De=5124,je=5125,ke=5126,D=32819,z=32820,H=33635,he=34042,te=36193,ge={};ge[fe]=ge[le]=1,ge[ue]=ge[Ee]=ge[te]=ge[H]=ge[D]=ge[z]=2,ge[De]=ge[je]=ge[ke]=ge[he]=4;function Qe(N,J){return N===z||N===D||N===H?2:N===he?4:ge[N]*J}function Ve(N){return!(N&N-1)&&!!N}function Ie(N,J,ve){var Xe,ct=J.width,Ye=J.height,et=J.channels;s(ct>0&&ct<=ve.maxTextureSize&&Ye>0&&Ye<=ve.maxTextureSize,"invalid texture shape"),(N.wrapS!==U||N.wrapT!==U)&&s(Ve(ct)&&Ve(Ye),"incompatible wrap mode for texture, both width and height must be power of 2"),J.mipmask===1?ct!==1&&Ye!==1&&s(N.minFilter!==X&&N.minFilter!==Z&&N.minFilter!==ae&&N.minFilter!==Y,"min filter requires mipmap"):(s(Ve(ct)&&Ve(Ye),"texture must be a square power of 2 to support mipmapping"),s(J.mipmask===(ct<<1)-1,"missing or incomplete mipmap data")),J.type===ke&&(ve.extensions.indexOf("oes_texture_float_linear")<0&&s(N.minFilter===W&&N.magFilter===W,"filter not supported, must enable oes_texture_float_linear"),s(!N.genMipmaps,"mipmap generation not supported with float textures"));var yt=J.images;for(Xe=0;Xe<16;++Xe)if(yt[Xe]){var wt=ct>>Xe,_t=Ye>>Xe;s(J.mipmask&1<<Xe,"missing mipmap data");var St=yt[Xe];if(s(St.width===wt&&St.height===_t,"invalid shape for mip images"),s(St.format===J.format&&St.internalformat===J.internalformat&&St.type===J.type,"incompatible type for mip image"),!St.compressed)if(St.data){var kt=Math.ceil(Qe(St.type,et)*wt/St.unpackAlignment)*St.unpackAlignment;s(St.data.byteLength===kt*_t,"invalid data for image, buffer size is inconsistent with image format")}else St.element||St.copy}else N.genMipmaps||s((J.mipmask&1<<Xe)==0,"extra mipmap data");J.compressed&&s(!N.genMipmaps,"mipmap generation for compressed images not supported")}function Be(N,J,ve,Xe){var ct=N.width,Ye=N.height,et=N.channels;s(ct>0&&ct<=Xe.maxTextureSize&&Ye>0&&Ye<=Xe.maxTextureSize,"invalid texture shape"),s(ct===Ye,"cube map must be square"),s(J.wrapS===U&&J.wrapT===U,"wrap mode not supported by cube map");for(var yt=0;yt<ve.length;++yt){var wt=ve[yt];s(wt.width===ct&&wt.height===Ye,"inconsistent cube map face shape"),J.genMipmaps&&(s(!wt.compressed,"can not generate mipmap for compressed textures"),s(wt.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var _t=wt.images,St=0;St<16;++St){var kt=_t[St];if(kt){var Lt=ct>>St,bt=Ye>>St;s(wt.mipmask&1<<St,"missing mipmap data"),s(kt.width===Lt&&kt.height===bt,"invalid shape for mip images"),s(kt.format===N.format&&kt.internalformat===N.internalformat&&kt.type===N.type,"incompatible type for mip image"),kt.compressed||(kt.data?s(kt.data.byteLength===Lt*bt*Math.max(Qe(kt.type,et),kt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):kt.element||kt.copy)}}}}var V=n(s,{optional:O,raise:o,commandRaise:F,command:$,parameter:u,commandParameter:R,constructor:g,type:d,commandType:L,isTypedArray:c,nni:h,oneOf:v,shaderError:E,linkError:M,callSite:S,saveCommandRef:k,saveDrawInfo:P,framebufferFormat:B,guessCommand:w,texture2D:Ie,textureCube:Be}),j=0,q=0,ee=5,Q=6;function me(N,J){this.id=j++,this.type=N,this.data=J}function He(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function ze(N){if(N.length===0)return[];var J=N.charAt(0),ve=N.charAt(N.length-1);if(N.length>1&&J===ve&&(J==='"'||J==="'"))return['"'+He(N.substr(1,N.length-2))+'"'];var Xe=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(N);if(Xe)return ze(N.substr(0,Xe.index)).concat(ze(Xe[1])).concat(ze(N.substr(Xe.index+Xe[0].length)));var ct=N.split(".");if(ct.length===1)return['"'+He(N)+'"'];for(var Ye=[],et=0;et<ct.length;++et)Ye=Ye.concat(ze(ct[et]));return Ye}function it(N){return"["+ze(N).join("][")+"]"}function we(N,J){return new me(N,it(J+""))}function nt(N){return typeof N=="function"&&!N._reglType||N instanceof me}function st(N,J){if(typeof N=="function")return new me(q,N);if(typeof N=="number"||typeof N=="boolean")return new me(ee,N);if(Array.isArray(N))return new me(Q,N.map((ve,Xe)=>st(ve,J+"["+Xe+"]")));if(N instanceof me)return N;V(!1,"invalid option type in uniform "+J)}var jt={DynamicVariable:me,define:we,isDynamic:nt,unbox:st,accessor:it},Jt={next:typeof requestAnimationFrame=="function"?function(N){return requestAnimationFrame(N)}:function(N){return setTimeout(N,16)},cancel:typeof cancelAnimationFrame=="function"?function(N){return cancelAnimationFrame(N)}:clearTimeout},Ae=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function ut(){var N={"":0},J=[""];return{id:function(ve){var Xe=N[ve];return Xe||(Xe=N[ve]=J.length,J.push(ve),Xe)},str:function(ve){return J[ve]}}}function ur(N,J,ve){var Xe=document.createElement("canvas");n(Xe.style,{border:0,margin:0,padding:0,top:0,left:0}),N.appendChild(Xe),N===document.body&&(Xe.style.position="absolute",n(N.style,{margin:0,padding:0}));function ct(){var yt=window.innerWidth,wt=window.innerHeight;if(N!==document.body){var _t=N.getBoundingClientRect();yt=_t.right-_t.left,wt=_t.bottom-_t.top}Xe.width=ve*yt,Xe.height=ve*wt,n(Xe.style,{width:yt+"px",height:wt+"px"})}var Ye;N!==document.body&&typeof ResizeObserver=="function"?(Ye=new ResizeObserver(function(){setTimeout(ct)}),Ye.observe(N)):window.addEventListener("resize",ct,!1);function et(){Ye?Ye.disconnect():window.removeEventListener("resize",ct),N.removeChild(Xe)}return ct(),{canvas:Xe,onDestroy:et}}function Le(N,J){function ve(Xe){try{return N.getContext(Xe,J)}catch{return null}}return ve("webgl")||ve("experimental-webgl")||ve("webgl-experimental")}function dt(N){return typeof N.nodeName=="string"&&typeof N.appendChild=="function"&&typeof N.getBoundingClientRect=="function"}function Bt(N){return typeof N.drawArrays=="function"||typeof N.drawElements=="function"}function cr(N){return typeof N=="string"?N.split():(V(Array.isArray(N),"invalid extension array"),N)}function $r(N){return typeof N=="string"?(V(typeof document!="undefined","not supported outside of DOM"),document.querySelector(N)):N}function nr(N){var J=N||{},ve,Xe,ct,Ye,et={},yt=[],wt=[],_t=typeof window=="undefined"?1:window.devicePixelRatio,St=!1,kt=function(It){It&&V.raise(It)},Lt=function(){};if(typeof J=="string"?(V(typeof document!="undefined","selector queries only supported in DOM enviroments"),ve=document.querySelector(J),V(ve,"invalid query string for element")):typeof J=="object"?dt(J)?ve=J:Bt(J)?(Ye=J,ct=Ye.canvas):(V.constructor(J),"gl"in J?Ye=J.gl:"canvas"in J?ct=$r(J.canvas):"container"in J&&(Xe=$r(J.container)),"attributes"in J&&(et=J.attributes,V.type(et,"object","invalid context attributes")),"extensions"in J&&(yt=cr(J.extensions)),"optionalExtensions"in J&&(wt=cr(J.optionalExtensions)),"onDone"in J&&(V.type(J.onDone,"function","invalid or missing onDone callback"),kt=J.onDone),"profile"in J&&(St=!!J.profile),"pixelRatio"in J&&(_t=+J.pixelRatio,V(_t>0,"invalid pixel ratio"))):V.raise("invalid arguments to regl"),ve&&(ve.nodeName.toLowerCase()==="canvas"?ct=ve:Xe=ve),!Ye){if(!ct){V(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var bt=ur(Xe||document.body,kt,_t);if(!bt)return null;ct=bt.canvas,Lt=bt.onDestroy}et.premultipliedAlpha===void 0&&(et.premultipliedAlpha=!0),Ye=Le(ct,et)}return Ye?{gl:Ye,canvas:ct,container:Xe,extensions:yt,optionalExtensions:wt,pixelRatio:_t,profile:St,onDone:kt,onDestroy:Lt}:(Lt(),kt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function tn(N,J){var ve={};function Xe(et){V.type(et,"string","extension name must be string");var yt=et.toLowerCase(),wt;try{wt=ve[yt]=N.getExtension(yt)}catch{}return!!wt}for(var ct=0;ct<J.extensions.length;++ct){var Ye=J.extensions[ct];if(!Xe(Ye))return J.onDestroy(),J.onDone('"'+Ye+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return J.optionalExtensions.forEach(Xe),{extensions:ve,restore:function(){Object.keys(ve).forEach(function(et){if(ve[et]&&!Xe(et))throw new Error("(regl): error restoring extension "+et)})}}}function Er(N,J){for(var ve=Array(N),Xe=0;Xe<N;++Xe)ve[Xe]=J(Xe);return ve}var zr=5120,Qr=5121,_n=5122,jn=5123,ii=5124,bn=5125,ai=5126;function Zn(N){for(var J=16;J<=1<<28;J*=16)if(N<=J)return J;return 0}function Br(N){var J,ve;return J=(N>65535)<<4,N>>>=J,ve=(N>255)<<3,N>>>=ve,J|=ve,ve=(N>15)<<2,N>>>=ve,J|=ve,ve=(N>3)<<1,N>>>=ve,J|=ve,J|N>>1}function on(){var N=Er(8,function(){return[]});function J(Ye){var et=Zn(Ye),yt=N[Br(et)>>2];return yt.length>0?yt.pop():new ArrayBuffer(et)}function ve(Ye){N[Br(Ye.byteLength)>>2].push(Ye)}function Xe(Ye,et){var yt=null;switch(Ye){case zr:yt=new Int8Array(J(et),0,et);break;case Qr:yt=new Uint8Array(J(et),0,et);break;case _n:yt=new Int16Array(J(2*et),0,et);break;case jn:yt=new Uint16Array(J(2*et),0,et);break;case ii:yt=new Int32Array(J(4*et),0,et);break;case bn:yt=new Uint32Array(J(4*et),0,et);break;case ai:yt=new Float32Array(J(4*et),0,et);break;default:return null}return yt.length!==et?yt.subarray(0,et):yt}function ct(Ye){ve(Ye.buffer)}return{alloc:J,free:ve,allocType:Xe,freeType:ct}}var mr=on();mr.zero=on();var ln=3408,fi=3410,po=3411,Ua=3412,ys=3413,hl=3414,vl=3415,pl=33901,_f=33902,Oh=3379,bg=3386,xg=34921,wg=36347,tc=36348,Ko=35661,rc=35660,zn=34930,Va=36349,ki=34076,ko=34024,Ws=7936,Lh=7937,Fh=7938,Tf=35724,Nh=34047,Bh=36063,$h=34852,Tb=3553,hO=34067,Fre=34069,Nre=33984,Sg=6408,X2=5126,vO=5121,q2=36160,Bre=36053,$re=36064,zre=16384,Gre=function(N,J){var ve=1;J.ext_texture_filter_anisotropic&&(ve=N.getParameter(Nh));var Xe=1,ct=1;J.webgl_draw_buffers&&(Xe=N.getParameter($h),ct=N.getParameter(Bh));var Ye=!!J.oes_texture_float;if(Ye){var et=N.createTexture();N.bindTexture(Tb,et),N.texImage2D(Tb,0,Sg,1,1,0,Sg,X2,null);var yt=N.createFramebuffer();if(N.bindFramebuffer(q2,yt),N.framebufferTexture2D(q2,$re,Tb,et,0),N.bindTexture(Tb,null),N.checkFramebufferStatus(q2)!==Bre)Ye=!1;else{N.viewport(0,0,1,1),N.clearColor(1,0,0,1),N.clear(zre);var wt=mr.allocType(X2,4);N.readPixels(0,0,1,1,Sg,X2,wt),N.getError()?Ye=!1:(N.deleteFramebuffer(yt),N.deleteTexture(et),Ye=wt[0]===1),mr.freeType(wt)}}var _t=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),St=!0;if(!_t){var kt=N.createTexture(),Lt=mr.allocType(vO,36);N.activeTexture(Nre),N.bindTexture(hO,kt),N.texImage2D(Fre,0,Sg,3,3,0,Sg,vO,Lt),mr.freeType(Lt),N.bindTexture(hO,null),N.deleteTexture(kt),St=!N.getError()}return{colorBits:[N.getParameter(fi),N.getParameter(po),N.getParameter(Ua),N.getParameter(ys)],depthBits:N.getParameter(hl),stencilBits:N.getParameter(vl),subpixelBits:N.getParameter(ln),extensions:Object.keys(J).filter(function(bt){return!!J[bt]}),maxAnisotropic:ve,maxDrawbuffers:Xe,maxColorAttachments:ct,pointSizeDims:N.getParameter(pl),lineWidthDims:N.getParameter(_f),maxViewportDims:N.getParameter(bg),maxCombinedTextureUnits:N.getParameter(Ko),maxCubeMapSize:N.getParameter(ki),maxRenderbufferSize:N.getParameter(ko),maxTextureUnits:N.getParameter(zn),maxTextureSize:N.getParameter(Oh),maxAttributes:N.getParameter(xg),maxVertexUniforms:N.getParameter(wg),maxVertexTextureUnits:N.getParameter(rc),maxVaryingVectors:N.getParameter(tc),maxFragmentUniforms:N.getParameter(Va),glsl:N.getParameter(Tf),renderer:N.getParameter(Lh),vendor:N.getParameter(Ws),version:N.getParameter(Fh),readFloat:Ye,npotTextureCube:St}};function js(N){return!!N&&typeof N=="object"&&Array.isArray(N.shape)&&Array.isArray(N.stride)&&typeof N.offset=="number"&&N.shape.length===N.stride.length&&(Array.isArray(N.data)||e(N.data))}var Zo=function(N){return Object.keys(N).map(function(J){return N[J]})},Ab={shape:Wre,flatten:Hre};function Ure(N,J,ve){for(var Xe=0;Xe<J;++Xe)ve[Xe]=N[Xe]}function Vre(N,J,ve,Xe){for(var ct=0,Ye=0;Ye<J;++Ye)for(var et=N[Ye],yt=0;yt<ve;++yt)Xe[ct++]=et[yt]}function pO(N,J,ve,Xe,ct,Ye){for(var et=Ye,yt=0;yt<J;++yt)for(var wt=N[yt],_t=0;_t<ve;++_t)for(var St=wt[_t],kt=0;kt<Xe;++kt)ct[et++]=St[kt]}function gO(N,J,ve,Xe,ct){for(var Ye=1,et=ve+1;et<J.length;++et)Ye*=J[et];var yt=J[ve];if(J.length-ve==4){var wt=J[ve+1],_t=J[ve+2],St=J[ve+3];for(et=0;et<yt;++et)pO(N[et],wt,_t,St,Xe,ct),ct+=Ye}else for(et=0;et<yt;++et)gO(N[et],J,ve+1,Xe,ct),ct+=Ye}function Hre(N,J,ve,Xe){var ct=1;if(J.length)for(var Ye=0;Ye<J.length;++Ye)ct*=J[Ye];else ct=0;var et=Xe||mr.allocType(ve,ct);switch(J.length){case 0:break;case 1:Ure(N,J[0],et);break;case 2:Vre(N,J[0],J[1],et);break;case 3:pO(N,J[0],J[1],J[2],et,0);break;default:gO(N,J,0,et,0)}return et}function Wre(N){for(var J=[],ve=N;ve.length;ve=ve[0])J.push(ve.length);return J}var K2={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},jre=5120,Yre=5122,Xre=5124,qre=5121,Kre=5123,Zre=5125,Qre=5126,Jre=5126,Af={int8:jre,int16:Yre,int32:Xre,uint8:qre,uint16:Kre,uint32:Zre,float:Qre,float32:Jre},ene=35048,tne=35040,Mb={dynamic:ene,stream:tne,static:35044},Z2=Ab.flatten,mO=Ab.shape,yO=35044,rne=35040,Q2=5121,J2=5126,nc=[];nc[5120]=1,nc[5122]=2,nc[5124]=4,nc[5121]=1,nc[5123]=2,nc[5125]=4,nc[5126]=4;function kb(N){return K2[Object.prototype.toString.call(N)]|0}function bO(N,J){for(var ve=0;ve<J.length;++ve)N[ve]=J[ve]}function xO(N,J,ve,Xe,ct,Ye,et){for(var yt=0,wt=0;wt<ve;++wt)for(var _t=0;_t<Xe;++_t)N[yt++]=J[ct*wt+Ye*_t+et]}function nne(N,J,ve,Xe){var ct=0,Ye={};function et(Fe){this.id=ct++,this.buffer=N.createBuffer(),this.type=Fe,this.usage=yO,this.byteLength=0,this.dimension=1,this.dtype=Q2,this.persistentData=null,ve.profile&&(this.stats={size:0})}et.prototype.bind=function(){N.bindBuffer(this.type,this.buffer)},et.prototype.destroy=function(){Lt(this)};var yt=[];function wt(Fe,tt){var Et=yt.pop();return Et||(Et=new et(Fe)),Et.bind(),kt(Et,tt,rne,0,1,!1),Et}function _t(Fe){yt.push(Fe)}function St(Fe,tt,Et){Fe.byteLength=tt.byteLength,N.bufferData(Fe.type,tt,Et)}function kt(Fe,tt,Et,zt,vt,Ut){var gt;if(Fe.usage=Et,Array.isArray(tt)){if(Fe.dtype=zt||J2,tt.length>0){var Pt;if(Array.isArray(tt[0])){gt=mO(tt);for(var pt=1,Dt=1;Dt<gt.length;++Dt)pt*=gt[Dt];Fe.dimension=pt,Pt=Z2(tt,gt,Fe.dtype),St(Fe,Pt,Et),Ut?Fe.persistentData=Pt:mr.freeType(Pt)}else if(typeof tt[0]=="number"){Fe.dimension=vt;var ir=mr.allocType(Fe.dtype,tt.length);bO(ir,tt),St(Fe,ir,Et),Ut?Fe.persistentData=ir:mr.freeType(ir)}else e(tt[0])?(Fe.dimension=tt[0].length,Fe.dtype=zt||kb(tt[0])||J2,Pt=Z2(tt,[tt.length,tt[0].length],Fe.dtype),St(Fe,Pt,Et),Ut?Fe.persistentData=Pt:mr.freeType(Pt)):V.raise("invalid buffer data")}}else if(e(tt))Fe.dtype=zt||kb(tt),Fe.dimension=vt,St(Fe,tt,Et),Ut&&(Fe.persistentData=new Uint8Array(new Uint8Array(tt.buffer)));else if(js(tt)){gt=tt.shape;var wr=tt.stride,Ft=tt.offset,At=0,ht=0,vr=0,Ir=0;gt.length===1?(At=gt[0],ht=1,vr=wr[0],Ir=0):gt.length===2?(At=gt[0],ht=gt[1],vr=wr[0],Ir=wr[1]):V.raise("invalid shape"),Fe.dtype=zt||kb(tt.data)||J2,Fe.dimension=ht;var Yt=mr.allocType(Fe.dtype,At*ht);xO(Yt,tt.data,At,ht,vr,Ir,Ft),St(Fe,Yt,Et),Ut?Fe.persistentData=Yt:mr.freeType(Yt)}else tt instanceof ArrayBuffer?(Fe.dtype=Q2,Fe.dimension=vt,St(Fe,tt,Et),Ut&&(Fe.persistentData=new Uint8Array(new Uint8Array(tt)))):V.raise("invalid buffer data")}function Lt(Fe){J.bufferCount--,Xe(Fe);var tt=Fe.buffer;V(tt,"buffer must not be deleted already"),N.deleteBuffer(tt),Fe.buffer=null,delete Ye[Fe.id]}function bt(Fe,tt,Et,zt){J.bufferCount++;var vt=new et(tt);Ye[vt.id]=vt;function Ut(pt){var Dt=yO,ir=null,wr=0,Ft=0,At=1;return Array.isArray(pt)||e(pt)||js(pt)||pt instanceof ArrayBuffer?ir=pt:typeof pt=="number"?wr=pt|0:pt&&(V.type(pt,"object","buffer arguments must be an object, a number or an array"),"data"in pt&&(V(ir===null||Array.isArray(ir)||e(ir)||js(ir),"invalid data for buffer"),ir=pt.data),"usage"in pt&&(V.parameter(pt.usage,Mb,"invalid buffer usage"),Dt=Mb[pt.usage]),"type"in pt&&(V.parameter(pt.type,Af,"invalid buffer type"),Ft=Af[pt.type]),"dimension"in pt&&(V.type(pt.dimension,"number","invalid dimension"),At=pt.dimension|0),"length"in pt&&(V.nni(wr,"buffer length must be a nonnegative integer"),wr=pt.length|0)),vt.bind(),ir?kt(vt,ir,Dt,Ft,At,zt):(wr&&N.bufferData(vt.type,wr,Dt),vt.dtype=Ft||Q2,vt.usage=Dt,vt.dimension=At,vt.byteLength=wr),ve.profile&&(vt.stats.size=vt.byteLength*nc[vt.dtype]),Ut}function gt(pt,Dt){V(Dt+pt.byteLength<=vt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+pt.byteLength+" starting from offset "+Dt+" to a buffer of size "+vt.byteLength),N.bufferSubData(vt.type,Dt,pt)}function Pt(pt,Dt){var ir=(Dt||0)|0,wr;if(vt.bind(),e(pt)||pt instanceof ArrayBuffer)gt(pt,ir);else if(Array.isArray(pt)){if(pt.length>0)if(typeof pt[0]=="number"){var Ft=mr.allocType(vt.dtype,pt.length);bO(Ft,pt),gt(Ft,ir),mr.freeType(Ft)}else if(Array.isArray(pt[0])||e(pt[0])){wr=mO(pt);var At=Z2(pt,wr,vt.dtype);gt(At,ir),mr.freeType(At)}else V.raise("invalid buffer data")}else if(js(pt)){wr=pt.shape;var ht=pt.stride,vr=0,Ir=0,Yt=0,Gr=0;wr.length===1?(vr=wr[0],Ir=1,Yt=ht[0],Gr=0):wr.length===2?(vr=wr[0],Ir=wr[1],Yt=ht[0],Gr=ht[1]):V.raise("invalid shape");var Sr=Array.isArray(pt.data)?vt.dtype:kb(pt.data),Or=mr.allocType(Sr,vr*Ir);xO(Or,pt.data,vr,Ir,Yt,Gr,pt.offset),gt(Or,ir),mr.freeType(Or)}else V.raise("invalid data for buffer subdata");return Ut}return Et||Ut(Fe),Ut._reglType="buffer",Ut._buffer=vt,Ut.subdata=Pt,ve.profile&&(Ut.stats=vt.stats),Ut.destroy=function(){Lt(vt)},Ut}function It(){Zo(Ye).forEach(function(Fe){Fe.buffer=N.createBuffer(),N.bindBuffer(Fe.type,Fe.buffer),N.bufferData(Fe.type,Fe.persistentData||Fe.byteLength,Fe.usage)})}return ve.profile&&(J.getTotalBufferSize=function(){var Fe=0;return Object.keys(Ye).forEach(function(tt){Fe+=Ye[tt].stats.size}),Fe}),{create:bt,createStream:wt,destroyStream:_t,clear:function(){Zo(Ye).forEach(Lt),yt.forEach(Lt)},getBuffer:function(Fe){return Fe&&Fe._buffer instanceof et?Fe._buffer:null},restore:It,_initBuffer:kt}}var ine=0,ane=0,one=1,sne=1,lne=4,une=4,zh={points:ine,point:ane,lines:one,line:sne,triangles:lne,triangle:une,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},cne=0,fne=1,Cg=4,dne=5120,Gh=5121,wO=5122,Uh=5123,SO=5124,Mf=5125,eE=34963,hne=35040,vne=35044;function pne(N,J,ve,Xe){var ct={},Ye=0,et={uint8:Gh,uint16:Uh};J.oes_element_index_uint&&(et.uint32=Mf);function yt(It){this.id=Ye++,ct[this.id]=this,this.buffer=It,this.primType=Cg,this.vertCount=0,this.type=0}yt.prototype.bind=function(){this.buffer.bind()};var wt=[];function _t(It){var Fe=wt.pop();return Fe||(Fe=new yt(ve.create(null,eE,!0,!1)._buffer)),kt(Fe,It,hne,-1,-1,0,0),Fe}function St(It){wt.push(It)}function kt(It,Fe,tt,Et,zt,vt,Ut){It.buffer.bind();var gt;if(Fe){var Pt=Ut;!Ut&&(!e(Fe)||js(Fe)&&!e(Fe.data))&&(Pt=J.oes_element_index_uint?Mf:Uh),ve._initBuffer(It.buffer,Fe,tt,Pt,3)}else N.bufferData(eE,vt,tt),It.buffer.dtype=gt||Gh,It.buffer.usage=tt,It.buffer.dimension=3,It.buffer.byteLength=vt;if(gt=Ut,!Ut){switch(It.buffer.dtype){case Gh:case dne:gt=Gh;break;case Uh:case wO:gt=Uh;break;case Mf:case SO:gt=Mf;break;default:V.raise("unsupported type for element array")}It.buffer.dtype=gt}It.type=gt,V(gt!==Mf||!!J.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var pt=zt;pt<0&&(pt=It.buffer.byteLength,gt===Uh?pt>>=1:gt===Mf&&(pt>>=2)),It.vertCount=pt;var Dt=Et;if(Et<0){Dt=Cg;var ir=It.buffer.dimension;ir===1&&(Dt=cne),ir===2&&(Dt=fne),ir===3&&(Dt=Cg)}It.primType=Dt}function Lt(It){Xe.elementsCount--,V(It.buffer!==null,"must not double destroy elements"),delete ct[It.id],It.buffer.destroy(),It.buffer=null}function bt(It,Fe){var tt=ve.create(null,eE,!0),Et=new yt(tt._buffer);Xe.elementsCount++;function zt(vt){if(!vt)tt(),Et.primType=Cg,Et.vertCount=0,Et.type=Gh;else if(typeof vt=="number")tt(vt),Et.primType=Cg,Et.vertCount=vt|0,Et.type=Gh;else{var Ut=null,gt=vne,Pt=-1,pt=-1,Dt=0,ir=0;Array.isArray(vt)||e(vt)||js(vt)?Ut=vt:(V.type(vt,"object","invalid arguments for elements"),"data"in vt&&(Ut=vt.data,V(Array.isArray(Ut)||e(Ut)||js(Ut),"invalid data for element buffer")),"usage"in vt&&(V.parameter(vt.usage,Mb,"invalid element buffer usage"),gt=Mb[vt.usage]),"primitive"in vt&&(V.parameter(vt.primitive,zh,"invalid element buffer primitive"),Pt=zh[vt.primitive]),"count"in vt&&(V(typeof vt.count=="number"&&vt.count>=0,"invalid vertex count for elements"),pt=vt.count|0),"type"in vt&&(V.parameter(vt.type,et,"invalid buffer type"),ir=et[vt.type]),"length"in vt?Dt=vt.length|0:(Dt=pt,ir===Uh||ir===wO?Dt*=2:(ir===Mf||ir===SO)&&(Dt*=4))),kt(Et,Ut,gt,Pt,pt,Dt,ir)}return zt}return zt(It),zt._reglType="elements",zt._elements=Et,zt.subdata=function(vt,Ut){return tt.subdata(vt,Ut),zt},zt.destroy=function(){Lt(Et)},zt}return{create:bt,createStream:_t,destroyStream:St,getElements:function(It){return typeof It=="function"&&It._elements instanceof yt?It._elements:null},clear:function(){Zo(ct).forEach(Lt)}}}var CO=new Float32Array(1),gne=new Uint32Array(CO.buffer),mne=5123;function EO(N){for(var J=mr.allocType(mne,N.length),ve=0;ve<N.length;++ve)if(isNaN(N[ve]))J[ve]=65535;else if(N[ve]===1/0)J[ve]=31744;else if(N[ve]===-1/0)J[ve]=64512;else{CO[0]=N[ve];var Xe=gne[0],ct=Xe>>>31<<15,Ye=(Xe<<1>>>24)-127,et=Xe>>13&(1<<10)-1;if(Ye<-24)J[ve]=ct;else if(Ye<-14){var yt=-14-Ye;J[ve]=ct+(et+(1<<10)>>yt)}else Ye>15?J[ve]=ct+31744:J[ve]=ct+(Ye+15<<10)+et}return J}function Ii(N){return Array.isArray(N)||e(N)}var _O=function(N){return!(N&N-1)&&!!N},yne=34467,gl=3553,tE=34067,Ib=34069,kf=6408,rE=6406,Pb=6407,Eg=6409,Db=6410,TO=32854,nE=32855,AO=36194,bne=32819,xne=32820,wne=33635,Sne=34042,iE=6402,Rb=34041,aE=35904,oE=35906,Vh=36193,sE=33776,lE=33777,uE=33778,cE=33779,MO=35986,kO=35987,IO=34798,PO=35840,DO=35841,RO=35842,OO=35843,LO=36196,Hh=5121,fE=5123,dE=5125,_g=5126,Cne=10242,Ene=10243,_ne=10497,hE=33071,Tne=33648,Ane=10240,Mne=10241,vE=9728,kne=9729,pE=9984,FO=9985,NO=9986,gE=9987,Ine=33170,Ob=4352,Pne=4353,Dne=4354,Rne=34046,One=3317,Lne=37440,Fne=37441,Nne=37443,BO=37444,Tg=33984,Bne=[pE,NO,FO,gE],Lb=[0,Eg,Db,Pb,kf],bs={};bs[Eg]=bs[rE]=bs[iE]=1,bs[Rb]=bs[Db]=2,bs[Pb]=bs[aE]=3,bs[kf]=bs[oE]=4;function Wh(N){return"[object "+N+"]"}var $O=Wh("HTMLCanvasElement"),zO=Wh("OffscreenCanvas"),GO=Wh("CanvasRenderingContext2D"),UO=Wh("ImageBitmap"),VO=Wh("HTMLImageElement"),HO=Wh("HTMLVideoElement"),$ne=Object.keys(K2).concat([$O,zO,GO,UO,VO,HO]),jh=[];jh[Hh]=1,jh[_g]=4,jh[Vh]=2,jh[fE]=2,jh[dE]=4;var Aa=[];Aa[TO]=2,Aa[nE]=2,Aa[AO]=2,Aa[Rb]=4,Aa[sE]=.5,Aa[lE]=.5,Aa[uE]=1,Aa[cE]=1,Aa[MO]=.5,Aa[kO]=1,Aa[IO]=1,Aa[PO]=.5,Aa[DO]=.25,Aa[RO]=.5,Aa[OO]=.25,Aa[LO]=.5;function WO(N){return Array.isArray(N)&&(N.length===0||typeof N[0]=="number")}function jO(N){if(!Array.isArray(N))return!1;var J=N.length;return!(J===0||!Ii(N[0]))}function If(N){return Object.prototype.toString.call(N)}function YO(N){return If(N)===$O}function XO(N){return If(N)===zO}function zne(N){return If(N)===GO}function Gne(N){return If(N)===UO}function Une(N){return If(N)===VO}function Vne(N){return If(N)===HO}function mE(N){if(!N)return!1;var J=If(N);return $ne.indexOf(J)>=0?!0:WO(N)||jO(N)||js(N)}function qO(N){return K2[Object.prototype.toString.call(N)]|0}function Hne(N,J){var ve=J.length;switch(N.type){case Hh:case fE:case dE:case _g:var Xe=mr.allocType(N.type,ve);Xe.set(J),N.data=Xe;break;case Vh:N.data=EO(J);break;default:V.raise("unsupported texture type, must specify a typed array")}}function KO(N,J){return mr.allocType(N.type===Vh?_g:N.type,J)}function ZO(N,J){N.type===Vh?(N.data=EO(J),mr.freeType(J)):N.data=J}function Wne(N,J,ve,Xe,ct,Ye){for(var et=N.width,yt=N.height,wt=N.channels,_t=et*yt*wt,St=KO(N,_t),kt=0,Lt=0;Lt<yt;++Lt)for(var bt=0;bt<et;++bt)for(var It=0;It<wt;++It)St[kt++]=J[ve*bt+Xe*Lt+ct*It+Ye];ZO(N,St)}function Fb(N,J,ve,Xe,ct,Ye){var et;if(typeof Aa[N]!="undefined"?et=Aa[N]:et=bs[N]*jh[J],Ye&&(et*=6),ct){for(var yt=0,wt=ve;wt>=1;)yt+=et*wt*wt,wt/=2;return yt}else return et*ve*Xe}function jne(N,J,ve,Xe,ct,Ye,et){var yt={"don't care":Ob,"dont care":Ob,nice:Dne,fast:Pne},wt={repeat:_ne,clamp:hE,mirror:Tne},_t={nearest:vE,linear:kne},St=n({mipmap:gE,"nearest mipmap nearest":pE,"linear mipmap nearest":FO,"nearest mipmap linear":NO,"linear mipmap linear":gE},_t),kt={none:0,browser:BO},Lt={uint8:Hh,rgba4:bne,rgb565:wne,"rgb5 a1":xne},bt={alpha:rE,luminance:Eg,"luminance alpha":Db,rgb:Pb,rgba:kf,rgba4:TO,"rgb5 a1":nE,rgb565:AO},It={};J.ext_srgb&&(bt.srgb=aE,bt.srgba=oE),J.oes_texture_float&&(Lt.float32=Lt.float=_g),J.oes_texture_half_float&&(Lt.float16=Lt["half float"]=Vh),J.webgl_depth_texture&&(n(bt,{depth:iE,"depth stencil":Rb}),n(Lt,{uint16:fE,uint32:dE,"depth stencil":Sne})),J.webgl_compressed_texture_s3tc&&n(It,{"rgb s3tc dxt1":sE,"rgba s3tc dxt1":lE,"rgba s3tc dxt3":uE,"rgba s3tc dxt5":cE}),J.webgl_compressed_texture_atc&&n(It,{"rgb atc":MO,"rgba atc explicit alpha":kO,"rgba atc interpolated alpha":IO}),J.webgl_compressed_texture_pvrtc&&n(It,{"rgb pvrtc 4bppv1":PO,"rgb pvrtc 2bppv1":DO,"rgba pvrtc 4bppv1":RO,"rgba pvrtc 2bppv1":OO}),J.webgl_compressed_texture_etc1&&(It["rgb etc1"]=LO);var Fe=Array.prototype.slice.call(N.getParameter(yne));Object.keys(It).forEach(function(ce){var Ke=It[ce];Fe.indexOf(Ke)>=0&&(bt[ce]=Ke)});var tt=Object.keys(bt);ve.textureFormats=tt;var Et=[];Object.keys(bt).forEach(function(ce){var Ke=bt[ce];Et[Ke]=ce});var zt=[];Object.keys(Lt).forEach(function(ce){var Ke=Lt[ce];zt[Ke]=ce});var vt=[];Object.keys(_t).forEach(function(ce){var Ke=_t[ce];vt[Ke]=ce});var Ut=[];Object.keys(St).forEach(function(ce){var Ke=St[ce];Ut[Ke]=ce});var gt=[];Object.keys(wt).forEach(function(ce){var Ke=wt[ce];gt[Ke]=ce});var Pt=tt.reduce(function(ce,Ke){var We=bt[Ke];return We===Eg||We===rE||We===Eg||We===Db||We===iE||We===Rb||J.ext_srgb&&(We===aE||We===oE)?ce[We]=We:We===nE||Ke.indexOf("rgba")>=0?ce[We]=kf:ce[We]=Pb,ce},{});function pt(){this.internalformat=kf,this.format=kf,this.type=Hh,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=BO,this.width=0,this.height=0,this.channels=0}function Dt(ce,Ke){ce.internalformat=Ke.internalformat,ce.format=Ke.format,ce.type=Ke.type,ce.compressed=Ke.compressed,ce.premultiplyAlpha=Ke.premultiplyAlpha,ce.flipY=Ke.flipY,ce.unpackAlignment=Ke.unpackAlignment,ce.colorSpace=Ke.colorSpace,ce.width=Ke.width,ce.height=Ke.height,ce.channels=Ke.channels}function ir(ce,Ke){if(!(typeof Ke!="object"||!Ke)){if("premultiplyAlpha"in Ke&&(V.type(Ke.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),ce.premultiplyAlpha=Ke.premultiplyAlpha),"flipY"in Ke&&(V.type(Ke.flipY,"boolean","invalid texture flip"),ce.flipY=Ke.flipY),"alignment"in Ke&&(V.oneOf(Ke.alignment,[1,2,4,8],"invalid texture unpack alignment"),ce.unpackAlignment=Ke.alignment),"colorSpace"in Ke&&(V.parameter(Ke.colorSpace,kt,"invalid colorSpace"),ce.colorSpace=kt[Ke.colorSpace]),"type"in Ke){var We=Ke.type;V(J.oes_texture_float||!(We==="float"||We==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),V(J.oes_texture_half_float||!(We==="half float"||We==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),V(J.webgl_depth_texture||!(We==="uint16"||We==="uint32"||We==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),V.parameter(We,Lt,"invalid texture type"),ce.type=Lt[We]}var Ht=ce.width,Ur=ce.height,oe=ce.channels,K=!1;"shape"in Ke?(V(Array.isArray(Ke.shape)&&Ke.shape.length>=2,"shape must be an array"),Ht=Ke.shape[0],Ur=Ke.shape[1],Ke.shape.length===3&&(oe=Ke.shape[2],V(oe>0&&oe<=4,"invalid number of channels"),K=!0),V(Ht>=0&&Ht<=ve.maxTextureSize,"invalid width"),V(Ur>=0&&Ur<=ve.maxTextureSize,"invalid height")):("radius"in Ke&&(Ht=Ur=Ke.radius,V(Ht>=0&&Ht<=ve.maxTextureSize,"invalid radius")),"width"in Ke&&(Ht=Ke.width,V(Ht>=0&&Ht<=ve.maxTextureSize,"invalid width")),"height"in Ke&&(Ur=Ke.height,V(Ur>=0&&Ur<=ve.maxTextureSize,"invalid height")),"channels"in Ke&&(oe=Ke.channels,V(oe>0&&oe<=4,"invalid number of channels"),K=!0)),ce.width=Ht|0,ce.height=Ur|0,ce.channels=oe|0;var be=!1;if("format"in Ke){var Re=Ke.format;V(J.webgl_depth_texture||!(Re==="depth"||Re==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),V.parameter(Re,bt,"invalid texture format");var $e=ce.internalformat=bt[Re];ce.format=Pt[$e],Re in Lt&&("type"in Ke||(ce.type=Lt[Re])),Re in It&&(ce.compressed=!0),be=!0}!K&&be?ce.channels=bs[ce.format]:K&&!be?ce.channels!==Lb[ce.format]&&(ce.format=ce.internalformat=Lb[ce.channels]):be&&K&&V(ce.channels===bs[ce.format],"number of channels inconsistent with specified format")}}function wr(ce){N.pixelStorei(Lne,ce.flipY),N.pixelStorei(Fne,ce.premultiplyAlpha),N.pixelStorei(Nne,ce.colorSpace),N.pixelStorei(One,ce.unpackAlignment)}function Ft(){pt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function At(ce,Ke){var We=null;if(mE(Ke)?We=Ke:Ke&&(V.type(Ke,"object","invalid pixel data type"),ir(ce,Ke),"x"in Ke&&(ce.xOffset=Ke.x|0),"y"in Ke&&(ce.yOffset=Ke.y|0),mE(Ke.data)&&(We=Ke.data)),V(!ce.compressed||We instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Ke.copy){V(!We,"can not specify copy and data field for the same texture");var Ht=ct.viewportWidth,Ur=ct.viewportHeight;ce.width=ce.width||Ht-ce.xOffset,ce.height=ce.height||Ur-ce.yOffset,ce.needsCopy=!0,V(ce.xOffset>=0&&ce.xOffset<Ht&&ce.yOffset>=0&&ce.yOffset<Ur&&ce.width>0&&ce.width<=Ht&&ce.height>0&&ce.height<=Ur,"copy texture read out of bounds")}else if(!We)ce.width=ce.width||1,ce.height=ce.height||1,ce.channels=ce.channels||4;else if(e(We))ce.channels=ce.channels||4,ce.data=We,!("type"in Ke)&&ce.type===Hh&&(ce.type=qO(We));else if(WO(We))ce.channels=ce.channels||4,Hne(ce,We),ce.alignment=1,ce.needsFree=!0;else if(js(We)){var oe=We.data;!Array.isArray(oe)&&ce.type===Hh&&(ce.type=qO(oe));var K=We.shape,be=We.stride,Re,$e,Ce,xe,Me,se;K.length===3?(Ce=K[2],se=be[2]):(V(K.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Ce=1,se=1),Re=K[0],$e=K[1],xe=be[0],Me=be[1],ce.alignment=1,ce.width=Re,ce.height=$e,ce.channels=Ce,ce.format=ce.internalformat=Lb[Ce],ce.needsFree=!0,Wne(ce,oe,xe,Me,se,We.offset)}else if(YO(We)||XO(We)||zne(We))YO(We)||XO(We)?ce.element=We:ce.element=We.canvas,ce.width=ce.element.width,ce.height=ce.element.height,ce.channels=4;else if(Gne(We))ce.element=We,ce.width=We.width,ce.height=We.height,ce.channels=4;else if(Une(We))ce.element=We,ce.width=We.naturalWidth,ce.height=We.naturalHeight,ce.channels=4;else if(Vne(We))ce.element=We,ce.width=We.videoWidth,ce.height=We.videoHeight,ce.channels=4;else if(jO(We)){var ye=ce.width||We[0].length,ie=ce.height||We.length,Pe=ce.channels;Ii(We[0][0])?Pe=Pe||We[0][0].length:Pe=Pe||1;for(var Ue=Ab.shape(We),ot=1,ft=0;ft<Ue.length;++ft)ot*=Ue[ft];var at=KO(ce,ot);Ab.flatten(We,Ue,"",at),ZO(ce,at),ce.alignment=1,ce.width=ye,ce.height=ie,ce.channels=Pe,ce.format=ce.internalformat=Lb[Pe],ce.needsFree=!0}ce.type===_g?V(ve.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):ce.type===Vh&&V(ve.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function ht(ce,Ke,We){var Ht=ce.element,Ur=ce.data,oe=ce.internalformat,K=ce.format,be=ce.type,Re=ce.width,$e=ce.height;wr(ce),Ht?N.texImage2D(Ke,We,K,K,be,Ht):ce.compressed?N.compressedTexImage2D(Ke,We,oe,Re,$e,0,Ur):ce.needsCopy?(Xe(),N.copyTexImage2D(Ke,We,K,ce.xOffset,ce.yOffset,Re,$e,0)):N.texImage2D(Ke,We,K,Re,$e,0,K,be,Ur||null)}function vr(ce,Ke,We,Ht,Ur){var oe=ce.element,K=ce.data,be=ce.internalformat,Re=ce.format,$e=ce.type,Ce=ce.width,xe=ce.height;wr(ce),oe?N.texSubImage2D(Ke,Ur,We,Ht,Re,$e,oe):ce.compressed?N.compressedTexSubImage2D(Ke,Ur,We,Ht,be,Ce,xe,K):ce.needsCopy?(Xe(),N.copyTexSubImage2D(Ke,Ur,We,Ht,ce.xOffset,ce.yOffset,Ce,xe)):N.texSubImage2D(Ke,Ur,We,Ht,Ce,xe,Re,$e,K)}var Ir=[];function Yt(){return Ir.pop()||new Ft}function Gr(ce){ce.needsFree&&mr.freeType(ce.data),Ft.call(ce),Ir.push(ce)}function Sr(){pt.call(this),this.genMipmaps=!1,this.mipmapHint=Ob,this.mipmask=0,this.images=Array(16)}function Or(ce,Ke,We){var Ht=ce.images[0]=Yt();ce.mipmask=1,Ht.width=ce.width=Ke,Ht.height=ce.height=We,Ht.channels=ce.channels=4}function un(ce,Ke){var We=null;if(mE(Ke))We=ce.images[0]=Yt(),Dt(We,ce),At(We,Ke),ce.mipmask=1;else if(ir(ce,Ke),Array.isArray(Ke.mipmap))for(var Ht=Ke.mipmap,Ur=0;Ur<Ht.length;++Ur)We=ce.images[Ur]=Yt(),Dt(We,ce),We.width>>=Ur,We.height>>=Ur,At(We,Ht[Ur]),ce.mipmask|=1<<Ur;else We=ce.images[0]=Yt(),Dt(We,ce),At(We,Ke),ce.mipmask=1;Dt(ce,ce.images[0]),ce.compressed&&(ce.internalformat===sE||ce.internalformat===lE||ce.internalformat===uE||ce.internalformat===cE)&&V(ce.width%4==0&&ce.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Vi(ce,Ke){for(var We=ce.images,Ht=0;Ht<We.length;++Ht){if(!We[Ht])return;ht(We[Ht],Ke,Ht)}}var ua=[];function Xr(){var ce=ua.pop()||new Sr;pt.call(ce),ce.mipmask=0;for(var Ke=0;Ke<16;++Ke)ce.images[Ke]=null;return ce}function ta(ce){for(var Ke=ce.images,We=0;We<Ke.length;++We)Ke[We]&&Gr(Ke[We]),Ke[We]=null;ua.push(ce)}function Qn(){this.minFilter=vE,this.magFilter=vE,this.wrapS=hE,this.wrapT=hE,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ob}function Hi(ce,Ke){if("min"in Ke){var We=Ke.min;V.parameter(We,St),ce.minFilter=St[We],Bne.indexOf(ce.minFilter)>=0&&!("faces"in Ke)&&(ce.genMipmaps=!0)}if("mag"in Ke){var Ht=Ke.mag;V.parameter(Ht,_t),ce.magFilter=_t[Ht]}var Ur=ce.wrapS,oe=ce.wrapT;if("wrap"in Ke){var K=Ke.wrap;typeof K=="string"?(V.parameter(K,wt),Ur=oe=wt[K]):Array.isArray(K)&&(V.parameter(K[0],wt),V.parameter(K[1],wt),Ur=wt[K[0]],oe=wt[K[1]])}else{if("wrapS"in Ke){var be=Ke.wrapS;V.parameter(be,wt),Ur=wt[be]}if("wrapT"in Ke){var Re=Ke.wrapT;V.parameter(Re,wt),oe=wt[Re]}}if(ce.wrapS=Ur,ce.wrapT=oe,"anisotropic"in Ke){var $e=Ke.anisotropic;V(typeof $e=="number"&&$e>=1&&$e<=ve.maxAnisotropic,"aniso samples must be between 1 and "),ce.anisotropic=Ke.anisotropic}if("mipmap"in Ke){var Ce=!1;switch(typeof Ke.mipmap){case"string":V.parameter(Ke.mipmap,yt,"invalid mipmap hint"),ce.mipmapHint=yt[Ke.mipmap],ce.genMipmaps=!0,Ce=!0;break;case"boolean":Ce=ce.genMipmaps=Ke.mipmap;break;case"object":V(Array.isArray(Ke.mipmap),"invalid mipmap type"),ce.genMipmaps=!1,Ce=!0;break;default:V.raise("invalid mipmap type")}Ce&&!("min"in Ke)&&(ce.minFilter=pE)}}function ra(ce,Ke){N.texParameteri(Ke,Mne,ce.minFilter),N.texParameteri(Ke,Ane,ce.magFilter),N.texParameteri(Ke,Cne,ce.wrapS),N.texParameteri(Ke,Ene,ce.wrapT),J.ext_texture_filter_anisotropic&&N.texParameteri(Ke,Rne,ce.anisotropic),ce.genMipmaps&&(N.hint(Ine,ce.mipmapHint),N.generateMipmap(Ke))}var na=0,ha={},Ma=ve.maxTextureUnits,Pi=Array(Ma).map(function(){return null});function Pr(ce){pt.call(this),this.mipmask=0,this.internalformat=kf,this.id=na++,this.refCount=1,this.target=ce,this.texture=N.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Qn,et.profile&&(this.stats={size:0})}function ka(ce){N.activeTexture(Tg),N.bindTexture(ce.target,ce.texture)}function xn(){var ce=Pi[0];ce?N.bindTexture(ce.target,ce.texture):N.bindTexture(gl,null)}function sr(ce){var Ke=ce.texture;V(Ke,"must not double destroy texture");var We=ce.unit,Ht=ce.target;We>=0&&(N.activeTexture(Tg+We),N.bindTexture(Ht,null),Pi[We]=null),N.deleteTexture(Ke),ce.texture=null,ce.params=null,ce.pixels=null,ce.refCount=0,delete ha[ce.id],Ye.textureCount--}n(Pr.prototype,{bind:function(){var ce=this;ce.bindCount+=1;var Ke=ce.unit;if(Ke<0){for(var We=0;We<Ma;++We){var Ht=Pi[We];if(Ht){if(Ht.bindCount>0)continue;Ht.unit=-1}Pi[We]=ce,Ke=We;break}Ke>=Ma&&V.raise("insufficient number of texture units"),et.profile&&Ye.maxTextureUnits<Ke+1&&(Ye.maxTextureUnits=Ke+1),ce.unit=Ke,N.activeTexture(Tg+Ke),N.bindTexture(ce.target,ce.texture)}return Ke},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&sr(this)}});function Hr(ce,Ke){var We=new Pr(gl);ha[We.id]=We,Ye.textureCount++;function Ht(K,be){var Re=We.texInfo;Qn.call(Re);var $e=Xr();return typeof K=="number"?typeof be=="number"?Or($e,K|0,be|0):Or($e,K|0,K|0):K?(V.type(K,"object","invalid arguments to regl.texture"),Hi(Re,K),un($e,K)):Or($e,1,1),Re.genMipmaps&&($e.mipmask=($e.width<<1)-1),We.mipmask=$e.mipmask,Dt(We,$e),V.texture2D(Re,$e,ve),We.internalformat=$e.internalformat,Ht.width=$e.width,Ht.height=$e.height,ka(We),Vi($e,gl),ra(Re,gl),xn(),ta($e),et.profile&&(We.stats.size=Fb(We.internalformat,We.type,$e.width,$e.height,Re.genMipmaps,!1)),Ht.format=Et[We.internalformat],Ht.type=zt[We.type],Ht.mag=vt[Re.magFilter],Ht.min=Ut[Re.minFilter],Ht.wrapS=gt[Re.wrapS],Ht.wrapT=gt[Re.wrapT],Ht}function Ur(K,be,Re,$e){V(!!K,"must specify image data");var Ce=be|0,xe=Re|0,Me=$e|0,se=Yt();return Dt(se,We),se.width=0,se.height=0,At(se,K),se.width=se.width||(We.width>>Me)-Ce,se.height=se.height||(We.height>>Me)-xe,V(We.type===se.type&&We.format===se.format&&We.internalformat===se.internalformat,"incompatible format for texture.subimage"),V(Ce>=0&&xe>=0&&Ce+se.width<=We.width&&xe+se.height<=We.height,"texture.subimage write out of bounds"),V(We.mipmask&1<<Me,"missing mipmap data"),V(se.data||se.element||se.needsCopy,"missing image data"),ka(We),vr(se,gl,Ce,xe,Me),xn(),Gr(se),Ht}function oe(K,be){var Re=K|0,$e=be|0||Re;if(Re===We.width&&$e===We.height)return Ht;Ht.width=We.width=Re,Ht.height=We.height=$e,ka(We);for(var Ce=0;We.mipmask>>Ce;++Ce){var xe=Re>>Ce,Me=$e>>Ce;if(!xe||!Me)break;N.texImage2D(gl,Ce,We.format,xe,Me,0,We.format,We.type,null)}return xn(),et.profile&&(We.stats.size=Fb(We.internalformat,We.type,Re,$e,!1,!1)),Ht}return Ht(ce,Ke),Ht.subimage=Ur,Ht.resize=oe,Ht._reglType="texture2d",Ht._texture=We,et.profile&&(Ht.stats=We.stats),Ht.destroy=function(){We.decRef()},Ht}function nn(ce,Ke,We,Ht,Ur,oe){var K=new Pr(tE);ha[K.id]=K,Ye.cubeCount++;var be=new Array(6);function Re(xe,Me,se,ye,ie,Pe){var Ue,ot=K.texInfo;for(Qn.call(ot),Ue=0;Ue<6;++Ue)be[Ue]=Xr();if(typeof xe=="number"||!xe){var ft=xe|0||1;for(Ue=0;Ue<6;++Ue)Or(be[Ue],ft,ft)}else if(typeof xe=="object")if(Me)un(be[0],xe),un(be[1],Me),un(be[2],se),un(be[3],ye),un(be[4],ie),un(be[5],Pe);else if(Hi(ot,xe),ir(K,xe),"faces"in xe){var at=xe.faces;for(V(Array.isArray(at)&&at.length===6,"cube faces must be a length 6 array"),Ue=0;Ue<6;++Ue)V(typeof at[Ue]=="object"&&!!at[Ue],"invalid input for cube map face"),Dt(be[Ue],K),un(be[Ue],at[Ue])}else for(Ue=0;Ue<6;++Ue)un(be[Ue],xe);else V.raise("invalid arguments to cube map");for(Dt(K,be[0]),ve.npotTextureCube||V(_O(K.width)&&_O(K.height),"your browser does not support non power or two texture dimensions"),ot.genMipmaps?K.mipmask=(be[0].width<<1)-1:K.mipmask=be[0].mipmask,V.textureCube(K,ot,be,ve),K.internalformat=be[0].internalformat,Re.width=be[0].width,Re.height=be[0].height,ka(K),Ue=0;Ue<6;++Ue)Vi(be[Ue],Ib+Ue);for(ra(ot,tE),xn(),et.profile&&(K.stats.size=Fb(K.internalformat,K.type,Re.width,Re.height,ot.genMipmaps,!0)),Re.format=Et[K.internalformat],Re.type=zt[K.type],Re.mag=vt[ot.magFilter],Re.min=Ut[ot.minFilter],Re.wrapS=gt[ot.wrapS],Re.wrapT=gt[ot.wrapT],Ue=0;Ue<6;++Ue)ta(be[Ue]);return Re}function $e(xe,Me,se,ye,ie){V(!!Me,"must specify image data"),V(typeof xe=="number"&&xe===(xe|0)&&xe>=0&&xe<6,"invalid face");var Pe=se|0,Ue=ye|0,ot=ie|0,ft=Yt();return Dt(ft,K),ft.width=0,ft.height=0,At(ft,Me),ft.width=ft.width||(K.width>>ot)-Pe,ft.height=ft.height||(K.height>>ot)-Ue,V(K.type===ft.type&&K.format===ft.format&&K.internalformat===ft.internalformat,"incompatible format for texture.subimage"),V(Pe>=0&&Ue>=0&&Pe+ft.width<=K.width&&Ue+ft.height<=K.height,"texture.subimage write out of bounds"),V(K.mipmask&1<<ot,"missing mipmap data"),V(ft.data||ft.element||ft.needsCopy,"missing image data"),ka(K),vr(ft,Ib+xe,Pe,Ue,ot),xn(),Gr(ft),Re}function Ce(xe){var Me=xe|0;if(Me!==K.width){Re.width=K.width=Me,Re.height=K.height=Me,ka(K);for(var se=0;se<6;++se)for(var ye=0;K.mipmask>>ye;++ye)N.texImage2D(Ib+se,ye,K.format,Me>>ye,Me>>ye,0,K.format,K.type,null);return xn(),et.profile&&(K.stats.size=Fb(K.internalformat,K.type,Re.width,Re.height,!1,!0)),Re}}return Re(ce,Ke,We,Ht,Ur,oe),Re.subimage=$e,Re.resize=Ce,Re._reglType="textureCube",Re._texture=K,et.profile&&(Re.stats=K.stats),Re.destroy=function(){K.decRef()},Re}function Di(){for(var ce=0;ce<Ma;++ce)N.activeTexture(Tg+ce),N.bindTexture(gl,null),Pi[ce]=null;Zo(ha).forEach(sr),Ye.cubeCount=0,Ye.textureCount=0}et.profile&&(Ye.getTotalTextureSize=function(){var ce=0;return Object.keys(ha).forEach(function(Ke){ce+=ha[Ke].stats.size}),ce});function yl(){for(var ce=0;ce<Ma;++ce){var Ke=Pi[ce];Ke&&(Ke.bindCount=0,Ke.unit=-1,Pi[ce]=null)}Zo(ha).forEach(function(We){We.texture=N.createTexture(),N.bindTexture(We.target,We.texture);for(var Ht=0;Ht<32;++Ht)if((We.mipmask&1<<Ht)!=0)if(We.target===gl)N.texImage2D(gl,Ht,We.internalformat,We.width>>Ht,We.height>>Ht,0,We.internalformat,We.type,null);else for(var Ur=0;Ur<6;++Ur)N.texImage2D(Ib+Ur,Ht,We.internalformat,We.width>>Ht,We.height>>Ht,0,We.internalformat,We.type,null);ra(We.texInfo,We.target)})}function Nf(){for(var ce=0;ce<Ma;++ce){var Ke=Pi[ce];Ke&&(Ke.bindCount=0,Ke.unit=-1,Pi[ce]=null),N.activeTexture(Tg+ce),N.bindTexture(gl,null),N.bindTexture(tE,null)}}return{create2D:Hr,createCube:nn,clear:Di,getTexture:function(ce){return null},restore:yl,refresh:Nf}}var ic=36161,Nb=32854,QO=32855,JO=36194,eL=33189,tL=36168,rL=34041,nL=35907,iL=34836,aL=34842,oL=34843,Ys=[];Ys[Nb]=2,Ys[QO]=2,Ys[JO]=2,Ys[eL]=2,Ys[tL]=1,Ys[rL]=4,Ys[nL]=4,Ys[iL]=16,Ys[aL]=8,Ys[oL]=6;function sL(N,J,ve){return Ys[N]*J*ve}var Yne=function(N,J,ve,Xe,ct){var Ye={rgba4:Nb,rgb565:JO,"rgb5 a1":QO,depth:eL,stencil:tL,"depth stencil":rL};J.ext_srgb&&(Ye.srgba=nL),J.ext_color_buffer_half_float&&(Ye.rgba16f=aL,Ye.rgb16f=oL),J.webgl_color_buffer_float&&(Ye.rgba32f=iL);var et=[];Object.keys(Ye).forEach(function(bt){var It=Ye[bt];et[It]=bt});var yt=0,wt={};function _t(bt){this.id=yt++,this.refCount=1,this.renderbuffer=bt,this.format=Nb,this.width=0,this.height=0,ct.profile&&(this.stats={size:0})}_t.prototype.decRef=function(){--this.refCount<=0&&St(this)};function St(bt){var It=bt.renderbuffer;V(It,"must not double destroy renderbuffer"),N.bindRenderbuffer(ic,null),N.deleteRenderbuffer(It),bt.renderbuffer=null,bt.refCount=0,delete wt[bt.id],Xe.renderbufferCount--}function kt(bt,It){var Fe=new _t(N.createRenderbuffer());wt[Fe.id]=Fe,Xe.renderbufferCount++;function tt(zt,vt){var Ut=0,gt=0,Pt=Nb;if(typeof zt=="object"&&zt){var pt=zt;if("shape"in pt){var Dt=pt.shape;V(Array.isArray(Dt)&&Dt.length>=2,"invalid renderbuffer shape"),Ut=Dt[0]|0,gt=Dt[1]|0}else"radius"in pt&&(Ut=gt=pt.radius|0),"width"in pt&&(Ut=pt.width|0),"height"in pt&&(gt=pt.height|0);"format"in pt&&(V.parameter(pt.format,Ye,"invalid renderbuffer format"),Pt=Ye[pt.format])}else typeof zt=="number"?(Ut=zt|0,typeof vt=="number"?gt=vt|0:gt=Ut):zt?V.raise("invalid arguments to renderbuffer constructor"):Ut=gt=1;if(V(Ut>0&&gt>0&&Ut<=ve.maxRenderbufferSize&&gt<=ve.maxRenderbufferSize,"invalid renderbuffer size"),!(Ut===Fe.width&&gt===Fe.height&&Pt===Fe.format))return tt.width=Fe.width=Ut,tt.height=Fe.height=gt,Fe.format=Pt,N.bindRenderbuffer(ic,Fe.renderbuffer),N.renderbufferStorage(ic,Pt,Ut,gt),V(N.getError()===0,"invalid render buffer format"),ct.profile&&(Fe.stats.size=sL(Fe.format,Fe.width,Fe.height)),tt.format=et[Fe.format],tt}function Et(zt,vt){var Ut=zt|0,gt=vt|0||Ut;return Ut===Fe.width&&gt===Fe.height||(V(Ut>0&&gt>0&&Ut<=ve.maxRenderbufferSize&&gt<=ve.maxRenderbufferSize,"invalid renderbuffer size"),tt.width=Fe.width=Ut,tt.height=Fe.height=gt,N.bindRenderbuffer(ic,Fe.renderbuffer),N.renderbufferStorage(ic,Fe.format,Ut,gt),V(N.getError()===0,"invalid render buffer format"),ct.profile&&(Fe.stats.size=sL(Fe.format,Fe.width,Fe.height))),tt}return tt(bt,It),tt.resize=Et,tt._reglType="renderbuffer",tt._renderbuffer=Fe,ct.profile&&(tt.stats=Fe.stats),tt.destroy=function(){Fe.decRef()},tt}ct.profile&&(Xe.getTotalRenderbufferSize=function(){var bt=0;return Object.keys(wt).forEach(function(It){bt+=wt[It].stats.size}),bt});function Lt(){Zo(wt).forEach(function(bt){bt.renderbuffer=N.createRenderbuffer(),N.bindRenderbuffer(ic,bt.renderbuffer),N.renderbufferStorage(ic,bt.format,bt.width,bt.height)}),N.bindRenderbuffer(ic,null)}return{create:kt,clear:function(){Zo(wt).forEach(St)},restore:Lt}},fu=36160,yE=36161,Pf=3553,Bb=34069,lL=36064,uL=36096,cL=36128,fL=33306,dL=36053,Xne=36054,qne=36055,Kne=36057,Zne=36061,Qne=36193,Jne=5121,eie=5126,hL=6407,vL=6408,tie=6402,rie=[hL,vL],bE=[];bE[vL]=4,bE[hL]=3;var $b=[];$b[Jne]=1,$b[eie]=4,$b[Qne]=2;var nie=32854,iie=32855,aie=36194,oie=33189,sie=36168,pL=34041,lie=35907,uie=34836,cie=34842,fie=34843,die=[nie,iie,aie,lie,cie,fie,uie],Yh={};Yh[dL]="complete",Yh[Xne]="incomplete attachment",Yh[Kne]="incomplete dimensions",Yh[qne]="incomplete, missing attachment",Yh[Zne]="unsupported";function hie(N,J,ve,Xe,ct,Ye){var et={cur:null,next:null,dirty:!1,setFBO:null},yt=["rgba"],wt=["rgba4","rgb565","rgb5 a1"];J.ext_srgb&&wt.push("srgba"),J.ext_color_buffer_half_float&&wt.push("rgba16f","rgb16f"),J.webgl_color_buffer_float&&wt.push("rgba32f");var _t=["uint8"];J.oes_texture_half_float&&_t.push("half float","float16"),J.oes_texture_float&&_t.push("float","float32");function St(Ft,At,ht){this.target=Ft,this.texture=At,this.renderbuffer=ht;var vr=0,Ir=0;At?(vr=At.width,Ir=At.height):ht&&(vr=ht.width,Ir=ht.height),this.width=vr,this.height=Ir}function kt(Ft){Ft&&(Ft.texture&&Ft.texture._texture.decRef(),Ft.renderbuffer&&Ft.renderbuffer._renderbuffer.decRef())}function Lt(Ft,At,ht){if(!!Ft)if(Ft.texture){var vr=Ft.texture._texture,Ir=Math.max(1,vr.width),Yt=Math.max(1,vr.height);V(Ir===At&&Yt===ht,"inconsistent width/height for supplied texture"),vr.refCount+=1}else{var Gr=Ft.renderbuffer._renderbuffer;V(Gr.width===At&&Gr.height===ht,"inconsistent width/height for renderbuffer"),Gr.refCount+=1}}function bt(Ft,At){At&&(At.texture?N.framebufferTexture2D(fu,Ft,At.target,At.texture._texture.texture,0):N.framebufferRenderbuffer(fu,Ft,yE,At.renderbuffer._renderbuffer.renderbuffer))}function It(Ft){var At=Pf,ht=null,vr=null,Ir=Ft;typeof Ft=="object"&&(Ir=Ft.data,"target"in Ft&&(At=Ft.target|0)),V.type(Ir,"function","invalid attachment data");var Yt=Ir._reglType;return Yt==="texture2d"?(ht=Ir,V(At===Pf)):Yt==="textureCube"?(ht=Ir,V(At>=Bb&&At<Bb+6,"invalid cube map target")):Yt==="renderbuffer"?(vr=Ir,At=yE):V.raise("invalid regl object for attachment"),new St(At,ht,vr)}function Fe(Ft,At,ht,vr,Ir){if(ht){var Yt=Xe.create2D({width:Ft,height:At,format:vr,type:Ir});return Yt._texture.refCount=0,new St(Pf,Yt,null)}else{var Gr=ct.create({width:Ft,height:At,format:vr});return Gr._renderbuffer.refCount=0,new St(yE,null,Gr)}}function tt(Ft){return Ft&&(Ft.texture||Ft.renderbuffer)}function Et(Ft,At,ht){Ft&&(Ft.texture?Ft.texture.resize(At,ht):Ft.renderbuffer&&Ft.renderbuffer.resize(At,ht),Ft.width=At,Ft.height=ht)}var zt=0,vt={};function Ut(){this.id=zt++,vt[this.id]=this,this.framebuffer=N.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function gt(Ft){Ft.colorAttachments.forEach(kt),kt(Ft.depthAttachment),kt(Ft.stencilAttachment),kt(Ft.depthStencilAttachment)}function Pt(Ft){var At=Ft.framebuffer;V(At,"must not double destroy framebuffer"),N.deleteFramebuffer(At),Ft.framebuffer=null,Ye.framebufferCount--,delete vt[Ft.id]}function pt(Ft){var At;N.bindFramebuffer(fu,Ft.framebuffer);var ht=Ft.colorAttachments;for(At=0;At<ht.length;++At)bt(lL+At,ht[At]);for(At=ht.length;At<ve.maxColorAttachments;++At)N.framebufferTexture2D(fu,lL+At,Pf,null,0);N.framebufferTexture2D(fu,fL,Pf,null,0),N.framebufferTexture2D(fu,uL,Pf,null,0),N.framebufferTexture2D(fu,cL,Pf,null,0),bt(uL,Ft.depthAttachment),bt(cL,Ft.stencilAttachment),bt(fL,Ft.depthStencilAttachment);var vr=N.checkFramebufferStatus(fu);!N.isContextLost()&&vr!==dL&&V.raise("framebuffer configuration not supported, status = "+Yh[vr]),N.bindFramebuffer(fu,et.next?et.next.framebuffer:null),et.cur=et.next,N.getError()}function Dt(Ft,At){var ht=new Ut;Ye.framebufferCount++;function vr(Yt,Gr){var Sr;V(et.next!==ht,"can not update framebuffer which is currently in use");var Or=0,un=0,Vi=!0,ua=!0,Xr=null,ta=!0,Qn="rgba",Hi="uint8",ra=1,na=null,ha=null,Ma=null,Pi=!1;if(typeof Yt=="number")Or=Yt|0,un=Gr|0||Or;else if(!Yt)Or=un=1;else{V.type(Yt,"object","invalid arguments for framebuffer");var Pr=Yt;if("shape"in Pr){var ka=Pr.shape;V(Array.isArray(ka)&&ka.length>=2,"invalid shape for framebuffer"),Or=ka[0],un=ka[1]}else"radius"in Pr&&(Or=un=Pr.radius),"width"in Pr&&(Or=Pr.width),"height"in Pr&&(un=Pr.height);("color"in Pr||"colors"in Pr)&&(Xr=Pr.color||Pr.colors,Array.isArray(Xr)&&V(Xr.length===1||J.webgl_draw_buffers,"multiple render targets not supported")),Xr||("colorCount"in Pr&&(ra=Pr.colorCount|0,V(ra>0,"invalid color buffer count")),"colorTexture"in Pr&&(ta=!!Pr.colorTexture,Qn="rgba4"),"colorType"in Pr&&(Hi=Pr.colorType,ta?(V(J.oes_texture_float||!(Hi==="float"||Hi==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),V(J.oes_texture_half_float||!(Hi==="half float"||Hi==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Hi==="half float"||Hi==="float16"?(V(J.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Qn="rgba16f"):(Hi==="float"||Hi==="float32")&&(V(J.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Qn="rgba32f"),V.oneOf(Hi,_t,"invalid color type")),"colorFormat"in Pr&&(Qn=Pr.colorFormat,yt.indexOf(Qn)>=0?ta=!0:wt.indexOf(Qn)>=0?ta=!1:ta?V.oneOf(Pr.colorFormat,yt,"invalid color format for texture"):V.oneOf(Pr.colorFormat,wt,"invalid color format for renderbuffer"))),("depthTexture"in Pr||"depthStencilTexture"in Pr)&&(Pi=!!(Pr.depthTexture||Pr.depthStencilTexture),V(!Pi||J.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Pr&&(typeof Pr.depth=="boolean"?Vi=Pr.depth:(na=Pr.depth,ua=!1)),"stencil"in Pr&&(typeof Pr.stencil=="boolean"?ua=Pr.stencil:(ha=Pr.stencil,Vi=!1)),"depthStencil"in Pr&&(typeof Pr.depthStencil=="boolean"?Vi=ua=Pr.depthStencil:(Ma=Pr.depthStencil,Vi=!1,ua=!1))}var xn=null,sr=null,Hr=null,nn=null;if(Array.isArray(Xr))xn=Xr.map(It);else if(Xr)xn=[It(Xr)];else for(xn=new Array(ra),Sr=0;Sr<ra;++Sr)xn[Sr]=Fe(Or,un,ta,Qn,Hi);V(J.webgl_draw_buffers||xn.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),V(xn.length<=ve.maxColorAttachments,"too many color attachments, not supported"),Or=Or||xn[0].width,un=un||xn[0].height,na?sr=It(na):Vi&&!ua&&(sr=Fe(Or,un,Pi,"depth","uint32")),ha?Hr=It(ha):ua&&!Vi&&(Hr=Fe(Or,un,!1,"stencil","uint8")),Ma?nn=It(Ma):!na&&!ha&&ua&&Vi&&(nn=Fe(Or,un,Pi,"depth stencil","depth stencil")),V(!!na+!!ha+!!Ma<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Di=null;for(Sr=0;Sr<xn.length;++Sr)if(Lt(xn[Sr],Or,un),V(!xn[Sr]||xn[Sr].texture&&rie.indexOf(xn[Sr].texture._texture.format)>=0||xn[Sr].renderbuffer&&die.indexOf(xn[Sr].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Sr+" is invalid"),xn[Sr]&&xn[Sr].texture){var yl=bE[xn[Sr].texture._texture.format]*$b[xn[Sr].texture._texture.type];Di===null?Di=yl:V(Di===yl,"all color attachments much have the same number of bits per pixel.")}return Lt(sr,Or,un),V(!sr||sr.texture&&sr.texture._texture.format===tie||sr.renderbuffer&&sr.renderbuffer._renderbuffer.format===oie,"invalid depth attachment for framebuffer object"),Lt(Hr,Or,un),V(!Hr||Hr.renderbuffer&&Hr.renderbuffer._renderbuffer.format===sie,"invalid stencil attachment for framebuffer object"),Lt(nn,Or,un),V(!nn||nn.texture&&nn.texture._texture.format===pL||nn.renderbuffer&&nn.renderbuffer._renderbuffer.format===pL,"invalid depth-stencil attachment for framebuffer object"),gt(ht),ht.width=Or,ht.height=un,ht.colorAttachments=xn,ht.depthAttachment=sr,ht.stencilAttachment=Hr,ht.depthStencilAttachment=nn,vr.color=xn.map(tt),vr.depth=tt(sr),vr.stencil=tt(Hr),vr.depthStencil=tt(nn),vr.width=ht.width,vr.height=ht.height,pt(ht),vr}function Ir(Yt,Gr){V(et.next!==ht,"can not resize a framebuffer which is currently in use");var Sr=Math.max(Yt|0,1),Or=Math.max(Gr|0||Sr,1);if(Sr===ht.width&&Or===ht.height)return vr;for(var un=ht.colorAttachments,Vi=0;Vi<un.length;++Vi)Et(un[Vi],Sr,Or);return Et(ht.depthAttachment,Sr,Or),Et(ht.stencilAttachment,Sr,Or),Et(ht.depthStencilAttachment,Sr,Or),ht.width=vr.width=Sr,ht.height=vr.height=Or,pt(ht),vr}return vr(Ft,At),n(vr,{resize:Ir,_reglType:"framebuffer",_framebuffer:ht,destroy:function(){Pt(ht),gt(ht)},use:function(Yt){et.setFBO({framebuffer:vr},Yt)}})}function ir(Ft){var At=Array(6);function ht(Ir){var Yt;V(At.indexOf(et.next)<0,"can not update framebuffer which is currently in use");var Gr={color:null},Sr=0,Or=null,un="rgba",Vi="uint8",ua=1;if(typeof Ir=="number")Sr=Ir|0;else if(!Ir)Sr=1;else{V.type(Ir,"object","invalid arguments for framebuffer");var Xr=Ir;if("shape"in Xr){var ta=Xr.shape;V(Array.isArray(ta)&&ta.length>=2,"invalid shape for framebuffer"),V(ta[0]===ta[1],"cube framebuffer must be square"),Sr=ta[0]}else"radius"in Xr&&(Sr=Xr.radius|0),"width"in Xr?(Sr=Xr.width|0,"height"in Xr&&V(Xr.height===Sr,"must be square")):"height"in Xr&&(Sr=Xr.height|0);("color"in Xr||"colors"in Xr)&&(Or=Xr.color||Xr.colors,Array.isArray(Or)&&V(Or.length===1||J.webgl_draw_buffers,"multiple render targets not supported")),Or||("colorCount"in Xr&&(ua=Xr.colorCount|0,V(ua>0,"invalid color buffer count")),"colorType"in Xr&&(V.oneOf(Xr.colorType,_t,"invalid color type"),Vi=Xr.colorType),"colorFormat"in Xr&&(un=Xr.colorFormat,V.oneOf(Xr.colorFormat,yt,"invalid color format for texture"))),"depth"in Xr&&(Gr.depth=Xr.depth),"stencil"in Xr&&(Gr.stencil=Xr.stencil),"depthStencil"in Xr&&(Gr.depthStencil=Xr.depthStencil)}var Qn;if(Or)if(Array.isArray(Or))for(Qn=[],Yt=0;Yt<Or.length;++Yt)Qn[Yt]=Or[Yt];else Qn=[Or];else{Qn=Array(ua);var Hi={radius:Sr,format:un,type:Vi};for(Yt=0;Yt<ua;++Yt)Qn[Yt]=Xe.createCube(Hi)}for(Gr.color=Array(Qn.length),Yt=0;Yt<Qn.length;++Yt){var ra=Qn[Yt];V(typeof ra=="function"&&ra._reglType==="textureCube","invalid cube map"),Sr=Sr||ra.width,V(ra.width===Sr&&ra.height===Sr,"invalid cube map shape"),Gr.color[Yt]={target:Bb,data:Qn[Yt]}}for(Yt=0;Yt<6;++Yt){for(var na=0;na<Qn.length;++na)Gr.color[na].target=Bb+Yt;Yt>0&&(Gr.depth=At[0].depth,Gr.stencil=At[0].stencil,Gr.depthStencil=At[0].depthStencil),At[Yt]?At[Yt](Gr):At[Yt]=Dt(Gr)}return n(ht,{width:Sr,height:Sr,color:Qn})}function vr(Ir){var Yt,Gr=Ir|0;if(V(Gr>0&&Gr<=ve.maxCubeMapSize,"invalid radius for cube fbo"),Gr===ht.width)return ht;var Sr=ht.color;for(Yt=0;Yt<Sr.length;++Yt)Sr[Yt].resize(Gr);for(Yt=0;Yt<6;++Yt)At[Yt].resize(Gr);return ht.width=ht.height=Gr,ht}return ht(Ft),n(ht,{faces:At,resize:vr,_reglType:"framebufferCube",destroy:function(){At.forEach(function(Ir){Ir.destroy()})}})}function wr(){et.cur=null,et.next=null,et.dirty=!0,Zo(vt).forEach(function(Ft){Ft.framebuffer=N.createFramebuffer(),pt(Ft)})}return n(et,{getFramebuffer:function(Ft){if(typeof Ft=="function"&&Ft._reglType==="framebuffer"){var At=Ft._framebuffer;if(At instanceof Ut)return At}return null},create:Dt,createCube:ir,clear:function(){Zo(vt).forEach(Pt)},restore:wr})}var vie=5126,gL=34962;function xE(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=vie,this.offset=0,this.stride=0,this.divisor=0}function pie(N,J,ve,Xe,ct){for(var Ye=ve.maxAttributes,et=new Array(Ye),yt=0;yt<Ye;++yt)et[yt]=new xE;var wt=0,_t={},St={Record:xE,scope:{},state:et,currentVAO:null,targetVAO:null,restore:Lt()?vt:function(){},createVAO:Ut,getVAO:It,destroyBuffer:kt,setVAO:Lt()?Fe:tt,clear:Lt()?Et:function(){}};function kt(gt){for(var Pt=0;Pt<et.length;++Pt){var pt=et[Pt];pt.buffer===gt&&(N.disableVertexAttribArray(Pt),pt.buffer=null)}}function Lt(){return J.oes_vertex_array_object}function bt(){return J.angle_instanced_arrays}function It(gt){return typeof gt=="function"&&gt._vao?gt._vao:null}function Fe(gt){if(gt!==St.currentVAO){var Pt=Lt();gt?Pt.bindVertexArrayOES(gt.vao):Pt.bindVertexArrayOES(null),St.currentVAO=gt}}function tt(gt){if(gt!==St.currentVAO){if(gt)gt.bindAttrs();else for(var Pt=bt(),pt=0;pt<et.length;++pt){var Dt=et[pt];Dt.buffer?(N.enableVertexAttribArray(pt),N.vertexAttribPointer(pt,Dt.size,Dt.type,Dt.normalized,Dt.stride,Dt.offfset),Pt&&Dt.divisor&&Pt.vertexAttribDivisorANGLE(pt,Dt.divisor)):(N.disableVertexAttribArray(pt),N.vertexAttrib4f(pt,Dt.x,Dt.y,Dt.z,Dt.w))}St.currentVAO=gt}}function Et(){Zo(_t).forEach(function(gt){gt.destroy()})}function zt(){this.id=++wt,this.attributes=[];var gt=Lt();gt?this.vao=gt.createVertexArrayOES():this.vao=null,_t[this.id]=this,this.buffers=[]}zt.prototype.bindAttrs=function(){for(var gt=bt(),Pt=this.attributes,pt=0;pt<Pt.length;++pt){var Dt=Pt[pt];Dt.buffer?(N.enableVertexAttribArray(pt),N.bindBuffer(gL,Dt.buffer.buffer),N.vertexAttribPointer(pt,Dt.size,Dt.type,Dt.normalized,Dt.stride,Dt.offset),gt&&Dt.divisor&&gt.vertexAttribDivisorANGLE(pt,Dt.divisor)):(N.disableVertexAttribArray(pt),N.vertexAttrib4f(pt,Dt.x,Dt.y,Dt.z,Dt.w))}for(var ir=Pt.length;ir<Ye;++ir)N.disableVertexAttribArray(ir)},zt.prototype.refresh=function(){var gt=Lt();gt&&(gt.bindVertexArrayOES(this.vao),this.bindAttrs(),St.currentVAO=this)},zt.prototype.destroy=function(){if(this.vao){var gt=Lt();this===St.currentVAO&&(St.currentVAO=null,gt.bindVertexArrayOES(null)),gt.deleteVertexArrayOES(this.vao),this.vao=null}_t[this.id]&&(delete _t[this.id],Xe.vaoCount-=1)};function vt(){var gt=Lt();gt&&Zo(_t).forEach(function(Pt){Pt.refresh()})}function Ut(gt){var Pt=new zt;Xe.vaoCount+=1;function pt(Dt){V(Array.isArray(Dt),"arguments to vertex array constructor must be an array"),V(Dt.length<Ye,"too many attributes"),V(Dt.length>0,"must specify at least one attribute");var ir={},wr=Pt.attributes;wr.length=Dt.length;for(var Ft=0;Ft<Dt.length;++Ft){var At=Dt[Ft],ht=wr[Ft]=new xE,vr=At.data||At;if(Array.isArray(vr)||e(vr)||js(vr)){var Ir;Pt.buffers[Ft]&&(Ir=Pt.buffers[Ft],e(vr)&&Ir._buffer.byteLength>=vr.byteLength?Ir.subdata(vr):(Ir.destroy(),Pt.buffers[Ft]=null)),Pt.buffers[Ft]||(Ir=Pt.buffers[Ft]=ct.create(At,gL,!1,!0)),ht.buffer=ct.getBuffer(Ir),ht.size=ht.buffer.dimension|0,ht.normalized=!1,ht.type=ht.buffer.dtype,ht.offset=0,ht.stride=0,ht.divisor=0,ht.state=1,ir[Ft]=1}else ct.getBuffer(At)?(ht.buffer=ct.getBuffer(At),ht.size=ht.buffer.dimension|0,ht.normalized=!1,ht.type=ht.buffer.dtype,ht.offset=0,ht.stride=0,ht.divisor=0,ht.state=1):ct.getBuffer(At.buffer)?(ht.buffer=ct.getBuffer(At.buffer),ht.size=(+At.size||ht.buffer.dimension)|0,ht.normalized=!!At.normalized||!1,"type"in At?(V.parameter(At.type,Af,"invalid buffer type"),ht.type=Af[At.type]):ht.type=ht.buffer.dtype,ht.offset=(At.offset||0)|0,ht.stride=(At.stride||0)|0,ht.divisor=(At.divisor||0)|0,ht.state=1,V(ht.size>=1&&ht.size<=4,"size must be between 1 and 4"),V(ht.offset>=0,"invalid offset"),V(ht.stride>=0&&ht.stride<=255,"stride must be between 0 and 255"),V(ht.divisor>=0,"divisor must be positive"),V(!ht.divisor||!!J.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in At?(V(Ft>0,"first attribute must not be a constant"),ht.x=+At.x||0,ht.y=+At.y||0,ht.z=+At.z||0,ht.w=+At.w||0,ht.state=2):V(!1,"invalid attribute spec for location "+Ft)}for(var Yt=0;Yt<Pt.buffers.length;++Yt)!ir[Yt]&&Pt.buffers[Yt]&&(Pt.buffers[Yt].destroy(),Pt.buffers[Yt]=null);return Pt.refresh(),pt}return pt.destroy=function(){for(var Dt=0;Dt<Pt.buffers.length;++Dt)Pt.buffers[Dt]&&Pt.buffers[Dt].destroy();Pt.buffers.length=0,Pt.destroy()},pt._vao=Pt,pt._reglType="vao",pt(gt)}return St}var mL=35632,gie=35633,mie=35718,yie=35721;function bie(N,J,ve,Xe){var ct={},Ye={};function et(Fe,tt,Et,zt){this.name=Fe,this.id=tt,this.location=Et,this.info=zt}function yt(Fe,tt){for(var Et=0;Et<Fe.length;++Et)if(Fe[Et].id===tt.id){Fe[Et].location=tt.location;return}Fe.push(tt)}function wt(Fe,tt,Et){var zt=Fe===mL?ct:Ye,vt=zt[tt];if(!vt){var Ut=J.str(tt);vt=N.createShader(Fe),N.shaderSource(vt,Ut),N.compileShader(vt),V.shaderError(N,vt,Ut,Fe,Et),zt[tt]=vt}return vt}var _t={},St=[],kt=0;function Lt(Fe,tt){this.id=kt++,this.fragId=Fe,this.vertId=tt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Xe.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function bt(Fe,tt,Et){var zt,vt,Ut=wt(mL,Fe.fragId),gt=wt(gie,Fe.vertId),Pt=Fe.program=N.createProgram();if(N.attachShader(Pt,Ut),N.attachShader(Pt,gt),Et)for(zt=0;zt<Et.length;++zt){var pt=Et[zt];N.bindAttribLocation(Pt,pt[0],pt[1])}N.linkProgram(Pt),V.linkError(N,Pt,J.str(Fe.fragId),J.str(Fe.vertId),tt);var Dt=N.getProgramParameter(Pt,mie);Xe.profile&&(Fe.stats.uniformsCount=Dt);var ir=Fe.uniforms;for(zt=0;zt<Dt;++zt)if(vt=N.getActiveUniform(Pt,zt),vt)if(vt.size>1)for(var wr=0;wr<vt.size;++wr){var Ft=vt.name.replace("[0]","["+wr+"]");yt(ir,new et(Ft,J.id(Ft),N.getUniformLocation(Pt,Ft),vt))}else yt(ir,new et(vt.name,J.id(vt.name),N.getUniformLocation(Pt,vt.name),vt));var At=N.getProgramParameter(Pt,yie);Xe.profile&&(Fe.stats.attributesCount=At);var ht=Fe.attributes;for(zt=0;zt<At;++zt)vt=N.getActiveAttrib(Pt,zt),vt&&yt(ht,new et(vt.name,J.id(vt.name),N.getAttribLocation(Pt,vt.name),vt))}Xe.profile&&(ve.getMaxUniformsCount=function(){var Fe=0;return St.forEach(function(tt){tt.stats.uniformsCount>Fe&&(Fe=tt.stats.uniformsCount)}),Fe},ve.getMaxAttributesCount=function(){var Fe=0;return St.forEach(function(tt){tt.stats.attributesCount>Fe&&(Fe=tt.stats.attributesCount)}),Fe});function It(){ct={},Ye={};for(var Fe=0;Fe<St.length;++Fe)bt(St[Fe],null,St[Fe].attributes.map(function(tt){return[tt.location,tt.name]}))}return{clear:function(){var Fe=N.deleteShader.bind(N);Zo(ct).forEach(Fe),ct={},Zo(Ye).forEach(Fe),Ye={},St.forEach(function(tt){N.deleteProgram(tt.program)}),St.length=0,_t={},ve.shaderCount=0},program:function(Fe,tt,Et,zt){V.command(Fe>=0,"missing vertex shader",Et),V.command(tt>=0,"missing fragment shader",Et);var vt=_t[tt];vt||(vt=_t[tt]={});var Ut=vt[Fe];if(Ut&&(Ut.refCount++,!zt))return Ut;var gt=new Lt(tt,Fe);return ve.shaderCount++,bt(gt,Et,zt),Ut||(vt[Fe]=gt),St.push(gt),n(gt,{destroy:function(){if(gt.refCount--,gt.refCount<=0){N.deleteProgram(gt.program);var Pt=St.indexOf(gt);St.splice(Pt,1),ve.shaderCount--}vt[gt.vertId].refCount<=0&&(N.deleteShader(Ye[gt.vertId]),delete Ye[gt.vertId],delete _t[gt.fragId][gt.vertId]),Object.keys(_t[gt.fragId]).length||(N.deleteShader(ct[gt.fragId]),delete ct[gt.fragId],delete _t[gt.fragId])}})},restore:It,shader:wt,frag:-1,vert:-1}}var xie=6408,Ag=5121,wie=3333,zb=5126;function Sie(N,J,ve,Xe,ct,Ye,et){function yt(St){var kt;J.next===null?(V(ct.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),kt=Ag):(V(J.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),kt=J.next.colorAttachments[0].texture._texture.type,Ye.oes_texture_float?(V(kt===Ag||kt===zb,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),kt===zb&&V(et.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):V(kt===Ag,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Lt=0,bt=0,It=Xe.framebufferWidth,Fe=Xe.framebufferHeight,tt=null;e(St)?tt=St:St&&(V.type(St,"object","invalid arguments to regl.read()"),Lt=St.x|0,bt=St.y|0,V(Lt>=0&&Lt<Xe.framebufferWidth,"invalid x offset for regl.read"),V(bt>=0&&bt<Xe.framebufferHeight,"invalid y offset for regl.read"),It=(St.width||Xe.framebufferWidth-Lt)|0,Fe=(St.height||Xe.framebufferHeight-bt)|0,tt=St.data||null),tt&&(kt===Ag?V(tt instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):kt===zb&&V(tt instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),V(It>0&&It+Lt<=Xe.framebufferWidth,"invalid width for read pixels"),V(Fe>0&&Fe+bt<=Xe.framebufferHeight,"invalid height for read pixels"),ve();var Et=It*Fe*4;return tt||(kt===Ag?tt=new Uint8Array(Et):kt===zb&&(tt=tt||new Float32Array(Et))),V.isTypedArray(tt,"data buffer for regl.read() must be a typedarray"),V(tt.byteLength>=Et,"data buffer for regl.read() too small"),N.pixelStorei(wie,4),N.readPixels(Lt,bt,It,Fe,xie,kt,tt),tt}function wt(St){var kt;return J.setFBO({framebuffer:St.framebuffer},function(){kt=yt(St)}),kt}function _t(St){return!St||!("framebuffer"in St)?yt(St):wt(St)}return _t}function Xh(N){return Array.prototype.slice.call(N)}function qh(N){return Xh(N).join("")}function Cie(){var N=0,J=[],ve=[];function Xe(kt){for(var Lt=0;Lt<ve.length;++Lt)if(ve[Lt]===kt)return J[Lt];var bt="g"+N++;return J.push(bt),ve.push(kt),bt}function ct(){var kt=[];function Lt(){kt.push.apply(kt,Xh(arguments))}var bt=[];function It(){var Fe="v"+N++;return bt.push(Fe),arguments.length>0&&(kt.push(Fe,"="),kt.push.apply(kt,Xh(arguments)),kt.push(";")),Fe}return n(Lt,{def:It,toString:function(){return qh([bt.length>0?"var "+bt.join(",")+";":"",qh(kt)])}})}function Ye(){var kt=ct(),Lt=ct(),bt=kt.toString,It=Lt.toString;function Fe(tt,Et){Lt(tt,Et,"=",kt.def(tt,Et),";")}return n(function(){kt.apply(kt,Xh(arguments))},{def:kt.def,entry:kt,exit:Lt,save:Fe,set:function(tt,Et,zt){Fe(tt,Et),kt(tt,Et,"=",zt,";")},toString:function(){return bt()+It()}})}function et(){var kt=qh(arguments),Lt=Ye(),bt=Ye(),It=Lt.toString,Fe=bt.toString;return n(Lt,{then:function(){return Lt.apply(Lt,Xh(arguments)),this},else:function(){return bt.apply(bt,Xh(arguments)),this},toString:function(){var tt=Fe();return tt&&(tt="else{"+tt+"}"),qh(["if(",kt,"){",It(),"}",tt])}})}var yt=ct(),wt={};function _t(kt,Lt){var bt=[];function It(){var vt="a"+bt.length;return bt.push(vt),vt}Lt=Lt||0;for(var Fe=0;Fe<Lt;++Fe)It();var tt=Ye(),Et=tt.toString,zt=wt[kt]=n(tt,{arg:It,toString:function(){return qh(["function(",bt.join(),"){",Et(),"}"])}});return zt}function St(){var kt=['"use strict";',yt,"return {"];Object.keys(wt).forEach(function(It){kt.push('"',It,'":',wt[It].toString(),",")}),kt.push("}");var Lt=qh(kt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),bt=Function.apply(null,J.concat(Lt));return bt.apply(null,ve)}return{global:yt,link:Xe,block:ct,proc:_t,scope:Ye,cond:et,compile:St}}var Kh="xyzw".split(""),yL=5121,Zh=1,wE=2,SE=0,CE=1,EE=2,_E=3,Gb=4,bL=5,xL=6,wL="dither",SL="blend.enable",CL="blend.color",TE="blend.equation",AE="blend.func",EL="depth.enable",_L="depth.func",TL="depth.range",AL="depth.mask",ME="colorMask",ML="cull.enable",kL="cull.face",kE="frontFace",IE="lineWidth",IL="polygonOffset.enable",PE="polygonOffset.offset",PL="sample.alpha",DL="sample.enable",DE="sample.coverage",RL="stencil.enable",OL="stencil.mask",RE="stencil.func",OE="stencil.opFront",Mg="stencil.opBack",LL="scissor.enable",Ub="scissor.box",du="viewport",kg="profile",Df="framebuffer",Ig="vert",Pg="frag",Rf="elements",Of="primitive",Lf="count",Vb="offset",Hb="instances",Dg="vao",LE="Width",FE="Height",Qh=Df+LE,Jh=Df+FE,Eie=du+LE,_ie=du+FE,FL="drawingBuffer",NL=FL+LE,BL=FL+FE,Tie=[AE,TE,RE,OE,Mg,DE,du,Ub,PE],ev=34962,Aie=34963,Mie=35632,kie=35633,$L=3553,Iie=34067,Pie=2884,Die=3042,Rie=3024,Oie=2960,Lie=2929,Fie=3089,Nie=32823,Bie=32926,$ie=32928,NE=5126,Wb=35664,jb=35665,Yb=35666,BE=5124,Xb=35667,qb=35668,Kb=35669,$E=35670,Zb=35671,Qb=35672,Jb=35673,Rg=35674,Og=35675,Lg=35676,Fg=35678,Ng=35680,zL=4,Bg=1028,Ff=1029,GL=2304,zE=2305,zie=32775,Gie=32776,Uie=519,ac=7680,UL=0,VL=1,HL=32774,Vie=513,WL=36160,Hie=36064,ml={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},jL=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],tv={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},oc={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},YL={frag:Mie,vert:kie},GE={cw:GL,ccw:zE};function ex(N){return Array.isArray(N)||e(N)||js(N)}function XL(N){return N.sort(function(J,ve){return J===du?-1:ve===du?1:J<ve?-1:1})}function go(N,J,ve,Xe){this.thisDep=N,this.contextDep=J,this.propDep=ve,this.append=Xe}function sc(N){return N&&!(N.thisDep||N.contextDep||N.propDep)}function Ui(N){return new go(!1,!1,!1,N)}function Io(N,J){var ve=N.type;if(ve===SE){var Xe=N.data.length;return new go(!0,Xe>=1,Xe>=2,J)}else if(ve===Gb){var ct=N.data;return new go(ct.thisDep,ct.contextDep,ct.propDep,J)}else{if(ve===bL)return new go(!1,!1,!1,J);if(ve===xL){for(var Ye=!1,et=!1,yt=!1,wt=0;wt<N.data.length;++wt){var _t=N.data[wt];if(_t.type===CE)yt=!0;else if(_t.type===EE)et=!0;else if(_t.type===_E)Ye=!0;else if(_t.type===SE){Ye=!0;var St=_t.data;St>=1&&(et=!0),St>=2&&(yt=!0)}else _t.type===Gb&&(Ye=Ye||_t.data.thisDep,et=et||_t.data.contextDep,yt=yt||_t.data.propDep)}return new go(Ye,et,yt,J)}else return new go(ve===_E,ve===EE,ve===CE,J)}}var qL=new go(!1,!1,!1,function(){});function Wie(N,J,ve,Xe,ct,Ye,et,yt,wt,_t,St,kt,Lt,bt,It){var Fe=_t.Record,tt={add:32774,subtract:32778,"reverse subtract":32779};ve.ext_blend_minmax&&(tt.min=zie,tt.max=Gie);var Et=ve.angle_instanced_arrays,zt=ve.webgl_draw_buffers,vt={dirty:!0,profile:It.profile},Ut={},gt=[],Pt={},pt={};function Dt(oe){return oe.replace(".","_")}function ir(oe,K,be){var Re=Dt(oe);gt.push(oe),Ut[Re]=vt[Re]=!!be,Pt[Re]=K}function wr(oe,K,be){var Re=Dt(oe);gt.push(oe),Array.isArray(be)?(vt[Re]=be.slice(),Ut[Re]=be.slice()):vt[Re]=Ut[Re]=be,pt[Re]=K}ir(wL,Rie),ir(SL,Die),wr(CL,"blendColor",[0,0,0,0]),wr(TE,"blendEquationSeparate",[HL,HL]),wr(AE,"blendFuncSeparate",[VL,UL,VL,UL]),ir(EL,Lie,!0),wr(_L,"depthFunc",Vie),wr(TL,"depthRange",[0,1]),wr(AL,"depthMask",!0),wr(ME,ME,[!0,!0,!0,!0]),ir(ML,Pie),wr(kL,"cullFace",Ff),wr(kE,kE,zE),wr(IE,IE,1),ir(IL,Nie),wr(PE,"polygonOffset",[0,0]),ir(PL,Bie),ir(DL,$ie),wr(DE,"sampleCoverage",[1,!1]),ir(RL,Oie),wr(OL,"stencilMask",-1),wr(RE,"stencilFunc",[Uie,0,-1]),wr(OE,"stencilOpSeparate",[Bg,ac,ac,ac]),wr(Mg,"stencilOpSeparate",[Ff,ac,ac,ac]),ir(LL,Fie),wr(Ub,"scissor",[0,0,N.drawingBufferWidth,N.drawingBufferHeight]),wr(du,du,[0,0,N.drawingBufferWidth,N.drawingBufferHeight]);var Ft={gl:N,context:Lt,strings:J,next:Ut,current:vt,draw:kt,elements:Ye,buffer:ct,shader:St,attributes:_t.state,vao:_t,uniforms:wt,framebuffer:yt,extensions:ve,timer:bt,isBufferArgs:ex},At={primTypes:zh,compareFuncs:tv,blendFuncs:ml,blendEquations:tt,stencilOps:oc,glTypes:Af,orientationType:GE};V.optional(function(){Ft.isArrayLike=Ii}),zt&&(At.backBuffer=[Ff],At.drawBuffer=Er(Xe.maxDrawbuffers,function(oe){return oe===0?[0]:Er(oe,function(K){return Hie+K})}));var ht=0;function vr(){var oe=Cie(),K=oe.link,be=oe.global;oe.id=ht++,oe.batchId="0";var Re=K(Ft),$e=oe.shared={props:"a0"};Object.keys(Ft).forEach(function(ye){$e[ye]=be.def(Re,".",ye)}),V.optional(function(){oe.CHECK=K(V),oe.commandStr=V.guessCommand(),oe.command=K(oe.commandStr),oe.assert=function(ye,ie,Pe){ye("if(!(",ie,"))",this.CHECK,".commandRaise(",K(Pe),",",this.command,");")},At.invalidBlendCombinations=jL});var Ce=oe.next={},xe=oe.current={};Object.keys(pt).forEach(function(ye){Array.isArray(vt[ye])&&(Ce[ye]=be.def($e.next,".",ye),xe[ye]=be.def($e.current,".",ye))});var Me=oe.constants={};Object.keys(At).forEach(function(ye){Me[ye]=be.def(JSON.stringify(At[ye]))}),oe.invoke=function(ye,ie){switch(ie.type){case SE:var Pe=["this",$e.context,$e.props,oe.batchId];return ye.def(K(ie.data),".call(",Pe.slice(0,Math.max(ie.data.length+1,4)),")");case CE:return ye.def($e.props,ie.data);case EE:return ye.def($e.context,ie.data);case _E:return ye.def("this",ie.data);case Gb:return ie.data.append(oe,ye),ie.data.ref;case bL:return ie.data.toString();case xL:return ie.data.map(function(Ue){return oe.invoke(ye,Ue)})}},oe.attribCache={};var se={};return oe.scopeAttrib=function(ye){var ie=J.id(ye);if(ie in se)return se[ie];var Pe=_t.scope[ie];Pe||(Pe=_t.scope[ie]=new Fe);var Ue=se[ie]=K(Pe);return Ue},oe}function Ir(oe){var K=oe.static,be=oe.dynamic,Re;if(kg in K){var $e=!!K[kg];Re=Ui(function(xe,Me){return $e}),Re.enable=$e}else if(kg in be){var Ce=be[kg];Re=Io(Ce,function(xe,Me){return xe.invoke(Me,Ce)})}return Re}function Yt(oe,K){var be=oe.static,Re=oe.dynamic;if(Df in be){var $e=be[Df];return $e?($e=yt.getFramebuffer($e),V.command($e,"invalid framebuffer object"),Ui(function(xe,Me){var se=xe.link($e),ye=xe.shared;Me.set(ye.framebuffer,".next",se);var ie=ye.context;return Me.set(ie,"."+Qh,se+".width"),Me.set(ie,"."+Jh,se+".height"),se})):Ui(function(xe,Me){var se=xe.shared;Me.set(se.framebuffer,".next","null");var ye=se.context;return Me.set(ye,"."+Qh,ye+"."+NL),Me.set(ye,"."+Jh,ye+"."+BL),"null"})}else if(Df in Re){var Ce=Re[Df];return Io(Ce,function(xe,Me){var se=xe.invoke(Me,Ce),ye=xe.shared,ie=ye.framebuffer,Pe=Me.def(ie,".getFramebuffer(",se,")");V.optional(function(){xe.assert(Me,"!"+se+"||"+Pe,"invalid framebuffer object")}),Me.set(ie,".next",Pe);var Ue=ye.context;return Me.set(Ue,"."+Qh,Pe+"?"+Pe+".width:"+Ue+"."+NL),Me.set(Ue,"."+Jh,Pe+"?"+Pe+".height:"+Ue+"."+BL),Pe})}else return null}function Gr(oe,K,be){var Re=oe.static,$e=oe.dynamic;function Ce(se){if(se in Re){var ye=Re[se];V.commandType(ye,"object","invalid "+se,be.commandStr);var ie=!0,Pe=ye.x|0,Ue=ye.y|0,ot,ft;return"width"in ye?(ot=ye.width|0,V.command(ot>=0,"invalid "+se,be.commandStr)):ie=!1,"height"in ye?(ft=ye.height|0,V.command(ft>=0,"invalid "+se,be.commandStr)):ie=!1,new go(!ie&&K&&K.thisDep,!ie&&K&&K.contextDep,!ie&&K&&K.propDep,function(er,Dr){var Xt=er.shared.context,lr=ot;"width"in ye||(lr=Dr.def(Xt,".",Qh,"-",Pe));var _r=ft;return"height"in ye||(_r=Dr.def(Xt,".",Jh,"-",Ue)),[Pe,Ue,lr,_r]})}else if(se in $e){var at=$e[se],Ct=Io(at,function(er,Dr){var Xt=er.invoke(Dr,at);V.optional(function(){er.assert(Dr,Xt+"&&typeof "+Xt+'==="object"',"invalid "+se)});var lr=er.shared.context,_r=Dr.def(Xt,".x|0"),cn=Dr.def(Xt,".y|0"),Si=Dr.def('"width" in ',Xt,"?",Xt,".width|0:","(",lr,".",Qh,"-",_r,")"),mo=Dr.def('"height" in ',Xt,"?",Xt,".height|0:","(",lr,".",Jh,"-",cn,")");return V.optional(function(){er.assert(Dr,Si+">=0&&"+mo+">=0","invalid "+se)}),[_r,cn,Si,mo]});return K&&(Ct.thisDep=Ct.thisDep||K.thisDep,Ct.contextDep=Ct.contextDep||K.contextDep,Ct.propDep=Ct.propDep||K.propDep),Ct}else return K?new go(K.thisDep,K.contextDep,K.propDep,function(er,Dr){var Xt=er.shared.context;return[0,0,Dr.def(Xt,".",Qh),Dr.def(Xt,".",Jh)]}):null}var xe=Ce(du);if(xe){var Me=xe;xe=new go(xe.thisDep,xe.contextDep,xe.propDep,function(se,ye){var ie=Me.append(se,ye),Pe=se.shared.context;return ye.set(Pe,"."+Eie,ie[2]),ye.set(Pe,"."+_ie,ie[3]),ie})}return{viewport:xe,scissor_box:Ce(Ub)}}function Sr(oe,K){var be=oe.static,Re=typeof be[Pg]=="string"&&typeof be[Ig]=="string";if(Re){if(Object.keys(K.dynamic).length>0)return null;var $e=K.static,Ce=Object.keys($e);if(Ce.length>0&&typeof $e[Ce[0]]=="number"){for(var xe=[],Me=0;Me<Ce.length;++Me)V(typeof $e[Ce[Me]]=="number","must specify all vertex attribute locations when using vaos"),xe.push([$e[Ce[Me]]|0,Ce[Me]]);return xe}}return null}function Or(oe,K,be){var Re=oe.static,$e=oe.dynamic;function Ce(ie){if(ie in Re){var Pe=J.id(Re[ie]);V.optional(function(){St.shader(YL[ie],Pe,V.guessCommand())});var Ue=Ui(function(){return Pe});return Ue.id=Pe,Ue}else if(ie in $e){var ot=$e[ie];return Io(ot,function(ft,at){var Ct=ft.invoke(at,ot),er=at.def(ft.shared.strings,".id(",Ct,")");return V.optional(function(){at(ft.shared.shader,".shader(",YL[ie],",",er,",",ft.command,");")}),er})}return null}var xe=Ce(Pg),Me=Ce(Ig),se=null,ye;return sc(xe)&&sc(Me)?(se=St.program(Me.id,xe.id,null,be),ye=Ui(function(ie,Pe){return ie.link(se)})):ye=new go(xe&&xe.thisDep||Me&&Me.thisDep,xe&&xe.contextDep||Me&&Me.contextDep,xe&&xe.propDep||Me&&Me.propDep,function(ie,Pe){var Ue=ie.shared.shader,ot;xe?ot=xe.append(ie,Pe):ot=Pe.def(Ue,".",Pg);var ft;Me?ft=Me.append(ie,Pe):ft=Pe.def(Ue,".",Ig);var at=Ue+".program("+ft+","+ot;return V.optional(function(){at+=","+ie.command}),Pe.def(at+")")}),{frag:xe,vert:Me,progVar:ye,program:se}}function un(oe,K){var be=oe.static,Re=oe.dynamic;function $e(){if(Rf in be){var ie=be[Rf];ex(ie)?ie=Ye.getElements(Ye.create(ie,!0)):ie&&(ie=Ye.getElements(ie),V.command(ie,"invalid elements",K.commandStr));var Pe=Ui(function(ot,ft){if(ie){var at=ot.link(ie);return ot.ELEMENTS=at,at}return ot.ELEMENTS=null,null});return Pe.value=ie,Pe}else if(Rf in Re){var Ue=Re[Rf];return Io(Ue,function(ot,ft){var at=ot.shared,Ct=at.isBufferArgs,er=at.elements,Dr=ot.invoke(ft,Ue),Xt=ft.def("null"),lr=ft.def(Ct,"(",Dr,")"),_r=ot.cond(lr).then(Xt,"=",er,".createStream(",Dr,");").else(Xt,"=",er,".getElements(",Dr,");");return V.optional(function(){ot.assert(_r.else,"!"+Dr+"||"+Xt,"invalid elements")}),ft.entry(_r),ft.exit(ot.cond(lr).then(er,".destroyStream(",Xt,");")),ot.ELEMENTS=Xt,Xt})}return null}var Ce=$e();function xe(){if(Of in be){var ie=be[Of];return V.commandParameter(ie,zh,"invalid primitve",K.commandStr),Ui(function(Ue,ot){return zh[ie]})}else if(Of in Re){var Pe=Re[Of];return Io(Pe,function(Ue,ot){var ft=Ue.constants.primTypes,at=Ue.invoke(ot,Pe);return V.optional(function(){Ue.assert(ot,at+" in "+ft,"invalid primitive, must be one of "+Object.keys(zh))}),ot.def(ft,"[",at,"]")})}else if(Ce)return sc(Ce)?Ce.value?Ui(function(Ue,ot){return ot.def(Ue.ELEMENTS,".primType")}):Ui(function(){return zL}):new go(Ce.thisDep,Ce.contextDep,Ce.propDep,function(Ue,ot){var ft=Ue.ELEMENTS;return ot.def(ft,"?",ft,".primType:",zL)});return null}function Me(ie,Pe){if(ie in be){var Ue=be[ie]|0;return V.command(!Pe||Ue>=0,"invalid "+ie,K.commandStr),Ui(function(ft,at){return Pe&&(ft.OFFSET=Ue),Ue})}else if(ie in Re){var ot=Re[ie];return Io(ot,function(ft,at){var Ct=ft.invoke(at,ot);return Pe&&(ft.OFFSET=Ct,V.optional(function(){ft.assert(at,Ct+">=0","invalid "+ie)})),Ct})}else if(Pe&&Ce)return Ui(function(ft,at){return ft.OFFSET="0",0});return null}var se=Me(Vb,!0);function ye(){if(Lf in be){var ie=be[Lf]|0;return V.command(typeof ie=="number"&&ie>=0,"invalid vertex count",K.commandStr),Ui(function(){return ie})}else if(Lf in Re){var Pe=Re[Lf];return Io(Pe,function(ft,at){var Ct=ft.invoke(at,Pe);return V.optional(function(){ft.assert(at,"typeof "+Ct+'==="number"&&'+Ct+">=0&&"+Ct+"===("+Ct+"|0)","invalid vertex count")}),Ct})}else if(Ce)if(sc(Ce)){if(Ce)return se?new go(se.thisDep,se.contextDep,se.propDep,function(ft,at){var Ct=at.def(ft.ELEMENTS,".vertCount-",ft.OFFSET);return V.optional(function(){ft.assert(at,Ct+">=0","invalid vertex offset/element buffer too small")}),Ct}):Ui(function(ft,at){return at.def(ft.ELEMENTS,".vertCount")});var Ue=Ui(function(){return-1});return V.optional(function(){Ue.MISSING=!0}),Ue}else{var ot=new go(Ce.thisDep||se.thisDep,Ce.contextDep||se.contextDep,Ce.propDep||se.propDep,function(ft,at){var Ct=ft.ELEMENTS;return ft.OFFSET?at.def(Ct,"?",Ct,".vertCount-",ft.OFFSET,":-1"):at.def(Ct,"?",Ct,".vertCount:-1")});return V.optional(function(){ot.DYNAMIC=!0}),ot}return null}return{elements:Ce,primitive:xe(),count:ye(),instances:Me(Hb,!1),offset:se}}function Vi(oe,K){var be=oe.static,Re=oe.dynamic,$e={};return gt.forEach(function(Ce){var xe=Dt(Ce);function Me(se,ye){if(Ce in be){var ie=se(be[Ce]);$e[xe]=Ui(function(){return ie})}else if(Ce in Re){var Pe=Re[Ce];$e[xe]=Io(Pe,function(Ue,ot){return ye(Ue,ot,Ue.invoke(ot,Pe))})}}switch(Ce){case ML:case SL:case wL:case RL:case EL:case LL:case IL:case PL:case DL:case AL:return Me(function(se){return V.commandType(se,"boolean",Ce,K.commandStr),se},function(se,ye,ie){return V.optional(function(){se.assert(ye,"typeof "+ie+'==="boolean"',"invalid flag "+Ce,se.commandStr)}),ie});case _L:return Me(function(se){return V.commandParameter(se,tv,"invalid "+Ce,K.commandStr),tv[se]},function(se,ye,ie){var Pe=se.constants.compareFuncs;return V.optional(function(){se.assert(ye,ie+" in "+Pe,"invalid "+Ce+", must be one of "+Object.keys(tv))}),ye.def(Pe,"[",ie,"]")});case TL:return Me(function(se){return V.command(Ii(se)&&se.length===2&&typeof se[0]=="number"&&typeof se[1]=="number"&&se[0]<=se[1],"depth range is 2d array",K.commandStr),se},function(se,ye,ie){V.optional(function(){se.assert(ye,se.shared.isArrayLike+"("+ie+")&&"+ie+".length===2&&typeof "+ie+'[0]==="number"&&typeof '+ie+'[1]==="number"&&'+ie+"[0]<="+ie+"[1]","depth range must be a 2d array")});var Pe=ye.def("+",ie,"[0]"),Ue=ye.def("+",ie,"[1]");return[Pe,Ue]});case AE:return Me(function(se){V.commandType(se,"object","blend.func",K.commandStr);var ye="srcRGB"in se?se.srcRGB:se.src,ie="srcAlpha"in se?se.srcAlpha:se.src,Pe="dstRGB"in se?se.dstRGB:se.dst,Ue="dstAlpha"in se?se.dstAlpha:se.dst;return V.commandParameter(ye,ml,xe+".srcRGB",K.commandStr),V.commandParameter(ie,ml,xe+".srcAlpha",K.commandStr),V.commandParameter(Pe,ml,xe+".dstRGB",K.commandStr),V.commandParameter(Ue,ml,xe+".dstAlpha",K.commandStr),V.command(jL.indexOf(ye+", "+Pe)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+ye+", "+Pe+")",K.commandStr),[ml[ye],ml[Pe],ml[ie],ml[Ue]]},function(se,ye,ie){var Pe=se.constants.blendFuncs;V.optional(function(){se.assert(ye,ie+"&&typeof "+ie+'==="object"',"invalid blend func, must be an object")});function Ue(Xt,lr){var _r=ye.def('"',Xt,lr,'" in ',ie,"?",ie,".",Xt,lr,":",ie,".",Xt);return V.optional(function(){se.assert(ye,_r+" in "+Pe,"invalid "+Ce+"."+Xt+lr+", must be one of "+Object.keys(ml))}),_r}var ot=Ue("src","RGB"),ft=Ue("dst","RGB");V.optional(function(){var Xt=se.constants.invalidBlendCombinations;se.assert(ye,Xt+".indexOf("+ot+'+", "+'+ft+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var at=ye.def(Pe,"[",ot,"]"),Ct=ye.def(Pe,"[",Ue("src","Alpha"),"]"),er=ye.def(Pe,"[",ft,"]"),Dr=ye.def(Pe,"[",Ue("dst","Alpha"),"]");return[at,er,Ct,Dr]});case TE:return Me(function(se){if(typeof se=="string")return V.commandParameter(se,tt,"invalid "+Ce,K.commandStr),[tt[se],tt[se]];if(typeof se=="object")return V.commandParameter(se.rgb,tt,Ce+".rgb",K.commandStr),V.commandParameter(se.alpha,tt,Ce+".alpha",K.commandStr),[tt[se.rgb],tt[se.alpha]];V.commandRaise("invalid blend.equation",K.commandStr)},function(se,ye,ie){var Pe=se.constants.blendEquations,Ue=ye.def(),ot=ye.def(),ft=se.cond("typeof ",ie,'==="string"');return V.optional(function(){function at(Ct,er,Dr){se.assert(Ct,Dr+" in "+Pe,"invalid "+er+", must be one of "+Object.keys(tt))}at(ft.then,Ce,ie),se.assert(ft.else,ie+"&&typeof "+ie+'==="object"',"invalid "+Ce),at(ft.else,Ce+".rgb",ie+".rgb"),at(ft.else,Ce+".alpha",ie+".alpha")}),ft.then(Ue,"=",ot,"=",Pe,"[",ie,"];"),ft.else(Ue,"=",Pe,"[",ie,".rgb];",ot,"=",Pe,"[",ie,".alpha];"),ye(ft),[Ue,ot]});case CL:return Me(function(se){return V.command(Ii(se)&&se.length===4,"blend.color must be a 4d array",K.commandStr),Er(4,function(ye){return+se[ye]})},function(se,ye,ie){return V.optional(function(){se.assert(ye,se.shared.isArrayLike+"("+ie+")&&"+ie+".length===4","blend.color must be a 4d array")}),Er(4,function(Pe){return ye.def("+",ie,"[",Pe,"]")})});case OL:return Me(function(se){return V.commandType(se,"number",xe,K.commandStr),se|0},function(se,ye,ie){return V.optional(function(){se.assert(ye,"typeof "+ie+'==="number"',"invalid stencil.mask")}),ye.def(ie,"|0")});case RE:return Me(function(se){V.commandType(se,"object",xe,K.commandStr);var ye=se.cmp||"keep",ie=se.ref||0,Pe="mask"in se?se.mask:-1;return V.commandParameter(ye,tv,Ce+".cmp",K.commandStr),V.commandType(ie,"number",Ce+".ref",K.commandStr),V.commandType(Pe,"number",Ce+".mask",K.commandStr),[tv[ye],ie,Pe]},function(se,ye,ie){var Pe=se.constants.compareFuncs;V.optional(function(){function at(){se.assert(ye,Array.prototype.join.call(arguments,""),"invalid stencil.func")}at(ie+"&&typeof ",ie,'==="object"'),at('!("cmp" in ',ie,")||(",ie,".cmp in ",Pe,")")});var Ue=ye.def('"cmp" in ',ie,"?",Pe,"[",ie,".cmp]",":",ac),ot=ye.def(ie,".ref|0"),ft=ye.def('"mask" in ',ie,"?",ie,".mask|0:-1");return[Ue,ot,ft]});case OE:case Mg:return Me(function(se){V.commandType(se,"object",xe,K.commandStr);var ye=se.fail||"keep",ie=se.zfail||"keep",Pe=se.zpass||"keep";return V.commandParameter(ye,oc,Ce+".fail",K.commandStr),V.commandParameter(ie,oc,Ce+".zfail",K.commandStr),V.commandParameter(Pe,oc,Ce+".zpass",K.commandStr),[Ce===Mg?Ff:Bg,oc[ye],oc[ie],oc[Pe]]},function(se,ye,ie){var Pe=se.constants.stencilOps;V.optional(function(){se.assert(ye,ie+"&&typeof "+ie+'==="object"',"invalid "+Ce)});function Ue(ot){return V.optional(function(){se.assert(ye,'!("'+ot+'" in '+ie+")||("+ie+"."+ot+" in "+Pe+")","invalid "+Ce+"."+ot+", must be one of "+Object.keys(oc))}),ye.def('"',ot,'" in ',ie,"?",Pe,"[",ie,".",ot,"]:",ac)}return[Ce===Mg?Ff:Bg,Ue("fail"),Ue("zfail"),Ue("zpass")]});case PE:return Me(function(se){V.commandType(se,"object",xe,K.commandStr);var ye=se.factor|0,ie=se.units|0;return V.commandType(ye,"number",xe+".factor",K.commandStr),V.commandType(ie,"number",xe+".units",K.commandStr),[ye,ie]},function(se,ye,ie){V.optional(function(){se.assert(ye,ie+"&&typeof "+ie+'==="object"',"invalid "+Ce)});var Pe=ye.def(ie,".factor|0"),Ue=ye.def(ie,".units|0");return[Pe,Ue]});case kL:return Me(function(se){var ye=0;return se==="front"?ye=Bg:se==="back"&&(ye=Ff),V.command(!!ye,xe,K.commandStr),ye},function(se,ye,ie){return V.optional(function(){se.assert(ye,ie+'==="front"||'+ie+'==="back"',"invalid cull.face")}),ye.def(ie,'==="front"?',Bg,":",Ff)});case IE:return Me(function(se){return V.command(typeof se=="number"&&se>=Xe.lineWidthDims[0]&&se<=Xe.lineWidthDims[1],"invalid line width, must be a positive number between "+Xe.lineWidthDims[0]+" and "+Xe.lineWidthDims[1],K.commandStr),se},function(se,ye,ie){return V.optional(function(){se.assert(ye,"typeof "+ie+'==="number"&&'+ie+">="+Xe.lineWidthDims[0]+"&&"+ie+"<="+Xe.lineWidthDims[1],"invalid line width")}),ie});case kE:return Me(function(se){return V.commandParameter(se,GE,xe,K.commandStr),GE[se]},function(se,ye,ie){return V.optional(function(){se.assert(ye,ie+'==="cw"||'+ie+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),ye.def(ie+'==="cw"?'+GL+":"+zE)});case ME:return Me(function(se){return V.command(Ii(se)&&se.length===4,"color.mask must be length 4 array",K.commandStr),se.map(function(ye){return!!ye})},function(se,ye,ie){return V.optional(function(){se.assert(ye,se.shared.isArrayLike+"("+ie+")&&"+ie+".length===4","invalid color.mask")}),Er(4,function(Pe){return"!!"+ie+"["+Pe+"]"})});case DE:return Me(function(se){V.command(typeof se=="object"&&se,xe,K.commandStr);var ye="value"in se?se.value:1,ie=!!se.invert;return V.command(typeof ye=="number"&&ye>=0&&ye<=1,"sample.coverage.value must be a number between 0 and 1",K.commandStr),[ye,ie]},function(se,ye,ie){V.optional(function(){se.assert(ye,ie+"&&typeof "+ie+'==="object"',"invalid sample.coverage")});var Pe=ye.def('"value" in ',ie,"?+",ie,".value:1"),Ue=ye.def("!!",ie,".invert");return[Pe,Ue]})}}),$e}function ua(oe,K){var be=oe.static,Re=oe.dynamic,$e={};return Object.keys(be).forEach(function(Ce){var xe=be[Ce],Me;if(typeof xe=="number"||typeof xe=="boolean")Me=Ui(function(){return xe});else if(typeof xe=="function"){var se=xe._reglType;se==="texture2d"||se==="textureCube"?Me=Ui(function(ye){return ye.link(xe)}):se==="framebuffer"||se==="framebufferCube"?(V.command(xe.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Ce+'"',K.commandStr),Me=Ui(function(ye){return ye.link(xe.color[0])})):V.commandRaise('invalid data for uniform "'+Ce+'"',K.commandStr)}else Ii(xe)?Me=Ui(function(ye){var ie=ye.global.def("[",Er(xe.length,function(Pe){return V.command(typeof xe[Pe]=="number"||typeof xe[Pe]=="boolean","invalid uniform "+Ce,ye.commandStr),xe[Pe]}),"]");return ie}):V.commandRaise('invalid or missing data for uniform "'+Ce+'"',K.commandStr);Me.value=xe,$e[Ce]=Me}),Object.keys(Re).forEach(function(Ce){var xe=Re[Ce];$e[Ce]=Io(xe,function(Me,se){return Me.invoke(se,xe)})}),$e}function Xr(oe,K){var be=oe.static,Re=oe.dynamic,$e={};return Object.keys(be).forEach(function(Ce){var xe=be[Ce],Me=J.id(Ce),se=new Fe;if(ex(xe))se.state=Zh,se.buffer=ct.getBuffer(ct.create(xe,ev,!1,!0)),se.type=0;else{var ye=ct.getBuffer(xe);if(ye)se.state=Zh,se.buffer=ye,se.type=0;else if(V.command(typeof xe=="object"&&xe,"invalid data for attribute "+Ce,K.commandStr),"constant"in xe){var ie=xe.constant;se.buffer="null",se.state=wE,typeof ie=="number"?se.x=ie:(V.command(Ii(ie)&&ie.length>0&&ie.length<=4,"invalid constant for attribute "+Ce,K.commandStr),Kh.forEach(function(er,Dr){Dr<ie.length&&(se[er]=ie[Dr])}))}else{ex(xe.buffer)?ye=ct.getBuffer(ct.create(xe.buffer,ev,!1,!0)):ye=ct.getBuffer(xe.buffer),V.command(!!ye,'missing buffer for attribute "'+Ce+'"',K.commandStr);var Pe=xe.offset|0;V.command(Pe>=0,'invalid offset for attribute "'+Ce+'"',K.commandStr);var Ue=xe.stride|0;V.command(Ue>=0&&Ue<256,'invalid stride for attribute "'+Ce+'", must be integer betweeen [0, 255]',K.commandStr);var ot=xe.size|0;V.command(!("size"in xe)||ot>0&&ot<=4,'invalid size for attribute "'+Ce+'", must be 1,2,3,4',K.commandStr);var ft=!!xe.normalized,at=0;"type"in xe&&(V.commandParameter(xe.type,Af,"invalid type for attribute "+Ce,K.commandStr),at=Af[xe.type]);var Ct=xe.divisor|0;"divisor"in xe&&(V.command(Ct===0||Et,'cannot specify divisor for attribute "'+Ce+'", instancing not supported',K.commandStr),V.command(Ct>=0,'invalid divisor for attribute "'+Ce+'"',K.commandStr)),V.optional(function(){var er=K.commandStr,Dr=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(xe).forEach(function(Xt){V.command(Dr.indexOf(Xt)>=0,'unknown parameter "'+Xt+'" for attribute pointer "'+Ce+'" (valid parameters are '+Dr+")",er)})}),se.buffer=ye,se.state=Zh,se.size=ot,se.normalized=ft,se.type=at||ye.dtype,se.offset=Pe,se.stride=Ue,se.divisor=Ct}}$e[Ce]=Ui(function(er,Dr){var Xt=er.attribCache;if(Me in Xt)return Xt[Me];var lr={isStream:!1};return Object.keys(se).forEach(function(_r){lr[_r]=se[_r]}),se.buffer&&(lr.buffer=er.link(se.buffer),lr.type=lr.type||lr.buffer+".dtype"),Xt[Me]=lr,lr})}),Object.keys(Re).forEach(function(Ce){var xe=Re[Ce];function Me(se,ye){var ie=se.invoke(ye,xe),Pe=se.shared,Ue=se.constants,ot=Pe.isBufferArgs,ft=Pe.buffer;V.optional(function(){se.assert(ye,ie+"&&(typeof "+ie+'==="object"||typeof '+ie+'==="function")&&('+ot+"("+ie+")||"+ft+".getBuffer("+ie+")||"+ft+".getBuffer("+ie+".buffer)||"+ot+"("+ie+'.buffer)||("constant" in '+ie+"&&(typeof "+ie+'.constant==="number"||'+Pe.isArrayLike+"("+ie+".constant))))",'invalid dynamic attribute "'+Ce+'"')});var at={isStream:ye.def(!1)},Ct=new Fe;Ct.state=Zh,Object.keys(Ct).forEach(function(lr){at[lr]=ye.def(""+Ct[lr])});var er=at.buffer,Dr=at.type;ye("if(",ot,"(",ie,")){",at.isStream,"=true;",er,"=",ft,".createStream(",ev,",",ie,");",Dr,"=",er,".dtype;","}else{",er,"=",ft,".getBuffer(",ie,");","if(",er,"){",Dr,"=",er,".dtype;",'}else if("constant" in ',ie,"){",at.state,"=",wE,";","if(typeof "+ie+'.constant === "number"){',at[Kh[0]],"=",ie,".constant;",Kh.slice(1).map(function(lr){return at[lr]}).join("="),"=0;","}else{",Kh.map(function(lr,_r){return at[lr]+"="+ie+".constant.length>"+_r+"?"+ie+".constant["+_r+"]:0;"}).join(""),"}}else{","if(",ot,"(",ie,".buffer)){",er,"=",ft,".createStream(",ev,",",ie,".buffer);","}else{",er,"=",ft,".getBuffer(",ie,".buffer);","}",Dr,'="type" in ',ie,"?",Ue.glTypes,"[",ie,".type]:",er,".dtype;",at.normalized,"=!!",ie,".normalized;");function Xt(lr){ye(at[lr],"=",ie,".",lr,"|0;")}return Xt("size"),Xt("offset"),Xt("stride"),Xt("divisor"),ye("}}"),ye.exit("if(",at.isStream,"){",ft,".destroyStream(",er,");","}"),at}$e[Ce]=Io(xe,Me)}),$e}function ta(oe,K){var be=oe.static,Re=oe.dynamic;if(Dg in be){var $e=be[Dg];return $e!==null&&_t.getVAO($e)===null&&($e=_t.createVAO($e)),Ui(function(xe){return xe.link(_t.getVAO($e))})}else if(Dg in Re){var Ce=Re[Dg];return Io(Ce,function(xe,Me){var se=xe.invoke(Me,Ce);return Me.def(xe.shared.vao+".getVAO("+se+")")})}return null}function Qn(oe){var K=oe.static,be=oe.dynamic,Re={};return Object.keys(K).forEach(function($e){var Ce=K[$e];Re[$e]=Ui(function(xe,Me){return typeof Ce=="number"||typeof Ce=="boolean"?""+Ce:xe.link(Ce)})}),Object.keys(be).forEach(function($e){var Ce=be[$e];Re[$e]=Io(Ce,function(xe,Me){return xe.invoke(Me,Ce)})}),Re}function Hi(oe,K,be,Re,$e){var Ce=oe.static,xe=oe.dynamic;V.optional(function(){var Xt=[Df,Ig,Pg,Rf,Of,Vb,Lf,Hb,kg,Dg].concat(gt);function lr(_r){Object.keys(_r).forEach(function(cn){V.command(Xt.indexOf(cn)>=0,'unknown parameter "'+cn+'"',$e.commandStr)})}lr(Ce),lr(xe)});var Me=Sr(oe,K),se=Yt(oe),ye=Gr(oe,se,$e),ie=un(oe,$e),Pe=Vi(oe,$e),Ue=Or(oe,$e,Me);function ot(Xt){var lr=ye[Xt];lr&&(Pe[Xt]=lr)}ot(du),ot(Dt(Ub));var ft=Object.keys(Pe).length>0,at={framebuffer:se,draw:ie,shader:Ue,state:Pe,dirty:ft,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(at.profile=Ir(oe),at.uniforms=ua(be,$e),at.drawVAO=at.scopeVAO=ta(oe),!at.drawVAO&&Ue.program&&!Me&&ve.angle_instanced_arrays){var Ct=!0,er=Ue.program.attributes.map(function(Xt){var lr=K.static[Xt];return Ct=Ct&&!!lr,lr});if(Ct&&er.length>0){var Dr=_t.getVAO(_t.createVAO(er));at.drawVAO=new go(null,null,null,function(Xt,lr){return Xt.link(Dr)}),at.useVAO=!0}}return Me?at.useVAO=!0:at.attributes=Xr(K,$e),at.context=Qn(Re),at}function ra(oe,K,be){var Re=oe.shared,$e=Re.context,Ce=oe.scope();Object.keys(be).forEach(function(xe){K.save($e,"."+xe);var Me=be[xe],se=Me.append(oe,K);Array.isArray(se)?Ce($e,".",xe,"=[",se.join(),"];"):Ce($e,".",xe,"=",se,";")}),K(Ce)}function na(oe,K,be,Re){var $e=oe.shared,Ce=$e.gl,xe=$e.framebuffer,Me;zt&&(Me=K.def($e.extensions,".webgl_draw_buffers"));var se=oe.constants,ye=se.drawBuffer,ie=se.backBuffer,Pe;be?Pe=be.append(oe,K):Pe=K.def(xe,".next"),Re||K("if(",Pe,"!==",xe,".cur){"),K("if(",Pe,"){",Ce,".bindFramebuffer(",WL,",",Pe,".framebuffer);"),zt&&K(Me,".drawBuffersWEBGL(",ye,"[",Pe,".colorAttachments.length]);"),K("}else{",Ce,".bindFramebuffer(",WL,",null);"),zt&&K(Me,".drawBuffersWEBGL(",ie,");"),K("}",xe,".cur=",Pe,";"),Re||K("}")}function ha(oe,K,be){var Re=oe.shared,$e=Re.gl,Ce=oe.current,xe=oe.next,Me=Re.current,se=Re.next,ye=oe.cond(Me,".dirty");gt.forEach(function(ie){var Pe=Dt(ie);if(!(Pe in be.state)){var Ue,ot;if(Pe in xe){Ue=xe[Pe],ot=Ce[Pe];var ft=Er(vt[Pe].length,function(Ct){return ye.def(Ue,"[",Ct,"]")});ye(oe.cond(ft.map(function(Ct,er){return Ct+"!=="+ot+"["+er+"]"}).join("||")).then($e,".",pt[Pe],"(",ft,");",ft.map(function(Ct,er){return ot+"["+er+"]="+Ct}).join(";"),";"))}else{Ue=ye.def(se,".",Pe);var at=oe.cond(Ue,"!==",Me,".",Pe);ye(at),Pe in Pt?at(oe.cond(Ue).then($e,".enable(",Pt[Pe],");").else($e,".disable(",Pt[Pe],");"),Me,".",Pe,"=",Ue,";"):at($e,".",pt[Pe],"(",Ue,");",Me,".",Pe,"=",Ue,";")}}}),Object.keys(be.state).length===0&&ye(Me,".dirty=false;"),K(ye)}function Ma(oe,K,be,Re){var $e=oe.shared,Ce=oe.current,xe=$e.current,Me=$e.gl;XL(Object.keys(be)).forEach(function(se){var ye=be[se];if(!(Re&&!Re(ye))){var ie=ye.append(oe,K);if(Pt[se]){var Pe=Pt[se];sc(ye)?ie?K(Me,".enable(",Pe,");"):K(Me,".disable(",Pe,");"):K(oe.cond(ie).then(Me,".enable(",Pe,");").else(Me,".disable(",Pe,");")),K(xe,".",se,"=",ie,";")}else if(Ii(ie)){var Ue=Ce[se];K(Me,".",pt[se],"(",ie,");",ie.map(function(ot,ft){return Ue+"["+ft+"]="+ot}).join(";"),";")}else K(Me,".",pt[se],"(",ie,");",xe,".",se,"=",ie,";")}})}function Pi(oe,K){Et&&(oe.instancing=K.def(oe.shared.extensions,".angle_instanced_arrays"))}function Pr(oe,K,be,Re,$e){var Ce=oe.shared,xe=oe.stats,Me=Ce.current,se=Ce.timer,ye=be.profile;function ie(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Pe,Ue;function ot(Xt){Pe=K.def(),Xt(Pe,"=",ie(),";"),typeof $e=="string"?Xt(xe,".count+=",$e,";"):Xt(xe,".count++;"),bt&&(Re?(Ue=K.def(),Xt(Ue,"=",se,".getNumPendingQueries();")):Xt(se,".beginQuery(",xe,");"))}function ft(Xt){Xt(xe,".cpuTime+=",ie(),"-",Pe,";"),bt&&(Re?Xt(se,".pushScopeStats(",Ue,",",se,".getNumPendingQueries(),",xe,");"):Xt(se,".endQuery();"))}function at(Xt){var lr=K.def(Me,".profile");K(Me,".profile=",Xt,";"),K.exit(Me,".profile=",lr,";")}var Ct;if(ye){if(sc(ye)){ye.enable?(ot(K),ft(K.exit),at("true")):at("false");return}Ct=ye.append(oe,K),at(Ct)}else Ct=K.def(Me,".profile");var er=oe.block();ot(er),K("if(",Ct,"){",er,"}");var Dr=oe.block();ft(Dr),K.exit("if(",Ct,"){",Dr,"}")}function ka(oe,K,be,Re,$e){var Ce=oe.shared;function xe(se){switch(se){case Wb:case Xb:case Zb:return 2;case jb:case qb:case Qb:return 3;case Yb:case Kb:case Jb:return 4;default:return 1}}function Me(se,ye,ie){var Pe=Ce.gl,Ue=K.def(se,".location"),ot=K.def(Ce.attributes,"[",Ue,"]"),ft=ie.state,at=ie.buffer,Ct=[ie.x,ie.y,ie.z,ie.w],er=["buffer","normalized","offset","stride"];function Dr(){K("if(!",ot,".buffer){",Pe,".enableVertexAttribArray(",Ue,");}");var lr=ie.type,_r;if(ie.size?_r=K.def(ie.size,"||",ye):_r=ye,K("if(",ot,".type!==",lr,"||",ot,".size!==",_r,"||",er.map(function(Si){return ot+"."+Si+"!=="+ie[Si]}).join("||"),"){",Pe,".bindBuffer(",ev,",",at,".buffer);",Pe,".vertexAttribPointer(",[Ue,_r,lr,ie.normalized,ie.stride,ie.offset],");",ot,".type=",lr,";",ot,".size=",_r,";",er.map(function(Si){return ot+"."+Si+"="+ie[Si]+";"}).join(""),"}"),Et){var cn=ie.divisor;K("if(",ot,".divisor!==",cn,"){",oe.instancing,".vertexAttribDivisorANGLE(",[Ue,cn],");",ot,".divisor=",cn,";}")}}function Xt(){K("if(",ot,".buffer){",Pe,".disableVertexAttribArray(",Ue,");",ot,".buffer=null;","}if(",Kh.map(function(lr,_r){return ot+"."+lr+"!=="+Ct[_r]}).join("||"),"){",Pe,".vertexAttrib4f(",Ue,",",Ct,");",Kh.map(function(lr,_r){return ot+"."+lr+"="+Ct[_r]+";"}).join(""),"}")}ft===Zh?Dr():ft===wE?Xt():(K("if(",ft,"===",Zh,"){"),Dr(),K("}else{"),Xt(),K("}"))}Re.forEach(function(se){var ye=se.name,ie=be.attributes[ye],Pe;if(ie){if(!$e(ie))return;Pe=ie.append(oe,K)}else{if(!$e(qL))return;var Ue=oe.scopeAttrib(ye);V.optional(function(){oe.assert(K,Ue+".state","missing attribute "+ye)}),Pe={},Object.keys(new Fe).forEach(function(ot){Pe[ot]=K.def(Ue,".",ot)})}Me(oe.link(se),xe(se.info.type),Pe)})}function xn(oe,K,be,Re,$e){for(var Ce=oe.shared,xe=Ce.gl,Me,se=0;se<Re.length;++se){var ye=Re[se],ie=ye.name,Pe=ye.info.type,Ue=be.uniforms[ie],ot=oe.link(ye),ft=ot+".location",at;if(Ue){if(!$e(Ue))continue;if(sc(Ue)){var Ct=Ue.value;if(V.command(Ct!==null&&typeof Ct!="undefined",'missing uniform "'+ie+'"',oe.commandStr),Pe===Fg||Pe===Ng){V.command(typeof Ct=="function"&&(Pe===Fg&&(Ct._reglType==="texture2d"||Ct._reglType==="framebuffer")||Pe===Ng&&(Ct._reglType==="textureCube"||Ct._reglType==="framebufferCube")),"invalid texture for uniform "+ie,oe.commandStr);var er=oe.link(Ct._texture||Ct.color[0]._texture);K(xe,".uniform1i(",ft,",",er+".bind());"),K.exit(er,".unbind();")}else if(Pe===Rg||Pe===Og||Pe===Lg){V.optional(function(){V.command(Ii(Ct),"invalid matrix for uniform "+ie,oe.commandStr),V.command(Pe===Rg&&Ct.length===4||Pe===Og&&Ct.length===9||Pe===Lg&&Ct.length===16,"invalid length for matrix uniform "+ie,oe.commandStr)});var Dr=oe.global.def("new Float32Array(["+Array.prototype.slice.call(Ct)+"])"),Xt=2;Pe===Og?Xt=3:Pe===Lg&&(Xt=4),K(xe,".uniformMatrix",Xt,"fv(",ft,",false,",Dr,");")}else{switch(Pe){case NE:V.commandType(Ct,"number","uniform "+ie,oe.commandStr),Me="1f";break;case Wb:V.command(Ii(Ct)&&Ct.length===2,"uniform "+ie,oe.commandStr),Me="2f";break;case jb:V.command(Ii(Ct)&&Ct.length===3,"uniform "+ie,oe.commandStr),Me="3f";break;case Yb:V.command(Ii(Ct)&&Ct.length===4,"uniform "+ie,oe.commandStr),Me="4f";break;case $E:V.commandType(Ct,"boolean","uniform "+ie,oe.commandStr),Me="1i";break;case BE:V.commandType(Ct,"number","uniform "+ie,oe.commandStr),Me="1i";break;case Zb:V.command(Ii(Ct)&&Ct.length===2,"uniform "+ie,oe.commandStr),Me="2i";break;case Xb:V.command(Ii(Ct)&&Ct.length===2,"uniform "+ie,oe.commandStr),Me="2i";break;case Qb:V.command(Ii(Ct)&&Ct.length===3,"uniform "+ie,oe.commandStr),Me="3i";break;case qb:V.command(Ii(Ct)&&Ct.length===3,"uniform "+ie,oe.commandStr),Me="3i";break;case Jb:V.command(Ii(Ct)&&Ct.length===4,"uniform "+ie,oe.commandStr),Me="4i";break;case Kb:V.command(Ii(Ct)&&Ct.length===4,"uniform "+ie,oe.commandStr),Me="4i";break}K(xe,".uniform",Me,"(",ft,",",Ii(Ct)?Array.prototype.slice.call(Ct):Ct,");")}continue}else at=Ue.append(oe,K)}else{if(!$e(qL))continue;at=K.def(Ce.uniforms,"[",J.id(ie),"]")}Pe===Fg?(V(!Array.isArray(at),"must specify a scalar prop for textures"),K("if(",at,"&&",at,'._reglType==="framebuffer"){',at,"=",at,".color[0];","}")):Pe===Ng&&(V(!Array.isArray(at),"must specify a scalar prop for cube maps"),K("if(",at,"&&",at,'._reglType==="framebufferCube"){',at,"=",at,".color[0];","}")),V.optional(function(){function mo(Xs,rF){oe.assert(K,Xs,'bad data or missing for uniform "'+ie+'".  '+rF)}function UE(Xs){V(!Array.isArray(at),"must not specify an array type for uniform"),mo("typeof "+at+'==="'+Xs+'"',"invalid type, expected "+Xs)}function xs(Xs,rF){Array.isArray(at)?V(at.length===Xs,"must have length "+Xs):mo(Ce.isArrayLike+"("+at+")&&"+at+".length==="+Xs,"invalid vector, should have length "+Xs,oe.commandStr)}function tF(Xs){V(!Array.isArray(at),"must not specify a value type"),mo("typeof "+at+'==="function"&&'+at+'._reglType==="texture'+(Xs===$L?"2d":"Cube")+'"',"invalid texture type",oe.commandStr)}switch(Pe){case BE:UE("number");break;case Xb:xs(2);break;case qb:xs(3);break;case Kb:xs(4);break;case NE:UE("number");break;case Wb:xs(2);break;case jb:xs(3);break;case Yb:xs(4);break;case $E:UE("boolean");break;case Zb:xs(2);break;case Qb:xs(3);break;case Jb:xs(4);break;case Rg:xs(4);break;case Og:xs(9);break;case Lg:xs(16);break;case Fg:tF($L);break;case Ng:tF(Iie);break}});var lr=1;switch(Pe){case Fg:case Ng:var _r=K.def(at,"._texture");K(xe,".uniform1i(",ft,",",_r,".bind());"),K.exit(_r,".unbind();");continue;case BE:case $E:Me="1i";break;case Xb:case Zb:Me="2i",lr=2;break;case qb:case Qb:Me="3i",lr=3;break;case Kb:case Jb:Me="4i",lr=4;break;case NE:Me="1f";break;case Wb:Me="2f",lr=2;break;case jb:Me="3f",lr=3;break;case Yb:Me="4f",lr=4;break;case Rg:Me="Matrix2fv";break;case Og:Me="Matrix3fv";break;case Lg:Me="Matrix4fv";break}if(K(xe,".uniform",Me,"(",ft,","),Me.charAt(0)==="M"){var cn=Math.pow(Pe-Rg+2,2),Si=oe.global.def("new Float32Array(",cn,")");Array.isArray(at)?K("false,(",Er(cn,function(mo){return Si+"["+mo+"]="+at[mo]}),",",Si,")"):K("false,(Array.isArray(",at,")||",at," instanceof Float32Array)?",at,":(",Er(cn,function(mo){return Si+"["+mo+"]="+at+"["+mo+"]"}),",",Si,")")}else lr>1?K(Er(lr,function(mo){return Array.isArray(at)?at[mo]:at+"["+mo+"]"})):(V(!Array.isArray(at),"uniform value must not be an array"),K(at));K(");")}}function sr(oe,K,be,Re){var $e=oe.shared,Ce=$e.gl,xe=$e.draw,Me=Re.draw;function se(){var _r=Me.elements,cn,Si=K;return _r?((_r.contextDep&&Re.contextDynamic||_r.propDep)&&(Si=be),cn=_r.append(oe,Si)):cn=Si.def(xe,".",Rf),cn&&Si("if("+cn+")"+Ce+".bindBuffer("+Aie+","+cn+".buffer.buffer);"),cn}function ye(){var _r=Me.count,cn,Si=K;return _r?((_r.contextDep&&Re.contextDynamic||_r.propDep)&&(Si=be),cn=_r.append(oe,Si),V.optional(function(){_r.MISSING&&oe.assert(K,"false","missing vertex count"),_r.DYNAMIC&&oe.assert(Si,cn+">=0","missing vertex count")})):(cn=Si.def(xe,".",Lf),V.optional(function(){oe.assert(Si,cn+">=0","missing vertex count")})),cn}var ie=se();function Pe(_r){var cn=Me[_r];return cn?cn.contextDep&&Re.contextDynamic||cn.propDep?cn.append(oe,be):cn.append(oe,K):K.def(xe,".",_r)}var Ue=Pe(Of),ot=Pe(Vb),ft=ye();if(typeof ft=="number"){if(ft===0)return}else be("if(",ft,"){"),be.exit("}");var at,Ct;Et&&(at=Pe(Hb),Ct=oe.instancing);var er=ie+".type",Dr=Me.elements&&sc(Me.elements);function Xt(){function _r(){be(Ct,".drawElementsInstancedANGLE(",[Ue,ft,er,ot+"<<(("+er+"-"+yL+")>>1)",at],");")}function cn(){be(Ct,".drawArraysInstancedANGLE(",[Ue,ot,ft,at],");")}ie?Dr?_r():(be("if(",ie,"){"),_r(),be("}else{"),cn(),be("}")):cn()}function lr(){function _r(){be(Ce+".drawElements("+[Ue,ft,er,ot+"<<(("+er+"-"+yL+")>>1)"]+");")}function cn(){be(Ce+".drawArrays("+[Ue,ot,ft]+");")}ie?Dr?_r():(be("if(",ie,"){"),_r(),be("}else{"),cn(),be("}")):cn()}Et&&(typeof at!="number"||at>=0)?typeof at=="string"?(be("if(",at,">0){"),Xt(),be("}else if(",at,"<0){"),lr(),be("}")):Xt():lr()}function Hr(oe,K,be,Re,$e){var Ce=vr(),xe=Ce.proc("body",$e);return V.optional(function(){Ce.commandStr=K.commandStr,Ce.command=Ce.link(K.commandStr)}),Et&&(Ce.instancing=xe.def(Ce.shared.extensions,".angle_instanced_arrays")),oe(Ce,xe,be,Re),Ce.compile().body}function nn(oe,K,be,Re){Pi(oe,K),be.useVAO?be.drawVAO?K(oe.shared.vao,".setVAO(",be.drawVAO.append(oe,K),");"):K(oe.shared.vao,".setVAO(",oe.shared.vao,".targetVAO);"):(K(oe.shared.vao,".setVAO(null);"),ka(oe,K,be,Re.attributes,function(){return!0})),xn(oe,K,be,Re.uniforms,function(){return!0}),sr(oe,K,K,be)}function Di(oe,K){var be=oe.proc("draw",1);Pi(oe,be),ra(oe,be,K.context),na(oe,be,K.framebuffer),ha(oe,be,K),Ma(oe,be,K.state),Pr(oe,be,K,!1,!0);var Re=K.shader.progVar.append(oe,be);if(be(oe.shared.gl,".useProgram(",Re,".program);"),K.shader.program)nn(oe,be,K,K.shader.program);else{be(oe.shared.vao,".setVAO(null);");var $e=oe.global.def("{}"),Ce=be.def(Re,".id"),xe=be.def($e,"[",Ce,"]");be(oe.cond(xe).then(xe,".call(this,a0);").else(xe,"=",$e,"[",Ce,"]=",oe.link(function(Me){return Hr(nn,oe,K,Me,1)}),"(",Re,");",xe,".call(this,a0);"))}Object.keys(K.state).length>0&&be(oe.shared.current,".dirty=true;")}function yl(oe,K,be,Re){oe.batchId="a1",Pi(oe,K);function $e(){return!0}ka(oe,K,be,Re.attributes,$e),xn(oe,K,be,Re.uniforms,$e),sr(oe,K,K,be)}function Nf(oe,K,be,Re){Pi(oe,K);var $e=be.contextDep,Ce=K.def(),xe="a0",Me="a1",se=K.def();oe.shared.props=se,oe.batchId=Ce;var ye=oe.scope(),ie=oe.scope();K(ye.entry,"for(",Ce,"=0;",Ce,"<",Me,";++",Ce,"){",se,"=",xe,"[",Ce,"];",ie,"}",ye.exit);function Pe(er){return er.contextDep&&$e||er.propDep}function Ue(er){return!Pe(er)}if(be.needsContext&&ra(oe,ie,be.context),be.needsFramebuffer&&na(oe,ie,be.framebuffer),Ma(oe,ie,be.state,Pe),be.profile&&Pe(be.profile)&&Pr(oe,ie,be,!1,!0),Re)be.useVAO?be.drawVAO?Pe(be.drawVAO)?ie(oe.shared.vao,".setVAO(",be.drawVAO.append(oe,ie),");"):ye(oe.shared.vao,".setVAO(",be.drawVAO.append(oe,ye),");"):ye(oe.shared.vao,".setVAO(",oe.shared.vao,".targetVAO);"):(ye(oe.shared.vao,".setVAO(null);"),ka(oe,ye,be,Re.attributes,Ue),ka(oe,ie,be,Re.attributes,Pe)),xn(oe,ye,be,Re.uniforms,Ue),xn(oe,ie,be,Re.uniforms,Pe),sr(oe,ye,ie,be);else{var ot=oe.global.def("{}"),ft=be.shader.progVar.append(oe,ie),at=ie.def(ft,".id"),Ct=ie.def(ot,"[",at,"]");ie(oe.shared.gl,".useProgram(",ft,".program);","if(!",Ct,"){",Ct,"=",ot,"[",at,"]=",oe.link(function(er){return Hr(yl,oe,be,er,2)}),"(",ft,");}",Ct,".call(this,a0[",Ce,"],",Ce,");")}}function ce(oe,K){var be=oe.proc("batch",2);oe.batchId="0",Pi(oe,be);var Re=!1,$e=!0;Object.keys(K.context).forEach(function(ot){Re=Re||K.context[ot].propDep}),Re||(ra(oe,be,K.context),$e=!1);var Ce=K.framebuffer,xe=!1;Ce?(Ce.propDep?Re=xe=!0:Ce.contextDep&&Re&&(xe=!0),xe||na(oe,be,Ce)):na(oe,be,null),K.state.viewport&&K.state.viewport.propDep&&(Re=!0);function Me(ot){return ot.contextDep&&Re||ot.propDep}ha(oe,be,K),Ma(oe,be,K.state,function(ot){return!Me(ot)}),(!K.profile||!Me(K.profile))&&Pr(oe,be,K,!1,"a1"),K.contextDep=Re,K.needsContext=$e,K.needsFramebuffer=xe;var se=K.shader.progVar;if(se.contextDep&&Re||se.propDep)Nf(oe,be,K,null);else{var ye=se.append(oe,be);if(be(oe.shared.gl,".useProgram(",ye,".program);"),K.shader.program)Nf(oe,be,K,K.shader.program);else{be(oe.shared.vao,".setVAO(null);");var ie=oe.global.def("{}"),Pe=be.def(ye,".id"),Ue=be.def(ie,"[",Pe,"]");be(oe.cond(Ue).then(Ue,".call(this,a0,a1);").else(Ue,"=",ie,"[",Pe,"]=",oe.link(function(ot){return Hr(Nf,oe,K,ot,2)}),"(",ye,");",Ue,".call(this,a0,a1);"))}}Object.keys(K.state).length>0&&be(oe.shared.current,".dirty=true;")}function Ke(oe,K){var be=oe.proc("scope",3);oe.batchId="a2";var Re=oe.shared,$e=Re.current;ra(oe,be,K.context),K.framebuffer&&K.framebuffer.append(oe,be),XL(Object.keys(K.state)).forEach(function(xe){var Me=K.state[xe],se=Me.append(oe,be);Ii(se)?se.forEach(function(ye,ie){be.set(oe.next[xe],"["+ie+"]",ye)}):be.set(Re.next,"."+xe,se)}),Pr(oe,be,K,!0,!0),[Rf,Vb,Lf,Hb,Of].forEach(function(xe){var Me=K.draw[xe];!Me||be.set(Re.draw,"."+xe,""+Me.append(oe,be))}),Object.keys(K.uniforms).forEach(function(xe){var Me=K.uniforms[xe].append(oe,be);Array.isArray(Me)&&(Me="["+Me.join()+"]"),be.set(Re.uniforms,"["+J.id(xe)+"]",Me)}),Object.keys(K.attributes).forEach(function(xe){var Me=K.attributes[xe].append(oe,be),se=oe.scopeAttrib(xe);Object.keys(new Fe).forEach(function(ye){be.set(se,"."+ye,Me[ye])})}),K.scopeVAO&&be.set(Re.vao,".targetVAO",K.scopeVAO.append(oe,be));function Ce(xe){var Me=K.shader[xe];Me&&be.set(Re.shader,"."+xe,Me.append(oe,be))}Ce(Ig),Ce(Pg),Object.keys(K.state).length>0&&(be($e,".dirty=true;"),be.exit($e,".dirty=true;")),be("a1(",oe.shared.context,",a0,",oe.batchId,");")}function We(oe){if(!(typeof oe!="object"||Ii(oe))){for(var K=Object.keys(oe),be=0;be<K.length;++be)if(jt.isDynamic(oe[K[be]]))return!0;return!1}}function Ht(oe,K,be){var Re=K.static[be];if(!Re||!We(Re))return;var $e=oe.global,Ce=Object.keys(Re),xe=!1,Me=!1,se=!1,ye=oe.global.def("{}");Ce.forEach(function(Pe){var Ue=Re[Pe];if(jt.isDynamic(Ue)){typeof Ue=="function"&&(Ue=Re[Pe]=jt.unbox(Ue));var ot=Io(Ue,null);xe=xe||ot.thisDep,se=se||ot.propDep,Me=Me||ot.contextDep}else{switch($e(ye,".",Pe,"="),typeof Ue){case"number":$e(Ue);break;case"string":$e('"',Ue,'"');break;case"object":Array.isArray(Ue)&&$e("[",Ue.join(),"]");break;default:$e(oe.link(Ue));break}$e(";")}});function ie(Pe,Ue){Ce.forEach(function(ot){var ft=Re[ot];if(!!jt.isDynamic(ft)){var at=Pe.invoke(Ue,ft);Ue(ye,".",ot,"=",at,";")}})}K.dynamic[be]=new jt.DynamicVariable(Gb,{thisDep:xe,contextDep:Me,propDep:se,ref:ye,append:ie}),delete K.static[be]}function Ur(oe,K,be,Re,$e){var Ce=vr();Ce.stats=Ce.link($e),Object.keys(K.static).forEach(function(Me){Ht(Ce,K,Me)}),Tie.forEach(function(Me){Ht(Ce,oe,Me)});var xe=Hi(oe,K,be,Re,Ce);return Di(Ce,xe),Ke(Ce,xe),ce(Ce,xe),n(Ce.compile(),{destroy:function(){xe.shader.program.destroy()}})}return{next:Ut,current:vt,procs:function(){var oe=vr(),K=oe.proc("poll"),be=oe.proc("refresh"),Re=oe.block();K(Re),be(Re);var $e=oe.shared,Ce=$e.gl,xe=$e.next,Me=$e.current;Re(Me,".dirty=false;"),na(oe,K),na(oe,be,null,!0);var se;Et&&(se=oe.link(Et)),ve.oes_vertex_array_object&&be(oe.link(ve.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var ye=0;ye<Xe.maxAttributes;++ye){var ie=be.def($e.attributes,"[",ye,"]"),Pe=oe.cond(ie,".buffer");Pe.then(Ce,".enableVertexAttribArray(",ye,");",Ce,".bindBuffer(",ev,",",ie,".buffer.buffer);",Ce,".vertexAttribPointer(",ye,",",ie,".size,",ie,".type,",ie,".normalized,",ie,".stride,",ie,".offset);").else(Ce,".disableVertexAttribArray(",ye,");",Ce,".vertexAttrib4f(",ye,",",ie,".x,",ie,".y,",ie,".z,",ie,".w);",ie,".buffer=null;"),be(Pe),Et&&be(se,".vertexAttribDivisorANGLE(",ye,",",ie,".divisor);")}return be(oe.shared.vao,".currentVAO=null;",oe.shared.vao,".setVAO(",oe.shared.vao,".targetVAO);"),Object.keys(Pt).forEach(function(Ue){var ot=Pt[Ue],ft=Re.def(xe,".",Ue),at=oe.block();at("if(",ft,"){",Ce,".enable(",ot,")}else{",Ce,".disable(",ot,")}",Me,".",Ue,"=",ft,";"),be(at),K("if(",ft,"!==",Me,".",Ue,"){",at,"}")}),Object.keys(pt).forEach(function(Ue){var ot=pt[Ue],ft=vt[Ue],at,Ct,er=oe.block();if(er(Ce,".",ot,"("),Ii(ft)){var Dr=ft.length;at=oe.global.def(xe,".",Ue),Ct=oe.global.def(Me,".",Ue),er(Er(Dr,function(Xt){return at+"["+Xt+"]"}),");",Er(Dr,function(Xt){return Ct+"["+Xt+"]="+at+"["+Xt+"];"}).join("")),K("if(",Er(Dr,function(Xt){return at+"["+Xt+"]!=="+Ct+"["+Xt+"]"}).join("||"),"){",er,"}")}else at=Re.def(xe,".",Ue),Ct=Re.def(Me,".",Ue),er(at,");",Me,".",Ue,"=",at,";"),K("if(",at,"!==",Ct,"){",er,"}");be(er)}),oe.compile()}(),compile:Ur}}function jie(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Yie=34918,Xie=34919,KL=35007,qie=function(N,J){if(!J.ext_disjoint_timer_query)return null;var ve=[];function Xe(){return ve.pop()||J.ext_disjoint_timer_query.createQueryEXT()}function ct(Et){ve.push(Et)}var Ye=[];function et(Et){var zt=Xe();J.ext_disjoint_timer_query.beginQueryEXT(KL,zt),Ye.push(zt),bt(Ye.length-1,Ye.length,Et)}function yt(){J.ext_disjoint_timer_query.endQueryEXT(KL)}function wt(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var _t=[];function St(){return _t.pop()||new wt}function kt(Et){_t.push(Et)}var Lt=[];function bt(Et,zt,vt){var Ut=St();Ut.startQueryIndex=Et,Ut.endQueryIndex=zt,Ut.sum=0,Ut.stats=vt,Lt.push(Ut)}var It=[],Fe=[];function tt(){var Et,zt,vt=Ye.length;if(vt!==0){Fe.length=Math.max(Fe.length,vt+1),It.length=Math.max(It.length,vt+1),It[0]=0,Fe[0]=0;var Ut=0;for(Et=0,zt=0;zt<Ye.length;++zt){var gt=Ye[zt];J.ext_disjoint_timer_query.getQueryObjectEXT(gt,Xie)?(Ut+=J.ext_disjoint_timer_query.getQueryObjectEXT(gt,Yie),ct(gt)):Ye[Et++]=gt,It[zt+1]=Ut,Fe[zt+1]=Et}for(Ye.length=Et,Et=0,zt=0;zt<Lt.length;++zt){var Pt=Lt[zt],pt=Pt.startQueryIndex,Dt=Pt.endQueryIndex;Pt.sum+=It[Dt]-It[pt];var ir=Fe[pt],wr=Fe[Dt];wr===ir?(Pt.stats.gpuTime+=Pt.sum/1e6,kt(Pt)):(Pt.startQueryIndex=ir,Pt.endQueryIndex=wr,Lt[Et++]=Pt)}Lt.length=Et}}return{beginQuery:et,endQuery:yt,pushScopeStats:bt,update:tt,getNumPendingQueries:function(){return Ye.length},clear:function(){ve.push.apply(ve,Ye);for(var Et=0;Et<ve.length;Et++)J.ext_disjoint_timer_query.deleteQueryEXT(ve[Et]);Ye.length=0,ve.length=0},restore:function(){Ye.length=0,ve.length=0}}},Kie=16384,Zie=256,Qie=1024,Jie=34962,ZL="webglcontextlost",QL="webglcontextrestored",JL=1,eae=2,tae=3;function eF(N,J){for(var ve=0;ve<N.length;++ve)if(N[ve]===J)return ve;return-1}function rae(N){var J=nr(N);if(!J)return null;var ve=J.gl,Xe=ve.getContextAttributes(),ct=ve.isContextLost(),Ye=tn(ve,J);if(!Ye)return null;var et=ut(),yt=jie(),wt=Ye.extensions,_t=qie(ve,wt),St=Ae(),kt=ve.drawingBufferWidth,Lt=ve.drawingBufferHeight,bt={tick:0,time:0,viewportWidth:kt,viewportHeight:Lt,framebufferWidth:kt,framebufferHeight:Lt,drawingBufferWidth:kt,drawingBufferHeight:Lt,pixelRatio:J.pixelRatio},It={},Fe={elements:null,primitive:4,count:-1,offset:0,instances:-1},tt=Gre(ve,wt),Et=nne(ve,yt,J,vt),zt=pie(ve,wt,tt,yt,Et);function vt(sr){return zt.destroyBuffer(sr)}var Ut=pne(ve,wt,Et,yt),gt=bie(ve,et,yt,J),Pt=jne(ve,wt,tt,function(){ir.procs.poll()},bt,yt,J),pt=Yne(ve,wt,tt,yt,J),Dt=hie(ve,wt,tt,Pt,pt,yt),ir=Wie(ve,et,wt,tt,Et,Ut,Pt,Dt,It,zt,gt,Fe,bt,_t,J),wr=Sie(ve,Dt,ir.procs.poll,bt,Xe,wt,tt),Ft=ir.next,At=ve.canvas,ht=[],vr=[],Ir=[],Yt=[J.onDestroy],Gr=null;function Sr(){if(ht.length===0){_t&&_t.update(),Gr=null;return}Gr=Jt.next(Sr),Ma();for(var sr=ht.length-1;sr>=0;--sr){var Hr=ht[sr];Hr&&Hr(bt,null,0)}ve.flush(),_t&&_t.update()}function Or(){!Gr&&ht.length>0&&(Gr=Jt.next(Sr))}function un(){Gr&&(Jt.cancel(Sr),Gr=null)}function Vi(sr){sr.preventDefault(),ct=!0,un(),vr.forEach(function(Hr){Hr()})}function ua(sr){ve.getError(),ct=!1,Ye.restore(),gt.restore(),Et.restore(),Pt.restore(),pt.restore(),Dt.restore(),zt.restore(),_t&&_t.restore(),ir.procs.refresh(),Or(),Ir.forEach(function(Hr){Hr()})}At&&(At.addEventListener(ZL,Vi,!1),At.addEventListener(QL,ua,!1));function Xr(){ht.length=0,un(),At&&(At.removeEventListener(ZL,Vi),At.removeEventListener(QL,ua)),gt.clear(),Dt.clear(),pt.clear(),Pt.clear(),Ut.clear(),Et.clear(),zt.clear(),_t&&_t.clear(),Yt.forEach(function(sr){sr()})}function ta(sr){V(!!sr,"invalid args to regl({...})"),V.type(sr,"object","invalid args to regl({...})");function Hr($e){var Ce=n({},$e);delete Ce.uniforms,delete Ce.attributes,delete Ce.context,delete Ce.vao,"stencil"in Ce&&Ce.stencil.op&&(Ce.stencil.opBack=Ce.stencil.opFront=Ce.stencil.op,delete Ce.stencil.op);function xe(Me){if(Me in Ce){var se=Ce[Me];delete Ce[Me],Object.keys(se).forEach(function(ye){Ce[Me+"."+ye]=se[ye]})}}return xe("blend"),xe("depth"),xe("cull"),xe("stencil"),xe("polygonOffset"),xe("scissor"),xe("sample"),"vao"in $e&&(Ce.vao=$e.vao),Ce}function nn($e,Ce){var xe={},Me={};return Object.keys($e).forEach(function(se){var ye=$e[se];if(jt.isDynamic(ye)){Me[se]=jt.unbox(ye,se);return}else if(Ce&&Array.isArray(ye)){for(var ie=0;ie<ye.length;++ie)if(jt.isDynamic(ye[ie])){Me[se]=jt.unbox(ye,se);return}}xe[se]=ye}),{dynamic:Me,static:xe}}var Di=nn(sr.context||{},!0),yl=nn(sr.uniforms||{},!0),Nf=nn(sr.attributes||{},!1),ce=nn(Hr(sr),!1),Ke={gpuTime:0,cpuTime:0,count:0},We=ir.compile(ce,Nf,yl,Di,Ke),Ht=We.draw,Ur=We.batch,oe=We.scope,K=[];function be($e){for(;K.length<$e;)K.push(null);return K}function Re($e,Ce){var xe;if(ct&&V.raise("context lost"),typeof $e=="function")return oe.call(this,null,$e,0);if(typeof Ce=="function")if(typeof $e=="number")for(xe=0;xe<$e;++xe)oe.call(this,null,Ce,xe);else if(Array.isArray($e))for(xe=0;xe<$e.length;++xe)oe.call(this,$e[xe],Ce,xe);else return oe.call(this,$e,Ce,0);else if(typeof $e=="number"){if($e>0)return Ur.call(this,be($e|0),$e|0)}else if(Array.isArray($e)){if($e.length)return Ur.call(this,$e,$e.length)}else return Ht.call(this,$e)}return n(Re,{stats:Ke,destroy:function(){We.destroy()}})}var Qn=Dt.setFBO=ta({framebuffer:jt.define.call(null,JL,"framebuffer")});function Hi(sr,Hr){var nn=0;ir.procs.poll();var Di=Hr.color;Di&&(ve.clearColor(+Di[0]||0,+Di[1]||0,+Di[2]||0,+Di[3]||0),nn|=Kie),"depth"in Hr&&(ve.clearDepth(+Hr.depth),nn|=Zie),"stencil"in Hr&&(ve.clearStencil(Hr.stencil|0),nn|=Qie),V(!!nn,"called regl.clear with no buffer specified"),ve.clear(nn)}function ra(sr){if(V(typeof sr=="object"&&sr,"regl.clear() takes an object as input"),"framebuffer"in sr)if(sr.framebuffer&&sr.framebuffer_reglType==="framebufferCube")for(var Hr=0;Hr<6;++Hr)Qn(n({framebuffer:sr.framebuffer.faces[Hr]},sr),Hi);else Qn(sr,Hi);else Hi(null,sr)}function na(sr){V.type(sr,"function","regl.frame() callback must be a function"),ht.push(sr);function Hr(){var nn=eF(ht,sr);V(nn>=0,"cannot cancel a frame twice");function Di(){var yl=eF(ht,Di);ht[yl]=ht[ht.length-1],ht.length-=1,ht.length<=0&&un()}ht[nn]=Di}return Or(),{cancel:Hr}}function ha(){var sr=Ft.viewport,Hr=Ft.scissor_box;sr[0]=sr[1]=Hr[0]=Hr[1]=0,bt.viewportWidth=bt.framebufferWidth=bt.drawingBufferWidth=sr[2]=Hr[2]=ve.drawingBufferWidth,bt.viewportHeight=bt.framebufferHeight=bt.drawingBufferHeight=sr[3]=Hr[3]=ve.drawingBufferHeight}function Ma(){bt.tick+=1,bt.time=Pr(),ha(),ir.procs.poll()}function Pi(){Pt.refresh(),ha(),ir.procs.refresh(),_t&&_t.update()}function Pr(){return(Ae()-St)/1e3}Pi();function ka(sr,Hr){V.type(Hr,"function","listener callback must be a function");var nn;switch(sr){case"frame":return na(Hr);case"lost":nn=vr;break;case"restore":nn=Ir;break;case"destroy":nn=Yt;break;default:V.raise("invalid event, must be one of frame,lost,restore,destroy")}return nn.push(Hr),{cancel:function(){for(var Di=0;Di<nn.length;++Di)if(nn[Di]===Hr){nn[Di]=nn[nn.length-1],nn.pop();return}}}}var xn=n(ta,{clear:ra,prop:jt.define.bind(null,JL),context:jt.define.bind(null,eae),this:jt.define.bind(null,tae),draw:ta({}),buffer:function(sr){return Et.create(sr,Jie,!1,!1)},elements:function(sr){return Ut.create(sr,!1)},texture:Pt.create2D,cube:Pt.createCube,renderbuffer:pt.create,framebuffer:Dt.create,framebufferCube:Dt.createCube,vao:zt.createVAO,attributes:Xe,frame:na,on:ka,limits:tt,hasExtension:function(sr){return tt.extensions.indexOf(sr.toLowerCase())>=0},read:wr,destroy:Xr,_gl:ve,_refresh:Pi,poll:function(){Ma(),_t&&_t.update()},now:Pr,stats:yt});return J.onDone(null,xn),xn}return rae})}),EDe=function(){function r(t,e){ar(this,r),this.attribute=void 0,this.buffer=void 0;var n=e.buffer,i=e.offset,a=e.stride,o=e.normalized,s=e.size,l=e.divisor;this.buffer=n,this.attribute={buffer:n.get(),offset:i||0,stride:a||0,normalized:o||!1,divisor:l||0},s&&(this.attribute.size=s)}return br(r,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(e){this.buffer.subData(e)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),r}(),Ru,Py,Ou,Fs,Dy,Hc,Ry,Jw,zl,Nd,Qa,Gl,Ul,eS,_De=(Ru={},lt(Ru,Ne.POINTS,"points"),lt(Ru,Ne.LINES,"lines"),lt(Ru,Ne.LINE_LOOP,"line loop"),lt(Ru,Ne.LINE_STRIP,"line strip"),lt(Ru,Ne.TRIANGLES,"triangles"),lt(Ru,Ne.TRIANGLE_FAN,"triangle fan"),lt(Ru,Ne.TRIANGLE_STRIP,"triangle strip"),Ru),UH=(Py={},lt(Py,Ne.STATIC_DRAW,"static"),lt(Py,Ne.DYNAMIC_DRAW,"dynamic"),lt(Py,Ne.STREAM_DRAW,"stream"),Py),xk=(Ou={},lt(Ou,Ne.BYTE,"int8"),lt(Ou,Ne.UNSIGNED_INT,"int16"),lt(Ou,Ne.INT,"int32"),lt(Ou,Ne.UNSIGNED_BYTE,"uint8"),lt(Ou,Ne.UNSIGNED_SHORT,"uint16"),lt(Ou,Ne.UNSIGNED_INT,"uint32"),lt(Ou,Ne.FLOAT,"float"),Ou),TDe=(Fs={},lt(Fs,Ne.ALPHA,"alpha"),lt(Fs,Ne.LUMINANCE,"luminance"),lt(Fs,Ne.LUMINANCE_ALPHA,"luminance alpha"),lt(Fs,Ne.RGB,"rgb"),lt(Fs,Ne.RGBA,"rgba"),lt(Fs,Ne.RGBA4,"rgba4"),lt(Fs,Ne.RGB5_A1,"rgb5 a1"),lt(Fs,Ne.RGB565,"rgb565"),lt(Fs,Ne.DEPTH_COMPONENT,"depth"),lt(Fs,Ne.DEPTH_STENCIL,"depth stencil"),Fs),ADe=(Dy={},lt(Dy,Ne.DONT_CARE,"dont care"),lt(Dy,Ne.NICEST,"nice"),lt(Dy,Ne.FASTEST,"fast"),Dy),VH=(Hc={},lt(Hc,Ne.NEAREST,"nearest"),lt(Hc,Ne.LINEAR,"linear"),lt(Hc,Ne.LINEAR_MIPMAP_LINEAR,"mipmap"),lt(Hc,Ne.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),lt(Hc,Ne.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),lt(Hc,Ne.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Hc),HH=(Ry={},lt(Ry,Ne.REPEAT,"repeat"),lt(Ry,Ne.CLAMP_TO_EDGE,"clamp"),lt(Ry,Ne.MIRRORED_REPEAT,"mirror"),Ry),MDe=(Jw={},lt(Jw,Ne.NONE,"none"),lt(Jw,Ne.BROWSER_DEFAULT_WEBGL,"browser"),Jw),kDe=(zl={},lt(zl,Ne.NEVER,"never"),lt(zl,Ne.ALWAYS,"always"),lt(zl,Ne.LESS,"less"),lt(zl,Ne.LEQUAL,"lequal"),lt(zl,Ne.GREATER,"greater"),lt(zl,Ne.GEQUAL,"gequal"),lt(zl,Ne.EQUAL,"equal"),lt(zl,Ne.NOTEQUAL,"notequal"),zl),WH=(Nd={},lt(Nd,Ne.FUNC_ADD,"add"),lt(Nd,Ne.MIN_EXT,"min"),lt(Nd,Ne.MAX_EXT,"max"),lt(Nd,Ne.FUNC_SUBTRACT,"subtract"),lt(Nd,Ne.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Nd),tS=(Qa={},lt(Qa,Ne.ZERO,"zero"),lt(Qa,Ne.ONE,"one"),lt(Qa,Ne.SRC_COLOR,"src color"),lt(Qa,Ne.ONE_MINUS_SRC_COLOR,"one minus src color"),lt(Qa,Ne.SRC_ALPHA,"src alpha"),lt(Qa,Ne.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),lt(Qa,Ne.DST_COLOR,"dst color"),lt(Qa,Ne.ONE_MINUS_DST_COLOR,"one minus dst color"),lt(Qa,Ne.DST_ALPHA,"dst alpha"),lt(Qa,Ne.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),lt(Qa,Ne.CONSTANT_COLOR,"constant color"),lt(Qa,Ne.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),lt(Qa,Ne.CONSTANT_ALPHA,"constant alpha"),lt(Qa,Ne.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),lt(Qa,Ne.SRC_ALPHA_SATURATE,"src alpha saturate"),Qa),IDe=(Gl={},lt(Gl,Ne.NEVER,"never"),lt(Gl,Ne.ALWAYS,"always"),lt(Gl,Ne.LESS,"less"),lt(Gl,Ne.LEQUAL,"lequal"),lt(Gl,Ne.GREATER,"greater"),lt(Gl,Ne.GEQUAL,"gequal"),lt(Gl,Ne.EQUAL,"equal"),lt(Gl,Ne.NOTEQUAL,"notequal"),Gl),op=(Ul={},lt(Ul,Ne.ZERO,"zero"),lt(Ul,Ne.KEEP,"keep"),lt(Ul,Ne.REPLACE,"replace"),lt(Ul,Ne.INVERT,"invert"),lt(Ul,Ne.INCR,"increment"),lt(Ul,Ne.DECR,"decrement"),lt(Ul,Ne.INCR_WRAP,"increment wrap"),lt(Ul,Ne.DECR_WRAP,"decrement wrap"),Ul),PDe=(eS={},lt(eS,Ne.FRONT,"front"),lt(eS,Ne.BACK,"back"),eS),DDe=function(){function r(t,e){ar(this,r),this.buffer=void 0;var n=e.data,i=e.usage,a=e.type;this.buffer=t.buffer({data:n,usage:UH[i||Ne.STATIC_DRAW],type:xk[a||Ne.UNSIGNED_BYTE]})}return br(r,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(e){var n=e.data,i=e.offset;this.buffer.subdata(n,i)}}]),r}();function RDe(r){if(Array.isArray(r))return qM(r)}function ODe(r){if(typeof Symbol!="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function LDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oa(r){return RDe(r)||ODe(r)||a8(r)||LDe()}var FDe=9007199254740991,NDe="[object Arguments]",BDe="[object Array]",$De="[object Boolean]",zDe="[object Date]",GDe="[object Error]",UDe="[object Function]",VDe="[object Map]",HDe="[object Number]",WDe="[object Object]",jDe="[object RegExp]",YDe="[object Set]",XDe="[object String]",qDe="[object WeakMap]",KDe="[object ArrayBuffer]",ZDe="[object DataView]",QDe="[object Float32Array]",JDe="[object Float64Array]",eRe="[object Int8Array]",tRe="[object Int16Array]",rRe="[object Int32Array]",nRe="[object Uint8Array]",iRe="[object Uint8ClampedArray]",aRe="[object Uint16Array]",oRe="[object Uint32Array]",mi={};mi[QDe]=mi[JDe]=mi[eRe]=mi[tRe]=mi[rRe]=mi[nRe]=mi[iRe]=mi[aRe]=mi[oRe]=!0;mi[NDe]=mi[BDe]=mi[KDe]=mi[$De]=mi[ZDe]=mi[zDe]=mi[GDe]=mi[UDe]=mi[VDe]=mi[HDe]=mi[WDe]=mi[jDe]=mi[YDe]=mi[XDe]=mi[qDe]=!1;var sRe=Object.prototype,lRe=sRe.toString;function uRe(r){return fRe(r)&&cRe(r.length)&&!!mi[lRe.call(r)]}function cRe(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=FDe}function fRe(r){return!!r&&$l(r)==="object"}var wk=uRe;function jH(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function YH(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?jH(Object(e),!0).forEach(function(n){lt(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):jH(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}var dRe=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,XH=0,hRe=function(){function r(t,e){var n=this;ar(this,r),this.reGl=t,this.context=e,this.entity=Nl(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var i={};this.context.uniforms.forEach(function(u){var c=u.name,f=u.type,d=u.data,h=u.isReferer,v=u.storageClass;if(v===zc.StorageBuffer){if(h)n.textureCache[c]={data:void 0},i["".concat(c,"Size")]=function(){return d.compiledBundle.context.output.textureSize};else{n.textureCache[c]=n.calcDataTexture(c,f,d);var p=n.textureCache[c],g=p.textureWidth,m=p.isOutput;i["".concat(c,"Size")]=[g,g],m&&(n.outputTextureName=c,n.context.needPingpong&&(n.outputTextureName="".concat(c,"Output"),n.textureCache[n.outputTextureName]=n.calcDataTexture(c,f,d)))}i[c]=function(){return n.textureCache[c].texture}}else if(v===zc.Uniform){if(d&&(Array.isArray(d)||wk(d))&&d.length>16)throw new Error("invalid data type ".concat(f));i[c]=function(){return u.data}}});var a=this.getOuputDataTexture(),o=a.textureWidth,s=a.texelCount;i.u_OutputTextureSize=[o,o],i.u_OutputTexelCount=s,this.context.output.textureSize=[o,o];var l={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:i,vert:dRe,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(l)}return br(r,[{key:"run",value:function(){var e=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){e.computeCommand()})}},{key:"readData",value:function(){var t=Sn(Qt.mark(function n(){var i=this,a,o,s,l,u,c,f,d;return Qt.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){a=i.reGl.read()}),!a){v.next=6;break}if(o=this.getOuputDataTexture(),s=o.originalDataLength,l=o.elementsPerTexel,u=o.typedArrayConstructor,c=u===void 0?Float32Array:u,f=[],l!==4)for(d=0;d<a.length;d+=4)l===1?f.push(a[d]):l===2?f.push(a[d],a[d+1]):f.push(a[d],a[d+1],a[d+2]);else f=a;return v.abrupt("return",new c(f.slice(0,s)));case 6:return v.abrupt("return",new Float32Array);case 7:case"end":return v.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"confirmInput",value:function(e,n){var i;this.entity===e.entity?(this.dynamicPingpong=!0,i=this):i=e,this.textureCache[n].id=i.getOuputDataTexture().id,this.textureCache[n].texture=i.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(e,n){var i=this.context.uniforms.find(function(l){var u=l.name;return u===e});if(i){var a=this.calcDataTexture(e,i.type,n),o=a.texture,s=a.data;this.textureCache[e].data=s,this.textureCache[e].texture=o}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var e=this.context.output.name;this.textureCache[e].id=this.getOuputDataTexture().id,this.textureCache[e].texture=this.getOuputDataTexture().texture}var n=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=n}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var e=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=e}},{key:"cloneDataTexture",value:function(e){var n=e.data,i=e.textureWidth;return YH(YH({},e),{},{id:XH++,texture:this.reGl.texture({width:i,height:i,data:n,type:"float"})})}},{key:"calcDataTexture",value:function(e,n,i){var a=1;n===Pd.Vector4FloatArray&&(a=4);for(var o=[],s=0;s<i.length;s+=a)a===1?o.push(i[s],0,0,0):a===2?o.push(i[s],i[s+1],0,0):a===3?o.push(i[s],i[s+1],i[s+2],0):a===4&&o.push(i[s],i[s+1],i[s+2],i[s+3]);var l=i.length,u=Math.ceil(l/a),c=Math.ceil(Math.sqrt(u)),f=c*c;u<f&&o.push.apply(o,oa(new Array((f-u)*4).fill(0)));var d=this.reGl.texture({width:c,height:c,data:o,type:"float"});return{id:XH++,data:o,originalDataLength:l,typedArrayConstructor:wk(i)?i.constructor:void 0,textureWidth:c,texture:d,texelCount:u,elementsPerTexel:a,isOutput:e===this.context.output.name}}}]),r}(),vRe=function(){function r(t,e){ar(this,r),this.elements=void 0;var n=e.data,i=e.usage,a=e.type,o=e.count;this.elements=t.elements({data:n,usage:UH[i||Ne.STATIC_DRAW],type:xk[a||Ne.UNSIGNED_BYTE],count:o})}return br(r,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(e){var n=e.data;this.elements.subdata(n)}},{key:"destroy",value:function(){this.elements.destroy()}}]),r}(),pRe=function(){function r(t,e){ar(this,r),this.framebuffer=void 0;var n=e.width,i=e.height,a=e.color,o=e.colors;e.depth,e.stencil;var s={width:n,height:i};Array.isArray(o)&&(s.colors=o.map(function(l){return l.get()})),a&&typeof a!="boolean"&&(s.color=a.get()),this.framebuffer=t.framebuffer(s)}return br(r,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(e){var n=e.width,i=e.height;this.framebuffer.resize(n,i)}}]),r}();function gRe(r){var t=$l(r);return r!=null&&(t==="object"||t==="function")}function Oy(r){var t={};return Object.keys(r).forEach(function(e){Sk(e,r[e],t,"")}),t}function Sk(r,t,e,n){if(t===null||typeof t=="number"||typeof t=="boolean"||Array.isArray(t)&&typeof t[0]=="number"||wk(t)||t===""||t.resize!==void 0){e["".concat(n&&n+".").concat(r)]=t;return}gRe(t)&&Object.keys(t).forEach(function(i){Sk(i,t[i],e,"".concat(n&&n+".").concat(r))}),Array.isArray(t)&&t.forEach(function(i,a){Object.keys(i).forEach(function(o){Sk(o,i[o],e,"".concat(n&&n+".").concat(r,"[").concat(a,"]"))})})}function qH(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function sp(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?qH(Object(e),!0).forEach(function(n){lt(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):qH(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}var mRe=function(){function r(t,e){ar(this,r),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=t;var n=e.vs,i=e.fs,a=e.defines,o=e.attributes,s=e.uniforms,l=e.primitive,u=e.count,c=e.elements,f=e.depth,d=e.blend,h=e.stencil,v=e.cull,p=e.instances,g=e.scissor,m=e.viewport,y={};s&&(this.uniforms=Oy(s),Object.keys(s).forEach(function(S){y[S]=t.prop(S)}));var b={};Object.keys(o).forEach(function(S){b[S]=o[S].get()});var x=a&&this.generateDefines(a)||"",w={attributes:b,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(x,`
`).concat(i),uniforms:y,vert:`
`.concat(x,`
`).concat(n),primitive:_De[l===void 0?Ne.TRIANGLES:l]};p&&(w.instances=p),u&&(w.count=u),c&&(w.elements=c.get()),g&&(w.scissor=g),m&&(w.viewport=m),this.initDepthDrawParams({depth:f},w),this.initBlendDrawParams({blend:d},w),this.initStencilDrawParams({stencil:h},w),this.initCullDrawParams({cull:v},w),this.drawCommand=t(w)}return br(r,[{key:"addUniforms",value:function(e){this.uniforms=sp(sp({},this.uniforms),Oy(e))}},{key:"draw",value:function(e){var n=sp(sp({},this.uniforms),Oy(e.uniforms||{})),i={};Object.keys(n).forEach(function(a){var o=$l(n[a]);o==="boolean"||o==="number"||Array.isArray(n[a])||n[a].BYTES_PER_ELEMENT?i[a]=n[a]:o==="string"||(i[a]=n[a].get())}),this.drawCommand(i)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(e,n){var i=e.depth;i&&(n.depth={enable:i.enable===void 0?!0:!!i.enable,mask:i.mask===void 0?!0:!!i.mask,func:kDe[i.func||Ne.LESS],range:i.range||[0,1]})}},{key:"initBlendDrawParams",value:function(e,n){var i=e.blend;if(i){var a=i.enable,o=i.func,s=i.equation,l=i.color,u=l===void 0?[0,0,0,0]:l;n.blend={enable:!!a,func:{srcRGB:tS[o&&o.srcRGB||Ne.SRC_ALPHA],srcAlpha:tS[o&&o.srcAlpha||Ne.SRC_ALPHA],dstRGB:tS[o&&o.dstRGB||Ne.ONE_MINUS_SRC_ALPHA],dstAlpha:tS[o&&o.dstAlpha||Ne.ONE_MINUS_SRC_ALPHA]},equation:{rgb:WH[s&&s.rgb||Ne.FUNC_ADD],alpha:WH[s&&s.alpha||Ne.FUNC_ADD]},color:u}}}},{key:"initStencilDrawParams",value:function(e,n){var i=e.stencil;if(i){var a=i.enable,o=i.mask,s=o===void 0?-1:o,l=i.func,u=l===void 0?{cmp:Ne.ALWAYS,ref:0,mask:-1}:l,c=i.opFront,f=c===void 0?{fail:Ne.KEEP,zfail:Ne.KEEP,zpass:Ne.KEEP}:c,d=i.opBack,h=d===void 0?{fail:Ne.KEEP,zfail:Ne.KEEP,zpass:Ne.KEEP}:d;n.stencil={enable:!!a,mask:s,func:sp(sp({},u),{},{cmp:IDe[u.cmp]}),opFront:{fail:op[f.fail],zfail:op[f.zfail],zpass:op[f.zpass]},opBack:{fail:op[h.fail],zfail:op[h.zfail],zpass:op[h.zpass]}}}}},{key:"initCullDrawParams",value:function(e,n){var i=e.cull;if(i){var a=i.enable,o=i.face,s=o===void 0?Ne.BACK:o;n.cull={enable:!!a,face:PDe[s]}}}},{key:"generateDefines",value:function(e){return Object.keys(e).map(function(n){return"#define ".concat(n," ").concat(Number(e[n]))}).join(`
`)}}]),r}(),yRe=function(){function r(t,e){ar(this,r),this.texture=void 0,this.width=void 0,this.height=void 0;var n=e.data,i=e.type,a=i===void 0?Ne.UNSIGNED_BYTE:i,o=e.width,s=e.height,l=e.flipY,u=l===void 0?!1:l,c=e.format,f=c===void 0?Ne.RGBA:c,d=e.mipmap,h=d===void 0?!1:d,v=e.wrapS,p=v===void 0?Ne.CLAMP_TO_EDGE:v,g=e.wrapT,m=g===void 0?Ne.CLAMP_TO_EDGE:g,y=e.aniso,b=y===void 0?0:y,x=e.alignment,w=x===void 0?1:x,S=e.premultiplyAlpha,C=S===void 0?!1:S,_=e.mag,T=_===void 0?Ne.NEAREST:_,E=e.min,M=E===void 0?Ne.NEAREST:E,k=e.colorSpace,P=k===void 0?Ne.BROWSER_DEFAULT_WEBGL:k;this.width=o,this.height=s;var F={width:o,height:s,type:xk[a],format:TDe[f],wrapS:HH[p],wrapT:HH[m],mag:VH[T],min:VH[M],alignment:w,flipY:u,colorSpace:MDe[P],premultiplyAlpha:C,aniso:b};n&&(F.data=n),typeof h=="number"?F.mipmap=ADe[h]:typeof h=="boolean"&&(F.mipmap=h),this.texture=t.texture(F)}return br(r,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(e){var n=e.width,i=e.height;this.texture.resize(n,i),this.width=n,this.height=i}},{key:"destroy",value:function(){this.texture.destroy()}}]),r}(),KH,ZH,QH,bRe=(KH=Tn(),KH(ZH=(QH=function(){function r(){var t=this;ar(this,r),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var e=Sn(Qt.mark(function n(i){return Qt.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.uniforms){o.next=3;break}return o.next=3,Promise.all(Object.keys(i.uniforms).map(function(){var s=Sn(Qt.mark(function l(u){var c;return Qt.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(i.uniforms[u]&&i.uniforms[u].load!==void 0)){d.next=5;break}return d.next=3,i.uniforms[u].load();case 3:c=d.sent,i.uniforms[u]=c;case 5:case"end":return d.stop()}},l)}));return function(l){return s.apply(this,arguments)}}()));case 3:return o.abrupt("return",new mRe(t.gl,i));case 4:case"end":return o.stop()}},n)}));return function(n){return e.apply(this,arguments)}}(),this.createAttribute=function(e){return new EDe(t.gl,e)},this.createBuffer=function(e){return new DDe(t.gl,e)},this.createElements=function(e){return new vRe(t.gl,e)},this.createTexture2D=function(e){return new yRe(t.gl,e)},this.createFramebuffer=function(e){return new pRe(t.gl,e)},this.useFramebuffer=function(e,n){t.gl({framebuffer:e?e.get():null})(n)},this.createComputeModel=function(){var e=Sn(Qt.mark(function n(i){return Qt.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new hRe(t.gl,i));case 1:case"end":return o.stop()}},n)}));return function(n){return e.apply(this,arguments)}}(),this.clear=function(e){var n=e.color,i=e.depth,a=e.stencil,o=e.framebuffer,s=o===void 0?null:o,l={color:n,depth:i,stencil:a};l.framebuffer=s===null?s:s.get(),t.gl.clear(l)},this.setScissor=function(e){t.gl&&t.gl._gl&&(e.enable&&e.box?(t.gl._gl.enable(Ne.SCISSOR_TEST),t.gl._gl.scissor(e.box.x,e.box.y,e.box.width,e.box.height)):t.gl._gl.disable(Ne.SCISSOR_TEST),t.gl._refresh())},this.viewport=function(e){var n=e.x,i=e.y,a=e.width,o=e.height;t.gl&&t.gl._gl&&(t.gl._gl.viewport(n,i,a,o),t.gl._refresh())},this.readPixels=function(e){var n=e.framebuffer,i=e.x,a=e.y,o=e.width,s=e.height,l={x:i,y:a,width:o,height:s};return n&&(l.framebuffer=n.get()),t.gl.read(l)},this.getCanvas=function(){return t.$canvas},this.getGLContext=function(){return t.gl._gl},this.destroy=function(){t.gl&&(t.gl.destroy(),t.inited=!1)}}return br(r,[{key:"init",value:function(){var t=Sn(Qt.mark(function n(i){return Qt.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this.inited){o.next=2;break}return o.abrupt("return");case 2:return this.$canvas=i.canvas,o.next=5,new Promise(function(s,l){CDe({canvas:i.canvas,attributes:{alpha:!0,antialias:i.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(c,f){(c||!f)&&l(c),s(f)}})});case 5:this.gl=o.sent,this.inited=!0;case 7:case"end":return o.stop()}},n,this)}));function e(n){return t.apply(this,arguments)}return e}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),r}(),QH))||ZH);function xRe(){return typeof window!="undefined"}function wRe(r,t,e,n){if(!!xRe()){var i=document.getElementsByTagName("head")[0],a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src",r),n&&(a.id=n),a.onload=function(){t&&t()},a.onerror=function(o){e&&e("Unable to load script '".concat(r,"'"),o)},i.appendChild(a)}}function SRe(r,t){return new Promise(function(e,n){wRe(r,function(){e()},function(i,a){n(a)})})}var rS;function CRe(){return Ck.apply(this,arguments)}function Ck(){return Ck=Sn(Qt.mark(function r(){return Qt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!rS){e.next=2;break}return e.abrupt("return",rS);case 2:return e.next=4,SRe("https://preview.babylonjs.com/glslang/glslang.js");case 4:return rS=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),e.abrupt("return",rS);case 6:case"end":return e.stop()}},r)})),Ck.apply(this,arguments)}var ERe=function(){function r(t,e){ar(this,r),this.engine=t,this.options=e,this.attribute=void 0,this.buffer=void 0;var n=e,i=n.buffer,a=n.offset,o=n.stride,s=n.normalized,l=n.size,u=n.divisor,c=n.arrayStride,f=n.attributes,d=n.stepMode;this.buffer=i,this.attribute={buffer:i.get(),offset:a||0,stride:o||0,normalized:s||!1,divisor:u||0,arrayStride:c||0,attributes:f,stepMode:d||"vertex"},l&&(this.attribute.size=l)}return br(r,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(e){this.buffer.subData(e)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),r}(),lp=function(){function r(t,e){ar(this,r),this.engine=t,this.options=e,this.buffer=void 0;var n=e,i=n.data,a=n.usage;n.type,this.buffer=this.createBuffer(i instanceof Array?new Float32Array(i):i,a||No.Vertex|No.CopyDst)}return br(r,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(e){var n=e.data,i=e.offset;this.setSubData(this.buffer,i,n instanceof Array?new Float32Array(n):n)}},{key:"createBuffer",value:function(e,n){var i=e.byteLength%4,a={size:e.byteLength+i,usage:n},o=this.engine.device.createBuffer(a);return this.setSubData(o,0,e),o}},{key:"setSubData",value:function(e,n,i){var a=Fo?this.engine.device.getQueue():this.engine.device.defaultQueue;a.writeBuffer(e,n,i)}}]),r}();function _Re(r){return typeof r=="number"}var TRe=function(){function r(t,e){ar(this,r),this.engine=t,this.context=e,this.entity=Nl(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}return br(r,[{key:"init",value:function(){var t=Sn(Qt.mark(function n(){var i=this,a,o,s,l,u,c,f;return Qt.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:a=h.sent,o=a.computeStage,s=this.context.uniforms.filter(function(v){return v.storageClass===zc.StorageBuffer}),l=this.context.uniforms.filter(function(v){return v.storageClass===zc.Uniform}),u=l.length?1:0,this.bindGroupEntries=[],u&&(c=0,f=[],l.forEach(function(v){if(_Re(v.data))i.uniformGPUBufferLayout.push({name:v.name,offset:c}),c+=4,f.push(v.data);else{var p,g=((p=v.data)===null||p===void 0?void 0:p.length)||1;g===3&&(g=4,v.data.push(0));var m=c/4%4;if(m>0){var y=4-m;if(g>1&&g<=y)g===2&&(y===3&&(c+=4,f.push(0)),f.push.apply(f,oa(v.data)),i.uniformGPUBufferLayout.push({name:v.name,offset:c}));else{for(var b=0;b<y;b++)c+=4,f.push(0);f.push.apply(f,oa(v.data)),i.uniformGPUBufferLayout.push({name:v.name,offset:c})}}c+=4*g}}),this.uniformBuffer=new lp(this.engine,{data:f instanceof Array?new Float32Array(f):f,usage:No.Uniform|No.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),s.forEach(function(v){if(v.data!==null&&(v.type===Pd.Vector4FloatArray||v.type===Pd.FloatArray)){var p;v.name===i.context.output.name?(p=new lp(i.engine,{data:isFinite(Number(v.data))?[v.data]:v.data,usage:No.Storage|No.CopyDst|No.CopySrc}),i.outputBuffer=p,i.context.output={name:v.name,length:isFinite(Number(v.data))?1:v.data.length,typedArrayConstructor:Float32Array,gpuBuffer:p.get()}):v.isReferer?v.data.model&&v.data.model.outputBuffer&&(p=v.data.model.outputBuffer):p=new lp(i.engine,{data:isFinite(Number(v.data))?[v.data]:v.data,usage:No.Storage|No.CopyDst|No.CopySrc}),i.vertexBuffers[v.name]=p,i.bindGroupEntries.push({binding:u,resource:{name:v.name,refer:p?void 0:v.data,buffer:p?p.get():void 0}}),u++}}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:o}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return h.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"destroy",value:function(){var e=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(n){return e.vertexBuffers[n].destroy()})}},{key:"readData",value:function(){var t=Sn(Qt.mark(function n(){var i,a,o,s,l,u,c,f,d,h;return Qt.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(i=this.context.output,!i){p.next=16;break}if(a=i.length,o=i.typedArrayConstructor,s=i.gpuBuffer,!s){p.next=16;break}return l=a*o.BYTES_PER_ELEMENT,u=this.engine.device.createBuffer({size:l,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),c=this.engine.device.createCommandEncoder(),c.copyBufferToBuffer(s,0,u,0,l),f=Fo?this.engine.device.getQueue():this.engine.device.defaultQueue,f.submit([c.finish()]),p.next=12,u.mapAsync(VPe.Read);case 12:return d=u.getMappedRange(),h=new o(d.slice(0)),u.unmap(),p.abrupt("return",h);case 16:return p.abrupt("return",new Float32Array);case 17:case"end":return p.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"run",value:function(){if(this.engine.currentComputePass){var e;this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(e=this.engine.currentComputePass).dispatch.apply(e,oa(this.context.dispatch))}}},{key:"updateBuffer",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=this.vertexBuffers[e];a&&a.subData({data:n,offset:i})}},{key:"updateUniform",value:function(e,n){var i=this.uniformGPUBufferLayout.find(function(a){return a.name===e});i&&this.uniformBuffer.subData({data:Number.isFinite(n)?new Float32Array([n]):new Float32Array(n),offset:i.offset})}},{key:"confirmInput",value:function(e,n){var i=this.vertexBuffers[n],a=e.outputBuffer;if(i&&a&&i!==a){var o=this.engine.device.createCommandEncoder(),s=e.context.output,l=s.length,u=s.typedArrayConstructor,c=l*u.BYTES_PER_ELEMENT;o.copyBufferToBuffer(a.get(),0,i.get(),0,c);var f=Fo?this.engine.device.getQueue():this.engine.device.defaultQueue;f.submit([o.finish()])}}},{key:"compileShaderToSpirV",value:function(e,n,i){return this.compileRawShaderToSpirV(i+e,n)}},{key:"compileRawShaderToSpirV",value:function(e,n){return this.engine.glslang.compileGLSL(e,n)}},{key:"compileComputePipelineStageDescriptor",value:function(){var t=Sn(Qt.mark(function n(i){var a,o;return Qt.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(a=i,o=`#version 450
`,this.engine.options.useWGSL){l.next=6;break}return l.next=5,this.compileShaderToSpirV(i,"compute",o);case 5:a=l.sent;case 6:return l.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:a,isWHLSL:Fo}),entryPoint:"main"}});case 7:case"end":return l.stop()}},n,this)}));function e(n){return t.apply(this,arguments)}return e}()}]),r}(),ARe=function(){function r(t,e){ar(this,r),this.engine=t,this.options=e,this.indexCount=void 0,this.buffer=void 0;var n=e,i=n.data;n.usage,n.type;var a=n.count;this.indexCount=a||0,this.buffer=new lp(t,{data:i instanceof Array?new Uint16Array(i):i,usage:No.Index|No.CopyDst})}return br(r,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(e){this.buffer.subData(e)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),r}(),MRe=function(){function r(t,e){ar(this,r),this.engine=t,this.options=e,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var n=e;n.width,n.height;var i=n.color;n.colors;var a=n.depth;n.stencil,i&&(this.colorTexture=i),a&&(this.depthTexture=a)}return br(r,[{key:"get",value:function(){var e,n;return{color:(e=this.colorTexture)===null||e===void 0?void 0:e.get(),depth:(n=this.depthTexture)===null||n===void 0?void 0:n.get()}}},{key:"destroy",value:function(){var e,n;(e=this.colorTexture)===null||e===void 0||e.destroy(),(n=this.depthTexture)===null||n===void 0||n.destroy()}},{key:"resize",value:function(e){var n=e.width,i=e.height;if(n!==this.width||i!==this.height){var a,o;(a=this.colorTexture)===null||a===void 0||a.resize({width:n,height:i}),(o=this.depthTexture)===null||o===void 0||o.resize({width:n,height:i})}this.width=n,this.height=i}}]),r}(),Lu,Vl,Bd,To,up,nS,Ly,kRe=(Lu={},lt(Lu,Ne.POINTS,Od.PointList),lt(Lu,Ne.LINES,Od.LineList),lt(Lu,Ne.LINE_LOOP,Od.LineList),lt(Lu,Ne.LINE_STRIP,Od.LineStrip),lt(Lu,Ne.TRIANGLES,Od.TriangleList),lt(Lu,Ne.TRIANGLE_FAN,Od.TriangleList),lt(Lu,Ne.TRIANGLE_STRIP,Od.TriangleStrip),Lu),IRe=(Vl={},lt(Vl,Ne.NEVER,Du.Never),lt(Vl,Ne.ALWAYS,Du.Always),lt(Vl,Ne.LESS,Du.Less),lt(Vl,Ne.LEQUAL,Du.LessEqual),lt(Vl,Ne.GREATER,Du.Greater),lt(Vl,Ne.GEQUAL,Du.GreaterEqual),lt(Vl,Ne.EQUAL,Du.Equal),lt(Vl,Ne.NOTEQUAL,Du.NotEqual),Vl),JH=(Bd={},lt(Bd,Ne.FUNC_ADD,Iy.Add),lt(Bd,Ne.MIN_EXT,Iy.Min),lt(Bd,Ne.MAX_EXT,Iy.Max),lt(Bd,Ne.FUNC_SUBTRACT,Iy.Subtract),lt(Bd,Ne.FUNC_REVERSE_SUBTRACT,Iy.ReverseSubtract),Bd),iS=(To={},lt(To,Ne.ZERO,us.Zero),lt(To,Ne.ONE,us.One),lt(To,Ne.SRC_COLOR,us.SrcColor),lt(To,Ne.ONE_MINUS_SRC_COLOR,us.OneMinusSrcColor),lt(To,Ne.SRC_ALPHA,us.SrcAlpha),lt(To,Ne.ONE_MINUS_SRC_ALPHA,us.OneMinusSrcAlpha),lt(To,Ne.DST_COLOR,us.DstColor),lt(To,Ne.ONE_MINUS_DST_COLOR,us.OneMinusDstColor),lt(To,Ne.DST_ALPHA,us.DstAlpha),lt(To,Ne.ONE_MINUS_DST_ALPHA,us.OneMinusDstAlpha),lt(To,Ne.CONSTANT_COLOR,us.BlendColor),lt(To,Ne.ONE_MINUS_CONSTANT_COLOR,us.OneMinusBlendColor),lt(To,Ne.SRC_ALPHA_SATURATE,us.SrcAlphaSaturated),To),PRe=(up={},lt(up,Ne.ALPHA,"r8unorm"),lt(up,Ne.RGBA,"rgba8unorm"),lt(up,Ne.DEPTH_COMPONENT,"depth32float"),lt(up,Ne.DEPTH_STENCIL,"depth24plus-stencil8"),up),eW=(nS={},lt(nS,Ne.NEAREST,"nearest"),lt(nS,Ne.LINEAR,"linear"),nS),Ek=(Ly={},lt(Ly,Ne.REPEAT,"repeat"),lt(Ly,Ne.CLAMP_TO_EDGE,"clamp-to-edge"),lt(Ly,Ne.MIRRORED_REPEAT,"mirror-repeat"),Ly);function DRe(r){var t=r.cull;if(!t||!t.enable)return qw.None;if(t.face)return t.face===Ne.FRONT?qw.Front:qw.Back}function RRe(r){var t=r.depth;r.stencil;var e={compare:Du.Always,depthFailOp:mk.Keep,failOp:mk.Keep,passOp:mk.Keep};return{depthWriteEnabled:t&&t.enable,depthCompare:IRe[(t==null?void 0:t.func)||Ne.ALWAYS],format:ip.Depth24PlusStencil8,stencilFront:e,stencilBack:e,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function ORe(r,t){var e=r.blend;return[{format:t,alphaBlend:{srcFactor:iS[e&&e.func&&e.func.srcAlpha||Ne.ONE],dstFactor:iS[e&&e.func&&e.func.dstAlpha||Ne.ZERO],operation:JH[e&&e.equation&&e.equation.alpha||Ne.FUNC_ADD]},colorBlend:{srcFactor:iS[e&&e.func&&e.func.srcRGB||Ne.ONE],dstFactor:iS[e&&e.func&&e.func.dstRGB||Ne.ZERO],operation:JH[e&&e.equation&&e.equation.rgb||Ne.FUNC_ADD]},writeMask:UPe.All}]}function tW(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function cp(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?tW(Object(e),!0).forEach(function(n){lt(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):tW(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function LRe(r){for(var t=0,e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var a=0,o=n;a<o.length;a++){var s=o[a];t+=s.length}for(var l=new r(t),u=0,c=0,f=n;c<f.length;c++){var d=f[c];l.set(d,u),u+=d.length}return l}var FRe=function(){function r(t,e){ar(this,r),this.engine=t,this.options=e,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}return br(r,[{key:"init",value:function(){var t=Sn(Qt.mark(function n(){var i=this,a,o,s,l,u,c,f,d,h,v,p,g,m,y,b,x;return Qt.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return a=this.options,o=a.vs,s=a.fs,l=a.attributes,u=a.uniforms,c=a.primitive,f=a.elements,d=a.depth,h=a.blend,v=a.stencil,p=a.cull,S.next=3,this.compilePipelineStageDescriptor(o,s,null);case 3:g=S.sent,m=g.vertexStage,y=g.fragmentStage,u&&this.buildUniformBindGroup(u),f&&(this.indexBuffer=f.get(),this.indexCount=f.indexCount),b={vertexBuffers:Object.keys(l).map(function(C,_){var T=l[C],E=T.get(),M=E.arrayStride,k=E.stepMode,P=E.attributes;return i.attributeCache[C]=T,{arrayStride:M,stepMode:k,attributes:P}})},x={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:kRe[c||Ne.TRIANGLES],rasterizationState:cp(cp({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:DRe({cull:p})}),depthStencilState:RRe({depth:d,stencil:v}),colorStates:ORe({blend:h},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:m,fragmentStage:y,vertexState:b},this.renderPipeline=this.engine.device.createRenderPipeline(x);case 11:case"end":return S.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"addUniforms",value:function(e){this.uniforms=cp(cp({},this.uniforms),Oy(e))}},{key:"draw",value:function(e){var n=this,i=this.engine.getCurrentRenderPass(),a=cp(cp({},this.uniforms),Oy(e.uniforms||{})),o=[];Object.keys(a).forEach(function(s){var l=$l(a[s]);if(l==="boolean"||l==="number"||Array.isArray(a[s])||a[s].BYTES_PER_ELEMENT){var u,c=(u=n.uniformGPUBufferLayout.find(function(m){var y=m.name;return y===s}))===null||u===void 0?void 0:u.offset;c!==null&&n.uniformBuffer.subData({data:a[s],offset:c})}else{var f,d=(f=n.uniformGPUBufferLayout.find(function(m){var y=m.name;return y===s}))===null||f===void 0?void 0:f.offset;if(d!==null){var h=a[s].get(),v=h.color||h,p=v.texture,g=v.sampler;g&&(o.push({binding:d,resource:g}),d++),o.push({binding:d,resource:p.createView()})}}}),this.uniformBuffer&&(o[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:o}),this.renderPipeline&&i.setPipeline(this.renderPipeline),i.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&i.setIndexBuffer(this.indexBuffer.get(),$Pe.Uint32,0),Object.keys(this.attributeCache).forEach(function(s,l){i.setVertexBuffer(0+l,n.attributeCache[s].get().buffer,0)}),this.indexBuffer?i.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):i.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:function(){var t=Sn(Qt.mark(function n(i,a,o){var s,l,u;return Qt.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(s=`#version 450
`,l=i,u=a,this.engine.options.useWGSL){f.next=10;break}return f.next=6,this.compileShaderToSpirV(i,"vertex",s);case 6:return l=f.sent,f.next=9,this.compileShaderToSpirV(a,"fragment",s);case 9:u=f.sent;case 10:return f.abrupt("return",this.createPipelineStageDescriptor(l,u));case 11:case"end":return f.stop()}},n,this)}));function e(n,i,a){return t.apply(this,arguments)}return e}()},{key:"compileShaderToSpirV",value:function(e,n,i){return this.compileRawShaderToSpirV(i+e,n)}},{key:"compileRawShaderToSpirV",value:function(e,n){return this.engine.glslang.compileGLSL(e,n)}},{key:"createPipelineStageDescriptor",value:function(e,n){return{vertexStage:{module:this.engine.device.createShaderModule({code:e,isWHLSL:Fo}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:n,isWHLSL:Fo}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:BPe.CCW,cullMode:qw.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(e){var n=this,i=0,a=LRe.apply(void 0,[Float32Array].concat(oa(Object.keys(e).map(function(l){return e[l]?(n.uniformGPUBufferLayout.push({name:l,offset:i}),i+=(e[l].length||1)*4,e[l]):[]})))),o=[],s=!1;a.length&&(s=!0,o.push({binding:0,visibility:Kw.Fragment|Kw.Vertex,type:gk.UniformBuffer})),Object.keys(e).filter(function(l){return e[l]===null}).forEach(function(l,u){n.uniformGPUBufferLayout.push({name:l,offset:u*2+(s?1:0)}),o.push({binding:u*2+(s?1:0),visibility:Kw.Fragment,type:gk.Sampler},{binding:u*2+(s?1:0)+1,visibility:Kw.Fragment,type:gk.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:o}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),s&&(this.uniformBuffer=new lp(this.engine,{data:a instanceof Array?new Float32Array(a):a,usage:No.Uniform|No.CopyDst}))}}]),r}(),NRe=function(){function r(t,e){ar(this,r),this.engine=t,this.options=e,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return br(r,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(e){var n=e.width,i=e.height;(n!==this.width||i!==this.height)&&(this.destroy(),this.createTexture()),this.width=n,this.height=i}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var e=this.options;e.data;var n=e.type;n===void 0&&Ne.UNSIGNED_BYTE;var i=e.width,a=e.height;e.flipY;var o=e.format,s=o===void 0?Ne.RGBA:o;e.mipmap;var l=e.wrapS,u=l===void 0?Ne.CLAMP_TO_EDGE:l,c=e.wrapT,f=c===void 0?Ne.CLAMP_TO_EDGE:c,d=e.aniso,h=d===void 0?0:d;e.alignment,e.premultiplyAlpha;var v=e.mag,p=v===void 0?Ne.NEAREST:v,g=e.min,m=g===void 0?Ne.NEAREST:g,y=e.colorSpace;y===void 0&&Ne.BROWSER_DEFAULT_WEBGL;var b=e.usage;this.width=i,this.height=a,this.texture=this.engine.device.createTexture({size:[i,a,1],mipLevelCount:1,sampleCount:1,dimension:yk.E2d,format:PRe[s],usage:b||Fd.Sampled|Fd.CopyDst}),(!b||b&Fd.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:Ek[u],addressModeV:Ek[f],addressModeW:Ek[u],magFilter:eW[p],minFilter:eW[m],maxAnisotropy:h}))}}]),r}(),rW,nW,iW,BRe=(rW=Tn(),rW(nW=(iW=function(){function r(){var t=this;ar(this,r),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(e){e.framebuffer;var n=e.color,i=e.depth,a=e.stencil;t.options.supportCompute&&t.startComputePass(),t.currentRenderTarget?(t.currentRenderPass&&t.endRenderTargetRenderPass(),t.startRenderTargetRenderPass(t.currentRenderTarget,n||null,!!i,!!a)):(t.mainColorAttachments[0].loadValue=n||np.Load,t.mainDepthAttachment.depthLoadValue=i||np.Load,t.mainDepthAttachment.stencilLoadValue=a?t.clearStencilValue:np.Load,t.mainRenderPass&&t.endMainRenderPass(),t.startMainRenderPass())},this.createModel=function(){var e=Sn(Qt.mark(function n(i){var a;return Qt.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=new FRe(t,i),s.next=3,a.init();case 3:return s.abrupt("return",a);case 4:case"end":return s.stop()}},n)}));return function(n){return e.apply(this,arguments)}}(),this.createAttribute=function(e){return new ERe(t,e)},this.createBuffer=function(e){return new lp(t,e)},this.createElements=function(e){return new ARe(t,e)},this.createTexture2D=function(e){return new NRe(t,e)},this.createFramebuffer=function(e){return new MRe(t,e)},this.useFramebuffer=function(e,n){t.currentRenderTarget&&t.unbindFramebuffer(t.currentRenderTarget),t.currentRenderTarget=e,t.currentRenderTargetViewDescriptor={dimension:zPe.E2d,arrayLayerCount:1,aspect:GPe.All},t.currentRenderPass=null,n()},this.createComputeModel=function(){var e=Sn(Qt.mark(function n(i){var a;return Qt.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=new TRe(t,i),s.next=3,a.init();case 3:return s.abrupt("return",a);case 4:case"end":return s.stop()}},n)}));return function(n){return e.apply(this,arguments)}}(),this.getCanvas=function(){return t.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(e){var n=e.x,i=e.y,a=e.width,o=e.height;if(!t.currentRenderPass)t.transientViewport={x:n,y:i,width:a,height:o};else if(t.transientViewport.x!==1/0){var s=t.getCurrentRenderPass();s.setViewport(t.transientViewport.x,t.transientViewport.y,t.transientViewport.width,t.transientViewport.height,0,1)}else if(n!==t.cachedViewport.x||i!==t.cachedViewport.y||a!==t.cachedViewport.width||o!==t.cachedViewport.height){t.cachedViewport={x:n,y:i,width:a,height:o};var l=t.getCurrentRenderPass();l.setViewport(n,i,a,o,0,1)}},this.readPixels=function(e){throw new Error("Method not implemented.")}}return br(r,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:function(){var t=Sn(Qt.mark(function n(i){return Qt.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this.canvas=i.canvas,this.options=i,this.useWGSL=!!i.useWGSL,this.mainPassSampleCount=i.antialiasing?this.defaultSampleCount:1,o.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return o.stop()}},n,this)}));function e(n){return t.apply(this,arguments)}return e}()},{key:"setScissor",value:function(e){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(e){return e.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),Fo?this.device.getQueue().submit(this.commandBuffers.filter(function(e){return e})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(e){return e}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:function(){var t=Sn(Qt.mark(function n(){var i,a;return Qt.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,CRe();case 2:return this.glslang=s.sent,s.next=5,(i=navigator)===null||i===void 0||(a=i.gpu)===null||a===void 0?void 0:a.requestAdapter();case 5:return this.adapter=s.sent,s.next=8,this.adapter.requestDevice();case 8:this.device=s.sent;case 9:case"end":return s.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(Fo?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:Fd.OutputAttachment|Fd.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var e={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:yk.E2d,format:ip.BGRA8Unorm,usage:Fd.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(e),this.mainColorAttachments=[{attachment:Fo?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:Ld.Store}]}else this.mainColorAttachments=[{attachment:Fo?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:Ld.Store}];var n={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:yk.E2d,format:Fo?"depth32float-stencil8":ip.Depth24PlusStencil8,usage:Fd.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(n),this.mainDepthAttachment={attachment:Fo?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:Ld.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:Ld.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=Fo?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=Fo?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(e,n,i){var a,o,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,l=(a=e.get().color)===null||a===void 0?void 0:a.texture,u;l&&(u=l.createView(this.currentRenderTargetViewDescriptor));var c=(o=e.get().depth)===null||o===void 0?void 0:o.texture,f;c&&(f=c.createView());var d=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:u,loadValue:n!==null?n:np.Load,storeOp:Ld.Store}],depthStencilAttachment:c&&f?{attachment:f,depthLoadValue:i?this.clearDepthValue:np.Load,depthStoreOp:Ld.Store,stencilLoadValue:s?this.clearStencilValue:np.Load,stencilStoreOp:Ld.Store}:void 0});this.currentRenderPass=d,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(e){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),r}(),iW))||nW),aW,oW;function $Re(r){var t=zRe();return function(){var n=An(r),i;if(t){var a=An(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return co(this,i)}}function zRe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var _k=4/64,sW=1-_k*2,GRe=(aW=Tn(),aW(oW=function(r){uo(e,r);var t=$Re(e);function e(){return ar(this,e),t.apply(this,arguments)}return br(e,[{key:"onEntityCreated",value:function(){var i=this.config,a=i.widthSegments,o=a===void 0?1:a,s=i.heightSegments,l=s===void 0?1:s,u=i.depthSegments,c=u===void 0?1:u,f=i.halfExtents,d=f===void 0?Wr(.5,.5,.5):f,h=o,v=l,p=c,g=Nw(d,3),m=g[0],y=g[1],b=g[2],x=[Wr(-m,-y,b),Wr(m,-y,b),Wr(m,y,b),Wr(-m,y,b),Wr(m,-y,-b),Wr(-m,-y,-b),Wr(-m,y,-b),Wr(m,y,-b)],w=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],S=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],C={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},_=[],T=[],E=[],M=[],k=0,P=function(L,O,B){var U,W,X,ae;for(X=0;X<=O;X++)for(ae=0;ae<=B;ae++){var Z=Fn(),Y=Fn(),fe=Fn(),le=Fn();td(Z,x[w[L][0]],x[w[L][1]],X/O),td(Y,x[w[L][0]],x[w[L][2]],ae/B),uT(fe,Y,x[w[L][0]]),xu(le,Z,fe),U=X/O,W=ae/B,_.push(le[0],le[1],le[2]),T.push(S[L][0],S[L][1],S[L][2]),E.push(U,W),U/=3,W/=3,U=U*sW+_k,W=W*sW+_k,U+=L%3/3,W+=Math.floor(L/3)/3,X<O&&ae<B&&(M.push(k+B+1,k+1,k),M.push(k+B+1,k+B+2,k+1)),k++}};P(C.FRONT,h,v),P(C.BACK,h,v),P(C.TOP,h,p),P(C.BOTTOM,h,p),P(C.RIGHT,p,v),P(C.LEFT,p,v);var F=dk(_),$=this.getComponent();$.indices=Uint32Array.from(M),$.aabb=F,$.vertexCount=k,$.attributes=[{dirty:!0,name:"position",data:Float32Array.from(_),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(T),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(E),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),e}(Uc))||oW);function URe(r,t){if(!r&&!t)throw new Error("Please specify valid arguments for parameters a and b.");if(!t||t.length===0)return r;if(!r||r.length===0)return t;if(Object.prototype.toString.call(r)!==Object.prototype.toString.call(t))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var e=new r.constructor(r.length+t.length);return e.set(r),e.set(t,r.length),e}var lW,uW;function VRe(r){var t=HRe();return function(){var n=An(r),i;if(t){var a=An(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return co(this,i)}}function HRe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var WRe=(lW=Tn(),lW(uW=function(r){uo(e,r);var t=VRe(e);function e(){return ar(this,e),t.apply(this,arguments)}return br(e,[{key:"onEntityCreated",value:function(){var i=this.config.geometries,a=i===void 0?[]:i,o=this.getComponent();o.aabb=new sk;var s=[],l=[],u=0;a.forEach(function(c){var f=c.aabb,d=c.indices,h=c.vertexCount,v=c.attributes;o.aabb.add(f),o.vertexCount+=h,d&&l.push.apply(l,oa(d.map(function(p){return p+u}))),u+=h,v.forEach(function(p,g){s[g]?p.data&&(hk(p.data)?s[g].push(p.data):dH(p.data)?s[g].data=URe(s[g].data,p.data):s[g].data=s[g].data.concat(p.data)):(s[g]=p,s[g].dirty=!0)})}),o.attributes=s,o.indices=Uint32Array.from(l),o.dirty=!0}}]),e}(Uc))||uW),cW,fW;function jRe(r){var t=YRe();return function(){var n=An(r),i;if(t){var a=An(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return co(this,i)}}function YRe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var XRe=(cW=Tn(),cW(fW=function(r){uo(e,r);var t=jRe(e);function e(){return ar(this,e),t.apply(this,arguments)}return br(e,[{key:"onEntityCreated",value:function(){for(var i=this.config,a=i.halfExtents,o=a===void 0?[.5,.5]:a,s=i.widthSegments,l=s===void 0?5:s,u=i.lengthSegments,c=u===void 0?5:u,f=[],d=[],h=[],v=[],p=0,g=0;g<=l;g++)for(var m=0;m<=c;m++){var y=-o[0]+2*o[0]*g/l,b=0,x=-(-o[1]+2*o[1]*m/c),w=g/l,S=m/c;f.push(y,b,x),d.push(0,1,0),h.push(w,S),g<l&&m<c&&(v.push(p+c+1,p+1,p),v.push(p+c+1,p+c+2,p+1)),p++}var C=dk(f),_=this.getComponent();_.indices=Uint32Array.from(v),_.aabb=C,_.vertexCount=p,_.attributes=[{dirty:!0,name:"position",data:Float32Array.from(f),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(d),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(h),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),e}(Uc))||fW),dW,hW;function qRe(r){var t=KRe();return function(){var n=An(r),i;if(t){var a=An(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return co(this,i)}}function KRe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var ZRe=(dW=Tn(),dW(hW=function(r){uo(e,r);var t=qRe(e);function e(){return ar(this,e),t.apply(this,arguments)}return br(e,[{key:"onEntityCreated",value:function(){for(var i=this.config,a=i.radius,o=a===void 0?.5:a,s=i.latitudeBands,l=s===void 0?16:s,u=i.longitudeBands,c=u===void 0?16:u,f=[],d=[],h=[],v=[],p=0;p<=l;p++)for(var g=p*Math.PI/l,m=Math.sin(g),y=Math.cos(g),b=0;b<=c;b++){var x=b*2*Math.PI/c-Math.PI/2,w=Math.sin(x),S=Math.cos(x),C=S*m,_=y,T=w*m,E=1-b/c,M=1-p/l;f.push(C*o,_*o,T*o),d.push(C,_,T),h.push(E,M)}for(var k=0;k<l;++k)for(var P=0;P<c;++P){var F=k*(c+1)+P,$=F+c+1;v.push(F+1,$,F),v.push(F+1,$+1,$)}var R=dk(f),L=this.getComponent();L.indices=Uint32Array.from(v),L.aabb=R,L.vertexCount=f.length/3,L.attributes=[{dirty:!0,name:"position",data:Float32Array.from(f),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(d),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(h),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),e}(Uc))||hW),vW,pW,gW,mW,aS,yW,bW,xW;function QRe(r){var t=JRe();return function(){var n=An(r),i;if(t){var a=An(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return co(this,i)}}function JRe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var eOe=`varying vec4 fragColor;

#pragma include "uv.frag.declaration"
#pragma include "map.frag.declaration"

void main() {
  vec4 diffuseColor = fragColor;

  #pragma include "map.frag.main"

  gl_FragColor = diffuseColor;
}`,tOe=`attribute vec3 position;
attribute vec3 normal;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

#pragma include "uv.vert.declaration"

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;

  #pragma include "uv.vert.main"
}`,rOe=`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`,nOe=`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`,iOe=(vW=Tn(),pW=hr(mt.RenderEngine),gW=hr(mt.ShaderModuleService),vW(mW=(aS=(xW=function(r){uo(e,r);var t=QRe(e);function e(){var n;ar(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=t.call.apply(t,[this].concat(a)),fr(n,"engine",yW,Li(n)),fr(n,"shaderModuleService",bW,Li(n)),n}return br(e,[{key:"onEntityCreated",value:function(){var i=this.getComponent(),a=this.engine.supportWebGPU?nOe:tOe,o=this.engine.supportWebGPU?rOe:eOe;this.shaderModuleService.registerModule("material-basic",{vs:a,fs:o});var s=this.shaderModuleService.getModule("material-basic"),l=s.vs,u=s.fs,c=s.uniforms;i.vertexShaderGLSL=l,i.fragmentShaderGLSL=u,i.setUniform(c),this.config.map&&(i.setDefines({USE_UV:1,USE_MAP:1}),i.setUniform({map:this.config.map,uvTransform:wv()}))}}]),e}(kH),xW),yW=dr(aS.prototype,"engine",[pW],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bW=dr(aS.prototype,"shaderModuleService",[gW],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aS))||mW),wW,SW,CW,EW,_W,TW,AW,Fy,MW,kW,IW,PW;function aOe(r){var t=oOe();return function(){var n=An(r),i;if(t){var a=An(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return co(this,i)}}function oOe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var sOe=`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`,lOe=`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,uOe=(wW=Tn(),SW=hr(mt.Systems),CW=Bl(mt.MaterialSystem),EW=hr(mt.Systems),_W=Bl(mt.GeometrySystem),TW=hr(mt.ShaderModuleService),wW(AW=(Fy=(PW=function(r){uo(e,r);var t=aOe(e);function e(){var n;ar(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=t.call.apply(t,[this].concat(a)),fr(n,"materialSystem",MW,Li(n)),fr(n,"geometrySystem",kW,Li(n)),fr(n,"shaderModuleService",IW,Li(n)),n}return br(e,[{key:"onAttributeChanged",value:function(i){var a=i.name,o=i.data,s=this.getMeshComponent();s&&s.material&&(a==="gridColor"?(s.material.setUniform("u_GridColor",o),s.material.setUniform("u_GridColor2",o)):a==="gridSize"&&(s.material.setUniform("u_GridSize",o),s.material.setUniform("u_GridSize2",o)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:lOe,fs:sOe});var i=this.shaderModuleService.getModule("grid"),a=i.vs,o=i.fs,s=i.uniforms,l=this.materialSystem.createShaderMaterial({vertexShader:a,fragmentShader:o});this.setMaterial(l);var u=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(u),l.setCull({enable:!1,face:Ne.BACK}).setDepth({enable:!0,func:Ne.LESS}),l.setUniform(s),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),u.setIndex([0,3,2,2,1,0]),u.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),e}(Vc),PW),MW=dr(Fy.prototype,"materialSystem",[SW,CW],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kW=dr(Fy.prototype,"geometrySystem",[EW,_W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),IW=dr(Fy.prototype,"shaderModuleService",[TW],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fy))||AW),Tk=1e-6,DW=cOe;function cOe(){var r=new Float32Array(2);return r[0]=0,r[1]=0,r}var fOe=dOe;function dOe(r){var t=new Float32Array(2);return t[0]=r[0],t[1]=r[1],t}var hOe=vOe;function vOe(r,t){var e=new Float32Array(2);return e[0]=r,e[1]=t,e}var pOe=gOe;function gOe(r,t){return r[0]=t[0],r[1]=t[1],r}var oS=mOe;function mOe(r,t,e){return r[0]=t,r[1]=e,r}var yOe=bOe;function bOe(r,t){var e=r[0],n=r[1],i=t[0],a=t[1];return Math.abs(e-i)<=Tk*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(n-a)<=Tk*Math.max(1,Math.abs(n),Math.abs(a))}var xOe=wOe;function wOe(r,t){return r[0]===t[0]&&r[1]===t[1]}var RW=SOe;function SOe(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r}var Ak=COe;function COe(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r}var EOe=Ak,OW=_Oe;function _Oe(r,t,e){return r[0]=t[0]*e[0],r[1]=t[1]*e[1],r}var TOe=OW,LW=AOe;function AOe(r,t,e){return r[0]=t[0]/e[0],r[1]=t[1]/e[1],r}var MOe=LW,kOe=IOe;function IOe(r,t){return r[0]=1/t[0],r[1]=1/t[1],r}var POe=DOe;function DOe(r,t,e){return r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r}var ROe=OOe;function OOe(r,t,e){return r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r}var LOe=FOe;function FOe(r,t,e){var n=Math.cos(e),i=Math.sin(e),a=t[0],o=t[1];return r[0]=a*n-o*i,r[1]=a*i+o*n,r}var NOe=BOe;function BOe(r,t){return r[0]=Math.floor(t[0]),r[1]=Math.floor(t[1]),r}var $Oe=zOe;function zOe(r,t){return r[0]=Math.ceil(t[0]),r[1]=Math.ceil(t[1]),r}var GOe=UOe;function UOe(r,t){return r[0]=Math.round(t[0]),r[1]=Math.round(t[1]),r}var VOe=HOe;function HOe(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r}var WOe=jOe;function jOe(r,t,e,n){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r}var FW=YOe;function YOe(r,t){var e=t[0]-r[0],n=t[1]-r[1];return Math.sqrt(e*e+n*n)}var XOe=FW,NW=qOe;function qOe(r,t){var e=t[0]-r[0],n=t[1]-r[1];return e*e+n*n}var KOe=NW,BW=ZOe;function ZOe(r){var t=r[0],e=r[1];return Math.sqrt(t*t+e*e)}var QOe=BW,$W=JOe;function JOe(r){var t=r[0],e=r[1];return t*t+e*e}var eLe=$W,tLe=rLe;function rLe(r,t){return r[0]=-t[0],r[1]=-t[1],r}var Mk=nLe;function nLe(r,t){var e=t[0],n=t[1],i=e*e+n*n;return i>0&&(i=1/Math.sqrt(i),r[0]=t[0]*i,r[1]=t[1]*i),r}var zW=iLe;function iLe(r,t){return r[0]*t[0]+r[1]*t[1]}var aLe=oLe;function oLe(r,t,e){var n=t[0]*e[1]-t[1]*e[0];return r[0]=r[1]=0,r[2]=n,r}var sLe=lLe;function lLe(r,t,e,n){var i=t[0],a=t[1];return r[0]=i+n*(e[0]-i),r[1]=a+n*(e[1]-a),r}var uLe=cLe;function cLe(r,t){t=t||1;var e=Math.random()*2*Math.PI;return r[0]=Math.cos(e)*t,r[1]=Math.sin(e)*t,r}var fLe=dLe;function dLe(r,t,e){var n=t[0],i=t[1];return r[0]=e[0]*n+e[2]*i,r[1]=e[1]*n+e[3]*i,r}var hLe=vLe;function vLe(r,t,e){var n=t[0],i=t[1];return r[0]=e[0]*n+e[2]*i+e[4],r[1]=e[1]*n+e[3]*i+e[5],r}var pLe=gLe;function gLe(r,t,e){var n=t[0],i=t[1];return r[0]=e[0]*n+e[3]*i+e[6],r[1]=e[1]*n+e[4]*i+e[7],r}var mLe=yLe;function yLe(r,t,e){var n=t[0],i=t[1];return r[0]=e[0]*n+e[4]*i+e[12],r[1]=e[1]*n+e[5]*i+e[13],r}var bLe=xLe,fp=DW();function xLe(r,t,e,n,i,a){var o,s;for(t||(t=2),e||(e=0),n?s=Math.min(n*t+e,r.length):s=r.length,o=e;o<s;o+=t)fp[0]=r[o],fp[1]=r[o+1],i(fp,fp,a),r[o]=fp[0],r[o+1]=fp[1];return r}var wLe=SLe;function SLe(r,t,e){var n=t[0]*t[0]+t[1]*t[1];if(n>e*e){var i=Math.sqrt(n);r[0]=t[0]/i*e,r[1]=t[1]/i*e}else r[0]=t[0],r[1]=t[1];return r}var kk={EPSILON:Tk,create:DW,clone:fOe,fromValues:hOe,copy:pOe,set:oS,equals:yOe,exactEquals:xOe,add:RW,subtract:Ak,sub:EOe,multiply:OW,mul:TOe,divide:LW,div:MOe,inverse:kOe,min:POe,max:ROe,rotate:LOe,floor:NOe,ceil:$Oe,round:GOe,scale:VOe,scaleAndAdd:WOe,distance:FW,dist:XOe,squaredDistance:NW,sqrDist:KOe,length:BW,len:QOe,squaredLength:$W,sqrLen:eLe,negate:tLe,normalize:Mk,dot:zW,cross:aLe,lerp:sLe,random:uLe,transformMat2:fLe,transformMat2d:hLe,transformMat3:pLe,transformMat4:mLe,forEach:bLe,limit:wLe},CLe=kk.create,GW=kk.copy,ELe=kk.dot,UW=[0,0],_Le=function(t,e,n,i,a){return RW(t,n,i),Mk(t,t),oS(e,-t[1],t[0]),oS(UW,-n[1],n[0]),a/zW(e,UW)},sS=function(t,e){return oS(t,-e[1],e[0]),t},VW=function(t,e,n){return Ak(t,e,n),Mk(t,t),t};function lS(r,t,e,n,i){Ny(t,n,-i),Ny(t,n,i),r.push(e),r.push(e)}function Ny(r,t,e){r.push([[t[0],t[1]],e])}function TLe(r,t,e){var n=[0,0],i=[0,0],a=[0,0],o=[0,0],s=-1,l=!1,u=null,c=CLe(),f=e||0,d=3,h=[],v=[],p=[],g=[0,0];t&&(r=r.slice(),r.push(r[0]));for(var m=r.length,y=1;y<m;y++){var b=f,x=r[y-1],w=r[y],S=y<r.length-1?r[y+1]:null;if(g.push(y/m,y/m),VW(n,w,x),u||(u=[0,0],sS(u,n)),l||(l=!0,lS(v,h,x,u,1)),p.push([b+0,b+1,b+2]),!S)sS(u,n),lS(v,h,w,u,1),p.push(s===1?[b,b+2,b+3]:[b+2,b+1,b+3]),f+=2;else{VW(i,S,w);var C=_Le(a,o,n,i,1),_=ELe(a,u)<0?-1:1,T=C>d;if(!isFinite(C)){sS(u,n),lS(v,h,w,u,1),p.push(s===1?[b,b+2,b+3]:[b+2,b+1,b+3]),f+=2,s=_;continue}T?(C=d,g.push(y/m),Ny(h,u,-_),v.push(w),Ny(h,o,C*_),v.push(w),p.push(s!==-_?[b,b+2,b+3]:[b+2,b+1,b+3]),p.push([b+2,b+3,b+4]),sS(c,i),GW(u,c),Ny(h,u,-_),v.push(w),f+=3):(lS(v,h,w,o,C),p.push(s===1?[b,b+2,b+3]:[b+2,b+1,b+3]),_=-1,GW(u,o),f+=2),s=_}}return{normals:h,attrIndex:p,attrPos:v,attrCounters:g}}var HW,WW,jW,YW,XW,qW,KW,By,ZW,QW,JW,e9;function ALe(r){var t=MLe();return function(){var n=An(r),i;if(t){var a=An(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return co(this,i)}}function MLe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var kLe=`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`,ILe=`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,PLe=(HW=Tn(),WW=hr(mt.Systems),jW=Bl(mt.MaterialSystem),YW=hr(mt.Systems),XW=Bl(mt.GeometrySystem),qW=hr(mt.ShaderModuleService),HW(KW=(By=(e9=function(r){uo(e,r);var t=ALe(e);function e(){var n;ar(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=t.call.apply(t,[this].concat(a)),fr(n,"materialSystem",ZW,Li(n)),fr(n,"geometrySystem",QW,Li(n)),fr(n,"shaderModuleService",JW,Li(n)),n.vertexCount=void 0,n}return br(e,[{key:"onAttributeChanged",value:function(i){var a=i.name,o=i.data,s=this.getMeshComponent();if(s&&s.material)switch(a){case"dashArray":s.material.setUniform("u_dash_array",o);break;case"dashOffset":s.material.setUniform("u_dash_offset",o);break;case"dashRatio":s.material.setUniform("u_dash_ratio",o);break;case"thickness":s.material.setUniform("u_thickness",o);break;case"color":var l=new Array(this.vertexCount).fill(void 0).map(function(){return o}).reduce(function(u,c){return[].concat(oa(u),oa(c))},[]);s.geometry.setAttribute("a_color",Float32Array.from(l),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]});break}}},{key:"onEntityCreated",value:function(){var i=this;this.shaderModuleService.registerModule("line",{vs:ILe,fs:kLe});var a=this.shaderModuleService.getModule("line"),o=a.vs,s=a.fs,l=a.uniforms,u=this.materialSystem.createShaderMaterial({vertexShader:o,fragmentShader:s}),c=TLe(this.config.points,!1),f=c.normals,d=c.attrIndex,h=c.attrPos,v=c.attrCounters,p=h.length;this.vertexCount=p;var g=this.geometrySystem.createBufferGeometry({vertexCount:p});this.setMaterial(u),this.setGeometry(g),u.setCull({enable:!1,face:Ne.BACK}).setUniform(l),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var m=[],y=[];f.forEach(function(x){var w=x[0],S=x[1];m.push([w[0],w[1]]),y.push(S)}),g.setIndex(d.reduce(function(x,w){return[].concat(oa(x),oa(w))},[])),g.setAttribute("a_pos",Float32Array.from(h.reduce(function(x,w){return[].concat(oa(x),oa(w))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var b=new Array(p).fill(void 0).map(function(){return oa(i.config.color)}).reduce(function(x,w){return[].concat(oa(x),oa(w))},[]);g.setAttribute("a_color",Float32Array.from(b),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),g.setAttribute("a_line_miter",Float32Array.from(y),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),g.setAttribute("a_line_normal",Float32Array.from(m.reduce(function(x,w){return[].concat(oa(x),oa(w))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),g.setAttribute("a_counters",Float32Array.from(v),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),e}(Vc),e9),ZW=dr(By.prototype,"materialSystem",[WW,jW],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),QW=dr(By.prototype,"geometrySystem",[YW,XW],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),JW=dr(By.prototype,"shaderModuleService",[qW],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),By))||KW);function DLe(r){return[r+1&255,r+1>>8&255,r+1>>8>>8&255]}var t9,r9,n9,i9,a9,o9,s9,$y,l9,u9,c9,f9;function d9(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function RLe(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?d9(Object(e),!0).forEach(function(n){lt(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):d9(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function OLe(r){var t=LLe();return function(){var n=An(r),i;if(t){var a=An(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return co(this,i)}}function LLe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var FLe=`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`,NLe=`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,BLe=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],$Le=(t9=Tn(),r9=hr(mt.Systems),n9=Bl(mt.MaterialSystem),i9=hr(mt.Systems),a9=Bl(mt.GeometrySystem),o9=hr(mt.ShaderModuleService),t9(s9=($y=(f9=function(r){uo(e,r);var t=OLe(e);function e(){var n;ar(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=t.call.apply(t,[this].concat(a)),fr(n,"materialSystem",l9,Li(n)),fr(n,"geometrySystem",u9,Li(n)),fr(n,"shaderModuleService",c9,Li(n)),n}return br(e,[{key:"onAttributeChanged",value:function(i){var a=i.name,o=i.data,s=this.getMeshComponent();s&&s.material&&(a==="strokeWidth"?s.material.setUniform("u_stroke_width",o):a==="strokeColor"?s.material.setUniform("u_stroke_color",o):a==="strokeOpacity"?s.material.setUniform("u_stroke_opacity",o):a==="opacity"?s.material.setUniform("u_opacity",o):a==="blur"&&s.material.setUniform("u_blur",o))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:NLe,fs:FLe});var i=this.shaderModuleService.getModule("grid"),a=i.vs,o=i.fs,s=i.uniforms,l=this.materialSystem.createShaderMaterial({vertexShader:a,fragmentShader:o,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:Ne.SRC_ALPHA,dstRGB:Ne.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});l.setUniform(RLe({u_device_pixel_ratio:window.devicePixelRatio},s));var u=this.buildAttributes(),c=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:u.instancedOffsets.length/2,vertexCount:6});c.setIndex([0,2,1,0,3,2]),c.setAttribute("position",Float32Array.from(u.positions),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),c.setAttribute("offset",Float32Array.from(u.instancedOffsets),{arrayStride:4*2,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),c.setAttribute("color",Float32Array.from(u.instancedColors),{arrayStride:4*4,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),c.setAttribute("size",Float32Array.from(u.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),c.setAttribute("shape",Float32Array.from(u.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),c.setAttribute("a_PickingColor",Float32Array.from(u.instancedPickingColors),{arrayStride:4*3,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(l),this.setGeometry(c)}},{key:"buildAttribute",value:function(i,a,o){var s,l,u,c;(s=a.instancedPickingColors).push.apply(s,oa(DLe(i.id||o))),a.instancedShapes.push(BLe.indexOf(i.shape||"circle")),(l=a.instancedColors).push.apply(l,oa(i.color||[1,0,0,1])),(u=a.instancedOffsets).push.apply(u,oa(i.position||[0,0])),(c=a.instancedSizes).push.apply(c,oa(i.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var i=this,a={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(o,s){i.buildAttribute(o,a,s)}):this.buildAttribute(this.config,a,0),a}}]),e}(Vc),f9),l9=dr($y.prototype,"materialSystem",[r9,n9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u9=dr($y.prototype,"geometrySystem",[i9,a9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c9=dr($y.prototype,"shaderModuleService",[o9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$y))||s9),h9,v9,p9,g9,m9,zy,y9,b9,x9,w9;function S9(r,t){var e;if(typeof Symbol=="undefined"||r[Symbol.iterator]==null){if(Array.isArray(r)||(e=zLe(r))||t&&r&&typeof r.length=="number"){e&&(r=e);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=r[Symbol.iterator]()},n:function(){var u=e.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function zLe(r,t){if(!!r){if(typeof r=="string")return C9(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return C9(r,t)}}function C9(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var GLe=`#ifdef USE_MAP
  uniform sampler2D map;
#endif`,ULe=`#ifdef USE_MAP
  vec4 texelColor = texture2D(map, vUv);
  // texelColor = mapTexelToLinear(texelColor);
  diffuseColor *= texelColor;
#endif`,VLe=`#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))
  varying vec2 vUv;
#endif`,HLe=`#ifdef USE_UV
  attribute vec2 uv;
	#ifdef UVS_VERTEX_ONLY
    vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,WLe=`#ifdef USE_UV
  vUv = (uvTransform * vec3(uv, 1)).xy;
#endif`,E9=(h9=Tn(),v9=hr(mt.RenderEngine),p9=hr(mt.ShaderModuleService),g9=hr(mt.ConfigService),h9(m9=(zy=(w9=function(){function r(){ar(this,r),this.container=void 0,fr(this,"engine",y9,this),fr(this,"shaderModule",b9,this),fr(this,"configService",x9,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}return br(r,[{key:"init",value:function(){var t=Sn(Qt.mark(function n(){var i,a,o,s,l;return Qt.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:HLe}),this.shaderModule.registerModule("uv.vert.main",{vs:WLe}),this.shaderModule.registerModule("uv.frag.declaration",{fs:VLe}),this.shaderModule.registerModule("map.frag.declaration",{fs:GLe}),this.shaderModule.registerModule("map.frag.main",{fs:ULe}),i=this.container.getAll(mt.Systems),a=this.configService.get(),!a.canvas){c.next=30;break}return c.next=11,this.engine.init({canvas:a.canvas,swapChainFormat:ip.BGRA8Unorm,antialiasing:!1});case 11:o=S9(i),c.prev=12,o.s();case 14:if((s=o.n()).done){c.next=21;break}if(l=s.value,!l.initialize){c.next=19;break}return c.next=19,l.initialize();case 19:c.next=14;break;case 21:c.next=26;break;case 23:c.prev=23,c.t0=c.catch(12),o.e(c.t0);case 26:return c.prev=26,o.f(),c.finish(26);case 29:this.inited=!0;case 30:case"end":return c.stop()}},n,this,[[12,23,26,29]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"render",value:function(){var t=Sn(Qt.mark(function n(){var i,a,o,s,l,u,c,f=arguments;return Qt.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(!this.inited||this.rendering)){h.next=2;break}return h.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(v){v()}),this.rendering=!0,this.engine.beginFrame(),i=this.container.getAll(mt.Systems),a=f.length,o=new Array(a),s=0;s<a;s++)o[s]=f[s];l=S9(i),h.prev=8,l.s();case 10:if((u=l.n()).done){h.next=17;break}if(c=u.value,!c.execute){h.next=15;break}return h.next=15,c.execute(o);case 15:h.next=10;break;case 17:h.next=22;break;case 19:h.prev=19,h.t0=h.catch(8),l.e(h.t0);case 22:return h.prev=22,l.f(),h.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return h.stop()}},n,this,[[8,19,22,25]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"clear",value:function(e){var n=this;return this.inited?this.engine.clear(e):this.pendings.unshift(function(){n.engine.clear(e),n.pendings.shift()}),this}},{key:"setSize",value:function(e){var n=e.width,i=e.height,a=this.engine.getCanvas();return this.size={width:n,height:i},a.width=n,a.height=i,this}},{key:"getSize",value:function(){return this.size}}]),r}(),w9),y9=dr(zy.prototype,"engine",[v9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b9=dr(zy.prototype,"shaderModule",[p9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x9=dr(zy.prototype,"configService",[g9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zy))||m9),_9,T9,A9,M9=(_9=Tn(),_9(T9=(A9=function(){function r(){ar(this,r),this.entities=[]}return br(r,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(e){return this.addEntity(e.getEntity()),this}},{key:"removeRenderable",value:function(e){return this.removeEntity(e.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(e){return this.entities.indexOf(e)===-1&&this.entities.push(e),this}},{key:"removeEntity",value:function(e){var n=this.entities.indexOf(e);return this.entities.splice(n,1),this}}]),r}(),A9))||T9),k9,I9,P9,D9=(k9=Tn(),k9(I9=(P9=function(){function r(){ar(this,r),this.cache={}}return br(r,[{key:"get",value:function(e){return this.cache[e]}},{key:"set",value:function(e,n){this.cache[e]=n}}]),r}(),P9))||I9),R9,O9,L9,F9,uS,N9,B9,$9;function z9(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function G9(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?z9(Object(e),!0).forEach(function(n){lt(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):z9(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}var U9=(R9=Tn(),O9=hr(D9),L9=hr(mt.RenderEngine),R9(F9=(uS=($9=function(){function r(){ar(this,r),fr(this,"textureCache",N9,this),fr(this,"engine",B9,this),this.config=void 0,this.loaded=!1,this.texture=void 0}return br(r,[{key:"setConfig",value:function(e){this.config=e}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:function(){var t=Sn(Qt.mark(function n(){var i=this;return Qt.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this.config.url){o.next=4;break}return o.abrupt("return",new Promise(function(s,l){var u=i.textureCache.get(i.config.url);if(u)s(u);else{var c=new Image;c.crossOrigin="Anonymous",c.src=i.config.url,c.onload=function(){var f=i.engine.createTexture2D(G9(G9({},i.config),{},{data:c,width:c.width,height:c.height,flipY:!0}));i.textureCache.set(i.config.url,f),i.texture=f,i.loaded=!0,s(f)},c.onerror=function(){l()}}}));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),o.abrupt("return",this.texture);case 7:case"end":return o.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()}]),r}(),$9),N9=dr(uS.prototype,"textureCache",[O9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B9=dr(uS.prototype,"engine",[L9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uS))||F9),V9,H9,W9,j9,Ik,Y9,X9,q9=(V9=Tn(),H9=hr(mt.Systems),W9=Bl(mt.RendererSystem),V9(j9=(Ik=(X9=function(){function r(){ar(this,r),fr(this,"rendererSystem",Y9,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return br(r,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(e){return this.camera=e,this}},{key:"setScene",value:function(e){return this.scene=e,this}},{key:"setViewport",value:function(e){return this.viewport=e,this}},{key:"setClearColor",value:function(e){return this.clearColor=e,this}},{key:"pick",value:function(e){return this.rendererSystem.pick(e,this)}}]),r}(),X9),Y9=dr(Ik.prototype,"rendererSystem",[H9,W9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ik))||j9),K9,Z9,Q9,Pk,J9,e7;function t7(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function jLe(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?t7(Object(e),!0).forEach(function(n){lt(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):t7(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}var cS=(K9=Tn(),Z9=hr(mt.ConfigService),K9(Q9=(Pk=(e7=function(){function r(){ar(this,r),fr(this,"configService",J9,this),this.container=void 0}return br(r,[{key:"getEngine",value:function(){var t=Sn(Qt.mark(function n(){var i,a,o,s;return Qt.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=this.container.get(mt.RenderEngine),a=this.configService.get(),o=a.canvas,s=a.engineOptions,u.next=4,i.init(jLe({canvas:o||fH(),swapChainFormat:ip.BGRA8Unorm,antialiasing:!1},s));case 4:return u.abrupt("return",i);case 5:case"end":return u.stop()}},n,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"getTransformComponent",value:function(e){var n=this.container.get(mt.TransformComponentManager);return n.getComponentByEntity(e)}},{key:"getMeshComponent",value:function(e){var n=this.container.get(mt.MeshComponentManager);return n.getComponentByEntity(e)}},{key:"setConfig",value:function(e){this.configService.set(e)}},{key:"setContainer",value:function(e){this.container=e}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return Nl()}},{key:"createScene",value:function(){return this.container.get(M9)}},{key:"createCamera",value:function(){return this.container.get(aH)}},{key:"createView",value:function(){return this.container.get(q9)}},{key:"createRenderable",value:function(e,n){var i=e?this.container.getNamed(mt.Renderable,e):this.container.get(Vc),a=Nl();return i.setConfig(n||{}),i.setEntity(a),i}},{key:"createGeometry",value:function(e,n){var i=this.container.getNamed(mt.Geometry,e),a=Nl();return i.setConfig(n||{}),i.setEntity(a),i.getComponent()}},{key:"createMaterial",value:function(e,n){var i=this.container.getNamed(mt.Material,e),a=Nl();return i.setConfig(n||{}),i.setEntity(a,e),i.getComponent()}},{key:"createTexture2D",value:function(e){var n=this.container.get(U9);return n.setConfig(e),n}},{key:"createBufferGeometry",value:function(e){var n=this.container.getNamed(mt.Systems,mt.GeometrySystem);return n.createBufferGeometry(e)}},{key:"createInstancedBufferGeometry",value:function(e){var n=this.container.getNamed(mt.Systems,mt.GeometrySystem);return n.createInstancedBufferGeometry(e)}},{key:"createShaderMaterial",value:function(e){var n=this.container.getNamed(mt.Systems,mt.MaterialSystem);return n.createShaderMaterial(e)}},{key:"createKernel",value:function(e){var n=this.container.get(SH);return typeof e=="string"?n.setBundle(JSON.parse(e)):n.setBundle(e),n.init(),n}},{key:"createRenderer",value:function(){var e=this.container.get(E9);return e.container=this.container,e.init(),e}},{key:"destroy",value:function(){var e=this.container.getAll(mt.Systems);e.forEach(function(a){a.tearDown&&a.tearDown()});var n=this.container.get(mt.RenderEngine);n.destroy();var i=this.container.get(mt.InteractorService);i.destroy()}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=FPe(),i=navigator.gpu?BRe:bRe;n.isBound(mt.RenderEngine)||n.bind(mt.RenderEngine).to(i).inSingletonScope(),n.bind(E9).toSelf(),n.bind(SH).toSelf(),n.bind(Vc).toSelf(),n.bind(q9).toSelf(),n.bind(aH).toSelf(),n.bind(M9).toSelf(),n.bind(r).toSelf(),n.bind(D9).toSelf(),n.bind(U9).toSelf(),n.bind(mt.Geometry).to(GRe).whenTargetNamed(Uc.BOX),n.bind(mt.Geometry).to(ZRe).whenTargetNamed(Uc.SPHERE),n.bind(mt.Geometry).to(XRe).whenTargetNamed(Uc.PLANE),n.bind(mt.Geometry).to(WRe).whenTargetNamed(Uc.MERGED),n.bind(mt.Material).to(iOe).whenTargetNamed(kH.BASIC),n.bind(mt.Renderable).to($Le).whenTargetNamed(Vc.POINT),n.bind(mt.Renderable).to(PLe).whenTargetNamed(Vc.LINE),n.bind(mt.Renderable).to(uOe).whenTargetNamed(Vc.GRID);var a=n.get(r);return a.setContainer(n),a.setConfig(e),a}}]),r}(),e7),J9=dr(Pk.prototype,"configService",[Z9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pk))||Q9);const dp=(r,t)=>{let e;return r?Wt(r)?e=()=>r:e=r:e=()=>t||1,e},YLe=(r,t)=>{const e=[],n=[],i={};let a=0;for(a=0;a<r.length;a++){const s=r[a];i[s.id]=a,e.push(s.x),e.push(s.y),e.push(0),e.push(0),n.push([])}for(a=0;a<t.length;a++){const s=t[a],l=wn(s,"source"),u=wn(s,"target");n[i[l]].push(i[u]),n[i[u]].push(i[l])}let o=0;for(a=0;a<r.length;a++){const s=e.length,l=n[a],u=l.length;e[a*4+2]=s,e[a*4+3]=l.length,o=Math.max(o,l.length);for(let c=0;c<u;++c){const f=l[c];e.push(+f)}}for(;e.length%4!=0;)e.push(0);return{maxEdgePerVetex:o,array:new Float32Array(e)}},XLe=(r,t,e,n)=>{const i=[],a=[],o={};let s=0;for(s=0;s<r.length;s++){const u=r[s];o[u.id]=s,i.push(u.x),i.push(u.y),i.push(0),i.push(0),a.push([])}for(s=0;s<t.length;s++){const u=t[s],c=wn(u,"source"),f=wn(u,"target");a[o[c]].push(o[f]),a[o[c]].push(e(u)),a[o[c]].push(n(u)),a[o[c]].push(0),a[o[f]].push(o[c]),a[o[f]].push(e(u)),a[o[f]].push(n(u)),a[o[f]].push(0)}let l=0;for(s=0;s<r.length;s++){const u=i.length,c=a[s],f=c.length;i[s*4+2]=u+1048576*f/4,i[s*4+3]=0,l=Math.max(l,f/4);for(let d=0;d<f;++d){const h=c[d];i.push(+h)}}for(;i.length%4!=0;)i.push(0);return{maxEdgePerVetex:l,array:new Float32Array(i)}},qLe=(r,t)=>{const e=[],n=r.length,i={};return t.forEach(a=>{r.forEach((o,s)=>{if(i[a[o]]===void 0&&(i[a[o]]=Object.keys(i).length),e.push(i[a[o]]),s===n-1)for(;e.length%4!=0;)e.push(0)})}),{array:new Float32Array(e),count:Object.keys(i).length}},r7=r=>{const t=[],e=r.length,n=r[0].length;for(let i=0;i<n;i++)r.forEach((a,o)=>{if(t.push(a[i]),o===e-1)for(;t.length%4!=0;)t.push(0)});return new Float32Array(t)},KLe='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',ZLe='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var fS=globalThis&&globalThis.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(r,t||[])).next())})};class n7 extends wo{constructor(t){super();this.maxIteration=1e3,this.gravity=10,this.speed=1,this.clustering=!1,this.clusterField="cluster",this.clusterGravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){return fS(this,void 0,void 0,function*(){const t=this,e=t.nodes;if(!e||e.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const n=t.center;if(e.length===1){e[0].x=n[0],e[0].y=n[1],t.onLayoutEnd&&t.onLayoutEnd();return}const i={},a={};e.forEach((o,s)=>{Wt(o.x)||(o.x=Math.random()*this.width),Wt(o.y)||(o.y=Math.random()*this.height),i[o.id]=o,a[o.id]=s}),t.nodeMap=i,t.nodeIdxMap=a,yield t.run()})}executeWithWorker(t,e){return fS(this,void 0,void 0,function*(){const n=this,i=n.nodes,a=n.center;if(!i||i.length===0)return;if(i.length===1){i[0].x=a[0],i[0].y=a[1];return}const o={},s={};i.forEach((l,u)=>{Wt(l.x)||(l.x=Math.random()*this.width),Wt(l.y)||(l.y=Math.random()*this.height),o[l.id]=l,s[l.id]=u}),n.nodeMap=o,n.nodeIdxMap=s,yield n.run(t,e)})}run(t,e){return fS(this,void 0,void 0,function*(){const n=this,i=n.nodes,a=n.edges,o=n.maxIteration,s=n.center,l=n.height*n.width;let u=Math.sqrt(l)/10;const c=l/(i.length+1),f=Math.sqrt(c),d=n.speed,h=n.clustering,{array:v,count:p}=qLe([n.clusterField],i);i.forEach((E,M)=>{let k=0,P=0;Wt(E.fx)&&Wt(E.fy)&&(k=E.fx||.001,P=E.fy||.001),v[4*M+1]=k,v[4*M+2]=P});const g=i.length,{maxEdgePerVetex:m,array:y}=YLe(i,a),b=n.workerEnabled;let x;b?x=cS.create({canvas:t,engineOptions:{supportCompute:!0}}):x=cS.create({engineOptions:{supportCompute:!0}});const w=n.onLayoutEnd,S=[];for(let E=0;E<p;E++)S.push(0,0,0,0);const C=x.createKernel(KLe).setDispatch([g,1,1]).setBinding({u_Data:y,u_K:f,u_K2:c,u_Gravity:n.gravity,u_ClusterGravity:n.clusterGravity||n.gravity||1,u_Speed:d,u_MaxDisplace:u,u_Clustering:h?1:0,u_Center:s,u_AttributeArray:v,u_ClusterCenters:S,MAX_EDGE_PER_VERTEX:m,VERTEX_COUNT:g});let _;h&&(_=x.createKernel(ZLe).setDispatch([p,1,1]).setBinding({u_Data:y,u_NodeAttributes:v,u_ClusterCenters:S,VERTEX_COUNT:g,CLUSTER_COUNT:p})),yield(()=>fS(this,void 0,void 0,function*(){for(let M=0;M<o;M++)yield C.execute(),h&&(_.setBinding({u_Data:C}),yield _.execute(),C.setBinding({u_ClusterCenters:_})),C.setBinding({u_MaxDisplace:u*=.99});const E=yield C.getOutput();t?e.postMessage({type:uM.GPUEND,vertexEdgeData:E}):i.forEach((M,k)=>{const P=E[4*k],F=E[4*k+1];M.x=P,M.y=F}),w&&w()}))()})}getType(){return"fruchterman-gpu"}}const QLe='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',JLe='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var Dk=globalThis&&globalThis.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(r,t||[])).next())})};class i7 extends wo{constructor(t){super();this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}execute(){return Dk(this,void 0,void 0,function*(){const t=this,e=t.nodes;if(!e||e.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const n=t.center;if(e.length===1){e[0].x=n[0],e[0].y=n[1],t.onLayoutEnd&&t.onLayoutEnd();return}const i={},a={};e.forEach((o,s)=>{Wt(o.x)||(o.x=Math.random()*t.width),Wt(o.y)||(o.y=Math.random()*t.height),i[o.id]=o,a[o.id]=s}),t.nodeMap=i,t.nodeIdxMap=a,t.nodeStrength=dp(t.nodeStrength,1),t.edgeStrength=dp(t.edgeStrength,1),yield t.run()})}executeWithWorker(t,e){const n=this,i=n.nodes,a=n.center;if(!i||i.length===0)return;if(i.length===1){i[0].x=a[0],i[0].y=a[1];return}const o={},s={};i.forEach((l,u)=>{Wt(l.x)||(l.x=Math.random()*n.width),Wt(l.y)||(l.y=Math.random()*n.height),o[l.id]=l,s[l.id]=u}),n.nodeMap=o,n.nodeIdxMap=s,n.nodeStrength=dp(n.nodeStrength,1),n.edgeStrength=dp(n.edgeStrength,1),n.run(t,e)}run(t,e){return Dk(this,void 0,void 0,function*(){const n=this,i=n.nodes,a=n.edges,o=n.maxIteration;!n.width&&typeof window!="undefined"&&(n.width=window.innerWidth),!n.height&&typeof window!="undefined"&&(n.height=window.innerHeight);const s=i.length;n.linkDistance=dp(n.linkDistance),n.edgeStrength=dp(n.edgeStrength);const{maxEdgePerVetex:l,array:u}=XLe(i,a,n.linkDistance,n.edgeStrength);n.degrees=iy(i.length,n.nodeIdxMap,a);const c=[],f=[],d=[],h=[],v=[],p=[],g=[];n.getMass||(n.getMass=k=>n.degrees[n.nodeIdxMap[k.id]]||1);const m=n.gravity,y=n.center;i.forEach((k,P)=>{c.push(n.getMass(k)),f.push(n.nodeStrength(k)),n.degrees[P]||(n.degrees[P]=0);let F=[y[0],y[1],m];if(n.getCenter){const $=n.getCenter(k,n.degrees[P]);$&&Wt($[0])&&Wt($[1])&&Wt($[2])&&(F=$)}d.push(F[0]),h.push(F[1]),v.push(F[2]),Wt(k.fx)&&Wt(k.fy)?(p.push(k.fx||.001),g.push(k.fy||.001)):(p.push(0),g.push(0))});const b=r7([c,n.degrees,f,p]),x=r7([d,h,v,g]),w=n.workerEnabled;let S;w?S=cS.create({canvas:t,engineOptions:{supportCompute:!0}}):S=cS.create({engineOptions:{supportCompute:!0}});const C=n.onLayoutEnd,_=[];u.forEach(k=>{_.push(k)});for(let k=0;k<4;k++)_.push(0);const T=S.createKernel(QLe).setDispatch([s,1,1]).setBinding({u_Data:u,u_damping:n.damping,u_maxSpeed:n.maxSpeed,u_minMovement:n.minMovement,u_coulombDisScale:n.coulombDisScale,u_factor:n.factor,u_NodeAttributeArray1:b,u_NodeAttributeArray2:x,MAX_EDGE_PER_VERTEX:l,VERTEX_COUNT:s,u_AveMovement:_,u_interval:n.interval}),E=S.createKernel(JLe).setDispatch([1,1,1]).setBinding({u_Data:u,VERTEX_COUNT:s,u_AveMovement:[0,0,0,0]});yield(()=>Dk(this,void 0,void 0,function*(){for(let P=0;P<o;P++){yield T.execute(),E.setBinding({u_Data:T}),yield E.execute();const F=Math.max(.02,n.interval-P*.002);T.setBinding({u_interval:F,u_AveMovement:E})}const k=yield T.getOutput();t?e.postMessage({type:uM.GPUEND,vertexEdgeData:k}):i.forEach((P,F)=>{const $=k[4*F],R=k[4*F+1];P.x=$,P.y=R}),C&&C()}))()})}getType(){return"gForce-gpu"}}class a7 extends wo{constructor(t){super();this.center=[0,0],this.maxIteration=100,this.gravity=10,this.comboGravity=10,this.linkDistance=10,this.alpha=1,this.alphaMin=.001,this.alphaDecay=1-Math.pow(this.alphaMin,1/300),this.alphaTarget=0,this.velocityDecay=.6,this.edgeStrength=.6,this.nodeStrength=30,this.preventOverlap=!1,this.preventNodeOverlap=!1,this.preventComboOverlap=!1,this.collideStrength=void 0,this.nodeCollideStrength=.5,this.comboCollideStrength=.5,this.comboSpacing=20,this.comboPadding=10,this.optimizeRangeFactor=1,this.onTick=()=>{},this.onLayoutEnd=()=>{},this.depthAttractiveForceScale=1,this.depthRepulsiveForceScale=2,this.nodes=[],this.edges=[],this.combos=[],this.comboTrees=[],this.width=300,this.height=300,this.bias=[],this.nodeMap={},this.oriComboMap={},this.indexMap={},this.comboMap={},this.previousLayouted=!1,this.updateCfg(t)}getDefaultCfg(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}execute(){const t=this,e=t.nodes,n=t.center;if(t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},!e||e.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(e.length===1){e[0].x=n[0],e[0].y=n[1],t.onLayoutEnd&&t.onLayoutEnd();return}t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()}run(){const t=this,e=t.nodes,n=t.previousLayouted?t.maxIteration/5:t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);const i=t.center,a=t.velocityDecay,o=t.comboMap;t.previousLayouted||t.initPos(o);for(let u=0;u<n;u++){const c=[];e.forEach((f,d)=>{c[d]={x:0,y:0}}),t.applyCalculate(c),t.applyComboCenterForce(c),e.forEach((f,d)=>{!Wt(f.x)||!Wt(f.y)||(f.x+=c[d].x*a,f.y+=c[d].y*a)}),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()}const s=[0,0];e.forEach(u=>{!Wt(u.x)||!Wt(u.y)||(s[0]+=u.x,s[1]+=u.y)}),s[0]/=e.length,s[1]/=e.length;const l=[i[0]-s[0],i[1]-s[1]];e.forEach((u,c)=>{!Wt(u.x)||!Wt(u.y)||(u.x+=l[0],u.y+=l[1])}),t.combos.forEach(u=>{const c=o[u.id];c&&c.empty&&(u.x=c.cx||u.x,u.y=c.cy||u.y)}),t.previousLayouted=!0}initVals(){const t=this,e=t.edges,n=t.nodes,i=t.combos,a={},o={},s={};n.forEach((E,M)=>{o[E.id]=E,s[E.id]=M}),t.nodeMap=o,t.indexMap=s;const l={};i.forEach(E=>{l[E.id]=E}),t.oriComboMap=l,t.comboMap=t.getComboMap();const u=t.preventOverlap;t.preventComboOverlap=t.preventComboOverlap||u,t.preventNodeOverlap=t.preventNodeOverlap||u;const c=t.collideStrength;c&&(t.comboCollideStrength=c,t.nodeCollideStrength=c),t.comboCollideStrength=t.comboCollideStrength?t.comboCollideStrength:0,t.nodeCollideStrength=t.nodeCollideStrength?t.nodeCollideStrength:0;for(let E=0;E<e.length;++E){const M=wn(e[E],"source"),k=wn(e[E],"target");a[M]?a[M]++:a[M]=1,a[k]?a[k]++:a[k]=1}const f=[];for(let E=0;E<e.length;++E){const M=wn(e[E],"source"),k=wn(e[E],"target");f[E]=a[M]/(a[M]+a[k])}this.bias=f;const d=t.nodeSize,h=t.nodeSpacing;let v,p;if(Wt(h)?p=()=>h:Dc(h)?p=h:p=()=>0,this.nodeSpacing=p,!d)v=E=>E.size?Xa(E.size)?(E.size[0]>E.size[1]?E.size[0]:E.size[1])/2:Fl(E.size)?(E.size.width>E.size.height?E.size.width:E.size.height)/2:E.size/2:10;else if(Dc(d))v=E=>d(E);else if(Xa(d)){const M=(d[0]>d[1]?d[0]:d[1])/2;v=k=>M}else{const E=d/2;v=M=>E}this.nodeSize=v;const g=t.comboSpacing;let m;Wt(g)?m=()=>g:Dc(g)?m=g:m=()=>0,this.comboSpacing=m;const y=t.comboPadding;let b;Wt(y)?b=()=>y:Xa(y)?b=()=>Math.max.apply(null,y):Dc(y)?b=y:b=()=>0,this.comboPadding=b;let x=this.linkDistance,w;x||(x=10),Wt(x)?w=E=>x:w=x,this.linkDistance=w;let S=this.edgeStrength,C;S||(S=1),Wt(S)?C=E=>S:C=S,this.edgeStrength=C;let _=this.nodeStrength,T;_||(_=30),Wt(_)?T=E=>_:T=_,this.nodeStrength=T}initPos(t){this.nodes.forEach((i,a)=>{const o=i.comboId,s=t[o];o&&s?(i.x=s.cx+100/(a+1),i.y=s.cy+100/(a+1)):(i.x=100/(a+1),i.y=100/(a+1))})}getComboMap(){const t=this,e=t.nodeMap,n=t.indexMap,i=t.comboTrees,a=t.oriComboMap,o={};return(i||[]).forEach(s=>{const l=[];ew(s,u=>{if(u.itemType==="node"||!a[u.id])return!0;if(o[u.id]===void 0){const d={id:u.id,name:u.id,cx:0,cy:0,count:0,depth:t.oriComboMap[u.id].depth||0,children:[]};o[u.id]=d}const c=u.children;c&&c.forEach(d=>{if(!o[d.id]&&!e[d.id])return!0;l.push(d)});const f=o[u.id];if(f.cx=0,f.cy=0,l.length===0){f.empty=!0;const d=a[u.id],h=Object.keys(e).length,v=`${u.id}-visual-child-${h}`,p={id:v,x:d.x,y:d.y,depth:f.depth+1,itemType:"node"};t.nodes.push(p),e[v]=p,n[v]=h,f.cx=d.x,f.cy=d.y,l.push(p)}return l.forEach(d=>{if(f.count++,d.itemType!=="node"){const v=o[d.id];Wt(v.cx)&&(f.cx+=v.cx),Wt(v.cy)&&(f.cy+=v.cy);return}const h=e[d.id];!h||(Wt(h.x)&&(f.cx+=h.x),Wt(h.y)&&(f.cy+=h.y))}),f.cx/=f.count,f.cy/=f.count,f.children=l,!0})}),o}applyComboCenterForce(t){const e=this,n=e.gravity,i=e.comboGravity||n,a=this.alpha,o=e.comboTrees,s=e.indexMap,l=e.nodeMap,u=e.comboMap;(o||[]).forEach(c=>{ew(c,f=>{if(f.itemType==="node"||!u[f.id])return!0;const h=u[f.id],v=(h.depth+1)/10*.5,p=h.cx,g=h.cy;return h.cx=0,h.cy=0,h.children.forEach(m=>{if(m.itemType!=="node"){const _=u[m.id];_&&Wt(_.cx)&&(h.cx+=_.cx),_&&Wt(_.cy)&&(h.cy+=_.cy);return}const y=l[m.id],b=y.x-p||.005,x=y.y-g||.005,w=Math.sqrt(b*b+x*x),S=s[y.id],C=i*a/w*v;t[S].x-=b*C,t[S].y-=x*C,Wt(y.x)&&(h.cx+=y.x),Wt(y.y)&&(h.cy+=y.y)}),h.cx/=h.count,h.cy/=h.count,!0})})}applyCalculate(t){const e=this,n=e.comboMap,i=e.nodes,a={};i.forEach((s,l)=>{i.forEach((u,c)=>{if(l<c)return;const f=s.x-u.x||.005,d=s.y-u.y||.005;let h=f*f+d*d;const v=Math.sqrt(h);h<1&&(h=v),a[`${s.id}-${u.id}`]={vx:f,vy:d,vl2:h,vl:v},a[`${u.id}-${s.id}`]={vl2:h,vl:v,vx:-f,vy:-d}})}),e.updateComboSizes(n),e.calRepulsive(t,a),e.calAttractive(t,a),e.preventComboOverlap&&e.comboNonOverlapping(t,n)}updateComboSizes(t){const e=this,n=e.comboTrees,i=e.nodeMap,a=e.nodeSize,o=e.comboSpacing,s=e.comboPadding;(n||[]).forEach(l=>{const u=[];ew(l,c=>{if(c.itemType==="node")return!0;const f=t[c.id];if(!f)return!1;const d=c.children;d&&d.forEach(p=>{!t[p.id]&&!i[p.id]||u.push(p)}),f.minX=1/0,f.minY=1/0,f.maxX=-1/0,f.maxY=-1/0,u.forEach(p=>{if(p.itemType!=="node")return!0;const g=i[p.id];if(!g)return!0;const m=a(g),y=g.x-m,b=g.y-m,x=g.x+m,w=g.y+m;f.minX>y&&(f.minX=y),f.minY>b&&(f.minY=b),f.maxX<x&&(f.maxX=x),f.maxY<w&&(f.maxY=w)});let h=e.oriComboMap[c.id].size||10;Xa(h)&&(h=h[0]);const v=Math.max(f.maxX-f.minX,f.maxY-f.minY,h);return f.r=v/2+o(f)/2+s(f),!0})})}comboNonOverlapping(t,e){const n=this,i=n.comboTree,a=n.comboCollideStrength,o=n.indexMap,s=n.nodeMap;ew(i,l=>{if(!e[l.id]&&!s[l.id]&&l.id!=="comboTreeRoot")return!1;const u=l.children;return u&&u.length>1&&u.forEach((c,f)=>{if(c.itemType==="node")return!1;const d=e[c.id];!d||u.forEach((h,v)=>{if(f<=v||h.itemType==="node")return!1;const p=e[h.id];if(!p)return!1;const g=d.cx-p.cx||.005,m=d.cy-p.cy||.005,y=g*g+m*m,b=d.r||1,x=p.r||1,w=b+x,S=x*x,C=b*b;if(y<w*w){const _=c.children;if(!_||_.length===0)return!1;const T=h.children;if(!T||T.length===0)return!1;const E=Math.sqrt(y),M=(w-E)/E*a,k=g*M,P=m*M,F=S/(C+S),$=1-F;_.forEach(R=>{if(R.itemType!=="node")return!1;if(!s[R.id])return;const L=o[R.id];T.forEach(O=>{if(O.itemType!=="node"||!s[O.id])return!1;const B=o[O.id];t[L].x+=k*F,t[L].y+=P*F,t[B].x-=k*$,t[B].y-=P*$})})}})}),!0})}calRepulsive(t,e){const n=this,i=n.nodes,a=n.width*n.optimizeRangeFactor,o=n.nodeStrength,s=n.alpha,l=n.nodeCollideStrength,u=n.preventNodeOverlap,c=n.nodeSize,f=n.nodeSpacing,d=n.depthRepulsiveForceScale,h=n.center;i.forEach((v,p)=>{if(!(!v.x||!v.y)){if(h){const g=n.gravity,m=v.x-h[0]||.005,y=v.y-h[1]||.005,b=Math.sqrt(m*m+y*y);t[p].x-=m*g*s/b,t[p].y-=y*g*s/b}i.forEach((g,m)=>{if(p===m||!g.x||!g.y)return;const{vl2:y,vl:b}=e[`${v.id}-${g.id}`];if(b>a)return;const{vx:x,vy:w}=e[`${v.id}-${g.id}`];let S=Math.log(Math.abs(g.depth-v.depth)/10)+1||1;S=S<1?1:S,g.comboId!==v.comboId&&(S+=1);const C=S?Math.pow(d,S):1,_=o(g)*s/y*C;if(t[p].x+=x*_,t[p].y+=w*_,p<m&&u){const T=c(v)+f(v)||1,E=c(g)+f(g)||1,M=T+E;if(y<M*M){const k=(M-b)/b*l,P=E*E;let F=P/(T*T+P);const $=x*k,R=w*k;t[p].x+=$*F,t[p].y+=R*F,F=1-F,t[m].x-=$*F,t[m].y-=R*F}}})}})}calAttractive(t,e){const n=this,i=n.edges,a=n.linkDistance,o=n.alpha,s=n.edgeStrength,l=n.bias,u=n.depthAttractiveForceScale;i.forEach((c,f)=>{const d=wn(c,"source"),h=wn(c,"target");if(!d||!h||d===h)return;const v=n.indexMap[d],p=n.indexMap[h],g=n.nodeMap[d],m=n.nodeMap[h];if(!g||!m)return;let y=g.depth===m.depth?0:Math.log(Math.abs(g.depth-m.depth)/10);g.comboId===m.comboId&&(y=y/2);let b=y?Math.pow(u,y):1;if(g.comboId!==m.comboId&&b===1?b=u/2:g.comboId===m.comboId&&(b=2),!Wt(m.x)||!Wt(g.x)||!Wt(m.y)||!Wt(g.y))return;const{vl:x,vx:w,vy:S}=e[`${h}-${d}`],C=(x-a(c))/x*o*s(c)*b,_=w*C,T=S*C,E=l[f];t[p].x-=_*E,t[p].y-=T*E,t[v].x+=_*(1-E),t[v].y+=T*(1-E)})}getType(){return"comboForce"}}class Rk{constructor(t){this.id=t.id||0,this.rx=t.rx,this.ry=t.ry,this.fx=0,this.fy=0,this.mass=t.mass,this.degree=t.degree,this.g=t.g||0}distanceTo(t){const e=this.rx-t.rx,n=this.ry-t.ry;return Math.hypot(e,n)}setPos(t,e){this.rx=t,this.ry=e}resetForce(){this.fx=0,this.fy=0}addForce(t){const e=t.rx-this.rx,n=t.ry-this.ry;let i=Math.hypot(e,n);i=i<1e-4?1e-4:i;const a=this.g*(this.degree+1)*(t.degree+1)/i;this.fx+=a*e/i,this.fy+=a*n/i}in(t){return t.contains(this.rx,this.ry)}add(t){const e=this.mass+t.mass,n=(this.rx*this.mass+t.rx*t.mass)/e,i=(this.ry*this.mass+t.ry*t.mass)/e,a=this.degree+t.degree,o={rx:n,ry:i,mass:e,degree:a};return new Rk(o)}}class hp{constructor(t){this.xmid=t.xmid,this.ymid=t.ymid,this.length=t.length,this.massCenter=t.massCenter||[0,0],this.mass=t.mass||1}getLength(){return this.length}contains(t,e){const n=this.length/2;return t<=this.xmid+n&&t>=this.xmid-n&&e<=this.ymid+n&&e>=this.ymid-n}NW(){const t=this.xmid-this.length/4,e=this.ymid+this.length/4,n=this.length/2,i={xmid:t,ymid:e,length:n};return new hp(i)}NE(){const t=this.xmid+this.length/4,e=this.ymid+this.length/4,n=this.length/2,i={xmid:t,ymid:e,length:n};return new hp(i)}SW(){const t=this.xmid-this.length/4,e=this.ymid-this.length/4,n=this.length/2,i={xmid:t,ymid:e,length:n};return new hp(i)}SE(){const t=this.xmid+this.length/4,e=this.ymid-this.length/4,n=this.length/2,i={xmid:t,ymid:e,length:n};return new hp(i)}}class vp{constructor(t){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,t!=null&&(this.quad=t)}insert(t){if(this.body==null){this.body=t;return}this._isExternal()?(this.quad&&(this.NW=new vp(this.quad.NW()),this.NE=new vp(this.quad.NE()),this.SW=new vp(this.quad.SW()),this.SE=new vp(this.quad.SE())),this._putBody(this.body),this._putBody(t),this.body=this.body.add(t)):(this.body=this.body.add(t),this._putBody(t))}_putBody(t){!this.quad||(t.in(this.quad.NW())&&this.NW?this.NW.insert(t):t.in(this.quad.NE())&&this.NE?this.NE.insert(t):t.in(this.quad.SW())&&this.SW?this.SW.insert(t):t.in(this.quad.SE())&&this.SE&&this.SE.insert(t))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(t){if(!(this.body==null||t===this.body))if(this._isExternal())t.addForce(this.body);else{const e=this.quad?this.quad.getLength():0,n=this.body.distanceTo(t);e/n<this.theta?t.addForce(this.body):(this.NW&&this.NW.updateForce(t),this.NE&&this.NE.updateForce(t),this.SW&&this.SW.updateForce(t),this.SE&&this.SE.updateForce(t))}}}class o7 extends wo{constructor(t){super();this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.kr=5,this.kg=1,this.mode="normal",this.preventOverlap=!1,this.dissuadeHubs=!1,this.barnesHut=void 0,this.maxIteration=0,this.ks=.1,this.ksmax=10,this.tao=.1,this.onLayoutEnd=()=>{},this.prune=void 0,this.updateCfg(t)}getDefaultCfg(){return{}}execute(){const t=this,{nodes:e,onLayoutEnd:n,prune:i}=t;let a=t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);const o=[],s=e.length;for(let l=0;l<s;l+=1){const u=e[l];let c=10,f=10;Wt(u.size)&&(c=u.size,f=u.size),Xa(u.size)?(isNaN(u.size[0])||(c=u.size[0]),isNaN(u.size[1])||(f=u.size[1])):Fl(u.size)&&(c=u.size.width,f=u.size.height),t.getWidth&&!isNaN(t.getWidth(u))&&(f=t.getWidth(u)),t.getHeight&&!isNaN(t.getHeight(u))&&(c=t.getHeight(u));const d=Math.max(c,f);o.push(d)}t.barnesHut===void 0&&s>250&&(t.barnesHut=!0),t.prune===void 0&&s>100&&(t.prune=!0),this.maxIteration===0&&!t.prune?(a=250,s<=200&&s>100?a=1e3:s>200&&(a=1200),this.maxIteration=a):this.maxIteration===0&&i&&(a=100,s<=200&&s>100?a=500:s>200&&(a=950),this.maxIteration=a),t.kr||(t.kr=50,s>100&&s<=500?t.kr=20:s>500&&(t.kr=1)),t.kg||(t.kg=20,s>100&&s<=500?t.kg=10:s>500&&(t.kg=1)),this.nodes=t.updateNodesByForces(o),n()}updateNodesByForces(t){const e=this,{edges:n,maxIteration:i}=e;let a=e.nodes;const o=n.filter(v=>{const p=wn(v,"source"),g=wn(v,"target");return p!==g}),s=a.length,l=o.length,u=[],c={},f={},d=[];for(let v=0;v<s;v+=1)c[a[v].id]=v,u[v]=0,(a[v].x===void 0||isNaN(a[v].x))&&(a[v].x=Math.random()*1e3),(a[v].y===void 0||isNaN(a[v].y))&&(a[v].y=Math.random()*1e3),d.push({x:a[v].x,y:a[v].y});for(let v=0;v<l;v+=1){let p,g,m=0,y=0;for(let b=0;b<s;b+=1){const x=wn(o[v],"source"),w=wn(o[v],"target");a[b].id===x?(p=a[b],m=b):a[b].id===w&&(g=a[b],y=b),f[v]={sourceIdx:m,targetIdx:y}}p&&(u[c[p.id]]+=1),g&&(u[c[g.id]]+=1)}let h=i;if(a=this.iterate(h,c,f,l,u,t),e.prune){for(let v=0;v<l;v+=1)u[f[v].sourceIdx]<=1?(a[f[v].sourceIdx].x=a[f[v].targetIdx].x,a[f[v].sourceIdx].y=a[f[v].targetIdx].y):u[f[v].targetIdx]<=1&&(a[f[v].targetIdx].x=a[f[v].sourceIdx].x,a[f[v].targetIdx].y=a[f[v].sourceIdx].y);e.prune=!1,e.barnesHut=!1,h=100,a=this.iterate(h,c,f,l,u,t)}return a}iterate(t,e,n,i,a,o){const s=this;let{nodes:l}=s;const{kr:u,preventOverlap:c}=s,{barnesHut:f}=s,d=l.length;let h=0;const v=100;let p=t;const g=50;let m=[];const y=[],b=[];for(let x=0;x<d;x+=1)if(m[2*x]=0,m[2*x+1]=0,f){const w={id:x,rx:l[x].x,ry:l[x].y,mass:1,g:u,degree:a[x]};b[x]=new Rk(w)}for(;p>0;){for(let w=0;w<d;w+=1)y[2*w]=m[2*w],y[2*w+1]=m[2*w+1],m[2*w]=0,m[2*w+1]=0;m=this.getAttrForces(p,g,i,e,n,a,o,m),f&&(c&&p>g||!c)?m=this.getOptRepGraForces(m,b,a):m=this.getRepGraForces(p,g,m,v,o,a);const x=this.updatePos(m,y,h,a);l=x.nodes,h=x.sg,p--,s.tick&&s.tick()}return l}getAttrForces(t,e,n,i,a,o,s,l){const u=this,{nodes:c,preventOverlap:f,dissuadeHubs:d,mode:h,prune:v}=u;for(let p=0;p<n;p+=1){const g=c[a[p].sourceIdx],m=a[p].sourceIdx,y=c[a[p].targetIdx],b=a[p].targetIdx;if(v&&(o[m]<=1||o[b]<=1))continue;const x=[y.x-g.x,y.y-g.y];let w=Math.hypot(x[0],x[1]);w=w<1e-4?1e-4:w,x[0]=x[0]/w,x[1]=x[1]/w,f&&t<e&&(w=w-s[m]-s[b]);let S=w,C=S;h==="linlog"&&(S=Math.log(1+w),C=S),d&&(S=w/o[m],C=w/o[b]),f&&t<e&&w<=0?(S=0,C=0):f&&t<e&&w>0&&(S=w,C=w),l[2*i[g.id]]+=S*x[0],l[2*i[y.id]]-=C*x[0],l[2*i[g.id]+1]+=S*x[1],l[2*i[y.id]+1]-=C*x[1]}return l}getRepGraForces(t,e,n,i,a,o){const s=this,{nodes:l,preventOverlap:u,kr:c,kg:f,center:d,prune:h}=s,v=l.length;for(let p=0;p<v;p+=1){for(let b=p+1;b<v;b+=1){if(h&&(o[p]<=1||o[b]<=1))continue;const x=[l[b].x-l[p].x,l[b].y-l[p].y];let w=Math.hypot(x[0],x[1]);w=w<1e-4?1e-4:w,x[0]=x[0]/w,x[1]=x[1]/w,u&&t<e&&(w=w-a[p]-a[b]);let S=c*(o[p]+1)*(o[b]+1)/w;u&&t<e&&w<0?S=i*(o[p]+1)*(o[b]+1):u&&t<e&&w===0?S=0:u&&t<e&&w>0&&(S=c*(o[p]+1)*(o[b]+1)/w),n[2*p]-=S*x[0],n[2*b]+=S*x[0],n[2*p+1]-=S*x[1],n[2*b+1]+=S*x[1]}const g=[l[p].x-d[0],l[p].y-d[1]],m=Math.hypot(g[0],g[1]);g[0]=g[0]/m,g[1]=g[1]/m;const y=f*(o[p]+1);n[2*p]-=y*g[0],n[2*p+1]-=y*g[1]}return n}getOptRepGraForces(t,e,n){const i=this,{nodes:a,kg:o,center:s,prune:l}=i,u=a.length;let c=9e10,f=-9e10,d=9e10,h=-9e10;for(let y=0;y<u;y+=1)l&&n[y]<=1||(e[y].setPos(a[y].x,a[y].y),a[y].x>=f&&(f=a[y].x),a[y].x<=c&&(c=a[y].x),a[y].y>=h&&(h=a[y].y),a[y].y<=d&&(d=a[y].y));const v=Math.max(f-c,h-d),p={xmid:(f+c)/2,ymid:(h+d)/2,length:v,massCenter:s,mass:u},g=new hp(p),m=new vp(g);for(let y=0;y<u;y+=1)l&&n[y]<=1||e[y].in(g)&&m.insert(e[y]);for(let y=0;y<u;y+=1){if(l&&n[y]<=1)continue;e[y].resetForce(),m.updateForce(e[y]),t[2*y]-=e[y].fx,t[2*y+1]-=e[y].fy;const b=[a[y].x-s[0],a[y].y-s[1]];let x=Math.hypot(b[0],b[1]);x=x<1e-4?1e-4:x,b[0]=b[0]/x,b[1]=b[1]/x;const w=o*(n[y]+1);t[2*y]-=w*b[0],t[2*y+1]-=w*b[1]}return t}updatePos(t,e,n,i){const a=this,{nodes:o,ks:s,tao:l,prune:u,ksmax:c}=a,f=o.length,d=[],h=[];let v=0,p=0;for(let m=0;m<f;m+=1){if(u&&i[m]<=1)continue;const y=[t[2*m]-e[2*m],t[2*m+1]-e[2*m+1]],b=Math.hypot(y[0],y[1]),x=[t[2*m]+e[2*m],t[2*m+1]+e[2*m+1]],w=Math.hypot(x[0],x[1]);d[m]=b,h[m]=w/2,v+=(i[m]+1)*d[m],p+=(i[m]+1)*h[m]}const g=n;n=l*p/v,g!==0&&(n=n>1.5*g?1.5*g:n);for(let m=0;m<f;m+=1){if(u&&i[m]<=1)continue;let y=s*n/(1+n*Math.sqrt(d[m])),b=Math.hypot(t[2*m],t[2*m+1]);b=b<1e-4?1e-4:b;const x=c/b;y=y>x?x:y;const w=y*t[2*m],S=y*t[2*m+1];o[m].x+=w,o[m].y+=S}return{nodes:o,sg:n}}}const dS={force:bz,fruchterman:t8,forceAtlas2:o7,gForce:iz,dagre:HG,circular:xz,radial:QG,concentric:JG,grid:rz,mds:e8,comboForce:a7,random:nz,"gForce-gpu":i7,"fruchterman-gpu":n7};var eFe=cm.mix,Fu={assign:eFe};Fu.assign;var Ok=18,tFe=Ok*2,s7=Ok,rFe={getId:function(t){return t.id||t.name},getPreH:function(t){return t.preH||0},getPreV:function(t){return t.preV||0},getHGap:function(t){return t.hgap||s7},getVGap:function(t){return t.vgap||s7},getChildren:function(t){return t.children},getHeight:function(t){return t.height||tFe},getWidth:function(t){var e=t.label||" ";return t.width||e.split("").length*Ok}};function hS(r,t){var e=this;if(e.vgap=e.hgap=0,r instanceof hS)return r;e.data=r;var n=t.getHGap(r),i=t.getVGap(r);return e.preH=t.getPreH(r),e.preV=t.getPreV(r),e.width=t.getWidth(r),e.height=t.getHeight(r),e.width+=e.preH,e.height+=e.preV,e.id=t.getId(r),e.x=e.y=0,e.depth=0,e.children||(e.children=[]),e.addGap(n,i),e}Fu.assign(hS.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(t,e){var n=this;n.hgap+=t,n.vgap+=e,n.width+=2*t,n.height+=2*e},eachNode:function(t){for(var e=this,n=[e],i;i=n.shift();)t(i),n=i.children.concat(n)},DFTraverse:function(t){this.eachNode(t)},BFTraverse:function(t){for(var e=this,n=[e],i;i=n.shift();)t(i),n=n.concat(i.children)},getBoundingBox:function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)}),t},translate:function(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.eachNode(function(n){n.x+=t,n.y+=e,n.x+=n.preH,n.y+=n.preV})},right2left:function(){var t=this,e=t.getBoundingBox();t.eachNode(function(n){n.x=n.x-(n.x-e.left)*2-n.width}),t.translate(e.width,0)},bottom2top:function(){var t=this,e=t.getBoundingBox();t.eachNode(function(n){n.y=n.y-(n.y-e.top)*2-n.height}),t.translate(0,e.height)}});function nFe(r,t,e){t===void 0&&(t={}),t=Fu.assign({},rFe,t);var n=new hS(r,t),i=[n],a;if(!e&&!r.collapsed){for(;a=i.shift();)if(!a.data.collapsed){var o=t.getChildren(a.data),s=o?o.length:0;if(a.children=new Array(s),o&&s)for(var l=0;l<s;l++){var u=new hS(o[l],t);a.children[l]=u,i.push(u),u.parent=a,u.depth=a.depth+1}}}return n}var Lk=nFe,iFe=function(){function r(e,n){n===void 0&&(n={});var i=this;i.options=n,i.rootNode=Lk(e,n)}var t=r.prototype;return t.execute=function(){throw new Error("please override this method")},r}(),vS=iFe;function Gy(r,t,e,n){n===void 0&&(n=[]);var i=this;i.w=r||0,i.h=t||0,i.y=e||0,i.x=0,i.c=n||[],i.cs=n.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}Gy.fromNode=function(r,t){if(!r)return null;var e=[];return r.children.forEach(function(n){e.push(Gy.fromNode(n,t))}),t?new Gy(r.height,r.width,r.x,e):new Gy(r.width,r.height,r.y,e)};function l7(r,t,e){e?r.y+=t:r.x+=t,r.children.forEach(function(n){l7(n,t,e)})}function u7(r,t){var e=t?r.y:r.x;return r.children.forEach(function(n){e=Math.min(u7(n,t),e)}),e}function aFe(r,t){var e=u7(r,t);l7(r,-e,t)}function c7(r,t,e){e?t.y=r.x:t.x=r.x,r.c.forEach(function(n,i){c7(n,t.children[i],e)})}function f7(r,t,e){e===void 0&&(e=0),t?(r.x=e,e+=r.width):(r.y=e,e+=r.height),r.children.forEach(function(n){f7(n,t,e)})}var oFe=function(r,t){t===void 0&&(t={});var e=t.isHorizontal;function n(y){if(y.cs===0){i(y);return}n(y.c[0]);for(var b=g(u(y.c[0].el),0,null),x=1;x<y.cs;++x){n(y.c[x]);var w=u(y.c[x].er);a(y,x,b),b=g(w,x,b)}d(y),i(y)}function i(y){y.cs===0?(y.el=y,y.er=y,y.msel=y.mser=0):(y.el=y.c[0].el,y.msel=y.c[0].msel,y.er=y.c[y.cs-1].er,y.mser=y.c[y.cs-1].mser)}function a(y,b,x){for(var w=y.c[b-1],S=w.mod,C=y.c[b],_=C.mod;w!==null&&C!==null;){u(w)>x.low&&(x=x.nxt);var T=S+w.prelim+w.w-(_+C.prelim);T>0&&(_+=T,o(y,b,x.index,T));var E=u(w),M=u(C);E<=M&&(w=l(w),w!==null&&(S+=w.mod)),E>=M&&(C=s(C),C!==null&&(_+=C.mod))}!w&&!!C?c(y,b,C,_):!!w&&!C&&f(y,b,w,S)}function o(y,b,x,w){y.c[b].mod+=w,y.c[b].msel+=w,y.c[b].mser+=w,v(y,b,x,w)}function s(y){return y.cs===0?y.tl:y.c[0]}function l(y){return y.cs===0?y.tr:y.c[y.cs-1]}function u(y){return y.y+y.h}function c(y,b,x,w){var S=y.c[0].el;S.tl=x;var C=w-x.mod-y.c[0].msel;S.mod+=C,S.prelim-=C,y.c[0].el=y.c[b].el,y.c[0].msel=y.c[b].msel}function f(y,b,x,w){var S=y.c[b].er;S.tr=x;var C=w-x.mod-y.c[b].mser;S.mod+=C,S.prelim-=C,y.c[b].er=y.c[b-1].er,y.c[b].mser=y.c[b-1].mser}function d(y){y.prelim=(y.c[0].prelim+y.c[0].mod+y.c[y.cs-1].mod+y.c[y.cs-1].prelim+y.c[y.cs-1].w)/2-y.w/2}function h(y,b){b+=y.mod,y.x=y.prelim+b,p(y);for(var x=0;x<y.cs;x++)h(y.c[x],b)}function v(y,b,x,w){if(x!==b-1){var S=b-x;y.c[x+1].shift+=w/S,y.c[b].shift-=w/S,y.c[b].change-=w-w/S}}function p(y){for(var b=0,x=0,w=0;w<y.cs;w++)b+=y.c[w].shift,x+=b+y.c[w].change,y.c[w].mod+=x}function g(y,b,x){for(;x!==null&&y>=x.low;)x=x.nxt;return{low:y,index:b,nxt:x}}f7(r,e);var m=Gy.fromNode(r,e);return n(m),h(m,0),c7(m,r,e),aFe(r,e),r},d7=function(r,t){for(var e=Lk(r.data,t,!0),n=Lk(r.data,t,!0),i=r.children.length,a=Math.round(i/2),o=t.getSide||function(c,f){return f<a?"right":"left"},s=0;s<i;s++){var l=r.children[s],u=o(l,s);u==="right"?n.children.push(l):e.children.push(l)}return e.eachNode(function(c){c.isRoot()||(c.side="left")}),n.eachNode(function(c){c.isRoot()||(c.side="right")}),{left:e,right:n}},Wc=["LR","RL","TB","BT","H","V"],sFe=["LR","RL","H"],lFe=function(t){return sFe.indexOf(t)>-1},uFe=Wc[0],Fk=function(r,t,e){var n=t.direction||uFe;if(t.isHorizontal=lFe(n),n&&Wc.indexOf(n)===-1)throw new TypeError("Invalid direction: "+n);if(n===Wc[0])e(r,t);else if(n===Wc[1])e(r,t),r.right2left();else if(n===Wc[2])e(r,t);else if(n===Wc[3])e(r,t),r.bottom2top();else if(n===Wc[4]||n===Wc[5]){var i=d7(r,t),a=i.left,o=i.right;e(a,t),e(o,t),t.isHorizontal?a.right2left():a.bottom2top(),o.translate(a.x-o.x,a.y-o.y),r.x=a.x,r.y=o.y;var s=r.getBoundingBox();t.isHorizontal?s.top<0&&r.translate(0,-s.top):s.left<0&&r.translate(-s.left,0)}var l=t.fixedRoot;return l===void 0&&(l=!0),l&&r.translate(-(r.x+r.width/2+r.hgap),-(r.y+r.height/2+r.vgap)),r};function cFe(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var fFe=function(r){cFe(t,r);function t(){return r.apply(this,arguments)||this}var e=t.prototype;return e.execute=function(){var i=this;return Fk(i.rootNode,i.options,oFe)},t}(vS),dFe={};function hFe(r,t){return t=Fu.assign({},dFe,t),new fFe(r,t).execute()}var vFe=hFe;function pFe(r,t){t===void 0&&(t=[]);var e=this;e.x=e.y=0,e.leftChild=e.rightChild=null,e.height=0,e.children=t}var gFe={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function h7(r,t,e){e?(t.x=r.x,t.y=r.y):(t.x=r.y,t.y=r.x),r.children.forEach(function(n,i){h7(n,t.children[i],e)})}var mFe=function(r,t){t===void 0&&(t={}),t=Fu.assign({},gFe,t);var e=0;function n(l){if(!l)return null;l.width=0,l.depth&&l.depth>e&&(e=l.depth);var u=l.children,c=u.length,f=new pFe(l.height,[]);return u.forEach(function(d,h){var v=n(d);f.children.push(v),h===0&&(f.leftChild=v),h===c-1&&(f.rightChild=v)}),f.originNode=l,f.isLeaf=l.isLeaf(),f}function i(l){if(l.isLeaf||l.children.length===0)l.drawingDepth=e;else{var u=l.children.map(function(f){return i(f)}),c=Math.min.apply(null,u);l.drawingDepth=c-1}return l.drawingDepth}var a;function o(l){l.x=l.drawingDepth*t.rankSep,l.isLeaf?(l.y=0,a&&(l.y=a.y+a.height+t.nodeSep,l.originNode.parent!==a.originNode.parent&&(l.y+=t.subTreeSep)),a=l):(l.children.forEach(function(u){o(u)}),l.y=(l.leftChild.y+l.rightChild.y)/2)}var s=n(r);return i(s),o(s),h7(s,r,t.isHorizontal),r};function yFe(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var bFe=function(r){yFe(t,r);function t(){return r.apply(this,arguments)||this}var e=t.prototype;return e.execute=function(){var i=this;return i.rootNode.width=0,Fk(i.rootNode,i.options,mFe)},t}(vS),xFe={};function wFe(r,t){return t=Fu.assign({},xFe,t),new bFe(r,t).execute()}var SFe=wFe;function CFe(r,t,e,n){var i=typeof e=="function"?e(r):e*r.depth;if(!n)try{if(r.id===r.parent.children[0].id){r.x+=i,r.y=t?t.y:0;return}}catch{}r.x+=i,r.y=t?t.y+t.height:0}var pS=function(r,t,e){var n=null;r.eachNode(function(i){CFe(i,n,t,e),n=i})};function EFe(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var Uy=["LR","RL","H"],_Fe=Uy[0],TFe=function(r){EFe(t,r);function t(){return r.apply(this,arguments)||this}var e=t.prototype;return e.execute=function(){var i=this,a=i.options,o=i.rootNode;a.isHorizontal=!0;var s=a.indent,l=s===void 0?20:s,u=a.dropCap,c=u===void 0?!0:u,f=a.direction||_Fe;if(f&&Uy.indexOf(f)===-1)throw new TypeError("Invalid direction: "+f);if(f===Uy[0])pS(o,l,c);else if(f===Uy[1])pS(o,l,c),o.right2left();else if(f===Uy[2]){var d=d7(o,a),h=d.left,v=d.right;pS(h,l,c),h.right2left(),pS(v,l,c);var p=h.getBoundingBox();v.translate(p.width,0),o.x=v.x-o.width/2}return o},t}(vS),AFe={};function MFe(r,t){return t=Fu.assign({},AFe,t),new TFe(r,t).execute()}var kFe=MFe;function v7(r,t){var e=0;return r.children.length?r.children.forEach(function(n){e+=v7(n,t)}):e=r.height,r._subTreeSep=t.getSubTreeSep(r.data),r.totalHeight=Math.max(r.height,e)+2*r._subTreeSep,r.totalHeight}function p7(r){var t=r.children,e=t.length;if(e){t.forEach(function(l){p7(l)});var n=t[0],i=t[e-1],a=i.y-n.y+i.height,o=0;if(t.forEach(function(l){o+=l.totalHeight}),a>r.height)r.y=n.y+a/2-r.height/2;else if(t.length!==1||r.height>o){var s=r.y+(r.height-a)/2-n.y;t.forEach(function(l){l.translate(0,s)})}else r.y=(n.y+n.height/2+i.y+i.height/2)/2-r.height/2}}var IFe={getSubTreeSep:function(){return 0}},PFe=function(r,t){t===void 0&&(t={}),t=Fu.assign({},IFe,t),r.parent={x:0,width:0,height:0,y:0},r.BFTraverse(function(e){e.x=e.parent.x+e.parent.width}),r.parent=null,v7(r,t),r.startY=0,r.y=r.totalHeight/2-r.height/2,r.eachNode(function(e){var n=e.children,i=n.length;if(i){var a=n[0];if(a.startY=e.startY+e._subTreeSep,i===1)a.y=e.y+e.height/2-a.height/2;else{a.y=a.startY+a.totalHeight/2-a.height/2;for(var o=1;o<i;o++){var s=n[o];s.startY=n[o-1].startY+n[o-1].totalHeight,s.y=s.startY+s.totalHeight/2-s.height/2}}}}),p7(r)};function DFe(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var RFe=function(r){DFe(t,r);function t(){return r.apply(this,arguments)||this}var e=t.prototype;return e.execute=function(){var i=this;return Fk(i.rootNode,i.options,PFe)},t}(vS),OFe={};function LFe(r,t){return t=Fu.assign({},OFe,t),new RFe(r,t).execute()}var FFe=LFe,NFe={compactBox:vFe,dendrogram:SFe,indented:kFe,mindmap:FFe},gS=NFe,g7=Zs.traverseTree,BFe=function(t,e){var n;return t?Rt(t)?n=function(a){return t}:n=t:n=function(a){return e||1},n},$Fe=function(t,e){var n=[],i=[],a={},o=0;for(o=0;o<t.length;o++){var s=t[o];a[s.id]=o,n.push(s.x),n.push(s.y),n.push(0),n.push(0),i.push([])}for(o=0;o<e.length;o++){var l=e[o];i[a[l.source]].push(a[l.target]),i[a[l.target]].push(a[l.source])}var u=0;for(o=0;o<t.length;o++){var c=n.length,f=i[o],d=f.length;n[o*4+2]=c,n[o*4+3]=f.length,u=Math.max(u,f.length);for(var h=0;h<d;++h){var v=f[h];n.push(+v)}}for(;n.length%4!=0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:u}},zFe=function(t,e,n){var i=[],a=[],o={},s=0;for(s=0;s<t.length;s++){var l=t[s];o[l.id]=s,i.push(l.x),i.push(l.y),i.push(0),i.push(0),a.push([])}for(s=0;s<e.length;s++){var u=e[s];a[o[u.source]].push(o[u.target]),a[o[u.source]].push(n(u)),a[o[u.target]].push(o[u.source]),a[o[u.target]].push(n(u))}var c=0;for(s=0;s<t.length;s++){var f=i.length,d=a[s],h=d.length;i[s*4+2]=f,i[s*4+3]=h/2,c=Math.max(c,h/2);for(var v=0;v<h;++v){var p=d[v];i.push(+p)}}for(;i.length%4!=0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:c}},GFe=function(t,e,n,i){var a=[],o=[],s={},l=0;for(l=0;l<t.length;l++){var u=t[l];s[u.id]=l,a.push(u.x),a.push(u.y),a.push(0),a.push(0),o.push([])}for(l=0;l<e.length;l++){var c=e[l];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(n(c)),o[s[c.source]].push(i(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(n(c)),o[s[c.target]].push(i(c)),o[s[c.target]].push(0)}var f=0;for(l=0;l<t.length;l++){var d=a.length,h=o[l],v=h.length;a[l*4+2]=d+1048576*v/4,a[l*4+3]=0,f=Math.max(f,v/4);for(var p=0;p<v;++p){var g=h[p];a.push(+g)}}for(;a.length%4!=0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:f}},UFe=function(t,e){var n=[],i=t.length,a={};return e.forEach(function(o){t.forEach(function(s,l){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),n.push(a[o[s]]),l===i-1)for(;n.length%4!=0;)n.push(0)})}),{array:new Float32Array(n),count:Object.keys(a).length}},VFe=function(t){for(var e=[],n=t.length,i=t[0].length,a=function(l){t.forEach(function(u,c){if(e.push(u[l]),c===n-1)for(;e.length%4!=0;)e.push(0)})},o=0;o<i;o++)a(o);return new Float32Array(e)},HFe=function(t,e){var n=["V","TB","BT"],i={x:1/0,y:1/0},a={x:-1/0,y:-1/0},o="x",s="y";e&&n.indexOf(e)>=0&&(s="x",o="y");var l=0;g7(t,function(f){return l++,f.x>a.x&&(a.x=f.x),f.x<i.x&&(i.x=f.x),f.y>a.y&&(a.y=f.y),f.y<i.y&&(i.y=f.y),!0});var u=Math.PI*2/l,c=a[s]-i[s];return c===0||g7(t,function(f){var d=(f[s]-i[s])/c*(Math.PI*2-u)+u,h=Math.abs(o==="x"?f.x-t.x:f.y-t.y);return f.x=h*Math.cos(d),f.y=h*Math.sin(d),!0}),t},WFe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",proccessToFunc:BFe,buildTextureData:$Fe,buildTextureDataWithOneEdgeAttr:zFe,buildTextureDataWithTwoEdgeAttr:GFe,attributesToTextureData:UFe,arrayToTextureData:VFe,radialLayout:HFe}),m7=function r(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var t=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl")))}catch{return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),e},addGetWebGLMessage:function(e){e=e||{};var n=e.parent!==void 0?e.parent:document.body,i=e.id!==void 0?e.id:"oldie",a=r().getWebGLErrorMessage();a.id=i,n.appendChild(a)}}},jFe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",gpuDetector:m7}),Nu=A(A(A(A({},Zs),zge),WFe),jFe),YFe=Nu.radialLayout,XFe=function(){function r(t){this.type=t.type,this.radial=t.radial,this.config=t}return r.prototype.init=function(t){var e=this;if(this.data=t,this.radial){this.layoutMethod=function(n){var i=gS[e.type](n,e.config);return YFe(i),i};return}this.layoutMethod=function(n){return gS[e.type](n,e.config)}},r.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},r.prototype.layout=function(t){return this.init(t),this.execute()},r}();So("grid",rz);So("random",nz);So("force",bz);So("circular",xz);So("dagre",HG);So("radial",QG);So("concentric",JG);So("mds",e8);So("fruchterman",t8);So("fruchterman-gpu",n7);So("gForce",iz);So("gForce-gpu",i7);So("comboForce",a7);So("forceAtlas2",o7);var qFe=function(t,e){e.isCustomLayout=!0,dS[t]=So(t,e)},KFe=function(){function r(t,e){var n=t.toString(),i=new Blob(["importScripts('"+e+"');("+n+")()"],{type:"text/javascript"});return new Worker(URL.createObjectURL(i))}return r}(),ZFe=function(t){t===void 0&&(t="https://unpkg.com/@antv/layout@latest/dist/layout.min.js");function e(){var i={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var l=s.data.type;return l===i.RUN||l===i.GPURUN}function o(s){var l=this,u=s.data.type;switch(u){case i.RUN:{var c=s.data,f=c.nodes,d=c.edges,h=c.layoutCfg,v=h===void 0?{}:h,p=v.type,g=layout.getLayoutByName(p);if(!g){this.postMessage({type:i.ERROR,message:"layout "+p+" not found"});break}var m;v.onLayoutEnd=function(){l.postMessage({type:i.END,nodes:f}),m==null||m.destroy()},m=new g(v),m.init({nodes:f,edges:d}),m.execute();break}case i.GPURUN:{var y=s.data,b=y.nodes,d=y.edges,x=y.layoutCfg,v=x===void 0?{}:x,w=y.canvas,p=v.type,g=layout.getLayoutByName(p);if(!g){this.postMessage({type:i.ERROR,message:"layout "+p+" not found"});break}if(p.split("-")[1]!=="gpu"){this.postMessage({type:i.ERROR,message:"layout "+p+" does not support GPU"});break}var S=new g(v);S.init({nodes:b,edges:d}),S.executeWithWorker(w,this);break}}}onmessage=function(l){a(l)&&o(l)}}var n=new KFe(e,t);return n},pp={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function mS(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?mS=function(e){return typeof e}:mS=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mS(r)}var y7=function(t){return setTimeout(t,16)},b7=function(t){return clearTimeout(t)},yS={requestAnimationFrame:function(t){var e=typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||y7;return e(t)},cancelAnimationFrame:function(t){var e=typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||b7;return e(t)}},QFe=["fruchterman","gForce"],JFe=["force","grid","circular"],eNe=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;return n.graph=e,n.layoutCfg=e.get("layout")||{},n.layoutType=n.getLayoutType(),n.worker=null,n.workerData={},n.initLayout(),n}return t.prototype.initLayout=function(){},t.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=ZFe(this.layoutCfg.workerScriptURL),this.worker)},t.prototype.stopWorker=function(){var e=this.workerData;!this.worker||(this.worker.terminate(),this.worker=null,e.requestId&&(yS.cancelAnimationFrame(e.requestId),e.requestId=null),e.requestId2&&(yS.cancelAnimationFrame(e.requestId2),e.requestId2=null))},t.prototype.execLayoutMethod=function(e,n){var i=this;return new Promise(function(a,o){return _l(i,void 0,void 0,function(){var s,l,u,c,f,d,h,v,f,p;return Tl(this,function(g){switch(g.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];l=e.type,e.onLayoutEnd=function(){s.emit("aftersublayout",{type:l}),a()},l&&this.isGPU&&(this.hasGPUVersion(l)?l=l+"-gpu":console.warn("The '"+l+"' layout does not support GPU calculation for now, it will run in CPU.")),u=l==="force"||l==="g6force"||l==="gForce",u?(c=e.onTick,f=function(){c&&c(),s.refreshPositions()},e.tick=f):e.type==="comboForce"&&(e.comboTrees=s.get("comboTrees")),d=!1;try{h=new dS[l](e)}catch{console.warn("The layout method: '"+l+"' does not exist! Please specify it first."),o()}return d=h.enableTick,d&&(v=e.onTick,f=function(){v&&v(),s.refreshPositions()},h.tick=f),p=this.filterLayoutData(this.data,e),nNe(p,n),h.init(p),s.emit("beforesublayout",{type:l}),[4,h.execute()];case 1:return g.sent(),h.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd(),this.layoutMethods[n]=h,[2]}})})})},t.prototype.updateLayoutMethod=function(e,n){var i=this;return new Promise(function(a,o){return _l(i,void 0,void 0,function(){var s,l,u;return Tl(this,function(c){switch(c.label){case 0:return s=this.graph,l=n==null?void 0:n.type,n.onLayoutEnd=function(){s.emit("aftersublayout",{type:l}),a()},u=this.filterLayoutData(this.data,n),e.init(u),e.updateCfg(n),s.emit("beforesublayout",{type:l}),[4,e.execute()];case 1:return c.sent(),e.isCustomLayout&&n.onLayoutEnd&&n.onLayoutEnd(),[2]}})})})},t.prototype.layout=function(e){var n=this,i=this.graph;this.data=this.setDataFromGraph();var a=this.data,o=a.nodes,s=a.hiddenNodes;if(!o)return!1;var l=i.get("width"),u=i.get("height"),c={};Object.assign(c,{width:l,height:u,center:[l/2,u/2]},this.layoutCfg),this.layoutCfg=c,this.destoryLayoutMethods(),i.emit("beforelayout"),this.initPositions(c.center,o),this.initPositions(c.center,s);var f=c.type;f&&f.split("-")[1]==="gpu"&&(f=f.split("-")[0],c.gpuEnabled=!0);var d=!1;c.gpuEnabled&&(d=!0,m7().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),d=!1)),this.isGPU=d;var h=c.onLayoutEnd,v=c.layoutEndFormatted,p=c.adjust;if(v||(c.layoutEndFormatted=!0,c.onAllLayoutEnd=function(){return _l(n,void 0,void 0,function(){return Tl(this,function(m){switch(m.label){case 0:return h&&h(),this.refreshLayout(),p&&c.pipes?[4,this.adjustPipesBox(this.data,p)]:[3,2];case 1:m.sent(),this.refreshLayout(),m.label=2;case 2:return i.emit("afterlayout"),[2]}})})}),this.stopWorker(),c.workerEnabled&&this.layoutWithWorker(this.data))return!0;var g=Promise.resolve();return c.type?g=g.then(function(){return _l(n,void 0,void 0,function(){return Tl(this,function(m){switch(m.label){case 0:return[4,this.execLayoutMethod(c,0)];case 1:return[2,m.sent()]}})})}):c.pipes&&c.pipes.forEach(function(m,y){g=g.then(function(){return _l(n,void 0,void 0,function(){return Tl(this,function(b){switch(b.label){case 0:return[4,this.execLayoutMethod(m,y)];case 1:return[2,b.sent()]}})})})}),g.then(function(){c.onAllLayoutEnd&&c.onAllLayoutEnd(),e&&e()}).catch(function(m){console.warn("graph layout failed,",m)}),!1},t.prototype.layoutWithWorker=function(e){var n=this,i=this,a=i.layoutCfg,o=i.graph,s=this.getWorker(),l=this.workerData;if(!s)return!1;l.requestId=null,l.requestId2=null,l.currentTick=null,l.currentTickData=null,o.emit("beforelayout");var u=Promise.resolve();if(a.type)u=u.then(function(){return n.runWebworker(s,e,a)});else if(a.pipes)for(var c=function(p){u=u.then(function(){return n.runWebworker(s,e,p)})},f=0,d=a.pipes;f<d.length;f++){var h=d[f];c(h)}return u.then(function(){a.onAllLayoutEnd&&a.onAllLayoutEnd()}).catch(function(v){console.error("layout failed",v)}),!0},t.prototype.runWebworker=function(e,n,i){var a=this,o=this.isGPU,s=this.filterLayoutData(n,i),l=s.nodes,u=s.edges,c=document.createElement("canvas"),f=o&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,d=tNe(i,function(v){return typeof v!="function"});if(!f)e.postMessage({type:pp.RUN,nodes:l,edges:u,layoutCfg:d});else{var h=c.transferControlToOffscreen();d.type=d.type+"-gpu",e.postMessage({type:pp.GPURUN,nodes:l,edges:u,layoutCfg:d,canvas:h},[h])}return new Promise(function(v,p){e.onmessage=function(g){a.handleWorkerMessage(v,p,g,s,i)}})},t.prototype.handleWorkerMessage=function(e,n,i,a,o){var s=this,l=s.graph,u=s.workerData,c=i.data,f=c.type,d=function(){o.onTick&&o.onTick()};switch(f){case pp.TICK:u.currentTick=c.currentTick,u.currentTickData=c,u.requestId||(u.requestId=yS.requestAnimationFrame(function(){Nk(a,c),l.refreshPositions(),d(),c.currentTick===c.totalTicks?e():u.currentTick===c.totalTicks&&(u.requestId2=yS.requestAnimationFrame(function(){Nk(a,u.currentTickData),l.refreshPositions(),u.requestId2=null,d(),e()})),u.requestId=null}));break;case pp.END:u.currentTick==null&&(Nk(a,c),e());break;case pp.GPUEND:u.currentTick==null&&(rNe(a,c),e());break;case pp.ERROR:console.warn("Web-Worker layout error!",c.message),n();break;default:n();break}},t.prototype.updateLayoutCfg=function(e){var n=this,i=this,a=i.graph,o=i.layoutMethods,s=$t({},this.layoutCfg,e);if(this.layoutCfg=s,!(o==null?void 0:o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(e.workerEnabled&&this.layoutWithWorker(this.data))){a.emit("beforelayout");var l=Promise.resolve();o.length===1?l=l.then(function(){return _l(n,void 0,void 0,function(){return Tl(this,function(u){switch(u.label){case 0:return[4,this.updateLayoutMethod(o[0],s)];case 1:return[2,u.sent()]}})})}):o==null||o.forEach(function(u,c){var f=s.pipes[c];l=l.then(function(){return _l(n,void 0,void 0,function(){return Tl(this,function(d){switch(d.label){case 0:return[4,this.updateLayoutMethod(u,f)];case 1:return[2,d.sent()]}})})})}),l.then(function(){s.onAllLayoutEnd&&s.onAllLayoutEnd()}).catch(function(u){console.warn("layout failed",u)})}},t.prototype.adjustPipesBox=function(e,n){var i=this;return new Promise(function(a){var o=e.nodes;(o==null?void 0:o.length)||a(),JFe.includes(n)||(console.warn("The adjust type "+n+" is not supported yet, please assign it with 'force', 'grid', or 'circular'."),a());var s={center:i.layoutCfg.center,nodeSize:function(v){return Math.max(v.height,v.width)},preventOverlap:!0,onLayoutEnd:function(){}},l=i.getLayoutBBox(o),u=l.groupNodes,c=l.layoutNodes,f=Mr(c);s.onLayoutEnd=function(){c==null||c.forEach(function(h,v){var p,g,m,y=h.x-((p=f[v])===null||p===void 0?void 0:p.x),b=h.y-((g=f[v])===null||g===void 0?void 0:g.y);(m=u[v])===null||m===void 0||m.forEach(function(x){x.x+=y,x.y+=b})}),a()};var d=new dS[n](s);d.layout({nodes:c})})},t.prototype.hasGPUVersion=function(e){return QFe.includes(e)},t.prototype.destroy=function(){this.destoryLayoutMethods();var e=this.worker;e&&(e.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},t}(Dve);function Nk(r,t){for(var e=r.nodes,n=t.nodes,i=e.length,a=0;a<i;a++){var o=e[a];o.x=n[a].x,o.y=n[a].y}}function tNe(r,t){var e={};return r&&mS(r)==="object"?(Object.keys(r).forEach(function(n){r.hasOwnProperty(n)&&t(r[n])&&(e[n]=r[n])}),e):r}function rNe(r,t){for(var e=r.nodes,n=t.vertexEdgeData,i=e.length,a=0;a<i;a++){var o=e[a],s=n[4*a],l=n[4*a+1];o.x=s,o.y=l}}function nNe(r,t){var e;if(!!((e=r==null?void 0:r.nodes)===null||e===void 0?void 0:e.length)){var n=r.nodes;n.forEach(function(i){i.layoutOrder=t})}}var x7=Un,iNe="svg",w7=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this,i=n.get("defaultNode");return i||n.set("defaultNode",{type:"circle"}),i.type||(i.type="circle",n.set("defaultNode",i)),n.destroyed=!1,n}return t.prototype.initLayoutController=function(){var e=new eNe(this);this.set({layoutController:e})},t.prototype.initEventController=function(){var e=new Kge(this);this.set({eventController:e})},t.prototype.initCanvas=function(){var e=this.get("container");if(typeof e=="string"&&(e=document.getElementById(e),this.set("container",e)),!e)throw new Error("invalid container");var n=e.clientWidth,i=e.clientHeight,a=this.get("width")||n,o=this.get("height")||i;!this.get("width")&&!this.get("height")&&(this.set("width",n),this.set("height",i));var s=this.get("renderer"),l;if(s===iNe)l=new Nv({container:e,width:a,height:o});else{var u={container:e,width:a,height:o},c=this.get("pixelRatio");c&&(u.pixelRatio=c),l=new Eu(u)}this.set("canvas",l)},t.prototype.initPlugins=function(){var e=this;G(e.get("plugins"),function(n){!n.destroyed&&n.initPlugin&&n.initPlugin(e)})},t.prototype.downloadImageWatermark=function(e,n,i,a){return _l(this,void 0,void 0,function(){var o,s,l;return Tl(this,function(u){switch(u.label){case 0:return o=e.style.backgroundImage,s=o.slice(5,o.length-2),l=new Image,l.src=s,[4,new Promise(function(c){l.onload=function(){var f=n.createPattern(l,"repeat");n.rect(0,0,i,a),n.fillStyle=f,n.fill(),c("")}})];case 1:return u.sent(),[2]}})})},t.prototype.asyncToDataUrl=function(e,n,i,a,o,s){var l=this,u=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),f=c.getRenderer(),d=s||c.get("el"),h="";e||(e="image/png"),setTimeout(function(){return _l(l,void 0,void 0,function(){var v,p,g,m,y,b,x,w,S,C;return Tl(this,function(_){switch(_.label){case 0:return f!=="svg"?[3,1]:(v=d.cloneNode(!0),p=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),g=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",p),g.replaceChild(v,g.documentElement),m=new XMLSerializer().serializeToString(g),h="data:image/svg+xml;charset=utf8,"+encodeURIComponent(m),[3,4]);case 1:return y=void 0,b=d.getContext("2d"),x=a||this.get("width"),w=o||this.get("height"),S=void 0,u?[4,this.downloadImageWatermark(u,b,x,w)]:[3,3];case 2:_.sent(),_.label=3;case 3:if(n){C=typeof window!="undefined"?window.devicePixelRatio:1;try{y=b.getImageData(0,0,x*C,w*C),S=b.globalCompositeOperation,b.globalCompositeOperation="destination-over",b.fillStyle=n,b.fillRect(0,0,x,w)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}h=d.toDataURL(e),n&&(b.clearRect(0,0,x,w),b.putImageData(y,0,0),b.globalCompositeOperation=S),_.label=4;case 4:return i&&i(h),[2]}})})},16)},t.prototype.toDataURL=function(e,n){var i=this.get("canvas"),a=i.getRenderer(),o=i.get("el");e||(e="image/png");var s="";if(a==="svg"){var l=o.cloneNode(!0),u=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",u);c.replaceChild(l,c.documentElement);var f=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,"+encodeURIComponent(f)}else{var d=void 0,h=o.getContext("2d"),v=this.get("width"),p=this.get("height"),g=void 0;if(n){var m=typeof window!="undefined"?window.devicePixelRatio:1;try{d=h.getImageData(0,0,v*m,p*m),g=h.globalCompositeOperation,h.globalCompositeOperation="destination-over",h.fillStyle=n,h.fillRect(0,0,v,p)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(e),n&&(h.clearRect(0,0,v,p),h.putImageData(d,0,0),h.globalCompositeOperation=g)}return s},t.prototype.toFullDataURL=function(e,n,i){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,l=this.get("renderer"),u=Vn('<id="virtual-image"></div>'),c=i?i.backgroundColor:void 0,f=i?i.padding:void 0;f?Rt(f)&&(f=[f,f,f,f]):f=[0,0,0,0];var d=o+f[0]+f[2],h=s+f[1]+f[3],v={container:u,height:d,width:h,quickHit:!0},p=l==="svg"?new Nv(v):new Eu(v),g=this.get("group"),m=g.clone(),y=Mr(m.getMatrix());y||(y=[1,0,0,0,1,0,0,0,1]);var b=(a.maxX+a.minX)/2,x=(a.maxY+a.minY)/2;y=x7(y,[["t",-b,-x],["t",s/2+f[3],o/2+f[0]]]),m.resetMatrix(),m.setMatrix(y),p.add(m);var w=p.get("el"),S="";n||(n="image/png"),setTimeout(function(){if(l==="svg"){var C=w.cloneNode(!0),_=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),T=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",_);T.replaceChild(C,T.documentElement);var E=new XMLSerializer().serializeToString(T);S="data:image/svg+xml;charset=utf8,"+encodeURIComponent(E)}else{var M=void 0,k=w.getContext("2d"),P=void 0;if(c){var F=typeof window!="undefined"?window.devicePixelRatio:1;try{M=k.getImageData(0,0,h*F,d*F),P=k.globalCompositeOperation,k.globalCompositeOperation="destination-over",k.fillStyle=c,k.fillRect(0,0,h,d)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}S=w.toDataURL(n),c&&(k.clearRect(0,0,h,d),k.putImageData(M,0,0),k.globalCompositeOperation=P)}e&&e(S)},16)},t.prototype.downloadFullImage=function(e,n,i){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,l=o.width,u=this.get("renderer"),c=Vn('<id="virtual-image"></div>'),f=document.querySelector(".g6-graph-watermarker"),d=i?i.backgroundColor:void 0,h=i?i.padding:void 0;h?Rt(h)&&(h=[h,h,h,h]):h=[0,0,0,0];var v=s+h[0]+h[2],p=l+h[1]+h[3];if(f){var g=this.get("graphWaterMarker").cfg||{},m=g.width,y=g.height;v=Math.ceil(v/y)*y,p=Math.ceil(p/m)*m}var b={container:c,height:v,width:p},x=u==="svg"?new Nv(b):new Eu(b),w=this.get("group"),S=w.clone(),C=Mr(S.getMatrix());C||(C=[1,0,0,0,1,0,0,0,1]);var _=(o.maxX+o.minX)/2,T=(o.maxY+o.minY)/2;C=x7(C,[["t",-_,-T],["t",l/2+h[3],s/2+h[0]]]),S.resetMatrix(),S.setMatrix(C),x.add(S);var E=x.get("el");n||(n="image/png"),this.asyncToDataUrl(n,d,function(M){var k=document.createElement("a"),P=(e||"graph")+(u==="svg"?".svg":"."+n.split("/")[1]);a.dataURLToImage(M,u,k,P);var F=document.createEvent("MouseEvents");F.initEvent("click",!1,!1),k.dispatchEvent(F)},p,v,E)},t.prototype.downloadImage=function(e,n,i){var a=this,o=this;o.isAnimating()&&o.stopAnimate();var s=o.get("canvas"),l=s.getRenderer();n||(n="image/png");var u=(e||"graph")+(l==="svg"?".svg":n.split("/")[1]),c=document.createElement("a");o.asyncToDataUrl(n,i,function(f){a.dataURLToImage(f,l,c,u);var d=document.createEvent("MouseEvents");d.initEvent("click",!1,!1),c.dispatchEvent(d)})},t.prototype.dataURLToImage=function(e,n,i,a){if(!e||e==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window!="undefined")if(window.Blob&&window.URL&&n!=="svg"){var o=e.split(","),s="";if(o&&o.length>0){var l=o[0].match(/:(.*?);/);l&&l.length>=2&&(s=l[1])}for(var u=atob(o[1]),c=u.length,f=new Uint8Array(c);c--;)f[c]=u.charCodeAt(c);var d=new Blob([f],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(d,a):i.addEventListener("click",function(){i.download=a,i.href=window.URL.createObjectURL(d)})}else i.addEventListener("click",function(){i.download=a,i.href=e})},t.prototype.addPlugin=function(e){var n=this;e.destroyed||(n.get("plugins").push(e),e.initPlugin(n))},t.prototype.removePlugin=function(e){var n=this.get("plugins"),i=n.indexOf(e);i>=0&&(e.destroyPlugin(),n.splice(i,1))},t.prototype.setImageWaterMarker=function(e,n){e===void 0&&(e=pd.waterMarkerImage);var i=this.get("container");rt(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),o=Mt({},pd.imageWaterMarkerConfig,n),s=o.width,l=o.height,u=o.compatible,c=o.image;if(!a){var f={container:i,width:s,height:l,capture:!1},d=this.get("pixelRatio");d&&(f.pixelRatio=d),a=new Eu(f),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var h=a.get("context"),v=c.rotate,p=c.x,g=c.y;h.rotate(-v*Math.PI/180);var m=new Image;m.crossOrigin="anonymous",m.src=e,m.onload=function(){if(h.drawImage(m,p,g,c.width,c.height),h.rotate(v*Math.PI/180),u)i.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var y=document.querySelector(".g6-graph-watermarker");y||(y=document.createElement("div"),y.className="g6-graph-watermarker"),y.className="g6-graph-watermarker",a.destroyed||(y.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;",i.appendChild(y))}}},t.prototype.setTextWaterMarker=function(e,n){var i=this.get("container");rt(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),o=Mt({},pd.textWaterMarkerConfig,n),s=o.width,l=o.height,u=o.compatible,c=o.text;if(!a){var f={container:i,width:s,height:l,capture:!1},d=this.get("pixelRatio");d&&(f.pixelRatio=d),a=new Eu(f),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var h=a.get("context"),v=c.rotate,p=c.fill,g=c.fontFamily,m=c.fontSize,y=c.baseline,b=c.x,x=c.y,w=c.lineHeight;h.rotate(-v*Math.PI/180),h.font=m+"px "+g,h.fillStyle=p,h.textBaseline=y;for(var S=e.length-1;S>=0;S--)h.fillText(e[S],b,x+S*w);if(h.rotate(v*Math.PI/180),u)i.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var C=document.querySelector(".g6-graph-watermarker");C||(C=document.createElement("div"),C.className="g6-graph-watermarker"),C.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;",i.appendChild(C)}},t.prototype.destroy=function(){var e,n,i,a;G(this.get("plugins"),function(c){c.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var l=o[s];if(!!l){var u=l.parentElement;!u||u.removeChild(l)}}(e=this.get("eventController"))===null||e===void 0||e.destroy(),(n=this.get("layoutController"))===null||n===void 0||n.destroy(),(i=this.get("graphWaterMarker"))===null||i===void 0||i.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),r.prototype.destroy.call(this)},t}(yve),aNe=Nu.radialLayout,oNe=Nu.traverseTree,sNe=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;return n.layoutAnimating=!1,n.set("removeList",[]),n.set("layoutMethod",n.getLayout()),n}return t.prototype.getLayout=function(){var e=this.get("layout");return e?typeof e=="function"?e:(e.type||(e.type="dendrogram"),e.direction||(e.direction="TB"),e.radial?function(n){var i=gS[e.type](n,e);return aNe(i),i}:function(n){return gS[e.type](n,e)}):null},t.indexOfChild=function(e,n){var i=-1;return G(e,function(a,o){if(n===a.id)return i=o,!1}),i},t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return e.animate=!0,e},t.prototype.innerAddChild=function(e,n,i){var a=this,o=e.data;o&&(o.x=e.x,o.y=e.y,o.depth=e.depth);var s=a.addItem("node",o,!1);if(n){if(s.set("parent",n),i){var l=n.get("originAttrs");if(l)s.set("originAttrs",l);else{var u=n.getModel();s.set("originAttrs",{x:u.x,y:u.y})}}var c=n.get("children");c?c.push(s):n.set("children",[s]),a.addItem("edge",{source:n.get("id"),target:s.get("id"),id:n.get("id")+":"+s.get("id")},!1)}return G(e.children||[],function(f){a.innerAddChild(f,s,i)}),a.emit("afteraddchild",{item:s,parent:n}),s},t.prototype.innerUpdateChild=function(e,n,i){var a=this,o=a.findById(e.id);if(!o){a.innerAddChild(e,n,i);return}G(e.children||[],function(v){a.innerUpdateChild(v,o,i)});var s=o.get("children");if(s){var l=s.length;if(l>0)for(var u=s.length-1;u>=0;u--){var c=s[u].getModel();t.indexOfChild(e.children||[],c.id)===-1&&(a.innerRemoveChild(c.id,{x:e.x,y:e.y},i),s.splice(u,1))}}var f,d;o.get("originAttrs")&&(f=o.get("originAttrs").x,d=o.get("originAttrs").y);var h=o.getModel();i&&o.set("originAttrs",{x:h.x,y:h.y}),o.set("model",e.data),(f!==e.x||d!==e.y)&&o.updatePosition({x:e.x,y:e.y})},t.prototype.innerRemoveChild=function(e,n,i){var a=this,o=a.findById(e);if(!!o)if(G(o.get("children"),function(l){a.innerRemoveChild(l.getModel().id,n,i)}),i){var s=o.getModel();o.set("to",n),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},t.prototype.changeData=function(e){var n=this;this.getNodes().map(function(i){return n.clearItemStates(i)}),this.getEdges().map(function(i){return n.clearItemStates(i)}),e?(n.data(e),n.render()):n.layout(this.get("fitView"))},t.prototype.changeLayout=function(e){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var n=this;n.updateLayout(e)},t.prototype.updateLayout=function(e){var n=this;if(!e){console.warn("layout cannot be null");return}n.set("layout",e),n.set("layoutMethod",n.getLayout()),n.layout()},t.prototype.refreshLayout=function(e){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var n=this;n.layout(e)},t.prototype.layout=function(e){var n=this,i=n.get("data"),a=n.get("layoutMethod"),o=a?a(i,n.get("layout")):i,s=n.get("animate");if(n.emit("beforerefreshlayout",{data:i,layoutData:o}),n.emit("beforelayout"),n.innerUpdateChild(o,void 0,s),e){var l=n.get("viewController");l.fitView()}s?n.layoutAnimate(o):(n.refresh(),n.paint()),n.emit("afterrefreshlayout",{data:i,layoutData:o}),n.emit("afterlayout")},t.prototype.addChild=function(e,n){var i=this;i.emit("beforeaddchild",{model:e,parent:n}),rt(n)||(n=n.get("id"));var a=i.findDataById(n);a&&(a.children||(a.children=[]),a.children.push(e),i.changeData())},t.prototype.updateChildren=function(e,n){var i=this;if(!n||!i.findById(n)){console.warn("Update children failed! There is no node with id '"+n+"'");return}var a=i.findDataById(n);a.children=e,i.changeData()},t.prototype.updateChild=function(e,n){var i=this;if(!n||!i.findById(n)){i.changeData(e);return}var a=i.findDataById(n),o=i.findById(e.id);if(a.children||(a.children=[]),!o)a.children.push(e);else{var s=t.indexOfChild(a.children,e.id);a.children[s]=e}i.changeData()},t.prototype.removeChild=function(e){var n=this,i=n.findById(e);if(!!i){var a=i.get("parent");if(a&&!a.destroyed){var o=n.findDataById(a.get("id")),s=o&&o.children||[],l=i.getModel(),u=t.indexOfChild(s,l.id);s.splice(u,1)}n.changeData()}},t.prototype.findDataById=function(e,n){var i=this;if(n||(n=i.get("data")),e===n.id)return n;var a=null;return G(n.children||[],function(o){if(o.id===e)return a=o,!1;if(a=i.findDataById(e,o),a)return!1}),a},t.prototype.layoutAnimate=function(e,n){var i=this,a=this.get("animateCfg");i.emit("beforeanimate",{data:e}),i.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){oNe(e,function(s){var l=i.findById(s.id);if(l){var u=l.get("originAttrs"),c=l.get("model");if(u||(u={x:c.x,y:c.y},l.set("originAttrs",u)),n){var f=n(l,o,u,e);l.set("model",Object.assign(c,f))}else c.x=u.x+(s.x-u.x)*o,c.y=u.y+(s.y-u.y)*o}return!0}),G(i.get("removeList"),function(s){var l=s.getModel(),u=s.get("originAttrs"),c=s.get("to");l.x=u.x+(c.x-u.x)*o,l.y=u.y+(c.y-u.y)*o}),i.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){G(i.getNodes(),function(s){s.set("originAttrs",null)}),G(i.get("removeList"),function(s){i.removeItem(s)}),i.set("removeList",[]),a.callback&&a.callback(),i.emit("afteranimate",{data:e})},delay:a.delay})},t.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},t.prototype.isLayoutAnimating=function(){return this.layoutAnimating},t.prototype.render=function(){var e=this,n=e.get("data");if(!n||!Kr(n)||!Object.keys(n).length)throw new Error("data must be defined first");e.clear(),e.emit("beforerender"),e.layout(this.get("fitView")),e.emit("afterrender")},t.prototype.save=function(){return this.get("data")},t}(w7),lNe=function(){function r(t){this._cfgs=Mt(this.getDefaultCfgs(),t),this._events={},this.destroyed=!1}return r.prototype.getDefaultCfgs=function(){return{}},r.prototype.initPlugin=function(t){var e=this;e.set("graph",t);var n=e.getEvents(),i={};G(n,function(a,o){var s=yv(e,a);i[o]=s,t.on(o,s)}),this._events=i,this.init()},r.prototype.getEvents=function(){return{}},r.prototype.get=function(t){var e;return(e=this._cfgs)===null||e===void 0?void 0:e[t]},r.prototype.set=function(t,e){this._cfgs[t]=e},r.prototype.destroy=function(){},r.prototype.destroyPlugin=function(){this.destroy();var t=this.get("graph"),e=this._events;G(e,function(n,i){t.off(i,n)}),this._events=null,this._cfgs=null,this.destroyed=!0},r}(),cs=lNe,uNe=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),S7="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",cNe=function(r){uNe(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{img:S7,follow:!0}},t.prototype.init=function(){var e=this.get("graph"),n=e.get("container"),i=e.get("canvas").get("el"),a=this.get("img")||S7,o=Vn(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=Vn(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `+a+`;
        user-select: none
        '></div>`);this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),n.insertBefore(o,i)},t.prototype.positionInit=function(){var e=this.get("graph"),n=e.get("minZoom"),i=e.get("width"),a=e.get("height");Fr(this.get("container"),{width:i+"px",height:a+"px"});var o=i*80/n,s=a*80/n;Fr(this.get("gridContainer"),{width:o+"px",height:s+"px",left:"-"+o/2+"px",top:"-"+s/2+"px"})},t.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},t.prototype.updateGrid=function(e){var n=this.get("gridContainer"),i=e.matrix;i||(i=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix("+i[0]+", "+i[1]+", "+i[3]+", "+i[4]+", "+(a?i[6]:"0")+", "+(a?i[7]:"0")+")";Fr(n,{transform:o})},t.prototype.getContainer=function(){return this.get("container")},t.prototype.destroy=function(){var e=this.get("graph"),n=e.get("container"),i=this.get("container");n.removeChild(i)},t}(cs),fNe=cNe,C7=[],Vy=[],dNe="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function E7(r,t){if(t=t||{},r===void 0)throw new Error(dNe);var e=t.prepend===!0?"prepend":"append",n=t.container!==void 0?t.container:document.querySelector("head"),i=C7.indexOf(n);i===-1&&(i=C7.push(n)-1,Vy[i]={});var a;return Vy[i]!==void 0&&Vy[i][e]!==void 0?a=Vy[i][e]:(a=Vy[i][e]=hNe(),e==="prepend"?n.insertBefore(a,n.childNodes[0]):n.appendChild(a)),r.charCodeAt(0)===65279&&(r=r.substr(1,r.length)),a.styleSheet?a.styleSheet.cssText+=r:a.textContent+=r,a}function hNe(){var r=document.createElement("style");return r.setAttribute("type","text/css"),r}var bS=E7,vNe=E7;bS.insertCss=vNe;var pNe=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();typeof document!="undefined"&&bS(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var gNe=function(r){pNe(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(n){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(n){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},t.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow"}:{contextmenu:"onMenuShow"}},t.prototype.init=function(){var e=this.get("className"),n=Vn("<div class="+(e||"g6-component-contextmenu")+"></div>");Fr(n,{top:"0px",position:"absolute",visibility:"hidden"});var i=this.get("container");i||(i=this.get("graph").get("container")),rt(i)&&(i=document.getElementById(i)),i.appendChild(n),this.set("menu",n)},t.prototype.onMenuShow=function(e){var n=this;e.preventDefault();var i=this.get("itemTypes");if(e.item){if(e.item&&e.item.getType&&i.indexOf(e.item.getType())===-1){n.onMenuHide();return}}else if(i.indexOf("canvas")===-1){n.onMenuHide();return}var a=this.get("shouldBegin");if(!!a(e)){var o=this.get("menu"),s=this.get("getContent"),l=this.get("graph"),u=s(e,l);rt(u)?o.innerHTML=u:o.innerHTML=u.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var f=function(_){c(_.target,e.item,l)};this.set("handleMenuClickWrapper",f),o.addEventListener("click",f)}var d=l.get("width"),h=l.get("height"),v=o.getBoundingClientRect(),p=this.get("offsetX")||0,g=this.get("offsetY")||0,m=l.getContainer().offsetTop,y=l.getContainer().offsetLeft,b=e.canvasX+y+p,x=e.canvasY+m+g;b+v.width>d&&(b=e.canvasX-v.width-p+y),x+v.height>h&&(x=e.canvasY-v.height-g+m),Fr(o,{top:x+"px",left:b+"px",visibility:"visible"});var w=this.get("trigger")==="click",S=function(_){if(w){w=!1;return}n.onMenuHide()};document.body.addEventListener("click",S),this.set("handler",S)}},t.prototype.removeMenuEventListener=function(){var e=this.get("handleMenuClickWrapper"),n=this.get("handler");if(e){var i=this.get("menu");i.removeEventListener("click",e),this.set("handleMenuClickWrapper",null)}n&&document.body.removeEventListener("click",n)},t.prototype.onMenuHide=function(){var e=this.get("menu");e&&Fr(e,{visibility:"hidden"}),this.removeMenuEventListener()},t.prototype.destroy=function(){var e=this.get("menu");if(this.removeMenuEventListener(),e){var n=this.get("container");n||(n=this.get("graph").get("container")),rt(n)&&(n=document.getElementById(n)),n.removeChild(e)}},t}(cs),mNe=gNe,yNe=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Bk=globalThis&&globalThis.__assign||function(){return Bk=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Bk.apply(this,arguments)},_7=Math.max,bNe=Un,xNe="default",wNe="keyShape",SNe="delegate",T7="svg",CNe=function(r){yNe(t,r);function t(e){var n=r.call(this,e)||this;return n.handleUpdateCanvas=lm(function(i){var a=n;a.destroyed||a.updateCanvas()},100,!1),n}return t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},t.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},t.prototype.disableRefresh=function(){this.set("refresh",!1)},t.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},t.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},t.prototype.initViewport=function(){var e=this,n=this._cfgs,i=n.size,a=n.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),l=Vn(`
      <div
        class=`+n.viewportClassName+`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff'
        draggable=true>
      </div>`),u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,c=0,f=0,d=!1,h=0,v=0,p=0,g=0,m=0,y=0;l.addEventListener("dragstart",function(b){var x,w;if(b.dataTransfer){var S=new Image;S.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(w=(x=b.dataTransfer).setDragImage)===null||w===void 0||w.call(x,S,0,0);try{b.dataTransfer.setData("text/html","view-port-minimap")}catch{b.dataTransfer.setData("text","view-port-minimap")}}if(n.refresh=!1,b.target===l){var C=l.style;h=parseInt(C.left,10),v=parseInt(C.top,10),p=parseInt(C.width,10),g=parseInt(C.height,10),!(p>i[0]||g>i[1])&&(y=a.getZoom(),m=e.get("ratio"),d=!0,c=b.clientX,f=b.clientY)}},!1),l.addEventListener(u?"dragover":"drag",function(b){if(!(!d||Je(b.clientX)||Je(b.clientY))){var x=c-b.clientX,w=f-b.clientY;(h-x<0||h-x+p>=i[0])&&(x=0),(v-w<0||v-w+g>=i[1])&&(w=0),h-=x,v-=w,Fr(l,{left:h+"px",top:v+"px"}),a.translate(x*y/m,w*y/m),c=b.clientX,f=b.clientY}},!1),l.addEventListener("dragend",function(){d=!1,n.refresh=!0},!1),this.set("viewport",l),s.appendChild(l)}},t.prototype.updateViewport=function(){if(!this.destroyed){var e=this.get("ratio");this.get("dx"),this.get("dy");var n=this.get("totaldx"),i=this.get("totaldy"),a=this.get("graph"),o=this.get("size"),s=a.get("width"),l=a.get("height"),u=a.getPointByCanvas(0,0),c=a.getPointByCanvas(s,l),f=this.get("viewport");f||this.initViewport();var d=(c.x-u.x)*e,h=(c.y-u.y)*e,v=u.x*e+n,p=u.y*e+i,g=v+d,m=p+h;v<0&&(d+=v,v=0),g>o[0]&&(d=d-(g-o[0])),p<0&&(h+=p,p=0),m>o[1]&&(h=h-(m-o[1])),this.set("ratio",e);var y=v+"px",b=p+"px";Fr(f,{left:y,top:b,width:d+"px",height:h+"px"})}},t.prototype.updateGraphShapes=function(){var e=this._cfgs.graph,n=this.get("canvas"),i=e.get("group");if(!i.destroyed){var a=i.clone();a.resetMatrix(),n.clear(),n.add(a);var o=e.get("renderer");o===T7&&this.updateVisible(a)}},t.prototype.updateVisible=function(e){var n=this;if(!e.isGroup()&&!e.get("visible"))e.hide();else{var i=e.get("children");if(!i||!i.length)return;i.forEach(function(a){a.get("visible")||a.hide(),n.updateVisible(a)})}},t.prototype.updateKeyShapes=function(){var e=this,n=this._cfgs.graph,i=this.get("canvas"),a=i.get("children")[0]||i.addGroup();G(n.getEdges(),function(l){e.updateOneEdgeKeyShape(l,a)}),G(n.getNodes(),function(l){e.updateOneNodeKeyShape(l,a)});var o=n.getCombos();if(o&&o.length){var s=a.find(function(l){return l.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){e.destroyed||(G(o,function(l){e.updateOneComboKeyShape(l,s)}),s==null||s.sort(),s==null||s.toBack(),e.updateCanvas())},250)}this.clearDestroyedShapes()},t.prototype.updateOneComboKeyShape=function(e,n){if(!this.destroyed){var i=this.get("itemMap")||{},a=i[e.get("id")],o=e.getBBox(),s=e.get("keyShape").clone(),l=s.attr(),u={x:o.centerX,y:o.centerY};a?u=Object.assign(l,u):(a=s,n.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(u.x=o.minX,u.y=o.minY),a.attr(u),e.isVisible()?a.show():a.hide(),a.exist=!0;var f=e.getModel().depth;isNaN(f)||a.set("zIndex",f),i[e.get("id")]=a,this.set("itemMap",i)}},t.prototype.updateOneNodeKeyShape=function(e,n){var i=this.get("itemMap")||{},a=i[e.get("id")],o=e.getBBox(),s=e.get("keyShape").clone(),l=s.attr(),u={x:o.centerX,y:o.centerY};a?u=Object.assign(l,u):(a=s,n.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(u.x=o.minX,u.y=o.minY),a.attr(u),e.isVisible()?a.show():a.hide(),a.exist=!0;var f=e.getModel().depth;isNaN(f)||a.set("zIndex",f),i[e.get("id")]=a,this.set("itemMap",i)},t.prototype.updateDelegateShapes=function(){var e=this,n=this._cfgs.graph,i=this.get("canvas"),a=i.get("children")[0]||i.addGroup();G(n.getEdges(),function(l){e.updateOneEdgeKeyShape(l,a)}),G(n.getNodes(),function(l){e.updateOneNodeDelegateShape(l,a)});var o=n.getCombos();if(o&&o.length){var s=a.find(function(l){return l.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){e.destroyed||(G(o,function(l){e.updateOneComboKeyShape(l,s)}),s==null||s.sort(),s==null||s.toBack(),e.updateCanvas())},250)}this.clearDestroyedShapes()},t.prototype.clearDestroyedShapes=function(){var e=this.get("itemMap")||{},n=Object.keys(e);if(!(!n||n.length===0))for(var i=n.length-1;i>=0;i--){var a=e[n[i]],o=a.exist;a.exist=!1,o||(a.remove(),delete e[n[i]])}},t.prototype.updateOneEdgeKeyShape=function(e,n){var i=this.get("itemMap")||{},a=i[e.get("id")];if(a){var o=e.get("keyShape").attr("path");a.attr("path",o)}else a=e.get("keyShape").clone(),n.add(a);e.isVisible()?a.show():a.hide(),a.exist=!0,i[e.get("id")]=a,this.set("itemMap",i)},t.prototype.updateOneNodeDelegateShape=function(e,n){var i=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[e.get("id")],s=e.getBBox();if(o){var l={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(l)}else o=n.addShape("rect",{attrs:Bk({x:s.minX,y:s.minY,width:s.width,height:s.height},i),name:"minimap-node-shape"});e.isVisible()?o.show():o.hide(),o.exist=!0,a[e.get("id")]=o,this.set("itemMap",a)},t.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},t.prototype.initContainer=function(){var e=this,n=e.get("graph"),i=e.get("size"),a=e.get("className"),o=e.get("container"),s=Vn("<div class='"+a+"' style='width: "+i[0]+"px; height: "+i[1]+"px; overflow: hidden'></div>");rt(o)&&(o=document.getElementById(o)),o?o.appendChild(s):n.get("container").appendChild(s),e.set("container",s);var l=Vn('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(l),l.addEventListener("dragenter",function(f){f.preventDefault()}),l.addEventListener("dragover",function(f){f.preventDefault()});var u,c=n.get("renderer");c===T7?u=new Nv({container:l,width:i[0],height:i[1]}):u=new Eu({container:l,width:i[0],height:i[1]}),e.set("canvas",u),e.updateCanvas()},t.prototype.updateCanvas=function(){if(!this.destroyed){var e=this.get("refresh");if(!!e){var n=this.get("graph");if(!n.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var i=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case xNe:this.updateGraphShapes();break;case wNe:this.updateKeyShapes();break;case SNe:this.updateDelegateShapes();break}var l=a.get("children")[0];if(!!l){l.resetMatrix();var u=l.getCanvasBBox(),c=n.get("canvas").getCanvasBBox(),f=n.getZoom()||1,d=c.width/f,h=c.height/f;Number.isFinite(u.width)&&(d=_7(u.width,d),h=_7(u.height,h)),d+=2*s,h+=2*s;var v=Math.min(i[0]/d,i[1]/h),p=[1,0,0,0,1,0,0,0,1],g=0,m=0;Number.isFinite(u.minX)&&(g=-u.minX),Number.isFinite(u.minY)&&(m=-u.minY);var y=(i[0]-(d-2*s)*v)/2,b=(i[1]-(h-2*s)*v)/2;p=bNe(p,[["t",g,m],["s",v,v],["t",y,b]]),l.setMatrix(p),this.set("ratio",v),this.set("totaldx",y+g*v),this.set("totaldy",b+m*v),this.set("dx",y),this.set("dy",b),this.updateViewport()}}}}}},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.getViewport=function(){return this.get("viewport")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.destroy=function(){this.get("canvas").destroy();var e=this.get("container");e.parentNode.removeChild(e)},t}(cs),ENe=CNe,_Ne=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();function Hl(r,t,e){var n=r.x-t.x,i=r.y-t.y;return!e||Math.abs(n)>e||Math.abs(i)>e?Math.sqrt(n*n+i*i):e}function TNe(r,t){return r.x*t.x+r.y*t.y}function A7(r,t){var e=(t.source.y-t.target.y)/(t.source.x-t.target.x),n=(e*e*t.source.x+e*(r.y-t.source.y)+r.x)/(e*e+1),i=e*(n-t.source.x)+t.source.y;return{x:n,y:i}}var ANe=function(r){_Ne(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},t.prototype.init=function(){var e=this.get("graph"),n=this.get("onTick"),i=function(){n&&n(),e.refreshPositions()};this.set("tick",i)},t.prototype.bundling=function(e){var n=this;if(n.set("data",e),!n.isTicking()){var i=e.edges||[],a=e.nodes||[],o={},s=!1;if(a.forEach(function(x){(x.x===null||!x.y===null||x.x===void 0||!x.y===void 0)&&(s=!0),o[x.id]=x}),s)throw new Error("please layout the graph or assign x and y for nodes first");n.set("nodeIdMap",o);var l=n.get("divisions"),u=n.get("divRate"),c=n.divideEdges(l);n.set("edgePoints",c);var f=n.getEdgeBundles();n.set("edgeBundles",f);for(var d=n.get("cycles"),h=n.get("iterations"),v=n.get("iterRate"),p=n.get("lambda"),g=0;g<d;g++){for(var m=function(w){var S=[];i.forEach(function(C,_){if(C.source!==C.target){var T=o[C.source],E=o[C.target];S[_]=n.getEdgeForces({source:T,target:E},_,l,p);for(var M=0;M<l+1;M++)c[_][M].x+=S[_][M].x,c[_][M].y+=S[_][M].y}})},y=0;y<h;y++)m(y);p=p/2,l*=u,h*=v,c=n.divideEdges(l),n.set("edgePoints",c)}i.forEach(function(x,w){x.source!==x.target&&(x.type="polyline",x.controlPoints=c[w].slice(1,c[w].length-1))});var b=n.get("graph");b.refresh()}},t.prototype.updateBundling=function(e){var n=this,i=e.data;if(i&&n.set("data",i),n.get("ticking")&&n.set("ticking",!1),Object.keys(e).forEach(function(o){n.set(o,e[o])}),e.onTick){var a=this.get("graph");n.set("tick",function(){e.onTick(),a.refresh()})}n.bundling(i)},t.prototype.divideEdges=function(e){var n=this,i=n.get("data").edges,a=n.get("nodeIdMap"),o=n.get("edgePoints");return(!o||o===void 0)&&(o=[]),i.forEach(function(s,l){(!o[l]||o[l]===void 0)&&(o[l]=[]);var u=a[s.source],c=a[s.target];if(e===1)o[l].push({x:u.x,y:u.y}),o[l].push({x:.5*(u.x+c.x),y:.5*(u.y+c.y)}),o[l].push({x:c.x,y:c.y});else{var f=0;!o[l]||o[l]===[]?f=Hl({x:u.x,y:u.y},{x:c.x,y:c.y}):f=n.getEdgeLength(o[l]);var d=f/(e+1),h=d,v=[{x:u.x,y:u.y}];o[l].forEach(function(p,g){if(g!==0){for(var m=Hl(p,o[l][g-1]);m>h;){var y=h/m,b={x:o[l][g-1].x,y:o[l][g-1].y};b.x+=y*(p.x-o[l][g-1].x),b.y+=y*(p.y-o[l][g-1].y),v.push(b),m-=h,h=d}h-=m}}),v.push({x:c.x,y:c.y}),o[l]=v}}),o},t.prototype.getEdgeLength=function(e){var n=0;return e.forEach(function(i,a){a!==0&&(n+=Hl(i,e[a-1]))}),n},t.prototype.getEdgeBundles=function(){var e=this,n=e.get("data"),i=n.edges||[],a=e.get("bundleThreshold"),o=e.get("nodeIdMap"),s=e.get("edgeBundles");return s||(s=[]),i.forEach(function(l,u){(!s[u]||s[u]===void 0)&&(s[u]=[])}),i.forEach(function(l,u){var c=o[l.source],f=o[l.target];i.forEach(function(d,h){if(!(h<=u)){var v=o[d.source],p=o[d.target],g=e.getBundleScore({source:c,target:f},{source:v,target:p});g>=a&&(s[u].push(h),s[h].push(u))}})}),s},t.prototype.getBundleScore=function(e,n){var i=this;e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,n.vx=n.target.x-n.source.x,n.vy=n.target.y-n.source.y,e.length=Hl({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y}),n.length=Hl({x:n.source.x,y:n.source.y},{x:n.target.x,y:n.target.y});var a=i.getAngleScore(e,n),o=i.getScaleScore(e,n),s=i.getPositionScore(e,n),l=i.getVisibilityScore(e,n);return a*o*s*l},t.prototype.getAngleScore=function(e,n){var i=TNe({x:e.vx,y:e.vy},{x:n.vx,y:n.vy});return i/(e.length*n.length)},t.prototype.getScaleScore=function(e,n){var i=(e.length+n.length)/2,a=2/(i/Math.min(e.length,n.length)+Math.max(e.length,n.length)/i);return a},t.prototype.getPositionScore=function(e,n){var i=(e.length+n.length)/2,a={x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2},o={x:(n.source.x+n.target.x)/2,y:(n.source.y+n.target.y)/2},s=Hl(a,o);return i/(i+s)},t.prototype.getVisibilityScore=function(e,n){var i=this.getEdgeVisibility(e,n),a=this.getEdgeVisibility(n,e);return i<a?i:a},t.prototype.getEdgeVisibility=function(e,n){var i=A7(n.source,e),a=A7(n.target,e),o={x:(i.x+a.x)/2,y:(i.y+a.y)/2},s={x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2};return Math.max(0,1-2*Hl(o,s)/Hl(i,a))},t.prototype.getEdgeForces=function(e,n,i,a){for(var o=this,s=o.get("edgePoints"),l=o.get("K"),u=l/(Hl(e.source,e.target)*(i+1)),c=[{x:0,y:0}],f=1;f<i;f++){var d={x:0,y:0},h=o.getSpringForce({pre:s[n][f-1],cur:s[n][f],next:s[n][f+1]},u),v=o.getElectrostaticForce(f,n);d.x=a*(h.x+v.x),d.y=a*(h.y+v.y),c.push(d)}return c.push({x:0,y:0}),c},t.prototype.getSpringForce=function(e,n){var i=e.pre.x+e.next.x-2*e.cur.x,a=e.pre.y+e.next.y-2*e.cur.y;return i*=n,a*=n,{x:i,y:a}},t.prototype.getElectrostaticForce=function(e,n){var i=this,a=i.get("eps"),o=i.get("edgeBundles"),s=i.get("edgePoints"),l=o[n],u={x:0,y:0};return l.forEach(function(c){var f={x:s[c][e].x-s[n][e].x,y:s[c][e].y-s[n][e].y};if(Math.abs(f.x)>a||Math.abs(f.y)>a){var d=Hl(s[c][e],s[n][e]),h=1/d;u.x+=f.x*h,u.y+=f.y*h}}),u},t.prototype.isTicking=function(){return this.get("ticking")},t.prototype.getSimulation=function(){return this.get("forceSimulation")},t.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),r.prototype.destroy.call(this)},t}(cs),MNe=ANe,kNe=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$k=globalThis&&globalThis.__assign||function(){return $k=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},$k.apply(this,arguments)},xS=.05,M7={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},INe=function(r){kNe(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:Mr(M7),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},t.prototype.getEvents=function(){var e;switch(this.get("trigger")){case"click":e={click:"magnify"};break;case"drag":e={click:"createDelegate"};break;default:e={mousemove:"magnify"};break}return e},t.prototype.init=function(){var e=this,n=e.get("r");e.set("cachedMagnifiedModels",[]),e.set("cachedOriginPositions",{}),e.set("r2",n*n);var i=e.get("d");e.set("molecularParam",(i+1)*n)},t.prototype.createDelegate=function(e){var n=this,i=this,a=i.get("delegate");(!a||a.destroyed)&&(i.magnify(e),a=i.get("delegate"),a.on("dragstart",function(o){i.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){i.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){i.scaleRByWheel(o)}))},t.prototype.scaleRByWheel=function(e){var n=this;if(!(!e||!e.originalEvent)){e.preventDefault&&e.preventDefault();var i=n.get("graph"),a,o=n.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,l=s||i.getPointByClient(e.clientX,e.clientY);e.originalEvent.wheelDelta<0?a=1-xS:a=1/(1-xS);var u=n.get("maxR"),c=n.get("minR"),f=n.get("r");(f>(u||i.get("height"))&&a>1||f<(c||i.get("height")*.05)&&a<1)&&(a=1),f*=a,n.set("r",f),n.set("r2",f*f);var d=n.get("d");n.set("molecularParam",(d+1)*f),n.set("delegateCenterDiff",void 0),n.magnify(e,l)}},t.prototype.scaleRByDrag=function(e){var n=this;if(!!e){var i=n.get("dragPrePos"),a=n.get("graph"),o,s=a.getPointByClient(e.clientX,e.clientY);e.x-i.x<0?o=1-xS:o=1/(1-xS);var l=n.get("maxR"),u=n.get("minR"),c=n.get("r");(c>(l||a.get("height"))&&o>1||c<(u||a.get("height")*.05)&&o<1)&&(o=1),c*=o,n.set("r",c),n.set("r2",c*c);var f=n.get("d");n.set("molecularParam",(f+1)*c),n.magnify(e,s),n.set("dragPrePos",{x:e.x,y:e.y})}},t.prototype.scaleDByWheel=function(e){var n=this;if(!(!e&&!e.originalEvent)){e.preventDefault&&e.preventDefault();var i=0;e.originalEvent.wheelDelta<0?i=-.1:i=.1;var a=n.get("d"),o=a+i,s=n.get("maxD"),l=n.get("minD");if(o<s&&o>l){n.set("d",o);var u=n.get("r");n.set("molecularParam",(o+1)*u);var c=n.get("delegate"),f=c?{x:c.attr("x"),y:c.attr("y")}:void 0;n.set("delegateCenterDiff",void 0),n.magnify(e,f)}}},t.prototype.scaleDByDrag=function(e){var n=this,i=n.get("dragPrePos"),a=e.x-i.x>0?.1:-.1,o=n.get("d"),s=o+a,l=n.get("maxD"),u=n.get("minD");if(s<l&&s>u){n.set("d",s);var c=n.get("r");n.set("molecularParam",(s+1)*c),n.magnify(e)}n.set("dragPrePos",{x:e.x,y:e.y})},t.prototype.magnify=function(e,n){var i=this;i.restoreCache();var a=i.get("graph"),o=i.get("cachedMagnifiedModels"),s=i.get("cachedOriginPositions"),l=i.get("showLabel"),u=i.get("r"),c=i.get("r2"),f=i.get("d"),d=i.get("molecularParam"),h=a.getNodes(),v=h.length,p=n?{x:n.x,y:n.y}:{x:e.x,y:e.y};i.get("dragging")&&(i.get("trigger")==="mousemove"||i.get("trigger")==="click")&&(p=i.get("cacheCenter"));var g=i.get("delegateCenterDiff");g&&(p.x+=g.x,p.y+=g.y),i.updateDelegate(p,u);for(var m=0;m<v;m++){var y=h[m].getModel(),b=y.x,x=y.y;if(!(isNaN(b)||isNaN(x))){var w=(b-p.x)*(b-p.x)+(x-p.y)*(x-p.y);if(!isNaN(w)&&w<c&&w!==0){var S=Math.sqrt(w),C=d*S/(f*S+u),_=(b-p.x)/S,T=(x-p.y)/S;if(y.x=_*C+p.x,y.y=T*C+p.y,s[y.id]||(s[y.id]={x:b,y:x,texts:[]}),o.push(y),l&&2*S<u)for(var E=h[m],M=E.getContainer(),k=M.getChildren(),P=k.length,F=0;F<P;F++){var $=k[F];$.get("type")==="text"&&(s[y.id].texts.push({visible:$.get("visible"),shape:$}),$.set("visible",!0))}}}}a.refreshPositions()},t.prototype.restoreCache=function(){for(var e=this,n=e.get("cachedMagnifiedModels"),i=e.get("cachedOriginPositions"),a=n.length,o=0;o<a;o++){var s=n[o],l=s.id,u=i[l];s.x=u.x,s.y=u.y;for(var c=u.texts.length,f=0;f<c;f++){var d=u.texts[f];d.shape.set("visible",d.visible)}}e.set("cachedMagnifiedModels",[]),e.set("cachedOriginPositions",{})},t.prototype.updateParams=function(e){var n=this,i=e.r,a=e.d,o=e.trigger,s=e.minD,l=e.maxD,u=e.minR,c=e.maxR,f=e.scaleDBy,d=e.scaleRBy;isNaN(e.r)||(n.set("r",i),n.set("r2",i*i)),isNaN(a)||n.set("d",a),isNaN(l)||n.set("maxD",l),isNaN(s)||n.set("minD",s),isNaN(c)||n.set("maxR",c),isNaN(u)||n.set("minR",u);var h=n.get("d"),v=n.get("r");if(n.set("molecularParam",(h+1)*v),(o==="mousemove"||o==="click"||o==="drag")&&n.set("trigger",o),f==="drag"||f==="wheel"||f==="unset"){n.set("scaleDBy",f),n.get("delegate").remove(),n.get("delegate").destroy();var p=n.get("dPercentText");p&&(p.remove(),p.destroy())}if(d==="drag"||d==="wheel"||d==="unset"){n.set("scaleRBy",d),n.get("delegate").remove(),n.get("delegate").destroy();var p=n.get("dPercentText");p&&(p.remove(),p.destroy())}},t.prototype.updateDelegate=function(e,n){var i=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var l=o.get("group"),u=a.get("delegateStyle")||M7;s=l.addShape("circle",{attrs:$k({r:n/1.5,x:e.x,y:e.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(v){a.scaleRByWheel(v)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(v){a.set("dragging",!0),a.set("cacheCenter",{x:v.x,y:v.y}),a.set("dragPrePos",{x:v.x,y:v.y})}),s.on("drag",function(v){a.scaleRByDrag(v)}),s.on("dragend",function(v){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(v){i.scaleDByWheel(v)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(v){a.set("dragging",!0),a.set("cacheCenter",{x:v.x,y:v.y}),a.set("dragPrePos",{x:v.x,y:v.y})}),s.on("drag",function(v){i.scaleDByDrag(v)}),s.on("dragend",function(v){a.set("dragging",!1)})))}else s.attr({x:e.x,y:e.y,r:n/1.5});if(a.get("showDPercent")){var c=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),f=a.get("dPercentText"),d=e.y+n/1.5+16;if(!f||f.destroyed){var h=o.get("group");f=h.addShape("text",{attrs:{text:c+"%",x:e.x,y:d,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",f)}else f.attr({text:c+"%",x:e.x,y:d})}a.set("delegate",s)},t.prototype.clear=function(){var e=this.get("graph");this.restoreCache(),e.refreshPositions();var n=this.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy());var i=this.get("dPercentText");i&&!i.destroyed&&(i.remove(),i.destroy())},t.prototype.destroy=function(){this.clear()},t}(cs),PNe=INe,DNe=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),k7=.05;typeof document!="undefined"&&bS(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var RNe=function(t){if(!t)return[];if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;){if(e.push(n),n.tagName==="HTML")return e.push(document,window),e;n=n.parentElement}return e},ONe=function(r){DNe(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(n){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},t.prototype.init=function(){var e=this,n=this.get("graph"),i=this.get("getContent"),a=i(n),o=a;rt(a)&&(o=Vn(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var l=this.get("container");l||(l=this.get("graph").get("container")),rt(l)&&(l=document.getElementById(l)),l.appendChild(o),this.set("toolBar",o);var u=this.get("handleClick");o.addEventListener("click",function(f){var d=RNe(f).filter(function(v){return v.nodeName==="LI"});if(d.length!==0){var h=d[0].getAttribute("code");!h||(u?u(h,n):e.handleDefaultOperator(h,n))}});var c=this.get("position");c&&Fr(o,{top:c.y+"px",left:c.x+"px"}),this.bindUndoRedo()},t.prototype.bindUndoRedo=function(){var e=this.get("graph"),n=document.querySelector('.g6-component-toolbar li[code="undo"]'),i=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!n||!i||!a||!o||e.on("stackchange",function(s){var l=s.undoStack,u=s.redoStack,c=l.length,f=u.length;c===1?(n.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(n.removeAttribute("style"),i.removeAttribute("style")),f===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))})},t.prototype.undo=function(){var e=this.get("graph"),n=e.getUndoStack();if(!(!n||n.length===1)){var i=n.pop();if(i){var a=i.action;e.pushStack(a,Mr(i.data),"redo");var o=i.data.before;if(a==="add"&&(o=i.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var c=e.findById(u.id);u.visible?e.showItem(c,!1):e.hideItem(c,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){e.updateItem(u.id,u,!1)})});break;case"changedata":e.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var c=u.itemType;delete u.itemType,e.addItem(c,u,!1)})});break}case"add":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){e.removeItem(u.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){e.updateComboTree(u.id,u.parentId,!1)})});break}}}},t.prototype.redo=function(){var e=this.get("graph"),n=e.getRedoStack();if(!(!n||n.length===0)){var i=n.pop();if(i){var a=i.action,o=i.data.after;if(e.pushStack(a,Mr(i.data)),a==="delete"&&(o=i.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var c=e.findById(u.id);u.visible?e.showItem(c,!1):e.hideItem(c,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){e.updateItem(u.id,u,!1)})});break;case"changedata":e.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(s){e.removeItem(s.id,!1)}),o.nodes&&o.nodes.forEach(function(s){e.removeItem(s.id,!1)}),o.combos&&o.combos.forEach(function(s){e.removeItem(s.id,!1)});break;case"add":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var c=u.itemType;delete u.itemType,e.addItem(c,u,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){e.updateComboTree(u.id,u.parentId,!1)})});break}}}},t.prototype.handleDefaultOperator=function(e,n){var i=n.getZoom();switch(e){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":{var a=1/(1-k7*this.get("zoomSensitivity")),o=this.get("maxZoom")||n.get("maxZoom");if(a*i>o)return;n.zoomTo(i*a);break}case"zoomIn":{var s=1-k7*this.get("zoomSensitivity"),l=this.get("minZoom")||n.get("minZoom");if(s*i<l)return;n.zoomTo(i*s);break}case"realZoom":n.zoomTo(1);break;case"autoZoom":n.fitView([20,20]);break}},t.prototype.destroy=function(){var e=this.get("toolBar");if(e){var n=this.get("container");n||(n=this.get("graph").get("container")),rt(n)&&(n=document.getElementById(n)),n.removeChild(e)}var i=this.get("handleClick");i&&e.removeEventListener("click",i)},t}(cs),LNe=ONe,FNe=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();typeof document!="undefined"&&bS(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var NNe=function(r){FNe(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(n){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`+n.item.getType()+`</h4>
          <span class='tooltip-id'>ID\uFF1A`+n.item.getID()+`</span>
        `},shouldBegin:function(n){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},t.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},t.prototype.init=function(){var e=this,n=e.get("className")||"g6-component-tooltip",i=Vn("<div class="+n+"></div>"),a=e.get("container");a||(a=e.get("graph").get("container")),rt(a)&&(a=document.getElementById(a)),Fr(i,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(i),e.get("trigger")!=="click"&&(i.addEventListener("mouseenter",function(o){Fr(i,{visibility:"visible",display:"unset"})}),i.addEventListener("mouseleave",function(o){e.hideTooltip()})),e.set("tooltip",i)},t.prototype.onClick=function(e){var n=this.get("itemTypes");if(!(e.item&&e.item.getType&&n.indexOf(e.item.getType())===-1)){var i=e.item,a=this.get("graph");this.currentTarget===i?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:e.item,action:"hide"})):(this.currentTarget=i,this.showTooltip(e),a.emit("tooltipchange",{item:e.item,action:"show"}))}},t.prototype.onMouseEnter=function(e){var n=this.get("itemTypes");if(!(e.item&&e.item.getType&&n.indexOf(e.item.getType())===-1)){var i=e.item,a=this.get("graph");this.currentTarget=i,this.showTooltip(e),a.emit("tooltipchange",{item:e.item,action:"show"})}},t.prototype.onMouseMove=function(e){var n=this.get("itemTypes");e.item&&e.item.getType&&n.indexOf(e.item.getType())===-1||!this.currentTarget||e.item!==this.currentTarget||this.showTooltip(e)},t.prototype.onMouseLeave=function(){this.hideTooltip();var e=this.get("graph");e.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},t.prototype.showTooltip=function(e){if(!!e.item){var n=this.get("itemTypes");if(!(e.item.getType&&n.indexOf(e.item.getType())===-1)){var i=this.get("tooltip"),a=this.get("getContent"),o=a(e);rt(o)?i.innerHTML=o:i.innerHTML=o.outerHTML,this.updatePosition(e)}}},t.prototype.hideTooltip=function(){var e=this.get("tooltip");e&&Fr(e,{visibility:"hidden",display:"none"})},t.prototype.updatePosition=function(e){var n=this.get("shouldBegin"),i=this.get("tooltip");if(!n(e)){Fr(i,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),l=this.get("offsetX")||0,u=this.get("offsetY")||0,c=a.getPointByClient(e.clientX,e.clientY),f=this.get("fixToNode"),d=e.item;if(d.getType&&d.getType()==="node"&&f&&qe(f)&&f.length>=2){var h=d.getBBox();c={x:h.minX+h.width*f[0],y:h.minY+h.height*f[1]}}var v=a.getCanvasByPoint(c.x,c.y),p=v.x,g=v.y,m=a.getContainer(),y={x:p+m.offsetLeft+l,y:g+m.offsetTop+u};Fr(i,{visibility:"visible",display:"unset"});var b=i.getBoundingClientRect();p+b.width+l>o&&(y.x-=b.width+l),g+b.height+u>s&&(y.y-=b.height+u),Fr(i,{left:y.x+"px",top:y.y+"px"})},t.prototype.hide=function(){this.onMouseLeave()},t.prototype.destroy=function(){var e=this.get("tooltip");if(e){var n=this.get("container");n||(n=this.get("graph").get("container")),rt(n)&&(n=document.getElementById(n)),n.removeChild(e)}},t}(cs),BNe=NNe,I7={};function $Ne(r){return I7[r]}function Wl(r,t){I7[r]=t}var zk=function(){function r(t){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=t,this.initCfg(),this.init()}return r.prototype.translate=function(t){return t},r.prototype.change=function(t){$t(this.__cfg__,t),this.init()},r.prototype.clone=function(){return this.constructor(this.__cfg__)},r.prototype.getTicks=function(){var t=this;return Gn(this.ticks,function(e,n){return Kr(e)?e:{text:t.getText(e,n),tickValue:e,value:t.scale(e)}})},r.prototype.getText=function(t,e){var n=this.formatter,i=n?n(t,e):t;return Je(i)||!Vt(i.toString)?"":i.toString()},r.prototype.getConfig=function(t){return this.__cfg__[t]},r.prototype.init=function(){$t(this,this.__cfg__),this.setDomain(),oo(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},r.prototype.initCfg=function(){},r.prototype.setDomain=function(){},r.prototype.calculateTicks=function(){var t=this.tickMethod,e=[];if(rt(t)){var n=$Ne(t);if(!n)throw new Error("There is no method to to calculate ticks!");e=n(this)}else Vt(t)&&(e=t(this));return e},r.prototype.rangeMin=function(){return this.range[0]},r.prototype.rangeMax=function(){return this.range[1]},r.prototype.calcPercent=function(t,e,n){return Rt(t)?(t-e)/(n-e):NaN},r.prototype.calcValue=function(t,e,n){return e+t*(n-e)},r}(),gp=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="cat",e.isCategory=!0,e}return t.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var e=0;e<this.values.length;e++)this.translateIndexMap.set(this.values[e],e)}},t.prototype.translate=function(e){this.buildIndexMap();var n=this.translateIndexMap.get(e);return n===void 0&&(n=Rt(e)?e:NaN),n},t.prototype.scale=function(e){var n=this.translate(e),i=this.calcPercent(n,this.min,this.max);return this.calcValue(i,this.rangeMin(),this.rangeMax())},t.prototype.invert=function(e){var n=this.max-this.min,i=this.calcPercent(e,this.rangeMin(),this.rangeMax()),a=Math.round(n*i)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},t.prototype.getText=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=e;return Rt(e)&&!this.values.includes(e)&&(a=this.values[a]),r.prototype.getText.apply(this,Jn([a],n,!1))},t.prototype.initCfg=function(){this.tickMethod="cat"},t.prototype.setDomain=function(){if(Je(this.getConfig("min"))&&(this.min=0),Je(this.getConfig("max"))){var e=this.values.length;this.max=e>1?e-1:e}this.translateIndexMap&&(this.translateIndexMap=void 0)},t}(zk),P7=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,jc="[1-9]\\d?",Yc="\\d\\d",zNe="\\d{3}",GNe="\\d{4}",Hy="[^\\s]+",D7=/\[([^]*?)\]/gm;function R7(r,t){for(var e=[],n=0,i=r.length;n<i;n++)e.push(r[n].substr(0,t));return e}var O7=function(r){return function(t,e){var n=e[r].map(function(a){return a.toLowerCase()}),i=n.indexOf(t.toLowerCase());return i>-1?i:null}};function Xc(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var n=0,i=t;n<i.length;n++){var a=i[n];for(var o in a)r[o]=a[o]}return r}var L7=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],F7=["January","February","March","April","May","June","July","August","September","October","November","December"],UNe=R7(F7,3),VNe=R7(L7,3),Gk={dayNamesShort:VNe,dayNames:L7,monthNamesShort:UNe,monthNames:F7,amPm:["am","pm"],DoFn:function(r){return r+["th","st","nd","rd"][r%10>3?0:(r-r%10!=10?1:0)*r%10]}},wS=Xc({},Gk),N7=function(r){return wS=Xc(wS,r)},B7=function(r){return r.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Bo=function(r,t){for(t===void 0&&(t=2),r=String(r);r.length<t;)r="0"+r;return r},HNe={D:function(r){return String(r.getDate())},DD:function(r){return Bo(r.getDate())},Do:function(r,t){return t.DoFn(r.getDate())},d:function(r){return String(r.getDay())},dd:function(r){return Bo(r.getDay())},ddd:function(r,t){return t.dayNamesShort[r.getDay()]},dddd:function(r,t){return t.dayNames[r.getDay()]},M:function(r){return String(r.getMonth()+1)},MM:function(r){return Bo(r.getMonth()+1)},MMM:function(r,t){return t.monthNamesShort[r.getMonth()]},MMMM:function(r,t){return t.monthNames[r.getMonth()]},YY:function(r){return Bo(String(r.getFullYear()),4).substr(2)},YYYY:function(r){return Bo(r.getFullYear(),4)},h:function(r){return String(r.getHours()%12||12)},hh:function(r){return Bo(r.getHours()%12||12)},H:function(r){return String(r.getHours())},HH:function(r){return Bo(r.getHours())},m:function(r){return String(r.getMinutes())},mm:function(r){return Bo(r.getMinutes())},s:function(r){return String(r.getSeconds())},ss:function(r){return Bo(r.getSeconds())},S:function(r){return String(Math.round(r.getMilliseconds()/100))},SS:function(r){return Bo(Math.round(r.getMilliseconds()/10),2)},SSS:function(r){return Bo(r.getMilliseconds(),3)},a:function(r,t){return r.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(r,t){return r.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(r){var t=r.getTimezoneOffset();return(t>0?"-":"+")+Bo(Math.floor(Math.abs(t)/60)*100+Math.abs(t)%60,4)},Z:function(r){var t=r.getTimezoneOffset();return(t>0?"-":"+")+Bo(Math.floor(Math.abs(t)/60),2)+":"+Bo(Math.abs(t)%60,2)}},$7=function(r){return+r-1},z7=[null,jc],G7=[null,Hy],U7=["isPm",Hy,function(r,t){var e=r.toLowerCase();return e===t.amPm[0]?0:e===t.amPm[1]?1:null}],V7=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(r){var t=(r+"").match(/([+-]|\d\d)/gi);if(t){var e=+t[1]*60+parseInt(t[2],10);return t[0]==="+"?e:-e}return 0}],WNe={D:["day",jc],DD:["day",Yc],Do:["day",jc+Hy,function(r){return parseInt(r,10)}],M:["month",jc,$7],MM:["month",Yc,$7],YY:["year",Yc,function(r){var t=new Date,e=+(""+t.getFullYear()).substr(0,2);return+(""+(+r>68?e-1:e)+r)}],h:["hour",jc,void 0,"isPm"],hh:["hour",Yc,void 0,"isPm"],H:["hour",jc],HH:["hour",Yc],m:["minute",jc],mm:["minute",Yc],s:["second",jc],ss:["second",Yc],YYYY:["year",GNe],S:["millisecond","\\d",function(r){return+r*100}],SS:["millisecond",Yc,function(r){return+r*10}],SSS:["millisecond",zNe],d:z7,dd:z7,ddd:G7,dddd:G7,MMM:["month",Hy,O7("monthNamesShort")],MMMM:["month",Hy,O7("monthNames")],a:U7,A:U7,ZZ:V7,Z:V7},SS={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},H7=function(r){return Xc(SS,r)},W7=function(r,t,e){if(t===void 0&&(t=SS.default),e===void 0&&(e={}),typeof r=="number"&&(r=new Date(r)),Object.prototype.toString.call(r)!=="[object Date]"||isNaN(r.getTime()))throw new Error("Invalid Date pass to format");t=SS[t]||t;var n=[];t=t.replace(D7,function(a,o){return n.push(o),"@@@"});var i=Xc(Xc({},wS),e);return t=t.replace(P7,function(a){return HNe[a](r,i)}),t.replace(/@@@/g,function(){return n.shift()})};function j7(r,t,e){if(e===void 0&&(e={}),typeof t!="string")throw new Error("Invalid format in fecha parse");if(t=SS[t]||t,r.length>1e3)return null;var n=new Date,i={year:n.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=t.replace(D7,function(x,w){return o.push(B7(w)),"@@@"}),l={},u={};s=B7(s).replace(P7,function(x){var w=WNe[x],S=w[0],C=w[1],_=w[3];if(l[S])throw new Error("Invalid format. "+S+" specified twice in format");return l[S]=!0,_&&(u[_]=!0),a.push(w),"("+C+")"}),Object.keys(u).forEach(function(x){if(!l[x])throw new Error("Invalid format. "+x+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=r.match(new RegExp(s,"i"));if(!c)return null;for(var f=Xc(Xc({},wS),e),d=1;d<c.length;d++){var h=a[d-1],v=h[0],p=h[2],g=p?p(c[d],f):+c[d];if(g==null)return null;i[v]=g}i.isPm===1&&i.hour!=null&&+i.hour!=12?i.hour=+i.hour+12:i.isPm===0&&+i.hour==12&&(i.hour=0);for(var m=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond),y=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],d=0,b=y.length;d<b;d++)if(l[y[d][0]]&&i[y[d][0]]!==m[y[d][1]]())return null;return i.timezoneOffset==null?m:new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond))}var Y7={format:W7,parse:j7,defaultI18n:Gk,setGlobalDateI18n:N7,setGlobalDateMasks:H7},jNe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Y7,assign:Xc,format:W7,parse:j7,defaultI18n:Gk,setGlobalDateI18n:N7,setGlobalDateMasks:H7});function YNe(r){return function(t,e,n,i){for(var a=Je(n)?0:n,o=Je(i)?t.length:i;a<o;){var s=a+o>>>1;r(t[s])>e?o=s:a=s+1}return a}}var X7="format";function q7(r,t){var e=jNe[X7]||Y7[X7];return e(r,t)}function CS(r){return rt(r)&&(r.indexOf("T")>0?r=new Date(r).getTime():r=new Date(r.replace(/-/gi,"/")).getTime()),tT(r)&&(r=r.getTime()),r}var sl=1e3,$d=60*sl,zd=60*$d,Bu=24*zd,Wy=Bu*31,K7=Bu*365,jy=[["HH:mm:ss",sl],["HH:mm:ss",sl*10],["HH:mm:ss",sl*30],["HH:mm",$d],["HH:mm",$d*10],["HH:mm",$d*30],["HH",zd],["HH",zd*6],["HH",zd*12],["YYYY-MM-DD",Bu],["YYYY-MM-DD",Bu*4],["YYYY-WW",Bu*7],["YYYY-MM",Wy],["YYYY-MM",Wy*4],["YYYY-MM",Wy*6],["YYYY",Bu*380]];function XNe(r,t,e){var n=(t-r)/e,i=YNe(function(o){return o[1]})(jy,n)-1,a=jy[i];return i<0?a=jy[0]:i>=jy.length&&(a=Yi(jy)),a}var qNe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="timeCat",e}return t.prototype.translate=function(e){e=CS(e);var n=this.values.indexOf(e);return n===-1&&(Rt(e)&&e<this.values.length?n=e:n=NaN),n},t.prototype.getText=function(e,n){var i=this.translate(e);if(i>-1){var a=this.values[i],o=this.formatter;return a=o?o(a,n):q7(a,this.mask),a}return e},t.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},t.prototype.setDomain=function(){var e=this.values;G(e,function(n,i){e[i]=CS(n)}),e.sort(function(n,i){return n-i}),r.prototype.setDomain.call(this)},t}(gp),ES=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.isContinuous=!0,e}return t.prototype.scale=function(e){if(Je(e))return NaN;var n=this.rangeMin(),i=this.rangeMax(),a=this.max,o=this.min;if(a===o)return n;var s=this.getScalePercent(e);return n+s*(i-n)},t.prototype.init=function(){r.prototype.init.call(this);var e=this.ticks,n=xo(e),i=Yi(e);n<this.min&&(this.min=n),i>this.max&&(this.max=i),Je(this.minLimit)||(this.min=n),Je(this.maxLimit)||(this.max=i)},t.prototype.setDomain=function(){var e=Z_(this.values),n=e.min,i=e.max;Je(this.min)&&(this.min=n),Je(this.max)&&(this.max=i),this.min>this.max&&(this.min=n,this.max=i)},t.prototype.calculateTicks=function(){var e=this,n=r.prototype.calculateTicks.call(this);return this.nice||(n=va(n,function(i){return i>=e.min&&i<=e.max})),n},t.prototype.getScalePercent=function(e){var n=this.max,i=this.min;return(e-i)/(n-i)},t.prototype.getInvertPercent=function(e){return(e-this.rangeMin())/(this.rangeMax()-this.rangeMin())},t}(zk),Gd=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}return t.prototype.invert=function(e){var n=this.getInvertPercent(e);return this.min+n*(this.max-this.min)},t.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},t}(ES);function qc(r,t){var e=Math.E,n;return t>=0?n=Math.pow(e,Math.log(t)/r):n=Math.pow(e,Math.log(-t)/r)*-1,n}function Ns(r,t){return r===1?1:Math.log(t)/Math.log(r)}function Z7(r,t,e){Je(e)&&(e=Math.max.apply(null,r));var n=e;return G(r,function(i){i>0&&i<n&&(n=i)}),n===e&&(n=e/t),n>1&&(n=1),n}var KNe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="log",e}return t.prototype.invert=function(e){var n=this.base,i=Ns(n,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,l=this.positiveMin;if(l){if(e===0)return 0;s=Ns(n,l/n);var u=1/(i-s)*o;if(e<u)return e/u*l}else s=Ns(n,this.min);var c=(e-a)/o,f=c*(i-s)+s;return Math.pow(n,f)},t.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},t.prototype.setDomain=function(){r.prototype.setDomain.call(this);var e=this.min;if(e<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");e===0&&(this.positiveMin=Z7(this.values,this.base,this.max))},t.prototype.getScalePercent=function(e){var n=this.max,i=this.min;if(n===i||e<=0)return 0;var a=this.base,o=this.positiveMin;o&&(i=o*1/a);var s;return e<o?s=e/o/(Ns(a,n)-Ns(a,i)):s=(Ns(a,e)-Ns(a,i))/(Ns(a,n)-Ns(a,i)),s},t}(ES),ZNe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="pow",e}return t.prototype.invert=function(e){var n=this.getInvertPercent(e),i=this.exponent,a=qc(i,this.max),o=qc(i,this.min),s=n*(a-o)+o,l=s>=0?1:-1;return Math.pow(s,i)*l},t.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},t.prototype.getScalePercent=function(e){var n=this.max,i=this.min;if(n===i)return 0;var a=this.exponent,o=(qc(a,e)-qc(a,i))/(qc(a,n)-qc(a,i));return o},t}(ES),QNe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="time",e}return t.prototype.getText=function(e,n){var i=this.translate(e),a=this.formatter;return a?a(i,n):q7(i,this.mask)},t.prototype.scale=function(e){var n=e;return(rt(n)||tT(n))&&(n=this.translate(n)),r.prototype.scale.call(this,n)},t.prototype.translate=function(e){return CS(e)},t.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},t.prototype.setDomain=function(){var e=this.values,n=this.getConfig("min"),i=this.getConfig("max");if((!Je(n)||!Rt(n))&&(this.min=this.translate(this.min)),(!Je(i)||!Rt(i))&&(this.max=this.translate(this.max)),e&&e.length){var a=[],o=1/0,s=o,l=0;G(e,function(u){var c=CS(u);if(isNaN(c))throw new TypeError("Invalid Time: "+u+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),l<c&&(l=c),a.push(c)}),e.length>1&&(this.minTickInterval=s-o),Je(n)&&(this.min=o),Je(i)&&(this.max=l)}},t}(Gd),Q7=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="quantize",e}return t.prototype.invert=function(e){var n=this.ticks,i=n.length,a=this.getInvertPercent(e),o=Math.floor(a*(i-1));if(o>=i-1)return Yi(n);if(o<0)return xo(n);var s=n[o],l=n[o+1],u=o/(i-1),c=(o+1)/(i-1);return s+(a-u)/(c-u)*(l-s)},t.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},t.prototype.calculateTicks=function(){var e=r.prototype.calculateTicks.call(this);return this.nice||(Yi(e)!==this.max&&e.push(this.max),xo(e)!==this.min&&e.unshift(this.min)),e},t.prototype.getScalePercent=function(e){var n=this.ticks;if(e<xo(n))return 0;if(e>Yi(n))return 1;var i=0;return G(n,function(a,o){if(e>=a)i=o;else return!1}),i/(n.length-1)},t}(ES),JNe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="quantile",e}return t.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},t}(Q7),J7={};function Uk(r){return J7[r]}function jl(r,t){if(Uk(r))throw new Error("type '"+r+"' existed.");J7[r]=t}var e3e=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}return t.prototype.calculateTicks=function(){return this.values},t.prototype.scale=function(e){return this.values[0]!==e&&Rt(e)?e:this.range[0]},t.prototype.invert=function(e){var n=this.range;return e<n[0]||e>n[1]?NaN:this.values[0]},t}(zk);function mp(r){return Math.abs(r)<1e-15?r:parseFloat(r.toFixed(15))}var t3e=[1,5,2,2.5,4,3],ej=Number.EPSILON*100;function r3e(r,t){return(r%t+t)%t}function n3e(r){return Math.round(r*1e12)/1e12}function i3e(r,t,e,n,i,a){var o=aa(t),s=iT(t,r),l=0,u=r3e(n,a);return(u<ej||a-u<ej)&&n<=0&&i>=0&&(l=1),1-s/(o-1)-e+l}function a3e(r,t,e){var n=aa(t),i=iT(t,r),a=1;return 1-i/(n-1)-e+a}function o3e(r,t,e,n,i,a){var o=(r-1)/(a-i),s=(t-1)/(Math.max(a,n)-Math.min(e,i));return 2-Math.max(o/s,s/o)}function s3e(r,t){return r>=t?2-(r-1)/(t-1):1}function l3e(r,t,e,n){var i=t-r;return 1-.5*(Math.pow(t-n,2)+Math.pow(r-e,2))/Math.pow(.1*i,2)}function u3e(r,t,e){var n=t-r;if(e>n){var i=(e-n)/2;return 1-Math.pow(i,2)/Math.pow(.1*n,2)}return 1}function c3e(){return 1}function tj(r,t,e,n,i,a){e===void 0&&(e=5),n===void 0&&(n=!0),i===void 0&&(i=t3e),a===void 0&&(a=[.25,.2,.5,.05]);var o=e<0?0:Math.round(e);if(Number.isNaN(r)||Number.isNaN(t)||typeof r!="number"||typeof t!="number"||!o)return{min:0,max:0,ticks:[]};if(t-r<1e-15||o===1)return{min:r,max:t,ticks:[r]};for(var s={score:-2,lmin:0,lmax:0,lstep:0},l=1;l<1/0;){for(var u=0;u<i.length;u+=1){var c=i[u],f=a3e(c,i,l);if(a[0]*f+a[1]+a[2]+a[3]<s.score){l=1/0;break}for(var d=2;d<1/0;){var h=s3e(d,o);if(a[0]*f+a[1]+a[2]*h+a[3]<s.score)break;for(var v=(t-r)/(d+1)/l/c,p=Math.ceil(Math.log10(v));p<1/0;){var g=l*c*Math.pow(10,p),m=u3e(r,t,g*(d-1));if(a[0]*f+a[1]*m+a[2]*h+a[3]<s.score)break;var y=Math.floor(t/g)*l-(d-1)*l,b=Math.ceil(r/g)*l;if(y<=b)for(var x=b-y,w=0;w<=x;w+=1){var S=y+w,C=S*(g/l),_=C+g*(d-1),T=g,E=i3e(c,i,l,C,_,T),M=l3e(r,t,C,_),k=o3e(d,o,r,t,C,_),P=c3e(),F=a[0]*E+a[1]*M+a[2]*k+a[3]*P;F>s.score&&(!n||C<=r&&_>=t)&&(s.lmin=C,s.lmax=_,s.lstep=T,s.score=F)}p+=1}d+=1}}l+=1}var $=mp(s.lmax),R=mp(s.lmin),L=mp(s.lstep),O=Math.floor(n3e(($-R)/L))+1,B=new Array(O);B[0]=mp(R);for(var u=1;u<O;u++)B[u]=mp(B[u-1]+L);return{min:Math.min(r,xo(B)),max:Math.max(t,Yi(B)),ticks:B}}function rj(r){var t=r.values,e=r.tickInterval,n=r.tickCount,i=t;if(Rt(e))return va(i,function(u,c){return c%e==0});var a=r.min,o=r.max;if(Je(a)&&(a=0),Je(o)&&(o=t.length-1),Rt(n)&&n<o-a){var s=tj(a,o,n,!1,[1,2,5,3,4,7,6,8,9]).ticks,l=va(s,function(u){return u>=a&&u<=o});return l.map(function(u){return t[u]})}return t.slice(a,o+1)}function f3e(r){var t=r.min,e=r.max,n=r.nice,i=r.tickCount,a=new d3e;return a.domain([t,e]),n&&a.nice(i),a.ticks(i)}var Vk=5,nj=Math.sqrt(50),ij=Math.sqrt(10),aj=Math.sqrt(2),d3e=function(){function r(){this._domain=[0,1]}return r.prototype.domain=function(t){return t?(this._domain=Array.from(t,Number),this):this._domain.slice()},r.prototype.nice=function(t){var e,n;t===void 0&&(t=Vk);var i=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],l=this._domain[o],u;return l<s&&(e=[l,s],s=e[0],l=e[1],n=[o,a],a=n[0],o=n[1]),u=_S(s,l,t),u>0?(s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u,u=_S(s,l,t)):u<0&&(s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u,u=_S(s,l,t)),u>0?(i[a]=Math.floor(s/u)*u,i[o]=Math.ceil(l/u)*u,this.domain(i)):u<0&&(i[a]=Math.ceil(s*u)/u,i[o]=Math.floor(l*u)/u,this.domain(i)),this},r.prototype.ticks=function(t){return t===void 0&&(t=Vk),h3e(this._domain[0],this._domain[this._domain.length-1],t||Vk)},r}();function h3e(r,t,e){var n,i=-1,a,o,s;if(t=+t,r=+r,e=+e,r===t&&e>0)return[r];if((n=t<r)&&(a=r,r=t,t=a),(s=_S(r,t,e))===0||!isFinite(s))return[];if(s>0)for(r=Math.ceil(r/s),t=Math.floor(t/s),o=new Array(a=Math.ceil(t-r+1));++i<a;)o[i]=(r+i)*s;else for(r=Math.floor(r*s),t=Math.ceil(t*s),o=new Array(a=Math.ceil(r-t+1));++i<a;)o[i]=(r-i)/s;return n&&o.reverse(),o}function _S(r,t,e){var n=(t-r)/Math.max(0,e),i=Math.floor(Math.log(n)/Math.LN10),a=n/Math.pow(10,i);return i>=0?(a>=nj?10:a>=ij?5:a>=aj?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=nj?10:a>=ij?5:a>=aj?2:1)}function oj(r,t,e){var n;return e==="ceil"?n=Math.ceil(r/t):e==="floor"?n=Math.floor(r/t):n=Math.round(r/t),n*t}function Hk(r,t,e){var n=oj(r,e,"floor"),i=oj(t,e,"ceil");n=Bx(n,e),i=Bx(i,e);for(var a=[],o=n;o<=i;o=o+e){var s=Bx(o,e);a.push(s)}return{min:n,max:i,ticks:a}}function Wk(r,t,e){var n,i=r.minLimit,a=r.maxLimit,o=r.min,s=r.max,l=r.tickCount,u=l===void 0?5:l,c=Je(i)?Je(t)?o:t:i,f=Je(a)?Je(e)?s:e:a;if(c>f&&(n=[c,f],f=n[0],c=n[1]),u<=2)return[c,f];for(var d=(f-c)/(u-1),h=[],v=0;v<u;v++)h.push(c+d*v);return h}function v3e(r){var t=r.min,e=r.max,n=r.tickInterval,i=r.minLimit,a=r.maxLimit,o=f3e(r);return!Je(i)||!Je(a)?Wk(r,xo(o),Yi(o)):n?Hk(t,e,n).ticks:o}function p3e(r){var t=r.min,e=r.max,n=r.tickCount,i=r.nice,a=r.tickInterval,o=r.minLimit,s=r.maxLimit,l=tj(t,e,n,i).ticks;return!Je(o)||!Je(s)?Wk(r,xo(l),Yi(l)):a?Hk(t,e,a).ticks:l}function g3e(r){var t=r.base,e=r.tickCount,n=r.min,i=r.max,a=r.values,o,s=Ns(t,i);if(n>0)o=Math.floor(Ns(t,n));else{var l=Z7(a,t,i);o=Math.floor(Ns(t,l))}for(var u=s-o,c=Math.ceil(u/e),f=[],d=o;d<s+c;d=d+c)f.push(Math.pow(t,d));return n<=0&&f.unshift(0),f}function sj(r,t,e){if(e===void 0&&(e=5),r===t)return{max:t,min:r,ticks:[r]};var n=e<0?0:Math.round(e);if(n===0)return{max:t,min:r,ticks:[]};var i=1.5,a=.5+1.5*i,o=t-r,s=o/n,l=Math.pow(10,Math.floor(Math.log10(s))),u=l;2*l-s<i*(s-u)&&(u=2*l,5*l-s<a*(s-u)&&(u=5*l,10*l-s<i*(s-u)&&(u=10*l)));for(var c=Math.ceil(t/u),f=Math.floor(r/u),d=Math.max(c*u,t),h=Math.min(f*u,r),v=Math.floor((d-h)/u)+1,p=new Array(v),g=0;g<v;g++)p[g]=mp(h+g*u);return{min:h,max:d,ticks:p}}function m3e(r){var t=r.exponent,e=r.tickCount,n=Math.ceil(qc(t,r.max)),i=Math.floor(qc(t,r.min)),a=sj(i,n,e).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,t)*s})}function y3e(r,t){var e=r.length*t;return t===1?r[r.length-1]:t===0?r[0]:e%1!=0?r[Math.ceil(e)-1]:r.length%2==0?(r[e-1]+r[e])/2:r[e]}function b3e(r){var t=r.tickCount,e=r.values;if(!e||!e.length)return[];for(var n=e.slice().sort(function(s,l){return s-l}),i=[],a=0;a<t;a++){var o=a/(t-1);i.push(y3e(n,o))}return i}function x3e(r){var t=r.min,e=r.max,n=r.tickCount,i=r.tickInterval,a=r.minLimit,o=r.maxLimit,s=sj(t,e,n).ticks;return!Je(a)||!Je(o)?Wk(r,xo(s),Yi(s)):i?Hk(t,e,i).ticks:s}function w3e(r){var t=r.min,e=r.max,n=r.minTickInterval,i=r.tickInterval,a=r.tickCount;if(i)a=Math.ceil((e-t)/i);else{i=XNe(t,e,a)[1];var o=(e-t)/i,s=o/a;s>1&&(i=i*Math.ceil(s)),n&&i<n&&(i=n)}for(var l=[],u=t;u<e+i;u+=i)l.push(u);return l}function S3e(r){var t=rj(r),e=Yi(r.values);return e!==Yi(t)&&t.push(e),t}function TS(r){return new Date(r).getFullYear()}function C3e(r){return new Date(r,0,1).getTime()}function jk(r){return new Date(r).getMonth()}function E3e(r,t){var e=TS(r),n=TS(t),i=jk(r),a=jk(t);return(n-e)*12+(a-i)%12}function _3e(r,t){return new Date(r,t,1).getTime()}function T3e(r,t){return Math.ceil((t-r)/Bu)}function A3e(r,t){return Math.ceil((t-r)/zd)}function M3e(r,t){return Math.ceil((t-r)/(60*1e3))}function k3e(r){var t=r.min,e=r.max,n=r.minTickInterval,i=r.tickCount,a=r.tickInterval,o=[];a||(a=(e-t)/i,n&&a<n&&(a=n));var s=TS(t);if(a>K7)for(var l=TS(e),u=Math.ceil(a/K7),c=s;c<=l+u;c=c+u)o.push(C3e(c));else if(a>Wy)for(var f=Math.ceil(a/Wy),d=jk(t),h=E3e(t,e),c=0;c<=h+f;c=c+f)o.push(_3e(s,c+d));else if(a>Bu)for(var v=new Date(t),p=v.getFullYear(),g=v.getMonth(),m=v.getDate(),y=Math.ceil(a/Bu),b=T3e(t,e),c=0;c<b+y;c=c+y)o.push(new Date(p,g,m+c).getTime());else if(a>zd)for(var v=new Date(t),p=v.getFullYear(),g=v.getMonth(),y=v.getDate(),x=v.getHours(),w=Math.ceil(a/zd),S=A3e(t,e),c=0;c<=S+w;c=c+w)o.push(new Date(p,g,y,x+c).getTime());else if(a>$d)for(var C=M3e(t,e),_=Math.ceil(a/$d),c=0;c<=C+_;c=c+_)o.push(t+c*$d);else{var T=a;T<sl&&(T=sl);for(var E=Math.floor(t/sl)*sl,M=Math.ceil((e-t)/sl),k=Math.ceil(T/sl),c=0;c<M+k;c=c+k)o.push(E+c*sl)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}Wl("cat",rj);Wl("time-cat",S3e);Wl("wilkinson-extended",p3e);Wl("r-pretty",x3e);Wl("time",w3e);Wl("time-pretty",k3e);Wl("log",g3e);Wl("pow",m3e);Wl("quantile",b3e);Wl("d3-linear",v3e);jl("cat",gp);jl("category",gp);jl("identity",e3e);jl("linear",Gd);jl("log",KNe);jl("pow",ZNe);jl("time",QNe);jl("timeCat",qNe);jl("quantize",Q7);jl("quantile",JNe);var I3e=globalThis&&globalThis.__spreadArray||function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return r.concat(a||Array.prototype.slice.call(t))};function P3e(r){return Gn(r,function(t,e){var n=e===0?"M":"L",i=t[0],a=t[1];return[n,i,a]})}function lj(r){return P3e(r)}function D3e(r){if(r.length<=2)return lj(r);var t=[];G(r,function(o){ri(o,t.slice(t.length-2))||t.push(o[0],o[1])});var e=fA(t,!1),n=xo(r),i=n[0],a=n[1];return e.unshift(["M",i,a]),e}function R3e(r,t,e,n){n===void 0&&(n=!0);var i=new Gd({values:r}),a=new gp({values:Gn(r,function(s,l){return l})}),o=Gn(r,function(s,l){return[a.scale(l)*t,e-i.scale(s)*e]});return n?D3e(o):lj(o)}function O3e(r,t,e,n){n===void 0&&(n=5);for(var i=new Gd({values:r}),a=new gp({values:Gn(r,function(d,h){return h})}),o=Gn(r,function(d,h){return[a.scale(h)*t,e-i.scale(d)*e]}),s=[],l=0;l<o.length;l++){var u=o[l],c={x:u[0],y:u[1],y0:e,size:n},f=N3e(c);s.push.apply(s,f)}return B3e(s)}function L3e(r,t){var e=new Gd({values:r}),n=Math.max(0,e.min);return t-e.scale(n)*t}function F3e(r,t,e,n){var i=I3e([],r,!0),a=L3e(n,e);return i.push(["L",t,a]),i.push(["L",0,a]),i.push(["Z"]),i}function N3e(r){var t=r.x,e=r.y,n=r.y0,i=r.size,a,o;qe(e)?(a=e[0],o=e[1]):(a=n,o=e);var s,l;qe(t)?(s=t[0],l=t[1]):(s=t-i/2,l=t+i/2);var u=[{x:s,y:a},{x:s,y:o}];return u.push({x:l,y:o},{x:l,y:a}),u}function B3e(r,t){t===void 0&&(t=!0);var e=[],n=r[0];e.push(["M",n.x,n.y]);for(var i=1,a=r.length;i<a;i++)e.push(["L",r[i].x,r[i].y]);return t&&(e.push(["L",n.x,n.y]),e.push(["z"])),e}var Yy=globalThis&&globalThis.__assign||function(){return Yy=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Yy.apply(this,arguments)},$3e={stroke:"#C5C5C5",strokeOpacity:.85},z3e={fill:"#CACED4",opacity:.85},G3e=function(){function r(t){var e=t.x,n=e===void 0?0:e,i=t.y,a=i===void 0?0:i,o=t.width,s=o===void 0?200:o,l=t.height,u=l===void 0?26:l,c=t.smooth,f=c===void 0?!0:c,d=t.isArea,h=d===void 0?!1:d,v=t.data,p=v===void 0?[]:v,g=t.lineStyle,m=t.areaStyle,y=t.group,b=t.interval,x=b===void 0?null:b;this.group=y,this.x=n,this.y=a,this.width=s,this.height=u,this.data=p,this.smooth=f,this.isArea=h,this.lineStyle=Object.assign({},$3e,g),this.areaStyle=Object.assign({},z3e,m),this.intervalConfig=x,this.renderLine()}return r.prototype.renderLine=function(){var t=this,e=t.x,n=t.y,i=t.width,a=t.height;t.barWidth;var o=t.data,s=t.smooth,l=t.isArea,u=t.lineStyle,c=t.areaStyle,f=this.group.addGroup({name:"trend-group"});if(o){var d=R3e(o,i,a,s);if(f.addShape("path",{attrs:Yy({path:d},u)}),l){var h=F3e(d,i,a,o);f.addShape("path",{attrs:Yy({path:h},c)})}}this.intervalConfig&&f.addShape("path",{attrs:Yy({path:O3e(this.intervalConfig.data,i,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style)}),f.move(e,n)},r.prototype.destory=function(){this.group.destroy()},r}(),U3e=G3e,yp=globalThis&&globalThis.__assign||function(){return yp=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},yp.apply(this,arguments)},V3e={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},H3e={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},W3e=function(){function r(t){var e=t.group,n=t.name,i=t.type,a=t.x,o=a===void 0?0:a,s=t.y,l=s===void 0?0:s,u=t.width,c=u===void 0?2:u,f=t.height,d=f===void 0?24:f,h=t.style,v=h===void 0?{}:h;this.group=e,this.name=n,this.handleType=i,this.x=o,this.y=l,this.width=c,this.height=d,i==="trend"?this.style=yp(yp({},V3e),v):i==="simple"&&(this.style=yp(yp({},H3e),v)),this.renderHandle()}return r.prototype.setX=function(t){this.setXY(t,void 0)},r.prototype.setY=function(t){this.setXY(void 0,t)},r.prototype.setXY=function(t,e){Rt(t)&&(this.x=t),Rt(e)&&(this.y=e),this.updateXY()},r.prototype.renderHandle=function(){var t=this,e=t.width,n=t.height,i=t.style,a=t.name,o=i.fill,s=i.stroke,l=i.radius,u=i.opacity,c=i.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:e,height:n,fill:o,stroke:s,radius:l,opacity:u,cursor:c},name:a+"-handler"}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:0,r:2*e,fill:o,stroke:s,radius:l,opacity:u,cursor:c},name:a+"-handler"}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:n,r:2*e,fill:o,stroke:s,radius:l,opacity:u,cursor:c},name:a+"-handler"})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:n/2,r:2*e,fill:o,stroke:s,radius:l,opacity:u,cursor:c,lineWidth:2},name:a+"-handler"})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},r.prototype.bindSimpleEvents=function(){var t=this,e=this.name;this.handleGroup.on(e+"-handler:mouseenter",function(){var n=t.style.highLightFill;t.topCircle.attr("fill",n)}),this.handleGroup.on(e+"-handler:mouseleave",function(){var n=t.style.fill;t.topCircle.attr("fill",n)})},r.prototype.bindTrendEvents=function(){var t=this,e=this.name;this.handleGroup.on(e+"-handler:mouseenter",function(){var n=t.style.highLightFill;t.verticalLine.attr("fill",n),t.topCircle.attr("fill",n),t.bottomCircle.attr("fill",n)}),this.handleGroup.on(e+"-handler:mouseleave",function(){var n=t.style.fill;t.verticalLine.attr("fill",n),t.topCircle.attr("fill",n),t.bottomCircle.attr("fill",n)})},r.prototype.show=function(){this.handleGroup.show()},r.prototype.hide=function(){this.handleGroup.hide()},r.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},r}(),uj=W3e,cj="timebarstartplay",fj="timebarendplay",Yl="valuechange",Ud="timebarConfigChanged",Kc="playPauseBtn",Xy="nextStepBtn",qy="preStepBtn",Yk=globalThis&&globalThis.__assign||function(){return Yk=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Yk.apply(this,arguments)},j3e=function(){function r(t){this.config=Mt({},t),this.init()}return r.prototype.update=function(t){this.config=Mt({},this.config,t),this.updateElement(),this.renderMarker()},r.prototype.init=function(){this.initElement(),this.renderMarker()},r.prototype.initElement=function(){var t=this.config,e=t.group,n=t.style,i=n.scale,a=i===void 0?1:i,o=n.offsetX,s=o===void 0?0:o,l=n.offsetY,u=l===void 0?0:l,c=this.config.x+s,f=this.config.y+u,d=e.addGroup({name:Kc});this.startMarkerGroup=d.addGroup({name:Kc}),this.circle=e.addShape("circle",{attrs:Yk({x:c,y:f,r:this.config.r*a},n),name:Kc}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,f,a),fill:n.stroke||"#aaa"}}),this.pauseMarkerGroup=d.addGroup({name:Kc});var h=.25*this.config.r*a,v=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*a,y:f-v/2,width:h,height:v,fill:n.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*a,y:f-v/2,width:h,height:v,fill:n.stroke||"#aaa",lineWidth:0}})},r.prototype.updateElement=function(){var t=this.config.style,e=t.scale,n=e===void 0?1:e,i=t.offsetX,a=i===void 0?0:i,o=t.offsetY,s=o===void 0?0:o,l=this.config.x+a,u=this.config.y+s;this.circle.attr("x",l),this.circle.attr("y",u),this.circle.attr("r",this.config.r*n),this.startMarker.attr("path",this.getStartMarkerPath(l,u,n));var c=.25*this.config.r*n,f=.5*this.config.r*Math.sqrt(3)*n;this.pauseLeftMarker.attr("x",l-(1/4+1/8)*this.config.r*n),this.pauseLeftMarker.attr("y",u-f/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",f),this.pauseRightMarker.attr("x",l+1/8*this.config.r*n),this.pauseRightMarker.attr("y",u-f/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",f)},r.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},r.prototype.getStartMarkerPath=function(t,e,n){var i=.5*this.config.r*Math.sqrt(3)*n;return[["M",t-i/Math.sqrt(3)/2,e-i/2],["L",t+i/Math.sqrt(3),e],["L",t-i/Math.sqrt(3)/2,e+i/2]]},r}(),Y3e=j3e,da=globalThis&&globalThis.__assign||function(){return da=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},da.apply(this,arguments)},Ky=Un,X3e="#aaa",q3e="green",K3e={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},Z3e={fill:"#fff"},Q3e={fill:"green"},dj={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},hj={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},J3e={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:dj,timeTypeControllerStyle:hj},Xk=110,Zc=50,eBe=function(){function r(t){this.controllerCfg=Mt({},J3e,t),this.group=t.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType="range",this.fontFamily=t.fontFamily||"Arial, sans-serif",this.init()}return r.prototype.init=function(){this.renderPlayButton()},r.prototype.getNextMarkerPath=function(t,e,n){return[["M",t,e-n],["L",t+n,e],["L",t,e+n],["Z",t,e-n],["M",t,e],["L",t-n,e-n],["L",t-n,e+n],["Z"]]},r.prototype.getPreMarkerPath=function(t,e,n){return[["M",t,e-n],["L",t-n,e],["L",t,e+n],["L",t,e-n],["M",t,e],["L",t+n,e-n],["L",t+n,e+n],["Z"]]},r.prototype.renderPlayButton=function(){var t=this.controllerCfg,e=t.width,n=t.height,i=t.x,a=t.y,o=t.hideTimeTypeController,s=t.fill,l=s===void 0?X3e:s,u=t.stroke,c=u===void 0?q3e:u,f=da(da({},K3e),t.playBtnStyle||{}),d=da(da({},Z3e),t.preBtnStyle||{}),h=da(da({},Q3e),t.nextBtnStyle||{}),v=n/2-5,p=a+10,g=this.controllerGroup.addShape("rect",{attrs:{x:i,y:p,width:e,height:n,stroke:c,fill:l},name:"container-rect"});this.playButton?this.playButton.update({x:e/2,y:p,r:v}):this.playButton=new Y3e({group:this.controllerGroup,x:e/2,y:p+v+5,r:v,isPlay:this.isPlay,style:f});var m=d.offsetX||0,y=d.offsetY||0,b=(d.scale||1)*v;this.controllerGroup.addShape("path",{attrs:da({path:this.getPreMarkerPath(e/2-5*v+m,p+v+5+y,b*.5)},d),name:qy});var x=h.offsetX||0,w=h.offsetY||0,S=(h.scale||1)*v;this.controllerGroup.addShape("path",{attrs:da({path:this.getNextMarkerPath(e/2+5*v+x,p+v+5+w,S*.5)},h),name:Xy}),g.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var C=this.controllerCfg.scale,_=C===void 0?1:C,T=this.controllerGroup.getCanvasBBox(),E=(T.maxX+T.minX)/2,M=(T.maxY+T.minY)/2,k=Ky([1,0,0,0,1,0,0,0,1],[["t",-E,-M],["s",_,_],["t",E,M]]);this.controllerGroup.setMatrix(k)},r.prototype.renderSpeedBtn=function(){var t=this.controllerCfg,e=t.y,n=t.width,i=t.hideTimeTypeController,a=da(da({},dj),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,l=a.text,u=l===void 0?{}:l,c=a.pointer,f=c===void 0?{}:c,d=a.scale,h=d===void 0?1:d,v=a.offsetX,p=v===void 0?0:v,g=a.offsetY,m=g===void 0?0:g,y=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=y;var b=5;this.speedAxisY=[19,22,26,32,39];for(var x=0;x<5;x++){var w=e+this.speedAxisY[x],S=n-(i?Zc:Xk);y.addShape("line",{attrs:da({x1:S,x2:S+15,y1:w,y2:w},s),speed:b,name:"speed-rect"}),this.speedAxisY[x]=w,b=b-1}this.speedText=y.addShape("text",{attrs:da({x:n-(i?Zc:Xk)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},u)}),this.speedPoint=y.addShape("path",{attrs:da({path:this.getPointerPath(n-(i?Zc:Xk),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},f)});var C=this.speedGroup.getCanvasBBox(),_=(C.maxX+C.minX)/2,T=(C.maxY+C.minY)/2,E=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];E=Ky(E,[["t",-_,-T],["s",h,h],["t",_+p*h,T+m*h]]),this.speedGroup.setMatrix(E)},r.prototype.getPointerPath=function(t,e){return[["M",t,e],["L",t-10,e-4],["L",t-10,e+4],["Z"]]},r.prototype.renderToggleTime=function(){var t,e=this.controllerCfg.width,n=da(da({},hj),this.controllerCfg.timeTypeControllerStyle||{}),i=n.scale,a=i===void 0?1:i,o=n.offsetX,s=o===void 0?0:o,l=n.offsetY,u=l===void 0?0:l,c=n.box,f=c===void 0?{}:c,d=n.check,h=d===void 0?{}:d,v=n.text,p=v===void 0?{}:v;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"}),this.toggleGroup.addShape("rect",{attrs:da({x:e-Zc,y:this.speedAxisY[0]+3.5},f),isChecked:!1,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:da({path:[["M",e-Zc+3,this.speedAxisY[1]+6],["L",e-Zc+7,this.speedAxisY[1]+10],["L",e-Zc+12,this.speedAxisY[1]+4]]},h),capture:!1}),this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:da({text:((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:e-Zc+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},p)});var g=this.toggleGroup.getCanvasBBox(),m=(g.maxX+g.minX)/2,y=(g.maxY+g.minY)/2,b=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];b=Ky(b,[["t",-m,-y],["s",a,a],["t",m+s*a,y+u*a]]),this.toggleGroup.setMatrix(b)},r.prototype.bindEvent=function(){var t=this;this.speedGroup.on("speed-rect:click",function(e){var n=e.target.attr("y1"),i=t.speedPoint.attr("matrix"),a=t.speedAxisY.indexOf(i[7]||0),o=t.speedAxisY.indexOf(n),s=t.speedAxisY[o]-t.speedAxisY[a];i=Ky(i,[["t",0,s]]),t.speedPoint.setMatrix(i),t.currentSpeed=t.speedAxisY.length-o,t.speedText.attr("text",t.currentSpeed+".0X"),t.group.emit(Ud,{speed:t.currentSpeed,type:t.currentType})}),this.speedGroup.on("mousewheel",function(e){e.preventDefault();var n=t.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],i=n[7],a=t.speedAxisY.indexOf(i);if(a===-1){var o=1/0;t.speedAxisY.forEach(function(l,u){var c=Math.abs(l-i);o>c&&(o=c,a=u)})}e.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(t.speedAxisY.length-1,a+1);var s=t.speedAxisY[a]-i;n=Ky(n,[["t",0,s]]),t.speedPoint.setMatrix(n),t.currentSpeed=t.speedAxisY.length-a,t.speedText.attr("text",t.currentSpeed+".0X"),t.group.emit(Ud,{speed:t.currentSpeed,type:t.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(e){var n,i,a=e.target.get("isChecked");a?(t.checkedIcon.hide(),t.checkedText.attr("text",((i=t.controllerCfg)===null||i===void 0?void 0:i.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),t.currentType="range"):(t.checkedIcon.show(),t.checkedText.attr("text",((n=t.controllerCfg)===null||n===void 0?void 0:n.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),t.currentType="single"),e.target.set("isChecked",!a),t.group.emit(Ud,{type:t.currentType,speed:t.currentSpeed})})},r.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},r}(),vj=eBe,ni=globalThis&&globalThis.__assign||function(){return ni=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ni.apply(this,arguments)},tBe={fill:"#416180",opacity:.05},rBe={fill:"#416180",opacity:.15,radius:5},nBe={fill:"#5B8FF9",opacity:.3,cursor:"grab"},qk=2,iBe={width:qk,height:24},aBe={textBaseline:"middle",fill:"#000",opacity:.45},oBe={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},sBe={lineWidth:1,stroke:"#ccc"},lBe=function(){function r(t){var e=this;this.prevX=0,this.onMouseDown=function(W){return function(X){e.currentHandler=W;var ae=X.originalEvent;ae.stopPropagation(),ae.preventDefault(),e.prevX=ne(ae,"touches.0.pageX",ae.pageX);var Z=e.canvas.get("container");Z.addEventListener("mousemove",e.onMouseMove),Z.addEventListener("mouseup",e.onMouseUp),Z.addEventListener("mouseleave",e.onMouseUp),Z.addEventListener("touchmove",e.onMouseMove),Z.addEventListener("touchend",e.onMouseUp),Z.addEventListener("touchcancel",e.onMouseUp)}},this.onMouseMove=function(W){W.stopPropagation(),W.preventDefault();var X=ne(W,"touches.0.pageX",W.pageX),ae=X-e.prevX,Z=e.adjustOffsetRange(ae/e.width);e.updateStartEnd(Z),e.updateUI(),e.prevX=X},this.onMouseUp=function(){e.currentHandler&&(e.currentHandler=void 0);var W=e.canvas.get("container");W&&(W.removeEventListener("mousemove",e.onMouseMove),W.removeEventListener("mouseup",e.onMouseUp),W.removeEventListener("mouseleave",e.onMouseUp),W.removeEventListener("touchmove",e.onMouseMove),W.removeEventListener("touchend",e.onMouseUp),W.removeEventListener("touchcancel",e.onMouseUp))};var n=t.x,i=n===void 0?0:n,a=t.y,o=a===void 0?0:a,s=t.width,l=s===void 0?100:s,u=t.height,c=t.padding,f=c===void 0?10:c,d=t.trendCfg,h=t.controllerCfg,v=h===void 0?{speed:1}:h,p=t.backgroundStyle,g=p===void 0?{}:p,m=t.foregroundStyle,y=m===void 0?{}:m,b=t.handlerStyle,x=b===void 0?{}:b,w=t.textStyle,S=w===void 0?{}:w,C=t.start,_=C===void 0?0:C,T=t.end,E=T===void 0?1:T,M=t.minText,k=M===void 0?"":M,P=t.maxText,F=P===void 0?"":P,$=t.group,R=t.graph,L=t.canvas,O=t.tick,B=O===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(X){return X},ticks:[]}:O,U=t.type;this.graph=R,this.canvas=L,this.group=$,this.timeBarType=U,this.x=i,this.y=o,this.width=l,this.height=u,this.padding=f,this.ticks=B.ticks,this.trendCfg=d,this.controllerCfg=v,this.currentSpeed=v.speed||1,this.tickLabelFormatter=B.tickLabelFormatter,U==="trend"?this.backgroundStyle=ni(ni({},tBe),g):U==="simple"&&(this.backgroundStyle=ni(ni({},rBe),g)),this.foregroundStyle=ni(ni({},nBe),y),this.handlerStyle=ni(ni({},iBe),x),this.textStyle=ni(ni({},aBe),S),this.tickLabelStyle=ni(ni({},oBe),B.tickLabelStyle),this.tickLineStyle=ni(ni({},sBe),B.tickLineStyle),this.currentMode="range",this.start=_,this.end=E,this.minText=k,this.maxText=F,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return r.prototype.update=function(t){var e=t.x,n=t.y,i=t.width,a=t.height,o=t.minText,s=t.maxText,l=t.start,u=t.end;this.start=Math.min(1,Math.max(l,0)),this.end=Math.min(1,Math.max(u,0)),$t(this,{x:e,y:n,width:i,height:a,minText:o,maxText:s}),this.updateUI()},r.prototype.setText=function(t,e){this.minTextShape.attr("text",t),this.maxTextShape.attr("text",e)},r.prototype.renderSlider=function(){var t=this,e=this,n=e.width,i=e.height,a=e.timeBarType;if(a==="trend"&&aa(ne(this.trendCfg,"data"))){var o=new U3e(ni(ni({x:this.x,y:this.y,width:n,height:i},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:ni({x:0,y:0,width:n,height:i},this.backgroundStyle)});var l=this.group.addGroup();a==="trend"?(this.minTextShape=l.addShape("text",{attrs:ni({x:0,y:i/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=l.addShape("text",{attrs:ni({y:i/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})):(this.minTextShape=l.addShape("text",{attrs:ni({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=l.addShape("text",{attrs:ni({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:ni({x:0,y:this.y,height:i},this.foregroundStyle)}),this.foregroundShape.on("mousedown",function(g){g.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(g){g.target.attr("cursor",t.foregroundStyle.cursor||"grab")});var u=ne(this.handlerStyle,"width",2),c=ne(this.handlerStyle,"height",24),f=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new uj({name:"minHandlerShape",group:f,type:a,x:this.x,y:this.y,width:u,height:c,style:this.handlerStyle});var d=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new uj({name:"maxHandlerShape",group:d,type:a,x:this.x,y:this.y,width:u,height:c,style:this.handlerStyle});var h=this.ticks,v=n/(h.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(g){g.destroy()});var p=-1/0;this.textList=h.map(function(g,m){t.tickPosList.push(t.x+m*v);var y;t.tickLabelFormatter?(y=t.tickLabelFormatter(g),!rt(y)&&y&&(y=g.date)):y=g.date;var b=t.group.addShape("text",{attrs:ni({x:t.x+m*v,y:t.y+i+5,text:y,fontFamily:t.fontFamily||"Arial, sans-serif"},t.tickLabelStyle)}),x=t.group.addShape("line",{attrs:ni({x1:t.x+m*v,y1:t.y+i+2,x2:t.x+m*v,y2:t.y+i+6},t.tickLineStyle)});x.toBack();var w=b.getBBox();return w.minX>p?(b.show(),x.show(),p=w.minX+w.width+10):(b.hide(),x.hide()),b}),this.controllerBtnGroup=new vj(ni({group:this.group,x:this.x,y:this.y+i+25,width:n,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents()},r.prototype.bindEvents=function(){var t=this,e=this.group.find(function(i){return i.get("name")==="minHandlerShape"});e&&(e.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),e.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var n=this.group.find(function(i){return i.get("name")==="maxHandlerShape"});n&&(n.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),n.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on(Kc+":click",function(){t.isPlay=!t.isPlay,t.currentHandler=t.maxHandlerShape,t.changePlayStatus()}),this.group.on(Xy+":click",function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(.01),t.updateUI()}),this.group.on(qy+":click",function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(-.01),t.updateUI()}),this.group.on(Ud,function(i){var a=i.type,o=i.speed;t.currentSpeed=o,t.currentMode=a,a==="single"?(t.minHandlerShape.hide(),t.foregroundShape.hide(),t.minTextShape.hide()):a==="range"&&(t.minHandlerShape.show(),t.foregroundShape.show(),t.minTextShape.show())})},r.prototype.adjustTickIndex=function(t){for(var e=0;e<this.tickPosList.length-1;e++)if(this.tickPosList[e]<=t&&t<=this.tickPosList[e+1])return Math.abs(this.tickPosList[e]-t)<Math.abs(t-this.tickPosList[e+1])?e:e+1;return 0},r.prototype.adjustOffsetRange=function(t){switch(this.currentHandler){case this.minHandlerShape:{var e=0-this.start,n=1-this.start;return Math.min(n,Math.max(e,t))}case this.maxHandlerShape:{var e=0-this.end,n=1-this.end;return Math.min(n,Math.max(e,t))}case this.foregroundShape:{var e=0-this.start,n=1-this.end;return Math.min(n,Math.max(e,t))}default:return 0}},r.prototype.updateStartEnd=function(t){var e=this.ticks[this.adjustTickIndex(this.start*this.width)],n=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=t,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break;case this.foregroundShape:this.start+=t,this.end+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break}},r.prototype.updateUI=function(){var t=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var e=this.x+this.start*this.width,n=this.x+this.end*this.width;this.foregroundShape.attr("x",e),this.foregroundShape.attr("width",n-e);var i=ne(this.handlerStyle,"width",qk);this.setText(this.minText,this.maxText);var a=this.dodgeText([e,n]),o=a[0],s=a[1];this.minHandlerShape.setX(e-i/2),G(o,function(l,u){return t.minTextShape.attr(u,l)}),this.maxHandlerShape.setX(n-i/2),G(s,function(l,u){return t.maxTextShape.attr(u,l)}),this.currentMode==="range"?this.graph.emit(Yl,{value:[this.start,this.end].sort()}):this.currentMode==="single"&&this.graph.emit(Yl,{value:[this.end,this.end]})},r.prototype.dodgeText=function(t){var e,n,i=2,a=ne(this.handlerStyle,"width",qk),o=this.minTextShape,s=this.maxTextShape,l=t[0],u=t[1],c=!1;l>u&&(e=[u,l],l=e[0],u=e[1],n=[s,o],o=n[0],s=n[1],c=!0);var f=o.getBBox(),d=s.getBBox(),h=null,v=null;return this.timeBarType==="trend"?(h=l-f.width<this.x+i?{x:l+a/2+i,textAlign:"left"}:{x:l-a/2-i,textAlign:"right"},v=u+d.width>this.x+this.width?{x:u-a/2-i,textAlign:"right"}:{x:u+a/2+i,textAlign:"left"}):this.timeBarType==="simple"&&(h=f.width>l-i?{x:l+a/2+i,textAlign:"center"}:{x:l-a/2-i,textAlign:"center"},v=d.width>this.width-u-i?{x:u-a/2-i,textAlign:"center"}:{x:u+a/2+i,textAlign:"center"}),c?[v,h]:[h,v]},r.prototype.startPlay=function(){var t=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var e=t,n=e.ticks,i=e.width,a=t.currentSpeed,o=i/n.length,s=o/((10-a)*1e3/60),l=t.adjustOffsetRange(s/t.width);t.updateStartEnd(l),t.updateUI(),t.isPlay&&(t.playHandler=t.startPlay())}):void 0},r.prototype.changePlayStatus=function(t){t===void 0&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(cj,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit(fj,null))},r.prototype.destory=function(){this.graph.off(Yl);var t=this.group,e=t.find(function(i){return i.get("name")==="minHandlerShape"});e&&(e.off("minHandlerShape-handler:mousedown"),e.off("minHandlerShape-handler:touchstart"),e.destroy());var n=t.find(function(i){return i.get("name")==="maxHandlerShape"});n&&(n.off("maxHandlerShape-handler:mousedown"),n.off("maxHandlerShape-handler:touchstart"),n.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),t.off(Kc+":click"),t.off(Xy+":click"),t.off(qy+":click"),t.off(Ud),t.destroy(),this.trendComponent&&this.trendComponent.destory()},r}(),uBe=lBe,cBe=function(){function r(t){var e=t.x,n=e===void 0?0:e,i=t.y,a=i===void 0?0:i,o=t.container,s=t.text,l=t.padding,u=l===void 0?[4,4,4,4]:l,c=t.className,f=c===void 0?"g6-component-timebar-tooltip":c,d=t.backgroundColor,h=d===void 0?"#000":d,v=t.textColor,p=v===void 0?"#fff":v,g=t.opacity,m=g===void 0?.8:g,y=t.fontSize,b=y===void 0?12:y;this.container=o,this.className=f,this.backgroundColor=h,this.textColor=p,this.x=n,this.y=a,this.text=s,this.padding=u,this.opacity=m,this.fontSize=b,this.render()}return r.prototype.render=function(){var t=this,e=t.className;t.x,t.y;var n=t.backgroundColor,i=t.textColor,a=t.text,o=t.padding,s=t.opacity,l=t.fontSize,u=t.container,c=Vn("<div class='"+e+`' style="position: absolute; width: fit-content; height: fit-content; opacity: `+s+'"></div>');rt(u)&&(u=document.getElementById(u)),u.appendChild(c),t.parentHeight=u.offsetHeight,t.parentWidth=u.offsetWidth,Fr(c,{visibility:"hidden",top:0,left:0});var f=Vn(`
      <div style='position: absolute; white-space:nowrap; background-color: `+n+"; font-size: "+l+"px; border-radius: 4px; width: fit-content; height: fit-content; color: "+i+"; padding: "+o[0]+"px "+o[1]+"px "+o[2]+"px "+o[3]+"px'></div>");f.innerHTML=a,c.appendChild(f),t.backgroundDOM=f;var d=Vn("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid "+n+"'></div>");c.appendChild(d),t.arrowDOM=d,t.container=c},r.prototype.show=function(t){var e=this,n=t.text,i=t.x;t.y,t.clientX,t.clientY,e.backgroundDOM.innerHTML=n;var a=e.backgroundDOM.offsetWidth,o=e.backgroundDOM.offsetHeight,s=e.arrowDOM.offsetWidth,l=e.arrowDOM.offsetHeight;Fr(e.container,{top:-o-l+"px",left:i+"px",visibility:"visible"}),Fr(e.backgroundDOM,{marginLeft:-a/2+"px"}),Fr(e.arrowDOM,{marginLeft:-s/2+"px",top:o+"px"});var u=i-a/2,c=i+a/2;u<0?Fr(e.backgroundDOM,{marginLeft:-a/2-u+"px"}):c>e.parentWidth&&Fr(e.backgroundDOM,{marginLeft:-a/2-c+e.parentWidth+12+"px"})},r.prototype.hide=function(){Fr(this.container,{top:0,left:0,visibility:"hidden"})},r}(),fBe=cBe,Kk=globalThis&&globalThis.__assign||function(){return Kk=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Kk.apply(this,arguments)},dBe={fill:"#5B8FF9"},hBe={fill:"#e6e8e9"},vBe=function(){function r(t){this.frameCount=0,this.fontFamily="Arial, sans-serif";var e=t.graph,n=t.canvas,i=t.group,a=t.width,o=t.height,s=t.padding,l=t.data,u=t.start,c=t.end,f=t.x,d=f===void 0?0:f,h=t.y,v=h===void 0?0:h,p=t.tickLabelFormatter,g=t.selectedTickStyle,m=g===void 0?dBe:g,y=t.unselectedTickStyle,b=y===void 0?hBe:y,x=t.tooltipBackgroundColor,w=t.tooltipFomatter;this.graph=e,this.group=i,this.sliceGroup=i.addGroup({name:"slice-group"}),this.canvas=n,this.width=a,this.height=o,this.padding=s,this.data=l,this.start=u,this.end=c,this.tickLabelFormatter=p,this.selectedTickStyle=m,this.unselectedTickStyle=b,this.x=d,this.y=v,this.tooltipBackgroundColor=x,this.tooltipFomatter=w,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return r.prototype.renderSlices=function(){var t=this,e=this,n=e.width,i=e.height,a=e.padding,o=e.data,s=e.start,l=e.end,u=e.tickLabelFormatter,c=e.selectedTickStyle,f=e.unselectedTickStyle,d=n-2*a,h=10,v=4,p=3*a+v+h,g=i-p-2*a,m=2,y=o.length,b=(d-m*(y-1))/y;this.tickWidth=b;var x=this.sliceGroup,w=[],S=Math.round(y*s),C=Math.round(y*l);this.startTickRectId=S,this.endTickRectId=C,o.forEach(function(T,E){var M=E>=S&&E<=C,k=M?c:f,P=x.addShape("rect",{attrs:Kk({x:a+E*(b+m),y:a,width:b,height:g},k),draggable:!0,name:"tick-rect-"+E}),F=x.addShape("rect",{attrs:{x:a+E*b+m*(2*E-1)/2,y:a,width:E===0||E===y-1?b+m/2:b+m,height:g,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-"+E});F.toFront();var $=P.getBBox(),R=($.minX+$.maxX)/2;w.push({rect:P,pickRect:F,value:T.date,x:R,y:$.minY});var L;if(u?(L=u(T),!rt(L)&&L&&(L=T.date)):E%Math.round(y/10)==0&&(L=T.date),L){var O=$.maxY+a*2;x.addShape("line",{attrs:{stroke:"#BFBFBF",x1:R,y1:O,x2:R,y2:O+v}});var B=O+v+a,U=x.addShape("text",{attrs:{fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:R,y:B,textAlign:"center",text:L,textBaseline:"top",fontSize:10,fontFamily:t.fontFamily||"Arial, sans-serif"},capture:!1}),W=U.getBBox();W.maxX>n?U.attr("textAlign","right"):W.minX<0&&U.attr("textAlign","left")}}),this.tickRects=w;var _=this.group;this.currentSpeed=1,this.controllerBtnGroup=new vj({group:_,x:this.x,y:this.y+i+5,width:n,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"})},r.prototype.initEvent=function(){var t=this,e=this.sliceGroup;e.on("click",function(c){var f=c.target;if(!(f.get("type")!=="rect"||!f.get("name"))){var d=parseInt(f.get("name").split("-")[2],10);if(!isNaN(d)){var h=t.tickRects,v=t.unselectedTickStyle;h.forEach(function(y){y.rect.attr(v)});var p=t.selectedTickStyle;h[d].rect.attr(p),t.startTickRectId=d,t.endTickRectId=d;var g=h.length,m=d/g;t.graph.emit(Yl,{value:[m,m]})}}}),e.on("dragstart",function(c){var f=t.tickRects,d=t.unselectedTickStyle;f.forEach(function(y){y.rect.attr(d)});var h=c.target,v=parseInt(h.get("name").split("-")[2],10),p=t.selectedTickStyle;f[v].rect.attr(p),t.startTickRectId=v;var g=f.length,m=v/g;t.graph.emit(Yl,{value:[m,m]}),t.dragging=!0}),e.on("dragover",function(c){if(!!t.dragging&&c.target.get("type")==="rect"){for(var f=parseInt(c.target.get("name").split("-")[2],10),d=t.startTickRectId,h=t.tickRects,v=t.selectedTickStyle,p=t.unselectedTickStyle,g=0;g<h.length;g++){var m=g>=d&&g<=f?v:p;h[g].rect.attr(m)}var y=h.length;t.endTickRectId=f;var b=d/y,x=f/y;t.graph.emit(Yl,{value:[b,x]})}}),e.on("drop",function(c){if(!!t.dragging&&(t.dragging=!1,c.target.get("type")==="rect")){var f=t.startTickRectId,d=parseInt(c.target.get("name").split("-")[2],10);if(!(d<f)){var h=t.selectedTickStyle,v=t.tickRects;v[d].rect.attr(h),t.endTickRectId=d;var p=v.length,g=f/p,m=d/p;t.graph.emit(Yl,{value:[g,m]})}}});var n=this,i=n.tooltipBackgroundColor,a=n.tooltipFomatter,o=n.canvas,s=new fBe({container:o.get("container"),backgroundColor:i}),l=this.tickRects;l.forEach(function(c){var f=c.pickRect;f.on("mouseenter",function(d){var h=d.target;if(h.get("type")==="rect"){var v=parseInt(h.get("name").split("-")[2],10),p=o.getClientByPoint(l[v].x,l[v].y);s.show({x:l[v].x,y:l[v].y,clientX:p.x,clientY:p.y,text:a?a(l[v].value):l[v].value})}}),f.on("mouseleave",function(d){s.hide()})});var u=this.group;u.on(Kc+":click",function(){t.isPlay=!t.isPlay,t.changePlayStatus()}),u.on(Xy+":click",function(){t.updateStartEnd(1)}),u.on(qy+":click",function(){t.updateStartEnd(-1)}),u.on(Ud,function(c){c.type;var f=c.speed;t.currentSpeed=f})},r.prototype.changePlayStatus=function(t){t===void 0&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(cj,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit(fj,null))},r.prototype.startPlay=function(){var t=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var e=t.currentSpeed;t.frameCount%(60/e)==0&&(t.frameCount=0,t.updateStartEnd(1)),t.frameCount++,t.isPlay&&(t.playHandler=t.startPlay())}):void 0},r.prototype.updateStartEnd=function(t){var e=this,n=this.tickRects,i=n.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=e.endTickRectId;if(t>0?e.endTickRectId++:(n[e.endTickRectId].rect.attr(a),e.endTickRectId--),s!==e.startTickRectId)e.endTickRectId<e.startTickRectId&&(e.startTickRectId=e.endTickRectId);else{for(var l=e.startTickRectId;l<=e.endTickRectId-1;l++)n[l].rect.attr(a);e.startTickRectId=e.endTickRectId}if(n[e.endTickRectId]){n[e.endTickRectId].rect.attr(o);var u=e.startTickRectId/i,c=e.endTickRectId/i;this.graph.emit(Yl,{value:[u,c]})}},r.prototype.destory=function(){this.graph.off(Yl);var t=this.sliceGroup;t.off("click"),t.off("dragstart"),t.off("dragover"),t.off("drop"),this.tickRects.forEach(function(e){var n=e.pickRect;n.off("mouseenter"),n.off("mouseleave")}),this.tickRects.length=0,t.off(Kc+":click"),t.off(Xy+":click"),t.off(qy+":click"),t.off(Ud),this.sliceGroup.destroy()},r}(),pBe=vBe,gBe=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$u=globalThis&&globalThis.__assign||function(){return $u=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},$u.apply(this,arguments)},mBe=globalThis&&globalThis.__rest||function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e},yBe=4,bBe=26,xBe=function(r){gBe(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1}},t.prototype.initContainer=function(){var e=this.get("graph"),n=this._cfgs,i=n.width,a=n.height,o=this.get("className")||"g6-component-timebar",s=this.get("container"),l=this.get("graph").get("container"),u;s?(rt(s)&&(s=document.getElementById(s)),u=s):(u=Vn("<div class='"+o+"'></div>"),Fr(u,{position:"relative"})),l.appendChild(u),this.set("timeBarContainer",u);var c,f=e.get("renderer");f==="SVG"?c=new Nv({container:u,width:i,height:a}):c=new Eu({container:u,width:i,height:a}),this.set("canvas",c)},t.prototype.init=function(){this.initContainer();var e=this.get("canvas"),n=e.addGroup({name:"timebar-group"});this.set("timeBarGroup",n),this.renderTrend(),this.initEvent();var i=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",i)},t.prototype.renderTrend=function(){var e=this._cfgs,n=e.width,i=e.x,a=e.y,o=e.padding,s=e.type,l=e.trend,u=e.slider,c=e.controllerCfg,f=e.textStyle,d=e.tick,h=e.backgroundStyle,v=e.foregroundStyle,p=l.data,g=mBe(l,["data"]),m=n-2*o,y=s==="trend"?bBe:yBe,b=this.get("graph"),x=this.get("timeBarGroup"),w=this.get("canvas"),S=null;s==="trend"||s==="simple"?S=new uBe($u($u({graph:b,canvas:w,group:x,type:s,x:i+o,y:s==="trend"?a+o:a+o+15,width:m,height:y,padding:o,backgroundStyle:h,foregroundStyle:v,trendCfg:$u($u({},g),{data:p.map(function(C){return C.value})})},u),{tick:{ticks:p,tickLabelFormatter:d.tickLabelFormatter,tickLabelStyle:d.tickLabelStyle,tickLineStyle:d.tickLineStyle},handlerStyle:$u($u({},u.handlerStyle),{height:u.height||y}),controllerCfg:c,textStyle:f})):s==="tick"&&(S=new pBe($u({graph:b,canvas:w,group:x,x:i+o,y:a+o},d))),this.set("timebar",S)},t.prototype.filterData=function(e){var n,i=e.value,a=null,o=this._cfgs.type;if(o==="trend"||o==="simple"?a=this._cfgs.trend.data:o==="tick"&&(a=this._cfgs.tick.data),!a||a.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var s=this.get("rangeChange"),l=this.get("graph"),u=Math.round(a.length*i[0]),c=Math.round(a.length*i[1]);c=c>=a.length?a.length-1:c,u=u>=a.length?a.length-1:u;var f=(n=this._cfgs.tick)===null||n===void 0?void 0:n.tickLabelFormatter,d=f?f(a[u]):a[u].date,h=f?f(a[c]):a[c].date;if(o!=="tick"){var v=this.get("timebar");v.setText(d,h)}if(s)s(l,d,h);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=l.get("data"));var p=this.cacheGraphData.nodes.filter(function(y){return y.date>=a[u].date&&y.date<=a[c].date}),g=p.map(function(y){return y.id}),m=[];this.cacheGraphData.edges&&(m=this.cacheGraphData.edges.filter(function(y){return g.includes(y.source)&&g.includes(y.target)}),this.get("filterEdge")&&(m=m.filter(function(y){return y.date>=a[u].date&&y.date<=a[c].date}))),l.changeData({nodes:p,edges:m})}},t.prototype.initEvent=function(){var e=this,n=0,i=0,a=this._cfgs.type;!a||a==="trend"||a==="simple"?(n=this._cfgs.slider.start,i=this._cfgs.slider.end):a==="tick"&&(n=this._cfgs.tick.start,i=this._cfgs.tick.end);var o=this.get("graph");o.on("afterrender",function(s){e.filterData({value:[n,i]})}),o.on(Yl,xv(function(s){e.filterData(s)},200,{trailing:!0,leading:!0}))},t.prototype.destroy=function(){var e=this.get("timebar");e&&e.destory&&e.destory(),r.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var i=this.get("container");i||(i=this.get("graph").get("container")),rt(i)&&(i=document.getElementById(i)),i.removeChild(n)}},t}(cs),wBe=xBe,SBe=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),CBe=Zs.applyMatrix;function EBe(r,t){var e,n;if(r.naturalWidth)e=r.naturalWidth,n=r.naturalHeight;else{var i=new Image;i.src=r.src,i.onload=function(){t&&t(i.width,i.height)}}return[e,n]}var _Be=function(r){SBe(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},t.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},t.prototype.disableRefresh=function(){this.set("refresh",!1)},t.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},t.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},t.prototype.initViewport=function(){var e=this,n=this._cfgs,i=n.graph;if(!this.destroyed){var a=this.get("container");rt(a)&&(a=document.getElementById(a));var o=Vn("<div class="+n.viewportClassName+`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff'>
      </div>`),s=0,l=0,u=!1,c=0,f=0,d=0,h=0,v=0,p=0;a.addEventListener("mousedown",function(g){if(n.refresh=!1,g.target===o){var m=o.style;d=parseInt(m.width,10),h=parseInt(m.height,10);var y=e.get("width"),b=e.get("height");d>y||h>b||(p=i.getZoom(),v=e.get("ratio"),u=!0,s=g.clientX,l=g.clientY)}},!1),a.addEventListener("mousemove",function(g){if(!(!u||Je(g.clientX)||Je(g.clientY))){var m=e.get("width"),y=e.get("height"),b=o.style;c=parseInt(b.left,10),f=parseInt(b.top,10),d=parseInt(b.width,10),h=parseInt(b.height,10);var x=s-g.clientX,w=l-g.clientY;c-x<0?x=c:c-x+d>=m&&(x=0),f-w<0?w=f:f-w+h>=y&&(w=0),c-=x,f-=w,Fr(o,{left:c+"px",top:f+"px"}),i.translate(x*p/v,w*p/v),s=g.clientX,l=g.clientY}},!1),a.addEventListener("mouseleave",function(){u=!1,n.refresh=!0},!1),a.addEventListener("mouseup",function(){u=!1,n.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},t.prototype.updateViewport=function(){if(!this.destroyed){var e=this.get("ratio"),n=this.get("width"),i=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),l=o/s,u=a.getGroup(),c=u.getCanvasBBox(),f=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],d=[c.maxX-c.minX,c.maxY-c.minY],h={centerX:f[0],centerY:f[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>l?(h.width=d[0],h.height=h.width/l):(h.height=d[1],h.width=h.height*l),h.minX=f[0]-h.width/2,h.minY=f[1]-h.height/2;var v=u.getMatrix();v||(v=[1,0,0,0,1,0,0,0,1]);var p=Wx([1,0,0,0,1,0,0,0,1],v),g=CBe({x:h.minX,y:h.minY},p),m=a.getCanvasByPoint(g.x,g.y),y=this.get("viewport");y||this.initViewport();var b=o/h.width,x=b*n,w=b*i,S=n*-m.x/h.width,C=i*-m.y/h.height,_=S+x,T=C+w;S<0&&(x+=S,S=0),_>n&&(x=x-(_-n)),C<0&&(w+=C,C=0),T>i&&(w=w-(T-i)),this.set("ratio",e);var E=S+"px",M=C+"px";Fr(y,{left:E,top:M,width:x+"px",height:w+"px"})}},t.prototype.init=function(){this.initContainer()},t.prototype.initContainer=function(){var e=this,n=e.get("graph"),i=n.get("width"),a=n.get("height"),o=a/i,s=e.get("className"),l=e.get("container"),u=e.get("width"),c=e.get("height");!u&&!c&&(u=200),u?(c=o*u,e.set("height",c)):(u=1/o*c,e.set("width",u));var f=Vn("<div class='"+s+"' style='width: "+u+"px; height: "+c+"px; overflow: hidden; position: relative;'></div>");rt(l)&&(l=document.getElementById(l)),l?l.appendChild(f):n.get("container").appendChild(f),e.set("container",f);var d=Vn('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');f.appendChild(d);var h=Vn('<span style="display: table-cell; vertical-align: middle; "></span>');d.appendChild(h),e.set("containerDOM",d),e.set("containerSpan",h);var v=Vn('<img alt="" src="'+this.get("graphImg")+'" style="display: inline-block; user-select: none;" draggable="false" />');e.set("imgDOM",v),e.updateImgSize(),h.appendChild(v),e.updateCanvas()},t.prototype.updateImgSize=function(){var e=this,n=e.get("imgDOM"),i=e.get("width"),a=e.get("height");n.onload=function(){var o=EBe(n);o[0]>o[1]?n.width=i:n.height=a}},t.prototype.updateCanvas=function(){var e=this.get("refresh");if(!!e){var n=this.get("graph");if(!n.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var i=this.get("width"),a=n.get("canvas").getCanvasBBox(),o=a.width,s=i/o;this.set("ratio",s),this.updateViewport()}}},t.prototype.getViewport=function(){return this.get("viewport")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.updateGraphImg=function(e){var n=this,i=n.get("imgDOM");i.remove(),n.set("graphImg",e);var a=Vn('<img alt="" src="'+e+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');n.set("imgDOM",a),a.src=e,n.updateImgSize();var o=n.get("containerSpan");o.appendChild(a),n.updateCanvas()},t.prototype.destroy=function(){var e=this.get("container");e.parentNode.removeChild(e)},t}(cs),TBe=_Be,ABe=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Zk=globalThis&&globalThis.__assign||function(){return Zk=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Zk.apply(this,arguments)},MBe=Zs.distance,pj=.05,gj={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},kBe=function(r){ABe(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:Mr(gj),showLabel:"edge",scaleRBy:"wheel"}},t.prototype.getEvents=function(){var e;switch(this.get("trigger")){case"click":e={click:"filter"};break;case"drag":e={click:"createDelegate"};break;default:e={mousemove:"filter"};break}return e},t.prototype.init=function(){var e=this,n=e.get("showLabel"),i=n==="node"||n==="both",a=n==="edge"||n==="both";e.set("showNodeLabel",i),e.set("showEdgeLabel",a);var o=e.get("shouldShow");o||e.set("shouldShow",function(){return!0})},t.prototype.createDelegate=function(e){var n=this,i=n.get("delegate");(!i||i.destroyed)&&(n.filter(e),i=n.get("delegate"),i.on("dragstart",function(a){}),i.on("drag",function(a){n.filter(a)}),this.get("scaleRBy")==="wheel"&&i.on("mousewheel",function(a){n.scaleRByWheel(a)}))},t.prototype.scaleRByWheel=function(e){var n=this;if(!(!e||!e.originalEvent)){e.preventDefault&&e.preventDefault();var i=n.get("graph"),a,o=n.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0;s||i.getPointByClient(e.clientX,e.clientY),e.originalEvent.wheelDelta<0?a=1-pj:a=1/(1-pj);var l=n.get("maxR"),u=n.get("minR"),c=n.get("r");(c>(l||i.get("height"))&&a>1||c<(u||i.get("height")*.05)&&a<1)&&(a=1),c*=a,n.set("r",c),n.filter(e)}},t.prototype.filter=function(e){var n=this,i=n.get("graph"),a=i.getNodes(),o={},s=n.get("r"),l=n.get("type"),u={x:e.x,y:e.y};n.updateDelegate(u,s);var c=n.get("shouldShow"),f=n.get("vShapes");f&&f.forEach(function(m){m.remove(),m.destroy()}),f=[],a.forEach(function(m){var y=m.getModel(),b=y.x,x=y.y;MBe({x:b,y:x},u)<s&&(o[y.id]=m)});var d=i.getEdges(),h=[];d.forEach(function(m){var y=m.getModel(),b=y.source,x=y.target;c(y)&&(l==="only-source"||l==="one"?o[b]&&!o[x]&&h.push(m):l==="only-target"||l==="one"?o[x]&&!o[b]&&h.push(m):l==="both"&&o[b]&&o[x]&&h.push(m))});var v=n.get("showNodeLabel"),p=n.get("showEdgelabel"),g=i.get("group");h.forEach(function(m){var y=m.get("group").get("children");y.forEach(function(b){var x=b.get("type"),w=g.addShape(x,{attrs:b.attr()});f.push(w),v&&x==="text"&&w.set("visible",!0)})}),Object.keys(o).forEach(function(m){var y=o[m],b=y.get("group").clone();if(g.add(b),f.push(b),p)for(var x=b.get("children"),w=0;w<x.length;w++){var S=x[w];S.get("type")==="text"&&S.set("visible",!0)}}),n.set("vShapes",f)},t.prototype.updateParams=function(e){var n=this,i=e.r,a=e.trigger,o=e.minR,s=e.maxR,l=e.scaleRBy,u=e.showLabel,c=e.shouldShow;if(isNaN(e.r)||n.set("r",i),isNaN(s)||n.set("maxR",s),isNaN(o)||n.set("minR",o),(a==="mousemove"||a==="click")&&n.set("trigger",a),l==="wheel"||l==="unset"){n.set("scaleRBy",l),n.get("delegate").remove(),n.get("delegate").destroy();var f=n.get("dPercentText");f&&(f.remove(),f.destroy())}(u==="node"||u==="both")&&n.set("showNodeLabel",!0),(u==="edge"||u==="both")&&n.set("showEdgeLabel",!0),c&&n.set("shouldShow",c)},t.prototype.updateDelegate=function(e,n){var i=this,a=i.get("graph"),o=i.get("delegate");if(!o||o.destroyed){var s=a.get("group"),l=i.get("delegateStyle")||gj;o=s.addShape("circle",{attrs:Zk({r:n,x:e.x,y:e.y},l),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(u){i.scaleRByWheel(u)})}else o.attr({x:e.x,y:e.y,r:n});i.set("delegate",o)},t.prototype.clear=function(){var e=this,n=e.get("vShapes");n&&n.forEach(function(a){a.remove(),a.destroy()}),n=[],e.set("vShapes",n);var i=e.get("delegate");i&&!i.destroyed&&(i.remove(),i.destroy())},t.prototype.destroy=function(){this.clear()},t}(cs),IBe=kBe,PBe=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),DBe=Zs.pointLineDistance,RBe={stroke:"#FA8C16",lineWidth:1},OBe=function(r){PBe(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{line:RBe,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},t.prototype.init=function(){},t.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},t.prototype.onDragStart=function(){this.initBoxLine()},t.prototype.onDrag=function(e){var n=e.item,i=n.get("delegateShape")||n,a=i.getBBox(),o=n.getModel(),s=o.x-a.x,l=o.y-a.y;this.show({x:a.minX+s,y:a.minY+l},{width:a.width,height:a.height})},t.prototype.onDragEnd=function(){this.destory()},t.prototype.initBoxLine=function(){var e=this._cfgs,n=e.horizontalLines,i=e.verticalLines,a=e.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(l){var u=l.getBBox(),c=l.get("id");a===!0||a==="horizontal"?(n[c+"tltr"]=[u.minX,u.minY,u.maxX,u.minY,l],n[c+"lcrc"]=[u.minX,u.centerY,u.maxX,u.centerY,l],n[c+"blbr"]=[u.minX,u.maxY,u.maxX,u.maxY,l]):a==="center"&&(n[c+"lcrc"]=[u.minX,u.centerY,u.maxX,u.centerY,l]),a===!0||a==="vertical"?(i[c+"tlbl"]=[u.minX,u.minY,u.minX,u.maxY,l],i[c+"tcbc"]=[u.centerX,u.minY,u.centerX,u.maxY,l],i[c+"trbr"]=[u.maxX,u.minY,u.maxX,u.maxY,l]):a==="center"&&(i[c+"tcbc"]=[u.centerX,u.minY,u.centerX,u.maxY,l])})},t.prototype.show=function(e,n){var i=$t({},e);return this.itemAlign(e,n,i),e},t.prototype.itemAlign=function(e,n,i){var a=this,o=this._cfgs,s=o.horizontalLines,l=o.verticalLines,u=o.tolerance,c={x:i.x+n.width/2,y:i.y},f={x:i.x+n.width/2,y:i.y+n.height/2},d={x:i.x+n.width/2,y:i.y+n.height},h={x:i.x,y:i.y+n.height/2},v={x:i.x+n.width,y:i.y+n.height/2},p=[],g=[],m=null;if(this.clearAlignLine(),G(s,function(b){b[4].isVisible&&(p.push(a.getLineDisObject(b,c)),p.push(a.getLineDisObject(b,f)),p.push(a.getLineDisObject(b,d)))}),G(l,function(b){b[4].isVisible&&(g.push(a.getLineDisObject(b,h)),g.push(a.getLineDisObject(b,f)),g.push(a.getLineDisObject(b,v)))}),p.sort(function(b,x){return b.dis-x.dis}),g.sort(function(b,x){return b.dis-x.dis}),p.length!==0&&p[0].dis<u){e.y=p[0].line[1]-p[0].point.y+i.y,m={type:"item",horizontals:[p[0]]};for(var y=1;y<3;y++)p[0].dis===p[y].dis&&m.horizontals.push(p[y])}if(g.length!==0&&g[0].dis<u){e.x=g[0].line[0]-g[0].point.x+i.x,m?m.verticals=[g[0]]:m={type:"item",verticals:[g[0]]};for(var y=1;y<3;y++)g[0].dis===g[y].dis&&m.verticals.push(g[y])}m&&(m.bbox=n,this.addAlignLine(m))},t.prototype.addAlignLine=function(e){var n=e.bbox,i=e.type,a=e.horizontals,o=e.verticals,s=this._cfgs,l=s.line,u=s.alignLines,c=this.get("graph"),f=c.get("group");i==="item"&&(a&&G(a,function(d){var h=d.line,v=d.point,p=(h[0]+h[2])/2,g,m;v.x<p?(g=v.x-n.width/2,m=Math.max(h[0],h[2])):(g=v.x+n.width/2,m=Math.min(h[0],h[2]));var y=$t({x1:g,y1:h[1],x2:m,y2:h[1]},l),b=f.addShape("line",{attrs:y,capture:!1});u.push(b)}),o&&G(o,function(d){var h=d.line,v=d.point,p=(h[1]+h[3])/2,g,m;v.y<p?(g=v.y-n.height/2,m=Math.max(h[1],h[3])):(g=v.y+n.height/2,m=Math.min(h[1],h[3]));var y=$t({x1:h[0],y1:g,x2:h[0],y2:m},l),b=f.addShape("line",{attrs:y,capture:!1});u.push(b)}))},t.prototype.getLineDisObject=function(e,n){return{line:e,point:n,dis:DBe(e,n)}},t.prototype.getContainer=function(){return this.get("container")},t.prototype.clearAlignLine=function(){var e=this._cfgs.alignLines;G(e,function(n){n.remove()}),e.length=0},t.prototype.destory=function(){var e=this._cfgs,n=e.horizontalLines,i=e.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var l=s.get("id");delete n[l+"tltr"],delete n[l+"lcrc"],delete n[l+"blbr"],delete i[l+"tlbl"],delete i[l+"tcbc"],delete i[l+"trbr"]}),this.clearAlignLine()},t}(cs),LBe=OBe,FBe=globalThis&&globalThis.__extends||function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},r(e,n)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ti=globalThis&&globalThis.__assign||function(){return Ti=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Ti.apply(this,arguments)},NBe=["click","mouseenter"],BBe=function(r){FBe(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},t.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var e=this.get("filter")||{},n=e.multiple;n&&e.trigger==="mouseenter"&&this.set("multiple",!1);var i=this.get("align");if(!i){var a=this.get("position").split("-");a.includes("left")&&(i="left"),a.includes("right")?i="right":i="center",this.set("align",i)}var o=this.get("graph"),s=o.get("container"),l=Vn(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(l),this.set("container",l);var u=this.render();Fr(l,this.getContainerPos(u)),this.bindEvents()},t.prototype.getContainerPos=function(e){e===void 0&&(e=[0,0]);var n=this,i=n.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),l=this.get("position").split("-"),u={top:0,right:1,bottom:2,left:3},c=0,f=0,d={left:(i.getWidth()-e[0])/2+c,top:(i.getHeight()-e[1])/2+f};return l.forEach(function(h){var v=s[u[h]],p=h;switch(h){case"top":v+=f;break;case"left":v+=c;break;case"bottom":v=i.getHeight()-e[1]-v+f,p="top";break;default:v=i.getWidth()-e[0]-v+c,p="left";break}d[p]=v}),d.top+=o+i.getContainer().offsetTop,d.left+=a+i.getContainer().offsetLeft,Object.keys(d).forEach(function(h){d[h]=d[h]+"px"}),d},t.prototype.bindEvents=function(){var e=this,n=e.get("filter");if(!(!n||!n.enable)){var i=n.trigger||"click";NBe.includes(i)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),i="click");var a=e.get("legendCanvas");i==="mouseenter"?(a.on("node-container:mouseenter",function(o){return e.filterData(o)}),a.on("node-container:mouseleave",function(o){e.clearFilter(),e.clearActiveLegend()})):(a.on("node-container:click",function(o){return e.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(e.clearFilter(),e.clearActiveLegend())}))}},t.prototype.changeData=function(e){this.set("data",e);var n=this.render();Fr(this.get("container"),this.getContainerPos(n))},t.prototype.activateLegend=function(e){var n=this.get("filter"),i=n==null?void 0:n.multiple;i||this.clearActiveLegend();var a=e.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(f){f.set("inactive",!0)}):this.clearActiveLegend();var o=(n==null?void 0:n.lengedStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},l=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(f){var d=f.get("children"),h=d[0],v=d[1];h.attr(Ti(Ti({},h.get("oriAttrs")),s)),v.attr(Ti(Ti({},v.get("oriAttrs")),l))});var u=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=u["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(f){var d=f.get("children"),h=d[0],v=d[1];h.attr(Ti(Ti({},h.get("oriAttrs")),u)),v.attr(Ti(Ti({},v.get("oriAttrs")),c))})},t.prototype.findLegendItemsByState=function(e,n,i){n===void 0&&(n="all"),i===void 0&&(i=!0);var a=this.get("legendCanvas").find(function(l){return l.get("name")==="root"}),o=a.find(function(l){return l.get("name")==="node-group"}),s=a.find(function(l){return l.get("name")==="edge-group"});return n==="node"?o.get("children").filter(function(l){return!!l.get(e)===i}):n==="edge"?s.get("children").filter(function(l){return!!l.get(e)===i}):o.get("children").filter(function(l){return!!l.get(e)===i}).concat(s.get("children").filter(function(l){return!!l.get(e)===i}))},t.prototype.clearActiveLegend=function(){var e=this.get("legendCanvas"),n=e.find(function(a){return a.get("name")==="root"}),i=[n.find(function(a){return a.get("name")==="node-group"}),n.find(function(a){return a.get("name")==="edge-group"})];i.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),l=s[0],u=s[1];l.attr(l.get("oriAttrs")),u.attr(u.get("oriAttrs"))})})},t.prototype.filterData=function(e){var n=this.get("filter"),i=n==null?void 0:n.filterFunctions;if(!(!n||!i)){var a=this.get("legendCanvas"),o=this.get("graph"),s=n.graphActiveState||"active",l=n.graphInactiveState||"inactive",u=n.multiple;this.clearFilter(),u||this.clearActiveLegend(),this.activateLegend(e.target);var c=a.find(function(m){return m.get("name")==="root"}),f=c.find(function(m){return m.get("name")==="node-group"}),d=c.find(function(m){return m.get("name")==="edge-group"}),h=f.get("children").filter(function(m){return m.get("active")}),v=d.get("children").filter(function(m){return m.get("active")}),p=0,g=["getNodes","getEdges"];g.forEach(function(m){o[m]().forEach(function(y){var b=!1,x=m==="getNodes"?h:v;x.forEach(function(w){var S=i[w.get("id")];b=b||S(y.getModel())}),b?(o.setItemState(y,l,!1),o.setItemState(y,s,!0),p++):(o.setItemState(y,s,!1),o.setItemState(y,l,!0))})}),p||g.forEach(function(m){o[m]().forEach(function(y){o.clearItemStates(y,[l])})})}},t.prototype.clearFilter=function(){var e=this.get("graph"),n=this.get("filter");if(!!n){var i=n.graphActiveState||"active",a=n.graphInactiveState||"inactive";e.getNodes().forEach(function(o){e.clearItemStates(o,[i,a])}),e.getEdges().forEach(function(o){e.clearItemStates(o,[i,a])})}},t.prototype.render=function(){var e=this;this.processData();var n=this.get("legendCanvas");if(!n){n=new Eu({container:this.get("container"),width:200,height:200});var i=n.addGroup({name:"root"});i.addGroup({name:"node-group"}),i.addGroup({name:"edge-group"}),this.set("legendCanvas",n)}var a=n.find(function(L){return L.get("name")==="root"}),o=a.find(function(L){return L.get("name")==="node-group"}),s=a.find(function(L){return L.get("name")==="edge-group"}),l=this.get("itemsData"),u=["nodes","edges"],c=[o,s];u.forEach(function(L,O){l[L].forEach(function(B){var U,W=c[O].addGroup({id:B.id,name:"node-container"}),X,ae=B.type,Z=e.getShapeSize(B),Y=Z.width,fe=Z.height,le=Z.r,ue=e.getStyle(L.substr(0,4),B);switch(B.type){case"circle":X={r:le,x:0,y:0};break;case"rect":X={width:Y,height:fe,x:-Y/2,y:-fe/2};break;case"ellipse":X={r1:Y,r2:fe,x:0,y:0};break;case"line":X={x1:-Y/2,y1:0,x2:Y/2,y2:0},ae="line";break;case"quadratic":X={path:[["M",-Y/2,0],["Q",0,Y/2,Y/2,0]]},ae="path";break;case"cubic":X={path:[["M",-Y/2,0],["C",-Y/6,Y/2,Y/6,-Y/2,Y/2,0]]},ae="path";break;default:X={r:le,x:0,y:0};break}var Ee=W.addShape(ae,{attrs:Ti(Ti({},X),ue),name:B.type+"-node-keyShape",oriAttrs:Ti({opacity:1},ue)});if(B.label){var De=Ee.getBBox(),je=((U=B.labelCfg)===null||U===void 0?void 0:U.style)||{},ke=Ti({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},je);W.addShape("text",{attrs:Ti({x:De.maxX+4,y:0,text:B.label},ke),className:"legend-label",name:B.type+"-node-text",oriAttrs:ke})}})});var f=this.get("padding"),d,h=a.find(function(L){return L.get("name")==="title-container"}),v={height:0,maxY:0,width:0};if(this.get("title")){h||(h=a.addGroup({name:"title-container"}));var p={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:f[0]},g=this.get("titleConfig")||{},m=Object.assign(p,g.style||{});d=h.addShape("text",{attrs:Ti({text:this.get("title")},m)}),v=h.getCanvasBBox(),h.setMatrix([1,0,0,0,1,0,g.offsetX,g.offsetY,1])}this.layoutItems();var y=a.getCanvasBBox(),b=o.getCanvasBBox(),x=b.minX<0?Math.abs(b.minX)+f[3]:f[3],w=v.maxY<b.minY?Math.abs(v.maxY-b.minY)+f[0]:v.maxY+f[0],S=[1,0,0,0,1,0,x,w,1];o.setMatrix(S),y=a.getCanvasBBox();var C=[y.minX+y.width+f[1],y.minY+y.height+f[2]];if(d){var g=Ti({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));v=h.getCanvasBBox();var _=h.getMatrix()||[1,0,0,0,1,0,0,0,1];g.position==="center"?_[6]=C[0]/2+g.offsetX:g.position==="right"?(_[6]=C[0]-f[3]+g.offsetX,d.attr({textAlign:"right"})):(_[6]=f[3]+g.offsetX,d.attr({textAlign:"left"})),h.setMatrix(_),v=h.getCanvasBBox(),x=b.minX<0?Math.abs(b.minX)+f[3]:f[3],w=b.minY<v.maxY?Math.abs(v.maxY-b.minY)+f[0]:v.maxY+f[0],S=[1,0,0,0,1,0,x,w,1],o.setMatrix(S);var T=[1,0,0,0,1,0,x,w,1];this.get("layout")==="vertical"?T[6]+=b.maxX+this.get("horiSep"):T[7]+=b.maxY+this.get("vertiSep"),s.setMatrix(T)}else{b=o.getCanvasBBox();var E=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?E[6]+=S[6]+b.maxX+this.get("horiSep"):E[7]+=S[7]+b.maxY+this.get("vertiSep"),s.setMatrix(E)}y=a.getCanvasBBox(),b=o.getCanvasBBox(),S=o.getMatrix()||[1,0,0,0,1,0,0,0,1];var M=s.getMatrix()||[1,0,0,0,1,0,0,0,1],k=s.getCanvasBBox();C=[Math.max(b.width+S[6],k.width+M[6])+f[1],Math.max(b.height+S[7],k.height+M[7])+f[2]],n.changeSize(C[0],C[1]);var P=this.get("containerStyle"),F=a.getMatrix()||[1,0,0,0,1,0,0,0,1],$=Zs.invertMatrix({x:0,y:0},F),R=a.addShape("rect",{attrs:Ti({x:$.x+(P.lineWidth||1),y:$.y+(P.lineWidth||1),width:C[0]-2*(P.lineWidth||1),height:C[1]-2*(P.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},P),name:"legend-back-rect",capture:!1});return R.toBack(),C},t.prototype.layoutItems=function(){var e=this.get("legendCanvas"),n=this.get("horiSep"),i=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],l=e.find(function(b){return b.get("name")==="root"}),u=l.find(function(b){return b.get("name")==="node-group"}),c=l.find(function(b){return b.get("name")==="edge-group"}),f={min:0,max:-1/0};u.get("children").forEach(function(b,x){x===0&&(f.min=s[0]);var w=b.get("children")[0],S=b.getCanvasBBox(),C=w.getBBox(),_=C.width,T=C.height,E=0,M=0;a==="vertical"?(E=s[1],M=s[0]+_/2,s[0]=M+S.height+i,S.maxX+E+_/2):(E=s[0]+_/2,M=s[1],s[0]=E+S.width+n,S.maxY+M+T/2),s[0]>f.max&&(f.max=s[0]),b.setMatrix([1,0,0,0,1,0,E,M,1])});var d=f.max-f.min,h={min:0,max:-1/0},v=u.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?v.maxX+n:v.maxY+i,c.get("children").forEach(function(b,x){x===0&&(h.min=s[0]);var w=b.get("children")[0],S=b.getCanvasBBox(),C=w.getBBox(),_=C.width,T=C.height,E=0,M=0;a==="vertical"?(E=s[1],M=s[0],s[0]=M+S.height+i,b.setMatrix([1,0,0,0,1,0,0,M+T/2,1])):(E=s[0],M=s[1],s[0]=E+S.width+n,b.setMatrix([1,0,0,0,1,0,E+_/2,0,1])),s[0]>h.max&&(h.max=s[0])});var p=h.max-h.min;if(o&&o!==""&&o!=="left"){var g=d-p,m=o==="center"?Math.abs(g)/2:Math.abs(g),y=g<0?u:c;y.get("children").forEach(function(b){var x=b.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?x[7]+=m:x[6]+=m,b.setMatrix(x)})}},t.prototype.processData=function(){var e=this.get("data"),n={nodes:[],edges:[]};e.nodes&&(e.nodes.sort(function(i,a){return i.order-a.order}),e.nodes.forEach(function(i){var a,o,s,l,u,c=i.size||[((a=i.style)===null||a===void 0?void 0:a.width)||((o=i.style)===null||o===void 0?void 0:o.r)||8,((s=i.style)===null||s===void 0?void 0:s.height)||((l=i.style)===null||l===void 0?void 0:l.r)||8],f=((u=i.labelCfg)===null||u===void 0?void 0:u.style)||{};n.nodes.push({id:i.id||Ms(),type:i.type||"circle",style:Ti({},i.style),order:i.order,label:i.label,itemType:"node",size:c,labelCfg:{position:"right",style:Ti({fontFamily:"Arial"},f)}})})),e.edges&&(e.edges.sort(function(i,a){return i.order-a.order}),e.edges.forEach(function(i){var a,o,s=i.type||"line";i.type==="cubic-horizontal"&&(s="cubic");var l=((a=i.labelCfg)===null||a===void 0?void 0:a.style)||{},u=i.size||[((o=i.style)===null||o===void 0?void 0:o.width)||8,1];n.edges.push({id:i.id||Ms(),type:s,size:u,style:Ti({lineWidth:qe(u)?u[1]:1},i.style),order:i.order,label:i.label,itemType:"edge",labelCfg:{position:"right",style:Ti({fontFamily:"Arial"},l)}})})),this.set("itemsData",n)},t.prototype.getContainer=function(){return this.get("container")},t.prototype.formatArray=function(e){var n=this.get(e);if(Rt(n))this.set(e,[n,n,n,n]);else if(qe(n))switch(n.length){case 0:this.set(e,[0,0,0,0]);break;case 1:this.set(e,[n[0],n[0],n[0],n[0]]);break;case 2:this.set(e,[n[0],n[1],n[0],n[1]]);break;case 3:this.set(e,[n[0],n[1],n[2],n[1]]);break}return this.get(e)},t.prototype.getShapeSize=function(e){var n,i,a;return e.size&&(qe(e.size)?(n=e.size[0],i=e.size[1]||e.size[0],a=e.size[0]/2):Rt(e.size)&&(n=e.size,i=e.size,a=e.size/2)),e.style&&(e.style.width&&(n=e.style.width),e.style.height&&(i=e.style.height),e.style.r&&(a=e.style.r)),a||(a=5),n||(n=a),i||(i=a),{width:n,height:i,r:a}},t.prototype.getStyle=function(e,n){var i=e==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return Ti(Ti({},i),n.style||{})},t.prototype.destroy=function(){var e=this.get("graph"),n=e.get("container"),i=this.get("container");n.removeChild(i)},t}(cs),$Be=BBe,zBe={PluginBase:cs,Menu:mNe,Grid:fNe,Minimap:ENe,Bundling:MNe,ToolBar:LNe,Tooltip:BNe,Fisheye:PNe,TimeBar:wBe,ImageMinimap:TBe,EdgeFilterLens:IBe,SnapLine:LBe,Legend:$Be},wa=zBe;Cu("circle",{options:{size:Gt.defaultNode.size,style:{x:0,y:0,stroke:Gt.defaultNode.style.stroke,fill:Gt.defaultNode.style.fill,lineWidth:Gt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Gt.nodeLabel.style.fill,fontSize:Gt.nodeLabel.style.fontSize,fontFamily:Gt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Gt.defaultNode.linkPoints.size,lineWidth:Gt.defaultNode.linkPoints.lineWidth,fill:Gt.defaultNode.linkPoints.fill,stroke:Gt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:A({},Gt.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(t),o=Mt({},i,t.icon),s=this.type+"-keyShape",l=e.addShape("circle",{attrs:a,className:s,name:s,draggable:!0});e.shapeMap[s]=l;var u=o.width,c=o.height,f=o.show,d=o.text;if(f){var h=this.type+"-icon";d?e.shapeMap[h]=e.addShape("text",{attrs:A({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:h,name:h,draggable:!0}):e.shapeMap[h]=e.addShape("image",{attrs:A({x:-u/2,y:-c/2},o),className:h,name:h,draggable:!0})}return this.drawLinkPoints(t,e),l},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints;if(!!n){var i=n||{},a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=Lr(i,["top","left","right","bottom","size","r"]),d=this.getSize(t),h=d[0]/2;if(o){var v="link-point-left";e.shapeMap[v]=e.addShape("circle",{attrs:A(A({},f),{x:-h,y:0,r:u/2||c||5}),className:v,name:v,isAnchorPoint:!0})}if(s){var p="link-point-right";e.shapeMap[p]=e.addShape("circle",{attrs:A(A({},f),{x:h,y:0,r:u/2||c||5}),className:p,name:p,isAnchorPoint:!0})}if(a){var g="link-point-top";e.shapeMap[g]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:-h,r:u/2||c||5}),className:g,name:g,isAnchorPoint:!0})}if(l){var m="link-point-bottom";e.shapeMap[m]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:h,r:u/2||c||5}),className:m,name:m,isAnchorPoint:!0})}}},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},i=Mt({},e,n),a=this.getSize(t),o=a[0]/2,s=A({x:0,y:0,r:o},i);return s},update:function(t,e,n){var i=e.getContainer(),a=this.getSize(t),o=A({},t.style);t.style.stroke===void 0&&t.color&&(o.stroke=t.color),t.style.r===void 0&&!isNaN(a[0])&&(o.r=a[0]/2),this.updateShape(t,e,o,!0,n),this.updateLinkPoints(t,i)}},"single-node");Cu("rect",{options:{size:[100,30],style:{radius:0,stroke:Gt.defaultNode.style.stroke,fill:Gt.defaultNode.style.fill,lineWidth:Gt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Gt.nodeLabel.style.fill,fontSize:Gt.nodeLabel.style.fontSize,fontFamily:Gt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Gt.defaultNode.linkPoints.size,lineWidth:Gt.defaultNode.linkPoints.lineWidth,fill:Gt.defaultNode.linkPoints.fill,stroke:Gt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:A({},Gt.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t),i=e.addShape("rect",{attrs:n,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return e.shapeMap[this.type+"-keyShape"]=i,this.drawLinkPoints(t,e),i},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=Lr(i,["top","left","right","bottom","size","r"]),d=this.getSize(t),h=d[0],v=d[1];o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:A(A({},f),{x:-h/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:A(A({},f),{x:h/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:-v/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:v/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},i=$t({},e,n),a=this.getSize(t),o=i.width||a[0],s=i.height||a[1],l=A({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(t,e,n){var i=e.getContainer(),a=this.getOptions({}).style,o=this.getSize(t),s=e.get("keyShape");t.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var l={stroke:t.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},u=$t({},a,s.attr(),l);u=$t(u,t.style),this.updateShape(t,e,u,!1,n),this.updateLinkPoints(t,i)}},"single-node");Cu("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:Gt.defaultNode.style.stroke,fill:Gt.defaultNode.style.fill,lineWidth:Gt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Gt.nodeLabel.style.fill,fontSize:Gt.nodeLabel.style.fontSize,fontFamily:Gt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Gt.defaultNode.linkPoints.size,lineWidth:Gt.defaultNode.linkPoints.lineWidth,fill:Gt.defaultNode.linkPoints.fill,stroke:Gt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:A({},Gt.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(t),o=e.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});e.shapeMap["ellipse-keyShape"]=o;var s=i.width,l=i.height,u=i.show,c=i.text;return u&&(c?e.shapeMap[this.type+"-icon"]=e.addShape("text",{attrs:A({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.shapeMap[this.type+"-icon"]=e.addShape("image",{attrs:A({x:-s/2,y:-l/2},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=Lr(i,["top","left","right","bottom","size","r"]),d=this.getSize(t),h=d[0]/2,v=d[1]/2;o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:A(A({},f),{x:-h,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:A(A({},f),{x:h,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:-v,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:v,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},i=$t({},e,n),a=this.getSize(t),o=a[0]/2,s=a[1]/2,l=A({x:0,y:0,rx:o,ry:s},i);return l},update:function(t,e,n){var i=e.getContainer(),a=this.getOptions({}).style,o=this.getSize(t),s={stroke:t.color,rx:o[0]/2,ry:o[1]/2},l=e.get("keyShape"),u=$t({},a,l.attr(),s);u=$t(u,t.style),this.updateShape(t,e,u,!0,n),this.updateLinkPoints(t,i)}},"single-node");Cu("diamond",{options:{size:[80,80],style:{stroke:Gt.defaultNode.style.stroke,fill:Gt.defaultNode.style.fill,lineWidth:Gt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Gt.nodeLabel.style.fill,fontSize:Gt.nodeLabel.style.fontSize,fontFamily:Gt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Gt.defaultNode.linkPoints.size,lineWidth:Gt.defaultNode.linkPoints.lineWidth,fill:Gt.defaultNode.linkPoints.fill,stroke:Gt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:A({},Gt.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(t),o=e.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});e.shapeMap[this.type+"-keyShape"]=o;var s=i.width,l=i.height,u=i.show,c=i.text;return u&&(c?e.shapeMap[this.type+"-icon"]=e.addShape("text",{attrs:A({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.shapeMap[this.type+"-icon"]=e.addShape("image",{attrs:A({x:-s/2,y:-l/2},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=Lr(i,["top","left","right","bottom","size","r"]),d=this.getSize(t),h=d[0],v=d[1];o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:A(A({},f),{x:-h/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:A(A({},f),{x:h/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:-v/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:v/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(t){var e=this.getSize(t),n=e[0],i=e[1],a=[["M",0,-i/2],["L",n/2,0],["L",0,i/2],["L",-n/2,0],["Z"]];return a},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},i=$t({},e,n),a=this.getPath(t),o=A({path:a},i);return o},update:function(t,e,n){var i=e.getContainer(),a=this.getOptions({}).style,o=this.getPath(t),s={stroke:t.color,path:o},l=e.get("keyShape"),u=$t({},a,l.attr(),s);u=$t(u,t.style),this.updateShape(t,e,u,!0,n),this.updateLinkPoints(t,i)}},"single-node");Cu("triangle",{options:{size:40,direction:"up",style:{stroke:Gt.defaultNode.style.stroke,fill:Gt.defaultNode.style.fill,lineWidth:Gt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Gt.nodeLabel.style.fill,fontSize:Gt.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Gt.defaultNode.linkPoints.size,lineWidth:Gt.defaultNode.linkPoints.lineWidth,fill:Gt.defaultNode.linkPoints.fill,stroke:Gt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:A({},Gt.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(t,e){var n=this.mergeStyle||this.getOptions(t),i=n.icon,a=i===void 0?{}:i,o=n.direction,s=this.getShapeStyle(t),l=t.direction||o,u=e.addShape("path",{attrs:s,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});e.shapeMap[this.type+"-keyShape"]=u;var c=a.width,f=a.height,d=a.show,h=a.offset,v=a.text;if(d)if(v)e.shapeMap[this.type+"-icon"]=e.addShape("text",{attrs:A({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});else{var p=-c/2,g=-f/2;(l==="up"||l==="down")&&(g+=h),(l==="left"||l==="right")&&(p+=h),e.shapeMap[this.type+"-icon"]=e.addShape("image",{attrs:A({x:p,y:g},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})}return this.drawLinkPoints(t,e),u},drawLinkPoints:function(t,e){var n=this.mergeStyle||this.getOptions(t),i=n.linkPoints,a=i===void 0?{}:i,o=n.direction,s=t.direction||o,l=a.top,u=a.left,c=a.right,f=a.bottom,d=a.size,h=a.r,v=Lr(a,["top","left","right","bottom","size","r"]),p=this.getSize(t),g=p[0];if(u){var m=null,y=g*Math.sin(1/3*Math.PI),b=g*Math.sin(1/3*Math.PI);s==="up"?m=[-b,y]:s==="down"?m=[-b,-y]:s==="left"&&(m=[-b,b-y]),m&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:A(A({},v),{x:m[0],y:m[1],r:d/2||h||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var x=null,y=g*Math.sin(1/3*Math.PI),b=g*Math.sin(1/3*Math.PI);s==="up"?x=[b,y]:s==="down"?x=[b,-y]:s==="right"&&(x=[b,b-y]),x&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:A(A({},v),{x:x[0],y:x[1],r:d/2||h||5}),className:"link-point-right",name:"link-point-right"}))}if(l){var w=null,y=g*Math.sin(1/3*Math.PI),b=g*Math.sin(1/3*Math.PI);s==="up"?w=[b-y,-y]:s==="left"?w=[b,-y]:s==="right"&&(w=[-b,-y]),w&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:A(A({},v),{x:w[0],y:w[1],r:d/2||h||5}),className:"link-point-top",name:"link-point-top"}))}if(f){var S=null,y=g*Math.sin(1/3*Math.PI),b=g*Math.sin(1/3*Math.PI);s==="down"?S=[-b+y,y]:s==="left"?S=[b,y]:s==="right"&&(S=[-b,y]),S&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:A(A({},v),{x:S[0],y:S[1],r:d/2||h||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(t){var e=(this.mergeStyle||this.getOptions(t)).direction,n=t.direction||e,i=this.getSize(t),a=i[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),l=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return n==="down"?l=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:n==="left"?l=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:n==="right"&&(l=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),l},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},i=$t({},e,n),a=this.getPath(t),o=A({path:a},i);return o},update:function(t,e,n){var i=e.getContainer(),a=this.getOptions({}).style,o=this.getPath(t),s={stroke:t.color,path:o},l=e.get("keyShape"),u=$t({},a,l.attr(),s);u=$t(u,t.style),this.updateShape(t,e,u,!0,n),this.updateLinkPoints(t,i)},updateLinkPoints:function(t,e){var n=this.getOptions({}),i=n.linkPoints,a=n.direction,o=t.direction||a,s=e.shapeMap["link-point-left"]||e.find(function(R){return R.get("className")==="link-point-left"}),l=e.shapeMap["link-point-right"]||e.find(function(R){return R.get("className")==="link-point-right"}),u=e.shapeMap["link-point-top"]||e.find(function(R){return R.get("className")==="link-point-top"}),c=e.shapeMap["link-point-bottom"]||e.find(function(R){return R.get("className")==="link-point-bottom"}),f=i,d=s||l||u||c;d&&(f=d.attr());var h=$t({},f,t.linkPoints),v=h.fill,p=h.stroke,g=h.lineWidth,m=h.size/2;m||(m=h.r);var y=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},b=y.left,x=y.right,w=y.top,S=y.bottom,C=this.getSize(t),_=C[0],T={r:m,fill:v,stroke:p,lineWidth:g},E=null,M=_*Math.sin(1/3*Math.PI),k=_*Math.sin(1/3*Math.PI);o==="up"?E=[-k,M]:o==="down"?E=[-k,-M]:o==="left"&&(E=[-k,k-M]),E&&(s?!b&&b!==void 0?(s.remove(),delete e.shapeMap["link-point-left"]):s.attr(A(A({},T),{x:E[0],y:E[1]})):b&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:A(A({},T),{x:E[0],y:E[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var P=null;o==="up"?P=[k,M]:o==="down"?P=[k,-M]:o==="right"&&(P=[k,k-M]),P&&(l?!x&&x!==void 0?(l.remove(),delete e.shapeMap["link-point-right"]):l.attr(A(A({},T),{x:P[0],y:P[1]})):x&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:A(A({},T),{x:P[0],y:P[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var F=null;o==="up"?F=[k-M,-M]:o==="left"?F=[k,-M]:o==="right"&&(F=[-k,-M]),F&&(u?!w&&w!==void 0?(u.remove(),delete e.shapeMap["link-point-top"]):u.attr(A(A({},T),{x:F[0],y:F[1]})):w&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:A(A({},T),{x:F[0],y:F[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var $=null;o==="down"?$=[-k+M,M]:o==="left"?$=[k,M]:o==="right"&&($=[-k,M]),$&&(c?!S&&S!==void 0?(c.remove(),delete e.shapeMap["link-point-bottom"]):c.attr(A(A({},T),{x:$[0],y:$[1]})):S&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:A(A({},T),{x:$[0],y:$[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node");Cu("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:Gt.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:Gt.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:Gt.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).preRect,i=n===void 0?{}:n,a=this.getShapeStyle(t),o=this.getSize(t),s=o[0],l=o[1],u=e.addShape("rect",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});e.shapeMap[this.type+"-keyShape"]=u;var c=i.show,f=Lr(i,["show"]);return c&&(e.shapeMap["pre-rect"]=e.addShape("rect",{attrs:A({x:-s/2,y:-l/2,height:l},f),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(t,e),this.drawStateIcon(t,e),this.drawLinkPoints(t,e),u},drawLogoIcon:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).logoIcon,i=n===void 0?{}:n,a=this.getSize(t),o=a[0];if(i.show){var s=i.width,l=i.height,u=i.x,c=i.y,f=i.offset,d=i.text,h=Lr(i,["width","height","x","y","offset","text"]);d?e.shapeMap["rect-logo-icon"]=e.addShape("text",{attrs:A({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},h),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):e.shapeMap["rect-logo-icon"]=e.addShape("image",{attrs:A(A({},h),{x:u||-o/2+s+f,y:c||-l/2,width:s,height:l}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).stateIcon,i=n===void 0?{}:n,a=this.getSize(t),o=a[0];if(i.show){var s=i.width,l=i.height,u=i.x,c=i.y,f=i.offset,d=i.text,h=Lr(i,["width","height","x","y","offset","text"]);d?e.shapeMap["rect-state-icon"]=e.addShape("text",{attrs:A({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},h),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):e.shapeMap["rect-state-icon"]=e.addShape("image",{attrs:A(A({},h),{x:u||o/2-s+f,y:c||-l/2,width:s,height:l}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.bottom,u=i.size,c=i.r,f=Lr(i,["top","left","right","bottom","size","r"]),d=this.getSize(t),h=d[0],v=d[1];o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:A(A({},f),{x:-h/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:A(A({},f),{x:h/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:-v/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),l&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:A(A({},f),{x:0,y:v/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(t,e){var n=this.getOptions(t),i=n.labelCfg,a=i===void 0?{}:i,o=n.logoIcon,s=o===void 0?{}:o,l=n.descriptionCfg,u=l===void 0?{}:l,c=this.getSize(t),f=c[0],d=null,h=s.show,v=s.width,p=-f/2+a.offset;h&&(p=-f/2+v+a.offset);var g=a.style,m=u.style,y=u.paddingTop;return rt(t.description)?(d=e.addShape("text",{attrs:A(A({},g),{x:p,y:-5,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0}),e.shapeMap["text-shape"]=d,e.shapeMap["rect-description"]=e.addShape("text",{attrs:A(A({},m),{x:p,y:17+(y||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0})):(d=e.addShape("text",{attrs:A(A({},g),{x:p,y:7,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0}),e.shapeMap["text-shape"]=d),d},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},i=$t({},e,n),a=this.getSize(t),o=i.width||a[0],s=i.height||a[1],l=A({x:-o/2,y:-s/2,width:o,height:s},i);return l},update:function(t,e){var n=this.mergeStyle||this.getOptions(t),i=n.style,a=i===void 0?{}:i,o=n.labelCfg,s=o===void 0?{}:o,l=n.descriptionCfg,u=l===void 0?{}:l,c=this.getSize(t),f=c[0],d=c[1],h=e.get("keyShape");h.attr(A(A({},a),{x:-f/2,y:-d/2,width:f,height:d}));var v=e.getContainer(),p=v.shapeMap["rect-logo-icon"]||v.find(function(fe){return fe.get("className")==="rect-logo-icon"}),g=p?p.attr():{},m=$t({},g,t.logoIcon),y=m.width;y===void 0&&(y=this.options.logoIcon.width);var b=t.logoIcon?t.logoIcon.show:void 0,x=s.offset,w=-f/2+y+x;!b&&b!==void 0&&(w=-f/2+x);var S=v.shapeMap["node-label"]||v.find(function(fe){return fe.get("className")==="node-label"}),C=v.shapeMap["rect-description"]||v.find(function(fe){return fe.get("className")==="rect-description"});if(t.label)if(!S)v.shapeMap["node-label"]=v.addShape("text",{attrs:A(A({},s.style),{x:w,y:t.description?-5:7,text:t.label}),className:"node-label",name:"node-label",draggable:!0});else{var _=t.labelCfg?t.labelCfg.style:{},T=$t({},S.attr(),_);t.label&&(T.text=t.label),T.x=w,rt(t.description)&&(T.y=-5),C&&(C.resetMatrix(),C.attr({x:w})),S.resetMatrix(),S.attr(T)}if(rt(t.description)){var E=u.paddingTop;if(!C)v.shapeMap["rect-description"]=v.addShape("text",{attrs:A(A({},u.style),{x:w,y:17+(E||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0});else{var _=t.descriptionCfg?t.descriptionCfg.style:{},M=$t({},C.attr(),_);rt(t.description)&&(M.text=t.description),M.x=w,C.resetMatrix(),C.attr(A(A({},M),{y:17+(E||0)}))}}var k=v.shapeMap["pre-rect"]||v.find(function(fe){return fe.get("className")==="pre-rect"});if(k&&!k.destroyed){var P=$t({},k.attr(),t.preRect);k.attr(A(A({},P),{x:-f/2,y:-d/2,height:d}))}if(p&&!p.destroyed)if(!b&&b!==void 0)p.remove(),delete v.shapeMap["pre-rect"];else{var F=m.width,$=m.height,R=m.x,L=m.y,O=m.offset,B=Lr(m,["width","height","x","y","offset"]);p.attr(A(A({},B),{x:R||-f/2+F+O,y:L||-$/2,width:F,height:$}))}else b&&this.drawLogoIcon(t,v);var U=v.shapeMap["rect-state-icon"]||v.find(function(fe){return fe.get("className")==="rect-state-icon"}),W=U?U.attr():{},X=$t({},W,t.stateIcon);if(U){!X.show&&X.show!==void 0&&(U.remove(),delete v.shapeMap["rect-state-icon"]);var ae=X.width,$=X.height,R=X.x,L=X.y,Z=X.offset,Y=Lr(X,["width","height","x","y","offset"]);U.attr(A(A({},Y),{x:R||f/2-ae+Z,y:L||-$/2,width:ae,height:$}))}else X.show&&this.drawStateIcon(t,v);this.updateLinkPoints(t,v)}},"single-node");Cu("star",{options:{size:60,style:{stroke:Gt.defaultNode.style.stroke,fill:Gt.defaultNode.style.fill,lineWidth:Gt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Gt.nodeLabel.style.fill,fontSize:Gt.nodeLabel.style.fontSize,fontFamily:Gt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Gt.defaultNode.linkPoints.size,lineWidth:Gt.defaultNode.linkPoints.lineWidth,fill:Gt.defaultNode.linkPoints.fill,stroke:Gt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:A({},Gt.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(t),o=e.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});e.shapeMap[this.type+"-keyShape"]=o;var s=i.width,l=i.height,u=i.show,c=i.text;return u&&(c?e.shapeMap[this.type+"-icon"]=e.addShape("text",{attrs:A({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.shapeMap[this.type+"-icon"]=e.addShape("image",{attrs:A({x:-s/2,y:-l/2},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,l=i.leftBottom,u=i.rightBottom,c=i.size,f=i.r,d=Lr(i,["top","left","right","leftBottom","rightBottom","size","r"]),h=this.getSize(t),v=h[0];if(s){var p=Math.cos((18+72*0)/180*Math.PI)*v,g=Math.sin((18+72*0)/180*Math.PI)*v;e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:A(A({},d),{x:p,y:-g,r:c/2||f||5}),className:"link-point-right",name:"link-point-right"})}if(a){var p=Math.cos((18+72*1)/180*Math.PI)*v,g=Math.sin((18+72*1)/180*Math.PI)*v;e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:A(A({},d),{x:p,y:-g,r:c/2||f||5}),className:"link-point-top",name:"link-point-top"})}if(o){var p=Math.cos((18+72*2)/180*Math.PI)*v,g=Math.sin((18+72*2)/180*Math.PI)*v;e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:A(A({},d),{x:p,y:-g,r:c/2||f||5}),className:"link-point-left",name:"link-point-left"})}if(l){var p=Math.cos((18+72*3)/180*Math.PI)*v,g=Math.sin((18+72*3)/180*Math.PI)*v;e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:A(A({},d),{x:p,y:-g,r:c/2||f||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(u){var p=Math.cos((18+72*4)/180*Math.PI)*v,g=Math.sin((18+72*4)/180*Math.PI)*v;e.shapeMap["link-point-right-bottom"]=e.addShape("circle",{attrs:A(A({},d),{x:p,y:-g,r:c/2||f||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(t){for(var e=this.getSize(t),n=e[0],i=n*3/8,a=t.innerR||i,o=[],s=0;s<5;s++){var l=Math.cos((18+72*s)/180*Math.PI)*n,u=Math.sin((18+72*s)/180*Math.PI)*n,c=Math.cos((54+72*s)/180*Math.PI)*a,f=Math.sin((54+72*s)/180*Math.PI)*a;s===0?o.push(["M",l,-u]):o.push(["L",l,-u]),o.push(["L",c,-f])}return o.push(["Z"]),o},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},i=$t({},e,n),a=this.getPath(t),o=A({path:a},i);return o},update:function(t,e,n){var i=e.getContainer(),a=this.getOptions({}).style,o=this.getPath(t),s={stroke:t.color,path:o},l=e.get("keyShape"),u=$t({},a,l.attr(),s);u=$t(u,t.style),this.updateShape(t,e,u,!0,n),this.updateLinkPoints(t,i)},updateLinkPoints:function(t,e){var n=this.getOptions({}).linkPoints,i=e.shapeMap["link-point-left"]||e.find(function(M){return M.get("className")==="link-point-left"}),a=e.shapeMap["link-point-right"]||e.find(function(M){return M.get("className")==="link-point-right"}),o=e.shapeMap["link-point-top"]||e.find(function(M){return M.get("className")==="link-point-top"}),s=e.shapeMap["link-point-left-bottom"]||e.find(function(M){return M.get("className")==="link-point-left-bottom"}),l=e.shapeMap["link-point-left-bottom"]||e.find(function(M){return M.get("className")==="link-point-right-bottom"}),u=n,c=i||a||o||s||l;c&&(u=c.attr());var f=$t({},u,t.linkPoints),d=f.fill,h=f.stroke,v=f.lineWidth,p=f.size/2;p||(p=f.r);var g=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},m=g.left,y=g.right,b=g.top,x=g.leftBottom,w=g.rightBottom,S=this.getSize(t),C=S[0],_={r:p,fill:d,stroke:h,lineWidth:v},T=Math.cos((18+72*0)/180*Math.PI)*C,E=Math.sin((18+72*0)/180*Math.PI)*C;a?!y&&y!==void 0?(a.remove(),delete e.shapeMap["link-point-right"]):a.attr(A(A({},_),{x:T,y:-E})):y&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:A(A({},_),{x:T,y:-E}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),T=Math.cos((18+72*1)/180*Math.PI)*C,E=Math.sin((18+72*1)/180*Math.PI)*C,o?!b&&b!==void 0?(o.remove(),delete e.shapeMap["link-point-top"]):o.attr(A(A({},_),{x:T,y:-E})):b&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:A(A({},_),{x:T,y:-E}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),T=Math.cos((18+72*2)/180*Math.PI)*C,E=Math.sin((18+72*2)/180*Math.PI)*C,i?!m&&m!==void 0?(i.remove(),delete e.shapeMap["link-point-left"]):i.attr(A(A({},_),{x:T,y:-E})):m&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:A(A({},_),{x:T,y:-E}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),T=Math.cos((18+72*3)/180*Math.PI)*C,E=Math.sin((18+72*3)/180*Math.PI)*C,s?!x&&x!==void 0?(s.remove(),delete e.shapeMap["link-point-left-bottom"]):s.attr(A(A({},_),{x:T,y:-E})):x&&(e.shapeMap["link-point-left-bottom"]=e.addShape("circle",{attrs:A(A({},_),{x:T,y:-E}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),T=Math.cos((18+72*4)/180*Math.PI)*C,E=Math.sin((18+72*4)/180*Math.PI)*C,l?!w&&w!==void 0?(s.remove(),delete e.shapeMap["link-point-right-bottom"]):l.attr(A(A({},_),{x:T,y:-E})):w&&(e.shapeMap["link-point-right-bottom"]=e.addShape("circle",{attrs:A(A({},_),{x:T,y:-E}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var Zy=Zs.defaultSubjectColors;Cu("donut",{options:{size:Gt.defaultNode.size,style:{x:0,y:0,stroke:Gt.defaultNode.style.stroke,fill:Gt.defaultNode.style.fill,lineWidth:Gt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Gt.nodeLabel.style.fill,fontSize:Gt.nodeLabel.style.fontSize,fontFamily:Gt.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Gt.defaultNode.linkPoints.size,lineWidth:Gt.defaultNode.linkPoints.lineWidth,fill:Gt.defaultNode.linkPoints.fill,stroke:Gt.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:A({},Gt.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,i=n===void 0?{}:n,a=this.getShapeStyle(t),o=Mt({},i,t.icon),s=e.addShape("circle",{attrs:a,className:this.type+"-keyShape",draggable:!0,name:this.type+"-keyShape"});e.shapeMap[this.type+"-keyShape"]=s;var l=o.width,u=o.height,c=o.show,f=o.text;c&&(f?e.shapeMap[this.type+"-icon"]=e.addShape("text",{attrs:A({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.shapeMap[this.type+"-icon"]=e.addShape("image",{attrs:A({x:-l/2,y:-u/2},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}));var d=s.attr("r"),h=.6*d,v=(d+h)/2,p=t,g=p.donutAttrs,m=g===void 0?{}:g,y=p.donutColorMap,b=y===void 0?{}:y,x=Object.keys(m).length;if(m&&x>1){var w=[],S=0;if(Object.keys(m).forEach(function(E){var M=m[E]||0;!Rt(M)||(w.push({key:E,value:M,color:b[E]}),S+=M)}),S){var C=d-h;if(x===1){e.shapeMap["fan-shape-0"]=e.addShape("circle",{attrs:{r:v,x:0,y:0,stroke:w[0].color||Zy[0],lineWidth:C},name:"fan-shape-0"});return}var _=[v,0],T=0;w.forEach(function(E,M){var k=E.value/S;if(!(k<.001)){if(k>.999&&(k=1),k===1){e.shapeMap["fan-shape-"+M]=e.addShape("circle",{attrs:{r:v,x:0,y:0,stroke:E.color||Zy[M%Zy.length],lineWidth:C},name:"fan-shape-"+M});return}E.percent=k,E.angle=k*Math.PI*2,E.beginAgnle=T,T+=E.angle,E.endAngle=T,E.arcBegin=_,E.arcEnd=[v*Math.cos(E.endAngle),-v*Math.sin(E.endAngle)];var P=E.angle>Math.PI?1:0,F=[["M",E.arcBegin[0],E.arcBegin[1]],["A",v,v,0,P,0,E.arcEnd[0],E.arcEnd[1]],["L",E.arcEnd[0],E.arcEnd[1]]];e.shapeMap["fan-shape-"+M]=e.addShape("path",{attrs:{path:F,lineWidth:C,stroke:E.color||Zy[M%Zy.length]},name:"fan-shape-"+M}),_=E.arcEnd}})}}return this.drawLinkPoints(t,e),s},update:void 0},"circle");var AS=function(t){var e=t.x,n=t.y;return{x:e,y:n,centerX:e,centerY:n,minX:e,minY:n,maxX:e,maxY:n,height:0,width:0}},GBe=function(t){t===void 0&&(t=[]);var e=[],n=[];t.forEach(function(l){e.push(l.x),n.push(l.y)});var i=Math.min.apply(Math,e),a=Math.max.apply(Math,e),o=Math.min.apply(Math,n),s=Math.max.apply(Math,n);return{centerX:(i+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:i,minY:o,height:s-o,width:a-i}},Qk=function(t){for(var e=[],n={},i=t.length,a=i-1;a>=0;a--){var o=t[a];o.id=o.x+"|||"+o.y,n[o.id]=o,e.push(o)}return e},mj=function(t){return Qk(t)},MS=function(t,e){return t.width||t.height?{centerX:t.centerX,centerY:t.centerY,minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e,height:t.height+2*e,width:t.width+2*e}:t},UBe=function(t,e){var n=Math.abs(t.x-e.centerX),i=Math.abs(t.y-e.centerY);return n===0&&i===0?0:n/e.width>i/e.height},Jk=function(t,e,n){var i=UBe(e,t);if(i===0){var a=t.centerX,o=t.centerY;return n.y<e.y?o=t.minY:n.x>e.x?a=t.maxX:n.x<e.x?a=t.minX:n.x===e.x&&(o=t.maxY),{x:a,y:o}}return i?{x:e.x>t.centerX?t.maxX:t.minX,y:e.y}:{x:e.x,y:e.y>t.centerY?t.maxY:t.minY}},yj=function(t,e){var n=Math.min(t.minX,e.minX),i=Math.min(t.minY,e.minY),a=Math.max(t.maxX,e.maxX),o=Math.max(t.maxY,e.maxY);return{centerX:(n+a)/2,centerY:(i+o)/2,minX:n,minY:i,maxX:a,maxY:o,height:o-i,width:a-n}},eI=function(t){return[{x:t.minX,y:t.minY},{x:t.maxX,y:t.minY},{x:t.maxX,y:t.maxY},{x:t.minX,y:t.maxY}]},kS=function(t,e){var n=t.x,i=t.y;return n<e.minX||n>e.maxX||i<e.minY||i>e.maxY},VBe=function(t,e){return e<t.minX||e>t.maxX?[]:[{x:e,y:t.minY},{x:e,y:t.maxY}]},HBe=function(t,e){return e<t.minY||e>t.maxY?[]:[{x:t.minX,y:e},{x:t.maxX,y:e}]},WBe=function(t,e){return VBe(t,e.x).concat(HBe(t,e.y))},Qy=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},jBe=function(t,e){var n=-2,i=0;return e.forEach(function(a){a&&(t.x===a.x&&(i+=n),t.y===a.y&&(i+=n))}),i},bj=function(t,e,n,i,a){return Qy(t,e)+Qy(t,n)+jBe(t,[e,n,i,a])},YBe=function r(t,e,n,i,a){a===void 0&&(a=0),t.unshift(e[i]),n[i]&&n[i]!==i&&a<=100&&r(t,e,n,n[i],a+1)},XBe=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)},IS=function(t,e,n,i){var a=n.x-t.x,o=n.y-t.y,s=i.x-t.x,l=i.y-t.y,u=n.x-e.x,c=n.y-e.y,f=i.x-e.x,d=i.y-e.y,h=a*l-o*s,v=u*d-c*f,p=a*c-o*u,g=s*d-l*f;return h*v<=0&&p*g<=0},tI=function(t,e,n){if(n.width||n.height){var i=eI(n),a=i[0],o=i[1],s=i[2],l=i[3];return IS(t,e,a,o)||IS(t,e,a,l)||IS(t,e,o,s)||IS(t,e,s,l)}return!1},qBe=function(t,e,n,i){var a=[];return t.forEach(function(o){if(o!==e&&(o.x===e.x||o.y===e.y)){if(tI(o,e,n)||tI(o,e,i))return;a.push(o)}}),Qk(a)},KBe=function(t,e,n,i,a,o,s){var l=[],u=[e],c={},f={},d={};f[e.id]=0,d[e.id]=bj(e,n,e);var h={};t.forEach(function(m){h[m.id]=m});for(var v,p;u.length;){if(v=void 0,p=1/0,u.forEach(function(m){d[m.id]<=p&&(p=d[m.id],v=m)}),v===n){var g=[];return YBe(g,h,c,n.id),g}XBe(u,v),l.push(v),qBe(t,v,i,a).forEach(function(m){if(l.indexOf(m)===-1){u.indexOf(m)===-1&&u.push(m);var y=d[v.id]+Qy(v,m);f[m.id]&&y>=f[m.id]||(c[m.id]=v.id,f[m.id]=y,d[m.id]=f[m.id]+bj(m,n,e,o,s))}})}return[e,n]},ZBe=function(t,e,n){return!(t.x===e.x&&e.x===n.x||t.y===e.y&&e.y===n.y)},QBe=function(t,e,n,i){var a=Qy(t,e),o=Qy(n,e);a<i&&(i=a),o<i&&(i=o);var s={x:e.x-i/a*(e.x-t.x),y:e.y-i/a*(e.y-t.y)},l={x:e.x-i/o*(e.x-n.x),y:e.y-i/o*(e.y-n.y)};return[s,l]},xj=function(t,e){var n=[],i=t[0];return n.push("M"+i.x+" "+i.y),t.forEach(function(a,o){var s=t[o+1],l=t[o+2];if(s&&l)if(ZBe(a,s,l)){var u=QBe(a,s,l,e),c=u[0],f=u[1];n.push("L"+c.x+" "+c.y),n.push("Q"+s.x+" "+s.y+" "+f.x+" "+f.y),n.push("L"+f.x+" "+f.y)}else n.push("L"+s.x+" "+s.y);else s&&n.push("L"+s.x+" "+s.y)}),n.join("")},wj=function(t,e,n,i,a){var o,s;if(!n||!n.getType())o=AS(t);else if(n.getType()==="combo"){var l=n.getKeyShape();o=l.getCanvasBBox()||AS(t),o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=n.getBBox();if(!i||!i.getType())s=AS(e);else if(i.getType()==="combo"){var u=i.getKeyShape().getBBox();if(u){var c=i.getModel(),f=c.x,d=c.y;s={x:f,y:d,width:u.width,height:u.height,minX:u.minX+f,maxX:u.maxX+f,minY:u.minY+d,maxY:u.maxY+d},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=AS(e)}else s=i&&i.getBBox();var h=MS(o,a),v=MS(s,a),p=Jk(h,t,e),g=Jk(v,e,t),m=GBe([p,g]),y=yj(h,m),b=yj(v,m),x=[];x=x.concat(eI(y)).concat(eI(b));var w={x:(t.x+e.x)/2,y:(t.y+e.y)/2};[m,y,b].forEach(function(C){x=x.concat(WBe(C,w).filter(function(_){return kS(_,h)&&kS(_,v)}))}),[{x:p.x,y:g.y},{x:g.x,y:p.y}].forEach(function(C){kS(C,h)&&kS(C,v)&&x.push(C)}),x.unshift(p),x.push(g),x=Qk(x);var S=KBe(x,p,g,o,s,t,e);return S.unshift(t),S.push(e),mj(S)},JBe=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},e5e=function(t,e,n,i,a){return mj(wj(t,e,n,i,a.offset))},t5e={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:JBe,fallbackRoute:e5e},zu=function(t,e){var n=Math.round(Math.abs(t/e)),i=t<0?-1:1;return n<0?0:i*n},r5e=function(t,e,n){var i={};return t.forEach(function(a){if(!!a)for(var o=MS(a.getBBox(),n),s=zu(o.minX,e);s<=zu(o.maxX,e);s+=1)for(var l=zu(o.minY,e);l<=zu(o.maxY,e);l+=1)i[s+"|||"+l]=!0}),i},rI=function(t,e){var n=e.x-t.x,i=e.y-t.y;return n||i?Math.atan2(i,n):0},Sj=function(t,e){var n=Math.abs(t-e);return n>Math.PI?2*Math.PI-n:n},Cj=function(t,e,n){for(var i=1/0,a=0,o=e.length;a<o;a++){var s=n(t,e[a]);s<i&&(i=s)}return i},Ej=function(t,e,n,i,a){var o=[];if(!n)return[t];var s=a.directions,l=a.offset,u=n.getBBox(),c=e.x>u.minX&&e.x<u.maxX&&e.y>u.minY&&e.y<u.maxY,f=MS(u,l);for(var d in f)f[d]=zu(f[d],a.gridSize);if(c){for(var h=0,v=s;h<v.length;h++)for(var p=v[h],g=[[{x:f.minX,y:f.minY},{x:f.maxX,y:f.minY}],[{x:f.minX,y:f.minY},{x:f.minX,y:f.maxY}],[{x:f.maxX,y:f.minY},{x:f.maxX,y:f.maxY}],[{x:f.minX,y:f.maxY},{x:f.maxX,y:f.maxY}]],d=0;d<4;d++){var m=g[d],y=Zs.getLineIntersect(t,{x:t.x+p.stepX*f.width,y:t.y+p.stepY*f.height},m[0],m[1]);y&&!tI(t,y,u)&&(y.id=y.x+"|||"+y.y,o.push(y))}return o}var b=Jk(f,t,i);return b.id=b.x+"|||"+b.y,[b]},nI=function(t,e,n,i){var a=rI(t,e);if(!n[t.id]){var o=rI(i,t);return Sj(o,a)}var s=rI({x:n[t.id].x,y:n[t.id].y},t);return Sj(s,a)},n5e=function(t,e,n,i,a,o,s){var l=[i],u=t.id,c=t.x,f=t.y,d={x:c,y:f,id:u};for(nI(d,o,e,n)&&l.unshift({x:o.x===i.x?i.x:d.x*s,y:o.y===i.y?i.y:d.y*s});e[u]&&e[u].id!==u;){var h={x:c,y:f,id:u},v=e[u].id,p=e[u].x,g=e[u].y,m={x:p,y:g,id:v},y=nI(m,h,e,n);y&&l.unshift({x:m.x===h.x?l[0].x:m.x*s,y:m.y===h.y?l[0].y:m.y*s}),u=v,c=p,f=g}var b={x:c,y:f,id:u};return l[0].x=b.x===n.x?a.x:l[0].x,l[0].y=b.y===n.y?a.y:l[0].y,l.unshift(a),l},i5e=function(t,e,n,i,a){if(isNaN(t.x)||isNaN(e.x))return[];var o=Mt(t5e,a);o.obstacles=o.obstacles||[];var s=o.gridSize,l=r5e(o.obstacles.concat([n,i]),s,o.offset),u={x:zu(t.x,s),y:zu(t.y,s)},c={x:zu(e.x,s),y:zu(e.y,s)};t.id=u.x+"|||"+u.y,e.id=c.x+"|||"+c.y;var f=Ej(u,t,n,c,o),d=Ej(c,e,i,u,o);f.forEach(function(P){delete l[P.id]}),d.forEach(function(P){delete l[P.id]});for(var h={},v={},p={},g={},m={},y=0;y<f.length;y++){var b=f[y];h[b.id]=b,g[b.id]=0,m[b.id]=Cj(b,d,o.distFunc)}for(var x=o.maximumLoops,w=o.penalties,S,C,_,T,E,M,k;Object.keys(h).length>0&&x>0&&(S=void 0,C=1/0,Object.keys(h).forEach(function(P){var F=h[P].id;m[F]<=C&&(C=m[F],S=h[F])}),!!S);){if(d.findIndex(function(P){return P.x===S.x&&P.y===S.y})>-1)return n5e(S,p,u,e,t,c,s);delete h[S.id],v[S.id]=!0;for(var y=0;y<o.directions.length;y++)_=o.directions[y],T={x:S.x+_.stepX,y:S.y+_.stepY,id:Math.round(S.x)+_.stepX+"|||"+(Math.round(S.y)+_.stepY)},!v[T.id]&&(k=nI(S,T,p,u),!(k>o.maxAllowedDirectionChange)&&(l[T.id]||(h[T.id]||(h[T.id]=T),E=o.distFunc(S,T)+(isNaN(w[k])?s:w[k]),M=g[S.id]+E,!(g[T.id]&&M>=g[T.id])&&(p[T.id]=S,g[T.id]=M,m[T.id]=M+Cj(T,d,o.distFunc)))));x-=1}return o.fallbackRoute(t,e,n,i,o)};t4("polyline",{options:{color:Gt.defaultEdge.color,size:Gt.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:Gt.defaultEdge.style.stroke,lineAppendWidth:Gt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Gt.edgeLabel.style.fill,fontSize:Gt.edgeLabel.style.fontSize,fontFamily:Gt.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:A({},Gt.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t);n.radius===0&&delete n.radius;var i=e.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:n});return e.shapeMap["edge-shape"]=i,i},getShapeStyle:function(t){var e=this.options.style,n={stroke:t.color},i=$t({},e,n,t.style);t=this.getPathPoints(t),this.radius=i.radius,this.offset=i.offset;var a=t.startPoint,o=t.endPoint,s=this.getControlPoints(t),l=[a];s&&(l=l.concat(s)),l.push(o);var u=t.sourceNode,c=t.targetNode,f=i.radius,d=this.options.routeCfg,h=$t({},d,t.routeCfg);h.offset=i.offset;var v=this.getPath(l,u,c,f,h);(qe(v)&&v.length<=1||rt(v)&&v.indexOf("L")===-1)&&(v="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(v="M0 0, L0 0");var p=$t({},Gt.defaultEdge.style,i,{lineWidth:t.size,path:v});return p},updateShapeStyle:function(t,e){var n=e.getContainer();if(!!e.isVisible()){var i={stroke:t.color},a=n.shapeMap["edge-shape"]||n.find(function(x){return x.get("className")==="edge-shape"})||e.getKeyShape(),o=t.size;t=this.getPathPoints(t);var s=t.startPoint,l=t.endPoint,u=this.getControlPoints(t),c=[s];u&&(c=c.concat(u)),c.push(l);var f=a.attr(),d=$t({},i,f,t.style),h=t.sourceNode,v=t.targetNode,p=d.radius,g=this.options.routeCfg,m=$t({},g,t.routeCfg);m.offset=d.offset;var y=this.getPath(c,h,v,p,m);(qe(y)&&y.length<=1||rt(y)&&y.indexOf("L")===-1)&&(y="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(l.x)||isNaN(l.y))&&(y="M0 0, L0 0"),f.endArrow&&d.endArrow===!1&&(t.style.endArrow={path:""}),f.startArrow&&d.startArrow===!1&&(t.style.startArrow={path:""});var b=$t(i,a.attr(),{lineWidth:o,path:y},t.style);a&&a.attr(b)}},getPath:function(t,e,n,i,a){var o=a.offset,s=a.simple;if(!o||t.length>2){if(i)return xj(t,i);var l=[];return G(t,function(d,h){h===0?l.push(["M",d.x,d.y]):l.push(["L",d.x,d.y])}),l}var u=s?wj(t[t.length-1],t[0],n,e,o):i5e(t[0],t[t.length-1],e,n,a);if(!u||!u.length)return"M0 0, L0 0";if(i){var c=xj(u,i);return c}var f=Zs.pointsToPolygon(u);return f}},"single-edge");var _j=Nu.cloneEvent,Tj=Nu.isNaN,Aj=Math.abs,a5e=10,o5e=["shift","ctrl","alt","control"],s5e={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(t){var e=this.origin,n=+t.clientX,i=+t.clientY;if(!(Tj(n)||Tj(i))){var a=n-e.x,o=i-e.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:n,y:i};var s=this.graph.get("width"),l=this.graph.get("height"),u=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,f=this.scalableRange;c<1&&c>-1&&(c=s*c,f=l*f),(u.minX<=s+c&&u.minX+a>s+c||u.maxX+c>=0&&u.maxX+c+a<0)&&(a=0),(u.minY<=l+f&&u.minY+o>l+f||u.maxY+f>=0&&u.maxY+f+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(t){var e=this,n=t.originalEvent.touches,i=n[0],a=n[1];i&&a||(t.preventDefault(),e.onMouseDown(t))},onMouseDown:function(t){var e=this,n=t.originalEvent;if(!(n&&t.name!==z1.TOUCHSTART&&n.button!==0)&&!(t.name!==z1.TOUCHSTART&&typeof window!="undefined"&&window.event&&!window.event.buttons&&!window.event.button)&&!!this.shouldBegin.call(this,t)&&!e.keydown){var i=t.target,a=i&&i.isCanvas&&i.isCanvas();if(!(!this.allowDragOnItem&&!a)&&(e.origin={x:t.clientX,y:t.clientY},e.dragging=!1,this.enableOptimize)){for(var o=this.graph,s=o.getEdges(),l=0,u=s.length;l<u;l++){var c=s[l].get("group").get("children");!c||c.forEach(function(x){x.set("ori-visibility",x.get("ori-visibility")||x.get("visible")),x.hide()})}for(var f=o.getNodes(),d=0,h=f.length;d<h;d++)for(var v=f[d].getContainer(),p=v.get("children"),g=0,m=p;g<m.length;g++){var y=m[g],b=y.get("isKeyShape");b||(y.set("ori-visibility",y.get("ori-visibility")||y.get("visible")),y.hide())}}}},onTouchMove:function(t){var e=this,n=t.originalEvent.touches,i=n[0],a=n[1];if(i&&a){this.onMouseUp(t);return}t.preventDefault(),e.onMouseMove(t)},onMouseMove:function(t){var e=this.graph;if(!this.keydown){var n=t.target,i=n&&n.isCanvas&&n.isCanvas();if(!(!this.allowDragOnItem&&!i)&&(t=_j(t),!!this.origin)){if(this.dragging)t.type="drag",e.emit("canvas:drag",t);else{if(Aj(this.origin.x-t.clientX)+Aj(this.origin.y-t.clientY)<a5e)return;this.shouldBegin.call(this,t)&&(t.type="dragstart",e.emit("canvas:dragstart",t),this.originPosition={x:t.clientX,y:t.clientY},this.dragging=!0)}this.shouldUpdate.call(this,t)&&this.updateViewport(t)}}},onMouseUp:function(t){var e,n,i=this.graph;if(!this.keydown){var a=i.getZoom(),o=i.get("modeController"),s=(n=(e=o==null?void 0:o.modes[o.mode])===null||e===void 0?void 0:e.filter(function(C){return C.type==="zoom-canvas"}))===null||n===void 0?void 0:n[0],l=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var u=i.getEdges(),c=0,f=u.length;c<f;c++){var d=u[c].get("group").get("children");!d||d.forEach(function(C){var _=C.get("ori-visibility");_&&C.show()})}if(a>l)for(var h=i.getNodes(),v=0,p=h.length;v<p;v++)for(var g=h[v].getContainer(),m=g.get("children"),y=0,b=m;y<b.length;y++){var x=b[y],w=x.get("isKeyShape");if(!w){var S=x.get("ori-visibility");S&&x.show()}}}if(!this.dragging){this.origin=null;return}t=_j(t),this.shouldEnd.call(this,t)&&this.updateViewport(t),t.type="dragend",t.dx=t.clientX-this.originPosition.x,t.dy=t.clientY-this.originPosition.y,i.emit("canvas:dragend",t),this.endDrag()}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1},onKeyDown:function(t){var e=this,n=t.key;!n||(o5e.indexOf(n.toLowerCase())>-1?e.keydown=!0:e.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},l5e={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd"}},validationCombo:function(t){if(!this.origin||!t||t.destroyed)return!1;var e=t.getType();return e==="combo"},onTouchStart:function(t){if(!!t.item){var e=this;try{var n=t.originalEvent.touches,i=n[0],a=n[1];if(i&&a)return;t.preventDefault()}catch{console.warn("Touch original event not exist!")}e.onDragStart(t)}},onTouchMove:function(t){var e=this;try{var n=t.originalEvent.touches,i=n[0],a=n[1];if(i&&a){e.onDragEnd(t);return}t.preventDefault()}catch{console.warn("Touch original event not exist!")}e.onDrag(t)},onDragStart:function(t){var e=this;if(this.currentShouldEnd=!0,!!this.shouldBegin.call(this,t)){var n=t.item;if(!(!n||n.destroyed||n.hasLocked())){var i=n.getContainer();i.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n);var a=t.target;if(a){var o=a.get("isAnchorPoint");if(o)return}var s=this.graph;this.targets=[],this.targetCombo=null;var l=s.findAllByState("node",this.selectedState),u=n.get("id"),c=l.filter(function(d){var h=d.get("id");return u===h});c.length===0?this.targets.push(n):l.length>1?l.forEach(function(d){var h=d.hasLocked();h||e.targets.push(d)}):this.targets.push(n);var f=[];this.targets.forEach(function(d){f.push(Mr(d.getModel()))}),this.set("beforeDragNodes",f),this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(d){var h=d.getEdges();h.forEach(function(v){!v.isVisible()||(e.hidenEdge[v.getID()]=!0,v.hide())})}),this.origin={x:t.x,y:t.y},this.point={},this.originPoint={}}}},onDrag:function(t){var e=this;!this.origin||!this.shouldUpdate.call(this,t)||(this.get("enableDelegate")?this.updateDelegate(t):this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge")}):this.targets.map(function(n){e.update(n,t)}))},onDragEnd:function(t){var e=this,n;if(!!this.origin){(n=this.cachedCaptureItems)===null||n===void 0||n.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(l){e.hidenEdge[l.getID()]&&l.show(),l.refresh()})}),this.hidenEdge={};var i=this.graph;if(i.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){a.before.nodes.push({id:o.id,x:o.x,y:o.y})}),this.targets.forEach(function(o){var s=o.getModel();a.after.nodes.push({id:s.id,x:s.x,y:s.y})}),i.pushStack("update",Mr(a))}i.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(t){var e=t.item;if(this.currentShouldEnd=this.shouldEnd.call(this,t,e),this.updatePositions(t,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(e))){var n=this.graph;if(this.comboActiveState&&n.setItemState(e,this.comboActiveState,!1),this.targetCombo=e,this.onlyChangeComboSize)n.updateCombos();else{var i=e.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==i.id&&n.updateComboTree(a,i.id)}),n.updateCombo(e)}n.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(t){var e=this.graph;this.currentShouldEnd=this.shouldEnd.call(this,t,void 0),this.updatePositions(t,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?e.updateCombos():this.targets.map(function(n){var i=n.getModel();i.comboId&&e.updateComboTree(n)}))},onDropNode:function(t){if(!(!this.targets||this.targets.length===0)){var e=this,n=t.item,i=e.graph,a=n.getModel().comboId,o=a?i.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd.call(this,t,o),this.updatePositions(t,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)i.updateCombos();else if(a){var s=i.findById(a);e.comboActiveState&&i.setItemState(s,e.comboActiveState,!1),this.targets.map(function(l){var u=l.getModel();a!==u.comboId&&i.updateComboTree(l,a)}),i.updateCombo(s)}else this.targets.map(function(l){var u=l.getModel();u.comboId&&i.updateComboTree(l)});i.emit("dragnodeend",{items:this.targets,targetItem:n})}}},onDragEnter:function(t){var e=t.item;if(!!this.validationCombo(e)){var n=this.graph;this.comboActiveState&&n.setItemState(e,this.comboActiveState,!0)}},onDragLeave:function(t){var e=t.item;if(!!this.validationCombo(e)){var n=this.graph;this.comboActiveState&&n.setItemState(e,this.comboActiveState,!1)}},updatePositions:function(t,e){var n=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge"),updateFunc:this.update}):e||this.targets.map(function(i){return n.update(i,t)}):this.targets.map(function(i){return n.update(i,t,e)}))},update:function(t,e,n){var i=this.origin,a=t.get("model"),o=t.get("id");this.point[o]||(this.point[o]={x:a.x||0,y:a.y||0});var s=e.x-i.x+this.point[o].x,l=e.y-i.y+this.point[o].y;n&&(s+=i.x-e.x,l+=i.y-e.y);var u={x:s,y:l};this.get("updateEdge")?this.graph.updateItem(t,u,!1):t.updatePosition(u)},debounceUpdate:lm(function(r){var t=r.targets,e=r.graph,n=r.point,i=r.origin,a=r.evt,o=r.updateEdge;r.updateFunc,t.map(function(s){var l=s.get("model"),u=s.get("id");n[u]||(n[u]={x:l.x||0,y:l.y||0});var c=a.x-i.x+n[u].x,f=a.y-i.y+n[u].y,d={x:c,y:f};o?e.updateItem(s,d,!1):s.updatePosition(d)})},50,!0),updateDelegate:function(t){var e=this.graph;if(this.delegateRect){var d=t.x-this.origin.x+this.originPoint.minX,h=t.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:d,y:h})}else{var n=e.get("group"),i=Mt({},pd.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(t),o=a.x,s=a.y,l=a.width,u=a.height,c=a.minX,f=a.minY;this.originPoint={x:o,y:s,width:l,height:u,minX:c,minY:f},this.delegateRect=n.addShape("rect",{attrs:A({width:l,height:u,x:o,y:s},i),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(t){var e=this.targets;e.length===0&&e.push(t.item);for(var n=1/0,i=-1/0,a=1/0,o=-1/0,s=0;s<e.length;s++){var l=e[s],u=l.getBBox(),c=u.minX,f=u.minY,d=u.maxX,h=u.maxY;c<n&&(n=c),f<a&&(a=f),d>i&&(i=d),h>o&&(o=h)}var v=Math.floor(n),p=Math.floor(a),g=Math.ceil(i)-Math.floor(n),m=Math.ceil(o)-Math.floor(a);return{x:v,y:p,width:g,height:m,minX:n,minY:a}}},u5e={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(t){var e=this;try{var n=t.originalEvent.touches,i=n[0],a=n[1];if(i&&a)return;t.preventDefault()}catch{console.warn("Touch original event not exist!")}e.setAllItemStates(t)},clearOnTouchStart:function(t){var e=this;try{var n=t.originalEvent.touches,i=n[0],a=n[1];if(i&&a)return;t.preventDefault()}catch{console.warn("Touch original event not exist!")}e.clearActiveState(t)},setAllItemStates:function(t){var e=t.item,n=this.graph;if(this.item=e,!!this.shouldUpdate(t.item,{event:t,action:"activate"})){for(var i=this,a=this.activeState,o=this.inactiveState,s=n.getNodes(),l=n.getCombos(),u=n.getEdges(),c=n.get("vedges"),f=s.length,d=l.length,h=u.length,v=c.length,p=0;p<f;p++){var g=s[p],m=g.hasState("selected");i.resetSelected&&m&&n.setItemState(g,"selected",!1),n.setItemState(g,a,!1),o&&n.setItemState(g,o,!0)}for(var p=0;p<d;p++){var y=l[p],m=y.hasState("selected");i.resetSelected&&m&&n.setItemState(y,"selected",!1),n.setItemState(y,a,!1),o&&n.setItemState(y,o,!0)}for(var p=0;p<h;p++){var b=u[p];n.setItemState(b,a,!1),o&&n.setItemState(b,o,!0)}for(var p=0;p<v;p++){var x=c[p];n.setItemState(x,a,!1),o&&n.setItemState(x,o,!0)}o&&n.setItemState(e,o,!1),n.setItemState(e,a,!0);for(var w=e.getEdges(),S=w.length,p=0;p<S;p++){var b=w[p],C=void 0;b.getSource()===e?C=b.getTarget():C=b.getSource(),o&&n.setItemState(C,o,!1),n.setItemState(C,a,!0),n.setItemState(b,o,!1),n.setItemState(b,a,!0),b.toFront()}n.emit("afteractivaterelations",{item:t.item,action:"activate"})}},clearActiveState:function(t){var e=this,n=e.get("graph");if(!!e.shouldUpdate(t.item,{event:t,action:"deactivate"})){var i=this.activeState,a=this.inactiveState,o=n.get("autoPaint");n.setAutoPaint(!1);for(var s=n.getNodes()||[],l=n.getCombos()||[],u=n.getEdges()||[],c=n.get("vedges")||[],f=s.length,d=l.length,h=u.length,v=c.length,p=0;p<f;p++){var g=s[p];n.clearItemStates(g,[i,a])}for(var p=0;p<d;p++){var m=l[p];n.clearItemStates(m,[i,a])}for(var p=0;p<h;p++){var y=u[p];n.clearItemStates(y,[i,a,"deactivate"])}for(var p=0;p<v;p++){var b=c[p];n.clearItemStates(b,[i,a,"deactivate"])}n.paint(),n.setAutoPaint(o),n.emit("afteractivaterelations",{item:t.item||e.get("item"),action:"deactivate"})}}},PS=Math.min,Mj=Math.max,kj=Math.abs,Ij="shift",c5e=["drag","shift","ctrl","alt","control"],f5e={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:Ij,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return c5e.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Ij,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(t){var e=t.item,n=this.brush;e||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),n||(n=this.createBrush()),this.originPoint={x:t.canvasX,y:t.canvasY},n.attr({width:0,height:0}),n.show(),this.dragging=!0)},onMouseMove:function(t){!this.dragging||this.trigger!=="drag"&&!this.keydown||this.updateBrush(t)},onMouseUp:function(t){this.graph,!(!this.brush&&!this.dragging)&&(this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(t),this.dragging=!1))},clearStates:function(){var t=this,e=t.graph,n=t.selectedState,i=e.findAllByState("node",n),a=e.findAllByState("edge",n);i.forEach(function(o){return e.setItemState(o,n,!1)}),a.forEach(function(o){return e.setItemState(o,n,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedNodes:function(t){var e=this,n=this,i=n.graph,a=n.originPoint,o=n.shouldUpdate,s=this.selectedState,l={x:t.x,y:t.y},u=i.getPointByCanvas(a.x,a.y),c=PS(l.x,u.x),f=Mj(l.x,u.x),d=PS(l.y,u.y),h=Mj(l.y,u.y),v=[],p=[];i.getNodes().forEach(function(m){if(!!m.isVisible()){var y=m.getBBox();if(y.centerX>=c&&y.centerX<=f&&y.centerY>=d&&y.centerY<=h&&o(m,"select")){v.push(m);var b=m.getModel();p.push(b.id),i.setItemState(m,s,!0)}}});var g=[];this.includeEdges&&v.forEach(function(m){var y=m.getOutEdges();y.forEach(function(b){if(!!b.isVisible()){var x=b.getModel(),w=x.source,S=x.target;p.includes(w)&&p.includes(S)&&o(b,"select")&&(g.push(b),i.setItemState(b,e.selectedState,!0))}})}),this.selectedEdges=g,this.selectedNodes=v,this.onSelect&&this.onSelect(v,g),i.emit("nodeselectchange",{selectedItems:{nodes:v,edges:g},select:!0})},createBrush:function(){var t=this,e=t.graph.get("canvas").addShape("rect",{attrs:t.brushStyle,capture:!1,name:"brush-shape"});return this.brush=e,this.delegate=e,e},updateBrush:function(t){var e=this.originPoint;this.brush.attr({width:kj(t.canvasX-e.x),height:kj(t.canvasY-e.y),x:PS(t.canvasX,e.x),y:PS(t.canvasY,e.y)})},onKeyDown:function(t){var e=t.key;if(!!e){var n=this.trigger.toLowerCase(),i=e.toLowerCase();i===n||i==="control"&&n==="ctrl"||i==="ctrl"&&n==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},Pj="shift",d5e=["shift","ctrl","alt","control"],h5e={getDefaultCfg:function(){return{multiple:!0,trigger:Pj,selectedState:"selected"}},getEvents:function(){var t=this;return d5e.indexOf(t.trigger.toLowerCase())>-1||(t.trigger=Pj,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),t.multiple?{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(t){var e=this,n=t.item;if(!(!n||n.destroyed)){n.getType();var i=e.graph,a=e.keydown,o=e.multiple,s=e.shouldUpdate,l=e.shouldBegin;if(!!l.call(e,t)){if(!a||!o){var u=i.findAllByState("node",e.selectedState).concat(i.findAllByState("combo",e.selectedState));G(u,function(d){d!==n&&i.setItemState(d,e.selectedState,!1)})}if(n.hasState(e.selectedState)){s.call(e,t)&&i.setItemState(n,e.selectedState,!1);var c=i.findAllByState("node",e.selectedState),f=i.findAllByState("combo",e.selectedState);i.emit("nodeselectchange",{target:n,selectedItems:{nodes:c,combos:f},select:!1})}else{s.call(e,t)&&i.setItemState(n,e.selectedState,!0);var c=i.findAllByState("node",e.selectedState),f=i.findAllByState("combo",e.selectedState);i.emit("nodeselectchange",{target:n,selectedItems:{nodes:c,combos:f},select:!0})}}}},onCanvasClick:function(){var t=this,e=this.graph,n=e.findAllByState("node",this.selectedState);G(n,function(a){e.setItemState(a,t.selectedState,!1)});var i=e.findAllByState("combo",this.selectedState);G(i,function(a){e.setItemState(a,t.selectedState,!1)}),e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},onKeyDown:function(t){var e=this,n=t.key;!n||(n.toLowerCase()===this.trigger.toLowerCase()||n.toLowerCase()==="control"?e.keydown=!0:e.keydown=!1)},onKeyUp:function(){var t=this;t.keydown=!1}},v5e=Un,Dj=.05,p5e={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"}}},getEvents:function(){var t=this.fixSelectedItems;return t.fixState||(t.fixState="selected"),t.fixAll&&(t.fixLineWidth=!0,t.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(t){var e=t.originalEvent.touches,n=e[0],i=e[1];t.preventDefault(),!!i&&(this.shouldBegin&&!this.shouldBegin.call(this,t)||(this.startPoint={pageX:n.pageX,pageY:n.pageY},this.moveable=!0,i&&(this.endPoint={pageX:i.pageX,pageY:i.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(t){if(!!this.moveable){t.preventDefault();var e=t.originalEvent.touches,n=e[0],i=e[1];if(!!i){this.endPoint||(this.endPoint={pageX:i.pageX,pageY:i.pageY});var a=function(h,v){return Math.hypot(v.x-h.x,v.y-h.y)},o=a({x:n.pageX,y:n.pageY},{x:i.pageX,y:i.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var l=this.get("minZoom")||this.graph.get("minZoom"),u=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>u||s<l)){var c=this.graph.get("canvas"),f=c.getPointByClient(t.clientX,t.clientY);this.graph.zoomTo(s,{x:f.x,y:f.y}),this.graph.emit("wheelzoom",t)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(t){var e=this,n=this,i=n.graph,a=n.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin.call(this,t))&&!!this.shouldUpdate.call(this,t)){t.preventDefault();var o=i.get("canvas"),s=o.getPointByClient(t.clientX,t.clientY),l=this.get("sensitivity"),u=i.getZoom(),c=u,f=u;t.wheelDelta<0?c=1-Dj*l:c=1/(1-Dj*l),f=u*c;var d=this.get("minZoom")||i.get("minZoom"),h=this.get("maxZoom")||i.get("maxZoom");if(!(f>h||f<d)){var v=this.get("enableOptimize");if(v){var p=this.get("optimizeZoom"),g=this.get("optimized"),m=i.getNodes(),y=i.getEdges(),b=m.length,x=y.length;if(!g){for(var w=0;w<b;w++){var S=m[w];if(!S.destroyed)for(var C=S.get("group").get("children"),_=C.length,T=0;T<_;T++){var E=C[T];!E.destoryed&&!E.get("isKeyShape")&&(E.set("ori-visibility",E.get("ori-visibility")||E.get("visible")),E.hide())}}for(var M=0;M<x;M++)for(var k=y[M],C=k.get("group").get("children"),_=C.length,T=0;T<_;T++){var E=C[T];E.set("ori-visibility",E.get("ori-visibility")||E.get("visible")),E.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var P=setTimeout(function(){var Qe=i.getZoom(),Ve=e.get("optimized");if(Ve){e.set("optimized",!1);for(var Ie=0;Ie<b;Ie++){var Be=m[Ie],V=Be.get("group").get("children"),j=V.length;if(Qe<p){var q=Be.getKeyShape(),ee=q.get("ori-visibility");ee&&q.show()}else for(var Q=0;Q<j;Q++){var me=V[Q],ee=me.get("ori-visibility");!me.get("visible")&&ee&&ee&&me.show()}}for(var He=0;He<x;He++){var ze=y[He],V=ze.get("group").get("children"),j=V.length;if(Qe<p){var q=ze.getKeyShape(),ee=q.get("ori-visibility");ee&&q.show()}else for(var Q=0;Q<j;Q++){var me=V[Q];if(!me.get("visible")){var ee=me.get("ori-visibility");ee&&me.show()}}}}},100);this.set("timeout",P)}if(u<=1){var F=void 0,$=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){F=i.findAllByState("node",a.fixState),$=i.findAllByState("edge",a.fixState);for(var R=u/f,L=F.length,O=0;O<L;O++){var S=F[O],B=S.getContainer(),U=S.getModel(),W=S.getOriginStyle(),X=S.getStateStyle(a.fixState),ae=S.get("shapeFactory").getShape(U.type).getStateStyle(a.fixState,S)[a.fixState];if(a.fixAll){if(f<=1){var Z=Mr(B.getMatrix());Z||(Z=[1,0,0,0,1,0,0,0,1]);var Y=S.getModel(),fe=Y.x,le=Y.y;Z=v5e(Z,[["t",-fe,-le],["s",R,R],["t",fe,le]]),B.setMatrix(Z)}}else for(var C=B.get("children"),_=C.length,T=0;T<_;T++){var E=C[T],ue=void 0,Ee=void 0;if(a.fixLabel){var De=E.get("type");if(De==="text"){ue=E.attr("fontSize")||12;var je=X[E.get("name")],ke=ae[E.get("name")],D=je?je.fontSize:12,z=ke?ke.fontSize:12,H=D||z||12;if(f<=1&&E.attr("fontSize",H/f),Ee)break}}if(a.fixLineWidth&&E.get("isKeyShape")){Ee=E.attr("lineWidth")||0;var he=X.lineWidth||ae.lineWidth||W.lineWidth||0;if(f<=1&&E.attr("lineWidth",he/f),ue)break}}}for(var te=$.length,ge=0;ge<te;ge++)for(var k=$[ge],B=k.getContainer(),C=B.get("children"),U=k.getModel(),X=k.getStateStyle(a.fixState),ae=k.get("shapeFactory").getShape(U.type).getStateStyle(a.fixState,k)[a.fixState],_=C.length,T=0;T<_;T++){var E=C[T],ue=void 0,Ee=void 0;if(a.fixLabel||a.fixAll){var De=E.get("type");if(De==="text"){ue=E.attr("fontSize")||12;var je=X[E.get("name")],ke=ae[E.get("name")],D=je?je.fontSize:12,z=ke?ke.fontSize:12,H=D||z||12;if(f<=1&&E.attr("fontSize",H/f),Ee)break}}if((a.fixLineWidth||a.fixAll)&&E.get("isKeyShape")){Ee=E.attr("lineWidth")||0;var he=X.lineWidth||ae.lineWidth||1;if(f<=1&&E.attr("lineWidth",he/f),ue)break}}}}i.zoomTo(f,{x:s.x,y:s.y}),i.emit("wheelzoom",t)}}}},Rj={onMouseEnter:function(t){var e=t.item;this.currentTarget=e,this.showTooltip(t),this.graph.emit("tooltipchange",{item:t.item,action:"show"})},onMouseMove:function(t){if(!this.shouldUpdate(t)){this.hideTooltip();return}!this.currentTarget||t.item!==this.currentTarget||this.updatePosition(t)},onMouseLeave:function(t){!this.shouldEnd(t)||(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(t){var e=this.container;if(!(!t.item||t.item.destroyed)){e||(e=this.createTooltip(this.graph.get("canvas")),this.container=e);var n=this.formatText(t.item.get("model"),t);e.innerHTML=n,Fr(this.container,{visibility:"visible"}),this.updatePosition(t)}},hideTooltip:function(){Fr(this.container,{visibility:"hidden"})},updatePosition:function(t){var e=this.get("shouldBegin"),n=this,i=n.width,a=n.height,o=n.container,s=n.graph;if(!e(t)){Fr(o,{visibility:"hidden"});return}var l=s.getPointByClient(t.clientX,t.clientY),u=s.getCanvasByPoint(l.x,l.y),c=u.x,f=u.y,d=o.getBoundingClientRect();c>i/2?c-=d.width:c+=this.offset,f>a/2?f-=d.height:f+=this.offset;var h=c+"px",v=f+"px";Fr(this.container,{left:h,top:v,visibility:"visible"})},createTooltip:function(t){var e=t.get("el");e.style.position="relative";var n=Vn('<div class="g6-tooltip g6-'+this.item+'-tooltip"></div>');return e.parentNode.appendChild(n),Fr(n,{position:"absolute",visibility:"visible"}),this.width=t.get("width"),this.height=t.get("height"),this.container=n,this.graph.get("tooltips").push(n),n}},g5e=A({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(e){return e.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Rj),m5e=A({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(e){return"source: "+e.source+" target: "+e.target}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Rj),Oj="click",y5e=["click","dblclick"],b5e={getDefaultCfg:function(){return{trigger:Oj,onChange:function(){}}},getEvents:function(){var t,e;return y5e.includes(this.trigger)?e=this.trigger:(e=Oj,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),t={},t["node:"+e]="onNodeClick",t.touchstart="onNodeClick",t},onNodeClick:function(t){var e=t.item;if(!!e){var n=this.graph.findDataById(e.get("id"));if(!!n){var i=n.children;if(!(!i||i.length===0)){var a=!n.collapsed;!this.shouldBegin(t,a)||(n.collapsed=a,e.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:t.item,collapsed:a}),!!this.shouldUpdate(t,a)&&(this.onChange(e,a),this.graph.layout()))}}}}},x5e=Nu.calculationItemsBBox,w5e=function r(t,e){if(e(t)!==!1&&t){var n=t.get("combos");if(n.length===0)return!1;G(n,function(i){r(i,e)})}},S5e={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(t){var e=t.item;if(!e||e.destroyed||!this.shouldUpdate.call(this,t))return!1;var n=e.getType();return n==="combo"},onDragStart:function(t){var e=this,n=this.graph,i=t.item;if(this.currentShouldEnd=!0,!!this.validationCombo(t)){this.targets=[];var a=n.findAllByState("combo",this.selectedState),o=i.get("id"),s=a.filter(function(l){var u=l.get("id");return o===u});s.length===0?this.targets.push(i):this.targets=a,this.activeState&&this.targets.map(function(l){var u=l.getModel();if(u.parentId){var c=n.findById(u.parentId);c&&n.setItemState(c,e.activeState,!0)}}),this.point={},this.originPoint={},this.origin={x:t.x,y:t.y},this.currentItemChildCombos=[],w5e(i,function(l){if(l.destroyed)return!1;var u=l.getModel();return e.currentItemChildCombos.push(u.id),!0})}},onDrag:function(t){var e=this;if(!!this.origin&&!!this.validationCombo(t))if(this.enableDelegate)this.updateDelegate(t);else{if(this.activeState){var n=this.graph,i=t.item,a=i.getModel(),o=n.getCombos(),s=i.getBBox(),l=s.centerX,u=s.centerY,c=s.width,f=o.filter(function(d){var h=d.getModel();return a.parentId,h.id!==a.id&&!e.currentItemChildCombos.includes(h.id)});f.map(function(d){var h=d.getBBox(),v=h.centerX,p=h.centerY,g=h.width,m=l-v,y=u-p,b=2*Math.sqrt(m*m+y*y);c+g-b>.8*c?n.setItemState(d,e.activeState,!0):n.setItemState(d,e.activeState,!1)})}G(this.targets,function(d){e.updateCombo(d,t)})}},updatePositions:function(t,e){var n=this;(this.enableDelegate||e)&&G(this.targets,function(i){n.updateCombo(i,t,e)})},onDrop:function(t){var e=this,n=t.item;if(this.currentShouldEnd=this.shouldEnd.call(this,t,n),this.updatePositions(t,!this.currentShouldEnd),!(!this.currentShouldEnd||!n||!this.targets||n.destroyed)){var i=this.graph,a=n.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(e.activeState&&i.setItemState(n,e.activeState,!1),e.onlyChangeComboSize?i.updateCombo(o):i.updateComboTree(o,a.id)):i.updateCombo(n)}),this.end(n,t),this.endComparison=!0}},onNodeDrop:function(t){var e=this;if(!(!this.targets||this.targets.length===0)){var n=this.graph,i=t.item,a=i.getModel().comboId,o=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd.call(this,t,o),this.updatePositions(t,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(a){if(this.activeState){var l=n.findById(a);n.setItemState(l,this.activeState,!1)}this.targets.map(function(u){e.onlyChangeComboSize?n.updateCombo(u):a!==u.getID()&&(s=n.findById(a),a!==u.getModel().parentId&&n.updateComboTree(u,a))})}else this.targets.map(function(u){if(e.onlyChangeComboSize)n.updateCombo(u);else{var c=u.getModel();c.comboId&&n.updateComboTree(u)}});this.endComparison=!0,this.end(s,t)}}},onDragEnter:function(t){if(!!this.origin&&!!this.validationCombo(t)){var e=t.item,n=this.graph;this.activeState&&n.setItemState(e,this.activeState,!0)}},onDragLeave:function(t){if(!!this.origin&&!!this.validationCombo(t)){var e=t.item,n=this.graph;this.activeState&&n.setItemState(e,this.activeState,!1)}},onDragEnd:function(t){if(!(!this.targets||this.targets.length===0)){var e=t.item;this.currentShouldEnd&&this.updatePositions(t);var n=this.getParentCombo(e.getModel().parentId),i=this.graph;n&&this.activeState&&i.setItemState(n,this.activeState,!1),this.end(void 0,t)}},end:function(t,e){var n=this;if(!!this.origin){var i=this.graph;if(this.delegateShape){var a=i.get("delegateGroup");a.clear(),this.delegateShape=null}t&&this.activeState&&i.setItemState(t,this.activeState,!1),t||this.targets.map(function(o){n.onlyChangeComboSize?i.updateCombo(o):i.updateComboTree(o)}),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(t,e){var n=this;if(e(t)!==!1&&t){var i=t.get("combos");G(i,function(o){n.traverse(o,e)});var a=t.get("nodes");G(a,function(o){n.traverse(o,e)})}},updateCombo:function(t,e,n){var i=this;this.traverse(t,function(a){return a.destroyed?!1:(i.updateSignleItem(a,e,n),!0)})},updateSignleItem:function(t,e,n){var i=this.origin,a=this.graph,o=t.getModel(),s=t.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var l=e.x-i.x+this.point[s].x,u=e.y-i.y+this.point[s].y;n&&(l+=i.x-e.x,u+=i.y-e.y),a.updateItem(t,{x:l,y:u})},getParentCombo:function(t){var e=this.graph;if(!!t){var n=e.findById(t);if(!!n)return n}},updateDelegate:function(t){var e=this.graph;if(this.delegateShape){var d=t.x-this.origin.x+this.originPoint.minX,h=t.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:d,y:h})}else{var n=e.get("delegateGroup"),i=null;this.targets.length>1?i=x5e(this.targets):i=this.targets[0].getBBox();var a=i.x,o=i.y,s=i.width,l=i.height,u=i.minX,c=i.minY;this.originPoint={x:a,y:o,width:s,height:l,minX:u,minY:c};var f=A(A({},pd.delegateStyle),this.delegateStyle);this.delegateShape=n.addShape("rect",{attrs:A({width:i.width,height:i.height,x:i.x,y:i.y},f),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}}},Lj="dblclick",C5e=["click","dblclick"],E5e={getDefaultCfg:function(){return{trigger:Lj,relayout:!0}},getEvents:function(){var t,e;return C5e.includes(this.trigger)?e=this.trigger:(e=Lj,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),t={},t["combo:"+e]="onComboClick",t},onComboClick:function(t){var e=t.item,n=this,i=n.graph,a=n.relayout;if(!(!e||e.destroyed||e.getType()!=="combo")){var o=e.getModel(),s=o.id;!s||(i.collapseExpandCombo(s),a&&i.get("layout")?i.layout():i.refreshPositions())}}},_5e=Nu.isPolygonsIntersect,T5e=Nu.pathToPoints,Fj="shift",A5e=["drag","shift","ctrl","alt","control"],M5e=function(t,e){var n,i=t.getKeyShape();if(t.get("type")==="path")n=T5e(i.attr("path"));else{var a=i.getCanvasBBox();n=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return _5e(e,n)},k5e={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:Fj,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return A5e.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Fj,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(t){var e=this.lasso,n=t.item;n||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),e||(e=this.createLasso()),this.dragging=!0,this.originPoint={x:t.x,y:t.y},this.points.push(this.originPoint),e.show())},onDragMove:function(t){!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push({x:t.x,y:t.y}),this.updateLasso(t))},onDragEnd:function(t){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var t=this.points,e=[];return t.length&&(t.forEach(function(n,i){i===0?e.push(["M",n.x,n.y]):e.push(["L",n.x,n.y])}),e.push(["L",t[0].x,t[0].y])),e},clearStates:function(){var t=this,e=t.graph,n=t.selectedState,i=e.findAllByState("node",n),a=e.findAllByState("edge",n);i.forEach(function(o){return e.setItemState(o,n,!1)}),a.forEach(function(o){return e.setItemState(o,n,!1)}),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var t=this,e=this,n=e.graph,i=e.shouldUpdate,a=this.points.map(function(c){return[n.getCanvasByPoint(c.x,c.y).x,n.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],l=[];n.getNodes().forEach(function(c){if(!!c.isVisible()&&M5e(c,a)&&i(c,"select")){s.push(c);var f=c.getModel();l.push(f.id),n.setItemState(c,o,!0)}});var u=[];this.includeEdges&&s.forEach(function(c){var f=c.getOutEdges();f.forEach(function(d){if(!!d.isVisible()){var h=d.getModel(),v=h.source,p=h.target;l.includes(v)&&l.includes(p)&&i(d,"select")&&(u.push(d),n.setItemState(d,t.selectedState,!0))}})}),this.selectedEdges=u,this.selectedNodes=s,this.onSelect&&this.onSelect(s,u),n.emit("nodeselectchange",{selectedItems:{nodes:s,edges:u},select:!0})},createLasso:function(){var t=this,e=t.graph.get("delegateGroup").addShape("path",{attrs:A({path:[]},t.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=e,this.delegate=e,this.points=[],e},updateLasso:function(t){var e=this;this.lasso.attr({path:e.getLassoPath()})},onKeyDown:function(t){var e=t.key;!e||(e.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},Nj="click",I5e=["click","drag"],Bj=void 0,P5e=["shift","ctrl","control","alt","meta",void 0],D5e={getDefaultCfg:function(){return{trigger:Nj,key:Bj,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var t=this;I5e.indexOf(t.trigger.toLowerCase())>-1||(t.trigger=Nj,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),t.key&&P5e.indexOf(t.key.toLowerCase())===-1&&(t.trigger=Bj,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var e;return t.trigger==="drag"?e={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:t.trigger==="click"&&(e={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),t.key&&(e.keydown="onKeyDown",e.keyup="onKeyUp"),e},onDragEnd:function(t){var e=this;if(!(e.key&&!e.keydown)){var n=t.item;(!n||n.getID()===e.source||n.getType()!=="node")&&e.cancelCreating({item:e.edge,x:t.x,y:t.y})}},onClick:function(t){var e=this;if(!(e.key&&!e.keydown)){var n=t.item,i=e.graph,a=n.getModel(),o=e.getEdgeConfig;if(e.addingEdge&&e.edge){if(!e.shouldEnd.call(e,t))return;var s=void 0;o&&Vt(o)?s=o({source:e.source,target:a.id}):s=e.edgeConfig;var l=A({target:a.id},s);if(e.source===a.id&&(l.type="loop"),i.emit("beforecreateedge",{}),i.updateItem(e.edge,l,!1),i.get("enabledStack")){var u=A(A({},e.edge.getModel()),{itemType:"edge"}),c={};c.edges=[u],i.pushStack("add",{before:{},after:c})}i.emit("aftercreateedge",{edge:e.edge}),e.edge.getKeyShape().set("capture",!0),e.edge=null,e.addingEdge=!1}else{if(!e.shouldBegin.call(e,t))return;var s=void 0;o&&Vt(o)?s=o({source:a.id,target:a.id}):s=e.edgeConfig,e.edge=i.addItem("edge",A({source:a.id,target:a.id},s),!1),e.source=a.id,e.addingEdge=!0,e.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(t){var e=this;if(!(e.key&&!e.keydown)){var n={x:t.x,y:t.y};if(!e.graph.findById(e.source)){e.addingEdge=!1;return}e.addingEdge&&e.edge&&e.graph.updateItem(e.edge,{target:n},!1)}},cancelCreating:function(t){var e=this;if(!(e.key&&!e.keydown)){var n=e.graph,i=t.item;if(e.addingEdge&&t.target&&t.target.isCanvas&&t.target.isCanvas()){n.removeItem(e.edge,!1),e.edge=null,e.addingEdge=!1;return}e.addingEdge&&e.edge===i&&(n.removeItem(e.edge,!1),e.edge=null,e.addingEdge=!1)}},onKeyDown:function(t){var e=this,n=t.key;!n||(n.toLowerCase()===e.key.toLowerCase()?e.keydown=!0:e.keydown=!1)},onKeyUp:function(){var t=this;t.addingEdge&&t.edge&&(t.graph.removeItem(t.edge,!1),t.addingEdge=!1,t.edge=null),this.keydown=!1}},$j="ctrl",R5e=["shift","ctrl","alt","control"],O5e="1",L5e={getDefaultCfg:function(){return{trigger:$j,combinedKey:O5e,functionName:"fitView",functionParams:[]}},getEvents:function(){return R5e.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=$j,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '"+this.trigger+"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(t){var e=t.key;if(!!e){var n=this.trigger.toLowerCase(),i=e.toLowerCase();this.triggerKeydown||(i===n||i==="control"&&n==="ctrl"||i==="ctrl"&&n==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '"+this.functionName+"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D"),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(i===o||i==="control"&&o==="ctrl"||i==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},F5e=["shift","ctrl","alt","control"],N5e={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0}},getEvents:function(){return(!this.zoomKey||F5e.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(t){var e=this,n=this.graph,i=t[this.zoomKey+"Key"];if(this.zoomKey==="control"&&(i=t.ctrlKey),i){var a=n.get("canvas"),o=a.getPointByClient(t.clientX,t.clientY),s=n.getZoom();t.wheelDelta>0?s=s+s*.05:s=s-s*.05,n.zoomTo(s,{x:o.x,y:o.y})}else{var l=t.deltaX||t.movementX,u=t.deltaY||t.movementY;!u&&navigator.userAgent.indexOf("Firefox")>-1&&(u=-t.wheelDelta*125/3);var c=this.graph.get("width"),f=this.graph.get("height"),d=this.graph.get("canvas").getCanvasBBox(),h=this.scalableRange,v=this.scalableRange;h<1&&h>-1&&(h=c*h,v=f*v);var p=d.minX,g=d.maxX,m=d.minY,y=d.maxY;l>0?g<-h?l=0:g-l<-h&&(l=g+h):l<0&&(p>c+h?l=0:p-l>c+h&&(l=p-(c+h))),u>0?y<-v?u=0:y-u<-v&&(u=y+v):u<0&&(m>f+v?u=0:m-u>f+v&&(u=m-(f+v))),this.get("direction")==="x"?u=0:this.get("direction")==="y"&&(l=0),n.translate(-l,-u)}t.preventDefault();var b=this.get("enableOptimize");if(b){var x=this.get("optimizeZoom"),w=this.get("optimized"),S=n.getNodes(),C=n.getEdges(),_=S.length,T=C.length;if(!w){for(var E=0;E<_;E++){var M=S[E];if(!M.destroyed)for(var k=M.get("group").get("children"),P=k.length,F=0;F<P;F++){var $=k[F];!$.destoryed&&!$.get("isKeyShape")&&($.set("ori-visibility",$.get("ori-visibility")||$.get("visible")),$.hide())}}for(var R=0;R<T;R++)for(var L=C[R],k=L.get("group").get("children"),P=k.length,F=0;F<P;F++){var $=k[F];$.set("ori-visibility",$.get("ori-visibility")||$.get("visible")),$.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var O=setTimeout(function(){var B=n.getZoom(),U=e.get("optimized");if(U){e.set("optimized",!1);for(var W=0;W<_;W++){var X=S[W],ae=X.get("group").get("children"),Z=ae.length;if(B<x){var Y=X.getKeyShape(),fe=Y.get("ori-visibility");fe&&Y.show()}else for(var le=0;le<Z;le++){var ue=ae[le],fe=ue.get("ori-visibility");!ue.get("visible")&&fe&&fe&&ue.show()}}for(var Ee=0;Ee<T;Ee++){var De=C[Ee],ae=De.get("group").get("children"),Z=ae.length;if(B<x){var Y=De.getKeyShape(),fe=Y.get("ori-visibility");fe&&Y.show()}else for(var le=0;le<Z;le++){var ue=ae[le];if(!ue.get("visible")){var fe=ue.get("ori-visibility");fe&&ue.show()}}}}},100);this.set("timeout",O)}}},B5e={"drag-canvas":s5e,"zoom-canvas":p5e,"drag-node":l5e,"activate-relations":u5e,"brush-select":f5e,"click-select":h5e,"lasso-select":k5e,tooltip:g5e,"edge-tooltip":m5e,"collapse-expand":b5e,"drag-combo":S5e,"collapse-expand-combo":E5e,"create-edge":D5e,"shortcuts-call":L5e,"scroll-canvas":N5e};G(B5e,function(r,t){r4(t,r)});var $5e=A(A({},qce),Nve);wa.Grid;var Sft=wa.Minimap;wa.Bundling;wa.Menu;var z5e=wa.Fisheye;wa.ToolBar;var Cft=wa.Tooltip,G5e=wa.TimeBar,U5e=wa.ImageMinimap,V5e=wa.EdgeFilterLens,H5e=wa.SnapLine;wa.Legend;var W5e={version:pd.version,Graph:w7,TreeGraph:sNe,Util:Nu,Layout:dS,TreeLayout:XFe,registerLayout:qFe,Global:pd,registerBehavior:r4,registerCombo:Ove,registerEdge:t4,registerNode:Cu,Minimap:wa.Minimap,Grid:wa.Grid,Bundling:wa.Bundling,Menu:wa.Menu,ToolBar:wa.ToolBar,Tooltip:wa.Tooltip,Legend:wa.Legend,TimeBar:G5e,SnapLine:H5e,Fisheye:z5e,ImageMinimap:U5e,EdgeFilterLens:V5e,Algorithm:$5e,Arrow:Ave,Marker:Mve,Shape:Ci};W5e.version="4.5.0";function iI(){const r=[],t=i=>{const a=r.indexOf(i);a!==-1&&r.splice(a,1)};return{on:i=>(r.push(i),{off:()=>t(i)}),off:t,trigger:i=>{r.forEach(a=>a(i))}}}function zj(r){return mae()?(yae(r),!0):!1}const DS=typeof window!="undefined";function j5e(r,t){function e(...n){r(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})}return e}function Y5e(r,t={}){let e,n;return a=>{const o=fa(r),s=fa(t.maxWait);if(e&&clearTimeout(e),o<=0||s!==void 0&&s<=0)return n&&(clearTimeout(n),n=null),a();s&&!n&&(n=setTimeout(()=>{e&&clearTimeout(e),n=null,a()},s)),e=setTimeout(()=>{n&&clearTimeout(n),n=null,a()},o)}}function X5e(r,...t){return t.some(e=>e in r)}function Eft(r,t=200,e={}){return j5e(Y5e(t,e),r)}function q5e(r,t,e={}){const{immediate:n=!0}=e,i=Oe(!1);let a=null;function o(){a&&(clearTimeout(a),a=null)}function s(){i.value=!1,o()}function l(...u){o(),i.value=!0,a=setTimeout(()=>{i.value=!1,a=null,r(...u)},fa(t))}return n&&(i.value=!0,DS&&l()),zj(s),{isPending:i,start:l,stop:s}}function K5e(r){var t;const e=fa(r);return(t=e==null?void 0:e.$el)!=null?t:e}const Gj=DS?window:void 0;DS&&window.document;DS&&window.navigator;var Uj=Object.getOwnPropertySymbols,Z5e=Object.prototype.hasOwnProperty,Q5e=Object.prototype.propertyIsEnumerable,J5e=(r,t)=>{var e={};for(var n in r)Z5e.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&Uj)for(var n of Uj(r))t.indexOf(n)<0&&Q5e.call(r,n)&&(e[n]=r[n]);return e};function _ft(r,t,e={}){const n=e,{window:i=Gj}=n,a=J5e(n,["window"]);let o;const s=i&&"ResizeObserver"in i,l=()=>{o&&(o.disconnect(),o=void 0)},u=fn(()=>K5e(r),f=>{l(),s&&i&&f&&(o=new i.ResizeObserver(t),o.observe(f,a))},{immediate:!0,flush:"post"}),c=()=>{l(),u()};return zj(c),{isSupported:s,stop:c}}var e$e=Object.defineProperty,t$e=Object.defineProperties,r$e=Object.getOwnPropertyDescriptors,Vj=Object.getOwnPropertySymbols,n$e=Object.prototype.hasOwnProperty,i$e=Object.prototype.propertyIsEnumerable,Hj=(r,t,e)=>t in r?e$e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Gu=(r,t)=>{for(var e in t||(t={}))n$e.call(t,e)&&Hj(r,e,t[e]);if(Vj)for(var e of Vj(t))i$e.call(t,e)&&Hj(r,e,t[e]);return r},Wj=(r,t)=>t$e(r,r$e(t));const a$e={json:"application/json",text:"text/plain",formData:"multipart/form-data"};function jj(r){return X5e(r,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError")}function aI(r){return r instanceof Headers?Object.fromEntries([...r.entries()]):r}function Tft(r,...t){var e;const n=typeof AbortController=="function";let i={},a={immediate:!0,refetch:!1,timeout:0};const o={method:"get",type:"text",payload:void 0};t.length>0&&(jj(t[0])?a=Gu(Gu({},a),t[0]):i=t[0]),t.length>1&&jj(t[1])&&(a=Gu(Gu({},a),t[1]));const{fetch:s=(e=Gj)==null?void 0:e.fetch,initialData:l,timeout:u}=a,c=iI(),f=iI(),d=iI(),h=Oe(!1),v=Oe(!1),p=Oe(!1),g=Oe(null),m=f_(null),y=Oe(null),b=f_(l),x=re(()=>n&&v.value);let w,S;const C=()=>{n&&w&&w.abort()},_=P=>{v.value=P,h.value=!P};u&&(S=q5e(C,u,{immediate:!1}));const T=async(P=!1)=>{var F;_(!0),y.value=null,g.value=null,p.value=!1,w=void 0,n&&(w=new AbortController,w.signal.onabort=()=>p.value=!0,i=Wj(Gu({},i),{signal:w.signal}));const $={method:o.method,headers:{}};if(o.payload){const B=aI($.headers);o.payloadType&&(B["Content-Type"]=(F=a$e[o.payloadType])!=null?F:o.payloadType),$.body=o.payloadType==="json"?JSON.stringify(fa(o.payload)):fa(o.payload)}let R=!1;const L={url:fa(r),options:i,cancel:()=>{R=!0}};if(a.beforeFetch&&Object.assign(L,await a.beforeFetch(L)),R||!s)return _(!1),Promise.resolve();let O=null;return S&&S.start(),new Promise((B,U)=>{var W;s(L.url,Wj(Gu(Gu({},$),L.options),{headers:Gu(Gu({},aI($.headers)),aI((W=L.options)==null?void 0:W.headers))})).then(async X=>{if(m.value=X,g.value=X.status,O=await X[o.type](),a.afterFetch&&({data:O}=await a.afterFetch({data:O,response:X})),b.value=O,!X.ok)throw new Error(X.statusText);c.trigger(X),B(X)}).catch(async X=>{let ae=X.message||X.name;a.onFetchError&&({data:O,error:ae}=await a.onFetchError({data:O,error:X})),b.value=O,y.value=ae,f.trigger(X),P?U(X):B(void 0)}).finally(()=>{_(!1),S&&S.stop(),d.trigger(null)})})};fn(()=>[fa(r),fa(a.refetch)],()=>fa(a.refetch)&&T(),{deep:!0});const E={isFinished:h,statusCode:g,response:m,error:y,data:b,isFetching:v,canAbort:x,aborted:p,abort:C,execute:T,onFetchResponse:c.on,onFetchError:f.on,onFetchFinally:d.on,get:M("get"),put:M("put"),post:M("post"),delete:M("delete"),json:k("json"),text:k("text"),blob:k("blob"),arrayBuffer:k("arrayBuffer"),formData:k("formData")};function M(P){return(F,$)=>{if(!v.value)return o.method=P,o.payload=F,o.payloadType=$,io(o.payload)&&fn(()=>[fa(o.payload),fa(a.refetch)],()=>fa(a.refetch)&&T(),{deep:!0}),!$&&fa(F)&&Object.getPrototypeOf(fa(F))===Object.prototype&&(o.payloadType="json"),E}}function k(P){return()=>{if(!v.value)return o.type=P,E}}return a.immediate&&setTimeout(T,0),E}var Yj;(function(r){r.UP="UP",r.RIGHT="RIGHT",r.DOWN="DOWN",r.LEFT="LEFT",r.NONE="NONE"})(Yj||(Yj={}));let RS=[];const Xj=new WeakMap;function o$e(){RS.forEach(r=>r(...Xj.get(r))),RS=[]}function OS(r,...t){Xj.set(r,t),!RS.includes(r)&&RS.push(r)===1&&requestAnimationFrame(o$e)}function Vd(r,t){let{target:e}=r;for(;e;){if(e.dataset&&e.dataset[t]!==void 0)return!0;e=e.parentElement}return!1}function $o(r){return typeof r=="string"?r.endsWith("px")?Number(r.slice(0,r.length-2)):Number(r):r}function fo(r){if(r!=null)return typeof r=="number"?`${r}px`:r.endsWith("px")?r:`${r}px`}function LS(r,t){const e=r.trim().split(/\s+/g),n={top:e[0]};switch(e.length){case 1:n.right=e[0],n.bottom=e[0],n.left=e[0];break;case 2:n.right=e[1],n.left=e[1],n.bottom=e[0];break;case 3:n.right=e[1],n.bottom=e[2],n.left=e[1];break;case 4:n.right=e[1],n.bottom=e[2],n.left=e[3];break;default:throw new Error("[seemly/getMargin]:"+r+" is not a valid value.")}return t===void 0?n:n[t]}function s$e(r,t){const[e,n]=r.split(" ");return t?t==="row"?e:n:{row:e,col:n||e}}var qj={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"};const bp="^\\s*",xp="\\s*$",Hd="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",Wd="([0-9A-Fa-f])",jd="([0-9A-Fa-f]{2})",l$e=new RegExp(`${bp}rgb\\s*\\(${Hd},${Hd},${Hd}\\)${xp}`),u$e=new RegExp(`${bp}rgba\\s*\\(${Hd},${Hd},${Hd},${Hd}\\)${xp}`),c$e=new RegExp(`${bp}#${Wd}${Wd}${Wd}${xp}`),f$e=new RegExp(`${bp}#${jd}${jd}${jd}${xp}`),d$e=new RegExp(`${bp}#${Wd}${Wd}${Wd}${Wd}${xp}`),h$e=new RegExp(`${bp}#${jd}${jd}${jd}${jd}${xp}`);function zo(r){return parseInt(r,16)}function Yd(r){try{let t;if(t=f$e.exec(r))return[zo(t[1]),zo(t[2]),zo(t[3]),1];if(t=l$e.exec(r))return[ho(t[1]),ho(t[5]),ho(t[9]),1];if(t=u$e.exec(r))return[ho(t[1]),ho(t[5]),ho(t[9]),Jy(t[13])];if(t=c$e.exec(r))return[zo(t[1]+t[1]),zo(t[2]+t[2]),zo(t[3]+t[3]),1];if(t=h$e.exec(r))return[zo(t[1]),zo(t[2]),zo(t[3]),Jy(zo(t[4])/255)];if(t=d$e.exec(r))return[zo(t[1]+t[1]),zo(t[2]+t[2]),zo(t[3]+t[3]),Jy(zo(t[4]+t[4])/255)];if(r in qj)return Yd(qj[r]);throw new Error(`[seemly/rgba]: Invalid color value ${r}.`)}catch(t){throw t}}function v$e(r){return r>1?1:r<0?0:r}function oI(r,t,e,n){return`rgba(${ho(r)}, ${ho(t)}, ${ho(e)}, ${v$e(n)})`}function sI(r,t,e,n,i){return ho((r*t*(1-n)+e*n)/i)}function yi(r,t){Array.isArray(r)||(r=Yd(r)),Array.isArray(t)||(t=Yd(t));const e=r[3],n=t[3],i=Jy(e+n-e*n);return oI(sI(r[0],e,t[0],n,i),sI(r[1],e,t[1],n,i),sI(r[2],e,t[2],n,i),i)}function jr(r,t){const[e,n,i,a=1]=Array.isArray(r)?r:Yd(r);return t.alpha?oI(e,n,i,t.alpha):oI(e,n,i,a)}function FS(r,t){const[e,n,i,a=1]=Array.isArray(r)?r:Yd(r),{lightness:o=1,alpha:s=1}=t;return p$e([e*o,n*o,i*o,a*s])}function Jy(r){const t=Math.round(Number(r)*100)/100;return t>1?1:t<0?0:t}function ho(r){const t=Math.round(Number(r));return t>255?255:t<0?0:t}function p$e(r){const[t,e,n]=r;return 3 in r?`rgba(${ho(t)}, ${ho(e)}, ${ho(n)}, ${Jy(r[3])})`:`rgba(${ho(t)}, ${ho(e)}, ${ho(n)}, 1)`}globalThis&&globalThis.__awaiter;function e0(r=8){return Math.random().toString(16).slice(2,2+r)}function g$e(r,t){const e=[];for(let n=0;n<r;++n)e.push(t);return e}const lI=Symbol("formItem");function Xl(r,{defaultSize:t="medium",mergedSize:e,mergedDisabled:n}={}){const i=or(lI,null);rn(lI,null);const a=re(e?()=>e(i):()=>{const{size:s}=r;if(s)return s;if(i){const{mergedSize:l}=i;if(l.value!==void 0)return l.value}return t}),o=re(n?()=>n(i):()=>{const{disabled:s}=r;return s!==void 0?s:i?i.disabled.value:!1});return es(()=>{i&&i.restoreValidation()}),{mergedSizeRef:a,mergedDisabledRef:o,nTriggerFormBlur(){i&&i.handleContentBlur()},nTriggerFormChange(){i&&i.handleContentChange()},nTriggerFormFocus(){i&&i.handleContentFocus()},nTriggerFormInput(){i&&i.handleContentInput()}}}var m$e=typeof global=="object"&&global&&global.Object===Object&&global,Kj=m$e,y$e=typeof self=="object"&&self&&self.Object===Object&&self,b$e=Kj||y$e||Function("return this")(),wp=b$e,x$e=wp.Symbol,Sp=x$e,Zj=Object.prototype,w$e=Zj.hasOwnProperty,S$e=Zj.toString,t0=Sp?Sp.toStringTag:void 0;function C$e(r){var t=w$e.call(r,t0),e=r[t0];try{r[t0]=void 0;var n=!0}catch{}var i=S$e.call(r);return n&&(t?r[t0]=e:delete r[t0]),i}var E$e=Object.prototype,_$e=E$e.toString;function T$e(r){return _$e.call(r)}var A$e="[object Null]",M$e="[object Undefined]",Qj=Sp?Sp.toStringTag:void 0;function r0(r){return r==null?r===void 0?M$e:A$e:Qj&&Qj in Object(r)?C$e(r):T$e(r)}function Cp(r){return r!=null&&typeof r=="object"}var k$e="[object Symbol]";function uI(r){return typeof r=="symbol"||Cp(r)&&r0(r)==k$e}function I$e(r,t){for(var e=-1,n=r==null?0:r.length,i=Array(n);++e<n;)i[e]=t(r[e],e,r);return i}var P$e=Array.isArray,Ep=P$e,D$e=1/0,Jj=Sp?Sp.prototype:void 0,eY=Jj?Jj.toString:void 0;function tY(r){if(typeof r=="string")return r;if(Ep(r))return I$e(r,tY)+"";if(uI(r))return eY?eY.call(r):"";var t=r+"";return t=="0"&&1/r==-D$e?"-0":t}function Xd(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}function rY(r){return r}var R$e="[object AsyncFunction]",O$e="[object Function]",L$e="[object GeneratorFunction]",F$e="[object Proxy]";function cI(r){if(!Xd(r))return!1;var t=r0(r);return t==O$e||t==L$e||t==R$e||t==F$e}var N$e=wp["__core-js_shared__"],fI=N$e,nY=function(){var r=/[^.]+$/.exec(fI&&fI.keys&&fI.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function B$e(r){return!!nY&&nY in r}var $$e=Function.prototype,z$e=$$e.toString;function G$e(r){if(r!=null){try{return z$e.call(r)}catch{}try{return r+""}catch{}}return""}var U$e=/[\\^$.*+?()[\]{}|]/g,V$e=/^\[object .+?Constructor\]$/,H$e=Function.prototype,W$e=Object.prototype,j$e=H$e.toString,Y$e=W$e.hasOwnProperty,X$e=RegExp("^"+j$e.call(Y$e).replace(U$e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function q$e(r){if(!Xd(r)||B$e(r))return!1;var t=cI(r)?X$e:V$e;return t.test(G$e(r))}function K$e(r,t){return r==null?void 0:r[t]}function dI(r,t){var e=K$e(r,t);return q$e(e)?e:void 0}var iY=Object.create,Z$e=function(){function r(){}return function(t){if(!Xd(t))return{};if(iY)return iY(t);r.prototype=t;var e=new r;return r.prototype=void 0,e}}(),Q$e=Z$e;function J$e(r,t,e){switch(e.length){case 0:return r.call(t);case 1:return r.call(t,e[0]);case 2:return r.call(t,e[0],e[1]);case 3:return r.call(t,e[0],e[1],e[2])}return r.apply(t,e)}function e4e(r,t){var e=-1,n=r.length;for(t||(t=Array(n));++e<n;)t[e]=r[e];return t}var t4e=800,r4e=16,n4e=Date.now;function i4e(r){var t=0,e=0;return function(){var n=n4e(),i=r4e-(n-e);if(e=n,i>0){if(++t>=t4e)return arguments[0]}else t=0;return r.apply(void 0,arguments)}}function a4e(r){return function(){return r}}var o4e=function(){try{var r=dI(Object,"defineProperty");return r({},"",{}),r}catch{}}(),NS=o4e,s4e=NS?function(r,t){return NS(r,"toString",{configurable:!0,enumerable:!1,value:a4e(t),writable:!0})}:rY,l4e=s4e,u4e=i4e(l4e),c4e=u4e,f4e=9007199254740991,d4e=/^(?:0|[1-9]\d*)$/;function aY(r,t){var e=typeof r;return t=t==null?f4e:t,!!t&&(e=="number"||e!="symbol"&&d4e.test(r))&&r>-1&&r%1==0&&r<t}function hI(r,t,e){t=="__proto__"&&NS?NS(r,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):r[t]=e}function BS(r,t){return r===t||r!==r&&t!==t}var h4e=Object.prototype,v4e=h4e.hasOwnProperty;function p4e(r,t,e){var n=r[t];(!(v4e.call(r,t)&&BS(n,e))||e===void 0&&!(t in r))&&hI(r,t,e)}function g4e(r,t,e,n){var i=!e;e||(e={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=n?n(e[s],r[s],s,e,r):void 0;l===void 0&&(l=r[s]),i?hI(e,s,l):p4e(e,s,l)}return e}var oY=Math.max;function m4e(r,t,e){return t=oY(t===void 0?r.length-1:t,0),function(){for(var n=arguments,i=-1,a=oY(n.length-t,0),o=Array(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=e(o),J$e(r,this,s)}}function y4e(r,t){return c4e(m4e(r,t,rY),r+"")}var b4e=9007199254740991;function sY(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=b4e}function vI(r){return r!=null&&sY(r.length)&&!cI(r)}function x4e(r,t,e){if(!Xd(e))return!1;var n=typeof t;return(n=="number"?vI(e)&&aY(t,e.length):n=="string"&&t in e)?BS(e[t],r):!1}function w4e(r){return y4e(function(t,e){var n=-1,i=e.length,a=i>1?e[i-1]:void 0,o=i>2?e[2]:void 0;for(a=r.length>3&&typeof a=="function"?(i--,a):void 0,o&&x4e(e[0],e[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var s=e[n];s&&r(t,s,n,a)}return t})}var S4e=Object.prototype;function lY(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||S4e;return r===e}function C4e(r,t){for(var e=-1,n=Array(r);++e<r;)n[e]=t(e);return n}var E4e="[object Arguments]";function uY(r){return Cp(r)&&r0(r)==E4e}var cY=Object.prototype,_4e=cY.hasOwnProperty,T4e=cY.propertyIsEnumerable,A4e=uY(function(){return arguments}())?uY:function(r){return Cp(r)&&_4e.call(r,"callee")&&!T4e.call(r,"callee")},pI=A4e;function M4e(){return!1}var fY=typeof exports=="object"&&exports&&!exports.nodeType&&exports,dY=fY&&typeof module=="object"&&module&&!module.nodeType&&module,k4e=dY&&dY.exports===fY,hY=k4e?wp.Buffer:void 0,I4e=hY?hY.isBuffer:void 0,P4e=I4e||M4e,vY=P4e,D4e="[object Arguments]",R4e="[object Array]",O4e="[object Boolean]",L4e="[object Date]",F4e="[object Error]",N4e="[object Function]",B4e="[object Map]",$4e="[object Number]",z4e="[object Object]",G4e="[object RegExp]",U4e="[object Set]",V4e="[object String]",H4e="[object WeakMap]",W4e="[object ArrayBuffer]",j4e="[object DataView]",Y4e="[object Float32Array]",X4e="[object Float64Array]",q4e="[object Int8Array]",K4e="[object Int16Array]",Z4e="[object Int32Array]",Q4e="[object Uint8Array]",J4e="[object Uint8ClampedArray]",eze="[object Uint16Array]",tze="[object Uint32Array]",bi={};bi[Y4e]=bi[X4e]=bi[q4e]=bi[K4e]=bi[Z4e]=bi[Q4e]=bi[J4e]=bi[eze]=bi[tze]=!0;bi[D4e]=bi[R4e]=bi[W4e]=bi[O4e]=bi[j4e]=bi[L4e]=bi[F4e]=bi[N4e]=bi[B4e]=bi[$4e]=bi[z4e]=bi[G4e]=bi[U4e]=bi[V4e]=bi[H4e]=!1;function rze(r){return Cp(r)&&sY(r.length)&&!!bi[r0(r)]}function nze(r){return function(t){return r(t)}}var pY=typeof exports=="object"&&exports&&!exports.nodeType&&exports,n0=pY&&typeof module=="object"&&module&&!module.nodeType&&module,ize=n0&&n0.exports===pY,gI=ize&&Kj.process,aze=function(){try{var r=n0&&n0.require&&n0.require("util").types;return r||gI&&gI.binding&&gI.binding("util")}catch{}}(),gY=aze,mY=gY&&gY.isTypedArray,oze=mY?nze(mY):rze,yY=oze,sze=Object.prototype,lze=sze.hasOwnProperty;function uze(r,t){var e=Ep(r),n=!e&&pI(r),i=!e&&!n&&vY(r),a=!e&&!n&&!i&&yY(r),o=e||n||i||a,s=o?C4e(r.length,String):[],l=s.length;for(var u in r)(t||lze.call(r,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||aY(u,l)))&&s.push(u);return s}function cze(r,t){return function(e){return r(t(e))}}function fze(r){var t=[];if(r!=null)for(var e in Object(r))t.push(e);return t}var dze=Object.prototype,hze=dze.hasOwnProperty;function vze(r){if(!Xd(r))return fze(r);var t=lY(r),e=[];for(var n in r)n=="constructor"&&(t||!hze.call(r,n))||e.push(n);return e}function bY(r){return vI(r)?uze(r,!0):vze(r)}var pze=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gze=/^\w*$/;function mze(r,t){if(Ep(r))return!1;var e=typeof r;return e=="number"||e=="symbol"||e=="boolean"||r==null||uI(r)?!0:gze.test(r)||!pze.test(r)||t!=null&&r in Object(t)}var yze=dI(Object,"create"),i0=yze;function bze(){this.__data__=i0?i0(null):{},this.size=0}function xze(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}var wze="__lodash_hash_undefined__",Sze=Object.prototype,Cze=Sze.hasOwnProperty;function Eze(r){var t=this.__data__;if(i0){var e=t[r];return e===wze?void 0:e}return Cze.call(t,r)?t[r]:void 0}var _ze=Object.prototype,Tze=_ze.hasOwnProperty;function Aze(r){var t=this.__data__;return i0?t[r]!==void 0:Tze.call(t,r)}var Mze="__lodash_hash_undefined__";function kze(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=i0&&t===void 0?Mze:t,this}function qd(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}qd.prototype.clear=bze;qd.prototype.delete=xze;qd.prototype.get=Eze;qd.prototype.has=Aze;qd.prototype.set=kze;function Ize(){this.__data__=[],this.size=0}function $S(r,t){for(var e=r.length;e--;)if(BS(r[e][0],t))return e;return-1}var Pze=Array.prototype,Dze=Pze.splice;function Rze(r){var t=this.__data__,e=$S(t,r);if(e<0)return!1;var n=t.length-1;return e==n?t.pop():Dze.call(t,e,1),--this.size,!0}function Oze(r){var t=this.__data__,e=$S(t,r);return e<0?void 0:t[e][1]}function Lze(r){return $S(this.__data__,r)>-1}function Fze(r,t){var e=this.__data__,n=$S(e,r);return n<0?(++this.size,e.push([r,t])):e[n][1]=t,this}function Uu(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}Uu.prototype.clear=Ize;Uu.prototype.delete=Rze;Uu.prototype.get=Oze;Uu.prototype.has=Lze;Uu.prototype.set=Fze;var Nze=dI(wp,"Map"),xY=Nze;function Bze(){this.size=0,this.__data__={hash:new qd,map:new(xY||Uu),string:new qd}}function $ze(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}function zS(r,t){var e=r.__data__;return $ze(t)?e[typeof t=="string"?"string":"hash"]:e.map}function zze(r){var t=zS(this,r).delete(r);return this.size-=t?1:0,t}function Gze(r){return zS(this,r).get(r)}function Uze(r){return zS(this,r).has(r)}function Vze(r,t){var e=zS(this,r),n=e.size;return e.set(r,t),this.size+=e.size==n?0:1,this}function Qc(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}Qc.prototype.clear=Bze;Qc.prototype.delete=zze;Qc.prototype.get=Gze;Qc.prototype.has=Uze;Qc.prototype.set=Vze;var Hze="Expected a function";function mI(r,t){if(typeof r!="function"||t!=null&&typeof t!="function")throw new TypeError(Hze);var e=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=e.cache;if(a.has(i))return a.get(i);var o=r.apply(this,n);return e.cache=a.set(i,o)||a,o};return e.cache=new(mI.Cache||Qc),e}mI.Cache=Qc;var Wze=500;function jze(r){var t=mI(r,function(n){return e.size===Wze&&e.clear(),n}),e=t.cache;return t}var Yze=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xze=/\\(\\)?/g,qze=jze(function(r){var t=[];return r.charCodeAt(0)===46&&t.push(""),r.replace(Yze,function(e,n,i,a){t.push(i?a.replace(Xze,"$1"):n||e)}),t}),Kze=qze;function wY(r){return r==null?"":tY(r)}function Zze(r,t){return Ep(r)?r:mze(r,t)?[r]:Kze(wY(r))}var Qze=1/0;function Jze(r){if(typeof r=="string"||uI(r))return r;var t=r+"";return t=="0"&&1/r==-Qze?"-0":t}function e6e(r,t){t=Zze(t,r);for(var e=0,n=t.length;r!=null&&e<n;)r=r[Jze(t[e++])];return e&&e==n?r:void 0}function yI(r,t,e){var n=r==null?void 0:e6e(r,t);return n===void 0?e:n}var t6e=cze(Object.getPrototypeOf,Object),SY=t6e,r6e="[object Object]",n6e=Function.prototype,i6e=Object.prototype,CY=n6e.toString,a6e=i6e.hasOwnProperty,o6e=CY.call(Object);function s6e(r){if(!Cp(r)||r0(r)!=r6e)return!1;var t=SY(r);if(t===null)return!0;var e=a6e.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&CY.call(e)==o6e}function l6e(r,t,e){var n=-1,i=r.length;t<0&&(t=-t>i?0:i+t),e=e>i?i:e,e<0&&(e+=i),i=t>e?0:e-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=r[n+t];return a}function u6e(r,t,e){var n=r.length;return e=e===void 0?n:e,!t&&e>=n?r:l6e(r,t,e)}var c6e="\\ud800-\\udfff",f6e="\\u0300-\\u036f",d6e="\\ufe20-\\ufe2f",h6e="\\u20d0-\\u20ff",v6e=f6e+d6e+h6e,p6e="\\ufe0e\\ufe0f",g6e="\\u200d",m6e=RegExp("["+g6e+c6e+v6e+p6e+"]");function EY(r){return m6e.test(r)}function y6e(r){return r.split("")}var _Y="\\ud800-\\udfff",b6e="\\u0300-\\u036f",x6e="\\ufe20-\\ufe2f",w6e="\\u20d0-\\u20ff",S6e=b6e+x6e+w6e,C6e="\\ufe0e\\ufe0f",E6e="["+_Y+"]",bI="["+S6e+"]",xI="\\ud83c[\\udffb-\\udfff]",_6e="(?:"+bI+"|"+xI+")",TY="[^"+_Y+"]",AY="(?:\\ud83c[\\udde6-\\uddff]){2}",MY="[\\ud800-\\udbff][\\udc00-\\udfff]",T6e="\\u200d",kY=_6e+"?",IY="["+C6e+"]?",A6e="(?:"+T6e+"(?:"+[TY,AY,MY].join("|")+")"+IY+kY+")*",M6e=IY+kY+A6e,k6e="(?:"+[TY+bI+"?",bI,AY,MY,E6e].join("|")+")",I6e=RegExp(xI+"(?="+xI+")|"+k6e+M6e,"g");function P6e(r){return r.match(I6e)||[]}function D6e(r){return EY(r)?P6e(r):y6e(r)}function R6e(r){return function(t){t=wY(t);var e=EY(t)?D6e(t):void 0,n=e?e[0]:t.charAt(0),i=e?u6e(e,1).join(""):t.slice(1);return n[r]()+i}}var O6e=R6e("toUpperCase"),L6e=O6e;function F6e(){this.__data__=new Uu,this.size=0}function N6e(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e}function B6e(r){return this.__data__.get(r)}function $6e(r){return this.__data__.has(r)}var z6e=200;function G6e(r,t){var e=this.__data__;if(e instanceof Uu){var n=e.__data__;if(!xY||n.length<z6e-1)return n.push([r,t]),this.size=++e.size,this;e=this.__data__=new Qc(n)}return e.set(r,t),this.size=e.size,this}function _p(r){var t=this.__data__=new Uu(r);this.size=t.size}_p.prototype.clear=F6e;_p.prototype.delete=N6e;_p.prototype.get=B6e;_p.prototype.has=$6e;_p.prototype.set=G6e;var PY=typeof exports=="object"&&exports&&!exports.nodeType&&exports,DY=PY&&typeof module=="object"&&module&&!module.nodeType&&module,U6e=DY&&DY.exports===PY,RY=U6e?wp.Buffer:void 0,OY=RY?RY.allocUnsafe:void 0;function V6e(r,t){if(t)return r.slice();var e=r.length,n=OY?OY(e):new r.constructor(e);return r.copy(n),n}var H6e=wp.Uint8Array,LY=H6e;function W6e(r){var t=new r.constructor(r.byteLength);return new LY(t).set(new LY(r)),t}function j6e(r,t){var e=t?W6e(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)}function Y6e(r){return typeof r.constructor=="function"&&!lY(r)?Q$e(SY(r)):{}}function X6e(r){return function(t,e,n){for(var i=-1,a=Object(t),o=n(t),s=o.length;s--;){var l=o[r?s:++i];if(e(a[l],l,a)===!1)break}return t}}var q6e=X6e(),K6e=q6e;function wI(r,t,e){(e!==void 0&&!BS(r[t],e)||e===void 0&&!(t in r))&&hI(r,t,e)}function Z6e(r){return Cp(r)&&vI(r)}function SI(r,t){if(!(t==="constructor"&&typeof r[t]=="function")&&t!="__proto__")return r[t]}function Q6e(r){return g4e(r,bY(r))}function J6e(r,t,e,n,i,a,o){var s=SI(r,e),l=SI(t,e),u=o.get(l);if(u){wI(r,e,u);return}var c=a?a(s,l,e+"",r,t,o):void 0,f=c===void 0;if(f){var d=Ep(l),h=!d&&vY(l),v=!d&&!h&&yY(l);c=l,d||h||v?Ep(s)?c=s:Z6e(s)?c=e4e(s):h?(f=!1,c=V6e(l,!0)):v?(f=!1,c=j6e(l,!0)):c=[]:s6e(l)||pI(l)?(c=s,pI(s)?c=Q6e(s):(!Xd(s)||cI(s))&&(c=Y6e(l))):f=!1}f&&(o.set(l,c),i(c,l,n,a,o),o.delete(l)),wI(r,e,c)}function FY(r,t,e,n,i){r!==t&&K6e(t,function(a,o){if(i||(i=new _p),Xd(a))J6e(r,t,o,e,FY,n,i);else{var s=n?n(SI(r,o),a,o+"",r,t,i):void 0;s===void 0&&(s=a),wI(r,o,s)}},bY)}var eGe=w4e(function(r,t,e){FY(r,t,e)}),a0=eGe;const NY=Symbol("@css-render/vue3-ssr");function tGe(r,t){return`<style cssr-id="${r}">
${t}
</style>`}function rGe(r,t){const e=or(NY,null);if(e===null){console.error("[css-render/vue3-ssr]: no ssr context found.");return}const{styles:n,ids:i}=e;i.has(r)||n!==null&&(i.add(r),n.push(tGe(r,t)))}function Tp(){const r=or(NY,null);if(r!==null)return{adapter:rGe,context:r}}function nGe(r){let t=0;for(let e=0;e<r.length;++e)r[e]==="&"&&++t;return t}const BY=/\s*,(?![^(]*\))\s*/g,iGe=/\s+/g;function aGe(r,t){const e=[];return t.split(BY).forEach(n=>{let i=nGe(n);if(i){if(i===1){r.forEach(o=>{e.push(n.replace("&",o))});return}}else{r.forEach(o=>{e.push((o&&o+" ")+n)});return}let a=[n];for(;i--;){const o=[];a.forEach(s=>{r.forEach(l=>{o.push(s.replace("&",l))})}),a=o}a.forEach(o=>e.push(o))}),e}function oGe(r,t){const e=[];return t.split(BY).forEach(n=>{r.forEach(i=>{e.push((i&&i+" ")+n)})}),e}function sGe(r){let t=[""];return r.forEach(e=>{e=e&&e.trim(),!!e&&(e.includes("&")?t=aGe(t,e):t=oGe(t,e))}),t.join(", ").replace(iGe," ")}const lGe=/[A-Z]/g;function $Y(r){return r.replace(lGe,t=>"-"+t.toLowerCase())}function uGe(r,t="  "){return typeof r=="object"&&r!==null?` {
`+Object.entries(r).map(e=>t+`  ${$Y(e[0])}: ${e[1]};`).join(`
`)+`
`+t+"}":`: ${r};`}function cGe(r,t,e){return typeof r=="function"?r({context:t.context,props:e}):r}function zY(r,t,e,n){if(!t)return"";const i=cGe(t,e,n);if(!i)return"";if(typeof i=="string")return`${r} {
${i}
}`;const a=Object.keys(i);if(a.length===0)return e.config.keepEmptyBlock?r+` {
}`:"";const o=r?[r+" {"]:[];return a.forEach(s=>{const l=i[s];if(s==="raw"){o.push(`
`+l+`
`);return}s=$Y(s),l!=null&&o.push(`  ${s}${uGe(l)}`)}),r&&o.push("}"),o.join(`
`)}function CI(r,t,e){!r||r.forEach(n=>{if(Array.isArray(n))CI(n,t,e);else if(typeof n=="function"){const i=n(t);Array.isArray(i)?CI(i,t,e):i&&e(i)}else n&&e(n)})}function GY(r,t,e,n,i,a){const o=r.$;!o||typeof o=="string"?t.push(o):typeof o=="function"?t.push(o({context:n.context,props:i})):(o.before&&o.before(n.context),!o.$||typeof o.$=="string"?t.push(o.$):o.$&&t.push(o.$({context:n.context,props:i})));const s=sGe(t),l=zY(s,r.props,n,i);a&&l&&a.insertRule(l),!a&&l.length&&e.push(l),r.children&&CI(r.children,{context:n.context,props:i},u=>{if(typeof u=="string"){const c=zY(s,{raw:u},n,i);a?a.insertRule(c):e.push(c)}else GY(u,t,e,n,i,a)}),t.pop(),o&&o.after&&o.after(n.context)}function UY(r,t,e,n=!1){const i=[];return GY(r,[],i,t,e,n?r.instance.__styleSheet:void 0),n?"":i.join(`

`)}function fGe(r){for(var t=0,e,n=0,i=r.length;i>=4;++n,i-=4)e=r.charCodeAt(n)&255|(r.charCodeAt(++n)&255)<<8|(r.charCodeAt(++n)&255)<<16|(r.charCodeAt(++n)&255)<<24,e=(e&65535)*1540483477+((e>>>16)*59797<<16),e^=e>>>24,t=(e&65535)*1540483477+((e>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(r.charCodeAt(n+2)&255)<<16;case 2:t^=(r.charCodeAt(n+1)&255)<<8;case 1:t^=r.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}function VY(r){if(!r)return;const t=r.parentElement;t&&t.removeChild(r)}function GS(r){return document.querySelector(`style[cssr-id="${r}"]`)}function dGe(r){const t=document.createElement("style");return t.setAttribute("cssr-id",r),t}typeof window!="undefined"&&(window.__cssrContext={});function hGe(r,t,e){const{els:n}=t;if(e===void 0)n.forEach(VY),t.els=[];else{const i=GS(e);i&&n.includes(i)&&(VY(i),t.els=n.filter(a=>a!==i))}}function vGe(r,t){r.push(t)}function pGe(r,t,e,n,i,a,o,s){var l;if(a&&!s){if(e===void 0){console.error("[css-render/mount]: `id` is required in `slient` mode.");return}const d=window.__cssrContext;d[e]||(d[e]=!0,UY(t,r,n,a));return}let u;if(e===void 0&&(u=t.render(n),e=fGe(u)),s){s.adapter(e,u!=null?u:t.render(n));return}const c=GS(e);if(c!==null&&!o)return c;const f=c!=null?c:dGe(e);if(u===void 0&&(u=t.render(n)),f.textContent=u,c!==null)return c;if(i){const d=(l=document.head.querySelector("style, link"))!==null&&l!==void 0?l:null;document.head.insertBefore(f,d)}else document.head.appendChild(f);return vGe(t.els,f),c!=null?c:f}function gGe(r){return UY(this,this.instance,r)}function mGe(r={}){const{id:t,ssr:e,props:n,head:i=!1,slient:a=!1,force:o=!1}=r;return pGe(this.instance,this,t,n,i,a,o,e)}function yGe(r={}){const{id:t}=r;hGe(this.instance,this,t)}const US=function(r,t,e,n){return{instance:r,$:t,props:e,children:n,els:[],render:gGe,mount:mGe,unmount:yGe}},bGe=function(r,t,e,n){return Array.isArray(t)?US(r,{$:null},null,t):Array.isArray(e)?US(r,t,null,e):Array.isArray(n)?US(r,t,e,n):US(r,t,e,null)};function HY(r={}){let t=null;const e={c:(...n)=>bGe(e,...n),use:(n,...i)=>n.install(e,...i),find:GS,context:{},config:r,get __styleSheet(){if(!t){const n=document.createElement("style");return document.head.appendChild(n),t=document.styleSheets[document.styleSheets.length-1],t}return t}};return e}function xGe(r,t){if(r===void 0)return!1;if(t){const{context:{ids:e}}=t;return e.has(r)}return GS(r)!==null}function wGe(r){let t=".",e="__",n="--",i;if(r){let v=r.blockPrefix;v&&(t=v),v=r.elementPrefix,v&&(e=v),v=r.modifierPrefix,v&&(n=v)}const a={install(v){i=v.c;const p=v.context;p.bem={},p.bem.b=null,p.bem.els=null}};function o(v){let p,g;return{before(m){p=m.bem.b,g=m.bem.els,m.bem.els=null},after(m){m.bem.b=p,m.bem.els=g},$({context:m,props:y}){return v=typeof v=="string"?v:v({context:m,props:y}),m.bem.b=v,`${(y==null?void 0:y.bPrefix)||t}${m.bem.b}`}}}function s(v){let p;return{before(g){p=g.bem.els},after(g){g.bem.els=p},$({context:g,props:m}){return v=typeof v=="string"?v:v({context:g,props:m}),g.bem.els=v.split(",").map(y=>y.trim()),g.bem.els.map(y=>`${(m==null?void 0:m.bPrefix)||t}${g.bem.b}__${y}`).join(", ")}}}function l(v){return{$({context:p,props:g}){v=typeof v=="string"?v:v({context:p,props:g});const m=v.split(",").map(x=>x.trim());function y(x){return m.map(w=>`&${(g==null?void 0:g.bPrefix)||t}${p.bem.b}${x!==void 0?`${e}${x}`:""}${n}${w}`).join(", ")}const b=p.bem.els;return b!==null?y(b[0]):y()}}}function u(v){return{$({context:p,props:g}){v=typeof v=="string"?v:v({context:p,props:g});const m=p.bem.els;return`&:not(${(g==null?void 0:g.bPrefix)||t}${p.bem.b}${m!==null&&m.length>0?`${e}${m[0]}`:""}${n}${v})`}}}return Object.assign(a,{cB:(...v)=>i(o(v[0]),v[1],v[2]),cE:(...v)=>i(s(v[0]),v[1],v[2]),cM:(...v)=>i(l(v[0]),v[1],v[2]),cNotM:(...v)=>i(u(v[0]),v[1],v[2])}),a}function Ot(r,t){return r+(t==="default"?"":t.replace(/^[a-z]/,e=>e.toUpperCase()))}Ot("abc","def");const SGe="n",Vu=`.${SGe}-`,CGe="__",WY="--",jY=HY(),YY=wGe({blockPrefix:Vu,elementPrefix:CGe,modifierPrefix:WY});jY.use(YY);const{c:_e,find:Aft}=jY,{cB:de,cE:Se,cM:Ge,cNotM:Mn}=YY;function XY(r,t){return r===null?t:_e([({props:{bPrefix:e}})=>_e(`${e||Vu}form-item`,[_e(`${e||Vu}form-item-blank`,[_e(`&${e||Vu}form-item-blank${WY}${r}`,[t])])])])}function o0(r){return _e(({props:{bPrefix:t}})=>`${t||Vu}modal, ${t||Vu}drawer`,[r])}function VS(r){return _e(({props:{bPrefix:t}})=>`${t||Vu}popover:not(${t||Vu}tooltip)`,[r])}function qY(r){return _e(({props:{bPrefix:t}})=>`&${t||Vu}modal`,r)}const EGe=(...r)=>_e(">",[de(...r)]);var Jc={fontFamily:'v-sans, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontFamilyMono:"v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace",fontWeight:"400",fontWeightStrong:"500",cubicBezierEaseInOut:"cubic-bezier(.4, 0, .2, 1)",cubicBezierEaseOut:"cubic-bezier(0, 0, .2, 1)",cubicBezierEaseIn:"cubic-bezier(.4, 0, 1, 1)",borderRadius:"3px",borderRadiusSmall:"2px",fontSize:"14px",fontSizeTiny:"12px",fontSizeSmall:"14px",fontSizeMedium:"14px",fontSizeLarge:"15px",fontSizeHuge:"16px",lineHeight:"1.6",heightTiny:"22px",heightSmall:"28px",heightMedium:"34px",heightLarge:"40px",heightHuge:"46px",transformDebounceScale:"scale(1)"};const{fontSize:_Ge,fontFamily:TGe,lineHeight:AGe}=Jc;var KY=_e("body",`
 margin: 0;
 font-size: ${_Ge};
 font-family: ${TGe};
 line-height: ${AGe};
 -webkit-text-size-adjust: 100%;
 -webkit-tap-highlight-color: transparent;
`,[_e("input",`
 font-family: inherit;
 font-size: inherit;
 `)]);function MGe(r){const t=Oe(!!r.value);if(t.value)return wl(t);const e=fn(r,n=>{n&&(t.value=!0,e())});return wl(t)}function xi(r){const t=re(r),e=Oe(t.value);return fn(t,n=>{e.value=n}),typeof r=="function"?e:{__v_isRef:!0,get value(){return e.value},set value(n){r.set(n)}}}function EI(){return lv()!==null}const _I=typeof window!="undefined";let Ap,s0;const kGe=()=>{var r,t;Ap=_I?(t=(r=document)===null||r===void 0?void 0:r.fonts)===null||t===void 0?void 0:t.ready:void 0,s0=!1,Ap!==void 0?Ap.then(()=>{s0=!0}):s0=!0};kGe();function IGe(r){if(s0)return;let t=!1;Ss(()=>{s0||Ap==null||Ap.then(()=>{t||r()})}),es(()=>{t=!0})}const PGe={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function DGe(r,t,e){if(r==="mousemoveoutside"){const n=i=>{t.contains(i.target)||e(i)};return{mousemove:n,touchstart:n}}else if(r==="clickoutside"){let n=!1;const i=o=>{n=!t.contains(o.target)},a=o=>{!n||t.contains(o.target)||e(o)};return{mousedown:i,mouseup:a,touchstart:i,touchend:a}}return console.error(`[evtd/create-trap-handler]: name \`${r}\` is invalid. This could be a bug of evtd.`),{}}function ZY(r,t,e){const n=PGe[r];let i=n.get(t);i===void 0&&n.set(t,i=new WeakMap);let a=i.get(e);return a===void 0&&i.set(e,a=DGe(r,t,e)),a}function RGe(r,t,e,n){if(r==="mousemoveoutside"||r==="clickoutside"){const i=ZY(r,t,e);return Object.keys(i).forEach(a=>{Fi(a,document,i[a],n)}),!0}return!1}function OGe(r,t,e,n){if(r==="mousemoveoutside"||r==="clickoutside"){const i=ZY(r,t,e);return Object.keys(i).forEach(a=>{wi(a,document,i[a],n)}),!0}return!1}function LGe(){if(typeof window=="undefined")return{on:()=>{},off:()=>{}};const r=new WeakMap,t=new WeakMap;function e(){r.set(this,!0)}function n(){r.set(this,!0),t.set(this,!0)}function i(C,_,T){const E=C[_];return C[_]=function(){return T.apply(C,arguments),E.apply(C,arguments)},C}function a(C,_){C[_]=Event.prototype[_]}const o=new WeakMap,s=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function l(){var C;return(C=o.get(this))!==null&&C!==void 0?C:null}function u(C,_){s!==void 0&&Object.defineProperty(C,"currentTarget",{configurable:!0,enumerable:!0,get:_!=null?_:s.get})}const c={bubble:{},capture:{}},f={};function d(){const C=function(_){const{type:T,eventPhase:E,target:M,bubbles:k}=_;if(E===2)return;const P=E===1?"capture":"bubble";let F=M;const $=[];for(;F===null&&(F=window),$.push(F),F!==window;)F=F.parentNode||null;const R=c.capture[T],L=c.bubble[T];if(i(_,"stopPropagation",e),i(_,"stopImmediatePropagation",n),u(_,l),P==="capture"){if(R===void 0)return;for(let O=$.length-1;O>=0&&!r.has(_);--O){const B=$[O],U=R.get(B);if(U!==void 0){o.set(_,B);for(const W of U){if(t.has(_))break;W(_)}}if(O===0&&!k&&L!==void 0){const W=L.get(B);if(W!==void 0)for(const X of W){if(t.has(_))break;X(_)}}}}else if(P==="bubble"){if(L===void 0)return;for(let O=0;O<$.length&&!r.has(_);++O){const B=$[O],U=L.get(B);if(U!==void 0){o.set(_,B);for(const W of U){if(t.has(_))break;W(_)}}}}a(_,"stopPropagation"),a(_,"stopImmediatePropagation"),u(_)};return C.displayName="evtdUnifiedHandler",C}function h(){const C=function(_){const{type:T,eventPhase:E}=_;if(E!==2)return;const M=f[T];M!==void 0&&M.forEach(k=>k(_))};return C.displayName="evtdUnifiedWindowEventHandler",C}const v=d(),p=h();function g(C,_){const T=c[C];return T[_]===void 0&&(T[_]=new Map,window.addEventListener(_,v,C==="capture")),T[_]}function m(C){return f[C]===void 0&&(f[C]=new Set,window.addEventListener(C,p)),f[C]}function y(C,_){let T=C.get(_);return T===void 0&&C.set(_,T=new Set),T}function b(C,_,T,E){const M=c[_][T];if(M!==void 0){const k=M.get(C);if(k!==void 0&&k.has(E))return!0}return!1}function x(C,_){const T=f[C];return!!(T!==void 0&&T.has(_))}function w(C,_,T,E){let M;if(typeof E=="object"&&E.once===!0?M=R=>{S(C,_,M,E),T(R)}:M=T,RGe(C,_,M,E))return;const P=E===!0||typeof E=="object"&&E.capture===!0?"capture":"bubble",F=g(P,C),$=y(F,_);if($.has(M)||$.add(M),_===window){const R=m(C);R.has(M)||R.add(M)}}function S(C,_,T,E){if(OGe(C,_,T,E))return;const k=E===!0||typeof E=="object"&&E.capture===!0,P=k?"capture":"bubble",F=g(P,C),$=y(F,_);if(_===window&&!b(_,k?"bubble":"capture",C,T)&&x(C,T)){const L=f[C];L.delete(T),L.size===0&&(window.removeEventListener(C,p),f[C]=void 0)}$.has(T)&&$.delete(T),$.size===0&&F.delete(_),F.size===0&&(window.removeEventListener(C,v,P==="capture"),c[P][C]=void 0)}return{on:w,off:S}}const{on:Fi,off:wi}=LGe(),QY=Oe(null);function JY(r){QY.value={x:r.clientX,y:r.clientY}}let HS=0,eX=!0;function tX(){if(!_I)return wl(Oe(null));HS===0&&Fi("click",window,JY,!0);const r=()=>{HS+=1};return eX&&(eX=EI())?(cc(r),es(()=>{HS-=1,HS===0&&wi("click",window,JY,!0)})):r(),wl(QY)}const FGe=Oe(void 0);let WS=0;function rX(){FGe.value=Date.now()}let nX=!0;function iX(r){if(!_I)return wl(Oe(!1));const t=Oe(!1);let e=null;function n(){e!==null&&window.clearTimeout(e)}function i(){n(),t.value=!0,e=window.setTimeout(()=>{t.value=!1},r)}WS===0&&Fi("click",window,rX,!0);const a=()=>{WS+=1,Fi("click",window,i,!0)};return nX&&(nX=EI())?(cc(a),es(()=>{WS-=1,WS===0&&wi("click",window,rX,!0),wi("click",window,i,!0),n()})):a(),wl(t)}function Qi(r,t){return fn(r,e=>{e!==void 0&&(t.value=e)}),re(()=>r.value===void 0?t.value:r.value)}function Kd(){const r=Oe(!1);return Ss(()=>{r.value=!0}),wl(r)}function jS(r,t){return re(()=>{for(const e of t)if(r[e]!==void 0)return r[e];return r[t[t.length-1]]})}const NGe=(typeof window=="undefined"?!1:/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream;function BGe(){return NGe}function TI(r={},t){const e=Gf({ctrl:!1,command:!1,win:!1,shift:!1,tab:!1}),{keydown:n,keyup:i}=r,a=l=>{switch(l.key){case"Control":e.ctrl=!0;break;case"Meta":e.command=!0,e.win=!0;break;case"Shift":e.shift=!0;break;case"Tab":e.tab=!0;break}n!==void 0&&Object.keys(n).forEach(u=>{if(u!==l.key)return;const c=n[u];if(typeof c=="function")c(l);else{const{stop:f=!1,prevent:d=!1}=c;f&&l.stopPropagation(),d&&l.preventDefault(),c.handler(l)}})},o=l=>{switch(l.key){case"Control":e.ctrl=!1;break;case"Meta":e.command=!1,e.win=!1;break;case"Shift":e.shift=!1;break;case"Tab":e.tab=!1;break}i!==void 0&&Object.keys(i).forEach(u=>{if(u!==l.key)return;const c=i[u];if(typeof c=="function")c(l);else{const{stop:f=!1,prevent:d=!1}=c;f&&l.stopPropagation(),d&&l.preventDefault(),c.handler(l)}})},s=()=>{(t===void 0||t.value)&&(Fi("keydown",document,a),Fi("keyup",document,o)),t!==void 0&&fn(t,l=>{l?(Fi("keydown",document,a),Fi("keyup",document,o)):(wi("keydown",document,a),wi("keyup",document,o))})};return EI()?(cc(s),es(()=>{(t===void 0||t.value)&&(wi("keydown",document,a),wi("keyup",document,o))})):s(),wl(e)}function aX(r,t="default",e=[]){const i=r.$slots[t];return i===void 0?e:i()}function Hu(r,t=[],e){const n={};return t.forEach(i=>{n[i]=r[i]}),Object.assign(n,e)}function $Ge(r,t=[],e){const n={};return Object.getOwnPropertyNames(r).forEach(a=>{t.includes(a)||(n[a]=r[a])}),Object.assign(n,e)}function l0(r,t=!0,e=[]){return r.forEach(n=>{if(n!==null){if(typeof n!="object"){(typeof n=="string"||typeof n=="number")&&e.push(qg(String(n)));return}if(Array.isArray(n)){l0(n,t,e);return}if(n.type===Wi){if(n.children===null)return;Array.isArray(n.children)&&l0(n.children,t,e)}else n.type!==Cs&&e.push(n)}}),e}function Tt(r,...t){if(Array.isArray(r))r.forEach(e=>Tt(e,...t));else return r(...t)}function ef(r){return Object.keys(r)}const Ni=(r,...t)=>typeof r=="function"?r(...t):typeof r=="string"?qg(r):typeof r=="number"?qg(String(r)):null;function ql(r,t){console.error(`[naive/${r}]: ${t}`)}function AI(r,t){throw new Error(`[naive/${r}]: ${t}`)}function zGe(r){switch(typeof r){case"string":return r||void 0;case"number":return String(r);default:return}}function MI(r,t="default",e=void 0){const n=r[t];if(!n)return ql("getFirstSlotVNode",`slot[${t}] is empty`),null;const i=l0(n(e));return i.length===1?i[0]:(ql("getFirstSlotVNode",`slot[${t}] should have exactly one child`),null)}function GGe(r){return t=>{t?r.value=t.$el:r.value=null}}const UGe=/^(\d|\.)+$/,oX=/(\d|\.)+/;function sa(r,{c:t=1,offset:e=0,attachPx:n=!0}={}){if(typeof r=="number"){const i=(r+e)*t;return i===0?"0":`${i}px`}else if(typeof r=="string")if(UGe.test(r)){const i=(Number(r)+e)*t;return n?i===0?"0":`${i}px`:`${i}`}else{const i=oX.exec(r);return i?r.replace(oX,String((Number(i[0])+e)*t)):r}return r}const kI=Symbol("modalBody"),sX=Symbol("modal"),II=Symbol("drawerBody"),PI=Symbol("popoverBodyInjection"),DI=Symbol("internal-select-menu"),lX=Symbol("internal-select-menu-body"),uX="__disabled__";function Ao(r){const t=or(kI,null),e=or(II,null),n=or(PI,null),i=or(lX,null);return xi(()=>{var a;const{to:o}=r;return o!==void 0?o===!1?uX:o===!0?"body":o:(t==null?void 0:t.value)?(a=t.value.$el)!==null&&a!==void 0?a:t.value:(e==null?void 0:e.value)?e.value:(n==null?void 0:n.value)?n.value:(i==null?void 0:i.value)?i.value:o!=null?o:"body"})}Ao.tdkey=uX;Ao.propTo={type:[String,Object,Boolean],default:void 0};let cX=!1;function VGe(){cc(()=>{var r;cX||(cX=!0,((r=window==null?void 0:window.CSS)===null||r===void 0?void 0:r.registerProperty)&&(CSS.registerProperty({name:"--color-start",syntax:"<color>",inherits:!1,initialValue:"#0000"}),CSS.registerProperty({name:"--color-end",syntax:"<color>",inherits:!1,initialValue:"#0000"})))})}function HGe(r,t,e){var n;const i=or(r,null);if(i===null)return;const a=(n=lv())===null||n===void 0?void 0:n.proxy;fn(e,o),o(e.value),es(()=>{o(void 0,e.value)});function o(u,c){const f=i[t];c!==void 0&&s(f,c),u!==void 0&&l(f,u)}function s(u,c){u[c]||(u[c]=[]),u[c].splice(u[c].findIndex(f=>f===a),1)}function l(u,c){u[c]||(u[c]=[]),~u[c].findIndex(f=>f===a)||u[c].push(a)}}function WGe(r,t,e){if(!t)return r;const n=Oe(r.value);let i=null;return fn(r,a=>{i!==null&&window.clearTimeout(i),a===!0?e&&!e.value?n.value=!0:i=window.setTimeout(()=>{n.value=!0},t):n.value=!1}),n}const Mp=Symbol("configProviderInjection"),jGe={abstract:Boolean,bordered:{type:Boolean,default:void 0},clsPrefix:String,locale:Object,dateLocale:Object,namespace:String,rtl:Array,tag:{type:String,default:"div"},hljs:Object,theme:Object,themeOverrides:Object,componentOptions:Object,icons:Object,breakpoints:Object,as:{type:String,validator:()=>(ql("config-provider","`as` is deprecated, please use `tag` instead."),!0),default:void 0}};xt({name:"ConfigProvider",alias:["App"],props:jGe,setup(r){const t=or(Mp,null),e=re(()=>{const{theme:f}=r;if(f===null)return;const d=t==null?void 0:t.mergedThemeRef.value;return f===void 0?d:d===void 0?f:Object.assign({},d,f)}),n=re(()=>{const{themeOverrides:f}=r;if(f!==null){if(f===void 0)return t==null?void 0:t.mergedThemeOverridesRef.value;{const d=t==null?void 0:t.mergedThemeOverridesRef.value;return d===void 0?f:a0({},d,f)}}}),i=xi(()=>{const{namespace:f}=r;return f===void 0?t==null?void 0:t.mergedNamespaceRef.value:f}),a=xi(()=>{const{bordered:f}=r;return f===void 0?t==null?void 0:t.mergedBorderedRef.value:f}),o=re(()=>{const{icons:f}=r;return f===void 0?t==null?void 0:t.mergedIconsRef.value:f}),s=re(()=>{const{componentOptions:f}=r;return f!==void 0?f:t==null?void 0:t.mergedComponentPropsRef.value}),l=re(()=>{const{clsPrefix:f}=r;return f!==void 0?f:t==null?void 0:t.mergedClsPrefixRef.value}),u=re(()=>{const{rtl:f}=r;if(f===void 0)return t==null?void 0:t.mergedRtlRef.value;const d={};for(const h of f)d[h.name]=u_(h);return d}),c=re(()=>r.breakpoints||(t==null?void 0:t.mergedBreakpointsRef.value));return rn(Mp,{mergedBreakpointsRef:c,mergedRtlRef:u,mergedIconsRef:o,mergedComponentPropsRef:s,mergedBorderedRef:a,mergedNamespaceRef:i,mergedClsPrefixRef:l,mergedLocaleRef:re(()=>{const{locale:f}=r;if(f!==null)return f===void 0?t==null?void 0:t.mergedLocaleRef.value:f}),mergedDateLocaleRef:re(()=>{const{dateLocale:f}=r;if(f!==null)return f===void 0?t==null?void 0:t.mergedDateLocaleRef.value:f}),mergedHljsRef:re(()=>{const{hljs:f}=r;return f===void 0?t==null?void 0:t.mergedHljsRef.value:f}),mergedThemeRef:e,mergedThemeOverridesRef:n}),{mergedClsPrefix:l,mergedBordered:a,mergedNamespace:i,mergedTheme:e,mergedThemeOverrides:n}},render(){return this.abstract?qr(this.$slots,"default"):I(this.as||this.tag,{class:`${this.mergedClsPrefix||fX}-config-provider`},qr(this.$slots,"default"))}});function Go(r){return r}function rr(r,t,e,n,i,a){const o=Tp();if(e){const u=()=>{const c=a==null?void 0:a.value;e.mount({id:c===void 0?t:c+t,head:!0,props:{bPrefix:c?`.${c}-`:void 0},ssr:o}),KY.mount({id:"naive-ui/global",head:!0,ssr:o})};o?u():cc(u)}const s=or(Mp,null);return re(()=>{var u;const{theme:{common:c,self:f,peers:d={}}={},themeOverrides:h={},builtinThemeOverrides:v={}}=i,{common:p,peers:g}=h,{common:m=void 0,[r]:{common:y=void 0,self:b=void 0,peers:x={}}={}}=(s==null?void 0:s.mergedThemeRef.value)||{},{common:w=void 0,[r]:S={}}=(s==null?void 0:s.mergedThemeOverridesRef.value)||{},{common:C,peers:_={}}=S,T=a0({},c||y||m||n.common,w,C,p),E=a0((u=f||b||n.self)===null||u===void 0?void 0:u(T),v,S,h);return{common:T,self:E,peers:a0({},n.peers,x,d),peerOverrides:a0({},_,g)}})}rr.props={theme:Object,themeOverrides:Object,builtinThemeOverrides:Object};const fX="n";function mn(r={},t={defaultBordered:!0}){const e=or(Mp,null);return{NConfigProvider:e,mergedBorderedRef:re(()=>{var n,i;const{bordered:a}=r;return a!==void 0?a:(i=(n=e==null?void 0:e.mergedBorderedRef.value)!==null&&n!==void 0?n:t.defaultBordered)!==null&&i!==void 0?i:!0}),mergedClsPrefixRef:re(()=>(e==null?void 0:e.mergedClsPrefixRef.value)||fX),namespaceRef:re(()=>e==null?void 0:e.mergedNamespaceRef.value)}}const YGe={name:"en-US",global:{undo:"Undo",redo:"Redo",confirm:"Confirm"},Popconfirm:{positiveText:"Confirm",negativeText:"Cancel"},Cascader:{placeholder:"Please Select",loading:"Loading",loadingRequiredMessage:r=>`Please load all ${r}'s descedants before checking it.`},Time:{dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd HH:mm:ss"},DatePicker:{yearFormat:"yyyy",monthFormat:"MMM",dayFormat:"eeeeee",clear:"Clear",now:"Now",confirm:"Confirm",selectTime:"Select Time",selectDate:"Select Date",datePlaceholder:"Select Date",datetimePlaceholder:"Select Date and Time",monthPlaceholder:"Select Month",yearPlaceholder:"Select Year",startDatePlaceholder:"Start Date",endDatePlaceholder:"End Date",startDatetimePlaceholder:"Start Date and Time",endDatetimePlaceholder:"End Date and Time",monthBeforeYear:!0,firstDayOfWeek:6,today:"Today"},DataTable:{checkTableAll:"Select all in the table",uncheckTableAll:"Unselect all in the table",confirm:"Confirm",clear:"Clear"},Transfer:{sourceTitle:"Source",targetTitle:"Target"},Empty:{description:"No Data"},Select:{placeholder:"Please Select"},TimePicker:{placeholder:"Select Time",positiveText:"OK",negativeText:"Cancel",now:"Now"},Pagination:{goto:"Goto",selectionSuffix:"page"},DynamicTags:{add:"Add"},Log:{loading:"Loading"},Input:{placeholder:"Please Input"},InputNumber:{placeholder:"Please Input"},DynamicInput:{create:"Create"},ThemeEditor:{title:"Theme Editor",clearAllVars:"Clear All Variables",clearSearch:"Clear Search",filterCompName:"Filter Component Name",filterVarName:"Filter Variable Name",import:"Import",export:"Export",restore:"Reset to Default"}};var XGe=YGe;function RI(r){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.width?String(t.width):r.defaultWidth,n=r.formats[e]||r.formats[r.defaultWidth];return n}}function Vr(r,t){if(t.length<r)throw new TypeError(r+" argument"+(r>1?"s":"")+" required, but only "+t.length+" present")}function en(r){Vr(1,arguments);var t=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&t==="[object Date]"?new Date(r.getTime()):typeof r=="number"||t==="[object Number]"?new Date(r):((typeof r=="string"||t==="[object String]")&&typeof console!="undefined"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function kn(r){if(r===null||r===!0||r===!1)return NaN;var t=Number(r);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Zd(r,t){Vr(1,arguments);var e=t||{},n=e.locale,i=n&&n.options&&n.options.weekStartsOn,a=i==null?0:kn(i),o=e.weekStartsOn==null?a:kn(e.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=en(r),l=s.getUTCDay(),u=(l<o?7:0)+l-o;return s.setUTCDate(s.getUTCDate()-u),s.setUTCHours(0,0,0,0),s}function u0(r){return function(t,e){var n=e||{},i=n.context?String(n.context):"standalone",a;if(i==="formatting"&&r.formattingValues){var o=r.defaultFormattingWidth||r.defaultWidth,s=n.width?String(n.width):o;a=r.formattingValues[s]||r.formattingValues[o]}else{var l=r.defaultWidth,u=n.width?String(n.width):r.defaultWidth;a=r.values[u]||r.values[l]}var c=r.argumentCallback?r.argumentCallback(t):t;return a[c]}}function qGe(r){return function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.match(r.matchPattern);if(!n)return null;var i=n[0],a=t.match(r.parsePattern);if(!a)return null;var o=r.valueCallback?r.valueCallback(a[0]):a[0];o=e.valueCallback?e.valueCallback(o):o;var s=t.slice(i.length);return{value:o,rest:s}}}function c0(r){return function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.width,i=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],a=t.match(i);if(!a)return null;var o=a[0],s=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],l=Array.isArray(s)?ZGe(s,function(f){return f.test(o)}):KGe(s,function(f){return f.test(o)}),u;u=r.valueCallback?r.valueCallback(l):l,u=e.valueCallback?e.valueCallback(u):u;var c=t.slice(o.length);return{value:u,rest:c}}}function KGe(r,t){for(var e in r)if(r.hasOwnProperty(e)&&t(r[e]))return e}function ZGe(r,t){for(var e=0;e<r.length;e++)if(t(r[e]))return e}var QGe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},JGe=function(r,t,e){var n,i=QGe[r];return typeof i=="string"?n=i:t===1?n=i.one:n=i.other.replace("{{count}}",t.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+n:n+" ago":n},e8e=JGe,t8e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},r8e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},n8e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},i8e={date:RI({formats:t8e,defaultWidth:"full"}),time:RI({formats:r8e,defaultWidth:"full"}),dateTime:RI({formats:n8e,defaultWidth:"full"})},a8e=i8e,o8e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},s8e=function(r,t,e,n){return o8e[r]},l8e=s8e,u8e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},c8e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},f8e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},d8e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},h8e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},v8e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},p8e=function(r,t){var e=Number(r),n=e%100;if(n>20||n<10)switch(n%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},g8e={ordinalNumber:p8e,era:u0({values:u8e,defaultWidth:"wide"}),quarter:u0({values:c8e,defaultWidth:"wide",argumentCallback:function(r){return r-1}}),month:u0({values:f8e,defaultWidth:"wide"}),day:u0({values:d8e,defaultWidth:"wide"}),dayPeriod:u0({values:h8e,defaultWidth:"wide",formattingValues:v8e,defaultFormattingWidth:"wide"})},m8e=g8e,y8e=/^(\d+)(th|st|nd|rd)?/i,b8e=/\d+/i,x8e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},w8e={any:[/^b/i,/^(a|c)/i]},S8e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},C8e={any:[/1/i,/2/i,/3/i,/4/i]},E8e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},_8e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},T8e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},A8e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},M8e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},k8e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},I8e={ordinalNumber:qGe({matchPattern:y8e,parsePattern:b8e,valueCallback:function(r){return parseInt(r,10)}}),era:c0({matchPatterns:x8e,defaultMatchWidth:"wide",parsePatterns:w8e,defaultParseWidth:"any"}),quarter:c0({matchPatterns:S8e,defaultMatchWidth:"wide",parsePatterns:C8e,defaultParseWidth:"any",valueCallback:function(r){return r+1}}),month:c0({matchPatterns:E8e,defaultMatchWidth:"wide",parsePatterns:_8e,defaultParseWidth:"any"}),day:c0({matchPatterns:T8e,defaultMatchWidth:"wide",parsePatterns:A8e,defaultParseWidth:"any"}),dayPeriod:c0({matchPatterns:M8e,defaultMatchWidth:"any",parsePatterns:k8e,defaultParseWidth:"any"})},P8e=I8e,D8e={code:"en-US",formatDistance:e8e,formatLong:a8e,formatRelative:l8e,localize:m8e,match:P8e,options:{weekStartsOn:0,firstWeekContainsDate:1}},OI=D8e;const R8e={name:"en-US",locale:OI};var O8e=R8e;function Qd(r){const{mergedLocaleRef:t,mergedDateLocaleRef:e}=or(Mp,null)||{},n=re(()=>{var a,o;return(o=(a=t==null?void 0:t.value)===null||a===void 0?void 0:a[r])!==null&&o!==void 0?o:XGe[r]});return{dateLocaleRef:re(()=>{var a;return(a=e==null?void 0:e.value)!==null&&a!==void 0?a:O8e}),localeRef:n}}function kp(r,t,e){if(!t)return;const n=Tp(),i=()=>{const a=e==null?void 0:e.value;t.mount({id:a===void 0?r:a+r,head:!0,props:{bPrefix:a?`.${a}-`:void 0},ssr:n}),KY.mount({id:"naive-ui/global",head:!0,ssr:n})};n?i():cc(i)}var L8e=xt({name:"ArrowDown",render(){return I("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},I("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},I("g",{"fill-rule":"nonzero"},I("path",{d:"M23.7916,15.2664 C24.0788,14.9679 24.0696,14.4931 23.7711,14.206 C23.4726,13.9188 22.9978,13.928 22.7106,14.2265 L14.7511,22.5007 L14.7511,3.74792 C14.7511,3.33371 14.4153,2.99792 14.0011,2.99792 C13.5869,2.99792 13.2511,3.33371 13.2511,3.74793 L13.2511,22.4998 L5.29259,14.2265 C5.00543,13.928 4.53064,13.9188 4.23213,14.206 C3.93361,14.4931 3.9244,14.9679 4.21157,15.2664 L13.2809,24.6944 C13.6743,25.1034 14.3289,25.1034 14.7223,24.6944 L23.7916,15.2664 Z"}))))}});function Wu(r,t){return xt({name:L6e(r),setup(){const{NConfigProvider:e}=mn();return()=>{var n;const i=(n=e==null?void 0:e.mergedIconsRef.value)===null||n===void 0?void 0:n[r];return i?i():t}}})}var Jd=xt({name:"Backward",render(){return I("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},I("path",{d:"M12.2674 15.793C11.9675 16.0787 11.4927 16.0672 11.2071 15.7673L6.20572 10.5168C5.9298 10.2271 5.9298 9.7719 6.20572 9.48223L11.2071 4.23177C11.4927 3.93184 11.9675 3.92031 12.2674 4.206C12.5673 4.49169 12.5789 4.96642 12.2932 5.26634L7.78458 9.99952L12.2932 14.7327C12.5789 15.0326 12.5673 15.5074 12.2674 15.793Z",fill:"currentColor"}))}}),dX=Wu("date",I("svg",{width:"28px",height:"28px",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},I("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},I("g",{"fill-rule":"nonzero"},I("path",{d:"M21.75,3 C23.5449254,3 25,4.45507456 25,6.25 L25,21.75 C25,23.5449254 23.5449254,25 21.75,25 L6.25,25 C4.45507456,25 3,23.5449254 3,21.75 L3,6.25 C3,4.45507456 4.45507456,3 6.25,3 L21.75,3 Z M23.5,9.503 L4.5,9.503 L4.5,21.75 C4.5,22.7164983 5.28350169,23.5 6.25,23.5 L21.75,23.5 C22.7164983,23.5 23.5,22.7164983 23.5,21.75 L23.5,9.503 Z M21.75,4.5 L6.25,4.5 C5.28350169,4.5 4.5,5.28350169 4.5,6.25 L4.5,8.003 L23.5,8.003 L23.5,6.25 C23.5,5.28350169 22.7164983,4.5 21.75,4.5 Z"}))))),F8e=xt({name:"Checkmark",render(){return I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},I("g",{fill:"none"},I("path",{d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032z",fill:"currentColor"})))}}),LI=xt({name:"ChevronRight",render(){return I("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},I("path",{d:"M5.64645 3.14645C5.45118 3.34171 5.45118 3.65829 5.64645 3.85355L9.79289 8L5.64645 12.1464C5.45118 12.3417 5.45118 12.6583 5.64645 12.8536C5.84171 13.0488 6.15829 13.0488 6.35355 12.8536L10.8536 8.35355C11.0488 8.15829 11.0488 7.84171 10.8536 7.64645L6.35355 3.14645C6.15829 2.95118 5.84171 2.95118 5.64645 3.14645Z",fill:"currentColor"}))}}),N8e=Wu("close",I("svg",{viewBox:"0 0 12 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},I("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},I("g",{fill:"currentColor","fill-rule":"nonzero"},I("path",{d:"M2.08859116,2.2156945 L2.14644661,2.14644661 C2.32001296,1.97288026 2.58943736,1.95359511 2.7843055,2.08859116 L2.85355339,2.14644661 L6,5.293 L9.14644661,2.14644661 C9.34170876,1.95118446 9.65829124,1.95118446 9.85355339,2.14644661 C10.0488155,2.34170876 10.0488155,2.65829124 9.85355339,2.85355339 L6.707,6 L9.85355339,9.14644661 C10.0271197,9.32001296 10.0464049,9.58943736 9.91140884,9.7843055 L9.85355339,9.85355339 C9.67998704,10.0271197 9.41056264,10.0464049 9.2156945,9.91140884 L9.14644661,9.85355339 L6,6.707 L2.85355339,9.85355339 C2.65829124,10.0488155 2.34170876,10.0488155 2.14644661,9.85355339 C1.95118446,9.65829124 1.95118446,9.34170876 2.14644661,9.14644661 L5.293,6 L2.14644661,2.85355339 C1.97288026,2.67998704 1.95359511,2.41056264 2.08859116,2.2156945 L2.14644661,2.14644661 L2.08859116,2.2156945 Z"}))))),B8e=xt({name:"Eye",render(){return I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},I("path",{d:"M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 0 0-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 0 0 0-17.47C428.89 172.28 347.8 112 255.66 112z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"}),I("circle",{cx:"256",cy:"256",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"}))}}),$8e=xt({name:"EyeOff",render(){return I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},I("path",{d:"M432 448a15.92 15.92 0 0 1-11.31-4.69l-352-352a16 16 0 0 1 22.62-22.62l352 352A16 16 0 0 1 432 448z",fill:"currentColor"}),I("path",{d:"M255.66 384c-41.49 0-81.5-12.28-118.92-36.5c-34.07-22-64.74-53.51-88.7-91v-.08c19.94-28.57 41.78-52.73 65.24-72.21a2 2 0 0 0 .14-2.94L93.5 161.38a2 2 0 0 0-2.71-.12c-24.92 21-48.05 46.76-69.08 76.92a31.92 31.92 0 0 0-.64 35.54c26.41 41.33 60.4 76.14 98.28 100.65C162 402 207.9 416 255.66 416a239.13 239.13 0 0 0 75.8-12.58a2 2 0 0 0 .77-3.31l-21.58-21.58a4 4 0 0 0-3.83-1a204.8 204.8 0 0 1-51.16 6.47z",fill:"currentColor"}),I("path",{d:"M490.84 238.6c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.66 96a227.34 227.34 0 0 0-74.89 12.83a2 2 0 0 0-.75 3.31l21.55 21.55a4 4 0 0 0 3.88 1a192.82 192.82 0 0 1 50.21-6.69c40.69 0 80.58 12.43 118.55 37c34.71 22.4 65.74 53.88 89.76 91a.13.13 0 0 1 0 .16a310.72 310.72 0 0 1-64.12 72.73a2 2 0 0 0-.15 2.95l19.9 19.89a2 2 0 0 0 2.7.13a343.49 343.49 0 0 0 68.64-78.48a32.2 32.2 0 0 0-.1-34.78z",fill:"currentColor"}),I("path",{d:"M256 160a95.88 95.88 0 0 0-21.37 2.4a2 2 0 0 0-1 3.38l112.59 112.56a2 2 0 0 0 3.38-1A96 96 0 0 0 256 160z",fill:"currentColor"}),I("path",{d:"M165.78 233.66a2 2 0 0 0-3.38 1a96 96 0 0 0 115 115a2 2 0 0 0 1-3.38z",fill:"currentColor"}))}}),z8e=xt({name:"Empty",render(){return I("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},I("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),I("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}}),FI=Wu("error",I("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},I("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},I("g",{"fill-rule":"nonzero"},I("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M17.8838835,16.1161165 L17.7823881,16.0249942 C17.3266086,15.6583353 16.6733914,15.6583353 16.2176119,16.0249942 L16.1161165,16.1161165 L16.0249942,16.2176119 C15.6583353,16.6733914 15.6583353,17.3266086 16.0249942,17.7823881 L16.1161165,17.8838835 L22.233,24 L16.1161165,30.1161165 L16.0249942,30.2176119 C15.6583353,30.6733914 15.6583353,31.3266086 16.0249942,31.7823881 L16.1161165,31.8838835 L16.2176119,31.9750058 C16.6733914,32.3416647 17.3266086,32.3416647 17.7823881,31.9750058 L17.8838835,31.8838835 L24,25.767 L30.1161165,31.8838835 L30.2176119,31.9750058 C30.6733914,32.3416647 31.3266086,32.3416647 31.7823881,31.9750058 L31.8838835,31.8838835 L31.9750058,31.7823881 C32.3416647,31.3266086 32.3416647,30.6733914 31.9750058,30.2176119 L31.8838835,30.1161165 L25.767,24 L31.8838835,17.8838835 L31.9750058,17.7823881 C32.3416647,17.3266086 32.3416647,16.6733914 31.9750058,16.2176119 L31.8838835,16.1161165 L31.7823881,16.0249942 C31.3266086,15.6583353 30.6733914,15.6583353 30.2176119,16.0249942 L30.1161165,16.1161165 L24,22.233 L17.8838835,16.1161165 L17.7823881,16.0249942 L17.8838835,16.1161165 Z"}))))),eh=xt({name:"FastBackward",render(){return I("svg",{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},I("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},I("g",{fill:"currentColor","fill-rule":"nonzero"},I("path",{d:"M8.73171,16.7949 C9.03264,17.0795 9.50733,17.0663 9.79196,16.7654 C10.0766,16.4644 10.0634,15.9897 9.76243,15.7051 L4.52339,10.75 L17.2471,10.75 C17.6613,10.75 17.9971,10.4142 17.9971,10 C17.9971,9.58579 17.6613,9.25 17.2471,9.25 L4.52112,9.25 L9.76243,4.29275 C10.0634,4.00812 10.0766,3.53343 9.79196,3.2325 C9.50733,2.93156 9.03264,2.91834 8.73171,3.20297 L2.31449,9.27241 C2.14819,9.4297 2.04819,9.62981 2.01448,9.8386 C2.00308,9.89058 1.99707,9.94459 1.99707,10 C1.99707,10.0576 2.00356,10.1137 2.01585,10.1675 C2.05084,10.3733 2.15039,10.5702 2.31449,10.7254 L8.73171,16.7949 Z"}))))}}),th=xt({name:"FastForward",render(){return I("svg",{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},I("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},I("g",{fill:"currentColor","fill-rule":"nonzero"},I("path",{d:"M11.2654,3.20511 C10.9644,2.92049 10.4897,2.93371 10.2051,3.23464 C9.92049,3.53558 9.93371,4.01027 10.2346,4.29489 L15.4737,9.25 L2.75,9.25 C2.33579,9.25 2,9.58579 2,10.0000012 C2,10.4142 2.33579,10.75 2.75,10.75 L15.476,10.75 L10.2346,15.7073 C9.93371,15.9919 9.92049,16.4666 10.2051,16.7675 C10.4897,17.0684 10.9644,17.0817 11.2654,16.797 L17.6826,10.7276 C17.8489,10.5703 17.9489,10.3702 17.9826,10.1614 C17.994,10.1094 18,10.0554 18,10.0000012 C18,9.94241 17.9935,9.88633 17.9812,9.83246 C17.9462,9.62667 17.8467,9.42976 17.6826,9.27455 L11.2654,3.20511 Z"}))))}}),G8e=xt({name:"Filter",render(){return I("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},I("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},I("g",{"fill-rule":"nonzero"},I("path",{d:"M17,19 C17.5522847,19 18,19.4477153 18,20 C18,20.5522847 17.5522847,21 17,21 L11,21 C10.4477153,21 10,20.5522847 10,20 C10,19.4477153 10.4477153,19 11,19 L17,19 Z M21,13 C21.5522847,13 22,13.4477153 22,14 C22,14.5522847 21.5522847,15 21,15 L7,15 C6.44771525,15 6,14.5522847 6,14 C6,13.4477153 6.44771525,13 7,13 L21,13 Z M24,7 C24.5522847,7 25,7.44771525 25,8 C25,8.55228475 24.5522847,9 24,9 L4,9 C3.44771525,9 3,8.55228475 3,8 C3,7.44771525 3.44771525,7 4,7 L24,7 Z"}))))}}),rh=xt({name:"Forward",render(){return I("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},I("path",{d:"M7.73271 4.20694C8.03263 3.92125 8.50737 3.93279 8.79306 4.23271L13.7944 9.48318C14.0703 9.77285 14.0703 10.2281 13.7944 10.5178L8.79306 15.7682C8.50737 16.0681 8.03263 16.0797 7.73271 15.794C7.43279 15.5083 7.42125 15.0336 7.70694 14.7336L12.2155 10.0005L7.70694 5.26729C7.42125 4.96737 7.43279 4.49264 7.73271 4.20694Z",fill:"currentColor"}))}}),NI=Wu("info",I("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},I("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},I("g",{"fill-rule":"nonzero"},I("path",{d:"M14,2 C20.6274,2 26,7.37258 26,14 C26,20.6274 20.6274,26 14,26 C7.37258,26 2,20.6274 2,14 C2,7.37258 7.37258,2 14,2 Z M14,11 C13.4477,11 13,11.4477 13,12 L13,12 L13,20 C13,20.5523 13.4477,21 14,21 C14.5523,21 15,20.5523 15,20 L15,20 L15,12 C15,11.4477 14.5523,11 14,11 Z M14,6.75 C13.3096,6.75 12.75,7.30964 12.75,8 C12.75,8.69036 13.3096,9.25 14,9.25 C14.6904,9.25 15.25,8.69036 15.25,8 C15.25,7.30964 14.6904,6.75 14,6.75 Z"}))))),hX=xt({name:"More",render(){return I("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},I("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},I("g",{fill:"currentColor","fill-rule":"nonzero"},I("path",{d:"M4,7 C4.55228,7 5,7.44772 5,8 C5,8.55229 4.55228,9 4,9 C3.44772,9 3,8.55229 3,8 C3,7.44772 3.44772,7 4,7 Z M8,7 C8.55229,7 9,7.44772 9,8 C9,8.55229 8.55229,9 8,9 C7.44772,9 7,8.55229 7,8 C7,7.44772 7.44772,7 8,7 Z M12,7 C12.5523,7 13,7.44772 13,8 C13,8.55229 12.5523,9 12,9 C11.4477,9 11,8.55229 11,8 C11,7.44772 11.4477,7 12,7 Z"}))))}}),BI=Wu("success",I("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},I("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},I("g",{"fill-rule":"nonzero"},I("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M32.6338835,17.6161165 C32.1782718,17.1605048 31.4584514,17.1301307 30.9676119,17.5249942 L30.8661165,17.6161165 L20.75,27.732233 L17.1338835,24.1161165 C16.6457281,23.6279612 15.8542719,23.6279612 15.3661165,24.1161165 C14.9105048,24.5717282 14.8801307,25.2915486 15.2749942,25.7823881 L15.3661165,25.8838835 L19.8661165,30.3838835 C20.3217282,30.8394952 21.0415486,30.8698693 21.5323881,30.4750058 L21.6338835,30.3838835 L32.6338835,19.3838835 C33.1220388,18.8957281 33.1220388,18.1042719 32.6338835,17.6161165 Z"}))))),U8e=Wu("time",I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},I("path",{d:"M256,64C150,64,64,150,64,256s86,192,192,192,192-86,192-192S362,64,256,64Z",style:`
        fill: none;
        stroke: currentColor;
        stroke-miterlimit: 10;
        stroke-width: 32px;
      `}),I("polyline",{points:"256 128 256 272 352 272",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))),$I=Wu("warning",I("svg",{viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},I("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},I("g",{"fill-rule":"nonzero"},I("path",{d:"M12,2 C17.523,2 22,6.478 22,12 C22,17.522 17.523,22 12,22 C6.477,22 2,17.522 2,12 C2,6.478 6.477,2 12,2 Z M12.0018002,15.0037242 C11.450254,15.0037242 11.0031376,15.4508407 11.0031376,16.0023869 C11.0031376,16.553933 11.450254,17.0010495 12.0018002,17.0010495 C12.5533463,17.0010495 13.0004628,16.553933 13.0004628,16.0023869 C13.0004628,15.4508407 12.5533463,15.0037242 12.0018002,15.0037242 Z M11.99964,7 C11.4868042,7.00018474 11.0642719,7.38637706 11.0066858,7.8837365 L11,8.00036004 L11.0018003,13.0012393 L11.00857,13.117858 C11.0665141,13.6151758 11.4893244,14.0010638 12.0021602,14.0008793 C12.514996,14.0006946 12.9375283,13.6145023 12.9951144,13.1171428 L13.0018002,13.0005193 L13,7.99964009 L12.9932303,7.8830214 C12.9352861,7.38570354 12.5124758,6.99981552 11.99964,7 Z"}))))),vX=xt({name:"ChevronDown",render(){return I("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},I("path",{d:"M3.14645 5.64645C3.34171 5.45118 3.65829 5.45118 3.85355 5.64645L8 9.79289L12.1464 5.64645C12.3417 5.45118 12.6583 5.45118 12.8536 5.64645C13.0488 5.84171 13.0488 6.15829 12.8536 6.35355L8.35355 10.8536C8.15829 11.0488 7.84171 11.0488 7.64645 10.8536L3.14645 6.35355C2.95118 6.15829 2.95118 5.84171 3.14645 5.64645Z",fill:"currentColor"}))}}),V8e=Wu("clear",I("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},I("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},I("g",{fill:"currentColor","fill-rule":"nonzero"},I("path",{d:"M8,2 C11.3137085,2 14,4.6862915 14,8 C14,11.3137085 11.3137085,14 8,14 C4.6862915,14 2,11.3137085 2,8 C2,4.6862915 4.6862915,2 8,2 Z M6.5343055,5.83859116 C6.33943736,5.70359511 6.07001296,5.72288026 5.89644661,5.89644661 L5.89644661,5.89644661 L5.83859116,5.9656945 C5.70359511,6.16056264 5.72288026,6.42998704 5.89644661,6.60355339 L5.89644661,6.60355339 L7.293,8 L5.89644661,9.39644661 L5.83859116,9.4656945 C5.70359511,9.66056264 5.72288026,9.92998704 5.89644661,10.1035534 L5.89644661,10.1035534 L5.9656945,10.1614088 C6.16056264,10.2964049 6.42998704,10.2771197 6.60355339,10.1035534 L6.60355339,10.1035534 L8,8.707 L9.39644661,10.1035534 L9.4656945,10.1614088 C9.66056264,10.2964049 9.92998704,10.2771197 10.1035534,10.1035534 L10.1035534,10.1035534 L10.1614088,10.0343055 C10.2964049,9.83943736 10.2771197,9.57001296 10.1035534,9.39644661 L10.1035534,9.39644661 L8.707,8 L10.1035534,6.60355339 L10.1614088,6.5343055 C10.2964049,6.33943736 10.2771197,6.07001296 10.1035534,5.89644661 L10.1035534,5.89644661 L10.0343055,5.83859116 C9.83943736,5.70359511 9.57001296,5.72288026 9.39644661,5.89644661 L9.39644661,5.89644661 L8,7.293 L6.60355339,5.89644661 Z"}))))),H8e=xt({name:"ChevronDownFilled",render(){return I("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},I("path",{d:"M3.20041 5.73966C3.48226 5.43613 3.95681 5.41856 4.26034 5.70041L8 9.22652L11.7397 5.70041C12.0432 5.41856 12.5177 5.43613 12.7996 5.73966C13.0815 6.0432 13.0639 6.51775 12.7603 6.7996L8.51034 10.7996C8.22258 11.0668 7.77743 11.0668 7.48967 10.7996L3.23966 6.7996C2.93613 6.51775 2.91856 6.0432 3.20041 5.73966Z",fill:"currentColor"}))}}),W8e=Wu("to",I("svg",{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},I("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},I("g",{fill:"currentColor","fill-rule":"nonzero"},I("path",{d:"M11.2654,3.20511 C10.9644,2.92049 10.4897,2.93371 10.2051,3.23464 C9.92049,3.53558 9.93371,4.01027 10.2346,4.29489 L15.4737,9.25 L2.75,9.25 C2.33579,9.25 2,9.58579 2,10.0000012 C2,10.4142 2.33579,10.75 2.75,10.75 L15.476,10.75 L10.2346,15.7073 C9.93371,15.9919 9.92049,16.4666 10.2051,16.7675 C10.4897,17.0684 10.9644,17.0817 11.2654,16.797 L17.6826,10.7276 C17.8489,10.5703 17.9489,10.3702 17.9826,10.1614 C17.994,10.1094 18,10.0554 18,10.0000012 C18,9.94241 17.9935,9.88633 17.9812,9.83246 C17.9462,9.62667 17.8467,9.42976 17.6826,9.27455 L11.2654,3.20511 Z"}))))),YS=xt({name:"BaseIconSwitchTransition",setup(r,{slots:t}){const e=Kd();return()=>I(Ra,{name:"icon-switch-transition",appear:e.value},t)}}),pX=xt({name:"FadeInExpandTransition",props:{appear:Boolean,group:Boolean,mode:String,onLeave:Function,onAfterLeave:Function,onAfterEnter:Function,width:Boolean,reverse:Boolean},setup(r,{slots:t}){function e(s){r.width?s.style.maxWidth=`${s.offsetWidth}px`:s.style.maxHeight=`${s.offsetHeight}px`,s.offsetWidth}function n(s){r.width?s.style.maxWidth="0":s.style.maxHeight="0",s.offsetWidth;const{onLeave:l}=r;l&&l()}function i(s){r.width?s.style.maxWidth="":s.style.maxHeight="";const{onAfterLeave:l}=r;l&&l()}function a(s){if(s.style.transition="none",r.width){const l=s.offsetWidth;s.style.maxWidth="0",s.offsetWidth,s.style.transition="",s.style.maxWidth=`${l}px`}else if(r.reverse)s.style.maxHeight=`${s.offsetHeight}px`,s.offsetHeight,s.style.transition="",s.style.maxHeight="0";else{const l=s.offsetHeight;s.style.maxHeight="0",s.offsetWidth,s.style.transition="",s.style.maxHeight=`${l}px`}s.offsetWidth}function o(s){var l;r.width?s.style.maxWidth="":r.reverse||(s.style.maxHeight=""),(l=r.onAfterEnter)===null||l===void 0||l.call(r)}return()=>{const s=r.group?Sse:Ra;return I(s,{name:r.width?"fade-in-width-expand-transition":"fade-in-height-expand-transition",mode:r.mode,appear:r.appear,onEnter:a,onAfterEnter:o,onBeforeLeave:e,onLeave:n,onAfterLeave:i},t)}}}),j8e=de("base-icon",`
 height: 1em;
 width: 1em;
 line-height: 1em;
 text-align: center;
 display: inline-block;
 position: relative;
 fill: currentColor;
 transform: translateZ(0);
`,[_e("svg",{height:"1em",width:"1em"})]),si=xt({name:"BaseIcon",props:{role:String,ariaLabel:String,ariaDisabled:{type:Boolean,default:void 0},ariaHidden:{type:Boolean,default:void 0},clsPrefix:{type:String,required:!0},onClick:Function,onMousedown:Function,onMouseup:Function},setup(r){kp("BaseIcon",j8e,Kt(r,"clsPrefix"))},render(){return I("i",{class:`${this.clsPrefix}-base-icon`,onClick:this.onClick,onMousedown:this.onMousedown,onMouseup:this.onMouseup,role:this.role,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,"aria-disabled":this.ariaDisabled},this.$slots)}}),Y8e=de("base-close",`
 cursor: pointer;
 color: var(--close-color);
`,[_e("&:hover",{color:"var(--close-color-hover)"}),_e("&:active",{color:"var(--close-color-pressed)"}),Ge("disabled",{cursor:"not-allowed!important",color:"var(--close-color-disabled)"})]),zI=xt({name:"BaseClose",props:{clsPrefix:{type:String,required:!0},disabled:{type:Boolean,default:void 0},onClick:Function},setup(r){return kp("BaseClose",Y8e,Kt(r,"clsPrefix")),()=>{const{clsPrefix:t,disabled:e}=r;return I(si,{role:"button",ariaDisabled:e,ariaLabel:"close",clsPrefix:t,class:[`${t}-base-close`,e&&`${t}-base-close--disabled`],onClick:e?void 0:r.onClick},{default:()=>I(N8e,null)})}}}),nh=xt({props:{onFocus:Function,onBlur:Function},setup(r){return()=>I("div",{style:"width: 0; height: 0",tabindex:0,onFocus:r.onFocus,onBlur:r.onBlur})}});const{cubicBezierEaseInOut:X8e,transformDebounceScale:q8e}=Jc;function f0({originalTransform:r="",left:t=0,top:e=0,transition:n=`all .3s ${X8e} !important`}={}){return[_e("&.icon-switch-transition-enter-from, &.icon-switch-transition-leave-to",{transform:r+" scale(0.75)",left:t,top:e,opacity:0}),_e("&.icon-switch-transition-enter-to, &.icon-switch-transition-leave-from",{transform:`${q8e} ${r}`,left:t,top:e,opacity:1}),_e("&.icon-switch-transition-enter-active, &.icon-switch-transition-leave-active",{transformOrigin:"center",position:"absolute",left:t,top:e,transition:n})]}var K8e=de("base-loading",`
 position: relative;
 line-height: 0;
 width: 1em;
 height: 1em;
`,[Se("placeholder",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[f0({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),Se("icon",`
 height: 1em;
 width: 1em;
 `,[f0()])]);const GI="1.6s";var Ip=xt({name:"BaseLoading",props:{clsPrefix:{type:String,required:!0},scale:{type:Number,default:1},radius:{type:Number,default:100},strokeWidth:{type:Number,default:28},stroke:{type:String,default:void 0},show:{type:Boolean,default:!0}},setup(r){kp("BaseLoading",K8e,Kt(r,"clsPrefix"))},render(){const{clsPrefix:r,radius:t,strokeWidth:e,stroke:n,scale:i}=this,a=t/i;return I("div",{class:`${r}-base-loading`,role:"img","aria-label":"loading"},I(YS,null,{default:()=>this.show?I("svg",{class:`${r}-base-loading__icon`,viewBox:`0 0 ${2*a} ${2*a}`,xmlns:"http://www.w3.org/2000/svg",style:{color:n}},I("g",null,I("animateTransform",{attributeName:"transform",type:"rotate",values:`0 ${a} ${a};270 ${a} ${a}`,begin:"0s",dur:GI,fill:"freeze",repeatCount:"indefinite"}),I("circle",{fill:"none",stroke:"currentColor","stroke-width":e,"stroke-linecap":"round",cx:a,cy:a,r:t-e/2,"stroke-dasharray":5.67*t,"stroke-dashoffset":18.48*t},I("animateTransform",{attributeName:"transform",type:"rotate",values:`0 ${a} ${a};135 ${a} ${a};450 ${a} ${a}`,begin:"0s",dur:GI,fill:"freeze",repeatCount:"indefinite"}),I("animate",{attributeName:"stroke-dashoffset",values:`${5.67*t};${1.42*t};${5.67*t}`,begin:"0s",dur:GI,fill:"freeze",repeatCount:"indefinite"})))):I("div",{key:"placeholder",class:`${r}-base-loading__placeholder`},this.$slots)}))}});function gX(r){return Array.isArray(r)?r:[r]}const UI={STOP:"STOP"};function mX(r,t){const e=t(r);r.children!==void 0&&e!==UI.STOP&&r.children.forEach(n=>mX(n,t))}function Z8e(r,t={}){const{preserveGroup:e=!1}=t,n=[],i=e?o=>{o.isLeaf||(n.push(o.key),a(o.children))}:o=>{o.isLeaf||(o.isGroup||n.push(o.key),a(o.children))};function a(o){o.forEach(i)}return a(r),n}function Q8e(r,t){const{isLeaf:e}=r;return e!==void 0?e:!t(r)}function J8e(r){return r.children}function eUe(r){return r.key}function tUe(){return!1}function rUe(r,t){const{isLeaf:e}=r;return!(e===!1&&!Array.isArray(t(r)))}function nUe(r){return r.disabled===!0}function iUe(r,t){return r.isLeaf===!1&&!Array.isArray(t(r))}function VI(r){var t;return r==null?[]:Array.isArray(r)?r:(t=r.checkedKeys)!==null&&t!==void 0?t:[]}function HI(r){var t;return r==null||Array.isArray(r)?[]:(t=r.indeterminateKeys)!==null&&t!==void 0?t:[]}function aUe(r,t){const e=new Set(r);return t.forEach(n=>{e.has(n)||e.add(n)}),Array.from(e)}function oUe(r,t){const e=new Set(r);return t.forEach(n=>{e.has(n)&&e.delete(n)}),Array.from(e)}function sUe(r){return(r==null?void 0:r.type)==="group"}function lUe(r){const t=new Map;return r.forEach((e,n)=>{t.set(e.key,n)}),e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:null}}class uUe extends Error{constructor(){super();this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function cUe(r,t,e){return XS(t.concat(r),e)}function fUe(r,t){const e=new Set;return r.forEach(n=>{const i=t.treeNodeMap.get(n);if(i!==void 0){let a=i.parent;for(;a!==null&&!(a.disabled||e.has(a.key));)e.add(a.key),a=a.parent}}),e}function dUe(r,t,e){const n=XS(t,e),i=XS(r,e,!0),a=fUe(r,e),o=[];return n.forEach(s=>{(i.has(s)||a.has(s))&&o.push(s)}),o.forEach(s=>n.delete(s)),n}function WI(r,t){const{checkedKeys:e,keysToCheck:n,keysToUncheck:i,indeterminateKeys:a,cascade:o,leafOnly:s,checkStrategy:l}=r;if(!o)return n!==void 0?{checkedKeys:aUe(e,n),indeterminateKeys:Array.from(a)}:i!==void 0?{checkedKeys:oUe(e,i),indeterminateKeys:Array.from(a)}:{checkedKeys:Array.from(e),indeterminateKeys:Array.from(a)};const{levelTreeNodeMap:u}=t;let c;i!==void 0?c=dUe(i,e,t):n!==void 0?c=cUe(n,e,t):c=XS(e,t);const f=l==="parent",d=l==="child"||s,h=c,v=new Set,p=Math.max.apply(null,Array.from(u.keys()));for(let g=p;g>=0;g-=1){const m=g===0,y=u.get(g);for(const b of y){if(b.isLeaf)continue;const{key:x,shallowLoaded:w}=b;if(d&&w&&b.children.forEach(T=>{!T.disabled&&!T.isLeaf&&T.shallowLoaded&&h.has(T.key)&&h.delete(T.key)}),b.disabled||!w)continue;let S=!0,C=!1,_=!0;for(const T of b.children){const E=T.key;if(!T.disabled){if(_&&(_=!1),h.has(E))C=!0;else if(v.has(E)){C=!0,S=!1;break}else if(S=!1,C)break}}S&&!_?(f&&b.children.forEach(T=>{!T.disabled&&h.has(T.key)&&h.delete(T.key)}),h.add(x)):C&&v.add(x),m&&d&&h.has(x)&&h.delete(x)}}return{checkedKeys:Array.from(h),indeterminateKeys:Array.from(v)}}function XS(r,t,e=!1){const{treeNodeMap:n,getChildren:i}=t,a=new Set,o=new Set(r);return r.forEach(s=>{const l=n.get(s);l!==void 0&&mX(l,u=>{if(u.disabled)return UI.STOP;const{key:c}=u;if(!a.has(c)&&(a.add(c),o.add(c),iUe(u.rawNode,i))){if(e)return UI.STOP;throw new uUe}})}),o}function hUe(r,{includeGroup:t=!1,includeSelf:e=!0},n){var i;const a=n.treeNodeMap;let o=r==null?null:(i=a.get(r))!==null&&i!==void 0?i:null;const s={keyPath:[],treeNodePath:[],treeNode:o};if(o==null?void 0:o.ignored)return s.treeNode=null,s;for(;o;)!o.ignored&&(t||!o.isGroup)&&s.treeNodePath.push(o),o=o.parent;return s.treeNodePath.reverse(),e||s.treeNodePath.pop(),s.keyPath=s.treeNodePath.map(l=>l.key),s}function vUe(r){if(r.length===0)return null;const t=r[0];return t.isGroup||t.ignored||t.disabled?t.getNext():t}function pUe(r,t){const e=r.siblings,n=e.length,{index:i}=r;return t?e[(i+1)%n]:i===e.length-1?null:e[i+1]}function yX(r,t,{loop:e=!1,includeDisabled:n=!1}={}){const i=t==="prev"?gUe:pUe,a={reverse:t==="prev"};let o=!1,s=null;function l(u){if(u!==null){if(u===r){if(!o)o=!0;else if(!r.disabled&&!r.isGroup){s=r;return}}else if((!u.disabled||n)&&!u.ignored&&!u.isGroup){s=u;return}if(u.isGroup){const c=jI(u,a);c!==null?s=c:l(i(u,e))}else{const c=i(u,!1);if(c!==null)l(c);else{const f=mUe(u);(f==null?void 0:f.isGroup)?l(i(f,e)):e&&l(i(u,!0))}}}}return l(r),s}function gUe(r,t){const e=r.siblings,n=e.length,{index:i}=r;return t?e[(i-1+n)%n]:i===0?null:e[i-1]}function mUe(r){return r.parent}function jI(r,t={}){const{reverse:e=!1}=t,{children:n}=r;if(n){const{length:i}=n,a=e?i-1:0,o=e?-1:i,s=e?-1:1;for(let l=a;l!==o;l+=s){const u=n[l];if(!u.disabled&&!u.ignored)if(u.isGroup){const c=jI(u,t);if(c!==null)return c}else return u}}return null}const yUe={getChild(){return this.ignored?null:jI(this)},getParent(){const{parent:r}=this;return(r==null?void 0:r.isGroup)?r.getParent():r},getNext(r={}){return yX(this,"next",r)},getPrev(r={}){return yX(this,"prev",r)}};function bUe(r,t){const e=t?new Set(t):void 0,n=[];function i(a){a.forEach(o=>{n.push(o),!(o.isLeaf||!o.children||o.ignored)&&(o.isGroup||e===void 0||e.has(o.key))&&i(o.children)})}return i(r),n}function xUe(r,t){const e=r.key;for(;t;){if(t.key===e)return!0;t=t.parent}return!1}function bX(r,t,e,n,i,a=null,o=0){const s=[];return r.forEach((l,u)=>{var c;const f=Object.create(n);if(f.rawNode=l,f.siblings=s,f.level=o,f.index=u,f.isFirstChild=u===0,f.isLastChild=u+1===r.length,f.parent=a,!f.ignored){const d=i(l);Array.isArray(d)&&(f.children=bX(d,t,e,n,i,f,o+1))}s.push(f),t.set(f.key,f),e.has(o)||e.set(o,[]),(c=e.get(o))===null||c===void 0||c.push(f)}),s}function qS(r,t={}){var e;const n=new Map,i=new Map,{getDisabled:a=nUe,getIgnored:o=tUe,getIsGroup:s=sUe,getKey:l=eUe}=t,u=(e=t.getChildren)!==null&&e!==void 0?e:J8e,c=t.ignoreEmptyChildren?x=>{const w=u(x);return Array.isArray(w)?w.length?w:null:w}:u,f=Object.assign({get key(){return l(this.rawNode)},get disabled(){return a(this.rawNode)},get isGroup(){return s(this.rawNode)},get isLeaf(){return Q8e(this.rawNode,c)},get shallowLoaded(){return rUe(this.rawNode,c)},get ignored(){return o(this.rawNode)},contains(x){return xUe(this,x)}},yUe),d=bX(r,n,i,f,c);function h(x){if(x==null)return null;const w=n.get(x);return w&&!w.isGroup&&!w.ignored?w:null}function v(x){if(x==null)return null;const w=n.get(x);return w&&!w.ignored?w:null}function p(x,w){const S=v(x);return S?S.getPrev(w):null}function g(x,w){const S=v(x);return S?S.getNext(w):null}function m(x){const w=v(x);return w?w.getParent():null}function y(x){const w=v(x);return w?w.getChild():null}const b={treeNodes:d,treeNodeMap:n,levelTreeNodeMap:i,maxLevel:Math.max(...i.keys()),getChildren:c,getFlattenedNodes(x){return bUe(d,x)},getNode:h,getPrev:p,getNext:g,getParent:m,getChild:y,getFirstAvailableNode(){return vUe(d)},getPath(x,w={}){return hUe(x,w,b)},getCheckedKeys(x,w={}){const{cascade:S=!0,leafOnly:C=!1,checkStrategy:_="all"}=w;return WI({checkedKeys:VI(x),indeterminateKeys:HI(x),cascade:S,leafOnly:C,checkStrategy:_},b)},check(x,w,S={}){const{cascade:C=!0,leafOnly:_=!1,checkStrategy:T="all"}=S;return WI({checkedKeys:VI(w),indeterminateKeys:HI(w),keysToCheck:x==null?[]:gX(x),cascade:C,leafOnly:_,checkStrategy:T},b)},uncheck(x,w,S={}){const{cascade:C=!0,leafOnly:_=!1,checkStrategy:T="all"}=S;return WI({checkedKeys:VI(w),indeterminateKeys:HI(w),keysToUncheck:x==null?[]:gX(x),cascade:C,leafOnly:_,checkStrategy:T},b)},getNonLeafKeys(x={}){return Z8e(d,x)}};return b}function YI(r,t="default"){const e=r[t];if(e===void 0)throw new Error(`[vueuc/binder]: slot[${t}] is empty.`);return e()}function xX(r,t="default"){const e=r[t];if(e===void 0)throw new Error(`[vueuc/binder]: slot[${t}] is empty.`);const n=e();if(n.length===1)return n[0];throw new Error(`[vueuc/binder]: slot[${t}] should have exactly one child.`)}let tf=null;function wX(){if(tf===null&&(tf=document.getElementById("v-binder-view-measurer"),tf===null)){tf=document.createElement("div"),tf.id="v-binder-view-measurer";const{style:r}=tf;r.position="fixed",r.left="0",r.right="0",r.top="0",r.bottom="0",r.pointerEvents="none",r.visibility="hidden",document.body.appendChild(tf)}return tf.getBoundingClientRect()}function wUe(r,t){const e=wX();return{top:t,left:r,height:0,width:0,right:e.width-r,bottom:e.height-t}}function XI(r){const t=r.getBoundingClientRect(),e=wX();return{left:t.left-e.left,top:t.top-e.top,bottom:e.height+e.top-t.bottom,right:e.width+e.left-t.right,width:t.width,height:t.height}}function SUe(r){return r.nodeType===9?null:r.parentNode}function SX(r){if(r===null)return null;const t=SUe(r);if(t===null)return null;if(t.nodeType===9)return document;if(t.nodeType===1){const{overflow:e,overflowX:n,overflowY:i}=getComputedStyle(t);if(/(auto|scroll|overlay)/.test(e+i+n))return t}return SX(t)}const CUe=xt({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(r){var t;rn("VBinder",(t=lv())===null||t===void 0?void 0:t.proxy);const e=or("VBinder",null),n=Oe(null),i=m=>{n.value=m,e&&r.syncTargetWithParent&&e.setTargetRef(m)};let a=[];const o=()=>{let m=n.value;for(;m=SX(m),m!==null;)a.push(m);for(const y of a)Fi("scroll",y,f,!0)},s=()=>{for(const m of a)wi("scroll",m,f,!0);a=[]},l=new Set,u=m=>{l.size===0&&o(),l.has(m)||l.add(m)},c=m=>{l.has(m)&&l.delete(m),l.size===0&&s()},f=()=>{OS(d)},d=()=>{l.forEach(m=>m())},h=new Set,v=m=>{h.size===0&&Fi("resize",window,g),h.has(m)||h.add(m)},p=m=>{h.has(m)&&h.delete(m),h.size===0&&wi("resize",window,g)},g=()=>{h.forEach(m=>m())};return es(()=>{wi("resize",window,g),s()}),{targetRef:n,setTargetRef:i,addScrollListener:u,removeScrollListener:c,addResizeListener:v,removeResizeListener:p}},render(){return YI(this.$slots)}});var d0=CUe,h0=xt({name:"Target",setup(){const{setTargetRef:r,syncTarget:t}=or("VBinder");return{syncTarget:t,setTargetDirective:{mounted:r,updated:r}}},render(){const{syncTarget:r,setTargetDirective:t}=this;return r?pu(xX(this.$slots),[[t]]):xX(this.$slots)}});const Pp="@@mmoContext",EUe={mounted(r,{value:t}){r[Pp]={handler:void 0},typeof t=="function"&&(r[Pp].handler=t,Fi("mousemoveoutside",r,t))},updated(r,{value:t}){const e=r[Pp];typeof t=="function"?e.handler?e.handler!==t&&(wi("mousemoveoutside",r,e.handler),e.handler=t,Fi("mousemoveoutside",r,t)):(r[Pp].handler=t,Fi("mousemoveoutside",r,t)):e.handler&&(wi("mousemoveoutside",r,e.handler),e.handler=void 0)},unmounted(r){const{handler:t}=r[Pp];t&&wi("mousemoveoutside",r,t),r[Pp].handler=void 0}};var _Ue=EUe;const Dp="@@coContext",TUe={mounted(r,{value:t}){r[Dp]={handler:void 0},typeof t=="function"&&(r[Dp].handler=t,Fi("clickoutside",r,t))},updated(r,{value:t}){const e=r[Dp];typeof t=="function"?e.handler?e.handler!==t&&(wi("clickoutside",r,e.handler),e.handler=t,Fi("clickoutside",r,t)):(r[Dp].handler=t,Fi("clickoutside",r,t)):e.handler&&(wi("clickoutside",r,e.handler),e.handler=void 0)},unmounted(r){const{handler:t}=r[Dp];t&&wi("clickoutside",r,t),r[Dp].handler=void 0}};var ih=TUe;function AUe(r,t){console.error(`[vdirs/${r}]: ${t}`)}class MUe{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(t,e){const{elementZIndex:n}=this;if(e!==void 0){t.style.zIndex=`${e}`,n.delete(t);return}const{nextZIndex:i}=this;n.has(t)&&n.get(t)+1===this.nextZIndex||(t.style.zIndex=`${i}`,n.set(t,i),this.nextZIndex=i+1,this.squashState())}unregister(t){const{elementZIndex:e}=this;e.has(t)?e.delete(t):AUe("vdirs/z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:t}=this;t||(this.nextZIndex=2e3),this.nextZIndex-t>2500&&this.rearrange()}rearrange(){const t=Array.from(this.elementZIndex.entries());t.sort((e,n)=>e[1]-n[1]),this.nextZIndex=2e3,t.forEach(e=>{const n=e[0],i=this.nextZIndex++;`${i}`!==n.style.zIndex&&(n.style.zIndex=`${i}`)})}}var qI=new MUe;const KI="@@ziContext",kUe={mounted(r,t){const{value:e={}}=t,{zIndex:n,enabled:i}=e;qI.ensureZIndex(r,n),r[KI]={enabled:i}},updated(r,t){const{value:e={}}=t,{zIndex:n,enabled:i}=e,a=r[KI].enabled;i&&!a&&qI.ensureZIndex(r,n),r[KI].enabled=i},unmounted(r){qI.unregister(r)}};var CX=kUe;function EX(r,t){console.error(`[vueuc/${r}]: ${t}`)}const{c:rf}=HY();function _X(r){return r&-r}class IUe{constructor(t,e){this.l=t,this.min=e;const n=new Array(t+1);for(let i=0;i<t+1;++i)n[i]=0;this.ft=n}add(t,e){if(e===0)return;const{l:n,ft:i}=this;for(t+=1;t<=n;)i[t]+=e,t+=_X(t)}get(t){return this.sum(t+1)-this.sum(t)}sum(t){if(t===0)return 0;const{ft:e,min:n,l:i}=this;if(t===void 0&&(t=i),t>i)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let a=t*n;for(;t>0;)a+=e[t],t-=_X(t);return a}getBound(t){let e=0,n=this.l;for(;n>e;){const i=Math.floor((e+n)/2),a=this.sum(i);if(a>t){n=i;continue}else if(a<t){if(e===i)return this.sum(e+1)<=t?e+1:i;e=i}else return i}return e}}var TX=xt({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(r){return{showTeleport:MGe(Kt(r,"show")),mergedTo:re(()=>{const{to:t}=r;return t!=null?t:"body"})}},render(){return this.showTeleport?this.disabled?YI(this.$slots):I(Poe,{disabled:this.disabled,to:this.mergedTo},YI(this.$slots)):null}});const KS={top:"bottom",bottom:"top",left:"right",right:"left"},AX={start:"end",center:"center",end:"start"},ZI={top:"height",bottom:"height",left:"width",right:"width"},PUe={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},DUe={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},RUe={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},MX={top:"end",bottom:"start",left:"end",right:"start"};function OUe(r,t,e,n,i,a){if(!i||a)return{placement:r,top:0,left:0};const[o,s]=r.split("-");let l=s!=null?s:"center",u=0,c=0;if(l!=="center"){const d=RUe[r],h=KS[d],v=ZI[d];if(e[v]>t[v]){if(t[d]+t[v]<e[v]){const p=(e[v]-t[v])/2;t[d]<p||t[h]<p?t[d]<t[h]&&(l=AX[s]):l="center"}}else e[v]<t[v]&&t[h]<0&&t[d]>t[h]&&(l=AX[s])}else{const d=o==="bottom"||o==="top"?"left":"top",h=KS[d],v=ZI[d],p=(e[v]-t[v])/2;(t[d]<p||t[h]<p)&&(t[d]>t[h]?l=MX[d]:l=MX[h])}let f=o;return t[o]<e[ZI[o]]&&t[o]<t[KS[o]]&&(f=KS[o]),{placement:l!=="center"?`${f}-${l}`:f,left:u,top:c}}function LUe(r,t){return t?DUe[r]:PUe[r]}function FUe(r,t,e,n,i,a){if(a)switch(r){case"bottom-start":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left)}px`,transform:""};case"top-end":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left)}px`,transform:""};case"left-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(e.top-t.top+e.height/2)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(e.top-t.top+e.height/2)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(r){case"bottom-start":return{top:`${Math.round(e.top-t.top+e.height+n)}px`,left:`${Math.round(e.left-t.left+i)}px`,transform:""};case"bottom-end":return{top:`${Math.round(e.top-t.top+e.height+n)}px`,left:`${Math.round(e.left-t.left+e.width+i)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(e.top-t.top+n)}px`,left:`${Math.round(e.left-t.left+i)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(e.top-t.top+n)}px`,left:`${Math.round(e.left-t.left+e.width+i)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(e.top-t.top+n)}px`,left:`${Math.round(e.left-t.left+e.width+i)}px`,transform:""};case"right-end":return{top:`${Math.round(e.top-t.top+e.height+n)}px`,left:`${Math.round(e.left-t.left+e.width+i)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(e.top-t.top+n)}px`,left:`${Math.round(e.left-t.left+i)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(e.top-t.top+e.height+n)}px`,left:`${Math.round(e.left-t.left+i)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(e.top-t.top+n)}px`,left:`${Math.round(e.left-t.left+e.width/2+i)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(e.top-t.top+e.height/2+n)}px`,left:`${Math.round(e.left-t.left+e.width+i)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(e.top-t.top+e.height/2+n)}px`,left:`${Math.round(e.left-t.left+i)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(e.top-t.top+e.height+n)}px`,left:`${Math.round(e.left-t.left+e.width/2+i)}px`,transform:"translateX(-50%)"}}}const NUe=rf([rf(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),rf(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[rf("> *",{pointerEvents:"all"})])]);var v0=xt({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},flipLevel:{type:Number,default:1},x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(r){const t=or("VBinder"),e=xi(()=>r.enabled!==void 0?r.enabled:r.show),n=Oe(null),i=Oe(null),a=()=>{const{syncTrigger:d}=r;d.includes("scroll")&&t.addScrollListener(l),d.includes("resize")&&t.addResizeListener(l)},o=()=>{t.removeScrollListener(l),t.removeResizeListener(l)};Ss(()=>{e.value&&(l(),a())});const s=Tp();NUe.mount({id:"vueuc/binder",head:!0,ssr:s}),es(()=>{o()}),IGe(()=>{e.value&&l()});const l=()=>{if(!e.value)return;const d=n.value;if(d===null)return;const h=t.targetRef,{x:v,y:p,overlap:g}=r,m=v!==void 0&&p!==void 0?wUe(v,p):XI(h),{width:y,minWidth:b,placement:x,flipLevel:w,flip:S}=r;d.setAttribute("v-placement",x),g?d.setAttribute("v-overlap",""):d.removeAttribute("v-overlap");const{style:C}=d;y==="target"?C.width=`${m.width}px`:y!==void 0?C.width=y:C.width="",b==="target"?C.minWidth=`${m.width}px`:b!==void 0?C.minWidth=b:C.minWidth="";const _=XI(d),T=XI(i.value),{left:E,top:M,placement:k}=OUe(x,m,_,w,S,g),P=LUe(k,g),{left:F,top:$,transform:R}=FUe(k,T,m,M,E,g);d.setAttribute("v-placement",k),d.style.transform=`translateX(${F}) translateY(${$}) ${R}`,d.style.transformOrigin=P};fn(e,d=>{d?(a(),u()):o()});const u=()=>{Ha().then(l).catch(d=>console.error(d))};["placement","x","y","flipLevel","flip","width","overlap","minWidth"].forEach(d=>{fn(Kt(r,d),l)}),["teleportDisabled"].forEach(d=>{fn(Kt(r,d),u)}),fn(Kt(r,"syncTrigger"),d=>{d.includes("resize")?t.addResizeListener(l):t.removeResizeListener(l),d.includes("scroll")?t.addScrollListener(l):t.removeScrollListener(l)});const c=Kd(),f=xi(()=>{const{to:d}=r;if(d!==void 0)return d;!c.value});return{VBinder:t,mergedEnabled:e,offsetContainerRef:i,followerRef:n,mergedTo:f,syncPosition:l}},render(){return I(TX,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{const r=I("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[I("div",{class:"v-binder-follower-content",ref:"followerRef"},this.$slots)]);return this.zindexable?pu(r,[[CX,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):r}})}}),kX=function(){if(typeof Map!="undefined")return Map;function r(t,e){var n=-1;return t.some(function(i,a){return i[0]===e?(n=a,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(e){var n=r(this.__entries__,e),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(e,n){var i=r(this.__entries__,e);~i?this.__entries__[i][1]=n:this.__entries__.push([e,n])},t.prototype.delete=function(e){var n=this.__entries__,i=r(n,e);~i&&n.splice(i,1)},t.prototype.has=function(e){return!!~r(this.__entries__,e)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,n){n===void 0&&(n=null);for(var i=0,a=this.__entries__;i<a.length;i++){var o=a[i];e.call(n,o[1],o[0])}},t}()}(),QI=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,ZS=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),BUe=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(ZS):function(r){return setTimeout(function(){return r(Date.now())},1e3/60)}}(),$Ue=2;function zUe(r,t){var e=!1,n=!1,i=0;function a(){e&&(e=!1,r()),n&&s()}function o(){BUe(a)}function s(){var l=Date.now();if(e){if(l-i<$Ue)return;n=!0}else e=!0,n=!1,setTimeout(o,t);i=l}return s}var GUe=20,UUe=["top","right","bottom","left","width","height","size","weight"],VUe=typeof MutationObserver!="undefined",HUe=function(){function r(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=zUe(this.refresh.bind(this),GUe)}return r.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},r.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},r.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},r.prototype.updateObservers_=function(){var t=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return t.forEach(function(e){return e.broadcastActive()}),t.length>0},r.prototype.connect_=function(){!QI||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),VUe?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},r.prototype.disconnect_=function(){!QI||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},r.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=e===void 0?"":e,i=UUe.some(function(a){return!!~n.indexOf(a)});i&&this.refresh()},r.getInstance=function(){return this.instance_||(this.instance_=new r),this.instance_},r.instance_=null,r}(),IX=function(r,t){for(var e=0,n=Object.keys(t);e<n.length;e++){var i=n[e];Object.defineProperty(r,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return r},Rp=function(r){var t=r&&r.ownerDocument&&r.ownerDocument.defaultView;return t||ZS},PX=JS(0,0,0,0);function QS(r){return parseFloat(r)||0}function DX(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return t.reduce(function(n,i){var a=r["border-"+i+"-width"];return n+QS(a)},0)}function WUe(r){for(var t=["top","right","bottom","left"],e={},n=0,i=t;n<i.length;n++){var a=i[n],o=r["padding-"+a];e[a]=QS(o)}return e}function jUe(r){var t=r.getBBox();return JS(0,0,t.width,t.height)}function YUe(r){var t=r.clientWidth,e=r.clientHeight;if(!t&&!e)return PX;var n=Rp(r).getComputedStyle(r),i=WUe(n),a=i.left+i.right,o=i.top+i.bottom,s=QS(n.width),l=QS(n.height);if(n.boxSizing==="border-box"&&(Math.round(s+a)!==t&&(s-=DX(n,"left","right")+a),Math.round(l+o)!==e&&(l-=DX(n,"top","bottom")+o)),!qUe(r)){var u=Math.round(s+a)-t,c=Math.round(l+o)-e;Math.abs(u)!==1&&(s-=u),Math.abs(c)!==1&&(l-=c)}return JS(i.left,i.top,s,l)}var XUe=function(){return typeof SVGGraphicsElement!="undefined"?function(r){return r instanceof Rp(r).SVGGraphicsElement}:function(r){return r instanceof Rp(r).SVGElement&&typeof r.getBBox=="function"}}();function qUe(r){return r===Rp(r).document.documentElement}function KUe(r){return QI?XUe(r)?jUe(r):YUe(r):PX}function ZUe(r){var t=r.x,e=r.y,n=r.width,i=r.height,a=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,o=Object.create(a.prototype);return IX(o,{x:t,y:e,width:n,height:i,top:e,right:t+n,bottom:i+e,left:t}),o}function JS(r,t,e,n){return{x:r,y:t,width:e,height:n}}var QUe=function(){function r(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=JS(0,0,0,0),this.target=t}return r.prototype.isActive=function(){var t=KUe(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},r.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},r}(),JUe=function(){function r(t,e){var n=ZUe(e);IX(this,{target:t,contentRect:n})}return r}(),eVe=function(){function r(t,e,n){if(this.activeObservations_=[],this.observations_=new kX,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return r.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof Rp(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new QUe(t)),this.controller_.addObserver(this),this.controller_.refresh())}},r.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof Rp(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;!e.has(t)||(e.delete(t),e.size||this.controller_.removeObserver(this))}},r.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},r.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},r.prototype.broadcastActive=function(){if(!!this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(n){return new JUe(n.target,n.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},r.prototype.clearActive=function(){this.activeObservations_.splice(0)},r.prototype.hasActive=function(){return this.activeObservations_.length>0},r}(),RX=typeof WeakMap!="undefined"?new WeakMap:new kX,OX=function(){function r(t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var e=HUe.getInstance(),n=new eVe(t,e,this);RX.set(this,n)}return r}();["observe","unobserve","disconnect"].forEach(function(r){OX.prototype[r]=function(){var t;return(t=RX.get(this))[r].apply(t,arguments)}});var tVe=function(){return typeof ZS.ResizeObserver!="undefined"?ZS.ResizeObserver:OX}();class rVe{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new tVe(this.handleResize),this.elHandlersMap=new Map}handleResize(t){for(const e of t){const n=this.elHandlersMap.get(e.target);n!==void 0&&n(e)}}registerHandler(t,e){this.elHandlersMap.set(t,e),this.observer.observe(t)}unregisterHandler(t){!this.elHandlersMap.has(t)||(this.elHandlersMap.delete(t),this.observer.unobserve(t))}}var LX=new rVe,p0=xt({name:"ResizeObserver",props:{onResize:Function},setup(r){return{registered:!1,handleResize(t){const{onResize:e}=r;e!==void 0&&e(t)}}},mounted(){const r=this.$el;r===void 0?EX("resize-observer","$el does not exist."):r.nextElementSibling!==r.nextSibling?EX("resize-observer","$el can not be observed (it may be a text node)."):r.nextElementSibling!==null&&(LX.registerHandler(r.nextElementSibling,this.handleResize),this.registered=!0)},beforeUnmount(){this.registered&&LX.unregisterHandler(this.$el.nextElementSibling)},render(){return qr(this.$slots,"default")}});const nVe=rf(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[rf("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[rf("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]);var JI=xt({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(r){const t=Tp();nVe.mount({id:"vueuc/virtual-list",head:!0,ssr:t}),Ss(()=>{const{defaultScrollIndex:x,defaultScrollKey:w}=r;x!=null?f({index:x}):w!=null&&f({key:w})});const e=re(()=>{const x=new Map,{keyField:w}=r;return r.items.forEach((S,C)=>{x.set(S[w],C)}),x}),n=Oe(null),i=Oe(void 0),a=new Map,o=re(()=>{const{items:x,itemSize:w,keyField:S}=r,C=new IUe(x.length,w);return x.forEach((_,T)=>{const E=_[S],M=a.get(E);M!==void 0&&C.add(T,M)}),C}),s=Oe(0),l=Oe(0),u=xi(()=>Math.max(o.value.getBound(l.value-$o(r.paddingTop))-1,0)),c=re(()=>{const{value:x}=i;if(x===void 0)return[];const{items:w,itemSize:S}=r,C=u.value,_=Math.min(C+Math.ceil(x/S+1),w.length-1),T=[];for(let E=C;E<=_;++E)T.push(w[E]);return T}),f=x=>{const{left:w,top:S,index:C,key:_,position:T,behavior:E,debounce:M=!0}=x;if(w!==void 0||S!==void 0)h(w,S,E);else if(C!==void 0)d(C,E,M);else if(_!==void 0){const k=e.value.get(_);k!==void 0&&d(k,E,M)}else T==="bottom"?h(0,Number.MAX_SAFE_INTEGER,E):T==="top"&&h(0,0,E)};function d(x,w,S){const{value:C}=o,_=C.sum(x)+$o(r.paddingTop);if(!S)n.value.scrollTo({left:0,top:_,behavior:w});else{const{scrollTop:T,offsetHeight:E}=n.value;if(_>T){const M=C.get(x);_+M<=T+E||n.value.scrollTo({left:0,top:_+M-E,behavior:w})}else n.value.scrollTo({left:0,top:_,behavior:w})}m=x}function h(x,w,S){n.value.scrollTo({left:x,top:w,behavior:S})}function v(x,w){var S;if(r.ignoreItemResize)return;const{value:C}=o,_=e.value.get(x),T=w.target.offsetHeight;T-r.itemSize===0?a.delete(x):a.set(x,T-r.itemSize);const M=T-C.get(_);M!==0&&(y!==void 0&&_<=y&&((S=n.value)===null||S===void 0||S.scrollBy(0,M)),C.add(_,M),s.value++)}function p(x){OS(b);const{onScroll:w}=r;w!==void 0&&w(x)}function g(x){i.value=x.contentRect.height;const{onResize:w}=r;w!==void 0&&w(x)}let m,y;function b(){const{value:x}=n;x!=null&&(y=m!=null?m:u.value,m=void 0,l.value=n.value.scrollTop)}return{listHeight:i,listStyle:{overflow:"auto"},keyToIndex:e,itemsStyle:re(()=>{const{itemResizable:x}=r,w=fo(o.value.sum());return s.value,[r.itemsStyle,{boxSizing:"content-box",height:x?"":w,minHeight:x?w:"",paddingTop:fo(r.paddingTop),paddingBottom:fo(r.paddingBottom)}]}),visibleItemsStyle:re(()=>(s.value,{transform:`translate3d(0, ${fo(o.value.sum(u.value))}, 0)`})),viewportItems:c,listElRef:n,itemsElRef:Oe(null),scrollTo:f,handleListResize:g,handleListScroll:p,handleItemResize:v}},render(){const{itemResizable:r,keyField:t,keyToIndex:e,visibleItemsTag:n}=this;return I(p0,{onResize:this.handleListResize},{default:()=>{var i,a;return I("div",El(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.onWheel,ref:"listElRef"}),[this.items.length!==0?I("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[I(n,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(o=>{const s=o[t],l=e.get(s),u=this.$slots.default({item:o,index:l})[0];return r?I(p0,{key:s,onResize:c=>this.handleItemResize(s,c)},{default:()=>u}):(u.key=s,u)})})]):(a=(i=this.$slots).empty)===null||a===void 0?void 0:a.call(i)])}})}});const ah="v-hidden",iVe=rf("[v-hidden]",{display:"none!important"});var FX=xt({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateOverflow:Function},setup(r,{slots:t}){const e=Oe(null),n=Oe(null);function i(){const{value:o}=e,{getCounter:s,getTail:l}=r;let u;if(s!==void 0?u=s():u=n.value,!o||!u)return;u.hasAttribute(ah)&&u.removeAttribute(ah);const{children:c}=o,f=o.offsetWidth,d=[],h=t.tail?l==null?void 0:l():null;let v=h?h.offsetWidth:0,p=!1;const g=o.children.length-(t.tail?1:0);for(let y=0;y<g-1;++y){if(y<0)continue;const b=c[y];if(p){b.hasAttribute(ah)||b.setAttribute(ah,"");continue}else b.hasAttribute(ah)&&b.removeAttribute(ah);const x=b.offsetWidth;if(v+=x,d[y]=x,v>f){const{updateCounter:w}=r;for(let S=y;S>=0;--S){const C=g-1-S;w!==void 0?w(C):u.textContent=`${C}`;const _=u.offsetWidth;if(v-=d[S],v+_<=f||S===0){p=!0,y=S-1,h&&(y===-1?(h.style.maxWidth=`${f-_}px`,h.style.boxSizing="border-box"):h.style.maxWidth="");break}}}}const{onUpdateOverflow:m}=r;p?m!==void 0&&m(!0):(m!==void 0&&m(!1),u.setAttribute(ah,""))}const a=Tp();return iVe.mount({id:"vueuc/overflow",head:!0,ssr:a}),Ss(i),{selfRef:e,counterRef:n,sync:i}},render(){const{$slots:r}=this;return Ha(this.sync),I("div",{class:"v-overflow",ref:"selfRef"},[qr(r,"default"),r.counter?r.counter():I("span",{style:{display:"inline-block"},ref:"counterRef"}),r.tail?r.tail():null])}});const Cr={neutralBase:"#FFF",neutralInvertBase:"#000",neutralTextBase:"#000",neutralPopover:"#fff",neutralCard:"#fff",neutralModal:"#fff",neutralBody:"#fff",alpha1:"0.82",alpha2:"0.72",alpha3:"0.38",alpha4:"0.24",alpha5:"0.18",alphaClose:"0.52",alphaDisabled:"0.5",alphaDisabledInput:"0.02",alphaPending:"0.05",alphaTablePending:"0.02",alphaPressed:"0.07",alphaAvatar:"0.2",alphaRail:"0.14",alphaProgressRail:".08",alphaBorder:"0.12",alphaDivider:"0.06",alphaInput:"0",alphaAction:"0.02",alphaTab:"0.04",alphaScrollbar:"0.25",alphaScrollbarHover:"0.4",alphaCode:"0.05",alphaTag:"0.02",primaryHover:"#36ad6a",primaryDefault:"#18a058",primaryActive:"#0c7a43",primarySuppl:"#36ad6a",infoHover:"#4098fc",infoDefault:"#2080f0",infoActive:"#1060c9",infoSuppl:"#4098fc",errorHover:"#de576d",errorDefault:"#d03050",errorActive:"#ab1f3f",errorSuppl:"#de576d",warningHover:"#fcb040",warningDefault:"#f0a020",warningActive:"#c97c10",warningSuppl:"#fcb040",successHover:"#36ad6a",successDefault:"#18a058",successActive:"#0c7a43",successSuppl:"#36ad6a"},aVe=Yd(Cr.neutralBase),NX=Yd(Cr.neutralInvertBase),oVe="rgba("+NX.slice(0,3).join(", ")+", ";function BX(r){return oVe+String(r)+")"}function Ja(r){const t=Array.from(NX);return t[3]=Number(r),yi(aVe,t)}const sVe=Object.assign(Object.assign({name:"common"},Jc),{baseColor:Cr.neutralBase,primaryColor:Cr.primaryDefault,primaryColorHover:Cr.primaryHover,primaryColorPressed:Cr.primaryActive,primaryColorSuppl:Cr.primarySuppl,infoColor:Cr.infoDefault,infoColorHover:Cr.infoHover,infoColorPressed:Cr.infoActive,infoColorSuppl:Cr.infoSuppl,successColor:Cr.successDefault,successColorHover:Cr.successHover,successColorPressed:Cr.successActive,successColorSuppl:Cr.successSuppl,warningColor:Cr.warningDefault,warningColorHover:Cr.warningHover,warningColorPressed:Cr.warningActive,warningColorSuppl:Cr.warningSuppl,errorColor:Cr.errorDefault,errorColorHover:Cr.errorHover,errorColorPressed:Cr.errorActive,errorColorSuppl:Cr.errorSuppl,textColorBase:Cr.neutralTextBase,textColor1:"rgb(31, 34, 37)",textColor2:"rgb(51, 54, 57)",textColor3:"rgb(118, 124, 130)",textColorDisabled:Ja(Cr.alpha4),placeholderColor:Ja(Cr.alpha4),placeholderColorDisabled:Ja(Cr.alpha5),iconColor:Ja(Cr.alpha4),iconColorHover:FS(Ja(Cr.alpha4),{lightness:.75}),iconColorPressed:FS(Ja(Cr.alpha4),{lightness:.9}),iconColorDisabled:Ja(Cr.alpha5),opacity1:Cr.alpha1,opacity2:Cr.alpha2,opacity3:Cr.alpha3,opacity4:Cr.alpha4,opacity5:Cr.alpha5,dividerColor:"rgb(239, 239, 245)",borderColor:"rgb(224, 224, 230)",closeColor:Ja(Number(Cr.alphaClose)),closeColorHover:Ja(Number(Cr.alphaClose)*1.25),closeColorPressed:Ja(Number(Cr.alphaClose)*.8),closeColorDisabled:Ja(Cr.alpha4),clearColor:Ja(Cr.alpha4),clearColorHover:FS(Ja(Cr.alpha4),{lightness:.75}),clearColorPressed:FS(Ja(Cr.alpha4),{lightness:.9}),scrollbarColor:BX(Cr.alphaScrollbar),scrollbarColorHover:BX(Cr.alphaScrollbarHover),scrollbarWidth:"5px",scrollbarHeight:"5px",scrollbarBorderRadius:"5px",progressRailColor:Ja(Cr.alphaProgressRail),railColor:"rgb(219, 219, 223)",popoverColor:Cr.neutralPopover,tableColor:Cr.neutralCard,cardColor:Cr.neutralCard,modalColor:Cr.neutralModal,bodyColor:Cr.neutralBody,tagColor:"rgb(250, 250, 252)",avatarColor:Ja(Cr.alphaAvatar),invertedColor:"rgb(0, 20, 40)",inputColor:Ja(Cr.alphaInput),codeColor:"rgb(244, 244, 248)",tabColor:"rgb(247, 247, 250)",actionColor:"rgb(250, 250, 252)",tableHeaderColor:"rgb(250, 250, 252)",hoverColor:"rgb(243, 243, 245)",tableColorHover:"rgba(0, 0, 100, 0.03)",tableColorStriped:"rgba(0, 0, 100, 0.02)",pressedColor:"rgb(237, 237, 239)",opacityDisabled:Cr.alphaDisabled,inputColorDisabled:"rgb(250, 250, 252)",buttonColor2:"rgba(46, 51, 56, .05)",buttonColor2Hover:"rgba(46, 51, 56, .09)",buttonColor2Pressed:"rgba(46, 51, 56, .13)",boxShadow1:"0 1px 2px -2px rgba(0, 0, 0, .08), 0 3px 6px 0 rgba(0, 0, 0, .06), 0 5px 12px 4px rgba(0, 0, 0, .04)",boxShadow2:"0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05)",boxShadow3:"0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03)"});var Wn=sVe,lVe={iconSizeSmall:"34px",iconSizeMedium:"40px",iconSizeLarge:"46px",iconSizeHuge:"52px"};const uVe=r=>{const{textColorDisabled:t,iconColor:e,textColor2:n,fontSizeSmall:i,fontSizeMedium:a,fontSizeLarge:o,fontSizeHuge:s}=r;return Object.assign(Object.assign({},lVe),{fontSizeSmall:i,fontSizeMedium:a,fontSizeLarge:o,fontSizeHuge:s,textColor:t,iconColor:e,extraTextColor:n})},cVe={name:"Empty",common:Wn,self:uVe};var eP=cVe,fVe=de("empty",`
 display: flex;
 flex-direction: column;
 align-items: center;
 font-size: var(--font-size);
`,[Se("icon",`
 width: var(--icon-size);
 height: var(--icon-size);
 font-size: var(--icon-size);
 line-height: var(--icon-size);
 color: var(--icon-color);
 transition:
 color .3s var(--bezier);
 `),Se("description",`
 margin-top: 8px;
 transition: color .3s var(--bezier);
 color: var(--text-color);
 `),Se("extra",`
 text-align: center;
 transition: color .3s var(--bezier);
 margin-top: 12px;
 color: var(--extra-text-color);
 `)]);const dVe=Object.assign(Object.assign({},rr.props),{description:{type:String,default:void 0},showDescription:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function});var $X=xt({name:"Empty",props:dVe,setup(r){const{mergedClsPrefixRef:t}=mn(r),e=rr("Empty","Empty",fVe,eP,r,t),{localeRef:n}=Qd("Empty"),i=or(Mp,null),a=re(()=>{var s,l,u;return(s=r.description)!==null&&s!==void 0?s:(u=(l=i==null?void 0:i.mergedComponentPropsRef.value)===null||l===void 0?void 0:l.Empty)===null||u===void 0?void 0:u.description}),o=re(()=>{var s,l;return((l=(s=i==null?void 0:i.mergedComponentPropsRef.value)===null||s===void 0?void 0:s.Empty)===null||l===void 0?void 0:l.renderIcon)||(()=>I(z8e,null))});return{mergedClsPrefix:t,mergedRenderIcon:o,localizedDescription:re(()=>a.value||n.value.description),cssVars:re(()=>{const{size:s}=r,{common:{cubicBezierEaseInOut:l},self:{[Ot("iconSize",s)]:u,[Ot("fontSize",s)]:c,textColor:f,iconColor:d,extraTextColor:h}}=e.value;return{"--icon-size":u,"--font-size":c,"--bezier":l,"--text-color":f,"--icon-color":d,"--extra-text-color":h}})}},render(){const{$slots:r,mergedClsPrefix:t}=this;return I("div",{class:`${t}-empty`,style:this.cssVars},I("div",{class:`${t}-empty__icon`},qr(r,"icon",void 0,()=>[I(si,{clsPrefix:t},{default:this.mergedRenderIcon})])),this.showDescription?I("div",{class:`${t}-empty__description`},qr(r,"default",void 0,()=>[this.localizedDescription])):null,r.extra?I("div",{class:`${t}-empty__extra`},qr(r,"extra")):null)}});const hVe=r=>{const{scrollbarColor:t,scrollbarColorHover:e}=r;return{color:t,colorHover:e}},vVe={name:"Scrollbar",common:Wn,self:hVe};var oh=vVe;const{cubicBezierEaseInOut:zX}=Jc;function tP({name:r="fade-in",enterDuration:t="0.2s",leaveDuration:e="0.2s",enterCubicBezier:n=zX,leaveCubicBezier:i=zX}={}){return[_e(`&.${r}-transition-enter-active`,{transition:`all ${t} ${n}!important`}),_e(`&.${r}-transition-leave-active`,{transition:`all ${e} ${i}!important`}),_e(`&.${r}-transition-enter-from, &.${r}-transition-leave-to`,{opacity:0}),_e(`&.${r}-transition-leave-from, &.${r}-transition-enter-to`,{opacity:1})]}var pVe=de("scrollbar",`
 overflow: hidden;
 position: relative;
 z-index: auto;
 height: 100%;
 width: 100%;
`,[_e(">",[de("scrollbar-container",`
 width: 100%;
 overflow: scroll;
 height: 100%;
 max-height: inherit;
 scrollbar-width: none;
 `,[_e("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),_e(">",[de("scrollbar-content",`
 box-sizing: border-box;
 min-width: 100%;
 `)])]),de("scrollbar-rail",`
 position: absolute;
 pointer-events: none;
 user-select: none;
 `,[Ge("horizontal",`
 left: 2px;
 right: 2px;
 bottom: 4px;
 height: var(--scrollbar-height);
 `,[_e(">",[Se("scrollbar",`
 height: var(--scrollbar-height);
 border-radius: var(--scrollbar-border-radius);
 right: 0;
 `)])]),Ge("vertical",`
 right: 4px;
 top: 2px;
 bottom: 2px;
 width: var(--scrollbar-width);
 `,[_e(">",[Se("scrollbar",`
 width: var(--scrollbar-width);
 border-radius: var(--scrollbar-border-radius);
 bottom: 0;
 `)])]),Ge("disabled",[_e(">",[Se("scrollbar",{pointerEvents:"none"})])]),_e(">",[Se("scrollbar",`
 position: absolute;
 cursor: pointer;
 pointer-events: all;
 background-color: var(--scrollbar-color);
 transition: background-color .2s var(--scrollbar-bezier);
 `,[tP(),_e("&:hover",{backgroundColor:"var(--scrollbar-color-hover)"})])])])])]);const gVe=Object.assign(Object.assign({},rr.props),{size:{type:Number,default:5},duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:{type:Boolean,default:!1},container:Function,content:Function,containerStyle:[String,Object],contentClass:String,contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function}),mVe=xt({name:"Scrollbar",props:gVe,inheritAttrs:!1,setup(r){const{mergedClsPrefixRef:t}=mn(r),e=Oe(null),n=Oe(null),i=Oe(null),a=Oe(null),o=Oe(null),s=Oe(null),l=Oe(null),u=Oe(null),c=Oe(null),f=Oe(null),d=Oe(null),h=Oe(0),v=Oe(0),p=Oe(!1),g=Oe(!1);let m=!1,y=!1,b,x,w=0,S=0,C=0,_=0;const T=BGe(),E=re(()=>{const{value:q}=u,{value:ee}=s,{value:Q}=f;return q===null||ee===null||Q===null?0:Math.min(q,Q*q/ee+r.size*1.5)}),M=re(()=>`${E.value}px`),k=re(()=>{const{value:q}=c,{value:ee}=l,{value:Q}=d;return q===null||ee===null||Q===null?0:Q*q/ee+r.size*1.5}),P=re(()=>`${k.value}px`),F=re(()=>{const{value:q}=u,{value:ee}=h,{value:Q}=s,{value:me}=f;return q===null||Q===null||me===null?0:ee/(Q-q)*(me-E.value)}),$=re(()=>`${F.value}px`),R=re(()=>{const{value:q}=c,{value:ee}=v,{value:Q}=l,{value:me}=d;return q===null||Q===null||me===null?0:ee/(Q-q)*(me-k.value)}),L=re(()=>`${R.value}px`),O=re(()=>{const{value:q}=u,{value:ee}=s;return q!==null&&ee!==null&&ee>q}),B=re(()=>{const{value:q}=c,{value:ee}=l;return q!==null&&ee!==null&&ee>q}),U=re(()=>{const{container:q}=r;return q?q():n.value}),W=re(()=>{const{content:q}=r;return q?q():i.value}),X=he,ae=q=>{const{onResize:ee}=r;ee&&ee(q),he()},Z=(q,ee)=>{if(!r.scrollable)return;if(typeof q=="number"){Y(q,ee!=null?ee:0,0,!1,"auto");return}const{left:Q,top:me,index:He,elSize:ze,position:it,behavior:we,el:nt,debounce:st=!0}=q;(Q!==void 0||me!==void 0)&&Y(Q!=null?Q:0,me!=null?me:0,0,!1,we),nt!==void 0?Y(0,nt.offsetTop,nt.offsetHeight,st,we):He!==void 0&&ze!==void 0?Y(0,He*ze,ze,st,we):it==="bottom"?Y(0,Number.MAX_SAFE_INTEGER,0,!1,we):it==="top"&&Y(0,0,0,!1,we)};function Y(q,ee,Q,me,He){const{value:ze}=U;if(!!ze){if(me){const{scrollTop:it,offsetHeight:we}=ze;if(ee>it){ee+Q<=it+we||ze.scrollTo({left:q,top:ee+Q-we,behavior:He});return}}ze.scrollTo({left:q,top:ee,behavior:He})}}function fe(){je(),ke(),he()}function le(){ue()}function ue(){Ee(),De()}function Ee(){x!==void 0&&window.clearTimeout(x),x=window.setTimeout(()=>{g.value=!1},r.duration)}function De(){b!==void 0&&window.clearTimeout(b),b=window.setTimeout(()=>{p.value=!1},r.duration)}function je(){b!==void 0&&window.clearTimeout(b),p.value=!0}function ke(){x!==void 0&&window.clearTimeout(x),g.value=!0}function D(q){const{onScroll:ee}=r;ee&&ee(q),z()}function z(){const{value:q}=U;q&&(h.value=q.scrollTop,v.value=q.scrollLeft)}function H(){const{value:q}=W;q&&(s.value=q.offsetHeight,l.value=q.offsetWidth);const{value:ee}=U;ee&&(u.value=ee.offsetHeight,c.value=ee.offsetWidth);const{value:Q}=o,{value:me}=a;Q&&(d.value=Q.offsetWidth),me&&(f.value=me.offsetHeight)}function he(){!r.scrollable||(H(),z())}function te(q){var ee;return!((ee=e.value)===null||ee===void 0?void 0:ee.contains(q.target))}function ge(q){q.preventDefault(),q.stopPropagation(),y=!0,Fi("mousemove",window,Qe,!0),Fi("mouseup",window,Ve,!0),S=v.value,C=q.clientX}function Qe(q){if(!y)return;b!==void 0&&window.clearTimeout(b),x!==void 0&&window.clearTimeout(x);const{value:ee}=c,{value:Q}=l,{value:me}=k;if(ee===null||Q===null)return;const ze=(q.clientX-C)*(Q-ee)/(ee-me),it=Q-ee;let we=S+ze;we=Math.min(it,we),we=Math.max(we,0);const{value:nt}=U;if(nt){nt.scrollLeft=we;const{internalOnUpdateScrollLeft:st}=r;st&&st(we)}}function Ve(q){q.preventDefault(),q.stopPropagation(),wi("mousemove",window,Qe,!0),wi("mouseup",window,Ve,!0),y=!1,he(),te(q)&&ue()}function Ie(q){q.preventDefault(),q.stopPropagation(),m=!0,Fi("mousemove",window,Be,!0),Fi("mouseup",window,V,!0),w=h.value,_=q.clientY}function Be(q){if(!m)return;b!==void 0&&window.clearTimeout(b),x!==void 0&&window.clearTimeout(x);const{value:ee}=u,{value:Q}=s,{value:me}=E;if(ee===null||Q===null)return;const ze=(q.clientY-_)*(Q-ee)/(ee-me),it=Q-ee;let we=w+ze;we=Math.min(it,we),we=Math.max(we,0);const{value:nt}=U;nt&&(nt.scrollTop=we)}function V(q){q.preventDefault(),q.stopPropagation(),wi("mousemove",window,Be,!0),wi("mouseup",window,V,!0),m=!1,he(),te(q)&&ue()}Ks(()=>{const{value:q}=B,{value:ee}=O,{value:Q}=t,{value:me}=o,{value:He}=a;me&&(q?me.classList.remove(`${Q}-scrollbar-rail--disabled`):me.classList.add(`${Q}-scrollbar-rail--disabled`)),He&&(ee?He.classList.remove(`${Q}-scrollbar-rail--disabled`):He.classList.add(`${Q}-scrollbar-rail--disabled`))}),Ss(()=>{r.container||he()}),es(()=>{b!==void 0&&window.clearTimeout(b),x!==void 0&&window.clearTimeout(x),wi("mousemove",window,Be,!0),wi("mouseup",window,V,!0)});const j=rr("Scrollbar","Scrollbar",pVe,oh,r,t);return{sync:he,scrollTo:Z,mergedClsPrefix:t,containerScrollTop:h,wrapperRef:e,containerRef:n,contentRef:i,yRailRef:a,xRailRef:o,needYBar:O,needXBar:B,yBarSizePx:M,xBarSizePx:P,yBarTopPx:$,xBarLeftPx:L,isShowXBar:p,isShowYBar:g,isIos:T,handleScroll:D,handleContentResize:X,handleContainerResize:ae,handleMouseEnterWrapper:fe,handleMouseLeaveWrapper:le,handleYScrollMouseDown:Ie,handleXScrollMouseDown:ge,cssVars:re(()=>{const{common:{cubicBezierEaseInOut:q,scrollbarBorderRadius:ee,scrollbarHeight:Q,scrollbarWidth:me},self:{color:He,colorHover:ze}}=j.value;return{"--scrollbar-bezier":q,"--scrollbar-color":He,"--scrollbar-color-hover":ze,"--scrollbar-border-radius":ee,"--scrollbar-width":me,"--scrollbar-height":Q}})}},render(){const{$slots:r,mergedClsPrefix:t}=this;if(!this.scrollable)return qr(r,"default");const e=()=>I("div",El(this.$attrs,{ref:"wrapperRef",class:`${t}-scrollbar`,style:this.cssVars,onMouseenter:this.handleMouseEnterWrapper,onMouseleave:this.handleMouseLeaveWrapper}),[this.container?qr(r,"default"):I("div",{ref:"containerRef",class:`${t}-scrollbar-container`,style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},I(p0,{onResize:this.handleContentResize},{default:()=>I("div",{ref:"contentRef",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${t}-scrollbar-content`,this.contentClass]},r)})),I("div",{ref:"yRailRef",class:`${t}-scrollbar-rail ${t}-scrollbar-rail--vertical`,style:[this.horizontalRailStyle]},I(Ra,{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?I("div",{class:`${t}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),I("div",{ref:"xRailRef",class:`${t}-scrollbar-rail ${t}-scrollbar-rail--horizontal`,style:[this.verticalRailStyle]},I(Ra,{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?I("div",{class:`${t}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,left:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))]);return this.container?e():I(p0,{onResize:this.handleContainerResize},{default:e})}});var Bs=mVe;const yVe=I(F8e);function bVe(r,t){return I(Ra,{name:"fade-in-scale-up-transition"},{default:()=>r?I(si,{clsPrefix:t,class:`${t}-base-select-option__check`},{default:()=>yVe}):null})}var GX=xt({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(r){const{valueRef:t,pendingTmNodeRef:e,multipleRef:n,valueSetRef:i,renderLabelRef:a,renderOptionRef:o,handleOptionClick:s,handleOptionMouseEnter:l}=or(DI),u=xi(()=>{const{value:h}=e;return h?r.tmNode.key===h.key:!1});function c(h){const{tmNode:v}=r;v.disabled||s(h,v)}function f(h){const{tmNode:v}=r;v.disabled||l(h,v)}function d(h){const{tmNode:v}=r,{value:p}=u;v.disabled||p||l(h,v)}return{multiple:n,isGrouped:xi(()=>{const{tmNode:h}=r,{parent:v}=h;return v&&v.rawNode.type==="group"}),isPending:u,isSelected:xi(()=>{const{value:h}=t,{value:v}=n;if(h===null)return!1;const p=r.tmNode.rawNode.value;if(v){const{value:g}=i;return g.has(p)}else return h===p}),renderLabel:a,renderOption:o,handleMouseMove:d,handleMouseEnter:f,handleClick:c}},render(){const{clsPrefix:r,tmNode:{rawNode:t},isSelected:e,isPending:n,isGrouped:i,multiple:a,renderOption:o,renderLabel:s,handleClick:l,handleMouseEnter:u,handleMouseMove:c}=this,d=bVe(a&&e,r),h=s?[s(t,e),d]:[Ni(t.label,t,e),d],v=I("div",{class:[`${r}-base-select-option`,t.class,{[`${r}-base-select-option--disabled`]:t.disabled,[`${r}-base-select-option--selected`]:e,[`${r}-base-select-option--grouped`]:i,[`${r}-base-select-option--pending`]:n}],style:t.style,onClick:l,onMouseenter:u,onMousemove:c},I("div",{class:`${r}-base-select-option__content`},h));return t.render?t.render({node:v,option:t,selected:e}):o?o({node:v,option:t,selected:e}):v}}),UX=xt({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:r,renderOptionRef:t}=or(DI);return{renderLabel:r,renderOption:t}},render(){const{clsPrefix:r,renderLabel:t,renderOption:e,tmNode:{rawNode:n}}=this,i=t?t(n,!1):Ni(n.label,n,!1),a=I("div",{class:`${r}-base-select-group-header`},i);return n.render?n.render({node:a,option:n}):e?e({node:a,option:n,selected:!1}):a}});const{cubicBezierEaseIn:VX,cubicBezierEaseOut:HX,transformDebounceScale:xVe}=Jc;function nf({transformOrigin:r="inherit",duration:t=".2s",enterScale:e=".9",originalTransform:n="",originalTransition:i=""}={}){return[_e("&.fade-in-scale-up-transition-leave-active",{transformOrigin:r,transition:`opacity ${t} ${VX}, transform ${t} ${VX} ${i&&","+i}`}),_e("&.fade-in-scale-up-transition-enter-active",{transformOrigin:r,transition:`opacity ${t} ${HX}, transform ${t} ${HX} ${i&&","+i}`}),_e("&.fade-in-scale-up-transition-enter-from, &.fade-in-scale-up-transition-leave-to",{opacity:0,transform:`${n} scale(${e})`}),_e("&.fade-in-scale-up-transition-leave-from, &.fade-in-scale-up-transition-enter-to",{opacity:1,transform:`${n} scale(${xVe})`})]}var wVe=de("base-select-menu",`
 line-height: 1.5;
 outline: none;
 z-index: 0;
 position: relative;
 border-radius: var(--border-radius);
 transition:
 background-color .3s var(--bezier),
 box-shadow .3s var(--bezier);
 background-color: var(--color);
`,[Ge("multiple",[de("base-select-option",`
 padding-right: 28px;
 `)]),de("scrollbar",`
 max-height: var(--height);
 `),de("virtual-list",`
 max-height: var(--height);
 `),de("base-select-option",`
 min-height: var(--option-height);
 font-size: var(--option-font-size);
 display: flex;
 align-items: center;
 `,[Se("content",`
 white-space: nowrap;
 text-overflow: ellipsis;
 overflow: hidden;
 `)]),de("base-select-group-header",`
 min-height: var(--option-height);
 font-size: .93em;
 display: flex;
 align-items: center;
 `),de("base-select-menu-option-wrapper",`
 position: relative;
 width: 100%;
 `),Se("loading, empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),Se("loading",`
 color: var(--loading-color);
 font-size: var(--loading-size);
 `),Se("action",`
 padding: 8px var(--option-padding-left);
 font-size: var(--option-font-size);
 transition: 
 color .3s var(--bezier);
 border-color .3s var(--bezier);
 border-top: 1px solid var(--action-divider-color);
 color: var(--action-text-color);
 `),de("base-select-group-header",`
 position: relative;
 cursor: default;
 padding: var(--option-padding);
 color: var(--group-header-text-color);
 `),de("base-select-option",`
 cursor: pointer;
 position: relative;
 padding: var(--option-padding);
 transition:
 background-color .3s var(--bezier),
 color .3s var(--bezier),
 opacity .3s var(--bezier);
 box-sizing: border-box;
 color: var(--option-text-color);
 opacity: 1;
 `,[_e("&:active",`
 color: var(--option-text-color-pressed);
 `),Ge("grouped",`
 padding-left: calc(var(--option-padding-left) * 1.5);
 `),Ge("pending",`
 background-color: var(--option-color-pending);
 `),Ge("selected",`
 color: var(--option-text-color-active);
 background-color: var(--option-color-active);
 `),Ge("disabled",`
 cursor: not-allowed;
 `,[Mn("selected",`
 color: var(--option-text-color-disabled);
 `),Ge("selected",`
 opacity: var(--option-opacity-disabled);
 `)]),Se("check",`
 font-size: 16px;
 position: absolute;
 right: 8px;
 top: calc(50% - 7px);
 color: var(--option-check-color);
 transition: color .3s var(--bezier);
 `,[nf({enterScale:"0.5"})])])]),SVe={height:"calc(var(--option-height) * 7.6)",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"};const CVe=r=>{const{borderRadius:t,popoverColor:e,textColor3:n,dividerColor:i,textColor2:a,primaryColorPressed:o,textColorDisabled:s,primaryColor:l,opacityDisabled:u,hoverColor:c,fontSizeSmall:f,fontSizeMedium:d,fontSizeLarge:h,fontSizeHuge:v,heightSmall:p,heightMedium:g,heightLarge:m,heightHuge:y}=r;return Object.assign(Object.assign({},SVe),{optionFontSizeSmall:f,optionFontSizeMedium:d,optionFontSizeLarge:h,optionFontSizeHuge:v,optionHeightSmall:p,optionHeightMedium:g,optionHeightLarge:m,optionHeightHuge:y,borderRadius:t,color:e,groupHeaderTextColor:n,actionDividerColor:i,optionTextColor:a,optionTextColorPressed:o,optionTextColorDisabled:s,optionTextColorActive:l,optionOpacityDisabled:u,optionCheckColor:l,optionColorPending:c,optionColorActive:c,actionTextColor:a,loadingColor:l})},EVe=Go({name:"InternalSelectMenu",common:Wn,peers:{Scrollbar:oh,Empty:eP},self:CVe});var WX=EVe,_Ve=xt({name:"InternalSelectMenu",props:Object.assign(Object.assign({},rr.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},width:[Number,String],autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onToggle:Function}),setup(r){const t=rr("InternalSelectMenu","InternalSelectMenu",wVe,WX,r,Kt(r,"clsPrefix")),e=Oe(null),n=Oe(null),i=Oe(null),a=re(()=>r.treeMate.getFlattenedNodes()),o=re(()=>lUe(a.value)),s=Oe(null);function l(){const{treeMate:R}=r;E(r.autoPending?r.value===null?R.getFirstAvailableNode():r.multiple?R.getNode((r.value||[])[(r.value||[]).length-1])||R.getFirstAvailableNode():R.getNode(r.value)||R.getFirstAvailableNode():null)}l(),Ss(()=>{Ks(()=>{r.show&&(l(),Ha(M))})});const u=re(()=>$o(t.value.self[Ot("optionHeight",r.size)])),c=re(()=>LS(t.value.self[Ot("padding",r.size)])),f=re(()=>r.multiple&&Array.isArray(r.value)?new Set(r.value):new Set),d=re(()=>{const R=a.value;return R&&R.length===0}),h=re(()=>[{width:sa(r.width)},F.value]);fn(Kt(r,"treeMate"),()=>{if(r.autoPending){const R=r.treeMate.getFirstAvailableNode();E(R)}else E(null)});function v(R){const{onToggle:L}=r;L&&L(R)}function p(R){const{onScroll:L}=r;L&&L(R)}function g(R){var L;(L=i.value)===null||L===void 0||L.sync(),p(R)}function m(){var R;(R=i.value)===null||R===void 0||R.sync()}function y(){const{value:R}=s;return R||null}function b(R,L){L.disabled||E(L,!1)}function x(R,L){L.disabled||v(L)}function w(R){var L;Vd(R,"action")||(L=r.onKeyup)===null||L===void 0||L.call(r,R)}function S(R){var L;Vd(R,"action")||(L=r.onKeydown)===null||L===void 0||L.call(r,R)}function C(R){var L;(L=r.onMousedown)===null||L===void 0||L.call(r,R),!r.focusable&&R.preventDefault()}function _(){const{value:R}=s;R&&E(R.getNext({loop:!0}),!0)}function T(){const{value:R}=s;R&&E(R.getPrev({loop:!0}),!0)}function E(R,L=!1){s.value=R,L&&M()}function M(){var R,L;const O=s.value;if(!O)return;const B=o.value(O.key);B!==null&&(r.virtualScroll?(R=n.value)===null||R===void 0||R.scrollTo({index:B}):(L=i.value)===null||L===void 0||L.scrollTo({index:B,elSize:u.value}))}function k(R){var L,O;((L=e.value)===null||L===void 0?void 0:L.contains(R.target))&&((O=r.onFocus)===null||O===void 0||O.call(r,R))}function P(R){var L,O;((L=e.value)===null||L===void 0?void 0:L.contains(R.relatedTarget))||(O=r.onBlur)===null||O===void 0||O.call(r,R)}rn(DI,{handleOptionMouseEnter:b,handleOptionClick:x,valueSetRef:f,multipleRef:Kt(r,"multiple"),valueRef:Kt(r,"value"),renderLabelRef:Kt(r,"renderLabel"),renderOptionRef:Kt(r,"renderOption"),pendingTmNodeRef:s}),rn(lX,e),Ss(()=>{const{value:R}=i;R&&R.sync()});const F=re(()=>{const{size:R}=r,{common:{cubicBezierEaseInOut:L},self:{height:O,borderRadius:B,color:U,groupHeaderTextColor:W,actionDividerColor:X,optionTextColorPressed:ae,optionTextColor:Z,optionTextColorDisabled:Y,optionTextColorActive:fe,optionOpacityDisabled:le,optionCheckColor:ue,actionTextColor:Ee,optionColorPending:De,optionColorActive:je,loadingColor:ke,loadingSize:D,[Ot("optionFontSize",R)]:z,[Ot("optionHeight",R)]:H,[Ot("optionPadding",R)]:he}}=t.value;return{"--height":O,"--action-divider-color":X,"--action-text-color":Ee,"--bezier":L,"--border-radius":B,"--color":U,"--option-font-size":z,"--group-header-text-color":W,"--option-check-color":ue,"--option-color-pending":De,"--option-color-active":je,"--option-height":H,"--option-opacity-disabled":le,"--option-text-color":Z,"--option-text-color-active":fe,"--option-text-color-disabled":Y,"--option-text-color-pressed":ae,"--option-padding":he,"--option-padding-left":LS(he,"left"),"--loading-color":ke,"--loading-size":D}});return Object.assign({mergedTheme:t,virtualListRef:n,scrollbarRef:i,style:h,itemSize:u,padding:c,flattenedNodes:a,empty:d,virtualListContainer(){const{value:R}=n;return R==null?void 0:R.listElRef},virtualListContent(){const{value:R}=n;return R==null?void 0:R.itemsElRef},doScroll:p,handleFocusin:k,handleFocusout:P,handleKeyUp:w,handleKeyDown:S,handleMouseDown:C,handleVirtualListResize:m,handleVirtualListScroll:g},{selfRef:e,next:_,prev:T,getPendingTmNode:y})},render(){const{$slots:r,virtualScroll:t,clsPrefix:e,mergedTheme:n}=this;return I("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:[`${e}-base-select-menu`,this.multiple&&`${e}-base-select-menu--multiple`],style:this.style,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},this.loading?I("div",{class:`${e}-base-select-menu__loading`},I(Ip,{clsPrefix:e,strokeWidth:20})):this.empty?I("div",{class:`${e}-base-select-menu__empty`},qr(r,"empty",void 0,()=>[I($X,{theme:n.peers.Empty,themeOverrides:n.peerOverrides.Empty})])):I(Bs,{ref:"scrollbarRef",theme:n.peers.Scrollbar,themeOverrides:n.peerOverrides.Scrollbar,scrollable:this.scrollable,container:t?this.virtualListContainer:void 0,content:t?this.virtualListContent:void 0,onScroll:t?void 0:this.doScroll},{default:()=>t?I(JI,{ref:"virtualListRef",class:`${e}-virtual-list`,items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemResizable:!0},{default:({item:i})=>i.isGroup?I(UX,{key:i.key,clsPrefix:e,tmNode:i}):i.ignored?null:I(GX,{clsPrefix:e,key:i.key,tmNode:i})}):I("div",{class:`${e}-base-select-menu-option-wrapper`,style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map(i=>i.isGroup?I(UX,{key:i.key,clsPrefix:e,tmNode:i}):I(GX,{clsPrefix:e,key:i.key,tmNode:i})))}),r.action&&I("div",{class:`${e}-base-select-menu__action`,"data-action":!0},qr(r,"action")),r.action&&I(nh,{onFocus:this.onTabOut}))}}),TVe=de("base-wave",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
`),AVe=xt({name:"BaseWave",props:{clsPrefix:{type:String,required:!0}},setup(r){kp("BaseWave",TVe,Kt(r,"clsPrefix"));const t=Oe(null),e=Oe(!1);let n=null;return es(()=>{n!==null&&window.clearTimeout(n)}),{active:e,selfRef:t,play(){n!==null&&(window.clearTimeout(n),e.value=!1,n=null),Ha(()=>{var i;(i=t.value)===null||i===void 0||i.offsetHeight,e.value=!0,n=window.setTimeout(()=>{e.value=!1,n=null},1e3)})}}},render(){const{clsPrefix:r}=this;return I("div",{ref:"selfRef","aria-hidden":!0,class:[`${r}-base-wave`,this.active&&`${r}-base-wave--active`]})}}),MVe={space:"6px",spaceArrow:"10px",arrowOffset:"10px",arrowOffsetVertical:"10px",arrowHeight:"6px",padding:"8px 14px"};const kVe=r=>{const{boxShadow2:t,popoverColor:e,textColor2:n,borderRadius:i,fontSize:a,dividerColor:o}=r;return Object.assign(Object.assign({},MVe),{fontSize:a,borderRadius:i,color:e,dividerColor:o,textColor:n,boxShadow:t})},IVe={name:"Popover",common:Wn,self:kVe};var g0=IVe;const rP={top:"bottom",bottom:"top",left:"right",right:"left"};var PVe=_e([de("popover",`
 transition:
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier),
 color .3s var(--bezier);
 transform-origin: inherit;
 position: relative;
 font-size: var(--font-size);
 color: var(--text-color);
 box-shadow: var(--box-shadow);
 `,[_e("&.popover-transition-enter-from, &.popover-transition-leave-to",`
 opacity: 0;
 transform: scale(.85);
 `),_e("&.popover-transition-enter-to, &.popover-transition-leave-from",`
 transform: scale(1);
 opacity: 1;
 `),_e("&.popover-transition-enter-active",`
 transition:
 opacity .15s var(--bezier-ease-out),
 transform .15s var(--bezier-ease-out);
 `),_e("&.popover-transition-leave-active",`
 transition:
 opacity .15s var(--bezier-ease-in),
 transform .15s var(--bezier-ease-in);
 `),Mn("raw",`
 background-color: var(--color);
 border-radius: var(--border-radius);
 `,[Mn("show-header","padding: var(--padding);")]),Se("header",`
 padding: var(--padding);
 border-bottom: 1px solid var(--divider-color);
 transition: border-color .3s var(--bezier);
 `),Se("content",`
 padding: var(--padding);
 `),de("popover-arrow-wrapper",`
 position: absolute;
 overflow: hidden;
 pointer-events: none;
 `,[de("popover-arrow",`
 transition: background-color .3s var(--bezier);
 position: absolute;
 display: block;
 width: calc(var(--arrow-height) * 1.414);
 height: calc(var(--arrow-height) * 1.414);
 box-shadow: 0 0 8px 0 rgba(0, 0, 0, .12);
 transform: rotate(45deg);
 background-color: var(--color);
 pointer-events: all;
 `)])]),$s("top-start",`
 top: calc(-0.707 * var(--arrow-height));
 left: var(--arrow-offset);
 `),$s("top",`
 top: calc(-0.707 * var(--arrow-height));
 transform: translateX(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 left: 50%;
 `),$s("top-end",`
 top: calc(-0.707 * var(--arrow-height));
 right: var(--arrow-offset);
 `),$s("bottom-start",`
 bottom: calc(-0.707 * var(--arrow-height));
 left: var(--arrow-offset);
 `),$s("bottom",`
 bottom: calc(-0.707 * var(--arrow-height));
 transform: translateX(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 left: 50%;
 `),$s("bottom-end",`
 bottom: calc(-0.707 * var(--arrow-height));
 right: var(--arrow-offset);
 `),$s("left-start",`
 left: calc(-0.707 * var(--arrow-height));
 top: var(--arrow-offset-vertical);
 `),$s("left",`
 left: calc(-0.707 * var(--arrow-height));
 transform: translateY(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 top: 50%;
 `),$s("left-end",`
 left: calc(-0.707 * var(--arrow-height));
 bottom: var(--arrow-offset-vertical);
 `),$s("right-start",`
 right: calc(-0.707 * var(--arrow-height));
 top: var(--arrow-offset-vertical);
 `),$s("right",`
 right: calc(-0.707 * var(--arrow-height));
 transform: translateY(calc(-0.707 * var(--arrow-height))) rotate(45deg);
 top: 50%;
 `),$s("right-end",`
 right: calc(-0.707 * var(--arrow-height));
 bottom: var(--arrow-offset-vertical);
 `)]);function $s(r,t){const e=r.split("-")[0],n=["top","bottom"].includes(e)?"height: var(--space-arrow);":"width: var(--space-arrow);";return _e(`[v-placement="${r}"] >`,[de("popover",`
 margin-${rP[e]}: var(--space);
 `,[Ge("show-arrow",`
 margin-${rP[e]}: var(--space-arrow);
 `),Ge("overlap",`
 margin: 0;
 `),EGe("popover-arrow-wrapper",`
 right: 0;
 left: 0;
 top: 0;
 bottom: 0;
 ${e}: 100%;
 ${rP[e]}: auto;
 ${n}
 `,[de("popover-arrow",t)])])])}const jX=Object.assign(Object.assign({},rr.props),{to:Ao.propTo,show:Boolean,trigger:String,showArrow:Boolean,delay:Number,duration:Number,raw:Boolean,arrowStyle:[String,Object],displayDirective:String,x:Number,y:Number,flip:Boolean,overlap:Boolean,placement:String,width:[Number,String],animated:Boolean,onClickoutside:Function,minWidth:Number,maxWidth:Number}),YX=({arrowStyle:r,clsPrefix:t})=>I("div",{key:"__popover-arrow__",class:`${t}-popover-arrow-wrapper`},I("div",{class:`${t}-popover-arrow`,style:r}));var DVe=xt({name:"PopoverBody",inheritAttrs:!1,props:jX,setup(r,{slots:t,attrs:e}){const{namespaceRef:n,mergedClsPrefixRef:i}=mn(r),a=rr("Popover","Popover",PVe,g0,r,i),o=Oe(null),s=or("NPopover"),l=Oe(null),u=Oe(r.show),c=re(()=>{const{trigger:x,onClickoutside:w}=r,S=[],{positionManuallyRef:{value:C}}=s;return C||(x==="click"&&!w&&S.push([ih,m]),x==="hover"&&S.push([_Ue,g])),w&&S.push([ih,m]),r.displayDirective==="show"&&S.push([Px,r.show]),S}),f=re(()=>[{width:r.width==="trigger"?"":sa(r.width),maxWidth:sa(r.maxWidth),minWidth:sa(r.minWidth)},d.value]),d=re(()=>{const{common:{cubicBezierEaseInOut:x,cubicBezierEaseIn:w,cubicBezierEaseOut:S},self:{space:C,spaceArrow:_,padding:T,fontSize:E,textColor:M,dividerColor:k,color:P,boxShadow:F,borderRadius:$,arrowHeight:R,arrowOffset:L,arrowOffsetVertical:O}}=a.value;return{"--box-shadow":F,"--bezier":x,"--bezier-ease-in":w,"--bezier-ease-out":S,"--font-size":E,"--text-color":M,"--color":P,"--divider-color":k,"--border-radius":$,"--arrow-height":R,"--arrow-offset":L,"--arrow-offset-vertical":O,"--padding":T,"--space":C,"--space-arrow":_}});s.setBodyInstance({syncPosition:h}),es(()=>{s.setBodyInstance(null)}),fn(Kt(r,"show"),x=>{r.animated||(x?u.value=!0:u.value=!1)});function h(){var x;(x=o.value)===null||x===void 0||x.syncPosition()}function v(x){r.trigger==="hover"&&s.handleMouseEnter(x)}function p(x){r.trigger==="hover"&&s.handleMouseLeave(x)}function g(x){r.trigger==="hover"&&!y().contains(x.target)&&s.handleMouseMoveOutside(x)}function m(x){(r.trigger==="click"&&!y().contains(x.target)||r.onClickoutside)&&s.handleClickOutside(x)}function y(){return s.getTriggerElement()}rn(PI,l),rn(II,null),rn(kI,null);function b(){let x;const{internalRenderBodyRef:{value:w}}=s,{value:S}=i;if(w)x=w([`${S}-popover`,r.overlap&&`${S}-popover--overlap`],l,f.value,v,p);else{const{value:C}=s.extraClassRef;x=I("div",El({class:[`${S}-popover`,C.map(_=>`${S}-${_}`),{[`${S}-popover--overlap`]:r.overlap,[`${S}-popover--show-arrow`]:r.showArrow,[`${S}-popover--show-header`]:!!t.header,[`${S}-popover--raw`]:r.raw}],ref:l,style:f.value,onMouseenter:v,onMouseleave:p},e),[t.header?I(Wi,null,I("div",{class:`${S}-popover__header`},t.header()),I("div",{class:`${S}-popover__content`},t)):qr(t,"default"),r.showArrow?YX({arrowStyle:r.arrowStyle,clsPrefix:S}):null])}return r.displayDirective==="show"||r.show?pu(x,c.value):null}return{namespace:n,isMounted:s.isMountedRef,zIndex:s.zIndexRef,followerRef:o,adjustedTo:Ao(r),followerEnabled:u,renderContentNode:b}},render(){return I(v0,{zIndex:this.zIndex,show:this.show,enabled:this.followerEnabled,to:this.adjustedTo,x:this.x,y:this.y,flip:this.flip,placement:this.placement,containerClass:this.namespace,ref:"followerRef",overlap:this.overlap,width:this.width==="trigger"?"target":void 0,teleportDisabled:this.adjustedTo===Ao.tdkey},{default:()=>this.animated?I(Ra,{name:"popover-transition",appear:this.isMounted,onEnter:()=>{this.followerEnabled=!0},onAfterLeave:()=>{this.followerEnabled=!1}},{default:this.renderContentNode}):this.renderContentNode()})}});const RVe=Object.keys(jX),OVe={focus:["onFocus","onBlur"],click:["onClick"],hover:["onMouseenter","onMouseleave"],manual:[],nested:["onFocus","onBlur","onMouseenter","onMouseleave","onClick"]};function LVe(r,t,e){OVe[t].forEach(n=>{r.props?r.props=Object.assign({},r.props):r.props={};const i=r.props[n],a=e[n];i?r.props[n]=(...o)=>{i(...o),a(...o)}:r.props[n]=a})}const FVe=qg("").type,eC={show:{type:Boolean,default:void 0},defaultShow:Boolean,showArrow:{type:Boolean,default:!0},trigger:{type:String,default:"hover"},delay:{type:Number,default:100},duration:{type:Number,default:100},raw:Boolean,placement:{type:String,default:"top"},x:Number,y:Number,disabled:Boolean,getDisabled:Function,displayDirective:{type:String,default:"if"},arrowStyle:[String,Object],flip:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},width:{type:[Number,String],default:void 0},overlap:Boolean,internalExtraClass:{type:Array,default:()=>[]},onClickoutside:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],zIndex:Number,to:Ao.propTo,internalSyncTargetWithParent:Boolean,internalInheritedEventHandlers:{type:Array,default:()=>[]},onShow:[Function,Array],onHide:[Function,Array],arrow:{type:Boolean,default:void 0},minWidth:Number,maxWidth:Number},NVe=Object.assign(Object.assign(Object.assign({},rr.props),eC),{internalRenderBody:Function});var m0=xt({name:"Popover",inheritAttrs:!1,props:NVe,__popover__:!0,setup(r){const t=Kd(),e=Oe(null),n=re(()=>r.show),i=Oe(r.defaultShow),a=Qi(n,i),o=xi(()=>r.disabled?!1:a.value),s=()=>{if(r.disabled)return!0;const{getDisabled:P}=r;return!!(P==null?void 0:P())},l=()=>s()?!1:a.value,u=jS(r,["arrow","showArrow"]),c=re(()=>r.overlap?!1:u.value);let f=null;const d=Oe(null),h=Oe(null),v=xi(()=>r.x!==void 0&&r.y!==void 0);function p(P){const{"onUpdate:show":F,onUpdateShow:$,onShow:R,onHide:L}=r;i.value=P,F&&Tt(F,P),$&&Tt($,P),P&&R&&Tt(R,!0),P&&L&&Tt(L,!1)}function g(){f&&f.syncPosition()}function m(){const{value:P}=d;P&&(window.clearTimeout(P),d.value=null)}function y(){const{value:P}=h;P&&(window.clearTimeout(P),h.value=null)}function b(){const P=s();if(r.trigger==="focus"&&!P){if(l())return;p(!0)}}function x(){const P=s();if(r.trigger==="focus"&&!P){if(!l())return;p(!1)}}function w(){const P=s();if(r.trigger==="hover"&&!P){if(y(),d.value!==null||l())return;const F=()=>{p(!0),d.value=null},{delay:$}=r;$===0?F():d.value=window.setTimeout(F,$)}}function S(){const P=s();if(r.trigger==="hover"&&!P){if(m(),h.value!==null||!l())return;const F=()=>{p(!1),h.value=null},{duration:$}=r;$===0?F():h.value=window.setTimeout(F,$)}}function C(){S()}function _(P){var F;!l()||(r.trigger==="click"&&(m(),y(),p(!1)),(F=r.onClickoutside)===null||F===void 0||F.call(r,P))}function T(){if(r.trigger==="click"&&!s()){m(),y();const P=!l();p(P)}}function E(P){i.value=P}function M(){var P;return(P=e.value)===null||P===void 0?void 0:P.targetRef}function k(P){f=P}return rn("NPopover",{getTriggerElement:M,handleMouseEnter:w,handleMouseLeave:S,handleClickOutside:_,handleMouseMoveOutside:C,setBodyInstance:k,positionManuallyRef:v,isMountedRef:t,zIndexRef:Kt(r,"zIndex"),extraClassRef:Kt(r,"internalExtraClass"),internalRenderBodyRef:Kt(r,"internalRenderBody")}),{binderInstRef:e,positionManually:v,mergedShowConsideringDisabledProp:o,uncontrolledShow:i,mergedShowArrow:c,getMergedShow:l,setShow:E,handleClick:T,handleMouseEnter:w,handleMouseLeave:S,handleFocus:b,handleBlur:x,syncPosition:g}},render(){var r;const{positionManually:t,$slots:e}=this;let n,i=!1;if(!t&&(e.activator?n=MI(e,"activator"):n=MI(e,"trigger"),n)){n=fc(n),n=n.type===FVe?I("span",[n]):n;const a={onClick:this.handleClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onFocus:this.handleFocus,onBlur:this.handleBlur};if((r=n.type)===null||r===void 0?void 0:r.__popover__)i=!0,n.props||(n.props={internalSyncTargetWithParent:!0,internalInheritedEventHandlers:[]}),n.props.internalSyncTargetWithParent=!0,n.props.internalInheritedEventHandlers?n.props.internalInheritedEventHandlers=[a,...n.props.internalInheritedEventHandlers]:n.props.internalInheritedEventHandlers=[a];else{const{internalInheritedEventHandlers:o}=this,s=[a,...o],l={onBlur:u=>{s.forEach(c=>{c.onBlur(u)})},onFocus:u=>{s.forEach(c=>{c.onFocus(u)})},onClick:u=>{s.forEach(c=>{c.onClick(u)})},onMouseenter:u=>{s.forEach(c=>{c.onMouseenter(u)})},onMouseleave:u=>{s.forEach(c=>{c.onMouseleave(u)})}};LVe(n,o?"nested":t?"manual":this.trigger,l)}}return I(d0,{ref:"binderInstRef",syncTarget:!i,syncTargetWithParent:this.internalSyncTargetWithParent},{default:()=>{this.mergedShowConsideringDisabledProp;const a=this.getMergedShow();return[t?null:I(h0,null,{default:()=>n}),I(DVe,Hu(this.$props,RVe,Object.assign(Object.assign({},this.$attrs),{showArrow:this.mergedShowArrow,show:a})),e)]}})}}),BVe={closeSizeSmall:"14px",closeSizeMedium:"14px",closeSizeLarge:"14px",padding:"0 7px",closeMargin:"0 0 0 3px",closeMarginRtl:"0 3px 0 0"};const $Ve=r=>{const{textColor2:t,primaryColorHover:e,primaryColorPressed:n,primaryColor:i,infoColor:a,successColor:o,warningColor:s,errorColor:l,baseColor:u,borderColor:c,opacityDisabled:f,tagColor:d,closeColor:h,closeColorHover:v,closeColorPressed:p,borderRadiusSmall:g,fontSizeTiny:m,fontSizeSmall:y,fontSizeMedium:b,heightTiny:x,heightSmall:w,heightMedium:S}=r;return Object.assign(Object.assign({},BVe),{heightSmall:x,heightMedium:w,heightLarge:S,borderRadius:g,opacityDisabled:f,fontSizeSmall:m,fontSizeMedium:y,fontSizeLarge:b,textColorCheckable:t,textColorHoverCheckable:e,textColorPressedCheckable:n,textColorChecked:u,colorCheckable:"#0000",colorHoverCheckable:"#0000",colorPressedCheckable:"#0000",colorChecked:i,colorCheckedHover:e,colorCheckedPressed:n,border:`1px solid ${c}`,textColor:t,color:d,closeColor:h,closeColorHover:v,closeColorPressed:p,borderPrimary:`1px solid ${jr(i,{alpha:.3})}`,textColorPrimary:i,colorPrimary:jr(i,{alpha:.1}),closeColorPrimary:jr(i,{alpha:.75}),closeColorHoverPrimary:jr(i,{alpha:.6}),closeColorPressedPrimary:jr(i,{alpha:.9}),borderInfo:`1px solid ${jr(a,{alpha:.3})}`,textColorInfo:a,colorInfo:jr(a,{alpha:.1}),closeColorInfo:jr(a,{alpha:.75}),closeColorHoverInfo:jr(a,{alpha:.6}),closeColorPressedInfo:jr(a,{alpha:.9}),borderSuccess:`1px solid ${jr(o,{alpha:.3})}`,textColorSuccess:o,colorSuccess:jr(o,{alpha:.1}),closeColorSuccess:jr(o,{alpha:.75}),closeColorHoverSuccess:jr(o,{alpha:.6}),closeColorPressedSuccess:jr(o,{alpha:.9}),borderWarning:`1px solid ${jr(s,{alpha:.35})}`,textColorWarning:s,colorWarning:jr(s,{alpha:.12}),closeColorWarning:jr(s,{alpha:.75}),closeColorHoverWarning:jr(s,{alpha:.6}),closeColorPressedWarning:jr(s,{alpha:.9}),borderError:`1px solid ${jr(l,{alpha:.23})}`,textColorError:l,colorError:jr(l,{alpha:.08}),closeColorError:jr(l,{alpha:.65}),closeColorHoverError:jr(l,{alpha:.5}),closeColorPressedError:jr(l,{alpha:.8})})},zVe={name:"Tag",common:Wn,self:$Ve};var GVe=zVe,UVe={color:Object,type:{type:String,default:"default"},round:Boolean,size:{type:String,default:"medium"},closable:Boolean,disabled:{type:Boolean,default:void 0}},VVe=de("tag",`
 white-space: nowrap;
 position: relative;
 box-sizing: border-box;
 cursor: default;
 display: inline-flex;
 align-items: center;
 flex-wrap: nowrap;
 padding: var(--padding);
 border-radius: var(--border-radius);
 color: var(--text-color);
 background-color: var(--color);
 transition: 
 border-color .3s var(--bezier),
 background-color .3s var(--bezier),
 color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 opacity .3s var(--bezier);
 line-height: 1;
 height: var(--height);
 font-size: var(--font-size);
`,[Se("border",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 border: var(--border);
 transition: border-color .3s var(--bezier);
 `),Se("avatar",`
 display: flex;
 margin-right: 6px;
 `),Se("close",`
 font-size: var(--close-size);
 margin: var(--close-margin);
 transition: color .3s var(--bezier);
 cursor: pointer;
 `),Ge("round",`
 padding: 0 calc(var(--height) / 2);
 border-radius: calc(var(--height) / 2);
 `,[Se("avatar",`
 margin-left: calc((var(--height) - 8px) / -2);
 `)]),Ge("disabled",`
 cursor: not-allowed !important;
 opacity: var(--opacity-disabled);
 `),Ge("checkable",`
 cursor: pointer;
 box-shadow: none;
 color: var(--text-color-checkable);
 background-color: var(--color-checkable);
 `,[Mn("disabled",[_e("&:hover",{backgroundColor:"var(--color-hover-checkable)"},[Mn("checked",{color:"var(--text-color-hover-checkable)"})]),_e("&:active",{backgroundColor:"var(--color-pressed-checkable)"},[Mn("checked",{color:"var(--text-color-pressed-checkable)"})])]),Ge("checked",{color:"var(--text-color-checked)",backgroundColor:"var(--color-checked)"},[Mn("disabled",[_e("&:hover",{backgroundColor:"var(--color-checked-hover)"}),_e("&:active",{backgroundColor:"var(--color-checked-pressed)"})])])])]);function nP(r,t,e){if(!t)return;const n=Tp(),i=re(()=>{const{value:o}=t;if(!o)return;const s=o[r];if(!!s)return s}),a=()=>{Ks(()=>{const{value:o}=e,s=`${o}${r}Rtl`;if(xGe(s,n))return;const{value:l}=i;!l||l.style.mount({id:s,head:!0,props:{bPrefix:o?`.${o}-`:void 0},ssr:n})})};return n?a():cc(a),i}const HVe=Object.assign(Object.assign(Object.assign({},rr.props),UVe),{bordered:{type:Boolean,default:void 0},checked:Boolean,checkable:Boolean,onClose:[Array,Function],onMouseenter:Function,onMouseleave:Function,"onUpdate:checked":Function,onUpdateChecked:Function,internalStopClickPropagation:Boolean,onCheckedChange:{type:Function,validator:()=>!0,default:void 0}}),WVe=Symbol("tag");var iP=xt({name:"Tag",props:HVe,setup(r){const t=Oe(null),{mergedBorderedRef:e,mergedClsPrefixRef:n,NConfigProvider:i}=mn(r),a=rr("Tag","Tag",VVe,GVe,r,n);rn(WVe,{roundRef:Kt(r,"round")});function o(c){if(!r.disabled&&r.checkable){const{checked:f,onCheckedChange:d,onUpdateChecked:h,"onUpdate:checked":v}=r;h&&h(!f),v&&v(!f),d&&d(!f)}}function s(c){if(r.internalStopClickPropagation&&c.stopPropagation(),!r.disabled){const{onClose:f}=r;f&&Tt(f,c)}}const l={setTextContent(c){const{value:f}=t;f&&(f.textContent=c)}},u=nP("Tag",i==null?void 0:i.mergedRtlRef,n);return Object.assign(Object.assign({},l),{rtlEnabled:u,mergedClsPrefix:n,contentRef:t,mergedBordered:e,handleClick:o,handleCloseClick:s,cssVars:re(()=>{const{type:c,size:f,color:{color:d,textColor:h}={}}=r,{common:{cubicBezierEaseInOut:v},self:{padding:p,closeMargin:g,closeMarginRtl:m,borderRadius:y,opacityDisabled:b,textColorCheckable:x,textColorHoverCheckable:w,textColorPressedCheckable:S,textColorChecked:C,colorCheckable:_,colorHoverCheckable:T,colorPressedCheckable:E,colorChecked:M,colorCheckedHover:k,colorCheckedPressed:P,[Ot("closeSize",f)]:F,[Ot("fontSize",f)]:$,[Ot("height",f)]:R,[Ot("color",c)]:L,[Ot("textColor",c)]:O,[Ot("border",c)]:B,[Ot("closeColor",c)]:U,[Ot("closeColorHover",c)]:W,[Ot("closeColorPressed",c)]:X}}=a.value;return{"--avatar-size-override":`calc(${R} - 8px)`,"--bezier":v,"--border-radius":y,"--border":B,"--close-color":U,"--close-color-hover":W,"--close-color-pressed":X,"--close-margin":g,"--close-margin-rtl":m,"--close-size":F,"--color":d||L,"--color-checkable":_,"--color-checked":M,"--color-checked-hover":k,"--color-checked-pressed":P,"--color-hover-checkable":T,"--color-pressed-checkable":E,"--font-size":$,"--height":R,"--opacity-disabled":b,"--padding":p,"--text-color":h||O,"--text-color-checkable":x,"--text-color-checked":C,"--text-color-hover-checkable":w,"--text-color-pressed-checkable":S}})})},render(){const{mergedClsPrefix:r,rtlEnabled:t,color:{borderColor:e}={},$slots:n}=this;return I("div",{class:[`${r}-tag`,{[`${r}-tag--rtl`]:t,[`${r}-tag--disabled`]:this.disabled,[`${r}-tag--checkable`]:this.checkable,[`${r}-tag--checked`]:this.checkable&&this.checked,[`${r}-tag--round`]:this.round}],style:this.cssVars,onClick:this.handleClick,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},n.avatar&&I("div",{class:`${r}-tag__avatar`},{default:n.avatar}),I("span",{class:`${r}-tag__content`,ref:"contentRef"},this.$slots),!this.checkable&&this.closable?I(zI,{clsPrefix:r,class:`${r}-tag__close`,disabled:this.disabled,onClick:this.handleCloseClick}):null,!this.checkable&&this.mergedBordered?I("div",{class:`${r}-tag__border`,style:{borderColor:e}}):null)}}),jVe=de("base-clear",`
 flex-shrink: 0;
 height: 1em;
 width: 1em;
 position: relative;
`,[_e(">",[Se("clear",`
 font-size: var(--clear-size);
 cursor: pointer;
 color: var(--clear-color);
 transition: color .3s var(--bezier);
 `,[_e("&:hover",`
 color: var(--clear-color-hover)!important;
 `),_e("&:active",`
 color: var(--clear-color-pressed)!important;
 `)]),Se("placeholder",`
 display: flex;
 `),Se("clear, placeholder",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[f0({originalTransform:"translateX(-50%) translateY(-50%)",left:"50%",top:"50%"})])])]),aP=xt({name:"BaseClear",props:{clsPrefix:{type:String,required:!0},show:Boolean,onClear:Function},setup(r){kp("BaseClear",jVe,Kt(r,"clsPrefix"));const{NConfigProvider:t}=mn();return{NConfigProvider:t,handleMouseDown(e){e.preventDefault()}}},render(){const{clsPrefix:r}=this;return I("div",{class:`${r}-base-clear`},I(YS,null,{default:()=>this.show?I(si,{clsPrefix:r,key:"dismiss",class:`${r}-base-clear__clear`,onClick:this.onClear,onMousedown:this.handleMouseDown,"data-clear":!0},{default:()=>I(V8e,null)}):I("div",{key:"icon",class:`${r}-base-clear__placeholder`},this.$slots)}))}}),XX=xt({name:"InternalSelectionSuffix",props:{clsPrefix:{type:String,required:!0},showArrow:{type:Boolean,default:void 0},showClear:{type:Boolean,default:void 0},loading:{type:Boolean,default:!1},onClear:Function},setup(r){return()=>{const{clsPrefix:t}=r;return I(Ip,{clsPrefix:t,class:`${t}-base-suffix`,strokeWidth:24,scale:.85,show:r.loading},{default:()=>r.showArrow?I(aP,{clsPrefix:t,show:r.showClear,onClear:r.onClear},{default:()=>I(si,{clsPrefix:t,class:`${t}-base-suffix__arrow`},{default:()=>I(vX,null)})}):null})}}}),YVe={paddingSingle:"0 26px 0 14px",clearSize:"16px",arrowSize:"16px"};const XVe=r=>{const{borderRadius:t,textColor2:e,textColorDisabled:n,inputColor:i,inputColorDisabled:a,primaryColor:o,primaryColorHover:s,warningColor:l,warningColorHover:u,errorColor:c,errorColorHover:f,borderColor:d,iconColor:h,iconColorDisabled:v,clearColor:p,clearColorHover:g,clearColorPressed:m,placeholderColor:y,placeholderColorDisabled:b,fontSizeTiny:x,fontSizeSmall:w,fontSizeMedium:S,fontSizeLarge:C,heightTiny:_,heightSmall:T,heightMedium:E,heightLarge:M}=r;return Object.assign(Object.assign({},YVe),{fontSizeTiny:x,fontSizeSmall:w,fontSizeMedium:S,fontSizeLarge:C,heightTiny:_,heightSmall:T,heightMedium:E,heightLarge:M,borderRadius:t,textColor:e,textColorDisabled:n,placeholderColor:y,placeholderColorDisabled:b,color:i,colorDisabled:a,colorActive:i,border:`1px solid ${d}`,borderHover:`1px solid ${s}`,borderActive:`1px solid ${o}`,borderFocus:`1px solid ${s}`,boxShadowHover:null,boxShadowActive:`0 0 0 2px ${jr(o,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${jr(o,{alpha:.2})}`,caretColor:o,arrowColor:h,arrowColorDisabled:v,loadingColor:o,borderWarning:`1px solid ${l}`,borderHoverWarning:`1px solid ${u}`,borderActiveWarning:`1px solid ${l}`,borderFocusWarning:`1px solid ${u}`,boxShadowHoverWarning:null,boxShadowActiveWarning:`0 0 0 2px ${jr(l,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${jr(l,{alpha:.2})}`,colorActiveWarning:i,caretColorWarning:l,borderError:`1px solid ${c}`,borderHoverError:`1px solid ${f}`,borderActiveError:`1px solid ${c}`,borderFocusError:`1px solid ${f}`,boxShadowHoverError:null,boxShadowActiveError:`0 0 0 2px ${jr(c,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${jr(c,{alpha:.2})}`,colorActiveError:i,caretColorError:c,clearColor:p,clearColorHover:g,clearColorPressed:m})},qVe=Go({name:"InternalSelection",common:Wn,peers:{Popover:g0},self:XVe});var qX=qVe,KVe=_e([de("base-selection",`
 position: relative;
 z-index: auto;
 box-shadow: none;
 width: 100%;
 max-width: 100%;
 display: inline-block;
 vertical-align: bottom;
 border-radius: var(--border-radius);
 min-height: var(--height);
 line-height: 1.5;
 font-size: var(--font-size);
 `,[de("base-loading",`
 color: var(--loading-color);
 `),de("base-selection-tags",{minHeight:"var(--height)"}),Se("border, state-border",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border: var(--border);
 border-radius: inherit;
 transition:
 box-shadow .3s var(--bezier),
 border-color .3s var(--bezier);
 `),Se("state-border",`
 z-index: 1;
 border-color: #0000;
 `),de("base-suffix",`
 cursor: pointer;
 position: absolute;
 top: 50%;
 transform: translateY(-50%);
 right: 10px;
 `,[Se("arrow",`
 font-size: var(--arrow-size);
 color: var(--arrow-color);
 transition: color .3s var(--bezier);
 `)]),de("base-selection-overlay",`
 display: flex;
 align-items: center;
 white-space: nowrap;
 overflow: hidden;
 pointer-events: none;
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 padding: var(--padding-single);
 transition: color .3s var(--bezier);
 `),de("base-selection-placeholder",`
 color: var(--placeholder-color);
 `),de("base-selection-tags",`
 cursor: pointer;
 outline: none;
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 display: flex;
 padding: 3px 26px 0 14px;
 flex-wrap: wrap;
 align-items: center;
 width: 100%;
 vertical-align: bottom;
 background-color: var(--color);
 border-radius: inherit;
 transition:
 color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier);
 `),de("base-selection-label",`
 height: var(--height);
 display: inline-flex;
 width: 100%;
 vertical-align: bottom;
 cursor: pointer;
 outline: none;
 z-index: auto;
 box-sizing: border-box;
 position: relative;
 transition:
 color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier);
 border-radius: inherit;
 background-color: var(--color);
 align-items: center;
 `,[de("base-selection-input",`
 line-height: inherit;
 outline: none;
 cursor: pointer;
 box-sizing: border-box;
 border:none;
 width: 100%;
 padding: var(--padding-single);
 background-color: #0000;
 color: var(--text-color);
 transition: color .3s var(--bezier);
 caret-color: var(--caret-color);
 `,[Se("content",`
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap; 
 `)]),Se("render-label",`
 color: var(--text-color);
 `)]),Mn("disabled",[_e("&:hover",[Se("state-border",`
 box-shadow: var(--box-shadow-hover);
 border: var(--border-hover);
 `)]),Ge("focus",[Se("state-border",`
 box-shadow: var(--box-shadow-focus);
 border: var(--border-focus);
 `)]),Ge("active",[Se("state-border",`
 box-shadow: var(--box-shadow-active);
 border: var(--border-active);
 `),de("base-selection-label",{backgroundColor:"var(--color-active)"}),de("base-selection-tags",{backgroundColor:"var(--color-active)"})])]),Ge("disabled",{cursor:"not-allowed"},[Se("arrow",`
 color: var(--arrow-color-disabled);
 `),de("base-selection-label",`
 cursor: not-allowed;
 background-color: var(--color-disabled);
 `,[de("base-selection-input",`
 cursor: not-allowed;
 color: var(--text-color-disabled);
 `),Se("render-label",`
 color: var(--text-color-disabled);
 `)]),de("base-selection-tags",`
 cursor: not-allowed;
 background-color: var(--color-disabled);
 `),de("base-selection-placeholder",`
 cursor: not-allowed;
 color: var(--placeholder-color-disabled);
 `)]),de("base-selection-input-tag",`
 height: calc(var(--height) - 6px);
 line-height: calc(var(--height) - 6px);
 outline: none;
 display: none;
 position: relative;
 margin-bottom: 3px;
 max-width: 100%;
 vertical-align: bottom;
 `,[Se("input",`
 min-width: 1px;
 padding: 0;
 background-color: #0000;
 outline: none;
 border: none;
 max-width: 100%;
 overflow: hidden;
 width: 1em;
 line-height: inherit;
 cursor: pointer;
 color: var(--text-color);
 caret-color: var(--caret-color);
 `),Se("mirror",`
 position: absolute;
 left: 0;
 top: 0;
 white-space: pre;
 visibility: hidden;
 user-select: none;
 opacity: 0;
 `)])]),de("base-selection-popover",`
 margin-bottom: -3px;
 display: flex;
 flex-wrap: wrap;
 `),de("base-selection-tag-wrapper",`
 max-width: 100%;
 display: inline-flex;
 padding: 0 7px 3px 0;
 `,[_e("&:last-child",{paddingRight:0}),de("tag",`
 font-size: 14px;
 max-width: 100%;
 `,[Se("content",`
 text-overflow: ellipsis;
 overflow: hidden;
 `)])]),["warning","error"].map(r=>XY(r,de("base-selection",[Se("state-border",{border:`var(--border-${r})`}),Mn("disabled",[_e("&:hover",[Se("state-border",`
 box-shadow: var(--box-shadow-hover-${r});
 border: var(--border-hover-${r});
 `)]),Ge("active",[Se("state-border",`
 box-shadow: var(--box-shadow-active-${r});
 border: var(--border-active-${r});
 `),de("base-selection-label",{backgroundColor:`var(--color-active-${r})`}),de("base-selection-tags",{backgroundColor:`var(--box-shadow-active-${r})`})]),Ge("focus",[Se("state-border",`
 box-shadow: var(--box-shadow-focus-${r});
 border: var(--border-focus-${r});
 `)])])])))]),ZVe=xt({name:"InternalSelection",props:Object.assign(Object.assign({},rr.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:null},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},inputProps:Object,focused:Boolean,renderTag:Function,onKeyup:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],onClear:Function,onPatternInput:Function,renderLabel:Function}),setup(r){const t=Oe(null),e=Oe(null),n=Oe(null),i=Oe(null),a=Oe(null),o=Oe(null),s=Oe(null),l=Oe(null),u=Oe(null),c=Oe(null),f=Oe(!1),d=Oe(!1),h=Oe(!1),v=rr("InternalSelection","InternalSelection",KVe,qX,r,Kt(r,"clsPrefix")),p=re(()=>r.clearable&&!r.disabled&&(h.value||r.active)),g=re(()=>r.selectedOption?r.renderTag?r.renderTag({option:r.selectedOption,handleClose:()=>{}}):r.renderLabel?r.renderLabel(r.selectedOption,!0):Ni(r.selectedOption.label,r.selectedOption,!0):r.placeholder),m=re(()=>{const te=r.selectedOption;if(!!te)return te.label}),y=re(()=>r.multiple?!!(Array.isArray(r.selectedOptions)&&r.selectedOptions.length):r.selectedOption!==null);function b(){var te;const{value:ge}=t;if(ge){const{value:Qe}=e;Qe&&(Qe.style.width=`${ge.offsetWidth}px`,r.maxTagCount!=="responsive"&&((te=u.value)===null||te===void 0||te.sync()))}}function x(){const{value:te}=c;te&&(te.style.display="none")}function w(){const{value:te}=c;te&&(te.style.display="inline-block")}fn(Kt(r,"active"),te=>{te||x()}),fn(Kt(r,"pattern"),()=>{r.multiple&&Ha(b)});function S(te){const{onFocus:ge}=r;ge&&ge(te)}function C(te){const{onBlur:ge}=r;ge&&ge(te)}function _(te){const{onDeleteOption:ge}=r;ge&&ge(te)}function T(te){const{onClear:ge}=r;ge&&ge(te)}function E(te){const{onPatternInput:ge}=r;ge&&ge(te)}function M(te){var ge;(!te.relatedTarget||!((ge=n.value)===null||ge===void 0?void 0:ge.contains(te.relatedTarget)))&&S(te)}function k(te){var ge;((ge=n.value)===null||ge===void 0?void 0:ge.contains(te.relatedTarget))||C(te)}function P(te){T(te)}function F(){h.value=!0}function $(){h.value=!1}function R(te){!r.active||!r.filterable||te.target!==e.value&&te.preventDefault()}function L(te){_(te)}function O(te){if(te.code==="Backspace"&&!r.pattern.length){const{selectedOptions:ge}=r;(ge==null?void 0:ge.length)&&L(ge[ge.length-1])}}const B=Oe(!1);let U=null;function W(te){const{value:ge}=t;if(ge){const Qe=te.target.value;ge.textContent=Qe,b()}B.value?U=te:E(te)}function X(){B.value=!0}function ae(){B.value=!1,E(U),U=null}function Z(){d.value=!0}function Y(te){d.value=!1}function fe(){if(r.filterable){d.value=!1;const{value:te}=o;te&&te.focus()}else if(r.multiple){const{value:te}=i;te==null||te.focus()}else{const{value:te}=a;te==null||te.focus()}}function le(){const{value:te}=e;te&&(w(),te.focus())}function ue(){const{value:te}=e;te&&te.blur()}function Ee(te){const{value:ge}=s;ge&&ge.setTextContent(`+${te}`)}function De(){const{value:te}=l;return te}function je(){return e.value}let ke=null;function D(){ke!==null&&window.clearTimeout(ke)}function z(){r.disabled||r.active||(D(),ke=window.setTimeout(()=>{f.value=!0},100))}function H(){D()}function he(te){te||(D(),f.value=!1)}return Ss(()=>{Ks(()=>{const te=o.value;!te||(te.tabIndex=r.disabled||d.value?-1:0)})}),{mergedTheme:v,mergedClearable:p,patternInputFocused:d,filterablePlaceholder:g,label:m,selected:y,showTagsPanel:f,isCompositing:B,counterRef:s,counterWrapperRef:l,patternInputMirrorRef:t,patternInputRef:e,selfRef:n,multipleElRef:i,singleElRef:a,patternInputWrapperRef:o,overflowRef:u,inputTagElRef:c,handleMouseDown:R,handleFocusin:M,handleClear:P,handleMouseEnter:F,handleMouseLeave:$,handleDeleteOption:L,handlePatternKeyDown:O,handlePatternInputInput:W,handlePatternInputBlur:Y,handlePatternInputFocus:Z,handleMouseEnterCounter:z,handleMouseLeaveCounter:H,handleFocusout:k,handleCompositionEnd:ae,handleCompositionStart:X,onPopoverUpdateShow:he,focus:fe,focusInput:le,blurInput:ue,updateCounter:Ee,getCounter:De,getTail:je,renderLabel:r.renderLabel,cssVars:re(()=>{const{size:te}=r,{common:{cubicBezierEaseInOut:ge},self:{borderRadius:Qe,color:Ve,placeholderColor:Ie,textColor:Be,paddingSingle:V,caretColor:j,colorDisabled:q,textColorDisabled:ee,placeholderColorDisabled:Q,colorActive:me,boxShadowFocus:He,boxShadowActive:ze,boxShadowHover:it,border:we,borderFocus:nt,borderHover:st,borderActive:jt,arrowColor:Jt,arrowColorDisabled:Ae,loadingColor:ut,colorActiveWarning:ur,boxShadowFocusWarning:Le,boxShadowActiveWarning:dt,boxShadowHoverWarning:Bt,borderWarning:cr,borderFocusWarning:$r,borderHoverWarning:nr,borderActiveWarning:tn,colorActiveError:Er,boxShadowFocusError:zr,boxShadowActiveError:Qr,boxShadowHoverError:_n,borderError:jn,borderFocusError:ii,borderHoverError:bn,borderActiveError:ai,clearColor:Zn,clearColorHover:Br,clearColorPressed:on,clearSize:mr,arrowSize:ln,[Ot("height",te)]:fi,[Ot("fontSize",te)]:po}}=v.value;return{"--bezier":ge,"--border":we,"--border-active":jt,"--border-focus":nt,"--border-hover":st,"--border-radius":Qe,"--box-shadow-active":ze,"--box-shadow-focus":He,"--box-shadow-hover":it,"--caret-color":j,"--color":Ve,"--color-active":me,"--color-disabled":q,"--font-size":po,"--height":fi,"--padding-single":V,"--placeholder-color":Ie,"--placeholder-color-disabled":Q,"--text-color":Be,"--text-color-disabled":ee,"--arrow-color":Jt,"--arrow-color-disabled":Ae,"--loading-color":ut,"--color-active-warning":ur,"--box-shadow-focus-warning":Le,"--box-shadow-active-warning":dt,"--box-shadow-hover-warning":Bt,"--border-warning":cr,"--border-focus-warning":$r,"--border-hover-warning":nr,"--border-active-warning":tn,"--color-active-error":Er,"--box-shadow-focus-error":zr,"--box-shadow-active-error":Qr,"--box-shadow-hover-error":_n,"--border-error":jn,"--border-focus-error":ii,"--border-hover-error":bn,"--border-active-error":ai,"--clear-size":mr,"--clear-color":Zn,"--clear-color-hover":Br,"--clear-color-pressed":on,"--arrow-size":ln}})}},render(){const{multiple:r,size:t,disabled:e,filterable:n,maxTagCount:i,bordered:a,clsPrefix:o,renderTag:s,renderLabel:l}=this,u=i==="responsive",c=typeof i=="number",f=u||c,d=I(XX,{clsPrefix:o,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear});let h;if(r){const v=C=>I("div",{class:`${o}-base-selection-tag-wrapper`,key:C.value},s?s({option:C,handleClose:()=>this.handleDeleteOption(C)}):I(iP,{size:t,closable:!C.disabled,disabled:e,internalStopClickPropagation:!0,onClose:()=>this.handleDeleteOption(C)},{default:()=>l?l(C,!0):Ni(C.label,C,!0)})),p=(c?this.selectedOptions.slice(0,i):this.selectedOptions).map(v),g=n?I("div",{class:`${o}-base-selection-input-tag`,ref:"inputTagElRef",key:"__input-tag__"},I("input",Object.assign({},this.inputProps,{ref:"patternInputRef",tabindex:-1,disabled:e,value:this.pattern,autofocus:this.autofocus,class:`${o}-base-selection-input-tag__input`,onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),I("span",{ref:"patternInputMirrorRef",class:`${o}-base-selection-input-tag__mirror`},this.pattern?this.pattern:"")):null,m=u?()=>I("div",{class:`${o}-base-selection-tag-wrapper`,ref:"counterWrapperRef"},I(iP,{ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:e})):void 0;let y;if(c){const C=this.selectedOptions.length-i;C>0&&(y=I("div",{class:`${o}-base-selection-tag-wrapper`,key:"__counter__"},I(iP,{ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:e},{default:()=>`+${C}`})))}const b=u?n?I(FX,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:()=>p,counter:m,tail:()=>g}):I(FX,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:()=>p,counter:m}):c?p.concat(y):p,x=f?()=>I("div",{class:`${o}-base-selection-popover`},u?p:this.selectedOptions.map(v)):void 0,w=f?{show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover}:null,S=!this.selected&&!this.pattern&&!this.isCompositing?I("div",{class:`${o}-base-selection-placeholder ${o}-base-selection-overlay`},this.placeholder):null;if(n){const C=I("div",{ref:"patternInputWrapperRef",class:`${o}-base-selection-tags`},b,u?null:g,d);h=I(Wi,null,f?I(m0,Object.assign({},w),{trigger:()=>C,default:x}):C,S)}else{const C=I("div",{ref:"multipleElRef",class:`${o}-base-selection-tags`,tabindex:e?void 0:0},b,d);h=I(Wi,null,f?I(m0,Object.assign({},w),{trigger:()=>C,default:x}):C,S)}}else if(n){const v=!this.pattern&&(this.active||!this.selected)&&!this.isCompositing;h=I("div",{ref:"patternInputWrapperRef",class:`${o}-base-selection-label`},I("input",Object.assign({},this.inputProps,{ref:"patternInputRef",class:`${o}-base-selection-input`,value:this.patternInputFocused&&this.active?this.pattern:"",placeholder:"",readonly:e,disabled:e,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),v||this.patternInputFocused&&this.active?null:I("div",{class:`${o}-base-selection-label__render-label ${o}-base-selection-overlay`,key:"input"},s?s({option:this.selectedOption,handleClose:()=>{}}):l?l(this.selectedOption,!0):Ni(this.label,this.selectedOption,!0)),v?I("div",{class:`${o}-base-selection-placeholder ${o}-base-selection-overlay`,key:"placeholder"},this.filterablePlaceholder):null,d)}else h=I("div",{ref:"singleElRef",class:`${o}-base-selection-label`,tabindex:this.disabled?void 0:0},this.label!==void 0?I("div",{class:`${o}-base-selection-input`,title:zGe(this.label),key:"input"},I("div",{class:`${o}-base-selection-input__content`},s?s({option:this.selectedOption,handleClose:()=>{}}):l?l(this.selectedOption,!0):Ni(this.label,this.selectedOption,!0))):I("div",{class:`${o}-base-selection-placeholder ${o}-base-selection-overlay`,key:"placeholder"},this.placeholder),d);return I("div",{ref:"selfRef",class:[`${o}-base-selection`,{[`${o}-base-selection--active`]:this.active,[`${o}-base-selection--selected`]:this.selected||this.active&&this.pattern,[`${o}-base-selection--disabled`]:this.disabled,[`${o}-base-selection--multiple`]:this.multiple,[`${o}-base-selection--focus`]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeyup:this.onKeyup,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},h,a?I("div",{class:`${o}-base-selection__border`}):null,a?I("div",{class:`${o}-base-selection__state-border`}):null)}});const{cubicBezierEaseInOut:af}=Jc;function QVe({duration:r=".2s",delay:t=".1s"}={}){return[_e("&.fade-in-width-expand-transition-leave-from, &.fade-in-width-expand-transition-enter-to",{opacity:1}),_e("&.fade-in-width-expand-transition-leave-to, &.fade-in-width-expand-transition-enter-from",`
 opacity: 0!important;
 margin-left: 0!important;
 margin-right: 0!important;
 `),_e("&.fade-in-width-expand-transition-leave-active",`
 overflow: hidden;
 transition:
 opacity ${r} ${af},
 max-width ${r} ${af} ${t},
 margin-left ${r} ${af} ${t},
 margin-right ${r} ${af} ${t};
 `),_e("&.fade-in-width-expand-transition-enter-active",`
 overflow: hidden;
 transition:
 opacity ${r} ${af} ${t},
 max-width ${r} ${af},
 margin-left ${r} ${af},
 margin-right ${r} ${af};
 `)]}const{cubicBezierEaseInOut:Kl,cubicBezierEaseOut:JVe,cubicBezierEaseIn:eHe}=Jc;function tHe({overflow:r="hidden",duration:t=".3s",originalTransition:e="",leavingDelay:n="0s",foldPadding:i=!1,enterToProps:a=void 0,leaveToProps:o=void 0,reverse:s=!1}={}){const l=s?"leave":"enter",u=s?"enter":"leave";return[_e(`&.fade-in-height-expand-transition-${u}-from,
 &.fade-in-height-expand-transition-${l}-to`,Object.assign(Object.assign({},a),{opacity:1})),_e(`&.fade-in-height-expand-transition-${u}-to,
 &.fade-in-height-expand-transition-${l}-from`,Object.assign(Object.assign({},o),{opacity:0,marginTop:"0 !important",marginBottom:"0 !important",paddingTop:i?"0 !important":void 0,paddingBottom:i?"0 !important":void 0})),_e(`&.fade-in-height-expand-transition-${u}-active`,`
 overflow: ${r};
 transition:
 max-height ${t} ${Kl} ${n},
 opacity ${t} ${JVe} ${n},
 margin-top ${t} ${Kl} ${n},
 margin-bottom ${t} ${Kl} ${n},
 padding-top ${t} ${Kl} ${n},
 padding-bottom ${t} ${Kl} ${n}
 ${e?","+e:""}
 `),_e(`&.fade-in-height-expand-transition-${l}-active`,`
 overflow: ${r};
 transition:
 max-height ${t} ${Kl},
 opacity ${t} ${eHe},
 margin-top ${t} ${Kl},
 margin-bottom ${t} ${Kl},
 padding-top ${t} ${Kl},
 padding-bottom ${t} ${Kl}
 ${e?","+e:""}
 `)]}var rHe={paddingTiny:"0 8px",paddingSmall:"0 10px",paddingMedium:"0 12px",paddingLarge:"0 14px",clearSize:"16px"};const nHe=r=>{const{textColor2:t,textColor3:e,textColorDisabled:n,primaryColor:i,primaryColorHover:a,inputColor:o,inputColorDisabled:s,borderColor:l,warningColor:u,warningColorHover:c,errorColor:f,errorColorHover:d,borderRadius:h,lineHeight:v,fontSizeTiny:p,fontSizeSmall:g,fontSizeMedium:m,fontSizeLarge:y,heightTiny:b,heightSmall:x,heightMedium:w,heightLarge:S,actionColor:C,clearColor:_,clearColorHover:T,clearColorPressed:E,placeholderColor:M,placeholderColorDisabled:k,iconColor:P,iconColorDisabled:F,iconColorHover:$,iconColorPressed:R}=r;return Object.assign(Object.assign({},rHe),{countTextColor:e,heightTiny:b,heightSmall:x,heightMedium:w,heightLarge:S,fontSizeTiny:p,fontSizeSmall:g,fontSizeMedium:m,fontSizeLarge:y,lineHeight:v,lineHeightTextarea:v,borderRadius:h,iconSize:"16px",groupLabelColor:C,groupLabelTextColor:t,textColor:t,textColorDisabled:n,textDecorationColor:t,caretColor:i,placeholderColor:M,placeholderColorDisabled:k,color:o,colorDisabled:s,colorFocus:o,groupLabelBorder:`1px solid ${l}`,border:`1px solid ${l}`,borderHover:`1px solid ${a}`,borderDisabled:`1px solid ${l}`,borderFocus:`1px solid ${a}`,boxShadowFocus:`0 0 0 2px ${jr(i,{alpha:.2})}`,loadingColor:i,loadingColorWarning:u,borderWarning:`1px solid ${u}`,borderHoverWarning:`1px solid ${c}`,colorFocusWarning:o,borderFocusWarning:`1px solid ${c}`,boxShadowFocusWarning:`0 0 0 2px ${jr(u,{alpha:.2})}`,caretColorWarning:u,loadingColorError:f,borderError:`1px solid ${f}`,borderHoverError:`1px solid ${d}`,colorFocusError:o,borderFocusError:`1px solid ${d}`,boxShadowFocusError:`0 0 0 2px ${jr(f,{alpha:.2})}`,caretColorError:f,clearColor:_,clearColorHover:T,clearColorPressed:E,iconColor:P,iconColorDisabled:F,iconColorHover:$,iconColorPressed:R,suffixTextColor:t})},iHe={name:"Input",common:Wn,self:nHe};var tC=iHe;const KX=Symbol("input");function aHe(r){let t=0;for(const e of r)t++;return t}function rC(r){return["",void 0,null].includes(r)}var ZX=xt({name:"InputWordCount",setup(r,{slots:t}){const{mergedValueRef:e,maxlengthRef:n,mergedClsPrefixRef:i}=or(KX),a=re(()=>{const{value:o}=e;return o===null||Array.isArray(o)?0:aHe(o)});return()=>{const{value:o}=n,{value:s}=e;return I("span",{class:`${i.value}-input-word-count`},t.default?t.default({value:s===null||Array.isArray(s)?"":s}):o===void 0?a.value:`${a.value} / ${o}`)}}}),oHe=_e([de("input",`
 max-width: 100%;
 cursor: text;
 line-height: 1.5;
 z-index: auto;
 outline: none;
 box-sizing: border-box;
 position: relative;
 display: inline-flex;
 border-radius: var(--border-radius);
 background-color: var(--color);
 transition: background-color .3s var(--bezier);
 font-size: var(--font-size);
 --padding-vertical: calc((var(--height) - 1.5 * var(--font-size)) / 2);
 `,[Se("input, textarea",`
 overflow: hidden;
 flex-grow: 1;
 position: relative;
 `),Se("input-el, textarea-el, input-mirror, textarea-mirror, separator, placeholder",`
 box-sizing: border-box;
 font-size: inherit;
 line-height: 1.5;
 font-family: inherit;
 border: none;
 outline: none;
 background-color: #0000;
 text-align: inherit;
 transition:
 caret-color .3s var(--bezier),
 color .3s var(--bezier),
 text-decoration-color .3s var(--bezier);
 `),Se("input-el, textarea-el",`
 -webkit-appearance: none;
 width: 100%;
 min-width: 0;
 text-decoration-color: var(--text-decoration-color);
 color: var(--text-color);
 caret-color: var(--caret-color);
 background-color: transparent;
 `,[_e("&::placeholder",{color:"#0000"})]),Ge("round",[Mn("textarea",{borderRadius:"calc(var(--height) / 2)"})]),Se("placeholder",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 overflow: hidden;
 color: var(--placeholder-color);
 `,[_e("span",{width:"100%",display:"inline-block"})]),Mn("autosize",{width:"100%"}),Ge("autosize",[Se("textarea-el, input-el",`
 position: absolute;
 top: 0;
 left: 0;
 height: 100%;
 `)]),de("input-wrapper",`
 overflow: hidden;
 display: inline-flex;
 flex-grow: 1;
 position: relative;
 padding-left: var(--padding-left);
 padding-right: var(--padding-right);
 `),Se("input-mirror",`
 padding: 0;
 height: var(--height);
 overflow: hidden;
 visibility: hidden;
 position: static;
 white-space: nowrap;
 pointer-events: none;
 `),Se("input-el",`
 padding: 0;
 height: var(--height);
 line-height: var(--height);
 `,[_e("+",[Se("placeholder",`
 display: flex;
 align-items: center; 
 `)])]),Mn("textarea",[Se("placeholder",{whiteSpace:"nowrap"})]),Se("eye",`
 transition: color .3s var(--bezier);
 `),Ge("textarea",{width:"100%"},[de("input-word-count",`
 position: absolute;
 right: var(--padding-right);
 bottom: var(--padding-vertical);
 `),Ge("resizable",[de("input-wrapper",`
 resize: vertical;
 overflow: auto;
 min-height: var(--height);
 `)]),Se("textarea-el, textarea-mirror, placeholder",`
 width: 100%;
 height: 100%;
 padding-left: 0;
 padding-right: 0;
 padding-top: var(--padding-vertical);
 padding-bottom: var(--padding-vertical);
 display: inline-block;
 vertical-align: bottom;
 box-sizing: border-box;
 line-height: var(--line-height-textarea);
 margin: 0;
 resize: none;
 `),Se("textarea-mirror",`
 pointer-events: none;
 overflow: hidden;
 visibility: hidden;
 position: static;
 white-space: pre-wrap;
 overflow-wrap: break-word;
 `)]),Ge("pair",[Se("input-el, placeholder",{textAlign:"center"}),Se("separator",`
 display: flex;
 align-items: center;
 transition: color .3s var(--bezier);
 color: var(--text-color);
 `,[de("icon",`
 color: var(--icon-color);
 `),de("base-icon",`
 color: var(--icon-color);
 `)])]),Ge("disabled",{cursor:"not-allowed",backgroundColor:"var(--color-disabled)"},[Se("border",{border:"var(--border-disabled)"}),Se("input-el, textarea-el",{cursor:"not-allowed",color:"var(--text-color-disabled)",textDecorationColor:"var(--text-color-disabled)"}),Se("placeholder",{color:"var(--placeholder-color-disabled)"}),Se("separator",{color:"var(--text-color-disabled)"},[de("icon",`
 color: var(--icon-color-disabled);
 `),de("base-icon",`
 color: var(--icon-color-disabled);
 `)]),Se("suffix, prefix",{color:"var(--text-color-disabled)"},[de("icon",`
 color: var(--icon-color-disabled);
 `),de("internal-icon",`
 color: var(--icon-color-disabled);
 `)])]),Mn("disabled",[Se("eye",`
 color: var(--icon-color);
 cursor: pointer;
 `,[_e("&:hover",`
 color: var(--icon-color-hover);
 `),_e("&:active",`
 color: var(--icon-color-pressed);
 `)]),Ge("focus",{backgroundColor:"var(--color-focus)"},[Se("state-border",{border:"var(--border-focus)",boxShadow:"var(--box-shadow-focus)"})]),_e("&:hover",[Se("state-border",{border:"var(--border-hover)"})])]),Se("border, state-border",`
 box-sizing: border-box;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border-radius: inherit;
 border: var(--border);
 transition:
 box-shadow .3s var(--bezier),
 border-color .3s var(--bezier);
 `),Se("state-border",`
 border-color: #0000;
 z-index: 1;
 `),Se("prefix",{marginRight:"4px"}),Se("suffix",`
 margin-left: 4px;
 `),Se("suffix, prefix",`
 transition: color .3s var(--bezier);
 flex-wrap: nowrap;
 flex-shrink: 0;
 line-height: var(--height);
 white-space: nowrap;
 display: inline-flex;
 align-items: center;
 justify-content: center;
 color: var(--suffix-text-color);
 `,[de("base-loading",`
 font-size: var(--icon-size);
 margin-left: 4px;
 color: var(--loading-color);
 `),de("base-clear",`
 font-size: var(--icon-size);
 margin-left: 4px;
 `,[Se("placeholder",[de("base-icon",`
 transition: color .3s var(--bezier);
 color: var(--icon-color);
 font-size: var(--icon-size);
 `)])]),de("icon",`
 transition: color .3s var(--bezier);
 color: var(--icon-color);
 font-size: var(--icon-size);
 `),de("base-icon",`
 font-size: var(--icon-size);
 `)]),de("input-word-count",`
 pointer-events: none;
 line-height: 1.5;
 font-size: .85em;
 color: var(--count-text-color);
 transition: color .3s var(--bezier);
 margin-left: 4px;
 font-variant: tabular-nums;
 `)]),["warning","error"].map(r=>XY(r,de("input",[Mn("disabled",[de("base-loading",`
 color: var(--loading-color-${r})
 `),Se("input-el, textarea-el",{caretColor:`var(--caret-color-${r})`}),Se("state-border",{border:`var(--border-${r})`}),_e("&:hover",[Se("state-border",`
 border: var(--border-hover-${r});
 `)]),_e("&:focus",{backgroundColor:`var(--color-focus-${r})`},[Se("state-border",`
 box-shadow: var(--box-shadow-focus-${r});
 border: var(--border-focus-${r});
 `)]),Ge("focus",{backgroundColor:`var(--color-focus-${r})`},[Se("state-border",`
 box-shadow: var(--box-shadow-focus-${r});
 border: var(--border-focus-${r});
 `)])])])))]);const sHe=Object.assign(Object.assign({},rr.props),{bordered:{type:Boolean,default:void 0},type:{type:String,default:"text"},placeholder:[Array,String],defaultValue:{type:[String,Array],default:null},value:[String,Array],disabled:{type:Boolean,default:void 0},size:String,rows:{type:[Number,String],default:3},round:Boolean,minlength:[String,Number],maxlength:[String,Number],clearable:Boolean,autosize:{type:[Boolean,Object],default:!1},pair:Boolean,separator:String,readonly:{type:[String,Boolean],default:!1},passivelyActivated:Boolean,showPasswordOn:String,stateful:{type:Boolean,default:!0},autofocus:Boolean,inputProps:Object,resizable:{type:Boolean,default:!0},showCount:Boolean,loading:{type:Boolean,default:void 0},onMousedown:Function,onKeydown:Function,onKeyup:Function,onInput:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClick:[Function,Array],onChange:[Function,Array],onClear:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],textDecoration:[String,Array],attrSize:{type:Number,default:20},onInputBlur:[Function,Array],onInputFocus:[Function,Array],onDeactivate:[Function,Array],onActivate:[Function,Array],onWrapperFocus:[Function,Array],onWrapperBlur:[Function,Array],internalDeactivateOnEnter:Boolean,internalForceFocus:Boolean,showPasswordToggle:Boolean});var sh=xt({name:"Input",props:sHe,setup(r){const{mergedClsPrefixRef:t,mergedBorderedRef:e}=mn(r),n=rr("Input","Input",oHe,tC,r,t),i=Oe(null),a=Oe(null),o=Oe(null),s=Oe(null),l=Oe(null),u=Oe(null),{localeRef:c}=Qd("Input"),f=Oe(r.defaultValue),d=Kt(r,"value"),h=Qi(d,f),v=Xl(r),{mergedSizeRef:p,mergedDisabledRef:g}=v,m=Oe(!1),y=Oe(!1),b=Oe(!1),x=Oe(!1);let w=null;const S=re(()=>{const{placeholder:Ae,pair:ut}=r;return ut?Array.isArray(Ae)?Ae:Ae===void 0?["",""]:[Ae,Ae]:Ae===void 0?[c.value.placeholder]:[Ae]}),C=re(()=>{const{value:Ae}=b,{value:ut}=h,{value:ur}=S;return!Ae&&(rC(ut)||Array.isArray(ut)&&rC(ut[0]))&&ur[0]}),_=re(()=>{const{value:Ae}=b,{value:ut}=h,{value:ur}=S;return!Ae&&ur[1]&&(rC(ut)||Array.isArray(ut)&&rC(ut[1]))}),T=xi(()=>r.internalForceFocus||m.value),E=xi(()=>{if(g.value||r.readonly||!r.clearable||!T.value&&!y.value)return!1;const{value:Ae}=h,{value:ut}=T;return r.pair?!!(Array.isArray(Ae)&&(Ae[0]||Ae[1]))&&(y.value||ut):!!Ae&&(y.value||ut)}),M=re(()=>{const{showPasswordOn:Ae}=r;if(Ae)return Ae;if(r.showPasswordToggle)return"click"}),k=Oe(!1),P=re(()=>{const{textDecoration:Ae}=r;return Ae?Array.isArray(Ae)?Ae.map(ut=>({textDecoration:ut})):[{textDecoration:Ae}]:["",""]}),F=()=>{if(r.type==="textarea"){const{autosize:Ae}=r;if(typeof Ae=="boolean"||!a.value)return;const{paddingTop:ut,paddingBottom:ur,lineHeight:Le}=window.getComputedStyle(a.value),dt=Number(ut.slice(0,-2)),Bt=Number(ur.slice(0,-2)),cr=Number(Le.slice(0,-2)),{value:$r}=o;if(!$r)return;if(Ae.minRows){const nr=Math.max(Ae.minRows,1),tn=`${dt+Bt+cr*nr}px`;$r.style.minHeight=tn}if(Ae.maxRows){const nr=`${dt+Bt+cr*Ae.maxRows}px`;$r.style.maxHeight=nr}}},$=re(()=>{const{maxlength:Ae}=r;return Ae===void 0?void 0:Number(Ae)});Ss(()=>{const{value:Ae}=h;Array.isArray(Ae)||nt(Ae)});const R=lv().proxy;function L(Ae){const{onUpdateValue:ut,"onUpdate:value":ur,onInput:Le}=r,{nTriggerFormInput:dt}=v;ut&&Tt(ut,Ae),ur&&Tt(ur,Ae),Le&&Tt(Le,Ae),f.value=Ae,dt()}function O(Ae){const{onChange:ut}=r,{nTriggerFormChange:ur}=v;ut&&Tt(ut,Ae),f.value=Ae,ur()}function B(Ae){const{onBlur:ut}=r,{nTriggerFormBlur:ur}=v;ut&&Tt(ut,Ae),ur()}function U(Ae){const{onFocus:ut}=r,{nTriggerFormFocus:ur}=v;ut&&Tt(ut,Ae),ur()}function W(Ae){const{onClear:ut}=r;ut&&Tt(ut,Ae)}function X(Ae){const{onInputBlur:ut}=r;ut&&Tt(ut,Ae)}function ae(Ae){const{onInputFocus:ut}=r;ut&&Tt(ut,Ae)}function Z(){const{onDeactivate:Ae}=r;Ae&&Tt(Ae)}function Y(){const{onActivate:Ae}=r;Ae&&Tt(Ae)}function fe(Ae){const{onClick:ut}=r;ut&&Tt(ut,Ae)}function le(Ae){const{onWrapperFocus:ut}=r;ut&&Tt(ut,Ae)}function ue(Ae){const{onWrapperBlur:ut}=r;ut&&Tt(ut,Ae)}function Ee(){b.value=!0}function De(Ae){b.value=!1,Ae.target===u.value?je(Ae,1):je(Ae,0)}function je(Ae,ut=0,ur="input"){const Le=Ae.target.value;if(nt(Le),w=Le,b.value)return;const dt=Le;if(!r.pair)ur==="input"?L(dt):O(dt);else{let{value:Bt}=h;Array.isArray(Bt)?Bt=[...Bt]:Bt=["",""],Bt[ut]=dt,ur==="input"?L(Bt):O(Bt)}R.$forceUpdate()}function ke(Ae){X(Ae),Ae.relatedTarget===i.value&&Z(),Ae.relatedTarget!==null&&(Ae.relatedTarget===l.value||Ae.relatedTarget===u.value||Ae.relatedTarget===a.value)||(x.value=!1),he(Ae,"blur")}function D(Ae){ae(Ae),m.value=!0,x.value=!0,Y(),he(Ae,"focus")}function z(Ae){r.passivelyActivated&&(ue(Ae),he(Ae,"blur"))}function H(Ae){r.passivelyActivated&&(m.value=!0,le(Ae),he(Ae,"focus"))}function he(Ae,ut){Ae.relatedTarget!==null&&(Ae.relatedTarget===l.value||Ae.relatedTarget===u.value||Ae.relatedTarget===a.value||Ae.relatedTarget===i.value)||(ut==="focus"?(U(Ae),m.value=!0):ut==="blur"&&(B(Ae),m.value=!1))}function te(Ae,ut){je(Ae,ut,"change")}function ge(Ae){fe(Ae)}function Qe(Ae){W(Ae),r.pair?L(["",""]):L("")}function Ve(Ae){const{onMousedown:ut}=r;ut&&ut(Ae);const{tagName:ur}=Ae.target;if(ur!=="INPUT"&&ur!=="TEXTAREA"){if(r.resizable){const{value:Le}=i;if(Le){const{left:dt,top:Bt,width:cr,height:$r}=Le.getBoundingClientRect(),nr=14;if(dt+cr-nr<Ae.clientX&&Ae.clientY<dt+cr&&Bt+$r-nr<Ae.clientY&&Ae.clientY<Bt+$r)return}}Ae.preventDefault(),m.value||me()}}function Ie(){y.value=!0}function Be(){y.value=!1}function V(){g.value||M.value==="click"&&(k.value=!k.value)}function j(Ae){if(g.value)return;Ae.preventDefault();const ut=Le=>{Le.preventDefault(),wi("mouseup",document,ut)};if(Fi("mouseup",document,ut),M.value!=="mousedown")return;k.value=!0;const ur=()=>{k.value=!1,wi("mouseup",document,ur)};Fi("mouseup",document,ur)}function q(Ae){var ut;switch((ut=r.onKeydown)===null||ut===void 0||ut.call(r,Ae),Ae.code){case"Escape":Q();break;case"Enter":case"NumpadEnter":ee(Ae);break}}function ee(Ae){var ut,ur;if(r.passivelyActivated){const{value:Le}=x;if(Le){r.internalDeactivateOnEnter&&Q();return}Ae.preventDefault(),r.type==="textarea"?(ut=a.value)===null||ut===void 0||ut.focus():(ur=l.value)===null||ur===void 0||ur.focus()}}function Q(){r.passivelyActivated&&(x.value=!1,Ha(()=>{var Ae;(Ae=i.value)===null||Ae===void 0||Ae.focus()}))}function me(){var Ae,ut,ur;g.value||(r.passivelyActivated?(Ae=i.value)===null||Ae===void 0||Ae.focus():((ut=a.value)===null||ut===void 0||ut.focus(),(ur=l.value)===null||ur===void 0||ur.focus()))}function He(){var Ae;((Ae=i.value)===null||Ae===void 0?void 0:Ae.contains(document.activeElement))&&document.activeElement.blur()}function ze(){var Ae,ut;(Ae=a.value)===null||Ae===void 0||Ae.select(),(ut=l.value)===null||ut===void 0||ut.select()}function it(){g.value||(a.value?a.value.focus():l.value&&l.value.focus())}function we(){const{value:Ae}=i;(Ae==null?void 0:Ae.contains(document.activeElement))&&Ae!==document.activeElement&&Q()}function nt(Ae){const{type:ut,pair:ur,autosize:Le}=r;if(!ur&&Le)if(ut==="textarea"){const{value:dt}=o;dt&&(dt.textContent=(Ae!=null?Ae:"")+`\r
`)}else{const{value:dt}=s;dt&&(Ae?dt.textContent=Ae:dt.innerHTML="&nbsp;")}}function st(){F()}let jt=null;return Ks(()=>{const{autosize:Ae,type:ut}=r;Ae&&ut==="textarea"?jt=fn(h,ur=>{!Array.isArray(ur)&&ur!==w&&nt(ur)}):jt==null||jt()}),rn(KX,{mergedValueRef:h,maxlengthRef:$,mergedClsPrefixRef:t}),Object.assign(Object.assign({},{wrapperElRef:i,inputElRef:l,textareaElRef:a,isCompositing:b,focus:me,blur:He,select:ze,deactivate:we,activate:it}),{wrapperElRef:i,inputElRef:l,inputMirrorElRef:s,inputEl2Ref:u,textareaElRef:a,textareaMirrorElRef:o,uncontrolledValue:f,mergedValue:h,passwordVisible:k,mergedPlaceholder:S,showPlaceholder1:C,showPlaceholder2:_,mergedFocus:T,isComposing:b,activated:x,showClearButton:E,mergedSize:p,mergedDisabled:g,textDecorationStyle:P,mergedClsPrefix:t,mergedBordered:e,mergedShowPasswordOn:M,handleCompositionStart:Ee,handleCompositionEnd:De,handleInput:je,handleInputBlur:ke,handleInputFocus:D,handleWrapperBlur:z,handleWrapperFocus:H,handleMouseEnter:Ie,handleMouseLeave:Be,handleMouseDown:Ve,handleChange:te,handleClick:ge,handleClear:Qe,handlePasswordToggleClick:V,handlePasswordToggleMousedown:j,handleWrapperKeyDown:q,handleTextAreaMirrorResize:st,mergedTheme:n,cssVars:re(()=>{const{value:Ae}=p,{common:{cubicBezierEaseInOut:ut},self:{color:ur,borderRadius:Le,textColor:dt,caretColor:Bt,caretColorError:cr,caretColorWarning:$r,textDecorationColor:nr,border:tn,borderDisabled:Er,borderHover:zr,borderFocus:Qr,placeholderColor:_n,placeholderColorDisabled:jn,lineHeightTextarea:ii,colorDisabled:bn,colorFocus:ai,textColorDisabled:Zn,boxShadowFocus:Br,iconSize:on,colorFocusWarning:mr,boxShadowFocusWarning:ln,borderWarning:fi,borderFocusWarning:po,borderHoverWarning:Ua,colorFocusError:ys,boxShadowFocusError:hl,borderError:vl,borderFocusError:pl,borderHoverError:_f,clearSize:Oh,clearColor:bg,clearColorHover:xg,clearColorPressed:wg,iconColor:tc,iconColorDisabled:Ko,suffixTextColor:rc,countTextColor:zn,iconColorHover:Va,iconColorPressed:ki,loadingColor:ko,loadingColorError:Ws,loadingColorWarning:Lh,[Ot("padding",Ae)]:Fh,[Ot("fontSize",Ae)]:Tf,[Ot("height",Ae)]:Nh}}=n.value,{left:Bh,right:$h}=LS(Fh);return{"--bezier":ut,"--count-text-color":zn,"--color":ur,"--font-size":Tf,"--border-radius":Le,"--height":Nh,"--padding-left":Bh,"--padding-right":$h,"--text-color":dt,"--caret-color":Bt,"--text-decoration-color":nr,"--border":tn,"--border-disabled":Er,"--border-hover":zr,"--border-focus":Qr,"--placeholder-color":_n,"--placeholder-color-disabled":jn,"--icon-size":on,"--line-height-textarea":ii,"--color-disabled":bn,"--color-focus":ai,"--text-color-disabled":Zn,"--box-shadow-focus":Br,"--loading-color":ko,"--caret-color-warning":$r,"--color-focus-warning":mr,"--box-shadow-focus-warning":ln,"--border-warning":fi,"--border-focus-warning":po,"--border-hover-warning":Ua,"--loading-color-warning":Lh,"--caret-color-error":cr,"--color-focus-error":ys,"--box-shadow-focus-error":hl,"--border-error":vl,"--border-focus-error":pl,"--border-hover-error":_f,"--loading-color-error":Ws,"--clear-color":bg,"--clear-size":Oh,"--clear-color-hover":xg,"--clear-color-pressed":wg,"--icon-color":tc,"--icon-color-hover":Va,"--icon-color-pressed":ki,"--icon-color-disabled":Ko,"--suffix-text-color":rc}})})},render(){const{mergedClsPrefix:r}=this;return I("div",{ref:"wrapperElRef",class:[`${r}-input`,{[`${r}-input--disabled`]:this.mergedDisabled,[`${r}-input--textarea`]:this.type==="textarea",[`${r}-input--resizable`]:this.resizable&&!this.autosize,[`${r}-input--autosize`]:this.autosize,[`${r}-input--round`]:this.round&&this.type!=="textarea",[`${r}-input--pair`]:this.pair,[`${r}-input--focus`]:this.mergedFocus,[`${r}-input--stateful`]:this.stateful}],style:this.cssVars,tabindex:!this.mergedDisabled&&this.passivelyActivated&&!this.activated?0:void 0,onFocus:this.handleWrapperFocus,onBlur:this.handleWrapperBlur,onClick:this.handleClick,onMousedown:this.handleMouseDown,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd,onKeyup:this.onKeyup,onKeydown:this.handleWrapperKeyDown},I("div",{class:`${r}-input-wrapper`},this.$slots.affix||this.$slots.prefix?I("div",{class:`${r}-input__prefix`},qr(this.$slots,"affix",void 0,()=>[qr(this.$slots,"prefix")])):null,this.type==="textarea"?I("div",{class:`${r}-input__textarea`},I("textarea",Object.assign({},this.inputProps,{ref:"textareaElRef",class:`${r}-input__textarea-el`,autofocus:this.autofocus,rows:Number(this.rows),placeholder:this.placeholder,value:this.mergedValue,disabled:this.mergedDisabled,maxlength:this.maxlength,minlength:this.minlength,readonly:this.readonly,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,style:this.textDecorationStyle[0],onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,onInput:this.handleInput,onChange:this.handleChange})),this.showPlaceholder1?I("div",{class:`${r}-input__placeholder`,key:"placeholder"},this.mergedPlaceholder[0]):null,this.autosize?I(p0,{onResize:this.handleTextAreaMirrorResize},{default:()=>I("div",{ref:"textareaMirrorElRef",class:`${r}-input__textarea-mirror`,key:"mirror"})}):null):I("div",{class:`${r}-input__input`},I("input",Object.assign({type:this.type==="password"&&this.mergedShowPasswordOn&&this.passwordVisible?"text":this.type},this.inputProps,{ref:"inputElRef",class:`${r}-input__input-el`,style:this.textDecorationStyle[0],tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[0],disabled:this.mergedDisabled,maxlength:this.maxlength,minlength:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[0]:this.mergedValue,readonly:this.readonly,autofocus:this.autofocus,size:this.attrSize,onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,onInput:t=>this.handleInput(t,0),onChange:t=>this.handleChange(t,0)})),this.showPlaceholder1?I("div",{class:`${r}-input__placeholder`},I("span",null,this.mergedPlaceholder[0])):null,this.autosize?I("div",{class:`${r}-input__input-mirror`,key:"mirror",ref:"inputMirrorElRef"},"\xA0"):null),!this.pair&&(this.$slots.suffix||this.clearable||this.showCount||this.mergedShowPasswordOn||this.loading!==void 0)?I("div",{class:`${r}-input__suffix`},[this.clearable||this.$slots.clear?I(aP,{clsPrefix:r,show:this.showClearButton,onClear:this.handleClear},{default:()=>qr(this.$slots,"clear")}):null,qr(this.$slots,"suffix"),this.loading!==void 0?I(XX,{clsPrefix:r,loading:this.loading,showArrow:!1,showClear:!1,style:this.cssVars}):null,this.showCount&&this.type!=="textarea"?I(ZX,null,{default:this.$slots.count}):null,this.mergedShowPasswordOn&&this.type==="password"?I(si,{clsPrefix:r,class:`${r}-input__eye`,onMousedown:this.handlePasswordToggleMousedown,onClick:this.handlePasswordToggleClick},{default:()=>this.passwordVisible?I(B8e,null):I($8e,null)}):null]):null),this.pair?I("span",{class:`${r}-input__separator`},qr(this.$slots,"separator",void 0,()=>[this.separator])):null,this.pair?I("div",{class:`${r}-input-wrapper`},I("div",{class:`${r}-input__input`},I("input",{ref:"inputEl2Ref",type:this.type,class:`${r}-input__input-el`,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[1],disabled:this.mergedDisabled,maxlength:this.maxlength,minlength:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[1]:void 0,readonly:this.readonly,style:this.textDecorationStyle[1],onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,onInput:t=>this.handleInput(t,1),onChange:t=>this.handleChange(t,1)}),this.showPlaceholder2?I("div",{class:`${r}-input__placeholder`},I("span",null,this.mergedPlaceholder[1])):null),I("div",{class:`${r}-input__suffix`},[this.clearable||this.$slots.clear?I(aP,{clsPrefix:r,show:this.showClearButton,onClear:this.handleClear},{default:()=>qr(this.$slots,"clear")}):null,qr(this.$slots,"suffix")])):null,this.mergedBordered?I("div",{class:`${r}-input__border`}):null,this.mergedBordered?I("div",{class:`${r}-input__state-border`}):null,this.showCount&&this.type==="textarea"?I(ZX,null,{default:this.$slots.count}):null)}});function lHe(r){return nC(r)?r.name||r.key||"key-required":r.value}function nC(r){return r.type==="group"}function QX(r){return r.type==="ignored"}const uHe={getKey:lHe,getIsGroup:nC,getIgnored:QX};function JX(r,t){try{return!!(1+t.toString().toLowerCase().indexOf(r.trim().toLowerCase()))}catch{return!1}}function cHe(r,t,e){if(!t)return r;function n(i){if(!Array.isArray(i))return[];const a=[];for(const o of i)if(nC(o)){const s=n(o.children);s.length&&a.push(Object.assign({},o,{children:s}))}else{if(QX(o))continue;t(e,o)&&a.push(o)}return a}return n(r)}function fHe(r){const t=new Map;return r.forEach(e=>{nC(e)?e.children.forEach(n=>{t.set(n.value,n)}):t.set(e.value,e)}),t}function dHe(r,t){return t?typeof t.label=="string"?JX(r,t.label):t.value!==void 0?JX(r,String(t.value)):!1:!1}function lh(r){return yi(r,[255,255,255,.16])}function iC(r){return yi(r,[0,0,0,.12])}var hHe={paddingTiny:"0 6px",paddingSmall:"0 10px",paddingMedium:"0 14px",paddingLarge:"0 18px",paddingRoundTiny:"0 10px",paddingRoundSmall:"0 14px",paddingRoundMedium:"0 18px",paddingRoundLarge:"0 22px",iconMarginTiny:"6px",iconMarginSmall:"6px",iconMarginMedium:"6px",iconMarginLarge:"6px",iconSizeTiny:"14px",iconSizeSmall:"18px",iconSizeMedium:"18px",iconSizeLarge:"20px",rippleDuration:".6s"};const vHe=r=>{const{heightTiny:t,heightSmall:e,heightMedium:n,heightLarge:i,borderRadius:a,fontSizeTiny:o,fontSizeSmall:s,fontSizeMedium:l,fontSizeLarge:u,opacityDisabled:c,textColor2:f,textColor3:d,primaryColorHover:h,primaryColorPressed:v,borderColor:p,primaryColor:g,baseColor:m,infoColor:y,infoColorHover:b,infoColorPressed:x,successColor:w,successColorHover:S,successColorPressed:C,warningColor:_,warningColorHover:T,warningColorPressed:E,errorColor:M,errorColorHover:k,errorColorPressed:P,fontWeight:F,buttonColor2:$,buttonColor2Hover:R,buttonColor2Pressed:L,fontWeightStrong:O}=r;return Object.assign(Object.assign({},hHe),{heightTiny:t,heightSmall:e,heightMedium:n,heightLarge:i,borderRadiusTiny:a,borderRadiusSmall:a,borderRadiusMedium:a,borderRadiusLarge:a,fontSizeTiny:o,fontSizeSmall:s,fontSizeMedium:l,fontSizeLarge:u,opacityDisabled:c,colorOpacitySecondary:"0.16",colorOpacitySecondaryHover:"0.2",colorOpacitySecondaryPressed:"0.24",colorSecondary:$,colorSecondaryHover:R,colorSecondaryPressed:L,colorTertiary:$,colorTertiaryHover:R,colorTertiaryPressed:L,colorQuaternary:"#0000",colorQuaternaryHover:R,colorQuaternaryPressed:L,color:"#0000",colorHover:"#0000",colorPressed:"#0000",colorFocus:"#0000",colorDisabled:"#0000",textColor:f,textColorTertiary:d,textColorHover:h,textColorPressed:v,textColorFocus:h,textColorDisabled:f,textColorText:f,textColorTextHover:h,textColorTextPressed:v,textColorTextFocus:h,textColorTextDisabled:f,textColorGhost:f,textColorGhostHover:h,textColorGhostPressed:v,textColorGhostFocus:h,textColorGhostDisabled:f,border:`1px solid ${p}`,borderHover:`1px solid ${h}`,borderPressed:`1px solid ${v}`,borderFocus:`1px solid ${h}`,borderDisabled:`1px solid ${p}`,rippleColor:g,colorPrimary:g,colorHoverPrimary:h,colorPressedPrimary:v,colorFocusPrimary:h,colorDisabledPrimary:g,textColorPrimary:m,textColorHoverPrimary:m,textColorPressedPrimary:m,textColorFocusPrimary:m,textColorDisabledPrimary:m,textColorTextPrimary:g,textColorTextHoverPrimary:h,textColorTextPressedPrimary:v,textColorTextFocusPrimary:h,textColorTextDisabledPrimary:f,textColorGhostPrimary:g,textColorGhostHoverPrimary:h,textColorGhostPressedPrimary:v,textColorGhostFocusPrimary:h,textColorGhostDisabledPrimary:g,borderPrimary:`1px solid ${g}`,borderHoverPrimary:`1px solid ${h}`,borderPressedPrimary:`1px solid ${v}`,borderFocusPrimary:`1px solid ${h}`,borderDisabledPrimary:`1px solid ${g}`,rippleColorPrimary:g,colorInfo:y,colorHoverInfo:b,colorPressedInfo:x,colorFocusInfo:b,colorDisabledInfo:y,textColorInfo:m,textColorHoverInfo:m,textColorPressedInfo:m,textColorFocusInfo:m,textColorDisabledInfo:m,textColorTextInfo:y,textColorTextHoverInfo:b,textColorTextPressedInfo:x,textColorTextFocusInfo:b,textColorTextDisabledInfo:f,textColorGhostInfo:y,textColorGhostHoverInfo:b,textColorGhostPressedInfo:x,textColorGhostFocusInfo:b,textColorGhostDisabledInfo:y,borderInfo:`1px solid ${y}`,borderHoverInfo:`1px solid ${b}`,borderPressedInfo:`1px solid ${x}`,borderFocusInfo:`1px solid ${b}`,borderDisabledInfo:`1px solid ${y}`,rippleColorInfo:y,colorSuccess:w,colorHoverSuccess:S,colorPressedSuccess:C,colorFocusSuccess:S,colorDisabledSuccess:w,textColorSuccess:m,textColorHoverSuccess:m,textColorPressedSuccess:m,textColorFocusSuccess:m,textColorDisabledSuccess:m,textColorTextSuccess:w,textColorTextHoverSuccess:S,textColorTextPressedSuccess:C,textColorTextFocusSuccess:S,textColorTextDisabledSuccess:f,textColorGhostSuccess:w,textColorGhostHoverSuccess:S,textColorGhostPressedSuccess:C,textColorGhostFocusSuccess:S,textColorGhostDisabledSuccess:w,borderSuccess:`1px solid ${w}`,borderHoverSuccess:`1px solid ${S}`,borderPressedSuccess:`1px solid ${C}`,borderFocusSuccess:`1px solid ${S}`,borderDisabledSuccess:`1px solid ${w}`,rippleColorSuccess:w,colorWarning:_,colorHoverWarning:T,colorPressedWarning:E,colorFocusWarning:T,colorDisabledWarning:_,textColorWarning:m,textColorHoverWarning:m,textColorPressedWarning:m,textColorFocusWarning:m,textColorDisabledWarning:m,textColorTextWarning:_,textColorTextHoverWarning:T,textColorTextPressedWarning:E,textColorTextFocusWarning:T,textColorTextDisabledWarning:f,textColorGhostWarning:_,textColorGhostHoverWarning:T,textColorGhostPressedWarning:E,textColorGhostFocusWarning:T,textColorGhostDisabledWarning:_,borderWarning:`1px solid ${_}`,borderHoverWarning:`1px solid ${T}`,borderPressedWarning:`1px solid ${E}`,borderFocusWarning:`1px solid ${T}`,borderDisabledWarning:`1px solid ${_}`,rippleColorWarning:_,colorError:M,colorHoverError:k,colorPressedError:P,colorFocusError:k,colorDisabledError:M,textColorError:m,textColorHoverError:m,textColorPressedError:m,textColorFocusError:m,textColorDisabledError:m,textColorTextError:M,textColorTextHoverError:k,textColorTextPressedError:P,textColorTextFocusError:k,textColorTextDisabledError:f,textColorGhostError:M,textColorGhostHoverError:k,textColorGhostPressedError:P,textColorGhostFocusError:k,textColorGhostDisabledError:M,borderError:`1px solid ${M}`,borderHoverError:`1px solid ${k}`,borderPressedError:`1px solid ${P}`,borderFocusError:`1px solid ${k}`,borderDisabledError:`1px solid ${M}`,rippleColorError:M,waveOpacity:"0.6",fontWeight:F,fontWeightStrong:O})},pHe={name:"Button",common:Wn,self:vHe};var y0=pHe;const Bi="0!important",eq="-1px!important";function Op(r){return Ge(r+"-type",[_e("& +",[de("button",{},[Ge(r+"-type",[Se("border",{borderLeftWidth:Bi}),Se("state-border",{left:eq})])])])])}function Lp(r){return Ge(r+"-type",[_e("& +",[de("button",[Ge(r+"-type",[Se("border",{borderTopWidth:Bi}),Se("state-border",{top:eq})])])])])}var gHe=de("button-group",`
 flex-wrap: nowrap;
 display: inline-flex;
 position: relative;
`,[Mn("vertical",{flexDirection:"row"},[de("button",[_e("&:first-child:not(:last-child)",`
 margin-right: ${Bi};
 border-top-right-radius: ${Bi};
 border-bottom-right-radius: ${Bi};
 `),_e("&:last-child:not(:first-child)",`
 margin-left: ${Bi};
 border-top-left-radius: ${Bi};
 border-bottom-left-radius: ${Bi};
 `),_e("&:not(:first-child):not(:last-child)",`
 margin-left: ${Bi};
 margin-right: ${Bi};
 border-radius: ${Bi};
 `),Op("default"),Ge("ghost",[Op("primary"),Op("info"),Op("success"),Op("warning"),Op("error")])])]),Ge("vertical",{flexDirection:"column"},[de("button",[_e("&:first-child:not(:last-child)",`
 margin-bottom: ${Bi};
 margin-left: ${Bi};
 margin-right: ${Bi};
 border-bottom-left-radius: ${Bi};
 border-bottom-right-radius: ${Bi};
 `),_e("&:last-child:not(:first-child)",`
 margin-top: ${Bi};
 margin-left: ${Bi};
 margin-right: ${Bi};
 border-top-left-radius: ${Bi};
 border-top-right-radius: ${Bi};
 `),_e("&:not(:first-child):not(:last-child)",`
 margin: ${Bi};
 border-radius: ${Bi};
 `),Lp("default"),Ge("ghost",[Lp("primary"),Lp("info"),Lp("success"),Lp("warning"),Lp("error")])])])]);const tq=Symbol("button-group"),mHe={size:{type:String,default:void 0},vertical:Boolean};xt({name:"ButtonGroup",props:mHe,setup(r){const{mergedClsPrefixRef:t}=mn(r);return kp("ButtonGroup",gHe,t),rn(tq,r),{mergedClsPrefix:t}},render(){const{mergedClsPrefix:r}=this;return I("div",{class:[`${r}-button-group`,this.vertical&&`${r}-button-group--vertical`],role:"group"},this.$slots)}});var yHe=_e([de("button",`
 font-weight: var(--font-weight);
 line-height: 1;
 font-family: inherit;
 padding: var(--padding);
 height: var(--height);
 font-size: var(--font-size);
 border-radius: var(--border-radius);
 color: var(--text-color);
 background-color: var(--color);
 width: var(--width);
 white-space: nowrap;
 outline: none;
 position: relative;
 z-index: auto;
 border: none;
 display: inline-flex;
 flex-wrap: nowrap;
 flex-shrink: 0;
 align-items: center;
 justify-content: center;
 user-select: none;
 text-align: center;
 cursor: pointer;
 text-decoration: none;
 transition:
 color .3s var(--bezier),
 background-color .3s var(--bezier),
 opacity .3s var(--bezier),
 border-color .3s var(--bezier);
 `,[Ge("color",[Se("border",{borderColor:"var(--border-color)"}),Ge("disabled",[Se("border",{borderColor:"var(--border-color-disabled)"})]),Mn("disabled",[_e("&:focus",[Se("state-border",{borderColor:"var(--border-color-focus)"})]),_e("&:hover",[Se("state-border",{borderColor:"var(--border-color-hover)"})]),_e("&:active",[Se("state-border",{borderColor:"var(--border-color-pressed)"})]),Ge("pressed",[Se("state-border",{borderColor:"var(--border-color-pressed)"})])])]),Ge("disabled",{backgroundColor:"var(--color-disabled)",color:"var(--text-color-disabled)"},[Se("border",{border:"var(--border-disabled)"})]),Mn("disabled",[_e("&:focus",{backgroundColor:"var(--color-focus)",color:"var(--text-color-focus)"},[Se("state-border",{border:"var(--border-focus)"})]),_e("&:hover",{backgroundColor:"var(--color-hover)",color:"var(--text-color-hover)"},[Se("state-border",{border:"var(--border-hover)"})]),_e("&:active",{backgroundColor:"var(--color-pressed)",color:"var(--text-color-pressed)"},[Se("state-border",{border:"var(--border-pressed)"})]),Ge("pressed",{backgroundColor:"var(--color-pressed)",color:"var(--text-color-pressed)"},[Se("state-border",{border:"var(--border-pressed)"})])]),de("base-wave",`
 pointer-events: none;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 animation-iteration-count: 1;
 animation-duration: var(--ripple-duration);
 animation-timing-function: var(--bezier-ease-out), var(--bezier-ease-out);
 `,[Ge("active",{zIndex:1,animationName:"button-wave-spread, button-wave-opacity"})]),typeof window!="undefined"&&"MozBoxSizing"in document.createElement("div").style?_e("&::moz-focus-inner",{border:0}):null,Se("border, state-border",`
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 border-radius: inherit;
 transition: border-color .3s var(--bezier);
 pointer-events: none;
 `),Se("border",{border:"var(--border)"}),Se("state-border",{border:"var(--border)",borderColor:"#0000",zIndex:1}),Se("icon",`
 margin: var(--icon-margin);
 margin-left: 0;
 height: var(--icon-size);
 width: var(--icon-size);
 max-width: var(--icon-size);
 font-size: var(--icon-size);
 position: relative;
 flex-shrink: 0;
 `,[de("icon-slot",`
 height: var(--icon-size);
 width: var(--icon-size);
 position: absolute;
 left: 0;
 top: 50%;
 transform: translateY(-50%);
 display: flex;
 `,[f0({top:"50%",originalTransform:"translateY(-50%)"})]),QVe()]),Se("content",`
 display: flex;
 align-items: center;
 flex-wrap: nowrap;
 `,[_e("~",[Se("icon",{margin:"var(--icon-margin)",marginRight:0})])]),Ge("block",`
 display: flex;
 width: 100%;
 `),Ge("dashed",[Se("border, state-border",{borderStyle:"dashed !important"})]),Ge("disabled",{cursor:"not-allowed",opacity:"var(--opacity-disabled)"})]),_e("@keyframes button-wave-spread",{from:{boxShadow:"0 0 0.5px 0 var(--ripple-color)"},to:{boxShadow:"0 0 0.5px 4.5px var(--ripple-color)"}}),_e("@keyframes button-wave-opacity",{from:{opacity:"var(--wave-opacity)"},to:{opacity:0}})]);const bHe=Object.assign(Object.assign({},rr.props),{color:String,textColor:String,text:Boolean,block:Boolean,loading:Boolean,disabled:Boolean,circle:Boolean,size:String,ghost:Boolean,round:Boolean,secondary:Boolean,tertiary:Boolean,quaternary:Boolean,strong:Boolean,focusable:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},tag:{type:String,default:"button"},type:{type:String,default:"default"},dashed:Boolean,iconPlacement:{type:String,default:"left"},attrType:{type:String,default:"button"},onClick:[Function,Array],bordered:{type:Boolean,default:!0}}),rq=xt({name:"Button",props:bHe,setup(r){const t=Oe(null),e=Oe(null),n=Oe(!1),i=xi(()=>!r.quaternary&&!r.tertiary&&!r.secondary&&!r.text&&(!r.color||r.ghost||r.dashed)&&r.bordered),a=or(tq,{}),{mergedSizeRef:o}=Xl({},{defaultSize:"medium",mergedSize:m=>{const{size:y}=r;if(y)return y;const{size:b}=a;if(b)return b;const{mergedSize:x}=m||{};return x?x.value:"medium"}}),s=re(()=>r.focusable&&!r.disabled),l=m=>{var y;m.preventDefault(),!r.disabled&&s.value&&((y=t.value)===null||y===void 0||y.focus({preventScroll:!0}))},u=m=>{if(!r.disabled){const{onClick:y}=r;if(y&&Tt(y,m),!r.text){const{value:b}=e;b&&b.play()}}},c=m=>{switch(m.code){case"Enter":case"NumpadEnter":if(!r.keyboard)return;n.value=!1}},f=m=>{switch(m.code){case"Enter":case"NumpadEnter":if(!r.keyboard){m.preventDefault();return}n.value=!0}},d=()=>{n.value=!1},{mergedClsPrefixRef:h,NConfigProvider:v}=mn(r),p=rr("Button","Button",yHe,y0,r,h),g=nP("Button",v==null?void 0:v.mergedRtlRef,h);return{selfRef:t,waveRef:e,mergedClsPrefix:h,mergedFocusable:s,mergedSize:o,showBorder:i,enterPressed:n,rtlEnabled:g,handleMousedown:l,handleKeydown:f,handleBlur:d,handleKeyup:c,handleClick:u,customColorCssVars:re(()=>{const{color:m}=r;if(!m)return null;const y=lh(m);return{"--border-color":m,"--border-color-hover":y,"--border-color-pressed":iC(m),"--border-color-focus":y,"--border-color-disabled":m}}),cssVars:re(()=>{const m=p.value,{common:{cubicBezierEaseInOut:y,cubicBezierEaseOut:b},self:x}=m,{rippleDuration:w,opacityDisabled:S,fontWeight:C,fontWeightStrong:_}=x,T=o.value,{dashed:E,type:M,ghost:k,text:P,color:F,round:$,circle:R,textColor:L,secondary:O,tertiary:B,quaternary:U,strong:W}=r,X={fontWeight:W?_:C};let ae={"--color":"initial","--color-hover":"initial","--color-pressed":"initial","--color-focus":"initial","--color-disabled":"initial","--ripple-color":"initial","--text-color":"initial","--text-color-hover":"initial","--text-color-pressed":"initial","--text-color-focus":"initial","--text-color-disabled":"initial"};const Z=M==="tertiary",Y=M==="default",fe=Z?"default":M;if(P){const te=L||F,ge=te||x[Ot("textColorText",fe)];ae={"--color":"#0000","--color-hover":"#0000","--color-pressed":"#0000","--color-focus":"#0000","--color-disabled":"#0000","--ripple-color":"#0000","--text-color":ge,"--text-color-hover":te?lh(te):x[Ot("textColorTextHover",fe)],"--text-color-pressed":te?iC(te):x[Ot("textColorTextPressed",fe)],"--text-color-focus":te?lh(te):x[Ot("textColorTextHover",fe)],"--text-color-disabled":te||x[Ot("textColorTextDisabled",fe)]}}else if(k||E){const te=L||F;ae={"--color":"#0000","--color-hover":"#0000","--color-pressed":"#0000","--color-focus":"#0000","--color-disabled":"#0000","--ripple-color":F||x[Ot("rippleColor",fe)],"--text-color":te||x[Ot("textColorGhost",fe)],"--text-color-hover":te?lh(te):x[Ot("textColorGhostHover",fe)],"--text-color-pressed":te?iC(te):x[Ot("textColorGhostPressed",fe)],"--text-color-focus":te?lh(te):x[Ot("textColorGhostHover",fe)],"--text-color-disabled":te||x[Ot("textColorGhostDisabled",fe)]}}else if(O){const te=Y?x.textColor:Z?x.textColorTertiary:x[Ot("color",fe)],ge=F||te,Qe=M!=="default"&&M!=="tertiary";ae={"--color":Qe?jr(ge,{alpha:Number(x.colorOpacitySecondary)}):x.colorSecondary,"--color-hover":Qe?jr(ge,{alpha:Number(x.colorOpacitySecondaryHover)}):x.colorSecondaryHover,"--color-pressed":Qe?jr(ge,{alpha:Number(x.colorOpacitySecondaryPressed)}):x.colorSecondaryPressed,"--color-focus":Qe?jr(ge,{alpha:Number(x.colorOpacitySecondaryHover)}):x.colorSecondaryHover,"--color-disabled":x.colorSecondary,"--ripple-color":"#0000","--text-color":ge,"--text-color-hover":ge,"--text-color-pressed":ge,"--text-color-focus":ge,"--text-color-disabled":ge}}else if(B||U){const te=Y?x.textColor:Z?x.textColorTertiary:x[Ot("color",fe)],ge=F||te;B?(ae["--color"]=x.colorTertiary,ae["--color-hover"]=x.colorTertiaryHover,ae["--color-pressed"]=x.colorTertiaryPressed,ae["--color-focus"]=x.colorSecondaryHover,ae["--color-disabled"]=x.colorTertiary):(ae["--color"]=x.colorQuaternary,ae["--color-hover"]=x.colorQuaternaryHover,ae["--color-pressed"]=x.colorQuaternaryPressed,ae["--color-focus"]=x.colorQuaternaryHover,ae["--color-disabled"]=x.colorQuaternary),ae["--ripple-color"]="#0000",ae["--text-color"]=ge,ae["--text-color-hover"]=ge,ae["--text-color-pressed"]=ge,ae["--text-color-focus"]=ge,ae["--text-color-disabled"]=ge}else ae={"--color":F||x[Ot("color",fe)],"--color-hover":F?lh(F):x[Ot("colorHover",fe)],"--color-pressed":F?iC(F):x[Ot("colorPressed",fe)],"--color-focus":F?lh(F):x[Ot("colorFocus",fe)],"--color-disabled":F||x[Ot("colorDisabled",fe)],"--ripple-color":F||x[Ot("rippleColor",fe)],"--text-color":L||(F?x.textColorPrimary:Z?x.textColorTertiary:x[Ot("textColor",fe)]),"--text-color-hover":L||(F?x.textColorHoverPrimary:x[Ot("textColorHover",fe)]),"--text-color-pressed":L||(F?x.textColorPressedPrimary:x[Ot("textColorPressed",fe)]),"--text-color-focus":L||(F?x.textColorFocusPrimary:x[Ot("textColorFocus",fe)]),"--text-color-disabled":L||(F?x.textColorDisabledPrimary:x[Ot("textColorDisabled",fe)])};let le={"--border":"initial","--border-hover":"initial","--border-pressed":"initial","--border-focus":"initial","--border-disabled":"initial"};P?le={"--border":"none","--border-hover":"none","--border-pressed":"none","--border-focus":"none","--border-disabled":"none"}:le={"--border":x[Ot("border",fe)],"--border-hover":x[Ot("borderHover",fe)],"--border-pressed":x[Ot("borderPressed",fe)],"--border-focus":x[Ot("borderFocus",fe)],"--border-disabled":x[Ot("borderDisabled",fe)]};const{[Ot("height",T)]:ue,[Ot("fontSize",T)]:Ee,[Ot("padding",T)]:De,[Ot("paddingRound",T)]:je,[Ot("iconSize",T)]:ke,[Ot("borderRadius",T)]:D,[Ot("iconMargin",T)]:z,waveOpacity:H}=x,he={"--width":R&&!P?ue:"initial","--height":P?"initial":ue,"--font-size":Ee,"--padding":R||P?"initial":$?je:De,"--icon-size":ke,"--icon-margin":z,"--border-radius":P?"initial":R||$?ue:D};return Object.assign(Object.assign(Object.assign(Object.assign({"--bezier":y,"--bezier-ease-out":b,"--ripple-duration":w,"--opacity-disabled":S,"--wave-opacity":H},X),ae),le),he)})}},render(){const{$slots:r,mergedClsPrefix:t,tag:e}=this;return I(e,{ref:"selfRef",class:[`${t}-button`,`${t}-button--${this.type}-type`,`${t}-button--${this.mergedSize}-type`,this.rtlEnabled&&`${t}-button--rtl`,this.disabled&&`${t}-button--disabled`,this.block&&`${t}-button--block`,this.enterPressed&&`${t}-button--pressed`,!this.text&&this.dashed&&`${t}-button--dashed`,this.color&&`${t}-button--color`,this.secondary&&`${t}-button--secondary`,this.ghost&&`${t}-button--ghost`],tabindex:this.mergedFocusable?0:-1,type:this.attrType,style:this.cssVars,disabled:this.disabled,onClick:this.handleClick,onBlur:this.handleBlur,onMousedown:this.handleMousedown,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},r.default&&this.iconPlacement==="right"?I("div",{class:`${t}-button__content`},r):null,I(pX,{width:!0},{default:()=>r.icon||this.loading?I("span",{class:`${t}-button__icon`,style:{margin:r.default?"":0}},I(YS,null,{default:()=>this.loading?I(Ip,{clsPrefix:t,key:"loading",class:`${t}-icon-slot`,strokeWidth:20}):I("div",{key:"icon",class:`${t}-icon-slot`,role:"none"},qr(r,"icon"))})):null}),r.default&&this.iconPlacement==="left"?I("span",{class:`${t}-button__content`},r):null,this.text?null:I(AVe,{ref:"waveRef",clsPrefix:t}),this.showBorder?I("div",{"aria-hidden":!0,class:`${t}-button__border`,style:this.customColorCssVars}):null,this.showBorder?I("div",{"aria-hidden":!0,class:`${t}-button__state-border`,style:this.customColorCssVars}):null)}});var $a=rq;const b0=rq;function aC(r,t){Vr(2,arguments);var e=en(r),n=kn(t);return isNaN(n)?new Date(NaN):(n&&e.setDate(e.getDate()+n),e)}function vo(r,t){Vr(2,arguments);var e=en(r),n=kn(t);if(isNaN(n))return new Date(NaN);if(!n)return e;var i=e.getDate(),a=new Date(e.getTime());a.setMonth(e.getMonth()+n+1,0);var o=a.getDate();return i>=o?a:(e.setFullYear(a.getFullYear(),a.getMonth(),i),e)}function xHe(r,t){Vr(2,arguments);var e=en(r).getTime(),n=kn(t);return new Date(e+n)}function nq(r){var t=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return t.setUTCFullYear(r.getFullYear()),r.getTime()-t.getTime()}function oC(r){Vr(1,arguments);var t=en(r);return t.setHours(0,0,0,0),t}function oP(r,t){Vr(2,arguments);var e=kn(t);return vo(r,e*12)}function wHe(r,t){Vr(2,arguments);var e=oC(r),n=oC(t);return e.getTime()===n.getTime()}function SHe(r){return Vr(1,arguments),r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function zs(r){if(Vr(1,arguments),!SHe(r)&&typeof r!="number")return!1;var t=en(r);return!isNaN(Number(t))}function CHe(r){Vr(1,arguments);var t=en(r);return t.setSeconds(0,0),t}function of(r){Vr(1,arguments);var t=en(r);return t.setDate(1),t.setHours(0,0,0,0),t}function iq(r){Vr(1,arguments);var t=en(r),e=new Date(0);return e.setFullYear(t.getFullYear(),0,1),e.setHours(0,0,0,0),e}function aq(r,t){Vr(2,arguments);var e=kn(t);return xHe(r,-e)}function qn(r,t){for(var e=r<0?"-":"",n=Math.abs(r).toString();n.length<t;)n="0"+n;return e+n}var EHe={y:function(r,t){var e=r.getUTCFullYear(),n=e>0?e:1-e;return qn(t==="yy"?n%100:n,t.length)},M:function(r,t){var e=r.getUTCMonth();return t==="M"?String(e+1):qn(e+1,2)},d:function(r,t){return qn(r.getUTCDate(),t.length)},a:function(r,t){var e=r.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h:function(r,t){return qn(r.getUTCHours()%12||12,t.length)},H:function(r,t){return qn(r.getUTCHours(),t.length)},m:function(r,t){return qn(r.getUTCMinutes(),t.length)},s:function(r,t){return qn(r.getUTCSeconds(),t.length)},S:function(r,t){var e=t.length,n=r.getUTCMilliseconds(),i=Math.floor(n*Math.pow(10,e-3));return qn(i,t.length)}},sf=EHe,_He=864e5;function THe(r){Vr(1,arguments);var t=en(r),e=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=t.getTime(),i=e-n;return Math.floor(i/_He)+1}function Fp(r){Vr(1,arguments);var t=1,e=en(r),n=e.getUTCDay(),i=(n<t?7:0)+n-t;return e.setUTCDate(e.getUTCDate()-i),e.setUTCHours(0,0,0,0),e}function oq(r){Vr(1,arguments);var t=en(r),e=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(e+1,0,4),n.setUTCHours(0,0,0,0);var i=Fp(n),a=new Date(0);a.setUTCFullYear(e,0,4),a.setUTCHours(0,0,0,0);var o=Fp(a);return t.getTime()>=i.getTime()?e+1:t.getTime()>=o.getTime()?e:e-1}function AHe(r){Vr(1,arguments);var t=oq(r),e=new Date(0);e.setUTCFullYear(t,0,4),e.setUTCHours(0,0,0,0);var n=Fp(e);return n}var MHe=6048e5;function sq(r){Vr(1,arguments);var t=en(r),e=Fp(t).getTime()-AHe(t).getTime();return Math.round(e/MHe)+1}function sP(r,t){Vr(1,arguments);var e=en(r),n=e.getUTCFullYear(),i=t||{},a=i.locale,o=a&&a.options&&a.options.firstWeekContainsDate,s=o==null?1:kn(o),l=i.firstWeekContainsDate==null?s:kn(i.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=new Date(0);u.setUTCFullYear(n+1,0,l),u.setUTCHours(0,0,0,0);var c=Zd(u,t),f=new Date(0);f.setUTCFullYear(n,0,l),f.setUTCHours(0,0,0,0);var d=Zd(f,t);return e.getTime()>=c.getTime()?n+1:e.getTime()>=d.getTime()?n:n-1}function kHe(r,t){Vr(1,arguments);var e=t||{},n=e.locale,i=n&&n.options&&n.options.firstWeekContainsDate,a=i==null?1:kn(i),o=e.firstWeekContainsDate==null?a:kn(e.firstWeekContainsDate),s=sP(r,t),l=new Date(0);l.setUTCFullYear(s,0,o),l.setUTCHours(0,0,0,0);var u=Zd(l,t);return u}var IHe=6048e5;function lq(r,t){Vr(1,arguments);var e=en(r),n=Zd(e,t).getTime()-kHe(e,t).getTime();return Math.round(n/IHe)+1}var Np={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},PHe={G:function(r,t,e){var n=r.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(n,{width:"abbreviated"});case"GGGGG":return e.era(n,{width:"narrow"});case"GGGG":default:return e.era(n,{width:"wide"})}},y:function(r,t,e){if(t==="yo"){var n=r.getUTCFullYear(),i=n>0?n:1-n;return e.ordinalNumber(i,{unit:"year"})}return sf.y(r,t)},Y:function(r,t,e,n){var i=sP(r,n),a=i>0?i:1-i;if(t==="YY"){var o=a%100;return qn(o,2)}return t==="Yo"?e.ordinalNumber(a,{unit:"year"}):qn(a,t.length)},R:function(r,t){var e=oq(r);return qn(e,t.length)},u:function(r,t){var e=r.getUTCFullYear();return qn(e,t.length)},Q:function(r,t,e){var n=Math.ceil((r.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return qn(n,2);case"Qo":return e.ordinalNumber(n,{unit:"quarter"});case"QQQ":return e.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,t,e){var n=Math.ceil((r.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return qn(n,2);case"qo":return e.ordinalNumber(n,{unit:"quarter"});case"qqq":return e.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,t,e){var n=r.getUTCMonth();switch(t){case"M":case"MM":return sf.M(r,t);case"Mo":return e.ordinalNumber(n+1,{unit:"month"});case"MMM":return e.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(n,{width:"wide",context:"formatting"})}},L:function(r,t,e){var n=r.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return qn(n+1,2);case"Lo":return e.ordinalNumber(n+1,{unit:"month"});case"LLL":return e.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(n,{width:"wide",context:"standalone"})}},w:function(r,t,e,n){var i=lq(r,n);return t==="wo"?e.ordinalNumber(i,{unit:"week"}):qn(i,t.length)},I:function(r,t,e){var n=sq(r);return t==="Io"?e.ordinalNumber(n,{unit:"week"}):qn(n,t.length)},d:function(r,t,e){return t==="do"?e.ordinalNumber(r.getUTCDate(),{unit:"date"}):sf.d(r,t)},D:function(r,t,e){var n=THe(r);return t==="Do"?e.ordinalNumber(n,{unit:"dayOfYear"}):qn(n,t.length)},E:function(r,t,e){var n=r.getUTCDay();switch(t){case"E":case"EE":case"EEE":return e.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(n,{width:"short",context:"formatting"});case"EEEE":default:return e.day(n,{width:"wide",context:"formatting"})}},e:function(r,t,e,n){var i=r.getUTCDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return qn(a,2);case"eo":return e.ordinalNumber(a,{unit:"day"});case"eee":return e.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(i,{width:"short",context:"formatting"});case"eeee":default:return e.day(i,{width:"wide",context:"formatting"})}},c:function(r,t,e,n){var i=r.getUTCDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return qn(a,t.length);case"co":return e.ordinalNumber(a,{unit:"day"});case"ccc":return e.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(i,{width:"narrow",context:"standalone"});case"cccccc":return e.day(i,{width:"short",context:"standalone"});case"cccc":default:return e.day(i,{width:"wide",context:"standalone"})}},i:function(r,t,e){var n=r.getUTCDay(),i=n===0?7:n;switch(t){case"i":return String(i);case"ii":return qn(i,t.length);case"io":return e.ordinalNumber(i,{unit:"day"});case"iii":return e.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(n,{width:"short",context:"formatting"});case"iiii":default:return e.day(n,{width:"wide",context:"formatting"})}},a:function(r,t,e){var n=r.getUTCHours(),i=n/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(r,t,e){var n=r.getUTCHours(),i;switch(n===12?i=Np.noon:n===0?i=Np.midnight:i=n/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(r,t,e){var n=r.getUTCHours(),i;switch(n>=17?i=Np.evening:n>=12?i=Np.afternoon:n>=4?i=Np.morning:i=Np.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(r,t,e){if(t==="ho"){var n=r.getUTCHours()%12;return n===0&&(n=12),e.ordinalNumber(n,{unit:"hour"})}return sf.h(r,t)},H:function(r,t,e){return t==="Ho"?e.ordinalNumber(r.getUTCHours(),{unit:"hour"}):sf.H(r,t)},K:function(r,t,e){var n=r.getUTCHours()%12;return t==="Ko"?e.ordinalNumber(n,{unit:"hour"}):qn(n,t.length)},k:function(r,t,e){var n=r.getUTCHours();return n===0&&(n=24),t==="ko"?e.ordinalNumber(n,{unit:"hour"}):qn(n,t.length)},m:function(r,t,e){return t==="mo"?e.ordinalNumber(r.getUTCMinutes(),{unit:"minute"}):sf.m(r,t)},s:function(r,t,e){return t==="so"?e.ordinalNumber(r.getUTCSeconds(),{unit:"second"}):sf.s(r,t)},S:function(r,t){return sf.S(r,t)},X:function(r,t,e,n){var i=n._originalDate||r,a=i.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return cq(a);case"XXXX":case"XX":return uh(a);case"XXXXX":case"XXX":default:return uh(a,":")}},x:function(r,t,e,n){var i=n._originalDate||r,a=i.getTimezoneOffset();switch(t){case"x":return cq(a);case"xxxx":case"xx":return uh(a);case"xxxxx":case"xxx":default:return uh(a,":")}},O:function(r,t,e,n){var i=n._originalDate||r,a=i.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+uq(a,":");case"OOOO":default:return"GMT"+uh(a,":")}},z:function(r,t,e,n){var i=n._originalDate||r,a=i.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+uq(a,":");case"zzzz":default:return"GMT"+uh(a,":")}},t:function(r,t,e,n){var i=n._originalDate||r,a=Math.floor(i.getTime()/1e3);return qn(a,t.length)},T:function(r,t,e,n){var i=n._originalDate||r,a=i.getTime();return qn(a,t.length)}};function uq(r,t){var e=r>0?"-":"+",n=Math.abs(r),i=Math.floor(n/60),a=n%60;return a===0?e+String(i):e+String(i)+t+qn(a,2)}function cq(r,t){if(r%60==0){var e=r>0?"-":"+";return e+qn(Math.abs(r)/60,2)}return uh(r,t)}function uh(r,t){var e=t||"",n=r>0?"-":"+",i=Math.abs(r),a=qn(Math.floor(i/60),2),o=qn(i%60,2);return n+a+e+o}var DHe=PHe;function fq(r,t){switch(r){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function dq(r,t){switch(r){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}function RHe(r,t){var e=r.match(/(P+)(p+)?/)||[],n=e[1],i=e[2];if(!i)return fq(r,t);var a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",fq(n,t)).replace("{{time}}",dq(i,t))}var OHe={p:dq,P:RHe},hq=OHe,LHe=["D","DD"],FHe=["YY","YYYY"];function vq(r){return LHe.indexOf(r)!==-1}function pq(r){return FHe.indexOf(r)!==-1}function sC(r,t,e){if(r==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(e,"`; see: https://git.io/fxCyr"));if(r==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(e,"`; see: https://git.io/fxCyr"));if(r==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(e,"`; see: https://git.io/fxCyr"));if(r==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(e,"`; see: https://git.io/fxCyr"))}var NHe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,BHe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$He=/^'([^]*?)'?$/,zHe=/''/g,GHe=/[a-zA-Z]/;function li(r,t,e){Vr(2,arguments);var n=String(t),i=e||{},a=i.locale||OI,o=a.options&&a.options.firstWeekContainsDate,s=o==null?1:kn(o),l=i.firstWeekContainsDate==null?s:kn(i.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=a.options&&a.options.weekStartsOn,c=u==null?0:kn(u),f=i.weekStartsOn==null?c:kn(i.weekStartsOn);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!a.localize)throw new RangeError("locale must contain localize property");if(!a.formatLong)throw new RangeError("locale must contain formatLong property");var d=en(r);if(!zs(d))throw new RangeError("Invalid time value");var h=nq(d),v=aq(d,h),p={firstWeekContainsDate:l,weekStartsOn:f,locale:a,_originalDate:d},g=n.match(BHe).map(function(m){var y=m[0];if(y==="p"||y==="P"){var b=hq[y];return b(m,a.formatLong,p)}return m}).join("").match(NHe).map(function(m){if(m==="''")return"'";var y=m[0];if(y==="'")return UHe(m);var b=DHe[y];if(b)return!i.useAdditionalWeekYearTokens&&pq(m)&&sC(m,t,r),!i.useAdditionalDayOfYearTokens&&vq(m)&&sC(m,t,r),b(v,m,a.localize,p);if(y.match(GHe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return m}).join("");return g}function UHe(r){return r.match($He)[1].replace(zHe,"'")}function VHe(r,t){if(r==null)throw new TypeError("assign requires that input parameter not be null or undefined");t=t||{};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}function ll(r){Vr(1,arguments);var t=en(r),e=t.getDate();return e}function HHe(r){Vr(1,arguments);var t=en(r),e=t.getDay();return e}function WHe(r){Vr(1,arguments);var t=en(r),e=t.getFullYear(),n=t.getMonth(),i=new Date(0);return i.setFullYear(e,n+1,0),i.setHours(0,0,0,0),i.getDate()}function lf(r){Vr(1,arguments);var t=en(r),e=t.getHours();return e}function lC(r){Vr(1,arguments);var t=en(r),e=t.getMinutes();return e}function Sa(r){Vr(1,arguments);var t=en(r),e=t.getMonth();return e}function uC(r){Vr(1,arguments);var t=en(r),e=t.getSeconds();return e}function tr(r){Vr(1,arguments);var t=en(r),e=t.getTime();return e}function za(r){return Vr(1,arguments),en(r).getFullYear()}function lP(r,t,e){Vr(2,arguments);var n=e||{},i=n.locale,a=i&&i.options&&i.options.weekStartsOn,o=a==null?0:kn(a),s=n.weekStartsOn==null?o:kn(n.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=en(r),u=kn(t),c=l.getUTCDay(),f=u%7,d=(f+7)%7,h=(d<s?7:0)+u-c;return l.setUTCDate(l.getUTCDate()+h),l}function jHe(r,t){Vr(2,arguments);var e=kn(t);e%7==0&&(e=e-7);var n=1,i=en(r),a=i.getUTCDay(),o=e%7,s=(o+7)%7,l=(s<n?7:0)+e-a;return i.setUTCDate(i.getUTCDate()+l),i}function YHe(r,t){Vr(2,arguments);var e=en(r),n=kn(t),i=sq(e)-n;return e.setUTCDate(e.getUTCDate()-i*7),e}function XHe(r,t,e){Vr(2,arguments);var n=en(r),i=kn(t),a=lq(n,e)-i;return n.setUTCDate(n.getUTCDate()-a*7),n}var qHe=36e5,KHe=6e4,ZHe=1e3,la={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Zl={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function $i(r,t,e){var n=t.match(r);if(!n)return null;var i=parseInt(n[0],10);return{value:e?e(i):i,rest:t.slice(n[0].length)}}function Ql(r,t){var e=t.match(r);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};var n=e[1]==="+"?1:-1,i=e[2]?parseInt(e[2],10):0,a=e[3]?parseInt(e[3],10):0,o=e[5]?parseInt(e[5],10):0;return{value:n*(i*qHe+a*KHe+o*ZHe),rest:t.slice(e[0].length)}}function gq(r,t){return $i(la.anyDigitsSigned,r,t)}function Ji(r,t,e){switch(r){case 1:return $i(la.singleDigit,t,e);case 2:return $i(la.twoDigits,t,e);case 3:return $i(la.threeDigits,t,e);case 4:return $i(la.fourDigits,t,e);default:return $i(new RegExp("^\\d{1,"+r+"}"),t,e)}}function cC(r,t,e){switch(r){case 1:return $i(la.singleDigitSigned,t,e);case 2:return $i(la.twoDigitsSigned,t,e);case 3:return $i(la.threeDigitsSigned,t,e);case 4:return $i(la.fourDigitsSigned,t,e);default:return $i(new RegExp("^-?\\d{1,"+r+"}"),t,e)}}function uP(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function mq(r,t){var e=t>0,n=e?t:1-t,i;if(n<=50)i=r||100;else{var a=n+50,o=Math.floor(a/100)*100,s=r>=a%100;i=r+o-(s?100:0)}return e?i:1-i}var QHe=[31,28,31,30,31,30,31,31,30,31,30,31],JHe=[31,29,31,30,31,30,31,31,30,31,30,31];function yq(r){return r%400==0||r%4==0&&r%100!=0}var eWe={G:{priority:140,parse:function(r,t,e,n){switch(t){case"G":case"GG":case"GGG":return e.era(r,{width:"abbreviated"})||e.era(r,{width:"narrow"});case"GGGGG":return e.era(r,{width:"narrow"});case"GGGG":default:return e.era(r,{width:"wide"})||e.era(r,{width:"abbreviated"})||e.era(r,{width:"narrow"})}},set:function(r,t,e,n){return t.era=e,r.setUTCFullYear(e,0,1),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(r,t,e,n){var i=function(a){return{year:a,isTwoDigitYear:t==="yy"}};switch(t){case"y":return Ji(4,r,i);case"yo":return e.ordinalNumber(r,{unit:"year",valueCallback:i});default:return Ji(t.length,r,i)}},validate:function(r,t,e){return t.isTwoDigitYear||t.year>0},set:function(r,t,e,n){var i=r.getUTCFullYear();if(e.isTwoDigitYear){var a=mq(e.year,i);return r.setUTCFullYear(a,0,1),r.setUTCHours(0,0,0,0),r}var o=!("era"in t)||t.era===1?e.year:1-e.year;return r.setUTCFullYear(o,0,1),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(r,t,e,n){var i=function(a){return{year:a,isTwoDigitYear:t==="YY"}};switch(t){case"Y":return Ji(4,r,i);case"Yo":return e.ordinalNumber(r,{unit:"year",valueCallback:i});default:return Ji(t.length,r,i)}},validate:function(r,t,e){return t.isTwoDigitYear||t.year>0},set:function(r,t,e,n){var i=sP(r,n);if(e.isTwoDigitYear){var a=mq(e.year,i);return r.setUTCFullYear(a,0,n.firstWeekContainsDate),r.setUTCHours(0,0,0,0),Zd(r,n)}var o=!("era"in t)||t.era===1?e.year:1-e.year;return r.setUTCFullYear(o,0,n.firstWeekContainsDate),r.setUTCHours(0,0,0,0),Zd(r,n)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(r,t,e,n){return cC(t==="R"?4:t.length,r)},set:function(r,t,e,n){var i=new Date(0);return i.setUTCFullYear(e,0,4),i.setUTCHours(0,0,0,0),Fp(i)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(r,t,e,n){return cC(t==="u"?4:t.length,r)},set:function(r,t,e,n){return r.setUTCFullYear(e,0,1),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(r,t,e,n){switch(t){case"Q":case"QQ":return Ji(t.length,r);case"Qo":return e.ordinalNumber(r,{unit:"quarter"});case"QQQ":return e.quarter(r,{width:"abbreviated",context:"formatting"})||e.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return e.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(r,{width:"wide",context:"formatting"})||e.quarter(r,{width:"abbreviated",context:"formatting"})||e.quarter(r,{width:"narrow",context:"formatting"})}},validate:function(r,t,e){return t>=1&&t<=4},set:function(r,t,e,n){return r.setUTCMonth((e-1)*3,1),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(r,t,e,n){switch(t){case"q":case"qq":return Ji(t.length,r);case"qo":return e.ordinalNumber(r,{unit:"quarter"});case"qqq":return e.quarter(r,{width:"abbreviated",context:"standalone"})||e.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return e.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(r,{width:"wide",context:"standalone"})||e.quarter(r,{width:"abbreviated",context:"standalone"})||e.quarter(r,{width:"narrow",context:"standalone"})}},validate:function(r,t,e){return t>=1&&t<=4},set:function(r,t,e,n){return r.setUTCMonth((e-1)*3,1),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(r,t,e,n){var i=function(a){return a-1};switch(t){case"M":return $i(la.month,r,i);case"MM":return Ji(2,r,i);case"Mo":return e.ordinalNumber(r,{unit:"month",valueCallback:i});case"MMM":return e.month(r,{width:"abbreviated",context:"formatting"})||e.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return e.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(r,{width:"wide",context:"formatting"})||e.month(r,{width:"abbreviated",context:"formatting"})||e.month(r,{width:"narrow",context:"formatting"})}},validate:function(r,t,e){return t>=0&&t<=11},set:function(r,t,e,n){return r.setUTCMonth(e,1),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(r,t,e,n){var i=function(a){return a-1};switch(t){case"L":return $i(la.month,r,i);case"LL":return Ji(2,r,i);case"Lo":return e.ordinalNumber(r,{unit:"month",valueCallback:i});case"LLL":return e.month(r,{width:"abbreviated",context:"standalone"})||e.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return e.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(r,{width:"wide",context:"standalone"})||e.month(r,{width:"abbreviated",context:"standalone"})||e.month(r,{width:"narrow",context:"standalone"})}},validate:function(r,t,e){return t>=0&&t<=11},set:function(r,t,e,n){return r.setUTCMonth(e,1),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(r,t,e,n){switch(t){case"w":return $i(la.week,r);case"wo":return e.ordinalNumber(r,{unit:"week"});default:return Ji(t.length,r)}},validate:function(r,t,e){return t>=1&&t<=53},set:function(r,t,e,n){return Zd(XHe(r,e,n),n)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(r,t,e,n){switch(t){case"I":return $i(la.week,r);case"Io":return e.ordinalNumber(r,{unit:"week"});default:return Ji(t.length,r)}},validate:function(r,t,e){return t>=1&&t<=53},set:function(r,t,e,n){return Fp(YHe(r,e,n),n)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(r,t,e,n){switch(t){case"d":return $i(la.date,r);case"do":return e.ordinalNumber(r,{unit:"date"});default:return Ji(t.length,r)}},validate:function(r,t,e){var n=r.getUTCFullYear(),i=yq(n),a=r.getUTCMonth();return i?t>=1&&t<=JHe[a]:t>=1&&t<=QHe[a]},set:function(r,t,e,n){return r.setUTCDate(e),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(r,t,e,n){switch(t){case"D":case"DD":return $i(la.dayOfYear,r);case"Do":return e.ordinalNumber(r,{unit:"date"});default:return Ji(t.length,r)}},validate:function(r,t,e){var n=r.getUTCFullYear(),i=yq(n);return i?t>=1&&t<=366:t>=1&&t<=365},set:function(r,t,e,n){return r.setUTCMonth(0,e),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(r,t,e,n){switch(t){case"E":case"EE":case"EEE":return e.day(r,{width:"abbreviated",context:"formatting"})||e.day(r,{width:"short",context:"formatting"})||e.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return e.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(r,{width:"short",context:"formatting"})||e.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return e.day(r,{width:"wide",context:"formatting"})||e.day(r,{width:"abbreviated",context:"formatting"})||e.day(r,{width:"short",context:"formatting"})||e.day(r,{width:"narrow",context:"formatting"})}},validate:function(r,t,e){return t>=0&&t<=6},set:function(r,t,e,n){return r=lP(r,e,n),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(r,t,e,n){var i=function(a){var o=Math.floor((a-1)/7)*7;return(a+n.weekStartsOn+6)%7+o};switch(t){case"e":case"ee":return Ji(t.length,r,i);case"eo":return e.ordinalNumber(r,{unit:"day",valueCallback:i});case"eee":return e.day(r,{width:"abbreviated",context:"formatting"})||e.day(r,{width:"short",context:"formatting"})||e.day(r,{width:"narrow",context:"formatting"});case"eeeee":return e.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(r,{width:"short",context:"formatting"})||e.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return e.day(r,{width:"wide",context:"formatting"})||e.day(r,{width:"abbreviated",context:"formatting"})||e.day(r,{width:"short",context:"formatting"})||e.day(r,{width:"narrow",context:"formatting"})}},validate:function(r,t,e){return t>=0&&t<=6},set:function(r,t,e,n){return r=lP(r,e,n),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(r,t,e,n){var i=function(a){var o=Math.floor((a-1)/7)*7;return(a+n.weekStartsOn+6)%7+o};switch(t){case"c":case"cc":return Ji(t.length,r,i);case"co":return e.ordinalNumber(r,{unit:"day",valueCallback:i});case"ccc":return e.day(r,{width:"abbreviated",context:"standalone"})||e.day(r,{width:"short",context:"standalone"})||e.day(r,{width:"narrow",context:"standalone"});case"ccccc":return e.day(r,{width:"narrow",context:"standalone"});case"cccccc":return e.day(r,{width:"short",context:"standalone"})||e.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return e.day(r,{width:"wide",context:"standalone"})||e.day(r,{width:"abbreviated",context:"standalone"})||e.day(r,{width:"short",context:"standalone"})||e.day(r,{width:"narrow",context:"standalone"})}},validate:function(r,t,e){return t>=0&&t<=6},set:function(r,t,e,n){return r=lP(r,e,n),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(r,t,e,n){var i=function(a){return a===0?7:a};switch(t){case"i":case"ii":return Ji(t.length,r);case"io":return e.ordinalNumber(r,{unit:"day"});case"iii":return e.day(r,{width:"abbreviated",context:"formatting",valueCallback:i})||e.day(r,{width:"short",context:"formatting",valueCallback:i})||e.day(r,{width:"narrow",context:"formatting",valueCallback:i});case"iiiii":return e.day(r,{width:"narrow",context:"formatting",valueCallback:i});case"iiiiii":return e.day(r,{width:"short",context:"formatting",valueCallback:i})||e.day(r,{width:"narrow",context:"formatting",valueCallback:i});case"iiii":default:return e.day(r,{width:"wide",context:"formatting",valueCallback:i})||e.day(r,{width:"abbreviated",context:"formatting",valueCallback:i})||e.day(r,{width:"short",context:"formatting",valueCallback:i})||e.day(r,{width:"narrow",context:"formatting",valueCallback:i})}},validate:function(r,t,e){return t>=1&&t<=7},set:function(r,t,e,n){return r=jHe(r,e,n),r.setUTCHours(0,0,0,0),r},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(r,t,e,n){switch(t){case"a":case"aa":case"aaa":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"})||e.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})||e.dayPeriod(r,{width:"abbreviated",context:"formatting"})||e.dayPeriod(r,{width:"narrow",context:"formatting"})}},set:function(r,t,e,n){return r.setUTCHours(uP(e),0,0,0),r},incompatibleTokens:["b","B","H","K","k","t","T"]},b:{priority:80,parse:function(r,t,e,n){switch(t){case"b":case"bb":case"bbb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"})||e.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})||e.dayPeriod(r,{width:"abbreviated",context:"formatting"})||e.dayPeriod(r,{width:"narrow",context:"formatting"})}},set:function(r,t,e,n){return r.setUTCHours(uP(e),0,0,0),r},incompatibleTokens:["a","B","H","K","k","t","T"]},B:{priority:80,parse:function(r,t,e,n){switch(t){case"B":case"BB":case"BBB":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"})||e.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})||e.dayPeriod(r,{width:"abbreviated",context:"formatting"})||e.dayPeriod(r,{width:"narrow",context:"formatting"})}},set:function(r,t,e,n){return r.setUTCHours(uP(e),0,0,0),r},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(r,t,e,n){switch(t){case"h":return $i(la.hour12h,r);case"ho":return e.ordinalNumber(r,{unit:"hour"});default:return Ji(t.length,r)}},validate:function(r,t,e){return t>=1&&t<=12},set:function(r,t,e,n){var i=r.getUTCHours()>=12;return i&&e<12?r.setUTCHours(e+12,0,0,0):!i&&e===12?r.setUTCHours(0,0,0,0):r.setUTCHours(e,0,0,0),r},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(r,t,e,n){switch(t){case"H":return $i(la.hour23h,r);case"Ho":return e.ordinalNumber(r,{unit:"hour"});default:return Ji(t.length,r)}},validate:function(r,t,e){return t>=0&&t<=23},set:function(r,t,e,n){return r.setUTCHours(e,0,0,0),r},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(r,t,e,n){switch(t){case"K":return $i(la.hour11h,r);case"Ko":return e.ordinalNumber(r,{unit:"hour"});default:return Ji(t.length,r)}},validate:function(r,t,e){return t>=0&&t<=11},set:function(r,t,e,n){var i=r.getUTCHours()>=12;return i&&e<12?r.setUTCHours(e+12,0,0,0):r.setUTCHours(e,0,0,0),r},incompatibleTokens:["a","b","h","H","k","t","T"]},k:{priority:70,parse:function(r,t,e,n){switch(t){case"k":return $i(la.hour24h,r);case"ko":return e.ordinalNumber(r,{unit:"hour"});default:return Ji(t.length,r)}},validate:function(r,t,e){return t>=1&&t<=24},set:function(r,t,e,n){var i=e<=24?e%24:e;return r.setUTCHours(i,0,0,0),r},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(r,t,e,n){switch(t){case"m":return $i(la.minute,r);case"mo":return e.ordinalNumber(r,{unit:"minute"});default:return Ji(t.length,r)}},validate:function(r,t,e){return t>=0&&t<=59},set:function(r,t,e,n){return r.setUTCMinutes(e,0,0),r},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(r,t,e,n){switch(t){case"s":return $i(la.second,r);case"so":return e.ordinalNumber(r,{unit:"second"});default:return Ji(t.length,r)}},validate:function(r,t,e){return t>=0&&t<=59},set:function(r,t,e,n){return r.setUTCSeconds(e,0),r},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(r,t,e,n){var i=function(a){return Math.floor(a*Math.pow(10,-t.length+3))};return Ji(t.length,r,i)},set:function(r,t,e,n){return r.setUTCMilliseconds(e),r},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(r,t,e,n){switch(t){case"X":return Ql(Zl.basicOptionalMinutes,r);case"XX":return Ql(Zl.basic,r);case"XXXX":return Ql(Zl.basicOptionalSeconds,r);case"XXXXX":return Ql(Zl.extendedOptionalSeconds,r);case"XXX":default:return Ql(Zl.extended,r)}},set:function(r,t,e,n){return t.timestampIsSet?r:new Date(r.getTime()-e)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(r,t,e,n){switch(t){case"x":return Ql(Zl.basicOptionalMinutes,r);case"xx":return Ql(Zl.basic,r);case"xxxx":return Ql(Zl.basicOptionalSeconds,r);case"xxxxx":return Ql(Zl.extendedOptionalSeconds,r);case"xxx":default:return Ql(Zl.extended,r)}},set:function(r,t,e,n){return t.timestampIsSet?r:new Date(r.getTime()-e)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(r,t,e,n){return gq(r)},set:function(r,t,e,n){return[new Date(e*1e3),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(r,t,e,n){return gq(r)},set:function(r,t,e,n){return[new Date(e),{timestampIsSet:!0}]},incompatibleTokens:"*"}},tWe=eWe,rWe=10,nWe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,iWe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,aWe=/^'([^]*?)'?$/,oWe=/''/g,sWe=/\S/,lWe=/[a-zA-Z]/;function uWe(r,t,e,n){Vr(3,arguments);var i=String(r),a=String(t),o=n||{},s=o.locale||OI;if(!s.match)throw new RangeError("locale must contain match property");var l=s.options&&s.options.firstWeekContainsDate,u=l==null?1:kn(l),c=o.firstWeekContainsDate==null?u:kn(o.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=s.options&&s.options.weekStartsOn,d=f==null?0:kn(f),h=o.weekStartsOn==null?d:kn(o.weekStartsOn);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(a==="")return i===""?en(e):new Date(NaN);var v={firstWeekContainsDate:c,weekStartsOn:h,locale:s},p=[{priority:rWe,subPriority:-1,set:cWe,index:0}],g,m=a.match(iWe).map(function(L){var O=L[0];if(O==="p"||O==="P"){var B=hq[O];return B(L,s.formatLong,v)}return L}).join("").match(nWe),y=[];for(g=0;g<m.length;g++){var b=m[g];!o.useAdditionalWeekYearTokens&&pq(b)&&sC(b,a,r),!o.useAdditionalDayOfYearTokens&&vq(b)&&sC(b,a,r);var x=b[0],w=tWe[x];if(w){var S=w.incompatibleTokens;if(Array.isArray(S)){for(var C=void 0,_=0;_<y.length;_++){var T=y[_].token;if(S.indexOf(T)!==-1||T===x){C=y[_];break}}if(C)throw new RangeError("The format string mustn't contain `".concat(C.fullToken,"` and `").concat(b,"` at the same time"))}else if(w.incompatibleTokens==="*"&&y.length)throw new RangeError("The format string mustn't contain `".concat(b,"` and any other token at the same time"));y.push({token:x,fullToken:b});var E=w.parse(i,b,s.match,v);if(!E)return new Date(NaN);p.push({priority:w.priority,subPriority:w.subPriority||0,set:w.set,validate:w.validate,value:E.value,index:p.length}),i=E.rest}else{if(x.match(lWe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");if(b==="''"?b="'":x==="'"&&(b=fWe(b)),i.indexOf(b)===0)i=i.slice(b.length);else return new Date(NaN)}}if(i.length>0&&sWe.test(i))return new Date(NaN);var M=p.map(function(L){return L.priority}).sort(function(L,O){return O-L}).filter(function(L,O,B){return B.indexOf(L)===O}).map(function(L){return p.filter(function(O){return O.priority===L}).sort(function(O,B){return B.subPriority-O.subPriority})}).map(function(L){return L[0]}),k=en(e);if(isNaN(k))return new Date(NaN);var P=aq(k,nq(k)),F={};for(g=0;g<M.length;g++){var $=M[g];if($.validate&&!$.validate(P,$.value,v))return new Date(NaN);var R=$.set(P,F,$.value,v);R[0]?(P=R[0],VHe(F,R[1])):P=R}return P}function cWe(r,t){if(t.timestampIsSet)return r;var e=new Date(0);return e.setFullYear(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()),e.setHours(r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()),e}function fWe(r){return r.match(aWe)[1].replace(oWe,"'")}function dWe(r){Vr(1,arguments);var t=en(r);return t.setMinutes(0,0,0),t}function fC(r,t){Vr(2,arguments);var e=en(r),n=en(t);return e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()}function cP(r){Vr(1,arguments);var t=en(r);return t.setMilliseconds(0),t}function bq(r,t){Vr(2,arguments);var e=en(r),n=en(t);return e.getFullYear()===n.getFullYear()}function hWe(r,t){Vr(2,arguments);var e=en(r),n=kn(t),i=e.getFullYear(),a=e.getDate(),o=new Date(0);o.setFullYear(i,n,15),o.setHours(0,0,0,0);var s=WHe(o);return e.setMonth(n,Math.min(a,s)),e}function Gs(r,t){if(Vr(2,arguments),typeof t!="object"||t===null)throw new RangeError("values parameter must be an object");var e=en(r);return isNaN(e.getTime())?new Date(NaN):(t.year!=null&&e.setFullYear(t.year),t.month!=null&&(e=hWe(e,t.month)),t.date!=null&&e.setDate(kn(t.date)),t.hours!=null&&e.setHours(kn(t.hours)),t.minutes!=null&&e.setMinutes(kn(t.minutes)),t.seconds!=null&&e.setSeconds(kn(t.seconds)),t.milliseconds!=null&&e.setMilliseconds(kn(t.milliseconds)),e)}function ch(r,t){Vr(2,arguments);var e=en(r),n=kn(t);return e.setHours(n),e}function fP(r,t){Vr(2,arguments);var e=en(r),n=kn(t);return e.setMinutes(n),e}function dP(r,t){Vr(2,arguments);var e=en(r),n=kn(t);return e.setSeconds(n),e}const xq=1901,hP=40,vWe={date:"yyyy-MM-dd",datetime:"yyyy-MM-dd HH:mm:ss",daterange:"yyyy-MM-dd",datetimerange:"yyyy-MM-dd HH:mm:ss",month:"yyyy-MM",year:"yyyy"},pWe={date:wHe,month:fC,year:bq};function Bp(r,t,e="date"){const n=pWe[e];return Array.isArray(r)?r.some(i=>n(i,t)):n(r,t)}function vP(r,t,e,n){let i=!1,a=!1,o=!1;return Array.isArray(e)&&(e[0]<r&&r<e[1]&&(i=!0),Bp(e[0],r)&&(a=!0),Bp(e[1],r)&&(o=!0)),{type:"date",dateObject:{date:ll(r),month:Sa(r),year:za(r)},inCurrentMonth:fC(r,t),isCurrentDate:Bp(n,r),inSpan:i,startOfSpan:a,endOfSpan:o,selected:e!==null&&Bp(e,r),ts:tr(r)}}function gWe(r,t,e){return{type:"month",dateObject:{month:Sa(r),year:za(r)},isCurrentMonth:fC(e,r),selected:t!==null&&Bp(t,r,"month"),ts:tr(r)}}function mWe(r,t,e){return{type:"year",dateObject:{year:za(r)},isCurrentYear:bq(e,r),selected:t!==null&&Bp(t,r,"year"),ts:tr(r)}}function pP(r,t,e,n,i=!1){const a=Sa(r);let o=tr(of(r)),s=tr(aC(o,-1));const l=[];let u=!i;for(;HHe(s)!==n||u;)l.unshift(vP(s,r,t,e)),s=tr(aC(s,-1)),u=!1;for(;Sa(o)===a;)l.push(vP(o,r,t,e)),o=tr(aC(o,1));const c=i?l.length<=28?28:l.length<=35?35:42:42;for(;l.length<c;)l.push(vP(o,r,t,e)),o=tr(aC(o,1));return l}function yWe(r,t,e){const n=[],i=iq(r);for(let a=0;a<12;a++)n.push(gWe(tr(vo(i,a)),t,e));return n}function bWe(r,t,e){const n=[],i=new Date(xq,0,1);for(let a=0;a<200;a++)n.push(mWe(tr(oP(i,a)),t,e));return n}function Jl(r,t,e,n){const i=uWe(r,t,e,n);return zs(i)?li(i,t,n)===r?i:new Date(NaN):i}var xWe={paddingSmall:"12px 16px 12px",paddingMedium:"19px 24px 20px",paddingLarge:"23px 32px 24px",paddingHuge:"27px 40px 28px",titleFontSizeSmall:"16px",titleFontSizeMedium:"18px",titleFontSizeLarge:"18px",titleFontSizeHuge:"18px",closeSize:"18px"};const wWe=r=>{const{primaryColor:t,borderRadius:e,lineHeight:n,fontSize:i,cardColor:a,textColor2:o,textColor1:s,dividerColor:l,fontWeightStrong:u,closeColor:c,closeColorHover:f,closeColorPressed:d,modalColor:h,boxShadow1:v,popoverColor:p,actionColor:g}=r;return Object.assign(Object.assign({},xWe),{lineHeight:n,color:a,colorModal:h,colorPopover:p,colorTarget:t,colorEmbedded:g,textColor:o,titleTextColor:s,borderColor:l,actionColor:g,titleFontWeight:u,closeColor:c,closeColorHover:f,closeColorPressed:d,fontSizeSmall:i,fontSizeMedium:i,fontSizeLarge:i,fontSizeHuge:i,boxShadow:v,borderRadius:e})},SWe={name:"Card",common:Wn,self:wWe};var wq=SWe,CWe=_e([de("card",`
 font-size: var(--font-size);
 line-height: var(--line-height);
 display: flex;
 flex-direction: column;
 width: 100%;
 box-sizing: border-box;
 position: relative;
 border-radius: var(--border-radius);
 background-color: var(--color);
 color: var(--text-color);
 transition: 
 color .3s var(--bezier),
 background-color .3s var(--bezier),
 box-shadow .3s var(--bezier),
 border-color .3s var(--bezier);
 `,[Ge("hoverable",[_e("&:hover","box-shadow: var(--box-shadow);")]),Ge("content-segmented",[_e(">",[Se("content",{paddingTop:"var(--padding-bottom)"})])]),Ge("content-soft-segmented",[_e(">",[Se("content",`
 margin: 0 var(--padding-left);
 padding: var(--padding-bottom) 0;
 `)])]),Ge("footer-segmented",[_e(">",[Se("footer",{paddingTop:"var(--padding-bottom)"})])]),Ge("footer-soft-segmented",[_e(">",[Se("footer",`
 padding: var(--padding-bottom) 0;
 margin: 0 var(--padding-left);
 `)])]),_e(">",[de("card-header",`
 box-sizing: border-box;
 display: flex;
 align-items: center;
 font-size: var(--title-font-size);
 padding:
 var(--padding-top)
 var(--padding-left)
 var(--padding-bottom)
 var(--padding-left);
 `,[Se("main",`
 font-weight: var(--title-font-weight);
 transition: color .3s var(--bezier);
 flex: 1;
 color: var(--title-text-color);
 `),Se("extra",`
 display: flex;
 align-items: center;
 font-size: var(--font-size);
 font-weight: 400;
 transition: color .3s var(--bezier);
 color: var(--text-color);
 `),Se("close",`
 font-size: var(--close-size);
 transition: color .3s var(--bezier);
 `)]),Se("action",`
 box-sizing: border-box;
 transition:
 background-color .3s var(--bezier),
 border-color .3s var(--bezier);
 background-clip: padding-box;
 background-color: var(--action-color);
 `),Se("content","flex: 1;"),Se("content, footer",`
 box-sizing: border-box;
 padding: 0 var(--padding-left) var(--padding-bottom) var(--padding-left);
 font-size: var(--font-size);
 `,[_e("&:first-child",{paddingTop:"var(--padding-bottom)"})]),Se("action",`
 background-color: var(--action-color);
 padding: var(--padding-bottom) var(--padding-left);
 `)]),de("card-cover",`
 overflow: hidden;
 width: 100%;
 border-radius: var(--border-radius) var(--border-radius) 0 0;
 `,[_e("img",`
 display: block;
 width: 100%;
 `)]),Ge("bordered",`
 border: 1px solid var(--border-color);
 `,[_e("&:target","border-color: var(--color-target);")]),Ge("action-segmented",[_e(">",[Se("action",[_e("&:not(:first-child)",{borderTop:"1px solid var(--border-color)"})])])]),Ge("content-segmented, content-soft-segmented",[_e(">",[Se("content",{transition:"border-color 0.3s var(--bezier)"},[_e("&:not(:first-child)",{borderTop:"1px solid var(--border-color)"})])])]),Ge("footer-segmented, footer-soft-segmented",[_e(">",[Se("footer",{transition:"border-color 0.3s var(--bezier)"},[_e("&:not(:first-child)",{borderTop:"1px solid var(--border-color)"})])])])]),o0(de("card",{background:"var(--color-modal)"})),VS(de("card",{background:"var(--color-popover)"})),de("card",[qY({background:"var(--color-modal)"})])]);const gP={title:String,contentStyle:[Object,String],headerStyle:[Object,String],footerStyle:[Object,String],embedded:Boolean,segmented:{type:[Boolean,Object],default:!1},size:{type:String,default:"medium"},bordered:{type:Boolean,default:!0},closable:{type:Boolean,default:!1},hoverable:Boolean,onClose:[Function,Array]},EWe=ef(gP),_We=Object.assign(Object.assign({},rr.props),gP);var TWe=xt({name:"Card",props:_We,setup(r){const t=()=>{const{onClose:o}=r;o&&Tt(o)},{mergedClsPrefixRef:e,NConfigProvider:n}=mn(r),i=rr("Card","Card",CWe,wq,r,e);return{rtlEnabled:nP("Card",n==null?void 0:n.mergedRtlRef,e),mergedClsPrefix:e,mergedTheme:i,handleCloseClick:t,cssVars:re(()=>{const{size:o}=r,{self:{color:s,colorModal:l,colorTarget:u,textColor:c,titleTextColor:f,titleFontWeight:d,borderColor:h,actionColor:v,borderRadius:p,closeColor:g,closeColorHover:m,closeColorPressed:y,lineHeight:b,closeSize:x,boxShadow:w,colorPopover:S,colorEmbedded:C,[Ot("padding",o)]:_,[Ot("fontSize",o)]:T,[Ot("titleFontSize",o)]:E},common:{cubicBezierEaseInOut:M}}=i.value,{top:k,left:P,bottom:F}=LS(_);return{"--bezier":M,"--border-radius":p,"--color":r.embedded?C:s,"--color-modal":l,"--color-popover":S,"--color-target":u,"--text-color":c,"--line-height":b,"--action-color":v,"--title-text-color":f,"--title-font-weight":d,"--close-color":g,"--close-color-hover":m,"--close-color-pressed":y,"--border-color":h,"--box-shadow":w,"--padding-top":k,"--padding-bottom":F,"--padding-left":P,"--font-size":T,"--title-font-size":E,"--close-size":x}})}},render(){const{segmented:r,bordered:t,hoverable:e,mergedClsPrefix:n,rtlEnabled:i,$slots:a}=this;return I("div",{class:[`${n}-card`,{[`${n}-card--rtl`]:i,[`${n}-card--content${typeof r!="boolean"&&r.content==="soft"?"-soft":""}-segmented`]:r===!0||r!==!1&&r.content,[`${n}-card--footer${typeof r!="boolean"&&r.footer==="soft"?"-soft":""}-segmented`]:r===!0||r!==!1&&r.footer,[`${n}-card--action-segmented`]:r===!0||r!==!1&&r.action,[`${n}-card--bordered`]:t,[`${n}-card--hoverable`]:e}],style:this.cssVars},a.cover?I("div",{class:`${n}-card-cover`,role:"none"},qr(a,"cover")):null,a.header||this.title||this.closable?I("div",{class:`${n}-card-header`,style:this.headerStyle},I("div",{class:`${n}-card-header__main`,role:"heading"},qr(a,"header",{},()=>[this.title])),a["header-extra"]?I("div",{class:`${n}-card-header__extra`},qr(a,"header-extra")):null,this.closable?I(zI,{clsPrefix:n,class:`${n}-card-header__close`,onClick:this.handleCloseClick}):null):null,I("div",{class:`${n}-card__content`,style:this.contentStyle,role:"none"},a),a.footer?I("div",{class:`${n}-card__footer`,style:this.footerStyle,role:"none"},qr(a,"footer")):null,a.action?I("div",{class:`${n}-card__action`,role:"none"},qr(a,"action")):null)}}),AWe={sizeSmall:"14px",sizeMedium:"16px",sizeLarge:"18px",labelPadding:"0 8px"};const MWe=r=>{const{baseColor:t,inputColorDisabled:e,cardColor:n,modalColor:i,popoverColor:a,textColorDisabled:o,borderColor:s,primaryColor:l,textColor2:u,fontSizeSmall:c,fontSizeMedium:f,fontSizeLarge:d,borderRadiusSmall:h}=r;return Object.assign(Object.assign({},AWe),{fontSizeSmall:c,fontSizeMedium:f,fontSizeLarge:d,borderRadius:h,color:t,colorChecked:l,colorDisabled:e,colorDisabledChecked:e,colorTableHeader:n,colorTableHeaderModal:i,colorTableHeaderPopover:a,checkMarkColor:t,checkMarkColorDisabled:o,checkMarkColorDisabledChecked:o,border:`1px solid ${s}`,borderDisabled:`1px solid ${s}`,borderDisabledChecked:`1px solid ${s}`,borderChecked:`1px solid ${l}`,borderFocus:`1px solid ${l}`,boxShadowFocus:`0 0 0 2px ${jr(l,{alpha:.3})}`,textColor:u,textColorDisabled:o})},kWe={name:"Checkbox",common:Wn,self:MWe};var Sq=kWe,IWe=I("svg",{viewBox:"0 0 64 64",class:"check-icon"},I("path",{d:"M50.42,16.76L22.34,39.45l-8.1-11.46c-1.12-1.58-3.3-1.96-4.88-0.84c-1.58,1.12-1.95,3.3-0.84,4.88l10.26,14.51  c0.56,0.79,1.42,1.31,2.38,1.45c0.16,0.02,0.32,0.03,0.48,0.03c0.8,0,1.57-0.27,2.2-0.78l30.99-25.03c1.5-1.21,1.74-3.42,0.52-4.92  C54.13,15.78,51.93,15.55,50.42,16.76z"})),PWe=I("svg",{viewBox:"0 0 100 100",class:"line-icon"},I("path",{d:"M80.2,55.5H21.4c-2.8,0-5.1-2.5-5.1-5.5l0,0c0-3,2.3-5.5,5.1-5.5h58.7c2.8,0,5.1,2.5,5.1,5.5l0,0C85.2,53.1,82.9,55.5,80.2,55.5z"}));const Cq=Symbol("checkboxGroup"),DWe={min:Number,max:Number,size:String,value:Array,defaultValue:{type:Array,default:null},disabled:{type:Boolean,default:void 0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:{type:[Function,Array],validator:()=>!0,default:void 0}};var RWe=xt({name:"CheckboxGroup",props:DWe,setup(r){const{mergedClsPrefixRef:t}=mn(r),e=Xl(r),{mergedSizeRef:n,mergedDisabledRef:i}=e,a=Oe(r.defaultValue),o=re(()=>r.value),s=Qi(o,a),l=re(()=>{var f;return((f=s.value)===null||f===void 0?void 0:f.length)||0}),u=re(()=>Array.isArray(s.value)?new Set(s.value):new Set);function c(f,d){const{nTriggerFormInput:h,nTriggerFormChange:v}=e,{onChange:p,"onUpdate:value":g,onUpdateValue:m}=r;if(Array.isArray(s.value)){const y=Array.from(s.value),b=y.findIndex(x=>x===d);f?~b||(y.push(d),m&&Tt(m,y),g&&Tt(g,y),h(),v(),a.value=y,p&&Tt(p,y)):~b&&(y.splice(b,1),m&&Tt(m,y),g&&Tt(g,y),p&&Tt(p,y),a.value=y,h(),v())}else f?(m&&Tt(m,[d]),g&&Tt(g,[d]),p&&Tt(p,[d]),a.value=[d],h(),v()):(m&&Tt(m,[]),g&&Tt(g,[]),p&&Tt(p,[]),a.value=[],h(),v())}return rn(Cq,{checkedCountRef:l,maxRef:Kt(r,"max"),minRef:Kt(r,"min"),valueSetRef:u,disabledRef:i,mergedSizeRef:n,toggleCheckbox:c}),{mergedClsPrefix:t}},render(){return I("div",{class:`${this.mergedClsPrefix}-checkbox-group`,role:"group"},this.$slots)}}),OWe=_e([de("checkbox",`
 line-height: 1;
 font-size: var(--font-size);
 outline: none;
 cursor: pointer;
 display: inline-flex;
 align-items: center;
 white-space: nowrap;
 vertical-align: middle;
 --merged-color-table-header: var(--color-table-header);
 `,[_e("&:hover",[de("checkbox-box",[Se("border",{border:"var(--border-checked)"})])]),_e("&:focus:not(:active)",[de("checkbox-box",[Se("border",{border:"var(--border-focus)",boxShadow:"var(--box-shadow-focus)"})])]),Ge("table-header",[de("checkbox-box",{backgroundColor:"var(--merged-color-table-header)"})]),Ge("checked",[de("checkbox-box",{backgroundColor:"var(--color-checked)"},[de("checkbox-icon",[_e(".check-icon",`
 width: 100%;
 opacity: 1;
 transform: scale(1);
 `)])])]),Ge("indeterminate",[de("checkbox-box",[de("checkbox-icon",[_e(".check-icon",`
 opacity: 0;
 transform: scale(.5);
 `),_e(".line-icon",`
 opacity: 1;
 transform: scale(1);
 `)])])]),Ge("checked, indeterminate",[_e("&:focus:not(:active)",[de("checkbox-box",[Se("border",{border:"var(--border-checked)",boxShadow:"var(--box-shadow-focus)"})])]),de("checkbox-box",`
 background-color: var(--color-checked);
 border-left: 0;
 border-top: 0;
 `,[Se("border",{border:"var(--border-checked)"})])]),Ge("disabled",{cursor:"not-allowed"},[Ge("checked",[de("checkbox-box",`
 background-color: var(--color-disabled-checked);
 `,[Se("border",{border:"var(--border-disabled-checked)"}),de("checkbox-icon",[_e(".check-icon, .line-icon",{fill:"var(--check-mark-color-disabled-checked)"})])])]),de("checkbox-box",`
 background-color: var(--color-disabled);
 `,[Se("border",{border:"var(--border-disabled)"}),de("checkbox-icon",[_e(".check-icon, .line-icon",{fill:"var(--check-mark-color-disabled)"})])]),Se("label",{color:"var(--text-color-disabled)"})]),de("checkbox-box",`
 height: var(--size);
 width: var(--size);
 display: inline-block;
 box-sizing: border-box;
 border-radius: var(--border-radius);
 background-color: var(--color);
 position: relative;
 transition:
 background-color 0.3s var(--bezier);
 `,[Se("border",`
 transition:
 border-color .3s var(--bezier),
 box-shadow .3s var(--bezier);
 border-radius: inherit;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border: var(--border);
 `),de("checkbox-icon",`
 display: flex;
 align-items: center;
 justify-content: center;
 position: absolute;
 left: 1px;
 right: 1px;
 top: 1px;
 bottom: 1px;
 `,[_e(".check-icon, .line-icon",`
 fill: var(--check-mark-color);
 opacity: 0;
 transform: scale(0.5);
 transform-origin: center;
 transition:
 fill 0.3s var(--bezier),
 transform 0.3s var(--bezier),
 opacity 0.3s var(--bezier),
 border-color 0.3s var(--bezier);
 `),f0({left:"1px",top:"1px"})])]),Se("label",`
 color: var(--text-color);
 transition: color .3s var(--bezier);
 user-select: none;
 padding: var(--label-padding);
 `,[_e("&:empty",{display:"none"})])]),o0(de("checkbox",`
 --merged-color-table-header: var(--color-table-header-modal);
 `)),VS(de("checkbox",`
 --merged-color-table-header: var(--color-table-header-popover);
 `))]);const LWe=Object.assign(Object.assign({},rr.props),{size:String,checked:{type:[Boolean,String,Number],default:void 0},defaultChecked:{type:[Boolean,String,Number],default:!1},value:[String,Number],disabled:{type:Boolean,default:void 0},indeterminate:Boolean,label:String,focusable:{type:Boolean,default:!0},checkedValue:{type:[Boolean,String,Number],default:!0},uncheckedValue:{type:[Boolean,String,Number],default:!1},"onUpdate:checked":[Function,Array],onUpdateChecked:[Function,Array],privateInsideTable:Boolean,onChange:[Function,Array]});var mP=xt({name:"Checkbox",props:LWe,setup(r){const{mergedClsPrefixRef:t}=mn(r),e=Xl(r,{mergedSize(p){const{size:g}=r;if(g!==void 0)return g;if(a){const{value:m}=a.mergedSizeRef;if(m!==void 0)return m}if(p){const{mergedSize:m}=p;if(m!==void 0)return m.value}return"medium"},mergedDisabled(p){const{disabled:g}=r;if(g!==void 0)return g;if(a){if(a.disabledRef.value)return!0;const{maxRef:{value:m},checkedCountRef:y}=a;if(m!==void 0&&y.value>=m&&!u.value)return!0;const{minRef:{value:b}}=a;if(b!==void 0&&y.value<=b&&u.value)return!0}return p?p.disabled.value:!1}}),{mergedDisabledRef:n,mergedSizeRef:i}=e,a=or(Cq,null),o=Oe(r.defaultChecked),s=Kt(r,"checked"),l=Qi(s,o),u=xi(()=>{if(a){const p=a.valueSetRef.value;return p&&r.value!==void 0?p.has(r.value):!1}else return l.value===r.checkedValue}),c=rr("Checkbox","Checkbox",OWe,Sq,r,t);function f(p){if(a&&r.value!==void 0)a.toggleCheckbox(!u.value,r.value);else{const{onChange:g,"onUpdate:checked":m,onUpdateChecked:y}=r,{nTriggerFormInput:b,nTriggerFormChange:x}=e,w=u.value?r.uncheckedValue:r.checkedValue;m&&Tt(m,w,p),y&&Tt(y,w,p),g&&Tt(g,w,p),b(),x(),o.value=w}}function d(p){n.value||f(p)}function h(p){if(!n.value)switch(p.code){case"Space":case"Enter":case"NumpadEnter":f(p)}}function v(p){switch(p.code){case"Space":p.preventDefault()}}return Object.assign(e,{mergedClsPrefix:t,mergedDisabled:n,renderedChecked:u,mergedTheme:c,labelId:e0(),handleClick:d,handleKeyUp:h,handleKeyDown:v,cssVars:re(()=>{const{value:p}=i,{common:{cubicBezierEaseInOut:g},self:{borderRadius:m,color:y,colorChecked:b,colorDisabled:x,colorTableHeader:w,colorTableHeaderModal:S,colorTableHeaderPopover:C,checkMarkColor:_,checkMarkColorDisabled:T,border:E,borderFocus:M,borderDisabled:k,borderChecked:P,boxShadowFocus:F,textColor:$,textColorDisabled:R,checkMarkColorDisabledChecked:L,colorDisabledChecked:O,borderDisabledChecked:B,labelPadding:U,[Ot("fontSize",p)]:W,[Ot("size",p)]:X}}=c.value;return{"--size":X,"--bezier":g,"--border-radius":m,"--border":E,"--border-checked":P,"--border-focus":M,"--border-disabled":k,"--border-disabled-checked":B,"--box-shadow-focus":F,"--color":y,"--color-checked":b,"--color-table-header":w,"--color-table-header-modal":S,"--color-table-header-popover":C,"--color-disabled":x,"--color-disabled-checked":O,"--text-color":$,"--text-color-disabled":R,"--check-mark-color":_,"--check-mark-color-disabled":T,"--check-mark-color-disabled-checked":L,"--font-size":W,"--label-padding":U}})})},render(){const{$slots:r,renderedChecked:t,mergedDisabled:e,indeterminate:n,privateInsideTable:i,cssVars:a,labelId:o,label:s,mergedClsPrefix:l,focusable:u,handleKeyUp:c,handleKeyDown:f,handleClick:d}=this;return I("div",{class:[`${l}-checkbox`,t&&`${l}-checkbox--checked`,e&&`${l}-checkbox--disabled`,n&&`${l}-checkbox--indeterminate`,i&&`${l}-checkbox--table-header`],tabindex:e||!u?void 0:0,role:"checkbox","aria-checked":n?"mixed":t,"aria-labelledby":o,style:a,onKeyup:c,onKeydown:f,onClick:d,onMousedown:()=>{Fi("selectstart",window,h=>{h.preventDefault()},{once:!0})}},I("div",{class:`${l}-checkbox-box`},I(YS,null,{default:()=>this.indeterminate?I("div",{key:"indeterminate",class:`${l}-checkbox-icon`},PWe):I("div",{key:"check",class:`${l}-checkbox-icon`},IWe)}),I("div",{class:`${l}-checkbox-box__border`})),s!==null||r.default?I("span",{class:`${l}-checkbox__label`,id:o},qr(r,"default",void 0,()=>[s])):null)}});function FWe(r){const{boxShadow2:t}=r;return{menuBoxShadow:t}}const NWe=Go({name:"Select",common:Wn,peers:{InternalSelection:qX,InternalSelectMenu:WX},self:FWe});var Eq=NWe,BWe=_e([de("select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 `),de("select-menu",`
 margin: 4px 0;
 box-shadow: var(--menu-box-shadow);
 `,[nf()])]);const $We=Object.assign(Object.assign({},rr.props),{to:Ao.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:{type:Function,default:dHe},placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:{type:Function,default:r=>({label:r,value:r})},fallbackOption:{type:[Function,Boolean],default:()=>r=>({label:String(r),value:r})},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],onChange:{type:[Function,Array],validator:()=>!0,default:void 0},items:{type:Array,validator:()=>!0,default:void 0},displayDirective:{type:String,default:"show"}});var zWe=xt({name:"Select",props:$We,setup(r){const{mergedClsPrefixRef:t,mergedBorderedRef:e,namespaceRef:n}=mn(r),i=rr("Select","Select",BWe,Eq,r,t),a=Oe(r.defaultValue),o=Kt(r,"value"),s=Qi(o,a),l=Oe(!1),u=Oe(""),c=re(()=>qS(T.value,uHe)),f=re(()=>fHe(_.value)),d=Oe(!1),h=Qi(Kt(r,"show"),d),v=Oe(null),p=Oe(null),g=Oe(null),{localeRef:m}=Qd("Select"),y=re(()=>{var Q;return(Q=r.placeholder)!==null&&Q!==void 0?Q:m.value.placeholder}),b=jS(r,["items","options"]),x=Oe([]),w=Oe([]),S=Oe(new Map),C=re(()=>{const{fallbackOption:Q}=r;return Q?me=>Object.assign(Q(me),{value:me}):!1}),_=re(()=>w.value.concat(x.value).concat(b.value)),T=re(()=>{if(r.remote)return b.value;{const{value:Q}=_,{value:me}=u;if(!me.length||!r.filterable)return Q;{const{filter:He}=r;return cHe(Q,He,me)}}});function E(Q){const me=r.remote,{value:He}=S,{value:ze}=f,{value:it}=C,we=[];return Q.forEach(nt=>{if(ze.has(nt))we.push(ze.get(nt));else if(me&&He.has(nt))we.push(He.get(nt));else if(it){const st=it(nt);st&&we.push(st)}}),we}const M=re(()=>{if(r.multiple){const{value:Q}=s;return Array.isArray(Q)?E(Q):[]}return null}),k=re(()=>{const{value:Q}=s;return!r.multiple&&!Array.isArray(Q)?Q===null?null:E([Q])[0]||null:null}),P=Xl(r),{mergedSizeRef:F,mergedDisabledRef:$}=P;function R(Q,me){const{onChange:He,"onUpdate:value":ze,onUpdateValue:it}=r,{nTriggerFormChange:we,nTriggerFormInput:nt}=P;He&&Tt(He,Q,me),it&&Tt(it,Q,me),ze&&Tt(ze,Q,me),a.value=Q,we(),nt()}function L(Q){const{onBlur:me}=r,{nTriggerFormBlur:He}=P;me&&Tt(me,Q),He()}function O(){const{onClear:Q}=r;Q&&Tt(Q)}function B(Q){const{onFocus:me}=r,{nTriggerFormFocus:He}=P;me&&Tt(me,Q),He()}function U(Q){const{onSearch:me}=r;me&&Tt(me,Q)}function W(Q){const{onScroll:me}=r;me&&Tt(me,Q)}function X(){var Q;const{remote:me,multiple:He}=r;if(me){const{value:ze}=S;if(He)(Q=M.value)===null||Q===void 0||Q.forEach(it=>{ze.set(it.value,it)});else{const it=k.value;it&&ze.set(it.value,it)}}}function ae(Q){const{onUpdateShow:me,"onUpdate:show":He}=r;me&&Tt(me,Q),He&&Tt(He,Q),d.value=Q}function Z(){$.value||(u.value="",ae(!0),d.value=!0,r.filterable&&q())}function Y(){ae(!1)}function fe(){u.value=""}function le(){$.value||(h.value?r.filterable||Y():Z())}function ue(Q){var me,He;((He=(me=g.value)===null||me===void 0?void 0:me.selfRef)===null||He===void 0?void 0:He.contains(Q.relatedTarget))||(l.value=!1,L(Q),Y())}function Ee(Q){B(Q),l.value=!0}function De(Q){l.value=!0}function je(Q){var me;((me=v.value)===null||me===void 0?void 0:me.$el.contains(Q.relatedTarget))||(l.value=!1,L(Q),Y())}function ke(){var Q;(Q=v.value)===null||Q===void 0||Q.focus(),Y()}function D(Q){var me;h.value&&(((me=v.value)===null||me===void 0?void 0:me.$el.contains(Q.target))||Y())}function z(Q){if(!Array.isArray(Q))return[];if(C.value)return Array.from(Q);{const{remote:me}=r,{value:He}=f;if(me){const{value:ze}=S;return Q.filter(it=>He.has(it)||ze.has(it))}else return Q.filter(ze=>He.has(ze))}}function H(Q){he(Q.rawNode)}function he(Q){if($.value)return;const{tag:me,remote:He}=r;if(me&&!He){const{value:ze}=w,it=ze[0]||null;it&&(x.value.push(it),w.value=[])}if(He&&S.value.set(Q.value,Q),r.multiple){const ze=z(s.value),it=ze.findIndex(we=>we===Q.value);if(~it){if(ze.splice(it,1),me&&!He){const we=te(Q.value);~we&&(x.value.splice(we,1),u.value="")}}else ze.push(Q.value),u.value="";R(ze,E(ze))}else{if(me&&!He){const ze=te(Q.value);~ze?x.value=[x.value[ze]]:x.value=[]}j(),Y(),R(Q.value,Q)}}function te(Q){return x.value.findIndex(He=>He.value===Q)}function ge(Q){h.value||Z();const{value:me}=Q.target;u.value=me;const{tag:He,remote:ze}=r;if(U(me),He&&!ze){if(!me){w.value=[];return}const it=r.onCreate(me);b.value.some(we=>we.value===it.value)||x.value.some(we=>we.value===it.value)?w.value=[]:w.value=[it]}}function Qe(Q){Q.stopPropagation();const{multiple:me}=r;!me&&r.filterable&&Y(),O(),me?R([],[]):R(null,null)}function Ve(Q){Vd(Q,"action")||Q.preventDefault()}function Ie(Q){W(Q)}function Be(Q){var me,He,ze,it;switch(Q.code){case"Space":if(r.filterable)break;case"Enter":case"NumpadEnter":if(h.value){const we=(me=g.value)===null||me===void 0?void 0:me.getPendingTmNode();we?H(we):r.filterable||(Y(),j())}else Z();Q.preventDefault();break;case"ArrowUp":if(r.loading)return;h.value&&((He=g.value)===null||He===void 0||He.prev());break;case"ArrowDown":if(r.loading)return;h.value?(ze=g.value)===null||ze===void 0||ze.next():Z();break;case"Escape":Y(),(it=v.value)===null||it===void 0||it.focus();break}}function V(Q){switch(Q.code){case"Space":r.filterable||Q.preventDefault();break;case"ArrowUp":case"ArrowDown":Q.preventDefault();break}}function j(){var Q;(Q=v.value)===null||Q===void 0||Q.focus()}function q(){var Q;(Q=v.value)===null||Q===void 0||Q.focusInput()}function ee(){var Q;(Q=p.value)===null||Q===void 0||Q.syncPosition()}return X(),fn(Kt(r,"options"),X),fn(T,()=>{!h.value||Ha(ee)}),fn(s,()=>{!h.value||Ha(ee)}),{mergedClsPrefix:t,mergedBordered:e,namespace:n,treeMate:c,isMounted:Kd(),triggerRef:v,menuRef:g,pattern:u,uncontrolledShow:d,mergedShow:h,adjustedTo:Ao(r),uncontrolledValue:a,mergedValue:s,followerRef:p,localizedPlaceholder:y,selectedOption:k,selectedOptions:M,mergedSize:F,mergedDisabled:$,focused:l,handleMenuFocus:De,handleMenuBlur:je,handleMenuTabOut:ke,handleTriggerClick:le,handleToggle:H,handleDeleteOption:he,handlePatternInput:ge,handleClear:Qe,handleTriggerBlur:ue,handleTriggerFocus:Ee,handleKeyDown:V,handleKeyUp:Be,syncPosition:ee,handleMenuAfterLeave:fe,handleMenuClickOutside:D,handleMenuScroll:Ie,handleMenuKeyup:Be,handleMenuKeydown:V,handleMenuMousedown:Ve,mergedTheme:i,cssVars:re(()=>{const{self:{menuBoxShadow:Q}}=i.value;return{"--menu-box-shadow":Q}})}},render(){const{$slots:r,mergedClsPrefix:t}=this;return I("div",{class:`${t}-select`},I(d0,null,{default:()=>[I(h0,null,{default:()=>I(ZVe,{ref:"triggerRef",inputProps:this.inputProps,clsPrefix:t,showArrow:this.showArrow,maxTagCount:this.maxTagCount,bordered:this.mergedBordered,active:this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeyDown,onKeyup:this.handleKeyUp})}),I(v0,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===Ao.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>I(Ra,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var e,n;return(this.mergedShow||this.displayDirective==="show")&&pu(I(_Ve,Object.assign({},this.menuProps,{ref:"menuRef",virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:[`${t}-select-menu`,(e=this.menuProps)===null||e===void 0?void 0:e.class],clsPrefix:t,focusable:!0,autoPending:!0,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:"medium",renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[(n=this.menuProps)===null||n===void 0?void 0:n.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeyup:this.handleMenuKeyup,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow}),r),this.displayDirective==="show"?[[Px,this.mergedShow],[ih,this.handleMenuClickOutside]]:[[ih,this.handleMenuClickOutside]])}})})]}))}}),GWe={itemSize:"28px",itemPadding:"0 4px",itemMargin:"0 0 0 8px",buttonIconSize:"16px",inputWidth:"60px",selectWidth:"unset",inputMargin:"0 0 0 8px",selectMargin:"0 0 0 8px",prefixMargin:"0 8px 0 0",suffixMargin:"0 0 0 8px",jumperFontSize:"14px"};const UWe=r=>{const{textColor2:t,primaryColor:e,primaryColorHover:n,primaryColorPressed:i,inputColorDisabled:a,textColorDisabled:o,borderColor:s,borderRadius:l,fontSize:u}=r;return Object.assign(Object.assign({},GWe),{buttonColor:"#0000",buttonColorHover:"#0000",buttonColorPressed:"#0000",buttonBorder:`1px solid ${s}`,buttonBorderHover:`1px solid ${s}`,buttonBorderPressed:`1px solid ${s}`,buttonIconColor:t,buttonIconColorHover:t,buttonIconColorPressed:t,itemTextColor:t,itemTextColorHover:n,itemTextColorPressed:i,itemTextColorActive:e,itemTextColorDisabled:o,itemColor:"#0000",itemColorHover:"#0000",itemColorPressed:"#0000",itemColorActive:"#0000",itemColorActiveHover:"#0000",itemColorDisabled:a,itemBorder:"1px solid #0000",itemBorderHover:"1px solid #0000",itemBorderPressed:"1px solid #0000",itemBorderActive:`1px solid ${e}`,itemBorderDisabled:`1px solid ${s}`,itemBorderRadius:l,itemFontSize:u,jumperTextColor:t,jumperTextColorDisabled:o})},VWe=Go({name:"Pagination",common:Wn,peers:{Select:Eq,Input:tC},self:UWe});var _q=VWe;function HWe(r,t,e=9){if(t===1)return[1];if(t===2)return[1,2];const n=1,i=t;let a=r,o=r;const s=(e-5)/2;o+=Math.ceil(s),o=Math.min(Math.max(o,n+e-3),i-2),a-=Math.floor(s),a=Math.max(Math.min(a,i-e+3),n+2);let l=!1,u=!1;a>n+2&&(l=!0),o<i-2&&(u=!0);const c=[];c.push(n),l?c.push(-2):i>=n+1&&c.push(n+1);for(let f=a;f<=o;++f)c.push(f);return u?c.push(-1):o===i-2&&c[c.length-1]!==i-1&&c.push(i-1),c[c.length-1]!==i&&c.push(i),c}function WWe(r,t){return r.map(e=>{switch(e){case-2:return{type:"fastBackward",label:"fastBackward",active:!1};case-1:return{type:"fastForward",label:"fastForward",active:!1};default:return e===t?{type:"page",label:e,active:!0}:{type:"page",label:e,active:!1}}})}function jWe(r,t,e){const n=HWe(r,t,e);return WWe(n,r)}var YWe=de("pagination",`
 display: flex;
 vertical-align: middle;
 font-size: var(--item-font-size);
 flex-wrap: nowrap;
`,[de("pagination-prefix",`
 display: flex;
 align-items: center;
 margin: var(--prefix-margin);
 `),de("pagination-suffix",`
 display: flex;
 align-items: center;
 margin: var(--suffix-margin);
 `),_e("> *:not(:first-child)",{margin:"var(--item-margin)"}),de("select",{width:"var(--select-width)"}),_e("&.transition-disabled",[de("pagination-item",{transition:"none!important"})]),de("pagination-quick-jumper",`
 white-space: nowrap;
 display: flex;
 color: var(--jumper-text-color);
 transition: color .3s var(--bezier);
 align-items: center;
 font-size: var(--jumter-font-size);
 `,[de("input",`
 margin: var(--input-margin);
 width: var(--input-width);
 `)]),de("pagination-item",`
 position: relative;
 cursor: pointer;
 user-select: none;
 display: flex;
 align-items: center;
 justify-content: center;
 box-sizing: border-box;
 min-width: var(--item-size);
 height: var(--item-size);
 padding: var(--item-padding);
 background-color: var(--item-color);
 color: var(--item-text-color);
 border-radius: var(--item-border-radius);
 border: var(--item-border);
 fill: var(--button-icon-color);
 transition:
 color .3s var(--bezier),
 border-color .3s var(--bezier),
 background-color .3s var(--bezier),
 fill .3s var(--bezier);
 `,[Ge("button",`
 background: var(--button-color);
 color: var(--button-icon-color);
 border: var(--button-border);
 `,[de("base-icon",`
 font-size: var(--button-icon-size);
 `)]),Mn("disabled",[_e("&:hover",{background:"var(--item-color-hover)",color:"var(--item-text-color-hover)",border:"var(--item-border-hover)"},[Ge("button",{background:"var(--button-color-hover)",border:"var(--button-border-hover)",color:"var(--button-icon-color-hover)"})]),_e("&:active",{background:"var(--item-color-pressed)",color:"var(--item-text-color-pressed)",border:"var(--item-border-pressed)"},[Ge("button",{background:"var(--button-color-pressed)",border:"var(--button-border-pressed)",color:"var(--button-icon-color-pressed)"})]),Ge("active",{background:"var(--item-color-active)",color:"var(--item-text-color-active)",border:"var(--item-border-active)"},[_e("&:hover",{background:"var(--item-color-active-hover)"})])]),Ge("disabled",`
 cursor: not-allowed;
 color: var(--item-text-color-disabled);
 `,[Ge("active, button",{backgroundColor:"var(--item-color-disabled)",border:"var(--item-border-disabled)"})])]),Ge("disabled",{cursor:"not-allowed"},[de("pagination-quick-jumper",{color:"var(--jumper-text-color-disabled)"})])]);const XWe=Object.assign(Object.assign({},rr.props),{page:Number,defaultPage:{type:Number,default:1},itemCount:Number,pageCount:Number,defaultPageCount:{type:Number,default:1},showSizePicker:Boolean,pageSize:Number,defaultPageSize:{type:Number,default:10},pageSizes:{type:Array,default(){return[10]}},showQuickJumper:Boolean,disabled:Boolean,pageSlot:{type:Number,default:9},prev:Function,next:Function,prefix:Function,suffix:Function,"onUpdate:page":[Function,Array],onUpdatePage:[Function,Array],"onUpdate:pageSize":[Function,Array],onUpdatePageSize:[Function,Array],onPageSizeChange:[Function,Array],onChange:[Function,Array]});var qWe=xt({name:"Pagination",props:XWe,setup(r){const{NConfigProvider:t,mergedClsPrefixRef:e}=mn(r),n=rr("Pagination","Pagination",YWe,_q,r,e),{localeRef:i}=Qd("Pagination"),a=Oe(null),o=Oe(null),s=Oe(""),l=Oe(r.defaultPage),u=Oe(r.defaultPageSize),c=Qi(Kt(r,"page"),l),f=Qi(Kt(r,"pageSize"),u),d=re(()=>{const{itemCount:L}=r;if(L!==void 0)return Math.max(1,Math.ceil(L/f.value));const{pageCount:O}=r;return O!==void 0?O:1}),h=Oe(!1),v=Oe(!1),p=re(()=>{const L=i.value.selectionSuffix;return r.pageSizes.map(O=>typeof O=="number"?{label:`${O} / ${L}`,value:O}:O)}),g=re(()=>{var L,O;return((O=(L=t==null?void 0:t.mergedComponentPropsRef.value)===null||L===void 0?void 0:L.Pagination)===null||O===void 0?void 0:O.inputSize)||"small"}),m=re(()=>{var L,O;return((O=(L=t==null?void 0:t.mergedComponentPropsRef.value)===null||L===void 0?void 0:L.Pagination)===null||O===void 0?void 0:O.selectSize)||"small"}),y=re(()=>(c.value-1)*f.value),b=re(()=>{const L=c.value*f.value-1,{itemCount:O}=r;return O!==void 0&&L>O?O:L}),x=()=>{Ha(()=>{var L;const{value:O}=a;!O||(O.classList.add("transition-disabled"),(L=a.value)===null||L===void 0||L.offsetWidth,O.classList.remove("transition-disabled"))})};function w(L){if(L===c.value)return;const{"onUpdate:page":O,onUpdatePage:B,onChange:U}=r;O&&Tt(O,L),B&&Tt(B,L),U&&Tt(U,L),l.value=L}function S(L){if(L===f.value)return;const{"onUpdate:pageSize":O,onUpdatePageSize:B,onPageSizeChange:U}=r;O&&Tt(O,L),B&&Tt(B,L),U&&Tt(U,L),u.value=L,d.value<c.value&&w(d.value)}function C(){if(r.disabled)return;const L=Math.min(c.value+1,d.value);w(L)}function _(){if(r.disabled)return;const L=Math.max(c.value-1,1);w(L)}function T(){if(r.disabled)return;const L=Math.min(c.value+(r.pageSlot-4),d.value);w(L)}function E(){if(r.disabled)return;const L=Math.max(c.value-(r.pageSlot-4),1);w(L)}function M(L){S(L)}function k(L){var O;if(L.code==="Enter"||L.code==="NumpadEnter"){const B=parseInt(s.value);!Number.isNaN(B)&&B>=1&&B<=d.value&&(w(B),s.value="",(O=o.value)===null||O===void 0||O.blur())}}function P(L){if(!r.disabled)switch(L.type){case"page":w(L.label);break;case"fastBackward":E();break;case"fastForward":T();break}}function F(L){if(!r.disabled){switch(L.type){case"fastBackward":v.value=!0;break;case"fastForward":h.value=!0;break;default:return}x()}}function $(L){if(!r.disabled){switch(L.type){case"fastBackward":v.value=!1;break;case"fastForward":h.value=!1;break;default:return}x()}}function R(L){s.value=L}return Ks(()=>{c.value,f.value,x()}),{mergedClsPrefix:e,locale:i,selfRef:a,jumperRef:o,mergedPage:c,showFastBackward:v,showFastForward:h,pageItems:re(()=>jWe(c.value,d.value,r.pageSlot)),jumperValue:s,pageSizeOptions:p,mergedPageSize:f,inputSize:g,selectSize:m,mergedTheme:n,mergedPageCount:d,startIndex:y,endIndex:b,handleJumperInput:R,handleBackwardClick:_,handleForwardClick:C,handlePageItemClick:P,handleSizePickerChange:M,handleQuickJumperKeyUp:k,handlePageItemMouseEnter:F,handlePageItemMouseLeave:$,cssVars:re(()=>{const{self:{itemSize:L,itemPadding:O,itemMargin:B,inputWidth:U,selectWidth:W,inputMargin:X,selectMargin:ae,buttonBorder:Z,buttonBorderHover:Y,buttonBorderPressed:fe,buttonIconColor:le,buttonIconColorHover:ue,buttonIconColorPressed:Ee,buttonIconSize:De,itemTextColor:je,itemTextColorHover:ke,itemTextColorPressed:D,itemTextColorActive:z,itemTextColorDisabled:H,itemColor:he,itemColorHover:te,itemColorPressed:ge,itemColorActive:Qe,itemColorActiveHover:Ve,itemColorDisabled:Ie,itemBorder:Be,itemBorderHover:V,itemBorderPressed:j,itemBorderActive:q,itemBorderDisabled:ee,itemBorderRadius:Q,itemFontSize:me,jumperFontSize:He,jumperTextColor:ze,jumperTextColorDisabled:it,prefixMargin:we,suffixMargin:nt,buttonColor:st,buttonColorHover:jt,buttonColorPressed:Jt},common:{cubicBezierEaseInOut:Ae}}=n.value;return{"--prefix-margin":we,"--suffix-margin":nt,"--item-font-size":me,"--select-width":W,"--select-margin":ae,"--input-width":U,"--input-margin":X,"--item-size":L,"--item-text-color":je,"--item-text-color-disabled":H,"--item-text-color-hover":ke,"--item-text-color-active":z,"--item-text-color-pressed":D,"--item-color":he,"--item-color-hover":te,"--item-color-disabled":Ie,"--item-color-active":Qe,"--item-color-active-hover":Ve,"--item-color-pressed":ge,"--item-border":Be,"--item-border-hover":V,"--item-border-disabled":ee,"--item-border-active":q,"--item-border-pressed":j,"--item-padding":O,"--item-border-radius":Q,"--bezier":Ae,"--jumper-font-size":He,"--jumper-text-color":ze,"--jumper-text-color-disabled":it,"--item-margin":B,"--button-icon-size":De,"--button-icon-color":le,"--button-icon-color-hover":ue,"--button-icon-color-pressed":Ee,"--button-color-hover":jt,"--button-color":st,"--button-color-pressed":Jt,"--button-border":Z,"--button-border-hover":Y,"--button-border-pressed":fe}})}},render(){const{$slots:r,mergedClsPrefix:t,disabled:e,cssVars:n,mergedPage:i,mergedPageCount:a,pageItems:o,showFastBackward:s,showFastForward:l,showSizePicker:u,showQuickJumper:c,mergedTheme:f,locale:d,inputSize:h,selectSize:v,mergedPageSize:p,pageSizeOptions:g,jumperValue:m,prev:y,next:b,prefix:x,suffix:w,handleJumperInput:S,handleSizePickerChange:C,handleBackwardClick:_,handlePageItemClick:T,handlePageItemMouseEnter:E,handlePageItemMouseLeave:M,handleForwardClick:k,handleQuickJumperKeyUp:P}=this,F=y||r.prev,$=b||r.next;return I("div",{ref:"selfRef",class:[`${t}-pagination`,e&&`${t}-pagination--disabled`],style:n},x||r.prefix?I("div",{class:`${t}-pagination-prefix`},(r.prefix?r.prefix:x)({page:i,pageSize:p,pageCount:a,startIndex:this.startIndex,endIndex:this.endIndex,itemCount:this.itemCount})):null,I("div",{class:[`${t}-pagination-item`,!F&&`${t}-pagination-item--button`,(i<=1||i>a||e)&&`${t}-pagination-item--disabled`],onClick:_},F?F({page:i,pageSize:p,pageCount:a,startIndex:this.startIndex,endIndex:this.endIndex,itemCount:this.itemCount}):I(si,{clsPrefix:t},{default:()=>I(Jd,null)})),o.map((R,L)=>I("div",{key:L,class:[`${t}-pagination-item`,{[`${t}-pagination-item--active`]:R.active,[`${t}-pagination-item--disabled`]:e}],onClick:()=>T(R),onMouseenter:()=>E(R),onMouseleave:()=>M(R)},R.type==="page"?R.label:null,R.type==="fastBackward"?s?I(si,{clsPrefix:t},{default:()=>I(eh,null)}):I(si,{clsPrefix:t},{default:()=>I(hX,null)}):null,R.type==="fastForward"?l?I(si,{clsPrefix:t},{default:()=>I(th,null)}):I(si,{clsPrefix:t},{default:()=>I(hX,null)}):null)),I("div",{class:[`${t}-pagination-item`,!$&&`${t}-pagination-item--button`,{[`${t}-pagination-item--disabled`]:i<1||i>=a||e}],onClick:k},$?$({page:i,pageSize:p,pageCount:a,itemCount:this.itemCount,startIndex:this.startIndex,endIndex:this.endIndex}):I(si,{clsPrefix:t},{default:()=>I(rh,null)})),u?I(zWe,{size:v,placeholder:"",options:g,value:p,disabled:e,theme:f.peers.Select,themeOverrides:f.peerOverrides.Select,onUpdateValue:C}):null,c?I("div",{class:`${t}-pagination-quick-jumper`},d.goto,I(sh,{ref:"jumperRef",value:m,onUpdateValue:S,size:h,placeholder:"",disabled:e,theme:f.peers.Input,themeOverrides:f.peerOverrides.Input,onKeyup:P})):null,w||r.suffix?I("div",{class:`${t}-pagination-suffix`},(r.suffix?r.suffix:w)({page:i,pageSize:p,pageCount:a,startIndex:this.startIndex,endIndex:this.endIndex,itemCount:this.itemCount})):null)}}),KWe={padding:"8px 14px"};const ZWe=r=>{const{borderRadius:t,boxShadow2:e,baseColor:n}=r;return Object.assign(Object.assign({},KWe),{borderRadius:t,boxShadow:e,color:"rgba(0, 0, 0, .85)",textColor:n})},QWe=Go({name:"Tooltip",common:Wn,peers:{Popover:g0},self:ZWe});var yP=QWe;const JWe=Go({name:"Ellipsis",common:Wn,peers:{Tooltip:yP}});var Tq=JWe,e9e={radioSizeSmall:"14px",radioSizeMedium:"16px",radioSizeLarge:"18px",labelPadding:"0 8px"};const t9e=r=>{const{borderColor:t,primaryColor:e,baseColor:n,textColorDisabled:i,inputColorDisabled:a,textColor2:o,opacityDisabled:s,borderRadius:l,fontSizeSmall:u,fontSizeMedium:c,fontSizeLarge:f,heightSmall:d,heightMedium:h,heightLarge:v}=r;return Object.assign(Object.assign({},e9e),{buttonHeightSmall:d,buttonHeightMedium:h,buttonHeightLarge:v,fontSizeSmall:u,fontSizeMedium:c,fontSizeLarge:f,boxShadow:`inset 0 0 0 1px ${t}`,boxShadowActive:`inset 0 0 0 1px ${e}`,boxShadowFocus:`inset 0 0 0 1px ${e}, 0 0 0 2px ${jr(e,{alpha:.2})}`,boxShadowHover:`inset 0 0 0 1px ${e}`,boxShadowDisabled:`inset 0 0 0 1px ${t}`,color:n,colorDisabled:a,textColor:o,textColorDisabled:i,dotColorActive:e,dotColorDisabled:t,buttonBorderColor:t,buttonBorderColorActive:e,buttonBorderColorHover:t,buttonColor:n,buttonColorActive:n,buttonTextColor:o,buttonTextColorActive:e,buttonTextColorHover:e,opacityDisabled:s,buttonBoxShadowFocus:`inset 0 0 0 1px ${e}, 0 0 0 2px ${jr(e,{alpha:.3})}`,buttonBoxShadowHover:"inset 0 0 0 1px #0000",buttonBoxShadow:"inset 0 0 0 1px #0000",buttonBorderRadius:l})},r9e={name:"Radio",common:Wn,self:t9e};var bP=r9e,n9e={thPaddingSmall:"8px",thPaddingMedium:"12px",thPaddingLarge:"12px",tdPaddingSmall:"8px",tdPaddingMedium:"12px",tdPaddingLarge:"12px",sorterSize:"15px",filterSize:"15px",paginationMargin:"12px 0 0 0",emptyPadding:"16px 0",actionPadding:"8px 12px",actionButtonMargin:"0 8px 0 0"};const i9e=r=>{const{cardColor:t,modalColor:e,popoverColor:n,textColor2:i,textColor1:a,tableHeaderColor:o,tableColorHover:s,iconColor:l,primaryColor:u,fontWeightStrong:c,borderRadius:f,lineHeight:d,fontSizeSmall:h,fontSizeMedium:v,fontSizeLarge:p,dividerColor:g,heightSmall:m,opacityDisabled:y,tableColorStriped:b}=r;return Object.assign(Object.assign({},n9e),{actionDividerColor:g,lineHeight:d,borderRadius:f,fontSizeSmall:h,fontSizeMedium:v,fontSizeLarge:p,borderColor:yi(t,g),tdColorHover:yi(t,s),tdColorStriped:yi(t,b),thColor:yi(t,o),thColorHover:yi(yi(t,o),s),tdColor:t,tdTextColor:i,thTextColor:a,thFontWeight:c,thButtonColorHover:s,thIconColor:l,thIconColorActive:u,borderColorModal:yi(e,g),tdColorHoverModal:yi(e,s),tdColorStripedModal:yi(e,b),thColorModal:yi(e,o),thColorHoverModal:yi(yi(e,o),s),tdColorModal:e,borderColorPopover:yi(n,g),tdColorHoverPopover:yi(n,s),tdColorStripedPopover:yi(n,b),thColorPopover:yi(n,o),thColorHoverPopover:yi(yi(n,o),s),tdColorPopover:n,boxShadowBefore:"inset -12px 0 8px -12px rgba(0, 0, 0, .18)",boxShadowAfter:"inset 12px 0 8px -12px rgba(0, 0, 0, .18)",loadingColor:u,loadingSize:m,opacityLoading:y})},a9e=Go({name:"DataTable",common:Wn,peers:{Button:y0,Checkbox:Sq,Radio:bP,Pagination:_q,Scrollbar:oh,Empty:eP,Popover:g0,Ellipsis:Tq},self:i9e});var o9e=a9e;const s9e=Object.assign(Object.assign({},eC),rr.props);var Aq=xt({name:"Tooltip",props:s9e,__popover__:!0,setup(r){const t=rr("Tooltip","Tooltip",void 0,yP,r),e=Oe(null);return Object.assign(Object.assign({},{syncPosition(){e.value.syncPosition()},setShow(i){e.value.setShow(i)}}),{popoverRef:e,mergedTheme:t,popoverThemeOverrides:re(()=>t.value.self)})},render(){const{mergedTheme:r,internalExtraClass:t}=this;return I(m0,Object.assign(Object.assign({},this.$props),{theme:r.peers.Popover,themeOverrides:r.peerOverrides.Popover,builtinThemeOverrides:this.popoverThemeOverrides,internalExtraClass:t.concat("tooltip"),ref:"popoverRef"}),this.$slots)}}),l9e=de("ellipsis",{overflow:"hidden"},[Mn("line-clamp",`
 white-space: nowrap;
 display: inline-block;
 vertical-align: bottom;
 max-width: 100%;
 `),Ge("line-clamp",`
 display: -webkit-inline-box;
 -webkit-box-orient: vertical;
 `),Ge("cursor-pointer",`
 cursor: pointer;
 `)]);function Mq(r){return`${r}-ellipsis--line-clamp`}function kq(r,t){return`${r}-ellipsis--cursor-${t}`}const u9e=Object.assign(Object.assign({},rr.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}});var Iq=xt({name:"Ellipsis",inheritAttrs:!1,props:u9e,setup(r,{slots:t,attrs:e}){const{mergedClsPrefixRef:n}=mn(r),i=rr("Ellipsis","ellipsis",l9e,Tq,r,n),a=Oe(null),o=Oe(null),s=Oe(!1),l=re(()=>{const{lineClamp:p}=r,{value:g}=s;return p!==void 0?{textOverflow:"","-webkit-line-clamp":g?"":p}:{textOverflow:g?"":"ellipsis","-webkit-line-clamp":""}});function u(){let p=!1;const{value:g}=s;if(g)return!0;const{value:m}=a;if(m){const{lineClamp:y}=r;d(m),y!==void 0?p=m.scrollHeight<=m.offsetHeight:p=m.scrollWidth<=m.offsetWidth,h(m,p)}return p}const c=re(()=>r.expandTrigger==="click"?()=>{var p;const{value:g}=s;g&&((p=o.value)===null||p===void 0||p.setShow(!1)),s.value=!g}:void 0),f=()=>I("span",Object.assign({},El(e,{class:[`${n.value}-ellipsis`,r.lineClamp!==void 0?Mq(n.value):void 0,r.expandTrigger==="click"?kq(n.value,"pointer"):void 0],style:l.value}),{ref:"triggerRef",onClick:c.value,onMouseenter:r.expandTrigger==="click"?u:void 0}),t);function d(p){if(!p)return;const g=l.value,m=Mq(n.value);r.lineClamp!==void 0?v(p,m,"add"):v(p,m,"remove");for(const y in g)p.style[y]!==g[y]&&(p.style[y]=g[y])}function h(p,g){const m=kq(n.value,"pointer");r.expandTrigger==="click"&&!g?v(p,m,"add"):v(p,m,"remove")}function v(p,g,m){m==="add"?p.classList.contains(g)||p.classList.add(g):p.classList.contains(g)&&p.classList.remove(g)}return{mergedTheme:i,triggerRef:a,tooltipRef:o,handleClick:c,renderTrigger:f,getTooltipDisabled:u}},render(){var r;const{tooltip:t,renderTrigger:e,$slots:n}=this;if(t){const{mergedTheme:i}=this;return I(Aq,Object.assign({ref:"tooltipRef",placement:"top"},t,{getDisabled:this.getTooltipDisabled,theme:i.peers.Tooltip,themeOverrides:i.peerOverrides.Tooltip}),{trigger:e,default:(r=n.tooltip)!==null&&r!==void 0?r:n.default})}else return e()}}),c9e=xt({name:"DataTableRenderSorter",props:{render:{type:Function,required:!0},order:{type:[String,Boolean],default:!1}},render(){const{render:r,order:t}=this;return r({order:t})}});const ju=Symbol("dataTable");var f9e=xt({name:"SortIcon",props:{column:{type:Object,required:!0}},setup(r){const{NConfigProvider:t}=mn(),{mergedSortStateRef:e,mergedClsPrefixRef:n}=or(ju),i=re(()=>e.value.find(l=>l.columnKey===r.column.key)),a=re(()=>i.value!==void 0),o=re(()=>{const{value:l}=i;return l&&a.value?l.order:!1}),s=re(()=>{var l,u;return((u=(l=t==null?void 0:t.mergedComponentPropsRef.value)===null||l===void 0?void 0:l.DataTable)===null||u===void 0?void 0:u.renderSorter)||r.column.renderSorter});return{mergedClsPrefix:n,active:a,mergedSortOrder:o,mergedRenderSorter:s}},render(){const{mergedRenderSorter:r,mergedSortOrder:t,mergedClsPrefix:e}=this;return r?I(c9e,{render:r,order:t}):I("span",{class:[`${e}-data-table-sorter`,{[`${e}-data-table-sorter--asc`]:t==="ascend",[`${e}-data-table-sorter--desc`]:t==="descend"}]},I(si,{clsPrefix:e},{default:()=>I(L8e,null)}))}}),d9e=xt({name:"DataTableRenderFilter",props:{render:{type:Function,required:!0},active:{type:Boolean,default:!1},show:{type:Boolean,default:!1}},render(){const{render:r,active:t,show:e}=this;return r({active:t,show:e})}});const h9e={name:String,value:{type:[String,Number],default:"on"},checked:{type:Boolean,default:void 0},defaultChecked:Boolean,disabled:{type:Boolean,default:void 0},size:String,onUpdateChecked:[Function,Array],"onUpdate:checked":[Function,Array],checkedValue:{type:Boolean,validator:()=>(ql("radio","`checked-value` is deprecated, please use `checked` instead."),!0),default:void 0}},Pq=Symbol("radioGroup");function xP(r){const t=Xl(r,{mergedSize(w){const{size:S}=r;if(S!==void 0)return S;if(o){const{mergedSizeRef:{value:C}}=o;if(C!==void 0)return C}return w?w.mergedSize.value:"medium"},mergedDisabled(w){return!!(r.disabled||(o==null?void 0:o.disabledRef.value)||(w==null?void 0:w.disabled.value))}}),{mergedSizeRef:e,mergedDisabledRef:n}=t,i=Oe(null),a=Oe(null),o=or(Pq,null),s=Oe(r.defaultChecked),l=Kt(r,"checked"),u=Qi(l,s),c=xi(()=>o?o.valueRef.value===r.value:u.value),f=xi(()=>{const{name:w}=r;if(w!==void 0)return w;if(o)return o.nameRef.value}),d=Oe(!1);function h(){if(o){const{doUpdateValue:w}=o,{value:S}=r;Tt(w,S)}else{const{onUpdateChecked:w,"onUpdate:checked":S}=r,{nTriggerFormInput:C,nTriggerFormChange:_}=t;w&&Tt(w,!0),S&&Tt(S,!0),C(),_(),s.value=!0}}function v(){n.value||c.value||h()}function p(){v()}function g(){d.value=!1}function m(){d.value=!0}function y(w){var S;switch(w.code){case"Enter":case"NumpadEnter":(S=i.value)===null||S===void 0||S.click()}}function b(){n.value||setTimeout(()=>{var w,S;((w=a.value)===null||w===void 0?void 0:w.contains(document.activeElement))||(S=i.value)===null||S===void 0||S.focus()},0)}function x(){var w;(w=i.value)===null||w===void 0||w.click()}return{mergedClsPrefix:o?o.mergedClsPrefixRef:mn(r).mergedClsPrefixRef,inputRef:i,labelRef:a,mergedName:f,mergedDisabled:n,uncontrolledChecked:s,renderSafeChecked:c,focus:d,mergedSize:e,handleRadioInputChange:p,handleRadioInputBlur:g,handleRadioInputFocus:m,handleKeyUp:y,handleMouseDown:b,handleClick:x}}xP.props=h9e;var v9e=de("radio",`
 line-height: 1;
 outline: none;
 position: relative;
 user-select: none;
 display: inline-flex;
 vertical-align: middle;
 align-items: center;
 font-size: var(--font-size);
`,[Se("dot",`
 height: var(--radio-size);
 width: var(--radio-size);
 `),Se("radio-input",`
 border: 0;
 width: 0;
 height: 0;
 opacity: 0;
 margin: 0;
 `),Se("dot",`
 background: var(--color);
 box-shadow: var(--box-shadow);
 transition:
 background-color .3s var(--bezier),
 box-shadow .3s var(--bezier);
 position: relative;
 border-radius: 50%;
 `,[_e("&::before",`
 content: "";
 opacity: 0;
 position: absolute;
 left: 4px;
 top: 4px;
 height: calc(100% - 8px);
 width: calc(100% - 8px);
 border-radius: 50%;
 transform: scale(.8);
 background: var(--dot-color-active);
 transition: 
 opacity .3s var(--bezier),
 background-color .3s var(--bezier),
 transform .3s var(--bezier);
 `),Ge("checked",{boxShadow:"var(--box-shadow-active)"},[_e("&::before",`
 opacity: 1;
 transform: scale(1);
 `)])]),Se("label",`
 color: var(--text-color);
 padding: var(--label-padding);
 display: inline-block;
 white-space: nowrap;
 transition: color .3s var(--bezier);
 `),Mn("disabled",`
 cursor: pointer;
 `,[_e("&:hover",[Se("dot",{boxShadow:"var(--box-shadow-hover)"})]),Ge("focus",[_e("&:not(:active)",[Se("dot",{boxShadow:"var(--box-shadow-focus)"})])])]),Ge("disabled",`
 cursor: not-allowed;
 `,[Se("dot",{boxShadow:"var(--box-shadow-disabled)",backgroundColor:"var(--color-disabled)"},[_e("&::before",{backgroundColor:"var(--dot-color-disabled)"}),Ge("checked",`
 transform: scale(1);
 opacity: 1;
 `)]),Se("label",{color:"var(--text-color-disabled)"})])]),p9e=xt({name:"Radio",props:Object.assign(Object.assign({},rr.props),xP.props),setup(r){const t=xP(r),e=rr("Radio","Radio",v9e,bP,r,t.mergedClsPrefix);return Object.assign(t,{cssVars:re(()=>{const{mergedSize:{value:n}}=t,{common:{cubicBezierEaseInOut:i},self:{boxShadow:a,boxShadowActive:o,boxShadowDisabled:s,boxShadowFocus:l,boxShadowHover:u,color:c,colorDisabled:f,textColor:d,textColorDisabled:h,dotColorActive:v,dotColorDisabled:p,labelPadding:g,[Ot("fontSize",n)]:m,[Ot("radioSize",n)]:y}}=e.value;return{"--bezier":i,"--box-shadow":a,"--box-shadow-active":o,"--box-shadow-disabled":s,"--box-shadow-focus":l,"--box-shadow-hover":u,"--color":c,"--color-disabled":f,"--dot-color-active":v,"--dot-color-disabled":p,"--font-size":m,"--radio-size":y,"--text-color":d,"--text-color-disabled":h,"--label-padding":g}})})},render(){const{$slots:r,mergedClsPrefix:t}=this;return I("div",{class:[`${t}-radio`,{[`${t}-radio--disabled`]:this.mergedDisabled,[`${t}-radio--checked`]:this.renderSafeChecked,[`${t}-radio--focus`]:this.focus}],style:this.cssVars,onKeyup:this.handleKeyUp,onClick:this.handleClick,onMousedown:this.handleMouseDown},I("input",{ref:"inputRef",type:"radio",class:`${t}-radio__radio-input`,value:this.value,name:this.mergedName,checked:this.renderSafeChecked,disabled:this.mergedDisabled,onChange:this.handleRadioInputChange,onFocus:this.handleRadioInputFocus,onBlur:this.handleRadioInputBlur}),I("div",{class:[`${t}-radio__dot`,this.renderSafeChecked&&`${t}-radio__dot--checked`]}),r.default?I("div",{ref:"labelRef",class:`${t}-radio__label`},r.default()):null)}}),g9e=de("radio-group",`
 display: inline-block;
 font-size: var(--font-size);
`,[Se("splitor",`
 display: inline-block;
 vertical-align: bottom;
 width: 1px;
 transition:
 background-color .3s var(--bezier),
 opacity .3s var(--bezier);
 background: var(--button-border-color);
 `,[Ge("checked",{backgroundColor:"var(--button-border-color-active)"}),Ge("disabled",{opacity:"var(--opacity-disabled)"})]),Ge("button-group",`
 white-space: nowrap;
 height: var(--height);
 line-height: var(--height);
 `,[de("radio-button",{height:"var(--height)",lineHeight:"var(--height)"}),Se("splitor",{height:"var(--height)"})]),de("radio-button",`
 vertical-align: bottom;
 outline: none;
 position: relative;
 user-select: none;
 display: inline-block;
 box-sizing: border-box;
 padding-left: 14px;
 padding-right: 14px;
 white-space: nowrap;
 transition:
 background-color .3s var(--bezier),
 opacity .3s var(--bezier),
 border-color .3s var(--bezier),
 color .3s var(--bezier);
 color: var(--button-text-color);
 border-top: 1px solid var(--button-border-color);
 border-bottom: 1px solid var(--button-border-color);
 `,[Se("radio-input",`
 border: 0;
 width: 0;
 height: 0;
 opacity: 0;
 margin: 0;
 `),Se("state-border",`
 pointer-events: none;
 position: absolute;
 box-shadow: var(--button-box-shadow);
 transition: box-shadow .3s var(--bezier);
 left: -1px;
 bottom: -1px;
 right: -1px;
 top: -1px;
 `),_e("&:first-child",`
 border-top-left-radius: var(--button-border-radius);
 border-bottom-left-radius: var(--button-border-radius);
 border-left: 1px solid var(--button-border-color);
 `,[Se("state-border",`
 border-top-left-radius: var(--button-border-radius);
 border-bottom-left-radius: var(--button-border-radius);
 `)]),_e("&:last-child",`
 border-top-right-radius: var(--button-border-radius);
 border-bottom-right-radius: var(--button-border-radius);
 border-right: 1px solid var(--button-border-color);
 `,[Se("state-border",`
 border-top-right-radius: var(--button-border-radius);
 border-bottom-right-radius: var(--button-border-radius);
 `)]),Mn("disabled",`
 cursor: pointer;
 `,[_e("&:hover",[Se("state-border",`
 transition: box-shadow .3s var(--bezier);
 box-shadow: var(--button-box-shadow-hover);
 `),Mn("checked",{color:"var(--button-text-color-hover)"})]),Ge("focus",[_e("&:not(:active)",[Se("state-border",{boxShadow:"var(--button-box-shadow-focus)"})])])]),Ge("checked",`
 background: var(--button-color-active);
 color: var(--button-text-color-active);
 border-color: var(--button-border-color-active);
 `),Ge("disabled",`
 cursor: not-allowed;
 opacity: var(--opacity-disabled);
 `)])]);function m9e(r,t,e){var n;const i=[];let a=!1;for(let o=0;o<r.length;++o){const s=r[o],l=(n=s.type)===null||n===void 0?void 0:n.name;l==="RadioButton"&&(a=!0);const u=s.props;if(l!=="RadioButton"){i.push(s);continue}if(o===0)i.push(s);else{const c=i[i.length-1].props,f=t===c.value,d=c.disabled,h=t===u.value,v=u.disabled,p=(f?2:0)+(d?0:1),g=(h?2:0)+(v?0:1),m={[`${e}-radio-group__splitor--disabled`]:d,[`${e}-radio-group__splitor--checked`]:f},y={[`${e}-radio-group__splitor--disabled`]:v,[`${e}-radio-group__splitor--checked`]:h},b=p<g?y:m;i.push(I("div",{class:[`${e}-radio-group__splitor`,b]}),s)}}return{children:i,isButtonGroup:a}}const y9e=Object.assign(Object.assign({},rr.props),{name:String,value:[String,Number],defaultValue:{type:[String,Number],default:null},size:String,disabled:{type:Boolean,default:void 0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]});var b9e=xt({name:"RadioGroup",props:y9e,setup(r){const t=Oe(null),{mergedSizeRef:e,mergedDisabledRef:n,nTriggerFormChange:i,nTriggerFormInput:a,nTriggerFormBlur:o,nTriggerFormFocus:s}=Xl(r),{mergedClsPrefixRef:l}=mn(r),u=rr("Radio","RadioGroup",g9e,bP,r,l),c=Oe(r.defaultValue),f=Kt(r,"value"),d=Qi(f,c);function h(g){const{onUpdateValue:m,"onUpdate:value":y}=r;m&&Tt(m,g),y&&Tt(y,g),c.value=g,i(),a()}function v(g){const{value:m}=t;!m||m.contains(g.relatedTarget)||s()}function p(g){const{value:m}=t;!m||m.contains(g.relatedTarget)||o()}return rn(Pq,{mergedClsPrefixRef:l,nameRef:Kt(r,"name"),valueRef:d,disabledRef:n,mergedSizeRef:e,doUpdateValue:h}),{selfElRef:t,mergedClsPrefix:l,mergedValue:d,handleFocusout:p,handleFocusin:v,cssVars:re(()=>{const{value:g}=e,{common:{cubicBezierEaseInOut:m},self:{buttonBorderColor:y,buttonBorderColorActive:b,buttonBorderRadius:x,buttonBoxShadow:w,buttonBoxShadowFocus:S,buttonBoxShadowHover:C,buttonColorActive:_,buttonTextColor:T,buttonTextColorActive:E,buttonTextColorHover:M,opacityDisabled:k,[Ot("buttonHeight",g)]:P,[Ot("fontSize",g)]:F}}=u.value;return{"--font-size":F,"--bezier":m,"--button-border-color":y,"--button-border-color-active":b,"--button-border-radius":x,"--button-box-shadow":w,"--button-box-shadow-focus":S,"--button-box-shadow-hover":C,"--button-color-active":_,"--button-text-color":T,"--button-text-color-hover":M,"--button-text-color-active":E,"--height":P,"--opacity-disabled":k}})}},render(){const{mergedValue:r,mergedClsPrefix:t,handleFocusin:e,handleFocusout:n}=this,{children:i,isButtonGroup:a}=m9e(l0(aX(this)),r,t);return I("div",{onFocusin:e,onFocusout:n,ref:"selfElRef",class:[`${t}-radio-group`,a&&`${t}-radio-group--button-group`],style:this.cssVars},i)}});const x9e=40,w9e=40;function wP(r){if(r.type==="selection")return x9e;if(r.type==="expand")return w9e;if(!("children"in r))return r.width}function fh(r){return r.type==="selection"?"__n_selection__":r.type==="expand"?"__n_expand__":r.key}function Dq(r){return r&&(typeof r=="object"?Object.assign({},r):r)}function S9e(r){return r==="ascend"?1:r==="descend"?-1:0}function C9e(r){const t=fo(wP(r));return{width:t,minWidth:t}}function E9e(r,t,e){return typeof e=="function"?e(r,t):e||""}function SP(r){return r.filterOptionValues!==void 0||r.filterOptionValue===void 0&&r.defaultFilterOptionValues!==void 0}function CP(r){return"children"in r?!1:!!r.sorter}function Rq(r){return"children"in r?!1:!!r.filter&&(!!r.filterOptions||!!r.renderFilterMenu)}function Oq(r){if(r){if(r==="descend")return"ascend"}else return"descend";return!1}function _9e(r,t){return r.sorter===void 0?null:t===null||t.columnKey!==r.key?{columnKey:r.key,sorter:r.sorter,order:Oq(!1)}:Object.assign(Object.assign({},t),{order:Oq(t.order)})}function Lq(r,t){return t.find(e=>e.columnKey===r.key&&e.order)!==void 0}var T9e=xt({name:"DataTableFilterMenu",props:{column:{type:Object,required:!0},radioGroupName:{type:String,required:!0},multiple:{type:Boolean,required:!0},value:{type:[Array,String,Number],default:null},options:{type:Array,required:!0},onConfirm:{type:Function,required:!0},onClear:{type:Function,required:!0},onChange:{type:Function,required:!0}},setup(r){const{mergedClsPrefixRef:t,mergedThemeRef:e,localeRef:n}=or(ju),i=Oe(r.value),a=re(()=>{const{value:f}=i;return Array.isArray(f)?f:null}),o=re(()=>{const{value:f}=i;return SP(r.column)?Array.isArray(f)&&f.length&&f[0]||null:Array.isArray(f)?null:f});function s(f){r.onChange(f)}function l(f){r.multiple&&Array.isArray(f)?i.value=f:SP(r.column)&&!Array.isArray(f)?i.value=[f]:i.value=f}function u(){s(i.value),r.onConfirm()}function c(){r.multiple||SP(r.column)?s([]):s(null),r.onClear()}return{mergedClsPrefix:t,mergedTheme:e,locale:n,checkboxGroupValue:a,radioGroupValue:o,handleChange:l,handleConfirmClick:u,handleClearClick:c}},render(){const{mergedTheme:r,locale:t,mergedClsPrefix:e}=this;return I("div",{class:`${e}-data-table-filter-menu`},I(Bs,null,{default:()=>{const{checkboxGroupValue:n,handleChange:i}=this;return this.multiple?I(RWe,{value:n,class:`${e}-data-table-filter-menu__group`,onUpdateValue:i},{default:()=>this.options.map(a=>I(mP,{key:a.value,theme:r.peers.Checkbox,themeOverrides:r.peerOverrides.Checkbox,value:a.value},{default:()=>a.label}))}):I(b9e,{name:this.radioGroupName,class:`${e}-data-table-filter-menu__group`,value:this.radioGroupValue,onUpdateValue:this.handleChange},{default:()=>this.options.map(a=>I(p9e,{key:a.value,value:a.value,theme:r.peers.Radio,themeOverrides:r.peerOverrides.Radio},{default:()=>a.label}))})}}),I("div",{class:`${e}-data-table-filter-menu__action`},I($a,{size:"tiny",theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,onClick:this.handleClearClick},{default:()=>t.clear}),I($a,{theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,type:"primary",size:"tiny",onClick:this.handleConfirmClick},{default:()=>t.confirm})))}});function A9e(r,t,e){const n=Object.assign({},r);return n[t]=e,n}var M9e=xt({name:"DataTableFilterButton",props:{column:{type:Object,required:!0},options:{type:Array,default:()=>[]}},setup(r){const{NConfigProvider:t}=mn(),{mergedThemeRef:e,mergedClsPrefixRef:n,mergedFilterStateRef:i,filterMenuCssVarsRef:a,doUpdateFilters:o}=or(ju),s=Oe(!1),l=i,u=re(()=>r.column.filterMultiple!==!1),c=re(()=>{const g=l.value[r.column.key];if(g===void 0){const{value:m}=u;return m?[]:null}return g}),f=re(()=>{const{value:g}=c;return Array.isArray(g)?g.length>0:g!==null}),d=re(()=>{var g,m;return((m=(g=t==null?void 0:t.mergedComponentPropsRef.value)===null||g===void 0?void 0:g.DataTable)===null||m===void 0?void 0:m.renderFilter)||r.column.renderFilter});function h(g){const m=A9e(l.value,r.column.key,g);o(m,r.column)}function v(){s.value=!1}function p(){s.value=!1}return{mergedTheme:e,mergedClsPrefix:n,active:f,showPopover:s,mergedRenderFilter:d,filterMultiple:u,mergedFilterValue:c,filterMenuCssVars:a,handleFilterChange:h,handleFilterMenuConfirm:p,handleFilterMenuCancel:v}},render(){const{mergedTheme:r,mergedClsPrefix:t,handleFilterMenuCancel:e}=this;return I(m0,{show:this.showPopover,onUpdateShow:n=>this.showPopover=n,trigger:"click",theme:r.peers.Popover,themeOverrides:r.peerOverrides.Popover,placement:"bottom",style:{padding:0}},{trigger:()=>{const{mergedRenderFilter:n}=this;if(n)return I(d9e,{"data-data-table-filter":!0,render:n,active:this.active,show:this.showPopover});const{renderFilterIcon:i}=this.column;return I("div",{"data-data-table-filter":!0,class:[`${t}-data-table-filter`,{[`${t}-data-table-filter--active`]:this.active,[`${t}-data-table-filter--show`]:this.showPopover}]},i?i({active:this.active,show:this.showPopover}):I(si,{clsPrefix:t},{default:()=>I(G8e,null)}))},default:()=>{const{renderFilterMenu:n}=this.column;return n?n({hide:e}):I(T9e,{style:this.filterMenuCssVars,radioGroupName:String(this.column.key),multiple:this.filterMultiple,value:this.mergedFilterValue,options:this.options,column:this.column,onChange:this.handleFilterChange,onClear:this.handleFilterMenuCancel,onConfirm:this.handleFilterMenuConfirm})}})}}),k9e={padding:"4px 0",optionIconSizeSmall:"14px",optionIconSizeMedium:"16px",optionIconSizeLarge:"16px",optionIconSizeHuge:"18px",optionSuffixWidthSmall:"14px",optionSuffixWidthMedium:"14px",optionSuffixWidthLarge:"16px",optionSuffixWidthHuge:"16px",optionIconSuffixWidthSmall:"32px",optionIconSuffixWidthMedium:"32px",optionIconSuffixWidthLarge:"36px",optionIconSuffixWidthHuge:"36px",optionPrefixWidthSmall:"14px",optionPrefixWidthMedium:"14px",optionPrefixWidthLarge:"16px",optionPrefixWidthHuge:"16px",optionIconPrefixWidthSmall:"36px",optionIconPrefixWidthMedium:"36px",optionIconPrefixWidthLarge:"40px",optionIconPrefixWidthHuge:"40px"};const I9e=r=>{const{primaryColor:t,textColor2:e,dividerColor:n,hoverColor:i,popoverColor:a,invertedColor:o,borderRadius:s,fontSizeSmall:l,fontSizeMedium:u,fontSizeLarge:c,fontSizeHuge:f,heightSmall:d,heightMedium:h,heightLarge:v,heightHuge:p,textColor3:g,opacityDisabled:m}=r;return Object.assign(Object.assign({},k9e),{optionHeightSmall:d,optionHeightMedium:h,optionHeightLarge:v,optionHeightHuge:p,borderRadius:s,fontSizeSmall:l,fontSizeMedium:u,fontSizeLarge:c,fontSizeHuge:f,optionTextColor:e,optionTextColorHover:e,optionTextColorActive:t,optionTextColorChildActive:t,color:a,dividerColor:n,suffixColor:e,prefixColor:e,optionColorHover:i,optionColorActive:jr(t,{alpha:.1}),groupHeaderTextColor:g,optionTextColorInverted:"#BBB",optionTextColorHoverInverted:"#FFF",optionTextColorActiveInverted:"#FFF",optionTextColorChildActiveInverted:"#FFF",colorInverted:o,dividerColorInverted:"#BBB",suffixColorInverted:"#BBB",prefixColorInverted:"#BBB",optionColorHoverInverted:t,optionColorActiveInverted:t,groupHeaderTextColorInverted:"#AAA",optionOpacityDisabled:m})},P9e=Go({name:"Dropdown",common:Wn,peers:{Popover:g0},self:I9e});var D9e=P9e;const R9e=r=>{const{textColorBase:t,opacity1:e,opacity2:n,opacity3:i,opacity4:a,opacity5:o}=r;return{color:t,opacity1Depth:e,opacity2Depth:n,opacity3Depth:i,opacity4Depth:a,opacity5Depth:o}},O9e={name:"Icon",common:Wn,self:R9e};var L9e=O9e,F9e=de("icon",`
 height: 1em;
 width: 1em;
 line-height: 1em;
 text-align: center;
 display: inline-block;
 position: relative;
 fill: currentColor;
 transform: translateZ(0);
`,[Ge("color-transition",{transition:"color .3s var(--bezier)"}),Ge("depth",{color:"var(--color)"},[_e("svg",{opacity:"var(--opacity)",transition:"opacity .3s var(--bezier)"})]),_e("svg",{height:"1em",width:"1em"})]),N9e=xt({_n_icon__:!0,name:"Icon",inheritAttrs:!1,props:Object.assign(Object.assign({},rr.props),{depth:[String,Number],size:[Number,String],color:String}),setup(r){const{mergedClsPrefixRef:t}=mn(r),e=rr("Icon","Icon",F9e,L9e,r,t);return{mergedClsPrefix:t,mergedStyle:re(()=>{const{size:n,color:i}=r;return{fontSize:sa(n),color:i}}),cssVars:re(()=>{const{depth:n}=r,{common:{cubicBezierEaseInOut:i},self:a}=e.value;if(n!==void 0){const{color:o,[`opacity${n}Depth`]:s}=a;return{"--bezier":i,"--color":o,"--opacity":s}}return{"--bezier":i}})}},render(){var r;const{$parent:t,depth:e,mergedClsPrefix:n}=this;return((r=t==null?void 0:t.$options)===null||r===void 0?void 0:r._n_icon__)&&ql("icon","don't wrap `n-icon` inside `n-icon`"),I("i",El(this.$attrs,{role:"img",class:[`${n}-icon`,{[`${n}-icon--depth`]:e,[`${n}-icon--color-transition`]:e!==void 0}],style:Object.assign(this.cssVars,this.mergedStyle)}),this.$slots)}});function EP(r,t){return r.type==="submenu"||r.type===void 0&&r[t]!==void 0}function B9e(r){return r.type==="group"}function Fq(r){return r.type==="divider"}function $9e(r){return r.type==="render"}const Nq=Symbol("dropdown-option");var Bq=xt({name:"DropdownOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null},placement:{type:String,default:"right-start"},props:Object},setup(r){const t=or(dC),{hoverKeyRef:e,keyboardKeyRef:n,lastToggledSubmenuKeyRef:i,pendingKeyPathRef:a,activeKeyPathRef:o,animatedRef:s,mergedShowRef:l,renderLabelRef:u,renderIconRef:c,labelFieldRef:f,childrenFieldRef:d}=t,h=or(Nq,null),v=or(_P),p=re(()=>r.tmNode.rawNode),g=re(()=>{const{value:P}=d;return EP(r.tmNode.rawNode,P)}),m=re(()=>{const{disabled:P}=r.tmNode;return P}),y=re(()=>{if(!g.value)return!1;const{key:P,disabled:F}=r.tmNode;if(F)return!1;const{value:$}=e,{value:R}=n,{value:L}=i,{value:O}=a;return $!==null?O.includes(P):R!==null?O.includes(P)&&O[O.length-1]!==P:L!==null?O.includes(P):!1}),b=re(()=>n.value===null&&!s.value),x=WGe(y,300,b),w=re(()=>!!(h==null?void 0:h.enteringSubmenuRef.value)),S=Oe(!1);rn(Nq,{enteringSubmenuRef:S});function C(){S.value=!0}function _(){S.value=!1}function T(){const{parentKey:P,tmNode:F}=r;!l.value||(i.value=P,n.value=null,e.value=F.key)}function E(){const{tmNode:P}=r;!l.value||e.value!==P.key&&T()}function M(P){if(!l.value)return;const{relatedTarget:F}=P;F&&!Vd({target:F},"dropdownOption")&&(e.value=null)}function k(){const{value:P}=g,{tmNode:F}=r;!l.value||!P&&!F.disabled&&(t.doSelect(F.key,F.rawNode),t.doUpdateShow(!1))}return{labelField:f,renderLabel:u,renderIcon:c,siblingHasIcon:v.showIconRef,siblingHasSubmenu:v.hasSubmenuRef,animated:s,mergedShowSubmenu:re(()=>x.value&&!w.value),rawNode:p,hasSubmenu:g,pending:xi(()=>{const{value:P}=a,{key:F}=r.tmNode;return P.includes(F)}),childActive:xi(()=>{const{value:P}=o,{key:F}=r.tmNode,$=P.findIndex(R=>F===R);return $===-1?!1:$<P.length-1}),active:xi(()=>{const{value:P}=o,{key:F}=r.tmNode,$=P.findIndex(R=>F===R);return $===-1?!1:$===P.length-1}),mergedDisabled:m,handleClick:k,handleMouseMove:E,handleMouseEnter:T,handleMouseLeave:M,handleSubmenuBeforeEnter:C,handleSubmenuAfterEnter:_}},render(){var r;const{animated:t,rawNode:e,mergedShowSubmenu:n,clsPrefix:i,siblingHasIcon:a,siblingHasSubmenu:o,renderLabel:s,renderIcon:l,props:u}=this,c=n?I(zq,{clsPrefix:i,tmNodes:this.tmNode.children,parentKey:this.tmNode.key}):null,f={class:[`${i}-dropdown-option-body`,this.pending&&`${i}-dropdown-option-body--pending`,this.active&&`${i}-dropdown-option-body--active`,this.childActive&&`${i}-dropdown-option-body--child-active`,this.mergedDisabled&&`${i}-dropdown-option-body--disabled`],onMousemove:this.handleMouseMove,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onClick:this.handleClick};return I("div",{class:`${i}-dropdown-option`},I("div",El(f,u),[I("div",{"data-dropdown-option":!0,class:[`${i}-dropdown-option-body__prefix`,a&&`${i}-dropdown-option-body__prefix--show-icon`]},[l?l(e):Ni(e.icon)]),I("div",{"data-dropdown-option":!0,class:`${i}-dropdown-option-body__label`},s?s(e):Ni((r=e[this.labelField])!==null&&r!==void 0?r:e.title)),I("div",{"data-dropdown-option":!0,class:[`${i}-dropdown-option-body__suffix`,o&&`${i}-dropdown-option-body__suffix--has-submenu`]},this.hasSubmenu?I(N9e,null,{default:()=>I(LI,null)}):null)]),this.hasSubmenu?I(d0,null,{default:()=>[I(h0,null,{default:()=>I("div",{class:`${i}-dropdown-offset-container`},I(v0,{show:this.mergedShowSubmenu,placement:this.placement,teleportDisabled:!0},{default:()=>I("div",{class:`${i}-dropdown-menu-wrapper`},t?I(Ra,{onBeforeEnter:this.handleSubmenuBeforeEnter,onAfterEnter:this.handleSubmenuAfterEnter,name:"fade-in-scale-up-transition",appear:!0},{default:()=>c}):c)}))})]}):null)}}),$q=xt({name:"DropdownDivider",props:{clsPrefix:{type:String,required:!0}},render(){return I("div",{class:`${this.clsPrefix}-dropdown-divider`})}}),z9e=xt({name:"DropdownGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{showIconRef:r,hasSubmenuRef:t}=or(_P),{renderLabelRef:e,labelFieldRef:n}=or(dC);return{labelField:n,showIcon:r,hasSubmenu:t,renderLabel:e}},render(){var r;const{clsPrefix:t,hasSubmenu:e,showIcon:n,renderLabel:i}=this,{rawNode:a}=this.tmNode;return I("div",{class:`${t}-dropdown-option`},I("div",{class:`${t}-dropdown-option-body ${t}-dropdown-option-body--group`},I("div",{"data-dropdown-option":!0,class:[`${t}-dropdown-option-body__prefix`,n&&`${t}-dropdown-option-body__prefix--show-icon`]},Ni(a.icon)),I("div",{class:`${t}-dropdown-option-body__label`,"data-dropdown-option":!0},i?i(a):Ni((r=a.title)!==null&&r!==void 0?r:a[this.labelField])),I("div",{class:[`${t}-dropdown-option-body__suffix`,e&&`${t}-dropdown-option-body__suffix--has-submenu`],"data-dropdown-option":!0})))}}),G9e=xt({name:"NDropdownGroup",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null}},render(){const{tmNode:r,parentKey:t,clsPrefix:e}=this,{children:n}=r;return I(Wi,null,I(z9e,{clsPrefix:e,tmNode:r,key:r.key}),n==null?void 0:n.map(i=>Fq(i.rawNode)?I($q,{clsPrefix:e,key:i.key}):i.isGroup?(ql("dropdown","`group` node is not allowed to be put in `group` node."),null):I(Bq,{clsPrefix:e,tmNode:i,parentKey:t,key:i.key})))}}),U9e=xt({name:"DropdownRenderOption",props:{tmNode:{type:Object,required:!0}},render(){const{rawNode:{render:r,props:t}}=this.tmNode;return I("div",t,[r==null?void 0:r()])}});const _P=Symbol("dropdownMenu");var zq=xt({name:"DropdownMenu",props:{showArrow:Boolean,arrowStyle:[String,Object],clsPrefix:{type:String,required:!0},tmNodes:{type:Array,default:()=>[]},parentKey:{type:[String,Number],default:null}},setup(r){const{renderIconRef:t,childrenFieldRef:e}=or(dC);rn(_P,{showIconRef:re(()=>{const n=t.value;return r.tmNodes.some(i=>{var a;if(i.isGroup)return(a=i.children)===null||a===void 0?void 0:a.some(({rawNode:s})=>n?n(s):s.icon);const{rawNode:o}=i;return n?n(o):o.icon})}),hasSubmenuRef:re(()=>{const{value:n}=e;return r.tmNodes.some(i=>{var a;if(i.isGroup)return(a=i.children)===null||a===void 0?void 0:a.some(({rawNode:s})=>EP(s,n));const{rawNode:o}=i;return EP(o,n)})})})},render(){const{parentKey:r,clsPrefix:t}=this;return I("div",{class:`${t}-dropdown-menu`},this.tmNodes.map(e=>{const{rawNode:n}=e;return $9e(n)?I(U9e,{tmNode:e,key:e.key}):Fq(n)?I($q,{clsPrefix:t,key:e.key}):B9e(n)?I(G9e,{clsPrefix:t,tmNode:e,parentKey:r,key:e.key}):I(Bq,{clsPrefix:t,tmNode:e,parentKey:r,key:e.key,props:n.props})}),this.showArrow?YX({clsPrefix:t,arrowStyle:this.arrowStyle}):null)}}),V9e=de("dropdown-menu",`
 transform-origin: inherit;
 padding: var(--padding);
 background-color: var(--color);
 border-radius: var(--border-radius);
 box-shadow: var(--box-shadow);
 transition:
 background-color .3s var(--bezier),
 box-shadow .3s var(--bezier);
`,[nf(),de("dropdown-option",`
 position: relative;
 `,[_e("a",`
 text-decoration: none;
 color: inherit;
 `,[_e("&::before",`
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),de("dropdown-option-body",`
 display: flex;
 cursor: pointer;
 height: var(--option-height);
 line-height: var(--option-height);
 font-size: var(--font-size);
 color: var(--option-text-color);
 transition:
 background-color .3s var(--bezier),
 color .3s var(--bezier);
 `,[Ge("pending",[Mn("disabled",{color:"var(--option-text-color-hover)",backgroundColor:"var(--option-color-hover)"}),Se("prefix, suffix",{color:"var(--option-text-color-hover)"})]),Ge("active",[Mn("disabled",{color:"var(--option-text-color-active)",backgroundColor:"var(--option-color-active)"}),Se("prefix, suffix",{color:"var(--option-text-color-active)"})]),Ge("disabled",{cursor:"not-allowed",opacity:"var(--option-opacity-disabled)"}),Ge("child-active",{color:"var(--option-text-color-child-active)"},[Se("prefix, suffix",{color:"var(--option-text-color-child-active)"})]),Ge("group",{fontSize:"calc(var(--font-size) - 1px)",color:"var(--group-header-text-color)"},[Se("prefix",{width:"calc(var(--option-prefix-width) / 2)"},[Ge("show-icon",{width:"calc(var(--option-icon-prefix-width) / 2)"})])]),Se("prefix",`
 width: var(--option-prefix-width);
 display: flex;
 justify-content: center;
 align-items: center;
 color: var(--prefix-color);
 transition: color .3s var(--bezier);
 `,[Ge("show-icon",{width:"var(--option-icon-prefix-width)"}),de("icon",{fontSize:"var(--option-icon-size)"})]),Se("label",{whiteSpace:"nowrap",flex:1}),Se("suffix",`
 box-sizing: border-box;
 flex-grow: 0;
 flex-shrink: 0;
 display: flex;
 justify-content: flex-end;
 align-items: center;
 min-width: var(--option-suffix-width);
 padding: 0 8px;
 transition: color .3s var(--bezier);
 color: var(--suffix-color);
 `,[Ge("has-submenu",{width:"var(--option-icon-suffix-width)"}),de("icon",{fontSize:"var(--option-icon-size)"})]),de("dropdown-menu",{pointerEvents:"all"})]),de("dropdown-offset-container",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: -4px;
 bottom: -4px;
 `)]),de("dropdown-divider",`
 transition: background-color .3s var(--bezier);
 background-color: var(--divider-color);
 height: 1px;
 margin: 4px 0;
 `),de("dropdown-menu-wrapper",`
 transform-origin: inherit;
 width: fit-content;
 `)]);const dC=Symbol("dropdown"),H9e={animated:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},size:{type:String,default:"medium"},inverted:Boolean,placement:{type:String,default:"bottom"},onSelect:[Function,Array],options:{type:Array,default:()=>[]},showArrow:Boolean,renderLabel:Function,renderIcon:Function,labelField:{type:String,default:"label"},keyField:{type:String,default:"key"},childrenField:{type:String,default:"children"},value:[String,Number]},W9e=Object.keys(eC),j9e=Object.assign(Object.assign(Object.assign({},eC),H9e),rr.props);var Gq=xt({name:"Dropdown",inheritAttrs:!1,props:j9e,setup(r){const t=Oe(!1),e=Qi(Kt(r,"show"),t),n=re(()=>{const{keyField:T,childrenField:E}=r;return qS(r.options,{getKey(M){return M[T]},getDisabled(M){return M.disabled===!0},getIgnored(M){return M.type==="divider"||M.type==="render"},getChildren(M){return M[E]}})}),i=re(()=>n.value.treeNodes),a=Oe(null),o=Oe(null),s=Oe(null),l=re(()=>{var T,E,M;return(M=(E=(T=a.value)!==null&&T!==void 0?T:o.value)!==null&&E!==void 0?E:s.value)!==null&&M!==void 0?M:null}),u=re(()=>n.value.getPath(l.value).keyPath),c=re(()=>n.value.getPath(r.value).keyPath),f=xi(()=>r.keyboard&&e.value);TI({keydown:{ArrowUp:{prevent:!0,handler:x},ArrowRight:{prevent:!0,handler:b},ArrowDown:{prevent:!0,handler:w},ArrowLeft:{prevent:!0,handler:y},Escape:m},keyup:{Enter:S}},f);const{mergedClsPrefixRef:d}=mn(r),h=rr("Dropdown","Dropdown",V9e,D9e,r,d);rn(dC,{labelFieldRef:Kt(r,"labelField"),childrenFieldRef:Kt(r,"childrenField"),renderLabelRef:Kt(r,"renderLabel"),renderIconRef:Kt(r,"renderIcon"),hoverKeyRef:a,keyboardKeyRef:o,lastToggledSubmenuKeyRef:s,pendingKeyPathRef:u,activeKeyPathRef:c,animatedRef:Kt(r,"animated"),mergedShowRef:e,doSelect:v,doUpdateShow:p}),fn(e,T=>{T||g()});function v(T,E){const{onSelect:M}=r;M&&Tt(M,T,E)}function p(T){const{"onUpdate:show":E}=r;E&&Tt(E,T),t.value=T}function g(){a.value=null,o.value=null,s.value=null}function m(){p(!1)}function y(){_("left")}function b(){_("right")}function x(){_("up")}function w(){_("down")}function S(){const T=C();(T==null?void 0:T.isLeaf)&&(v(T.key,T.rawNode),p(!1))}function C(){var T;const{value:E}=n,{value:M}=l;return!E||M===null?null:(T=E.getNode(M))!==null&&T!==void 0?T:null}function _(T){const{value:E}=l,{value:{getFirstAvailableNode:M}}=n;let k=null;if(E===null){const P=M();P!==null&&(k=P.key)}else{const P=C();if(P){let F;switch(T){case"down":F=P.getNext();break;case"up":F=P.getPrev();break;case"right":F=P.getChild();break;case"left":F=P.getParent();break}F&&(k=F.key)}}k!==null&&(a.value=null,o.value=k)}return{mergedClsPrefix:d,mergedTheme:h,tmNodes:i,mergedShow:e,doUpdateShow:p,cssVars:re(()=>{const{size:T,inverted:E}=r,{common:{cubicBezierEaseInOut:M},self:k}=h.value,{padding:P,dividerColor:F,borderRadius:$,optionOpacityDisabled:R,[Ot("optionIconSuffixWidth",T)]:L,[Ot("optionSuffixWidth",T)]:O,[Ot("optionIconPrefixWidth",T)]:B,[Ot("optionPrefixWidth",T)]:U,[Ot("fontSize",T)]:W,[Ot("optionHeight",T)]:X,[Ot("optionIconSize",T)]:ae}=k,Z={"--bezier":M,"--font-size":W,"--padding":P,"--border-radius":$,"--option-height":X,"--option-prefix-width":U,"--option-icon-prefix-width":B,"--option-suffix-width":O,"--option-icon-suffix-width":L,"--option-icon-size":ae,"--divider-color":F,"--option-opacity-disabled":R};return E?(Z["--color"]=k.colorInverted,Z["--option-color-hover"]=k.optionColorHoverInverted,Z["--option-color-active"]=k.optionColorActiveInverted,Z["--option-text-color"]=k.optionTextColorInverted,Z["--option-text-color-hover"]=k.optionTextColorHoverInverted,Z["--option-text-color-active"]=k.optionTextColorActiveInverted,Z["--option-text-color-child-active"]=k.optionTextColorChildActiveInverted,Z["--prefix-color"]=k.prefixColorInverted,Z["--suffix-color"]=k.suffixColorInverted,Z["--group-header-text-color"]=k.groupHeaderTextColorInverted):(Z["--color"]=k.color,Z["--option-color-hover"]=k.optionColorHover,Z["--option-color-active"]=k.optionColorActive,Z["--option-text-color"]=k.optionTextColor,Z["--option-text-color-hover"]=k.optionTextColorHover,Z["--option-text-color-active"]=k.optionTextColorActive,Z["--option-text-color-child-active"]=k.optionTextColorChildActive,Z["--prefix-color"]=k.prefixColor,Z["--suffix-color"]=k.suffixColor,Z["--group-header-text-color"]=k.groupHeaderTextColor),Z})}},render(){const r=(n,i,a,o,s)=>{const{mergedClsPrefix:l}=this,u={ref:GGe(i),class:[n,`${l}-dropdown`,this.showArrow&&`${l}-popover--show-arrow`],clsPrefix:l,tmNodes:this.tmNodes,style:[a,this.cssVars],showArrow:this.showArrow,arrowStyle:this.arrowStyle,onMouseenter:o,onMouseleave:s};return I(zq,El(this.$attrs,u))},{mergedTheme:t}=this,e={show:this.mergedShow,theme:t.peers.Popover,themeOverrides:t.peerOverrides.Popover,internalRenderBody:r,onUpdateShow:this.doUpdateShow};return I(m0,Object.assign({},Hu(this.$props,W9e),e),{trigger:this.$slots.default,_:1})}});const Uq="_n_all__",Vq="_n_none__";function Y9e(r,t,e,n){return r?i=>{for(const a of r)switch(i){case Uq:e(!0);return;case Vq:n(!0);return;default:if(typeof a=="object"&&a.key===i){a.onSelect(t.value);return}}}:()=>{}}function X9e(r,t){return r?r.map(e=>{switch(e){case"all":return{label:t.checkTableAll,key:Uq};case"none":return{label:t.uncheckTableAll,key:Vq};default:return e}}):[]}var q9e=xt({name:"DataTableSelectionMenu",props:{clsPrefix:{type:String,required:!0}},setup(){const{localeRef:r,checkOptionsRef:t,rawPaginatedDataRef:e,doCheckAll:n,doUncheckAll:i}=or(ju);return{handleSelect:re(()=>Y9e(t.value,e,n,i)),options:re(()=>X9e(t.value,r.value))}},render(){const{clsPrefix:r}=this;return I(Gq,{options:this.options,onSelect:this.handleSelect},{default:()=>I(si,{clsPrefix:r,class:`${r}-data-table-check-extra`},{default:()=>I(vX,null)})})}});function TP(r){return typeof r.title=="function"?r.title(r):r.title}var Hq=xt({name:"DataTableHeader",props:{discrete:{type:Boolean,default:!0}},setup(){const{mergedClsPrefixRef:r,scrollXRef:t,fixedColumnLeftMapRef:e,fixedColumnRightMapRef:n,mergedCurrentPageRef:i,allRowsCheckedRef:a,someRowsCheckedRef:o,rowsRef:s,colsRef:l,mergedThemeRef:u,checkOptionsRef:c,mergedSortStateRef:f,componentId:d,scrollPartRef:h,mergedTableLayoutRef:v,headerCheckboxDisabledRef:p,handleTableHeaderScroll:g,deriveNextSorter:m,doUncheckAll:y,doCheckAll:b}=or(ju);function x(){o.value||a.value?y():b()}function w(C,_){if(Vd(C,"dataTableFilter")||!CP(_))return;const T=f.value.find(M=>M.columnKey===_.key)||null,E=_9e(_,T);m(E)}function S(){h.value="head"}return{componentId:d,mergedSortState:f,mergedClsPrefix:r,scrollX:t,fixedColumnLeftMap:e,fixedColumnRightMap:n,currentPage:i,allRowsChecked:a,someRowsChecked:o,rows:s,cols:l,mergedTheme:u,checkOptions:c,mergedTableLayout:v,headerCheckboxDisabled:p,handleMouseenter:S,handleCheckboxUpdateChecked:x,handleColHeaderClick:w,handleTableHeaderScroll:g}},render(){const{mergedClsPrefix:r,fixedColumnLeftMap:t,fixedColumnRightMap:e,currentPage:n,allRowsChecked:i,someRowsChecked:a,rows:o,cols:s,mergedTheme:l,checkOptions:u,componentId:c,discrete:f,mergedTableLayout:d,headerCheckboxDisabled:h,mergedSortState:v,handleColHeaderClick:p,handleCheckboxUpdateChecked:g}=this,m=I("thead",{class:`${r}-data-table-thead`,"data-n-id":c},o.map(w=>I("tr",{class:`${r}-data-table-tr`},w.map(({column:S,colSpan:C,rowSpan:_,isLast:T})=>{var E,M;const k=fh(S),{ellipsis:P}=S,F=k in t,$=k in e;return I("th",{key:k,style:{textAlign:S.align,left:fo((E=t[k])===null||E===void 0?void 0:E.start),right:fo((M=e[k])===null||M===void 0?void 0:M.start)},colspan:C,rowspan:_,"data-col-key":k,class:[`${r}-data-table-th`,(F||$)&&`${r}-data-table-th--fixed-${F?"left":"right"}`,{[`${r}-data-table-th--hover`]:Lq(S,v),[`${r}-data-table-th--filterable`]:Rq(S),[`${r}-data-table-th--sortable`]:CP(S),[`${r}-data-table-th--selection`]:S.type==="selection",[`${r}-data-table-th--last`]:T},S.className],onClick:S.type!=="selection"&&S.type!=="expand"&&!("children"in S)?R=>{p(R,S)}:void 0},S.type==="selection"?I(Wi,null,I(mP,{key:n,privateInsideTable:!0,checked:i,indeterminate:a,disabled:h,onUpdateChecked:g}),u?I(q9e,{clsPrefix:r}):null):P===!0||P&&!P.tooltip?I("div",{class:`${r}-data-table-th__ellipsis`},TP(S)):P&&P.tooltip?I(Iq,{tooltip:P.tooltip,theme:l.peers.Ellipsis,themeOverrides:l.peerOverrides.Ellipsis},{default:()=>TP(S)}):TP(S),CP(S)?I(f9e,{column:S}):null,Rq(S)?I(M9e,{column:S,options:S.filterOptions}):null)}))));if(!f)return m;const{handleTableHeaderScroll:y,handleMouseenter:b,scrollX:x}=this;return I("div",{class:`${r}-data-table-base-table-header`,onScroll:y,onMouseenter:b},I("table",{ref:"body",class:`${r}-data-table-table`,style:{minWidth:sa(x),tableLayout:d}},I("colgroup",null,s.map(w=>I("col",{key:w.key,style:w.style}))),m))}}),K9e=xt({name:"DataTableCell",props:{row:{type:Object,required:!0},index:{type:Number,required:!0},column:{type:Object,required:!0},isSummary:Boolean,mergedTheme:{type:Object,required:!0}},render(){const{isSummary:r,column:{render:t,key:e,ellipsis:n},row:i}=this;let a;t&&!r?a=t(i,this.index):r?a=i[e].value:a=yI(i,e);const o=typeof n=="object"?n.tooltip:void 0;if(o){const{mergedTheme:s}=this;return I(Iq,{tooltip:o,theme:s.peers.Ellipsis,themeOverrides:s.peerOverrides.Ellipsis},{default:()=>a})}return a}}),Wq=xt({name:"DataTableExpandTrigger",props:{clsPrefix:{type:String,required:!0},expanded:Boolean,onClick:{type:Function,required:!0}},render(){return I(si,{class:`${this.clsPrefix}-data-table-expand-trigger`,clsPrefix:this.clsPrefix,onClick:this.onClick},{default:()=>I(LI,{style:this.expanded?"transform: rotate(90deg);":void 0})})}}),Z9e=xt({name:"DataTableBodyCheckbox",props:{rowKey:{type:[String,Number],required:!0},disabled:{type:Boolean,required:!0},onUpdateChecked:{type:Function,required:!0}},setup(r){const{mergedCheckedRowKeySetRef:t,mergedInderminateRowKeySetRef:e}=or(ju);return()=>{const{rowKey:n}=r;return I(mP,{privateInsideTable:!0,disabled:r.disabled,indeterminate:e.value.has(n),checked:t.value.has(n),onUpdateChecked:r.onUpdateChecked})}}});function Q9e(r,t){const e=[];function n(i){i.forEach(a=>{a.children&&t.has(a.key)?(e.push({tmNode:a,striped:!1,key:a.key}),n(a.children)):e.push({key:a.key,tmNode:a,striped:!1})})}return r.forEach(i=>{e.push(i);const{children:a}=i.tmNode;a&&t.has(i.key)&&n(a)}),e}const J9e=xt({props:{clsPrefix:{type:String,required:!0},id:{type:String,required:!0},cols:{type:Array,required:!0},onMouseenter:Function,onMouseleave:Function},render(){const{clsPrefix:r,id:t,cols:e,onMouseenter:n,onMouseleave:i}=this;return I("table",{style:{tableLayout:"fixed"},class:`${r}-data-table-table`,onMouseenter:n,onMouseleave:i},I("colgroup",null,e.map(a=>I("col",{key:a.key,style:a.style}))),I("tbody",{"data-n-id":t,class:`${r}-data-table-tbody`},this.$slots))}});var e7e=xt({name:"DataTableBody",props:{onResize:Function,showHeader:Boolean,flexHeight:Boolean},setup(r){const{mergedExpandedRowKeysRef:t,mergedClsPrefixRef:e,mergedThemeRef:n,scrollXRef:i,colsRef:a,paginatedDataRef:o,rawPaginatedDataRef:s,fixedColumnLeftMapRef:l,fixedColumnRightMapRef:u,mergedCurrentPageRef:c,rowClassNameRef:f,leftActiveFixedColKeyRef:d,rightActiveFixedColKeyRef:h,renderExpandRef:v,hoverKeyRef:p,summaryRef:g,mergedSortStateRef:m,virtualScrollRef:y,componentId:b,scrollPartRef:x,mergedTableLayoutRef:w,hasChildrenRef:S,firstContentfulColIndexRef:C,indentRef:_,rowPropsRef:T,maxHeightRef:E,stripedRef:M,setHeaderScrollLeft:k,doUpdateExpandedRowKeys:P,handleTableBodyScroll:F,doCheck:$,doUncheck:R}=or(ju),L=Oe(null),O=Oe(null);let B="";const U=re(()=>new Set(t.value));function W(D,z,H){if(H){const he=o.value.findIndex(te=>te.key===B);if(he!==-1){const te=o.value.findIndex(Ie=>Ie.key===D.key),ge=Math.min(he,te),Qe=Math.max(he,te),Ve=[];o.value.slice(ge,Qe+1).forEach(Ie=>{Ie.disabled||Ve.push(Ie.key)}),z?$(Ve):R(Ve),B=D.key;return}}z?$(D.key):R(D.key),B=D.key}function X(){if(y.value)return fe();const{value:D}=L;return D?D.containerRef:null}function ae(D){const{value:z}=t,H=z.indexOf(D),he=Array.from(z);~H?he.splice(H,1):he.push(D),P(he)}function Z(){p.value=null}function Y(){x.value="body"}function fe(){const{value:D}=O;return D==null?void 0:D.listElRef}function le(){const{value:D}=O;return D==null?void 0:D.itemsElRef}function ue(D){var z;F(D),(z=L.value)===null||z===void 0||z.sync()}function Ee(D){var z;const{onResize:H}=r;H&&H(D),(z=L.value)===null||z===void 0||z.sync()}const De={getScrollContainer:X},je=_e([({props:D})=>_e([D.leftActiveFixedColKey===null?null:_e(`[data-n-id="${D.componentId}"] [data-col-key="${D.leftActiveFixedColKey}"]::after`,{boxShadow:"var(--box-shadow-after)"}),D.rightActiveFixedColKey===null?null:_e(`[data-n-id="${D.componentId}"] [data-col-key="${D.rightActiveFixedColKey}"]::before`,{boxShadow:"var(--box-shadow-before)"})])]);let ke=!1;return Ks(()=>{const{value:D}=d,{value:z}=h;!ke&&D===null&&z===null||(je.mount({id:`n-${b}`,force:!0,props:{leftActiveFixedColKey:D,rightActiveFixedColKey:z,componentId:b}}),ke=!0)}),m_(()=>{je.unmount({id:`n-${b}`})}),Object.assign({componentId:b,scrollbarInstRef:L,virtualListRef:O,summary:g,mergedClsPrefix:e,mergedTheme:n,scrollX:i,cols:a,paginatedData:re(()=>{const{value:D}=M;return o.value.map(D?(z,H)=>({tmNode:z,key:z.key,striped:H%2==1}):z=>({tmNode:z,key:z.key,striped:!1}))}),rawPaginatedData:s,fixedColumnLeftMap:l,fixedColumnRightMap:u,currentPage:c,rowClassName:f,renderExpand:v,mergedExpandedRowKeySet:U,hoverKey:p,mergedSortState:m,virtualScroll:y,mergedTableLayout:w,hasChildren:S,firstContentfulColIndex:C,indent:_,rowProps:T,maxHeight:E,setHeaderScrollLeft:k,handleMouseenterTable:Y,handleVirtualListScroll:ue,handleVirtualListResize:Ee,handleMouseleaveTable:Z,virtualListContainer:fe,virtualListContent:le,handleTableBodyScroll:F,handleCheckboxUpdateChecked:W,handleUpdateExpanded:ae},De)},render(){const{mergedTheme:r,scrollX:t,mergedClsPrefix:e,virtualScroll:n,maxHeight:i,mergedTableLayout:a,flexHeight:o,onResize:s,setHeaderScrollLeft:l}=this,u=t!==void 0||i!==void 0||o,c=!u&&a==="auto",f=t!==void 0||c,d={minWidth:sa(t)||"100%"};return t&&(d.width="100%"),I(Bs,{ref:"scrollbarInstRef",scrollable:u||c,class:`${e}-data-table-base-table-body`,theme:r.peers.Scrollbar,themeOverrides:r.peerOverrides.Scrollbar,contentStyle:d,container:n?this.virtualListContainer:void 0,content:n?this.virtualListContent:void 0,horizontalRailStyle:{zIndex:3},verticalRailStyle:{zIndex:3},xScrollable:f,onScroll:n?void 0:this.handleTableBodyScroll,internalOnUpdateScrollLeft:l,onResize:s},{default:()=>{const h={},v={},{cols:p,paginatedData:g,mergedTheme:m,fixedColumnLeftMap:y,fixedColumnRightMap:b,currentPage:x,rowClassName:w,mergedSortState:S,mergedExpandedRowKeySet:C,componentId:_,showHeader:T,hasChildren:E,firstContentfulColIndex:M,rowProps:k,handleMouseenterTable:P,handleMouseleaveTable:F,renderExpand:$,summary:R,handleCheckboxUpdateChecked:L,handleUpdateExpanded:O}=this,{length:B}=p;let U;const W=E?Q9e(g,C):g;if(R){const le=R(this.rawPaginatedData);Array.isArray(le)?U=[...W,...le.map((ue,Ee)=>({isSummaryRow:!0,key:`__n_summary__${Ee}`,tmNode:{rawNode:ue,disabled:!0}}))]:U=[...W,{isSummaryRow:!0,key:"__n_summary__",tmNode:{rawNode:le,disabled:!0}}]}else U=W;const X=E?{width:fo(this.indent)}:void 0,ae=[];U.forEach(le=>{$&&C.has(le.key)?ae.push(le,{isExpandedRow:!0,key:le.key,tmNode:le.tmNode}):ae.push(le)});const{length:Z}=ae,Y={};g.forEach(({tmNode:le},ue)=>{Y[ue]=le.key});const fe=(le,ue,Ee)=>{if("isExpandedRow"in le){const{tmNode:{key:Qe,rawNode:Ve}}=le;return I("tr",{class:`${e}-data-table-tr`,key:`${Qe}__expand`},I("td",{class:[`${e}-data-table-td`,`${e}-data-table-td--last-col`,ue+1===Z&&`${e}-data-table-td--last-row`],colspan:B},$(Ve,ue)))}const De="isSummaryRow"in le,je=!De&&le.striped,{tmNode:ke,key:D}=le,{rawNode:z}=ke,H=C.has(D),he=k?k(z,ue):void 0,te=typeof w=="string"?w:E9e(z,ue,w);return I("tr",Object.assign({onMouseenter:()=>{this.hoverKey=D},key:D,class:[`${e}-data-table-tr`,je&&`${e}-data-table-tr--striped`,te]},he),p.map((Qe,Ve)=>{var Ie,Be,V,j,q;if(!Ee&&ue in h){const Ae=h[ue],ut=Ae.indexOf(Ve);if(~ut)return Ae.splice(ut,1),null}const{column:ee}=Qe,Q=fh(Qe),{rowSpan:me,colSpan:He}=ee,ze=De?((Ie=le.tmNode.rawNode[Q])===null||Ie===void 0?void 0:Ie.colSpan)||1:He?He(z,ue):1,it=De?((Be=le.tmNode.rawNode[Q])===null||Be===void 0?void 0:Be.rowSpan)||1:me?me(z,ue):1,we=Ve+ze===B,nt=ue+it===Z,st=it>1;if(st&&(v[ue]={[Ve]:[]}),ze>1||st)for(let Ae=ue;Ae<ue+it;++Ae){st&&v[ue][Ve].push(Y[Ae]);for(let ut=Ve;ut<Ve+ze;++ut)Ae===ue&&ut===Ve||(Ae in h?h[Ae].push(ut):h[Ae]=[ut])}const jt=st?this.hoverKey:null,{ellipsis:Jt}=ee;return I("td",{key:Q,style:{textAlign:ee.align||void 0,left:fo((V=y[Q])===null||V===void 0?void 0:V.start),right:fo((j=b[Q])===null||j===void 0?void 0:j.start)},colspan:ze,rowspan:Ee?void 0:it,"data-col-key":Q,class:[`${e}-data-table-td`,ee.className,De&&`${e}-data-table-td--summary`,(jt!==null&&v[ue][Ve].includes(jt)||Lq(ee,S))&&`${e}-data-table-td--hover`,ee.fixed&&`${e}-data-table-td--fixed-${ee.fixed}`,ee.align&&`${e}-data-table-td--${ee.align}-align`,{[`${e}-data-table-td--ellipsis`]:Jt===!0||Jt&&!Jt.tooltip,[`${e}-data-table-td--selection`]:ee.type==="selection",[`${e}-data-table-td--expand`]:ee.type==="expand",[`${e}-data-table-td--last-col`]:we,[`${e}-data-table-td--last-row`]:nt}]},E&&Ve===M?[g$e(De?0:le.tmNode.level,I("div",{class:`${e}-data-table-indent`,style:X})),De||!le.tmNode.children?I("div",{class:`${e}-data-table-expand-placeholder`}):I(Wq,{class:`${e}-data-table-expand-trigger`,clsPrefix:e,expanded:H,onClick:()=>{O(D)}})]:null,ee.type==="selection"?De?null:I(Z9e,{key:x,rowKey:D,disabled:le.tmNode.disabled,onUpdateChecked:(Ae,ut)=>L(le.tmNode,Ae,ut.shiftKey)}):ee.type==="expand"?De?null:!ee.expandable||((q=ee.expandable)===null||q===void 0?void 0:q.call(ee,z,ue))?I(Wq,{clsPrefix:e,expanded:H,onClick:()=>O(D)}):null:I(K9e,{index:ue,row:z,column:ee,isSummary:De,mergedTheme:m}))}))};return n?I(JI,{ref:"virtualListRef",items:ae,itemSize:28,visibleItemsTag:J9e,visibleItemsProps:{clsPrefix:e,id:_,cols:p,onMouseenter:P,onMouseleave:F},showScrollbar:!1,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemsStyle:d,itemResizable:!0},{default:({item:le,index:ue})=>fe(le,ue,!0)}):I("table",{class:`${e}-data-table-table`,onMouseleave:F,onMouseenter:P,style:{tableLayout:this.mergedTableLayout}},I("colgroup",null,p.map(le=>I("col",{key:le.key,style:le.style}))),T?I(Hq,{discrete:!1}):null,I("tbody",{"data-n-id":_,class:`${e}-data-table-tbody`},ae.map((le,ue)=>fe(le,ue,!1))))}})}}),t7e=xt({setup(){const{mergedClsPrefixRef:r,rightFixedColumnsRef:t,leftFixedColumnsRef:e,bodyWidthRef:n,maxHeightRef:i,minHeightRef:a,flexHeightRef:o,syncScrollState:s}=or(ju),l=Oe(null),u=Oe(null),c=Oe(null),f=Oe(!(e.value.length||t.value.length)),d=re(()=>({maxHeight:sa(i.value),minHeight:sa(a.value)}));function h(m){n.value=m.contentRect.width,s(),f.value||(f.value=!0)}function v(){const{value:m}=l;return m?m.$el:null}function p(){const{value:m}=u;return m?m.getScrollContainer():null}const g={getBodyElement:p,getHeaderElement:v};return Ks(()=>{const{value:m}=c;if(!m)return;const y=`${r.value}-data-table-base-table--transition-disabled`;f.value?setTimeout(()=>{m.classList.remove(y)},0):m.classList.add(y)}),Object.assign({maxHeight:i,mergedClsPrefix:r,selfElRef:c,headerInstRef:l,bodyInstRef:u,bodyStyle:d,flexHeight:o,handleBodyResize:h},g)},render(){const{mergedClsPrefix:r,maxHeight:t,flexHeight:e}=this,n=t===void 0&&!e;return I("div",{class:`${r}-data-table-base-table`,ref:"selfElRef"},n?null:I(Hq,{ref:"headerInstRef"}),I(e7e,{ref:"bodyInstRef",style:this.bodyStyle,showHeader:n,flexHeight:e,onResize:this.handleBodyResize}),qr(this.$slots,"default"))}});function r7e(r,t){const{paginatedDataRef:e,treeMateRef:n,selectionColumnRef:i}=t,a=Oe(r.defaultCheckedRowKeys),o=re(()=>{const{checkedRowKeys:w}=r;return n.value.getCheckedKeys(w===void 0?a.value:w,{cascade:r.cascade})}),s=re(()=>o.value.checkedKeys),l=re(()=>o.value.indeterminateKeys),u=re(()=>new Set(s.value)),c=re(()=>new Set(l.value)),f=re(()=>{const{value:w}=u;return e.value.reduce((S,C)=>{const{key:_,disabled:T}=C;return S+(!T&&w.has(_)?1:0)},0)}),d=re(()=>e.value.filter(w=>w.disabled).length),h=re(()=>{const{length:w}=e.value,{value:S}=c;return f.value>0&&f.value<w-d.value||e.value.some(C=>S.has(C.key))}),v=re(()=>{const{length:w}=e.value;return f.value!==0&&f.value===w-d.value}),p=re(()=>e.value.length===0);function g(w){const{"onUpdate:checkedRowKeys":S,onUpdateCheckedRowKeys:C,onCheckedRowKeysChange:_}=r;S&&Tt(S,w),C&&Tt(C,w),_&&Tt(_,w),a.value=w}function m(w){g(n.value.check(w,s.value,{cascade:r.cascade}).checkedKeys)}function y(w){g(n.value.uncheck(w,s.value,{cascade:r.cascade}).checkedKeys)}function b(w=!1){const{value:S}=i;if(!S)return;const C=[];(w?n.value.treeNodes:e.value).forEach(_=>{_.disabled||C.push(_.key)}),g(n.value.check(C,s.value,{cascade:!0}).checkedKeys)}function x(w=!1){const{value:S}=i;if(!S)return;const C=[];(w?n.value.treeNodes:e.value).forEach(_=>{_.disabled||C.push(_.key)}),g(n.value.uncheck(C,s.value,{cascade:!0}).checkedKeys)}return{mergedCheckedRowKeySetRef:u,mergedCheckedRowKeysRef:s,mergedInderminateRowKeySetRef:c,someRowsCheckedRef:h,allRowsCheckedRef:v,headerCheckboxDisabledRef:p,doUpdateCheckedRowKeys:g,doCheckAll:b,doUncheckAll:x,doCheck:m,doUncheck:y}}function hC(r){return typeof r=="object"&&typeof r.multiple=="number"?r.multiple:!1}function n7e(r,t){return t&&(r===void 0||r==="default"||typeof r=="object"&&r.compare==="default")?i7e(t):typeof r=="function"?r:r&&typeof r=="object"&&r.compare&&r.compare!=="default"?r.compare:!1}function i7e(r){return(t,e)=>{const n=t[r],i=e[r];return typeof n=="number"&&typeof i=="number"?n-i:typeof n=="string"&&typeof i=="string"?n.localeCompare(i):0}}function a7e(r,{dataRelatedColsRef:t,filteredDataRef:e}){const n=[];t.value.forEach(h=>{var v;h.sorter!==void 0&&d(n,{columnKey:h.key,sorter:h.sorter,order:(v=h.defaultSortOrder)!==null&&v!==void 0?v:!1})});const i=Oe(n),a=re(()=>{const h=t.value.filter(g=>g.type!=="selection"&&g.sorter!==void 0&&(g.sortOrder==="ascend"||g.sortOrder==="descend"||g.sortOrder===!1)),v=h.filter(g=>g.sortOrder!==!1);if(v.length)return v.map(g=>({columnKey:g.key,order:g.sortOrder,sorter:g.sorter}));if(h.length)return[];const{value:p}=i;return Array.isArray(p)?p:p?[p]:[]}),o=re(()=>{const h=a.value.slice().sort((v,p)=>{const g=hC(v.sorter)||0;return(hC(p.sorter)||0)-g});return h.length?e.value.slice().sort((p,g)=>{let m=0;return h.some(y=>{const{columnKey:b,sorter:x,order:w}=y,S=n7e(x,b);return S&&w&&(m=S(p.rawNode,g.rawNode),m!==0)?(m=m*S9e(w),!0):!1}),m}):e.value});function s(h){let v=a.value.slice();return h&&hC(h.sorter)!==!1?(v=v.filter(p=>hC(p.sorter)!==!1),d(v,h),v):h||null}function l(h){const v=s(h);u(v)}function u(h){const{"onUpdate:sorter":v,onUpdateSorter:p,onSorterChange:g}=r;v&&Tt(v,h),p&&Tt(p,h),g&&Tt(g,h),i.value=h}function c(h,v="ascend"){if(!h)f();else{const p=t.value.find(m=>m.type!=="selection"&&m.type!=="expand"&&m.key===h);if(!p||!p.sorter)return;const g=p.sorter;l({columnKey:h,sorter:g,order:v})}}function f(){u(null)}function d(h,v){const p=h.findIndex(g=>(v==null?void 0:v.columnKey)&&g.columnKey===v.columnKey);p!==void 0&&p>=0?h[p]=v:h.push(v)}return{clearSorter:f,sort:c,sortedDataRef:o,mergedSortStateRef:a,deriveNextSorter:l}}function o7e(r,{dataRelatedColsRef:t}){const e=re(()=>r.columns.find(O=>O.type==="selection")||null),n=re(()=>{const{childrenKey:O}=r;return qS(r.data,{ignoreEmptyChildren:!0,getKey:r.rowKey,getChildren:B=>B[O],getDisabled:B=>{var U,W;return!!((W=(U=e.value)===null||U===void 0?void 0:U.disabled)===null||W===void 0?void 0:W.call(U,B))}})}),i=xi(()=>{const{columns:O}=r,{length:B}=O;for(let U=0;U<B;++U)if(!O[U].type)return U;return 0}),a=Oe({}),o=Oe(1),s=Oe(10),l=re(()=>{const O=t.value.filter(W=>W.filterOptionValues!==void 0||W.filterOptionValue!==void 0),B={};return O.forEach(W=>{W.type==="selection"||W.type==="expand"||(B[W.key]=W.filterOptionValues||W.filterOptionValue||null)}),Object.assign(Dq(a.value),B)}),u=re(()=>{const O=l.value,{columns:B}=r;function U(ae){return(Z,Y)=>!!~String(Y[ae]).indexOf(String(Z))}const{value:{treeNodes:W}}=n,X=[];return B.forEach(ae=>{ae.type==="selection"||ae.type==="expand"||"children"in ae||X.push([ae.key,ae])}),W?W.filter(ae=>{const{rawNode:Z}=ae;for(const[Y,fe]of X){let le=O[Y];if(le==null||(Array.isArray(le)||(le=[le]),!le.length))continue;const ue=fe.filter==="default"?U(Y):fe.filter;if(fe&&typeof ue=="function")if(fe.filterMode==="and"){if(le.some(Ee=>!ue(Ee,Z)))return!1}else{if(le.some(Ee=>ue(Ee,Z)))continue;return!1}}return!0}):[]}),{sortedDataRef:c,deriveNextSorter:f,mergedSortStateRef:d,sort:h,clearSorter:v}=a7e(r,{dataRelatedColsRef:t,filteredDataRef:u});t.value.forEach(O=>{var B;if(O.filter){const U=O.defaultFilterOptionValues;O.filterMultiple?a.value[O.key]=U||[]:U!==void 0?a.value[O.key]=U===null?[]:U:a.value[O.key]=(B=O.defaultFilterOptionValue)!==null&&B!==void 0?B:null}});const p=re(()=>{const{pagination:O}=r;if(O!==!1)return O.page}),g=re(()=>{const{pagination:O}=r;if(O!==!1)return O.pageSize}),m=Qi(p,o),y=Qi(g,s),b=re(()=>{const{pagination:O}=r;if(O){const{pageCount:B}=O;if(B!==void 0)return B}}),x=re(()=>{if(r.remote)return n.value.treeNodes;if(!r.pagination)return c.value;const O=y.value,B=(m.value-1)*O;return c.value.slice(B,B+O)}),w=re(()=>x.value.map(O=>O.rawNode));function S(O){const{pagination:B}=r;if(B){const{onChange:U,"onUpdate:page":W,onUpdatePage:X}=B;U&&Tt(U,O),X&&Tt(X,O),W&&Tt(W,O),E(O)}}function C(O){const{pagination:B}=r;if(B){const{onPageSizeChange:U,"onUpdate:pageSize":W}=B;U&&Tt(U,O),W&&Tt(W,O),M(O)}}const _=re(()=>{if(r.remote){const{pagination:O}=r;if(O){const{itemCount:B}=O;if(B!==void 0)return B}return}return u.value.length}),T=re(()=>Object.assign(Object.assign({},r.pagination),{onChange:void 0,onUpdatePage:void 0,onUpdatePageSize:void 0,onPageSizeChange:void 0,"onUpdate:page":S,"onUpdate:pageSize":C,page:m.value,pageSize:y.value,pageCount:_.value===void 0?b.value:void 0,itemCount:_.value}));function E(O){const{"onUpdate:page":B,onPageChange:U,onUpdatePage:W}=r;W&&Tt(W,O),B&&Tt(B,O),U&&Tt(U,O),o.value=O}function M(O){const{"onUpdate:pageSize":B,onPageSizeChange:U,onUpdatePageSize:W}=r;U&&Tt(U,O),W&&Tt(W,O),B&&Tt(B,O),s.value=O}function k(O,B){const{onUpdateFilters:U,"onUpdate:filters":W,onFiltersChange:X}=r;U&&Tt(U,O,B),W&&Tt(W,O,B),X&&Tt(X,O,B),a.value=O}function P(O){E(O)}function F(){$()}function $(){R({})}function R(O){L(O)}function L(O){O?O&&k(Dq(O)):k({})}return{treeMateRef:n,mergedCurrentPageRef:m,mergedPaginationRef:T,paginatedDataRef:x,rawPaginatedDataRef:w,mergedFilterStateRef:l,mergedSortStateRef:d,hoverKeyRef:Oe(null),selectionColumnRef:e,firstContentfulColIndexRef:i,doUpdateFilters:k,deriveNextSorter:f,doUpdatePageSize:M,doUpdatePage:E,filter:L,filters:R,clearFilter:F,clearFilters:$,clearSorter:v,page:P,sort:h}}function s7e(r,{mainTableInstRef:t,mergedCurrentPageRef:e,bodyWidthRef:n,scrollPartRef:i}){let a=0;const o=Oe(null),s=Oe(null),l=re(()=>sa(r.scrollX)),u=re(()=>r.columns.filter(w=>w.fixed==="left")),c=re(()=>r.columns.filter(w=>w.fixed==="right")),f=re(()=>{const w={};let S=0;function C(_){_.forEach(T=>{const E={start:S,end:0};w[fh(T)]=E,"children"in T?(C(T.children),E.end=S):(S+=wP(T)||0,E.end=S)})}return C(u.value),w}),d=re(()=>{const w={};let S=0;function C(_){_.forEach(T=>{const E={start:S,end:0};w[fh(T)]=E,"children"in T?(C(T.children),E.end=S):(S+=wP(T)||0,E.end=S)})}return C(c.value.reverse()),w});function h(){var w,S;const{value:C}=u;let _=0;const{value:T}=f;let E=null;for(let M=0;M<C.length;++M){const k=fh(C[M]);if(a>(((w=T[k])===null||w===void 0?void 0:w.start)||0)-_)E=k,_=((S=T[k])===null||S===void 0?void 0:S.end)||0;else break}o.value=E}function v(){var w,S;const{value:C}=c,_=Number(r.scrollX),{value:T}=n;if(T===null)return;let E=0,M=null;const{value:k}=d;for(let P=0;P<C.length;++P){const F=fh(C[P]);if(Math.round(a+(((w=k[F])===null||w===void 0?void 0:w.start)||0)+T-E)<_)M=F,E=((S=k[F])===null||S===void 0?void 0:S.end)||0;else break}s.value=M}function p(){const w=t.value?t.value.getHeaderElement():null,S=t.value?t.value.getBodyElement():null;return{header:w,body:S}}function g(){const{body:w}=p();w&&(w.scrollTop=0)}function m(){i.value==="head"&&OS(b)}function y(){i.value==="body"&&OS(b)}function b(){const{header:w,body:S}=p();if(!S)return;const{value:C}=n;if(C===null)return;const{value:_}=i;if(r.maxHeight||r.flexHeight){if(!w)return;_==="head"?(a=w.scrollLeft,S.scrollLeft=a):(a=S.scrollLeft,w.scrollLeft=a)}else a=S.scrollLeft;h(),v()}function x(w){const{header:S}=p();!S||(S.scrollLeft=w,b())}return fn(e,()=>{g()}),{styleScrollXRef:l,fixedColumnLeftMapRef:f,fixedColumnRightMapRef:d,leftFixedColumnsRef:u,rightFixedColumnsRef:c,leftActiveFixedColKeyRef:o,rightActiveFixedColKeyRef:s,syncScrollState:b,handleTableBodyScroll:y,handleTableHeaderScroll:m,setHeaderScrollLeft:x}}const jq=u7e();var l7e=_e([de("data-table",`
 width: 100%;
 font-size: var(--font-size);
 display: flex;
 flex-direction: column;
 position: relative;
 --merged-th-color: var(--th-color);
 --merged-td-color: var(--td-color);
 --merged-border-color: var(--border-color);
 --merged-th-color-hover: var(--th-color-hover);
 --merged-td-color-hover: var(--td-color-hover);
 --merged-td-color-striped: var(--td-color-striped);
 `,[Ge("flex-height",[_e(">",[de("data-table-wrapper",`
 flex-grow: 1;
 display: flex;
 flex-direction: column;
 `,[_e(">",[de("data-table-base-table",`
 display: flex;
 flex-direction: column;
 flex-grow: 1;
 `,[_e(">",[de("data-table-base-table-body","flex-basis: 0;",[_e("&:last-child","flex-grow: 1;")])])])])])])]),_e(">",[de("base-loading",`
 color: var(--loading-color);
 font-size: var(--loading-size);
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 transition: color .3s var(--bezier);
 `,[nf({originalTransform:"translateX(-50%) translateY(-50%)"})])]),de("data-table-expand-trigger","cursor: pointer;"),de("data-table-expand-placeholder",`
 margin-right: 8px;
 display: inline-block;
 width: 16px;
 height: 1px;
 `),de("data-table-indent",`
 display: inline-block;
 height: 1px;
 `),de("data-table-expand-trigger",`
 margin-right: 8px;
 cursor: pointer;
 font-size: 16px;
 vertical-align: -0.2em;
 `),de("data-table-thead",{transition:"background-color .3s var(--bezier)",backgroundColor:"var(--merged-th-color)"}),de("data-table-tr",`
 box-sizing: border-box;
 background-clip: padding-box;
 transition: background-color .3s var(--bezier);
 `,[Ge("striped","background-color: var(--merged-td-color-striped);",[de("data-table-td","background-color: var(--merged-td-color-striped);")]),_e("&:hover","background-color: var(--merged-td-color-hover);",[de("data-table-td","background-color: var(--merged-td-color-hover);")])]),de("data-table-th",`
 padding: var(--th-padding);
 position: relative;
 text-align: start;
 box-sizing: border-box;
 background-color: var(--merged-th-color);
 border-color: var(--merged-border-color);
 border-bottom: 1px solid var(--merged-border-color);
 color: var(--th-text-color);
 transition:
 border-color .3s var(--bezier),
 color .3s var(--bezier),
 background-color .3s var(--bezier);
 font-weight: var(--th-font-weight);
 `,[Ge("filterable",{paddingRight:"36px"}),jq,Ge("selection",`
 padding: 0;
 text-align: center;
 line-height: 0;
 z-index: 3;
 `),Se("ellipsis",`
 display: inline-block;
 vertical-align: bottom;
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap;
 max-width: 100%;
 `),Ge("hover",{backgroundColor:"var(--merged-th-color-hover)"}),Ge("sortable",{cursor:"pointer"},[Se("ellipsis",{maxWidth:"calc(100% - 18px)"}),_e("&:hover",{backgroundColor:"var(--merged-th-color-hover)"})]),de("data-table-sorter",`
 height: var(--sorter-size);
 width: var(--sorter-size);
 margin-left: 4px;
 position: relative;
 display: inline-flex;
 vertical-align: -0.2em;
 color: var(--th-icon-color);
 transition: 
 transform .3s var(--bezier),
 color .3s var(--bezier);
 `,[Ge("desc",{transform:"rotate(0)"}),Ge("asc",{transform:"rotate(-180deg)"}),Ge("asc, desc",{color:"var(--th-icon-color-active)"})]),de("data-table-filter",`
 position: absolute;
 z-index: auto;
 right: 0;
 width: 36px;
 top: 0;
 bottom: 0;
 cursor: pointer;
 display: flex;
 justify-content: center;
 align-items: center;
 transition:
 background-color .3s var(--bezier),
 color .3s var(--bezier);
 font-size: var(--filter-size);
 color: var(--th-icon-color);
 `,[_e("&:hover",`
 background-color: var(--th-button-color-hover);
 `),Ge("show",`
 background-color: var(--th-button-color-hover);
 `),Ge("active",`
 background-color: var(--th-button-color-hover);
 color: var(--th-icon-color-active);
 `)])]),de("data-table-td",`
 padding: var(--td-padding);
 text-align: start;
 box-sizing: border-box;
 border: none;
 background-color: var(--merged-td-color);
 color: var(--td-text-color);
 border-bottom: 1px solid var(--merged-border-color);
 transition:
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier),
 border-color .3s var(--bezier),
 color .3s var(--bezier);
 `,[Ge("last-row",{borderBottom:"0 solid var(--merged-border-color)"},[_e("&::after",{bottom:"0 !important"}),_e("&::before",{bottom:"0 !important"})]),Ge("summary",`
 background-color: var(--merged-th-color);
 `),Ge("hover",{backgroundColor:"var(--merged-td-color-hover)"}),Ge("ellipsis",`
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap;
 `),Ge("selection, expand",`
 text-align: center;
 padding: 0;
 line-height: 0;
 `),jq]),de("data-table-empty",`
 padding: var(--empty-padding);
 flex-grow: 1;
 flex-shrink: 0;
 opacity: 1;
 display: flex;
 align-items: center;
 justify-content: center;
 transition: opacity .3s var(--bezier);
 `,[Ge("hide",{opacity:0})]),Se("pagination",`
 margin: var(--pagination-margin);
 display: flex;
 justify-content: flex-end;
 `),de("data-table-wrapper",`
 position: relative;
 opacity: 1;
 transition: opacity .3s var(--bezier), border-color .3s var(--bezier);
 border-top-left-radius: var(--border-radius);
 border-top-right-radius: var(--border-radius);
 line-height: var(--line-height);
 `),Ge("loading",[de("data-table-wrapper","opacity: var(--opacity-loading);")]),Ge("single-column",[de("data-table-td",{borderBottom:"0 solid var(--merged-border-color)"},[_e("&::after, &::before",{bottom:"0 !important"})])]),Mn("single-line",[de("data-table-th",{borderRight:"1px solid var(--merged-border-color)"},[Ge("last",{borderRight:"0 solid var(--merged-border-color)"})]),de("data-table-td",{borderRight:"1px solid var(--merged-border-color)"},[Ge("last-col",{borderRight:"0 solid var(--merged-border-color)"})])]),Ge("bordered",[de("data-table-wrapper",`
 border: 1px solid var(--merged-border-color);
 border-bottom-left-radius: var(--border-radius);
 border-bottom-right-radius: var(--border-radius);
 overflow: hidden;
 `)]),de("data-table-base-table",[Ge("transition-disabled",[de("data-table-th",[_e("&::after, &::before",{transition:"none"})]),de("data-table-td",[_e("&::after, &::before",{transition:"none"})])])]),Ge("bottom-bordered",[de("data-table-td",[Ge("last-row",{borderBottom:"1px solid var(--merged-border-color)"})])]),de("data-table-table",`
 font-variant-numeric: tabular-nums;
 width: 100%;
 word-wrap: break-word;
 word-break: break-all;
 transition: background-color .3s var(--bezier);
 border-collapse: separate;
 border-spacing: 0;
 background-color: var(--merged-td-color);
 `),de("data-table-base-table-header",`
 border-top-left-radius: calc(var(--border-radius) - 1px);
 border-top-right-radius: calc(var(--border-radius) - 1px);
 z-index: 3;
 overflow: scroll;
 flex-shrink: 0;
 transition: border-color .3s var(--bezier);
 scrollbar-width: none;
 `,[_e("&::-webkit-scrollbar",{width:0,height:0})]),de("data-table-check-extra",`
 transition: color .3s var(--bezier);
 color: var(--th-icon-color);
 position: absolute;
 font-size: 14px;
 right: -4px;
 top: 50%;
 transform: translateY(-50%);
 z-index: 1;
 `)]),de("data-table-filter-menu",[de("scrollbar",{maxHeight:"240px"}),Se("group",{display:"flex",flexDirection:"column",padding:"12px 12px 0 12px"},[de("checkbox",{marginBottom:"12px",marginRight:0}),de("radio",{marginBottom:"12px",marginRight:0})]),Se("action",`
 padding: var(--action-padding);
 display: flex;
 flex-wrap: nowrap;
 justify-content: space-evenly;
 border-top: 1px solid var(--action-divider-color);
 `,[de("button",[_e("&:not(:last-child)",{margin:"var(--action-button-margin)"}),_e("&:last-child",{marginRight:0})])]),de("divider",{margin:"0!important"})]),o0(de("data-table",`
 --merged-th-color: var(--th-color-modal);
 --merged-td-color: var(--td-color-modal);
 --merged-border-color: var(--border-color-modal);
 --merged-th-color-hover: var(--th-color-hover-modal);
 --merged-td-color-hover: var(--td-color-hover-modal);
 --merged-td-color-striped: var(--td-color-striped-modal);
 `)),VS(de("data-table",`
 --merged-th-color: var(--th-color-popover);
 --merged-td-color: var(--td-color-popover);
 --merged-border-color: var(--border-color-popover);
 --merged-th-color-hover: var(--th-color-hover-popover);
 --merged-td-color-hover: var(--td-color-hover-popover);
 --merged-td-color-striped: var(--td-color-striped-popover);
 `))]);function u7e(){return[Ge("fixed-left",`
 left: 0;
 position: sticky;
 z-index: 2;
 `,[_e("&::after",`
 pointer-events: none;
 content: "";
 width: 36px;
 display: inline-block;
 position: absolute;
 top: 0;
 bottom: -1px;
 transition: box-shadow .2s var(--bezier);
 right: -36px;
 `)]),Ge("fixed-right",{right:0,position:"sticky",zIndex:1},[_e("&::before",`
 pointer-events: none;
 content: "";
 width: 36px;
 display: inline-block;
 position: absolute;
 top: 0;
 bottom: -1px;
 transition: box-shadow .2s var(--bezier);
 left: -36px;
 `)])]}function c7e(r){const t=[],e=[],n=[],i=new WeakMap;let a=-1,o=0,s=!1;function l(f,d){d>a&&(t[d]=[],a=d);for(const h of f)"children"in h?l(h.children,d+1):(e.push({key:fh(h),style:C9e(h),column:h}),o+=1,s||(s=!!h.ellipsis),n.push(h))}l(r,0);let u=0;function c(f,d){let h=0;f.forEach((v,p)=>{var g;if("children"in v){const m=u,y={column:v,colSpan:0,rowSpan:1,isLast:!1};c(v.children,d+1),v.children.forEach(b=>{var x,w;y.colSpan+=(w=(x=i.get(b))===null||x===void 0?void 0:x.colSpan)!==null&&w!==void 0?w:0}),m+y.colSpan===o&&(y.isLast=!0),i.set(v,y),t[d].push(y)}else{if(u<h){u+=1;return}let m=1;"titleColSpan"in v&&(m=(g=v.titleColSpan)!==null&&g!==void 0?g:1),m>1&&(h=u+m);const y=u+m===o,b={column:v,colSpan:m,rowSpan:a-d+1,isLast:y};i.set(v,b),t[d].push(b),u+=1}})}return c(r,0),{hasEllipsis:s,rows:t,cols:e,dataRelatedCols:n}}function f7e(r){const t=re(()=>c7e(r.columns));return{rowsRef:re(()=>t.value.rows),colsRef:re(()=>t.value.cols),hasEllipsisRef:re(()=>t.value.hasEllipsis),dataRelatedColsRef:re(()=>t.value.dataRelatedCols)}}function d7e(r){const t=xi(()=>{for(const o of r.columns)if(o.type==="expand")return o.renderExpand}),e=Oe(r.defaultExpandedRowKeys),n=Kt(r,"expandedRowKeys"),i=Qi(n,e);function a(o){const{onUpdateExpandedRowKeys:s,"onUpdate:expandedRowKeys":l}=r;s&&Tt(s,o),l&&Tt(l,o),e.value=o}return{mergedExpandedRowKeysRef:i,renderExpandRef:t,doUpdateExpandedRowKeys:a}}const h7e=Object.assign(Object.assign({},rr.props),{pagination:{type:[Object,Boolean],default:!1},minHeight:[Number,String],maxHeight:[Number,String],columns:{type:Array,default:()=>[]},rowClassName:[String,Function],rowProps:Function,rowKey:Function,summary:[Function],data:{type:Array,default:()=>[]},loading:Boolean,bordered:{type:Boolean,default:void 0},bottomBordered:{type:Boolean,default:void 0},striped:Boolean,scrollX:[Number,String],defaultCheckedRowKeys:{type:Array,default:()=>[]},checkedRowKeys:Array,singleLine:{type:Boolean,default:!0},singleColumn:Boolean,size:{type:String,default:"medium"},remote:Boolean,defaultExpandedRowKeys:{type:Array,default:[]},expandedRowKeys:Array,virtualScroll:Boolean,tableLayout:{type:String,default:"auto"},cascade:{type:Boolean,default:!0},childrenKey:{type:String,default:"children"},indent:{type:Number,default:16},flexHeight:Boolean,"onUpdate:page":[Function,Array],onUpdatePage:[Function,Array],"onUpdate:pageSize":[Function,Array],onUpdatePageSize:[Function,Array],"onUpdate:sorter":[Function,Array],onUpdateSorter:[Function,Array],"onUpdate:filters":[Function,Array],onUpdateFilters:[Function,Array],"onUpdate:checkedRowKeys":[Function,Array],onUpdateCheckedRowKeys:[Function,Array],"onUpdate:expandedRowKeys":[Function,Array],onUpdateExpandedRowKeys:[Function,Array],onPageChange:{type:[Function,Array],validator:()=>!0,default:void 0},onPageSizeChange:{type:[Function,Array],validator:()=>!0,default:void 0},onSorterChange:{type:[Function,Array],validator:()=>!0,default:void 0},onFiltersChange:{type:[Function,Array],validator:()=>!0,default:void 0},onCheckedRowKeysChange:{type:[Function,Array],validator:()=>!0,default:void 0}});var Mft=xt({name:"DataTable",alias:["AdvancedTable"],props:h7e,setup(r){const{mergedBorderedRef:t,mergedClsPrefixRef:e}=mn(r),n=re(()=>{const{bottomBordered:Ve}=r;return t.value?!1:Ve!==void 0?Ve:!0}),i=rr("DataTable","DataTable",l7e,o9e,r,e),a=Oe(null),o=Oe("body"),s=Oe(null),{rowsRef:l,colsRef:u,dataRelatedColsRef:c,hasEllipsisRef:f}=f7e(r),{treeMateRef:d,mergedCurrentPageRef:h,paginatedDataRef:v,rawPaginatedDataRef:p,selectionColumnRef:g,hoverKeyRef:m,mergedPaginationRef:y,mergedFilterStateRef:b,mergedSortStateRef:x,firstContentfulColIndexRef:w,doUpdateFilters:S,deriveNextSorter:C,filter:_,filters:T,clearFilter:E,clearFilters:M,clearSorter:k,page:P,sort:F}=o7e(r,{dataRelatedColsRef:c}),{doCheckAll:$,doUncheckAll:R,doCheck:L,doUncheck:O,headerCheckboxDisabledRef:B,someRowsCheckedRef:U,allRowsCheckedRef:W,mergedCheckedRowKeySetRef:X,mergedInderminateRowKeySetRef:ae}=r7e(r,{selectionColumnRef:g,treeMateRef:d,paginatedDataRef:v}),{mergedExpandedRowKeysRef:Z,renderExpandRef:Y,doUpdateExpandedRowKeys:fe}=d7e(r),{handleTableBodyScroll:le,handleTableHeaderScroll:ue,syncScrollState:Ee,setHeaderScrollLeft:De,leftActiveFixedColKeyRef:je,rightActiveFixedColKeyRef:ke,leftFixedColumnsRef:D,rightFixedColumnsRef:z,fixedColumnLeftMapRef:H,fixedColumnRightMapRef:he}=s7e(r,{scrollPartRef:o,bodyWidthRef:a,mainTableInstRef:s,mergedCurrentPageRef:h}),{localeRef:te}=Qd("DataTable"),ge=re(()=>r.virtualScroll||r.flexHeight||r.maxHeight!==void 0||f.value?"fixed":r.tableLayout);return rn(ju,{indentRef:Kt(r,"indent"),firstContentfulColIndexRef:w,bodyWidthRef:a,componentId:e0(),hoverKeyRef:m,mergedClsPrefixRef:e,mergedThemeRef:i,scrollXRef:re(()=>r.scrollX),rowsRef:l,colsRef:u,paginatedDataRef:v,leftActiveFixedColKeyRef:je,rightActiveFixedColKeyRef:ke,leftFixedColumnsRef:D,rightFixedColumnsRef:z,fixedColumnLeftMapRef:H,fixedColumnRightMapRef:he,mergedCurrentPageRef:h,someRowsCheckedRef:U,allRowsCheckedRef:W,mergedSortStateRef:x,mergedFilterStateRef:b,loadingRef:Kt(r,"loading"),rowClassNameRef:Kt(r,"rowClassName"),mergedCheckedRowKeySetRef:X,mergedExpandedRowKeysRef:Z,mergedInderminateRowKeySetRef:ae,localeRef:te,scrollPartRef:o,rowKeyRef:Kt(r,"rowKey"),renderExpandRef:Y,summaryRef:Kt(r,"summary"),virtualScrollRef:Kt(r,"virtualScroll"),rowPropsRef:Kt(r,"rowProps"),stripedRef:Kt(r,"striped"),checkOptionsRef:re(()=>{const{value:Ve}=g;return Ve==null?void 0:Ve.options}),rawPaginatedDataRef:p,hasChildrenRef:re(()=>d.value.maxLevel>0),filterMenuCssVarsRef:re(()=>{const{self:{actionDividerColor:Ve,actionPadding:Ie,actionButtonMargin:Be}}=i.value;return{"--action-padding":Ie,"--action-button-margin":Be,"--action-divider-color":Ve}}),mergedTableLayoutRef:ge,maxHeightRef:Kt(r,"maxHeight"),minHeightRef:Kt(r,"minHeight"),flexHeightRef:Kt(r,"flexHeight"),headerCheckboxDisabledRef:B,syncScrollState:Ee,doUpdateFilters:S,deriveNextSorter:C,doCheck:L,doUncheck:O,doCheckAll:$,doUncheckAll:R,doUpdateExpandedRowKeys:fe,handleTableHeaderScroll:ue,handleTableBodyScroll:le,setHeaderScrollLeft:De}),Object.assign(Object.assign({mainTableInstRef:s,mergedClsPrefix:e,mergedTheme:i,paginatedData:v,mergedBordered:t,mergedBottomBordered:n,mergedPagination:y},{filter:_,filters:T,clearFilters:M,clearSorter:k,page:P,sort:F,clearFilter:E}),{cssVars:re(()=>{const{size:Ve}=r,{common:{cubicBezierEaseInOut:Ie},self:{borderColor:Be,tdColorHover:V,thColor:j,thColorHover:q,tdColor:ee,tdTextColor:Q,thTextColor:me,thFontWeight:He,thButtonColorHover:ze,thIconColor:it,thIconColorActive:we,filterSize:nt,borderRadius:st,lineHeight:jt,tdColorModal:Jt,thColorModal:Ae,borderColorModal:ut,thColorHoverModal:ur,tdColorHoverModal:Le,borderColorPopover:dt,thColorPopover:Bt,tdColorPopover:cr,tdColorHoverPopover:$r,thColorHoverPopover:nr,paginationMargin:tn,emptyPadding:Er,boxShadowAfter:zr,boxShadowBefore:Qr,sorterSize:_n,loadingColor:jn,loadingSize:ii,opacityLoading:bn,tdColorStriped:ai,tdColorStripedModal:Zn,tdColorStripedPopover:Br,[Ot("fontSize",Ve)]:on,[Ot("thPadding",Ve)]:mr,[Ot("tdPadding",Ve)]:ln}}=i.value;return{"--font-size":on,"--th-padding":mr,"--td-padding":ln,"--bezier":Ie,"--border-radius":st,"--line-height":jt,"--border-color":Be,"--border-color-modal":ut,"--border-color-popover":dt,"--th-color":j,"--th-color-hover":q,"--th-color-modal":Ae,"--th-color-hover-modal":ur,"--th-color-popover":Bt,"--th-color-hover-popover":nr,"--td-color":ee,"--td-color-hover":V,"--td-color-modal":Jt,"--td-color-hover-modal":Le,"--td-color-popover":cr,"--td-color-hover-popover":$r,"--th-text-color":me,"--td-text-color":Q,"--th-font-weight":He,"--th-button-color-hover":ze,"--th-icon-color":it,"--th-icon-color-active":we,"--filter-size":nt,"--pagination-margin":tn,"--empty-padding":Er,"--box-shadow-before":Qr,"--box-shadow-after":zr,"--sorter-size":_n,"--loading-size":ii,"--loading-color":jn,"--opacity-loading":bn,"--td-color-striped":ai,"--td-color-striped-modal":Zn,"--td-color-striped-popover":Br}})})},render(){const{mergedClsPrefix:r}=this;return I("div",{class:[`${r}-data-table`,{[`${r}-data-table--bordered`]:this.mergedBordered,[`${r}-data-table--bottom-bordered`]:this.mergedBottomBordered,[`${r}-data-table--single-line`]:this.singleLine,[`${r}-data-table--single-column`]:this.singleColumn,[`${r}-data-table--loading`]:this.loading,[`${r}-data-table--flex-height`]:this.flexHeight}],style:this.cssVars},I("div",{class:`${r}-data-table-wrapper`},I(t7e,{ref:"mainTableInstRef"},{default:()=>this.paginatedData.length===0?I("div",{class:[`${r}-data-table-empty`,this.loading&&`${r}-data-table-empty--hide`]},qr(this.$slots,"empty",void 0,()=>[I($X,{theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])):null})),this.pagination?I("div",{class:`${r}-data-table__pagination`},I(qWe,Object.assign({theme:this.mergedTheme.peers.Pagination,themeOverrides:this.mergedTheme.peerOverrides.Pagination,disabled:this.loading},this.mergedPagination))):null,I(Ra,{name:"fade-in-scale-up-transition"},{default:()=>this.loading?I(Ip,{clsPrefix:r,strokeWidth:20}):null}))}}),v7e={itemFontSize:"12px",itemHeight:"36px",itemWidth:"52px",panelActionPadding:"8px 0"};const p7e=r=>{const{popoverColor:t,textColor2:e,primaryColor:n,hoverColor:i,dividerColor:a,opacityDisabled:o,boxShadow2:s,borderRadius:l,iconColor:u,iconColorDisabled:c}=r;return Object.assign(Object.assign({},v7e),{panelColor:t,panelBoxShadow:s,panelDividerColor:a,itemTextColor:e,itemTextColorActive:n,itemColorHover:i,itemOpacityDisabled:o,itemBorderRadius:l,borderRadius:l,iconColor:u,iconColorDisabled:c})},g7e=Go({name:"TimePicker",common:Wn,peers:{Scrollbar:oh,Button:y0,Input:tC},self:p7e});var Yq=g7e,m7e={itemSize:"24px",itemCellWidth:"38px",itemCellHeight:"32px",scrollItemWidth:"80px",scrollItemHeight:"40px",panelExtraFooterPadding:"8px 12px",panelActionPadding:"8px 12px",calendarTitlePadding:"0",calendarTitleHeight:"28px",arrowSize:"14px",panelHeaderPadding:"8px 12px",calendarDaysHeight:"32px",calendarTitleGridTempateColumns:"28px 28px 1fr 28px 28px",calendarLeftPaddingDate:"6px 12px 4px 12px",calendarLeftPaddingDatetime:"4px 12px",calendarLeftPaddingDaterange:"6px 12px 4px 12px",calendarLeftPaddingDatetimerange:"4px 12px",calendarLeftPaddingMonth:"0",calendarLeftPaddingYear:"0",calendarRightPaddingDate:"6px 12px 4px 12px",calendarRightPaddingDatetime:"4px 12px",calendarRightPaddingDaterange:"6px 12px 4px 12px",calendarRightPaddingDatetimerange:"4px 12px",calendarRightPaddingMonth:"0",calendarRightPaddingYear:"0"};const y7e=r=>{const{hoverColor:t,fontSize:e,textColor2:n,textColorDisabled:i,popoverColor:a,primaryColor:o,borderRadiusSmall:s,iconColor:l,iconColorDisabled:u,textColor1:c,dividerColor:f,boxShadow2:d,borderRadius:h,fontWeightStrong:v}=r;return Object.assign(Object.assign({},m7e),{itemFontSize:e,calendarDaysFontSize:e,calendarTitleFontSize:e,itemTextColor:n,itemTextColorDisabled:i,itemTextColorActive:a,itemTextColorCurrent:o,itemColorIncluded:jr(o,{alpha:.1}),itemColorHover:t,itemColorDisabled:t,itemColorActive:o,itemBorderRadius:s,panelColor:a,panelTextColor:n,arrowColor:l,calendarTitleTextColor:c,calendarDaysTextColor:n,panelHeaderDividerColor:f,calendarDaysDividerColor:f,calendarDividerColor:f,panelActionDividerColor:f,panelBoxShadow:d,panelBorderRadius:h,calendarTitleFontWeight:v,scrollItemBorderRadius:h,iconColor:l,iconColorDisabled:u})},b7e=Go({name:"DatePicker",common:Wn,peers:{Input:tC,Button:y0,TimePicker:Yq,Scrollbar:oh},self:y7e});var x7e=b7e;function w7e(r,t){const e=re(()=>{const{isTimeDisabled:c}=r,{value:f}=t;if(!(f===null||Array.isArray(f)))return c==null?void 0:c(f)}),n=re(()=>{var c;return(c=e.value)===null||c===void 0?void 0:c.isHourDisabled}),i=re(()=>{var c;return(c=e.value)===null||c===void 0?void 0:c.isMinuteDisabled}),a=re(()=>{var c;return(c=e.value)===null||c===void 0?void 0:c.isSecondDisabled}),o=re(()=>{const{type:c,isDateDisabled:f}=r,{value:d}=t;return d===null||Array.isArray(d)||!["date","datetime"].includes(c)||!f?!1:f(d)}),s=re(()=>{const{type:c}=r,{value:f}=t;if(f===null||c==="datetime"||Array.isArray(f))return!1;const d=new Date(f),h=d.getHours(),v=d.getMinutes(),p=d.getMinutes();return(n.value?n.value(h):!1)||(i.value?i.value(v,h):!1)||(a.value?a.value(p,v,h):!1)}),l=re(()=>o.value||s.value);return{isValueInvalidRef:re(()=>{const{type:c}=r;return c==="date"?o.value:c==="datetime"?l.value:!1}),isDateInvalidRef:o,isTimeInvalidRef:s,isDateTimeInvalidRef:l,isHourDisabledRef:n,isMinuteDisabledRef:i,isSecondDisabledRef:a}}function S7e(r,t){const e=re(()=>{const{isTimeDisabled:f}=r,{value:d}=t;return!Array.isArray(d)||!f?[void 0,void 0]:[f==null?void 0:f(d[0],"start",d),f==null?void 0:f(d[1],"end",d)]}),n={isStartHourDisabledRef:re(()=>{var f;return(f=e.value[0])===null||f===void 0?void 0:f.isHourDisabled}),isEndHourDisabledRef:re(()=>{var f;return(f=e.value[1])===null||f===void 0?void 0:f.isHourDisabled}),isStartMinuteDisabledRef:re(()=>{var f;return(f=e.value[0])===null||f===void 0?void 0:f.isMinuteDisabled}),isEndMinuteDisabledRef:re(()=>{var f;return(f=e.value[1])===null||f===void 0?void 0:f.isMinuteDisabled}),isStartSecondDisabledRef:re(()=>{var f;return(f=e.value[0])===null||f===void 0?void 0:f.isSecondDisabled}),isEndSecondDisabledRef:re(()=>{var f;return(f=e.value[1])===null||f===void 0?void 0:f.isSecondDisabled})},i=re(()=>{const{type:f,isDateDisabled:d}=r,{value:h}=t;return h===null||!Array.isArray(h)||!["daterange","datetimerange"].includes(f)||!d?!1:d(h[0],"start",h)}),a=re(()=>{const{type:f,isDateDisabled:d}=r,{value:h}=t;return h===null||!Array.isArray(h)||!["daterange","datetimerange"].includes(f)||!d?!1:d(h[1],"end",h)}),o=re(()=>{const{type:f}=r,{value:d}=t;if(d===null||!Array.isArray(d)||f!=="datetimerange")return!1;const h=lf(d[0]),v=lC(d[0]),p=uC(d[0]),{isStartHourDisabledRef:g,isStartMinuteDisabledRef:m,isStartSecondDisabledRef:y}=n;return(g.value?g.value(h):!1)||(m.value?m.value(v,h):!1)||(y.value?y.value(p,v,h):!1)}),s=re(()=>{const{type:f}=r,{value:d}=t;if(d===null||!Array.isArray(d)||f!=="datetimerange")return!1;const h=lf(d[1]),v=lC(d[1]),p=uC(d[1]),{isEndHourDisabledRef:g,isEndMinuteDisabledRef:m,isEndSecondDisabledRef:y}=n;return(g.value?g.value(h):!1)||(m.value?m.value(v,h):!1)||(y.value?y.value(p,v,h):!1)}),l=re(()=>i.value||o.value),u=re(()=>a.value||s.value),c=re(()=>l.value||u.value);return Object.assign(Object.assign({},n),{isStartDateInvalidRef:i,isEndDateInvalidRef:a,isStartTimeInvalidRef:o,isEndTimeInvalidRef:s,isStartValueInvalidRef:l,isEndValueInvalidRef:u,isRangeInvalidRef:c})}const vC=Symbol("datePicker"),x0={amHours:["00","01","02","03","04","05","06","07","08","09","10","11"],pmHours:["12","01","02","03","04","05","06","07","08","09","10","11"],hours:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],minutes:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"],seconds:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"],period:["AM","PM"]};function AP(r){return`00${r}`.slice(-2)}function w0(r,t,e){return Array.isArray(t)?(e==="am"?t.filter(n=>n<12):e==="pm"?t.filter(n=>n>=12).map(n=>n===12?12:n-12):t).map(n=>AP(n)):typeof t=="number"?e==="am"?r.filter(n=>{const i=Number(n);return i<12&&i%t==0}):e==="pm"?r.filter(n=>{const i=Number(n);return i>=12&&i%t==0}).map(n=>{const i=Number(n);return AP(i===12?12:i-12)}):r.filter(n=>Number(n)%t==0):e==="am"?r.filter(n=>Number(n)<12):e==="pm"?r.map(n=>Number(n)).filter(n=>Number(n)>=12).map(n=>AP(n===12?12:n-12)):r}function pC(r,t,e){return e?typeof e=="number"?r%e==0:e.includes(r):!0}function C7e(r,t,e){const n=w0(x0[t],e).map(Number);let i,a;for(let o=0;o<n.length;++o){const s=n[o];if(s===r)return s;if(s>r){a=s;break}i=s}return i===void 0?(a||AI("time-picker","Please set 'hours' or 'minutes' or 'seconds' props"),a):a===void 0||a-r>r-i?i:a}function E7e(r){return lf(r)<12?"am":"pm"}const Xq=Symbol("timePicker");var gC=xt({name:"TimePickerPanelCol",props:{clsPrefix:{type:String,required:!0},data:{type:Array,required:!0},activeValue:{type:Number,default:null},onItemClick:Function},render(){const{activeValue:r,onItemClick:t,clsPrefix:e}=this;return this.data.map(n=>{const{label:i,disabled:a,value:o}=n,s=r===o;return I("div",{key:i,"data-active":s?"":null,class:[`${e}-time-picker-col__item`,s&&`${e}-time-picker-col__item--active`,a&&`${e}-time-picker-col__item--disabled`],onClick:t&&!a?()=>t(o):void 0},i)})}});const _7e={actions:{type:Array,default:()=>["now","confirm"]},showHour:{type:Boolean,default:!0},showMinute:{type:Boolean,default:!0},showSecond:{type:Boolean,default:!0},showPeriod:{type:Boolean,default:!0},isHourInvalid:Boolean,isMinuteInvalid:Boolean,isSecondInvalid:Boolean,isAmPmInvalid:Boolean,isValueInvalid:Boolean,hourValue:{type:Number,default:null},minuteValue:{type:Number,default:null},secondValue:{type:Number,default:null},amPmValue:{type:String,default:null},isHourDisabled:Function,isMinuteDisabled:Function,isSecondDisabled:Function,onHourClick:{type:Function,required:!0},onMinuteClick:{type:Function,required:!0},onSecondClick:{type:Function,required:!0},onAmPmClick:{type:Function,required:!0},onNowClick:Function,nowText:String,confirmText:String,transitionDisabled:Boolean,onConfirmClick:Function,onFocusin:Function,onFocusout:Function,onFocusDetectorFocus:Function,onKeydown:Function,hours:[Number,Array],minutes:[Number,Array],seconds:[Number,Array],use12Hours:Boolean};var T7e=xt({name:"TimePickerPanel",props:_7e,setup(r){const{mergedThemeRef:t,mergedClsPrefixRef:e}=or(Xq),n=re(()=>{const{isHourDisabled:s,hours:l,use12Hours:u,amPmValue:c}=r;if(u){const f=c!=null?c:E7e(Date.now());return w0(x0.hours,l,f).map(d=>{const h=Number(d),v=f==="pm"&&h!==12?h+12:h;return{label:d,value:v,disabled:s?s(v):!1}})}else return w0(x0.hours,l).map(f=>({label:f,value:Number(f),disabled:s?s(Number(f)):!1}))}),i=re(()=>{const{isMinuteDisabled:s,minutes:l}=r;return w0(x0.minutes,l).map(u=>({label:u,value:Number(u),disabled:s?s(Number(u),r.hourValue):!1}))}),a=re(()=>{const{isSecondDisabled:s,seconds:l}=r;return w0(x0.seconds,l).map(u=>({label:u,value:Number(u),disabled:s?s(Number(u),r.minuteValue,r.hourValue):!1}))}),o=re(()=>{const{isHourDisabled:s}=r;let l=!0,u=!0;for(let c=0;c<12;++c)if(!(s==null?void 0:s(c))){l=!1;break}for(let c=12;c<24;++c)if(!(s==null?void 0:s(c))){u=!1;break}return[{label:"AM",value:"am",disabled:l},{label:"PM",value:"pm",disabled:u}]});return{mergedTheme:t,mergedClsPrefix:e,hours:n,minutes:i,seconds:a,amPm:o,hourScrollRef:Oe(null),minuteScrollRef:Oe(null),secondScrollRef:Oe(null),amPmScrollRef:Oe(null)}},render(){var r,t;const{mergedClsPrefix:e,mergedTheme:n}=this;return I("div",{tabindex:0,class:`${e}-time-picker-panel`,onFocusin:this.onFocusin,onFocusout:this.onFocusout,onKeydown:this.onKeydown},I("div",{class:`${e}-time-picker-cols`},this.showHour?I("div",{class:[`${e}-time-picker-col`,this.isHourInvalid&&`${e}-time-picker-col--invalid`,this.transitionDisabled&&`${e}-time-picker-col--transition-disabled`]},I(Bs,{ref:"hourScrollRef",theme:n.peers.Scrollbar,themeOverrides:n.peerOverrides.Scrollbar},{default:()=>[I(gC,{clsPrefix:e,data:this.hours,activeValue:this.hourValue,onItemClick:this.onHourClick}),I("div",{class:`${e}-time-picker-col__padding`})]})):null,this.showMinute?I("div",{class:[`${e}-time-picker-col`,this.transitionDisabled&&`${e}-time-picker-col--transition-disabled`,this.isMinuteInvalid&&`${e}-time-picker-col--invalid`]},I(Bs,{ref:"minuteScrollRef",theme:n.peers.Scrollbar,themeOverrides:n.peerOverrides.Scrollbar},{default:()=>[I(gC,{clsPrefix:e,data:this.minutes,activeValue:this.minuteValue,onItemClick:this.onMinuteClick}),I("div",{class:`${e}-time-picker-col__padding`})]})):null,this.showSecond?I("div",{class:[`${e}-time-picker-col`,this.isSecondInvalid&&`${e}-time-picker-col--invalid`,this.transitionDisabled&&`${e}-time-picker-col--transition-disabled`]},I(Bs,{ref:"secondScrollRef",theme:n.peers.Scrollbar,themeOverrides:n.peerOverrides.Scrollbar},{default:()=>[I(gC,{clsPrefix:e,data:this.seconds,activeValue:this.secondValue,onItemClick:this.onSecondClick}),I("div",{class:`${e}-time-picker-col__padding`})]})):null,this.use12Hours?I("div",{class:[`${e}-time-picker-col`,this.isAmPmInvalid&&`${e}-time-picker-col--invalid`,this.transitionDisabled&&`${e}-time-picker-col--transition-disabled`]},I(Bs,{ref:"amPmScrollRef",theme:n.peers.Scrollbar,themeOverrides:n.peerOverrides.Scrollbar},{default:()=>[I(gC,{clsPrefix:e,data:this.amPm,activeValue:this.amPmValue,onItemClick:this.onAmPmClick}),I("div",{class:`${e}-time-picker-col__padding`})]})):null),I("div",{class:`${e}-time-picker-actions`},((r=this.actions)===null||r===void 0?void 0:r.includes("now"))?I($a,{size:"tiny",theme:n.peers.Button,themeOverrides:n.peerOverrides.Button,onClick:this.onNowClick},{default:()=>this.nowText}):null,((t=this.actions)===null||t===void 0?void 0:t.includes("confirm"))?I($a,{size:"tiny",type:"primary",class:`${e}-time-picker-actions__confirm`,theme:n.peers.Button,themeOverrides:n.peerOverrides.Button,disabled:this.isValueInvalid,onClick:this.onConfirmClick},{default:()=>this.confirmText}):null),I(nh,{onFocus:this.onFocusDetectorFocus}))}}),A7e=_e([de("time-picker",`
 z-index: auto;
 position: relative;
 `,[de("time-picker-icon",`
 color: var(--icon-color);
 transition: color .3s var(--bezier);
 `),Ge("disabled",[de("time-picker-icon",{color:"var(--icon-color-disabled)"})])]),de("time-picker-panel",`
 transition:
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier);
 outline: none;
 font-size: var(--item-font-size);
 border-radius: var(--border-radius);
 margin: 4px 0;
 min-width: 104px;
 overflow: hidden;
 background-color: var(--panel-color);
 box-shadow: var(--panel-box-shadow);
 `,[nf(),de("time-picker-actions",`
 padding: var(--panel-action-padding);
 align-items: center;
 display: flex;
 justify-content: space-evenly;
 `),de("time-picker-cols",`
 height: calc(var(--item-height) * 6);
 display: flex;
 position: relative;
 transition: border-color .3s var(--bezier);
 border-bottom: 1px solid var(--panel-divider-color);
 `),de("time-picker-col",`
 flex-grow: 1;
 min-width: var(--item-width);
 height: calc(var(--item-height) * 6);
 flex-direction: column;
 transition: box-shadow .3s var(--bezier);
 `,[Ge("transition-disabled",[Se("item","transition: none;",[_e("&::before","transition: none;")])]),Se("padding",{height:"calc(var(--item-height) * 5)"}),_e("&:first-child","min-width: calc(var(--item-width) + 4px);",[Se("item",[_e("&::before","left: 4px;")])]),Se("item",`
 cursor: pointer;
 height: var(--item-height);
 display: flex;
 align-items: center;
 justify-content: center;
 transition: 
 color .3s var(--bezier),
 background-color .3s var(--bezier),
 opacity .3s var(--bezier),
 text-decoration-color .3s var(--bezier);
 background: #0000;
 text-decoration-color: #0000;
 color: var(--item-text-color);
 z-index: 0;
 box-sizing: border-box;
 padding-top: 4px;
 position: relative;
 `,[_e("&::before",`
 content: "";
 transition: background-color .3s var(--bezier);
 z-index: -1;
 position: absolute;
 left: 0;
 right: 4px;
 top: 4px;
 bottom: 0;
 border-radius: var(--item-border-radius);
 `),Mn("disabled",[_e("&:hover::before",{backgroundColor:"var(--item-color-hover)"})]),Ge("active",`
 color: var(--item-text-color-active);
 `,[_e("&::before",`
 background-color: var(--item-color-hover);
 `)]),Ge("disabled",`
 opacity: var(--item-opacity-disabled);
 cursor: not-allowed;
 `)]),Ge("invalid",[Se("item",[Ge("active",`
 text-decoration: line-through;
 text-decoration-color: var(--item-text-color-active);
 `)])])])])]);function MP(r,t){return r===void 0?!0:Array.isArray(r)?r.every(e=>e>=0&&e<=t):r>=0&&r<=t}const M7e=Object.assign(Object.assign({},rr.props),{to:Ao.propTo,bordered:{type:Boolean,default:void 0},actions:Array,defaultValue:{type:Number,default:null},placeholder:String,placement:{type:String,default:"bottom-start"},value:Number,format:{type:String,default:"HH:mm:ss"},isHourDisabled:Function,size:String,isMinuteDisabled:Function,isSecondDisabled:Function,inputReadonly:Boolean,clearable:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onBlur:[Function,Array],onFocus:[Function,Array],stateful:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},disabled:{type:Boolean,default:void 0},show:{type:Boolean,default:void 0},hours:{type:[Number,Array],validator:r=>MP(r,23)},minutes:{type:[Number,Array],validator:r=>MP(r,59)},seconds:{type:[Number,Array],validator:r=>MP(r,59)},use12Hours:Boolean,onChange:[Function,Array]});var kP=xt({name:"TimePicker",props:M7e,setup(r){const{mergedBorderedRef:t,mergedClsPrefixRef:e,namespaceRef:n}=mn(r),{localeRef:i,dateLocaleRef:a}=Qd("TimePicker"),o=Xl(r),{mergedSizeRef:s,mergedDisabledRef:l}=o,u=rr("TimePicker","TimePicker",A7e,Yq,r,e),c=TI(),f=Oe(null),d=Oe(null),h=Oe(r.defaultValue),v=Kt(r,"value"),p=Qi(v,h),g=re(()=>({locale:a.value.locale})),{value:m}=p,y=Oe(m===null?"":li(m,r.format,g.value)),b=Oe(!1),x=Kt(r,"show"),w=Qi(x,b),S=Oe(m),C=Oe(!1),_=re(()=>i.value.now),T=re(()=>r.placeholder!==void 0?r.placeholder:i.value.placeholder),E=re(()=>i.value.negativeText),M=re(()=>i.value.positiveText),k=re(()=>/H|h|K|k/.test(r.format)),P=re(()=>r.format.includes("m")),F=re(()=>r.format.includes("s")),$=re(()=>{const{isHourDisabled:we}=r;return W.value===null?!1:pC(W.value,"hours",r.hours)?we?we(W.value):!1:!0}),R=re(()=>{const{value:we}=X,{value:nt}=W;if(we===null||nt===null)return!1;if(!pC(we,"minutes",r.minutes))return!0;const{isMinuteDisabled:st}=r;return st?st(we,nt):!1}),L=re(()=>{const{value:we}=X,{value:nt}=W,{value:st}=ae;if(st===null||we===null||nt===null)return!1;if(!pC(st,"seconds",r.seconds))return!0;const{isSecondDisabled:jt}=r;return jt?jt(st,we,nt):!1}),O=re(()=>$.value||R.value||L.value),B=re(()=>r.format.length+4),U=re(()=>{const{value:we}=p;return we===null?null:lf(we)<12?"am":"pm"}),W=re(()=>{const{value:we}=p;return we===null?null:Number(li(we,"HH",g.value))}),X=re(()=>{const{value:we}=p;return we===null?null:Number(li(we,"mm",g.value))}),ae=re(()=>{const{value:we}=p;return we===null?null:Number(li(we,"ss",g.value))});function Z(we){const{onUpdateValue:nt,"onUpdate:value":st,onChange:jt}=r,{nTriggerFormChange:Jt,nTriggerFormInput:Ae}=o;nt&&Tt(nt,we),st&&Tt(st,we),jt&&Tt(jt,we),h.value=we,Jt(),Ae()}function Y(we){const{onFocus:nt}=r,{nTriggerFormFocus:st}=o;nt&&Tt(nt,we),st()}function fe(we){const{onBlur:nt}=r,{nTriggerFormBlur:st}=o;nt&&Tt(nt,we),st()}function le(we){we.stopPropagation(),Z(null),he(null)}function ue(){ee({returnFocus:!0})}function Ee(we){var nt;switch(we.code){case"Escape":ee({returnFocus:!0});break;case"Tab":c.shift&&we.target===((nt=d.value)===null||nt===void 0?void 0:nt.$el)&&(we.preventDefault(),ee({returnFocus:!0}));break}}function De(){C.value=!0,Ha(()=>{C.value=!1})}function je(we){l.value||Vd(we,"clear")||w.value||j()}function ke(we){typeof we!="string"&&(p.value===null?Z(tr(ch(dWe(new Date),we))):Z(tr(ch(p.value,we))))}function D(we){typeof we!="string"&&(p.value===null?Z(tr(fP(CHe(new Date),we))):Z(tr(fP(p.value,we))))}function z(we){typeof we!="string"&&(p.value===null?Z(tr(dP(cP(new Date),we))):Z(tr(dP(p.value,we))))}function H(we){const{value:nt}=p;if(nt===null){const st=new Date,jt=lf(st);we==="pm"&&jt<12?Z(tr(ch(st,jt+12))):we==="am"&&jt>=12&&Z(tr(ch(st,jt-12))),Z(tr(st))}else{const st=lf(nt);we==="pm"&&st<12?Z(tr(ch(nt,st+12))):we==="am"&&st>=12&&Z(tr(ch(nt,st-12)))}}function he(we){we===void 0&&(we=p.value),we===null?y.value="":y.value=li(we,r.format,g.value)}function te(we){V(we)||Y(we)}function ge(we){var nt;if(!V(we))if(w.value){const st=(nt=d.value)===null||nt===void 0?void 0:nt.$el;(st==null?void 0:st.contains(we.relatedTarget))||(fe(we),ee({returnFocus:!1}))}else fe(we)}function Qe(){l.value||w.value||j()}function Ve(){l.value||(he(),ee({returnFocus:!1}))}function Ie(){if(!d.value)return;const{hourScrollRef:we,minuteScrollRef:nt,secondScrollRef:st,amPmScrollRef:jt}=d.value;[we,nt,st,jt].forEach(Jt=>{var Ae;if(!Jt)return;const ut=(Ae=Jt.contentRef)===null||Ae===void 0?void 0:Ae.querySelector("[data-active]");ut&&Jt.scrollTo({top:ut.offsetTop})})}function Be(we){b.value=we}function V(we){var nt,st,jt;return!!(((st=(nt=f.value)===null||nt===void 0?void 0:nt.wrapperElRef)===null||st===void 0?void 0:st.contains(we.relatedTarget))||((jt=d.value)===null||jt===void 0?void 0:jt.$el.contains(we.relatedTarget)))}function j(){S.value=p.value,Be(!0),Ha(Ie)}function q(we){var nt,st;w.value&&!((st=(nt=f.value)===null||nt===void 0?void 0:nt.wrapperElRef)===null||st===void 0?void 0:st.contains(we.target))&&ee({returnFocus:!1})}function ee({returnFocus:we}){var nt;w.value&&(Be(!1),we&&((nt=f.value)===null||nt===void 0||nt.focus()))}function Q(we){if(we===""){Z(null);return}const nt=Jl(we,r.format,new Date,g.value);if(y.value=we,zs(nt)){const{value:st}=p;if(st!==null){const jt=Gs(st,{hours:lf(nt),minutes:lC(nt),seconds:uC(nt)});Z(tr(jt))}else Z(tr(nt))}}function me(){Z(S.value),Be(!1)}function He(){const we=new Date,nt={hours:lf,minutes:lC,seconds:uC},[st,jt,Jt]=["hours","minutes","seconds"].map(ut=>!r[ut]||pC(nt[ut](we),ut,r[ut])?nt[ut](we):C7e(nt[ut](we),ut,r[ut])),Ae=dP(fP(ch(p.value?p.value:tr(we),st),jt),Jt);Z(tr(Ae))}function ze(){he(),ee({returnFocus:!0})}function it(we){V(we)||(fe(we),ee({returnFocus:!1}))}return fn(p,we=>{he(we),De(),Ha(Ie)}),fn(w,()=>{O.value&&Z(S.value)}),rn(Xq,{mergedThemeRef:u,mergedClsPrefixRef:e}),{mergedBordered:t,mergedClsPrefix:e,namespace:n,uncontrolledValue:h,mergedValue:p,isMounted:Kd(),inputInstRef:f,panelInstRef:d,adjustedTo:Ao(r),mergedShow:w,localizedNow:_,localizedPlaceholder:T,localizedNegativeText:E,localizedPositiveText:M,hourInFormat:k,minuteInFormat:P,secondInFormat:F,mergedAttrSize:B,displayTimeString:y,mergedSize:s,mergedDisabled:l,isValueInvalid:O,isHourInvalid:$,isMinuteInvalid:R,isSecondInvalid:L,transitionDisabled:C,hourValue:W,minuteValue:X,secondValue:ae,amPmValue:U,handleTimeInputFocus:te,handleTimeInputBlur:ge,handleNowClick:He,handleConfirmClick:ze,handleTimeInputUpdateValue:Q,handleMenuFocusOut:it,handleCancelClick:me,handleClickOutside:q,handleTimeInputActivate:Qe,handleTimeInputDeactivate:Ve,handleHourClick:ke,handleMinuteClick:D,handleSecondClick:z,handleAmPmClick:H,handleTimeInputClear:le,handleFocusDetectorFocus:ue,handleMenuKeyDown:Ee,handleTriggerClick:je,mergedTheme:u,triggerCssVars:re(()=>{const{common:{cubicBezierEaseInOut:we},self:{iconColor:nt,iconColorDisabled:st}}=u.value;return{"--icon-color":nt,"--icon-color-disabled":st,"--bezier":we}}),cssVars:re(()=>{const{self:{panelColor:we,itemTextColor:nt,itemTextColorActive:st,itemColorHover:jt,panelDividerColor:Jt,panelBoxShadow:Ae,itemOpacityDisabled:ut,borderRadius:ur,itemFontSize:Le,itemWidth:dt,itemHeight:Bt,panelActionPadding:cr,itemBorderRadius:$r},common:{cubicBezierEaseInOut:nr}}=u.value;return{"--bezier":nr,"--border-radius":ur,"--item-color-hover":jt,"--item-font-size":Le,"--item-height":Bt,"--item-opacity-disabled":ut,"--item-text-color":nt,"--item-text-color-active":st,"--item-width":dt,"--panel-action-padding":cr,"--panel-box-shadow":Ae,"--panel-color":we,"--panel-divider-color":Jt,"--item-border-radius":$r}})}},render(){const{mergedClsPrefix:r}=this;return I("div",{class:`${r}-time-picker`,style:this.triggerCssVars},I(d0,null,{default:()=>[I(h0,null,{default:()=>I(sh,{ref:"inputInstRef",value:this.displayTimeString,bordered:this.mergedBordered,passivelyActivated:!0,attrSize:this.mergedAttrSize,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,stateful:this.stateful,size:this.mergedSize,placeholder:this.localizedPlaceholder,clearable:this.clearable,disabled:this.mergedDisabled,textDecoration:this.isValueInvalid?"line-through":void 0,onFocus:this.handleTimeInputFocus,onBlur:this.handleTimeInputBlur,onActivate:this.handleTimeInputActivate,onDeactivate:this.handleTimeInputDeactivate,onUpdateValue:this.handleTimeInputUpdateValue,onClear:this.handleTimeInputClear,internalDeactivateOnEnter:!0,internalForceFocus:this.mergedShow,readonly:this.inputReadonly||this.mergedDisabled,onClick:this.handleTriggerClick},this.showIcon?{[this.clearable?"clear":"suffix"]:()=>I(si,{clsPrefix:r,class:`${r}-time-picker-icon`},{default:()=>I(U8e,null)})}:null)}),I(v0,{teleportDisabled:this.adjustedTo===Ao.tdkey,show:this.mergedShow,to:this.adjustedTo,containerClass:this.namespace,placement:"bottom-start"},{default:()=>I(Ra,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.mergedShow?pu(I(T7e,{ref:"panelInstRef",actions:this.actions,style:this.cssVars,seconds:this.seconds,minutes:this.minutes,hours:this.hours,transitionDisabled:this.transitionDisabled,hourValue:this.hourValue,showHour:this.hourInFormat,isHourInvalid:this.isHourInvalid,isHourDisabled:this.isHourDisabled,minuteValue:this.minuteValue,showMinute:this.minuteInFormat,isMinuteInvalid:this.isMinuteInvalid,isMinuteDisabled:this.isMinuteDisabled,secondValue:this.secondValue,amPmValue:this.amPmValue,showSecond:this.secondInFormat,isSecondInvalid:this.isSecondInvalid,isSecondDisabled:this.isSecondDisabled,isValueInvalid:this.isValueInvalid,nowText:this.localizedNow,confirmText:this.localizedPositiveText,use12Hours:this.use12Hours,onFocusout:this.handleMenuFocusOut,onKeydown:this.handleMenuKeyDown,onHourClick:this.handleHourClick,onMinuteClick:this.handleMinuteClick,onSecondClick:this.handleSecondClick,onAmPmClick:this.handleAmPmClick,onNowClick:this.handleNowClick,onConfirmClick:this.handleConfirmClick,onFocusDetectorFocus:this.handleFocusDetectorFocus}),[[ih,this.handleClickOutside]]):null})})]}))}});const k7e="yyyy-MM-dd",I7e="HH:mm:ss",P7e={active:Boolean,dateFormat:{type:String,default:k7e},timeFormat:{type:String,default:I7e},value:{type:[Array,Number],default:null},shortcuts:Object,onConfirm:Function,onClose:Function,onTabOut:Function,onUpdateValue:{type:Function,required:!0}};function S0(r){const{dateLocaleRef:t,timePickerSizeRef:e,localeRef:n,mergedClsPrefixRef:i,mergedThemeRef:a}=or(vC),o=re(()=>({locale:t.value.locale})),s=Oe(null),l=TI();function u(){const{onConfirm:_}=r;_&&_()}function c(_,T){const{onUpdateValue:E}=r;E(_,T)}function f(_=!1){const{onClose:T}=r;T&&T(_)}function d(){const{onTabOut:_}=r;_&&_()}function h(){c(null,!0),f(!0)}function v(){d()}function p(){r.active&&Ha(()=>{const{value:_}=s;if(!_)return;const T=_.querySelectorAll("[data-n-date]");T.forEach(E=>{E.classList.add("transition-disabled")}),_.offsetWidth,T.forEach(E=>{E.classList.remove("transition-disabled")})})}function g(_){_.code==="Tab"&&_.target===s.value&&l.shift&&(_.preventDefault(),d())}function m(_){const{value:T}=s;l.tab&&_.target===T&&(T==null?void 0:T.contains(_.relatedTarget))&&d()}let y=null,b=!1;function x(){y=r.value,b=!0}function w(){b=!1}function S(){b&&(c(y,!1),b=!1)}function C(_){return typeof _=="function"?_():_}return{mergedTheme:a,mergedClsPrefix:i,dateFnsOptions:o,timePickerSize:e,selfRef:s,locale:n,doConfirm:u,doClose:f,doUpdateValue:c,doTabOut:d,handleClearClick:h,handleFocusDetectorFocus:v,disableTransitionOneTick:p,handlePanelKeyDown:g,handlePanelFocus:m,cachePendingValue:x,clearPendingValue:w,restorePendingValue:S,getShortcutValue:C,handleShortcutMouseleave:S}}S0.props=P7e;const D7e=Object.assign(Object.assign({},S0.props),{actions:{type:Array,default:()=>["now","clear","confirm"]}});function dh(r,t){const e=S0(r),{isValueInvalidRef:n,isDateDisabledRef:i,isDateInvalidRef:a,isTimeInvalidRef:o,isDateTimeInvalidRef:s,isHourDisabledRef:l,isMinuteDisabledRef:u,isSecondDisabledRef:c,localeRef:f,firstDayOfWeekRef:d,datePickerSlots:h,scrollYearMonth:v}=or(vC),p={isValueInvalid:n,isDateDisabled:i,isDateInvalid:a,isTimeInvalid:o,isDateTimeInvalid:s,isHourDisabled:l,isMinuteDisabled:u,isSecondDisabled:c},g=Oe(r.value===null||Array.isArray(r.value)?"":li(r.value,r.dateFormat)),m=Oe(r.value===null||Array.isArray(r.value)?Date.now():r.value),y=Oe(null),b=Oe(null),x=Oe(null),w=Oe(Date.now()),S=re(()=>{var ke;return pP(m.value,r.value,w.value,(ke=d.value)!==null&&ke!==void 0?ke:f.value.firstDayOfWeek)}),C=re(()=>yWe(m.value,r.value,w.value)),_=re(()=>bWe(m.value,r.value,w.value)),T=re(()=>S.value.slice(0,7).map(ke=>{const{ts:D}=ke;return li(D,f.value.dayFormat,e.dateFnsOptions.value)})),E=re(()=>li(m.value,f.value.monthFormat,e.dateFnsOptions.value)),M=re(()=>li(m.value,f.value.yearFormat,e.dateFnsOptions.value));fn(m,(ke,D)=>{fC(ke,D)||e.disableTransitionOneTick()}),fn(re(()=>r.value),ke=>{ke!==null&&!Array.isArray(ke)?(g.value=li(ke,r.dateFormat,e.dateFnsOptions.value),m.value=ke):g.value=""});function k(ke){return tr(t==="datetime"?cP(ke):t==="month"?of(ke):t==="year"?iq(ke):oC(ke))}function P(ke){const{isDateDisabled:{value:D}}=p;return D?D(ke):!1}function F(ke){const D=Jl(ke,r.dateFormat,new Date,e.dateFnsOptions.value);if(zs(D)){if(r.value===null)e.doUpdateValue(tr(k(Date.now())),!1);else if(!Array.isArray(r.value)){const z=Gs(r.value,{year:za(D),month:Sa(D),date:ll(D)});e.doUpdateValue(tr(k(tr(z))),!1)}}else g.value=ke}function $(){const ke=Jl(g.value,r.dateFormat,new Date,e.dateFnsOptions.value);if(zs(ke)){if(r.value===null)e.doUpdateValue(tr(k(Date.now())),!1);else if(!Array.isArray(r.value)){const D=Gs(r.value,{year:za(ke),month:Sa(ke),date:ll(ke)});e.doUpdateValue(tr(k(tr(D))),!1)}}else B()}function R(){e.doUpdateValue(null,!0),g.value="",e.doClose(!0)}function L(){e.doUpdateValue(tr(k(Date.now())),!0),m.value=Date.now(),e.doClose(!0)}function O(ke){if(P(ke.ts))return;let D;r.value!==null&&!Array.isArray(r.value)?D=r.value:D=Date.now(),D=tr(Gs(D,ke.dateObject)),e.doUpdateValue(k(D),t==="date"||t==="year"),t==="date"?e.doClose():t==="month"?(e.disableTransitionOneTick(),v(D)):t==="year"&&e.doClose()}function B(ke){if(r.value===null||Array.isArray(r.value)){g.value="";return}ke===void 0&&(ke=r.value),g.value=li(ke,r.dateFormat,e.dateFnsOptions.value)}function U(){p.isDateInvalid.value||p.isTimeInvalid.value||(e.doConfirm(),W())}function W(){r.active&&e.doClose()}function X(){m.value=tr(oP(m.value,1))}function ae(){m.value=tr(oP(m.value,-1))}function Z(){m.value=tr(vo(m.value,1))}function Y(){m.value=tr(vo(m.value,-1))}function fe(){const{value:ke}=y;return ke==null?void 0:ke.listElRef}function le(){const{value:ke}=y;return ke==null?void 0:ke.itemsElRef}function ue(ke){var D;(D=x.value)===null||D===void 0||D.sync()}function Ee(ke){ke!==null&&e.doUpdateValue(ke,!1)}function De(ke){e.cachePendingValue();const D=e.getShortcutValue(ke);typeof D=="number"&&e.doUpdateValue(D,!1)}function je(ke){const D=e.getShortcutValue(ke);typeof D=="number"&&(e.doUpdateValue(D,!1),e.clearPendingValue(),U())}return Object.assign(Object.assign(Object.assign({dateArray:S,monthArray:C,yearArray:_,calendarYear:M,calendarMonth:E,weekdays:T,mergedIsDateDisabled:P,nextYear:X,prevYear:ae,nextMonth:Z,prevMonth:Y,handleNowClick:L,handleConfirmClick:U,handleSingleShortcutMouseenter:De,handleSingleShortcutClick:je},p),e),{handleDateClick:O,handleDateInputBlur:$,handleDateInput:F,handleTimePickerChange:Ee,clearSelectedDateTime:R,virtualListContainer:fe,virtualListContent:le,handleVirtualListScroll:ue,timePickerSize:e.timePickerSize,dateInputValue:g,datePickerSlots:h,monthScrollRef:b,yearScrollRef:y,scrollbarInstRef:x})}dh.props=D7e;var R7e=xt({name:"DateTimePanel",props:dh.props,setup(r){return dh(r,"datetime")},render(){var r,t,e,n;const{mergedClsPrefix:i,mergedTheme:a,shortcuts:o}=this;return I("div",{ref:"selfRef",tabindex:0,class:`${i}-date-panel ${i}-date-panel--datetime`,onKeydown:this.handlePanelKeyDown,onFocus:this.handlePanelFocus},I("div",{class:`${i}-date-panel-header`},I(sh,{value:this.dateInputValue,theme:a.peers.Input,themeOverrides:a.peerOverrides.Input,stateful:!1,size:this.timePickerSize,class:`${i}-date-panel-date-input`,textDecoration:this.isDateInvalid?"line-through":"",placeholder:this.locale.selectDate,onBlur:this.handleDateInputBlur,onUpdateValue:this.handleDateInput}),I(kP,{showIcon:!1,format:this.timeFormat,stateful:!1,theme:a.peers.TimePicker,themeOverrides:a.peerOverrides.TimePicker,to:!1,size:this.timePickerSize,value:Array.isArray(this.value)?null:this.value,placeholder:this.locale.selectTime,isHourDisabled:this.isHourDisabled,isMinuteDisabled:this.isMinuteDisabled,isSecondDisabled:this.isSecondDisabled,onUpdateValue:this.handleTimePickerChange})),I("div",{class:`${i}-date-panel-calendar`},I("div",{class:`${i}-date-panel-month`},I("div",{class:`${i}-date-panel-month__fast-prev`,onClick:this.prevYear},I(eh,null)),I("div",{class:`${i}-date-panel-month__prev`,onClick:this.prevMonth},I(Jd,null)),I("div",{class:`${i}-date-panel-month__month-year`},this.locale.monthBeforeYear?`${this.calendarMonth} ${this.calendarYear}`:`${this.calendarYear} ${this.calendarMonth}`),I("div",{class:`${i}-date-panel-month__next`,onClick:this.nextMonth},I(rh,null)),I("div",{class:`${i}-date-panel-month__fast-next`,onClick:this.nextYear},I(th,null))),I("div",{class:`${i}-date-panel-weekdays`},this.weekdays.map(s=>I("div",{key:s,class:`${i}-date-panel-weekdays__day`},s))),I("div",{class:`${i}-date-panel-dates`},this.dateArray.map((s,l)=>I("div",{"data-n-date":!0,key:l,class:[`${i}-date-panel-date`,{[`${i}-date-panel-date--current`]:s.isCurrentDate,[`${i}-date-panel-date--selected`]:s.selected,[`${i}-date-panel-date--excluded`]:!s.inCurrentMonth,[`${i}-date-panel-date--disabled`]:this.mergedIsDateDisabled(s.ts)}],onClick:()=>this.handleDateClick(s)},s.dateObject.date,s.isCurrentDate?I("div",{class:`${i}-date-panel-date__sup`}):null)))),this.datePickerSlots.footer?I("div",{class:`${i}-date-panel-footer`},qr(this.datePickerSlots,"footer")):null,((r=this.actions)===null||r===void 0?void 0:r.length)||o?I("div",{class:`${i}-date-panel-actions`},I("div",{class:`${i}-date-panel-actions__prefix`},o&&Object.keys(o).map(s=>{const l=o[s];return Array.isArray(l)?null:I(b0,{size:"tiny",onMouseenter:()=>{this.handleSingleShortcutMouseenter(l)},onClick:()=>{this.handleSingleShortcutClick(l)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>s})})),I("div",{class:`${i}-date-panel-actions__suffix`},((t=this.actions)===null||t===void 0?void 0:t.includes("clear"))?I($a,{theme:a.peers.Button,themeOverrides:a.peerOverrides.Button,size:"tiny",onClick:this.clearSelectedDateTime},{default:()=>this.locale.clear}):null,((e=this.actions)===null||e===void 0?void 0:e.includes("now"))?I($a,{theme:a.peers.Button,themeOverrides:a.peerOverrides.Button,size:"tiny",onClick:this.handleNowClick},{default:()=>this.locale.now}):null,((n=this.actions)===null||n===void 0?void 0:n.includes("confirm"))?I($a,{theme:a.peers.Button,themeOverrides:a.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isDateInvalid,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,I(nh,{onFocus:this.handleFocusDetectorFocus}))}});const O7e=Object.assign(Object.assign({},S0.props),{actions:{type:Array,default:()=>["clear","confirm"]}});function C0(r,t="datetime"){const{isDateDisabledRef:e,isStartHourDisabledRef:n,isEndHourDisabledRef:i,isStartMinuteDisabledRef:a,isEndMinuteDisabledRef:o,isStartSecondDisabledRef:s,isEndSecondDisabledRef:l,isStartDateInvalidRef:u,isEndDateInvalidRef:c,isStartTimeInvalidRef:f,isEndTimeInvalidRef:d,isStartValueInvalidRef:h,isEndValueInvalidRef:v,isRangeInvalidRef:p,localeRef:g,rangesRef:m,closeOnSelectRef:y,updateValueOnCloseRef:b,firstDayOfWeekRef:x,datePickerSlots:w}=or(vC),S={isDateDisabled:e,isStartHourDisabled:n,isEndHourDisabled:i,isStartMinuteDisabled:a,isEndMinuteDisabled:o,isStartSecondDisabled:s,isEndSecondDisabled:l,isStartDateInvalid:u,isEndDateInvalid:c,isStartTimeInvalid:f,isEndTimeInvalid:d,isStartValueInvalid:h,isEndValueInvalid:v,isRangeInvalid:p},C=S0(r),_=Oe(null),T=Oe(null),E=Oe(Date.now()),M=Oe(tr(vo(Date.now(),1))),k=Oe(Date.now()),P=Oe(!1),F=Oe(0),{value:$,dateFormat:R}=r,L=Oe(Array.isArray($)?li($[0],R,C.dateFnsOptions.value):""),O=Oe(Array.isArray($)?li($[1],R,C.dateFnsOptions.value):"");Array.isArray($)&&Be($);const B=re(()=>P.value?"end":"start"),U=re(()=>{var Le;return pP(E.value,r.value,k.value,(Le=x.value)!==null&&Le!==void 0?Le:g.value.firstDayOfWeek)}),W=re(()=>{var Le;return pP(M.value,r.value,k.value,(Le=x.value)!==null&&Le!==void 0?Le:g.value.firstDayOfWeek)}),X=re(()=>U.value.slice(0,7).map(Le=>{const{ts:dt}=Le;return li(dt,g.value.dayFormat,C.dateFnsOptions.value)})),ae=re(()=>li(E.value,g.value.monthFormat,C.dateFnsOptions.value)),Z=re(()=>li(M.value,g.value.monthFormat,C.dateFnsOptions.value)),Y=re(()=>li(E.value,g.value.yearFormat,C.dateFnsOptions.value)),fe=re(()=>li(M.value,g.value.yearFormat,C.dateFnsOptions.value)),le=re(()=>{const{value:Le}=r;return Array.isArray(Le)?Le[0]:null}),ue=re(()=>{const{value:Le}=r;return Array.isArray(Le)?Le[1]:null}),Ee=re(()=>{const{shortcuts:Le}=r;return Le||m.value});fn(re(()=>r.value),Le=>{if(Le!==null&&Array.isArray(Le)){const[dt,Bt]=Le,{dateFormat:cr}=r;L.value=li(dt,cr,C.dateFnsOptions.value),O.value=li(Bt,cr,C.dateFnsOptions.value),P.value||Be(Le)}else L.value="",O.value=""});function De(Le,dt){(za(Le)!==za(dt)||Sa(Le)!==Sa(dt))&&C.disableTransitionOneTick()}fn(E,De),fn(M,De);function je(Le){const dt=of(E.value),Bt=of(M.value);dt>=Bt&&(Le?M.value=tr(vo(dt,1)):E.value=tr(vo(Bt,-1)))}function ke(){E.value=tr(vo(E.value,12)),je(!0)}function D(){E.value=tr(vo(E.value,-12)),je(!0)}function z(){E.value=tr(vo(E.value,1)),je(!0)}function H(){E.value=tr(vo(E.value,-1)),je(!0)}function he(){M.value=tr(vo(M.value,12)),je(!1)}function te(){M.value=tr(vo(M.value,-12)),je(!1)}function ge(){M.value=tr(vo(M.value,1)),je(!1)}function Qe(){M.value=tr(vo(M.value,-1)),je(!1)}function Ve(Le){const dt=e.value;if(!dt)return!1;if(!Array.isArray(r.value)||B.value==="start")return dt(Le,"start",null);{const{value:Bt}=F;return Le<F.value?dt(Le,"start",[Bt,Bt]):dt(Le,"end",[Bt,Bt])}}function Ie(Le){var dt,Bt;((dt=_.value)===null||dt===void 0?void 0:dt.contains(Le.target))||((Bt=T.value)===null||Bt===void 0?void 0:Bt.contains(Le.target))||(P.value=!1)}function Be(Le){if(Le===null)return;const[dt,Bt]=Le;E.value=dt,of(Bt)<=of(dt)?M.value=tr(of(vo(dt,1))):M.value=tr(of(Bt))}function V(Le){Ve(Le.ts)||(P.value?(P.value=!1,y.value&&t==="daterange"&&(b.value?ee():q())):(P.value=!0,F.value=Le.ts,He(Le.ts)))}function j(Le){if(P.value){if(Ve(Le.ts))return;Le.ts>=F.value?He(F.value,Le.ts):He(Le.ts,F.value)}}function q(){p.value||(C.doConfirm(),ee())}function ee(){P.value=!1,r.active&&C.doClose()}function Q(Le){typeof Le!="number"&&(Le=tr(Le)),r.value===null?C.doUpdateValue([Le,Le],!1):Array.isArray(r.value)&&C.doUpdateValue([Le,Math.max(r.value[1],Le)],!1)}function me(Le){typeof Le!="number"&&(Le=tr(Le)),r.value===null?C.doUpdateValue([Le,Le],!1):Array.isArray(r.value)&&C.doUpdateValue([Math.min(r.value[0],Le),Le],!1)}function He(Le,dt){dt===void 0&&(dt=Le),typeof Le!="number"&&(Le=tr(Le)),typeof dt!="number"&&(dt=tr(dt)),C.doUpdateValue([Le,dt],!1)}function ze(Le){return tr(t==="datetimerange"?cP(Le):oC(Le))}function it(Le){const dt=Jl(Le,r.dateFormat,new Date,C.dateFnsOptions.value);if(zs(dt))if(r.value){if(Array.isArray(r.value)){const Bt=Gs(r.value[0],{year:za(dt),month:Sa(dt),date:ll(dt)});Q(ze(tr(Bt)))}}else{const Bt=Gs(new Date,{year:za(dt),month:Sa(dt),date:ll(dt)});Q(ze(tr(Bt)))}else L.value=Le}function we(Le){const dt=Jl(Le,r.dateFormat,new Date,C.dateFnsOptions.value);if(zs(dt)){if(r.value===null){const Bt=Gs(new Date,{year:za(dt),month:Sa(dt),date:ll(dt)});me(ze(tr(Bt)))}else if(Array.isArray(r.value)){const Bt=Gs(r.value[1],{year:za(dt),month:Sa(dt),date:ll(dt)});me(ze(tr(Bt)))}}else O.value=Le}function nt(){const Le=Jl(L.value,r.dateFormat,new Date,C.dateFnsOptions.value),{value:dt}=r;if(zs(Le)){if(dt===null){const Bt=Gs(new Date,{year:za(Le),month:Sa(Le),date:ll(Le)});Q(ze(tr(Bt)))}else if(Array.isArray(dt)){const Bt=Gs(dt[0],{year:za(Le),month:Sa(Le),date:ll(Le)});Q(ze(tr(Bt)))}}else jt()}function st(){const Le=Jl(O.value,r.dateFormat,new Date,C.dateFnsOptions.value),{value:dt}=r;if(zs(Le)){if(dt===null){const Bt=Gs(new Date,{year:za(Le),month:Sa(Le),date:ll(Le)});me(ze(tr(Bt)))}else if(Array.isArray(dt)){const Bt=Gs(dt[1],{year:za(Le),month:Sa(Le),date:ll(Le)});me(ze(tr(Bt)))}}else jt()}function jt(Le){const{value:dt}=r;if(dt===null||!Array.isArray(dt)){L.value="",O.value="";return}const{dateFormat:Bt}=r;Le===void 0&&(Le=dt),L.value=li(Le[0],Bt,C.dateFnsOptions.value),O.value=li(Le[1],Bt,C.dateFnsOptions.value)}function Jt(Le){Le!==null&&Q(Le)}function Ae(Le){Le!==null&&me(Le)}function ut(Le){C.cachePendingValue();const dt=C.getShortcutValue(Le);!Array.isArray(dt)||He(...dt)}function ur(Le){const dt=C.getShortcutValue(Le);!Array.isArray(dt)||(He(...dt),C.clearPendingValue(),q())}return Object.assign(Object.assign(Object.assign({startDatesElRef:_,endDatesElRef:T,resetSelectingStatus:Ie,handleDateClick:V,handleDateMouseEnter:j,handleConfirmClick:q,startCalendarPrevYear:D,startCalendarPrevMonth:H,startCalendarNextYear:ke,startCalendarNextMonth:z,endCalendarPrevYear:te,endCalendarPrevMonth:Qe,endCalendarNextMonth:ge,endCalendarNextYear:he,mergedIsDateDisabled:Ve,changeStartEndTime:He,ranges:m,startCalendarMonth:ae,startCalendarYear:Y,endCalendarMonth:Z,endCalendarYear:fe,weekdays:X,startDateArray:U,endDateArray:W,handleRangeShortcutMouseenter:ut,handleRangeShortcutClick:ur},C),S),{startDateDisplayString:L,endDateInput:O,timePickerSize:C.timePickerSize,startTimeValue:le,endTimeValue:ue,handleFocusDetectorFocus:C.handleFocusDetectorFocus,handleStartTimePickerChange:Jt,handleEndTimePickerChange:Ae,handleStartDateInput:it,handleStartDateInputBlur:nt,handleEndDateInput:we,handleEndDateInputBlur:st,datePickerSlots:w,shortcuts:Ee})}C0.props=O7e;var L7e=xt({name:"DateTimeRangePanel",props:C0.props,setup(r){return C0(r,"datetimerange")},render(){var r,t,e;const{mergedClsPrefix:n,mergedTheme:i,shortcuts:a}=this;return I("div",{ref:"selfRef",tabindex:0,class:`${n}-date-panel ${n}-date-panel--datetimerange`,onClick:this.resetSelectingStatus,onKeydown:this.handlePanelKeyDown,onFocus:this.handlePanelFocus},I("div",{class:`${n}-date-panel-header`},I(sh,{value:this.startDateDisplayString,theme:i.peers.Input,themeOverrides:i.peerOverrides.Input,size:this.timePickerSize,stateful:!1,class:`${n}-date-panel-date-input`,textDecoration:this.isStartValueInvalid?"line-through":"",placeholder:this.locale.selectDate,onBlur:this.handleStartDateInputBlur,onUpdateValue:this.handleStartDateInput}),I(kP,{size:this.timePickerSize,to:!1,showIcon:!1,theme:i.peers.TimePicker,themeOverrides:i.peerOverrides.TimePicker,stateful:!1,placeholder:this.locale.selectTime,format:this.timeFormat,value:this.startTimeValue,isHourDisabled:this.isStartHourDisabled,isMinuteDisabled:this.isStartMinuteDisabled,isSecondDisabled:this.isStartSecondDisabled,onUpdateValue:this.handleStartTimePickerChange}),I(sh,{value:this.endDateInput,theme:i.peers.Input,themeOverrides:i.peerOverrides.Input,stateful:!1,size:this.timePickerSize,class:`${n}-date-panel-date-input`,textDecoration:this.isEndValueInvalid?"line-through":"",placeholder:this.locale.selectDate,onBlur:this.handleEndDateInputBlur,onUpdateValue:this.handleEndDateInput}),I(kP,{showIcon:!1,theme:i.peers.TimePicker,themeOverrides:i.peerOverrides.TimePicker,to:!1,size:this.timePickerSize,stateful:!1,format:this.timeFormat,placeholder:this.locale.selectTime,value:this.endTimeValue,isHourDisabled:this.isEndHourDisabled,isMinuteDisabled:this.isEndMinuteDisabled,isSecondDisabled:this.isEndSecondDisabled,onUpdateValue:this.handleEndTimePickerChange})),I("div",{ref:"startDatesElRef",class:`${n}-date-panel-calendar ${n}-date-panel-calendar--start`},I("div",{class:`${n}-date-panel-month`},I("div",{class:`${n}-date-panel-month__fast-prev`,onClick:this.startCalendarPrevYear},I(eh,null)),I("div",{class:`${n}-date-panel-month__prev`,onClick:this.startCalendarPrevMonth},I(Jd,null)),I("div",{class:`${n}-date-panel-month__month-year`},this.locale.monthBeforeYear?`${this.startCalendarMonth} ${this.startCalendarYear}`:`${this.startCalendarYear} ${this.startCalendarMonth}`),I("div",{class:`${n}-date-panel-month__next`,onClick:this.startCalendarNextMonth},I(rh,null)),I("div",{class:`${n}-date-panel-month__fast-next`,onClick:this.startCalendarNextYear},I(th,null))),I("div",{class:`${n}-date-panel-weekdays`},this.weekdays.map(o=>I("div",{key:o,class:`${n}-date-panel-weekdays__day`},o))),I("div",{class:`${n}-date-panel__divider`}),I("div",{class:`${n}-date-panel-dates`},this.startDateArray.map((o,s)=>I("div",{"data-n-date":!0,key:s,class:[`${n}-date-panel-date`,{[`${n}-date-panel-date--excluded`]:!o.inCurrentMonth,[`${n}-date-panel-date--current`]:o.isCurrentDate,[`${n}-date-panel-date--selected`]:o.selected,[`${n}-date-panel-date--covered`]:o.inSpan,[`${n}-date-panel-date--start`]:o.startOfSpan,[`${n}-date-panel-date--end`]:o.endOfSpan,[`${n}-date-panel-date--disabled`]:this.mergedIsDateDisabled(o.ts)}],onClick:()=>this.handleDateClick(o),onMouseenter:()=>this.handleDateMouseEnter(o)},o.dateObject.date,o.isCurrentDate?I("div",{class:`${n}-date-panel-date__sup`}):null)))),I("div",{class:`${n}-date-panel__vertical-divider`}),I("div",{ref:"endDatesElRef",class:`${n}-date-panel-calendar ${n}-date-panel-calendar--end`},I("div",{class:`${n}-date-panel-month`},I("div",{class:`${n}-date-panel-month__fast-prev`,onClick:this.endCalendarPrevYear},I(eh,null)),I("div",{class:`${n}-date-panel-month__prev`,onClick:this.endCalendarPrevMonth},I(Jd,null)),I("div",{class:`${n}-date-panel-month__month-year`},this.locale.monthBeforeYear?`${this.endCalendarMonth} ${this.endCalendarYear}`:`${this.endCalendarYear} ${this.endCalendarMonth}`),I("div",{class:`${n}-date-panel-month__next`,onClick:this.endCalendarNextMonth},I(rh,null)),I("div",{class:`${n}-date-panel-month__fast-next`,onClick:this.endCalendarNextYear},I(th,null))),I("div",{class:`${n}-date-panel-weekdays`},this.weekdays.map(o=>I("div",{key:o,class:`${n}-date-panel-weekdays__day`},o))),I("div",{class:`${n}-date-panel__divider`}),I("div",{class:`${n}-date-panel-dates`},this.endDateArray.map((o,s)=>I("div",{"data-n-date":!0,key:s,class:[`${n}-date-panel-date`,{[`${n}-date-panel-date--excluded`]:!o.inCurrentMonth,[`${n}-date-panel-date--current`]:o.isCurrentDate,[`${n}-date-panel-date--selected`]:o.selected,[`${n}-date-panel-date--covered`]:o.inSpan,[`${n}-date-panel-date--start`]:o.startOfSpan,[`${n}-date-panel-date--end`]:o.endOfSpan,[`${n}-date-panel-date--disabled`]:this.mergedIsDateDisabled(o.ts)}],onClick:()=>this.handleDateClick(o),onMouseenter:()=>this.handleDateMouseEnter(o)},o.dateObject.date,o.isCurrentDate?I("div",{class:`${n}-date-panel-date__sup`}):null)))),this.datePickerSlots.footer?I("div",{class:`${n}-date-panel-footer`},qr(this.datePickerSlots,"footer")):null,((r=this.actions)===null||r===void 0?void 0:r.length)||a?I("div",{class:`${n}-date-panel-actions`},I("div",{class:`${n}-date-panel-actions__prefix`},a&&Object.keys(a).map(o=>{const s=a[o];return Array.isArray(s)||typeof s=="function"?I(b0,{size:"tiny",onMouseenter:()=>{this.handleRangeShortcutMouseenter(s)},onClick:()=>{this.handleRangeShortcutClick(s)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>o}):null})),I("div",{class:`${n}-date-panel-actions__suffix`},((t=this.actions)===null||t===void 0?void 0:t.includes("clear"))?I($a,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,((e=this.actions)===null||e===void 0?void 0:e.includes("confirm"))?I($a,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isRangeInvalid,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,I(nh,{onFocus:this.handleFocusDetectorFocus}))}}),F7e=xt({name:"DatePanel",props:dh.props,setup(r){return dh(r,"date")},render(){var r,t,e;const{mergedClsPrefix:n,mergedTheme:i,shortcuts:a}=this;return I("div",{ref:"selfRef",tabindex:0,class:`${n}-date-panel ${n}-date-panel--date`,onFocus:this.handlePanelFocus,onKeydown:this.handlePanelKeyDown},I("div",{class:`${n}-date-panel-calendar`},I("div",{class:`${n}-date-panel-month`},I("div",{class:`${n}-date-panel-month__fast-prev`,onClick:this.prevYear},I(eh,null)),I("div",{class:`${n}-date-panel-month__prev`,onClick:this.prevMonth},I(Jd,null)),I("div",{class:`${n}-date-panel-month__month-year`},this.locale.monthBeforeYear?`${this.calendarMonth} ${this.calendarYear}`:`${this.calendarYear} ${this.calendarMonth}`),I("div",{class:`${n}-date-panel-month__next`,onClick:this.nextMonth},I(rh,null)),I("div",{class:`${n}-date-panel-month__fast-next`,onClick:this.nextYear},I(th,null))),I("div",{class:`${n}-date-panel-weekdays`},this.weekdays.map(o=>I("div",{key:o,class:`${n}-date-panel-weekdays__day`},o))),I("div",{class:`${n}-date-panel-dates`},this.dateArray.map((o,s)=>I("div",{"data-n-date":!0,key:s,class:[`${n}-date-panel-date`,{[`${n}-date-panel-date--current`]:o.isCurrentDate,[`${n}-date-panel-date--selected`]:o.selected,[`${n}-date-panel-date--excluded`]:!o.inCurrentMonth,[`${n}-date-panel-date--disabled`]:this.mergedIsDateDisabled(o.ts)}],onClick:()=>this.handleDateClick(o)},o.dateObject.date,o.isCurrentDate?I("div",{class:`${n}-date-panel-date__sup`}):null)))),this.datePickerSlots.footer?I("div",{class:`${n}-date-panel-footer`},qr(this.datePickerSlots,"footer")):null,((r=this.actions)===null||r===void 0?void 0:r.length)||a?I("div",{class:`${n}-date-panel-actions`},I("div",{class:`${n}-date-panel-actions__prefix`},a&&Object.keys(a).map(o=>{const s=a[o];return Array.isArray(s)?null:I(b0,{size:"tiny",onMouseenter:()=>{this.handleSingleShortcutMouseenter(s)},onClick:()=>{this.handleSingleShortcutClick(s)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>o})})),I("div",{class:`${n}-date-panel-actions__suffix`},((t=this.actions)===null||t===void 0?void 0:t.includes("clear"))?I($a,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,((e=this.actions)===null||e===void 0?void 0:e.includes("now"))?I($a,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",onClick:this.handleNowClick},{default:()=>this.locale.now}):null)):null,I(nh,{onFocus:this.handleFocusDetectorFocus}))}}),N7e=xt({name:"DateRangePanel",props:C0.props,setup(r){return C0(r,"daterange")},render(){var r,t,e;const{mergedClsPrefix:n,mergedTheme:i,shortcuts:a}=this;return I("div",{ref:"selfRef",tabindex:0,class:`${n}-date-panel ${n}-date-panel--daterange`,onClick:this.resetSelectingStatus,onKeydown:this.handlePanelKeyDown,onFocus:this.handlePanelFocus},I("div",{ref:"startDatesElRef",class:`${n}-date-panel-calendar ${n}-date-panel-calendar--start`},I("div",{class:`${n}-date-panel-month`},I("div",{class:`${n}-date-panel-month__fast-prev`,onClick:this.startCalendarPrevYear},I(eh,null)),I("div",{class:`${n}-date-panel-month__prev`,onClick:this.startCalendarPrevMonth},I(Jd,null)),I("div",{class:`${n}-date-panel-month__month-year`},this.locale.monthBeforeYear?`${this.startCalendarMonth} ${this.startCalendarYear}`:`${this.startCalendarYear} ${this.startCalendarMonth}`),I("div",{class:`${n}-date-panel-month__next`,onClick:this.startCalendarNextMonth},I(rh,null)),I("div",{class:`${n}-date-panel-month__fast-next`,onClick:this.startCalendarNextYear},I(th,null))),I("div",{class:`${n}-date-panel-weekdays`},this.weekdays.map(o=>I("div",{key:o,class:`${n}-date-panel-weekdays__day`},o))),I("div",{class:`${n}-date-panel__divider`}),I("div",{class:`${n}-date-panel-dates`},this.startDateArray.map((o,s)=>I("div",{"data-n-date":!0,key:s,class:[`${n}-date-panel-date`,{[`${n}-date-panel-date--excluded`]:!o.inCurrentMonth,[`${n}-date-panel-date--current`]:o.isCurrentDate,[`${n}-date-panel-date--selected`]:o.selected,[`${n}-date-panel-date--covered`]:o.inSpan,[`${n}-date-panel-date--start`]:o.startOfSpan,[`${n}-date-panel-date--end`]:o.endOfSpan,[`${n}-date-panel-date--disabled`]:this.mergedIsDateDisabled(o.ts)}],onClick:()=>this.handleDateClick(o),onMouseenter:()=>this.handleDateMouseEnter(o)},o.dateObject.date,o.isCurrentDate?I("div",{class:`${n}-date-panel-date__sup`}):null)))),I("div",{class:`${n}-date-panel__vertical-divider`}),I("div",{ref:"endDatesElRef",class:`${n}-date-panel-calendar ${n}-date-panel-calendar--end`},I("div",{class:`${n}-date-panel-month`},I("div",{class:`${n}-date-panel-month__fast-prev`,onClick:this.endCalendarPrevYear},I(eh,null)),I("div",{class:`${n}-date-panel-month__prev`,onClick:this.endCalendarPrevMonth},I(Jd,null)),I("div",{class:`${n}-date-panel-month__month-year`},this.locale.monthBeforeYear?`${this.endCalendarMonth} ${this.endCalendarYear}`:`${this.endCalendarYear} ${this.endCalendarMonth}`),I("div",{class:`${n}-date-panel-month__next`,onClick:this.endCalendarNextMonth},I(rh,null)),I("div",{class:`${n}-date-panel-month__fast-next`,onClick:this.endCalendarNextYear},I(th,null))),I("div",{class:`${n}-date-panel-weekdays`},this.weekdays.map(o=>I("div",{key:o,class:`${n}-date-panel-weekdays__day`},o))),I("div",{class:`${n}-date-panel__divider`}),I("div",{class:`${n}-date-panel-dates`},this.endDateArray.map((o,s)=>I("div",{"data-n-date":!0,key:s,class:[`${n}-date-panel-date`,{[`${n}-date-panel-date--excluded`]:!o.inCurrentMonth,[`${n}-date-panel-date--current`]:o.isCurrentDate,[`${n}-date-panel-date--selected`]:o.selected,[`${n}-date-panel-date--covered`]:o.inSpan,[`${n}-date-panel-date--start`]:o.startOfSpan,[`${n}-date-panel-date--end`]:o.endOfSpan,[`${n}-date-panel-date--disabled`]:this.mergedIsDateDisabled(o.ts)}],onClick:()=>this.handleDateClick(o),onMouseenter:()=>this.handleDateMouseEnter(o)},o.dateObject.date,o.isCurrentDate?I("div",{class:`${n}-date-panel-date__sup`}):null)))),this.datePickerSlots.footer?I("div",{class:`${n}-date-panel-footer`},qr(this.datePickerSlots,"footer")):null,((r=this.actions)===null||r===void 0?void 0:r.length)||a?I("div",{class:`${n}-date-panel-actions`},I("div",{class:`${n}-date-panel-actions__prefix`},a&&Object.keys(a).map(o=>{const s=a[o];return Array.isArray(s)||typeof s=="function"?I(b0,{size:"tiny",onMouseenter:()=>{this.handleRangeShortcutMouseenter(s)},onClick:()=>{this.handleRangeShortcutClick(s)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>o}):null})),I("div",{class:`${n}-date-panel-actions__suffix`},((t=this.actions)===null||t===void 0?void 0:t.includes("clear"))?I($a,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,((e=this.actions)===null||e===void 0?void 0:e.includes("confirm"))?I($a,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isRangeInvalid,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,I(nh,{onFocus:this.handleFocusDetectorFocus}))}}),qq=xt({name:"MonthPanel",props:Object.assign(Object.assign({},dh.props),{type:{type:String,required:!0}}),setup(r){const t=dh(r,r.type),e=(n,i,a)=>{const{mergedIsDateDisabled:o,handleDateClick:s}=t;return I("div",{"data-n-date":!0,key:i,class:[`${a}-date-panel-month-calendar__picker-col-item`,{[`${a}-date-panel-month-calendar__picker-col-item--current`]:n.type==="month"?n.isCurrentMonth:n.isCurrentYear,[`${a}-date-panel-month-calendar__picker-col-item--selected`]:n.selected,[`${a}-date-panel-month-calendar__picker-col-item--disabled`]:o(n.ts)}],onClick:()=>s(n)},n.type==="month"?n.dateObject.month+1:n.dateObject.year)};return Object.assign(Object.assign({},t),{renderItem:e})},render(){const{mergedClsPrefix:r,mergedTheme:t,shortcuts:e,actions:n,renderItem:i,type:a}=this;return I("div",{ref:"selfRef",tabindex:0,class:`${r}-date-panel ${r}-date-panel--month`,onFocus:this.handlePanelFocus,onKeydown:this.handlePanelKeyDown},I("div",{class:`${r}-date-panel-month-calendar`},I(Bs,{ref:"scrollbarInstRef",class:`${r}-date-panel-month-calendar__picker-col`,theme:t.peers.Scrollbar,themeOverrides:t.peerOverrides.Scrollbar,container:this.virtualListContainer,content:this.virtualListContent,horizontalRailStyle:{zIndex:1},verticalRailStyle:{zIndex:1}},{default:()=>I(JI,{ref:"yearScrollRef",items:this.yearArray,itemSize:hP,showScrollbar:!1,keyField:"ts",onScroll:this.handleVirtualListScroll,paddingBottom:4},{default:({item:o,index:s})=>i(o,s,r)})}),a==="month"?I("div",{class:`${r}-date-panel-month-calendar__picker-col`},I(Bs,{ref:"monthScrollRef",theme:t.peers.Scrollbar,themeOverrides:t.peerOverrides.Scrollbar},{default:()=>[this.monthArray.map((o,s)=>i(o,s,r)),I("div",{class:`${r}-date-panel-month-calendar__padding`})]})):null),this.datePickerSlots.footer?I("div",{class:`${r}-date-panel-footer`},{default:this.datePickerSlots.footer}):null,(n==null?void 0:n.length)||e?I("div",{class:`${r}-date-panel-actions`},I("div",{class:`${r}-date-panel-actions__prefix`},e&&Object.keys(e).map(o=>{const s=e[o];return Array.isArray(s)?null:I(b0,{size:"tiny",onMouseenter:()=>{this.handleSingleShortcutMouseenter(s)},onClick:()=>{this.handleSingleShortcutClick(s)},onMouseleave:()=>{this.handleShortcutMouseleave()}},{default:()=>o})})),I("div",{class:`${r}-date-panel-actions__suffix`},(n==null?void 0:n.includes("clear"))?I($a,{theme:t.peers.Button,themeOverrides:t.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,(n==null?void 0:n.includes("now"))?I($a,{theme:t.peers.Button,themeOverrides:t.peerOverrides.Button,size:"tiny",onClick:this.handleNowClick},{default:()=>this.locale.now}):null,(n==null?void 0:n.includes("confirm"))?I($a,{theme:t.peers.Button,themeOverrides:t.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isDateInvalid,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,I(nh,{onFocus:this.handleFocusDetectorFocus}))}}),B7e=_e([de("date-picker",`
 position: relative;
 z-index: auto;
 `,[de("date-picker-icon",`
 color: var(--icon-color);
 transition: color .3s var(--bezier);
 `),Ge("disabled",[de("date-picker-icon",`
 color: var(--icon-color-disabled);
 `)])]),de("date-panel",`
 outline: none;
 margin: 4px 0;
 display: grid;
 grid-template-columns: 0fr;
 border-radius: var(--panel-border-radius);
 background-color: var(--panel-color);
 box-shadow: var(--panel-box-shadow);
 color: var(--panel-text-color);
 `,[nf(),de("date-panel-calendar",{padding:"var(--calendar-left-padding)",display:"grid",gridTemplateColumns:"1fr",gridArea:"left-calendar"},[Ge("end",{padding:"var(--calendar-right-padding)",gridArea:"right-calendar"})]),de("date-panel-month-calendar",{display:"flex",gridArea:"left-calendar"},[Se("picker-col",`
 min-width: var(--scroll-item-width);
 height: calc(var(--scroll-item-height) * 6);
 user-select: none;
 `,[_e("&:first-child",`
 min-width: calc(var(--scroll-item-width) + 4px);
 `,[Se("picker-col-item",[_e("&::before","left: 4px;")])]),Se("padding",`
 height: calc(var(--scroll-item-height) * 5)
 `)]),Se("picker-col-item",`
 z-index: 0;
 cursor: pointer;
 height: var(--scroll-item-height);
 box-sizing: border-box;
 padding-top: 4px;
 display: flex;
 align-items: center;
 justify-content: center;
 position: relative;
 transition: 
 color .3s var(--bezier),
 background-color .3s var(--bezier);
 background: #0000;
 color: var(--item-text-color);
 `,[_e("&::before",`
 z-index: -1;
 content: "";
 position: absolute;
 left: 0;
 right: 4px;
 top: 4px;
 bottom: 0;
 border-radius: var(--scroll-item-border-radius);
 transition: 
 background-color .3s var(--bezier);
 `),Mn("disabled",[_e("&:hover::before",`
 background-color: var(--item-color-hover);
 `),Ge("selected",`
 color: var(--item-color-active);
 `,[_e("&::before","background-color: var(--item-color-hover);")])]),Ge("disabled",`
 background-color: var(--item-color-disabled);
 cursor: not-allowed;
 `)])]),Ge("date",{gridTemplateAreas:`
 "left-calendar"
 "footer"
 "action"
 `}),Ge("daterange",{gridTemplateAreas:`
 "left-calendar divider right-calendar"
 "footer footer footer"
 "action action action"
 `}),Ge("datetime",{gridTemplateAreas:`
 "header"
 "left-calendar"
 "footer"
 "action"
 `}),Ge("datetimerange",{gridTemplateAreas:`
 "header header header"
 "left-calendar divider right-calendar"
 "footer footer footer"
 "action action action"
 `}),Ge("month",{gridTemplateAreas:`
 "left-calendar"
 "footer"
 "action"
 `}),de("date-panel-footer",{gridArea:"footer"}),de("date-panel-actions",{gridArea:"action"}),de("date-panel-header",{gridArea:"header"}),de("date-panel-header",`
 box-sizing: border-box;
 width: 100%;
 align-items: center;
 padding: var(--panel-header-padding);
 display: flex;
 justify-content: space-between;
 border-bottom: 1px solid var(--panel-header-divider-color);
 `,[_e(">",[_e("*:not(:last-child)",{marginRight:"10px"}),_e("*",{flex:1,width:0}),de("time-picker",{zIndex:1})])]),de("date-panel-month",`
 box-sizing: border-box;
 display: grid;
 grid-template-columns: var(--calendar-title-grid-template-columns);
 align-items: center;
 justify-items: center;
 padding: var(--calendar-title-padding);
 height: var(--calendar-title-height);
 `,[Se("prev, next, fast-prev, fast-next",`
 line-height: 0;
 cursor: pointer;
 width: var(--arrow-size);
 height: var(--arrow-size);
 color: var(--arrow-color);
 `),Se("month-year",`
 font-size: var(--calendar-title-font-size);
 font-weight: var(--calendar-title-font-weight);
 line-height: 17px;
 flex-grow: 1;
 text-align: center;
 color: var(--calendar-title-text-color);
 `)]),de("date-panel-weekdays",`
 display: grid;
 margin: auto;
 grid-template-columns: repeat(7, var(--item-cell-width));
 grid-template-rows: repeat(1, var(--item-cell-height));
 align-items: center;
 justify-items: center;
 margin-bottom: 4px;
 border-bottom: 1px solid var(--calendar-days-divider-color);
 `,[Se("day",`
 line-height: 15px;
 width: var(--item-size);
 text-align: center;
 font-size: var(--calendar-days-font-size);
 color: var(--item-text-color);
 `)]),de("date-panel-dates",`
 margin: auto;
 display: grid;
 grid-template-columns: repeat(7, var(--item-cell-width));
 grid-template-rows: repeat(6, var(--item-cell-height));
 align-items: center;
 justify-items: center;
 flex-wrap: wrap;
 `,[de("date-panel-date",`
 position: relative;
 width: var(--item-size);
 height: var(--item-size);
 line-height: var(--item-size);
 text-align: center;
 font-size: var(--item-font-size);
 border-radius: var(--item-border-radius);
 z-index: 0;
 cursor: pointer;
 transition:
 background-color .2s var(--bezier),
 color .2s var(--bezier);
 `,[Mn("disabled",[Mn("selected",[_e("&:hover",{backgroundColor:"var(--item-color-hover)"})])]),Ge("current",[Se("sup",`
 position: absolute;
 top: 2px;
 right: 2px;
 content: "";
 height: 4px;
 width: 4px;
 border-radius: 2px;
 background-color: var(--item-color-active);
 transition:
 background-color .2s var(--bezier);
 `)]),_e("&::after",`
 content: "";
 z-index: -1;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 transition: background-color .3s var(--bezier);
 `),Ge("covered, start, end",[Mn("excluded",[_e("&::before",`
 content: "";
 z-index: -2;
 position: absolute;
 left: calc((var(--item-size) - var(--item-cell-width)) / 2);
 right: calc((var(--item-size) - var(--item-cell-width)) / 2);
 top: 0;
 bottom: 0;
 background-color: var(--item-color-included);
 `),_e("&:nth-child(7n + 1)::before",{borderTopLeftRadius:"var(--item-border-radius)",borderBottomLeftRadius:"var(--item-border-radius)"}),_e("&:nth-child(7n + 7)::before",{borderTopRightRadius:"var(--item-border-radius)",borderBottomRightRadius:"var(--item-border-radius)"})])]),Ge("selected",{color:"var(--item-text-color-active)"},[_e("&::after",{backgroundColor:"var(--item-color-active)"}),Ge("start",[_e("&::before",{left:"50%"})]),Ge("end",[_e("&::before",{right:"50%"})]),Se("sup",{backgroundColor:"var(--panel-color)"})]),Ge("excluded",{color:"var(--item-text-color-disabled)"},[Ge("selected",[_e("&::after",{backgroundColor:"var(--item-color-disabled)"})])]),Ge("disabled",{cursor:"not-allowed",color:"var(--item-text-color-disabled)"},[Ge("covered",[_e("&::before",{backgroundColor:"var(--item-color-disabled)"})]),Ge("selected",[_e("&::before",{backgroundColor:"var(--item-color-disabled)"}),_e("&::after",{backgroundColor:"var(--item-color-disabled)"})])])])]),Se("vertical-divider",`
 grid-area: divider;
 height: 100%;
 width: 1px;
 background-color: var(--calendar-divider-color);
 `),de("date-panel-footer",{borderTop:"1px solid var(--panel-action-divider-color)",padding:"var(--panel-extra-footer-padding)"}),de("date-panel-actions",`
 flex: 1;
 padding: var(--panel-action-padding);
 display: flex;
 align-items: center;
 justify-content: space-between;
 border-top: 1px solid var(--panel-action-divider-color);
 `,[Se("prefix, suffix",`
 display: flex;
 margin-bottom: -8px;
 `),Se("suffix",`
 align-self: flex-end;
 `),Se("prefix",`
 flex-wrap: wrap;
 `),de("button",`
 margin-bottom: 8px;
 `,[_e("&:not(:last-child)",`
 margin-right: 8px;
 `)])])]),_e("[data-n-date].transition-disabled",{transition:"none !important"},[_e("&::before, &::after",{transition:"none !important"})])]);const $7e=Object.assign(Object.assign({},rr.props),{to:Ao.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,updateValueOnClose:Boolean,defaultValue:{type:[Number,Array],default:null},disabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom-start"},value:[Number,Array],size:String,type:{type:String,default:"date"},separator:String,placeholder:String,startPlaceholder:String,endPlaceholder:String,format:String,dateFormat:String,timeFormat:String,actions:Array,shortcuts:Object,isDateDisabled:Function,isTimeDisabled:Function,show:{type:Boolean,default:void 0},ranges:Object,firstDayOfWeek:Number,inputReadonly:Boolean,closeOnSelect:Boolean,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onChange:{type:[Function,Array],validator:()=>!0,default:void 0}});var kft=xt({name:"DatePicker",props:$7e,setup(r,{slots:t}){const{localeRef:e,dateLocaleRef:n}=Qd("DatePicker"),i=Xl(r),{mergedSizeRef:a,mergedDisabledRef:o}=i,{NConfigProvider:s,mergedClsPrefixRef:l,mergedBorderedRef:u,namespaceRef:c}=mn(r),f=Oe(null),d=Oe(null),h=Oe(null),v=Oe(!1),p=Kt(r,"show"),g=Qi(p,v),m=Oe(r.defaultValue),y=re(()=>r.value),b=Qi(y,m),x=Oe(null);Ks(()=>{x.value=b.value});const w=Oe(""),S=Oe(""),C=Oe(""),_=rr("DatePicker","DatePicker",B7e,x7e,r,l),T=re(()=>({locale:n.value.locale})),E=re(()=>{var j,q;return((q=(j=s==null?void 0:s.mergedComponentPropsRef.value)===null||j===void 0?void 0:j.DatePicker)===null||q===void 0?void 0:q.timePickerSize)||"small"}),M=re(()=>["daterange","datetimerange"].includes(r.type)),k=re(()=>{const{placeholder:j}=r;if(j===void 0){const{type:q}=r;switch(q){case"date":return e.value.datePlaceholder;case"datetime":return e.value.datetimePlaceholder;case"month":return e.value.monthPlaceholder;case"year":return e.value.yearPlaceholder;default:return""}}else return j}),P=re(()=>r.startPlaceholder===void 0?r.type==="daterange"?e.value.startDatePlaceholder:r.type==="datetimerange"?e.value.startDatetimePlaceholder:"":r.startPlaceholder),F=re(()=>r.endPlaceholder===void 0?r.type==="daterange"?e.value.endDatePlaceholder:r.type==="datetimerange"?e.value.endDatetimePlaceholder:"":r.endPlaceholder),$=re(()=>r.format||vWe[r.type]),R=re(()=>{const{actions:j,type:q}=r;if(j!==void 0)return j;switch(q){case"date":return["clear","now"];case"datetime":return["clear","now","confirm"];case"daterange":return["clear","confirm"];case"datetimerange":return["clear","confirm"];case"month":return["clear","now","confirm"];case"year":return["clear","now"];default:{ql("data-picker","The type is wrong, n-date-picker's type only supports `date`, `datetime`, `daterange` and `datetimerange`.");break}}});function L(j){x.value=j}function O(j){const{"onUpdate:value":q,onUpdateValue:ee,onChange:Q}=r,{nTriggerFormChange:me,nTriggerFormInput:He}=i;ee&&Tt(ee,j),q&&Tt(q,j),Q&&Tt(Q,j),m.value=j,me(),He()}function B(j){const{onFocus:q}=r,{nTriggerFormFocus:ee}=i;q&&Tt(q,j),ee()}function U(j){const{onBlur:q}=r,{nTriggerFormBlur:ee}=i;q&&Tt(q,j),ee()}function W(j){const{"onUpdate:show":q,onUpdateShow:ee}=r;q&&Tt(q,j),ee&&Tt(ee,j),v.value=j}function X(j){j.code==="Escape"&&Ie({returnFocus:!0})}function ae(){var j;W(!1),(j=h.value)===null||j===void 0||j.deactivate()}function Z(){Ie({returnFocus:!0})}function Y(j){var q;g.value&&!((q=d.value)===null||q===void 0?void 0:q.contains(j.target))&&Ie({returnFocus:!1})}function fe(j){Ie({returnFocus:!0,disableUpdateOnClose:j})}function le(j){if(!f.value)return;const{monthScrollRef:q,yearScrollRef:ee}=f.value,{value:Q}=b;if(q){const me=Sa(j===void 0?Q===null?Date.now():Q:j);q.scrollTo({top:me*hP})}if(ee){const me=za(j===void 0?Q===null?Date.now():Q:j)-xq;ee.scrollTo({top:me*hP})}}function ue(j,q){q?O(j):L(j)}function Ee(){O(x.value)}function De(){const{value:j}=x;M.value?(Array.isArray(j)||j===null)&&ke(j):Array.isArray(j)||je(j)}function je(j){j===null?w.value="":w.value=li(j,$.value,T.value)}function ke(j){if(j===null)S.value="",C.value="";else{const q=T.value;S.value=li(j[0],$.value,q),C.value=li(j[1],$.value,q)}}function D(){g.value||Ve()}function z(j){var q;((q=f.value)===null||q===void 0?void 0:q.$el.contains(j.relatedTarget))||(U(j),De(),Ie({returnFocus:!1}))}function H(){o.value||(De(),Ie({returnFocus:!1}))}function he(j){if(j===""){O(null);return}const q=Jl(j,$.value,new Date,T.value);zs(q)?(O(tr(q)),De()):w.value=j}function te(j){if(j[0]===""&&j[1]===""){O(null);return}const[q,ee]=j,Q=Jl(q,$.value,new Date,T.value),me=Jl(ee,$.value,new Date,T.value);zs(Q)&&zs(me)?(O([tr(Q),tr(me)]),De()):[S.value,C.value]=j}function ge(j){o.value||Vd(j,"clear")||g.value||Ve()}function Qe(j){o.value||B(j)}function Ve(){o.value||g.value||(W(!0),(r.type==="month"||r.type==="year")&&Ha(le))}function Ie({returnFocus:j,disableUpdateOnClose:q}){var ee;g.value&&(W(!1),r.type!=="date"&&r.updateValueOnClose&&!q&&Ee(),j&&((ee=h.value)===null||ee===void 0||ee.focus()))}fn(x,()=>{De()}),De(),fn(g,j=>{j||(x.value=b.value)});const Be=w7e(r,x),V=S7e(r,x);return rn(vC,Object.assign(Object.assign(Object.assign({scrollYearMonth:le,mergedClsPrefixRef:l,mergedThemeRef:_,timePickerSizeRef:E,localeRef:e,dateLocaleRef:n,firstDayOfWeekRef:Kt(r,"firstDayOfWeek"),isDateDisabledRef:Kt(r,"isDateDisabled"),rangesRef:Kt(r,"ranges"),closeOnSelectRef:Kt(r,"closeOnSelect"),updateValueOnCloseRef:Kt(r,"updateValueOnClose")},Be),V),{datePickerSlots:t})),{mergedClsPrefix:l,mergedBordered:u,namespace:c,uncontrolledValue:m,pendingValue:x,panelInstRef:f,triggerElRef:d,inputInstRef:h,isMounted:Kd(),displayTime:w,displayStartTime:S,displayEndTime:C,mergedShow:g,adjustedTo:Ao(r),isRange:M,localizedStartPlaceholder:P,localizedEndPlaceholder:F,mergedSize:a,mergedDisabled:o,localizedPlacehoder:k,isValueInvalid:Be.isValueInvalidRef,isStartValueInvalid:V.isStartValueInvalidRef,isEndValueInvalid:V.isEndValueInvalidRef,handleClickOutside:Y,handleKeyDown:X,handleClear:ae,handleTriggerClick:ge,handleInputActivate:D,handleInputDeactivate:H,handleInputFocus:Qe,handleInputBlur:z,handlePanelTabOut:Z,handlePanelClose:fe,handleRangeUpdateValue:te,handleSingleUpdateValue:he,handlePanelUpdateValue:ue,handlePanelConfirm:Ee,mergedTheme:_,actions:R,triggerCssVars:re(()=>{const{common:{cubicBezierEaseInOut:j},self:{iconColor:q,iconColorDisabled:ee}}=_.value;return{"--bezier":j,"--icon-color":q,"--icon-color-disabled":ee}}),cssVars:re(()=>{const{type:j}=r,{common:{cubicBezierEaseInOut:q},self:{calendarTitleFontSize:ee,calendarDaysFontSize:Q,itemFontSize:me,itemTextColor:He,itemColorDisabled:ze,itemColorIncluded:it,itemColorHover:we,itemColorActive:nt,itemBorderRadius:st,itemTextColorDisabled:jt,itemTextColorActive:Jt,panelColor:Ae,panelTextColor:ut,arrowColor:ur,calendarTitleTextColor:Le,panelActionDividerColor:dt,panelHeaderDividerColor:Bt,calendarDaysDividerColor:cr,panelBoxShadow:$r,panelBorderRadius:nr,calendarTitleFontWeight:tn,panelExtraFooterPadding:Er,panelActionPadding:zr,itemSize:Qr,itemCellWidth:_n,itemCellHeight:jn,scrollItemWidth:ii,scrollItemHeight:bn,calendarTitlePadding:ai,calendarTitleHeight:Zn,calendarDaysHeight:Br,calendarDaysTextColor:on,arrowSize:mr,panelHeaderPadding:ln,calendarDividerColor:fi,calendarTitleGridTempateColumns:po,iconColor:Ua,iconColorDisabled:ys,scrollItemBorderRadius:hl,[Ot("calendarLeftPadding",j)]:vl,[Ot("calendarRightPadding",j)]:pl}}=_.value;return{"--bezier":q,"--panel-border-radius":nr,"--panel-color":Ae,"--panel-box-shadow":$r,"--panel-text-color":ut,"--panel-header-padding":ln,"--panel-header-divider-color":Bt,"--calendar-left-padding":vl,"--calendar-right-padding":pl,"--calendar-title-height":Zn,"--calendar-title-padding":ai,"--calendar-title-font-size":ee,"--calendar-title-font-weight":tn,"--calendar-title-text-color":Le,"--calendar-title-grid-template-columns":po,"--calendar-days-height":Br,"--calendar-days-divider-color":cr,"--calendar-days-font-size":Q,"--calendar-days-text-color":on,"--calendar-divider-color":fi,"--panel-action-padding":zr,"--panel-extra-footer-padding":Er,"--panel-action-divider-color":dt,"--item-font-size":me,"--item-border-radius":st,"--item-size":Qr,"--item-cell-width":_n,"--item-cell-height":jn,"--item-text-color":He,"--item-color-included":it,"--item-color-disabled":ze,"--item-color-hover":we,"--item-color-active":nt,"--item-text-color-disabled":jt,"--item-text-color-active":Jt,"--scroll-item-width":ii,"--scroll-item-height":bn,"--scroll-item-border-radius":hl,"--arrow-size":mr,"--arrow-color":ur,"--icon-color":Ua,"--icon-color-disabled":ys}})}},render(){const{clearable:r}=this,t={bordered:this.mergedBordered,size:this.mergedSize,passivelyActivated:!0,disabled:this.mergedDisabled,readonly:this.inputReadonly||this.mergedDisabled,clearable:r,onClear:this.handleClear,onClick:this.handleTriggerClick,onActivate:this.handleInputActivate,onDeactivate:this.handleInputDeactivate,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur},e={onUpdateValue:this.handlePanelUpdateValue,onTabOut:this.handlePanelTabOut,onClose:this.handlePanelClose,onKeydown:this.handleKeyDown,onConfirm:this.handlePanelConfirm,ref:"panelInstRef",value:this.pendingValue,active:this.mergedShow,actions:this.actions,shortcuts:this.shortcuts,style:this.cssVars},{mergedClsPrefix:n}=this;return I("div",{ref:"triggerElRef",class:[`${n}-date-picker`,this.mergedDisabled&&`${n}-date-picker--disabled`,this.isRange&&`${n}-date-picker--range`],style:this.triggerCssVars,onKeydown:this.handleKeyDown},I(d0,null,{default:()=>[I(h0,null,{default:()=>this.isRange?I(sh,Object.assign({ref:"inputInstRef",value:[this.displayStartTime,this.displayEndTime],placeholder:[this.localizedStartPlaceholder,this.localizedEndPlaceholder],textDecoration:[this.isStartValueInvalid?"line-through":"",this.isEndValueInvalid?"line-through":""],pair:!0,onUpdateValue:this.handleRangeUpdateValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,internalForceFocus:this.mergedShow,internalDeactivateOnEnter:!0},t),{separator:()=>this.separator===void 0?I(si,{clsPrefix:n,class:`${n}-date-picker-icon`},{default:()=>I(W8e,null)}):this.separator,[r?"clear":"suffix"]:()=>I(si,{clsPrefix:n,class:`${n}-date-picker-icon`},{default:()=>I(dX,null)})}):I(sh,Object.assign({ref:"inputInstRef",value:this.displayTime,placeholder:this.localizedPlacehoder,textDecoration:this.isValueInvalid&&!this.isRange?"line-through":"",onUpdateValue:this.handleSingleUpdateValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,internalForceFocus:this.mergedShow,internalDeactivateOnEnter:!0},t),{[r?"clear":"suffix"]:()=>I(si,{clsPrefix:n,class:`${n}-date-picker-icon`},{default:()=>I(dX,null)})})}),I(v0,{show:this.mergedShow,containerClass:this.namespace,to:this.adjustedTo,teleportDisabled:this.adjustedTo===Ao.tdkey,placement:"bottom-start"},{default:()=>I(Ra,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.mergedShow?pu(this.type==="datetime"?I(R7e,Object.assign({},e)):this.type==="daterange"?I(N7e,Object.assign({},e)):this.type==="datetimerange"?I(L7e,Object.assign({},e)):this.type==="month"?I(qq,Object.assign({},e,{type:"month",key:"month"})):this.type==="year"?I(qq,Object.assign({},e,{type:"year",key:"year"})):I(F7e,Object.assign({},e)),[[ih,this.handleClickOutside]]):null})})]}))}}),z7e={titleFontSize:"18px",padding:"16px 28px 20px 28px",iconSize:"28px",actionSpace:"12px",contentMargin:"8px 0 16px 0",iconMargin:"0 4px 0 0",iconMarginIconTop:"4px 0 8px 0",closeSize:"18px",closeMargin:"22px 28px 0 0",closeMarginIconTop:"12px 18px 0 0"};const G7e=r=>{const{textColor1:t,textColor2:e,modalColor:n,closeColor:i,closeColorHover:a,closeColorPressed:o,infoColor:s,successColor:l,warningColor:u,errorColor:c,primaryColor:f,dividerColor:d,borderRadius:h,fontWeightStrong:v,lineHeight:p,fontSize:g}=r;return Object.assign(Object.assign({},z7e),{fontSize:g,lineHeight:p,border:`1px solid ${d}`,titleTextColor:t,textColor:e,color:n,closeColor:i,closeColorHover:a,closeColorPressed:o,iconColor:f,iconColorInfo:s,iconColorSuccess:l,iconColorWarning:u,iconColorError:c,borderRadius:h,titleFontWeight:v})},U7e=Go({name:"Dialog",common:Wn,peers:{Button:y0},self:G7e});var Kq=U7e,V7e=_e([de("dialog",`
 line-height: var(--line-height);
 position: relative;
 background: var(--color);
 color: var(--text-color);
 box-sizing: border-box;
 margin: auto;
 border-radius: var(--border-radius);
 padding: var(--padding);
 transition: 
 border-color .3s var(--bezier),
 background-color .3s var(--bezier),
 color .3s var(--bezier);
 `,[Se("icon",{color:"var(--icon-color)"}),Ge("bordered",{border:"var(--border)"}),Ge("icon-top",[Se("close",{margin:"var(--close-margin)"}),Se("icon",{margin:"var(--icon-margin)"}),Se("content",{textAlign:"center"}),Se("title",{justifyContent:"center"}),Se("action",{justifyContent:"center"})]),Ge("icon-left",[Se("icon",{margin:"var(--icon-margin)"})]),Se("close",`
 font-size: var(--close-size);
 position: absolute;
 right: 0;
 top: 0;
 margin: var(--close-margin);
 transition: .3s color var(--bezier);
 z-index: 1;
 `),Se("content",`
 font-size: var(--font-size);
 margin: var(--content-margin);
 position: relative;
 word-break: break-word;
 `,[_e("&:last-child","margin-bottom: 0;")]),Se("action",`
 display: flex;
 justify-content: flex-end;
 `,[_e("> *:not(:last-child)",{marginRight:"var(--action-space)"})]),Se("icon",{fontSize:"var(--icon-size)",transition:"color .3s var(--bezier)"}),Se("title",`
 transition: color .3s var(--bezier);
 display: flex;
 align-items: center;
 font-size: var(--title-font-size);
 font-weight: var(--title-font-weight);
 color: var(--title-text-color);
 `),de("dialog-icon-container",{display:"flex",justifyContent:"center"})]),o0(de("dialog",`
 width: 446px;
 max-width: calc(100vw - 32px);
 `)),de("dialog",[qY(`
 width: 446px;
 max-width: calc(100vw - 32px);
 `)])]);const Zq=I(NI,null),Qq={default:Zq,info:Zq,success:I(BI,null),warning:I($I,null),error:I(FI,null)},mC={icon:Function,type:{type:String,default:"default"},title:[String,Function],closable:{type:Boolean,default:!0},negativeText:String,positiveText:String,content:[String,Function],action:Function,showIcon:{type:Boolean,default:!0},loading:Boolean,bordered:Boolean,iconPlacement:String,onPositiveClick:Function,onNegativeClick:Function,onClose:Function},Jq=ef(mC);var eK=xt({name:"Dialog",alias:["NimbusConfirmCard","Confirm"],props:Object.assign(Object.assign({},rr.props),mC),setup(r){const{NConfigProvider:t,mergedClsPrefixRef:e}=mn(r),n=re(()=>{var l,u,c;const{iconPlacement:f}=r;return(c=f!=null?f:(u=(l=t==null?void 0:t.mergedComponentPropsRef.value)===null||l===void 0?void 0:l.Dialog)===null||u===void 0?void 0:u.iconPlacement)!==null&&c!==void 0?c:"left"});function i(l){const{onPositiveClick:u}=r;u&&u(l)}function a(l){const{onNegativeClick:u}=r;u&&u(l)}function o(){const{onClose:l}=r;l&&l()}const s=rr("Dialog","Dialog",V7e,Kq,r,e);return{mergedClsPrefix:e,mergedIconPlacement:n,mergedTheme:s,handlePositiveClick:i,handleNegativeClick:a,handleCloseClick:o,cssVars:re(()=>{const{type:l,iconPlacement:u}=r,{common:{cubicBezierEaseInOut:c},self:{fontSize:f,lineHeight:d,border:h,titleTextColor:v,textColor:p,color:g,closeColor:m,closeColorHover:y,closeColorPressed:b,borderRadius:x,titleFontWeight:w,titleFontSize:S,padding:C,iconSize:_,actionSpace:T,contentMargin:E,closeSize:M,[u==="top"?"iconMarginIconTop":"iconMargin"]:k,[u==="top"?"closeMarginIconTop":"closeMargin"]:P,[Ot("iconColor",l)]:F}}=s.value;return{"--font-size":f,"--icon-color":F,"--bezier":c,"--close-margin":P,"--icon-margin":k,"--icon-size":_,"--close-size":M,"--close-color":m,"--close-color-hover":y,"--close-color-pressed":b,"--color":g,"--text-color":p,"--border-radius":x,"--padding":C,"--line-height":d,"--border":h,"--content-margin":E,"--title-font-size":S,"--title-font-weight":w,"--title-text-color":v,"--action-space":T}})}},render(){const{$slots:r,bordered:t,mergedIconPlacement:e,cssVars:n,closable:i,showIcon:a,title:o,content:s,action:l,negativeText:u,positiveText:c,handlePositiveClick:f,handleNegativeClick:d,mergedTheme:h,loading:v,type:p,mergedClsPrefix:g}=this;return I("div",{class:[`${g}-dialog`,`${g}-dialog--icon-${e}`,t&&`${g}-dialog--bordered`],style:n},i?I(zI,{clsPrefix:g,class:`${g}-dialog__close`,onClick:this.handleCloseClick}):null,a&&e==="top"?I("div",{class:`${g}-dialog-icon-container`},I(si,{clsPrefix:g,class:`${g}-dialog__icon`},{default:()=>qr(r,"icon",void 0,()=>[this.icon?Ni(this.icon):Qq[this.type]])})):null,I("div",{class:`${g}-dialog__title`},a&&e==="left"?I(si,{clsPrefix:g,class:`${g}-dialog__icon`},{default:()=>qr(r,"icon",void 0,()=>[this.icon?Ni(this.icon):Qq[this.type]])}):null,qr(r,"header",void 0,()=>[Ni(o)])),I("div",{class:`${g}-dialog__content`},qr(r,"default",void 0,()=>[Ni(s)])),r.action||c||u||l?I("div",{class:`${g}-dialog__action`},qr(r,"action",void 0,l?()=>[Ni(l)]:()=>[this.negativeText&&I($a,{theme:h.peers.Button,themeOverrides:h.peerOverrides.Button,ghost:!0,size:"small",onClick:d},{default:()=>Ni(this.negativeText)}),this.positiveText&&I($a,{theme:h.peers.Button,themeOverrides:h.peerOverrides.Button,disabled:v,loading:v,size:"small",type:p==="default"?"primary":p,onClick:f},{default:()=>Ni(this.positiveText)})])):null)}});const H7e=r=>{const{modalColor:t,textColor2:e,boxShadow3:n}=r;return{color:t,textColor:e,boxShadow:n}},W7e=Go({name:"Modal",common:Wn,peers:{Scrollbar:oh,Dialog:Kq,Card:wq},self:H7e});var j7e=W7e;const IP=Object.assign(Object.assign({},gP),mC),Y7e=ef(IP);var X7e=xt({name:"ModalBody",inheritAttrs:!1,props:Object.assign(Object.assign({show:{type:Boolean,required:!0},preset:String,displayDirective:{type:String,required:!0}},IP),{onClickoutside:{type:Function,required:!0},onBeforeLeave:{type:Function,required:!0},onAfterLeave:{type:Function,required:!0},onPositiveClick:{type:Function,required:!0},onNegativeClick:{type:Function,required:!0},onClose:{type:Function,required:!0},onAfterEnter:Function}),setup(r){const t=Oe(null),e=Oe(null),n=Oe(r.show),i=Oe(null),a=Oe(null);fn(Kt(r,"show"),g=>{g&&(n.value=!0)});const o=or(sX);function s(){if(o.transformOriginRef.value==="center")return"";const{value:g}=i,{value:m}=a;if(g===null||m===null)return"";if(e.value){const y=e.value.containerScrollTop;return`${g}px ${m+y}px`}return""}function l(g){if(o.transformOriginRef.value==="center")return;const m=o.getMousePosition();if(!m||!e.value)return;const y=e.value.containerScrollTop,{offsetLeft:b,offsetTop:x}=g;if(m){const w=m.y,S=m.x;i.value=-(b-S),a.value=-(x-w-y)}g.style.transformOrigin=s()}function u(g){Ha(()=>{l(g)})}function c(g){g.style.transformOrigin=s(),r.onBeforeLeave()}function f(){n.value=!1,i.value=null,a.value=null,r.onAfterLeave()}function d(){const{onClose:g}=r;g&&g()}function h(){r.onNegativeClick()}function v(){r.onPositiveClick()}function p(g){r.onClickoutside(g)}return rn(kI,t),rn(II,null),rn(PI,null),{mergedTheme:o.mergedThemeRef,appear:o.appearRef,isMounted:o.isMountedRef,mergedClsPrefix:o.mergedClsPrefixRef,bodyRef:t,scrollbarRef:e,displayed:n,handleClickOutside:p,handlePositiveClick:v,handleNegativeClick:h,handleCloseClick:d,handleAfterLeave:f,handleBeforeLeave:c,handleEnter:u}},render(){const{$slots:r,$attrs:t,handleEnter:e,handleAfterLeave:n,handleBeforeLeave:i,handleClickOutside:a,preset:o,mergedClsPrefix:s}=this;let l=null;if(!o){if(l=MI(r),!l){ql("modal","default slot is empty");return}l=fc(l),l.props=El({class:`${s}-modal`},t,l.props||{})}return this.displayDirective==="show"||this.displayed||this.show?pu(I("div",{class:`${s}-modal-body-wrapper`},I(Bs,{ref:"scrollbarRef",theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,contentClass:`${s}-modal-scroll-content`},{default:()=>{var u;return I(Ra,{name:"fade-in-scale-up-transition",appear:(u=this.appear)!==null&&u!==void 0?u:this.isMounted,onEnter:e,onAfterEnter:this.onAfterEnter,onAfterLeave:n,onBeforeLeave:i},{default:()=>pu(this.preset==="confirm"||this.preset==="dialog"?I(eK,Object.assign({},this.$attrs,{class:[`${s}-modal`,this.$attrs.class],ref:"bodyRef",theme:this.mergedTheme.peers.Dialog,themeOverrides:this.mergedTheme.peerOverrides.Dialog},Hu(this.$props,Jq)),r):this.preset==="card"?I(TWe,Object.assign({},this.$attrs,{ref:"bodyRef",class:[`${s}-modal`,this.$attrs.class],theme:this.mergedTheme.peers.Card,themeOverrides:this.mergedTheme.peerOverrides.Card},Hu(this.$props,EWe)),r):l,[[Px,this.show],[ih,a]])})}})),[[Px,this.displayDirective==="if"||this.displayed||this.show]]):null}}),q7e=_e([de("modal-container",`
 position: fixed;
 left: 0;
 top: 0;
 height: 0;
 width: 0;
 display: flex;
 `),de("modal-mask",`
 position: fixed;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 background-color: rgba(0, 0, 0, .4);
 `,[tP({enterDuration:".25s",leaveDuration:".25s",enterCubicBezier:"var(--bezier-ease-out)",leaveCubicBezier:"var(--bezier-ease-out)"})]),de("modal-body-wrapper",`
 position: fixed;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 overflow: visible;
 `,[de("modal-scroll-content",`
 min-height: 100%;
 display: flex;
 position: relative;
 `)]),de("modal",`
 align-self: center;
 color: var(--text-color);
 margin: auto;
 box-shadow: var(--box-shadow);
 `,[nf({duration:".25s",enterScale:".5"})])]);const K7e=Object.assign(Object.assign(Object.assign(Object.assign({},rr.props),{show:Boolean,unstableShowMask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},preset:String,to:[String,Object],displayDirective:{type:String,default:"if"},transformOrigin:{type:String,default:"mouse"}}),IP),{"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onAfterEnter:Function,onBeforeLeave:Function,onAfterLeave:Function,onClose:Function,onPositiveClick:Function,onNegativeClick:Function,onMaskClick:Function,dialog:Boolean,appear:{type:Boolean,default:void 0},overlayStyle:[String,Object],onBeforeHide:Function,onAfterHide:Function,onHide:Function});var Z7e=xt({name:"Modal",inheritAttrs:!1,props:K7e,setup(r){const t=Oe(null),{mergedClsPrefixRef:e,namespaceRef:n}=mn(r),i=rr("Modal","Modal",q7e,j7e,r,e),a=iX(64),o=tX(),s=Kd(),l=r.dialog?or(rK,null):null;function u(g){const{onUpdateShow:m,"onUpdate:show":y,onHide:b}=r;m&&Tt(m,g),y&&Tt(y,g),b&&!g&&b(g)}function c(){const{onClose:g}=r;g?Promise.resolve(g()).then(m=>{m!==!1&&u(!1)}):u(!1)}function f(){const{onPositiveClick:g}=r;g?Promise.resolve(g()).then(m=>{m!==!1&&u(!1)}):u(!1)}function d(){const{onNegativeClick:g}=r;g?Promise.resolve(g()).then(m=>{m!==!1&&u(!1)}):u(!1)}function h(){const{onBeforeLeave:g,onBeforeHide:m}=r;g&&Tt(g),m&&m()}function v(){const{onAfterLeave:g,onAfterHide:m}=r;g&&Tt(g),m&&m()}function p(g){var m;const{onMaskClick:y}=r;y&&y(g),r.maskClosable&&((m=t.value)===null||m===void 0?void 0:m.contains(g.target))&&u(!1)}return rn(sX,{getMousePosition:()=>{if(l){const{clickedRef:g,clickPositionRef:m}=l;if(g.value&&m.value)return m.value}return a.value?o.value:null},mergedClsPrefixRef:e,mergedThemeRef:i,isMountedRef:s,appearRef:Kt(r,"appear"),transformOriginRef:Kt(r,"transformOrigin")}),{mergedClsPrefix:e,namespace:n,isMounted:s,containerRef:t,presetProps:re(()=>Hu(r,Y7e)),handleAfterLeave:v,handleClickoutside:p,handleBeforeLeave:h,doUpdateShow:u,handleNegativeClick:d,handlePositiveClick:f,handleCloseClick:c,cssVars:re(()=>{const{common:{cubicBezierEaseOut:g},self:{boxShadow:m,color:y,textColor:b}}=i.value;return{"--bezier-ease-out":g,"--box-shadow":m,"--color":y,"--text-color":b}})}},render(){const{mergedClsPrefix:r}=this;return I(TX,{to:this.to,show:this.show},{default:()=>{var t;return[pu(I("div",{ref:"containerRef",class:[`${r}-modal-container`,this.namespace],style:this.cssVars},this.unstableShowMask?I(Ra,{name:"fade-in-transition",key:"mask",appear:(t=this.appear)!==null&&t!==void 0?t:this.isMounted},{default:()=>this.show?I("div",{ref:"containerRef",class:`${r}-modal-mask`}):null}):null,I(X7e,Object.assign({style:this.overlayStyle},this.$attrs,{ref:"bodyWrapper",displayDirective:this.displayDirective,show:this.show,preset:this.preset},this.presetProps,{onClose:this.handleCloseClick,onNegativeClick:this.handleNegativeClick,onPositiveClick:this.handlePositiveClick,onBeforeLeave:this.handleBeforeLeave,onAfterEnter:this.onAfterEnter,onAfterLeave:this.handleAfterLeave,onClickoutside:this.handleClickoutside}),this.$slots)),[[CX,{enabled:this.show}]])]}})}});const Q7e=Object.assign(Object.assign({},mC),{internalStyle:[String,Object],maskClosable:{type:Boolean,default:!0},onPositiveClick:Function,onNegativeClick:Function,onClose:Function,onMaskClick:Function});var J7e=xt({name:"DialogEnvironment",props:Object.assign(Object.assign({},Q7e),{internalKey:{type:String,required:!0},to:[String,Object],onInternalAfterLeave:{type:Function,required:!0}}),setup(r){const t=Oe(!0);function e(){r.onInternalAfterLeave(r.internalKey)}function n(u){const{onPositiveClick:c}=r;c?Promise.resolve(c(u)).then(f=>{f!==!1&&s()}):s()}function i(u){const{onNegativeClick:c}=r;c?Promise.resolve(c(u)).then(f=>{f!==!1&&s()}):s()}function a(){const{onClose:u}=r;u?Promise.resolve(u()).then(c=>{c!==!1&&s()}):s()}function o(u){const{onMaskClick:c,maskClosable:f}=r;c&&(c(u),f&&s())}function s(){t.value=!1}function l(u){t.value=u}return{show:t,hide:s,handleUpdateShow:l,handleAfterLeave:e,handleCloseClick:a,handleNegativeClick:i,handlePositiveClick:n,handleMaskClick:o}},render(){const{handlePositiveClick:r,handleUpdateShow:t,handleNegativeClick:e,handleCloseClick:n,handleAfterLeave:i,handleMaskClick:a,to:o,maskClosable:s,show:l}=this;return I(Z7e,{show:l,onUpdateShow:t,onMaskClick:a,appear:!0,dialog:!0,to:o,maskClosable:s,onAfterLeave:i},{default:()=>I(eK,Object.assign({},Hu(this.$props,Jq),{style:this.internalStyle,onClose:n,onNegativeClick:e,onPositiveClick:r}))})}});const tK=Symbol("dialogApi"),rK=Symbol("dialogProvider"),eje={injectionKey:String,to:[String,Object]};var Ift=xt({name:"DialogProvider",props:eje,setup(){const r=Oe([]),t={};function e(s={}){const l=e0(),u=Gf(Object.assign(Object.assign({},s),{key:l,destroy:()=>{t[`n-dialog-${l}`].hide()}}));return r.value.push(u),u}const n=["info","success","warning","error"].map(s=>l=>e(Object.assign(Object.assign({},l),{type:s})));function i(s){const{value:l}=r;l.splice(l.findIndex(u=>u.key===s),1)}function a(){Object.values(t).forEach(s=>s.hide())}const o={create:e,destroyAll:a,info:n[0],success:n[1],warning:n[2],error:n[3]};return rn(tK,o),rn(rK,{clickedRef:iX(64),clickPositionRef:tX()}),Object.assign(Object.assign({},o),{dialogList:r,dialogInstRefs:t,handleAfterLeave:i})},render(){var r,t;return I(Wi,null,[this.dialogList.map(e=>I(J7e,$Ge(e,["destroy","style"],{internalStyle:e.style,to:this.to,ref:n=>{n===null?delete this.dialogInstRefs[`n-dialog-${e.key}`]:this.dialogInstRefs[`n-dialog-${e.key}`]=n},internalKey:e.key,onInternalAfterLeave:this.handleAfterLeave}))),(t=(r=this.$slots).default)===null||t===void 0?void 0:t.call(r)])}});function Pft(){const r=or(tK,null);return r===null&&AI("use-dialog","No outer <n-dialog-provider /> founded."),r}var tje={gapSmall:"4px 8px",gapMedium:"8px 12px",gapLarge:"12px 16px"};const rje=()=>tje,nje={name:"Space",self:rje};var ije=nje;const aje=Object.assign(Object.assign({},rr.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,size:{type:[String,Number,Array],default:"medium"},itemStyle:[String,Object],wrap:{type:Boolean,default:!0}});var Dft=xt({name:"Space",props:aje,setup(r){const{mergedClsPrefixRef:t}=mn(r),e=rr("Space","Space",void 0,ije,r,t);return{mergedClsPrefix:t,margin:re(()=>{const{size:n}=r;if(Array.isArray(n))return{horizontal:n[0],vertical:n[1]};if(typeof n=="number")return{horizontal:n,vertical:n};const{self:{[Ot("gap",n)]:i}}=e.value,{row:a,col:o}=s$e(i);return{horizontal:$o(o),vertical:$o(a)}})}},render(){const{vertical:r,align:t,inline:e,justify:n,itemStyle:i,margin:a,wrap:o,mergedClsPrefix:s}=this,l=l0(aX(this));if(!l.length)return null;const u=`${a.horizontal}px`,c=`${a.horizontal/2}px`,f=`${a.vertical}px`,d=`${a.vertical/2}px`,h=l.length-1,v=n.startsWith("space-");return I("div",{role:"none",class:`${s}-space`,style:{display:e?"inline-flex":"flex",flexDirection:r?"column":"row",justifyContent:["start","end"].includes(n)?"flex-"+n:n,flexWrap:!o||r?"nowrap":"wrap",marginTop:r?"":`-${d}`,marginBottom:r?"":`-${d}`,alignItems:t}},l.map((p,g)=>I("div",{role:"none",style:[i,{maxWidth:"100%"},r?{marginBottom:g!==h?f:""}:{marginRight:v?n==="space-between"&&g===h?"":c:g!==h?u:"",marginLeft:v?n==="space-between"&&g===0?"":c:"",paddingTop:d,paddingBottom:d}]},p)))}}),oje={blankHeightSmall:"28px",blankHeightMedium:"34px",blankHeightLarge:"40px",feedbackPadding:"4px 0 0 2px",feedbackHeightSmall:"24px",feedbackHeightMedium:"24px",feedbackHeightLarge:"26px",feedbackFontSizeSmall:"13px",feedbackFontSizeMedium:"14px",feedbackFontSizeLarge:"14px",labelFontSizeLeftSmall:"14px",labelFontSizeLeftMedium:"14px",labelFontSizeLeftLarge:"15px",labelFontSizeTopSmall:"13px",labelFontSizeTopMedium:"14px",labelFontSizeTopLarge:"14px",labelHeightSmall:"24px",labelHeightMedium:"26px",labelHeightLarge:"28px",labelPaddingVertical:"0 0 8px 2px",labelPaddingHorizontal:"0 12px 0 0",labelTextAlignVertical:"left",labelTextAlignHorizontal:"right"};const sje=r=>{const{textColor1:t,errorColor:e,warningColor:n,lineHeight:i,textColor3:a}=r;return Object.assign(Object.assign({},oje),{lineHeight:i,labelTextColor:t,asteriskColor:e,feedbackTextColorError:e,feedbackTextColorWarning:n,feedbackTextColor:a})},lje={name:"Form",common:Wn,self:sje};var nK=lje,uje=de("form",[Ge("inline",`
 width: 100%;
 display: inline-flex;
 align-items: flex-start;
 align-content: space-around;
 `,[de("form-item",{width:"auto",marginRight:"18px"},[_e("&:last-child",{marginRight:0})])])]);const E0=Symbol("form"),iK=Symbol("formItemInsts");var cje=globalThis&&globalThis.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(r,t||[])).next())})};const fje=Object.assign(Object.assign({},rr.props),{inline:Boolean,labelWidth:[Number,String],labelAlign:String,labelPlacement:{type:String,default:"top"},model:{type:Object,default:()=>{}},rules:Object,disabled:Boolean,size:String,showRequireMark:{type:Boolean,default:void 0},requireMarkPlacement:String,showFeedback:{type:Boolean,default:!0},onSubmit:{type:Function,default:r=>r.preventDefault()},showLabel:{type:Boolean,default:void 0}});var Rft=xt({name:"Form",props:fje,setup(r){const{mergedClsPrefixRef:t}=mn(r);rr("Form","Form",uje,nK,r,t);const e={};function n(o,s=()=>!0){return cje(this,void 0,void 0,function*(){return yield new Promise((l,u)=>{const c=[];for(const f of ef(e)){const d=e[f];for(const h of d)h.path&&c.push(h.internalValidate(null,s))}Promise.all(c).then(f=>{if(f.some(d=>!d.valid)){const d=f.filter(h=>h.errors).map(h=>h.errors);o?o(d):u(d)}else o?o():l()})})})}function i(){for(const o of ef(e)){const s=e[o];for(const l of s)l.restoreValidation()}}return rn(E0,r),rn(iK,{formItems:e}),Object.assign({validate:n,restoreValidation:i},{mergedClsPrefix:t})},render(){const{mergedClsPrefix:r}=this;return I("form",{class:[`${r}-form`,this.inline&&`${r}-form--inline`],onSubmit:this.onSubmit},this.$slots)}});function hh(){return hh=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},hh.apply(this,arguments)}function dje(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,_0(r,t)}function PP(r){return PP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},PP(r)}function _0(r,t){return _0=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},_0(r,t)}function hje(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yC(r,t,e){return hje()?yC=Reflect.construct:yC=function(i,a,o){var s=[null];s.push.apply(s,a);var l=Function.bind.apply(i,s),u=new l;return o&&_0(u,o.prototype),u},yC.apply(null,arguments)}function vje(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function DP(r){var t=typeof Map=="function"?new Map:void 0;return DP=function(n){if(n===null||!vje(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(n))return t.get(n);t.set(n,i)}function i(){return yC(n,arguments,PP(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),_0(i,n)},DP(r)}var pje=/%[sdj%]/g,gje=function(){};typeof process!="undefined"&&process.env;function RP(r){if(!r||!r.length)return null;var t={};return r.forEach(function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)}),t}function fs(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];var i=0,a=e.length;if(typeof r=="function")return r.apply(null,e);if(typeof r=="string"){var o=r.replace(pje,function(s){if(s==="%%")return"%";if(i>=a)return s;switch(s){case"%s":return String(e[i++]);case"%d":return Number(e[i++]);case"%j":try{return JSON.stringify(e[i++])}catch{return"[Circular]"}break;default:return s}});return o}return r}function mje(r){return r==="string"||r==="url"||r==="hex"||r==="email"||r==="date"||r==="pattern"}function Ca(r,t){return!!(r==null||t==="array"&&Array.isArray(r)&&!r.length||mje(t)&&typeof r=="string"&&!r)}function yje(r,t,e){var n=[],i=0,a=r.length;function o(s){n.push.apply(n,s||[]),i++,i===a&&e(n)}r.forEach(function(s){t(s,o)})}function aK(r,t,e){var n=0,i=r.length;function a(o){if(o&&o.length){e(o);return}var s=n;n=n+1,s<i?t(r[s],a):e([])}a([])}function bje(r){var t=[];return Object.keys(r).forEach(function(e){t.push.apply(t,r[e]||[])}),t}var oK=function(r){dje(t,r);function t(e,n){var i;return i=r.call(this,"Async Validation Error")||this,i.errors=e,i.fields=n,i}return t}(DP(Error));function xje(r,t,e,n,i){if(t.first){var a=new Promise(function(d,h){var v=function(m){return n(m),m.length?h(new oK(m,RP(m))):d(i)},p=bje(r);aK(p,e,v)});return a.catch(function(d){return d}),a}var o=t.firstFields===!0?Object.keys(r):t.firstFields||[],s=Object.keys(r),l=s.length,u=0,c=[],f=new Promise(function(d,h){var v=function(g){if(c.push.apply(c,g),u++,u===l)return n(c),c.length?h(new oK(c,RP(c))):d(i)};s.length||(n(c),d(i)),s.forEach(function(p){var g=r[p];o.indexOf(p)!==-1?aK(g,e,v):yje(g,e,v)})});return f.catch(function(d){return d}),f}function wje(r){return!!(r&&r.message!==void 0)}function Sje(r,t){for(var e=r,n=0;n<t.length;n++){if(e==null)return e;e=e[t[n]]}return e}function sK(r,t){return function(e){var n;return r.fullFields?n=Sje(t,r.fullFields):n=t[e.field||r.fullField],wje(e)?(e.field=e.field||r.fullField,e.fieldValue=n,e):{message:typeof e=="function"?e():e,fieldValue:n,field:e.field||r.fullField}}}function lK(r,t){if(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];typeof n=="object"&&typeof r[e]=="object"?r[e]=hh({},r[e],n):r[e]=n}}return r}var uK=function(t,e,n,i,a,o){t.required&&(!n.hasOwnProperty(t.field)||Ca(e,o||t.type))&&i.push(fs(a.messages.required,t.fullField))},Cje=function(t,e,n,i,a){(/^\s+$/.test(e)||e==="")&&i.push(fs(a.messages.whitespace,t.fullField))},OP={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},T0={integer:function(t){return T0.number(t)&&parseInt(t,10)===t},float:function(t){return T0.number(t)&&!T0.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!T0.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(OP.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(OP.url)},hex:function(t){return typeof t=="string"&&!!t.match(OP.hex)}},Eje=function(t,e,n,i,a){if(t.required&&e===void 0){uK(t,e,n,i,a);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=t.type;o.indexOf(s)>-1?T0[s](e)||i.push(fs(a.messages.types[s],t.fullField,t.type)):s&&typeof e!==t.type&&i.push(fs(a.messages.types[s],t.fullField,t.type))},_je=function(t,e,n,i,a){var o=typeof t.len=="number",s=typeof t.min=="number",l=typeof t.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=e,f=null,d=typeof e=="number",h=typeof e=="string",v=Array.isArray(e);if(d?f="number":h?f="string":v&&(f="array"),!f)return!1;v&&(c=e.length),h&&(c=e.replace(u,"_").length),o?c!==t.len&&i.push(fs(a.messages[f].len,t.fullField,t.len)):s&&!l&&c<t.min?i.push(fs(a.messages[f].min,t.fullField,t.min)):l&&!s&&c>t.max?i.push(fs(a.messages[f].max,t.fullField,t.max)):s&&l&&(c<t.min||c>t.max)&&i.push(fs(a.messages[f].range,t.fullField,t.min,t.max))},$p="enum",Tje=function(t,e,n,i,a){t[$p]=Array.isArray(t[$p])?t[$p]:[],t[$p].indexOf(e)===-1&&i.push(fs(a.messages[$p],t.fullField,t[$p].join(", ")))},Aje=function(t,e,n,i,a){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(e)||i.push(fs(a.messages.pattern.mismatch,t.fullField,e,t.pattern));else if(typeof t.pattern=="string"){var o=new RegExp(t.pattern);o.test(e)||i.push(fs(a.messages.pattern.mismatch,t.fullField,e,t.pattern))}}},Cn={required:uK,whitespace:Cje,type:Eje,range:_je,enum:Tje,pattern:Aje},Mje=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ca(e,"string")&&!t.required)return n();Cn.required(t,e,i,o,a,"string"),Ca(e,"string")||(Cn.type(t,e,i,o,a),Cn.range(t,e,i,o,a),Cn.pattern(t,e,i,o,a),t.whitespace===!0&&Cn.whitespace(t,e,i,o,a))}n(o)},kje=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ca(e)&&!t.required)return n();Cn.required(t,e,i,o,a),e!==void 0&&Cn.type(t,e,i,o,a)}n(o)},Ije=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(e===""&&(e=void 0),Ca(e)&&!t.required)return n();Cn.required(t,e,i,o,a),e!==void 0&&(Cn.type(t,e,i,o,a),Cn.range(t,e,i,o,a))}n(o)},Pje=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ca(e)&&!t.required)return n();Cn.required(t,e,i,o,a),e!==void 0&&Cn.type(t,e,i,o,a)}n(o)},Dje=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ca(e)&&!t.required)return n();Cn.required(t,e,i,o,a),Ca(e)||Cn.type(t,e,i,o,a)}n(o)},Rje=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ca(e)&&!t.required)return n();Cn.required(t,e,i,o,a),e!==void 0&&(Cn.type(t,e,i,o,a),Cn.range(t,e,i,o,a))}n(o)},Oje=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ca(e)&&!t.required)return n();Cn.required(t,e,i,o,a),e!==void 0&&(Cn.type(t,e,i,o,a),Cn.range(t,e,i,o,a))}n(o)},Lje=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(e==null&&!t.required)return n();Cn.required(t,e,i,o,a,"array"),e!=null&&(Cn.type(t,e,i,o,a),Cn.range(t,e,i,o,a))}n(o)},Fje=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ca(e)&&!t.required)return n();Cn.required(t,e,i,o,a),e!==void 0&&Cn.type(t,e,i,o,a)}n(o)},Nje="enum",Bje=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ca(e)&&!t.required)return n();Cn.required(t,e,i,o,a),e!==void 0&&Cn[Nje](t,e,i,o,a)}n(o)},$je=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ca(e,"string")&&!t.required)return n();Cn.required(t,e,i,o,a),Ca(e,"string")||Cn.pattern(t,e,i,o,a)}n(o)},zje=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ca(e,"date")&&!t.required)return n();if(Cn.required(t,e,i,o,a),!Ca(e,"date")){var l;e instanceof Date?l=e:l=new Date(e),Cn.type(t,l,i,o,a),l&&Cn.range(t,l.getTime(),i,o,a)}}n(o)},Gje=function(t,e,n,i,a){var o=[],s=Array.isArray(e)?"array":typeof e;Cn.required(t,e,i,o,a,s),n(o)},LP=function(t,e,n,i,a){var o=t.type,s=[],l=t.required||!t.required&&i.hasOwnProperty(t.field);if(l){if(Ca(e,o)&&!t.required)return n();Cn.required(t,e,i,s,a,o),Ca(e,o)||Cn.type(t,e,i,s,a)}n(s)},Uje=function(t,e,n,i,a){var o=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(Ca(e)&&!t.required)return n();Cn.required(t,e,i,o,a)}n(o)},A0={string:Mje,method:kje,number:Ije,boolean:Pje,regexp:Dje,integer:Rje,float:Oje,array:Lje,object:Fje,enum:Bje,pattern:$je,date:zje,url:LP,hex:LP,email:LP,required:Gje,any:Uje};function FP(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var NP=FP(),M0=function(){function r(e){this.rules=null,this._messages=NP,this.define(e)}var t=r.prototype;return t.define=function(n){var i=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(typeof n!="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(a){var o=n[a];i.rules[a]=Array.isArray(o)?o:[o]})},t.messages=function(n){return n&&(this._messages=lK(FP(),n)),this._messages},t.validate=function(n,i,a){var o=this;i===void 0&&(i={}),a===void 0&&(a=function(){});var s=n,l=i,u=a;if(typeof l=="function"&&(u=l,l={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,s),Promise.resolve(s);function c(p){var g=[],m={};function y(x){if(Array.isArray(x)){var w;g=(w=g).concat.apply(w,x)}else g.push(x)}for(var b=0;b<p.length;b++)y(p[b]);g.length?(m=RP(g),u(g,m)):u(null,s)}if(l.messages){var f=this.messages();f===NP&&(f=FP()),lK(f,l.messages),l.messages=f}else l.messages=this.messages();var d={},h=l.keys||Object.keys(this.rules);h.forEach(function(p){var g=o.rules[p],m=s[p];g.forEach(function(y){var b=y;typeof b.transform=="function"&&(s===n&&(s=hh({},s)),m=s[p]=b.transform(m)),typeof b=="function"?b={validator:b}:b=hh({},b),b.validator=o.getValidationMethod(b),!!b.validator&&(b.field=p,b.fullField=b.fullField||p,b.type=o.getType(b),d[p]=d[p]||[],d[p].push({rule:b,value:m,source:s,field:p}))})});var v={};return xje(d,l,function(p,g){var m=p.rule,y=(m.type==="object"||m.type==="array")&&(typeof m.fields=="object"||typeof m.defaultField=="object");y=y&&(m.required||!m.required&&p.value),m.field=p.field;function b(S,C){return hh({},C,{fullField:m.fullField+"."+S,fullFields:m.fullFields?[].concat(m.fullFields,[S]):[S]})}function x(S){S===void 0&&(S=[]);var C=Array.isArray(S)?S:[S];!l.suppressWarning&&C.length&&r.warning("async-validator:",C),C.length&&m.message!==void 0&&(C=[].concat(m.message));var _=C.map(sK(m,s));if(l.first&&_.length)return v[m.field]=1,g(_);if(!y)g(_);else{if(m.required&&!p.value)return m.message!==void 0?_=[].concat(m.message).map(sK(m,s)):l.error&&(_=[l.error(m,fs(l.messages.required,m.field))]),g(_);var T={};m.defaultField&&Object.keys(p.value).map(function(k){T[k]=m.defaultField}),T=hh({},T,p.rule.fields);var E={};Object.keys(T).forEach(function(k){var P=T[k],F=Array.isArray(P)?P:[P];E[k]=F.map(b.bind(null,k))});var M=new r(E);M.messages(l.messages),p.rule.options&&(p.rule.options.messages=l.messages,p.rule.options.error=l.error),M.validate(p.value,p.rule.options||l,function(k){var P=[];_&&_.length&&P.push.apply(P,_),k&&k.length&&P.push.apply(P,k),g(P.length?P:null)})}}var w;m.asyncValidator?w=m.asyncValidator(m,p.value,x,p.source,l):m.validator&&(w=m.validator(m,p.value,x,p.source,l),w===!0?x():w===!1?x(typeof m.message=="function"?m.message(m.fullField||m.field):m.message||(m.fullField||m.field)+" fails"):w instanceof Array?x(w):w instanceof Error&&x(w.message)),w&&w.then&&w.then(function(){return x()},function(S){return x(S)})},function(p){c(p)},s)},t.getType=function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!A0.hasOwnProperty(n.type))throw new Error(fs("Unknown rule type %s",n.type));return n.type||"string"},t.getValidationMethod=function(n){if(typeof n.validator=="function")return n.validator;var i=Object.keys(n),a=i.indexOf("message");return a!==-1&&i.splice(a,1),i.length===1&&i[0]==="required"?A0.required:A0[this.getType(n)]||void 0},r}();M0.register=function(t,e){if(typeof e!="function")throw new Error("Cannot register a validator by type, validator is not a function");A0[t]=e};M0.warning=gje;M0.messages=NP;M0.validators=A0;function Vje(r){const t=or(E0,null);return{mergedSize:re(()=>r.size!==void 0?r.size:(t==null?void 0:t.size)!==void 0?t.size:"medium")}}function Hje(r){const t=or(E0,null),e=re(()=>{if(n.value==="top")return;const{labelWidth:d}=r;if(d!==void 0)return sa(d);if((t==null?void 0:t.labelWidth)!==void 0)return sa(t.labelWidth)}),n=re(()=>{const{labelPlacement:d}=r;return d!==void 0?d:(t==null?void 0:t.labelPlacement)?t.labelPlacement:"top"}),i=re(()=>{const{labelAlign:d}=r;if(d)return d;if(t==null?void 0:t.labelAlign)return t.labelAlign}),a=re(()=>[{width:e.value},r.labelStyle]),o=re(()=>{const{showRequireMark:d}=r;return d!==void 0?d:t==null?void 0:t.showRequireMark}),s=re(()=>{const{requireMarkPlacement:d}=r;return d!==void 0?d:t==null?void 0:t.requireMarkPlacement}),l=Oe(!1),u=re(()=>{const{validationStatus:d}=r;if(d!==void 0)return d;if(l.value)return"error"}),c=re(()=>{const{showFeedback:d}=r;return d!==void 0?d:(t==null?void 0:t.showFeedback)!==void 0?t.showFeedback:!0}),f=re(()=>{const{showLabel:d}=r;return d!==void 0?d:(t==null?void 0:t.showLabel)!==void 0?t.showLabel:!0});return{validationErrored:l,mergedLabelStyle:a,mergedLabelPlacement:n,mergedLabelAlign:i,mergedShowRequireMark:o,mergedRequireMarkPlacement:s,mergedValidationStatus:u,mergedShowFeedback:c,mergedShowLabel:f}}function Wje(r){const t=or(E0,null),e=re(()=>{const{rulePath:o}=r;if(o!==void 0)return o;const{path:s}=r;if(s!==void 0)return s}),n=re(()=>{const o=[],{rule:s}=r;if(s!==void 0&&(Array.isArray(s)?o.push(...s):o.push(s)),t){const{rules:l}=t,{value:u}=e;if(l!==void 0&&u!==void 0){const c=yI(l,u);c!==void 0&&(Array.isArray(c)?o.push(...c):o.push(c))}}return o}),i=re(()=>n.value.some(o=>o.required)),a=re(()=>i.value||r.required);return{mergedRules:n,mergedRequired:a}}var jje=xt({name:"FormItemFeedback",props:{clsPrefix:{type:String,required:!0},explains:Array,feedback:String},render(){var r;const{feedback:t,clsPrefix:e}=this;return t?I("div",{key:t,class:`${e}-form-item-feedback__line`},t):(r=this.explains)===null||r===void 0?void 0:r.map(n=>I("div",{key:n,class:`${e}-form-item-feedback__line`},n))}});const{cubicBezierEaseInOut:cK}=Jc;function Yje({name:r="fade-down",fromOffset:t="-4px",enterDuration:e=".3s",leaveDuration:n=".3s",enterCubicBezier:i=cK,leaveCubicBezier:a=cK}={}){return[_e(`&.${r}-transition-enter-from, &.${r}-transition-leave-to`,{opacity:0,transform:`translateY(${t})`}),_e(`&.${r}-transition-enter-to, &.${r}-transition-leave-from`,{opacity:1,transform:"translateY(0)"}),_e(`&.${r}-transition-leave-active`,{transition:`opacity ${n} ${a}, transform ${n} ${a}`}),_e(`&.${r}-transition-enter-active`,{transition:`opacity ${e} ${i}, transform ${e} ${i}`})]}var Xje=de("form-item",{display:"grid",lineHeight:"var(--line-height)"},[de("form-item-label",`
 grid-area: label;
 align-items: center;
 line-height: 1.25;
 text-align: var(--label-text-align);
 font-size: var(--label-font-size);
 height: var(--label-height);
 padding: var(--label-padding);
 color: var(--label-text-color);
 transition: color .3s var(--bezier);
 box-sizing: border-box;
 `,[Se("asterisk",`
 color: var(--asterisk-color);
 transition: color .3s var(--bezier);
 `)]),de("form-item-blank",{gridArea:"blank",minHeight:"var(--blank-height)"}),Ge("left-labelled",`
 grid-template-areas:
 "label blank"
 "label feedback";
 grid-template-columns: auto minmax(0, 1fr);
 `,[de("form-item-label",`
 height: var(--blank-height);
 line-height: var(--blank-height);
 box-sizing: border-box;
 white-space: nowrap;
 flex-shrink: 0;
 flex-grow: 0;
 `)]),Ge("top-labelled",`
 grid-template-areas:
 "label"
 "blank"
 "feedback";
 grid-template-rows: var(--label-height) 1fr;
 grid-template-columns: minmax(0, 100%);
 `,[Ge("no-label",`
 grid-template-areas:
 "blank"
 "feedback";
 grid-template-rows: 1fr;
 `),de("form-item-label",{display:"flex",alignItems:"flex-end",justifyContent:"var(--label-text-align)"})]),de("form-item-blank",`
 box-sizing: border-box;
 display: flex;
 align-items: center;
 position: relative;
 `),de("form-item-feedback-wrapper",`
 grid-area: feedback;
 box-sizing: border-box;
 min-height: var(--feedback-height);
 font-size: var(--feedback-font-size);
 padding: var(--feedback-padding);
 line-height: 1.25;
 transform-origin: top left;
 `,[de("form-item-feedback",{transition:"color .3s var(--bezier)",color:"var(--feedback-text-color)"},[Ge("warning",{color:"var(--feedback-text-color-warning)"}),Ge("error",{color:"var(--feedback-text-color-error)"}),Yje({fromOffset:"-3px",enterDuration:".3s",leaveDuration:".2s"})])])]),fK=globalThis&&globalThis.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(c){try{u(n.next(c))}catch(f){o(f)}}function l(c){try{u(n.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((n=n.apply(r,t||[])).next())})};const qje=Object.assign(Object.assign({},rr.props),{label:String,labelWidth:[Number,String],labelStyle:[String,Object],labelAlign:String,labelPlacement:String,path:String,first:Boolean,rulePath:String,required:Boolean,showRequireMark:{type:Boolean,default:void 0},requireMarkPlacement:String,showFeedback:{type:Boolean,default:void 0},rule:[Object,Array],size:String,ignorePathChange:Boolean,validationStatus:String,feedback:String,showLabel:{type:Boolean,default:void 0}});function dK(r,t){return(...e)=>{var n;try{const i=r(...e);return!t&&(typeof i=="boolean"||i instanceof Error||Array.isArray(i))||((n=i)===null||n===void 0?void 0:n.then)?i:(i===void 0||ql("form-item/validate",`You return a ${typeof i} typed value in the validator method, which is not recommended. Please use `+(t?"`Promise`":"`boolean`, `Error` or `Promise`")+" typed value instead."),!0)}catch(i){ql("form-item/validate","An error is catched in the validation, so the validation won't be done. Your callback in `validate` method of `n-form` or `n-form-item` won't be called in this validation."),console.error(i);return}}}var Oft=xt({name:"FormItem",props:qje,setup(r){HGe(iK,"formItems",Kt(r,"path"));const{mergedClsPrefixRef:t}=mn(r),e=or(E0,null),n=Vje(r),i=Hje(r),{validationErrored:a}=i,{mergedRequired:o,mergedRules:s}=Wje(r),{mergedSize:l}=n,{mergedLabelPlacement:u,mergedLabelAlign:c}=i,f=Oe([]),d=Oe(e0()),h=re(()=>{const{feedback:_}=r;return _!=null?!0:f.value.length}),v=e?Kt(e,"disabled"):Oe(!1),p=rr("Form","FormItem",Xje,nK,r,t);fn(Kt(r,"path"),()=>{r.ignorePathChange||g()});function g(){f.value=[],a.value=!1,r.feedback&&(d.value=e0())}function m(){S("blur")}function y(){S("change")}function b(){S("focus")}function x(){S("input")}function w(_,T){return fK(this,void 0,void 0,function*(){let E,M,k,P;return typeof _=="string"?(E=_,M=T):_!==null&&typeof _=="object"&&(E=_.trigger,M=_.callback,k=_.shouldRuleBeApplied,P=_.options),yield new Promise((F,$)=>{S(E,k,P).then(({valid:R,errors:L})=>{R?(M&&M(),F()):(M&&M(L),$(L))})})})}const S=(_=null,T=()=>!0,E={suppressWarning:!0})=>fK(this,void 0,void 0,function*(){const{path:M}=r;E?E.first||(E.first=r.first):E={};const{value:k}=s,P=e?yI(e.model,M,null):void 0,F=(_?k.filter(L=>Array.isArray(L.trigger)?L.trigger.includes(_):L.trigger===_):k).filter(T).map(L=>{const O=Object.assign({},L);return O.validator&&(O.validator=dK(O.validator,!1)),O.asyncValidator&&(O.asyncValidator=dK(O.asyncValidator,!0)),O});if(!F.length)return yield Promise.resolve({valid:!0});const $=M!=null?M:"__n_no_path__",R=new M0({[$]:F});return yield new Promise(L=>{R.validate({[$]:P},E,(O,B)=>{(O==null?void 0:O.length)?(f.value=O.map(U=>(U==null?void 0:U.message)||""),a.value=!0,L({valid:!1,errors:O})):(g(),L({valid:!0}))})})});rn(lI,{path:Kt(r,"path"),disabled:v,mergedSize:n.mergedSize,restoreValidation:g,handleContentBlur:m,handleContentChange:y,handleContentFocus:b,handleContentInput:x});const C={validate:w,restoreValidation:g,internalValidate:S};return Object.assign(Object.assign(Object.assign(Object.assign({mergedClsPrefix:t,mergedRequired:o,hasFeedback:h,feedbackId:d,explains:f},i),n),C),{cssVars:re(()=>{var _;const{value:T}=l,{value:E}=u,M=E==="top"?"vertical":"horizontal",{common:{cubicBezierEaseInOut:k},self:{labelTextColor:P,asteriskColor:F,lineHeight:$,feedbackTextColor:R,feedbackTextColorWarning:L,feedbackTextColorError:O,feedbackPadding:B,[Ot("labelHeight",T)]:U,[Ot("blankHeight",T)]:W,[Ot("feedbackFontSize",T)]:X,[Ot("feedbackHeight",T)]:ae,[Ot("labelPadding",M)]:Z,[Ot("labelTextAlign",M)]:Y,[Ot(Ot("labelFontSize",E),T)]:fe}}=p.value;let le=(_=c.value)!==null&&_!==void 0?_:Y;return E==="top"&&(le=le==="right"?"flex-end":"flex-start"),{"--bezier":k,"--line-height":$,"--blank-height":W,"--label-font-size":fe,"--label-text-align":le,"--label-height":U,"--label-padding":Z,"--asterisk-color":F,"--label-text-color":P,"--feedback-padding":B,"--feedback-font-size":X,"--feedback-height":ae,"--feedback-text-color":R,"--feedback-text-color-warning":L,"--feedback-text-color-error":O}})})},render(){const{$slots:r,mergedClsPrefix:t,mergedShowLabel:e,mergedShowRequireMark:n,mergedRequireMarkPlacement:i}=this;return I("div",{class:[`${t}-form-item`,`${t}-form-item--${this.mergedSize}-size`,`${t}-form-item--${this.mergedLabelPlacement}-labelled`,!e&&`${t}-form-item--no-label`],style:this.cssVars},e&&(this.label||r.label)?I("label",{class:`${t}-form-item-label`,style:this.mergedLabelStyle},i!=="left"?qr(r,"label",void 0,()=>[this.label]):null,(n!==void 0?n:this.mergedRequired)?I("span",{class:`${t}-form-item-label__asterisk`},i!=="left"?"\xA0*":"*\xA0"):null,i==="left"?qr(r,"label",void 0,()=>[this.label]):null):null,I("div",{class:[`${t}-form-item-blank`,this.mergedValidationStatus&&`${t}-form-item-blank--${this.mergedValidationStatus}`]},r),this.mergedShowFeedback?I("div",{key:this.feedbackId,class:`${t}-form-item-feedback-wrapper`},I(Ra,{name:"fade-down-transition",mode:"out-in"},{default:()=>{const a=I(jje,{clsPrefix:t,explains:this.explains,feedback:this.feedback}),{hasFeedback:o,mergedValidationStatus:s}=this;return o?s==="warning"?I("div",{key:"controlled-warning",class:`${t}-form-item-feedback ${t}-form-item-feedback--warning`},a):s==="error"?I("div",{key:"controlled-error",class:`${t}-form-item-feedback ${t}-form-item-feedback--error`},a):s==="success"?I("div",{key:"controlled-success",class:`${t}-form-item-feedback ${t}-form-item-feedback--success`},a):I("div",{key:"controlled-default",class:`${t}-form-item-feedback`},a):null}})):null)}});const Kje=r=>{const{baseColor:t,textColor2:e,bodyColor:n,cardColor:i,dividerColor:a,actionColor:o,scrollbarColor:s,scrollbarColorHover:l,invertedColor:u}=r;return{textColor:e,textColorInverted:"#FFF",color:n,colorEmbedded:o,headerColor:i,headerColorInverted:u,footerColor:o,footerColorInverted:u,headerBorderColor:a,headerBorderColorInverted:u,footerBorderColor:a,footerBorderColorInverted:u,siderBorderColor:a,siderBorderColorInverted:u,siderColor:i,siderColorInverted:u,siderToggleButtonBorder:`1px solid ${a}`,siderToggleButtonColor:t,siderToggleButtonIconColor:e,siderToggleButtonIconColorInverted:e,siderToggleBarColor:yi(n,s),siderToggleBarColorHover:yi(n,l),__invertScrollbar:"true"}},Zje=Go({name:"Layout",common:Wn,peers:{Scrollbar:oh},self:Kje});var hK=Zje,Qje=de("layout",`
 color: var(--text-color);
 background-color: var(--color);
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 flex: auto;
 overflow: hidden;
 transition:
 box-shadow .3s var(--bezier),
 background-color .3s var(--bezier),
 color .3s var(--bezier);
`,[de("layout-scroll-container",`
 overflow-x: hidden;
 box-sizing: border-box;
 height: 100%;
 `),Ge("absolute-positioned",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]);const vK=Symbol("layoutSiderInjection"),pK={type:String,default:"static"},Jje={embedded:Boolean,position:pK,nativeScrollbar:{type:Boolean,default:!0},scrollbarProps:Object,onScroll:Function,contentStyle:{type:[String,Object],default:""},hasSider:Boolean,siderPlacement:{type:String,default:"left"}},gK=Symbol("layout");function eYe(r){return xt({name:r?"LayoutContent":"Layout",props:Object.assign(Object.assign({},rr.props),Jje),setup(t){const e=Oe(null),n=Oe(null),{mergedClsPrefixRef:i}=mn(t),a=rr("Layout","Layout",Qje,hK,t,i);function o(u,c){if(t.nativeScrollbar){const{value:f}=e;f&&(c===void 0?f.scrollTo(u):f.scrollTo(u,c))}else{const{value:f}=n;f&&f.scrollTo(u,c)}}rn(gK,t);const s={display:"flex",flexWrap:"nowrap",width:"100%",flexDirection:"row"},l={scrollTo:o};return Object.assign({mergedClsPrefix:i,scrollableElRef:e,scrollbarInstRef:n,hasSiderStyle:s,mergedTheme:a,cssVars:re(()=>{const{common:{cubicBezierEaseInOut:u},self:c}=a.value;return{"--bezier":u,"--color":t.embedded?c.colorEmbedded:c.color,"--text-color":c.textColor}})},l)},render(){const{mergedClsPrefix:t,hasSider:e}=this,n=e?this.hasSiderStyle:void 0,i=[r&&`${t}-layout-content`,`${t}-layout`,`${t}-layout--${this.position}-positioned`];return I("div",{class:i,style:this.cssVars},this.nativeScrollbar?I("div",{ref:"scrollableElRef",class:`${t}-layout-scroll-container`,style:[this.contentStyle,n],onScroll:this.onScroll},this.$slots):I(Bs,Object.assign({},this.scrollbarProps,{onScroll:this.onScroll,ref:"scrollbarInstRef",theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,contentStyle:[this.contentStyle,n]}),this.$slots))}})}var Lft=eYe(!1),tYe=de("layout-sider",`
 flex-shrink: 0;
 box-sizing: border-box;
 position: relative;
 z-index: 1;
 color: var(--text-color);
 transition:
 color .3s var(--bezier),
 border-color .3s var(--bezier),
 min-width .3s var(--bezier),
 max-width .3s var(--bezier),
 transform .3s var(--bezier),
 background-color .3s var(--bezier);
 background-color: var(--color);
 display: flex;
 justify-content: flex-end;
`,[Ge("right-placement",`
 justify-content: flex-start;
 `,[Ge("bordered",`
 border-right: none;
 border-left: 1px solid var(--border-color);
 `),Ge("collapsed",[de("layout-toggle-button",[de("base-icon",`
 transform: rotate(180deg);
 `)]),de("layout-toggle-bar",[_e("&:hover",[Se("top",{transform:"rotate(-12deg) scale(1.15) translateY(-2px)"}),Se("bottom",{transform:"rotate(12deg) scale(1.15) translateY(2px)"})])])]),de("layout-toggle-button",`
 left: 0;
 transform: translateX(-50%) translateY(-50%);
 `,[de("base-icon",`
 transform: rotate(0);
 `)]),de("layout-toggle-bar",`
 left: -28px;
 transform: rotate(180deg);
 `,[_e("&:hover",[Se("top",{transform:"rotate(12deg) scale(1.15) translateY(-2px)"}),Se("bottom",{transform:"rotate(-12deg) scale(1.15) translateY(2px)"})])])]),Ge("collapsed",[de("layout-toggle-bar",[_e("&:hover",[Se("top",{transform:"rotate(-12deg) scale(1.15) translateY(-2px)"}),Se("bottom",{transform:"rotate(12deg) scale(1.15) translateY(2px)"})])]),de("layout-toggle-button",[de("base-icon",`
 transform: rotate(0);
 `)])]),de("layout-toggle-button",`
 transition:
 color .3s var(--bezier),
 right .3s var(--bezier),
 left .3s var(--bezier),
 border-color .3s var(--bezier),
 background-color .3s var(--bezier);
 cursor: pointer;
 width: 24px;
 height: 24px;
 position: absolute;
 top: 50%;
 right: 0;
 border-radius: 50%;
 display: flex;
 align-items: center;
 justify-content: center;
 font-size: 18px;
 color: var(--toggle-button-icon-color);
 border: var(--toggle-button-border);
 background-color: var(--toggle-button-color);
 box-shadow: 0 2px 4px 0px rgba(0, 0, 0, .06);
 transform: translateX(50%) translateY(-50%);
 `,[de("base-icon",`
 transition: transform .3s var(--bezier);
 transform: rotate(180deg);
 `)]),de("layout-toggle-bar",`
 cursor: pointer;
 height: 72px;
 width: 32px;
 position: absolute;
 top: calc(50% - 36px);
 right: -28px;
 `,[Se("top, bottom",`
 position: absolute;
 width: 4px;
 border-radius: 2px;
 height: 38px;
 left: 14px;
 transition: 
 background-color .3s var(--bezier),
 transform .3s var(--bezier);
 `),Se("bottom",`
 position: absolute;
 top: 34px;
 `),_e("&:hover",[Se("top",{transform:"rotate(12deg) scale(1.15) translateY(-2px)"}),Se("bottom",{transform:"rotate(-12deg) scale(1.15) translateY(2px)"})]),Se("top, bottom",{backgroundColor:"var(--toggle-bar-color)"}),_e("&:hover",[Se("top, bottom",{backgroundColor:"var(--toggle-bar-color-hover)"})])]),Se("border",`
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 width: 1px;
 transition: background-color .3s var(--bezier);
 `),de("layout-sider-scroll-container",`
 flex-grow: 1;
 flex-shrink: 0;
 box-sizing: border-box;
 height: 100%;
 opacity: 0;
 transition: opacity .3s var(--bezier);
 max-width: 100%;
 `),Ge("show-content",[de("layout-sider-scroll-container",{opacity:1})]),Ge("absolute-positioned",`
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 `),Ge("bordered",`
 border-right: 1px solid var(--border-color);
 `)]),rYe=xt({name:"LayoutToggleButton",props:{clsPrefix:{type:String,required:!0},onClick:Function},render(){const{clsPrefix:r}=this;return I("div",{class:`${r}-layout-toggle-button`,onClick:this.onClick},I(si,{clsPrefix:r},{default:()=>I(LI,null)}))}}),nYe=xt({props:{clsPrefix:{type:String,required:!0},onClick:Function},render(){const{clsPrefix:r}=this;return I("div",{onClick:this.onClick,class:`${r}-layout-toggle-bar`},I("div",{class:`${r}-layout-toggle-bar__top`}),I("div",{class:`${r}-layout-toggle-bar__bottom`}))}});const iYe={position:pK,bordered:Boolean,collapsedWidth:{type:Number,default:48},width:{type:[Number,String],default:272},contentStyle:{type:[String,Object],default:""},collapseMode:{type:String,default:"transform"},collapsed:{type:Boolean,default:void 0},defaultCollapsed:Boolean,showCollapsedContent:{type:Boolean,default:!0},showTrigger:{type:[Boolean,String],default:!1},nativeScrollbar:{type:Boolean,default:!0},inverted:Boolean,scrollbarProps:Object,triggerStyle:[String,Object],collapsedTriggerStyle:[String,Object],"onUpdate:collapsed":[Function,Array],onUpdateCollapsed:[Function,Array],onAfterEnter:Function,onAfterLeave:Function,onExpand:[Function,Array],onCollapse:[Function,Array],onScroll:Function};var Fft=xt({name:"LayoutSider",props:Object.assign(Object.assign({},rr.props),iYe),setup(r){const t=or(gK),e=Oe(null),n=Oe(null),i=re(()=>sa(l.value?r.collapsedWidth:r.width)),a=re(()=>r.collapseMode!=="transform"?{}:{minWidth:sa(r.width)}),o=re(()=>t?t.siderPlacement:"left"),s=Oe(r.defaultCollapsed),l=Qi(Kt(r,"collapsed"),s);function u(p,g){if(r.nativeScrollbar){const{value:m}=e;m&&(g===void 0?m.scrollTo(p):m.scrollTo(p,g))}else{const{value:m}=n;m&&m.scrollTo(p,g)}}function c(){const{"onUpdate:collapsed":p,onUpdateCollapsed:g,onExpand:m,onCollapse:y}=r,{value:b}=l;g&&Tt(g,!b),p&&Tt(p,!b),s.value=!b,b?m&&Tt(m):y&&Tt(y)}rn(vK,{collapsedRef:l,collapseModeRef:Kt(r,"collapseMode")});const{mergedClsPrefixRef:f}=mn(r),d=rr("Layout","LayoutSider",tYe,hK,r,f);function h(p){var g,m;p.propertyName==="max-width"&&(l.value?(g=r.onAfterLeave)===null||g===void 0||g.call(r):(m=r.onAfterEnter)===null||m===void 0||m.call(r))}const v={scrollTo:u};return Object.assign({scrollableElRef:e,scrollbarInstRef:n,mergedClsPrefix:f,mergedTheme:d,styleMaxWidth:i,mergedCollapsed:l,scrollContainerStyle:a,siderPlacement:o,handleTransitionend:h,handleTriggerClick:c,cssVars:re(()=>{const{common:{cubicBezierEaseInOut:p},self:g}=d.value,{siderToggleButtonColor:m,siderToggleButtonBorder:y,siderToggleBarColor:b,siderToggleBarColorHover:x}=g,w={"--bezier":p,"--toggle-button-color":m,"--toggle-button-border":y,"--toggle-bar-color":b,"--toggle-bar-color-hover":x};return r.inverted?(w["--color"]=g.siderColorInverted,w["--text-color"]=g.textColorInverted,w["--border-color"]=g.siderBorderColorInverted,w["--toggle-button-icon-color"]=g.siderToggleButtonIconColorInverted,w.__invertScrollbar=g.__invertScrollbar):(w["--color"]=g.siderColor,w["--text-color"]=g.textColor,w["--border-color"]=g.siderBorderColor,w["--toggle-button-icon-color"]=g.siderToggleButtonIconColor),w})},v)},render(){const{mergedClsPrefix:r,mergedCollapsed:t,showTrigger:e}=this;return I("aside",{class:[`${r}-layout-sider`,`${r}-layout-sider--${this.position}-positioned`,`${r}-layout-sider--${this.siderPlacement}-placement`,this.bordered&&`${r}-layout-sider--bordered`,t&&`${r}-layout-sider--collapsed`,(!t||this.showCollapsedContent)&&`${r}-layout-sider--show-content`],onTransitionend:this.handleTransitionend,style:[this.cssVars,{maxWidth:this.styleMaxWidth,width:sa(this.width)}]},this.nativeScrollbar?I("div",{class:`${r}-layout-sider-scroll-container`,onScroll:this.onScroll,style:[this.scrollContainerStyle,this.contentStyle,{overflow:"auto"}],ref:"scrollableElRef"},this.$slots):I(Bs,Object.assign({},this.scrollbarProps,{onScroll:this.onScroll,ref:"scrollbarInstRef",style:this.scrollContainerStyle,contentStyle:this.contentStyle,theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,builtinThemeOverrides:this.inverted&&this.cssVars.__invertScrollbar==="true"?{colorHover:"rgba(255, 255, 255, .4)",color:"rgba(255, 255, 255, .3)"}:void 0}),this.$slots),e?e==="bar"?I(nYe,{clsPrefix:r,style:t?this.collapsedTriggerStyle:this.triggerStyle,onClick:this.handleTriggerClick}):I(rYe,{clsPrefix:r,style:t?this.collapsedTriggerStyle:this.triggerStyle,onClick:this.handleTriggerClick}):null)}});const aYe=r=>{const{textColor2:t,cardColor:e,modalColor:n,popoverColor:i,dividerColor:a,borderRadius:o,fontSize:s}=r;return{textColor:t,color:e,colorModal:n,colorPopover:i,borderColor:a,borderColorModal:yi(n,a),borderColorPopover:yi(i,a),borderRadius:o,fontSize:s}},oYe={name:"List",common:Wn,self:aYe};var sYe=oYe,lYe=_e([de("list",`
 --merged-border-color: var(--border-color);
 --merged-color: var(--color)
 font-size: var(--font-size);
 transition:
 background-color .3s var(--bezier),
 color .3s var(--bezier),
 border-color .3s var(--bezier);
 padding: 0;
 list-style-type: none;
 color: var(--text-color);
 background-color: var(--merged-color);
 `,[Ge("bordered",`
 border-radius: var(--border-radius);
 border: 1px solid var(--merged-border-color);
 `,[de("list-item",`
 padding: 12px 20px;
 `,[_e("&:not(:last-child)",`
 border-bottom: 1px solid var(--merged-border-color);
 `)]),Se("header, footer",`
 padding: 12px 20px;
 `,[_e("&:not(:last-child)",`
 border-bottom: 1px solid var(--merged-border-color);
 `)])]),Se("header, footer",`
 padding: 12px 0;
 box-sizing: border-box;
 transition: border-color .3s var(--bezier);
 `,[_e("&:not(:last-child)",`
 border-bottom: 1px solid var(--merged-border-color);
 `)]),de("list-item",`
 padding: 12px 0; 
 box-sizing: border-box;
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition: border-color .3s var(--bezier);
 `,[Se("prefix",`
 margin-right: 20px;
 flex: 0;
 `),Se("suffix",`
 margin-left: 20px;
 flex: 0;
 `),Se("main",`
 flex: 1;
 `),_e("&:not(:last-child)",`
 border-bottom: 1px solid var(--merged-border-color);
 `)])]),o0(de("list",`
 --merged-color: var(--color-modal);
 --merged-border-color: var(--border-color-modal);
 `)),VS(de("list",`
 --merged-color: var(--color-popover);
 --merged-border-color: var(--border-color-popover);
 `))]);const uYe=Object.assign(Object.assign({},rr.props),{size:{type:String,default:"medium"},bordered:{type:Boolean,default:!1}}),mK=Symbol("list");var Nft=xt({name:"List",props:uYe,setup(r){const{mergedClsPrefixRef:t}=mn(r),e=rr("List","List",lYe,sYe,r,t);return rn(mK,{mergedClsPrefixRef:t}),{mergedClsPrefix:t,cssVars:re(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:i,textColor:a,color:o,colorModal:s,colorPopover:l,borderColor:u,borderColorModal:c,borderColorPopover:f,borderRadius:d}}=e.value;return{"--font-size":i,"--bezier":n,"--text-color":a,"--color":o,"--border-radius":d,"--border-color":u,"--border-color-modal":c,"--border-color-popover":f,"--color-modal":s,"--color-popover":l}})}},render(){const{$slots:r,mergedClsPrefix:t}=this;return I("ul",{class:[`${t}-list`,this.bordered&&`${t}-list--bordered`],style:this.cssVars},r.header?I("div",{class:`${t}-list__header`},qr(r,"header")):null,qr(r,"default"),r.footer?I("div",{class:`${t}-list__footer`},qr(r,"footer")):null)}}),Bft=xt({name:"ListItem",setup(){const r=or(mK,null);return r||AI("list-item","`n-list-item` must be placed in `n-list`."),{mergedClsPrefix:r.mergedClsPrefixRef}},render(){const{$slots:r,mergedClsPrefix:t}=this;return I("li",{class:`${t}-list-item`},r.prefix?I("div",{class:`${t}-list-item__prefix`},qr(r,"prefix")):null,r.default?I("div",{class:`${t}-list-item__main`},r):null,r.suffix?I("div",{class:`${t}-list-item__suffix`},qr(r,"suffix")):null)}});const BP={internalKey:{type:[String,Number],required:!0},root:Boolean,isGroup:Boolean,level:{type:Number,required:!0},title:[String,Function],extra:[String,Function]};var yK=xt({name:"MenuOptionContent",props:{collapsed:Boolean,disabled:Boolean,title:[String,Function],icon:Function,extra:[String,Function],showArrow:Boolean,childActive:Boolean,hover:Boolean,paddingLeft:Number,maxIconSize:{type:Number,required:!0},activeIconSize:{type:Number,required:!0},iconMarginRight:{type:Number,required:!0},clsPrefix:{type:String,required:!0},onClick:Function,tmNode:{type:Object,required:!0}},setup(r){const{props:t}=or(k0);return{menuProps:t,style:re(()=>{const{paddingLeft:e}=r;return{paddingLeft:e&&`${e}px`}}),iconStyle:re(()=>{const{maxIconSize:e,activeIconSize:n,iconMarginRight:i}=r;return{width:`${e}px`,height:`${e}px`,fontSize:`${n}px`,marginRight:`${i}px`}})}},render(){const{clsPrefix:r,tmNode:t,menuProps:{renderIcon:e,renderLabel:n,renderExtra:i,expandIcon:a}}=this,o=e?e(t.rawNode):Ni(this.icon);return I("div",{onClick:this.onClick,role:"none",class:[`${r}-menu-item-content`,{[`${r}-menu-item-content--collapsed`]:this.collapsed,[`${r}-menu-item-content--child-active`]:this.childActive,[`${r}-menu-item-content--disabled`]:this.disabled,[`${r}-menu-item-content--hover`]:this.hover}],style:this.style},o&&I("div",{class:`${r}-menu-item-content__icon`,style:this.iconStyle,role:"none"},[o]),I("div",{class:`${r}-menu-item-content-header`,role:"none"},n?n(t.rawNode):Ni(this.title),this.extra||i?I("span",{class:`${r}-menu-item-content-header__extra`}," ",i?i(t.rawNode):Ni(this.extra)):null),this.showArrow?I(si,{ariaHidden:!0,class:`${r}-menu-item-content__arrow`,clsPrefix:r},{default:()=>a?a(t.rawNode):I(H8e,null)}):null)}});const bK=Object.assign(Object.assign({},BP),{rawNodes:{type:Array,default:()=>[]},tmNodes:{type:Array,default:()=>[]},tmNode:{type:Object,required:!0},disabled:{type:Boolean,default:!1},icon:Function,onClick:Function}),$P=Symbol("submenu");var cYe=xt({name:"Submenu",props:bK,setup(r){const t=zP(r),{NMenu:e,NSubmenu:n}=t,{props:i,mergedCollapsedRef:a}=e,o=re(()=>{const{disabled:f}=r;return(n==null?void 0:n.mergedDisabledRef.value)||i.disabled?!0:f}),s=Oe(!1);rn($P,{paddingLeftRef:t.paddingLeft,mergedDisabledRef:o}),rn(GP,null);function l(){const{onClick:f}=r;f&&f()}function u(){o.value||(a.value||e.toggleExpand(r.internalKey),l())}function c(f){s.value=f}return{menuProps:i,doSelect:e.doSelect,inverted:e.invertedRef,isHorizontal:e.isHorizontalRef,mergedClsPrefix:e.mergedClsPrefixRef,maxIconSize:t.maxIconSize,activeIconSize:t.activeIconSize,iconMarginRight:t.iconMarginRight,dropdownPlacement:t.dropdownPlacement,dropdownShow:s,paddingLeft:t.paddingLeft,mergedDisabled:o,mergedValue:e.mergedValueRef,childActive:xi(()=>e.activePathRef.value.includes(r.internalKey)),collapsed:re(()=>i.mode==="horizontal"?!1:a.value?!0:!e.mergedExpandedKeysRef.value.includes(r.internalKey)),dropdownEnabled:re(()=>!o.value&&(i.mode==="horizontal"||a.value)),handlePopoverShowChange:c,handleClick:u}},render(){var r;const{mergedClsPrefix:t,menuProps:{renderIcon:e,renderLabel:n}}=this,i=()=>{const{isHorizontal:o,paddingLeft:s,collapsed:l,mergedDisabled:u,maxIconSize:c,activeIconSize:f,title:d,childActive:h,icon:v,handleClick:p,dropdownShow:g,iconMarginRight:m,tmNode:y}=this;return I(yK,{tmNode:y,paddingLeft:s,collapsed:l,disabled:u,iconMarginRight:m,maxIconSize:c,activeIconSize:f,title:d,showArrow:!o,childActive:h,clsPrefix:t,icon:v,hover:g,onClick:p})},a=()=>I(pX,null,{default:()=>{const{tmNodes:o,collapsed:s}=this;return s?null:I("div",{class:`${t}-submenu-children`,role:"menu"},o.map(l=>UP(l,this.menuProps)))}});return this.root?I(Gq,Object.assign({},(r=this.menuProps)===null||r===void 0?void 0:r.dropdownProps,{builtinThemeOverrides:{fontSizeLarge:"14px",optionIconSizeLarge:"18px"},value:this.mergedValue,size:"large",trigger:"hover",disabled:!this.dropdownEnabled,placement:this.dropdownPlacement,keyField:this.menuProps.keyField,labelField:this.menuProps.labelField,childrenField:this.menuProps.childrenField,onUpdateShow:this.handlePopoverShowChange,options:this.rawNodes,onSelect:this.doSelect,inverted:this.inverted,renderIcon:e,renderLabel:n}),{default:()=>I("div",{class:`${t}-submenu`,role:"menuitem","aria-expanded":!this.collapsed},i(),this.isHorizontal?null:a())}):I("div",{class:`${t}-submenu`,role:"menuitem","aria-expanded":!this.collapsed},i(),a())}});const bC=8;function zP(r){const t=or(k0),{props:e,mergedCollapsedRef:n}=t,i=or($P,null),a=or(GP,null),o=re(()=>e.mode==="horizontal"),s=re(()=>o.value?e.dropdownPlacement:"tmNodes"in r?"right-start":"right"),l=re(()=>{var d;return Math.max((d=e.collapsedIconSize)!==null&&d!==void 0?d:e.iconSize,e.iconSize)}),u=re(()=>{var d;return!o.value&&r.root&&n.value&&(d=e.collapsedIconSize)!==null&&d!==void 0?d:e.iconSize}),c=re(()=>{if(o.value)return;const{collapsedWidth:d,indent:h,rootIndent:v}=e,{root:p,isGroup:g}=r,m=v===void 0?h:v;if(p)return n.value?d/2-l.value/2:m;if(a)return h/2+a.paddingLeftRef.value;if(i)return(g?h/2:h)+i.paddingLeftRef.value}),f=re(()=>{const{collapsedWidth:d,indent:h,rootIndent:v}=e,{value:p}=l,{root:g}=r;return o.value||!g||!n.value?bC:(v===void 0?h:v)+p+bC-(d+p)/2});return{dropdownPlacement:s,activeIconSize:u,maxIconSize:l,paddingLeft:c,iconMarginRight:f,NMenu:t,NSubmenu:i}}const xK=Object.assign(Object.assign({},BP),{tmNodes:{type:Array,required:!0}}),GP=Symbol("menu-item-group");var fYe=xt({name:"MenuOptionGroup",props:xK,setup(r){rn($P,null);const t=zP(r);rn(GP,{paddingLeftRef:t.paddingLeft});const{mergedClsPrefixRef:e,props:n}=or(k0);return function(){const{value:i}=e,a=t.paddingLeft.value;return I("div",{class:`${i}-menu-item-group`,role:"group"},I("span",{class:`${i}-menu-item-group-title`,style:a!==void 0?`padding-left: ${a}px;`:void 0},Ni(r.title),r.extra?I(Wi,null," ",Ni(r.extra)):null),I("div",null,r.tmNodes.map(o=>UP(o,n))))}}});const wK=Object.assign(Object.assign({},BP),{tmNode:{type:Object,required:!0},disabled:Boolean,icon:Function,onClick:Function});var dYe=xt({name:"MenuOption",props:wK,setup(r){const t=zP(r),{NSubmenu:e,NMenu:n}=t,{props:i,mergedClsPrefixRef:a,mergedCollapsedRef:o}=n,s=e?e.mergedDisabledRef:{value:!1},l=re(()=>s.value||r.disabled);function u(f){const{onClick:d}=r;d&&d(f)}function c(f){l.value||(n.doSelect(r.internalKey,r.tmNode.rawNode),u(f))}return{mergedClsPrefix:a,dropdownPlacement:t.dropdownPlacement,paddingLeft:t.paddingLeft,iconMarginRight:t.iconMarginRight,maxIconSize:t.maxIconSize,activeIconSize:t.activeIconSize,mergedTheme:n.mergedThemeRef,menuProps:i,dropdownEnabled:xi(()=>r.root&&o.value&&i.mode!=="horizontal"&&!l.value),selected:re(()=>n.mergedValueRef.value===r.internalKey),mergedDisabled:l,handleClick:c}},render(){const{mergedClsPrefix:r,mergedTheme:t,tmNode:e,menuProps:{renderLabel:n}}=this;return I("div",{role:"menuitem",class:[`${r}-menu-item`,this.selected&&`${r}-menu-item--selected`,this.mergedDisabled&&`${r}-menu-item--disabled`]},I(Aq,{theme:t.peers.Tooltip,themeOverrides:t.peerOverrides.Tooltip,trigger:"hover",placement:this.dropdownPlacement,disabled:!this.dropdownEnabled||this.title===void 0,internalExtraClass:["menu-tooltip"]},{default:()=>n?n(e.rawNode):Ni(this.title),trigger:()=>I(yK,{tmNode:e,clsPrefix:r,paddingLeft:this.paddingLeft,iconMarginRight:this.iconMarginRight,maxIconSize:this.maxIconSize,activeIconSize:this.activeIconSize,title:this.title,extra:this.extra,disabled:this.mergedDisabled,icon:this.icon,onClick:this.handleClick})}))}}),hYe=xt({name:"MenuDivider",setup(){const r=or(k0),{mergedClsPrefixRef:t,isHorizontalRef:e}=r;return()=>e.value?null:I("div",{class:`${t.value}-menu-divider`})}});const vYe=ef(xK),pYe=ef(wK),gYe=ef(bK);function mYe(r){return r.type==="divider"||r.type==="render"}function yYe(r){return r.type==="divider"}function UP(r,t){const{rawNode:e}=r;if(mYe(e))return yYe(e)?I(hYe,Object.assign({key:r.key},e.props)):void 0;const{labelField:n}=t,{key:i,level:a,isGroup:o}=r,s=Object.assign(Object.assign({},e),{title:e.title||e[n],extra:e.titleExtra||e.extra,key:i,internalKey:i,level:a,root:a===0,isGroup:o});return r.children?r.isGroup?I(fYe,Hu(s,vYe,{tmNodes:r.children,key:i})):I(cYe,Hu(s,gYe,{key:i,rawNodes:e[t.childrenField],tmNodes:r.children,tmNode:r})):I(dYe,Hu(s,pYe,{key:i,tmNode:r}))}function bYe(r,t,e){return{itemTextColorInverted:r,itemTextColorHoverInverted:t,itemTextColorChildActiveInverted:t,itemTextColorActiveInverted:t,itemIconColorInverted:r,itemIconColorHoverInverted:t,itemIconColorActiveInverted:t,itemIconColorChildActiveInverted:t,itemIconColorCollapsedInverted:r,arrowColorInverted:r,arrowColorHoverInverted:t,arrowColorChildActiveInverted:t,arrowColorActiveInverted:t,groupTextColorInverted:e}}const xYe=r=>{const{borderRadius:t,textColor3:e,primaryColor:n,textColor2:i,primaryColorHover:a,textColor1:o,fontSize:s,dividerColor:l}=r;return Object.assign({borderRadius:t,color:"#0000",groupTextColor:e,itemColorActive:jr(n,{alpha:.1}),itemColorActiveCollapsed:"#0000",itemTextColor:i,itemTextColorHover:a,itemTextColorChildActive:n,itemTextColorActive:n,itemIconColor:o,itemIconColorHover:a,itemIconColorActive:n,itemIconColorChildActive:n,itemIconColorCollapsed:o,itemHeight:"42px",arrowColor:i,arrowColorHover:a,arrowColorChildActive:n,arrowColorActive:n,colorInverted:"#0000",itemColorActiveInverted:n,itemColorActiveCollapsedInverted:n,borderColorHorizontal:"#0000",fontSize:s,dividerColor:l},bYe("#BBB","#FFF","#AAA"))},wYe=Go({name:"Menu",common:Wn,peers:{Tooltip:yP},self:xYe});var SYe=wYe,CYe=_e([de("menu",`
 background-color: var(--color);
 color: var(--item-text-color);
 overflow: hidden;
 transition: background-color .3s var(--bezier);
 box-sizing: border-box;
 font-size: var(--font-size);
 padding-bottom: 6px;
 `,[Ge("horizontal",{display:"inline-flex",paddingBottom:0},[de("submenu",{margin:0}),de("menu-item",{margin:0},[_e("&::before",{backgroundColor:"#0000 !important"}),Ge("selected",[de("menu-item-content",{borderBottom:"2px solid var(--border-color-horizontal)"})])]),de("menu-item-content",{padding:"0 20px",borderBottom:"2px solid #0000"},[Ge("child-active",{borderBottom:"2px solid var(--border-color-horizontal)"}),Mn("disabled",[SK({borderBottom:"2px solid var(--border-color-horizontal)"},null)])])]),Ge("collapsed",[de("menu-item",[Ge("selected",[_e("&::before",{backgroundColor:"var(--item-color-active-collapsed) !important"})])]),de("menu-item-content",[de("menu-item-content-header",{opacity:0}),Se("arrow",{opacity:0}),Se("icon",{color:"var(--item-icon-color-collapsed)"})])]),de("menu-item",`
 transition: background-color .3s var(--bezier);
 height: var(--item-height);
 margin-top: 6px;
 position: relative;
 `,[_e("&::before",`
 z-index: auto;
 content: "";
 background-color: #0000;
 position: absolute;
 left: 8px;
 right: 8px;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border-radius: var(--border-radius);
 transition: background-color .3s var(--bezier);
 `),Mn("disabled",[_e("&:active::before",{backgroundColor:"var(--item-color-active)"})]),Ge("selected",[_e("&::before",{backgroundColor:"var(--item-color-active)"}),de("menu-item-content",[Se("arrow",{color:"var(--arrow-color-active)"}),Se("icon",{color:"var(--item-icon-color-active)"}),de("menu-item-content-header",{color:"var(--item-text-color-active)"},[Se("extra",{color:"var(--item-text-color-active)"})])])])]),de("menu-item-content",`
 box-sizing: border-box;
 line-height: 1.75;
 height: 100%;
 display: grid;
 grid-template-areas: "icon content arrow";
 grid-template-columns: auto 1fr auto;
 align-items: center;
 cursor: pointer;
 position: relative;
 z-index: auto;
 padding-right: 18px;
 transition:
 background-color .3s var(--bezier),
 padding-left .3s var(--bezier),
 border-color .3s var(--bezier);
 `,[Ge("disabled",{opacity:".45",cursor:"not-allowed"}),Ge("collapsed",[Se("arrow",{transform:"rotate(0)"})]),Ge("child-active",[de("menu-item-content-header",{color:"var(--item-text-color-child-active)"},[Se("extra",{color:"var(--item-text-color-child-active)"})]),Se("arrow",{color:"var(--arrow-color-child-active)"}),Se("icon",{color:"var(--item-icon-color-child-active)"})]),Mn("disabled",[SK(null,[Se("arrow",{color:"var(--arrow-color-hover)"}),Se("icon",{color:"var(--item-icon-color-hover)"}),de("menu-item-content-header",{color:"var(--item-text-color-hover)"},[Se("extra",{color:"var(--item-text-color-hover)"})])])]),Se("icon",`
 grid-area: icon;
 color: var(--item-icon-color);
 transition:
 color .3s var(--bezier),
 font-size .3s var(--bezier),
 margin-right .3s var(--bezier);
 box-sizing: content-box;
 display: inline-flex;
 align-items: center;
 justify-content: center;
 `),Se("arrow",`
 grid-area: arrow;
 font-size: 16px;
 color: var(--arrow-color);
 transform: rotate(180deg);
 opacity: 1;
 transition:
 color .3s var(--bezier),
 transform 0.2s var(--bezier),
 opacity 0.2s var(--bezier);
 `),de("menu-item-content-header",`
 grid-area: content;
 transition:
 color .3s var(--bezier),
 opacity .3s var(--bezier);
 opacity: 1;
 white-space: nowrap;
 overflow: hidden;
 text-overflow: ellipsis;
 color: var(--item-text-color);
 `,[_e("a",`
 text-decoration: none;
 color: inherit;
 `,[_e("&::before",`
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),Se("extra",`
 font-size: .93em;
 color: var(--group-text-color);
 transition: color .3s var(--bezier);
 `)])]),de("submenu",{cursor:"pointer",position:"relative",marginTop:"6px"},[de("menu-item-content",`
 height: var(--item-height);
 `),de("submenu-children",{overflow:"hidden",padding:0},[tHe({duration:".2s"})])]),de("menu-item-group",[de("menu-item-group-title",`
 margin-top: 6px;
 color: var(--group-text-color);
 cursor: default;
 font-size: .93em;
 height: 36px;
 display: flex;
 align-items: center;
 transition:
 padding-left .3s var(--bezier),
 color .3s var(--bezier);
 `)])]),de("menu-tooltip",[_e("a",`
 color: inherit;
 text-decoration: none;
 `)]),de("menu-divider",`
 transition: background-color .3s var(--bezier);
 background-color: var(--divider-color);
 height: 1px;
 margin: 6px 18px;
 `)]);function SK(r,t){return[Ge("hover",r,t),_e("&:hover",r,t)]}const EYe=Object.assign(Object.assign({},rr.props),{options:{type:Array,default:()=>[]},collapsed:{type:Boolean,default:void 0},collapsedWidth:{type:Number,default:48},iconSize:{type:Number,default:20},collapsedIconSize:{type:Number,default:24},rootIndent:Number,indent:{type:Number,default:32},labelField:{type:String,default:"label"},keyField:{type:String,default:"key"},childrenField:{type:String,default:"children"},defaultExpandAll:Boolean,defaultExpandedKeys:Array,expandedKeys:Array,value:[String,Number],defaultValue:{type:[String,Number],default:null},mode:{type:String,default:"vertical"},watchProps:{type:Array,default:void 0},disabled:Boolean,inverted:Boolean,"onUpdate:expandedKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],onUpdateValue:[Function,Array],"onUpdate:value":[Function,Array],expandIcon:Function,renderIcon:Function,renderLabel:Function,renderExtra:Function,dropdownPlacement:{type:String,default:"bottom"},dropdownProps:Object,accordion:Boolean,items:Array,onOpenNamesChange:[Function,Array],onSelect:[Function,Array],onExpandedNamesChange:[Function,Array],expandedNames:Array,defaultExpandedNames:Array}),k0=Symbol("menu");var $ft=xt({name:"Menu",props:EYe,setup(r){const{mergedClsPrefixRef:t}=mn(r),e=rr("Menu","Menu",CYe,SYe,r,t),n=or(vK,null),i=re(()=>{var x;const{collapsed:w}=r;if(w!==void 0)return w;if(n){const{collapseModeRef:S,collapsedRef:C}=n;if(S.value==="width")return(x=C.value)!==null&&x!==void 0?x:!1}return!1}),a=re(()=>{const{keyField:x,childrenField:w}=r;return qS(r.items||r.options,{getChildren(S){return S[w]},getKey(S){var C;return(C=S[x])!==null&&C!==void 0?C:S.name}})}),o=re(()=>new Set(a.value.treeNodes.map(x=>x.key))),{watchProps:s}=r,l=Oe(null);(s==null?void 0:s.includes("defaultValue"))?Ks(()=>{l.value=r.defaultValue}):l.value=r.defaultValue;const u=Kt(r,"value"),c=Qi(u,l),f=Oe([]),d=()=>{f.value=r.defaultExpandAll?a.value.getNonLeafKeys():r.defaultExpandedNames||r.defaultExpandedKeys||a.value.getPath(c.value,{includeSelf:!1}).keyPath};(s==null?void 0:s.includes("defaultExpandedKeys"))?Ks(d):d();const h=jS(r,["expandedNames","expandedKeys"]),v=Qi(h,f),p=re(()=>a.value.treeNodes),g=re(()=>a.value.getPath(c.value).keyPath);rn(k0,{props:r,mergedCollapsedRef:i,mergedThemeRef:e,mergedValueRef:c,mergedExpandedKeysRef:v,activePathRef:g,mergedClsPrefixRef:t,isHorizontalRef:re(()=>r.mode==="horizontal"),invertedRef:Kt(r,"inverted"),doSelect:m,toggleExpand:b});function m(x,w){const{"onUpdate:value":S,onUpdateValue:C,onSelect:_}=r;C&&Tt(C,x,w),S&&Tt(S,x,w),_&&Tt(_,x,w),l.value=x}function y(x){const{"onUpdate:expandedKeys":w,onUpdateExpandedKeys:S,onExpandedNamesChange:C,onOpenNamesChange:_}=r;w&&Tt(w,x),S&&Tt(S,x),C&&Tt(C,x),_&&Tt(_,x),f.value=x}function b(x){const w=Array.from(v.value),S=w.findIndex(C=>C===x);if(~S)w.splice(S,1);else{if(r.accordion&&o.value.has(x)){const C=w.findIndex(_=>o.value.has(_));C>-1&&w.splice(C,1)}w.push(x)}y(w)}return{mergedClsPrefix:t,controlledExpandedKeys:h,uncontrolledExpanededKeys:f,mergedExpandedKeys:v,uncontrolledValue:l,mergedValue:c,activePath:g,tmNodes:p,mergedTheme:e,mergedCollapsed:i,cssVars:re(()=>{const{inverted:x}=r,{common:{cubicBezierEaseInOut:w},self:S}=e.value,{borderRadius:C,borderColorHorizontal:_,fontSize:T,itemHeight:E,dividerColor:M}=S,k={"--divider-color":M,"--bezier":w,"--font-size":T,"--border-color-horizontal":_,"--border-radius":C,"--item-height":E};return x?(k["--group-text-color"]=S.groupTextColorInverted,k["--color"]=S.colorInverted,k["--item-text-color"]=S.itemTextColorInverted,k["--arrow-color"]=S.arrowColorInverted,k["--arrow-color-hover"]=S.arrowColorHoverInverted,k["--arrow-color-active"]=S.arrowColorActiveInverted,k["--arrow-color-child-active"]=S.arrowColorChildActiveInverted,k["--item-icon-color"]=S.itemIconColorInverted,k["--item-text-color-hover"]=S.itemTextColorHoverInverted,k["--item-icon-color-hover"]=S.itemIconColorHoverInverted,k["--item-text-color-active"]=S.itemTextColorActiveInverted,k["--item-icon-color-active"]=S.itemIconColorActiveInverted,k["--item-icon-color-collapsed"]=S.itemIconColorCollapsedInverted,k["--item-color-active"]=S.itemColorActiveInverted,k["--item-color-active-collapsed"]=S.itemColorActiveCollapsedInverted,k["--item-text-color-child-active"]=S.itemTextColorChildActiveInverted,k["--item-icon-color-child-active"]=S.itemIconColorChildActiveInverted):(k["--group-text-color"]=S.groupTextColor,k["--color"]=S.color,k["--item-text-color"]=S.itemTextColor,k["--arrow-color"]=S.arrowColor,k["--arrow-color-hover"]=S.arrowColorHover,k["--arrow-color-active"]=S.arrowColorActive,k["--arrow-color-child-active"]=S.arrowColorChildActive,k["--item-icon-color"]=S.itemIconColor,k["--item-text-color-hover"]=S.itemTextColorHover,k["--item-icon-color-hover"]=S.itemIconColorHover,k["--item-text-color-active"]=S.itemTextColorActive,k["--item-icon-color-active"]=S.itemIconColorActive,k["--item-icon-color-collapsed"]=S.itemIconColorCollapsed,k["--item-color-active"]=S.itemColorActive,k["--item-color-active-collapsed"]=S.itemColorActiveCollapsed,k["--item-text-color-child-active"]=S.itemTextColorChildActive,k["--item-icon-color-child-active"]=S.itemIconColorChildActive),k})}},render(){const{mergedClsPrefix:r,mode:t}=this;return I("div",{role:t==="horizontal"?"menubar":"menu",class:[`${r}-menu`,`${r}-menu--${t}`,this.mergedCollapsed&&`${r}-menu--collapsed`],style:this.cssVars},this.tmNodes.map(e=>UP(e,this.$props)))}});const _Ye=r=>{const{infoColor:t,successColor:e,warningColor:n,errorColor:i,textColor2:a,progressRailColor:o,fontSize:s,fontWeight:l}=r;return{fontSize:s,fontSizeCircle:"28px",fontWeightCircle:l,railColor:o,railHeight:"8px",iconSizeCircle:"36px",iconSizeLine:"18px",iconColor:t,iconColorInfo:t,iconColorSuccess:e,iconColorWarning:n,iconColorError:i,textColorCircle:a,textColorLineInner:"rgb(255, 255, 255)",textColorLineOuter:a,fillColor:t,fillColorInfo:t,fillColorSuccess:e,fillColorWarning:n,fillColorError:i,lineBgProcessing:"linear-gradient(90deg, rgba(255, 255, 255, .3) 0%, rgba(255, 255, 255, .5) 100%)"}},TYe={name:"Progress",common:Wn,self:_Ye};var AYe=TYe,MYe=_e([de("progress",{display:"inline-block"},[de("progress-icon",`
 color: var(--icon-color);
 transition: color .3s var(--bezier);
 `),Ge("line",`
 width: 100%;
 display: block;
 `,[de("progress-content",`
 display: flex;
 align-items: center;
 `,[de("progress-graph",{flex:1})]),de("progress-custom-content",{marginLeft:"14px"}),de("progress-icon",`
 width: 30px;
 padding-left: 14px;
 height: var(--icon-size-line);
 line-height: var(--icon-size-line);
 font-size: var(--icon-size-line);
 `,[Ge("as-text",`
 color: var(--text-color-line-outer);
 text-align: center;
 width: 40px;
 font-size: var(--font-size);
 padding-left: 4px;
 transition: color .3s var(--bezier);
 `)])]),Ge("circle",{width:"120px"},[de("progress-custom-content",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 justify-content: center;
 `),de("progress-text",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 color: inherit;
 font-size: var(--font-size-circle);
 color: var(--text-color-circle);
 font-weight: var(--font-weight-circle);
 transition: color .3s var(--bezier);
 white-space: nowrap;
 `),de("progress-icon",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 color: var(--icon-color);
 font-size: var(--icon-size-circle);
 `)]),Ge("multiple-circle",{width:"200px",color:"inherit"},[de("progress-text",`
 font-weight: var(--font-weight-circle);
 color: var(--text-color-circle);
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 justify-content: center;
 transition: color .3s var(--bezier);
 `)]),de("progress-content",{position:"relative"}),de("progress-graph",{position:"relative"},[de("progress-graph-circle",[_e("svg",{verticalAlign:"bottom"}),de("progress-graph-circle-fill",`
 stroke: var(--fill-color);
 transition:
 opacity .3s var(--bezier),
 stroke .3s var(--bezier),
 stroke-dasharray .3s var(--bezier);
 `,[Ge("empty",{opacity:0})]),de("progress-graph-circle-rail",`
 transition: stroke .3s var(--bezier);
 overflow: hidden;
 stroke: var(--rail-color);
 `)]),de("progress-graph-line",[Ge("indicator-inside",[de("progress-graph-line-rail",{height:"16px",borderRadius:"10px"},[de("progress-graph-line-fill",{height:"inherit",borderRadius:"10px"}),de("progress-graph-line-indicator",`
 background: #0000;
 white-space: nowrap;
 text-align: right;
 margin-left: 14px;
 margin-right: 14px;
 height: inherit;
 line-height: 16px;
 font-size: 12px;
 color: var(--text-color-line-inner);
 transition: color .3s var(--bezier);
 `)])]),Ge("indicator-inside-label",`
 height: 16px;
 display: flex;
 align-items: center;
 `,[de("progress-graph-line-rail",{flex:1,transition:"background-color .3s var(--bezier)"}),de("progress-graph-line-indicator",`
 background: var(--fill-color);
 font-size: 12px;
 transform: translateZ(0);
 display: flex;
 vertical-align: middle;
 height: 16px;
 line-height: 16px;
 padding: 0 10px;
 border-radius: 10px;
 position: absolute;
 white-space: nowrap;
 color: var(--text-color-line-inner);
 transition:
 right .2s var(--bezier),
 color .3s var(--bezier),
 background-color .3s var(--bezier);
 `)]),de("progress-graph-line-rail",`
 position: relative;
 overflow: hidden;
 height: var(--rail-height);
 border-radius: 5px;
 background-color: var(--rail-color);
 transition: background-color .3s var(--bezier);
 `,[de("progress-graph-line-fill",`
 background: var(--fill-color);
 position: relative;
 border-radius: 5px;
 height: inherit;
 width: 100%;
 max-width: 0%;
 transition:
 background-color .3s var(--bezier),
 max-width .2s var(--bezier);
 `,[Ge("processing",[_e("&::after",`
 content: "";
 background-image: var(--line-bg-processing);
 animation: progress-processing-animation 2s var(--bezier) infinite;
 `)])])])])])]),_e("@keyframes progress-processing-animation",`
 0% {
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 100%;
 opacity: 1;
 }
 66% {
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 0;
 opacity: 0;
 }
 100% {
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 0;
 opacity: 0;
 }
 `)]);const kYe={success:I(BI,null),error:I(FI,null),warning:I($I,null),info:I(NI,null)};var IYe=xt({name:"ProgressLine",props:{clsPrefix:{type:String,required:!0},percentage:{type:Number,default:0},railColor:String,railStyle:[String,Object],fillColor:String,status:{type:String,required:!0},indicatorPlacement:{type:String,required:!0},indicatorTextColor:String,unit:{type:String,default:"%"},processing:{type:Boolean,required:!0},showIndicator:{type:Boolean,required:!0},height:[String,Number],railBorderRadius:[String,Number],fillBorderRadius:[String,Number]},setup(r,{slots:t}){const e=re(()=>sa(r.height)),n=re(()=>r.railBorderRadius!==void 0?sa(r.railBorderRadius):r.height!==void 0?sa(r.height,{c:.5}):""),i=re(()=>r.fillBorderRadius!==void 0?sa(r.fillBorderRadius):r.railBorderRadius!==void 0?sa(r.railBorderRadius):r.height!==void 0?sa(r.height,{c:.5}):"");return()=>{const{indicatorPlacement:a,railColor:o,railStyle:s,percentage:l,unit:u,indicatorTextColor:c,status:f,showIndicator:d,fillColor:h,processing:v,clsPrefix:p}=r;return I("div",{class:`${p}-progress-content`,role:"none"},I("div",{class:`${p}-progress-graph`,"aria-hidden":!0},I("div",{class:[`${p}-progress-graph-line`,{[`${p}-progress-graph-line--indicator-${a}`]:!0}]},I("div",{class:`${p}-progress-graph-line-rail`,style:[{backgroundColor:o,height:e.value,borderRadius:n.value},s]},I("div",{class:[`${p}-progress-graph-line-fill`,v&&`${p}-progress-graph-line-fill--processing`],style:{maxWidth:`${r.percentage}%`,backgroundColor:h,height:e.value,borderRadius:i.value}},a==="inside"?I("div",{class:`${p}-progress-graph-line-indicator`},`${l}${u}`):null)))),d&&a==="outside"?I("div",null,t.default?I("div",{class:`${p}-progress-custom-content`,style:{color:c},role:"none"},t.default()):f==="default"?I("div",{role:"none",class:`${p}-progress-icon ${p}-progress-icon--as-text`,style:{color:c}},l,u):I("div",{class:`${p}-progress-icon`,"aria-hidden":!0},I(si,{clsPrefix:p},{default:()=>kYe[f]}))):null)}}});const PYe={success:I(BI,null),error:I(FI,null),warning:I($I,null),info:I(NI,null)};var DYe=xt({name:"ProgressCircle",props:{clsPrefix:{type:String,required:!0},status:{type:String,required:!0},strokeWidth:{type:Number,required:!0},fillColor:String,railColor:String,railStyle:[String,Object],percentage:{type:Number,default:0},showIndicator:{type:Boolean,reqiuired:!0},indicatorTextColor:String,unit:String,viewBoxWidth:{type:Number,required:!0}},setup(r,{slots:t}){const e=re(()=>`${Math.PI*r.percentage}, ${r.viewBoxWidth*8}`);return()=>{const{fillColor:n,railColor:i,railStyle:a,strokeWidth:o,status:s,percentage:l,showIndicator:u,indicatorTextColor:c,unit:f,clsPrefix:d}=r;return I("div",{class:`${d}-progress-content`,role:"none"},I("div",{class:`${d}-progress-graph`,"aria-hidden":!0},I("div",{class:`${d}-progress-graph-circle`},I("svg",{viewBox:"0 0 110 110"},I("g",null,I("path",{class:`${d}-progress-graph-circle-rail`,d:"m 55 5 a 50 50 0 1 1 0 100 a 50 50 0 1 1 0 -100","stroke-width":o*1.1,"stroke-linecap":"round",fill:"none",style:[{strokeDashoffset:0,stroke:i},a]})),I("g",null,I("path",{class:[`${d}-progress-graph-circle-fill`,l===0&&`${d}-progress-graph-circle-fill--empty`],d:"m 55 5 a 50 50 0 1 1 0 100 a 50 50 0 1 1 0 -100","stroke-width":o*1.1,"stroke-linecap":"round",fill:"none",style:{strokeDasharray:e.value,strokeDashoffset:0,stroke:n}}))))),u?I("div",null,t.default?I("div",{class:`${d}-progress-custom-content`,role:"none"},t.default()):s!=="default"?I("div",{class:`${d}-progress-icon`,"aria-hidden":!0},I(si,{clsPrefix:d},{default:()=>PYe[s]})):I("div",{class:`${d}-progress-text`,style:{color:c},role:"none"},I("span",{class:`${d}-progress-text__percentage`},l),I("span",{class:`${d}-progress-text__unit`},f))):null)}}});function CK(r,t,e=100){return`m ${e/2} ${e/2-r} a ${r} ${r} 0 1 1 0 ${2*r} a ${r} ${r} 0 1 1 0 -${2*r}`}var RYe=xt({name:"ProgressMultipleCircle",props:{clsPrefix:{type:String,required:!0},viewBoxWidth:{type:Number,required:!0},percentage:{type:Array,default:[0]},strokeWidth:{type:Number,required:!0},circleGap:{type:Number,required:!0},showIndicator:{type:Boolean,required:!0},fillColor:{type:Array,default:()=>[]},railColor:{type:Array,default:()=>[]},railStyle:{type:Array,default:()=>[]}},setup(r,{slots:t}){const e=re(()=>r.percentage.map((i,a)=>`${Math.PI*i/100*(r.viewBoxWidth/2-r.strokeWidth/2*(1+2*a)-r.circleGap*a)*2}, ${r.viewBoxWidth*8}`));return()=>{const{viewBoxWidth:n,strokeWidth:i,circleGap:a,showIndicator:o,fillColor:s,railColor:l,railStyle:u,percentage:c,clsPrefix:f}=r;return I("div",{class:`${f}-progress-content`,role:"none"},I("div",{class:`${f}-progress-graph`,"aria-hidden":!0},I("div",{class:`${f}-progress-graph-circle`},I("svg",{viewBox:`0 0 ${n} ${n}`},c.map((d,h)=>I("g",{key:h},I("path",{class:`${f}-progress-graph-circle-rail`,d:CK(n/2-i/2*(1+2*h)-a*h,i,n),"stroke-width":i,"stroke-linecap":"round",fill:"none",style:[{strokeDashoffset:0,stroke:l[h]},u[h]]}),I("path",{class:[`${f}-progress-graph-circle-fill`,d===0&&`${f}-progress-graph-circle-fill--empty`],d:CK(n/2-i/2*(1+2*h)-a*h,i,n),"stroke-width":i,"stroke-linecap":"round",fill:"none",style:{strokeDasharray:e.value[h],strokeDashoffset:0,stroke:s[h]}})))))),o&&t.default?I("div",null,I("div",{class:`${f}-progress-text`},t.default())):null)}}});const OYe=Object.assign(Object.assign({},rr.props),{processing:Boolean,type:{type:String,default:"line"},status:{type:String,default:"default"},railColor:[String,Array],railStyle:[String,Array],color:[String,Array],viewBoxWidth:{type:Number,default:100},strokeWidth:{type:Number,default:7},percentage:[Number,Array],unit:{type:String,default:"%"},showIndicator:{type:Boolean,default:!0},indicatorPosition:{type:String,default:"outside"},indicatorPlacement:{type:String,default:"outside"},indicatorTextColor:String,circleGap:{type:Number,default:1},height:Number,borderRadius:[String,Number],fillBorderRadius:[String,Number]});var zft=xt({name:"Progress",props:OYe,setup(r){const t=re(()=>r.indicatorPlacement||r.indicatorPosition),{mergedClsPrefixRef:e}=mn(r),n=rr("Progress","Progress",MYe,AYe,r,e);return{mergedClsPrefix:e,mergedIndicatorPlacement:t,cssVars:re(()=>{const{status:i}=r,{common:{cubicBezierEaseInOut:a},self:{fontSize:o,fontSizeCircle:s,railColor:l,railHeight:u,iconSizeCircle:c,iconSizeLine:f,textColorCircle:d,textColorLineInner:h,textColorLineOuter:v,lineBgProcessing:p,fontWeightCircle:g,[Ot("iconColor",i)]:m,[Ot("fillColor",i)]:y}}=n.value;return{"--bezier":a,"--fill-color":y,"--font-size":o,"--font-size-circle":s,"--font-weight-circle":g,"--icon-color":m,"--icon-size-circle":c,"--icon-size-line":f,"--line-bg-processing":p,"--rail-color":l,"--rail-height":u,"--text-color-circle":d,"--text-color-line-inner":h,"--text-color-line-outer":v}})}},render(){const{type:r,cssVars:t,indicatorTextColor:e,showIndicator:n,status:i,railColor:a,railStyle:o,color:s,percentage:l,viewBoxWidth:u,strokeWidth:c,mergedIndicatorPlacement:f,unit:d,borderRadius:h,fillBorderRadius:v,height:p,processing:g,circleGap:m,mergedClsPrefix:y,$slots:b}=this;return I("div",{class:[`${y}-progress`,`${y}-progress--${r}`,`${y}-progress--${i}`],style:t,"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":l,role:r==="circle"||r==="line"?"progressbar":"none"},r==="circle"?I(DYe,{clsPrefix:y,status:i,showIndicator:n,indicatorTextColor:e,railColor:a,fillColor:s,railStyle:o,percentage:l,viewBoxWidth:u,strokeWidth:c,unit:d},b):r==="line"?I(IYe,{clsPrefix:y,status:i,showIndicator:n,indicatorTextColor:e,railColor:a,fillColor:s,railStyle:o,percentage:l,processing:g,indicatorPlacement:f,unit:d,fillBorderRadius:v,railBorderRadius:h,height:p},b):r==="multiple-circle"?I(RYe,{clsPrefix:y,strokeWidth:c,railColor:a,fillColor:s,railStyle:o,viewBoxWidth:u,percentage:l,showIndicator:n,circleGap:m},b):null)}});const LYe=r=>{const{heightSmall:t,heightMedium:e,heightLarge:n,borderRadius:i}=r;return{color:"#eee",colorEnd:"#ddd",borderRadius:i,heightSmall:t,heightMedium:e,heightLarge:n}},FYe={name:"Skeleton",common:Wn,self:LYe};var NYe=_e([de("skeleton",`
 height: 1em;
 width: 100%;
 transition: background-color .3s var(--bezier);
 transition:
 --color-start .3s var(--bezier),
 --color-end .3s var(--bezier),
 background-color .3s var(--bezier);
 animation: 2s skeleton-loading infinite cubic-bezier(0.36, 0, 0.64, 1);
 background-color: var(--color-start);
 `),_e("@keyframes skeleton-loading",`
 0% {
 background: var(--color-start);
 }
 40% {
 background: var(--color-end);
 }
 80% {
 background: var(--color-start);
 }
 100% {
 background: var(--color-start);
 }
 `)]);const BYe=Object.assign(Object.assign({},rr.props),{text:Boolean,round:Boolean,circle:Boolean,height:[String,Number],width:[String,Number],size:String,repeat:{type:Number,default:1},animated:{type:Boolean,default:!0},sharp:{type:Boolean,default:!0}});var Gft=xt({name:"Skeleton",inheritAttrs:!1,props:BYe,setup(r){VGe();const{mergedClsPrefixRef:t}=mn(r),e=rr("Skeleton","Skeleton",NYe,FYe,r,t);return{mergedClsPrefix:t,style:re(()=>{var n,i;const a=e.value,{common:{cubicBezierEaseInOut:o}}=a,s=a.self,{color:l,colorEnd:u,borderRadius:c}=s;let f;const{circle:d,sharp:h,round:v,width:p,height:g,size:m,text:y,animated:b}=r;m!==void 0&&(f=s[Ot("height",m)]);const x=d?(n=p!=null?p:g)!==null&&n!==void 0?n:f:p,w=(i=d&&p!=null?p:g)!==null&&i!==void 0?i:f;return{display:y?"inline-block":"",verticalAlign:y?"-0.125em":"",borderRadius:d?"50%":v?"4096px":h?"":c,width:typeof x=="number"?fo(x):x,height:typeof w=="number"?fo(w):w,animation:b?"":"none","--bezier":o,"--color-start":l,"--color-end":u}})}},render(){const{repeat:r,style:t,mergedClsPrefix:e,$attrs:n}=this,i=I("div",El({class:`${e}-skeleton`,style:t},n));return r>1?I(Wi,null,Array.apply(null,{length:r}).map(a=>[i,`
`])):i}});const $Ye=r=>{const{opacityDisabled:t,heightTiny:e,heightSmall:n,heightMedium:i,heightLarge:a,heightHuge:o,primaryColor:s,fontSize:l}=r;return{fontSize:l,textColor:s,sizeTiny:e,sizeSmall:n,sizeMedium:i,sizeLarge:a,sizeHuge:o,color:s,opacitySpinning:t}},zYe={name:"Spin",common:Wn,self:$Ye};var GYe=zYe,UYe=_e([_e("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),de("spin-container",{position:"relative"},[de("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[tP()])]),de("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),de("spin",`
 display: inline-flex;
 height: var(--size);
 width: var(--size);
 font-size: var(--size);
 color: var(--color);
 `,[Ge("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),de("spin-description",`
 display: inline-block;
 font-size: var(--font-size);
 color: var(--text-color);
 transition: color .3s var(--bezier);
 margin-top: 8px;
 `),de("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--bezier);
 pointer-events: all;
 `,[Ge("spinning",`
 user-select: none;
 pointer-events: none;
 opacity: var(--opacity-spinning);
 `)])]);const VYe={small:20,medium:18,large:16},HYe=Object.assign(Object.assign({},rr.props),{description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0}});var Uft=xt({name:"Spin",props:HYe,setup(r){const{mergedClsPrefixRef:t}=mn(r),e=rr("Spin","Spin",UYe,GYe,r,t);return{mergedClsPrefix:t,compitableShow:jS(r,["spinning","show"]),mergedStrokeWidth:re(()=>{const{strokeWidth:n}=r;if(n!==void 0)return n;const{size:i}=r;return VYe[typeof i=="number"?"medium":i]}),cssVars:re(()=>{const{size:n}=r,{common:{cubicBezierEaseInOut:i},self:a}=e.value,{opacitySpinning:o,color:s,textColor:l}=a,u=typeof n=="number"?fo(n):a[Ot("size",n)];return{"--bezier":i,"--opacity-spinning":o,"--size":u,"--color":s,"--text-color":l}})}},render(){var r;const{$slots:t,mergedClsPrefix:e,description:n}=this,i=t.icon&&this.rotate,a=(n||t.description)&&I("div",{class:`${e}-spin-description`},n||((r=t.description)===null||r===void 0?void 0:r.call(t))),o=t.icon?I("div",{class:`${e}-spin-body`},I("div",{class:[`${e}-spin`,i&&`${e}-spin--rotate`],style:t.default?"":this.cssVars},t.icon()),a):I("div",{class:`${e}-spin-body`},I(Ip,{clsPrefix:e,style:t.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${e}-spin`}),a);return t.default?I("div",{class:`${e}-spin-container`,style:this.cssVars},I("div",{class:[`${e}-spin-content`,this.compitableShow&&`${e}-spin-content--spinning`]},t),I(Ra,{name:"fade-in-transition"},{default:()=>this.compitableShow?o:null})):o}}),WYe={buttonHeightSmall:"14px",buttonHeightMedium:"18px",buttonHeightLarge:"22px",buttonWidthSmall:"14px",buttonWidthMedium:"18px",buttonWidthLarge:"22px",buttonWidthPressedSmall:"20px",buttonWidthPressedMedium:"24px",buttonWidthPressedLarge:"28px",railHeightSmall:"18px",railHeightMedium:"22px",railHeightLarge:"26px",railWidthSmall:"32px",railWidthMedium:"40px",railWidthLarge:"48px"};const jYe=r=>{const{primaryColor:t,opacityDisabled:e,borderRadius:n}=r,i="rgba(0, 0, 0, .14)";return Object.assign(Object.assign({},WYe),{textColor:"white",loadingColor:t,opacityDisabled:e,railColor:i,railColorActive:t,buttonBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",buttonColor:"#FFF",railBorderRadiusSmall:n,railBorderRadiusMedium:n,railBorderRadiusLarge:n,buttonBorderRadiusSmall:n,buttonBorderRadiusMedium:n,buttonBorderRadiusLarge:n,boxShadowFocus:`0 0 0 2px ${jr(t,{alpha:.2})}`})},YYe={name:"Switch",common:Wn,self:jYe};var XYe=YYe,qYe=de("switch",`
 height: var(--height);
 min-width: var(--width);
 vertical-align: middle;
 user-select: none;
 display: inline-flex;
 outline: none;
 justify-content: center;
 align-items: center;
`,[Se("children-placeholder",`
 height: var(--rail-height);
 display: flex;
 flex-direction: column;
 overflow: hidden;
 pointer-events: none;
 visibility: hidden;
 `),Se("rail-placeholder",`
 display: flex;
 flex-wrap: none;
 `),Se("button-placeholder",`
 width: calc(1.75 * var(--rail-height));
 height: var(--rail-height);
 `),de("base-loading",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 font-size: calc(var(--button-width) - 4px);
 color: var(--loading-color);
 transition: color .3s var(--bezier);
 `,[nf({originalTransform:"translateX(-50%) translateY(-50%)"})]),Se("checked, unchecked",`
 transition: color .3s var(--bezier);
 color: var(--text-color);
 box-sizing: border-box;
 position: absolute;
 white-space: nowrap;
 top: 0;
 bottom: 0;
 display: flex;
 align-items: center;
 line-height: 1;
 `),Se("checked",`
 right: 0;
 padding-right: calc(1.25 * var(--rail-height) - var(--offset));
 `),Se("unchecked",`
 left: 0;
 justify-content: flex-end;
 padding-left: calc(1.25 * var(--rail-height) - var(--offset));
 `),_e("&:focus",[Se("rail",`
 box-shadow: var(--box-shadow-focus);
 `)]),Ge("round",[Se("rail",{borderRadius:"calc(var(--rail-height) / 2)"},[Se("button",{borderRadius:"calc(var(--button-height) / 2)"})])]),Mn("disabled",[Ge("pressed",[Se("rail",[Se("button",{maxWidth:"var(--button-width-pressed)"})])]),Se("rail",[_e("&:active",[Se("button",{maxWidth:"var(--button-width-pressed)"})])]),Ge("active",[Ge("pressed",[Se("rail",[Se("button",{left:"calc(100% - var(--offset) - var(--button-width-pressed))"})])]),Se("rail",[_e("&:active",[Se("button",{left:"calc(100% - var(--offset) - var(--button-width-pressed))"})])])])]),Ge("active",[Se("rail",[Se("button",{left:"calc(100% - (var(--rail-height) + var(--button-width)) / 2)"})])]),Se("rail",`
 overflow: hidden;
 height: var(--rail-height);
 min-width: var(--rail-width);
 border-radius: var(--rail-border-radius);
 cursor: pointer;
 position: relative;
 transition:
 background .3s var(--bezier),
 box-shadow .3s var(--bezier);
 background-color: var(--rail-color);
 `,[Se("button",`
 top: var(--offset);
 left: var(--offset);
 height: var(--button-width);
 width: var(--button-width-pressed);
 max-width: var(--button-width);
 border-radius: var(--button-border-radius);
 background-color: var(--button-color);
 box-shadow: var(--button-box-shadow);
 box-sizing: border-box;
 cursor: inherit;
 content: "";
 position: absolute;
 transition:
 background-color .3s var(--bezier),
 left .3s var(--bezier),
 opacity .3s var(--bezier),
 max-width .3s var(--bezier),
 box-shadow .3s var(--bezier);
 `)]),Ge("active",[Se("rail",{backgroundColor:"var(--rail-color-active)"})]),Ge("disabled",[Se("rail",`
 cursor: not-allowed;
 opacity: .5;
 `)])]);const KYe=Object.assign(Object.assign({},rr.props),{size:{type:String,default:"medium"},value:{type:[String,Number,Boolean],default:void 0},loading:Boolean,defaultValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:void 0},round:{type:Boolean,default:!0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],checkedValue:{type:[String,Number,Boolean],default:!0},uncheckedValue:{type:[String,Number,Boolean],default:!1},railStyle:Function,onChange:[Function,Array]});var Vft=xt({name:"Switch",props:KYe,setup(r){const{mergedClsPrefixRef:t}=mn(r),e=rr("Switch","Switch",qYe,XYe,r,t),n=Xl(r),{mergedSizeRef:i,mergedDisabledRef:a}=n,o=Oe(r.defaultValue),s=Kt(r,"value"),l=Qi(s,o),u=re(()=>l.value===r.checkedValue),c=Oe(!1),f=Oe(!1),d=re(()=>{const{railStyle:w}=r;if(!!w)return w({focused:f.value,checked:u.value})});function h(w){const{"onUpdate:value":S,onChange:C,onUpdateValue:_}=r,{nTriggerFormInput:T,nTriggerFormChange:E}=n;S&&Tt(S,w),_&&Tt(_,w),C&&Tt(C,w),o.value=w,T(),E()}function v(){const{nTriggerFormFocus:w}=n;w()}function p(){const{nTriggerFormBlur:w}=n;w()}function g(){a.value||(l.value!==r.checkedValue?h(r.checkedValue):h(r.uncheckedValue))}function m(){f.value=!0,v()}function y(){f.value=!1,p(),c.value=!1}function b(w){w.code==="Space"&&(h(!l.value),c.value=!1)}function x(w){w.code==="Space"&&(w.preventDefault(),c.value=!0)}return{handleClick:g,handleBlur:y,handleFocus:m,handleKeyup:b,handleKeydown:x,mergedRailStyle:d,pressed:c,mergedClsPrefix:t,mergedValue:l,checked:u,mergedDisabled:a,cssVars:re(()=>{const{value:w}=i,{self:{opacityDisabled:S,railColor:C,railColorActive:_,buttonBoxShadow:T,buttonColor:E,boxShadowFocus:M,loadingColor:k,textColor:P,[Ot("buttonHeight",w)]:F,[Ot("buttonWidth",w)]:$,[Ot("buttonWidthPressed",w)]:R,[Ot("railHeight",w)]:L,[Ot("railWidth",w)]:O,[Ot("railBorderRadius",w)]:B,[Ot("buttonBorderRadius",w)]:U},common:{cubicBezierEaseInOut:W}}=e.value,X=fo(($o(L)-$o(F))/2),ae=fo(Math.max($o(L),$o(F))),Z=$o(L)>$o(F)?O:fo($o(O)+$o(F)-$o(L));return{"--bezier":W,"--button-border-radius":U,"--button-box-shadow":T,"--button-color":E,"--button-width":$,"--button-width-pressed":R,"--button-height":F,"--height":ae,"--offset":X,"--opacity-disabled":S,"--rail-border-radius":B,"--rail-color":C,"--rail-color-active":_,"--rail-height":L,"--rail-width":O,"--width":Z,"--box-shadow-focus":M,"--loading-color":k,"--text-color":P}})}},render(){const{mergedClsPrefix:r,mergedDisabled:t,checked:e,mergedRailStyle:n,$slots:i}=this,{checked:a,unchecked:o}=i;return I("div",{role:"switch","aria-checked":e,class:[`${r}-switch`,e&&`${r}-switch--active`,t&&`${r}-switch--disabled`,this.round&&`${r}-switch--round`,this.pressed&&`${r}-switch--pressed`],tabindex:this.mergedDisabled?void 0:0,style:this.cssVars,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},I("div",{class:`${r}-switch__rail`,"aria-hidden":"true",style:n},(a||o)&&I("div",{"aria-hidden":!0,class:`${r}-switch__children-placeholder`},I("div",{class:`${r}-switch__rail-placeholder`},I("div",{class:`${r}-switch__button-placeholder`}),a==null?void 0:a()),I("div",{class:`${r}-switch__rail-placeholder`},I("div",{class:`${r}-switch__button-placeholder`}),o==null?void 0:o())),I("div",{class:`${r}-switch__button`},I(Ra,{name:"fade-in-scale-up-transition"},{default:()=>this.loading?I(Ip,{key:"loading",clsPrefix:r,strokeWidth:20}):null}),a&&I("div",{key:"checked",class:`${r}-switch__checked`},a()),o&&I("div",{key:"unchecked",class:`${r}-switch__unchecked`},o()))))}}),Hft=Rr(function(r,t){(function(e,n){r.exports=n()})(Ic,function(){var e=1e3,n=6e4,i=36e5,a="millisecond",o="second",s="minute",l="hour",u="day",c="week",f="month",d="quarter",h="year",v="date",p="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},b=function(P,F,$){var R=String(P);return!R||R.length>=F?P:""+Array(F+1-R.length).join($)+P},x={s:b,z:function(P){var F=-P.utcOffset(),$=Math.abs(F),R=Math.floor($/60),L=$%60;return(F<=0?"+":"-")+b(R,2,"0")+":"+b(L,2,"0")},m:function P(F,$){if(F.date()<$.date())return-P($,F);var R=12*($.year()-F.year())+($.month()-F.month()),L=F.clone().add(R,f),O=$-L<0,B=F.clone().add(R+(O?-1:1),f);return+(-(R+($-L)/(O?L-B:B-L))||0)},a:function(P){return P<0?Math.ceil(P)||0:Math.floor(P)},p:function(P){return{M:f,y:h,w:c,d:u,D:v,h:l,m:s,s:o,ms:a,Q:d}[P]||String(P||"").toLowerCase().replace(/s$/,"")},u:function(P){return P===void 0}},w="en",S={};S[w]=y;var C=function(P){return P instanceof M},_=function(P,F,$){var R;if(!P)return w;if(typeof P=="string")S[P]&&(R=P),F&&(S[P]=F,R=P);else{var L=P.name;S[L]=P,R=L}return!$&&R&&(w=R),R||!$&&w},T=function(P,F){if(C(P))return P.clone();var $=typeof F=="object"?F:{};return $.date=P,$.args=arguments,new M($)},E=x;E.l=_,E.i=C,E.w=function(P,F){return T(P,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var M=function(){function P($){this.$L=_($.locale,null,!0),this.parse($)}var F=P.prototype;return F.parse=function($){this.$d=function(R){var L=R.date,O=R.utc;if(L===null)return new Date(NaN);if(E.u(L))return new Date;if(L instanceof Date)return new Date(L);if(typeof L=="string"&&!/Z$/i.test(L)){var B=L.match(g);if(B){var U=B[2]-1||0,W=(B[7]||"0").substring(0,3);return O?new Date(Date.UTC(B[1],U,B[3]||1,B[4]||0,B[5]||0,B[6]||0,W)):new Date(B[1],U,B[3]||1,B[4]||0,B[5]||0,B[6]||0,W)}}return new Date(L)}($),this.$x=$.x||{},this.init()},F.init=function(){var $=this.$d;this.$y=$.getFullYear(),this.$M=$.getMonth(),this.$D=$.getDate(),this.$W=$.getDay(),this.$H=$.getHours(),this.$m=$.getMinutes(),this.$s=$.getSeconds(),this.$ms=$.getMilliseconds()},F.$utils=function(){return E},F.isValid=function(){return this.$d.toString()!==p},F.isSame=function($,R){var L=T($);return this.startOf(R)<=L&&L<=this.endOf(R)},F.isAfter=function($,R){return T($)<this.startOf(R)},F.isBefore=function($,R){return this.endOf(R)<T($)},F.$g=function($,R,L){return E.u($)?this[R]:this.set(L,$)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function($,R){var L=this,O=!!E.u(R)||R,B=E.p($),U=function(ue,Ee){var De=E.w(L.$u?Date.UTC(L.$y,Ee,ue):new Date(L.$y,Ee,ue),L);return O?De:De.endOf(u)},W=function(ue,Ee){return E.w(L.toDate()[ue].apply(L.toDate("s"),(O?[0,0,0,0]:[23,59,59,999]).slice(Ee)),L)},X=this.$W,ae=this.$M,Z=this.$D,Y="set"+(this.$u?"UTC":"");switch(B){case h:return O?U(1,0):U(31,11);case f:return O?U(1,ae):U(0,ae+1);case c:var fe=this.$locale().weekStart||0,le=(X<fe?X+7:X)-fe;return U(O?Z-le:Z+(6-le),ae);case u:case v:return W(Y+"Hours",0);case l:return W(Y+"Minutes",1);case s:return W(Y+"Seconds",2);case o:return W(Y+"Milliseconds",3);default:return this.clone()}},F.endOf=function($){return this.startOf($,!1)},F.$set=function($,R){var L,O=E.p($),B="set"+(this.$u?"UTC":""),U=(L={},L[u]=B+"Date",L[v]=B+"Date",L[f]=B+"Month",L[h]=B+"FullYear",L[l]=B+"Hours",L[s]=B+"Minutes",L[o]=B+"Seconds",L[a]=B+"Milliseconds",L)[O],W=O===u?this.$D+(R-this.$W):R;if(O===f||O===h){var X=this.clone().set(v,1);X.$d[U](W),X.init(),this.$d=X.set(v,Math.min(this.$D,X.daysInMonth())).$d}else U&&this.$d[U](W);return this.init(),this},F.set=function($,R){return this.clone().$set($,R)},F.get=function($){return this[E.p($)]()},F.add=function($,R){var L,O=this;$=Number($);var B=E.p(R),U=function(ae){var Z=T(O);return E.w(Z.date(Z.date()+Math.round(ae*$)),O)};if(B===f)return this.set(f,this.$M+$);if(B===h)return this.set(h,this.$y+$);if(B===u)return U(1);if(B===c)return U(7);var W=(L={},L[s]=n,L[l]=i,L[o]=e,L)[B]||1,X=this.$d.getTime()+$*W;return E.w(X,this)},F.subtract=function($,R){return this.add(-1*$,R)},F.format=function($){var R=this,L=this.$locale();if(!this.isValid())return L.invalidDate||p;var O=$||"YYYY-MM-DDTHH:mm:ssZ",B=E.z(this),U=this.$H,W=this.$m,X=this.$M,ae=L.weekdays,Z=L.months,Y=function(Ee,De,je,ke){return Ee&&(Ee[De]||Ee(R,O))||je[De].substr(0,ke)},fe=function(Ee){return E.s(U%12||12,Ee,"0")},le=L.meridiem||function(Ee,De,je){var ke=Ee<12?"AM":"PM";return je?ke.toLowerCase():ke},ue={YY:String(this.$y).slice(-2),YYYY:this.$y,M:X+1,MM:E.s(X+1,2,"0"),MMM:Y(L.monthsShort,X,Z,3),MMMM:Y(Z,X),D:this.$D,DD:E.s(this.$D,2,"0"),d:String(this.$W),dd:Y(L.weekdaysMin,this.$W,ae,2),ddd:Y(L.weekdaysShort,this.$W,ae,3),dddd:ae[this.$W],H:String(U),HH:E.s(U,2,"0"),h:fe(1),hh:fe(2),a:le(U,W,!0),A:le(U,W,!1),m:String(W),mm:E.s(W,2,"0"),s:String(this.$s),ss:E.s(this.$s,2,"0"),SSS:E.s(this.$ms,3,"0"),Z:B};return O.replace(m,function(Ee,De){return De||ue[Ee]||B.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function($,R,L){var O,B=E.p(R),U=T($),W=(U.utcOffset()-this.utcOffset())*n,X=this-U,ae=E.m(this,U);return ae=(O={},O[h]=ae/12,O[f]=ae,O[d]=ae/3,O[c]=(X-W)/6048e5,O[u]=(X-W)/864e5,O[l]=X/i,O[s]=X/n,O[o]=X/e,O)[B]||X,L?ae:E.a(ae)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return S[this.$L]},F.locale=function($,R){if(!$)return this.$L;var L=this.clone(),O=_($,R,!0);return O&&(L.$L=O),L},F.clone=function(){return E.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},P}(),k=M.prototype;return T.prototype=k,[["$ms",a],["$s",o],["$m",s],["$H",l],["$W",u],["$M",f],["$y",h],["$D",v]].forEach(function(P){k[P[1]]=function(F){return this.$g(F,P[0],P[1])}}),T.extend=function(P,F){return P.$i||(P(F,M,T),P.$i=!0),T},T.locale=_,T.isDayjs=C,T.unix=function(P){return T(1e3*P)},T.en=S[w],T.Ls=S,T.p={},T})}),zi;(function(r){r.FORE="fore",r.MID="mid",r.BG="bg"})(zi||(zi={}));var Nt;(function(r){r.TOP="top",r.TOP_LEFT="top-left",r.TOP_RIGHT="top-right",r.RIGHT="right",r.RIGHT_TOP="right-top",r.RIGHT_BOTTOM="right-bottom",r.LEFT="left",r.LEFT_TOP="left-top",r.LEFT_BOTTOM="left-bottom",r.BOTTOM="bottom",r.BOTTOM_LEFT="bottom-left",r.BOTTOM_RIGHT="bottom-right",r.RADIUS="radius",r.CIRCLE="circle",r.NONE="none"})(Nt||(Nt={}));var Ea;(function(r){r.AXIS="axis",r.GRID="grid",r.LEGEND="legend",r.TOOLTIP="tooltip",r.ANNOTATION="annotation",r.SLIDER="slider",r.SCROLLBAR="scrollbar",r.OTHER="other"})(Ea||(Ea={}));var zp={FORE:3,MID:2,BG:1},Nr;(function(r){r.BEFORE_RENDER="beforerender",r.AFTER_RENDER="afterrender",r.BEFORE_PAINT="beforepaint",r.AFTER_PAINT="afterpaint",r.BEFORE_CHANGE_DATA="beforechangedata",r.AFTER_CHANGE_DATA="afterchangedata",r.BEFORE_CLEAR="beforeclear",r.AFTER_CLEAR="afterclear",r.BEFORE_DESTROY="beforedestroy",r.BEFORE_CHANGE_SIZE="beforechangesize",r.AFTER_CHANGE_SIZE="afterchangesize"})(Nr||(Nr={}));var Gp;(function(r){r.BEFORE_DRAW_ANIMATE="beforeanimate",r.AFTER_DRAW_ANIMATE="afteranimate"})(Gp||(Gp={}));var Uo;(function(r){r.MOUSE_ENTER="plot:mouseenter",r.MOUSE_DOWN="plot:mousedown",r.MOUSE_MOVE="plot:mousemove",r.MOUSE_UP="plot:mouseup",r.MOUSE_LEAVE="plot:mouseleave",r.TOUCH_START="plot:touchstart",r.TOUCH_MOVE="plot:touchmove",r.TOUCH_END="plot:touchend",r.TOUCH_CANCEL="plot:touchcancel",r.CLICK="plot:click",r.DBLCLICK="plot:dblclick",r.CONTEXTMENU="plot:contextmenu",r.LEAVE="plot:leave",r.ENTER="plot:enter"})(Uo||(Uo={}));var xC;(function(r){r.ACTIVE="active",r.INACTIVE="inactive",r.SELECTED="selected",r.DEFAULT="default"})(xC||(xC={}));var I0=["color","shape","size"],Nn="_origin",EK=1,_K=1,TK=.25,AK={};function ZYe(r){var t=AK[r];if(!t)throw new Error("G engine '"+r+"' is not exist, please register it at first.");return t}function MK(r,t){AK[r]=t}function QYe(r){var t=getComputedStyle(r);return{width:(r.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10),height:(r.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)}}function kK(r){return typeof r=="number"&&!isNaN(r)}function IK(r,t,e,n){var i=e,a=n;if(t){var o=QYe(r);i=o.width?o.width:i,a=o.height?o.height:a}return{width:Math.max(kK(i)?i:EK,EK),height:Math.max(kK(a)?a:_K,_K)}}function JYe(r){var t=r.parentNode;t&&t.removeChild(r)}var VP=function(r){Te(t,r);function t(e){var n=r.call(this)||this;n.destroyed=!1;var i=e.visible,a=i===void 0?!0:i;return n.visible=a,n}return t.prototype.show=function(){var e=this.visible;e||this.changeVisible(!0)},t.prototype.hide=function(){var e=this.visible;e&&this.changeVisible(!1)},t.prototype.destroy=function(){this.off(),this.destroyed=!0},t.prototype.changeVisible=function(e){this.visible!==e&&(this.visible=e)},t}(fm),PK=0,eXe=1/2,tXe=1/2,rXe=.05,wC=function(){function r(t){var e=t.xField,n=t.yField,i=t.adjustNames,a=i===void 0?["x","y"]:i;this.adjustNames=a,this.xField=e,this.yField=n}return r.prototype.isAdjust=function(t){return this.adjustNames.indexOf(t)>=0},r.prototype.getAdjustRange=function(t,e,n){var i=this.yField,a=n.indexOf(e),o=n.length,s,l;return!i&&this.isAdjust("y")?(s=0,l=1):o>1?(s=n[a===0?0:a-1],l=n[a===o-1?o-1:a+1],a!==0?s+=(e-s)/2:s-=(l-e)/2,a!==o-1?l-=(l-e)/2:l+=(e-n[o-2])/2):(s=e===0?0:e-.5,l=e===0?1:e+.5),{pre:s,next:l}},r.prototype.adjustData=function(t,e){var n=this,i=this.getDimValues(e);G(t,function(a,o){G(i,function(s,l){n.adjustDim(l,s,a,o)})})},r.prototype.groupData=function(t,e){return G(t,function(n){n[e]===void 0&&(n[e]=PK)}),ao(t,e)},r.prototype.adjustDim=function(t,e,n,i){},r.prototype.getDimValues=function(t){var e=this,n=e.xField,i=e.yField,a={},o=[];if(n&&this.isAdjust("x")&&o.push(n),i&&this.isAdjust("y")&&o.push(i),o.forEach(function(l){a[l]=As(t,l).sort(function(u,c){return u-c})}),!i&&this.isAdjust("y")){var s="y";a[s]=[PK,1]}return a},r}(),DK={},RK=function(r){return DK[r.toLowerCase()]},SC=function(r,t){if(RK(r))throw new Error("Adjust type '"+r+"' existed.");DK[r.toLowerCase()]=t};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var HP=function(r,t){return HP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},HP(r,t)};function CC(r,t){HP(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var eu=function(){return eu=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},eu.apply(this,arguments)},nXe=function(r){CC(t,r);function t(e){var n=r.call(this,e)||this;n.cacheMap={},n.adjustDataArray=[],n.mergeData=[];var i=e.marginRatio,a=i===void 0?eXe:i,o=e.dodgeRatio,s=o===void 0?tXe:o,l=e.dodgeBy,u=e.intervalPadding,c=e.dodgePadding,f=e.xDimensionLength,d=e.groupNum,h=e.defaultSize,v=e.maxColumnWidth,p=e.minColumnWidth,g=e.columnWidthRatio;return n.marginRatio=a,n.dodgeRatio=s,n.dodgeBy=l,n.intervalPadding=u,n.dodgePadding=c,n.xDimensionLegenth=f,n.groupNum=d,n.defaultSize=h,n.maxColumnWidth=v,n.minColumnWidth=p,n.columnWidthRatio=g,n}return t.prototype.process=function(e){var n=Mr(e),i=Do(n),a=this.dodgeBy,o=a?b3(i,a):n;return this.cacheMap={},this.adjustDataArray=o,this.mergeData=i,this.adjustData(o,i),this.adjustDataArray=[],this.mergeData=[],n},t.prototype.adjustDim=function(e,n,i,a){var o=this,s=this.getDistribution(e),l=this.groupData(i,e);return G(l,function(u,c){var f;n.length===1?f={pre:n[0]-1,next:n[0]+1}:f=o.getAdjustRange(e,parseFloat(c),n),G(u,function(d){var h=d[e],v=s[h],p=v.indexOf(a);d[e]=o.getDodgeOffset(f,p,v.length)})}),[]},t.prototype.getDodgeOffset=function(e,n,i){var a=this,o=a.dodgeRatio,s=a.marginRatio,l=a.intervalPadding,u=a.dodgePadding,c=e.pre,f=e.next,d=f-c,h;if(!Je(l)&&Je(u)&&l>=0){var v=this.getIntervalOnlyOffset(i,n);h=c+v}else if(!Je(u)&&Je(l)&&u>=0){var v=this.getDodgeOnlyOffset(i,n);h=c+v}else if(!Je(l)&&!Je(u)&&l>=0&&u>=0){var v=this.getIntervalAndDodgeOffset(i,n);h=c+v}else{var p=d*o/i,g=s*p,v=1/2*(d-i*p-(i-1)*g)+((n+1)*p+n*g)-1/2*p-1/2*d;h=(c+f)/2+v}return h},t.prototype.getIntervalOnlyOffset=function(e,n){var i=this,a=i.defaultSize,o=i.intervalPadding,s=i.xDimensionLegenth,l=i.groupNum,u=i.dodgeRatio,c=i.maxColumnWidth,f=i.minColumnWidth,d=i.columnWidthRatio,h=o/s,v=(1-(l-1)*h)/l*u/(e-1),p=((1-h*(l-1))/l-v*(e-1))/e;if(p=Je(d)?p:1/l/e*d,!Je(c)){var g=c/s;p=Math.min(p,g)}if(!Je(f)){var m=f/s;p=Math.max(p,m)}p=a?a/s:p,v=((1-(l-1)*h)/l-e*p)/(e-1);var y=((1/2+n)*p+n*v+1/2*h)*l-h/2;return y},t.prototype.getDodgeOnlyOffset=function(e,n){var i=this,a=i.defaultSize,o=i.dodgePadding,s=i.xDimensionLegenth,l=i.groupNum,u=i.marginRatio,c=i.maxColumnWidth,f=i.minColumnWidth,d=i.columnWidthRatio,h=o/s,v=1*u/(l-1),p=((1-v*(l-1))/l-h*(e-1))/e;if(p=d?1/l/e*d:p,!Je(c)){var g=c/s;p=Math.min(p,g)}if(!Je(f)){var m=f/s;p=Math.max(p,m)}p=a?a/s:p,v=(1-(p*e+h*(e-1))*l)/(l-1);var y=((1/2+n)*p+n*h+1/2*v)*l-v/2;return y},t.prototype.getIntervalAndDodgeOffset=function(e,n){var i=this,a=i.intervalPadding,o=i.dodgePadding,s=i.xDimensionLegenth,l=i.groupNum,u=a/s,c=o/s,f=((1-u*(l-1))/l-c*(e-1))/e,d=((1/2+n)*f+n*c+1/2*u)*l-u/2;return d},t.prototype.getDistribution=function(e){var n=this.adjustDataArray,i=this.cacheMap,a=i[e];return a||(a={},G(n,function(o,s){var l=As(o,e);l.length||l.push(0),G(l,function(u){a[u]||(a[u]=[]),a[u].push(s)})}),i[e]=a),a},t}(wC);function iXe(r,t){return(t-r)*Math.random()+r}var aXe=function(r){CC(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.process=function(e){var n=Mr(e),i=Do(n);return this.adjustData(n,i),n},t.prototype.adjustDim=function(e,n,i){var a=this,o=this.groupData(i,e);return G(o,function(s,l){return a.adjustGroup(s,e,parseFloat(l),n)})},t.prototype.getAdjustOffset=function(e){var n=e.pre,i=e.next,a=(i-n)*rXe;return iXe(n+a,i-a)},t.prototype.adjustGroup=function(e,n,i,a){var o=this,s=this.getAdjustRange(n,i,a);return G(e,function(l){l[n]=o.getAdjustOffset(s)}),e},t}(wC),WP=P3,oXe=function(r){CC(t,r);function t(e){var n=r.call(this,e)||this,i=e.adjustNames,a=i===void 0?["y"]:i,o=e.height,s=o===void 0?NaN:o,l=e.size,u=l===void 0?10:l,c=e.reverseOrder,f=c===void 0?!1:c;return n.adjustNames=a,n.height=s,n.size=u,n.reverseOrder=f,n}return t.prototype.process=function(e){var n=this,i=n.yField,a=n.reverseOrder,o=i?this.processStack(e):this.processOneDimStack(e);return a?this.reverse(o):o},t.prototype.reverse=function(e){return e.slice(0).reverse()},t.prototype.processStack=function(e){var n=this,i=n.xField,a=n.yField,o=n.reverseOrder,s=o?this.reverse(e):e,l=new WP,u=new WP;return s.map(function(c){return c.map(function(f){var d,h=ne(f,i,0),v=ne(f,[a]),p=h.toString();if(v=qe(v)?v[1]:v,!Je(v)){var g=v>=0?l:u;g.has(p)||g.set(p,0);var m=g.get(p),y=v+m;return g.set(p,y),eu(eu({},f),(d={},d[a]=[m,y],d))}return f})})},t.prototype.processOneDimStack=function(e){var n=this,i=this,a=i.xField,o=i.height,s=i.reverseOrder,l="y",u=s?this.reverse(e):e,c=new WP;return u.map(function(f){return f.map(function(d){var h,v=n.size,p=d[a],g=v*2/o;c.has(p)||c.set(p,g/2);var m=c.get(p);return c.set(p,m+g),eu(eu({},d),(h={},h[l]=m,h))})})},t}(wC),sXe=function(r){CC(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.process=function(e){var n=Do(e),i=this,a=i.xField,o=i.yField,s=this.getXValuesMaxMap(n),l=Math.max.apply(Math,Object.keys(s).map(function(u){return s[u]}));return Gn(e,function(u){return Gn(u,function(c){var f,d,h=c[o],v=c[a];if(qe(h)){var p=(l-s[v])/2;return eu(eu({},c),(f={},f[o]=Gn(h,function(m){return p+m}),f))}var g=(l-h)/2;return eu(eu({},c),(d={},d[o]=[g,h+g],d))})})},t.prototype.getXValuesMaxMap=function(e){var n=this,i=this,a=i.xField,o=i.yField,s=ao(e,function(l){return l[a]});return M3(s,function(l){return n.getDimMaxValue(l,o)})},t.prototype.getDimMaxValue=function(e,n){var i=Gn(e,function(o){return ne(o,n,[])}),a=Do(i);return Math.max.apply(Math,a)},t}(wC);SC("Dodge",nXe);SC("Jitter",aXe);SC("Stack",oXe);SC("Symmetric",sXe);var OK=function(r,t){return rt(t)?t:r.invert(r.scale(t))},P0=function(){function r(t){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(t)}return r.prototype.mapping=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e.map(function(a,o){return t._toOriginParam(a,t.scales[o])});return this.callback.apply(this,i)},r.prototype.getLinearValue=function(t){var e=this.values.length-1,n=Math.floor(e*t),i=e*t-n,a=this.values[n],o=n===e?a:this.values[n+1];return a+(o-a)*i},r.prototype.getNames=function(){for(var t=this.scales,e=this.names,n=Math.min(t.length,e.length),i=[],a=0;a<n;a+=1)i.push(e[a]);return i},r.prototype.getFields=function(){return this.scales.map(function(t){return t.field})},r.prototype.getScale=function(t){return this.scales[this.names.indexOf(t)]},r.prototype.defaultCallback=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.length===0?this.values:e.map(function(i,a){var o=t.scales[a];return o.type==="identity"?o.values[0]:t._getAttributeValue(o,i)})},r.prototype._parseCfg=function(t){var e=this,n=t.type,i=n===void 0?"base":n,a=t.names,o=a===void 0?[]:a,s=t.scales,l=s===void 0?[]:s,u=t.values,c=u===void 0?[]:u,f=t.callback;this.type=i,this.scales=l,this.values=c,this.names=o,this.callback=function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];if(f){var v=f.apply(void 0,d);if(!Je(v))return[v]}return e.defaultCallback.apply(e,d)}},r.prototype._getAttributeValue=function(t,e){if(t.isCategory&&!this.linear){var n=t.translate(e);return this.values[n%this.values.length]}var i=t.scale(e);return this.getLinearValue(i)},r.prototype._toOriginParam=function(t,e){return e.isLinear?t:qe(t)?t.map(function(n){return OK(e,n)}):OK(e,t)},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jP=function(r,t){return jP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},jP(r,t)};function D0(r,t){jP(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var lXe=/rgba?\(([\s.,0-9]+)\)/,uXe=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,cXe=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,fXe=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,dXe=function(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)},hXe=function(){var r=document.createElement("i");return r.title="Web Colour Picker",r.style.display="none",document.body.appendChild(r),r},YP=function(r,t,e,n){return r[n]+(t[n]-r[n])*e};function LK(r){return"#"+XP(r[0])+XP(r[1])+XP(r[2])}var FK=function(r){return[parseInt(r.substr(1,2),16),parseInt(r.substr(3,2),16),parseInt(r.substr(5,2),16)]},XP=function(r){var t=Math.round(r).toString(16);return t.length===1?"0"+t:t},vXe=function(r,t){var e=isNaN(Number(t))||t<0?0:t>1?1:Number(t),n=r.length-1,i=Math.floor(n*e),a=n*e-i,o=r[i],s=i===n?o:r[i+1];return LK([YP(o,s,a,0),YP(o,s,a,1),YP(o,s,a,2)])},EC,NK=function(r){if(r[0]==="#"&&r.length===7)return r;EC||(EC=hXe()),EC.style.color=r;var t=document.defaultView.getComputedStyle(EC,"").getPropertyValue("color"),e=lXe.exec(t),n=e[1].split(/\s*,\s*/).map(function(i){return Number(i)});return t=LK(n),t},pXe=function(r){var t=rt(r)?r.split("-"):r,e=Gn(t,function(n){return FK(n.indexOf("#")===-1?NK(n):n)});return function(n){return vXe(e,n)}},gXe=function(r){if(dXe(r)){var t,e=void 0;if(r[0]==="l"){var n=uXe.exec(r),i=+n[1]+90;e=n[2],t="linear-gradient("+i+"deg, "}else if(r[0]==="r"){t="radial-gradient(";var n=cXe.exec(r);e=n[4]}var a=e.match(fXe);return G(a,function(o,s){var l=o.split(":");t+=l[1]+" "+l[0]*100+"%",s!==a.length-1&&(t+=", ")}),t+=")",t}return r},uf={rgb2arr:FK,gradient:pXe,toRGB:Jf(NK),toCSSGradient:gXe},mXe=function(r){D0(t,r);function t(e){var n=r.call(this,e)||this;return n.type="color",n.names=["color"],rt(n.values)&&(n.linear=!0),n.gradient=uf.gradient(n.values),n}return t.prototype.getLinearValue=function(e){return this.gradient(e)},t}(P0),yXe=function(r){D0(t,r);function t(e){var n=r.call(this,e)||this;return n.type="opacity",n.names=["opacity"],n}return t}(P0),bXe=function(r){D0(t,r);function t(e){var n=r.call(this,e)||this;return n.names=["x","y"],n.type="position",n}return t.prototype.mapping=function(e,n){var i=this.scales,a=i[0],o=i[1];return Je(e)||Je(n)?[]:[qe(e)?e.map(function(s){return a.scale(s)}):a.scale(e),qe(n)?n.map(function(s){return o.scale(s)}):o.scale(n)]},t}(P0),xXe=function(r){D0(t,r);function t(e){var n=r.call(this,e)||this;return n.type="shape",n.names=["shape"],n}return t.prototype.getLinearValue=function(e){var n=Math.round((this.values.length-1)*e);return this.values[n]},t}(P0),wXe=function(r){D0(t,r);function t(e){var n=r.call(this,e)||this;return n.type="size",n.names=["size"],n}return t}(P0),BK={},$K=function(r){return BK[r.toLowerCase()]},R0=function(r,t){if($K(r))throw new Error("Attribute type '"+r+"' existed.");BK[r.toLowerCase()]=t};R0("Color",mXe);R0("Opacity",yXe);R0("Position",bXe);R0("Shape",xXe);R0("Size",wXe);var qP=function(){function r(t){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var e=t.start,n=t.end,i=t.matrix,a=i===void 0?[1,0,0,0,1,0,0,0,1]:i,o=t.isTransposed,s=o===void 0?!1:o;this.start=e,this.end=n,this.matrix=a,this.originalMatrix=Jn([],a),this.isTransposed=s}return r.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},r.prototype.update=function(t){$t(this,t),this.initial()},r.prototype.convertDim=function(t,e){var n,i=this[e],a=i.start,o=i.end;return this.isReflect(e)&&(n=[o,a],a=n[0],o=n[1]),a+t*(o-a)},r.prototype.invertDim=function(t,e){var n,i=this[e],a=i.start,o=i.end;return this.isReflect(e)&&(n=[o,a],a=n[0],o=n[1]),(t-a)/(o-a)},r.prototype.applyMatrix=function(t,e,n){n===void 0&&(n=0);var i=this.matrix,a=[t,e,n];return kl(a,a,i),a},r.prototype.invertMatrix=function(t,e,n){n===void 0&&(n=0);var i=this.matrix,a=Wx([0,0,0,0,0,0,0,0,0],i),o=[t,e,n];return a&&kl(o,o,a),o},r.prototype.convert=function(t){var e=this.convertPoint(t),n=e.x,i=e.y,a=this.applyMatrix(n,i,1);return{x:a[0],y:a[1]}},r.prototype.invert=function(t){var e=this.invertMatrix(t.x,t.y,1);return this.invertPoint({x:e[0],y:e[1]})},r.prototype.rotate=function(t){var e=this.matrix,n=this.center;return Mv(e,e,[-n.x,-n.y]),vT(e,e,t),Mv(e,e,[n.x,n.y]),this},r.prototype.reflect=function(t){return t==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},r.prototype.scale=function(t,e){var n=this.matrix,i=this.center;return Mv(n,n,[-i.x,-i.y]),Y3(n,n,[t,e]),Mv(n,n,[i.x,i.y]),this},r.prototype.translate=function(t,e){var n=this.matrix;return Mv(n,n,[t,e]),this},r.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},r.prototype.getCenter=function(){return this.center},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.getRadius=function(){return this.radius},r.prototype.isReflect=function(t){return t==="x"?this.isReflectX:this.isReflectY},r.prototype.resetMatrix=function(t){this.matrix=t||Jn([],this.originalMatrix)},r}(),zK=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;return n.isRect=!0,n.type="cartesian",n.initial(),n}return t.prototype.initial=function(){r.prototype.initial.call(this);var e=this.start,n=this.end;this.x={start:e.x,end:n.x},this.y={start:e.y,end:n.y}},t.prototype.convertPoint=function(e){var n,i=e.x,a=e.y;return this.isTransposed&&(n=[a,i],i=n[0],a=n[1]),{x:this.convertDim(i,"x"),y:this.convertDim(a,"y")}},t.prototype.invertPoint=function(e){var n,i=this.invertDim(e.x,"x"),a=this.invertDim(e.y,"y");return this.isTransposed&&(n=[a,i],i=n[0],a=n[1]),{x:i,y:a}},t}(qP),SXe=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;n.isHelix=!0,n.type="helix";var i=e.startAngle,a=i===void 0?1.25*Math.PI:i,o=e.endAngle,s=o===void 0?7.25*Math.PI:o,l=e.innerRadius,u=l===void 0?0:l,c=e.radius;return n.startAngle=a,n.endAngle=s,n.innerRadius=u,n.radius=c,n.initial(),n}return t.prototype.initial=function(){r.prototype.initial.call(this);var e=(this.endAngle-this.startAngle)/(2*Math.PI)+1,n=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(n=n*this.radius),this.d=Math.floor(n*(1-this.innerRadius)/e),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*n,end:this.innerRadius*n+this.d*.99}},t.prototype.convertPoint=function(e){var n,i=e.x,a=e.y;this.isTransposed&&(n=[a,i],i=n[0],a=n[1]);var o=this.convertDim(i,"x"),s=this.a*o,l=this.convertDim(a,"y");return{x:this.center.x+Math.cos(o)*(s+l),y:this.center.y+Math.sin(o)*(s+l)}},t.prototype.invertPoint=function(e){var n,i=this.d+this.y.start,a=W3([0,0],[e.x,e.y],[this.center.x,this.center.y]),o=pT(a,[1,0],!0),s=o*this.a;Av(a)<s&&(s=Av(a));var l=Math.floor((Av(a)-s)/i);o=2*l*Math.PI+o;var u=this.a*o,c=Av(a)-u;c=pa(c,0)?0:c;var f=this.invertDim(o,"x"),d=this.invertDim(c,"y");return f=pa(f,0)?0:f,d=pa(d,0)?0:d,this.isTransposed&&(n=[d,f],f=n[0],d=n[1]),{x:f,y:d}},t}(qP),CXe=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;n.isPolar=!0,n.type="polar";var i=e.startAngle,a=i===void 0?-Math.PI/2:i,o=e.endAngle,s=o===void 0?Math.PI*3/2:o,l=e.innerRadius,u=l===void 0?0:l,c=e.radius;return n.startAngle=a,n.endAngle=s,n.innerRadius=u,n.radius=c,n.initial(),n}return t.prototype.initial=function(){for(r.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var e=this.getOneBox(),n=e.maxX-e.minX,i=e.maxY-e.minY,a=Math.abs(e.minX)/n,o=Math.abs(e.minY)/i,s;this.height/i>this.width/n?(s=this.width/n,this.circleCenter={x:this.center.x-(.5-a)*this.width,y:this.center.y-(.5-o)*s*i}):(s=this.height/i,this.circleCenter={x:this.center.x-(.5-a)*s*n,y:this.center.y-(.5-o)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=s*this.radius:(this.radius<=0||this.radius>s)&&(this.polarRadius=s):this.polarRadius=s,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},t.prototype.getRadius=function(){return this.polarRadius},t.prototype.convertPoint=function(e){var n,i=this.getCenter(),a=e.x,o=e.y;return this.isTransposed&&(n=[o,a],a=n[0],o=n[1]),a=this.convertDim(a,"x"),o=this.convertDim(o,"y"),{x:i.x+Math.cos(a)*o,y:i.y+Math.sin(a)*o}},t.prototype.invertPoint=function(e){var n,i=this.getCenter(),a=[e.x-i.x,e.y-i.y],o=this,s=o.startAngle,l=o.endAngle;this.isReflect("x")&&(n=[l,s],s=n[0],l=n[1]);var u=[1,0,0,0,1,0,0,0,1];vT(u,u,s);var c=[1,0,0];kl(c,c,u);var f=[c[0],c[1]],d=pT(f,a,l<s);pa(d,Math.PI*2)&&(d=0);var h=Av(a),v=d/(l-s);v=l-s>0?v:-v;var p=this.invertDim(h,"y"),g={x:0,y:0};return g.x=this.isTransposed?p:v,g.y=this.isTransposed?v:p,g},t.prototype.getCenter=function(){return this.circleCenter},t.prototype.getOneBox=function(){var e=this.startAngle,n=this.endAngle;if(Math.abs(n-e)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var i=[0,Math.cos(e),Math.cos(n)],a=[0,Math.sin(e),Math.sin(n)],o=Math.min(e,n);o<Math.max(e,n);o+=Math.PI/18)i.push(Math.cos(o)),a.push(Math.sin(o));return{minX:Math.min.apply(Math,i),maxX:Math.max.apply(Math,i),minY:Math.min.apply(Math,a),maxY:Math.max.apply(Math,a)}},t}(qP),GK={},EXe=function(r){return GK[r.toLowerCase()]},_C=function(r,t){GK[r.toLowerCase()]=t};_C("rect",zK);_C("cartesian",zK);_C("polar",CXe);_C("helix",SXe);var O0=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,_Xe=new RegExp("([a-z])["+O0+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+O0+"]*,?["+O0+"]*)+)","ig"),TXe=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+O0+"]*,?["+O0+"]*","ig"),TC=function(r){if(!r)return null;if(qe(r))return r;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(r).replace(_Xe,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(TXe,function(l,u){u&&o.push(+u)}),s==="m"&&o.length>2&&(e.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&e.push([i,o[0]]),s==="r")e.push([i].concat(o));else for(;o.length>=t[s]&&(e.push([i].concat(o.splice(0,t[s]))),!!t[s]););return r}),e},AXe=function(r,t){if(r.length!==t.length)return!1;var e=!0;return G(r,function(n,i){if(n!==t[i])return e=!1,!1}),e};function MXe(r,t,e){var n=null,i=e;return t<i&&(i=t,n="add"),r<i&&(i=r,n="del"),{type:n,min:i}}var kXe=function(r,t){var e=r.length,n=t.length,i,a,o=0;if(e===0||n===0)return null;for(var s=[],l=0;l<=e;l++)s[l]=[],s[l][0]={min:l};for(var u=0;u<=n;u++)s[0][u]={min:u};for(var l=1;l<=e;l++){i=r[l-1];for(var u=1;u<=n;u++){a=t[u-1],AXe(i,a)?o=0:o=1;var c=s[l-1][u].min+1,f=s[l][u-1].min+1,d=s[l-1][u-1].min+o;s[l][u]=MXe(c,f,d)}}return s},IXe=function(r,t){var e=kXe(r,t),n=r.length,i=t.length,a=[],o=1,s=1;if(e[n][i].min!==n){for(var l=1;l<=n;l++){var u=e[l][l].min;s=l;for(var c=o;c<=i;c++)e[l][c].min<u&&(u=e[l][c].min,s=c);o=s,e[l][o].type&&a.push({index:l-1,type:e[l][o].type})}for(var l=a.length-1;l>=0;l--)o=a[l].index,a[l].type==="add"?r.splice(o,0,[].concat(r[o])):r.splice(o,1)}n=r.length;var f=i-n;if(n<i)for(var l=0;l<f;l++)r[n-1][0]==="z"||r[n-1][0]==="Z"?r.splice(n-2,0,r[n-2]):r.push(r[n-1]),n+=1;return r};function KP(r,t,e){for(var n=[].concat(r),i,a=1/(e+1),o=UK(t)[0],s=1;s<=e;s++)a*=s,i=Math.floor(r.length*a),i===0?n.unshift([o[0]*a+r[i][0]*(1-a),o[1]*a+r[i][1]*(1-a)]):n.splice(i,0,[o[0]*a+r[i][0]*(1-a),o[1]*a+r[i][1]*(1-a)]);return n}function UK(r){var t=[];switch(r[0]){case"M":t.push([r[1],r[2]]);break;case"L":t.push([r[1],r[2]]);break;case"A":t.push([r[6],r[7]]);break;case"Q":t.push([r[3],r[4]]),t.push([r[1],r[2]]);break;case"T":t.push([r[1],r[2]]);break;case"C":t.push([r[5],r[6]]),t.push([r[1],r[2]]),t.push([r[3],r[4]]);break;case"S":t.push([r[3],r[4]]),t.push([r[1],r[2]]);break;case"H":t.push([r[1],r[1]]);break;case"V":t.push([r[1],r[1]]);break}return t}var VK=function(r,t){if(r.length<=1)return r;for(var e,n=0;n<t.length;n++)if(r[n][0]!==t[n][0])switch(e=UK(r[n]),t[n][0]){case"M":r[n]=["M"].concat(e[0]);break;case"L":r[n]=["L"].concat(e[0]);break;case"A":r[n]=[].concat(t[n]),r[n][6]=e[0][0],r[n][7]=e[0][1];break;case"Q":if(e.length<2)if(n>0)e=KP(e,r[n-1],1);else{r[n]=t[n];break}r[n]=["Q"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;case"T":r[n]=["T"].concat(e[0]);break;case"C":if(e.length<3)if(n>0)e=KP(e,r[n-1],2);else{r[n]=t[n];break}r[n]=["C"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;case"S":if(e.length<2)if(n>0)e=KP(e,r[n-1],1);else{r[n]=t[n];break}r[n]=["S"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;default:r[n]=t[n]}return r},HK=function(){function r(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return r.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},r.prototype.stopPropagation=function(){this.propagationStopped=!0},r.prototype.toString=function(){var t=this.type;return"[Event (type="+t+")]"},r.prototype.save=function(){},r.prototype.restore=function(){},r}();function WK(r,t){var e=r.indexOf(t);e!==-1&&r.splice(e,1)}var jK=typeof window!="undefined"&&typeof window.document!="undefined";function YK(r,t){if(r.isCanvas())return!0;for(var e=t.getParent(),n=!1;e;){if(e===r){n=!0;break}e=e.getParent()}return n}function XK(r){return r.cfg.visible&&r.cfg.capture}var qK=function(r){Te(t,r);function t(e){var n=r.call(this)||this;n.destroyed=!1;var i=n.getDefaultCfg();return n.cfg=$t(i,e),n}return t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,n){this.cfg[e]=n},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t}(fm);function KK(r,t){var e=[],n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],l=r[5],u=r[6],c=r[7],f=r[8],d=t[0],h=t[1],v=t[2],p=t[3],g=t[4],m=t[5],y=t[6],b=t[7],x=t[8];return e[0]=d*n+h*o+v*u,e[1]=d*i+h*s+v*c,e[2]=d*a+h*l+v*f,e[3]=p*n+g*o+m*u,e[4]=p*i+g*s+m*c,e[5]=p*a+g*l+m*f,e[6]=y*n+b*o+x*u,e[7]=y*i+b*s+x*c,e[8]=y*a+b*l+x*f,e}function Up(r,t){var e=[],n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function PXe(r){var t=[],e=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],l=r[6],u=r[7],c=r[8],f=c*o-s*u,d=-c*a+s*l,h=u*a-o*l,v=e*f+n*d+i*h;return v?(v=1/v,t[0]=f*v,t[1]=(-c*n+i*u)*v,t[2]=(s*n-i*o)*v,t[3]=d*v,t[4]=(c*e-i*l)*v,t[5]=(-s*e+i*a)*v,t[6]=h*v,t[7]=(-u*e+n*l)*v,t[8]=(o*e-n*a)*v,t):null}var L0=Un,ZP="matrix",DXe=["zIndex","capture","visible","type"],RXe=["repeat"],OXe=":",LXe="*";function FXe(r){for(var t=[],e=0;e<r.length;e++)qe(r[e])?t.push([].concat(r[e])):t.push(r[e]);return t}function NXe(r,t){var e={},n=t.attrs;for(var i in r)e[i]=n[i];return e}function BXe(r,t){var e={},n=t.attr();return G(r,function(i,a){RXe.indexOf(a)===-1&&!ri(n[a],i)&&(e[a]=i)}),e}function $Xe(r,t){if(t.onFrame)return r;var e=t.startTime,n=t.delay,i=t.duration,a=Object.prototype.hasOwnProperty;return G(r,function(o){e+n<o.startTime+o.delay+o.duration&&i>o.delay&&G(t.toAttrs,function(s,l){a.call(o.toAttrs,l)&&(delete o.toAttrs[l],delete o.fromAttrs[l])})}),r}var ZK=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;n.attrs={};var i=n.getDefaultAttrs();return $t(i,e.attrs),n.attrs=i,n.initAttrs(i),n.initAnimate(),n}return t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get("parent")},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.attr=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=n[0],o=n[1];if(!a)return this.attrs;if(Kr(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return n.length===2?(this.setAttr(a,o),this.afterAttrsChange((e={},e[a]=o,e)),this):this.attrs[a]},t.prototype.isClipped=function(e,n){var i=this.getClip();return i&&!i.isHit(e,n)},t.prototype.setAttr=function(e,n){var i=this.attrs[e];i!==n&&(this.attrs[e]=n,this.onAttrChange(e,n,i))},t.prototype.onAttrChange=function(e,n,i){e==="matrix"&&this.set("totalMatrix",null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var n=this.cfg.applyTo;n&&n.onCanvasChange("clip")}else this.onCanvasChange("attr")},t.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},t.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},t.prototype.setZIndex=function(e){this.set("zIndex",e);var n=this.getParent();return n&&n.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(!!e){var n=e.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.push(this),this.onCanvasChange("zIndex")}},t.prototype.toBack=function(){var e=this.getParent();if(!!e){var n=e.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.unshift(this),this.onCanvasChange("zIndex")}},t.prototype.remove=function(e){e===void 0&&(e=!0);var n=this.getParent();n?(WK(n.getChildren(),this),n.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr(ZP,this.getDefaultMatrix()),this.onCanvasChange("matrix")},t.prototype.getMatrix=function(){return this.attr(ZP)},t.prototype.setMatrix=function(e){this.attr(ZP,e),this.onCanvasChange("matrix")},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var n=this.attr("matrix"),i=this.cfg.parentMatrix;i&&n?e=KK(i,n):e=n||i,this.set("totalMatrix",e)}return e},t.prototype.applyMatrix=function(e){var n=this.attr("matrix"),i=null;e&&n?i=KK(e,n):i=n||e,this.set("totalMatrix",i),this.set("parentMatrix",e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var n=this.attr("matrix");return n?Up(n,e):e},t.prototype.invertFromMatrix=function(e){var n=this.attr("matrix");if(n){var i=PXe(n);if(i)return Up(i,e)}return e},t.prototype.setClip=function(e){var n=this.getCanvas(),i=null;if(e){var a=this.getShapeBase(),o=rs(e.type),s=a[o];s&&(i=new s({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:n}))}return this.set("clipShape",i),this.onCanvasChange("clip"),i},t.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},t.prototype.clone=function(){var e=this,n=this.attrs,i={};G(n,function(s,l){qe(n[l])?i[l]=FXe(n[l]):i[l]=n[l]});var a=this.constructor,o=new a({attrs:i});return G(DXe,function(s){o.set(s,e.get(s))}),o},t.prototype.destroy=function(){var e=this.destroyed;e||(this.attrs={},r.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},t.prototype.animate=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var i=this.get("timeline");i||(i=this.get("canvas").get("timeline"),this.set("timeline",i));var a=this.get("animations")||[];i.timer||i.initTimer();var o=e[0],s=e[1],l=e[2],u=l===void 0?"easeLinear":l,c=e[3],f=c===void 0?ns:c,d=e[4],h=d===void 0?0:d,v,p,g,m,y;Vt(o)?(v=o,o={}):Kr(o)&&o.onFrame&&(v=o.onFrame,p=o.repeat),Kr(s)?(y=s,s=y.duration,u=y.easing||"easeLinear",h=y.delay||0,p=y.repeat||p||!1,f=y.callback||ns,g=y.pauseCallback||ns,m=y.resumeCallback||ns):(Rt(f)&&(h=f,f=null),Vt(u)?(f=u,u="easeLinear"):u=u||"easeLinear");var b=BXe(o,this),x={fromAttrs:NXe(b,this),toAttrs:b,duration:s,easing:u,repeat:p,callback:f,pauseCallback:g,resumeCallback:m,delay:h,startTime:i.getTime(),id:Ms(),onFrame:v,pathFormatted:!1};a.length>0?a=$Xe(a,x):i.addAnimator(this),a.push(x),this.set("animations",a),this.set("_pause",{isPaused:!1})}},t.prototype.stopAnimate=function(e){var n=this;e===void 0&&(e=!0);var i=this.get("animations");G(i,function(a){e&&(a.onFrame?n.attr(a.onFrame(1)):n.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},t.prototype.pauseAnimate=function(){var e=this.get("timeline"),n=this.get("animations"),i=e.getTime();return G(n,function(a){a._paused=!0,a._pauseTime=i,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:i}),this},t.prototype.resumeAnimate=function(){var e=this.get("timeline"),n=e.getTime(),i=this.get("animations"),a=this.get("_pause").pauseTime;return G(i,function(o){o.startTime=o.startTime+(n-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",i),this},t.prototype.emitDelegation=function(e,n){var i=this,a=n.propagationPath;this.getEvents();var o;e==="mouseenter"?o=n.fromShape:e==="mouseleave"&&(o=n.toShape);for(var s=function(f){var d=a[f],h=d.get("name");if(h){if((d.isGroup()||d.isCanvas&&d.isCanvas())&&o&&YK(d,o))return"break";qe(h)?G(h,function(v){i.emitDelegateEvent(d,v,n)}):l.emitDelegateEvent(d,h,n)}},l=this,u=0;u<a.length;u++){var c=s(u);if(c==="break")break}},t.prototype.emitDelegateEvent=function(e,n,i){var a=this.getEvents(),o=n+OXe+i.type;(a[o]||a[LXe])&&(i.name=o,i.currentTarget=e,i.delegateTarget=this,i.delegateObject=e.get("delegateObject"),this.emit(o,i))},t.prototype.translate=function(e,n){e===void 0&&(e=0),n===void 0&&(n=0);var i=this.getMatrix(),a=L0(i,[["t",e,n]]);return this.setMatrix(a),this},t.prototype.move=function(e,n){var i=this.attr("x")||0,a=this.attr("y")||0;return this.translate(e-i,n-a),this},t.prototype.moveTo=function(e,n){return this.move(e,n)},t.prototype.scale=function(e,n){var i=this.getMatrix(),a=L0(i,[["s",e,n||e]]);return this.setMatrix(a),this},t.prototype.rotate=function(e){var n=this.getMatrix(),i=L0(n,[["r",e]]);return this.setMatrix(i),this},t.prototype.rotateAtStart=function(e){var n=this.attr(),i=n.x,a=n.y,o=this.getMatrix(),s=L0(o,[["t",-i,-a],["r",e],["t",i,a]]);return this.setMatrix(s),this},t.prototype.rotateAtPoint=function(e,n,i){var a=this.getMatrix(),o=L0(a,[["t",-e,-n],["r",i],["t",e,n]]);return this.setMatrix(o),this},t}(qK),QK={},QP="_INDEX";function JK(r,t){if(r.set("canvas",t),r.isGroup()){var e=r.get("children");e.length&&e.forEach(function(n){JK(n,t)})}}function eZ(r,t){if(r.set("timeline",t),r.isGroup()){var e=r.get("children");e.length&&e.forEach(function(n){eZ(n,t)})}}function zXe(r,t,e){e===void 0&&(e=!0),e?t.destroy():(t.set("parent",null),t.set("canvas",null)),WK(r.getChildren(),t)}function GXe(r){return function(t,e){var n=r(t,e);return n===0?t[QP]-e[QP]:n}}var tZ=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,n=-1/0,i=1/0,a=-1/0,o=[],s=[],l=this.getChildren().filter(function(c){return c.get("visible")&&(!c.isGroup()||c.isGroup()&&c.getChildren().length>0)});l.length>0?(G(l,function(c){var f=c.getBBox();o.push(f.minX,f.maxX),s.push(f.minY,f.maxY)}),e=ia(o),n=ji(o),i=ia(s),a=ji(s)):(e=0,n=0,i=0,a=0);var u={x:e,y:i,minX:e,minY:i,maxX:n,maxY:a,width:n-e,height:a-i};return u},t.prototype.getCanvasBBox=function(){var e=1/0,n=-1/0,i=1/0,a=-1/0,o=[],s=[],l=this.getChildren().filter(function(c){return c.get("visible")&&(!c.isGroup()||c.isGroup()&&c.getChildren().length>0)});l.length>0?(G(l,function(c){var f=c.getCanvasBBox();o.push(f.minX,f.maxX),s.push(f.minY,f.maxY)}),e=ia(o),n=ji(o),i=ia(s),a=ji(s)):(e=0,n=0,i=0,a=0);var u={x:e,y:i,minX:e,minY:i,maxX:n,maxY:a,width:n-e,height:a-i};return u},t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return e.children=[],e},t.prototype.onAttrChange=function(e,n,i){if(r.prototype.onAttrChange.call(this,e,n,i),e==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},t.prototype.applyMatrix=function(e){var n=this.getTotalMatrix();r.prototype.applyMatrix.call(this,e);var i=this.getTotalMatrix();i!==n&&this._applyChildrenMarix(i)},t.prototype._applyChildrenMarix=function(e){var n=this.getChildren();G(n,function(i){i.applyMatrix(e)})},t.prototype.addShape=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0],a=e[1];Kr(i)?a=i:a.type=i;var o=QK[a.type];o||(o=rs(a.type),QK[a.type]=o);var s=this.getShapeBase(),l=new s[o](a);return this.add(l),l},t.prototype.addGroup=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0],a=e[1],o;if(Vt(i))a?o=new i(a):o=new i({parent:this});else{var s=i||{},l=this.getGroupBase();o=new l(s)}return this.add(o),o},t.prototype.getCanvas=function(){var e;return this.isCanvas()?e=this:e=this.get("canvas"),e},t.prototype.getShape=function(e,n,i){if(!XK(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,e,n,i);else{var s=[e,n,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],i))}return o},t.prototype._findShape=function(e,n,i,a){for(var o=null,s=e.length-1;s>=0;s--){var l=e[s];if(XK(l)&&(l.isGroup()?o=l.getShape(n,i,a):l.isHit(n,i)&&(o=l)),o)break}return o},t.prototype.add=function(e){var n=this.getCanvas(),i=this.getChildren(),a=this.get("timeline"),o=e.getParent();o&&zXe(o,e,!1),e.set("parent",this),n&&JK(e,n),a&&eZ(e,a),i.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var n=this.getTotalMatrix();n&&e.applyMatrix(n)},t.prototype.getChildren=function(){return this.get("children")},t.prototype.sort=function(){var e=this.getChildren();G(e,function(n,i){return n[QP]=i,n}),e.sort(GXe(function(n,i){return n.get("zIndex")-i.get("zIndex")})),this.onCanvasChange("sort")},t.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),n=e.length-1;n>=0;n--)e[n].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},t.prototype.destroy=function(){this.get("destroyed")||(this.clear(),r.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){var n=this.getChildren();return n[e]},t.prototype.getCount=function(){var e=this.getChildren();return e.length},t.prototype.contain=function(e){var n=this.getChildren();return n.indexOf(e)>-1},t.prototype.removeChild=function(e,n){n===void 0&&(n=!0),this.contain(e)&&e.remove(n)},t.prototype.findAll=function(e){var n=[],i=this.getChildren();return G(i,function(a){e(a)&&n.push(a),a.isGroup()&&(n=n.concat(a.findAll(e)))}),n},t.prototype.find=function(e){var n=null,i=this.getChildren();return G(i,function(a){if(e(a)?n=a:a.isGroup()&&(n=a.find(e)),n)return!1}),n},t.prototype.findById=function(e){return this.find(function(n){return n.get("id")===e})},t.prototype.findByClassName=function(e){return this.find(function(n){return n.get("className")===e})},t.prototype.findAllByName=function(e){return this.findAll(function(n){return n.get("name")===e})},t}(ZK),UXe=function(r){return["fill","stroke","fillStyle","strokeStyle"].includes(r)},VXe=function(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)},rZ=[1,0,0,0,1,0,0,0,1];function HXe(r,t,e){var n={},i=t.fromAttrs,a=t.toAttrs;if(!r.destroyed){var o;for(var s in a)if(!ri(i[s],a[s]))if(s==="path"){var l=a[s],u=i[s];l.length>u.length?(l=TC(a[s]),u=TC(i[s]),u=IXe(u,l),u=VK(u,l),t.fromAttrs.path=u,t.toAttrs.path=l):t.pathFormatted||(l=TC(a[s]),u=TC(i[s]),u=VK(u,l),t.fromAttrs.path=u,t.toAttrs.path=l,t.pathFormatted=!0),n[s]=[];for(var c=0;c<l.length;c++){for(var f=l[c],d=u[c],h=[],v=0;v<f.length;v++)Rt(f[v])&&d&&Rt(d[v])?(o=Rv(d[v],f[v]),h.push(o(e))):h.push(f[v]);n[s].push(h)}}else if(s==="matrix"){var p=X5(i[s]||rZ,a[s]||rZ),g=p(e);n[s]=g}else UXe(s)&&VXe(a[s])?n[s]=a[s]:Vt(a[s])||(o=Rv(i[s],a[s]),n[s]=o(e));r.attr(n)}}function WXe(r,t,e){var n=t.startTime,i=t.delay;if(e<n+i||t._paused)return!1;var a,o=t.duration,s=t.easing;if(e=e-n-t.delay,t.repeat)a=e%o/o,a=y1[s](a);else if(a=e/o,a<1)a=y1[s](a);else return t.onFrame?r.attr(t.onFrame(1)):r.attr(t.toAttrs),!0;if(t.onFrame){var l=t.onFrame(a);r.attr(l)}else HXe(r,t,a);return!1}var jXe=function(){function r(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return r.prototype.initTimer=function(){var t=this,e=!1,n,i,a;this.timer=HT(function(o){if(t.current=o,t.animators.length>0){for(var s=t.animators.length-1;s>=0;s--){if(n=t.animators[s],n.destroyed){t.removeAnimator(s);continue}if(!n.isAnimatePaused()){i=n.get("animations");for(var l=i.length-1;l>=0;l--)a=i[l],e=WXe(n,a,o),e&&(i.splice(l,1),e=!1,a.callback&&a.callback())}i.length===0&&t.removeAnimator(s)}var u=t.canvas.get("autoDraw");u||t.canvas.draw()}})},r.prototype.addAnimator=function(t){this.animators.push(t)},r.prototype.removeAnimator=function(t){this.animators.splice(t,1)},r.prototype.isAnimating=function(){return!!this.animators.length},r.prototype.stop=function(){this.timer&&this.timer.stop()},r.prototype.stopAllAnimations=function(t){t===void 0&&(t=!0),this.animators.forEach(function(e){e.stopAnimate(t)}),this.animators=[],this.canvas.draw()},r.prototype.getTime=function(){return this.current},r}(),YXe=40,nZ=0,iZ=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function aZ(r,t,e){e.name=t,e.target=r,e.currentTarget=r,e.delegateTarget=r,r.emit(t,e)}function XXe(r,t,e){if(e.bubbles){var n=void 0,i=!1;if(t==="mouseenter"?(n=e.fromShape,i=!0):t==="mouseleave"&&(i=!0,n=e.toShape),r.isCanvas()&&i)return;if(n&&YK(r,n)){e.bubbles=!1;return}e.name=t,e.currentTarget=r,e.delegateTarget=r,r.emit(t,e)}}var qXe=function(){function r(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(n){var i=n.type;e._triggerEvent(i,n)},this._onDocumentMove=function(n){var i=e.canvas,a=i.get("el");if(a!==n.target&&(e.dragging||e.currentShape)){var o=e._getPointInfo(n);e.dragging&&e._emitEvent("drag",n,o,e.draggingShape)}},this._onDocumentMouseUp=function(n){var i=e.canvas,a=i.get("el");if(a!==n.target&&e.dragging){var o=e._getPointInfo(n);e.draggingShape&&e._emitEvent("drop",n,o,null),e._emitEvent("dragend",n,o,e.draggingShape),e._afterDrag(e.draggingShape,o,n)}},this.canvas=t.canvas}return r.prototype.init=function(){this._bindEvents()},r.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");G(iZ,function(n){e.addEventListener(n,t._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");G(iZ,function(n){e.removeEventListener(n,t._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._getEventObj=function(t,e,n,i,a,o){var s=new HK(t,e);return s.fromShape=a,s.toShape=o,s.x=n.x,s.y=n.y,s.clientX=n.clientX,s.clientY=n.clientY,s.propagationPath.push(i),s},r.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},r.prototype._getPointInfo=function(t){var e=this.canvas,n=e.getClientByEvent(t),i=e.getPointByEvent(t);return{x:i.x,y:i.y,clientX:n.x,clientY:n.y}},r.prototype._triggerEvent=function(t,e){var n=this._getPointInfo(e),i=this._getShape(n,e),a=this["_on"+t],o=!1;if(a)a.call(this,n,i,e);else{var s=this.currentShape;t==="mouseenter"||t==="dragenter"||t==="mouseover"?(this._emitEvent(t,e,n,null,null,i),i&&this._emitEvent(t,e,n,i,null,i),t==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):t==="mouseleave"||t==="dragleave"||t==="mouseout"?(o=!0,s&&this._emitEvent(t,e,n,s,s,null),this._emitEvent(t,e,n,null,s,null),t==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(t,e,n,i,null,null)}if(o||(this.currentShape=i),i&&!i.get("destroyed")){var l=this.canvas,u=l.get("el");u.style.cursor=i.attr("cursor")||l.get("cursor")}},r.prototype._onmousedown=function(t,e,n){n.button===nZ&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,t,e,null,null)},r.prototype._emitMouseoverEvents=function(t,e,n,i){var a=this.canvas.get("el");n!==i&&(n&&(this._emitEvent("mouseout",t,e,n,n,i),this._emitEvent("mouseleave",t,e,n,n,i),(!i||i.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),i&&(this._emitEvent("mouseover",t,e,i,n,i),this._emitEvent("mouseenter",t,e,i,n,i)))},r.prototype._emitDragoverEvents=function(t,e,n,i,a){i?(i!==n&&(n&&this._emitEvent("dragleave",t,e,n,n,i),this._emitEvent("dragenter",t,e,i,n,i)),a||this._emitEvent("dragover",t,e,i)):n&&this._emitEvent("dragleave",t,e,n,n,i),a&&this._emitEvent("dragover",t,e,i)},r.prototype._afterDrag=function(t,e,n){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(e,n);i!==t&&this._emitMouseoverEvents(n,e,t,i),this.currentShape=i},r.prototype._onmouseup=function(t,e,n){if(n.button===nZ){var i=this.draggingShape;this.dragging?(i&&this._emitEvent("drop",n,t,e),this._emitEvent("dragend",n,t,i),this._afterDrag(i,t,n)):(this._emitEvent("mouseup",n,t,e),e===this.mousedownShape&&this._emitEvent("click",n,t,e),this.mousedownShape=null,this.mousedownPoint=null)}},r.prototype._ondragover=function(t,e,n){n.preventDefault();var i=this.currentShape;this._emitDragoverEvents(n,t,i,e,!0)},r.prototype._onmousemove=function(t,e,n){var i=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,t,a,e,!1),this._emitEvent("drag",n,t,o);else{var s=this.mousedownPoint;if(s){var l=this.mousedownShape,u=n.timeStamp,c=u-this.mousedownTimeStamp,f=s.clientX-t.clientX,d=s.clientY-t.clientY,h=f*f+d*d;c>120||h>YXe?l&&l.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,t,o),this.mousedownShape=null,this.mousedownPoint=null):!l&&i.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,t,a,e),this._emitEvent("mousemove",n,t,e)):(this._emitMouseoverEvents(n,t,a,e),this._emitEvent("mousemove",n,t,e))}else this._emitMouseoverEvents(n,t,a,e),this._emitEvent("mousemove",n,t,e)}},r.prototype._emitEvent=function(t,e,n,i,a,o){var s=this._getEventObj(t,e,n,i,a,o);if(i){s.shape=i,aZ(i,t,s);for(var l=i.getParent();l;)l.emitDelegation(t,s),s.propagationStopped||XXe(l,t,s),s.propagationPath.push(l),l=l.getParent()}else{var u=this.canvas;aZ(u,t,s)}},r.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},r}(),oZ="px",sZ=zT(),KXe=sZ&&sZ.name==="firefox";(function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},t.prototype.initContainer=function(){var e=this.get("container");rt(e)&&(e=document.getElementById(e),this.set("container",e))},t.prototype.initDom=function(){var e=this.createDom();this.set("el",e);var n=this.get("container");n.appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},t.prototype.initEvents=function(){var e=new qXe({canvas:this});e.init(),this.set("eventController",e)},t.prototype.initTimeline=function(){var e=new jXe(this);this.set("timeline",e)},t.prototype.setDOMSize=function(e,n){var i=this.get("el");jK&&(i.style.width=e+oZ,i.style.height=n+oZ)},t.prototype.changeSize=function(e,n){this.setDOMSize(e,n),this.set("width",e),this.set("height",n),this.onCanvasChange("changeSize")},t.prototype.getRenderer=function(){return this.get("renderer")},t.prototype.getCursor=function(){return this.get("cursor")},t.prototype.setCursor=function(e){this.set("cursor",e);var n=this.get("el");jK&&n&&(n.style.cursor=e)},t.prototype.getPointByEvent=function(e){var n=this.get("supportCSSTransform");if(n){if(KXe&&!Je(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!Je(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var i=this.getClientByEvent(e),a=i.x,o=i.y;return this.getPointByClient(a,o)},t.prototype.getClientByEvent=function(e){var n=e;return e.touches&&(e.type==="touchend"?n=e.changedTouches[0]:n=e.touches[0]),{x:n.clientX,y:n.clientY}},t.prototype.getPointByClient=function(e,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:e-a.left,y:n-a.top}},t.prototype.getClientByPoint=function(e,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:e+a.left,y:n+a.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){var e=this.get("eventController");e.destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),r.prototype.destroy.call(this))},t})(tZ);(function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var e=r.prototype.clone.call(this),n=this.getChildren(),i=0;i<n.length;i++){var a=n[i];e.add(a.clone())}return e},t})(tZ);(function(r){Te(t,r);function t(e){return r.call(this,e)||this}return t.prototype._isInBBox=function(e,n){var i=this.getBBox();return i.minX<=e&&i.maxX>=e&&i.minY<=n&&i.maxY>=n},t.prototype.afterAttrsChange=function(e){r.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},t.prototype.applyMatrix=function(e){r.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),n=this.getTotalMatrix(),i=e.minX,a=e.minY,o=e.maxX,s=e.maxY;if(n){var l=Up(n,[e.minX,e.minY]),u=Up(n,[e.maxX,e.minY]),c=Up(n,[e.minX,e.maxY]),f=Up(n,[e.maxX,e.maxY]);i=Math.min(l[0],u[0],c[0],f[0]),o=Math.max(l[0],u[0],c[0],f[0]),a=Math.min(l[1],u[1],c[1],f[1]),s=Math.max(l[1],u[1],c[1],f[1])}var d=this.attrs;if(d.shadowColor){var h=d.shadowBlur,v=h===void 0?0:h,p=d.shadowOffsetX,g=p===void 0?0:p,m=d.shadowOffsetY,y=m===void 0?0:m,b=i-v+g,x=o+v+g,w=a-v+y,S=s+v+y;i=Math.min(i,b),o=Math.max(o,x),a=Math.min(a,w),s=Math.max(s,S)}return{x:i,y:a,minX:i,minY:a,maxX:o,maxY:s,width:o-i,height:s-a}},t.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},t.prototype.isClipShape=function(){return this.get("isClipShape")},t.prototype.isInShape=function(e,n){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,n){var i=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[e,n,1];o=this.invertFromMatrix(o);var s=o[0],l=o[1],u=this._isInBBox(s,l);return this.isOnlyHitBox()?u:!!(u&&!this.isClipped(s,l)&&(this.isInShape(s,l)||i&&i.isHit(s,l)||a&&a.isHit(s,l)))},t})(ZK);var ZXe=new Map;function tu(r,t){ZXe.set(r,t)}function lZ(r){var t=r.attr(),e=t.x,n=t.y,i=t.width,a=t.height;return{x:e,y:n,width:i,height:a}}function uZ(r){var t=r.attr(),e=t.x,n=t.y,i=t.r;return{x:e-i,y:n-i,width:i*2,height:i*2}}function cZ(r,t){return!r||!t?r||t:{minX:Math.min(r.minX,t.minX),minY:Math.min(r.minY,t.minY),maxX:Math.max(r.maxX,t.maxX),maxY:Math.max(r.maxY,t.maxY)}}function JP(r,t){var e=r.get("startArrowShape"),n=r.get("endArrowShape"),i=null,a=null;return e&&(i=e.getCanvasBBox(),t=cZ(t,i)),n&&(a=n.getCanvasBBox(),t=cZ(t,a)),t}function QXe(r){for(var t=r.attr(),e=t.points,n=[],i=[],a=0;a<e.length;a++){var o=e[a];n.push(o[0]),i.push(o[1])}var s=Ac(n,i),l=s.x,u=s.y,c=s.width,f=s.height,d={minX:l,minY:u,maxX:l+c,maxY:u+f};return d=JP(r,d),{x:d.minX,y:d.minY,width:d.maxX-d.minX,height:d.maxY-d.minY}}function JXe(r){for(var t=r.attr(),e=t.points,n=[],i=[],a=0;a<e.length;a++){var o=e[a];n.push(o[0]),i.push(o[1])}return Ac(n,i)}var eD=null;function eqe(){if(!eD){var r=document.createElement("canvas");r.width=1,r.height=1,eD=r.getContext("2d")}return eD}function tqe(r,t,e){var n=1;if(rt(r)&&(n=r.split(`
`).length),n>1){var i=rqe(t,e);return t*n+i*(n-1)}return t}function rqe(r,t){return t?t-r:r*.14}function nqe(r,t){var e=eqe(),n=0;if(Je(r)||r==="")return n;if(e.save(),e.font=t,rt(r)&&r.includes(`
`)){var i=r.split(`
`);G(i,function(a){var o=e.measureText(a).width;n<o&&(n=o)})}else n=e.measureText(r).width;return e.restore(),n}function iqe(r){var t=r.fontSize,e=r.fontFamily,n=r.fontWeight,i=r.fontStyle,a=r.fontVariant;return[i,a,n,t+"px",e].join(" ").trim()}function aqe(r){var t=r.attr(),e=t.x,n=t.y,i=t.text,a=t.fontSize,o=t.lineHeight,s=t.font;s||(s=iqe(t));var l=nqe(i,s),u;if(!l)u={x:e,y:n,width:0,height:0};else{var c=t.textAlign,f=t.textBaseline,d=tqe(i,a,o),h={x:e,y:n-d};c&&(c==="end"||c==="right"?h.x-=l:c==="center"&&(h.x-=l/2)),f&&(f==="top"?h.y+=d:f==="middle"&&(h.y+=d/2)),u={x:h.x,y:h.y,width:l,height:d}}return u}function oqe(r,t){for(var e=[],n=[],i=[],a=0;a<r.length;a++){var o=r[a],s=o.currentPoint,l=o.params,u=o.prePoint,c=void 0;switch(o.command){case"Q":c=oA.box(u[0],u[1],l[1],l[2],l[3],l[4]);break;case"C":c=Ov.box(u[0],u[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var f=o.arcParams;c=y$.box(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:e.push(s[0]),n.push(s[1]);break}c&&(o.box=c,e.push(c.x,c.x+c.width),n.push(c.y,c.y+c.height)),t&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&i.push(o)}e=e.filter(function(m){return!Number.isNaN(m)}),n=n.filter(function(m){return!Number.isNaN(m)});var d=ia(e),h=ia(n),v=ji(e),p=ji(n);if(i.length===0)return{x:d,y:h,width:v-d,height:p-h};for(var a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,g=void 0;s[0]===d?(g=AC(o,t),d=d-g.xExtra):s[0]===v&&(g=AC(o,t),v=v+g.xExtra),s[1]===h?(g=AC(o,t),h=h-g.yExtra):s[1]===p&&(g=AC(o,t),p=p+g.yExtra)}return{x:d,y:h,width:v-d,height:p-h}}function AC(r,t){var e=r.prePoint,n=r.currentPoint,i=r.nextPoint,a=Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2),o=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),s=Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||Math.sin(l)===0||pa(l,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),c=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));u=u>Math.PI/2?Math.PI-u:u,c=c>Math.PI/2?Math.PI-c:c;var f={xExtra:Math.cos(l/2-u)*(t/2*(1/Math.sin(l/2)))-t/2||0,yExtra:Math.cos(c-l/2)*(t/2*(1/Math.sin(l/2)))-t/2||0};return f}function sqe(r){var t=r.attr(),e=t.path,n=t.stroke,i=n?t.lineWidth:0,a=r.get("segments")||vA(e),o=oqe(a,i),s=o.x,l=o.y,u=o.width,c=o.height,f={minX:s,minY:l,maxX:s+u,maxY:l+c};return f=JP(r,f),{x:f.minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY}}function lqe(r){var t=r.attr(),e=t.x1,n=t.y1,i=t.x2,a=t.y2,o=Math.min(e,i),s=Math.max(e,i),l=Math.min(n,a),u=Math.max(n,a),c={minX:o,maxX:s,minY:l,maxY:u};return c=JP(r,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function uqe(r){var t=r.attr(),e=t.x,n=t.y,i=t.rx,a=t.ry;return{x:e-i,y:n-a,width:i*2,height:a*2}}tu("rect",lZ);tu("image",lZ);tu("circle",uZ);tu("marker",uZ);tu("polyline",QXe);tu("polygon",JXe);tu("text",aqe);tu("path",sqe);tu("line",lqe);tu("ellipse",uqe);function fZ(r,t,e){var n=new HK(t,e);n.target=r,n.propagationPath.push(r),r.emitDelegation(t,n);for(var i=r.getParent();i;)i.emitDelegation(t,n),n.propagationPath.push(i),i=i.getParent()}var dZ=[1,0,0,0,1,0,0,0,1];function Vp(r,t,e){if(e===void 0&&(e=dZ),!t)return null;var n=Un(e,[["t",-r.x,-r.y],["r",t],["t",r.x,r.y]]);return n}function tD(r,t){return!r.x&&!r.y?null:Un(t||dZ,[["t",r.x,r.y]])}function cqe(r){var t=[1,0,0],e=[0,0,0];return kl(e,t,r),Math.atan2(e[1],e[0])}function MC(r,t){var e=[0,0];return Sce(e,t,r),e}function fqe(r,t){var e=MC(r,[t.minX,t.minY]),n=MC(r,[t.maxX,t.minY]),i=MC(r,[t.minX,t.maxY]),a=MC(r,[t.maxX,t.maxY]),o=Math.min(e[0],n[0],i[0],a[0]),s=Math.max(e[0],n[0],i[0],a[0]),l=Math.min(e[1],n[1],i[1],a[1]),u=Math.max(e[1],n[1],i[1],a[1]);return{x:o,y:l,minX:o,minY:l,maxX:s,maxY:u,width:s-o,height:u-l}}function hZ(r,t,e,n){if(t){var i=Vp({x:e,y:n},t,r.getMatrix());r.setMatrix(i)}}function F0(r,t,e){var n=tD({x:t,y:e});r.attr("matrix",n)}function kC(r){var t=0,e=0,n=0,i=0;return Rt(r)?t=e=n=i=r:qe(r)&&(t=r[0],n=Je(r[1])?r[0]:r[1],i=Je(r[2])?r[0]:r[2],e=Je(r[3])?n:r[3]),[t,n,i,e]}function rD(r){for(var t=r.childNodes,e=t.length,n=e-1;n>=0;n--)r.removeChild(t[n])}function dqe(r,t){return!!r.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function N0(r){var t=r.start,e=r.end,n=Math.min(t.x,e.x),i=Math.min(t.y,e.y),a=Math.max(t.x,e.x),o=Math.max(t.y,e.y);return{x:n,y:i,minX:n,minY:i,maxX:a,maxY:o,width:a-n,height:o-i}}function hqe(r){var t=r.map(function(s){return s.x}),e=r.map(function(s){return s.y}),n=Math.min.apply(Math,t),i=Math.min.apply(Math,e),a=Math.max.apply(Math,t),o=Math.max.apply(Math,e);return{x:n,y:i,minX:n,minY:i,maxX:a,maxY:o,width:a-n,height:o-i}}function IC(r,t,e,n){var i=r+e,a=t+n;return{x:r,y:t,width:e,height:n,minX:r,minY:t,maxX:isNaN(i)?0:i,maxY:isNaN(a)?0:a}}function vh(r,t,e){return(1-e)*r+t*e}function Hp(r,t,e){return{x:r.x+Math.cos(e)*t,y:r.y+Math.sin(e)*t}}function vqe(r,t){var e=t.x-r.x,n=t.y-r.y;return Math.sqrt(e*e+n*n)}var PC=function(r,t,e){return e===void 0&&(e=Math.pow(Number.EPSILON,.5)),[r,t].includes(1/0)?Math.abs(r)===Math.abs(t):Math.abs(r-t)<e};function pqe(r,t){var e=Math.max(r.minX,t.minX),n=Math.max(r.minY,t.minY),i=Math.min(r.maxX,t.maxX),a=Math.min(r.maxY,t.maxY);return IC(e,n,i-e,a-n)}function vZ(r){var t=r.getClip(),e=t&&t.getBBox(),n;if(!r.isGroup())n=r.getBBox();else{var i=1/0,a=-1/0,o=1/0,s=-1/0,l=r.getChildren();l.length>0?G(l,function(u){if(u.get("visible")){if(u.isGroup()&&u.get("children").length===0)return!0;var c=vZ(u),f=u.applyToMatrix([c.minX,c.minY,1]),d=u.applyToMatrix([c.minX,c.maxY,1]),h=u.applyToMatrix([c.maxX,c.minY,1]),v=u.applyToMatrix([c.maxX,c.maxY,1]),p=Math.min(f[0],d[0],h[0],v[0]),g=Math.max(f[0],d[0],h[0],v[0]),m=Math.min(f[1],d[1],h[1],v[1]),y=Math.max(f[1],d[1],h[1],v[1]);p<i&&(i=p),g>a&&(a=g),m<o&&(o=m),y>s&&(s=y)}}):(i=0,a=0,o=0,s=0),n=IC(i,o,a-i,s-o)}return e?pqe(n,e):n}function gqe(r,t){if(!(!r.getClip()&&!t.getClip())){var e=t.getClip();if(!e){r.setClip(null);return}var n={type:e.get("type"),attrs:e.attr()};r.setClip(n)}}function Vo(r){return r+"px"}function pZ(r,t,e,n){var i=vqe(r,t),a=n/i,o=0;return e==="start"?o=0-a:e==="end"&&(o=1+a),{x:vh(r.x,t.x,o),y:vh(r.y,t.y,o)}}var mqe={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},gZ=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;return n.initCfg(),n}return t.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},t.prototype.clear=function(){},t.prototype.update=function(e){var n=this,i=this.get("defaultCfg");G(e,function(a,o){var s=n.get(o),l=a;s!==a&&(Kr(a)&&i[o]&&(l=Mt({},i[o],a)),n.set(o,l))}),this.updateInner(e),this.afterUpdate(e)},t.prototype.updateInner=function(e){},t.prototype.afterUpdate=function(e){Ml(e,"visible")&&(e.visible?this.show():this.hide()),Ml(e,"capture")&&this.setCapture(e.capture)},t.prototype.getLayoutBBox=function(){return this.getBBox()},t.prototype.getLocationType=function(){return this.get("locationType")},t.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},t.prototype.setOffset=function(e,n){this.update({offsetX:e,offsetY:n})},t.prototype.setLocation=function(e){var n=A({},e);this.update(n)},t.prototype.getLocation=function(){var e=this,n={},i=this.get("locationType"),a=mqe[i];return G(a,function(o){n[o]=e.get(o)}),n},t.prototype.isList=function(){return!1},t.prototype.isSlider=function(){return!1},t.prototype.init=function(){},t.prototype.initCfg=function(){var e=this,n=this.get("defaultCfg");G(n,function(i,a){var o=e.get(a);if(Kr(o)){var s=Mt({},i,o);e.set(a,s)}})},t}(qK),ph="update_status",yqe=["visible","tip","delegateObject"],bqe=["container","group","shapesMap","isRegister","isUpdating","destroyed"],eo=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},t.prototype.remove=function(){this.clear();var e=this.get("group");e.remove()},t.prototype.clear=function(){var e=this.get("group");e.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},t.prototype.getChildComponentById=function(e){var n=this.getElementById(e),i=n&&n.get("component");return i},t.prototype.getElementById=function(e){return this.get("shapesMap")[e]},t.prototype.getElementByLocalId=function(e){var n=this.getElementId(e);return this.getElementById(n)},t.prototype.getElementsByName=function(e){var n=[];return G(this.get("shapesMap"),function(i){i.get("name")===e&&n.push(i)}),n},t.prototype.getContainer=function(){return this.get("container")},t.prototype.updateInner=function(e){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},t.prototype.render=function(){var e=this.get("offScreenGroup");e||(e=this.offScreenRender());var n=this.get("group");this.updateElements(e,n),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},t.prototype.show=function(){var e=this.get("group");e.show(),this.set("visible",!0)},t.prototype.hide=function(){var e=this.get("group");e.hide(),this.set("visible",!1)},t.prototype.setCapture=function(e){var n=this.get("group");n.set("capture",e),this.set("capture",e)},t.prototype.destroy=function(){this.removeEvent(),this.remove(),r.prototype.destroy.call(this)},t.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},t.prototype.getLayoutBBox=function(){var e=this.get("group"),n=this.getInnerLayoutBBox(),i=e.getTotalMatrix();return i&&(n=fqe(i,n)),n},t.prototype.on=function(e,n,i){var a=this.get("group");return a.on(e,n,i),this},t.prototype.off=function(e,n){var i=this.get("group");return i&&i.off(e,n),this},t.prototype.emit=function(e,n){var i=this.get("group");i.emit(e,n)},t.prototype.init=function(){r.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},t.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},t.prototype.delegateEmit=function(e,n){var i=this.get("group");n.target=i,i.emit(e,n),fZ(i,e,n)},t.prototype.createOffScreenGroup=function(){var e=this.get("group"),n=e.getGroupBase(),i=new n({delegateObject:this.getDelegateObject()});return i},t.prototype.applyOffset=function(){var e=this.get("offsetX"),n=this.get("offsetY");this.moveElementTo(this.get("group"),{x:e,y:n})},t.prototype.initGroup=function(){var e=this.get("container");this.set("group",e.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},t.prototype.offScreenRender=function(){this.clearOffScreenCache();var e=this.createOffScreenGroup();return this.renderInner(e),this.set("offScreenGroup",e),this.set("offScreenBBox",vZ(e)),e},t.prototype.addGroup=function(e,n){this.appendDelegateObject(e,n);var i=e.addGroup(n);return this.get("isRegister")&&this.registerElement(i),i},t.prototype.addShape=function(e,n){this.appendDelegateObject(e,n);var i=e.addShape(n);return this.get("isRegister")&&this.registerElement(i),i},t.prototype.addComponent=function(e,n){var i=n.id,a=n.component,o=Lr(n,["id","component"]),s=new a(A(A({},o),{id:i,container:e,updateAutoRender:this.get("updateAutoRender")}));return s.init(),s.render(),this.get("isRegister")&&this.registerElement(s.get("group")),s},t.prototype.initEvent=function(){},t.prototype.removeEvent=function(){var e=this.get("group");e.off()},t.prototype.getElementId=function(e){var n=this.get("id"),i=this.get("name");return n+"-"+i+"-"+e},t.prototype.registerElement=function(e){var n=e.get("id");this.get("shapesMap")[n]=e},t.prototype.unregisterElement=function(e){var n=e.get("id");delete this.get("shapesMap")[n]},t.prototype.moveElementTo=function(e,n){var i=tD(n);e.attr("matrix",i)},t.prototype.addAnimation=function(e,n,i){var a=n.attr("opacity");Je(a)&&(a=1),n.attr("opacity",0),n.animate({opacity:a},i)},t.prototype.removeAnimation=function(e,n,i){n.animate({opacity:0},i)},t.prototype.updateAnimation=function(e,n,i,a){n.animate(i,a)},t.prototype.updateElements=function(e,n){var i=this,a=this.get("animate"),o=this.get("animateOption"),s=e.getChildren().slice(0),l;G(s,function(u){var c=u.get("id"),f=i.getElementById(c),d=u.get("name");if(f)if(u.get("isComponent")){var h=u.get("component"),v=f.get("component"),p=Gx(h.cfg,d3(Zf(h.cfg),bqe));v.update(p),f.set(ph,"update")}else{var g=i.getReplaceAttrs(f,u);a&&o.update?i.updateAnimation(d,f,g,o.update):f.attr(g),u.isGroup()&&i.updateElements(u,f),G(yqe,function(x){f.set(x,u.get(x))}),gqe(f,u),l=f,f.set(ph,"update")}else{n.add(u);var m=n.getChildren();if(m.splice(m.length-1,1),l){var y=m.indexOf(l);m.splice(y+1,0,u)}else m.unshift(u);if(i.registerElement(u),u.set(ph,"add"),u.get("isComponent")){var h=u.get("component");h.set("container",n)}else u.isGroup()&&i.registerNewGroup(u);if(l=u,a){var b=i.get("isInit")?o.appear:o.enter;b&&i.addAnimation(d,u,b)}}})},t.prototype.clearUpdateStatus=function(e){var n=e.getChildren();G(n,function(i){i.set(ph,null)})},t.prototype.clearOffScreenCache=function(){var e=this.get("offScreenGroup");e&&e.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},t.prototype.getDelegateObject=function(){var e,n=this.get("name"),i=(e={},e[n]=this,e.component=this,e);return i},t.prototype.appendDelegateObject=function(e,n){var i=e.get("delegateObject");n.delegateObject||(n.delegateObject={}),$t(n.delegateObject,i)},t.prototype.getReplaceAttrs=function(e,n){var i=e.attr(),a=n.attr();return G(i,function(o,s){a[s]===void 0&&(a[s]=void 0)}),a},t.prototype.registerNewGroup=function(e){var n=this,i=e.getChildren();G(i,function(a){n.registerElement(a),a.set(ph,"add"),a.isGroup()&&n.registerNewGroup(a)})},t.prototype.deleteElements=function(){var e=this,n=this.get("shapesMap"),i=[];G(n,function(s,l){!s.get(ph)||s.destroyed?i.push([l,s]):s.set(ph,null)});var a=this.get("animate"),o=this.get("animateOption");G(i,function(s){var l=s[0],u=s[1];if(!u.destroyed){var c=u.get("name");if(a&&o.leave){var f=$t({callback:function(){e.removeElement(u)}},o.leave);e.removeAnimation(c,u,f)}else e.removeElement(u)}delete n[l]})},t.prototype.removeElement=function(e){if(e.get("isGroup")){var n=e.get("component");n&&n.destroy()}e.remove()},t}(gZ),nD="\u2026";function xqe(r){for(var t=0,e=0;e<r.length;e++)t+=gh(r,e);return t}function gh(r,t){return r.charCodeAt(t)>0&&r.charCodeAt(t)<128?1:2}function wqe(r,t,e){e===void 0&&(e="tail");var n=r.length,i="";if(e==="tail"){for(var a=0,o=0;a<t;){var s=gh(r,o);if(a+s<=t)i+=r[o],a+=gh(r,o),o++;else break}i+=nD}else if(e==="head"){for(var a=0,o=n-1;a<t;){var s=gh(r,o);if(a+s<=t)i+=r[o],a+=gh(r,o),o--;else break}i=nD+i}else{for(var l="",u="",a=0,c=0,f=n-1;a<t;){var d=gh(r,c),h=!1;d+a<=t&&(l+=r[c],c++,a+=d,h=!0);var v=gh(r,f);if(v+a<=t&&(u=r[f]+u,a+=v,f--,h=!0),!h)break}i=l+nD+u}return i}var Sqe="\u2026",Cqe=2,Eqe=400;function _qe(r){for(var t=r.map(function(l){var u=l.attr("text");return Je(u)?"":""+u}),e=0,n=0,i=0;i<t.length;i+=1){for(var a=0,o=0;o<=t[i].length;o+=1){var s=t[i].charCodeAt(o);s>=19968&&s<=40869?a+=2:a+=1}a>e&&(e=a,n=i)}return r[n].getBBox().width}function iD(r){if(r.length>Eqe)return _qe(r);var t=0;return G(r,function(e){var n=e.getBBox(),i=n.width;t<i&&(t=i)}),t}function Tqe(r,t){var e=t.getCanvasBBox();return r?e.width:e.height}function B0(r,t,e,n){var i;n===void 0&&(n="tail");var a=(i=t.attr("text"))!==null&&i!==void 0?i:"";if(n==="tail"){var o=Gx(t.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),s=I3(a,e,o,"\u2026");return a!==s?(t.attr("text",s),t.set("tip",a),!0):(t.set("tip",null),!1)}var l=Tqe(r,t),u=xqe(a),c=!1;if(e<l){var f=Math.floor(e/l*u)-Cqe,d=void 0;f>=0?d=wqe(a,f,n):d=Sqe,d&&(t.attr("text",d),c=!0)}return c?t.set("tip",a):t.set("tip",null),c}function DC(r,t){var e=t.x,n=t.y,i=t.content,a=t.style,o=t.id,s=t.name,l=t.rotate,u=t.maxLength,c=t.autoEllipsis,f=t.isVertical,d=t.ellipsisPosition,h=t.background,v=r.addGroup({id:o+"-group",name:s+"-group",attrs:{x:e,y:n}}),p=v.addShape({type:"text",id:o,name:s,attrs:A({x:0,y:0,text:i},a)}),g=kC(ne(h,"padding",0));if(u&&c){var m=u-(g[1]+g[3]);B0(!f,p,m,d)}if(h){var y=ne(h,"style",{}),b=p.getCanvasBBox(),x=b.minX,w=b.minY,S=b.width,C=b.height,_=v.addShape("rect",{id:o+"-bg",name:o+"-bg",attrs:A({x:x-g[3],y:w-g[0],width:S+g[1]+g[3],height:C+g[0]+g[2]},y)});_.toBack()}F0(v,e,n),hZ(v,l,e,n)}var Zr={fontFamily:`
  BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4},Aqe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:Zr.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:Zr.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:Zr.lineColor,lineWidth:1}}}})},t.prototype.renderInner=function(e){this.renderLine(e),this.get("text")&&this.renderLabel(e)},t.prototype.renderLine=function(e){var n=this.get("start"),i=this.get("end"),a=this.get("style");this.addShape(e,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:A({x1:n.x,y1:n.y,x2:i.x,y2:i.y},a)})},t.prototype.getLabelPoint=function(e,n,i){var a;return i==="start"?a=0:i==="center"?a=.5:rt(i)&&i.indexOf("%")!==-1?a=parseInt(i,10)/100:Rt(i)?a=i:a=1,(a>1||a<0)&&(a=1),{x:vh(e.x,n.x,a),y:vh(e.y,n.y,a)}},t.prototype.renderLabel=function(e){var n=this.get("text"),i=this.get("start"),a=this.get("end"),o=n.position,s=n.content,l=n.style,u=n.offsetX,c=n.offsetY,f=n.autoRotate,d=n.maxLength,h=n.autoEllipsis,v=n.ellipsisPosition,p=n.background,g=n.isVertical,m=g===void 0?!1:g,y=this.getLabelPoint(i,a,o),b=y.x+u,x=y.y+c,w={id:this.getElementId("line-text"),name:"annotation-line-text",x:b,y:x,content:s,style:l,maxLength:d,autoEllipsis:h,ellipsisPosition:v,background:p,isVertical:m};if(f){var S=[a.x-i.x,a.y-i.y];w.rotate=Math.atan2(S[1],S[0])}DC(e,w)},t}(eo),Mqe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:Zr.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:Zr.fontFamily}}})},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetLocation()},t.prototype.renderInner=function(e){var n=this.getLocation(),i=n.x,a=n.y,o=this.get("content"),s=this.get("style"),l=this.getElementId("text"),u=this.get("name")+"-text",c=this.get("maxLength"),f=this.get("autoEllipsis"),d=this.get("isVertical"),h=this.get("ellipsisPosition"),v=this.get("background"),p=this.get("rotate"),g={id:l,name:u,x:i,y:a,content:o,style:s,maxLength:c,autoEllipsis:f,isVertical:d,ellipsisPosition:h,background:v,rotate:p};DC(e,g)},t.prototype.resetLocation=function(){var e=this.getElementByLocalId("text-group");if(e){var n=this.getLocation(),i=n.x,a=n.y,o=this.get("rotate");F0(e,i,a),hZ(e,o,i,a)}},t}(eo),kqe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},t.prototype.renderInner=function(e){this.renderArc(e)},t.prototype.getArcPath=function(){var e=this.getLocation(),n=e.center,i=e.radius,a=e.startAngle,o=e.endAngle,s=Hp(n,i,a),l=Hp(n,i,o),u=o-a>Math.PI?1:0,c=[["M",s.x,s.y]];if(o-a==Math.PI*2){var f=Hp(n,i,a+Math.PI);c.push(["A",i,i,0,u,1,f.x,f.y]),c.push(["A",i,i,0,u,1,l.x,l.y])}else c.push(["A",i,i,0,u,1,l.x,l.y]);return c},t.prototype.renderArc=function(e){var n=this.getArcPath(),i=this.get("style");this.addShape(e,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:A({path:n},i)})},t}(eo),Iqe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:Zr.regionColor,opacity:.4}}})},t.prototype.renderInner=function(e){this.renderRegion(e)},t.prototype.renderRegion=function(e){var n=this.get("start"),i=this.get("end"),a=this.get("style"),o=N0({start:n,end:i});this.addShape(e,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:A({x:o.x,y:o.y,width:o.width,height:o.height},a)})},t}(eo),Pqe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},t.prototype.renderInner=function(e){this.renderImage(e)},t.prototype.getImageAttrs=function(){var e=this.get("start"),n=this.get("end"),i=this.get("style"),a=N0({start:e,end:n}),o=this.get("src");return A({x:a.x,y:a.y,img:o,width:a.width,height:a.height},i)},t.prototype.renderImage=function(e){this.addShape(e,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},t}(eo),Dqe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:Zr.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:Zr.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:Zr.fontFamily}}}})},t.prototype.renderInner=function(e){ne(this.get("line"),"display")&&this.renderLine(e),ne(this.get("text"),"display")&&this.renderText(e),ne(this.get("point"),"display")&&this.renderPoint(e),this.get("autoAdjust")&&this.autoAdjust(e)},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},t.prototype.renderPoint=function(e){var n=this.getShapeAttrs().point;this.addShape(e,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:n})},t.prototype.renderLine=function(e){var n=this.getShapeAttrs().line;this.addShape(e,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:n})},t.prototype.renderText=function(e){var n=this.getShapeAttrs().text,i=n.x,a=n.y,o=n.text,s=Lr(n,["x","y","text"]),l=this.get("text"),u=l.background,c=l.maxLength,f=l.autoEllipsis,d=l.isVertival,h=l.ellipsisPosition,v={x:i,y:a,id:this.getElementId("text"),name:"annotation-text",content:o,style:s,background:u,maxLength:c,autoEllipsis:f,isVertival:d,ellipsisPosition:h};DC(e,v)},t.prototype.autoAdjust=function(e){var n=this.get("direction"),i=this.get("x"),a=this.get("y"),o=ne(this.get("line"),"length",0),s=this.get("coordinateBBox"),l=e.getBBox(),u=l.minX,c=l.maxX,f=l.minY,d=l.maxY,h=e.findById(this.getElementId("text-group")),v=e.findById(this.getElementId("text")),p=e.findById(this.getElementId("line"));if(!!s){if(h){if(i+u<=s.minX){var g=s.minX-(i+u);F0(h,h.attr("x")+g,h.attr("y"))}if(i+c>=s.maxX){var g=i+c-s.maxX;F0(h,h.attr("x")-g,h.attr("y"))}}if(n==="upward"&&a+f<=s.minY||n!=="upward"&&a+d>=s.maxY){var m=void 0,y=void 0;n==="upward"&&a+f<=s.minY?(m="top",y=1):(m="bottom",y=-1),v.attr("textBaseline",m),p&&p.attr("path",[["M",0,0],["L",0,o*y]]),F0(h,h.attr("x"),(o+2)*y)}}},t.prototype.getShapeAttrs=function(){var e=ne(this.get("line"),"display"),n=ne(this.get("point"),"style",{}),i=ne(this.get("line"),"style",{}),a=ne(this.get("text"),"style",{}),o=this.get("direction"),s=e?ne(this.get("line"),"length",0):0,l=o==="upward"?-1:1;return{point:A({x:0,y:0},n),line:A({path:[["M",0,0],["L",0,s*l]]},i),text:A({x:0,y:(s+2)*l,text:ne(this.get("text"),"content",""),textBaseline:o==="upward"?"bottom":"top"},a)}},t}(eo),Rqe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:Zr.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:Zr.textColor,fontFamily:Zr.fontFamily}}}})},t.prototype.renderInner=function(e){var n=ne(this.get("region"),"style",{});ne(this.get("text"),"style",{});var i=this.get("lineLength")||0,a=this.get("points");if(!!a.length){var o=hqe(a),s=[];s.push(["M",a[0].x,o.minY-i]),a.forEach(function(u){s.push(["L",u.x,u.y])}),s.push(["L",a[a.length-1].x,a[a.length-1].y-i]),this.addShape(e,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:A({path:s},n)});var l=A({id:this.getElementId("text"),name:"annotation-text",x:(o.minX+o.maxX)/2,y:o.minY-i},this.get("text"));DC(e,l)}},t}(eo),Oqe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},t.prototype.renderInner=function(e){var n=this,i=this.get("start"),a=this.get("end"),o=this.addGroup(e,{id:this.getElementId("region-filter"),capture:!1});G(this.get("shapes"),function(l,u){var c=l.get("type"),f=Mr(l.attr());n.adjustShapeAttrs(f),n.addShape(o,{id:n.getElementId("shape-"+c+"-"+u),capture:!1,type:c,attrs:f})});var s=N0({start:i,end:a});o.setClip({type:"rect",attrs:{x:s.minX,y:s.minY,width:s.width,height:s.height}})},t.prototype.adjustShapeAttrs=function(e){var n=this.get("color");e.fill&&(e.fill=e.fillStyle=n),e.stroke=e.strokeStyle=n},t}(eo),Lqe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"shape",draw:ns})},t.prototype.renderInner=function(e){var n=this.get("render");Vt(n)&&n(e)},t}(eo),aD=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},t.prototype.getContainer=function(){return this.get("container")},t.prototype.show=function(){var e=this.get("container");e.style.display="",this.set("visible",!0)},t.prototype.hide=function(){var e=this.get("container");e.style.display="none",this.set("visible",!1)},t.prototype.setCapture=function(e){var n=this.getContainer(),i=e?"auto":"none";n.style.pointerEvents=i,this.set("capture",e)},t.prototype.getBBox=function(){var e=this.getContainer(),n=parseFloat(e.style.left)||0,i=parseFloat(e.style.top)||0;return IC(n,i,e.clientWidth,e.clientHeight)},t.prototype.clear=function(){var e=this.get("container");rD(e)},t.prototype.destroy=function(){this.removeEvent(),this.removeDom(),r.prototype.destroy.call(this)},t.prototype.init=function(){r.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},t.prototype.initCapture=function(){this.setCapture(this.get("capture"))},t.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},t.prototype.initDom=function(){},t.prototype.initContainer=function(){var e=this.get("container");if(Je(e)){e=this.createDom();var n=this.get("parent");rt(n)&&(n=document.getElementById(n),this.set("parent",n)),n.appendChild(e),this.set("container",e)}else rt(e)&&(e=document.getElementById(e),this.set("container",e));this.get("parent")||this.set("parent",e.parentNode)},t.prototype.resetStyles=function(){var e=this.get("domStyles"),n=this.get("defaultStyles");e?e=Mt({},n,e):e=n,this.set("domStyles",e)},t.prototype.applyStyles=function(){var e=this.get("domStyles");if(!!e){var n=this.getContainer();this.applyChildrenStyles(n,e);var i=this.get("containerClassName");if(i&&dqe(n,i)){var a=e[i];Fr(n,a)}}},t.prototype.applyChildrenStyles=function(e,n){G(n,function(i,a){var o=e.getElementsByClassName(a);G(o,function(s){Fr(s,i)})})},t.prototype.applyStyle=function(e,n){var i=this.get("domStyles");Fr(n,i[e])},t.prototype.createDom=function(){var e=this.get("containerTpl");return Vn(e)},t.prototype.initEvent=function(){},t.prototype.removeDom=function(){var e=this.get("container");e&&e.parentNode&&e.parentNode.removeChild(e)},t.prototype.removeEvent=function(){},t.prototype.updateInner=function(e){Ml(e,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},t.prototype.resetPosition=function(){},t}(gZ),Fqe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},t.prototype.render=function(){var e=this.getContainer(),n=this.get("html");rD(e);var i=Vt(n)?n(e):n;rT(i)?e.appendChild(i):rt(i)&&e.appendChild(Vn(i)),this.resetPosition()},t.prototype.resetPosition=function(){var e=this.getContainer(),n=this.getLocation(),i=n.x,a=n.y,o=this.get("alignX"),s=this.get("alignY"),l=this.get("offsetX"),u=this.get("offsetY"),c=Yge(e),f=Wge(e),d={x:i,y:a};o==="middle"?d.x-=Math.round(c/2):o==="right"&&(d.x-=Math.round(c)),s==="middle"?d.y-=Math.round(f/2):s==="bottom"&&(d.y-=Math.round(f)),l&&(d.x+=l),u&&(d.y+=u),Fr(e,{position:"absolute",left:d.x+"px",top:d.y+"px",zIndex:this.get("zIndex")})},t}(aD),Nqe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Line:Aqe,Text:Mqe,Arc:kqe,Region:Iqe,Image:Pqe,DataMarker:Dqe,DataRegion:Rqe,RegionFilter:Oqe,Shape:Lqe,Html:Fqe});function $0(r,t,e){var n=t+"Style",i=null;return G(e,function(a,o){r[o]&&a[n]&&(i||(i={}),$t(i,a[n]))}),i}var mZ=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:Zr.lineColor}},tickLine:{style:{lineWidth:1,stroke:Zr.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:Zr.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:Zr.textColor,fontFamily:Zr.fontFamily,fontWeight:"normal"},offset:10,offsetX:0,offsetY:0},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:Zr.textColor,textBaseline:"middle",fontFamily:Zr.fontFamily,textAlign:"center"}},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:Zr.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},t.prototype.renderInner=function(e){this.get("line")&&this.drawLine(e),this.drawTicks(e),this.get("title")&&this.drawTitle(e)},t.prototype.isList=function(){return!0},t.prototype.getItems=function(){return this.get("ticks")},t.prototype.setItems=function(e){this.update({ticks:e})},t.prototype.updateItem=function(e,n){$t(e,n),this.clear(),this.render()},t.prototype.clearItems=function(){var e=this.getElementByLocalId("label-group");e&&e.clear()},t.prototype.setItemState=function(e,n,i){e[n]=i,this.updateTickStates(e)},t.prototype.hasState=function(e,n){return!!e[n]},t.prototype.getItemStates=function(e){var n=this.get("tickStates"),i=[];return G(n,function(a,o){e[o]&&i.push(o)}),i},t.prototype.clearItemsState=function(e){var n=this,i=this.getItemsByState(e);G(i,function(a){n.setItemState(a,e,!1)})},t.prototype.getItemsByState=function(e){var n=this,i=this.getItems();return va(i,function(a){return n.hasState(a,e)})},t.prototype.getSidePoint=function(e,n){var i=this,a=i.getSideVector(n,e);return{x:e.x+a[0],y:e.y+a[1]}},t.prototype.getTextAnchor=function(e){var n;return pa(e[0],0)?n="center":e[0]>0?n="start":e[0]<0&&(n="end"),n},t.prototype.getTextBaseline=function(e){var n;return pa(e[1],0)?n="middle":e[1]>0?n="top":e[1]<0&&(n="bottom"),n},t.prototype.processOverlap=function(e){},t.prototype.drawLine=function(e){var n=this.getLinePath(),i=this.get("line");this.addShape(e,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:$t({path:n},i.style)})},t.prototype.getTickLineItems=function(e){var n=this,i=[],a=this.get("tickLine"),o=a.alignTick,s=a.length,l=1,u=e.length;return u>=2&&(l=e[1].value-e[0].value),G(e,function(c){var f=c.point;o||(f=n.getTickPoint(c.value-l/2));var d=n.getSidePoint(f,s);i.push({startPoint:f,tickValue:c.value,endPoint:d,tickId:c.id,id:"tickline-"+c.id})}),i},t.prototype.getSubTickLineItems=function(e){var n=[],i=this.get("subTickLine"),a=i.count,o=e.length;if(o>=2)for(var s=0;s<o-1;s++)for(var l=e[s],u=e[s+1],c=0;c<a;c++){var f=(c+1)/(a+1),d=(1-f)*l.tickValue+f*u.tickValue,h=this.getTickPoint(d),v=this.getSidePoint(h,i.length);n.push({startPoint:h,endPoint:v,tickValue:d,id:"sub-"+l.id+"-"+c})}return n},t.prototype.getTickLineAttrs=function(e,n,i,a){var o=this.get(n).style,s={points:[e.startPoint,e.endPoint]},l=ne(this.get("theme"),["tickLine","style"],{});o=Vt(o)?$t({},l,o(s,i,a)):o;var u=e.startPoint,c=e.endPoint;return A({x1:u.x,y1:u.y,x2:c.x,y2:c.y},o)},t.prototype.drawTick=function(e,n,i,a,o){this.addShape(n,{type:"line",id:this.getElementId(e.id),name:"axis-"+i,attrs:this.getTickLineAttrs(e,i,a,o)})},t.prototype.drawTickLines=function(e){var n=this,i=this.get("ticks"),a=this.get("subTickLine"),o=this.getTickLineItems(i),s=this.addGroup(e,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),l=this.get("tickLine");if(G(o,function(c,f){if(l.displayWithLabel){var d=n.getElementId("label-"+c.tickId);e.findById(d)&&n.drawTick(c,s,"tickLine",f,o)}else n.drawTick(c,s,"tickLine",f,o)}),a){var u=this.getSubTickLineItems(o);G(u,function(c,f){n.drawTick(c,s,"subTickLine",f,u)})}},t.prototype.processTicks=function(){var e=this,n=this.get("ticks");G(n,function(i){i.point=e.getTickPoint(i.value),Je(i.id)&&(i.id=i.name)})},t.prototype.drawTicks=function(e){var n=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(e),this.get("tickLine")&&this.drawTickLines(e);var i=this.get("ticks");G(i,function(a){n.applyTickStates(a,e)})},t.prototype.optimizeTicks=function(){var e=this.get("optimize"),n=this.get("ticks");if(e&&e.enable&&e.threshold>0){var i=aa(n);if(i>e.threshold){var a=Math.ceil(i/e.threshold),o=n.filter(function(s,l){return l%a==0});this.set("ticks",o),this.set("originalTicks",n)}}},t.prototype.getLabelAttrs=function(e,n,i){var a=this.get("label"),o=a.offset,s=a.offsetX,l=a.offsetY,u=a.rotate,c=a.formatter,f=this.getSidePoint(e.point,o),d=this.getSideVector(o,f),h=c?c(e.name,e,n):e.name,v=a.style;v=Vt(v)?ne(this.get("theme"),["label","style"],{}):v;var p=$t({x:f.x+s,y:f.y+l,text:h,textAlign:this.getTextAnchor(d),textBaseline:this.getTextBaseline(d)},v);return u&&(p.matrix=Vp(f,u)),p},t.prototype.drawLabels=function(e){var n=this,i=this.get("ticks"),a=this.addGroup(e,{name:"axis-label-group",id:this.getElementId("label-group")});G(i,function(d,h){n.addShape(a,{type:"text",name:"axis-label",id:n.getElementId("label-"+d.id),attrs:n.getLabelAttrs(d,h,i),delegateObject:{tick:d,item:d,index:h}})}),this.processOverlap(a);var o=a.getChildren(),s=ne(this.get("theme"),["label","style"],{}),l=this.get("label"),u=l.style,c=l.formatter;if(Vt(u)){var f=o.map(function(d){return ne(d.get("delegateObject"),"tick")});G(o,function(d,h){var v=d.get("delegateObject").tick,p=c?c(v.name,v,h):v.name,g=$t({},s,u(p,h,f));d.attr(g)})}},t.prototype.getTitleAttrs=function(){var e=this.get("title"),n=e.style,i=e.position,a=e.offset,o=e.spacing,s=o===void 0?0:o,l=e.autoRotate,u=n.fontSize,c=.5;i==="start"?c=0:i==="end"&&(c=1);var f=this.getTickPoint(c),d=this.getSidePoint(f,a||s+u/2),h=$t({x:d.x,y:d.y,text:e.text},n),v=e.rotate,p=v;if(Je(v)&&l){var g=this.getAxisVector(f),m=[1,0];p=pT(g,m,!0)}if(p){var y=Vp(d,p);h.matrix=y}return h},t.prototype.drawTitle=function(e){this.addShape(e,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:this.getTitleAttrs()})},t.prototype.applyTickStates=function(e,n){var i=this.getItemStates(e);if(i.length){var a=this.get("tickStates"),o=this.getElementId("label-"+e.id),s=n.findById(o);if(s){var l=$0(e,"label",a);l&&s.attr(l)}var u=this.getElementId("tickline-"+e.id),c=n.findById(u);if(c){var f=$0(e,"tickLine",a);f&&c.attr(f)}}},t.prototype.updateTickStates=function(e){var n=this.getItemStates(e),i=this.get("tickStates"),a=this.get("label"),o=this.getElementByLocalId("label-"+e.id),s=this.get("tickLine"),l=this.getElementByLocalId("tickline-"+e.id);if(n.length){if(o){var u=$0(e,"label",i);u&&o.attr(u)}if(l){var c=$0(e,"tickLine",i);c&&l.attr(c)}}else o&&o.attr(a.style),l&&l.attr(s.style)},t}(eo);function oD(r,t,e,n){var i=t.getChildren(),a=!1;return G(i,function(o){var s=B0(r,o,e,n);a=a||s}),a}function Bqe(){return yZ}function $qe(r,t,e){return oD(r,t,e,"head")}function yZ(r,t,e){return oD(r,t,e,"tail")}function zqe(r,t,e){return oD(r,t,e,"middle")}var Gqe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:Bqe,ellipsisHead:$qe,ellipsisTail:yZ,ellipsisMiddle:zqe});function Uqe(r){var t=r.attr("matrix");return t&&t[0]!==1}function bZ(r){var t=Uqe(r)?cqe(r.attr("matrix")):0;return t%360}function sD(r,t,e,n){var i=!1,a=bZ(t),o=Math.abs(r?e.attr("y")-t.attr("y"):e.attr("x")-t.attr("x")),s=(r?e.attr("y")>t.attr("y"):e.attr("x")>t.attr("x"))?t.getBBox():e.getBBox();if(r){var l=Math.abs(Math.cos(a));PC(l,0,Math.PI/180)?i=s.width+n>o:i=s.height/l+n>o}else{var l=Math.abs(Math.sin(a));PC(l,0,Math.PI/180)?i=s.width+n>o:i=s.height/l+n>o}return i}function z0(r,t,e,n){var i=(n==null?void 0:n.minGap)||0,a=t.getChildren().slice().filter(function(h){return h.get("visible")});if(!a.length)return!1;var o=!1;e&&a.reverse();for(var s=a.length,l=a[0],u=l,c=1;c<s;c++){var f=a[c];f.getBBox();var d=sD(r,u,f,i);d?(f.hide(),o=!0):u=f}return o}function xZ(r,t,e){var n=(e==null?void 0:e.minGap)||0,i=t.getChildren().slice();if(i.length<2)return!1;var a=!1,o=i[0],s=o.getBBox(),l=i[1],u=i.length,c=bZ(o),f=Math.abs(r?l.attr("y")-o.attr("y"):l.attr("x")-o.attr("x")),d=0;if(r){var h=Math.abs(Math.cos(c));if(PC(h,0,Math.PI/180)){var v=iD(i);d=(v+n)/f}else d=(s.height/h+n)/f}else{var h=Math.abs(Math.sin(c));if(PC(h,0,Math.PI/180)){var v=iD(i);d=(v+n)/f}else d=(s.height/h+n)/f}if(d>1){d=Math.ceil(d);for(var p=0;p<u;p++)p%d!=0&&(i[p].hide(),a=!0)}return a}function Vqe(){return wZ}function Hqe(r,t,e,n){return z0(r,t,!1,n)}function Wqe(r,t,e,n){return z0(r,t,!0,n)}function jqe(r,t,e,n){var i=(n==null?void 0:n.minGap)||0,a=t.getChildren().slice();if(a.length<=2)return!1;for(var o=!1,s=a.length,l=a[0],u=a[s-1],c=l,f=1;f<s-1;f++){var d=a[f];d.getBBox();var h=sD(r,c,d,i);h?(d.hide(),o=!0):c=d}var v=sD(r,c,u,i);return v&&(c.hide(),o=!0),o}function wZ(r,t,e,n){var i=xZ(r,t,n);return z0(r,t,!1)&&(i=!0),i}function Yqe(r,t,e,n){var i=t.getChildren().slice(),a=xZ(r,t,n);if(i.length>2){var o=i[0],s=i[i.length-1];o.get("visible")||(o.show(),z0(r,t,!1,n)&&(a=!0)),s.get("visible")||(s.show(),z0(r,t,!0,n)&&(a=!0))}return a}var Xqe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:Vqe,reserveFirst:Hqe,reserveLast:Wqe,reserveBoth:jqe,equidistance:wZ,equidistanceWithReverseBoth:Yqe});function qqe(r,t){G(r,function(e){var n=e.attr("x"),i=e.attr("y"),a=Vp({x:n,y:i},t);e.attr("matrix",a)})}function SZ(r,t,e,n){var i=t.getChildren();if(!i.length||!r&&i.length<2)return!1;var a=iD(i),o=!1;if(r)o=!!e&&a>e;else{var s=Math.abs(i[1].attr("x")-i[0].attr("x"));o=a>s}if(o){var l=n(e,a);qqe(i,l)}return o}function Kqe(){return CZ}function CZ(r,t,e,n){return SZ(r,t,e,function(){return Rt(n)?n:r?Zr.verticalAxisRotate:Zr.horizontalAxisRotate})}function Zqe(r,t,e){return SZ(r,t,e,function(n,i){if(!n)return r?Zr.verticalAxisRotate:Zr.horizontalAxisRotate;if(r)return-Math.acos(n/i);var a=0;return n>i?a=Math.PI/4:(a=Math.asin(n/i),a>Math.PI/4&&(a=Math.PI/4)),a})}var Qqe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:Kqe,fixedAngle:CZ,unfixedAngle:Zqe}),EZ=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",autoHide:Xqe,autoRotate:Qqe,autoEllipsis:Gqe}),Jqe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{type:"line",locationType:"region",start:null,end:null})},t.prototype.getLinePath=function(){var e=this.get("start"),n=this.get("end"),i=[];return i.push(["M",e.x,e.y]),i.push(["L",n.x,n.y]),i},t.prototype.getInnerLayoutBBox=function(){var e=this.get("start"),n=this.get("end"),i=r.prototype.getInnerLayoutBBox.call(this),a=Math.min(e.x,n.x,i.x),o=Math.min(e.y,n.y,i.y),s=Math.max(e.x,n.x,i.maxX),l=Math.max(e.y,n.y,i.maxY);return{x:a,y:o,minX:a,minY:o,maxX:s,maxY:l,width:s-a,height:l-o}},t.prototype.isVertical=function(){var e=this.get("start"),n=this.get("end");return pa(e.x,n.x)},t.prototype.isHorizontal=function(){var e=this.get("start"),n=this.get("end");return pa(e.y,n.y)},t.prototype.getTickPoint=function(e){var n=this,i=n.get("start"),a=n.get("end"),o=a.x-i.x,s=a.y-i.y;return{x:i.x+o*e,y:i.y+s*e}},t.prototype.getSideVector=function(e){var n=this.getAxisVector(),i=wc([0,0],n),a=this.get("verticalFactor"),o=[i[1],i[0]*-1];return di([0,0],o,e*a)},t.prototype.getAxisVector=function(){var e=this.get("start"),n=this.get("end");return[n.x-e.x,n.y-e.y]},t.prototype.processOverlap=function(e){var n=this,i=this.isVertical(),a=this.isHorizontal();if(!(!i&&!a)){var o=this.get("label"),s=this.get("title"),l=this.get("verticalLimitLength"),u=o.offset,c=l,f=0,d=0;s&&(f=s.style.fontSize,d=s.spacing),c&&(c=c-u-d-f);var h=this.get("overlapOrder");if(G(h,function(g){o[g]&&n.canProcessOverlap(g)&&n.autoProcessOverlap(g,o[g],e,c)}),s&&Je(s.offset)){var v=e.getCanvasBBox(),p=i?v.width:v.height;s.offset=u+p+d+f/2}}},t.prototype.canProcessOverlap=function(e){var n=this.get("label");return e==="autoRotate"?Je(n.rotate):!0},t.prototype.autoProcessOverlap=function(e,n,i,a){var o=this,s=this.isVertical(),l=!1,u=EZ[e];if(n===!0)this.get("label"),l=u.getDefault()(s,i,a);else if(Vt(n))l=n(s,i,a);else if(Kr(n)){var c=n;u[c.type]&&(l=u[c.type](s,i,a,c.cfg))}else u[n]&&(l=u[n](s,i,a));if(e==="autoRotate"){if(l){var f=i.getChildren(),d=this.get("verticalFactor");G(f,function(v){var p=v.attr("textAlign");if(p==="center"){var g=d>0?"end":"start";v.attr("textAlign",g)}})}}else if(e==="autoHide"){var h=i.getChildren().slice(0);G(h,function(v){v.get("visible")||(o.get("isRegister")&&o.unregisterElement(v),v.remove())})}},t}(mZ),eKe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},t.prototype.getLinePath=function(){var e=this.get("center"),n=e.x,i=e.y,a=this.get("radius"),o=a,s=this.get("startAngle"),l=this.get("endAngle"),u=[];if(Math.abs(l-s)===Math.PI*2)u=[["M",n,i-o],["A",a,o,0,1,1,n,i+o],["A",a,o,0,1,1,n,i-o],["Z"]];else{var c=this.getCirclePoint(s),f=this.getCirclePoint(l),d=Math.abs(l-s)>Math.PI?1:0,h=s>l?0:1;u=[["M",n,i],["L",c.x,c.y],["A",a,o,0,d,h,f.x,f.y],["L",n,i]]}return u},t.prototype.getTickPoint=function(e){var n=this.get("startAngle"),i=this.get("endAngle"),a=n+(i-n)*e;return this.getCirclePoint(a)},t.prototype.getSideVector=function(e,n){var i=this.get("center"),a=[n.x-i.x,n.y-i.y],o=this.get("verticalFactor"),s=Av(a);return di(a,a,o*e/s),a},t.prototype.getAxisVector=function(e){var n=this.get("center"),i=[e.x-n.x,e.y-n.y];return[i[1],-1*i[0]]},t.prototype.getCirclePoint=function(e,n){var i=this.get("center");return n=n||this.get("radius"),{x:i.x+Math.cos(e)*n,y:i.y+Math.sin(e)*n}},t.prototype.canProcessOverlap=function(e){var n=this.get("label");return e==="autoRotate"?Je(n.rotate):!0},t.prototype.processOverlap=function(e){var n=this,i=this.get("label"),a=this.get("title"),o=this.get("verticalLimitLength"),s=i.offset,l=o,u=0,c=0;a&&(u=a.style.fontSize,c=a.spacing),l&&(l=l-s-c-u);var f=this.get("overlapOrder");if(G(f,function(h){i[h]&&n.canProcessOverlap(h)&&n.autoProcessOverlap(h,i[h],e,l)}),a&&Je(a.offset)){var d=e.getCanvasBBox().height;a.offset=s+d+c+u/2}},t.prototype.autoProcessOverlap=function(e,n,i,a){var o=this,s=!1,l=EZ[e];if(a>0)if(n===!0)s=l.getDefault()(!1,i,a);else if(Vt(n))s=n(!1,i,a);else if(Kr(n)){var u=n;l[u.type]&&(s=l[u.type](!1,i,a,u.cfg))}else l[n]&&(s=l[n](!1,i,a));if(e==="autoRotate"){if(s){var c=i.getChildren(),f=this.get("verticalFactor");G(c,function(h){var v=h.attr("textAlign");if(v==="center"){var p=f>0?"end":"start";h.attr("textAlign",p)}})}}else if(e==="autoHide"){var d=i.getChildren().slice(0);G(d,function(h){h.get("visible")||(o.get("isRegister")&&o.unregisterElement(h),h.remove())})}},t}(mZ),lD=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:Zr.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:Zr.textColor,textAlign:"center",textBaseline:"middle",fontFamily:Zr.fontFamily}},textBackground:{padding:5,style:{stroke:Zr.lineColor}}}})},t.prototype.renderInner=function(e){this.get("line")&&this.renderLine(e),this.get("text")&&(this.renderText(e),this.renderBackground(e))},t.prototype.renderText=function(e){var n=this.get("text"),i=n.style,a=n.autoRotate,o=n.content;if(!Je(o)){var s=this.getTextPoint(),l=null;if(a){var u=this.getRotateAngle();l=Vp(s,u)}this.addShape(e,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:A(A(A({},s),{text:o,matrix:l}),i)})}},t.prototype.renderLine=function(e){var n=this.getLinePath(),i=this.get("line"),a=i.style;this.addShape(e,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:A({path:n},a)})},t.prototype.renderBackground=function(e){var n=this.getElementId("text"),i=e.findById(n),a=this.get("textBackground");if(a&&i){var o=i.getBBox(),s=kC(a.padding),l=a.style,u=this.addShape(e,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:A({x:o.x-s[3],y:o.y-s[0],width:o.width+s[1]+s[3],height:o.height+s[0]+s[2],matrix:i.attr("matrix")},l)});u.toBack()}},t}(eo),_Z=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{type:"line",locationType:"region",start:null,end:null})},t.prototype.getRotateAngle=function(){var e=this.getLocation(),n=e.start,i=e.end,a=this.get("text").position,o=Math.atan2(i.y-n.y,i.x-n.x),s=a==="start"?o-Math.PI/2:o+Math.PI/2;return s},t.prototype.getTextPoint=function(){var e=this.getLocation(),n=e.start,i=e.end,a=this.get("text"),o=a.position,s=a.offset;return pZ(n,i,o,s)},t.prototype.getLinePath=function(){var e=this.getLocation(),n=e.start,i=e.end;return[["M",n.x,n.y],["L",i.x,i.y]]},t}(lD),tKe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},t.prototype.getRotateAngle=function(){var e=this.getLocation(),n=e.startAngle,i=e.endAngle,a=this.get("text").position,o=a==="start"?n+Math.PI/2:i-Math.PI/2;return o},t.prototype.getTextPoint=function(){var e=this.get("text"),n=e.position,i=e.offset,a=this.getLocation(),o=a.center,s=a.radius,l=a.startAngle,u=a.endAngle,c=n==="start"?l:u,f=this.getRotateAngle()-Math.PI,d=Hp(o,s,c),h=Math.cos(f)*i,v=Math.sin(f)*i;return{x:d.x+h,y:d.y+v}},t.prototype.getLinePath=function(){var e=this.getLocation(),n=e.center,i=e.radius,a=e.startAngle,o=e.endAngle,s=null;if(o-a==Math.PI*2){var l=n.x,u=n.y;s=[["M",l,u-i],["A",i,i,0,1,1,l,u+i],["A",i,i,0,1,1,l,u-i],["Z"]]}else{var c=Hp(n,i,a),f=Hp(n,i,o),d=Math.abs(o-a)>Math.PI?1:0,h=a>o?0:1;s=[["M",c.x,c.y],["A",i,i,0,d,h,f.x,f.y]]}return s},t}(lD),G0="g2-crosshair",uD=G0+"-line",cD=G0+"-text",U0,rKe=(U0={},U0[""+G0]={position:"relative"},U0[""+uD]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},U0[""+cD]={position:"absolute",color:Zr.textColor,fontFamily:Zr.fontFamily},U0),nKe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+G0+'"></div>',crosshairTpl:'<div class="'+uD+'"></div>',textTpl:'<span class="'+cD+'">{content}</span>',domStyles:null,containerClassName:G0,defaultStyles:rKe,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},t.prototype.render=function(){this.resetText(),this.resetPosition()},t.prototype.initCrossHair=function(){var e=this.getContainer(),n=this.get("crosshairTpl"),i=Vn(n);e.appendChild(i),this.applyStyle(uD,i),this.set("crosshairEl",i)},t.prototype.getTextPoint=function(){var e=this.getLocation(),n=e.start,i=e.end,a=this.get("text"),o=a.position,s=a.offset;return pZ(n,i,o,s)},t.prototype.resetText=function(){var e=this.get("text"),n=this.get("textEl");if(e){var i=e.content;if(!n){var a=this.getContainer(),o=eT(this.get("textTpl"),e);n=Vn(o),a.appendChild(n),this.applyStyle(cD,n),this.set("textEl",n)}n.innerHTML=i}else n&&n.remove()},t.prototype.isVertical=function(e,n){return e.x===n.x},t.prototype.resetPosition=function(){var e=this.get("crosshairEl");e||(this.initCrossHair(),e=this.get("crosshairEl"));var n=this.get("start"),i=this.get("end"),a=Math.min(n.x,i.x),o=Math.min(n.y,i.y);this.isVertical(n,i)?Fr(e,{width:"1px",height:Vo(Math.abs(i.y-n.y))}):Fr(e,{height:"1px",width:Vo(Math.abs(i.x-n.x))}),Fr(e,{top:Vo(o),left:Vo(a)}),this.alignText()},t.prototype.alignText=function(){var e=this.get("textEl");if(e){var n=this.get("text").align,i=e.clientWidth,a=this.getTextPoint();switch(n){case"center":a.x=a.x-i/2;break;case"right":a.x=a.x-i}Fr(e,{top:Vo(a.y),left:Vo(a.x)})}},t.prototype.updateInner=function(e){Ml(e,"text")&&this.resetText(),r.prototype.updateInner.call(this,e)},t}(aD),TZ=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Line:_Z,Circle:tKe,Base:lD,Html:nKe}),AZ=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:Zr.lineColor}}}})},t.prototype.getLineType=function(){var e=this.get("line")||this.get("defaultCfg").line;return e.type},t.prototype.renderInner=function(e){this.drawGrid(e)},t.prototype.getAlternatePath=function(e,n){var i=this.getGridPath(e),a=n.slice(0).reverse(),o=this.getGridPath(a,!0),s=this.get("closed");return s?i=i.concat(o):(o[0][0]="L",i=i.concat(o),i.push(["Z"])),i},t.prototype.getPathStyle=function(){return this.get("line").style},t.prototype.drawGrid=function(e){var n=this,i=this.get("line"),a=this.get("items"),o=this.get("alternateColor"),s=null;G(a,function(l,u){var c=l.id||u;if(i){var f=n.getPathStyle();f=Vt(f)?f(l,u,a):f;var d=n.getElementId("line-"+c),h=n.getGridPath(l.points);n.addShape(e,{type:"path",name:"grid-line",id:d,attrs:$t({path:h},f)})}if(o&&u>0){var v=n.getElementId("region-"+c),p=u%2==0;if(rt(o))p&&n.drawAlternateRegion(v,e,s.points,l.points,o);else{var g=p?o[1]:o[0];n.drawAlternateRegion(v,e,s.points,l.points,g)}}s=l})},t.prototype.drawAlternateRegion=function(e,n,i,a,o){var s=this.getAlternatePath(i,a);this.addShape(n,{type:"path",id:e,name:"grid-region",attrs:{path:s,fill:o}})},t}(eo);function iKe(r,t,e,n){var i=e-r,a=n-t;return Math.sqrt(i*i+a*a)}var aKe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{type:"circle",center:null,closed:!0})},t.prototype.getGridPath=function(e,n){var i=this.getLineType(),a=this.get("closed"),o=[];if(e.length)if(i==="circle"){var s=this.get("center"),l=e[0],u=iKe(s.x,s.y,l.x,l.y),c=n?0:1;a?(o.push(["M",s.x,s.y-u]),o.push(["A",u,u,0,0,c,s.x,s.y+u]),o.push(["A",u,u,0,0,c,s.x,s.y-u]),o.push(["Z"])):G(e,function(f,d){d===0?o.push(["M",f.x,f.y]):o.push(["A",u,u,0,0,c,f.x,f.y])})}else G(e,function(f,d){d===0?o.push(["M",f.x,f.y]):o.push(["L",f.x,f.y])}),a&&o.push(["Z"]);return o},t}(AZ),oKe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{type:"line"})},t.prototype.getGridPath=function(e){var n=[];return G(e,function(i,a){a===0?n.push(["M",i.x,i.y]):n.push(["L",i.x,i.y])}),n},t}(AZ),MZ=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},t.prototype.getLayoutBBox=function(){var e=r.prototype.getLayoutBBox.call(this),n=this.get("maxWidth"),i=this.get("maxHeight"),a=e.width,o=e.height;return n&&(a=Math.min(a,n)),i&&(o=Math.min(o,i)),IC(e.minX,e.minY,a,o)},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetLocation()},t.prototype.resetLocation=function(){var e=this.get("x"),n=this.get("y"),i=this.get("offsetX"),a=this.get("offsetY");this.moveElementTo(this.get("group"),{x:e+i,y:n+a})},t.prototype.applyOffset=function(){this.resetLocation()},t.prototype.getDrawPoint=function(){return this.get("currentPoint")},t.prototype.setDrawPoint=function(e){return this.set("currentPoint",e)},t.prototype.renderInner=function(e){this.resetDraw(),this.get("title")&&this.drawTitle(e),this.drawLegendContent(e),this.get("background")&&this.drawBackground(e)},t.prototype.drawBackground=function(e){var n=this.get("background"),i=e.getBBox(),a=kC(n.padding),o=A({x:0,y:0,width:i.width+a[1]+a[3],height:i.height+a[0]+a[2]},n.style),s=this.addShape(e,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:o});s.toBack()},t.prototype.drawTitle=function(e){var n=this.get("currentPoint"),i=this.get("title"),a=i.spacing,o=i.style,s=i.text,l=this.addShape(e,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:A({text:s,x:n.x,y:n.y},o)}),u=l.getBBox();this.set("currentPoint",{x:n.x,y:u.maxY+a})},t.prototype.resetDraw=function(){var e=this.get("background"),n={x:0,y:0};if(e){var i=kC(e.padding);n.x=i[3],n.y=i[0]}this.set("currentPoint",n)},t}(eo),fD={marker:{style:{inactiveFill:"#000",inactiveOpacity:.45,fill:"#000",opacity:1,size:12}},text:{style:{fill:"#ccc",fontSize:12}}},RC={fill:Zr.textColor,fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:Zr.fontFamily,fontWeight:"normal",lineHeight:12},sKe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.currentPageIndex=1,e.totalPagesCnt=1,e.pageWidth=0,e.pageHeight=0,e.startX=0,e.startY=0,e.onNavigationBack=function(){var n=e.getElementByLocalId("item-group");if(e.currentPageIndex>1){e.currentPageIndex-=1,e.updateNavigation();var i=e.getCurrentNavigationMatrix();e.get("animate")?n.animate({matrix:i},100):n.attr({matrix:i})}},e.onNavigationAfter=function(){var n=e.getElementByLocalId("item-group");if(e.currentPageIndex<e.totalPagesCnt){e.currentPageIndex+=1,e.updateNavigation();var i=e.getCurrentNavigationMatrix();e.get("animate")?n.animate({matrix:i},100):n.attr({matrix:i})}},e}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:Zr.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:Zr.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},pageNavigator:fD,itemName:{spacing:16,style:RC},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:RC},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:Zr.uncheckedColor},markerStyle:{fill:Zr.uncheckedColor,stroke:Zr.uncheckedColor}},inactive:{nameStyle:{fill:Zr.uncheckedColor},markerStyle:{opacity:.2}}}}})},t.prototype.isList=function(){return!0},t.prototype.getItems=function(){return this.get("items")},t.prototype.setItems=function(e){this.update({items:e})},t.prototype.updateItem=function(e,n){$t(e,n),this.clear(),this.render()},t.prototype.clearItems=function(){var e=this.getElementByLocalId("item-group");e&&e.clear()},t.prototype.setItemState=function(e,n,i){e[n]=i;var a=this.getElementByLocalId("item-"+e.id);if(a){var o=this.getItems(),s=o.indexOf(e),l=this.createOffScreenGroup(),u=this.drawItem(e,s,this.getItemHeight(),l);this.updateElements(u,a),this.clearUpdateStatus(a)}},t.prototype.hasState=function(e,n){return!!e[n]},t.prototype.getItemStates=function(e){var n=this.get("itemStates"),i=[];return G(n,function(a,o){e[o]&&i.push(o)}),i},t.prototype.clearItemsState=function(e){var n=this,i=this.getItemsByState(e);G(i,function(a){n.setItemState(a,e,!1)})},t.prototype.getItemsByState=function(e){var n=this,i=this.getItems();return va(i,function(a){return n.hasState(a,e)})},t.prototype.drawLegendContent=function(e){this.processItems(),this.drawItems(e)},t.prototype.processItems=function(){var e=this.get("items");G(e,function(n){n.id||(n.id=n.name)})},t.prototype.drawItems=function(e){var n=this,i=this.addGroup(e,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),a=this.addGroup(i,{id:this.getElementId("item-group"),name:"legend-item-group"}),o=this.getItemHeight(),s=this.get("itemWidth"),l=this.get("itemSpacing"),u=this.get("itemMarginBottom"),c=this.get("currentPoint"),f=c.x,d=c.y,h=this.get("layout"),v=this.get("items"),p=!1,g=0,m=this.get("maxWidth"),y=this.get("maxHeight");G(v,function(b,x){var w=n.drawItem(b,x,o,a),S=w.getBBox(),C=s||S.width;C>g&&(g=C),h==="horizontal"?(m&&m<c.x+C-f&&(p=!0,c.x=f,c.y+=o+u),n.moveElementTo(w,c),c.x+=C+l):(y&&y<c.y+o+u-d&&(p=!0,c.x+=g+l,c.y=d,g=0),n.moveElementTo(w,c),c.y+=o+u)}),p&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=f,this.startY=d,this.adjustNavigation(e,a))},t.prototype.getItemHeight=function(){var e=this.get("itemHeight");if(!e){var n=(this.get("itemName")||{}).style;if(Vt(n)){var i=this.getItems();i.forEach(function(a,o){var s=A(A({},RC),n(a,o,i)).fontSize;e<s&&(e=s)})}else n&&(e=n.fontSize)}return e},t.prototype.drawMarker=function(e,n,i,a){var o=A(A(A({x:0,y:a/2},n.style),{symbol:ne(i.marker,"symbol","circle")}),ne(i.marker,"style",{})),s=this.addShape(e,{type:"marker",id:this.getElementId("item-"+i.id+"-marker"),name:"legend-item-marker",attrs:o}),l=s.getBBox();s.attr("x",l.width/2);var u=s.attr(),c=u.stroke,f=u.fill;return c&&s.set("isStroke",!0),f&&s.set("isFill",!0),s},t.prototype.drawItemText=function(e,n,i,a,o,s,l){var u=i.formatter,c=i.style,f=A(A({x:s,y:o/2,text:u?u(a[n],a,l):a[n]},RC),Vt(c)?c(a,l,this.getItems()):c);return this.addShape(e,{type:"text",id:this.getElementId("item-"+a.id+"-"+n),name:"legend-item-"+n,attrs:f})},t.prototype.drawItem=function(e,n,i,a){var o="item-"+e.id,s=this.addGroup(a,{name:"legend-item-container",id:this.getElementId("item-container-"+o),delegateObject:{item:e,index:n}}),l=this.addGroup(s,{name:"legend-item",id:this.getElementId(o),delegateObject:{item:e,index:n}}),u=this.get("marker"),c=this.get("itemName"),f=this.get("itemValue"),d=this.get("itemBackground"),h=this.getLimitItemWidth(),v=0;if(u){var p=this.drawMarker(l,u,e,i),g=u.spacing,m=ne(e,["marker","spacing"]);Rt(m)&&(g=m),v=p.getBBox().maxX+g}if(c){var y=this.drawItemText(l,"name",c,e,i,v,n);h&&B0(!0,y,Yn(h-v,0,h)),v=y.getBBox().maxX+c.spacing}if(f){var b=this.drawItemText(l,"value",f,e,i,v,n);h&&(f.alignRight?(b.attr({textAlign:"right",x:h}),B0(!0,b,Yn(h-v,0,h),"head")):B0(!0,b,Yn(h-v,0,h)))}if(d){var x=l.getBBox(),w=this.addShape(l,{type:"rect",name:"legend-item-background",id:this.getElementId(o+"-background"),attrs:A({x:0,y:0,width:x.width,height:i},d.style)});w.toBack()}return this.applyItemStates(e,l),l},t.prototype.adjustNavigation=function(e,n){var i=this,a=this.startX,o=this.startY,s=this.get("layout"),l=n.findAll(function(E){return E.get("name")==="legend-item"}),u=this.get("maxWidth"),c=this.get("maxHeight"),f=this.get("itemWidth"),d=this.get("itemSpacing"),h=this.getItemHeight(),v=Mt({},fD,this.get("pageNavigator")),p=this.drawNavigation(e,s,"00/00",v),g=p.getBBox(),m={x:a,y:o},y=1,b=0,x=0,w=0,S=this.get("itemMarginBottom");if(s==="horizontal"){var C=this.get("maxRow")||1,_=h+(C===1?0:S);this.pageHeight=_*C,G(l,function(E){var M=E.getBBox(),k=f||M.width;(b&&b<m.x+k+d||u<m.x+k+d+g.width)&&(y===1&&(b=m.x+d,i.pageWidth=b,i.moveElementTo(p,{x:u-d-g.width-g.minX,y:m.y+h/2-g.height/2-g.minY})),y+=1,m.x=a,m.y+=_),i.moveElementTo(E,m),E.getParent().setClip({type:"rect",attrs:{x:m.x,y:m.y,width:k+d,height:h}}),m.x+=k+d})}else{G(l,function(E){var M=E.getBBox();M.width>x&&(x=M.width)}),w=x,x+=d,u&&(x=Math.min(u,x),w=Math.min(u,w)),this.pageWidth=x,this.pageHeight=c-Math.max(g.height,h+S);var T=Math.floor(this.pageHeight/(h+S));G(l,function(E,M){M!==0&&M%T==0&&(y+=1,m.x+=x,m.y=o),i.moveElementTo(E,m),E.getParent().setClip({type:"rect",attrs:{x:m.x,y:m.y,width:x,height:h}}),m.y+=h+S}),this.totalPagesCnt=y,this.moveElementTo(p,{x:a+w/2-g.width/2-g.minX,y:c-g.height-g.minY})}this.pageHeight&&this.pageWidth&&n.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),s==="horizontal"&&this.get("maxRow")?this.totalPagesCnt=Math.ceil(y/this.get("maxRow")):this.totalPagesCnt=y,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(p),n.attr("matrix",this.getCurrentNavigationMatrix())},t.prototype.drawNavigation=function(e,n,i,a){var o={x:0,y:0},s=this.addGroup(e,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),l=ne(a.marker,"style",{}),u=l.size,c=u===void 0?12:u,f=Lr(l,["size"]),d=this.drawArrow(s,o,"navigation-arrow-left",n==="horizontal"?"up":"left",c,f);d.on("click",this.onNavigationBack);var h=d.getBBox();o.x+=h.width+2;var v=this.addShape(s,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:A({x:o.x,y:o.y+c/2,text:i,textBaseline:"middle"},ne(a.text,"style"))}),p=v.getBBox();o.x+=p.width+2;var g=this.drawArrow(s,o,"navigation-arrow-right",n==="horizontal"?"down":"right",c,f);return g.on("click",this.onNavigationAfter),s},t.prototype.updateNavigation=function(e){var n=Mt({},fD,this.get("pageNavigator")),i=n.marker.style,a=i.fill,o=i.opacity,s=i.inactiveFill,l=i.inactiveOpacity,u=this.currentPageIndex+"/"+this.totalPagesCnt,c=e?e.getChildren()[1]:this.getElementByLocalId("navigation-text"),f=e?e.findById(this.getElementId("navigation-arrow-left")):this.getElementByLocalId("navigation-arrow-left"),d=e?e.findById(this.getElementId("navigation-arrow-right")):this.getElementByLocalId("navigation-arrow-right"),h=c.getBBox();c.attr("text",u);var v=c.getBBox();c.attr("x",c.attr("x")-(v.width-h.width)/2),f.attr("opacity",this.currentPageIndex===1?l:o),f.attr("fill",this.currentPageIndex===1?s:a),f.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),d.attr("opacity",this.currentPageIndex===this.totalPagesCnt?l:o),d.attr("fill",this.currentPageIndex===this.totalPagesCnt?s:a),d.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer")},t.prototype.drawArrow=function(e,n,i,a,o,s){var l=n.x,u=n.y,c={right:90*Math.PI/180,left:(360-90)*Math.PI/180,up:0,down:180*Math.PI/180},f=this.addShape(e,{type:"path",id:this.getElementId(i),name:i,attrs:A({path:[["M",l+o/2,u],["L",l,u+o],["L",l+o,u+o],["Z"]],cursor:"pointer"},s)});return f.attr("matrix",Vp({x:l+o/2,y:u+o/2},c[a])),f},t.prototype.getCurrentNavigationMatrix=function(){var e=this,n=e.currentPageIndex,i=e.pageWidth,a=e.pageHeight,o=this.get("layout"),s=o==="horizontal"?{x:0,y:a*(1-n)}:{x:i*(1-n),y:0};return tD(s)},t.prototype.applyItemStates=function(e,n){var i=this.getItemStates(e),a=i.length>0;if(a){var o=n.getChildren(),s=this.get("itemStates");G(o,function(l){var u=l.get("name"),c=u.split("-")[2],f=$0(e,c,s);f&&(l.attr(f),c==="marker"&&!(l.get("isStroke")&&l.get("isFill"))&&(l.get("isStroke")&&l.attr("fill",null),l.get("isFill")&&l.attr("stroke",null)))})}},t.prototype.getLimitItemWidth=function(){var e=this.get("itemWidth"),n=this.get("maxItemWidth");return n?e&&(n=e<=n?e:n):e&&(n=e),n},t}(MZ),lKe=1.4,kZ=.4,uKe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:Zr.textColor,textBaseline:"middle",fontFamily:Zr.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:Zr.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},t.prototype.isSlider=function(){return!0},t.prototype.getValue=function(){return this.getCurrentValue()},t.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},t.prototype.setRange=function(e,n){this.update({min:e,max:n})},t.prototype.setValue=function(e){var n=this.getValue();this.set("value",e);var i=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(i),this.delegateEmit("valuechanged",{originValue:n,value:e})},t.prototype.initEvent=function(){var e=this.get("group");this.bindSliderEvent(e),this.bindRailEvent(e),this.bindTrackEvent(e)},t.prototype.drawLegendContent=function(e){this.drawRail(e),this.drawLabels(e),this.fixedElements(e),this.resetTrack(e),this.resetTrackClip(e),this.get("slidable")&&this.resetHandlers(e)},t.prototype.bindSliderEvent=function(e){this.bindHandlersEvent(e)},t.prototype.bindHandlersEvent=function(e){var n=this;e.on("legend-handler-min:drag",function(i){var a=n.getValueByCanvasPoint(i.x,i.y),o=n.getCurrentValue(),s=o[1];s<a&&(s=a),n.setValue([a,s])}),e.on("legend-handler-max:drag",function(i){var a=n.getValueByCanvasPoint(i.x,i.y),o=n.getCurrentValue(),s=o[0];s>a&&(s=a),n.setValue([s,a])})},t.prototype.bindRailEvent=function(e){},t.prototype.bindTrackEvent=function(e){var n=this,i=null;e.on("legend-track:dragstart",function(a){i={x:a.x,y:a.y}}),e.on("legend-track:drag",function(a){if(!!i){var o=n.getValueByCanvasPoint(i.x,i.y),s=n.getValueByCanvasPoint(a.x,a.y),l=n.getCurrentValue(),u=l[1]-l[0],c=n.getRange(),f=s-o;f<0?l[0]+f>c.min?n.setValue([l[0]+f,l[1]+f]):n.setValue([c.min,c.min+u]):f>0&&(f>0&&l[1]+f<c.max?n.setValue([l[0]+f,l[1]+f]):n.setValue([c.max-u,c.max])),i={x:a.x,y:a.y}}}),e.on("legend-track:dragend",function(a){i=null})},t.prototype.drawLabels=function(e){this.drawLabel("min",e),this.drawLabel("max",e)},t.prototype.drawLabel=function(e,n){var i=this.get("label"),a=i.style,o=i.align,s=i.formatter,l=this.get(e),u=this.getLabelAlignAttrs(e,o),c="label-"+e;this.addShape(n,{type:"text",id:this.getElementId(c),name:"legend-label-"+e,attrs:A(A({x:0,y:0,text:Vt(s)?s(l):l},a),u)})},t.prototype.getLabelAlignAttrs=function(e,n){var i=this.isVertical(),a="center",o="middle";return i?(a="start",n!=="rail"?e==="min"?o="top":o="bottom":o="top"):n!=="rail"?(o="top",e==="min"?a="start":a="end"):(a="start",o="middle"),{textAlign:a,textBaseline:o}},t.prototype.getRailPath=function(e,n,i,a){var o=this.get("rail"),s=o.size,l=o.defaultLength,u=o.type,c=this.isVertical(),f=l,d=i,h=a;d||(d=c?s:f),h||(h=c?f:s);var v=[];return u==="color"?(v.push(["M",e,n]),v.push(["L",e+d,n]),v.push(["L",e+d,n+h]),v.push(["L",e,n+h]),v.push(["Z"])):(v.push(["M",e+d,n]),v.push(["L",e+d,n+h]),v.push(["L",e,n+h]),v.push(["Z"])),v},t.prototype.drawRail=function(e){var n=this.get("rail"),i=n.style;this.addShape(e,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:A({path:this.getRailPath(0,0)},i)})},t.prototype.getTrackColor=function(e){var n=e.length;if(!n)return null;if(n===1)return e[0];var i;this.isVertical()?i="l(90)":i="l(0)";for(var a=0;a<n;a++){var o=a/(n-1);i+=" "+o+":"+e[a]}return i},t.prototype.getTrackPath=function(e){var n=this.getRailShape(e),i=n.attr("path");return Mr(i)},t.prototype.getClipTrackAttrs=function(e){var n=this.getCurrentValue(),i=n[0],a=n[1],o=this.getRailBBox(e),s=this.getPointByValue(i,e),l=this.getPointByValue(a,e),u=this.isVertical(),c,f,d,h;return u?(c=o.minX,f=s.y,d=o.width,h=l.y-s.y):(c=s.x,f=o.minY,d=l.x-s.x,h=o.height),{x:c,y:f,width:d,height:h}},t.prototype.getTrackAttrs=function(e){var n=this.get("track"),i=this.get("colors"),a=this.getTrackPath(e);return $t({path:a,fill:this.getTrackColor(i)},n.style)},t.prototype.resetTrackClip=function(e){var n=e||this.get("group"),i=this.getElementId("track"),a=n.findById(i),o=a.getClip(),s=this.getClipTrackAttrs(e);o?o.attr(s):a.setClip({type:"rect",attrs:s})},t.prototype.resetTrack=function(e){var n=this.getElementId("track"),i=e.findById(n),a=this.getTrackAttrs(e);i?i.attr(a):this.addShape(e,{type:"path",id:n,draggable:this.get("slidable"),name:"legend-track",attrs:a})},t.prototype.getPointByValue=function(e,n){var i=this.getRange(),a=i.min,o=i.max,s=(e-a)/(o-a),l=this.getRailBBox(n),u=this.isVertical(),c={x:0,y:0};return u?(c.x=l.minX+l.width/2,c.y=vh(l.minY,l.maxY,s)):(c.x=vh(l.minX,l.maxX,s),c.y=l.minY+l.height/2),c},t.prototype.getRailShape=function(e){var n=e||this.get("group");return n.findById(this.getElementId("rail"))},t.prototype.getRailBBox=function(e){var n=this.getRailShape(e),i=n.getBBox();return i},t.prototype.getRailCanvasBBox=function(){var e=this.get("group"),n=e.findById(this.getElementId("rail")),i=n.getCanvasBBox();return i},t.prototype.isVertical=function(){return this.get("layout")==="vertical"},t.prototype.getValueByCanvasPoint=function(e,n){var i=this.getRange(),a=i.min,o=i.max,s=this.getRailCanvasBBox(),l=this.isVertical(),u=this.get("step"),c;l?c=(n-s.minY)/s.height:c=(e-s.minX)/s.width;var f=vh(a,o,c);if(u){var d=Math.round((f-a)/u);f=a+d*u}return f>o&&(f=o),f<a&&(f=a),f},t.prototype.getCurrentValue=function(){var e=this.get("value");if(!e){var n=this.get("values");return n?[Math.max(Math.min.apply(Math,$n(n,[this.get("max")])),this.get("min")),Math.min(Math.max.apply(Math,$n(n,[this.get("min")])),this.get("max"))]:[this.get("min"),this.get("max")]}return e},t.prototype.resetHandlers=function(e){var n=this.getCurrentValue(),i=n[0],a=n[1];this.resetHandler(e,"min",i),this.resetHandler(e,"max",a)},t.prototype.getHandlerPath=function(e,n){var i=this.isVertical(),a=[],o=e.size,s=n.x,l=n.y,u=o*lKe,c=o/2,f=o/6;if(i){var d=s+u*kZ;a.push(["M",s,l]),a.push(["L",d,l+c]),a.push(["L",s+u,l+c]),a.push(["L",s+u,l-c]),a.push(["L",d,l-c]),a.push(["Z"]),a.push(["M",d,l+f]),a.push(["L",s+u-2,l+f]),a.push(["M",d,l-f]),a.push(["L",s+u-2,l-f])}else{var h=l+u*kZ;a.push(["M",s,l]),a.push(["L",s-c,h]),a.push(["L",s-c,l+u]),a.push(["L",s+c,l+u]),a.push(["L",s+c,h]),a.push(["Z"]),a.push(["M",s-f,h]),a.push(["L",s-f,l+u-2]),a.push(["M",s+f,h]),a.push(["L",s+f,l+u-2])}return a},t.prototype.resetHandler=function(e,n,i){var a=this.getPointByValue(i,e),o=this.get("handler"),s=this.getHandlerPath(o,a),l=this.getElementId("handler-"+n),u=e.findById(l),c=this.isVertical();u?u.attr("path",s):this.addShape(e,{type:"path",name:"legend-handler-"+n,draggable:!0,id:l,attrs:A(A({path:s},o.style),{cursor:c?"ns-resize":"ew-resize"})})},t.prototype.fixedElements=function(e){var n=e.findById(this.getElementId("rail")),i=e.findById(this.getElementId("label-min")),a=e.findById(this.getElementId("label-max")),o=this.getDrawPoint();this.isVertical()?this.fixedVertail(i,a,n,o):this.fixedHorizontal(i,a,n,o)},t.prototype.fitRailLength=function(e,n,i,a){var o=this.isVertical(),s=o?"height":"width",l=this.get("label"),u=l.align,c=l.spacing,f=this.get("max"+rs(s));if(f){var d=u==="rail"?i[s]+e[s]+n[s]+c*2:i[s],h=d-f;h>0&&this.changeRailLength(a,s,i[s]-h)}},t.prototype.changeRailLength=function(e,n,i){var a=e.getBBox(),o;n==="height"?o=this.getRailPath(a.x,a.y,a.width,i):o=this.getRailPath(a.x,a.y,i,a.height),e.attr("path",o)},t.prototype.changeRailPosition=function(e,n,i){var a=e.getBBox(),o=this.getRailPath(n,i,a.width,a.height);e.attr("path",o)},t.prototype.fixedHorizontal=function(e,n,i,a){var o=this.get("label"),s=o.align,l=o.spacing,u=i.getBBox(),c=e.getBBox(),f=n.getBBox(),d=u.height;this.fitRailLength(c,f,u,i),u=i.getBBox(),s==="rail"?(e.attr({x:a.x,y:a.y+d/2}),this.changeRailPosition(i,a.x+c.width+l,a.y),n.attr({x:a.x+c.width+u.width+l*2,y:a.y+d/2})):s==="top"?(e.attr({x:a.x,y:a.y}),n.attr({x:a.x+u.width,y:a.y}),this.changeRailPosition(i,a.x,a.y+c.height+l)):(this.changeRailPosition(i,a.x,a.y),e.attr({x:a.x,y:a.y+u.height+l}),n.attr({x:a.x+u.width,y:a.y+u.height+l}))},t.prototype.fixedVertail=function(e,n,i,a){var o=this.get("label"),s=o.align,l=o.spacing,u=i.getBBox(),c=e.getBBox(),f=n.getBBox();if(this.fitRailLength(c,f,u,i),u=i.getBBox(),s==="rail")e.attr({x:a.x,y:a.y}),this.changeRailPosition(i,a.x,a.y+c.height+l),n.attr({x:a.x,y:a.y+c.height+u.height+l*2});else if(s==="right")e.attr({x:a.x+u.width+l,y:a.y}),this.changeRailPosition(i,a.x,a.y),n.attr({x:a.x+u.width+l,y:a.y+u.height});else{var d=Math.max(c.width,f.width);e.attr({x:a.x,y:a.y}),this.changeRailPosition(i,a.x+d+l,a.y),n.attr({x:a.x,y:a.y+u.height})}},t}(MZ),Wp="g2-tooltip",jp="g2-tooltip-title",V0="g2-tooltip-list",OC="g2-tooltip-list-item",LC="g2-tooltip-marker",FC="g2-tooltip-value",IZ="g2-tooltip-name",dD="g2-tooltip-crosshair-x",hD="g2-tooltip-crosshair-y",cKe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",CONTAINER_CLASS:Wp,TITLE_CLASS:jp,LIST_CLASS:V0,LIST_ITEM_CLASS:OC,MARKER_CLASS:LC,VALUE_CLASS:FC,NAME_CLASS:IZ,CROSSHAIR_X:dD,CROSSHAIR_Y:hD}),ru,fKe=(ru={},ru[""+Wp]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:Zr.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},ru[""+jp]={marginBottom:"4px"},ru[""+V0]={margin:"0px",listStyleType:"none",padding:"0px"},ru[""+OC]={listStyleType:"none",marginBottom:"4px"},ru[""+LC]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},ru[""+FC]={display:"inline-block",float:"right",marginLeft:"30px"},ru[""+dD]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},ru[""+hD]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},ru);function dKe(r,t,e,n,i){var a={left:r<i.x,right:r+e>i.x+i.width,top:t<i.y,bottom:t+n>i.y+i.height};return a}function hKe(r,t,e,n,i,a){var o=r,s=t;switch(a){case"left":o=r-n-e,s=t-i/2;break;case"right":o=r+e,s=t-i/2;break;case"top":o=r-n/2,s=t-i-e;break;case"bottom":o=r-n/2,s=t+e;break;default:o=r+e,s=t-i-e;break}return{x:o,y:s}}function vKe(r,t,e,n,i,a,o){var s=hKe(r,t,e,n,i,a);if(o){var l=dKe(s.x,s.y,n,i,o);a==="auto"?(l.right&&(s.x=Math.max(0,r-n-e)),l.top&&(s.y=Math.max(0,t-i-e))):a==="top"||a==="bottom"?(l.left&&(s.x=o.x),l.right&&(s.x=o.x+o.width-n),a==="top"&&l.top&&(s.y=t+e),a==="bottom"&&l.bottom&&(s.y=t-i-e)):(l.top&&(s.y=o.y),l.bottom&&(s.y=o.y+o.height-i),a==="left"&&l.left&&(s.x=r+e),a==="right"&&l.right&&(s.x=r-n-e))}return s}function pKe(r,t){var e=!1;return G(t,function(n){if(Ml(r,n))return e=!0,!1}),e}var gKe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+Wp+'"><div class="'+jp+'"></div><ul class="'+V0+'"></ul></div>',itemTpl:'<li class="'+OC+`" data-index={index}>
          <span class="`+LC+`" style="background:{color}"></span>
          <span class="`+IZ+`">{name}</span>:
          <span class="`+FC+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+dD+'"></div>',yCrosshairTpl:'<div class="'+hD+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:Wp,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:fKe})},t.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},t.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},t.prototype.show=function(){var e=this.getContainer();!e||this.destroyed||(this.set("visible",!0),Fr(e,{visibility:"visible"}),this.setCrossHairsVisible(!0))},t.prototype.hide=function(){var e=this.getContainer();!e||this.destroyed||(this.set("visible",!1),Fr(e,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},t.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetPosition()},t.prototype.setCrossHairsVisible=function(e){var n=e?"":"none",i=this.get("xCrosshairDom"),a=this.get("yCrosshairDom");i&&Fr(i,{display:n}),a&&Fr(a,{display:n})},t.prototype.initContainer=function(){if(r.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var e=this.getHtmlContentNode();this.get("parent").appendChild(e),this.set("container",e),this.resetStyles(),this.applyStyles()}},t.prototype.updateInner=function(e){this.get("customContent")?this.renderCustomContent():(pKe(e,["title","showTitle"])&&this.resetTitle(),Ml(e,"items")&&this.renderItems()),r.prototype.updateInner.call(this,e)},t.prototype.initDom=function(){this.cacheDoms()},t.prototype.removeDom=function(){r.prototype.removeDom.call(this),this.clearCrosshairs()},t.prototype.resetPosition=function(){var e=this.get("x"),n=this.get("y"),i=this.get("offset"),a=this.getOffset(),o=a.offsetX,s=a.offsetY,l=this.get("position"),u=this.get("region"),c=this.getContainer(),f=this.getBBox(),d=f.width,h=f.height,v;u&&(v=N0(u));var p=vKe(e,n,i,d,h,l,v);Fr(c,{left:Vo(p.x+o),top:Vo(p.y+s)}),this.resetCrosshairs()},t.prototype.renderCustomContent=function(){var e=this.getHtmlContentNode(),n=this.get("parent"),i=this.get("container");i&&i.parentNode===n?n.replaceChild(e,i):n.appendChild(e),this.set("container",e),this.resetStyles(),this.applyStyles()},t.prototype.getHtmlContentNode=function(){var e,n=this.get("customContent");if(n){var i=n(this.get("title"),this.get("items"));rT(i)?e=i:e=Vn(i)}return e},t.prototype.cacheDoms=function(){var e=this.getContainer(),n=e.getElementsByClassName(jp)[0],i=e.getElementsByClassName(V0)[0];this.set("titleDom",n),this.set("listDom",i)},t.prototype.resetTitle=function(){var e=this.get("title"),n=this.get("showTitle");n&&e?this.setTitle(e):this.setTitle("")},t.prototype.setTitle=function(e){var n=this.get("titleDom");n&&(n.innerText=e)},t.prototype.resetCrosshairs=function(){var e=this.get("crosshairsRegion"),n=this.get("crosshairs");if(!e||!n)this.clearCrosshairs();else{var i=N0(e),a=this.get("xCrosshairDom"),o=this.get("yCrosshairDom");n==="x"?(this.resetCrosshair("x",i),o&&(o.remove(),this.set("yCrosshairDom",null))):n==="y"?(this.resetCrosshair("y",i),a&&(a.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",i),this.resetCrosshair("y",i)),this.setCrossHairsVisible(this.get("visible"))}},t.prototype.resetCrosshair=function(e,n){var i=this.checkCrosshair(e),a=this.get(e);e==="x"?Fr(i,{left:Vo(a),top:Vo(n.y),height:Vo(n.height)}):Fr(i,{top:Vo(a),left:Vo(n.x),width:Vo(n.width)})},t.prototype.checkCrosshair=function(e){var n=e+"CrosshairDom",i=e+"CrosshairTpl",a="CROSSHAIR_"+e.toUpperCase(),o=cKe[a],s=this.get(n),l=this.get("parent");return s||(s=Vn(this.get(i)),this.applyStyle(o,s),l.appendChild(s),this.set(n,s)),s},t.prototype.renderItems=function(){this.clearItemDoms();var e=this.get("items"),n=this.get("itemTpl"),i=this.get("listDom");i&&(G(e,function(a){var o=uf.toCSSGradient(a.color),s=A(A({},a),{color:o}),l=eT(n,s),u=Vn(l);i.appendChild(u)}),this.applyChildrenStyles(i,this.get("domStyles")))},t.prototype.clearItemDoms=function(){this.get("listDom")&&rD(this.get("listDom"))},t.prototype.clearCrosshairs=function(){var e=this.get("xCrosshairDom"),n=this.get("yCrosshairDom");e&&e.remove(),n&&n.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},t}(aD),mKe={opacity:0},yKe={stroke:"#C5C5C5",strokeOpacity:.85},bKe={fill:"#CACED4",opacity:.85};function xKe(r){return Gn(r,function(t,e){var n=e===0?"M":"L",i=t[0],a=t[1];return[n,i,a]})}function PZ(r){return xKe(r)}function wKe(r){if(r.length<=2)return PZ(r);var t=[];G(r,function(o){ri(o,t.slice(t.length-2))||t.push(o[0],o[1])});var e=fA(t,!1),n=xo(r),i=n[0],a=n[1];return e.unshift(["M",i,a]),e}function SKe(r,t,e,n){n===void 0&&(n=!0);var i=new Gd({values:r}),a=new gp({values:Gn(r,function(s,l){return l})}),o=Gn(r,function(s,l){return[a.scale(l)*t,e-i.scale(s)*e]});return n?wKe(o):PZ(o)}function CKe(r,t){var e=new Gd({values:r}),n=Math.max(0,e.min);return t-e.scale(n)*t}function EKe(r,t,e,n){var i=$n(r),a=CKe(n,e);return i.push(["L",t,a]),i.push(["L",0,a]),i.push(["Z"]),i}var _Ke=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:mKe,lineStyle:yKe,areaStyle:bKe})},t.prototype.renderInner=function(e){var n=this.cfg,i=n.width,a=n.height,o=n.data,s=n.smooth,l=n.isArea,u=n.backgroundStyle,c=n.lineStyle,f=n.areaStyle;this.addShape(e,{id:this.getElementId("background"),type:"rect",attrs:A({x:0,y:0,width:i,height:a},u)});var d=SKe(o,i,a,s);if(this.addShape(e,{id:this.getElementId("line"),type:"path",attrs:A({path:d},c)}),l){var h=EKe(d,i,a,o);this.addShape(e,{id:this.getElementId("area"),type:"path",attrs:A({path:h},f)})}},t.prototype.applyOffset=function(){var e=this.cfg,n=e.x,i=e.y;this.moveElementTo(this.get("group"),{x:n,y:i})},t}(eo),DZ={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},RZ=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"handler",x:0,y:0,width:10,height:24,style:DZ})},t.prototype.renderInner=function(e){var n=this.cfg,i=n.width,a=n.height,o=n.style,s=o.fill,l=o.stroke,u=o.radius,c=o.opacity,f=o.cursor;this.addShape(e,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:i,height:a,fill:s,stroke:l,radius:u,opacity:c,cursor:f}});var d=1/3*i,h=2/3*i,v=1/4*a,p=3/4*a;this.addShape(e,{id:this.getElementId("line-left"),type:"line",attrs:{x1:d,y1:v,x2:d,y2:p,stroke:l,cursor:f}}),this.addShape(e,{id:this.getElementId("line-right"),type:"line",attrs:{x1:h,y1:v,x2:h,y2:p,stroke:l,cursor:f}})},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.bindEvents=function(){var e=this;this.get("group").on("mouseenter",function(){var n=e.get("style").highLightFill;e.getElementByLocalId("background").attr("fill",n),e.draw()}),this.get("group").on("mouseleave",function(){var n=e.get("style").fill;e.getElementByLocalId("background").attr("fill",n),e.draw()})},t.prototype.draw=function(){var e=this.get("container").get("canvas");e&&e.draw()},t}(eo),TKe={fill:"#416180",opacity:.05},AKe={fill:"#5B8FF9",opacity:.15,cursor:"move"},NC=10,MKe={width:NC,height:24},kKe={textBaseline:"middle",fill:"#000",opacity:.45},IKe="sliderchange",PKe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.onMouseDown=function(n){return function(i){e.currentTarget=n;var a=i.originalEvent;a.stopPropagation(),a.preventDefault(),e.prevX=ne(a,"touches.0.pageX",a.pageX),e.prevY=ne(a,"touches.0.pageY",a.pageY);var o=e.getContainerDOM();o.addEventListener("mousemove",e.onMouseMove),o.addEventListener("mouseup",e.onMouseUp),o.addEventListener("mouseleave",e.onMouseUp),o.addEventListener("touchmove",e.onMouseMove),o.addEventListener("touchend",e.onMouseUp),o.addEventListener("touchcancel",e.onMouseUp)}},e.onMouseMove=function(n){var i=e.cfg.width,a=[e.get("start"),e.get("end")];n.stopPropagation(),n.preventDefault();var o=ne(n,"touches.0.pageX",n.pageX),s=ne(n,"touches.0.pageY",n.pageY),l=o-e.prevX,u=e.adjustOffsetRange(l/i);e.updateStartEnd(u),e.updateUI(e.getElementByLocalId("foreground"),e.getElementByLocalId("minText"),e.getElementByLocalId("maxText")),e.prevX=o,e.prevY=s,e.draw(),e.emit(IKe,[e.get("start"),e.get("end")].sort()),e.delegateEmit("valuechanged",{originValue:a,value:[e.get("start"),e.get("end")]})},e.onMouseUp=function(){e.currentTarget&&(e.currentTarget=void 0);var n=e.getContainerDOM();n&&(n.removeEventListener("mousemove",e.onMouseMove),n.removeEventListener("mouseup",e.onMouseUp),n.removeEventListener("mouseleave",e.onMouseUp),n.removeEventListener("touchmove",e.onMouseMove),n.removeEventListener("touchend",e.onMouseUp),n.removeEventListener("touchcancel",e.onMouseUp))},e}return t.prototype.setRange=function(e,n){this.set("minLimit",e),this.set("maxLimit",n);var i=this.get("start"),a=this.get("end"),o=Yn(i,e,n),s=Yn(a,e,n);!this.get("isInit")&&(i!==o||a!==s)&&this.setValue([o,s])},t.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},t.prototype.setValue=function(e){var n=this.getRange();if(qe(e)&&e.length===2){var i=[this.get("start"),this.get("end")];this.update({start:Yn(e[0],n.min,n.max),end:Yn(e[1],n.min,n.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:i,value:e})}},t.prototype.getValue=function(){return[this.get("start"),this.get("end")]},t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:TKe,foregroundStyle:AKe,handlerStyle:MKe,textStyle:kKe}})},t.prototype.update=function(e){var n=e.start,i=e.end,a=A({},e);Je(n)||(a.start=Yn(n,0,1)),Je(i)||(a.end=Yn(i,0,1)),r.prototype.update.call(this,a),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},t.prototype.init=function(){this.set("start",Yn(this.get("start"),0,1)),this.set("end",Yn(this.get("end"),0,1)),r.prototype.init.call(this)},t.prototype.render=function(){r.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},t.prototype.renderInner=function(e){var n=this.cfg;n.start,n.end;var i=n.width,a=n.height,o=n.trendCfg,s=o===void 0?{}:o,l=n.minText,u=n.maxText,c=n.backgroundStyle,f=c===void 0?{}:c,d=n.foregroundStyle,h=d===void 0?{}:d,v=n.textStyle,p=v===void 0?{}:v,g=Mt({},DZ,this.cfg.handlerStyle);aa(ne(s,"data"))&&(this.trend=this.addComponent(e,A({component:_Ke,id:this.getElementId("trend"),x:0,y:0,width:i,height:a},s))),this.addShape(e,{id:this.getElementId("background"),type:"rect",attrs:A({x:0,y:0,width:i,height:a},f)}),this.addShape(e,{id:this.getElementId("minText"),type:"text",attrs:A({y:a/2,textAlign:"right",text:l,silent:!1},p)}),this.addShape(e,{id:this.getElementId("maxText"),type:"text",attrs:A({y:a/2,textAlign:"left",text:u,silent:!1},p)}),this.addShape(e,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:A({y:0,height:a},h)});var m=ne(g,"width",NC),y=ne(g,"height",24);this.minHandler=this.addComponent(e,{component:RZ,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(a-y)/2,width:m,height:y,cursor:"ew-resize",style:g}),this.maxHandler=this.addComponent(e,{component:RZ,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(a-y)/2,width:m,height:y,cursor:"ew-resize",style:g})},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.updateUI=function(e,n,i){var a=this.cfg,o=a.start,s=a.end,l=a.width,u=a.minText,c=a.maxText,f=a.handlerStyle,d=a.height,h=o*l,v=s*l;this.trend&&(this.trend.update({width:l,height:d}),this.get("updateAutoRender")||this.trend.render()),e.attr("x",h),e.attr("width",v-h);var p=ne(f,"width",NC);n.attr("text",u),i.attr("text",c);var g=this._dodgeText([h,v],n,i),m=g[0],y=g[1];this.minHandler&&(this.minHandler.update({x:h-p/2}),this.get("updateAutoRender")||this.minHandler.render()),G(m,function(b,x){return n.attr(x,b)}),this.maxHandler&&(this.maxHandler.update({x:v-p/2}),this.get("updateAutoRender")||this.maxHandler.render()),G(y,function(b,x){return i.attr(x,b)})},t.prototype.bindEvents=function(){var e=this.get("group");e.on("handler-min:mousedown",this.onMouseDown("minHandler")),e.on("handler-min:touchstart",this.onMouseDown("minHandler")),e.on("handler-max:mousedown",this.onMouseDown("maxHandler")),e.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var n=e.findById(this.getElementId("foreground"));n.on("mousedown",this.onMouseDown("foreground")),n.on("touchstart",this.onMouseDown("foreground"))},t.prototype.adjustOffsetRange=function(e){var n=this.cfg,i=n.start,a=n.end;switch(this.currentTarget){case"minHandler":{var o=0-i,s=1-i;return Math.min(s,Math.max(o,e))}case"maxHandler":{var o=0-a,s=1-a;return Math.min(s,Math.max(o,e))}case"foreground":{var o=0-i,s=1-a;return Math.min(s,Math.max(o,e))}}},t.prototype.updateStartEnd=function(e){var n=this.cfg,i=n.start,a=n.end;switch(this.currentTarget){case"minHandler":i+=e;break;case"maxHandler":a+=e;break;case"foreground":i+=e,a+=e;break}this.set("start",i),this.set("end",a)},t.prototype._dodgeText=function(e,n,i){var a,o,s=this.cfg,l=s.handlerStyle,u=s.width,c=2,f=ne(l,"width",NC),d=e[0],h=e[1],v=!1;d>h&&(a=[h,d],d=a[0],h=a[1],o=[i,n],n=o[0],i=o[1],v=!0);var p=n.getBBox(),g=i.getBBox(),m=p.width>d-c?{x:d+f/2+c,textAlign:"left"}:{x:d-f/2-c,textAlign:"right"},y=g.width>u-h-c?{x:h-f/2-c,textAlign:"right"}:{x:h+f/2+c,textAlign:"left"};return v?[y,m]:[m,y]},t.prototype.draw=function(){var e=this.get("container"),n=e&&e.get("canvas");n&&n.draw()},t.prototype.getContainerDOM=function(){var e=this.get("container"),n=e&&e.get("canvas");return n&&n.get("container")},t}(eo),DKe={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},vD={default:DKe,hover:{thumbColor:"rgba(0,0,0,0.2)"}},RKe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.clearEvents=ns,e.onStartEvent=function(n){return function(i){e.isMobile=n,i.originalEvent.preventDefault();var a=n?ne(i.originalEvent,"touches.0.clientX"):i.clientX,o=n?ne(i.originalEvent,"touches.0.clientY"):i.clientY;e.startPos=e.cfg.isHorizontal?a:o,e.bindLaterEvent()}},e.bindLaterEvent=function(){var n=e.getContainerDOM(),i=[];e.isMobile?i=[Js(n,"touchmove",e.onMouseMove),Js(n,"touchend",e.onMouseUp),Js(n,"touchcancel",e.onMouseUp)]:i=[Js(n,"mousemove",e.onMouseMove),Js(n,"mouseup",e.onMouseUp),Js(n,"mouseleave",e.onMouseUp)],e.clearEvents=function(){i.forEach(function(a){a.remove()})}},e.onMouseMove=function(n){var i=e.cfg,a=i.isHorizontal,o=i.thumbOffset;n.preventDefault();var s=e.isMobile?ne(n,"touches.0.clientX"):n.clientX,l=e.isMobile?ne(n,"touches.0.clientY"):n.clientY,u=a?s:l,c=u-e.startPos;e.startPos=u,e.updateThumbOffset(o+c)},e.onMouseUp=function(n){n.preventDefault(),e.clearEvents()},e.onTrackClick=function(n){var i=e.cfg,a=i.isHorizontal,o=i.x,s=i.y,l=i.thumbLen,u=e.getContainerDOM(),c=u.getBoundingClientRect(),f=n.clientX,d=n.clientY,h=a?f-c.left-o-l/2:d-c.top-s-l/2,v=e.validateRange(h);e.updateThumbOffset(v)},e.onThumbMouseOver=function(){var n=e.cfg.theme.hover.thumbColor;e.getElementByLocalId("thumb").attr("stroke",n),e.draw()},e.onThumbMouseOut=function(){var n=e.cfg.theme.default.thumbColor;e.getElementByLocalId("thumb").attr("stroke",n),e.draw()},e}return t.prototype.setRange=function(e,n){this.set("minLimit",e),this.set("maxLimit",n);var i=this.getValue(),a=Yn(i,e,n);i!==a&&!this.get("isInit")&&this.setValue(a)},t.prototype.getRange=function(){var e=this.get("minLimit")||0,n=this.get("maxLimit")||1;return{min:e,max:n}},t.prototype.setValue=function(e){var n=this.getRange(),i=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*Yn(e,n.min,n.max)}),this.delegateEmit("valuechange",{originalValue:i,value:this.getValue()})},t.prototype.getValue=function(){return Yn(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return A(A({},e),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:vD})},t.prototype.renderInner=function(e){this.renderTrackShape(e),this.renderThumbShape(e)},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.renderTrackShape=function(e){var n=this.cfg,i=n.trackLen,a=n.theme,o=a===void 0?{default:{}}:a,s=Mt({},vD,o).default,l=s.lineCap,u=s.trackColor,c=s.size,f=ne(this.cfg,"size",c),d=this.get("isHorizontal")?{x1:0+f/2,y1:f/2,x2:i-f/2,y2:f/2,lineWidth:f,stroke:u,lineCap:l}:{x1:f/2,y1:0+f/2,x2:f/2,y2:i-f/2,lineWidth:f,stroke:u,lineCap:l};return this.addShape(e,{id:this.getElementId("track"),name:"track",type:"line",attrs:d})},t.prototype.renderThumbShape=function(e){var n=this.cfg,i=n.thumbOffset,a=n.thumbLen,o=n.theme,s=Mt({},vD,o).default,l=s.size,u=s.lineCap,c=s.thumbColor,f=ne(this.cfg,"size",l),d=this.get("isHorizontal")?{x1:i+f/2,y1:f/2,x2:i+a-f/2,y2:f/2,lineWidth:f,stroke:c,lineCap:u,cursor:"default"}:{x1:f/2,y1:i+f/2,x2:f/2,y2:i+a-f/2,lineWidth:f,stroke:c,lineCap:u,cursor:"default"};return this.addShape(e,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:d})},t.prototype.bindEvents=function(){var e=this.get("group");e.on("mousedown",this.onStartEvent(!1)),e.on("mouseup",this.onMouseUp),e.on("touchstart",this.onStartEvent(!0)),e.on("touchend",this.onMouseUp);var n=e.findById(this.getElementId("track"));n.on("click",this.onTrackClick);var i=e.findById(this.getElementId("thumb"));i.on("mouseover",this.onThumbMouseOver),i.on("mouseout",this.onThumbMouseOut)},t.prototype.getContainerDOM=function(){var e=this.get("container"),n=e&&e.get("canvas");return n&&n.get("container")},t.prototype.validateRange=function(e){var n=this.cfg,i=n.thumbLen,a=n.trackLen,o=e;return e+i>a?o=a-i:e+i<i&&(o=0),o},t.prototype.draw=function(){var e=this.get("container"),n=e&&e.get("canvas");n&&n.draw()},t.prototype.updateThumbOffset=function(e){var n=this.cfg,i=n.thumbOffset,a=n.isHorizontal,o=n.thumbLen,s=n.size,l=this.validateRange(e);if(l!==i){var u=this.getElementByLocalId("thumb");a?u.attr({x1:l+s/2,x2:l+o-s/2}):u.attr({y1:l+s/2,y2:l+o-s/2}),this.emitOffsetChange(l)}},t.prototype.emitOffsetChange=function(e){var n=this.cfg,i=n.thumbOffset,a=n.trackLen,o=n.thumbLen;this.cfg.thumbOffset=e,this.emit("scrollchange",{thumbOffset:e,ratio:Yn(e/(a-o),0,1)}),this.delegateEmit("valuechange",{originalValue:i,value:e})},t}(eo),OKe=Jqe,LKe=eKe,FKe=oKe,NKe=aKe,OZ=sKe,BKe=uKe,LZ=gKe;function $Ke(r){if(oo(r))return null;var t=r[0].x,e=r[0].x,n=r[0].y,i=r[0].y;return G(r,function(a){t=t>a.x?a.x:t,e=e<a.x?a.x:e,n=n>a.y?a.y:n,i=i<a.y?a.y:i}),{minX:t,maxX:e,minY:n,maxY:i,centerX:(t+e)/2,centerY:(n+i)/2}}function FZ(r){return Array.from(new Set(r)).length===1}function NZ(r){return(ia(r)+ji(r))/2}function ea(r,t,e,n){return{x:r+e*Math.cos(n),y:t+e*Math.sin(n)}}function cf(r,t,e,n,i,a){a===void 0&&(a=0);var o=ea(r,t,e,n),s=ea(r,t,e,i),l=ea(r,t,a,n),u=ea(r,t,a,i);if(i-n==Math.PI*2){var c=ea(r,t,e,n+Math.PI),f=ea(r,t,a,n+Math.PI),d=[["M",o.x,o.y],["A",e,e,0,1,1,c.x,c.y],["A",e,e,0,1,1,s.x,s.y],["M",l.x,l.y]];return a&&(d.push(["A",a,a,0,1,0,f.x,f.y]),d.push(["A",a,a,0,1,0,u.x,u.y])),d.push(["M",o.x,o.y]),d.push(["Z"]),d}var h=i-n<=Math.PI?0:1,v=[["M",o.x,o.y],["A",e,e,0,h,1,s.x,s.y],["L",u.x,u.y]];return a&&v.push(["A",a,a,0,h,0,l.x,l.y]),v.push(["L",o.x,o.y]),v.push(["Z"]),v}function BZ(r,t,e,n,i){var a=ea(r,t,e,n),o=ea(r,t,e,i);if(pa(i-n,Math.PI*2)){var s=ea(r,t,e,n+Math.PI);return[["M",a.x,a.y],["A",e,e,0,1,1,s.x,s.y],["A",e,e,0,1,1,a.x,a.y],["A",e,e,0,1,0,s.x,s.y],["A",e,e,0,1,0,a.x,a.y],["Z"]]}var l=i-n<=Math.PI?0:1;return[["M",a.x,a.y],["A",e,e,0,l,1,o.x,o.y]]}function H0(r,t){var e=r.points,n=$Ke(e),i,a,o=t.startAngle,s=t.endAngle,l=s-o;return t.isTransposed?(i=n.maxY*l,a=n.minY*l):(i=n.maxX*l,a=n.minX*l),i+=o,a+=o,{startAngle:a,endAngle:i}}function zKe(r,t){if(Rt(r)&&Rt(t))return[r,t];if(r=r,t=t,FZ(r)||FZ(t))return[NZ(r),NZ(t)];for(var e=-1,n=0,i=0,a,o=r.length-1,s,l=0;++e<r.length;)a=o,o=e,l+=s=r[a]*t[o]-r[o]*t[a],n+=(r[a]+r[o])*s,i+=(t[a]+t[o])*s;return l*=3,[n/l,i/l]}function $Z(r,t){var e=r.attr(),n=t.attr();return G(e,function(i,a){n[a]===void 0&&(n[a]=void 0)}),n}function Yp(r,t,e){var n=Math.min(t,e),i=Math.max(t,e);return r>=n&&r<=i}function GKe(r,t,e){if(rt(r))return r.padEnd(t,e);if(qe(r)){var n=r.length;if(n<t)for(var i=t-n,a=0;a<i;a++)r.push(e)}return r}function Ho(r,t){return typeof r=="object"&&t.forEach(function(e){delete r[e]}),r}function ff(r,t,e){t===void 0&&(t=[]),e===void 0&&(e=new Map);for(var n=0,i=r;n<i.length;n++){var a=i[n];e.has(a)||(t.push(a),e.set(a,!0))}return t}var Mo=function(){function r(t,e,n,i){t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=t,this.y=e,this.height=i,this.width=n}return r.fromRange=function(t,e,n,i){return new r(t,e,n-t,i-e)},r.fromObject=function(t){return new r(t.minX,t.minY,t.width,t.height)},Object.defineProperty(r.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),r.prototype.isEqual=function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},r.prototype.contains=function(t){return t.minX>=this.minX&&t.maxX<=this.maxX&&t.minY>=this.minY&&t.maxY<=this.maxY},r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.clone();return G(t,function(i){n.x=Math.min(i.x,n.x),n.y=Math.min(i.y,n.y),n.width=Math.max(i.maxX,n.maxX)-n.x,n.height=Math.max(i.maxY,n.maxY)-n.y}),n},r.prototype.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.clone();return G(t,function(i){n.x=Math.max(i.x,n.x),n.y=Math.max(i.y,n.y),n.width=Math.min(i.maxX,n.maxX)-n.x,n.height=Math.min(i.maxY,n.maxY)-n.y}),n},r.prototype.cut=function(t,e){var n=t.width,i=t.height;switch(e){case Nt.TOP:case Nt.TOP_LEFT:case Nt.TOP_RIGHT:return r.fromRange(this.minX,this.minY+i,this.maxX,this.maxY);case Nt.RIGHT:case Nt.RIGHT_TOP:case Nt.RIGHT_BOTTOM:return r.fromRange(this.minX,this.minY,this.maxX-n,this.maxY);case Nt.BOTTOM:case Nt.BOTTOM_LEFT:case Nt.BOTTOM_RIGHT:return r.fromRange(this.minX,this.minY,this.maxX,this.maxY-i);case Nt.LEFT:case Nt.LEFT_TOP:case Nt.LEFT_BOTTOM:return r.fromRange(this.minX+n,this.minY,this.maxX,this.maxY);default:return this}},r.prototype.shrink=function(t){var e=t[0],n=t[1],i=t[2],a=t[3];return new r(this.x+a,this.y+e,this.width-a-n,this.height-e-i)},r.prototype.expand=function(t){var e=t[0],n=t[1],i=t[2],a=t[3];return new r(this.x-a,this.y-e,this.width+a+n,this.height+e+i)},r.prototype.exceed=function(t){return[Math.max(-this.minY+t.minY,0),Math.max(this.maxX-t.maxX,0),Math.max(this.maxY-t.maxY,0),Math.max(-this.minX+t.minX,0)]},r.prototype.collide=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},r.prototype.size=function(){return this.width*this.height},r.prototype.isPointIn=function(t){return t.x>=this.minX&&t.x<=this.maxX&&t.y>=this.minY&&t.y<=this.maxY},r}();function UKe(r){return[[r.minX,r.minY],[r.maxX,r.minY],[r.maxX,r.maxY],[r.minX,r.maxY]]}function W0(r){if(r.isPolar&&!r.isTransposed)return(r.endAngle-r.startAngle)*r.getRadius();var t=r.convert({x:0,y:0}),e=r.convert({x:1,y:0});return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function VKe(r){if(r.isPolar){var t=r.startAngle,e=r.endAngle;return e-t==Math.PI*2}return!1}function BC(r,t){var e=r.getCenter();return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function pD(r,t){var e=!1;if(r)if(r.type==="theta"){var n=r.start,i=r.end;e=Yp(t.x,n.x,i.x)&&Yp(t.y,n.y,i.y)}else{var a=r.invert(t);e=Yp(a.x,0,1)&&Yp(a.y,0,1)}return e}function Xp(r,t){var e=r.getCenter();return Math.atan2(t.y-e.y,t.x-e.x)}function zZ(r,t){t===void 0&&(t=0);var e=r.start,n=r.end,i=r.getWidth(),a=r.getHeight();if(r.isPolar){var o=r.startAngle,s=r.endAngle,l=r.getCenter(),u=r.getRadius();return{type:"path",startState:{path:cf(l.x,l.y,u+t,o,o)},endState:function(f){var d=(s-o)*f+o,h=cf(l.x,l.y,u+t,o,d);return{path:h}},attrs:{path:cf(l.x,l.y,u+t,o,s)}}}var c;return r.isTransposed?c={height:a+t*2}:c={width:i+t*2},{type:"rect",startState:{x:e.x-t,y:n.y-t,width:r.isTransposed?i+t*2:0,height:r.isTransposed?0:a+t*2},endState:c,attrs:{x:e.x-t,y:n.y-t,width:i+t*2,height:a+t*2}}}function HKe(r,t){t===void 0&&(t=0);var e=r.start,n=r.end,i=r.getWidth(),a=r.getHeight(),o=Math.min(e.x,n.x),s=Math.min(e.y,n.y);return Mo.fromRange(o-t,s-t,o+i+t,s+a+t)}var WKe=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function jKe(r){var t="linear";return WKe.test(r)?t="timeCat":rt(r)&&(t="cat"),t}function YKe(r,t,e){var n=t||[];if(Rt(r)||Je(h3(n,r))&&oo(e)){var i=Uk("identity");return new i({field:r.toString(),values:[r]})}var a=As(n,r),o=ne(e,"type",jKe(a[0])),s=Uk(o);return new s(A({field:r,values:a},e))}function XKe(r,t){if(r.type!=="identity"&&t.type!=="identity"){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);r.change(e)}}function j0(r){return r.alias||r.field}function GZ(r,t,e){var n=r.values,i=n.length,a;if(i===1)a=[.5,1];else{var o=1,s=0;VKe(t)?t.isTransposed?(o=ne(e,"widthRatio.multiplePie",1/1.3),s=1/i*o,a=[s/2,1-s/2]):a=[0,1-1/i]:(s=1/i/2,a=[s,1-s])}return a}function qKe(r){var t=r.values.filter(function(e){return!Je(e)&&!isNaN(e)});return Math.max.apply(Math,Jn(Jn([],t,!1),[Je(r.max)?-1/0:r.max],!1))}function KKe(r){var t,e;switch(r){case Nt.TOP:t={x:0,y:1},e={x:1,y:1};break;case Nt.RIGHT:t={x:1,y:0},e={x:1,y:1};break;case Nt.BOTTOM:t={x:0,y:0},e={x:1,y:0};break;case Nt.LEFT:t={x:0,y:0},e={x:0,y:1};break;default:t=e={x:0,y:0}}return{start:t,end:e}}function ZKe(r){var t,e;return r.isTransposed?(t={x:0,y:0},e={x:1,y:0}):(t={x:0,y:0},e={x:0,y:1}),{start:t,end:e}}function $C(r,t){var e={start:{x:0,y:0},end:{x:0,y:0}};r.isRect?e=KKe(t):r.isPolar&&(e=ZKe(r));var n=e.start,i=e.end;return{start:r.convert(n),end:r.convert(i)}}function UZ(r){var t=r.start,e=r.end;return t.x===e.x}function VZ(r,t){var e=r.start,n=r.end,i=UZ(r);return i?(e.y-n.y)*(t.x-e.x)>0?1:-1:(n.x-e.x)*(e.y-t.y)>0?-1:1}function zC(r,t){var e=ne(r,["components","axis"],{});return Mt({},ne(e,["common"],{}),Mt({},ne(e,[t],{})))}function HZ(r,t,e){var n=ne(r,["components","axis"],{});return Mt({},ne(n,["common","title"],{}),Mt({},ne(n,[t,"title"],{})),e)}function gD(r){var t=r.x,e=r.y,n=r.circleCenter,i=e.start>e.end,a=r.isTransposed?r.convert({x:i?0:1,y:0}):r.convert({x:0,y:i?0:1}),o=[a.x-n.x,a.y-n.y],s=[1,0],l=a.y>n.y?hT(o,s):hT(o,s)*-1,u=l+(t.end-t.start),c=Math.sqrt(Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2));return{center:n,radius:c,startAngle:l,endAngle:u}}function GC(r,t){return yu(r)?r===!1?!1:{}:ne(r,[t])}function WZ(r,t){return ne(r,"position",t)}function jZ(r,t){return ne(t,["title","text"],j0(r))}var qp=function(){function r(t,e){this.destroyed=!1,this.facets=[],this.view=t,this.cfg=Mt({},this.getDefaultCfg(),e)}return r.prototype.init=function(){this.container||(this.container=this.createContainer());var t=this.view.getData();this.facets=this.generateFacets(t)},r.prototype.render=function(){this.renderViews()},r.prototype.update=function(){},r.prototype.clear=function(){this.clearFacetViews()},r.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},r.prototype.facetToView=function(t){var e=t.region,n=t.data,i=t.padding,a=i===void 0?this.cfg.padding:i,o=this.view.createView({region:e,padding:a});o.data(n||[]),t.view=o,this.beforeEachView(o,t);var s=this.cfg.eachView;return s&&s(o,t),this.afterEachView(o,t),o},r.prototype.createContainer=function(){var t=this.view.getLayer(zi.FORE);return t.addGroup()},r.prototype.renderViews=function(){this.createFacetViews()},r.prototype.createFacetViews=function(){var t=this;return this.facets.map(function(e){return t.facetToView(e)})},r.prototype.clearFacetViews=function(){var t=this;G(this.facets,function(e){e.view&&(t.view.removeView(e.view),e.view=void 0)})},r.prototype.parseSpacing=function(){var t=this.view.viewBBox,e=t.width,n=t.height,i=this.cfg.spacing;return i.map(function(a,o){return Rt(a)?a/(o===0?e:n):parseFloat(a)/100})},r.prototype.getFieldValues=function(t,e){var n=[],i={};return G(t,function(a){var o=a[e];!Je(o)&&!i[o]&&(n.push(o),i[o]=!0)}),n},r.prototype.getRegion=function(t,e,n,i){var a=this.parseSpacing(),o=a[0],s=a[1],l=(1+o)/(e===0?1:e)-o,u=(1+s)/(t===0?1:t)-s,c={x:(l+o)*n,y:(u+s)*i},f={x:c.x+l,y:c.y+u};return{start:c,end:f}},r.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,spacing:[0,0],padding:10,fields:[]}},r.prototype.getDefaultTitleCfg=function(){var t=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:t}}},r.prototype.processAxis=function(t,e){var n=t.getOptions(),i=n.coordinate,a=t.geometries,o=ne(i,"type","rect");if(o==="rect"&&a.length){Je(n.axes)&&(n.axes={});var s=n.axes,l=a[0].getXYFields(),u=l[0],c=l[1],f=GC(s,u),d=GC(s,c);f!==!1&&(n.axes[u]=this.getXAxisOption(u,s,f,e)),d!==!1&&(n.axes[c]=this.getYAxisOption(c,s,d,e))}},r.prototype.getFacetDataFilter=function(t){return function(e){return Nx(t,function(n){var i=n.field,a=n.value;return!Je(a)&&i?e[i]===a:!0})}},r}(),YZ={},QKe=function(r){return YZ[Qf(r)]},Kp=function(r,t){YZ[Qf(r)]=t},ui=function(){function r(t,e){this.context=t,this.cfg=e,t.addAction(this)}return r.prototype.applyCfg=function(t){$t(this,t)},r.prototype.init=function(){this.applyCfg(this.cfg)},r.prototype.destroy=function(){this.context.removeAction(this),this.context=null},r}(),JKe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.execute=function(){this.callback&&this.callback(this.context)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.callback=null},t}(ui),mD={};function eZe(r,t){var e=mD[r],n=null;if(e){var i=e.ActionClass,a=e.cfg;n=new i(t,a),n.name=r,n.init()}return n}function UC(r){var t=mD[r];return ne(t,"ActionClass")}function gr(r,t,e){mD[r]={ActionClass:t,cfg:e}}function tZe(r,t){var e=new JKe(t);return e.callback=r,e.name="callback",e}function rZe(r,t){var e=[];if(r.length){e.push(["M",r[0].x,r[0].y]);for(var n=1,i=r.length;n<i;n+=1){var a=r[n];e.push(["L",a.x,a.y])}t&&e.push(["Z"])}return e}function yD(r,t){for(var e=[r[0]],n=1,i=r.length;n<i;n=n+2){var a=t.convert({x:r[n],y:r[n+1]});e.push(a.x,a.y)}return e}function XZ(r,t){var e=t.isTransposed,n=r[1],i=r[6],a=r[7],o=t.convert({x:i,y:a}),s=e?0:1;return["A",n,n,0,0,s,o.x,o.y]}function nZe(r,t,e){var n=e.isTransposed,i=e.startAngle,a=e.endAngle,o=r[0].toLowerCase()==="a"?{x:r[6],y:r[7]}:{x:r[1],y:r[2]},s={x:t[1],y:t[2]},l=[],u=n?"y":"x",c=Math.abs(s[u]-o[u])*(a-i),f=s[u]>=o[u]?1:0,d=c>Math.PI?1:0,h=e.convert(s),v=BC(e,h);if(v>=.5)if(c===Math.PI*2){var p={x:(s.x+o.x)/2,y:(s.y+o.y)/2},g=e.convert(p);l.push(["A",v,v,0,d,f,g.x,g.y]),l.push(["A",v,v,0,d,f,h.x,h.y])}else l.push(["A",v,v,0,d,f,h.x,h.y]);return l}function iZe(r){G(r,function(t,e){var n=t;if(n[0].toLowerCase()==="a"){var i=r[e-1],a=r[e+1];a&&a[0].toLowerCase()==="a"?i&&i[0].toLowerCase()==="l"&&(i[0]="M"):i&&i[0].toLowerCase()==="a"&&a&&a[0].toLowerCase()==="l"&&(a[0]="M")}})}var aZe=function(r,t,e,n){var i=[],a=!!n,o,s,l,u,c,f,d;if(a){l=n[0],u=n[1];for(var h=0,v=r.length;h<v;h++){var p=r[h];l=Oa([0,0],l,p),u=La([0,0],u,p)}}for(var h=0,g=r.length;h<g;h++){var p=r[h];if(h===0&&!e)d=p;else if(h===g-1&&!e)f=p,i.push(d),i.push(f);else{o=r[e?h?h-1:g-1:h-1],s=r[e?(h+1)%g:h+1];var m=[0,0];m=nd(m,s,o),m=di(m,m,t);var y=Tv(p,o),b=Tv(p,s),x=y+b;x!==0&&(y/=x,b/=x);var w=di([0,0],m,-y),S=di([0,0],m,b);f=Oi([0,0],p,w),c=Oi([0,0],p,S),c=Oa([0,0],c,La([0,0],s,p)),c=La([0,0],c,Oa([0,0],s,p)),w=nd([0,0],c,p),w=di([0,0],w,-y/b),f=Oi([0,0],p,w),f=Oa([0,0],f,La([0,0],o,p)),f=La([0,0],f,Oa([0,0],o,p)),S=nd([0,0],p,f),S=di([0,0],S,b/y),c=Oi([0,0],p,S),a&&(f=La([0,0],f,l),f=Oa([0,0],f,u),c=La([0,0],c,l),c=Oa([0,0],c,u)),i.push(d),i.push(f),d=c}}return e&&i.push(i.shift()),i};function qZ(r,t,e){for(var n=!!t,i=[],a=0,o=r.length;a<o;a+=2)i.push([r[a],r[a+1]]);for(var s=aZe(i,.4,n,e),l=i.length,u=[],c,f,d,a=0;a<l-1;a++)c=s[a*2],f=s[a*2+1],d=i[a+1],u.push(["C",c[0],c[1],f[0],f[1],d[0],d[1]]);return n&&(c=s[l],f=s[l+1],d=i[0],u.push(["C",c[0],c[1],f[0],f[1],d[0],d[1]])),u}function Y0(r,t){return rZe(r,t)}function VC(r,t,e){var n=[],i=r[0],a=null;if(r.length<=2)return Y0(r,t);for(var o=0,s=r.length;o<s;o++){var l=r[o];(!a||!(a.x===l.x&&a.y===l.y))&&(n.push(l.x),n.push(l.y),a=l)}var u=e||[[0,0],[1,1]],c=qZ(n,t,u);return c.unshift(["M",i.x,i.y]),c}function oZe(r,t){var e=[];return G(t,function(n){var i=n[0];switch(i.toLowerCase()){case"m":case"l":case"c":e.push(yD(n,r));break;case"a":e.push(XZ(n,r));break;case"z":default:e.push(n);break}}),e}function sZe(r,t){var e=[],n,i,a,o;return G(t,function(s,l){var u=s[0];switch(u.toLowerCase()){case"m":case"c":case"q":e.push(yD(s,r));break;case"l":n=t[l-1],i=s,a=r.isTransposed,o=a?n[n.length-2]===i[1]:n[n.length-1]===i[2],o?e=e.concat(nZe(n,i,r)):e.push(yD(s,r));break;case"a":e.push(XZ(s,r));break;case"z":default:e.push(s);break}}),iZe(e),e}function KZ(r,t){var e=r.event,n=e.target,i=n.getCanvasBBox();return i.width>=t||i.height>=t?i:null}function lZe(r,t){var e=r.event,n=e.target,i=n.getCanvasBBox();return i.width>=t||i.height>=t?n.attr("path"):null}function df(r){var t=r.event,e,n=t.target;return n&&(e=n.get("element")),e}function Zp(r){var t=r.event,e=t.target,n;return e&&(n=e.get("delegateObject")),n}function ZZ(r){var t=r.event.gEvent;return!(t&&t.fromShape&&t.toShape&&t.fromShape.get("element")===t.toShape.get("element"))}function X0(r){return r&&r.component&&r.component.isList()}function QZ(r){return r&&r.component&&r.component.isSlider()}function q0(r){var t=r.event,e=t.target;return e&&e.get("name")==="mask"}function bD(r,t){var e=r.event.target;if(e.get("type")==="path"){var n=lZe(r,t);return n?fZe(r.view,n):void 0}var i=KZ(r,t);return i?xD(r.view,i):null}function JZ(r,t,e){var n=KZ(r,e);if(!n)return null;var i=r.view,a=SD(i,t,{x:n.x,y:n.y}),o=SD(i,t,{x:n.maxX,y:n.maxY}),s={minX:a.x,minY:a.y,maxX:o.x,maxY:o.y};return xD(t,s)}function Ga(r){var t=r.geometries,e=[];return G(t,function(n){var i=n.elements;e=e.concat(i)}),r.views&&r.views.length&&G(r.views,function(n){e=e.concat(Ga(n))}),e}function uZe(r,t,e){var n=Ga(r);return n.filter(function(i){return ul(i,t)===e})}function eQ(r,t){var e=r.geometries,n=[];return G(e,function(i){var a=i.getElementsBy(function(o){return o.hasState(t)});n=n.concat(a)}),n}function ul(r,t){var e=r.getModel(),n=e.data,i;return qe(n)?i=n[0][t]:i=n[t],i}function cZe(r,t){return!(t.minX>r.maxX||t.maxX<r.minX||t.minY>r.maxY||t.maxY<r.minY)}function xD(r,t){var e=Ga(r),n=[];return G(e,function(i){var a=i.shape,o=a.getCanvasBBox();cZe(t,o)&&n.push(i)}),n}function tQ(r){var t=[];return G(r,function(e){var n=e[0];if(n!=="A")for(var i=1;i<e.length;i=i+2)t.push([e[i],e[i+1]]);else{var a=e.length;t.push([e[a-2],e[a-1]])}}),t}function fZe(r,t){var e=Ga(r),n=tQ(t),i=e.filter(function(a){var o=a.shape,s;if(o.get("type")==="path")s=tQ(o.attr("path"));else{var l=o.getCanvasBBox();s=UKe(l)}return Fhe(n,s)});return i}function rQ(r){return r.getComponents().map(function(t){return t.component})}function wD(r,t){var e=t.x-r.x,n=t.y-r.y;return Math.sqrt(e*e+n*n)}function dZe(r,t){if(r.length<=2)return Y0(r,!1);var e=r[0],n=[];G(r,function(a){n.push(a.x),n.push(a.y)});var i=qZ(n,t,null);return i.unshift(["M",e.x,e.y]),i}function nQ(r,t){return r.x<=t.x&&r.maxX>=t.x&&r.y<=t.y&&r.maxY>t.y}function nu(r){var t=r.parent,e=null;return t&&(e=t.views.filter(function(n){return n!==r})),e}function hZe(r,t){var e=r.getCoordinate();return e.invert(t)}function SD(r,t,e){var n=hZe(r,e);return t.getCoordinate().convert(n)}function iQ(r,t,e,n){var i=!1;return G(r,function(a){if(a[e]===t[e]&&a[n]===t[n])return i=!0,!1}),i}function Qp(r,t){var e=r.getScaleByField(t);return!e&&r.views&&G(r.views,function(n){if(e=Qp(n,t),e)return!1}),e}var vZe=function(){function r(t){this.actions=[],this.event=null,this.cacheMap={},this.view=t}return r.prototype.cache=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length===1)return this.cacheMap[t[0]];t.length===2&&(this.cacheMap[t[0]]=t[1])},r.prototype.getAction=function(t){return this.actions.find(function(e){return e.name===t})},r.prototype.addAction=function(t){this.actions.push(t)},r.prototype.removeAction=function(t){var e=this.actions,n=this.actions.indexOf(t);n>=0&&e.splice(n,1)},r.prototype.getCurrentPoint=function(){var t=this.event;if(t)if(t.target instanceof HTMLElement){var e=this.view.getCanvas(),n=e.getPointByClient(t.clientX,t.clientY);return n}else return{x:t.x,y:t.y};return null},r.prototype.getCurrentShape=function(){return ne(this.event,["gEvent","shape"])},r.prototype.isInPlot=function(){var t=this.getCurrentPoint();return t?this.view.isPointInPlot(t):!1},r.prototype.isInShape=function(t){var e=this.getCurrentShape();return e?e.get("name")===t:!1},r.prototype.isInComponent=function(t){var e=rQ(this.view),n=this.getCurrentPoint();return n?!!e.find(function(i){var a=i.getBBox();return t?i.get("name")===t&&nQ(a,n):nQ(a,n)}):!1},r.prototype.destroy=function(){G(this.actions.slice(),function(t){t.destroy()}),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},r}(),pZe=function(){function r(t,e){this.view=t,this.cfg=e}return r.prototype.init=function(){this.initEvents()},r.prototype.initEvents=function(){},r.prototype.clearEvents=function(){},r.prototype.destroy=function(){this.clearEvents()},r}();function aQ(r,t,e){var n=r.split(":"),i=n[0],a=t.getAction(i)||eZe(i,t);if(!a)throw new Error("There is no action named "+i);var o=n[1];return{action:a,methodName:o,arg:e}}function oQ(r){var t=r.action,e=r.methodName,n=r.arg;if(t[e])t[e](n);else throw new Error("Action("+t.name+") doesn't have a method called "+e)}var ds={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},gZe=function(r){Te(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.callbackCaches={},i.emitCaches={},i.steps=n,i}return t.prototype.init=function(){this.initContext(),r.prototype.init.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},t.prototype.initEvents=function(){var e=this;G(this.steps,function(n,i){G(n,function(a){var o=e.getActionCallback(i,a);o&&e.bindEvent(a.trigger,o)})})},t.prototype.clearEvents=function(){var e=this;G(this.steps,function(n,i){G(n,function(a){var o=e.getActionCallback(i,a);o&&e.offEvent(a.trigger,o)})})},t.prototype.initContext=function(){var e=this.view,n=new vZe(e);this.context=n;var i=this.steps;G(i,function(a){G(a,function(o){if(Vt(o.action))o.actionObject={action:tZe(o.action,n),methodName:"execute"};else if(rt(o.action))o.actionObject=aQ(o.action,n,o.arg);else if(qe(o.action)){var s=o.action,l=qe(o.arg)?o.arg:[o.arg];o.actionObject=[],G(s,function(u,c){o.actionObject.push(aQ(u,n,l[c]))})}})})},t.prototype.isAllowStep=function(e){var n=this.currentStepName,i=this.steps;if(n===e||e===ds.SHOW_ENABLE)return!0;if(e===ds.PROCESSING)return n===ds.START;if(e===ds.START)return n!==ds.PROCESSING;if(e===ds.END)return n===ds.PROCESSING||n===ds.START;if(e===ds.ROLLBACK){if(i[ds.END])return n===ds.END;if(n===ds.START)return!0}return!1},t.prototype.isAllowExecute=function(e,n){if(this.isAllowStep(e)){var i=this.getKey(e,n);return n.once&&this.emitCaches[i]?!1:n.isEnable?n.isEnable(this.context):!0}return!1},t.prototype.enterStep=function(e){this.currentStepName=e,this.emitCaches={}},t.prototype.afterExecute=function(e,n){e!==ds.SHOW_ENABLE&&this.currentStepName!==e&&this.enterStep(e);var i=this.getKey(e,n);this.emitCaches[i]=!0},t.prototype.getKey=function(e,n){return e+n.trigger+n.action},t.prototype.getActionCallback=function(e,n){var i=this,a=this.context,o=this.callbackCaches,s=n.actionObject;if(n.action&&s){var l=this.getKey(e,n);if(!o[l]){var u=function(c){a.event=c,i.isAllowExecute(e,n)?(qe(s)?G(s,function(f){a.event=c,oQ(f)}):(a.event=c,oQ(s)),i.afterExecute(e,n),n.callback&&(a.event=c,n.callback(a))):a.event=null};n.debounce?o[l]=lm(u,n.debounce.wait,n.debounce.immediate):n.throttle?o[l]=xv(u,n.throttle.wait,{leading:n.throttle.leading,trailing:n.throttle.trailing}):o[l]=u}return o[l]}return null},t.prototype.bindEvent=function(e,n){var i=e.split(":");i[0]==="window"?window.addEventListener(i[1],n):i[0]==="document"?document.addEventListener(i[1],n):this.view.on(e,n)},t.prototype.offEvent=function(e,n){var i=e.split(":");i[0]==="window"?window.removeEventListener(i[1],n):i[0]==="document"?document.removeEventListener(i[1],n):this.view.off(e,n)},t}(pZe),sQ={};function mZe(r){return sQ[Qf(r)]}function kr(r,t){sQ[Qf(r)]=t}function yZe(r,t,e){var n=mZe(r);if(!n)return null;if(Ri(n)){var i=$t(Mr(n),e);return new gZe(t,i)}else{var a=n;return new a(t,e)}}function bZe(r){return{title:{autoRotate:!0,position:"center",spacing:r.axisTitleSpacing,style:{fill:r.axisTitleTextFillColor,fontSize:r.axisTitleTextFontSize,lineHeight:r.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:r.fontFamily}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:r.axisLabelOffset,style:{fill:r.axisLabelFillColor,fontSize:r.axisLabelFontSize,lineHeight:r.axisLabelLineHeight,fontFamily:r.fontFamily}},line:{style:{lineWidth:r.axisLineBorder,stroke:r.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:r.axisGridBorderColor,lineWidth:r.axisGridBorder,lineDash:r.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:r.axisTickLineBorder,stroke:r.axisTickLineBorderColor},alignTick:!0,length:r.axisTickLineLength},subTickLine:null,animate:!0}}function xZe(r){return{title:null,marker:{symbol:"circle",spacing:r.legendMarkerSpacing,style:{r:r.legendCircleMarkerSize,fill:r.legendMarkerColor}},itemName:{spacing:5,style:{fill:r.legendItemNameFillColor,fontFamily:r.fontFamily,fontSize:r.legendItemNameFontSize,lineHeight:r.legendItemNameLineHeight,fontWeight:r.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:r.legendPageNavigatorMarkerSize,inactiveFill:r.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:r.legendPageNavigatorMarkerInactiveFillOpacity,fill:r.legendPageNavigatorMarkerFillColor,opacity:r.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:r.legendPageNavigatorTextFillColor,fontSize:r.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:r.legendItemSpacing,itemMarginBottom:r.legendItemMarginBottom,padding:r.legendPadding}}function lQ(r){var t,e={point:{default:{fill:r.pointFillColor,r:r.pointSize,stroke:r.pointBorderColor,lineWidth:r.pointBorder,fillOpacity:r.pointFillOpacity},active:{stroke:r.pointActiveBorderColor,lineWidth:r.pointActiveBorder},selected:{stroke:r.pointSelectedBorderColor,lineWidth:r.pointSelectedBorder},inactive:{fillOpacity:r.pointInactiveFillOpacity,strokeOpacity:r.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:r.hollowPointFillColor,lineWidth:r.hollowPointBorder,stroke:r.hollowPointBorderColor,strokeOpacity:r.hollowPointBorderOpacity,r:r.hollowPointSize},active:{stroke:r.hollowPointActiveBorderColor,strokeOpacity:r.hollowPointActiveBorderOpacity},selected:{lineWidth:r.hollowPointSelectedBorder,stroke:r.hollowPointSelectedBorderColor,strokeOpacity:r.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:r.hollowPointInactiveBorderOpacity}},area:{default:{fill:r.areaFillColor,fillOpacity:r.areaFillOpacity,stroke:null},active:{fillOpacity:r.areaActiveFillOpacity},selected:{fillOpacity:r.areaSelectedFillOpacity},inactive:{fillOpacity:r.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:r.hollowAreaBorderColor,lineWidth:r.hollowAreaBorder,strokeOpacity:r.hollowAreaBorderOpacity},active:{fill:null,lineWidth:r.hollowAreaActiveBorder},selected:{fill:null,lineWidth:r.hollowAreaSelectedBorder},inactive:{strokeOpacity:r.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:r.intervalFillColor,fillOpacity:r.intervalFillOpacity},active:{stroke:r.intervalActiveBorderColor,lineWidth:r.intervalActiveBorder},selected:{stroke:r.intervalSelectedBorderColor,lineWidth:r.intervalSelectedBorder},inactive:{fillOpacity:r.intervalInactiveFillOpacity,strokeOpacity:r.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:r.hollowIntervalFillColor,stroke:r.hollowIntervalBorderColor,lineWidth:r.hollowIntervalBorder,strokeOpacity:r.hollowIntervalBorderOpacity},active:{stroke:r.hollowIntervalActiveBorderColor,lineWidth:r.hollowIntervalActiveBorder,strokeOpacity:r.hollowIntervalActiveBorderOpacity},selected:{stroke:r.hollowIntervalSelectedBorderColor,lineWidth:r.hollowIntervalSelectedBorder,strokeOpacity:r.hollowIntervalSelectedBorderOpacity},inactive:{stroke:r.hollowIntervalInactiveBorderColor,lineWidth:r.hollowIntervalInactiveBorder,strokeOpacity:r.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:r.lineBorderColor,lineWidth:r.lineBorder,strokeOpacity:r.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:r.lineActiveBorder},selected:{lineWidth:r.lineSelectedBorder},inactive:{strokeOpacity:r.lineInactiveBorderOpacity}}},n=bZe(r),i=xZe(r);return{background:r.backgroundColor,defaultColor:r.brandColor,subColor:r.subColor,semanticRed:r.paletteSemanticRed,semanticGreen:r.paletteSemanticGreen,padding:"auto",fontFamily:r.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:r.paletteQualitative10,colors20:r.paletteQualitative20,sequenceColors:r.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:function(a){var o=a.geometry.coordinate;if(o.isPolar&&o.isTransposed){var s=H0(a.getModel(),o),l=s.startAngle,u=s.endAngle,c=(l+u)/2,f=7.5,d=f*Math.cos(c),h=f*Math.sin(c);return{matrix:Un(null,[["t",d,h]])}}return e.interval.selected}}},"hollow-rect":{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},line:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},tick:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},funnel:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:e.interval.selected}},pyramid:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:e.interval.selected}}},line:{line:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},dot:{default:{style:A(A({},e.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:A(A({},e.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:A(A({},e.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:A(A({},e.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:A(A({},e.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:A(A({},e.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:A(A({},e.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:A(A({},e.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},hv:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},vh:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},hvh:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},vhv:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}}},polygon:{polygon:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:e.interval.selected}}},point:{circle:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},square:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},bowtie:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},diamond:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},hexagon:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},triangle:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},"triangle-down":{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},"hollow-circle":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-square":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-bowtie":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-diamond":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-hexagon":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-triangle":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-triangle-down":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},cross:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},tick:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},plus:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},hyphen:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},line:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}}},area:{area:{default:{style:e.area.default},active:{style:e.area.active},inactive:{style:e.area.inactive},selected:{style:e.area.selected}},smooth:{default:{style:e.area.default},active:{style:e.area.active},inactive:{style:e.area.inactive},selected:{style:e.area.selected}},line:{default:{style:e.hollowArea.default},active:{style:e.hollowArea.active},inactive:{style:e.hollowArea.inactive},selected:{style:e.hollowArea.selected}},"smooth-line":{default:{style:e.hollowArea.default},active:{style:e.hollowArea.active},inactive:{style:e.hollowArea.inactive},selected:{style:e.hollowArea.selected}}},schema:{candle:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},box:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}}},edge:{line:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},vhv:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},smooth:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},arc:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}}},violin:{violin:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},smooth:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},hollow:{default:{style:e.hollowArea.default},active:{style:e.hollowArea.active},inactive:{style:e.hollowArea.inactive},selected:{style:e.hollowArea.selected}},"hollow-smooth":{default:{style:e.hollowArea.default},active:{style:e.hollowArea.active},inactive:{style:e.hollowArea.inactive},selected:{style:e.hollowArea.selected}}}},components:{axis:{common:n,top:{position:"top",grid:null,title:null,verticalLimitLength:1/2},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:1/2},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:Mt({},n.grid,{line:{type:"line"}})},radius:{title:null,grid:Mt({},n.grid,{line:{type:"circle"}})}},legend:{common:i,right:{layout:"vertical",padding:r.legendVerticalPadding},left:{layout:"vertical",padding:r.legendVerticalPadding},top:{layout:"horizontal",padding:r.legendHorizontalPadding},bottom:{layout:"horizontal",padding:r.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:r.sliderRailHeight,defaultLength:r.sliderRailWidth,style:{fill:r.sliderRailFillColor,stroke:r.sliderRailBorderColor,lineWidth:r.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:r.sliderLabelTextFillColor,fontSize:r.sliderLabelTextFontSize,lineHeight:r.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:r.fontFamily}},handler:{size:r.sliderHandlerWidth,style:{fill:r.sliderHandlerFillColor,stroke:r.sliderHandlerBorderColor}},slidable:!0,padding:i.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:r.tooltipCrosshairsBorderColor,lineWidth:r.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(t={},t[""+Wp]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:r.tooltipContainerFillColor,opacity:r.tooltipContainerFillOpacity,boxShadow:r.tooltipContainerShadow,borderRadius:r.tooltipContainerBorderRadius+"px",color:r.tooltipTextFillColor,fontSize:r.tooltipTextFontSize+"px",fontFamily:r.fontFamily,lineHeight:r.tooltipTextLineHeight+"px",padding:"0 12px 0 12px"},t[""+jp]={marginBottom:"12px",marginTop:"12px"},t[""+V0]={margin:0,listStyleType:"none",padding:0},t[""+OC]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},t[""+LC]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},t[""+FC]={display:"inline-block",float:"right",marginLeft:"30px"},t)},annotation:{arc:{style:{stroke:r.annotationArcBorderColor,lineWidth:r.annotationArcBorder},animate:!0},line:{style:{stroke:r.annotationLineBorderColor,lineDash:r.annotationLineDash,lineWidth:r.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,textAlign:"start",fontFamily:r.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:r.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:r.annotationRegionBorder,stroke:r.annotationRegionBorderColor,fill:r.annotationRegionFillColor,fillOpacity:r.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:r.brandColor,lineWidth:2}},line:{style:{stroke:r.annotationLineBorderColor,lineWidth:r.annotationLineBorder},length:r.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,fontFamily:r.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:r.annotationRegionFillColor,fillOpacity:r.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,fontFamily:r.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:r.cSliderBackgroundFillColor,opacity:r.cSliderBackgroundFillOpacity},foregroundStyle:{fill:r.cSliderForegroundFillColor,opacity:r.cSliderForegroundFillOpacity},handlerStyle:{width:r.cSliderHandlerWidth,height:r.cSliderHandlerHeight,fill:r.cSliderHandlerFillColor,opacity:r.cSliderHandlerFillOpacity,stroke:r.cSliderHandlerBorderColor,lineWidth:r.cSliderHandlerBorder,radius:r.cSliderHandlerBorderRadius,highLightFill:r.cSliderHandlerHighlightFillColor},textStyle:{fill:r.cSliderTextFillColor,opacity:r.cSliderTextFillOpacity,fontSize:r.cSliderTextFontSize,lineHeight:r.cSliderTextLineHeight,fontWeight:r.cSliderTextFontWeight,stroke:r.cSliderTextBorderColor,lineWidth:r.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:r.scrollbarTrackFillColor,thumbColor:r.scrollbarThumbFillColor}},hover:{style:{thumbColor:r.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:r.labelFillColor,fontSize:r.labelFontSize,fontFamily:r.fontFamily,stroke:r.labelBorderColor,lineWidth:r.labelBorder},fillColorDark:r.labelFillColorDark,fillColorLight:r.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:r.innerLabelFillColor,fontSize:r.innerLabelFontSize,fontFamily:r.fontFamily,stroke:r.innerLabelBorderColor,lineWidth:r.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:r.overflowLabelFillColor,fontSize:r.overflowLabelFontSize,fontFamily:r.fontFamily,stroke:r.overflowLabelBorderColor,lineWidth:r.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:r.labelLineBorder}},autoRotate:!0}}}var In={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},K0={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},wZe=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],SZe=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],CZe=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],uQ=function(r){r===void 0&&(r={});var t=r.backgroundColor,e=t===void 0?"transparent":t,n=r.subColor,i=n===void 0?"rgba(0,0,0,0.05)":n,a=r.paletteQualitative10,o=a===void 0?wZe:a,s=r.paletteQualitative20,l=s===void 0?SZe:s,u=r.paletteSemanticRed,c=u===void 0?"#F4664A":u,f=r.paletteSemanticGreen,d=f===void 0?"#30BF78":f,h=r.paletteSemanticYellow,v=h===void 0?"#FAAD14":h,p=r.paletteSequence,g=p===void 0?CZe:p,m=r.fontFamily,y=m===void 0?`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:m,b=r.brandColor,x=b===void 0?o[0]:b;return{backgroundColor:e,brandColor:x,subColor:i,paletteQualitative10:o,paletteQualitative20:l,paletteSemanticRed:c,paletteSemanticGreen:d,paletteSemanticYellow:v,paletteSequence:g,fontFamily:y,axisLineBorderColor:In[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:In[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:In[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:In[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:In[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:In[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:In[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:x,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:In[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:In[100],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:In[100],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:In[45],legendPageNavigatorTextFontSize:12,sliderRailFillColor:In[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:In[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:In[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:In[25],annotationArcBorderColor:In[15],annotationArcBorder:1,annotationLineBorderColor:In[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:In[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:In[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:In[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:In[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:In[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:K0[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:In[65],overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:K0[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:In[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:x,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:K0[100],pointBorderOpacity:1,pointActiveBorderColor:In[100],pointSelectedBorder:2,pointSelectedBorderColor:In[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:x,hollowPointBorderOpacity:.95,hollowPointFillColor:K0[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:In[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:In[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:x,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:x,areaFillOpacity:.25,areaActiveFillColor:x,areaActiveFillOpacity:.5,areaSelectedFillColor:x,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:x,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:In[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:In[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:x,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:In[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:In[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:x,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:K0[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:In[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:In[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}};uQ();function HC(r){var t=r.styleSheet,e=t===void 0?{}:t,n=Lr(r,["styleSheet"]),i=uQ(e);return Mt({},lQ(i),n)}var EZe=HC({}),CD={default:EZe};function Z0(r){return ne(CD,Qf(r),CD.default)}function _Ze(r,t){CD[Qf(r)]=HC(t)}function cQ(r,t,e){var n=e.translate(r),i=e.translate(t);return pa(n,i)}function TZe(r,t){var e=t.coordinate,n=t.getXScale(),i=n.range,a=i[i.length-1],o=i[0],s=e.invert(r),l=s.x;return e.isPolar&&l>(1+a)/2&&(l=o),n.translate(n.invert(l))}function fQ(r,t,e){var n=e.coordinate,i=e.getYScale(),a=i.field,o=n.invert(t),s=i.invert(o.y),l=Ts(r,function(u){var c=u[Nn];return c[a][0]<=s&&c[a][1]>=s});return l||r[r.length-1]}var AZe=Jf(function(r){if(r.isCategory)return 1;for(var t=r.values,e=t.length,n=r.translate(t[0]),i=n,a=0;a<e;a++){var o=t[a],s=r.translate(o);s<n&&(n=s),s>i&&(i=s)}return(i-n)/(e-1)});function MZe(r,t,e){var n=t.getAttribute("position"),i=n.getFields(),a=t.scales,o=Vt(e)||!e?i[0]:e,s=a[o],l=s?s.getText(r[o]):r[o]||o;return Vt(e)?e(l,r):l}function kZe(r){var t=bv(r.attributes);return va(t,function(e){return Al(I0,e.type)})}function dQ(r){for(var t=kZe(r),e,n=0,i=t;n<i.length;n++){var a=i[n],o=a.getScale(a.type);if(o&&o.isLinear){e=o;break}}var s=r.getXScale(),l=r.getYScale();return e||l||s}function IZe(r,t){var e=t.field,n=r[e];if(qe(n)){var i=n.map(function(a){return t.getText(a)});return i.join("-")}return t.getText(n)}function PZe(r,t){var e,n=t.getGroupScales();if(n.length&&(e=n[0]),e){var i=e.field;return e.getText(r[i])}var a=dQ(t);return j0(a)}function hQ(r,t,e){if(t.length===0)return null;var n=e.type,i=e.getXScale(),a=e.getYScale(),o=i.field,s=a.field,l=null;if(n==="heatmap"||n==="point"){for(var u=e.coordinate,c=u.invert(r),f=i.invert(c.x),d=a.invert(c.y),h=1/0,v=0;v<t.length;v++){var p=t[v],g=p[Nn],m=Math.pow(g[o]-f,2)+Math.pow(g[s]-d,2);m<h&&(h=m,l=p)}return l}var y=t[0],b=t[t.length-1],x=TZe(r,e),w=y[Nn][o],S=y[Nn][s],C=b[Nn][o],_=a.isLinear&&qe(S);if(qe(w)){for(var v=0;v<t.length;v++){var T=t[v],g=T[Nn];if(i.translate(g[o][0])<=x&&i.translate(g[o][1])>=x)if(_)qe(l)||(l=[]),l.push(T);else{l=T;break}}qe(l)&&(l=fQ(l,r,e))}else{var E=void 0;if(!i.isLinear&&i.type!=="timeCat"){for(var v=0;v<t.length;v++){var T=t[v],g=T[Nn];if(cQ(g[o],x,i))if(_)qe(l)||(l=[]),l.push(T);else{l=T;break}else i.translate(g[o])<=x&&(b=T,E=t[v+1])}qe(l)&&(l=fQ(l,r,e))}else{if((x>i.translate(C)||x<i.translate(w))&&(x>i.max||x<i.min))return null;for(var M=0,k=t.length-1,P=void 0;M<=k;){P=Math.floor((M+k)/2);var F=t[P][Nn][o];if(cQ(F,x,i))return t[P];i.translate(F)<=i.translate(x)?(M=P+1,b=t[P],E=t[P+1]):(k===0&&(b=t[0]),k=P-1)}}b&&E&&Math.abs(i.translate(b[Nn][o])-x)>Math.abs(i.translate(E[Nn][o])-x)&&(b=E)}var $=AZe(e.getXScale());return!l&&Math.abs(i.translate(b[Nn][o])-x)<=$/2&&(l=b),l}function ED(r,t,e,n){e===void 0&&(e=""),n===void 0&&(n=!1);var i=r[Nn],a=MZe(i,t,e),o=t.tooltipOption,s=t.theme.defaultColor,l=[],u,c;function f(C,_){if(n||!Je(_)&&_!==""){var T={title:a,data:i,mappingData:r,name:C,value:_,color:r.color||s,marker:!0};l.push(T)}}if(Kr(o)){var d=o.fields,h=o.callback;if(h){var v=d.map(function(C){return r[Nn][C]}),p=h.apply(void 0,v),g=A({data:r[Nn],mappingData:r,title:a,color:r.color||s,marker:!0},p);l.push(g)}else for(var m=t.scales,y=0,b=d;y<b.length;y++){var x=b[y];if(!Je(i[x])){var w=m[x];u=j0(w),c=w.getText(i[x]),f(u,c)}}}else{var S=dQ(t);c=IZe(i,S),u=PZe(i,t),f(u,c)}return l}function vQ(r,t,e,n){var i=n.showNil,a=[],o=r.dataArray;if(!oo(o)){r.sort(o);for(var s=0,l=o;s<l.length;s++){var u=l[s],c=hQ(t,u,r);if(c){var f=r.getElementId(c),d=r.elementsMap[f];if(r.type==="heatmap"||d.visible){var h=ED(c,r,e,i);h.length&&a.push(h)}}}}return a}function pQ(r,t,e,n){var i=n.showNil,a=[],o=r.container,s=o.getShape(t.x,t.y);if(s&&s.get("visible")&&s.get("origin")){var l=s.get("origin").mappingData,u=ED(l,r,e,i);u.length&&a.push(u)}return a}function _D(r,t,e){for(var n=[],i=r.geometries,a=e.shared,o=e.title,s=e.reversed,l=0,u=i;l<u.length;l++){var c=u[l];if(c.visible&&c.tooltipOption!==!1){var f=c.type,d=void 0;["point","edge","polygon"].includes(f)?d=pQ(c,t,o,e):["area","line","path","heatmap"].includes(f)||a!==!1?d=vQ(c,t,o,e):d=pQ(c,t,o,e),d.length&&(s&&d.reverse(),n.push(d))}}return n}function DZe(r,t,e){for(var n=_D(r,t,e),i=0,a=r.views;i<a.length;i++){var o=a[i];n=n.concat(_D(o,t,e))}return n}function RZe(r){return!Rt(r)&&!qe(r)}function TD(r){r===void 0&&(r=0);var t=qe(r)?r:[r];switch(t.length){case 0:t=[0,0,0,0];break;case 1:t=new Array(4).fill(t[0]);break;case 2:t=Jn(Jn([],t,!0),t,!0);break;case 3:t=Jn(Jn([],t,!0),[t[1]],!1);break;default:t=t.slice(0,4);break}return t}var AD={};function mh(r,t){AD[r]=t}function OZe(){return Object.keys(AD)}function LZe(r){return AD[r]}var FZe=function(){function r(t){this.option=this.wrapperOption(t)}return r.prototype.update=function(t){return this.option=this.wrapperOption(t),this},r.prototype.hasAction=function(t){var e=this.option.actions;return sm(e,function(n){return n[0]===t})},r.prototype.create=function(t,e){var n=this.option,i=n.type,a=n.cfg,o=i==="theta",s=A({start:t,end:e},a),l=EXe(o?"polar":i);return this.coordinate=new l(s),this.coordinate.type=i,o&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},r.prototype.adjust=function(t,e){return this.coordinate.update({start:t,end:e}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},r.prototype.rotate=function(t){return this.option.actions.push(["rotate",t]),this},r.prototype.reflect=function(t){return this.option.actions.push(["reflect",t]),this},r.prototype.scale=function(t,e){return this.option.actions.push(["scale",t,e]),this},r.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},r.prototype.getOption=function(){return this.option},r.prototype.getCoordinate=function(){return this.coordinate},r.prototype.wrapperOption=function(t){return A({type:"rect",actions:[],cfg:{}},t)},r.prototype.execActions=function(t){var e=this,n=this.option.actions;G(n,function(i){var a,o=i[0],s=i.slice(1),l=Je(t)?!0:t.includes(o);l&&(a=e.coordinate)[o].apply(a,s)})},r}(),ci=function(){function r(t,e,n){this.view=t,this.gEvent=e,this.data=n,this.type=e.type}return r.fromData=function(t,e,n){return new r(t,new Tm(e,{}),n)},Object.defineProperty(r.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[Event (type="+this.type+")]"},r.prototype.clone=function(){return new r(this.view,this.gEvent,this.data)},r}();function NZe(r){var t=r.getController("axis"),e=r.getController("legend"),n=r.getController("annotation"),i=r.getController("slider"),a=r.getController("scrollbar");[t,i,a,e,n].forEach(function(o){o&&o.layout()})}var BZe=function(){function r(){this.scales=new Map,this.syncScales=new Map}return r.prototype.createScale=function(t,e,n,i){var a=n,o=this.getScaleMeta(i);if(e.length===0&&o){var s=o.scale,l={type:s.type};s.isCategory&&(l.values=s.values),a=Mt(l,o.scaleDef,n)}var u=YKe(t,e,a);return this.cacheScale(u,n,i),u},r.prototype.sync=function(t,e){var n=this;this.syncScales.forEach(function(i,a){var o=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,l=[];G(i,function(u){var c=n.getScale(u);s=Rt(c.max)?Math.max(s,c.max):s,o=Rt(c.min)?Math.min(o,c.min):o,G(c.values,function(f){l.includes(f)||l.push(f)})}),G(i,function(u){var c=n.getScale(u);if(c.isContinuous)c.change({min:o,max:s,values:l});else if(c.isCategory){var f=c.range,d=n.getScaleMeta(u);l&&!ne(d,["scaleDef","range"])&&(f=GZ(Mt({},c,{values:l}),t,e)),c.change({values:l,range:f})}})})},r.prototype.cacheScale=function(t,e,n){var i=this.getScaleMeta(n);i&&i.scale.type===t.type?(XKe(i.scale,t),i.scaleDef=e):(i={key:n,scale:t,scaleDef:e},this.scales.set(n,i));var a=this.getSyncKey(i);if(i.syncKey=a,this.removeFromSyncScales(n),a){var o=this.syncScales.get(a);o||(o=[],this.syncScales.set(a,o)),o.push(n)}},r.prototype.getScale=function(t){var e=this.getScaleMeta(t);if(!e){var n=Yi(t.split("-")),i=this.syncScales.get(n);i&&i.length&&(e=this.getScaleMeta(i[0]))}return e&&e.scale},r.prototype.deleteScale=function(t){var e=this.getScaleMeta(t);if(e){var n=e.syncKey,i=this.syncScales.get(n);if(i&&i.length){var a=i.indexOf(t);a!==-1&&i.splice(a,1)}}this.scales.delete(t)},r.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},r.prototype.removeFromSyncScales=function(t){var e=this;this.syncScales.forEach(function(n,i){var a=n.indexOf(t);if(a!==-1)return n.splice(a,1),n.length===0&&e.syncScales.delete(i),!1})},r.prototype.getSyncKey=function(t){var e=t.scale,n=t.scaleDef,i=e.field,a=ne(n,["sync"]);return a===!0?i:a===!1?void 0:a},r.prototype.getScaleMeta=function(t){return this.scales.get(t)},r}(),WC=function(){function r(t,e,n,i){t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=0),this.top=t,this.right=e,this.bottom=n,this.left=i}return r.instance=function(t,e,n,i){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=0),new r(t,e,n,i)},r.prototype.max=function(t){var e=t[0],n=t[1],i=t[2],a=t[3];return this.top=Math.max(this.top,e),this.right=Math.max(this.right,n),this.bottom=Math.max(this.bottom,i),this.left=Math.max(this.left,a),this},r.prototype.shrink=function(t){var e=t[0],n=t[1],i=t[2],a=t[3];return this.top+=e,this.right+=n,this.bottom+=i,this.left+=a,this},r.prototype.inc=function(t,e){var n=t.width,i=t.height;switch(e){case Nt.TOP:case Nt.TOP_LEFT:case Nt.TOP_RIGHT:this.top+=i;break;case Nt.RIGHT:case Nt.RIGHT_TOP:case Nt.RIGHT_BOTTOM:this.right+=n;break;case Nt.BOTTOM:case Nt.BOTTOM_LEFT:case Nt.BOTTOM_RIGHT:this.bottom+=i;break;case Nt.LEFT:case Nt.LEFT_TOP:case Nt.LEFT_BOTTOM:this.left+=n;break}return this},r.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},r.prototype.clone=function(){return new(r.bind.apply(r,Jn([void 0],this.getPadding(),!1)))},r}();function $Ze(r){var t=r.padding;if(!RZe(t))return new(WC.bind.apply(WC,Jn([void 0],TD(t),!1)));var e=r.viewBBox,n=new WC,i=[],a=[],o=[];return G(r.getComponents(),function(s){var l=s.type;l===Ea.AXIS?i.push(s):[Ea.LEGEND,Ea.SLIDER,Ea.SCROLLBAR].includes(l)?a.push(s):l!==Ea.GRID&&l!==Ea.TOOLTIP&&o.push(s)}),G(i,function(s){var l=s.component,u=l.getLayoutBBox(),c=new Mo(u.x,u.y,u.width,u.height),f=c.exceed(e);n.max(f)}),G(a,function(s){var l=s.component,u=s.direction,c=l.getLayoutBBox(),f=l.get("padding"),d=new Mo(c.x,c.y,c.width,c.height).expand(f);n.inc(d,u)}),G(o,function(s){var l=s.component,u=s.direction,c=l.getLayoutBBox(),f=new Mo(c.x,c.y,c.width,c.height);n.inc(f,u)}),n}function zZe(r,t,e){var n=e.instance();t.forEach(function(i){i.autoPadding=n.max(i.autoPadding.getPadding())})}var gQ=function(r){Te(t,r);function t(e){var n=r.call(this,{visible:e.visible})||this;n.views=[],n.geometries=[],n.controllers=[],n.interactions={},n.limitInPlot=!1,n.options={data:[],animate:!0},n.usedControllers=OZe(),n.scalePool=new BZe,n.layoutFunc=NZe,n.isPreMouseInPlot=!1,n.isDataChanged=!1,n.isCoordinateChanged=!1,n.createdScaleKeys=new Map,n.onCanvasEvent=function(b){var x=b.name;if(!x.includes(":")){var w=n.createViewEvent(b);n.doPlotEvent(w),n.emit(x,w)}},n.onDelegateEvents=function(b){var x=b.name;if(!!x.includes(":")){var w=n.createViewEvent(b);n.emit(x,w)}};var i=e.id,a=i===void 0?Ms("view"):i,o=e.parent,s=e.canvas,l=e.backgroundGroup,u=e.middleGroup,c=e.foregroundGroup,f=e.region,d=f===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:f,h=e.padding,v=e.appendPadding,p=e.theme,g=e.options,m=e.limitInPlot,y=e.syncViewPadding;return n.parent=o,n.canvas=s,n.backgroundGroup=l,n.middleGroup=u,n.foregroundGroup=c,n.region=d,n.padding=h,n.appendPadding=v,n.options=A(A({},n.options),g),n.limitInPlot=m,n.id=a,n.syncViewPadding=y,n.themeObject=Kr(p)?Mt({},Z0("default"),HC(p)):Z0(p),n.init(),n}return t.prototype.setLayout=function(e){this.layoutFunc=e},t.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},t.prototype.render=function(e,n){e===void 0&&(e=!1),this.emit(Nr.BEFORE_RENDER,ci.fromData(this,Nr.BEFORE_RENDER,n)),this.paint(e),this.emit(Nr.AFTER_RENDER,ci.fromData(this,Nr.AFTER_RENDER,n)),this.visible===!1&&this.changeVisible(!1)},t.prototype.clear=function(){var e=this;this.emit(Nr.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var n=this.geometries,i=0;i<n.length;i++)n[i].clear(),n[i].container.remove(!0),n[i].labelsContainer.remove(!0);this.geometries=[];for(var a=this.controllers,i=0;i<a.length;i++)a[i].name==="annotation"?a[i].clear(!0):a[i].clear();this.createdScaleKeys.forEach(function(s,l){e.getRootView().scalePool.deleteScale(l)}),this.createdScaleKeys.clear();for(var o=this.views,i=0;i<o.length;i++)o[i].clear();this.emit(Nr.AFTER_CLEAR)},t.prototype.destroy=function(){this.emit(Nr.BEFORE_DESTROY);var e=this.interactions;G(e,function(s){s&&s.destroy()}),this.clear();for(var n=this.controllers,i=0,a=n.length;i<a;i++){var o=n[i];o.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),r.prototype.destroy.call(this)},t.prototype.changeVisible=function(e){r.prototype.changeVisible.call(this,e);for(var n=this.geometries,i=0,a=n.length;i<a;i++){var o=n[i];o.changeVisible(e)}for(var s=this.controllers,i=0,a=s.length;i<a;i++){var l=s[i];l.changeVisible(e)}return this.foregroundGroup.set("visible",e),this.middleGroup.set("visible",e),this.backgroundGroup.set("visible",e),this.getCanvas().draw(),this},t.prototype.data=function(e){return Xi(this.options,"data",e),this.isDataChanged=!0,this},t.prototype.source=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(e)},t.prototype.filter=function(e,n){return Vt(n)?(Xi(this.options,["filters",e],n),this):(!n&&ne(this.options,["filters",e])&&delete this.options.filters[e],this)},t.prototype.axis=function(e,n){return yu(e)?Xi(this.options,["axes"],e):Xi(this.options,["axes",e],n),this},t.prototype.legend=function(e,n){return yu(e)?Xi(this.options,["legends"],e):rt(e)?(Xi(this.options,["legends",e],n),Ri(n)&&(n==null?void 0:n.selected)&&Xi(this.options,["filters",e],function(i){var a;return(a=n==null?void 0:n.selected[i])!==null&&a!==void 0?a:!0})):Xi(this.options,["legends"],e),this},t.prototype.scale=function(e,n){var i=this;return rt(e)?Xi(this.options,["scales",e],n):Kr(e)&&G(e,function(a,o){Xi(i.options,["scales",o],a)}),this},t.prototype.tooltip=function(e){return Xi(this.options,"tooltip",e),this},t.prototype.annotation=function(){return this.getController("annotation")},t.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},t.prototype.coordinate=function(e,n){return rt(e)?Xi(this.options,"coordinate",{type:e,cfg:n}):Xi(this.options,"coordinate",e),this.coordinateController.update(this.options.coordinate),this.coordinateController},t.prototype.coord=function(e,n){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(e,n)},t.prototype.facet=function(e,n){this.facetInstance&&this.facetInstance.destroy();var i=QKe(e);if(!i)throw new Error("facet '"+e+"' is not exist!");return this.facetInstance=new i(this,A(A({},n),{type:e})),this},t.prototype.animate=function(e){return Xi(this.options,"animate",e),this},t.prototype.updateOptions=function(e){return this.clear(),$t(this.options,e),this.views.forEach(function(n){return n.destroy()}),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},t.prototype.option=function(e,n){if(t.prototype[e])throw new Error(`Can't use built in variable name "`+e+'", please change another one.');return Xi(this.options,e,n),this},t.prototype.theme=function(e){return this.themeObject=Kr(e)?Mt({},this.themeObject,HC(e)):Z0(e),this},t.prototype.interaction=function(e,n){var i=this.interactions[e];i&&i.destroy();var a=yZe(e,this,n);return a&&(a.init(),this.interactions[e]=a),this},t.prototype.removeInteraction=function(e){var n=this.interactions[e];n&&(n.destroy(),this.interactions[e]=void 0)},t.prototype.changeData=function(e){this.isDataChanged=!0,this.emit(Nr.BEFORE_CHANGE_DATA,ci.fromData(this,Nr.BEFORE_CHANGE_DATA,null)),this.data(e),this.paint(!0);for(var n=this.views,i=0,a=n.length;i<a;i++){var o=n[i];o.changeData(e)}this.emit(Nr.AFTER_CHANGE_DATA,ci.fromData(this,Nr.AFTER_CHANGE_DATA,null))},t.prototype.createView=function(e){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var n={data:this.options.data,scales:Mr(this.options.scales),axes:Mr(this.options.axes),coordinate:Mr(this.coordinateController.getOption()),tooltip:Mr(this.options.tooltip),legends:Mr(this.options.legends),animate:this.options.animate,visible:this.visible},i=new t(A(A({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:zp.BG}),middleGroup:this.middleGroup.addGroup({zIndex:zp.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:zp.FORE}),theme:this.themeObject,padding:this.padding},e),{options:A(A({},n),ne(e,"options",{}))}));return this.views.push(i),i},t.prototype.view=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(e)},t.prototype.removeView=function(e){var n=m3(this.views,function(i){return i===e})[0];return n&&n.destroy(),n},t.prototype.getCoordinate=function(){return this.coordinateInstance},t.prototype.getTheme=function(){return this.themeObject},t.prototype.getXScale=function(){var e=this.geometries[0];return e?e.getXScale():null},t.prototype.getYScales=function(){var e={},n=[];return this.geometries.forEach(function(i){var a=i.getYScale(),o=a.field;e[o]||(e[o]=!0,n.push(a))}),n},t.prototype.getScalesByDim=function(e){for(var n=this.geometries,i={},a=0,o=n.length;a<o;a++){var s=n[a],l=e==="x"?s.getXScale():s.getYScale();l&&!i[l.field]&&(i[l.field]=l)}return i},t.prototype.getScale=function(e,n){var i=n||this.getScaleKey(e);return this.getRootView().scalePool.getScale(i)},t.prototype.getScaleByField=function(e,n){return this.getScale(e,n)},t.prototype.getOptions=function(){return this.options},t.prototype.getData=function(){return this.filteredData},t.prototype.getOriginalData=function(){return this.options.data},t.prototype.getPadding=function(){return this.autoPadding.getPadding()},t.prototype.getGeometries=function(){return this.geometries},t.prototype.getElements=function(){return Wa(this.geometries,function(e,n){return e.concat(n.getElements())},[])},t.prototype.getElementsBy=function(e){return this.getElements().filter(function(n){return e(n)})},t.prototype.getLayer=function(e){return e===zi.BG?this.backgroundGroup:e===zi.MID?this.middleGroup:e===zi.FORE?this.foregroundGroup:this.foregroundGroup},t.prototype.isPointInPlot=function(e){return pD(this.getCoordinate(),e)},t.prototype.getLegendAttributes=function(){return Do(this.geometries.map(function(e){return e.getGroupAttributes()}))},t.prototype.getGroupScales=function(){var e=this.geometries.map(function(n){return n.getGroupScales()});return ff(Do(e))},t.prototype.getCanvas=function(){return this.getRootView().canvas},t.prototype.getRootView=function(){for(var e=this;;){if(e.parent){e=e.parent;continue}break}return e},t.prototype.getXY=function(e){var n=this.getCoordinate(),i=this.getScalesByDim("x"),a=this.getScalesByDim("y"),o,s;if(G(e,function(l,u){i[u]&&(o=i[u].scale(l)),a[u]&&(s=a[u].scale(l))}),!Je(o)&&!Je(s))return n.convert({x:o,y:s})},t.prototype.getController=function(e){return Ts(this.controllers,function(n){return n.name===e})},t.prototype.showTooltip=function(e){var n=this.getController("tooltip");return n&&n.showTooltip(e),this},t.prototype.hideTooltip=function(){var e=this.getController("tooltip");return e&&e.hideTooltip(),this},t.prototype.lockTooltip=function(){var e=this.getController("tooltip");return e&&e.lockTooltip(),this},t.prototype.unlockTooltip=function(){var e=this.getController("tooltip");return e&&e.unlockTooltip(),this},t.prototype.isTooltipLocked=function(){var e=this.getController("tooltip");return e&&e.isTooltipLocked()},t.prototype.getTooltipItems=function(e){var n=this.getController("tooltip");return n?n.getTooltipItems(e):[]},t.prototype.getSnapRecords=function(e){for(var n=this.geometries,i=[],a=0,o=n.length;a<o;a++){var s=n[a],l=s.dataArray;s.sort(l);for(var u=void 0,c=0,f=l.length;c<f;c++){var d=l[c];u=hQ(e,d,s),u&&i.push(u)}}for(var h=this.views,a=0,o=h.length;a<o;a++){var v=h[a],p=v.getSnapRecords(e);i=i.concat(p)}return i},t.prototype.getComponents=function(){for(var e=[],n=this.controllers,i=0,a=n.length;i<a;i++){var o=n[i];e=e.concat(o.getComponents())}return e},t.prototype.filterData=function(e){var n=this.options.filters;return aa(n)===0?e:va(e,function(i,a){var o=Object.keys(n);return o.every(function(s){var l=n[s];return l(i[s],i,a)})})},t.prototype.filterFieldData=function(e,n){var i=this.options.filters,a=ne(i,e);return xc(a)?n:n.filter(function(o,s){return a(o[e],o,s)})},t.prototype.adjustCoordinate=function(){var e=this.getCoordinate(),n=e.start,i=e.end,a=this.coordinateBBox.bl,o=this.coordinateBBox.tr;if(ri(n,a)&&ri(i,o)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(a,o)},t.prototype.paint=function(e){this.renderDataRecursive(e),this.syncScale(),this.emit(Nr.BEFORE_PAINT),this.renderPaddingRecursive(e),this.renderLayoutRecursive(e),this.renderBackgroundStyleShape(),this.renderPaintRecursive(e),this.emit(Nr.AFTER_PAINT),this.isDataChanged=!1},t.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var e=ne(this.themeObject,"background");if(e){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var n=this.viewBBox,i=n.x,a=n.y,o=n.width,s=n.height;this.backgroundStyleRectShape.attr({fill:e,x:i,y:a,width:o,height:s})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},t.prototype.renderPaddingRecursive=function(e){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(e),this.autoPadding=$Ze(this).shrink(TD(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();for(var n=this.views,i=0,a=n.length;i<a;i++){var o=n[i];o.renderPaddingRecursive(e)}},t.prototype.renderLayoutRecursive=function(e){var n=this.syncViewPadding===!0?zZe:Vt(this.syncViewPadding)?this.syncViewPadding:void 0;n&&(n(this,this.views,WC),this.views.forEach(function(l){l.coordinateBBox=l.viewBBox.shrink(l.autoPadding.getPadding()),l.adjustCoordinate()})),this.doLayout();for(var i=this.views,a=0,o=i.length;a<o;a++){var s=i[a];s.renderLayoutRecursive(e)}},t.prototype.renderPaintRecursive=function(e){var n=this.middleGroup;if(this.limitInPlot){var i=zZ(this.coordinateInstance),a=i.type,o=i.attrs;n.setClip({type:a,attrs:o})}else n.setClip(void 0);this.paintGeometries(e),this.renderComponents(e);for(var s=this.views,l=0,u=s.length;l<u;l++){var c=s[l];c.renderPaintRecursive(e)}},t.prototype.createScale=function(e,n,i,a){var o=ne(this.options.scales,[e]),s=A(A({},o),i);return this.parent?this.parent.createScale(e,n,s,a):this.scalePool.createScale(e,n,s,a)},t.prototype.renderDataRecursive=function(e){this.doFilterData(),this.createCoordinate(),this.initGeometries(e),this.renderFacet(e);for(var n=this.views,i=0,a=n.length;i<a;i++){var o=n[i];o.renderDataRecursive(e)}},t.prototype.calculateViewBBox=function(){var e,n,i,a;if(this.parent){var o=this.parent.coordinateBBox;e=o.x,n=o.y,i=o.width,a=o.height}else e=0,n=0,i=this.canvas.get("width"),a=this.canvas.get("height");var s=this.region,l=s.start,u=s.end,c=new Mo(e+i*l.x,n+a*l.y,i*(u.x-l.x),a*(u.y-l.y));(!this.viewBBox||!this.viewBBox.isEqual(c))&&(this.viewBBox=new Mo(e+i*l.x,n+a*l.y,i*(u.x-l.x),a*(u.y-l.y))),this.coordinateBBox=this.viewBBox},t.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},t.prototype.initComponentController=function(){for(var e=this.usedControllers,n=0,i=e.length;n<i;n++){var a=e[n],o=LZe(a);o&&this.controllers.push(new o(this))}},t.prototype.createViewEvent=function(e){var n=e.shape,i=e.name,a=n?n.get("origin"):null,o=new ci(this,e,a);return o.type=i,o},t.prototype.doPlotEvent=function(e){var n=e.type,i=e.x,a=e.y,o={x:i,y:a},s=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(s.includes(n)){var l=this.isPointInPlot(o),u=e.clone();if(l){var c="plot:"+n;u.type=c,this.emit(c,u),(n==="mouseleave"||n==="touchend")&&(this.isPreMouseInPlot=!1)}n==="mousemove"||n==="touchmove"?(this.isPreMouseInPlot&&!l?(n==="mousemove"&&(u.type=Uo.MOUSE_LEAVE,this.emit(Uo.MOUSE_LEAVE,u)),u.type=Uo.LEAVE,this.emit(Uo.LEAVE,u)):!this.isPreMouseInPlot&&l&&(n==="mousemove"&&(u.type=Uo.MOUSE_ENTER,this.emit(Uo.MOUSE_ENTER,u)),u.type=Uo.ENTER,this.emit(Uo.ENTER,u)),this.isPreMouseInPlot=l):(n==="mouseleave"||n==="touchend")&&this.isPreMouseInPlot&&(n==="mouseleave"&&(u.type=Uo.MOUSE_LEAVE,this.emit(Uo.MOUSE_LEAVE,u)),u.type=Uo.LEAVE,this.emit(Uo.LEAVE,u),this.isPreMouseInPlot=!1)}},t.prototype.doFilterData=function(){var e=this.options.data;this.filteredData=this.filterData(e)},t.prototype.initGeometries=function(e){this.createOrUpdateScales();for(var n=this.getCoordinate(),i=ne(this.options,"scales",{}),a=this.geometries,o=0,s=a.length;o<s;o++){var l=a[o];l.scales=this.getGeometryScales();var u={coordinate:n,scaleDefs:i,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};e?l.update(u):l.init(u)}this.adjustScales()},t.prototype.createOrUpdateScales=function(){for(var e=this.getScaleFields(),n=this.getGroupedFields(),i=this.getOptions(),a=i.data,o=i.scales,s=o===void 0?{}:o,l=this.filteredData,u=0,c=e.length;u<c;u++){var f=e[u],d=s[f],h=this.getScaleKey(f);this.createScale(f,n.includes(f)?a:l,d,h),this.createdScaleKeys.set(h,!0)}},t.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},t.prototype.getGeometryScales=function(){for(var e=this.getScaleFields(),n={},i=0;i<e.length;i++){var a=e[i];n[a]=this.getScaleByField(a)}return n},t.prototype.getScaleFields=function(){for(var e=[],n=new Map,i=this.geometries,a=0;a<i.length;a++){var o=i[a],s=o.getScaleFields();ff(s,e,n)}return e},t.prototype.getGroupedFields=function(){for(var e=[],n=new Map,i=this.geometries,a=0;a<i.length;a++){var o=i[a],s=o.getGroupFields();ff(s,e,n)}return e},t.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},t.prototype.adjustCategoryScaleRange=function(){var e=this,n=Jn([this.getXScale()],this.getYScales(),!0).filter(function(o){return!!o}),i=this.getCoordinate(),a=this.options.scales;G(n,function(o){var s=o.field,l=o.values,u=o.isCategory,c=o.isIdentity;(u||c)&&l&&!ne(a,[s,"range"])&&(o.range=GZ(o,i,e.theme))})},t.prototype.initComponents=function(e){for(var n=this.controllers,i=0;i<n.length;i++){var a=n[i];e?a.update():(a.clear(),a.render())}},t.prototype.doLayout=function(){this.layoutFunc(this)},t.prototype.createCoordinate=function(){var e=this.coordinateBBox.bl,n=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(e,n)},t.prototype.paintGeometries=function(e){for(var n=this.options.animate,i=this.getCoordinate(),a={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},o=this.geometries,s=0;s<o.length;s++){var l=o[s];l.coordinate=i,l.canvasRegion=a,n||l.animate(!1),l.paint(e)}},t.prototype.renderComponents=function(e){for(var n=0;n<this.getComponents().length;n++){var i=this.getComponents()[n];i.component.render()}},t.prototype.renderFacet=function(e){this.facetInstance&&(e?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},t.prototype.initOptions=function(){var e=this,n=this.options,i=n.geometries,a=i===void 0?[]:i,o=n.interactions,s=o===void 0?[]:o,l=n.views,u=l===void 0?[]:l,c=n.annotations,f=c===void 0?[]:c,d=n.coordinate,h=n.events,v=n.facets;this.coordinateController?d&&this.coordinateController.update(d):this.coordinateController=new FZe(d);for(var p=0;p<a.length;p++){var g=a[p];this.createGeometry(g)}for(var m=0;m<s.length;m++){var y=s[m],b=y.type,x=y.cfg;this.interaction(b,x)}for(var w=0;w<u.length;w++){var S=u[w];this.createView(S)}for(var C=this.getController("annotation"),_=0;_<f.length;_++){var T=f[_];C.annotation(T)}h&&G(h,function(E,M){e.on(M,E)}),v&&G(v,function(E){var M=E.type,k=Lr(E,["type"]);e.facet(M,k)})},t.prototype.createGeometry=function(e){var n=e.type,i=e.cfg,a=i===void 0?{}:i;if(this[n]){var o=this[n](a);G(e,function(s,l){Vt(o[l])&&o[l](s)})}},t.prototype.getScaleKey=function(e){return this.id+"-"+e},t}(VP);function iu(r,t){gQ.prototype[r.toLowerCase()]=function(e){e===void 0&&(e={});var n=A({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},e),i=new t(n);return this.geometries.push(i),i}}var GZe=function(r){Te(t,r);function t(e){var n=this,i=e.container,a=e.width,o=e.height,s=e.autoFit,l=s===void 0?!1:s,u=e.padding,c=e.appendPadding,f=e.renderer,d=f===void 0?"canvas":f,h=e.pixelRatio,v=e.localRefresh,p=v===void 0?!0:v,g=e.visible,m=g===void 0?!0:g,y=e.supportCSSTransform,b=y===void 0?!1:y,x=e.defaultInteractions,w=x===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text"]:x,S=e.options,C=e.limitInPlot,_=e.theme,T=e.syncViewPadding,E=rt(i)?document.getElementById(i):i,M=Vn('<div style="position:relative;"></div>');E.appendChild(M);var k=IK(E,l,a,o),P=ZYe(d),F=new P.Canvas(A({container:M,pixelRatio:h,localRefresh:p,supportCSSTransform:b},k));return n=r.call(this,{parent:null,canvas:F,backgroundGroup:F.addGroup({zIndex:zp.BG}),middleGroup:F.addGroup({zIndex:zp.MID}),foregroundGroup:F.addGroup({zIndex:zp.FORE}),padding:u,appendPadding:c,visible:m,options:S,limitInPlot:C,theme:_,syncViewPadding:T})||this,n.onResize=lm(function(){n.forceFit()},300),n.ele=E,n.canvas=F,n.width=k.width,n.height=k.height,n.autoFit=l,n.localRefresh=p,n.renderer=d,n.wrapperElement=M,n.updateCanvasStyle(),n.bindAutoFit(),n.initDefaultInteractions(w),n}return t.prototype.initDefaultInteractions=function(e){var n=this;G(e,function(i){n.interaction(i)})},t.prototype.aria=function(e){var n="aria-label";e===!1?this.ele.removeAttribute(n):this.ele.setAttribute(n,e.label)},t.prototype.changeSize=function(e,n){return this.width===e&&this.height===n?this:(this.emit(Nr.BEFORE_CHANGE_SIZE),this.width=e,this.height=n,this.canvas.changeSize(e,n),this.render(!0),this.emit(Nr.AFTER_CHANGE_SIZE),this)},t.prototype.clear=function(){r.prototype.clear.call(this),this.aria(!1)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),JYe(this.wrapperElement),this.wrapperElement=null},t.prototype.changeVisible=function(e){return r.prototype.changeVisible.call(this,e),this.wrapperElement.style.display=e?"":"none",this},t.prototype.forceFit=function(){if(!this.destroyed){var e=IK(this.ele,!0,this.width,this.height),n=e.width,i=e.height;this.changeSize(n,i)}},t.prototype.updateCanvasStyle=function(){Fr(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},t.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},t.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},t}(gQ),Jp=function(){function r(t){this.visible=!0,this.components=[],this.view=t}return r.prototype.clear=function(t){G(this.components,function(e){e.component.destroy()}),this.components=[]},r.prototype.destroy=function(){this.clear()},r.prototype.getComponents=function(){return this.components},r.prototype.changeVisible=function(t){this.visible!==t&&(this.components.forEach(function(e){t?e.component.show():e.component.hide()}),this.visible=t)},r}();function UZe(r){for(var t=[],e=function(i){var a=r[i],o=Ts(t,function(s){return s.color===a.color&&s.name===a.name&&s.value===a.value&&s.title===a.title});o||t.push(a)},n=0;n<r.length;n++)e(n);return t}var mQ=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.isLocked=!1,e}return Object.defineProperty(t.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.isVisible=function(){var e=this.view.getOptions().tooltip;return e!==!1},t.prototype.render=function(){},t.prototype.showTooltip=function(e){if(this.point=e,!!this.isVisible()){var n=this.view,i=this.getTooltipItems(e);if(!i.length){this.hideTooltip();return}var a=this.getTitle(i),o={x:i[0].x,y:i[0].y};n.emit("tooltip:show",ci.fromData(n,"tooltip:show",A({items:i,title:a},e)));var s=this.getTooltipCfg(),l=s.follow,u=s.showMarkers,c=s.showCrosshairs,f=s.showContent,d=s.marker,h=this.items,v=this.title;if(!ri(v,a)||!ri(h,i)?(n.emit("tooltip:change",ci.fromData(n,"tooltip:change",A({items:i,title:a},e))),(Vt(f)?f(i):f)&&(this.tooltip||this.renderTooltip(),this.tooltip.update($t({},s,{items:this.getItemsAfterProcess(i),title:a},l?e:{})),this.tooltip.show()),u&&this.renderTooltipMarkers(i,d)):(this.tooltip&&l&&(this.tooltip.update(e),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=i,this.title=a,c){var p=ne(s,["crosshairs","follow"],!1);this.renderCrosshairs(p?e:o,s)}}},t.prototype.hideTooltip=function(){var e=this.getTooltipCfg().follow;if(!e){this.point=null;return}var n=this.tooltipMarkersGroup;n&&n.hide();var i=this.xCrosshair,a=this.yCrosshair;i&&i.hide(),a&&a.hide();var o=this.tooltip;o&&o.hide(),this.view.emit("tooltip:hide",ci.fromData(this.view,"tooltip:hide",{})),this.point=null},t.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},t.prototype.unlockTooltip=function(){this.isLocked=!1;var e=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(e.capture)},t.prototype.isTooltipLocked=function(){return this.isLocked},t.prototype.clear=function(){var e=this,n=e.tooltip,i=e.xCrosshair,a=e.yCrosshair,o=e.tooltipMarkersGroup;n&&(n.hide(),n.clear()),i&&i.clear(),a&&a.clear(),o&&o.clear(),(n==null?void 0:n.get("customContent"))&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},t.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},t.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},t.prototype.changeVisible=function(e){if(this.visible!==e){var n=this,i=n.tooltip,a=n.tooltipMarkersGroup,o=n.xCrosshair,s=n.yCrosshair;e?(i&&i.show(),a&&a.show(),o&&o.show(),s&&s.show()):(i&&i.hide(),a&&a.hide(),o&&o.hide(),s&&s.hide()),this.visible=e}},t.prototype.getTooltipItems=function(e){var n=this.findItemsFromView(this.view,e);if(n.length){n=Do(n);for(var i=0,a=n;i<a.length;i++)for(var o=a[i],s=0,l=o;s<l.length;s++){var u=l[s],c=u.mappingData,f=c.x,d=c.y;u.x=qe(f)?f[f.length-1]:f,u.y=qe(d)?d[d.length-1]:d}var h=this.getTooltipCfg().shared;if(h===!1&&n.length>1){for(var v=n[0],p=Math.abs(e.y-v[0].y),g=0,m=n;g<m.length;g++){var y=m[g],b=Math.abs(e.y-y[0].y);b<=p&&(v=y,p=b)}n=[v]}return UZe(Do(n))}return[]},t.prototype.layout=function(){},t.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var e=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}})}},t.prototype.isCursorEntered=function(e){if(this.tooltip){var n=this.tooltip.getContainer(),i=this.tooltip.get("capture");if(n&&i){var a=n.getBoundingClientRect(),o=a.x,s=a.y,l=a.width,u=a.height;return new Mo(o,s,l,u).isPointIn(e)}}return!1},t.prototype.getTooltipCfg=function(){var e=this.view,n=e.getOptions().tooltip,i=this.processCustomContent(n),a=e.getTheme(),o=ne(a,["components","tooltip"],{}),s=ne(i,"enterable",o.enterable);return Mt({},o,i,{capture:!!(s||this.isLocked)})},t.prototype.processCustomContent=function(e){if(yu(e)||!ne(e,"customContent"))return e;var n=e.customContent,i=function(a,o){var s=n(a,o)||"";return rt(s)?'<div class="g2-tooltip">'+s+"</div>":s};return A(A({},e),{customContent:i})},t.prototype.getTitle=function(e){var n=e[0].title||e[0].name;return this.title=n,n},t.prototype.renderTooltip=function(){var e=this.view.getCanvas(),n={start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}},i=this.getTooltipCfg(),a=new LZ(A(A({parent:e.get("el").parentNode,region:n},i),{visible:!1,crosshairs:null}));a.init(),this.tooltip=a},t.prototype.renderTooltipMarkers=function(e,n){for(var i=this.getTooltipMarkersGroup(),a=0,o=e;a<o.length;a++){var s=o[a],l=s.x,u=s.y,c=A(A({fill:s.color,symbol:"circle",shadowColor:s.color},n),{x:l,y:u});i.addShape("marker",{attrs:c})}},t.prototype.renderCrosshairs=function(e,n){var i=ne(n,["crosshairs","type"],"x");i==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(e,n)):i==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(e,n)):i==="xy"&&(this.renderXCrosshairs(e,n),this.renderYCrosshairs(e,n))},t.prototype.renderXCrosshairs=function(e,n){var i=this.getViewWithGeometry(this.view).getCoordinate();if(!!pD(i,e)){var a,o;if(i.isRect)i.isTransposed?(a={x:i.start.x,y:e.y},o={x:i.end.x,y:e.y}):(a={x:e.x,y:i.end.y},o={x:e.x,y:i.start.y});else{var s=Xp(i,e),l=i.getCenter(),u=i.getRadius();o=ea(l.x,l.y,u,s),a=l}var c=Mt({start:a,end:o,container:this.getTooltipCrosshairsGroup()},ne(n,"crosshairs",{}),this.getCrosshairsText("x",e,n));delete c.type;var f=this.xCrosshair;f?f.update(c):(f=new _Z(c),f.init()),f.render(),f.show(),this.xCrosshair=f}},t.prototype.renderYCrosshairs=function(e,n){var i=this.getViewWithGeometry(this.view).getCoordinate();if(!!pD(i,e)){var a,o;if(i.isRect){var s=void 0,l=void 0;i.isTransposed?(s={x:e.x,y:i.end.y},l={x:e.x,y:i.start.y}):(s={x:i.start.x,y:e.y},l={x:i.end.x,y:e.y}),a={start:s,end:l},o="Line"}else a={center:i.getCenter(),radius:BC(i,e),startAngle:i.startAngle,endAngle:i.endAngle},o="Circle";a=Mt({container:this.getTooltipCrosshairsGroup()},a,ne(n,"crosshairs",{}),this.getCrosshairsText("y",e,n)),delete a.type;var u=this.yCrosshair;u?i.isRect&&u.get("type")==="circle"||!i.isRect&&u.get("type")==="line"?(u=new TZ[o](a),u.init()):u.update(a):(u=new TZ[o](a),u.init()),u.render(),u.show(),this.yCrosshair=u}},t.prototype.getCrosshairsText=function(e,n,i){var a=ne(i,["crosshairs","text"]),o=ne(i,["crosshairs","follow"]),s=this.items;if(a){var l=this.getViewWithGeometry(this.view),u=s[0],c=l.getXScale(),f=l.getYScales()[0],d=void 0,h=void 0;if(o){var v=this.view.getCoordinate().invert(n);d=c.invert(v.x),h=f.invert(v.y)}else d=u.data[c.field],h=u.data[f.field];var p=e==="x"?d:h;return Vt(a)?a=a(e,p,s,n):a.content=p,{text:a}}},t.prototype.getGuideGroup=function(){if(!this.guideGroup){var e=this.view.foregroundGroup;this.guideGroup=e.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},t.prototype.getTooltipMarkersGroup=function(){var e=this.tooltipMarkersGroup;return e&&!e.destroyed?(e.clear(),e.show()):(e=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),e.toFront(),this.tooltipMarkersGroup=e),e},t.prototype.getTooltipCrosshairsGroup=function(){var e=this.tooltipCrosshairsGroup;return e||(e=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),e.toBack(),this.tooltipCrosshairsGroup=e),e},t.prototype.findItemsFromView=function(e,n){if(e.getOptions().tooltip===!1)return[];for(var i=this.getTooltipCfg(),a=_D(e,n,i),o=0,s=e.views;o<s.length;o++){var l=s[o];a=a.concat(this.findItemsFromView(l,n))}return a},t.prototype.getViewWithGeometry=function(e){var n=this;return e.geometries.length?e:Ts(e.views,function(i){return n.getViewWithGeometry(i)})},t.prototype.getItemsAfterProcess=function(e){var n=this.getTooltipCfg().customItems,i=n||function(a){return a};return i(e)},t}(Jp),yQ={};function bQ(r){return yQ[r.toLowerCase()]}function hs(r,t){yQ[r.toLowerCase()]=t}var eg={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},VZe={interval:function(r){return{enter:{animation:r.isRect?r.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:r.isPolar&&r.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},xQ={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(r){var t;return r.isRect?t=r.isTransposed?"grow-in-x":"grow-in-y":(t="grow-in-xy",r.isPolar&&r.isTransposed&&(t="wave-in")),{animation:t}},schema:function(r){var t;return r.isRect?t=r.isTransposed?"grow-in-x":"grow-in-y":t="grow-in-xy",{animation:t}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function HZe(r,t){return{delay:Vt(r.delay)?r.delay(t):r.delay,easing:Vt(r.easing)?r.easing(t):r.easing,duration:Vt(r.duration)?r.duration(t):r.duration,callback:r.callback,repeat:r.repeat}}function wQ(r,t,e){var n=VZe[r];return n&&(Vt(n)&&(n=n(t)),n=Mt({},eg,n),e)?n[e]:n}function tg(r,t,e){var n=ne(r.get("origin"),"data",Nn),i=t.animation,a=HZe(t,n);if(i){var o=bQ(i);o&&o(r,a,e)}else r.animate(e.toAttrs,a)}function WZe(r,t,e,n,i){if(xQ[e]){var a=xQ[e](n),o=bQ(ne(a,"animation",""));if(o){var s=A(A(A({},eg.appear),a),t);r.stopAnimate(),o(r,s,{coordinate:n,minYPoint:i,toAttrs:null})}}}var MD="element-background",SQ=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;n.states=[];var i=e.shapeFactory,a=e.container,o=e.offscreenGroup,s=e.elementIndex,l=e.visible,u=l===void 0?!0:l;return n.shapeFactory=i,n.container=a,n.offscreenGroup=o,n.visible=u,n.elementIndex=s,n}return t.prototype.draw=function(e,n){n===void 0&&(n=!1),this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.drawShape(e,n),this.visible===!1&&this.changeVisible(!1)},t.prototype.update=function(e){var n=this,i=n.shapeFactory,a=n.shape;if(!!a){this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.setShapeInfo(a,e);var o=this.getOffscreenGroup(),s=i.drawShape(this.shapeType,e,o);s.cfg.data=this.data,s.cfg.origin=e,s.cfg.element=this,this.syncShapeStyle(a,s,this.getStates(),this.getAnimateCfg("update"))}},t.prototype.destroy=function(){var e=this,n=e.shapeFactory,i=e.shape;if(i){var a=this.getAnimateCfg("leave");a?tg(i,a,{coordinate:n.coordinate,toAttrs:A({},i.attr())}):i.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,r.prototype.destroy.call(this)},t.prototype.changeVisible=function(e){r.prototype.changeVisible.call(this,e),e?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(n){n.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(n){n.hide()}))},t.prototype.setState=function(e,n){var i=this,a=i.states,o=i.shapeFactory,s=i.model,l=i.shape,u=i.shapeType,c=a.indexOf(e);if(n){if(c>-1)return;a.push(e),(e==="active"||e==="selected")&&(l==null||l.toFront())}else{if(c===-1)return;a.splice(c,1),(e==="active"||e==="selected")&&(this.geometry.zIndexReversed?l.setZIndex(this.geometry.elements.length-this.elementIndex):l.setZIndex(this.elementIndex))}var f=o.drawShape(u,s,this.getOffscreenGroup());a.length?this.syncShapeStyle(l,f,a,null):this.syncShapeStyle(l,f,["reset"],null),f.remove(!0);var d={state:e,stateStatus:n,element:this,target:this.container};this.container.emit("statechange",d),fZ(this.shape,"statechange",d)},t.prototype.clearStates=function(){var e=this,n=this.states;G(n,function(i){e.setState(i,!1)}),this.states=[]},t.prototype.hasState=function(e){return this.states.includes(e)},t.prototype.getStates=function(){return this.states},t.prototype.getData=function(){return this.data},t.prototype.getModel=function(){return this.model},t.prototype.getBBox=function(){var e=this,n=e.shape,i=e.labelShape,a={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return n&&(a=n.getCanvasBBox()),i&&i.forEach(function(o){var s=o.getCanvasBBox();a.x=Math.min(s.x,a.x),a.y=Math.min(s.y,a.y),a.minX=Math.min(s.minX,a.minX),a.minY=Math.min(s.minY,a.minY),a.maxX=Math.max(s.maxX,a.maxX),a.maxY=Math.max(s.maxY,a.maxY)}),a.width=a.maxX-a.minX,a.height=a.maxY-a.minY,a},t.prototype.getStatesStyle=function(){if(!this.statesStyle){var e=this,n=e.shapeType,i=e.geometry,a=e.shapeFactory,o=i.stateOption,s=a.defaultShapeType,l=a.theme[n]||a.theme[s];this.statesStyle=Mt({},l,o)}return this.statesStyle},t.prototype.getStateStyle=function(e,n){var i=this.getStatesStyle(),a=ne(i,[e,"style"],{}),o=a[n]||a;return Vt(o)?o(this):o},t.prototype.getAnimateCfg=function(e){var n=this,i=this.animate;if(i){var a=i[e];return a&&A(A({},a),{callback:function(){var o;Vt(a.callback)&&a.callback(),(o=n.geometry)===null||o===void 0||o.emit(Gp.AFTER_DRAW_ANIMATE)}})}return null},t.prototype.drawShape=function(e,n){var i;n===void 0&&(n=!1);var a=this,o=a.shapeFactory,s=a.container,l=a.shapeType;if(this.shape=o.drawShape(l,e,s),this.shape){this.setShapeInfo(this.shape,e);var u=this.shape.cfg.name;u?rt(u)&&(this.shape.cfg.name=["element",u]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var c=n?"enter":"appear",f=this.getAnimateCfg(c);f&&((i=this.geometry)===null||i===void 0||i.emit(Gp.BEFORE_DRAW_ANIMATE),tg(this.shape,f,{coordinate:o.coordinate,toAttrs:A({},this.shape.attr())}))}},t.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},t.prototype.setShapeInfo=function(e,n){var i=this;if(e.cfg.origin=n,e.cfg.element=this,e.isGroup()){var a=e.get("children");a.forEach(function(o){i.setShapeInfo(o,n)})}},t.prototype.syncShapeStyle=function(e,n,i,a,o){var s=this,l;if(i===void 0&&(i=[]),o===void 0&&(o=0),!(!e||!n)){var u=e.get("clipShape"),c=n.get("clipShape");if(this.syncShapeStyle(u,c,i,a),e.isGroup())for(var f=e.get("children"),d=n.get("children"),h=0;h<f.length;h++)this.syncShapeStyle(f[h],d[h],i,a,o+h);else{if(!oo(i)&&!ri(i,["reset"])){var v=e.get("name");qe(v)&&(v=v[1]),G(i,function(g){if(n.get("name")!==MD){var m=s.getStateStyle(g,v||o);n.attr(m)}})}var p=$Z(e,n);this.animate?a?((l=this.geometry)===null||l===void 0||l.emit(Gp.BEFORE_DRAW_ANIMATE),tg(e,a,{coordinate:this.shapeFactory.coordinate,toAttrs:p,shapeModel:this.model})):oo(i)?e.attr(p):(e.stopAnimate(),e.animate(p,{duration:300})):e.attr(p)}}},t.prototype.getShapeType=function(e){var n=ne(e,"shape");return qe(n)?n[0]:n},t}(VP),CQ={},EQ={};function jZe(r){return CQ[r.toLowerCase()]}function Q0(r,t){CQ[r.toLowerCase()]=t}function YZe(r){return EQ[r.toLowerCase()]}function Wo(r,t){EQ[r.toLowerCase()]=t}var XZe={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(r,t){var e=this.getShape(r);return e.getPoints?e.getPoints(t):this.getDefaultPoints(t)},getShape:function(r){var t=this[r]||this[this.defaultShapeType];return t.coordinate=this.coordinate,t},getDefaultPoints:function(){return[]},getDefaultStyle:function(r){return ne(r,[this.defaultShapeType,"default","style"],{})},getMarker:function(r,t){var e=this.getShape(r);if(!e.getMarker){var n=this.defaultShapeType;e=this.getShape(n)}var i=this.theme,a=ne(i,[r,"default"],{}),o=e.getMarker(t);return Mt({},a,o)},drawShape:function(r,t,e){var n=this.getShape(r);return n.draw(t,e)}},qZe={coordinate:null,parsePath:function(r){var t=this.coordinate,e=$m(r);return t.isPolar?e=sZe(t,e):e=oZe(t,e),e},parsePoint:function(r){var t=this.coordinate;return t.convert(r)},parsePoints:function(r){var t=this.coordinate;return r.map(function(e){return t.convert(e)})},draw:function(r,t){}},kD={};function hf(r,t){var e=rs(r),n=A(A(A({},XZe),t),{geometryType:r});return kD[e]=n,n}function En(r,t,e){var n=rs(r),i=kD[n],a=A(A({},qZe),e);return i[t]=a,a}function _Q(r){var t=rs(r);return kD[t]}function KZe(r,t,e){if(e===void 0&&(e={}),!t)return[r];var n=Q_(r,t),i=[];if(t.length===1&&e[t[0]])for(var a=e[t[0]],o=0,s=a;o<s.length;o++){var l=s[o],u=n["_"+l];u&&i.push(u)}else for(var c in n)if(n.hasOwnProperty(c)){var f=n[c];i.push(f)}return i}function TQ(r,t){return sm(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(e){return!ri(r[e],t[e])})}function J0(r){return qe(r)?r:r.split("*")}function AQ(r,t){for(var e=[],n=[],i=[],a=new Map,o=0;o<t.length;o++){var s=t[o];r[s]?n.push(s):e.push(s),a.set(s,!0)}return Object.keys(r).forEach(function(l){a.has(l)||i.push(l)}),{added:e,updated:n,removed:i}}function ZZe(r,t){var e=[];return G(t,function(n,i){var a=i.split(" ")[0];a===r&&e.push(n)}),e}var vf=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;n.type="base",n.attributes={},n.elements=[],n.elementsMap={},n.animateOption=!0,n.attributeOption={},n.lastElementsMap={},n.generatePoints=!1,n.beforeMappingData=null,n.adjusts={},n.idFields=[],n.hasSorted=!1,n.isCoordinateChanged=!1;var i=e.container,a=e.labelsContainer,o=e.coordinate,s=e.data,l=e.sortable,u=l===void 0?!1:l,c=e.visible,f=c===void 0?!0:c,d=e.theme,h=e.scales,v=h===void 0?{}:h,p=e.scaleDefs,g=p===void 0?{}:p,m=e.intervalPadding,y=e.dodgePadding,b=e.maxColumnWidth,x=e.minColumnWidth,w=e.columnWidthRatio,S=e.roseWidthRatio,C=e.multiplePieWidthRatio,_=e.zIndexReversed;return n.container=i,n.labelsContainer=a,n.coordinate=o,n.data=s,n.sortable=u,n.visible=f,n.userTheme=d,n.scales=v,n.scaleDefs=g,n.intervalPadding=m,n.dodgePadding=y,n.maxColumnWidth=b,n.minColumnWidth=x,n.columnWidthRatio=w,n.roseWidthRatio=S,n.multiplePieWidthRatio=C,n.zIndexReversed=_,n}return t.prototype.position=function(e){var n=e;Ri(e)||(n={fields:J0(e)});var i=ne(n,"fields");return i.length===1&&(i.unshift("1"),Xi(n,"fields",i)),Xi(this.attributeOption,"position",n),this},t.prototype.color=function(e,n){return this.createAttrOption("color",e,n),this},t.prototype.shape=function(e,n){return this.createAttrOption("shape",e,n),this},t.prototype.size=function(e,n){return this.createAttrOption("size",e,n),this},t.prototype.adjust=function(e){var n=e;return(rt(e)||Ri(e))&&(n=[e]),G(n,function(i,a){Kr(i)||(n[a]={type:i})}),this.adjustOption=n,this},t.prototype.style=function(e,n){if(rt(e)){var i=J0(e);this.styleOption={fields:i,callback:n}}else{var a=e,i=a.fields,o=a.callback,s=a.cfg;i||o||s?this.styleOption=e:this.styleOption={cfg:e}}return this},t.prototype.tooltip=function(e,n){if(rt(e)){var i=J0(e);this.tooltipOption={fields:i,callback:n}}else this.tooltipOption=e;return this},t.prototype.animate=function(e){return this.animateOption=e,this},t.prototype.label=function(e,n,i){if(rt(e)){var a={},o=J0(e);a.fields=o,Vt(n)?a.callback=n:Ri(n)&&(a.cfg=n),i&&(a.cfg=i),this.labelOption=a}else this.labelOption=e;return this},t.prototype.state=function(e){return this.stateOption=e,this},t.prototype.customInfo=function(e){return this.customOption=e,this},t.prototype.init=function(e){e===void 0&&(e={}),this.setCfg(e),this.initAttributes(),this.processData(this.data),this.adjustScale()},t.prototype.update=function(e){e===void 0&&(e={});var n=e.data,i=e.isDataChanged,a=e.isCoordinateChanged,o=this,s=o.attributeOption,l=o.lastAttributeOption;ri(s,l)?n&&(i||!ri(n,this.data))?(this.setCfg(e),this.initAttributes(),this.processData(n)):this.setCfg(e):this.init(e),this.adjustScale(),this.isCoordinateChanged=a},t.prototype.paint=function(e){e===void 0&&(e=!1),this.animateOption&&(this.animateOption=Mt({},wQ(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elementsMap={},this.elements=[];var n=this.getOffscreenGroup();n.clear();var i=this.beforeMappingData,a=this.beforeMapping(i);this.dataArray=new Array(a.length);for(var o=0;o<a.length;o++){var s=a[o];this.dataArray[o]=this.mapping(s)}if(this.updateElements(this.dataArray,e),this.lastElementsMap=this.elementsMap,this.canDoGroupAnimation(e)){var l=this.container,u=this.type,c=this.coordinate,f=ne(this.animateOption,"appear"),d=this.getYScale(),h=c.convert({x:0,y:d.scale(this.getYMinValue())});WZe(l,f,u,c,h)}this.labelOption&&this.renderLabels(Do(this.dataArray),e),this.lastAttributeOption=A({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},t.prototype.clear=function(){var e=this,n=e.container,i=e.geometryLabel,a=e.offscreenGroup;n&&n.clear(),i&&i.clear(),a&&a.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},t.prototype.destroy=function(){this.clear();var e=this.container;e.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,r.prototype.destroy.call(this)},t.prototype.getGroupScales=function(){return this.groupScales},t.prototype.getAttribute=function(e){return this.attributes[e]},t.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},t.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},t.prototype.getGroupAttributes=function(){var e=[];return G(this.attributes,function(n){I0.includes(n.type)&&e.push(n)}),e},t.prototype.getDefaultValue=function(e){var n,i=this.getAttribute(e);return i&&oo(i.scales)&&(n=i.values[0]),n},t.prototype.getAttributeValues=function(e,n){for(var i=[],a=e.scales,o=0,s=a.length;o<s;o++){var l=a[o],u=l.field;l.isIdentity?i.push(l.values):i.push(n[u])}return e.mapping.apply(e,i)},t.prototype.getAdjust=function(e){return this.adjusts[e]},t.prototype.getCoordinate=function(){return this.coordinate},t.prototype.getData=function(){return this.data},t.prototype.getShapeMarker=function(e,n){var i=this.getShapeFactory();return i.getMarker(e,n)},t.prototype.getElementsBy=function(e){return this.elements.filter(function(n){return e(n)})},t.prototype.getElements=function(){return this.elements},t.prototype.getElementId=function(e){e=qe(e)?e[0]:e;var n=e[Nn];if(this.idFields.length){for(var i=n[this.idFields[0]],a=1;a<this.idFields.length;a++)i+="-"+n[this.idFields[a]];return i}var o=this.type,s=this.getXScale(),l=this.getYScale(),u=s.field||"x",c=l.field||"y",f=n[c],d;s.type==="identity"?d=s.values[0]:d=n[u];var h;o==="interval"||o==="schema"?h=""+d:o==="line"||o==="area"||o==="path"?h=o:h=d+"-"+f;var v=this.groupScales;oo(v)&&(v=ne(this.getAttribute("color"),"scales",[]));for(var a=0,p=v.length;a<p;a++){var g=v[a],m=g.field;h=h+"-"+n[m]}var y=this.getAdjust("dodge");if(y){var b=y.dodgeBy;b&&(h=h+"-"+n[b])}return this.getAdjust("jitter")&&(h=h+"-"+e.x+"-"+e.y),h},t.prototype.getScaleFields=function(){var e=[],n=new Map,i=this,a=i.attributeOption,o=i.labelOption,s=i.tooltipOption;for(var l in a)if(a.hasOwnProperty(l)){var u=a[l];u.fields?ff(u.fields,e,n):u.values&&ff(u.values,e,n)}return o&&o.fields&&ff(o.fields,e,n),Kr(s)&&s.fields&&ff(s.fields,e,n),e},t.prototype.changeVisible=function(e){r.prototype.changeVisible.call(this,e);for(var n=this.elements,i=0,a=n.length;i<a;i++){var o=n[i];o.changeVisible(e)}e?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},t.prototype.getFields=function(){var e=new Map,n=[];return Object.values(this.attributeOption).forEach(function(i){var a=(i==null?void 0:i.fields)||[];a.forEach(function(o){e.has(o)||n.push(o),e.set(o,!0)})},[]),n},t.prototype.getGroupFields=function(){for(var e=[],n=new Map,i=0,a=I0.length;i<a;i++){var o=I0[i],s=this.attributeOption[o];s&&s.fields&&ff(s.fields,e,n)}return e},t.prototype.getXYFields=function(){var e=this.attributeOption.position.fields,n=e[0],i=e[1];return[n,i]},t.prototype.getXField=function(){return ne(this.getXYFields(),[0])},t.prototype.getYField=function(){return ne(this.getXYFields(),[1])},t.prototype.getShapes=function(){return this.elements.map(function(e){return e.shape})},t.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},t.prototype.sort=function(e){if(!this.hasSorted)for(var n=this.getXScale(),i=n.field,a=0;a<e.length;a++){var o=e[a];o.sort(function(s,l){return n.translate(s[Nn][i])-n.translate(l[Nn][i])})}this.hasSorted=!0},t.prototype.adjustScale=function(){var e=this.getYScale();e&&this.getAdjust("stack")&&this.updateStackRange(e,this.beforeMappingData)},t.prototype.getShapeFactory=function(){var e=this.shapeType;if(!!_Q(e))return this.shapeFactory||(this.shapeFactory=Mr(_Q(e))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[e]||{},this.shapeFactory},t.prototype.createShapePointsCfg=function(e){var n=this.getXScale(),i=this.getYScale(),a=this.normalizeValues(e[n.field],n),o;return i?o=this.normalizeValues(e[i.field],i):o=e.y?e.y:.1,{x:a,y:o,y0:i?i.scale(this.getYMinValue()):void 0}},t.prototype.createElement=function(e,n,i){i===void 0&&(i=!1);var a=this.container,o=this.getDrawCfg(e),s=this.getShapeFactory(),l=new SQ({shapeFactory:s,container:a,offscreenGroup:this.getOffscreenGroup(),elementIndex:n});return l.animate=this.animateOption,l.geometry=this,l.draw(o,i),l},t.prototype.getDrawCfg=function(e){var n=e[Nn],i={mappingData:e,data:n,x:e.x,y:e.y,color:e.color,size:e.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},a=e.shape;!a&&this.getShapeFactory()&&(a=this.getShapeFactory().defaultShapeType),i.shape=a;var o=this.theme.geometries[this.shapeType];i.defaultStyle=ne(o,[a,"default"],{}).style,!i.defaultStyle&&this.getShapeFactory()&&(i.defaultStyle=this.getShapeFactory().getDefaultStyle(o));var s=this.styleOption;return s&&(i.style=this.getStyleCfg(s,n)),this.generatePoints&&(i.points=e.points,i.nextPoints=e.nextPoints),i},t.prototype.updateElements=function(e,n){n===void 0&&(n=!1);for(var i=new Map,a=[],o=new Map,s=0,l=0;l<e.length;l++)for(var u=e[l],c=0;c<u.length;c++){var f=u[c],d=this.getElementId(f),h=i.has(d)?d+"-"+l+"-"+c:d;a.push(h),i.set(h,f),o.set(h,s),s++}this.elements=new Array(s);for(var v=AQ(this.lastElementsMap,a),p=v.added,g=v.updated,m=v.removed,y=0,b=p;y<b.length;y++){var d=b[y],f=i.get(d),l=o.get(d),x=this.createElement(f,l,n);this.elements[l]=x,this.elementsMap[d]=x,x.shape&&x.shape.setZIndex(this.zIndexReversed?this.elements.length-l:l)}for(var w=0,S=g;w<S.length;w++){var d=S[w],x=this.lastElementsMap[d],f=i.get(d),C=this.getDrawCfg(f),_=x.getModel(),l=o.get(d);(this.isCoordinateChanged||TQ(C,_))&&(x.animate=this.animateOption,x.update(C)),this.elements[l]=x,this.elementsMap[d]=x,x.shape&&x.shape.setZIndex(this.zIndexReversed?this.elements.length-l:l)}for(var T=0,E=m;T<E.length;T++){var d=E[T],x=this.lastElementsMap[d];x.animate=this.animateOption,x.destroy()}},t.prototype.getLabelType=function(){var e=this,n=e.labelOption,i=e.coordinate,a=e.type,o=i.type,s=i.isTransposed,l=ne(n,["cfg","type"]);return l||(o==="polar"?l=s?"pie":"polar":o==="theta"?l="pie":a==="interval"||a==="polygon"?l="interval":l="base"),l},t.prototype.getYMinValue=function(){var e=this.getYScale(),n=e.min,i=e.max,a;return n>=0?a=n:i<=0?a=i:a=0,a},t.prototype.createAttrOption=function(e,n,i){if(Je(n)||Kr(n))Kr(n)&&ri(Object.keys(n),["values"])?Xi(this.attributeOption,e,{fields:n.values}):Xi(this.attributeOption,e,n);else{var a={};Rt(n)?a.values=[n]:a.fields=J0(n),i&&(Vt(i)?a.callback=i:a.values=i),Xi(this.attributeOption,e,a)}},t.prototype.initAttributes=function(){var e=this,n=this,i=n.attributes,a=n.attributeOption,o=n.theme,s=n.shapeType;this.groupScales=[];var l={},u=function(d){if(a.hasOwnProperty(d)){var h=a[d];if(!h)return{value:void 0};var v=A({},h),p=v.callback,g=v.values,m=v.fields,y=m===void 0?[]:m,b=y.map(function(w){var S=e.scales[w];return S.isCategory&&!l[w]&&I0.includes(d)&&(e.groupScales.push(S),l[w]=!0),S});v.scales=b,d!=="position"&&b.length===1&&b[0].type==="identity"?v.values=b[0].values:!p&&!g&&(d==="size"?v.values=o.sizes:d==="shape"?v.values=o.shapes[s]||[]:d==="color"&&(b.length?v.values=b[0].values.length<=10?o.colors10:o.colors20:v.values=o.colors10));var x=$K(d);i[d]=new x(v)}};for(var c in a){var f=u(c);if(typeof f=="object")return f.value}},t.prototype.processData=function(e){this.hasSorted=!1;for(var n=this.getAttribute("position").scales,i=n.filter(function(w){return w.isCategory}),a=this.groupData(e),o=[],s=0,l=a.length;s<l;s++){for(var u=a[s],c=[],f=0,d=u.length;f<d;f++){var h=u[f],v={};for(var p in h)v[p]=h[p];v[Nn]=h;for(var g=0,m=i;g<m.length;g++){var y=m[g],b=y.field;v[b]=y.translate(v[b])}c.push(v)}o.push(c)}var x=this.adjustData(o);return this.beforeMappingData=x,x},t.prototype.adjustData=function(e){var n=this.adjustOption,i=this,a=i.intervalPadding,o=i.dodgePadding,s=i.theme,l=this.maxColumnWidth||s.maxColumnWidth,u=this.minColumnWidth||s.minColumnWidth,c=this.columnWidthRatio||s.columnWidthRatio,f=e;if(n){var d=this.getXScale(),h=this.getYScale(),v=d.field,p=h?h.field:null,g=W0(this.coordinate),m=d.values.length,y=this.getAttribute("size"),b=void 0;y&&(b=y.values[0]);for(var x=0,w=n.length;x<w;x++){var S=n[x],C=A({xField:v,yField:p,intervalPadding:a,dodgePadding:o,xDimensionLength:g,groupNum:m,defaultSize:b,maxColumnWidth:l,minColumnWidth:u,columnWidthRatio:c},S),_=S.type;if(_==="dodge"){var T=[];if(d.isCategory||d.type==="identity")T.push("x");else if(!h)T.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");C.adjustNames=T,C.dodgeRatio=c}else if(_==="stack"){var E=this.coordinate;if(!h){C.height=E.getHeight();var M=this.getDefaultValue("size")||3;C.size=M}!E.isTransposed&&Je(C.reverseOrder)&&(C.reverseOrder=!0)}var k=RK(_),P=new k(C);f=P.process(f),this.adjusts[_]=P}}return f},t.prototype.groupData=function(e){for(var n=this.getGroupScales(),i=this.scaleDefs,a={},o=[],s=0;s<n.length;s++){var l=n[s],u=l.field;o.push(u),ne(i,[u,"values"])&&(a[u]=i[u].values)}return KZe(e,o,a)},t.prototype.updateStackRange=function(e,n){for(var i=Do(n),a=e.field,o=e.min,s=e.max,l=0;l<i.length;l++){var u=i[l],c=Math.min.apply(null,u[a]),f=Math.max.apply(null,u[a]);c<o&&(o=c),f>s&&(s=f)}var d=this.scaleDefs,h={};o<e.min&&!ne(d,[a,"min"])&&(h.min=o),s>e.max&&!ne(d,[a,"max"])&&(h.max=s),e.change(h)},t.prototype.beforeMapping=function(e){var n=e;if(this.sortable&&this.sort(n),this.generatePoints)for(var i=0,a=n.length;i<a;i++){var o=n[i];this.generateShapePoints(o);var s=n[i+1];s&&(this.generateShapePoints(s),o[0].nextPoints=s[0].points)}return n},t.prototype.generateShapePoints=function(e){for(var n=this.getShapeFactory(),i=this.getAttribute("shape"),a=0;a<e.length;a++){var o=e[a],s=this.createShapePointsCfg(o),l=i?this.getAttributeValues(i,o):null,u=n.getShapePoints(l,s);o.points=u}},t.prototype.normalizeValues=function(e,n){var i=[];if(qe(e))for(var a=0;a<e.length;a++){var o=e[a];i.push(n.scale(o))}else i=n.scale(e);return i},t.prototype.mapping=function(e){for(var n=this.attributes,i=[],a=0;a<e.length;a++){var o=e[a],s={_origin:o[Nn],points:o.points,nextPoints:o.nextPoints};for(var l in n)if(n.hasOwnProperty(l)){var u=n[l],c=u.names,f=this.getAttributeValues(u,o);if(c.length>1)for(var d=0;d<f.length;d+=1){var h=f[d],v=c[d];s[v]=qe(h)&&h.length===1?h[0]:h}else s[c[0]]=f.length===1?f[0]:f}this.convertPoint(s),i.push(s)}return i},t.prototype.convertPoint=function(e){var n=e.x,i=e.y,a,o,s,l=this.coordinate;if(qe(n)&&qe(i)){a=[],o=[];for(var u=0,c=0,f=n.length,d=i.length;u<f&&c<d;u+=1,c+=1)s=l.convert({x:n[u],y:i[c]}),a.push(s.x),o.push(s.y)}else if(qe(i)){o=[];for(var h=0;h<i.length;h++){var v=i[h];s=l.convert({x:n,y:v}),a&&a!==s.x?(qe(a)||(a=[a]),a.push(s.x)):a=s.x,o.push(s.y)}}else if(qe(n)){a=[];for(var h=0;h<n.length;h++){var p=n[h];s=l.convert({x:p,y:i}),o&&o!==s.y?(qe(o)||(o=[o]),o.push(s.y)):o=s.y,a.push(s.x)}}else{var g=l.convert({x:n,y:i});a=g.x,o=g.y}e.x=a,e.y=o},t.prototype.getStyleCfg=function(e,n){var i=e.fields,a=i===void 0?[]:i,o=e.callback,s=e.cfg;if(s)return s;var l=a.map(function(u){return n[u]});return o.apply(void 0,l)},t.prototype.setCfg=function(e){var n=this,i=e.coordinate,a=e.data,o=e.theme,s=e.scaleDefs;i&&(this.coordinate=i),a&&(this.data=a),s&&(this.scaleDefs=s,this.idFields=[],G(s,function(l,u){l&&l.key&&n.idFields.push(u)})),o&&(this.theme=this.userTheme?Mt({},o,this.userTheme):o)},t.prototype.renderLabels=function(e,n){n===void 0&&(n=!1);var i=this.geometryLabel;if(!i){var a=this.getLabelType(),o=jZe(a);i=new o(this),this.geometryLabel=i}i.render(e,n);var s=i.labelsRenderer.shapesMap;G(this.elementsMap,function(l,u){var c=ZZe(u,s);if(c.length){l.labelShape=c;for(var f=0;f<c.length;f++)for(var d=c[f],h=d.getChildren(),v=0;v<h.length;v++){var p=h[v];p.cfg.name=["element","label"],p.cfg.element=l}}})},t.prototype.canDoGroupAnimation=function(e){return!e&&this.animateOption&&(ne(this.animateOption,"appear")===void 0||ne(this.animateOption,"appear")&&ne(this.animateOption,["appear","animation"])===void 0)},t}(VP),jC=Un;function eb(r,t,e){var n=jC(r.getMatrix(),[["t",t,e]]);r.setMatrix(n)}function QZe(r,t){var e=r.attr(),n=e.x,i=e.y,a=jC(r.getMatrix(),[["t",-n,-i],["r",t],["t",n,i]]);return a}function ID(r,t){var e=QZe(r,t);r.setMatrix(e)}function JZe(r,t){var e=r.getBBox(),n=(e.minX+e.maxX)/2,i=(e.minY+e.maxY)/2;r.applyToMatrix([n,i,1]);var a=jC(r.getMatrix(),[["t",-n,-i],["s",t,t],["t",n,i]]);r.setMatrix(a)}function pf(r){return r.find(function(t){return t.get("type")==="text"})}function PD(r,t,e){e===void 0&&(e=[0,0,0,0]);var n=r.getChildren()[0];if(n){var i=n.clone();(t==null?void 0:t.rotate)&&ID(i,-t.rotate);var a=i.getCanvasBBox(),o=a.x,s=a.y,l=a.width,u=a.height;i.destroy();var c=e;return Je(c)?c=[2,2,2,2]:Rt(c)&&(c=new Array(4).fill(c)),{x:o-c[3],y:s-c[0],width:l+c[1]+c[3],height:u+c[0]+c[2],rotation:(t==null?void 0:t.rotate)||0}}}function eQe(r,t,e){e===void 0&&(e=0);var n=Math.max(0,Math.min(r.x+r.width+e,t.x+t.width+e)-Math.max(r.x-e,t.x-e)),i=Math.max(0,Math.min(r.y+r.height+e,t.y+t.height+e)-Math.max(r.y-e,t.y-e));return n*i}function tQe(r,t){var e=r.getBBox();return sm(t,function(n){var i=n.getBBox();return eQe(e,i,2)>0})}function MQ(r,t,e){var n=e.data,i=e.origin,a=e.animateCfg,o=e.coordinate,s=ne(a,"update");r.set("data",n),r.set("origin",i),r.set("animateCfg",a),r.set("coordinate",o),r.set("visible",t.get("visible")),r.getChildren().forEach(function(l,u){var c=t.getChildByIndex(u);if(!c)r.removeChild(l),l.remove(!0);else{l.set("data",n),l.set("origin",i),l.set("animateCfg",a),l.set("coordinate",o);var f=$Z(l,c);s?tg(l,s,{toAttrs:f,coordinate:o}):l.attr(f),c.isGroup()&&MQ(l,c,e)}}),G(t.getChildren(),function(l,u){u>=r.getCount()&&(l.destroyed||r.add(l))})}var rQe=function(){function r(t){this.shapesMap={},this.lastShapesMap={};var e=t.layout,n=t.container;this.layout=e,this.container=n}return r.prototype.render=function(t,e,n){var i=this;n===void 0&&(n=!1),this.shapesMap={};var a=this.container,o=this.createOffscreenGroup();if(t.length){for(var s=0,l=t;s<l.length;s++){var u=l[s];u&&this.renderLabel(u,o)}this.doLayout(t,e),this.renderLabelLine(t),this.renderLabelBackground(t),this.adjustLabel(t)}var c=this.lastShapesMap,f=this.shapesMap;G(f,function(d,h){if(d.destroyed)delete f[h];else{if(c[h]){var v=d.get("data"),p=d.get("origin"),g=d.get("coordinate"),m=d.get("animateCfg"),y=c[h];MQ(y,f[h],{data:v,origin:p,animateCfg:m,coordinate:g}),i.shapesMap[h]=y}else{a.add(d);var b=ne(d.get("animateCfg"),n?"enter":"appear");b&&tg(d,b,{toAttrs:A({},d.attr()),coordinate:d.get("coordinate")})}delete c[h]}}),G(c,function(d){var h=ne(d.get("animateCfg"),"leave");h?tg(d,h,{toAttrs:null,coordinate:d.get("coordinate")}):d.remove(!0)}),this.lastShapesMap=f,o.destroy()},r.prototype.clear=function(){this.container.clear(),this.shapesMap={},this.lastShapesMap={}},r.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null,this.lastShapesMap=null},r.prototype.renderLabel=function(t,e){var n=t.id,i=t.elementId,a=t.data,o=t.mappingData,s=t.coordinate,l=t.animate,u=t.content,c={id:n,elementId:i,data:a,origin:A(A({},o),{data:o[Nn]}),coordinate:s},f=e.addGroup(A({name:"label",animateCfg:this.animate===!1||l===null||l===!1?!1:Mt({},this.animate,l)},c)),d;if(u.isGroup&&u.isGroup()||u.isShape&&u.isShape()){var h=u.getCanvasBBox(),v=h.width,p=h.height,g=ne(t,"textAlign","left"),m=t.x,y=t.y-p/2;g==="center"?m=m-v/2:(g==="right"||g==="end")&&(m=m-v),eb(u,m,y),d=u,f.add(u)}else{var b=ne(t,["style","fill"]);d=f.addShape("text",A({attrs:A(A({x:t.x,y:t.y,textAlign:t.textAlign,textBaseline:ne(t,"textBaseline","middle"),text:t.content},t.style),{fill:C3(b)?t.color:b})},c))}t.rotate&&ID(d,t.rotate),this.shapesMap[n]=f},r.prototype.doLayout=function(t,e){var n=this;if(this.layout){var i=qe(this.layout)?this.layout:[this.layout];G(i,function(a){var o=YZe(ne(a,"type",""));if(o){var s=[],l=[];G(n.shapesMap,function(u,c){s.push(u),l.push(e[u.get("elementId")])}),o(t,s,l,n.region,a.cfg)}})}},r.prototype.renderLabelLine=function(t){var e=this;G(t,function(n){var i=ne(n,"coordinate");if(!(!n||!i)){var a=i.getCenter(),o=i.getRadius();if(!!n.labelLine){var s=ne(n,"labelLine",{}),l=n.id,u=s.path;if(!u){var c=ea(a.x,a.y,o,n.angle);u=[["M",c.x,c.y],["L",n.x,n.y]]}var f=e.shapesMap[l];f.destroyed||f.addShape("path",{capture:!1,attrs:A({path:u,stroke:n.color?n.color:ne(n,["style","fill"],"#000"),fill:null},s.style),id:l,origin:n.mappingData,data:n.data,coordinate:n.coordinate})}}})},r.prototype.renderLabelBackground=function(t){var e=this;G(t,function(n){var i=ne(n,"coordinate"),a=ne(n,"background");if(!(!a||!i)){var o=n.id,s=e.shapesMap[o];if(!s.destroyed){var l=s.getChildren()[0];if(l){var u=PD(s,n,a.padding),c=u.rotation,f=Lr(u,["rotation"]),d=s.addShape("rect",{attrs:A(A({},f),a.style||{}),id:o,origin:n.mappingData,data:n.data,coordinate:n.coordinate});if(d.setZIndex(-1),c){var h=l.getMatrix();d.setMatrix(h)}}}}})},r.prototype.createOffscreenGroup=function(){var t=this.container,e=t.getGroupBase(),n=new e({});return n},r.prototype.adjustLabel=function(t){var e=this;G(t,function(n){if(n){var i=n.id,a=e.shapesMap[i];if(!a.destroyed){var o=a.findAll(function(s){return s.get("type")!=="path"});G(o,function(s){s&&(n.offsetX&&s.attr("x",s.attr("x")+n.offsetX),n.offsetY&&s.attr("y",s.attr("y")+n.offsetY))})}}})},r}();function kQ(r){var t=0;return G(r,function(e){t+=e}),t/r.length}var YC=function(){function r(t){this.geometry=t}return r.prototype.getLabelItems=function(t){var e=this,n=[],i=this.getLabelCfgs(t);return G(t,function(a,o){var s=i[o];if(!s||Je(a.x)||Je(a.y)){n.push(null);return}var l=qe(s.content)?s.content:[s.content];s.content=l;var u=l.length;G(l,function(c,f){if(Je(c)||c===""){n.push(null);return}var d=A(A({},s),e.getLabelPoint(s,a,f));d.textAlign||(d.textAlign=e.getLabelAlign(d,f,u)),d.offset<=0&&(d.labelLine=null),n.push(d)})}),n},r.prototype.render=function(t,e){e===void 0&&(e=!1);var n=this.getLabelItems(t),i=this.getLabelsRenderer(),a=this.getGeometryShapes();i.render(n,a,e)},r.prototype.clear=function(){var t=this.labelsRenderer;t&&t.clear()},r.prototype.destroy=function(){var t=this.labelsRenderer;t&&t.destroy(),this.labelsRenderer=null},r.prototype.getCoordinate=function(){return this.geometry.coordinate},r.prototype.getDefaultLabelCfg=function(t,e){var n=this.geometry,i=n.type,a=n.theme;return i==="polygon"||i==="interval"&&e==="middle"||t<0&&!["line","point","path"].includes(i)?ne(a,"innerLabels",{}):ne(a,"labels",{})},r.prototype.getThemedLabelCfg=function(t){var e=this.geometry,n=this.getDefaultLabelCfg(),i=e.type,a=e.theme,o;return i==="polygon"||t.offset<0&&!["line","point","path"].includes(i)?o=Mt({},n,a.innerLabels,t):o=Mt({},n,a.labels,t),o},r.prototype.setLabelPosition=function(t,e,n,i){},r.prototype.getLabelOffset=function(t){var e=this.getCoordinate(),n=this.getOffsetVector(t);return e.isTransposed?n[0]:n[1]},r.prototype.getLabelOffsetPoint=function(t,e,n){var i=t.offset,a=this.getCoordinate(),o=a.isTransposed,s=o?"x":"y",l=o?1:-1,u={x:0,y:0};return e>0||n===1?u[s]=i*l:u[s]=i*l*-1,u},r.prototype.getLabelPoint=function(t,e,n){var i=this.getCoordinate(),a=t.content.length;function o(g,m,y){y===void 0&&(y=!1);var b=g;return qe(b)&&(t.content.length===1?y?b=kQ(b):b.length<=2?b=b[g.length-1]:b=kQ(b):b=b[m]),b}var s={content:t.content[n],x:0,y:0,start:{x:0,y:0},color:"#fff"},l=qe(e.shape)?e.shape[0]:e.shape,u=l==="funnel"||l==="pyramid";if(this.geometry.type==="polygon"){var c=zKe(e.x,e.y);s.x=c[0],s.y=c[1]}else this.geometry.type==="interval"&&!u?(s.x=o(e.x,n,!0),s.y=o(e.y,n)):(s.x=o(e.x,n),s.y=o(e.y,n));if(u){var f=ne(e,"nextPoints"),d=ne(e,"points");if(f){var h=i.convert(d[1]),v=i.convert(f[1]);s.x=(h.x+v.x)/2,s.y=(h.y+v.y)/2}else if(l==="pyramid"){var h=i.convert(d[1]),v=i.convert(d[2]);s.x=(h.x+v.x)/2,s.y=(h.y+v.y)/2}}t.position&&this.setLabelPosition(s,e,n,t.position);var p=this.getLabelOffsetPoint(t,n,a);return s.start={x:s.x,y:s.y},s.x+=p.x,s.y+=p.y,s.color=e.color,s},r.prototype.getLabelAlign=function(t,e,n){var i="center",a=this.getCoordinate();if(a.isTransposed){var o=t.offset;o<0?i="right":o===0?i="center":i="left",n>1&&e===0&&(i==="right"?i="left":i==="left"&&(i="right"))}return i},r.prototype.getLabelId=function(t){var e=this.geometry,n=e.type,i=e.getXScale(),a=e.getYScale(),o=t[Nn],s=e.getElementId(t);return n==="line"||n==="area"?s+=" "+o[i.field]:n==="path"&&(s+=" "+o[i.field]+"-"+o[a.field]),s},r.prototype.getLabelsRenderer=function(){var t=this.geometry,e=t.labelsContainer,n=t.labelOption,i=t.canvasRegion,a=t.animateOption,o=this.geometry.coordinate,s=this.labelsRenderer;return s||(s=new rQe({container:e,layout:ne(n,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=s),s.region=i,s.animate=a?wQ("label",o):!1,s},r.prototype.getLabelCfgs=function(t){var e=this,n=this.geometry,i=n.labelOption,a=n.scales,o=n.coordinate,s=i,l=s.fields,u=s.callback,c=s.cfg,f=l.map(function(h){return a[h]}),d=[];return G(t,function(h,v){var p=h[Nn],g=e.getLabelText(p,f),m;if(u){var y=l.map(function(C){return p[C]});if(m=u.apply(void 0,y),Je(m)){d.push(null);return}}var b=A(A({id:e.getLabelId(h),elementId:e.geometry.getElementId(h),data:p,mappingData:h,coordinate:o},c),m);Vt(b.position)&&(b.position=b.position(p,h,v));var x=e.getLabelOffset(b.offset||0),w=e.getDefaultLabelCfg(x,b.position);b=Mt({},w,b),b.offset=e.getLabelOffset(b.offset||0);var S=b.content;Vt(S)?b.content=S(p,h,v):xc(S)&&(b.content=g[0]),d.push(b)}),d},r.prototype.getLabelText=function(t,e){var n=[];return G(e,function(i){var a=t[i.field];qe(a)?a=a.map(function(o){return i.getText(o)}):a=i.getText(a),Je(a)||a===""?n.push(null):n.push(a)}),n},r.prototype.getOffsetVector=function(t){t===void 0&&(t=0);var e=this.getCoordinate(),n=0;return Rt(t)&&(n=t),e.isTransposed?e.applyMatrix(n,0):e.applyMatrix(0,n)},r.prototype.getGeometryShapes=function(){var t=this.geometry,e={};return G(t.elementsMap,function(n,i){e[i]=n.shape}),G(t.getOffscreenGroup().getChildren(),function(n){var i=t.getElementId(n.get("origin").mappingData);e[i]=n}),e},r}();function DD(r,t,e){if(!r)return e;var n;if(r.callback&&r.callback.length>1){var i=Array(r.callback.length-1).fill("");n=r.mapping.apply(r,Jn([t],i,!1)).join("")}else n=r.mapping(t).join("");return n||e}var yh={hexagon:function(r,t,e){var n=e/2*Math.sqrt(3);return[["M",r,t-e],["L",r+n,t-e/2],["L",r+n,t+e/2],["L",r,t+e],["L",r-n,t+e/2],["L",r-n,t-e/2],["Z"]]},bowtie:function(r,t,e){var n=e-1.5;return[["M",r-e,t-n],["L",r+e,t+n],["L",r+e,t-n],["L",r-e,t+n],["Z"]]},cross:function(r,t,e){return[["M",r-e,t-e],["L",r+e,t+e],["M",r+e,t-e],["L",r-e,t+e]]},tick:function(r,t,e){return[["M",r-e/2,t-e],["L",r+e/2,t-e],["M",r,t-e],["L",r,t+e],["M",r-e/2,t+e],["L",r+e/2,t+e]]},plus:function(r,t,e){return[["M",r-e,t],["L",r+e,t],["M",r,t-e],["L",r,t+e]]},hyphen:function(r,t,e){return[["M",r-e,t],["L",r+e,t]]},line:function(r,t,e){return[["M",r,t-e],["L",r,t+e]]}},nQe=["line","cross","tick","plus","hyphen"];function iQe(r,t){return Vt(t)?t(r):Mt({},r,t)}function aQe(r,t){var e=r.symbol;if(rt(e)&&nQe.indexOf(e)!==-1){var n=ne(r,"style",{}),i=ne(n,"lineWidth",1),a=n.stroke||n.fill||t;r.style=Mt({},r.style,{lineWidth:i,stroke:a,fill:null})}}function IQ(r){var t=r.symbol;rt(t)&&yh[t]&&(r.symbol=yh[t])}function RD(r){return r.startsWith(Nt.LEFT)||r.startsWith(Nt.RIGHT)?"vertical":"horizontal"}function PQ(r,t,e,n,i){var a=e.getScale(e.type);if(a.isCategory){var o=a.field,s=t.getAttribute("color"),l=t.getAttribute("shape"),u=r.getTheme().defaultColor,c=t.coordinate.isPolar;return a.getTicks().map(function(f,d){var h,v=f.text,p=f.value,g=v,m=a.invert(p),y=r.filterFieldData(o,[(h={},h[o]=m,h)]).length===0;G(r.views,function(C){var _;C.filterFieldData(o,[(_={},_[o]=m,_)]).length||(y=!0)});var b=DD(s,m,u),x=DD(l,m,"point"),w=t.getShapeMarker(x,{color:b,isInPolar:c}),S=i;return Vt(S)&&(S=S(g,d,A({name:g,value:m},Mt({},n,w)))),w=Mt({},n,w,Ho(A({},S),["style"])),aQe(w,b),S&&S.style&&(w.style=iQe(w.style,S.style)),IQ(w),{id:m,name:g,value:m,marker:w,unchecked:y}})}return[]}function oQe(r,t,e){return e.map(function(n,i){var a=t;Vt(a)&&(a=a(n.name,i,Mt({},r,n)));var o=Vt(n.marker)?n.marker(n.name,i,Mt({},r,n)):n.marker,s=Mt({},r,a,o);return IQ(s),n.marker=s,n})}function DQ(r,t){var e=ne(r,["components","legend"],{});return Mt({},ne(e,["common"],{}),Mt({},ne(e,[t],{})))}function OD(r){return r?!1:r==null||isNaN(r)}function RQ(r){if(qe(r))return OD(r[1].y);var t=r.y;return qe(t)?OD(t[0]):OD(t)}function XC(r,t,e){if(t===void 0&&(t=!1),e===void 0&&(e=!0),!r.length||r.length===1&&!e)return[];if(t){for(var n=[],i=0,a=r.length;i<a;i++){var o=r[i];RQ(o)||n.push(o)}return[n]}for(var s=[],l=[],i=0,a=r.length;i<a;i++){var o=r[i];RQ(o)?l.length&&(l.length===1&&!e||s.push(l),l=[]):l.push(o)}return l.length&&s.push(l),s}function OQ(r){for(var t=[],e=0;e<r.length;e++){var n=r[e];if(n){var i=e===0?"M":"L";t.push([i,n.x,n.y])}}var a=r[0];return a&&(t.push(["L",a.x,a.y]),t.push(["z"])),t}function LQ(r){for(var t=r.length/2,e=[],n=[],i=0;i<r.length;i++)i<t?e.push(r[i]):n.push(r[i]);var a=VC(e,!1),o=VC(n,!1);n.length&&a.push(["L",n[0].x,n[0].y]),o.shift();var s=a.concat(o);return e.length&&s.push(["L",e[0].x,e[0].y]),s.push(["z"]),s}function Gi(r,t,e,n){n===void 0&&(n="");var i=r.style,a=i===void 0?{}:i,o=r.defaultStyle,s=r.color,l=r.size,u=A(A({},o),a);return s&&(t&&(a.stroke||(u.stroke=s)),e&&(a.fill||(u.fill=s))),n&&Je(a[n])&&!Je(l)&&(u[n]=l),u}function FQ(r){return Mt({},{fill:"#CCD6EC",fillOpacity:.3},ne(r,["background","style"]))}function LD(r){var t=r.x,e=qe(r.y)?r.y:[r.y];return e.map(function(n,i){return{x:qe(t)?t[i]:t,y:n}})}var sQe={line:function(r,t,e){return[["M",r-e,t],["L",r+e,t]]},dot:function(r,t,e){return[["M",r-e,t],["L",r+e,t]]},dash:function(r,t,e){return[["M",r-e,t],["L",r+e,t]]},smooth:function(r,t,e){return[["M",r-e,t],["A",e/2,e/2,0,1,1,r,t],["A",e/2,e/2,0,1,0,r+e,t]]},hv:function(r,t,e){return[["M",r-e-1,t-2.5],["L",r,t-2.5],["L",r,t+2.5],["L",r+e+1,t+2.5]]},vh:function(r,t,e){return[["M",r-e-1,t+2.5],["L",r,t+2.5],["L",r,t-2.5],["L",r+e+1,t-2.5]]},hvh:function(r,t,e){return[["M",r-(e+1),t+2.5],["L",r-e/2,t+2.5],["L",r-e/2,t-2.5],["L",r+e/2,t-2.5],["L",r+e/2,t+2.5],["L",r+e+1,t+2.5]]},vhv:function(r,t){return[["M",r-5,t+2.5],["L",r-5,t],["L",r,t],["L",r,t-3],["L",r,t+3],["L",r+6.5,t+3]]}};function NQ(r,t){var e=r.color;return{symbol:sQe[t],style:{lineWidth:2,r:6,stroke:e}}}function lQe(r,t,e){for(var n=r.isStack,i=r.connectNulls,a=r.isInCircle,o=r.showSinglePoint,s=Gi(r,!0,!1,"lineWidth"),l=XC(r.points,i,o),u=[],c=0,f=l.length;c<f;c++){var d=l[c];u=u.concat(BQ(d,a,n,t,e,s))}return s.path=u,s}function FD(r,t,e,n,i){if(r.length===1)return[["M",r[0].x,r[0].y-i.lineWidth/2],["L",r[0].x,r[0].y],["L",r[0].x,r[0].y+i.lineWidth/2]];var a;return e?(t&&r.length&&r.push({x:r[0].x,y:r[0].y}),a=VC(r,!1,n)):(a=Y0(r,!1),t&&a.push(["Z"])),a}function uQe(r,t,e,n,i,a){var o=[],s=[];G(r,function(c){var f=LD(c);o.push(f[1]),s.push(f[0])});var l=FD(o,t,n,i,a),u=FD(s,t,n,i,a);return e?l:l.concat(u)}function BQ(r,t,e,n,i,a){if(r.length){var o=r[0];return qe(o.y)?uQe(r,t,e,n,i,a):FD(r,t,n,i,a)}return[]}hf("line",{defaultShapeType:"line"});G(["line","dot","dash","smooth"],function(r){En("line",r,{draw:function(t,e){var n=r==="smooth",i;if(n){var a=this.coordinate,o=a.start,s=a.end;i=[[o.x,s.y],[s.x,o.y]]}var l=lQe(t,n,i),u=e.addShape({type:"path",attrs:l,name:"line",capture:!n});return u},getMarker:function(t){return NQ(t,r)}})});var jo={getLegendItems:PQ,translate:eb,rotate:ID,zoom:JZe,transform:jC,getAngle:H0,getSectorPath:cf,polarToCartesian:ea,getDelegationObject:Zp,getTooltipItems:ED,getMappingValue:DD,getPath:BQ,getPathPoints:XC},bh={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Bn={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},cl=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],cQe=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],fQe=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],dQe=function(r){r===void 0&&(r={});var t=r.backgroundColor,e=t===void 0?"#141414":t,n=r.subColor,i=n===void 0?"rgba(255,255,255,0.05)":n,a=r.paletteQualitative10,o=a===void 0?cl:a,s=r.paletteQualitative20,l=s===void 0?cQe:s,u=r.paletteSemanticRed,c=u===void 0?"#F4664A":u,f=r.paletteSemanticGreen,d=f===void 0?"#30BF78":f,h=r.paletteSemanticYellow,v=h===void 0?"#FAAD14":h,p=r.paletteSequence,g=p===void 0?fQe:p,m=r.fontFamily,y=m===void 0?`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:m,b=r.brandColor,x=b===void 0?o[0]:b;return{backgroundColor:e,brandColor:x,subColor:i,paletteQualitative10:o,paletteQualitative20:l,paletteSemanticRed:c,paletteSemanticGreen:d,paletteSemanticYellow:v,paletteSequence:g,fontFamily:y,axisLineBorderColor:Bn[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:Bn[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:Bn[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:Bn[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:Bn[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:Bn[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:Bn[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:cl[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:Bn[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:Bn[45],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:Bn[45],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:Bn[65],legendPageNavigatorTextFontSize:12,sliderRailFillColor:Bn[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:Bn[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:bh[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:bh[25],annotationArcBorderColor:Bn[15],annotationArcBorder:1,annotationLineBorderColor:Bn[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:Bn[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:Bn[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:Bn[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:Bn[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:Bn[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:bh[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:Bn[65],overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:bh[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:Bn[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:cl[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:bh[100],pointBorderOpacity:1,pointActiveBorderColor:Bn[100],pointSelectedBorder:2,pointSelectedBorderColor:Bn[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:cl[0],hollowPointBorderOpacity:.95,hollowPointFillColor:bh[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:Bn[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:Bn[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:cl[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:cl[0],areaFillOpacity:.25,areaActiveFillColor:cl[0],areaActiveFillOpacity:.5,areaSelectedFillColor:cl[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:cl[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:Bn[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:Bn[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:cl[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:Bn[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:Bn[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:cl[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:bh[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:Bn[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:Bn[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}},hQe=dQe(),ND=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;n.type="path",n.shapeType="line";var i=e.connectNulls,a=i===void 0?!1:i,o=e.showSinglePoint,s=o===void 0?!0:o;return n.connectNulls=a,n.showSinglePoint=s,n}return t.prototype.updateElements=function(e,n){n===void 0&&(n=!1);for(var i=new Map,a=new Map,o=[],s=0,l=0;l<e.length;l++){var u=e[l],c=this.getElementId(u);o.push(c),i.set(c,u),a.set(c,s),s++}this.elements=new Array(s);for(var f=AQ(this.lastElementsMap,o),d=f.added,h=f.updated,v=f.removed,p=0,g=d;p<g.length;p++){var c=g[p],u=i.get(c),m=this.getShapeFactory(),y=this.getShapeInfo(u),l=a.get(c),b=new SQ({shapeFactory:m,container:this.container,offscreenGroup:this.getOffscreenGroup(),elementIndex:l});b.geometry=this,b.animate=this.animateOption,b.draw(y,n),this.elementsMap[c]=b,this.elements[l]=b}for(var x=0,w=h;x<w.length;x++){var c=w[x],u=i.get(c),b=this.lastElementsMap[c],l=a.get(c),y=this.getShapeInfo(u),S=b.getModel();(this.isCoordinateChanged||TQ(S,y))&&(b.animate=this.animateOption,b.update(y)),this.elementsMap[c]=b,this.elements[l]=b}for(var C=0,_=v;C<_.length;C++){var c=_[C],b=this.lastElementsMap[c];b.animate=this.animateOption,b.destroy()}},t.prototype.getPointsAndData=function(e){for(var n=[],i=[],a=0,o=e.length;a<o;a++){var s=e[a];n.push({x:s.x,y:s.y}),i.push(s[Nn])}return{points:n,data:i}},t.prototype.getShapeInfo=function(e){var n=this.getDrawCfg(e[0]),i=this.getPointsAndData(e),a=i.points,o=i.data;return n.mappingData=e,n.data=o,n.isStack=!!this.getAdjust("stack"),n.points=a,n.connectNulls=this.connectNulls,n.showSinglePoint=this.showSinglePoint,n},t}(vf);function vQe(r,t,e,n,i){var a=[];if(r.length){for(var o=[],s=[],l=0,u=r.length;l<u;l++){var c=r[l];o.push(c[1]),s.push(c[0])}s=s.reverse(),G([o,s],function(f,d){var h=[],v=n.parsePoints(f),p=v[0];o.length===1&&s.length===1?h=d===0?[["M",p.x-.5,p.y],["L",p.x+.5,p.y]]:[["L",p.x+.5,p.y],["L",p.x-.5,p.y]]:(t&&v.push({x:p.x,y:p.y}),e?h=VC(v,!1,i):h=Y0(v,!1),d>0&&(h[0][0]="L")),a=a.concat(h)}),a.push(["Z"])}return a}function qC(r,t,e,n,i){for(var a=Gi(r,t,!t,"lineWidth"),o=r.connectNulls,s=r.isInCircle,l=r.points,u=r.showSinglePoint,c=XC(l,o,u),f=[],d=0,h=c.length;d<h;d++){var v=c[d];f=f.concat(vQe(v,s,e,n,i))}return a.path=f,a}function $Q(r){var t=r.start,e=r.end;return[[t.x,e.y],[e.x,t.y]]}hf("area",{defaultShapeType:"area",getDefaultPoints:function(r){var t=r.x,e=r.y0,n=qe(r.y)?r.y:[e,r.y];return n.map(function(i){return{x:t,y:i}})}});En("area","area",{draw:function(r,t){var e=qC(r,!1,!1,this),n=t.addShape({type:"path",attrs:e,name:"area"});return n},getMarker:function(r){var t=r.color;return{symbol:function(e,n,i){return i===void 0&&(i=5.5),[["M",e-i,n-4],["L",e+i,n-4],["L",e+i,n+4],["L",e-i,n+4],["Z"]]},style:{r:5,fill:t}}}});var pQe=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;n.type="area",n.shapeType="area",n.generatePoints=!0,n.startOnZero=!0;var i=e.startOnZero,a=i===void 0?!0:i,o=e.sortable,s=o===void 0?!1:o,l=e.showSinglePoint,u=l===void 0?!1:l;return n.startOnZero=a,n.sortable=s,n.showSinglePoint=u,n}return t.prototype.getPointsAndData=function(e){for(var n=[],i=[],a=0,o=e.length;a<o;a++){var s=e[a];n.push(s.points),i.push(s[Nn])}return{points:n,data:i}},t.prototype.getYMinValue=function(){if(this.startOnZero)return r.prototype.getYMinValue.call(this);var e=this.getYScale();return e.min},t}(ND);hf("edge",{defaultShapeType:"line",getDefaultPoints:function(r){return LD(r)}});En("edge","line",{draw:function(r,t){var e=Gi(r,!0,!1,"lineWidth"),n=Y0(this.parsePoints(r.points),this.coordinate.isPolar);return t.addShape("path",{attrs:A(A({},e),{path:n})})},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});var gQe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="edge",e.shapeType="edge",e.generatePoints=!0,e}return t}(vf),mQe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="heatmap",e.paletteCache={},e}return t.prototype.updateElements=function(e,n){for(var i=0;i<e.length;i++){var a=e[i],o=this.prepareRange(a),s=this.prepareSize(),l=ne(this.styleOption,["cfg","shadowBlur"]);Rt(l)||(l=s/2),this.prepareGreyScaleBlurredCircle(s,l),this.drawWithRange(a,o,s,l)}},t.prototype.color=function(e,n){return this.createAttrOption("color",e,typeof n!="function"?n:""),this},t.prototype.clear=function(){r.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},t.prototype.prepareRange=function(e){var n=this.getAttribute("color"),i=n.getFields()[0],a=1/0,o=-1/0;return e.forEach(function(s){var l=s[Nn][i];l>o&&(o=l),l<a&&(a=l)}),a===o&&(a=o-1),[a,o]},t.prototype.prepareSize=function(){var e=this.getDefaultValue("size");return Rt(e)||(e=this.getDefaultSize()),e},t.prototype.prepareGreyScaleBlurredCircle=function(e,n){var i=this.getGrayScaleBlurredCanvas(),a=e+n,o=i.getContext("2d");i.width=i.height=a*2,o.clearRect(0,0,i.width,i.height),o.shadowOffsetX=o.shadowOffsetY=a*2,o.shadowBlur=n,o.shadowColor="black",o.beginPath(),o.arc(-a,-a,e,0,Math.PI*2,!0),o.closePath(),o.fill()},t.prototype.drawWithRange=function(e,n,i,a){var o=this.coordinate,s=o.start,l=o.end,u=this.coordinate.getWidth(),c=this.coordinate.getHeight(),f=this.getAttribute("color"),d=f.getFields()[0];this.clearShadowCanvasCtx();var h=this.getShadowCanvasCtx();n&&(e=e.filter(function(_){return _[Nn][d]<=n[1]&&_[Nn][d]>=n[0]}));for(var v=this.scales[d],p=0,g=e;p<g.length;p++){var m=g[p],y=this.getDrawCfg(m),b=y.x,x=y.y,w=v.scale(m[Nn][d]);this.drawGrayScaleBlurredCircle(b-s.x,x-l.y,i+a,w,h)}var S=h.getImageData(0,0,u,c);this.clearShadowCanvasCtx(),this.colorize(S),h.putImageData(S,0,0);var C=this.getImageShape();C.attr("x",s.x),C.attr("y",l.y),C.attr("width",u),C.attr("height",c),C.attr("img",h.canvas),C.set("origin",this.getShapeInfo(e))},t.prototype.getDefaultSize=function(){var e=this.getAttribute("position"),n=this.coordinate;return Math.min(n.getWidth()/(e.scales[0].ticks.length*4),n.getHeight()/(e.scales[1].ticks.length*4))},t.prototype.clearShadowCanvasCtx=function(){var e=this.getShadowCanvasCtx();e.clearRect(0,0,e.canvas.width,e.canvas.height)},t.prototype.getShadowCanvasCtx=function(){var e=this.shadowCanvas;return e||(e=document.createElement("canvas"),this.shadowCanvas=e),e.width=this.coordinate.getWidth(),e.height=this.coordinate.getHeight(),e.getContext("2d")},t.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},t.prototype.drawGrayScaleBlurredCircle=function(e,n,i,a,o){var s=this.getGrayScaleBlurredCanvas();o.globalAlpha=a,o.drawImage(s,e-i,n-i)},t.prototype.colorize=function(e){for(var n=this.getAttribute("color"),i=e.data,a=this.paletteCache,o=3;o<i.length;o+=4){var s=i[o];if(Rt(s)){var l=a[s]?a[s]:uf.rgb2arr(n.gradient(s/256));i[o-3]=l[0],i[o-2]=l[1],i[o-1]=l[2],i[o]=s}}},t.prototype.getImageShape=function(){var e=this.imageShape;if(e)return e;var n=this.container;return e=n.addShape({type:"image",attrs:{}}),this.imageShape=e,e},t.prototype.getShapeInfo=function(e){var n=this.getDrawCfg(e[0]),i=e.map(function(a){return a[Nn]});return A(A({},n),{mappingData:e,data:i})},t}(vf);function BD(r){var t=r.x,e=r.y,n=r.y0,i=r.size,a,o;qe(e)?(a=e[0],o=e[1]):(a=n,o=e);var s,l;qe(t)?(s=t[0],l=t[1]):(s=t-i/2,l=t+i/2);var u=[{x:s,y:a},{x:s,y:o}];return u.push({x:l,y:o},{x:l,y:a}),u}function $D(r,t){t===void 0&&(t=!0);var e=[],n=r[0];e.push(["M",n.x,n.y]);for(var i=1,a=r.length;i<a;i++)e.push(["L",r[i].x,r[i].y]);return t&&(e.push(["L",n.x,n.y]),e.push(["z"])),e}function tb(r,t){var e=0,n=0,i=0,a=0;return qe(r)?r.length===1?e=n=i=a=r[0]:r.length===2?(e=i=r[0],n=a=r[1]):r.length===3?(e=r[0],n=a=r[1],i=r[2]):(e=r[0],n=r[1],i=r[2],a=r[3]):e=n=i=a=r,e+n>t&&(e=e?t/(1+n/e):0,n=t-e),i+a>t&&(i=i?t/(1+a/i):0,a=t-i),[e||0,n||0,i||0,a||0]}function zQ(r,t,e){var n=[];if(e.isRect){var i=e.isTransposed?{x:e.start.x,y:t[0].y}:{x:t[0].x,y:e.start.y},a=e.isTransposed?{x:e.end.x,y:t[2].y}:{x:t[3].x,y:e.end.y},o=ne(r,["background","style","radius"]);if(o){var s=e.isTransposed?Math.abs(t[0].y-t[2].y):t[2].x-t[1].x,l=e.isTransposed?e.getWidth():e.getHeight(),u=tb(o,Math.min(s,l)),c=u[0],f=u[1],d=u[2],h=u[3];n.push(["M",i.x,a.y+c]),c!==0&&n.push(["A",c,c,0,0,1,i.x+c,a.y]),n.push(["L",a.x-f,a.y]),f!==0&&n.push(["A",f,f,0,0,1,a.x,a.y+f]),n.push(["L",a.x,i.y-d]),d!==0&&n.push(["A",d,d,0,0,1,a.x-d,i.y]),n.push(["L",i.x+h,i.y]),h!==0&&n.push(["A",h,h,0,0,1,i.x,i.y-h])}else n.push(["M",i.x,i.y]),n.push(["L",a.x,i.y]),n.push(["L",a.x,a.y]),n.push(["L",i.x,a.y]),n.push(["L",i.x,i.y]);n.push(["z"])}if(e.isPolar){var v=e.getCenter(),p=H0(r,e),g=p.startAngle,m=p.endAngle;if(e.type!=="theta"&&!e.isTransposed)n=cf(v.x,v.y,e.getRadius(),g,m);else{var y=function(w){return Math.pow(w,2)},c=Math.sqrt(y(v.x-t[0].x)+y(v.y-t[0].y)),f=Math.sqrt(y(v.x-t[2].x)+y(v.y-t[2].y));n=cf(v.x,v.y,c,e.startAngle,e.endAngle,f)}}return n}function yQe(r,t,e){var n=e.getWidth(),i=e.getHeight(),a=e.type==="rect",o=[],s=(r[2].x-r[1].x)/2,l=e.isTransposed?s*i/n:s*n/i;return t==="round"?(a?(o.push(["M",r[0].x,r[0].y+l]),o.push(["L",r[1].x,r[1].y-l]),o.push(["A",s,s,0,0,1,r[2].x,r[2].y-l]),o.push(["L",r[3].x,r[3].y+l]),o.push(["A",s,s,0,0,1,r[0].x,r[0].y+l])):(o.push(["M",r[0].x,r[0].y]),o.push(["L",r[1].x,r[1].y]),o.push(["A",s,s,0,0,1,r[2].x,r[2].y]),o.push(["L",r[3].x,r[3].y]),o.push(["A",s,s,0,0,1,r[0].x,r[0].y])),o.push(["z"])):o=$D(r),o}function GQ(r,t,e){var n=[];return Je(t)?e?n.push(["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["L",(r[2].x+r[3].x)/2,(r[2].y+r[3].y)/2],["Z"]):n.push(["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["L",r[2].x,r[2].y],["L",r[3].x,r[3].y],["Z"]):n.push(["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["L",t[1].x,t[1].y],["L",t[0].x,t[0].y],["Z"]),n}function bQe(r,t,e){var n,i,a,o,s=r[0],l=r[1],u=r[2],c=r[3],f=[0,0,0,0],d=f[0],h=f[1],v=f[2],p=f[3];s.y<l.y?(l=r[0],s=r[1],c=r[2],u=r[3],n=tb(e,Math.min(c.x-s.x,s.y-l.y)),p=n[0],v=n[1],h=n[2],d=n[3]):(i=tb(e,Math.min(c.x-s.x,s.y-l.y)),d=i[0],h=i[1],v=i[2],p=i[3]),t.isTransposed&&(s=r[0],c=r[1],u=r[2],l=r[3],r[0].x>r[1].x?(c=r[0],s=r[1],l=r[2],u=r[3],a=tb(e,Math.min(c.x-s.x,s.y-l.y)),d=a[0],p=a[1],v=a[2],h=a[3]):(o=tb(e,Math.min(c.x-s.x,s.y-l.y)),h=o[0],v=o[1],p=o[2],d=o[3]));var g=[];return g.push(["M",l.x,l.y+d]),d!==0&&g.push(["A",d,d,0,0,1,l.x+d,l.y]),g.push(["L",u.x-h,u.y]),h!==0&&g.push(["A",h,h,0,0,1,u.x,u.y+h]),g.push(["L",c.x,c.y-v]),v!==0&&g.push(["A",v,v,0,0,1,c.x-v,c.y]),g.push(["L",s.x+p,s.y]),p!==0&&g.push(["A",p,p,0,0,1,s.x,s.y-p]),g.push(["L",l.x,l.y+d]),g.push(["z"]),g}hf("interval",{defaultShapeType:"rect",getDefaultPoints:function(r){return BD(r)}});En("interval","rect",{draw:function(r,t){var e=Gi(r,!1,!0),n=t,i=r==null?void 0:r.background;if(i){n=t.addGroup();var a=FQ(r),o=zQ(r,this.parsePoints(r.points),this.coordinate);n.addShape("path",{attrs:A(A({},a),{path:o}),zIndex:-1,name:MD})}var s;e.radius&&this.coordinate.isRect?s=bQe(this.parsePoints(r.points),this.coordinate,e.radius):s=this.parsePath(yQe(r.points,e.lineCap,this.coordinate));var l=n.addShape("path",{attrs:A(A({},e),{path:s}),name:"interval"});return i?n:l},getMarker:function(r){var t=r.color,e=r.isInPolar;return e?{symbol:"circle",style:{r:4.5,fill:t}}:{symbol:"square",style:{r:4,fill:t}}}});function xQe(r,t){var e=r.length,n=r;rt(n[0])&&(n=r.map(function(s){return t.translate(s)}));for(var i=n[1]-n[0],a=2;a<e;a++){var o=n[a]-n[a-1];i>o&&(i=o)}return i}function wQe(r,t){if(t){var e=Do(r),n=As(e,t);return n.length}return r.length}function zD(r){var t=r.theme,e=r.coordinate,n=r.getXScale(),i=n.values,a=r.beforeMappingData,o=i.length,s=W0(r.coordinate),l=r.intervalPadding,u=r.dodgePadding,c=r.maxColumnWidth||t.maxColumnWidth,f=r.minColumnWidth||t.minColumnWidth,d=r.columnWidthRatio||t.columnWidthRatio,h=r.multiplePieWidthRatio||t.multiplePieWidthRatio,v=r.roseWidthRatio||t.roseWidthRatio;if(n.isLinear&&i.length>1){i.sort();var p=xQe(i,n);o=(n.max-n.min)/p,i.length>o&&(o=i.length)}var g=n.range,m=1/o,y=1;if(e.isPolar?e.isTransposed&&o>1?y=h:y=v:(n.isLinear&&(m*=g[1]-g[0]),y=d),!Je(l)&&l>=0){var b=l/s;m=(1-(o-1)*b)/o}else m*=y;if(r.getAdjust("dodge")){var x=r.getAdjust("dodge"),w=x.dodgeBy,S=wQe(a,w);if(!Je(u)&&u>=0){var C=u/s;m=(m-C*(S-1))/S}else!Je(l)&&l>=0&&(m*=y),m=m/S;m=m>=0?m:0}if(!Je(c)&&c>=0){var _=c/s;m>_&&(m=_)}if(!Je(f)&&f>=0){var T=f/s;m<T&&(m=T)}return m}var SQe=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;n.type="interval",n.shapeType="interval",n.generatePoints=!0;var i=e.background;return n.background=i,n}return t.prototype.createShapePointsCfg=function(e){var n=r.prototype.createShapePointsCfg.call(this,e),i,a=this.getAttribute("size");if(a){i=this.getAttributeValues(a,e)[0];var o=this.coordinate,s=W0(o);i=i/s}else this.defaultSize||(this.defaultSize=zD(this)),i=this.defaultSize;return n.size=i,n},t.prototype.adjustScale=function(){r.prototype.adjustScale.call(this);var e=this.getYScale();if(this.coordinate.type==="theta")e.change({nice:!1,min:0,max:qKe(e)});else{var n=this.scaleDefs,i=e.field,a=e.min,o=e.max,s=e.type;s!=="time"&&(a>0&&!ne(n,[i,"min"])&&e.change({min:0}),o<=0&&!ne(n,[i,"max"])&&e.change({max:0}))}},t.prototype.getDrawCfg=function(e){var n=r.prototype.getDrawCfg.call(this,e);return n.background=this.background,n},t}(vf),CQe=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;n.type="line";var i=e.sortable,a=i===void 0?!1:i;return n.sortable=a,n}return t}(ND),UQ=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],EQe=["cross","tick","plus","hyphen","line"];function GD(r,t,e,n,i){var a=Gi(t,i,!i,"r"),o=r.parsePoints(t.points),s=o[0];if(t.isStack)s=o[1];else if(o.length>1){for(var l=e.addGroup(),u=0,c=o;u<c.length;u++){var f=c[u];l.addShape({type:"marker",attrs:A(A(A({},a),{symbol:yh[n]||n}),f)})}return l}return e.addShape({type:"marker",attrs:A(A(A({},a),{symbol:yh[n]||n}),s)})}hf("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(r){return LD(r)}});G(UQ,function(r){En("point","hollow-"+r,{draw:function(t,e){return GD(this,t,e,r,!0)},getMarker:function(t){var e=t.color;return{symbol:yh[r]||r,style:{r:4.5,stroke:e,fill:null}}}})});var _Qe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="point",e.shapeType="point",e.generatePoints=!0,e}return t.prototype.getDrawCfg=function(e){var n=r.prototype.getDrawCfg.call(this,e);return A(A({},n),{isStack:!!this.getAdjust("stack")})},t}(vf);function TQe(r){for(var t=r[0],e=1,n=[["M",t.x,t.y]];e<r.length;){var i=r[e];(i.x!==r[e-1].x||i.y!==r[e-1].y)&&(n.push(["L",i.x,i.y]),i.x===t.x&&i.y===t.y&&e<r.length-1&&(t=r[e+1],n.push(["Z"]),n.push(["M",t.x,t.y]),e++)),e++}return ri(Yi(n),t)||n.push(["L",t.x,t.y]),n.push(["Z"]),n}hf("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(r){var t=[];return G(r.x,function(e,n){var i=r.y[n];t.push({x:e,y:i})}),t}});En("polygon","polygon",{draw:function(r,t){if(!oo(r.points)){var e=Gi(r,!0,!0),n=this.parsePath(TQe(r.points));return t.addShape("path",{attrs:A(A({},e),{path:n}),name:"polygon"})}},getMarker:function(r){var t=r.color;return{symbol:"square",style:{r:4,fill:t}}}});var AQe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="polygon",e.shapeType="polygon",e.generatePoints=!0,e}return t.prototype.createShapePointsCfg=function(e){var n=r.prototype.createShapePointsCfg.call(this,e),i=n.x,a=n.y,o;if(!(qe(i)&&qe(a))){var s=this.getXScale(),l=this.getYScale(),u=s.values.length,c=l.values.length,f=.5*1/u,d=.5*1/c;s.isCategory&&l.isCategory?(i=[i-f,i-f,i+f,i+f],a=[a-d,a+d,a+d,a-d]):qe(i)?(o=i,i=[o[0],o[0],o[1],o[1]],a=[a-d/2,a+d/2,a+d/2,a-d/2]):qe(a)&&(o=a,a=[o[0],o[1],o[1],o[0]],i=[i-f/2,i-f/2,i+f/2,i+f/2]),n.x=i,n.y=a}return n},t}(vf);hf("schema",{defaultShapeType:""});var MQe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="schema",e.shapeType="schema",e.generatePoints=!0,e}return t.prototype.createShapePointsCfg=function(e){var n=r.prototype.createShapePointsCfg.call(this,e),i,a=this.getAttribute("size");if(a){i=this.getAttributeValues(a,e)[0];var o=this.coordinate,s=W0(o);i=i/s}else this.defaultSize||(this.defaultSize=zD(this)),i=this.defaultSize;return n.size=i,n},t}(vf);function kQe(r){if(!qe(r))return[];var t=ji(r);return Gn(r,function(e){return e/t})}hf("violin",{defaultShapeType:"violin",getDefaultPoints:function(r){var t=r.size/2,e=[],n=kQe(r._size);return G(r.y,function(i,a){var o=n[a]*t,s=a===0,l=a===r.y.length-1;e.push({isMin:s,isMax:l,x:r.x-o,y:i}),e.unshift({isMin:s,isMax:l,x:r.x+o,y:i})}),e}});En("violin","violin",{draw:function(r,t){var e=Gi(r,!0,!0),n=this.parsePath(OQ(r.points));return t.addShape("path",{attrs:A(A({},e),{path:n}),name:"violin"})},getMarker:function(r){var t=r.color;return{symbol:"circle",style:{r:4,fill:t}}}});var IQe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="violin",e.shapeType="violin",e.generatePoints=!0,e}return t.prototype.createShapePointsCfg=function(e){var n=r.prototype.createShapePointsCfg.call(this,e),i,a=this.getAttribute("size");if(a){i=this.getAttributeValues(a,e)[0];var o=this.coordinate,s=W0(o);i=i/s}else this.defaultSize||(this.defaultSize=zD(this)),i=this.defaultSize;return n.size=i,n._size=ne(e[Nn],[this._sizeField]),n},t.prototype.initAttributes=function(){var e=this.attributeOption,n=e.size?e.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=n,delete e.size,r.prototype.initAttributes.call(this)},t}(vf);En("area","line",{draw:function(r,t){var e=qC(r,!0,!1,this),n=t.addShape({type:"path",attrs:e,name:"area"});return n},getMarker:function(r){var t=r.color;return{symbol:function(e,n,i){return i===void 0&&(i=5.5),[["M",e-i,n-4],["L",e+i,n-4],["L",e+i,n+4],["L",e-i,n+4],["Z"]]},style:{r:5,stroke:t,fill:null}}}});En("area","smooth",{draw:function(r,t){var e=this.coordinate,n=qC(r,!1,!0,this,$Q(e)),i=t.addShape({type:"path",attrs:n,name:"area"});return i},getMarker:function(r){var t=r.color;return{symbol:function(e,n,i){return i===void 0&&(i=5.5),[["M",e-i,n-4],["L",e+i,n-4],["L",e+i,n+4],["L",e-i,n+4],["Z"]]},style:{r:5,fill:t}}}});En("area","smooth-line",{draw:function(r,t){var e=this.coordinate,n=qC(r,!0,!0,this,$Q(e)),i=t.addShape({type:"path",attrs:n,name:"area"});return i},getMarker:function(r){var t=r.color;return{symbol:function(e,n,i){return i===void 0&&(i=5.5),[["M",e-i,n-4],["L",e+i,n-4],["L",e+i,n+4],["L",e-i,n+4],["Z"]]},style:{r:5,stroke:t,fill:null}}}});function UD(r,t){return["C",r.x*1/2+t.x*1/2,r.y,r.x*1/2+t.x*1/2,t.y,t.x,t.y]}function VD(r,t){var e=[];e.push({x:t.x,y:t.y}),e.push(r);var n=["Q"];return G(e,function(i){n.push(i.x,i.y)}),n}function PQe(r,t,e){var n=VD(t,e),i=[["M",r.x,r.y]];return i.push(n),i}function DQe(r,t){var e=VD(r[1],t),n=VD(r[3],t),i=[["M",r[0].x,r[0].y]];return i.push(n),i.push(["L",r[3].x,r[3].y]),i.push(["L",r[2].x,r[2].y]),i.push(e),i.push(["L",r[1].x,r[1].y]),i.push(["L",r[0].x,r[0].y]),i.push(["Z"]),i}En("edge","arc",{draw:function(r,t){var e=Gi(r,!0,!1,"lineWidth"),n=r.points,i=n.length>2?"weight":"normal",a;if(r.isInCircle){var o={x:0,y:1};return i==="normal"?a=PQe(n[0],n[1],o):(e.fill=e.stroke,a=DQe(n,o)),a=this.parsePath(a),t.addShape("path",{attrs:A(A({},e),{path:a})})}else{if(i==="normal")return n=this.parsePoints(n),a=BZ((n[1].x+n[0].x)/2,n[0].y,Math.abs(n[1].x-n[0].x)/2,Math.PI,Math.PI*2),t.addShape("path",{attrs:A(A({},e),{path:a})});var s=UD(n[1],n[3]),l=UD(n[2],n[0]);return a=[["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],s,["L",n[3].x,n[3].y],["L",n[2].x,n[2].y],l,["Z"]],a=this.parsePath(a),e.fill=e.stroke,t.addShape("path",{attrs:A(A({},e),{path:a})})}},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});function RQe(r,t){var e=UD(r,t),n=[["M",r.x,r.y]];return n.push(e),n}En("edge","smooth",{draw:function(r,t){var e=Gi(r,!0,!1,"lineWidth"),n=r.points,i=this.parsePath(RQe(n[0],n[1]));return t.addShape("path",{attrs:A(A({},e),{path:i})})},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});var KC=1/3;function OQe(r,t){var e=[];e.push({x:r.x,y:r.y*(1-KC)+t.y*KC}),e.push({x:t.x,y:r.y*(1-KC)+t.y*KC}),e.push(t);var n=[["M",r.x,r.y]];return G(e,function(i){n.push(["L",i.x,i.y])}),n}En("edge","vhv",{draw:function(r,t){var e=Gi(r,!0,!1,"lineWidth"),n=r.points,i=this.parsePath(OQe(n[0],n[1]));return t.addShape("path",{attrs:A(A({},e),{path:i})})},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});En("interval","funnel",{getPoints:function(r){return r.size=r.size*2,BD(r)},draw:function(r,t){var e=Gi(r,!1,!0),n=this.parsePath(GQ(r.points,r.nextPoints,!1)),i=t.addShape("path",{attrs:A(A({},e),{path:n}),name:"interval"});return i},getMarker:function(r){var t=r.color;return{symbol:"square",style:{r:4,fill:t}}}});En("interval","hollow-rect",{draw:function(r,t){var e=Gi(r,!0,!1),n=t,i=r==null?void 0:r.background;if(i){n=t.addGroup();var a=FQ(r),o=zQ(r,this.parsePoints(r.points),this.coordinate);n.addShape("path",{attrs:A(A({},a),{path:o}),zIndex:-1,name:MD})}var s=this.parsePath($D(r.points)),l=n.addShape("path",{attrs:A(A({},e),{path:s}),name:"interval"});return i?n:l},getMarker:function(r){var t=r.color,e=r.isInPolar;return e?{symbol:"circle",style:{r:4.5,stroke:t,fill:null}}:{symbol:"square",style:{r:4,stroke:t,fill:null}}}});function LQe(r){var t=r.x,e=r.y,n=r.y0;return qe(e)?e.map(function(i,a){return{x:qe(t)?t[a]:t,y:i}}):[{x:t,y:n},{x:t,y:e}]}En("interval","line",{getPoints:function(r){return LQe(r)},draw:function(r,t){var e=Gi(r,!0,!1,"lineWidth"),n=Ho(A({},e),["fill"]),i=this.parsePath($D(r.points,!1)),a=t.addShape("path",{attrs:A(A({},n),{path:i}),name:"interval"});return a},getMarker:function(r){var t=r.color;return{symbol:function(e,n,i){return[["M",e,n-i],["L",e,n+i]]},style:{r:5,stroke:t}}}});En("interval","pyramid",{getPoints:function(r){return r.size=r.size*2,BD(r)},draw:function(r,t){var e=Gi(r,!1,!0),n=this.parsePath(GQ(r.points,r.nextPoints,!0)),i=t.addShape("path",{attrs:A(A({},e),{path:n}),name:"interval"});return i},getMarker:function(r){var t=r.color;return{symbol:"square",style:{r:4,fill:t}}}});function FQe(r){var t=r.x,e=r.y,n=r.y0,i=r.size,a,o;qe(e)?(a=e[0],o=e[1]):(a=n,o=e);var s=t+i/2,l=t-i/2;return[{x:t,y:a},{x:t,y:o},{x:l,y:a},{x:s,y:a},{x:l,y:o},{x:s,y:o}]}function NQe(r){return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y]]}En("interval","tick",{getPoints:function(r){return FQe(r)},draw:function(r,t){var e=Gi(r,!0,!1),n=this.parsePath(NQe(r.points)),i=t.addShape("path",{attrs:A(A({},e),{path:n}),name:"interval"});return i},getMarker:function(r){var t=r.color;return{symbol:function(e,n,i){return[["M",e-i/2,n-i],["L",e+i/2,n-i],["M",e,n-i],["L",e,n+i],["M",e-i/2,n+i],["L",e+i/2,n+i]]},style:{r:5,stroke:t}}}});var BQe=function(r,t,e){var n=r.x,i=r.y,a=t.x,o=t.y,s;switch(e){case"hv":s=[{x:a,y:i}];break;case"vh":s=[{x:n,y:o}];break;case"hvh":var l=(a+n)/2;s=[{x:l,y:i},{x:l,y:o}];break;case"vhv":var u=(i+o)/2;s=[{x:n,y:u},{x:a,y:u}];break}return s};function $Qe(r,t){var e=[];return G(r,function(n,i){var a=r[i+1];if(e.push(n),a){var o=BQe(n,a,t);e=e.concat(o)}}),e}function zQe(r){return r.map(function(t,e){return e===0?["M",t.x,t.y]:["L",t.x,t.y]})}function GQe(r,t){var e=XC(r.points,r.connectNulls,r.showSinglePoint),n=[];return G(e,function(i){var a=$Qe(i,t);n=n.concat(zQe(a))}),A(A({},Gi(r,!0,!1,"lineWidth")),{path:n})}G(["hv","vh","hvh","vhv"],function(r){En("line",r,{draw:function(t,e){var n=GQe(t,r),i=e.addShape({type:"path",attrs:n,name:"line"});return i},getMarker:function(t){return NQ(t,r)}})});G(EQe,function(r){En("point",r,{draw:function(t,e){return GD(this,t,e,r,!0)},getMarker:function(t){var e=t.color;return{symbol:yh[r],style:{r:4.5,stroke:e,fill:null}}}})});En("point","image",{draw:function(r,t){var e=Gi(r,!1,!1,"r").r,n=this.parsePoints(r.points),i=n[0];if(r.isStack)i=n[1];else if(n.length>1){for(var a=t.addGroup(),o=0,s=n;o<s.length;o++){var l=s[o];a.addShape("image",{attrs:{x:l.x-e/2,y:l.y-e,width:e,height:e,img:r.shape[1]}})}return a}return t.addShape("image",{attrs:{x:i.x-e/2,y:i.y-e,width:e,height:e,img:r.shape[1]}})},getMarker:function(r){var t=r.color;return{symbol:"circle",style:{r:4.5,fill:t}}}});G(UQ,function(r){En("point",r,{draw:function(t,e){return GD(this,t,e,r,!1)},getMarker:function(t){var e=t.color;return{symbol:yh[r]||r,style:{r:4.5,fill:e}}}})});function VQ(r){var t=qe(r)?r:[r],e=t[0],n=t[t.length-1],i=t.length>1?t[1]:e,a=t.length>3?t[3]:n,o=t.length>2?t[2]:i;return{min:e,max:n,min1:i,max1:a,median:o}}function HQ(r,t,e){var n=e/2,i;if(qe(t)){var a=VQ(t),o=a.min,s=a.max,l=a.median,u=a.min1,c=a.max1,f=r-n,d=r+n;i=[[f,s],[d,s],[r,s],[r,c],[f,u],[f,c],[d,c],[d,u],[r,u],[r,o],[f,o],[d,o],[f,l],[d,l]]}else{t=Je(t)?.5:t;var h=VQ(r),o=h.min,s=h.max,l=h.median,u=h.min1,c=h.max1,v=t-n,p=t+n;i=[[o,v],[o,p],[o,t],[u,t],[u,v],[u,p],[c,p],[c,v],[c,t],[s,t],[s,v],[s,p],[l,v],[l,p]]}return i.map(function(g){return{x:g[0],y:g[1]}})}function UQe(r){return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y],["L",r[6].x,r[6].y],["L",r[7].x,r[7].y],["L",r[4].x,r[4].y],["Z"],["M",r[8].x,r[8].y],["L",r[9].x,r[9].y],["M",r[10].x,r[10].y],["L",r[11].x,r[11].y],["M",r[12].x,r[12].y],["L",r[13].x,r[13].y]]}En("schema","box",{getPoints:function(r){var t=r.x,e=r.y,n=r.size;return HQ(t,e,n)},draw:function(r,t){var e=Gi(r,!0,!1),n=this.parsePath(UQe(r.points)),i=t.addShape("path",{attrs:A(A({},e),{path:n,name:"schema"})});return i},getMarker:function(r){var t=r.color;return{symbol:function(e,n,i){var a=[n-6,n-3,n,n+3,n+6],o=HQ(e,a,i);return[["M",o[0].x+1,o[0].y],["L",o[1].x-1,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["M",o[4].x,o[4].y],["L",o[5].x,o[5].y],["L",o[6].x,o[6].y],["L",o[7].x,o[7].y],["L",o[4].x,o[4].y],["Z"],["M",o[8].x,o[8].y],["L",o[9].x,o[9].y],["M",o[10].x+1,o[10].y],["L",o[11].x-1,o[11].y],["M",o[12].x,o[12].y],["L",o[13].x,o[13].y]]},style:{r:6,lineWidth:1,stroke:t}}}});function VQe(r){var t=qe(r)?r:[r],e=t.sort(function(n,i){return i-n});return GKe(e,4,e[e.length-1])}function WQ(r,t,e){var n=VQe(t);return[{x:r,y:n[0]},{x:r,y:n[1]},{x:r-e/2,y:n[2]},{x:r-e/2,y:n[1]},{x:r+e/2,y:n[1]},{x:r+e/2,y:n[2]},{x:r,y:n[2]},{x:r,y:n[3]}]}function HQe(r){return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["L",r[4].x,r[4].y],["L",r[5].x,r[5].y],["Z"],["M",r[6].x,r[6].y],["L",r[7].x,r[7].y]]}En("schema","candle",{getPoints:function(r){var t=r.x,e=r.y,n=r.size;return WQ(t,e,n)},draw:function(r,t){var e=Gi(r,!0,!0),n=this.parsePath(HQe(r.points)),i=t.addShape("path",{attrs:A(A({},e),{path:n,name:"schema"})});return i},getMarker:function(r){var t=r.color;return{symbol:function(e,n,i){var a=[n+7.5,n+3,n-3,n-7.5],o=WQ(e,a,i);return[["M",o[0].x,o[0].y],["L",o[1].x,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["L",o[4].x,o[4].y],["L",o[5].x,o[5].y],["Z"],["M",o[6].x,o[6].y],["L",o[7].x,o[7].y]]},style:{lineWidth:1,stroke:t,fill:t,r:6}}}});function WQe(r,t){var e=Math.abs(r[0].x-r[2].x),n=Math.abs(r[0].y-r[2].y),i=Math.min(e,n);t&&(i=Yn(t,0,Math.min(e,n))),i=i/2;var a=(r[0].x+r[2].x)/2,o=(r[0].y+r[2].y)/2;return{x:a-i,y:o-i,width:i*2,height:i*2}}En("polygon","square",{draw:function(r,t){if(!oo(r.points)){var e=Gi(r,!0,!0),n=this.parsePoints(r.points);return t.addShape("rect",{attrs:A(A({},e),WQe(n,r.size)),name:"polygon"})}},getMarker:function(r){var t=r.color;return{symbol:"square",style:{r:4,fill:t}}}});En("violin","smooth",{draw:function(r,t){var e=Gi(r,!0,!0),n=this.parsePath(LQ(r.points));return t.addShape("path",{attrs:A(A({},e),{path:n})})},getMarker:function(r){var t=r.color;return{symbol:"circle",style:{stroke:null,r:4,fill:t}}}});En("violin","hollow",{draw:function(r,t){var e=Gi(r,!0,!1),n=this.parsePath(OQ(r.points));return t.addShape("path",{attrs:A(A({},e),{path:n})})},getMarker:function(r){var t=r.color;return{symbol:"circle",style:{r:4,fill:null,stroke:t}}}});En("violin","hollow-smooth",{draw:function(r,t){var e=Gi(r,!0,!1),n=this.parsePath(LQ(r.points));return t.addShape("path",{attrs:A(A({},e),{path:n})})},getMarker:function(r){var t=r.color;return{symbol:"circle",style:{r:4,fill:null,stroke:t}}}});var jQe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getLabelValueDir=function(e){var n="y",i=e.points;return i[0][n]<=i[2][n]?1:-1},t.prototype.getLabelOffsetPoint=function(e,n,i,a){var o,s=r.prototype.getLabelOffsetPoint.call(this,e,n,i),l=this.getCoordinate(),u=l.isTransposed,c=u?"x":"y",f=this.getLabelValueDir(e.mappingData);return s=A(A({},s),(o={},o[c]=s[c]*f,o)),l.isReflect("x")&&(s=A(A({},s),{x:s.x*-1})),l.isReflect("y")&&(s=A(A({},s),{y:s.y*-1})),s},t.prototype.getThemedLabelCfg=function(e){var n=this.geometry,i=this.getDefaultLabelCfg(),a=n.theme;return Mt({},i,a.labels,e.position==="middle"?{offset:0}:{},e)},t.prototype.setLabelPosition=function(e,n,i,a){var o=this.getCoordinate(),s=o.isTransposed,l=n.points,u=o.convert(l[0]),c=o.convert(l[2]),f=this.getLabelValueDir(n),d,h,v,p,g=qe(n.shape)?n.shape[0]:n.shape;if(g==="funnel"||g==="pyramid"){var m=ne(n,"nextPoints"),y=ne(n,"points");if(m){var b=o.convert(y[0]),x=o.convert(y[1]),w=o.convert(m[0]),S=o.convert(m[1]);s?(d=Math.min(w.y,b.y),v=Math.max(w.y,b.y),h=(x.x+S.x)/2,p=(b.x+w.x)/2):(d=Math.min((x.y+S.y)/2,(b.y+w.y)/2),v=Math.max((x.y+S.y)/2,(b.y+w.y)/2),h=S.x,p=b.x)}else d=Math.min(c.y,u.y),v=Math.max(c.y,u.y),h=c.x,p=u.x}else d=Math.min(c.y,u.y),v=Math.max(c.y,u.y),h=c.x,p=u.x;switch(a){case"right":e.x=h,e.y=(d+v)/2,e.textAlign=ne(e,"textAlign",f>0?"left":"right");break;case"left":e.x=p,e.y=(d+v)/2,e.textAlign=ne(e,"textAlign",f>0?"left":"right");break;case"bottom":s&&(e.x=(h+p)/2),e.y=v,e.textAlign=ne(e,"textAlign","center"),e.textBaseline=ne(e,"textBaseline",f>0?"bottom":"top");break;case"middle":s&&(e.x=(h+p)/2),e.y=(d+v)/2,e.textAlign=ne(e,"textAlign","center"),e.textBaseline=ne(e,"textBaseline","middle");break;case"top":s&&(e.x=(h+p)/2),e.y=d,e.textAlign=ne(e,"textAlign","center"),e.textBaseline=ne(e,"textBaseline",f>0?"bottom":"top");break}},t}(YC),ZC=Math.PI/2,jQ=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getLabelOffset=function(e){var n=this.getCoordinate(),i=0;if(Rt(e))i=e;else if(rt(e)&&e.indexOf("%")!==-1){var a=n.getRadius();n.innerRadius>0&&(a=a*(1-n.innerRadius)),i=parseFloat(e)*.01*a}return i},t.prototype.getLabelItems=function(e){var n=r.prototype.getLabelItems.call(this,e),i=this.geometry.getYScale();return Gn(n,function(a){if(a&&i){var o=i.scale(ne(a.data,i.field));return A(A({},a),{percent:o})}return a})},t.prototype.getLabelAlign=function(e){var n=this.getCoordinate(),i;if(e.labelEmit)i=e.angle<=Math.PI/2&&e.angle>=-Math.PI/2?"left":"right";else if(!n.isTransposed)i="center";else{var a=n.getCenter(),o=e.offset;Math.abs(e.x-a.x)<1?i="center":e.angle>Math.PI||e.angle<=0?i=o>0?"left":"right":i=o>0?"right":"left"}return i},t.prototype.getLabelPoint=function(e,n,i){var a=1,o,s=e.content[i];this.isToMiddle(n)?o=this.getMiddlePoint(n.points):(e.content.length===1&&i===0?i=1:i===0&&(a=-1),o=this.getArcPoint(n,i));var l=e.offset*a,u=this.getPointAngle(o),c=e.labelEmit,f=this.getCirclePoint(u,l,o,c);return f.r===0?f.content="":(f.content=s,f.angle=u,f.color=n.color),f.rotate=e.autoRotate?this.getLabelRotate(u,l,c):e.rotate,f.start={x:o.x,y:o.y},f},t.prototype.getArcPoint=function(e,n){return n===void 0&&(n=0),!qe(e.x)&&!qe(e.y)?{x:e.x,y:e.y}:{x:qe(e.x)?e.x[n]:e.x,y:qe(e.y)?e.y[n]:e.y}},t.prototype.getPointAngle=function(e){return Xp(this.getCoordinate(),e)},t.prototype.getCirclePoint=function(e,n,i,a){var o=this.getCoordinate(),s=o.getCenter(),l=BC(o,i);if(l===0)return A(A({},s),{r:l});var u=e;if(o.isTransposed&&l>n&&!a){var c=Math.asin(n/(2*l));u=e+c*2}else l=l+n;return{x:s.x+l*Math.cos(u),y:s.y+l*Math.sin(u),r:l}},t.prototype.getLabelRotate=function(e,n,i){var a=e+ZC;return i&&(a-=ZC),a&&(a>ZC?a=a-Math.PI:a<-ZC&&(a=a+Math.PI)),a},t.prototype.getMiddlePoint=function(e){var n=this.getCoordinate(),i=e.length,a={x:0,y:0};return G(e,function(o){a.x+=o.x,a.y+=o.y}),a.x/=i,a.y/=i,a=n.convert(a),a},t.prototype.isToMiddle=function(e){return e.x.length>2},t}(YC),YQe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.defaultLayout="distribute",e}return t.prototype.getDefaultLabelCfg=function(e,n){var i=r.prototype.getDefaultLabelCfg.call(this,e,n);return Mt({},i,ne(this.geometry.theme,"pieLabels",{}))},t.prototype.getLabelOffset=function(e){return r.prototype.getLabelOffset.call(this,e)||0},t.prototype.getLabelRotate=function(e,n,i){var a;return n<0&&(a=e,a>Math.PI/2&&(a=a-Math.PI),a<-Math.PI/2&&(a=a+Math.PI)),a},t.prototype.getLabelAlign=function(e){var n=this.getCoordinate(),i=n.getCenter(),a;return e.angle<=Math.PI/2&&e.x>=i.x?a="left":a="right",e.offset<=0&&(a==="right"?a="left":a="right"),a},t.prototype.getArcPoint=function(e){return e},t.prototype.getPointAngle=function(e){var n=this.getCoordinate(),i={x:qe(e.x)?e.x[0]:e.x,y:e.y[0]},a={x:qe(e.x)?e.x[1]:e.x,y:e.y[1]},o,s=Xp(n,i);if(e.points&&e.points[0].y===e.points[1].y)o=s;else{var l=Xp(n,a);s>=l&&(l=l+Math.PI*2),o=s+(l-s)/2}return o},t.prototype.getCirclePoint=function(e,n){var i=this.getCoordinate(),a=i.getCenter(),o=i.getRadius()+n;return A(A({},ea(a.x,a.y,o,e)),{angle:e,r:o})},t}(jQ),YQ=4;function XQe(r,t,e,n,i,a){var o=!0,s=n.start,l=n.end,u=Math.min(s.y,l.y),c=Math.abs(s.y-l.y),f,d=0,h=Number.MIN_VALUE,v=t.map(function(w){return w.y>d&&(d=w.y),w.y<h&&(h=w.y),{size:e,targets:[w.y-u]}});for(h-=u,d-u>c&&(c=d-u);o;)for(v.forEach(function(w){var S=(Math.min.apply(h,w.targets)+Math.max.apply(h,w.targets))/2;w.pos=Math.min(Math.max(h,S-w.size/2),c-w.size)}),o=!1,f=v.length;f--;)if(f>0){var p=v[f-1],g=v[f];p.pos+p.size>g.pos&&(p.size+=g.size,p.targets=p.targets.concat(g.targets),p.pos+p.size>c&&(p.pos=c-p.size),v.splice(f,1),o=!0)}f=0,v.forEach(function(w){var S=u+e/2;w.targets.forEach(function(){t[f].y=w.pos+S,S+=e,f++})});for(var m={},y=0,b=r;y<b.length;y++){var x=b[y];m[x.get("id")]=x}t.forEach(function(w){var S=w.r*w.r,C=Math.pow(Math.abs(w.y-i.y),2);if(S<C)w.x=i.x;else{var _=Math.sqrt(S-C);a?w.x=i.x+_:w.x=i.x-_}var T=m[w.id];T.attr("x",w.x),T.attr("y",w.y);var E=Ts(T.getChildren(),function(M){return M.get("type")==="text"});E&&(E.attr("y",w.y),E.attr("x",w.x))})}function qQe(r,t,e,n){if(!(!r.length||!t.length)){var i=r[0]?r[0].offset:0,a=t[0].get("coordinate"),o=a.getRadius(),s=a.getCenter();if(i>0){var l=14,u=o+i,c=u*2+l*2,f={start:a.start,end:a.end},d=[[],[]];r.forEach(function(h){!h||(h.textAlign==="right"?d[0].push(h):d[1].push(h))}),d.forEach(function(h,v){var p=c/l;h.length>p&&(h.sort(function(g,m){return m["..percent"]-g["..percent"]}),h.splice(p,h.length-p)),h.sort(function(g,m){return g.y-m.y}),XQe(t,h,l,f,s,v)})}G(r,function(h){if(h&&h.labelLine){var v=h.offset,p=h.angle,g=ea(s.x,s.y,o,p),m=ea(s.x,s.y,o+v/2,p),y=h.x+ne(h,"offsetX",0),b=h.y+ne(h,"offsetY",0),x={x:y-Math.cos(p)*YQ,y:b-Math.sin(p)*YQ};Kr(h.labelLine)||(h.labelLine={}),h.labelLine.path=["M "+g.x,g.y+" Q"+m.x,m.y+" "+x.x,x.y].join(",")}})}}function XQ(r,t,e){var n=r.filter(function(v){return!v.invisible});n.sort(function(v,p){return v.y-p.y});var i=!0,a=e.minY,o=e.maxY,s=Math.abs(a-o),l,u=0,c=Number.MIN_VALUE,f=n.map(function(v){return v.y>u&&(u=v.y),v.y<c&&(c=v.y),{content:v.content,size:t,targets:[v.y-a],pos:null}});for(c-=a,u-a>s&&(s=u-a);i;)for(f.forEach(function(v){var p=(Math.min.apply(c,v.targets)+Math.max.apply(c,v.targets))/2;v.pos=Math.min(Math.max(c,p-v.size/2),s-v.size),v.pos=Math.max(0,v.pos)}),i=!1,l=f.length;l--;)if(l>0){var d=f[l-1],h=f[l];d.pos+d.size>h.pos&&(d.size+=h.size,d.targets=d.targets.concat(h.targets),d.pos+d.size>s&&(d.pos=s-d.size),f.splice(l,1),i=!0)}l=0,f.forEach(function(v){var p=a+t/2;v.targets.forEach(function(){n[l].y=v.pos+p,p+=t,l++})})}var qQ=4;function KQe(r,t){var e=t.getCenter(),n=t.getRadius();if(r&&r.labelLine){var i=r.angle,a=r.offset,o=ea(e.x,e.y,n,i),s=r.x+ne(r,"offsetX",0)*(Math.cos(i)>0?1:-1),l=r.y+ne(r,"offsetY",0)*(Math.sin(i)>0?1:-1),u={x:s-Math.cos(i)*qQ,y:l-Math.sin(i)*qQ},c=r.labelLine.smooth,f=[],d=u.x-e.x,h=u.y-e.y,v=Math.atan(h/d);if(d<0&&(v+=Math.PI),c===!1){Kr(r.labelLine)||(r.labelLine={});var p=0;(i<0&&i>-Math.PI/2||i>Math.PI*1.5)&&u.y>o.y&&(p=1),i>=0&&i<Math.PI/2&&u.y>o.y&&(p=1),i>=Math.PI/2&&i<Math.PI&&o.y>u.y&&(p=1),(i<-Math.PI/2||i>=Math.PI&&i<Math.PI*1.5)&&o.y>u.y&&(p=1);var g=a/2>4?4:Math.max(a/2-1,0),m=ea(e.x,e.y,n+g,i),y=ea(e.x,e.y,n+a/2,v),b=0;f.push("M "+o.x+" "+o.y),f.push("L "+m.x+" "+m.y),f.push("A "+e.x+" "+e.y+" 0 "+b+" "+p+" "+y.x+" "+y.y),f.push("L "+u.x+" "+u.y)}else{var m=ea(e.x,e.y,n+(a/2>4?4:Math.max(a/2-1,0)),i),x=o.x<e.x?1:-1;f.push("M "+u.x+" "+u.y);var w=(o.y-e.y)/(o.x-e.x),S=(u.y-e.y)/(u.x-e.x);Math.abs(w-S)>Math.pow(Math.E,-16)&&f.push.apply(f,["C",u.x+x*4,u.y,2*m.x-o.x,2*m.y-o.y,o.x,o.y]),f.push("L "+o.x+" "+o.y)}r.labelLine.path=f.join(" ")}}function ZQe(r,t,e,n){var i=va(r,function(S){return!Je(S)}),a=t[0]&&t[0].get("coordinate");if(!!a){for(var o=a.getCenter(),s=a.getRadius(),l={},u=0,c=t;u<c.length;u++){var f=c[u];l[f.get("id")]=f}var d=ne(i[0],"labelHeight",14),h=ne(i[0],"offset",0);if(!(h<=0)){var v="left",p="right",g=ao(i,function(S){return S.x<o.x?v:p}),m=a.start,y=a.end,b=Math.min((s+h+d)*2,a.getHeight()),x=b/2,w={minX:m.x,maxX:y.x,minY:o.y-x,maxY:o.y+x};G(g,function(S,C){var _=Math.floor(b/d);S.length>_&&(S.sort(function(T,E){return E.percent-T.percent}),G(S,function(T,E){E+1>_&&(l[T.id].set("visible",!1),T.invisible=!0)})),XQ(S,d,w)}),G(g,function(S,C){G(S,function(_){var T=C===p,E=l[_.id],M=E.getChildByIndex(0);if(M){var k=s+h,P=_.y-o.y,F=Math.pow(k,2),$=Math.pow(P,2),R=F-$>0?F-$:0,L=Math.sqrt(R),O=Math.abs(Math.cos(_.angle)*k);T?_.x=o.x+Math.max(L,O):_.x=o.x-Math.max(L,O)}M&&(M.attr("y",_.y),M.attr("x",_.x)),KQe(_,a)})})}}}var HD=4,QQe=4,KQ=4;function JQe(r,t,e){var n=t.getCenter(),i=t.getRadius(),a={x:r.x-(e?KQ:-KQ),y:r.y},o=ea(n.x,n.y,i+HD,r.angle),s={x:a.x,y:a.y},l={x:o.x,y:o.y},u=ea(n.x,n.y,i,r.angle),c="";if(a.y!==o.y){var f=e?4:-4;s.y=a.y,r.angle<0&&r.angle>=-Math.PI/2&&(s.x=Math.max(o.x,a.x-f),a.y<o.y?l.y=s.y:(l.y=o.y,l.x=Math.max(l.x,s.x-f))),r.angle>0&&r.angle<Math.PI/2&&(s.x=Math.max(o.x,a.x-f),a.y>o.y?l.y=s.y:(l.y=o.y,l.x=Math.max(l.x,s.x-f))),r.angle>Math.PI/2&&(s.x=Math.min(o.x,a.x-f),a.y>o.y?l.y=s.y:(l.y=o.y,l.x=Math.min(l.x,s.x-f))),r.angle<-Math.PI/2&&(s.x=Math.min(o.x,a.x-f),a.y<o.y?l.y=s.y:(l.y=o.y,l.x=Math.min(l.x,s.x-f)))}c=["M "+a.x+","+a.y,"L "+s.x+","+s.y,"L "+l.x+","+l.y,"L "+o.x+","+o.y,"L "+u.x+","+u.y].join(" "),r.labelLine=Mt({},r.labelLine,{path:c})}function eJe(r,t,e,n){var i=t[0]&&t[0].get("coordinate");if(!!i){for(var a=i.getCenter(),o=i.getRadius(),s={},l=0,u=t;l<u.length;l++){var c=u[l];s[c.get("id")]=c}var f=ne(r[0],"labelHeight",14),d=Math.max(ne(r[0],"offset",0),HD);G(r,function(S){var C=ne(s,[S.id]);if(!!C){var _=S.x>a.x||S.x===a.x&&S.y>a.y,T=Je(S.offsetX)?QQe:S.offsetX,E=ea(a.x,a.y,o+HD,S.angle),M=d+T;S.x=a.x+(_?1:-1)*(o+M),S.y=E.y}});var h=i.start,v=i.end,p="left",g="right",m=ao(r,function(S){return S.x<a.x?p:g}),y=(o+d)*2+f;G(m,function(S){var C=S.length*f;C>y&&(y=Math.min(C,Math.abs(h.y-v.y)))});var b={minX:h.x,maxX:v.x,minY:a.y-y/2,maxY:a.y+y/2};G(m,function(S,C){var _=y/f;S.length>_&&(S.sort(function(T,E){return E.percent-T.percent}),G(S,function(T,E){E>_&&(s[T.id].set("visible",!1),T.invisible=!0)})),XQ(S,f,b)});var x=b.minY,w=b.maxY;G(m,function(S,C){var _=C===g;G(S,function(T){var E=ne(s,T&&[T.id]);if(!!E){if(T.y<x||T.y>w){E.set("visible",!1);return}var M=E.getChildByIndex(0),k=M.getCanvasBBox(),P={x:_?k.x:k.maxX,y:k.y+k.height/2};eb(M,T.x-P.x,T.y-P.y),T.labelLine&&JQe(T,i,_)}})})}}function tJe(r,t,e,n){G(t,function(i){var a=n.minX,o=n.minY,s=n.maxX,l=n.maxY,u=i.getCanvasBBox(),c=u.minX,f=u.minY,d=u.maxX,h=u.maxY,v=u.x,p=u.y,g=u.width,m=u.height,y=v,b=p;(c<a||d<a)&&(y=a),(f<o||h<o)&&(b=o),c>s?y=s-g:d>s&&(y=y-(d-s)),f>l?b=l-m:h>l&&(b=b-(h-l)),(y!==v||b!==p)&&eb(i,y-v,b-p)})}function rJe(r,t,e,n){G(t,function(i,a){var o=i.getCanvasBBox(),s=e[a].getBBox();(o.minX<s.minX||o.minY<s.minY||o.maxX>s.maxX||o.maxY>s.maxY)&&i.remove(!0)})}var nJe=100,ZQ=function(){function r(t){t===void 0&&(t={}),this.bitmap={};var e=t.xGap,n=e===void 0?1:e,i=t.yGap,a=i===void 0?8:i;this.xGap=n,this.yGap=a}return r.prototype.hasGap=function(t){for(var e=!0,n=this.bitmap,i=Math.round(t.minX),a=Math.round(t.maxX),o=Math.round(t.minY),s=Math.round(t.maxY),l=i;l<=a;l+=1){if(!n[l]){n[l]={};continue}if(l===i||l===a){for(var u=o;u<=s;u++)if(n[l][u]){e=!1;break}}else if(n[l][o]||n[l][s]){e=!1;break}}return e},r.prototype.fillGap=function(t){for(var e=this.bitmap,n=Math.round(t.minX),i=Math.round(t.maxX),a=Math.round(t.minY),o=Math.round(t.maxY),s=n;s<=i;s+=1)e[s]||(e[s]={});for(var s=n;s<=i;s+=this.xGap){for(var l=a;l<=o;l+=this.yGap)e[s][l]=!0;e[s][o]=!0}if(this.yGap!==1)for(var s=a;s<=o;s+=1)e[n][s]=!0,e[i][s]=!0;if(this.xGap!==1)for(var s=n;s<=i;s+=1)e[s][a]=!0,e[s][o]=!0},r.prototype.destroy=function(){this.bitmap={}},r}();function iJe(r,t,e){e===void 0&&(e=nJe);var n=-1,i=r.attr(),a=i.x,o=i.y,s=r.getCanvasBBox(),l=Math.sqrt(s.width*s.width+s.height*s.height),u,c=-n,f=0,d=0,h=function(m){var y=m*.1;return[y*Math.cos(y),y*Math.sin(y)]};if(t.hasGap(s))return t.fillGap(s),!0;for(var v=!1,p=0,g={};Math.min(Math.abs(f),Math.abs(d))<l&&p<e;)if(u=h(c+=n),f=~~u[0],d=~~u[1],!(!f&&!d||g[f+"-"+d])&&(r.attr({x:a+f,y:o+d}),f+d<0&&r.attr("textAlign","right"),p++,t.hasGap(r.getCanvasBBox()))){t.fillGap(r.getCanvasBBox()),v=!0,g[f+"-"+d]=!0;break}return v}function aJe(r,t,e,n){var i=r.getCanvasBBox(),a=i.width,o=i.height,s={x:t,y:e,textAlign:"center"};switch(n){case 0:s.y-=o+1,s.x+=1,s.textAlign="left";break;case 1:s.y-=o+1,s.x-=1,s.textAlign="right";break;case 2:s.y+=o+1,s.x-=1,s.textAlign="right";break;case 3:s.y+=o+1,s.x+=1,s.textAlign="left";break;case 5:s.y-=o*2+2;break;case 6:s.y+=o*2+2;break;case 7:s.x+=a+1,s.textAlign="left";break;case 8:s.x-=a+1,s.textAlign="right";break}return r.attr(s),r.getCanvasBBox()}function oJe(r,t,e,n){var i=new ZQ;G(t,function(a){var o=a.find(function(s){return s.get("type")==="text"});iJe(o,i)||a.remove(!0)}),i.destroy()}function sJe(r,t,e,n){var i=new ZQ;G(t,function(a){for(var o=a.find(function(h){return h.get("type")==="text"}),s=o.attr(),l=s.x,u=s.y,c=!1,f=0;f<=8;f++){var d=aJe(o,l,u,f);if(i.hasGap(d)){i.fillGap(d),c=!0;break}}c||a.remove(!0)}),i.destroy()}var lJe=dT;function QQ(r){if(r.length>4)return[];var t=function(i,a){return[a.x-i.x,a.y-i.y]},e=t(r[0],r[1]),n=t(r[1],r[2]);return[e,n]}function QC(r,t,e){t===void 0&&(t=0),e===void 0&&(e={x:0,y:0});var n=r.x,i=r.y;return{x:(n-e.x)*Math.cos(-t)+(i-e.y)*Math.sin(-t)+e.x,y:(e.x-n)*Math.sin(-t)+(i-e.y)*Math.cos(-t)+e.y}}function JQ(r){var t=[{x:r.x,y:r.y},{x:r.x+r.width,y:r.y},{x:r.x+r.width,y:r.y+r.height},{x:r.x,y:r.y+r.height}],e=r.rotation;return e?[QC(t[0],e,t[0]),QC(t[1],e,t[0]),QC(t[2],e,t[0]),QC(t[3],e,t[0])]:t}function eJ(r,t){if(r.length>4)return{min:0,max:0};var e=[];return r.forEach(function(n){e.push(lJe([n.x,n.y],t))}),{min:Math.min.apply(Math,e),max:Math.max.apply(Math,e)}}function uJe(r,t){return r.max>t.min&&r.min<t.max}function cJe(r){return Rt(r)&&!Number.isNaN(r)&&r!==1/0&&r!==-1/0}function tJ(r){return Object.values(r).every(cJe)}function fJe(r,t,e){return e===void 0&&(e=0),!(t.x>r.x+r.width+e||t.x+t.width<r.x-e||t.y>r.y+r.height+e||t.y+t.height<r.y-e)}function dJe(r,t){if(!tJ(r)||!tJ(t))return!1;if(!r.rotation&&!t.rotation)return fJe(r,t);for(var e=JQ(r),n=JQ(t),i=Jn(Jn([],QQ(e),!0),QQ(n),!0),a=0;a<i.length;a++){var o=i[a],s=eJ(e,o),l=eJ(n,o);if(!uJe(s,l))return!1}return!0}function hJe(r,t,e,n){for(var i=0;i<t.length;i++){var a=t[i];if(t[i].get("visible"))for(var o=i+1;o<t.length;o++){var s=t[o];if(a&&s&&a!==s&&s.get("visible")){var l=PD(a,r[i],ne(r[i],"background.padding")),u=PD(s,r[o],ne(r[o],"background.padding"));dJe(l,u)&&t[o].set("visible",!1)}}}}var rJ={"#5B8FF9":!0},vJe=function(r){var t=uf.toRGB(r).toUpperCase();if(rJ[t])return rJ[t];var e=uf.rgb2arr(t),n=e[0],i=e[1],a=e[2],o=(n*299+i*587+a*114)/1e3<128;return o};function pJe(r,t,e){if(e.length!==0){var n=e[0].get("element"),i=n.geometry.theme,a=i.labels||{},o=a.fillColorLight,s=a.fillColorDark;e.forEach(function(l,u){var c=t[u],f=c.find(function(m){return m.get("type")==="text"}),d=Mo.fromObject(l.getBBox()),h=Mo.fromObject(f.getCanvasBBox()),v=!d.contains(h),p=l.attr("fill"),g=vJe(p);v?f.attr(i.overflowLabels.style):g?o&&f.attr("fill",o):s&&f.attr("fill",s)})}}function gJe(r,t,e){var n=r.coordinate,i=pf(t),a=Mo.fromObject(i.getCanvasBBox()),o=Mo.fromObject(e.getBBox());return n.isTransposed?o.height>=a.height:o.width>=a.width}function mJe(r,t,e){var n=!!r.getAdjust("stack");return n||t.every(function(i,a){var o=e[a];return gJe(r,i,o)})}function yJe(r,t,e){var n=r.coordinate,i=Mo.fromObject(e.getBBox()),a=pf(t);n.isTransposed?a.attr({x:i.minX+i.width/2,textAlign:"center"}):a.attr({y:i.minY+i.height/2,textBaseline:"middle"})}function bJe(r,t,e){var n;if(e.length!==0){var i=(n=e[0])===null||n===void 0?void 0:n.get("element"),a=i==null?void 0:i.geometry;if(!(!a||a.type!=="interval")){var o=mJe(a,t,e);o&&e.forEach(function(s,l){var u=t[l];yJe(a,u,s)})}}}function xJe(r){var t=500,e=[],n=Math.max(Math.floor(r.length/t),1);return G(r,function(i,a){a%n==0?e.push(i):i.set("visible",!1)}),e}function wJe(r,t,e){var n;if(e.length!==0){var i=(n=e[0])===null||n===void 0?void 0:n.get("element"),a=i==null?void 0:i.geometry;if(!(!a||a.type!=="interval")){var o=xJe(t),s=a.getXYFields()[0],l=[],u=[],c=ao(o,function(p){return p.get("data")[s]}),f=yc(Gn(o,function(p){return p.get("data")[s]})),d;o.forEach(function(p){p.set("visible",!0)});var h=function(p){p&&(p.length&&u.push(p.pop()),u.push.apply(u,p))};for(aa(f)>0&&(d=f.shift(),h(c[d])),aa(f)>0&&(d=f.pop(),h(c[d])),G(f.reverse(),function(p){h(c[p])});u.length>0;){var v=u.shift();v.get("visible")&&(tQe(v,l)?v.set("visible",!1):l.push(v))}}}}function SJe(r,t){var e=r.getXYFields()[1],n=[],i=t.sort(function(a,o){return a.get("data")[e]-a.get("data")[e]});return i.length>0&&n.push(i.shift()),i.length>0&&n.push(i.pop()),n.push.apply(n,i),n}function nJ(r,t,e){return r.some(function(n){return e(n,t)})}function CJe(r,t,e){e===void 0&&(e=0);var n=Math.max(0,Math.min(r.x+r.width+e,t.x+t.width+e)-Math.max(r.x-e,t.x-e)),i=Math.max(0,Math.min(r.y+r.height+e,t.y+t.height+e)-Math.max(r.y-e,t.y-e));return n*i}function iJ(r,t){return nJ(r,t,function(e,n){var i=pf(e),a=pf(n);return CJe(i.getCanvasBBox(),a.getCanvasBBox(),2)>0})}function EJe(r,t,e,n,i){var a,o;if(e.length!==0){var s=(a=e[0])===null||a===void 0?void 0:a.get("element"),l=s==null?void 0:s.geometry;if(!(!l||l.type!=="point")){var u=l.getXYFields(),c=u[0],f=u[1],d=ao(t,function(p){return p.get("data")[c]}),h=[],v=i&&i.offset||((o=r[0])===null||o===void 0?void 0:o.offset)||12;Gn(Zf(d).reverse(),function(p){for(var g=SJe(l,d[p]);g.length;){var m=g.shift(),y=pf(m);if(nJ(h,m,function(w,S){return w.get("data")[c]===S.get("data")[c]&&w.get("data")[f]===S.get("data")[f]})){y.set("visible",!1);continue}var b=iJ(h,m),x=!1;if(b&&(y.attr("y",y.attr("y")+2*v),x=iJ(h,m)),x){y.set("visible",!1);continue}h.push(m)}})}}}function _Je(r,t){var e=r.getXYFields()[1],n=[],i=t.sort(function(a,o){return a.get("data")[e]-a.get("data")[e]});return i.length>0&&n.push(i.shift()),i.length>0&&n.push(i.pop()),n.push.apply(n,i),n}function aJ(r,t,e){return r.some(function(n){return e(n,t)})}function TJe(r,t,e){e===void 0&&(e=0);var n=Math.max(0,Math.min(r.x+r.width+e,t.x+t.width+e)-Math.max(r.x-e,t.x-e)),i=Math.max(0,Math.min(r.y+r.height+e,t.y+t.height+e)-Math.max(r.y-e,t.y-e));return n*i}function oJ(r,t){return aJ(r,t,function(e,n){var i=pf(e),a=pf(n);return TJe(i.getCanvasBBox(),a.getCanvasBBox(),2)>0})}function AJe(r,t,e,n,i){var a,o;if(e.length!==0){var s=(a=e[0])===null||a===void 0?void 0:a.get("element"),l=s==null?void 0:s.geometry;if(!(!l||["path","line","area"].indexOf(l.type)<0)){var u=l.getXYFields(),c=u[0],f=u[1],d=ao(t,function(p){return p.get("data")[c]}),h=[],v=i&&i.offset||((o=r[0])===null||o===void 0?void 0:o.offset)||12;Gn(Zf(d).reverse(),function(p){for(var g=_Je(l,d[p]);g.length;){var m=g.shift(),y=pf(m);if(aJ(h,m,function(w,S){return w.get("data")[c]===S.get("data")[c]&&w.get("data")[f]===S.get("data")[f]})){y.set("visible",!1);continue}var b=oJ(h,m),x=!1;if(b&&(y.attr("y",y.attr("y")+2*v),x=oJ(h,m)),x){y.set("visible",!1);continue}h.push(m)}})}}}var WD;function MJe(){return WD||(WD=document.createElement("canvas").getContext("2d")),WD}var JC=Jf(function(r,t){t===void 0&&(t={});var e=t.fontSize,n=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant,s=MJe();return s.font=[a,o,i,e+"px",n].join(" "),s.measureText(rt(r)?r:"").width},function(r,t){return t===void 0&&(t={}),Jn([r],bv(t),!0).join("")}),kJe=function(r,t,e){var n=16,i=JC("...",e),a;rt(r)?a=r:a=bc(r);var o=t,s=[],l,u;if(JC(r,e)<=t)return r;for(;l=a.substr(0,n),u=JC(l,e),!(u+i>o&&u>o);)if(s.push(l),o-=u,a=a.substr(n),!a)return s.join("");for(;l=a.substr(0,1),u=JC(l,e),!(u+i>o);)if(s.push(l),o-=u,a=a.substr(1),!a)return s.join("");return s.join("")+"..."};function IJe(r,t,e,n,i){if(!(t.length<=0)){var a=(i==null?void 0:i.direction)||["top","right","bottom","left"],o=(i==null?void 0:i.action)||"translate",s=(i==null?void 0:i.margin)||0,l=t[0].get("coordinate");if(!!l){var u=HKe(l,s),c=u.minX,f=u.minY,d=u.maxX,h=u.maxY;G(t,function(v){var p=v.getCanvasBBox(),g=p.minX,m=p.minY,y=p.maxX,b=p.maxY,x=p.x,w=p.y,S=p.width,C=p.height,_=x,T=w;if(a.indexOf("left")>=0&&(g<c||y<c)&&(_=c),a.indexOf("top")>=0&&(m<f||b<f)&&(T=f),a.indexOf("right")>=0&&(g>d?_=d-S:y>d&&(_=_-(y-d))),a.indexOf("bottom")>=0&&(m>h?T=h-C:b>h&&(T=T-(b-h))),_!==x||T!==w){var E=_-x;if(o==="translate")eb(v,E,T-w);else if(o==="ellipsis"){var M=v.findAll(function(k){return k.get("type")==="text"});M.forEach(function(k){var P=Gx(k.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),F=k.getCanvasBBox(),$=kJe(k.attr("text"),F.width-Math.abs(E),P);k.attr("text",$)})}else v.hide()}})}}}function PJe(r,t,e){var n={fillOpacity:Je(r.attr("fillOpacity"))?1:r.attr("fillOpacity"),strokeOpacity:Je(r.attr("strokeOpacity"))?1:r.attr("strokeOpacity"),opacity:Je(r.attr("opacity"))?1:r.attr("opacity")};r.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),r.animate(n,t)}function DJe(r,t,e){var n={fillOpacity:0,strokeOpacity:0,opacity:0},i=t.easing,a=t.duration,o=t.delay;r.animate(n,a,i,function(){r.remove(!0)},o)}function RJe(r,t,e){var n,i=t[0],a=t[1];return r.applyToMatrix([i,a,1]),e==="x"?(r.setMatrix(Un(r.getMatrix(),[["t",-i,-a],["s",.01,1],["t",i,a]])),n=Un(r.getMatrix(),[["t",-i,-a],["s",100,1],["t",i,a]])):e==="y"?(r.setMatrix(Un(r.getMatrix(),[["t",-i,-a],["s",1,.01],["t",i,a]])),n=Un(r.getMatrix(),[["t",-i,-a],["s",1,100],["t",i,a]])):e==="xy"&&(r.setMatrix(Un(r.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]])),n=Un(r.getMatrix(),[["t",-i,-a],["s",100,100],["t",i,a]])),n}function jD(r,t,e,n,i){var a=e.start,o=e.end,s=e.getWidth(),l=e.getHeight(),u,c;i==="y"?(u=a.x+s/2,c=n.y<a.y?n.y:a.y):i==="x"?(u=n.x>a.x?n.x:a.x,c=a.y+l/2):i==="xy"&&(e.isPolar?(u=e.getCenter().x,c=e.getCenter().y):(u=(a.x+o.x)/2,c=(a.y+o.y)/2));var f=RJe(r,[u,c],i);r.animate({matrix:f},t)}function OJe(r,t,e){var n=e.coordinate,i=e.minYPoint;jD(r,t,n,i,"x")}function LJe(r,t,e){var n=e.coordinate,i=e.minYPoint;jD(r,t,n,i,"y")}function FJe(r,t,e){var n=e.coordinate,i=e.minYPoint;jD(r,t,n,i,"xy")}function NJe(r,t,e){var n=r.getTotalLength();r.attr("lineDash",[n]),r.animate(function(i){return{lineDashOffset:(1-i)*n}},t)}function BJe(r,t,e){var n=e.toAttrs,i=n.x,a=n.y;delete n.x,delete n.y,r.attr(n),r.animate({x:i,y:a},t)}function $Je(r,t,e){var n=r.getBBox(),i=r.get("origin").mappingData,a=i.points,o=a[0].y-a[1].y>0?n.maxX:n.minX,s=(n.minY+n.maxY)/2;r.applyToMatrix([o,s,1]);var l=Un(r.getMatrix(),[["t",-o,-s],["s",.01,1],["t",o,s]]);r.setMatrix(l),r.animate({matrix:Un(r.getMatrix(),[["t",-o,-s],["s",100,1],["t",o,s]])},t)}function zJe(r,t,e){var n=r.getBBox(),i=r.get("origin").mappingData,a=(n.minX+n.maxX)/2,o=i.points,s=o[0].y-o[1].y<=0?n.maxY:n.minY;r.applyToMatrix([a,s,1]);var l=Un(r.getMatrix(),[["t",-a,-s],["s",1,.01],["t",a,s]]);r.setMatrix(l),r.animate({matrix:Un(r.getMatrix(),[["t",-a,-s],["s",1,100],["t",a,s]])},t)}function sJ(r,t){var e,n=V1(r,t),i=n.startAngle,a=n.endAngle;return!pa(i,-Math.PI*.5)&&i<-Math.PI*.5&&(i+=Math.PI*2),!pa(a,-Math.PI*.5)&&a<-Math.PI*.5&&(a+=Math.PI*2),t[5]===0&&(e=[a,i],i=e[0],a=e[1]),pa(i,Math.PI*1.5)&&(i=Math.PI*-.5),pa(a,Math.PI*-.5)&&(a=Math.PI*1.5),{startAngle:i,endAngle:a}}function lJ(r){var t;return r[0]==="M"||r[0]==="L"?t=[r[1],r[2]]:(r[0]==="a"||r[0]==="A"||r[0]==="C")&&(t=[r[r.length-2],r[r.length-1]]),t}function uJ(r){var t,e,n,i=r.filter(function(b){return b[0]==="A"||b[0]==="a"});if(i.length===0)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var a=i[0],o=i.length>1?i[1]:i[0],s=r.indexOf(a),l=r.indexOf(o),u=lJ(r[s-1]),c=lJ(r[l-1]),f=sJ(u,a),d=f.startAngle,h=f.endAngle,v=sJ(c,o),p=v.startAngle,g=v.endAngle;pa(d,p)&&pa(h,g)?(e=d,n=h):(e=Math.min(d,p),n=Math.max(h,g));var m=a[1],y=i[i.length-1][1];return m<y?(t=[y,m],m=t[0],y=t[1]):m===y&&(y=0),{startAngle:e,endAngle:n,radius:m,innerRadius:y}}function GJe(r,t,e){var n=e.toAttrs,i=e.coordinate,a=n.path||[],o=a.map(function(y){return y[0]});if(!(a.length<1)){var s=uJ(a),l=s.startAngle,u=s.endAngle,c=s.radius,f=s.innerRadius,d=uJ(r.attr("path")),h=d.startAngle,v=d.endAngle,p=i.getCenter(),g=l-h,m=u-v;if(g===0&&m===0){r.attr("path",a);return}r.animate(function(y){var b=h+y*g,x=v+y*m;return A(A({},n),{path:ri(o,["M","A","A","Z"])?BZ(p.x,p.y,c,b,x):cf(p.x,p.y,c,b,x,f)})},A(A({},t),{callback:function(){r.attr("path",a)}}))}}function UJe(r,t,e){var n=zZ(e.coordinate,20),i=n.type,a=n.startState,o=n.endState,s=r.setClip({type:i,attrs:a});s.animate(o,A(A({},t),{callback:function(){r&&!r.get("destroyed")&&r.set("clipShape",null),s.remove(!0)}}))}function YD(r,t,e){if(r.isGroup())G(r.getChildren(),function(s){YD(s,t,e)});else{var n=r.getBBox(),i=(n.minX+n.maxX)/2,a=(n.minY+n.maxY)/2;if(r.applyToMatrix([i,a,1]),e==="zoomIn"){var o=Un(r.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]]);r.setMatrix(o),r.animate({matrix:Un(r.getMatrix(),[["t",-i,-a],["s",100,100],["t",i,a]])},t)}else r.animate({matrix:Un(r.getMatrix(),[["t",-i,-a],["s",.01,.01],["t",i,a]])},A(A({},t),{callback:function(){r.remove(!0)}}))}}function VJe(r,t,e){YD(r,t,"zoomIn")}function HJe(r,t,e){YD(r,t,"zoomOut")}function Yu(r){return[Nt.TOP,Nt.BOTTOM].includes(r)?{offsetX:0,offsetY:r===Nt.TOP?-8:8,style:{textAlign:"center",textBaseline:r===Nt.TOP?"bottom":"top"}}:[Nt.LEFT,Nt.RIGHT].includes(r)?{offsetX:r===Nt.LEFT?-8:8,offsetY:0,style:{textAlign:r===Nt.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function XD(r,t,e){return{x:r.x+t*Math.cos(e),y:r.y+t*Math.sin(e)}}var WJe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return Mt({},r.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this)})},t.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.getRegion=function(e,n){var i=1/2,a={x:.5,y:.5},o=Math.PI*2/e,s=-1*Math.PI/2+o*n,l=i/(1+1/Math.sin(o/2)),u=XD(a,i-l,s),c=Math.PI*5/4,f=Math.PI*1/4;return{start:XD(u,l,c),end:XD(u,l,f)}},t.prototype.afterEachView=function(e,n){this.processAxis(e,n)},t.prototype.beforeEachView=function(e,n){},t.prototype.generateFacets=function(e){var n=this,i=this.cfg,a=i.fields,o=i.type,s=a[0];if(!s)throw new Error("No `fields` specified!");var l=this.getFieldValues(e,s),u=l.length,c=[];return l.forEach(function(f,d){var h=[{field:s,value:f,values:l}],v=va(e,n.getFacetDataFilter(h)),p={type:o,data:v,region:n.getRegion(u,d),columnValue:f,columnField:s,columnIndex:d,columnValuesLength:u,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};c.push(p)}),c},t.prototype.getXAxisOption=function(e,n,i,a){return i},t.prototype.getYAxisOption=function(e,n,i,a){return i},t.prototype.renderTitle=function(){var e=this;G(this.facets,function(n){var i=n.columnValue,a=n.view,o=ne(e.cfg.title,"formatter"),s=Mt({position:["50%","0%"],content:o?o(i):i},Yu(Nt.TOP),e.cfg.title);a.annotation().text(s)})},t}(qp),jJe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return Mt({},r.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this)})},t.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.afterEachView=function(e,n){this.processAxis(e,n)},t.prototype.beforeEachView=function(e,n){},t.prototype.generateFacets=function(e){var n=this,i=this.cfg.fields,a=this.cfg.cols,o=i[0];if(!o)throw new Error("No `fields` specified!");var s=this.getFieldValues(e,o),l=s.length;a=a||l;var u=this.getPageCount(l,a),c=[];return s.forEach(function(f,d){var h=n.getRowCol(d,a),v=h.row,p=h.col,g=[{field:o,value:f,values:s}],m=va(e,n.getFacetDataFilter(g)),y={type:n.cfg.type,data:m,region:n.getRegion(u,a,p,v),columnValue:f,rowValue:f,columnField:o,rowField:null,columnIndex:p,rowIndex:v,columnValuesLength:a,rowValuesLength:u,total:l};c.push(y)}),c},t.prototype.getXAxisOption=function(e,n,i,a){return a.rowIndex!==a.rowValuesLength-1&&a.columnValuesLength*a.rowIndex+a.columnIndex+1+a.columnValuesLength<=a.total?A(A({},i),{label:null,title:null}):i},t.prototype.getYAxisOption=function(e,n,i,a){return a.columnIndex!==0?A(A({},i),{title:null,label:null}):i},t.prototype.renderTitle=function(){var e=this;G(this.facets,function(n){var i=n.columnValue,a=n.view,o=ne(e.cfg.title,"formatter"),s=Mt({position:["50%","0%"],content:o?o(i):i},Yu(Nt.TOP),e.cfg.title);a.annotation().text(s)})},t.prototype.getPageCount=function(e,n){return Math.floor((e+n-1)/n)},t.prototype.getRowCol=function(e,n){var i=Math.floor(e/n),a=e%n;return{row:i,col:a}},t}(qp),YJe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return Mt({},r.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:A({},r.prototype.getDefaultTitleCfg.call(this)),rowTitle:A({},r.prototype.getDefaultTitleCfg.call(this))})},t.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.afterEachView=function(e,n){this.processAxis(e,n)},t.prototype.beforeEachView=function(e,n){},t.prototype.generateFacets=function(e){for(var n=this.cfg,i=n.fields,a=n.type,o=i.length,s=o,l=[],u=0;u<s;u++)for(var c=i[u],f=0;f<o;f++){var d=i[f],h={type:a,data:e,region:this.getRegion(o,s,u,f),columnValue:c,rowValue:d,columnField:c,rowField:d,columnIndex:u,rowIndex:f,columnValuesLength:s,rowValuesLength:o};l.push(h)}return l},t.prototype.getXAxisOption=function(e,n,i,a){return a.rowIndex!==a.rowValuesLength-1?A(A({},i),{label:null,title:null}):i},t.prototype.getYAxisOption=function(e,n,i,a){return a.columnIndex!==0?A(A({},i),{title:null,label:null}):i},t.prototype.renderTitle=function(){var e=this;G(this.facets,function(n,i){var a=n.columnIndex,o=n.rowIndex,s=n.columnValuesLength;n.rowValuesLength;var l=n.columnValue,u=n.rowValue,c=n.view;if(o===0){var f=ne(e.cfg.columnTitle,"formatter"),d=Mt({position:["50%","0%"],content:f?f(l):l},Yu(Nt.TOP),e.cfg.columnTitle);c.annotation().text(d)}if(a===s-1){var f=ne(e.cfg.rowTitle,"formatter"),d=Mt({position:["100%","50%"],content:f?f(u):u},Yu(Nt.RIGHT),e.cfg.rowTitle);c.annotation().text(d)}})},t}(qp),XJe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return Mt({},r.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this),transpose:!1})},t.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.beforeEachView=function(e,n){this.cfg.transpose?n.columnIndex%2==0?e.coordinate().transpose().reflect("x"):e.coordinate().transpose():n.rowIndex%2!=0&&e.coordinate().reflect("y")},t.prototype.afterEachView=function(e,n){this.processAxis(e,n)},t.prototype.generateFacets=function(e){var n=this,i=this.cfg.fields[0],a=[],o=1,s=1,l=[""],u=[""],c,f;return this.cfg.transpose?(c=i,l=this.getFieldValues(e,c).slice(0,2),o=l.length):(f=i,u=this.getFieldValues(e,f).slice(0,2),s=u.length),l.forEach(function(d,h){u.forEach(function(v,p){var g=[{field:c,value:d,values:l},{field:f,value:v,values:u}],m=va(e,n.getFacetDataFilter(g)),y={type:n.cfg.type,data:m,region:n.getRegion(s,o,h,p),columnValue:d,rowValue:v,columnField:c,rowField:f,columnIndex:h,rowIndex:p,columnValuesLength:o,rowValuesLength:s};a.push(y)})}),a},t.prototype.getXAxisOption=function(e,n,i,a){return a.columnIndex===1||a.rowIndex===1?A(A({},i),{label:null,title:null}):i},t.prototype.getYAxisOption=function(e,n,i,a){return i},t.prototype.renderTitle=function(){var e=this;G(this.facets,function(n,i){var a=n.columnValue,o=n.rowValue,s=n.view,l=ne(e.cfg.title,"formatter");if(e.cfg.transpose){var u=Mt({position:["50%","0%"],content:l?l(a):a},Yu(Nt.TOP),e.cfg.title);s.annotation().text(u)}else{var u=Mt({position:["100%","50%"],content:l?l(o):o},Yu(Nt.RIGHT),e.cfg.title);s.annotation().text(u)}})},t}(qp),qJe=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.afterEachView=function(e,n){this.processAxis(e,n)},t.prototype.beforeEachView=function(e,n){},t.prototype.getDefaultCfg=function(){return Mt({},r.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:A({},r.prototype.getDefaultTitleCfg.call(this)),rowTitle:A({},r.prototype.getDefaultTitleCfg.call(this))})},t.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.generateFacets=function(e){var n=this,i=this.cfg.fields,a=i[0],o=i[1],s=[],l=1,u=1,c=[""],f=[""];return a&&(c=this.getFieldValues(e,a),l=c.length),o&&(f=this.getFieldValues(e,o),u=f.length),c.forEach(function(d,h){f.forEach(function(v,p){var g=[{field:a,value:d,values:c},{field:o,value:v,values:f}],m=va(e,n.getFacetDataFilter(g)),y={type:n.cfg.type,data:m,region:n.getRegion(u,l,h,p),columnValue:d,rowValue:v,columnField:a,rowField:o,columnIndex:h,rowIndex:p,columnValuesLength:l,rowValuesLength:u};s.push(y)})}),s},t.prototype.renderTitle=function(){var e=this;G(this.facets,function(n,i){var a=n.columnIndex,o=n.rowIndex,s=n.columnValuesLength,l=n.columnValue,u=n.rowValue,c=n.view;if(o===0){var f=ne(e.cfg.columnTitle,"formatter"),d=Mt({position:["50%","0%"],content:f?f(l):l},Yu(Nt.TOP),e.cfg.columnTitle);c.annotation().text(d)}if(a===s-1){var f=ne(e.cfg.rowTitle,"formatter"),d=Mt({position:["100%","50%"],content:f?f(u):u},Yu(Nt.RIGHT),e.cfg.rowTitle);c.annotation().text(d)}})},t.prototype.getXAxisOption=function(e,n,i,a){return a.rowIndex!==a.rowValuesLength-1?A(A({},i),{title:null,label:null}):a.columnIndex!==Math.floor((a.columnValuesLength-1)/2)?A(A({},i),{title:null}):i},t.prototype.getYAxisOption=function(e,n,i,a){return a.columnIndex!==0?A(A({},i),{title:null,label:null}):a.rowIndex!==Math.floor((a.rowValuesLength-1)/2)?A(A({},i),{title:null}):i},t}(qp),KJe=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.afterChartRender=function(){e.facets&&e.cfg.line&&(e.container.clear(),e.drawLines(e.facets))},e}return t.prototype.afterEachView=function(e,n){this.processAxis(e,n)},t.prototype.beforeEachView=function(e,n){},t.prototype.init=function(){r.prototype.init.call(this),this.view.on(Nr.AFTER_RENDER,this.afterChartRender)},t.prototype.getDefaultCfg=function(){return Mt({},r.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this)})},t.prototype.generateFacets=function(e){var n=this.cfg.fields;if(!n.length)throw new Error("Please specify for the fields for rootFacet!");var i=[],a={type:this.cfg.type,data:e,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return i.push(a),a.children=this.getChildFacets(e,1,i),this.setRegion(i),i},t.prototype.setRegion=function(e){var n=this;this.forceColIndex(e),e.forEach(function(i){i.region=n.getRegion(i.rowValuesLength,i.columnValuesLength,i.columnIndex,i.rowIndex)})},t.prototype.getRegion=function(e,n,i,a){var o=1/n,s=1/e,l={x:o*i,y:s*a},u={x:l.x+o,y:l.y+s*2/3};return{start:l,end:u}},t.prototype.forceColIndex=function(e){var n=this,i=[],a=0;e.forEach(function(d){n.isLeaf(d)&&(i.push(d),d.columnIndex=a,a++)}),i.forEach(function(d){d.columnValuesLength=i.length});for(var o=this.cfg.fields.length,s=o-1;s>=0;s--)for(var l=this.getFacetsByLevel(e,s),u=0,c=l;u<c.length;u++){var f=c[u];this.isLeaf(f)||(f.originColIndex=f.columnIndex,f.columnIndex=this.getRegionIndex(f.children),f.columnValuesLength=i.length)}},t.prototype.getFacetsByLevel=function(e,n){var i=[];return e.forEach(function(a){a.rowIndex===n&&i.push(a)}),i},t.prototype.getRegionIndex=function(e){var n=e[0],i=e[e.length-1];return(i.columnIndex-n.columnIndex)/2+n.columnIndex},t.prototype.isLeaf=function(e){return!e.children||!e.children.length},t.prototype.getRows=function(){return this.cfg.fields.length+1},t.prototype.getChildFacets=function(e,n,i){var a=this,o=this.cfg.fields,s=o.length;if(!(s<n)){var l=[],u=o[n-1],c=this.getFieldValues(e,u);return c.forEach(function(f,d){var h=[{field:u,value:f,values:c}],v=e.filter(a.getFacetDataFilter(h));if(v.length){var p={type:a.cfg.type,data:v,region:null,columnValue:f,rowValue:"",columnField:u,rowField:"",columnIndex:d,rowValuesLength:a.getRows(),columnValuesLength:1,rowIndex:n,children:a.getChildFacets(v,n+1,i)};l.push(p),i.push(p)}}),l}},t.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.renderTitle=function(){var e=this;G(this.facets,function(n){var i=n.columnValue,a=n.view,o=ne(e.cfg.title,"formatter"),s=Mt({position:["50%","0%"],content:o?o(i):i},Yu(Nt.TOP),e.cfg.title);a.annotation().text(s)})},t.prototype.drawLines=function(e){var n=this;e.forEach(function(i){if(!n.isLeaf(i)){var a=i.children;n.addFacetLines(i,a)}})},t.prototype.addFacetLines=function(e,n){var i=this,a=e.view,o=a.coordinateBBox,s={x:o.x+o.width/2,y:o.y+o.height};n.forEach(function(l){var u=l.view.coordinateBBox,c={x:u.bl.x+(u.tr.x-u.bl.x)/2,y:u.tr.y},f={x:s.x,y:s.y+(c.y-s.y)/2},d={x:c.x,y:f.y};i.drawLine([s,f,d,c])})},t.prototype.getPath=function(e){var n=[],i=this.cfg.line.smooth;return i?(n.push(["M",e[0].x,e[0].y]),n.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y])):e.forEach(function(a,o){o===0?n.push(["M",a.x,a.y]):n.push(["L",a.x,a.y])}),n},t.prototype.drawLine=function(e){var n=this.getPath(e),i=this.cfg.line.style;this.container.addShape("path",{attrs:$t({path:n},i)})},t.prototype.getXAxisOption=function(e,n,i,a){return a.rowIndex!==a.rowValuesLength-1?A(A({},i),{title:null,label:null}):i},t.prototype.getYAxisOption=function(e,n,i,a){return a.originColIndex!==0&&a.columnIndex!==0?A(A({},i),{title:null,label:null}):i},t}(qp);function cJ(r){var t=Jn([],r,!0);t.sort(function(n,i){return n-i});var e=t.length;return e===0?0:e%2==1?t[(e-1)/2]:(t[e/2]+t[e/2-1])/2}function ZJe(r){var t=Wa(r,function(e,n){return e+=isNaN(n)||!Rt(n)?0:n},0);return r.length===0?0:t/r.length}function e2(r,t){if(!t)return null;var e;switch(r){case"start":return 0;case"center":return .5;case"end":return 1;case"median":{e=t.isCategory?cJ(t.values.map(function(n,i){return i})):cJ(t.values);break}case"mean":{e=t.isCategory?(t.values.length-1)/2:ZJe(t.values);break}case"min":e=t.isCategory?0:t[r];break;case"max":e=t.isCategory?t.values.length-1:t[r];break;default:e=r;break}return t.scale(e)}var t2=["regionFilter","shape"],QJe=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;return n.cache=new Map,n.foregroundContainer=n.view.getLayer(zi.FORE).addGroup(),n.backgroundContainer=n.view.getLayer(zi.BG).addGroup(),n.option=[],n}return Object.defineProperty(t.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.layout=function(){this.update()},t.prototype.render=function(){},t.prototype.update=function(){var e=this;this.onAfterRender(function(){var i=new Map;G(e.option,function(a){if(Al(t2,a.type)){var o=e.updateOrCreate(a);o&&i.set(e.getCacheKey(a),o)}}),e.cache=e.syncCache(i)});var n=new Map;G(this.option,function(i){if(!Al(t2,i.type)){var a=e.updateOrCreate(i);a&&n.set(e.getCacheKey(i),a)}}),this.cache=this.syncCache(n)},t.prototype.clear=function(e){e===void 0&&(e=!1),r.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),e&&(this.option=[])},t.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},t.prototype.getComponents=function(){var e=[];return this.cache.forEach(function(n){e.push(n)}),e},t.prototype.clearComponents=function(){this.getComponents().forEach(function(e){e.component.destroy()}),this.cache.clear()},t.prototype.onAfterRender=function(e){this.view.getOptions().animate?this.view.geometries.forEach(function(n){n.animateOption&&n.once(Gp.AFTER_DRAW_ANIMATE,function(){e()})}):this.view.getRootView().once(Nr.AFTER_RENDER,function(){e()})},t.prototype.createAnnotation=function(e){var n=e.type,i=Nqe[rs(n)];if(i){var a=this.getAnnotationTheme(n),o=this.getAnnotationCfg(n,e,a),s=new i(o);return{component:s,layer:this.isTop(o)?zi.FORE:zi.BG,direction:Nt.NONE,type:Ea.ANNOTATION,extra:e}}},t.prototype.annotation=function(e){this.option.push(e)},t.prototype.arc=function(e){return this.annotation(A({type:"arc"},e)),this},t.prototype.image=function(e){return this.annotation(A({type:"image"},e)),this},t.prototype.line=function(e){return this.annotation(A({type:"line"},e)),this},t.prototype.region=function(e){return this.annotation(A({type:"region"},e)),this},t.prototype.text=function(e){return this.annotation(A({type:"text"},e)),this},t.prototype.dataMarker=function(e){return this.annotation(A({type:"dataMarker"},e)),this},t.prototype.dataRegion=function(e){this.annotation(A({type:"dataRegion"},e))},t.prototype.regionFilter=function(e){this.annotation(A({type:"regionFilter"},e))},t.prototype.shape=function(e){this.annotation(A({type:"shape"},e))},t.prototype.html=function(e){this.annotation(A({type:"html"},e))},t.prototype.parsePosition=function(e){var n=this.view.getXScale(),i=this.view.getScalesByDim("y"),a=Vt(e)?e.call(null,n,i):e,o=0,s=0;if(qe(a)){var l=a[0],u=a[1];if(rt(l)&&l.indexOf("%")!==-1&&!isNaN(l.slice(0,-1)))return this.parsePercentPosition(a);o=e2(l,n),s=e2(u,Object.values(i)[0])}else if(!Je(a))for(var c=0,f=Zf(a);c<f.length;c++){var d=f[c],h=a[d];d===n.field&&(o=e2(h,n)),i[d]&&(s=e2(h,i[d]))}return this.view.getCoordinate().convert({x:o,y:s})},t.prototype.getRegionPoints=function(e,n){var i=this,a=this.view.getXScale(),o=this.view.getScalesByDim("y"),s=Object.values(o)[0],l=a.field,u=this.view.getData(),c=qe(e)?e[0]:e[l],f=qe(n)?n[0]:n[l],d=[],h;return G(u,function(v,p){if(v[l]===c&&(h=p),p>=h){var g=i.parsePosition([v[l],v[s.field]]);g&&d.push(g)}if(v[l]===f)return!1}),d},t.prototype.parsePercentPosition=function(e){var n=parseFloat(e[0])/100,i=parseFloat(e[1])/100,a=this.view.getCoordinate(),o=a.start,s=a.end,l={x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)},u=a.getWidth()*n+l.x,c=a.getHeight()*i+l.y;return{x:u,y:c}},t.prototype.getCoordinateBBox=function(){var e=this.view.getCoordinate(),n=e.start,i=e.end,a=e.getWidth(),o=e.getHeight(),s={x:Math.min(n.x,i.x),y:Math.min(n.y,i.y)};return{x:s.x,y:s.y,minX:s.x,minY:s.y,maxX:s.x+a,maxY:s.y+o,width:a,height:o}},t.prototype.getAnnotationCfg=function(e,n,i){var a=this,o=this.view.getCoordinate(),s=this.view.getCanvas(),l={};if(Je(n))return null;if(e==="arc"){var u=n,c=u.start,f=u.end,d=Lr(u,["start","end"]),h=this.parsePosition(c),v=this.parsePosition(f),p=Xp(o,h),g=Xp(o,v);p>g&&(g=Math.PI*2+g),l=A(A({},d),{center:o.getCenter(),radius:BC(o,h),startAngle:p,endAngle:g})}else if(e==="image"){var m=n,c=m.start,f=m.end,d=Lr(m,["start","end"]);l=A(A({},d),{start:this.parsePosition(c),end:this.parsePosition(f),src:n.src})}else if(e==="line"){var y=n,c=y.start,f=y.end,d=Lr(y,["start","end"]);l=A(A({},d),{start:this.parsePosition(c),end:this.parsePosition(f),text:ne(n,"text",null)})}else if(e==="region"){var b=n,c=b.start,f=b.end,d=Lr(b,["start","end"]);l=A(A({},d),{start:this.parsePosition(c),end:this.parsePosition(f)})}else if(e==="text"){var x=this.view.getData(),w=n,S=w.position,C=w.content,d=Lr(w,["position","content"]),_=C;Vt(C)&&(_=C(x)),l=A(A(A({},this.parsePosition(S)),d),{content:_})}else if(e==="dataMarker"){var T=n,S=T.position,E=T.point,M=T.line,k=T.text,P=T.autoAdjust,F=T.direction,d=Lr(T,["position","point","line","text","autoAdjust","direction"]);l=A(A(A({},d),this.parsePosition(S)),{coordinateBBox:this.getCoordinateBBox(),point:E,line:M,text:k,autoAdjust:P,direction:F})}else if(e==="dataRegion"){var $=n,c=$.start,f=$.end,R=$.region,k=$.text,L=$.lineLength,d=Lr($,["start","end","region","text","lineLength"]);l=A(A({},d),{points:this.getRegionPoints(c,f),region:R,text:k,lineLength:L})}else if(e==="regionFilter"){var O=n,c=O.start,f=O.end,B=O.apply,U=O.color,d=Lr(O,["start","end","apply","color"]),W=this.view.geometries,X=[],ae=function(H){!H||(H.isGroup()?H.getChildren().forEach(function(he){return ae(he)}):X.push(H))};G(W,function(H){B?Al(B,H.type)&&G(H.elements,function(he){ae(he.shape)}):G(H.elements,function(he){ae(he.shape)})}),l=A(A({},d),{color:U,shapes:X,start:this.parsePosition(c),end:this.parsePosition(f)})}else if(e==="shape"){var Z=n,Y=Z.render,fe=Lr(Z,["render"]),le=function(ke){if(Vt(n.render))return Y(ke,a.view,{parsePosition:a.parsePosition.bind(a)})};l=A(A({},fe),{render:le})}else if(e==="html"){var ue=n,Ee=ue.html,S=ue.position,fe=Lr(ue,["html","position"]),De=function(z){return Vt(Ee)?Ee(z,a.view):Ee};l=A(A(A({},fe),this.parsePosition(S)),{parent:s.get("el").parentNode,html:De})}var je=Mt({},i,A(A({},l),{top:n.top,style:n.style,offsetX:n.offsetX,offsetY:n.offsetY}));return e!=="html"&&(je.container=this.getComponentContainer(je)),je.animate=this.view.getOptions().animate&&je.animate&&ne(n,"animate",je.animate),je.animateOption=Mt({},eg,je.animateOption,n.animateOption),je},t.prototype.isTop=function(e){return ne(e,"top",!0)},t.prototype.getComponentContainer=function(e){return this.isTop(e)?this.foregroundContainer:this.backgroundContainer},t.prototype.getAnnotationTheme=function(e){return ne(this.view.getTheme(),["components","annotation",e],{})},t.prototype.updateOrCreate=function(e){var n=this.cache.get(this.getCacheKey(e));if(n){var i=e.type,a=this.getAnnotationTheme(i),o=this.getAnnotationCfg(i,e,a);Ho(o,["container"]),n.component.update(o),Al(t2,e.type)&&n.component.render()}else n=this.createAnnotation(e),n&&(n.component.init(),Al(t2,e.type)&&n.component.render());return n},t.prototype.syncCache=function(e){var n=this,i=new Map(this.cache);return e.forEach(function(a,o){i.set(o,a)}),i.forEach(function(a,o){Ts(n.option,function(s){return o===n.getCacheKey(s)})||(a.component.destroy(),i.delete(o))}),i},t.prototype.getCacheKey=function(e){return e},t}(Jp);function fJ(r,t){var e=Mt({},ne(r,["components","axis","common"]),ne(r,["components","axis",t]));return ne(e,["grid"],{})}function r2(r,t,e,n){var i=[],a=t.getTicks();return r.isPolar&&a.push({value:1,text:"",tickValue:""}),a.reduce(function(o,s,l){var u=s.value;if(n)i.push({points:[r.convert(e==="y"?{x:0,y:u}:{x:u,y:0}),r.convert(e==="y"?{x:1,y:u}:{x:u,y:1})]});else if(l){var c=o.value,f=(c+u)/2;i.push({points:[r.convert(e==="y"?{x:0,y:f}:{x:f,y:0}),r.convert(e==="y"?{x:1,y:f}:{x:f,y:1})]})}return s},a[0]),i}function qD(r,t,e,n,i){var a=t.values.length,o=[],s=e.getTicks();return s.reduce(function(l,u){var c=l?l.value:u.value,f=u.value,d=(c+f)/2;return i==="x"?o.push({points:[r.convert({x:n?f:d,y:0}),r.convert({x:n?f:d,y:1})]}):o.push({points:Gn(Array(a+1),function(h,v){return r.convert({x:v/a,y:n?f:d})})}),u},s[0]),o}function dJ(r,t){var e=ne(t,"grid");if(e===null)return!1;var n=ne(r,"grid");return!(e===void 0&&n===null)}var gf=["container"],hJ=A(A({},eg),{appear:null}),JJe=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;return n.cache=new Map,n.gridContainer=n.view.getLayer(zi.BG).addGroup(),n.gridForeContainer=n.view.getLayer(zi.FORE).addGroup(),n.axisContainer=n.view.getLayer(zi.BG).addGroup(),n.axisForeContainer=n.view.getLayer(zi.FORE).addGroup(),n}return Object.defineProperty(t.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.render=function(){this.update()},t.prototype.layout=function(){var e=this,n=this.view.getCoordinate();G(this.getComponents(),function(i){var a=i.component,o=i.direction,s=i.type,l=i.extra,u=l.dim,c=l.scale,f=l.alignTick,d;if(s===Ea.AXIS)n.isPolar?u==="x"?d=n.isTransposed?$C(n,o):gD(n):u==="y"&&(d=n.isTransposed?gD(n):$C(n,o)):d=$C(n,o);else if(s===Ea.GRID)if(n.isPolar){var h=void 0;n.isTransposed?h=u==="x"?qD(n,e.view.getYScales()[0],c,f,u):r2(n,c,u,f):h=u==="x"?r2(n,c,u,f):qD(n,e.view.getXScale(),c,f,u),d={items:h,center:e.view.getCoordinate().getCenter()}}else d={items:r2(n,c,u,f)};a.update(d)})},t.prototype.update=function(){this.option=this.view.getOptions().axes;var e=new Map;this.updateXAxes(e),this.updateYAxes(e);var n=new Map;this.cache.forEach(function(i,a){e.has(a)?n.set(a,i):i.component.destroy()}),this.cache=n},t.prototype.clear=function(){r.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},t.prototype.getComponents=function(){var e=[];return this.cache.forEach(function(n){e.push(n)}),e},t.prototype.updateXAxes=function(e){var n=this.view.getXScale();if(!(!n||n.isIdentity)){var i=GC(this.option,n.field);if(i!==!1){var a=WZ(i,Nt.BOTTOM),o=zi.BG,s="x",l=this.view.getCoordinate(),u=this.getId("axis",n.field),c=this.getId("grid",n.field);if(l.isRect){var f=this.cache.get(u);if(f){var d=this.getLineAxisCfg(n,i,a);Ho(d,gf),f.component.update(d),e.set(u,f)}else f=this.createLineAxis(n,i,o,a,s),this.cache.set(u,f),e.set(u,f);var h=this.cache.get(c);if(h){var d=this.getLineGridCfg(n,i,a,s);Ho(d,gf),h.component.update(d),e.set(c,h)}else h=this.createLineGrid(n,i,o,a,s),h&&(this.cache.set(c,h),e.set(c,h))}else if(l.isPolar){var f=this.cache.get(u);if(f){var d=l.isTransposed?this.getLineAxisCfg(n,i,Nt.RADIUS):this.getCircleAxisCfg(n,i,a);Ho(d,gf),f.component.update(d),e.set(u,f)}else{if(l.isTransposed){if(xc(i))return;f=this.createLineAxis(n,i,o,Nt.RADIUS,s)}else f=this.createCircleAxis(n,i,o,a,s);this.cache.set(u,f),e.set(u,f)}var h=this.cache.get(c);if(h){var d=l.isTransposed?this.getCircleGridCfg(n,i,Nt.RADIUS,s):this.getLineGridCfg(n,i,Nt.CIRCLE,s);Ho(d,gf),h.component.update(d),e.set(c,h)}else{if(l.isTransposed){if(xc(i))return;h=this.createCircleGrid(n,i,o,Nt.RADIUS,s)}else h=this.createLineGrid(n,i,o,Nt.CIRCLE,s);h&&(this.cache.set(c,h),e.set(c,h))}}}}},t.prototype.updateYAxes=function(e){var n=this,i=this.view.getYScales();G(i,function(a,o){if(!(!a||a.isIdentity)){var s=a.field,l=GC(n.option,s);if(l!==!1){var u=zi.BG,c="y",f=n.getId("axis",s),d=n.getId("grid",s),h=n.view.getCoordinate();if(h.isRect){var v=WZ(l,o===0?Nt.LEFT:Nt.RIGHT),p=n.cache.get(f);if(p){var g=n.getLineAxisCfg(a,l,v);Ho(g,gf),p.component.update(g),e.set(f,p)}else p=n.createLineAxis(a,l,u,v,c),n.cache.set(f,p),e.set(f,p);var m=n.cache.get(d);if(m){var g=n.getLineGridCfg(a,l,v,c);Ho(g,gf),m.component.update(g),e.set(d,m)}else m=n.createLineGrid(a,l,u,v,c),m&&(n.cache.set(d,m),e.set(d,m))}else if(h.isPolar){var p=n.cache.get(f);if(p){var g=h.isTransposed?n.getCircleAxisCfg(a,l,Nt.CIRCLE):n.getLineAxisCfg(a,l,Nt.RADIUS);Ho(g,gf),p.component.update(g),e.set(f,p)}else{if(h.isTransposed){if(xc(l))return;p=n.createCircleAxis(a,l,u,Nt.CIRCLE,c)}else p=n.createLineAxis(a,l,u,Nt.RADIUS,c);n.cache.set(f,p),e.set(f,p)}var m=n.cache.get(d);if(m){var g=h.isTransposed?n.getLineGridCfg(a,l,Nt.CIRCLE,c):n.getCircleGridCfg(a,l,Nt.RADIUS,c);Ho(g,gf),m.component.update(g),e.set(d,m)}else{if(h.isTransposed){if(xc(l))return;m=n.createLineGrid(a,l,u,Nt.CIRCLE,c)}else m=n.createCircleGrid(a,l,u,Nt.RADIUS,c);m&&(n.cache.set(d,m),e.set(d,m))}}}}})},t.prototype.createLineAxis=function(e,n,i,a,o){var s={component:new OKe(this.getLineAxisCfg(e,n,a)),layer:i,direction:a===Nt.RADIUS?Nt.NONE:a,type:Ea.AXIS,extra:{dim:o,scale:e}};return s.component.set("field",e.field),s.component.init(),s},t.prototype.createLineGrid=function(e,n,i,a,o){var s=this.getLineGridCfg(e,n,a,o);if(s){var l={component:new FKe(s),layer:i,direction:Nt.NONE,type:Ea.GRID,extra:{dim:o,scale:e,alignTick:ne(s,"alignTick",!0)}};return l.component.init(),l}},t.prototype.createCircleAxis=function(e,n,i,a,o){var s={component:new LKe(this.getCircleAxisCfg(e,n,a)),layer:i,direction:a,type:Ea.AXIS,extra:{dim:o,scale:e}};return s.component.set("field",e.field),s.component.init(),s},t.prototype.createCircleGrid=function(e,n,i,a,o){var s=this.getCircleGridCfg(e,n,a,o);if(s){var l={component:new NKe(s),layer:i,direction:Nt.NONE,type:Ea.GRID,extra:{dim:o,scale:e,alignTick:ne(s,"alignTick",!0)}};return l.component.init(),l}},t.prototype.getLineAxisCfg=function(e,n,i){var a=ne(n,["top"])?this.axisForeContainer:this.axisContainer,o=this.view.getCoordinate(),s=$C(o,i),l=jZ(e,n),u=zC(this.view.getTheme(),i),c=ne(n,["title"])?Mt({title:{style:{text:l}}},{title:HZ(this.view.getTheme(),i,n.title)},n):n,f=Mt(A(A({container:a},s),{ticks:e.getTicks().map(function(b){return{id:""+b.tickValue,name:b.text,value:b.value}}),verticalFactor:o.isPolar?VZ(s,o.getCenter())*-1:VZ(s,o.getCenter()),theme:u}),u,c),d=this.getAnimateCfg(f),h=d.animate,v=d.animateOption;f.animateOption=v,f.animate=h;var p=UZ(s),g=ne(f,"verticalLimitLength",p?1/3:1/2);if(g<=1){var m=this.view.getCanvas().get("width"),y=this.view.getCanvas().get("height");f.verticalLimitLength=g*(p?m:y)}return f},t.prototype.getLineGridCfg=function(e,n,i,a){if(!!dJ(zC(this.view.getTheme(),i),n)){var o=fJ(this.view.getTheme(),i),s=Mt({container:ne(n,["top"])?this.gridForeContainer:this.gridContainer},o,ne(n,"grid"),this.getAnimateCfg(n));return s.items=r2(this.view.getCoordinate(),e,a,ne(s,"alignTick",!0)),s}},t.prototype.getCircleAxisCfg=function(e,n,i){var a=ne(n,["top"])?this.axisForeContainer:this.axisContainer,o=this.view.getCoordinate(),s=e.getTicks().map(function(p){return{id:""+p.tickValue,name:p.text,value:p.value}});!e.isCategory&&Math.abs(o.endAngle-o.startAngle)===Math.PI*2&&s.pop();var l=jZ(e,n),u=zC(this.view.getTheme(),Nt.CIRCLE),c=ne(n,["title"])?Mt({title:{style:{text:l}}},{title:HZ(this.view.getTheme(),i,n.title)},n):n,f=Mt(A(A({container:a},gD(this.view.getCoordinate())),{ticks:s,verticalFactor:1,theme:u}),u,c),d=this.getAnimateCfg(f),h=d.animate,v=d.animateOption;return f.animate=h,f.animateOption=v,f},t.prototype.getCircleGridCfg=function(e,n,i,a){if(!!dJ(zC(this.view.getTheme(),i),n)){var o=fJ(this.view.getTheme(),Nt.RADIUS),s=Mt({container:ne(n,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},o,ne(n,"grid"),this.getAnimateCfg(n)),l=ne(s,"alignTick",!0),u=a==="x"?this.view.getYScales()[0]:this.view.getXScale();return s.items=qD(this.view.getCoordinate(),u,e,l,a),s}},t.prototype.getId=function(e,n){var i=this.view.getCoordinate();return e+"-"+n+"-"+i.type},t.prototype.getAnimateCfg=function(e){return{animate:this.view.getOptions().animate&&ne(e,"animate"),animateOption:e&&e.animateOption?Mt({},hJ,e.animateOption):hJ}},t}(Jp);function mf(r,t,e){return e===Nt.TOP?[r.minX+r.width/2-t.width/2,r.minY]:e===Nt.BOTTOM?[r.minX+r.width/2-t.width/2,r.maxY-t.height]:e===Nt.LEFT?[r.minX,r.minY+r.height/2-t.height/2]:e===Nt.RIGHT?[r.maxX-t.width,r.minY+r.height/2-t.height/2]:e===Nt.TOP_LEFT||e===Nt.LEFT_TOP?[r.tl.x,r.tl.y]:e===Nt.TOP_RIGHT||e===Nt.RIGHT_TOP?[r.tr.x-t.width,r.tr.y]:e===Nt.BOTTOM_LEFT||e===Nt.LEFT_BOTTOM?[r.bl.x,r.bl.y-t.height]:e===Nt.BOTTOM_RIGHT||e===Nt.RIGHT_BOTTOM?[r.br.x-t.width,r.br.y-t.height]:[0,0]}function vJ(r,t){return yu(r)?r===!1?!1:{}:ne(r,[t],r)}function n2(r){return ne(r,"position",Nt.BOTTOM)}var eet=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;return n.container=n.view.getLayer(zi.FORE).addGroup(),n}return Object.defineProperty(t.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.render=function(){this.update()},t.prototype.layout=function(){var e=this;this.layoutBBox=this.view.viewBBox,G(this.components,function(n){var i=n.component,a=n.direction,o=RD(a),s=i.get("maxWidthRatio"),l=i.get("maxHeightRatio"),u=e.getCategoryLegendSizeCfg(o,s,l),c=i.get("maxWidth"),f=i.get("maxHeight");i.update({maxWidth:Math.min(u.maxWidth,c||0),maxHeight:Math.min(u.maxHeight,f||0)});var d=i.get("padding"),h=i.getLayoutBBox(),v=new Mo(h.x,h.y,h.width,h.height).expand(d),p=mf(e.view.viewBBox,v,a),g=p[0],m=p[1],y=mf(e.layoutBBox,v,a),b=y[0],x=y[1],w=0,S=0;a.startsWith("top")||a.startsWith("bottom")?(w=g,S=x):(w=b,S=m),i.setLocation({x:w+d[3],y:S+d[0]}),e.layoutBBox=e.layoutBBox.cut(v,a)})},t.prototype.update=function(){var e=this;this.option=this.view.getOptions().legends;var n={},i=function(d,h,v){var p=e.getId(v.field),g=e.getComponentById(p);if(g){var m=void 0,y=vJ(e.option,v.field);y!==!1&&(ne(y,"custom")?m=e.getCategoryCfg(d,h,v,y,!0):v.isLinear?m=e.getContinuousCfg(d,h,v,y):v.isCategory&&(m=e.getCategoryCfg(d,h,v,y))),m&&(Ho(m,["container"]),g.direction=n2(y),g.component.update(m),n[p]=!0)}else{var b=e.createFieldLegend(d,h,v);b&&(b.component.init(),e.components.push(b),n[p]=!0)}};if(ne(this.option,"custom")){var a="global-custom",o=this.getComponentById(a);if(o){var s=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);Ho(s,["container"]),o.component.update(s),n[a]=!0}else{var l=this.createCustomLegend(void 0,void 0,void 0,this.option);if(l){l.init();var u=zi.FORE,c=n2(this.option);this.components.push({id:a,component:l,layer:u,direction:c,type:Ea.LEGEND,extra:void 0}),n[a]=!0}}}else this.loopLegends(i);var f=[];G(this.getComponents(),function(d){n[d.id]?f.push(d):d.component.destroy()}),this.components=f},t.prototype.clear=function(){r.prototype.clear.call(this),this.container.clear()},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.container.remove(!0)},t.prototype.getGeometries=function(e){var n=this,i=e.geometries;return G(e.views,function(a){i=i.concat(n.getGeometries(a))}),i},t.prototype.loopLegends=function(e){var n=this.view.getRootView()===this.view;if(!!n){var i=this.getGeometries(this.view),a={};G(i,function(o){var s=o.getGroupAttributes();G(s,function(l){var u=l.getScale(l.type);!u||u.type==="identity"||a[u.field]||(e(o,l,u),a[u.field]=!0)})})}},t.prototype.createFieldLegend=function(e,n,i){var a,o=vJ(this.option,i.field),s=zi.FORE,l=n2(o);if(o!==!1&&(ne(o,"custom")?a=this.createCustomLegend(e,n,i,o):i.isLinear?a=this.createContinuousLegend(e,n,i,o):i.isCategory&&(a=this.createCategoryLegend(e,n,i,o))),a)return a.set("field",i.field),{id:this.getId(i.field),component:a,layer:s,direction:l,type:Ea.LEGEND,extra:{scale:i}}},t.prototype.createCustomLegend=function(e,n,i,a){var o=this.getCategoryCfg(e,n,i,a,!0);return new OZ(o)},t.prototype.createContinuousLegend=function(e,n,i,a){var o=this.getContinuousCfg(e,n,i,Ho(a,["value"]));return new BKe(o)},t.prototype.createCategoryLegend=function(e,n,i,a){var o=this.getCategoryCfg(e,n,i,a);return new OZ(o)},t.prototype.getContinuousCfg=function(e,n,i,a){var o=i.getTicks(),s=Ts(o,function(p){return p.value===0}),l=Ts(o,function(p){return p.value===1}),u=o.map(function(p){var g=p.value,m=p.tickValue,y=n.mapping(i.invert(g)).join("");return{value:m,attrValue:y,color:y,scaleValue:g}});s||u.push({value:i.min,attrValue:n.mapping(i.invert(0)).join(""),color:n.mapping(i.invert(0)).join(""),scaleValue:0}),l||u.push({value:i.max,attrValue:n.mapping(i.invert(1)).join(""),color:n.mapping(i.invert(1)).join(""),scaleValue:1}),u.sort(function(p,g){return p.value-g.value});var c={min:xo(u).value,max:Yi(u).value,colors:[],rail:{type:n.type},track:{}};n.type==="size"&&(c.track={style:{fill:n.type==="size"?this.view.getTheme().defaultColor:void 0}}),n.type==="color"&&(c.colors=u.map(function(p){return p.attrValue}));var f=this.container,d=n2(a),h=RD(d),v=ne(a,"title");return v&&(v=Mt({text:j0(i)},v)),c.container=f,c.layout=h,c.title=v,c.animateOption=eg,this.mergeLegendCfg(c,a,"continuous")},t.prototype.getCategoryCfg=function(e,n,i,a,o){var s=this.container,l=ne(a,"position",Nt.BOTTOM),u=DQ(this.view.getTheme(),l),c=ne(u,["marker"]),f=ne(a,"marker"),d=RD(l),h=ne(u,["pageNavigator"]),v=ne(a,"pageNavigator"),p=o?oQe(c,f,a.items):PQ(this.view,e,n,c,f),g=ne(a,"title");g&&(g=Mt({text:i?j0(i):""},g));var m=ne(a,"maxWidthRatio"),y=ne(a,"maxHeightRatio"),b=this.getCategoryLegendSizeCfg(d,m,y);b.container=s,b.layout=d,b.items=p,b.title=g,b.animateOption=eg,b.pageNavigator=Mt({},h,v);var x=this.mergeLegendCfg(b,a,l);x.reversed&&x.items.reverse();var w=ne(x,"maxItemWidth");return w&&w<=1&&(x.maxItemWidth=this.view.viewBBox.width*w),x},t.prototype.mergeLegendCfg=function(e,n,i){var a=i.split("-")[0],o=DQ(this.view.getTheme(),a);return Mt({},o,e,n)},t.prototype.getId=function(e){return this.name+"-"+e},t.prototype.getComponentById=function(e){return Ts(this.components,function(n){return n.id===e})},t.prototype.getCategoryLegendSizeCfg=function(e,n,i){n===void 0&&(n=TK),i===void 0&&(i=TK);var a=this.view.viewBBox,o=a.width,s=a.height;return e==="vertical"?{maxWidth:o*n,maxHeight:s}:{maxWidth:o,maxHeight:s*i}},t}(Jp),tet=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;return n.onChangeFn=ns,n.resetMeasure=function(){n.clear()},n.onValueChange=function(i){var a=i[0],o=i[1];n.start=a,n.end=o,n.changeViewData(a,o)},n.container=n.view.getLayer(zi.FORE).addGroup(),n.onChangeFn=xv(n.onValueChange,20,{leading:!0}),n.width=0,n.view.on(Nr.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(Nr.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return Object.defineProperty(t.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){r.prototype.destroy.call(this),this.view.off(Nr.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(Nr.BEFORE_CHANGE_SIZE,this.resetMeasure)},t.prototype.init=function(){},t.prototype.render=function(){this.option=this.view.getOptions().slider;var e=this.getSliderCfg(),n=e.start,i=e.end;Je(this.start)&&(this.start=n,this.end=i);var a=this.view.getOptions().data;this.option&&!oo(a)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},t.prototype.layout=function(){var e=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout(function(){e.view.destroyed||e.changeViewData(e.start,e.end)},0)),this.slider){var n=this.view.coordinateBBox.width,i=this.slider.component.get("padding"),a=i[0];i[1],i[2];var o=i[3],s=this.slider.component.getLayoutBBox(),l=new Mo(s.x,s.y,Math.min(s.width,n),s.height).expand(i),u=this.getMinMaxText(this.start,this.end),c=u.minText,f=u.maxText,d=mf(this.view.viewBBox,l,Nt.BOTTOM);d[0];var h=d[1],v=mf(this.view.coordinateBBox,l,Nt.BOTTOM),p=v[0];v[1],this.slider.component.update(A(A({},this.getSliderCfg()),{x:p+o,y:h+a,width:this.width,start:this.start,end:this.end,minText:c,maxText:f})),this.view.viewBBox=this.view.viewBBox.cut(l,Nt.BOTTOM)}},t.prototype.update=function(){this.render()},t.prototype.createSlider=function(){var e=this.getSliderCfg(),n=new PKe(A({container:this.container},e));return n.init(),{component:n,layer:zi.FORE,direction:Nt.BOTTOM,type:Ea.SLIDER}},t.prototype.updateSlider=function(){var e=this.getSliderCfg();if(this.width){var n=this.getMinMaxText(this.start,this.end),i=n.minText,a=n.maxText;e=A(A({},e),{width:this.width,start:this.start,end:this.end,minText:i,maxText:a})}return this.slider.component.update(e),this.slider},t.prototype.measureSlider=function(){var e=this.getSliderCfg().width;this.width=e},t.prototype.getSliderCfg=function(){var e={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if(Kr(this.option)){var n=A({data:this.getData()},ne(this.option,"trendCfg",{}));e=Mt({},e,this.getThemeOptions(),this.option),e=A(A({},e),{trendCfg:n})}return e.start=Yn(Math.min(Je(e.start)?0:e.start,Je(e.end)?1:e.end),0,1),e.end=Yn(Math.max(Je(e.start)?0:e.start,Je(e.end)?1:e.end),0,1),e},t.prototype.getData=function(){var e=this.view.getOptions().data,n=this.view.getYScales()[0],i=this.view.getGroupScales();if(i.length){var a=i[0],o=a.field,s=a.ticks;return e.reduce(function(l,u){return u[o]===s[0]&&l.push(u[n.field]),l},[])}return e.map(function(l){return l[n.field]||0})},t.prototype.getThemeOptions=function(){var e=this.view.getTheme();return ne(e,["components","slider","common"],{})},t.prototype.getMinMaxText=function(e,n){var i=this.view.getOptions().data,a=this.view.getXScale(),o=As(i,a.field),s=o,l=aa(i);if(!a||!l)return{};var u=aa(s),c=Math.floor(e*(u-1)),f=Math.floor(n*(u-1)),d=ne(s,[c]),h=ne(s,[f]),v=this.getSliderCfg().formatter;return v&&(d=v(d,i[c],c),h=v(h,i[f],f)),{minText:d,maxText:h}},t.prototype.changeViewData=function(e,n){var i=this.view.getOptions().data,a=this.view.getXScale(),o=aa(i);if(!(!a||!o)){var s=As(i,a.field),l=s,u=aa(l),c=Math.floor(e*(u-1)),f=Math.floor(n*(u-1));this.view.filter(a.field,function(d,h){var v=l.indexOf(d);return v>-1?Yp(v,c,f):!0}),this.view.render(!0)}},t.prototype.getComponents=function(){return this.slider?[this.slider]:[]},t.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},t}(Jp),i2=0,pJ=8,ret=32,net=20,iet=function(r){Te(t,r);function t(e){var n=r.call(this,e)||this;return n.onChangeFn=ns,n.resetMeasure=function(){n.clear()},n.onValueChange=function(i){var a=i.ratio,o=n.getValidScrollbarCfg().animate;n.ratio=Yn(a,0,1);var s=n.view.getOptions().animate;o||n.view.animate(!1),n.changeViewData(n.getScrollRange(),!0),n.view.animate(s)},n.container=n.view.getLayer(zi.FORE).addGroup(),n.onChangeFn=xv(n.onValueChange,20,{leading:!0}),n.trackLen=0,n.thumbLen=0,n.ratio=0,n.view.on(Nr.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(Nr.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return Object.defineProperty(t.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){r.prototype.destroy.call(this),this.view.off(Nr.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(Nr.BEFORE_CHANGE_SIZE,this.resetMeasure)},t.prototype.init=function(){},t.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},t.prototype.layout=function(){var e=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout(function(){e.view.destroyed||e.changeViewData(e.getScrollRange(),!0)})),this.scrollbar){var n=this.view.coordinateBBox.width,i=this.scrollbar.component.get("padding"),a=this.scrollbar.component.getLayoutBBox(),o=new Mo(a.x,a.y,Math.min(a.width,n),a.height).expand(i),s=this.getScrollbarComponentCfg(),l=void 0,u=void 0;if(s.isHorizontal){var c=mf(this.view.viewBBox,o,Nt.BOTTOM);c[0];var f=c[1],d=mf(this.view.coordinateBBox,o,Nt.BOTTOM),h=d[0];d[1],l=h,u=f}else{var v=mf(this.view.viewBBox,o,Nt.RIGHT);v[0];var f=v[1],p=mf(this.view.viewBBox,o,Nt.RIGHT),h=p[0];p[1],l=h,u=f}l+=i[3],u+=i[0],this.trackLen?this.scrollbar.component.update(A(A({},s),{x:l,y:u,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update(A(A({},s),{x:l,y:u})),this.view.viewBBox=this.view.viewBBox.cut(o,s.isHorizontal?Nt.BOTTOM:Nt.RIGHT)}},t.prototype.update=function(){this.render()},t.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},t.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},t.prototype.setValue=function(e){this.onValueChange({ratio:e})},t.prototype.getValue=function(){return this.ratio},t.prototype.getThemeOptions=function(){var e=this.view.getTheme();return ne(e,["components","scrollbar","common"],{})},t.prototype.getScrollbarTheme=function(e){var n=ne(this.view.getTheme(),["components","scrollbar"]),i=e||{},a=i.thumbHighlightColor,o=Lr(i,["thumbHighlightColor"]);return{default:Mt({},ne(n,["default","style"],{}),o),hover:Mt({},ne(n,["hover","style"],{}),{thumbColor:a})}},t.prototype.measureScrollbar=function(){var e=this.view.getXScale(),n=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var i=this.getScrollbarComponentCfg(),a=i.trackLen,o=i.thumbLen;this.trackLen=a,this.thumbLen=o,this.xScaleCfg={field:e.field,values:e.values||[]},this.yScalesCfg=n},t.prototype.getScrollRange=function(){var e=Math.floor((this.cnt-this.step)*Yn(this.ratio,0,1)),n=Math.min(e+this.step-1,this.cnt-1);return[e,n]},t.prototype.changeViewData=function(e,n){var i=this,a=e[0],o=e[1],s=this.getValidScrollbarCfg().type,l=s!=="vertical",u=As(this.data,this.xScaleCfg.field),c=l?u:u.reverse();this.yScalesCfg.forEach(function(f){i.view.scale(f.field,{formatter:f.formatter,type:f.type,min:f.min,max:f.max})}),this.view.filter(this.xScaleCfg.field,function(f){var d=c.indexOf(f);return d>-1?Yp(d,a,o):!0}),this.view.render(!0)},t.prototype.createScrollbar=function(){var e=this.getValidScrollbarCfg().type,n=e!=="vertical",i=new RKe(A(A({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return i.init(),{component:i,layer:zi.FORE,direction:n?Nt.BOTTOM:Nt.RIGHT,type:Ea.SCROLLBAR}},t.prototype.updateScrollbar=function(){var e=this.getScrollbarComponentCfg(),n=this.trackLen?A(A({},e),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):A({},e);return this.scrollbar.component.update(n),this.scrollbar},t.prototype.getStep=function(){if(this.step)return this.step;var e=this.view.coordinateBBox,n=this.getValidScrollbarCfg(),i=n.type,a=n.categorySize,o=i!=="vertical";return Math.floor((o?e.width:e.height)/a)},t.prototype.getCnt=function(){if(this.cnt)return this.cnt;var e=this.view.getXScale(),n=this.getScrollbarData(),i=As(n,e.field);return aa(i)},t.prototype.getScrollbarComponentCfg=function(){var e=this.view,n=e.coordinateBBox,i=e.viewBBox,a=this.getValidScrollbarCfg(),o=a.type,s=a.padding,l=a.width,u=a.height,c=a.style,f=o!=="vertical",d=s[0],h=s[1],v=s[2],p=s[3],g=f?{x:n.minX+p,y:i.maxY-u-v}:{x:i.maxX-l-h,y:n.minY+d},m=this.getStep(),y=this.getCnt(),b=f?n.width-p-h:n.height-d-v,x=Math.max(b*Yn(m/y,0,1),net);return A(A({},this.getThemeOptions()),{x:g.x,y:g.y,size:f?u:l,isHorizontal:f,trackLen:b,thumbLen:x,thumbOffset:0,theme:this.getScrollbarTheme(c)})},t.prototype.getValidScrollbarCfg=function(){var e={type:"horizontal",categorySize:ret,width:pJ,height:pJ,padding:[0,0,0,0],animate:!0,style:{}};return Kr(this.option)&&(e=A(A({},e),this.option)),(!Kr(this.option)||!this.option.padding)&&(e.padding=e.type==="horizontal"?[i2,0,i2,0]:[0,i2,0,i2]),e},t.prototype.getScrollbarData=function(){var e=this.view.getCoordinate(),n=this.getValidScrollbarCfg(),i=this.view.getOptions().data||[];return e.isReflect("y")&&n.type==="vertical"&&(i=Jn([],i,!0).reverse()),i},t}(Jp),aet={fill:"#CCD6EC",opacity:.3};function oet(r,t,e){var n=DZe(r,t,e);if(n.length){n=Do(n);for(var i=0,a=n;i<a.length;i++)for(var o=a[i],s=0,l=o;s<l.length;s++){var u=l[s],c=u.mappingData,f=c.x,d=c.y;u.x=qe(f)?f[f.length-1]:f,u.y=qe(d)?d[d.length-1]:d}var h=e.shared;if(h===!1&&n.length>1){for(var v=n[0],p=Math.abs(t.y-v[0].y),g=0,m=n;g<m.length;g++){var y=m[g],b=Math.abs(t.y-y[0].y);b<=p&&(v=y,p=b)}n=[v]}return yc(Do(n))}return[]}var set=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.show=function(e){var n=this.context.view,i=this.context.event,a=n.getController("tooltip").getTooltipCfg(),o=oet(n,{x:i.x,y:i.y},a);if(!ri(o,this.items)&&(this.items=o,o.length)){var s=n.getXScale().field,l=o[0].data[s],u=[],c=n.geometries;if(G(c,function(O){if(O.type==="interval"||O.type==="schema"){var B=O.getElementsBy(function(U){var W=U.getData();return W[s]===l});u=u.concat(B)}}),u.length){var f=n.getCoordinate(),d=u[0].shape.getCanvasBBox(),h=u[0].shape.getCanvasBBox(),v=d;G(u,function(O){var B=O.shape.getCanvasBBox();f.isTransposed?(B.minY<d.minY&&(d=B),B.maxY>h.maxY&&(h=B)):(B.minX<d.minX&&(d=B),B.maxX>h.maxX&&(h=B)),v.x=Math.min(B.minX,v.minX),v.y=Math.min(B.minY,v.minY),v.width=Math.max(B.maxX,v.maxX)-v.x,v.height=Math.max(B.maxY,v.maxY)-v.y});var p=n.backgroundGroup,g=n.coordinateBBox,m=void 0;if(f.isRect){var y=n.getXScale(),b=e||{},x=b.appendRatio,w=b.appendWidth;Je(w)&&(x=Je(x)?y.isLinear?0:.25:x,w=f.isTransposed?x*h.height:x*d.width);var S=void 0,C=void 0,_=void 0,T=void 0;f.isTransposed?(S=g.minX,C=Math.min(h.minY,d.minY)-w,_=g.width,T=v.height+w*2):(S=Math.min(d.minX,h.minX)-w,C=g.minY,_=v.width+w*2,T=g.height),m=[["M",S,C],["L",S+_,C],["L",S+_,C+T],["L",S,C+T],["Z"]]}else{var E=xo(u),M=Yi(u),k=H0(E.getModel(),f).startAngle,P=H0(M.getModel(),f).endAngle,F=f.getCenter(),$=f.getRadius(),R=f.innerRadius*$;m=cf(F.x,F.y,$,k,P,R)}if(this.regionPath)this.regionPath.attr("path",m),this.regionPath.show();else{var L=ne(e,"style",aet);this.regionPath=p.addShape({type:"path",name:"active-region",capture:!1,attrs:A(A({},L),{path:m})})}}}},t.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},t.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),r.prototype.destroy.call(this)},t}(ui),gJ=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.timeStamp=0,e}return t.prototype.show=function(){var e=this.context,n=e.event,i=e.view,a=i.isTooltipLocked();if(!a){var o=this.timeStamp,s=+new Date,l=ne(e.view.getOptions(),"tooltip.showDelay",16);if(s-o>l){var u=this.location,c={x:n.x,y:n.y};(!u||!ri(u,c))&&this.showTooltip(i,c),this.timeStamp=s,this.location=c}}},t.prototype.hide=function(){var e=this.context.view,n=e.getController("tooltip"),i=this.context.event,a=i.clientX,o=i.clientY;n.isCursorEntered({x:a,y:o})||e.isTooltipLocked()||(this.hideTooltip(e),this.location=null)},t.prototype.showTooltip=function(e,n){e.showTooltip(n)},t.prototype.hideTooltip=function(e){e.hideTooltip()},t}(ui),uet=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.showTooltip=function(e,n){var i=nu(e);G(i,function(a){var o=SD(e,a,n);a.showTooltip(o)})},t.prototype.hideTooltip=function(e){var n=nu(e);G(n,function(i){i.hideTooltip()})},t}(gJ),cet=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.timeStamp=0,e}return t.prototype.destroy=function(){r.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},t.prototype.show=function(){var e=this.context,n=e.event,i=this.timeStamp,a=+new Date;if(a-i>16){var o=this.location,s={x:n.x,y:n.y};(!o||!ri(o,s))&&this.showTooltip(s),this.timeStamp=a,this.location=s}},t.prototype.hide=function(){this.hideTooltip(),this.location=null},t.prototype.showTooltip=function(e){var n=this.context,i=n.event,a=i.target;if(a&&a.get("tip")){this.tooltip||this.renderTooltip();var o=a.get("tip");this.tooltip.update(A({title:o},e)),this.tooltip.show()}},t.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},t.prototype.renderTooltip=function(){var e,n=this.context.view,i=n.canvas,a={start:{x:0,y:0},end:{x:i.get("width"),y:i.get("height")}},o=n.getTheme(),s=ne(o,["components","tooltip","domStyles"],{}),l=new LZ({parent:i.get("el").parentNode,region:a,visible:!1,crosshairs:null,domStyles:A({},Mt({},s,(e={},e[Wp]={"max-width":"50%"},e[jp]={"word-break":"break-all"},e)))});l.init(),l.setCapture(!1),this.tooltip=l},t}(ui),KD=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="",e}return t.prototype.hasState=function(e){return e.hasState(this.stateName)},t.prototype.setElementState=function(e,n){e.setState(this.stateName,n)},t.prototype.setState=function(){this.setStateEnable(!0)},t.prototype.clear=function(){var e=this.context.view;this.clearViewState(e)},t.prototype.clearViewState=function(e){var n=this,i=eQ(e,this.stateName);G(i,function(a){n.setElementState(a,!1)})},t}(ui);function mJ(r){return ne(r.get("delegateObject"),"item")}var ZD=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.ignoreListItemStates=["unchecked"],e}return t.prototype.isItemIgnore=function(e,n){var i=this.ignoreListItemStates,a=i.filter(function(o){return n.hasState(e,o)});return!!a.length},t.prototype.setStateByComponent=function(e,n,i){var a=this.context.view,o=e.get("field"),s=Ga(a);this.setElementsStateByItem(s,o,n,i)},t.prototype.setStateByElement=function(e,n){this.setElementState(e,n)},t.prototype.isMathItem=function(e,n,i){var a=this.context.view,o=Qp(a,n),s=ul(e,n);return!Je(s)&&i.name===o.getText(s)},t.prototype.setElementsStateByItem=function(e,n,i,a){var o=this;G(e,function(s){o.isMathItem(s,n,i)&&s.setState(o.stateName,a)})},t.prototype.setStateEnable=function(e){var n=df(this.context);if(n)ZZ(this.context)&&this.setStateByElement(n,e);else{var i=Zp(this.context);if(X0(i)){var a=i.item,o=i.component;if(a&&o&&!this.isItemIgnore(a,o)){var s=this.context.event.gEvent;if(s&&s.fromShape&&s.toShape&&mJ(s.fromShape)===mJ(s.toShape))return;this.setStateByComponent(o,a,e)}}}},t.prototype.toggle=function(){var e=df(this.context);if(e){var n=e.hasState(this.stateName);this.setElementState(e,!n)}},t.prototype.reset=function(){this.setStateEnable(!1)},t}(KD),fet=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="active",e}return t.prototype.active=function(){this.setState()},t}(ZD),det=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.cache={},e}return t.prototype.getColorScale=function(e,n){var i=n.geometry.getAttribute("color");if(!i)return null;var a=e.getScaleByField(i.getFields()[0]);return a},t.prototype.getLinkPath=function(e,n){var i=this.context.view,a=i.getCoordinate().isTransposed,o=e.shape.getCanvasBBox(),s=n.shape.getCanvasBBox(),l=a?[["M",o.minX,o.minY],["L",s.minX,s.maxY],["L",s.maxX,s.maxY],["L",o.maxX,o.minY],["Z"]]:[["M",o.maxX,o.minY],["L",s.minX,s.minY],["L",s.minX,s.maxY],["L",o.maxX,o.maxY],["Z"]];return l},t.prototype.addLinkShape=function(e,n,i,a){var o={opacity:.4,fill:n.shape.attr("fill")};e.addShape({type:"path",attrs:A(A({},Mt({},o,Vt(a)?a(o,n):a)),{path:this.getLinkPath(n,i)})})},t.prototype.linkByElement=function(e,n){var i=this,a=this.context.view,o=this.getColorScale(a,e);if(!!o){var s=ul(e,o.field);if(!this.cache[s]){var l=uZe(a,o.field,s),u=this.linkGroup,c=u.addGroup();this.cache[s]=c;var f=l.length;G(l,function(d,h){if(h<f-1){var v=l[h+1];i.addLinkShape(c,d,v,n)}})}}},t.prototype.removeLink=function(e){var n=this.getColorScale(this.context.view,e);if(!!n){var i=ul(e,n.field);this.cache[i]&&(this.cache[i].remove(),this.cache[i]=null)}},t.prototype.link=function(e){var n=this.context;this.linkGroup||(this.linkGroup=n.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var i=df(n);i&&this.linkByElement(i,e==null?void 0:e.style)},t.prototype.unlink=function(){var e=df(this.context);e&&this.removeLink(e)},t.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},t}(ui),QD=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.startPoint=null,e.endPoint=null,e.isStarted=!1,e.effectSiblings=!1,e.effectByRecord=!1,e}return t.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},t.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},t.prototype.getIntersectElements=function(){var e=null;if(q0(this.context))e=bD(this.context,10);else{var n=this.startPoint,i=this.isStarted?this.getCurrentPoint():this.endPoint;if(!n||!i)return;var a={minX:Math.min(n.x,i.x),minY:Math.min(n.y,i.y),maxX:Math.max(n.x,i.x),maxY:Math.max(n.y,i.y)},o=this.context.view;e=xD(o,a)}return e},t.prototype.setStateEnable=function(e){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(e);else{var n=Ga(this.context.view),i=this.getIntersectElements();i&&i.length?this.effectByRecord?this.setSiblingsStateByRecord(i,e):this.setElementsState(i,e,n):this.clear()}},t.prototype.setSiblingsStateByRecord=function(e,n){var i=this,a=this.context.view,o=nu(a),s=e.map(function(c){return c.getModel().data}),l=a.getXScale().field,u=a.getYScales()[0].field;G(o,function(c){var f=Ga(c),d=f.filter(function(h){var v=h.getModel().data;return iQ(s,v,l,u)});i.setElementsState(d,n,f)})},t.prototype.setSiblingsState=function(e){var n=this,i=this.context.view,a=nu(i);q0(this.context)&&G(a,function(o){var s=Ga(o),l=JZ(n.context,o,10);l&&l.length?n.setElementsState(l,e,s):n.clearViewState(o)})},t.prototype.setElementsState=function(e,n,i){var a=this;G(i,function(o){e.includes(o)?a.setElementState(o,n):a.setElementState(o,!1)})},t.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},t.prototype.clear=function(){var e=this,n=this.context.view;if(this.effectSiblings){var i=nu(n);G(i,function(a){e.clearViewState(a)})}else this.clearViewState(n)},t}(KD),het=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="active",e}return t.prototype.active=function(){this.setState()},t}(QD),JD=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setStateEnable=function(e){var n=df(this.context);if(n){if(!ZZ(this.context))return;e?(this.clear(),this.setElementState(n,!0)):this.hasState(n)&&this.setElementState(n,!1)}},t.prototype.toggle=function(){var e=df(this.context);if(e){var n=this.hasState(e);n||this.clear(),this.setElementState(e,!n)}},t.prototype.reset=function(){this.setStateEnable(!1)},t}(KD),vet=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="active",e}return t.prototype.active=function(){this.setState()},t}(JD),rb="inactive",nb="active";function eR(r){var t=Ga(r);G(t,function(e){e.hasState(nb)&&e.setState(nb,!1),e.hasState(rb)&&e.setState(rb,!1)})}function yJ(r,t,e){G(r,function(n){t(n)?(n.hasState(rb)&&n.setState(rb,!1),n.setState(nb,e)):(n.hasState(nb)&&n.setState(nb,!1),n.setState(rb,e))})}var xh=xC.INACTIVE,Xu=xC.ACTIVE,tR=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName=Xu,e}return t.prototype.setElementsStateByItem=function(e,n,i,a){var o=this,s=function(l){return o.isMathItem(l,n,i)};this.setHighlightBy(e,s,a)},t.prototype.setElementHighlight=function(e,n){n(e)?(e.hasState(xh)&&e.setState(xh,!1),e.setState(Xu,!0)):e.hasState(Xu)||e.setState(xh,!0)},t.prototype.setHighlightBy=function(e,n,i){var a=this;if(i)G(e,function(l){a.setElementHighlight(l,n)});else{var o=eQ(this.context.view,Xu),s=!0;G(o,function(l){if(!n(l))return s=!1,!1}),s?this.clear():G(e,function(l){n(l)&&(l.hasState(Xu)&&l.setState(Xu,!1),l.setState(xh,!0))})}},t.prototype.setElementState=function(e,n){var i=this.context.view,a=Ga(i);this.setHighlightBy(a,function(o){return e===o},n)},t.prototype.highlight=function(){this.setState()},t.prototype.clear=function(){var e=this.context.view;eR(e)},t}(ZD),pet=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setStateByElement=function(e,n){var i=this.context.view,a=e.geometry.getAttribute("color");if(!!a){var o=i.getScaleByField(a.getFields()[0]),s=ul(e,o.field),l=Ga(i),u=l.filter(function(c){return ul(c,o.field)===s});this.setHighlightBy(l,function(c){return u.includes(c)},n)}},t}(tR),get=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setElementHighlight=function(e,n){n(e)?(e.hasState(xh)&&e.setState(xh,!1),e.setState(Xu,!0)):(e.setState(xh,!0),e.hasState(Xu)&&e.setState(Xu,!1))},t.prototype.setStateByElement=function(e,n){var i=this.context.view,a=i.getXScale(),o=ul(e,a.field),s=Ga(i),l=s.filter(function(u){return ul(u,a.field)===o});this.setHighlightBy(s,function(u){return l.includes(u)},n)},t.prototype.toggle=function(){var e=df(this.context);if(e){var n=e.hasState(this.stateName);this.setStateByElement(e,!n)}},t}(tR),au;(function(r){r.BEFORE_HIGHLIGHT="element-range-highlight:beforehighlight",r.AFTER_HIGHLIGHT="element-range-highlight:afterhighlight",r.BEFORE_CLEAR="element-range-highlight:beforeclear",r.AFTER_CLEAR="element-range-highlight:afterclear"})(au||(au={}));var bJ=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="active",e}return t.prototype.clearViewState=function(e){eR(e)},t.prototype.highlight=function(){var e=this.context,n=e.view,i=e.event,a=this.getIntersectElements(),o={view:n,event:i,highlightElements:a};n.emit(au.BEFORE_HIGHLIGHT,ci.fromData(n,au.BEFORE_HIGHLIGHT,o)),this.setState(),n.emit(au.AFTER_HIGHLIGHT,ci.fromData(n,au.AFTER_HIGHLIGHT,o))},t.prototype.clear=function(){var e=this.context.view;e.emit(au.BEFORE_CLEAR,ci.fromData(e,au.BEFORE_CLEAR,{})),r.prototype.clear.call(this),e.emit(au.AFTER_CLEAR,ci.fromData(e,au.AFTER_CLEAR,{}))},t.prototype.setElementsState=function(e,n,i){yJ(i,function(a){return e.indexOf(a)>=0},n)},t}(QD),met=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="active",e}return t.prototype.highlight=function(){this.setState()},t.prototype.setElementState=function(e,n){var i=this.context.view,a=Ga(i);yJ(a,function(o){return e===o},n)},t.prototype.clear=function(){var e=this.context.view;eR(e)},t}(JD),yet=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="selected",e}return t.prototype.selected=function(){this.setState()},t}(QD),bet=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="selected",e}return t.prototype.selected=function(){this.setState()},t}(ZD),xet=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="selected",e}return t.prototype.selected=function(){this.setState()},t}(JD),ib=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="",e.ignoreItemStates=[],e}return t.prototype.getTriggerListInfo=function(){var e=Zp(this.context),n=null;return X0(e)&&(n={item:e.item,list:e.component}),n},t.prototype.getAllowComponents=function(){var e=this,n=this.context.view,i=rQ(n),a=[];return G(i,function(o){o.isList()&&e.allowSetStateByElement(o)&&a.push(o)}),a},t.prototype.hasState=function(e,n){return e.hasState(n,this.stateName)},t.prototype.clearAllComponentsState=function(){var e=this,n=this.getAllowComponents();G(n,function(i){i.clearItemsState(e.stateName)})},t.prototype.allowSetStateByElement=function(e){var n=e.get("field");if(!n)return!1;if(this.cfg&&this.cfg.componentNames){var i=e.get("name");if(this.cfg.componentNames.indexOf(i)===-1)return!1}var a=this.context.view,o=Qp(a,n);return o&&o.isCategory},t.prototype.allowSetStateByItem=function(e,n){var i=this.ignoreItemStates;if(i.length){var a=i.filter(function(o){return n.hasState(e,o)});return a.length===0}return!0},t.prototype.setStateByElement=function(e,n,i){var a=e.get("field"),o=this.context.view,s=Qp(o,a),l=ul(n,a),u=s.getText(l);this.setItemsState(e,u,i)},t.prototype.setStateEnable=function(e){var n=this,i=df(this.context);if(i){var a=this.getAllowComponents();G(a,function(u){n.setStateByElement(u,i,e)})}else{var o=Zp(this.context);if(X0(o)){var s=o.item,l=o.component;this.allowSetStateByElement(l)&&this.allowSetStateByItem(s,l)&&this.setItemState(l,s,e)}}},t.prototype.setItemsState=function(e,n,i){var a=this,o=e.getItems();G(o,function(s){s.name===n&&a.setItemState(e,s,i)})},t.prototype.setItemState=function(e,n,i){e.setItemState(n,this.stateName,i)},t.prototype.setState=function(){this.setStateEnable(!0)},t.prototype.reset=function(){this.setStateEnable(!1)},t.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var n=e.list,i=e.item,a=this.hasState(n,i);this.setItemState(n,i,!a)}},t.prototype.clear=function(){var e=this.getTriggerListInfo();e?e.list.clearItemsState(this.stateName):this.clearAllComponentsState()},t}(ui),wet=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="active",e}return t.prototype.active=function(){this.setState()},t}(ib),xJ="inactive",wJ="active";function Cet(r){var t=r.getItems();G(t,function(e){r.hasState(e,wJ)&&r.setItemState(e,wJ,!1),r.hasState(e,xJ)&&r.setItemState(e,xJ,!1)})}var ab="inactive",wh="active",rR=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName=wh,e.ignoreItemStates=["unchecked"],e}return t.prototype.setItemsState=function(e,n,i){this.setHighlightBy(e,function(a){return a.name===n},i)},t.prototype.setItemState=function(e,n,i){e.getItems(),this.setHighlightBy(e,function(a){return a===n},i)},t.prototype.setHighlightBy=function(e,n,i){var a=e.getItems();if(i)G(a,function(l){n(l)?(e.hasState(l,ab)&&e.setItemState(l,ab,!1),e.setItemState(l,wh,!0)):e.hasState(l,wh)||e.setItemState(l,ab,!0)});else{var o=e.getItemsByState(wh),s=!0;G(o,function(l){if(!n(l))return s=!1,!1}),s?this.clear():G(a,function(l){n(l)&&(e.hasState(l,wh)&&e.setItemState(l,wh,!1),e.setItemState(l,ab,!0))})}},t.prototype.highlight=function(){this.setState()},t.prototype.clear=function(){var e=this.getTriggerListInfo();if(e)Cet(e.list);else{var n=this.getAllowComponents();G(n,function(i){i.clearItemsState(wh),i.clearItemsState(ab)})}},t}(ib),Eet=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="selected",e}return t.prototype.selected=function(){this.setState()},t}(ib),_et=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName="unchecked",e}return t.prototype.unchecked=function(){this.setState()},t}(ib),rg="unchecked",a2="checked",Tet=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.stateName=a2,e}return t.prototype.setItemState=function(e,n,i){this.setCheckedBy(e,function(a){return a===n},i)},t.prototype.setCheckedBy=function(e,n,i){var a=e.getItems();i&&G(a,function(o){n(o)?(e.hasState(o,rg)&&e.setItemState(o,rg,!1),e.setItemState(o,a2,!0)):e.hasState(o,a2)||e.setItemState(o,rg,!0)})},t.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var n=e.list,i=e.item,a=!sm(n.getItems(),function(o){return n.hasState(o,rg)});a||n.hasState(i,rg)?this.setItemState(n,i,!0):this.reset()}},t.prototype.checked=function(){this.setState()},t.prototype.reset=function(){var e=this.getAllowComponents();G(e,function(n){n.clearItemsState(a2),n.clearItemsState(rg)})},t}(ib),nR=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.maskShape=null,e.points=[],e.starting=!1,e.moving=!1,e.preMovePoint=null,e.shapeType="path",e}return t.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},t.prototype.emitEvent=function(e){var n="mask:"+e,i=this.context.view,a=this.context.event;i.emit(n,{target:this.maskShape,shape:this.maskShape,points:this.points,x:a.x,y:a.y})},t.prototype.createMask=function(){var e=this.context.view,n=this.getMaskAttrs(),i=e.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:A({fill:"#C5D4EB",opacity:.3},n)});return i},t.prototype.getMaskPath=function(){return[]},t.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},t.prototype.start=function(e){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(e==null?void 0:e.maskStyle),this.emitEvent("start")},t.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},t.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var e=this.getCurrentPoint(),n=this.preMovePoint,i=e.x-n.x,a=e.y-n.y,o=this.points;G(o,function(s){s.x+=i,s.y+=a}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=e}},t.prototype.updateMask=function(e){var n=Mt({},this.getMaskAttrs(),e);this.maskShape.attr(n)},t.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},t.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},t.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},t.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},t.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,r.prototype.destroy.call(this)},t}(ui),Aet=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.shapeType="circle",e}return t.prototype.getMaskAttrs=function(){var e=this.points,n=Yi(this.points),i=0,a=0,o=0;if(e.length){var s=e[0];i=wD(s,n)/2,a=(n.x+s.x)/2,o=(n.y+s.y)/2}return{x:a,y:o,r:i}},t}(nR),SJ=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.shapeType="rect",e}return t.prototype.getRegion=function(){var e=this.points;return{start:xo(e),end:Yi(e)}},t.prototype.getMaskAttrs=function(){var e=this.getRegion(),n=e.start,i=e.end,a=Math.min(n.x,i.x),o=Math.min(n.y,i.y),s=Math.abs(i.x-n.x),l=Math.abs(i.y-n.y);return{x:a,y:o,width:s,height:l}},t}(nR);function CJ(r){r.x=Yn(r.x,0,1),r.y=Yn(r.y,0,1)}var EJ=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.dim="x",e.inPlot=!0,e}return t.prototype.getRegion=function(){var e=null,n=null,i=this.points,a=this.dim,o=this.context.view.getCoordinate(),s=o.invert(xo(i)),l=o.invert(Yi(i));return this.inPlot&&(CJ(s),CJ(l)),a==="x"?(e=o.convert({x:s.x,y:0}),n=o.convert({x:l.x,y:1})):(e=o.convert({x:0,y:s.y}),n=o.convert({x:1,y:l.y})),{start:e,end:n}},t}(SJ),_J=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getMaskPath=function(){var e=this.points,n=[];return e.length&&(G(e,function(i,a){a===0?n.push(["M",i.x,i.y]):n.push(["L",i.x,i.y])}),n.push(["L",e[0].x,e[0].y])),n},t.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},t.prototype.addPoint=function(){this.resize()},t}(nR),Met=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getMaskPath=function(){var e=this.points;return dZe(e,!0)},t}(_J),ket=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setCursor=function(e){var n=this.context.view;n.getCanvas().setCursor(e)},t.prototype.default=function(){this.setCursor("default")},t.prototype.pointer=function(){this.setCursor("pointer")},t.prototype.move=function(){this.setCursor("move")},t.prototype.crosshair=function(){this.setCursor("crosshair")},t.prototype.wait=function(){this.setCursor("wait")},t.prototype.help=function(){this.setCursor("help")},t.prototype.text=function(){this.setCursor("text")},t.prototype.eResize=function(){this.setCursor("e-resize")},t.prototype.wResize=function(){this.setCursor("w-resize")},t.prototype.nResize=function(){this.setCursor("n-resize")},t.prototype.sResize=function(){this.setCursor("s-resize")},t.prototype.neResize=function(){this.setCursor("ne-resize")},t.prototype.nwResize=function(){this.setCursor("nw-resize")},t.prototype.seResize=function(){this.setCursor("se-resize")},t.prototype.swResize=function(){this.setCursor("sw-resize")},t.prototype.nsResize=function(){this.setCursor("ns-resize")},t.prototype.ewResize=function(){this.setCursor("ew-resize")},t}(ui),Iet=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.filterView=function(e,n,i){var a=this;e.getScaleByField(n)&&e.filter(n,i),e.views&&e.views.length&&G(e.views,function(o){a.filterView(o,n,i)})},t.prototype.filter=function(){var e=Zp(this.context);if(e){var n=this.context.view,i=e.component,a=i.get("field");if(X0(e)){if(a){var o=i.getItemsByState("unchecked"),s=Qp(n,a),l=o.map(function(d){return d.name});l.length?this.filterView(n,a,function(d){var h=s.getText(d);return!l.includes(h)}):this.filterView(n,a,null),n.render(!0)}}else if(QZ(e)){var u=i.getValue(),c=u[0],f=u[1];this.filterView(n,a,function(d){return d>=c&&d<=f}),n.render(!0)}}},t}(ui);function TJ(r,t,e,n){var i=Math.min(e[t],n[t]),a=Math.max(e[t],n[t]),o=r.range,s=o[0],l=o[1];if(i<s&&(i=s),a>l&&(a=l),i===l&&a===l)return null;var u=r.invert(i),c=r.invert(a);if(r.isCategory){var f=r.values.indexOf(u),d=r.values.indexOf(c),h=r.values.slice(f,d+1);return function(v){return h.includes(v)}}else return function(v){return v>=u&&v<=c}}var Yo;(function(r){r.FILTER="brush-filter-processing",r.RESET="brush-filter-reset",r.BEFORE_FILTER="brush-filter:beforefilter",r.AFTER_FILTER="brush-filter:afterfilter",r.BEFORE_RESET="brush-filter:beforereset",r.AFTER_RESET="brush-filter:afterreset"})(Yo||(Yo={}));var o2=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.dims=["x","y"],e.startPoint=null,e.isStarted=!1,e}return t.prototype.hasDim=function(e){return this.dims.includes(e)},t.prototype.start=function(){var e=this.context;this.isStarted=!0,this.startPoint=e.getCurrentPoint()},t.prototype.filter=function(){var e,n;if(q0(this.context)){var i=this.context.event.target,a=i.getCanvasBBox();e={x:a.x,y:a.y},n={x:a.maxX,y:a.maxY}}else{if(!this.isStarted)return;e=this.startPoint,n=this.context.getCurrentPoint()}if(!(Math.abs(e.x-n.x)<5||Math.abs(e.x-n.y)<5)){var o=this.context,s=o.view,l=o.event,u={view:s,event:l,dims:this.dims};s.emit(Yo.BEFORE_FILTER,ci.fromData(s,Yo.BEFORE_FILTER,u));var c=s.getCoordinate(),f=c.invert(n),d=c.invert(e);if(this.hasDim("x")){var h=s.getXScale(),v=TJ(h,"x",f,d);this.filterView(s,h.field,v)}if(this.hasDim("y")){var p=s.getYScales()[0],v=TJ(p,"y",f,d);this.filterView(s,p.field,v)}this.reRender(s,{source:Yo.FILTER}),s.emit(Yo.AFTER_FILTER,ci.fromData(s,Yo.AFTER_FILTER,u))}},t.prototype.end=function(){this.isStarted=!1},t.prototype.reset=function(){var e=this.context.view;if(e.emit(Yo.BEFORE_RESET,ci.fromData(e,Yo.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim("x")){var n=e.getXScale();this.filterView(e,n.field,null)}if(this.hasDim("y")){var i=e.getYScales()[0];this.filterView(e,i.field,null)}this.reRender(e,{source:Yo.RESET}),e.emit(Yo.AFTER_RESET,ci.fromData(e,Yo.AFTER_RESET,{}))},t.prototype.filterView=function(e,n,i){e.filter(n,i)},t.prototype.reRender=function(e,n){e.render(!0,n)},t}(ui),iR=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.filterView=function(e,n,i){var a=nu(e);G(a,function(o){o.filter(n,i)})},t.prototype.reRender=function(e){var n=nu(e);G(n,function(i){i.render(!0)})},t}(o2),Pet=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.filter=function(){var e=Zp(this.context),n=this.context.view,i=Ga(n);if(q0(this.context)){var a=bD(this.context,10);a&&G(i,function(v){a.includes(v)?v.show():v.hide()})}else if(e){var o=e.component,s=o.get("field");if(X0(e)){if(s){var l=o.getItemsByState("unchecked"),u=Qp(n,s),c=l.map(function(v){return v.name});G(i,function(v){var p=ul(v,s),g=u.getText(p);c.indexOf(g)>=0?v.hide():v.show()})}}else if(QZ(e)){var f=o.getValue(),d=f[0],h=f[1];G(i,function(v){var p=ul(v,s);p>=d&&p<=h?v.show():v.hide()})}}},t.prototype.clear=function(){var e=Ga(this.context.view);G(e,function(n){n.show()})},t.prototype.reset=function(){this.clear()},t}(ui),AJ=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.byRecord=!1,e}return t.prototype.filter=function(){q0(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},t.prototype.filterByRecord=function(){var e=this.context.view,n=bD(this.context,10);if(!!n){var i=e.getXScale().field,a=e.getYScales()[0].field,o=n.map(function(l){return l.getModel().data}),s=nu(e);G(s,function(l){var u=Ga(l);G(u,function(c){var f=c.getModel().data;iQ(o,f,i,a)?c.show():c.hide()})})}},t.prototype.filterByBBox=function(){var e=this,n=this.context.view,i=nu(n);G(i,function(a){var o=JZ(e.context,a,10),s=Ga(a);o&&G(s,function(l){o.includes(l)?l.show():l.hide()})})},t.prototype.reset=function(){var e=nu(this.context.view);G(e,function(n){var i=Ga(n);G(i,function(a){a.show()})})},t}(ui),Det=10,Ret=5,Oet=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.buttonGroup=null,e.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},e}return t.prototype.getButtonCfg=function(){return Mt(this.buttonCfg,this.cfg)},t.prototype.drawButton=function(){var e=this.getButtonCfg(),n=this.context.view.foregroundGroup.addGroup({name:e.name}),i=n.addShape({type:"text",name:"button-text",attrs:A({text:e.text},e.textStyle)}),a=i.getBBox(),o=TD(e.padding),s=n.addShape({type:"rect",name:"button-rect",attrs:A({x:a.x-o[3],y:a.y-o[0],width:a.width+o[1]+o[3],height:a.height+o[0]+o[2]},e.style)});s.toBack(),n.on("mouseenter",function(){s.attr(e.activeStyle)}),n.on("mouseleave",function(){s.attr(e.style)}),this.buttonGroup=n},t.prototype.resetPosition=function(){var e=this.context.view,n=e.getCoordinate(),i=n.convert({x:1,y:1}),a=this.buttonGroup,o=a.getBBox(),s=Un(null,[["t",i.x-o.width-Det,i.y+o.height+Ret]]);a.setMatrix(s)},t.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},t.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},t.prototype.destroy=function(){var e=this.buttonGroup;e&&e.remove(),r.prototype.destroy.call(this)},t}(ui),Let=4,Fet=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.starting=!1,e.dragStart=!1,e}return t.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},t.prototype.drag=function(){if(!!this.startPoint){var e=this.context.getCurrentPoint(),n=this.context.view,i=this.context.event;this.dragStart?n.emit("drag",{target:i.target,x:i.x,y:i.y}):wD(e,this.startPoint)>Let&&(n.emit("dragstart",{target:i.target,x:i.x,y:i.y}),this.dragStart=!0)}},t.prototype.end=function(){if(this.dragStart){var e=this.context.view,n=this.context.event;e.emit("dragend",{target:n.target,x:n.x,y:n.y})}this.starting=!1,this.dragStart=!1},t}(ui),Net=5,Bet=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.starting=!1,e.isMoving=!1,e.startPoint=null,e.startMatrix=null,e}return t.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},t.prototype.move=function(){if(!!this.starting){var e=this.startPoint,n=this.context.getCurrentPoint(),i=wD(e,n);if(i>Net&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var a=this.context.view,o=Un(this.startMatrix,[["t",n.x-e.x,n.y-e.y]]);a.backgroundGroup.setMatrix(o),a.foregroundGroup.setMatrix(o),a.middleGroup.setMatrix(o)}}},t.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},t.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var e=this.context.view;e.backgroundGroup.resetMatrix(),e.foregroundGroup.resetMatrix(),e.middleGroup.resetMatrix(),this.isMoving=!1},t}(ui),MJ="x",kJ="y",IJ=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.dims=[MJ,kJ],e.cfgFields=["dims"],e.cacheScaleDefs={},e}return t.prototype.hasDim=function(e){return this.dims.includes(e)},t.prototype.getScale=function(e){var n=this.context.view;return e==="x"?n.getXScale():n.getYScales()[0]},t.prototype.resetDim=function(e){var n=this.context.view;if(this.hasDim(e)&&this.cacheScaleDefs[e]){var i=this.getScale(e);n.scale(i.field,this.cacheScaleDefs[e]),this.cacheScaleDefs[e]=null}},t.prototype.reset=function(){this.resetDim(MJ),this.resetDim(kJ);var e=this.context.view;e.render(!0)},t}(ui),$et=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.startPoint=null,e.starting=!1,e.startCache={},e}return t.prototype.start=function(){var e=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var n=this.dims;G(n,function(i){var a=e.getScale(i),o=a.min,s=a.max,l=a.values;e.startCache[i]={min:o,max:s,values:l}})},t.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},t.prototype.translate=function(){var e=this;if(!!this.starting){var n=this.startPoint,i=this.context.view.getCoordinate(),a=this.context.getCurrentPoint(),o=i.invert(n),s=i.invert(a),l=s.x-o.x,u=s.y-o.y,c=this.context.view,f=this.dims;G(f,function(d){e.translateDim(d,{x:l*-1,y:u*-1})}),c.render(!0)}},t.prototype.translateDim=function(e,n){if(this.hasDim(e)){var i=this.getScale(e);i.isLinear&&this.translateLinear(e,i,n)}},t.prototype.translateLinear=function(e,n,i){var a=this.context.view,o=this.startCache[e],s=o.min,l=o.max,u=l-s,c=i[e]*u;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:n.nice,min:s,max:l}),a.scale(n.field,{nice:!1,min:s+c,max:l+c})},t.prototype.reset=function(){r.prototype.reset.call(this),this.startPoint=null,this.starting=!1},t}(IJ),zet=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.zoomRatio=.05,e}return t.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},t.prototype.zoom=function(e){var n=this,i=this.dims;G(i,function(a){n.zoomDim(a,e)}),this.context.view.render(!0)},t.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},t.prototype.zoomDim=function(e,n){if(this.hasDim(e)){var i=this.getScale(e);i.isLinear&&this.zoomLinear(e,i,n)}},t.prototype.zoomLinear=function(e,n,i){var a=this.context.view;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:n.nice,min:n.min,max:n.max});var o=this.cacheScaleDefs[e],s=o.max-o.min,l=n.min,u=n.max,c=i*s,f=l-c,d=u+c,h=d-f,v=h/s;d>f&&v<100&&v>.01&&a.scale(n.field,{nice:!1,min:l-c,max:u+c})},t}(IJ);function Get(r){var t=r.gEvent.originalEvent;return t.deltaY>0}var Uet=1,Vet=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.scroll=function(e){var n=this.context,i=n.view,a=n.event;if(!!i.getOptions().scrollbar){var o=(e==null?void 0:e.wheelDelta)||Uet,s=i.getController("scrollbar"),l=i.getXScale(),u=i.getOptions().data,c=aa(As(u,l.field)),f=aa(l.values),d=s.getValue(),h=Math.floor((c-f)*d),v=h+(Get(a)?o:-o),p=o/(c-f)/1e4,g=Yn(v/(c-f)+p,0,1);s.setValue(g)}},t}(ui);_Ze("dark",lQ(hQe));MK("canvas",Ipe);MK("svg",xge);iu("Polygon",AQe);iu("Interval",SQe);iu("Schema",MQe);iu("Path",ND);iu("Point",_Qe);iu("Line",CQe);iu("Area",pQe);iu("Edge",gQe);iu("Heatmap",mQe);iu("Violin",IQe);Q0("base",YC);Q0("interval",jQe);Q0("pie",YQe);Q0("polar",jQ);Wo("overlap",sJe);Wo("distribute",qQe);Wo("fixed-overlap",oJe);Wo("hide-overlap",hJe);Wo("limit-in-shape",rJe);Wo("limit-in-canvas",tJe);Wo("limit-in-plot",IJe);Wo("pie-outer",ZQe);Wo("adjust-color",pJe);Wo("interval-adjust-position",bJe);Wo("interval-hide-overlap",wJe);Wo("point-adjust-position",EJe);Wo("pie-spider",eJe);Wo("path-adjust-position",AJe);hs("fade-in",PJe);hs("fade-out",DJe);hs("grow-in-x",OJe);hs("grow-in-xy",FJe);hs("grow-in-y",LJe);hs("scale-in-x",$Je);hs("scale-in-y",zJe);hs("wave-in",UJe);hs("zoom-in",VJe);hs("zoom-out",HJe);hs("position-update",BJe);hs("sector-path-update",GJe);hs("path-in",NJe);Kp("rect",qJe);Kp("mirror",XJe);Kp("list",jJe);Kp("matrix",YJe);Kp("circle",WJe);Kp("tree",KJe);mh("axis",JJe);mh("legend",eet);mh("tooltip",mQ);mh("annotation",QJe);mh("slider",tet);mh("scrollbar",iet);gr("tooltip",gJ);gr("sibling-tooltip",uet);gr("ellipsis-text",cet);gr("element-active",fet);gr("element-single-active",vet);gr("element-range-active",het);gr("element-highlight",tR);gr("element-highlight-by-x",get);gr("element-highlight-by-color",pet);gr("element-single-highlight",met);gr("element-range-highlight",bJ);gr("element-sibling-highlight",bJ,{effectSiblings:!0,effectByRecord:!0});gr("element-selected",bet);gr("element-single-selected",xet);gr("element-range-selected",yet);gr("element-link-by-color",det);gr("active-region",set);gr("list-active",wet);gr("list-selected",Eet);gr("list-highlight",rR);gr("list-unchecked",_et);gr("list-checked",Tet);gr("legend-item-highlight",rR,{componentNames:["legend"]});gr("axis-label-highlight",rR,{componentNames:["axis"]});gr("rect-mask",SJ);gr("x-rect-mask",EJ,{dim:"x"});gr("y-rect-mask",EJ,{dim:"y"});gr("circle-mask",Aet);gr("path-mask",_J);gr("smooth-path-mask",Met);gr("cursor",ket);gr("data-filter",Iet);gr("brush",o2);gr("brush-x",o2,{dims:["x"]});gr("brush-y",o2,{dims:["y"]});gr("sibling-filter",iR);gr("sibling-x-filter",iR);gr("sibling-y-filter",iR);gr("element-filter",Pet);gr("element-sibling-filter",AJ);gr("element-sibling-filter-record",AJ,{byRecord:!0});gr("view-drag",Fet);gr("view-move",Bet);gr("scale-translate",$et);gr("scale-zoom",zet);gr("reset-button",Oet,{name:"reset-button",text:"reset"});gr("mousewheel-scroll",Vet);function yf(r){return r.isInPlot()}kr("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]});kr("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]});kr("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]});kr("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]});kr("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]});kr("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]});kr("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]});kr("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]});kr("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]});kr("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]});kr("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]});kr("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(r){return!r.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(r){return!r.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]});kr("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:yf,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:yf,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:yf,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]});kr("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]});kr("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:yf,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:yf,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:yf,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]});kr("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:yf,action:"path-mask:start"},{trigger:"mousedown",isEnable:yf,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]});kr("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]});kr("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter"]}]});kr("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]});kr("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]});kr("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","element-filter:filter"]}]});kr("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]});function PJ(r){return r.gEvent.preventDefault(),r.gEvent.originalEvent.deltaY>0}kr("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(r){return PJ(r.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(r){return!PJ(r.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]});kr("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]});kr("plot-mousewheel-scroll",{start:[{trigger:"plot:mousewheel",action:"mousewheel-scroll:scroll"}]});function xr(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){return r.reduce(function(n,i){return i(n)},e)}}function Pn(r,t){var e={};return r!==null&&typeof r=="object"&&t.forEach(function(n){var i=r[n];i!==void 0&&(e[n]=i)}),e}function DJ(r,t){return t?Wa(t,function(e,n,i){return e.replace(new RegExp("{\\s*"+i+"\\s*}","g"),n)},r):r}var fl;(function(r){r.ERROR="error",r.WARN="warn",r.INFO="log"})(fl||(fl={}));var Het="AntV/G2Plot";function Wet(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=0;return Het+": "+r.replace(/%s/g,function(){return""+t[n++]})}function qu(r,t,e){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];t||console[r](Wet.apply(void 0,$n([e],n)))}function aR(r){if(!r)return{width:0,height:0};var t=getComputedStyle(r);return{width:(r.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10),height:(r.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)}}function to(r,t){return r.geometries.find(function(e){return e.type===t})}function s2(r){return Wa(r.geometries,function(t,e){return t.concat(e.elements)},[])}function ob(r){return ne(r,["views","length"],0)<=0?s2(r):Wa(r.views,function(t,e){return t.concat(ob(e))},s2(r))}function jet(r){return ne(r,["views","length"],0)<=0?r.geometries:Wa(r.views,function(t,e){return t.concat(e.geometries)},r.geometries)}function Yr(r,t){return r.views.find(function(e){return e.id===t})}function sb(r){var t=r.parent;return t?t.views:[]}function RJ(r){return sb(r).filter(function(t){return t!==r})}function _a(r){if(!_s(r,"Object"))return r;var t=A({},r);return t.formatter&&!t.content&&(t.content=t.formatter),t}function Yet(r,t){var e=[];if(r.length){e.push(["M",r[0].x,r[0].y]);for(var n=1,i=r.length;n<i;n+=1){var a=r[n];e.push(["L",a.x,a.y])}t&&e.push(["Z"])}return e}var Xet=function(r,t,e,n){var i=[],a,o,s=!!n,l,u;if(s){l=[1/0,1/0],u=[-1/0,-1/0];for(var c=0,f=r.length;c<f;c++){var d=r[c];l=Oa([0,0],l,d),u=La([0,0],u,d)}l=Oa([0,0],l,n[0]),u=La([0,0],u,n[1])}for(var c=0,h=r.length;c<h;c++){var d=r[c];if(e)a=r[c?c-1:h-1],o=r[(c+1)%h];else if(c===0||c===h-1){i.push(d);continue}else a=r[c-1],o=r[c+1];var v=[0,0];v=nd(v,o,a),v=di(v,v,t);var p=Tv(d,a),g=Tv(d,o),m=p+g;m!==0&&(p/=m,g/=m);var y=di([0,0],v,-p),b=di([0,0],v,g),x=Oi([0,0],d,y),w=Oi([0,0],d,b);s&&(x=La([0,0],x,l),x=Oa([0,0],x,u),w=La([0,0],w,l),w=Oa([0,0],w,u)),i.push(x),i.push(w)}return e&&i.push(i.shift()),i};function qet(r,t,e){for(var n=!!t,i=[],a=0,o=r.length;a<o;a+=2)i.push([r[a],r[a+1]]);for(var s=Xet(i,.4,n,e),l=i.length,u=[],c,f,d,a=0;a<l-1;a++)c=s[a*2],f=s[a*2+1],d=i[a+1],u.push(["C",c[0],c[1],f[0],f[1],d[0],d[1]]);return n&&(c=s[l],f=s[l+1],d=i[0],u.push(["C",c[0],c[1],f[0],f[1],d[0],d[1]])),u}function Ket(r,t,e){var n=[],i=r[0],a=null;if(r.length<=2)return Yet(r,t);for(var o=0,s=r.length;o<s;o++){var l=r[o];(!a||!(a.x===l.x&&a.y===l.y))&&(n.push(l.x),n.push(l.y),a=l)}var u=e||[[0,0],[1,1]],c=qet(n,t,u);return c.unshift(["M",i.x,i.y]),c}var Zet=5,Qet={}.toString,OJ=function(r,t){return Qet.call(r)==="[object "+t+"]"},Jet=function(r){return OJ(r,"Array")},ett=function(r){return typeof r=="object"&&r!==null},LJ=function(r){if(!ett(r)||!OJ(r,"Object"))return!1;for(var t=r;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(r)===t},FJ=function(r,t,e,n){e=e||0,n=n||Zet;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=t[i];a?LJ(a)?(LJ(r[i])||(r[i]={}),e<n?FJ(r[i],a,e+1,n):r[i]=t[i]):Jet(a)?(r[i]=[],r[i]=r[i].concat(a)):r[i]=a:r[i]=a}},Ze=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var n=0;n<t.length;n+=1)FJ(r,t[n]);return r};function NJ(r){if(!r)return r;var t=r.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g);return t.map(function(e){return e.toLowerCase()}).join("-")}function BJ(r){var t={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},e=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];ne(r,"fill")&&(t.color=r.fill);var n=Pn(r,e),i=n.shadowColor,a=n.shadowBlur,o=a===void 0?0:a,s=n.shadowOffsetX,l=s===void 0?0:s,u=n.shadowOffsetY,c=u===void 0?0:u;t["text-shadow"]=""+[i,l+"px",c+"px",o+"px"].join(" ");var f=Pn(r,e),d=f.stroke,h=f.lineWidth,v=h===void 0?0:h;return t["-webkit-text-stroke"]=""+[v+"px",d].join(" "),G(r,function(p,g){["fontSize"].includes(g)&&Rt(p)?t[NJ(g)]=p+"px":g&&!e.includes(g)&&(t[NJ(g)]=""+p)}),t}function $J(r,t){r.style["pointer-events"]="none",G(t,function(e,n){n&&e&&(r.style[n]=e)})}var l2=function(r,t,e){var n=t.statistic,i=t.plotType,a=n.title,o=n.content;[a,o].forEach(function(s,l){if(!!s){var u="";l===0?u=o?"translate(-50%, -100%)":"translate(-50%, -50%)":u=a?"translate(-50%, 0)":"translate(-50%, -50%)";var c=Vt(s.style)?s.style(e):s.style;r.annotation().html(A({position:["50%","50%"],html:function(f,d){var h=d.getCoordinate(),v=0;if(i==="pie"||i==="ring-progress")v=h.getRadius()*h.innerRadius*2;else if(i==="liquid"){var p=ne(d.geometries,[0,"elements",0,"shape"]);if(p){var g=p.find(function(x){return x.get("name")==="wrap"}),m=g.getCanvasBBox().width;v=m}}else v||(v=h.getWidth());$J(f,A({width:v+"px",transform:u},BJ(c)));var y=d.getData();if(s.customHtml)return s.customHtml(f,d,e,y);var b=s.content;return s.formatter&&(b=s.formatter(e,y)),b?rt(b)?b:""+b:"<div></div>"},key:(l===0?"top":"bottom")+"-statistic"},Pn(s,["offsetX","offsetY","rotate","style","formatter"])))}})},ttt=function(r,t,e){var n=t.statistic,i=n.title,a=n.content;[i,a].forEach(function(o){if(!!o){var s=Vt(o.style)?o.style(e):o.style;r.annotation().html(A({position:["50%","100%"],html:function(l,u){var c=u.getCoordinate(),f=u.views[0].getCoordinate(),d=f.getCenter(),h=f.getRadius(),v=Math.max(Math.sin(f.startAngle),Math.sin(f.endAngle))*h,p=d.y+v-c.y.start-parseFloat(ne(s,"fontSize",0)),g=c.getRadius()*c.innerRadius*2;$J(l,A({width:g+"px",transform:"translate(-50%, "+p+"px)"},BJ(s)));var m=u.getData();if(o.customHtml)return o.customHtml(l,u,e,m);var y=o.content;return o.formatter&&(y=o.formatter(e,m)),y?rt(y)?y:""+y:"<div></div>"}},Pn(o,["offsetX","offsetY","rotate","style","formatter"])))}})},oR;function rtt(){return oR||(oR=document.createElement("canvas").getContext("2d")),oR}Jf(function(r,t){t===void 0&&(t={});var e=t.fontSize,n=t.fontFamily,i=n===void 0?"sans-serif":n,a=t.fontWeight,o=t.fontStyle,s=t.fontVariant,l=rtt();l.font=[o,a,s,e+"px",i].join(" ");var u=l.measureText(rt(r)?r:"");return u.width},function(r,t){return t===void 0&&(t={}),$n([r],bv(t)).join("")});function Sh(r){return typeof r=="number"&&!isNaN(r)}function ntt(r,t,e){var n=Math.min(t,e),i=Math.max(t,e);return r>=n&&r<=i}function sR(r,t){var e=r.filter(function(a){var o=ne(a,[t]);return Rt(o)&&!isNaN(o)}),n=e.every(function(a){return ne(a,[t])>=0}),i=e.every(function(a){return ne(a,[t])<=0});return n?{min:0}:i?{max:0}:{}}function zJ(r,t,e,n,i){if(i===void 0&&(i=[]),!Array.isArray(r))return{nodes:[],links:[]};var a=[],o={},s=-1;return r.forEach(function(l){var u=l[t],c=l[e],f=l[n],d=Pn(l,i);o[u]||(o[u]=A({id:++s,name:u},d)),o[c]||(o[c]=A({id:++s,name:c},d)),a.push(A({source:o[u].id,target:o[c].id,value:f},d))}),{nodes:Object.values(o).sort(function(l,u){return l.id-u.id}),links:a}}function ng(r,t){var e=va(r,function(n){var i=n[t];return i===null||typeof i=="number"&&!isNaN(i)});return qu(fl.WARN,e.length===r.length,"illegal data existed in chart data."),e}function bf(r){if(Rt(r))return[r,r,r,r];if(qe(r)){var t=r.length;if(t===1)return[r[0],r[0],r[0],r[0]];if(t===2)return[r[0],r[1],r[0],r[1]];if(t===3)return[r[0],r[1],r[2],r[1]];if(t===4)return r}return[0,0,0,0]}function u2(r,t,e){t===void 0&&(t="bottom"),e===void 0&&(e=25);var n=bf(r),i=[t.startsWith("top")?e:0,t.startsWith("right")?e:0,t.startsWith("bottom")?e:0,t.startsWith("left")?e:0];return[n[0]+i[0],n[1]+i[1],n[2]+i[2],n[3]+i[3]]}function lR(r){var t=r.map(function(n){return bf(n)}),e=[0,0,0,0];return t.length>0&&(e=e.map(function(n,i){return t.forEach(function(a,o){n+=t[o][i]}),n})),e}var itt={locale:"en-US"},c2={};function GJ(r,t){c2[r]=t}function f2(r){return{get:function(t,e){return DJ(ne(c2[r],t)||ne(c2[itt.locale],t)||ne(c2["en-US"],t)||t,e)}}}var att={locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}},ott={locale:"zh-CN",general:{increase:"\u589E\u52A0",decrease:"\u51CF\u5C11",root:"\u521D\u59CB"},statistic:{total:"\u603B\u8BA1"},conversionTag:{label:"\u8F6C\u5316\u7387"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"\u603B\u8BA1"}},UJ=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=1,n=function(){return"".concat(e++)};t.default=n});hn(UJ);var uR=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,o=null;return function(){for(var s=this,l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];clearTimeout(o),o=setTimeout(function(){i.apply(s,u)},a)}};t.default=e});hn(uR);var ou=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SensorTabIndex=t.SensorClassName=t.SizeSensorId=void 0;var e="size-sensor-id";t.SizeSensorId=e;var n="size-sensor-object";t.SensorClassName=n;var i="-1";t.SensorTabIndex=i});hn(ou);ou.SensorTabIndex;ou.SensorClassName;ou.SizeSensorId;var cR=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createSensor=void 0;var e=n(uR);function n(a){return a&&a.__esModule?a:{default:a}}var i=function(o){var s=void 0,l=[],u=function(){getComputedStyle(o).position==="static"&&(o.style.position="relative");var p=document.createElement("object");return p.onload=function(){p.contentDocument.defaultView.addEventListener("resize",c),c()},p.style.display="block",p.style.position="absolute",p.style.top="0",p.style.left="0",p.style.height="100%",p.style.width="100%",p.style.overflow="hidden",p.style.pointerEvents="none",p.style.zIndex="-1",p.style.opacity="0",p.setAttribute("class",ou.SensorClassName),p.setAttribute("tabindex",ou.SensorTabIndex),p.type="text/html",o.appendChild(p),p.data="about:blank",p},c=(0,e.default)(function(){l.forEach(function(v){v(o)})}),f=function(p){s||(s=u()),l.indexOf(p)===-1&&l.push(p)},d=function(){s&&s.parentNode&&(s.contentDocument&&s.contentDocument.defaultView.removeEventListener("resize",c),s.parentNode.removeChild(s),s=void 0,l=[])},h=function(p){var g=l.indexOf(p);g!==-1&&l.splice(g,1),l.length===0&&s&&d()};return{element:o,bind:f,destroy:d,unbind:h}};t.createSensor=i});hn(cR);cR.createSensor;var fR=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createSensor=void 0;var e=n(uR);function n(a){return a&&a.__esModule?a:{default:a}}var i=function(o){var s=void 0,l=[],u=(0,e.default)(function(){l.forEach(function(v){v(o)})}),c=function(){var p=new ResizeObserver(u);return p.observe(o),u(),p},f=function(p){s||(s=c()),l.indexOf(p)===-1&&l.push(p)},d=function(){s.disconnect(),l=[],s=void 0},h=function(p){var g=l.indexOf(p);g!==-1&&l.splice(g,1),l.length===0&&s&&d()};return{element:o,bind:f,destroy:d,unbind:h}};t.createSensor=i});hn(fR);fR.createSensor;var dR=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createSensor=void 0;var e=typeof ResizeObserver!="undefined"?fR.createSensor:cR.createSensor;t.createSensor=e});hn(dR);dR.createSensor;var ig=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.removeSensor=t.getSensor=void 0;var e=n(UJ);function n(s){return s&&s.__esModule?s:{default:s}}var i={},a=function(l){var u=l.getAttribute(ou.SizeSensorId);if(u&&i[u])return i[u];var c=(0,e.default)();l.setAttribute(ou.SizeSensorId,c);var f=(0,dR.createSensor)(l);return i[c]=f,f};t.getSensor=a;var o=function(l){var u=l.element.getAttribute(ou.SizeSensorId);l.element.removeAttribute(ou.SizeSensorId),l.destroy(),u&&i[u]&&delete i[u]};t.removeSensor=o});hn(ig);ig.removeSensor;ig.getSensor;var d2=Rr(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ver=t.clear=t.bind=void 0;var e=function(o,s){var l=(0,ig.getSensor)(o);return l.bind(s),function(){l.unbind(s)}};t.bind=e;var n=function(o){var s=(0,ig.getSensor)(o);(0,ig.removeSensor)(s)};t.clear=n;var i="1.0.1";t.ver=i});hn(d2);d2.ver;d2.clear;var stt=d2.bind,VJ="data-chart-source-type",HJ=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],Ar=function(r){Te(t,r);function t(e,n){var i=r.call(this)||this;return i.container=typeof e=="string"?document.getElementById(e):e,i.options=Ze({},i.getDefaultOptions(),n),i.createG2(),i.bindEvents(),i}return t.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},t.prototype.createG2=function(){var e=this.options,n=e.width,i=e.height,a=e.defaultInteractions;this.chart=new GZe(A(A(A(A({container:this.container,autoFit:!1},this.getChartSize(n,i)),{localRefresh:!1}),Pn(this.options,HJ)),{defaultInteractions:a})),this.container.setAttribute(VJ,"G2Plot")},t.prototype.getChartSize=function(e,n){var i=aR(this.container);return{width:e||i.width||400,height:n||i.height||400}},t.prototype.bindEvents=function(){var e=this;this.chart&&this.chart.on("*",function(n){(n==null?void 0:n.type)&&e.emit(n.type,n)})},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},t.prototype.update=function(e){this.updateOption(e),this.render()},t.prototype.updateOption=function(e){this.options=Ze({},this.options,e)},t.prototype.setState=function(e,n,i){i===void 0&&(i=!0);var a=ob(this.chart);G(a,function(o){n(o.getData())&&o.setState(e,i)})},t.prototype.getStates=function(){var e=ob(this.chart),n=[];return G(e,function(i){var a=i.getData(),o=i.getStates();G(o,function(s){n.push({data:a,state:s,geometry:i.geometry,element:i})})}),n},t.prototype.changeData=function(e){this.update({data:e})},t.prototype.changeSize=function(e,n){this.chart.changeSize(e,n)},t.prototype.addAnnotations=function(e){var n=$n(e),i=this.chart.getController("annotation"),a=i.getComponents().map(function(l){return l.extra});i.clear(!0);for(var o=function(l){var u=a[l],c=n.findIndex(function(f){return f.id&&f.id===u.id});c!==-1&&(u=Ze({},u,n[c]),n.splice(c,1)),i.annotation(u)},s=0;s<a.length;s++)o(s);n.forEach(function(l){return i.annotation(l)}),this.chart.render(!0)},t.prototype.removeAnnotations=function(e){var n=this.chart.getController("annotation"),i=n.getComponents().map(function(s){return s.extra});n.clear(!0);for(var a=function(s){var l=i[s];e.find(function(u){return u.id&&u.id===l.id})||n.annotation(l)},o=0;o<i.length;o++)a(o);this.chart.render(!0)},t.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(VJ)},t.prototype.execAdaptor=function(){var e=this.getSchemaAdaptor(),n=this.options,i=n.padding,a=n.appendPadding;this.chart.padding=i,this.chart.appendPadding=a,e({chart:this.chart,options:this.options})},t.prototype.triggerResize=function(){this.chart.forceFit()},t.prototype.bindSizeSensor=function(){var e=this;if(!this.unbind){var n=this.options.autoFit,i=n===void 0?!0:n;i&&(this.unbind=stt(this.container,function(){var a=aR(e.container),o=a.width,s=a.height;(o!==e.chart.width||s!==e.chart.height)&&e.triggerResize()}))}},t.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},t}(fm),Xo=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"];function h2(){return typeof window=="object"?window==null?void 0:window.devicePixelRatio:2}function hR(r,t){t===void 0&&(t=r);var e=document.createElement("canvas"),n=h2();e.width=r*n,e.height=t*n,e.style.width=r+"px",e.style.height=t+"px";var i=e.getContext("2d");return i.scale(n,n),e}function vR(r,t,e,n){n===void 0&&(n=e);var i=t.backgroundColor,a=t.opacity;r.globalAlpha=a,r.fillStyle=i,r.beginPath(),r.fillRect(0,0,e,n),r.closePath()}function WJ(r,t,e){var n=r+t;return e?n*2:n}function jJ(r,t){var e=t?[[r*(1/4),r*(1/4)],[r*(3/4),r*(3/4)]]:[[r*(1/2),r*(1/2)]];return e}function pR(r,t){var e=t*Math.PI/180,n={a:Math.cos(e)*(1/r),b:Math.sin(e)*(1/r),c:-Math.sin(e)*(1/r),d:Math.cos(e)*(1/r),e:0,f:0};return n}var ltt={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function utt(r,t,e,n){var i=t.size,a=t.fill,o=t.lineWidth,s=t.stroke,l=t.fillOpacity;r.beginPath(),r.globalAlpha=l,r.fillStyle=a,r.strokeStyle=s,r.lineWidth=o,r.arc(e,n,i/2,0,2*Math.PI,!1),r.fill(),o&&r.stroke(),r.closePath()}function ctt(r){var t=Ze({},ltt,r),e=t.size,n=t.padding,i=t.isStagger,a=t.rotation,o=WJ(e,n,i),s=jJ(o,i),l=hR(o,o),u=l.getContext("2d");vR(u,t,o);for(var c=0,f=s;c<f.length;c++){var d=f[c],h=d[0],v=d[1];utt(u,t,h,v)}var p=u.createPattern(l,"repeat");if(p){var g=h2(),m=pR(g,a);p.setTransform(m)}return p}var ftt={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function dtt(r,t,e){var n=t.stroke,i=t.lineWidth,a=t.strokeOpacity,o=new Path2D(e);r.globalAlpha=a,r.lineCap="square",r.strokeStyle=i?n:"transparent",r.lineWidth=i,r.stroke(o)}function htt(r){var t=Ze({},ftt,r),e=t.spacing,n=t.rotation,i=t.lineWidth,a=e+i||1,o=e+i||1,s=`
            M 0 0 L `+a+` 0
            M 0 `+o+" L "+a+" "+o+`
            `,l=hR(a,o),u=l.getContext("2d");vR(u,t,a,o),dtt(u,t,s);var c=u.createPattern(l,"repeat");if(c){var f=h2(),d=pR(f,n);c.setTransform(d)}return c}var vtt={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function ptt(r,t,e,n){var i=t.stroke,a=t.size,o=t.fill,s=t.lineWidth,l=t.fillOpacity;r.globalAlpha=l,r.strokeStyle=i,r.lineWidth=s,r.fillStyle=o,r.strokeRect(e-a/2,n-a/2,a,a),r.fillRect(e-a/2,n-a/2,a,a)}function gtt(r){var t=Ze({},vtt,r),e=t.size,n=t.padding,i=t.isStagger,a=t.rotation,o=WJ(e,n,i),s=jJ(o,i),l=hR(o,o),u=l.getContext("2d");vR(u,t,o);for(var c=0,f=s;c<f.length;c++){var d=f[c],h=d[0],v=d[1];ptt(u,t,h,v)}var p=u.createPattern(l,"repeat");if(p){var g=h2(),m=pR(g,a);p.setTransform(m)}return p}function mtt(r){var t=r.type,e=r.cfg,n;switch(t){case"dot":n=ctt(e);break;case"line":n=htt(e);break;case"square":n=gtt(e);break}return n}function vs(r){var t=this;return function(e){var n,i=e.options,a=e.chart,o=i.pattern;if(!o)return e;var s=function(l){for(var u,c,f,d=[],h=1;h<arguments.length;h++)d[h-1]=arguments[h];var v=a.getTheme().defaultColor,p=v,g=(c=(u=a.geometries)===null||u===void 0?void 0:u[0])===null||c===void 0?void 0:c.getAttribute("color");if(g){var m=g.getFields()[0],y=ne(l,m);p=jo.getMappingValue(g,y,((f=g.values)===null||f===void 0?void 0:f[0])||v)}var b=o;typeof o=="function"&&(b=o.call(t,l,p)),b instanceof CanvasPattern||(b=mtt(Ze({},{cfg:{backgroundColor:p}},b)));var x=i[r];return A(A({},typeof x=="function"?x.call.apply(x,$n([t,l],d)):x||{}),{fill:b||p})};return Ze({},e,{options:(n={},n[r]=s,n)})}}function lb(r){var t=r.chart,e=r.options,n=e.legend,i=e.colorField,a=e.seriesField;return n===!1?t.legend(!1):(i||a)&&t.legend(i||a,n),r}function Ta(r){var t=r.chart,e=r.options,n=e.tooltip;return n!==void 0&&t.tooltip(n),r}function Kn(r){var t=r.chart,e=r.options,n=e.interactions;return G(n,function(i){i.enable===!1?t.removeInteraction(i.type):t.interaction(i.type,i.cfg||{})}),r}function Dn(r){var t=r.chart,e=r.options,n=e.animation;return typeof n=="boolean"?t.animate(n):t.animate(!0),G(t.geometries,function(i){i.animate(n)}),r}function yn(r){var t=r.chart,e=r.options,n=e.theme;return n&&t.theme(n),r}function xf(r){var t=r.chart,e=r.options,n=e.state;return n&&G(t.geometries,function(i){i.state(n)}),r}function v2(r){var t=r.chart,e=r.options,n=e.slider;return t.option("slider",n),r}function ytt(r){var t=r.chart,e=r.options,n=e.scrollbar;return t.option("scrollbar",n),r}function Ai(r,t){return function(e){var n=e.chart,i=e.options,a={};return G(r,function(o,s){a[s]=Pn(o,Xo)}),a=Ze({},t,i.meta,a),n.scale(a),e}}function Mi(r){return function(t){var e=t.chart,n=t.options,i=e.getController("annotation");return G($n(n.annotations||[],r||[]),function(a){i.annotation(a)}),t}}function Ch(r){var t=r.chart,e=r.options,n=e.yAxis,i=e.limitInPlot,a=i;return Kr(n)&&Je(i)&&(Object.values(Pn(n,["min","max","minLimit","maxLimit"])).some(function(o){return!Je(o)})?a=!0:a=!1),t.limitInPlot=a,r}function Us(r,t){if(r===!1)return{fields:!1};var e=ne(r,"fields"),n=ne(r,"formatter");return n&&!e&&(e=t),{fields:e,formatter:n}}function p2(r,t){var e=r.type,n=r.xField,i=r.yField,a=r.colorField,o=r.shapeField,s=r.sizeField,l=r.styleField,u=r.rawFields,c=u===void 0?[]:u,f=[];if(t==="color")f=$n([a||n],c);else if(t==="shape")f=$n([o||n],c);else if(t==="size")f=$n([s||n],c);else{f=$n([n,i,a,o,s,l],c);var d=["x","y","color","shape","size","style"].indexOf(t),h=f[d];f.splice(d,1),f.unshift(h)}var v=yc(f.filter(function(g){return!!g})),p=e==="line"&&[n,i].includes(v.join("*"))?"":v.join("*");return{mappingFields:v,tileMappingField:p}}function ag(r,t){if(!!t)return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i={};return r.forEach(function(a,o){i[a]=e[o]}),delete i.undefined,t(i)}}function qo(r){var t=r.chart,e=r.options,n=e.type,i=e.args,a=e.mapping,o=e.xField,s=e.yField,l=e.colorField,u=e.shapeField,c=e.sizeField,f=e.tooltipFields,d=e.label,h=e.state,v=e.customInfo;if(!a)return r;var p=a.color,g=a.shape,m=a.size,y=a.style,b=a.tooltip,x=t[n](i).position(o+"*"+s);if(rt(p))l?x.color(l,p):x.color(p);else if(Vt(p)){var w=p2(e,"color"),S=w.mappingFields,C=w.tileMappingField;x.color(C,ag(S,p))}else l&&x.color(l,p);if(rt(g))u?x.shape(u,[g]):x.shape(g);else if(Vt(g)){var _=p2(e,"shape"),S=_.mappingFields,C=_.tileMappingField;x.shape(C,ag(S,g))}else u&&x.shape(u,g);if(Rt(m))c?x.size(c,m):x.size(m);else if(Vt(m)){var T=p2(e,"size"),S=T.mappingFields,C=T.tileMappingField;x.size(C,ag(S,m))}else c&&x.size(c,m);if(Vt(y)){var E=p2(e,"style"),S=E.mappingFields,C=E.tileMappingField;x.style(C,ag(S,y))}else Kr(y)&&x.style(y);if(f===!1?x.tooltip(!1):oo(f)||x.tooltip(f.join("*"),ag(f,b)),d===!1)x.label(!1);else if(d){var M=d.callback,k=d.fields,P=Lr(d,["callback","fields"]);x.label({fields:k||[s],callback:M,cfg:_a(P)})}return h&&x.state(h),v&&x.customInfo(v),[o,s].filter(function(F){return F!==l}).forEach(function(F){t.legend(F,!1)}),A(A({},r),{ext:{geometry:x}})}function g2(r){var t=r.options,e=t.area,n=t.xField,i=t.yField,a=t.seriesField,o=t.smooth,s=t.tooltip,l=Us(s,[n,i,a]),u=l.fields,c=l.formatter;return e?qo(Ze({},r,{options:{type:"area",colorField:a,tooltipFields:u,mapping:A({shape:o?"smooth":"area",tooltip:c},e)}})):r}function og(r){var t=r.options,e=t.line,n=t.stepType,i=t.xField,a=t.yField,o=t.seriesField,s=t.smooth,l=t.connectNulls,u=t.tooltip,c=Us(u,[i,a,o]),f=c.fields,d=c.formatter;return e?qo(Ze({},r,{options:{type:"line",colorField:o,tooltipFields:f,mapping:Mt({shape:n||(s?"smooth":"line"),tooltip:d},e),args:{connectNulls:l}}})):r}function ps(r){var t=r.options,e=t.point,n=t.xField,i=t.yField,a=t.seriesField,o=t.sizeField,s=t.shapeField,l=t.tooltip,u=Us(l,[n,i,a,o,s]),c=u.fields,f=u.formatter;return e?qo(Ze({},r,{options:{type:"point",colorField:a,shapeField:s,tooltipFields:c,mapping:A({tooltip:f},e)}})):r}function btt(r){var t=r.chart,e=r.options,n=r.ext,i=e.seriesField,a=e.isGroup,o=e.isStack,s=e.marginRatio,l=e.widthRatio,u=e.groupField,c=e.theme,f=[];if(i&&(a&&f.push({type:"dodge",dodgeBy:u||i,marginRatio:s}),o&&f.push({type:"stack",marginRatio:s})),f.length&&(n==null?void 0:n.geometry)){var d=n==null?void 0:n.geometry;d.adjust(f)}return Je(l)||t.theme(Ze({},Kr(c)?c:Z0(c),{columnWidthRatio:l})),r}function ro(r){var t=r.options,e=t.xField,n=t.yField,i=t.interval,a=t.seriesField,o=t.tooltip,s=t.minColumnWidth,l=t.maxColumnWidth,u=t.columnBackground,c=t.dodgePadding,f=t.intervalPadding,d=Us(o,[e,n,a]),h=d.fields,v=d.formatter,p=(i?qo(Ze({},r,{options:{type:"interval",colorField:a,tooltipFields:h,mapping:A({tooltip:v},i),args:{dodgePadding:c,intervalPadding:f,minColumnWidth:s,maxColumnWidth:l,background:u}}})):r).ext;return btt(A(A({},r),{ext:p}))}function m2(r){var t=r.options,e=t.polygon,n=t.xField,i=t.yField,a=t.seriesField,o=t.tooltip,s=Us(o,[n,i,a]),l=s.fields,u=s.formatter;return e?qo(Ze({},r,{options:{type:"polygon",colorField:a,tooltipFields:l,mapping:A({tooltip:u},e)}})):r}function YJ(r){var t=r.options,e=t.edge,n=t.xField,i=t.yField,a=t.seriesField,o=t.tooltip,s=Us(o,[n,i,a]),l=s.fields,u=s.formatter;return e?qo(Ze({},r,{options:{type:"edge",colorField:a,tooltipFields:l,mapping:A({tooltip:u},e)}})):r}function gR(r){var t=r.options,e=t.schema,n=t.xField,i=t.yField,a=t.seriesField,o=t.tooltip,s=Us(o,[n,i,a]),l=s.fields,u=s.formatter;return e?qo(Ze({},r,{options:{type:"schema",colorField:a,tooltipFields:l,mapping:A({tooltip:u},e)}})):r}function xtt(r){var t=r.options,e=t.violin,n=t.xField,i=t.yField,a=t.seriesField,o=t.sizeField,s=t.tooltip,l=Us(s,[n,i,a,o]),u=l.fields,c=l.formatter;return e?qo(Ze({},r,{options:{type:"violin",colorField:a,tooltipFields:u,mapping:A({tooltip:c},e)}})):r}function wtt(r){var t=r.chart,e=r.options,n=e.data,i=e.color,a=e.lineStyle,o=e.lineShape,s=e.point,l=e.area,u=e.seriesField,c=s==null?void 0:s.state;t.data(n);var f=Ze({},r,{options:{shapeField:u,line:{color:i,style:a,shape:o},point:s&&A({color:i,shape:"circle"},s),area:l&&A({color:i},l),label:void 0}}),d=Ze({},f,{options:{tooltip:!1,state:c}}),h=Ze({},f,{options:{tooltip:!1,state:c}});return og(f),ps(d),g2(h),r}function y2(r){var t,e,n=r.options,i=n.xAxis,a=n.yAxis,o=n.xField,s=n.yField,l=n.data;return xr(Ai((t={},t[o]=i,t[s]=a,t),(e={},e[o]={type:"cat"},e[s]=sR(l,s),e)))(r)}function Stt(r){var t=r.chart,e=r.options,n=e.reflect;if(n){var i=n;qe(i)||(i=[i]);var a=i.map(function(o){return["reflect",o]});t.coordinate({type:"rect",actions:a})}return r}function XJ(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return n===!1?t.axis(a,!1):t.axis(a,n),i===!1?t.axis(o,!1):t.axis(o,i),r}function qJ(r){var t=r.chart,e=r.options,n=e.legend,i=e.seriesField;return n&&i?t.legend(i,n):n===!1&&t.legend(!1),r}function Ctt(r){var t=r.chart,e=r.options,n=e.label,i=e.yField,a=to(t,"line");if(!n)a.label(!1);else{var o=n.callback,s=Lr(n,["callback"]);a.label({fields:[i],callback:o,cfg:A({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},_a(s))})}return r}function Ett(r){var t=r.chart,e=r.options,n=e.isStack;return n&&G(t.geometries,function(i){i.adjust("stack")}),r}function KJ(r){return xr(wtt,y2,Ett,yn,Stt,XJ,qJ,Ta,Ctt,v2,Kn,Dn,Mi(),Ch)(r)}var _tt=Ze({},Ar.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left"},isStack:!1}),Ttt=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.active=function(){var e=this.getView(),n=this.context.event;if(n.data){var i=n.data.items,a=e.geometries.filter(function(o){return o.type==="point"});G(a,function(o){G(o.elements,function(s){var l=K_(i,function(u){return u.data===s.data})!==-1;s.setState("active",l)})})}},t.prototype.reset=function(){var e=this.getView(),n=e.geometries.filter(function(i){return i.type==="point"});G(n,function(i){G(i.elements,function(a){a.setState("active",!1)})})},t.prototype.getView=function(){return this.context.view},t}(ui);gr("marker-active",Ttt);kr("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var Att=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="line",e}return t.getDefaultOptions=function(){return _tt},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this,i=n.chart,a=n.options;y2({chart:i,options:a}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return KJ},t}(Ar);function ZJ(r,t,e,n){var i=Wa(r,function(a,o){var s=o[e],l=a.has(s)?a.get(s):0,u=o[t];return l=Sh(u)?l+u:l,a.set(s,l),a},new Map);return Gn(r,function(a){var o,s=a[t],l=a[e],u=Sh(s)?s/i.get(l):0;return A(A({},a),(o={},o[n]=u,o))})}function Mtt(r,t,e,n){var i=Wa(r,function(a,o){var s=Wa(e,function(c,f){return""+c+o[f]},""),l=a.has(s)?a.get(s):0,u=o[t];return l=Sh(u)?l+u:l,a.set(s,l),a},new Map);return Gn(r,function(a){var o,s=a[t],l=Wa(e,function(c,f){return""+c+a[f]},""),u=Sh(s)?s/i.get(l):0;return A(A({},a),(o={},o[n]=u,o))})}function ub(r,t,e,n,i){return i?ZJ(r,t,e,n):r}function ktt(r){var t=r.chart,e=r.options,n=e.data,i=e.areaStyle,a=e.color,o=e.point,s=e.line,l=e.isPercent,u=e.xField,c=e.yField,f=e.tooltip,d=e.seriesField,h=e.startOnZero,v=o==null?void 0:o.state,p=ub(n,c,u,c,l);t.data(p);var g=l?A({formatter:function(x){return{name:x[d]||x[u],value:(Number(x[c])*100).toFixed(2)+"%"}}},f):f,m=Ze({},r,{options:{area:{color:a,style:i},line:s&&A({color:a},s),point:o&&A({color:a},o),tooltip:g,label:void 0,args:{startOnZero:h}}}),y=Ze({options:{line:{size:2}}},m,{options:{sizeField:d,tooltip:!1}}),b=Ze({},m,{options:{tooltip:!1,state:v}});return g2(m),og(y),ps(b),r}function Itt(r){var t=r.chart,e=r.options,n=e.label,i=e.yField,a=to(t,"area");if(!n)a.label(!1);else{var o=n.callback,s=Lr(n,["callback"]);a.label({fields:[i],callback:o,cfg:A({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},_a(s))})}return r}function Ptt(r){var t=r.chart,e=r.options,n=e.isStack,i=e.isPercent,a=e.seriesField;return(i||n)&&a&&G(t.geometries,function(o){o.adjust("stack")}),r}function QJ(r){return xr(yn,vs("areaStyle"),ktt,y2,Ptt,XJ,qJ,Ta,Itt,v2,Mi(),Kn,Dn,Ch)(r)}var Dtt=Ze({},Ar.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left"}}),Rtt=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="area",e}return t.getDefaultOptions=function(){return Dtt},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this.options,i=n.isPercent,a=n.xField,o=n.yField,s=this,l=s.chart,u=s.options;y2({chart:l,options:u}),this.chart.changeData(ub(e,o,a,o,i))},t.prototype.getSchemaAdaptor=function(){return QJ},t}(Ar);function JJ(r,t){return!Rt(r)||!Rt(t)?"-":r===t?"100%":r===0?"\u221E":t===0?"-\u221E":(100*t/r).toFixed(2)+"%"}function Ott(r,t){return Ze({size:t?32:80,spacing:t?8:12,offset:t?32:0,arrow:r.arrow!==!1&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:r.text!==!1&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:JJ}},r)}function b2(r,t){return Gn(t.getModel().points,function(e){return r.convertPoint(e)})}function Ltt(r,t,e){var n=r.view,i=r.geometry,a=r.group,o=r.options,s=r.horizontal,l=o.offset,u=o.size,c=o.arrow,f=n.getCoordinate(),d=b2(f,t)[s?3:0],h=b2(f,e)[s?0:3],v=h.y-d.y,p=h.x-d.x;if(typeof c!="boolean"){var g=c.headSize,m=o.spacing,y;s?(p-g)/2<m?(m=Math.max(1,(p-g)/2),y=[[d.x+m,d.y-l],[d.x+m,d.y-l-u],[h.x-m,h.y-l-u/2]]):y=[[d.x+m,d.y-l],[d.x+m,d.y-l-u],[h.x-m-g,h.y-l-u],[h.x-m,h.y-l-u/2],[h.x-m-g,h.y-l]]:(v-g)/2<m?(m=Math.max(1,(v-g)/2),y=[[d.x+l,d.y+m],[d.x+l+u,d.y+m],[h.x+l+u/2,h.y-m]]):y=[[d.x+l,d.y+m],[d.x+l+u,d.y+m],[h.x+l+u,h.y-m-g],[h.x+l+u/2,h.y-m],[h.x+l,h.y-m-g]],a.addShape("polygon",{id:n.id+"-conversion-tag-arrow-"+i.getElementId(t.getModel().mappingData),name:"conversion-tag-arrow",origin:{element:t,nextElement:e},attrs:A(A({},c.style||{}),{points:y})})}}function Ftt(r,t,e){var n,i,a,o=r.view,s=r.geometry,l=r.group,u=r.options,c=r.field,f=r.horizontal,d=u.offset,h=u.size;if(typeof u.text!="boolean"){var v=o.getCoordinate(),p=((n=u.text)===null||n===void 0?void 0:n.formatter)&&((i=u.text)===null||i===void 0?void 0:i.formatter(t.getData()[c],e.getData()[c])),g=b2(v,t)[f?3:0],m=b2(v,e)[f?0:3],y=l.addShape("text",{id:o.id+"-conversion-tag-text-"+s.getElementId(t.getModel().mappingData),name:"conversion-tag-text",origin:{element:t,nextElement:e},attrs:A(A({},((a=u.text)===null||a===void 0?void 0:a.style)||{}),{text:p,x:f?(g.x+m.x)/2:g.x+d+h/2,y:f?g.y-d-h/2:(g.y+m.y)/2})});if(f){var b=m.x-g.x,x=y.getBBox().width;if(x>b){var w=x/p.length,S=Math.max(1,Math.ceil(b/w)-1),C=p.slice(0,S)+"...";y.attr("text",C)}}}}function Ntt(r,t,e){Ltt(r,t,e),Ftt(r,t,e)}function Btt(r,t,e){return t===void 0&&(t=!0),e===void 0&&(e=!1),function(n){var i=n.options,a=n.chart,o=i.conversionTag,s=i.theme;return o&&!e&&(a.theme(Ze({},Kr(s)?s:Z0(s),{columnWidthRatio:1/3})),a.annotation().shape({render:function(l,u){var c=l.addGroup({id:a.id+"-conversion-tag-group",name:"conversion-tag-group"}),f=Ts(a.geometries,function(v){return v.type==="interval"}),d={view:u,geometry:f,group:c,field:r,horizontal:t,options:Ott(o,t)},h=t?f.elements:f.elements.slice().reverse();G(h,function(v,p){p>0&&Ntt(d,h[p-1],v)})}})),n}}var Eh={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},mR=function(r,t){return r==="hover"?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:t}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:t}]}]};kr(Eh.hover,{start:mR(Eh.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]});kr(Eh.click,{start:mR(Eh.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});function $tt(r){return r===void 0&&(r=!1),function(t){var e=t.chart,n=t.options,i=n.connectedArea,a=function(){e.removeInteraction(Eh.hover),e.removeInteraction(Eh.click)};if(!r&&i){var o=i.trigger||"hover";a(),e.interaction(Eh[o],{start:mR(o,i.style)})}else a();return t}}var ztt=10,Gtt=5,Utt={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}},Vtt=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.buttonGroup=null,e.buttonCfg=A({name:"button"},Utt),e}return t.prototype.getButtonCfg=function(){var e=this.context.view,n=ne(e,["interactions","filter-action","cfg","buttonConfig"]);return Ze(this.buttonCfg,n,this.cfg)},t.prototype.drawButton=function(){var e=this.getButtonCfg(),n=this.context.view.foregroundGroup.addGroup({name:e.name}),i=this.drawText(n);this.drawBackground(n,i.getBBox()),this.buttonGroup=n},t.prototype.drawText=function(e){var n,i=this.getButtonCfg();return e.addShape({type:"text",name:"button-text",attrs:A({text:i.text},(n=i.textStyle)===null||n===void 0?void 0:n.default)})},t.prototype.drawBackground=function(e,n){var i,a=this.getButtonCfg(),o=bf(a.padding),s=e.addShape({type:"rect",name:"button-rect",attrs:A({x:n.x-o[3],y:n.y-o[0],width:n.width+o[1]+o[3],height:n.height+o[0]+o[2]},(i=a.buttonStyle)===null||i===void 0?void 0:i.default)});return s.toBack(),e.on("mouseenter",function(){var l;s.attr((l=a.buttonStyle)===null||l===void 0?void 0:l.active)}),e.on("mouseleave",function(){var l;s.attr((l=a.buttonStyle)===null||l===void 0?void 0:l.default)}),s},t.prototype.resetPosition=function(){var e=this.context.view,n=e.getCoordinate(),i=n.convert({x:1,y:1}),a=this.buttonGroup,o=a.getBBox(),s=jo.transform(null,[["t",i.x-o.width-ztt,i.y+o.height+Gtt]]);a.setMatrix(s)},t.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},t.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},t.prototype.destroy=function(){var e=this.buttonGroup;e&&e.remove(),r.prototype.destroy.call(this)},t}(ui);gr("brush-reset-button",Vtt,{name:"brush-reset-button"});kr("filter-action",{});function Ku(r){return r.isInPlot()}function _h(r,t,e){var n=t||"rect";switch(r){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Ku,action:["brush:start",n+"-mask:start",n+"-mask:show"],arg:[null,{maskStyle:e==null?void 0:e.style}]}],processing:[{trigger:"mousemove",isEnable:Ku,action:[n+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Ku,action:["brush:filter","brush:end",n+"-mask:end",n+"-mask:hide","brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(i){return!i.isInShape("mask")},action:[n+"-mask:start",n+"-mask:show"],arg:[{maskStyle:e==null?void 0:e.style}]},{trigger:"mask:dragstart",action:[n+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[n+"-mask:resize"]},{trigger:"mask:drag",action:[n+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[n+"-mask:end"]},{trigger:"mask:dragend",action:[n+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(i){return!i.isInPlot()},action:["element-range-highlight:clear",n+"-mask:end",n+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",n+"-mask:hide"]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Ku,action:["brush-x:start",n+"-mask:start",n+"-mask:show"],arg:[null,{maskStyle:e==null?void 0:e.style}]}],processing:[{trigger:"mousemove",isEnable:Ku,action:[n+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Ku,action:["brush-x:filter","brush-x:end",n+"-mask:end",n+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(i){return!i.isInShape("mask")},action:[n+"-mask:start",n+"-mask:show"],arg:[{maskStyle:e==null?void 0:e.style}]},{trigger:"mask:dragstart",action:[n+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[n+"-mask:resize"]},{trigger:"mask:drag",action:[n+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[n+"-mask:end"]},{trigger:"mask:dragend",action:[n+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(i){return!i.isInPlot()},action:["element-range-highlight:clear",n+"-mask:end",n+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",n+"-mask:hide"]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Ku,action:["brush-y:start",n+"-mask:start",n+"-mask:show"],arg:[null,{maskStyle:e==null?void 0:e.style}]}],processing:[{trigger:"mousemove",isEnable:Ku,action:[n+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Ku,action:["brush-y:filter","brush-y:end",n+"-mask:end",n+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(i){return!i.isInShape("mask")},action:[n+"-mask:start",n+"-mask:show"],arg:[{maskStyle:e==null?void 0:e.style}]},{trigger:"mask:dragstart",action:[n+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[n+"-mask:resize"]},{trigger:"mask:drag",action:[n+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[n+"-mask:end"]},{trigger:"mask:dragend",action:[n+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(i){return!i.isInPlot()},action:["element-range-highlight:clear",n+"-mask:end",n+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",n+"-mask:hide"]}]};default:return{}}}kr("brush",_h("brush"));kr("brush-highlight",_h("brush-highlight"));kr("brush-x",_h("brush-x","x-rect"));kr("brush-y",_h("brush-y","y-rect"));kr("brush-x-highlight",_h("brush-x-highlight","x-rect"));kr("brush-y-highlight",_h("brush-y-highlight","y-rect"));var eee=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function tee(r){var t=r.options,e=t.brush,n=va(t.interactions||[],function(i){return eee.indexOf(i.type)===-1});return(e==null?void 0:e.enabled)&&(eee.forEach(function(i){var a,o=!1;switch(e.type){case"x-rect":o=i===(e.action==="highlight"?"brush-x-highlight":"brush-x");break;case"y-rect":o=i===(e.action==="highlight"?"brush-y-highlight":"brush-y");break;default:o=i===(e.action==="highlight"?"brush-highlight":"brush");break}var s={type:i,enable:o};(((a=e.mask)===null||a===void 0?void 0:a.style)||e.type)&&(s.cfg=_h(i,e.type,e.mask)),n.push(s)}),(e==null?void 0:e.action)!=="highlight"&&n.push({type:"filter-action",cfg:{buttonConfig:e.button}})),Ze({},r,{options:{interactions:n}})}function Htt(r){var t=r.options,e=t.legend,n=t.seriesField,i=t.isStack;return n?e!==!1&&(e=A({position:i?"right-top":"top-left"},e)):e=!1,r.options.legend=e,r}function Wtt(r){var t=r.chart,e=r.options,n=e.data,i=e.columnStyle,a=e.color,o=e.columnWidthRatio,s=e.isPercent,l=e.isGroup,u=e.isStack,c=e.xField,f=e.yField,d=e.seriesField,h=e.groupField,v=e.tooltip,p=e.shape,g=s&&l&&u?Mtt(n,f,[c,h],f):ub(n,f,c,f,s),m=[];u&&d&&!l?g.forEach(function(x){var w=m.find(function(S){return S[c]===x[c]&&S[d]===x[d]});w?w[f]+=x[f]||0:m.push(A({},x))}):m=g,t.data(m);var y=s?A({formatter:function(x){return{name:l&&u?x[d]+" - "+x[h]:x[d]||x[c],value:(Number(x[f])*100).toFixed(2)+"%"}}},v):v,b=Ze({},r,{options:{data:m,widthRatio:o,tooltip:y,interval:{shape:p,style:i,color:a}}});return ro(b),b}function yR(r){var t,e,n=r.options,i=n.xAxis,a=n.yAxis,o=n.xField,s=n.yField,l=n.data,u=n.isPercent,c=u?{max:1,min:0,minLimit:0,maxLimit:1}:{};return xr(Ai((t={},t[o]=i,t[s]=a,t),(e={},e[o]={type:"cat"},e[s]=A(A({},sR(l,s)),c),e)))(r)}function jtt(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return n===!1?t.axis(a,!1):t.axis(a,n),i===!1?t.axis(o,!1):t.axis(o,i),r}function Ytt(r){var t=r.chart,e=r.options,n=e.legend,i=e.seriesField;return n&&i?t.legend(i,n):n===!1&&t.legend(!1),r}function Xtt(r){var t=r.chart,e=r.options,n=e.label,i=e.yField,a=e.isRange,o=to(t,"interval");if(!n)o.label(!1);else{var s=n.callback,l=Lr(n,["callback"]);o.label({fields:[i],callback:s,cfg:A({layout:(l==null?void 0:l.position)?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},_a(a?A({content:function(u){var c;return(c=u[i])===null||c===void 0?void 0:c.join("-")}},l):l))})}return r}function qtt(r){var t=r.chart,e=r.options,n=e.tooltip,i=e.isGroup,a=e.isStack,o=e.groupField,s=e.data,l=e.xField,u=e.yField,c=e.seriesField;if(n===!1)t.tooltip(!1);else{var f=n;if(i&&a){var d=(f==null?void 0:f.formatter)||function(h){return{name:h[c]+" - "+h[o],value:h[u]}};f=A(A({},f),{customItems:function(h){var v=[];return G(h,function(p){var g=va(s,function(m){return q_(m,Pn(p.data,[l,c]))});g.forEach(function(m){v.push(A(A(A({},p),{value:m[u],data:m,mappingData:{_origin:m}}),d(m)))})}),v}})}t.tooltip(f)}return r}function x2(r,t){t===void 0&&(t=!1);var e=r.options,n=e.seriesField;return xr(Htt,yn,vs("columnStyle"),xf,Wtt,yR,jtt,Ytt,qtt,v2,ytt,Xtt,tee,Kn,Dn,Mi(),Btt(e.yField,!t,!!n),$tt(!e.isStack),Ch)(r)}var Ktt=Ze({},Ar.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]}),Ztt=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="column",e}return t.getDefaultOptions=function(){return Ktt},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this.options,i=n.yField,a=n.xField,o=n.isPercent,s=this,l=s.chart,u=s.options;yR({chart:l,options:u}),this.chart.changeData(ub(e,i,a,i,o))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return x2},t}(Ar);function ree(r){return r&&r.slice().reverse()}function nee(r){var t=r.chart,e=r.options,n=e.xField,i=e.yField,a=e.xAxis,o=e.yAxis,s=e.barStyle,l=e.barWidthRatio,u=e.label,c=e.data,f=e.seriesField,d=e.isStack,h=e.minBarWidth,v=e.maxBarWidth;u&&!u.position&&(u.position="left",u.layout||(u.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]));var p=e.legend;f?p!==!1&&(p=A({position:d?"top-left":"right-top",reversed:!d},p||{})):p=!1,r.options.legend=p;var g=e.tooltip;return f&&g!==!1&&(g=A({reversed:!d},g||{})),r.options.tooltip=g,t.coordinate().transpose(),x2({chart:t,options:A(A({},e),{label:u,xField:i,yField:n,xAxis:o,yAxis:a,columnStyle:s,columnWidthRatio:l,minColumnWidth:h,maxColumnWidth:v,columnBackground:e.barBackground,data:ree(c)})},!0)}var Qtt=Ze({},Ar.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]}),Jtt=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="bar",e}return t.getDefaultOptions=function(){return Qtt},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this,i=n.chart,a=n.options,o=a.xField,s=a.yField,l=a.isPercent,u=A(A({},a),{xField:s,yField:o});yR({chart:i,options:u}),i.changeData(ub(ree(e),o,s,o,l))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return nee},t}(Ar),iee=Ze({},Ar.getDefaultOptions(),{legend:{position:"right"},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}});function ert(r,t){var e=null;return G(r,function(n){typeof n[t]=="number"&&(e+=n[t])}),e}function trt(r,t){var e;switch(r){case"inner":return e="-30%",rt(t)&&t.endsWith("%")?parseFloat(t)*.01>0?e:t:t<0?t:e;case"outer":return e=12,rt(t)&&t.endsWith("%")?parseFloat(t)*.01<0?e:t:t>0?t:e;default:return t}}function w2(r,t){return Nx(ng(r,t),function(e){return e[t]===0})}var rrt=[1,0,0,0,1,0,0,0,1];function bR(r,t){var e=$n(t||rrt);return jo.transform(e,r)}var nrt=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getActiveElements=function(){var e=jo.getDelegationObject(this.context);if(e){var n=this.context.view,i=e.component,a=e.item,o=i.get("field");if(o){var s=n.geometries[0].elements;return s.filter(function(l){return l.getModel().data[o]===a.value})}}return[]},t.prototype.getActiveElementLabels=function(){var e=this.context.view,n=this.getActiveElements(),i=e.geometries[0].labelsContainer.getChildren();return i.filter(function(a){return n.find(function(o){return ri(o.getData(),a.get("data"))})})},t.prototype.transfrom=function(e){e===void 0&&(e=7.5);var n=this.getActiveElements(),i=this.getActiveElementLabels();n.forEach(function(a,o){var s=i[o],l=a.geometry.coordinate;if(l.isPolar&&l.isTransposed){var u=jo.getAngle(a.getModel(),l),c=u.startAngle,f=u.endAngle,d=(c+f)/2,h=e,v=h*Math.cos(d),p=h*Math.sin(d);a.shape.setMatrix(bR([["t",v,p]])),s.setMatrix(bR([["t",v,p]]))}})},t.prototype.active=function(){this.transfrom()},t.prototype.reset=function(){this.transfrom(0)},t}(ui);function irt(r){var t=r.event,e,n=t.target;return n&&(e=n.get("element")),e}var art=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getAnnotations=function(e){var n=e||this.context.view;return n.getController("annotation").option},t.prototype.getInitialAnnotation=function(){return this.initialAnnotation},t.prototype.init=function(){var e=this,n=this.context.view;n.removeInteraction("tooltip"),n.on("afterchangesize",function(){var i=e.getAnnotations(n);e.initialAnnotation=i})},t.prototype.change=function(e){var n=this.context,i=n.view,a=n.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var o=ne(a,["data","data"]);if(a.type.match("legend-item")){var s=jo.getDelegationObject(this.context),l=i.getGroupedFields()[0];if(s&&l){var u=s.item;o=i.getData().find(function(h){return h[l]===u.value})}}if(o){var c=ne(e,"annotations",[]),f=ne(e,"statistic",{});i.getController("annotation").clear(!0),G(c,function(h){typeof h=="object"&&i.annotation()[h.type](h)}),l2(i,{statistic:f,plotType:"pie"},o),i.render(!0)}var d=irt(this.context);d&&d.shape.toFront()},t.prototype.reset=function(){var e=this.context.view,n=e.getController("annotation");n.clear(!0);var i=this.getInitialAnnotation();G(i,function(a){e.annotation()[a.type](a)}),e.render(!0)},t}(ui),aee="pie-statistic";gr(aee,art);kr("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]});gr("pie-legend",nrt);kr("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});function ort(r){var t=r.chart,e=r.options,n=e.data,i=e.angleField,a=e.colorField,o=e.color,s=e.pieStyle,l=ng(n,i);if(w2(l,i)){var u="$$percentage$$";l=l.map(function(f){var d;return A(A({},f),(d={},d[u]=1/l.length,d))}),t.data(l);var c=Ze({},r,{options:{xField:"1",yField:u,seriesField:a,isStack:!0,interval:{color:o,style:s},args:{zIndexReversed:!0}}});ro(c)}else{t.data(l);var c=Ze({},r,{options:{xField:"1",yField:i,seriesField:a,isStack:!0,interval:{color:o,style:s},args:{zIndexReversed:!0}}});ro(c)}return r}function srt(r){var t,e=r.chart,n=r.options,i=n.meta,a=n.colorField,o=Ze({},i);return e.scale(o,(t={},t[a]={type:"cat"},t)),r}function lrt(r){var t=r.chart,e=r.options,n=e.radius,i=e.innerRadius,a=e.startAngle,o=e.endAngle;return t.coordinate({type:"theta",cfg:{radius:n,innerRadius:i,startAngle:a,endAngle:o}}),r}function urt(r){var t=r.chart,e=r.options,n=e.label,i=e.colorField,a=e.angleField,o=t.geometries[0];if(!n)o.label(!1);else{var s=n.callback,l=Lr(n,["callback"]),u=_a(l);if(u.content){var c=u.content;u.content=function(v,p,g){var m=v[i],y=v[a],b=t.getScaleByField(a),x=b==null?void 0:b.scale(y);return Vt(c)?c(A(A({},v),{percent:x}),p,g):rt(c)?DJ(c,{value:y,name:m,percentage:Rt(x)&&!Je(y)?(x*100).toFixed(2)+"%":null}):c}}var f={inner:"",outer:"pie-outer",spider:"pie-spider"},d=u.type?f[u.type]:"pie-outer",h=u.layout?qe(u.layout)?u.layout:[u.layout]:[];u.layout=(d?[{type:d}]:[]).concat(h),o.label({fields:i?[a,i]:[a],callback:s,cfg:A(A({},u),{offset:trt(u.type,u.offset),type:"pie"})})}return r}function oee(r){var t=r.innerRadius,e=r.statistic,n=r.angleField,i=r.colorField,a=r.meta,o=r.locale,s=f2(o);if(t&&e){var l=Ze({},iee.statistic,e),u=l.title,c=l.content;return u!==!1&&(u=Ze({},{formatter:function(f){return f?f[i]:Je(u.content)?s.get(["statistic","total"]):u.content}},u)),c!==!1&&(c=Ze({},{formatter:function(f,d){var h=f?f[n]:ert(d,n),v=ne(a,[n,"formatter"])||function(p){return p};return f||Je(c.content)?v(h):c.content}},c)),Ze({},{statistic:{title:u,content:c}},r)}return r}function see(r){var t=r.chart,e=r.options,n=oee(e),i=n.innerRadius,a=n.statistic;return t.getController("annotation").clear(!0),xr(Mi())(r),i&&a&&l2(t,{statistic:a,plotType:"pie"}),r}function crt(r){var t=r.chart,e=r.options,n=e.tooltip,i=e.colorField,a=e.angleField,o=e.data;if(n===!1)t.tooltip(n);else if(t.tooltip(Ze({},n,{shared:!1})),w2(o,a)){var s=ne(n,"fields"),l=ne(n,"formatter");oo(ne(n,"fields"))&&(s=[i,a],l=l||function(u){return{name:u[i],value:bc(u[a])}}),t.geometries[0].tooltip(s.join("*"),ag(s,l))}return r}function frt(r){var t=r.chart,e=r.options,n=oee(e),i=n.interactions,a=n.statistic,o=n.annotations;return G(i,function(s){var l,u;if(s.enable===!1)t.removeInteraction(s.type);else if(s.type==="pie-statistic-active"){var c=[];((l=s.cfg)===null||l===void 0?void 0:l.start)||(c=[{trigger:"element:mouseenter",action:aee+":change",arg:{statistic:a,annotations:o}}]),G((u=s.cfg)===null||u===void 0?void 0:u.start,function(f){c.push(A(A({},f),{arg:{statistic:a,annotations:o}}))}),t.interaction(s.type,Ze({},s.cfg,{start:c}))}else t.interaction(s.type,s.cfg||{})}),r}function lee(r){return xr(vs("pieStyle"),ort,srt,yn,lrt,lb,crt,urt,xf,see,frt,Dn)(r)}var drt=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="pie",e}return t.getDefaultOptions=function(){return iee},t.prototype.changeData=function(e){this.chart.emit(Nr.BEFORE_CHANGE_DATA,ci.fromData(this.chart,Nr.BEFORE_CHANGE_DATA,null));var n=this.options,i=this.options.angleField,a=ng(n.data,i),o=ng(e,i);w2(a,i)||w2(o,i)?this.update({data:e}):(this.updateOption({data:e}),this.chart.data(o),see({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(Nr.AFTER_CHANGE_DATA,ci.fromData(this.chart,Nr.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return lee},t}(Ar);function hrt(r){var t=r.chart,e=r.options,n=e.data,i=e.sectorStyle,a=e.color;return t.data(n),xr(ro)(Ze({},r,{options:{marginRatio:1,interval:{style:i,color:a}}})),r}function vrt(r){var t=r.chart,e=r.options,n=e.label,i=e.xField,a=to(t,"interval");if(n===!1)a.label(!1);else if(Kr(n)){var o=n.callback,s=n.fields,l=Lr(n,["callback","fields"]),u=l.offset,c=l.layout;(u===void 0||u>=0)&&(c=c?qe(c)?c:[c]:[],l.layout=va(c,function(f){return f.type!=="limit-in-shape"}),l.layout.length||delete l.layout),a.label({fields:s||[i],callback:o,cfg:_a(l)})}else qu(fl.WARN,n===null,"the label option must be an Object."),a.label({fields:[i]});return r}function prt(r){var t=r.chart,e=r.options,n=e.legend,i=e.seriesField;return n===!1?t.legend(!1):i&&t.legend(i,n),r}function grt(r){var t=r.chart,e=r.options,n=e.radius,i=e.innerRadius,a=e.startAngle,o=e.endAngle;return t.coordinate({type:"polar",cfg:{radius:n,innerRadius:i,startAngle:a,endAngle:o}}),r}function mrt(r){var t,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return xr(Ai((t={},t[a]=n,t[o]=i,t)))(r)}function yrt(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return n?t.axis(a,n):t.axis(a,!1),i?t.axis(o,i):t.axis(o,!1),r}function brt(r){xr(vs("sectorStyle"),hrt,mrt,vrt,grt,yrt,prt,Ta,Kn,Dn,yn,Mi(),xf)(r)}var xrt=Ze({},Ar.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right"},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="rose",e}return t.getDefaultOptions=function(){return xrt},t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return brt},t})(Ar);var wrt={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function Srt(r,t){return t=$t({},wrt,t),Crt(r,t)}function Crt(r,t){var e=Frt();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach(function(l){Je(t[l])||e[l](t[l])}),e.words(r),t.imageMask&&e.createMask(t.imageMask);var n=e.start(),i=n._tags;i.forEach(function(l){l.x+=t.size[0]/2,l.y+=t.size[1]/2});var a=t.size,o=a[0],s=a[1];return i.push({text:"",value:0,x:0,y:0,opacity:0}),i.push({text:"",value:0,x:o,y:s,opacity:0}),i}var xR=Math.PI/180,cb=1<<11>>5,S2=1<<11;function Ert(r){return r.text}function _rt(){return"serif"}function uee(){return"normal"}function Trt(r){return r.value}function Art(){return~~(Math.random()*2)*90}function Mrt(){return 1}function krt(r,t,e,n){if(!t.sprite){var i=r.context,a=r.ratio;i.clearRect(0,0,(cb<<5)/a,S2/a);var o=0,s=0,l=0,u=e.length;for(--n;++n<u;){t=e[n],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font;var c=i.measureText(t.text+"m").width*a,f=t.size<<1;if(t.rotate){var d=Math.sin(t.rotate*xR),h=Math.cos(t.rotate*xR),v=c*h,p=c*d,g=f*h,m=f*d;c=Math.max(Math.abs(v+m),Math.abs(v-m))+31>>5<<5,f=~~Math.max(Math.abs(p+g),Math.abs(p-g))}else c=c+31>>5<<5;if(f>l&&(l=f),o+c>=cb<<5&&(o=0,s+=l,l=0),s+f>=S2)break;i.translate((o+(c>>1))/a,(s+(f>>1))/a),t.rotate&&i.rotate(t.rotate*xR),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=f,t.xoff=o,t.yoff=s,t.x1=c>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var y=i.getImageData(0,0,(cb<<5)/a,S2/a).data,b=[];--n>=0;)if(t=e[n],!!t.hasText){for(var c=t.width,x=c>>5,f=t.y1-t.y0,w=0;w<f*x;w++)b[w]=0;if(o=t.xoff,o==null)return;s=t.yoff;for(var S=0,C=-1,_=0;_<f;_++){for(var w=0;w<c;w++){var T=x*_+(w>>5),E=y[(s+_)*(cb<<5)+(o+w)<<2]?1<<31-w%32:0;b[T]|=E,S|=E}S?C=_:(t.y0++,f--,_--,s++)}t.y1=t.y0+C,t.sprite=b.slice(0,(t.y1-t.y0)*x)}}}function Irt(r,t,e){e>>=5;for(var n=r.sprite,i=r.width>>5,a=r.x-(i<<4),o=a&127,s=32-o,l=r.y1-r.y0,u=(r.y+r.y0)*e+(a>>5),c,f=0;f<l;f++){c=0;for(var d=0;d<=i;d++)if((c<<s|(d<i?(c=n[f*i+d])>>>o:0))&t[u+d])return!0;u+=e}return!1}function Prt(r,t){var e=r[0],n=r[1];t.x+t.x0<e.x&&(e.x=t.x+t.x0),t.y+t.y0<e.y&&(e.y=t.y+t.y0),t.x+t.x1>n.x&&(n.x=t.x+t.x1),t.y+t.y1>n.y&&(n.y=t.y+t.y1)}function Drt(r,t){return r.x+r.x1>t[0].x&&r.x+r.x0<t[1].x&&r.y+r.y1>t[0].y&&r.y+r.y0<t[1].y}function cee(r){var t=r[0]/r[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function Rrt(r){var t=4,e=t*r[0]/r[1],n=0,i=0;return function(a){var o=a<0?-1:1;switch(Math.sqrt(1+4*o*a)-o&3){case 0:n+=e;break;case 1:i+=t;break;case 2:n-=e;break;default:i-=t;break}return[n,i]}}function fee(r){for(var t=[],e=-1;++e<r;)t[e]=0;return t}function Ort(){return document.createElement("canvas")}function su(r){return Vt(r)?r:function(){return r}}var Lrt={archimedean:cee,rectangular:Rrt};function Frt(){var r=[256,256],t=_rt,e=Trt,n=uee,i=Art,a=Mrt,o=cee,s=Math.random,l=[],u=1/0,c=Ert,f=uee,d=Ort,h={};h.start=function(){var g=r[0],m=r[1],y=v(d()),b=h.board?h.board:fee((r[0]>>5)*r[1]),x=l.length,w=[],S=l.map(function(E,M,k){return E.text=c.call(this,E,M,k),E.font=t.call(this,E,M,k),E.style=f.call(this,E,M,k),E.weight=n.call(this,E,M,k),E.rotate=i.call(this,E,M,k),E.size=~~e.call(this,E,M,k),E.padding=a.call(this,E,M,k),E}).sort(function(E,M){return M.size-E.size}),C=-1,_=h.board?[{x:0,y:0},{x:g,y:m}]:null;T();function T(){for(var E=Date.now();Date.now()-E<u&&++C<x;){var M=S[C];M.x=g*(s()+.5)>>1,M.y=m*(s()+.5)>>1,krt(y,M,S,C),M.hasText&&p(b,M,_)&&(w.push(M),_?h.hasImage||Prt(_,M):_=[{x:M.x+M.x0,y:M.y+M.y0},{x:M.x+M.x1,y:M.y+M.y1}],M.x-=r[0]>>1,M.y-=r[1]>>1)}h._tags=w,h._bounds=_}return h};function v(g){g.width=g.height=1;var m=Math.sqrt(g.getContext("2d").getImageData(0,0,1,1).data.length>>2);g.width=(cb<<5)/m,g.height=S2/m;var y=g.getContext("2d");return y.fillStyle=y.strokeStyle="red",y.textAlign="center",{context:y,ratio:m}}function p(g,m,y){for(var b=m.x,x=m.y,w=Math.sqrt(r[0]*r[0]+r[1]*r[1]),S=o(r),C=s()<.5?1:-1,_,T=-C,E,M;(_=S(T+=C))&&(E=~~_[0],M=~~_[1],!(Math.min(Math.abs(E),Math.abs(M))>=w));)if(m.x=b+E,m.y=x+M,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>r[0]||m.y+m.y1>r[1])&&(!y||!Irt(m,g,r[0]))&&(!y||Drt(m,y))){for(var k=m.sprite,P=m.width>>5,F=r[0]>>5,$=m.x-(P<<4),R=$&127,L=32-R,O=m.y1-m.y0,B=void 0,U=(m.y+m.y0)*F+($>>5),W=0;W<O;W++){B=0;for(var X=0;X<=P;X++)g[U+X]|=B<<L|(X<P?(B=k[W*P+X])>>>R:0);U+=F}return delete m.sprite,!0}return!1}return h.createMask=function(g){var m=document.createElement("canvas"),y=r[0],b=r[1];if(!(!y||!b)){var x=y>>5,w=fee((y>>5)*b);m.width=y,m.height=b;var S=m.getContext("2d");S.drawImage(g,0,0,g.width,g.height,0,0,y,b);for(var C=S.getImageData(0,0,y,b).data,_=0;_<b;_++)for(var T=0;T<y;T++){var E=x*_+(T>>5),M=_*y+T<<2,k=C[M]>=250&&C[M+1]>=250&&C[M+2]>=250,P=k?1<<31-T%32:0;w[E]|=P}h.board=w,h.hasImage=!0}},h.timeInterval=function(g){u=g==null?1/0:g},h.words=function(g){l=g},h.size=function(g){r=[+g[0],+g[1]]},h.font=function(g){t=su(g)},h.fontWeight=function(g){n=su(g)},h.rotate=function(g){i=su(g)},h.spiral=function(g){o=Lrt[g]||g},h.fontSize=function(g){e=su(g)},h.padding=function(g){a=su(g)},h.random=function(g){s=su(g)},h}function dee(r){var t=r.options,e=r.chart,n=e,i=n.width,a=n.height,o=n.padding,s=n.appendPadding,l=n.ele,u=t.data,c=t.imageMask,f=t.wordField,d=t.weightField,h=t.colorField,v=t.wordStyle,p=t.timeInterval,g=t.random,m=t.spiral,y=t.autoFit,b=y===void 0?!0:y,x=t.placementStrategy;if(!u||!u.length)return[];var w=v.fontFamily,S=v.fontWeight,C=v.padding,_=v.fontSize,T=Grt(u,d),E=[Hrt(T),Wrt(T)],M=u.map(function(F){return{text:F[f],value:F[d],color:F[h],datum:F}}),k={imageMask:c,font:w,fontSize:zrt(_,E),fontWeight:S,size:Nrt({width:i,height:a,padding:o,appendPadding:s,autoFit:b,container:l}),padding:C,timeInterval:p,random:g,spiral:m,rotate:Urt(t)};if(Vt(x)){var P=M.map(function(F,$,R){return A(A(A({},F),{hasText:!!F.text,font:su(k.font)(F,$,R),weight:su(k.fontWeight)(F,$,R),rotate:su(k.rotate)(F,$,R),size:su(k.fontSize)(F,$,R),style:"normal"}),x.call(e,F,$,R))});return P.push({text:"",value:0,x:0,y:0,opacity:0}),P.push({text:"",value:0,x:k.size[0],y:k.size[1],opacity:0}),P}return Srt(M,k)}function Nrt(r){var t=r.width,e=r.height,n=r.container,i=r.autoFit,a=r.padding,o=r.appendPadding;if(i){var s=aR(n);t=s.width,e=s.height}t=t||400,e=e||400;var l=Brt({padding:a,appendPadding:o}),u=l[0],c=l[1],f=l[2],d=l[3],h=[t-(d+c),e-(u+f)];return h}function Brt(r){var t=bf(r.padding),e=bf(r.appendPadding),n=t[0]+e[0],i=t[1]+e[1],a=t[2]+e[2],o=t[3]+e[3];return[n,i,a,o]}function $rt(r){return new Promise(function(t,e){if(r instanceof HTMLImageElement){t(r);return}if(rt(r)){var n=new Image;n.crossOrigin="anonymous",n.src=r,n.onload=function(){t(n)},n.onerror=function(){qu(fl.ERROR,!1,"image %s load failed !!!",r),e()};return}qu(fl.WARN,r===void 0,"The type of imageMask option must be String or HTMLImageElement."),e()})}function zrt(r,t){if(Vt(r))return r;if(qe(r)){var e=r[0],n=r[1];if(!t)return function(){return(n+e)/2};var i=t[0],a=t[1];return a===i?function(){return(n+e)/2}:function(s){var l=s.value;return(n-e)/(a-i)*(l-i)+e}}return function(){return r}}function Grt(r,t){return r.map(function(e){return e[t]}).filter(function(e){return typeof e=="number"&&!isNaN(e)})}function Urt(r){var t=Vrt(r),e=t.rotation,n=t.rotationSteps;if(!qe(e))return e;var i=e[0],a=e[1],o=n===1?0:(a-i)/(n-1);return function(){return a===i?a:Math.floor(Math.random()*n)*o}}function Vrt(r){var t=r.wordStyle.rotationSteps;return t<1&&(qu(fl.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),t=1),{rotation:r.wordStyle.rotation,rotationSteps:t}}function Hrt(r){return Math.min.apply(Math,r)}function Wrt(r){return Math.max.apply(Math,r)}var wR="color",jrt=Ze({},Ar.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value",wR],formatter:function(r){return{name:r.text,value:r.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}});function Yrt(r){var t=r.chart,e=r.options,n=e.colorField,i=e.color,a=dee(r);t.data(a);var o=Ze({},r,{options:{xField:"x",yField:"y",seriesField:n&&wR,rawFields:Vt(i)&&$n(ne(e,"rawFields",[]),["datum"]),point:{color:i,shape:"word-cloud"}}}),s=ps(o).ext;return s.geometry.label(!1),t.coordinate().reflect("y"),t.axis(!1),r}function Xrt(r){return xr(Ai({x:{nice:!1},y:{nice:!1}}))(r)}function qrt(r){var t=r.chart,e=r.options,n=e.legend,i=e.colorField;return n===!1?t.legend(!1):i&&t.legend(wR,n),r}function Krt(r){xr(Yrt,Xrt,Ta,qrt,Kn,Dn,yn,xf)(r)}En("point","word-cloud",{draw:function(r,t){var e=r.x,n=r.y,i=t.addShape("text",{attrs:A(A({},Zrt(r)),{x:e,y:n})}),a=r.data.rotate;return typeof a=="number"&&jo.rotate(i,a*Math.PI/180),i}});function Zrt(r){return{fontSize:r.data.size,text:r.data.text,textAlign:"center",fontFamily:r.data.font,fontWeight:r.data.weight,fill:r.color||r.defaultStyle.stroke,textBaseline:"alphabetic"}}(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="word-cloud",e}return t.getDefaultOptions=function(){return jrt},t.prototype.changeData=function(e){this.updateOption({data:e}),this.options.imageMask?this.render():this.chart.changeData(dee({chart:this.chart,options:this.options}))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.render=function(){var e=this;return new Promise(function(n){var i=e.options.imageMask;if(!i){r.prototype.render.call(e),n();return}var a=function(o){e.options=A(A({},e.options),{imageMask:o||null}),r.prototype.render.call(e),n()};$rt(i).then(a).catch(a)})},t.prototype.getSchemaAdaptor=function(){return Krt},t.prototype.triggerResize=function(){var e=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout(function(){r.prototype.triggerResize.call(e)}))},t})(Ar);function wf(r,t){return Qrt(r)||Jrt(r,t)||ent()}function Qrt(r){if(Array.isArray(r))return r}function Jrt(r,t){var e=[],n=!0,i=!1,a=void 0;try{for(var o=r[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(e.push(s.value),!(t&&e.length===t));n=!0);}catch(l){i=!0,a=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(i)throw a}}return e}function ent(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function SR(r,t,e,n){r=r.filter(function(v,p){var g=t(v,p),m=e(v,p);return g!=null&&isFinite(g)&&m!=null&&isFinite(m)}),n&&r.sort(function(v,p){return t(v)-t(p)});for(var i=r.length,a=new Float64Array(i),o=new Float64Array(i),s=0,l=0,u,c,f,d=0;d<i;)f=r[d],a[d]=u=+t(f,d,r),o[d]=c=+e(f,d,r),++d,s+=(u-s)/d,l+=(c-l)/d;for(var h=0;h<i;++h)a[h]-=s,o[h]-=l;return[a,o,s,l]}function Th(r,t,e,n){for(var i=0,a=0,o=r.length;a<o;a++){var s=r[a],l=+t(s,a,r),u=+e(s,a,r);l!=null&&isFinite(l)&&u!=null&&isFinite(u)&&n(l,u,i++)}}function sg(r,t,e,n,i){var a=0,o=0;return Th(r,t,e,function(s,l){var u=l-i(s),c=l-n;a+=u*u,o+=c*c}),1-a/o}function hee(r){return Math.atan2(r[1][1]-r[0][1],r[1][0]-r[0][0])*180/Math.PI}function tnt(r){return[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]}function fb(r,t,e){for(var n=Math.log(t-r)*Math.LOG10E+1|0,i=1*Math.pow(10,-n/2-1),a=1e4,o=[l(r),l(t)],s=0;u(o)&&s<a;);return o;function l(c){return[c,e(c)]}function u(c){s++;for(var f=c.length,d=!1,h=0;h<f-1;h++){var v=c[h],p=c[h+1],g=tnt([v,p]),m=l(g[0]),y=hee([v,g]),b=hee([v,m]),x=Math.abs(y-b);x>i&&(c.splice(h+1,0,m),d=!0)}return d}}function db(r,t,e,n){var i=n-r*r,a=Math.abs(i)<1e-24?0:(e-r*t)/i,o=t-a*r;return[o,a]}function rnt(){var r=function(a){return a[0]},t=function(a){return a[1]},e;function n(i){var a=0,o=0,s=0,l=0,u=0,c=0,f=e?+e[0]:1/0,d=e?+e[1]:-1/0;Th(i,r,t,function(b,x){var w=Math.log(x),S=b*x;++a,o+=(x-o)/a,l+=(S-l)/a,c+=(b*S-c)/a,s+=(x*w-s)/a,u+=(S*w-u)/a,e||(b<f&&(f=b),b>d&&(d=b))});var h=db(l/o,s/o,u/o,c/o),v=wf(h,2),p=v[0],g=v[1];p=Math.exp(p);var m=function(x){return p*Math.exp(g*x)},y=fb(f,d,m);return y.a=p,y.b=g,y.predict=m,y.rSquared=sg(i,r,t,o,m),y}return n.domain=function(i){return arguments.length?(e=i,n):e},n.x=function(i){return arguments.length?(r=i,n):r},n.y=function(i){return arguments.length?(t=i,n):t},n}function vee(){var r=function(a){return a[0]},t=function(a){return a[1]},e;function n(i){var a=0,o=0,s=0,l=0,u=0,c=e?+e[0]:1/0,f=e?+e[1]:-1/0;Th(i,r,t,function(y,b){++a,o+=(y-o)/a,s+=(b-s)/a,l+=(y*b-l)/a,u+=(y*y-u)/a,e||(y<c&&(c=y),y>f&&(f=y))});var d=db(o,s,l,u),h=wf(d,2),v=h[0],p=h[1],g=function(b){return p*b+v},m=[[c,g(c)],[f,g(f)]];return m.a=p,m.b=v,m.predict=g,m.rSquared=sg(i,r,t,s,g),m}return n.domain=function(i){return arguments.length?(e=i,n):e},n.x=function(i){return arguments.length?(r=i,n):r},n.y=function(i){return arguments.length?(t=i,n):t},n}function nnt(r){r.sort(function(e,n){return e-n});var t=r.length/2;return t%1==0?(r[t-1]+r[t])/2:r[Math.floor(t)]}var pee=2,gee=1e-12;function int(){var r=function(a){return a[0]},t=function(a){return a[1]},e=.3;function n(i){for(var a=SR(i,r,t,!0),o=wf(a,4),s=o[0],l=o[1],u=o[2],c=o[3],f=s.length,d=Math.max(2,~~(e*f)),h=new Float64Array(f),v=new Float64Array(f),p=new Float64Array(f).fill(1),g=-1;++g<=pee;){for(var m=[0,d-1],y=0;y<f;++y){for(var b=s[y],x=m[0],w=m[1],S=b-s[x]>s[w]-b?x:w,C=0,_=0,T=0,E=0,M=0,k=1/Math.abs(s[S]-b||1),P=x;P<=w;++P){var F=s[P],$=l[P],R=ant(Math.abs(b-F)*k)*p[P],L=F*R;C+=R,_+=L,T+=$*R,E+=$*L,M+=F*L}var O=db(_/C,T/C,E/C,M/C),B=wf(O,2),U=B[0],W=B[1];h[y]=U+W*b,v[y]=Math.abs(l[y]-h[y]),ont(s,y+1,m)}if(g===pee)break;var X=nnt(v);if(Math.abs(X)<gee)break;for(var ae=0,Z,Y;ae<f;++ae)Z=v[ae]/(6*X),p[ae]=Z>=1?gee:(Y=1-Z*Z)*Y}return snt(s,h,u,c)}return n.bandwidth=function(i){return arguments.length?(e=i,n):e},n.x=function(i){return arguments.length?(r=i,n):r},n.y=function(i){return arguments.length?(t=i,n):t},n}function ant(r){return(r=1-r*r*r)*r*r}function ont(r,t,e){var n=r[t],i=e[0],a=e[1]+1;if(!(a>=r.length))for(;t>i&&r[a]-n<=n-r[i];)e[0]=++i,e[1]=a,++a}function snt(r,t,e,n){for(var i=r.length,a=[],o=0,s=0,l=[],u;o<i;++o)u=r[o]+e,l[0]===u?l[1]+=(t[o]-l[1])/++s:(s=0,l[1]+=n,l=[u,t[o]],a.push(l));return l[1]+=n,a}function lnt(){var r=function(o){return o[0]},t=function(o){return o[1]},e=Math.E,n;function i(a){var o=0,s=0,l=0,u=0,c=0,f=n?+n[0]:1/0,d=n?+n[1]:-1/0,h=Math.log(e);Th(a,r,t,function(x,w){var S=Math.log(x)/h;++o,s+=(S-s)/o,l+=(w-l)/o,u+=(S*w-u)/o,c+=(S*S-c)/o,n||(x<f&&(f=x),x>d&&(d=x))});var v=db(s,l,u,c),p=wf(v,2),g=p[0],m=p[1],y=function(w){return m*Math.log(w)/h+g},b=fb(f,d,y);return b.a=m,b.b=g,b.predict=y,b.rSquared=sg(a,r,t,l,y),b}return i.domain=function(a){return arguments.length?(n=a,i):n},i.x=function(a){return arguments.length?(r=a,i):r},i.y=function(a){return arguments.length?(t=a,i):t},i.base=function(a){return arguments.length?(e=a,i):e},i}function mee(){var r=function(a){return a[0]},t=function(a){return a[1]},e;function n(i){var a=SR(i,r,t),o=wf(a,4),s=o[0],l=o[1],u=o[2],c=o[3],f=s.length,d=0,h=0,v=0,p=0,g=0,m,y,b,x;for(m=0;m<f;)y=s[m],b=l[m++],x=y*y,d+=(x-d)/m,h+=(x*y-h)/m,v+=(x*x-v)/m,p+=(y*b-p)/m,g+=(x*b-g)/m;var w=0,S=0,C=e?+e[0]:1/0,_=e?+e[1]:-1/0;Th(i,r,t,function(R,L){S++,w+=(L-w)/S,e||(R<C&&(C=R),R>_&&(_=R))});var T=v-d*d,E=d*T-h*h,M=(g*d-p*h)/E,k=(p*T-g*h)/E,P=-M*d,F=function(L){return L=L-u,M*L*L+k*L+P+c},$=fb(C,_,F);return $.a=M,$.b=k-2*M*u,$.c=P-k*u+M*u*u+c,$.predict=F,$.rSquared=sg(i,r,t,w,F),$}return n.domain=function(i){return arguments.length?(e=i,n):e},n.x=function(i){return arguments.length?(r=i,n):r},n.y=function(i){return arguments.length?(t=i,n):t},n}function unt(){var r=function(o){return o[0]},t=function(o){return o[1]},e=3,n;function i(a){if(e===1){var o=vee().x(r).y(t).domain(n)(a);return o.coefficients=[o.b,o.a],delete o.a,delete o.b,o}if(e===2){var s=mee().x(r).y(t).domain(n)(a);return s.coefficients=[s.c,s.b,s.a],delete s.a,delete s.b,delete s.c,s}var l=SR(a,r,t),u=wf(l,4),c=u[0],f=u[1],d=u[2],h=u[3],v=c.length,p=[],g=[],m=e+1,y=0,b=0,x=n?+n[0]:1/0,w=n?+n[1]:-1/0;Th(a,r,t,function(F,$){++b,y+=($-y)/b,n||(F<x&&(x=F),F>w&&(w=F))});var S,C,_,T,E;for(S=0;S<m;++S){for(_=0,T=0;_<v;++_)T+=Math.pow(c[_],S)*f[_];for(p.push(T),E=new Float64Array(m),C=0;C<m;++C){for(_=0,T=0;_<v;++_)T+=Math.pow(c[_],S+C);E[C]=T}g.push(E)}g.push(p);var M=fnt(g),k=function($){$-=d;var R=h+M[0]+M[1]*$+M[2]*$*$;for(S=3;S<m;++S)R+=M[S]*Math.pow($,S);return R},P=fb(x,w,k);return P.coefficients=cnt(m,M,-d,h),P.predict=k,P.rSquared=sg(a,r,t,y,k),P}return i.domain=function(a){return arguments.length?(n=a,i):n},i.x=function(a){return arguments.length?(r=a,i):r},i.y=function(a){return arguments.length?(t=a,i):t},i.order=function(a){return arguments.length?(e=a,i):e},i}function cnt(r,t,e,n){var i=Array(r),a,o,s,l;for(a=0;a<r;++a)i[a]=0;for(a=r-1;a>=0;--a)for(s=t[a],l=1,i[a]+=s,o=1;o<=a;++o)l*=(a+1-o)/o,i[a-o]+=s*Math.pow(e,o)*l;return i[0]+=n,i}function fnt(r){var t=r.length-1,e=[],n,i,a,o,s;for(n=0;n<t;++n){for(o=n,i=n+1;i<t;++i)Math.abs(r[n][i])>Math.abs(r[n][o])&&(o=i);for(a=n;a<t+1;++a)s=r[a][n],r[a][n]=r[a][o],r[a][o]=s;for(i=n+1;i<t;++i)for(a=t;a>=n;a--)r[a][i]-=r[a][n]*r[n][i]/r[n][n]}for(i=t-1;i>=0;--i){for(s=0,a=i+1;a<t;++a)s+=r[a][i]*e[a];e[i]=(r[t][i]-s)/r[i][i]}return e}function dnt(){var r=function(a){return a[0]},t=function(a){return a[1]},e;function n(i){var a=0,o=0,s=0,l=0,u=0,c=0,f=e?+e[0]:1/0,d=e?+e[1]:-1/0;Th(i,r,t,function(b,x){var w=Math.log(b),S=Math.log(x);++a,o+=(w-o)/a,s+=(S-s)/a,l+=(w*S-l)/a,u+=(w*w-u)/a,c+=(x-c)/a,e||(b<f&&(f=b),b>d&&(d=b))});var h=db(o,s,l,u),v=wf(h,2),p=v[0],g=v[1];p=Math.exp(p);var m=function(x){return p*Math.pow(x,g)},y=fb(f,d,m);return y.a=p,y.b=g,y.predict=m,y.rSquared=sg(i,r,t,c,m),y}return n.domain=function(i){return arguments.length?(e=i,n):e},n.x=function(i){return arguments.length?(r=i,n):r},n.y=function(i){return arguments.length?(t=i,n):t},n}var hnt={exp:rnt,linear:vee,loess:int,log:lnt,poly:unt,pow:dnt,quad:mee};function vnt(r,t){var e=10,n={regionStyle:[{position:{start:[r,"max"],end:["max",t]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[r,t]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",t],end:[r,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[r,t],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",t],offsetX:-e,offsetY:-e,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",t],offsetX:e,offsetY:-e,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",t],offsetX:e,offsetY:e,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",t],offsetX:-e,offsetY:e,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]};return n}var pnt=function(r,t){var e=t.view,n=t.options,i=n.xField,a=n.yField,o=e.getScaleByField(i),s=e.getScaleByField(a),l=r.map(function(u){return e.getCoordinate().convert({x:o.scale(u[0]),y:s.scale(u[1])})});return Ket(l,!1)},gnt=function(r){var t=r.options,e=t.xField,n=t.yField,i=t.data,a=t.regressionLine,o=a.type,s=o===void 0?"linear":o,l=a.algorithm,u;if(l)u=qe(l)?l:l(i);else{var c=hnt[s]().x(function(f){return f[e]}).y(function(f){return f[n]});u=c(i)}return pnt(u,r)},mnt=function(r){var t,e=r.meta,n=e===void 0?{}:e,i=r.xField,a=r.yField,o=r.data,s=o[0][i],l=o[0][a],u=s>0,c=l>0;function f(d,h){var v=ne(n,[d]);function p(m){return ne(v,m)}var g={};return h==="x"?(Rt(s)&&(Rt(p("min"))||(g.min=u?0:s*2),Rt(p("max"))||(g.max=u?s*2:0)),g):(Rt(l)&&(Rt(p("min"))||(g.min=c?0:l*2),Rt(p("max"))||(g.max=c?l*2:0)),g)}return A(A({},n),(t={},t[i]=A(A({},n[i]),f(i,"x")),t[a]=A(A({},n[a]),f(a,"y")),t))};function yee(r){var t=r.data,e=t===void 0?[]:t,n=r.xField,i=r.yField;if(e.length){for(var a=!0,o=!0,s=e[0],l=void 0,u=1;u<e.length&&(l=e[u],s[n]!==l[n]&&(a=!1),s[i]!==l[i]&&(o=!1),!(!a&&!o));u++)s=l;var c=[];a&&c.push(n),o&&c.push(i);var f=Pn(mnt(r),c);return Ze({},r,{meta:f})}return r}function ynt(r){var t=r.chart,e=r.options,n=e.data,i=e.type,a=e.color,o=e.shape,s=e.pointStyle,l=e.shapeField,u=e.colorField,c=e.xField,f=e.yField,d=e.sizeField,h=e.size,v=e.tooltip;d&&(h||(h=[2,8]),Rt(h)&&(h=[h,h])),v&&!v.fields&&(v=A(A({},v),{fields:[c,f,u,d,l]})),t.data(n),ps(Ze({},r,{options:{seriesField:u,point:{color:a,shape:o,size:h,style:s},tooltip:v}}));var p=to(t,"point");return i&&p.adjust(i),r}function C2(r){var t,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField,s=yee(e);return xr(Ai((t={},t[a]=n,t[o]=i,t)))(Ze({},r,{options:s}))}function bnt(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return t.axis(a,n),t.axis(o,i),r}function xnt(r){var t=r.chart,e=r.options,n=e.legend,i=e.colorField,a=e.shapeField,o=e.sizeField,s=e.shapeLegend,l=e.sizeLegend,u=n!==!1;return i&&t.legend(i,u?n:!1),a&&(s?t.legend(a,s):t.legend(a,s===!1?!1:n)),o&&t.legend(o,l||!1),!u&&!s&&!l&&t.legend(!1),r}function wnt(r){var t=r.chart,e=r.options,n=e.label,i=e.yField,a=to(t,"point");if(!n)a.label(!1);else{var o=n.callback,s=Lr(n,["callback"]);a.label({fields:[i],callback:o,cfg:_a(s)})}return r}function Snt(r){var t=r.options,e=t.quadrant,n=[];if(e){var i=e.xBaseline,a=i===void 0?0:i,o=e.yBaseline,s=o===void 0?0:o,l=e.labels,u=e.regionStyle,c=e.lineStyle,f=vnt(a,s),d=new Array(4).join(",").split(",");d.forEach(function(h,v){n.push(A(A({type:"region",top:!1},f.regionStyle[v].position),{style:Ze({},f.regionStyle[v].style,u==null?void 0:u[v])}),A({type:"text",top:!0},Ze({},f.labelStyle[v],l==null?void 0:l[v])))}),n.push({type:"line",top:!1,start:["min",s],end:["max",s],style:Ze({},f.lineStyle,c)},{type:"line",top:!1,start:[a,"min"],end:[a,"max"],style:Ze({},f.lineStyle,c)})}return xr(Mi(n))(r)}function Cnt(r){var t=r.options,e=r.chart,n=t.regressionLine;if(n){var i=n.style,a=n.top,o=a===void 0?!1:a,s={stroke:"#9ba29a",lineWidth:2,opacity:.5};e.annotation().shape({top:o,render:function(l,u){var c=l.addGroup({id:e.id+"-regression-line",name:"regression-line-group"}),f=gnt({view:u,options:t});c.addShape("path",{name:"regression-line",attrs:A(A({path:f},s),i)})}})}return r}function Ent(r){var t=r.chart,e=r.options,n=e.tooltip;return n?t.tooltip(n):n===!1&&t.tooltip(!1),r}function bee(r){return xr(ynt,C2,bnt,xnt,Ent,wnt,tee,Kn,Snt,Dn,yn,Cnt)(r)}var _nt=Ze({},Ar.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});kr("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var Tnt=function(r){Te(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.type="scatter",i.on(Nr.BEFORE_RENDER,function(a){var o,s,l=i,u=l.options,c=l.chart;if(((o=a.data)===null||o===void 0?void 0:o.source)===Yo.FILTER){var f=i.chart.filterData(i.chart.getData());C2({chart:c,options:A(A({},u),{data:f})})}((s=a.data)===null||s===void 0?void 0:s.source)===Yo.RESET&&C2({chart:c,options:u})}),i}return t.getDefaultOptions=function(){return _nt},t.prototype.changeData=function(e){this.updateOption(yee(Ze({},this.options,{data:e})));var n=this,i=n.options,a=n.chart;C2({chart:a,options:i}),this.chart.changeData(e)},t.prototype.getSchemaAdaptor=function(){return bee},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t}(Ar);function Ant(r){var t=r.chart,e=r.options,n=e.data,i=e.lineStyle,a=e.color,o=e.point,s=e.area;t.data(n);var l=Ze({},r,{options:{line:{style:i,color:a},point:o&&A({color:a},o),area:s&&A({color:a},s),label:void 0}}),u=Ze({},l,{options:{tooltip:!1}}),c=(o==null?void 0:o.state)||e.state,f=Ze({},l,{options:{tooltip:!1,state:c}});return og(l),ps(f),g2(u),r}function Mnt(r){var t,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return xr(Ai((t={},t[a]=n,t[o]=i,t)))(r)}function knt(r){var t=r.chart,e=r.options,n=e.radius,i=e.startAngle,a=e.endAngle;return t.coordinate("polar",{radius:n,startAngle:i,endAngle:a}),r}function Int(r){var t=r.chart,e=r.options,n=e.xField,i=e.xAxis,a=e.yField,o=e.yAxis;return t.axis(n,i),t.axis(a,o),r}function Pnt(r){var t=r.chart,e=r.options,n=e.label,i=e.yField,a=to(t,"line");if(!n)a.label(!1);else{var o=n.callback,s=Lr(n,["callback"]);a.label({fields:[i],callback:o,cfg:_a(s)})}return r}function Dnt(r){return xr(Ant,Mnt,yn,knt,Int,lb,Ta,Pnt,Kn,Dn,Mi())(r)}var Rnt=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),t.prototype.getTooltipItems=function(e){var n=this.getTooltipCfg(),i=n.shared,a=n.title,o=r.prototype.getTooltipItems.call(this,e);if(o.length>0){var s=this.view.geometries[0],l=s.dataArray,u=o[0].name,c=[];return l.forEach(function(f){f.forEach(function(d){var h=jo.getTooltipItems(d,s),v=h[0];if(!i&&v&&v.name===u){var p=Je(a)?u:a;c.push(A(A({},v),{name:v.title,title:p}))}else if(i&&v){var p=Je(a)?v.name||u:a;c.push(A(A({},v),{name:v.title,title:p}))}})}),c}return[]},t}(mQ);mh("radar-tooltip",Rnt);var Ont=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(){var e=this.context.view;e.removeInteraction("tooltip")},t.prototype.show=function(){var e=this.context.event,n=this.getTooltipController();n.showTooltip({x:e.x,y:e.y})},t.prototype.hide=function(){var e=this.getTooltipController();e.hideTooltip()},t.prototype.getTooltipController=function(){var e=this.context.view;return e.getController("radar-tooltip")},t}(ui);gr("radar-tooltip",Ont);kr("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="radar",e}return t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return Ze({},r.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},t.prototype.getSchemaAdaptor=function(){return Dnt},t})(Ar);var lg;(function(r){r.Left="Left",r.Right="Right"})(lg||(lg={}));var Ah;(function(r){r.Line="line",r.Column="column"})(Ah||(Ah={}));var gs="left-axes-view",ms="right-axes-view",xee={nice:!0,label:{autoHide:!0,autoRotate:!1}},Lnt=A(A({},xee),{position:"left"}),Fnt=A(A({},xee),{position:"right",grid:null});function CR(r){return ne(r,"geometry")===Ah.Line}function ER(r){return ne(r,"geometry")===Ah.Column}function wee(r,t,e){return ER(e)?Ze({},{geometry:Ah.Column,label:e.label&&e.isRange?{content:function(n){var i;return(i=n[t])===null||i===void 0?void 0:i.join("-")}}:void 0},e):A({geometry:Ah.Line},e)}function See(r,t){var e=r[0],n=r[1];if(qe(t)){var i=t[0],a=t[1];return[i,a]}var o=ne(t,e),s=ne(t,n);return[o,s]}function Cee(r,t){return t===lg.Left?r===!1?!1:Ze({},Lnt,r):t===lg.Right?r===!1?!1:Ze({},Fnt,r):r}function Eee(r){var t=r.view,e=r.geometryOption,n=r.yField,i=r.legend,a=ne(i,"marker"),o=to(t,CR(e)?"line":"interval");if(!e.seriesField){var s=ne(t,"options.scales."+n+".alias")||n,l=o.getAttribute("color"),u=t.getTheme().defaultColor;l&&(u=jo.getMappingValue(l,s,ne(l,["values",0],u)));var c=(Vt(a)?a:!oo(a)&&Ze({},{style:{stroke:u,fill:u}},a))||(CR(e)?{symbol:function(d,h,v){return[["M",d-v,h],["L",d+v,h]]},style:{lineWidth:2,r:6,stroke:u}}:{symbol:"square",style:{fill:u}});return[{value:n,name:s,marker:c,isGeometry:!0,viewId:t.id}]}var f=o.getGroupAttributes();return Wa(f,function(d,h){var v=jo.getLegendItems(t,o,h,t.getTheme(),a);return d.concat(v)},[])}function Nnt(r){var t=r.options,e=r.chart,n=t.geometryOption,i=n.isStack,a=n.color,o=n.seriesField,s=n.groupField,l=n.isGroup,u=["xField","yField"];if(CR(n)){og(Ze({},r,{options:A(A(A({},Pn(t,u)),n),{line:{color:n.color,style:n.lineStyle}})})),ps(Ze({},r,{options:A(A(A({},Pn(t,u)),n),{point:n.point&&A({color:a,shape:"circle"},n.point)})}));var c=[];l&&c.push({type:"dodge",dodgeBy:s||o,customOffset:0}),i&&c.push({type:"stack"}),c.length&&G(e.geometries,function(f){f.adjust(c)})}return ER(n)&&x2(Ze({},r,{options:A(A(A({},Pn(t,u)),n),{widthRatio:n.columnWidthRatio,interval:A(A({},Pn(n,["color"])),{style:n.columnStyle})})})),r}var _ee=function(r,t){var e=t[0],n=t[1],i=r.getOptions().data,a=r.getXScale(),o=aa(i);if(!(!a||!o)){var s=As(i,a.field),l=s,u=aa(l),c=Math.floor(e*(u-1)),f=Math.floor(n*(u-1));r.filter(a.field,function(d){var h=l.indexOf(d);return h>-1?ntt(h,c,f):!0}),r.render(!0)}};function Bnt(r){var t,e=r.options,n=e.geometryOptions,i=n===void 0?[]:n,a=e.xField,o=e.yField,s=Nx(i,function(l){var u=l.geometry;return u===Ah.Line||u===void 0});return Ze({},{options:{geometryOptions:[],meta:(t={},t[a]={type:"cat",sync:!0,range:s?[0,1]:void 0},t),tooltip:{showMarkers:s,showCrosshairs:s,shared:!0,crosshairs:{type:"x"}},interactions:s?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},r,{options:{yAxis:See(o,e.yAxis),geometryOptions:[wee(a,o[0],i[0]),wee(a,o[1],i[1])],annotations:See(o,e.annotations)}})}function $nt(r){var t,e,n=r.chart,i=r.options,a=i.geometryOptions,o={line:0,column:1},s=[{type:(t=a[0])===null||t===void 0?void 0:t.geometry,id:gs},{type:(e=a[1])===null||e===void 0?void 0:e.geometry,id:ms}];return s.sort(function(l,u){return-o[l.type]+o[u.type]}).forEach(function(l){return n.createView({id:l.id})}),r}function znt(r){var t=r.chart,e=r.options,n=e.xField,i=e.yField,a=e.geometryOptions,o=e.data,s=e.tooltip,l=[A(A({},a[0]),{id:gs,data:o[0],yField:i[0]}),A(A({},a[1]),{id:ms,data:o[1],yField:i[1]})];return l.forEach(function(u){var c=u.id,f=u.data,d=u.yField,h=ER(u)&&u.isPercent,v=h?ZJ(f,d,n,d):f,p=Yr(t,c).data(v),g=h?A({formatter:function(m){return{name:m[u.seriesField]||d,value:(Number(m[d])*100).toFixed(2)+"%"}}},s):s;Nnt({chart:p,options:{xField:n,yField:d,tooltip:g,geometryOption:u}})}),r}function Gnt(r){var t,e=r.chart,n=r.options,i=n.geometryOptions,a=((t=e.getTheme())===null||t===void 0?void 0:t.colors10)||[],o=0;return e.once("beforepaint",function(){G(i,function(s,l){var u=Yr(e,l===0?gs:ms);if(!s.color){var c=u.getGroupScales(),f=ne(c,[0,"values","length"],1),d=a.slice(o,o+f).concat(l===0?[]:a);u.geometries.forEach(function(h){s.seriesField?h.color(s.seriesField,d):h.color(d[0])}),o+=f}}),e.render(!0)}),r}function Unt(r){var t,e,n=r.chart,i=r.options,a=i.xAxis,o=i.yAxis,s=i.xField,l=i.yField;return Ai((t={},t[s]=a,t[l[0]]=o[0],t))(Ze({},r,{chart:Yr(n,gs)})),Ai((e={},e[s]=a,e[l[1]]=o[1],e))(Ze({},r,{chart:Yr(n,ms)})),r}function Vnt(r){var t=r.chart,e=r.options,n=Yr(t,gs),i=Yr(t,ms),a=e.xField,o=e.yField,s=e.xAxis,l=e.yAxis;return t.axis(a,!1),t.axis(o[0],!1),t.axis(o[1],!1),n.axis(a,s),n.axis(o[0],Cee(l[0],lg.Left)),i.axis(a,!1),i.axis(o[1],Cee(l[1],lg.Right)),r}function Hnt(r){var t=r.chart,e=r.options,n=e.tooltip,i=Yr(t,gs),a=Yr(t,ms);return t.tooltip(n),i.tooltip({shared:!0}),a.tooltip({shared:!0}),r}function Wnt(r){var t=r.chart;return Kn(Ze({},r,{chart:Yr(t,gs)})),Kn(Ze({},r,{chart:Yr(t,ms)})),r}function jnt(r){var t=r.chart,e=r.options,n=e.annotations,i=ne(n,[0]),a=ne(n,[1]);return Mi(i)(Ze({},r,{chart:Yr(t,gs),options:{annotations:i}})),Mi(a)(Ze({},r,{chart:Yr(t,ms),options:{annotations:a}})),r}function Ynt(r){var t=r.chart;return yn(Ze({},r,{chart:Yr(t,gs)})),yn(Ze({},r,{chart:Yr(t,ms)})),yn(r),r}function Xnt(r){var t=r.chart;return Dn(Ze({},r,{chart:Yr(t,gs)})),Dn(Ze({},r,{chart:Yr(t,ms)})),r}function qnt(r){var t=r.chart,e=r.options,n=e.yAxis;return Ch(Ze({},r,{chart:Yr(t,gs),options:{yAxis:n[0]}})),Ch(Ze({},r,{chart:Yr(t,ms),options:{yAxis:n[1]}})),r}function Knt(r){var t=r.chart,e=r.options,n=e.legend,i=e.geometryOptions,a=e.yField,o=e.data,s=Yr(t,gs),l=Yr(t,ms);if(n===!1)t.legend(!1);else if(Kr(n)&&n.custom===!0)t.legend(n);else{var u=ne(i,[0,"legend"],n),c=ne(i,[1,"legend"],n);t.once("beforepaint",function(){var f=o[0].length?Eee({view:s,geometryOption:i[0],yField:a[0],legend:u}):[],d=o[1].length?Eee({view:l,geometryOption:i[1],yField:a[1],legend:c}):[];t.legend(Ze({},n,{custom:!0,items:f.concat(d)}))}),i[0].seriesField&&s.legend(i[0].seriesField,u),i[1].seriesField&&l.legend(i[1].seriesField,c),t.on("legend-item:click",function(f){var d=ne(f,"gEvent.delegateObject",{});if(d&&d.item){var h=d.item,v=h.value,p=h.isGeometry,g=h.viewId;if(p){var m=K_(a,function(x){return x===v});if(m>-1){var y=ne(Yr(t,g),"geometries");G(y,function(x){x.changeVisible(!d.item.unchecked)})}}else{var b=ne(t.getController("legend"),"option.items",[]);G(t.views,function(x){var w=x.getGroupScales();G(w,function(S){S.values&&S.values.indexOf(v)>-1&&x.filter(S.field,function(C){var _=Ts(b,function(T){return T.value===C});return!_.unchecked})}),t.render(!0)})}}})}return r}function Znt(r){var t=r.chart,e=r.options,n=e.slider,i=Yr(t,gs),a=Yr(t,ms);return n&&(i.option("slider",n),i.on("slider:valuechanged",function(o){var s=o.event,l=s.value,u=s.originValue;ri(l,u)||_ee(a,l)}),t.once("afterpaint",function(){if(!yu(n)){var o=n.start,s=n.end;(o||s)&&_ee(a,[o,s])}})),r}function Qnt(r){return xr(Bnt,$nt,Ynt,znt,Unt,Vnt,qnt,Hnt,Wnt,jnt,Xnt,Gnt,Knt,Znt)(r)}(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="dual-axes",e}return t.prototype.getDefaultOptions=function(){return Ze({},r.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},t.prototype.getSchemaAdaptor=function(){return Qnt},t})(Ar);var hb="x",ug="y",Tee={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(r,t){return""+ne(t,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},Jnt={appendPadding:2,tooltip:A({},Tee),animation:{}};function Mh(r){return Gn(r||[],function(t,e){return{x:""+e,y:t}})}function eit(r){var t=r.chart,e=r.options,n=e.data,i=e.color,a=e.areaStyle,o=e.point,s=e.line,l=o==null?void 0:o.state,u=Mh(n);t.data(u);var c=Ze({},r,{options:{xField:hb,yField:ug,area:{color:i,style:a},line:s,point:o}}),f=Ze({},c,{options:{tooltip:!1}}),d=Ze({},c,{options:{tooltip:!1,state:l}});return g2(c),og(f),ps(d),t.axis(!1),t.legend(!1),r}function cg(r){var t,e,n=r.options,i=n.xAxis,a=n.yAxis,o=n.data,s=Mh(o);return xr(Ai((t={},t[hb]=i,t[ug]=a,t),(e={},e[hb]={type:"cat"},e[ug]=sR(s,ug),e)))(r)}function Aee(r){return xr(vs("areaStyle"),eit,cg,Ta,yn,Dn,Mi())(r)}function tit(r){var t=r.chart,e=r.options,n=e.data,i=e.color,a=e.lineStyle,o=e.point,s=o==null?void 0:o.state,l=Mh(n);t.data(l);var u=Ze({},r,{options:{xField:hb,yField:ug,line:{color:i,style:a},point:o}}),c=Ze({},u,{options:{tooltip:!1,state:s}});return og(u),ps(c),t.axis(!1),t.legend(!1),r}function Mee(r){return xr(tit,cg,yn,Ta,Dn,Mi())(r)}var rit=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="tiny-line",e}return t.getDefaultOptions=function(){return Jnt},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this,i=n.chart,a=n.options;cg({chart:i,options:a}),i.changeData(Mh(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Mee},t}(Ar);function nit(r){var t=r.chart,e=r.options,n=e.data,i=e.color,a=e.columnStyle,o=e.columnWidthRatio,s=Mh(n);t.data(s);var l=Ze({},r,{options:{xField:hb,yField:ug,widthRatio:o,interval:{style:a,color:i}}});return ro(l),t.axis(!1),t.legend(!1),t.interaction("element-active"),r}function kee(r){return xr(yn,vs("columnStyle"),nit,cg,Ta,Dn,Mi())(r)}var iit={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(r,t){return""+ne(t,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},ait={appendPadding:2,tooltip:A({},iit),animation:{}},oit=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="tiny-column",e}return t.getDefaultOptions=function(){return ait},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this,i=n.chart,a=n.options;cg({chart:i,options:a}),i.changeData(Mh(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return kee},t}(Ar),sit={appendPadding:2,tooltip:A({},Tee),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},lit=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="tiny-area",e}return t.getDefaultOptions=function(){return sit},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this,i=n.chart,a=n.options;cg({chart:i,options:a}),i.changeData(Mh(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Aee},t}(Ar);function Iee(r,t,e){if(e===1)return[0,t];var n=Math.floor(r/t);return[t*n,t*(n+1)]}function uit(r){return Math.ceil(Math.log(r.length)/Math.LN2)+1}function Pee(r,t,e,n,i){var a=Mr(r);y3(a,t);var o=As(a,t),s=Z_(o),l=s.max-s.min,u=e;if(!e&&n&&(u=n>1?l/(n-1):s.max),!e&&!n){var c=uit(o);u=l/c}var f={},d=ao(a,i);oo(d)?G(a,function(v){var p=v[t],g=Iee(p,u,n),m=g[0]+"-"+g[1];Ml(f,m)||(f[m]={range:g,count:0}),f[m].count+=1}):Object.keys(d).forEach(function(v){G(d[v],function(p){var g=p[t],m=Iee(g,u,n),y=m[0]+"-"+m[1],b=y+"-"+v;Ml(f,b)||(f[b]={range:m,count:0},f[b][i]=v),f[b].count+=1})});var h=[];return G(f,function(v){h.push(v)}),h}var E2="range",vb="count",cit=Ze({},Ar.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function fit(r){var t=r.chart,e=r.options,n=e.data,i=e.binField,a=e.binNumber,o=e.binWidth,s=e.color,l=e.stackField,u=e.legend,c=e.columnStyle,f=Pee(n,i,o,a,l);t.data(f);var d=Ze({},r,{options:{xField:E2,yField:vb,seriesField:l,isStack:!0,interval:{color:s,style:c}}});return ro(d),u&&l&&t.legend(l,u),r}function dit(r){var t,e=r.options,n=e.xAxis,i=e.yAxis;return xr(Ai((t={},t[E2]=n,t[vb]=i,t)))(r)}function hit(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis;return n===!1?t.axis(E2,!1):t.axis(E2,n),i===!1?t.axis(vb,!1):t.axis(vb,i),r}function vit(r){var t=r.chart,e=r.options,n=e.label,i=to(t,"interval");if(!n)i.label(!1);else{var a=n.callback,o=Lr(n,["callback"]);i.label({fields:[vb],callback:a,cfg:_a(o)})}return r}function Dee(r){return xr(yn,vs("columnStyle"),fit,dit,hit,xf,vit,Ta,Kn,Dn)(r)}var pit=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="histogram",e}return t.getDefaultOptions=function(){return cit},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this.options,i=n.binField,a=n.binNumber,o=n.binWidth,s=n.stackField;this.chart.changeData(Pee(e,i,o,a,s))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Dee},t}(Ar),Ree=["#FAAD14","#E8EDF3"],git={percent:.2,color:Ree,animation:{}};function _R(r){var t=Yn(Sh(r)?r:0,0,1);return[{type:"current",percent:t},{type:"target",percent:1-t}]}function Oee(r){var t=r.chart,e=r.options,n=e.percent,i=e.progressStyle,a=e.color,o=e.barWidthRatio;t.data(_R(n));var s=Ze({},r,{options:{xField:"1",yField:"percent",seriesField:"type",isStack:!0,widthRatio:o,interval:{style:i,color:rt(a)?[a,Ree[1]]:a},args:{zIndexReversed:!0}}});return ro(s),t.tooltip(!1),t.axis(!1),t.legend(!1),r}function mit(r){var t=r.chart;return t.coordinate("rect").transpose(),r}function Lee(r){return xr(Oee,Ai({}),mit,Dn,yn,Mi())(r)}var yit=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="process",e}return t.getDefaultOptions=function(){return git},t.prototype.changeData=function(e){this.updateOption({percent:e}),this.chart.changeData(_R(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Lee},t}(Ar);function bit(r){var t=r.chart,e=r.options,n=e.innerRadius,i=e.radius;return t.coordinate("theta",{innerRadius:n,radius:i}),r}function Fee(r,t){var e=r.chart,n=r.options,i=n.innerRadius,a=n.statistic,o=n.percent,s=n.meta;if(e.getController("annotation").clear(!0),i&&a){var l=ne(s,["percent","formatter"])||function(c){return(c*100).toFixed(2)+"%"},u=a.content;u&&(u=Ze({},u,{content:Je(u.content)?l(o):u.content})),l2(e,{statistic:A(A({},a),{content:u}),plotType:"ring-progress"},{percent:o})}return t&&e.render(!0),r}function Nee(r){return xr(Oee,Ai({}),bit,Fee,Dn,yn,Mi())(r)}var xit={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},wit=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="ring-process",e}return t.getDefaultOptions=function(){return xit},t.prototype.changeData=function(e){this.chart.emit(Nr.BEFORE_CHANGE_DATA,ci.fromData(this.chart,Nr.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(_R(e)),Fee({chart:this.chart,options:this.options},!0),this.chart.emit(Nr.AFTER_CHANGE_DATA,ci.fromData(this.chart,Nr.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Nee},t}(Ar);function Sit(r){var t=r.chart,e=r.options,n=e.data,i=e.type,a=e.xField,o=e.yField,s=e.colorField,l=e.sizeField,u=e.sizeRatio,c=e.shape,f=e.color,d=e.tooltip,h=e.heatmapStyle;t.data(n);var v="polygon";i==="density"&&(v="heatmap");var p=Us(d,[a,o,s]),g=p.fields,m=p.formatter,y=1;return(u||u===0)&&(!c&&!l?console.warn("sizeRatio is not in effect: Must define shape or sizeField first"):u<0||u>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):y=u),qo(Ze({},r,{options:{type:v,colorField:s,tooltipFields:g,shapeField:l||"",label:void 0,mapping:{tooltip:m,shape:c&&(l?function(b){var x=n.map(function(C){return C[l]}),w=Math.min.apply(Math,x),S=Math.max.apply(Math,x);return[c,(ne(b,l)-w)/(S-w),y]}:function(){return[c,1,y]}),color:f||s&&t.getTheme().sequenceColors.join("-"),style:h}}})),r}function Cit(r){var t,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return xr(Ai((t={},t[a]=n,t[o]=i,t)))(r)}function Eit(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return n===!1?t.axis(a,!1):t.axis(a,n),i===!1?t.axis(o,!1):t.axis(o,i),r}function _it(r){var t=r.chart,e=r.options,n=e.legend,i=e.colorField,a=e.sizeField,o=e.sizeLegend,s=n!==!1;return i&&t.legend(i,s?n:!1),a&&t.legend(a,o===void 0?n:o),!s&&!o&&t.legend(!1),r}function Tit(r){var t=r.chart,e=r.options,n=e.label,i=e.colorField,a=e.type,o=to(t,a==="density"?"heatmap":"polygon");if(!n)o.label(!1);else if(i){var s=n.callback,l=Lr(n,["callback"]);o.label({fields:[i],callback:s,cfg:_a(l)})}return r}function Ait(r){var t=r.chart,e=r.options,n=e.coordinate,i=e.reflect;return n&&t.coordinate({type:n.type||"rect",cfg:n.cfg}),i&&t.coordinate().reflect(i),r}function Mit(r){return xr(yn,vs("heatmapStyle"),Cit,Ait,Sit,Eit,_it,Ta,Tit,Mi(),Kn,Dn,xf)(r)}var kit=Ze({},Ar.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});En("polygon","circle",{draw:function(r,t){var e,n,i=r.x,a=r.y,o=this.parsePoints(r.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),u=Math.min(s,l)/2,c=Number(r.shape[1]),f=Number(r.shape[2]),d=Math.sqrt(f),h=u*d*Math.sqrt(c),v=((e=r.style)===null||e===void 0?void 0:e.fill)||r.color||((n=r.defaultStyle)===null||n===void 0?void 0:n.fill),p=t.addShape("circle",{attrs:A(A(A({x:i,y:a,r:h},r.defaultStyle),r.style),{fill:v})});return p}});En("polygon","square",{draw:function(r,t){var e,n,i=r.x,a=r.y,o=this.parsePoints(r.points),s=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),u=Math.min(s,l),c=Number(r.shape[1]),f=Number(r.shape[2]),d=Math.sqrt(f),h=u*d*Math.sqrt(c),v=((e=r.style)===null||e===void 0?void 0:e.fill)||r.color||((n=r.defaultStyle)===null||n===void 0?void 0:n.fill),p=t.addShape("rect",{attrs:A(A(A({x:i-h/2,y:a-h/2,width:h,height:h},r.defaultStyle),r.style),{fill:v})});return p}});(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="heatmap",e}return t.getDefaultOptions=function(){return kit},t.prototype.getSchemaAdaptor=function(){return Mit},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t})(Ar);var TR,fg="$$range$$",Iit="low-q1-median-q3-high",Pit="$$y_outliers$$",Bee="outliers_view",Dit=Ze({},Ar.getDefaultOptions(),{meta:(TR={},TR[fg]={min:0,alias:Iit},TR),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),$ee=function(r,t){var e=r;if(Array.isArray(t)){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4];e=Gn(r,function(l){return l[fg]=[l[n],l[i],l[a],l[o],l[s]],l})}return e};function Rit(r){var t=r.chart,e=r.options,n=e.xField,i=e.yField,a=e.groupField,o=e.color,s=e.tooltip,l=e.boxStyle;t.data($ee(e.data,i));var u=qe(i)?fg:i,c=i?qe(i)?i:[i]:[],f=s;f!==!1&&(f=Ze({},{fields:qe(i)?i:[]},f));var d=gR(Ze({},r,{options:{xField:n,yField:u,seriesField:a,tooltip:f,rawFields:c,label:!1,schema:{shape:"box",color:o,style:l}}})).ext;return a&&d.geometry.adjust("dodge"),r}function Oit(r){var t=r.chart,e=r.options,n=e.xField,i=e.data,a=e.outliersField,o=e.outliersStyle,s=e.padding,l=e.label;if(!a)return r;var u=t.createView({padding:s,id:Bee}),c=i.reduce(function(f,d){var h=d[a];return h.forEach(function(v){var p;return f.push(A(A({},d),(p={},p[a]=v,p)))}),f},[]);return u.data(c),ps({chart:u,options:{xField:n,yField:a,point:{shape:"circle",style:o},label:l}}),u.axis(!1),r}function Lit(r){var t,e,n=r.chart,i=r.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,u=i.yField,c=i.outliersField,f=Array.isArray(u)?fg:u,d={};if(c){var h=Pit;d=(t={},t[c]={sync:h,nice:!0},t[f]={sync:h,nice:!0},t)}var v=Ze(d,a,(e={},e[l]=Pn(o,Xo),e[f]=Pn(s,Xo),e));return n.scale(v),r}function Fit(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField,s=Array.isArray(o)?fg:o;return n===!1?t.axis(a,!1):t.axis(a,n),i===!1?t.axis(fg,!1):t.axis(s,i),r}function Nit(r){var t=r.chart,e=r.options,n=e.legend,i=e.groupField;return i?n?t.legend(i,n):t.legend(i,{position:"bottom"}):t.legend(!1),r}function Bit(r){return xr(Rit,Oit,Lit,Fit,Nit,Ta,Kn,Dn,yn)(r)}(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="box",e}return t.getDefaultOptions=function(){return Dit},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this.options.yField,i=this.chart.views.find(function(a){return a.id===Bee});i&&i.data(e),this.chart.changeData($ee(e,n))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Bit},t})(Ar);var no=Rr(function(r){var t=r.exports;r.exports.isNumber=function(e){return typeof e=="number"},r.exports.findMin=function(e){if(e.length===0)return 1/0;for(var n=e[0],i=1;i<e.length;i++)n=Math.min(n,e[i]);return n},r.exports.findMax=function(e){if(e.length===0)return-1/0;for(var n=e[0],i=1;i<e.length;i++)n=Math.max(n,e[i]);return n},r.exports.findMinMulti=function(e){for(var n=t.findMin(e[0]),i=1;i<e.length;i++)n=Math.min(n,t.findMin(e[i]));return n},r.exports.findMaxMulti=function(e){for(var n=t.findMax(e[0]),i=1;i<e.length;i++)n=Math.max(n,t.findMax(e[i]));return n},r.exports.inside=function(e,n,i){return e<=i&&i<=n}});no.isNumber;no.findMin;no.findMax;no.findMinMulti;no.findMaxMulti;no.inside;var kh=Rr(function(r){var t=50,e=2,n=Math.log(2),i=r.exports;function a(s){return 1-Math.abs(s)}r.exports.getUnifiedMinMax=function(s,l){return i.getUnifiedMinMaxMulti([s],l)},r.exports.getUnifiedMinMaxMulti=function(s,l){l=l||{};var u=!1,c=!1,f=no.isNumber(l.width)?l.width:e,d=no.isNumber(l.size)?l.size:t,h=no.isNumber(l.min)?l.min:(u=!0,no.findMinMulti(s)),v=no.isNumber(l.max)?l.max:(c=!0,no.findMaxMulti(s)),p=v-h,g=p/(d-1);return u&&(h=h-2*f*g),c&&(v=v+2*f*g),{min:h,max:v}},r.exports.create=function(s,l){if(l=l||{},!s||s.length===0)return[];var u=no.isNumber(l.size)?l.size:t,c=no.isNumber(l.width)?l.width:e,f=i.getUnifiedMinMax(s,{size:u,width:c,min:l.min,max:l.max}),d=f.min,h=f.max,v=h-d,p=v/(u-1);if(v===0)return[{x:d,y:1}];for(var g=[],m=0;m<u;m++)g.push({x:d+m*p,y:0});var y=function(E){return Math.floor((E-d)/p)},b=o(a,c),x=b[c],w=b[c-1]-b[c-2],S=0;s.forEach(function(E){var M=y(E);if(!(M+c<0||M-c>=g.length)){var k=Math.max(M-c,0),P=M,F=Math.min(M+c,g.length-1),$=k-(M-c),R=M+c-F,L=b[-c-1+$]||0,O=b[-c-1+R]||0,B=x/(x-L-O);$>0&&(S+=B*($-1)*w);var U=Math.max(0,M-c+1);no.inside(0,g.length-1,U)&&(g[U].y+=B*1*w),no.inside(0,g.length-1,P+1)&&(g[P+1].y-=B*2*w),no.inside(0,g.length-1,F+1)&&(g[F+1].y+=B*1*w)}});var C=S,_=0,T=0;return g.forEach(function(E){_+=E.y,C+=_,E.y=C,T+=C}),T>0&&g.forEach(function(E){E.y/=T}),g};function o(s,l){for(var u={},c=0,f=-l;f<=l;f++)c+=s(f/l),u[f]=c;return u}r.exports.getExpectedValueFromPdf=function(s){if(!(!s||s.length===0)){var l=0;return s.forEach(function(u){l+=u.x*u.y}),l}},r.exports.getXWithLeftTailArea=function(s,l){if(!(!s||s.length===0)){for(var u=0,c=0,f=0;f<s.length&&(c=f,u+=s[f].y,!(u>=l));f++);return s[c].x}},r.exports.getPerplexity=function(s){if(!(!s||s.length===0)){var l=0;return s.forEach(function(u){var c=Math.log(u.y);isFinite(c)&&(l+=u.y*c)}),l=-l/n,Math.pow(2,l)}}});kh.getUnifiedMinMax;kh.getUnifiedMinMaxMulti;kh.create;kh.getExpectedValueFromPdf;kh.getXWithLeftTailArea;kh.getPerplexity;function zee(r,t){var e=r.length*t;if(r.length===0)throw new Error("quantile requires at least one data point.");if(t<0||t>1)throw new Error("quantiles must be between 0 and 1");return t===1?r[r.length-1]:t===0?r[0]:e%1!=0?r[Math.ceil(e)-1]:r.length%2==0?(r[e-1]+r[e])/2:r[e]}function pb(r,t,e){var n=r[t];r[t]=r[e],r[e]=n}function _2(r,t,e,n){for(e=e||0,n=n||r.length-1;n>e;){if(n-e>600){var i=n-e+1,a=t-e+1,o=Math.log(i),s=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*s*(i-s)/i);a-i/2<0&&(l*=-1);var u=Math.max(e,Math.floor(t-a*s/i+l)),c=Math.min(n,Math.floor(t+(i-a)*s/i+l));_2(r,t,u,c)}var f=r[t],d=e,h=n;for(pb(r,e,t),r[n]>f&&pb(r,e,n);d<h;){for(pb(r,d,h),d++,h--;r[d]<f;)d++;for(;r[h]>f;)h--}r[e]===f?pb(r,e,h):(h++,pb(r,h,n)),h<=t&&(e=h+1),t<=h&&(n=h-1)}}function gb(r,t){var e=r.slice();if(Array.isArray(t)){$it(e,t);for(var n=[],i=0;i<t.length;i++)n[i]=zee(e,t[i]);return n}else{var a=Uee(e.length,t);return Gee(e,a,0,e.length-1),zee(e,t)}}function Gee(r,t,e,n){t%1==0?_2(r,t,e,n):(t=Math.floor(t),_2(r,t,e,n),_2(r,t+1,t+1,n))}function $it(r,t){for(var e=[0],n=0;n<t.length;n++)e.push(Uee(r.length,t[n]));e.push(r.length-1),e.sort(zit);for(var i=[0,e.length-1];i.length;){var a=Math.ceil(i.pop()),o=Math.floor(i.pop());if(!(a-o<=1)){var s=Math.floor((o+a)/2);Gee(r,e[s],Math.floor(e[o]),Math.ceil(e[a])),i.push(o,s,s,a)}}}function zit(r,t){return r-t}function Uee(r,t){var e=r*t;return t===1?r-1:t===0?0:e%1!=0?Math.ceil(e)-1:r%2==0?e-.5:e}var Vee=function(r){return{low:ia(r),high:ji(r),q1:gb(r,.25),q3:gb(r,.75),median:gb(r,[.5]),minMax:[ia(r),ji(r)],quantile:[gb(r,.25),gb(r,.75)]}},Hee=function(r,t){var e=kh.create(r,t);return{violinSize:e.map(function(n){return n.y}),violinY:e.map(function(n){return n.x})}},Wee=function(r){var t=r.xField,e=r.yField,n=r.seriesField,i=r.data,a=r.kde,o={min:a.min,max:a.max,size:a.sampleSize,width:a.width};if(!n){var s=ao(i,t);return Object.keys(s).map(function(c){var f=s[c],d=f.map(function(h){return h[e]});return A(A({x:c},Hee(d,o)),Vee(d))})}var l=[],u=ao(i,n);return Object.keys(u).forEach(function(c){var f=ao(u[c],t);return Object.keys(f).forEach(function(d){var h,v=f[d],p=v.map(function(g){return g[e]});l.push(A(A((h={x:d},h[n]=c,h),Hee(p,o)),Vee(p)))})}),l},Vs="x",Ih="violinY",Git="violinSize",jee="minMax",Yee="quantile",Xee="median",AR="violin_view",Uit="min_max_view",Vit="quantile_view",Hit="median_view",Wit=Ze({},Ar.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),T2=["low","high","q1","q3","median"],A2=[{type:"dodge",marginRatio:1/32}];function jit(r){var t=r.chart,e=r.options;return t.data(Wee(e)),r}function Yit(r){var t=r.chart,e=r.options,n=e.seriesField,i=e.color,a=e.shape,o=a===void 0?"violin":a,s=e.violinStyle,l=e.tooltip,u=e.state,c=t.createView({id:AR});return xtt({chart:c,options:{xField:Vs,yField:Ih,seriesField:n||Vs,sizeField:Git,tooltip:A({fields:T2},l),violin:{style:s,color:i,shape:o},state:u}}),c.geometries[0].adjust(A2),r}function Xit(r){var t=r.chart,e=r.options,n=e.seriesField,i=e.color,a=e.tooltip,o=e.box;if(o===!1)return r;var s=t.createView({id:Uit});ro({chart:s,options:{xField:Vs,yField:jee,seriesField:n||Vs,tooltip:A({fields:T2},a),state:typeof o=="object"?o.state:{},interval:{color:i,size:1,style:{lineWidth:0}}}}),s.geometries[0].adjust(A2);var l=t.createView({id:Vit});ro({chart:l,options:{xField:Vs,yField:Yee,seriesField:n||Vs,tooltip:A({fields:T2},a),state:typeof o=="object"?o.state:{},interval:{color:i,size:8,style:{fillOpacity:1}}}}),l.geometries[0].adjust(A2);var u=t.createView({id:Hit});return ps({chart:u,options:{xField:Vs,yField:Xee,seriesField:n||Vs,tooltip:A({fields:T2},a),state:typeof o=="object"?o.state:{},point:{color:i,size:1,style:{fill:"white",lineWidth:0}}}}),u.geometries[0].adjust(A2),l.axis(!1),s.axis(!1),u.axis(!1),u.legend(!1),s.legend(!1),l.legend(!1),r}function qit(r){var t,e=r.chart,n=r.options,i=n.meta,a=n.xAxis,o=n.yAxis,s={},l=Ze(s,i,(t={},t[Vs]=A(A({sync:!0},Pn(a,Xo)),{type:"cat"}),t[Ih]=A({sync:!0},Pn(o,Xo)),t[jee]=A({sync:Ih},Pn(o,Xo)),t[Yee]=A({sync:Ih},Pn(o,Xo)),t[Xee]=A({sync:Ih},Pn(o,Xo)),t));return e.scale(l),r}function Kit(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=Yr(t,AR);return n===!1?a.axis(Vs,!1):a.axis(Vs,n),i===!1?a.axis(Ih,!1):a.axis(Ih,i),t.axis(!1),r}function Zit(r){var t=r.chart,e=r.options,n=e.legend,i=e.seriesField,a=e.shape;if(n===!1)t.legend(!1);else{var o=i||Vs,s=Ux(n,["selected"]);(!a||!a.startsWith("hollow"))&&(ne(s,["marker","style","lineWidth"])||Xi(s,["marker","style","lineWidth"],0)),t.legend(o,s),ne(n,"selected")&&G(t.views,function(l){return l.legend(o,n)})}return r}function Qit(r){var t=r.chart,e=Yr(t,AR);return Mi()(A(A({},r),{chart:e})),r}function Jit(r){var t=r.chart,e=r.options,n=e.animation;return G(t.views,function(i){typeof n=="boolean"?i.animate(n):i.animate(!0),G(i.geometries,function(a){a.animate(n)})}),r}function eat(r){return xr(yn,jit,Yit,Xit,qit,Ta,Kit,Zit,Kn,Qit,Jit)(r)}(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="violin",e}return t.getDefaultOptions=function(){return Wit},t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(Wee(this.options))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return eat},t})(Ar);var tat=function(r){return function(t,e){var n=[];return n[0]=r(t[0],e[0]),n[1]=r(t[1],e[1]),n[2]=r(t[2],e[2]),n}},qee={normal:function(r){return r},multiply:function(r,t){return r*t/255},screen:function(r,t){return 255*(1-(1-r/255)*(1-t/255))},overlay:function(r,t){return t<128?2*r*t/255:255*(1-2*(1-r/255)*(1-t/255))},darken:function(r,t){return r>t?t:r},lighten:function(r,t){return r>t?r:t},dodge:function(r,t){return r===255?255:(r=255*(t/255)/(1-r/255),r>255?255:r)},burn:function(r,t){return t===255?255:r===0?0:255*(1-Math.min(1,(1-t/255)/(r/255)))}},rat=function(r){if(!qee[r])throw new Error("unknown blend mode "+r);return qee[r]};function nat(r,t,e){e===void 0&&(e="normal");var n=tat(rat(e))(M2(r),M2(t)),i=M2(r),a=i[0],o=i[1],s=i[2],l=i[3],u=M2(t),c=u[0],f=u[1],d=u[2],h=u[3],v=Number((l+h*(1-l)).toFixed(2)),p=Math.round((l*(1-h)*(a/255)+l*h*(n[0]/255)+(1-l)*h*(c/255))/v*255),g=Math.round((l*(1-h)*(o/255)+l*h*(n[1]/255)+(1-l)*h*(f/255))/v*255),m=Math.round((l*(1-h)*(s/255)+l*h*(n[2]/255)+(1-l)*h*(d/255))/v*255);return"rgba("+p+", "+g+", "+m+", "+v+")"}function M2(r){var t=r.replace("/s+/g",""),e;return typeof t=="string"&&!t.startsWith("rgba")&&!t.startsWith("#")?e=uf.rgb2arr(uf.toRGB(t)).concat([1]):(t.startsWith("rgba")&&(e=t.replace("rgba(","").replace(")","").split(",")),t.startsWith("#")&&(e=uf.rgb2arr(t).concat([1])),e.map(function(n,i){return i===3?Number(n):n|0}))}function iat(r,t,e,n){n=n||{};var i=n.maxIterations||100,a=n.tolerance||1e-10,o=r(t),s=r(e),l=e-t;if(o*s>0)throw"Initial bisect points must have opposite signs";if(o===0)return t;if(s===0)return e;for(var u=0;u<i;++u){l/=2;var c=t+l,f=r(c);if(f*o>=0&&(t=c),Math.abs(l)<a||f===0)return c}return t+l}function MR(r){for(var t=new Array(r),e=0;e<r;++e)t[e]=0;return t}function Kee(r,t){return MR(r).map(function(){return MR(t)})}function dg(r,t){for(var e=0,n=0;n<r.length;++n)e+=r[n]*t[n];return e}function kR(r){return Math.sqrt(dg(r,r))}function IR(r,t,e){for(var n=0;n<t.length;++n)r[n]=t[n]*e}function Zu(r,t,e,n,i){for(var a=0;a<r.length;++a)r[a]=t*e[a]+n*i[a]}function Zee(r,t,e){e=e||{};var n=e.maxIterations||t.length*200,i=e.nonZeroDelta||1.05,a=e.zeroDelta||.001,o=e.minErrorDelta||1e-6,s=e.minErrorDelta||1e-5,l=e.rho!==void 0?e.rho:1,u=e.chi!==void 0?e.chi:2,c=e.psi!==void 0?e.psi:-.5,f=e.sigma!==void 0?e.sigma:.5,d,h=t.length,v=new Array(h+1);v[0]=t,v[0].fx=r(t),v[0].id=0;for(var p=0;p<h;++p){var g=t.slice();g[p]=g[p]?g[p]*i:a,v[p+1]=g,v[p+1].fx=r(g),v[p+1].id=p+1}function m(k){for(var P=0;P<k.length;P++)v[h][P]=k[P];v[h].fx=k.fx}for(var y=function(k,P){return k.fx-P.fx},b=t.slice(),x=t.slice(),w=t.slice(),S=t.slice(),C=0;C<n;++C){if(v.sort(y),e.history){var _=v.map(function(k){var P=k.slice();return P.fx=k.fx,P.id=k.id,P});_.sort(function(k,P){return k.id-P.id}),e.history.push({x:v[0].slice(),fx:v[0].fx,simplex:_})}for(d=0,p=0;p<h;++p)d=Math.max(d,Math.abs(v[0][p]-v[1][p]));if(Math.abs(v[0].fx-v[h].fx)<o&&d<s)break;for(p=0;p<h;++p){b[p]=0;for(var T=0;T<h;++T)b[p]+=v[T][p];b[p]/=h}var E=v[h];if(Zu(x,1+l,b,-l,E),x.fx=r(x),x.fx<v[0].fx)Zu(S,1+u,b,-u,E),S.fx=r(S),S.fx<x.fx?m(S):m(x);else if(x.fx>=v[h-1].fx){var M=!1;if(x.fx>E.fx?(Zu(w,1+c,b,-c,E),w.fx=r(w),w.fx<E.fx?m(w):M=!0):(Zu(w,1-c*l,b,c*l,E),w.fx=r(w),w.fx<x.fx?m(w):M=!0),M){if(f>=1)break;for(p=1;p<v.length;++p)Zu(v[p],1-f,v[0],f,v[p]),v[p].fx=r(v[p])}}else m(x)}return v.sort(y),{fx:v[0].fx,x:v[0]}}function aat(r,t,e,n,i,a,o){var s=e.fx,l=dg(e.fxprime,t),u=s,c=s,f=l,d=0;i=i||1,a=a||1e-6,o=o||.1;function h(p,g,m){for(var y=0;y<16;++y)if(i=(p+g)/2,Zu(n.x,1,e.x,i,t),u=n.fx=r(n.x,n.fxprime),f=dg(n.fxprime,t),u>s+a*i*l||u>=m)g=i;else{if(Math.abs(f)<=-o*l)return i;f*(g-p)>=0&&(g=p),p=i,m=u}return 0}for(var v=0;v<10;++v){if(Zu(n.x,1,e.x,i,t),u=n.fx=r(n.x,n.fxprime),f=dg(n.fxprime,t),u>s+a*i*l||v&&u>=c)return h(d,i,c);if(Math.abs(f)<=-o*l)return i;if(f>=0)return h(i,d,u);c=u,d=i,i*=2}return i}function oat(r,t,e){var n={x:t.slice(),fx:0,fxprime:t.slice()},i={x:t.slice(),fx:0,fxprime:t.slice()},a=t.slice(),o,s,l=1,u;e=e||{},u=e.maxIterations||t.length*20,n.fx=r(n.x,n.fxprime),o=n.fxprime.slice(),IR(o,n.fxprime,-1);for(var c=0;c<u;++c){if(l=aat(r,o,n,i,l),e.history&&e.history.push({x:n.x.slice(),fx:n.fx,fxprime:n.fxprime.slice(),alpha:l}),!l)IR(o,n.fxprime,-1);else{Zu(a,1,i.fxprime,-1,n.fxprime);var f=dg(n.fxprime,n.fxprime),d=Math.max(0,dg(a,i.fxprime)/f);Zu(o,d,o,-1,i.fxprime),s=n,n=i,i=s}if(kR(n.fxprime)<=1e-5)break}return e.history&&e.history.push({x:n.x.slice(),fx:n.fx,fxprime:n.fxprime.slice(),alpha:l}),n}var Qee=1e-10;function PR(r,t){var e=lat(r),n=e.filter(function(C){return sat(C,r)}),i=0,a=0,o,s=[];if(n.length>1){var l=tte(n);for(o=0;o<n.length;++o){var u=n[o];u.angle=Math.atan2(u.x-l.x,u.y-l.y)}n.sort(function(C,_){return _.angle-C.angle});var c=n[n.length-1];for(o=0;o<n.length;++o){var f=n[o];a+=(c.x+f.x)*(f.y-c.y);for(var d={x:(f.x+c.x)/2,y:(f.y+c.y)/2},h=null,v=0;v<f.parentIndex.length;++v)if(c.parentIndex.indexOf(f.parentIndex[v])>-1){var p=r[f.parentIndex[v]],g=Math.atan2(f.x-p.x,f.y-p.y),m=Math.atan2(c.x-p.x,c.y-p.y),y=m-g;y<0&&(y+=2*Math.PI);var b=m-y/2,x=dl(d,{x:p.x+p.radius*Math.sin(b),y:p.y+p.radius*Math.cos(b)});x>p.radius*2&&(x=p.radius*2),(h===null||h.width>x)&&(h={circle:p,width:x,p1:f,p2:c})}h!==null&&(s.push(h),i+=DR(h.circle.radius,h.width),c=f)}}else{var w=r[0];for(o=1;o<r.length;++o)r[o].radius<w.radius&&(w=r[o]);var S=!1;for(o=0;o<r.length;++o)if(dl(r[o],w)>Math.abs(w.radius-r[o].radius)){S=!0;break}S?i=a=0:(i=w.radius*w.radius*Math.PI,s.push({circle:w,p1:{x:w.x,y:w.y+w.radius},p2:{x:w.x-Qee,y:w.y+w.radius},width:w.radius*2}))}return a/=2,t&&(t.area=i+a,t.arcArea=i,t.polygonArea=a,t.arcs=s,t.innerPoints=n,t.intersectionPoints=e),i+a}function sat(r,t){for(var e=0;e<t.length;++e)if(dl(r,t[e])>t[e].radius+Qee)return!1;return!0}function lat(r){for(var t=[],e=0;e<r.length;++e)for(var n=e+1;n<r.length;++n)for(var i=ete(r[e],r[n]),a=0;a<i.length;++a){var o=i[a];o.parentIndex=[e,n],t.push(o)}return t}function DR(r,t){return r*r*Math.acos(1-t/r)-(r-t)*Math.sqrt(t*(2*r-t))}function dl(r,t){return Math.sqrt((r.x-t.x)*(r.x-t.x)+(r.y-t.y)*(r.y-t.y))}function Jee(r,t,e){if(e>=r+t)return 0;if(e<=Math.abs(r-t))return Math.PI*Math.min(r,t)*Math.min(r,t);var n=r-(e*e-t*t+r*r)/(2*e),i=t-(e*e-r*r+t*t)/(2*e);return DR(r,n)+DR(t,i)}function ete(r,t){var e=dl(r,t),n=r.radius,i=t.radius;if(e>=n+i||e<=Math.abs(n-i))return[];var a=(n*n-i*i+e*e)/(2*e),o=Math.sqrt(n*n-a*a),s=r.x+a*(t.x-r.x)/e,l=r.y+a*(t.y-r.y)/e,u=-(t.y-r.y)*(o/e),c=-(t.x-r.x)*(o/e);return[{x:s+u,y:l-c},{x:s-u,y:l+c}]}function tte(r){for(var t={x:0,y:0},e=0;e<r.length;++e)t.x+=r[e].x,t.y+=r[e].y;return t.x/=r.length,t.y/=r.length,t}function uat(r,t){t=t||{},t.maxIterations=t.maxIterations||500;var e=t.initialLayout||hat,n=t.lossFunction||OR;r=cat(r);var i=e(r,t),a=[],o=[],s;for(s in i)i.hasOwnProperty(s)&&(a.push(i[s].x),a.push(i[s].y),o.push(s));for(var l=Zee(function(f){for(var d={},h=0;h<o.length;++h){var v=o[h];d[v]={x:f[2*h],y:f[2*h+1],radius:i[v].radius}}return n(d,r)},a,t),u=l.x,c=0;c<o.length;++c)s=o[c],i[s].x=u[2*c],i[s].y=u[2*c+1];return i}var rte=1e-10;function RR(r,t,e){return Math.min(r,t)*Math.min(r,t)*Math.PI<=e+rte?Math.abs(r-t):iat(function(n){return Jee(r,t,n)-e},0,r+t)}function cat(r){r=r.slice();var t=[],e={},n,i,a,o;for(n=0;n<r.length;++n){var s=r[n];s.sets.length==1?t.push(s.sets[0]):s.sets.length==2&&(a=s.sets[0],o=s.sets[1],e[[a,o]]=!0,e[[o,a]]=!0)}for(t.sort(function(l,u){return l>u?1:-1}),n=0;n<t.length;++n)for(a=t[n],i=n+1;i<t.length;++i)o=t[i],[a,o]in e||r.push({sets:[a,o],size:0});return r}function fat(r,t,e){var n=Kee(t.length,t.length),i=Kee(t.length,t.length);return r.filter(function(a){return a.sets.length==2}).map(function(a){var o=e[a.sets[0]],s=e[a.sets[1]],l=Math.sqrt(t[o].size/Math.PI),u=Math.sqrt(t[s].size/Math.PI),c=RR(l,u,a.size);n[o][s]=n[s][o]=c;var f=0;a.size+1e-10>=Math.min(t[o].size,t[s].size)?f=1:a.size<=1e-10&&(f=-1),i[o][s]=i[s][o]=f}),{distances:n,constraints:i}}function dat(r,t,e,n){var i=0,a;for(a=0;a<t.length;++a)t[a]=0;for(a=0;a<e.length;++a)for(var o=r[2*a],s=r[2*a+1],l=a+1;l<e.length;++l){var u=r[2*l],c=r[2*l+1],f=e[a][l],d=n[a][l],h=(u-o)*(u-o)+(c-s)*(c-s),v=Math.sqrt(h),p=h-f*f;d>0&&v<=f||d<0&&v>=f||(i+=2*p*p,t[2*a]+=4*p*(o-u),t[2*a+1]+=4*p*(s-c),t[2*l]+=4*p*(u-o),t[2*l+1]+=4*p*(c-s))}return i}function hat(r,t){var e=pat(r,t),n=t.lossFunction||OR;if(r.length>=8){var i=vat(r,t),a=n(i,r),o=n(e,r);a+1e-8<o&&(e=i)}return e}function vat(r,t){t=t||{};var e=t.restarts||10,n=[],i={},a;for(a=0;a<r.length;++a){var o=r[a];o.sets.length==1&&(i[o.sets[0]]=n.length,n.push(o))}var s=fat(r,n,i),l=s.distances,u=s.constraints,c=kR(l.map(kR))/l.length;l=l.map(function(y){return y.map(function(b){return b/c})});var f=function(y,b){return dat(y,b,l,u)},d,h;for(a=0;a<e;++a){var v=MR(l.length*2).map(Math.random);h=oat(f,v,t),(!d||h.fx<d.fx)&&(d=h)}var p=d.x,g={};for(a=0;a<n.length;++a){var m=n[a];g[m.sets[0]]={x:p[2*a]*c,y:p[2*a+1]*c,radius:Math.sqrt(m.size/Math.PI)}}if(t.history)for(a=0;a<t.history.length;++a)IR(t.history[a].x,c);return g}function pat(r,t){for(var e=t&&t.lossFunction?t.lossFunction:OR,n={},i={},a,o=0;o<r.length;++o){var s=r[o];s.sets.length==1&&(a=s.sets[0],n[a]={x:1e10,y:1e10,rowid:Object.keys(n).length,size:s.size,radius:Math.sqrt(s.size/Math.PI)},i[a]=[])}r=r.filter(function(R){return R.sets.length==2});for(var o=0;o<r.length;++o){var l=r[o],u=l.hasOwnProperty("weight")?l.weight:1,c=l.sets[0],f=l.sets[1];l.size+rte>=Math.min(n[c].size,n[f].size)&&(u=0),i[c].push({set:f,size:l.size,weight:u}),i[f].push({set:c,size:l.size,weight:u})}var d=[];for(a in i)if(i.hasOwnProperty(a)){for(var h=0,o=0;o<i[a].length;++o)h+=i[a][o].size*i[a][o].weight;d.push({set:a,size:h})}function v(R,L){return L.size-R.size}d.sort(v);var p={};function g(R){return R.set in p}function m(R,L){n[L].x=R.x,n[L].y=R.y,p[L]=!0}m({x:0,y:0},d[0].set);for(var o=1;o<d.length;++o){var y=d[o].set,b=i[y].filter(g);if(a=n[y],b.sort(v),b.length===0)throw"ERROR: missing pairwise overlap information";for(var x=[],w=0;w<b.length;++w){var S=n[b[w].set],C=RR(a.radius,S.radius,b[w].size);x.push({x:S.x+C,y:S.y}),x.push({x:S.x-C,y:S.y}),x.push({y:S.y+C,x:S.x}),x.push({y:S.y-C,x:S.x});for(var _=w+1;_<b.length;++_)for(var T=n[b[_].set],E=RR(a.radius,T.radius,b[_].size),M=ete({x:S.x,y:S.y,radius:C},{x:T.x,y:T.y,radius:E}),k=0;k<M.length;++k)x.push(M[k])}for(var P=1e50,F=x[0],w=0;w<x.length;++w){n[y].x=x[w].x,n[y].y=x[w].y;var $=e(n,r);$<P&&(P=$,F=x[w])}m(F,y)}return n}function OR(r,t){var e=0;function n(c){return c.map(function(f){return r[f]})}for(var i=0;i<t.length;++i){var a=t[i],o=void 0;if(a.sets.length!=1){if(a.sets.length==2){var s=r[a.sets[0]],l=r[a.sets[1]];o=Jee(s.radius,l.radius,dl(s,l))}else o=PR(n(a.sets));var u=a.hasOwnProperty("weight")?a.weight:1;e+=u*(o-a.size)*(o-a.size)}}return e}function gat(r){var t=function(e){var n=Math.max.apply(null,r.map(function(a){return a[e]+a.radius})),i=Math.min.apply(null,r.map(function(a){return a[e]-a.radius}));return{max:n,min:i}};return{xRange:t("x"),yRange:t("y")}}function mat(r,t,e,n){var i=[],a=[];for(var o in r)r.hasOwnProperty(o)&&(a.push(o),i.push(r[o]));t-=2*n,e-=2*n;var s=gat(i),l=s.xRange,u=s.yRange;if(l.max==l.min||u.max==u.min)return console.log("not scaling solution: zero size detected"),r;for(var c=t/(l.max-l.min),f=e/(u.max-u.min),d=Math.min(f,c),h=(t-(l.max-l.min)*d)/2,v=(e-(u.max-u.min)*d)/2,p={},g=0;g<i.length;++g){var m=i[g];p[a[g]]={radius:d*m.radius,x:n+h+(m.x-l.min)*d,y:n+v+(m.y-u.min)*d}}return p}function LR(r,t,e){var n=t[0].radius-dl(t[0],r),i,a;for(i=1;i<t.length;++i)a=t[i].radius-dl(t[i],r),a<=n&&(n=a);for(i=0;i<e.length;++i)a=dl(e[i],r)-e[i].radius,a<=n&&(n=a);return n}function nte(r,t){var e=[],n;for(n=0;n<r.length;++n){var i=r[n];e.push({x:i.x,y:i.y}),e.push({x:i.x+i.radius/2,y:i.y}),e.push({x:i.x-i.radius/2,y:i.y}),e.push({x:i.x,y:i.y+i.radius/2}),e.push({x:i.x,y:i.y-i.radius/2})}var a=e[0],o=LR(e[0],r,t);for(n=1;n<e.length;++n){var s=LR(e[n],r,t);s>=o&&(a=e[n],o=s)}var l=Zee(function(d){return-1*LR({x:d[0],y:d[1]},r,t)},[a.x,a.y],{maxIterations:500,minErrorDelta:1e-10}).x,u={x:l[0],y:l[1]},c=!0;for(n=0;n<r.length;++n)if(dl(u,r[n])>r[n].radius){c=!1;break}for(n=0;n<t.length;++n)if(dl(u,t[n])<t[n].radius){c=!1;break}if(!c)if(r.length==1)u={x:r[0].x,y:r[0].y};else{var f={};PR(r,f),f.arcs.length===0?u={x:0,y:-1e3,disjoint:!0}:f.arcs.length==1?u={x:f.arcs[0].circle.x,y:f.arcs[0].circle.y}:t.length?u=nte(r,[]):u=tte(f.arcs.map(function(d){return d.p1}))}return u}function yat(r){var t={},e=[];for(var n in r)e.push(n),t[n]=[];for(var i=0;i<e.length;i++)for(var a=r[e[i]],o=i+1;o<e.length;++o){var s=r[e[o]],l=dl(a,s);l+s.radius<=a.radius+1e-10?t[e[o]].push(e[i]):l+a.radius<=s.radius+1e-10&&t[e[i]].push(e[o])}return t}function bat(r,t){for(var e={},n=yat(r),i=0;i<t.length;++i){for(var a=t[i].sets,o={},s={},l=0;l<a.length;++l){o[a[l]]=!0;for(var u=n[a[l]],c=0;c<u.length;++c)s[u[c]]=!0}var f=[],d=[];for(var h in r)h in o?f.push(r[h]):h in s||d.push(r[h]);var v=nte(f,d);e[a]=v,v.disjoint&&t[i].size>0&&console.log("WARNING: area "+a+" not represented on screen")}return e}function xat(r,t,e){var n=[],i=r-e,a=t;return n.push("M",i,a),n.push("A",e,e,0,1,0,i+2*e,a),n.push("A",e,e,0,1,0,i,a),n.join(" ")}function wat(r){var t={};PR(r,t);var e=t.arcs;if(e.length===0)return"M 0 0";if(e.length==1){var n=e[0].circle;return xat(n.x,n.y,n.radius)}else{for(var i=[`
M`,e[0].p2.x,e[0].p2.y],a=0;a<e.length;++a){var o=e[a],s=o.circle.radius,l=o.width>s;i.push(`
A`,s,s,0,l?1:0,1,o.p1.x,o.p1.y)}return i.join(" ")}}var Qu="id",FR="path",Sat={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(r){return{name:r.id,value:r.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]},Cat=Jf(function(r,t,e,n){var i=new Map,a=r.length;return t.forEach(function(o,s){if(o[n].length===1)i.set(o[Qu],r[(s+a)%a]);else{var l=o[n].map(function(u){return i.get(u)});i.set(o[Qu],l.slice(1).reduce(function(u,c){return nat(u,c,e)},l[0]))}}),i},function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return JSON.stringify(r)});function Eat(r,t,e,n){n===void 0&&(n=0);var i=r.data,a=r.setsField,o=r.sizeField;if(i.length===0)return qu(fl.WARN,!1,"warn: %s","\u6570\u636E\u4E0D\u80FD\u4E3A\u7A7A"),[];var s=i.map(function(f){var d;return A(A({},f),(d={sets:f[a]||[],size:f[o]},d[FR]="",d[Qu]="",d))});s.sort(function(f,d){return f.sets.length-d.sets.length});var l=uat(s),u=mat(l,t,e,n),c=bat(u,s);return s.forEach(function(f){var d=f.sets,h=d.join(",");f[Qu]=h;var v=d.map(function(m){return u[m]}),p=wat(v);/[zZ]$/.test(p)||(p+=" Z"),f[FR]=p;var g=c[h]||{x:0,y:0};$t(f,g)}),s}function _at(r,t){for(var e=0;e<t.length;e++)if(!r.includes(t[e]))return!1;return!0}function Tat(r){return Ze({},r.defaultStyle,{fill:r.color},r.style)}En("schema","venn",{draw:function(r,t){var e=r.data,n=$m(e[FR]),i=Tat(r),a=t.addGroup({name:"venn-shape"});a.addShape("path",{attrs:A(A({},i),{path:n}),name:"venn-path"});var o=r.customInfo,s=o.offsetX,l=o.offsetY,u=jo.transform(null,[["t",s,l]]);return a.setMatrix(u),a},getMarker:function(r){var t=r.color;return{symbol:"circle",style:{lineWidth:0,stroke:t,fill:t,r:4}}}});var Aat=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getLabelPoint=function(e,n,i){var a=e.data,o=a.x,s=a.y,l=e.customLabelInfo,u=l.offsetX,c=l.offsetY;return{content:e.content[i],x:o+u,y:s+c}},t}(YC);Q0("venn",Aat);function k2(r){if(!!r){var t=r.geometries[0].elements;t.forEach(function(e){e.shape.toFront()})}}var Mat=UC("element-active"),kat=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.syncElementsPos=function(){k2(this.context.view)},t.prototype.active=function(){r.prototype.active.call(this),this.syncElementsPos()},t.prototype.toggle=function(){r.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){r.prototype.reset.call(this),this.syncElementsPos()},t}(Mat),Iat=UC("element-highlight"),Pat=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.syncElementsPos=function(){k2(this.context.view)},t.prototype.highlight=function(){r.prototype.highlight.call(this),this.syncElementsPos()},t.prototype.toggle=function(){r.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.clear=function(){r.prototype.clear.call(this),this.syncElementsPos()},t.prototype.reset=function(){r.prototype.reset.call(this),this.syncElementsPos()},t}(Iat),Dat=UC("element-selected"),Rat=UC("element-single-selected"),Oat=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.syncElementsPos=function(){k2(this.context.view)},t.prototype.selected=function(){r.prototype.selected.call(this),this.syncElementsPos()},t.prototype.toggle=function(){r.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){r.prototype.reset.call(this),this.syncElementsPos()},t}(Dat),Lat=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.syncElementsPos=function(){k2(this.context.view)},t.prototype.selected=function(){r.prototype.selected.call(this),this.syncElementsPos()},t.prototype.toggle=function(){r.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){r.prototype.reset.call(this),this.syncElementsPos()},t}(Rat);gr("venn-element-active",kat);gr("venn-element-highlight",Pat);gr("venn-element-selected",Oat);gr("venn-element-single-selected",Lat);kr("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]});kr("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]});kr("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]});kr("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]});kr("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]});kr("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});var Fat=40;function ite(r,t,e){var n=r.chart,i=r.options,a=i.blendMode,o=i.setsField,s=n.getTheme(),l=s.colors10,u=s.colors20,c=e;qe(c)||(c=t.filter(function(d){return d[o].length===1}).length<=10?l:u);var f=Cat(c,t,a,o);return function(d){return f.get(d)||c[0]}}function Nat(r,t){var e=r.options,n=e.color;if(typeof n!="function"){var i=typeof n=="string"?[n]:n,a=ite(r,t,i);return function(o){return a(o[Qu])}}return n}function Bat(r){var t=r.chart,e=r.options,n=e.legend,i=e.appendPadding,a=e.padding,o=bf(i);return n!==!1&&(o=u2(i,ne(n,"position"),Fat)),t.appendPadding=lR([o,a]),r}function $at(r){var t=r.options,e=t.data;e||(qu(fl.WARN,!1,"warn: %s","\u6570\u636E\u4E0D\u80FD\u4E3A\u7A7A"),e=[]);var n=e.filter(function(a){return a.sets.length===1}).map(function(a){return a.sets[0]}),i=e.filter(function(a){var o=a.sets;return _at(n,o)});return ri(i,e)||qu(fl.WARN,!1,"warn: %s","\u4EA4\u96C6\u4E2D\u4E0D\u80FD\u51FA\u73B0\u4E0D\u5B58\u5728\u7684\u96C6\u5408, \u8BF7\u8F93\u5165\u5408\u6CD5\u6570\u636E"),Mt({},r,{options:{data:i}})}function zat(r){var t=r.chart,e=r.options,n=e.pointStyle,i=e.setsField,a=e.sizeField,o=bf(t.appendPadding),s=o[0],l=o[1],u=o[2],c=o[3],f={offsetX:c,offsetY:s},d=t.viewBBox,h=d.width,v=d.height,p=Eat(e,Math.max(h-(l+c),0),Math.max(v-(s+u),0),0);t.data(p);var g=gR(Ze({},r,{options:{xField:"x",yField:"y",sizeField:a,seriesField:Qu,rawFields:[i,a],schema:{shape:"venn",style:n}}})).ext,m=g.geometry;m.customInfo(f);var y=Nat(r,p);return typeof y=="function"&&m.color(Qu,function(b){var x=p.find(function(S){return S[Qu]===b}),w=ite(r,p)(b);return y(x,w)}),r}function Gat(r){var t=r.chart,e=r.options,n=e.label,i=bf(t.appendPadding),a=i[0],o=i[3],s={offsetX:o,offsetY:a},l=to(t,"schema");if(!n)l.label(!1);else{var u=n.callback,c=Lr(n,["callback"]);l.label({fields:["id"],callback:u,cfg:Mt({},_a(c),{type:"venn",customLabelInfo:s})})}return r}function Uat(r){var t=r.chart,e=r.options,n=e.legend,i=e.sizeField;return t.legend(Qu,n),t.legend(i,!1),r}function Vat(r){var t=r.chart;return t.axis(!1),r}function Hat(r){var t=r.options,e=r.chart,n=t.interactions;if(n){var i={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};Kn(Ze({},r,{options:{interactions:n.map(function(a){return A(A({},a),{type:i[a.type]||a.type})})}}))}return e.removeInteraction("legend-active"),e.removeInteraction("legend-highlight"),r}function Wat(r){return xr(Bat,yn,$at,zat,Gat,Ai({}),Uat,Vat,Ta,Hat,Dn)(r)}(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="venn",e}return t.getDefaultOptions=function(){return Sat},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Wat},t.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},t})(Ar);var mb="$$stock-range$$",I2="trend",ate="up",ote="down",jat={showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(r,t,e){var n;if(r==="x"){var i=e[0];n=i?i.title:t}else n=t;return{position:r==="y"?"start":"end",content:n,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},Yat=Ze({},Ar.getDefaultOptions(),{tooltip:jat,interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function ste(r,t){return Gn(r,function(e){if(qe(t)){var n=t[0],i=t[1],a=t[2],o=t[3];e[I2]=e[n]<=e[i]?ate:ote,e[mb]=[e[n],e[i],e[a],e[o]]}return e})}function Xat(r){var t=r.chart,e=r.options,n=e.yField,i=e.data,a=e.risingFill,o=e.fallingFill,s=e.tooltip,l=e.stockStyle;t.data(ste(i,n));var u=s;return u!==!1&&(u=Ze({},{fields:n},u)),gR(Ze({},r,{options:{schema:{shape:"candle",color:[a,o],style:l},yField:mb,seriesField:I2,rawFields:n,tooltip:u}})),r}function qat(r){var t,e,n=r.chart,i=r.options,a=i.meta,o=i.xAxis,s=i.yAxis,l=i.xField,u=(t={},t[l]={type:"timeCat",tickCount:6},t[I2]={values:[ate,ote]},t),c=Ze(u,a,(e={},e[l]=Pn(o,Xo),e[mb]=Pn(s,Xo),e));return n.scale(c),r}function Kat(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField;return n===!1?t.axis(a,!1):t.axis(a,n),i===!1?t.axis(mb,!1):t.axis(mb,i),r}function Zat(r){var t=r.chart,e=r.options,n=e.tooltip;return n!==!1?t.tooltip(n):t.tooltip(!1),r}function Qat(r){var t=r.chart,e=r.options,n=e.legend;return n?t.legend(I2,n):n===!1&&t.legend(!1),r}function Jat(r){xr(yn,Xat,qat,Kat,Zat,Qat,Kn,Dn,Mi(),v2)(r)}(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="stock",e}return t.getDefaultOptions=function(){return Yat},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Jat},t.prototype.changeData=function(e){this.updateOption({data:e});var n=this.options.yField;this.chart.changeData(ste(e,n))},t})(Ar);var NR,Sf="$$percentage$$",Cf="$$mappingValue$$",Ju="$$conversion$$",BR="$$totalPercentage$$",yb="$$x$$",bb="$$y$$",eot={appendPadding:[0,80],minSize:0,maxSize:1,meta:(NR={},NR[Cf]={min:0,max:1,nice:!1},NR),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}};function lte(r,t,e){var n=[],i=e.yField,a=e.maxSize,o=e.minSize,s=ne(J_(t,i),[i]),l=Rt(a)?a:1,u=Rt(o)?o:0;return n=Gn(r,function(c,f){var d=(c[i]||0)/s;return c[Sf]=d,c[Cf]=(l-u)*d+u,c[Ju]=[ne(r,[f-1,i]),c[i]],c}),n}function $R(r){return function(t){var e=t.chart,n=t.options,i=n.conversionTag,a=e.getOptions().data;if(i){var o=i.formatter;a.forEach(function(s,l){if(!(l<=0||Number.isNaN(s[Cf]))){var u=r(s,l,a,{top:!0,text:{content:Vt(o)?o(s,a):o,offsetX:i.offsetX,offsetY:i.offsetY,position:"end",autoRotate:!1,style:A({textAlign:"start",textBaseline:"middle"},i.style)}});e.annotation().line(u)}})}return t}}function tot(r){var t=r.chart,e=r.options,n=e.data,i=n===void 0?[]:n,a=e.yField,o=e.maxSize,s=e.minSize,l=lte(i,i,{yField:a,maxSize:o,minSize:s});return t.data(l),r}function rot(r){var t=r.chart,e=r.options,n=e.xField,i=e.yField,a=e.color,o=e.tooltip,s=e.label,l=e.shape,u=l===void 0?"funnel":l,c=e.funnelStyle,f=e.state,d=Us(o,[n,i]),h=d.fields,v=d.formatter;qo({chart:t,options:{type:"interval",xField:n,yField:Cf,colorField:n,tooltipFields:qe(h)&&h.concat([Sf,Ju]),mapping:{shape:u,tooltip:v,color:a,style:c},label:s,state:f}});var p=to(r.chart,"interval");return p.adjust("symmetric"),r}function not(r){var t=r.chart,e=r.options,n=e.isTransposed;return t.coordinate({type:"rect",actions:n?[]:[["transpose"],["scale",1,-1]]}),r}function iot(r){var t=r.options,e=t.maxSize,n=function(i,a,o,s){var l=e-(e-i[Cf])/2;return A(A({},s),{start:[a-.5,l],end:[a-.5,l+.05]})};return $R(n)(r),r}function ute(r){return xr(tot,rot,not,iot)(r)}function aot(r){var t,e=r.chart,n=r.options,i=n.data,a=i===void 0?[]:i,o=n.yField;return e.data(a),e.scale((t={},t[o]={sync:!0},t)),r}function oot(r){var t=r.chart,e=r.options,n=e.data,i=e.xField,a=e.yField,o=e.color,s=e.compareField,l=e.isTransposed,u=e.tooltip,c=e.maxSize,f=e.minSize,d=e.label,h=e.funnelStyle,v=e.state;return t.facet("mirror",{fields:[s],transpose:!l,padding:l?0:[32,0,0,0],eachView:function(p,g){var m=l?g.rowIndex:g.columnIndex;l||p.coordinate({type:"rect",actions:[["transpose"],["scale",m===0?-1:1,-1]]});var y=lte(g.data,n,{yField:a,maxSize:c,minSize:f});p.data(y);var b=Us(u,[i,a,s]),x=b.fields,w=b.formatter,S=l?{offset:m===0?10:-23,position:m===0?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:m===0?"end":"start"}};qo({chart:p,options:{type:"interval",xField:i,yField:Cf,colorField:i,tooltipFields:qe(x)&&x.concat([Sf,Ju]),mapping:{shape:"funnel",tooltip:w,color:o,style:h},label:d===!1?!1:Ze({},S,d),state:v}})}}),r}function sot(r){var t=r.chart,e=r.options,n=e.conversionTag,i=e.isTransposed;return t.once("beforepaint",function(){t.views.forEach(function(a,o){var s=function(l,u,c,f){var d=o===0?-1:1;return Ze({},f,{start:[u-.5,l[Cf]],end:[u-.5,l[Cf]+.05],text:i?{style:{textAlign:"start"}}:{offsetX:n!==!1?d*n.offsetX:0,style:{textAlign:o===0?"end":"start"}}})};$R(s)(Ze({},{chart:a,options:e}))})}),r}function lot(r){return xr(aot,oot,sot)(r)}function uot(r){var t,e=r.chart,n=r.options,i=n.data,a=i===void 0?[]:i,o=n.yField;return e.data(a),e.scale((t={},t[o]={sync:!0},t)),r}function cot(r){var t=r.chart,e=r.options,n=e.seriesField,i=e.isTransposed;return t.facet("rect",{fields:[n],padding:[i?0:32,10,0,10],eachView:function(a,o){ute(Ze({},r,{chart:a,options:{data:o.data}}))}}),r}function fot(r){return xr(uot,cot)(r)}function dot(r){var t=r.chart,e=r.options,n=e.data,i=n===void 0?[]:n,a=e.yField,o=Wa(i,function(u,c){return u+(c[a]||0)},0),s=J_(i,a)[a],l=Gn(i,function(u,c){var f=[],d=[];if(u[BR]=(u[a]||0)/o,c){var h=i[c-1][yb],v=i[c-1][bb];f[0]=h[3],d[0]=v[3],f[1]=h[2],d[1]=v[2]}else f[0]=-.5,d[0]=1,f[1]=.5,d[1]=1;return d[2]=d[1]-u[BR],f[2]=(d[2]+1)/4,d[3]=d[2],f[3]=-f[2],u[yb]=f,u[bb]=d,u[Sf]=(u[a]||0)/s,u[Ju]=[ne(i,[c-1,a]),u[a]],u});return t.data(l),r}function hot(r){var t=r.chart,e=r.options,n=e.xField,i=e.yField,a=e.color,o=e.tooltip,s=e.label,l=e.funnelStyle,u=e.state,c=Us(o,[n,i]),f=c.fields,d=c.formatter;return qo({chart:t,options:{type:"polygon",xField:yb,yField:bb,colorField:n,tooltipFields:qe(f)&&f.concat([Sf,Ju]),label:s,state:u,mapping:{tooltip:d,color:a,style:l}}}),r}function vot(r){var t=r.chart,e=r.options,n=e.isTransposed;return t.coordinate({type:"rect",actions:n?[["transpose"],["reflect","x"]]:[]}),r}function pot(r){var t=function(e,n,i,a){return A(A({},a),{start:[e[yb][1],e[bb][1]],end:[e[yb][1]+.05,e[bb][1]]})};return $R(t)(r),r}function got(r){return xr(dot,hot,vot,pot)(r)}function mot(r){var t=r.options,e=t.compareField,n=t.xField,i=t.yField,a=t.locale,o=t.funnelStyle,s=t.data,l=f2(a),u={label:e?{fields:[n,i,e,Sf,Ju],formatter:function(f){return""+f[i]}}:{fields:[n,i,Sf,Ju],offset:0,position:"middle",formatter:function(f){return f[n]+" "+f[i]}},tooltip:{title:n,formatter:function(f){return{name:f[n],value:f[i]}}},conversionTag:{formatter:function(f){return l.get(["conversionTag","label"])+": "+JJ.apply(void 0,f[Ju])}}},c;return(e||o)&&(c=function(f){return Ze({},e&&{lineWidth:1,stroke:"#fff"},Vt(o)?o(f):o)}),Ze({options:u},r,{options:{funnelStyle:c,data:Mr(s)}})}function yot(r){var t=r.options,e=t.compareField,n=t.dynamicHeight,i=t.seriesField;return i?fot(r):e?lot(r):n?got(r):ute(r)}function bot(r){var t,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return xr(Ai((t={},t[a]=n,t[o]=i,t)))(r)}function xot(r){var t=r.chart;return t.axis(!1),r}function wot(r){var t=r.chart,e=r.options,n=e.legend;return n===!1?t.legend(!1):t.legend(n),r}function cte(r){return xr(mot,yot,bot,xot,Ta,Kn,wot,Dn,yn,Mi())(r)}var Sot=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="funnel",e}return t.getDefaultOptions=function(){return eot},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return cte},t.prototype.setState=function(e,n,i){i===void 0&&(i=!0);var a=ob(this.chart);G(a,function(o){n(o.getData())&&o.setState(e,i)})},t.prototype.getStates=function(){var e=ob(this.chart),n=[];return G(e,function(i){var a=i.getData(),o=i.getStates();G(o,function(s){n.push({data:a,state:s,geometry:i.geometry,element:i})})}),n},t.CONVERSATION_FIELD=Ju,t.PERCENT_FIELD=Sf,t.TOTAL_PERCENT_FIELD=BR,t}(Ar),Cot="liquid";function fte(r){return[{percent:r,type:Cot}]}function Eot(r){var t=r.chart,e=r.options,n=e.percent,i=e.liquidStyle,a=e.radius,o=e.outline,s=e.wave,l=e.shape;t.scale({percent:{min:0,max:1}}),t.data(fte(n));var u=e.color||t.getTheme().defaultColor,c=Ze({},r,{options:{xField:"type",yField:"percent",widthRatio:a,interval:{color:u,style:i,shape:"liquid-fill-gauge"}}}),f=ro(c).ext,d=f.geometry,h=t.getTheme().background,v={radius:a,outline:o,wave:s,shape:l,background:h};return d.customInfo(v),t.legend(!1),t.axis(!1),t.tooltip(!1),r}function dte(r,t){var e=r.chart,n=r.options,i=n.statistic,a=n.percent,o=n.meta;e.getController("annotation").clear(!0);var s=ne(o,["percent","formatter"])||function(u){return(u*100).toFixed(2)+"%"},l=i.content;return l&&(l=Ze({},l,{content:Je(l.content)?s(a):l.content})),l2(e,{statistic:A(A({},i),{content:l}),plotType:"liquid"},{percent:a}),t&&e.render(!0),r}function _ot(r){return xr(yn,vs("liquidStyle"),Eot,dte,Ai({}),Dn,Kn)(r)}var Tot={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"},hte=5e3;function vte(r,t,e){return r+(t-r)*e}function Aot(r){var t=A({opacity:1},r.style);return r.color&&!t.fill&&(t.fill=r.color),t}function Mot(r){var t={fill:"#fff",fillOpacity:0,lineWidth:4},e=$t({},t,r.style);return r.color&&!e.stroke&&(e.stroke=r.color),Rt(r.opacity)&&(e.opacity=e.strokeOpacity=r.opacity),e}function kot(r,t,e,n){return t===0?[[r+1/2*e/Math.PI/2,n/2],[r+1/2*e/Math.PI,n],[r+e/4,n]]:t===1?[[r+1/2*e/Math.PI/2*(Math.PI-2),n],[r+1/2*e/Math.PI/2*(Math.PI-1),n/2],[r+e/4,0]]:t===2?[[r+1/2*e/Math.PI/2,-n/2],[r+1/2*e/Math.PI,-n],[r+e/4,-n]]:[[r+1/2*e/Math.PI/2*(Math.PI-2),-n],[r+1/2*e/Math.PI/2*(Math.PI-1),-n/2],[r+e/4,0]]}function Iot(r,t,e,n,i,a,o){for(var s=Math.ceil(2*r/e*4)*4,l=[],u=n;u<-Math.PI*2;)u+=Math.PI*2;for(;u>0;)u-=Math.PI*2;u=u/Math.PI/2*e;var c=a-r+u-r*2;l.push(["M",c,t]);for(var f=0,d=0;d<s;++d){var h=d%4,v=kot(d*e/4,h,e,i);l.push(["C",v[0][0]+c,-v[0][1]+t,v[1][0]+c,-v[1][1]+t,v[2][0]+c,-v[2][1]+t]),d===s-1&&(f=v[2][0])}return l.push(["L",f+c,o+r]),l.push(["L",c,o+r]),l.push(["Z"]),l}function Pot(r,t,e,n,i,a,o,s,l){for(var u=i.fill,c=i.opacity,f=o.getBBox(),d=f.maxX-f.minX,h=f.maxY-f.minY,v=0;v<n;v++){var p=n<=1?0:v/(n-1),g=a.addShape("path",{name:"waterwave-path",attrs:{path:Iot(s,f.minY+h*e,l,0,d/32,r,t),fill:u,opacity:vte(.2,.9,p)*c}});try{var m=bR([["t",l,0]]);g.stopAnimate(),g.animate({matrix:m},{duration:vte(.5*hte,hte,p),repeat:!0})}catch{console.warn("off-screen group animate error!")}}}function Dot(r,t,e,n){var i=e*2/3,a=Math.max(i,n),o=i/2,s=r,l=o+t-a/2,u=Math.asin(o/((a-o)*.85)),c=Math.sin(u)*o,f=Math.cos(u)*o,d=s-f,h=l+c,v=r,p=l+o/Math.sin(u);return`
      M `+d+" "+h+`
      A `+o+" "+o+" 0 1 1 "+(d+f*2)+" "+h+`
      Q `+v+" "+p+" "+r+" "+(t+a/2)+`
      Q `+v+" "+p+" "+d+" "+h+`
      Z 
    `}function Rot(r,t,e,n){var i=e/2,a=n/2;return`
      M `+r+" "+(t-a)+` 
      a `+i+" "+a+" 0 1 0 0 "+a*2+`
      a `+i+" "+a+" 0 1 0 0 "+-a*2+`
      Z
    `}function Oot(r,t,e,n){var i=n/2,a=e/2;return`
      M `+r+" "+(t-i)+`
      L `+(r+a)+" "+t+`
      L `+r+" "+(t+i)+`
      L `+(r-a)+" "+t+`
      Z
    `}function Lot(r,t,e,n){var i=n/2,a=e/2;return`
      M `+r+" "+(t-i)+`
      L `+(r+a)+" "+(t+i)+`
      L `+(r-a)+" "+(t+i)+`
      Z
    `}function Fot(r,t,e,n){var i=.618,a=n/2,o=e/2*i;return`
      M `+(r-o)+" "+(t-a)+`
      L `+(r+o)+" "+(t-a)+`
      L `+(r+o)+" "+(t+a)+`
      L `+(r-o)+" "+(t+a)+`
      Z
    `}En("interval","liquid-fill-gauge",{draw:function(r,t){var e=.5,n=.5,i=r.customInfo,a=i,o=a.radius,s=a.shape,l=a.background,u=i.outline,c=i.wave,f=u.border,d=u.distance,h=c.count,v=c.length,p=Wa(r.points,function(k,P){return Math.min(k,P.x)},1/0),g=this.parsePoint({x:e,y:n}),m=this.parsePoint({x:p,y:n}),y=g.x-m.x,b=Math.min(y,m.y*o),x=Aot(r),w=Mot($t({},r,u)),S=b-f/2,C={pin:Dot,circle:Rot,diamond:Oot,triangle:Lot,rect:Fot},_=typeof s=="function"?s:C[s]||C.circle,T=_(g.x,g.y,S*2,S*2),E=t.addGroup({name:"waves"}),M=E.setClip({type:"path",attrs:{path:T}});return Pot(g.x,g.y,1-r.points[1].y,h,x,E,M,b*2,v),t.addShape("path",{name:"distance",attrs:{path:T,fill:"transparent",lineWidth:f+d*2,stroke:l==="transparent"?"#fff":l}}),t.addShape("path",{name:"wrap",attrs:$t(w,{path:T,fill:"transparent",lineWidth:f})}),t}});(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="liquid",e}return t.getDefaultOptions=function(){return Tot},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.changeData=function(e){this.chart.emit(Nr.BEFORE_CHANGE_DATA,ci.fromData(this.chart,Nr.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(fte(e)),dte({chart:this.chart,options:this.options},!0),this.chart.emit(Nr.AFTER_CHANGE_DATA,ci.fromData(this.chart,Nr.AFTER_CHANGE_DATA,null))},t.prototype.getSchemaAdaptor=function(){return _ot},t})(Ar);function pte(r){var t=r.data,e=r.xField,n=r.measureField,i=r.rangeField,a=r.targetField,o=r.layout,s=[],l=[];t.forEach(function(f,d){var h;f[i].sort(function(v,p){return v-p}),f[i].forEach(function(v,p){var g,m=p===0?v:f[i][p]-f[i][p-1];s.push((g={rKey:i+"_"+p},g[e]=e?f[e]:String(d),g[i]=m,g))}),f[n].forEach(function(v,p){var g;s.push((g={mKey:f[n].length>1?n+"_"+p:""+n},g[e]=e?f[e]:String(d),g[n]=v,g))}),s.push((h={tKey:""+a},h[e]=e?f[e]:String(d),h[a]=f[a],h)),l.push(f[i],f[n],f[a])});var u=Math.min.apply(Math,l.flat(1/0)),c=Math.max.apply(Math,l.flat(1/0));return u=u>0?0:u,o==="vertical"&&s.reverse(),{min:u,max:c,ds:s}}function Not(r){var t=r.chart,e=r.options,n=e.bulletStyle,i=e.targetField,a=e.rangeField,o=e.measureField,s=e.xField,l=e.color,u=e.layout,c=e.size,f=e.label,d=pte(e),h=d.min,v=d.max,p=d.ds;t.data(p);var g=Ze({},r,{options:{xField:s,yField:a,seriesField:"rKey",isStack:!0,label:ne(f,"range"),interval:{color:ne(l,"range"),style:ne(n,"range"),size:ne(c,"range")}}});ro(g),t.geometries[0].tooltip(!1);var m=Ze({},r,{options:{xField:s,yField:o,seriesField:"mKey",isStack:!0,label:ne(f,"measure"),interval:{color:ne(l,"measure"),style:ne(n,"measure"),size:ne(c,"measure")}}});ro(m);var y=Ze({},r,{options:{xField:s,yField:i,seriesField:"tKey",label:ne(f,"target"),point:{color:ne(l,"target"),style:ne(n,"target"),size:Vt(ne(c,"target"))?function(b){return ne(c,"target")(b)/2}:ne(c,"target")/2,shape:u==="horizontal"?"line":"hyphen"}}});return ps(y),u==="horizontal"&&t.coordinate().transpose(),A(A({},r),{ext:{data:{min:h,max:v}}})}function gte(r){var t,e,n=r.options,i=r.ext,a=n.xAxis,o=n.yAxis,s=n.targetField,l=n.rangeField,u=n.measureField,c=n.xField,f=i.data;return xr(Ai((t={},t[c]=a,t[u]=o,t),(e={},e[u]={min:f==null?void 0:f.min,max:f==null?void 0:f.max,sync:!0},e[s]={sync:""+u},e[l]={sync:""+u},e)))(r)}function Bot(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.measureField,s=e.rangeField,l=e.targetField;return t.axis(""+s,!1),t.axis(""+l,!1),n===!1?t.axis(""+a,!1):t.axis(""+a,n),i===!1?t.axis(""+o,!1):t.axis(""+o,i),r}function $ot(r){var t=r.chart,e=r.options,n=e.legend;return t.removeInteraction("legend-filter"),t.legend(n),t.legend("rKey",!1),t.legend("mKey",!1),t.legend("tKey",!1),r}function zot(r){var t=r.chart,e=r.options,n=e.label,i=e.measureField,a=e.targetField,o=e.rangeField,s=t.geometries,l=s[0],u=s[1],c=s[2];return ne(n,"range")?l.label(""+o,A({layout:[{type:"limit-in-plot"}]},_a(n.range))):l.label(!1),ne(n,"measure")?u.label(""+i,A({layout:[{type:"limit-in-plot"}]},_a(n.measure))):u.label(!1),ne(n,"target")?c.label(""+a,A({layout:[{type:"limit-in-plot"}]},_a(n.target))):c.label(!1),r}function Got(r){xr(Not,gte,Bot,$ot,yn,zot,Ta,Kn,Dn)(r)}var Uot=Ze({},Ar.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}});(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="bullet",e}return t.getDefaultOptions=function(){return Uot},t.prototype.changeData=function(e){this.updateOption({data:e});var n=pte(this.options),i=n.min,a=n.max,o=n.ds;gte({options:this.options,ext:{data:{min:i,max:a}},chart:this.chart}),this.chart.changeData(o)},t.prototype.getSchemaAdaptor=function(){return Got},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t})(Ar);var mte="nodeIndex",yte="childNodeCount",zR="nodeAncestor",GR="Invalid field: it must be a string!";function UR(r,t){var e=r.field,n=r.fields;if(rt(e))return e;if(qe(e))return console.warn(GR),e[0];if(console.warn(GR+" will try to get fields instead."),rt(n))return n;if(qe(n)&&n.length)return n[0];if(t)return t;throw new TypeError(GR)}function VR(r){var t=[];if(r&&r.each){var e,n;r.each(function(i){var a,o;i.parent!==e?(e=i.parent,n=0):n+=1;var s=va((((a=i.ancestors)===null||a===void 0?void 0:a.call(i))||[]).map(function(l){return t.find(function(u){return u.name===l.name})||l}),function(l){var u=l.depth;return u>0&&u<i.depth});i[zR]=s,i[yte]=((o=i.children)===null||o===void 0?void 0:o.length)||0,i[mte]=n,t.push(i)})}else r&&r.eachNode&&r.eachNode(function(i){t.push(i)});return t}var HR="ancestor-node",bte="value",xb="path",Vot=[xb,mte,zR,yte,"name","depth","height"],Hot=Ze({},Ar.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}}),xte=4,Wot=0,wte=5,Ste="drilldown-bread-crumb",jot={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},wb="hierarchy-data-transform-params",Yot=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.name="drill-down",e.historyCache=[],e.breadCrumbGroup=null,e.breadCrumbCfg=jot,e}return t.prototype.click=function(){var e=ne(this.context,["event","data","data"]);if(!e)return!1;this.drill(e),this.drawBreadCrumb()},t.prototype.resetPosition=function(){if(!!this.breadCrumbGroup){var e=this.context.view.getCoordinate(),n=this.breadCrumbGroup,i=n.getBBox(),a=this.getButtonCfg().position,o={x:e.start.x,y:e.end.y-(i.height+wte*2)};e.isPolar&&(o={x:0,y:0}),a==="bottom-left"&&(o={x:e.start.x,y:e.start.y});var s=jo.transform(null,[["t",o.x+Wot,o.y+i.height+wte]]);n.setMatrix(s)}},t.prototype.back=function(){aa(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},t.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},t.prototype.drill=function(e){var n=this.context.view,i=ne(n,["interactions","drill-down","cfg","transformData"],function(u){return u}),a=i(A({data:e.data},e[wb]));n.changeData(a);for(var o=[],s=e;s;){var l=s.data;o.unshift({id:l.name+"_"+s.height+"_"+s.depth,name:l.name,children:i(A({data:l},e[wb]))}),s=s.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(o)},t.prototype.backTo=function(e){if(!(!e||e.length<=0)){var n=this.context.view,i=Yi(e).children;n.changeData(i),e.length>1?(this.historyCache=e,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},t.prototype.getButtonCfg=function(){var e=this.context.view,n=ne(e,["interactions","drill-down","cfg","drillDownConfig"]);return Ze(this.breadCrumbCfg,n==null?void 0:n.breadCrumb,this.cfg)},t.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},t.prototype.drawBreadCrumbGroup=function(){var e=this,n=this.getButtonCfg(),i=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:Ste});var a=0;i.forEach(function(o,s){var l=e.breadCrumbGroup.addShape({type:"text",id:o.id,name:Ste+"_"+o.name+"_text",attrs:A(A({text:s===0&&!Je(n.rootText)?n.rootText:o.name},n.textStyle),{x:a,y:0})}),u=l.getBBox();if(a+=u.width+xte,l.on("click",function(d){var h,v=d.target.get("id");if(v!==((h=Yi(i))===null||h===void 0?void 0:h.id)){var p=i.slice(0,i.findIndex(function(g){return g.id===v})+1);e.backTo(p)}}),l.on("mouseenter",function(d){var h,v=d.target.get("id");v!==((h=Yi(i))===null||h===void 0?void 0:h.id)?l.attr(n.activeTextStyle):l.attr({cursor:"default"})}),l.on("mouseleave",function(){l.attr(n.textStyle)}),s<i.length-1){var c=e.breadCrumbGroup.addShape({type:"text",name:n.name+"_"+o.name+"_divider",attrs:A(A({text:n.dividerText},n.textStyle),{x:a,y:0})}),f=c.getBBox();a+=f.width+xte}})},t.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},t.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),r.prototype.destroy.call(this)},t}(ui);function Xot(r,t){return r.parent===t.parent?1:2}function qot(r){return r.reduce(Kot,0)/r.length}function Kot(r,t){return r+t.x}function Zot(r){return 1+r.reduce(Qot,0)}function Qot(r,t){return Math.max(r,t.y)}function Jot(r){for(var t;t=r.children;)r=t[0];return r}function est(r){for(var t;t=r.children;)r=t[t.length-1];return r}function tst(){var r=Xot,t=1,e=1,n=!1;function i(a){var o,s=0;a.eachAfter(function(d){var h=d.children;h?(d.x=qot(h),d.y=Zot(h)):(d.x=o?s+=r(d,o):0,d.y=0,o=d)});var l=Jot(a),u=est(a),c=l.x-r(l,u)/2,f=u.x+r(u,l)/2;return a.eachAfter(n?function(d){d.x=(d.x-a.x)*t,d.y=(a.y-d.y)*e}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(a.y?d.y/a.y:1))*e})}return i.separation=function(a){return arguments.length?(r=a,i):r},i.size=function(a){return arguments.length?(n=!1,t=+a[0],e=+a[1],i):n?null:[t,e]},i.nodeSize=function(a){return arguments.length?(n=!0,t=+a[0],e=+a[1],i):n?[t,e]:null},i}function rst(r){var t=0,e=r.children,n=e&&e.length;if(!n)t=1;else for(;--n>=0;)t+=e[n].value;r.value=t}function nst(){return this.eachAfter(rst)}function ist(r,t){let e=-1;for(const n of this)r.call(t,n,++e,this);return this}function ast(r,t){for(var e=this,n=[e],i,a,o=-1;e=n.pop();)if(r.call(t,e,++o,this),i=e.children)for(a=i.length-1;a>=0;--a)n.push(i[a]);return this}function ost(r,t){for(var e=this,n=[e],i=[],a,o,s,l=-1;e=n.pop();)if(i.push(e),a=e.children)for(o=0,s=a.length;o<s;++o)n.push(a[o]);for(;e=i.pop();)r.call(t,e,++l,this);return this}function sst(r,t){let e=-1;for(const n of this)if(r.call(t,n,++e,this))return n}function lst(r){return this.eachAfter(function(t){for(var e=+r(t.data)||0,n=t.children,i=n&&n.length;--i>=0;)e+=n[i].value;t.value=e})}function ust(r){return this.eachBefore(function(t){t.children&&t.children.sort(r)})}function cst(r){for(var t=this,e=fst(t,r),n=[t];t!==e;)t=t.parent,n.push(t);for(var i=n.length;r!==e;)n.splice(i,0,r),r=r.parent;return n}function fst(r,t){if(r===t)return r;var e=r.ancestors(),n=t.ancestors(),i=null;for(r=e.pop(),t=n.pop();r===t;)i=r,r=e.pop(),t=n.pop();return i}function dst(){for(var r=this,t=[r];r=r.parent;)t.push(r);return t}function hst(){return Array.from(this)}function vst(){var r=[];return this.eachBefore(function(t){t.children||r.push(t)}),r}function pst(){var r=this,t=[];return r.each(function(e){e!==r&&t.push({source:e.parent,target:e})}),t}function*gst(){var r=this,t,e=[r],n,i,a;do for(t=e.reverse(),e=[];r=t.pop();)if(yield r,n=r.children)for(i=0,a=n.length;i<a;++i)e.push(n[i]);while(e.length)}function hg(r,t){r instanceof Map?(r=[void 0,r],t===void 0&&(t=bst)):t===void 0&&(t=yst);for(var e=new vg(r),n,i=[e],a,o,s,l;n=i.pop();)if((o=t(n.data))&&(l=(o=Array.from(o)).length))for(n.children=o,s=l-1;s>=0;--s)i.push(a=o[s]=new vg(o[s])),a.parent=n,a.depth=n.depth+1;return e.eachBefore(Cte)}function mst(){return hg(this).eachBefore(xst)}function yst(r){return r.children}function bst(r){return Array.isArray(r)?r[1]:null}function xst(r){r.data.value!==void 0&&(r.value=r.data.value),r.data=r.data.data}function Cte(r){var t=0;do r.height=t;while((r=r.parent)&&r.height<++t)}function vg(r){this.data=r,this.depth=this.height=0,this.parent=null}vg.prototype=hg.prototype={constructor:vg,count:nst,each:ist,eachAfter:ost,eachBefore:ast,find:sst,sum:lst,sort:ust,path:cst,ancestors:dst,descendants:hst,leaves:vst,links:pst,copy:mst,[Symbol.iterator]:gst};function wst(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function Sst(r){for(var t=r.length,e,n;t;)n=Math.random()*t--|0,e=r[t],r[t]=r[n],r[n]=e;return r}function Ete(r){for(var t=0,e=(r=Sst(Array.from(r))).length,n=[],i,a;t<e;)i=r[t],a&&_te(a,i)?++t:(a=Est(n=Cst(n,i)),t=0);return a}function Cst(r,t){var e,n;if(WR(t,r))return[t];for(e=0;e<r.length;++e)if(P2(t,r[e])&&WR(Sb(r[e],t),r))return[r[e],t];for(e=0;e<r.length-1;++e)for(n=e+1;n<r.length;++n)if(P2(Sb(r[e],r[n]),t)&&P2(Sb(r[e],t),r[n])&&P2(Sb(r[n],t),r[e])&&WR(Tte(r[e],r[n],t),r))return[r[e],r[n],t];throw new Error}function P2(r,t){var e=r.r-t.r,n=t.x-r.x,i=t.y-r.y;return e<0||e*e<n*n+i*i}function _te(r,t){var e=r.r-t.r+Math.max(r.r,t.r,1)*1e-9,n=t.x-r.x,i=t.y-r.y;return e>0&&e*e>n*n+i*i}function WR(r,t){for(var e=0;e<t.length;++e)if(!_te(r,t[e]))return!1;return!0}function Est(r){switch(r.length){case 1:return _st(r[0]);case 2:return Sb(r[0],r[1]);case 3:return Tte(r[0],r[1],r[2])}}function _st(r){return{x:r.x,y:r.y,r:r.r}}function Sb(r,t){var e=r.x,n=r.y,i=r.r,a=t.x,o=t.y,s=t.r,l=a-e,u=o-n,c=s-i,f=Math.sqrt(l*l+u*u);return{x:(e+a+l/f*c)/2,y:(n+o+u/f*c)/2,r:(f+i+s)/2}}function Tte(r,t,e){var n=r.x,i=r.y,a=r.r,o=t.x,s=t.y,l=t.r,u=e.x,c=e.y,f=e.r,d=n-o,h=n-u,v=i-s,p=i-c,g=l-a,m=f-a,y=n*n+i*i-a*a,b=y-o*o-s*s+l*l,x=y-u*u-c*c+f*f,w=h*v-d*p,S=(v*x-p*b)/(w*2)-n,C=(p*g-v*m)/w,_=(h*b-d*x)/(w*2)-i,T=(d*m-h*g)/w,E=C*C+T*T-1,M=2*(a+S*C+_*T),k=S*S+_*_-a*a,P=-(E?(M+Math.sqrt(M*M-4*E*k))/(2*E):k/M);return{x:n+S+C*P,y:i+_+T*P,r:P}}function Ate(r,t,e){var n=r.x-t.x,i,a,o=r.y-t.y,s,l,u=n*n+o*o;u?(a=t.r+e.r,a*=a,l=r.r+e.r,l*=l,a>l?(i=(u+l-a)/(2*u),s=Math.sqrt(Math.max(0,l/u-i*i)),e.x=r.x-i*n-s*o,e.y=r.y-i*o+s*n):(i=(u+a-l)/(2*u),s=Math.sqrt(Math.max(0,a/u-i*i)),e.x=t.x+i*n-s*o,e.y=t.y+i*o+s*n)):(e.x=t.x+e.r,e.y=t.y)}function Mte(r,t){var e=r.r+t.r-1e-6,n=t.x-r.x,i=t.y-r.y;return e>0&&e*e>n*n+i*i}function kte(r){var t=r._,e=r.next._,n=t.r+e.r,i=(t.x*e.r+e.x*t.r)/n,a=(t.y*e.r+e.y*t.r)/n;return i*i+a*a}function D2(r){this._=r,this.next=null,this.previous=null}function Ite(r){if(!(i=(r=wst(r)).length))return 0;var t,e,n,i,a,o,s,l,u,c,f;if(t=r[0],t.x=0,t.y=0,!(i>1))return t.r;if(e=r[1],t.x=-e.r,e.x=t.r,e.y=0,!(i>2))return t.r+e.r;Ate(e,t,n=r[2]),t=new D2(t),e=new D2(e),n=new D2(n),t.next=n.previous=e,e.next=t.previous=n,n.next=e.previous=t;e:for(s=3;s<i;++s){Ate(t._,e._,n=r[s]),n=new D2(n),l=e.next,u=t.previous,c=e._.r,f=t._.r;do if(c<=f){if(Mte(l._,n._)){e=l,t.next=e,e.previous=t,--s;continue e}c+=l._.r,l=l.next}else{if(Mte(u._,n._)){t=u,t.next=e,e.previous=t,--s;continue e}f+=u._.r,u=u.previous}while(l!==u.next);for(n.previous=t,n.next=e,t.next=e.previous=e=n,a=kte(t);(n=n.next)!==e;)(o=kte(n))<a&&(t=n,a=o);e=t.next}for(t=[e._],n=e;(n=n.next)!==e;)t.push(n._);for(n=Ete(t),s=0;s<i;++s)t=r[s],t.x-=n.x,t.y-=n.y;return n.r}function Tst(r){return Ite(r),r}function Ast(r){return r==null?null:R2(r)}function R2(r){if(typeof r!="function")throw new Error;return r}function Ph(){return 0}function pg(r){return function(){return r}}function Mst(r){return Math.sqrt(r.value)}function Pte(){var r=null,t=1,e=1,n=Ph;function i(a){return a.x=t/2,a.y=e/2,r?a.eachBefore(Dte(r)).eachAfter(jR(n,.5)).eachBefore(Rte(1)):a.eachBefore(Dte(Mst)).eachAfter(jR(Ph,1)).eachAfter(jR(n,a.r/Math.min(t,e))).eachBefore(Rte(Math.min(t,e)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(r=Ast(a),i):r},i.size=function(a){return arguments.length?(t=+a[0],e=+a[1],i):[t,e]},i.padding=function(a){return arguments.length?(n=typeof a=="function"?a:pg(+a),i):n},i}function Dte(r){return function(t){t.children||(t.r=Math.max(0,+r(t)||0))}}function jR(r,t){return function(e){if(n=e.children){var n,i,a=n.length,o=r(e)*t||0,s;if(o)for(i=0;i<a;++i)n[i].r+=o;if(s=Ite(n),o)for(i=0;i<a;++i)n[i].r-=o;e.r=s+o}}}function Rte(r){return function(t){var e=t.parent;t.r*=r,e&&(t.x=e.x+r*t.x,t.y=e.y+r*t.y)}}function Ote(r){r.x0=Math.round(r.x0),r.y0=Math.round(r.y0),r.x1=Math.round(r.x1),r.y1=Math.round(r.y1)}function Cb(r,t,e,n,i){for(var a=r.children,o,s=-1,l=a.length,u=r.value&&(n-t)/r.value;++s<l;)o=a[s],o.y0=e,o.y1=i,o.x0=t,o.x1=t+=o.value*u}function Lte(){var r=1,t=1,e=0,n=!1;function i(o){var s=o.height+1;return o.x0=o.y0=e,o.x1=r,o.y1=t/s,o.eachBefore(a(t,s)),n&&o.eachBefore(Ote),o}function a(o,s){return function(l){l.children&&Cb(l,l.x0,o*(l.depth+1)/s,l.x1,o*(l.depth+2)/s);var u=l.x0,c=l.y0,f=l.x1-e,d=l.y1-e;f<u&&(u=f=(u+f)/2),d<c&&(c=d=(c+d)/2),l.x0=u,l.y0=c,l.x1=f,l.y1=d}}return i.round=function(o){return arguments.length?(n=!!o,i):n},i.size=function(o){return arguments.length?(r=+o[0],t=+o[1],i):[r,t]},i.padding=function(o){return arguments.length?(e=+o,i):e},i}var kst={depth:-1},Fte={};function Ist(r){return r.id}function Pst(r){return r.parentId}function Dst(){var r=Ist,t=Pst;function e(n){var i=Array.from(n),a=i.length,o,s,l,u,c,f,d,h=new Map;for(s=0;s<a;++s)o=i[s],c=i[s]=new vg(o),(f=r(o,s,n))!=null&&(f+="")&&(d=c.id=f,h.set(d,h.has(d)?Fte:c)),(f=t(o,s,n))!=null&&(f+="")&&(c.parent=f);for(s=0;s<a;++s)if(c=i[s],f=c.parent){if(u=h.get(f),!u)throw new Error("missing: "+f);if(u===Fte)throw new Error("ambiguous: "+f);u.children?u.children.push(c):u.children=[c],c.parent=u}else{if(l)throw new Error("multiple roots");l=c}if(!l)throw new Error("no root");if(l.parent=kst,l.eachBefore(function(v){v.depth=v.parent.depth+1,--a}).eachBefore(Cte),l.parent=null,a>0)throw new Error("cycle");return l}return e.id=function(n){return arguments.length?(r=R2(n),e):r},e.parentId=function(n){return arguments.length?(t=R2(n),e):t},e}function Rst(r,t){return r.parent===t.parent?1:2}function YR(r){var t=r.children;return t?t[0]:r.t}function XR(r){var t=r.children;return t?t[t.length-1]:r.t}function Ost(r,t,e){var n=e/(t.i-r.i);t.c-=n,t.s+=e,r.c+=n,t.z+=e,t.m+=e}function Lst(r){for(var t=0,e=0,n=r.children,i=n.length,a;--i>=0;)a=n[i],a.z+=t,a.m+=t,t+=a.s+(e+=a.c)}function Fst(r,t,e){return r.a.parent===t.parent?r.a:e}function O2(r,t){this._=r,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}O2.prototype=Object.create(vg.prototype);function Nst(r){for(var t=new O2(r,0),e,n=[t],i,a,o,s;e=n.pop();)if(a=e._.children)for(e.children=new Array(s=a.length),o=s-1;o>=0;--o)n.push(i=e.children[o]=new O2(a[o],o)),i.parent=e;return(t.parent=new O2(null,0)).children=[t],t}function Bst(){var r=Rst,t=1,e=1,n=null;function i(u){var c=Nst(u);if(c.eachAfter(a),c.parent.m=-c.z,c.eachBefore(o),n)u.eachBefore(l);else{var f=u,d=u,h=u;u.eachBefore(function(y){y.x<f.x&&(f=y),y.x>d.x&&(d=y),y.depth>h.depth&&(h=y)});var v=f===d?1:r(f,d)/2,p=v-f.x,g=t/(d.x+v+p),m=e/(h.depth||1);u.eachBefore(function(y){y.x=(y.x+p)*g,y.y=y.depth*m})}return u}function a(u){var c=u.children,f=u.parent.children,d=u.i?f[u.i-1]:null;if(c){Lst(u);var h=(c[0].z+c[c.length-1].z)/2;d?(u.z=d.z+r(u._,d._),u.m=u.z-h):u.z=h}else d&&(u.z=d.z+r(u._,d._));u.parent.A=s(u,d,u.parent.A||f[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,c,f){if(c){for(var d=u,h=u,v=c,p=d.parent.children[0],g=d.m,m=h.m,y=v.m,b=p.m,x;v=XR(v),d=YR(d),v&&d;)p=YR(p),h=XR(h),h.a=u,x=v.z+y-d.z-g+r(v._,d._),x>0&&(Ost(Fst(v,u,f),u,x),g+=x,m+=x),y+=v.m,g+=d.m,b+=p.m,m+=h.m;v&&!XR(h)&&(h.t=v,h.m+=y-m),d&&!YR(p)&&(p.t=d,p.m+=g-b,f=u)}return f}function l(u){u.x*=t,u.y=u.depth*e}return i.separation=function(u){return arguments.length?(r=u,i):r},i.size=function(u){return arguments.length?(n=!1,t=+u[0],e=+u[1],i):n?null:[t,e]},i.nodeSize=function(u){return arguments.length?(n=!0,t=+u[0],e=+u[1],i):n?[t,e]:null},i}function L2(r,t,e,n,i){for(var a=r.children,o,s=-1,l=a.length,u=r.value&&(i-e)/r.value;++s<l;)o=a[s],o.x0=t,o.x1=n,o.y0=e,o.y1=e+=o.value*u}var Nte=(1+Math.sqrt(5))/2;function Bte(r,t,e,n,i,a){for(var o=[],s=t.children,l,u,c=0,f=0,d=s.length,h,v,p=t.value,g,m,y,b,x,w,S;c<d;){h=i-e,v=a-n;do g=s[f++].value;while(!g&&f<d);for(m=y=g,w=Math.max(v/h,h/v)/(p*r),S=g*g*w,x=Math.max(y/S,S/m);f<d;++f){if(g+=u=s[f].value,u<m&&(m=u),u>y&&(y=u),S=g*g*w,b=Math.max(y/S,S/m),b>x){g-=u;break}x=b}o.push(l={value:g,dice:h<v,children:s.slice(c,f)}),l.dice?Cb(l,e,n,i,p?n+=v*g/p:a):L2(l,e,n,p?e+=h*g/p:i,a),p-=g,c=f}return o}var $te=function r(t){function e(n,i,a,o,s){Bte(t,n,i,a,o,s)}return e.ratio=function(n){return r((n=+n)>1?n:1)},e}(Nte);function zte(){var r=$te,t=!1,e=1,n=1,i=[0],a=Ph,o=Ph,s=Ph,l=Ph,u=Ph;function c(d){return d.x0=d.y0=0,d.x1=e,d.y1=n,d.eachBefore(f),i=[0],t&&d.eachBefore(Ote),d}function f(d){var h=i[d.depth],v=d.x0+h,p=d.y0+h,g=d.x1-h,m=d.y1-h;g<v&&(v=g=(v+g)/2),m<p&&(p=m=(p+m)/2),d.x0=v,d.y0=p,d.x1=g,d.y1=m,d.children&&(h=i[d.depth+1]=a(d)/2,v+=u(d)-h,p+=o(d)-h,g-=s(d)-h,m-=l(d)-h,g<v&&(v=g=(v+g)/2),m<p&&(p=m=(p+m)/2),r(d,v,p,g,m))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(e=+d[0],n=+d[1],c):[e,n]},c.tile=function(d){return arguments.length?(r=R2(d),c):r},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(a=typeof d=="function"?d:pg(+d),c):a},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:pg(+d),c):o},c.paddingRight=function(d){return arguments.length?(s=typeof d=="function"?d:pg(+d),c):s},c.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:pg(+d),c):l},c.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:pg(+d),c):u},c}function $st(r,t,e,n,i){var a=r.children,o,s=a.length,l,u=new Array(s+1);for(u[0]=l=o=0;o<s;++o)u[o+1]=l+=a[o].value;c(0,s,r.value,t,e,n,i);function c(f,d,h,v,p,g,m){if(f>=d-1){var y=a[f];y.x0=v,y.y0=p,y.x1=g,y.y1=m;return}for(var b=u[f],x=h/2+b,w=f+1,S=d-1;w<S;){var C=w+S>>>1;u[C]<x?w=C+1:S=C}x-u[w-1]<u[w]-x&&f+1<w&&--w;var _=u[w]-b,T=h-_;if(g-v>m-p){var E=h?(v*T+g*_)/h:g;c(f,w,_,v,p,E,m),c(w,d,T,E,p,g,m)}else{var M=h?(p*T+m*_)/h:m;c(f,w,_,v,p,g,M),c(w,d,T,v,M,g,m)}}}function zst(r,t,e,n,i){(r.depth&1?L2:Cb)(r,t,e,n,i)}var Gst=function r(t){function e(n,i,a,o,s){if((l=n._squarify)&&l.ratio===t)for(var l,u,c,f,d=-1,h,v=l.length,p=n.value;++d<v;){for(u=l[d],c=u.children,f=u.value=0,h=c.length;f<h;++f)u.value+=c[f].value;u.dice?Cb(u,i,a,o,p?a+=(s-a)*u.value/p:s):L2(u,i,a,p?i+=(o-i)*u.value/p:o,s),p-=u.value}else n._squarify=l=Bte(t,n,i,a,o,s),l.ratio=t}return e.ratio=function(n){return r((n=+n)>1?n:1)},e}(Nte),Gte=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",cluster:tst,hierarchy:hg,pack:Pte,packSiblings:Tst,packEnclose:Ete,partition:Lte,stratify:Dst,tree:Bst,treemap:zte,treemapBinary:$st,treemapDice:Cb,treemapSlice:L2,treemapSliceDice:zst,treemapSquarify:$te,treemapResquarify:Gst}),Ust={field:"value",size:[1,1],round:!1,padding:0,sort:function(r,t){return t.value-r.value},as:["x","y"],ignoreParentValue:!0};function Vst(r,t){t=$t({},Ust,t);var e=t.as;if(!qe(e)||e.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var n;try{n=UR(t)}catch(l){console.warn(l)}var i=function(l){return Lte().size(t.size).round(t.round).padding(t.padding)(hg(l).sum(function(u){return aa(u.children)?t.ignoreParentValue?0:u[n]-Wa(u.children,function(c,f){return c+f[n]},0):u[n]}).sort(t.sort))},a=i(r),o=e[0],s=e[1];return a.each(function(l){var u,c;l[o]=[l.x0,l.x1,l.x1,l.x0],l[s]=[l.y1,l.y1,l.y0,l.y0],l.name=l.name||((u=l.data)===null||u===void 0?void 0:u.name)||((c=l.data)===null||c===void 0?void 0:c.label),l.data.name=l.name,["x0","x1","y0","y1"].forEach(function(f){e.indexOf(f)===-1&&delete l[f]})}),VR(a)}var Hst={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(r,t){return t.value-r.value},ratio:.5*(1+Math.sqrt(5))};function Wst(r,t){return r==="treemapSquarify"?Gte[r].ratio(t):Gte[r]}function Ute(r,t){t=$t({},Hst,t);var e=t.as;if(!qe(e)||e.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var n;try{n=UR(t)}catch(u){console.warn(u)}var i=Wst(t.tile,t.ratio),a=function(u){return zte().tile(i).size(t.size).round(t.round).padding(t.padding).paddingInner(t.paddingInner).paddingOuter(t.paddingOuter).paddingTop(t.paddingTop).paddingRight(t.paddingRight).paddingBottom(t.paddingBottom).paddingLeft(t.paddingLeft)(hg(u).sum(function(c){return t.ignoreParentValue&&c.children?0:c[n]}).sort(t.sort))},o=a(r),s=e[0],l=e[1];return o.each(function(u){u[s]=[u.x0,u.x1,u.x1,u.x0],u[l]=[u.y1,u.y1,u.y0,u.y0],["x0","x1","y0","y1"].forEach(function(c){e.indexOf(c)===-1&&delete u[c]})}),VR(o)}function Vte(r){var t=r.data,e=r.colorField,n=r.rawFields,i=r.hierarchyConfig,a=i===void 0?{}:i,o=a.activeDepth,s={partition:Vst,treemap:Ute},l=r.seriesField,u=r.type||"partition",c=s[u](t,A(A({field:l||"value"},Ux(a,["activeDepth"])),{type:"hierarchy."+u,as:["x","y"]})),f=[];return c.forEach(function(d){var h,v,p,g,m,y;if(d.depth===0||o>0&&d.depth>o)return null;for(var b=d.data.name,x=A({},d);x.depth>1;)b=((v=x.parent.data)===null||v===void 0?void 0:v.name)+" / "+b,x=x.parent;var w=A(A(A({},Pn(d.data,$n(n||[],[a.field]))),(h={},h[xb]=b,h[HR]=x.data.name,h)),d);l&&(w[l]=d.data[l]||((g=(p=d.parent)===null||p===void 0?void 0:p.data)===null||g===void 0?void 0:g[l])),e&&(w[e]=d.data[e]||((y=(m=d.parent)===null||m===void 0?void 0:m.data)===null||y===void 0?void 0:y[e])),w.ext=a,w[wb]={hierarchyConfig:a,colorField:e,rawFields:n},f.push(w)}),f}function jst(r){var t=r.chart,e=r.options,n=e.color,i=e.colorField,a=i===void 0?HR:i,o=e.sunburstStyle,s=e.rawFields,l=s===void 0?[]:s,u=Vte(e);t.data(u);var c;return o&&(c=function(f){return Ze({},{fillOpacity:Math.pow(.85,f.depth)},Vt(o)?o(f):o)}),m2(Ze({},r,{options:{xField:"x",yField:"y",seriesField:a,rawFields:yc($n(Vot,l)),polygon:{color:n,style:c}}})),r}function Yst(r){var t=r.chart;return t.axis(!1),r}function Xst(r){var t=r.chart;return t.legend(!1),r}function qst(r){var t=r.chart,e=r.options,n=e.label,i=to(t,"polygon");if(!n)i.label(!1);else{var a=n.fields,o=a===void 0?["name"]:a,s=n.callback,l=Lr(n,["fields","callback"]);i.label({fields:o,callback:s,cfg:_a(l)})}return r}function Kst(r){var t=r.chart,e=r.options,n=e.innerRadius,i=e.radius,a=e.reflect,o=t.coordinate({type:"polar",cfg:{innerRadius:n,radius:i}});return a&&o.reflect(a),r}function Zst(r){var t,e=r.options,n=e.hierarchyConfig,i=e.meta;return xr(Ai({},(t={},t[bte]=ne(i,ne(n,["field"],"value")),t)))(r)}function Qst(r){var t=r.chart,e=r.options,n=e.tooltip;if(n===!1)t.tooltip(!1);else{var i=n;ne(n,"fields")||(i=Ze({},{customItems:function(a){return a.map(function(o){var s=ne(t.getOptions(),"scales"),l=ne(s,[xb,"formatter"],function(c){return c}),u=ne(s,[bte,"formatter"],function(c){return c});return A(A({},o),{name:l(o.data[xb]),value:u(o.data.value)})})}},i)),t.tooltip(i)}return r}function Jst(r){var t=r.drilldown,e=r.interactions,n=e===void 0?[]:e;return(t==null?void 0:t.enabled)?Ze({},r,{interactions:$n(n,[{type:"drill-down",cfg:{drillDownConfig:t,transformData:Vte}}])}):r}function elt(r){var t=r.chart,e=r.options,n=e.drilldown;return Kn({chart:t,options:Jst(e)}),(n==null?void 0:n.enabled)&&(t.appendPadding=u2(t.appendPadding,ne(n,["breadCrumb","position"]))),r}function tlt(r){return xr(yn,vs("sunburstStyle"),jst,Yst,Zst,Xst,Kst,Qst,qst,elt,Dn,Mi())(r)}function Hte(r){var t=ne(r,["event","data","data"],{});return qe(t.children)&&t.children.length>0}function Wte(r){var t=r.view.getCoordinate(),e=t.innerRadius;if(e){var n=r.event,i=n.x,a=n.y,o=t.center,s=o.x,l=o.y,u=t.getRadius()*e,c=Math.sqrt(Math.pow(s-i,2)+Math.pow(l-a,2));return c<u}return!1}gr("drill-down-action",Yot);kr("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:Hte},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:Wte}],start:[{trigger:"element:click",isEnable:Hte,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:Wte,action:["drill-down-action:back"]}]});(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="sunburst",e}return t.getDefaultOptions=function(){return Hot},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return tlt},t.SUNBURST_ANCESTOR_FIELD=HR,t.SUNBURST_PATH_FIELD=xb,t.NODE_ANCESTORS_FIELD=zR,t})(Ar);var F2,N2="range",jte="type",Ef="percent",rlt="#f0f0f0",Yte="indicator-view",Xte="range-view",nlt={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(F2={},F2[N2]={sync:"v"},F2[Ef]={sync:"v",tickCount:5,tickInterval:.2},F2),animation:!1};function ilt(r,t){return r.map(function(e,n){var i;return i={},i[N2]=e-(r[n-1]||0),i[jte]=""+n,i[Ef]=t,i}).filter(function(e){return!!e[N2]})}function qte(r){var t;return[(t={},t[Ef]=Yn(r,0,1),t)]}function Kte(r,t){var e=ne(t,["ticks"],[]),n=aa(e)?e:[0,Yn(r,0,1),1];return ilt(n,r)}function alt(r){var t=r.chart,e=r.options,n=e.percent,i=e.range,a=e.radius,o=e.innerRadius,s=e.startAngle,l=e.endAngle,u=e.axis,c=e.indicator,f=e.gaugeStyle,d=e.type,h=e.meter,v=i.color,p=i.width;if(c){var g=qte(n),m=t.createView({id:Yte});m.data(g),m.point().position(Ef+"*1").shape(c.shape||"gauge-indicator").customInfo({defaultColor:t.getTheme().defaultColor,indicator:c}),m.coordinate("polar",{startAngle:s,endAngle:l,radius:o*a}),m.axis(Ef,u),m.scale(Ef,Pn(u,Xo))}var y=Kte(n,e.range),b=t.createView({id:Xte});b.data(y);var x=rt(v)?[v,rlt]:v,w=ro({chart:b,options:{xField:"1",yField:N2,seriesField:jte,rawFields:[Ef],isStack:!0,interval:{color:x,style:f,shape:d==="meter"?"meter-gauge":null},args:{zIndexReversed:!0},minColumnWidth:p,maxColumnWidth:p}}).ext,S=w.geometry;return S.customInfo({meter:h}),b.coordinate("polar",{innerRadius:o,radius:a,startAngle:s,endAngle:l}).transpose(),r}function olt(r){var t;return xr(Ai((t={range:{min:0,max:1,maxLimit:1,minLimit:0}},t[Ef]={},t)))(r)}function Zte(r,t){var e=r.chart,n=r.options,i=n.statistic,a=n.percent;if(e.getController("annotation").clear(!0),i){var o=i.content,s=void 0;o&&(s=Ze({},{content:(a*100).toFixed(2)+"%",style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},o)),ttt(e,{statistic:A(A({},i),{content:s})},{percent:a})}return t&&e.render(!0),r}function slt(r){var t=r.chart;return t.legend(!1),t.tooltip(!1),r}function Qte(r){return xr(yn,Dn,alt,olt,Zte,Kn,Mi(),slt)(r)}En("point","gauge-indicator",{draw:function(r,t){var e=r.customInfo,n=e.indicator,i=e.defaultColor,a=n,o=a.pointer,s=a.pin,l=t.addGroup(),u=this.parsePoint({x:0,y:0});return o&&l.addShape("line",{name:"pointer",attrs:A({x1:u.x,y1:u.y,x2:r.x,y2:r.y,stroke:i},o.style)}),s&&l.addShape("circle",{name:"pin",attrs:A({x:u.x,y:u.y,stroke:i},s.style)}),l}});En("interval","meter-gauge",{draw:function(r,t){var e=r.customInfo.meter,n=e===void 0?{}:e,i=n.steps,a=i===void 0?50:i,o=n.stepRatio,s=o===void 0?.5:o;a=a<1?1:a,s=Yn(s,0,1);var l=this.coordinate,u=l.startAngle,c=l.endAngle,f=0;if(s>0&&s<1){var d=c-u;f=d/a/(s/(1-s)+1-1/a)}for(var h=f/(1-s)*s,v=t.addGroup(),p=this.coordinate.getCenter(),g=this.coordinate.getRadius(),m=jo.getAngle(r,this.coordinate),y=m.startAngle,b=m.endAngle,x=y;x<b;){var w=void 0,S=(x-u)%(h+f);S<h?w=x+(h-S):(x+=h+f-S,w=x+h);var C=jo.getSectorPath(p.x,p.y,g,x,Math.min(w,b),g*this.coordinate.innerRadius);v.addShape("path",{name:"meter-gauge",attrs:{path:C,fill:r.color,stroke:r.color,lineWidth:.5}}),x=w+f}return v}});var llt=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="gauge",e}return t.getDefaultOptions=function(){return nlt},t.prototype.changeData=function(e){this.chart.emit(Nr.BEFORE_CHANGE_DATA,ci.fromData(this.chart,Nr.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e});var n=this.chart.views.find(function(a){return a.id===Yte});n&&n.data(qte(e));var i=this.chart.views.find(function(a){return a.id===Xte});i&&i.data(Kte(e,this.options.range)),Zte({chart:this.chart,options:this.options},!0),this.chart.emit(Nr.AFTER_CHANGE_DATA,ci.fromData(this.chart,Nr.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Qte},t}(Ar),Hs="$$yField$$",B2="$$diffField$$",qR="$$absoluteField$$",KR="$$isTotal$$",ult={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function clt(r,t,e,n,i){var a,o=[];if(Wa(r,function(l,u){var c;qu(fl.WARN,Rt(u[e]),u[e]+" is not a valid number");var f=xc(u[e])?null:u[e];return o.push(A(A({},u),(c={},c[n]=[l,l+f],c))),l+f},0),o.length&&i){var s=ne(o,[[r.length-1],n,[1]]);o.push((a={},a[t]=i.label,a[e]=s,a[n]=[0,s],a))}return o}function Jte(r,t,e,n){var i=clt(r,t,e,Hs,n);return i.map(function(a,o){var s;return Kr(a)?A(A({},a),(s={},s[qR]=a[Hs][1],s[B2]=a[Hs][1]-a[Hs][0],s[KR]=o===r.length,s)):a})}function flt(r){for(var t=[],e=0;e<r.length;e++){var n=r[e];if(n){var i=e===0?"M":"L";t.push([i,n.x,n.y])}}var a=r[0];return t.push(["L",a.x,a.y]),t.push(["z"]),t}function dlt(r){return Ze({},r.defaultStyle,r.style,{fill:r.color})}En("interval","waterfall",{draw:function(r,t){var e=r.customInfo,n=r.points,i=r.nextPoints,a=t.addGroup(),o=this.parsePath(flt(n)),s=dlt(r);a.addShape("path",{attrs:A(A({},s),{path:o})});var l=ne(e,"leaderLine");if(l&&i){var u=[["M",n[2].x,n[2].y],["L",i[0].x,i[0].y]];n[2].y===i[1].y&&(u[1]=["L",i[1].x,i[1].y]),u=this.parsePath(u),a.addShape("path",{attrs:A({path:u},l.style||{})})}return a}});function hlt(r){var t=r.options,e=t.locale,n=t.total,i=f2(e).get(["waterfall","total"]);return n&&typeof n.label!="string"&&i&&(r.options.total.label=i),r}function vlt(r){var t=r.chart,e=r.options,n=e.data,i=e.xField,a=e.yField,o=e.total,s=e.leaderLine,l=e.columnWidthRatio,u=e.waterfallStyle,c=e.risingFill,f=e.fallingFill,d=e.color;t.data(Jte(n,i,a,o));var h=d||function(m){return ne(m,[KR])?ne(o,["style","fill"],""):ne(m,[Hs,1])-ne(m,[Hs,0])>0?c:f},v=Ze({},r,{options:{xField:i,yField:Hs,seriesField:i,rawFields:[a,B2,KR,Hs],widthRatio:l,interval:{style:u,shape:"waterfall",color:h}}}),p=ro(v).ext,g=p.geometry;return g.customInfo({leaderLine:s}),r}function plt(r){var t,e,n=r.options,i=n.xAxis,a=n.yAxis,o=n.xField,s=n.yField,l=n.meta,u=Ze({},{alias:s},ne(l,s));return xr(Ai((t={},t[o]=i,t[s]=a,t[Hs]=a,t),Ze({},l,(e={},e[Hs]=u,e[B2]=u,e[qR]=u,e))))(r)}function glt(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField;return n===!1?t.axis(a,!1):t.axis(a,n),i===!1?(t.axis(o,!1),t.axis(Hs,!1)):(t.axis(o,i),t.axis(Hs,i)),r}function mlt(r){var t=r.chart,e=r.options,n=e.legend,i=e.total,a=e.risingFill,o=e.fallingFill,s=e.locale,l=f2(s);if(n===!1)t.legend(!1);else{var u=[{name:l.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:a}}},{name:l.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:o}}}];i&&u.push({name:i.label||"",value:"total",marker:{symbol:"square",style:Ze({},{r:5},ne(i,"style"))}}),t.legend(Ze({},{custom:!0,position:"top",items:u},n)),t.removeInteraction("legend-filter")}return r}function ylt(r){var t=r.chart,e=r.options,n=e.label,i=e.labelMode,a=e.xField,o=to(t,"interval");if(!n)o.label(!1);else{var s=n.callback,l=Lr(n,["callback"]);o.label({fields:i==="absolute"?[qR,a]:[B2,a],callback:s,cfg:_a(l)})}return r}function blt(r){var t=r.chart,e=r.options,n=e.tooltip,i=e.xField,a=e.yField;if(n!==!1){t.tooltip(A({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[a]},n));var o=t.geometries[0];(n==null?void 0:n.formatter)?o.tooltip(i+"*"+a,n.formatter):o.tooltip(a)}else t.tooltip(!1);return r}function xlt(r){return xr(hlt,yn,vlt,plt,glt,mlt,blt,ylt,xf,Kn,Dn,Mi())(r)}(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="waterfall",e}return t.getDefaultOptions=function(){return ult},t.prototype.changeData=function(e){var n=this.options,i=n.xField,a=n.yField,o=n.total;this.updateOption({data:e}),this.chart.changeData(Jte(e,i,a,o))},t.prototype.getSchemaAdaptor=function(){return xlt},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t})(Ar);function wlt(r,t,e){var n=e.map(function(o){return o[t]}).filter(function(o){return o!==void 0}),i=n.length>0?Math.max.apply(Math,n):0,a=Math.abs(r)%360;return a?i*360/a:i}function Slt(r,t,e){var n=[];return r.forEach(function(i){var a=n.find(function(o){return o[t]===i[t]});a?a[e]+=i[e]||null:n.push(A({},i))}),n}function Clt(r){var t=r.chart,e=r.options,n=e.barStyle,i=e.color,a=e.tooltip,o=e.colorField,s=e.type,l=e.xField,u=e.yField,c=e.data,f=ng(c,u);t.data(f);var d=Ze({},r,{options:{tooltip:a,seriesField:o,interval:{style:n,color:i,shape:s==="line"?"line":"intervel"},minColumnWidth:e.minBarWidth,maxColumnWidth:e.maxBarWidth,columnBackground:e.barBackground}});return ro(d),s==="line"&&ps({chart:t,options:{xField:l,yField:u,seriesField:o,point:{shape:"circle",color:i}}}),r}function ere(r){var t,e=r.options,n=e.yField,i=e.xField,a=e.data,o=e.isStack,s=e.isGroup,l=e.colorField,u=e.maxAngle,c=o&&!s&&l?Slt(a,i,n):a,f=ng(c,n);return xr(Ai((t={},t[n]={min:0,max:wlt(u,n,f)},t)))(r)}function Elt(r){var t=r.chart,e=r.options,n=e.radius,i=e.innerRadius,a=e.startAngle,o=e.endAngle;return t.coordinate({type:"polar",cfg:{radius:n,innerRadius:i,startAngle:a,endAngle:o}}).transpose(),r}function _lt(r){var t=r.chart,e=r.options,n=e.xField,i=e.xAxis;return t.axis(n,i),r}function Tlt(r){var t=r.chart,e=r.options,n=e.label,i=e.yField,a=to(t,"interval");if(!n)a.label(!1);else{var o=n.callback,s=Lr(n,["callback"]);a.label({fields:[i],callback:o,cfg:A(A({},_a(s)),{type:"polar"})})}return r}function Alt(r){return xr(vs("barStyle"),Clt,ere,_lt,Elt,Kn,Dn,yn,Ta,lb,Mi(),Tlt)(r)}var Mlt=Ze({},Ar.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240});(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="radial-bar",e}return t.getDefaultOptions=function(){return Mlt},t.prototype.changeData=function(e){this.updateOption({data:e}),ere({chart:this.chart,options:this.options}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Alt},t})(Ar);var lu="first-axes-view",uu="second-axes-view",Dh="series-field-key";function tre(r,t,e,n,i){var a=[];t.forEach(function(f){n.forEach(function(d){var h,v=(h={},h[r]=d[r],h[e]=f,h[f]=d[f],h);a.push(v)})});var o=Object.values(ao(a,e)),s=o[0],l=s===void 0?[]:s,u=o[1],c=u===void 0?[]:u;return i?[l.reverse(),c.reverse()]:[l,c]}function ec(r){return r!=="vertical"}function klt(r,t,e){var n=t[0],i=t[1],a=n.autoPadding,o=i.autoPadding,s=r.__axisPosition,l=s.layout,u=s.position;if(ec(l)&&u==="top"&&(n.autoPadding=e.instance(a.top,0,a.bottom,a.left),i.autoPadding=e.instance(o.top,a.left,o.bottom,0)),ec(l)&&u==="bottom"&&(n.autoPadding=e.instance(a.top,a.right/2+5,a.bottom,a.left),i.autoPadding=e.instance(o.top,o.right,o.bottom,a.right/2+5)),!ec(l)&&u==="bottom"){var c=a.left>=o.left?a.left:o.left;n.autoPadding=e.instance(a.top,a.right,a.bottom/2+5,c),i.autoPadding=e.instance(a.bottom/2+5,o.right,o.bottom,c)}if(!ec(l)&&u==="top"){var c=a.left>=o.left?a.left:o.left;n.autoPadding=e.instance(a.top,a.right,0,c),i.autoPadding=e.instance(0,o.right,a.top,c)}}function Ilt(r){var t=r.chart,e=r.options,n=e.data,i=e.xField,a=e.yField,o=e.color,s=e.barStyle,l=e.widthRatio,u=e.legend,c=e.layout,f=tre(i,a,Dh,n,ec(c));u?t.legend(Dh,u):u===!1&&t.legend(!1);var d,h,v=f[0],p=f[1];ec(c)?(d=t.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:lu}),d.coordinate().transpose().reflect("x"),h=t.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:uu}),h.coordinate().transpose(),d.data(v),h.data(p)):(d=t.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:lu}),h=t.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:uu}),h.coordinate().reflect("y"),d.data(v),h.data(p));var g=Ze({},r,{chart:d,options:{widthRatio:l,xField:i,yField:a[0],seriesField:Dh,interval:{color:o,style:s}}});ro(g);var m=Ze({},r,{chart:h,options:{xField:i,yField:a[1],seriesField:Dh,widthRatio:l,interval:{color:o,style:s}}});return ro(m),r}function Plt(r){var t,e,n,i=r.options,a=r.chart,o=i.xAxis,s=i.yAxis,l=i.xField,u=i.yField,c=Yr(a,lu),f=Yr(a,uu),d={};return Zf((i==null?void 0:i.meta)||{}).map(function(h){ne(i==null?void 0:i.meta,[h,"alias"])&&(d[h]=i.meta[h].alias)}),a.scale((t={},t[Dh]={sync:!0,formatter:function(h){return ne(d,h,h)}},t)),Ai((e={},e[l]=o,e[u[0]]=s[u[0]],e))(Ze({},r,{chart:c})),Ai((n={},n[l]=o,n[u[1]]=s[u[1]],n))(Ze({},r,{chart:f})),r}function Dlt(r){var t=r.chart,e=r.options,n=e.xAxis,i=e.yAxis,a=e.xField,o=e.yField,s=e.layout,l=Yr(t,lu),u=Yr(t,uu);return(n==null?void 0:n.position)==="bottom"?u.axis(a,A(A({},n),{label:{formatter:function(){return""}}})):u.axis(a,!1),n===!1?l.axis(a,!1):l.axis(a,A({position:ec(s)?"top":"bottom"},n)),i===!1?(l.axis(o[0],!1),u.axis(o[1],!1)):(l.axis(o[0],i[o[0]]),u.axis(o[1],i[o[1]])),t.__axisPosition={position:l.getOptions().axes[a].position,layout:s},r}function Rlt(r){var t=r.chart;return Kn(Ze({},r,{chart:Yr(t,lu)})),Kn(Ze({},r,{chart:Yr(t,uu)})),r}function Olt(r){var t=r.chart,e=r.options,n=e.yField,i=e.yAxis;return Ch(Ze({},r,{chart:Yr(t,lu),options:{yAxis:i[n[0]]}})),Ch(Ze({},r,{chart:Yr(t,uu),options:{yAxis:i[n[1]]}})),r}function Llt(r){var t=r.chart;return yn(Ze({},r,{chart:Yr(t,lu)})),yn(Ze({},r,{chart:Yr(t,uu)})),r}function Flt(r){var t=r.chart;return Dn(Ze({},r,{chart:Yr(t,lu)})),Dn(Ze({},r,{chart:Yr(t,uu)})),r}function Nlt(r){var t=this,e,n,i=r.chart,a=r.options,o=a.label,s=a.yField,l=a.layout,u=Yr(i,lu),c=Yr(i,uu),f=to(u,"interval"),d=to(c,"interval");if(!o)f.label(!1),d.label(!1);else{var h=o.callback,v=Lr(o,["callback"]);v.position||(v.position="middle"),v.offset===void 0&&(v.offset=2);var p=A({},v);if(ec(l)){var g=((e=p.style)===null||e===void 0?void 0:e.textAlign)||(v.position==="middle"?"center":"left");v.style=Ze({},v.style,{textAlign:g});var m={left:"right",right:"left",center:"center"};p.style=Ze({},p.style,{textAlign:m[g]})}else{var y={top:"bottom",bottom:"top",middle:"middle"};typeof v.position=="string"?v.position=y[v.position]:typeof v.position=="function"&&(v.position=function(){for(var w=[],S=0;S<arguments.length;S++)w[S]=arguments[S];return y[v.position.apply(t,w)]});var b=((n=p.style)===null||n===void 0?void 0:n.textBaseline)||"bottom";p.style=Ze({},p.style,{textBaseline:b});var x={top:"bottom",bottom:"top",middle:"middle"};v.style=Ze({},v.style,{textBaseline:x[b]})}f.label({fields:[s[0]],callback:h,cfg:_a(p)}),d.label({fields:[s[1]],callback:h,cfg:_a(v)})}return r}function Blt(r){return xr(Ilt,Plt,Dlt,Olt,Llt,Nlt,Ta,Rlt,Flt)(r)}(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="bidirectional-bar",e}return t.getDefaultOptions=function(){return Ze({},r.getDefaultOptions.call(this),{syncViewPadding:klt})},t.prototype.changeData=function(e){e===void 0&&(e=[]),this.chart.emit(Nr.BEFORE_CHANGE_DATA,ci.fromData(this.chart,Nr.BEFORE_CHANGE_DATA,null)),this.updateOption({data:e});var n=this.options,i=n.xField,a=n.yField,o=n.layout,s=tre(i,a,Dh,e,ec(o)),l=s[0],u=s[1],c=Yr(this.chart,lu),f=Yr(this.chart,uu);c.data(l),f.data(u),this.chart.render(!0),this.chart.emit(Nr.AFTER_CHANGE_DATA,ci.fromData(this.chart,Nr.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Blt},t.SERIES_FIELD_KEY=Dh,t})(Ar);function rre(r,t){if(!!qe(r))return r.find(function(e){return e.type===t})}function nre(r,t){var e=rre(r,t);return e&&e.enable!==!1}function ZR(r){var t=r.interactions,e=r.drilldown;return ne(e,"enabled")||nre(t,"treemap-drill-down")}function $lt(r){var t=r.interactions["drill-down"];if(!!t){var e=t.context.actions.find(function(n){return n.name==="drill-down-action"});e.reset()}}function QR(r){var t=r.data,e=r.colorField,n=r.enableDrillDown,i=r.hierarchyConfig,a=Ute(t,A(A({},i),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),o=[];return a.forEach(function(s){if(s.depth===0||n&&s.depth!==1||!n&&s.children)return null;var l=s.ancestors().map(function(d){return{data:d.data,height:d.height,value:d.value}}),u=n&&qe(t.path)?l.concat(t.path.slice(1)):l,c=Object.assign({},s.data,A({x:s.x,y:s.y,depth:s.depth,value:s.value,path:u},s));if(!s.data[e]&&s.parent){var f=s.ancestors().find(function(d){return d.data[e]});c[e]=f==null?void 0:f.data[e]}else c[e]=s.data[e];c[wb]={hierarchyConfig:i,colorField:e,enableDrillDown:n},o.push(c)}),o}function zlt(r){var t=r.options,e=t.colorField;return Ze({options:{rawFields:["value"],tooltip:{fields:["name","value",e,"path"],formatter:function(n){return{name:n.name,value:n.value}}}}},r)}function Glt(r){var t=r.chart,e=r.options,n=e.color,i=e.colorField,a=e.rectStyle,o=e.hierarchyConfig,s=e.rawFields,l=QR({data:e.data,colorField:e.colorField,enableDrillDown:ZR(e),hierarchyConfig:o});return t.data(l),m2(Ze({},r,{options:{xField:"x",yField:"y",seriesField:i,rawFields:s,polygon:{color:n,style:a}}})),t.coordinate().reflect("y"),r}function Ult(r){var t=r.chart;return t.axis(!1),r}function Vlt(r){var t=r.drilldown,e=r.interactions,n=e===void 0?[]:e,i=ZR(r);return i?Ze({},r,{interactions:$n(n,[{type:"drill-down",cfg:{drillDownConfig:t,transformData:QR}}])}):r}function Hlt(r){var t=r.chart,e=r.options,n=e.interactions,i=e.drilldown;Kn({chart:t,options:Vlt(e)});var a=rre(n,"view-zoom");a&&(a.enable!==!1?t.getCanvas().on("mousewheel",function(s){s.preventDefault()}):t.getCanvas().off("mousewheel"));var o=ZR(e);return o&&(t.appendPadding=u2(t.appendPadding,ne(i,["breadCrumb","position"]))),r}function Wlt(r){return xr(zlt,yn,vs("rectStyle"),Glt,Ult,lb,Ta,Hlt,Dn,Mi())(r)}var jlt={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"\u521D\u59CB",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}};(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="treemap",e}return t.getDefaultOptions=function(){return jlt},t.prototype.changeData=function(e){var n=this.options,i=n.colorField,a=n.interactions,o=n.hierarchyConfig;this.updateOption({data:e});var s=QR({data:e,colorField:i,enableDrillDown:nre(a,"treemap-drill-down"),hierarchyConfig:o});this.chart.changeData(s),$lt(this.chart)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Wlt},t})(Ar);function Ylt(r){return r.target.depth}function Xlt(r){return r.depth}function qlt(r,t){return t-1-r.height}function JR(r,t){return r.sourceLinks.length?r.depth:t-1}function Klt(r){return r.targetLinks.length?r.depth:r.sourceLinks.length?w3(r.sourceLinks,Ylt)-1:0}function $2(r){return function(){return r}}function eO(r,t){for(var e=0,n=0;n<r.length;n++)e+=t(r[n]);return e}function tO(r,t){for(var e=-1/0,n=0;n<r.length;n++)e=Math.max(t(r[n]),e);return e}function Zlt(r,t){for(var e=1/0,n=0;n<r.length;n++)e=Math.min(t(r[n]),e);return e}function ire(r,t){return z2(r.source,t.source)||r.index-t.index}function are(r,t){return z2(r.target,t.target)||r.index-t.index}function z2(r,t){return r.y0-t.y0}function rO(r){return r.value}function Qlt(r){return r.index}function Jlt(r){return r.nodes}function eut(r){return r.links}function ore(r,t){var e=r.get(t);if(!e)throw new Error("missing: "+t);return e}function sre(r){for(var t=r.nodes,e=0,n=t;e<n.length;e++){for(var i=n[e],a=i.y0,o=a,s=0,l=i.sourceLinks;s<l.length;s++){var u=l[s];u.y0=a+u.width/2,a+=u.width}for(var c=0,f=i.targetLinks;c<f.length;c++){var u=f[c];u.y1=o+u.width/2,o+=u.width}}}function tut(){var r=0,t=0,e=1,n=1,i=24,a=8,o,s=Qlt,l=JR,u,c,f,d=Jlt,h=eut,v=6;function p(R){var L={nodes:d(R),links:h(R)};return g(L),m(L),y(L),b(L),S(L),sre(L),L}p.update=function(R){return sre(R),R},p.nodeId=function(R){return arguments.length?(s=typeof R=="function"?R:$2(R),p):s},p.nodeAlign=function(R){return arguments.length?(l=typeof R=="function"?R:$2(R),p):l},p.nodeDepth=function(R){return arguments.length?(u=R,p):u},p.nodeSort=function(R){return arguments.length?(c=R,p):c},p.nodeWidth=function(R){return arguments.length?(i=+R,p):i},p.nodePadding=function(R){return arguments.length?(a=o=+R,p):a},p.nodes=function(R){return arguments.length?(d=typeof R=="function"?R:$2(R),p):d},p.links=function(R){return arguments.length?(h=typeof R=="function"?R:$2(R),p):h},p.linkSort=function(R){return arguments.length?(f=R,p):f},p.size=function(R){return arguments.length?(r=t=0,e=+R[0],n=+R[1],p):[e-r,n-t]},p.extent=function(R){return arguments.length?(r=+R[0][0],e=+R[1][0],t=+R[0][1],n=+R[1][1],p):[[r,t],[e,n]]},p.iterations=function(R){return arguments.length?(v=+R,p):v};function g(R){var L=R.nodes,O=R.links;L.forEach(function(Y,fe){Y.index=fe,Y.sourceLinks=[],Y.targetLinks=[]});var B=new Map(L.map(function(Y){return[s(Y),Y]}));if(O.forEach(function(Y,fe){Y.index=fe;var le=Y.source,ue=Y.target;typeof le!="object"&&(le=Y.source=ore(B,le)),typeof ue!="object"&&(ue=Y.target=ore(B,ue)),le.sourceLinks.push(Y),ue.targetLinks.push(Y)}),f!=null)for(var U=0,W=L;U<W.length;U++){var X=W[U],ae=X.sourceLinks,Z=X.targetLinks;ae.sort(f),Z.sort(f)}}function m(R){for(var L=R.nodes,O=0,B=L;O<B.length;O++){var U=B[O];U.value=U.fixedValue===void 0?Math.max(eO(U.sourceLinks,rO),eO(U.targetLinks,rO)):U.fixedValue}}function y(R){for(var L=R.nodes,O=L.length,B=new Set(L),U=new Set,W=0;B.size;){if(B.forEach(function(Y){Y.depth=W;for(var fe=0,le=Y.sourceLinks;fe<le.length;fe++){var ue=le[fe].target;U.add(ue)}}),++W>O)throw new Error("circular link");B=U,U=new Set}if(u)for(var X=Math.max(tO(L,function(Y){return Y.depth})+1,0),ae=void 0,Z=0;Z<L.length;Z++)ae=L[Z],ae.depth=u.call(null,ae,X)}function b(R){for(var L=R.nodes,O=L.length,B=new Set(L),U=new Set,W=0;B.size;){if(B.forEach(function(X){X.height=W;for(var ae=0,Z=X.targetLinks;ae<Z.length;ae++){var Y=Z[ae].source;U.add(Y)}}),++W>O)throw new Error("circular link");B=U,U=new Set}}function x(R){for(var L=R.nodes,O=Math.max(tO(L,function(ue){return ue.depth})+1,0),B=(e-r-i)/(O-1),U=new Array(O).fill(0).map(function(){return[]}),W=0,X=L;W<X.length;W++){var ae=X[W],Z=Math.max(0,Math.min(O-1,Math.floor(l.call(null,ae,O))));ae.layer=Z,ae.x0=r+Z*B,ae.x1=ae.x0+i,U[Z]?U[Z].push(ae):U[Z]=[ae]}if(c)for(var Y=0,fe=U;Y<fe.length;Y++){var le=fe[Y];le.sort(c)}return U}function w(R){for(var L=Zlt(R,function(Ee){return(n-t-(Ee.length-1)*o)/eO(Ee,rO)}),O=0,B=R;O<B.length;O++){for(var U=B[O],W=t,X=0,ae=U;X<ae.length;X++){var Z=ae[X];Z.y0=W,Z.y1=W+Z.value*L,W=Z.y1+o;for(var Y=0,fe=Z.sourceLinks;Y<fe.length;Y++){var le=fe[Y];le.width=le.value*L}}W=(n-W+o)/(U.length+1);for(var ue=0;ue<U.length;++ue){var Z=U[ue];Z.y0+=W*(ue+1),Z.y1+=W*(ue+1)}P(U)}}function S(R){var L=x(R);o=Math.min(a,(n-t)/(tO(L,function(W){return W.length})-1)),w(L);for(var O=0;O<v;++O){var B=Math.pow(.99,O),U=Math.max(1-B,(O+1)/v);_(L,B,U),C(L,B,U)}}function C(R,L,O){for(var B=1,U=R.length;B<U;++B){for(var W=R[B],X=0,ae=W;X<ae.length;X++){for(var Z=ae[X],Y=0,fe=0,le=0,ue=Z.targetLinks;le<ue.length;le++){var Ee=ue[le],De=Ee.source,je=Ee.value,ke=je*(Z.layer-De.layer);Y+=F(De,Z)*ke,fe+=ke}if(fe>0){var D=(Y/fe-Z.y0)*L;Z.y0+=D,Z.y1+=D,k(Z)}}c===void 0&&W.sort(z2),W.length&&T(W,O)}}function _(R,L,O){for(var B=R.length,U=B-2;U>=0;--U){for(var W=R[U],X=0,ae=W;X<ae.length;X++){for(var Z=ae[X],Y=0,fe=0,le=0,ue=Z.sourceLinks;le<ue.length;le++){var Ee=ue[le],De=Ee.target,je=Ee.value,ke=je*(De.layer-Z.layer);Y+=$(Z,De)*ke,fe+=ke}if(fe>0){var D=(Y/fe-Z.y0)*L;Z.y0+=D,Z.y1+=D,k(Z)}}c===void 0&&W.sort(z2),W.length&&T(W,O)}}function T(R,L){var O=R.length>>1,B=R[O];M(R,B.y0-o,O-1,L),E(R,B.y1+o,O+1,L),M(R,n,R.length-1,L),E(R,t,0,L)}function E(R,L,O,B){for(;O<R.length;++O){var U=R[O],W=(L-U.y0)*B;W>1e-6&&(U.y0+=W,U.y1+=W),L=U.y1+o}}function M(R,L,O,B){for(;O>=0;--O){var U=R[O],W=(U.y1-L)*B;W>1e-6&&(U.y0-=W,U.y1-=W),L=U.y0-o}}function k(R){var L=R.sourceLinks,O=R.targetLinks;if(f===void 0){for(var B=0,U=O;B<U.length;B++){var W=U[B].source.sourceLinks;W.sort(are)}for(var X=0,ae=L;X<ae.length;X++){var Z=ae[X].target.targetLinks;Z.sort(ire)}}}function P(R){if(f===void 0)for(var L=0,O=R;L<O.length;L++){var B=O[L],U=B.sourceLinks,W=B.targetLinks;U.sort(are),W.sort(ire)}}function F(R,L){for(var O=R.y0-(R.sourceLinks.length-1)*o/2,B=0,U=R.sourceLinks;B<U.length;B++){var W=U[B],X=W.target,ae=W.width;if(X===L)break;O+=ae+o}for(var Z=0,Y=L.targetLinks;Z<Y.length;Z++){var fe=Y[Z],X=fe.source,ae=fe.width;if(X===R)break;O-=ae}return O}function $(R,L){for(var O=L.y0-(L.targetLinks.length-1)*o/2,B=0,U=L.targetLinks;B<U.length;B++){var W=U[B],X=W.source,ae=W.width;if(X===R)break;O+=ae+o}for(var Z=0,Y=R.sourceLinks;Z<Y.length;Z++){var fe=Y[Z],X=fe.target,ae=fe.width;if(X===L)break;O-=ae}return O}return p}var rut={left:Xlt,right:qlt,center:Klt,justify:JR},nut={nodeId:function(r){return r.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function iut(r){var t=rt(r)?rut[r]:Vt(r)?r:null;return t||JR}function aut(r){return $t({},nut,r)}function out(r,t){var e=aut(r),n=e.nodeId,i=e.nodeSort,a=e.nodeAlign,o=e.nodeWidth,s=e.nodePadding,l=e.nodeDepth,u=tut().nodeSort(i).nodeWidth(o).nodePadding(s).nodeDepth(l).nodeAlign(iut(a)).extent([[0,0],[1,1]]).nodeId(n),c=u(t);return c.nodes.forEach(function(f){var d=f.x0,h=f.x1,v=f.y0,p=f.y1;f.x=[d,h,h,d],f.y=[v,v,p,p]}),c.links.forEach(function(f){var d=f.source,h=f.target,v=d.x1,p=h.x0;f.x=[v,v,p,p];var g=f.width/2;f.y=[f.y0+g,f.y0-g,f.y1+g,f.y1-g]}),c}function sut(r,t,e){var n=[];return r.forEach(function(i){var a=i[t],o=i[e];n.includes(a)||n.push(a),n.includes(o)||n.push(o)}),n}function lut(r,t,e,n){var i={};return t.forEach(function(a){i[a]={},t.forEach(function(o){i[a][o]=0})}),r.forEach(function(a){i[a[e]][a[n]]=1}),i}function uut(r,t,e){if(!qe(r))return[];var n=[],i=sut(r,t,e),a=lut(r,i,t,e),o={};i.forEach(function(l){o[l]=0});function s(l){o[l]=1,i.forEach(function(u){if(a[l][u]!=0)if(o[u]==1)n.push(l+"_"+u);else{if(o[u]==-1)return;s(u)}}),o[l]=-1}return i.forEach(function(l){o[l]!=-1&&s(l)}),n.length!==0&&console.warn("sankey data contains circle, "+n.length+" records removed.",n),r.filter(function(l){return n.findIndex(function(u){return u===l[t]+"_"+l[e]})<0})}function cut(r){return r==="node-link"}function fut(r,t,e){return Sh(r)?r/e:t}function dut(r,t,e){return Sh(r)?r/e:t}function lre(r,t,e){var n=r.dataType,i=r.data,a=r.sourceField,o=r.targetField,s=r.weightField,l=r.nodeAlign,u=r.nodeSort,c=r.nodePadding,f=r.nodePaddingRatio,d=r.nodeWidth,h=r.nodeWidthRatio,v=r.nodeDepth,p=r.rawFields,g=p===void 0?[]:p,m;cut(n)?m=i:m=zJ(uut(i,a,o),a,o,s,g);var y=out({nodeAlign:l,nodePadding:dut(c,f,e),nodeWidth:fut(d,h,t),nodeSort:u,nodeDepth:v},m),b=y.nodes,x=y.links;return{nodes:b.map(function(w){return A(A({},Pn(w,$n(["x","y","name"],g))),{isNode:!0})}),edges:x.map(function(w){return A(A({source:w.source.name,target:w.target.name,name:w.source.name||w.target.name},Pn(w,$n(["x","y","value"],g))),{isNode:!1})})}}var ure="x",cre="y",fre="name",nO="nodes",iO="edges";function hut(r){var t=r.options,e=t.rawFields,n=e===void 0?[]:e;return Ze({},{options:{tooltip:{fields:yc($n(["name","source","target","value","isNode"],n))},label:{fields:yc($n(["x","name"],n))}}},r)}function vut(r){var t=r.chart,e=r.options,n=e.color,i=e.nodeStyle,a=e.edgeStyle,o=e.label,s=e.tooltip,l=e.nodeState,u=e.edgeState;t.legend(!1),t.tooltip(s),t.axis(!1),t.coordinate().reflect("y");var c=lre(e,t.width,t.height),f=c.nodes,d=c.edges,h=t.createView({id:iO});h.data(d),YJ({chart:h,options:{xField:ure,yField:cre,seriesField:fre,edge:{color:n,style:a,shape:"arc"},tooltip:s,state:u}});var v=t.createView({id:nO});return v.data(f),m2({chart:v,options:{xField:ure,yField:cre,seriesField:fre,polygon:{color:n,style:i},label:o,tooltip:s,state:l}}),t.interaction("element-active"),t.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),r}function put(r){var t=r.chart,e=r.options,n=e.animation;typeof n=="boolean"?t.animate(n):t.animate(!0);var i=$n(t.views[0].geometries,t.views[1].geometries);return i.forEach(function(a){a.animate(n)}),r}function gut(r){var t=r.chart,e=r.options,n=e.nodeDraggable,i="sankey-node-draggable";return n?t.interaction(i):t.removeInteraction(i),r}function mut(r){return xr(hut,vut,Kn,gut,put,yn)(r)}var yut=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.isDragging=!1,e}return t.prototype.isNodeElement=function(){var e=ne(this.context,"event.target");if(e){var n=e.get("element");return n&&n.getModel().data.isNode}return!1},t.prototype.getNodeView=function(){return Yr(this.context.view,nO)},t.prototype.getEdgeView=function(){return Yr(this.context.view,iO)},t.prototype.getCurrentDatumIdx=function(e){return this.getNodeView().geometries[0].elements.indexOf(e)},t.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:ne(this.context,"event.x"),y:ne(this.context,"event.y")};var e=this.context.event.target.get("element"),n=this.getCurrentDatumIdx(e);if(n===-1)return;this.currentElementIdx=n,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},t.prototype.translate=function(){if(this.isDragging){var e=this.context.view,n={x:ne(this.context,"event.x"),y:ne(this.context,"event.y")},i=n.x-this.prevPoint.x,a=n.y-this.prevPoint.y,o=this.getNodeView(),s=o.geometries[0].elements[this.currentElementIdx];if(s&&s.getModel()){var l=s.getModel().data,u=o.getOptions().data,c=o.getCoordinate(),f={x:i/c.getWidth(),y:a/c.getHeight()},d=A(A({},l),{x:l.x.map(function(m){return m+=f.x}),y:l.y.map(function(m){return m+=f.y})}),h=$n(u);h[this.currentElementIdx]=d,o.data(h);var v=l.name,p=this.getEdgeView(),g=p.getOptions().data;g.forEach(function(m){m.source===v&&(m.x[0]+=f.x,m.x[1]+=f.x,m.y[0]+=f.y,m.y[1]+=f.y),m.target===v&&(m.x[2]+=f.x,m.x[3]+=f.x,m.y[2]+=f.y,m.y[3]+=f.y)}),p.data(g),this.prevPoint=n,e.render(!0)}}},t.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},t}(ui);gr("sankey-node-drag",yut);kr("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(r){return r.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]});(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="sankey",e}return t.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(e){var n=e.name;return n},callback:function(e){var n=e[1]===1;return{style:{fill:"#545454",textAlign:n?"end":"start"},offsetX:n?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(e){return!ne(e,[0,"data","isNode"])},formatter:function(e){var n=e.source,i=e.target,a=e.value;return{name:n+" -> "+i,value:a}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},t.prototype.changeData=function(e){this.updateOption({data:e});var n=lre(this.options,this.chart.width,this.chart.height),i=n.nodes,a=n.edges,o=Yr(this.chart,nO),s=Yr(this.chart,iO);o.changeData(i),s.changeData(a)},t.prototype.getSchemaAdaptor=function(){return mut},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t})(Ar);var but={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(r){return r.id},source:function(r){return r.source},target:function(r){return r.target},sourceWeight:function(r){return r.value||1},targetWeight:function(r){return r.value||1},sortBy:null};function xut(r,t,e){G(r,function(n,i){n.inEdges=t.filter(function(a){return""+e.target(a)==""+i}),n.outEdges=t.filter(function(a){return""+e.source(a)==""+i}),n.edges=n.outEdges.concat(n.inEdges),n.frequency=n.edges.length,n.value=0,n.inEdges.forEach(function(a){n.value+=e.targetWeight(a)}),n.outEdges.forEach(function(a){n.value+=e.sourceWeight(a)})})}function wut(r,t){var e={weight:function(i,a){return a.value-i.value},frequency:function(i,a){return a.frequency-i.frequency},id:function(i,a){return(""+t.id(i)).localeCompare(""+t.id(a))}},n=e[t.sortBy];!n&&Vt(t.sortBy)&&(n=t.sortBy),n&&r.sort(n)}function Sut(r,t){var e=r.length;if(!e)throw new TypeError("Invalid nodes: it's empty!");if(t.weight){var n=t.nodePaddingRatio;if(n<0||n>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var i=n/(2*e),a=t.nodeWidthRatio;if(a<=0||a>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var o=0;r.forEach(function(l){o+=l.value}),r.forEach(function(l){l.weight=l.value/o,l.width=l.weight*(1-n),l.height=a}),r.forEach(function(l,u){for(var c=0,f=u-1;f>=0;f--)c+=r[f].width+2*i;var d=l.minX=i+c,h=l.maxX=l.minX+l.width,v=l.minY=t.y-a/2,p=l.maxY=v+a;l.x=[d,h,h,d],l.y=[v,v,p,p]})}else{var s=1/e;r.forEach(function(l,u){l.x=(u+.5)*s,l.y=t.y})}return r}function Cut(r,t,e){if(e.weight){var n={};G(r,function(i,a){n[a]=i.value}),t.forEach(function(i){var a=e.source(i),o=e.target(i),s=r[a],l=r[o];if(s&&l){var u=n[a],c=e.sourceWeight(i),f=s.minX+(s.value-u)/s.value*s.width,d=f+c/s.value*s.width;n[a]-=c;var h=n[o],v=e.targetWeight(i),p=l.minX+(l.value-h)/l.value*l.width,g=p+v/l.value*l.width;n[o]-=v;var m=e.y;i.x=[f,d,p,g],i.y=[m,m,m,m],i.source=s,i.target=l}})}else t.forEach(function(i){var a=r[e.source(i)],o=r[e.target(i)];a&&o&&(i.x=[a.x,o.x],i.y=[a.y,o.y],i.source=a,i.target=o)});return t}function Eut(r){return $t({},but,r)}function _ut(r,t){var e=Eut(r),n={},i=t.nodes,a=t.links;i.forEach(function(l){var u=e.id(l);n[u]=l}),xut(n,a,e),wut(i,e);var o=Sut(i,e),s=Cut(n,a,e);return{nodes:o,links:s}}var dre="x",hre="y",vre="name",pre="source",Tut={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(r,t){var e=(r[0]+r[1])/2,n=e>.5?-4:4;return{labelEmit:!0,style:{fill:"#8c8c8c"},offsetX:n,content:t}}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(r){return!ne(r,[0,"data","isNode"])},formatter:function(r){var t=r.source,e=r.target,n=r.value;return{name:t+" -> "+e,value:n}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function Aut(r){var t=r.options,e=t.data,n=t.sourceField,i=t.targetField,a=t.weightField,o=t.nodePaddingRatio,s=t.nodeWidthRatio,l=t.rawFields,u=l===void 0?[]:l,c=zJ(e,n,i,a),f=_ut({weight:!0,nodePaddingRatio:o,nodeWidthRatio:s},c),d=f.nodes,h=f.links,v=d.map(function(g){return A(A({},Pn(g,$n(["id","x","y","name"],u))),{isNode:!0})}),p=h.map(function(g){return A(A({source:g.source.name,target:g.target.name,name:g.source.name||g.target.name},Pn(g,$n(["x","y","value"],u))),{isNode:!1})});return A(A({},r),{ext:A(A({},r.ext),{chordData:{nodesData:v,edgesData:p}})})}function Mut(r){var t,e=r.chart;return e.scale((t={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}},t[vre]={sync:"color"},t[pre]={sync:"color"},t)),r}function kut(r){var t=r.chart;return t.axis(!1),r}function Iut(r){var t=r.chart;return t.legend(!1),r}function Put(r){var t=r.chart,e=r.options,n=e.tooltip;return t.tooltip(n),r}function Dut(r){var t=r.chart;return t.coordinate("polar").reflect("y"),r}function Rut(r){var t=r.chart,e=r.options,n=r.ext.chordData.nodesData,i=e.nodeStyle,a=e.label,o=e.tooltip,s=t.createView();return s.data(n),m2({chart:s,options:{xField:dre,yField:hre,seriesField:vre,polygon:{style:i},label:a,tooltip:o}}),r}function Out(r){var t=r.chart,e=r.options,n=r.ext.chordData.edgesData,i=e.edgeStyle,a=e.tooltip,o=t.createView();o.data(n);var s={xField:dre,yField:hre,seriesField:pre,edge:{style:i,shape:"arc"},tooltip:a};return YJ({chart:o,options:s}),r}function Lut(r){var t=r.chart,e=r.options,n=e.animation;return typeof n=="boolean"?t.animate(n):t.animate(!0),G(jet(t),function(i){i.animate(n)}),r}function Fut(r){return xr(yn,Aut,Dut,Mut,kut,Iut,Put,Out,Rut,Kn,xf,Lut)(r)}(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="chord",e}return t.getDefaultOptions=function(){return Tut},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Fut},t})(Ar);var Nut={field:"value",as:["x","y","r"],sort:function(r,t){return t.value-r.value}};function But(r,t){t=$t({},Nut,t);var e=t.as;if(!qe(e)||e.length!==3)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var n;try{n=UR(t)}catch(u){console.warn(u)}var i=function(u){return Pte().size(t.size).padding(t.padding)(hg(u).sum(function(c){return c[n]}).sort(t.sort))},a=i(r),o=e[0],s=e[1],l=e[2];return a.each(function(u){u[o]=u.x,u[s]=u.y,u[l]=u.r}),VR(a)}function gre(r){var t=r.data,e=r.hierarchyConfig,n=r.rawFields,i=n===void 0?[]:n,a=r.enableDrillDown,o=But(t,A(A({},e),{field:"value",as:["x","y","r"]})),s=[];return o.forEach(function(l){for(var u,c=l.data.name,f=A({},l);f.depth>1;)c=((u=f.parent.data)===null||u===void 0?void 0:u.name)+" / "+c,f=f.parent;if(a&&l.depth>2)return null;var d=Ze({},l.data,A(A(A({},Pn(l.data,i)),{path:c}),l));d.ext=e,d[wb]={hierarchyConfig:e,rawFields:i,enableDrillDown:a},s.push(d)}),s}function mre(r,t,e){var n=lR([r,t]),i=n[0],a=n[1],o=n[2],s=n[3],l=e.width,u=e.height,c=l-(s+a),f=u-(i+o),d=Math.min(c,f),h=(c-d)/2,v=(f-d)/2,p=i+v,g=a+h,m=o+v,y=s+h,b=[p,g,m,y],x=d<0?0:d;return{finalPadding:b,finalSize:x}}var $ut=["x","y","r","name","value","path","depth"],zut={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}};function Gut(r){var t=r.chart,e=Math.min(t.viewBBox.width,t.viewBBox.height);return Ze({options:{size:function(n){var i=n.r;return i*e}}},r)}function Uut(r){var t=r.options,e=r.chart,n=e.viewBBox,i=t.padding,a=t.appendPadding,o=t.drilldown,s=a;if(o==null?void 0:o.enabled){var l=u2(e.appendPadding,ne(o,["breadCrumb","position"]));s=lR([l,a])}var u=mre(i,s,n).finalPadding;return e.padding=u,e.appendPadding=0,r}function Vut(r){var t=r.chart,e=r.options,n=t.padding,i=t.appendPadding,a=e.color,o=e.colorField,s=e.pointStyle,l=e.hierarchyConfig,u=e.sizeField,c=e.rawFields,f=c===void 0?[]:c,d=e.drilldown,h=gre({data:e.data,hierarchyConfig:l,enableDrillDown:d==null?void 0:d.enabled,rawFields:f});t.data(h);var v=t.viewBBox,p=mre(n,i,v).finalSize,g=function(m){var y=m.r;return y*p};return u&&(g=function(m){return m[u]*p}),ps(Ze({},r,{options:{xField:"x",yField:"y",seriesField:o,sizeField:u,rawFields:$n($ut,f),point:{color:a,style:s,shape:"circle",size:g}}})),r}function Hut(r){return xr(Ai({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(r)}function Wut(r){var t=r.chart,e=r.options,n=e.tooltip;if(n===!1)t.tooltip(!1);else{var i=n;ne(n,"fields")||(i=Ze({},{customItems:function(a){return a.map(function(o){var s=ne(t.getOptions(),"scales"),l=ne(s,["name","formatter"],function(c){return c}),u=ne(s,["value","formatter"],function(c){return c});return A(A({},o),{name:l(o.data.name),value:u(o.data.value)})})}},i)),t.tooltip(i)}return r}function jut(r){var t=r.chart;return t.axis(!1),r}function Yut(r){var t=r.drilldown,e=r.interactions,n=e===void 0?[]:e;return(t==null?void 0:t.enabled)?Ze({},r,{interactions:$n(n,[{type:"drill-down",cfg:{drillDownConfig:t,transformData:gre,enableDrillDown:!0}}])}):r}function Xut(r){var t=r.chart,e=r.options;return Kn({chart:t,options:Yut(e)}),r}function qut(r){return xr(vs("pointStyle"),Gut,Uut,yn,Hut,Vut,jut,lb,Wut,Xut,Dn,Mi())(r)}(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="circle-packing",e}return t.getDefaultOptions=function(){return zut},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return qut},t.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},t})(Ar);(function(r){Te(t,r);function t(e,n,i,a){var o=r.call(this,e,Ze({},a,n))||this;return o.type="g2-plot",o.defaultOptions=a,o.adaptor=i,o}return t.prototype.getDefaultOptions=function(){return this.defaultOptions},t.prototype.getSchemaAdaptor=function(){return this.adaptor},t})(Ar);var Kut={line:KJ,pie:lee,column:x2,bar:nee,area:QJ,gauge:Qte,"tiny-line":Mee,"tiny-column":kee,"tiny-area":Aee,"ring-progress":Nee,progress:Lee,scatter:bee,histogram:Dee,funnel:cte},Zut={line:Att,pie:drt,column:Ztt,bar:Jtt,area:Rtt,gauge:llt,"tiny-line":rit,"tiny-column":oit,"tiny-area":lit,"ring-progress":wit,progress:yit,scatter:Tnt,histogram:pit,funnel:Sot},Qut={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function yre(r,t,e){var n=Zut[r];if(!n){console.error("could not find "+r+" plot");return}var i=Kut[r];i({chart:t,options:Ze({},n.getDefaultOptions(),ne(Qut,r,{}),e)})}function Jut(r){var t=r.chart,e=r.options,n=e.views,i=e.legend;return G(n,function(a){var o=a.region,s=a.data,l=a.meta,u=a.axes,c=a.coordinate,f=a.interactions,d=a.annotations,h=a.tooltip,v=a.geometries,p=t.createView({region:o});p.data(s);var g={};u&&G(u,function(m,y){g[y]=Pn(m,Xo)}),g=Ze({},l,g),p.scale(g),u?G(u,function(m,y){p.axis(y,m)}):p.axis(!1),p.coordinate(c),G(v,function(m){var y=qo({chart:p,options:m}).ext,b=m.adjust;b&&y.geometry.adjust(b)}),G(f,function(m){m.enable===!1?p.removeInteraction(m.type):p.interaction(m.type,m.cfg)}),G(d,function(m){p.annotation()[m.type](A({},m))}),typeof a.animation=="boolean"?p.animate(!1):(p.animate(!0),G(p.geometries,function(m){m.animate(a.animation)})),h&&(p.interaction("tooltip"),p.tooltip(h))}),i?G(i,function(a,o){t.legend(o,a)}):t.legend(!1),t.tooltip(e.tooltip),r}function ect(r){var t=r.chart,e=r.options,n=e.plots;return G(n,function(i){var a=i.type,o=i.region,s=i.options,l=s===void 0?{}:s,u=l.tooltip,c=t.createView(A({region:o},Pn(l,HJ)));u&&c.interaction("tooltip"),yre(a,c,l)}),r}function tct(r){return xr(Dn,Jut,ect,Kn,Dn,yn,Ta)(r)}function rct(r,t){var e=r.getModel(),n=e.data,i;return qe(n)?i=n[0][t]:i=n[t],i}function nct(r){var t=s2(r);G(t,function(e){e.hasState("active")&&e.setState("active",!1),e.hasState("selected")&&e.setState("selected",!1),e.hasState("inactive")&&e.setState("inactive",!1)})}var ict=function(r){Te(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getAssociationItems=function(e,n){var i,a=this.context.event,o=n||{},s=o.linkField,l=o.dim,u=[];if((i=a.data)===null||i===void 0?void 0:i.data){var c=a.data.data;G(e,function(f){var d,h,v=s;if(l==="x"?v=f.getXScale().field:l==="y"?v=(d=f.getYScales().find(function(g){return g.field===v}))===null||d===void 0?void 0:d.field:v||(v=(h=f.getGroupScales()[0])===null||h===void 0?void 0:h.field),!!v){var p=Gn(s2(f),function(g){var m=!1,y=!1,b=qe(c)?ne(c[0],v):ne(c,v);return rct(g,v)===b?m=!0:y=!0,{element:g,view:f,active:m,inactive:y}});u.push.apply(u,p)}})}return u},t.prototype.showTooltip=function(e){var n=RJ(this.context.view),i=this.getAssociationItems(n,e);G(i,function(a){if(a.active){var o=a.element.shape.getCanvasBBox();a.view.showTooltip({x:o.minX+o.width/2,y:o.minY+o.height/2})}})},t.prototype.hideTooltip=function(){var e=RJ(this.context.view);G(e,function(n){n.hideTooltip()})},t.prototype.active=function(e){var n=sb(this.context.view),i=this.getAssociationItems(n,e);G(i,function(a){var o=a.active,s=a.element;o&&s.setState("active",!0)})},t.prototype.selected=function(e){var n=sb(this.context.view),i=this.getAssociationItems(n,e);G(i,function(a){var o=a.active,s=a.element;o&&s.setState("selected",!0)})},t.prototype.highlight=function(e){var n=sb(this.context.view),i=this.getAssociationItems(n,e);G(i,function(a){var o=a.inactive,s=a.element;o&&s.setState("inactive",!0)})},t.prototype.reset=function(){var e=sb(this.context.view);G(e,function(n){nct(n)})},t}(ui);gr("association",ict);kr("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});kr("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});kr("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});kr("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});var act=function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="mix",e}return t.prototype.getSchemaAdaptor=function(){return tct},t}(Ar);function oct(r,t){var e=t.data,n=t.coordinate,i=t.interactions,a=t.annotations,o=t.animation,s=t.tooltip,l=t.axes,u=t.meta,c=t.geometries;e&&r.data(e);var f={};l&&G(l,function(d,h){f[h]=Pn(d,Xo)}),f=Ze({},u,f),r.scale(f),n&&r.coordinate(n),l===!1?r.axis(!1):G(l,function(d,h){r.axis(h,d)}),G(c,function(d){var h=qo({chart:r,options:d}).ext,v=d.adjust;v&&h.geometry.adjust(v)}),G(i,function(d){d.enable===!1?r.removeInteraction(d.type):r.interaction(d.type,d.cfg)}),G(a,function(d){r.annotation()[d.type](A({},d))}),typeof o=="boolean"?r.animate(!1):(r.animate(!0),G(r.geometries,function(d){d.animate(o)})),s?(r.interaction("tooltip"),r.tooltip(s)):s===!1&&r.removeInteraction("tooltip")}function sct(r){var t=r.chart,e=r.options,n=e.type,i=e.data,a=e.fields,o=e.eachView,s=Ux(e,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return t.data(i),t.facet(n,A(A({},s),{fields:a,eachView:function(l,u){var c=o(l,u);if(c.geometries)oct(l,c);else{var f=c,d=f.options;d.tooltip&&l.interaction("tooltip"),yre(f.type,l,d)}}})),r}function lct(r){var t=r.chart,e=r.options,n=e.axes,i=e.meta,a=e.tooltip,o=e.coordinate,s=e.theme,l=e.legend,u=e.interactions,c=e.annotations,f={};return n&&G(n,function(d,h){f[h]=Pn(d,Xo)}),f=Ze({},i,f),t.scale(f),t.coordinate(o),n?G(n,function(d,h){t.axis(h,d)}):t.axis(!1),a?(t.interaction("tooltip"),t.tooltip(a)):a===!1&&t.removeInteraction("tooltip"),t.legend(l),s&&t.theme(s),G(u,function(d){d.enable===!1?t.removeInteraction(d.type):t.interaction(d.type,d.cfg)}),G(c,function(d){t.annotation()[d.type](A({},d))}),r}function uct(r){return xr(yn,sct,lct)(r)}var cct={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}};(function(r){Te(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="area",e}return t.getDefaultOptions=function(){return cct},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return uct},t})(Ar);var gg;(function(r){r.DEV="DEV",r.BETA="BETA",r.STABLE="STABLE"})(gg||(gg={}));function fct(r,t){console.warn(r===gg.DEV?"Plot '"+t+"' is in DEV stage, just give us issues.":r===gg.BETA?"Plot '"+t+"' is in BETA stage, DO NOT use it in production env.":r===gg.STABLE?"Plot '"+t+`' is in STABLE stage, import it by "import { `+t+` } from '@antv/g2plot'".`:"invalid Stage type.")}(function(){function r(){}return Object.defineProperty(r,"MultiView",{get:function(){return fct(gg.STABLE,"MultiView"),act},enumerable:!1,configurable:!0}),r})();GJ("en-US",att);GJ("zh-CN",ott);var bre=function(t,e){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return t.apply(e,i)}},Rh=Object.prototype.toString;function aO(r){return Rh.call(r)==="[object Array]"}function oO(r){return typeof r=="undefined"}function dct(r){return r!==null&&!oO(r)&&r.constructor!==null&&!oO(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function hct(r){return Rh.call(r)==="[object ArrayBuffer]"}function vct(r){return typeof FormData!="undefined"&&r instanceof FormData}function pct(r){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(r):t=r&&r.buffer&&r.buffer instanceof ArrayBuffer,t}function gct(r){return typeof r=="string"}function mct(r){return typeof r=="number"}function xre(r){return r!==null&&typeof r=="object"}function G2(r){if(Rh.call(r)!=="[object Object]")return!1;var t=Object.getPrototypeOf(r);return t===null||t===Object.prototype}function yct(r){return Rh.call(r)==="[object Date]"}function bct(r){return Rh.call(r)==="[object File]"}function xct(r){return Rh.call(r)==="[object Blob]"}function wre(r){return Rh.call(r)==="[object Function]"}function wct(r){return xre(r)&&wre(r.pipe)}function Sct(r){return typeof URLSearchParams!="undefined"&&r instanceof URLSearchParams}function Cct(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Ect(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function sO(r,t){if(!(r===null||typeof r=="undefined"))if(typeof r!="object"&&(r=[r]),aO(r))for(var e=0,n=r.length;e<n;e++)t.call(null,r[e],e,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.call(null,r[i],i,r)}function lO(){var r={};function t(i,a){G2(r[a])&&G2(i)?r[a]=lO(r[a],i):G2(i)?r[a]=lO({},i):aO(i)?r[a]=i.slice():r[a]=i}for(var e=0,n=arguments.length;e<n;e++)sO(arguments[e],t);return r}function _ct(r,t,e){return sO(t,function(i,a){e&&typeof i=="function"?r[a]=bre(i,e):r[a]=i}),r}function Tct(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}var yr={isArray:aO,isArrayBuffer:hct,isBuffer:dct,isFormData:vct,isArrayBufferView:pct,isString:gct,isNumber:mct,isObject:xre,isPlainObject:G2,isUndefined:oO,isDate:yct,isFile:bct,isBlob:xct,isFunction:wre,isStream:wct,isURLSearchParams:Sct,isStandardBrowserEnv:Ect,forEach:sO,merge:lO,extend:_ct,trim:Cct,stripBOM:Tct};function Sre(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Cre=function(t,e,n){if(!e)return t;var i;if(n)i=n(e);else if(yr.isURLSearchParams(e))i=e.toString();else{var a=[];yr.forEach(e,function(l,u){l===null||typeof l=="undefined"||(yr.isArray(l)?u=u+"[]":l=[l],yr.forEach(l,function(f){yr.isDate(f)?f=f.toISOString():yr.isObject(f)&&(f=JSON.stringify(f)),a.push(Sre(u)+"="+Sre(f))}))}),i=a.join("&")}if(i){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t};function U2(){this.handlers=[]}U2.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};U2.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};U2.prototype.forEach=function(t){yr.forEach(this.handlers,function(n){n!==null&&t(n)})};var Ere=U2,_re=function(t,e){yr.forEach(t,function(i,a){a!==e&&a.toUpperCase()===e.toUpperCase()&&(t[e]=i,delete t[a])})},Tre=function(t,e,n,i,a){return t.config=e,n&&(t.code=n),t.request=i,t.response=a,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},V2=function(t,e,n,i,a){var o=new Error(t);return Tre(o,e,n,i,a)},Act=function(t,e,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(V2("Request failed with status code "+n.status,n.config,null,n.request,n))},Mct=yr.isStandardBrowserEnv()?function(){return{write:function(e,n,i,a,o,s){var l=[];l.push(e+"="+encodeURIComponent(n)),yr.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),yr.isString(a)&&l.push("path="+a),yr.isString(o)&&l.push("domain="+o),s===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){var n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),kct=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)},Ict=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t},Pct=function(t,e){return t&&!kct(e)?Ict(t,e):e},Dct=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Rct=function(t){var e={},n,i,a;return t&&yr.forEach(t.split(`
`),function(s){if(a=s.indexOf(":"),n=yr.trim(s.substr(0,a)).toLowerCase(),i=yr.trim(s.substr(a+1)),n){if(e[n]&&Dct.indexOf(n)>=0)return;n==="set-cookie"?e[n]=(e[n]?e[n]:[]).concat([i]):e[n]=e[n]?e[n]+", "+i:i}}),e},Oct=yr.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a"),n;function i(a){var o=a;return t&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=i(window.location.href),function(o){var s=yr.isString(o)?i(o):o;return s.protocol===n.protocol&&s.host===n.host}}():function(){return function(){return!0}}();function uO(r){this.message=r}uO.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};uO.prototype.__CANCEL__=!0;var H2=uO,W2=Bct,Are=function(t){return new Promise(function(n,i){var a=t.data,o=t.headers,s=t.responseType,l;function u(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}yr.isFormData(a)&&delete o["Content-Type"];var c=new XMLHttpRequest;if(t.auth){var f=t.auth.username||"",d=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.Authorization="Basic "+btoa(f+":"+d)}var h=Pct(t.baseURL,t.url);c.open(t.method.toUpperCase(),Cre(h,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function v(){if(!!c){var g="getAllResponseHeaders"in c?Rct(c.getAllResponseHeaders()):null,m=!s||s==="text"||s==="json"?c.responseText:c.response,y={data:m,status:c.status,statusText:c.statusText,headers:g,config:t,request:c};Act(function(x){n(x),u()},function(x){i(x),u()},y),c=null}}if("onloadend"in c?c.onloadend=v:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(v)},c.onabort=function(){!c||(i(V2("Request aborted",t,"ECONNABORTED",c)),c=null)},c.onerror=function(){i(V2("Network Error",t,null,c)),c=null},c.ontimeout=function(){var m=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",y=t.transitional||W2.transitional;t.timeoutErrorMessage&&(m=t.timeoutErrorMessage),i(V2(m,t,y.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",c)),c=null},yr.isStandardBrowserEnv()){var p=(t.withCredentials||Oct(h))&&t.xsrfCookieName?Mct.read(t.xsrfCookieName):void 0;p&&(o[t.xsrfHeaderName]=p)}"setRequestHeader"in c&&yr.forEach(o,function(m,y){typeof a=="undefined"&&y.toLowerCase()==="content-type"?delete o[y]:c.setRequestHeader(y,m)}),yr.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),s&&s!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(l=function(g){!c||(i(!g||g&&g.type?new H2("canceled"):g),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l))),a||(a=null),c.send(a)})},Lct={"Content-Type":"application/x-www-form-urlencoded"};function Mre(r,t){!yr.isUndefined(r)&&yr.isUndefined(r["Content-Type"])&&(r["Content-Type"]=t)}function Fct(){var r;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(r=Are),r}function Nct(r,t,e){if(yr.isString(r))try{return(t||JSON.parse)(r),yr.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(r)}var j2={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Fct(),transformRequest:[function(t,e){return _re(e,"Accept"),_re(e,"Content-Type"),yr.isFormData(t)||yr.isArrayBuffer(t)||yr.isBuffer(t)||yr.isStream(t)||yr.isFile(t)||yr.isBlob(t)?t:yr.isArrayBufferView(t)?t.buffer:yr.isURLSearchParams(t)?(Mre(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):yr.isObject(t)||e&&e["Content-Type"]==="application/json"?(Mre(e,"application/json"),Nct(t)):t}],transformResponse:[function(t){var e=this.transitional||j2.transitional,n=e&&e.silentJSONParsing,i=e&&e.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&yr.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(a)throw o.name==="SyntaxError"?Tre(o,this,"E_JSON_PARSE"):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};yr.forEach(["delete","get","head"],function(t){j2.headers[t]={}});yr.forEach(["post","put","patch"],function(t){j2.headers[t]=yr.merge(Lct)});var Bct=j2,cO=function(t,e,n){var i=this||W2;return yr.forEach(n,function(o){t=o.call(i,t,e)}),t},kre=function(t){return!!(t&&t.__CANCEL__)};function fO(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new H2("canceled")}var Ire=function(t){fO(t),t.headers=t.headers||{},t.data=cO.call(t,t.data,t.headers,t.transformRequest),t.headers=yr.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),yr.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var e=t.adapter||W2.adapter;return e(t).then(function(i){return fO(t),i.data=cO.call(t,i.data,i.headers,t.transformResponse),i},function(i){return kre(i)||(fO(t),i&&i.response&&(i.response.data=cO.call(t,i.response.data,i.response.headers,t.transformResponse))),Promise.reject(i)})},Eb=function(t,e){e=e||{};var n={};function i(c,f){return yr.isPlainObject(c)&&yr.isPlainObject(f)?yr.merge(c,f):yr.isPlainObject(f)?yr.merge({},f):yr.isArray(f)?f.slice():f}function a(c){if(yr.isUndefined(e[c])){if(!yr.isUndefined(t[c]))return i(void 0,t[c])}else return i(t[c],e[c])}function o(c){if(!yr.isUndefined(e[c]))return i(void 0,e[c])}function s(c){if(yr.isUndefined(e[c])){if(!yr.isUndefined(t[c]))return i(void 0,t[c])}else return i(void 0,e[c])}function l(c){if(c in e)return i(t[c],e[c]);if(c in t)return i(void 0,t[c])}var u={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l};return yr.forEach(Object.keys(t).concat(Object.keys(e)),function(f){var d=u[f]||a,h=d(f);yr.isUndefined(h)&&d!==l||(n[f]=h)}),n},Pre={version:"0.24.0"},$ct=Pre.version,dO={};["object","boolean","number","function","string","symbol"].forEach(function(r,t){dO[r]=function(n){return typeof n===r||"a"+(t<1?"n ":" ")+r}});var Dre={};dO.transitional=function(t,e,n){function i(a,o){return"[Axios v"+$ct+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,s){if(t===!1)throw new Error(i(o," has been removed"+(e?" in "+e:"")));return e&&!Dre[o]&&(Dre[o]=!0,console.warn(i(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(a,o,s):!0}};function zct(r,t,e){if(typeof r!="object")throw new TypeError("options must be an object");for(var n=Object.keys(r),i=n.length;i-- >0;){var a=n[i],o=t[a];if(o){var s=r[a],l=s===void 0||o(s,a,r);if(l!==!0)throw new TypeError("option "+a+" must be "+l);continue}if(e!==!0)throw Error("Unknown option "+a)}}var Rre={assertOptions:zct,validators:dO},mg=Rre.validators;function _b(r){this.defaults=r,this.interceptors={request:new Ere,response:new Ere}}_b.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=Eb(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;e!==void 0&&Rre.assertOptions(e,{silentJSONParsing:mg.transitional(mg.boolean),forcedJSONParsing:mg.transitional(mg.boolean),clarifyTimeoutError:mg.transitional(mg.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(t)===!1||(i=i&&d.synchronous,n.unshift(d.fulfilled,d.rejected))});var a=[];this.interceptors.response.forEach(function(d){a.push(d.fulfilled,d.rejected)});var o;if(!i){var s=[Ire,void 0];for(Array.prototype.unshift.apply(s,n),s=s.concat(a),o=Promise.resolve(t);s.length;)o=o.then(s.shift(),s.shift());return o}for(var l=t;n.length;){var u=n.shift(),c=n.shift();try{l=u(l)}catch(f){c(f);break}}try{o=Ire(l)}catch(f){return Promise.reject(f)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};_b.prototype.getUri=function(t){return t=Eb(this.defaults,t),Cre(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};yr.forEach(["delete","get","head","options"],function(t){_b.prototype[t]=function(e,n){return this.request(Eb(n||{},{method:t,url:e,data:(n||{}).data}))}});yr.forEach(["post","put","patch"],function(t){_b.prototype[t]=function(e,n,i){return this.request(Eb(i||{},{method:t,url:e,data:n}))}});var Y2=_b;function yg(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(i){t=i});var e=this;this.promise.then(function(n){if(!!e._listeners){var i,a=e._listeners.length;for(i=0;i<a;i++)e._listeners[i](n);e._listeners=null}}),this.promise.then=function(n){var i,a=new Promise(function(o){e.subscribe(o),i=o}).then(n);return a.cancel=function(){e.unsubscribe(i)},a},r(function(i){e.reason||(e.reason=new H2(i),t(e.reason))})}yg.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};yg.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};yg.prototype.unsubscribe=function(t){if(!!this._listeners){var e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}};yg.source=function(){var t,e=new yg(function(i){t=i});return{token:e,cancel:t}};var Gct=yg,Uct=function(t){return function(n){return t.apply(null,n)}},Vct=function(t){return typeof t=="object"&&t.isAxiosError===!0};function Ore(r){var t=new Y2(r),e=bre(Y2.prototype.request,t);return yr.extend(e,Y2.prototype,t),yr.extend(e,t),e.create=function(i){return Ore(Eb(r,i))},e}var cu=Ore(W2);cu.Axios=Y2;cu.Cancel=H2;cu.CancelToken=Gct;cu.isCancel=kre;cu.VERSION=Pre.version;cu.all=function(t){return Promise.all(t)};cu.spread=Uct;cu.isAxiosError=Vct;var Lre=cu,Hct=cu;Lre.default=Hct;var Wft=Lre;const Wct={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},jct=Ln("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M344 280l88-88"},null,-1),Yct=Ln("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M232 216l64 64"},null,-1),Xct=Ln("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M80 320l104-104"},null,-1),qct=Ln("circle",{cx:"456",cy:"168",r:"24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Kct=Ln("circle",{cx:"320",cy:"304",r:"24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Zct=Ln("circle",{cx:"208",cy:"192",r:"24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Qct=Ln("circle",{cx:"56",cy:"344",r:"24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1);var jft=xt({name:"AnalyticsOutline",render:function(t,e){return Yg(),Xg("svg",Wct,[jct,Yct,Xct,qct,Kct,Zct,Qct])}});const Jct={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},eft=Ln("path",{d:"M480 496H48a32 32 0 0 1-32-32V32a16 16 0 0 1 32 0v432h432a16 16 0 0 1 0 32z",fill:"currentColor"},null,-1),tft=Ln("path",{d:"M156 432h-40a36 36 0 0 1-36-36V244a36 36 0 0 1 36-36h40a36 36 0 0 1 36 36v152a36 36 0 0 1-36 36z",fill:"currentColor"},null,-1),rft=Ln("path",{d:"M300 432h-40a36 36 0 0 1-36-36V196a36 36 0 0 1 36-36h40a36 36 0 0 1 36 36v200a36 36 0 0 1-36 36z",fill:"currentColor"},null,-1),nft=Ln("path",{d:"M443.64 432h-40a36 36 0 0 1-36-36V132a36 36 0 0 1 36-36h40a36 36 0 0 1 36 36v264a36 36 0 0 1-36 36z",fill:"currentColor"},null,-1);var Yft=xt({name:"BarChart",render:function(t,e){return Yg(),Xg("svg",Jct,[eft,tft,rft,nft])}});const ift={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},aft=Ln("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M160 144h288"},null,-1),oft=Ln("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M160 256h288"},null,-1),sft=Ln("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M160 368h288"},null,-1),lft=Ln("circle",{cx:"80",cy:"144",r:"16",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),uft=Ln("circle",{cx:"80",cy:"256",r:"16",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),cft=Ln("circle",{cx:"80",cy:"368",r:"16",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1);var Xft=xt({name:"List",render:function(t,e){return Yg(),Xg("svg",ift,[aft,oft,sft,lft,uft,cft])}});export{cc as $,hft as A,I as B,Ztt as C,$a as D,Z7e as E,Wi as F,W5e as G,Nft as H,Bft as I,Gft as J,zft as K,Mft as L,Sft as M,Uft as N,Oft as O,drt as P,sh as Q,Rft as R,kft as S,Cft as T,qWe as U,Pft as V,Gf as W,Wft as X,gft as Y,$ft as Z,wft as _,xt as a,jft as a0,N9e as a1,Yft as a2,Xft as a3,Lft as a4,Fft as a5,xft as a6,bft as a7,Ift as a8,yft as a9,p9e as b,b9e as c,Hft as d,Vft as e,_ft as f,re as g,vft as h,pft as i,Ln as j,Zae as k,Yg as l,sN as m,Ha as n,Ss as o,mft as p,Eft as q,Oe as r,qg as s,Xg as t,Tft as u,fft as v,fn as w,Dft as x,zWe as y,dft as z};
