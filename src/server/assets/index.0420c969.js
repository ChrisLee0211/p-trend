var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,r=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&o(e,a,t[a]);if(l)for(var a of l(t))i.call(t,a)&&o(e,a,t[a]);return e},s=(e,l)=>t(e,a(l));import{r as u,o as c,M as d,T as p,d as v,a as h,N as m,b as f,c as g,e as b,u as y,w,f as S,g as N,n as k,G as _,h as D,i as F,j as P,k as z,l as $,m as x,p as C,F as R,q as O,s as T,t as M,v as j,x as I,y as L,C as V,z as U,A,P as B,B as G,D as Y,E,H,I as W,J,K,L as q,O as X,Q,R as Z,S as ee,U as te,V as ae,W as le,X as ne,Y as ie,Z as oe,_ as re,$ as se,a0 as ue,a1 as ce,a2 as de,a3 as pe,a4 as ve,a5 as he,a6 as me,a7 as fe,a8 as ge,a9 as be}from"./vendor.e66d1d89.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var ye=h({name:"Graph",components:{NSpin:m,NRadio:f,NRadioGroup:g,NSwitch:b},setup(){const e=u(!0),t=u(!0),a=u(null),l=u(null),[n]=((e,t)=>{const a=u();return c((()=>{a.value=new d({container:document.getElementById(t),className:e,type:"delegate",size:[150,150]})})),[a]})("miniMap","miniMap"),[i]=(e=>{const t=u();return c((()=>{t.value=new p({container:document.getElementById(e),offsetX:10,offsetY:10,getContent(e){var t,a;const l=null==(a=null==(t=null==e?void 0:e.item)?void 0:t._cfg)?void 0:a.model;if(l){const e=l.path||"none",t='<div style="max-width:200px;word-break: break-all;">',a="</div>",n=`\n                    <p>模块名称:  ${l.name}</p>\n                    <p>路径:  ${e}</p> \n                    `;let i="";const o=["mtime","ctime","fileSize","importTimes"],r={mtime:{label:"最近修改时间",getValue:e=>v(e).format("YYYY-MM-DD")},ctime:{label:"创建时间",getValue:e=>v(e).format("YYYY-MM-DD")},fileSize:{label:"文件大小",getValue:e=>`${(Number(e)/1024).toFixed(2)}kb`},importTimes:{label:"被引用次数",getValue:e=>`${e}`}};for(const s in l)o.includes(s)&&l[s]&&(i+=`<p>${r[s].label}: ${r[s].getValue(l[s])}</p>`);return t+n+i+a}return"<h1></h1>"},itemTypes:["node"]})})),[t]})("tooltip"),o=u(null),{onFetchResponse:h,data:m}=y(`http://localhost:${window.preloadState.port}/graph`,{method:"GET"}).json(),f=(e,t)=>{var a;let l=r({},e);try{l=JSON.parse(JSON.stringify(e))}catch(u){console.error(u)}let n={id:t,name:l.name,path:l.path,isFolder:l.isFolder,children:l.children};const i=[];let o=0;for(i.push(n);i.length;){o+=1;const e=i.pop();if(null==(a=null==e?void 0:e.children)?void 0:a.length){const t=e.children.map((e=>s(r({},e),{id:`${e.path}-${o}`})));i.push(...t)}else e.id=`${e.path}-${o}`}return n};h((t=>{200===t.status&&(e.value=!1,o.value=f(m.value.tree,m.value.entry))})),w(o,(e=>{null!==e&&t.value&&k((()=>{l.value=new _.TreeGraph({container:a.value,modes:{default:[{type:"collapse-expand",onChange:function(e,t){return e.getModel().collapsed=t,!0}},"drag-canvas","zoom-canvas"]},defaultNode:{size:26,anchorPoints:[[0,.5],[1,.5]]},defaultEdge:{type:"cubic-horizontal"},plugins:[n.value,i.value],layout:{type:"compactBox",direction:"LR",getId:function(e){return e.id},getHeight:function(){return 20},getWidth:function(){return 20},getVGap:function(){return 10},getHGap:function(){return 100}}}),l.value.node((e=>{let t={label:e.name,labelCfg:{offset:10,position:e.children&&e.children.length>0?"left":"right"}};return(null==e?void 0:e.isDep)&&(t=s(r({},t),{style:{shadowBlur:10,fill:"#1a414e",stroke:"black"}})),t})),l.value.data(o.value),l.value.render(),l.value.fitView(),t.value=!1}))}));const g=D(((e,t)=>{l.value&&(l.value.changeSize(e,t),l.value.fitView(20))}),100);S(a,(e=>{const t=e[0],{width:a,height:l}=t.contentRect;g(a,l)}));const b=u("project");w(b,((e,t)=>{var a,n,i;"project"===e&&(null==(a=l.value)||a.changeData(f(m.value.tree,m.value.entry))),"module"===e&&(null==(n=l.value)||n.changeData(((e,t)=>{var a;const l=[],n={id:t,children:[],name:t},i=e.map(((e,t)=>{let a={id:e.path,children:[],name:e.name};return l.includes(e.path)?a.id=e.path+`${t}`:l.push(e.path),a=r(r({},a),e),e.deps.length&&(a.children=e.deps.map(((e,t)=>{let a={id:e.path,childen:[],name:e.name};return l.includes(e.path)?a.id=""+10*Math.random()+e.path:l.push(e.path),a=r(r({},a),e),a}))),a}));return i.length&&(null==(a=null==n?void 0:n.children)||a.push(...i)),n})(m.value.nodes,m.value.entry)),F.value=!1),null==(i=l.value)||i.fitView()}));const F=u(!1),P=N((()=>"project"!==b.value));return w(F,(e=>{var t,a;let n=o.value;n=!0===e?((e,t,a)=>{var l,n;let i=r({},e);try{i=JSON.parse(JSON.stringify(e))}catch(p){console.error(p)}const o={};for(let r=0;r<t.length;r++)o[t[r].path]=r;const s=Object.keys(o);let u={id:a,name:i.name,path:i.path,isFolder:i.isFolder,children:i.children};const c=[];let d=0;for(c.push(u);c.length;){d+=1;let e=c.pop();if(s.includes(e.path)){const a=t[o[e.path]];e.fileSize=a.size||0,e.ctime=a.ctime,e.mtime=a.mtime,e.importTimes=null==(l=null==a?void 0:a.reference)?void 0:l.length,e.isDep=!0}if(null==(n=null==e?void 0:e.children)?void 0:n.length)for(let t=0;t<e.children.length;t++){const a=e.children[t];a.id=`${a.path}-${d}`,c.push(a)}else e.id=`${e.path}-${d}`}return u})(m.value.tree,m.value.deps,m.value.entry):f(m.value.tree,m.value.entry),console.log("targetTreeData ===>",n),null==(t=l.value)||t.changeData(n),null==(a=l.value)||a.fitView()})),{loading:e,graphRef:a,graphType:[{label:"项目结构",value:"project"},{label:"模块结构",value:"module"}],selectGraphType:b,showDeps:F,disableShowDeps:P}}});const we={class:"graph"},Se={class:"graph-main-wrapper"},Ne={class:"graph-tools"},ke={class:"graph-tools-panel"},_e={class:"graph-tools-panel-item"},De=T(" 图类型： "),Fe={class:"graph-tools-panel-item"},Pe=T(" 依赖标记： "),ze={id:"graph-root"},$e={class:"graph-container",ref:"graphRef"},xe=C("div",{id:"miniMap"},null,-1),Ce={id:"tooltip",class:"tooltip-wrap",ref:"tooltipRef"};ye.render=function(e,t,a,l,n,i){const o=F("n-radio"),r=F("n-space"),s=F("n-radio-group"),u=F("n-switch"),c=F("n-spin");return x(),P("div",we,[z(c,{size:"large",show:e.loading},{default:$((()=>[C("div",Se,[C("div",Ne,[C("div",ke,[C("div",_e,[De,z(s,{value:e.selectGraphType,"onUpdate:value":t[0]||(t[0]=t=>e.selectGraphType=t),name:"radiogroup"},{default:$((()=>[z(r,null,{default:$((()=>[(x(!0),P(R,null,O(e.graphType,(e=>(x(),M(o,{key:e.value,value:e.value},{default:$((()=>[T(j(e.label),1)])),_:2},1032,["value"])))),128))])),_:1})])),_:1},8,["value"])]),C("div",Fe,[Pe,z(u,{value:e.showDeps,"onUpdate:value":t[1]||(t[1]=t=>e.showDeps=t),disabled:e.disableShowDeps},null,8,["value","disabled"])])])]),C("div",ze,[C("div",$e,null,512),xe,C("div",Ce,null,512)])])])),_:1},8,["show"])])};const Re=()=>{const e=[{label:"前5",value:5},{label:"前10",value:10},{label:"前15",value:15}];return{value:u(e[0].value),limitOptions:e}},Oe=(e,t)=>{const a=D(((t,a)=>{e.value&&e.value.changeSize(t,a)}));S(t,(e=>{const t=e[0],{width:l,height:n}=t.contentRect;a(l,n)}))};var Te=h({name:"fileSizeChart",components:{NSpace:I,NRadio:f,NRadioGroup:g,NSelect:L},setup(){const e=u(),t=u(),a=u("folder"),l=u({}),n=e=>{if(Number(e)in l.value)return l.value[e];{const t=(e=>{if(!e)return"0b";let t=e+"b",a=[e],l=0,n=["B","KB","MB","GB","TB"];for(;a.length;){const e=a.pop(),i=Number(e)/1024;l+=1,t=i.toFixed(2)+n[l],i>1024&&a.push(i)}return t})(e);return l.value[e]=t,t}},i=e=>e.slice(0).sort(((e,t)=>t.fileSize-e.fileSize)),{value:o,limitOptions:r}=Re(),s=N((()=>`http://localhost:${window.preloadState.port}/chart/size?limit=${o.value}`)),{onFetchResponse:c,data:d,isFetching:p}=y(s,{refetch:!0}).json();c((()=>{var l,o,r,s;if(null===d.value)return;const u="folder"===a.value?d.value.tree:d.value.nodes;t.value?t.value.changeData(i(u)):(t.value=new V(e.value,{data:i(u),width:null!=(o=null==(l=e.value)?void 0:l.offsetWidth)?o:0,height:null!=(s=null==(r=e.value)?void 0:r.offsetHeight)?s:0,xField:"fileName",yField:"fileSize",padding:"auto",color:"#a3a3c2",appendPadding:10,tooltip:{formatter:e=>({name:"文件大小",value:`${n(e.fileSize)}`})}}),t.value.render())})),Oe(t,e);return w(a,(e=>{if(null===d.value)return;const a="folder"===e?d.value.tree:d.value.nodes;t.value&&t.value.changeData(i(a))})),{chartRef:e,chartTypes:[{value:"folder",label:"目录"},{value:"module",label:"模块"}],chartType:a,limitOptions:r,limit:o}}});U("data-v-1f4c7d86");const Me=C("div",{class:"chart-title"},"文件大小",-1),je={class:"chart-main",id:"size-chart",ref:"chartRef"},Ie={class:"chart-tool"};A(),Te.render=function(e,t,a,l,n,i){const o=F("n-radio"),r=F("n-space"),s=F("n-radio-group"),u=F("n-select");return x(),P(R,null,[Me,C("div",je,null,512),C("div",Ie,[z(r,null,{default:$((()=>[z(s,{value:e.chartType,"onUpdate:value":t[0]||(t[0]=t=>e.chartType=t),name:""},{default:$((()=>[z(r,null,{default:$((()=>[(x(!0),P(R,null,O(e.chartTypes,(e=>(x(),M(o,{key:e.value,value:e.value},{default:$((()=>[T(j(e.label),1)])),_:2},1032,["value"])))),128))])),_:1})])),_:1},8,["value"]),z(u,{size:"small",value:e.limit,"onUpdate:value":t[1]||(t[1]=t=>e.limit=t),options:e.limitOptions},null,8,["value","options"])])),_:1})])],64)},Te.__scopeId="data-v-1f4c7d86";var Le=h({name:"dependenceChart",components:{NSpace:I,NSelect:L},setup(){const e=u(),t=u(),{value:a,limitOptions:l}=Re(),n=N((()=>`http://localhost:${window.preloadState.port}/chart/deps?limit=${a.value}`)),{onFetchResponse:i,data:o,onFetchError:c}=y(n,{refetch:!0}).json(),d=N((()=>o.value&&o.value.nodes?o.value.nodes.map((e=>s(r({},e),{depCount:e.deps.length}))).sort(((e,t)=>t.depCount-e.depCount)):[]));return c((e=>{console.log(e)})),i((()=>{var a,l,n,i;t.value?t.value.changeData(d.value):(t.value=new V(e.value,{data:d.value,width:null!=(l=null==(a=e.value)?void 0:a.offsetWidth)?l:0,height:null!=(i=null==(n=e.value)?void 0:n.offsetHeight)?i:0,xField:"fileName",yField:"depCount",padding:"auto",color:"#ff4d4d",appendPadding:10,tooltip:{formatter:e=>({name:"依赖数量",value:`${e.depCount}`})}}),t.value.render())})),Oe(t,e),{chartRef:e,limitOptions:l,limit:a}}});U("data-v-e94e73cc");const Ve=C("div",{class:"chart-title"},"依赖数",-1),Ue={class:"chart-main",id:"deps-chart",ref:"chartRef"},Ae={class:"chart-tool"};A(),Le.render=function(e,t,a,l,n,i){const o=F("n-select"),r=F("n-space");return x(),P(R,null,[Ve,C("div",Ue,null,512),C("div",Ae,[z(r,null,{default:$((()=>[z(o,{size:"small",value:e.limit,"onUpdate:value":t[0]||(t[0]=t=>e.limit=t),options:e.limitOptions},null,8,["value","options"])])),_:1})])],64)},Le.__scopeId="data-v-e94e73cc";var Be=h({name:"referenceChart",components:{NSpace:I,NSelect:L},setup(){const e=u(),t=u(),{value:a,limitOptions:l}=Re(),n=N((()=>`http://localhost:${window.preloadState.port}/chart/reference?limit=${a.value}`)),{onFetchResponse:i,data:o,onFetchError:s}=y(n,{refetch:!0}).json(),c=N((()=>o.value&&o.value.nodes?o.value.nodes.map((e=>r({},e))).sort(((e,t)=>t.reference-e.reference)):[]));return s((e=>{console.log(e)})),i((()=>{var a,l,n,i;t.value?t.value.changeData(c.value):(t.value=new V(e.value,{data:c.value,width:null!=(l=null==(a=e.value)?void 0:a.offsetWidth)?l:0,height:null!=(i=null==(n=e.value)?void 0:n.offsetHeight)?i:0,xField:"fileName",yField:"reference",padding:"auto",appendPadding:10,color:"#40bf80",tooltip:{formatter:e=>({name:"被引用次数",value:`${e.reference}`})}}),t.value.render())})),Oe(t,e),{chartRef:e,limitOptions:l,limit:a}}});U("data-v-92452c5a");const Ge=C("div",{class:"chart-title"},"被引用次数",-1),Ye={class:"chart-main",id:"reference-chart",ref:"chartRef"},Ee={class:"chart-tool"};A(),Be.render=function(e,t,a,l,n,i){const o=F("n-select"),r=F("n-space");return x(),P(R,null,[Ge,C("div",Ye,null,512),C("div",Ee,[z(r,null,{default:$((()=>[z(o,{size:"small",value:e.limit,"onUpdate:value":t[0]||(t[0]=t=>e.limit=t),options:e.limitOptions},null,8,["value","options"])])),_:1})])],64)},Be.__scopeId="data-v-92452c5a";var He=h({name:"typesChart",components:{NSpace:I,NSelect:L},setup(){const e=u(),t=u(),a=N((()=>`http://localhost:${window.preloadState.port}/chart/types`)),{onFetchResponse:l,data:n,onFetchError:i}=y(a.value,{refetch:!0}).json(),o=N((()=>{var e,t;return null!=(t=null==(e=n.value)?void 0:e.types)?t:[]}));return i((e=>{console.log(e)})),l((()=>{var a,l,n,i;t.value?t.value.changeData(o.value):(console.log("chartData",o.value),t.value=new B(e.value,{data:o.value,width:null!=(l=null==(a=e.value)?void 0:a.offsetWidth)?l:0,height:null!=(i=null==(n=e.value)?void 0:n.offsetHeight)?i:0,angleField:"num",colorField:"fileType",padding:16,label:{type:"inner",offset:"-30%",content:({percent:e})=>`${(100*e).toFixed(0)}%`,style:{fontSize:14,textAlign:"center"}},interactions:[{type:"element-active"}]}),t.value.render())})),Oe(t,e),{chartRef:e}}});U("data-v-25e7897e");const We=C("div",{class:"chart-title"},"类型比例",-1),Je={class:"chart-main",id:"types-chart",ref:"chartRef"};A(),He.render=function(e,t,a,l,n,i){return x(),P(R,null,[We,C("div",Je,null,512)],64)},He.__scopeId="data-v-25e7897e";var Ke=h({name:"Chart",components:{"size-chart":Te,"deps-chart":Le,"reference-chart":Be,"types-chart":He},setup(){}});const qe={class:"chart"},Xe=C("header",{class:"chart-header"},"Chart Analysis",-1),Qe={class:"chart-content"},Ze={class:"chart-content-item"},et={class:"chart-content-item"},tt={class:"chart-content-item"},at={class:"chart-content-item"};Ke.render=function(e,t,a,l,n,i){const o=F("size-chart"),r=F("deps-chart"),s=F("reference-chart"),u=F("types-chart");return x(),P("div",qe,[Xe,C("section",Qe,[C("div",Ze,[z(o)]),C("div",et,[z(r)]),C("div",tt,[z(s)]),C("div",at,[z(u)])])])};const lt=e=>v(e).format("YYYY-MM-DD"),nt=(e,t)=>[{type:"selection"},{title:"文件名",key:"name",align:"center"},{title:"创建时间",key:"ctime",align:"center",render(e){const t=null==e?void 0:e.ctime;return t?lt(t):"none"}},{title:"更新时间",key:"utime",align:"center",render(e){const t=null==e?void 0:e.utime;return t?lt(t):"none"}},{title:"文件大小",key:"fileSize",align:"center",render(e){const t=null==e?void 0:e.fileSize;return t?`${(Number(t)/1024).toFixed(2)}kb`:"none"}},{title:"依赖数",key:"deps",align:"center",render:e=>e.deps.length},{title:"操作",key:"action",align:"center",render:a=>G("div",{style:"width:100%;display:flex;justify-content:center"},[G(Y,{text:!0,style:"margin-right:10px",onClick:t=>{e(a)}},{default:()=>"详情"}),G(Y,{text:!0,textColor:"red",onClick:()=>{t(a)}},{default:()=>"删除"})])}];var it=h({name:"fileNodeDetail",props:{detail:{type:Object,default:()=>null},visible:{type:Boolean,default:!1},setDetailVisible:{type:Function,default:()=>{}}},components:{NModal:E,NList:H,NListItem:W,NSkeleton:J,NSpace:I},setup(){}});U("data-v-eb5c921a");const ot={key:1,class:"table-detail"},rt={class:"table-detail-path"},st={class:"table-detail-deps-list"},ut={class:"table-detail-deps-list-title"};A(),it.render=function(e,t,a,l,n,i){const o=F("n-skeleton"),r=F("n-list-item"),s=F("n-list"),u=F("n-space"),c=F("n-modal");return x(),M(c,{show:e.visible,"onUpdate:show":t[0]||(t[0]=t=>e.visible=t),preset:"card",size:"medium",style:{width:"60vw"},title:"详情信息",bordered:!1,"mask-closable":"",onUpdateShow:e.setDetailVisible},{default:$((()=>[e.detail?(x(),P("section",ot,[z(u,{vertical:!0},{default:$((()=>{var t,a;return[C("div",rt,"路径："+j(null!=(a=null==(t=e.detail)?void 0:t.path)?a:""),1),C("div",st,[C("div",ut,"内部依赖："+j(e.detail.deps.length)+" 个",1),z(s,{bordered:""},{default:$((()=>[(x(!0),P(R,null,O(e.detail.deps,(e=>(x(),M(r,{key:e.path},{default:$((()=>[T(j(e.path),1)])),_:2},1024)))),128))])),_:1})])]})),_:1})])):(x(),M(o,{key:0,text:"",repeat:5}))])),_:1},8,["show","onUpdateShow"])},it.__scopeId="data-v-eb5c921a";var ct=h({name:"LoadingModal",props:{visible:{type:Boolean,default:!1},limit:{type:Number,default:1},success:{type:Number,default:1},fail:{type:Number,default:0}},components:{NModal:E,NSpace:I,NProgress:K},setup:e=>({percent:N((()=>(100*(Number(e.success+e.fail)/Number(e.limit))).toFixed(0)))})});const dt=C("div",null,"正在删除啦，别急～～",-1),pt={style:{color:"lightblue"}},vt={style:{color:"red"}};ct.render=function(e,t,a,l,n,i){const o=F("n-progress"),r=F("n-space"),s=F("n-modal");return x(),M(s,{show:e.visible,"onUpdate:show":t[0]||(t[0]=t=>e.visible=t),preset:"card",size:"medium",style:{width:"40vw"},title:"任务进度",bordered:!1,"mask-closable":!1},{default:$((()=>[z(r,{vertical:!0},{default:$((()=>[dt,z(o,{type:"line",status:"success",height:24,percentage:Number(e.percent),"border-radius":"12px 12px 12px 12px"},{default:$((()=>[T(j(e.percent)+"% ",1)])),_:1},8,["percentage"]),C("div",pt,"已完成了"+j(e.success)+"个",1),C("div",vt,"有"+j(e.fail)+"个删除失败了！",1)])),_:1})])),_:1},8,["show"])};var ht=h({name:"Table",components:{NDataTable:q,NFormItem:X,NButton:Y,NInput:Q,NForm:Z,NDatePicker:ee,NPagination:te,NSpace:I,Detail:it,LoadingModal:ct},setup(){const e=ae(),t=u(!1),a=u(0),l=u(),n=u(!1),i=nt((e=>{n.value=!0,l.value=e}),(t=>{e.warning({title:"提示",content:"确定要删除指定的文件吗？",positiveText:"删除",negativeText:"不删",onPositiveClick:()=>new Promise(((e,a)=>{ne.post(`http://localhost:${window.preloadState.port}/table/delete`,{path:t.path}).then((t=>(t.data.result&&p(),e)))}))})})),o=N((()=>c.value?c.value.data:[])),r=le({page:1,pageSize:10,name:"",updatedAt:null,createdAt:null}),s=N((()=>{const e=new URL(`http://localhost:${window.preloadState.port}/table`),t=e.searchParams;r.createdAt&&(t.set("ctimeStart",String(r.createdAt[0])),t.set("ctimeEnd",String(r.createdAt[1]))),r.updatedAt&&(t.set("utimeStart",String(r.updatedAt[0])),t.set("utimeEnd",String(r.updatedAt[1]))),r.name&&""!==r.name&&t.set("name",r.name),t.set("page",String(r.page)),t.set("pageSize",String(r.pageSize));return e.toString()})),{data:c,onFetchFinally:d,execute:p}=y(s,{refetch:!0,beforeFetch(){t.value=!0}}).json();d((()=>{t.value=!1,a.value=c.value?c.value.total:0}));const v=u(!1),h=u([]),m=u(0),f=u(0);return{searchParams:r,loading:t,tableData:o,tableColumn:i,total:a,changePage:e=>{r.page=e},detailInfo:l,detailVisible:n,setDetailVisible:e=>{n.value=e},handleSelect:e=>{h.value=e},currentSelections:h,batchRemoveFiles:()=>{console.log("当前选中了",h.value),e.warning({title:"提示",content:"确定要删除指定的文件吗？",positiveText:"删除",negativeText:"不删",onPositiveClick:()=>{v.value=!0;for(let e=0;e<h.value.length;e++){const t=h.value[e];ne.post(`http://localhost:${window.preloadState.port}/table/delete`,{path:t}).then((e=>{e.data&&(m.value=m.value+1)})).catch((e=>{f.value=f.value+1})).finally((()=>{m.value+f.value===h.value.length&&setTimeout((()=>{v.value=!1,f.value=0,m.value=0,p()}),2e3)}))}}})},loadingModalVisible:v,success:m,fail:f}}});const mt={class:"table"},ft={class:"table-tool"},gt=T("搜索"),bt={class:"table-container"},yt=T("删除");ht.render=function(e,t,a,l,n,i){const o=F("n-input"),r=F("n-form-item"),s=F("n-date-picker"),u=F("n-button"),c=F("n-form"),d=F("n-data-table"),p=F("n-pagination"),v=F("n-space"),h=F("Detail"),m=F("LoadingModal");return x(),P("div",mt,[C("section",ft,[z(c,{inline:"","label-width":80,model:e.searchParams,"label-placement":"left",ref:"formRef"},{default:$((()=>[z(r,{label:"文件名",path:"searchParams.name"},{default:$((()=>[z(o,{placeholder:"文件名或路径",value:e.searchParams.name,"onUpdate:value":t[0]||(t[0]=t=>e.searchParams.name=t)},null,8,["value"])])),_:1}),z(r,{label:"更新时间",path:"searchParams.updatedAt"},{default:$((()=>[z(s,{value:e.searchParams.updatedAt,"onUpdate:value":t[1]||(t[1]=t=>e.searchParams.updatedAt=t),type:"datetimerange",clearable:""},null,8,["value"])])),_:1}),z(r,{label:"创建时间",path:"searchParams.createdAt"},{default:$((()=>[z(s,{value:e.searchParams.createdAt,"onUpdate:value":t[2]||(t[2]=t=>e.searchParams.createdAt=t),type:"datetimerange",clearable:""},null,8,["value"])])),_:1}),z(r,null,{default:$((()=>[z(u,null,{default:$((()=>[gt])),_:1})])),_:1})])),_:1},8,["model"])]),C("section",bt,[z(v,{vertical:""},{default:$((()=>[e.currentSelections.length?(x(),M(u,{key:0,onClick:e.batchRemoveFiles},{default:$((()=>[yt])),_:1},8,["onClick"])):ie("",!0),z(d,{columns:e.tableColumn,data:e.tableData,loading:e.loading,"row-key":e=>e.path,"onUpdate:checkedRowKeys":e.handleSelect},null,8,["columns","data","loading","row-key","onUpdate:checkedRowKeys"]),z(v,{justify:"center"},{default:$((()=>[z(p,{page:e.searchParams.page,"onUpdate:page":t[3]||(t[3]=t=>e.searchParams.page=t),"item-count":e.total,onChange:e.changePage},null,8,["page","item-count","onChange"])])),_:1})])),_:1})]),z(h,{detail:e.detailInfo,visible:e.detailVisible,setDetailVisible:e.setDetailVisible},null,8,["detail","visible","setDetailVisible"]),z(m,{visible:e.loadingModalVisible,limit:e.currentSelections.length,success:e.success,fail:e.fail},null,8,["visible","limit","success","fail"])])};var wt=h({name:"Menu",components:{"n-menu":oe},props:{collapsed:{type:Boolean,require:!0}},setup(e,t){const a=u([]),l=re();se((()=>{var e;const t=Nt.find((e=>"Layout"===e.name));t&&(null==(e=t.children)?void 0:e.length)&&(a.value=t.children.map((e=>{var t;return{label:null==(t=e.meta)?void 0:t.title,key:e.path}})))}));return{menuOptions:a,renderMenuIcon:e=>"/graph"===e.key?G(ce,null,{default:()=>G(ue)}):"/chart"===e.key?G(ce,null,{default:()=>G(de)}):G(ce,null,{default:()=>G(pe)}),handleClick:(e,t)=>{l.push({path:e})}}}});wt.render=function(e,t,a,l,n,i){const o=F("n-menu");return x(),M(o,{collapsed:e.collapsed,"collapsed-width":64,"collapsed-icon-size":22,options:e.menuOptions,"render-icon":e.renderMenuIcon,"onUpdate:value":e.handleClick},null,8,["collapsed","options","render-icon","onUpdate:value"])};var St=h({name:"Layout",components:{NSpace:I,NLayout:ve,Menu:wt,NLayoutSider:he},setup:()=>({collapsed:u(!0)})});St.render=function(e,t,a,l,n,i){const o=F("Menu"),r=F("n-layout-sider"),s=F("router-view"),u=F("n-layout"),c=F("n-space");return x(),M(c,{vertical:""},{default:$((()=>[z(u,{"content-style":{height:"100vh"},"has-sider":""},{default:$((()=>[z(r,{bordered:"","collapse-mode":"width","collapsed-width":64,width:240,collapsed:e.collapsed,"show-trigger":"",onCollapse:t[0]||(t[0]=t=>e.collapsed=!0),onExpand:t[1]||(t[1]=t=>e.collapsed=!1)},{default:$((()=>[z(o,{collapsed:e.collapsed},null,8,["collapsed"])])),_:1},8,["collapsed"]),z(u,{embedded:""},{default:$((()=>[z(s)])),_:1})])),_:1})])),_:1})};const Nt=[{path:"/",component:St,name:"Layout",redirect:()=>({name:"Graph"}),children:[{path:"/graph",component:ye,name:"Graph",meta:{title:"依赖树"}},{path:"/chart",component:Ke,name:"Chart",meta:{title:"分析图"}},{path:"/table",component:ht,name:"Table",meta:{title:"表格分析"}}]}],kt=me({history:fe(),routes:Nt});var _t=h({name:"PageLoading"});U("data-v-9f7b7bb4");const Dt={class:"sk-folding-cube"},Ft=[C("div",{class:"sk-cube1 sk-cube"},null,-1),C("div",{class:"sk-cube2 sk-cube"},null,-1),C("div",{class:"sk-cube4 sk-cube"},null,-1),C("div",{class:"sk-cube3 sk-cube"},null,-1)];A(),_t.render=function(e,t,a,l,n,i){return x(),P("div",Dt,Ft)},_t.__scopeId="data-v-9f7b7bb4";var Pt=h({name:"App",components:{PageLoading:_t,Layout:St,NDialogProvider:ge},setup(){const e=u(!1);return c((()=>{setTimeout((()=>{e.value=!0}),2e3)})),{isInitFinished:e}}});const zt={class:"container"},$t={key:0,class:"loading-wrappper"},xt=C("p",null,"还在初始化啊，等一下～",-1),Ct={key:1,class:"main-wrapper"};Pt.render=function(e,t,a,l,n,i){const o=F("PageLoading"),r=F("router-view"),s=F("n-dialog-provider");return x(),M(s,null,{default:$((()=>[C("div",zt,[e.isInitFinished?(x(),P("div",Ct,[z(r)])):(x(),P("div",$t,[xt,z(o)]))])])),_:1})};be(Pt).use(kt).mount("#app");
