var t=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get Base(){return sb},get Circle(){return lb},get Ellipse(){return cb},get Image(){return hb},get Line(){return pb},get Marker(){return vb},get Path(){return Eb},get Polygon(){return Ab},get Polyline(){return _b},get Rect(){return Tb},get Text(){return Pb}}),e=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get Base(){return Hb},get Circle(){return Yb},get Dom(){return Xb},get Ellipse(){return qb},get Image(){return Kb},get Line(){return Zb},get Marker(){return tx},get Path(){return ex},get Polygon(){return nx},get Polyline(){return rx},get Rect(){return ix},get Text(){return lx}});function n(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const r=n("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function i(t){return!!t||""===t}function o(t){if(S(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=A(r)?l(r):o(r);if(i)for(const t in i)e[t]=i[t]}return e}return A(t)||T(t)?t:void 0}const a=/;(?![^(]*\))/g,s=/:(.+)/;function l(t){const e={};return t.split(a).forEach((t=>{if(t){const n=t.split(s);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function u(t){let e="";if(A(t))e=t;else if(S(t))for(let n=0;n<t.length;n++){const r=u(t[n]);r&&(e+=r+" ")}else if(T(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const c=t=>null==t?"":S(t)||T(t)&&(t.toString===I||!M(t.toString))?JSON.stringify(t,d,2):String(t),d=(t,e)=>e&&e.__v_isRef?d(t,e.value):k(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:E(e)?{[`Set(${e.size})`]:[...e.values()]}:!T(e)||S(e)||O(e)?e:String(e),h={},f=[],p=()=>{},g=()=>!1,v=/^on[^a-z]/,m=t=>v.test(t),y=t=>t.startsWith("onUpdate:"),b=Object.assign,x=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},w=Object.prototype.hasOwnProperty,C=(t,e)=>w.call(t,e),S=Array.isArray,k=t=>"[object Map]"===D(t),E=t=>"[object Set]"===D(t),M=t=>"function"==typeof t,A=t=>"string"==typeof t,_=t=>"symbol"==typeof t,T=t=>null!==t&&"object"==typeof t,P=t=>T(t)&&M(t.then)&&M(t.catch),I=Object.prototype.toString,D=t=>I.call(t),O=t=>"[object Object]"===D(t),R=t=>A(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,L=n(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),B=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},F=/-(\w)/g,N=B((t=>t.replace(F,((t,e)=>e?e.toUpperCase():"")))),z=/\B([A-Z])/g,j=B((t=>t.replace(z,"-$1").toLowerCase())),G=B((t=>t.charAt(0).toUpperCase()+t.slice(1))),U=B((t=>t?`on${G(t)}`:"")),$=(t,e)=>!Object.is(t,e),V=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},W=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},H=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Y;const X=[];class q{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Y&&(this.parent=Y,this.index=(Y.scopes||(Y.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&(X.push(this),Y=this)}off(){this.active&&(X.pop(),Y=X[X.length-1])}stop(t){if(this.active){if(this.effects.forEach((t=>t.stop())),this.cleanups.forEach((t=>t())),this.scopes&&this.scopes.forEach((t=>t.stop(!0))),this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.active=!1}}}const K=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Z=t=>(t.w&et)>0,Q=t=>(t.n&et)>0,J=new WeakMap;let tt=0,et=1;const nt=[];let rt;const it=Symbol(""),ot=Symbol("");class at{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],function(t,e){(e=e||Y)&&e.active&&e.effects.push(t)}(this,n)}run(){if(!this.active)return this.fn();if(!nt.includes(this))try{return nt.push(rt=this),ut.push(lt),lt=!0,et=1<<++tt,tt<=30?(({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=et})(this):st(this),this.fn()}finally{tt<=30&&(t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];Z(i)&&!Q(i)?i.delete(t):e[n++]=i,i.w&=~et,i.n&=~et}e.length=n}})(this),et=1<<--tt,dt(),nt.pop();const t=nt.length;rt=t>0?nt[t-1]:void 0}}stop(){this.active&&(st(this),this.onStop&&this.onStop(),this.active=!1)}}function st(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let lt=!0;const ut=[];function ct(){ut.push(lt),lt=!1}function dt(){const t=ut.pop();lt=void 0===t||t}function ht(t,e,n){if(!ft())return;let r=J.get(t);r||J.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=K()),pt(i)}function ft(){return lt&&void 0!==rt}function pt(t,e){let n=!1;tt<=30?Q(t)||(t.n|=et,n=!Z(t)):n=!t.has(rt),n&&(t.add(rt),rt.deps.push(t))}function gt(t,e,n,r,i,o){const a=J.get(t);if(!a)return;let s=[];if("clear"===e)s=[...a.values()];else if("length"===n&&S(t))a.forEach(((t,e)=>{("length"===e||e>=r)&&s.push(t)}));else switch(void 0!==n&&s.push(a.get(n)),e){case"add":S(t)?R(n)&&s.push(a.get("length")):(s.push(a.get(it)),k(t)&&s.push(a.get(ot)));break;case"delete":S(t)||(s.push(a.get(it)),k(t)&&s.push(a.get(ot)));break;case"set":k(t)&&s.push(a.get(it))}if(1===s.length)s[0]&&vt(s[0]);else{const t=[];for(const e of s)e&&t.push(...e);vt(K(t))}}function vt(t,e){for(const n of S(t)?t:[...t])(n!==rt||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const mt=n("__proto__,__v_isRef,__isVue"),yt=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(_)),bt=kt(),xt=kt(!1,!0),wt=kt(!0),Ct=St();function St(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=ue(this);for(let e=0,i=this.length;e<i;e++)ht(n,0,e+"");const r=n[e](...t);return-1===r||!1===r?n[e](...t.map(ue)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){ct();const n=ue(this)[e].apply(this,t);return dt(),n}})),t}function kt(t=!1,e=!1){return function(n,r,i){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_raw"===r&&i===(t?e?ee:te:e?Jt:Qt).get(n))return n;const o=S(n);if(!t&&o&&C(Ct,r))return Reflect.get(Ct,r,i);const a=Reflect.get(n,r,i);if(_(r)?yt.has(r):mt(r))return a;if(t||ht(n,0,r),e)return a;if(pe(a)){return!o||!R(r)?a.value:a}return T(a)?t?ie(a):re(a):a}}function Et(t=!1){return function(e,n,r,i){let o=e[n];if(!t&&(r=ue(r),o=ue(o),!S(e)&&pe(o)&&!pe(r)))return o.value=r,!0;const a=S(e)&&R(n)?Number(n)<e.length:C(e,n),s=Reflect.set(e,n,r,i);return e===ue(i)&&(a?$(r,o)&&gt(e,"set",n,r):gt(e,"add",n,r)),s}}const Mt={get:bt,set:Et(),deleteProperty:function(t,e){const n=C(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&gt(t,"delete",e,void 0),r},has:function(t,e){const n=Reflect.has(t,e);return _(e)&&yt.has(e)||ht(t,0,e),n},ownKeys:function(t){return ht(t,0,S(t)?"length":it),Reflect.ownKeys(t)}},At={get:wt,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},_t=b({},Mt,{get:xt,set:Et(!0)}),Tt=t=>T(t)?re(t):t,Pt=t=>T(t)?ie(t):t,It=t=>t,Dt=t=>Reflect.getPrototypeOf(t);function Ot(t,e,n=!1,r=!1){const i=ue(t=t.__v_raw),o=ue(e);e!==o&&!n&&ht(i,0,e),!n&&ht(i,0,o);const{has:a}=Dt(i),s=r?It:n?Pt:Tt;return a.call(i,e)?s(t.get(e)):a.call(i,o)?s(t.get(o)):void(t!==i&&t.get(e))}function Rt(t,e=!1){const n=this.__v_raw,r=ue(n),i=ue(t);return t!==i&&!e&&ht(r,0,t),!e&&ht(r,0,i),t===i?n.has(t):n.has(t)||n.has(i)}function Lt(t,e=!1){return t=t.__v_raw,!e&&ht(ue(t),0,it),Reflect.get(t,"size",t)}function Bt(t){t=ue(t);const e=ue(this);return Dt(e).has.call(e,t)||(e.add(t),gt(e,"add",t,t)),this}function Ft(t,e){e=ue(e);const n=ue(this),{has:r,get:i}=Dt(n);let o=r.call(n,t);o||(t=ue(t),o=r.call(n,t));const a=i.call(n,t);return n.set(t,e),o?$(e,a)&&gt(n,"set",t,e):gt(n,"add",t,e),this}function Nt(t){const e=ue(this),{has:n,get:r}=Dt(e);let i=n.call(e,t);i||(t=ue(t),i=n.call(e,t)),r&&r.call(e,t);const o=e.delete(t);return i&&gt(e,"delete",t,void 0),o}function zt(){const t=ue(this),e=0!==t.size,n=t.clear();return e&&gt(t,"clear",void 0,void 0),n}function jt(t,e){return function(n,r){const i=this,o=i.__v_raw,a=ue(o),s=e?It:t?Pt:Tt;return!t&&ht(a,0,it),o.forEach(((t,e)=>n.call(r,s(t),s(e),i)))}}function Gt(t,e,n){return function(...r){const i=this.__v_raw,o=ue(i),a=k(o),s="entries"===t||t===Symbol.iterator&&a,l="keys"===t&&a,u=i[t](...r),c=n?It:e?Pt:Tt;return!e&&ht(o,0,l?ot:it),{next(){const{value:t,done:e}=u.next();return e?{value:t,done:e}:{value:s?[c(t[0]),c(t[1])]:c(t),done:e}},[Symbol.iterator](){return this}}}}function Ut(t){return function(...e){return"delete"!==t&&this}}function $t(){const t={get(t){return Ot(this,t)},get size(){return Lt(this)},has:Rt,add:Bt,set:Ft,delete:Nt,clear:zt,forEach:jt(!1,!1)},e={get(t){return Ot(this,t,!1,!0)},get size(){return Lt(this)},has:Rt,add:Bt,set:Ft,delete:Nt,clear:zt,forEach:jt(!1,!0)},n={get(t){return Ot(this,t,!0)},get size(){return Lt(this,!0)},has(t){return Rt.call(this,t,!0)},add:Ut("add"),set:Ut("set"),delete:Ut("delete"),clear:Ut("clear"),forEach:jt(!0,!1)},r={get(t){return Ot(this,t,!0,!0)},get size(){return Lt(this,!0)},has(t){return Rt.call(this,t,!0)},add:Ut("add"),set:Ut("set"),delete:Ut("delete"),clear:Ut("clear"),forEach:jt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((i=>{t[i]=Gt(i,!1,!1),n[i]=Gt(i,!0,!1),e[i]=Gt(i,!1,!0),r[i]=Gt(i,!0,!0)})),[t,n,e,r]}const[Vt,Wt,Ht,Yt]=$t();function Xt(t,e){const n=e?t?Yt:Ht:t?Wt:Vt;return(e,r,i)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get(C(n,r)&&r in e?n:e,r,i)}const qt={get:Xt(!1,!1)},Kt={get:Xt(!1,!0)},Zt={get:Xt(!0,!1)},Qt=new WeakMap,Jt=new WeakMap,te=new WeakMap,ee=new WeakMap;function ne(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>D(t).slice(8,-1))(t))}function re(t){return t&&t.__v_isReadonly?t:oe(t,!1,Mt,qt,Qt)}function ie(t){return oe(t,!0,At,Zt,te)}function oe(t,e,n,r,i){if(!T(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const a=ne(t);if(0===a)return t;const s=new Proxy(t,2===a?r:n);return i.set(t,s),s}function ae(t){return se(t)?ae(t.__v_raw):!(!t||!t.__v_isReactive)}function se(t){return!(!t||!t.__v_isReadonly)}function le(t){return ae(t)||se(t)}function ue(t){const e=t&&t.__v_raw;return e?ue(e):t}function ce(t){return W(t,"__v_skip",!0),t}function de(t){ft()&&((t=ue(t)).dep||(t.dep=K()),pt(t.dep))}function he(t,e){(t=ue(t)).dep&&vt(t.dep)}const fe=t=>T(t)?re(t):t;function pe(t){return Boolean(t&&!0===t.__v_isRef)}function ge(t){return ye(t,!1)}function ve(t){return ye(t,!0)}class me{constructor(t,e){this._shallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:ue(t),this._value=e?t:fe(t)}get value(){return de(this),this._value}set value(t){t=this._shallow?t:ue(t),$(t,this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:fe(t),he(this))}}function ye(t,e){return pe(t)?t:new me(t,e)}function be(t){return pe(t)?t.value:t}const xe={get:(t,e,n)=>be(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return pe(i)&&!pe(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function we(t){return ae(t)?t:new Proxy(t,xe)}class Ce{constructor(t,e){this._object=t,this._key=e,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(t){this._object[this._key]=t}}function Se(t,e){const n=t[e];return pe(n)?n:new Ce(t,e)}class ke{constructor(t,e,n){this._setter=e,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new at(t,(()=>{this._dirty||(this._dirty=!0,he(this))})),this.__v_isReadonly=n}get value(){const t=ue(this);return de(t),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Ee(t,e){let n,r;M(t)?(n=t,r=p):(n=t.get,r=t.set);return new ke(n,r,M(t)||!t.set)}Promise.resolve();function Me(t,e,...n){const r=t.vnode.props||h;let i=n;const o=e.startsWith("update:"),a=o&&e.slice(7);if(a&&a in r){const t=`${"modelValue"===a?"model":a}Modifiers`,{number:e,trim:o}=r[t]||h;o?i=n.map((t=>t.trim())):e&&(i=n.map(H))}let s,l=r[s=U(e)]||r[s=U(N(e))];!l&&o&&(l=r[s=U(j(e))]),l&&qr(l,t,6,i);const u=r[s+"Once"];if(u){if(t.emitted){if(t.emitted[s])return}else t.emitted={};t.emitted[s]=!0,qr(u,t,6,i)}}function Ae(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(void 0!==i)return i;const o=t.emits;let a={},s=!1;if(!M(t)){const r=t=>{const n=Ae(t,e,!0);n&&(s=!0,b(a,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return o||s?(S(o)?o.forEach((t=>a[t]=null)):b(a,o),r.set(t,a),a):(r.set(t,null),null)}function _e(t,e){return!(!t||!m(e))&&(e=e.slice(2).replace(/Once$/,""),C(t,e[0].toLowerCase()+e.slice(1))||C(t,j(e))||C(t,e))}let Te=null,Pe=null;function Ie(t){const e=Te;return Te=t,Pe=t&&t.type.__scopeId||null,e}function De(t){Pe=t}function Oe(){Pe=null}function Re(t,e=Te,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&hr(-1);const i=Ie(e),o=t(...n);return Ie(i),r._d&&hr(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function Le(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[a],slots:s,attrs:l,emit:u,render:c,renderCache:d,data:h,setupState:f,ctx:p,inheritAttrs:g}=t;let v;const m=Ie(t);try{let t;if(4&n.shapeFlag){const e=i||r;v=Mr(c.call(e,e,d,o,f,h,p)),t=l}else{const n=e;0,v=Mr(n.length>1?n(o,{attrs:l,slots:s,emit:u}):n(o,null)),t=e.props?l:Be(l)}let m=v;if(t&&!1!==g){const e=Object.keys(t),{shapeFlag:n}=m;e.length&&7&n&&(a&&e.some(y)&&(t=Fe(t,a)),m=Sr(m,t))}0,n.dirs&&(m.dirs=m.dirs?m.dirs.concat(n.dirs):n.dirs),n.transition&&(m.transition=n.transition),v=m}catch(b){lr.length=0,Kr(b,t,1),v=Cr(ar)}return Ie(m),v}const Be=t=>{let e;for(const n in t)("class"===n||"style"===n||m(n))&&((e||(e={}))[n]=t[n]);return e},Fe=(t,e)=>{const n={};for(const r in t)y(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function Ne(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!_e(n,o))return!0}return!1}function ze(t,e){if(Nr){let n=Nr.provides;const r=Nr.parent&&Nr.parent.provides;r===n&&(n=Nr.provides=Object.create(r)),n[t]=e}else;}function je(t,e,n=!1){const r=Nr||Te;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&M(e)?e.call(r.proxy):e}}function Ge(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return sn((()=>{t.isMounted=!0})),cn((()=>{t.isUnmounting=!0})),t}const Ue=[Function,Array],$e={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ue,onEnter:Ue,onAfterEnter:Ue,onEnterCancelled:Ue,onBeforeLeave:Ue,onLeave:Ue,onAfterLeave:Ue,onLeaveCancelled:Ue,onBeforeAppear:Ue,onAppear:Ue,onAfterAppear:Ue,onAppearCancelled:Ue},setup(t,{slots:e}){const n=zr(),r=Ge();let i;return()=>{const o=e.default&&qe(e.default(),!0);if(!o||!o.length)return;const a=ue(t),{mode:s}=a,l=o[0];if(r.isLeaving)return He(l);const u=Ye(l);if(!u)return He(l);const c=We(u,a,r,n);Xe(u,c);const d=n.subTree,h=d&&Ye(d);let f=!1;const{getTransitionKey:p}=u.type;if(p){const t=p();void 0===i?i=t:t!==i&&(i=t,f=!0)}if(h&&h.type!==ar&&(!mr(u,h)||f)){const t=We(h,a,r,n);if(Xe(h,t),"out-in"===s)return r.isLeaving=!0,t.afterLeave=()=>{r.isLeaving=!1,n.update()},He(l);"in-out"===s&&u.type!==ar&&(t.delayLeave=(t,e,n)=>{Ve(r,h)[String(h.key)]=h,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=n})}return l}}};function Ve(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function We(t,e,n,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:s,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:d,onLeave:h,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:g,onAppear:v,onAfterAppear:m,onAppearCancelled:y}=e,b=String(t.key),x=Ve(n,t),w=(t,e)=>{t&&qr(t,r,9,e)},C={mode:o,persisted:a,beforeEnter(e){let r=s;if(!n.isMounted){if(!i)return;r=g||s}e._leaveCb&&e._leaveCb(!0);const o=x[b];o&&mr(t,o)&&o.el._leaveCb&&o.el._leaveCb(),w(r,[e])},enter(t){let e=l,r=u,o=c;if(!n.isMounted){if(!i)return;e=v||l,r=m||u,o=y||c}let a=!1;const s=t._enterCb=e=>{a||(a=!0,w(e?o:r,[t]),C.delayedLeave&&C.delayedLeave(),t._enterCb=void 0)};e?(e(t,s),e.length<=1&&s()):s()},leave(e,r){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return r();w(d,[e]);let o=!1;const a=e._leaveCb=n=>{o||(o=!0,r(),w(n?p:f,[e]),e._leaveCb=void 0,x[i]===t&&delete x[i])};x[i]=t,h?(h(e,a),h.length<=1&&a()):a()},clone:t=>We(t,e,n,r)};return C}function He(t){if(Qe(t))return(t=Sr(t)).children=null,t}function Ye(t){return Qe(t)?t.children?t.children[0]:void 0:t}function Xe(t,e){6&t.shapeFlag&&t.component?Xe(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function qe(t,e=!1){let n=[],r=0;for(let i=0;i<t.length;i++){const o=t[i];o.type===ir?(128&o.patchFlag&&r++,n=n.concat(qe(o.children,e))):(e||o.type!==ar)&&n.push(o)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}function Ke(t){return M(t)?{setup:t,name:t.name}:t}const Ze=t=>!!t.type.__asyncLoader,Qe=t=>t.type.__isKeepAlive;function Je(t,e){en(t,"a",e)}function tn(t,e){en(t,"da",e)}function en(t,e,n=Nr){const r=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(rn(e,r,n),n){let t=n.parent;for(;t&&t.parent;)Qe(t.parent.vnode)&&nn(r,e,n,t),t=t.parent}}function nn(t,e,n,r){const i=rn(e,t,r,!0);dn((()=>{x(r[e],i)}),n)}function rn(t,e,n=Nr,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;ct(),jr(n);const i=qr(e,n,t,r);return Gr(),dt(),i});return r?i.unshift(o):i.push(o),o}}const on=t=>(e,n=Nr)=>(!$r||"sp"===t)&&rn(t,e,n),an=on("bm"),sn=on("m"),ln=on("bu"),un=on("u"),cn=on("bum"),dn=on("um"),hn=on("sp"),fn=on("rtg"),pn=on("rtc");function gn(t,e=Nr){rn("ec",t,e)}let vn=!0;function mn(t){const e=xn(t),n=t.proxy,r=t.ctx;vn=!1,e.beforeCreate&&yn(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:a,watch:s,provide:l,inject:u,created:c,beforeMount:d,mounted:h,beforeUpdate:f,updated:g,activated:v,deactivated:m,beforeDestroy:y,beforeUnmount:b,destroyed:x,unmounted:w,render:C,renderTracked:k,renderTriggered:E,errorCaptured:A,serverPrefetch:_,expose:P,inheritAttrs:I,components:D,directives:O,filters:R}=e;if(u&&function(t,e,n=p,r=!1){S(t)&&(t=kn(t));for(const i in t){const n=t[i];let o;o=T(n)?"default"in n?je(n.from||i,n.default,!0):je(n.from||i):je(n),pe(o)&&r?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:t=>o.value=t}):e[i]=o}}(u,r,null,t.appContext.config.unwrapInjectedRef),a)for(const p in a){const t=a[p];M(t)&&(r[p]=t.bind(n))}if(i){const e=i.call(n,n);T(e)&&(t.data=re(e))}if(vn=!0,o)for(const S in o){const t=o[S],e=Ee({get:M(t)?t.bind(n,n):M(t.get)?t.get.bind(n,n):p,set:!M(t)&&M(t.set)?t.set.bind(n):p});Object.defineProperty(r,S,{enumerable:!0,configurable:!0,get:()=>e.value,set:t=>e.value=t})}if(s)for(const p in s)bn(s[p],r,n,p);if(l){const t=M(l)?l.call(n):l;Reflect.ownKeys(t).forEach((e=>{ze(e,t[e])}))}function L(t,e){S(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(c&&yn(c,t,"c"),L(an,d),L(sn,h),L(ln,f),L(un,g),L(Je,v),L(tn,m),L(gn,A),L(pn,k),L(fn,E),L(cn,b),L(dn,w),L(hn,_),S(P))if(P.length){const e=t.exposed||(t.exposed={});P.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});C&&t.render===p&&(t.render=C),null!=I&&(t.inheritAttrs=I),D&&(t.components=D),O&&(t.directives=O)}function yn(t,e,n){qr(S(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function bn(t,e,n,r){const i=r.includes(".")?Si(n,r):()=>n[r];if(A(t)){const n=e[t];M(n)&&xi(i,n)}else if(M(t))xi(i,t.bind(n));else if(T(t))if(S(t))t.forEach((t=>bn(t,e,n,r)));else{const r=M(t.handler)?t.handler.bind(n):e[t.handler];M(r)&&xi(i,r,t)}}function xn(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=t.appContext,s=o.get(e);let l;return s?l=s:i.length||n||r?(l={},i.length&&i.forEach((t=>wn(l,t,a,!0))),wn(l,e,a)):l=e,o.set(e,l),l}function wn(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&wn(t,o,n,!0),i&&i.forEach((e=>wn(t,e,n,!0)));for(const a in e)if(r&&"expose"===a);else{const r=Cn[a]||n&&n[a];t[a]=r?r(t[a],e[a]):e[a]}return t}const Cn={data:Sn,props:Mn,emits:Mn,methods:Mn,computed:Mn,beforeCreate:En,created:En,beforeMount:En,mounted:En,beforeUpdate:En,updated:En,beforeDestroy:En,beforeUnmount:En,destroyed:En,unmounted:En,activated:En,deactivated:En,errorCaptured:En,serverPrefetch:En,components:Mn,directives:Mn,watch:function(t,e){if(!t)return e;if(!e)return t;const n=b(Object.create(null),t);for(const r in e)n[r]=En(t[r],e[r]);return n},provide:Sn,inject:function(t,e){return Mn(kn(t),kn(e))}};function Sn(t,e){return e?t?function(){return b(M(t)?t.call(this,this):t,M(e)?e.call(this,this):e)}:e:t}function kn(t){if(S(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function En(t,e){return t?[...new Set([].concat(t,e))]:e}function Mn(t,e){return t?b(b(Object.create(null),t),e):e}function An(t,e,n,r=!1){const i={},o={};W(o,yr,1),t.propsDefaults=Object.create(null),_n(t,e,i,o);for(const a in t.propsOptions[0])a in i||(i[a]=void 0);n?t.props=r?i:oe(i,!1,_t,Kt,Jt):t.type.props?t.props=i:t.props=o,t.attrs=o}function _n(t,e,n,r){const[i,o]=t.propsOptions;let a,s=!1;if(e)for(let l in e){if(L(l))continue;const u=e[l];let c;i&&C(i,c=N(l))?o&&o.includes(c)?(a||(a={}))[c]=u:n[c]=u:_e(t.emitsOptions,l)||u!==r[l]&&(r[l]=u,s=!0)}if(o){const e=ue(n),r=a||h;for(let a=0;a<o.length;a++){const s=o[a];n[s]=Tn(i,e,s,r[s],t,!C(r,s))}}return s}function Tn(t,e,n,r,i,o){const a=t[n];if(null!=a){const t=C(a,"default");if(t&&void 0===r){const t=a.default;if(a.type!==Function&&M(t)){const{propsDefaults:o}=i;n in o?r=o[n]:(jr(i),r=o[n]=t.call(null,e),Gr())}else r=t}a[0]&&(o&&!t?r=!1:!a[1]||""!==r&&r!==j(n)||(r=!0))}return r}function Pn(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const o=t.props,a={},s=[];let l=!1;if(!M(t)){const r=t=>{l=!0;const[n,r]=Pn(t,e,!0);b(a,n),r&&s.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!o&&!l)return r.set(t,f),f;if(S(o))for(let c=0;c<o.length;c++){const t=N(o[c]);In(t)&&(a[t]=h)}else if(o)for(const c in o){const t=N(c);if(In(t)){const e=o[c],n=a[t]=S(e)||M(e)?{type:e}:e;if(n){const e=Rn(Boolean,n.type),r=Rn(String,n.type);n[0]=e>-1,n[1]=r<0||e<r,(e>-1||C(n,"default"))&&s.push(t)}}}const u=[a,s];return r.set(t,u),u}function In(t){return"$"!==t[0]}function Dn(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:null===t?"null":""}function On(t,e){return Dn(t)===Dn(e)}function Rn(t,e){return S(e)?e.findIndex((e=>On(e,t))):M(e)&&On(e,t)?0:-1}const Ln=t=>"_"===t[0]||"$stable"===t,Bn=t=>S(t)?t.map(Mr):[Mr(t)],Fn=(t,e,n)=>{const r=Re(((...t)=>Bn(e(...t))),n);return r._c=!1,r},Nn=(t,e,n)=>{const r=t._ctx;for(const i in t){if(Ln(i))continue;const n=t[i];if(M(n))e[i]=Fn(0,n,r);else if(null!=n){const t=Bn(n);e[i]=()=>t}}},zn=(t,e)=>{const n=Bn(e);t.slots.default=()=>n};function jn(t,e){if(null===Te)return t;const n=Te.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[t,o,a,s=h]=e[i];M(t)&&(t={mounted:t,updated:t}),t.deep&&ki(o),r.push({dir:t,instance:n,value:o,oldValue:void 0,arg:a,modifiers:s})}return t}function Gn(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[r];l&&(ct(),qr(l,n,8,[t.el,s,t,e]),dt())}}function Un(){return{app:null,config:{isNativeTag:g,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let $n=0;function Vn(t,e){return function(n,r=null){null==r||T(r)||(r=null);const i=Un(),o=new Set;let a=!1;const s=i.app={_uid:$n++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Mi,get config(){return i.config},set config(t){},use:(t,...e)=>(o.has(t)||(t&&M(t.install)?(o.add(t),t.install(s,...e)):M(t)&&(o.add(t),t(s,...e))),s),mixin:t=>(i.mixins.includes(t)||i.mixins.push(t),s),component:(t,e)=>e?(i.components[t]=e,s):i.components[t],directive:(t,e)=>e?(i.directives[t]=e,s):i.directives[t],mount(o,l,u){if(!a){const c=Cr(n,r);return c.appContext=i,l&&e?e(c,o):t(c,o,u),a=!0,s._container=o,o.__vue_app__=s,c.component.proxy}},unmount(){a&&(t(null,s._container),delete s._container.__vue_app__)},provide:(t,e)=>(i.provides[t]=e,s)};return s}}const Wn=function(t,e){e&&e.pendingBranch?S(t)?e.effects.push(...t):e.effects.push(t):fi(t,oi,ii,ai)};function Hn(t){return function(t,e){const{insert:n,remove:r,patchProp:i,createElement:o,createText:a,createComment:s,setText:l,setElementText:u,parentNode:c,nextSibling:d,setScopeId:g=p,cloneNode:v,insertStaticContent:m}=t,y=(t,e,n,r=null,i=null,o=null,a=!1,s=null,l=!!e.dynamicChildren)=>{if(t===e)return;t&&!mr(t,e)&&(r=et(t),K(t,i,o,!0),t=null),-2===e.patchFlag&&(l=!1,e.dynamicChildren=null);const{type:u,ref:c,shapeFlag:d}=e;switch(u){case or:x(t,e,n,r);break;case ar:w(t,e,n,r);break;case sr:null==t&&S(e,n,r,a);break;case ir:R(t,e,n,r,i,o,a,s,l);break;default:1&d?M(t,e,n,r,i,o,a,s,l):6&d?B(t,e,n,r,i,o,a,s,l):(64&d||128&d)&&u.process(t,e,n,r,i,o,a,s,l,rt)}null!=c&&i&&Yn(c,t&&t.ref,o,e||t,!e)},x=(t,e,r,i)=>{if(null==t)n(e.el=a(e.children),r,i);else{const n=e.el=t.el;e.children!==t.children&&l(n,e.children)}},w=(t,e,r,i)=>{null==t?n(e.el=s(e.children||""),r,i):e.el=t.el},S=(t,e,n,r)=>{[t.el,t.anchor]=m(t.children,e,n,r)},k=({el:t,anchor:e},r,i)=>{let o;for(;t&&t!==e;)o=d(t),n(t,r,i),t=o;n(e,r,i)},E=({el:t,anchor:e})=>{let n;for(;t&&t!==e;)n=d(t),r(t),t=n;r(e)},M=(t,e,n,r,i,o,a,s,l)=>{a=a||"svg"===e.type,null==t?A(e,n,r,i,o,a,s,l):I(t,e,i,o,a,s,l)},A=(t,e,r,a,s,l,c,d)=>{let h,f;const{type:p,props:g,shapeFlag:m,transition:y,patchFlag:b,dirs:x}=t;if(t.el&&void 0!==v&&-1===b)h=t.el=v(t.el);else{if(h=t.el=o(t.type,l,g&&g.is,g),8&m?u(h,t.children):16&m&&T(t.children,h,null,a,s,l&&"foreignObject"!==p,c,d),x&&Gn(t,null,a,"created"),g){for(const e in g)"value"===e||L(e)||i(h,e,null,g[e],l,t.children,a,s,tt);"value"in g&&i(h,"value",null,g.value),(f=g.onVnodeBeforeMount)&&Xn(f,a,t)}_(h,t,t.scopeId,c,a)}x&&Gn(t,null,a,"beforeMount");const w=(!s||s&&!s.pendingBranch)&&y&&!y.persisted;w&&y.beforeEnter(h),n(h,e,r),((f=g&&g.onVnodeMounted)||w||x)&&Wn((()=>{f&&Xn(f,a,t),w&&y.enter(h),x&&Gn(t,null,a,"mounted")}),s)},_=(t,e,n,r,i)=>{if(n&&g(t,n),r)for(let o=0;o<r.length;o++)g(t,r[o]);if(i){if(e===i.subTree){const e=i.vnode;_(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},T=(t,e,n,r,i,o,a,s,l=0)=>{for(let u=l;u<t.length;u++){const l=t[u]=s?Ar(t[u]):Mr(t[u]);y(null,l,e,n,r,i,o,a,s)}},I=(t,e,n,r,o,a,s)=>{const l=e.el=t.el;let{patchFlag:c,dynamicChildren:d,dirs:f}=e;c|=16&t.patchFlag;const p=t.props||h,g=e.props||h;let v;(v=g.onVnodeBeforeUpdate)&&Xn(v,n,e,t),f&&Gn(e,t,n,"beforeUpdate");const m=o&&"foreignObject"!==e.type;if(d?D(t.dynamicChildren,d,l,n,r,m,a):s||$(t,e,l,null,n,r,m,a,!1),c>0){if(16&c)O(l,e,p,g,n,r,o);else if(2&c&&p.class!==g.class&&i(l,"class",null,g.class,o),4&c&&i(l,"style",p.style,g.style,o),8&c){const a=e.dynamicProps;for(let e=0;e<a.length;e++){const s=a[e],u=p[s],c=g[s];c===u&&"value"!==s||i(l,s,u,c,o,t.children,n,r,tt)}}1&c&&t.children!==e.children&&u(l,e.children)}else s||null!=d||O(l,e,p,g,n,r,o);((v=g.onVnodeUpdated)||f)&&Wn((()=>{v&&Xn(v,n,e,t),f&&Gn(e,t,n,"updated")}),r)},D=(t,e,n,r,i,o,a)=>{for(let s=0;s<e.length;s++){const l=t[s],u=e[s],d=l.el&&(l.type===ir||!mr(l,u)||70&l.shapeFlag)?c(l.el):n;y(l,u,d,null,r,i,o,a,!0)}},O=(t,e,n,r,o,a,s)=>{if(n!==r){for(const l in r){if(L(l))continue;const u=r[l],c=n[l];u!==c&&"value"!==l&&i(t,l,c,u,s,e.children,o,a,tt)}if(n!==h)for(const l in n)L(l)||l in r||i(t,l,n[l],null,s,e.children,o,a,tt);"value"in r&&i(t,"value",n.value,r.value)}},R=(t,e,r,i,o,s,l,u,c)=>{const d=e.el=t?t.el:a(""),h=e.anchor=t?t.anchor:a("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:g}=e;g&&(u=u?u.concat(g):g),null==t?(n(d,r,i),n(h,r,i),T(e.children,r,h,o,s,l,u,c)):f>0&&64&f&&p&&t.dynamicChildren?(D(t.dynamicChildren,p,r,o,s,l,u),(null!=e.key||o&&e===o.subTree)&&qn(t,e,!0)):$(t,e,r,h,o,s,l,u,c)},B=(t,e,n,r,i,o,a,s,l)=>{e.slotScopeIds=s,null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,a,l):F(e,n,r,i,o,a,l):z(t,e,l)},F=(t,e,n,r,i,o,a)=>{const s=t.component=function(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||Br,o={uid:Fr++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,update:null,scope:new q(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Pn(r,i),emitsOptions:Ae(r,i),emit:null,emitted:null,propsDefaults:h,inheritAttrs:r.inheritAttrs,ctx:h,data:h,props:h,attrs:h,slots:h,refs:h,setupState:h,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};o.ctx={_:o},o.root=e?e.root:o,o.emit=Me.bind(null,o),t.ce&&t.ce(o);return o}(t,r,i);if(Qe(t)&&(s.ctx.renderer=rt),function(t,e=!1){$r=e;const{props:n,children:r}=t.vnode,i=Ur(t);An(t,n,i,e),((t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=ue(e),W(e,"_",n)):Nn(e,t.slots={})}else t.slots={},e&&zn(t,e);W(t.slots,yr,1)})(t,r);const o=i?function(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=ce(new Proxy(t.ctx,Lr));const{setup:r}=n;if(r){const n=t.setupContext=r.length>1?function(t){const e=e=>{t.exposed=e||{}};let n;return{get attrs(){return n||(n=function(t){return new Proxy(t.attrs,{get:(e,n)=>(ht(t,0,"$attrs"),e[n])})}(t))},slots:t.slots,emit:t.emit,expose:e}}(t):null;jr(t),ct();const i=Xr(r,t,0,[t.props,n]);if(dt(),Gr(),P(i)){if(i.then(Gr,Gr),e)return i.then((e=>{Vr(t,e)})).catch((e=>{Kr(e,t,0)}));t.asyncDep=i}else Vr(t,i)}else Wr(t)}(t,e):void 0;$r=!1}(s),s.asyncDep){if(i&&i.registerDep(s,G),!t.el){const t=s.subTree=Cr(ar);w(null,t,e,n)}}else G(s,t,e,n,i,o,a)},z=(t,e,n)=>{const r=e.component=t.component;if(function(t,e,n){const{props:r,children:i,component:o}=t,{props:a,children:s,patchFlag:l}=e,u=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&l>=0))return!(!i&&!s||s&&s.$stable)||r!==a&&(r?!a||Ne(r,a,u):!!a);if(1024&l)return!0;if(16&l)return r?Ne(r,a,u):!!a;if(8&l){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(a[n]!==r[n]&&!_e(u,n))return!0}}return!1}(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void U(r,e,n);r.next=e,function(t){const e=Jr.indexOf(t);e>ti&&Jr.splice(e,1)}(r.update),r.update()}else e.component=t.component,e.el=t.el,r.vnode=e},G=(t,e,n,r,i,o,a)=>{const s=new at((()=>{if(t.isMounted){let e,{next:n,bu:r,u:l,parent:u,vnode:d}=t,h=n;s.allowRecurse=!1,n?(n.el=d.el,U(t,n,a)):n=d,r&&V(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&Xn(e,u,n,d),s.allowRecurse=!0;const f=Le(t),p=t.subTree;t.subTree=f,y(p,f,c(p.el),et(p),t,i,o),n.el=f.el,null===h&&function({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}(t,f.el),l&&Wn(l,i),(e=n.props&&n.props.onVnodeUpdated)&&Wn((()=>Xn(e,u,n,d)),i)}else{let a;const{el:l,props:u}=e,{bm:c,m:d,parent:h}=t,f=Ze(e);if(s.allowRecurse=!1,c&&V(c),!f&&(a=u&&u.onVnodeBeforeMount)&&Xn(a,h,e),s.allowRecurse=!0,l&&ot){const n=()=>{t.subTree=Le(t),ot(l,t.subTree,t,i,null)};f?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{const a=t.subTree=Le(t);y(null,a,n,r,t,i,o),e.el=a.el}if(d&&Wn(d,i),!f&&(a=u&&u.onVnodeMounted)){const t=e;Wn((()=>Xn(a,h,t)),i)}256&e.shapeFlag&&t.a&&Wn(t.a,i),t.isMounted=!0,e=n=r=null}}),(()=>di(t.update)),t.scope),l=t.update=s.run.bind(s);l.id=t.uid,s.allowRecurse=l.allowRecurse=!0,l()},U=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,function(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:a}}=t,s=ue(i),[l]=t.propsOptions;let u=!1;if(!(r||a>0)||16&a){let r;_n(t,e,i,o)&&(u=!0);for(const o in s)e&&(C(e,o)||(r=j(o))!==o&&C(e,r))||(l?!n||void 0===n[o]&&void 0===n[r]||(i[o]=Tn(l,s,o,void 0,t,!0)):delete i[o]);if(o!==s)for(const t in o)e&&C(e,t)||(delete o[t],u=!0)}else if(8&a){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let a=n[r];const c=e[a];if(l)if(C(o,a))c!==o[a]&&(o[a]=c,u=!0);else{const e=N(a);i[e]=Tn(l,s,e,c,t,!1)}else c!==o[a]&&(o[a]=c,u=!0)}}u&&gt(t,"set","$attrs")}(t,e.props,r,n),((t,e,n)=>{const{vnode:r,slots:i}=t;let o=!0,a=h;if(32&r.shapeFlag){const t=e._;t?n&&1===t?o=!1:(b(i,e),n||1!==t||delete i._):(o=!e.$stable,Nn(e,i)),a=e}else e&&(zn(t,e),a={default:1});if(o)for(const s in i)Ln(s)||s in a||delete i[s]})(t,e.children,n),ct(),pi(void 0,t.update),dt()},$=(t,e,n,r,i,o,a,s,l=!1)=>{const c=t&&t.children,d=t?t.shapeFlag:0,h=e.children,{patchFlag:f,shapeFlag:p}=e;if(f>0){if(128&f)return void Y(c,h,n,r,i,o,a,s,l);if(256&f)return void H(c,h,n,r,i,o,a,s,l)}8&p?(16&d&&tt(c,i,o),h!==c&&u(n,h)):16&d?16&p?Y(c,h,n,r,i,o,a,s,l):tt(c,i,o,!0):(8&d&&u(n,""),16&p&&T(h,n,r,i,o,a,s,l))},H=(t,e,n,r,i,o,a,s,l)=>{e=e||f;const u=(t=t||f).length,c=e.length,d=Math.min(u,c);let h;for(h=0;h<d;h++){const r=e[h]=l?Ar(e[h]):Mr(e[h]);y(t[h],r,n,null,i,o,a,s,l)}u>c?tt(t,i,o,!0,!1,d):T(e,n,r,i,o,a,s,l,d)},Y=(t,e,n,r,i,o,a,s,l)=>{let u=0;const c=e.length;let d=t.length-1,h=c-1;for(;u<=d&&u<=h;){const r=t[u],c=e[u]=l?Ar(e[u]):Mr(e[u]);if(!mr(r,c))break;y(r,c,n,null,i,o,a,s,l),u++}for(;u<=d&&u<=h;){const r=t[d],u=e[h]=l?Ar(e[h]):Mr(e[h]);if(!mr(r,u))break;y(r,u,n,null,i,o,a,s,l),d--,h--}if(u>d){if(u<=h){const t=h+1,d=t<c?e[t].el:r;for(;u<=h;)y(null,e[u]=l?Ar(e[u]):Mr(e[u]),n,d,i,o,a,s,l),u++}}else if(u>h)for(;u<=d;)K(t[u],i,o,!0),u++;else{const p=u,g=u,v=new Map;for(u=g;u<=h;u++){const t=e[u]=l?Ar(e[u]):Mr(e[u]);null!=t.key&&v.set(t.key,u)}let m,b=0;const x=h-g+1;let w=!1,C=0;const S=new Array(x);for(u=0;u<x;u++)S[u]=0;for(u=p;u<=d;u++){const r=t[u];if(b>=x){K(r,i,o,!0);continue}let c;if(null!=r.key)c=v.get(r.key);else for(m=g;m<=h;m++)if(0===S[m-g]&&mr(r,e[m])){c=m;break}void 0===c?K(r,i,o,!0):(S[c-g]=u+1,c>=C?C=c:w=!0,y(r,e[c],n,null,i,o,a,s,l),b++)}const k=w?function(t){const e=t.slice(),n=[0];let r,i,o,a,s;const l=t.length;for(r=0;r<l;r++){const l=t[r];if(0!==l){if(i=n[n.length-1],t[i]<l){e[r]=i,n.push(r);continue}for(o=0,a=n.length-1;o<a;)s=o+a>>1,t[n[s]]<l?o=s+1:a=s;l<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,a=n[o-1];for(;o-- >0;)n[o]=a,a=e[a];return n}(S):f;for(m=k.length-1,u=x-1;u>=0;u--){const t=g+u,d=e[t],h=t+1<c?e[t+1].el:r;0===S[u]?y(null,d,n,h,i,o,a,s,l):w&&(m<0||u!==k[m]?X(d,n,h,2):m--)}}},X=(t,e,r,i,o=null)=>{const{el:a,type:s,transition:l,children:u,shapeFlag:c}=t;if(6&c)return void X(t.component.subTree,e,r,i);if(128&c)return void t.suspense.move(e,r,i);if(64&c)return void s.move(t,e,r,rt);if(s===ir){n(a,e,r);for(let t=0;t<u.length;t++)X(u[t],e,r,i);return void n(t.anchor,e,r)}if(s===sr)return void k(t,e,r);if(2!==i&&1&c&&l)if(0===i)l.beforeEnter(a),n(a,e,r),Wn((()=>l.enter(a)),o);else{const{leave:t,delayLeave:i,afterLeave:o}=l,s=()=>n(a,e,r),u=()=>{t(a,(()=>{s(),o&&o()}))};i?i(a,s,u):u()}else n(a,e,r)},K=(t,e,n,r=!1,i=!1)=>{const{type:o,props:a,ref:s,children:l,dynamicChildren:u,shapeFlag:c,patchFlag:d,dirs:h}=t;if(null!=s&&Yn(s,null,n,t,!0),256&c)return void e.ctx.deactivate(t);const f=1&c&&h,p=!Ze(t);let g;if(p&&(g=a&&a.onVnodeBeforeUnmount)&&Xn(g,e,t),6&c)J(t.component,n,r);else{if(128&c)return void t.suspense.unmount(n,r);f&&Gn(t,null,e,"beforeUnmount"),64&c?t.type.remove(t,e,n,i,rt,r):u&&(o!==ir||d>0&&64&d)?tt(u,e,n,!1,!0):(o===ir&&384&d||!i&&16&c)&&tt(l,e,n),r&&Z(t)}(p&&(g=a&&a.onVnodeUnmounted)||f)&&Wn((()=>{g&&Xn(g,e,t),f&&Gn(t,null,e,"unmounted")}),n)},Z=t=>{const{type:e,el:n,anchor:i,transition:o}=t;if(e===ir)return void Q(n,i);if(e===sr)return void E(t);const a=()=>{r(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:r}=o,i=()=>e(n,a);r?r(t.el,a,i):i()}else a()},Q=(t,e)=>{let n;for(;t!==e;)n=d(t),r(t),t=n;r(e)},J=(t,e,n)=>{const{bum:r,scope:i,update:o,subTree:a,um:s}=t;r&&V(r),i.stop(),o&&(o.active=!1,K(a,t,e,n)),s&&Wn(s,e),Wn((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},tt=(t,e,n,r=!1,i=!1,o=0)=>{for(let a=o;a<t.length;a++)K(t[a],e,n,r,i)},et=t=>6&t.shapeFlag?et(t.component.subTree):128&t.shapeFlag?t.suspense.next():d(t.anchor||t.el),nt=(t,e,n)=>{null==t?e._vnode&&K(e._vnode,null,null,!0):y(e._vnode||null,t,e,null,null,null,n),gi(),e._vnode=t},rt={p:y,um:K,m:X,r:Z,mt:F,mc:T,pc:$,pbc:D,n:et,o:t};let it,ot;e&&([it,ot]=e(rt));return{render:nt,hydrate:it,createApp:Vn(nt,it)}}(t)}function Yn(t,e,n,r,i=!1){if(S(t))return void t.forEach(((t,o)=>Yn(t,e&&(S(e)?e[o]:e),n,r,i)));if(Ze(r)&&!i)return;const o=4&r.shapeFlag?Hr(r.component)||r.component.proxy:r.el,a=i?null:o,{i:s,r:l}=t,u=e&&e.r,c=s.refs===h?s.refs={}:s.refs,d=s.setupState;if(null!=u&&u!==l&&(A(u)?(c[u]=null,C(d,u)&&(d[u]=null)):pe(u)&&(u.value=null)),A(l)){const t=()=>{c[l]=a,C(d,l)&&(d[l]=a)};a?(t.id=-1,Wn(t,n)):t()}else if(pe(l)){const t=()=>{l.value=a};a?(t.id=-1,Wn(t,n)):t()}else M(l)&&Xr(l,s,12,[a,c])}function Xn(t,e,n,r=null){qr(t,e,7,[n,r])}function qn(t,e,n=!1){const r=t.children,i=e.children;if(S(r)&&S(i))for(let o=0;o<r.length;o++){const t=r[o];let e=i[o];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=i[o]=Ar(i[o]),e.el=t.el),n||qn(t,e))}}const Kn=t=>t&&(t.disabled||""===t.disabled),Zn=t=>"undefined"!=typeof SVGElement&&t instanceof SVGElement,Qn=(t,e)=>{const n=t&&t.to;if(A(n)){if(e){return e(n)}return null}return n};function Jn(t,e,n,{o:{insert:r},m:i},o=2){0===o&&r(t.targetAnchor,e,n);const{el:a,anchor:s,shapeFlag:l,children:u,props:c}=t,d=2===o;if(d&&r(a,e,n),(!d||Kn(c))&&16&l)for(let h=0;h<u.length;h++)i(u[h],e,n,2);d&&r(s,e,n)}const tr={__isTeleport:!0,process(t,e,n,r,i,o,a,s,l,u){const{mc:c,pc:d,pbc:h,o:{insert:f,querySelector:p,createText:g,createComment:v}}=u,m=Kn(e.props);let{shapeFlag:y,children:b,dynamicChildren:x}=e;if(null==t){const t=e.el=g(""),u=e.anchor=g("");f(t,n,r),f(u,n,r);const d=e.target=Qn(e.props,p),h=e.targetAnchor=g("");d&&(f(h,d),a=a||Zn(d));const v=(t,e)=>{16&y&&c(b,t,e,i,o,a,s,l)};m?v(n,u):d&&v(d,h)}else{e.el=t.el;const r=e.anchor=t.anchor,c=e.target=t.target,f=e.targetAnchor=t.targetAnchor,g=Kn(t.props),v=g?n:c,y=g?r:f;if(a=a||Zn(c),x?(h(t.dynamicChildren,x,v,i,o,a,s),qn(t,e,!0)):l||d(t,e,v,y,i,o,a,s,!1),m)g||Jn(e,n,r,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const t=e.target=Qn(e.props,p);t&&Jn(e,t,null,u,0)}else g&&Jn(e,c,f,u,1)}},remove(t,e,n,r,{um:i,o:{remove:o}},a){const{shapeFlag:s,children:l,anchor:u,targetAnchor:c,target:d,props:h}=t;if(d&&o(c),(a||!Kn(h))&&(o(u),16&s))for(let f=0;f<l.length;f++){const t=l[f];i(t,e,n,!0,!!t.dynamicChildren)}},move:Jn,hydrate:function(t,e,n,r,i,o,{o:{nextSibling:a,parentNode:s,querySelector:l}},u){const c=e.target=Qn(e.props,l);if(c){const l=c._lpa||c.firstChild;16&e.shapeFlag&&(Kn(e.props)?(e.anchor=u(a(t),e,s(t),n,r,i,o),e.targetAnchor=l):(e.anchor=a(t),e.targetAnchor=u(l,e,c,n,r,i,o)),c._lpa=e.targetAnchor&&a(e.targetAnchor))}return e.anchor&&a(e.anchor)}};function er(t,e){return function(t,e,n=!0,r=!1){const i=Te||Nr;if(i){const n=i.type;if("components"===t){const t=Yr(n);if(t&&(t===e||t===N(e)||t===G(N(e))))return n}const o=rr(i[t]||n[t],e)||rr(i.appContext[t],e);return!o&&r?n:o}}("components",t,!0,e)||t}const nr=Symbol();function rr(t,e){return t&&(t[e]||t[N(e)]||t[G(N(e))])}const ir=Symbol(void 0),or=Symbol(void 0),ar=Symbol(void 0),sr=Symbol(void 0),lr=[];let ur=null;function cr(t=!1){lr.push(ur=t?null:[])}let dr=1;function hr(t){dr+=t}function fr(t){return t.dynamicChildren=dr>0?ur||f:null,lr.pop(),ur=lr[lr.length-1]||null,dr>0&&ur&&ur.push(t),t}function pr(t,e,n,r,i,o){return fr(wr(t,e,n,r,i,o,!0))}function gr(t,e,n,r,i){return fr(Cr(t,e,n,r,i,!0))}function vr(t){return!!t&&!0===t.__v_isVNode}function mr(t,e){return t.type===e.type&&t.key===e.key}const yr="__vInternal",br=({key:t})=>null!=t?t:null,xr=({ref:t})=>null!=t?A(t)||pe(t)||M(t)?{i:Te,r:t}:t:null;function wr(t,e=null,n=null,r=0,i=null,o=(t===ir?0:1),a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&br(e),ref:e&&xr(e),scopeId:Pe,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return s?(_r(l,n),128&o&&t.normalize(l)):n&&(l.shapeFlag|=A(n)?8:16),dr>0&&!a&&ur&&(l.patchFlag>0||6&o)&&32!==l.patchFlag&&ur.push(l),l}const Cr=function(t,e=null,n=null,r=0,i=null,a=!1){t&&t!==nr||(t=ar);if(vr(t)){const r=Sr(t,e,!0);return n&&_r(r,n),r}s=t,M(s)&&"__vccOpts"in s&&(t=t.__vccOpts);var s;if(e){e=function(t){return t?le(t)||yr in t?b({},t):t:null}(e);let{class:t,style:n}=e;t&&!A(t)&&(e.class=u(t)),T(n)&&(le(n)&&!S(n)&&(n=b({},n)),e.style=o(n))}const l=A(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:T(t)?4:M(t)?2:0;return wr(t,e,n,r,i,l,a,!0)};function Sr(t,e,n=!1){const{props:r,ref:i,patchFlag:o,children:a}=t,s=e?Tr(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:s,key:s&&br(s),ref:e&&e.ref?n&&i?S(i)?i.concat(xr(e)):[i,xr(e)]:xr(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ir?-1===o?16:16|o:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Sr(t.ssContent),ssFallback:t.ssFallback&&Sr(t.ssFallback),el:t.el,anchor:t.anchor}}function kr(t=" ",e=0){return Cr(or,null,t,e)}function Er(t="",e=!1){return e?(cr(),gr(ar,null,t)):Cr(ar,null,t)}function Mr(t){return null==t||"boolean"==typeof t?Cr(ar):S(t)?Cr(ir,null,t.slice()):"object"==typeof t?Ar(t):Cr(or,null,String(t))}function Ar(t){return null===t.el||t.memo?t:Sr(t)}function _r(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if(S(e))n=16;else if("object"==typeof e){if(65&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),_r(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||yr in e?3===r&&Te&&(1===Te.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=Te}}else M(e)?(e={default:e,_ctx:Te},n=32):(e=String(e),64&r?(n=16,e=[kr(e)]):n=8);t.children=e,t.shapeFlag|=n}function Tr(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const t in r)if("class"===t)e.class!==r.class&&(e.class=u([e.class,r.class]));else if("style"===t)e.style=o([e.style,r.style]);else if(m(t)){const n=e[t],i=r[t];n!==i&&(e[t]=n?[].concat(n,i):i)}else""!==t&&(e[t]=r[t])}return e}function Pr(t,e,n,r){let i;const o=n&&n[r];if(S(t)||A(t)){i=new Array(t.length);for(let n=0,r=t.length;n<r;n++)i[n]=e(t[n],n,void 0,o&&o[n])}else if("number"==typeof t){i=new Array(t);for(let n=0;n<t;n++)i[n]=e(n+1,n,void 0,o&&o[n])}else if(T(t))if(t[Symbol.iterator])i=Array.from(t,((t,n)=>e(t,n,void 0,o&&o[n])));else{const n=Object.keys(t);i=new Array(n.length);for(let r=0,a=n.length;r<a;r++){const a=n[r];i[r]=e(t[a],a,r,o&&o[r])}}else i=[];return n&&(n[r]=i),i}function Ir(t,e,n={},r,i){if(Te.isCE)return Cr("slot","default"===e?null:{name:e},r&&r());let o=t[e];o&&o._c&&(o._d=!1),cr();const a=o&&Dr(o(n)),s=gr(ir,{key:n.key||`_${e}`},a||(r?r():[]),a&&1===t._?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),o&&o._c&&(o._d=!0),s}function Dr(t){return t.some((t=>!vr(t)||t.type!==ar&&!(t.type===ir&&!Dr(t.children))))?t:null}const Or=t=>t?Ur(t)?Hr(t)||t.proxy:Or(t.parent):null,Rr=b(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Or(t.parent),$root:t=>Or(t.root),$emit:t=>t.emit,$options:t=>xn(t),$forceUpdate:t=>()=>di(t.update),$nextTick:t=>ci.bind(t.proxy),$watch:t=>Ci.bind(t)}),Lr={get({_:t},e){const{ctx:n,setupState:r,data:i,props:o,accessCache:a,type:s,appContext:l}=t;let u;if("$"!==e[0]){const s=a[e];if(void 0!==s)switch(s){case 0:return r[e];case 1:return i[e];case 3:return n[e];case 2:return o[e]}else{if(r!==h&&C(r,e))return a[e]=0,r[e];if(i!==h&&C(i,e))return a[e]=1,i[e];if((u=t.propsOptions[0])&&C(u,e))return a[e]=2,o[e];if(n!==h&&C(n,e))return a[e]=3,n[e];vn&&(a[e]=4)}}const c=Rr[e];let d,f;return c?("$attrs"===e&&ht(t,0,e),c(t)):(d=s.__cssModules)&&(d=d[e])?d:n!==h&&C(n,e)?(a[e]=3,n[e]):(f=l.config.globalProperties,C(f,e)?f[e]:void 0)},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;if(i!==h&&C(i,e))i[e]=n;else if(r!==h&&C(r,e))r[e]=n;else if(C(t.props,e))return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},a){let s;return void 0!==n[a]||t!==h&&C(t,a)||e!==h&&C(e,a)||(s=o[0])&&C(s,a)||C(r,a)||C(Rr,a)||C(i.config.globalProperties,a)}},Br=Un();let Fr=0;let Nr=null;const zr=()=>Nr||Te,jr=t=>{Nr=t,t.scope.on()},Gr=()=>{Nr&&Nr.scope.off(),Nr=null};function Ur(t){return 4&t.vnode.shapeFlag}let $r=!1;function Vr(t,e,n){M(e)?t.render=e:T(e)&&(t.setupState=we(e)),Wr(t)}function Wr(t,e,n){const r=t.type;t.render||(t.render=r.render||p),jr(t),ct(),mn(t),dt(),Gr()}function Hr(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(we(ce(t.exposed)),{get:(e,n)=>n in e?e[n]:n in Rr?Rr[n](t):void 0}))}function Yr(t){return M(t)&&t.displayName||t.name}function Xr(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){Kr(o,e,n)}return i}function qr(t,e,n,r){if(M(t)){const i=Xr(t,e,n,r);return i&&P(i)&&i.catch((t=>{Kr(t,e,n)})),i}const i=[];for(let o=0;o<t.length;o++)i.push(qr(t[o],e,n,r));return i}function Kr(t,e,n,r=!0){e&&e.vnode;if(e){let r=e.parent;const i=e.proxy,o=n;for(;r;){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;r=r.parent}const a=e.appContext.config.errorHandler;if(a)return void Xr(a,null,10,[t,i,o])}!function(t,e,n,r=!0){console.error(t)}(t,0,0,r)}let Zr=!1,Qr=!1;const Jr=[];let ti=0;const ei=[];let ni=null,ri=0;const ii=[];let oi=null,ai=0;const si=Promise.resolve();let li=null,ui=null;function ci(t){const e=li||si;return t?e.then(this?t.bind(this):t):e}function di(t){Jr.length&&Jr.includes(t,Zr&&t.allowRecurse?ti+1:ti)||t===ui||(null==t.id?Jr.push(t):Jr.splice(function(t){let e=ti+1,n=Jr.length;for(;e<n;){const r=e+n>>>1;vi(Jr[r])<t?e=r+1:n=r}return e}(t.id),0,t),hi())}function hi(){Zr||Qr||(Qr=!0,li=si.then(mi))}function fi(t,e,n,r){S(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?r+1:r)||n.push(t),hi()}function pi(t,e=null){if(ei.length){for(ui=e,ni=[...new Set(ei)],ei.length=0,ri=0;ri<ni.length;ri++)ni[ri]();ni=null,ri=0,ui=null,pi(t,e)}}function gi(t){if(ii.length){const t=[...new Set(ii)];if(ii.length=0,oi)return void oi.push(...t);for(oi=t,oi.sort(((t,e)=>vi(t)-vi(e))),ai=0;ai<oi.length;ai++)oi[ai]();oi=null,ai=0}}const vi=t=>null==t.id?1/0:t.id;function mi(t){Qr=!1,Zr=!0,pi(t),Jr.sort(((t,e)=>vi(t)-vi(e)));try{for(ti=0;ti<Jr.length;ti++){const t=Jr[ti];t&&!1!==t.active&&Xr(t,null,14)}}finally{ti=0,Jr.length=0,gi(),Zr=!1,li=null,(Jr.length||ei.length||ii.length)&&mi(t)}}function yi(t,e){return wi(t,null,e)}const bi={};function xi(t,e,n){return wi(t,e,n)}function wi(t,e,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:a}=h){const s=Nr;let l,u,c=!1,d=!1;if(pe(t)?(l=()=>t.value,c=!!t._shallow):ae(t)?(l=()=>t,r=!0):S(t)?(d=!0,c=t.some(ae),l=()=>t.map((t=>pe(t)?t.value:ae(t)?ki(t):M(t)?Xr(t,s,2):void 0))):l=M(t)?e?()=>Xr(t,s,2):()=>{if(!s||!s.isUnmounted)return u&&u(),qr(t,s,3,[f])}:p,e&&r){const t=l;l=()=>ki(t())}let f=t=>{u=y.onStop=()=>{Xr(t,s,4)}},g=d?[]:bi;const v=()=>{if(y.active)if(e){const t=y.run();(r||c||(d?t.some(((t,e)=>$(t,g[e]))):$(t,g)))&&(u&&u(),qr(e,s,3,[t,g===bi?void 0:g,f]),g=t)}else y.run()};let m;v.allowRecurse=!!e,m="sync"===i?v:"post"===i?()=>Wn(v,s&&s.suspense):()=>{!s||s.isMounted?function(t){fi(t,ni,ei,ri)}(v):v()};const y=new at(l,m);return e?n?v():g=y.run():"post"===i?Wn(y.run.bind(y),s&&s.suspense):y.run(),()=>{y.stop(),s&&s.scope&&x(s.scope.effects,y)}}function Ci(t,e,n){const r=this.proxy,i=A(t)?t.includes(".")?Si(r,t):()=>r[t]:t.bind(r,r);let o;M(e)?o=e:(o=e.handler,n=e);const a=Nr;jr(this);const s=wi(i,o.bind(r),n);return a?jr(a):Gr(),s}function Si(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function ki(t,e=new Set){if(!T(t)||t.__v_skip)return t;if((e=e||new Set).has(t))return t;if(e.add(t),pe(t))ki(t.value,e);else if(S(t))for(let n=0;n<t.length;n++)ki(t[n],e);else if(E(t)||k(t))t.forEach((t=>{ki(t,e)}));else if(O(t))for(const n in t)ki(t[n],e);return t}function Ei(t,e,n){const r=arguments.length;return 2===r?T(e)&&!S(e)?vr(e)?Cr(t,null,[e]):Cr(t,e):Cr(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&vr(n)&&(n=[n]),Cr(t,e,n))}const Mi="3.2.10",Ai="undefined"!=typeof document?document:null,_i=new Map,Ti={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?Ai.createElementNS("http://www.w3.org/2000/svg",t):Ai.createElement(t,n?{is:n}:void 0);return"select"===t&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:t=>Ai.createTextNode(t),createComment:t=>Ai.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ai.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r){const i=n?n.previousSibling:e.lastChild;let o=_i.get(t);if(!o){const e=Ai.createElement("template");if(e.innerHTML=r?`<svg>${t}</svg>`:t,o=e.content,r){const t=o.firstChild;for(;t.firstChild;)o.appendChild(t.firstChild);o.removeChild(t)}_i.set(t,o)}return e.insertBefore(o.cloneNode(!0),n),[i?i.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};const Pi=/\s*!important$/;function Ii(t,e,n){if(S(n))n.forEach((n=>Ii(t,e,n)));else if(e.startsWith("--"))t.setProperty(e,n);else{const r=function(t,e){const n=Oi[e];if(n)return n;let r=N(e);if("filter"!==r&&r in t)return Oi[e]=r;r=G(r);for(let i=0;i<Di.length;i++){const n=Di[i]+r;if(n in t)return Oi[e]=n}return e}(t,e);Pi.test(n)?t.setProperty(j(r),n.replace(Pi,""),"important"):t[r]=n}}const Di=["Webkit","Moz","ms"],Oi={};const Ri="http://www.w3.org/1999/xlink";let Li=Date.now,Bi=!1;if("undefined"!=typeof window){Li()>document.createEvent("Event").timeStamp&&(Li=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);Bi=!!(t&&Number(t[1])<=53)}let Fi=0;const Ni=Promise.resolve(),zi=()=>{Fi=0};function ji(t,e,n,r,i=null){const o=t._vei||(t._vei={}),a=o[e];if(r&&a)a.value=r;else{const[n,s]=function(t){let e;if(Gi.test(t)){let n;for(e={};n=t.match(Gi);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[j(t.slice(2)),e]}(e);if(r){!function(t,e,n,r){t.addEventListener(e,n,r)}(t,n,o[e]=function(t,e){const n=t=>{const r=t.timeStamp||Li();(Bi||r>=n.attached-1)&&qr(function(t,e){if(S(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=(()=>Fi||(Ni.then(zi),Fi=Li()))(),n}(r,i),s)}else a&&(!function(t,e,n,r){t.removeEventListener(e,n,r)}(t,n,a,s),o[e]=void 0)}}const Gi=/(?:Once|Passive|Capture)$/;const Ui=/^on[a-z]/;const $i=(t,{slots:e})=>Ei($e,Xi(t),e);$i.displayName="Transition";const Vi={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Wi=$i.props=b({},$e.props,Vi),Hi=(t,e=[])=>{S(t)?t.forEach((t=>t(...e))):t&&t(...e)},Yi=t=>!!t&&(S(t)?t.some((t=>t.length>1)):t.length>1);function Xi(t){const e={};for(const b in t)b in Vi||(e[b]=t[b]);if(!1===t.css)return e;const{name:n="v",type:r,duration:i,enterFromClass:o=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:l=o,appearActiveClass:u=a,appearToClass:c=s,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,p=function(t){if(null==t)return null;if(T(t))return[qi(t.enter),qi(t.leave)];{const e=qi(t);return[e,e]}}(i),g=p&&p[0],v=p&&p[1],{onBeforeEnter:m,onEnter:y,onEnterCancelled:x,onLeave:w,onLeaveCancelled:C,onBeforeAppear:S=m,onAppear:k=y,onAppearCancelled:E=x}=e,M=(t,e,n)=>{Zi(t,e?c:s),Zi(t,e?u:a),n&&n()},A=(t,e)=>{Zi(t,f),Zi(t,h),e&&e()},_=t=>(e,n)=>{const i=t?k:y,a=()=>M(e,t,n);Hi(i,[e,a]),Qi((()=>{Zi(e,t?l:o),Ki(e,t?c:s),Yi(i)||to(e,r,g,a)}))};return b(e,{onBeforeEnter(t){Hi(m,[t]),Ki(t,o),Ki(t,a)},onBeforeAppear(t){Hi(S,[t]),Ki(t,l),Ki(t,u)},onEnter:_(!1),onAppear:_(!0),onLeave(t,e){const n=()=>A(t,e);Ki(t,d),io(),Ki(t,h),Qi((()=>{Zi(t,d),Ki(t,f),Yi(w)||to(t,r,v,n)})),Hi(w,[t,n])},onEnterCancelled(t){M(t,!1),Hi(x,[t])},onAppearCancelled(t){M(t,!0),Hi(E,[t])},onLeaveCancelled(t){A(t),Hi(C,[t])}})}function qi(t){return H(t)}function Ki(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function Zi(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function Qi(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let Ji=0;function to(t,e,n,r){const i=t._endId=++Ji,o=()=>{i===t._endId&&r()};if(n)return setTimeout(o,n);const{type:a,timeout:s,propCount:l}=eo(t,e);if(!a)return r();const u=a+"end";let c=0;const d=()=>{t.removeEventListener(u,h),o()},h=e=>{e.target===t&&++c>=l&&d()};setTimeout((()=>{c<l&&d()}),s+1),t.addEventListener(u,h)}function eo(t,e){const n=window.getComputedStyle(t),r=t=>(n[t]||"").split(", "),i=r("transitionDelay"),o=r("transitionDuration"),a=no(i,o),s=r("animationDelay"),l=r("animationDuration"),u=no(s,l);let c=null,d=0,h=0;"transition"===e?a>0&&(c="transition",d=a,h=o.length):"animation"===e?u>0&&(c="animation",d=u,h=l.length):(d=Math.max(a,u),c=d>0?a>u?"transition":"animation":null,h=c?"transition"===c?o.length:l.length:0);return{type:c,timeout:d,propCount:h,hasTransform:"transition"===c&&/\b(transform|all)(,|$)/.test(n.transitionProperty)}}function no(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map(((e,n)=>ro(e)+ro(t[n]))))}function ro(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function io(){return document.body.offsetHeight}const oo=new WeakMap,ao=new WeakMap,so={name:"TransitionGroup",props:b({},Wi,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=zr(),r=Ge();let i,o;return un((()=>{if(!i.length)return;const e=t.moveClass||`${t.name||"v"}-move`;if(!function(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach((t=>{t.split(/\s+/).forEach((t=>t&&r.classList.remove(t)))}));n.split(/\s+/).forEach((t=>t&&r.classList.add(t))),r.style.display="none";const i=1===e.nodeType?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=eo(r);return i.removeChild(r),o}(i[0].el,n.vnode.el,e))return;i.forEach(lo),i.forEach(uo);const r=i.filter(co);io(),r.forEach((t=>{const n=t.el,r=n.style;Ki(n,e),r.transform=r.webkitTransform=r.transitionDuration="";const i=n._moveCb=t=>{t&&t.target!==n||t&&!/transform$/.test(t.propertyName)||(n.removeEventListener("transitionend",i),n._moveCb=null,Zi(n,e))};n.addEventListener("transitionend",i)}))})),()=>{const a=ue(t),s=Xi(a);let l=a.tag||ir;i=o,o=e.default?qe(e.default()):[];for(let t=0;t<o.length;t++){const e=o[t];null!=e.key&&Xe(e,We(e,s,r,n))}if(i)for(let t=0;t<i.length;t++){const e=i[t];Xe(e,We(e,s,r,n)),oo.set(e,e.el.getBoundingClientRect())}return Cr(l,null,o)}}};function lo(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function uo(t){ao.set(t,t.el.getBoundingClientRect())}function co(t){const e=oo.get(t),n=ao.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const e=t.el.style;return e.transform=e.webkitTransform=`translate(${r}px,${i}px)`,e.transitionDuration="0s",t}}const ho={beforeMount(t,{value:e},{transition:n}){t._vod="none"===t.style.display?"":t.style.display,n&&e?n.beforeEnter(t):fo(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),fo(t,!0),r.enter(t)):r.leave(t,(()=>{fo(t,!1)})):fo(t,e))},beforeUnmount(t,{value:e}){fo(t,e)}};function fo(t,e){t.style.display=e?t._vod:"none"}const po=b({patchProp:(t,e,n,o,a=!1,s,l,u,c)=>{"class"===e?function(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}(t,o,a):"style"===e?function(t,e,n){const r=t.style,i=r.display;if(n)if(A(n))e!==n&&(r.cssText=n);else{for(const t in n)Ii(r,t,n[t]);if(e&&!A(e))for(const t in e)null==n[t]&&Ii(r,t,"")}else t.removeAttribute("style");"_vod"in t&&(r.display=i)}(t,n,o):m(e)?y(e)||ji(t,e,0,o,l):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):function(t,e,n,r){if(r)return"innerHTML"===e||"textContent"===e||!!(e in t&&Ui.test(e)&&M(n));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if(Ui.test(e)&&A(n))return!1;return e in t}(t,e,o,a))?function(t,e,n,r,o,a,s){if("innerHTML"===e||"textContent"===e)return r&&s(r,o,a),void(t[e]=null==n?"":n);if("value"===e&&"PROGRESS"!==t.tagName){t._value=n;const r=null==n?"":n;return t.value!==r&&(t.value=r),void(null==n&&t.removeAttribute(e))}if(""===n||null==n){const r=typeof t[e];if("boolean"===r)return void(t[e]=i(n));if(null==n&&"string"===r)return t[e]="",void t.removeAttribute(e);if("number"===r){try{t[e]=0}catch(l){}return void t.removeAttribute(e)}}try{t[e]=n}catch(u){}}(t,e,o,s,l,u,c):("true-value"===e?t._trueValue=o:"false-value"===e&&(t._falseValue=o),function(t,e,n,o,a){if(o&&e.startsWith("xlink:"))null==n?t.removeAttributeNS(Ri,e.slice(6,e.length)):t.setAttributeNS(Ri,e,n);else{const o=r(e);null==n||o&&!i(n)?t.removeAttribute(e):t.setAttribute(e,o?"":n)}}(t,e,o,a))}},Ti);let go;const vo=(...t)=>{const e=(go||(go=Hn(po))).createApp(...t),{mount:n}=e;return e.mount=t=>{const r=function(t){if(A(t)){return document.querySelector(t)}return t}
/*!
  * vue-router v4.0.11
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */(t);if(!r)return;const i=e._component;M(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};const mo="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,yo=t=>mo?Symbol(t):"_vr_"+t,bo=yo("rvlm"),xo=yo("rvd"),wo=yo("r"),Co=yo("rl"),So=yo("rvl"),ko="undefined"!=typeof window;const Eo=Object.assign;function Mo(t,e){const n={};for(const r in e){const i=e[r];n[r]=Array.isArray(i)?i.map(t):t(i)}return n}const Ao=()=>{},_o=/\/$/;function To(t,e,n="/"){let r,i={},o="",a="";const s=e.indexOf("?"),l=e.indexOf("#",s>-1?s:0);return s>-1&&(r=e.slice(0,s),o=e.slice(s+1,l>-1?l:e.length),i=t(o)),l>-1&&(r=r||e.slice(0,l),a=e.slice(l,e.length)),r=function(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let i,o,a=n.length-1;for(i=0;i<r.length;i++)if(o=r[i],1!==a&&"."!==o){if(".."!==o)break;a--}return n.slice(0,a).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}(null!=r?r:e,n),{fullPath:r+(o&&"?")+o+a,path:r,query:i,hash:a}}function Po(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function Io(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Do(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Oo(t[n],e[n]))return!1;return!0}function Oo(t,e){return Array.isArray(t)?Ro(t,e):Array.isArray(e)?Ro(e,t):t===e}function Ro(t,e){return Array.isArray(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}var Lo,Bo,Fo,No;function zo(t){if(!t)if(ko){const e=document.querySelector("base");t=(t=e&&e.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),t.replace(_o,"")}(Bo=Lo||(Lo={})).pop="pop",Bo.push="push",(No=Fo||(Fo={})).back="back",No.forward="forward",No.unknown="";const jo=/^[^#]+#/;function Go(t,e){return t.replace(jo,"#")+e}const Uo=()=>({left:window.pageXOffset,top:window.pageYOffset});function $o(t){let e;if("el"in t){const n=t.el,r="string"==typeof n&&n.startsWith("#"),i="string"==typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=function(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function Vo(t,e){return(history.state?history.state.position-e:-1)+t}const Wo=new Map;function Ho(t,e){const{pathname:n,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){let e=i.includes(t.slice(o))?t.slice(o).length:1,n=i.slice(e);return"/"!==n[0]&&(n="/"+n),Po(n,"")}return Po(n,t)+r+i}function Yo(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Uo():null}}function Xo(t){const{history:e,location:n}=window,r={value:Ho(t,n)},i={value:e.state};function o(r,o,a){const s=t.indexOf("#"),l=s>-1?(n.host&&document.querySelector("base")?t:t.slice(s))+r:location.protocol+"//"+location.host+t+r;try{e[a?"replaceState":"pushState"](o,"",l),i.value=o}catch(u){console.error(u),n[a?"replace":"assign"](l)}}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:function(t,n){const a=Eo({},i.value,e.state,{forward:t,scroll:Uo()});o(a.current,a,!0),o(t,Eo({},Yo(r.value,t,null),{position:a.position+1},n),!1),r.value=t},replace:function(t,n){o(t,Eo({},e.state,Yo(i.value.back,t,i.value.forward,!0),n,{position:i.value.position}),!0),r.value=t}}}function qo(t){const e=Xo(t=zo(t)),n=function(t,e,n,r){let i=[],o=[],a=null;const s=({state:o})=>{const s=Ho(t,location),l=n.value,u=e.value;let c=0;if(o){if(n.value=s,e.value=o,a&&a===l)return void(a=null);c=u?o.position-u.position:0}else r(s);i.forEach((t=>{t(n.value,l,{delta:c,type:Lo.pop,direction:c?c>0?Fo.forward:Fo.back:Fo.unknown})}))};function l(){const{history:t}=window;t.state&&t.replaceState(Eo({},t.state,{scroll:Uo()}),"")}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",l),{pauseListeners:function(){a=n.value},listen:function(t){i.push(t);const e=()=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)};return o.push(e),e},destroy:function(){for(const t of o)t();o=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",l)}}}(t,e.state,e.location,e.replace);const r=Eo({location:"",base:t,go:function(t,e=!0){e||n.pauseListeners(),history.go(t)},createHref:Go.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function Ko(t){return(t=location.host?t||location.pathname+location.search:"").includes("#")||(t+="#"),qo(t)}function Zo(t){return"string"==typeof t||"symbol"==typeof t}const Qo={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Jo=yo("nf");var ta,ea;function na(t,e){return Eo(new Error,{type:t,[Jo]:!0},e)}function ra(t,e){return t instanceof Error&&Jo in t&&(null==e||!!(t.type&e))}(ea=ta||(ta={}))[ea.aborted=4]="aborted",ea[ea.cancelled=8]="cancelled",ea[ea.duplicated=16]="duplicated";const ia={sensitive:!1,strict:!1,start:!0,end:!0},oa=/[.+*?^${}()[\]/\\]/g;function aa(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function sa(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const t=aa(r[n],i[n]);if(t)return t;n++}return i.length-r.length}const la={type:0,value:""},ua=/[a-zA-Z0-9_]/;function ca(t,e,n){const r=function(t,e){const n=Eo({},ia,e),r=[];let i=n.start?"^":"";const o=[];for(const l of t){const t=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let e=0;e<l.length;e++){const r=l[e];let a=40+(n.sensitive?.25:0);if(0===r.type)e||(i+="/"),i+=r.value.replace(oa,"\\$&"),a+=40;else if(1===r.type){const{value:t,repeatable:n,optional:u,regexp:c}=r;o.push({name:t,repeatable:n,optional:u});const d=c||"[^/]+?";if("[^/]+?"!==d){a+=10;try{new RegExp(`(${d})`)}catch(s){throw new Error(`Invalid custom RegExp for param "${t}" (${d}): `+s.message)}}let h=n?`((?:${d})(?:/(?:${d}))*)`:`(${d})`;e||(h=u&&l.length<2?`(?:/${h})`:"/"+h),u&&(h+="?"),i+=h,a+=20,u&&(a+=-8),n&&(a+=-20),".*"===d&&(a+=-50)}t.push(a)}r.push(t)}if(n.strict&&n.end){const t=r.length-1;r[t][r[t].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");return{re:a,score:r,keys:o,parse:function(t){const e=t.match(a),n={};if(!e)return null;for(let r=1;r<e.length;r++){const t=e[r]||"",i=o[r-1];n[i.name]=t&&i.repeatable?t.split("/"):t}return n},stringify:function(e){let n="",r=!1;for(const i of t){r&&n.endsWith("/")||(n+="/"),r=!1;for(const t of i)if(0===t.type)n+=t.value;else if(1===t.type){const{value:o,repeatable:a,optional:s}=t,l=o in e?e[o]:"";if(Array.isArray(l)&&!a)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const u=Array.isArray(l)?l.join("/"):l;if(!u){if(!s)throw new Error(`Missing required param "${o}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=u}}return n}}}(function(t){if(!t)return[[]];if("/"===t)return[[la]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${u}": ${t}`)}let n=0,r=n;const i=[];let o;function a(){o&&i.push(o),o=[]}let s,l=0,u="",c="";function d(){u&&(0===n?o.push({type:0,value:u}):1===n||2===n||3===n?(o.length>1&&("*"===s||"+"===s)&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:c,repeatable:"*"===s||"+"===s,optional:"*"===s||"?"===s})):e("Invalid state to consume buffer"),u="")}function h(){u+=s}for(;l<t.length;)if(s=t[l++],"\\"!==s||2===n)switch(n){case 0:"/"===s?(u&&d(),a()):":"===s?(d(),n=1):h();break;case 4:h(),n=r;break;case 1:"("===s?n=2:ua.test(s)?h():(d(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&l--);break;case 2:")"===s?"\\"==c[c.length-1]?c=c.slice(0,-1)+s:n=3:c+=s;break;case 3:d(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&l--,c="";break;default:e("Unknown state")}else r=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${u}"`),d(),a(),i}(t.path),n),i=Eo(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function da(t,e){const n=[],r=new Map;function i(t,n,r){const s=!r,l=function(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:ha(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}(t);l.aliasOf=r&&r.record;const u=ga(e,t),c=[l];if("alias"in t){const e="string"==typeof t.alias?[t.alias]:t.alias;for(const t of e)c.push(Eo({},l,{components:r?r.record.components:l.components,path:t,aliasOf:r?r.record:l}))}let d,h;for(const e of c){const{path:c}=e;if(n&&"/"!==c[0]){const t=n.record.path,r="/"===t[t.length-1]?"":"/";e.path=n.record.path+(c&&r+c)}if(d=ca(e,n,u),r?r.alias.push(d):(h=h||d,h!==d&&h.alias.push(d),s&&t.name&&!fa(d)&&o(t.name)),"children"in l){const t=l.children;for(let e=0;e<t.length;e++)i(t[e],d,r&&r.children[e])}r=r||d,a(d)}return h?()=>{o(h)}:Ao}function o(t){if(Zo(t)){const e=r.get(t);e&&(r.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(o),e.alias.forEach(o))}else{const e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&r.delete(t.record.name),t.children.forEach(o),t.alias.forEach(o))}}function a(t){let e=0;for(;e<n.length&&sa(t,n[e])>=0;)e++;n.splice(e,0,t),t.record.name&&!fa(t)&&r.set(t.record.name,t)}return e=ga({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>i(t))),{addRoute:i,resolve:function(t,e){let i,o,a,s={};if("name"in t&&t.name){if(i=r.get(t.name),!i)throw na(1,{location:t});a=i.record.name,s=Eo(function(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}(e.params,i.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params),o=i.stringify(s)}else if("path"in t)o=t.path,i=n.find((t=>t.re.test(o))),i&&(s=i.parse(o),a=i.record.name);else{if(i=e.name?r.get(e.name):n.find((t=>t.re.test(e.path))),!i)throw na(1,{location:t,currentLocation:e});a=i.record.name,s=Eo({},e.params,t.params),o=i.stringify(s)}const l=[];let u=i;for(;u;)l.unshift(u.record),u=u.parent;return{name:a,path:o,params:s,matched:l,meta:pa(l)}},removeRoute:o,getRoutes:function(){return n},getRecordMatcher:function(t){return r.get(t)}}}function ha(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]="boolean"==typeof n?n:n[r];return e}function fa(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function pa(t){return t.reduce(((t,e)=>Eo(t,e.meta)),{})}function ga(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const va=/#/g,ma=/&/g,ya=/\//g,ba=/=/g,xa=/\?/g,wa=/\+/g,Ca=/%5B/g,Sa=/%5D/g,ka=/%5E/g,Ea=/%60/g,Ma=/%7B/g,Aa=/%7C/g,_a=/%7D/g,Ta=/%20/g;function Pa(t){return encodeURI(""+t).replace(Aa,"|").replace(Ca,"[").replace(Sa,"]")}function Ia(t){return Pa(t).replace(wa,"%2B").replace(Ta,"+").replace(va,"%23").replace(ma,"%26").replace(Ea,"`").replace(Ma,"{").replace(_a,"}").replace(ka,"^")}function Da(t){return null==t?"":function(t){return Pa(t).replace(va,"%23").replace(xa,"%3F")}(t).replace(ya,"%2F")}function Oa(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function Ra(t){const e={};if(""===t||"?"===t)return e;const n=("?"===t[0]?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const t=n[r].replace(wa," "),i=t.indexOf("="),o=Oa(i<0?t:t.slice(0,i)),a=i<0?null:Oa(t.slice(i+1));if(o in e){let t=e[o];Array.isArray(t)||(t=e[o]=[t]),t.push(a)}else e[o]=a}return e}function La(t){let e="";for(let n in t){const r=t[n];if(n=Ia(n).replace(ba,"%3D"),null==r){void 0!==r&&(e+=(e.length?"&":"")+n);continue}(Array.isArray(r)?r.map((t=>t&&Ia(t))):[r&&Ia(r)]).forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function Ba(t){const e={};for(const n in t){const r=t[n];void 0!==r&&(e[n]=Array.isArray(r)?r.map((t=>null==t?null:""+t)):null==r?r:""+r)}return e}function Fa(){let t=[];return{add:function(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}},list:()=>t,reset:function(){t=[]}}}function Na(t,e,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((a,s)=>{const l=t=>{var l;!1===t?s(na(4,{from:n,to:e})):t instanceof Error?s(t):"string"==typeof(l=t)||l&&"object"==typeof l?s(na(2,{from:e,to:t})):(o&&r.enterCallbacks[i]===o&&"function"==typeof t&&o.push(t),a())},u=t.call(r&&r.instances[i],e,n,l);let c=Promise.resolve(u);t.length<3&&(c=c.then(l)),c.catch((t=>s(t)))}))}function za(t,e,n,r){const i=[];for(const a of t)for(const t in a.components){let s=a.components[t];if("beforeRouteEnter"===e||a.instances[t])if("object"==typeof(o=s)||"displayName"in o||"props"in o||"__vccOpts"in o){const o=(s.__vccOpts||s)[e];o&&i.push(Na(o,n,r,a,t))}else{let o=s();i.push((()=>o.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${a.path}"`));const o=(s=i).__esModule||mo&&"Module"===s[Symbol.toStringTag]?i.default:i;var s;a.components[t]=o;const l=(o.__vccOpts||o)[e];return l&&Na(l,n,r,a,t)()}))))}}var o;return i}function ja(t){const e=je(wo),n=je(Co),r=Ee((()=>e.resolve(be(t.to)))),i=Ee((()=>{const{matched:t}=r.value,{length:e}=t,i=t[e-1],o=n.matched;if(!i||!o.length)return-1;const a=o.findIndex(Io.bind(null,i));if(a>-1)return a;const s=Ua(t[e-2]);return e>1&&Ua(i)===s&&o[o.length-1].path!==s?o.findIndex(Io.bind(null,t[e-2])):a})),o=Ee((()=>i.value>-1&&function(t,e){for(const n in e){const r=e[n],i=t[n];if("string"==typeof r){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some(((t,e)=>t!==i[e])))return!1}return!0}(n.params,r.value.params))),a=Ee((()=>i.value>-1&&i.value===n.matched.length-1&&Do(n.params,r.value.params)));return{route:r,href:Ee((()=>r.value.href)),isActive:o,isExactActive:a,navigate:function(n={}){return function(t){if(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)return;if(t.defaultPrevented)return;if(void 0!==t.button&&0!==t.button)return;if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}t.preventDefault&&t.preventDefault();return!0}(n)?e[be(t.replace)?"replace":"push"](be(t.to)).catch(Ao):Promise.resolve()}}}const Ga=Ke({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ja,setup(t,{slots:e}){const n=re(ja(t)),{options:r}=je(wo),i=Ee((()=>({[$a(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[$a(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const r=e.default&&e.default(n);return t.custom?r:Ei("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}});function Ua(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const $a=(t,e,n)=>null!=t?t:null!=e?e:n;function Va(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const Wa=Ke({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:n}){const r=je(So),i=Ee((()=>t.route||r.value)),o=je(xo,0),a=Ee((()=>i.value.matched[o]));ze(xo,o+1),ze(bo,a),ze(So,i);const s=ge();return xi((()=>[s.value,a.value,t.name]),(([t,e,n],[r,i,o])=>{e&&(e.instances[n]=t,i&&i!==e&&t&&t===r&&(e.leaveGuards.size||(e.leaveGuards=i.leaveGuards),e.updateGuards.size||(e.updateGuards=i.updateGuards))),!t||!e||i&&Io(e,i)&&r||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const r=i.value,o=a.value,l=o&&o.components[t.name],u=t.name;if(!l)return Va(n.default,{Component:l,route:r});const c=o.props[t.name],d=c?!0===c?r.params:"function"==typeof c?c(r):c:null,h=Ei(l,Eo({},d,e,{onVnodeUnmounted:t=>{t.component.isUnmounted&&(o.instances[u]=null)},ref:s}));return Va(n.default,{Component:h,route:r})||h}}});function Ha(t){const e=da(t.routes,t),n=t.parseQuery||Ra,r=t.stringifyQuery||La,i=t.history,o=Fa(),a=Fa(),s=Fa(),l=ve(Qo);let u=Qo;ko&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Mo.bind(null,(t=>""+t)),d=Mo.bind(null,Da),h=Mo.bind(null,Oa);function f(t,o){if(o=Eo({},o||l.value),"string"==typeof t){const r=To(n,t,o.path),a=e.resolve({path:r.path},o),s=i.createHref(r.fullPath);return Eo(r,a,{params:h(a.params),hash:Oa(r.hash),redirectedFrom:void 0,href:s})}let a;if("path"in t)a=Eo({},t,{path:To(n,t.path,o.path).path});else{const e=Eo({},t.params);for(const t in e)null==e[t]&&delete e[t];a=Eo({},t,{params:d(t.params)}),o.params=d(o.params)}const s=e.resolve(a,o),u=t.hash||"";s.params=c(h(s.params));const f=function(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}(r,Eo({},t,{hash:(p=u,Pa(p).replace(Ma,"{").replace(_a,"}").replace(ka,"^")),path:s.path}));var p;const g=i.createHref(f);return Eo({fullPath:f,hash:u,query:r===La?Ba(t.query):t.query||{}},s,{redirectedFrom:void 0,href:g})}function p(t){return"string"==typeof t?To(n,t,l.value.path):Eo({},t)}function g(t,e){if(u!==t)return na(8,{from:e,to:t})}function v(t){return y(t)}function m(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let r="function"==typeof n?n(t):n;return"string"==typeof r&&(r=r.includes("?")||r.includes("#")?r=p(r):{path:r},r.params={}),Eo({query:t.query,hash:t.hash,params:t.params},r)}}function y(t,e){const n=u=f(t),i=l.value,o=t.state,a=t.force,s=!0===t.replace,c=m(n);if(c)return y(Eo(p(c),{state:o,force:a,replace:s}),e||n);const d=n;let h;return d.redirectedFrom=e,!a&&function(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Io(e.matched[r],n.matched[i])&&Do(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}(r,i,n)&&(h=na(16,{to:d,from:i}),P(i,i,!0,!1)),(h?Promise.resolve(h):x(d,i)).catch((t=>ra(t)?t:_(t,d,i))).then((t=>{if(t){if(ra(t,2))return y(Eo(p(t.to),{state:o,force:a,replace:s}),e||d)}else t=C(d,i,!0,s,o);return w(d,i,t),t}))}function b(t,e){const n=g(t,e);return n?Promise.reject(n):Promise.resolve()}function x(t,e){let n;const[r,i,s]=function(t,e){const n=[],r=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let a=0;a<o;a++){const o=e.matched[a];o&&(t.matched.find((t=>Io(t,o)))?r.push(o):n.push(o));const s=t.matched[a];s&&(e.matched.find((t=>Io(t,s)))||i.push(s))}return[n,r,i]}(t,e);n=za(r.reverse(),"beforeRouteLeave",t,e);for(const o of r)o.leaveGuards.forEach((r=>{n.push(Na(r,t,e))}));const l=b.bind(null,t,e);return n.push(l),Ya(n).then((()=>{n=[];for(const r of o.list())n.push(Na(r,t,e));return n.push(l),Ya(n)})).then((()=>{n=za(i,"beforeRouteUpdate",t,e);for(const r of i)r.updateGuards.forEach((r=>{n.push(Na(r,t,e))}));return n.push(l),Ya(n)})).then((()=>{n=[];for(const r of t.matched)if(r.beforeEnter&&!e.matched.includes(r))if(Array.isArray(r.beforeEnter))for(const i of r.beforeEnter)n.push(Na(i,t,e));else n.push(Na(r.beforeEnter,t,e));return n.push(l),Ya(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=za(s,"beforeRouteEnter",t,e),n.push(l),Ya(n)))).then((()=>{n=[];for(const r of a.list())n.push(Na(r,t,e));return n.push(l),Ya(n)})).catch((t=>ra(t,8)?t:Promise.reject(t)))}function w(t,e,n){for(const r of s.list())r(t,e,n)}function C(t,e,n,r,o){const a=g(t,e);if(a)return a;const s=e===Qo,u=ko?history.state:{};n&&(r||s?i.replace(t.fullPath,Eo({scroll:s&&u&&u.scroll},o)):i.push(t.fullPath,o)),l.value=t,P(t,e,n,s),T()}let S;function k(){S=i.listen(((t,e,n)=>{const r=f(t),o=m(r);if(o)return void y(Eo(o,{replace:!0}),r).catch(Ao);u=r;const a=l.value;var s,c;ko&&(s=Vo(a.fullPath,n.delta),c=Uo(),Wo.set(s,c)),x(r,a).catch((t=>ra(t,12)?t:ra(t,2)?(y(t.to,r).then((t=>{ra(t,20)&&!n.delta&&n.type===Lo.pop&&i.go(-1,!1)})).catch(Ao),Promise.reject()):(n.delta&&i.go(-n.delta,!1),_(t,r,a)))).then((t=>{(t=t||C(r,a,!1))&&(n.delta?i.go(-n.delta,!1):n.type===Lo.pop&&ra(t,20)&&i.go(-1,!1)),w(r,a,t)})).catch(Ao)}))}let E,M=Fa(),A=Fa();function _(t,e,n){T(t);const r=A.list();return r.length?r.forEach((r=>r(t,e,n))):console.error(t),Promise.reject(t)}function T(t){E||(E=!0,k(),M.list().forEach((([e,n])=>t?n(t):e())),M.reset())}function P(e,n,r,i){const{scrollBehavior:o}=t;if(!ko||!o)return Promise.resolve();const a=!r&&function(t){const e=Wo.get(t);return Wo.delete(t),e}(Vo(e.fullPath,0))||(i||!r)&&history.state&&history.state.scroll||null;return ci().then((()=>o(e,n,a))).then((t=>t&&$o(t))).catch((t=>_(t,e,n)))}const I=t=>i.go(t);let D;const O=new Set;return{currentRoute:l,addRoute:function(t,n){let r,i;return Zo(t)?(r=e.getRecordMatcher(t),i=n):i=t,e.addRoute(i,r)},removeRoute:function(t){const n=e.getRecordMatcher(t);n&&e.removeRoute(n)},hasRoute:function(t){return!!e.getRecordMatcher(t)},getRoutes:function(){return e.getRoutes().map((t=>t.record))},resolve:f,options:t,push:v,replace:function(t){return v(Eo(p(t),{replace:!0}))},go:I,back:()=>I(-1),forward:()=>I(1),beforeEach:o.add,beforeResolve:a.add,afterEach:s.add,onError:A.add,isReady:function(){return E&&l.value!==Qo?Promise.resolve():new Promise(((t,e)=>{M.add([t,e])}))},install(t){t.component("RouterLink",Ga),t.component("RouterView",Wa),t.config.globalProperties.$router=this,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>be(l)}),ko&&!D&&l.value===Qo&&(D=!0,v(i.location).catch((t=>{})));const e={};for(const r in Qo)e[r]=Ee((()=>l.value[r]));t.provide(wo,this),t.provide(Co,re(e)),t.provide(So,l);const n=t.unmount;O.add(t),t.unmount=function(){O.delete(t),O.size<1&&(u=Qo,S&&S(),l.value=Qo,D=!1,E=!1),n()}}}}function Ya(t){return t.reduce(((t,e)=>t.then((()=>e()))),Promise.resolve())}function Xa(){return je(wo)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qa=function(t,e){return(qa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Ka(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}qa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Za=function(){return(Za=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Qa(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Ja(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(e){o(e)}}function s(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))}function ts(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var es=Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function ns(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rs(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function is(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function os(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function as(t){return this instanceof as?(this.v=t,this):new as(t)}var ss=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};var ls=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",__extends:Ka,get __assign(){return Za},__rest:Qa,__decorate:function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},__param:function(t,e){return function(n,r){e(n,r,t)}},__metadata:function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__awaiter:Ja,__generator:ts,__createBinding:es,__exportStar:function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||es(e,t,n)},__values:ns,__read:rs,__spread:function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(rs(arguments[e]));return t},__spreadArrays:is,__spreadArray:os,__await:as,__asyncGenerator:function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{(n=i[t](e)).value instanceof as?Promise.resolve(n.value.v).then(l,u):c(o[0][2],n)}catch(r){c(o[0][3],r)}var n}function l(t){s("next",t)}function u(t){s("throw",t)}function c(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}},__asyncDelegator:function(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:as(t[r](e)),done:"return"===r}:i?i(e):e}:i}},__asyncValues:function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=ns(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,i,(e=t[n](e)).done,e.value)}))}}},__makeTemplateObject:function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__importStar:function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&es(e,t,n);return ss(e,t),e},__importDefault:function(t){return t&&t.__esModule?t:{default:t}},__classPrivateFieldGet:function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)},__classPrivateFieldSet:function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}}),us=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)},cs=function(t,e){return!!us(t)&&t.indexOf(e)>-1},ds=function(t,e){if(!us(t))return t;for(var n=[],r=0;r<t.length;r++){var i=t[r];e(i,r)&&n.push(i)}return n},hs=function(t,e){return void 0===e&&(e=[]),ds(t,(function(t){return!cs(e,t)}))},fs={}.toString,ps=function(t,e){return fs.call(t)==="[object "+e+"]"},gs=function(t){return ps(t,"Function")},vs=function(t){return null==t},ms=function(t){return Array.isArray?Array.isArray(t):ps(t,"Array")},ys=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e};function bs(t,e){if(t)if(ms(t))for(var n=0,r=t.length;n<r&&!1!==e(t[n],n);n++);else if(ys(t))for(var i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break}var xs=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return bs(t,(function(n,r){gs(t)&&"prototype"===r||e.push(r)})),e};function ws(t,e){var n=xs(e),r=n.length;if(vs(t))return!r;for(var i=0;i<r;i+=1){var o=n[i];if(e[o]!==t[o]||!(o in t))return!1}return!0}var Cs=function(t){return"object"==typeof t&&null!==t},Ss=function(t){if(!Cs(t)||!ps(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};function ks(t,e){if(!ms(t))return null;var n;if(gs(e)&&(n=e),Ss(e)&&(n=function(t){return ws(t,e)}),n)for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r];return null}function Es(t,e,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++)if(e(t[r],r))return r;return-1}var Ms=function(t,e){for(var n=null,r=0;r<t.length;r++){var i=t[r][e];if(!vs(i)){n=ms(i)?i[0]:i;break}}return n},As=function(t){if(!ms(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e},_s=function(t,e){if(void 0===e&&(e=[]),ms(t))for(var n=0;n<t.length;n+=1)_s(t[n],e);else e.push(t);return e},Ts=function(t){if(ms(t))return t.reduce((function(t,e){return Math.max(t,e)}),t[0])},Ps=function(t){if(ms(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])},Is=function(t){var e=t.filter((function(t){return!isNaN(t)}));if(!e.length)return{min:0,max:0};if(ms(t[0])){for(var n=[],r=0;r<t.length;r++)n=n.concat(t[r]);e=n}var i=Ts(e);return{min:Ps(e),max:i}},Ds=Array.prototype,Os=Ds.splice,Rs=Ds.indexOf,Ls=Array.prototype.splice,Bs=function(t,e){if(!us(t))return[];for(var n=t?e.length:0,r=n-1;n--;){var i=void 0,o=e[n];n!==r&&o===i||(i=o,Ls.call(t,o,1))}return t},Fs=function(t,e,n){if(!ms(t)&&!Ss(t))return t;var r=n;return bs(t,(function(t,n){r=e(r,t,n)})),r},Ns=function(t,e){var n=[];if(!us(t))return n;for(var r=-1,i=[],o=t.length;++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Bs(t,i),n},zs=function(t){return ps(t,"String")};function js(t,e){var n;if(gs(e))n=function(t,n){return e(t)-e(n)};else{var r=[];zs(e)?r.push(e):ms(e)&&(r=e),n=function(t,e){for(var n=0;n<r.length;n+=1){var i=r[n];if(t[i]>e[i])return 1;if(t[i]<e[i])return-1}return 0}}return t.sort(n),t}function Gs(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var o=t[r];e.has(o)||(n.push(o),e.set(o,!0))}return n}var Us=function(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i][e];if(!vs(o)){ms(o)||(o=[o]);for(var a=0;a<o.length;a++){var s=o[a];r[s]||(n.push(s),r[s]=!0)}}}return n};function $s(t){if(us(t))return t[0]}function Vs(t){if(us(t)){return t[t.length-1]}}var Ws=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0},Hs=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return!0;return!1},Ys=Object.prototype.hasOwnProperty;function Xs(t,e){if(!e||!ms(t))return{};for(var n,r={},i=gs(e)?e:function(t){return t[e]},o=0;o<t.length;o++){var a=t[o];n=i(a),Ys.call(r,n)?r[n].push(a):r[n]=[a]}return r}function qs(t,e){if(!e)return{0:t};if(!gs(e)){var n=ms(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",r=0,i=n.length;r<i;r++)e+=t[n[r]]&&t[n[r]].toString();return e}}return Xs(t,e)}var Ks=function(t,e){if(!e)return[t];var n=qs(t,e),r=[];for(var i in n)r.push(n[i]);return r};function Zs(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n}var Qs={};var Js=function(t,e,n){return t<e?e:t>n?n:t},tl=function(t,e){var n=e.toString(),r=n.indexOf(".");if(-1===r)return Math.round(t);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))},el=function(t){return ps(t,"Number")},nl=Number.isInteger?Number.isInteger:function(t){return el(t)&&t%1==0};function rl(t,e,n){return void 0===n&&(n=1e-5),Math.abs(t-e)<n}var il=function(t,e){if(ms(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var o=t[i],a=gs(e)?e(o):o[e];a>r&&(n=o,r=a)}return n}},ol=function(t,e){if(ms(t)){for(var n,r=1/0,i=0;i<t.length;i++){var o=t[i],a=gs(e)?e(o):o[e];a<r&&(n=o,r=a)}return n}},al=function(t,e){return(t%e+e)%e},sl=180/Math.PI,ll=parseInt,ul=Math.PI/180,cl=function(t){return ul*t},dl=function(t,e){return t.hasOwnProperty(e)},hl=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return bs(t,(function(n,r){gs(t)&&"prototype"===r||e.push(n)})),e},fl=function(t){return vs(t)?"":t.toString()},pl=function(t){return fl(t).toLowerCase()};function gl(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]})):t}var vl=function(t){var e=fl(t);return e.charAt(0).toUpperCase()+e.substring(1)},ml={}.toString,yl=function(t){return ml.call(t).replace(/^\[object /,"").replace(/]$/,"")},bl=function(t){return ps(t,"Boolean")},xl=function(t){return ps(t,"Date")};var wl=function(t){return null===t},Cl=Object.prototype,Sl=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Cl)},kl=function(t){return void 0===t},El=function(t){return t instanceof Element||t instanceof HTMLDocument};function Ml(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}function Al(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}function _l(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function Tl(t,e,n,r){return e&&_l(t,e),n&&_l(t,n),r&&_l(t,r),t}var Pl=function(t){if("object"!=typeof t||null===t)return t;var e;if(ms(t)){e=[];for(var n=0,r=t.length;n<r;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=Pl(t[n]):e[n]=t[n]}else for(var i in e={},t)"object"==typeof t[i]&&null!=t[i]?e[i]=Pl(t[i]):e[i]=t[i];return e};function Il(t,e,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||t.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(i,o)}}var Dl=function(t,e){if(!gs(t))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,r);return a.set(o,s),s};return n.cache=new Map,n};function Ol(t,e,n,r){for(var i in n=n||0,r=r||5,e)if(e.hasOwnProperty(i)){var o=e[i];null!==o&&Ss(o)?(Ss(t[i])||(t[i]={}),n<r?Ol(t[i],o,n+1,r):t[i]=e[i]):ms(o)?(t[i]=[],t[i]=t[i].concat(o)):void 0!==o&&(t[i]=o)}}var Rl=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)Ol(t,e[r]);return t},Ll=function(t,e){if(!us(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var r=-1,i=0;i<t.length;i++)if(t[i]===e){r=i;break}return r},Bl=Object.prototype.hasOwnProperty;function Fl(t){if(vs(t))return!0;if(us(t))return!t.length;var e=yl(t);if("Map"===e||"Set"===e)return!t.size;if(Sl(t))return!Object.keys(t).length;for(var n in t)if(Bl.call(t,n))return!1;return!0}var Nl=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(zs(t)||zs(e))return!1;if(us(t)||us(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length&&(n=Nl(t[r],e[r]));r++);return n}if(Cs(t)||Cs(e)){var i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(n=!0,r=0;r<i.length&&(n=Nl(t[i[r]],e[i[r]]));r++);return n}return!1},zl=function(t,e){if(!us(t))return t;for(var n=[],r=0;r<t.length;r++){var i=t[r];n.push(e(i,r))}return n},jl=function(t){return t},Gl=function(t,e){void 0===e&&(e=jl);var n={};return ys(t)&&!vs(t)&&Object.keys(t).forEach((function(r){n[r]=e(t[r],r)})),n},Ul=function(t,e,n){for(var r=0,i=zs(e)?e.split("."):e;t&&r<i.length;)t=t[i[r++]];return void 0===t||r<i.length?n:t},$l=function(t,e,n){var r=t,i=zs(e)?e.split("."):e;return i.forEach((function(t,e){e<i.length-1?(ys(r[t])||(r[t]=el(i[e+1])?[]:{}),r=r[t]):r[t]=n})),t},Vl=Object.prototype.hasOwnProperty,Wl=function(t,e){if(null===t||!Ss(t))return{};var n={};return bs(e,(function(e){Vl.call(t,e)&&(n[e]=t[e])})),n},Hl=function(t,e){return Fs(t,(function(t,n,r){return e.includes(r)||(t[r]=n),t}),{})},Yl=function(t,e,n){var r,i,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),r=null,a=t.apply(i,o),r||(i=o=null)},u=function(){var u=Date.now();s||!1!==n.leading||(s=u);var c=e-(u-s);return i=this,o=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),s=u,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,c)),a};return u.cancel=function(){clearTimeout(r),s=0,r=i=o=null},u},Xl=function(t){return us(t)?Array.prototype.slice.call(t):[]},ql={},Kl=function(t){return ql[t=t||"g"]?ql[t]+=1:ql[t]=1,t+ql[t]},Zl=function(){};function Ql(t){return vs(t)?0:us(t)?t.length:Object.keys(t).length}var Jl=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}(),tu=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",contains:cs,includes:cs,difference:hs,find:ks,findIndex:Es,firstValue:Ms,flatten:As,flattenDeep:_s,getRange:Is,pull:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=-1;(o=Rs.call(t,i))>-1;)Os.call(t,o,1);return t},pullAt:Bs,reduce:Fs,remove:Ns,sortBy:js,union:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Gs([].concat.apply([],t))},uniq:Gs,valuesOfKey:Us,head:$s,last:Vs,startsWith:function(t,e){return!(!ms(t)&&!zs(t))&&t[0]===e},endsWith:function(t,e){return!(!ms(t)&&!zs(t))&&t[t.length-1]===e},filter:ds,every:Ws,some:Hs,group:Ks,groupBy:Xs,groupToMap:qs,getWrapBehavior:function(t,e){return t["_wrap_"+e]},wrapBehavior:Zs,number2color:function(t){var e=Qs[t];if(!e){for(var n=t.toString(16),r=n.length;r<6;r++)n="0"+n;e="#"+n,Qs[t]=e}return e},parseRadius:function(t){var e=0,n=0,r=0,i=0;return ms(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,{r1:e,r2:n,r3:r,r4:i}},clamp:Js,fixedBase:tl,isDecimal:function(t){return el(t)&&t%1!=0},isEven:function(t){return el(t)&&t%2==0},isInteger:nl,isNegative:function(t){return el(t)&&t<0},isNumberEqual:rl,isOdd:function(t){return el(t)&&t%2!=0},isPositive:function(t){return el(t)&&t>0},max:Ts,maxBy:il,min:Ps,minBy:ol,mod:al,toDegree:function(t){return sl*t},toInteger:ll,toRadian:cl,forIn:bs,has:dl,hasKey:dl,hasValue:function(t,e){return cs(hl(t),e)},keys:xs,isMatch:ws,values:hl,lowerCase:pl,lowerFirst:function(t){var e=fl(t);return e.charAt(0).toLowerCase()+e.substring(1)},substitute:gl,upperCase:function(t){return fl(t).toUpperCase()},upperFirst:vl,getType:yl,isArguments:function(t){return ps(t,"Arguments")},isArray:ms,isArrayLike:us,isBoolean:bl,isDate:xl,isError:function(t){return ps(t,"Error")},isFunction:gs,isFinite:function(t){return el(t)&&isFinite(t)},isNil:vs,isNull:wl,isNumber:el,isObject:ys,isObjectLike:Cs,isPlainObject:Ss,isPrototype:Sl,isRegExp:function(t){return ps(t,"RegExp")},isString:zs,isType:ps,isUndefined:kl,isElement:El,requestAnimationFrame:Ml,clearAnimationFrame:Al,augment:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t[0],r=1;r<t.length;r++){var i=t[r];gs(i)&&(i=i.prototype),Tl(n.prototype,i)}},clone:Pl,debounce:Il,memoize:Dl,deepMix:Rl,each:bs,extend:function(t,e,n,r){gs(e)||(n=e,e=t,t=function(){});var i=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var r=new n;return r.constructor=e,r},o=i(e.prototype,t);return t.prototype=Tl(o,t.prototype),t.superclass=i(e.prototype,e),Tl(o,n),Tl(t,r),t},indexOf:Ll,isEmpty:Fl,isEqual:Nl,isEqualWith:function(t,e,n){return gs(n)?!!n(t,e):Nl(t,e)},map:zl,mapValues:Gl,mix:Tl,assign:Tl,get:Ul,set:$l,pick:Wl,omit:Hl,throttle:Yl,toArray:Xl,toString:fl,uniqueId:Kl,noop:Zl,identity:function(t){return t},size:Ql,Cache:Jl}),eu={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(t){return Object.assign(this,t),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(t){var e=this,n=this.events;this.graph=t,"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||t.get("canvas").set("draggable",!0),bs(n,(function(e,n){t.on(n,e)})),document.addEventListener("visibilitychange",(function(){e.keydown=!1}))},unbind:function(t){var e=this.events,n=t.get("canvas").get("draggable");"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||t.get("canvas").set("draggable",!1),bs(e,(function(e,n){t.off(n,e)})),t.get("canvas").set("draggable",n)},get:function(t){return this[t]},set:function(t,e){return this[t]=e,this}},nu=function(){function t(){}return t.registerBehavior=function(e,n){if(!n)throw new Error("please specify handler for this behavior: "+e);var r=Pl(eu);Object.assign(r,n);var i=function(t){var e=this;Object.assign(this,this.getDefaultCfg(),t);var n=this.getEvents();this.events=null;var r={};n&&(bs(n,(function(t,n){r[n]=Zs(e,t)})),this.events=r)};i.prototype=r,t.types[e]=i},t.hasBehavior=function(e){return!!t.types[e]},t.getBehavior=function(e){return t.types[e]},t.types={},t}(),ru=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},t.prototype.once=function(t,e){return this.on(t,e,!0),this},t.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[t]||[],o=this._events["*"]||[],a=function(r){for(var i=r.length,o=0;o<i;o++)if(r[o]){var a=r[o],s=a.callback;a.once&&(r.splice(o,1),0===r.length&&delete e._events[t],i--,o--),s.apply(e,n)}};a(i),a(o)},t.prototype.off=function(t,e){if(t)if(e){for(var n=this._events[t]||[],r=n.length,i=0;i<r;i++)n[i].callback===e&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[t]}else delete this._events[t];else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}(),iu="undefined"!=typeof Float32Array?Float32Array:Array;function ou(){var t=new iu(9);return iu!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function au(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function su(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=c*a-s*u,h=-c*o+s*l,f=u*o-a*l,p=n*d+r*h+i*f;return p?(p=1/p,t[0]=d*p,t[1]=(-c*r+i*u)*p,t[2]=(s*r-i*a)*p,t[3]=h*p,t[4]=(c*n-i*l)*p,t[5]=(-s*n+i*o)*p,t[6]=f*p,t[7]=(-u*n+r*l)*p,t[8]=(a*n-r*o)*p,t):null}function lu(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=n[0],f=n[1],p=n[2],g=n[3],v=n[4],m=n[5],y=n[6],b=n[7],x=n[8];return t[0]=h*r+f*a+p*u,t[1]=h*i+f*s+p*c,t[2]=h*o+f*l+p*d,t[3]=g*r+v*a+m*u,t[4]=g*i+v*s+m*c,t[5]=g*o+v*l+m*d,t[6]=y*r+b*a+x*u,t[7]=y*i+b*s+x*c,t[8]=y*o+b*l+x*d,t}function uu(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function cu(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function du(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function hu(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],f=e[11],p=e[12],g=e[13],v=e[14],m=e[15],y=n*s-r*a,b=n*l-i*a,x=n*u-o*a,w=r*l-i*s,C=r*u-o*s,S=i*u-o*l,k=c*g-d*p,E=c*v-h*p,M=c*m-f*p,A=d*v-h*g,_=d*m-f*g,T=h*m-f*v,P=y*T-b*_+x*A+w*M-C*E+S*k;return P?(P=1/P,t[0]=(s*T-l*_+u*A)*P,t[1]=(l*M-a*T-u*E)*P,t[2]=(a*_-s*M+u*k)*P,t[3]=(i*_-r*T-o*A)*P,t[4]=(n*T-i*M+o*E)*P,t[5]=(r*M-n*_-o*k)*P,t[6]=(g*S-v*C+m*w)*P,t[7]=(v*x-p*S-m*b)*P,t[8]=(p*C-g*x+m*y)*P,t):null}function fu(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var pu=lu,gu=fu,vu=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:ou,fromMat4:au,clone:function(t){var e=new iu(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromValues:function(t,e,n,r,i,o,a,s,l){var u=new iu(9);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=i,u[5]=o,u[6]=a,u[7]=s,u[8]=l,u},set:function(t,e,n,r,i,o,a,s,l,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=l,t[8]=u,t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose:function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},invert:su,adjoint:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t[0]=a*c-s*u,t[1]=i*u-r*c,t[2]=r*s-i*a,t[3]=s*l-o*c,t[4]=n*c-i*l,t[5]=i*o-n*s,t[6]=o*u-a*l,t[7]=r*l-n*u,t[8]=n*a-r*o,t},determinant:function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8];return e*(u*o-a*l)+n*(-u*i+a*s)+r*(l*i-o*s)},multiply:lu,translate:function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=n[0],f=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=h*r+f*a+u,t[7]=h*i+f*s+c,t[8]=h*o+f*l+d,t},rotate:function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=Math.sin(n),f=Math.cos(n);return t[0]=f*r+h*a,t[1]=f*i+h*s,t[2]=f*o+h*l,t[3]=f*a-h*r,t[4]=f*s-h*i,t[5]=f*l-h*o,t[6]=u,t[7]=c,t[8]=d,t},scale:function(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromTranslation:uu,fromRotation:cu,fromScaling:du,fromMat2d:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},fromQuat:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,l=i+i,u=n*a,c=r*a,d=r*s,h=i*a,f=i*s,p=i*l,g=o*a,v=o*s,m=o*l;return t[0]=1-d-p,t[3]=c-m,t[6]=h+v,t[1]=c+m,t[4]=1-u-p,t[7]=f-g,t[2]=h-v,t[5]=f+g,t[8]=1-u-d,t},normalFromMat4:hu,projection:function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},str:function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},subtract:fu,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},equals:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=e[0],h=e[1],f=e[2],p=e[3],g=e[4],v=e[5],m=e[6],y=e[7],b=e[8];return Math.abs(n-d)<=1e-6*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-h)<=1e-6*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-f)<=1e-6*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-p)<=1e-6*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-g)<=1e-6*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(s-v)<=1e-6*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(l-m)<=1e-6*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(u-y)<=1e-6*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-b)<=1e-6*Math.max(1,Math.abs(c),Math.abs(b))},mul:pu,sub:gu});function mu(){var t=new iu(16);return iu!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function yu(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function bu(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function xu(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],f=e[11],p=e[12],g=e[13],v=e[14],m=e[15],y=n*s-r*a,b=n*l-i*a,x=n*u-o*a,w=r*l-i*s,C=r*u-o*s,S=i*u-o*l,k=c*g-d*p,E=c*v-h*p,M=c*m-f*p,A=d*v-h*g,_=d*m-f*g,T=h*m-f*v,P=y*T-b*_+x*A+w*M-C*E+S*k;return P?(P=1/P,t[0]=(s*T-l*_+u*A)*P,t[1]=(i*_-r*T-o*A)*P,t[2]=(g*S-v*C+m*w)*P,t[3]=(h*C-d*S-f*w)*P,t[4]=(l*M-a*T-u*E)*P,t[5]=(n*T-i*M+o*E)*P,t[6]=(v*x-p*S-m*b)*P,t[7]=(c*S-h*x+f*b)*P,t[8]=(a*_-s*M+u*k)*P,t[9]=(r*M-n*_-o*k)*P,t[10]=(p*C-g*x+m*y)*P,t[11]=(d*x-c*C-f*y)*P,t[12]=(s*E-a*A-l*k)*P,t[13]=(n*A-r*E+i*k)*P,t[14]=(g*b-p*w-v*y)*P,t[15]=(c*w-d*b+h*y)*P,t):null}function wu(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=e[9],f=e[10],p=e[11],g=e[12],v=e[13],m=e[14],y=e[15],b=n[0],x=n[1],w=n[2],C=n[3];return t[0]=b*r+x*s+w*d+C*g,t[1]=b*i+x*l+w*h+C*v,t[2]=b*o+x*u+w*f+C*m,t[3]=b*a+x*c+w*p+C*y,b=n[4],x=n[5],w=n[6],C=n[7],t[4]=b*r+x*s+w*d+C*g,t[5]=b*i+x*l+w*h+C*v,t[6]=b*o+x*u+w*f+C*m,t[7]=b*a+x*c+w*p+C*y,b=n[8],x=n[9],w=n[10],C=n[11],t[8]=b*r+x*s+w*d+C*g,t[9]=b*i+x*l+w*h+C*v,t[10]=b*o+x*u+w*f+C*m,t[11]=b*a+x*c+w*p+C*y,b=n[12],x=n[13],w=n[14],C=n[15],t[12]=b*r+x*s+w*d+C*g,t[13]=b*i+x*l+w*h+C*v,t[14]=b*o+x*u+w*f+C*m,t[15]=b*a+x*c+w*p+C*y,t}function Cu(t,e,n){var r,i,o,a,s,l,u,c,d,h,f,p,g=n[0],v=n[1],m=n[2];return e===t?(t[12]=e[0]*g+e[4]*v+e[8]*m+e[12],t[13]=e[1]*g+e[5]*v+e[9]*m+e[13],t[14]=e[2]*g+e[6]*v+e[10]*m+e[14],t[15]=e[3]*g+e[7]*v+e[11]*m+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=e[9],f=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=d,t[9]=h,t[10]=f,t[11]=p,t[12]=r*g+s*v+d*m+e[12],t[13]=i*g+l*v+h*m+e[13],t[14]=o*g+u*v+f*m+e[14],t[15]=a*g+c*v+p*m+e[15]),t}function Su(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function ku(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],l=e[8],u=e[9],c=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(l,u,c),t}function Eu(t,e){var n=new iu(3);ku(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],a=e[0]*r,s=e[1]*i,l=e[2]*o,u=e[4]*r,c=e[5]*i,d=e[6]*o,h=e[8]*r,f=e[9]*i,p=e[10]*o,g=a+c+p,v=0;return g>0?(v=2*Math.sqrt(g+1),t[3]=.25*v,t[0]=(d-f)/v,t[1]=(h-l)/v,t[2]=(s-u)/v):a>c&&a>p?(v=2*Math.sqrt(1+a-c-p),t[3]=(d-f)/v,t[0]=.25*v,t[1]=(s+u)/v,t[2]=(h+l)/v):c>p?(v=2*Math.sqrt(1+c-a-p),t[3]=(h-l)/v,t[0]=(s+u)/v,t[1]=.25*v,t[2]=(d+f)/v):(v=2*Math.sqrt(1+p-a-c),t[3]=(s-u)/v,t[0]=(h+l)/v,t[1]=(d+f)/v,t[2]=.25*v),t}function Mu(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,l=i+i,u=n*a,c=r*a,d=r*s,h=i*a,f=i*s,p=i*l,g=o*a,v=o*s,m=o*l;return t[0]=1-d-p,t[1]=c+m,t[2]=h-v,t[3]=0,t[4]=c-m,t[5]=1-u-p,t[6]=f+g,t[7]=0,t[8]=h+v,t[9]=f-g,t[10]=1-u-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Au(){var t=new iu(3);return iu!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function _u(t){var e=new iu(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Tu(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Pu(t,e,n){var r=new iu(3);return r[0]=t,r[1]=e,r[2]=n,r}function Iu(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Du(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ou(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Ru(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Lu(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Bu(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function Fu(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Nu(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function zu(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function ju(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}var Gu=Ru,Uu=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)},$u=Tu;function Vu(){var t=new iu(4);return iu!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Wu(t,e,n,r){var i=new iu(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function Hu(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function Yu(){var t=new iu(4);return iu!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Xu(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function qu(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],l=n[1],u=n[2],c=n[3];return t[0]=r*c+a*s+i*u-o*l,t[1]=i*c+a*l+o*s-r*u,t[2]=o*c+a*u+r*l-i*s,t[3]=a*c-r*s-i*l-o*u,t}function Ku(t,e,n,r){var i,o,a,s,l,u=e[0],c=e[1],d=e[2],h=e[3],f=n[0],p=n[1],g=n[2],v=n[3];return(o=u*f+c*p+d*g+h*v)<0&&(o=-o,f=-f,p=-p,g=-g,v=-v),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,l=Math.sin(r*i)/a):(s=1-r,l=r),t[0]=s*u+l*f,t[1]=s*c+l*p,t[2]=s*d+l*g,t[3]=s*h+l*v,t}function Zu(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t}function Qu(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var o=Math.sin(e),a=Math.cos(e),s=Math.sin(n),l=Math.cos(n),u=Math.sin(r),c=Math.cos(r);return t[0]=o*l*c-a*s*u,t[1]=a*s*c+o*l*u,t[2]=a*l*u-o*s*c,t[3]=a*l*c+o*s*u,t}Au(),function(){var t=Vu()}();var Ju=Wu,tc=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},ec=qu,nc=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t};function rc(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function ic(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function oc(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function ac(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function sc(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function lc(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function uc(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function cc(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function dc(t,e){return t[0]*e[0]+t[1]*e[1]}function hc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),s=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function fc(t,e){return t[0]===e[0]&&t[1]===e[1]}Au(),Pu(1,0,0),Pu(0,1,0),Yu(),Yu(),ou();var pc=ic;function gc(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return uu(r,n),lu(t,r,e)}function vc(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return cu(r,n),lu(t,r,e)}function mc(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return du(r,n),lu(t,r,e)}function yc(t,e){for(var n,r,i,o=t?[].concat(t):[1,0,0,0,1,0,0,0,1],a=0,s=e.length;a<s;a++){var l=e[a];switch(l[0]){case"t":gc(o,o,[l[1],l[2]]);break;case"s":mc(o,o,[l[1],l[2]]);break;case"r":vc(o,o,l[1]);break;case"m":n=o,r=o,i=l[1],lu(n,i,r)}}return o}function bc(t,e,n){var r=hc(t,e),i=function(t,e){return t[0]*e[1]-e[0]*t[1]}(t,e)>=0;return n?i?2*Math.PI-r:r:i?r:2*Math.PI-r}!function(){var t,e=(t=new iu(2),iu!=Float32Array&&(t[0]=0,t[1]=0),t)}();var xc=function(t,e){var n=t.nodes,r=t.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){o[t.id]=e;i.push([])})),r&&r.forEach((function(t){var n=t.source,r=t.target,a=o[n],s=o[r];!a&&0!==a||!s&&0!==s||(i[a][s]=1,e||(i[s][a]=1))})),i},wc=function(t,e){return t===e},Cc=function(){function t(t,e){void 0===e&&(e=null),this.value=t,this.next=e}return t.prototype.toString=function(t){return t?t(this.value):""+this.value},t}(),Sc=function(){function t(t){void 0===t&&(t=wc),this.head=null,this.tail=null,this.compare=t}return t.prototype.prepend=function(t){var e=new Cc(t,this.head);return this.head=e,this.tail||(this.tail=e),this},t.prototype.append=function(t){var e=new Cc(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},t.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},t.prototype.find=function(t){var e=t.value,n=void 0===e?void 0:e,r=t.callback,i=void 0===r?void 0:r;if(!this.head)return null;for(var o=this.head;o;){if(i&&i(o.value))return o;if(void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},t.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},t.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},t.prototype.fromArray=function(t){var e=this;return t.forEach((function(t){return e.append(t)})),this},t.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},t.prototype.reverse=function(){for(var t=this.head,e=null,n=null;t;)n=t.next,t.next=e,e=t,t=n;this.tail=this.head,this.head=e},t.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map((function(e){return e.toString(t)})).toString()},t}(),kc=function(){function t(){this.linkedList=new Sc}return t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(t){this.linkedList.append(t)},t.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toString=function(t){return this.linkedList.toString(t)},t}(),Ec=function(t,e,n){void 0===e&&(e=[]);var r=e.filter((function(e){return e.source===t||e.target===t}));if("target"===n){return r.filter((function(e){return e.source===t})).map((function(t){return t.target}))}if("source"===n){return r.filter((function(e){return e.target===t})).map((function(t){return t.source}))}return r.map((function(e){return e.source===t?e.target:e.source}))},Mc=function(t,e){return e.filter((function(e){return e.source===t||e.target===t}))},Ac=function(t){return void 0===t&&(t=0),t+"-"+(""+Math.random()).split(".")[1].substr(0,5)+(""+Math.random()).split(".")[1].substr(0,5)};var _c=function(t,e,n){var r=function(t){void 0===t&&(t={});var e,n=t,r=function(){},i=(e={},function(t){var n=t.next;return!e[n]&&(e[n]=!0,!0)});return n.allowTraversal=t.allowTraversal||i,n.enter=t.enter||r,n.leave=t.leave||r,n}(n),i=new kc,o=t.edges,a=void 0===o?[]:o;i.enqueue(e);for(var s="",l=function(){var t=i.dequeue();r.enter({current:t,previous:s}),Ec(t,a,"target").forEach((function(e){r.allowTraversal({previous:s,current:t,next:e})&&i.enqueue(e)})),r.leave({current:t,previous:s}),s=t};!i.isEmpty();)l()},Tc=function(t){for(var e=t.nodes,n=void 0===e?[]:e,r=t.edges,i=void 0===r?[]:r,o=[],a={},s={},l={},u=[],c=0,d=function t(e){s[e.id]=c,l[e.id]=c,c+=1,o.push(e),a[e.id]=!0;for(var r=Ec(e.id,i,"target").filter((function(t){return n.map((function(t){return t.id})).indexOf(t)>-1})),d=function(i){var o=r[i];if(s[o]||0===s[o])a[o]&&(l[e.id]=Math.min(l[e.id],s[o]));else{var u=n.filter((function(t){return t.id===o}));u.length>0&&t(u[0]),l[e.id]=Math.min(l[e.id],l[o])}},h=0;h<r.length;h++)d(h);if(l[e.id]===s[e.id]){for(var f=[];o.length>0;){var p=o.pop();if(a[p.id]=!1,f.push(p),p===e)break}f.length>0&&u.push(f)}},h=0,f=n;h<f.length;h++){var p=f[h];s[p.id]||0===s[p.id]||d(p)}return u};function Pc(t,e){return e?Tc(t):function(t){for(var e=t.nodes,n=void 0===e?[]:e,r=t.edges,i=void 0===r?[]:r,o=[],a={},s=[],l=function t(e){s.push(e),a[e.id]=!0;for(var r=Ec(e.id,i),o=function(e){var i=r[e];if(!a[i]){var o=n.filter((function(t){return t.id===i}));o.length>0&&t(o[0])}},l=0;l<r.length;++l)o(l)},u=0;u<n.length;u++){var c=n[u];if(!a[c.id]){l(c);for(var d=[];s.length>0;)d.push(s.pop());o.push(d)}}return o}(t)}var Ic=function(t){var e={},n=t.nodes,r=void 0===n?[]:n,i=t.edges,o=void 0===i?[]:i;return r.forEach((function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}})),o.forEach((function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++})),e},Dc=function(t,e){return Ic(t)[e]?Ic(t)[e].inDegree:0},Oc=function(t,e){return Ic(t)[e]?Ic(t)[e].outDegree:0};function Rc(t,e,n,r){r.enter({current:e,previous:n});var i=t.edges;Ec(e,void 0===i?[]:i,"target").forEach((function(i){r.allowTraversal({previous:n,current:e,next:i})&&Rc(t,i,e,r)})),r.leave({current:e,previous:n})}function Lc(t,e,n){Rc(t,e,"",function(t){void 0===t&&(t={});var e,n=t,r=function(){},i=(e={},function(t){var n=t.next;return!e[n]&&(e[n]=!0,!0)});return n.allowTraversal=t.allowTraversal||i,n.enter=t.enter||r,n.leave=t.leave||r,n}(n))}var Bc=function(t){var e=null,n=t.nodes,r={},i={},o={},a={};(void 0===n?[]:n).forEach((function(t){i[t.id]=t}));for(var s={enter:function(t){var n=t.current,a=t.previous;if(o[n]){e={};for(var s=n,l=a;l!==n;)e[s]=l,s=l,l=r[l];e[s]=l}else o[n]=n,delete i[n],r[n]=a},leave:function(t){var e=t.current;a[e]=e,delete o[e]},allowTraversal:function(t){var n=t.next;return!e&&!a[n]}};Object.keys(i).length;){Lc(t,Object.keys(i)[0],s)}return e},Fc=function(t,e,n){var r,i;void 0===n&&(n=!0);for(var o=[],a=0,s=Pc(t,!1);a<s.length;a++){var l=s[a];if(l.length)for(var u=l[0],c=u.id,d=[u],h=((r={})[c]=u,r),f=((i={})[c]=new Set,i);d.length>0;)for(var p=d.pop(),g=p.id,v=Ec(g,t.edges),m=function(r){var i,a=v[r],s=t.nodes.find((function(t){return t.id===a}));if(a===g)o.push(((i={})[a]=p,i));else if(a in f){if(!f[g].has(s)){for(var l=!0,u=[s,p],c=h[g];f[a].size&&!f[a].has(c)&&(u.push(c),c!==h[c.id]);)c=h[c.id];if(u.push(c),e&&n?(l=!1,u.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(l=!0)):e&&!n&&u.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(l=!1),l){for(var m={},y=1;y<u.length;y+=1)m[u[y-1].id]=u[y];u.length&&(m[u[u.length-1].id]=u[0]),o.push(m)}f[a].add(p)}}else h[a]=p,d.push(s),f[a]=new Set([p])},y=0;y<v.length;y+=1)m(y)}return o},Nc=function(t,e,n){void 0===n&&(n=!0);for(var r=[],i=new Set,o=[],a=[],s={},l={},u=function t(l,u,c){var d=!1;if(e&&!1===n&&e.indexOf(l.id)>-1)return d;r.push(l),i.add(l);for(var h=c[l.id],f=0;f<h.length;f+=1){if((v=s[h[f]])===u){for(var p={},g=1;g<r.length;g+=1)p[r[g-1].id]=r[g];r.length&&(p[r[r.length-1].id]=r[0]),a.push(p),d=!0}else i.has(v)||t(v,u,c)&&(d=!0)}if(d)!function(t){for(var e=[t];e.length>0;){var n=e.pop();i.has(n)&&(i.delete(n),o[n.id].forEach((function(t){e.push(t)})),o[n.id].clear())}}(l);else for(f=0;f<h.length;f+=1){var v=s[h[f]];o[v.id].has(l)||o[v.id].add(l)}return r.pop(),d},c=t.nodes,d=void 0===c?[]:c,h=0;h<d.length;h+=1){var f=d[h],p=f.id;l[p]=h,s[h]=f}if(e&&n){var g=function(t){var n=e[t];l[d[t].id]=l[n],l[n]=0,s[0]=d.find((function(t){return t.id===n})),s[l[d[t].id]]=d[t]};for(h=0;h<e.length;h++)g(h)}for(var v=function(r){for(var i,o,s=1/0,u=0;u<r.length;u+=1)for(var c=r[u],d=0;d<c.length;d++){var h=l[c[d].id];h<s&&(s=h,o=u)}var f=r[o],p=[];for(u=0;u<f.length;u+=1){var g=f[u];p[g.id]=[];for(var v=0,m=Ec(g.id,t.edges,"target").filter((function(t){return f.map((function(t){return t.id})).indexOf(t)>-1}));v<m.length;v++){var y=m[v];y!==g.id||!1===n&&e.indexOf(g.id)>-1?p[g.id].push(l[y]):a.push(((i={})[g.id]=g,i))}}return{component:f,adjList:p,minIdx:s}},m=0;m<d.length;){var y=d.filter((function(t){return l[t.id]>=m})),b=Tc({nodes:y,edges:t.edges}).filter((function(t){return t.length>1}));if(0===b.length)break;var x=v(b),w=x.minIdx,C=x.adjList,S=x.component;if(!(S.length>1))break;S.forEach((function(t){o[t.id]=new Set}));var k=s[w];if(e&&n&&-1===e.indexOf(k.id))return a;u(k,k,C),m=w+1}return a},zc=function(t,e,n,r){return void 0===r&&(r=!0),e?Nc(t,n,r):Fc(t,n,r)},jc=function(t,e,n,r){var i=t.nodes,o=void 0===i?[]:i,a=t.edges,s=void 0===a?[]:a,l={},u={},c={};o.forEach((function(t,n){var r=t.id;u[r]=1/0,r===e&&(u[r]=0)}));for(var d=o.length,h=function(t){var e=function(t,e,n){for(var r,i=1/0,o=0;o<e.length;o++){var a=e[o].id;!n[a]&&t[a]<=i&&(i=t[a],r=e[o])}return r}(u,o,l),i=e.id;if(l[i]=!0,u[i]===1/0)return"continue";(n?function(t,e){return e.filter((function(e){return e.source===t}))}(i,s):Mc(i,s)).forEach((function(t){var n=t.target,o=t.source,a=n===i?o:n,s=r&&t[r]?t[r]:1;u[a]>u[e.id]+s?(u[a]=u[e.id]+s,c[a]=[e.id]):u[a]===u[e.id]+s&&c[a].push(e.id)}))},f=0;f<d;f++)h();c[e]=[e];var p={};for(var g in u)u[g]!==1/0&&Gc(e,g,c,p);var v={};for(var g in p)v[g]=p[g][0];return{length:u,path:v,allPath:p}};function Gc(t,e,n,r){if(t===e)return[t];if(r[e])return r[e];for(var i=[],o=0,a=n[e];o<a.length;o++){var s=Gc(t,a[o],n,r);if(!s)return;for(var l=0,u=s;l<u.length;l++){var c=u[l];ms(c)?i.push(os(os([],c),[e])):i.push([c,e])}}return r[e]=i,r[e]}var Uc=function(t,e,n,r,i){var o=jc(t,e,r,i),a=o.length,s=o.path,l=o.allPath;return{length:a[n],path:s[n],allPath:l[n]}},$c=function(t,e,n,r){var i;if(e===n)return[[e]];var o=t.edges,a=void 0===o?[]:o,s=[e],l=((i={})[e]=!0,i),u=[],c=[],d=r?Ec(e,a,"target"):Ec(e,a);for(u.push(d);s.length>0&&u.length>0;){var h=u[u.length-1];if(h.length){var f=h.shift();if(f&&(s.push(f),l[f]=!0,d=r?Ec(f,a,"target"):Ec(f,a),u.push(d.filter((function(t){return!l[t]})))),s[s.length-1]===n){var p=s.map((function(t){return t}));c.push(p);g=s.pop();l[g]=!1,u.pop()}}else{var g=s.pop();l[g]=!1,u.pop()}}return c},Vc=function(t,e){for(var n=xc(t,e),r=[],i=n.length,o=0;o<i;o+=1){r[o]=[];for(var a=0;a<i;a+=1)o===a?r[o][a]=0:0!==n[o][a]&&n[o][a]?r[o][a]=n[o][a]:r[o][a]=1/0}for(var s=0;s<i;s+=1)for(o=0;o<i;o+=1)for(a=0;a<i;a+=1)r[o][a]>r[o][s]+r[s][a]&&(r[o][a]=r[o][s]+r[s][a]);return r},Wc=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e3);var i=t.nodes,o=void 0===i?[]:i,a=t.edges,s=void 0===a?[]:a,l={},u={};o.forEach((function(t,e){var n=Ac();t.clusterId=n,l[n]={id:n,nodes:[t]},u[t.id]={node:t,idx:e}}));var c=xc(t,e),d={};c.forEach((function(t,e){var n=o[e].id;d[n]={},t.forEach((function(t,e){if(t){var r=o[e].id;d[n][r]=t}}))}));for(var h=0,f=function(){var t=!1;if(o.forEach((function(e){var n={};Object.keys(d[e.id]).forEach((function(t){var r=d[e.id][t],i=u[t].node.clusterId;n[i]||(n[i]=0),n[i]+=r}));var r=-1/0,i=[];if(Object.keys(n).forEach((function(t){r<n[t]?(r=n[t],i=[t]):r===n[t]&&i.push(t)})),1!==i.length||i[0]!==e.clusterId){var o=i.indexOf(e.clusterId);if(o>=0&&i.splice(o,1),i&&i.length){t=!0;var a=l[e.clusterId],s=a.nodes.indexOf(e);a.nodes.splice(s,1);var c=Math.floor(Math.random()*i.length),h=l[i[c]];h.nodes.push(e),e.clusterId=h.id}}})),!t)return"break";h++};h<r;){if("break"===f())break}Object.keys(l).forEach((function(t){var e=l[t];e.nodes&&e.nodes.length||delete l[t]}));var p=[],g={};s.forEach((function(t){var e=t.source,r=t.target,i=t[n]||1,o=u[e].node.clusterId,a=u[r].node.clusterId,s=o+"---"+a;if(g[s])g[s].weight+=i,g[s].count++;else{var l={source:o,target:a,weight:i,count:1};g[s]=l,p.push(l)}}));var v=[];return Object.keys(l).forEach((function(t){v.push(l[t])})),{clusters:v,clusterEdges:p}},Hc=function(t,e,n,r){for(var i=e.length,o=2*r,a=0,s=0;s<i;s++)for(var l=t[s].clusterId,u=0;u<i;u++){if(l===t[u].clusterId)a+=(e[s][u]||0)-(n[s]||0)*(n[u]||0)/o}return a*=1/o},Yc=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e-4);var i=t.nodes,o=void 0===i?[]:i,a=t.edges,s=void 0===a?[]:a,l=1,u={},c={};o.forEach((function(t,e){var n=String(l++);t.clusterId=n,u[n]={id:n,nodes:[t]},c[t.id]={node:t,idx:e}}));var d=xc(t,e),h=[],f={},p=0;d.forEach((function(t,e){var n=0,r=o[e].id;f[r]={},t.forEach((function(t,e){if(t){n+=t;var i=o[e].id;f[r][i]=t,p+=t}})),h.push(n)})),p/=2;for(var g=1/0,v=1/0,m=0;g=Hc(o,d,h,p),!(Math.abs(g-v)<r||m>100);)v=g,m++,Object.keys(u).forEach((function(t){var e=0;s.forEach((function(r){var i=r.source,o=r.target,a=c[i].node.clusterId,s=c[o].node.clusterId;(a===t&&s!==t||s===t&&a!==t)&&(e+=r[n]||1)})),u[t].sumTot=e})),o.forEach((function(t,e){var r,i=u[t.clusterId],o=0,a=h[e]/(2*p),l=0;i.nodes.forEach((function(t){var n=c[t.id].idx;l+=d[e][n]||0}));var g=l-i.sumTot*a,v=f[t.id];if(Object.keys(v).forEach((function(n){var i=c[n].node.clusterId;if(i!==t.clusterId){var s=u[i],l=s.nodes;if(l&&l.length){var h=0;l.forEach((function(t){var n=c[t.id].idx;h+=d[e][n]||0}));var f=h-s.sumTot*a-g;f>o&&(o=f,r=s)}}})),o>0){r.nodes.push(t);var m=t.clusterId;t.clusterId=r.id;var y=i.nodes.indexOf(t);i.nodes.splice(y,1);var b=0,x=0;s.forEach((function(t){var e=t.source,i=t.target,o=c[e].node.clusterId,a=c[i].node.clusterId;(o===r.id&&a!==r.id||a===r.id&&o!==r.id)&&(b+=t[n]||1),(o===m&&a!==m||a===m&&o!==m)&&(x+=t[n]||1)})),r.sumTot=b,i.sumTot=x}}));var y={},b=0;Object.keys(u).forEach((function(t){var e=u[t];if(e.nodes&&e.nodes.length){var n=String(b+1);n!==t&&(e.id=n,e.nodes=e.nodes.map((function(t){return{id:t.id,clusterId:n}})),u[n]=e,y[t]=n,delete u[t],b++)}else delete u[t]})),o.forEach((function(t){t.clusterId&&y[t.clusterId]&&(t.clusterId=y[t.clusterId])}));var x=[],w={};s.forEach((function(t){var e=t.source,r=t.target,i=t[n]||1,o=c[e].node.clusterId,a=c[r].node.clusterId,s=o+"---"+a;if(w[s])w[s].weight+=i,w[s].count++;else{var l={source:o,target:a,weight:i,count:1};w[s]=l,x.push(l)}}));var C=[];return Object.keys(u).forEach((function(t){C.push(u[t])})),{clusters:C,clusterEdges:x}},Xc=function(){function t(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var r=n[e];this.parent[r]=r}}return t.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},t.prototype.union=function(t,e){var n=this.find(t),r=this.find(e);n!==r&&(n<r?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},t.prototype.connected=function(t,e){return this.find(t)===this.find(e)},t}(),qc=function(t,e){return t-e},Kc=function(){function t(t){void 0===t&&(t=qc),this.compareFn=t,this.list=[]}return t.prototype.getLeft=function(t){return 2*t+1},t.prototype.getRight=function(t){return 2*t+2},t.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},t.prototype.insert=function(t){if(null!==t){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},t.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},t.prototype.moveDown=function(t){var e,n=t,r=this.getLeft(t),i=this.getRight(t),o=this.list.length;null!==r&&r<o&&this.compareFn(this.list[n],this.list[r])>0?n=r:null!==i&&i<o&&this.compareFn(this.list[n],this.list[i])>0&&(n=i),t!==n&&(e=[this.list[n],this.list[t]],this.list[t]=e[0],this.list[n]=e[1],this.moveDown(n))},t}(),Zc=function(t,e){var n=[],r=t.nodes,i=void 0===r?[]:r,o=t.edges,a=void 0===o?[]:o;if(0===i.length)return n;var s=i[0],l=new Set;l.add(s);var u=new Kc((function(t,n){return e?t.weight-n.weight:0}));for(Mc(s.id,a).forEach((function(t){u.insert(t)}));!u.isEmpty();){var c=u.delMin(),d=c.source,h=c.target;l.has(d)&&l.has(h)||(n.push(c),l.has(d)||(l.add(d),Mc(d,a).forEach((function(t){u.insert(t)}))),l.has(h)||(l.add(h),Mc(h,a).forEach((function(t){u.insert(t)}))))}return n},Qc=function(t,e){var n=[],r=t.nodes,i=void 0===r?[]:r,o=t.edges,a=void 0===o?[]:o;if(0===i.length)return n;var s=a.map((function(t){return t}));e&&s.sort((function(t,e){return t.weight-e.weight}));for(var l=new Xc(i.map((function(t){return t.id})));s.length>0;){var u=s.shift(),c=u.source,d=u.target;l.connected(c,d)||(n.push(u),l.union(c,d))}return n},Jc=function(t,e,n){return n?{prim:Zc,kruskal:Qc}[n](t,e):Qc(t,e)},td=function(t,e,n){"number"!=typeof e&&(e=1e-6),"number"!=typeof n&&(n=.85);for(var r,i=1,o=0,a=1e3,s=t.nodes,l=void 0===s?[]:s,u=t.edges,c=void 0===u?[]:u,d=l.length,h={},f={},p=0;p<d;++p){h[v=(w=l[p]).id]=1/d,f[v]=1/d}for(var g=Ic(t);a>0&&i>e;){o=0;for(p=0;p<d;++p){var v=(w=l[p]).id;if(r=0,0===g[w.id].inDegree)h[v]=0;else{for(var m=Ec(v,c,"source"),y=0;y<m.length;++y){var b=m[y],x=g[b].outDegree;x>0&&(r+=f[b]/x)}h[v]=n*r,o+=h[v]}}o=(1-o)/d,i=0;for(p=0;p<d;++p){var w;r=h[v=(w=l[p]).id]+o,i+=Math.abs(r-f[v]),f[v]=r}a-=1}return f},ed=function(t,e,n,r){void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===n&&(n=-1),void 0===r&&(r="-1"),this.id=t,this.from=e,this.to=n,this.label=r},nd=function(){function t(t,e){void 0===t&&(t=-1),void 0===e&&(e="-1"),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},t}(),rd=function(){function t(t,e,n){void 0===t&&(t=-1),void 0===e&&(e=!0),void 0===n&&(n=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var n=new nd(t,e);this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},t.prototype.addEdge=function(t,e,n,r){if((this.edgeIdAutoIncrease||void 0===t)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[t])){var i=new ed(t,e,n,r);if(this.edges.push(i),this.edgeMap[t]=i,this.nodeMap[e].addEdge(i),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(i),!this.directed){var o=new ed(t,n,e,r);this.nodeMap[n].addEdge(o),this.edgeLabelMap[r].push(o)}}},t}(),id=function(){function t(t,e,n,r,i){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||"-1",edgeLabel:r||"-1",nodeLabel2:i||"-1"}}return t.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t}(),od=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(t){var e=this.dfsEdgeList.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(this.dfsEdgeList[n]!==t[n])return!1;return!0},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t.prototype.pushBack=function(t,e,n,r,i){return this.dfsEdgeList.push(new id(t,e,n,r,i)),this.dfsEdgeList},t.prototype.toGraph=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=!1);var n=new rd(t,!0,e);return this.dfsEdgeList.forEach((function(t){var e=t.fromNode,r=t.toNode,i=t.nodeEdgeNodeLabel,o=i.nodeLabel1,a=i.edgeLabel,s=i.nodeLabel2;"-1"!==o&&n.addNode(e,o),"-1"!==s&&n.addNode(r,s),n.addEdge(void 0,e,r,a)})),n},t.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length-1;e>=0;e--){var n=this.dfsEdgeList[e],r=n.fromNode,i=n.toNode;r<i&&(void 0===t||i===t)&&(this.rmpath.push(e),t=r)}return this.rmpath},t.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach((function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)})),Object.keys(t).length},t}(),ad=function(){function t(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},t.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]},t}(),sd=function(){function t(t){var e=t.graphs,n=t.minSupport,r=void 0===n?2:n,i=t.minNodeNum,o=void 0===i?1:i,a=t.maxNodeNum,s=void 0===a?4:a,l=t.top,u=void 0===l?10:l,c=t.directed,d=void 0!==c&&c,h=t.verbose,f=void 0!==h&&h;this.graphs=e,this.dfsCode=new od,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=r,this.top=u,this.directed=d,this.counter=0,this.maxNodeNum=s,this.minNodeNum=o,this.verbose=f,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return t.prototype.findForwardRootEdges=function(t,e){var n=this,r=[],i=t.nodeMap;return e.edges.forEach((function(t){(n.directed||e.label<=i[t.to].label)&&r.push(t)})),r},t.prototype.findBackwardEdge=function(t,e,n,r){if(!this.directed&&e===n)return null;for(var i=t.nodeMap,o=i[n.to].edges,a=o.length,s=0;s<a;s++){var l=o[s];if(!r.hasEdge(l)&&l.to===e.from)if(this.directed){if(i[e.from].label<i[n.to].label||i[e.from].label===i[n.to].label&&e.label<=l.label)return l}else if(e.label<l.label||e.label===l.label&&i[e.to].label<=i[n.to].label)return l}return null},t.prototype.findForwardPureEdges=function(t,e,n,r){for(var i=[],o=e.to,a=t.nodeMap[o].edges,s=a.length,l=0;l<s;l++){var u=a[l],c=t.nodeMap[u.to];n<=c.label&&!r.hasNode(c)&&i.push(u)}return i},t.prototype.findForwardRmpathEdges=function(t,e,n,r){for(var i=[],o=t.nodeMap,a=o[e.to].label,s=o[e.from].edges,l=s.length,u=0;u<l;u++){var c=s[u],d=o[c.to].label;e.to===c.to||n>d||r.hasNode(o[c.to])||(e.label<c.label||e.label===c.label&&a<=d)&&i.push(c)}return i},t.prototype.getSupport=function(t){var e={};return t.forEach((function(t){e[t.graphId]||(e[t.graphId]=!0)})),Object.keys(e).length},t.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach((function(n){var r=t[n],i=r.nodeLabel1,o=r.edgeLabel,a=r.nodeLabel2;e?(i<e.nodeLabel1||i===e.nodeLabel1&&o<e.edgeLabel||i===e.nodeLabel1&&o===e.edgeLabel&&a<e.nodeLabel2)&&(e={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}):e={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}})),e},t.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),1===e.dfsEdgeList.length)return!0;var n=this.directed,r=e.toGraph(-1,n),i=r.nodeMap,o=new od,a={};r.nodes.forEach((function(e){t.findForwardRootEdges(r,e).forEach((function(t){var n=i[t.to],o=e.label+"-"+t.label+"-"+n.label;a[o]||(a[o]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:n.label});var s={graphId:r.id,edge:t,preNode:null};a[o].projected.push(s)}))}));var s=this.findMinLabel(a);o.dfsEdgeList.push(new id(0,1,s.nodeLabel1,s.edgeLabel,s.nodeLabel2));var l=s.nodeLabel1+"-"+s.edgeLabel+"-"+s.nodeLabel2;return function a(s){for(var l=o.buildRmpath(),u=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,c=o.dfsEdgeList[l[0]].toNode,d={},h=!1,f=0,p=n?-1:0,g=function(e){if(h)return"break";s.forEach((function(n){var i=new ad(n),a=t.findBackwardEdge(r,i.edges[l[e]],i.edges[l[0]],i);a&&(d[a.label]||(d[a.label]={projected:[],edgeLabel:a.label}),d[a.label].projected.push({graphId:r.id,edge:d,preNode:n}),f=o.dfsEdgeList[l[e]].fromNode,h=!0)}))},v=l.length-1;v>p;v--){if("break"===g(v))break}if(h){var m=t.findMinLabel(d);o.dfsEdgeList.push(new id(c,f,"-1",m.edgeLabel,"-1"));var y=o.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[y]===o.dfsEdgeList[y]&&a(d[m.edgeLabel].projected)}var b={};h=!1;var x=0;s.forEach((function(e){var n=new ad(e),o=t.findForwardPureEdges(r,n.edges[l[0]],u,n);o.length>0&&(h=!0,x=c,o.forEach((function(t){var n=t.label+"-"+i[t.to].label;b[n]||(b[n]={projected:[],edgeLabel:t.label,nodeLabel2:i[t.to].label}),b[n].projected.push({graphId:r.id,edge:t,preNode:e})})))}));var w=l.length,C=function(e){if(h)return"break";var n=l[e];s.forEach((function(e){var a=new ad(e),s=t.findForwardRmpathEdges(r,a.edges[n],u,a);s.length>0&&(h=!0,x=o.dfsEdgeList[n].fromNode,s.forEach((function(t){var n=t.label+"-"+i[t.to].label;b[n]||(b[n]={projected:[],edgeLabel:t.label,nodeLabel2:i[t.to].label}),b[n].projected.push({graphId:r.id,edge:t,preNode:e})})))}))};for(v=0;v<w;v++){if("break"===C(v))break}if(!h)return!0;var S=t.findMinLabel(b);o.dfsEdgeList.push(new id(x,c+1,"-1",S.edgeLabel,S.nodeLabel2));var k=o.dfsEdgeList.length-1;return e.dfsEdgeList[k]===o.dfsEdgeList[k]&&a(b[S.edgeLabel+"-"+S.nodeLabel2].projected)}(a[l].projected)},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(Pl(t))}},t.prototype.subGraphMining=function(t){var e=this;if(!(this.getSupport(t)<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),r=this.dfsCode.buildRmpath(),i=this.dfsCode.dfsEdgeList[r[0]].toNode,o=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,a={},s={};t.forEach((function(t){for(var l=e.graphs[t.graphId],u=l.nodeMap,c=new ad(t),d=r.length-1;d>=0;d--){var h=e.findBackwardEdge(l,c.edges[r[d]],c.edges[r[0]],c);if(h){var f=e.dfsCode.dfsEdgeList[r[d]].fromNode+"-"+h.label;s[f]||(s[f]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[r[d]].fromNode,edgeLabel:h.label}),s[f].projected.push({graphId:t.graphId,edge:h,preNode:t})}}if(!(n>=e.maxNodeNum)){e.findForwardPureEdges(l,c.edges[r[0]],o,c).forEach((function(e){var n=i+"-"+e.label+"-"+u[e.to].label;a[n]||(a[n]={projected:[],fromNodeId:i,edgeLabel:e.label,nodeLabel2:u[e.to].label}),a[n].projected.push({graphId:t.graphId,edge:e,preNode:t})}));var p=function(n){e.findForwardRmpathEdges(l,c.edges[r[n]],o,c).forEach((function(i){var o=e.dfsCode.dfsEdgeList[r[n]].fromNode+"-"+i.label+"-"+u[i.to].label;a[o]||(a[o]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[r[n]].fromNode,edgeLabel:i.label,nodeLabel2:u[i.to].label}),a[o].projected.push({graphId:t.graphId,edge:i,preNode:t})}))};for(d=0;d<r.length;d++)p(d)}})),Object.keys(s).forEach((function(t){var n=s[t],r=n.toNodeId,o=n.edgeLabel;e.dfsCode.dfsEdgeList.push(new id(i,r,"-1",o,"-1")),e.subGraphMining(s[t].projected),e.dfsCode.dfsEdgeList.pop()})),Object.keys(a).forEach((function(t){var n=a[t],r=n.fromNodeId,o=n.edgeLabel,s=n.nodeLabel2;e.dfsCode.dfsEdgeList.push(new id(r,i+1,"-1",o,s)),e.subGraphMining(a[t].projected),e.dfsCode.dfsEdgeList.pop()}))}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,i={},o={},a={},s={};return Object.keys(t).forEach((function(n){var r=t[n],l=r.nodeMap;r.nodes.forEach((function(t,r){var u=t.label,c=n+"-"+u;if(!a[c]){var d=i[u]||0;d++,i[u]=d}a[c]={graphKey:n,label:u},t.edges.forEach((function(t){var r=u,i=l[t.to].label;if(!e&&r>i){var a=i;i=r,r=a}var c=t.label,d=n+"-"+r+"-"+c+"-"+i,h=r+"-"+c+"-"+i;if(!o[h]){var f=o[h]||0;f++,o[h]=f}s[d]={graphId:n,nodeLabel1:r,edgeLabel:c,nodeLabel2:i}}))}))})),Object.keys(i).forEach((function(t){if(!(i[t]<n)){var e={nodes:[],edges:[]};e.nodes.push({id:"0",label:t}),r.push(e)}})),r},t.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs;this.directed;var n={};Object.keys(e).forEach((function(r){var i=e[r],o=i.nodeMap;i.nodes.forEach((function(e){t.findForwardRootEdges(i,e).forEach((function(t){var i=o[t.to],a=e.label+"-"+t.label+"-"+i.label;n[a]||(n[a]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:i.label});var s={graphId:r,edge:t,preNode:null};n[a].projected.push(s)}))}))})),Object.keys(n).forEach((function(e){var r=n[e],i=r.projected,o=r.nodeLabel1,a=r.edgeLabel,s=r.nodeLabel2;t.dfsCode.dfsEdgeList.push(new id(0,1,o,a,s)),t.subGraphMining(i),t.dfsCode.dfsEdgeList.pop()}))}},t}(),ld=function(t){var e=t.graphs,n=t.directed,r=void 0!==n&&n,i=t.nodeLabelProp,o=void 0===i?"cluster":i,a=t.edgeLabelProp,s=void 0===a?"cluster":a,l=function(t,e,n,r){var i={};return Object.keys(t).forEach((function(o,a){var s=t[o],l=new rd(a,!0,e),u={};s.nodes.forEach((function(t,e){l.addNode(e,t[n]),u[t.id]=e})),s.edges.forEach((function(t,e){var n=u[t.source],i=u[t.target];l.addEdge(-1,n,i,t[r])})),l&&l.getNodeNum()&&(i[l.id]=l)})),i}(e,r,o,s),u=t.minSupport,c=t.maxNodeNum,d=t.minNodeNum,h=t.verbose,f=t.top,p=new sd({graphs:l,minSupport:u,maxNodeNum:c,minNodeNum:d,top:f,verbose:h,directed:r});return p.run(),function(t,e,n){var r=[];return t.forEach((function(t){var i={nodes:[],edges:[]};t.nodes.forEach((function(t){var n;i.nodes.push(((n={id:""+t.id})[e]=t.label,n))})),t.edges.forEach((function(t){var e;i.edges.push(((e={source:""+t.from,target:""+t.to})[n]=t.label,e))})),r.push(i)})),r}(p.frequentSubgraphs,o,s)},ud=function(t,e,n,r){void 0===n&&(n="cluster"),void 0===r&&(r=2);var i=[],o=t.nodes;return e.forEach((function(t,e){i.push(cd(o,t,e,n,r))})),i},cd=function(t,e,n,r,i){var o=[n],a=[],s={};return e.forEach((function(e,l){if(e<=i&&n!==l){o.push(l),a.push(t[l]);var u=t[l][r];s[u]?(s[u].count++,s[u].dists.push(e)):s[u]={count:1,dists:[e]}}})),Object.keys(s).forEach((function(t){s[t].dists=s[t].dists.sort((function(t,e){return t-e}))})),{nodeIdx:n,nodeId:t[n].id,nodeIdxs:o,neighbors:a,neighborNum:o.length-1,nodeLabelCountMap:s}},dd=function(t,e,n,r){var i=n.nodes;return r||(r={}),Object.keys(t).forEach((function(o){var a,s;if(!r||!r[o]){r[o]={nodes:[],edges:[]};var l=t[o],u=null===(a=e[l.start])||void 0===a?void 0:a.nodeIdxs,c=null===(s=e[l.end])||void 0===s?void 0:s.nodeIdxs;if(u&&c){var d=new Set(c),h=u.filter((function(t){return d.has(t)}));if(h&&h.length){for(var f={},p=h.length,g=0;g<p;g++){var v=i[h[g]];r[o].nodes.push(v),f[v.id]=!0}n.edges.forEach((function(t){f[t.source]&&f[t.target]&&r[o].edges.push(t)}))}}}})),r},hd=function(t,e,n,r){var i={};t.nodes.forEach((function(t){i[t.id]=t}));var o=0;return t.edges.forEach((function(t){var a=i[t.source][n],s=i[t.target][n],l=null==e?void 0:e.nodes[0][n],u=null==e?void 0:e.nodes[1][n],c=null==e?void 0:e.edges[0][r];t[r]===c&&(a===l&&s===u||a===u&&s===l)&&o++})),o},fd=function(t,e){var n={},r={};return t.forEach((function(t,i){n[t.id]={idx:i,node:t,degree:0,inDegree:0,outDegree:0};var o=t[e];r[o]||(r[o]=[]),r[o].push(t)})),{nodeMap:n,nodeLabelMap:r}},pd=function(t,e,n){var r={},i={};return t.forEach((function(t,o){r[""+Ac]={idx:o,edge:t};var a=t[e];i[a]||(i[a]=[]),i[a].push(t);var s=n[t.source];s&&(s.degree++,s.outDegree++);var l=n[t.target];l&&(l.degree++,l.inDegree++)})),{edgeMap:r,edgeLabelMap:i}},gd=function(t,e,n){var r=e.length,i={};return e.forEach((function(e,o){for(var a=n?0:o+1,s=t[o].id,l=a;l<r;l++)if(o!==l){var u=t[l].id,c=e[l];i[s+"-"+u]=c,n||(i[u+"-"+s]=c)}})),i},vd=function(t,e,n,r,i,o,a,s,l,u,c){var d,h=e.id+"-"+n.id;if(u&&u[h])return u[h];var f=c?c[h]:void 0;if(!f){var p=((d={})[h]={start:r[e.id].idx,end:r[n.id].idx,distance:i},d);f=(c=dd(p,o,t,c))[h]}return hd(f,a,s,l)},md=function(t,e,n,r){var i,o,a,s=null===(i=t[e])||void 0===i?void 0:i.degree,l=null===(o=t[e])||void 0===o?void 0:o.inDegree,u=null===(a=t[e])||void 0===a?void 0:a.outDegree;return void 0===t[e]&&(s=1/0,l=1/0,u=1/0,r[e].forEach((function(t){var e=n[t.id].degree;s>e&&(s=e);var r=n[t.id].inDegree;l>r&&(l=r);var i=n[t.id].outDegree;u>i&&(u=i)})),t[e]={degree:s,inDegree:l,outDegree:u}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:l,minPatternNodeLabelOutDegree:u}},yd=function(t,e,n,r,i,o,a){if(void 0===n&&(n=!1),void 0===o&&(o="cluster"),void 0===a&&(a="cluster"),t&&t.nodes){var s=t.nodes.length;if(s){var l=Vc(t,n),u=Vc(e,n),c=gd(t.nodes,l,n),d=gd(e.nodes,u,n),h=fd(t.nodes,o),f=h.nodeMap,p=h.nodeLabelMap,g=fd(e.nodes,o),v=g.nodeMap,m=g.nodeLabelMap;pd(t.edges,a,f);var y=pd(e.edges,a,v).edgeLabelMap;i||(i=Math.max.apply(Math,os(os([],u[0]),[2]))),r||(r=i);var b=ud(t,l,o,r),x=ud(e,u,o,r),w=function(t,e,n,r,i){var o=Math.ceil(n/e),a={},s=0;return r.forEach((function(t,r){for(var l=0,u=0,c=t.nodeIdxs,d=t.neighborNum-1;l<o;){for(var h=c[1+Math.floor(Math.random()*d)],f=0;(a[r+"-"+h]||a[h+"-"+r])&&(h=Math.floor(Math.random()*e),!(++f>2*e)););if(f<2*e&&(a[r+"-"+h]={start:r,end:h,distance:i[r][h]},l++,++s>=n))return a;if(++u>2*e)break}l<o&&(o=(o+(o-l))/(e-r-1))})),a}(0,s,Math.min(100,s*(s-1)/2),x,l),C=dd(w,b,t),S=ld({graphs:C,nodeLabelProp:o,edgeLabelProp:a,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:n}).slice(0,10),k=S.length,E=[];S.forEach((function(t,e){E[e]={},Object.keys(C).forEach((function(n){var r=C[n],i=hd(r,t,o,a);E[e][n]=i}))}));var M=function(t,e,n){for(var r=1/0,i=0,o=function(e){var n=t[e],o=Object.keys(n).sort((function(t,e){return n[t]-n[e]})),a=[];o.forEach((function(t,e){a[e%10]||(a[e%10]={graphs:[],totalCount:0,aveCount:0}),a[e%10].graphs.push(t),a[e%10].totalCount+=n[t]}));var s=0,l=[];a.forEach((function(t){var e=t.totalCount/t.graphs.length;t.aveCount=e,l.push(e);var r=0,i=t.length;t.graphs.forEach((function(e,i){var o=n[e];t.graphs.forEach((function(t,e){i!==e&&(r+=Math.abs(o-n[t]))}))})),s+=r/=i*(i-1)/2})),s/=a.length;var u=0;l.forEach((function(t,e){l.forEach((function(n,r){e!==r&&(u+=Math.abs(t-n))})),u/=l.length*(l.length-1)/2}));var c=u-s;r<c&&(r=c,i=e)},a=0;a<e;a++)o(a);return{structure:n[i],structureCountMap:t[i]}}(E,k,S),A=M.structure,_=M.structureCountMap,T=e.nodes[0],P=T[o],I=p[P],D={},O={},R={},L={},B={},F={};Object.keys(m).forEach((function(r,i){B[r]=[],n&&(F[r]=[]);var s=m[r],l={};s.forEach((function(t){var e=d[T.id+"-"+t.id];if(e&&B[r].push(e),l[T.id+"-"+t.id]={start:0,end:v[t.id].idx,distance:e},n){var i=d[t.id+"-"+T.id];i&&F[r].push(i)}})),B[r]=B[r].sort((function(t,e){return t-e})),n&&(F[r]=F[r].sort((function(t,e){return t-e}))),O=dd(l,x,e,O);var u=[];if(Object.keys(l).forEach((function(t){if(R[t])u.push(R[t]);else{var e=O[t];R[t]=hd(e,A,o,a),u.push(R[t])}})),u=u.sort((function(t,e){return e-t})),L[T.id+"-"+r]=u,r!==P)for(var h=function(e){var n=I[e],i=b[f[n.id].idx],s=i.nodeLabelCountMap[r],l=m[r].length;if(!s||s.count<l)return I.splice(e,1),"continue";for(var d=!1,h=0;h<l;h++)if(s.dists[h]>B[r][h]){d=!0;break}if(d)return I.splice(e,1),"continue";var p={};i.neighbors.forEach((function(t){var e=c[n.id+"-"+t.id];p[n.id+"-"+t.id]={start:f[n.id].idx,end:f[t.id].idx,distance:e}})),C=dd(p,b,t,C);var g=[];Object.keys(p).forEach((function(t){if(_[t])g.push(_[t]);else{var e=C[t];_[t]=hd(e,A,o,a),g.push(_[t])}})),g=g.sort((function(t,e){return e-t}));var v=!1;for(h=0;h<l;h++)if(g[h]<u[h]){v=!0;break}return v?(I.splice(e,1),"continue"):void 0},p=I.length-1;p>=0;p--)h(p)}));var N=[];I.forEach((function(r){for(var s=f[r.id].idx,u=cd(t.nodes,l[s],s,o,i).neighbors,d=!1,h=u.length-1;h>=0;h--){if(u.length+1<e.nodes.length)return void(d=!0);var p=u[h],g=p[o];if(m[g]&&m[g].length)if(B[g]&&B[g].length){var y=r.id+"-"+p.id,x=c[y],w=B[g].length-1;if(x>B[g][w])u.splice(h,1);else{if(n){var S=p.id+"-"+r.id,k=c[S];if(w=F[g].length-1,k>F[g][w]){u.splice(h,1);continue}}var E=_[y]?_[y]:vd(t,r,p,f,x,b,A,o,a,_,C),M=T.id+"-"+g;if(E<L[M][L[M].length-1])u.splice(h,1);else{var P=md(D,g,v,m),I=P.minPatternNodeLabelDegree;P.minPatternNodeLabelInDegree,P.minPatternNodeLabelOutDegree,f[p.id].degree<I&&u.splice(h,1)}}}else u.splice(h,1);else u.splice(h,1)}d||N.push({nodes:[r].concat(u)})}));var z=jc(e,T.id,!1).length,j={};n?(Object.keys(z).forEach((function(t){var e=v[t].node[o];j[e]?j[e].push(z[t]):j[e]=[z[t]]})),Object.keys(j).forEach((function(t){j[t].sort((function(t,e){return t-e}))}))):j=B;for(var G=function(r){var i=N[r],s=i.nodes[0],l={},u={};i.nodes.forEach((function(t,e){u[t.id]={idx:e,node:t,degree:0,inDegree:0,outDegree:0};var n=t[o];l[n]?l[n]++:l[n]=1}));var c=[],d={};t.edges.forEach((function(t){u[t.source]&&u[t.target]&&(c.push(t),d[t[a]]?d[t[a]]++:d[t[a]]=1,u[t.source].degree++,u[t.target].degree++,u[t.source].outDegree++,u[t.target].inDegree++)}));for(var h=Object.keys(y).length,p=!1,g=0;g<h;g++){var b=Object.keys(y)[g];if(!d[b]||d[b]<y[b].length){p=!0;break}}if(p)return N.splice(r,1),"continue";var x=c.length;if(x<e.edges.length)return N.splice(r,1),"break";var w=!1,C=function(t){var e=c[t],r=e[a],i=y[r];if(!i||!i.length)return d[r]--,i&&d[r]<i.length?(w=!0,"break"):(c.splice(t,1),u[e.source].degree--,u[e.target].degree--,u[e.source].outDegree--,u[e.target].inDegree--,"continue");var s=u[e.source].node[o],l=u[e.target].node[o],h=!1;return i.forEach((function(t){var e=v[t.source].node,r=v[t.target].node;e[o]===s&&r[o]===l&&(h=!0),n||e[o]!==l||r[o]!==s||(h=!0)})),h?void 0:(d[r]--,i&&d[r]<i.length?(w=!0,"break"):(c.splice(t,1),u[e.source].degree--,u[e.target].degree--,u[e.source].outDegree--,u[e.target].inDegree--,"continue"))};for(g=x-1;g>=0;g--){if("break"===C(g))break}if(w)return N.splice(r,1),"continue";i.edges=c;var S=jc(i,i.nodes[0].id,!1).length;if(Object.keys(S).reverse().forEach((function(t){if(t!==i.nodes[0].id&&!w){if(S[t]===1/0){var e=u[t].node[o];if(l[e]--,l[e]<m[e].length)return void(w=!0);var n=i.nodes.indexOf(u[t].node);return i.nodes.splice(n,1),void(u[t]=void 0)}var r=f[t].node[o];if(!j[r]||!j[r].length||S[t]>j[r][j[r].length-1]){e=u[t].node[o];if(l[e]--,l[e]<m[e].length)return void(w=!0);n=i.nodes.indexOf(u[t].node);i.nodes.splice(n,1),u[t]=void 0}}})),w)return N.splice(r,1),"continue";for(var k=!0,E=0;k&&!w;){if(k=!1,n?u[s.id].degree<v[T.id].degree||u[s.id].inDegree<v[T.id].inDegree||u[s.id].outDegree<v[T.id].outDegree:u[s.id].degree<v[T.id].degree){w=!0;break}if(l[s[o]]<m[s[o]].length){w=!0;break}for(var M=i.nodes.length-1;M>=0;M--){var A=i.nodes[M],_=u[A.id].degree,P=u[A.id].inDegree,I=u[A.id].outDegree,O=A[o],R=md(D,O,v,m),L=R.minPatternNodeLabelDegree,B=R.minPatternNodeLabelInDegree,F=R.minPatternNodeLabelOutDegree;if(n?_<L||P<B||I<F:_<L){if(l[A[o]]--,l[A[o]]<m[A[o]].length){w=!0;break}i.nodes.splice(M,1),u[A.id]=void 0,k=!0}}if(w||!k&&0!==E)break;for(var z=(x=c.length)-1;z>=0;z--){var G=c[z];if(!u[G.source]||!u[G.target]){c.splice(z,1);var U=G[a];if(d[U]--,u[G.source]&&(u[G.source].degree--,u[G.source].outDegree--),u[G.target]&&(u[G.target].degree--,u[G.target].inDegree--),y[U]&&d[U]<y[U].length){w=!0;break}k=!0}}E++}return w||w||i.nodes.length<e.nodes.length||c.length<e.edges.length?(N.splice(r,1),"continue"):void 0},U=N.length-1;U>=0;U--){if("break"===G(U))break}var $=N.length,V=function(t){var e=N[t],n={};e.edges.forEach((function(t){var e=t.source+"-"+t.target+"-"+t.label;n[e]?n[e]++:n[e]=1}));for(var r=function(t){var e=N[t],r={};e.edges.forEach((function(t){var e=t.source+"-"+t.target+"-"+t.label;r[e]?r[e]++:r[e]=1}));var i=!0;Object.keys(r).length!==Object.keys(n).length?i=!1:Object.keys(n).forEach((function(t){r[t]!==n[t]&&(i=!1)})),i&&N.splice(t,1)},i=$-1;i>t;i--)r(i);$=N.length};for(U=0;U<=$-1;U++)V(U);return N}}},bd=function(){function t(t){void 0===t&&(t=10),this.linkedList=new Sc,this.maxStep=t}return Object.defineProperty(t.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},t.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},t.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},t.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toArray=function(){return this.linkedList.toArray().map((function(t){return t.value}))},t.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},t}(),xd=Bc,wd={getAdjMatrix:xc,breadthFirstSearch:_c,connectedComponent:Pc,getDegree:Ic,getInDegree:Dc,getOutDegree:Oc,detectCycle:Bc,detectDirectedCycle:xd,detectAllCycles:zc,detectAllDirectedCycle:Nc,detectAllUndirectedCycle:Fc,depthFirstSearch:Lc,dijkstra:jc,findAllPath:$c,findShortestPath:Uc,floydWarshall:Vc,labelPropagation:Wc,louvain:Yc,minimumSpanningTree:Jc,pageRank:td,getNeighbors:Ec,Stack:bd,GADDI:yd},Cd=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getAdjMatrix:xc,breadthFirstSearch:_c,connectedComponent:Pc,getDegree:Ic,getInDegree:Dc,getOutDegree:Oc,detectCycle:Bc,detectDirectedCycle:xd,detectAllCycles:zc,detectAllDirectedCycle:Nc,detectAllUndirectedCycle:Fc,depthFirstSearch:Lc,dijkstra:jc,findAllPath:$c,findShortestPath:Uc,floydWarshall:Vc,labelPropagation:Wc,louvain:Yc,minimumSpanningTree:Jc,pageRank:td,getNeighbors:Ec,Stack:bd,GADDI:yd,default:wd}),Sd=yc,kd=function(t,e,n){return t>=e&&t<=n},Ed=function(t,e,n,r){var i=n.x-t.x,o=n.y-t.y,a=e.x-t.x,s=e.y-t.y,l=r.x-n.x,u=r.y-n.y,c=a*u-s*l,d=1/c;if(c*c>1e-4*(a*a+s*s)*(l*l+u*u)){var h=(i*u-o*l)*d,f=(i*s-o*a)*d;return kd(h,0,1)&&kd(f,0,1)?{x:t.x+h*a,y:t.y+h*s}:null}return null},Md=function(t,e){var n=t.x,r=t.y,i=t.width,o=t.height,a=[],s={x:n+i/2,y:r+o/2};a.push({x:n,y:r}),a.push({x:n+i,y:r}),a.push({x:n+i,y:r+o}),a.push({x:n,y:r+o}),a.push({x:n,y:r});for(var l=null,u=1;u<a.length&&!(l=Ed(a[u-1],a[u],s,e));u++);return l},Ad=function(t,e){var n=t.x,r=t.y,i=t.r,o=e.x-n,a=e.y-r;if(Math.sqrt(o*o+a*a)<i)return null;var s=Math.sign(o),l=Math.sign(a),u=Math.atan(a/o);return{x:n+Math.abs(i*Math.cos(u))*s,y:r+Math.abs(i*Math.sin(u))*l}},_d=function(t,e){var n=t.rx,r=t.ry,i=t.x,o=t.y,a=e.x-i,s=e.y-o,l=Math.atan2(s/r,a/n);return l<0&&(l+=2*Math.PI),{x:i+n*Math.cos(l),y:o+r*Math.sin(l)}},Td=function(t,e,n){void 0===n&&(n=1);var r=[t.x,t.y,n];return e&&!isNaN(e[0])||(e=[1,0,0,0,1,0,0,0,1]),ju(r,r,e),{x:r[0],y:r[1]}},Pd=function(t,e,n){void 0===n&&(n=1),e&&!isNaN(e[0])||(e=[1,0,0,0,1,0,0,0,1]);var r=su([1,0,0,0,1,0,0,0,1],e);r||(r=[1,0,0,0,1,0,0,0,1]);var i=[t.x,t.y,n];return ju(i,i,r),{x:i[0],y:i[1]}},Id=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=t.x-n.x,a=t.y-n.y,s=(t.x*t.x-e.x*e.x-e.y*e.y+t.y*t.y)/2,l=(t.x*t.x-n.x*n.x-n.y*n.y+t.y*t.y)/2,u=i*o-r*a;return{x:-(a*s-i*l)/u,y:-(r*l-o*s)/u}},Dd=function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},Od=function(t,e){t.translate(e.x,e.y)},Rd=function(t,e,n,r){void 0===r&&(r={duration:500});var i=t.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var o=t.getCanvasBBox(),a=e.x-o.minX,s=e.y-o.minY;if(n){var l=a*i[0],u=s*i[4],c=0,d=0,h=0,f=0;t.animate((function(t){return i=Sd(i,[["t",(h=l*t)-c,(f=u*t)-d]]),c=h,d=f,{matrix:i}}),r)}else{var p=Sd(i,[["t",a,s]]);t.setMatrix(p)}};function Ld(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}var Bd=function(t,e,n){var r=!1,i=t.length;function o(t){return Math.abs(t)<1e-6?0:t<0?-1:1}if(i<=2)return!1;for(var a=0;a<i;a++){var s=t[a],l=t[(a+1)%i];if(Ld(s,l,[e,n]))return!0;o(s[1]-n)>0!=o(l[1]-n)>0&&o(e-(n-s[1])*(s[0]-l[0])/(s[1]-l[1])-s[0])<0&&(r=!r)}return r},Fd=function(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)},Nd=function(t,e){var n=function(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,n),maxY:Math.max.apply(null,n)}},r=function(t){for(var e=[],n=t.length,r=0;r<n-1;r++){var i=t[r],o=t[r+1];e.push({from:{x:i[0],y:i[1]},to:{x:o[0],y:o[1]}})}if(e.length>1){var a=t[0],s=t[n-1];e.push({from:{x:s[0],y:s[1]},to:{x:a[0],y:a[1]}})}return e};if(t.length<2||e.length<2)return!1;var i=n(t),o=n(e);if(!Fd(i,o))return!1;var a=!1;if(bs(e,(function(e){if(Bd(t,e[0],e[1]))return a=!0,!1})),a)return!0;if(bs(t,(function(t){if(Bd(e,t[0],t[1]))return a=!0,!1})),a)return!0;var s=r(t),l=r(e),u=!1;return bs(l,(function(t){if(function(t,e){var n=!1;return bs(t,(function(t){if(Ed(t.from,t.to,e.from,e.to))return n=!0,!1})),n}(s,t))return u=!0,!1})),u},zd=function(){function t(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r}return t.prototype.getBBox=function(){var t=Math.min(this.x1,this.x2),e=Math.min(this.y1,this.y2),n=Math.max(this.x1,this.x2),r=Math.max(this.y1,this.y2);return{x:t,y:e,minX:t,minY:e,maxX:n,maxY:r,width:n-t,height:r-e}},t}(),jd=function(t,e){return{top:[t.minX,t.minY,t.maxX,t.minY],left:[t.minX,t.minY,t.minX,t.maxY],bottom:[t.minX,t.maxY,t.maxX,t.maxY],right:[t.maxX,t.minY,t.maxX,t.maxY]}[e]},Gd=function(t,e){var n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),r=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),i=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(i){var o=n/i,a=r/i;if(o>=0&&o<=1&&a>=0&&a<=1)return o}return Number.POSITIVE_INFINITY},Ud=function(t,e){for(var n=["top","left","bottom","right"],r=t.getBBox(),i=0,o=[],a=0;a<4;a++){var s=jd(r,n[a]),l=s[0],u=s[1],c=s[2],d=s[3];o[a]=Ed({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:l,y:u},{x:c,y:d}),o[a]&&(i+=1)}return[o,i]},$d=function(t,e){for(var n=["top","left","bottom","right"],r=t.getBBox(),i=Number.POSITIVE_INFINITY,o=0,a=0;a<4;a++){var s=jd(r,n[a]),l=s[0],u=s[1],c=s[2],d=s[3],h=Gd(e,new zd(l,u,c,d));(h=Math.abs(h-.5))>=0&&h<=1&&(o+=1,i=h<i?h:i)}return 0===o?-1:i},Vd=function(t){var e=0,n=0;if(t.length>0){for(var r=0,i=t;r<i.length;r++){var o=i[r];e+=o.x,n+=o.y}e/=t.length,n/=t.length}return{x:e,y:n}},Wd=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},Hd=function(t,e){var n,r=e.x1,i=e.y1,o=e.x2-r,a=e.y2-i,s=t.x-r,l=t.y-i,u=s*o+l*a;n=u<=0||(u=(s=o-s)*o+(l=a-l)*a)<=0?0:u*u/(o*o+a*a);var c=s*s+l*l-n;return c<0&&(c=0),c},Yd=function(t,e,n){return void 0===n&&(n=.001),Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<Math.pow(n,2)},Xd=function(t,e){var n=t.x<e.x,r=t.x>e.x+e.width,i=t.y>e.y+e.height,o=t.y<e.y;if(!(n||r||i||o))return 0;if(i&&!n&&!r)return Math.pow(e.y+e.height-t.y,2);if(o&&!n&&!r)return Math.pow(t.y-e.y,2);if(n&&!i&&!o)return Math.pow(e.x-t.x,2);if(r&&!i&&!o)return Math.pow(e.x+e.width-t.x,2);var a=Math.min(Math.abs(e.x-t.x),Math.abs(e.x+e.width-t.x)),s=Math.min(Math.abs(e.y-t.y),Math.abs(e.y+e.height-t.y));return a*a+s*s},qd=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",compare:function(t){return function(e,n){return e[t]-n[t]}},getLineIntersect:Ed,getRectIntersectByPoint:Md,getCircleIntersectByPoint:Ad,getEllipseIntersectByPoint:_d,applyMatrix:Td,invertMatrix:Pd,getCircleCenterByPoints:Id,distance:Dd,scaleMatrix:function(t,e){var n=[];return t.forEach((function(t){var r=[];t.forEach((function(t){r.push(t*e)})),n.push(r)})),n},floydWarshall:function(t){for(var e=[],n=t.length,r=0;r<n;r+=1){e[r]=[];for(var i=0;i<n;i+=1)r===i?e[r][i]=0:0!==t[r][i]&&t[r][i]?e[r][i]=t[r][i]:e[r][i]=1/0}for(var o=0;o<n;o+=1)for(r=0;r<n;r+=1)for(i=0;i<n;i+=1)e[r][i]>e[r][o]+e[o][i]&&(e[r][i]=e[r][o]+e[o][i]);return e},getAdjMatrix:function(t,e){var n=t.nodes,r=t.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){o[t.id]=e;i.push([])})),r&&r.forEach((function(t){var n=t.source,r=t.target,a=o[n],s=o[r];i[a][s]=1,e||(i[s][a]=1)})),i},translate:Od,move:Rd,scale:function(t,e){var n=t.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var r=e;ms(e)||(r=[e,e]),ms(e)&&1===e.length&&(r=[e[0],e[0]]),n=Sd(n,[["s",r[0],r[1]]]),t.setMatrix(n)},rotate:function(t,e){var n=t.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]),n=Sd(n,[["r",e]]),t.setMatrix(n)},getDegree:function(t,e,n){for(var r=[],i=0;i<t;i++)r[i]=0;return n.forEach((function(t){t.source&&(r[e[t.source]]+=1),t.target&&(r[e[t.target]]+=1)})),r},isPointInPolygon:Bd,intersectBBox:Fd,isPolygonsIntersect:Nd,Line:zd,getBBoxBoundLine:jd,itemIntersectByLine:Ud,fractionToLine:$d,getPointsCenter:Vd,squareDist:Wd,pointLineSquareDist:Hd,isPointsOverlap:Yd,pointRectSquareDist:Xd,pointLineDistance:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e.x,s=e.y,l=[i-n,o-r];if(fc(l,[0,0]))return NaN;var u=[-l[1],l[0]];cc(u,u);var c=[a-n,s-r];return Math.abs(dc(c,u))}}),Kd="rgb(95, 149, 255)",Zd="rgb(253, 253, 253)",Qd="rgb(247, 250, 255)",Jd="rgb(224, 224, 224)",th="rgb(224, 224, 224)",eh={version:"0.3.6",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Kd,fill:"rgb(239, 244, 255)"},size:20,color:Kd,linkPoints:{size:8,lineWidth:1,fill:Qd,stroke:Kd}},nodeStateStyles:{active:{fill:Qd,stroke:Kd,lineWidth:2,shadowColor:Kd,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:Kd,lineWidth:4,shadowColor:Kd,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:"#4572d9",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:"rgb(247, 250, 255)",stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:"rgb(250, 250, 250)",stroke:"rgb(224, 224, 224)",lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Jd,lineAppendWidth:2},color:Jd},edgeStateStyles:{active:{stroke:Kd,lineWidth:1},selected:{stroke:Kd,lineWidth:2,shadowColor:Kd,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Kd,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(234, 234, 234)",lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Zd,lineWidth:1,stroke:th,r:5,width:20,height:10},size:[20,5],color:th,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Kd,lineWidth:1,fill:"rgb(247, 250, 255)"},selected:{stroke:Kd,lineWidth:2,fill:Zd,shadowColor:Kd,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"#4572d9",lineWidth:2,fill:Zd,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(224, 224, 224)",fill:Zd,lineWidth:1},disable:{stroke:"rgb(234, 234, 234)",fill:"rgb(250, 250, 250)",lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]}},nh={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},rh=Math.PI,ih=Math.sin,oh=Math.cos,ah=ih(rh/8),sh=oh(rh/8),lh=function(t,e){var n=t.getBBox(),r={x:n.minX,y:n.minY},i={x:n.maxX,y:n.maxY};if(e){var o=e.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),r=Td(r,o),i=Td(i,o)}var a=r.x,s=r.y,l=i.x,u=i.y;return{x:a,y:s,minX:a,minY:s,maxX:l,maxY:u,width:l-a,height:u-s}},uh=function(t){var e=t.sourceNode||t.targetNode,n=e.get("group").getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var r=e.getKeyShape().getBBox(),i=t.loopCfg||{},o=i.dist||2*Math.max(r.width,r.height),a=i.position||eh.defaultLoopPosition,s=[n[6],n[7]],l=[t.startPoint.x,t.startPoint.y],u=[t.endPoint.x,t.endPoint.y],c=r.height/2,d=r.height/2,h=c*ah,f=c*sh,p=d*ah,g=d*sh;if(l[0]===u[0]&&l[1]===u[1]){switch(a){case"top":l=[s[0]-h,s[1]-f],u=[s[0]+p,s[1]-g];break;case"top-right":c=r.height/2,d=r.width/2,l=[s[0]+(h=c*ah),s[1]-(f=c*sh)],u=[s[0]+(g=d*sh),s[1]-(p=d*ah)];break;case"right":c=r.width/2,d=r.width/2,l=[s[0]+(f=c*sh),s[1]-(h=c*ah)],u=[s[0]+(g=d*sh),s[1]+(p=d*ah)];break;case"bottom-right":c=r.width/2,d=r.height/2,l=[s[0]+(f=c*sh),s[1]+(h=c*ah)],u=[s[0]+(p=d*ah),s[1]+(g=d*sh)];break;case"bottom":c=r.height/2,d=r.height/2,l=[s[0]+(h=c*ah),s[1]+(f=c*sh)],u=[s[0]-(p=d*ah),s[1]+(g=d*sh)];break;case"bottom-left":c=r.height/2,d=r.width/2,l=[s[0]-(h=c*ah),s[1]+(f=c*sh)],u=[s[0]-(g=d*sh),s[1]+(p=d*ah)];break;case"left":c=r.width/2,d=r.width/2,l=[s[0]-(f=c*sh),s[1]+(h=c*ah)],u=[s[0]-(g=d*sh),s[1]-(p=d*ah)];break;case"top-left":c=r.width/2,d=r.height/2,l=[s[0]-(f=c*sh),s[1]-(h=c*ah)],u=[s[0]-(p=d*ah),s[1]-(g=d*sh)];break;default:c=r.width/2,d=r.width/2,l=[s[0]-(h=c*ah),s[1]-(f=c*sh)],u=[s[0]+(p=d*ah),s[1]-(g=d*sh)]}if(!1===i.clockwise){var v=[l[0],l[1]];l=[u[0],u[1]],u=[v[0],v[1]]}}var m=[l[0]-s[0],l[1]-s[1]],y=(c+o)/c,b=(d+o)/d;!1===i.clockwise&&(y=(d+o)/d,b=(c+o)/c);var x=sc([0,0],m,y),w=[s[0]+x[0],s[1]+x[1]],C=sc([0,0],[u[0]-s[0],u[1]-s[1]],b),S=[s[0]+C[0],s[1]+C[1]];return t.startPoint={x:l[0],y:l[1]},t.endPoint={x:u[0],y:u[1]},t.controlPoints=[{x:w[0],y:w[1]},{x:S[0],y:S[1]}],t},ch=function(t,e,n,r,i){var o=1e-4,a=[],s=null==t?void 0:t.getPoint(e);if(!s)return{x:0,y:0,angle:0};if(e<o)a=t.getStartTangent().reverse();else if(e>.9999)a=t.getEndTangent();else{var l=null==t?void 0:t.getPoint(e+o);a.push([s.x,s.y]),a.push([l.x,l.y])}var u=Math.atan2(a[1][1]-a[0][1],a[1][0]-a[0][0]);if(u<0&&(u+=2*rh),n&&(s.x+=oh(u)*n,s.y+=ih(u)*n),r){var c=u-rh/2;u>.5*rh&&u<1.5*rh&&(c-=rh),s.x+=oh(c)*r,s.y+=ih(c)*r}var d={x:s.x,y:s.y,angle:u};return i?(u>.5*rh&&u<1.5*rh&&(u-=rh),Za({rotate:u},d)):d},dh=function t(e,n){if(!1===n(e))return!1;if(e&&e.children)for(var r=e.children.length-1;r>=0;r--)if(!t(e.children[r],n))return!1;return!0},hh=function t(e,n){if(e&&e.children)for(var r=e.children.length-1;r>=0;r--)if(!t(e.children[r],n))return;return!1!==n(e)},fh=function(t,e){"function"==typeof e&&dh(t,e)},ph=function(t,e){"function"==typeof e&&hh(t,e)},gh=function(t,e){return e*(nh[t]||1)},vh=function(t,e){var n=0,r=new RegExp("[一-龥]+");return t.split("").forEach((function(t){r.test(t)?n+=e:n+=gh(t,e)})),[n,e]},mh=function(t,e){var n=[],r={},i={};t.forEach((function(t){i[t.id]=t})),t.forEach((function(t,e){var o=Pl(t);o.itemType="combo",o.children=void 0,o.parentId===o.id?(console.warn("The parentId for combo "+o.id+" can not be the same as the combo's id"),delete o.parentId):o.parentId&&!i[o.parentId]&&(console.warn("The parent combo for combo "+o.id+" does not exist!"),delete o.parentId);var a=r[o.id];if(a){if(o.children=a.children,r[o.id]=o,!(a=o).parentId)return void n.push(a);var s=r[a.parentId];if(s)s.children?s.children.push(o):s.children=[o];else{var l={id:a.parentId,children:[a]};r[a.parentId]=l,r[o.id]=o}}else if(zs(t.parentId)){var u=r[t.parentId];if(u)u.children?u.children.push(o):u.children=[o],r[o.id]=o;else{var c={id:t.parentId,children:[o]};r[c.id]=c,r[o.id]=o}}else n.push(o),r[o.id]=o}));var o={};(e||[]).forEach((function(t){o[t.id]=t;var e=r[t.comboId];if(e){var n={id:t.id,comboId:t.comboId};e.children?e.children.push(n):e.children=[n],n.itemType="node",r[t.id]=n}}));var a=0;return n.forEach((function(t){t.depth=a+10,dh(t,(function(t){var e,n=r[t.id].itemType;e="node"===n?r[t.comboId]:r[t.parentId],t.depth=e&&"node"===n?a+1:a+10,a<t.depth&&(a=t.depth);var i=o[t.id];return i&&(i.depth=t.depth),!0}))})),n},yh=function(t,e,n){var r,i=t,o={root:{children:t}},a=!1,s="root";(t||[]).forEach((function(t){if(!a)return t.id===e?(r=t,"combo"===t.itemType?r.parentId=n:r.comboId=n,void(a=!0)):void fh(t,(function(t){return o[t.id]={children:t.children},i=o[t.parentId||t.comboId||"root"].children,!t||!t.removed&&e!==t.id||!i||(s=t.parentId||t.comboId||"root",r=t,"combo"===t.itemType?r.parentId=n:r.comboId=n,a=!0,!1)}))}));var l=(i=o[s].children)?i.indexOf(r):-1;if(l>-1&&i.splice(l,1),a||(r={id:e,itemType:"node",comboId:n},o[e]={children:void 0}),e){var u=!1;if(n){var c=0;(t||[]).forEach((function(t){u||fh(t,(function(t){return n!==t.id||(u=!0,t.children?t.children.push(r):t.children=[r],c=t.depth,"node"===r.itemType?r.depth=c+2:r.depth=c+1,!1)}))}))}else n&&u||"node"===r.itemType||t.push(r);var d=r.depth;fh(r,(function(t){return"node"===t.itemType?d+=2:d+=1,t.depth=d,!0}))}return t},bh=function(t,e){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return t&&0!==t.length?(t.forEach((function(t){var r=e.findById(t.id);if(r&&r.isVisible()){r.set("bboxCanvasCache",void 0);var i=r.getCanvasBBox();i.x&&n.minX>i.minX&&(n.minX=i.minX),i.y&&n.minY>i.minY&&(n.minY=i.minY),i.x&&n.maxX<i.maxX&&(n.maxX=i.maxX),i.y&&n.maxY<i.maxY&&(n.maxY=i.maxY)}})),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,Object.keys(n).forEach((function(t){n[t]!==1/0&&n[t]!==-1/0||(n[t]=void 0)})),n):n},xh=function(t){var e={};return Object.keys(t).forEach((function(n){var r=t[n];if(ys(r)){var i={};Object.keys(r).forEach((function(t){var e=r[t];("img"!==t||zs(e))&&(i[t]=Pl(e))})),e[n]=i}else e[n]=Pl(r)})),e},wh=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getBBox:lh,getLoopCfgs:uh,getLabelPosition:ch,traverseTree:fh,traverseTreeUp:ph,getLetterWidth:gh,getTextSize:vh,plainCombosToTrees:mh,reconstructTree:yh,getComboBBox:bh,shouldRefreshEdge:function(t){var e=el(t.x)||el(t.y)||t.type||t.anchorPoints||t.size;return t.style&&(e=e||el(t.style.r)||el(t.style.width)||el(t.style.height)||el(t.style.rx)||el(t.style.ry)),e},cloneBesidesImg:xh}),Ch=function(t){if(!t)return console.error("G6 Error Tips: the data must be defined"),!1;var e=t.nodes,n=t.edges,r=t.combos,i=void 0===r?[]:r;if(!e&&!n){var o=!0;return fh(t,(function(t){return!!zs(t.id)||(o=!1,!1)})),o}var a=(e||[]).find((function(t){return!zs(t.id)}));if(a)return console.warn("G6 Warning Tips: missing 'id' property, or %c"+a.id+"%c is not a string.","font-size: 20px; color: red;",""),!1;var s=(e||[]).map((function(t){return t.id})),l=i.map((function(t){return t.id})),u=os(os([],s),l),c=(n||[]).find((function(t){return!u.includes(t.source)||!u.includes(t.target)}));return!c||(console.warn("G6 Warning Tips: The source %c"+c.source+"%c or the target %c"+c.target+"%c of the edge do not exist in the nodes or combos.","font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1)},Sh=function(){function t(t){this.graph=t,this.destroyed=!1,this.modes=t.get("modes")||{default:[]},this.formatModes(),this.mode=t.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return t.prototype.formatModes=function(){bs(this.modes,(function(t){bs(t,(function(e,n){zs(e)&&(t[n]={type:e})}))}))},t.prototype.setBehaviors=function(t){var e,n=this.graph,r=this.modes[t],i=[];bs(r||[],(function(t){var r=nu.getBehavior(t.type||t);r&&(e=new r(t))&&(e.bind(n),i.push(e))})),this.currentBehaves=i},t.mergeBehaviors=function(t,e){return bs(e,(function(e){t.indexOf(e)<0&&(zs(e)&&(e={type:e}),t.push(e))})),t},t.filterBehaviors=function(t,e){var n=[];return t.forEach((function(t){var r="";r=zs(t)?t:t.type,e.indexOf(r)<0&&n.push(t)})),n},t.prototype.setMode=function(t){var e=this.modes,n=this.graph,r=t;e[r]&&(n.emit("beforemodechange",{mode:t}),bs(this.currentBehaves,(function(t){t.delegate&&t.delegate.remove(),t.unbind(n)})),this.setBehaviors(r),n.emit("aftermodechange",{mode:t}),this.mode=t)},t.prototype.getMode=function(){return this.mode},t.prototype.manipulateBehaviors=function(e,n,r){var i,o=this;if(i=ms(e)?e:[e],ms(n))return bs(n,(function(e){o.modes[e]?o.modes[e]=r?t.mergeBehaviors(o.modes[e]||[],i):t.filterBehaviors(o.modes[e]||[],i):r&&(o.modes[e]=i)})),this;var a=n;return n||(a=this.mode),this.modes[a]||r&&(this.modes[a]=i),this.modes[a]=r?t.mergeBehaviors(this.modes[a]||[],i):t.filterBehaviors(this.modes[a]||[],i),this.setMode(this.mode),this},t.prototype.updateBehavior=function(t,e,n){zs(t)&&(t={type:t});var r=[];if(n&&n!==this.mode&&"default"!==n){if(!(r=this.modes[n])||!r.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var i=r.length;for(a=0;a<i;a++){if((s=r[a]).type===t.type||s===t.type)return s===t.type&&(s={type:s}),Object.assign(s,e),r[a]=s,this;a===i-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(r=this.currentBehaves)||!r.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var o=r.length,a=0;a<o;a++){var s;if((s=r[a]).type===t.type)return s.updateCfg(e),this;a===o-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},t.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},t}(),kh="\t\n\v\f\r   ᠎             　\u2028\u2029",Eh=new RegExp("([a-z])["+kh+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+kh+"]*,?["+kh+"]*)+)","ig"),Mh=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+kh+"]*,?["+kh+"]*","ig"),Ah=function(t){if(!t)return null;if(ms(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(Eh,(function(r,i,o){var a=[],s=i.toLowerCase();if(o.replace(Mh,(function(t,e){e&&a.push(+e)})),"m"===s&&a.length>2&&(n.push([i].concat(a.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===a.length&&n.push([i,a[0]]),"r"===s)n.push([i].concat(a));else for(;a.length>=e[s]&&(n.push([i].concat(a.splice(0,e[s]))),e[s]););return t})),n},_h=function(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var o=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4===r?o[3]={x:+t[0],y:+t[1]}:i-2===r&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4===r?o[3]=o[2]:r||(o[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n},Th=function(t,e,n,r,i){var o=[];if(null===i&&null===r&&(r=n),t=+t,e=+e,n=+n,r=+r,null!==i){var a=Math.PI/180,s=t+n*Math.cos(-r*a),l=t+n*Math.cos(-i*a);o=[["M",s,e+n*Math.sin(-r*a)],["A",n,n,0,+(i-r>180),0,l,e+n*Math.sin(-i*a)]]}else o=[["M",t,e],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return o},Ph=function(t){if(!(t=Ah(t))||!t.length)return[["M",0,0]];var e,n,r=[],i=0,o=0,a=0,s=0,l=0;"M"===t[0][0]&&(a=i=+t[0][1],s=o=+t[0][2],l++,r[0]=["M",i,o]);for(var u=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),c=void 0,d=void 0,h=l,f=t.length;h<f;h++){if(r.push(c=[]),(e=(d=t[h])[0])!==e.toUpperCase())switch(c[0]=e.toUpperCase(),c[0]){case"A":c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=+d[6]+i,c[7]=+d[7]+o;break;case"V":c[1]=+d[1]+o;break;case"H":c[1]=+d[1]+i;break;case"R":for(var p=2,g=(n=[i,o].concat(d.slice(1))).length;p<g;p++)n[p]=+n[p]+i,n[++p]=+n[p]+o;r.pop(),r=r.concat(_h(n,u));break;case"O":r.pop(),(n=Th(i,o,d[1],d[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(Th(i,o,d[1],d[2],d[3])),c=["U"].concat(r[r.length-1].slice(-2));break;case"M":a=+d[1]+i,s=+d[2]+o;break;default:for(p=1,g=d.length;p<g;p++)c[p]=+d[p]+(p%2?i:o)}else if("R"===e)n=[i,o].concat(d.slice(1)),r.pop(),r=r.concat(_h(n,u)),c=["R"].concat(d.slice(-2));else if("O"===e)r.pop(),(n=Th(i,o,d[1],d[2])).push(n[0]),r=r.concat(n);else if("U"===e)r.pop(),r=r.concat(Th(i,o,d[1],d[2],d[3])),c=["U"].concat(r[r.length-1].slice(-2));else for(var v=0,m=d.length;v<m;v++)c[v]=d[v];if("O"!==(e=e.toUpperCase()))switch(c[0]){case"Z":i=+a,o=+s;break;case"H":i=c[1];break;case"V":o=c[1];break;case"M":a=c[c.length-2],s=c[c.length-1];break;default:i=c[c.length-2],o=c[c.length-1]}}return r},Ih=function(t,e,n,r){return[t,e,n,r,n,r]},Dh=function(t,e,n,r,i,o){var a=1/3,s=2/3;return[a*t+s*n,a*e+s*r,a*i+s*n,a*o+s*r,i,o]},Oh=function(t,e,n,r,i,o,a,s,l,u){n===r&&(n+=1);var c,d,h,f,p,g=120*Math.PI/180,v=Math.PI/180*(+i||0),m=[],y=function(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}};if(u)d=u[0],h=u[1],f=u[2],p=u[3];else{t=(c=y(t,e,-v)).x,e=c.y,s=(c=y(s,l,-v)).x,l=c.y,t===s&&e===l&&(s+=1,l+=1);var b=(t-s)/2,x=(e-l)/2,w=b*b/(n*n)+x*x/(r*r);w>1&&(n*=w=Math.sqrt(w),r*=w);var C=n*n,S=r*r,k=(o===a?-1:1)*Math.sqrt(Math.abs((C*S-C*x*x-S*b*b)/(C*x*x+S*b*b)));f=k*n*x/r+(t+s)/2,p=k*-r*b/n+(e+l)/2,d=Math.asin(((e-p)/r).toFixed(9)),h=Math.asin(((l-p)/r).toFixed(9)),d=t<f?Math.PI-d:d,h=s<f?Math.PI-h:h,d<0&&(d=2*Math.PI+d),h<0&&(h=2*Math.PI+h),a&&d>h&&(d-=2*Math.PI),!a&&h>d&&(h-=2*Math.PI)}var E=h-d;if(Math.abs(E)>g){var M=h,A=s,_=l;h=d+g*(a&&h>d?1:-1),s=f+n*Math.cos(h),l=p+r*Math.sin(h),m=Oh(s,l,n,r,i,0,a,A,_,[h,M,f,p])}E=h-d;var T=Math.cos(d),P=Math.sin(d),I=Math.cos(h),D=Math.sin(h),O=Math.tan(E/4),R=4/3*n*O,L=4/3*r*O,B=[t,e],F=[t+R*P,e-L*T],N=[s+R*D,l-L*I],z=[s,l];if(F[0]=2*B[0]-F[0],F[1]=2*B[1]-F[1],u)return[F,N,z].concat(m);for(var j=[],G=0,U=(m=[F,N,z].concat(m).join().split(",")).length;G<U;G++)j[G]=G%2?y(m[G-1],m[G],v).y:y(m[G],m[G+1],v).x;return j},Rh=function(t,e){var n,r=Ph(t),i=e&&Ph(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],l=[],u="",c="",d=function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(Oh.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(Dh(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(Dh(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(Ih(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(Ih(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(Ih(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(Ih(e.x,e.y,e.X,e.Y))}return t},h=function(t,e){if(t[e].length>7){t[e].shift();for(var o=t[e];o.length;)s[e]="A",i&&(l[e]="A"),t.splice(e++,0,["C"].concat(o.splice(0,6)));t.splice(e,1),n=Math.max(r.length,i&&i.length||0)}},f=function(t,e,o,a,s){t&&e&&"M"===t[s][0]&&"M"!==e[s][0]&&(e.splice(s,0,["M",a.x,a.y]),o.bx=0,o.by=0,o.x=t[s][1],o.y=t[s][2],n=Math.max(r.length,i&&i.length||0))};n=Math.max(r.length,i&&i.length||0);for(var p=0;p<n;p++){r[p]&&(u=r[p][0]),"C"!==u&&(s[p]=u,p&&(c=s[p-1])),r[p]=d(r[p],o,c),"A"!==s[p]&&"C"===u&&(s[p]="C"),h(r,p),i&&(i[p]&&(u=i[p][0]),"C"!==u&&(l[p]=u,p&&(c=l[p-1])),i[p]=d(i[p],a,c),"A"!==l[p]&&"C"===u&&(l[p]="C"),h(i,p)),f(r,i,o,a,p),f(i,r,a,o,p);var g=r[p],v=i&&i[p],m=g.length,y=i&&v.length;o.x=g[m-2],o.y=g[m-1],o.bx=parseFloat(g[m-4])||o.x,o.by=parseFloat(g[m-3])||o.y,a.bx=i&&(parseFloat(v[y-4])||a.x),a.by=i&&(parseFloat(v[y-3])||a.y),a.x=i&&v[y-2],a.y=i&&v[y-1]}return i?[r,i]:r},Lh=/,?([a-z]),?/gi,Bh=function(t){return t.join(",").replace(Lh,"$1")},Fh=function(t,e,n,r,i){return t*(t*(-3*e+9*n-9*r+3*i)+6*e-12*n+6*r)-3*e+3*n},Nh=function(t,e,n,r,i,o,a,s,l){null===l&&(l=1);for(var u=(l=l>1?1:l<0?0:l)/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,f=0;f<12;f++){var p=u*c[f]+u,g=Fh(p,t,n,i,a),v=Fh(p,e,r,o,s),m=g*g+v*v;h+=d[f]*Math.sqrt(m)}return u*h},zh=function(t,e,n,r,i,o,a,s){for(var l,u,c,d,h=[],f=[[],[]],p=0;p<2;++p)if(0===p?(u=6*t-12*n+6*i,l=-3*t+9*n-9*i+3*a,c=3*n-3*t):(u=6*e-12*r+6*o,l=-3*e+9*r-9*o+3*s,c=3*r-3*e),Math.abs(l)<1e-12){if(Math.abs(u)<1e-12)continue;(d=-c/u)>0&&d<1&&h.push(d)}else{var g=u*u-4*c*l,v=Math.sqrt(g);if(!(g<0)){var m=(-u+v)/(2*l);m>0&&m<1&&h.push(m);var y=(-u-v)/(2*l);y>0&&y<1&&h.push(y)}}for(var b,x=h.length,w=x;x--;)b=1-(d=h[x]),f[0][x]=b*b*b*t+3*b*b*d*n+3*b*d*d*i+d*d*d*a,f[1][x]=b*b*b*e+3*b*b*d*r+3*b*d*d*o+d*d*d*s;return f[0][w]=t,f[1][w]=e,f[0][w+1]=a,f[1][w+1]=s,f[0].length=f[1].length=w+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},jh=function(t,e,n,r,i,o,a,s){if(!(Math.max(t,n)<Math.min(i,a)||Math.min(t,n)>Math.max(i,a)||Math.max(e,r)<Math.min(o,s)||Math.min(e,r)>Math.max(o,s))){var l=(t-n)*(o-s)-(e-r)*(i-a);if(l){var u=((t*r-e*n)*(i-a)-(t-n)*(i*s-o*a))/l,c=((t*r-e*n)*(o-s)-(e-r)*(i*s-o*a))/l,d=+u.toFixed(2),h=+c.toFixed(2);if(!(d<+Math.min(t,n).toFixed(2)||d>+Math.max(t,n).toFixed(2)||d<+Math.min(i,a).toFixed(2)||d>+Math.max(i,a).toFixed(2)||h<+Math.min(e,r).toFixed(2)||h>+Math.max(e,r).toFixed(2)||h<+Math.min(o,s).toFixed(2)||h>+Math.max(o,s).toFixed(2)))return{x:u,y:c}}}},Gh=function(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},Uh=function(t,e,n,r,i){if(i)return[["M",+t+ +i,e],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",t,e],["l",n,0],["l",0,r],["l",-n,0],["z"]];return o.parsePathArray=Bh,o},$h=function(t,e,n,r){return null===t&&(t=e=n=r=0),null===e&&(e=t.y,n=t.width,r=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:r,h:r,x2:t+n,y2:e+r,cx:t+n/2,cy:e+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:Uh(t,e,n,r),vb:[t,e,n,r].join(" ")}},Vh=function(t,e,n,r,i,o,a,s){ms(t)||(t=[t,e,n,r,i,o,a,s]);var l=zh.apply(null,t);return $h(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},Wh=function(t,e,n,r,i,o,a,s,l){var u=1-l,c=Math.pow(u,3),d=Math.pow(u,2),h=l*l,f=h*l,p=t+2*l*(n-t)+h*(i-2*n+t),g=e+2*l*(r-e)+h*(o-2*r+e),v=n+2*l*(i-n)+h*(a-2*i+n),m=r+2*l*(o-r)+h*(s-2*o+r);return{x:c*t+3*d*l*n+3*u*l*l*i+f*a,y:c*e+3*d*l*r+3*u*l*l*o+f*s,m:{x:p,y:g},n:{x:v,y:m},start:{x:u*t+l*n,y:u*e+l*r},end:{x:u*i+l*a,y:u*o+l*s},alpha:90-180*Math.atan2(p-v,g-m)/Math.PI}},Hh=function(t,e,n){if(!function(t,e){return t=$h(t),e=$h(e),Gh(e,t.x,t.y)||Gh(e,t.x2,t.y)||Gh(e,t.x,t.y2)||Gh(e,t.x2,t.y2)||Gh(t,e.x,e.y)||Gh(t,e.x2,e.y)||Gh(t,e.x,e.y2)||Gh(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}(Vh(t),Vh(e)))return n?0:[];for(var r=~~(Nh.apply(0,t)/8),i=~~(Nh.apply(0,e)/8),o=[],a=[],s={},l=n?0:[],u=0;u<r+1;u++){var c=Wh.apply(0,t.concat(u/r));o.push({x:c.x,y:c.y,t:u/r})}for(u=0;u<i+1;u++){c=Wh.apply(0,e.concat(u/i));a.push({x:c.x,y:c.y,t:u/i})}for(u=0;u<r;u++)for(var d=0;d<i;d++){var h=o[u],f=o[u+1],p=a[d],g=a[d+1],v=Math.abs(f.x-h.x)<.001?"y":"x",m=Math.abs(g.x-p.x)<.001?"y":"x",y=jh(h.x,h.y,f.x,f.y,p.x,p.y,g.x,g.y);if(y){if(s[y.x.toFixed(4)]===y.y.toFixed(4))continue;s[y.x.toFixed(4)]=y.y.toFixed(4);var b=h.t+Math.abs((y[v]-h[v])/(f[v]-h[v]))*(f.t-h.t),x=p.t+Math.abs((y[m]-p[m])/(g[m]-p[m]))*(g.t-p.t);b>=0&&b<=1&&x>=0&&x<=1&&(n?l+=1:l.push({x:y.x,y:y.y,t1:b,t2:x}))}}return l};function Yh(t,e){var n=[],r=[];return t.length&&function t(e,i){if(1===e.length)n.push(e[0]),r.push(e[0]);else{for(var o=[],a=0;a<e.length-1;a++)0===a&&n.push(e[0]),a===e.length-2&&r.push(e[a+1]),o[a]=[(1-i)*e[a][0]+i*e[a+1][0],(1-i)*e[a][1]+i*e[a+1][1]];t(o,i)}}(t,e),{left:n,right:r.reverse()}}var Xh=function(t,e,n){if(1===n)return[[].concat(t)];var r=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])r=r.concat(function(t,e,n){var r=[[t[1],t[2]]];n=n||2;var i=[];"A"===e[0]?(r.push(e[6]),r.push(e[7])):"C"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var o=r,a=1/n,s=0;s<n-1;s++){var l=Yh(o,a/(1-a*s));i.push(l.left),o=l.right}return i.push(o),i.map((function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),t.length>=3&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e.concat(t[t.length-1])}))}(t,e,n));else{var i=[].concat(t);"M"===i[0]&&(i[0]="L");for(var o=0;o<=n-1;o++)r.push(i)}return r},qh=function(t,e){if(t.length!==e.length)return!1;var n=!0;return bs(t,(function(t,r){if(t!==e[r])return n=!1,!1})),n};function Kh(t,e,n){var r=null,i=n;return e<i&&(i=e,r="add"),t<i&&(i=t,r="del"),{type:r,min:i}}var Zh=function(t,e){var n=function(t,e){var n,r,i=t.length,o=e.length,a=0;if(0===i||0===o)return null;for(var s=[],l=0;l<=i;l++)s[l]=[],s[l][0]={min:l};for(var u=0;u<=o;u++)s[0][u]={min:u};for(l=1;l<=i;l++)for(n=t[l-1],u=1;u<=o;u++){r=e[u-1],a=qh(n,r)?0:1;var c=s[l-1][u].min+1,d=s[l][u-1].min+1,h=s[l-1][u-1].min+a;s[l][u]=Kh(c,d,h)}return s}(t,e),r=t.length,i=e.length,o=[],a=1,s=1;if(n[r][i].min!==r){for(var l=1;l<=r;l++){var u=n[l][l].min;s=l;for(var c=a;c<=i;c++)n[l][c].min<u&&(u=n[l][c].min,s=c);a=s,n[l][a].type&&o.push({index:l-1,type:n[l][a].type})}for(l=o.length-1;l>=0;l--)a=o[l].index,"add"===o[l].type?t.splice(a,0,[].concat(t[a])):t.splice(a,1)}var d=i-(r=t.length);if(r<i)for(l=0;l<d;l++)"z"===t[r-1][0]||"Z"===t[r-1][0]?t.splice(r-2,0,t[r-2]):t.push(t[r-1]),r+=1;return t};function Qh(t,e,n){for(var r,i=[].concat(t),o=1/(n+1),a=Jh(e)[0],s=1;s<=n;s++)o*=s,0===(r=Math.floor(t.length*o))?i.unshift([a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]):i.splice(r,0,[a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]);return i}function Jh(t){var e=[];switch(t[0]){case"M":case"L":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"T":e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}var tf=function(t,e){if(t.length<=1)return t;for(var n,r=0;r<e.length;r++)if(t[r][0]!==e[r][0])switch(n=Jh(t[r]),e[r][0]){case"M":t[r]=["M"].concat(n[0]);break;case"L":t[r]=["L"].concat(n[0]);break;case"A":t[r]=[].concat(e[r]),t[r][6]=n[0][0],t[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=Qh(n,t[r-1],1)}t[r]=["Q"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"T":t[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){t[r]=e[r];break}n=Qh(n,t[r-1],2)}t[r]=["C"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"S":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=Qh(n,t[r-1],1)}t[r]=["S"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;default:t[r]=e[r]}return t},ef=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",catmullRomToBezier:_h,fillPath:function(t,e){if(1===t.length)return t;var n=t.length-1,r=e.length-1,i=n/r,o=[];if(1===t.length&&"M"===t[0][0]){for(var a=0;a<r-n;a++)t.push(t[0]);return t}for(a=0;a<r;a++){var s=Math.floor(i*a);o[s]=(o[s]||0)+1}var l=o.reduce((function(e,r,i){return i===n?e.concat(t[n]):e.concat(Xh(t[i],t[i+1],r))}),[]);return l.unshift(t[0]),"Z"!==e[r]&&"z"!==e[r]||l.push("Z"),l},fillPathByDiff:Zh,formatPath:tf,intersection:function(t,e){return function(t,e,n){var r,i,o,a,s,l,u,c,d,h;t=Rh(t),e=Rh(e);for(var f=n?0:[],p=0,g=t.length;p<g;p++){var v=t[p];if("M"===v[0])r=s=v[1],i=l=v[2];else{"C"===v[0]?(d=[r,i].concat(v.slice(1)),r=d[6],i=d[7]):(d=[r,i,r,i,s,l,s,l],r=s,i=l);for(var m=0,y=e.length;m<y;m++){var b=e[m];if("M"===b[0])o=u=b[1],a=c=b[2];else{"C"===b[0]?(h=[o,a].concat(b.slice(1)),o=h[6],a=h[7]):(h=[o,a,o,a,u,c,u,c],o=u,a=c);var x=Hh(d,h,n);if(n)f+=x;else{for(var w=0,C=x.length;w<C;w++)x[w].segment1=p,x[w].segment2=m,x[w].bez1=d,x[w].bez2=h;f=f.concat(x)}}}}}return f}(t,e)},parsePathArray:Bh,parsePathString:Ah,pathToAbsolute:Ph,pathToCurve:Rh,rectPath:Uh}),nf=function(){function t(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}();function rf(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}var of="undefined"!=typeof window&&void 0!==window.document;function af(t,e){if(t.isCanvas())return!0;for(var n=e.getParent(),r=!1;n;){if(n===t){r=!0;break}n=n.getParent()}return r}function sf(t){return t.cfg.visible&&t.cfg.capture}var lf=function(t){function e(e){var n=t.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=Tl(r,e),n}return Ka(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,e){this.cfg[t]=e},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(ru),uf=function(t,e,n){this.name=t,this.version=e,this.os=n,this.type="browser"},cf=function(t){this.version=t,this.type="node",this.name="node",this.os=process.platform},df=function(t,e,n,r){this.name=t,this.version=e,this.os=n,this.bot=r,this.type="bot-device"},hf=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},ff=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},pf=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,gf=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],vf=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function mf(t){return t?yf(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new ff:"undefined"!=typeof navigator?yf(navigator.userAgent):"undefined"!=typeof process&&process.version?new cf(process.version.slice(1)):null}function yf(t){var e=function(t){return""!==t&&gf.reduce((function(e,n){var r=n[0],i=n[1];if(e)return e;var o=i.exec(t);return!!o&&[r,o]}),!1)}(t);if(!e)return null;var n=e[0],r=e[1];if("searchbot"===n)return new hf;var i=r[1]&&r[1].split(/[._]/).slice(0,3);i?i.length<3&&(i=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(i,function(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}(3-i.length))):i=[];var o=i.join("."),a=function(t){for(var e=0,n=vf.length;e<n;e++){var r=vf[e],i=r[0];if(r[1].exec(t))return i}return null}(t),s=pf.exec(t);return s&&s[1]?new df(n,o,a,s[1]):new uf(n,o,a)}function bf(t,e){var n=[],r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=e[0],f=e[1],p=e[2],g=e[3],v=e[4],m=e[5],y=e[6],b=e[7],x=e[8];return n[0]=h*r+f*a+p*u,n[1]=h*i+f*s+p*c,n[2]=h*o+f*l+p*d,n[3]=g*r+v*a+m*u,n[4]=g*i+v*s+m*c,n[5]=g*o+v*l+m*d,n[6]=y*r+b*a+x*u,n[7]=y*i+b*s+x*c,n[8]=y*o+b*l+x*d,n}function xf(t,e){var n=[],r=e[0],i=e[1];return n[0]=t[0]*r+t[3]*i+t[6],n[1]=t[1]*r+t[4]*i+t[7],n}function wf(t){var e=[],n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=c*a-s*u,h=-c*o+s*l,f=u*o-a*l,p=n*d+r*h+i*f;return p?(p=1/p,e[0]=d*p,e[1]=(-c*r+i*u)*p,e[2]=(s*r-i*a)*p,e[3]=h*p,e[4]=(c*n-i*l)*p,e[5]=(-s*n+i*o)*p,e[6]=f*p,e[7]=(-u*n+r*l)*p,e[8]=(a*n-r*o)*p,e):null}var Cf=yc,Sf=["zIndex","capture","visible","type"],kf=["repeat"];function Ef(t,e){var n={},r=e.attrs;for(var i in t)n[i]=r[i];return n}function Mf(t,e){var n={},r=e.attr();return bs(t,(function(t,e){-1!==kf.indexOf(e)||Nl(r[e],t)||(n[e]=t)})),n}function Af(t,e){if(e.onFrame)return t;var n=e.startTime,r=e.delay,i=e.duration,o=Object.prototype.hasOwnProperty;return bs(t,(function(t){n+r<t.startTime+t.delay+t.duration&&i>t.delay&&bs(e.toAttrs,(function(e,n){o.call(t.toAttrs,n)&&(delete t.toAttrs[n],delete t.fromAttrs[n])}))})),t}var _f=function(t){function e(e){var n=t.call(this,e)||this;n.attrs={};var r=n.getDefaultAttrs();return Tl(r,e.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return Ka(e,t),e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=e[1];if(!r)return this.attrs;if(ys(r)){for(var o in r)this.setAttr(o,r[o]);return this.afterAttrsChange(r),this}return 2===e.length?(this.setAttr(r,i),this.afterAttrsChange(((t={})[r]=i,t)),this):this.attrs[r]},e.prototype.isClipped=function(t,e){var n=this.getClip();return n&&!n.isHit(t,e)},e.prototype.setAttr=function(t,e){var n=this.attrs[t];n!==e&&(this.attrs[t]=e,this.onAttrChange(t,e,n))},e.prototype.onAttrChange=function(t,e,n){"matrix"===t&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var e=this.cfg.applyTo;e&&e.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var e=this.getParent();return e&&e.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var e=t.getChildren();this.get("el");var n=e.indexOf(this);e.splice(n,1),e.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var e=t.getChildren();this.get("el");var n=e.indexOf(this);e.splice(n,1),e.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){void 0===t&&(t=!0);var e=this.getParent();e?(rf(e.getChildren(),this),e.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr("matrix")},e.prototype.setMatrix=function(t){this.attr("matrix",t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var e=this.attr("matrix"),n=this.cfg.parentMatrix;t=n&&e?bf(n,e):e||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var e=this.attr("matrix"),n=null;n=t&&e?bf(t,e):e||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var e=this.attr("matrix");return e?xf(e,t):t},e.prototype.invertFromMatrix=function(t){var e=this.attr("matrix");if(e){var n=wf(e);if(n)return xf(n,t)}return t},e.prototype.setClip=function(t){var e=this.getCanvas(),n=null;if(t){var r=this.getShapeBase()[vl(t.type)];r&&(n=new r({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:e}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,e=this.attrs,n={};bs(e,(function(t,r){ms(e[r])?n[r]=function(t){for(var e=[],n=0;n<t.length;n++)ms(t[n])?e.push([].concat(t[n])):e.push(t[n]);return e}(e[r]):n[r]=e[r]}));var r=new(0,this.constructor)({attrs:n});return bs(Sf,(function(e){r.set(e,t.get(e))})),r},e.prototype.destroy=function(){this.destroyed||(this.attrs={},t.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var i,o,a,s,l,u=t[0],c=t[1],d=t[2],h=void 0===d?"easeLinear":d,f=t[3],p=void 0===f?Zl:f,g=t[4],v=void 0===g?0:g;gs(u)?(i=u,u={}):ys(u)&&u.onFrame&&(i=u.onFrame,o=u.repeat),ys(c)?(c=(l=c).duration,h=l.easing||"easeLinear",v=l.delay||0,o=l.repeat||o||!1,p=l.callback||Zl,a=l.pauseCallback||Zl,s=l.resumeCallback||Zl):(el(p)&&(v=p,p=null),gs(h)?(p=h,h="easeLinear"):h=h||"easeLinear");var m=Mf(u,this),y={fromAttrs:Ef(m,this),toAttrs:m,duration:c,easing:h,repeat:o,callback:p,pauseCallback:a,resumeCallback:s,delay:v,startTime:n.getTime(),id:Kl(),onFrame:i,pathFormatted:!1};r.length>0?r=Af(r,y):n.addAnimator(this),r.push(y),this.set("animations",r),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var e=this;void 0===t&&(t=!0),bs(this.get("animations"),(function(n){t&&(n.onFrame?e.attr(n.onFrame(1)):e.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),e=this.get("animations"),n=t.getTime();return bs(e,(function(t){t._paused=!0,t._pauseTime=n,t.pauseCallback&&t.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline").getTime(),e=this.get("animations"),n=this.get("_pause").pauseTime;return bs(e,(function(e){e.startTime=e.startTime+(t-n),e._paused=!1,e._pauseTime=null,e.resumeCallback&&e.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",e),this},e.prototype.emitDelegation=function(t,e){var n,r=this,i=e.propagationPath;this.getEvents(),"mouseenter"===t?n=e.fromShape:"mouseleave"===t&&(n=e.toShape);for(var o=function(t){var o=i[t],s=o.get("name");if(s){if((o.isGroup()||o.isCanvas&&o.isCanvas())&&n&&af(o,n))return"break";ms(s)?bs(s,(function(t){r.emitDelegateEvent(o,t,e)})):a.emitDelegateEvent(o,s,e)}},a=this,s=0;s<i.length;s++){if("break"===o(s))break}},e.prototype.emitDelegateEvent=function(t,e,n){var r=this.getEvents(),i=e+":"+n.type;(r[i]||r["*"])&&(n.name=i,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(i,n))},e.prototype.translate=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var n=this.getMatrix(),r=Cf(n,[["t",t,e]]);return this.setMatrix(r),this},e.prototype.move=function(t,e){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(t-n,e-r),this},e.prototype.moveTo=function(t,e){return this.move(t,e)},e.prototype.scale=function(t,e){var n=this.getMatrix(),r=Cf(n,[["s",t,e||t]]);return this.setMatrix(r),this},e.prototype.rotate=function(t){var e=this.getMatrix(),n=Cf(e,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var e=this.attr(),n=e.x,r=e.y,i=this.getMatrix(),o=Cf(i,[["t",-n,-r],["r",t],["t",n,r]]);return this.setMatrix(o),this},e.prototype.rotateAtPoint=function(t,e,n){var r=this.getMatrix(),i=Cf(r,[["t",-t,-e],["r",n],["t",t,e]]);return this.setMatrix(i),this},e}(lf),Tf={};function Pf(t,e){if(t.set("canvas",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){Pf(t,e)}))}}function If(t,e){if(t.set("timeline",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){If(t,e)}))}}var Df,Of,Rf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=[],o=[],a=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return a.length>0?(bs(a,(function(t){var e=t.getBBox();i.push(e.minX,e.maxX),o.push(e.minY,e.maxY)})),t=Ps(i),e=Ts(i),n=Ps(o),r=Ts(o)):(t=0,e=0,n=0,r=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},e.prototype.getCanvasBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=[],o=[],a=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return a.length>0?(bs(a,(function(t){var e=t.getCanvasBBox();i.push(e.minX,e.maxX),o.push(e.minY,e.maxY)})),t=Ps(i),e=Ts(i),n=Ps(o),r=Ts(o)):(t=0,e=0,n=0,r=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.children=[],e},e.prototype.onAttrChange=function(e,n,r){if(t.prototype.onAttrChange.call(this,e,n,r),"matrix"===e){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},e.prototype.applyMatrix=function(e){var n=this.getTotalMatrix();t.prototype.applyMatrix.call(this,e);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},e.prototype._applyChildrenMarix=function(t){bs(this.getChildren(),(function(e){e.applyMatrix(t)}))},e.prototype.addShape=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1];ys(n)?r=n:r.type=n;var i=Tf[r.type];i||(i=vl(r.type),Tf[r.type]=i);var o=this.getShapeBase(),a=new o[i](r);return this.add(a),a},e.prototype.addGroup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r=t[0],i=t[1];if(gs(r))n=new r(i||{parent:this});else{var o=r||{},a=this.getGroupBase();n=new a(o)}return this.add(n),n},e.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},e.prototype.getShape=function(t,e,n){if(!sf(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,t,e,n);else{var o=[t,e,1];o=this.invertFromMatrix(o),this.isClipped(o[0],o[1])||(r=this._findShape(i,o[0],o[1],n))}return r},e.prototype._findShape=function(t,e,n,r){for(var i=null,o=t.length-1;o>=0;o--){var a=t[o];if(sf(a)&&(a.isGroup()?i=a.getShape(e,n,r):a.isHit(e,n)&&(i=a)),i)break}return i},e.prototype.add=function(t){var e=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=t.getParent();i&&function(t,e,n){void 0===n&&(n=!0),n?e.destroy():(e.set("parent",null),e.set("canvas",null)),rf(t.getChildren(),e)}(i,t,!1),t.set("parent",this),e&&Pf(t,e),r&&If(t,r),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var e=this.getTotalMatrix();e&&t.applyMatrix(e)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t,e=this.getChildren();bs(e,(function(t,e){return t._INDEX=e,t})),e.sort((t=function(t,e){return t.get("zIndex")-e.get("zIndex")},function(e,n){var r=t(e,n);return 0===r?e._INDEX-n._INDEX:r})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),e=t.length-1;e>=0;e--)t[e].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),t.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){return this.getChildren()[t]},e.prototype.getCount=function(){return this.getChildren().length},e.prototype.contain=function(t){return this.getChildren().indexOf(t)>-1},e.prototype.removeChild=function(t,e){void 0===e&&(e=!0),this.contain(t)&&t.remove(e)},e.prototype.findAll=function(t){var e=[];return bs(this.getChildren(),(function(n){t(n)&&e.push(n),n.isGroup()&&(e=e.concat(n.findAll(t)))})),e},e.prototype.find=function(t){var e=null;return bs(this.getChildren(),(function(n){if(t(n)?e=n:n.isGroup()&&(e=n.find(t)),e)return!1})),e},e.prototype.findById=function(t){return this.find((function(e){return e.get("id")===t}))},e.prototype.findByClassName=function(t){return this.find((function(e){return e.get("className")===t}))},e.prototype.findAllByName=function(t){return this.findAll((function(e){return e.get("name")===t}))},e}(_f),Lf=0,Bf=0,Ff=0,Nf=0,zf=0,jf=0,Gf="object"==typeof performance&&performance.now?performance:Date,Uf="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function $f(){return zf||(Uf(Vf),zf=Gf.now()+jf)}function Vf(){zf=0}function Wf(){this._call=this._time=this._next=null}function Hf(t,e,n){var r=new Wf;return r.restart(t,e,n),r}function Yf(){zf=(Nf=Gf.now())+jf,Lf=Bf=0;try{!function(){$f(),++Lf;for(var t,e=Df;e;)(t=zf-e._time)>=0&&e._call.call(null,t),e=e._next;--Lf}()}finally{Lf=0,function(){var t,e,n=Df,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Df=e);Of=t,qf(r)}(),zf=0}}function Xf(){var t=Gf.now(),e=t-Nf;e>1e3&&(jf-=e,Nf=t)}function qf(t){Lf||(Bf&&(Bf=clearTimeout(Bf)),t-zf>24?(t<1/0&&(Bf=setTimeout(Yf,t-Gf.now()-jf)),Ff&&(Ff=clearInterval(Ff))):(Ff||(Nf=Gf.now(),Ff=setInterval(Xf,1e3)),Lf=1,Uf(Yf)))}function Kf(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function Zf(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Wf.prototype=Hf.prototype={constructor:Wf,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?$f():+n)+(null==e?0:+e),this._next||Of===this||(Of?Of._next=this:Df=this,Of=this),this._call=t,this._time=n,qf()},stop:function(){this._call&&(this._call=null,this._time=1/0,qf())}};var Qf=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),Jf=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),tp=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),ep=Math.PI,np=ep/2;function rp(t){return(1-Math.cos(ep*t))/2}function ip(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function op(t){return((t*=2)<=1?ip(1-t):2-ip(t-1))/2}function ap(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var sp=4/11,lp=7.5625;function up(t){return(t=+t)<sp?lp*t*t:t<.7272727272727273?lp*(t-=.5454545454545454)*t+.75:t<.9090909090909091?lp*(t-=.8181818181818182)*t+.9375:lp*(t-=.9545454545454546)*t+.984375}var cp=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(1.70158),dp=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(1.70158),hp=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),fp=2*Math.PI,pp=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=fp);function i(t){return e*ip(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*fp)},i.period=function(n){return t(e,n)},i}(1,.3),gp=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=fp);function i(t){return 1-e*ip(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*fp)},i.period=function(n){return t(e,n)},i}(1,.3),vp=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=fp);function i(t){return((t=2*t-1)<0?e*ip(-t)*Math.sin((r-t)/n):2-e*ip(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*fp)},i.period=function(n){return t(e,n)},i}(1,.3),mp=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",easeLinear:function(t){return+t},easeQuad:Kf,easeQuadIn:function(t){return t*t},easeQuadOut:function(t){return t*(2-t)},easeQuadInOut:Kf,easeCubic:Zf,easeCubicIn:function(t){return t*t*t},easeCubicOut:function(t){return--t*t*t+1},easeCubicInOut:Zf,easePoly:tp,easePolyIn:Qf,easePolyOut:Jf,easePolyInOut:tp,easeSin:rp,easeSinIn:function(t){return 1==+t?1:1-Math.cos(t*np)},easeSinOut:function(t){return Math.sin(t*np)},easeSinInOut:rp,easeExp:op,easeExpIn:function(t){return ip(1-+t)},easeExpOut:function(t){return 1-ip(t)},easeExpInOut:op,easeCircle:ap,easeCircleIn:function(t){return 1-Math.sqrt(1-t*t)},easeCircleOut:function(t){return Math.sqrt(1- --t*t)},easeCircleInOut:ap,easeBounce:up,easeBounceIn:function(t){return 1-up(1-t)},easeBounceOut:up,easeBounceInOut:function(t){return((t*=2)<=1?1-up(1-t):up(t-1)+1)/2},easeBack:hp,easeBackIn:cp,easeBackOut:dp,easeBackInOut:hp,easeElastic:gp,easeElasticIn:pp,easeElasticOut:gp,easeElasticInOut:vp});function yp(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function bp(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function xp(){}var wp=1/.7,Cp="\\s*([+-]?\\d+)\\s*",Sp="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",kp="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ep=/^#([0-9a-f]{3,8})$/,Mp=new RegExp("^rgb\\("+[Cp,Cp,Cp]+"\\)$"),Ap=new RegExp("^rgb\\("+[kp,kp,kp]+"\\)$"),_p=new RegExp("^rgba\\("+[Cp,Cp,Cp,Sp]+"\\)$"),Tp=new RegExp("^rgba\\("+[kp,kp,kp,Sp]+"\\)$"),Pp=new RegExp("^hsl\\("+[Sp,kp,kp]+"\\)$"),Ip=new RegExp("^hsla\\("+[Sp,kp,kp,Sp]+"\\)$"),Dp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Op(){return this.rgb().formatHex()}function Rp(){return this.rgb().formatRgb()}function Lp(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ep.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Bp(e):3===n?new jp(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Fp(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Fp(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Mp.exec(t))?new jp(e[1],e[2],e[3],1):(e=Ap.exec(t))?new jp(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=_p.exec(t))?Fp(e[1],e[2],e[3],e[4]):(e=Tp.exec(t))?Fp(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Pp.exec(t))?Vp(e[1],e[2]/100,e[3]/100,1):(e=Ip.exec(t))?Vp(e[1],e[2]/100,e[3]/100,e[4]):Dp.hasOwnProperty(t)?Bp(Dp[t]):"transparent"===t?new jp(NaN,NaN,NaN,0):null}function Bp(t){return new jp(t>>16&255,t>>8&255,255&t,1)}function Fp(t,e,n,r){return r<=0&&(t=e=n=NaN),new jp(t,e,n,r)}function Np(t){return t instanceof xp||(t=Lp(t)),t?new jp((t=t.rgb()).r,t.g,t.b,t.opacity):new jp}function zp(t,e,n,r){return 1===arguments.length?Np(t):new jp(t,e,n,null==r?1:r)}function jp(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Gp(){return"#"+$p(this.r)+$p(this.g)+$p(this.b)}function Up(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function $p(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Vp(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Hp(t,e,n,r)}function Wp(t){if(t instanceof Hp)return new Hp(t.h,t.s,t.l,t.opacity);if(t instanceof xp||(t=Lp(t)),!t)return new Hp;if(t instanceof Hp)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Hp(a,s,l,t.opacity)}function Hp(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Yp(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Xp(t){return function(){return t}}function qp(t){return 1==(t=+t)?Kp:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Xp(isNaN(e)?n:e)}}function Kp(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Xp(isNaN(t)?e:t)}yp(xp,Lp,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Op,formatHex:Op,formatHsl:function(){return Wp(this).formatHsl()},formatRgb:Rp,toString:Rp}),yp(jp,zp,bp(xp,{brighter:function(t){return t=null==t?wp:Math.pow(wp,t),new jp(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new jp(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gp,formatHex:Gp,formatRgb:Up,toString:Up})),yp(Hp,(function(t,e,n,r){return 1===arguments.length?Wp(t):new Hp(t,e,n,null==r?1:r)}),bp(xp,{brighter:function(t){return t=null==t?wp:Math.pow(wp,t),new Hp(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Hp(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new jp(Yp(t>=240?t-240:t+120,i,r),Yp(t,i,r),Yp(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Zp=function t(e){var n=qp(e);function r(t,e){var r=n((t=zp(t)).r,(e=zp(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=Kp(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function Qp(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function Jp(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function tg(t,e){return(Jp(e)?Qp:eg)(t,e)}function eg(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=lg(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function ng(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function rg(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ig(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=lg(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var og=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ag=new RegExp(og.source,"g");function sg(t,e){var n,r,i,o=og.lastIndex=ag.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=og.exec(t))&&(r=ag.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:rg(n,r)})),o=ag.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function lg(t,e){var n,r=typeof e;return null==e||"boolean"===r?Xp(e):("number"===r?rg:"string"===r?(n=Lp(e))?(e=n,Zp):sg:e instanceof Lp?Zp:e instanceof Date?ng:Jp(e)?Qp:Array.isArray(e)?eg:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?ig:rg)(t,e)}var ug=[1,0,0,0,1,0,0,0,1];function cg(t,e,n){var r,i=e.startTime;if(n<i+e.delay||e._paused)return!1;var o=e.duration,a=e.easing;if(n=n-i-e.delay,e.repeat)r=n%o/o,r=mp[a](r);else{if(!((r=n/o)<1))return e.onFrame?t.attr(e.onFrame(1)):t.attr(e.toAttrs),!0;r=mp[a](r)}if(e.onFrame){var s=e.onFrame(r);t.attr(s)}else!function(t,e,n){var r={},i=e.fromAttrs,o=e.toAttrs;if(!t.destroyed){var a,s;for(var l in o)if(!Nl(i[l],o[l]))if("path"===l){var u=o[l],c=i[l];u.length>c.length?(u=Ah(o[l]),c=Ah(i[l]),c=Zh(c,u),c=tf(c,u),e.fromAttrs.path=c,e.toAttrs.path=u):e.pathFormatted||(u=Ah(o[l]),c=Ah(i[l]),c=tf(c,u),e.fromAttrs.path=c,e.toAttrs.path=u,e.pathFormatted=!0),r[l]=[];for(var d=0;d<u.length;d++){for(var h=u[d],f=c[d],p=[],g=0;g<h.length;g++)el(h[g])&&f&&el(f[g])?(a=lg(f[g],h[g]),p.push(a(n))):p.push(h[g]);r[l].push(p)}}else if("matrix"===l){var v=tg(i[l]||ug,o[l]||ug)(n);r[l]=v}else["fill","stroke","fillStyle","strokeStyle"].includes(l)&&(s=o[l],/^[r,R,L,l]{1}[\s]*\(/.test(s))?r[l]=o[l]:gs(o[l])||(a=lg(i[l],o[l]),r[l]=a(n));t.attr(r)}}(t,e,r);return!1}var dg=function(){function t(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return t.prototype.initTimer=function(){var t,e,n,r=this;this.timer=Hf((function(i){if(r.current=i,r.animators.length>0){for(var o=r.animators.length-1;o>=0;o--)if((t=r.animators[o]).destroyed)r.removeAnimator(o);else{if(!t.isAnimatePaused())for(var a=(e=t.get("animations")).length-1;a>=0;a--)n=e[a],cg(t,n,i)&&(e.splice(a,1),!1,n.callback&&n.callback());0===e.length&&r.removeAnimator(o)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},t.prototype.addAnimator=function(t){this.animators.push(t)},t.prototype.removeAnimator=function(t){this.animators.splice(t,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(t){void 0===t&&(t=!0),this.animators.forEach((function(e){e.stopAnimate(t)})),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}(),hg=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function fg(t,e,n){n.name=e,n.target=t,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}function pg(t,e,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===e?(r=n.fromShape,i=!0):"mouseleave"===e&&(i=!0,r=n.toShape),t.isCanvas()&&i)return;if(r&&af(t,r))return void(n.bubbles=!1);n.name=e,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}}var gg=function(){function t(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(t){var n=t.type;e._triggerEvent(n,t)},this._onDocumentMove=function(t){if(e.canvas.get("el")!==t.target&&(e.dragging||e.currentShape)){var n=e._getPointInfo(t);e.dragging&&e._emitEvent("drag",t,n,e.draggingShape)}},this._onDocumentMouseUp=function(t){if(e.canvas.get("el")!==t.target&&e.dragging){var n=e._getPointInfo(t);e.draggingShape&&e._emitEvent("drop",t,n,null),e._emitEvent("dragend",t,n,e.draggingShape),e._afterDrag(e.draggingShape,n,t)}},this.canvas=t.canvas}return t.prototype.init=function(){this._bindEvents()},t.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");bs(hg,(function(n){e.addEventListener(n,t._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");bs(hg,(function(n){e.removeEventListener(n,t._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._getEventObj=function(t,e,n,r,i,o){var a=new nf(t,e);return a.fromShape=i,a.toShape=o,a.x=n.x,a.y=n.y,a.clientX=n.clientX,a.clientY=n.clientY,a.propagationPath.push(r),a},t.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},t.prototype._getPointInfo=function(t){var e=this.canvas,n=e.getClientByEvent(t),r=e.getPointByEvent(t);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},t.prototype._triggerEvent=function(t,e){var n=this._getPointInfo(e),r=this._getShape(n,e),i=this["_on"+t],o=!1;if(i)i.call(this,n,r,e);else{var a=this.currentShape;"mouseenter"===t||"dragenter"===t||"mouseover"===t?(this._emitEvent(t,e,n,null,null,r),r&&this._emitEvent(t,e,n,r,null,r),"mouseenter"===t&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):"mouseleave"===t||"dragleave"===t||"mouseout"===t?(o=!0,a&&this._emitEvent(t,e,n,a,a,null),this._emitEvent(t,e,n,null,a,null),"mouseleave"===t&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(t,e,n,r,null,null)}if(o||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=r.attr("cursor")||s.get("cursor")}},t.prototype._onmousedown=function(t,e,n){0===n.button&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,t,e,null,null)},t.prototype._emitMouseoverEvents=function(t,e,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",t,e,n,n,r),this._emitEvent("mouseleave",t,e,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",t,e,r,n,r),this._emitEvent("mouseenter",t,e,r,n,r)))},t.prototype._emitDragoverEvents=function(t,e,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",t,e,n,n,r),this._emitEvent("dragenter",t,e,r,n,r)),i||this._emitEvent("dragover",t,e,r)):n&&this._emitEvent("dragleave",t,e,n,n,r),i&&this._emitEvent("dragover",t,e,r)},t.prototype._afterDrag=function(t,e,n){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(e,n);r!==t&&this._emitMouseoverEvents(n,e,t,r),this.currentShape=r},t.prototype._onmouseup=function(t,e,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,t,e),this._emitEvent("dragend",n,t,r),this._afterDrag(r,t,n)):(this._emitEvent("mouseup",n,t,e),e===this.mousedownShape&&this._emitEvent("click",n,t,e),this.mousedownShape=null,this.mousedownPoint=null)}},t.prototype._ondragover=function(t,e,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,t,r,e,!0)},t.prototype._onmousemove=function(t,e,n){var r=this.canvas,i=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,t,i,e,!1),this._emitEvent("drag",n,t,o);else{var a=this.mousedownPoint;if(a){var s=this.mousedownShape,l=n.timeStamp-this.mousedownTimeStamp,u=a.clientX-t.clientX,c=a.clientY-t.clientY;l>120||u*u+c*c>40?s&&s.get("draggable")?((o=this.mousedownShape).set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,t,o),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e))}else this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)}},t.prototype._emitEvent=function(t,e,n,r,i,o){var a=this._getEventObj(t,e,n,r,i,o);if(r){a.shape=r,fg(r,t,a);for(var s=r.getParent();s;)s.emitDelegation(t,a),a.propagationStopped||pg(s,t,a),a.propagationPath.push(s),s=s.getParent()}else{fg(this.canvas,t,a)}},t.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t}(),vg=mf(),mg=vg&&"firefox"===vg.name,yg=function(t){function e(e){var n=t.call(this,e)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},e.prototype.initContainer=function(){var t=this.get("container");zs(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t),this.get("container").appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new gg({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new dg(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,e){var n=this.get("el");of&&(n.style.width=t+"px",n.style.height=e+"px")},e.prototype.changeSize=function(t,e){this.setDOMSize(t,e),this.set("width",t),this.set("height",e),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var e=this.get("el");of&&e&&(e.style.cursor=t)},e.prototype.getPointByEvent=function(t){if(this.get("supportCSSTransform")){if(mg&&!vs(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!vs(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var e=this.getClientByEvent(t),n=e.x,r=e.y;return this.getPointByClient(n,r)},e.prototype.getClientByEvent=function(t){var e=t;return t.touches&&(e="touchend"===t.type?t.changedTouches[0]:t.touches[0]),{x:e.clientX,y:e.clientY}},e.prototype.getPointByClient=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t-n.left,y:e-n.top}},e.prototype.getClientByPoint=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t+n.left,y:e+n.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){this.get("eventController").destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),t.prototype.destroy.call(this))},e}(Rf),bg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];e.add(i.clone())}return e},e}(Rf),xg=function(t){function e(e){return t.call(this,e)||this}return Ka(e,t),e.prototype._isInBBox=function(t,e){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=e&&n.maxY>=e},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(e){t.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),e=this.getTotalMatrix(),n=t.minX,r=t.minY,i=t.maxX,o=t.maxY;if(e){var a=xf(e,[t.minX,t.minY]),s=xf(e,[t.maxX,t.minY]),l=xf(e,[t.minX,t.maxY]),u=xf(e,[t.maxX,t.maxY]);n=Math.min(a[0],s[0],l[0],u[0]),i=Math.max(a[0],s[0],l[0],u[0]),r=Math.min(a[1],s[1],l[1],u[1]),o=Math.max(a[1],s[1],l[1],u[1])}var c=this.attrs;if(c.shadowColor){var d=c.shadowBlur,h=void 0===d?0:d,f=c.shadowOffsetX,p=void 0===f?0:f,g=c.shadowOffsetY,v=void 0===g?0:g,m=n-h+p,y=i+h+p,b=r-h+v,x=o+h+v;n=Math.min(n,m),i=Math.max(i,y),r=Math.min(r,b),o=Math.max(o,x)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:o,width:i-n,height:o-r}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,e){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,e){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[t,e,1],o=(i=this.invertFromMatrix(i))[0],a=i[1],s=this._isInBBox(o,a);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(o,a)){if(this.isInShape(o,a))return!0;if(n&&n.isHit(o,a))return!0;if(r&&r.isHit(o,a))return!0}return!1},e}(_f),wg=new Map;function Cg(t,e){wg.set(t,e)}function Sg(t){return wg.get(t)}function kg(t){var e=t.attr();return{x:e.x,y:e.y,width:e.width,height:e.height}}function Eg(t){var e=t.attr(),n=e.x,r=e.y,i=e.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}function Mg(t){return Math.min.apply(null,t)}function Ag(t){return Math.max.apply(null,t)}function _g(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function Tg(t,e){return Math.abs(t-e)<.001}function Pg(t,e){var n=Mg(t),r=Mg(e);return{x:n,y:r,width:Ag(t)-n,height:Ag(e)-r}}function Ig(t){return(t+2*Math.PI)%(2*Math.PI)}var Dg={box:function(t,e,n,r){return Pg([t,n],[e,r])},length:function(t,e,n,r){return _g(t,e,n,r)},pointAt:function(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}},pointDistance:function(t,e,n,r,i,o){var a=(n-t)*(i-t)+(r-e)*(o-e);return a<0?_g(t,e,i,o):a>(n-t)*(n-t)+(r-e)*(r-e)?_g(n,r,i,o):this.pointToLine(t,e,n,r,i,o)},pointToLine:function(t,e,n,r,i,o){var a=[n-t,r-e];if(fc(a,[0,0]))return Math.sqrt((i-t)*(i-t)+(o-e)*(o-e));var s=[-a[1],a[0]];cc(s,s);var l=[i-t,o-e];return Math.abs(dc(l,s))},tangentAngle:function(t,e,n,r){return Math.atan2(r-e,n-t)}};function Og(t,e,n,r,i,o){var a,s=1/0,l=[n,r],u=20;o&&o>200&&(u=o/10);for(var c=1/u,d=c/10,h=0;h<=u;h++){var f=h*c,p=[i.apply(null,t.concat([f])),i.apply(null,e.concat([f]))];(y=_g(l[0],l[1],p[0],p[1]))<s&&(a=f,s=y)}if(0===a)return{x:t[0],y:e[0]};if(1===a){var g=t.length;return{x:t[g-1],y:e[g-1]}}s=1/0;for(h=0;h<32&&!(d<1e-4);h++){var v=a-d,m=a+d,y=(p=[i.apply(null,t.concat([v])),i.apply(null,e.concat([v]))],_g(l[0],l[1],p[0],p[1]));if(v>=0&&y<s)a=v,s=y;else{var b=[i.apply(null,t.concat([m])),i.apply(null,e.concat([m]))],x=_g(l[0],l[1],b[0],b[1]);m<=1&&x<s?(a=m,s=x):d*=.5}}return{x:i.apply(null,t.concat([a])),y:i.apply(null,e.concat([a]))}}function Rg(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function Lg(t,e,n){var r=t+n-2*e;if(Tg(r,0))return[.5];var i=(t-e)/r;return i<=1&&i>=0?[i]:[]}function Bg(t,e,n,r){return 2*(1-r)*(e-t)+2*r*(n-e)}function Fg(t,e,n,r,i,o,a){var s=Rg(t,n,i,a),l=Rg(e,r,o,a),u=Dg.pointAt(t,e,n,r,a),c=Dg.pointAt(n,r,i,o,a);return[[t,e,u.x,u.y,s,l],[s,l,c.x,c.y,i,o]]}function Ng(t,e,n,r,i,o,a){if(0===a)return(_g(t,e,n,r)+_g(n,r,i,o)+_g(t,e,i,o))/2;var s=Fg(t,e,n,r,i,o,.5),l=s[0],u=s[1];return l.push(a-1),u.push(a-1),Ng.apply(null,l)+Ng.apply(null,u)}var zg={box:function(t,e,n,r,i,o){var a=Lg(t,n,i)[0],s=Lg(e,r,o)[0],l=[t,i],u=[e,o];return void 0!==a&&l.push(Rg(t,n,i,a)),void 0!==s&&u.push(Rg(e,r,o,s)),Pg(l,u)},length:function(t,e,n,r,i,o){return Ng(t,e,n,r,i,o,3)},nearestPoint:function(t,e,n,r,i,o,a,s){return Og([t,n,i],[e,r,o],a,s,Rg)},pointDistance:function(t,e,n,r,i,o,a,s){var l=this.nearestPoint(t,e,n,r,i,o,a,s);return _g(l.x,l.y,a,s)},interpolationAt:Rg,pointAt:function(t,e,n,r,i,o,a){return{x:Rg(t,n,i,a),y:Rg(e,r,o,a)}},divide:function(t,e,n,r,i,o,a){return Fg(t,e,n,r,i,o,a)},tangentAngle:function(t,e,n,r,i,o,a){var s=Bg(t,n,i,a),l=Bg(e,r,o,a);return Ig(Math.atan2(l,s))}};function jg(t,e,n,r,i){var o=1-i;return o*o*o*t+3*e*i*o*o+3*n*i*i*o+r*i*i*i}function Gg(t,e,n,r,i){var o=1-i;return 3*(o*o*(e-t)+2*o*i*(n-e)+i*i*(r-n))}function Ug(t,e,n,r){var i,o,a,s=-3*t+9*e-9*n+3*r,l=6*t-12*e+6*n,u=3*e-3*t,c=[];if(Tg(s,0))Tg(l,0)||(i=-u/l)>=0&&i<=1&&c.push(i);else{var d=l*l-4*s*u;Tg(d,0)?c.push(-l/(2*s)):d>0&&(o=(-l-(a=Math.sqrt(d)))/(2*s),(i=(-l+a)/(2*s))>=0&&i<=1&&c.push(i),o>=0&&o<=1&&c.push(o))}return c}function $g(t,e,n,r,i,o,a,s,l){var u=jg(t,n,i,a,l),c=jg(e,r,o,s,l),d=Dg.pointAt(t,e,n,r,l),h=Dg.pointAt(n,r,i,o,l),f=Dg.pointAt(i,o,a,s,l),p=Dg.pointAt(d.x,d.y,h.x,h.y,l),g=Dg.pointAt(h.x,h.y,f.x,f.y,l);return[[t,e,d.x,d.y,p.x,p.y,u,c],[u,c,g.x,g.y,f.x,f.y,a,s]]}function Vg(t,e,n,r,i,o,a,s,l){if(0===l)return function(t,e){for(var n=0,r=t.length,i=0;i<r;i++)n+=_g(t[i],e[i],t[(i+1)%r],e[(i+1)%r]);return n/2}([t,n,i,a],[e,r,o,s]);var u=$g(t,e,n,r,i,o,a,s,.5),c=u[0],d=u[1];return c.push(l-1),d.push(l-1),Vg.apply(null,c)+Vg.apply(null,d)}var Wg={extrema:Ug,box:function(t,e,n,r,i,o,a,s){for(var l=[t,a],u=[e,s],c=Ug(t,n,i,a),d=Ug(e,r,o,s),h=0;h<c.length;h++)l.push(jg(t,n,i,a,c[h]));for(h=0;h<d.length;h++)u.push(jg(e,r,o,s,d[h]));return Pg(l,u)},length:function(t,e,n,r,i,o,a,s){return Vg(t,e,n,r,i,o,a,s,3)},nearestPoint:function(t,e,n,r,i,o,a,s,l,u,c){return Og([t,n,i,a],[e,r,o,s],l,u,jg,c)},pointDistance:function(t,e,n,r,i,o,a,s,l,u,c){var d=this.nearestPoint(t,e,n,r,i,o,a,s,l,u,c);return _g(d.x,d.y,l,u)},interpolationAt:jg,pointAt:function(t,e,n,r,i,o,a,s,l){return{x:jg(t,n,i,a,l),y:jg(e,r,o,s,l)}},divide:function(t,e,n,r,i,o,a,s,l){return $g(t,e,n,r,i,o,a,s,l)},tangentAngle:function(t,e,n,r,i,o,a,s,l){var u=Gg(t,n,i,a,l),c=Gg(e,r,o,s,l);return Ig(Math.atan2(c,u))}};function Hg(t,e,n,r,i,o){return n*Math.cos(i)*Math.cos(o)-r*Math.sin(i)*Math.sin(o)+t}function Yg(t,e,n,r,i,o){return n*Math.sin(i)*Math.cos(o)+r*Math.cos(i)*Math.sin(o)+e}var Xg=function(t,e,n,r,i,o,a){for(var s=function(t,e,n){return Math.atan(-e/t*Math.tan(n))}(n,r,i),l=1/0,u=-1/0,c=[o,a],d=2*-Math.PI;d<=2*Math.PI;d+=Math.PI){var h=s+d;o<a?o<h&&h<a&&c.push(h):a<h&&h<o&&c.push(h)}for(d=0;d<c.length;d++){var f=Hg(t,0,n,r,i,c[d]);f<l&&(l=f),f>u&&(u=f)}var p=function(t,e,n){return Math.atan(e/(t*Math.tan(n)))}(n,r,i),g=1/0,v=-1/0,m=[o,a];for(d=2*-Math.PI;d<=2*Math.PI;d+=Math.PI){var y=p+d;o<a?o<y&&y<a&&m.push(y):a<y&&y<o&&m.push(y)}for(d=0;d<m.length;d++){var b=Yg(0,e,n,r,i,m[d]);b<g&&(g=b),b>v&&(v=b)}return{x:l,y:g,width:u-l,height:v-g}};var qg=function(t){return function(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=_g(r[0],r[1],i[0],i[1])}return e}(t)};function Kg(t,e){return t&&e?{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}:t||e}function Zg(t,e){var n=t.get("startArrowShape"),r=t.get("endArrowShape");return n&&(e=Kg(e,n.getCanvasBBox())),r&&(e=Kg(e,r.getCanvasBBox())),e}var Qg=null;function Jg(){if(!Qg){var t=document.createElement("canvas");t.width=1,t.height=1,Qg=t.getContext("2d")}return Qg}function tv(t,e,n){var r=1;return zs(t)&&(r=t.split("\n").length),r>1?e*r+function(t,e){return e?e-t:.14*t}(e,n)*(r-1):e}function ev(t){var e=t.fontSize,n=t.fontFamily,r=t.fontWeight;return[t.fontStyle,t.fontVariant,r,e+"px",n].join(" ").trim()}var nv=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,rv=/[^\s\,]+/gi;function iv(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var o=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4===r?o[3]={x:+t[0],y:+t[1]}:i-2===r&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4===r?o[3]=o[2]:r||(o[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}var ov="\t\n\v\f\r   ᠎             　\u2028\u2029",av=new RegExp("([a-z])["+ov+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+ov+"]*,?["+ov+"]*)+)","ig"),sv=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+ov+"]*,?["+ov+"]*","ig");function lv(t){if(!t)return null;if(ms(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(av,(function(t,r,i){var o=[],a=r.toLowerCase();if(i.replace(sv,(function(t,e){e&&o.push(+e)})),"m"===a&&o.length>2&&(n.push([r].concat(o.splice(0,2))),a="l",r="m"===r?"l":"L"),"o"===a&&1===o.length&&n.push([r,o[0]]),"r"===a)n.push([r].concat(o));else for(;o.length>=e[a]&&(n.push([r].concat(o.splice(0,e[a]))),e[a]););return""})),n}var uv=/[a-z]/;function cv(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function dv(t){var e=lv(t);if(!e||!e.length)return[["M",0,0]];for(var n=!1,r=0;r<e.length;r++){var i=e[r][0];if(uv.test(i)||["V","H","T","S"].indexOf(i)>=0){n=!0;break}}if(!n)return e;var o=[],a=0,s=0,l=0,u=0,c=0,d=e[0];"M"!==d[0]&&"m"!==d[0]||(l=a=+d[1],u=s=+d[2],c++,o[0]=["M",a,s]);r=c;for(var h=e.length;r<h;r++){var f=e[r],p=o[r-1],g=[],v=(i=f[0]).toUpperCase();if(i!==v)switch(g[0]=v,v){case"A":g[1]=f[1],g[2]=f[2],g[3]=f[3],g[4]=f[4],g[5]=f[5],g[6]=+f[6]+a,g[7]=+f[7]+s;break;case"V":g[1]=+f[1]+s;break;case"H":g[1]=+f[1]+a;break;case"M":l=+f[1]+a,u=+f[2]+s,g[1]=l,g[2]=u;break;default:for(var m=1,y=f.length;m<y;m++)g[m]=+f[m]+(m%2?a:s)}else g=e[r];switch(v){case"Z":a=+l,s=+u;break;case"H":g=["L",a=g[1],s];break;case"V":g=["L",a,s=g[1]];break;case"T":a=g[1],s=g[2];var b=cv([p[1],p[2]],[p[3],p[4]]);g=["Q",b[0],b[1],a,s];break;case"S":a=g[g.length-2],s=g[g.length-1];var x=p.length,w=cv([p[x-4],p[x-3]],[p[x-2],p[x-1]]);g=["C",w[0],w[1],g[1],g[2],a,s];break;case"M":l=g[g.length-2],u=g[g.length-1];break;default:a=g[g.length-2],s=g[g.length-1]}o.push(g)}return o}function hv(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function fv(t,e){return hv(t)*hv(e)?(t[0]*e[0]+t[1]*e[1])/(hv(t)*hv(e)):1}function pv(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(fv(t,e))}function gv(t,e){return t[0]===e[0]&&t[1]===e[1]}function vv(t,e){var n=e[1],r=e[2],i=al(cl(e[3]),2*Math.PI),o=e[4],a=e[5],s=t[0],l=t[1],u=e[6],c=e[7],d=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,h=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,f=d*d/(n*n)+h*h/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(h*h)+r*r*(d*d),g=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(g*=-1),isNaN(g)&&(g=0);var v=r?g*n*h/r:0,m=n?g*-r*d/n:0,y=(s+u)/2+Math.cos(i)*v-Math.sin(i)*m,b=(l+c)/2+Math.sin(i)*v+Math.cos(i)*m,x=[(d-v)/n,(h-m)/r],w=[(-1*d-v)/n,(-1*h-m)/r],C=pv([1,0],x),S=pv(x,w);return fv(x,w)<=-1&&(S=Math.PI),fv(x,w)>=1&&(S=0),0===a&&S>0&&(S-=2*Math.PI),1===a&&S<0&&(S+=2*Math.PI),{cx:y,cy:b,rx:gv(t,[u,c])?0:n,ry:gv(t,[u,c])?0:r,startAngle:C,endAngle:C+S,xRotation:i,arcFlag:o,sweepFlag:a}}function mv(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function yv(t){for(var e=[],n=null,r=null,i=null,o=0,a=(t=function(t){var e=t||[];return ms(e)?e:zs(e)?(bs(e=e.match(nv),(function(t,n){if((t=t.match(rv))[0].length>1){var r=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=r}bs(t,(function(e,n){isNaN(e)||(t[n]=+e)})),e[n]=t})),e):void 0}(t)).length,s=0;s<a;s++){var l=t[s];r=t[s+1];var u=l[0],c={command:u,prePoint:n,params:l,startTangent:null,endTangent:null};switch(u){case"M":i=[l[1],l[2]],o=s;break;case"A":var d=vv(n,l);c.arcParams=d}if("Z"===u)n=i,r=t[o+1];else{var h=l.length;n=[l[h-2],l[h-1]]}r&&"Z"===r[0]&&(r=t[o],e[o]&&(e[o].prePoint=n)),c.currentPoint=n,e[o]&&gv(n,e[o].currentPoint)&&(e[o].prePoint=c.prePoint);var f=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=f;var p=c.prePoint;if(["L","H","V"].includes(u))c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]];else if("Q"===u){var g=[l[1],l[2]];c.startTangent=[p[0]-g[0],p[1]-g[1]],c.endTangent=[n[0]-g[0],n[1]-g[1]]}else if("T"===u){g=mv((y=e[s-1]).currentPoint,p);"Q"===y.command?(c.command="Q",c.startTangent=[p[0]-g[0],p[1]-g[1]],c.endTangent=[n[0]-g[0],n[1]-g[1]]):(c.command="TL",c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]])}else if("C"===u){var v=[l[1],l[2]],m=[l[3],l[4]];c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[n[0]-m[0],n[1]-m[1]],0===c.startTangent[0]&&0===c.startTangent[1]&&(c.startTangent=[v[0]-m[0],v[1]-m[1]]),0===c.endTangent[0]&&0===c.endTangent[1]&&(c.endTangent=[m[0]-v[0],m[1]-v[1]])}else if("S"===u){var y;v=mv((y=e[s-1]).currentPoint,p),m=[l[1],l[2]];"C"===y.command?(c.command="C",c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[n[0]-m[0],n[1]-m[1]]):(c.command="SQ",c.startTangent=[p[0]-m[0],p[1]-m[1]],c.endTangent=[n[0]-m[0],n[1]-m[1]])}else if("A"===u){var b=.001,x=c.arcParams||{},w=x.cx,C=void 0===w?0:w,S=x.cy,k=void 0===S?0:S,E=x.rx,M=void 0===E?0:E,A=x.ry,_=void 0===A?0:A,T=x.sweepFlag,P=void 0===T?0:T,I=x.startAngle,D=void 0===I?0:I,O=x.endAngle,R=void 0===O?0:O;0===P&&(b*=-1);var L=M*Math.cos(D-b)+C,B=_*Math.sin(D-b)+k;c.startTangent=[L-i[0],B-i[1]];var F=M*Math.cos(D+R+b)+C,N=_*Math.sin(D+R-b)+k;c.endTangent=[p[0]-F,p[1]-N]}e.push(c)}return e}var bv=function(t,e,n){return t>=e&&t<=n};function xv(t){return Math.abs(t)<1e-6?0:t<0?-1:1}function wv(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function Cv(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=t[o],s=t[(o+1)%i];if(wv(a,s,[e,n]))return!0;xv(a[1]-n)>0!=xv(s[1]-n)>0&&xv(e-(n-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(r=!r)}return r}function Sv(t){for(var e=[],n=t.length,r=0;r<n-1;r++){var i=t[r],o=t[r+1];e.push({from:{x:i[0],y:i[1]},to:{x:o[0],y:o[1]}})}if(e.length>1){var a=t[0],s=t[n-1];e.push({from:{x:s[0],y:s[1]},to:{x:a[0],y:a[1]}})}return e}function kv(t,e){var n=!1;return bs(t,(function(t){if(function(t,e,n,r){var i=n.x-t.x,o=n.y-t.y,a=e.x-t.x,s=e.y-t.y,l=r.x-n.x,u=r.y-n.y,c=a*u-s*l,d=null;if(c*c>.001*(a*a+s*s)*(l*l+u*u)){var h=(i*u-o*l)/c,f=(i*s-o*a)/c;bv(h,0,1)&&bv(f,0,1)&&(d={x:t.x+h*a,y:t.y+h*s})}return d}(t.from,t.to,e.from,e.to))return n=!0,!1})),n}function Ev(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,n),maxY:Math.max.apply(null,n)}}function Mv(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),a=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!l||0===Math.sin(l)||rl(l,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),c=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return u=u>Math.PI/2?Math.PI-u:u,c=c>Math.PI/2?Math.PI-c:c,{xExtra:Math.cos(l/2-u)*(e/2*(1/Math.sin(l/2)))-e/2||0,yExtra:Math.cos(c-l/2)*(e/2*(1/Math.sin(l/2)))-e/2||0}}Cg("rect",kg),Cg("image",kg),Cg("circle",Eg),Cg("marker",Eg),Cg("polyline",(function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var o=e[i];n.push(o[0]),r.push(o[1])}var a=Pg(n,r),s=a.x,l=a.y,u={minX:s,minY:l,maxX:s+a.width,maxY:l+a.height};return{x:(u=Zg(t,u)).minX,y:u.minY,width:u.maxX-u.minX,height:u.maxY-u.minY}})),Cg("polygon",(function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var o=e[i];n.push(o[0]),r.push(o[1])}return Pg(n,r)})),Cg("text",(function(t){var e=t.attr(),n=e.x,r=e.y,i=e.text,o=e.fontSize,a=e.lineHeight,s=e.font;s||(s=ev(e));var l,u=function(t,e){var n=Jg(),r=0;return vs(t)||""===t||(n.save(),n.font=e,zs(t)&&t.includes("\n")?bs(t.split("\n"),(function(t){var e=n.measureText(t).width;r<e&&(r=e)})):r=n.measureText(t).width,n.restore()),r}(i,s);if(u){var c=e.textAlign,d=e.textBaseline,h=tv(i,o,a),f={x:n,y:r-h};c&&("end"===c||"right"===c?f.x-=u:"center"===c&&(f.x-=u/2)),d&&("top"===d?f.y+=h:"middle"===d&&(f.y+=h/2)),l={x:f.x,y:f.y,width:u,height:h}}else l={x:n,y:r,width:0,height:0};return l})),Cg("path",(function(t){var e=t.attr(),n=e.path,r=e.stroke?e.lineWidth:0,i=function(t,e){for(var n=[],r=[],i=[],o=0;o<t.length;o++){var a=(g=t[o]).currentPoint,s=g.params,l=g.prePoint,u=void 0;switch(g.command){case"Q":u=zg.box(l[0],l[1],s[1],s[2],s[3],s[4]);break;case"C":u=Wg.box(l[0],l[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var c=g.arcParams;u=Xg(c.cx,c.cy,c.rx,c.ry,c.xRotation,c.startAngle,c.endAngle);break;default:n.push(a[0]),r.push(a[1])}u&&(g.box=u,n.push(u.x,u.x+u.width),r.push(u.y,u.y+u.height)),e&&("L"===g.command||"M"===g.command)&&g.prePoint&&g.nextPoint&&i.push(g)}n=n.filter((function(t){return!Number.isNaN(t)})),r=r.filter((function(t){return!Number.isNaN(t)}));var d=Ps(n),h=Ps(r),f=Ts(n),p=Ts(r);if(0===i.length)return{x:d,y:h,width:f-d,height:p-h};for(o=0;o<i.length;o++){var g;(a=(g=i[o]).currentPoint)[0]===d?d-=Mv(g,e).xExtra:a[0]===f&&(f+=Mv(g,e).xExtra),a[1]===h?h-=Mv(g,e).yExtra:a[1]===p&&(p+=Mv(g,e).yExtra)}return{x:d,y:h,width:f-d,height:p-h}}(t.get("segments")||yv(n),r),o=i.x,a=i.y,s={minX:o,minY:a,maxX:o+i.width,maxY:a+i.height};return{x:(s=Zg(t,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}})),Cg("line",(function(t){var e=t.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2,a={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,o),maxY:Math.max(r,o)};return{x:(a=Zg(t,a)).minX,y:a.minY,width:a.maxX-a.minX,height:a.maxY-a.minY}})),Cg("ellipse",(function(t){var e=t.attr(),n=e.x,r=e.y,i=e.rx,o=e.ry;return{x:n-i,y:r-o,width:2*i,height:2*o}}));var Av=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.item=n.item,r.canvasX=n.canvasX,r.canvasY=n.canvasY,r.wheelDelta=n.wheelDelta,r.detail=n.detail,r}return Ka(e,t),e}(nf),_v=function(t){return t+"-"+Math.random()+Date.now()},Tv=function(t){var e=0,n=0,r=0,i=0;if(el(t))e=n=r=i=t;else if(zs(t)){e=n=r=i=parseInt(t,10)}else ms(t)&&(e=t[0],r=vs(t[1])?t[0]:t[1],i=vs(t[2])?t[0]:t[2],n=vs(t[3])?r:t[3]);return[e,r,i,n]},Pv=function(t){return Number.isNaN(Number(t))},Iv=function(t){for(var e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++){var a=t[o].getBBox(),s=a.minX,l=a.minY,u=a.maxX,c=a.maxY;s<e&&(e=s),l<r&&(r=l),u>n&&(n=u),c>i&&(i=c)}return{x:Math.floor(e),y:Math.floor(r),width:Math.ceil(n)-Math.floor(e),height:Math.ceil(i)-Math.floor(r),minX:e,minY:r,maxX:n,maxY:i}},Dv=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",uniqueId:_v,formatPadding:Tv,cloneEvent:function(t){var e=new Av(t.type,t);return e.clientX=t.clientX,e.clientY=t.clientY,e.x=t.x,e.y=t.y,e.target=t.target,e.currentTarget=t.currentTarget,e.bubbles=!0,e.item=t.item,e},isViewportChanged:function(t){if(!t)return!1;for(var e=[1,0,0,0,1,0,0,0,1],n=0;n<9;n++)if(t[n]!==e[n])return!0;return!1},isNaN:Pv,calculationItemsBBox:Iv,processParallelEdges:function(t,e,n,r,i){void 0===e&&(e=15),void 0===n&&(n="quadratic"),void 0===r&&(r=void 0),void 0===i&&(i=void 0);for(var o=t.length,a=2*e,s=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],l={},u=[],c={},d=0;d<o;d++){var h=t[d],f=h.source,p=h.target,g=f+"-"+p;if(!u[d]){l[g]||(l[g]=[]),u[d]=!0,l[g].push(h);for(var v=0;v<o;v++)if(d!==v){var m=t[v],y=m.source,b=m.target;u[v]||(f===b&&p===y?(l[g].push(m),u[v]=!0,c[y+"|"+b+"|"+(l[g].length-1)]=!0):f===y&&p===b&&(l[g].push(m),u[v]=!0))}}}for(var x in l)for(var w=l[x],C=w.length,S=0;S<C;S++){var k=w[S];if(k.source!==k.target)if(1===C&&r&&k.source!==k.target)k.type=r;else{k.type=n;var E=(S%2==0?1:-1)*(c[k.source+"|"+k.target+"|"+S]?-1:1);k.curveOffset=C%2==1?E*Math.ceil(S/2)*a:E*(Math.floor(S/2)*a+e)}else i&&(k.type=i),k.loopCfg={position:s[S%8],dist:20*Math.floor(S/8)+50}}return t}}),Ov=function(){function t(t){this.destroyed=!1,this.graph=t,this.destroyed=!1}return t.prototype.getViewCenter=function(){var t=this.getFormatPadding(),e=this.graph,n=this.graph.get("width"),r=e.get("height");return{x:(n-t[1]-t[3])/2+t[3],y:(r-t[0]-t[2])/2+t[0]}},t.prototype.fitCenter=function(){var t=this.graph,e=t.get("group");e.resetMatrix();var n=e.getCanvasBBox();if(0!==n.width&&0!==n.height){var r=this.getViewCenter(),i=n.x+n.width/2,o=n.y+n.height/2;t.translate(r.x-i,r.y-o)}},t.prototype.fitView=function(){var t=this.graph,e=this.getFormatPadding(),n=t.get("width"),r=t.get("height"),i=t.get("group");i.resetMatrix();var o=i.getCanvasBBox();if(0!==o.width&&0!==o.height){var a=this.getViewCenter(),s=o.x+o.width/2,l=o.y+o.height/2;t.translate(a.x-s,a.y-l);var u=(n-e[1]-e[3])/o.width,c=(r-e[0]-e[2])/o.height,d=u;u>c&&(d=c),t.zoom(d,a)||console.warn("zoom failed, ratio out of range, ratio: %f",d)}},t.prototype.getFormatPadding=function(){var t=this.graph.get("fitViewPadding");return Tv(t)},t.prototype.focusPoint=function(t,e,n){var r=this,i=this.getViewCenter(),o=this.getPointByCanvas(i.x,i.y),a=this.graph.get("group").getMatrix();if(a||(a=[1,0,0,0,1,0,0,0,1]),e){var s=(o.x-t.x)*a[0],l=(o.y-t.y)*a[4],u=0,c=0,d=0,h=0;this.graph.get("canvas").animate((function(t){d=s*t,h=l*t,r.graph.translate(d-u,h-c),u=d,c=h}),Za({},n))}else this.graph.translate((o.x-t.x)*a[0],(o.y-t.y)*a[4])},t.prototype.getPointByCanvas=function(t,e){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),Pd({x:t,y:e},n)},t.prototype.getPointByClient=function(t,e){var n=this.graph.get("canvas").getPointByClient(t,e);return this.getPointByCanvas(n.x,n.y)},t.prototype.getClientByPoint=function(t,e){var n=this.graph.get("canvas"),r=this.getCanvasByPoint(t,e),i=n.getClientByPoint(r.x,r.y);return{x:i.x,y:i.y}},t.prototype.getCanvasByPoint=function(t,e){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),Td({x:t,y:e},n)},t.prototype.focus=function(t,e,n){if(zs(t)&&(t=this.graph.findById(t)),t){var r=0,i=0;if(t.getType&&"edge"===t.getType()){var o=t.getSource().get("group").getMatrix(),a=t.getTarget().get("group").getMatrix();o&&a?(r=(o[6]+a[6])/2,i=(o[7]+a[7])/2):(o||a)&&(r=o?o[6]:a[6],i=o?o[7]:a[7])}else{var s=t.get("group").getMatrix();s||(s=[1,0,0,0,1,0,0,0,1]),r=s[6],i=s[7]}this.focusPoint({x:r,y:i},e,n)}},t.prototype.changeSize=function(t,e){var n=this.graph;if(!el(t)||!el(e))throw Error("invalid canvas width & height, please make sure width & height type is number");n.set({width:t,height:e}),n.get("canvas").changeSize(t,e),n.get("plugins").forEach((function(t){t.get("gridContainer")&&t.positionInit()}))},t.prototype.destroy=function(){this.graph=null,this.destroyed=!1},t}();function Rv(t){return(Rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lv(t){if("string"!=typeof t)return t;var e=function(t){if("string"!=typeof t)return t;try{return JSON.parse(t.trim())}catch(e){return t.trim()}},n=e(t);if("string"!=typeof n)return n;for(var r=function(t){return t[t.length-1]},i=t.trim(),o=[],a=[],s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.some((function(t){return r(a)===t}))},l=null,u=0,c="";u<i.length;){var d=i[u],h=s('"',"'");if(h||d.trim()){var f="\\"===i[u-1],p=s("}"),g=s("]"),v=s(","),m=r(o);if(h)if(r(a)!==d||f)c+=d;else{a.pop();var y=e(c);m.push(y),l=y,c=""}else if(g&&","===d)c&&(m.push(e(c)),c="");else if(p&&":"===d)a.push(","),c&&(m.push(c),c="");else if(v&&","===d)c&&(m.push(e(c)),c=""),a.pop();else if("}"===d&&(p||v)){c&&(m.push(e(c)),c=""),v&&a.pop();for(var b={},x=1;x<m.length;x+=2)b[m[x-1]]=m[x];o.pop(),o.length&&r(o).push(b),a.pop(),l=b}else"]"===d&&g?(c&&(m.push(e(c)),c=""),o.pop(),o.length&&r(o).push(m),a.pop(),l=m):"{"===d?(o.push([]),a.push("}")):"["===d?(o.push([]),a.push("]")):'"'===d?a.push('"'):"'"===d?a.push("'"):c+=d;u+=1}else u+=1}return l||c}function Bv(t,e){var n={},r=t.getAttributeNames&&t.getAttributeNames()||[],i=t.children&&Array.from(t.children).map((function(t){return Bv(t,e)})),o={},a=t.tagName?t.tagName.toLowerCase():"group";return"text"===a&&(n.text=t.innerText),o.type=a,"img"===a&&(o.type="image"),Array.from(r).forEach((function(e){var r=e.split("-").reduce((function(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)})),i=t.getAttribute(e);try{if("style"===r||"attrs"===r){var a=Lv(i);n=Za(Za({},n),a)}else o[r]=Lv(i)}catch(s){if("style"===r)throw s;o[r]=i}})),o.attrs=n,e&&e.style&&o.name&&"object"===Rv(e.style[o.name])&&(o.attrs=Za(Za({},o.attrs),e.style[o.name])),e&&e.style&&o.keyshape&&(o.attrs=Za(Za({},o.attrs),e.style)),i.length&&(o.children=i),o}function Fv(t,e){var n;void 0===e&&(e={x:0,y:0});var r=Za({x:0,y:0,width:0,height:0},e);if(null===(n=t.children)||void 0===n?void 0:n.length){var i=t.attrs,o=void 0===i?{}:i,a=o.marginTop,s=Za({},e);a&&(s.y+=a);for(var l=0;l<t.children.length;l++){t.children[l].attrs.key=(o.key||"root")+" -"+l+" ";var u=Fv(t.children[l],s);if(u.bbox){var c=u.bbox;"inline"===u.attrs.next?s.x+=u.bbox.width:s.y+=u.bbox.height,c.width+c.x>r.width&&(r.width=c.width+c.x),c.height+c.y>r.height&&(r.height=c.height+c.y)}}}return t.bbox=function(t,e,n){var r,i,o=t.attrs,a=void 0===o?{}:o,s={x:e.x||0,y:e.y||0,width:n.width||0,height:n.height||0};switch(t.type){case"maker":case"circle":a.r&&(i=2*a.r,r=2*a.r);break;case"text":a.text&&(i=vh(a.text,a.fontSize||12)[0],r=16,s.y+=r,s.height=r,s.width=i,t.attrs=Za({fontSize:12,fill:"#000"},a));break;default:a.width&&(i=a.width),a.height&&(r=a.height)}return r>=0&&(s.height=r),i>=0&&(s.width=i),a.marginTop&&(s.y+=a.marginTop),a.marginLeft&&(s.x+=a.marginLeft),s}(t,e,r),t.attrs=Za(Za({},t.attrs),t.bbox),t}function Nv(t,e){var n,r,i,o,a=(t||{}).type,s=((null==e?void 0:e.attrs)||{}).key;if(s&&t&&(t.attrs.key=s),!t&&e)return{action:"delete",val:e,type:a,key:s};if(t&&!e)return{action:"add",val:t,type:a};if(!t&&!e)return{action:"same",type:a};var l=[];if((null===(n=t.children)||void 0===n?void 0:n.length)>0||(null===(r=e.children)||void 0===r?void 0:r.length)>0)for(var u=Math.max(null===(i=t.children)||void 0===i?void 0:i.length,null===(o=e.children)||void 0===o?void 0:o.length),c=e.children||[],d=t.children||[],h=0;h<u;h+=1)l.push(Nv(d[h],c[h]));var f=Object.keys(e.attrs),p=Object.keys(t.attrs);return e.type!==t.type?{action:"restructure",nowTarget:t,formerTarget:e,key:s,children:l}:f.filter((function(t){return"children"!==t})).some((function(n){return t.attrs[n]!==e.attrs[n]||!p.includes(n)}))?{action:"change",val:t,children:l,type:a,key:s}:{action:"same",children:l,type:a,key:s}}function zv(t){var e={},n=function(e){var n=function(t){return function(e){for(var n=t.length,r=[],i=0,o="";i<n;)if("{"===t[i]&&"{"===t[i+1])r.push(o),o="",i+=2;else if("}"===t[i]&&"}"===t[i+1]){if(r.length){var a=r.pop();o=Ul(e,o,a.endsWith("=")?'"{'+o+'}"':o),r.push(a+o)}i+=2,o=""}else o+=t[i],i+=1;return r.push(o),r.map((function(t,e){return r[e-1]&&r[e-1].endsWith("=")?'"{'+t+'}"':t})).join("")}}("function"==typeof t?t(e):t)(e),r=document.createElement("div");r.innerHTML=n;var i=Fv(Bv(r.children[0],e));return r.remove(),i};return{draw:function(t,r){var i=n(t),o=r;return function t(e){var n=e.attrs,i=void 0===n?{}:n,a=e.bbox,s=e.type,l=e.children,u=Qa(e,["attrs","bbox","type","children"]);if("group"!==e.type){var c=r.addShape(e.type,Za({attrs:i,origin:{bbox:a,type:s,children:l}},u));e.keyshape&&(o=c)}e.children&&e.children.forEach((function(e){return t(e)}))}(i),e[t.id]=[i],o},update:function(t,r){e[t.id]||(e[t.id]=[]);var i=r.getContainer(),o=i.get("children"),a=n(t),s=Nv(a,e[t.id].pop()),l=function t(e){var n;"group"!==e.type&&i.addShape(e.type,{attrs:e.attrs}),(null===(n=e.children)||void 0===n?void 0:n.length)&&e.children.map((function(e){return t(e)}))},u=function t(e){var n,r=o.find((function(t){return t.attrs.key===e.attrs.key}));r&&i.removeChild(r),(null===(n=e.children)||void 0===n?void 0:n.length)&&e.children.map((function(e){return t(e)}))};!function t(e){var n=e.key;if("group"!==e.type){var i=o.find((function(t){return t.attrs.key===n}));switch(e.action){case"change":if(i){var a=e.val.keyshape?r.getOriginStyle():{};i.attr(Za(Za({},a),e.val.attrs))}break;case"add":l(e.val);break;case"delete":u(e.val);break;case"restructure":u(e.formerTarget),l(e.nowTarget)}}e.children&&e.children.forEach((function(e){return t(e)}))}(s),e[t.id].push(a)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var jv={};function Gv(t){return jv[t]||(jv[t]=vl(t)),jv[t]}var Uv={defaultShapeType:"defaultType",className:null,getShape:function(t){var e=this;return e[t]||e[e.defaultShapeType]||e["simple-circle"]},draw:function(t,e,n){var r=this.getShape(t),i=r.draw(e,n);return r.afterDraw&&r.afterDraw(e,n,i),i},baseUpdate:function(t,e,n,r){var i=this.getShape(t);i.update&&i.update(e,n,r),i.afterUpdate&&i.afterUpdate(e,n)},setState:function(t,e,n,r){this.getShape(t).setState(e,n,r)},shouldUpdate:function(t){return!!this.getShape(t).update},getControlPoints:function(t,e){return this.getShape(t).getControlPoints(e)},getAnchorPoints:function(t,e){return this.getShape(t).getAnchorPoints(e)}},$v={options:{},draw:function(t,e){return this.drawShape(t,e)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e=this.options.anchorPoints;return t.anchorPoints||e}},Vv=function(){function t(){}return t.registerFactory=function(e,n){var r=Gv(e),i=Za(Za({},Uv),n);return t[r]=i,i.className=r,i},t.getFactory=function(e){return t[Gv(e)]},t.registerNode=function(e,n,r){var i,o=t.Node;if("string"==typeof n||"function"==typeof n){var a=zv(n);i=Za(Za({},o.getShape("single-node")),a)}else if(n.jsx){a=zv(n.jsx);i=Za(Za(Za({},o.getShape("single-node")),a),n)}else{o.getShape(r);var s=r?o.getShape(r):$v;i=Za(Za({},s),n)}return i.type=e,i.itemType="node",o[e]=i,i},t.registerEdge=function(e,n,r){var i=t.Edge,o=r?i.getShape(r):$v,a=Za(Za({},o),n);return a.type=e,a.itemType="edge",i[e]=a,a},t.registerCombo=function(e,n,r){var i=t.Combo,o=r?i.getShape(r):$v,a=Za(Za({},o),n);return a.type=e,a.itemType="combo",i[e]=a,a},t}();Vv.registerFactory("node",{defaultShapeType:"circle"}),Vv.registerFactory("edge",{defaultShapeType:"line"}),Vv.registerFactory("combo",{defaultShapeType:"circle"});var Wv=function(){function t(t){this._cfg={},this.destroyed=!1;this._cfg=Object.assign({id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]},this.getDefaultCfg(),t);var e=this.get("model"),n=e.id,r=this.get("type");n||(n=_v(r),this.get("model").id=n),this.set("id",n);var i=t.group;i&&(i.set("item",this),i.set("id",n)),this.init(),this.draw();var o=e.shape||e.type||("edge"===r?"line":"circle"),a=this.get("shapeFactory");if(a&&a[o]){var s=a[o].options;if(s&&s.stateStyles){var l=this.get("styles")||e.stateStyles;l=Rl({},s.stateStyles,l),this.set("styles",l)}}}return t.prototype.calculateBBox=function(){var t=this.get("keyShape"),e=this.get("group"),n=lh(t,e);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},t.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group"),n=lh(t,e);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},t.prototype.drawInner=function(){var t=this,e=t.get("shapeFactory"),n=t.get("group"),r=t.get("model");n.clear();var i=r.visible;if(void 0===i||i||t.changeVisibility(i),e){t.updatePosition(r);var o=t.getShapeCfg(r),a=o.type,s=e.draw(a,o,n);s&&(t.set("keyShape",s),s.set("isKeyShape",!0),s.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",a),this.restoreStates(e,a)}},t.prototype.setOriginStyle=function(){var t=this.get("group").get("children"),e=this.getKeyShape(),n=this,r=e.get("name");if(this.get("originStyle")){var i=this.getOriginStyle();r&&!i[r]&&(i[r]={});var o=this.getCurrentStatesStyle();bs(t,(function(t){var e=t.get("name"),a=t.attr();if(e&&e!==r){var s=o[e];i[e]||(i[e]={}),s?Object.keys(a).forEach((function(t){var n=a[t];n!==s[t]&&(i[e][t]=n)})):i[e]="image"!==t.get("type")?Pl(a):n.getShapeStyleByName(e)}else{var l=t.attr(),u={};Object.keys(o).forEach((function(t){var e=o[t];Ss(e)&&t!==r||(u[t]=e)})),Object.keys(l).forEach((function(t){var e=l[t];u[t]!==e&&(r?i[r][t]=e:i[t]=e)}))}})),i.path&&delete i.path,i.matrix&&delete i.matrix,i.x&&delete i.x,i.y&&delete i.y,i[r]&&(delete i[r].x,delete i[r].y,delete i[r].matrix,delete i[r].path),n.set("originStyle",i)}else{var a={};bs(t,(function(t){var e=t.get("type"),i=t.get("name");if(i&&i!==r)a[i]="image"!==e?Pl(t.attr()):n.getShapeStyleByName(i),a[i]&&"text"===e&&(delete a[i].x,delete a[i].y,delete a[i].matrix);else{var o=n.getShapeStyleByName();if(delete o.path,delete o.matrix,r)if(i)a[r]=o;else{var s=_v("shape");t.set("name",s),a[s]="image"!==e?Pl(t.attr()):n.getShapeStyleByName(i)}else Object.assign(a,o)}})),n.set("originStyle",a)}},t.prototype.restoreStates=function(t,e){var n=this;bs(n.get("states"),(function(r){t.setState(e,r,!0,n)}))},t.prototype.init=function(){var t=Vv.getFactory(this.get("type"));this.set("shapeFactory",t)},t.prototype.get=function(t){return this._cfg[t]},t.prototype.set=function(t,e){Ss(t)?this._cfg=Za(Za({},this._cfg),t):this._cfg[t]=e},t.prototype.getDefaultCfg=function(){return{}},t.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null)},t.prototype.beforeDraw=function(){},t.prototype.afterDraw=function(){},t.prototype.afterUpdate=function(){},t.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},t.prototype.getShapeStyleByName=function(t){var e,n=this.get("group");if(e=t?n.find((function(e){return e.get("name")===t})):this.getKeyShape()){var r={};return bs(e.attr(),(function(t,e){("img"!==e||zs(t))&&(r[e]=t)})),r}return{}},t.prototype.getShapeCfg=function(t,e){var n=this.get("styles");if(n){var r=t;return r.style=Za(Za({},n),t.style),r}return t},t.prototype.getStateStyle=function(t){var e=this.get("styles");return e&&e[t]},t.prototype.getOriginStyle=function(){return this.get("originStyle")},t.prototype.getCurrentStatesStyle=function(){var t=this,e={},n=t.getStates();return n&&n.length?(bs(t.getStates(),(function(n){e=Object.assign(e,t.getStateStyle(n))})),e):this.getOriginStyle()},t.prototype.setState=function(t,e){var n=this.get("states"),r=this.get("shapeFactory"),i=t,o=t;zs(e)&&(i=t+":"+e,o=t+":");var a=n;if(bl(e)){var s=n.indexOf(o);if(e){if(s>-1)return;n.push(i)}else s>-1&&n.splice(s,1)}else if(zs(e)){var l=n.filter((function(t){return t.includes(o)}));l.length>0&&this.clearStates(l),(a=a.filter((function(t){return!t.includes(o)}))).push(i),this.set("states",a)}if(r){var u=this.get("model").type;r.setState(u,t,e,this)}},t.prototype.clearStates=function(t){var e=this,n=e.getStates(),r=e.get("shapeFactory"),i=e.get("model").type;t||(t=n),zs(t)&&(t=[t]);var o=n.filter((function(e){return-1===t.indexOf(e)}));e.set("states",o),t.forEach((function(t){r.setState(i,t,!1,e)}))},t.prototype.getContainer=function(){return this.get("group")},t.prototype.getKeyShape=function(){return this.get("keyShape")},t.prototype.getModel=function(){return this.get("model")},t.prototype.getType=function(){return this.get("type")},t.prototype.getID=function(){return this.get("id")},t.prototype.isItem=function(){return!0},t.prototype.getStates=function(){return this.get("states")},t.prototype.hasState=function(t){return this.getStates().indexOf(t)>=0},t.prototype.refresh=function(t){var e=this.get("model");this.updatePosition(e),this.updateShape(t),this.afterUpdate(),this.clearCache()},t.prototype.getUpdateType=function(t){},t.prototype.update=function(t,e){void 0===e&&(e=void 0);var n=this.get("model");if("move"===e)this.updatePosition(t);else{var r=n.visible,i=t.visible;r!==i&&void 0!==i&&this.changeVisibility(i);var o={x:n.x,y:n.y};t.x=isNaN(+t.x)?n.x:+t.x,t.y=isNaN(+t.y)?n.y:+t.y;var a=this.get("styles");if(t.stateStyles)Tl(a,t.stateStyles),delete t.stateStyles;Object.assign(n,t),o.x===t.x&&o.y===t.y||this.updatePosition(t),this.updateShape()}this.afterUpdate(),this.clearCache()},t.prototype.updateShape=function(t){var e=this.get("shapeFactory"),n=this.get("model"),r=n.type;if(e.shouldUpdate(r)&&r===this.get("currentShape")){var i=this.getShapeCfg(n,t);e.baseUpdate(r,i,this,t),"move"!==t&&this.setOriginStyle()}else this.draw();this.restoreStates(e,r)},t.prototype.updatePosition=function(t){var e=this.get("model"),n=isNaN(+t.x)?+e.x:+t.x,r=isNaN(+t.y)?+e.y:+t.y,i=this.get("group");if(isNaN(n)||isNaN(r))return!1;e.x=n,e.y=r;var o=i.getMatrix();return(!o||o[6]!==n||o[7]!==r)&&(i.resetMatrix(),Od(i,{x:n,y:r}),this.clearCache(),!0)},t.prototype.getBBox=function(){var t=this.get("bboxCache");return t||(t=this.calculateBBox(),this.set("bboxCache",t)),t},t.prototype.getCanvasBBox=function(){var t=this.get("bboxCanvasCache");return t||(t=this.calculateCanvasBBox(),this.set("bboxCanvasCache",t)),t},t.prototype.toFront=function(){this.get("group").toFront()},t.prototype.toBack=function(){this.get("group").toBack()},t.prototype.show=function(){this.changeVisibility(!0)},t.prototype.hide=function(){this.changeVisibility(!1)},t.prototype.changeVisibility=function(t){var e=this.get("group");t?e.show():e.hide(),this.set("visible",t)},t.prototype.isVisible=function(){return this.get("visible")},t.prototype.enableCapture=function(t){var e=this.get("group");e&&e.set("capture",t)},t.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),this.clearCache(),e.remove(),this._cfg=null,this.destroyed=!0}},t}(),Hv={source:"start",target:"end"},Yv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,e){var n=Hv[t]+"Point",r=t+"Node",i=this.get(r);i&&!i.destroyed&&i.removeEdge(this),Ss(e)?(this.set(n,e),this.set(r,null)):e&&(e.addEdge(this),this.set(r,e),this.set(n,null))},e.prototype.getLinkPoint=function(t,e,n){var r=Hv[t]+"Point",i=t+"Node",o=this.get(r);if(!o){var a=this.get(i),s=t+"Anchor",l=this.getPrePoint(t,n),u=e[s];vs(u)||(o=a.getLinkPointByAnchor(u)),o=o||a.getLinkPoint(l),vs(o.index)||this.set(t+"AnchorIndex",o.index)}return o},e.prototype.getPrePoint=function(t,e){if(e&&e.length)return e["source"===t?0:e.length-1];var n="source"===t?"target":"source";return this.getEndPoint(n)},e.prototype.getEndPoint=function(t){var e=t+"Node",n=Hv[t]+"Point",r=this.get(e);return r?r.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var e=this.getEndPoint("source"),n=this.getEndPoint("target"),r=this.get("shapeFactory"),i=t.type;return r.getControlPoints(i,{startPoint:e,endPoint:n})},e.prototype.getEndCenter=function(t){var e=t+"Node",n=Hv[t]+"Point",r=this.get(e);if(r){var i=r.getBBox();return{x:i.centerX,y:i.centerY}}return this.get(n)},e.prototype.init=function(){t.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(e,n){var r=this,i=r.get("linkCenter"),o="move"===n?e:t.prototype.getShapeCfg.call(this,e);if(i)o.startPoint=r.getEndCenter("source"),o.endPoint=r.getEndCenter("target");else{var a=o.controlPoints||r.getControlPointsByCenter(o);o.startPoint=r.getLinkPoint("source",e,a),o.endPoint=r.getLinkPoint("target",e,a)}return o.sourceNode=r.get("sourceNode"),o.targetNode=r.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),e=this.get("sourceNode"),n=this.get("targetNode");return e?delete t.sourceNode:t.source=this.get("startPoint"),n?delete t.targetNode:t.target=this.get("endPoint"),zs(t.source)||Ss(t.source)||(t.source=t.source.getID()),zs(t.target)||Ss(t.target)||(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,e){void 0===e&&(e=void 0);var n=this.get("model"),r=n.visible,i=t.visible;r!==i&&void 0!==i&&this.changeVisibility(i);var o=this.get("styles");t.stateStyles&&(Tl(o,t.stateStyles),delete t.stateStyles);Object.assign(n,t),this.updateShape(e),this.afterUpdate(),this.clearCache()},e.prototype.destroy=function(){var e=this.get("sourceNode"),n=this.get("targetNode");e&&!e.destroyed&&e.removeEdge(this),n&&!n.destroyed&&n.removeEdge(this),t.prototype.destroy.call(this)},e}(Wv),Xv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getNearestPoint=function(t,e){for(var n=0,r=t[0],i=Dd(t[0],e),o=0;o<t.length;o++){var a=t[o],s=Dd(a,e);s<i&&(r=a,i=s,n=o)}return r.anchorIndex=n,r},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter((function(e){return e.get("target")===t}))},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter((function(e){return e.get("source")===t}))},e.prototype.getNeighbors=function(t){var e=this,n=this.get("edges");if("target"===t){return n.filter((function(t){return t.getSource()===e})).map((function(t){return t.getTarget()}))}if("source"===t){return n.filter((function(t){return t.getTarget()===e})).map((function(t){return t.getSource()}))}return n.map((function(t){return t.getSource()===e?t.getTarget():t.getSource()}))},e.prototype.getLinkPointByAnchor=function(t){return this.getAnchorPoints()[t]},e.prototype.getLinkPoint=function(t){var e,n,r=this.get("keyShape").get("type"),i=this.get("type"),o=this.getBBox();"combo"===i?(e=o.centerX||(o.maxX+o.minX)/2,n=o.centerY||(o.maxY+o.minY)/2):(e=o.centerX,n=o.centerY);var a,s=this.getAnchorPoints();switch(r){case"circle":a=Ad({x:e,y:n,r:o.width/2},t);break;case"ellipse":a=_d({x:e,y:n,rx:o.width/2,ry:o.height/2},t);break;default:a=Md(o,t)}var l=a;return s.length&&(l||(l=t),l=this.getNearestPoint(s,l)),l||(l={x:e,y:n}),l},e.prototype.getAnchorPoints=function(){var t=this.get("anchorPointsCache");if(!t){t=[];var e=this.get("shapeFactory"),n=this.getBBox(),r=this.get("model"),i=this.getShapeCfg(r),o=r.type;bs(e.getAnchorPoints(o,i)||[],(function(e,r){var i={x:n.minX+e[0]*n.width,y:n.minY+e[1]*n.height,anchorIndex:r};t.push(i)})),this.set("anchorPointsCache",t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var e=this.getEdges(),n=e.indexOf(t);n>-1&&e.splice(n,1)},e.prototype.clearCache=function(){this.set("bboxCache",null),this.set("anchorPointsCache",null)},e.prototype.getUpdateType=function(t){var e,n,r,i,o;if(t){var a=!vs(t.x),s=!vs(t.y),l=Object.keys(t);return 1===l.length&&(a||s)||2===l.length&&a&&s?"move":el(t.x)||el(t.y)||t.type||t.anchorPoints||t.size||(null==t?void 0:t.style)&&((null===(e=null==t?void 0:t.style)||void 0===e?void 0:e.r)||(null===(n=null==t?void 0:t.style)||void 0===n?void 0:n.width)||(null===(r=null==t?void 0:t.style)||void 0===r?void 0:r.height)||(null===(i=null==t?void 0:t.style)||void 0===i?void 0:i.rx)||(null===(o=null==t?void 0:t.style)||void 0===o?void 0:o.ry))?"bbox":"style"}},e}(Wv),qv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var e=this.get("styles"),n=this.get("bbox");if(e&&n){var r=t,i={r:Math.hypot(n.height,n.width)/2||eh.defaultCombo.size[0]/2,width:n.width||eh.defaultCombo.size[0],height:n.height||eh.defaultCombo.size[1]};r.style=Za(Za(Za({},e),t.style),i);var o=t.padding||eh.defaultCombo.padding;return el(o)?(i.r+=o,i.width+=2*o,i.height+=2*o):(i.r+=o[0],i.width+=o[1]+o[3]||2*o[1],i.height+=o[0]+o[2]||2*o[0]),this.set("sizeCache",i),r}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),e=this.get("group"),n=lh(t,e);n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;var r=this.get("sizeCache"),i=this.get("bboxCache")||{},o=i.x,a=i.x;if(r)r.width=Math.max(r.width,n.width),r.height=Math.max(r.height,n.height),"circle"===t.get("type")?(n.width=2*r.r,n.height=2*r.r):(n.width=r.width,n.height=r.height),n.minX=n.centerX-n.width/2,n.minY=n.centerY-n.height/2,n.maxX=n.centerX+n.width/2,n.maxY=n.centerY+n.height/2;else n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;return n.x=n.minX,n.y=n.minY,n.x===o&&n.y===a||this.set("anchorPointsCache",null),n}},e.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.addChild=function(t){switch(t.getType()){case"node":this.addNode(t);break;case"combo":this.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){return this.get("combos").push(t),!0},e.prototype.addNode=function(t){return this.get("nodes").push(t),!0},e.prototype.removeChild=function(t){switch(t.getType()){case"node":this.removeNode(t);break;case"combo":this.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var e=this.getCombos(),n=e.indexOf(t);return n>-1&&(e.splice(n,1),!0)}},e.prototype.removeNode=function(t){if(t){var e=this.getNodes(),n=e.indexOf(t);return n>-1&&(e.splice(n,1),!0)}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){return this.set("bboxCanvasCache",null),this.calculateCanvasBBox()},e.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null),this.set("anchorPointsCache",null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),this.clearCache(),this.set("sizeCache",null),this.set("bbox",null),e.remove(),this._cfg=null,this.destroyed=!0}},e}(Xv),Kv=function(){function t(t){var e=this;this.edgeToBeUpdateMap={},this.throttleRefresh=Yl((function(t){var n,r=e.graph;if(r&&!r.get("destroyed")){var i=e.edgeToBeUpdateMap;i&&(null===(n=Object.keys(i))||void 0===n?void 0:n.length)&&(Object.keys(i).forEach((function(t){var e=i[t].edge;e&&!e.destroyed&&e.refresh(i[t].updateType)})),e.edgeToBeUpdateMap={})}}),16,{trailing:!0,leading:!0}),this.graph=t,this.destroyed=!1}return t.prototype.addItem=function(t,e){var n=this.graph,r="vedge"===t?"edge":t,i=n.get(r+"Group")||n.get("group"),o=vl(r),a=null,s=n.get(r+vl("stateStyles"))||{},l=n.get("default"+o);e.stateStyles&&(s=e.stateStyles),l&&bs(l,(function(t,n){ys(t)&&!ms(t)?e[n]=Rl({},t,e[n]):ms(t)?e[n]=e[n]||Pl(l[n]):e[n]=e[n]||l[n]}));var u=n.get(r+"Mapper");if(u){var c=u(e);c.stateStyles&&(s=c.stateStyles,delete c.stateStyles),bs(c,(function(t,n){ys(t)&&!ms(t)?e[n]=Rl({},e[n],t):e[n]=c[n]||e[n]}))}if(n.emit("beforeadditem",{type:t,model:e}),"edge"===t||"vedge"===t){var d=void 0,h=void 0;if(d=e.source,h=e.target,d&&zs(d)&&(d=n.findById(d)),h&&zs(h)&&(h=n.findById(h)),!d||!h)return void console.warn("The source or target node of edge "+e.id+" does not exist!");d.getType&&"combo"===d.getType()&&(e.isComboEdge=!0),h.getType&&"combo"===h.getType()&&(e.isComboEdge=!0),a=new Yv({model:e,source:d,target:h,styles:s,linkCenter:n.get("linkCenter"),group:i.addGroup()})}else if("node"===t)a=new Xv({model:e,styles:s,group:i.addGroup()});else if("combo"===t){var f=e.children,p=bh(f,n);isNaN(p.x)?isNaN(e.x)&&(e.x=100*Math.random()):e.x=p.x,isNaN(p.y)?isNaN(e.y)&&(e.y=100*Math.random()):e.y=p.y;var g=i.addGroup();g.setZIndex(e.depth);var v=(a=new qv({model:e,styles:s,bbox:e.collapsed?bh([],n):p,group:g})).getModel();(f||[]).forEach((function(t){var e=n.findById(t.id);a.addChild(e),t.depth=v.depth+2})),e.collapsed&&setTimeout((function(){n.collapseCombo(a)}),0)}if(a)return n.get(t+"s").push(a),n.get("itemMap")[a.get("id")]=a,n.emit("afteradditem",{item:a,model:e}),a},t.prototype.updateItem=function(t,e){var n,r,i=this,o=this.graph;if(zs(t)&&(t=o.findById(t)),t&&!t.destroyed){var a="";t.getType&&(a=t.getType());var s=o.get(a+"Mapper"),l=t.getModel(),u=t.getUpdateType(e);if(s){var c=s(Rl({},l,e)),d=Rl({},l,c,e);c.stateStyles&&(t.set("styles",d.stateStyles),delete d.stateStyles),bs(d,(function(t,n){e[n]=t}))}else bs(e,(function(t,n){l[n]&&ys(t)&&!ms(t)&&(e[n]=Za(Za({},l[n]),e[n]))}));if(o.emit("beforeupdateitem",{item:t,cfg:e}),"edge"===a){if(e.source){var h=e.source;zs(h)&&(h=o.findById(h)),t.setSource(h)}if(e.target){var f=e.target;zs(f)&&(f=o.findById(f)),t.setTarget(f)}t.update(e)}if("node"===a||"combo"===a){t.update(e,u);var p=t.getEdges(),g="bbox"===u||"move"===u;if("node"===a)"move"===u?bs(p,(function(t){i.edgeToBeUpdateMap[t.getID()]={edge:t,updateType:u},i.throttleRefresh()})):g&&bs(p,(function(t){t.refresh()}));else if(g&&"combo"===a){var v=t.get("shapeFactory"),m=l.type||"circle";(void 0===l.animate||void 0===e.animate?null===(r=null===(n=v[m])||void 0===n?void 0:n.options)||void 0===r?void 0:r.animate:l.animate||e.animate)?setTimeout((function(){if(t&&!t.destroyed){var e=t.getKeyShape();e&&!e.destroyed&&bs(p,(function(t){t&&!t.destroyed&&t.refresh()}))}}),201):bs(p,(function(t){t.refresh()}))}}o.emit("afterupdateitem",{item:t,cfg:e})}},t.prototype.updateCombo=function(t,e){var n,r,i=this,o=this.graph;if(zs(t)&&(t=o.findById(t)),t&&!t.destroyed){var a=t.getModel(),s=bh(a.collapsed?[]:e,o),l=a.collapsed?bh(e,o):s,u=l.x,c=l.y;t.set("bbox",s),t.update({x:u,y:c});var d=t.get("shapeFactory"),h=a.type||"circle";(void 0===a.animate?null===(r=null===(n=d[h])||void 0===n?void 0:n.options)||void 0===r?void 0:r.animate:a.animate)?setTimeout((function(){if(t&&!t.destroyed){var e=t.getKeyShape();e&&!e.destroyed&&(t.getShapeCfg(a),i.updateComboEdges(t))}}),201):this.updateComboEdges(t)}},t.prototype.updateComboEdges=function(t){for(var e=t.getEdges()||[],n=0;n<e.length;n++){var r=e[n];if(r&&!r.destroyed){var i=r.get("shapeFactory"),o=r.getShapeCfg(r.getModel()),a=r.getContainer();a.clear();var s=i.draw(o.type,o,a);r.set("keyShape",s),s.set("isKeyShape",!0),s.set("draggable",!0),r.setOriginStyle()}}},t.prototype.collapseCombo=function(t){var e=this.graph;zs(t)&&(t=e.findById(t));var n=t.getChildren();n.nodes.forEach((function(t){e.hideItem(t)})),n.combos.forEach((function(t){e.hideItem(t)}))},t.prototype.expandCombo=function(t){var e=this.graph;zs(t)&&(t=e.findById(t));var n=t.getChildren();n.nodes.forEach((function(t){e.showItem(t)})),n.combos.forEach((function(t){t.getModel().collapsed?t.show():e.showItem(t)}))},t.prototype.removeItem=function(t){var e=this,n=this.graph;if(zs(t)&&(t=n.findById(t)),t&&!t.destroyed){var r=Pl(t.getModel());n.emit("beforeremoveitem",{item:r});var i="";t.getType&&(i=t.getType());var o=n.get(i+"s"),a=o.indexOf(t);if(a>-1&&o.splice(a,1),"edge"===i){var s=n.get("v"+i+"s"),l=s.indexOf(t);l>-1&&s.splice(l,1)}var u=t.get("id");delete n.get("itemMap")[u];var c=n.get("comboTrees"),d=t.get("id");if("node"===i){var h=t.getModel().comboId;if(c&&h){var f=c,p=!1;c.forEach((function(t){p||fh(t,(function(t){if(t.id===d&&f){var e=f.indexOf(t);return f.splice(e,1),p=!0,!1}return f=t.children,!0}))}))}for(var g=(b=t.getEdges()).length-1;g>=0;g--)n.removeItem(b[g],!1);h&&n.updateCombo(h)}else if("combo"===i){var v,m=t.getModel().parentId,y=!1;(c||[]).forEach((function(t){y||fh(t,(function(t){return t.id!==d||(v=t,y=!0,!1)}))})),v.removed=!0,v&&v.children&&v.children.forEach((function(t){e.removeItem(t.id)}));var b;for(g=(b=t.getEdges()).length;g>=0;g--)n.removeItem(b[g],!1);m&&n.updateCombo(m)}t.destroy(),n.emit("afterremoveitem",{item:r})}},t.prototype.setItemState=function(t,e,n){var r=this.graph,i=e;zs(n)&&(i=e+":"+n),t.hasState(i)===n&&n||zs(n)&&t.hasState(i)||(r.emit("beforeitemstatechange",{item:t,state:i,enabled:n}),t.setState(e,n),r.autoPaint(),r.emit("afteritemstatechange",{item:t,state:i,enabled:n}))},t.prototype.priorityState=function(t,e){var n=this.graph,r=t;zs(t)&&(r=n.findById(t)),this.setItemState(r,e,!1),this.setItemState(r,e,!0)},t.prototype.clearItemStates=function(t,e){var n=this.graph;zs(t)&&(t=n.findById(t)),n.emit("beforeitemstatesclear",{item:t,states:e}),t.clearStates(e),n.emit("afteritemstatesclear",{item:t,states:e})},t.prototype.refreshItem=function(t){var e=this.graph;zs(t)&&(t=e.findById(t)),e.emit("beforeitemrefresh",{item:t}),t.refresh(),e.emit("afteritemrefresh",{item:t})},t.prototype.addCombos=function(t,e){var n=this,r=this.graph;(t||[]).forEach((function(t){ph(t,(function(t){var r;return e.forEach((function(e){e.id===t.id&&(e.children=t.children,e.depth=t.depth,r=e)})),r&&n.addItem("combo",r),!0}))}));var i=r.get("comboGroup");i&&i.sort()},t.prototype.changeItemVisibility=function(t,e){var n=this,r=this.graph;if(zs(t)&&(t=r.findById(t)),t){if(r.emit("beforeitemvisibilitychange",{item:t,visible:e}),t.changeVisibility(e),t.getType&&"node"===t.getType())bs(t.getEdges(),(function(t){(!e||t.get("source").isVisible()&&t.get("target").isVisible())&&n.changeItemVisibility(t,e)}));else if(t.getType&&"combo"===t.getType()){var i=r.get("comboTrees"),o=t.get("id"),a=[],s=!1;(i||[]).forEach((function(t){s||t.children&&0!==t.children.length&&fh(t,(function(t){return t.id!==o||(a=t.children,s=!0,!1)}))})),a&&(!e||e&&!t.getModel().collapsed)&&a.forEach((function(t){var i=r.findById(t.id);n.changeItemVisibility(i,e)})),bs(t.getEdges(),(function(t){(!e||t.get("source").isVisible()&&t.get("target").isVisible())&&n.changeItemVisibility(t,e)}))}return r.emit("afteritemvisibilitychange",{item:t,visible:e}),t}console.warn("The item to be shown or hidden does not exist!")},t.prototype.destroy=function(){this.graph=null,this.destroyed=!0},t}(),Zv=null,Qv=function(){function t(t){this.graph=t,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return t.checkCache=function(t,e,n){if(n[e]){var r=n[e].indexOf(t);r>=0&&n[e].splice(r,1)}},t.cacheState=function(t,e,n){n[e]||(n[e]=[]),n[e].push(t)},t.prototype.updateState=function(e,n,r){var i=this,o=t.checkCache,a=t.cacheState;if(!e.destroyed){var s=this.cachedStates,l=s.enabled,u=s.disabled;r?(o(e,n,u),a(e,n,l)):(o(e,n,l),a(e,n,u)),Zv&&clearTimeout(Zv),Zv=setTimeout((function(){Zv=null,i.updateGraphStates()}),16)}},t.prototype.updateStates=function(t,e,n){var r=this;zs(e)?this.updateState(t,e,n):e.forEach((function(e){r.updateState(t,e,n)}))},t.prototype.updateGraphStates=function(){var t=this.graph.get("states"),e=this.cachedStates;bs(e.disabled,(function(e,n){t[n]&&(t[n]=t[n].filter((function(t){return e.indexOf(t)<0&&!e.destroyed})))})),bs(e.enabled,(function(e,n){if(t[n]){var r={};t[n].forEach((function(t){t.destroyed||(r[t.get("id")]=!0)})),e.forEach((function(e){if(!e.destroyed){var i=e.get("id");r[i]||(r[i]=!0,t[n].push(e))}}))}else t[n]=e})),this.graph.emit("graphstatechange",{states:t}),this.cachedStates={enabled:{},disabled:{}}},t.prototype.destroy=function(){this.graph=null,this.cachedStates=null,Zv&&clearTimeout(Zv),Zv=null,this.destroyed=!0},t}(),Jv=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){if("\\"===t.charAt(0))return t.slice(1);var r=e[n];return 0===r&&(r="0"),r||""})):t},tm=function(t){var e=[];if(t.length<2)throw new Error("point length must largn than 2, now it's "+t.length);for(var n=0,r=t;n<r.length;n++){var i=r[n],o=i.x,a=i.y;e.push(o),e.push(a)}var s=iv(e);return s.unshift(["M",t[0].x,t[0].y]),s},em=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i={x:(1-n)*t.x+n*e.x,y:(1-n)*t.y+n*e.y},o=[0,0];cc(o,[e.x-t.x,e.y-t.y]),o&&(o[0]||o[1])||(o=[0,0]);var a=[-o[1]*r,o[0]*r];return i.x+=a[0],i.y+=a[1],i},nm=function(t){var e=[];return t.forEach((function(t){if("A"!==t[0])for(var n=1;n<t.length;n+=2)e.push([t[n],t[n+1]]);else{var r=t.length;e.push([t[r-2],t[r-1]])}})),e},rm=function(t){if(t.length<2)throw new Error("point length must largn than 2, now it's "+t.length);var e=t[0],n=t[1],r=t[t.length-1],i=t[t.length-2];t.unshift(r),t.unshift(i),t.push(e),t.push(n);for(var o=[],a=1;a<t.length-2;a+=1){var s=t[a-1].x,l=t[a-1].y,u=t[a].x,c=t[a].y,d=t[a+1].x,h=t[a+1].y,f=u+(d-s)/6,p=c+(h-l)/6,g=d-((a!==t.length-2?t[a+2].x:d)-u)/6,v=h-((a!==t.length-2?t[a+2].y:h)-c)/6;o.push(["C",f,p,g,v,d,h])}return o.unshift(["M",r.x,r.y]),o},im=function(t,e){return sc([0,0],cc([0,0],t),e)},om=function(t,e){var n=[t[1]-e[1],e[0]-t[0]],r=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(0===r)throw new Error("p0 should not be equal to p1");return[n[0]/r,n[1]/r]},am=function(t,e){return[e[0]-t[0],e[1]-t[1]]};function sm(t,e){var n,r,i;if(!t||t.length<1)return"";if(1===t.length)return r=[(n=t)[0][0],n[0][1]-e],i=[n[0][0],n[0][1]+e],"M "+r+" A "+e+","+e+",0,0,0,"+i+" A "+e+","+e+",0,0,0,"+r;if(2===t.length)return function(t){var n=sc([0,0],om(t[0],t[1]),e),r=sc([0,0],n,-1),i=rc([0,0],t[0],n),o=rc([0,0],t[1],n),a=rc([0,0],t[1],r),s=rc([0,0],t[0],r);return"M "+i+" L "+o+" A "+[e,e,"0,0,0",a].join(",")+" L "+s+" A "+[e,e,"0,0,0",i].join(",")}(t);for(var o=new Array(t.length),a=0;a<o.length;++a){var s=0===a?t[t.length-1]:t[a-1],l=t[a],u=sc([0,0],om(s,l),e);o[a]=[rc([0,0],s,u),rc([0,0],l,u)]}var c="A "+[e,e,"0,0,0,"].join(",");return(o=o.map((function(t,e){var n="";return 0===e&&(n="M "+o[o.length-1][1]+" "),n+=c+t[0]+" L "+t[1]}))).join(" ")}function lm(t,e){var n,r,i,o=t.length;if(!t||o<1)return"";if(1===o)return r=[(n=t)[0][0],n[0][1]-e],i=[n[0][0],n[0][1]+e],"M "+r+" A "+[e,e,"0,0,0",i].join(",")+" A "+[e,e,"0,0,0",r].join(",");if(2===o)return function(t){var n=am(t[0],t[1]),r=im(n,e),i=rc([0,0],t[0],sc([0,0],r,-1)),o=rc([0,0],t[1],r),a=1.2*e,s=im(cc([0,0],n),a),l=sc([0,0],s,-1),u=rc([0,0],i,l),c=rc([0,0],o,l),d=rc([0,0],i,s);return"M "+i+" C "+[u,c,o].join(",")+" S "+[d,i].join(",")+" Z"}(t);for(var a=t.map((function(e,n){var r=t[(n+1)%o];return{p:e,v:cc([0,0],am(e,r))}})),s=0;s<a.length;++s){var l=cc([0,0],rc([0,0],a[s>0?s-1:o-1].v,sc([0,0],a[s].v,-1)));a[s].p=rc([0,0],a[s].p,sc([0,0],l,e))}return a.map((function(t){var e=t.p;return{x:e[0],y:e[1]}}))}var um=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getSpline:tm,getControlPoint:em,pointsToPolygon:function(t,e){var n=t.length;if(!n)return"";for(var r="",i=0;i<n;i++){var o=t[i];r+=Jv(0===i?"M{x} {y}":"L{x} {y}",o)}return e&&(r+="Z"),r},pathToPoints:nm,getClosedSpline:rm,roundedHull:sm,paddedHull:lm}),cm=function(t,e,n){return(t.y-n.y)*(e.x-n.x)-(t.x-n.x)*(e.y-n.y)},dm=function(t){var e=t.map((function(t){return{x:t.getModel().x,y:t.getModel().y}}));if(e.sort((function(t,e){return t.x===e.x?t.y-e.y:t.x-e.x})),1===e.length)return e;for(var n=[],r=0;r<e.length;r++){for(;n.length>=2&&cm(n[n.length-2],n[n.length-1],e[r])<=0;)n.pop();n.push(e[r])}var i=[];for(r=e.length-1;r>=0;r--){for(;i.length>=2&&cm(i[i.length-2],i[i.length-1],e[r])<=0;)i.pop();i.push(e[r])}return i.pop(),n.pop(),n.concat(i)},hm={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function fm(t,e,n){var r=!1,i=function(t,n){return e.cells[t+n*e.width]},o=function(t,e){var r=0;return i(t-1,e-1)>=n&&(r+=1),i(t,e-1)>n&&(r+=2),i(t-1,e)>n&&(r+=4),i(t,e)>n&&(r+=8),r},a=function(n,r){for(var i,a,s=n,l=r,u=0;u<e.width*e.height;u++){if(i=s,a=l,t.findIndex((function(t){return t.x===s&&t.y===l}))>-1){if(t[0].x===s&&t[0].y===l)return!0}else t.push({x:s,y:l});var c=o(s,l);switch(c){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:s++;break;case 12:case 14:case 4:s--;break;case 6:0===i&&(-1===a?s-=1:s+=1);break;case 1:case 13:case 5:l--;break;case 9:1===i&&(0===a?l-=1:l+=1);break;case 10:case 8:case 11:l++;break;default:return console.warn("Marching squares invalid state: "+c),!0}}};this.march=function(){for(var t=0;t<e.width&&!r;t+=1)for(var s=0;s<e.height&&!r;s+=1)i(t,s)>n&&15!==o(t,s)&&(r=a(t,s));return r}}var pm=function(t,e){var n=Number.POSITIVE_INFINITY,r=null;return t.forEach((function(t){var i=$d(t,e);i>=0&&i<n&&(r=t,n=i)})),r};function gm(t,e,n,r,i){var o=function(t,e,n){var r=null,i=Number.POSITIVE_INFINITY;return e.forEach((function(e){var o={x:t.getModel().x,y:t.getModel().y},a={x:e.getModel().x,y:e.getModel().y},s=Wd(o,a),l=new zd(o.x,o.y,a.x,a.y),u=n.reduce((function(t,e){return $d(e,l)>0?t+1:t}),0);s*Math.pow(u+1,2)<i&&(r=e,i=s*Math.pow(u+1,2))})),r}(t,n,e);if(null===o)return[];return function(t){for(var n=[];t.length>0;){var r=t.pop();if(0===t.length){n.push(r);break}var i=t.pop(),o=new zd(r.x1,r.y1,i.x2,i.y2);pm(e,o)?(n.push(r),t.push(i)):t.push(o)}return n}(function(t,e,n,r){var i=[],o=[];o.push(t);for(var a=!0,s=0,l=function(t,e){var n=!1;return e.forEach((function(e){n||(Yd(t,{x:e.x1,y:e.y1})||Yd(t,{x:e.x2,y:e.y2}))&&(n=!0)})),n},u=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n].getBBox(),o=[[i.x,i.y],[i.x+i.width,i.y],[i.x,i.y+i.height],[i.x+i.width,i.y+i.height]];if(Bd(o,t.x,t.y))return!0}return!1};a&&s<n;){a=!1;for(var c=function(){var t=o.pop(),n=pm(e,t);if(n){var c=Ud(n,t),d=c[0];if(2===c[1]){var h=function(s){for(var c=r,h=ym(n,c,d,s),f=l(h,o)||l(h,i),p=u(h,e);!f&&p&&c>=1;)h=ym(n,c/=1.5,d,s),f=l(h,o)||l(h,i),p=u(h,e);!h||f||s&&p||(o.push(new zd(t.x1,t.y1,h.x,h.y)),o.push(new zd(h.x,h.y,t.x2,t.y2)),a=!0)};h(!0),a||h(!1)}}a||i.push(t),s+=1};!a&&o.length;)c()}for(;o.length;)i.push(o.pop());return i}(new zd(t.getModel().x,t.getModel().y,o.getModel().x,o.getModel().y),e,r,i))}var vm=function(t,e,n){var r=Object.assign(hm,n),i=Vd(t.map((function(t){return{x:t.getModel().x,y:t.getModel().y}})));t=t.sort((function(t,e){return Wd({x:t.getModel().x,y:t.getModel().y},i)-Wd({x:e.getModel().x,y:e.getModel().y},i)}));var o=[],a=[];t.forEach((function(t){gm(t,e,o,r.maxRoutingIterations,r.morphBuffer).forEach((function(t){a.push(t)})),o.push(t)}));for(var s,l,u,c,d,h=function(t,e,n){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},i=[];t.forEach((function(t){i.push(t.getBBox())})),e.forEach((function(t){i.push(t.getBBox())}));for(var o=0,a=i;o<a.length;o++){var s=a[o];r.minX=(s.minX<r.minX?s.minX:r.minX)-n,r.minY=(s.minY<r.minY?s.minY:r.minY)-n,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+n,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+n}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}(t,a,r.nodeR0),f=(s=h.width,l=h.height,u=r.pixelGroupSize,c=Math.ceil(s/u),d=Math.ceil(l/u),{cells:new Float32Array(Math.max(0,c*d)).fill(0),width:c,height:d}),p=[],g=[],v=0;v<r.maxMarchingIterations;v++)if(mm(t,e,a,h,f,r),g=[],new fm(p=[],f,r.threshold).march()){var m=p.map((function(t){return{x:Math.round(t.x*r.pixelGroupSize+h.minX),y:Math.round(t.y*r.pixelGroupSize+h.minY)}}));if(m){var y=m.length;if(r.skip>1)for(y=Math.floor(m.length/r.skip);y<3&&r.skip>1;)r.skip-=1,y=Math.floor(m.length/r.skip);for(var b=0,x=0;x<y;x+=1,b+=r.skip)g.push({x:m[b].x,y:m[b].y})}if(g&&function(){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=g.map((function(t){return[t.x,t.y]}));if(!Bd(i,r.getBBox().centerX,r.getBBox().centerY))return!1}return!0}())return g;if(r.threshold*=.9,v<=.5*r.maxMarchingIterations)r.memberInfluenceFactor*=1.2,r.edgeInfluenceFactor*=1.2;else{if(!(0!==r.nonMemberInfluenceFactor&&e.length>0))break;r.nonMemberInfluenceFactor*=.8}}return g};function mm(t,e,n,r,i,o){function a(t,e){var n=Math.floor((t-e)/o.pixelGroupSize);return n<0?0:n}function s(t,e){return t*o.pixelGroupSize+e}var l=(o.nodeR0-o.nodeR1)*(o.nodeR0-o.nodeR1),u=(o.edgeR0-o.edgeR1)*(o.edgeR0-o.edgeR1),c=function(t,e){return[Math.min(a(t.minX,e+r.minX),i.width),Math.min(a(t.minY,e+r.minY),i.height),Math.min(a(t.maxX,-e+r.minX),i.width),Math.min(a(t.maxY,-e+r.minY),i.height)]},d=function(t,e){for(var n=t.getBBox(),a=c(n,o.nodeR1),l=a[0],u=a[1],d=a[2],h=a[3],f=u;f<h;f+=1)for(var p=l;p<d;p+=1)if(!(e<0&&i[p+f*i.width]<=0)){var g=s(p,r.minX),v=s(f,r.minY),m=Xd({x:g,y:v},{x:n.minX,y:n.minY,width:n.width,height:n.height});if(m<Math.pow(o.nodeR1,2)){var y=Math.sqrt(m)-o.nodeR1;i.cells[p+f*i.width]+=e*y*y}}};o.nodeInfluenceFactor&&t.forEach((function(t){d(t,o.nodeInfluenceFactor/l)})),o.edgeInfluenceFactor&&n.forEach((function(t){!function(t,e){for(var n=t.getBBox(),a=c(n,o.edgeR1),l=a[0],u=a[1],d=a[2],h=a[3],f=u;f<h;f+=1)for(var p=l;p<d;p+=1)if(!(e<0&&i.cells[p+f*i.width]<=0)){var g=s(p,r.minX),v=s(f,r.minY),m=Hd({x:g,y:v},t);if(m<Math.pow(o.edgeR1,2)){var y=Math.sqrt(m)-o.edgeR1;i.cells[p+f*i.width]+=e*y*y}}}(t,o.edgeInfluenceFactor/u)})),o.negativeNodeInfluenceFactor&&e.forEach((function(t){d(t,o.negativeNodeInfluenceFactor/l)}))}function ym(t,e,n,r){var i=t.getBBox(),o=n[0],a=n[1],s=n[2],l=n[3],u={topLeft:{x:i.minX-e,y:i.minY-e},topRight:{x:i.maxX+e,y:i.minY-e},bottomLeft:{x:i.minX-e,y:i.maxY+e},bottomRight:{x:i.maxX+e,y:i.maxY+e}},c=i.height*i.width;function d(t,e){return i.width*(.5*(t.y-i.minY+(e.y-i.minY)))}if(a)return o?r?u.topLeft:u.bottomRight:s?r?u.bottomLeft:u.topRight:d(a,l)<.5*c?a.y>l.y?r?u.topLeft:u.bottomRight:r?u.topRight:u.bottomLeft:a.y<l.y?r?u.bottomLeft:u.topRight:r?u.bottomRight:u.topLeft;if(l){if(o)return r?u.topRight:u.bottomLeft;if(s)return r?u.bottomRight:u.topLeft}return d(o,s)<.5*c?o.x>s.x?r?u.topLeft:u.bottomRight:r?u.bottomLeft:u.topRight:o.x<s.x?r?u.topRight:u.bottomLeft:r?u.bottomRight:u.topLeft}var bm=function(){function t(t,e){this.cfg=Rl(this.getDefaultCfg(),e),this.graph=t,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map((function(e){return zs(e)?t.findById(e):e})),this.nonMembers=this.cfg.nonMembers.map((function(e){return zs(e)?t.findById(e):e})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return t.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},t.prototype.setPadding=function(){var t=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+t:10+t,this.cfg.bubbleCfg={nodeR0:this.padding-t,nodeR1:this.padding-t,morphBuffer:this.padding-t}},t.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),"round-convex"!==this.type&&"smooth-convex"!==this.type&&"bubble"!==this.type&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},t.prototype.calcPath=function(t,e){var n,r,i;switch(this.type){case"round-convex":r=lv(i=sm((n=dm(t)).map((function(t){return[t.x,t.y]})),this.padding));break;case"smooth-convex":2===(n=dm(t)).length?r=lv(i=sm(n.map((function(t){return[t.x,t.y]})),this.padding)):n.length>2&&(i=lm(n.map((function(t){return[t.x,t.y]})),this.padding),r=rm(i));break;case"bubble":r=(n=vm(t,e,this.cfg.bubbleCfg)).length>=2&&rm(n)}return r},t.prototype.render=function(){this.group.addShape("path",{attrs:Za({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},t.prototype.addMember=function(t){if(t){zs(t)&&(t=this.graph.findById(t)),this.members.push(t);var e=this.nonMembers.indexOf(t);return e>-1&&this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},t.prototype.addNonMember=function(t){if(t){zs(t)&&(t=this.graph.findById(t)),this.nonMembers.push(t);var e=this.members.indexOf(t);return e>-1&&this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},t.prototype.removeMember=function(t){if(t){zs(t)&&(t=this.graph.findById(t));var e=this.members.indexOf(t);return e>-1&&(this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0)}},t.prototype.removeNonMember=function(t){if(t){zs(t)&&(t=this.graph.findById(t));var e=this.nonMembers.indexOf(t);return e>-1&&(this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0)}},t.prototype.updateData=function(t,e){var n=this;this.group.findById(this.id).remove(),t&&(this.members=t.map((function(t){return zs(t)?n.graph.findById(t):t}))),e&&(this.nonMembers=e.map((function(t){return zs(t)?n.graph.findById(t):t}))),this.path=this.calcPath(this.members,this.nonMembers),this.render()},t.prototype.updateStyle=function(t){this.group.findById(this.id).attr(Za({},t))},t.prototype.updateCfg=function(t){var e=this;this.cfg=Rl(this.cfg,t),this.id=this.cfg.id,this.group=this.cfg.group,t.members&&(this.members=this.cfg.members.map((function(t){return zs(t)?e.graph.findById(t):t}))),t.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map((function(t){return zs(t)?e.graph.findById(t):t}))),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},t.prototype.contain=function(t){var e,n,r=this,i=(e=zs(t)?this.graph.findById(t):t).getKeyShape();if("path"===e.get("type"))n=nm(i.attr("path"));else{var o=i.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map((function(t){var e=r.graph.getPointByCanvas(t[0],t[1]);return[e.x,e.y]})),Nd(n,nm(this.path))},t.prototype.destroy=function(){this.group.remove(),this.cfg=null},t}(),xm=yc,wm=function(t){function e(e){var n=t.call(this)||this;return n.cfg=Rl(n.getDefaultCfg(),e),n.init(),n.animating=!1,n.destroyed=!1,n.cfg.enabledStack&&(n.undoStack=new bd(n.cfg.maxStep),n.redoStack=new bd(n.cfg.maxStep)),n}return Ka(e,t),e.prototype.init=function(){this.initCanvas();var t=new Ov(this),e=new Sh(this),n=new Kv(this),r=new Qv(this);this.set({viewController:t,modeController:e,itemController:n,stateController:r}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas"),e=(null==t?void 0:t.get("el")).id,n=t.addGroup({id:e+"-root",className:eh.rootContainerClassName});if(this.get("groupByTypes")){var r=n.addGroup({id:e+"-edge",className:eh.edgeContainerClassName}),i=n.addGroup({id:e+"-node",className:eh.nodeContainerClassName}),o=n.addGroup({id:e+"-combo",className:eh.comboContainerClassName});o.toBack(),this.set({nodeGroup:i,edgeGroup:r,comboGroup:o})}var a=n.addGroup({id:e+"-delegate",className:eh.delegateContainerClassName});this.set({delegateGroup:a}),this.set("group",n)},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},e.prototype.set=function(t,e){return Ss(t)?this.cfg=Za(Za({},this.cfg),t):this.cfg[t]=e,this},e.prototype.get=function(t){var e;return null===(e=this.cfg)||void 0===e?void 0:e[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,e){zs(t)&&(t=this.findById(t));var n=this.get("itemController");e||(e=t.get("states")),n.clearItemStates(t,e),this.get("stateController").updateStates(t,e,!1)},e.prototype.node=function(t){"function"==typeof t&&this.set("nodeMapper",t)},e.prototype.edge=function(t){"function"==typeof t&&this.set("edgeMapper",t)},e.prototype.combo=function(t){"function"==typeof t&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,e){var n;return bs(this.get(t+"s"),(function(t,r){if(e(t,r))return n=t})),n},e.prototype.findAll=function(t,e){var n=[];return bs(this.get(t+"s"),(function(t,r){e(t,r)&&n.push(t)})),n},e.prototype.findAllByState=function(t,e){return this.findAll(t,(function(t){return t.hasState(e)}))},e.prototype.translate=function(t,e){var n=this.get("group"),r=Pl(n.getMatrix());r||(r=[1,0,0,0,1,0,0,0,1]),r=xm(r,[["t",t,e]]),n.setMatrix(r),this.emit("viewportchange",{action:"translate",matrix:n.getMatrix()}),this.autoPaint()},e.prototype.moveTo=function(t,e,n,r){var i=this.get("group");Rd(i,{x:t,y:e},n,r||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:i.getMatrix()})},e.prototype.fitView=function(t){t&&this.set("fitViewPadding",t),this.get("viewController").fitView(),this.autoPaint()},e.prototype.fitCenter=function(){this.get("viewController").fitCenter(),this.autoPaint()},e.prototype.addBehaviors=function(t,e){return this.get("modeController").manipulateBehaviors(t,e,!0),this},e.prototype.removeBehaviors=function(t,e){return this.get("modeController").manipulateBehaviors(t,e,!1),this},e.prototype.updateBehavior=function(t,e,n){return this.get("modeController").updateBehavior(t,e,n),this},e.prototype.zoom=function(t,e){var n=this.get("group"),r=Pl(n.getMatrix()),i=this.get("minZoom"),o=this.get("maxZoom");return r||(r=[1,0,0,0,1,0,0,0,1]),r=xm(r,e?[["t",-e.x,-e.y],["s",t,t],["t",e.x,e.y]]:[["s",t,t]]),!(i&&r[0]<i||o&&r[0]>o)&&(n.setMatrix(r),this.emit("viewportchange",{action:"zoom",matrix:r}),this.autoPaint(),!0)},e.prototype.zoomTo=function(t,e){var n=t/this.getZoom();return this.zoom(n,e)},e.prototype.focusItem=function(t,e,n){var r=this.get("viewController"),i=!1;e?i=!0:void 0===e&&(i=this.get("animate"));var o={};n?o=n:void 0===n&&(o=this.get("animateCfg")),r.focus(t,i,o),this.autoPaint()},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,e){return this.get("viewController").getPointByClient(t,e)},e.prototype.getClientByPoint=function(t,e){return this.get("viewController").getClientByPoint(t,e)},e.prototype.getPointByCanvas=function(t,e){return this.get("viewController").getPointByCanvas(t,e)},e.prototype.getCanvasByPoint=function(t,e){return this.get("viewController").getCanvasByPoint(t,e)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,e){void 0===e&&(e=!0);var n=this.get("itemController").changeItemVisibility(t,!0);if(e&&this.get("enabledStack")){var r=n.getID(),i={},o={};switch(n.getType()){case"node":i.nodes=[{id:r,visible:!1}],o.nodes=[{id:r,visible:!0}];break;case"edge":i.nodes=[{id:r,visible:!1}],o.edges=[{id:r,visible:!0}];break;case"combo":i.nodes=[{id:r,visible:!1}],o.combos=[{id:r,visible:!0}]}this.pushStack("visible",{before:i,after:o})}},e.prototype.hideItem=function(t,e){void 0===e&&(e=!0);var n=this.get("itemController").changeItemVisibility(t,!1);if(e&&this.get("enabledStack")){var r=n.getID(),i={},o={};switch(n.getType()){case"node":i.nodes=[{id:r,visible:!0}],o.nodes=[{id:r,visible:!1}];break;case"edge":i.nodes=[{id:r,visible:!0}],o.edges=[{id:r,visible:!1}];break;case"combo":i.nodes=[{id:r,visible:!0}],o.combos=[{id:r,visible:!1}]}this.pushStack("visible",{before:i,after:o})}},e.prototype.refreshItem=function(t){this.get("itemController").refreshItem(t)},e.prototype.setAutoPaint=function(t){this.set("autoPaint",t),this.get("canvas").set("autoDraw",t)},e.prototype.remove=function(t,e){void 0===e&&(e=!0),this.removeItem(t,e)},e.prototype.removeItem=function(t,e){void 0===e&&(e=!0);var n=t;if(zs(t)&&(n=this.findById(t)),!n&&zs(t))console.warn("The item to be removed does not exist!");else if(n){var r="";if(n.getType&&(r=n.getType()),e&&this.get("enabledStack")){var i=Za(Za({},n.getModel()),{itemType:r}),o={};switch(r){case"node":o.nodes=[i],o.edges=[];for(var a=n.getEdges(),s=a.length-1;s>=0;s--)o.edges.push(Za(Za({},a[s].getModel()),{itemType:"edge"}));break;case"edge":o.edges=[i];break;case"combo":o.combos=[i]}this.pushStack("delete",{before:o,after:{}})}if("node"===r)n.getModel().comboId&&this.updateComboTree(n,void 0,!1);if(this.get("itemController").removeItem(n),"combo"===r){var l=yh(this.get("comboTrees"));this.set("comboTrees",l)}}},e.prototype.addItem=function(t,e,n,r){void 0===n&&(n=!0),void 0===r&&(r=!0);var i=this.get("comboSorted");this.set("comboSorted",i&&!r);var o=this.get("itemController");if(!function(t,e){if("node"===t||"combo"===t){if(e.id&&!zs(e.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c"+e.id+"%c is not a string.","font-size: 20px; color: red;",""),!1}else if(!("edge"!==t||e.source&&e.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0}(t,e))return!1;if(!e.id||!this.findById(e.id)){var a,s=this.get("comboTrees");if(s||(s=[]),"combo"===t){var l=this.get("itemMap"),u=!1;if(s.forEach((function(n){u||ph(n,(function(n){if(e.parentId===n.id){u=!0;var r=Za({id:e.id,depth:n.depth+2},e);n.children?n.children.push(r):n.children=[r],e.depth=r.depth,a=o.addItem(t,e)}var i=l[n.id];return u&&i&&i.getType&&"combo"===i.getType()&&o.updateCombo(i,n.children),!0}))})),!u){var c=Za({id:e.id,depth:0},e);e.depth=c.depth,s.push(c),a=o.addItem(t,e)}this.set("comboTrees",s)}else if("node"===t&&zs(e.comboId)&&s){var d;(d=this.findById(e.comboId))&&d.getType&&"combo"!==d.getType()&&console.warn("'"+e.comboId+"' is not a id of a combo in the graph, the node will be added without combo."),a=o.addItem(t,e);var h=this.get("itemMap"),f=!1,p=!1;(s||[]).forEach((function(t){p||f||ph(t,(function(t){if(t.id===e.id)return p=!0,!1;if(e.comboId===t.id&&!p){f=!0;var n=Pl(e);n.itemType="node",t.children?t.children.push(n):t.children=[n],n.depth=t.depth+1}return f&&h[t.id].getType&&"combo"===h[t.id].getType()&&o.updateCombo(h[t.id],t.children),!0}))}))}else a=o.addItem(t,e);if("node"===t&&e.comboId||"combo"===t&&e.parentId)(d=this.findById(e.comboId||e.parentId))&&d.getType&&"combo"===d.getType()&&d.addChild(a);var g=this.get("combos");if(g&&g.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var v=Za(Za({},a.getModel()),{itemType:t}),m={};switch(t){case"node":m.nodes=[v];break;case"edge":m.edges=[v];break;case"combo":m.combos=[v]}this.pushStack("add",{before:{},after:m})}return a}console.warn("This item exists already. Be sure the id %c"+e.id+"%c is unique.","font-size: 20px; color: red;","")},e.prototype.add=function(t,e,n,r){return void 0===n&&(n=!0),void 0===r&&(r=!0),this.addItem(t,e,n,r)},e.prototype.updateItem=function(t,e,n){var r=this;void 0===n&&(n=!0);var i,o=this.get("itemController");i=zs(t)?this.findById(t):t;var a=Pl(i.getModel()),s="";i.getType&&(s=i.getType());var l=os([],i.getStates());if("combo"===s&&bs(l,(function(t){return r.setItemState(i,t,!1)})),o.updateItem(i,e),"combo"===s&&bs(l,(function(t){return r.setItemState(i,t,!0)})),n&&this.get("enabledStack")){var u={nodes:[],edges:[],combos:[]},c={nodes:[],edges:[],combos:[]},d=Za({id:a.id},e);switch(s){case"node":u.nodes.push(a),c.nodes.push(d);break;case"edge":u.edges.push(a),c.edges.push(d);break;case"combo":u.combos.push(a),c.combos.push(d)}"node"===s&&u.nodes.push(a),this.pushStack("update",{before:u,after:c})}},e.prototype.update=function(t,e,n){void 0===n&&(n=!0),this.updateItem(t,e,n)},e.prototype.setItemState=function(t,e,n){zs(t)&&(t=this.findById(t)),this.get("itemController").setItemState(t,e,n);var r=this.get("stateController");zs(n)?r.updateState(t,e+":"+n,!0):r.updateState(t,e,n)},e.prototype.priorityState=function(t,e){this.get("itemController").priorityState(t,e)},e.prototype.data=function(t){Ch(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var e=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!e)throw new Error("data must be defined first");var n=e.nodes,r=void 0===n?[]:n,i=e.edges,o=void 0===i?[]:i,a=e.combos,s=void 0===a?[]:a;if(this.clear(!0),this.emit("beforerender"),bs(r,(function(e){t.add("node",e,!1,!1)})),s&&0!==s.length){var l=mh(s,r);this.set("comboTrees",l),t.addCombos(s)}bs(o,(function(e){t.add("edge",e,!1,!1)}));var u=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var c=t.get("layoutController");if(c){if(c.layout((function(){t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter();t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",u)})),this.destroyed)return}else t.get("fitView")&&t.fitView(),t.get("fitCenter")&&t.fitCenter(),t.emit("afterrender"),t.set("animate",u);this.get("groupByTypes")||(s&&0!==s.length?this.sortCombos():e.nodes&&e.edges&&e.nodes.length<e.edges.length?this.getNodes().forEach((function(t){t.toFront()})):this.getEdges().forEach((function(t){t.toBack()})));this.get("enabledStack")&&this.pushStack("render")},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,e,n){var r,i=this,o=this.get("itemMap");bs(n,(function(n){if(r=o[n.id]){if(i.get("animate")&&"node"===t){var a=r.getContainer().getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]),r.set("originAttrs",{x:a[6],y:a[7]})}i.updateItem(r,n,!1)}else r=i.addItem(t,n,!1);r&&e[t+"s"].push(r)}))},e.prototype.changeData=function(t,e){void 0===e&&(e=!0);var n=this;if(!Ch(t))return this;e&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.save(),after:t}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map((function(t){return n.clearItemStates(t)})),this.getEdges().map((function(t){return n.clearItemStates(t)}));var r=this.get("canvas"),i=r.get("localRefresh");r.set("localRefresh",!1),n.get("data")||(n.data(t),n.render());var o=this.get("itemMap"),a={nodes:[],edges:[]},s=t.combos;if(s){var l=mh(s,t.nodes);this.set("comboTrees",l)}else this.set("comboTrees",[]);this.diffItems("node",a,t.nodes),bs(o,(function(t,e){o[e].getModel().depth=0,t.getType&&"edge"===t.getType()||(t.getType&&"combo"===t.getType()?(delete o[e],t.destroy()):a.nodes.indexOf(t)<0&&(delete o[e],n.remove(t,!1)))}));for(var u=this.getCombos(),c=u.length-1;c>=0;c--)u[c].destroyed&&u.splice(c,1);s&&(n.addCombos(s),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",a,t.edges),bs(o,(function(t,e){(!t.getType||"node"!==t.getType()&&"combo"!==t.getType())&&a.edges.indexOf(t)<0&&(delete o[e],n.remove(t,!1))})),this.set({nodes:a.nodes,edges:a.edges});var d=this.get("layoutController");return d&&(d.changeData(),n.get("animate")&&!d.getLayoutType()?n.positionsAnimate():n.autoPaint()),setTimeout((function(){r.set("localRefresh",i)}),16),this},e.prototype.addCombos=function(t){var e=this.get("comboTrees");this.get("itemController").addCombos(e,t)},e.prototype.createCombo=function(t,e){var n=this;this.set("comboSorted",!1);var r,i="";if(t){if(zs(t))i=t,r={id:t};else{if(!(i=t.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");r=t}var o=e.map((function(t){var e=n.findById(t),r=e.getModel(),o="";e.getType&&(o=e.getType());var a={id:e.getID(),itemType:o};return"combo"===o?(a.parentId=i,r.parentId=i):"node"===o&&(a.comboId=i,r.comboId=i),a}));r.children=o,this.addItem("combo",r,!1),this.set("comboSorted",!1);var a=this.get("comboTrees");(a||[]).forEach((function(t){ph(t,(function(t){return t.id!==i||(t.itemType="combo",t.children=o,!1)}))})),a&&this.sortCombos()}},e.prototype.uncombo=function(t){var e=this,n=t;if(zs(t)&&(n=this.findById(t)),!n||n.getType&&"combo"!==n.getType())console.warn("The item is not a combo!");else{var r=n.getModel().parentId,i=this.get("comboTrees");i||(i=[]);var o,a=this.get("itemMap"),s=n.get("id"),l=[],u=this.get("combos"),c=this.findById(r);if(i.forEach((function(t){o||ph(t,(function(t){if(t.id===s){o=t,n.getEdges().forEach((function(t){e.removeItem(t,!1)}));var i=u.indexOf(n);u.splice(i,1),delete a[s],n.destroy()}return!r||!o||t.id!==r||(c.removeCombo(n),-1!==(i=(l=t.children).indexOf(o))&&l.splice(i,1),o.children.forEach((function(t){var n=e.findById(t.id),i=n.getModel();n.getType&&"combo"===n.getType()?(t.parentId=r,delete t.comboId,i.parentId=r,delete i.comboId):n.getType&&"node"===n.getType()&&(t.comboId=r,i.comboId=r),c.addChild(n),l.push(t)})),!1)}))})),!r&&o){var d=i.indexOf(o);i.splice(d,1),o.children.forEach((function(t){t.parentId=void 0;var n=e.findById(t.id).getModel();delete n.parentId,delete n.comboId,"node"!==t.itemType&&i.push(t)}))}}},e.prototype.updateCombos=function(){var t=this,e=this,n=this.get("comboTrees"),r=e.get("itemController"),i=e.get("itemMap");(n||[]).forEach((function(e){ph(e,(function(e){if(!e)return!0;var n=i[e.id];if(n&&n.getType&&"combo"===n.getType()){var o=os([],n.getStates());bs(o,(function(e){return t.setItemState(n,e,!1)})),r.updateCombo(n,e.children),bs(o,(function(e){return t.setItemState(n,e,!0)}))}return!0}))})),e.sortCombos()},e.prototype.updateCombo=function(t){var e,n=this,r=t;if(zs(t)&&(r=this.findById(t)),!r||r.getType&&"combo"!==r.getType())console.warn("The item to be updated is not a combo!");else{e=r.get("id");var i=this.get("comboTrees"),o=this.get("itemController"),a=this.get("itemMap");(i||[]).forEach((function(t){ph(t,(function(t){if(!t)return!0;var r=a[t.id];if(e===t.id&&r&&r.getType&&"combo"===r.getType()){var i=os([],r.getStates());bs(i,(function(t){r.getStateStyle(t)&&n.setItemState(r,t,!1)})),o.updateCombo(r,t.children),bs(i,(function(t){r.getStateStyle(t)&&n.setItemState(r,t,!0)})),e&&(e=t.parentId)}return!0}))}))}},e.prototype.updateComboTree=function(t,e,n){void 0===n&&(n=!0);var r;this.set("comboSorted",!1);var i,o=(r=zs(t)?this.findById(t):t).getModel(),a=o.comboId||o.parentId,s="";if(r.getType&&(s=r.getType()),e&&"combo"===s){var l,u=this.get("comboTrees"),c=!0;if((u||[]).forEach((function(t){l||fh(t,(function(t){if(!l)return t.id===r.getID()&&(l=t),!0}))})),fh(l,(function(t){return t.id!==e||(c=!1,!1)})),!c)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(n&&this.get("enabledStack")){var d={},h={};"combo"===s?(d.combos=[{id:o.id,parentId:o.parentId}],h.combos=[{id:o.id,parentId:e}]):"node"===s&&(d.nodes=[{id:o.id,parentId:o.comboId}],h.nodes=[{id:o.id,parentId:e}]),this.pushStack("updateComboTree",{before:d,after:h})}if(o.parentId||o.comboId){var f=this.findById(o.parentId||o.comboId);f&&f.removeChild(r)}("combo"===s?o.parentId=e:"node"===s&&(o.comboId=e),e)&&((i=this.findById(e))&&i.addChild(r));a&&((i=this.findById(a))&&i.removeChild(r));var p=yh(this.get("comboTrees"),o.id,e);this.set("comboTrees",p),this.updateCombos()},e.prototype.save=function(){var t=[],e=[],n=[];return bs(this.get("nodes"),(function(e){t.push(e.getModel())})),bs(this.get("edges"),(function(t){e.push(t.getModel())})),bs(this.get("combos"),(function(t){n.push(t.getModel())})),{nodes:t,edges:e,combos:n}},e.prototype.changeSize=function(t,e){return this.get("viewController").changeSize(t,e),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var e=t.get("nodes"),n=t.get("edges"),r=t.get("edges");bs(e,(function(t){t.refresh()})),bs(n,(function(t){t.refresh()})),bs(r,(function(t){t.refresh()}))}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if(zs(t)&&(t=this.findById(t)),t&&(!t.getType||"combo"===t.getType()))return t.getChildren();console.warn("The combo does not exist!")},e.prototype.positionsAnimate=function(){var t=this;t.emit("beforeanimate");var e=t.get("animateCfg"),n=e.onFrame,r=t.getNodes(),i=r.map((function(t){var e=t.getModel();return{id:e.id,x:e.x,y:e.y}}));t.isAnimating()&&t.stopAnimate(),t.get("canvas").animate((function(e){bs(i,(function(r){var i=t.findById(r.id);if(i&&!i.destroyed){var o=i.get("originAttrs"),a=i.get("model");if(!o){var s=i.getContainer().getMatrix();s||(s=[1,0,0,0,1,0,0,0,1]),o={x:s[6],y:s[7]},i.set("originAttrs",o)}if(n){var l=n(i,e,r,o);i.set("model",Object.assign(a,l))}else a.x=o.x+(r.x-o.x)*e,a.y=o.y+(r.y-o.y)*e}})),t.refreshPositions()}),{duration:e.duration,easing:e.easing,callback:function(){bs(r,(function(t){t.set("originAttrs",null)})),e.callback&&e.callback(),t.emit("afteranimate"),t.animating=!1}})},e.prototype.refreshPositions=function(){var t=this;t.emit("beforegraphrefreshposition");var e,n=t.get("nodes"),r=t.get("edges"),i=t.get("vedges"),o=t.get("combos"),a={};bs(n,(function(t){e=t.getModel();var n=t.get("originAttrs");if(!n||e.x!==n.x||e.y!==n.y){var r=t.updatePosition({x:e.x,y:e.y});a[e.id]=r,e.comboId&&(a[e.comboId]=a[e.comboId]||r)}})),o&&0!==o.length&&t.updateCombos(),bs(r,(function(t){var e=t.getSource().getModel(),n=t.getTarget();if(!Ss(n)){var r=n.getModel();(a[e.id]||a[r.id]||t.getModel().isComboEdge)&&t.refresh()}})),bs(i,(function(t){t.refresh()})),t.emit("aftergraphrefreshposition"),t.autoPaint()},e.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},e.prototype.setMode=function(t){return this.get("modeController").setMode(t),this},e.prototype.clear=function(t){var e;return void 0===t&&(t=!1),null===(e=this.get("canvas"))||void 0===e||e.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,e,n){var r=this,i=this.get("layoutController");if(zs(t)&&(t={type:t}),e){var o=n;o||(o="begin"===e?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),o=this.getPointByCanvas(o.x,o.y);var a=["force","gForce","fruchterman"];a.includes(t.type)||!t.type&&a.includes(null==i?void 0:i.layoutType)?t.center=[o.x,o.y]:this.once("afterlayout",(function(t){var n=r.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];o.x=o.x*n[0]+n[6],o.y=o.y*n[0]+n[7];var i=r.getGroup().getCanvasBBox(),a=i.minX,s=i.maxX,l=i.minY,u={x:(a+s)/2,y:(l+i.maxY)/2};"begin"===e&&(u.x=a,u.y=l),r.translate(o.x-u.x,o.y-u.y)}))}var s=this.get("layout"),l={};Object.assign(l,s,t),this.set("layout",l),i.isLayoutTypeSame(l)&&l.gpuEnabled===s.gpuEnabled?i.updateLayoutCfg(l):i.changeLayout(l)},e.prototype.destroyLayout=function(){this.get("layoutController").destroyLayout()},e.prototype.layout=function(){var t=this.get("layoutController"),e=this.get("layout");e&&t&&(e.workerEnabled?t.layout():t.layoutMethod?t.relayout(!0):t.layout())},e.prototype.collapseCombo=function(t){var e=this;if(zs(t)&&(t=this.findById(t)),t){this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var n=t.getModel();this.get("itemController").collapseCombo(t),n.collapsed=!0;var r=this.getEdges().concat(this.get("vedges")),i=[],o=[],a=this.get("comboTrees"),s=!1;(a||[]).forEach((function(t){s||fh(t,(function(t){if(s&&t.depth<=n.depth)return!1;if(n.id===t.id&&(s=!0),s){var r=e.findById(t.id);r&&r.getType&&"combo"===r.getType()&&(i=i.concat(r.getNodes()),o=o.concat(r.getCombos()))}return!0}))}));var l={},u=[];r.forEach((function(t){if(!t.isVisible()||t.getModel().isVEdge){var r=t.getSource(),a=t.getTarget();if((i.includes(r)||o.includes(r))&&!i.includes(a)&&!o.includes(a)||r.getModel().id===n.id){if((h=t.getModel()).isVEdge)return void e.removeItem(t,!1);for(var s=a.getModel();!a.isVisible();){if(!(a=e.findById(s.parentId||s.comboId))||!s.parentId&&!s.comboId)return;s=a.getModel()}var c=s.id;if(l[n.id+"-"+c])return void(l[n.id+"-"+c]+=h.size||1);var d=e.addItem("vedge",{source:n.id,target:c,isVEdge:!0},!1);l[n.id+"-"+c]=h.size||1,u.push(d)}else if(!i.includes(r)&&!o.includes(r)&&(i.includes(a)||o.includes(a))||a.getModel().id===n.id){var h;if((h=t.getModel()).isVEdge)return void e.removeItem(t,!1);for(var f=r.getModel();!r.isVisible();){if(!(r=e.findById(f.parentId||f.comboId))||!f.parentId&&!f.comboId)return;f=r.getModel()}var p=f.id;if(l[p+"-"+n.id])return void(l[p+"-"+n.id]+=h.size||1);d=e.addItem("vedge",{target:n.id,source:p,isVEdge:!0},!1);l[p+"-"+n.id]=h.size||1,u.push(d)}}})),u.forEach((function(t){var n=t.getModel();e.updateItem(t,{size:l[n.source+"-"+n.target]},!1)})),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}else console.warn("The combo to be collapsed does not exist!")},e.prototype.expandCombo=function(t){var e=this;if(zs(t)&&(t=this.findById(t)),!t||t.getType&&"combo"!==t.getType())console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var n=t.getModel();this.get("itemController").expandCombo(t),n.collapsed=!1;var r=this.getEdges().concat(this.get("vedges")),i=[],o=[],a=this.get("comboTrees"),s=!1;(a||[]).forEach((function(t){s||fh(t,(function(t){if(s&&t.depth<=n.depth)return!1;if(n.id===t.id&&(s=!0),s){var r=e.findById(t.id);r&&r.getType&&"combo"===r.getType()&&(i=i.concat(r.getNodes()),o=o.concat(r.getCombos()))}return!0}))}));var l={},u={};r.forEach((function(t){if(!t.isVisible()||t.getModel().isVEdge){var r=t.getSource(),a=t.getTarget(),s=r.get("id"),c=a.get("id");if((i.includes(r)||o.includes(r))&&!i.includes(a)&&!o.includes(a)||s===n.id){if(t.getModel().isVEdge)return void e.removeItem(t,!1);for(var d=a.getModel();!a.isVisible();){if(!(a=e.findById(d.comboId||d.parentId))||!d.parentId&&!d.comboId)return;d=a.getModel()}c=d.id;for(var h=r.getModel();!r.isVisible();){if(!(r=e.findById(h.comboId||h.parentId))||!h.parentId&&!h.comboId)return;if(h.comboId===n.id||h.parentId===n.id)break;h=r.getModel()}if(s=h.id,c){if(l[p=s+"-"+c])return l[p]+=t.getModel().size||1,void e.updateItem(u[p],{size:l[p]},!1);var f=e.addItem("vedge",{source:s,target:c,isVEdge:!0},!1);l[p]=t.getModel().size||1,u[p]=f}}else if(!i.includes(r)&&!o.includes(r)&&(i.includes(a)||o.includes(a))||c===n.id){if(t.getModel().isVEdge)return void e.removeItem(t,!1);for(h=r.getModel();!r.isVisible();){if(!(r=e.findById(h.comboId||h.parentId))||!h.parentId&&!h.comboId)return;h=r.getModel()}s=h.id;for(d=a.getModel();!a.isVisible();){if(!(a=e.findById(d.comboId||d.parentId))||!d.parentId&&!d.comboId)return;if(d.comboId===n.id||d.parentId===n.id)break;d=a.getModel()}if(c=d.id,s){var p;if(l[p=s+"-"+c])return l[p]+=t.getModel().size||1,void e.updateItem(u[p],{size:l[p]},!1);f=e.addItem("vedge",{target:c,source:s,isVEdge:!0},!1);l[p]=t.getModel().size||1,u[p]=f}}else(i.includes(r)||o.includes(r))&&(i.includes(a)||o.includes(a))&&r.isVisible()&&a.isVisible()&&t.show()}})),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})}},e.prototype.collapseExpandCombo=function(t){if(zs(t)&&(t=this.findById(t)),t&&(!t.getType||"combo"===t.getType())){for(var e=t.getModel(),n=this.findById(e.parentId);n;){var r=n.getModel();if(r.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(n=void 0);n=this.findById(r.parentId)}e.collapsed?this.expandCombo(t):this.collapseCombo(t),this.updateCombo(t)}},e.prototype.sortCombos=function(){var t=this;if(!this.get("comboSorted")){this.set("comboSorted",!0);var e=[],n={};(this.get("comboTrees")||[]).forEach((function(t){fh(t,(function(t){return e[t.depth]?e[t.depth].push(t.id):e[t.depth]=[t.id],n[t.id]=t.depth,!0}))})),(this.getEdges().concat(this.get("vedges"))||[]).forEach((function(t){var r=t.getModel(),i=n[r.source]||0,o=n[r.target]||0,a=Math.max(i,o);e[a]?e[a].push(r.id):e[a]=[r.id]})),e.forEach((function(e){if(e&&e.length)for(var n=e.length-1;n>=0;n--){var r=t.findById(e[n]);r&&r.toFront()}}))}},e.prototype.getNeighbors=function(t,e){var n=t;return zs(t)&&(n=this.findById(t)),n.getNeighbors(e)},e.prototype.getNodeDegree=function(t,e,n){void 0===e&&(e=void 0),void 0===n&&(n=!1);var r=t;zs(t)&&(r=this.findById(t));var i=this.get("degrees");i&&!n||(i=Ic(this.save()),this.set("degrees",i));var o=i[r.getID()],a=0;if(!o)return 0;switch(e){case"in":a=o.inDegree;break;case"out":a=o.outDegree;break;case"all":a=o;break;default:a=o.degree}return a},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},e.prototype.pushStack=function(t,e,n){if(void 0===t&&(t="update"),void 0===n&&(n="undo"),this.get("enabledStack")){var r=e?Pl(e):{before:{},after:Pl(this.save())};"redo"===n?this.redoStack.push({action:t,data:r}):this.undoStack.push({action:t,data:r}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn("请先启用 undo & redo 功能，在实例化 Graph 时候配置 enabledStack: true !")},e.prototype.getAdjMatrix=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.get("directed"));var n=this.get("adjMatrix");return n&&t||(n=xc(this.save(),e),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.get("directed"));var n=this.get("adjMatrix"),r=this.get("shortestPathMatrix");return n&&t||(n=xc(this.save(),e),this.set("adjMatrix",n)),r&&t||(r=Vc(this.save(),e),this.set("shortestPathMatrix",r)),r},e.prototype.on=function(e,n,r){return t.prototype.on.call(this,e,n,r)},e.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},e.prototype.createHull=function(t){if(t.members&&!(t.members.length<1)){var e=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),e&&!e.get("destroyed")||((e=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",e)),n[t.id])return console.warn("Existed hull id."),n[t.id];var r=e.addGroup({id:t.id+"-container"}),i=new bm(this,Za(Za({},t),{group:r}));return n[i.id]=i,i}console.warn("Create hull failed! The members is empty.")},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var e;e=zs(t)?this.getHullById(t):t,delete this.get("hullMap")[e.id],e.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();t&&Object.keys(t).length&&(Object.keys(t).forEach((function(e){t[e].destroy()})),this.set("hullMap",{}))},e}(ru);function Cm(t){return(Cm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Sm=yc,km=["startArrow","endArrow"],Em={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Mm={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:Em,combo:Em},Am={options:{},itemType:"",type:"",getCustomConfig:function(t){return{}},getOptions:function(t,e){return"move"===e||"bbox"===e?{}:Rl({labelCfg:{style:{fontFamily:"undefined"!=typeof window&&window.getComputedStyle&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:"undefined"!=typeof window&&window.getComputedStyle&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(t)||{},t)},draw:function(t,e){var n=this.drawShape(t,e);(n.set("className",this.itemType+"-shape"),t.label)&&this.drawLabel(t,e).set("className",this.itemType+"-label");return n},afterDraw:function(t,e,n){},drawShape:function(t,e){return null},drawLabel:function(t,e){var n=this.getOptions(t).labelCfg||{},r=this.getLabelStyle(t,n,e),i=r.rotate;delete r.rotate;var o=e.addShape("text",{attrs:r,draggable:!0,className:"text-shape",name:"text-shape"});if(i){var a=o.getBBox(),s=o.getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),r.rotateCenter)switch(r.rotateCenter){case"center":s=Sm(s,[["t",-a.width/2,-a.height/2],["r",i],["t",a.width/2,a.height/2]]);break;case"lefttop":s=Sm(s,[["t",-r.x,-r.y],["r",i],["t",r.x,r.y]]);break;case"leftcenter":s=Sm(s,[["t",-r.x,-r.y-a.height/2],["r",i],["t",r.x,r.y+a.height/2]]);break;default:s=Sm(s,[["t",-a.width/2,-a.height/2],["r",i],["t",a.width/2,a.height/2]])}else s=Sm(s,[["t",-r.x,-r.y-a.height/2],["r",i],["t",r.x,r.y+a.height/2]]);o.setMatrix(s)}if(r.background){var l=this.drawLabelBg(t,e,o),u=this.itemType+"-label-bg";l.set("classname",u),o.toFront()}return o},drawLabelBg:function(t,e,n){var r=Tl({},this.options.labelCfg,t.labelCfg),i=this.getLabelBgStyleByPosition(n,t,r,e);return e.addShape("rect",{name:"text-bg-shape",attrs:i})},getLabelStyleByPosition:function(t,e,n){return{text:t.label}},getLabelBgStyleByPosition:function(t,e,n,r){return{}},getLabelStyle:function(t,e,n){var r=this.getLabelStyleByPosition(t,e,n),i=this.itemType+"Label",o=eh[i]?eh[i].style:null;return Za(Za(Za({},o),r),e.style)},getShapeStyle:function(t){return t.style},update:function(t,e,n){this.updateShapeStyle(t,e,n),this.updateLabel(t,e,n)},updateShapeStyle:function(t,e,n){var r=e.getContainer(),i=e.getKeyShape(),o=Tl({},i.attr(),t.style),a=function(t){var e,n=o[t];if(Ss(n)){var a=r.find((function(e){return e.get("name")===t}));a&&a.attr(n)}else i.attr(((e={})[t]=n,e))};for(var s in o)a(s)},updateLabel:function(t,e,n){var r=e.getContainer(),i=this.getOptions({},n).labelCfg,o=this.itemType+"-label",a=r.find((function(t){return t.get("className")===o})),s=this.itemType+"-label-bg",l=r.find((function(t){return t.get("classname")===s}));if(t.label||""===t.label)if(a){var u={};e.getModel&&(u=e.getModel().labelCfg);var c=Rl({},i,u,t.labelCfg),d=this.getLabelStyleByPosition(t,c,r),h=t.labelCfg?t.labelCfg.style:void 0,f=c.style&&c.style.background,p=Za(Za(Za({},a.attr()),d),h),g=p.rotate;if(delete p.rotate,g){var v=[1,0,0,0,1,0,0,0,1];v=Sm(v,[["t",-p.x,-p.y],["r",g],["t",p.x,p.y]]),a.resetMatrix(),a.attr(Za(Za({},p),{matrix:v}))}else a.resetMatrix(),a.attr(p);if(l)if(p.background){var m=this.getLabelBgStyleByPosition(a,t,c,r),y=Za(Za({},m),f);if(l.resetMatrix(),g){var b=[1,0,0,0,1,0,0,0,1];b=Sm(b,[["t",-y.x,-y.y],["r",g],["t",y.x,y.y]]),y.matrix=b}l.attr(y)}else r.removeChild(l);else p.background&&((l=this.drawLabelBg(t,r,a)).set("classname",s),a.toFront())}else{this.drawLabel(t,r).set("className",o)}},afterUpdate:function(t,e){},setState:function(t,e,n){var r,i,o=n.get("keyShape");if(o&&!o.destroyed){var a=n.getType(),s=bl(e)?t:t+":"+e,l=this.getStateStyle(s,n),u=n.getStateStyle(s);if(u||l){var c=Tl({},u||l),d=n.getContainer(),h={x:1,y:1,cx:1,cy:1};if("combo"===a&&(h.r=1,h.width=1,h.height=1),e){var f=function(t){var e,n=c[t];if(Ss(n)&&!km.includes(t)){var r=d.find((function(e){return e.get("name")===t}));r&&r.attr(n)}else o.attr(((e={})[t]=n,e))};for(var p in c)f(p)}else{var g=xh(n.getCurrentStatesStyle()),v=Tl({},n.getModel().style,xh(n.getOriginStyle())),m=o.get("name"),y=o.attr(),b={};Object.keys(y).forEach((function(t){if("img"!==t){var e=y[t];e&&"object"===Cm(e)?b[t]=Pl(e):b[t]=e}}));var x={},w=function(t){var e=c[t];if(Ss(e)&&!km.includes(t)){var n=d.find((function(e){return e.get("name")===t}));if(n){var r=xh(n.attr());bs(e,(function(e,i){if(t===m&&b[i]&&!h[i]){delete b[i];var s=v[t][i]||Mm[a][i];o.attr(i,s)}else if(r[i]||0===r[i]){delete r[i];var l=v[t][i]||Mm[a][i];n.attr(i,l)}})),x[t]=r}}else if(b[t]&&!h[t]){delete b[t];var i=v[t]||(v[m]?v[m][t]:void 0)||Mm[a][t];o.attr(t,i)}};for(var C in c)w(C);for(var p in m?x[m]=b:Tl(x,b),g)if(!h[p]){var S=g[p];Ss(S)&&!km.includes(p)||(m?(Tl(v[m],((i={})[p]=S,i)),delete v[p]):Tl(v,((r={})[p]=S,r)),delete g[p])}var k={};Rl(k,v,x,g);var E=!1,M=function(t){var e,n,r=k[t];if(Ss(r)&&!km.includes(t)){var i=d.find((function(e){return e.get("name")===t}));i&&("text"===i.get("type")&&(delete r.x,delete r.y,delete r.matrix),t===m&&("combo"===a&&(delete r.r,delete r.width,delete r.height),E=!0),i.attr(r))}else if(!E){var s=r||Mm[a][t];"combo"===a?m||o.attr(((e={})[t]=s,e)):o.attr(((n={})[t]=s,n))}};for(var A in k)M(A)}}}},getStateStyle:function(t,e){var n=e.getModel(),r=e.getType(),i=this.getOptions(n),o=i.stateStyles,a=i.style,s=void 0===a?{}:a,l=n.stateStyles?n.stateStyles[t]:o&&o[t];return"combo"===r?Pl(l):Tl({},s,l)},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e,n;return(null==t?void 0:t.anchorPoints)||(null===(e=this.getCustomConfig(t))||void 0===e?void 0:e.anchorPoints)||(null===(n=this.options)||void 0===n?void 0:n.anchorPoints)}},_m={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:eh.nodeLabel.offset,getSize:function(t){var e=t.size||this.getOptions({}).size||eh.defaultNode.size;return ms(e)&&1===e.length&&(e=[e[0],e[0]]),ms(e)||(e=[e,e]),e},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition;if("center"===n)return{x:0,y:0,text:t.label};var r=e.offset;vs(r)&&(r=this.offset);var i,o=this.getSize(t),a=o[0],s=o[1];switch(n){case"top":i={x:0,y:0-s/2-r,textBaseline:"bottom"};break;case"bottom":i={x:0,y:s/2+r,textBaseline:"top"};break;case"left":i={x:0-a/2-r,y:0,textAlign:"right"};break;default:i={x:a/2+r,y:0,textAlign:"left"}}return i.text=t.label,i},getLabelBgStyleByPosition:function(t,e,n,r){if(!t)return{};var i=t.getBBox(),o=n.style&&n.style.background;if(!o)return{};var a,s=Tv(o.padding),l=i.width+s[1]+s[3],u=i.height+s[0]+s[2];return n.offset,a={x:i.minX-s[3],y:i.minY-s[0]},a=Za(Za(Za({},a),o),{width:l,height:u})},drawShape:function(t,e){var n=this.shapeType,r=this.getShapeStyle(t);return e.addShape(n,{attrs:r,draggable:!0,name:"node-shape"})},updateLinkPoints:function(t,e){var n,r=this.getOptions(t).linkPoints,i=e.find((function(t){return"link-point-left"===t.get("className")})),o=e.find((function(t){return"link-point-right"===t.get("className")})),a=e.find((function(t){return"link-point-top"===t.get("className")})),s=e.find((function(t){return"link-point-bottom"===t.get("className")}));i&&(n=i.attr()),o&&!n&&(n=o.attr()),a&&!n&&(n=a.attr()),s&&!n&&(n=s.attr()),n||(n=r);var l=Tl({},n,t.linkPoints),u=l.fill,c=l.stroke,d=l.lineWidth,h=l.size/2;h||(h=l.r);var f=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},p=f.left,g=f.right,v=f.top,m=f.bottom,y=this.getSize(t),b=y[0],x=y[1],w={r:h,fill:u,stroke:c,lineWidth:d};i?p||void 0===p?i.attr(Za(Za({},w),{x:-b/2,y:0})):i.remove():p&&e.addShape("circle",{attrs:Za(Za({},w),{x:-b/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),o?(g||void 0===g||o.remove(),o.attr(Za(Za({},w),{x:b/2,y:0}))):g&&e.addShape("circle",{attrs:Za(Za({},w),{x:b/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a?(v||void 0===v||a.remove(),a.attr(Za(Za({},w),{x:0,y:-x/2}))):v&&e.addShape("circle",{attrs:Za(Za({},w),{x:0,y:-x/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s?m||void 0===m?s.attr(Za(Za({},w),{x:0,y:x/2})):s.remove():m&&e.addShape("circle",{attrs:Za(Za({},w),{x:0,y:x/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(t,e,n,r){e.get("keyShape").attr(Za({},n)),this.updateLabel(t,e),r&&this.updateIcon(t,e)},updateIcon:function(t,e){var n=this,r=e.getContainer(),i=this.getOptions(t).icon,o=(t.icon?t.icon:{show:void 0}).show,a=r.find((function(t){return t.get("className")===n.type+"-icon"}));if(a)if(o||void 0===o){var s=Tl({},a.attr(),i),l=s.width,u=void 0===l?20:l,c=s.height,d=void 0===c?20:c;a.attr(Za(Za({},s),{x:-u/2,y:-d/2}))}else a.remove();else if(o){u=i.width,d=i.height;r.addShape("image",{attrs:Za(Za({},i),{x:-u/2,y:-d/2}),className:this.type+"-icon",name:this.type+"-icon"});var h=r.find((function(t){return"node-label"===t.get("className")}));h&&h.toFront()}}},Tm=Za(Za({},Am),_m);Vv.registerNode("single-node",Tm);var Pm={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:eh.defaultEdge.size,style:{x:0,y:0,stroke:eh.defaultEdge.style.stroke,lineAppendWidth:eh.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:eh.edgeLabel.style.fill,fontSize:eh.edgeLabel.style.fontSize}},stateStyles:Za({},eh.edgeStateStyles)},getPath:function(t){var e=[];return bs(t,(function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e},getShapeStyle:function(t){var e=Tl({},this.options.style,{stroke:t.color},t.style),n=t.size||eh.defaultEdge.size,r=(t=this.getPathPoints(t)).startPoint,i=t.endPoint,o=this.getControlPoints(t),a=[r];o&&(a=a.concat(o)),a.push(i);var s=this.getPath(a);return Tl({},eh.defaultEdge.style,{stroke:eh.defaultEdge.color,lineWidth:n,path:s},e)},updateShapeStyle:function(t,e,n){var r,i=e.getContainer(),o={stroke:t.color},a=(null===(r=e.getKeyShape)||void 0===r?void 0:r.call(e))||i.find((function(t){return"edge-shape"===t.get("className")})),s=t.size,l=(t=this.getPathPoints(t)).startPoint,u=t.endPoint,c=this.getControlPoints(t),d=[l];c&&(d=d.concat(c)),d.push(u);var h=a.attr(),f=Tl({},o,h,t.style),p=t.sourceNode,g=t.targetNode,v={radius:f.radius};c||(v={source:p,target:g,offset:f.offset,radius:f.radius});var m=this.getPath(d,v),y={};"move"===n?y={path:m}:(h.endArrow&&!1===f.endArrow&&(t.style.endArrow={path:""}),h.startArrow&&!1===f.startArrow&&(t.style.startArrow={path:""}),y=Tl(o,h,{lineWidth:s,path:m},t.style)),a&&a.attr(y)},getLabelStyleByPosition:function(t,e,n){var r,i=e.position||this.labelPosition,o={},a=n&&n.find((function(t){return"edge-shape"===t.get("className")}));r="start"===i?0:"end"===i?1:.5;var s,l=e.refX||this.refX,u=e.refY||this.refY;if(t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y)return o.x=t.startPoint.x+l,o.y=t.startPoint.y+u,o.text=t.label,o;s=vs(e.autoRotate)?this.labelAutoRotate:e.autoRotate;var c=ch(a,r,l,u,s);return o.x=c.x,o.y=c.y,o.rotate=c.rotate,o.textAlign=this._getTextAlign(i,c.angle),o.text=t.label,o},getLabelBgStyleByPosition:function(t,e,n,r){if(!t)return{};var i=t.getBBox(),o=n.style&&n.style.background;if(!o)return{};var a,s=o.padding,l=i.width+s[1]+s[3],u=i.height+s[0]+s[2],c=n.position||this.labelPosition,d=Za(Za({},o),{width:l,height:u,x:i.minX-s[2],y:i.minY-s[0],rotate:0});a=vs(n.autoRotate)?this.labelAutoRotate:n.autoRotate;var h,f=r&&r.find((function(t){return"edge-shape"===t.get("className")}));h="start"===c?0:"end"===c?1:.5;var p=n.refX||this.refX,g=n.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return d.x=e.startPoint.x+p-l/2,d.y=e.startPoint.y+g-u/2,d;var v=ch(f,h,p-l/2,g+u/2,a),m=v.angle;return m>.5*Math.PI&&m<1.5*Math.PI&&(v=ch(f,h,p+l/2,g+u/2,a)),a&&(d.x=v.x,d.y=v.y),d.rotate=v.rotate,d},_getTextAlign:function(t,e){var n="center";return e?(e%=2*Math.PI,"center"!==t&&(n=e>=0&&e<=Math.PI/2||e>=1.5*Math.PI&&e<2*Math.PI?t:function(t){var e=t;return"start"===t?e="end":"end"===t&&(e="start"),e}(t)),n):t},getControlPoints:function(t){return t.controlPoints},getPathPoints:function(t){return t},drawShape:function(t,e){var n=this.getShapeStyle(t);return e.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:n})},drawLabel:function(t,e){var n,r=this.options.labelCfg;n="undefined"!=typeof window&&void 0!==window.getComputedStyle&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";var i=Rl({fontFamily:n},r,t.labelCfg),o=this.getLabelStyle(t,i,e),a=o.rotate;delete o.rotate;var s=e.addShape("text",{attrs:o,name:"text-shape"});if(a&&s.rotateAtStart(a),o.background){var l=this.drawLabelBg(t,e,s),u=this.itemType+"-label-bg";l.set("classname",u),s.toFront()}return s},drawLabelBg:function(t,e,n){var r=this.options.labelCfg,i=Rl({},r,t.labelCfg),o=this.getLabelStyle(t,i,e).rotate,a=this.getLabelBgStyleByPosition(n,t,i,e);delete a.rotate;var s=e.addShape("rect",{name:"text-bg-shape",attrs:a});return o&&s.rotateAtStart(o),s}},Im=Za(Za({},Am),Pm);Vv.registerEdge("single-edge",Im),Vv.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Vv.registerEdge("spline",{getPath:function(t){return tm(t)}},"single-edge"),Vv.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(t){var e,n,r=t.startPoint,i=t.endPoint,o=(r.x+i.x)/2,a=(r.y+i.y)/2;if(void 0!==t.controlPoints){if(n=t.controlPoints[0],e=Id(r,n,i),r.x<=i.x&&r.y>i.y?this.clockwise=e.x>n.x?0:1:r.x<=i.x&&r.y<i.y?this.clockwise=e.x>n.x?1:0:r.x>i.x&&r.y<=i.y?this.clockwise=e.y<n.y?0:1:this.clockwise=e.y<n.y?1:0,(n.x-r.x)/(n.y-r.y)==(i.x-r.x)/(i.y-r.y))return[]}else{void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),ms(t.curveOffset)&&(t.curveOffset=t.curveOffset[0]),t.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:i.x-r.x,y:i.y-r.y},l=Math.atan2(s.y,s.x);n={x:t.curveOffset*Math.cos(-Math.PI/2+l)+o,y:t.curveOffset*Math.sin(-Math.PI/2+l)+a},e=Id(r,n,i)}var u=Dd(r,e);return[{x:u,y:u}]},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),2===t.length?e.push(["L",t[1].x,t[1].y]):e.push(["A",t[1].x,t[1].y,0,0,this.clockwise,t[2].x,t[2].y]),e}},"single-edge"),Vv.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(t){var e=t.controlPoints;if(!e||!e.length){var n=t.startPoint,r=t.endPoint;void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),ms(this.curveOffset)&&(t.curveOffset=t.curveOffset[0]),ms(this.curvePosition)&&(t.curvePosition=t.curveOffset[0]),e=[em(n,r,t.curvePosition,t.curveOffset)]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["Q",t[1].x,t[1].y,t[2].x,t[2].y]),e}},"single-edge"),Vv.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(t){var e=t.controlPoints;if(void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),el(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),el(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]),!e||!e.length||e.length<2){var n=t.startPoint,r=t.endPoint;e=[em(n,r,t.curvePosition[0],t.curveOffset[0]),em(n,r,t.curvePosition[1],t.curveOffset[1])]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]),e}},"single-edge"),Vv.registerEdge("cubic-vertical",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint;void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.minCurveOffset&&(t.minCurveOffset=this.minCurveOffset),el(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),el(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),el(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var r=n.y-e.y,i=[0,0];return t.curveOffset?i=t.curveOffset:Math.abs(r)<Math.abs(t.minCurveOffset[0])&&(i=t.minCurveOffset),[{x:e.x,y:e.y+r*this.curvePosition[0]+i[0]},{x:n.x,y:n.y-r*this.curvePosition[1]+i[1]}]}},"cubic"),Vv.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint;void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.minCurveOffset&&(t.minCurveOffset=this.minCurveOffset),el(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),el(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),el(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var r=n.x-e.x,i=[0,0];return t.curveOffset?i=t.curveOffset:Math.abs(r)<Math.abs(t.minCurveOffset[0])&&(i=t.minCurveOffset),[{x:e.x+r*this.curvePosition[0]+i[0],y:e.y},{x:n.x-r*this.curvePosition[1]+i[1],y:n.y}]}},"cubic"),Vv.registerEdge("loop",{getPathPoints:function(t){return uh(t)},getControlPoints:function(t){return t.controlPoints},afterDraw:function(t){t.controlPoints=void 0},afterUpdate:function(t){t.controlPoints=void 0}},"cubic");var Dm={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:eh.comboLabel.refX,refY:eh.comboLabel.refY,options:{style:{stroke:eh.defaultCombo.style.stroke,fill:eh.defaultCombo.style.fill,lineWidth:eh.defaultCombo.style.lineWidth},labelCfg:{style:{fill:eh.comboLabel.style.fill,fontSize:eh.comboLabel.style.fontSize}},stateStyles:Za({},eh.comboStateStyles)},getSize:function(t){var e=Pl(t.size||this.options.size||eh.defaultCombo.size);return ms(e)&&1===e.length&&(e=[e[0],e[0]]),ms(e)||(e=[e,e]),e},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition,r=t.style,i=t.padding||this.options.padding;ms(i)&&(i=i[0]);var o=e.refX,a=e.refY;vs(o)&&(o=this.refX),vs(a)&&(a=this.refY);var s,l=this.getSize(t),u=(Math.max(r.r,l[0]/2)||l[0]/2)+i;switch(n){case"top":s={x:0,y:-u-a,textBaseline:"bottom",textAlign:"center"};break;case"bottom":s={x:0,y:u+a,textBaseline:"bottom",textAlign:"center"};break;case"left":s={x:-u+o,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:t.label,textAlign:"center"};break;default:s={x:u+o,y:0,textAlign:"right"}}return s.text=t.label,s},drawShape:function(t,e){var n=this.shapeType,r=this.getShapeStyle(t);return e.addShape(n,{attrs:r,draggable:!0,name:"combo-shape"})},updateShape:function(t,e,n){var r=e.get("keyShape");(void 0===t.animate?this.options.animate:t.animate)&&r.animate?r.animate(n,{duration:200,easing:"easeLinear"}):r.attr(Za({},n)),this.updateLabel(t,e)}},Om=Za(Za({},Am),Dm);Vv.registerCombo("single-combo",Om),Vv.registerCombo("circle",{options:{size:[eh.defaultCombo.size[0],eh.defaultCombo.size[0]],padding:eh.defaultCombo.padding[0],animate:!0,style:{stroke:eh.defaultCombo.style.stroke,fill:eh.defaultCombo.style.fill,lineWidth:eh.defaultCombo.style.lineWidth},labelCfg:{style:{fill:eh.comboLabel.style.fill,fontSize:eh.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:Za({},eh.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(t,e){var n=this.getShapeStyle(t);return delete n.height,delete n.width,e.addShape("circle",{attrs:n,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(t){var e=this.options.style,n=t.padding||this.options.padding;ms(n)&&(n=n[0]);var r,i=Tl({},e,{stroke:t.color},t.style);if(t.fixSize)r=el(t.fixSize)?t.fixSize:t.fixSize[0];else{var o=this.getSize(t);r=!el(i.r)||isNaN(i.r)?o[0]/2||eh.defaultCombo.style.r:Math.max(i.r,o[0]/2)||o[0]/2}i.r=r+n;var a=Za({x:0,y:0},i);return t.style?t.style.r=r:t.style={r:r},a},update:function(t,e){var n=this.getSize(t),r=t.padding||this.options.padding;ms(r)&&(r=r[0]);var i,o=Pl(t.style);i=t.fixSize?el(t.fixSize)?t.fixSize:t.fixSize[0]:Math.max(o.r,n[0]/2)||n[0]/2,o.r=i+r;var a=e.get("sizeCache");a&&(a.r=o.r);var s={stroke:t.color},l=Tl({},e.get("keyShape").attr(),s,o);t.style?t.style.r=i:t.style={r:i},this.updateShape(t,e,l,!0)}},"single-combo"),Vv.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:eh.defaultCombo.style.stroke,fill:eh.defaultCombo.style.fill,lineWidth:eh.defaultCombo.style.lineWidth},labelCfg:{style:{fill:eh.comboLabel.style.fill,fontSize:eh.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Za({},eh.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(t,e){var n=this.getShapeStyle(t);return e.addShape("rect",{attrs:n,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition,r=t.style,i=t.padding||this.options.padding;el(i)&&(i=[i,i,i,i]);var o=e.refX,a=e.refY;vs(o)&&(o=this.refX),vs(a)&&(a=this.refY);var s,l=r.width/2+i[3],u=r.height/2+i[0];switch(n){case"top":s={x:0-l+o,y:0-u+a,textBaseline:"top",textAlign:"left"};break;case"bottom":s={x:0,y:u+a,textBaseline:"bottom",textAlign:"center"};break;case"left":s={x:0-l+a,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:t.label,textAlign:"center"};break;default:s={x:l+o,y:0,textAlign:"right"}}return s.text=t.label,s},getShapeStyle:function(t){var e=this.options.style,n=t.padding||this.options.padding;el(n)&&(n=[n,n,n,n]);var r,i,o=Tl({},e,{stroke:t.color},t.style),a=this.getSize(t),s=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;s?el(s)?(r=s,i=s):(r=s[0],i=s[1]):(r=!el(o.width)||isNaN(o.width)?a[0]||eh.defaultCombo.style.width:Math.max(o.width,a[0])||a[0],i=!el(o.height)||isNaN(o.height)?a[1]||eh.defaultCombo.style.height:Math.max(o.height,a[1])||a[1]);var l=-r/2-n[3],u=-i/2-n[0];o.width=r+n[1]+n[3],o.height=i+n[0]+n[2];var c=Za({x:l,y:u},o);return t.style?(t.style.width=r,t.style.height=i):t.style={width:r,height:i},c},update:function(t,e){var n=this.getSize(t),r=t.padding||this.options.padding;el(r)&&(r=[r,r,r,r]);var i,o,a=Pl(t.style),s=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;s?el(s)?(i=s,o=s):(i=s[0],o=s[1]):(i=Math.max(a.width,n[0])||n[0],o=Math.max(a.height,n[1])||n[1]),a.width=i+r[1]+r[3],a.height=o+r[0]+r[2];var l=e.get("sizeCache");l&&(l.width=a.width,l.height=a.height),a.x=-i/2-r[3],a.y=-o/2-r[0];var u={stroke:t.color},c=Tl({},e.get("keyShape").attr(),u,a);t.style?(t.style.width=i,t.style.height=o):t.style={width:i,height:o},this.updateShape(t,e,c,!1)},updateShape:function(t,e,n){var r=e.get("keyShape");(void 0===t.animate?this.options.animate:t.animate)&&r.animate?r.animate(n,{duration:200,easing:"easeLinear"}):r.attr(Za({},n)),this.updateLabel(t,e)}},"single-combo"),Vv.registerNode("simple-circle",{options:{size:eh.defaultNode.size,style:{x:0,y:0,stroke:eh.defaultNode.style.stroke,fill:eh.defaultNode.style.fill,lineWidth:eh.defaultNode.style.lineWidth},labelCfg:{style:{fill:eh.nodeLabel.style.fill,fontSize:eh.nodeLabel.style.fontSize}},stateStyles:Za({},eh.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t);return e.addShape("circle",{attrs:n,className:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},r=Rl({},e,n),i=this.getSize(t)[0]/2;return Za({x:0,y:0,r:i},r)},update:function(t,e){var n=this.getSize(t),r={stroke:t.color,r:n[0]/2},i=e.get("keyShape"),o=Rl({},i.attr(),r,t.style);this.updateShape(t,e,o,!0)}},"single-node"),Vv.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:eh.defaultNode.style.stroke,fill:eh.defaultNode.style.fill,lineWidth:eh.defaultNode.style.lineWidth},labelCfg:{style:{fill:eh.nodeLabel.style.fill,fontSize:eh.nodeLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Za({},eh.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t);return e.addShape("rect",{attrs:n,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(t){var e=Tl({},this.getOptions(t).style,{stroke:t.color}),n=this.getSize(t),r=e.width||n[0],i=e.height||n[1];return Za({x:-r/2,y:-i/2,width:r,height:i},e)},update:function(t,e){e.getContainer();var n=this.getOptions({}).style,r=this.getSize(t),i=e.get("keyShape");t.size||(r[0]=i.attr("width")||n.width,r[1]=i.attr("height")||n.height);var o={stroke:t.color,x:-r[0]/2,y:-r[1]/2,width:r[0],height:r[1]},a=Tl({},n,i.attr(),o);a=Tl(a,t.style),this.updateShape(t,e,a,!1)}},"single-node"),Vv.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(t,e){var n=this.shapeType,r=this.getShapeStyle(t);delete r.fill;var i=e.addShape(n,{attrs:r,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(t,i),i},drawClip:function(t,e){var n=this.getOptions(t).clipCfg;if(n.show){var r=n.type,i=n.x,o=n.y,a=n.style;if("circle"===r){var s=n.r;e.setClip({type:"circle",attrs:Za({r:s,x:i,y:o},a)})}else if("rect"===r){var l=n.width,u=n.height,c=i-l/2,d=o-u/2;e.setClip({type:"rect",attrs:Za({x:c,y:d,width:l,height:u},a)})}else if("ellipse"===r){var h=n.rx,f=n.ry;e.setClip({type:"ellipse",attrs:Za({x:i,y:o,rx:h,ry:f},a)})}else if("polygon"===r){var p=n.points;e.setClip({type:"polygon",attrs:Za({points:p},a)})}else if("path"===r){var g=n.path;e.setClip({type:"path",attrs:Za({path:g},a)})}}},getShapeStyle:function(t){var e=this.getOptions(t).style,n=this.getSize(t),r=this.getOptions(t).img,i=n[0],o=n[1];return e&&(i=e.width||n[0],o=e.height||n[1]),Za({x:-i/2,y:-o/2,width:i,height:o,img:r},e)},updateShapeStyle:function(t,e){var n=e.getContainer(),r=this.itemType+"-shape",i=n.find((function(t){return t.get("className")===r}))||e.getKeyShape(),o=this.getShapeStyle(t);i&&i.attr(o)}},"single-node");var Rm,Lm,Bm={collapse:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",t-n+4,e],["L",t+n-4,e]]},expand:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",t-n+4,e],["L",t-n+2*n-4,e],["M",t-n+n,e-n+4],["L",t,e+n-4]]},upTriangle:function(t,e,n){var r=n*Math.cos(Math.PI/6),i=n*Math.sin(Math.PI/6);return[["M",t-r,e+i],["L",t+r,e+i],["L",t,e-n],["Z"]]},downTriangle:function(t,e,n){var r=n*Math.cos(Math.PI/6),i=n*Math.sin(Math.PI/6);return[["M",t-r,e-i],["L",t+r,e-i],["L",t,e+n],["Z"]]}},Fm=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",defaultSubjectColors:["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"]}),Nm=yc,zm=Za(Za(Za(Za(Za(Za({},Dv),wh),um),qd),Fm),{transform:Nm,mat3:vu}),jm=function(){function t(t){this.graph=t,this.layoutCfg=t.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return t.prototype.initLayout=function(){},t.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},t.prototype.getLayoutCfgType=function(t){var e=t.type;if(e)return e;var n=t.pipes;return Array.isArray(n)?n.map((function(t){return(null==t?void 0:t.type)||""})):null},t.prototype.isLayoutTypeSame=function(t){var e=this.getLayoutCfgType(t);return Array.isArray(this.layoutType)?this.layoutType.every((function(t,n){return t===e[n]})):(null==t?void 0:t.type)===this.layoutType},t.prototype.refreshLayout=function(){var t=this.graph;t&&(t.get("animate")?t.positionsAnimate():t.refreshPositions())},t.prototype.changeLayout=function(t){this.layoutCfg=t,this.destoryLayoutMethods(),this.layout()},t.prototype.changeData=function(){this.destoryLayoutMethods(),this.layout()},t.prototype.destoryLayoutMethods=function(){var t=this.layoutMethods;null==t||t.forEach((function(t){t.destroy()})),this.layoutMethods=[]},t.prototype.destroyLayout=function(){var t=this.graph;this.destoryLayoutMethods(),t.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},t.prototype.setDataFromGraph=function(){for(var t=[],e=[],n=[],r=[],i=[],o=[],a=this.graph.getNodes(),s=this.graph.getEdges(),l=this.graph.getCombos(),u=a.length,c=0;c<u;c++){var d=a[c];if(d&&!d.destroyed){var h=d.getModel();d.isVisible()?t.push(h):e.push(h)}}var f=s.length;for(c=0;c<f;c++){var p=s[c];if(p&&!p.destroyed){h=p.getModel();p.isVisible()?h.isComboEdge?i.push(h):n.push(h):r.push(h)}}var g=l.length;for(c=0;c<g;c++){var v=l[c];if(!v.destroyed){h=v.getModel();v.isVisible()?o.push(h):r.push(h)}}return{nodes:t,hiddenNodes:e,edges:n,hiddenEdges:r,combos:o,hiddenCombos:[],comboEdges:i}},t.prototype.reLayoutMethod=function(t,e){var n=this;return new Promise((function(r,i){var o=n.graph,a=null==e?void 0:e.type;e.onLayoutEnd=function(){o.emit("aftersublayout",{type:a}),r()},t.init(n.data),"force"===a&&(t.ticking=!1,t.forceSimulation.stop()),o.emit("beforesublayout",{type:a}),t.execute(),t.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd()}))},t.prototype.relayout=function(t){var e=this,n=this,r=n.graph,i=n.layoutMethods,o=n.layoutCfg;if(t){this.data=this.setDataFromGraph();var a=this.data.nodes;if(!a)return!1;this.initPositions(o.center,a)}r.emit("beforelayout");var s=Promise.resolve();null==i||i.forEach((function(t,n){var r=o[n];s=s.then((function(){return e.reLayoutMethod(t,r)}))})),s.then((function(){o.onAllLayoutEnd&&o.onAllLayoutEnd()})).catch((function(t){console.warn("relayout failed",t)}))},t.prototype.filterLayoutData=function(t,e){var n,r,i=t.nodes,o=t.edges,a=Qa(t,["nodes","edges"]);if(!i)return t;if(n=gs(null==e?void 0:e.nodesFilter)?e.nodesFilter:function(){return!0},gs(null==e?void 0:e.edgesFilter))r=e.edgesFilter;else{var s=i.reduce((function(t,e){return t[e.id]=!0,t}),{});r=function(t){return s[t.source]&&s[t.target]}}return Za({nodes:i.filter(n),edges:o.filter(r)},a)},t.prototype.getLayoutBBox=function(t){var e=Xs(this.graph.getNodes(),(function(t){return t.getModel().layoutOrder})),n=Object.values(e).map((function(t){var e=Iv(t);return e.size=[e.width,e.height],e}));return{groupNodes:Object.values(Xs(t,"layoutOrder")),layoutNodes:n}},t.prototype.layoutAnimate=function(){},t.prototype.moveToZero=function(){var t=this.graph.get("data").nodes;if(void 0!==t[0].x&&null!==t[0].x&&!Pv(t[0].x)){for(var e=[0,0],n=t.length,r=0;r<n;r++){var i=t[r];e[0]+=i.x,e[1]+=i.y}e[0]/=t.length,e[1]/=t.length;for(r=0;r<n;r++){(i=t[r]).x-=e[0],i.y-=e[1]}}},t.prototype.initPositions=function(t,e){var n=this.graph;if(!e)return!1;var r=e?e.length:0;if(r){var i=.85*n.get("width"),o=.85*n.get("height"),a=Math.ceil(Math.sqrt(r)*(i/o)),s=i/(a-1),l=o/(Math.ceil(r/a)-1);isFinite(s)&&s||(s=0),isFinite(l)&&s||(l=0);for(var u=t[0]-i/2,c=t[1]-o/2,d=!0,h=0;h<r;h++){var f=e[h];Pv(+f.x)&&(d=!1,f.x=h%a*s+u),Pv(+f.y)&&(d=!1,f.y=Math.floor(h/a)*l+c)}return d}},t.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},t}(),Gm=function(t){this.graph=t,this.destroyed=!1,this.initEvents()};(Lm=Rm||(Rm={})).CLICK="click",Lm.DBLCLICK="dblclick",Lm.MOUSEDOWN="mousedown",Lm.MOUDEUP="mouseup",Lm.CONTEXTMENU="contextmenu",Lm.MOUSEENTER="mouseenter",Lm.MOUSEOUT="mouseout",Lm.MOUSEOVER="mouseover",Lm.MOUSEMOVE="mousemove",Lm.MOUSELEAVE="mouseleave",Lm.DRAGSTART="dragstart",Lm.DRAGEND="dragend",Lm.DRAG="drag",Lm.DRAGENTER="dragenter",Lm.DRAGLEAVE="dragleave",Lm.DRAGOVER="dragover",Lm.DRAGOUT="dragout",Lm.DDROP="drop",Lm.KEYUP="keyup",Lm.KEYDOWN="keydown",Lm.WHEEL="wheel",Lm.FOCUS="focus",Lm.BLUR="blur",Lm.TOUCHSTART="touchstart",Lm.TOUCHMOVE="touchmove",Lm.TOUCHEND="touchend",Lm.CANVAS_TOUCHSTART="canvas:touchstart",Lm.CANVAS_TOUCHMOVE="canvas:touchmove",Lm.CANVAS_TOUCHEND="canvas:touchend",Lm.NODE_TOUCHSTART="node:touchstart",Lm.NODE_TOUCHMOVE="node:touchmove",Lm.NODE_TOUCHEND="node:touchend",Lm.COMBO_TOUCHSTART="combo:touchstart",Lm.COMBO_TOUCHMOVE="combo:touchmove",Lm.COMBO_TOUCHEND="combo:touchend",Lm.EDGE_TOUCHSTART="edge:touchstart",Lm.EDGE_TOUCHMOVE="edge:touchmove",Lm.EDGE_TOUCHEND="edge:touchend",Lm.NODE_CONTEXTMENU="node:contextmenu",Lm.NODE_CLICK="node:click",Lm.NODE_DBLCLICK="node:dblclick",Lm.NODE_MOUSEDOWN="node:mousedown",Lm.NODE_MOUSEUP="node:mouseup",Lm.NODE_MOUSEENTER="node:mouseenter",Lm.NODE_MOUSELEAVE="node:mouseleave",Lm.NODE_MOUSEMOVE="node:mousemove",Lm.NODE_MOUSEOUT="node:mouseout",Lm.NODE_MOUSEOVER="node:mouseover",Lm.NODE_DROP="node:drop",Lm.NODE_DRAGOVER="node:dragover",Lm.NODE_DRAGENTER="node:dragenter",Lm.NODE_DRAGLEAVE="node:dragleave",Lm.NODE_DRAGSTART="node:dragstart",Lm.NODE_DRAG="node:drag",Lm.NODE_DRAGEND="node:dragend",Lm.NODE_TAP="node:tap",Lm.NODE_PANSTART="node:panstart",Lm.NODE_PANMOVE="node:panmove",Lm.NODE_PANEND="node:panend",Lm.COMBO_CONTEXTMENU="combo:contextmenu",Lm.COMBO_CLICK="combo:click",Lm.COMBO_DBLCLICK="combo:dblclick",Lm.COMBO_MOUSEDOWN="combo:mousedown",Lm.COMBO_MOUSEUP="combo:mouseup",Lm.COMBO_MOUSEENTER="combo:mouseenter",Lm.COMBO_MOUSELEAVE="combo:mouseleave",Lm.COMBO_MOUSEMOVE="combo:mousemove",Lm.COMBO_MOUSEOUT="combo:mouseout",Lm.COMBO_MOUSEOVER="combo:mouseover",Lm.COMBO_DROP="combo:drop",Lm.COMBO_DRAGOVER="combo:dragover",Lm.COMBO_DRAGENTER="combo:dragenter",Lm.COMBO_DRAGLEAVE="combo:dragleave",Lm.COMBO_DRAGSTART="combo:dragstart",Lm.COMBO_DRAG="combo:drag",Lm.COMBO_DRAGEND="combo:dragend",Lm.COMBO_TAP="combo:tap",Lm.COMBO_PANSTART="combo:panstart",Lm.COMBO_PANMOVE="combo:panmove",Lm.COMBO_PANEND="combo:panend",Lm.EDGE_CONTEXTMENU="edge:contextmenu",Lm.EDGE_CLICK="edge:click",Lm.EDGE_DBLCLICK="edge:dblclick",Lm.EDGE_MOUSEDOWN="edge:mousedown",Lm.EDGE_MOUSEUP="edge:mouseup",Lm.EDGE_MOUSEENTER="edge:mouseenter",Lm.EDGE_MOUSELEAVE="edge:mouseleave",Lm.EDGE_MOUSEMOVE="edge:mousemove",Lm.EDGE_MOUSEOUT="edge:mouseout",Lm.EDGE_MOUSEOVER="edge:mouseover",Lm.EDGE_DROP="edge:drop",Lm.EDGE_DRAGOVER="edge:dragover",Lm.EDGE_DRAGENTER="edge:dragenter",Lm.EDGE_DRAGLEAVE="edge:dragleave",Lm.CANVAS_CONTEXTMENU="canvas:contextmenu",Lm.CANVAS_CLICK="canvas:click",Lm.CANVAS_DBLCLICK="canvas:dblclick",Lm.CANVAS_MOUSEDOWN="canvas:mousedown",Lm.CANVAS_MOUSEUP="canvas:mouseup",Lm.CANVAS_MOUSEENTER="canvas:mouseenter",Lm.CANVAS_MOUSELEAVE="canvas:mouseleave",Lm.CANVAS_MOUSEMOVE="canvas:mousemove",Lm.CANVAS_MOUSEOUT="canvas:mouseout",Lm.CANVAS_MOUSEOVER="canvas:mouseover",Lm.CANVAS_DROP="canvas:drop",Lm.CANVAS_DRAGENTER="canvas:dragenter",Lm.CANVAS_DRAGLEAVE="canvas:dragleave",Lm.CANVAS_DRAGSTART="canvas:dragstart",Lm.CANVAS_DRAG="canvas:drag",Lm.CANVAS_DRAGEND="canvas:dragend",Lm.CANVAS_TAP="canvas:tap",Lm.CANVAS_PANSTART="canvas:panstart",Lm.CANVAS_PANMOVE="canvas:panmove",Lm.CANVAS_PANEND="canvas:panend",Lm.BEFORERENDER="beforerender",Lm.AFTERRENDER="afterrender",Lm.BEFOREADDITEM="beforeadditem",Lm.AFTERADDITEM="afteradditem",Lm.BEFOREREMOVEITEM="beforeremoveitem",Lm.AFTERREMOVEITEM="afterremoveitem",Lm.BEFOREUPDATEITEM="beforeupdateitem",Lm.AFTERUPDATEITEM="afterupdateitem",Lm.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",Lm.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",Lm.BEFOREITEMSTATECHANGE="beforeitemstatechange",Lm.AFTERITEMSTATECHANGE="afteritemstatechange",Lm.BEFOREITEMREFRESH="beforeitemrefresh",Lm.AFTERITEMREFRESH="afteritemrefresh",Lm.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",Lm.AFTERITEMSTATESCLEAR="afteritemstatesclear",Lm.BEFOREMODECHANGE="beforemodechange",Lm.AFTERMODECHANGE="aftermodechange",Lm.BEFORELAYOUT="beforelayout",Lm.AFTERLAYOUT="afterlayout",Lm.BEFORECREATEEDGE="beforecreateedge",Lm.AFTERCREATEEDGE="aftercreateedge",Lm.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",Lm.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",Lm.BEFOREGRAPHREFRESH="beforegraphrefresh",Lm.AFTERGRAPHREFRESH="aftergraphrefresh",Lm.BEFOREANIMATE="beforeanimate",Lm.AFTERANIMATE="afteranimate",Lm.BEFOREPAINT="beforepaint",Lm.AFTERPAINT="afterpaint",Lm.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",Lm.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",Lm.GRAPHSTATECHANGE="graphstatechange",Lm.AFTERACTIVATERELATIONS="afteractivaterelations",Lm.NODESELECTCHANGE="nodeselectchange",Lm.TOOLTIPCHANGE="tooltipchange",Lm.WHEELZOOM="wheelzoom",Lm.VIEWPORTCHANGE="viewportchange",Lm.DRAGNODEEND="dragnodeend",Lm.STACKCHANGE="stackchange",Lm.TAP="tap",Lm.PINCHSTART="pinchstart",Lm.PINCHMOVE="pinchmove",Lm.PANSTART="panstart",Lm.PANMOVE="panmove",Lm.PANEND="panend";var Um=Vv.registerNode,$m=Vv.registerEdge,Vm=Vv.registerCombo,Wm=nu.registerBehavior,Hm=eh,Ym="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Xm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function qm(t,e){return t(e={exports:{}},e.exports),e.exports}var Km=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MESSAGE=e.ALGORITHM=void 0;e.ALGORITHM={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};e.MESSAGE={SUCCESS:"SUCCESS",FAILURE:"FAILURE"}}));Xm(Km),Km.MESSAGE,Km.ALGORITHM;var Zm=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t,e){var n=t.nodes,r=t.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){o[t.id]=e;i.push([])})),r&&r.forEach((function(t){var n=t.source,r=t.target,a=o[n],s=o[r];!a&&0!==a||!s&&0!==s||(i[a][s]=1,e||(i[s][a]=1))})),i};e.default=n}));Xm(Zm);var Qm=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.LinkedListNode=void 0;var n=function(t,e){return t===e},r=function(){function t(t,e){void 0===e&&(e=null),this.value=t,this.next=e}return t.prototype.toString=function(t){return t?t(this.value):""+this.value},t}();e.LinkedListNode=r;var i=function(){function t(t){void 0===t&&(t=n),this.head=null,this.tail=null,this.compare=t}return t.prototype.prepend=function(t){var e=new r(t,this.head);return this.head=e,this.tail||(this.tail=e),this},t.prototype.append=function(t){var e=new r(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},t.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},t.prototype.find=function(t){var e=t.value,n=void 0===e?void 0:e,r=t.callback,i=void 0===r?void 0:r;if(!this.head)return null;for(var o=this.head;o;){if(i&&i(o.value))return o;if(void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},t.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},t.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},t.prototype.fromArray=function(t){var e=this;return t.forEach((function(t){return e.append(t)})),this},t.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},t.prototype.reverse=function(){for(var t=this.head,e=null,n=null;t;)n=t.next,t.next=e,e=t,t=n;this.tail=this.head,this.head=e},t.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map((function(e){return e.toString(t)})).toString()},t}();e.default=i}));Xm(Qm),Qm.LinkedListNode;var Jm=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,r=(n=Qm)&&n.__esModule?n:{default:n};var i=function(){function t(){this.linkedList=new r.default}return t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(t){this.linkedList.append(t)},t.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toString=function(t){return this.linkedList.toString(t)},t}();e.default=i}));Xm(Jm);var ty=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueId=e.getEdgesByNodeId=e.getOutEdgesNodeId=e.getNeighbors=void 0;e.getNeighbors=function(t,e,n){void 0===e&&(e=[]);var r=e.filter((function(e){return e.source===t||e.target===t}));if("target"===n){return r.filter((function(e){return e.source===t})).map((function(t){return t.target}))}if("source"===n){return r.filter((function(e){return e.target===t})).map((function(t){return t.source}))}return r.map((function(e){return e.source===t?e.target:e.source}))};e.getOutEdgesNodeId=function(t,e){return e.filter((function(e){return e.source===t}))};e.getEdgesByNodeId=function(t,e){return e.filter((function(e){return e.source===t||e.target===t}))};e.uniqueId=function(t){return void 0===t&&(t=0),t+"-"+(""+Math.random()).split(".")[1].substr(0,5)+(""+Math.random()).split(".")[1].substr(0,5)}}));Xm(ty),ty.uniqueId,ty.getEdgesByNodeId,ty.getOutEdgesNodeId,ty.getNeighbors;var ey=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,r=(n=Jm)&&n.__esModule?n:{default:n};var i=function(t,e,n){var i=function(t){void 0===t&&(t={});var e,n=t,r=function(){},i=(e={},function(t){var n=t.next;return!e[n]&&(e[n]=!0,!0)});return n.allowTraversal=t.allowTraversal||i,n.enter=t.enter||r,n.leave=t.leave||r,n}(n),o=new r.default,a=t.edges,s=void 0===a?[]:a;o.enqueue(e);for(var l="",u=function(){var t=o.dequeue();i.enter({current:t,previous:l}),(0,ty.getNeighbors)(t,s,"target").forEach((function(e){i.allowTraversal({previous:l,current:t,next:e})&&o.enqueue(e)})),i.leave({current:t,previous:l}),l=t};!o.isEmpty();)u()};e.default=i}));Xm(ey);var ny=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return e?r(t):n(t)},e.detectStrongConnectComponents=e.detectConnectedComponents=void 0;var n=function(t){for(var e=t.nodes,n=void 0===e?[]:e,r=t.edges,i=void 0===r?[]:r,o=[],a={},s=[],l=function t(e){s.push(e),a[e.id]=!0;for(var r=(0,ty.getNeighbors)(e.id,i),o=function(e){var i=r[e];if(!a[i]){var o=n.filter((function(t){return t.id===i}));o.length>0&&t(o[0])}},l=0;l<r.length;++l)o(l)},u=0;u<n.length;u++){var c=n[u];if(!a[c.id]){l(c);for(var d=[];s.length>0;)d.push(s.pop());o.push(d)}}return o};e.detectConnectedComponents=n;var r=function(t){for(var e=t.nodes,n=void 0===e?[]:e,r=t.edges,i=void 0===r?[]:r,o=[],a={},s={},l={},u=[],c=0,d=function t(e){s[e.id]=c,l[e.id]=c,c+=1,o.push(e),a[e.id]=!0;for(var r=(0,ty.getNeighbors)(e.id,i,"target").filter((function(t){return n.map((function(t){return t.id})).indexOf(t)>-1})),d=function(i){var o=r[i];if(s[o]||0===s[o])a[o]&&(l[e.id]=Math.min(l[e.id],s[o]));else{var u=n.filter((function(t){return t.id===o}));u.length>0&&t(u[0]),l[e.id]=Math.min(l[e.id],l[o])}},h=0;h<r.length;h++)d(h);if(l[e.id]===s[e.id]){for(var f=[];o.length>0;){var p=o.pop();if(a[p.id]=!1,f.push(p),p===e)break}f.length>0&&u.push(f)}},h=0,f=n;h<f.length;h++){var p=f[h];s[p.id]||0===s[p.id]||d(p)}return u};e.detectStrongConnectComponents=r}));Xm(ny),ny.detectStrongConnectComponents,ny.detectConnectedComponents;var ry=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getOutDegree=e.getInDegree=e.default=void 0;var n=function(t){var e={},n=t.nodes,r=void 0===n?[]:n,i=t.edges,o=void 0===i?[]:i;return r.forEach((function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}})),o.forEach((function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++})),e},r=n;e.default=r;e.getInDegree=function(t,e){return n(t)[e]?n(t)[e].inDegree:0};e.getOutDegree=function(t,e){return n(t)[e]?n(t)[e].outDegree:0}}));Xm(ry),ry.getOutDegree,ry.getInDegree;var iy=qm((function(t,e){function n(t,e,r,i){i.enter({current:e,previous:r});var o=t.edges,a=void 0===o?[]:o;(0,ty.getNeighbors)(e,a,"target").forEach((function(o){i.allowTraversal({previous:r,current:e,next:o})&&n(t,o,e,i)})),i.leave({current:e,previous:r})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r){n(t,e,"",function(t){void 0===t&&(t={});var e=t,n=function(){},r=(i={},function(t){var e=t.next;return!i[e]&&(i[e]=!0,!0)});var i;return e.allowTraversal=t.allowTraversal||r,e.enter=t.enter||n,e.leave=t.leave||n,e}(r))}}));Xm(iy);var oy=qm((function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.detectAllCycles=e.detectAllDirectedCycle=e.detectAllUndirectedCycle=void 0;var r,i=(r=iy)&&r.__esModule?r:{default:r},o=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var r=a(e);if(r&&r.has(t))return r.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var l=o?Object.getOwnPropertyDescriptor(t,s):null;l&&(l.get||l.set)?Object.defineProperty(i,s,l):i[s]=t[s]}i.default=t,r&&r.set(t,i);return i}(ny);function a(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(a=function(t){return t?n:e})(t)}var s=function(t,e,n){var r,i;void 0===n&&(n=!0);for(var a=[],s=0,l=(0,o.default)(t,!1);s<l.length;s++){var u=l[s];if(u.length)for(var c=u[0],d=c.id,h=[c],f=((r={})[d]=c,r),p=((i={})[d]=new Set,i);h.length>0;)for(var g=h.pop(),v=g.id,m=(0,ty.getNeighbors)(v,t.edges),y=function(r){var i,o=m[r],s=t.nodes.find((function(t){return t.id===o}));if(o===v)a.push(((i={})[o]=g,i));else if(o in p){if(!p[v].has(s)){for(var l=!0,u=[s,g],c=f[v];p[o].size&&!p[o].has(c)&&(u.push(c),c!==f[c.id]);)c=f[c.id];if(u.push(c),e&&n?(l=!1,u.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(l=!0)):e&&!n&&u.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(l=!1),l){for(var d={},y=1;y<u.length;y+=1)d[u[y-1].id]=u[y];u.length&&(d[u[u.length-1].id]=u[0]),a.push(d)}p[o].add(g)}}else f[o]=g,h.push(s),p[o]=new Set([g])},b=0;b<m.length;b+=1)y(b)}return a};e.detectAllUndirectedCycle=s;var l=function(t,e,n){void 0===n&&(n=!0);for(var r=[],i=new Set,a=[],s=[],l={},u={},c=function t(o,u,c){var d=!1;if(e&&!1===n&&e.indexOf(o.id)>-1)return d;r.push(o),i.add(o);for(var h=c[o.id],f=0;f<h.length;f+=1){if((v=l[h[f]])===u){for(var p={},g=1;g<r.length;g+=1)p[r[g-1].id]=r[g];r.length&&(p[r[r.length-1].id]=r[0]),s.push(p),d=!0}else i.has(v)||t(v,u,c)&&(d=!0)}if(d)!function(t){for(var e=[t];e.length>0;){var n=e.pop();i.has(n)&&(i.delete(n),a[n.id].forEach((function(t){e.push(t)})),a[n.id].clear())}}(o);else for(f=0;f<h.length;f+=1){var v=l[h[f]];a[v.id].has(o)||a[v.id].add(o)}return r.pop(),d},d=t.nodes,h=void 0===d?[]:d,f=0;f<h.length;f+=1){var p=h[f],g=p.id;u[g]=f,l[f]=p}if(e&&n){var v=function(t){var n=e[t];u[h[t].id]=u[n],u[n]=0,l[0]=h.find((function(t){return t.id===n})),l[u[h[t].id]]=h[t]};for(f=0;f<e.length;f++)v(f)}for(var m=function(r){for(var i,o,a=1/0,l=0;l<r.length;l+=1)for(var c=r[l],d=0;d<c.length;d++){var h=u[c[d].id];h<a&&(a=h,o=l)}var f=r[o],p=[];for(l=0;l<f.length;l+=1){var g=f[l];p[g.id]=[];for(var v=0,m=(0,ty.getNeighbors)(g.id,t.edges,"target").filter((function(t){return f.map((function(t){return t.id})).indexOf(t)>-1}));v<m.length;v++){var y=m[v];y!==g.id||!1===n&&e.indexOf(g.id)>-1?p[g.id].push(u[y]):s.push(((i={})[g.id]=g,i))}}return{component:f,adjList:p,minIdx:a}},y=0;y<h.length;){var b=h.filter((function(t){return u[t.id]>=y})),x=(0,o.detectStrongConnectComponents)({nodes:b,edges:t.edges}).filter((function(t){return t.length>1}));if(0===x.length)break;var w=m(x),C=w.minIdx,S=w.adjList,k=w.component;if(!(k.length>1))break;k.forEach((function(t){a[t.id]=new Set}));var E=l[C];if(e&&n&&-1===e.indexOf(E.id))return s;c(E,E,S),y=C+1}return s};e.detectAllDirectedCycle=l;e.detectAllCycles=function(t,e,n,r){return void 0===r&&(r=!0),e?l(t,n,r):s(t,n,r)};var u=function(t){var e=null,n=t.nodes,r={},o={},a={},s={};(void 0===n?[]:n).forEach((function(t){o[t.id]=t}));for(var l={enter:function(t){var n=t.current,i=t.previous;if(a[n]){e={};for(var s=n,l=i;l!==n;)e[s]=l,s=l,l=r[l];e[s]=l}else a[n]=n,delete o[n],r[n]=i},leave:function(t){var e=t.current;s[e]=e,delete a[e]},allowTraversal:function(t){var n=t.next;return!e&&!s[n]}};Object.keys(o).length;){var u=Object.keys(o)[0];(0,i.default)(t,u,l)}return e};e.default=u}));Xm(oy),oy.detectAllCycles,oy.detectAllDirectedCycle,oy.detectAllUndirectedCycle;var ay=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t,e,n,i){var o=t.nodes,a=void 0===o?[]:o,s=t.edges,l=void 0===s?[]:s,u={},c={},d={};a.forEach((function(t,n){var r=t.id;c[r]=1/0,r===e&&(c[r]=0)}));for(var h=a.length,f=function(t){var e=function(t,e,n){for(var r,i=1/0,o=0;o<e.length;o++){var a=e[o].id;!n[a]&&t[a]<=i&&(i=t[a],r=e[o])}return r}(c,a,u),r=e.id;if(u[r]=!0,c[r]===1/0)return"continue";(n?(0,ty.getOutEdgesNodeId)(r,l):(0,ty.getEdgesByNodeId)(r,l)).forEach((function(t){var n=t.target,o=t.source,a=n===r?o:n,s=i&&t[i]?t[i]:1;c[a]>c[e.id]+s?(c[a]=c[e.id]+s,d[a]=[e.id]):c[a]===c[e.id]+s&&d[a].push(e.id)}))},p=0;p<h;p++)f();d[e]=[e];var g={};for(var v in c)c[v]!==1/0&&r(e,v,d,g);var m={};for(var v in g)m[v]=g[v][0];return{length:c,path:m,allPath:g}};function r(t,e,n,i){if(t===e)return[t];if(i[e])return i[e];for(var o=[],a=0,s=n[e];a<s.length;a++){var l=r(t,s[a],n,i);if(!l)return;for(var u=0,c=l;u<c.length;u++){var d=c[u];(0,tu.isArray)(d)?o.push((0,ls.__spreadArray)((0,ls.__spreadArray)([],d),[e])):o.push([d,e])}}return i[e]=o,i[e]}e.default=n}));Xm(ay);var sy=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.findAllPath=e.findShortestPath=void 0;var n,r=(n=ay)&&n.__esModule?n:{default:n};e.findShortestPath=function(t,e,n,i,o){var a=(0,r.default)(t,e,i,o),s=a.length,l=a.path,u=a.allPath;return{length:s[n],path:l[n],allPath:u[n]}};e.findAllPath=function(t,e,n,r){var i;if(e===n)return[[e]];var o=t.edges,a=void 0===o?[]:o,s=[e],l=((i={})[e]=!0,i),u=[],c=[],d=r?(0,ty.getNeighbors)(e,a,"target"):(0,ty.getNeighbors)(e,a);for(u.push(d);s.length>0&&u.length>0;){var h=u[u.length-1];if(h.length){var f=h.shift();if(f&&(s.push(f),l[f]=!0,d=r?(0,ty.getNeighbors)(f,a,"target"):(0,ty.getNeighbors)(f,a),u.push(d.filter((function(t){return!l[t]})))),s[s.length-1]===n){var p=s.map((function(t){return t}));c.push(p);g=s.pop();l[g]=!1,u.pop()}}else{var g=s.pop();l[g]=!1,u.pop()}}return c}}));Xm(sy),sy.findAllPath,sy.findShortestPath;var ly=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,r=(n=Zm)&&n.__esModule?n:{default:n};var i=function(t,e){for(var n=(0,r.default)(t,e),i=[],o=n.length,a=0;a<o;a+=1){i[a]=[];for(var s=0;s<o;s+=1)a===s?i[a][s]=0:0!==n[a][s]&&n[a][s]?i[a][s]=n[a][s]:i[a][s]=1/0}for(var l=0;l<o;l+=1)for(a=0;a<o;a+=1)for(s=0;s<o;s+=1)i[a][s]>i[a][l]+i[l][s]&&(i[a][s]=i[a][l]+i[l][s]);return i};e.default=i}));Xm(ly);var uy=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,r=(n=Zm)&&n.__esModule?n:{default:n};var i=function(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===i&&(i=1e3);var o=t.nodes,a=void 0===o?[]:o,s=t.edges,l=void 0===s?[]:s,u={},c={};a.forEach((function(t,e){var n=(0,ty.uniqueId)();t.clusterId=n,u[n]={id:n,nodes:[t]},c[t.id]={node:t,idx:e}}));var d=(0,r.default)(t,e),h={};d.forEach((function(t,e){var n=a[e].id;h[n]={},t.forEach((function(t,e){if(t){var r=a[e].id;h[n][r]=t}}))}));for(var f=0,p=function(){var t=!1;if(a.forEach((function(e){var n={};Object.keys(h[e.id]).forEach((function(t){var r=h[e.id][t],i=c[t].node.clusterId;n[i]||(n[i]=0),n[i]+=r}));var r=-1/0,i=[];if(Object.keys(n).forEach((function(t){r<n[t]?(r=n[t],i=[t]):r===n[t]&&i.push(t)})),1!==i.length||i[0]!==e.clusterId){var o=i.indexOf(e.clusterId);if(o>=0&&i.splice(o,1),i&&i.length){t=!0;var a=u[e.clusterId],s=a.nodes.indexOf(e);a.nodes.splice(s,1);var l=Math.floor(Math.random()*i.length),d=u[i[l]];d.nodes.push(e),e.clusterId=d.id}}})),!t)return"break";f++};f<i;){if("break"===p())break}Object.keys(u).forEach((function(t){var e=u[t];e.nodes&&e.nodes.length||delete u[t]}));var g=[],v={};l.forEach((function(t){var e=t.source,r=t.target,i=t[n]||1,o=c[e].node.clusterId,a=c[r].node.clusterId,s=o+"---"+a;if(v[s])v[s].weight+=i,v[s].count++;else{var l={source:o,target:a,weight:i,count:1};v[s]=l,g.push(l)}}));var m=[];return Object.keys(u).forEach((function(t){m.push(u[t])})),{clusters:m,clusterEdges:g}};e.default=i}));Xm(uy);var cy=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,r=(n=Zm)&&n.__esModule?n:{default:n};var i=function(t,e,n,r){for(var i=e.length,o=2*r,a=0,s=0;s<i;s++)for(var l=t[s].clusterId,u=0;u<i;u++){if(l===t[u].clusterId)a+=(e[s][u]||0)-(n[s]||0)*(n[u]||0)/o}return a*=1/o},o=function(t,e,n,o){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===o&&(o=1e-4);var a=t.nodes,s=void 0===a?[]:a,l=t.edges,u=void 0===l?[]:l,c=1,d={},h={};s.forEach((function(t,e){var n=String(c++);t.clusterId=n,d[n]={id:n,nodes:[t]},h[t.id]={node:t,idx:e}}));var f=(0,r.default)(t,e),p=[],g={},v=0;f.forEach((function(t,e){var n=0,r=s[e].id;g[r]={},t.forEach((function(t,e){if(t){n+=t;var i=s[e].id;g[r][i]=t,v+=t}})),p.push(n)})),v/=2;for(var m=1/0,y=1/0,b=0;m=i(s,f,p,v),!(Math.abs(m-y)<o||b>100);)y=m,b++,Object.keys(d).forEach((function(t){var e=0;u.forEach((function(r){var i=r.source,o=r.target,a=h[i].node.clusterId,s=h[o].node.clusterId;(a===t&&s!==t||s===t&&a!==t)&&(e+=r[n]||1)})),d[t].sumTot=e})),s.forEach((function(t,e){var r,i=d[t.clusterId],o=0,a=p[e]/(2*v),s=0;i.nodes.forEach((function(t){var n=h[t.id].idx;s+=f[e][n]||0}));var l=s-i.sumTot*a,c=g[t.id];if(Object.keys(c).forEach((function(n){var i=h[n].node.clusterId;if(i!==t.clusterId){var s=d[i],u=s.nodes;if(u&&u.length){var c=0;u.forEach((function(t){var n=h[t.id].idx;c+=f[e][n]||0}));var p=c-s.sumTot*a-l;p>o&&(o=p,r=s)}}})),o>0){r.nodes.push(t);var m=t.clusterId;t.clusterId=r.id;var y=i.nodes.indexOf(t);i.nodes.splice(y,1);var b=0,x=0;u.forEach((function(t){var e=t.source,i=t.target,o=h[e].node.clusterId,a=h[i].node.clusterId;(o===r.id&&a!==r.id||a===r.id&&o!==r.id)&&(b+=t[n]||1),(o===m&&a!==m||a===m&&o!==m)&&(x+=t[n]||1)})),r.sumTot=b,i.sumTot=x}}));var x={},w=0;Object.keys(d).forEach((function(t){var e=d[t];if(e.nodes&&e.nodes.length){var n=String(w+1);n!==t&&(e.id=n,e.nodes=e.nodes.map((function(t){return{id:t.id,clusterId:n}})),d[n]=e,x[t]=n,delete d[t],w++)}else delete d[t]})),s.forEach((function(t){t.clusterId&&x[t.clusterId]&&(t.clusterId=x[t.clusterId])}));var C=[],S={};u.forEach((function(t){var e=t.source,r=t.target,i=t[n]||1,o=h[e].node.clusterId,a=h[r].node.clusterId,s=o+"---"+a;if(S[s])S[s].weight+=i,S[s].count++;else{var l={source:o,target:a,weight:i,count:1};S[s]=l,C.push(l)}}));var k=[];return Object.keys(d).forEach((function(t){k.push(d[t])})),{clusters:k,clusterEdges:C}};e.default=o}));Xm(cy);var dy=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){function t(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var r=n[e];this.parent[r]=r}}return t.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},t.prototype.union=function(t,e){var n=this.find(t),r=this.find(e);n!==r&&(n<r?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},t.prototype.connected=function(t,e){return this.find(t)===this.find(e)},t}();e.default=n}));Xm(dy);var hy=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t,e){return t-e},r=function(){function t(t){void 0===t&&(t=n),this.compareFn=t,this.list=[]}return t.prototype.getLeft=function(t){return 2*t+1},t.prototype.getRight=function(t){return 2*t+2},t.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},t.prototype.insert=function(t){if(null!==t){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},t.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},t.prototype.moveDown=function(t){var e,n=t,r=this.getLeft(t),i=this.getRight(t),o=this.list.length;null!==r&&r<o&&this.compareFn(this.list[n],this.list[r])>0?n=r:null!==i&&i<o&&this.compareFn(this.list[n],this.list[i])>0&&(n=i),t!==n&&(e=[this.list[n],this.list[t]],this.list[t]=e[0],this.list[n]=e[1],this.moveDown(n))},t}();e.default=r}));Xm(hy);var fy=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(dy),r=i(hy);function i(t){return t&&t.__esModule?t:{default:t}}var o=function(t,e){var n=[],i=t.nodes,o=void 0===i?[]:i,a=t.edges,s=void 0===a?[]:a;if(0===o.length)return n;var l=o[0],u=new Set;u.add(l);var c=new r.default((function(t,n){return e?t.weight-n.weight:0}));for((0,ty.getEdgesByNodeId)(l.id,s).forEach((function(t){c.insert(t)}));!c.isEmpty();){var d=c.delMin(),h=d.source,f=d.target;u.has(h)&&u.has(f)||(n.push(d),u.has(h)||(u.add(h),(0,ty.getEdgesByNodeId)(h,s).forEach((function(t){c.insert(t)}))),u.has(f)||(u.add(f),(0,ty.getEdgesByNodeId)(f,s).forEach((function(t){c.insert(t)}))))}return n},a=function(t,e){var r=[],i=t.nodes,o=void 0===i?[]:i,a=t.edges,s=void 0===a?[]:a;if(0===o.length)return r;var l=s.map((function(t){return t}));e&&l.sort((function(t,e){return t.weight-e.weight}));for(var u=new n.default(o.map((function(t){return t.id})));l.length>0;){var c=l.shift(),d=c.source,h=c.target;u.connected(d,h)||(r.push(c),u.union(d,h))}return r},s=function(t,e,n){return n?{prim:o,kruskal:a}[n](t,e):a(t,e)};e.default=s}));Xm(fy);var py=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,r=(n=ry)&&n.__esModule?n:{default:n};var i=function(t,e,n){"number"!=typeof e&&(e=1e-6),"number"!=typeof n&&(n=.85);for(var i,o=1,a=0,s=1e3,l=t.nodes,u=void 0===l?[]:l,c=t.edges,d=void 0===c?[]:c,h=u.length,f={},p={},g=0;g<h;++g){f[m=(C=u[g]).id]=1/h,p[m]=1/h}for(var v=(0,r.default)(t);s>0&&o>e;){a=0;for(g=0;g<h;++g){var m=(C=u[g]).id;if(i=0,0===v[C.id].inDegree)f[m]=0;else{for(var y=(0,ty.getNeighbors)(m,d,"source"),b=0;b<y.length;++b){var x=y[b],w=v[x].outDegree;w>0&&(i+=p[x]/w)}f[m]=n*i,a+=f[m]}}a=(1-a)/h,o=0;for(g=0;g<h;++g){var C;i=f[m=(C=u[g]).id]+a,o+=Math.abs(i-p[m]),p[m]=i}s-=1}return p};e.default=i}));Xm(py);var gy=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=e.Node=e.Edge=e.AUTO_EDGE_ID=e.VACANT_GRAPH_ID=e.VACANT_NODE_LABEL=e.VACANT_EDGE_LABEL=e.VACANT_NODE_ID=e.VACANT_EDGE_ID=void 0;e.VACANT_EDGE_ID=-1;e.VACANT_NODE_ID=-1;e.VACANT_EDGE_LABEL="-1";e.VACANT_NODE_LABEL="-1";e.VACANT_GRAPH_ID=-1;e.AUTO_EDGE_ID="-1";var n=function(t,e,n,r){void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===n&&(n=-1),void 0===r&&(r="-1"),this.id=t,this.from=e,this.to=n,this.label=r};e.Edge=n;var r=function(){function t(t,e){void 0===t&&(t=-1),void 0===e&&(e="-1"),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},t}();e.Node=r;var i=function(){function t(t,e,n){void 0===t&&(t=-1),void 0===e&&(e=!0),void 0===n&&(n=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var n=new r(t,e);this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},t.prototype.addEdge=function(t,e,r,i){if((this.edgeIdAutoIncrease||void 0===t)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[t])){var o=new n(t,e,r,i);if(this.edges.push(o),this.edgeMap[t]=o,this.nodeMap[e].addEdge(o),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(o),!this.directed){var a=new n(t,r,e,i);this.nodeMap[r].addEdge(a),this.edgeLabelMap[i].push(a)}}},t}();e.Graph=i}));Xm(gy),gy.Graph,gy.Node,gy.Edge,gy.AUTO_EDGE_ID,gy.VACANT_GRAPH_ID,gy.VACANT_NODE_LABEL,gy.VACANT_EDGE_LABEL,gy.VACANT_NODE_ID,gy.VACANT_EDGE_ID;var vy=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){function t(t,e,n,r,i){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||gy.VACANT_NODE_LABEL,edgeLabel:r||gy.VACANT_EDGE_LABEL,nodeLabel2:i||gy.VACANT_NODE_LABEL}}return t.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t}(),r=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(t){var e=this.dfsEdgeList.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(this.dfsEdgeList[n]!==t[n])return!1;return!0},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t.prototype.pushBack=function(t,e,r,i,o){return this.dfsEdgeList.push(new n(t,e,r,i,o)),this.dfsEdgeList},t.prototype.toGraph=function(t,e){void 0===t&&(t=gy.VACANT_GRAPH_ID),void 0===e&&(e=!1);var n=new gy.Graph(t,!0,e);return this.dfsEdgeList.forEach((function(t){var e=t.fromNode,r=t.toNode,i=t.nodeEdgeNodeLabel,o=i.nodeLabel1,a=i.edgeLabel,s=i.nodeLabel2;o!==gy.VACANT_NODE_LABEL&&n.addNode(e,o),s!==gy.VACANT_NODE_LABEL&&n.addNode(r,s),n.addEdge(void 0,e,r,a)})),n},t.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length-1;e>=0;e--){var n=this.dfsEdgeList[e],r=n.fromNode,i=n.toNode;r<i&&(void 0===t||i===t)&&(this.rmpath.push(e),t=r)}return this.rmpath},t.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach((function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)})),Object.keys(t).length},t}(),i=function(){function t(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},t.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]},t}(),o=function(){function t(t){var e=t.graphs,n=t.minSupport,i=void 0===n?2:n,o=t.minNodeNum,a=void 0===o?1:o,s=t.maxNodeNum,l=void 0===s?4:s,u=t.top,c=void 0===u?10:u,d=t.directed,h=void 0!==d&&d,f=t.verbose,p=void 0!==f&&f;this.graphs=e,this.dfsCode=new r,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=c,this.directed=h,this.counter=0,this.maxNodeNum=l,this.minNodeNum=a,this.verbose=p,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return t.prototype.findForwardRootEdges=function(t,e){var n=this,r=[],i=t.nodeMap;return e.edges.forEach((function(t){(n.directed||e.label<=i[t.to].label)&&r.push(t)})),r},t.prototype.findBackwardEdge=function(t,e,n,r){if(!this.directed&&e===n)return null;for(var i=t.nodeMap,o=i[n.to].edges,a=o.length,s=0;s<a;s++){var l=o[s];if(!r.hasEdge(l)&&l.to===e.from)if(this.directed){if(i[e.from].label<i[n.to].label||i[e.from].label===i[n.to].label&&e.label<=l.label)return l}else if(e.label<l.label||e.label===l.label&&i[e.to].label<=i[n.to].label)return l}return null},t.prototype.findForwardPureEdges=function(t,e,n,r){for(var i=[],o=e.to,a=t.nodeMap[o].edges,s=a.length,l=0;l<s;l++){var u=a[l],c=t.nodeMap[u.to];n<=c.label&&!r.hasNode(c)&&i.push(u)}return i},t.prototype.findForwardRmpathEdges=function(t,e,n,r){for(var i=[],o=t.nodeMap,a=o[e.to].label,s=o[e.from].edges,l=s.length,u=0;u<l;u++){var c=s[u],d=o[c.to].label;e.to===c.to||n>d||r.hasNode(o[c.to])||(e.label<c.label||e.label===c.label&&a<=d)&&i.push(c)}return i},t.prototype.getSupport=function(t){var e={};return t.forEach((function(t){e[t.graphId]||(e[t.graphId]=!0)})),Object.keys(e).length},t.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach((function(n){var r=t[n],i=r.nodeLabel1,o=r.edgeLabel,a=r.nodeLabel2;e?(i<e.nodeLabel1||i===e.nodeLabel1&&o<e.edgeLabel||i===e.nodeLabel1&&o===e.edgeLabel&&a<e.nodeLabel2)&&(e={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}):e={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}})),e},t.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),1===e.dfsEdgeList.length)return!0;var o=this.directed,a=e.toGraph(gy.VACANT_GRAPH_ID,o),s=a.nodeMap,l=new r,u={};a.nodes.forEach((function(e){t.findForwardRootEdges(a,e).forEach((function(t){var n=s[t.to],r=e.label+"-"+t.label+"-"+n.label;u[r]||(u[r]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:n.label});var i={graphId:a.id,edge:t,preNode:null};u[r].projected.push(i)}))}));var c=this.findMinLabel(u);l.dfsEdgeList.push(new n(0,1,c.nodeLabel1,c.edgeLabel,c.nodeLabel2));var d=c.nodeLabel1+"-"+c.edgeLabel+"-"+c.nodeLabel2;return function r(u){for(var c=l.buildRmpath(),d=l.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,h=l.dfsEdgeList[c[0]].toNode,f={},p=!1,g=0,v=o?-1:0,m=function(e){if(p)return"break";u.forEach((function(n){var r=new i(n),o=t.findBackwardEdge(a,r.edges[c[e]],r.edges[c[0]],r);o&&(f[o.label]||(f[o.label]={projected:[],edgeLabel:o.label}),f[o.label].projected.push({graphId:a.id,edge:f,preNode:n}),g=l.dfsEdgeList[c[e]].fromNode,p=!0)}))},y=c.length-1;y>v;y--){if("break"===m(y))break}if(p){var b=t.findMinLabel(f);l.dfsEdgeList.push(new n(h,g,gy.VACANT_NODE_LABEL,b.edgeLabel,gy.VACANT_NODE_LABEL));var x=l.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[x]===l.dfsEdgeList[x]&&r(f[b.edgeLabel].projected)}var w={};p=!1;var C=0;u.forEach((function(e){var n=new i(e),r=t.findForwardPureEdges(a,n.edges[c[0]],d,n);r.length>0&&(p=!0,C=h,r.forEach((function(t){var n=t.label+"-"+s[t.to].label;w[n]||(w[n]={projected:[],edgeLabel:t.label,nodeLabel2:s[t.to].label}),w[n].projected.push({graphId:a.id,edge:t,preNode:e})})))}));var S=c.length,k=function(e){if(p)return"break";var n=c[e];u.forEach((function(e){var r=new i(e),o=t.findForwardRmpathEdges(a,r.edges[n],d,r);o.length>0&&(p=!0,C=l.dfsEdgeList[n].fromNode,o.forEach((function(t){var n=t.label+"-"+s[t.to].label;w[n]||(w[n]={projected:[],edgeLabel:t.label,nodeLabel2:s[t.to].label}),w[n].projected.push({graphId:a.id,edge:t,preNode:e})})))}))};for(y=0;y<S;y++){if("break"===k(y))break}if(!p)return!0;var E=t.findMinLabel(w);l.dfsEdgeList.push(new n(C,h+1,gy.VACANT_NODE_LABEL,E.edgeLabel,E.nodeLabel2));var M=l.dfsEdgeList.length-1;return e.dfsEdgeList[M]===l.dfsEdgeList[M]&&r(w[E.edgeLabel+"-"+E.nodeLabel2].projected)}(u[d].projected)},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,tu.clone)(t))}},t.prototype.subGraphMining=function(t){var e=this;if(!(this.getSupport(t)<this.minSupport)&&this.isMin()){this.report();var r=this.dfsCode.getNodeNum(),o=this.dfsCode.buildRmpath(),a=this.dfsCode.dfsEdgeList[o[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l={},u={};t.forEach((function(t){for(var n=e.graphs[t.graphId],c=n.nodeMap,d=new i(t),h=o.length-1;h>=0;h--){var f=e.findBackwardEdge(n,d.edges[o[h]],d.edges[o[0]],d);if(f){var p=e.dfsCode.dfsEdgeList[o[h]].fromNode+"-"+f.label;u[p]||(u[p]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[o[h]].fromNode,edgeLabel:f.label}),u[p].projected.push({graphId:t.graphId,edge:f,preNode:t})}}if(!(r>=e.maxNodeNum)){e.findForwardPureEdges(n,d.edges[o[0]],s,d).forEach((function(e){var n=a+"-"+e.label+"-"+c[e.to].label;l[n]||(l[n]={projected:[],fromNodeId:a,edgeLabel:e.label,nodeLabel2:c[e.to].label}),l[n].projected.push({graphId:t.graphId,edge:e,preNode:t})}));var g=function(r){e.findForwardRmpathEdges(n,d.edges[o[r]],s,d).forEach((function(n){var i=e.dfsCode.dfsEdgeList[o[r]].fromNode+"-"+n.label+"-"+c[n.to].label;l[i]||(l[i]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[o[r]].fromNode,edgeLabel:n.label,nodeLabel2:c[n.to].label}),l[i].projected.push({graphId:t.graphId,edge:n,preNode:t})}))};for(h=0;h<o.length;h++)g(h)}})),Object.keys(u).forEach((function(t){var r=u[t],i=r.toNodeId,o=r.edgeLabel;e.dfsCode.dfsEdgeList.push(new n(a,i,"-1",o,"-1")),e.subGraphMining(u[t].projected),e.dfsCode.dfsEdgeList.pop()})),Object.keys(l).forEach((function(t){var r=l[t],i=r.fromNodeId,o=r.edgeLabel,s=r.nodeLabel2;e.dfsCode.dfsEdgeList.push(new n(i,a+1,gy.VACANT_NODE_LABEL,o,s)),e.subGraphMining(l[t].projected),e.dfsCode.dfsEdgeList.pop()}))}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,i={},o={},a={},s={};return Object.keys(t).forEach((function(n){var r=t[n],l=r.nodeMap;r.nodes.forEach((function(t,r){var u=t.label,c=n+"-"+u;if(!a[c]){var d=i[u]||0;d++,i[u]=d}a[c]={graphKey:n,label:u},t.edges.forEach((function(t){var r=u,i=l[t.to].label;if(!e&&r>i){var a=i;i=r,r=a}var c=t.label,d=n+"-"+r+"-"+c+"-"+i,h=r+"-"+c+"-"+i;if(!o[h]){var f=o[h]||0;f++,o[h]=f}s[d]={graphId:n,nodeLabel1:r,edgeLabel:c,nodeLabel2:i}}))}))})),Object.keys(i).forEach((function(t){if(!(i[t]<n)){var e={nodes:[],edges:[]};e.nodes.push({id:"0",label:t}),r.push(e)}})),r},t.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs;this.directed;var r={};Object.keys(e).forEach((function(n){var i=e[n],o=i.nodeMap;i.nodes.forEach((function(e){t.findForwardRootEdges(i,e).forEach((function(t){var i=o[t.to],a=e.label+"-"+t.label+"-"+i.label;r[a]||(r[a]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:i.label});var s={graphId:n,edge:t,preNode:null};r[a].projected.push(s)}))}))})),Object.keys(r).forEach((function(e){var i=r[e],o=i.projected,a=i.nodeLabel1,s=i.edgeLabel,l=i.nodeLabel2;t.dfsCode.dfsEdgeList.push(new n(0,1,a,s,l)),t.subGraphMining(o),t.dfsCode.dfsEdgeList.pop()}))}},t}(),a="cluster",s=function(t){var e=t.graphs,n=t.directed,r=void 0!==n&&n,i=t.nodeLabelProp,s=void 0===i?a:i,l=t.edgeLabelProp,u=void 0===l?a:l,c=function(t,e,n,r){var i={};return Object.keys(t).forEach((function(o,a){var s=t[o],l=new gy.Graph(a,!0,e),u={};s.nodes.forEach((function(t,e){l.addNode(e,t[n]),u[t.id]=e})),s.edges.forEach((function(t,e){var n=u[t.source],i=u[t.target];l.addEdge(-1,n,i,t[r])})),l&&l.getNodeNum()&&(i[l.id]=l)})),i}(e,r,s,u),d=t.minSupport,h=t.maxNodeNum,f=t.minNodeNum,p=t.verbose,g=t.top,v=new o({graphs:c,minSupport:d,maxNodeNum:h,minNodeNum:f,top:g,verbose:p,directed:r});return v.run(),function(t,e,n){var r=[];return t.forEach((function(t){var i={nodes:[],edges:[]};t.nodes.forEach((function(t){var n;i.nodes.push(((n={id:""+t.id})[e]=t.label,n))})),t.edges.forEach((function(t){var e;i.edges.push(((e={source:""+t.from,target:""+t.to})[n]=t.label,e))})),r.push(i)})),r}(v.frequentSubgraphs,s,u)};e.default=s}));Xm(vy);var my=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(ly),r=o(vy),i=o(ay);function o(t){return t&&t.__esModule?t:{default:t}}var a=function(t,e,n,r){void 0===n&&(n="cluster"),void 0===r&&(r=2);var i=[],o=t.nodes;return e.forEach((function(t,e){i.push(s(o,t,e,n,r))})),i},s=function(t,e,n,r,i){var o=[n],a=[],s={};return e.forEach((function(e,l){if(e<=i&&n!==l){o.push(l),a.push(t[l]);var u=t[l][r];s[u]?(s[u].count++,s[u].dists.push(e)):s[u]={count:1,dists:[e]}}})),Object.keys(s).forEach((function(t){s[t].dists=s[t].dists.sort((function(t,e){return t-e}))})),{nodeIdx:n,nodeId:t[n].id,nodeIdxs:o,neighbors:a,neighborNum:o.length-1,nodeLabelCountMap:s}},l=function(t,e,n,r){var i=n.nodes;return r||(r={}),Object.keys(t).forEach((function(o){var a,s;if(!r||!r[o]){r[o]={nodes:[],edges:[]};var l=t[o],u=null===(a=e[l.start])||void 0===a?void 0:a.nodeIdxs,c=null===(s=e[l.end])||void 0===s?void 0:s.nodeIdxs;if(u&&c){var d=new Set(c),h=u.filter((function(t){return d.has(t)}));if(h&&h.length){for(var f={},p=h.length,g=0;g<p;g++){var v=i[h[g]];r[o].nodes.push(v),f[v.id]=!0}n.edges.forEach((function(t){f[t.source]&&f[t.target]&&r[o].edges.push(t)}))}}}})),r},u=function(t,e,n,r){var i={};t.nodes.forEach((function(t){i[t.id]=t}));var o=0;return t.edges.forEach((function(t){var a=i[t.source][n],s=i[t.target][n],l=null==e?void 0:e.nodes[0][n],u=null==e?void 0:e.nodes[1][n],c=null==e?void 0:e.edges[0][r];t[r]===c&&(a===l&&s===u||a===u&&s===l)&&o++})),o},c=function(t,e){var n={},r={};return t.forEach((function(t,i){n[t.id]={idx:i,node:t,degree:0,inDegree:0,outDegree:0};var o=t[e];r[o]||(r[o]=[]),r[o].push(t)})),{nodeMap:n,nodeLabelMap:r}},d=function(t,e,n){var r={},i={};return t.forEach((function(t,o){r[""+ty.uniqueId]={idx:o,edge:t};var a=t[e];i[a]||(i[a]=[]),i[a].push(t);var s=n[t.source];s&&(s.degree++,s.outDegree++);var l=n[t.target];l&&(l.degree++,l.inDegree++)})),{edgeMap:r,edgeLabelMap:i}},h=function(t,e,n){var r=e.length,i={};return e.forEach((function(e,o){for(var a=n?0:o+1,s=t[o].id,l=a;l<r;l++)if(o!==l){var u=t[l].id,c=e[l];i[s+"-"+u]=c,n||(i[u+"-"+s]=c)}})),i},f=function(t,e,n,r,i,o,a,s,c,d,h){var f,p=e.id+"-"+n.id;if(d&&d[p])return d[p];var g=h?h[p]:void 0;if(!g){var v=((f={})[p]={start:r[e.id].idx,end:r[n.id].idx,distance:i},f);g=(h=l(v,o,t,h))[p]}return u(g,a,s,c)},p=function(t,e,n,r){var i,o,a,s=null===(i=t[e])||void 0===i?void 0:i.degree,l=null===(o=t[e])||void 0===o?void 0:o.inDegree,u=null===(a=t[e])||void 0===a?void 0:a.outDegree;return void 0===t[e]&&(s=1/0,l=1/0,u=1/0,r[e].forEach((function(t){var e=n[t.id].degree;s>e&&(s=e);var r=n[t.id].inDegree;l>r&&(l=r);var i=n[t.id].outDegree;u>i&&(u=i)})),t[e]={degree:s,inDegree:l,outDegree:u}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:l,minPatternNodeLabelOutDegree:u}},g=function(t,e,o,g,v,m,y){if(void 0===o&&(o=!1),void 0===m&&(m="cluster"),void 0===y&&(y="cluster"),t&&t.nodes){var b=t.nodes.length;if(b){var x=(0,n.default)(t,o),w=(0,n.default)(e,o),C=h(t.nodes,x,o),S=h(e.nodes,w,o),k=c(t.nodes,m),E=k.nodeMap,M=k.nodeLabelMap,A=c(e.nodes,m),_=A.nodeMap,T=A.nodeLabelMap;d(t.edges,y,E);var P=d(e.edges,y,_).edgeLabelMap;v||(v=Math.max.apply(Math,(0,ls.__spreadArray)((0,ls.__spreadArray)([],w[0]),[2]))),g||(g=v);var I=a(t,x,m,g),D=a(e,w,m,g),O=function(t,e,n,r,i){var o=Math.ceil(n/e),a={},s=0;return r.forEach((function(t,r){for(var l=0,u=0,c=t.nodeIdxs,d=t.neighborNum-1;l<o;){for(var h=c[1+Math.floor(Math.random()*d)],f=0;(a[r+"-"+h]||a[h+"-"+r])&&(h=Math.floor(Math.random()*e),!(++f>2*e)););if(f<2*e&&(a[r+"-"+h]={start:r,end:h,distance:i[r][h]},l++,++s>=n))return a;if(++u>2*e)break}l<o&&(o=(o+(o-l))/(e-r-1))})),a}(0,b,Math.min(100,b*(b-1)/2),D,x),R=l(O,I,t),L={graphs:R,nodeLabelProp:m,edgeLabelProp:y,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:o},B=(0,r.default)(L).slice(0,10),F=B.length,N=[];B.forEach((function(t,e){N[e]={},Object.keys(R).forEach((function(n){var r=R[n],i=u(r,t,m,y);N[e][n]=i}))}));var z=function(t,e,n){for(var r=1/0,i=0,o=function(e){var n=t[e],o=Object.keys(n).sort((function(t,e){return n[t]-n[e]})),a=[];o.forEach((function(t,e){a[e%10]||(a[e%10]={graphs:[],totalCount:0,aveCount:0}),a[e%10].graphs.push(t),a[e%10].totalCount+=n[t]}));var s=0,l=[];a.forEach((function(t){var e=t.totalCount/t.graphs.length;t.aveCount=e,l.push(e);var r=0,i=t.length;t.graphs.forEach((function(e,i){var o=n[e];t.graphs.forEach((function(t,e){i!==e&&(r+=Math.abs(o-n[t]))}))})),s+=r/=i*(i-1)/2})),s/=a.length;var u=0;l.forEach((function(t,e){l.forEach((function(n,r){e!==r&&(u+=Math.abs(t-n))})),u/=l.length*(l.length-1)/2}));var c=u-s;r<c&&(r=c,i=e)},a=0;a<e;a++)o(a);return{structure:n[i],structureCountMap:t[i]}}(N,F,B),j=z.structure,G=z.structureCountMap,U=e.nodes[0],$=U[m],V=M[$],W={},H={},Y={},X={},q={},K={};Object.keys(T).forEach((function(n,r){q[n]=[],o&&(K[n]=[]);var i=T[n],a={};i.forEach((function(t){var e=S[U.id+"-"+t.id];if(e&&q[n].push(e),a[U.id+"-"+t.id]={start:0,end:_[t.id].idx,distance:e},o){var r=S[t.id+"-"+U.id];r&&K[n].push(r)}})),q[n]=q[n].sort((function(t,e){return t-e})),o&&(K[n]=K[n].sort((function(t,e){return t-e}))),H=l(a,D,e,H);var s=[];if(Object.keys(a).forEach((function(t){if(Y[t])s.push(Y[t]);else{var e=H[t];Y[t]=u(e,j,m,y),s.push(Y[t])}})),s=s.sort((function(t,e){return e-t})),X[U.id+"-"+n]=s,n!==$)for(var c=function(e){var r=V[e],i=I[E[r.id].idx],o=i.nodeLabelCountMap[n],a=T[n].length;if(!o||o.count<a)return V.splice(e,1),"continue";for(var c=!1,d=0;d<a;d++)if(o.dists[d]>q[n][d]){c=!0;break}if(c)return V.splice(e,1),"continue";var h={};i.neighbors.forEach((function(t){var e=C[r.id+"-"+t.id];h[r.id+"-"+t.id]={start:E[r.id].idx,end:E[t.id].idx,distance:e}})),R=l(h,I,t,R);var f=[];Object.keys(h).forEach((function(t){if(G[t])f.push(G[t]);else{var e=R[t];G[t]=u(e,j,m,y),f.push(G[t])}})),f=f.sort((function(t,e){return e-t}));var p=!1;for(d=0;d<a;d++)if(f[d]<s[d]){p=!0;break}return p?(V.splice(e,1),"continue"):void 0},d=V.length-1;d>=0;d--)c(d)}));var Z=[];V.forEach((function(n){for(var r=E[n.id].idx,i=s(t.nodes,x[r],r,m,v).neighbors,a=!1,l=i.length-1;l>=0;l--){if(i.length+1<e.nodes.length)return void(a=!0);var u=i[l],c=u[m];if(T[c]&&T[c].length)if(q[c]&&q[c].length){var d=n.id+"-"+u.id,h=C[d],g=q[c].length-1;if(h>q[c][g])i.splice(l,1);else{if(o){var b=u.id+"-"+n.id,w=C[b];if(g=K[c].length-1,w>K[c][g]){i.splice(l,1);continue}}var S=G[d]?G[d]:f(t,n,u,E,h,I,j,m,y,G,R),k=U.id+"-"+c;if(S<X[k][X[k].length-1])i.splice(l,1);else{var M=p(W,c,_,T),A=M.minPatternNodeLabelDegree;M.minPatternNodeLabelInDegree,M.minPatternNodeLabelOutDegree,E[u.id].degree<A&&i.splice(l,1)}}}else i.splice(l,1);else i.splice(l,1)}a||Z.push({nodes:[n].concat(i)})}));var Q=(0,i.default)(e,U.id,!1).length,J={};o?(Object.keys(Q).forEach((function(t){var e=_[t].node[m];J[e]?J[e].push(Q[t]):J[e]=[Q[t]]})),Object.keys(J).forEach((function(t){J[t].sort((function(t,e){return t-e}))}))):J=q;for(var tt=function(n){var r=Z[n],a=r.nodes[0],s={},l={};r.nodes.forEach((function(t,e){l[t.id]={idx:e,node:t,degree:0,inDegree:0,outDegree:0};var n=t[m];s[n]?s[n]++:s[n]=1}));var u=[],c={};t.edges.forEach((function(t){l[t.source]&&l[t.target]&&(u.push(t),c[t[y]]?c[t[y]]++:c[t[y]]=1,l[t.source].degree++,l[t.target].degree++,l[t.source].outDegree++,l[t.target].inDegree++)}));for(var d=Object.keys(P).length,h=!1,f=0;f<d;f++){var g=Object.keys(P)[f];if(!c[g]||c[g]<P[g].length){h=!0;break}}if(h)return Z.splice(n,1),"continue";var v=u.length;if(v<e.edges.length)return Z.splice(n,1),"break";var b=!1,x=function(t){var e=u[t],n=e[y],r=P[n];if(!r||!r.length)return c[n]--,r&&c[n]<r.length?(b=!0,"break"):(u.splice(t,1),l[e.source].degree--,l[e.target].degree--,l[e.source].outDegree--,l[e.target].inDegree--,"continue");var i=l[e.source].node[m],a=l[e.target].node[m],s=!1;return r.forEach((function(t){var e=_[t.source].node,n=_[t.target].node;e[m]===i&&n[m]===a&&(s=!0),o||e[m]!==a||n[m]!==i||(s=!0)})),s?void 0:(c[n]--,r&&c[n]<r.length?(b=!0,"break"):(u.splice(t,1),l[e.source].degree--,l[e.target].degree--,l[e.source].outDegree--,l[e.target].inDegree--,"continue"))};for(f=v-1;f>=0;f--){if("break"===x(f))break}if(b)return Z.splice(n,1),"continue";r.edges=u;var w=(0,i.default)(r,r.nodes[0].id,!1).length;if(Object.keys(w).reverse().forEach((function(t){if(t!==r.nodes[0].id&&!b){if(w[t]===1/0){var e=l[t].node[m];if(s[e]--,s[e]<T[e].length)return void(b=!0);var n=r.nodes.indexOf(l[t].node);return r.nodes.splice(n,1),void(l[t]=void 0)}var i=E[t].node[m];if(!J[i]||!J[i].length||w[t]>J[i][J[i].length-1]){e=l[t].node[m];if(s[e]--,s[e]<T[e].length)return void(b=!0);n=r.nodes.indexOf(l[t].node);r.nodes.splice(n,1),l[t]=void 0}}})),b)return Z.splice(n,1),"continue";for(var C=!0,S=0;C&&!b;){if(C=!1,o?l[a.id].degree<_[U.id].degree||l[a.id].inDegree<_[U.id].inDegree||l[a.id].outDegree<_[U.id].outDegree:l[a.id].degree<_[U.id].degree){b=!0;break}if(s[a[m]]<T[a[m]].length){b=!0;break}for(var k=r.nodes.length-1;k>=0;k--){var M=r.nodes[k],A=l[M.id].degree,I=l[M.id].inDegree,D=l[M.id].outDegree,O=M[m],R=p(W,O,_,T),L=R.minPatternNodeLabelDegree,B=R.minPatternNodeLabelInDegree,F=R.minPatternNodeLabelOutDegree;if(o?A<L||I<B||D<F:A<L){if(s[M[m]]--,s[M[m]]<T[M[m]].length){b=!0;break}r.nodes.splice(k,1),l[M.id]=void 0,C=!0}}if(b||!C&&0!==S)break;for(var N=(v=u.length)-1;N>=0;N--){var z=u[N];if(!l[z.source]||!l[z.target]){u.splice(N,1);var j=z[y];if(c[j]--,l[z.source]&&(l[z.source].degree--,l[z.source].outDegree--),l[z.target]&&(l[z.target].degree--,l[z.target].inDegree--),P[j]&&c[j]<P[j].length){b=!0;break}C=!0}}S++}return b||b||r.nodes.length<e.nodes.length||u.length<e.edges.length?(Z.splice(n,1),"continue"):void 0},et=Z.length-1;et>=0;et--){if("break"===tt(et))break}var nt=Z.length,rt=function(t){var e=Z[t],n={};e.edges.forEach((function(t){var e=t.source+"-"+t.target+"-"+t.label;n[e]?n[e]++:n[e]=1}));for(var r=function(t){var e=Z[t],r={};e.edges.forEach((function(t){var e=t.source+"-"+t.target+"-"+t.label;r[e]?r[e]++:r[e]=1}));var i=!0;Object.keys(r).length!==Object.keys(n).length?i=!1:Object.keys(n).forEach((function(t){r[t]!==n[t]&&(i=!1)})),i&&Z.splice(t,1)},i=nt-1;i>t;i--)r(i);nt=Z.length};for(et=0;et<=nt-1;et++)rt(et);return Z}}};e.default=g}));Xm(my);var yy=qm((function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getAdjMatrix",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"breadthFirstSearch",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"connectedComponent",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"getDegree",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"getInDegree",{enumerable:!0,get:function(){return a.getInDegree}}),Object.defineProperty(e,"getOutDegree",{enumerable:!0,get:function(){return a.getOutDegree}}),Object.defineProperty(e,"detectCycle",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"depthFirstSearch",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"dijkstra",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"findAllPath",{enumerable:!0,get:function(){return sy.findAllPath}}),Object.defineProperty(e,"findShortestPath",{enumerable:!0,get:function(){return sy.findShortestPath}}),Object.defineProperty(e,"floydWarshall",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"labelPropagation",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"louvain",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"minimumSpanningTree",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"pageRank",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"GADDI",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"getNeighbors",{enumerable:!0,get:function(){return ty.getNeighbors}});var r=m(Zm),i=m(ey),o=m(ny),a=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var r=v(e);if(r&&r.has(t))return r.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}i.default=t,r&&r.set(t,i);return i}(ry),s=m(oy),l=m(iy),u=m(ay),c=m(ly),d=m(uy),h=m(cy),f=m(fy),p=m(py),g=m(my);function v(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(v=function(t){return t?n:e})(t)}function m(t){return t&&t.__esModule?t:{default:t}}}));Xm(yy);var by=qm((function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var r=i(e);if(r&&r.has(t))return r.get(t);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var l=a?Object.getOwnPropertyDescriptor(t,s):null;l&&(l.get||l.set)?Object.defineProperty(o,s,l):o[s]=t[s]}o.default=t,r&&r.set(t,o);return o}(yy);function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(i=function(t){return t?n:e})(t)}var o="undefined"!=typeof self?self:{};o.onmessage=function(t){var e=t.data,n=e._algorithmType,i=e.data;if(n)if("function"!=typeof r[n])o.postMessage({_algorithmType:Km.MESSAGE.FAILURE});else{var a=r[n].apply(r,i);o.postMessage({_algorithmType:Km.MESSAGE.SUCCESS,data:a})}};e.default=null}));Xm(by);var xy=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,r=(n=by)&&n.__esModule?n:{default:n};var i=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new Promise((function(n,i){var o=new r.default;o.postMessage({_algorithmType:t,data:e}),o.onmessage=function(t){var e=t.data,r=e.data,a=e._algorithmType;Km.MESSAGE.SUCCESS===a?n(r):i(),o.terminate()}}))}};e.default=i}));Xm(xy);var wy=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.GADDIAsync=e.getNeighborsAsync=e.pageRankAsync=e.minimumSpanningTreeAsync=e.louvainAsync=e.labelPropagationAsync=e.floydWarshallAsync=e.findShortestPathAsync=e.findAllPathAsync=e.dijkstraAsync=e.detectAllUndirectedCycleAsync=e.detectAllDirectedCycleAsync=e.detectAllCyclesAsync=e.detectCycleAsync=e.getOutDegreeAsync=e.getInDegreeAsync=e.getDegreeAsync=e.connectedComponentAsync=e.getAdjMatrixAsync=void 0;var n,r=(n=xy)&&n.__esModule?n:{default:n};e.getAdjMatrixAsync=function(t,e){return(0,r.default)(Km.ALGORITHM.getAdjMatrix).apply(void 0,[t,e])};e.connectedComponentAsync=function(t,e){return(0,r.default)(Km.ALGORITHM.connectedComponent).apply(void 0,[t,e])};e.getDegreeAsync=function(t){return(0,r.default)(Km.ALGORITHM.getDegree)(t)};e.getInDegreeAsync=function(t,e){return(0,r.default)(Km.ALGORITHM.getInDegree)(t,e)};e.getOutDegreeAsync=function(t,e){return(0,r.default)(Km.ALGORITHM.getOutDegree)(t,e)};e.detectCycleAsync=function(t){return(0,r.default)(Km.ALGORITHM.detectCycle)(t)};e.detectAllCyclesAsync=function(t){return(0,r.default)(Km.ALGORITHM.detectAllCycles)(t)};e.detectAllDirectedCycleAsync=function(t){return(0,r.default)(Km.ALGORITHM.detectAllDirectedCycle)(t)};e.detectAllUndirectedCycleAsync=function(t){return(0,r.default)(Km.ALGORITHM.detectAllUndirectedCycle)(t)};e.dijkstraAsync=function(t,e,n,i){return(0,r.default)(Km.ALGORITHM.dijkstra).apply(void 0,[t,e,n,i])};e.findAllPathAsync=function(t,e,n,i){return(0,r.default)(Km.ALGORITHM.findAllPath).apply(void 0,[t,e,n,i])};e.findShortestPathAsync=function(t,e,n,i,o){return(0,r.default)(Km.ALGORITHM.findShortestPath).apply(void 0,[t,e,n,i,o])};e.floydWarshallAsync=function(t,e){return(0,r.default)(Km.ALGORITHM.floydWarshall).apply(void 0,[t,e])};e.labelPropagationAsync=function(t,e,n,i){return void 0===i&&(i=1e3),(0,r.default)(Km.ALGORITHM.labelPropagation)(t,e,n,i)};e.louvainAsync=function(t,e,n,i){return(0,r.default)(Km.ALGORITHM.louvain)(t,e,n,i)};e.minimumSpanningTreeAsync=function(t,e,n){return(0,r.default)(Km.ALGORITHM.minimumSpanningTree).apply(void 0,[t,e,n])};e.pageRankAsync=function(t,e,n){return(0,r.default)(Km.ALGORITHM.pageRank).apply(void 0,[t,e,n])};e.getNeighborsAsync=function(t,e,n){return(0,r.default)(Km.ALGORITHM.getNeighbors).apply(void 0,[t,e,n])};e.GADDIAsync=function(t,e,n,i,o,a,s){return void 0===n&&(n=!1),void 0===a&&(a="cluster"),void 0===s&&(s="cluster"),(0,r.default)(Km.ALGORITHM.GADDI).apply(void 0,[t,e,n,i,o,a,s])}}));Xm(wy),wy.GADDIAsync,wy.getNeighborsAsync,wy.pageRankAsync,wy.minimumSpanningTreeAsync,wy.louvainAsync,wy.labelPropagationAsync,wy.floydWarshallAsync,wy.findShortestPathAsync,wy.findAllPathAsync,wy.dijkstraAsync,wy.detectAllUndirectedCycleAsync,wy.detectAllDirectedCycleAsync,wy.detectAllCyclesAsync,wy.detectCycleAsync,wy.getOutDegreeAsync,wy.getInDegreeAsync,wy.getDegreeAsync,wy.connectedComponentAsync,wy.getAdjMatrixAsync;var Cy=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getAdjMatrixAsync",{enumerable:!0,get:function(){return wy.getAdjMatrixAsync}}),Object.defineProperty(e,"connectedComponentAsync",{enumerable:!0,get:function(){return wy.connectedComponentAsync}}),Object.defineProperty(e,"getDegreeAsync",{enumerable:!0,get:function(){return wy.getDegreeAsync}}),Object.defineProperty(e,"getInDegreeAsync",{enumerable:!0,get:function(){return wy.getInDegreeAsync}}),Object.defineProperty(e,"getOutDegreeAsync",{enumerable:!0,get:function(){return wy.getOutDegreeAsync}}),Object.defineProperty(e,"detectCycleAsync",{enumerable:!0,get:function(){return wy.detectCycleAsync}}),Object.defineProperty(e,"detectAllCyclesAsync",{enumerable:!0,get:function(){return wy.detectAllCyclesAsync}}),Object.defineProperty(e,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return wy.detectAllDirectedCycleAsync}}),Object.defineProperty(e,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return wy.detectAllUndirectedCycleAsync}}),Object.defineProperty(e,"dijkstraAsync",{enumerable:!0,get:function(){return wy.dijkstraAsync}}),Object.defineProperty(e,"findAllPathAsync",{enumerable:!0,get:function(){return wy.findAllPathAsync}}),Object.defineProperty(e,"findShortestPathAsync",{enumerable:!0,get:function(){return wy.findShortestPathAsync}}),Object.defineProperty(e,"floydWarshallAsync",{enumerable:!0,get:function(){return wy.floydWarshallAsync}}),Object.defineProperty(e,"labelPropagationAsync",{enumerable:!0,get:function(){return wy.labelPropagationAsync}}),Object.defineProperty(e,"louvainAsync",{enumerable:!0,get:function(){return wy.louvainAsync}}),Object.defineProperty(e,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return wy.minimumSpanningTreeAsync}}),Object.defineProperty(e,"pageRankAsync",{enumerable:!0,get:function(){return wy.pageRankAsync}}),Object.defineProperty(e,"getNeighborsAsync",{enumerable:!0,get:function(){return wy.getNeighborsAsync}}),Object.defineProperty(e,"GADDIAsync",{enumerable:!0,get:function(){return wy.GADDIAsync}}),e.default=e.detectDirectedCycleAsync=void 0;var n=wy.detectCycleAsync;e.detectDirectedCycleAsync=n;var r={getAdjMatrixAsync:wy.getAdjMatrixAsync,connectedComponentAsync:wy.connectedComponentAsync,getDegreeAsync:wy.getDegreeAsync,getInDegreeAsync:wy.getInDegreeAsync,getOutDegreeAsync:wy.getOutDegreeAsync,detectCycleAsync:wy.detectCycleAsync,detectDirectedCycleAsync:n,detectAllCyclesAsync:wy.detectAllCyclesAsync,detectAllDirectedCycleAsync:wy.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:wy.detectAllUndirectedCycleAsync,dijkstraAsync:wy.dijkstraAsync,findAllPathAsync:wy.findAllPathAsync,findShortestPathAsync:wy.findShortestPathAsync,floydWarshallAsync:wy.floydWarshallAsync,labelPropagationAsync:wy.labelPropagationAsync,louvainAsync:wy.louvainAsync,minimumSpanningTreeAsync:wy.minimumSpanningTreeAsync,pageRankAsync:wy.pageRankAsync,getNeighborsAsync:wy.getNeighborsAsync,GADDIAsync:wy.GADDIAsync};e.default=r})),Sy=Xm(Cy),ky=Cy.detectDirectedCycleAsync,Ey=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Sy,__moduleExports:Cy,detectDirectedCycleAsync:ky});function My(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function Ay(t,e,n,r,i,o){return i>=t&&i<=t+n&&o>=e&&o<=e+r}function _y(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function Ty(t,e){return t[0]===e[0]&&t[1]===e[1]}var Py=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Iy=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Dy=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Oy=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Ry(t,e){bs(t.match(Oy),(function(t){var n=t.split(":");e.addColorStop(n[0],n[1])}))}function Ly(t,e,n){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return n;if(zs(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return function(t,e,n){var r,i,o=Py.exec(n),a=parseFloat(o[1])%360*(Math.PI/180),s=o[2],l=e.getBBox();a>=0&&a<.5*Math.PI?(r={x:l.minX,y:l.minY},i={x:l.maxX,y:l.maxY}):.5*Math.PI<=a&&a<Math.PI?(r={x:l.maxX,y:l.minY},i={x:l.minX,y:l.maxY}):Math.PI<=a&&a<1.5*Math.PI?(r={x:l.maxX,y:l.maxY},i={x:l.minX,y:l.minY}):(r={x:l.minX,y:l.maxY},i={x:l.maxX,y:l.minY});var u=Math.tan(a),c=u*u,d=(i.x-r.x+u*(i.y-r.y))/(c+1)+r.x,h=u*(i.x-r.x+u*(i.y-r.y))/(c+1)+r.y,f=t.createLinearGradient(r.x,r.y,d,h);return Ry(s,f),f}(t,e,n);if("r"===n[0])return function(t,e,n){var r=Iy.exec(n),i=parseFloat(r[1]),o=parseFloat(r[2]),a=parseFloat(r[3]),s=r[4];if(0===a){var l=s.match(Oy);return l[l.length-1].split(":")[1]}var u=e.getBBox(),c=u.maxX-u.minX,d=u.maxY-u.minY,h=Math.sqrt(c*c+d*d)/2,f=t.createRadialGradient(u.minX+c*i,u.minY+d*o,0,u.minX+c/2,u.minY+d/2,a*h);return Ry(s,f),f}(t,e,n);if("p"===n[0])return function(t,e,n){if(e.get("patternSource")&&e.get("patternSource")===n)return e.get("pattern");var r,i,o=Dy.exec(n),a=o[1],s=o[2];function l(){r=t.createPattern(i,a),e.set("pattern",r),e.set("patternSource",n)}switch(a){case"a":a="repeat";break;case"x":a="repeat-x";break;case"y":a="repeat-y";break;case"n":a="no-repeat";break;default:a="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),r}(t,e,n)}return n}return n instanceof CanvasPattern?n:void 0}function By(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Fy(t,e){return By(t)*By(e)?(t[0]*e[0]+t[1]*e[1])/(By(t)*By(e)):1}function Ny(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Fy(t,e))}function zy(t,e){var n=e[1],r=e[2],i=al(cl(e[3]),2*Math.PI),o=e[4],a=e[5],s=t[0],l=t[1],u=e[6],c=e[7],d=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,h=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,f=d*d/(n*n)+h*h/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(h*h)+r*r*(d*d),g=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(g*=-1),isNaN(g)&&(g=0);var v=r?g*n*h/r:0,m=n?g*-r*d/n:0,y=(s+u)/2+Math.cos(i)*v-Math.sin(i)*m,b=(l+c)/2+Math.sin(i)*v+Math.cos(i)*m,x=[(d-v)/n,(h-m)/r],w=[(-1*d-v)/n,(-1*h-m)/r],C=Ny([1,0],x),S=Ny(x,w);return Fy(x,w)<=-1&&(S=Math.PI),Fy(x,w)>=1&&(S=0),0===a&&S>0&&(S-=2*Math.PI),1===a&&S<0&&(S+=2*Math.PI),{cx:y,cy:b,rx:Ty(t,[u,c])?0:n,ry:Ty(t,[u,c])?0:r,startAngle:C,endAngle:C+S,xRotation:i,arcFlag:o,sweepFlag:a}}var jy=Math.sin,Gy=Math.cos,Uy=Math.atan2,$y=Math.PI;function Vy(t,e,n,r,i,o,a){var s=e.stroke,l=e.lineWidth,u=Uy(r-o,n-i),c=new Eb({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Gy($y/6)+","+10*jy($y/6)+" L0,0 L"+10*Gy($y/6)+",-"+10*jy($y/6),stroke:s,lineWidth:l}});c.translate(i,o),c.rotateAtPoint(i,o,u),t.set(a?"startArrowShape":"endArrowShape",c)}function Wy(t,e,n,r,i,o,a){var s=e.startArrow,l=e.endArrow,u=e.stroke,c=e.lineWidth,d=a?s:l,h=d.d,f=d.fill,p=d.stroke,g=d.lineWidth,v=Qa(d,["d","fill","stroke","lineWidth"]),m=Uy(r-o,n-i);h&&(i-=Gy(m)*h,o-=jy(m)*h);var y=new Eb({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:Za(Za({},v),{stroke:p||u,lineWidth:g||c,fill:f})});y.translate(i,o),y.rotateAtPoint(i,o,m),t.set(a?"startArrowShape":"endArrowShape",y)}function Hy(t,e,n,r,i){var o=Uy(r-e,n-t);return{dx:Gy(o)*i,dy:jy(o)*i}}function Yy(t,e,n,r,i,o){"object"==typeof e.startArrow?Wy(t,e,n,r,i,o,!0):e.startArrow?Vy(t,e,n,r,i,o,!0):t.set("startArrowShape",null)}function Xy(t,e,n,r,i,o){"object"==typeof e.endArrow?Wy(t,e,n,r,i,o,!1):e.endArrow?Vy(t,e,n,r,i,o,!1):t.set("startArrowShape",null)}var qy={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Ky(t,e){var n=e.attr();for(var r in n){var i=n[r],o=qy[r]?qy[r]:r;"matrix"===o&&i?t.transform(i[0],i[1],i[3],i[4],i[6],i[7]):"lineDash"===o&&t.setLineDash?ms(i)&&t.setLineDash(i):("strokeStyle"===o||"fillStyle"===o?i=Ly(t,e,i):"globalAlpha"===o&&(i*=t.globalAlpha),t[o]=i)}}function Zy(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];i.cfg.visible?i.draw(t,n):i.skipDraw()}}function Qy(t,e,n){var r=t.get("refreshElements");bs(r,(function(e){if(e!==t)for(var n=e.cfg.parent;n&&n!==t&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent})),r[0]===t?eb(e):Jy(e,n)}function Jy(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&eb(r.cfg.children);else if(r.cfg.refresh)r.isGroup()&&Jy(r.cfg.children,e);else{var i=nb(r,e);r.cfg.refresh=i,i&&r.isGroup()&&Jy(r.cfg.children,e)}}}function tb(t){for(var e=0;e<t.length;e++){var n=t[e];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&tb(n.cfg.children)}}function eb(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.cfg.refresh=!0,r.isGroup()&&eb(r.get("children"))}}function nb(t,e){var n=t.cfg.cacheCanvasBBox;return t.cfg.isInView&&n&&_y(n,e)}function rb(t,e,n,r){var i=n.path,o=n.startArrow,a=n.endArrow;if(i){var s=[0,0],l=[0,0],u={dx:0,dy:0};e.beginPath();for(var c=0;c<i.length;c++){var d=i[c],h=d[0];if(0===c&&o&&o.d)u=Hy((f=t.getStartTangent())[0][0],f[0][1],f[1][0],f[1][1],o.d);else if(c===i.length-2&&"Z"===i[c+1][0]&&a&&a.d){if("Z"===i[c+1][0])u=Hy((f=t.getEndTangent())[0][0],f[0][1],f[1][0],f[1][1],a.d)}else if(c===i.length-1&&a&&a.d){var f;if("Z"!==i[0])u=Hy((f=t.getEndTangent())[0][0],f[0][1],f[1][0],f[1][1],a.d)}var p=u.dx,g=u.dy;switch(h){case"M":e.moveTo(d[1]-p,d[2]-g),l=[d[1],d[2]];break;case"L":e.lineTo(d[1]-p,d[2]-g);break;case"Q":e.quadraticCurveTo(d[1],d[2],d[3]-p,d[4]-g);break;case"C":e.bezierCurveTo(d[1],d[2],d[3],d[4],d[5]-p,d[6]-g);break;case"A":var v=void 0;r?(v=r[c])||(v=zy(s,d),r[c]=v):v=zy(s,d);var m=v.cx,y=v.cy,b=v.rx,x=v.ry,w=v.startAngle,C=v.endAngle,S=v.xRotation,k=v.sweepFlag;if(e.ellipse)e.ellipse(m,y,b,x,S,w,C,1-k);else{var E=b>x?b:x,M=b>x?1:b/x,A=b>x?x/b:1;e.translate(m,y),e.rotate(S),e.scale(M,A),e.arc(0,0,E,w,C,1-k),e.scale(1/M,1/A),e.rotate(-S),e.translate(-m,-y)}break;case"Z":e.closePath()}if("Z"===h)s=l;else{var _=d.length;s=[d[_-2],d[_-1]]}}}}function ib(t,e){var n=t.get("canvas");n&&("remove"===e&&(t._cacheCanvasBBox=t.get("cacheCanvasBBox")),t.get("hasChanged")||(t.set("hasChanged",!0),t.cfg.parent&&t.cfg.parent.get("hasChanged")||(n.refreshElement(t,e,n),n.get("autoDraw")&&n.draw())))}function ob(t){var e,n,r;if(t.destroyed)e=t._cacheCanvasBBox;else{var i=t.get("cacheCanvasBBox"),o=i&&!(!i.width||!i.height),a=t.getCanvasBBox(),s=a&&!(!a.width||!a.height);o&&s?(r=a,e=(n=i)&&r?{minX:Math.min(n.minX,r.minX),minY:Math.min(n.minY,r.minY),maxX:Math.max(n.maxX,r.maxX),maxY:Math.max(n.maxY,r.maxY)}:n||r):o?e=i:s&&(e=a)}return e}var ab=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Ka(n,e),n.prototype.onCanvasChange=function(t){ib(this,t)},n.prototype.getShapeBase=function(){return t},n.prototype.getGroupBase=function(){return n},n.prototype._applyClip=function(t,e){e&&(t.save(),Ky(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},n.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,e=[],n=[];bs(t,(function(t){var r=t.cfg.cacheCanvasBBox;r&&t.cfg.isInView&&(e.push(r.minX,r.maxX),n.push(r.minY,r.maxY))}));var r=null;if(e.length){var i=Ps(e),o=Ts(e),a=Ps(n),s=Ts(n);r={minX:i,minY:a,x:i,y:a,maxX:o,maxY:s,width:o-i,height:s-a};var l=this.cfg.canvas;if(l){var u=l.getViewRange();this.set("isInView",_y(r,u))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",r)},n.prototype.draw=function(t,e){var n=this.cfg.children,r=!e||this.cfg.refresh;n.length&&r&&(t.save(),Ky(t,this),this._applyClip(t,this.getClip()),Zy(t,n,e),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},n.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},n}(bg),sb=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Ka(n,e),n.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Za(Za({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},n.prototype.getShapeBase=function(){return t},n.prototype.getGroupBase=function(){return ab},n.prototype.onCanvasChange=function(t){ib(this,t)},n.prototype.calculateBBox=function(){var t=this.get("type"),e=this.getHitLineWidth(),n=Sg(t)(this),r=e/2,i=n.x-r,o=n.y-r,a=n.x+n.width+r,s=n.y+n.height+r;return{x:i,minX:i,y:o,minY:o,width:n.width+e,height:n.height+e,maxX:a,maxY:s}},n.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},n.prototype.isStroke=function(){return!!this.attrs.stroke},n.prototype._applyClip=function(t,e){e&&(t.save(),Ky(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},n.prototype.draw=function(t,e){var n=this.cfg.clipShape;if(e){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!_y(e,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}t.save(),Ky(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},n.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},n.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var e=this.getCanvasBBox(),n=_y(e,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",e):this.set("cacheCanvasBBox",null)}},n.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},n.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},n.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},n.prototype.fill=function(t){t.fill()},n.prototype.stroke=function(t){t.stroke()},n.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity,o=e.fillOpacity;this.isFill()&&(vs(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=r)),this.isStroke()&&n>0&&(vs(i)||1===i||(t.globalAlpha=i),this.stroke(t)),this.afterDrawPath(t)},n.prototype.createPath=function(t){},n.prototype.afterDrawPath=function(t){},n.prototype.isInShape=function(t,e){var n=this.isStroke(),r=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(t,e,n,r,i)},n.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!1},n.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},n}(xg),lb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Za(Za({},e),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=o.x,s=o.y,l=o.r,u=i/2,c=My(a,s,t,e);return r&&n?c<=l+u:r?c<=l:!!n&&(c>=l-u&&c<=l+u)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.r;t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1),t.closePath()},e}(sb);function ub(t,e,n,r){return t/(n*n)+e/(r*r)}var cb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Za(Za({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=i/2,s=o.x,l=o.y,u=o.rx,c=o.ry,d=(t-s)*(t-s),h=(e-l)*(e-l);return r&&n?ub(d,h,u+a,c+a)<=1:r?ub(d,h,u,c)<=1:!!n&&(ub(d,h,u-a,c-a)>=1&&ub(d,h,u+a,c+a)<=1)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.rx,o=e.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,r,i,o,0,0,2*Math.PI,!1);else{var a=i>o?i:o,s=i>o?1:i/o,l=i>o?o/i:1;t.save(),t.translate(n,r),t.scale(s,l),t.arc(0,0,a,0,2*Math.PI),t.restore(),t.closePath()}},e}(sb);function db(t){return t instanceof HTMLElement&&zs(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()}var hb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Za(Za({},e),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var e=this,n=this.attrs;if(zs(t)){var r=new Image;r.onload=function(){if(e.destroyed)return!1;e.attr("img",r),e.set("loading",!1),e._afterLoading();var t=e.get("callback");t&&t.call(e)},r.crossOrigin="Anonymous",r.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):db(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"img"===e&&this._setImage(n)},e.prototype.createPath=function(t){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",t);var e=this.attr(),n=e.x,r=e.y,i=e.width,o=e.height,a=e.sx,s=e.sy,l=e.swidth,u=e.sheight,c=e.img;(c instanceof Image||db(c))&&(vs(a)||vs(s)||vs(l)||vs(u)?t.drawImage(c,n,r,i,o):t.drawImage(c,a,s,l,u,n,r,i,o))},e}(sb);function fb(t,e,n,r,i,o,a){var s=Math.min(t,n),l=Math.max(t,n),u=Math.min(e,r),c=Math.max(e,r),d=i/2;return o>=s-d&&o<=l+d&&a>=u-d&&a<=c+d&&Dg.pointToLine(t,e,n,r,o,a)<=i/2}var pb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Za(Za({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2,o=t.startArrow,a=t.endArrow;o&&Yy(this,t,r,i,e,n),a&&Xy(this,t,e,n,r,i)},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){if(!n||!i)return!1;var o=this.attr();return fb(o.x1,o.y1,o.x2,o.y2,i,t,e)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=e.startArrow,s=e.endArrow,l={dx:0,dy:0},u={dx:0,dy:0};a&&a.d&&(l=Hy(n,r,i,o,e.startArrow.d)),s&&s.d&&(u=Hy(n,r,i,o,e.endArrow.d)),t.beginPath(),t.moveTo(n+l.dx,r+l.dy),t.lineTo(i-u.dx,o-u.dy)},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2;return Dg.length(e,n,r,i)},e.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2;return Dg.pointAt(n,r,i,o,t)},e}(sb),gb={circle:function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},"triangle-down":function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}},vb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),-1!==["symbol","x","y","r","radius"].indexOf(e)&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return vs(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t,n,r=this.attr(),i=r.x,o=r.y,a=r.symbol||"circle",s=this._getR(r);if(gs(a))n=dv(n=(t=a)(i,o,s));else{if(!(t=e.Symbols[a]))return console.warn(a+" marker is not supported."),null;n=t(i,o,s)}return n},e.prototype.createPath=function(t){rb(this,t,{path:this._getPath()},this.get("paramsCache"))},e.Symbols=gb,e}(sb);function mb(t,e,n){var r=Jg();return t.createPath(r),r.isPointInPath(e,n)}function yb(t){return Math.abs(t)<1e-6?0:t<0?-1:1}function bb(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function xb(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=t[o],s=t[(o+1)%i];if(bb(a,s,[e,n]))return!0;yb(a[1]-n)>0!=yb(s[1]-n)>0&&yb(e-(n-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(r=!r)}return r}function wb(t,e,n,r,i,o,a,s){var l=(Math.atan2(s-e,a-t)+2*Math.PI)%(2*Math.PI);if(l<r||l>i)return!1;var u={x:t+n*Math.cos(l),y:e+n*Math.sin(l)};return My(u.x,u.y,a,s)<=o/2}var Cb=yc;var Sb=Za({hasArc:function(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r][0];if("C"===i||"A"===i||"Q"===i){e=!0;break}}return e},extractPolygons:function(t){for(var e=t.length,n=[],r=[],i=[],o=0;o<e;o++){var a=t[o],s=a[0];"M"===s?(i.length&&(r.push(i),i=[]),i.push([a[1],a[2]])):"Z"===s?i.length&&(n.push(i),i=[]):i.push([a[1],a[2]])}return i.length>0&&r.push(i),{polygons:n,polylines:r}},isPointInStroke:function(t,e,n,r,i){for(var o=!1,a=e/2,s=0;s<t.length;s++){var l=t[s],u=l.currentPoint,c=l.params,d=l.prePoint,h=l.box;if(!h||Ay(h.x-a,h.y-a,h.width+e,h.height+e,n,r)){switch(l.command){case"L":case"Z":o=fb(d[0],d[1],u[0],u[1],e,n,r);break;case"Q":o=zg.pointDistance(d[0],d[1],c[1],c[2],c[3],c[4],n,r)<=e/2;break;case"C":o=Wg.pointDistance(d[0],d[1],c[1],c[2],c[3],c[4],c[5],c[6],n,r,i)<=e/2;break;case"A":var f=l.arcParams,p=f.cx,g=f.cy,v=f.rx,m=f.ry,y=f.startAngle,b=f.endAngle,x=f.xRotation,w=[n,r,1],C=v>m?v:m;ju(w,w,Cb(null,[["t",-p,-g],["r",-x],["s",1/(v>m?1:v/m),1/(v>m?m/v:1)]])),o=wb(0,0,C,y,b,e,w[0],w[1])}if(o)break}}return o}},ef);function kb(t,e,n){for(var r=!1,i=0;i<t.length;i++){if(r=xb(t[i],e,n))break}return r}var Eb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Za(Za({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"path"===e&&this._setPathArr(n),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=dv(t);var e=Sb.hasArc(t);this.set("hasArc",e),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=yv(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t,e=this.attr(),n=e.startArrow,r=e.endArrow;n&&Yy(this,e,(t=this.getStartTangent())[0][0],t[0][1],t[1][0],t[1][1]);r&&Xy(this,e,(t=this.getEndTangent())[0][0],t[0][1],t[1][0],t[1][1])},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.getSegments(),a=this.get("hasArc"),s=!1;if(n){var l=this.getTotalLength();s=Sb.isPointInStroke(o,i,t,e,l)}if(!s&&r)if(a)s=mb(this,t,e);else{var u=this.attr("path"),c=Sb.extractPolygons(u);s=kb(c.polygons,t,e)||kb(c.polylines,t,e)}return s},e.prototype.createPath=function(t){rb(this,t,this.attr(),this.get("paramsCache"))},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return vs(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var e,n,r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var i=this.get("curve");if(!r||0===r.length)return i?{x:i[0][1],y:i[0][2]}:null;bs(r,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)}));var o=i[n];if(vs(o)||vs(n))return null;var a=o.length,s=i[n+1];return Wg.pointAt(o[a-2],o[a-1],s[1],s[2],s[3],s[4],s[5],s[6],e)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",Sb.pathToCurve(t))},e.prototype._setTcache=function(){var t,e,n,r,i=0,o=0,a=[],s=this.get("curve");s&&(bs(s,(function(t,e){n=s[e+1],r=t.length,n&&(i+=Wg.length(t[r-2],t[r-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)})),this.set("totalLength",i),0!==i?(bs(s,(function(l,u){n=s[u+1],r=l.length,n&&((t=[])[0]=o/i,e=Wg.length(l[r-2],l[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),o+=e||0,t[1]=o/i,a.push(t))})),this.set("tCache",a)):this.set("tCache",[]))},e.prototype.getStartTangent=function(){var t,e=this.getSegments();if(e.length>1){var n=e[0].currentPoint,r=e[1].currentPoint,i=e[1].startTangent;t=[],i?(t.push([n[0]-i[0],n[1]-i[1]]),t.push([n[0],n[1]])):(t.push([r[0],r[1]]),t.push([n[0],n[1]]))}return t},e.prototype.getEndTangent=function(){var t,e=this.getSegments(),n=e.length;if(n>1){var r=e[n-2].currentPoint,i=e[n-1].currentPoint,o=e[n-1].endTangent;t=[],o?(t.push([i[0]-o[0],i[1]-o[1]]),t.push([i[0],i[1]])):(t.push([r[0],r[1]]),t.push([i[0],i[1]]))}return t},e}(sb);function Mb(t,e,n,r,i){var o=t.length;if(o<2)return!1;for(var a=0;a<o-1;a++){if(fb(t[a][0],t[a][1],t[a+1][0],t[a+1][1],e,n,r))return!0}if(i){var s=t[0],l=t[o-1];if(fb(s[0],s[1],l[0],l[1],e,n,r))return!0}return!1}var Ab=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr().points,a=!1;return n&&(a=Mb(o,i,t,e,!0)),!a&&r&&(a=xb(o,t,e)),a},e.prototype.createPath=function(t){var e=this.attr().points;if(!(e.length<2)){t.beginPath();for(var n=0;n<e.length;n++){var r=e[n];0===n?t.moveTo(r[0],r[1]):t.lineTo(r[0],r[1])}t.closePath()}},e}(sb),_b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Za(Za({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow(),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),e=this.attrs,n=e.points,r=e.startArrow,i=e.endArrow,o=n.length,a=n[0][0],s=n[0][1],l=n[o-1][0],u=n[o-1][1];r&&Yy(this,t,n[1][0],n[1][1],a,s),i&&Xy(this,t,n[o-2][0],n[o-2][1],l,u)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!(!n||!i)&&Mb(this.attr().points,i,t,e,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var e=this.attr(),n=e.points,r=e.startArrow,i=e.endArrow,o=n.length;if(!(n.length<2)){var a,s=n[0][0],l=n[0][1],u=n[o-1][0],c=n[o-1][1];if(r&&r.d)s+=(a=Hy(s,l,n[1][0],n[1][1],r.d)).dx,l+=a.dy;if(i&&i.d)u-=(a=Hy(n[o-2][0],n[o-2][1],u,c,i.d)).dx,c-=a.dy;t.beginPath(),t.moveTo(s,l);for(var d=0;d<o-1;d++){var h=n[d];t.lineTo(h[0],h[1])}t.lineTo(u,c)}},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return vs(e)?(this.set("totalLength",qg(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),bs(i,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)})),Dg.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var n,r,i=0,o=[];bs(t,(function(a,s){t[s+1]&&((n=[])[0]=i/e,r=Dg.length(a[0],a[1],t[s+1][0],t[s+1][1]),i+=r,n[1]=i/e,o.push(n))})),this.set("tCache",o)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(sb);var Tb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Za(Za({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=o.x,s=o.y,l=o.width,u=o.height,c=o.radius;if(c){var d=!1;return n&&(d=function(t,e,n,r,i,o,a,s){return fb(t+i,e,t+n-i,e,o,a,s)||fb(t+n,e+i,t+n,e+r-i,o,a,s)||fb(t+n-i,e+r,t+i,e+r,o,a,s)||fb(t,e+r-i,t,e+i,o,a,s)||wb(t+n-i,e+i,i,1.5*Math.PI,2*Math.PI,o,a,s)||wb(t+n-i,e+r-i,i,0,.5*Math.PI,o,a,s)||wb(t+i,e+r-i,i,.5*Math.PI,Math.PI,o,a,s)||wb(t+i,e+i,i,Math.PI,1.5*Math.PI,o,a,s)}(a,s,l,u,c,i,t,e)),!d&&r&&(d=mb(this,t,e)),d}var h=i/2;return r&&n?Ay(a-h,s-h,l+h,u+h,t,e):r?Ay(a,s,l,u,t,e):n?function(t,e,n,r,i,o,a){var s=i/2;return Ay(t-s,e-s,n,i,o,a)||Ay(t+n-s,e-s,i,r,o,a)||Ay(t+s,e+r-s,n,i,o,a)||Ay(t-s,e+s,i,r,o,a)}(a,s,l,u,i,t,e):void 0},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.width,o=e.height,a=e.radius;if(t.beginPath(),0===a)t.rect(n,r,i,o);else{var s=function(t){var e=0,n=0,r=0,i=0;return ms(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,[e,n,r,i]}(a),l=s[0],u=s[1],c=s[2],d=s[3];t.moveTo(n+l,r),t.lineTo(n+i-u,r),0!==u&&t.arc(n+i-u,r+u,u,-Math.PI/2,0),t.lineTo(n+i,r+o-c),0!==c&&t.arc(n+i-c,r+o-c,c,0,Math.PI/2),t.lineTo(n+d,r+o),0!==d&&t.arc(n+d,r+o-d,d,Math.PI/2,Math.PI),t.lineTo(n,r+l),0!==l&&t.arc(n+l,r+l,l,Math.PI,1.5*Math.PI),t.closePath()}},e}(sb),Pb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Za(Za({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=ev(t)},e.prototype._setText=function(t){var e=null;zs(t)&&-1!==t.indexOf("\n")&&(e=t.split("\n")),this.set("textArr",e)},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),e.startsWith("font")&&this._assembleFont(),"text"===e&&this._setText(n)},e.prototype._getSpaceingY=function(){var t=this.attrs,e=t.lineHeight,n=1*t.fontSize;return e?e-n:.14*n},e.prototype._drawTextArr=function(t,e,n){var r,i=this.attrs,o=i.textBaseline,a=i.x,s=i.y,l=1*i.fontSize,u=this._getSpaceingY(),c=tv(i.text,i.fontSize,i.lineHeight);bs(e,(function(e,i){r=s+i*(u+l)-c+l,"middle"===o&&(r+=c-l-(c-l)/2),"top"===o&&(r+=c-l),vs(e)||(n?t.fillText(e,a,r):t.strokeText(e,a,r))}))},e.prototype._drawText=function(t,e){var n=this.attr(),r=n.x,i=n.y,o=this.get("textArr");if(o)this._drawTextArr(t,o,e);else{var a=n.text;vs(a)||(e?t.fillText(a,r,i):t.strokeText(a,r,i))}},e.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity,o=e.fillOpacity;this.isStroke()&&n>0&&(vs(i)||1===i||(t.globalAlpha=r),this.stroke(t)),this.isFill()&&(vs(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=r)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(sb);function Ib(t,e,n){var r,i,o=t.getTotalMatrix();if(o){var a=(r=[e,n,1],(i=o)?xf(wf(i),r):r);return[a[0],a[1]]}return[e,n]}function Db(t,e,n){if(t.isCanvas&&t.isCanvas())return!0;if(!sf(t)||!1===t.cfg.isInView)return!1;if(t.cfg.clipShape){var r=Ib(t,e,n),i=r[0],o=r[1];if(t.isClipped(i,o))return!1}var a=t.cfg.cacheCanvasBBox||t.getCanvasBBox();return e>=a.minX&&e<=a.maxX&&n>=a.minY&&n<=a.maxY}function Ob(t,e,n){if(!Db(t,e,n))return null;for(var r=null,i=t.getChildren(),o=i.length-1;o>=0;o--){var a=i[o];if(a.isGroup())r=Ob(a,e,n);else if(Db(a,e,n)){var s=a,l=Ib(a,e,n),u=l[0],c=l[1];s.isInShape(u,c)&&(r=a)}if(r)break}return r}var Rb=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Ka(n,e),n.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},n.prototype.onCanvasChange=function(t){"attr"!==t&&"sort"!==t&&"changeSize"!==t||(this.set("refreshElements",[this]),this.draw())},n.prototype.getShapeBase=function(){return t},n.prototype.getGroupBase=function(){return ab},n.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return t>=1?Math.ceil(t):1},n.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},n.prototype.createDom=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return this.set("context",e),t},n.prototype.setDOMSize=function(t,n){e.prototype.setDOMSize.call(this,t,n);var r=this.get("context"),i=this.get("el"),o=this.getPixelRatio();i.width=o*t,i.height=o*n,o>1&&r.scale(o,o)},n.prototype.clear=function(){e.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),n=this.get("el");t.clearRect(0,0,n.width,n.height)},n.prototype.getShape=function(t,n){return this.get("quickHit")?Ob(this,t,n):e.prototype.getShape.call(this,t,n,null)},n.prototype._getRefreshRegion=function(){var t,e=this.get("refreshElements"),n=this.getViewRange();e.length&&e[0]===this?t=n:(t=function(t){if(!t.length)return null;var e=[],n=[],r=[],i=[];return bs(t,(function(t){var o=ob(t);o&&(e.push(o.minX),n.push(o.minY),r.push(o.maxX),i.push(o.maxY))})),{minX:Ps(e),minY:Ps(n),maxX:Ts(r),maxY:Ts(i)}}(e))&&(t.minX=Math.floor(t.minX),t.minY=Math.floor(t.minY),t.maxX=Math.ceil(t.maxX),t.maxY=Math.ceil(t.maxY),t.maxY+=1,this.get("clipView")&&(t=function(t,e){return t&&e&&_y(t,e)?{minX:Math.max(t.minX,e.minX),minY:Math.max(t.minY,e.minY),maxX:Math.min(t.maxX,e.maxX),maxY:Math.min(t.maxY,e.maxY)}:null}(t,n)));return t},n.prototype.refreshElement=function(t){this.get("refreshElements").push(t)},n.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&(Al(t),this.set("drawFrame",null),this.set("refreshElements",[]))},n.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},n.prototype._drawAll=function(){var t=this.get("context"),e=this.get("el"),n=this.getChildren();t.clearRect(0,0,e.width,e.height),Ky(t,this),Zy(t,n),this.set("refreshElements",[])},n.prototype._drawRegion=function(){var t=this.get("context"),e=this.get("refreshElements"),n=this.getChildren(),r=this._getRefreshRegion();r?(t.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.save(),t.beginPath(),t.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.clip(),Ky(t,this),Qy(this,n,r),Zy(t,n,r),t.restore()):e.length&&tb(e),bs(e,(function(t){t.get("hasChanged")&&t.set("hasChanged",!1)})),this.set("refreshElements",[])},n.prototype._startDraw=function(){var t=this,e=this.get("drawFrame");e||(e=Ml((function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)})),this.set("drawFrame",e))},n.prototype.skipDraw=function(){},n.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},n}(yg),Lb=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Shape:t,version:"0.5.12",Canvas:Rb,Group:ab,getArcParams:zy,Event:nf,Base:lf,AbstractCanvas:yg,AbstractGroup:bg,AbstractShape:xg,getBBoxMethod:Sg,getTextHeight:tv,assembleFont:ev,isAllowCapture:sf,multiplyVec2:xf,invert:wf,getOffScreenContext:Jg,PathUtil:ef}),Bb={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Fb={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function Nb(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function zb(t){var e=Bb[t.type],n=t.getParent();if(!e)throw new Error("the type "+t.type+" is not supported by svg");var r=Nb(e);if(t.get("id")&&(r.id=t.get("id")),t.set("el",r),t.set("attrs",{}),n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(r)}return r}function jb(t,e){var n=t.get("el"),r=Xl(n.children).sort(e),i=document.createDocumentFragment();r.forEach((function(t){i.appendChild(t)})),n.appendChild(i)}function Gb(t){var e=t.attr().matrix;if(e){for(var n=t.cfg.el,r=[],i=0;i<9;i+=3)r.push(e[i]+","+e[i+1]);-1===(r=r.join(",")).indexOf("NaN")?n.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function Ub(t,e){var n=t.getClip(),r=t.get("el");if(n){if(n&&!r.hasAttribute("clip-path")){zb(n),n.createPath(e);var i=e.addClip(n);r.setAttribute("clip-path","url(#"+i+")")}}else r.removeAttribute("clip-path")}function $b(t,e){e.forEach((function(e){e.draw(t)}))}function Vb(t,e){var n=t.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context"),i=t.getParent(),o=i?i.getChildren():[n],a=t.get("el");if("remove"===e)if(t.get("isClipShape")){var s=a&&a.parentNode,l=s&&s.parentNode;s&&l&&l.removeChild(s)}else a&&a.parentNode&&a.parentNode.removeChild(a);else if("show"===e)a.setAttribute("visibility","visible");else if("hide"===e)a.setAttribute("visibility","hidden");else if("zIndex"===e)!function(t,e){var n=t.parentNode,r=Array.from(n.childNodes).filter((function(t){return 1===t.nodeType&&"defs"!==t.nodeName.toLowerCase()})),i=r[e],o=r.indexOf(t);if(i){if(o>e)n.insertBefore(t,i);else if(o<e){var a=r[e+1];a?n.insertBefore(t,a):n.appendChild(t)}}else n.appendChild(t)}(a,o.indexOf(t));else if("sort"===e){var u=t.get("children");u&&u.length&&jb(t,(function(t,e){return u.indexOf(t)-u.indexOf(e)?1:0}))}else"clear"===e?a&&(a.innerHTML=""):"matrix"===e?Gb(t):"clip"===e?Ub(t,r):"attr"===e||"add"===e&&t.draw(r)}}var Wb=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Ka(n,t),n.prototype.isEntityGroup=function(){return!0},n.prototype.createDom=function(){var t=Nb("g");this.set("el",t);var e=this.getParent();if(e){var n=e.get("el");n||(n=e.createDom(),e.set("el",n)),n.appendChild(t)}return t},n.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.createPath(r,e)}},n.prototype.onCanvasChange=function(t){Vb(this,t)},n.prototype.getShapeBase=function(){return e},n.prototype.getGroupBase=function(){return n},n.prototype.draw=function(t){var e=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),Ub(this,t),this.createPath(t),e.length&&$b(t,e))},n.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");bs(e||n,(function(t,e){Fb[e]&&r.setAttribute(Fb[e],t)})),Gb(this)},n}(bg),Hb=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="svg",e.canFill=!1,e.canStroke=!1,e}return Ka(n,t),n.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Za(Za({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},n.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.draw(r,e)}},n.prototype.getShapeBase=function(){return e},n.prototype.getGroupBase=function(){return Wb},n.prototype.onCanvasChange=function(t){Vb(this,t)},n.prototype.calculateBBox=function(){var t=this.get("el"),e=null;if(t)e=t.getBBox();else{var n=Sg(this.get("type"));n&&(e=n(this))}if(e){var r=e.x,i=e.y,o=e.width,a=e.height,s=this.getHitLineWidth(),l=s/2,u=r-l,c=i-l;return{x:u,y:c,minX:u,minY:c,maxX:r+o+l,maxY:i+a+l,width:o+s,height:a+s}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},n.prototype.isFill=function(){var t=this.attr(),e=t.fill,n=t.fillStyle;return(e||n||this.isClipShape())&&this.canFill},n.prototype.isStroke=function(){var t=this.attr(),e=t.stroke,n=t.strokeStyle;return(e||n)&&this.canStroke},n.prototype.draw=function(t,e){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||zb(this),Ub(this,t),this.createPath(t,e),this.shadow(t,e),this.strokeAndFill(t,e),this.transform(e))},n.prototype.createPath=function(t,e){},n.prototype.strokeAndFill=function(t,e){var n=e||this.attr(),r=n.fill,i=n.fillStyle,o=n.stroke,a=n.strokeStyle,s=n.fillOpacity,l=n.strokeOpacity,u=n.lineWidth,c=this.get("el");this.canFill&&(e?"fill"in n?this._setColor(t,"fill",r):"fillStyle"in n&&this._setColor(t,"fill",i):this._setColor(t,"fill",r||i),s&&c.setAttribute(Fb.fillOpacity,s)),this.canStroke&&u>0&&(e?"stroke"in n?this._setColor(t,"stroke",o):"strokeStyle"in n&&this._setColor(t,"stroke",a):this._setColor(t,"stroke",o||a),l&&c.setAttribute(Fb.strokeOpacity,l),u&&c.setAttribute(Fb.lineWidth,u))},n.prototype._setColor=function(t,e,n){var r=this.get("el");if(n)if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n))(i=t.find("gradient",n))||(i=t.addGradient(n)),r.setAttribute(Fb[e],"url(#"+i+")");else if(/^[p,P]{1}[\s]*\(/.test(n)){var i;(i=t.find("pattern",n))||(i=t.addPattern(n)),r.setAttribute(Fb[e],"url(#"+i+")")}else r.setAttribute(Fb[e],n);else r.setAttribute(Fb[e],"none")},n.prototype.shadow=function(t,e){var n=this.attr(),r=e||n,i=r.shadowOffsetX,o=r.shadowOffsetY,a=r.shadowBlur,s=r.shadowColor;(i||o||a||s)&&function(t,e){var n=t.cfg.el,r=t.attr(),i={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(i.dx||i.dy||i.blur||i.color){var o=e.find("filter",i);o||(o=e.addShadow(i)),n.setAttribute("filter","url(#"+o+")")}else n.removeAttribute("filter")}(this,t)},n.prototype.transform=function(t){var e=this.attr();(t||e).matrix&&Gb(this)},n.prototype.isInShape=function(t,e){return this.isPointInPath(t,e)},n.prototype.isPointInPath=function(t,e){var n=this.get("el"),r=this.get("canvas").get("el").getBoundingClientRect(),i=t+r.left,o=e+r.top,a=document.elementFromPoint(i,o);return!(!a||!a.isEqualNode(n))},n.prototype.getHitLineWidth=function(){var t=this.attrs,e=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?e+n:0},n}(xg),Yb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="circle",e.canFill=!0,e.canStroke=!0,e}return Ka(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Za(Za({},e),{x:0,y:0,r:0})},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");bs(e||n,(function(t,e){"x"===e||"y"===e?r.setAttribute("c"+e,t):Fb[e]&&r.setAttribute(Fb[e],t)}))},e}(Hb),Xb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dom",e.canFill=!1,e.canStroke=!1,e}return Ka(e,t),e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");if(bs(e||n,(function(t,e){Fb[e]&&r.setAttribute(Fb[e],t)})),"function"==typeof n.html){var i=n.html.call(this,n);if(i instanceof Element||i instanceof HTMLDocument){for(var o=r.childNodes,a=o.length-1;a>=0;a--)r.removeChild(o[a]);r.appendChild(i)}else r.innerHTML=i}else r.innerHTML=n.html},e}(Hb),qb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="ellipse",e.canFill=!0,e.canStroke=!0,e}return Ka(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Za(Za({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");bs(e||n,(function(t,e){"x"===e||"y"===e?r.setAttribute("c"+e,t):Fb[e]&&r.setAttribute(Fb[e],t)}))},e}(Hb),Kb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="image",e.canFill=!1,e.canStroke=!1,e}return Ka(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Za(Za({},e),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");bs(e||r,(function(t,e){"img"===e?n._setImage(r.img):Fb[e]&&i.setAttribute(Fb[e],t)}))},e.prototype.setAttr=function(t,e){this.attrs[t]=e,"img"===t&&this._setImage(e)},e.prototype._setImage=function(t){var e=this.attr(),n=this.get("el");if(zs(t))n.setAttribute("href",t);else if(t instanceof window.Image)e.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),e.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&zs(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase())n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var r=document.createElement("canvas");r.setAttribute("width",""+t.width),r.setAttribute("height",""+t.height),r.getContext("2d").putImageData(t,0,0),e.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),e.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",r.toDataURL())}},e}(Hb),Zb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="line",e.canFill=!1,e.canStroke=!0,e}return Ka(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Za(Za({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");bs(e||n,(function(e,i){if("startArrow"===i||"endArrow"===i)if(e){var o=ys(e)?t.addArrow(n,Fb[i]):t.getDefaultArrow(n,Fb[i]);r.setAttribute(Fb[i],"url(#"+o+")")}else r.removeAttribute(Fb[i]);else Fb[i]&&r.setAttribute(Fb[i],e)}))},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2;return Dg.length(e,n,r,i)},e.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2;return Dg.pointAt(n,r,i,o,t)},e}(Hb),Qb={circle:function(t,e,n){return[["M",t,e],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["z"]]},triangleDown:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}},Jb={get:function(t){return Qb[t]},register:function(t,e){Qb[t]=e},remove:function(t){delete Qb[t]},getAll:function(){return Qb}},tx=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="marker",e.canFill=!0,e.canStroke=!0,e}return Ka(e,t),e.prototype.createPath=function(t){this.get("el").setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return ms(t)?t.map((function(t){return t.join(" ")})).join(""):t},e.prototype._getPath=function(){var t,e=this.attr(),n=e.x,r=e.y,i=e.r||e.radius,o=e.symbol||"circle";return(t=gs(o)?o:Jb.get(o))?t(n,r,i):(console.warn(t+" symbol is not exist."),null)},e.symbolsFactory=Jb,e}(Hb),ex=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="path",e.canFill=!0,e.canStroke=!0,e}return Ka(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Za(Za({},e),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");bs(e||r,(function(e,o){if("path"===o&&ms(e))i.setAttribute("d",n._formatPath(e));else if("startArrow"===o||"endArrow"===o)if(e){var a=ys(e)?t.addArrow(r,Fb[o]):t.getDefaultArrow(r,Fb[o]);i.setAttribute(Fb[o],"url(#"+a+")")}else i.removeAttribute(Fb[o]);else Fb[o]&&i.setAttribute(Fb[o],e)}))},e.prototype._formatPath=function(t){var e=t.map((function(t){return t.join(" ")})).join("");return~e.indexOf("NaN")?"":e},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var e=this.get("el"),n=this.getTotalLength();if(0===n)return null;var r=e?e.getPointAtLength(t*n):null;return r?{x:r.x,y:r.y}:null},e}(Hb),nx=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polygon",e.canFill=!0,e.canStroke=!0,e}return Ka(e,t),e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");bs(e||n,(function(t,e){"points"===e&&ms(t)&&t.length>=2?r.setAttribute("points",t.map((function(t){return t[0]+","+t[1]})).join(" ")):Fb[e]&&r.setAttribute(Fb[e],t)}))},e}(Hb),rx=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polyline",e.canFill=!0,e.canStroke=!0,e}return Ka(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Za(Za({},e),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");bs(e||n,(function(t,e){"points"===e&&ms(t)&&t.length>=2?r.setAttribute("points",t.map((function(t){return t[0]+","+t[1]})).join(" ")):Fb[e]&&r.setAttribute(Fb[e],t)}))},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return vs(e)?(this.set("totalLength",qg(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),bs(i,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)})),Dg.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var n,r,i=0,o=[];bs(t,(function(a,s){t[s+1]&&((n=[])[0]=i/e,r=Dg.length(a[0],a[1],t[s+1][0],t[s+1][1]),i+=r,n[1]=i/e,o.push(n))})),this.set("tCache",o)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(Hb);var ix=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="rect",e.canFill=!0,e.canStroke=!0,e}return Ka(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Za(Za({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el"),o=!1,a=["x","y","width","height","radius"];bs(e||r,(function(t,e){-1===a.indexOf(e)||o?-1===a.indexOf(e)&&Fb[e]&&i.setAttribute(Fb[e],t):(i.setAttribute("d",n._assembleRect(r)),o=!0)}))},e.prototype._assembleRect=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.radius;if(!o)return"M "+e+","+n+" l "+r+",0 l 0,"+i+" l"+-r+" 0 z";var a=function(t){var e=0,n=0,r=0,i=0;return ms(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,{r1:e,r2:n,r3:r,r4:i}}(o);return ms(o)?1===o.length?a.r1=a.r2=a.r3=a.r4=o[0]:2===o.length?(a.r1=a.r3=o[0],a.r2=a.r4=o[1]):3===o.length?(a.r1=o[0],a.r2=a.r4=o[1],a.r3=o[2]):(a.r1=o[0],a.r2=o[1],a.r3=o[2],a.r4=o[3]):a.r1=a.r2=a.r3=a.r4=o,[["M "+(e+a.r1)+","+n],["l "+(r-a.r1-a.r2)+",0"],["a "+a.r2+","+a.r2+",0,0,1,"+a.r2+","+a.r2],["l 0,"+(i-a.r2-a.r3)],["a "+a.r3+","+a.r3+",0,0,1,"+-a.r3+","+a.r3],["l "+(a.r3+a.r4-r)+",0"],["a "+a.r4+","+a.r4+",0,0,1,"+-a.r4+","+-a.r4],["l 0,"+(a.r4+a.r1-i)],["a "+a.r1+","+a.r1+",0,0,1,"+a.r1+","+-a.r1],["z"]].join(" ")},e}(Hb),ox={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},ax={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},sx={left:"left",start:"left",center:"middle",right:"end",end:"end"},lx=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="text",e.canFill=!0,e.canStroke=!0,e}return Ka(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Za(Za({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");this._setFont(),bs(e||r,(function(t,e){"text"===e?n._setText(""+t):"matrix"===e&&t?Gb(n):Fb[e]&&i.setAttribute(Fb[e],t)})),i.setAttribute("paint-order","stroke"),i.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),e=this.attr(),n=e.textBaseline,r=e.textAlign,i=mf();i&&"firefox"===i.name?t.setAttribute("dominant-baseline",ax[n]||"alphabetic"):t.setAttribute("alignment-baseline",ox[n]||"baseline"),t.setAttribute("text-anchor",sx[r]||"left")},e.prototype._setText=function(t){var e=this.get("el"),n=this.attr(),r=n.x,i=n.textBaseline,o=void 0===i?"bottom":i;if(t)if(~t.indexOf("\n")){var a=t.split("\n"),s=a.length-1,l="";bs(a,(function(t,e){0===e?"alphabetic"===o?l+='<tspan x="'+r+'" dy="'+-s+'em">'+t+"</tspan>":"top"===o?l+='<tspan x="'+r+'" dy="0.9em">'+t+"</tspan>":"middle"===o?l+='<tspan x="'+r+'" dy="'+-(s-1)/2+'em">'+t+"</tspan>":"bottom"===o?l+='<tspan x="'+r+'" dy="-'+(s+.3)+'em">'+t+"</tspan>":"hanging"===o&&(l+='<tspan x="'+r+'" dy="'+(-(s-1)-.3)+'em">'+t+"</tspan>"):l+='<tspan x="'+r+'" dy="1em">'+t+"</tspan>"})),e.innerHTML=l}else e.innerHTML=t;else e.innerHTML=""},e}(Hb),ux=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,cx=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,dx=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function hx(t){var e=t.match(dx);if(!e)return"";var n="";return e.sort((function(t,e){return t=t.split(":"),e=e.split(":"),Number(t[0])-Number(e[0])})),bs(e,(function(t){t=t.split(":"),n+='<stop offset="'+t[0]+'" stop-color="'+t[1]+'"></stop>'})),n}var fx=function(){function t(t){this.cfg={};var e,n,r,i,o,a,s,l=null,u=Kl("gradient_");return"l"===t.toLowerCase()[0]?function(t,e){var n,r,i=ux.exec(t),o=al(cl(parseFloat(i[1])),2*Math.PI),a=i[2];o>=0&&o<.5*Math.PI?(n={x:0,y:0},r={x:1,y:1}):.5*Math.PI<=o&&o<Math.PI?(n={x:1,y:0},r={x:0,y:1}):Math.PI<=o&&o<1.5*Math.PI?(n={x:1,y:1},r={x:0,y:0}):(n={x:0,y:1},r={x:1,y:0});var s=Math.tan(o),l=s*s,u=(r.x-n.x+s*(r.y-n.y))/(l+1)+n.x,c=s*(r.x-n.x+s*(r.y-n.y))/(l+1)+n.y;e.setAttribute("x1",n.x),e.setAttribute("y1",n.y),e.setAttribute("x2",u),e.setAttribute("y2",c),e.innerHTML=hx(a)}(t,l=Nb("linearGradient")):(l=Nb("radialGradient"),e=t,n=l,r=cx.exec(e),i=parseFloat(r[1]),o=parseFloat(r[2]),a=parseFloat(r[3]),s=r[4],n.setAttribute("cx",i),n.setAttribute("cy",o),n.setAttribute("r",a),n.innerHTML=hx(s)),l.setAttribute("id",u),this.el=l,this.id=u,this.cfg=t,this}return t.prototype.match=function(t,e){return this.cfg===e},t}(),px={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},gx={x:"-40%",y:"-40%",width:"200%",height:"200%"},vx=function(){function t(t){this.type="filter",this.cfg={},this.type="filter";var e=Nb("filter");return bs(gx,(function(t,n){e.setAttribute(n,t)})),this.el=e,this.id=Kl("filter_"),this.el.id=this.id,this.cfg=t,this._parseShadow(t,e),this}return t.prototype.match=function(t,e){if(this.type!==t)return!1;var n=!0,r=this.cfg;return bs(Object.keys(r),(function(t){if(r[t]!==e[t])return n=!1,!1})),n},t.prototype.update=function(t,e){var n=this.cfg;return n[px[t]]=e,this._parseShadow(n,this.el),this},t.prototype._parseShadow=function(t,e){var n='<feDropShadow\n      dx="'+(t.dx||0)+'"\n      dy="'+(t.dy||0)+'"\n      stdDeviation="'+(t.blur?t.blur/10:0)+'"\n      flood-color="'+(t.color?t.color:"#000")+'"\n      flood-opacity="'+(t.opacity?t.opacity:1)+'"\n      />';e.innerHTML=n},t}(),mx=function(){function t(t,e){this.cfg={};var n=Nb("marker"),r=Kl("marker_");n.setAttribute("id",r);var i=Nb("path");i.setAttribute("stroke",t.stroke||"none"),i.setAttribute("fill",t.fill||"none"),n.appendChild(i),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=i,this.id=r;var o=t["marker-start"===e?"startArrow":"endArrow"];return this.stroke=t.stroke||"#000",!0===o?this._setDefaultPath(e,i):(this.cfg=o,this._setMarker(t.lineWidth,i)),this}return t.prototype.match=function(){return!1},t.prototype._setDefaultPath=function(t,e){var n=this.el;e.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},t.prototype._setMarker=function(t,e){var n=this.el,r=this.cfg.path,i=this.cfg.d;ms(r)&&(r=r.map((function(t){return t.join(" ")})).join("")),e.setAttribute("d",r),n.appendChild(e),i&&n.setAttribute("refX",""+i/t)},t.prototype.update=function(t){var e=this.child;e.attr?e.attr("fill",t):e.setAttribute("fill",t)},t}(),yx=function(){function t(t){this.type="clip",this.cfg={};var e=Nb("clipPath");this.el=e,this.id=Kl("clip_"),e.id=this.id;var n=t.cfg.el;return e.appendChild(n),this.cfg=t,this}return t.prototype.match=function(){return!1},t.prototype.remove=function(){var t=this.el;t.parentNode.removeChild(t)},t}(),bx=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,xx=function(){function t(t){this.cfg={};var e=Nb("pattern");e.setAttribute("patternUnits","userSpaceOnUse");var n=Nb("image");e.appendChild(n);var r=Kl("pattern_");e.id=r,this.el=e,this.id=r,this.cfg=t;var i=bx.exec(t)[2];n.setAttribute("href",i);var o=new Image;function a(){e.setAttribute("width",""+o.width),e.setAttribute("height",""+o.height)}return i.match(/^data:/i)||(o.crossOrigin="Anonymous"),o.src=i,o.complete?a():(o.onload=a,o.src=o.src),this}return t.prototype.match=function(t,e){return this.cfg===e},t}(),wx=function(){function t(t){var e=Nb("defs"),n=Kl("defs_");e.id=n,t.appendChild(e),this.children=[],this.defaultArrow={},this.el=e,this.canvas=t}return t.prototype.find=function(t,e){for(var n=this.children,r=null,i=0;i<n.length;i++)if(n[i].match(t,e)){r=n[i].id;break}return r},t.prototype.findById=function(t){for(var e=this.children,n=null,r=0;r<e.length;r++)if(e[r].id===t){n=e[r];break}return n},t.prototype.add=function(t){this.children.push(t),t.canvas=this.canvas,t.parent=this},t.prototype.getDefaultArrow=function(t,e){var n=t.stroke||t.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var r=new mx(t,e);return this.defaultArrow[n]=r,this.el.appendChild(r.el),this.add(r),r.id},t.prototype.addGradient=function(t){var e=new fx(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addArrow=function(t,e){var n=new mx(t,e);return this.el.appendChild(n.el),this.add(n),n.id},t.prototype.addShadow=function(t){var e=new vx(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addPattern=function(t){var e=new xx(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addClip=function(t){var e=new yx(t);return this.el.appendChild(e.el),this.add(e),e.id},t}(),Cx=function(t){function n(e){return t.call(this,Za(Za({},e),{autoDraw:!0,renderer:"svg"}))||this}return Ka(n,t),n.prototype.getShapeBase=function(){return e},n.prototype.getGroupBase=function(){return Wb},n.prototype.getShape=function(t,e,n){var r=n.target||n.srcElement;if(!Bb[r.tagName]){for(var i=r.parentNode;i&&!Bb[i.tagName];)i=i.parentNode;r=i}return this.find((function(t){return t.get("el")===r}))},n.prototype.createDom=function(){var t=Nb("svg"),e=new wx(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",e),t},n.prototype.onCanvasChange=function(t){var e=this.get("context"),n=this.get("el");if("sort"===t){var r=this.get("children");r&&r.length&&jb(this,(function(t,e){return r.indexOf(t)-r.indexOf(e)?1:0}))}else if("clear"===t){if(n){n.innerHTML="";var i=e.el;i.innerHTML="",n.appendChild(i)}}else"matrix"===t?Gb(this):"clip"===t?Ub(this,e):"changeSize"===t&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},n.prototype.draw=function(){var t=this.get("context"),e=this.getChildren();Ub(this,t),e.length&&$b(t,e)},n}(yg),Sx=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Shape:e,version:"0.5.6",Canvas:Cx,Group:Wb,Event:nf,Base:lf,AbstractCanvas:yg,AbstractGroup:bg,AbstractShape:xg,getBBoxMethod:Sg,getTextHeight:tv,assembleFont:ev,isAllowCapture:sf,multiplyVec2:xf,invert:wf,getOffScreenContext:Jg,PathUtil:ef});function kx(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return cu(r,n),lu(t,r,e)}function Ex(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return du(r,n),lu(t,r,e)}function Mx(t,e,n){return lu(t,n,e)}function Ax(t,e){for(var n,r,i,o,a=t?[].concat(t):[1,0,0,0,1,0,0,0,1],s=0,l=e.length;s<l;s++){var u=e[s];switch(u[0]){case"t":n=a,r=a,i=[u[1],u[2]],o=void 0,uu(o=[0,0,0,0,0,0,0,0,0],i),lu(n,o,r);break;case"s":Ex(a,a,[u[1],u[2]]);break;case"r":kx(a,a,u[1]);break;case"m":Mx(a,a,u[1])}}return a}var _x={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Tx=qm((function(t){var e=Array.prototype.concat,n=Array.prototype.slice,r=t.exports=function(t){for(var r,i=[],o=0,a=t.length;o<a;o++){var s=t[o];(r=s)&&"string"!=typeof r&&(r instanceof Array||Array.isArray(r)||r.length>=0&&(r.splice instanceof Function||Object.getOwnPropertyDescriptor(r,r.length-1)&&"String"!==r.constructor.name))?i=e.call(i,n.call(s)):i.push(s)}return i};r.wrap=function(t){return function(){return t(r(arguments))}}})),Px=qm((function(t){var e={};for(var n in _x)_x.hasOwnProperty(n)&&(e[_x[n]]=n);var r=t.exports={to:{},get:{}};function i(t,e,n){return Math.min(Math.max(e,t),n)}function o(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}r.get=function(t){var e,n;switch(t.substring(0,3).toLowerCase()){case"hsl":e=r.get.hsl(t),n="hsl";break;case"hwb":e=r.get.hwb(t),n="hwb";break;default:e=r.get.rgb(t),n="rgb"}return e?{model:n,value:e}:null},r.get.rgb=function(t){if(!t)return null;var e,n,r,o=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=e[2],e=e[1],n=0;n<3;n++){var a=2*n;o[n]=parseInt(e.slice(a,a+2),16)}r&&(o[3]=parseInt(r,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(r=(e=e[1])[3],n=0;n<3;n++)o[n]=parseInt(e[n]+e[n],16);r&&(o[3]=parseInt(r+r,16)/255)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(n=0;n<3;n++)o[n]=parseInt(e[n+1],0);e[4]&&(o[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(e=t.match(/(\D+)/))?"transparent"===e[1]?[0,0,0,0]:(o=_x[e[1]])?(o[3]=1,o):null:null;for(n=0;n<3;n++)o[n]=Math.round(2.55*parseFloat(e[n+1]));e[4]&&(o[3]=parseFloat(e[4]))}for(n=0;n<3;n++)o[n]=i(o[n],0,255);return o[3]=i(o[3],0,1),o},r.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])+360)%360,i(parseFloat(e[2]),0,100),i(parseFloat(e[3]),0,100),i(isNaN(n)?1:n,0,1)]}return null},r.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,i(parseFloat(e[2]),0,100),i(parseFloat(e[3]),0,100),i(isNaN(n)?1:n,0,1)]}return null},r.to.hex=function(){var t=Tx(arguments);return"#"+o(t[0])+o(t[1])+o(t[2])+(t[3]<1?o(Math.round(255*t[3])):"")},r.to.rgb=function(){var t=Tx(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},r.to.rgb.percent=function(){var t=Tx(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"},r.to.hsl=function(){var t=Tx(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},r.to.hwb=function(){var t=Tx(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},r.to.keyword=function(t){return e[t.slice(0,3)]}}));Px.to,Px.get;var Ix={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Dx=qm((function(t){var e={};for(var n in Ix)Ix.hasOwnProperty(n)&&(e[Ix[n]]=n);var r=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var i in r)if(r.hasOwnProperty(i)){if(!("channels"in r[i]))throw new Error("missing channels property: "+i);if(!("labels"in r[i]))throw new Error("missing channel labels property: "+i);if(r[i].labels.length!==r[i].channels)throw new Error("channel and label counts mismatch: "+i);var o=r[i].channels,a=r[i].labels;delete r[i].channels,delete r[i].labels,Object.defineProperty(r[i],"channels",{value:o}),Object.defineProperty(r[i],"labels",{value:a})}r.rgb.hsl=function(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),l=s-a;return s===a?e=0:r===s?e=(i-o)/l:i===s?e=2+(o-r)/l:o===s&&(e=4+(r-i)/l),(e=Math.min(60*e,360))<0&&(e+=360),n=(a+s)/2,[e,100*(s===a?0:n<=.5?l/(s+a):l/(2-s-a)),100*n]},r.rgb.hsv=function(t){var e,n,r,i,o,a=t[0]/255,s=t[1]/255,l=t[2]/255,u=Math.max(a,s,l),c=u-Math.min(a,s,l),d=function(t){return(u-t)/6/c+.5};return 0===c?i=o=0:(o=c/u,e=d(a),n=d(s),r=d(l),a===u?i=r-n:s===u?i=1/3+e-r:l===u&&(i=2/3+n-e),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*u]},r.rgb.hwb=function(t){var e=t[0],n=t[1],i=t[2];return[r.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(n,i))),100*(i=1-1/255*Math.max(e,Math.max(n,i)))]},r.rgb.cmyk=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255;return[100*((1-n-(e=Math.min(1-n,1-r,1-i)))/(1-e)||0),100*((1-r-e)/(1-e)||0),100*((1-i-e)/(1-e)||0),100*e]},r.rgb.keyword=function(t){var n=e[t];if(n)return n;var r,i,o,a=1/0;for(var s in Ix)if(Ix.hasOwnProperty(s)){var l=Ix[s],u=(i=t,o=l,Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2)+Math.pow(i[2]-o[2],2));u<a&&(a=u,r=s)}return r},r.keyword.rgb=function(t){return Ix[t]},r.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*e+.7152*n+.0722*r),100*(.0193*e+.1192*n+.9505*r)]},r.rgb.lab=function(t){var e=r.rgb.xyz(t),n=e[0],i=e[1],o=e[2];return i/=100,o/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(n-i),200*(i-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]},r.hsl.rgb=function(t){var e,n,r,i,o,a=t[0]/360,s=t[1]/100,l=t[2]/100;if(0===s)return[o=255*l,o,o];e=2*l-(n=l<.5?l*(1+s):l+s-l*s),i=[0,0,0];for(var u=0;u<3;u++)(r=a+1/3*-(u-1))<0&&r++,r>1&&r--,o=6*r<1?e+6*(n-e)*r:2*r<1?n:3*r<2?e+(n-e)*(2/3-r)*6:e,i[u]=255*o;return i},r.hsl.hsv=function(t){var e=t[0],n=t[1]/100,r=t[2]/100,i=n,o=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=o<=1?o:2-o,[e,100*(0===r?2*i/(o+i):2*n/(r+n)),100*((r+n)/2)]},r.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,i=Math.floor(e)%6,o=e-Math.floor(e),a=255*r*(1-n),s=255*r*(1-n*o),l=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,l,a];case 1:return[s,r,a];case 2:return[a,r,l];case 3:return[a,s,r];case 4:return[l,a,r];case 5:return[r,a,s]}},r.hsv.hsl=function(t){var e,n,r,i=t[0],o=t[1]/100,a=t[2]/100,s=Math.max(a,.01);return r=(2-o)*a,n=o*s,[i,100*(n=(n/=(e=(2-o)*s)<=1?e:2-e)||0),100*(r/=2)]},r.hwb.rgb=function(t){var e,n,r,i,o,a,s,l=t[0]/360,u=t[1]/100,c=t[2]/100,d=u+c;switch(d>1&&(u/=d,c/=d),r=6*l-(e=Math.floor(6*l)),0!=(1&e)&&(r=1-r),i=u+r*((n=1-c)-u),e){default:case 6:case 0:o=n,a=i,s=u;break;case 1:o=i,a=n,s=u;break;case 2:o=u,a=n,s=i;break;case 3:o=u,a=i,s=n;break;case 4:o=i,a=u,s=n;break;case 5:o=n,a=u,s=i}return[255*o,255*a,255*s]},r.cmyk.rgb=function(t){var e=t[0]/100,n=t[1]/100,r=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},r.xyz.rgb=function(t){var e,n,r,i=t[0]/100,o=t[1]/100,a=t[2]/100;return n=-.9689*i+1.8758*o+.0415*a,r=.0557*i+-.204*o+1.057*a,e=(e=3.2406*i+-1.5372*o+-.4986*a)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(e=Math.min(Math.max(0,e),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},r.xyz.lab=function(t){var e=t[0],n=t[1],r=t[2];return n/=100,r/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},r.lab.xyz=function(t){var e,n,r,i=t[0];e=t[1]/500+(n=(i+16)/116),r=n-t[2]/200;var o=Math.pow(n,3),a=Math.pow(e,3),s=Math.pow(r,3);return n=o>.008856?o:(n-16/116)/7.787,e=a>.008856?a:(e-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,[e*=95.047,n*=100,r*=108.883]},r.lab.lch=function(t){var e,n=t[0],r=t[1],i=t[2];return(e=360*Math.atan2(i,r)/2/Math.PI)<0&&(e+=360),[n,Math.sqrt(r*r+i*i),e]},r.lch.lab=function(t){var e,n=t[0],r=t[1];return e=t[2]/360*2*Math.PI,[n,r*Math.cos(e),r*Math.sin(e)]},r.rgb.ansi16=function(t){var e=t[0],n=t[1],i=t[2],o=1 in arguments?arguments[1]:r.rgb.hsv(t)[2];if(0===(o=Math.round(o/50)))return 30;var a=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(e/255));return 2===o&&(a+=60),a},r.hsv.ansi16=function(t){return r.rgb.ansi16(r.hsv.rgb(t),t[2])},r.rgb.ansi256=function(t){var e=t[0],n=t[1],r=t[2];return e===n&&n===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},r.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var n=.5*(1+~~(t>50));return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},r.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var n;return t-=16,[Math.floor(t/36)/5*255,Math.floor((n=t%36)/6)/5*255,n%6/5*255]},r.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},r.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var n=e[0];3===e[0].length&&(n=n.split("").map((function(t){return t+t})).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},r.rgb.hcg=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255,o=Math.max(Math.max(n,r),i),a=Math.min(Math.min(n,r),i),s=o-a;return e=s<=0?0:o===n?(r-i)/s%6:o===r?2+(i-n)/s:4+(n-r)/s+4,e/=6,[360*(e%=1),100*s,100*(s<1?a/(1-s):0)]},r.hsl.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=1,i=0;return(r=n<.5?2*e*n:2*e*(1-n))<1&&(i=(n-.5*r)/(1-r)),[t[0],100*r,100*i]},r.hsv.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=e*n,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},r.hcg.rgb=function(t){var e=t[0]/360,n=t[1]/100,r=t[2]/100;if(0===n)return[255*r,255*r,255*r];var i,o=[0,0,0],a=e%1*6,s=a%1,l=1-s;switch(Math.floor(a)){case 0:o[0]=1,o[1]=s,o[2]=0;break;case 1:o[0]=l,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=s;break;case 3:o[0]=0,o[1]=l,o[2]=1;break;case 4:o[0]=s,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=l}return i=(1-n)*r,[255*(n*o[0]+i),255*(n*o[1]+i),255*(n*o[2]+i)]},r.hcg.hsv=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e),r=0;return n>0&&(r=e/n),[t[0],100*r,100*n]},r.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100*(1-e)+.5*e,r=0;return n>0&&n<.5?r=e/(2*n):n>=.5&&n<1&&(r=e/(2*(1-n))),[t[0],100*r,100*n]},r.hcg.hwb=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},r.hwb.hcg=function(t){var e=t[1]/100,n=1-t[2]/100,r=n-e,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},r.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},r.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},r.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},r.gray.hsl=r.gray.hsv=function(t){return[0,0,t[0]]},r.gray.hwb=function(t){return[0,100,t[0]]},r.gray.cmyk=function(t){return[0,0,0,t[0]]},r.gray.lab=function(t){return[t[0],0,0]},r.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n},r.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}}));function Ox(t){var e=function(){for(var t={},e=Object.keys(Dx),n=e.length,r=0;r<n;r++)t[e[r]]={distance:-1,parent:null};return t}(),n=[t];for(e[t].distance=0;n.length;)for(var r=n.pop(),i=Object.keys(Dx[r]),o=i.length,a=0;a<o;a++){var s=i[a],l=e[s];-1===l.distance&&(l.distance=e[r].distance+1,l.parent=r,n.unshift(s))}return e}function Rx(t,e){return function(n){return e(t(n))}}function Lx(t,e){for(var n=[e[t].parent,t],r=Dx[e[t].parent][t],i=e[t].parent;e[i].parent;)n.unshift(e[i].parent),r=Rx(Dx[e[i].parent][i],r),i=e[i].parent;return r.conversion=n,r}Dx.rgb,Dx.hsl,Dx.hsv,Dx.hwb,Dx.cmyk,Dx.xyz,Dx.lab,Dx.lch,Dx.hex,Dx.keyword,Dx.ansi16,Dx.ansi256,Dx.hcg,Dx.apple,Dx.gray;var Bx={};Object.keys(Dx).forEach((function(t){Bx[t]={},Object.defineProperty(Bx[t],"channels",{value:Dx[t].channels}),Object.defineProperty(Bx[t],"labels",{value:Dx[t].labels});var e=function(t){for(var e=Ox(t),n={},r=Object.keys(e),i=r.length,o=0;o<i;o++){var a=r[o];null!==e[a].parent&&(n[a]=Lx(a,e))}return n}(t);Object.keys(e).forEach((function(n){var r=e[n];Bx[t][n]=function(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var n=t(e);if("object"==typeof n)for(var r=n.length,i=0;i<r;i++)n[i]=Math.round(n[i]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}(r),Bx[t][n].raw=function(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(r)}))}));var Fx=Bx,Nx=[].slice,zx=["keyword","gray","hex"],jx={};Object.keys(Fx).forEach((function(t){jx[Nx.call(Fx[t].labels).sort().join("")]=t}));var Gx={};function Ux(t,e){if(!(this instanceof Ux))return new Ux(t,e);if(e&&e in zx&&(e=null),e&&!(e in Fx))throw new Error("Unknown model: "+e);var n,r;if(null==t)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof Ux)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if("string"==typeof t){var i=Px.get(t);if(null===i)throw new Error("Unable to parse color from string: "+t);this.model=i.model,r=Fx[this.model].channels,this.color=i.value.slice(0,r),this.valpha="number"==typeof i.value[r]?i.value[r]:1}else if(t.length){this.model=e||"rgb",r=Fx[this.model].channels;var o=Nx.call(t,0,r);this.color=Hx(o,r),this.valpha="number"==typeof t[r]?t[r]:1}else if("number"==typeof t)t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;var a=Object.keys(t);"alpha"in t&&(a.splice(a.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0);var s=a.sort().join("");if(!(s in jx))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=jx[s];var l=Fx[this.model].labels,u=[];for(n=0;n<l.length;n++)u.push(t[l[n]]);this.color=Hx(u)}if(Gx[this.model])for(r=Fx[this.model].channels,n=0;n<r;n++){var c=Gx[this.model][n];c&&(this.color[n]=c(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function $x(t,e,n){return(t=Array.isArray(t)?t:[t]).forEach((function(t){(Gx[t]||(Gx[t]=[]))[e]=n})),t=t[0],function(r){var i;return arguments.length?(n&&(r=n(r)),(i=this[t]()).color[e]=r,i):(i=this[t]().color[e],n&&(i=n(i)),i)}}function Vx(t){return function(e){return Math.max(0,Math.min(t,e))}}function Wx(t){return Array.isArray(t)?t:[t]}function Hx(t,e){for(var n=0;n<e;n++)"number"!=typeof t[n]&&(t[n]=0);return t}Ux.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in Px.to?this:this.rgb(),n=1===(e=e.round("number"==typeof t?t:1)).valpha?e.color:e.color.concat(this.valpha);return Px.to[e.model](n)},percentString:function(t){var e=this.rgb().round("number"==typeof t?t:1),n=1===e.valpha?e.color:e.color.concat(this.valpha);return Px.to.rgb.percent(n)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=Fx[this.model].channels,n=Fx[this.model].labels,r=0;r<e;r++)t[n[r]]=this.color[r];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new Ux(this.color.map(function(t){return function(e){return function(t,e){return Number(t.toFixed(e))}(e,t)}}(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new Ux(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:$x("rgb",0,Vx(255)),green:$x("rgb",1,Vx(255)),blue:$x("rgb",2,Vx(255)),hue:$x(["hsl","hsv","hsl","hwb","hcg"],0,(function(t){return(t%360+360)%360})),saturationl:$x("hsl",1,Vx(100)),lightness:$x("hsl",2,Vx(100)),saturationv:$x("hsv",1,Vx(100)),value:$x("hsv",2,Vx(100)),chroma:$x("hcg",1,Vx(100)),gray:$x("hcg",2,Vx(100)),white:$x("hwb",1,Vx(100)),wblack:$x("hwb",2,Vx(100)),cyan:$x("cmyk",0,Vx(100)),magenta:$x("cmyk",1,Vx(100)),yellow:$x("cmyk",2,Vx(100)),black:$x("cmyk",3,Vx(100)),x:$x("xyz",0,Vx(100)),y:$x("xyz",1,Vx(100)),z:$x("xyz",2,Vx(100)),l:$x("lab",0,Vx(100)),a:$x("lab",1),b:$x("lab",2),keyword:function(t){return arguments.length?new Ux(t):Fx[this.model].keyword(this.color)},hex:function(t){return arguments.length?new Ux(t):Px.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity:function(){for(var t=this.rgb().color,e=[],n=0;n<t.length;n++){var r=t[n]/255;e[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=.3*t[0]+.59*t[1]+.11*t[2];return Ux.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),n=e.color[0];return n=(n=(n+t)%360)<0?360+n:n,e.color[0]=n,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var n=t.rgb(),r=this.rgb(),i=void 0===e?.5:e,o=2*i-1,a=n.alpha()-r.alpha(),s=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,l=1-s;return Ux.rgb(s*n.red()+l*r.red(),s*n.green()+l*r.green(),s*n.blue()+l*r.blue(),n.alpha()*i+r.alpha()*(1-i))}},Object.keys(Fx).forEach((function(t){if(-1===zx.indexOf(t)){var e=Fx[t].channels;Ux.prototype[t]=function(){if(this.model===t)return new Ux(this);if(arguments.length)return new Ux(arguments,t);var n="number"==typeof arguments[e]?e:this.valpha;return new Ux(Wx(Fx[this.model][t].raw(this.color)).concat(n),t)},Ux[t]=function(n){return"number"==typeof n&&(n=Hx(Nx.call(arguments),e)),new Ux(n,t)}}}));var Yx=Ux,Xx=qm((function(t){!function(e){var n=/^\s+/,r=/\s+$/,i=0,o=e.round,a=e.min,s=e.max,l=e.random;function u(t,l){if(l=l||{},(t=t||"")instanceof u)return t;if(!(this instanceof u))return new u(t,l);var c=function(t){var i={r:0,g:0,b:0},o=1,l=null,u=null,c=null,d=!1,h=!1;"string"==typeof t&&(t=function(t){t=t.replace(n,"").replace(r,"").toLowerCase();var e,i=!1;if(A[t])t=A[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=j.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=j.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=j.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=j.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=j.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=j.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=j.hex8.exec(t))return{r:D(e[1]),g:D(e[2]),b:D(e[3]),a:B(e[4]),format:i?"name":"hex8"};if(e=j.hex6.exec(t))return{r:D(e[1]),g:D(e[2]),b:D(e[3]),format:i?"name":"hex"};if(e=j.hex4.exec(t))return{r:D(e[1]+""+e[1]),g:D(e[2]+""+e[2]),b:D(e[3]+""+e[3]),a:B(e[4]+""+e[4]),format:i?"name":"hex8"};if(e=j.hex3.exec(t))return{r:D(e[1]+""+e[1]),g:D(e[2]+""+e[2]),b:D(e[3]+""+e[3]),format:i?"name":"hex"};return!1}(t));"object"==typeof t&&(G(t.r)&&G(t.g)&&G(t.b)?(f=t.r,p=t.g,g=t.b,i={r:255*P(f,255),g:255*P(p,255),b:255*P(g,255)},d=!0,h="%"===String(t.r).substr(-1)?"prgb":"rgb"):G(t.h)&&G(t.s)&&G(t.v)?(l=R(t.s),u=R(t.v),i=function(t,n,r){t=6*P(t,360),n=P(n,100),r=P(r,100);var i=e.floor(t),o=t-i,a=r*(1-n),s=r*(1-o*n),l=r*(1-(1-o)*n),u=i%6;return{r:255*[r,s,a,a,l,r][u],g:255*[l,r,r,s,a,a][u],b:255*[a,a,l,r,r,s][u]}}(t.h,l,u),d=!0,h="hsv"):G(t.h)&&G(t.s)&&G(t.l)&&(l=R(t.s),c=R(t.l),i=function(t,e,n){var r,i,o;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=P(t,360),e=P(e,100),n=P(n,100),0===e)r=i=o=n;else{var s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;r=a(l,s,t+1/3),i=a(l,s,t),o=a(l,s,t-1/3)}return{r:255*r,g:255*i,b:255*o}}(t.h,l,c),d=!0,h="hsl"),t.hasOwnProperty("a")&&(o=t.a));var f,p,g;return o=T(o),{ok:d,format:t.format||h,r:a(255,s(i.r,0)),g:a(255,s(i.g,0)),b:a(255,s(i.b,0)),a:o}}(t);this._originalInput=t,this._r=c.r,this._g=c.g,this._b=c.b,this._a=c.a,this._roundA=o(100*this._a)/100,this._format=l.format||c.format,this._gradientType=l.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b)),this._ok=c.ok,this._tc_id=i++}function c(t,e,n){t=P(t,255),e=P(e,255),n=P(n,255);var r,i,o=s(t,e,n),l=a(t,e,n),u=(o+l)/2;if(o==l)r=i=0;else{var c=o-l;switch(i=u>.5?c/(2-o-l):c/(o+l),o){case t:r=(e-n)/c+(e<n?6:0);break;case e:r=(n-t)/c+2;break;case n:r=(t-e)/c+4}r/=6}return{h:r,s:i,l:u}}function d(t,e,n){t=P(t,255),e=P(e,255),n=P(n,255);var r,i,o=s(t,e,n),l=a(t,e,n),u=o,c=o-l;if(i=0===o?0:c/o,o==l)r=0;else{switch(o){case t:r=(e-n)/c+(e<n?6:0);break;case e:r=(n-t)/c+2;break;case n:r=(t-e)/c+4}r/=6}return{h:r,s:i,v:u}}function h(t,e,n,r){var i=[O(o(t).toString(16)),O(o(e).toString(16)),O(o(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function f(t,e,n,r){return[O(L(r)),O(o(t).toString(16)),O(o(e).toString(16)),O(o(n).toString(16))].join("")}function p(t,e){e=0===e?0:e||10;var n=u(t).toHsl();return n.s-=e/100,n.s=I(n.s),u(n)}function g(t,e){e=0===e?0:e||10;var n=u(t).toHsl();return n.s+=e/100,n.s=I(n.s),u(n)}function v(t){return u(t).desaturate(100)}function m(t,e){e=0===e?0:e||10;var n=u(t).toHsl();return n.l+=e/100,n.l=I(n.l),u(n)}function y(t,e){e=0===e?0:e||10;var n=u(t).toRgb();return n.r=s(0,a(255,n.r-o(-e/100*255))),n.g=s(0,a(255,n.g-o(-e/100*255))),n.b=s(0,a(255,n.b-o(-e/100*255))),u(n)}function b(t,e){e=0===e?0:e||10;var n=u(t).toHsl();return n.l-=e/100,n.l=I(n.l),u(n)}function x(t,e){var n=u(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,u(n)}function w(t){var e=u(t).toHsl();return e.h=(e.h+180)%360,u(e)}function C(t){var e=u(t).toHsl(),n=e.h;return[u(t),u({h:(n+120)%360,s:e.s,l:e.l}),u({h:(n+240)%360,s:e.s,l:e.l})]}function S(t){var e=u(t).toHsl(),n=e.h;return[u(t),u({h:(n+90)%360,s:e.s,l:e.l}),u({h:(n+180)%360,s:e.s,l:e.l}),u({h:(n+270)%360,s:e.s,l:e.l})]}function k(t){var e=u(t).toHsl(),n=e.h;return[u(t),u({h:(n+72)%360,s:e.s,l:e.l}),u({h:(n+216)%360,s:e.s,l:e.l})]}function E(t,e,n){e=e||6,n=n||30;var r=u(t).toHsl(),i=360/n,o=[u(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(u(r));return o}function M(t,e){e=e||6;for(var n=u(t).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/e;e--;)a.push(u({h:r,s:i,v:o})),o=(o+s)%1;return a}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,n,r,i=this.toRgb();return t=i.r/255,n=i.g/255,r=i.b/255,.2126*(t<=.03928?t/12.92:e.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:e.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:e.pow((r+.055)/1.055,2.4))},setAlpha:function(t){return this._a=T(t),this._roundA=o(100*this._a)/100,this},toHsv:function(){var t=d(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=d(this._r,this._g,this._b),e=o(360*t.h),n=o(100*t.s),r=o(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=c(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=c(this._r,this._g,this._b),e=o(360*t.h),n=o(100*t.s),r=o(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return h(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,i){var a=[O(o(t).toString(16)),O(o(e).toString(16)),O(o(n).toString(16)),O(L(r))];if(i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1))return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0);return a.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(100*P(this._r,255))+"%",g:o(100*P(this._g,255))+"%",b:o(100*P(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+o(100*P(this._r,255))+"%, "+o(100*P(this._g,255))+"%, "+o(100*P(this._b,255))+"%)":"rgba("+o(100*P(this._r,255))+"%, "+o(100*P(this._g,255))+"%, "+o(100*P(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(_[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+f(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=u(t);n="#"+f(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return u(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(g,arguments)},greyscale:function(){return this._applyModification(v,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(E,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(M,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(C,arguments)},tetrad:function(){return this._applyCombination(S,arguments)}},u.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:R(t[r]));t=n}return u(t,e)},u.equals=function(t,e){return!(!t||!e)&&u(t).toRgbString()==u(e).toRgbString()},u.random=function(){return u.fromRatio({r:l(),g:l(),b:l()})},u.mix=function(t,e,n){n=0===n?0:n||50;var r=u(t).toRgb(),i=u(e).toRgb(),o=n/100;return u({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},u.readability=function(t,n){var r=u(t),i=u(n);return(e.max(r.getLuminance(),i.getLuminance())+.05)/(e.min(r.getLuminance(),i.getLuminance())+.05)},u.isReadable=function(t,e,n){var r,i,o=u.readability(t,e);switch(i=!1,(r=function(t){var e,n;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==n&&"large"!==n&&(n="small");return{level:e,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},u.mostReadable=function(t,e,n){var r,i,o,a,s=null,l=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var c=0;c<e.length;c++)(r=u.readability(t,e[c]))>l&&(l=r,s=u(e[c]));return u.isReadable(t,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,u.mostReadable(t,["#fff","#000"],n))};var A=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},_=u.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(A);function T(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function P(t,n){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var r=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=a(n,s(0,parseFloat(t))),r&&(t=parseInt(t*n,10)/100),e.abs(t-n)<1e-6?1:t%n/parseFloat(n)}function I(t){return a(1,s(0,t))}function D(t){return parseInt(t,16)}function O(t){return 1==t.length?"0"+t:""+t}function R(t){return t<=1&&(t=100*t+"%"),t}function L(t){return e.round(255*parseFloat(t)).toString(16)}function B(t){return D(t)/255}var F,N,z,j=(N="[\\s|\\(]+("+(F="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+F+")[,|\\s]+("+F+")\\s*\\)?",z="[\\s|\\(]+("+F+")[,|\\s]+("+F+")[,|\\s]+("+F+")[,|\\s]+("+F+")\\s*\\)?",{CSS_UNIT:new RegExp(F),rgb:new RegExp("rgb"+N),rgba:new RegExp("rgba"+z),hsl:new RegExp("hsl"+N),hsla:new RegExp("hsla"+z),hsv:new RegExp("hsv"+N),hsva:new RegExp("hsva"+z),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function G(t){return!!j.CSS_UNIT.exec(t)}t.exports?t.exports=u:window.tinycolor=u}(Math)})),qx=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function Kx(t,e,n){var r;return(r=Math.round(t.h)>=60&&Math.round(t.h)<=240?n?Math.round(t.h)-2*e:Math.round(t.h)+2*e:n?Math.round(t.h)+2*e:Math.round(t.h)-2*e)<0?r+=360:r>=360&&(r-=360),r}function Zx(t,e,n){return 0===t.h&&0===t.s?t.s:((r=n?t.s-.16*e:4===e?t.s+.16:t.s+.05*e)>1&&(r=1),n&&5===e&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function Qx(t,e,n){var r;return(r=n?t.v+.05*e:t.v-.15*e)>1&&(r=1),Number(r.toFixed(2))}function Jx(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=Xx(t),i=5;i>0;i-=1){var o=r.toHsv(),a=Xx({h:Kx(o,i,!0),s:Zx(o,i,!0),v:Qx(o,i,!0)}).toHexString();n.push(a)}n.push(r.toHexString());for(var s=1;s<=4;s+=1){var l=r.toHsv(),u=Xx({h:Kx(l,s),s:Zx(l,s),v:Qx(l,s)}).toHexString();n.push(u)}return"dark"===e.theme?qx.map((function(t){var r=t.index,i=t.opacity;return Xx.mix(e.backgroundColor||"#141414",n[r],100*i).toHexString()})):n}var tw={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},ew={},nw={};Object.keys(tw).forEach((function(t){ew[t]=Jx(tw[t]),ew[t].primary=ew[t][5],nw[t]=Jx(tw[t],{theme:"dark",backgroundColor:"#141414"}),nw[t].primary=nw[t][5]})),ew.red,ew.volcano,ew.gold,ew.orange,ew.yellow,ew.lime,ew.green,ew.cyan,ew.blue,ew.geekblue,ew.purple,ew.magenta,ew.grey;var rw,iw,ow,aw,sw=function(t,e,n){var r=Yx(t),i=Yx(e);return Yx([(1-n)*r.red()+n*i.red(),(1-n)*r.green()+n*i.green(),(1-n)*r.blue()+n*i.blue()]).rgb()},lw=function(t,e,n,r){return void 0===e&&(e="#fff"),void 0===n&&(n="default"),"default"===n?function(t,e,n){void 0===e&&(e="#fff"),void 0===n&&(n="rgb(150, 150, 150)");var r=sw(e,t,.05).rgb().toString(),i=sw(e,t,.1).rgb().toString(),o=sw(e,t,.2).rgb().toString(),a=sw(e,t,.4).rgb().toString(),s=sw(e,n,.02).rgb().toString(),l=sw(e,n,.05).rgb().toString(),u=sw(e,n,.1).rgb().toString(),c=sw(e,n,.2).rgb().toString(),d=sw(e,n,.3).rgb().toString(),h=Jx(t,{theme:"default",backgroundColor:e}),f=Yx(t).hex().toLowerCase(),p=h.indexOf(f),g=t;return-1!==p&&(g=h[p+1]),{mainStroke:t,mainFill:i,activeStroke:t,activeFill:r,inactiveStroke:a,inactiveFill:r,selectedStroke:t,selectedFill:e,highlightStroke:g,highlightFill:o,disableStroke:d,disableFill:l,edgeMainStroke:d,edgeActiveStroke:t,edgeInactiveStroke:c,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:u,comboMainStroke:d,comboMainFill:s,comboActiveStroke:t,comboActiveFill:r,comboInactiveStroke:d,comboInactiveFill:s,comboSelectedStroke:t,comboSelectedFill:s,comboHighlightStroke:g,comboHighlightFill:s,comboDisableStroke:c,comboDisableFill:l}}(t,e,"rgb(150, 150, 150)"):function(t,e,n){void 0===e&&(e="#fff"),void 0===n&&(n="#777");var r=sw(e,t,.2).rgb().toString(),i=sw(e,t,.3).rgb().toString(),o=sw(e,t,.6).rgb().toString(),a=sw(e,t,.8).rgb().toString(),s=sw(e,n,.2).rgb().toString(),l=sw(e,n,.25).rgb().toString(),u=sw(e,n,.3).rgb().toString(),c=sw(e,n,.4).rgb().toString(),d=sw(e,n,.5).rgb().toString(),h=Jx(t,{theme:"dark",backgroundColor:e}),f=Yx(t).hex().toLowerCase(),p=h.indexOf(f),g=t;return-1!==p&&(g=h[p+1]),{mainStroke:a,mainFill:r,activeStroke:t,activeFill:i,inactiveStroke:a,inactiveFill:r,selectedStroke:t,selectedFill:r,highlightStroke:t,highlightFill:o,disableStroke:d,disableFill:l,edgeMainStroke:n,edgeActiveStroke:t,edgeInactiveStroke:n,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:u,comboMainStroke:c,comboMainFill:l,comboActiveStroke:t,comboActiveFill:s,comboInactiveStroke:c,comboInactiveFill:l,comboSelectedStroke:t,comboSelectedFill:s,comboHighlightStroke:g,comboHighlightFill:l,comboDisableStroke:c,comboDisableFill:s}}(t,e,"#777")},uw=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",mixColor:sw,getColorsWithSubjectColor:lw,getColorSetsBySubjectColors:function(t,e,n,r){void 0===e&&(e="#fff"),void 0===n&&(n="default");var i=[];return t.forEach((function(t){i.push(lw(t,e,n))})),i}}),cw=lw("rgb(95, 149, 255)","rgb(255, 255, 255)"),dw={version:"0.3.6",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:cw.mainStroke,fill:cw.mainFill},size:20,color:cw.mainStroke,linkPoints:{size:8,lineWidth:1,fill:cw.activeFill,stroke:cw.activeStroke}},nodeStateStyles:{active:{fill:cw.activeFill,stroke:cw.activeStroke,lineWidth:2,shadowColor:cw.mainStroke,shadowBlur:10},selected:{fill:cw.selectedFill,stroke:cw.selectedStroke,lineWidth:4,shadowColor:cw.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:cw.highlightFill,stroke:cw.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:cw.inactiveFill,stroke:cw.inactiveStroke,lineWidth:1},disable:{fill:cw.disableFill,stroke:cw.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:cw.edgeMainStroke,lineAppendWidth:2},color:cw.edgeMainStroke},edgeStateStyles:{active:{stroke:cw.edgeActiveStroke,lineWidth:1},selected:{stroke:cw.edgeSelectedStroke,lineWidth:2,shadowColor:cw.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:cw.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:cw.edgeInactiveStroke,lineWidth:1},disable:{stroke:cw.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:cw.comboMainFill,lineWidth:1,stroke:cw.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:cw.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:cw.comboActiveStroke,lineWidth:1,fill:cw.comboActiveFill},selected:{stroke:cw.comboSelectedStroke,lineWidth:2,fill:cw.comboSelectedFill,shadowColor:cw.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:cw.comboHighlightStroke,lineWidth:2,fill:cw.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:cw.comboInactiveStroke,fill:cw.comboInactiveFill,lineWidth:1},disable:{stroke:cw.comboDisableStroke,fill:cw.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function hw(t,e,n){if(t){if("function"==typeof t.addEventListener)return t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}};if("function"==typeof t.attachEvent)return t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}}}function fw(t){rw||(rw=document.createElement("table"),iw=document.createElement("tr"),ow=/^\s*<(\w+|!)[^>]*>/,aw={tr:document.createElement("tbody"),tbody:rw,thead:rw,tfoot:rw,td:iw,th:iw,"*":document.createElement("div")});var e=ow.test(t)&&RegExp.$1;e&&e in aw||(e="*");var n=aw[e];t=t.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+t;var r=n.childNodes[0];return n.removeChild(r),r}function pw(t,e,n){var r;try{r=window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.style[e]}catch(i){}finally{r=void 0===r?n:r}return r}function gw(t,e){var n=function(t,e){var n=pw(t,"height",e);return"auto"===n&&(n=t.offsetHeight),parseFloat(n)}(t,e),r=parseFloat(pw(t,"borderTopWidth"))||0,i=parseFloat(pw(t,"paddingTop"))||0,o=parseFloat(pw(t,"paddingBottom"))||0;return n+r+(parseFloat(pw(t,"borderBottomWidth"))||0)+i+o+(parseFloat(pw(t,"marginTop"))||0)+(parseFloat(pw(t,"marginBottom"))||0)}function vw(t,e){var n=function(t,e){var n=pw(t,"width",e);return"auto"===n&&(n=t.offsetWidth),parseFloat(n)}(t,e),r=parseFloat(pw(t,"borderLeftWidth"))||0,i=parseFloat(pw(t,"paddingLeft"))||0,o=parseFloat(pw(t,"paddingRight"))||0,a=parseFloat(pw(t,"borderRightWidth"))||0,s=parseFloat(pw(t,"marginRight"))||0;return n+r+a+i+o+(parseFloat(pw(t,"marginLeft"))||0)+s}function mw(t,e){if(t)for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n]);return t}var yw=zm.cloneEvent,bw=zm.isViewportChanged,xw=function(t){function e(e){var n=t.call(this,e)||this;return n.extendEvents=[],n.dragging=!1,n.preItem=null,n.graph=e,n.destroyed=!1,n.initEvents(),n}return Ka(e,t),e.prototype.initEvents=function(){var t=this.graph,e=this.extendEvents,n=void 0===e?[]:e,r=t.get("canvas"),i=r.get("el"),o=Zs(this,"onCanvasEvents"),a=Zs(this,"onExtendEvents"),s=Zs(this,"onWheelEvent");r.off("*").on("*",o),this.canvasHandler=o,n.push(hw(i,"DOMMouseScroll",s)),n.push(hw(i,"mousewheel",s)),"undefined"!=typeof window&&(n.push(hw(window,"keydown",a)),n.push(hw(window,"keyup",a)),n.push(hw(window,"focus",a)))},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var n=this.graph,r=n.get("canvas"),i=t.target,o=t.type;t.canvasX=t.x,t.canvasY=t.y;var a={x:t.canvasX,y:t.canvasY},s=n.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),bw(s)&&(a=n.getPointByClient(t.clientX,t.clientY)),t.x=a.x,t.y=a.y,t.currentTarget=n,i===r)return"mousemove"!==o&&"mouseleave"!==o||this.handleMouseMove(t,"canvas"),t.target=r,t.item=null,n.emit(o,t),void n.emit("canvas:"+o,t);var l=e.getItemRoot(i);if(l){var u=l.get("item");if(!u.destroyed){var c=u.getType();if(t.target=i,t.item=u,t.canvasX===t.x&&t.canvasY===t.y){var d=n.getCanvasByPoint(t.x,t.y);t.canvasX=d.x,t.canvasY=d.y}n.emit(o,t),t.name&&!t.name.includes(":")?n.emit(c+":"+o,t):n.emit(t.name,t),"dragstart"===o&&(this.dragging=!0),"dragend"===o&&(this.dragging=!1),"mousemove"===o&&this.handleMouseMove(t,c)}}else n.emit(o,t)},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){vs(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,e){var n=this.graph,r=this.preItem,i=n.get("canvas"),o=t.target===i?null:t.item;t=yw(t),r&&r!==o&&!r.destroyed&&(t.item=r,this.emitCustomEvent(r.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(r.getType(),"dragleave",t)),o&&r!==o&&(t.item=o,this.emitCustomEvent(e,"mouseenter",t),this.dragging&&this.emitCustomEvent(e,"dragenter",t)),this.preItem=o},e.prototype.emitCustomEvent=function(t,e,n){n.type=e,this.graph.emit(t+":"+e,n)},e.prototype.destroy=function(){var t=this,e=t.graph,n=t.canvasHandler,r=t.extendEvents;e.get("canvas").off("*",n),bs(r,(function(t){t.remove()})),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0},e}(Gm);class ww{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const Cw=t=>"string"==typeof t,Sw=Array.isArray,kw=t=>"number"==typeof t,Ew=t=>Number.isNaN(Number(t)),Mw=t=>null!==t&&"object"==typeof t,Aw=t=>{if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){const e=[];return t.forEach((t=>{e.push(t)})),e.map((t=>Aw(t)))}if("object"==typeof t&&t!=={}){const e=Object.assign({},t);return Object.keys(e).forEach((t=>{e[t]=Aw(e[t])})),e}return t},_w=(t,e)=>{const n=t[e];return Mw(n)?n.cell:n},Tw=(t,e,n)=>{const r=[];for(let i=0;i<t;i++)r[i]=0;return n?(n.forEach((t=>{const n=_w(t,"source"),i=_w(t,"target");n&&(r[e[n]]+=1),i&&(r[e[i]]+=1)})),r):r},Pw=t=>{const e=[],n=t.length;for(let r=0;r<n;r+=1){e[r]=[];for(let i=0;i<n;i+=1)r===i?e[r][i]=0:0!==t[r][i]&&t[r][i]?e[r][i]=t[r][i]:e[r][i]=1/0}for(let r=0;r<n;r+=1)for(let t=0;t<n;t+=1)for(let i=0;i<n;i+=1)e[t][i]>e[t][r]+e[r][i]&&(e[t][i]=e[t][r]+e[r][i]);return e},Iw=(t,e)=>{const{nodes:n,edges:r}=t,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(((t,e)=>{o[t.id]=e;i.push([])})),r&&r.forEach((t=>{const n=_w(t,"source"),r=_w(t,"target"),a=o[n],s=o[r];i[a][s]=1,e||(i[s][a]=1)})),i},Dw=(t,e)=>{if(t&&t.children)for(let n=t.children.length-1;n>=0;n--)if(!Dw(t.children[n],e))return;return!!e(t)},Ow=(t,e)=>{"function"==typeof e&&Dw(t,e)},Rw=t=>"function"==typeof t,Lw=new Map,Bw=(t,e)=>{if(Lw.get(t)&&console.warn(`The layout with the name ${t} exists already, it will be overridden`),Mw(e)){class n extends ww{constructor(t){super();const n=this,r={},i=n.getDefaultCfg();Object.assign(r,i,e,t),Object.keys(r).forEach((t=>{const e=r[t];n[t]=e}))}}Lw.set(t,n)}else Lw.set(t,e)};const Fw=(t,e)=>{let n;return n=t?kw(t)?e=>t:t:t=>e||1,n};function Nw(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,l,u,c,d,h,f=t._root,p={data:r},g=t._x0,v=t._y0,m=t._x1,y=t._y1;if(!f)return t._root=p,t;for(;f.length;)if((u=e>=(o=(g+m)/2))?g=o:m=o,(c=n>=(a=(v+y)/2))?v=a:y=a,i=f,!(f=f[d=c<<1|u]))return i[d]=p,t;if(s=+t._x.call(null,f.data),l=+t._y.call(null,f.data),e===s&&n===l)return p.next=f,i?i[d]=p:t._root=p,t;do{i=i?i[d]=new Array(4):t._root=new Array(4),(u=e>=(o=(g+m)/2))?g=o:m=o,(c=n>=(a=(v+y)/2))?v=a:y=a}while((d=c<<1|u)==(h=(l>=a)<<1|s>=o));return i[h]=f,i[d]=p,t}function zw(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function jw(t){return t[0]}function Gw(t){return t[1]}function Uw(t,e,n){var r=new $w(null==e?jw:e,null==n?Gw:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function $w(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Vw(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Ww=Uw.prototype=$w.prototype;function Hw(t){return function(){return t}}function Yw(t){return 1e-6*(t()-.5)}function Xw(t){return t.x+t.vx}function qw(t){return t.y+t.vy}function Kw(t){var e,n,r,i=1,o=1;function a(){for(var t,a,l,u,c,d,h,f=e.length,p=0;p<o;++p)for(a=Uw(e,Xw,qw).visitAfter(s),t=0;t<f;++t)l=e[t],d=n[l.index],h=d*d,u=l.x+l.vx,c=l.y+l.vy,a.visit(g);function g(t,e,n,o,a){var s=t.data,f=t.r,p=d+f;if(!s)return e>u+p||o<u-p||n>c+p||a<c-p;if(s.index>l.index){var g=u-s.x-s.vx,v=c-s.y-s.vy,m=g*g+v*v;m<p*p&&(0===g&&(m+=(g=Yw(r))*g),0===v&&(m+=(v=Yw(r))*v),m=(p-(m=Math.sqrt(m)))/m*i,l.vx+=(g*=m)*(p=(f*=f)/(h+f)),l.vy+=(v*=m)*p,s.vx-=g*(p=1-p),s.vy-=v*p)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function l(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=Hw(null==t?1:+t)),a.initialize=function(t,n){e=t,r=n,l()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:Hw(+e),l(),a):t},a}function Zw(t){return t.index}function Qw(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Jw(t){var e,n,r,i,o,a,s=Zw,l=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=Hw(30),c=1;function d(r){for(var i=0,s=t.length;i<c;++i)for(var l,u,d,h,f,p,g,v=0;v<s;++v)u=(l=t[v]).source,h=(d=l.target).x+d.vx-u.x-u.vx||Yw(a),f=d.y+d.vy-u.y-u.vy||Yw(a),h*=p=((p=Math.sqrt(h*h+f*f))-n[v])/p*r*e[v],f*=p,d.vx-=h*(g=o[v]),d.vy-=f*g,u.vx+=h*(g=1-g),u.vy+=f*g}function h(){if(r){var a,l,u=r.length,c=t.length,d=new Map(r.map(((t,e)=>[s(t,e,r),t])));for(a=0,i=new Array(u);a<c;++a)(l=t[a]).index=a,"object"!=typeof l.source&&(l.source=Qw(d,l.source)),"object"!=typeof l.target&&(l.target=Qw(d,l.target)),i[l.source.index]=(i[l.source.index]||0)+1,i[l.target.index]=(i[l.target.index]||0)+1;for(a=0,o=new Array(c);a<c;++a)l=t[a],o[a]=i[l.source.index]/(i[l.source.index]+i[l.target.index]);e=new Array(c),f(),n=new Array(c),p()}}function f(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+l(t[n],n,t)}function p(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),d.initialize=function(t,e){r=t,a=e,h()},d.links=function(e){return arguments.length?(t=e,h(),d):t},d.id=function(t){return arguments.length?(s=t,d):s},d.iterations=function(t){return arguments.length?(c=+t,d):c},d.strength=function(t){return arguments.length?(l="function"==typeof t?t:Hw(+t),f(),d):l},d.distance=function(t){return arguments.length?(u="function"==typeof t?t:Hw(+t),p(),d):u},d}Ww.copy=function(){var t,e,n=new $w(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Vw(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Vw(e));return n},Ww.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Nw(this.cover(e,n),e,n,t)},Ww.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),l=1/0,u=1/0,c=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<l&&(l=r),r>c&&(c=r),i<u&&(u=i),i>d&&(d=i));if(l>c||u>d)return this;for(this.cover(l,u).cover(c,d),n=0;n<o;++n)Nw(this,a[n],s[n],t[n]);return this},Ww.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,l=i-n||1,u=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=u,u=a,l*=2,s){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},Ww.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Ww.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ww.find=function(t,e,n){var r,i,o,a,s,l,u,c=this._x0,d=this._y0,h=this._x1,f=this._y1,p=[],g=this._root;for(g&&p.push(new zw(g,c,d,h,f)),null==n?n=1/0:(c=t-n,d=e-n,h=t+n,f=e+n,n*=n);l=p.pop();)if(!(!(g=l.node)||(i=l.x0)>h||(o=l.y0)>f||(a=l.x1)<c||(s=l.y1)<d))if(g.length){var v=(i+a)/2,m=(o+s)/2;p.push(new zw(g[3],v,m,a,s),new zw(g[2],i,m,v,s),new zw(g[1],v,o,a,m),new zw(g[0],i,o,v,m)),(u=(e>=m)<<1|t>=v)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=l)}else{var y=t-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),x=y*y+b*b;if(x<n){var w=Math.sqrt(n=x);c=t-w,d=e-w,h=t+w,f=e+w,r=g.data}}return r},Ww.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,l,u,c,d,h,f=this._root,p=this._x0,g=this._y0,v=this._x1,m=this._y1;if(!f)return this;if(f.length)for(;;){if((u=o>=(s=(p+v)/2))?p=s:v=s,(c=a>=(l=(g+m)/2))?g=l:m=l,e=f,!(f=f[d=c<<1|u]))return this;if(!f.length)break;(e[d+1&3]||e[d+2&3]||e[d+3&3])&&(n=e,h=d)}for(;f.data!==t;)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):e?(i?e[d]=i:delete e[d],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[h]=f:this._root=f),this):(this._root=i,this)},Ww.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Ww.root=function(){return this._root},Ww.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Ww.visit=function(t){var e,n,r,i,o,a,s=[],l=this._root;for(l&&s.push(new zw(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&l.length){var u=(r+o)/2,c=(i+a)/2;(n=l[3])&&s.push(new zw(n,u,c,o,a)),(n=l[2])&&s.push(new zw(n,r,c,u,a)),(n=l[1])&&s.push(new zw(n,u,i,o,c)),(n=l[0])&&s.push(new zw(n,r,i,u,c))}return this},Ww.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new zw(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,l=e.x1,u=e.y1,c=(a+l)/2,d=(s+u)/2;(o=i[0])&&n.push(new zw(o,a,s,c,d)),(o=i[1])&&n.push(new zw(o,c,s,l,d)),(o=i[2])&&n.push(new zw(o,a,d,c,u)),(o=i[3])&&n.push(new zw(o,c,d,l,u))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Ww.x=function(t){return arguments.length?(this._x=t,this):this._x},Ww.y=function(t){return arguments.length?(this._y=t,this):this._y};var tC={value:()=>{}};function eC(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new nC(r)}function nC(t){this._=t}function rC(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function iC(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function oC(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=tC,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}nC.prototype=eC.prototype={constructor:nC,on:function(t,e){var n,r=this._,i=rC(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=oC(r[n],t.name,e);else if(null==e)for(n in r)r[n]=oC(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=iC(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new nC(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var aC,sC,lC=0,uC=0,cC=0,dC=0,hC=0,fC=0,pC="object"==typeof performance&&performance.now?performance:Date,gC="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function vC(){return hC||(gC(mC),hC=pC.now()+fC)}function mC(){hC=0}function yC(){this._call=this._time=this._next=null}function bC(t,e,n){var r=new yC;return r.restart(t,e,n),r}function xC(){hC=(dC=pC.now())+fC,lC=uC=0;try{!function(){vC(),++lC;for(var t,e=aC;e;)(t=hC-e._time)>=0&&e._call.call(null,t),e=e._next;--lC}()}finally{lC=0,function(){var t,e,n=aC,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:aC=e);sC=t,CC(r)}(),hC=0}}function wC(){var t=pC.now(),e=t-dC;e>1e3&&(fC-=e,dC=t)}function CC(t){lC||(uC&&(uC=clearTimeout(uC)),t-hC>24?(t<1/0&&(uC=setTimeout(xC,t-pC.now()-fC)),cC&&(cC=clearInterval(cC))):(cC||(dC=pC.now(),cC=setInterval(wC,1e3)),lC=1,gC(xC)))}yC.prototype=bC.prototype={constructor:yC,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?vC():+n)+(null==e?0:+e),this._next||sC===this||(sC?sC._next=this:aC=this,sC=this),this._call=t,this._time=n,CC()},stop:function(){this._call&&(this._call=null,this._time=1/0,CC())}};const SC=4294967296;function kC(t){return t.x}function EC(t){return t.y}var MC=Math.PI*(3-Math.sqrt(5));function AC(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,l=bC(d),u=eC("tick","end"),c=function(){let t=1;return()=>(t=(1664525*t+1013904223)%SC)/SC}();function d(){h(),u.call("tick",e),n<r&&(l.stop(),u.call("end",e))}function h(r){var l,u,c=t.length;void 0===r&&(r=1);for(var d=0;d<r;++d)for(n+=(o-n)*i,s.forEach((function(t){t(n)})),l=0;l<c;++l)null==(u=t[l]).fx?u.x+=u.vx*=a:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=a:(u.y=u.fy,u.vy=0);return e}function f(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(.5+n),o=n*MC;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,c),e}return null==t&&(t=[]),f(),e={tick:h,restart:function(){return l.restart(d),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),s.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},randomSource:function(t){return arguments.length?(c=t,s.forEach(p),e):c},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,l,u=0,c=t.length;for(null==r?r=1/0:r*=r,u=0;u<c;++u)(a=(i=e-(s=t[u]).x)*i+(o=n-s.y)*o)<r&&(l=s,r=a);return l},on:function(t,n){return arguments.length>1?(u.on(t,n),e):u.on(t)}}}function _C(){var t,e,n,r,i,o=Hw(-30),a=1,s=1/0,l=.81;function u(n){var i,o=t.length,a=Uw(t,kC,EC).visitAfter(d);for(r=n,i=0;i<o;++i)e=t[i],a.visit(h)}function c(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function d(t){var e,n,r,o,a,s=0,l=0;if(t.length){for(r=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,l+=n,r+=n*e.x,o+=n*e.y);t.x=r/l,t.y=o/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function h(t,o,u,c){if(!t.value)return!0;var d=t.x-e.x,h=t.y-e.y,f=c-o,p=d*d+h*h;if(f*f/l<p)return p<s&&(0===d&&(p+=(d=Yw(n))*d),0===h&&(p+=(h=Yw(n))*h),p<a&&(p=Math.sqrt(a*p)),e.vx+=d*t.value*r/p,e.vy+=h*t.value*r/p),!0;if(!(t.length||p>=s)){(t.data!==e||t.next)&&(0===d&&(p+=(d=Yw(n))*d),0===h&&(p+=(h=Yw(n))*h),p<a&&(p=Math.sqrt(a*p)));do{t.data!==e&&(f=i[t.data.index]*r/p,e.vx+=d*f,e.vy+=h*f)}while(t=t.next)}}return u.initialize=function(e,r){t=e,n=r,c()},u.strength=function(t){return arguments.length?(o="function"==typeof t?t:Hw(+t),c(),u):o},u.distanceMin=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.distanceMax=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u.theta=function(t){return arguments.length?(l=t*t,u):Math.sqrt(l)},u}function TC(){function t(t){return()=>t}let e,n=t=>t.cluster,r=t(1),i=t(-1),o=t(100),a=t(.1),s=[0,0],l=[],u={},c=[],d=100,h=100,f={none:{x:0,y:0}},p=[],g="force",v=!0,m=.1;function y(t){if(!v)return y;e.tick(),x();for(let e,r=0,i=l.length,o=t*m;r<i;++r)e=l[r],e.vx+=(f[n(e)].x-e.x)*o,e.vy+=(f[n(e)].y-e.y)*o}function b(){l&&function(){if(!l||!l.length)return;if(void 0===n(l[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");const t=function(){const t=[],e=[],i={};let o=[],a={},s=[];return a=function(t){const e={};return t.forEach((t=>{const r=n(t);e[r]||(e[r]={count:0,sumforceNodeSize:0})})),t.forEach((t=>{const i=n(t),o=r(t),a=e[i];a.count=a.count+1,a.sumforceNodeSize=a.sumforceNodeSize+Math.PI*(o*o)*1.3,e[i]=a})),e}(l),s=function(t){const e={},r=[];t.forEach((t=>{const r=function(t){const e=_w(t,"source"),r=_w(t,"target"),i=n(u[e]),o=n(u[r]);return i<=o?`${i}~${o}`:`${o}~${i}`}(t);let i=0;void 0!==e[r]&&(i=e[r]),i+=1,e[r]=i}));return Object.entries(e).forEach((([t,e])=>{const n=t.split("~")[0],i=t.split("~")[1];void 0!==n&&void 0!==i&&r.push({source:n,target:i,count:e})})),r}(c),o=Object.keys(a),o.forEach(((e,n)=>{const r=a[e];t.push({id:e,size:r.count,r:Math.sqrt(r.sumforceNodeSize/Math.PI)}),i[e]=n})),s.forEach((t=>{const n=_w(t,"source"),r=_w(t,"target"),o=i[n],a=i[r];void 0!==o&&void 0!==a&&e.push({source:o,target:a,count:t.count})})),{nodes:t,links:e}}();e=AC(t.nodes).force("x",function(t){var e,n,r,i=Hw(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=Hw(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Hw(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"==typeof e?e:Hw(+e),a(),o):t},o}(d).strength(.1)).force("y",function(t){var e,n,r,i=Hw(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=Hw(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Hw(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"==typeof e?e:Hw(+e),a(),o):t},o}(h).strength(.1)).force("collide",Kw((t=>t.r)).iterations(4)).force("charge",_C().strength(i)).force("links",Jw(t.nodes.length?t.links:[]).distance(o).strength(a)),p=e.nodes(),x()}()}function x(){return f={none:{x:0,y:0}},p.forEach((t=>{f[t.id]={x:t.x-s[0],y:t.y-s[1]}})),f}function w(t){u={},t.forEach((t=>{u[t.id]=t}))}return y.initialize=t=>{l=t,b()},y.template=function(t){return arguments.length?(g=t,b(),y):g},y.groupBy=function(t){return arguments.length?"string"==typeof t?(n=e=>e[t],y):(n=t,y):n},y.enableGrouping=function(t){return arguments.length?(v=t,y):v},y.strength=function(t){return arguments.length?(m=t,y):m},y.centerX=function(t){return arguments.length?(d=t,y):d},y.centerY=function(t){return arguments.length?(h=t,y):h},y.nodes=function(t){return arguments.length?(w(t||[]),l=t||[],y):l},y.links=function(t){return arguments.length?(c=t||[],b(),y):c},y.forceNodeSize=function(e){return arguments.length?(r="function"==typeof e?e:t(+e),b(),y):r},y.nodeSize=y.forceNodeSize,y.forceCharge=function(e){return arguments.length?(i="function"==typeof e?e:t(+e),b(),y):i},y.forceLinkDistance=function(e){return arguments.length?(o="function"==typeof e?e:t(+e),b(),y):o},y.forceLinkStrength=function(e){return arguments.length?(a="function"==typeof e?e:t(+e),b(),y):a},y.offset=function(t){return arguments.length?(s=t,y):s},y.getFocis=x,y}const PC="LAYOUT_TICK",IC="GPU_LAYOUT_END";function DC(t,e){const n=t.degree,r=e.degree;return n<r?-1:n>r?1:0}var OC=function(){this.__data__=[],this.size=0};var RC=function(t,e){return t===e||t!=t&&e!=e};var LC=function(t,e){for(var n=t.length;n--;)if(RC(t[n][0],e))return n;return-1},BC=Array.prototype.splice;var FC=function(t){var e=this.__data__,n=LC(e,t);return!(n<0)&&(n==e.length-1?e.pop():BC.call(e,n,1),--this.size,!0)};var NC=function(t){var e=this.__data__,n=LC(e,t);return n<0?void 0:e[n][1]};var zC=function(t){return LC(this.__data__,t)>-1};var jC=function(t,e){var n=this.__data__,r=LC(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function GC(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}GC.prototype.clear=OC,GC.prototype.delete=FC,GC.prototype.get=NC,GC.prototype.has=zC,GC.prototype.set=jC;var UC=GC;var $C=function(){this.__data__=new UC,this.size=0};var VC=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var WC=function(t){return this.__data__.get(t)};var HC=function(t){return this.__data__.has(t)},YC="object"==typeof Ym&&Ym&&Ym.Object===Object&&Ym,XC="object"==typeof self&&self&&self.Object===Object&&self,qC=YC||XC||Function("return this")(),KC=qC.Symbol,ZC=Object.prototype,QC=ZC.hasOwnProperty,JC=ZC.toString,tS=KC?KC.toStringTag:void 0;var eS=function(t){var e=QC.call(t,tS),n=t[tS];try{t[tS]=void 0;var r=!0}catch(o){}var i=JC.call(t);return r&&(e?t[tS]=n:delete t[tS]),i},nS=Object.prototype.toString;var rS=function(t){return nS.call(t)},iS=KC?KC.toStringTag:void 0;var oS=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":iS&&iS in Object(t)?eS(t):rS(t)};var aS=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var sS,lS=function(t){if(!aS(t))return!1;var e=oS(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},uS=qC["__core-js_shared__"],cS=(sS=/[^.]+$/.exec(uS&&uS.keys&&uS.keys.IE_PROTO||""))?"Symbol(src)_1."+sS:"";var dS=function(t){return!!cS&&cS in t},hS=Function.prototype.toString;var fS=function(t){if(null!=t){try{return hS.call(t)}catch(e){}try{return t+""}catch(e){}}return""},pS=/^\[object .+?Constructor\]$/,gS=Function.prototype,vS=Object.prototype,mS=gS.toString,yS=vS.hasOwnProperty,bS=RegExp("^"+mS.call(yS).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var xS=function(t){return!(!aS(t)||dS(t))&&(lS(t)?bS:pS).test(fS(t))};var wS=function(t,e){return null==t?void 0:t[e]};var CS=function(t,e){var n=wS(t,e);return xS(n)?n:void 0},SS=CS(qC,"Map"),kS=CS(Object,"create");var ES=function(){this.__data__=kS?kS(null):{},this.size=0};var MS=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},AS=Object.prototype.hasOwnProperty;var _S=function(t){var e=this.__data__;if(kS){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return AS.call(e,t)?e[t]:void 0},TS=Object.prototype.hasOwnProperty;var PS=function(t){var e=this.__data__;return kS?void 0!==e[t]:TS.call(e,t)};var IS=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=kS&&void 0===e?"__lodash_hash_undefined__":e,this};function DS(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}DS.prototype.clear=ES,DS.prototype.delete=MS,DS.prototype.get=_S,DS.prototype.has=PS,DS.prototype.set=IS;var OS=DS;var RS=function(){this.size=0,this.__data__={hash:new OS,map:new(SS||UC),string:new OS}};var LS=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var BS=function(t,e){var n=t.__data__;return LS(e)?n["string"==typeof e?"string":"hash"]:n.map};var FS=function(t){var e=BS(this,t).delete(t);return this.size-=e?1:0,e};var NS=function(t){return BS(this,t).get(t)};var zS=function(t){return BS(this,t).has(t)};var jS=function(t,e){var n=BS(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function GS(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}GS.prototype.clear=RS,GS.prototype.delete=FS,GS.prototype.get=NS,GS.prototype.has=zS,GS.prototype.set=jS;var US=GS;var $S=function(t,e){var n=this.__data__;if(n instanceof UC){var r=n.__data__;if(!SS||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new US(r)}return n.set(t,e),this.size=n.size,this};function VS(t){var e=this.__data__=new UC(t);this.size=e.size}VS.prototype.clear=$C,VS.prototype.delete=VC,VS.prototype.get=WC,VS.prototype.has=HC,VS.prototype.set=$S;var WS=VS;var HS=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},YS=function(){try{var t=CS(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();var XS=function(t,e,n){"__proto__"==e&&YS?YS(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},qS=Object.prototype.hasOwnProperty;var KS=function(t,e,n){var r=t[e];qS.call(t,e)&&RC(r,n)&&(void 0!==n||e in t)||XS(t,e,n)};var ZS=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=r?r(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),i?XS(n,s,l):KS(n,s,l)}return n};var QS=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var JS=function(t){return null!=t&&"object"==typeof t};var tk=function(t){return JS(t)&&"[object Arguments]"==oS(t)},ek=Object.prototype,nk=ek.hasOwnProperty,rk=ek.propertyIsEnumerable,ik=tk(function(){return arguments}())?tk:function(t){return JS(t)&&nk.call(t,"callee")&&!rk.call(t,"callee")},ok=Array.isArray;var ak=function(){return!1},sk=qm((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?qC.Buffer:void 0,o=(i?i.isBuffer:void 0)||ak;t.exports=o})),lk=/^(?:0|[1-9]\d*)$/;var uk=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&lk.test(t))&&t>-1&&t%1==0&&t<e};var ck=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},dk={};dk["[object Float32Array]"]=dk["[object Float64Array]"]=dk["[object Int8Array]"]=dk["[object Int16Array]"]=dk["[object Int32Array]"]=dk["[object Uint8Array]"]=dk["[object Uint8ClampedArray]"]=dk["[object Uint16Array]"]=dk["[object Uint32Array]"]=!0,dk["[object Arguments]"]=dk["[object Array]"]=dk["[object ArrayBuffer]"]=dk["[object Boolean]"]=dk["[object DataView]"]=dk["[object Date]"]=dk["[object Error]"]=dk["[object Function]"]=dk["[object Map]"]=dk["[object Number]"]=dk["[object Object]"]=dk["[object RegExp]"]=dk["[object Set]"]=dk["[object String]"]=dk["[object WeakMap]"]=!1;var hk=function(t){return JS(t)&&ck(t.length)&&!!dk[oS(t)]};var fk=function(t){return function(e){return t(e)}},pk=qm((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n&&YC.process,o=function(){try{var t=r&&r.require&&r.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(e){}}();t.exports=o})),gk=pk&&pk.isTypedArray,vk=gk?fk(gk):hk,mk=Object.prototype.hasOwnProperty;var yk=function(t,e){var n=ok(t),r=!n&&ik(t),i=!n&&!r&&sk(t),o=!n&&!r&&!i&&vk(t),a=n||r||i||o,s=a?QS(t.length,String):[],l=s.length;for(var u in t)!e&&!mk.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||uk(u,l))||s.push(u);return s},bk=Object.prototype;var xk=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||bk)};var wk=function(t,e){return function(n){return t(e(n))}},Ck=wk(Object.keys,Object),Sk=Object.prototype.hasOwnProperty;var kk=function(t){if(!xk(t))return Ck(t);var e=[];for(var n in Object(t))Sk.call(t,n)&&"constructor"!=n&&e.push(n);return e};var Ek=function(t){return null!=t&&ck(t.length)&&!lS(t)};var Mk=function(t){return Ek(t)?yk(t):kk(t)};var Ak=function(t,e){return t&&ZS(e,Mk(e),t)};var _k=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},Tk=Object.prototype.hasOwnProperty;var Pk=function(t){if(!aS(t))return _k(t);var e=xk(t),n=[];for(var r in t)("constructor"!=r||!e&&Tk.call(t,r))&&n.push(r);return n};var Ik=function(t){return Ek(t)?yk(t,!0):Pk(t)};var Dk=function(t,e){return t&&ZS(e,Ik(e),t)},Ok=qm((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?qC.Buffer:void 0,o=i?i.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=o?o(n):new t.constructor(n);return t.copy(r),r}}));var Rk=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e};var Lk=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o};var Bk=function(){return[]},Fk=Object.prototype.propertyIsEnumerable,Nk=Object.getOwnPropertySymbols,zk=Nk?function(t){return null==t?[]:(t=Object(t),Lk(Nk(t),(function(e){return Fk.call(t,e)})))}:Bk;var jk=function(t,e){return ZS(t,zk(t),e)};var Gk=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},Uk=wk(Object.getPrototypeOf,Object),$k=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Gk(e,zk(t)),t=Uk(t);return e}:Bk;var Vk=function(t,e){return ZS(t,$k(t),e)};var Wk=function(t,e,n){var r=e(t);return ok(t)?r:Gk(r,n(t))};var Hk=function(t){return Wk(t,Mk,zk)};var Yk=function(t){return Wk(t,Ik,$k)},Xk=CS(qC,"DataView"),qk=CS(qC,"Promise"),Kk=CS(qC,"Set"),Zk=CS(qC,"WeakMap"),Qk=fS(Xk),Jk=fS(SS),tE=fS(qk),eE=fS(Kk),nE=fS(Zk),rE=oS;(Xk&&"[object DataView]"!=rE(new Xk(new ArrayBuffer(1)))||SS&&"[object Map]"!=rE(new SS)||qk&&"[object Promise]"!=rE(qk.resolve())||Kk&&"[object Set]"!=rE(new Kk)||Zk&&"[object WeakMap]"!=rE(new Zk))&&(rE=function(t){var e=oS(t),n="[object Object]"==e?t.constructor:void 0,r=n?fS(n):"";if(r)switch(r){case Qk:return"[object DataView]";case Jk:return"[object Map]";case tE:return"[object Promise]";case eE:return"[object Set]";case nE:return"[object WeakMap]"}return e});var iE=rE,oE=Object.prototype.hasOwnProperty;var aE=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&oE.call(t,"index")&&(n.index=t.index,n.input=t.input),n},sE=qC.Uint8Array;var lE=function(t){var e=new t.constructor(t.byteLength);return new sE(e).set(new sE(t)),e};var uE=function(t,e){var n=e?lE(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},cE=/\w*$/;var dE=function(t){var e=new t.constructor(t.source,cE.exec(t));return e.lastIndex=t.lastIndex,e},hE=KC?KC.prototype:void 0,fE=hE?hE.valueOf:void 0;var pE=function(t){return fE?Object(fE.call(t)):{}};var gE=function(t,e){var n=e?lE(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var vE=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return lE(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return uE(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return gE(t,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return dE(t);case"[object Set]":return new r;case"[object Symbol]":return pE(t)}},mE=Object.create,yE=function(){function t(){}return function(e){if(!aS(e))return{};if(mE)return mE(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var bE=function(t){return"function"!=typeof t.constructor||xk(t)?{}:yE(Uk(t))};var xE=function(t){return JS(t)&&"[object Map]"==iE(t)},wE=pk&&pk.isMap,CE=wE?fk(wE):xE;var SE=function(t){return JS(t)&&"[object Set]"==iE(t)},kE=pk&&pk.isSet,EE=kE?fk(kE):SE,ME={};ME["[object Arguments]"]=ME["[object Array]"]=ME["[object ArrayBuffer]"]=ME["[object DataView]"]=ME["[object Boolean]"]=ME["[object Date]"]=ME["[object Float32Array]"]=ME["[object Float64Array]"]=ME["[object Int8Array]"]=ME["[object Int16Array]"]=ME["[object Int32Array]"]=ME["[object Map]"]=ME["[object Number]"]=ME["[object Object]"]=ME["[object RegExp]"]=ME["[object Set]"]=ME["[object String]"]=ME["[object Symbol]"]=ME["[object Uint8Array]"]=ME["[object Uint8ClampedArray]"]=ME["[object Uint16Array]"]=ME["[object Uint32Array]"]=!0,ME["[object Error]"]=ME["[object Function]"]=ME["[object WeakMap]"]=!1;var AE=function t(e,n,r,i,o,a){var s,l=1&n,u=2&n,c=4&n;if(r&&(s=o?r(e,i,o,a):r(e)),void 0!==s)return s;if(!aS(e))return e;var d=ok(e);if(d){if(s=aE(e),!l)return Rk(e,s)}else{var h=iE(e),f="[object Function]"==h||"[object GeneratorFunction]"==h;if(sk(e))return Ok(e,l);if("[object Object]"==h||"[object Arguments]"==h||f&&!o){if(s=u||f?{}:bE(e),!l)return u?Vk(e,Dk(s,e)):jk(e,Ak(s,e))}else{if(!ME[h])return o?e:{};s=vE(e,h,l)}}a||(a=new WS);var p=a.get(e);if(p)return p;a.set(e,s),EE(e)?e.forEach((function(i){s.add(t(i,n,r,i,e,a))})):CE(e)&&e.forEach((function(i,o){s.set(o,t(i,n,r,o,e,a))}));var g=d?void 0:(c?u?Yk:Hk:u?Ik:Mk)(e);return HS(g||e,(function(i,o){g&&(i=e[o=i]),KS(s,o,t(i,n,r,o,e,a))})),s};var _E=function(t){return AE(t,4)};var TE=function(t){return function(){return t}};var PE=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(!1===n(o[l],l,o))break}return e}}();var IE=function(t,e){return t&&PE(t,e,Mk)};var DE=function(t,e){return function(n,r){if(null==n)return n;if(!Ek(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}(IE);var OE=function(t){return t};var RE=function(t){return"function"==typeof t?t:OE};var LE=function(t,e){return(ok(t)?HS:DE)(t,RE(e))},BE=LE;var FE=function(t,e){var n=[];return DE(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n};var NE=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var zE=function(t){return this.__data__.has(t)};function jE(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new US;++e<n;)this.add(t[e])}jE.prototype.add=jE.prototype.push=NE,jE.prototype.has=zE;var GE=jE;var UE=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};var $E=function(t,e){return t.has(e)};var VE=function(t,e,n,r,i,o){var a=1&n,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var d=-1,h=!0,f=2&n?new GE:void 0;for(o.set(t,e),o.set(e,t);++d<s;){var p=t[d],g=e[d];if(r)var v=a?r(g,p,d,e,t,o):r(p,g,d,t,e,o);if(void 0!==v){if(v)continue;h=!1;break}if(f){if(!UE(e,(function(t,e){if(!$E(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)}))){h=!1;break}}else if(p!==g&&!i(p,g,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h};var WE=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n};var HE=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},YE=KC?KC.prototype:void 0,XE=YE?YE.valueOf:void 0;var qE=function(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new sE(t),new sE(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return RC(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=WE;case"[object Set]":var l=1&r;if(s||(s=HE),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=2,a.set(t,e);var c=VE(s(t),s(e),r,i,o,a);return a.delete(t),c;case"[object Symbol]":if(XE)return XE.call(t)==XE.call(e)}return!1},KE=Object.prototype.hasOwnProperty;var ZE=function(t,e,n,r,i,o){var a=1&n,s=Hk(t),l=s.length;if(l!=Hk(e).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in e:KE.call(e,c)))return!1}var d=o.get(t),h=o.get(e);if(d&&h)return d==e&&h==t;var f=!0;o.set(t,e),o.set(e,t);for(var p=a;++u<l;){var g=t[c=s[u]],v=e[c];if(r)var m=a?r(v,g,c,e,t,o):r(g,v,c,t,e,o);if(!(void 0===m?g===v||i(g,v,n,r,o):m)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var y=t.constructor,b=e.constructor;y==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(t),o.delete(e),f},QE=Object.prototype.hasOwnProperty;var JE=function(t,e,n,r,i,o){var a=ok(t),s=ok(e),l=a?"[object Array]":iE(t),u=s?"[object Array]":iE(e),c="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),d="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),h=l==u;if(h&&sk(t)){if(!sk(e))return!1;a=!0,c=!1}if(h&&!c)return o||(o=new WS),a||vk(t)?VE(t,e,n,r,i,o):qE(t,e,l,n,r,i,o);if(!(1&n)){var f=c&&QE.call(t,"__wrapped__"),p=d&&QE.call(e,"__wrapped__");if(f||p){var g=f?t.value():t,v=p?e.value():e;return o||(o=new WS),i(g,v,n,r,o)}}return!!h&&(o||(o=new WS),ZE(t,e,n,r,i,o))};var tM=function t(e,n,r,i,o){return e===n||(null==e||null==n||!JS(e)&&!JS(n)?e!=e&&n!=n:JE(e,n,r,i,t,o))};var eM=function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var l=(s=n[i])[0],u=t[l],c=s[1];if(a&&s[2]){if(void 0===u&&!(l in t))return!1}else{var d=new WS;if(r)var h=r(u,c,l,t,e,d);if(!(void 0===h?tM(c,u,3,r,d):h))return!1}}return!0};var nM=function(t){return t==t&&!aS(t)};var rM=function(t){for(var e=Mk(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,nM(i)]}return e};var iM=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}};var oM=function(t){var e=rM(t);return 1==e.length&&e[0][2]?iM(e[0][0],e[0][1]):function(n){return n===t||eM(n,t,e)}};var aM=function(t){return"symbol"==typeof t||JS(t)&&"[object Symbol]"==oS(t)},sM=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lM=/^\w*$/;var uM=function(t,e){if(ok(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!aM(t))||(lM.test(t)||!sM.test(t)||null!=e&&t in Object(e))};function cM(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(cM.Cache||US),n}cM.Cache=US;var dM=cM;var hM=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fM=/\\(\\)?/g,pM=function(t){var e=dM(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(hM,(function(t,n,r,i){e.push(r?i.replace(fM,"$1"):n||t)})),e}));var gM=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},vM=KC?KC.prototype:void 0,mM=vM?vM.toString:void 0;var yM=function t(e){if("string"==typeof e)return e;if(ok(e))return gM(e,t)+"";if(aM(e))return mM?mM.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n};var bM=function(t){return null==t?"":yM(t)};var xM=function(t,e){return ok(t)?t:uM(t,e)?[t]:pM(bM(t))};var wM=function(t){if("string"==typeof t||aM(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e};var CM=function(t,e){for(var n=0,r=(e=xM(e,t)).length;null!=t&&n<r;)t=t[wM(e[n++])];return n&&n==r?t:void 0};var SM=function(t,e,n){var r=null==t?void 0:CM(t,e);return void 0===r?n:r};var kM=function(t,e){return null!=t&&e in Object(t)};var EM=function(t,e,n){for(var r=-1,i=(e=xM(e,t)).length,o=!1;++r<i;){var a=wM(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ck(i)&&uk(a,i)&&(ok(t)||ik(t))};var MM=function(t,e){return null!=t&&EM(t,e,kM)};var AM=function(t,e){return uM(t)&&nM(e)?iM(wM(t),e):function(n){var r=SM(n,t);return void 0===r&&r===e?MM(n,t):tM(e,r,3)}};var _M=function(t){return function(e){return null==e?void 0:e[t]}};var TM=function(t){return function(e){return CM(e,t)}};var PM=function(t){return uM(t)?_M(wM(t)):TM(t)};var IM=function(t){return"function"==typeof t?t:null==t?OE:"object"==typeof t?ok(t)?AM(t[0],t[1]):oM(t):PM(t)};var DM=function(t,e){return(ok(t)?Lk:FE)(t,IM(e))},OM=Object.prototype.hasOwnProperty;var RM=function(t,e){return null!=t&&OM.call(t,e)};var LM=function(t,e){return null!=t&&EM(t,e,RM)},BM=Object.prototype.hasOwnProperty;var FM=function(t){if(null==t)return!0;if(Ek(t)&&(ok(t)||"string"==typeof t||"function"==typeof t.splice||sk(t)||vk(t)||ik(t)))return!t.length;var e=iE(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(xk(t))return!kk(t).length;for(var n in t)if(BM.call(t,n))return!1;return!0};var NM=function(t){return void 0===t};var zM=function(t,e){var n=-1,r=Ek(t)?Array(t.length):[];return DE(t,(function(t,i,o){r[++n]=e(t,i,o)})),r};var jM=function(t,e){return(ok(t)?gM:zM)(t,IM(e))};var GM=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n};var UM=function(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n};var $M=function(t,e,n){var r=ok(t)?GM:UM,i=arguments.length<3;return r(t,IM(e),n,i,DE)};var VM=function(t){return"string"==typeof t||!ok(t)&&JS(t)&&"[object String]"==oS(t)},WM=_M("length"),HM=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var YM=function(t){return HM.test(t)},XM="[\\ud800-\\udfff]",qM="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",KM="\\ud83c[\\udffb-\\udfff]",ZM="[^\\ud800-\\udfff]",QM="(?:\\ud83c[\\udde6-\\uddff]){2}",JM="[\\ud800-\\udbff][\\udc00-\\udfff]",tA="(?:"+qM+"|"+KM+")"+"?",eA="[\\ufe0e\\ufe0f]?"+tA+("(?:\\u200d(?:"+[ZM,QM,JM].join("|")+")[\\ufe0e\\ufe0f]?"+tA+")*"),nA="(?:"+[ZM+qM+"?",qM,QM,JM,XM].join("|")+")",rA=RegExp(KM+"(?="+KM+")|"+nA+eA,"g");var iA=function(t){for(var e=rA.lastIndex=0;rA.test(t);)++e;return e};var oA=function(t){return YM(t)?iA(t):WM(t)};var aA=function(t){if(null==t)return 0;if(Ek(t))return VM(t)?oA(t):t.length;var e=iE(t);return"[object Map]"==e||"[object Set]"==e?t.size:kk(t).length};var sA=function(t,e,n){var r=ok(t),i=r||sk(t)||vk(t);if(e=IM(e),null==n){var o=t&&t.constructor;n=i?r?new o:[]:aS(t)&&lS(o)?yE(Uk(t)):{}}return(i?HS:IE)(t,(function(t,r,i){return e(n,t,r,i)})),n},lA=KC?KC.isConcatSpreadable:void 0;var uA=function(t){return ok(t)||ik(t)||!!(lA&&t&&t[lA])};var cA=function t(e,n,r,i,o){var a=-1,s=e.length;for(r||(r=uA),o||(o=[]);++a<s;){var l=e[a];n>0&&r(l)?n>1?t(l,n-1,r,i,o):Gk(o,l):i||(o[o.length]=l)}return o};var dA=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},hA=Math.max;var fA=function(t,e,n){return e=hA(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=hA(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),dA(t,this,s)}},pA=YS?function(t,e){return YS(t,"toString",{configurable:!0,enumerable:!1,value:TE(e),writable:!0})}:OE,gA=Date.now;var vA=function(t){var e=0,n=0;return function(){var r=gA(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(pA);var mA=function(t,e){return vA(fA(t,e,OE),t+"")};var yA=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1};var bA=function(t){return t!=t};var xA=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1};var wA=function(t,e,n){return e==e?xA(t,e,n):yA(t,bA,n)};var CA=function(t,e){return!!(null==t?0:t.length)&&wA(t,e,0)>-1};var SA=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1};var kA=function(){},EA=Kk&&1/HE(new Kk([,-0]))[1]==1/0?function(t){return new Kk(t)}:kA;var MA=function(t,e,n){var r=-1,i=CA,o=t.length,a=!0,s=[],l=s;if(n)a=!1,i=SA;else if(o>=200){var u=e?null:EA(t);if(u)return HE(u);a=!1,i=$E,l=new GE}else l=e?[]:s;t:for(;++r<o;){var c=t[r],d=e?e(c):c;if(c=n||0!==c?c:0,a&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue t;e&&l.push(d),s.push(c)}else i(l,d,n)||(l!==s&&l.push(d),s.push(c))}return s};var AA=function(t){return JS(t)&&Ek(t)},_A=mA((function(t){return MA(cA(t,1,AA,!0))}));var TA=function(t,e){return gM(e,(function(e){return t[e]}))};var PA,IA=function(t){return null==t?[]:TA(t,Mk(t))};try{PA={clone:_E,constant:TE,each:BE,filter:DM,has:LM,isArray:ok,isEmpty:FM,isFunction:lS,isUndefined:NM,keys:Mk,map:jM,reduce:$M,size:aA,transform:sA,union:_A,values:IA}}catch(PCt){}PA||(PA=window._);var DA=PA,OA=RA;function RA(t){this._isDirected=!DA.has(t,"directed")||t.directed,this._isMultigraph=!!DA.has(t,"multigraph")&&t.multigraph,this._isCompound=!!DA.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=DA.constant(void 0),this._defaultEdgeLabelFn=DA.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function LA(t,e){t[e]?t[e]++:t[e]=1}function BA(t,e){--t[e]||delete t[e]}function FA(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}return i+""+o+""+(DA.isUndefined(r)?"\0":r)}function NA(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return r&&(s.name=r),s}function zA(t,e){return FA(t,e.v,e.w,e.name)}RA.prototype._nodeCount=0,RA.prototype._edgeCount=0,RA.prototype.isDirected=function(){return this._isDirected},RA.prototype.isMultigraph=function(){return this._isMultigraph},RA.prototype.isCompound=function(){return this._isCompound},RA.prototype.setGraph=function(t){return this._label=t,this},RA.prototype.graph=function(){return this._label},RA.prototype.setDefaultNodeLabel=function(t){return DA.isFunction(t)||(t=DA.constant(t)),this._defaultNodeLabelFn=t,this},RA.prototype.nodeCount=function(){return this._nodeCount},RA.prototype.nodes=function(){return DA.keys(this._nodes)},RA.prototype.sources=function(){var t=this;return DA.filter(this.nodes(),(function(e){return DA.isEmpty(t._in[e])}))},RA.prototype.sinks=function(){var t=this;return DA.filter(this.nodes(),(function(e){return DA.isEmpty(t._out[e])}))},RA.prototype.setNodes=function(t,e){var n=arguments,r=this;return DA.each(t,(function(t){n.length>1?r.setNode(t,e):r.setNode(t)})),this},RA.prototype.setNode=function(t,e){return DA.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\0",this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},RA.prototype.node=function(t){return this._nodes[t]},RA.prototype.hasNode=function(t){return DA.has(this._nodes,t)},RA.prototype.removeNode=function(t){var e=this;if(DA.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],DA.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),DA.each(DA.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],DA.each(DA.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},RA.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(DA.isUndefined(e))e="\0";else{for(var n=e+="";!DA.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},RA.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},RA.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if("\0"!==e)return e}},RA.prototype.children=function(t){if(DA.isUndefined(t)&&(t="\0"),this._isCompound){var e=this._children[t];if(e)return DA.keys(e)}else{if("\0"===t)return this.nodes();if(this.hasNode(t))return[]}},RA.prototype.predecessors=function(t){var e=this._preds[t];if(e)return DA.keys(e)},RA.prototype.successors=function(t){var e=this._sucs[t];if(e)return DA.keys(e)},RA.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return DA.union(e,this.successors(t))},RA.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},RA.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;DA.each(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),DA.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var r={};function i(t){var o=n.parent(t);return void 0===o||e.hasNode(o)?(r[t]=o,o):o in r?r[o]:i(o)}return this._isCompound&&DA.each(e.nodes(),(function(t){e.setParent(t,i(t))})),e},RA.prototype.setDefaultEdgeLabel=function(t){return DA.isFunction(t)||(t=DA.constant(t)),this._defaultEdgeLabelFn=t,this},RA.prototype.edgeCount=function(){return this._edgeCount},RA.prototype.edges=function(){return DA.values(this._edgeObjs)},RA.prototype.setPath=function(t,e){var n=this,r=arguments;return DA.reduce(t,(function(t,i){return r.length>1?n.setEdge(t,i,e):n.setEdge(t,i),i})),this},RA.prototype.setEdge=function(){var t,e,n,r,i=!1,o=arguments[0];"object"==typeof o&&null!==o&&"v"in o?(t=o.v,e=o.w,n=o.name,2===arguments.length&&(r=arguments[1],i=!0)):(t=o,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),t=""+t,e=""+e,DA.isUndefined(n)||(n=""+n);var a=FA(this._isDirected,t,e,n);if(DA.has(this._edgeLabels,a))return i&&(this._edgeLabels[a]=r),this;if(!DA.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[a]=i?r:this._defaultEdgeLabelFn(t,e,n);var s=NA(this._isDirected,t,e,n);return t=s.v,e=s.w,Object.freeze(s),this._edgeObjs[a]=s,LA(this._preds[e],t),LA(this._sucs[t],e),this._in[e][a]=s,this._out[t][a]=s,this._edgeCount++,this},RA.prototype.edge=function(t,e,n){var r=1===arguments.length?zA(this._isDirected,arguments[0]):FA(this._isDirected,t,e,n);return this._edgeLabels[r]},RA.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?zA(this._isDirected,arguments[0]):FA(this._isDirected,t,e,n);return DA.has(this._edgeLabels,r)},RA.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?zA(this._isDirected,arguments[0]):FA(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],BA(this._preds[e],t),BA(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},RA.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=DA.values(n);return e?DA.filter(r,(function(t){return t.v===e})):r}},RA.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=DA.values(n);return e?DA.filter(r,(function(t){return t.w===e})):r}},RA.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))};var jA={Graph:OA,version:"2.1.8"},GA={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:UA(t),edges:$A(t)};DA.isUndefined(t.graph())||(e.value=DA.clone(t.graph()));return e},read:function(t){var e=new OA(t.options).setGraph(t.value);return DA.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),DA.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}};function UA(t){return DA.map(t.nodes(),(function(e){var n=t.node(e),r=t.parent(e),i={v:e};return DA.isUndefined(n)||(i.value=n),DA.isUndefined(r)||(i.parent=r),i}))}function $A(t){return DA.map(t.edges(),(function(e){var n=t.edge(e),r={v:e.v,w:e.w};return DA.isUndefined(e.name)||(r.name=e.name),DA.isUndefined(n)||(r.value=n),r}))}var VA=function(t){var e,n={},r=[];function i(r){DA.has(n,r)||(n[r]=!0,e.push(r),DA.each(t.successors(r),i),DA.each(t.predecessors(r),i))}return DA.each(t.nodes(),(function(t){e=[],i(t),e.length&&r.push(e)})),r};var WA=HA;function HA(){this._arr=[],this._keyIndices={}}HA.prototype.size=function(){return this._arr.length},HA.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},HA.prototype.has=function(t){return DA.has(this._keyIndices,t)},HA.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},HA.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},HA.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!DA.has(n,t)){var r=this._arr,i=r.length;return n[t]=i,r.push({key:t,priority:e}),this._decrease(i),!0}return!1},HA.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},HA.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},HA.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},HA.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},HA.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e};var YA=function(t,e,n,r){return function(t,e,n,r){var i,o,a={},s=new WA,l=function(t){var e=t.v!==i?t.v:t.w,r=a[e],l=n(t),u=o.distance+l;if(l<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+l);u<r.distance&&(r.distance=u,r.predecessor=i,s.decrease(e,u))};t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;a[t]={distance:n},s.add(t,n)}));for(;s.size()>0&&(i=s.removeMin(),(o=a[i]).distance!==Number.POSITIVE_INFINITY);)r(i).forEach(l);return a}(t,String(e),n||XA,r||function(e){return t.outEdges(e)})},XA=DA.constant(1);var qA=function(t,e,n){return DA.transform(t.nodes(),(function(r,i){r[i]=YA(t,i,e,n)}),{})};var KA=function(t){var e=0,n=[],r={},i=[];function o(a){var s=r[a]={onStack:!0,lowlink:e,index:e++};if(n.push(a),t.successors(a).forEach((function(t){DA.has(r,t)?r[t].onStack&&(s.lowlink=Math.min(s.lowlink,r[t].index)):(o(t),s.lowlink=Math.min(s.lowlink,r[t].lowlink))})),s.lowlink===s.index){var l,u=[];do{l=n.pop(),r[l].onStack=!1,u.push(l)}while(a!==l);i.push(u)}}return t.nodes().forEach((function(t){DA.has(r,t)||o(t)})),i};var ZA=function(t){return DA.filter(KA(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))};var QA=function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach((function(t){r[t]={},r[t][t]={distance:0},i.forEach((function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}}))})),i.forEach((function(t){var e=r[t];i.forEach((function(n){var o=r[n];i.forEach((function(n){var r=o[t],i=e[n],a=o[n],s=r.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)}))}))})),r}(t,e||JA,n||function(e){return t.outEdges(e)})},JA=DA.constant(1);var t_=e_;function e_(t){var e={},n={},r=[];if(DA.each(t.sinks(),(function i(o){if(DA.has(n,o))throw new n_;DA.has(e,o)||(n[o]=!0,e[o]=!0,DA.each(t.predecessors(o),i),delete n[o],r.push(o))})),DA.size(e)!==t.nodeCount())throw new n_;return r}function n_(){}e_.CycleException=n_,n_.prototype=new Error;var r_=function(t,e,n){DA.isArray(e)||(e=[e]);var r=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],o={};return DA.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);i_(t,e,"post"===n,o,r,i)})),i};function i_(t,e,n,r,i,o){DA.has(r,e)||(r[e]=!0,n||o.push(e),DA.each(i(e),(function(e){i_(t,e,n,r,i,o)})),n&&o.push(e))}var o_,a_={components:VA,dijkstra:YA,dijkstraAll:qA,findCycles:ZA,floydWarshall:QA,isAcyclic:function(t){try{t_(t)}catch(PCt){if(PCt instanceof t_.CycleException)return!1;throw PCt}return!0},postorder:function(t,e){return r_(t,e,"post")},preorder:function(t,e){return r_(t,e,"pre")},prim:function(t,e){var n,r=new OA,i={},o=new WA;function a(t){var r=t.v===n?t.w:t.v,a=o.priority(r);if(void 0!==a){var s=e(t);s<a&&(i[r]=n,o.decrease(r,s))}}if(0===t.nodeCount())return r;DA.each(t.nodes(),(function(t){o.add(t,Number.POSITIVE_INFINITY),r.setNode(t)})),o.decrease(t.nodes()[0],0);var s=!1;for(;o.size()>0;){if(n=o.removeMin(),DA.has(i,n))r.setEdge(n,i[n]);else{if(s)throw new Error("Input graph is not connected: "+t);s=!0}t.nodeEdges(n).forEach(a)}return r},tarjan:KA,topsort:t_},s_={Graph:jA.Graph,json:GA,alg:a_,version:jA.version};try{o_=s_}catch(PCt){}o_||(o_=window.graphlib);var l_=o_;var u_=function(t){return AE(t,5)};var c_=function(t,e,n){if(!aS(n))return!1;var r=typeof e;return!!("number"==r?Ek(n)&&uk(e,n.length):"string"==r&&e in n)&&RC(n[e],t)},d_=Object.prototype,h_=d_.hasOwnProperty,f_=mA((function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&c_(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=Ik(o),s=-1,l=a.length;++s<l;){var u=a[s],c=t[u];(void 0===c||RC(c,d_[u])&&!h_.call(t,u))&&(t[u]=o[u])}return t}));var p_=function(t){return function(e,n,r){var i=Object(e);if(!Ek(e)){var o=IM(n);e=Mk(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}},g_=/\s/;var v_=function(t){for(var e=t.length;e--&&g_.test(t.charAt(e)););return e},m_=/^\s+/;var y_=function(t){return t?t.slice(0,v_(t)+1).replace(m_,""):t},b_=/^[-+]0x[0-9a-f]+$/i,x_=/^0b[01]+$/i,w_=/^0o[0-7]+$/i,C_=parseInt;var S_=function(t){if("number"==typeof t)return t;if(aM(t))return NaN;if(aS(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=aS(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=y_(t);var n=x_.test(t);return n||w_.test(t)?C_(t.slice(2),n?2:8):b_.test(t)?NaN:+t};var k_=function(t){return t?Infinity===(t=S_(t))||-Infinity===t?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var E_=function(t){var e=k_(t),n=e%1;return e==e?n?e-n:e:0},M_=Math.max;var A_=p_((function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:E_(n);return i<0&&(i=M_(r+i,0)),yA(t,IM(e),i)}));var __=function(t){return(null==t?0:t.length)?cA(t,1):[]};var T_=function(t,e){return null==t?t:PE(t,RE(e),Ik)};var P_=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0};var I_=function(t,e){var n={};return e=IM(e),IE(t,(function(t,r,i){XS(n,r,e(t,r,i))})),n};var D_=function(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===s?a==a&&!aM(a):n(a,s)))var s=a,l=o}return l};var O_=function(t,e){return t>e};var R_=function(t){return t&&t.length?D_(t,OE,O_):void 0};var L_=function(t,e,n){(void 0!==n&&!RC(t[e],n)||void 0===n&&!(e in t))&&XS(t,e,n)},B_=Function.prototype,F_=Object.prototype,N_=B_.toString,z_=F_.hasOwnProperty,j_=N_.call(Object);var G_=function(t){if(!JS(t)||"[object Object]"!=oS(t))return!1;var e=Uk(t);if(null===e)return!0;var n=z_.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&N_.call(n)==j_};var U_=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var $_=function(t){return ZS(t,Ik(t))};var V_=function(t,e,n,r,i,o,a){var s=U_(t,n),l=U_(e,n),u=a.get(l);if(u)L_(t,n,u);else{var c=o?o(s,l,n+"",t,e,a):void 0,d=void 0===c;if(d){var h=ok(l),f=!h&&sk(l),p=!h&&!f&&vk(l);c=l,h||f||p?ok(s)?c=s:AA(s)?c=Rk(s):f?(d=!1,c=Ok(l,!0)):p?(d=!1,c=gE(l,!0)):c=[]:G_(l)||ik(l)?(c=s,ik(s)?c=$_(s):aS(s)&&!lS(s)||(c=bE(l))):d=!1}d&&(a.set(l,c),i(c,l,r,o,a),a.delete(l)),L_(t,n,c)}};var W_=function t(e,n,r,i,o){e!==n&&PE(n,(function(a,s){if(o||(o=new WS),aS(a))V_(e,n,s,r,t,i,o);else{var l=i?i(U_(e,s),a,s+"",e,n,o):void 0;void 0===l&&(l=a),L_(e,s,l)}}),Ik)};var H_=function(t){return mA((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&c_(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e}))}((function(t,e,n){W_(t,e,n)}));var Y_=function(t,e){return t<e};var X_=function(t){return t&&t.length?D_(t,OE,Y_):void 0};var q_=function(t,e){return t&&t.length?D_(t,IM(e),Y_):void 0},K_=function(){return qC.Date.now()};var Z_=function(t,e,n,r){if(!aS(t))return t;for(var i=-1,o=(e=xM(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var l=wM(e[i]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(i!=a){var c=s[l];void 0===(u=r?r(c,l,s):void 0)&&(u=aS(c)?c:uk(e[i+1])?[]:{})}KS(s,l,u),s=s[l]}return t};var Q_=function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=CM(t,a);n(s,a)&&Z_(o,xM(a,t),s)}return o};var J_=function(t,e){return Q_(t,e,(function(e,n){return MM(t,n)}))};var tT=function(t){return vA(fA(t,void 0,__),t+"")}((function(t,e){return null==t?{}:J_(t,e)})),eT=Math.ceil,nT=Math.max;var rT=function(t,e,n,r){for(var i=-1,o=nT(eT((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a};var iT=function(t){return function(e,n,r){return r&&"number"!=typeof r&&c_(e,n,r)&&(n=r=void 0),e=k_(e),void 0===n?(n=e,e=0):n=k_(n),r=void 0===r?e<n?1:-1:k_(r),rT(e,n,r,t)}}();var oT=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t};var aT=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=aM(t),a=void 0!==e,s=null===e,l=e==e,u=aM(e);if(!s&&!u&&!o&&t>e||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&t<e||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0};var sT=function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var l=aT(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return t.index-e.index};var lT=function(t,e,n){e=e.length?gM(e,(function(t){return ok(t)?function(e){return CM(e,1===t.length?t[0]:t)}:t})):[OE];var r=-1;e=gM(e,fk(IM));var i=zM(t,(function(t,n,i){return{criteria:gM(e,(function(e){return e(t)})),index:++r,value:t}}));return oT(i,(function(t,e){return sT(t,e,n)}))},uT=mA((function(t,e){if(null==t)return[];var n=e.length;return n>1&&c_(t,e[0],e[1])?e=[]:n>2&&c_(e[0],e[1],e[2])&&(e=[e[0]]),lT(t,cA(e,1),[])})),cT=0;var dT=function(t){var e=++cT;return bM(t)+e};var hT=function(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;n(a,t[r],s)}return a};var fT,pT=function(t,e){return hT(t||[],e||[],KS)};try{fT={cloneDeep:u_,constant:TE,defaults:f_,each:BE,filter:DM,find:A_,flatten:__,forEach:LE,forIn:T_,has:LM,isUndefined:NM,last:P_,map:jM,mapValues:I_,max:R_,merge:H_,min:X_,minBy:q_,now:K_,pick:tT,range:iT,reduce:$M,sortBy:uT,uniqueId:dT,values:IA,zipObject:pT}}catch(PCt){}fT||(fT=window._);var gT=fT,vT=mT;function mT(){var t={};t._next=t._prev=t,this._sentinel=t}function yT(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function bT(t,e){if("_next"!==t&&"_prev"!==t)return e}mT.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return yT(e),e},mT.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&yT(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},mT.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,bT)),n=n._prev;return"["+t.join(", ")+"]"};var xT=l_.Graph,wT=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new xT,r=0,i=0;gT.forEach(t.nodes(),(function(t){n.setNode(t,{v:t,in:0,out:0})})),gT.forEach(t.edges(),(function(t){var o=n.edge(t.v,t.w)||0,a=e(t),s=o+a;n.setEdge(t.v,t.w,s),i=Math.max(i,n.node(t.v).out+=a),r=Math.max(r,n.node(t.w).in+=a)}));var o=gT.range(i+r+3).map((function(){return new vT})),a=r+1;return gT.forEach(n.nodes(),(function(t){kT(o,a,n.node(t))})),{graph:n,buckets:o,zeroIdx:a}}(t,e||CT),r=function(t,e,n){var r,i=[],o=e[e.length-1],a=e[0];for(;t.nodeCount();){for(;r=a.dequeue();)ST(t,e,n,r);for(;r=o.dequeue();)ST(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(r=e[s].dequeue()){i=i.concat(ST(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return gT.flatten(gT.map(r,(function(e){return t.outEdges(e.v,e.w)})),!0)},CT=gT.constant(1);function ST(t,e,n,r,i){var o=i?[]:void 0;return gT.forEach(t.inEdges(r.v),(function(r){var a=t.edge(r),s=t.node(r.v);i&&o.push({v:r.v,w:r.w}),s.out-=a,kT(e,n,s)})),gT.forEach(t.outEdges(r.v),(function(r){var i=t.edge(r),o=r.w,a=t.node(o);a.in-=i,kT(e,n,a)})),t.removeNode(r.v),o}function kT(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}var ET={run:function(t){var e="greedy"===t.graph().acyclicer?wT(t,(n=t,function(t){return n.edge(t).weight})):function(t){var e=[],n={},r={};function i(o){gT.has(r,o)||(r[o]=!0,n[o]=!0,gT.forEach(t.outEdges(o),(function(t){gT.has(n,t.w)?e.push(t):i(t.w)})),delete n[o])}return gT.forEach(t.nodes(),i),e}(t);var n;gT.forEach(e,(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,gT.uniqueId("rev"))}))},undo:function(t){gT.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))}};var MT=l_.Graph,AT={addDummyNode:_T,simplify:function(t){var e=(new MT).setGraph(t.graph());return gT.forEach(t.nodes(),(function(n){e.setNode(n,t.node(n))})),gT.forEach(t.edges(),(function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),e},asNonCompoundGraph:function(t){var e=new MT({multigraph:t.isMultigraph()}).setGraph(t.graph());return gT.forEach(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),gT.forEach(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e},successorWeights:function(t){var e=gT.map(t.nodes(),(function(e){var n={};return gT.forEach(t.outEdges(e),(function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight})),n}));return gT.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=gT.map(t.nodes(),(function(e){var n={};return gT.forEach(t.inEdges(e),(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return gT.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,i=t.x,o=t.y,a=e.x-i,s=e.y-o,l=t.width/2,u=t.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(s)*l>Math.abs(a)*u?(s<0&&(u=-u),n=u*a/s,r=u):(a<0&&(l=-l),n=l,r=l*s/a);return{x:i+n,y:o+r}},buildLayerMatrix:function(t){var e=gT.map(gT.range(TT(t)+1),(function(){return[]}));return gT.forEach(t.nodes(),(function(n){var r=t.node(n),i=r.rank;gT.isUndefined(i)||(e[i][r.order]=n)})),e},normalizeRanks:function(t){var e=gT.min(gT.map(t.nodes(),(function(e){return t.node(e).rank})));gT.forEach(t.nodes(),(function(n){var r=t.node(n);gT.has(r,"rank")&&(r.rank-=e)}))},removeEmptyRanks:function(t){var e=gT.min(gT.map(t.nodes(),(function(e){return t.node(e).rank}))),n=[];gT.forEach(t.nodes(),(function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)}));var r=0,i=t.graph().nodeRankFactor;gT.forEach(n,(function(e,n){gT.isUndefined(e)&&n%i!=0?--r:r&&gT.forEach(e,(function(e){t.node(e).rank+=r}))}))},addBorderNode:function(t,e,n,r){var i={width:0,height:0};arguments.length>=4&&(i.rank=n,i.order=r);return _T(t,"border",i,e)},maxRank:TT,partition:function(t,e){var n={lhs:[],rhs:[]};return gT.forEach(t,(function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n},time:function(t,e){var n=gT.now();try{return e()}finally{console.log(t+" time: "+(gT.now()-n)+"ms")}},notime:function(t,e){return e()}};function _T(t,e,n,r){var i;do{i=gT.uniqueId(r)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function TT(t){return gT.max(gT.map(t.nodes(),(function(e){var n=t.node(e).rank;if(!gT.isUndefined(n))return n})))}var PT={run:function(t){t.graph().dummyChains=[],gT.forEach(t.edges(),(function(e){!function(t,e){var n,r,i,o=e.v,a=t.node(o).rank,s=e.w,l=t.node(s).rank,u=e.name,c=t.edge(e),d=c.labelRank;if(l===a+1)return;for(t.removeEdge(e),i=0,++a;a<l;++i,++a)c.points=[],r={width:0,height:0,edgeLabel:c,edgeObj:e,rank:a},n=AT.addDummyNode(t,"edge",r,"_d"),a===d&&(r.width=c.width,r.height=c.height,r.dummy="edge-label",r.labelpos=c.labelpos),t.setEdge(o,n,{weight:c.weight},u),0===i&&t.graph().dummyChains.push(n),o=n;t.setEdge(o,s,{weight:c.weight},u)}(t,e)}))},undo:function(t){gT.forEach(t.graph().dummyChains,(function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)}))}};var IT=function(t){var e={};gT.forEach(t.sources(),(function n(r){var i=t.node(r);if(gT.has(e,r))return i.rank;e[r]=!0;var o=gT.min(gT.map(t.outEdges(r),(function(e){return n(e.w)-t.edge(e).minlen})));return o!==Number.POSITIVE_INFINITY&&null!=o||(o=0),i.rank=o}))},DT=function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen};var OT=l_.Graph,RT=DT,LT=function(t){var e,n,r=new OT({directed:!1}),i=t.nodes()[0],o=t.nodeCount();r.setNode(i,{});for(;BT(r,t)<o;)e=FT(r,t),n=r.hasNode(e.v)?RT(t,e):-RT(t,e),NT(r,t,n);return r};function BT(t,e){return gT.forEach(t.nodes(),(function n(r){gT.forEach(e.nodeEdges(r),(function(i){var o=i.v,a=r===o?i.w:o;t.hasNode(a)||RT(e,i)||(t.setNode(a,{}),t.setEdge(r,a,{}),n(a))}))})),t.nodeCount()}function FT(t,e){return gT.minBy(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return RT(e,n)}))}function NT(t,e,n){gT.forEach(t.nodes(),(function(t){e.node(t).rank+=n}))}var zT=DT,jT=IT,GT=l_.alg.preorder,UT=l_.alg.postorder,$T=AT.simplify,VT=WT;function WT(t){t=$T(t),jT(t);var e,n=LT(t);for(XT(n),HT(n,t);e=KT(n);)QT(n,t,e,ZT(n,t,e))}function HT(t,e){var n=UT(t,t.nodes());n=n.slice(0,n.length-1),gT.forEach(n,(function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=YT(t,e,n)}(t,e,n)}))}function YT(t,e,n){var r=t.node(n).parent,i=!0,o=e.edge(n,r),a=0;return o||(i=!1,o=e.edge(r,n)),a=o.weight,gT.forEach(e.nodeEdges(n),(function(o){var s,l,u=o.v===n,c=u?o.w:o.v;if(c!==r){var d=u===i,h=e.edge(o).weight;if(a+=d?h:-h,s=n,l=c,t.hasEdge(s,l)){var f=t.edge(n,c).cutvalue;a+=d?-f:f}}})),a}function XT(t,e){arguments.length<2&&(e=t.nodes()[0]),qT(t,{},1,e)}function qT(t,e,n,r,i){var o=n,a=t.node(r);return e[r]=!0,gT.forEach(t.neighbors(r),(function(i){gT.has(e,i)||(n=qT(t,e,n,i,r))})),a.low=o,a.lim=n++,i?a.parent=i:delete a.parent,n}function KT(t){return gT.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function ZT(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var o=t.node(r),a=t.node(i),s=o,l=!1;o.lim>a.lim&&(s=a,l=!0);var u=gT.filter(e.edges(),(function(e){return l===JT(t,t.node(e.v),s)&&l!==JT(t,t.node(e.w),s)}));return gT.minBy(u,(function(t){return zT(e,t)}))}function QT(t,e,n,r){var i=n.v,o=n.w;t.removeEdge(i,o),t.setEdge(r.v,r.w,{}),XT(t),HT(t,e),function(t,e){var n=gT.find(t.nodes(),(function(t){return!e.node(t).parent})),r=GT(t,n);r=r.slice(1),gT.forEach(r,(function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)}))}(t,e)}function JT(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}WT.initLowLimValues=XT,WT.initCutValues=HT,WT.calcCutValue=YT,WT.leaveEdge=KT,WT.enterEdge=ZT,WT.exchangeEdges=QT;var tP=IT,eP=function(t){switch(t.graph().ranker){case"network-simplex":rP(t);break;case"tight-tree":!function(t){tP(t),LT(t)}(t);break;case"longest-path":nP(t);break;default:rP(t)}};var nP=tP;function rP(t){VT(t)}var iP=function(t){var e=function(t){var e={},n=0;function r(i){var o=n;gT.forEach(t.children(i),r),e[i]={low:o,lim:n++}}return gT.forEach(t.children(),r),e}(t);gT.forEach(t.graph().dummyChains,(function(n){for(var r=t.node(n),i=r.edgeObj,o=function(t,e,n,r){var i,o,a=[],s=[],l=Math.min(e[n].low,e[r].low),u=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),a.push(i)}while(i&&(e[i].low>l||u>e[i].lim));o=i,i=r;for(;(i=t.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}(t,e,i.v,i.w),a=o.path,s=o.lca,l=0,u=a[l],c=!0;n!==i.w;){if(r=t.node(n),c){for(;(u=a[l])!==s&&t.node(u).maxRank<r.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<a.length-1&&t.node(u=a[l+1]).minRank<=r.rank;)l++;u=a[l]}t.setParent(n,u),n=t.successors(n)[0]}}))};var oP={run:function(t){var e=AT.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};function n(r,i){var o=t.children(r);o&&o.length&&gT.forEach(o,(function(t){n(t,i+1)})),e[r]=i}return gT.forEach(t.children(),(function(t){n(t,1)})),e}(t),r=gT.max(gT.values(n))-1,i=2*r+1;t.graph().nestingRoot=e,gT.forEach(t.edges(),(function(e){t.edge(e).minlen*=i}));var o=function(t){return gT.reduce(t.edges(),(function(e,n){return e+t.edge(n).weight}),0)}(t)+1;gT.forEach(t.children(),(function(a){aP(t,e,i,o,r,n,a)})),t.graph().nodeRankFactor=i},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,gT.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}};function aP(t,e,n,r,i,o,a){var s=t.children(a);if(s.length){var l=AT.addBorderNode(t,"_bt"),u=AT.addBorderNode(t,"_bb"),c=t.node(a);t.setParent(l,a),c.borderTop=l,t.setParent(u,a),c.borderBottom=u,gT.forEach(s,(function(s){aP(t,e,n,r,i,o,s);var c=t.node(s),d=c.borderTop?c.borderTop:s,h=c.borderBottom?c.borderBottom:s,f=c.borderTop?r:2*r,p=d!==h?1:i-o[a]+1;t.setEdge(l,d,{weight:f,minlen:p,nestingEdge:!0}),t.setEdge(h,u,{weight:f,minlen:p,nestingEdge:!0})})),t.parent(a)||t.setEdge(e,l,{weight:0,minlen:i+o[a]})}else a!==e&&t.setEdge(e,a,{weight:0,minlen:n})}var sP=function(t){gT.forEach(t.children(),(function e(n){var r=t.children(n),i=t.node(n);if(r.length&&gT.forEach(r,e),gT.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,a=i.maxRank+1;o<a;++o)lP(t,"borderLeft","_bl",n,i,o),lP(t,"borderRight","_br",n,i,o)}}))};function lP(t,e,n,r,i,o){var a={width:0,height:0,rank:o,borderType:e},s=i[e][o-1],l=AT.addDummyNode(t,"border",a,n);i[e][o]=l,t.setParent(l,r),s&&t.setEdge(s,l,{weight:1})}var uP={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||cP(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){gT.forEach(t.nodes(),(function(e){hP(t.node(e))})),gT.forEach(t.edges(),(function(e){var n=t.edge(e);gT.forEach(n.points,hP),gT.has(n,"y")&&hP(n)}))}(t);"lr"!==e&&"rl"!==e||(!function(t){gT.forEach(t.nodes(),(function(e){fP(t.node(e))})),gT.forEach(t.edges(),(function(e){var n=t.edge(e);gT.forEach(n.points,fP),gT.has(n,"x")&&fP(n)}))}(t),cP(t))}};function cP(t){gT.forEach(t.nodes(),(function(e){dP(t.node(e))})),gT.forEach(t.edges(),(function(e){dP(t.edge(e))}))}function dP(t){var e=t.width;t.width=t.height,t.height=e}function hP(t){t.y=-t.y}function fP(t){var e=t.x;t.x=t.y,t.y=e}var pP=function(t){var e={},n=gT.filter(t.nodes(),(function(e){return!t.children(e).length})),r=gT.max(gT.map(n,(function(e){return t.node(e).rank}))),i=gT.map(gT.range(r+1),(function(){return[]}));var o=gT.sortBy(n,(function(e){return t.node(e).rank}));return gT.forEach(o,(function n(r){if(gT.has(e,r))return;e[r]=!0;var o=t.node(r);i[o.rank].push(r),gT.forEach(t.successors(r),n)})),i};var gP=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=vP(t,e[r-1],e[r]);return n};function vP(t,e,n){for(var r=gT.zipObject(n,gT.map(n,(function(t,e){return e}))),i=gT.flatten(gT.map(e,(function(e){return gT.sortBy(gT.map(t.outEdges(e),(function(e){return{pos:r[e.w],weight:t.edge(e).weight}})),"pos")})),!0),o=1;o<n.length;)o<<=1;var a=2*o-1;o-=1;var s=gT.map(new Array(a),(function(){return 0})),l=0;return gT.forEach(i.forEach((function(t){var e=t.pos+o;s[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=s[e+1]),s[e=e-1>>1]+=t.weight;l+=t.weight*n}))),l}var mP=function(t,e){return gT.map(e,(function(e){var n=t.inEdges(e);if(n.length){var r=gT.reduce(n,(function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}}),{sum:0,weight:0});return{v:e,barycenter:r.sum/r.weight,weight:r.weight}}return{v:e}}))};var yP=function(t,e){var n={};return gT.forEach(t,(function(t,e){var r=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};gT.isUndefined(t.barycenter)||(r.barycenter=t.barycenter,r.weight=t.weight)})),gT.forEach(e.edges(),(function(t){var e=n[t.v],r=n[t.w];gT.isUndefined(e)||gT.isUndefined(r)||(r.indegree++,e.out.push(n[t.w]))})),function(t){var e=[];function n(t){return function(e){e.merged||(gT.isUndefined(e.barycenter)||gT.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight);e.weight&&(n+=e.barycenter*e.weight,r+=e.weight);t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function r(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var i=t.pop();e.push(i),gT.forEach(i.in.reverse(),n(i)),gT.forEach(i.out,r(i))}return gT.map(gT.filter(e,(function(t){return!t.merged})),(function(t){return gT.pick(t,["vs","i","barycenter","weight"])}))}(gT.filter(n,(function(t){return!t.indegree})))};var bP=function(t,e){var n=AT.partition(t,(function(t){return gT.has(t,"barycenter")})),r=n.lhs,i=gT.sortBy(n.rhs,(function(t){return-t.i})),o=[],a=0,s=0,l=0;r.sort((u=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:u?e.i-t.i:t.i-e.i})),l=xP(o,i,l),gT.forEach(r,(function(t){l+=t.vs.length,o.push(t.vs),a+=t.barycenter*t.weight,s+=t.weight,l=xP(o,i,l)}));var u;var c={vs:gT.flatten(o,!0)};s&&(c.barycenter=a/s,c.weight=s);return c};function xP(t,e,n){for(var r;e.length&&(r=gT.last(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}var wP=function t(e,n,r,i){var o=e.children(n),a=e.node(n),s=a?a.borderLeft:void 0,l=a?a.borderRight:void 0,u={};s&&(o=gT.filter(o,(function(t){return t!==s&&t!==l})));var c=mP(e,o);gT.forEach(c,(function(n){if(e.children(n.v).length){var o=t(e,n.v,r,i);u[n.v]=o,gT.has(o,"barycenter")&&(a=n,s=o,gT.isUndefined(a.barycenter)?(a.barycenter=s.barycenter,a.weight=s.weight):(a.barycenter=(a.barycenter*a.weight+s.barycenter*s.weight)/(a.weight+s.weight),a.weight+=s.weight))}var a,s}));var d=yP(c,r);!function(t,e){gT.forEach(t,(function(t){t.vs=gT.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(d,u);var h=bP(d,i);if(s&&(h.vs=gT.flatten([s,h.vs,l],!0),e.predecessors(s).length)){var f=e.node(e.predecessors(s)[0]),p=e.node(e.predecessors(l)[0]);gT.has(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+f.order+p.order)/(h.weight+2),h.weight+=2}return h};var CP=l_.Graph,SP=function(t,e,n){var r=function(t){var e;for(;t.hasNode(e=gT.uniqueId("_root")););return e}(t),i=new CP({compound:!0}).setGraph({root:r}).setDefaultNodeLabel((function(e){return t.node(e)}));return gT.forEach(t.nodes(),(function(o){var a=t.node(o),s=t.parent(o);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(i.setNode(o),i.setParent(o,s||r),gT.forEach(t[n](o),(function(e){var n=e.v===o?e.w:e.v,r=i.edge(n,o),a=gT.isUndefined(r)?0:r.weight;i.setEdge(n,o,{weight:t.edge(e).weight+a})})),gT.has(a,"minRank")&&i.setNode(o,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))})),i};var kP=function(t,e,n){var r,i={};gT.forEach(n,(function(n){for(var o,a,s=t.parent(n);s;){if((o=t.parent(s))?(a=i[o],i[o]=s):(a=r,r=s),a&&a!==s)return void e.setEdge(a,s);s=o}}))};var EP=l_.Graph,MP=function(t){var e=AT.maxRank(t),n=AP(t,gT.range(1,e+1),"inEdges"),r=AP(t,gT.range(e-1,-1,-1),"outEdges"),i=pP(t);TP(t,i);for(var o,a=Number.POSITIVE_INFINITY,s=0,l=0;l<4;++s,++l){_P(s%2?n:r,s%4>=2),i=AT.buildLayerMatrix(t);var u=gP(t,i);u<a&&(l=0,o=gT.cloneDeep(i),a=u)}TP(t,o)};function AP(t,e,n){return gT.map(e,(function(e){return SP(t,e,n)}))}function _P(t,e){var n=new EP;gT.forEach(t,(function(t){var r=t.graph().root,i=wP(t,r,n,e);gT.forEach(i.vs,(function(e,n){t.node(e).order=n})),kP(t,n,i.vs)}))}function TP(t,e){gT.forEach(e,(function(e){gT.forEach(e,(function(e,n){t.node(e).order=n}))}))}var PP=l_.Graph,IP=function(t){var e,n=AT.buildLayerMatrix(t),r=gT.merge(DP(t,n),OP(t,n)),i={};gT.forEach(["u","d"],(function(o){e="u"===o?n:gT.values(n).reverse(),gT.forEach(["l","r"],(function(n){"r"===n&&(e=gT.map(e,(function(t){return gT.values(t).reverse()})));var a=("u"===o?t.predecessors:t.successors).bind(t),s=BP(t,e,r,a),l=FP(t,e,s.root,s.align,"r"===n);"r"===n&&(l=gT.mapValues(l,(function(t){return-t}))),i[o+n]=l}))}));var o=NP(t,i);return zP(i,o),jP(i,t.graph().align)};function DP(t,e){var n={};return gT.reduce(e,(function(e,r){var i=0,o=0,a=e.length,s=gT.last(r);return gT.forEach(r,(function(e,l){var u=function(t,e){if(t.node(e).dummy)return gT.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),c=u?t.node(u).order:a;(u||e===s)&&(gT.forEach(r.slice(o,l+1),(function(e){gT.forEach(t.predecessors(e),(function(r){var o=t.node(r),a=o.order;!(a<i||c<a)||o.dummy&&t.node(e).dummy||RP(n,r,e)}))})),o=l+1,i=c)})),r})),n}function OP(t,e){var n={};function r(e,r,i,o,a){var s;gT.forEach(gT.range(r,i),(function(r){s=e[r],t.node(s).dummy&&gT.forEach(t.predecessors(s),(function(e){var r=t.node(e);r.dummy&&(r.order<o||r.order>a)&&RP(n,e,s)}))}))}return gT.reduce(e,(function(e,n){var i,o=-1,a=0;return gT.forEach(n,(function(s,l){if("border"===t.node(s).dummy){var u=t.predecessors(s);u.length&&(i=t.node(u[0]).order,r(n,a,l,o,i),a=l,o=i)}r(n,a,n.length,i,e.length)})),n})),n}function RP(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function LP(t,e,n){if(e>n){var r=e;e=n,n=r}return gT.has(t[e],n)}function BP(t,e,n,r){var i={},o={},a={};return gT.forEach(e,(function(t){gT.forEach(t,(function(t,e){i[t]=t,o[t]=t,a[t]=e}))})),gT.forEach(e,(function(t){var e=-1;gT.forEach(t,(function(t){var s=r(t);if(s.length)for(var l=((s=gT.sortBy(s,(function(t){return a[t]}))).length-1)/2,u=Math.floor(l),c=Math.ceil(l);u<=c;++u){var d=s[u];o[t]===t&&e<a[d]&&!LP(n,t,d)&&(o[d]=t,o[t]=i[t]=i[d],e=a[d])}}))})),{root:i,align:o}}function FP(t,e,n,r,i){var o={},a=function(t,e,n,r){var i=new PP,o=t.graph(),a=function(t,e,n){return function(r,i,o){var a,s=r.node(i),l=r.node(o),u=0;if(u+=s.width/2,gT.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(u+=n?a:-a),a=0,u+=(s.dummy?e:t)/2,u+=(l.dummy?e:t)/2,u+=l.width/2,gT.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":a=l.width/2;break;case"r":a=-l.width/2}return a&&(u+=n?a:-a),a=0,u}}(o.nodesep,o.edgesep,r);return gT.forEach(e,(function(e){var r;gT.forEach(e,(function(e){var o=n[e];if(i.setNode(o),r){var s=n[r],l=i.edge(s,o);i.setEdge(s,o,Math.max(a(t,e,r),l||0))}r=e}))})),i}(t,e,n,i),s=i?"borderLeft":"borderRight";function l(t,e){for(var n=a.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return l((function(t){o[t]=a.inEdges(t).reduce((function(t,e){return Math.max(t,o[e.v]+a.edge(e))}),0)}),a.predecessors.bind(a)),l((function(e){var n=a.outEdges(e).reduce((function(t,e){return Math.min(t,o[e.w]-a.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==s&&(o[e]=Math.max(o[e],n))}),a.successors.bind(a)),gT.forEach(r,(function(t){o[t]=o[n[t]]})),o}function NP(t,e){return gT.minBy(gT.values(e),(function(e){var n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return gT.forIn(e,(function(e,i){var o=function(t,e){return t.node(e).width}(t,i)/2;n=Math.max(e+o,n),r=Math.min(e-o,r)})),n-r}))}function zP(t,e){var n=gT.values(e),r=gT.min(n),i=gT.max(n);gT.forEach(["u","d"],(function(n){gT.forEach(["l","r"],(function(o){var a,s=n+o,l=t[s];if(l!==e){var u=gT.values(l);(a="l"===o?r-gT.min(u):i-gT.max(u))&&(t[s]=gT.mapValues(l,(function(t){return t+a})))}}))}))}function jP(t,e){return gT.mapValues(t.ul,(function(n,r){if(e)return t[e.toLowerCase()][r];var i=gT.sortBy(gT.map(t,r));return(i[1]+i[2])/2}))}var GP=IP,UP=function(t){(function(t){var e=AT.buildLayerMatrix(t),n=t.graph().ranksep,r=0;gT.forEach(e,(function(e){var i=gT.max(gT.map(e,(function(e){return t.node(e).height})));gT.forEach(e,(function(e){t.node(e).y=r+i/2})),r+=i+n}))})(t=AT.asNonCompoundGraph(t)),gT.forEach(GP(t),(function(e,n){t.node(n).x=e}))};var $P=AT.normalizeRanks,VP=AT.removeEmptyRanks,WP=AT,HP=l_.Graph,YP=function(t,e){var n=e&&e.debugTiming?WP.time:WP.notime;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return function(t){var e=new HP({multigraph:!0,compound:!0}),n=rI(t.graph());return e.setGraph(gT.merge({},qP,nI(n,XP),gT.pick(n,KP))),gT.forEach(t.nodes(),(function(n){var r=rI(t.node(n));e.setNode(n,gT.defaults(nI(r,ZP),QP)),e.setParent(n,t.parent(n))})),gT.forEach(t.edges(),(function(n){var r=rI(t.edge(n));e.setEdge(n,gT.merge({},tI,nI(r,JP),gT.pick(r,eI)))})),e}(t)}));n("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,gT.forEach(t.edges(),(function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){gT.forEach(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){ET.run(t)})),e("    nestingGraph.run",(function(){oP.run(t)})),e("    rank",(function(){eP(WP.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){gT.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e:e};WP.addDummyNode(t,"edge-proxy",i,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){VP(t)})),e("    nestingGraph.cleanup",(function(){oP.cleanup(t)})),e("    normalizeRanks",(function(){$P(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;gT.forEach(t.nodes(),(function(n){var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=gT.max(e,r.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){gT.forEach(t.nodes(),(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){PT.run(t)})),e("    parentDummyChains",(function(){iP(t)})),e("    addBorderSegments",(function(){sP(t)})),e("    order",(function(){MP(t)})),e("    insertSelfEdges",(function(){!function(t){var e=WP.buildLayerMatrix(t);gT.forEach(e,(function(e){var n=0;gT.forEach(e,(function(e,r){var i=t.node(e);i.order=r+n,gT.forEach(i.selfEdges,(function(e){WP.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:r+ ++n,e:e.e,label:e.label},"_se")})),delete i.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){uP.adjust(t)})),e("    position",(function(){UP(t)})),e("    positionSelfEdges",(function(){!function(t){gT.forEach(t.nodes(),(function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){gT.forEach(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(gT.last(n.borderLeft)),a=t.node(gT.last(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}})),gT.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){PT.undo(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){gT.forEach(t.edges(),(function(e){var n=t.edge(e);if(gT.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){uP.undo(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=t.graph(),a=o.marginx||0,s=o.marginy||0;function l(t){var o=t.x,a=t.y,s=t.width,l=t.height;e=Math.min(e,o-s/2),n=Math.max(n,o+s/2),r=Math.min(r,a-l/2),i=Math.max(i,a+l/2)}gT.forEach(t.nodes(),(function(e){l(t.node(e))})),gT.forEach(t.edges(),(function(e){var n=t.edge(e);gT.has(n,"x")&&l(n)})),e-=a,r-=s,gT.forEach(t.nodes(),(function(n){var i=t.node(n);i.x-=e,i.y-=r})),gT.forEach(t.edges(),(function(n){var i=t.edge(n);gT.forEach(i.points,(function(t){t.x-=e,t.y-=r})),gT.has(i,"x")&&(i.x-=e),gT.has(i,"y")&&(i.y-=r)})),o.width=n-e+a,o.height=i-r+s}(t)})),e("    assignNodeIntersects",(function(){!function(t){gT.forEach(t.edges(),(function(e){var n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(WP.intersectRect(o,n)),i.points.push(WP.intersectRect(a,r))}))}(t)})),e("    reversePoints",(function(){!function(t){gT.forEach(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){ET.undo(t)}))}(e,n)})),n("  updateInputGraph",(function(){!function(t,e){gT.forEach(t.nodes(),(function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))})),gT.forEach(t.edges(),(function(n){var r=t.edge(n),i=e.edge(n);r.points=i.points,gT.has(i,"x")&&(r.x=i.x,r.y=i.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))};var XP=["nodesep","edgesep","ranksep","marginx","marginy"],qP={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},KP=["acyclicer","ranker","rankdir","align"],ZP=["width","height"],QP={width:0,height:0},JP=["minlen","weight","width","height","labeloffset"],tI={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},eI=["labelpos"];function nI(t,e){return gT.mapValues(gT.pick(t,e),Number)}function rI(t){var e={};return gT.forEach(t,(function(t,n){e[n.toLowerCase()]=t})),e}var iI=l_.Graph;var oI={graphlib:l_,layout:YP,debug:{debugOrdering:function(t){var e=AT.buildLayerMatrix(t),n=new iI({compound:!0,multigraph:!0}).setGraph({});return gT.forEach(t.nodes(),(function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)})),gT.forEach(t.edges(),(function(t){n.setEdge(t.v,t.w,{},t.name)})),gT.forEach(e,(function(t,e){var r="layer"+e;n.setNode(r,{rank:"same"}),gT.reduce(t,(function(t,e){return n.setEdge(t,e,{style:"invis"}),e}))})),n}},util:{time:AT.time,notime:AT.notime},version:"0.8.5"};function aI(t,e,n){let r;return r=t||(kw(e)?()=>e:()=>n),r}const sI=Object.prototype.toString;function lI(t){return sI.call(t).endsWith("Array]")}function uI(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!lI(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,i=e.toIndex,o=void 0===i?t.length:i;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=r||o>t.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],s=r+1;s<o;s++)t[s]>a&&(a=t[s]);return a}function cI(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!lI(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,i=e.toIndex,o=void 0===i?t.length:i;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=r||o>t.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],s=r+1;s<o;s++)t[s]<a&&(a=t[s]);return a}function dI(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!lI(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!lI(n.output))throw new TypeError("output option must be an array if specified");e=n.output}else e=new Array(t.length);var r=cI(t),i=uI(t);if(r===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var o=n.min,a=void 0===o?n.autoMinMax?r:0:o,s=n.max,l=void 0===s?n.autoMinMax?i:1:s;if(a>=l)throw new RangeError("min option must be smaller than max option");for(var u=(l-a)/(i-r),c=0;c<t.length;c++)e[c]=(t[c]-r)*u+a;return e}const hI=" ".repeat(2),fI=" ".repeat(4);function pI(t,e={}){const{maxRows:n=15,maxColumns:r=10,maxNumSize:i=8}=e;return`${t.constructor.name} {\n${hI}[\n${fI}${function(t,e,n,r){const{rows:i,columns:o}=t,a=Math.min(i,e),s=Math.min(o,n),l=[];for(let u=0;u<a;u++){let e=[];for(let n=0;n<s;n++)e.push(gI(t.get(u,n),r));l.push(`${e.join(" ")}`)}s!==o&&(l[l.length-1]+=` ... ${o-n} more columns`);a!==i&&l.push(`... ${i-e} more rows`);return l.join(`\n${fI}`)}(t,n,r,i)}\n${hI}]\n${hI}rows: ${t.rows}\n${hI}columns: ${t.columns}\n}`}function gI(t,e){const n=String(t);if(n.length<=e)return n.padEnd(e," ");const r=t.toPrecision(e-2);if(r.length<=e)return r;const i=t.toExponential(e-2),o=i.indexOf("e"),a=i.slice(o);return i.slice(0,e-a.length)+a}function vI(t,e,n){let r=n?t.rows:t.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function mI(t,e,n){let r=n?t.columns:t.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function yI(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function bI(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function xI(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for row indices");if(e.some((e=>e<0||e>=t.rows)))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function wI(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for column indices");if(e.some((e=>e<0||e>=t.columns)))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function CI(t,e,n,r,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(kI("startRow",e),kI("endRow",n),kI("startColumn",r),kI("endColumn",i),e>n||r>i||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function SI(t,e=0){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function kI(t,e){if("number"!=typeof e)throw new TypeError(`${t} must be a number`)}function EI(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}class MI{static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("data length does not match given dimensions");let r=new _I(t,e);for(let i=0;i<t;i++)for(let t=0;t<e;t++)r.set(i,t,n[i*e+t]);return r}static rowVector(t){let e=new _I(1,t.length);for(let n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){let e=new _I(t.length,1);for(let n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static zeros(t,e){return new _I(t,e)}static ones(t,e){return new _I(t,e).fill(1)}static rand(t,e,n={}){if("object"!=typeof n)throw new TypeError("options must be an object");const{random:r=Math.random}=n;let i=new _I(t,e);for(let o=0;o<t;o++)for(let t=0;t<e;t++)i.set(o,t,r());return i}static randInt(t,e,n={}){if("object"!=typeof n)throw new TypeError("options must be an object");const{min:r=0,max:i=1e3,random:o=Math.random}=n;if(!Number.isInteger(r))throw new TypeError("min must be an integer");if(!Number.isInteger(i))throw new TypeError("max must be an integer");if(r>=i)throw new RangeError("min must be smaller than max");let a=i-r,s=new _I(t,e);for(let l=0;l<t;l++)for(let t=0;t<e;t++){let e=r+Math.round(o()*a);s.set(l,t,e)}return s}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);let r=Math.min(t,e),i=this.zeros(t,e);for(let o=0;o<r;o++)i.set(o,o,n);return i}static diag(t,e,n){let r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);let i=Math.min(r,e,n),o=this.zeros(e,n);for(let a=0;a<i;a++)o.set(a,a,t[a]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,r=t.columns,i=new _I(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.min(t.get(o,n),e.get(o,n)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,r=t.columns,i=new this(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.max(t.get(o,n),e.get(o,n)));return i}static checkMatrix(t){return MI.isMatrix(t)?t:new _I(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.call(this,e,n);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isEchelonForm(){let t=0,e=0,n=-1,r=!0,i=!1;for(;t<this.rows&&r;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);t++}return r}isReducedEchelonForm(){let t=0,e=0,n=-1,r=!0,i=!1;for(;t<this.rows&&r;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);for(let n=e+1;n<this.rows;n++)0!==this.get(t,n)&&(r=!1);t++}return r}echelonForm(){let t=this.clone(),e=0,n=0;for(;e<t.rows&&n<t.columns;){let r=e;for(let i=e;i<t.rows;i++)t.get(i,n)>t.get(r,n)&&(r=i);if(0===t.get(r,n))n++;else{t.swapRows(e,r);let i=t.get(e,n);for(let r=n;r<t.columns;r++)t.set(e,r,t.get(e,r)/i);for(let r=e+1;r<t.rows;r++){let i=t.get(r,n)/t.get(e,n);t.set(r,n,0);for(let o=n+1;o<t.columns;o++)t.set(r,o,t.get(r,o)-t.get(e,o)*i)}e++,n++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,n=t.rows,r=n-1;for(;r>=0;)if(0===t.maxRow(r))r--;else{let i=0,o=!1;for(;i<n&&!1===o;)1===t.get(r,i)?o=!0:i++;for(let n=0;n<r;n++){let o=t.get(n,i);for(let a=i;a<e;a++){let e=t.get(n,a)-o*t.get(r,a);t.set(n,a,e)}}r--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{rows:e=1,columns:n=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let r=new _I(this.rows*e,this.columns*n);for(let i=0;i<e;i++)for(let t=0;t<n;t++)r.setSubMatrix(this,this.rows*i,this.columns*t);return r}fill(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){vI(this,t);let e=[];for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}getRowVector(t){return _I.rowVector(this.getRow(t))}setRow(t,e){vI(this,t),e=yI(this,e);for(let n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){vI(this,t),vI(this,e);for(let n=0;n<this.columns;n++){let r=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,r)}return this}getColumn(t){mI(this,t);let e=[];for(let n=0;n<this.rows;n++)e.push(this.get(n,t));return e}getColumnVector(t){return _I.columnVector(this.getColumn(t))}setColumn(t,e){mI(this,t),e=bI(this,e);for(let n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){mI(this,t),mI(this,e);for(let n=0;n<this.rows;n++){let r=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,r)}return this}addRowVector(t){t=yI(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=yI(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=yI(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=yI(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=bI(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=bI(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=bI(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=bI(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){vI(this,t);for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){mI(this,t);for(let n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(){if(this.isEmpty())return NaN;let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxIndex(){EI(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}min(){if(this.isEmpty())return NaN;let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minIndex(){EI(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}maxRow(t){if(vI(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){vI(this,t),EI(this);let e=this.get(t,0),n=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}minRow(t){if(vI(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){vI(this,t),EI(this);let e=this.get(t,0),n=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}maxColumn(t){if(mI(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){mI(this,t),EI(this);let e=this.get(0,t),n=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}minColumn(t){if(mI(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){mI(this,t),EI(this);let e=this.get(0,t),n=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let n=0;n<t;n++)e.push(this.get(n,n));return e}norm(t="frobenius"){let e=0;if("max"===t)return this.max();if("frobenius"===t){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e+=this.get(t,n)*this.get(t,n);return Math.sqrt(e)}throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){MI.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let n=0;for(let r=0;r<e.length;r++)n+=e[r]*t[r];return n}mmul(t){t=_I.checkMatrix(t);let e=this.rows,n=this.columns,r=t.columns,i=new _I(e,r),o=new Float64Array(n);for(let a=0;a<r;a++){for(let e=0;e<n;e++)o[e]=t.get(e,a);for(let t=0;t<e;t++){let e=0;for(let r=0;r<n;r++)e+=this.get(t,r)*o[r];i.set(t,a,e)}}return i}strassen2x2(t){t=_I.checkMatrix(t);let e=new _I(2,2);const n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),l=this.get(1,1),u=t.get(1,1),c=(n+l)*(r+u),d=(a+l)*r,h=n*(o-u),f=l*(s-r),p=(n+i)*u,g=c+f-p+(i-l)*(s+u),v=h+p,m=d+f,y=c-d+h+(a-n)*(r+o);return e.set(0,0,g),e.set(0,1,v),e.set(1,0,m),e.set(1,1,y),e}strassen3x3(t){t=_I.checkMatrix(t);let e=new _I(3,3);const n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),l=this.get(2,0),u=this.get(2,1),c=this.get(2,2),d=t.get(0,0),h=t.get(0,1),f=t.get(0,2),p=t.get(1,0),g=t.get(1,1),v=t.get(1,2),m=t.get(2,0),y=t.get(2,1),b=t.get(2,2),x=(n-o)*(-h+g),w=(-n+o+a)*(d-h+g),C=(o+a)*(-d+h),S=n*d,k=(-n+l+u)*(d-f+v),E=(-n+l)*(f-v),M=(l+u)*(-d+f),A=(-i+u+c)*(g+m-y),_=(i-c)*(g-y),T=i*m,P=(u+c)*(-m+y),I=(-i+a+s)*(v+m-b),D=(i-s)*(v-b),O=(a+s)*(-m+b),R=S+T+r*p,L=(n+r+i-o-a-u-c)*g+w+C+S+A+T+P,B=S+k+M+(n+r+i-a-s-l-u)*v+T+I+O,F=x+a*(-d+h+p-g-v-m+b)+w+S+T+I+D,N=x+w+C+S+s*y,z=T+I+D+O+o*f,j=S+k+E+u*(-d+f+p-g-v-m+y)+A+_+T,G=A+_+T+P+l*h,U=S+k+E+M+c*b;return e.set(0,0,R),e.set(0,1,L),e.set(0,2,B),e.set(1,0,F),e.set(1,1,N),e.set(1,2,z),e.set(2,0,j),e.set(2,1,G),e.set(2,2,U),e}mmulStrassen(t){t=_I.checkMatrix(t);let e=this.clone(),n=e.rows,r=e.columns,i=t.rows,o=t.columns;function a(t,e,n){let r=t.rows,i=t.columns;if(r===e&&i===n)return t;{let r=MI.zeros(e,n);return r=r.setSubMatrix(t,0,0),r}}r!==i&&console.warn(`Multiplying ${n} x ${r} and ${i} x ${o} matrix: dimensions do not match.`);let s=Math.max(n,i),l=Math.max(r,o);return e=a(e,s,l),function t(e,n,r,i){if(r<=512||i<=512)return e.mmul(n);r%2==1&&i%2==1?(e=a(e,r+1,i+1),n=a(n,r+1,i+1)):r%2==1?(e=a(e,r+1,i),n=a(n,r+1,i)):i%2==1&&(e=a(e,r,i+1),n=a(n,r,i+1));let o=parseInt(e.rows/2,10),s=parseInt(e.columns/2,10),l=e.subMatrix(0,o-1,0,s-1),u=n.subMatrix(0,o-1,0,s-1),c=e.subMatrix(0,o-1,s,e.columns-1),d=n.subMatrix(0,o-1,s,n.columns-1),h=e.subMatrix(o,e.rows-1,0,s-1),f=n.subMatrix(o,n.rows-1,0,s-1),p=e.subMatrix(o,e.rows-1,s,e.columns-1),g=n.subMatrix(o,n.rows-1,s,n.columns-1),v=t(MI.add(l,p),MI.add(u,g),o,s),m=t(MI.add(h,p),u,o,s),y=t(l,MI.sub(d,g),o,s),b=t(p,MI.sub(f,u),o,s),x=t(MI.add(l,c),g,o,s),w=t(MI.sub(h,l),MI.add(u,d),o,s),C=t(MI.sub(c,p),MI.add(f,g),o,s),S=MI.add(v,b);S.sub(x),S.add(C);let k=MI.add(y,x),E=MI.add(m,b),M=MI.sub(v,m);M.add(y),M.add(w);let A=MI.zeros(2*S.rows,2*S.columns);return A=A.setSubMatrix(S,0,0),A=A.setSubMatrix(k,S.rows,0),A=A.setSubMatrix(E,0,S.columns),A=A.setSubMatrix(M,S.rows,S.columns),A.subMatrix(0,r-1,0,i-1)}(e,t=a(t,s,l),s,l)}scaleRows(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let r=new _I(this.rows,this.columns);for(let i=0;i<this.rows;i++){const t=this.getRow(i);t.length>0&&dI(t,{min:e,max:n,output:t}),r.setRow(i,t)}return r}scaleColumns(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let r=new _I(this.rows,this.columns);for(let i=0;i<this.columns;i++){const t=this.getColumn(i);t.length&&dI(t,{min:e,max:n,output:t}),r.setColumn(i,t)}return r}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let n=0;n<t;n++){let t=this.get(e,n),r=this.get(e,this.columns-1-n);this.set(e,n,r),this.set(e,this.columns-1-n,t)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let n=0;n<t;n++){let t=this.get(n,e),r=this.get(this.rows-1-n,e);this.set(n,e,r),this.set(this.rows-1-n,e,t)}return this}kroneckerProduct(t){t=_I.checkMatrix(t);let e=this.rows,n=this.columns,r=t.rows,i=t.columns,o=new _I(e*r,n*i);for(let a=0;a<e;a++)for(let e=0;e<n;e++)for(let n=0;n<r;n++)for(let s=0;s<i;s++)o.set(r*a+n,i*e+s,this.get(a,e)*t.get(n,s));return o}kroneckerSum(t){if(t=_I.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,n=t.rows,r=this.kroneckerProduct(_I.eye(n,n)),i=_I.eye(e,e).kroneckerProduct(t);return r.add(i)}transpose(){let t=new _I(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t=AI){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=AI){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,r){CI(this,t,e,n,r);let i=new _I(e-t+1,r-n+1);for(let o=t;o<=e;o++)for(let e=n;e<=r;e++)i.set(o-t,e-n,this.get(o,e));return i}subMatrixRow(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let r=new _I(t.length,n-e+1);for(let i=0;i<t.length;i++)for(let o=e;o<=n;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError(`Row index out of range: ${t[i]}`);r.set(i,o-e,this.get(t[i],o))}return r}subMatrixColumn(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let r=new _I(n-e+1,t.length);for(let i=0;i<t.length;i++)for(let o=e;o<=n;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError(`Column index out of range: ${t[i]}`);r.set(o-e,i,this.get(o,t[i]))}return r}setSubMatrix(t,e,n){if((t=_I.checkMatrix(t)).isEmpty())return this;CI(this,e,e+t.rows-1,n,n+t.columns-1);for(let r=0;r<t.rows;r++)for(let i=0;i<t.columns;i++)this.set(e+r,n+i,t.get(r,i));return this}selection(t,e){let n=function(t,e,n){return{row:xI(t,e),column:wI(t,n)}}(this,t,e),r=new _I(t.length,e.length);for(let i=0;i<n.row.length;i++){let t=n.row[i];for(let e=0;e<n.column.length;e++){let o=n.column[e];r.set(i,e,this.get(t,o))}}return r}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let n=0;n<t;n++)e+=this.get(n,n);return e}clone(){let t=new _I(this.rows,this.columns);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}sum(t){switch(t){case"row":return function(t){let e=SI(t.rows);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]+=t.get(n,r);return e}(this);case"column":return function(t){let e=SI(t.columns);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]+=t.get(n,r);return e}(this);case void 0:return function(t){let e=0;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e+=t.get(n,r);return e}(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return function(t){let e=SI(t.rows,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]*=t.get(n,r);return e}(this);case"column":return function(t){let e=SI(t.columns,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]*=t.get(n,r);return e}(this);case void 0:return function(t){let e=1;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e*=t.get(n,r);return e}(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const e=this.sum(t);switch(t){case"row":for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e;case"column":for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{unbiased:n=!0,mean:r=this.mean(t)}=e;if("boolean"!=typeof n)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!Array.isArray(r))throw new TypeError("mean must be an array");return function(t,e,n){const r=t.rows,i=t.columns,o=[];for(let a=0;a<r;a++){let r=0,s=0,l=0;for(let e=0;e<i;e++)l=t.get(a,e)-n[a],r+=l,s+=l*l;e?o.push((s-r*r/i)/(i-1)):o.push((s-r*r/i)/i)}return o}(this,n,r);case"column":if(!Array.isArray(r))throw new TypeError("mean must be an array");return function(t,e,n){const r=t.rows,i=t.columns,o=[];for(let a=0;a<i;a++){let i=0,s=0,l=0;for(let e=0;e<r;e++)l=t.get(e,a)-n[a],i+=l,s+=l*l;e?o.push((s-i*i/r)/(r-1)):o.push((s-i*i/r)/r)}return o}(this,n,r);case void 0:if("number"!=typeof r)throw new TypeError("mean must be a number");return function(t,e,n){const r=t.rows,i=t.columns,o=r*i;let a=0,s=0,l=0;for(let u=0;u<r;u++)for(let e=0;e<i;e++)l=t.get(u,e)-n,a+=l,s+=l*l;return e?(s-a*a/o)/(o-1):(s-a*a/o)/o}(this,n,r);default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){"object"==typeof t&&(e=t,t=void 0);const n=this.variance(t,e);if(void 0===t)return Math.sqrt(n);for(let r=0;r<n.length;r++)n[r]=Math.sqrt(n[r]);return n}center(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{center:n=this.mean(t)}=e;switch(t){case"row":if(!Array.isArray(n))throw new TypeError("center must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[n])}(this,n),this;case"column":if(!Array.isArray(n))throw new TypeError("center must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[r])}(this,n),this;case void 0:if("number"!=typeof n)throw new TypeError("center must be a number");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e)}(this,n),this;default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");let n=e.scale;switch(t){case"row":if(void 0===n)n=function(t){const e=[];for(let n=0;n<t.rows;n++){let r=0;for(let e=0;e<t.columns;e++)r+=Math.pow(t.get(n,e),2)/(t.columns-1);e.push(Math.sqrt(r))}return e}(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[n])}(this,n),this;case"column":if(void 0===n)n=function(t){const e=[];for(let n=0;n<t.columns;n++){let r=0;for(let e=0;e<t.rows;e++)r+=Math.pow(t.get(e,n),2)/(t.rows-1);e.push(Math.sqrt(r))}return e}(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[r])}(this,n),this;case void 0:if(void 0===n)n=function(t){const e=t.size-1;let n=0;for(let r=0;r<t.columns;r++)for(let i=0;i<t.rows;i++)n+=Math.pow(t.get(i,r),2)/e;return Math.sqrt(n)}(this);else if("number"!=typeof n)throw new TypeError("scale must be a number");return function(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e)}(this,n),this;default:throw new Error(`invalid option: ${t}`)}}toString(t){return pI(this,t)}}function AI(t,e){return t-e}MI.prototype.klass="Matrix","undefined"!=typeof Symbol&&(MI.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return pI(this)}),MI.random=MI.rand,MI.randomInt=MI.randInt,MI.diagonal=MI.diag,MI.prototype.diagonal=MI.prototype.diag,MI.identity=MI.eye,MI.prototype.negate=MI.prototype.neg,MI.prototype.tensorProduct=MI.prototype.kroneckerProduct;class _I extends MI{constructor(t,e){if(super(),_I.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>=0){if(this.data=[],!(Number.isInteger(e)&&e>=0))throw new TypeError("nColumns must be a positive integer");for(let n=0;n<t;n++)this.data.push(new Float64Array(e))}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");{const n=t;if("number"!=typeof(e=(t=n.length)?n[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let r=0;r<t;r++){if(n[r].length!==e)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(n[r]))}}}this.rows=t,this.columns=e}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}removeRow(t){return vI(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),vI(this,t,!0),e=Float64Array.from(yI(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){mI(this,t);for(let e=0;e<this.rows;e++){const n=new Float64Array(this.columns-1);for(let r=0;r<t;r++)n[r]=this.data[e][r];for(let r=t+1;r<this.columns;r++)n[r-1]=this.data[e][r];this.data[e]=n}return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),mI(this,t,!0),e=bI(this,e);for(let n=0;n<this.rows;n++){const r=new Float64Array(this.columns+1);let i=0;for(;i<t;i++)r[i]=this.data[n][i];for(r[i++]=e[n];i<this.columns+1;i++)r[i]=this.data[n][i-1];this.data[n]=r}return this.columns+=1,this}}var TI,PI;PI=_I,(TI=MI).prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},TI.prototype.addS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t);return this},TI.prototype.addM=function(t){if(t=PI.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t.get(e,n));return this},TI.add=function(t,e){return new PI(t).add(e)},TI.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},TI.prototype.subS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t);return this},TI.prototype.subM=function(t){if(t=PI.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t.get(e,n));return this},TI.sub=function(t,e){return new PI(t).sub(e)},TI.prototype.subtract=TI.prototype.sub,TI.prototype.subtractS=TI.prototype.subS,TI.prototype.subtractM=TI.prototype.subM,TI.subtract=TI.sub,TI.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},TI.prototype.mulS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this},TI.prototype.mulM=function(t){if(t=PI.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t.get(e,n));return this},TI.mul=function(t,e){return new PI(t).mul(e)},TI.prototype.multiply=TI.prototype.mul,TI.prototype.multiplyS=TI.prototype.mulS,TI.prototype.multiplyM=TI.prototype.mulM,TI.multiply=TI.mul,TI.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},TI.prototype.divS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t);return this},TI.prototype.divM=function(t){if(t=PI.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t.get(e,n));return this},TI.div=function(t,e){return new PI(t).div(e)},TI.prototype.divide=TI.prototype.div,TI.prototype.divideS=TI.prototype.divS,TI.prototype.divideM=TI.prototype.divM,TI.divide=TI.div,TI.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},TI.prototype.modS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t);return this},TI.prototype.modM=function(t){if(t=PI.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t.get(e,n));return this},TI.mod=function(t,e){return new PI(t).mod(e)},TI.prototype.modulus=TI.prototype.mod,TI.prototype.modulusS=TI.prototype.modS,TI.prototype.modulusM=TI.prototype.modM,TI.modulus=TI.mod,TI.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},TI.prototype.andS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t);return this},TI.prototype.andM=function(t){if(t=PI.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t.get(e,n));return this},TI.and=function(t,e){return new PI(t).and(e)},TI.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},TI.prototype.orS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t);return this},TI.prototype.orM=function(t){if(t=PI.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t.get(e,n));return this},TI.or=function(t,e){return new PI(t).or(e)},TI.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},TI.prototype.xorS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t);return this},TI.prototype.xorM=function(t){if(t=PI.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t.get(e,n));return this},TI.xor=function(t,e){return new PI(t).xor(e)},TI.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},TI.prototype.leftShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t);return this},TI.prototype.leftShiftM=function(t){if(t=PI.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t.get(e,n));return this},TI.leftShift=function(t,e){return new PI(t).leftShift(e)},TI.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},TI.prototype.signPropagatingRightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t);return this},TI.prototype.signPropagatingRightShiftM=function(t){if(t=PI.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t.get(e,n));return this},TI.signPropagatingRightShift=function(t,e){return new PI(t).signPropagatingRightShift(e)},TI.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},TI.prototype.rightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t);return this},TI.prototype.rightShiftM=function(t){if(t=PI.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t.get(e,n));return this},TI.rightShift=function(t,e){return new PI(t).rightShift(e)},TI.prototype.zeroFillRightShift=TI.prototype.rightShift,TI.prototype.zeroFillRightShiftS=TI.prototype.rightShiftS,TI.prototype.zeroFillRightShiftM=TI.prototype.rightShiftM,TI.zeroFillRightShift=TI.rightShift,TI.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},TI.not=function(t){return new PI(t).not()},TI.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},TI.abs=function(t){return new PI(t).abs()},TI.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},TI.acos=function(t){return new PI(t).acos()},TI.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},TI.acosh=function(t){return new PI(t).acosh()},TI.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},TI.asin=function(t){return new PI(t).asin()},TI.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},TI.asinh=function(t){return new PI(t).asinh()},TI.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},TI.atan=function(t){return new PI(t).atan()},TI.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},TI.atanh=function(t){return new PI(t).atanh()},TI.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},TI.cbrt=function(t){return new PI(t).cbrt()},TI.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},TI.ceil=function(t){return new PI(t).ceil()},TI.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},TI.clz32=function(t){return new PI(t).clz32()},TI.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},TI.cos=function(t){return new PI(t).cos()},TI.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},TI.cosh=function(t){return new PI(t).cosh()},TI.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},TI.exp=function(t){return new PI(t).exp()},TI.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},TI.expm1=function(t){return new PI(t).expm1()},TI.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},TI.floor=function(t){return new PI(t).floor()},TI.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},TI.fround=function(t){return new PI(t).fround()},TI.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},TI.log=function(t){return new PI(t).log()},TI.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},TI.log1p=function(t){return new PI(t).log1p()},TI.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},TI.log10=function(t){return new PI(t).log10()},TI.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},TI.log2=function(t){return new PI(t).log2()},TI.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},TI.round=function(t){return new PI(t).round()},TI.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},TI.sign=function(t){return new PI(t).sign()},TI.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},TI.sin=function(t){return new PI(t).sin()},TI.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},TI.sinh=function(t){return new PI(t).sinh()},TI.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},TI.sqrt=function(t){return new PI(t).sqrt()},TI.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},TI.tan=function(t){return new PI(t).tan()},TI.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},TI.tanh=function(t){return new PI(t).tanh()},TI.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},TI.trunc=function(t){return new PI(t).trunc()},TI.pow=function(t,e){return new PI(t).pow(e)},TI.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},TI.prototype.powS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t));return this},TI.prototype.powM=function(t){if(t=PI.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t.get(e,n)));return this};class II extends MI{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}}function DI(t,e){let n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==e?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}class OI{constructor(t,e={}){if((t=II.checkMatrix(t)).isEmpty())throw new Error("Matrix must be non-empty");let n=t.rows,r=t.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:o=!0,autoTranspose:a=!1}=e;let s,l=Boolean(i),u=Boolean(o),c=!1;if(n<r)if(a){s=t.transpose(),n=s.rows,r=s.columns,c=!0;let e=l;l=u,u=e}else s=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else s=t.clone();let d=Math.min(n,r),h=Math.min(n+1,r),f=new Float64Array(h),p=new _I(n,d),g=new _I(r,r),v=new Float64Array(r),m=new Float64Array(n),y=new Float64Array(h);for(let E=0;E<h;E++)y[E]=E;let b=Math.min(n-1,r),x=Math.max(0,Math.min(r-2,n)),w=Math.max(b,x);for(let E=0;E<w;E++){if(E<b){f[E]=0;for(let t=E;t<n;t++)f[E]=DI(f[E],s.get(t,E));if(0!==f[E]){s.get(E,E)<0&&(f[E]=-f[E]);for(let t=E;t<n;t++)s.set(t,E,s.get(t,E)/f[E]);s.set(E,E,s.get(E,E)+1)}f[E]=-f[E]}for(let t=E+1;t<r;t++){if(E<b&&0!==f[E]){let e=0;for(let r=E;r<n;r++)e+=s.get(r,E)*s.get(r,t);e=-e/s.get(E,E);for(let r=E;r<n;r++)s.set(r,t,s.get(r,t)+e*s.get(r,E))}v[t]=s.get(E,t)}if(l&&E<b)for(let t=E;t<n;t++)p.set(t,E,s.get(t,E));if(E<x){v[E]=0;for(let t=E+1;t<r;t++)v[E]=DI(v[E],v[t]);if(0!==v[E]){v[E+1]<0&&(v[E]=0-v[E]);for(let t=E+1;t<r;t++)v[t]/=v[E];v[E+1]+=1}if(v[E]=-v[E],E+1<n&&0!==v[E]){for(let t=E+1;t<n;t++)m[t]=0;for(let t=E+1;t<n;t++)for(let e=E+1;e<r;e++)m[t]+=v[e]*s.get(t,e);for(let t=E+1;t<r;t++){let e=-v[t]/v[E+1];for(let r=E+1;r<n;r++)s.set(r,t,s.get(r,t)+e*m[r])}}if(u)for(let t=E+1;t<r;t++)g.set(t,E,v[t])}}let C=Math.min(r,n+1);if(b<r&&(f[b]=s.get(b,b)),n<C&&(f[C-1]=0),x+1<C&&(v[x]=s.get(x,C-1)),v[C-1]=0,l){for(let t=b;t<d;t++){for(let e=0;e<n;e++)p.set(e,t,0);p.set(t,t,1)}for(let t=b-1;t>=0;t--)if(0!==f[t]){for(let e=t+1;e<d;e++){let r=0;for(let i=t;i<n;i++)r+=p.get(i,t)*p.get(i,e);r=-r/p.get(t,t);for(let i=t;i<n;i++)p.set(i,e,p.get(i,e)+r*p.get(i,t))}for(let e=t;e<n;e++)p.set(e,t,-p.get(e,t));p.set(t,t,1+p.get(t,t));for(let e=0;e<t-1;e++)p.set(e,t,0)}else{for(let e=0;e<n;e++)p.set(e,t,0);p.set(t,t,1)}}if(u)for(let E=r-1;E>=0;E--){if(E<x&&0!==v[E])for(let t=E+1;t<r;t++){let e=0;for(let n=E+1;n<r;n++)e+=g.get(n,E)*g.get(n,t);e=-e/g.get(E+1,E);for(let n=E+1;n<r;n++)g.set(n,t,g.get(n,t)+e*g.get(n,E))}for(let t=0;t<r;t++)g.set(t,E,0);g.set(E,E,1)}let S=C-1,k=Number.EPSILON;for(;C>0;){let t,e;for(t=C-2;t>=-1&&-1!==t;t--){const e=Number.MIN_VALUE+k*Math.abs(f[t]+Math.abs(f[t+1]));if(Math.abs(v[t])<=e||Number.isNaN(v[t])){v[t]=0;break}}if(t===C-2)e=4;else{let n;for(n=C-1;n>=t&&n!==t;n--){let e=(n!==C?Math.abs(v[n]):0)+(n!==t+1?Math.abs(v[n-1]):0);if(Math.abs(f[n])<=k*e){f[n]=0;break}}n===t?e=3:n===C-1?e=1:(e=2,t=n)}switch(t++,e){case 1:{let e=v[C-2];v[C-2]=0;for(let n=C-2;n>=t;n--){let i=DI(f[n],e),o=f[n]/i,a=e/i;if(f[n]=i,n!==t&&(e=-a*v[n-1],v[n-1]=o*v[n-1]),u)for(let t=0;t<r;t++)i=o*g.get(t,n)+a*g.get(t,C-1),g.set(t,C-1,-a*g.get(t,n)+o*g.get(t,C-1)),g.set(t,n,i)}break}case 2:{let e=v[t-1];v[t-1]=0;for(let r=t;r<C;r++){let i=DI(f[r],e),o=f[r]/i,a=e/i;if(f[r]=i,e=-a*v[r],v[r]=o*v[r],l)for(let e=0;e<n;e++)i=o*p.get(e,r)+a*p.get(e,t-1),p.set(e,t-1,-a*p.get(e,r)+o*p.get(e,t-1)),p.set(e,r,i)}break}case 3:{const e=Math.max(Math.abs(f[C-1]),Math.abs(f[C-2]),Math.abs(v[C-2]),Math.abs(f[t]),Math.abs(v[t])),i=f[C-1]/e,o=f[C-2]/e,a=v[C-2]/e,s=f[t]/e,c=v[t]/e,d=((o+i)*(o-i)+a*a)/2,h=i*a*(i*a);let m=0;0===d&&0===h||(m=d<0?0-Math.sqrt(d*d+h):Math.sqrt(d*d+h),m=h/(d+m));let y=(s+i)*(s-i)+m,b=s*c;for(let x=t;x<C-1;x++){let e=DI(y,b);0===e&&(e=Number.MIN_VALUE);let i=y/e,o=b/e;if(x!==t&&(v[x-1]=e),y=i*f[x]+o*v[x],v[x]=i*v[x]-o*f[x],b=o*f[x+1],f[x+1]=i*f[x+1],u)for(let t=0;t<r;t++)e=i*g.get(t,x)+o*g.get(t,x+1),g.set(t,x+1,-o*g.get(t,x)+i*g.get(t,x+1)),g.set(t,x,e);if(e=DI(y,b),0===e&&(e=Number.MIN_VALUE),i=y/e,o=b/e,f[x]=e,y=i*v[x]+o*f[x+1],f[x+1]=-o*v[x]+i*f[x+1],b=o*v[x+1],v[x+1]=i*v[x+1],l&&x<n-1)for(let t=0;t<n;t++)e=i*p.get(t,x)+o*p.get(t,x+1),p.set(t,x+1,-o*p.get(t,x)+i*p.get(t,x+1)),p.set(t,x,e)}v[C-2]=y;break}case 4:if(f[t]<=0&&(f[t]=f[t]<0?-f[t]:0,u))for(let e=0;e<=S;e++)g.set(e,t,-g.get(e,t));for(;t<S&&!(f[t]>=f[t+1]);){let e=f[t];if(f[t]=f[t+1],f[t+1]=e,u&&t<r-1)for(let n=0;n<r;n++)e=g.get(n,t+1),g.set(n,t+1,g.get(n,t)),g.set(n,t,e);if(l&&t<n-1)for(let r=0;r<n;r++)e=p.get(r,t+1),p.set(r,t+1,p.get(r,t)),p.set(r,t,e);t++}C--}}if(c){let t=g;g=p,p=t}this.m=n,this.n=r,this.s=f,this.U=p,this.V=g}solve(t){let e=t,n=this.threshold,r=this.s.length,i=_I.zeros(r,r);for(let d=0;d<r;d++)Math.abs(this.s[d])<=n?i.set(d,d,0):i.set(d,d,1/this.s[d]);let o=this.U,a=this.rightSingularVectors,s=a.mmul(i),l=a.rows,u=o.rows,c=_I.zeros(l,u);for(let d=0;d<l;d++)for(let t=0;t<u;t++){let e=0;for(let n=0;n<r;n++)e+=s.get(d,n)*o.get(t,n);c.set(d,t,e)}return c.mmul(e)}solveForDiagonal(t){return this.solve(_I.diag(t))}inverse(){let t=this.V,e=this.threshold,n=t.rows,r=t.columns,i=new _I(n,this.s.length);for(let u=0;u<n;u++)for(let n=0;n<r;n++)Math.abs(this.s[n])>e&&i.set(u,n,t.get(u,n)/this.s[n]);let o=this.U,a=o.rows,s=o.columns,l=new _I(n,a);for(let u=0;u<n;u++)for(let t=0;t<a;t++){let e=0;for(let n=0;n<s;n++)e+=i.get(u,n)*o.get(t,n);l.set(u,t,e)}return l}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s;for(let r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return _I.diag(this.s)}}class RI{constructor(t){this.distances=t.distances,this.dimension=t.dimension||2,this.linkDistance=t.linkDistance}layout(){const{dimension:t,distances:e,linkDistance:n}=this;try{const n=_I.mul(_I.pow(e,2),-.5),r=n.mean("row"),i=n.mean("column"),o=n.mean();n.add(o).subRowVector(r).subColumnVector(i);const a=new OI(n),s=_I.sqrt(a.diagonalMatrix).diagonal();return a.leftSingularVectors.toJSON().map((e=>_I.mul([e],[s]).toJSON()[0].splice(0,t)))}catch(r){const t=[];for(let i=0;i<e.length;i++){const e=Math.random()*n,r=Math.random()*n;t.push([e,r])}return t}}}class LI{constructor(t){this.disp=[],this.positions=t.positions,this.adjMatrix=t.adjMatrix,this.focusID=t.focusID,this.radii=t.radii,this.iterations=t.iterations||10,this.height=t.height||10,this.width=t.width||10,this.speed=t.speed||100,this.gravity=t.gravity||10,this.nodeSizeFunc=t.nodeSizeFunc,this.k=t.k||5,this.strictRadial=t.strictRadial,this.nodes=t.nodes}layout(){const t=this,e=t.positions,n=[],r=t.iterations,i=t.width/10;t.maxDisplace=i,t.disp=n;for(let o=0;o<r;o++)e.forEach(((t,e)=>{n[e]={x:0,y:0}})),t.getRepulsion(),t.updatePositions();return e}getRepulsion(){const t=this,e=t.positions,n=t.nodes,r=t.disp,i=t.k,o=t.radii||[];e.forEach(((a,s)=>{r[s]={x:0,y:0},e.forEach(((e,l)=>{if(s===l)return;if(o[s]!==o[l])return;let u=a[0]-e[0],c=a[1]-e[1],d=Math.sqrt(u*u+c*c);if(0===d){d=1;const t=s>l?1:-1;u=.01*t,c=.01*t}if(d<t.nodeSizeFunc(n[s])/2+t.nodeSizeFunc(n[l])/2){const t=i*i/d;r[s].x+=u/d*t,r[s].y+=c/d*t}}))}))}updatePositions(){const t=this,e=t.positions,n=t.disp,r=t.speed,i=t.strictRadial,o=t.focusID,a=t.maxDisplace||t.width/10;i&&n.forEach(((t,n)=>{const r=e[n][0]-e[o][0],i=e[n][1]-e[o][1],a=Math.sqrt(r*r+i*i);let s=i/a,l=-r/a;const u=Math.sqrt(t.x*t.x+t.y*t.y);let c=Math.acos((s*t.x+l*t.y)/u);c>Math.PI/2&&(c-=Math.PI/2,s*=-1,l*=-1);const d=Math.cos(c)*u;t.x=s*d,t.y=l*d}));const s=t.radii;e.forEach(((t,l)=>{if(l===o)return;const u=Math.sqrt(n[l].x*n[l].x+n[l].y*n[l].y);if(u>0&&l!==o){const c=Math.min(a*(r/800),u);if(t[0]+=n[l].x/u*c,t[1]+=n[l].y/u*c,i){let n=t[0]-e[o][0],r=t[1]-e[o][1];const i=Math.sqrt(n*n+r*r);n=n/i*s[l],r=r/i*s[l],t[0]=e[o][0]+n,t[1]=e[o][1]+r}}}))}}function BI(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function FI(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function NI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jI(t,e,n){return e&&zI(t.prototype,e),n&&zI(t,n),t}function GI(t,e,n,r,i){var o={};return Object.keys(r).forEach((function(t){o[t]=r[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var UI,$I;$I=UI||(UI={}),function(t){var e="object"==typeof Ym?Ym:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=r($I);function r(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===e.Reflect?e.Reflect=$I:n=r(e.Reflect,n),function(t){var e=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,a={__proto__:[]}instanceof Array,s=!o&&!a,l={create:o?function(){return rt(Object.create(null))}:a?function(){return rt({__proto__:null})}:function(){return rt({})},has:s?function(t,n){return e.call(t,n)}:function(t,e){return e in t},get:s?function(t,n){return e.call(t,n)?t[n]:void 0}:function(t,e){return t[e]}},u=Object.getPrototypeOf(Function),c="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=c||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?tt():Map,h=c||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?et():Set,f=new(c||"function"!=typeof WeakMap?nt():WeakMap);function p(t,e,n,r){if(L(n)){if(!V(t))throw new TypeError;if(!H(e))throw new TypeError;return k(t,e)}if(!V(t))throw new TypeError;if(!N(e))throw new TypeError;if(!N(r)&&!L(r)&&!B(r))throw new TypeError;return B(r)&&(r=void 0),E(t,e,n=$(n),r)}function g(t,e){function n(n,r){if(!N(n))throw new TypeError;if(!L(r)&&!Y(r))throw new TypeError;I(t,e,n,r)}return n}function v(t,e,n,r){if(!N(n))throw new TypeError;return L(r)||(r=$(r)),I(t,e,n,r)}function m(t,e,n){if(!N(e))throw new TypeError;return L(n)||(n=$(n)),A(t,e,n)}function y(t,e,n){if(!N(e))throw new TypeError;return L(n)||(n=$(n)),_(t,e,n)}function b(t,e,n){if(!N(e))throw new TypeError;return L(n)||(n=$(n)),T(t,e,n)}function x(t,e,n){if(!N(e))throw new TypeError;return L(n)||(n=$(n)),P(t,e,n)}function w(t,e){if(!N(t))throw new TypeError;return L(e)||(e=$(e)),D(t,e)}function C(t,e){if(!N(t))throw new TypeError;return L(e)||(e=$(e)),O(t,e)}function S(t,e,n){if(!N(e))throw new TypeError;L(n)||(n=$(n));var r=M(e,n,!1);if(L(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var i=f.get(e);return i.delete(n),i.size>0||f.delete(e),!0}function k(t,e){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e);if(!L(r)&&!B(r)){if(!H(r))throw new TypeError;e=r}}return e}function E(t,e,n,r){for(var i=t.length-1;i>=0;--i){var o=(0,t[i])(e,n,r);if(!L(o)&&!B(o)){if(!N(o))throw new TypeError;r=o}}return r}function M(t,e,n){var r=f.get(t);if(L(r)){if(!n)return;r=new d,f.set(t,r)}var i=r.get(e);if(L(i)){if(!n)return;i=new d,r.set(e,i)}return i}function A(t,e,n){if(_(t,e,n))return!0;var r=J(e);return!B(r)&&A(t,r,n)}function _(t,e,n){var r=M(e,n,!1);return!L(r)&&G(r.has(t))}function T(t,e,n){if(_(t,e,n))return P(t,e,n);var r=J(e);return B(r)?void 0:T(t,r,n)}function P(t,e,n){var r=M(e,n,!1);if(!L(r))return r.get(t)}function I(t,e,n,r){M(n,r,!0).set(t,e)}function D(t,e){var n=O(t,e),r=J(t);if(null===r)return n;var i=D(r,e);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new h,a=[],s=0,l=n;s<l.length;s++){var u=l[s];o.has(u)||(o.add(u),a.push(u))}for(var c=0,d=i;c<d.length;c++)u=d[c],o.has(u)||(o.add(u),a.push(u));return a}function O(t,e){var n=[],r=M(t,e,!1);if(L(r))return n;for(var i=q(r.keys()),o=0;;){var a=Z(i);if(!a)return n.length=o,n;var s=K(a);try{n[o]=s}catch(PCt){try{Q(i)}finally{throw PCt}}o++}}function R(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function L(t){return void 0===t}function B(t){return null===t}function F(t){return"symbol"==typeof t}function N(t){return"object"==typeof t?null!==t:"function"==typeof t}function z(t,e){switch(R(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",i=X(t,r);if(void 0!==i){var o=i.call(t,n);if(N(o))throw new TypeError;return o}return j(t,"default"===n?"number":n)}function j(t,e){if("string"===e){var n=t.toString;if(W(n)&&!N(i=n.call(t)))return i;if(W(r=t.valueOf)&&!N(i=r.call(t)))return i}else{var r;if(W(r=t.valueOf)&&!N(i=r.call(t)))return i;var i,o=t.toString;if(W(o)&&!N(i=o.call(t)))return i}throw new TypeError}function G(t){return!!t}function U(t){return""+t}function $(t){var e=z(t,3);return F(e)?e:U(e)}function V(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function W(t){return"function"==typeof t}function H(t){return"function"==typeof t}function Y(t){switch(R(t)){case 3:case 4:return!0;default:return!1}}function X(t,e){var n=t[e];if(null!=n){if(!W(n))throw new TypeError;return n}}function q(t){var e=X(t,i);if(!W(e))throw new TypeError;var n=e.call(t);if(!N(n))throw new TypeError;return n}function K(t){return t.value}function Z(t){var e=t.next();return!e.done&&e}function Q(t){var e=t.return;e&&e.call(t)}function J(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===u)return e;if(e!==u)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var i=r.constructor;return"function"!=typeof i||i===t?e:i}function tt(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[i]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,o)},e.prototype.entries=function(){return new n(this._keys,this._values,a)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[i]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function o(t,e){return e}function a(t,e){return[t,e]}}function et(){return function(){function t(){this._map=new d}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[i]=function(){return this.keys()},t}()}function nt(){var t=16,n=l.create(),r=i();return function(){function t(){this._key=i()}return t.prototype.has=function(t){var e=o(t,!1);return void 0!==e&&l.has(e,this._key)},t.prototype.get=function(t){var e=o(t,!1);return void 0!==e?l.get(e,this._key):void 0},t.prototype.set=function(t,e){return o(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=o(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=i()},t}();function i(){var t;do{t="@@WeakMap@@"+u()}while(l.has(n,t));return n[t]=!0,t}function o(t,n){if(!e.call(t,r)){if(!n)return;Object.defineProperty(t,r,{value:l.create()})}return t[r]}function a(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function s(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):a(new Uint8Array(t),t):a(new Array(t),t)}function u(){var e=s(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<t;++r){var i=e[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}function rt(t){return t.__=void 0,delete t.__,t}t("decorate",p),t("metadata",g),t("defineMetadata",v),t("hasMetadata",m),t("hasOwnMetadata",y),t("getMetadata",b),t("getOwnMetadata",x),t("getMetadataKeys",w),t("getOwnMetadataKeys",C),t("deleteMetadata",S)}(n)}();var VI=qm((function(t){var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(I){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),a=new _(r||[]);return o._invoke=function(t,e,n){var r=d;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var l=c(t,e,n);if("normal"===l.type){if(r=n.done?p:h,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=p,n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(I){return{type:"throw",arg:I}}}t.wrap=u;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",g={};function v(){}function m(){}function y(){}var b={};l(b,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(T([])));w&&w!==n&&r.call(w,o)&&(b=w);var C=y.prototype=v.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(i,o,a,s){var l=c(t[i],t,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function E(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=c(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function T(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:P}}function P(){return{value:e,done:!0}}return m.prototype=y,l(C,"constructor",y),l(y,"constructor",m),m.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(C),t},t.awrap=function(t){return{__await:t}},S(k.prototype),l(k.prototype,a,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new k(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(C),l(C,s,"Generator"),l(C,o,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=e}catch(n){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}));function WI(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(u){return void n(u)}s.done?e(l):Promise.resolve(l).then(r,i)}function HI(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){WI(o,r,i,a,s,"next",t)}function s(t){WI(o,r,i,a,s,"throw",t)}a(void 0)}))}}var YI=1;function XI(){return YI++}var qI=function t(e){NI(this,t)},KI=function(){function t(e){NI(this,t),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=e}var e;return jI(t,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(t){return this.lookup[t]>-1}},{key:"create",value:function(t,e){this.lookup[t]=this.components.length;var n=new this.clazz(e||{});return this.components.push(n),this.entities.push(t),n}},{key:"remove",value:function(t){var e=this.lookup[t];e>-1&&e<this.components.length-1&&(this.components[e]=this.components[this.components.length-1],this.entities[e]=this.entities[this.entities.length-1],this.lookup[this.entities[e]]=e),this.components.pop(),this.entities.pop(),delete this.lookup[t]}},{key:"removeKeepSorted",value:function(t){var e=this.lookup[t];if(e>-1){var n=this.entities[e];if(e<this.components.length-1){for(var r=e+1;r<this.components.length;++r)this.components[r-1]=this.components[r];for(var i=e+1;i<this.entities.length;++i)this.entities[i-1]=this.entities[i],this.lookup[this.entities[i-1]]=i-1}this.components.pop(),this.entities.pop(),delete this.lookup[n]}}},{key:"moveItem",value:function(t,e){if(t!==e){for(var n=this.components[t],r=this.entities[t],i=t<e?1:-1,o=t;o!==e;o+=i){var a=o+i;this.components[o]=this.components[a],this.entities[o]=this.entities[a],this.lookup[this.entities[o]]=o}this.components[e]=n,this.entities[e]=r,this.lookup[r]=e}}},{key:"getEntity",value:function(t){return this.entities[t]}},{key:"getComponent",value:function(t){return this.components[t]}},{key:"getComponentByEntity",value:function(t){var e=this.lookup[t];return e>-1?this.components[e]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(t){for(var e=0,n=Object.keys(this.lookup);e<n.length;e++){var r=n[e],i=Number(r);if(this.lookup[i]===t)return i}return-1}},{key:"find",value:function(t){for(var e=0;e<this.getCount();e++){var n=this.getComponent(e);if(t(n,e))return n}return null}},{key:"findIndex",value:function(t){for(var e=0;e<this.getCount();e++){if(t(this.getComponent(e),e))return e}return-1}},{key:"forEach",value:function(t){for(var e=0,n=Object.keys(this.lookup);e<n.length;e++){var r=n[e],i=Number(r),o=this.lookup[i];t(i,this.getComponent(o))}}},{key:"forEachAsync",value:(e=HI(VI.mark((function t(e){var n,r,i,o,a;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0,r=Object.keys(this.lookup);case 1:if(!(n<r.length)){t.next=10;break}return i=r[n],o=Number(i),a=this.lookup[o],t.next=7,e(o,this.getComponent(a));case 7:n++,t.next=1;break;case 10:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"map",value:function(t){for(var e=[],n=0,r=Object.keys(this.lookup);n<r.length;n++){var i=r[n],o=Number(i),a=this.lookup[o];e.push(t(o,this.getComponent(a)))}return e}}]),t}();function ZI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function QI(t,e){if(t){if("string"==typeof t)return ZI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ZI(t,e):void 0}}function JI(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||QI(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var tD=["inject","multi_inject","name","unmanaged","named","optional"],eD="Request",nD="Singleton",rD="Transient",iD="ConstantValue",oD="Constructor",aD="DynamicValue",sD="Factory",lD="Function",uD="Instance",cD="Invalid",dD="Provider",hD="ClassProperty",fD="ConstructorArgument",pD="Variable",gD=0;function vD(){return gD++}var mD=function(){function t(t,e){this.id=vD(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=cD,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=e.scope===nD&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}(),yD="No matching bindings found for serviceIdentifier:",bD=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata("inversify:paramtypes",t),userGeneratedMetadata:Reflect.getMetadata("inversify:tagged",t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata("inversify:tagged_props",t)||[]},t}(),xD=2,wD=0,CD=1;function SD(t){return t instanceof RangeError||"Maximum call stack size exceeded"===t.message}function kD(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function ED(t,e,n){var r="",i=n(t,e);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach((function(t){var e="Object";null!==t.implementationType&&(e=_D(t.implementationType)),r=r+"\n "+e,t.constraint.metaData&&(r=r+" - "+t.constraint.metaData)}))),r}function MD(t,e){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===e||MD(t.parentRequest,e))}function AD(t){t.childRequests.forEach((function(t){if(MD(t,t.serviceIdentifier)){var e=function(t){return function t(e,n){void 0===n&&(n=[]);var r=kD(e.serviceIdentifier);return n.push(r),null!==e.parentRequest?t(e.parentRequest,n):n}(t).reverse().join(" --\x3e ")}(t);throw new Error("Circular dependency found: "+e)}AD(t)}))}function _D(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}var TD=function(){function t(t){this.id=vD(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}(),PD=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return"named"===this.key?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}(),ID=function(t,e){this.parentContext=t,this.rootRequest=e};function DD(t,e,n,r){RD("inversify:tagged",t,e,r,n)}function OD(t,e,n){RD("inversify:tagged_props",t.constructor,e,n)}function RD(t,e,n,r,i){var o={},a="number"==typeof i,s=void 0!==i&&a?i.toString():n;if(a&&void 0!==n)throw new Error("The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.");Reflect.hasOwnMetadata(t,e)&&(o=Reflect.getMetadata(t,e));var l=o[s];if(Array.isArray(l))for(var u=0,c=l;u<c.length;u++){var d=c[u];if(d.key===r.key)throw new Error("Metadata key was used more than once in a parameter: "+d.key.toString())}else l=[];l.push(r),o[s]=l,Reflect.defineMetadata(t,o,e)}var LD=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();function BD(t){return function(e,n,r){if(void 0===t)throw new Error("@inject called with undefined this could mean that the class "+e.name+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation.");var i=new PD("inject",t);"number"==typeof r?DD(e,n,r,i):OD(e,n,i)}}var FD=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}(),ND=function(){function t(t,e,n,r){this.id=vD(),this.type=t,this.serviceIdentifier=n,this.name=new FD(e||""),this.metadata=new Array;var i=null;"string"==typeof r?i=new PD("named",r):r instanceof PD&&(i=r),null!==i&&this.metadata.push(i)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag("multi_inject")},t.prototype.matchesArray=function(t){return this.matchesTag("multi_inject")(t)},t.prototype.isNamed=function(){return this.hasTag("named")},t.prototype.isTagged=function(){return this.metadata.some((function(t){return tD.every((function(e){return t.key!==e}))}))},t.prototype.isOptional=function(){return this.matchesTag("optional")(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return"named"===t.key}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return tD.every((function(e){return t.key!==e}))})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag("named")(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var r=0,i=e.metadata;r<i.length;r++){var o=i[r];if(o.key===t&&o.value===n)return!0}return!1}},t}(),zD=function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t};function jD(t,e,n,r){var i=t.getConstructorMetadata(n),o=i.compilerGeneratedMetadata;if(void 0===o)throw new Error("Missing required @injectable annotation in: "+e+".");var a=i.userGeneratedMetadata,s=Object.keys(a),l=0===n.length&&s.length>0,u=s.length>n.length,c=function(t,e,n,r,i){for(var o=[],a=0;a<i;a++){var s=GD(a,t,e,n,r);null!==s&&o.push(s)}return o}(r,e,o,a,l||u?s.length:n.length),d=UD(t,n);return zD(zD([],c),d)}function GD(t,e,n,r,i){var o=i[t.toString()]||[],a=VD(o),s=!0!==a.unmanaged,l=r[t],u=a.inject||a.multiInject;if((l=u||l)instanceof LD&&(l=l.unwrap()),s){if(!e&&(l===Object||l===Function||void 0===l))throw new Error("Missing required @inject or @multiInject annotation in: argument "+t+" in class "+n+".");var c=new ND(fD,a.targetName,l);return c.metadata=o,c}return null}function UD(t,e){for(var n=t.getPropertiesMetadata(e),r=[],i=0,o=Object.keys(n);i<o.length;i++){var a=o[i],s=n[a],l=VD(n[a]),u=l.targetName||a,c=l.inject||l.multiInject,d=new ND(hD,u,c);d.metadata=s,r.push(d)}var h=Object.getPrototypeOf(e.prototype).constructor;if(h!==Object){var f=UD(t,h);r=zD(zD([],r),f)}return r}function $D(t,e){var n=Object.getPrototypeOf(e.prototype).constructor;if(n!==Object){var r=jD(t,_D(n),n,!0),i=r.map((function(t){return t.metadata.filter((function(t){return"unmanaged"===t.key}))})),o=[].concat.apply([],i).length,a=r.length-o;return a>0?a:$D(t,n)}return 0}function VD(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e.inject,multiInject:e.multi_inject,targetName:e.name,unmanaged:e.unmanaged}}var WD=function(){function t(t,e,n,r,i){this.id=vD(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,r){var i=new t(e,this.parentContext,this,n,r);return this.childRequests.push(i),i},t}();function HD(t){return t._bindingDictionary}function YD(t,e,n,r,i){var o=qD(n.container,i.serviceIdentifier),a=[];return o.length===wD&&n.container.options.autoBindInjectable&&"function"==typeof i.serviceIdentifier&&t.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(i.serviceIdentifier).toSelf(),o=qD(n.container,i.serviceIdentifier)),a=e?o:o.filter((function(t){var e=new WD(t.serviceIdentifier,n,r,t,i);return t.constraint(e)})),function(t,e,n,r){switch(e.length){case wD:if(n.isOptional())return e;var i=kD(t),o=yD;throw o+=function(t,e){if(e.isTagged()||e.isNamed()){var n="",r=e.getNamedTag(),i=e.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach((function(t){n+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+n}return" "+t}(i,n),o+=ED(r,i,qD),new Error(o);case CD:if(!n.isArray())return e;case xD:default:if(n.isArray())return e;o="Ambiguous match found for serviceIdentifier: "+(i=kD(t));throw o+=ED(r,i,qD),new Error(o)}}(i.serviceIdentifier,a,i,n.container),a}function XD(t,e,n,r,i,o){var a,s;if(null===i){a=YD(t,e,r,null,o),s=new WD(n,r,null,a,o);var l=new ID(r,s);r.addPlan(l)}else a=YD(t,e,r,i,o),s=i.addChildRequest(o.serviceIdentifier,a,o);a.forEach((function(e){var n=null;if(o.isArray())n=s.addChildRequest(e.serviceIdentifier,e,o);else{if(e.cache)return;n=s}if(e.type===uD&&null!==e.implementationType){var i=function(t,e){return jD(t,_D(e),e,!1)}(t,e.implementationType);if(!r.container.options.skipBaseClassChecks){var a=$D(t,e.implementationType);if(i.length<a){var l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."}(_D(e.implementationType));throw new Error(l)}}i.forEach((function(e){XD(t,!1,e.serviceIdentifier,r,n,e)}))}}))}function qD(t,e){var n=[],r=HD(t);return r.hasKey(e)?n=r.get(e):null!==t.parent&&(n=qD(t.parent,e)),n}function KD(t,e,n,r,i,o,a,s){void 0===s&&(s=!1);var l=new TD(e),u=function(t,e,n,r,i,o){var a=new PD(t?"multi_inject":"inject",n),s=new ND(e,r,n,a);if(void 0!==i){var l=new PD(i,o);s.metadata.push(l)}return s}(n,r,i,"",o,a);try{return XD(t,s,i,l,null,u),l}catch(c){throw SD(c)&&l.plan&&AD(l.plan.rootRequest),c}}function ZD(t,e,n){var r,i,o=null;if(e.length>0){var a=e.filter((function(t){return null!==t.target&&t.target.type===fD})).map(n);i=a,o=function(t,e,n){var r=e.filter((function(t){return null!==t.target&&t.target.type===hD})),i=r.map(n);return r.forEach((function(e,n){var r;r=e.target.name.value();var o=i[n];t[r]=o})),t}(o=new((r=t).bind.apply(r,function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}([void 0],i))),e,n)}else o=new t;return function(t,e){if(Reflect.hasMetadata("post_construct",t)){var n=Reflect.getMetadata("post_construct",t);try{e[n.value]()}catch(PCt){throw new Error(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]}(t.name,PCt.message))}}}(t,o),o}var QD=function(t,e,n){try{return n()}catch(r){throw SD(r)?new Error(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."}(t,e.toString())):r}},JD=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,r=e.childRequests,i=e.target&&e.target.isArray(),o=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(i&&o)return r.map((function(e){return JD(t)(e)}));var a=null;if(!e.target.isOptional()||0!==n.length){var s=n[0],l=s.scope===nD,u=s.scope===eD;if(l&&s.activated)return s.cache;if(u&&null!==t&&t.has(s.id))return t.get(s.id);if(s.type===iD)a=s.cache,s.activated=!0;else if(s.type===lD)a=s.cache,s.activated=!0;else if(s.type===oD)a=s.implementationType;else if(s.type===aD&&null!==s.dynamicValue)a=QD("toDynamicValue",s.serviceIdentifier,(function(){return s.dynamicValue(e.parentContext)}));else if(s.type===sD&&null!==s.factory)a=QD("toFactory",s.serviceIdentifier,(function(){return s.factory(e.parentContext)}));else if(s.type===dD&&null!==s.provider)a=QD("toProvider",s.serviceIdentifier,(function(){return s.provider(e.parentContext)}));else{if(s.type!==uD||null===s.implementationType){var c=kD(e.serviceIdentifier);throw new Error("Invalid binding type: "+c)}a=ZD(s.implementationType,r,JD(t))}return"function"==typeof s.onActivation&&(a=s.onActivation(e.parentContext,a)),l&&(s.cache=a,s.activated=!0),u&&null!==t&&!t.has(s.id)&&t.set(s.id,a),a}}};var tO=function(t,e){var n=t.parentRequest;return null!==n&&(!!e(n)||tO(n,e))},eO=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new PD(t,e),n}},nO=eO("named"),rO=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var r=e.bindings[0].implementationType;return t===r}return!1}},iO=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new oO(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=nO(t),new oO(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new oO(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=eO(t)(e),new oO(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return rO(t)(e.parentRequest)},new oO(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return nO(t)(e.parentRequest)},new oO(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return eO(t)(e)(n.parentRequest)},new oO(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return tO(e,rO(t))},new oO(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!tO(e,rO(t))},new oO(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return tO(e,nO(t))},new oO(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!tO(e,nO(t))},new oO(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return tO(n,eO(t)(e))},new oO(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!tO(n,eO(t)(e))},new oO(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return tO(e,t)},new oO(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!tO(e,t)},new oO(this._binding)},t}(),oO=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new iO(this._binding)},t}(),aO=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new iO(this._binding),this._bindingOnSyntax=new oO(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}(),sO=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=eD,new aO(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=nD,new aO(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=rD,new aO(this._binding)},t}(),lO=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new iO(this._binding),this._bindingOnSyntax=new oO(this._binding),this._bindingInSyntax=new sO(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}(),uO=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=uD,this._binding.implementationType=t,new lO(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error("The toSelf function can only be applied when a constructor is used as service identifier");var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=iD,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=nD,new aO(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=aD,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new lO(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=oD,this._binding.implementationType=t,this._binding.scope=nD,new aO(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=sD,this._binding.factory=t,this._binding.scope=nD,new aO(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error("Value provided to function binding must be a function!");var e=this.toConstantValue(t);return this._binding.type=lD,this._binding.scope=nD,e},t.prototype.toAutoFactory=function(t){return this._binding.type=sD,this._binding.factory=function(e){return function(){return e.container.get(t)}},this._binding.scope=nD,new aO(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=dD,this._binding.provider=t,this._binding.scope=nD,new aO(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}(),cO=function(){function t(){}return t.of=function(e,n){var r=new t;return r.bindings=e,r.middleware=n,r},t}(),dO=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error("NULL argument");if(null==e)throw new Error("NULL argument");var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error("NULL argument");var e=this._map.get(t);if(void 0!==e)return e;throw new Error("Key Not Found")},t.prototype.remove=function(t){if(null==t)throw new Error("NULL argument");if(!this._map.delete(t))throw new Error("Key Not Found")},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(n,r){var i=n.filter((function(e){return!t(e)}));i.length>0?e._map.set(r,i):e._map.delete(r)}))},t.prototype.hasKey=function(t){if(null==t)throw new Error("NULL argument");return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,t.clone())}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t}(),hO=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(PCt){o(PCt)}}function s(t){try{l(r.throw(t))}catch(PCt){o(PCt)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},fO=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(PCt){o=[6,PCt],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},pO=function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},gO=function(){function t(t){this._appliedMiddleware=[];var e=t||{};if("object"!=typeof e)throw new Error("Invalid Container constructor argument. Container options must be an object.");if(void 0===e.defaultScope)e.defaultScope=rD;else if(e.defaultScope!==nD&&e.defaultScope!==rD&&e.defaultScope!==eD)throw new Error("Invalid Container option. Default scope must be a string ('singleton' or 'transient').");if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error("Invalid Container option. Auto bind injectable must be a boolean");if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error("Invalid Container option. Skip base check must be a boolean");this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=vD(),this._bindingDictionary=new dO,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new bD}return t.merge=function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=new t,a=pO([e,n],r).map((function(t){return HD(t)})),s=HD(o);function l(t,e){t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))}return a.forEach((function(t){l(t,s)})),o},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=t;r<i.length;r++){var o=i[r],a=n(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return hO(this,void 0,void 0,(function(){var e,n,r,i,o;return fO(this,(function(a){switch(a.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,r=t,a.label=1;case 1:return n<r.length?(i=r[n],o=e(i.id),[4,i.registry(o.bindFunction,o.unbindFunction,o.isboundFunction,o.rebindFunction)]):[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(t){return function(e){return e.moduleId===t}};e.forEach((function(e){var n=r(e.id);t._bindingDictionary.removeByCondition(n)}))},t.prototype.bind=function(t){var e=this.options.defaultScope||rD,n=new mD(t,e);return this._bindingDictionary.add(t,n),new uO(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(PCt){throw new Error("Could not unbind serviceIdentifier: "+kD(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new dO},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,"named",e)},t.prototype.isBoundTagged=function(t,e,n){var r=!1;if(this._bindingDictionary.hasKey(t)){var i=this._bindingDictionary.get(t),o=function(t,e,n,r){var i=new ND(pD,"",e,new PD(n,r)),o=new TD(t);return new WD(e,o,null,[],i)}(this,t,e,n);r=i.some((function(t){return t.constraint(o)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(t,e,n)),r},t.prototype.snapshot=function(){this._snapshots.push(cO.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error("No snapshot available to restore.");this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._appliedMiddleware=this._appliedMiddleware.concat(t);var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,pD,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,pD,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,"named",e)},t.prototype.getAll=function(t){return this._get(!0,!0,pD,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,pD,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,"named",e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),this._appliedMiddleware.forEach((function(t){e.applyMiddleware(t)})),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(r){var i=t.rebind.bind(t)(r);return e(i,n),i}};return function(r){return{bindFunction:(i=r,function(n){var r=t.bind.bind(t)(n);return e(r,i),r}),isboundFunction:function(e){return t.isBound.bind(t)(e)},rebindFunction:n(r),unbindFunction:function(e){t.unbind.bind(t)(e)}};var i}},t.prototype._get=function(t,e,n,r,i,o){var a=null,s={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:i,serviceIdentifier:r,targetType:n,value:o};if(this._middleware){if(null==(a=this._middleware(s)))throw new Error("Invalid return type in middleware. Middleware must return!")}else a=this._planAndResolve()(s);return a},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=KD(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return function(t){return JD(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}(n=e.contextInterceptor(n))}},t}();function vO(){return function(t){if(Reflect.hasOwnMetadata("inversify:paramtypes",t))throw new Error("Cannot apply @injectable decorator multiple times.");var e=Reflect.getMetadata("design:paramtypes",t)||[];return Reflect.defineMetadata("inversify:paramtypes",e,t),t}}function mO(t){return function(e,n,r){var i=new PD("named",t);"number"==typeof r?DD(e,n,r,i):OD(e,n,i)}}var yO={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},bO=function t(){NI(this,t),this.index=void 0},xO=function t(){NI(this,t),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},wO=function(){function t(){NI(this,t),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return jI(t,[{key:"read",value:function(t){return this.reads.find((function(e){return e.index===t.index}))||this.reads.push(t),t}},{key:"sample",value:function(t){return this.read(t),t}},{key:"write",value:function(t,e){if(this.writes.find((function(t){return t.index===e.index})))return e;var n=t.getResourceNode(e);n.resource.version++,n.resource.imported&&(this.hasSideEffect=!0);var r=t.createResourceNode(n.resource);return t.getResourceNode(r).writer=this,this.writes.push(r),r}}]),t}();function CO(t,e){return(CO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function SO(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&CO(t,e)}function kO(t){return(kO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EO(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MO(t,e){if(e&&("object"===kO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return EO(t)}function AO(t){return(AO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _O=function t(){NI(this,t),this.first=void 0,this.last=void 0};function TO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(PCt){return!1}}();return function(){var n,r=AO(t);if(e){var i=AO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return MO(this,n)}}var PO,IO,DO,OO,RO,LO=function(t){SO(n,_O);var e=TO(n);function n(){var t;NI(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).version=0,t.refs=0,t.name=void 0,t.imported=void 0,t.priority=void 0,t.discardStart=!0,t.discardEnd=!1,t.descriptor=void 0,t.resource=void 0,t}return jI(n,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),n}(),BO=function t(){NI(this,t),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0};function FO(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return NO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NO(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function NO(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var zO=(PO=vO(),IO=BD(yO.RenderEngine),PO((RO=GI((OO=function(){function t(){NI(this,t),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],FI(this,"engine",RO,this)}var e,n;return jI(t,[{key:"execute",value:(n=HI(VI.mark((function t(e){return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.compile(),t.next=3,this.executePassNodes(e);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"tearDown",value:function(){this.frameGraphPasses.forEach((function(t){t.tearDown&&t.tearDown()})),this.reset()}},{key:"addPass",value:function(t,e,n,r){var i=new xO;i.execute=n,r&&(i.tearDown=r),i.name=t;var o=new wO;return o.name=t,this.passNodes.push(o),this.frameGraphPasses.push(i),e(this,o,i),i}},{key:"getPass",value:function(t){return this.frameGraphPasses.find((function(e){return e.name===t}))}},{key:"compile",value:function(){var t,e=this,n=FO(this.passNodes);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.refCount=r.writes.length+(r.hasSideEffect?1:0),r.reads.forEach((function(t){e.resourceNodes[t.index].readerCount++}))}}catch(I){n.e(I)}finally{n.f()}var i,o=[],a=FO(this.resourceNodes);try{for(a.s();!(i=a.n()).done;){var s=i.value;0===s.readerCount&&o.push(s)}}catch(I){a.e(I)}finally{a.f()}for(;o.length;){var l=o.pop(),u=l&&l.writer;if(u&&0==--u.refCount){var c,d=FO(u.reads);try{for(d.s();!(c=d.n()).done;){var h=c.value,f=this.resourceNodes[h.index];0==--f.readerCount&&o.push(f)}}catch(I){d.e(I)}finally{d.f()}}}this.resourceNodes.forEach((function(t){t.resource.refs+=t.readerCount}));var p,g=FO(this.passNodes);try{for(g.s();!(p=g.n()).done;){var v=p.value;if(v.refCount){var m,y=FO(v.reads);try{for(y.s();!(m=y.n()).done;){var b=m.value,x=this.resourceNodes[b.index].resource;x.first=x.first?x.first:v,x.last=v}}catch(I){y.e(I)}finally{y.f()}var w,C=FO(v.writes);try{for(C.s();!(w=C.n()).done;){var S=w.value,k=this.resourceNodes[S.index].resource;k.first=k.first?k.first:v,k.last=v}}catch(I){C.e(I)}finally{C.f()}}}}catch(I){g.e(I)}finally{g.f()}for(var E=0;E<2;E++){var M,A=FO(this.resourceNodes);try{for(A.s();!(M=A.n()).done;){var _=M.value.resource;if(_.priority===E&&_.refs){var T=_.first,P=_.last;T&&P&&(T.devirtualize.push(_),P.destroy.push(_))}}}catch(I){A.e(I)}finally{A.f()}}}},{key:"executePassNodes",value:(e=HI(VI.mark((function t(e){var n,r,i,o,a,s,l,u,c,d,h,f,p;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=FO(this.passNodes.entries()),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=18;break}if(i=JI(r.value,2),o=i[0],!(a=i[1]).refCount){t.next=16;break}s=FO(a.devirtualize);try{for(s.s();!(l=s.n()).done;)l.value.preExecuteDevirtualize(this.engine)}catch(g){s.e(g)}finally{s.f()}u=FO(a.destroy);try{for(u.s();!(c=u.n()).done;)c.value.preExecuteDestroy(this.engine)}catch(g){u.e(g)}finally{u.f()}return t.next=12,this.frameGraphPasses[o].execute(this,this.frameGraphPasses[o],e);case 12:d=FO(a.devirtualize);try{for(d.s();!(h=d.n()).done;)h.value.postExecuteDevirtualize(this.engine)}catch(g){d.e(g)}finally{d.f()}f=FO(a.destroy);try{for(f.s();!(p=f.n()).done;)p.value.postExecuteDestroy(this.engine)}catch(g){f.e(g)}finally{f.f()}case 16:t.next=3;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(1),n.e(t.t0);case 23:return t.prev=23,n.f(),t.finish(23);case 26:this.reset();case 27:case"end":return t.stop()}}),t,this,[[1,20,23,26]])}))),function(t){return e.apply(this,arguments)})},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(t){return this.resourceNodes[t.index]}},{key:"createResourceNode",value:function(t){var e=new BO;e.resource=t,e.version=t.version,this.resourceNodes.push(e);var n=new bO;return n.index=this.resourceNodes.length-1,n}},{key:"createTexture",value:function(t,e,n){var r=new LO;return r.name=e,r.descriptor=n,this.createResourceNode(r)}},{key:"createRenderTarget",value:function(t,e,n){var r=new LO;return r.name=e,r.descriptor=n,this.createResourceNode(r)}},{key:"present",value:function(t){this.addPass("Present",(function(e,n){n.read(t),n.hasSideEffect=!0}),HI(VI.mark((function t(){return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))))}}]),t}()).prototype,"engine",[IO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),DO=OO))||DO);function jO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var GO={};GO["[object Float32Array]"]=GO["[object Float64Array]"]=GO["[object Int8Array]"]=GO["[object Int16Array]"]=GO["[object Int32Array]"]=GO["[object Uint8Array]"]=GO["[object Uint8ClampedArray]"]=GO["[object Uint16Array]"]=GO["[object Uint32Array]"]=!0,GO["[object Arguments]"]=GO["[object Array]"]=GO["[object ArrayBuffer]"]=GO["[object Boolean]"]=GO["[object DataView]"]=GO["[object Date]"]=GO["[object Error]"]=GO["[object Function]"]=GO["[object Map]"]=GO["[object Number]"]=GO["[object Object]"]=GO["[object RegExp]"]=GO["[object Set]"]=GO["[object String]"]=GO["[object WeakMap]"]=!1;var UO=Object.prototype.toString;var $O=function(t){return function(t){return!!t&&"object"===kO(t)}(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!!GO[UO.call(t)]};function VO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function WO(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?VO(Object(n),!0).forEach((function(e){jO(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function HO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(PCt){return!1}}();return function(){var n,r=AO(t);if(e){var i=AO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return MO(this,n)}}var YO,XO,qO,KO,ZO,QO,JO,tR,eR,nR=function(t){SO(n,qI);var e=HO(n);function n(t){var r;return NI(this,n),(r=e.call(this,t)).dirty=!0,r.attributes=[],r.indices=void 0,r.indicesBuffer=void 0,r.vertexCount=0,r.maxInstancedCount=void 0,r.aabb=void 0,r.entity=void 0,Object.assign(EO(r),t),r}return jI(n,[{key:"setAttribute",value:function(t,e,n,r){var i=this.attributes.find((function(e){return e.name===t}));return i?(i.data=e,i.dirty=!0):this.attributes.push(WO(WO({dirty:!0,name:t,data:e},n),{},{bufferGetter:r})),this.dirty=!0,this}},{key:"setIndex",value:function(t){return this.indices=new Uint32Array(t.buffer?t.buffer:t),this.dirty=!0,this}},{key:"applyMatrix",value:function(t){var e=this.attributes.find((function(t){return"position"===t.name})),n=this.attributes.find((function(t){return"normal"===t.name}));if(e&&(e.dirty=!0,e.data&&e.data.length))for(var r=0;r<e.data.length;r+=3){var i=Wu(e.data[r],e.data[r+1],e.data[r+2],1);Hu(i,i,t),$O(e.data)?e.data.set([i[0],i[1],i[2]],r):(e.data[r]=i[0],e.data[r+1]=i[1],e.data[r+2]=i[2])}if(n){var o=hu(ou(),t);if(n.data&&n.data.length)for(var a=0;a<n.data.length;a+=3){var s=Pu(n.data[a],n.data[a+1],n.data[a+2]);ju(s,s,o),Bu(s,s),$O(n.data)?n.data.set([s[0],s[1],s[2]],a):(n.data[a]=s[0],n.data[a+1]=s[1],n.data[a+2]=s[2])}}}}]),n}();(XO=YO||(YO={}))[XO.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",XO[XO.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",XO[XO.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",XO[XO.POINTS=0]="POINTS",XO[XO.LINES=1]="LINES",XO[XO.LINE_LOOP=2]="LINE_LOOP",XO[XO.LINE_STRIP=3]="LINE_STRIP",XO[XO.TRIANGLES=4]="TRIANGLES",XO[XO.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",XO[XO.TRIANGLE_FAN=6]="TRIANGLE_FAN",XO[XO.ZERO=0]="ZERO",XO[XO.ONE=1]="ONE",XO[XO.SRC_COLOR=768]="SRC_COLOR",XO[XO.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",XO[XO.SRC_ALPHA=770]="SRC_ALPHA",XO[XO.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",XO[XO.DST_ALPHA=772]="DST_ALPHA",XO[XO.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",XO[XO.DST_COLOR=774]="DST_COLOR",XO[XO.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",XO[XO.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",XO[XO.FUNC_ADD=32774]="FUNC_ADD",XO[XO.BLEND_EQUATION=32777]="BLEND_EQUATION",XO[XO.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",XO[XO.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",XO[XO.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",XO[XO.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",XO[XO.MAX_EXT=32776]="MAX_EXT",XO[XO.MIN_EXT=32775]="MIN_EXT",XO[XO.BLEND_DST_RGB=32968]="BLEND_DST_RGB",XO[XO.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",XO[XO.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",XO[XO.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",XO[XO.CONSTANT_COLOR=32769]="CONSTANT_COLOR",XO[XO.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",XO[XO.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",XO[XO.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",XO[XO.BLEND_COLOR=32773]="BLEND_COLOR",XO[XO.ARRAY_BUFFER=34962]="ARRAY_BUFFER",XO[XO.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",XO[XO.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",XO[XO.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",XO[XO.STREAM_DRAW=35040]="STREAM_DRAW",XO[XO.STATIC_DRAW=35044]="STATIC_DRAW",XO[XO.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",XO[XO.BUFFER_SIZE=34660]="BUFFER_SIZE",XO[XO.BUFFER_USAGE=34661]="BUFFER_USAGE",XO[XO.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",XO[XO.FRONT=1028]="FRONT",XO[XO.BACK=1029]="BACK",XO[XO.FRONT_AND_BACK=1032]="FRONT_AND_BACK",XO[XO.CULL_FACE=2884]="CULL_FACE",XO[XO.BLEND=3042]="BLEND",XO[XO.DITHER=3024]="DITHER",XO[XO.STENCIL_TEST=2960]="STENCIL_TEST",XO[XO.DEPTH_TEST=2929]="DEPTH_TEST",XO[XO.SCISSOR_TEST=3089]="SCISSOR_TEST",XO[XO.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",XO[XO.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",XO[XO.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",XO[XO.NO_ERROR=0]="NO_ERROR",XO[XO.INVALID_ENUM=1280]="INVALID_ENUM",XO[XO.INVALID_VALUE=1281]="INVALID_VALUE",XO[XO.INVALID_OPERATION=1282]="INVALID_OPERATION",XO[XO.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",XO[XO.CW=2304]="CW",XO[XO.CCW=2305]="CCW",XO[XO.LINE_WIDTH=2849]="LINE_WIDTH",XO[XO.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",XO[XO.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",XO[XO.CULL_FACE_MODE=2885]="CULL_FACE_MODE",XO[XO.FRONT_FACE=2886]="FRONT_FACE",XO[XO.DEPTH_RANGE=2928]="DEPTH_RANGE",XO[XO.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",XO[XO.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",XO[XO.DEPTH_FUNC=2932]="DEPTH_FUNC",XO[XO.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",XO[XO.STENCIL_FUNC=2962]="STENCIL_FUNC",XO[XO.STENCIL_FAIL=2964]="STENCIL_FAIL",XO[XO.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",XO[XO.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",XO[XO.STENCIL_REF=2967]="STENCIL_REF",XO[XO.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",XO[XO.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",XO[XO.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",XO[XO.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",XO[XO.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",XO[XO.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",XO[XO.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",XO[XO.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",XO[XO.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",XO[XO.VIEWPORT=2978]="VIEWPORT",XO[XO.SCISSOR_BOX=3088]="SCISSOR_BOX",XO[XO.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",XO[XO.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",XO[XO.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",XO[XO.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",XO[XO.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",XO[XO.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",XO[XO.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",XO[XO.RED_BITS=3410]="RED_BITS",XO[XO.GREEN_BITS=3411]="GREEN_BITS",XO[XO.BLUE_BITS=3412]="BLUE_BITS",XO[XO.ALPHA_BITS=3413]="ALPHA_BITS",XO[XO.DEPTH_BITS=3414]="DEPTH_BITS",XO[XO.STENCIL_BITS=3415]="STENCIL_BITS",XO[XO.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",XO[XO.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",XO[XO.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",XO[XO.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",XO[XO.SAMPLES=32937]="SAMPLES",XO[XO.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",XO[XO.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",XO[XO.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",XO[XO.DONT_CARE=4352]="DONT_CARE",XO[XO.FASTEST=4353]="FASTEST",XO[XO.NICEST=4354]="NICEST",XO[XO.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",XO[XO.BYTE=5120]="BYTE",XO[XO.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",XO[XO.SHORT=5122]="SHORT",XO[XO.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",XO[XO.INT=5124]="INT",XO[XO.UNSIGNED_INT=5125]="UNSIGNED_INT",XO[XO.FLOAT=5126]="FLOAT",XO[XO.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",XO[XO.ALPHA=6406]="ALPHA",XO[XO.RGB=6407]="RGB",XO[XO.RGBA=6408]="RGBA",XO[XO.LUMINANCE=6409]="LUMINANCE",XO[XO.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",XO[XO.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",XO[XO.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",XO[XO.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",XO[XO.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",XO[XO.VERTEX_SHADER=35633]="VERTEX_SHADER",XO[XO.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",XO[XO.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",XO[XO.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",XO[XO.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",XO[XO.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",XO[XO.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",XO[XO.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",XO[XO.SHADER_TYPE=35663]="SHADER_TYPE",XO[XO.DELETE_STATUS=35712]="DELETE_STATUS",XO[XO.LINK_STATUS=35714]="LINK_STATUS",XO[XO.VALIDATE_STATUS=35715]="VALIDATE_STATUS",XO[XO.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",XO[XO.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",XO[XO.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",XO[XO.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",XO[XO.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",XO[XO.NEVER=512]="NEVER",XO[XO.LESS=513]="LESS",XO[XO.EQUAL=514]="EQUAL",XO[XO.LEQUAL=515]="LEQUAL",XO[XO.GREATER=516]="GREATER",XO[XO.NOTEQUAL=517]="NOTEQUAL",XO[XO.GEQUAL=518]="GEQUAL",XO[XO.ALWAYS=519]="ALWAYS",XO[XO.KEEP=7680]="KEEP",XO[XO.REPLACE=7681]="REPLACE",XO[XO.INCR=7682]="INCR",XO[XO.DECR=7683]="DECR",XO[XO.INVERT=5386]="INVERT",XO[XO.INCR_WRAP=34055]="INCR_WRAP",XO[XO.DECR_WRAP=34056]="DECR_WRAP",XO[XO.VENDOR=7936]="VENDOR",XO[XO.RENDERER=7937]="RENDERER",XO[XO.VERSION=7938]="VERSION",XO[XO.NEAREST=9728]="NEAREST",XO[XO.LINEAR=9729]="LINEAR",XO[XO.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",XO[XO.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",XO[XO.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",XO[XO.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",XO[XO.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",XO[XO.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",XO[XO.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",XO[XO.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",XO[XO.TEXTURE_2D=3553]="TEXTURE_2D",XO[XO.TEXTURE=5890]="TEXTURE",XO[XO.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",XO[XO.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",XO[XO.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",XO[XO.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",XO[XO.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",XO[XO.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",XO[XO.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",XO[XO.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",XO[XO.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",XO[XO.TEXTURE0=33984]="TEXTURE0",XO[XO.TEXTURE1=33985]="TEXTURE1",XO[XO.TEXTURE2=33986]="TEXTURE2",XO[XO.TEXTURE3=33987]="TEXTURE3",XO[XO.TEXTURE4=33988]="TEXTURE4",XO[XO.TEXTURE5=33989]="TEXTURE5",XO[XO.TEXTURE6=33990]="TEXTURE6",XO[XO.TEXTURE7=33991]="TEXTURE7",XO[XO.TEXTURE8=33992]="TEXTURE8",XO[XO.TEXTURE9=33993]="TEXTURE9",XO[XO.TEXTURE10=33994]="TEXTURE10",XO[XO.TEXTURE11=33995]="TEXTURE11",XO[XO.TEXTURE12=33996]="TEXTURE12",XO[XO.TEXTURE13=33997]="TEXTURE13",XO[XO.TEXTURE14=33998]="TEXTURE14",XO[XO.TEXTURE15=33999]="TEXTURE15",XO[XO.TEXTURE16=34e3]="TEXTURE16",XO[XO.TEXTURE17=34001]="TEXTURE17",XO[XO.TEXTURE18=34002]="TEXTURE18",XO[XO.TEXTURE19=34003]="TEXTURE19",XO[XO.TEXTURE20=34004]="TEXTURE20",XO[XO.TEXTURE21=34005]="TEXTURE21",XO[XO.TEXTURE22=34006]="TEXTURE22",XO[XO.TEXTURE23=34007]="TEXTURE23",XO[XO.TEXTURE24=34008]="TEXTURE24",XO[XO.TEXTURE25=34009]="TEXTURE25",XO[XO.TEXTURE26=34010]="TEXTURE26",XO[XO.TEXTURE27=34011]="TEXTURE27",XO[XO.TEXTURE28=34012]="TEXTURE28",XO[XO.TEXTURE29=34013]="TEXTURE29",XO[XO.TEXTURE30=34014]="TEXTURE30",XO[XO.TEXTURE31=34015]="TEXTURE31",XO[XO.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",XO[XO.REPEAT=10497]="REPEAT",XO[XO.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",XO[XO.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",XO[XO.FLOAT_VEC2=35664]="FLOAT_VEC2",XO[XO.FLOAT_VEC3=35665]="FLOAT_VEC3",XO[XO.FLOAT_VEC4=35666]="FLOAT_VEC4",XO[XO.INT_VEC2=35667]="INT_VEC2",XO[XO.INT_VEC3=35668]="INT_VEC3",XO[XO.INT_VEC4=35669]="INT_VEC4",XO[XO.BOOL=35670]="BOOL",XO[XO.BOOL_VEC2=35671]="BOOL_VEC2",XO[XO.BOOL_VEC3=35672]="BOOL_VEC3",XO[XO.BOOL_VEC4=35673]="BOOL_VEC4",XO[XO.FLOAT_MAT2=35674]="FLOAT_MAT2",XO[XO.FLOAT_MAT3=35675]="FLOAT_MAT3",XO[XO.FLOAT_MAT4=35676]="FLOAT_MAT4",XO[XO.SAMPLER_2D=35678]="SAMPLER_2D",XO[XO.SAMPLER_CUBE=35680]="SAMPLER_CUBE",XO[XO.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",XO[XO.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",XO[XO.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",XO[XO.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",XO[XO.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",XO[XO.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",XO[XO.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",XO[XO.COMPILE_STATUS=35713]="COMPILE_STATUS",XO[XO.LOW_FLOAT=36336]="LOW_FLOAT",XO[XO.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",XO[XO.HIGH_FLOAT=36338]="HIGH_FLOAT",XO[XO.LOW_INT=36339]="LOW_INT",XO[XO.MEDIUM_INT=36340]="MEDIUM_INT",XO[XO.HIGH_INT=36341]="HIGH_INT",XO[XO.FRAMEBUFFER=36160]="FRAMEBUFFER",XO[XO.RENDERBUFFER=36161]="RENDERBUFFER",XO[XO.RGBA4=32854]="RGBA4",XO[XO.RGB5_A1=32855]="RGB5_A1",XO[XO.RGB565=36194]="RGB565",XO[XO.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",XO[XO.STENCIL_INDEX=6401]="STENCIL_INDEX",XO[XO.STENCIL_INDEX8=36168]="STENCIL_INDEX8",XO[XO.DEPTH_STENCIL=34041]="DEPTH_STENCIL",XO[XO.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",XO[XO.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",XO[XO.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",XO[XO.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",XO[XO.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",XO[XO.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",XO[XO.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",XO[XO.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",XO[XO.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",XO[XO.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",XO[XO.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",XO[XO.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",XO[XO.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",XO[XO.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",XO[XO.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",XO[XO.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",XO[XO.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",XO[XO.NONE=0]="NONE",XO[XO.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",XO[XO.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",XO[XO.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",XO[XO.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",XO[XO.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",XO[XO.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",XO[XO.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",XO[XO.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",XO[XO.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",XO[XO.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",XO[XO.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",XO[XO.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",XO[XO.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",XO[XO.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",XO[XO.COPY_SRC=1]="COPY_SRC",XO[XO.COPY_DST=2]="COPY_DST",XO[XO.SAMPLED=4]="SAMPLED",XO[XO.STORAGE=8]="STORAGE",XO[XO.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT";var rR=(qO=vO(),KO=BD(yO.GeometryComponentManager),ZO=BD(yO.RenderEngine),qO((tR=GI((JO=function(){function t(){NI(this,t),FI(this,"geometry",tR,this),FI(this,"engine",eR,this)}var e;return jI(t,[{key:"execute",value:(e=HI(VI.mark((function t(){var e=this;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.geometry.forEach((function(t,n){n.dirty&&(n.attributes.forEach((function(t){var n;t.dirty&&t.data&&(t.buffer?null===(n=t.buffer)||void 0===n||n.subData({data:t.data,offset:0}):t.buffer=e.engine.createBuffer({data:t.data,type:YO.FLOAT}),t.dirty=!1)})),n.indices&&(n.indicesBuffer?n.indicesBuffer.subData({data:n.indices,offset:0}):n.indicesBuffer=e.engine.createElements({data:n.indices,count:n.indices.length,type:YO.UNSIGNED_INT,usage:YO.STATIC_DRAW})),n.dirty=!1)}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.geometry.forEach((function(t,e){e.indicesBuffer&&e.indicesBuffer.destroy(),e.attributes.forEach((function(t){t.buffer&&t.buffer.destroy()}))})),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{vertexCount:3},e=t.vertexCount,n=XI();return this.geometry.create(n,{vertexCount:e})}},{key:"createInstancedBufferGeometry",value:function(t){var e=t.maxInstancedCount,n=t.vertexCount,r=XI();return this.geometry.create(r,{maxInstancedCount:e,vertexCount:n})}}]),t}()).prototype,"geometry",[KO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eR=GI(JO.prototype,"engine",[ZO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),QO=JO))||QO);function iR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function oR(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?iR(Object(n),!0).forEach((function(e){jO(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iR(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function aR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(PCt){return!1}}();return function(){var n,r=AO(t);if(e){var i=AO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return MO(this,n)}}var sR,lR,uR,cR,dR,hR,fR,pR,gR,vR=function(t){SO(n,qI);var e=aR(n);function n(t){var r;return NI(this,n),(r=e.call(this,t)).vertexShaderGLSL=void 0,r.fragmentShaderGLSL=void 0,r.defines={},r.dirty=!0,r.uniforms=[],r.cull={enable:!0,face:YO.BACK},r.depth={enable:!0},r.blend=void 0,r.entity=void 0,r.type=void 0,Object.assign(EO(r),t),r}return jI(n,[{key:"setDefines",value:function(t){return this.defines=oR(oR({},this.defines),t),this}},{key:"setCull",value:function(t){return this.cull=t,this}},{key:"setDepth",value:function(t){return this.depth=t,this}},{key:"setBlend",value:function(t){return this.blend=t,this}},{key:"setUniform",value:function(t,e){var n=this;if("string"!=typeof t)return Object.keys(t).forEach((function(e){return n.setUniform(e,t[e])})),this;var r=this.uniforms.find((function(e){return e.name===t}));return r?(r.dirty=!0,r.data=e):this.uniforms.push({name:t,dirty:!0,data:e}),this.dirty=!0,this}}]),n}();function mR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yR(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mR(Object(n),!0).forEach((function(e){jO(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mR(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var bR,xR,wR=(sR=vO(),lR=BD(yO.MaterialComponentManager),uR=BD(yO.RenderEngine),cR=BD(yO.ShaderModuleService),sR((fR=GI((hR=function(){function t(){NI(this,t),FI(this,"material",fR,this),FI(this,"engine",pR,this),FI(this,"shaderModule",gR,this)}var e;return jI(t,[{key:"execute",value:(e=HI(VI.mark((function t(){return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(t){var e=XI(),n=t.vertexShader,r=t.fragmentShader,i=[];if(!this.engine.supportWebGPU){var o="material-".concat(e);this.shaderModule.registerModule(o,{vs:t.vertexShader,fs:t.fragmentShader});var a=this.shaderModule.getModule(o);n=a.vs,r=a.fs,a.uniforms&&(i=Object.keys(a.uniforms).map((function(t){return{dirty:!0,name:t,data:a.uniforms[t]}})))}return this.material.create(e,yR(yR({vertexShaderGLSL:n,fragmentShaderGLSL:r},t),{},{uniforms:i}))}}]),t}()).prototype,"material",[lR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pR=GI(hR.prototype,"engine",[uR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gR=GI(hR.prototype,"shaderModule",[cR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dR=hR))||dR);function CR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(PCt){return!1}}();return function(){var n,r=AO(t);if(e){var i=AO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return MO(this,n)}}(xR=bR||(bR={}))[xR.Standard=0]="Standard";var SR=function(t){SO(n,qI);var e=CR(n);function n(t){var r;return NI(this,n),(r=e.call(this,t)).strategy=bR.Standard,r.visibilityPlaneMask=0,r.visible=!1,Object.assign(EO(r),t),r}return n}(),kR=function(){function t(e,n){NI(this,t),this.center=void 0,this.halfExtents=void 0,this.min=Au(),this.max=Au(),this.update(e,n)}return jI(t,[{key:"update",value:function(t,e){this.center=t||Au(),this.halfExtents=e||Pu(.5,.5,.5),this.min=Gu(this.min,this.center,this.halfExtents),this.max=Ou(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(t,e){Ou(this.center,e,t),Lu(this.center,this.center,.5),Gu(this.halfExtents,e,t),Lu(this.halfExtents,this.halfExtents,.5),Iu(this.min,t),Iu(this.max,e)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(t){var e=this.center,n=e[0],r=e[1],i=e[2],o=this.halfExtents,a=o[0],s=o[1],l=o[2],u=n-a,c=n+a,d=r-s,h=r+s,f=i-l,p=i+l,g=t.center,v=g[0],m=g[1],y=g[2],b=t.halfExtents,x=b[0],w=b[1],C=b[2],S=v-x,k=v+x,E=m-w,M=m+w,A=y-C,_=y+C;S<u&&(u=S),k>c&&(c=k),E<d&&(d=E),M>h&&(h=M),A<f&&(f=A),_>p&&(p=_),e[0]=.5*(u+c),e[1]=.5*(d+h),e[2]=.5*(f+p),o[0]=.5*(c-u),o[1]=.5*(h-d),o[2]=.5*(p-f),this.min[0]=u,this.min[1]=d,this.min[2]=f,this.max[0]=c,this.max[1]=h,this.max[2]=p}},{key:"intersects",value:function(t){var e=this.getMax(),n=this.getMin(),r=t.getMax(),i=t.getMin();return n[0]<=r[0]&&e[0]>=i[0]&&n[1]<=r[1]&&e[1]>=i[1]&&n[2]<=r[2]&&e[2]>=i[2]}},{key:"containsPoint",value:function(t){var e=this.getMin(),n=this.getMax();return!(t[0]<e[0]||t[0]>n[0]||t[1]<e[1]||t[1]>n[1]||t[2]<e[2]||t[2]>n[2])}},{key:"getNegativeFarPoint",value:function(t){return 273===t.pnVertexFlag?Iu(Au(),this.min):272===t.pnVertexFlag?Pu(this.min[0],this.min[1],this.max[2]):257===t.pnVertexFlag?Pu(this.min[0],this.max[1],this.min[2]):256===t.pnVertexFlag?Pu(this.min[0],this.max[1],this.max[2]):17===t.pnVertexFlag?Pu(this.max[0],this.min[1],this.min[2]):16===t.pnVertexFlag?Pu(this.max[0],this.min[1],this.max[2]):1===t.pnVertexFlag?Pu(this.max[0],this.max[1],this.min[2]):Pu(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(t){return 273===t.pnVertexFlag?Iu(Au(),this.max):272===t.pnVertexFlag?Pu(this.max[0],this.max[1],this.min[2]):257===t.pnVertexFlag?Pu(this.max[0],this.min[1],this.max[2]):256===t.pnVertexFlag?Pu(this.max[0],this.min[1],this.min[2]):17===t.pnVertexFlag?Pu(this.min[0],this.max[1],this.max[2]):16===t.pnVertexFlag?Pu(this.min[0],this.max[1],this.min[2]):1===t.pnVertexFlag?Pu(this.min[0],this.min[1],this.max[2]):Pu(this.min[0],this.min[1],this.min[2])}}]),t}();function ER(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(PCt){return!1}}();return function(){var n,r=AO(t);if(e){var i=AO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return MO(this,n)}}var MR,AR,_R=function(t){SO(n,qI);var e=ER(n);function n(t){var r;return NI(this,n),(r=e.call(this,t)).material=void 0,r.geometry=void 0,r.aabb=new kR,r.aabbDirty=!0,r.model=void 0,r.visible=!0,r.children=[],Object.assign(EO(r),t),r}return n}(),TR=function(){function t(e,n){NI(this,t),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=e||0,this.normal=n||Pu(0,1,0),this.updatePNVertexFlag()}return jI(t,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(t){return Fu(t,this.normal)-this.distance}},{key:"normalize",value:function(){var t=1/$u(this.normal);Lu(this.normal,this.normal,t),this.distance*=t}},{key:"intersectsLine",value:function(t,e,n){var r=this.distanceToPoint(t),i=r/(r-this.distanceToPoint(e)),o=i>=0&&i<=1;return o&&n&&Nu(n,t,e,i),o}}]),t}();(AR=MR||(MR={}))[AR.OUTSIDE=4294967295]="OUTSIDE",AR[AR.INSIDE=0]="INSIDE",AR[AR.INDETERMINATE=2147483647]="INDETERMINATE";var PR,IR,DR,OR,RR,LR,BR,FR,NR,zR,jR,GR,UR,$R=function(){function t(e){if(NI(this,t),this.planes=[],e)this.planes=e;else for(var n=0;n<6;n++)this.planes.push(new TR)}return jI(t,[{key:"extractFromVPMatrix",value:function(t){var e=JI(t,16),n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],f=e[11],p=e[12],g=e[13],v=e[14],m=e[15];Du(this.planes[0].normal,o-n,u-a,f-c),this.planes[0].distance=-(m-p),Du(this.planes[1].normal,o+n,u+a,f+c),this.planes[1].distance=-(m+p),Du(this.planes[2].normal,o+r,u+s,f+d),this.planes[2].distance=-(m+g),Du(this.planes[3].normal,o-r,u-s,f-d),this.planes[3].distance=-(m-g),Du(this.planes[4].normal,o-i,u-l,f-h),this.planes[4].distance=-(m-v),Du(this.planes[5].normal,o+i,u+l,f+h),this.planes[5].distance=-(m+v),this.planes.forEach((function(t){t.normalize(),t.updatePNVertexFlag()}))}}]),t}();function VR(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return WR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WR(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function WR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var HR,YR,XR,qR,KR,ZR,QR,JR,tL,eL,nL,rL,iL,oL,aL,sL,lL,uL,cL,dL,hL,fL,pL,gL,vL=(PR=vO(),IR=BD(yO.MeshComponentManager),DR=BD(yO.CullableComponentManager),OR=BD(yO.GeometryComponentManager),RR=BD(yO.HierarchyComponentManager),LR=BD(yO.TransformComponentManager),PR((NR=GI((FR=function(){function t(){NI(this,t),FI(this,"mesh",NR,this),FI(this,"cullable",zR,this),FI(this,"geometry",jR,this),FI(this,"hierarchy",GR,this),FI(this,"transform",UR,this),this.planes=void 0}var e;return jI(t,[{key:"setFrustumPlanes",value:function(t){this.planes=t}},{key:"execute",value:(e=HI(VI.mark((function t(e){var n,r,i,o,a,s,l,u,c,d,h,f,p,g,v,m,y,b,x,w,C;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=VR(e);try{for(n.s();!(r=n.n()).done;){i=r.value,o=i.getScene(),a=i.getCamera(),s=VR(o.getEntities());try{for(s.s();!(l=s.n()).done;)u=l.value,(c=this.mesh.getComponentByEntity(u))&&(d=this.hierarchy.getComponentByEntity(u),h=this.cullable.getComponentByEntity(u),f=c.geometry,p=this.transform.getComponentByEntity(u),f&&f.aabb&&p&&c.aabbDirty&&(g=p.worldTransform,v=f.aabb,m=v.center,y=v.halfExtents,b=zu(Au(),m,g),S=g,(k=ou())[0]=S[0],k[1]=S[1],k[2]=S[2],k[3]=S[4],k[4]=S[5],k[5]=S[6],k[6]=S[8],k[7]=S[9],k[8]=S[10],x=k,w=ju(Au(),y,x),c.aabb.update(b,w),c.aabbDirty=!1),h&&f&&(C=this.cullable.getComponentByEntity((null==d?void 0:d.parentID)||-1),h.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(c.aabb,(null==C?void 0:C.visibilityPlaneMask)||MR.INDETERMINATE,this.planes||a.getFrustum().planes),h.visible=h.visibilityPlaneMask!==MR.OUTSIDE))}catch(E){s.e(E)}finally{s.f()}}}catch(E){n.e(E)}finally{n.f()}case 2:case"end":return t.stop()}var S,k}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(t,e,n){if(e===MR.OUTSIDE||e===MR.INSIDE)return e;for(var r=MR.INSIDE,i=0,o=n.length;i<o;++i){var a=i<31?1<<i:0;if(!(i<31&&0==(e&a))){var s=n[i],l=s.normal,u=s.distance;if(Fu(l,t.getNegativeFarPoint(n[i]))+u>0)return MR.OUTSIDE;Fu(l,t.getPositiveFarPoint(n[i]))+u>0&&(r|=a)}}return r}}]),t}()).prototype,"mesh",[IR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zR=GI(FR.prototype,"cullable",[DR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jR=GI(FR.prototype,"geometry",[OR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),GR=GI(FR.prototype,"hierarchy",[RR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),UR=GI(FR.prototype,"transform",[LR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),BR=FR))||BR);function mL(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return yL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yL(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function yL(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var bL,xL,wL,CL,SL,kL,EL,ML,AL,_L,TL,PL,IL,DL=(HR=vO(),YR=BD(yO.MeshComponentManager),XR=BD(yO.GeometryComponentManager),qR=BD(yO.MaterialComponentManager),KR=BD(yO.CullableComponentManager),ZR=BD(yO.TransformComponentManager),QR=BD(yO.HierarchyComponentManager),JR=BD(yO.Systems),tL=mO(yO.FrameGraphSystem),eL=BD(yO.RenderEngine),nL=BD(yO.ResourcePool),HR((gL=pL=function(){function t(){var e=this;NI(this,t),FI(this,"mesh",oL,this),FI(this,"geometry",aL,this),FI(this,"material",sL,this),FI(this,"cullable",lL,this),FI(this,"transform",uL,this),FI(this,"hierarchy",cL,this),FI(this,"frameGraphSystem",dL,this),FI(this,"engine",hL,this),FI(this,"resourcePool",fL,this),this.modelCache={},this.setup=function(t,e,n){var r=t.createRenderTarget(e,"color buffer",{width:1,height:1,usage:YO.RENDER_ATTACHMENT|YO.SAMPLED|YO.COPY_SRC});n.data={output:e.write(t,r)}},this.execute=function(){var t=HI(VI.mark((function t(n,r,i){var o,a,s,l,u,c;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=n.getResourceNode(r.data.output),a=e.resourcePool.getOrCreateResource(o.resource),s=mL(i),t.prev=3,s.s();case 5:if((l=s.n()).done){t.next=11;break}return u=l.value,t.next=9,e.initView(u);case 9:t.next=5;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),s.e(t.t0);case 16:return t.prev=16,s.f(),t.finish(16);case 19:c=e.engine.getCanvas(),a.resize({width:c.width,height:c.height}),e.engine.setScissor({enable:!1}),e.engine.clear({framebuffer:a,color:i[0].getClearColor(),depth:1}),e.engine.useFramebuffer(a,(function(){var t,n=mL(i);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.renderView(r)}}catch(o){n.e(o)}finally{n.f()}}));case 24:case"end":return t.stop()}}),t,null,[[3,13,16,19]])})));return function(e,n,r){return t.apply(this,arguments)}}()}var e,n;return jI(t,[{key:"renderView",value:function(t){var e=t.getScene(),n=t.getCamera(),r=n.getViewTransform(),i=wu(mu(),n.getPerspective(),r);n.getFrustum().extractFromVPMatrix(i);var o=t.getViewport(),a=o.x,s=o.y,l=o.width,u=o.height;this.engine.viewport({x:a,y:s,width:l,height:u});var c,d=mL(e.getEntities());try{for(d.s();!(c=d.n()).done;){var h=c.value;this.renderMesh(h,{camera:n,view:t,viewMatrix:r})}}catch(f){d.e(f)}finally{d.f()}}},{key:"renderMesh",value:function(t,e){var n=e.camera,r=e.view,i=e.viewMatrix,o=this.mesh.getComponentByEntity(t);if(o&&o.visible){var a=o.material,s=o.geometry;if(s&&!s.dirty&&a){var l=this.transform.getComponentByEntity(t),u=wu(mu(),i,l.worldTransform),c=r.getViewport(),d=c.width,h=c.height;a.setUniform({projectionMatrix:n.getPerspective(),modelViewMatrix:u,modelMatrix:l.worldTransform,viewMatrix:i,cameraPosition:n.getPosition(),u_viewport:[d,h]}),o.model&&(o.model.draw({uniforms:a.uniforms.reduce((function(t,e){return t[e.name]=e.data,t}),{})}),a.uniforms.forEach((function(t){t.dirty=!1})),a.dirty=!1)}}}},{key:"initMesh",value:(n=HI(VI.mark((function t(e,n){var r,i,o,a,s,l,u,c;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.mesh.getComponentByEntity(e)){t.next=3;break}return t.abrupt("return");case 3:if(i=r.material,(o=r.geometry)&&!o.dirty&&i){t.next=7;break}return t.abrupt("return");case 7:if(r.model){t.next=24;break}if(a="m-".concat(i.entity,"-g-").concat(o.entity),!this.modelCache[a]){t.next=12;break}return r.model=this.modelCache[a],t.abrupt("return");case 12:return i.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),s=this.engine,l=s.createModel,u=s.createAttribute,c={vs:i.vertexShaderGLSL,fs:i.fragmentShaderGLSL,defines:i.defines,attributes:o.attributes.reduce((function(t,e){return e.data&&e.buffer&&(t[e.name]=u({buffer:e.buffer,attributes:e.attributes,arrayStride:e.arrayStride,stepMode:e.stepMode,divisor:"vertex"===e.stepMode?0:1})),t}),{}),uniforms:i.uniforms.reduce((function(t,e){return t[e.name]=e.data,t}),{}),scissor:{enable:!0,box:function(){return n.getViewport()}}},i.cull&&(c.cull=i.cull),i.depth&&(c.depth=i.depth),i.blend&&(c.blend=i.blend),o.indicesBuffer&&(c.elements=o.indicesBuffer),o.maxInstancedCount&&(c.instances=o.maxInstancedCount,c.count=o.vertexCount||3),t.next=22,l(c);case 22:r.model=t.sent,this.modelCache[a]=r.model;case 24:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"initView",value:(e=HI(VI.mark((function t(e){var n,r,i,o;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getScene(),r=mL(n.getEntities()),t.prev=2,r.s();case 4:if((i=r.n()).done){t.next=10;break}return o=i.value,t.next=8,this.initMesh(o,e);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),r.e(t.t0);case 15:return t.prev=15,r.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[2,12,15,18]])}))),function(t){return e.apply(this,arguments)})}]),t}(),pL.IDENTIFIER="Render Pass",oL=GI((iL=gL).prototype,"mesh",[YR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aL=GI(iL.prototype,"geometry",[XR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sL=GI(iL.prototype,"material",[qR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lL=GI(iL.prototype,"cullable",[KR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uL=GI(iL.prototype,"transform",[ZR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cL=GI(iL.prototype,"hierarchy",[QR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dL=GI(iL.prototype,"frameGraphSystem",[JR,tL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hL=GI(iL.prototype,"engine",[eL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fL=GI(iL.prototype,"resourcePool",[nL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rL=iL))||rL);function OL(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return RL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RL(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function RL(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var LL,BL,FL,NL,zL,jL,GL,UL,$L,VL,WL,HL,YL,XL,qL,KL,ZL,QL,JL,tB,eB,nB=1,rB=2,iB=(bL=vO(),xL=BD(yO.RenderEngine),wL=BD(yO.ResourcePool),CL=BD(yO.RenderPassFactory),SL=BD(yO.MeshComponentManager),bL((IL=PL=function(){function t(){var e=this;NI(this,t),FI(this,"engine",ML,this),FI(this,"resourcePool",AL,this),FI(this,"renderPassFactory",_L,this),FI(this,"mesh",TL,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(t,e,n){var r=t.createRenderTarget(e,"picking fbo",{width:1,height:1});n.data={output:e.write(t,r)},e.hasSideEffect=!0},this.execute=function(){var t=HI(VI.mark((function t(n,r,i){var o,a,s;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.views=i,!e.alreadyInRendering){t.next=3;break}return t.abrupt("return");case 3:o=OL(i);try{for(s=function(){var t=a.value,i=t.getViewport(),o=i.width,s=i.height;e.alreadyInRendering=!0;var l=n.getResourceNode(r.data.output);e.pickingFBO=e.resourcePool.getOrCreateResource(l.resource),e.pickingFBO.resize({width:o,height:s}),e.engine.useFramebuffer(e.pickingFBO,(function(){e.engine.clear({framebuffer:e.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var n,r=e.renderPassFactory(DL.IDENTIFIER),i=[],o=OL(t.getScene().getEntities());try{for(o.s();!(n=o.n()).done;){var a=n.value,s=e.mesh.getComponentByEntity(a);s.material.setUniform("u_PickingStage",nB),i.push(s)}}catch(l){o.e(l)}finally{o.f()}r.renderView(t),i.forEach((function(t){t.material.setUniform("u_PickingStage",rB)})),e.alreadyInRendering=!1}))},o.s();!(a=o.n()).done;)s()}catch(l){o.e(l)}finally{o.f()}case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),this.pick=function(t,n){var r,i,o=t.x,a=t.y,s=e.engine,l=s.readPixels,u=s.useFramebuffer,c=n.getViewport(),d=c.width,h=c.height,f=o*window.devicePixelRatio,p=a*window.devicePixelRatio;if(!(f>d||f<0||p>h||p<0))return u(e.pickingFBO,(function(){var t;0===(r=l({x:Math.round(f),y:Math.round(h-(a+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:e.pickingFBO}))[0]&&0===r[1]&&0===r[2]||(t=JI(r,3),i=t[0]+256*t[1]+65536*t[2]-1,e.highlightEnabled&&e.highlightPickedFeature(r,n))})),i}}return jI(t,[{key:"enableHighlight",value:function(t){this.highlightEnabled=t}},{key:"setHighlightColor",value:function(t){this.highlightColor=t}},{key:"highlightPickedFeature",value:function(t,e){if(t){var n,r=OL(e.getScene().getEntities());try{for(r.s();!(n=r.n()).done;){var i=n.value,o=this.mesh.getComponentByEntity(i).material;o.setUniform("u_PickingStage",rB),o.setUniform("u_PickingColor",[t[0],t[1],t[2]]),o.setUniform("u_HighlightColor",this.highlightColor)}}catch(a){r.e(a)}finally{r.f()}}}}]),t}(),PL.IDENTIFIER="PixelPicking Pass",ML=GI((EL=IL).prototype,"engine",[xL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),AL=GI(EL.prototype,"resourcePool",[wL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_L=GI(EL.prototype,"renderPassFactory",[CL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),TL=GI(EL.prototype,"mesh",[SL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kL=EL))||kL),oB=(LL=vO(),BL=BD(yO.RenderEngine),FL=BD(yO.ResourcePool),LL(($L=UL=function t(){var e=this;NI(this,t),FI(this,"engine",jL,this),FI(this,"resourcePool",GL,this),this.model=void 0,this.setup=function(t,e,n){var r=t.getPass(DL.IDENTIFIER);if(r){var i=t.createRenderTarget(e,"render to screen",{width:1,height:1});n.data={input:e.read(r.data.output),output:e.write(t,i)}}},this.execute=function(){var t=HI(VI.mark((function t(n,r){var i,o,a,s,l,u,c;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.engine,o=i.createModel,a=i.createAttribute,s=i.createBuffer,e.model){t.next=6;break}return t.next=4,o({vs:e.engine.supportWebGPU?"layout(location = 0) in vec2 a_Position;\nlayout(location = 0) out vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}":"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:e.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform sampler u_TextureSampler;\nlayout(set = 0, binding = 1) uniform texture2D u_Texture;\n\nlayout(location = 0) in vec2 v_UV;\nlayout(location = 0) out vec4 outColor;\n\nvoid main() {\n  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);\n}":"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}",attributes:{a_Position:a({buffer:s({data:[-4,-4,4,-4,0,4],type:YO.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:l=t.sent,e.model=l;case 6:u=n.getResourceNode(r.data.input),c=e.resourcePool.getOrCreateResource(u.resource),e.engine.useFramebuffer(null,(function(){e.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),e.model.draw({uniforms:{u_Texture:c}})}));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),this.tearDown=function(){e.model=void 0}},UL.IDENTIFIER="Copy Pass",jL=GI((zL=$L).prototype,"engine",[BL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),GL=GI(zL.prototype,"resourcePool",[FL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),NL=zL))||NL),aB=(VL=vO(),WL=BD(yO.Systems),HL=mO(yO.FrameGraphSystem),YL=BD(yO.RenderPassFactory),XL=BD(yO.ConfigService),qL=BD(yO.ResourcePool),VL((QL=GI((ZL=function(){function t(){NI(this,t),FI(this,"frameGraphSystem",QL,this),FI(this,"renderPassFactory",JL,this),FI(this,"configService",tB,this),FI(this,"resourcePool",eB,this)}var e;return jI(t,[{key:"execute",value:(e=HI(VI.mark((function t(e){var n,r,i,o,a,s,l,u;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.renderPassFactory(DL.IDENTIFIER),r=n.setup,i=n.execute,this.frameGraphSystem.addPass(DL.IDENTIFIER,r,i),o=this.renderPassFactory(oB.IDENTIFIER),a=o.setup,s=o.execute,l=o.tearDown,u=this.frameGraphSystem.addPass(oB.IDENTIFIER,a,s,l),this.frameGraphSystem.present(u.data.output);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(t,e){return this.renderPassFactory(iB.IDENTIFIER).pick(t,e)}}]),t}()).prototype,"frameGraphSystem",[WL,HL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),JL=GI(ZL.prototype,"renderPassFactory",[YL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tB=GI(ZL.prototype,"configService",[XL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eB=GI(ZL.prototype,"resourcePool",[qL],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),KL=ZL))||KL);function sB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(PCt){return!1}}();return function(){var n,r=AO(t);if(e){var i=AO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return MO(this,n)}}var lB,uB,cB,dB,hB,fB,pB,gB,vB,mB=function(t){SO(n,qI);var e=sB(n);function n(t){var r;return NI(this,n),(r=e.call(this,t)).parentID=void 0,Object.assign(EO(r),t),r}return n}(),yB=(lB=vO(),uB=BD(yO.HierarchyComponentManager),cB=BD(yO.TransformComponentManager),dB=BD(yO.MeshComponentManager),lB((pB=GI((fB=function(){function t(){NI(this,t),FI(this,"hierarchy",pB,this),FI(this,"transform",gB,this),FI(this,"mesh",vB,this)}var e;return jI(t,[{key:"execute",value:(e=HI(VI.mark((function t(){return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var t=this;this.transform.forEach((function(e,n){(n.isDirty()||n.isLocalDirty())&&(t.setMeshAABBDirty(t.mesh.getComponentByEntity(e)),n.updateTransform())}))}},{key:"runHierarchyUpdateSystem",value:function(){var t=this;this.hierarchy.forEach((function(e,n){var r=t.transform.getComponentByEntity(e),i=t.transform.getComponentByEntity(n.parentID);null!==r&&null!==i&&r.updateTransformWithParent(i)}))}},{key:"attach",value:function(t,e,n){this.hierarchy.contains(t)&&this.detach(t),this.hierarchy.create(t,{parentID:e});var r=this.mesh.getComponentByEntity(e);if(this.setMeshAABBDirty(r),r&&-1===r.children.indexOf(t)&&r.children.push(t),this.hierarchy.getCount()>1)for(var i=this.hierarchy.getCount()-1;i>0;--i)for(var o=this.hierarchy.getEntity(i),a=0;a<i;++a){if(this.hierarchy.getComponent(a).parentID===o){this.hierarchy.moveItem(i,a),++i;break}}this.hierarchy.getComponentByEntity(t);var s=this.transform.getComponentByEntity(e);null===s&&(s=this.transform.create(e));var l=this.transform.getComponentByEntity(t);null===l&&(l=this.transform.create(t),s=this.transform.getComponentByEntity(e)),l.parent=s,!n&&s&&(l.matrixTransform(xu(mu(),s.worldTransform)),l.updateTransform()),s&&l.updateTransformWithParent(s)}},{key:"detach",value:function(t){var e=this.hierarchy.getComponentByEntity(t);if(null!==e){var n=this.transform.getComponentByEntity(t);null!==n&&(n.parent=null,n.applyTransform()),this.hierarchy.removeKeepSorted(t);var r=this.mesh.getComponentByEntity(e.parentID);if(r){var i=r.children.indexOf(t);r.children.splice(i,1)}this.setMeshAABBDirty(r)}}},{key:"detachChildren",value:function(t){var e=this.mesh.getComponentByEntity(t);e&&(e.children=[]);for(var n=0;n<this.hierarchy.getCount();){var r;if((null===(r=this.hierarchy.getComponent(n))||void 0===r?void 0:r.parentID)===t){var i=this.hierarchy.getEntity(n);this.detach(i)}else++n}}},{key:"setMeshAABBDirty",value:function(t){t&&(t.aabbDirty=!0)}}]),t}()).prototype,"hierarchy",[uB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gB=GI(fB.prototype,"transform",[cB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vB=GI(fB.prototype,"mesh",[dB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hB=fB))||hB);function bB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(PCt){return!1}}();return function(){var n,r=AO(t);if(e){var i=AO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return MO(this,n)}}var xB,wB,CB,SB,kB,EB=function(t){SO(n,qI);var e=bB(n);function n(t){var r,i,o,a,s,l,u,c,d,h,f,p,g,v,m;return NI(this,n),(r=e.call(this,t)).dirtyFlag=void 0,r.localDirtyFlag=void 0,r.parent=null,r.localPosition=Pu(0,0,0),r.localRotation=Ju(0,0,0,1),r.localScale=Pu(1,1,1),r.localTransform=mu(),r.position=Pu(0,0,0),r.rotation=Ju(0,0,0,1),r.scaling=Pu(1,1,1),r.worldTransform=mu(),r.matrixTransform=(i=mu(),function(t){wu(i,r.getLocalTransform(),t),ku(r.localScale,i),Su(r.localPosition,i),Eu(r.localRotation,i)}),r.rotateRollPitchYaw=(o=Yu(),a=Yu(),s=Yu(),function(t,e,n){r.setDirty(),Qu(o,t,0,0),Qu(a,0,e,0),Qu(s,0,0,n),qu(r.localRotation,o,r.localRotation),qu(r.localRotation,r.localRotation,a),qu(r.localRotation,s,r.localRotation),nc(r.localRotation,r.localRotation)}),r.lerp=(l=Au(),u=Yu(),c=Au(),d=Au(),h=Yu(),f=Au(),function(t,e,n){r.setDirty(),ku(l,t.worldTransform),Su(c,t.worldTransform),Eu(u,t.worldTransform),ku(d,e.worldTransform),Su(f,e.worldTransform),Eu(h,e.worldTransform),Nu(r.localScale,l,d,n),Ku(r.localRotation,u,h,n),Nu(r.localPosition,c,f,n)}),r.translate=(p=Au(),function(t){return Ou(p,r.getPosition(),t),r.setPosition(p),r.setDirty(!0),EO(r)}),r.translateLocal=function(t){var e,n,i,o,a,s,l,u,c,d,h,f,p,g,v,m,y;return e=t,n=t,i=r.localRotation,o=i[0],a=i[1],s=i[2],l=i[3],u=n[0],c=n[1],d=n[2],g=a*(p=o*c-a*u)-s*(f=s*u-o*d),v=s*(h=a*d-s*c)-o*p,m=o*f-a*h,h*=y=2*l,f*=y,p*=y,g*=2,v*=2,m*=2,e[0]=u+h+g,e[1]=c+f+v,e[2]=d+p+m,Ou(r.localPosition,r.localPosition,t),r.setLocalDirty(!0),EO(r)},r.setPosition=(g=mu(),function(t){return r.position=t,r.setLocalDirty(!0),null===r.parent?Iu(r.localPosition,t):(yu(g,r.parent.worldTransform),xu(g,g),zu(r.localPosition,t,g)),EO(r)}),r.rotate=(v=Yu(),function(t){if(null===r.parent)qu(r.localRotation,r.localRotation,t),nc(r.localRotation,r.localRotation);else{var e=r.getRotation(),n=r.parent.getRotation();tc(v,n),Zu(v,v),qu(v,v,t),qu(r.localRotation,t,e),nc(r.localRotation,r.localRotation)}return r.setLocalDirty(),EO(r)}),r.rotateLocal=function(t){return qu(r.localRotation,r.localRotation,t),nc(r.localRotation,r.localRotation),r.setLocalDirty(!0),EO(r)},r.setRotation=(m=Yu(),function(t){return null===r.parent?tc(r.localRotation,t):(tc(m,r.parent.getRotation()),Zu(m,m),tc(r.localRotation,m),ec(r.localRotation,r.localRotation,t)),r.setLocalDirty(!0),EO(r)}),r}return jI(n,[{key:"setLocalPosition",value:function(t){Iu(this.localPosition,t),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(t){Iu(this.localScale,t),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(t){return tc(this.localRotation,t),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?this.dirtyFlag|=n.DIRTY:this.dirtyFlag&=~n.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?(this.localDirtyFlag|=n.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~n.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&null===this.parent&&(yu(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(t){wu(this.worldTransform,t.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),ku(this.localScale,this.worldTransform),Su(this.localPosition,this.worldTransform),Eu(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=Pu(0,0,0),this.localRotation=Ju(0,0,0,1),this.localScale=Pu(1,1,1)}},{key:"scaleLocal",value:function(t){var e,n,r;return this.setLocalDirty(),e=this.localScale,n=this.localScale,r=t,e[0]=n[0]*r[0],e[1]=n[1]*r[1],e[2]=n[2]*r[2],this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){var t,e,n,r,i,o,a,s,l,u,c,d,h,f,p,g,v,m,y,b,x,w,C;return this.localDirtyFlag&&(t=this.localTransform,e=this.localRotation,n=this.localPosition,r=this.localScale,i=e[0],o=e[1],a=e[2],s=e[3],d=i*(l=i+i),h=i*(u=o+o),f=i*(c=a+a),p=o*u,g=o*c,v=a*c,m=s*l,y=s*u,b=s*c,x=r[0],w=r[1],C=r[2],t[0]=(1-(p+v))*x,t[1]=(h+b)*x,t[2]=(f-y)*x,t[3]=0,t[4]=(h-b)*w,t[5]=(1-(d+v))*w,t[6]=(g+m)*w,t[7]=0,t[8]=(f+y)*C,t[9]=(g-m)*C,t[10]=(1-(d+p))*C,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return this.isLocalDirty()||this.isDirty()?(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform):this.worldTransform}},{key:"getPosition",value:function(){return Su(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return Eu(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return ku(this.scaling,this.worldTransform),this.scaling}}]),n}();EB.DIRTY=1;var MB=(xB=vO(),wB=BD(yO.RenderEngine),xB((kB=GI((SB=function(){function t(){NI(this,t),FI(this,"engine",kB,this),this.resourcePool={}}return jI(t,[{key:"getOrCreateResource",value:function(t){if(!this.resourcePool[t.name]){var e=t.descriptor,n=e.width,r=e.height,i=e.usage;this.resourcePool[t.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:n,height:r,wrapS:YO.CLAMP_TO_EDGE,wrapT:YO.CLAMP_TO_EDGE,usage:i})})}return this.resourcePool[t.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),t}()).prototype,"engine",[wB],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),CB=SB))||CB);function AB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(PCt){return!1}}();return function(){var n,r=AO(t);if(e){var i=AO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return MO(this,n)}}var _B,TB,PB,IB,DB=function(t){SO(n,qI);var e=AB(n);function n(t){var r;return NI(this,n),(r=e.call(this,t)).name=void 0,r.name=t.name||"",r}return n}(),OB=vO()(_B=function(){function t(){NI(this,t),this.config=void 0}return jI(t,[{key:"get",value:function(){return this.config}},{key:"set",value:function(t){this.config=t}}]),t}())||_B;(IB=PB||(PB={})).PANSTART="PANSTART",IB.PANEND="PANEND",IB.PANMOVE="PANMOVE",IB.PINCH="PINCH",IB.KEYDOWN="KEYDOWN",IB.KEYUP="KEYUP",IB.HOVER="HOVER";var RB=vO()(TB=function(){function t(){NI(this,t)}return jI(t,[{key:"listen",value:function(t){}},{key:"on",value:function(t,e){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),t}())||TB;var LB,BB=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function FB(t){var e={};return{content:t=t.replace(BB,(function(t,n,r){var i=r.split(":"),o=i[0].trim(),a="";switch(i.length>1&&(a=i[1].trim()),n){case"bool":a="true"===a;break;case"float":case"int":a=Number(a);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":a=a?a.replace("[","").replace("]","").split(",").reduce((function(t,e){return t.push(Number(e.trim())),t}),[]):new Array(function(t){var e=0;switch(t){case"vec2":case"ivec2":e=2;break;case"vec3":case"ivec3":e=3;break;case"vec4":case"ivec4":case"mat2":e=4;break;case"mat3":e=9;break;case"mat4":e=16}return e}(n)).fill(0)}return e[o]=a,"uniform ".concat(n," ").concat(o,";\n")})),uniforms:e}}function NB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zB(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?NB(Object(n),!0).forEach((function(e){jO(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NB(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var jB=/precision\s+(high|low|medium)p\s+float/,GB=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,UB=vO()(LB=function(){function t(){NI(this,t),this.moduleCache={},this.rawContentCache={}}return jI(t,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:"attribute vec3 a_PickingColor;\nvarying vec4 v_PickingResult;\n\nuniform vec3 u_PickingColor : [0, 0, 0];\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\nuniform float u_PickingThreshold : 1.0;\nuniform float u_PickingBuffer: 0.0;\n\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&\n    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&\n    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;\n}\n\nvoid setPickingColor(vec3 pickingColor) {\n  // compares only in highlight stage\n  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));\n\n  // Stores the picking color so that the fragment shader can render it during picking\n  v_PickingResult.rgb = pickingColor * COLOR_SCALE;\n}\n\nfloat setPickingSize(float x) {\n   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;\n}",fs:"varying vec4 v_PickingResult;\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\n\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 filterHighlightColor(vec4 color) {\n  bool selected = bool(v_PickingResult.a);\n\n  if (selected) {\n    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\n\n    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(resultRGB, color.a);\n  } else {\n    return color;\n  }\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 filterPickingColor(vec4 color) {\n  vec3 pickingColor = v_PickingResult.rgb;\n  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 filterColor(vec4 color) {\n  return filterPickingColor(filterHighlightColor(color));\n}\n"}),this.registerModule("sdf2d",{vs:"",fs:"/**\n * 2D signed distance field functions\n * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n */\n\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(vec2 p) {\n  float k = sqrt(3.0);\n  p.x = abs(p.x) - 1.0;\n  p.y = p.y + 1.0/k;\n  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\n  p.x -= clamp( p.x, -2.0, 0.0 );\n  return -length(p)*sign(p.y);\n}\n\nfloat sdBox(vec2 p, vec2 b) {\n  vec2 d = abs(p)-b;\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\n}\n\nfloat sdPentagon(vec2 p, float r) {\n  vec3 k = vec3(0.809016994,0.587785252,0.726542528);\n  p.x = abs(p.x);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagon(vec2 p, float r) {\n  vec3 k = vec3(-0.866025404,0.5,0.577350269);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdOctogon(vec2 p, float r) {\n  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );\n  p = abs(p);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagram(vec2 p, float r) {\n  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\n  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdRhombus(vec2 p, vec2 b) {\n  vec2 q = abs(p);\n  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\n  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\n  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\n}\n\nfloat sdVesica(vec2 p, float r, float d) {\n  p = abs(p);\n  float b = sqrt(r*r-d*d); // can delay this sqrt\n  return ((p.y-b)*d>p.x*b)\n          ? length(p-vec2(0.0,b))\n          : length(p-vec2(-d,0.0))-r;\n}"})}},{key:"registerModule",value:function(t,e){if(!this.rawContentCache[t]){var n=e.vs,r=void 0===n?"":n,i=e.fs,o=void 0===i?"":i,a=e.uniforms,s=FB(r),l=s.content,u=s.uniforms,c=FB(o),d=c.content,h=c.uniforms;this.rawContentCache[t]={fs:d,uniforms:zB(zB(zB({},u),h),a),vs:l}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(t){var e=this;if(this.moduleCache[t])return this.moduleCache[t];var n,r=this.rawContentCache[t].vs||"",i=this.rawContentCache[t].fs||"",o=this.processModule(r,[],"vs"),a=o.content,s=o.includeList,l=this.processModule(i,[],"fs"),u=l.content,c=l.includeList,d=u,h=(n=s.concat(c).concat(t),n.filter((function(t,e,n){return n.indexOf(t)===e}))).reduce((function(t,n){return zB(zB({},t),e.rawContentCache[n].uniforms)}),{});return jB.test(u)||(d="#ifdef GL_FRAGMENT_PRECISION_HIGH\n precision highp float;\n #else\n precision mediump float;\n#endif\n"+u),this.moduleCache[t]={fs:d.trim(),uniforms:h,vs:a.trim()},this.moduleCache[t]}},{key:"processModule",value:function(t,e,n){var r=this;return{content:t.replace(GB,(function(t,i){var o=i.split(" ")[0].replace(/"/g,"");if(e.indexOf(o)>-1)return"";var a=r.rawContentCache[o][n];return e.push(o),r.processModule(a||"",e,n).content})),includeList:e}}}]),t}())||LB,$B=new gO;function VB(){var t=new gO;return t.parent=$B,t.bind(yO.Systems).to(yB).inSingletonScope().whenTargetNamed(yO.SceneGraphSystem),t.bind(yO.Systems).to(zO).inSingletonScope().whenTargetNamed(yO.FrameGraphSystem),t.bind(yO.Systems).to(vL).inSingletonScope().whenTargetNamed(yO.MeshSystem),t.bind(yO.Systems).to(rR).inSingletonScope().whenTargetNamed(yO.GeometrySystem),t.bind(yO.Systems).to(wR).inSingletonScope().whenTargetNamed(yO.MaterialSystem),t.bind(yO.Systems).to(aB).inSingletonScope().whenTargetNamed(yO.RendererSystem),t.bind(yO.ResourcePool).to(MB).inSingletonScope(),t.bind(yO.ConfigService).to(OB).inSingletonScope(),t.bind(yO.InteractorService).to(RB).inSingletonScope(),t.bind(yO.RenderPass).to(DL).inSingletonScope().whenTargetNamed(DL.IDENTIFIER),t.bind(yO.RenderPass).to(oB).inSingletonScope().whenTargetNamed(oB.IDENTIFIER),t.bind(yO.RenderPass).to(iB).inSingletonScope().whenTargetNamed(iB.IDENTIFIER),t.bind(yO.RenderPassFactory).toFactory((function(t){return function(e){return t.container.getNamed(yO.RenderPass,e)}})),t}function WB(t){for(var e=new kR,n=Pu(t[0],t[1],t[2]),r=Pu(t[0],t[1],t[2]),i=3;i<t.length;){var o=t[i++],a=t[i++],s=t[i++];o<n[0]&&(n[0]=o),a<n[1]&&(n[1]=a),s<n[2]&&(n[2]=s),o>r[0]&&(r[0]=o),a>r[1]&&(r[1]=a),s>r[2]&&(r[2]=s)}return e.setMinMax(n,r),e}$B.bind(yO.ShaderModuleService).to(UB).inSingletonScope(),$B.bind(yO.NameComponentManager).toConstantValue(new KI(DB)),$B.bind(yO.HierarchyComponentManager).toConstantValue(new KI(mB)),$B.bind(yO.TransformComponentManager).toConstantValue(new KI(EB)),$B.bind(yO.MeshComponentManager).toConstantValue(new KI(_R)),$B.bind(yO.CullableComponentManager).toConstantValue(new KI(SR)),$B.bind(yO.GeometryComponentManager).toConstantValue(new KI(nR)),$B.bind(yO.MaterialComponentManager).toConstantValue(new KI(vR));var HB,YB,XB,qB,KB,ZB,QB,JB,tF,eF,nF="undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);Au(),Au(),Au(),Au(),Au(),Au(),(YB=HB||(HB={})).Normal="normal",YB.PostProcessing="post-processing",(qB=XB||(XB={})).Void="Void",qB.Boolean="Boolean",qB.Float="Float",qB.Uint32="Uint32",qB.Int32="Int32",qB.Vector="Vector",qB.Vector2Float="vec2<f32>",qB.Vector3Float="vec3<f32>",qB.Vector4Float="vec4<f32>",qB.Vector2Boolean="vec2<bool>",qB.Vector3Boolean="vec3<bool>",qB.Vector4Boolean="vec4<bool>",qB.Vector2Uint="vec2<u32>",qB.Vector3Uint="vec3<u32>",qB.Vector4Uint="vec4<u32>",qB.Vector2Int="vec2<i32>",qB.Vector3Int="vec3<i32>",qB.Vector4Int="vec4<i32>",qB.Matrix="Matrix",qB.Matrix3x3Float="mat3x3<f32>",qB.Matrix4x4Float="mat4x4<i32>",qB.Struct="Struct",qB.FloatArray="Float[]",qB.Vector4FloatArray="vec4<f32>[]",(ZB=KB||(KB={})).Program="Program",ZB.Identifier="Identifier",ZB.VariableDeclaration="VariableDeclaration",ZB.BlockStatement="BlockStatement",ZB.ReturnStatement="ReturnStatement",ZB.FunctionDeclaration="FunctionDeclaration",ZB.VariableDeclarator="VariableDeclarator",ZB.AssignmentExpression="AssignmentExpression",ZB.LogicalExpression="LogicalExpression",ZB.BinaryExpression="BinaryExpression",ZB.ArrayExpression="ArrayExpression",ZB.UnaryExpression="UnaryExpression",ZB.UpdateExpression="UpdateExpression",ZB.FunctionExpression="FunctionExpression",ZB.MemberExpression="MemberExpression",ZB.ConditionalExpression="ConditionalExpression",ZB.ExpressionStatement="ExpressionStatement",ZB.CallExpression="CallExpression",ZB.NumThreadStatement="NumThreadStatement",ZB.StorageStatement="StorageStatement",ZB.DoWhileStatement="DoWhileStatement",ZB.WhileStatement="WhileStatement",ZB.ForStatement="ForStatement",ZB.BreakStatement="BreakStatement",ZB.ContinueStatement="ContinueStatement",ZB.IfStatement="IfStatement",ZB.ImportedFunctionStatement="ImportedFunctionStatement",(JB=QB||(QB={})).Input="Input",JB.Output="Output",JB.Uniform="Uniform",JB.Workgroup="Workgroup",JB.UniformConstant="UniformConstant",JB.Image="Image",JB.StorageBuffer="StorageBuffer",JB.Private="Private",JB.Function="Function",(eF=tF||(tF={})).GLSL100="GLSL100",eF.GLSL450="GLSL450",eF.WGSL="WGSL";function rF(t){return"number"==typeof t}function iF(t){return void 0===t?0:t>360||t<-360?t%360:t}function oF(t,e,n){return rF(t)?Pu(t,e,n):3===t.length?_u(t):Pu(t[0],t[1],t[2])}var aF,sF,lF,uF,cF,dF,hF,fF,pF,gF,vF,mF,yF,bF=function(){function t(e,n){var r,i;NI(this,t),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=e,this.matrix=(r=n.matrix,(i=new iu(16))[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i),this.right=_u(n.right),this.up=_u(n.up),this.forward=_u(n.forward),this.position=_u(n.position),this.focalPoint=_u(n.focalPoint),this.distanceVector=_u(n.distanceVector),this.azimuth=n.azimuth,this.elevation=n.elevation,this.roll=n.roll,this.relAzimuth=n.relAzimuth,this.relElevation=n.relElevation,this.relRoll=n.relRoll,this.dollyingStep=n.dollyingStep,this.distance=n.distance}return jI(t,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(t){t.matrix=yu(t.matrix,this.matrix),t.right=Iu(t.right,this.right),t.up=Iu(t.up,this.up),t.forward=Iu(t.forward,this.forward),t.position=Iu(t.position,this.position),t.focalPoint=Iu(t.focalPoint,this.focalPoint),t.distanceVector=Iu(t.distanceVector,this.distanceVector),t.azimuth=this.azimuth,t.elevation=this.elevation,t.roll=this.roll,t.relAzimuth=this.relAzimuth,t.relElevation=this.relElevation,t.relRoll=this.relRoll,t.dollyingStep=this.dollyingStep,t.distance=this.distance}}]),t}();(pF=fF||(fF={})).ORBITING="ORBITING",pF.EXPLORING="EXPLORING",pF.TRACKING="TRACKING",(vF=gF||(gF={})).DEFAULT="DEFAULT",vF.ROTATIONAL="ROTATIONAL",vF.TRANSLATIONAL="TRANSLATIONAL",vF.CINEMATIC="CINEMATIC",(yF=mF||(mF={})).ORTHOGRAPHIC="ORTHOGRAPHIC",yF.PERSPECTIVE="PERSPECTIVE";var xF,wF,CF,SF,kF,EF,MF,AF=Math.PI/180,_F=180/Math.PI,TF=(aF=vO(),sF=BD(yO.InteractorService),aF((hF=dF=function(){function t(){NI(this,t),this.matrix=mu(),this.right=Pu(1,0,0),this.up=Pu(0,1,0),this.forward=Pu(0,0,1),this.position=Pu(0,0,1),this.focalPoint=Pu(0,0,0),this.distanceVector=Pu(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.rotateWorld=!1,FI(this,"interactor",cF,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=mu(),this.view=void 0,this.following=void 0,this.type=fF.EXPLORING,this.trackingMode=gF.DEFAULT,this.projectionMode=mF.PERSPECTIVE,this.frustum=new $R,this.landmarks=[],this.landmarkAnimationID=void 0}return jI(t,[{key:"clone",value:function(){var e=new t;return e.setType(this.type,void 0),e.interactor=this.interactor,e}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(t,e){return this.type=t,this.type===fF.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===fF.TRACKING&&void 0!==e&&this.setTrackingMode(e),this}},{key:"setProjectionMode",value:function(t){return this.projectionMode=t,this}},{key:"setTrackingMode",value:function(t){if(this.type!==fF.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this}},{key:"setWorldRotation",value:function(t){this.rotateWorld=t,this._getAngles()}},{key:"getViewTransform",value:function(){return xu(mu(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(t){return this.matrix=t,this._update(),this}},{key:"setAspect",value:function(t){return this.setPerspective(this.near,this.far,this.fov,t),this}},{key:"setViewOffset",value:function(t,e,n,r,i,o){return this.aspect=t/e,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.projectionMode===mF.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===mF.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(t,e,n,r){return this.projectionMode=mF.PERSPECTIVE,this.fov=n,this.near=t,this.far=e,this.aspect=r,function(t,e,n,r,i){var o,a=1/Math.tan(e/2);t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r)}(this.perspective,this.fov*AF,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(t,e,n,r,i,o){this.projectionMode=mF.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=n,this.bottom=r,this.near=i,this.far=o;var a=(this.rright-this.left)/(2*this.zoom),s=(this.top-this.bottom)/(2*this.zoom),l=(this.rright+this.left)/2,u=(this.top+this.bottom)/2,c=l-a,d=l+a,h=u+s,f=u-s;if(void 0!==this.view&&this.view.enabled){var p=(this.rright-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d=(c+=p*this.view.offsetX)+p*this.view.width,f=(h-=g*this.view.offsetY)-g*this.view.height}return function(t,e,n,r,i,o,a){var s=1/(e-n),l=1/(r-i),u=1/(o-a);t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(a+o)*u,t[15]=1}(this.perspective,c,d,h,f,i,o),this}},{key:"setPosition",value:function(t,e,n){return this._setPosition(t,e,n),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(t,e,n){var r,i,o,a,s,l,u,c,d,h,f,p,g,v=Pu(0,1,0);if(this.focalPoint=oF(t,e,n),this.trackingMode===gF.CINEMATIC){var m=Ru(Au(),this.focalPoint,this.position);t=m[0],e=m[1],n=m[2];var y=Tu(m),b=Math.asin(e/y)*_F,x=90+Math.atan2(n,t)*_F,w=mu();r=w,i=w,o=x*AF,a=Math.sin(o),s=Math.cos(o),l=i[0],u=i[1],c=i[2],d=i[3],h=i[8],f=i[9],p=i[10],g=i[11],i!==r&&(r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[0]=l*s-h*a,r[1]=u*s-f*a,r[2]=c*s-p*a,r[3]=d*s-g*a,r[8]=l*a+h*s,r[9]=u*a+f*s,r[10]=c*a+p*s,r[11]=d*a+g*s,function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],d=e[10],h=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+u*r,t[5]=a*i+c*r,t[6]=s*i+d*r,t[7]=l*i+h*r,t[8]=u*i-o*r,t[9]=c*i-a*r,t[10]=d*i-s*r,t[11]=h*i-l*r}(w,w,b*AF),v=zu(Au(),[0,1,0],w)}return xu(this.matrix,function(t,e,n,r){var i,o,a,s,l,u,c,d,h,f,p=e[0],g=e[1],v=e[2],m=r[0],y=r[1],b=r[2],x=n[0],w=n[1],C=n[2];return Math.abs(p-x)<1e-6&&Math.abs(g-w)<1e-6&&Math.abs(v-C)<1e-6?bu(t):(c=p-x,d=g-w,h=v-C,i=y*(h*=f=1/Math.hypot(c,d,h))-b*(d*=f),o=b*(c*=f)-m*h,a=m*d-y*c,(f=Math.hypot(i,o,a))?(i*=f=1/f,o*=f,a*=f):(i=0,o=0,a=0),s=d*a-h*o,l=h*i-c*a,u=c*o-d*i,(f=Math.hypot(s,l,u))?(s*=f=1/f,l*=f,u*=f):(s=0,l=0,u=0),t[0]=i,t[1]=s,t[2]=c,t[3]=0,t[4]=o,t[5]=l,t[6]=d,t[7]=0,t[8]=a,t[9]=u,t[10]=h,t[11]=0,t[12]=-(i*p+o*g+a*v),t[13]=-(s*p+l*g+u*v),t[14]=-(c*p+d*g+h*v),t[15]=1,t)}(mu(),this.position,this.focalPoint,v)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(t){if(!(this.distance===t||t<0)){this.distance=t,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var e=Au();t=this.distance;var n=this.forward,r=this.focalPoint;return e[0]=t*n[0]+r[0],e[1]=t*n[1]+r[1],e[2]=t*n[2]+r[2],this._setPosition(e),this}}},{key:"setMaxDistance",value:function(t){return this.maxDistance=t,this}},{key:"setMinDistance",value:function(t){return this.minDistance=t,this}},{key:"changeAzimuth",value:function(t){return this.setAzimuth(this.azimuth+t),this}},{key:"changeElevation",value:function(t){return this.setElevation(this.elevation+t),this}},{key:"changeRoll",value:function(t){return this.setRoll(this.roll+t),this}},{key:"setAzimuth",value:function(t){return this.azimuth=iF(t),this.computeMatrix(),this._getAxes(),this.type===fF.ORBITING||this.type===fF.EXPLORING?this._getPosition():this.type===fF.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(t){return this.elevation=iF(t),this.computeMatrix(),this._getAxes(),this.type===fF.ORBITING||this.type===fF.EXPLORING?this._getPosition():this.type===fF.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(t){return this.roll=iF(t),this.computeMatrix(),this._getAxes(),this.type===fF.ORBITING||this.type===fF.EXPLORING?this._getPosition():this.type===fF.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(t,e,n){if(this.type===fF.EXPLORING){t=iF(t),e=iF(e),n=iF(n);var r=Xu(Yu(),[1,0,0],(this.rotateWorld?1:-1)*e*AF),i=Xu(Yu(),[0,1,0],(this.rotateWorld?1:-1)*t*AF),o=Xu(Yu(),[0,0,1],n*AF),a=qu(Yu(),i,r);a=qu(Yu(),a,o);var s=Mu(mu(),a);Cu(this.matrix,this.matrix,[0,0,-this.distance]),wu(this.matrix,this.matrix,s),Cu(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+e)>90)return;this.relElevation=iF(e),this.relAzimuth=iF(t),this.relRoll=iF(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===fF.ORBITING||this.type===fF.EXPLORING?this._getPosition():this.type===fF.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(t,e){var n=oF(t,e,0),r=_u(this.position);return Ou(r,r,Lu(Au(),this.right,n[0])),Ou(r,r,Lu(Au(),this.up,n[1])),this._setPosition(r),this}},{key:"dolly",value:function(t){var e=this.forward,n=_u(this.position),r=this.dollyingStep,i=this.distance+t*this.dollyingStep;return r=Math.max(Math.min(i,this.maxDistance),this.minDistance)-this.distance,n[0]+=r*e[0],n[1]+=r*e[1],n[2]+=r*e[2],this._setPosition(n),this.type===fF.ORBITING||this.type===fF.EXPLORING?this._getDistance():this.type===fF.TRACKING&&Ou(this.focalPoint,n,this.distanceVector),this}},{key:"createLandmark",value:function(t,e){var n=this.clone();n.setPosition(e.position),n.setFocalPoint(e.focalPoint),void 0!==e.roll&&n.setRoll(e.roll);var r=new bF(t,n);return this.landmarks.push(r),r}},{key:"setLandmark",value:function(t){var e=new bF(t,this);return this.landmarks.push(e),this}},{key:"gotoLandmark",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=this.landmarks.find((function(e){return e.name===t}));if(r){if(0===n)return void r.retrieve(this);void 0!==this.landmarkAnimationID&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var i,o=r.getPosition(),a=r.getFocalPoint(),s=r.getRoll(),l=function t(r){void 0===i&&(i=r);var l,u=r-i,c=(1-Math.cos(u/n*Math.PI))/2,d=Au(),h=Au();if(Nu(d,e.focalPoint,a,c),Nu(h,e.position,o,c),l=e.roll*(1-c)+s*c,e.setFocalPoint(d),e.setPosition(h),e.setRoll(l),e.computeMatrix(),!(Uu(d,a)+Uu(h,o)>.01))return e.setFocalPoint(d),e.setPosition(h),e.setRoll(l),e.computeMatrix(),void e.interactor.connect();u<n&&(e.landmarkAnimationID=window.requestAnimationFrame(t))};window.requestAnimationFrame(l)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var t,e,n=Xu(Yu(),[0,0,1],this.roll*AF);bu(this.matrix),t=Xu(Yu(),[1,0,0],(this.rotateWorld&&this.type!==fF.TRACKING||this.type===fF.TRACKING?1:-1)*this.elevation*AF),e=Xu(Yu(),[0,1,0],(this.rotateWorld&&this.type!==fF.TRACKING||this.type===fF.TRACKING?1:-1)*this.azimuth*AF);var r=qu(Yu(),e,t);r=qu(Yu(),r,n);var i=Mu(mu(),r);this.type===fF.ORBITING||this.type===fF.EXPLORING?(Cu(this.matrix,this.matrix,this.focalPoint),wu(this.matrix,this.matrix,i),Cu(this.matrix,this.matrix,[0,0,this.distance])):this.type===fF.TRACKING&&(Cu(this.matrix,this.matrix,this.position),wu(this.matrix,this.matrix,i))}},{key:"_setPosition",value:function(t,e,n){this.position=oF(t,e,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1}},{key:"_getAxes",value:function(){Iu(this.right,oF(Hu(Vu(),[1,0,0,0],this.matrix))),Iu(this.up,oF(Hu(Vu(),[0,1,0,0],this.matrix))),Iu(this.forward,oF(Hu(Vu(),[0,0,1,0],this.matrix))),Bu(this.right,this.right),Bu(this.up,this.up),Bu(this.forward,this.forward)}},{key:"_getAngles",value:function(){var t=this.distanceVector[0],e=this.distanceVector[1],n=this.distanceVector[2],r=Tu(this.distanceVector);if(0===r)return this.elevation=0,void(this.azimuth=0);this.type===fF.TRACKING||this.rotateWorld?(this.elevation=Math.asin(e/r)*_F,this.azimuth=Math.atan2(-t,-n)*_F):(this.elevation=-Math.asin(e/r)*_F,this.azimuth=-Math.atan2(-t,-n)*_F)}},{key:"_getPosition",value:function(){Iu(this.position,oF(Hu(Vu(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){ju(this.distanceVector,[0,0,-this.distance],au(ou(),this.matrix)),Ou(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=Ru(Au(),this.focalPoint,this.position),this.distance=Tu(this.distanceVector),this.dollyingStep=this.distance/100}}]),t}(),dF.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},cF=GI((uF=hF).prototype,"interactor",[sF],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lF=uF))||lF),PF=(xF=vO(),wF=BD(yO.GeometryComponentManager),xF((MF=EF=function(){function t(){NI(this,t),this.config=void 0,FI(this,"geometry",kF,this),this.entity=void 0,this.component=void 0}return jI(t,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t){this.entity=t,this.component=this.geometry.create(t),this.component.entity=t,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),t}(),EF.BOX="box",EF.SPHERE="sphere",EF.PLANE="plane",EF.MERGED="merged",kF=GI((SF=MF).prototype,"geometry",[wF],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),CF=SF))||CF),IF=qm((function(t,e){var n,r,i,o,a,s,l,u,c,d,h,f,p,g,v,m,y,b,x,w,C,S,k,E,M;Object.defineProperty(e,"__esModule",{value:!0}),(e.ExtensionName||(e.ExtensionName={})).TextureCompressionBC="texture-compression-bc",(n=e.AddressMode||(e.AddressMode={})).ClampToEdge="clamp-to-edge",n.Repeat="repeat",n.MirrorRepeat="mirror-repeat",(r=e.BindingType||(e.BindingType={})).UniformBuffer="uniform-buffer",r.StorageBuffer="storage-buffer",r.ReadonlyStorageBuffer="readonly-storage-buffer",r.Sampler="sampler",r.ComparisonSampler="comparison-sampler",r.SampledTexture="sampled-texture",r.ReadonlyStorageTexture="readonly-storage-texture",r.WriteonlyStorageTexture="writeonly-storage-texture",(i=e.BlendFactor||(e.BlendFactor={})).Zero="zero",i.One="one",i.SrcColor="src-color",i.OneMinusSrcColor="one-minus-src-color",i.SrcAlpha="src-alpha",i.OneMinusSrcAlpha="one-minus-src-alpha",i.DstColor="dst-color",i.OneMinusDstColor="one-minus-dst-color",i.DstAlpha="dst-alpha",i.OneMinusDstAlpha="one-minus-dst-alpha",i.SrcAlphaSaturated="src-alpha-saturated",i.BlendColor="blend-color",i.OneMinusBlendColor="one-minus-blend-color",(o=e.BlendOperation||(e.BlendOperation={})).Add="add",o.Subtract="subtract",o.ReverseSubtract="reverse-subtract",o.Min="min",o.Max="max",(a=e.CompareFunction||(e.CompareFunction={})).Never="never",a.Less="less",a.Equal="equal",a.LessEqual="less-equal",a.Greater="greater",a.NotEqual="not-equal",a.GreaterEqual="greater-equal",a.Always="always",(s=e.CullMode||(e.CullMode={})).None="none",s.Front="front",s.Back="back",(l=e.FilterMode||(e.FilterMode={})).Nearest="nearest",l.Linear="linear",(u=e.FrontFace||(e.FrontFace={})).CCW="ccw",u.CW="cw",(c=e.IndexFormat||(e.IndexFormat={})).Uint16="uint16",c.Uint32="uint32",(d=e.InputStepMode||(e.InputStepMode={})).Vertex="vertex",d.Instance="instance",(e.LoadOp||(e.LoadOp={})).Load="load",(h=e.PrimitiveTopology||(e.PrimitiveTopology={})).PointList="point-list",h.LineList="line-list",h.LineStrip="line-strip",h.TriangleList="triangle-list",h.TriangleStrip="triangle-strip",(f=e.StencilOperation||(e.StencilOperation={})).Keep="keep",f.Zero="zero",f.Replace="replace",f.Invert="invert",f.IncrementClamp="increment-clamp",f.DecrementClamp="decrement-clamp",f.IncrementWrap="increment-wrap",f.DecrementWrap="decrement-wrap",(p=e.StoreOp||(e.StoreOp={})).Store="store",p.Clear="clear",(g=e.TextureDimension||(e.TextureDimension={})).E1d="1d",g.E2d="2d",g.E3d="3d",(v=e.TextureFormat||(e.TextureFormat={})).R8Unorm="r8unorm",v.R8Snorm="r8snorm",v.R8Uint="r8uint",v.R8Sint="r8sint",v.R16Uint="r16uint",v.R16Sint="r16sint",v.R16Float="r16float",v.RG8Unorm="rg8unorm",v.RG8Snorm="rg8snorm",v.RG8Uint="rg8uint",v.RG8Sint="rg8sint",v.R32Uint="r32uint",v.R32Sint="r32sint",v.R32Float="r32float",v.RG16Uint="rg16uint",v.RG16Sint="rg16sint",v.RG16Float="rg16float",v.RGBA8Unorm="rgba8unorm",v.RGBA8UnormSRGB="rgba8unorm-srgb",v.RGBA8Snorm="rgba8snorm",v.RGBA8Uint="rgba8uint",v.RGBA8Sint="rgba8sint",v.BGRA8Unorm="bgra8unorm",v.BGRA8UnormSRGB="bgra8unorm-srgb",v.RGB10A2Unorm="rgb10a2unorm",v.RG11B10Float="rg11b10float",v.RG32Uint="rg32uint",v.RG32Sint="rg32sint",v.RG32Float="rg32float",v.RGBA16Uint="rgba16uint",v.RGBA16Sint="rgba16sint",v.RGBA16Float="rgba16float",v.RGBA32Uint="rgba32uint",v.RGBA32Sint="rgba32sint",v.RGBA32Float="rgba32float",v.Depth32Float="depth32float",v.Depth24Plus="depth24plus",v.Depth24PlusStencil8="depth24plus-stencil8",(m=e.TextureComponentType||(e.TextureComponentType={})).Float="float",m.Sint="sint",m.Uint="uint",(y=e.TextureViewDimension||(e.TextureViewDimension={})).E1d="1d",y.E2d="2d",y.E2dArray="2d-array",y.Cube="cube",y.CubeArray="cube-array",y.E3d="3d",(b=e.VertexFormat||(e.VertexFormat={})).Uchar2="uchar2",b.Uchar4="uchar4",b.Char2="char2",b.Char4="char4",b.Uchar2Norm="uchar2norm",b.Uchar4Norm="uchar4norm",b.Char2Norm="char2norm",b.Char4Norm="char4norm",b.Ushort2="ushort2",b.Ushort4="ushort4",b.Short2="short2",b.Short4="short4",b.Ushort2Norm="ushort2norm",b.Ushort4Norm="ushort4norm",b.Short2Norm="short2norm",b.Short4Norm="short4norm",b.Half2="half2",b.Half4="half4",b.Float="float",b.Float2="float2",b.Float3="float3",b.Float4="float4",b.Uint="uint",b.Uint2="uint2",b.Uint3="uint3",b.Uint4="uint4",b.Int="int",b.Int2="int2",b.Int3="int3",b.Int4="int4",(x=e.TextureAspect||(e.TextureAspect={})).All="all",x.StencilOnly="stencil-only",x.DepthOnly="depth-only",(w=e.CompilationMessageType||(e.CompilationMessageType={})).Error="error",w.Warning="warning",w.Info="info",(e.QueryType||(e.QueryType={})).Occlusion="occlusion",(C=e.BufferUsage||(e.BufferUsage={}))[C.MapRead=1]="MapRead",C[C.MapWrite=2]="MapWrite",C[C.CopySrc=4]="CopySrc",C[C.CopyDst=8]="CopyDst",C[C.Index=16]="Index",C[C.Vertex=32]="Vertex",C[C.Uniform=64]="Uniform",C[C.Storage=128]="Storage",C[C.Indirect=256]="Indirect",C[C.QueryResolve=512]="QueryResolve",(S=e.ColorWrite||(e.ColorWrite={}))[S.Red=1]="Red",S[S.Green=2]="Green",S[S.Blue=4]="Blue",S[S.Alpha=8]="Alpha",S[S.All=15]="All",(k=e.ShaderStage||(e.ShaderStage={}))[k.Vertex=1]="Vertex",k[k.Fragment=2]="Fragment",k[k.Compute=4]="Compute",(E=e.TextureUsage||(e.TextureUsage={}))[E.CopySrc=1]="CopySrc",E[E.CopyDst=2]="CopyDst",E[E.Sampled=4]="Sampled",E[E.Storage=8]="Storage",E[E.OutputAttachment=16]="OutputAttachment",(M=e.MapMode||(e.MapMode={}))[M.Read=1]="Read",M[M.Write=2]="Write"}));Xm(IF),IF.ExtensionName,IF.AddressMode;var DF=IF.BindingType,OF=IF.BlendFactor,RF=IF.BlendOperation,LF=IF.CompareFunction,BF=IF.CullMode;IF.FilterMode;var FF=IF.FrontFace,NF=IF.IndexFormat;IF.InputStepMode;var zF=IF.LoadOp,jF=IF.PrimitiveTopology,GF=IF.StencilOperation,UF=IF.StoreOp,$F=IF.TextureDimension,VF=IF.TextureFormat;IF.TextureComponentType;var WF=IF.TextureViewDimension;IF.VertexFormat;var HF=IF.TextureAspect;IF.CompilationMessageType,IF.QueryType;var YF=IF.BufferUsage,XF=IF.ColorWrite,qF=IF.ShaderStage,KF=IF.TextureUsage,ZF=IF.MapMode;function QF(){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var JF={}.toString,tN=function(t){return Array.isArray?Array.isArray(t):function(t,e){return JF.call(t)==="[object "+e+"]"}(t,"Array")},eN={};eN["[object Float32Array]"]=eN["[object Float64Array]"]=eN["[object Int8Array]"]=eN["[object Int16Array]"]=eN["[object Int32Array]"]=eN["[object Uint8Array]"]=eN["[object Uint8ClampedArray]"]=eN["[object Uint16Array]"]=eN["[object Uint32Array]"]=!0,eN["[object Arguments]"]=eN["[object Array]"]=eN["[object ArrayBuffer]"]=eN["[object Boolean]"]=eN["[object DataView]"]=eN["[object Date]"]=eN["[object Error]"]=eN["[object Function]"]=eN["[object Map]"]=eN["[object Number]"]=eN["[object Object]"]=eN["[object RegExp]"]=eN["[object Set]"]=eN["[object String]"]=eN["[object WeakMap]"]=!1;var nN=Object.prototype.toString;var rN,iN,oN,aN,sN,lN,uN,cN=function(t){return function(t){return!!t&&"object"===kO(t)}(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!!eN[nN.call(t)]};function dN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function hN(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dN(Object(n),!0).forEach((function(e){jO(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dN(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var fN,pN,gN,vN,mN,yN,bN,xN,wN,CN,SN,kN,EN,MN,AN,_N,TN,PN,IN,DN,ON,RN,LN,BN,FN,NN,zN,jN,GN,UN,$N,VN,WN,HN,YN,XN=(rN=vO(),iN=BD(yO.RenderEngine),oN=BD(yO.ConfigService),rN((lN=GI((sN=function(){function t(){NI(this,t),FI(this,"engine",lN,this),FI(this,"configService",uN,this),this.entity=XI(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var e,n,r;return jI(t,[{key:"init",value:function(){var t=this.configService.get(),e=t.canvas,n=t.engineOptions;this.initPromise=this.engine.init(hN({canvas:e||QF(),swapChainFormat:VF.BGRA8Unorm,antialiasing:!1},n))}},{key:"setBundle",value:function(t){this.compiledBundle=JSON.parse(JSON.stringify(t))}},{key:"setDispatch",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=t),this}},{key:"setMaxIteration",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=t),this}},{key:"setBinding",value:function(t,e){var n=this;if("string"==typeof t){var r=rF(e)||cN(e)||tN(e);if(this.compiledBundle&&this.compiledBundle.context){var i=this.compiledBundle.context.defines.find((function(e){return e.name===t}));if(i)return i.value=e,this;var o=this.compiledBundle.context.uniforms.find((function(e){return e.name===t}));o&&(r?(o.data=e,o.isReferer=!1,o.storageClass===QB.Uniform?this.model&&this.model.updateUniform(t,e):this.model&&this.model.updateBuffer(t,e)):(o.isReferer=!0,o.data=e))}}else Object.keys(t).forEach((function(e){n.setBinding(e,t[e])}));return this}},{key:"execute",value:(r=HI(VI.mark((function t(){var e,n,r=this,i=arguments;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:1,!this.dirty){t.next=6;break}return this.compiledBundle.context&&(e>1?this.compiledBundle.context.maxIteration=e:this.compiledBundle.context.maxIteration++),t.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter((function(t){return t.isReferer})).forEach((function(t){var e=t.data,n=t.name;r.model.confirmInput(e.model,n)})),n=0;n<e;n++)this.model.run();return this.engine.endFrame(),t.abrupt("return",this);case 12:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"getOutput",value:(n=HI(VI.mark((function t(){return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.model.readData());case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"compile",value:(e=HI(VI.mark((function t(){var e,n,r;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initPromise;case 2:return e=hN({},this.compiledBundle.context),n=this.engine.supportWebGPU?this.engine.useWGSL?tF.WGSL:tF.GLSL450:tF.GLSL100,r=this.compiledBundle.shaders[n],e.defines.filter((function(t){return t.runtime})).forEach((function(t){var e="".concat("__DefineValuePlaceholder__").concat(t.name);r=r.replace(e,"".concat(t.value))})),e.shader=r,e.uniforms.forEach((function(t){if(!t.data&&t.storageClass===QB.StorageBuffer){var n=1;t.type===XB.FloatArray?n=1:t.type===XB.Vector4FloatArray&&(n=4),t.data=new Float32Array(e.output.length*n).fill(0)}})),this.compiledBundle.context=e,t.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=t.sent;case 12:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}()).prototype,"engine",[iN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uN=GI(sN.prototype,"configService",[oN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aN=sN))||aN),qN=(fN=vO(),pN=BD(yO.MaterialComponentManager),fN((bN=yN=function(){function t(){NI(this,t),this.config=void 0,FI(this,"material",mN,this),this.entity=void 0,this.component=void 0}return jI(t,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t,e){this.entity=t,this.component=this.material.create(t),this.component.entity=t,this.component.type=e,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),t}(),yN.BASIC="basic",mN=GI((vN=bN).prototype,"material",[pN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gN=vN))||gN),KN=(xN=vO(),wN=BD(yO.MeshComponentManager),CN=BD(yO.CullableComponentManager),SN=BD(yO.TransformComponentManager),kN=BD(yO.Systems),EN=mO(yO.SceneGraphSystem),xN((ON=DN=function(){function t(){NI(this,t),this.attributes={},this.config=void 0,FI(this,"mesh",_N,this),FI(this,"cullable",TN,this),FI(this,"transform",PN,this),FI(this,"sceneGraphSystem",IN,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return jI(t,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t){this.entity=t,this.cullable.create(t),this.meshComponent=this.mesh.create(t),this.transformComponent=this.transform.create(t),this.onEntityCreated()}},{key:"setMaterial",value:function(t){return this.meshComponent.material=t,this}},{key:"setGeometry",value:function(t){return this.meshComponent.geometry=t,this}},{key:"setAttributes",value:function(t){var e=this;Object.keys(t).forEach((function(n){void 0!==t[n]&&t[n]!==e.attributes[n]&&(e.onAttributeChanged({name:n,data:t[n]}),e.attributes[n]=t[n])}))}},{key:"setVisible",value:function(t){var e=this;return this.meshComponent.visible=t,this.meshComponent.children.forEach((function(n){var r=e.mesh.getComponentByEntity(n);r&&(r.visible=t)})),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(t){return this.sceneGraphSystem.attach(this.entity,t.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(e),n)}},{key:"convertAttributeName2UniformName",value:function(t){return t}}]),t}(),DN.POINT="point",DN.LINE="line",DN.GRID="grid",_N=GI((AN=ON).prototype,"mesh",[wN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),TN=GI(AN.prototype,"cullable",[CN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),PN=GI(AN.prototype,"transform",[SN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),IN=GI(AN.prototype,"sceneGraphSystem",[kN,EN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),MN=AN))||MN),ZN=qm((function(t,e){t.exports=function(){var t=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},e=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t},n="\n";function r(t){return"undefined"!=typeof atob?atob(t):"base64:"+t}function i(t){var e=new Error("(regl) "+t);throw console.error(e),e}function o(t,e){t||i(e)}function a(t){return t?": "+t:""}function s(t,e,n){t in e||i("unknown parameter ("+t+")"+a(n)+". possible values: "+Object.keys(e).join())}function l(e,n){t(e)||i("invalid parameter type"+a(n)+". must be a typed array")}function u(t,e){switch(e){case"number":return"number"==typeof t;case"object":return"object"==typeof t;case"string":return"string"==typeof t;case"boolean":return"boolean"==typeof t;case"function":return"function"==typeof t;case"undefined":return void 0===t;case"symbol":return"symbol"==typeof t}}function c(t,e,n){u(t,e)||i("invalid parameter type"+a(n)+". expected "+e+", got "+typeof t)}function d(t,e){t>=0&&(0|t)===t||i("invalid parameter type, ("+t+")"+a(e)+". must be a nonnegative integer")}function h(t,e,n){e.indexOf(t)<0&&i("invalid value"+a(n)+". must be one of: "+e)}var f=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function p(t){Object.keys(t).forEach((function(t){f.indexOf(t)<0&&i('invalid regl constructor argument "'+t+'". must be one of '+f)}))}function g(t,e){for(t+="";t.length<e;)t=" "+t;return t}function v(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function m(t,e){this.number=t,this.line=e,this.errors=[]}function y(t,e,n){this.file=t,this.line=e,this.message=n}function b(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e);return r?r[1]:"unknown"}function x(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e);return r?r[1]:"unknown"}function w(t,e){var n=t.split("\n"),i=1,o=0,a={unknown:new v,0:new v};a.unknown.name=a[0].name=e||b(),a.unknown.lines.push(new m(0,""));for(var s=0;s<n.length;++s){var l=n[s],u=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(l);if(u)switch(u[1]){case"line":var c=/(\d+)(\s+\d+)?/.exec(u[2]);c&&(i=0|c[1],c[2]&&((o=0|c[2])in a||(a[o]=new v)));break;case"define":var d=/SHADER_NAME(_B64)?\s+(.*)$/.exec(u[2]);d&&(a[o].name=d[1]?r(d[2]):d[2])}a[o].lines.push(new m(i++,l))}return Object.keys(a).forEach((function(t){var e=a[t];e.lines.forEach((function(t){e.index[t.number]=t}))})),a}function C(t){var e=[];return t.split("\n").forEach((function(t){if(!(t.length<5)){var n=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(t);n?e.push(new y(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new y("unknown",0,t))}})),e}function S(t,e){e.forEach((function(e){var n=t[e.file];if(n){var r=n.index[e.line];if(r)return r.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)}))}function k(t,e,r,i,a){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(e),l=i===t.FRAGMENT_SHADER?"fragment":"vertex";I(r,"string",l+" shader source must be a string",a);var u=w(r,a),c=C(s);S(u,c),Object.keys(u).forEach((function(t){var e=u[t];if(e.hasErrors){var r=[""],i=[""];o("file number "+t+": "+e.name+"\n","color:red;text-decoration:underline;font-weight:bold"),e.lines.forEach((function(t){if(t.errors.length>0){o(g(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(t.line+n,"color:red; background-color:yellow; font-weight:bold");var e=0;t.errors.forEach((function(r){var i=r.message,a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(i);if(a){var s=a[1];switch(i=a[2],s){case"assign":s="="}e=Math.max(t.line.indexOf(s,e),0)}else e=0;o(g("| ",6)),o(g("^^^",e+3)+n,"font-weight:bold"),o(g("| ",6)),o(i+n,"font-weight:bold")})),o(g("| ",6)+n)}else o(g(t.number,4)+"|  "),o(t.line+n,"color:red")})),"undefined"==typeof document||window.chrome?console.log(r.join("")):(i[0]=r.join("%c"),console.log.apply(console,i))}function o(t,e){r.push(t),i.push(e||"")}})),o.raise("Error compiling "+l+" shader, "+u[0].name)}}function E(t,e,r,i,a){if(!t.getProgramParameter(e,t.LINK_STATUS)){var s=t.getProgramInfoLog(e),l=w(r,a),u='Error linking program with vertex shader, "'+w(i,a)[0].name+'", and fragment shader "'+l[0].name+'"';"undefined"!=typeof document?console.log("%c"+u+n+"%c"+s,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(u+n+s),o.raise(u)}}function M(t){t._commandRef=b()}function A(t,e,n,r){function i(t){return t?r.id(t):0}function o(t,e){Object.keys(e).forEach((function(e){t[r.id(e)]=!0}))}M(t),t._fragId=i(t.static.frag),t._vertId=i(t.static.vert);var a=t._uniformSet={};o(a,e.static),o(a,e.dynamic);var s=t._attributeSet={};o(s,n.static),o(s,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic}function _(t,e){var n=x();i(t+" in command "+(e||b())+("unknown"===n?"":" called from "+n))}function T(t,e,n){t||_(e,n||b())}function P(t,e,n,r){t in e||_("unknown parameter ("+t+")"+a(n)+". possible values: "+Object.keys(e).join(),r||b())}function I(t,e,n,r){u(t,e)||_("invalid parameter type"+a(n)+". expected "+e+", got "+typeof t,r||b())}function D(t){t()}function O(t,e,n){t.texture?h(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):h(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")}var R=33071,L=9728,B=9984,F=9985,N=9986,z=9987,j=5121,G=5122,U=5123,$=5124,V=5125,W=5126,H=32819,Y=32820,X=33635,q=34042,K=36193,Z={};function Q(t,e){return t===Y||t===H||t===X?2:t===q?4:Z[t]*e}function J(t){return!(t&t-1||!t)}function tt(t,e,n){var r,i=e.width,a=e.height,s=e.channels;o(i>0&&i<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),t.wrapS===R&&t.wrapT===R||o(J(i)&&J(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==i&&1!==a&&o(t.minFilter!==B&&t.minFilter!==N&&t.minFilter!==F&&t.minFilter!==z,"min filter requires mipmap"):(o(J(i)&&J(a),"texture must be a square power of 2 to support mipmapping"),o(e.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),e.type===W&&(n.extensions.indexOf("oes_texture_float_linear")<0&&o(t.minFilter===L&&t.magFilter===L,"filter not supported, must enable oes_texture_float_linear"),o(!t.genMipmaps,"mipmap generation not supported with float textures"));var l=e.images;for(r=0;r<16;++r)if(l[r]){var u=i>>r,c=a>>r;o(e.mipmask&1<<r,"missing mipmap data");var d=l[r];if(o(d.width===u&&d.height===c,"invalid shape for mip images"),o(d.format===e.format&&d.internalformat===e.internalformat&&d.type===e.type,"incompatible type for mip image"),d.compressed);else if(d.data){var h=Math.ceil(Q(d.type,s)*u/d.unpackAlignment)*d.unpackAlignment;o(d.data.byteLength===h*c,"invalid data for image, buffer size is inconsistent with image format")}else d.element||d.copy}else t.genMipmaps||o(0==(e.mipmask&1<<r),"extra mipmap data");e.compressed&&o(!t.genMipmaps,"mipmap generation for compressed images not supported")}function et(t,e,n,r){var i=t.width,a=t.height,s=t.channels;o(i>0&&i<=r.maxTextureSize&&a>0&&a<=r.maxTextureSize,"invalid texture shape"),o(i===a,"cube map must be square"),o(e.wrapS===R&&e.wrapT===R,"wrap mode not supported by cube map");for(var l=0;l<n.length;++l){var u=n[l];o(u.width===i&&u.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(o(!u.compressed,"can not generate mipmap for compressed textures"),o(1===u.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=u.images,d=0;d<16;++d){var h=c[d];if(h){var f=i>>d,p=a>>d;o(u.mipmask&1<<d,"missing mipmap data"),o(h.width===f&&h.height===p,"invalid shape for mip images"),o(h.format===t.format&&h.internalformat===t.internalformat&&h.type===t.type,"incompatible type for mip image"),h.compressed||(h.data?o(h.data.byteLength===f*p*Math.max(Q(h.type,s),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}Z[5120]=Z[j]=1,Z[G]=Z[U]=Z[K]=Z[X]=Z[H]=Z[Y]=2,Z[$]=Z[V]=Z[W]=Z[q]=4;var nt=e(o,{optional:D,raise:i,commandRaise:_,command:T,parameter:s,commandParameter:P,constructor:p,type:c,commandType:I,isTypedArray:l,nni:d,oneOf:h,shaderError:k,linkError:E,callSite:x,saveCommandRef:M,saveDrawInfo:A,framebufferFormat:O,guessCommand:b,texture2D:tt,textureCube:et}),rt=0,it=0,ot=5,at=6;function st(t,e){this.id=rt++,this.type=t,this.data=e}function lt(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function ut(t){if(0===t.length)return[];var e=t.charAt(0),n=t.charAt(t.length-1);if(t.length>1&&e===n&&('"'===e||"'"===e))return['"'+lt(t.substr(1,t.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(r)return ut(t.substr(0,r.index)).concat(ut(r[1])).concat(ut(t.substr(r.index+r[0].length)));var i=t.split(".");if(1===i.length)return['"'+lt(t)+'"'];for(var o=[],a=0;a<i.length;++a)o=o.concat(ut(i[a]));return o}function ct(t){return"["+ut(t).join("][")+"]"}function dt(t,e){return new st(t,ct(e+""))}function ht(t){return"function"==typeof t&&!t._reglType||t instanceof st}function ft(t,e){return"function"==typeof t?new st(it,t):"number"==typeof t||"boolean"==typeof t?new st(ot,t):Array.isArray(t)?new st(at,t.map(((t,n)=>ft(t,e+"["+n+"]")))):t instanceof st?t:void nt(!1,"invalid option type in uniform "+e)}var pt={DynamicVariable:st,define:dt,isDynamic:ht,unbox:ft,accessor:ct},gt={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},vt="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function mt(){var t={"":0},e=[""];return{id:function(n){var r=t[n];return r||(r=t[n]=e.length,e.push(n),r)},str:function(t){return e[t]}}}function yt(t,n,r){var i,o=document.createElement("canvas");function a(){var n=window.innerWidth,i=window.innerHeight;if(t!==document.body){var a=t.getBoundingClientRect();n=a.right-a.left,i=a.bottom-a.top}o.width=r*n,o.height=r*i,e(o.style,{width:n+"px",height:i+"px"})}function s(){i?i.disconnect():window.removeEventListener("resize",a),t.removeChild(o)}return e(o.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(o),t===document.body&&(o.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"==typeof ResizeObserver?(i=new ResizeObserver((function(){setTimeout(a)}))).observe(t):window.addEventListener("resize",a,!1),a(),{canvas:o,onDestroy:s}}function bt(t,e){function n(n){try{return t.getContext(n,e)}catch(PCt){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function xt(t){return"string"==typeof t.nodeName&&"function"==typeof t.appendChild&&"function"==typeof t.getBoundingClientRect}function wt(t){return"function"==typeof t.drawArrays||"function"==typeof t.drawElements}function Ct(t){return"string"==typeof t?t.split():(nt(Array.isArray(t),"invalid extension array"),t)}function St(t){return"string"==typeof t?(nt("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function kt(t){var e,n,r,i,o=t||{},a={},s=[],l=[],u="undefined"==typeof window?1:window.devicePixelRatio,c=!1,d=function(t){t&&nt.raise(t)},h=function(){};if("string"==typeof o?(nt("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),e=document.querySelector(o),nt(e,"invalid query string for element")):"object"==typeof o?xt(o)?e=o:wt(o)?r=(i=o).canvas:(nt.constructor(o),"gl"in o?i=o.gl:"canvas"in o?r=St(o.canvas):"container"in o&&(n=St(o.container)),"attributes"in o&&(a=o.attributes,nt.type(a,"object","invalid context attributes")),"extensions"in o&&(s=Ct(o.extensions)),"optionalExtensions"in o&&(l=Ct(o.optionalExtensions)),"onDone"in o&&(nt.type(o.onDone,"function","invalid or missing onDone callback"),d=o.onDone),"profile"in o&&(c=!!o.profile),"pixelRatio"in o&&(u=+o.pixelRatio,nt(u>0,"invalid pixel ratio"))):nt.raise("invalid arguments to regl"),e&&("canvas"===e.nodeName.toLowerCase()?r=e:n=e),!i){if(!r){nt("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var f=yt(n||document.body,d,u);if(!f)return null;r=f.canvas,h=f.onDestroy}void 0===a.premultipliedAlpha&&(a.premultipliedAlpha=!0),i=bt(r,a)}return i?{gl:i,canvas:r,container:n,extensions:s,optionalExtensions:l,pixelRatio:u,profile:c,onDone:d,onDestroy:h}:(h(),d("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Et(t,e){var n={};function r(e){nt.type(e,"string","extension name must be string");var r,i=e.toLowerCase();try{r=n[i]=t.getExtension(i)}catch(PCt){}return!!r}for(var i=0;i<e.extensions.length;++i){var o=e.extensions[i];if(!r(o))return e.onDestroy(),e.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(t){if(n[t]&&!r(t))throw new Error("(regl): error restoring extension "+t)}))}}}function Mt(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}var At=5120,_t=5121,Tt=5122,Pt=5123,It=5124,Dt=5125,Ot=5126;function Rt(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}function Lt(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1}function Bt(){var t=Mt(8,(function(){return[]}));function e(e){var n=Rt(e),r=t[Lt(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(e){t[Lt(e.byteLength)>>2].push(e)}function r(t,n){var r=null;switch(t){case At:r=new Int8Array(e(n),0,n);break;case _t:r=new Uint8Array(e(n),0,n);break;case Tt:r=new Int16Array(e(2*n),0,n);break;case Pt:r=new Uint16Array(e(2*n),0,n);break;case It:r=new Int32Array(e(4*n),0,n);break;case Dt:r=new Uint32Array(e(4*n),0,n);break;case Ot:r=new Float32Array(e(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r}function i(t){n(t.buffer)}return{alloc:e,free:n,allocType:r,freeType:i}}var Ft=Bt();Ft.zero=Bt();var Nt=3408,zt=3410,jt=3411,Gt=3412,Ut=3413,$t=3414,Vt=3415,Wt=33901,Ht=33902,Yt=3379,Xt=3386,qt=34921,Kt=36347,Zt=36348,Qt=35661,Jt=35660,te=34930,ee=36349,ne=34076,re=34024,ie=7936,oe=7937,ae=7938,se=35724,le=34047,ue=36063,ce=34852,de=3553,he=34067,fe=34069,pe=33984,ge=6408,ve=5126,me=5121,ye=36160,be=36053,xe=36064,we=16384,Ce=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(le));var r=1,i=1;e.webgl_draw_buffers&&(r=t.getParameter(ce),i=t.getParameter(ue));var o=!!e.oes_texture_float;if(o){var a=t.createTexture();t.bindTexture(de,a),t.texImage2D(de,0,ge,1,1,0,ge,ve,null);var s=t.createFramebuffer();if(t.bindFramebuffer(ye,s),t.framebufferTexture2D(ye,xe,de,a,0),t.bindTexture(de,null),t.checkFramebufferStatus(ye)!==be)o=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(we);var l=Ft.allocType(ve,4);t.readPixels(0,0,1,1,ge,ve,l),t.getError()?o=!1:(t.deleteFramebuffer(s),t.deleteTexture(a),o=1===l[0]),Ft.freeType(l)}}var u=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var c=t.createTexture(),d=Ft.allocType(me,36);t.activeTexture(pe),t.bindTexture(he,c),t.texImage2D(fe,0,ge,3,3,0,ge,me,d),Ft.freeType(d),t.bindTexture(he,null),t.deleteTexture(c),u=!t.getError()}return{colorBits:[t.getParameter(zt),t.getParameter(jt),t.getParameter(Gt),t.getParameter(Ut)],depthBits:t.getParameter($t),stencilBits:t.getParameter(Vt),subpixelBits:t.getParameter(Nt),extensions:Object.keys(e).filter((function(t){return!!e[t]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:t.getParameter(Wt),lineWidthDims:t.getParameter(Ht),maxViewportDims:t.getParameter(Xt),maxCombinedTextureUnits:t.getParameter(Qt),maxCubeMapSize:t.getParameter(ne),maxRenderbufferSize:t.getParameter(re),maxTextureUnits:t.getParameter(te),maxTextureSize:t.getParameter(Yt),maxAttributes:t.getParameter(qt),maxVertexUniforms:t.getParameter(Kt),maxVertexTextureUnits:t.getParameter(Jt),maxVaryingVectors:t.getParameter(Zt),maxFragmentUniforms:t.getParameter(ee),glsl:t.getParameter(se),renderer:t.getParameter(oe),vendor:t.getParameter(ie),version:t.getParameter(ae),readFloat:o,npotTextureCube:u}};function Se(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||t(e.data))}var ke=function(t){return Object.keys(t).map((function(e){return t[e]}))},Ee={shape:Ie,flatten:Pe};function Me(t,e,n){for(var r=0;r<e;++r)n[r]=t[r]}function Ae(t,e,n,r){for(var i=0,o=0;o<e;++o)for(var a=t[o],s=0;s<n;++s)r[i++]=a[s]}function _e(t,e,n,r,i,o){for(var a=o,s=0;s<e;++s)for(var l=t[s],u=0;u<n;++u)for(var c=l[u],d=0;d<r;++d)i[a++]=c[d]}function Te(t,e,n,r,i){for(var o=1,a=n+1;a<e.length;++a)o*=e[a];var s=e[n];if(e.length-n==4){var l=e[n+1],u=e[n+2],c=e[n+3];for(a=0;a<s;++a)_e(t[a],l,u,c,r,i),i+=o}else for(a=0;a<s;++a)Te(t[a],e,n+1,r,i),i+=o}function Pe(t,e,n,r){var i=1;if(e.length)for(var o=0;o<e.length;++o)i*=e[o];else i=0;var a=r||Ft.allocType(n,i);switch(e.length){case 0:break;case 1:Me(t,e[0],a);break;case 2:Ae(t,e[0],e[1],a);break;case 3:_e(t,e[0],e[1],e[2],a,0);break;default:Te(t,e,0,a,0)}return a}function Ie(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e}var De={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Oe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Re={dynamic:35048,stream:35040,static:35044},Le=Ee.flatten,Be=Ee.shape,Fe=35044,Ne=35040,ze=5121,je=5126,Ge=[];function Ue(t){return 0|De[Object.prototype.toString.call(t)]}function $e(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function Ve(t,e,n,r,i,o,a){for(var s=0,l=0;l<n;++l)for(var u=0;u<r;++u)t[s++]=e[i*l+o*u+a]}function We(e,n,r,i){var o=0,a={};function s(t){this.id=o++,this.buffer=e.createBuffer(),this.type=t,this.usage=Fe,this.byteLength=0,this.dimension=1,this.dtype=ze,this.persistentData=null,r.profile&&(this.stats={size:0})}s.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){f(this)};var l=[];function u(t,e){var n=l.pop();return n||(n=new s(t)),n.bind(),h(n,e,Ne,0,1,!1),n}function c(t){l.push(t)}function d(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function h(e,n,r,i,o,a){var s,l;if(e.usage=r,Array.isArray(n)){if(e.dtype=i||je,n.length>0)if(Array.isArray(n[0])){s=Be(n);for(var u=1,c=1;c<s.length;++c)u*=s[c];e.dimension=u,d(e,l=Le(n,s,e.dtype),r),a?e.persistentData=l:Ft.freeType(l)}else if("number"==typeof n[0]){e.dimension=o;var h=Ft.allocType(e.dtype,n.length);$e(h,n),d(e,h,r),a?e.persistentData=h:Ft.freeType(h)}else t(n[0])?(e.dimension=n[0].length,e.dtype=i||Ue(n[0])||je,d(e,l=Le(n,[n.length,n[0].length],e.dtype),r),a?e.persistentData=l:Ft.freeType(l)):nt.raise("invalid buffer data")}else if(t(n))e.dtype=i||Ue(n),e.dimension=o,d(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(Se(n)){s=n.shape;var f=n.stride,p=n.offset,g=0,v=0,m=0,y=0;1===s.length?(g=s[0],v=1,m=f[0],y=0):2===s.length?(g=s[0],v=s[1],m=f[0],y=f[1]):nt.raise("invalid shape"),e.dtype=i||Ue(n.data)||je,e.dimension=v;var b=Ft.allocType(e.dtype,g*v);Ve(b,n.data,g,v,m,y,p),d(e,b,r),a?e.persistentData=b:Ft.freeType(b)}else n instanceof ArrayBuffer?(e.dtype=ze,e.dimension=o,d(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n)))):nt.raise("invalid buffer data")}function f(t){n.bufferCount--,i(t);var r=t.buffer;nt(r,"buffer must not be deleted already"),e.deleteBuffer(r),t.buffer=null,delete a[t.id]}function p(i,o,l,u){n.bufferCount++;var c=new s(o);function d(n){var i=Fe,o=null,a=0,s=0,l=1;return Array.isArray(n)||t(n)||Se(n)||n instanceof ArrayBuffer?o=n:"number"==typeof n?a=0|n:n&&(nt.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(nt(null===o||Array.isArray(o)||t(o)||Se(o),"invalid data for buffer"),o=n.data),"usage"in n&&(nt.parameter(n.usage,Re,"invalid buffer usage"),i=Re[n.usage]),"type"in n&&(nt.parameter(n.type,Oe,"invalid buffer type"),s=Oe[n.type]),"dimension"in n&&(nt.type(n.dimension,"number","invalid dimension"),l=0|n.dimension),"length"in n&&(nt.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),c.bind(),o?h(c,o,i,s,l,u):(a&&e.bufferData(c.type,a,i),c.dtype=s||ze,c.usage=i,c.dimension=l,c.byteLength=a),r.profile&&(c.stats.size=c.byteLength*Ge[c.dtype]),d}function p(t,n){nt(n+t.byteLength<=c.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+c.byteLength),e.bufferSubData(c.type,n,t)}function g(e,n){var r,i=0|(n||0);if(c.bind(),t(e)||e instanceof ArrayBuffer)p(e,i);else if(Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var o=Ft.allocType(c.dtype,e.length);$e(o,e),p(o,i),Ft.freeType(o)}else if(Array.isArray(e[0])||t(e[0])){r=Be(e);var a=Le(e,r,c.dtype);p(a,i),Ft.freeType(a)}else nt.raise("invalid buffer data")}else if(Se(e)){r=e.shape;var s=e.stride,l=0,u=0,h=0,f=0;1===r.length?(l=r[0],u=1,h=s[0],f=0):2===r.length?(l=r[0],u=r[1],h=s[0],f=s[1]):nt.raise("invalid shape");var g=Array.isArray(e.data)?c.dtype:Ue(e.data),v=Ft.allocType(g,l*u);Ve(v,e.data,l,u,h,f,e.offset),p(v,i),Ft.freeType(v)}else nt.raise("invalid data for buffer subdata");return d}return a[c.id]=c,l||d(i),d._reglType="buffer",d._buffer=c,d.subdata=g,r.profile&&(d.stats=c.stats),d.destroy=function(){f(c)},d}function g(){ke(a).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))}return r.profile&&(n.getTotalBufferSize=function(){var t=0;return Object.keys(a).forEach((function(e){t+=a[e].stats.size})),t}),{create:p,createStream:u,destroyStream:c,clear:function(){ke(a).forEach(f),l.forEach(f)},getBuffer:function(t){return t&&t._buffer instanceof s?t._buffer:null},restore:g,_initBuffer:h}}Ge[5120]=1,Ge[5122]=2,Ge[5124]=4,Ge[5121]=1,Ge[5123]=2,Ge[5125]=4,Ge[5126]=4;var He={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ye=0,Xe=1,qe=4,Ke=5120,Ze=5121,Qe=5122,Je=5123,tn=5124,en=5125,nn=34963,rn=35040,on=35044;function an(e,n,r,i){var o={},a=0,s={uint8:Ze,uint16:Je};function l(t){this.id=a++,o[this.id]=this,this.buffer=t,this.primType=qe,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(s.uint32=en),l.prototype.bind=function(){this.buffer.bind()};var u=[];function c(t){var e=u.pop();return e||(e=new l(r.create(null,nn,!0,!1)._buffer)),h(e,t,rn,-1,-1,0,0),e}function d(t){u.push(t)}function h(i,o,a,s,l,u,c){var d;if(i.buffer.bind(),o){var h=c;c||t(o)&&(!Se(o)||t(o.data))||(h=n.oes_element_index_uint?en:Je),r._initBuffer(i.buffer,o,a,h,3)}else e.bufferData(nn,u,a),i.buffer.dtype=d||Ze,i.buffer.usage=a,i.buffer.dimension=3,i.buffer.byteLength=u;if(d=c,!c){switch(i.buffer.dtype){case Ze:case Ke:d=Ze;break;case Je:case Qe:d=Je;break;case en:case tn:d=en;break;default:nt.raise("unsupported type for element array")}i.buffer.dtype=d}i.type=d,nt(d!==en||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var f=l;f<0&&(f=i.buffer.byteLength,d===Je?f>>=1:d===en&&(f>>=2)),i.vertCount=f;var p=s;if(s<0){p=qe;var g=i.buffer.dimension;1===g&&(p=Ye),2===g&&(p=Xe),3===g&&(p=qe)}i.primType=p}function f(t){i.elementsCount--,nt(null!==t.buffer,"must not double destroy elements"),delete o[t.id],t.buffer.destroy(),t.buffer=null}function p(e,n){var o=r.create(null,nn,!0),a=new l(o._buffer);function u(e){if(e)if("number"==typeof e)o(e),a.primType=qe,a.vertCount=0|e,a.type=Ze;else{var n=null,r=on,i=-1,l=-1,c=0,d=0;Array.isArray(e)||t(e)||Se(e)?n=e:(nt.type(e,"object","invalid arguments for elements"),"data"in e&&(n=e.data,nt(Array.isArray(n)||t(n)||Se(n),"invalid data for element buffer")),"usage"in e&&(nt.parameter(e.usage,Re,"invalid element buffer usage"),r=Re[e.usage]),"primitive"in e&&(nt.parameter(e.primitive,He,"invalid element buffer primitive"),i=He[e.primitive]),"count"in e&&(nt("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),l=0|e.count),"type"in e&&(nt.parameter(e.type,s,"invalid buffer type"),d=s[e.type]),"length"in e?c=0|e.length:(c=l,d===Je||d===Qe?c*=2:d!==en&&d!==tn||(c*=4))),h(a,n,r,i,l,c,d)}else o(),a.primType=qe,a.vertCount=0,a.type=Ze;return u}return i.elementsCount++,u(e),u._reglType="elements",u._elements=a,u.subdata=function(t,e){return o.subdata(t,e),u},u.destroy=function(){f(a)},u}return{create:p,createStream:c,destroyStream:d,getElements:function(t){return"function"==typeof t&&t._elements instanceof l?t._elements:null},clear:function(){ke(o).forEach(f)}}}var sn=new Float32Array(1),ln=new Uint32Array(sn.buffer),un=5123;function cn(t){for(var e=Ft.allocType(un,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{sn[0]=t[n];var r=ln[0],i=r>>>31<<15,o=(r<<1>>>24)-127,a=r>>13&1023;if(o<-24)e[n]=i;else if(o<-14){var s=-14-o;e[n]=i+(a+1024>>s)}else e[n]=o>15?i+31744:i+(o+15<<10)+a}return e}function dn(e){return Array.isArray(e)||t(e)}var hn=function(t){return!(t&t-1||!t)},fn=34467,pn=3553,gn=34067,vn=34069,mn=6408,yn=6406,bn=6407,xn=6409,wn=6410,Cn=32854,Sn=32855,kn=36194,En=32819,Mn=32820,An=33635,_n=34042,Tn=6402,Pn=34041,In=35904,Dn=35906,On=36193,Rn=33776,Ln=33777,Bn=33778,Fn=33779,Nn=35986,zn=35987,jn=34798,Gn=35840,Un=35841,$n=35842,Vn=35843,Wn=36196,Hn=5121,Yn=5123,Xn=5125,qn=5126,Kn=10242,Zn=10243,Qn=10497,Jn=33071,tr=33648,er=10240,nr=10241,rr=9728,ir=9729,or=9984,ar=9985,sr=9986,lr=9987,ur=33170,cr=4352,dr=4353,hr=4354,fr=34046,pr=3317,gr=37440,vr=37441,mr=37443,yr=37444,br=33984,xr=[or,sr,ar,lr],wr=[0,xn,wn,bn,mn],Cr={};function Sr(t){return"[object "+t+"]"}Cr[xn]=Cr[yn]=Cr[Tn]=1,Cr[Pn]=Cr[wn]=2,Cr[bn]=Cr[In]=3,Cr[mn]=Cr[Dn]=4;var kr=Sr("HTMLCanvasElement"),Er=Sr("OffscreenCanvas"),Mr=Sr("CanvasRenderingContext2D"),Ar=Sr("ImageBitmap"),_r=Sr("HTMLImageElement"),Tr=Sr("HTMLVideoElement"),Pr=Object.keys(De).concat([kr,Er,Mr,Ar,_r,Tr]),Ir=[];Ir[Hn]=1,Ir[qn]=4,Ir[On]=2,Ir[Yn]=2,Ir[Xn]=4;var Dr=[];function Or(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function Rr(t){return!!Array.isArray(t)&&!(0===t.length||!dn(t[0]))}function Lr(t){return Object.prototype.toString.call(t)}function Br(t){return Lr(t)===kr}function Fr(t){return Lr(t)===Er}function Nr(t){return Lr(t)===Mr}function zr(t){return Lr(t)===Ar}function jr(t){return Lr(t)===_r}function Gr(t){return Lr(t)===Tr}function Ur(t){if(!t)return!1;var e=Lr(t);return Pr.indexOf(e)>=0||Or(t)||Rr(t)||Se(t)}function $r(t){return 0|De[Object.prototype.toString.call(t)]}function Vr(t,e){var n=e.length;switch(t.type){case Hn:case Yn:case Xn:case qn:var r=Ft.allocType(t.type,n);r.set(e),t.data=r;break;case On:t.data=cn(e);break;default:nt.raise("unsupported texture type, must specify a typed array")}}function Wr(t,e){return Ft.allocType(t.type===On?qn:t.type,e)}function Hr(t,e){t.type===On?(t.data=cn(e),Ft.freeType(e)):t.data=e}function Yr(t,e,n,r,i,o){for(var a=t.width,s=t.height,l=t.channels,u=Wr(t,a*s*l),c=0,d=0;d<s;++d)for(var h=0;h<a;++h)for(var f=0;f<l;++f)u[c++]=e[n*h+r*d+i*f+o];Hr(t,u)}function Xr(t,e,n,r,i,o){var a;if(a=void 0!==Dr[t]?Dr[t]:Cr[t]*Ir[e],o&&(a*=6),i){for(var s=0,l=n;l>=1;)s+=a*l*l,l/=2;return s}return a*n*r}function qr(n,r,i,o,a,s,l){var u={"don't care":cr,"dont care":cr,nice:hr,fast:dr},c={repeat:Qn,clamp:Jn,mirror:tr},d={nearest:rr,linear:ir},h=e({mipmap:lr,"nearest mipmap nearest":or,"linear mipmap nearest":ar,"nearest mipmap linear":sr,"linear mipmap linear":lr},d),f={none:0,browser:yr},p={uint8:Hn,rgba4:En,rgb565:An,"rgb5 a1":Mn},g={alpha:yn,luminance:xn,"luminance alpha":wn,rgb:bn,rgba:mn,rgba4:Cn,"rgb5 a1":Sn,rgb565:kn},v={};r.ext_srgb&&(g.srgb=In,g.srgba=Dn),r.oes_texture_float&&(p.float32=p.float=qn),r.oes_texture_half_float&&(p.float16=p["half float"]=On),r.webgl_depth_texture&&(e(g,{depth:Tn,"depth stencil":Pn}),e(p,{uint16:Yn,uint32:Xn,"depth stencil":_n})),r.webgl_compressed_texture_s3tc&&e(v,{"rgb s3tc dxt1":Rn,"rgba s3tc dxt1":Ln,"rgba s3tc dxt3":Bn,"rgba s3tc dxt5":Fn}),r.webgl_compressed_texture_atc&&e(v,{"rgb atc":Nn,"rgba atc explicit alpha":zn,"rgba atc interpolated alpha":jn}),r.webgl_compressed_texture_pvrtc&&e(v,{"rgb pvrtc 4bppv1":Gn,"rgb pvrtc 2bppv1":Un,"rgba pvrtc 4bppv1":$n,"rgba pvrtc 2bppv1":Vn}),r.webgl_compressed_texture_etc1&&(v["rgb etc1"]=Wn);var m=Array.prototype.slice.call(n.getParameter(fn));Object.keys(v).forEach((function(t){var e=v[t];m.indexOf(e)>=0&&(g[t]=e)}));var y=Object.keys(g);i.textureFormats=y;var b=[];Object.keys(g).forEach((function(t){var e=g[t];b[e]=t}));var x=[];Object.keys(p).forEach((function(t){var e=p[t];x[e]=t}));var w=[];Object.keys(d).forEach((function(t){var e=d[t];w[e]=t}));var C=[];Object.keys(h).forEach((function(t){var e=h[t];C[e]=t}));var S=[];Object.keys(c).forEach((function(t){var e=c[t];S[e]=t}));var k=y.reduce((function(t,e){var n=g[e];return n===xn||n===yn||n===xn||n===wn||n===Tn||n===Pn||r.ext_srgb&&(n===In||n===Dn)?t[n]=n:n===Sn||e.indexOf("rgba")>=0?t[n]=mn:t[n]=bn,t}),{});function E(){this.internalformat=mn,this.format=mn,this.type=Hn,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=yr,this.width=0,this.height=0,this.channels=0}function M(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function A(t,e){if("object"==typeof e&&e){if("premultiplyAlpha"in e&&(nt.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(nt.type(e.flipY,"boolean","invalid texture flip"),t.flipY=e.flipY),"alignment"in e&&(nt.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=e.alignment),"colorSpace"in e&&(nt.parameter(e.colorSpace,f,"invalid colorSpace"),t.colorSpace=f[e.colorSpace]),"type"in e){var n=e.type;nt(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),nt(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),nt(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),nt.parameter(n,p,"invalid texture type"),t.type=p[n]}var o=t.width,a=t.height,s=t.channels,l=!1;"shape"in e?(nt(Array.isArray(e.shape)&&e.shape.length>=2,"shape must be an array"),o=e.shape[0],a=e.shape[1],3===e.shape.length&&(s=e.shape[2],nt(s>0&&s<=4,"invalid number of channels"),l=!0),nt(o>=0&&o<=i.maxTextureSize,"invalid width"),nt(a>=0&&a<=i.maxTextureSize,"invalid height")):("radius"in e&&(o=a=e.radius,nt(o>=0&&o<=i.maxTextureSize,"invalid radius")),"width"in e&&(o=e.width,nt(o>=0&&o<=i.maxTextureSize,"invalid width")),"height"in e&&(a=e.height,nt(a>=0&&a<=i.maxTextureSize,"invalid height")),"channels"in e&&(s=e.channels,nt(s>0&&s<=4,"invalid number of channels"),l=!0)),t.width=0|o,t.height=0|a,t.channels=0|s;var u=!1;if("format"in e){var c=e.format;nt(r.webgl_depth_texture||!("depth"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),nt.parameter(c,g,"invalid texture format");var d=t.internalformat=g[c];t.format=k[d],c in p&&("type"in e||(t.type=p[c])),c in v&&(t.compressed=!0),u=!0}!l&&u?t.channels=Cr[t.format]:l&&!u?t.channels!==wr[t.format]&&(t.format=t.internalformat=wr[t.channels]):u&&l&&nt(t.channels===Cr[t.format],"number of channels inconsistent with specified format")}}function _(t){n.pixelStorei(gr,t.flipY),n.pixelStorei(vr,t.premultiplyAlpha),n.pixelStorei(mr,t.colorSpace),n.pixelStorei(pr,t.unpackAlignment)}function T(){E.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function P(e,n){var r=null;if(Ur(n)?r=n:n&&(nt.type(n,"object","invalid pixel data type"),A(e,n),"x"in n&&(e.xOffset=0|n.x),"y"in n&&(e.yOffset=0|n.y),Ur(n.data)&&(r=n.data)),nt(!e.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){nt(!r,"can not specify copy and data field for the same texture");var o=a.viewportWidth,s=a.viewportHeight;e.width=e.width||o-e.xOffset,e.height=e.height||s-e.yOffset,e.needsCopy=!0,nt(e.xOffset>=0&&e.xOffset<o&&e.yOffset>=0&&e.yOffset<s&&e.width>0&&e.width<=o&&e.height>0&&e.height<=s,"copy texture read out of bounds")}else if(r){if(t(r))e.channels=e.channels||4,e.data=r,"type"in n||e.type!==Hn||(e.type=$r(r));else if(Or(r))e.channels=e.channels||4,Vr(e,r),e.alignment=1,e.needsFree=!0;else if(Se(r)){var l=r.data;Array.isArray(l)||e.type!==Hn||(e.type=$r(l));var u,c,d,h,f,p,g=r.shape,v=r.stride;3===g.length?(d=g[2],p=v[2]):(nt(2===g.length,"invalid ndarray pixel data, must be 2 or 3D"),d=1,p=1),u=g[0],c=g[1],h=v[0],f=v[1],e.alignment=1,e.width=u,e.height=c,e.channels=d,e.format=e.internalformat=wr[d],e.needsFree=!0,Yr(e,l,h,f,p,r.offset)}else if(Br(r)||Fr(r)||Nr(r))Br(r)||Fr(r)?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(zr(r))e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(jr(r))e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(Gr(r))e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(Rr(r)){var m=e.width||r[0].length,y=e.height||r.length,b=e.channels;b=dn(r[0][0])?b||r[0][0].length:b||1;for(var x=Ee.shape(r),w=1,C=0;C<x.length;++C)w*=x[C];var S=Wr(e,w);Ee.flatten(r,x,"",S),Hr(e,S),e.alignment=1,e.width=m,e.height=y,e.channels=b,e.format=e.internalformat=wr[b],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;e.type===qn?nt(i.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):e.type===On&&nt(i.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function I(t,e,r){var i=t.element,a=t.data,s=t.internalformat,l=t.format,u=t.type,c=t.width,d=t.height;_(t),i?n.texImage2D(e,r,l,l,u,i):t.compressed?n.compressedTexImage2D(e,r,s,c,d,0,a):t.needsCopy?(o(),n.copyTexImage2D(e,r,l,t.xOffset,t.yOffset,c,d,0)):n.texImage2D(e,r,l,c,d,0,l,u,a||null)}function D(t,e,r,i,a){var s=t.element,l=t.data,u=t.internalformat,c=t.format,d=t.type,h=t.width,f=t.height;_(t),s?n.texSubImage2D(e,a,r,i,c,d,s):t.compressed?n.compressedTexSubImage2D(e,a,r,i,u,h,f,l):t.needsCopy?(o(),n.copyTexSubImage2D(e,a,r,i,t.xOffset,t.yOffset,h,f)):n.texSubImage2D(e,a,r,i,h,f,c,d,l)}var O=[];function R(){return O.pop()||new T}function L(t){t.needsFree&&Ft.freeType(t.data),T.call(t),O.push(t)}function B(){E.call(this),this.genMipmaps=!1,this.mipmapHint=cr,this.mipmask=0,this.images=Array(16)}function F(t,e,n){var r=t.images[0]=R();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function N(t,e){var n=null;if(Ur(e))M(n=t.images[0]=R(),t),P(n,e),t.mipmask=1;else if(A(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,i=0;i<r.length;++i)M(n=t.images[i]=R(),t),n.width>>=i,n.height>>=i,P(n,r[i]),t.mipmask|=1<<i;else M(n=t.images[0]=R(),t),P(n,e),t.mipmask=1;M(t,t.images[0]),!t.compressed||t.internalformat!==Rn&&t.internalformat!==Ln&&t.internalformat!==Bn&&t.internalformat!==Fn||nt(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function z(t,e){for(var n=t.images,r=0;r<n.length;++r){if(!n[r])return;I(n[r],e,r)}}var j=[];function G(){var t=j.pop()||new B;E.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function U(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&L(e[n]),e[n]=null;j.push(t)}function $(){this.minFilter=rr,this.magFilter=rr,this.wrapS=Jn,this.wrapT=Jn,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=cr}function V(t,e){if("min"in e){var n=e.min;nt.parameter(n,h),t.minFilter=h[n],xr.indexOf(t.minFilter)>=0&&!("faces"in e)&&(t.genMipmaps=!0)}if("mag"in e){var r=e.mag;nt.parameter(r,d),t.magFilter=d[r]}var o=t.wrapS,a=t.wrapT;if("wrap"in e){var s=e.wrap;"string"==typeof s?(nt.parameter(s,c),o=a=c[s]):Array.isArray(s)&&(nt.parameter(s[0],c),nt.parameter(s[1],c),o=c[s[0]],a=c[s[1]])}else{if("wrapS"in e){var l=e.wrapS;nt.parameter(l,c),o=c[l]}if("wrapT"in e){var f=e.wrapT;nt.parameter(f,c),a=c[f]}}if(t.wrapS=o,t.wrapT=a,"anisotropic"in e){var p=e.anisotropic;nt("number"==typeof p&&p>=1&&p<=i.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var g=!1;switch(typeof e.mipmap){case"string":nt.parameter(e.mipmap,u,"invalid mipmap hint"),t.mipmapHint=u[e.mipmap],t.genMipmaps=!0,g=!0;break;case"boolean":g=t.genMipmaps=e.mipmap;break;case"object":nt(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,g=!0;break;default:nt.raise("invalid mipmap type")}g&&!("min"in e)&&(t.minFilter=or)}}function W(t,e){n.texParameteri(e,nr,t.minFilter),n.texParameteri(e,er,t.magFilter),n.texParameteri(e,Kn,t.wrapS),n.texParameteri(e,Zn,t.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(e,fr,t.anisotropic),t.genMipmaps&&(n.hint(ur,t.mipmapHint),n.generateMipmap(e))}var H=0,Y={},X=i.maxTextureUnits,q=Array(X).map((function(){return null}));function K(t){E.call(this),this.mipmask=0,this.internalformat=mn,this.id=H++,this.refCount=1,this.target=t,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new $,l.profile&&(this.stats={size:0})}function Z(t){n.activeTexture(br),n.bindTexture(t.target,t.texture)}function Q(){var t=q[0];t?n.bindTexture(t.target,t.texture):n.bindTexture(pn,null)}function J(t){var e=t.texture;nt(e,"must not double destroy texture");var r=t.unit,i=t.target;r>=0&&(n.activeTexture(br+r),n.bindTexture(i,null),q[r]=null),n.deleteTexture(e),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete Y[t.id],s.textureCount--}function tt(t,e){var r=new K(pn);function o(t,e){var n=r.texInfo;$.call(n);var a=G();return"number"==typeof t?F(a,0|t,"number"==typeof e?0|e:0|t):t?(nt.type(t,"object","invalid arguments to regl.texture"),V(n,t),N(a,t)):F(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,M(r,a),nt.texture2D(n,a,i),r.internalformat=a.internalformat,o.width=a.width,o.height=a.height,Z(r),z(a,pn),W(n,pn),Q(),U(a),l.profile&&(r.stats.size=Xr(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),o.format=b[r.internalformat],o.type=x[r.type],o.mag=w[n.magFilter],o.min=C[n.minFilter],o.wrapS=S[n.wrapS],o.wrapT=S[n.wrapT],o}function a(t,e,n,i){nt(!!t,"must specify image data");var a=0|e,s=0|n,l=0|i,u=R();return M(u,r),u.width=0,u.height=0,P(u,t),u.width=u.width||(r.width>>l)-a,u.height=u.height||(r.height>>l)-s,nt(r.type===u.type&&r.format===u.format&&r.internalformat===u.internalformat,"incompatible format for texture.subimage"),nt(a>=0&&s>=0&&a+u.width<=r.width&&s+u.height<=r.height,"texture.subimage write out of bounds"),nt(r.mipmask&1<<l,"missing mipmap data"),nt(u.data||u.element||u.needsCopy,"missing image data"),Z(r),D(u,pn,a,s,l),Q(),L(u),o}function u(t,e){var i=0|t,a=0|e||i;if(i===r.width&&a===r.height)return o;o.width=r.width=i,o.height=r.height=a,Z(r);for(var s=0;r.mipmask>>s;++s){var u=i>>s,c=a>>s;if(!u||!c)break;n.texImage2D(pn,s,r.format,u,c,0,r.format,r.type,null)}return Q(),l.profile&&(r.stats.size=Xr(r.internalformat,r.type,i,a,!1,!1)),o}return Y[r.id]=r,s.textureCount++,o(t,e),o.subimage=a,o.resize=u,o._reglType="texture2d",o._texture=r,l.profile&&(o.stats=r.stats),o.destroy=function(){r.decRef()},o}function et(t,e,r,o,a,u){var c=new K(gn);Y[c.id]=c,s.cubeCount++;var d=new Array(6);function h(t,e,n,r,o,a){var s,u=c.texInfo;for($.call(u),s=0;s<6;++s)d[s]=G();if("number"!=typeof t&&t)if("object"==typeof t)if(e)N(d[0],t),N(d[1],e),N(d[2],n),N(d[3],r),N(d[4],o),N(d[5],a);else if(V(u,t),A(c,t),"faces"in t){var f=t.faces;for(nt(Array.isArray(f)&&6===f.length,"cube faces must be a length 6 array"),s=0;s<6;++s)nt("object"==typeof f[s]&&!!f[s],"invalid input for cube map face"),M(d[s],c),N(d[s],f[s])}else for(s=0;s<6;++s)N(d[s],t);else nt.raise("invalid arguments to cube map");else{var p=0|t||1;for(s=0;s<6;++s)F(d[s],p,p)}for(M(c,d[0]),i.npotTextureCube||nt(hn(c.width)&&hn(c.height),"your browser does not support non power or two texture dimensions"),u.genMipmaps?c.mipmask=(d[0].width<<1)-1:c.mipmask=d[0].mipmask,nt.textureCube(c,u,d,i),c.internalformat=d[0].internalformat,h.width=d[0].width,h.height=d[0].height,Z(c),s=0;s<6;++s)z(d[s],vn+s);for(W(u,gn),Q(),l.profile&&(c.stats.size=Xr(c.internalformat,c.type,h.width,h.height,u.genMipmaps,!0)),h.format=b[c.internalformat],h.type=x[c.type],h.mag=w[u.magFilter],h.min=C[u.minFilter],h.wrapS=S[u.wrapS],h.wrapT=S[u.wrapT],s=0;s<6;++s)U(d[s]);return h}function f(t,e,n,r,i){nt(!!e,"must specify image data"),nt("number"==typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var o=0|n,a=0|r,s=0|i,l=R();return M(l,c),l.width=0,l.height=0,P(l,e),l.width=l.width||(c.width>>s)-o,l.height=l.height||(c.height>>s)-a,nt(c.type===l.type&&c.format===l.format&&c.internalformat===l.internalformat,"incompatible format for texture.subimage"),nt(o>=0&&a>=0&&o+l.width<=c.width&&a+l.height<=c.height,"texture.subimage write out of bounds"),nt(c.mipmask&1<<s,"missing mipmap data"),nt(l.data||l.element||l.needsCopy,"missing image data"),Z(c),D(l,vn+t,o,a,s),Q(),L(l),h}function p(t){var e=0|t;if(e!==c.width){h.width=c.width=e,h.height=c.height=e,Z(c);for(var r=0;r<6;++r)for(var i=0;c.mipmask>>i;++i)n.texImage2D(vn+r,i,c.format,e>>i,e>>i,0,c.format,c.type,null);return Q(),l.profile&&(c.stats.size=Xr(c.internalformat,c.type,h.width,h.height,!1,!0)),h}}return h(t,e,r,o,a,u),h.subimage=f,h.resize=p,h._reglType="textureCube",h._texture=c,l.profile&&(h.stats=c.stats),h.destroy=function(){c.decRef()},h}function rt(){for(var t=0;t<X;++t)n.activeTexture(br+t),n.bindTexture(pn,null),q[t]=null;ke(Y).forEach(J),s.cubeCount=0,s.textureCount=0}function it(){for(var t=0;t<X;++t){var e=q[t];e&&(e.bindCount=0,e.unit=-1,q[t]=null)}ke(Y).forEach((function(t){t.texture=n.createTexture(),n.bindTexture(t.target,t.texture);for(var e=0;e<32;++e)if(0!=(t.mipmask&1<<e))if(t.target===pn)n.texImage2D(pn,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);else for(var r=0;r<6;++r)n.texImage2D(vn+r,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);W(t.texInfo,t.target)}))}function ot(){for(var t=0;t<X;++t){var e=q[t];e&&(e.bindCount=0,e.unit=-1,q[t]=null),n.activeTexture(br+t),n.bindTexture(pn,null),n.bindTexture(gn,null)}}return e(K.prototype,{bind:function(){var t=this;t.bindCount+=1;var e=t.unit;if(e<0){for(var r=0;r<X;++r){var i=q[r];if(i){if(i.bindCount>0)continue;i.unit=-1}q[r]=t,e=r;break}e>=X&&nt.raise("insufficient number of texture units"),l.profile&&s.maxTextureUnits<e+1&&(s.maxTextureUnits=e+1),t.unit=e,n.activeTexture(br+e),n.bindTexture(t.target,t.texture)}return e},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&J(this)}}),l.profile&&(s.getTotalTextureSize=function(){var t=0;return Object.keys(Y).forEach((function(e){t+=Y[e].stats.size})),t}),{create2D:tt,createCube:et,clear:rt,getTexture:function(t){return null},restore:it,refresh:ot}}Dr[Cn]=2,Dr[Sn]=2,Dr[kn]=2,Dr[Pn]=4,Dr[Rn]=.5,Dr[Ln]=.5,Dr[Bn]=1,Dr[Fn]=1,Dr[Nn]=.5,Dr[zn]=1,Dr[jn]=1,Dr[Gn]=.5,Dr[Un]=.25,Dr[$n]=.5,Dr[Vn]=.25,Dr[Wn]=.5;var Kr=36161,Zr=32854,Qr=32855,Jr=36194,ti=33189,ei=36168,ni=34041,ri=35907,ii=34836,oi=34842,ai=34843,si=[];function li(t,e,n){return si[t]*e*n}si[Zr]=2,si[Qr]=2,si[Jr]=2,si[ti]=2,si[ei]=1,si[ni]=4,si[ri]=4,si[ii]=16,si[oi]=8,si[ai]=6;var ui=function(t,e,n,r,i){var o={rgba4:Zr,rgb565:Jr,"rgb5 a1":Qr,depth:ti,stencil:ei,"depth stencil":ni};e.ext_srgb&&(o.srgba=ri),e.ext_color_buffer_half_float&&(o.rgba16f=oi,o.rgb16f=ai),e.webgl_color_buffer_float&&(o.rgba32f=ii);var a=[];Object.keys(o).forEach((function(t){var e=o[t];a[e]=t}));var s=0,l={};function u(t){this.id=s++,this.refCount=1,this.renderbuffer=t,this.format=Zr,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function c(e){var n=e.renderbuffer;nt(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(Kr,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete l[e.id],r.renderbufferCount--}function d(e,s){var c=new u(t.createRenderbuffer());function d(e,r){var s=0,l=0,u=Zr;if("object"==typeof e&&e){var h=e;if("shape"in h){var f=h.shape;nt(Array.isArray(f)&&f.length>=2,"invalid renderbuffer shape"),s=0|f[0],l=0|f[1]}else"radius"in h&&(s=l=0|h.radius),"width"in h&&(s=0|h.width),"height"in h&&(l=0|h.height);"format"in h&&(nt.parameter(h.format,o,"invalid renderbuffer format"),u=o[h.format])}else"number"==typeof e?(s=0|e,l="number"==typeof r?0|r:s):e?nt.raise("invalid arguments to renderbuffer constructor"):s=l=1;if(nt(s>0&&l>0&&s<=n.maxRenderbufferSize&&l<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==c.width||l!==c.height||u!==c.format)return d.width=c.width=s,d.height=c.height=l,c.format=u,t.bindRenderbuffer(Kr,c.renderbuffer),t.renderbufferStorage(Kr,u,s,l),nt(0===t.getError(),"invalid render buffer format"),i.profile&&(c.stats.size=li(c.format,c.width,c.height)),d.format=a[c.format],d}function h(e,r){var o=0|e,a=0|r||o;return o===c.width&&a===c.height||(nt(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),d.width=c.width=o,d.height=c.height=a,t.bindRenderbuffer(Kr,c.renderbuffer),t.renderbufferStorage(Kr,c.format,o,a),nt(0===t.getError(),"invalid render buffer format"),i.profile&&(c.stats.size=li(c.format,c.width,c.height))),d}return l[c.id]=c,r.renderbufferCount++,d(e,s),d.resize=h,d._reglType="renderbuffer",d._renderbuffer=c,i.profile&&(d.stats=c.stats),d.destroy=function(){c.decRef()},d}function h(){ke(l).forEach((function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(Kr,e.renderbuffer),t.renderbufferStorage(Kr,e.format,e.width,e.height)})),t.bindRenderbuffer(Kr,null)}return u.prototype.decRef=function(){--this.refCount<=0&&c(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(l).forEach((function(e){t+=l[e].stats.size})),t}),{create:d,clear:function(){ke(l).forEach(c)},restore:h}},ci=36160,di=36161,hi=3553,fi=34069,pi=36064,gi=36096,vi=36128,mi=33306,yi=36053,bi=36054,xi=36055,wi=36057,Ci=36061,Si=36193,ki=5121,Ei=5126,Mi=6407,Ai=6408,_i=6402,Ti=[Mi,Ai],Pi=[];Pi[Ai]=4,Pi[Mi]=3;var Ii=[];Ii[ki]=1,Ii[Ei]=4,Ii[Si]=2;var Di=33189,Oi=36168,Ri=34041,Li=[32854,32855,36194,35907,34842,34843,34836],Bi={};function Fi(t,n,r,i,o,a){var s={cur:null,next:null,dirty:!1,setFBO:null},l=["rgba"],u=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&u.push("srgba"),n.ext_color_buffer_half_float&&u.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&u.push("rgba32f");var c=["uint8"];function d(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=0,i=0;e?(r=e.width,i=e.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function h(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function f(t,e,n){if(t)if(t.texture){var r=t.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height);nt(i===e&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=t.renderbuffer._renderbuffer;nt(a.width===e&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function p(e,n){n&&(n.texture?t.framebufferTexture2D(ci,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(ci,e,di,n.renderbuffer._renderbuffer.renderbuffer))}function g(t){var e=hi,n=null,r=null,i=t;"object"==typeof t&&(i=t.data,"target"in t&&(e=0|t.target)),nt.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(n=i,nt(e===hi)):"textureCube"===o?(n=i,nt(e>=fi&&e<fi+6,"invalid cube map target")):"renderbuffer"===o?(r=i,e=di):nt.raise("invalid regl object for attachment"),new d(e,n,r)}function v(t,e,n,r,a){if(n){var s=i.create2D({width:t,height:e,format:r,type:a});return s._texture.refCount=0,new d(hi,s,null)}var l=o.create({width:t,height:e,format:r});return l._renderbuffer.refCount=0,new d(di,null,l)}function m(t){return t&&(t.texture||t.renderbuffer)}function y(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}n.oes_texture_half_float&&c.push("half float","float16"),n.oes_texture_float&&c.push("float","float32");var b=0,x={};function w(){this.id=b++,x[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function C(t){t.colorAttachments.forEach(h),h(t.depthAttachment),h(t.stencilAttachment),h(t.depthStencilAttachment)}function S(e){var n=e.framebuffer;nt(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,a.framebufferCount--,delete x[e.id]}function k(e){var n;t.bindFramebuffer(ci,e.framebuffer);var i=e.colorAttachments;for(n=0;n<i.length;++n)p(pi+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(ci,pi+n,hi,null,0);t.framebufferTexture2D(ci,mi,hi,null,0),t.framebufferTexture2D(ci,gi,hi,null,0),t.framebufferTexture2D(ci,vi,hi,null,0),p(gi,e.depthAttachment),p(vi,e.stencilAttachment),p(mi,e.depthStencilAttachment);var o=t.checkFramebufferStatus(ci);t.isContextLost()||o===yi||nt.raise("framebuffer configuration not supported, status = "+Bi[o]),t.bindFramebuffer(ci,s.next?s.next.framebuffer:null),s.cur=s.next,t.getError()}function E(t,i){var o=new w;function d(t,e){var i;nt(s.next!==o,"can not update framebuffer which is currently in use");var a=0,h=0,p=!0,y=!0,b=null,x=!0,w="rgba",S="uint8",E=1,M=null,A=null,_=null,T=!1;if("number"==typeof t)a=0|t,h=0|e||a;else if(t){nt.type(t,"object","invalid arguments for framebuffer");var P=t;if("shape"in P){var I=P.shape;nt(Array.isArray(I)&&I.length>=2,"invalid shape for framebuffer"),a=I[0],h=I[1]}else"radius"in P&&(a=h=P.radius),"width"in P&&(a=P.width),"height"in P&&(h=P.height);("color"in P||"colors"in P)&&(b=P.color||P.colors,Array.isArray(b)&&nt(1===b.length||n.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in P&&(E=0|P.colorCount,nt(E>0,"invalid color buffer count")),"colorTexture"in P&&(x=!!P.colorTexture,w="rgba4"),"colorType"in P&&(S=P.colorType,x?(nt(n.oes_texture_float||!("float"===S||"float32"===S),"you must enable OES_texture_float in order to use floating point framebuffer objects"),nt(n.oes_texture_half_float||!("half float"===S||"float16"===S),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===S||"float16"===S?(nt(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),w="rgba16f"):"float"!==S&&"float32"!==S||(nt(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),w="rgba32f"),nt.oneOf(S,c,"invalid color type")),"colorFormat"in P&&(w=P.colorFormat,l.indexOf(w)>=0?x=!0:u.indexOf(w)>=0?x=!1:x?nt.oneOf(P.colorFormat,l,"invalid color format for texture"):nt.oneOf(P.colorFormat,u,"invalid color format for renderbuffer"))),("depthTexture"in P||"depthStencilTexture"in P)&&(T=!(!P.depthTexture&&!P.depthStencilTexture),nt(!T||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in P&&("boolean"==typeof P.depth?p=P.depth:(M=P.depth,y=!1)),"stencil"in P&&("boolean"==typeof P.stencil?y=P.stencil:(A=P.stencil,p=!1)),"depthStencil"in P&&("boolean"==typeof P.depthStencil?p=y=P.depthStencil:(_=P.depthStencil,p=!1,y=!1))}else a=h=1;var D=null,O=null,R=null,L=null;if(Array.isArray(b))D=b.map(g);else if(b)D=[g(b)];else for(D=new Array(E),i=0;i<E;++i)D[i]=v(a,h,x,w,S);nt(n.webgl_draw_buffers||D.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),nt(D.length<=r.maxColorAttachments,"too many color attachments, not supported"),a=a||D[0].width,h=h||D[0].height,M?O=g(M):p&&!y&&(O=v(a,h,T,"depth","uint32")),A?R=g(A):y&&!p&&(R=v(a,h,!1,"stencil","uint8")),_?L=g(_):!M&&!A&&y&&p&&(L=v(a,h,T,"depth stencil","depth stencil")),nt(!!M+!!A+!!_<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var B=null;for(i=0;i<D.length;++i)if(f(D[i],a,h),nt(!D[i]||D[i].texture&&Ti.indexOf(D[i].texture._texture.format)>=0||D[i].renderbuffer&&Li.indexOf(D[i].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+i+" is invalid"),D[i]&&D[i].texture){var F=Pi[D[i].texture._texture.format]*Ii[D[i].texture._texture.type];null===B?B=F:nt(B===F,"all color attachments much have the same number of bits per pixel.")}return f(O,a,h),nt(!O||O.texture&&O.texture._texture.format===_i||O.renderbuffer&&O.renderbuffer._renderbuffer.format===Di,"invalid depth attachment for framebuffer object"),f(R,a,h),nt(!R||R.renderbuffer&&R.renderbuffer._renderbuffer.format===Oi,"invalid stencil attachment for framebuffer object"),f(L,a,h),nt(!L||L.texture&&L.texture._texture.format===Ri||L.renderbuffer&&L.renderbuffer._renderbuffer.format===Ri,"invalid depth-stencil attachment for framebuffer object"),C(o),o.width=a,o.height=h,o.colorAttachments=D,o.depthAttachment=O,o.stencilAttachment=R,o.depthStencilAttachment=L,d.color=D.map(m),d.depth=m(O),d.stencil=m(R),d.depthStencil=m(L),d.width=o.width,d.height=o.height,k(o),d}function h(t,e){nt(s.next!==o,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),r=Math.max(0|e||n,1);if(n===o.width&&r===o.height)return d;for(var i=o.colorAttachments,a=0;a<i.length;++a)y(i[a],n,r);return y(o.depthAttachment,n,r),y(o.stencilAttachment,n,r),y(o.depthStencilAttachment,n,r),o.width=d.width=n,o.height=d.height=r,k(o),d}return a.framebufferCount++,d(t,i),e(d,{resize:h,_reglType:"framebuffer",_framebuffer:o,destroy:function(){S(o),C(o)},use:function(t){s.setFBO({framebuffer:d},t)}})}function M(t){var o=Array(6);function a(t){var r;nt(o.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var u,d={color:null},h=0,f=null,p="rgba",g="uint8",v=1;if("number"==typeof t)h=0|t;else if(t){nt.type(t,"object","invalid arguments for framebuffer");var m=t;if("shape"in m){var y=m.shape;nt(Array.isArray(y)&&y.length>=2,"invalid shape for framebuffer"),nt(y[0]===y[1],"cube framebuffer must be square"),h=y[0]}else"radius"in m&&(h=0|m.radius),"width"in m?(h=0|m.width,"height"in m&&nt(m.height===h,"must be square")):"height"in m&&(h=0|m.height);("color"in m||"colors"in m)&&(f=m.color||m.colors,Array.isArray(f)&&nt(1===f.length||n.webgl_draw_buffers,"multiple render targets not supported")),f||("colorCount"in m&&(v=0|m.colorCount,nt(v>0,"invalid color buffer count")),"colorType"in m&&(nt.oneOf(m.colorType,c,"invalid color type"),g=m.colorType),"colorFormat"in m&&(p=m.colorFormat,nt.oneOf(m.colorFormat,l,"invalid color format for texture"))),"depth"in m&&(d.depth=m.depth),"stencil"in m&&(d.stencil=m.stencil),"depthStencil"in m&&(d.depthStencil=m.depthStencil)}else h=1;if(f)if(Array.isArray(f))for(u=[],r=0;r<f.length;++r)u[r]=f[r];else u=[f];else{u=Array(v);var b={radius:h,format:p,type:g};for(r=0;r<v;++r)u[r]=i.createCube(b)}for(d.color=Array(u.length),r=0;r<u.length;++r){var x=u[r];nt("function"==typeof x&&"textureCube"===x._reglType,"invalid cube map"),h=h||x.width,nt(x.width===h&&x.height===h,"invalid cube map shape"),d.color[r]={target:fi,data:u[r]}}for(r=0;r<6;++r){for(var w=0;w<u.length;++w)d.color[w].target=fi+r;r>0&&(d.depth=o[0].depth,d.stencil=o[0].stencil,d.depthStencil=o[0].depthStencil),o[r]?o[r](d):o[r]=E(d)}return e(a,{width:h,height:h,color:u})}function u(t){var e,n=0|t;if(nt(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var i=a.color;for(e=0;e<i.length;++e)i[e].resize(n);for(e=0;e<6;++e)o[e].resize(n);return a.width=a.height=n,a}return a(t),e(a,{faces:o,resize:u,_reglType:"framebufferCube",destroy:function(){o.forEach((function(t){t.destroy()}))}})}function A(){s.cur=null,s.next=null,s.dirty=!0,ke(x).forEach((function(e){e.framebuffer=t.createFramebuffer(),k(e)}))}return e(s,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof w)return e}return null},create:E,createCube:M,clear:function(){ke(x).forEach(S)},restore:A})}Bi[yi]="complete",Bi[bi]="incomplete attachment",Bi[wi]="incomplete dimensions",Bi[xi]="incomplete, missing attachment",Bi[Ci]="unsupported";var Ni=5126,zi=34962;function ji(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Ni,this.offset=0,this.stride=0,this.divisor=0}function Gi(e,n,r,i,o){for(var a=r.maxAttributes,s=new Array(a),l=0;l<a;++l)s[l]=new ji;var u=0,c={},d={Record:ji,scope:{},state:s,currentVAO:null,targetVAO:null,restore:f()?x:function(){},createVAO:w,getVAO:g,destroyBuffer:h,setVAO:f()?v:m,clear:f()?y:function(){}};function h(t){for(var n=0;n<s.length;++n){var r=s[n];r.buffer===t&&(e.disableVertexAttribArray(n),r.buffer=null)}}function f(){return n.oes_vertex_array_object}function p(){return n.angle_instanced_arrays}function g(t){return"function"==typeof t&&t._vao?t._vao:null}function v(t){if(t!==d.currentVAO){var e=f();t?e.bindVertexArrayOES(t.vao):e.bindVertexArrayOES(null),d.currentVAO=t}}function m(t){if(t!==d.currentVAO){if(t)t.bindAttrs();else for(var n=p(),r=0;r<s.length;++r){var i=s[r];i.buffer?(e.enableVertexAttribArray(r),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offfset),n&&i.divisor&&n.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}d.currentVAO=t}}function y(){ke(c).forEach((function(t){t.destroy()}))}function b(){this.id=++u,this.attributes=[];var t=f();this.vao=t?t.createVertexArrayOES():null,c[this.id]=this,this.buffers=[]}function x(){f()&&ke(c).forEach((function(t){t.refresh()}))}function w(e){var r=new b;function s(e){nt(Array.isArray(e),"arguments to vertex array constructor must be an array"),nt(e.length<a,"too many attributes"),nt(e.length>0,"must specify at least one attribute");var i={},l=r.attributes;l.length=e.length;for(var u=0;u<e.length;++u){var c,d=e[u],h=l[u]=new ji,f=d.data||d;Array.isArray(f)||t(f)||Se(f)?(r.buffers[u]&&(c=r.buffers[u],t(f)&&c._buffer.byteLength>=f.byteLength?c.subdata(f):(c.destroy(),r.buffers[u]=null)),r.buffers[u]||(c=r.buffers[u]=o.create(d,zi,!1,!0)),h.buffer=o.getBuffer(c),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1,i[u]=1):o.getBuffer(d)?(h.buffer=o.getBuffer(d),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1):o.getBuffer(d.buffer)?(h.buffer=o.getBuffer(d.buffer),h.size=0|(+d.size||h.buffer.dimension),h.normalized=!!d.normalized||!1,"type"in d?(nt.parameter(d.type,Oe,"invalid buffer type"),h.type=Oe[d.type]):h.type=h.buffer.dtype,h.offset=0|(d.offset||0),h.stride=0|(d.stride||0),h.divisor=0|(d.divisor||0),h.state=1,nt(h.size>=1&&h.size<=4,"size must be between 1 and 4"),nt(h.offset>=0,"invalid offset"),nt(h.stride>=0&&h.stride<=255,"stride must be between 0 and 255"),nt(h.divisor>=0,"divisor must be positive"),nt(!h.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in d?(nt(u>0,"first attribute must not be a constant"),h.x=+d.x||0,h.y=+d.y||0,h.z=+d.z||0,h.w=+d.w||0,h.state=2):nt(!1,"invalid attribute spec for location "+u)}for(var p=0;p<r.buffers.length;++p)!i[p]&&r.buffers[p]&&(r.buffers[p].destroy(),r.buffers[p]=null);return r.refresh(),s}return i.vaoCount+=1,s.destroy=function(){for(var t=0;t<r.buffers.length;++t)r.buffers[t]&&r.buffers[t].destroy();r.buffers.length=0,r.destroy()},s._vao=r,s._reglType="vao",s(e)}return b.prototype.bindAttrs=function(){for(var t=p(),n=this.attributes,r=0;r<n.length;++r){var i=n[r];i.buffer?(e.enableVertexAttribArray(r),e.bindBuffer(zi,i.buffer.buffer),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offset),t&&i.divisor&&t.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}for(var o=n.length;o<a;++o)e.disableVertexAttribArray(o)},b.prototype.refresh=function(){var t=f();t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),d.currentVAO=this)},b.prototype.destroy=function(){if(this.vao){var t=f();this===d.currentVAO&&(d.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}c[this.id]&&(delete c[this.id],i.vaoCount-=1)},d}var Ui=35632,$i=35633,Vi=35718,Wi=35721;function Hi(t,n,r,i){var o={},a={};function s(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function l(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function u(e,r,i){var s=e===Ui?o:a,l=s[r];if(!l){var u=n.str(r);l=t.createShader(e),t.shaderSource(l,u),t.compileShader(l),nt.shaderError(t,l,u,e,i),s[r]=l}return l}var c={},d=[],h=0;function f(t,e){this.id=h++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,i.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(e,r,o){var a,c,d=u(Ui,e.fragId),h=u($i,e.vertId),f=e.program=t.createProgram();if(t.attachShader(f,d),t.attachShader(f,h),o)for(a=0;a<o.length;++a){var p=o[a];t.bindAttribLocation(f,p[0],p[1])}t.linkProgram(f),nt.linkError(t,f,n.str(e.fragId),n.str(e.vertId),r);var g=t.getProgramParameter(f,Vi);i.profile&&(e.stats.uniformsCount=g);var v=e.uniforms;for(a=0;a<g;++a)if(c=t.getActiveUniform(f,a))if(c.size>1)for(var m=0;m<c.size;++m){var y=c.name.replace("[0]","["+m+"]");l(v,new s(y,n.id(y),t.getUniformLocation(f,y),c))}else l(v,new s(c.name,n.id(c.name),t.getUniformLocation(f,c.name),c));var b=t.getProgramParameter(f,Wi);i.profile&&(e.stats.attributesCount=b);var x=e.attributes;for(a=0;a<b;++a)(c=t.getActiveAttrib(f,a))&&l(x,new s(c.name,n.id(c.name),t.getAttribLocation(f,c.name),c))}function g(){o={},a={};for(var t=0;t<d.length;++t)p(d[t],null,d[t].attributes.map((function(t){return[t.location,t.name]})))}return i.profile&&(r.getMaxUniformsCount=function(){var t=0;return d.forEach((function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)})),t},r.getMaxAttributesCount=function(){var t=0;return d.forEach((function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)})),t}),{clear:function(){var e=t.deleteShader.bind(t);ke(o).forEach(e),o={},ke(a).forEach(e),a={},d.forEach((function(e){t.deleteProgram(e.program)})),d.length=0,c={},r.shaderCount=0},program:function(n,i,s,l){nt.command(n>=0,"missing vertex shader",s),nt.command(i>=0,"missing fragment shader",s);var u=c[i];u||(u=c[i]={});var h=u[n];if(h&&(h.refCount++,!l))return h;var g=new f(i,n);return r.shaderCount++,p(g,s,l),h||(u[n]=g),d.push(g),e(g,{destroy:function(){if(g.refCount--,g.refCount<=0){t.deleteProgram(g.program);var e=d.indexOf(g);d.splice(e,1),r.shaderCount--}u[g.vertId].refCount<=0&&(t.deleteShader(a[g.vertId]),delete a[g.vertId],delete c[g.fragId][g.vertId]),Object.keys(c[g.fragId]).length||(t.deleteShader(o[g.fragId]),delete o[g.fragId],delete c[g.fragId])}})},restore:g,shader:u,frag:-1,vert:-1}}var Yi=6408,Xi=5121,qi=3333,Ki=5126;function Zi(e,n,r,i,o,a,s){function l(l){var u;null===n.next?(nt(o.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),u=Xi):(nt(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),u=n.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(nt(u===Xi||u===Ki,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),u===Ki&&nt(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):nt(u===Xi,"Reading from a framebuffer is only allowed for the type 'uint8'"));var c=0,d=0,h=i.framebufferWidth,f=i.framebufferHeight,p=null;t(l)?p=l:l&&(nt.type(l,"object","invalid arguments to regl.read()"),c=0|l.x,d=0|l.y,nt(c>=0&&c<i.framebufferWidth,"invalid x offset for regl.read"),nt(d>=0&&d<i.framebufferHeight,"invalid y offset for regl.read"),h=0|(l.width||i.framebufferWidth-c),f=0|(l.height||i.framebufferHeight-d),p=l.data||null),p&&(u===Xi?nt(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):u===Ki&&nt(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),nt(h>0&&h+c<=i.framebufferWidth,"invalid width for read pixels"),nt(f>0&&f+d<=i.framebufferHeight,"invalid height for read pixels"),r();var g=h*f*4;return p||(u===Xi?p=new Uint8Array(g):u===Ki&&(p=p||new Float32Array(g))),nt.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),nt(p.byteLength>=g,"data buffer for regl.read() too small"),e.pixelStorei(qi,4),e.readPixels(c,d,h,f,Yi,u,p),p}function u(t){var e;return n.setFBO({framebuffer:t.framebuffer},(function(){e=l(t)})),e}function c(t){return t&&"framebuffer"in t?u(t):l(t)}return c}function Qi(t){return Array.prototype.slice.call(t)}function Ji(t){return Qi(t).join("")}function to(){var t=0,n=[],r=[];function i(e){for(var i=0;i<r.length;++i)if(r[i]===e)return n[i];var o="g"+t++;return n.push(o),r.push(e),o}function o(){var n=[];function r(){n.push.apply(n,Qi(arguments))}var i=[];function o(){var e="v"+t++;return i.push(e),arguments.length>0&&(n.push(e,"="),n.push.apply(n,Qi(arguments)),n.push(";")),e}return e(r,{def:o,toString:function(){return Ji([i.length>0?"var "+i.join(",")+";":"",Ji(n)])}})}function a(){var t=o(),n=o(),r=t.toString,i=n.toString;function a(e,r){n(e,r,"=",t.def(e,r),";")}return e((function(){t.apply(t,Qi(arguments))}),{def:t.def,entry:t,exit:n,save:a,set:function(e,n,r){a(e,n),t(e,n,"=",r,";")},toString:function(){return r()+i()}})}function s(){var t=Ji(arguments),n=a(),r=a(),i=n.toString,o=r.toString;return e(n,{then:function(){return n.apply(n,Qi(arguments)),this},else:function(){return r.apply(r,Qi(arguments)),this},toString:function(){var e=o();return e&&(e="else{"+e+"}"),Ji(["if(",t,"){",i(),"}",e])}})}var l=o(),u={};function c(t,n){var r=[];function i(){var t="a"+r.length;return r.push(t),t}n=n||0;for(var o=0;o<n;++o)i();var s=a(),l=s.toString;return u[t]=e(s,{arg:i,toString:function(){return Ji(["function(",r.join(),"){",l(),"}"])}})}function d(){var t=['"use strict";',l,"return {"];Object.keys(u).forEach((function(e){t.push('"',e,'":',u[e].toString(),",")})),t.push("}");var e=Ji(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(e)).apply(null,r)}return{global:l,link:i,block:o,proc:c,scope:a,cond:s,compile:d}}var eo="xyzw".split(""),no=5121,ro=1,io=2,oo=0,ao=1,so=2,lo=3,uo=4,co=5,ho=6,fo="dither",po="blend.enable",go="blend.color",vo="blend.equation",mo="blend.func",yo="depth.enable",bo="depth.func",xo="depth.range",wo="depth.mask",Co="colorMask",So="cull.enable",ko="cull.face",Eo="frontFace",Mo="lineWidth",Ao="polygonOffset.enable",_o="polygonOffset.offset",To="sample.alpha",Po="sample.enable",Io="sample.coverage",Do="stencil.enable",Oo="stencil.mask",Ro="stencil.func",Lo="stencil.opFront",Bo="stencil.opBack",Fo="scissor.enable",No="scissor.box",zo="viewport",jo="profile",Go="framebuffer",Uo="vert",$o="frag",Vo="elements",Wo="primitive",Ho="count",Yo="offset",Xo="instances",qo="vao",Ko="Width",Zo="Height",Qo=Go+Ko,Jo=Go+Zo,ta=zo+Ko,ea=zo+Zo,na="drawingBuffer",ra=na+Ko,ia=na+Zo,oa=[mo,vo,Ro,Lo,Bo,Io,zo,No,_o],aa=34962,sa=34963,la=3553,ua=34067,ca=2884,da=3042,ha=3024,fa=2960,pa=2929,ga=3089,va=32823,ma=32926,ya=32928,ba=5126,xa=35664,wa=35665,Ca=35666,Sa=5124,ka=35667,Ea=35668,Ma=35669,Aa=35670,_a=35671,Ta=35672,Pa=35673,Ia=35674,Da=35675,Oa=35676,Ra=35678,La=35680,Ba=4,Fa=1028,Na=1029,za=2304,ja=2305,Ga=32775,Ua=32776,$a=519,Va=7680,Wa=0,Ha=1,Ya=32774,Xa=513,qa=36160,Ka=36064,Za={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Qa=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Ja={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ts={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},es={frag:35632,vert:35633},ns={cw:za,ccw:ja};function rs(e){return Array.isArray(e)||t(e)||Se(e)}function is(t){return t.sort((function(t,e){return t===zo?-1:e===zo?1:t<e?-1:1}))}function os(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function as(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function ss(t){return new os(!1,!1,!1,t)}function ls(t,e){var n=t.type;if(n===oo){var r=t.data.length;return new os(!0,r>=1,r>=2,e)}if(n===uo){var i=t.data;return new os(i.thisDep,i.contextDep,i.propDep,e)}if(n===co)return new os(!1,!1,!1,e);if(n===ho){for(var o=!1,a=!1,s=!1,l=0;l<t.data.length;++l){var u=t.data[l];if(u.type===ao)s=!0;else if(u.type===so)a=!0;else if(u.type===lo)o=!0;else if(u.type===oo){o=!0;var c=u.data;c>=1&&(a=!0),c>=2&&(s=!0)}else u.type===uo&&(o=o||u.data.thisDep,a=a||u.data.contextDep,s=s||u.data.propDep)}return new os(o,a,s,e)}return new os(n===lo,n===so,n===ao,e)}var us=new os(!1,!1,!1,(function(){}));function cs(t,n,r,i,o,a,s,l,u,c,d,h,f,p,g){var v=c.Record,m={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(m.min=Ga,m.max=Ua);var y=r.angle_instanced_arrays,b=r.webgl_draw_buffers,x={dirty:!0,profile:g.profile},w={},C=[],S={},k={};function E(t){return t.replace(".","_")}function M(t,e,n){var r=E(t);C.push(t),w[r]=x[r]=!!n,S[r]=e}function A(t,e,n){var r=E(t);C.push(t),Array.isArray(n)?(x[r]=n.slice(),w[r]=n.slice()):x[r]=w[r]=n,k[r]=e}M(fo,ha),M(po,da),A(go,"blendColor",[0,0,0,0]),A(vo,"blendEquationSeparate",[Ya,Ya]),A(mo,"blendFuncSeparate",[Ha,Wa,Ha,Wa]),M(yo,pa,!0),A(bo,"depthFunc",Xa),A(xo,"depthRange",[0,1]),A(wo,"depthMask",!0),A(Co,Co,[!0,!0,!0,!0]),M(So,ca),A(ko,"cullFace",Na),A(Eo,Eo,ja),A(Mo,Mo,1),M(Ao,va),A(_o,"polygonOffset",[0,0]),M(To,ma),M(Po,ya),A(Io,"sampleCoverage",[1,!1]),M(Do,fa),A(Oo,"stencilMask",-1),A(Ro,"stencilFunc",[$a,0,-1]),A(Lo,"stencilOpSeparate",[Fa,Va,Va,Va]),A(Bo,"stencilOpSeparate",[Na,Va,Va,Va]),M(Fo,ga),A(No,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),A(zo,zo,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var _={gl:t,context:f,strings:n,next:w,current:x,draw:h,elements:a,buffer:o,shader:d,attributes:c.state,vao:c,uniforms:u,framebuffer:l,extensions:r,timer:p,isBufferArgs:rs},T={primTypes:He,compareFuncs:Ja,blendFuncs:Za,blendEquations:m,stencilOps:ts,glTypes:Oe,orientationType:ns};nt.optional((function(){_.isArrayLike=dn})),b&&(T.backBuffer=[Na],T.drawBuffer=Mt(i.maxDrawbuffers,(function(t){return 0===t?[0]:Mt(t,(function(t){return Ka+t}))})));var P=0;function I(){var t=to(),e=t.link,r=t.global;t.id=P++,t.batchId="0";var i=e(_),o=t.shared={props:"a0"};Object.keys(_).forEach((function(t){o[t]=r.def(i,".",t)})),nt.optional((function(){t.CHECK=e(nt),t.commandStr=nt.guessCommand(),t.command=e(t.commandStr),t.assert=function(t,n,r){t("if(!(",n,"))",this.CHECK,".commandRaise(",e(r),",",this.command,");")},T.invalidBlendCombinations=Qa}));var a=t.next={},s=t.current={};Object.keys(k).forEach((function(t){Array.isArray(x[t])&&(a[t]=r.def(o.next,".",t),s[t]=r.def(o.current,".",t))}));var l=t.constants={};Object.keys(T).forEach((function(t){l[t]=r.def(JSON.stringify(T[t]))})),t.invoke=function(n,r){switch(r.type){case oo:var i=["this",o.context,o.props,t.batchId];return n.def(e(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case ao:return n.def(o.props,r.data);case so:return n.def(o.context,r.data);case lo:return n.def("this",r.data);case uo:return r.data.append(t,n),r.data.ref;case co:return r.data.toString();case ho:return r.data.map((function(e){return t.invoke(n,e)}))}},t.attribCache={};var u={};return t.scopeAttrib=function(t){var r=n.id(t);if(r in u)return u[r];var i=c.scope[r];return i||(i=c.scope[r]=new v),u[r]=e(i)},t}function D(t){var e,n=t.static,r=t.dynamic;if(jo in n){var i=!!n[jo];(e=ss((function(t,e){return i}))).enable=i}else if(jo in r){var o=r[jo];e=ls(o,(function(t,e){return t.invoke(e,o)}))}return e}function O(t,e){var n=t.static,r=t.dynamic;if(Go in n){var i=n[Go];return i?(i=l.getFramebuffer(i),nt.command(i,"invalid framebuffer object"),ss((function(t,e){var n=t.link(i),r=t.shared;e.set(r.framebuffer,".next",n);var o=r.context;return e.set(o,"."+Qo,n+".width"),e.set(o,"."+Jo,n+".height"),n}))):ss((function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var r=n.context;return e.set(r,"."+Qo,r+"."+ra),e.set(r,"."+Jo,r+"."+ia),"null"}))}if(Go in r){var o=r[Go];return ls(o,(function(t,e){var n=t.invoke(e,o),r=t.shared,i=r.framebuffer,a=e.def(i,".getFramebuffer(",n,")");nt.optional((function(){t.assert(e,"!"+n+"||"+a,"invalid framebuffer object")})),e.set(i,".next",a);var s=r.context;return e.set(s,"."+Qo,a+"?"+a+".width:"+s+"."+ra),e.set(s,"."+Jo,a+"?"+a+".height:"+s+"."+ia),a}))}return null}function R(t,e,n){var r=t.static,i=t.dynamic;function o(t){if(t in r){var o=r[t];nt.commandType(o,"object","invalid "+t,n.commandStr);var a,s,l=!0,u=0|o.x,c=0|o.y;return"width"in o?(a=0|o.width,nt.command(a>=0,"invalid "+t,n.commandStr)):l=!1,"height"in o?(s=0|o.height,nt.command(s>=0,"invalid "+t,n.commandStr)):l=!1,new os(!l&&e&&e.thisDep,!l&&e&&e.contextDep,!l&&e&&e.propDep,(function(t,e){var n=t.shared.context,r=a;"width"in o||(r=e.def(n,".",Qo,"-",u));var i=s;return"height"in o||(i=e.def(n,".",Jo,"-",c)),[u,c,r,i]}))}if(t in i){var d=i[t],h=ls(d,(function(e,n){var r=e.invoke(n,d);nt.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}));var i=e.shared.context,o=n.def(r,".x|0"),a=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",Qo,"-",o,")"),l=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",Jo,"-",a,")");return nt.optional((function(){e.assert(n,s+">=0&&"+l+">=0","invalid "+t)})),[o,a,s,l]}));return e&&(h.thisDep=h.thisDep||e.thisDep,h.contextDep=h.contextDep||e.contextDep,h.propDep=h.propDep||e.propDep),h}return e?new os(e.thisDep,e.contextDep,e.propDep,(function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",Qo),e.def(n,".",Jo)]})):null}var a=o(zo);if(a){var s=a;a=new os(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=s.append(t,e),r=t.shared.context;return e.set(r,"."+ta,n[2]),e.set(r,"."+ea,n[3]),n}))}return{viewport:a,scissor_box:o(No)}}function L(t,e){var n=t.static;if("string"==typeof n[$o]&&"string"==typeof n[Uo]){if(Object.keys(e.dynamic).length>0)return null;var r=e.static,i=Object.keys(r);if(i.length>0&&"number"==typeof r[i[0]]){for(var o=[],a=0;a<i.length;++a)nt("number"==typeof r[i[a]],"must specify all vertex attribute locations when using vaos"),o.push([0|r[i[a]],i[a]]);return o}}return null}function B(t,e,r){var i=t.static,o=t.dynamic;function a(t){if(t in i){var e=n.id(i[t]);nt.optional((function(){d.shader(es[t],e,nt.guessCommand())}));var r=ss((function(){return e}));return r.id=e,r}if(t in o){var a=o[t];return ls(a,(function(e,n){var r=e.invoke(n,a),i=n.def(e.shared.strings,".id(",r,")");return nt.optional((function(){n(e.shared.shader,".shader(",es[t],",",i,",",e.command,");")})),i}))}return null}var s,l=a($o),u=a(Uo),c=null;return as(l)&&as(u)?(c=d.program(u.id,l.id,null,r),s=ss((function(t,e){return t.link(c)}))):s=new os(l&&l.thisDep||u&&u.thisDep,l&&l.contextDep||u&&u.contextDep,l&&l.propDep||u&&u.propDep,(function(t,e){var n,r=t.shared.shader;n=l?l.append(t,e):e.def(r,".",$o);var i=r+".program("+(u?u.append(t,e):e.def(r,".",Uo))+","+n;return nt.optional((function(){i+=","+t.command})),e.def(i+")")})),{frag:l,vert:u,progVar:s,program:c}}function F(t,e){var n=t.static,r=t.dynamic;function i(){if(Vo in n){var t=n[Vo];rs(t)?t=a.getElements(a.create(t,!0)):t&&(t=a.getElements(t),nt.command(t,"invalid elements",e.commandStr));var i=ss((function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r,r}return e.ELEMENTS=null,null}));return i.value=t,i}if(Vo in r){var o=r[Vo];return ls(o,(function(t,e){var n=t.shared,r=n.isBufferArgs,i=n.elements,a=t.invoke(e,o),s=e.def("null"),l=e.def(r,"(",a,")"),u=t.cond(l).then(s,"=",i,".createStream(",a,");").else(s,"=",i,".getElements(",a,");");return nt.optional((function(){t.assert(u.else,"!"+a+"||"+s,"invalid elements")})),e.entry(u),e.exit(t.cond(l).then(i,".destroyStream(",s,");")),t.ELEMENTS=s,s}))}return null}var o=i();function s(){if(Wo in n){var t=n[Wo];return nt.commandParameter(t,He,"invalid primitve",e.commandStr),ss((function(e,n){return He[t]}))}if(Wo in r){var i=r[Wo];return ls(i,(function(t,e){var n=t.constants.primTypes,r=t.invoke(e,i);return nt.optional((function(){t.assert(e,r+" in "+n,"invalid primitive, must be one of "+Object.keys(He))})),e.def(n,"[",r,"]")}))}return o?as(o)?o.value?ss((function(t,e){return e.def(t.ELEMENTS,".primType")})):ss((function(){return Ba})):new os(o.thisDep,o.contextDep,o.propDep,(function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",Ba)})):null}function l(t,i){if(t in n){var a=0|n[t];return nt.command(!i||a>=0,"invalid "+t,e.commandStr),ss((function(t,e){return i&&(t.OFFSET=a),a}))}if(t in r){var s=r[t];return ls(s,(function(e,n){var r=e.invoke(n,s);return i&&(e.OFFSET=r,nt.optional((function(){e.assert(n,r+">=0","invalid "+t)}))),r}))}return i&&o?ss((function(t,e){return t.OFFSET="0",0})):null}var u=l(Yo,!0);function c(){if(Ho in n){var t=0|n[Ho];return nt.command("number"==typeof t&&t>=0,"invalid vertex count",e.commandStr),ss((function(){return t}))}if(Ho in r){var i=r[Ho];return ls(i,(function(t,e){var n=t.invoke(e,i);return nt.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(o){if(as(o)){if(o)return u?new os(u.thisDep,u.contextDep,u.propDep,(function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return nt.optional((function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")})),n})):ss((function(t,e){return e.def(t.ELEMENTS,".vertCount")}));var a=ss((function(){return-1}));return nt.optional((function(){a.MISSING=!0})),a}var s=new os(o.thisDep||u.thisDep,o.contextDep||u.contextDep,o.propDep||u.propDep,(function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")}));return nt.optional((function(){s.DYNAMIC=!0})),s}return null}return{elements:o,primitive:s(),count:c(),instances:l(Xo,!1),offset:u}}function N(t,e){var n=t.static,r=t.dynamic,o={};return C.forEach((function(t){var a=E(t);function s(e,i){if(t in n){var s=e(n[t]);o[a]=ss((function(){return s}))}else if(t in r){var l=r[t];o[a]=ls(l,(function(t,e){return i(t,e,t.invoke(e,l))}))}}switch(t){case So:case po:case fo:case Do:case yo:case Fo:case Ao:case To:case Po:case wo:return s((function(n){return nt.commandType(n,"boolean",t,e.commandStr),n}),(function(e,n,r){return nt.optional((function(){e.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+t,e.commandStr)})),r}));case bo:return s((function(n){return nt.commandParameter(n,Ja,"invalid "+t,e.commandStr),Ja[n]}),(function(e,n,r){var i=e.constants.compareFuncs;return nt.optional((function(){e.assert(n,r+" in "+i,"invalid "+t+", must be one of "+Object.keys(Ja))})),n.def(i,"[",r,"]")}));case xo:return s((function(t){return nt.command(dn(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t}),(function(t,e,n){return nt.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")})),[e.def("+",n,"[0]"),e.def("+",n,"[1]")]}));case mo:return s((function(t){nt.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,r="srcAlpha"in t?t.srcAlpha:t.src,i="dstRGB"in t?t.dstRGB:t.dst,o="dstAlpha"in t?t.dstAlpha:t.dst;return nt.commandParameter(n,Za,a+".srcRGB",e.commandStr),nt.commandParameter(r,Za,a+".srcAlpha",e.commandStr),nt.commandParameter(i,Za,a+".dstRGB",e.commandStr),nt.commandParameter(o,Za,a+".dstAlpha",e.commandStr),nt.command(-1===Qa.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",e.commandStr),[Za[n],Za[i],Za[r],Za[o]]}),(function(e,n,r){var i=e.constants.blendFuncs;function o(o,a){var s=n.def('"',o,a,'" in ',r,"?",r,".",o,a,":",r,".",o);return nt.optional((function(){e.assert(n,s+" in "+i,"invalid "+t+"."+o+a+", must be one of "+Object.keys(Za))})),s}nt.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var a=o("src","RGB"),s=o("dst","RGB");nt.optional((function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+a+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var l=n.def(i,"[",a,"]"),u=n.def(i,"[",o("src","Alpha"),"]");return[l,n.def(i,"[",s,"]"),u,n.def(i,"[",o("dst","Alpha"),"]")]}));case vo:return s((function(n){return"string"==typeof n?(nt.commandParameter(n,m,"invalid "+t,e.commandStr),[m[n],m[n]]):"object"==typeof n?(nt.commandParameter(n.rgb,m,t+".rgb",e.commandStr),nt.commandParameter(n.alpha,m,t+".alpha",e.commandStr),[m[n.rgb],m[n.alpha]]):void nt.commandRaise("invalid blend.equation",e.commandStr)}),(function(e,n,r){var i=e.constants.blendEquations,o=n.def(),a=n.def(),s=e.cond("typeof ",r,'==="string"');return nt.optional((function(){function n(t,n,r){e.assert(t,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(m))}n(s.then,t,r),e.assert(s.else,r+"&&typeof "+r+'==="object"',"invalid "+t),n(s.else,t+".rgb",r+".rgb"),n(s.else,t+".alpha",r+".alpha")})),s.then(o,"=",a,"=",i,"[",r,"];"),s.else(o,"=",i,"[",r,".rgb];",a,"=",i,"[",r,".alpha];"),n(s),[o,a]}));case go:return s((function(t){return nt.command(dn(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),Mt(4,(function(e){return+t[e]}))}),(function(t,e,n){return nt.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),Mt(4,(function(t){return e.def("+",n,"[",t,"]")}))}));case Oo:return s((function(t){return nt.commandType(t,"number",a,e.commandStr),0|t}),(function(t,e,n){return nt.optional((function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")})),e.def(n,"|0")}));case Ro:return s((function(n){nt.commandType(n,"object",a,e.commandStr);var r=n.cmp||"keep",i=n.ref||0,o="mask"in n?n.mask:-1;return nt.commandParameter(r,Ja,t+".cmp",e.commandStr),nt.commandType(i,"number",t+".ref",e.commandStr),nt.commandType(o,"number",t+".mask",e.commandStr),[Ja[r],i,o]}),(function(t,e,n){var r=t.constants.compareFuncs;return nt.optional((function(){function i(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")})),[e.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",Va),e.def(n,".ref|0"),e.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case Lo:case Bo:return s((function(n){nt.commandType(n,"object",a,e.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",o=n.zpass||"keep";return nt.commandParameter(r,ts,t+".fail",e.commandStr),nt.commandParameter(i,ts,t+".zfail",e.commandStr),nt.commandParameter(o,ts,t+".zpass",e.commandStr),[t===Bo?Na:Fa,ts[r],ts[i],ts[o]]}),(function(e,n,r){var i=e.constants.stencilOps;function o(o){return nt.optional((function(){e.assert(n,'!("'+o+'" in '+r+")||("+r+"."+o+" in "+i+")","invalid "+t+"."+o+", must be one of "+Object.keys(ts))})),n.def('"',o,'" in ',r,"?",i,"[",r,".",o,"]:",Va)}return nt.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),[t===Bo?Na:Fa,o("fail"),o("zfail"),o("zpass")]}));case _o:return s((function(t){nt.commandType(t,"object",a,e.commandStr);var n=0|t.factor,r=0|t.units;return nt.commandType(n,"number",a+".factor",e.commandStr),nt.commandType(r,"number",a+".units",e.commandStr),[n,r]}),(function(e,n,r){return nt.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),[n.def(r,".factor|0"),n.def(r,".units|0")]}));case ko:return s((function(t){var n=0;return"front"===t?n=Fa:"back"===t&&(n=Na),nt.command(!!n,a,e.commandStr),n}),(function(t,e,n){return nt.optional((function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),e.def(n,'==="front"?',Fa,":",Na)}));case Mo:return s((function(t){return nt.command("number"==typeof t&&t>=i.lineWidthDims[0]&&t<=i.lineWidthDims[1],"invalid line width, must be a positive number between "+i.lineWidthDims[0]+" and "+i.lineWidthDims[1],e.commandStr),t}),(function(t,e,n){return nt.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+i.lineWidthDims[0]+"&&"+n+"<="+i.lineWidthDims[1],"invalid line width")})),n}));case Eo:return s((function(t){return nt.commandParameter(t,ns,a,e.commandStr),ns[t]}),(function(t,e,n){return nt.optional((function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),e.def(n+'==="cw"?'+za+":"+ja)}));case Co:return s((function(t){return nt.command(dn(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map((function(t){return!!t}))}),(function(t,e,n){return nt.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),Mt(4,(function(t){return"!!"+n+"["+t+"]"}))}));case Io:return s((function(t){nt.command("object"==typeof t&&t,a,e.commandStr);var n="value"in t?t.value:1,r=!!t.invert;return nt.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,r]}),(function(t,e,n){return nt.optional((function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")})),[e.def('"value" in ',n,"?+",n,".value:1"),e.def("!!",n,".invert")]}))}})),o}function z(t,e){var n=t.static,r=t.dynamic,i={};return Object.keys(n).forEach((function(t){var r,o=n[t];if("number"==typeof o||"boolean"==typeof o)r=ss((function(){return o}));else if("function"==typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?r=ss((function(t){return t.link(o)})):"framebuffer"===a||"framebufferCube"===a?(nt.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),r=ss((function(t){return t.link(o.color[0])}))):nt.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else dn(o)?r=ss((function(e){return e.global.def("[",Mt(o.length,(function(n){return nt.command("number"==typeof o[n]||"boolean"==typeof o[n],"invalid uniform "+t,e.commandStr),o[n]})),"]")})):nt.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);r.value=o,i[t]=r})),Object.keys(r).forEach((function(t){var e=r[t];i[t]=ls(e,(function(t,n){return t.invoke(n,e)}))})),i}function j(t,e){var r=t.static,i=t.dynamic,a={};return Object.keys(r).forEach((function(t){var i=r[t],s=n.id(t),l=new v;if(rs(i))l.state=ro,l.buffer=o.getBuffer(o.create(i,aa,!1,!0)),l.type=0;else{var u=o.getBuffer(i);if(u)l.state=ro,l.buffer=u,l.type=0;else if(nt.command("object"==typeof i&&i,"invalid data for attribute "+t,e.commandStr),"constant"in i){var c=i.constant;l.buffer="null",l.state=io,"number"==typeof c?l.x=c:(nt.command(dn(c)&&c.length>0&&c.length<=4,"invalid constant for attribute "+t,e.commandStr),eo.forEach((function(t,e){e<c.length&&(l[t]=c[e])})))}else{u=rs(i.buffer)?o.getBuffer(o.create(i.buffer,aa,!1,!0)):o.getBuffer(i.buffer),nt.command(!!u,'missing buffer for attribute "'+t+'"',e.commandStr);var d=0|i.offset;nt.command(d>=0,'invalid offset for attribute "'+t+'"',e.commandStr);var h=0|i.stride;nt.command(h>=0&&h<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',e.commandStr);var f=0|i.size;nt.command(!("size"in i)||f>0&&f<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',e.commandStr);var p=!!i.normalized,g=0;"type"in i&&(nt.commandParameter(i.type,Oe,"invalid type for attribute "+t,e.commandStr),g=Oe[i.type]);var m=0|i.divisor;"divisor"in i&&(nt.command(0===m||y,'cannot specify divisor for attribute "'+t+'", instancing not supported',e.commandStr),nt.command(m>=0,'invalid divisor for attribute "'+t+'"',e.commandStr)),nt.optional((function(){var n=e.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach((function(e){nt.command(r.indexOf(e)>=0,'unknown parameter "'+e+'" for attribute pointer "'+t+'" (valid parameters are '+r+")",n)}))})),l.buffer=u,l.state=ro,l.size=f,l.normalized=p,l.type=g||u.dtype,l.offset=d,l.stride=h,l.divisor=m}}a[t]=ss((function(t,e){var n=t.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(l).forEach((function(t){r[t]=l[t]})),l.buffer&&(r.buffer=t.link(l.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(i).forEach((function(t){var e=i[t];function n(n,r){var i=n.invoke(r,e),o=n.shared,a=n.constants,s=o.isBufferArgs,l=o.buffer;nt.optional((function(){n.assert(r,i+"&&(typeof "+i+'==="object"||typeof '+i+'==="function")&&('+s+"("+i+")||"+l+".getBuffer("+i+")||"+l+".getBuffer("+i+".buffer)||"+s+"("+i+'.buffer)||("constant" in '+i+"&&(typeof "+i+'.constant==="number"||'+o.isArrayLike+"("+i+".constant))))",'invalid dynamic attribute "'+t+'"')}));var u={isStream:r.def(!1)},c=new v;c.state=ro,Object.keys(c).forEach((function(t){u[t]=r.def(""+c[t])}));var d=u.buffer,h=u.type;function f(t){r(u[t],"=",i,".",t,"|0;")}return r("if(",s,"(",i,")){",u.isStream,"=true;",d,"=",l,".createStream(",aa,",",i,");",h,"=",d,".dtype;","}else{",d,"=",l,".getBuffer(",i,");","if(",d,"){",h,"=",d,".dtype;",'}else if("constant" in ',i,"){",u.state,"=",io,";","if(typeof "+i+'.constant === "number"){',u[eo[0]],"=",i,".constant;",eo.slice(1).map((function(t){return u[t]})).join("="),"=0;","}else{",eo.map((function(t,e){return u[t]+"="+i+".constant.length>"+e+"?"+i+".constant["+e+"]:0;"})).join(""),"}}else{","if(",s,"(",i,".buffer)){",d,"=",l,".createStream(",aa,",",i,".buffer);","}else{",d,"=",l,".getBuffer(",i,".buffer);","}",h,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",d,".dtype;",u.normalized,"=!!",i,".normalized;"),f("size"),f("offset"),f("stride"),f("divisor"),r("}}"),r.exit("if(",u.isStream,"){",l,".destroyStream(",d,");","}"),u}a[t]=ls(e,n)})),a}function G(t,e){var n=t.static,r=t.dynamic;if(qo in n){var i=n[qo];return null!==i&&null===c.getVAO(i)&&(i=c.createVAO(i)),ss((function(t){return t.link(c.getVAO(i))}))}if(qo in r){var o=r[qo];return ls(o,(function(t,e){var n=t.invoke(e,o);return e.def(t.shared.vao+".getVAO("+n+")")}))}return null}function U(t){var e=t.static,n=t.dynamic,r={};return Object.keys(e).forEach((function(t){var n=e[t];r[t]=ss((function(t,e){return"number"==typeof n||"boolean"==typeof n?""+n:t.link(n)}))})),Object.keys(n).forEach((function(t){var e=n[t];r[t]=ls(e,(function(t,n){return t.invoke(n,e)}))})),r}function $(t,e,n,i,o){var a=t.static,s=t.dynamic;nt.optional((function(){var t=[Go,Uo,$o,Vo,Wo,Yo,Ho,Xo,jo,qo].concat(C);function e(e){Object.keys(e).forEach((function(e){nt.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',o.commandStr)}))}e(a),e(s)}));var l=L(t,e),u=O(t),d=R(t,u,o),h=F(t,o),f=N(t,o),p=B(t,o,l);function g(t){var e=d[t];e&&(f[t]=e)}g(zo),g(E(No));var v=Object.keys(f).length>0,m={framebuffer:u,draw:h,shader:p,state:f,dirty:v,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(m.profile=D(t),m.uniforms=z(n,o),m.drawVAO=m.scopeVAO=G(t),!m.drawVAO&&p.program&&!l&&r.angle_instanced_arrays){var y=!0,b=p.program.attributes.map((function(t){var n=e.static[t];return y=y&&!!n,n}));if(y&&b.length>0){var x=c.getVAO(c.createVAO(b));m.drawVAO=new os(null,null,null,(function(t,e){return t.link(x)})),m.useVAO=!0}}return l?m.useVAO=!0:m.attributes=j(e,o),m.context=U(i),m}function V(t,e,n){var r=t.shared.context,i=t.scope();Object.keys(n).forEach((function(o){e.save(r,"."+o);var a=n[o].append(t,e);Array.isArray(a)?i(r,".",o,"=[",a.join(),"];"):i(r,".",o,"=",a,";")})),e(i)}function W(t,e,n,r){var i,o=t.shared,a=o.gl,s=o.framebuffer;b&&(i=e.def(o.extensions,".webgl_draw_buffers"));var l,u=t.constants,c=u.drawBuffer,d=u.backBuffer;l=n?n.append(t,e):e.def(s,".next"),r||e("if(",l,"!==",s,".cur){"),e("if(",l,"){",a,".bindFramebuffer(",qa,",",l,".framebuffer);"),b&&e(i,".drawBuffersWEBGL(",c,"[",l,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",qa,",null);"),b&&e(i,".drawBuffersWEBGL(",d,");"),e("}",s,".cur=",l,";"),r||e("}")}function H(t,e,n){var r=t.shared,i=r.gl,o=t.current,a=t.next,s=r.current,l=r.next,u=t.cond(s,".dirty");C.forEach((function(e){var r,c,d=E(e);if(!(d in n.state))if(d in a){r=a[d],c=o[d];var h=Mt(x[d].length,(function(t){return u.def(r,"[",t,"]")}));u(t.cond(h.map((function(t,e){return t+"!=="+c+"["+e+"]"})).join("||")).then(i,".",k[d],"(",h,");",h.map((function(t,e){return c+"["+e+"]="+t})).join(";"),";"))}else{r=u.def(l,".",d);var f=t.cond(r,"!==",s,".",d);u(f),d in S?f(t.cond(r).then(i,".enable(",S[d],");").else(i,".disable(",S[d],");"),s,".",d,"=",r,";"):f(i,".",k[d],"(",r,");",s,".",d,"=",r,";")}})),0===Object.keys(n.state).length&&u(s,".dirty=false;"),e(u)}function Y(t,e,n,r){var i=t.shared,o=t.current,a=i.current,s=i.gl;is(Object.keys(n)).forEach((function(i){var l=n[i];if(!r||r(l)){var u=l.append(t,e);if(S[i]){var c=S[i];as(l)?e(s,u?".enable(":".disable(",c,");"):e(t.cond(u).then(s,".enable(",c,");").else(s,".disable(",c,");")),e(a,".",i,"=",u,";")}else if(dn(u)){var d=o[i];e(s,".",k[i],"(",u,");",u.map((function(t,e){return d+"["+e+"]="+t})).join(";"),";")}else e(s,".",k[i],"(",u,");",a,".",i,"=",u,";")}}))}function X(t,e){y&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function q(t,e,n,r,i){var o,a,s,l=t.shared,u=t.stats,c=l.current,d=l.timer,h=n.profile;function f(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function g(t){t(o=e.def(),"=",f(),";"),"string"==typeof i?t(u,".count+=",i,";"):t(u,".count++;"),p&&(r?t(a=e.def(),"=",d,".getNumPendingQueries();"):t(d,".beginQuery(",u,");"))}function v(t){t(u,".cpuTime+=",f(),"-",o,";"),p&&(r?t(d,".pushScopeStats(",a,",",d,".getNumPendingQueries(),",u,");"):t(d,".endQuery();"))}function m(t){var n=e.def(c,".profile");e(c,".profile=",t,";"),e.exit(c,".profile=",n,";")}if(h){if(as(h))return void(h.enable?(g(e),v(e.exit),m("true")):m("false"));m(s=h.append(t,e))}else s=e.def(c,".profile");var y=t.block();g(y),e("if(",s,"){",y,"}");var b=t.block();v(b),e.exit("if(",s,"){",b,"}")}function K(t,e,n,r,i){var o=t.shared;function a(t){switch(t){case xa:case ka:case _a:return 2;case wa:case Ea:case Ta:return 3;case Ca:case Ma:case Pa:return 4;default:return 1}}function s(n,r,i){var a=o.gl,s=e.def(n,".location"),l=e.def(o.attributes,"[",s,"]"),u=i.state,c=i.buffer,d=[i.x,i.y,i.z,i.w],h=["buffer","normalized","offset","stride"];function f(){e("if(!",l,".buffer){",a,".enableVertexAttribArray(",s,");}");var n,o=i.type;if(n=i.size?e.def(i.size,"||",r):r,e("if(",l,".type!==",o,"||",l,".size!==",n,"||",h.map((function(t){return l+"."+t+"!=="+i[t]})).join("||"),"){",a,".bindBuffer(",aa,",",c,".buffer);",a,".vertexAttribPointer(",[s,n,o,i.normalized,i.stride,i.offset],");",l,".type=",o,";",l,".size=",n,";",h.map((function(t){return l+"."+t+"="+i[t]+";"})).join(""),"}"),y){var u=i.divisor;e("if(",l,".divisor!==",u,"){",t.instancing,".vertexAttribDivisorANGLE(",[s,u],");",l,".divisor=",u,";}")}}function p(){e("if(",l,".buffer){",a,".disableVertexAttribArray(",s,");",l,".buffer=null;","}if(",eo.map((function(t,e){return l+"."+t+"!=="+d[e]})).join("||"),"){",a,".vertexAttrib4f(",s,",",d,");",eo.map((function(t,e){return l+"."+t+"="+d[e]+";"})).join(""),"}")}u===ro?f():u===io?p():(e("if(",u,"===",ro,"){"),f(),e("}else{"),p(),e("}"))}r.forEach((function(r){var o,l=r.name,u=n.attributes[l];if(u){if(!i(u))return;o=u.append(t,e)}else{if(!i(us))return;var c=t.scopeAttrib(l);nt.optional((function(){t.assert(e,c+".state","missing attribute "+l)})),o={},Object.keys(new v).forEach((function(t){o[t]=e.def(c,".",t)}))}s(t.link(r),a(r.info.type),o)}))}function Z(t,e,r,i,o){for(var a,s=t.shared,l=s.gl,u=0;u<i.length;++u){var c,d=i[u],h=d.name,f=d.info.type,p=r.uniforms[h],g=t.link(d)+".location";if(p){if(!o(p))continue;if(as(p)){var v=p.value;if(nt.command(null!=v,'missing uniform "'+h+'"',t.commandStr),f===Ra||f===La){nt.command("function"==typeof v&&(f===Ra&&("texture2d"===v._reglType||"framebuffer"===v._reglType)||f===La&&("textureCube"===v._reglType||"framebufferCube"===v._reglType)),"invalid texture for uniform "+h,t.commandStr);var m=t.link(v._texture||v.color[0]._texture);e(l,".uniform1i(",g,",",m+".bind());"),e.exit(m,".unbind();")}else if(f===Ia||f===Da||f===Oa){nt.optional((function(){nt.command(dn(v),"invalid matrix for uniform "+h,t.commandStr),nt.command(f===Ia&&4===v.length||f===Da&&9===v.length||f===Oa&&16===v.length,"invalid length for matrix uniform "+h,t.commandStr)}));var y=t.global.def("new Float32Array(["+Array.prototype.slice.call(v)+"])"),b=2;f===Da?b=3:f===Oa&&(b=4),e(l,".uniformMatrix",b,"fv(",g,",false,",y,");")}else{switch(f){case ba:nt.commandType(v,"number","uniform "+h,t.commandStr),a="1f";break;case xa:nt.command(dn(v)&&2===v.length,"uniform "+h,t.commandStr),a="2f";break;case wa:nt.command(dn(v)&&3===v.length,"uniform "+h,t.commandStr),a="3f";break;case Ca:nt.command(dn(v)&&4===v.length,"uniform "+h,t.commandStr),a="4f";break;case Aa:nt.commandType(v,"boolean","uniform "+h,t.commandStr),a="1i";break;case Sa:nt.commandType(v,"number","uniform "+h,t.commandStr),a="1i";break;case _a:case ka:nt.command(dn(v)&&2===v.length,"uniform "+h,t.commandStr),a="2i";break;case Ta:case Ea:nt.command(dn(v)&&3===v.length,"uniform "+h,t.commandStr),a="3i";break;case Pa:case Ma:nt.command(dn(v)&&4===v.length,"uniform "+h,t.commandStr),a="4i"}e(l,".uniform",a,"(",g,",",dn(v)?Array.prototype.slice.call(v):v,");")}continue}c=p.append(t,e)}else{if(!o(us))continue;c=e.def(s.uniforms,"[",n.id(h),"]")}f===Ra?(nt(!Array.isArray(c),"must specify a scalar prop for textures"),e("if(",c,"&&",c,'._reglType==="framebuffer"){',c,"=",c,".color[0];","}")):f===La&&(nt(!Array.isArray(c),"must specify a scalar prop for cube maps"),e("if(",c,"&&",c,'._reglType==="framebufferCube"){',c,"=",c,".color[0];","}")),nt.optional((function(){function n(n,r){t.assert(e,n,'bad data or missing for uniform "'+h+'".  '+r)}function r(t){nt(!Array.isArray(c),"must not specify an array type for uniform"),n("typeof "+c+'==="'+t+'"',"invalid type, expected "+t)}function i(e,r){Array.isArray(c)?nt(c.length===e,"must have length "+e):n(s.isArrayLike+"("+c+")&&"+c+".length==="+e,"invalid vector, should have length "+e,t.commandStr)}function o(e){nt(!Array.isArray(c),"must not specify a value type"),n("typeof "+c+'==="function"&&'+c+'._reglType==="texture'+(e===la?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(f){case Sa:r("number");break;case ka:i(2);break;case Ea:i(3);break;case Ma:i(4);break;case ba:r("number");break;case xa:i(2);break;case wa:i(3);break;case Ca:i(4);break;case Aa:r("boolean");break;case _a:i(2);break;case Ta:i(3);break;case Pa:case Ia:i(4);break;case Da:i(9);break;case Oa:i(16);break;case Ra:o(la);break;case La:o(ua)}}));var x=1;switch(f){case Ra:case La:var w=e.def(c,"._texture");e(l,".uniform1i(",g,",",w,".bind());"),e.exit(w,".unbind();");continue;case Sa:case Aa:a="1i";break;case ka:case _a:a="2i",x=2;break;case Ea:case Ta:a="3i",x=3;break;case Ma:case Pa:a="4i",x=4;break;case ba:a="1f";break;case xa:a="2f",x=2;break;case wa:a="3f",x=3;break;case Ca:a="4f",x=4;break;case Ia:a="Matrix2fv";break;case Da:a="Matrix3fv";break;case Oa:a="Matrix4fv"}if(e(l,".uniform",a,"(",g,","),"M"===a.charAt(0)){var C=Math.pow(f-Ia+2,2),S=t.global.def("new Float32Array(",C,")");Array.isArray(c)?e("false,(",Mt(C,(function(t){return S+"["+t+"]="+c[t]})),",",S,")"):e("false,(Array.isArray(",c,")||",c," instanceof Float32Array)?",c,":(",Mt(C,(function(t){return S+"["+t+"]="+c+"["+t+"]"})),",",S,")")}else x>1?e(Mt(x,(function(t){return Array.isArray(c)?c[t]:c+"["+t+"]"}))):(nt(!Array.isArray(c),"uniform value must not be an array"),e(c));e(");")}}function Q(t,e,n,r){var i=t.shared,o=i.gl,a=i.draw,s=r.draw;function l(){var i,l=s.elements,u=e;return l?((l.contextDep&&r.contextDynamic||l.propDep)&&(u=n),i=l.append(t,u)):i=u.def(a,".",Vo),i&&u("if("+i+")"+o+".bindBuffer("+sa+","+i+".buffer.buffer);"),i}function u(){var i,o=s.count,l=e;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(l=n),i=o.append(t,l),nt.optional((function(){o.MISSING&&t.assert(e,"false","missing vertex count"),o.DYNAMIC&&t.assert(l,i+">=0","missing vertex count")}))):(i=l.def(a,".",Ho),nt.optional((function(){t.assert(l,i+">=0","missing vertex count")}))),i}var c=l();function d(i){var o=s[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(t,n):o.append(t,e):e.def(a,".",i)}var h,f,p=d(Wo),g=d(Yo),v=u();if("number"==typeof v){if(0===v)return}else n("if(",v,"){"),n.exit("}");y&&(h=d(Xo),f=t.instancing);var m=c+".type",b=s.elements&&as(s.elements);function x(){function t(){n(f,".drawElementsInstancedANGLE(",[p,v,m,g+"<<(("+m+"-"+no+")>>1)",h],");")}function e(){n(f,".drawArraysInstancedANGLE(",[p,g,v,h],");")}c?b?t():(n("if(",c,"){"),t(),n("}else{"),e(),n("}")):e()}function w(){function t(){n(o+".drawElements("+[p,v,m,g+"<<(("+m+"-"+no+")>>1)"]+");")}function e(){n(o+".drawArrays("+[p,g,v]+");")}c?b?t():(n("if(",c,"){"),t(),n("}else{"),e(),n("}")):e()}y&&("number"!=typeof h||h>=0)?"string"==typeof h?(n("if(",h,">0){"),x(),n("}else if(",h,"<0){"),w(),n("}")):x():w()}function J(t,e,n,r,i){var o=I(),a=o.proc("body",i);return nt.optional((function(){o.commandStr=e.commandStr,o.command=o.link(e.commandStr)})),y&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),t(o,a,n,r),o.compile().body}function tt(t,e,n,r){X(t,e),n.useVAO?n.drawVAO?e(t.shared.vao,".setVAO(",n.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),K(t,e,n,r.attributes,(function(){return!0}))),Z(t,e,n,r.uniforms,(function(){return!0})),Q(t,e,e,n)}function et(t,e){var n=t.proc("draw",1);X(t,n),V(t,n,e.context),W(t,n,e.framebuffer),H(t,n,e),Y(t,n,e.state),q(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)tt(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var i=t.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(t.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",t.link((function(n){return J(tt,t,e,n,1)})),"(",r,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}function rt(t,e,n,r){function i(){return!0}t.batchId="a1",X(t,e),K(t,e,n,r.attributes,i),Z(t,e,n,r.uniforms,i),Q(t,e,e,n)}function it(t,e,n,r){X(t,e);var i=n.contextDep,o=e.def(),a="a0",s="a1",l=e.def();t.shared.props=l,t.batchId=o;var u=t.scope(),c=t.scope();function d(t){return t.contextDep&&i||t.propDep}function h(t){return!d(t)}if(e(u.entry,"for(",o,"=0;",o,"<",s,";++",o,"){",l,"=",a,"[",o,"];",c,"}",u.exit),n.needsContext&&V(t,c,n.context),n.needsFramebuffer&&W(t,c,n.framebuffer),Y(t,c,n.state,d),n.profile&&d(n.profile)&&q(t,c,n,!1,!0),r)n.useVAO?n.drawVAO?d(n.drawVAO)?c(t.shared.vao,".setVAO(",n.drawVAO.append(t,c),");"):u(t.shared.vao,".setVAO(",n.drawVAO.append(t,u),");"):u(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(u(t.shared.vao,".setVAO(null);"),K(t,u,n,r.attributes,h),K(t,c,n,r.attributes,d)),Z(t,u,n,r.uniforms,h),Z(t,c,n,r.uniforms,d),Q(t,u,c,n);else{var f=t.global.def("{}"),p=n.shader.progVar.append(t,c),g=c.def(p,".id"),v=c.def(f,"[",g,"]");c(t.shared.gl,".useProgram(",p,".program);","if(!",v,"){",v,"=",f,"[",g,"]=",t.link((function(e){return J(rt,t,n,e,2)})),"(",p,");}",v,".call(this,a0[",o,"],",o,");")}}function ot(t,e){var n=t.proc("batch",2);t.batchId="0",X(t,n);var r=!1,i=!0;Object.keys(e.context).forEach((function(t){r=r||e.context[t].propDep})),r||(V(t,n,e.context),i=!1);var o=e.framebuffer,a=!1;function s(t){return t.contextDep&&r||t.propDep}o?(o.propDep?r=a=!0:o.contextDep&&r&&(a=!0),a||W(t,n,o)):W(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(r=!0),H(t,n,e),Y(t,n,e.state,(function(t){return!s(t)})),e.profile&&s(e.profile)||q(t,n,e,!1,"a1"),e.contextDep=r,e.needsContext=i,e.needsFramebuffer=a;var l=e.shader.progVar;if(l.contextDep&&r||l.propDep)it(t,n,e,null);else{var u=l.append(t,n);if(n(t.shared.gl,".useProgram(",u,".program);"),e.shader.program)it(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var c=t.global.def("{}"),d=n.def(u,".id"),h=n.def(c,"[",d,"]");n(t.cond(h).then(h,".call(this,a0,a1);").else(h,"=",c,"[",d,"]=",t.link((function(n){return J(it,t,e,n,2)})),"(",u,");",h,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}function at(t,e){var r=t.proc("scope",3);t.batchId="a2";var i=t.shared,o=i.current;function a(n){var o=e.shader[n];o&&r.set(i.shader,"."+n,o.append(t,r))}V(t,r,e.context),e.framebuffer&&e.framebuffer.append(t,r),is(Object.keys(e.state)).forEach((function(n){var o=e.state[n].append(t,r);dn(o)?o.forEach((function(e,i){r.set(t.next[n],"["+i+"]",e)})):r.set(i.next,"."+n,o)})),q(t,r,e,!0,!0),[Vo,Yo,Ho,Xo,Wo].forEach((function(n){var o=e.draw[n];o&&r.set(i.draw,"."+n,""+o.append(t,r))})),Object.keys(e.uniforms).forEach((function(o){var a=e.uniforms[o].append(t,r);Array.isArray(a)&&(a="["+a.join()+"]"),r.set(i.uniforms,"["+n.id(o)+"]",a)})),Object.keys(e.attributes).forEach((function(n){var i=e.attributes[n].append(t,r),o=t.scopeAttrib(n);Object.keys(new v).forEach((function(t){r.set(o,"."+t,i[t])}))})),e.scopeVAO&&r.set(i.vao,".targetVAO",e.scopeVAO.append(t,r)),a(Uo),a($o),Object.keys(e.state).length>0&&(r(o,".dirty=true;"),r.exit(o,".dirty=true;")),r("a1(",t.shared.context,",a0,",t.batchId,");")}function st(t){if("object"==typeof t&&!dn(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(pt.isDynamic(t[e[n]]))return!0;return!1}}function lt(t,e,n){var r=e.static[n];if(r&&st(r)){var i=t.global,o=Object.keys(r),a=!1,s=!1,l=!1,u=t.global.def("{}");o.forEach((function(e){var n=r[e];if(pt.isDynamic(n)){"function"==typeof n&&(n=r[e]=pt.unbox(n));var o=ls(n,null);a=a||o.thisDep,l=l||o.propDep,s=s||o.contextDep}else{switch(i(u,".",e,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(t.link(n))}i(";")}})),e.dynamic[n]=new pt.DynamicVariable(uo,{thisDep:a,contextDep:s,propDep:l,ref:u,append:c}),delete e.static[n]}function c(t,e){o.forEach((function(n){var i=r[n];if(pt.isDynamic(i)){var o=t.invoke(e,i);e(u,".",n,"=",o,";")}}))}}function ut(t,n,r,i,o){var a=I();a.stats=a.link(o),Object.keys(n.static).forEach((function(t){lt(a,n,t)})),oa.forEach((function(e){lt(a,t,e)}));var s=$(t,n,r,i,a);return et(a,s),at(a,s),ot(a,s),e(a.compile(),{destroy:function(){s.shader.program.destroy()}})}return{next:w,current:x,procs:function(){var t=I(),e=t.proc("poll"),n=t.proc("refresh"),o=t.block();e(o),n(o);var a,s=t.shared,l=s.gl,u=s.next,c=s.current;o(c,".dirty=false;"),W(t,e),W(t,n,null,!0),y&&(a=t.link(y)),r.oes_vertex_array_object&&n(t.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var d=0;d<i.maxAttributes;++d){var h=n.def(s.attributes,"[",d,"]"),f=t.cond(h,".buffer");f.then(l,".enableVertexAttribArray(",d,");",l,".bindBuffer(",aa,",",h,".buffer.buffer);",l,".vertexAttribPointer(",d,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);").else(l,".disableVertexAttribArray(",d,");",l,".vertexAttrib4f(",d,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;"),n(f),y&&n(a,".vertexAttribDivisorANGLE(",d,",",h,".divisor);")}return n(t.shared.vao,".currentVAO=null;",t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"),Object.keys(S).forEach((function(r){var i=S[r],a=o.def(u,".",r),s=t.block();s("if(",a,"){",l,".enable(",i,")}else{",l,".disable(",i,")}",c,".",r,"=",a,";"),n(s),e("if(",a,"!==",c,".",r,"){",s,"}")})),Object.keys(k).forEach((function(r){var i,a,s=k[r],d=x[r],h=t.block();if(h(l,".",s,"("),dn(d)){var f=d.length;i=t.global.def(u,".",r),a=t.global.def(c,".",r),h(Mt(f,(function(t){return i+"["+t+"]"})),");",Mt(f,(function(t){return a+"["+t+"]="+i+"["+t+"];"})).join("")),e("if(",Mt(f,(function(t){return i+"["+t+"]!=="+a+"["+t+"]"})).join("||"),"){",h,"}")}else i=o.def(u,".",r),a=o.def(c,".",r),h(i,");",c,".",r,"=",i,";"),e("if(",i,"!==",a,"){",h,"}");n(h)})),t.compile()}(),compile:ut}}function ds(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var hs=34918,fs=34919,ps=35007,gs=function(t,e){if(!e.ext_disjoint_timer_query)return null;var n=[];function r(){return n.pop()||e.ext_disjoint_timer_query.createQueryEXT()}function i(t){n.push(t)}var o=[];function a(t){var n=r();e.ext_disjoint_timer_query.beginQueryEXT(ps,n),o.push(n),f(o.length-1,o.length,t)}function s(){e.ext_disjoint_timer_query.endQueryEXT(ps)}function l(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var u=[];function c(){return u.pop()||new l}function d(t){u.push(t)}var h=[];function f(t,e,n){var r=c();r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,h.push(r)}var p=[],g=[];function v(){var t,n,r=o.length;if(0!==r){g.length=Math.max(g.length,r+1),p.length=Math.max(p.length,r+1),p[0]=0,g[0]=0;var a=0;for(t=0,n=0;n<o.length;++n){var s=o[n];e.ext_disjoint_timer_query.getQueryObjectEXT(s,fs)?(a+=e.ext_disjoint_timer_query.getQueryObjectEXT(s,hs),i(s)):o[t++]=s,p[n+1]=a,g[n+1]=t}for(o.length=t,t=0,n=0;n<h.length;++n){var l=h[n],u=l.startQueryIndex,c=l.endQueryIndex;l.sum+=p[c]-p[u];var f=g[u],v=g[c];v===f?(l.stats.gpuTime+=l.sum/1e6,d(l)):(l.startQueryIndex=f,l.endQueryIndex=v,h[t++]=l)}h.length=t}}return{beginQuery:a,endQuery:s,pushScopeStats:f,update:v,getNumPendingQueries:function(){return o.length},clear:function(){n.push.apply(n,o);for(var t=0;t<n.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(n[t]);o.length=0,n.length=0},restore:function(){o.length=0,n.length=0}}},vs=16384,ms=256,ys=1024,bs=34962,xs="webglcontextlost",ws="webglcontextrestored",Cs=1,Ss=2,ks=3;function Es(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}function Ms(t){var n=kt(t);if(!n)return null;var r=n.gl,i=r.getContextAttributes(),o=r.isContextLost(),a=Et(r,n);if(!a)return null;var s=mt(),l=ds(),u=a.extensions,c=gs(r,u),d=vt(),h=r.drawingBufferWidth,f=r.drawingBufferHeight,p={tick:0,time:0,viewportWidth:h,viewportHeight:f,framebufferWidth:h,framebufferHeight:f,drawingBufferWidth:h,drawingBufferHeight:f,pixelRatio:n.pixelRatio},g={},v={elements:null,primitive:4,count:-1,offset:0,instances:-1},m=Ce(r,u),y=We(r,l,n,x),b=Gi(r,u,m,l,y);function x(t){return b.destroyBuffer(t)}var w=an(r,u,y,l),C=Hi(r,s,l,n),S=qr(r,u,m,(function(){M.procs.poll()}),p,l,n),k=ui(r,u,m,l,n),E=Fi(r,u,m,S,k,l),M=cs(r,s,u,m,y,w,S,E,g,b,C,v,p,c,n),A=Zi(r,E,M.procs.poll,p,i,u,m),_=M.next,T=r.canvas,P=[],I=[],D=[],O=[n.onDestroy],R=null;function L(){if(0===P.length)return c&&c.update(),void(R=null);R=gt.next(L),Y();for(var t=P.length-1;t>=0;--t){var e=P[t];e&&e(p,null,0)}r.flush(),c&&c.update()}function B(){!R&&P.length>0&&(R=gt.next(L))}function F(){R&&(gt.cancel(L),R=null)}function N(t){t.preventDefault(),o=!0,F(),I.forEach((function(t){t()}))}function z(t){r.getError(),o=!1,a.restore(),C.restore(),y.restore(),S.restore(),k.restore(),E.restore(),b.restore(),c&&c.restore(),M.procs.refresh(),B(),D.forEach((function(t){t()}))}function j(){P.length=0,F(),T&&(T.removeEventListener(xs,N),T.removeEventListener(ws,z)),C.clear(),E.clear(),k.clear(),S.clear(),w.clear(),y.clear(),b.clear(),c&&c.clear(),O.forEach((function(t){t()}))}function G(t){function n(t){var n=e({},t);function r(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach((function(r){n[t+"."+r]=e[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in t&&(n.vao=t.vao),n}function r(t,e){var n={},r={};return Object.keys(t).forEach((function(i){var o=t[i];if(pt.isDynamic(o))r[i]=pt.unbox(o,i);else{if(e&&Array.isArray(o))for(var a=0;a<o.length;++a)if(pt.isDynamic(o[a]))return void(r[i]=pt.unbox(o,i));n[i]=o}})),{dynamic:r,static:n}}nt(!!t,"invalid args to regl({...})"),nt.type(t,"object","invalid args to regl({...})");var i=r(t.context||{},!0),a=r(t.uniforms||{},!0),s=r(t.attributes||{},!1),l=r(n(t),!1),u={gpuTime:0,cpuTime:0,count:0},c=M.compile(l,s,a,i,u),d=c.draw,h=c.batch,f=c.scope,p=[];function g(t){for(;p.length<t;)p.push(null);return p}function v(t,e){var n;if(o&&nt.raise("context lost"),"function"==typeof t)return f.call(this,null,t,0);if("function"==typeof e)if("number"==typeof t)for(n=0;n<t;++n)f.call(this,null,e,n);else{if(!Array.isArray(t))return f.call(this,t,e,0);for(n=0;n<t.length;++n)f.call(this,t[n],e,n)}else if("number"==typeof t){if(t>0)return h.call(this,g(0|t),0|t)}else{if(!Array.isArray(t))return d.call(this,t);if(t.length)return h.call(this,t,t.length)}}return e(v,{stats:u,destroy:function(){c.destroy()}})}T&&(T.addEventListener(xs,N,!1),T.addEventListener(ws,z,!1));var U=E.setFBO=G({framebuffer:pt.define.call(null,Cs,"framebuffer")});function $(t,e){var n=0;M.procs.poll();var i=e.color;i&&(r.clearColor(+i[0]||0,+i[1]||0,+i[2]||0,+i[3]||0),n|=vs),"depth"in e&&(r.clearDepth(+e.depth),n|=ms),"stencil"in e&&(r.clearStencil(0|e.stencil),n|=ys),nt(!!n,"called regl.clear with no buffer specified"),r.clear(n)}function V(t){if(nt("object"==typeof t&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var n=0;n<6;++n)U(e({framebuffer:t.framebuffer.faces[n]},t),$);else U(t,$);else $(null,t)}function W(t){function e(){var e=Es(P,t);function n(){var t=Es(P,n);P[t]=P[P.length-1],P.length-=1,P.length<=0&&F()}nt(e>=0,"cannot cancel a frame twice"),P[e]=n}return nt.type(t,"function","regl.frame() callback must be a function"),P.push(t),B(),{cancel:e}}function H(){var t=_.viewport,e=_.scissor_box;t[0]=t[1]=e[0]=e[1]=0,p.viewportWidth=p.framebufferWidth=p.drawingBufferWidth=t[2]=e[2]=r.drawingBufferWidth,p.viewportHeight=p.framebufferHeight=p.drawingBufferHeight=t[3]=e[3]=r.drawingBufferHeight}function Y(){p.tick+=1,p.time=q(),H(),M.procs.poll()}function X(){S.refresh(),H(),M.procs.refresh(),c&&c.update()}function q(){return(vt()-d)/1e3}function K(t,e){var n;switch(nt.type(e,"function","listener callback must be a function"),t){case"frame":return W(e);case"lost":n=I;break;case"restore":n=D;break;case"destroy":n=O;break;default:nt.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}}X();var Z=e(G,{clear:V,prop:pt.define.bind(null,Cs),context:pt.define.bind(null,Ss),this:pt.define.bind(null,ks),draw:G({}),buffer:function(t){return y.create(t,bs,!1,!1)},elements:function(t){return w.create(t,!1)},texture:S.create2D,cube:S.createCube,renderbuffer:k.create,framebuffer:E.create,framebufferCube:E.createCube,vao:b.createVAO,attributes:i,frame:W,on:K,limits:m,hasExtension:function(t){return m.extensions.indexOf(t.toLowerCase())>=0},read:A,destroy:j,_gl:r,_refresh:X,poll:function(){Y(),c&&c.update()},now:q,stats:l});return n.onDone(null,Z),Z}return Ms}()})),QN=function(){function t(e,n){NI(this,t),this.attribute=void 0,this.buffer=void 0;var r=n.buffer,i=n.offset,o=n.stride,a=n.normalized,s=n.size,l=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:i||0,stride:o||0,normalized:a||!1,divisor:l||0},s&&(this.attribute.size=s)}return jI(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),JN=(jO(RN={},YO.POINTS,"points"),jO(RN,YO.LINES,"lines"),jO(RN,YO.LINE_LOOP,"line loop"),jO(RN,YO.LINE_STRIP,"line strip"),jO(RN,YO.TRIANGLES,"triangles"),jO(RN,YO.TRIANGLE_FAN,"triangle fan"),jO(RN,YO.TRIANGLE_STRIP,"triangle strip"),RN),tz=(jO(LN={},YO.STATIC_DRAW,"static"),jO(LN,YO.DYNAMIC_DRAW,"dynamic"),jO(LN,YO.STREAM_DRAW,"stream"),LN),ez=(jO(BN={},YO.BYTE,"int8"),jO(BN,YO.UNSIGNED_INT,"int16"),jO(BN,YO.INT,"int32"),jO(BN,YO.UNSIGNED_BYTE,"uint8"),jO(BN,YO.UNSIGNED_SHORT,"uint16"),jO(BN,YO.UNSIGNED_INT,"uint32"),jO(BN,YO.FLOAT,"float"),BN),nz=(jO(FN={},YO.ALPHA,"alpha"),jO(FN,YO.LUMINANCE,"luminance"),jO(FN,YO.LUMINANCE_ALPHA,"luminance alpha"),jO(FN,YO.RGB,"rgb"),jO(FN,YO.RGBA,"rgba"),jO(FN,YO.RGBA4,"rgba4"),jO(FN,YO.RGB5_A1,"rgb5 a1"),jO(FN,YO.RGB565,"rgb565"),jO(FN,YO.DEPTH_COMPONENT,"depth"),jO(FN,YO.DEPTH_STENCIL,"depth stencil"),FN),rz=(jO(NN={},YO.DONT_CARE,"dont care"),jO(NN,YO.NICEST,"nice"),jO(NN,YO.FASTEST,"fast"),NN),iz=(jO(zN={},YO.NEAREST,"nearest"),jO(zN,YO.LINEAR,"linear"),jO(zN,YO.LINEAR_MIPMAP_LINEAR,"mipmap"),jO(zN,YO.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),jO(zN,YO.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),jO(zN,YO.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),zN),oz=(jO(jN={},YO.REPEAT,"repeat"),jO(jN,YO.CLAMP_TO_EDGE,"clamp"),jO(jN,YO.MIRRORED_REPEAT,"mirror"),jN),az=(jO(GN={},YO.NONE,"none"),jO(GN,YO.BROWSER_DEFAULT_WEBGL,"browser"),GN),sz=(jO(UN={},YO.NEVER,"never"),jO(UN,YO.ALWAYS,"always"),jO(UN,YO.LESS,"less"),jO(UN,YO.LEQUAL,"lequal"),jO(UN,YO.GREATER,"greater"),jO(UN,YO.GEQUAL,"gequal"),jO(UN,YO.EQUAL,"equal"),jO(UN,YO.NOTEQUAL,"notequal"),UN),lz=(jO($N={},YO.FUNC_ADD,"add"),jO($N,YO.MIN_EXT,"min"),jO($N,YO.MAX_EXT,"max"),jO($N,YO.FUNC_SUBTRACT,"subtract"),jO($N,YO.FUNC_REVERSE_SUBTRACT,"reverse subtract"),$N),uz=(jO(VN={},YO.ZERO,"zero"),jO(VN,YO.ONE,"one"),jO(VN,YO.SRC_COLOR,"src color"),jO(VN,YO.ONE_MINUS_SRC_COLOR,"one minus src color"),jO(VN,YO.SRC_ALPHA,"src alpha"),jO(VN,YO.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),jO(VN,YO.DST_COLOR,"dst color"),jO(VN,YO.ONE_MINUS_DST_COLOR,"one minus dst color"),jO(VN,YO.DST_ALPHA,"dst alpha"),jO(VN,YO.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),jO(VN,YO.CONSTANT_COLOR,"constant color"),jO(VN,YO.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),jO(VN,YO.CONSTANT_ALPHA,"constant alpha"),jO(VN,YO.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),jO(VN,YO.SRC_ALPHA_SATURATE,"src alpha saturate"),VN),cz=(jO(WN={},YO.NEVER,"never"),jO(WN,YO.ALWAYS,"always"),jO(WN,YO.LESS,"less"),jO(WN,YO.LEQUAL,"lequal"),jO(WN,YO.GREATER,"greater"),jO(WN,YO.GEQUAL,"gequal"),jO(WN,YO.EQUAL,"equal"),jO(WN,YO.NOTEQUAL,"notequal"),WN),dz=(jO(HN={},YO.ZERO,"zero"),jO(HN,YO.KEEP,"keep"),jO(HN,YO.REPLACE,"replace"),jO(HN,YO.INVERT,"invert"),jO(HN,YO.INCR,"increment"),jO(HN,YO.DECR,"decrement"),jO(HN,YO.INCR_WRAP,"increment wrap"),jO(HN,YO.DECR_WRAP,"decrement wrap"),HN),hz=(jO(YN={},YO.FRONT,"front"),jO(YN,YO.BACK,"back"),YN),fz=function(){function t(e,n){NI(this,t),this.buffer=void 0;var r=n.data,i=n.usage,o=n.type;this.buffer=e.buffer({data:r,usage:tz[i||YO.STATIC_DRAW],type:ez[o||YO.UNSIGNED_BYTE]})}return jI(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.buffer.subdata(e,n)}}]),t}();function pz(t){return function(t){if(Array.isArray(t))return ZI(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||QI(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var gz={};gz["[object Float32Array]"]=gz["[object Float64Array]"]=gz["[object Int8Array]"]=gz["[object Int16Array]"]=gz["[object Int32Array]"]=gz["[object Uint8Array]"]=gz["[object Uint8ClampedArray]"]=gz["[object Uint16Array]"]=gz["[object Uint32Array]"]=!0,gz["[object Arguments]"]=gz["[object Array]"]=gz["[object ArrayBuffer]"]=gz["[object Boolean]"]=gz["[object DataView]"]=gz["[object Date]"]=gz["[object Error]"]=gz["[object Function]"]=gz["[object Map]"]=gz["[object Number]"]=gz["[object Object]"]=gz["[object RegExp]"]=gz["[object Set]"]=gz["[object String]"]=gz["[object WeakMap]"]=!1;var vz=Object.prototype.toString;var mz=function(t){return function(t){return!!t&&"object"===kO(t)}(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!!gz[vz.call(t)]};function yz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bz(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yz(Object(n),!0).forEach((function(e){jO(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yz(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xz=0,wz=function(){function t(e,n){var r=this;NI(this,t),this.reGl=e,this.context=n,this.entity=XI(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var i={};this.context.uniforms.forEach((function(t){var e=t.name,n=t.type,o=t.data,a=t.isReferer,s=t.storageClass;if(s===QB.StorageBuffer){if(a)r.textureCache[e]={data:void 0},i["".concat(e,"Size")]=function(){return o.compiledBundle.context.output.textureSize};else{r.textureCache[e]=r.calcDataTexture(e,n,o);var l=r.textureCache[e],u=l.textureWidth,c=l.isOutput;i["".concat(e,"Size")]=[u,u],c&&(r.outputTextureName=e,r.context.needPingpong&&(r.outputTextureName="".concat(e,"Output"),r.textureCache[r.outputTextureName]=r.calcDataTexture(e,n,o)))}i[e]=function(){return r.textureCache[e].texture}}else if(s===QB.Uniform){if(o&&(Array.isArray(o)||mz(o))&&o.length>16)throw new Error("invalid data type ".concat(n));i[e]=function(){return t.data}}}));var o=this.getOuputDataTexture(),a=o.textureWidth,s=o.texelCount;i.u_OutputTextureSize=[a,a],i.u_OutputTexelCount=s,this.context.output.textureSize=[a,a];var l={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(this.context.shader),uniforms:i,vert:"attribute vec3 a_Position;\nattribute vec2 a_TexCoord;\n\nvarying vec2 v_TexCoord;\n\nvoid main() {\n  gl_Position = vec4(a_Position, 1.0);\n  v_TexCoord = a_TexCoord;\n}",primitive:"triangle strip",count:4};this.computeCommand=this.reGl(l)}var e;return jI(t,[{key:"run",value:function(){var t=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use((function(){t.computeCommand()}))}},{key:"readData",value:(e=HI(VI.mark((function t(){var e,n,r,i,o,a,s,l,u=this;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.reGl({framebuffer:this.texFBO})((function(){e=u.reGl.read()})),!e){t.next=6;break}if(n=this.getOuputDataTexture(),r=n.originalDataLength,i=n.elementsPerTexel,o=n.typedArrayConstructor,a=void 0===o?Float32Array:o,s=[],4!==i)for(l=0;l<e.length;l+=4)1===i?s.push(e[l]):2===i?s.push(e[l],e[l+1]):s.push(e[l],e[l+1],e[l+2]);else s=e;return t.abrupt("return",new a(s.slice(0,r)));case 6:return t.abrupt("return",new Float32Array);case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"confirmInput",value:function(t,e){var n;this.entity===t.entity?(this.dynamicPingpong=!0,n=this):n=t,this.textureCache[e].id=n.getOuputDataTexture().id,this.textureCache[e].texture=n.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(t,e){var n=this.context.uniforms.find((function(e){return e.name===t}));if(n){var r=this.calcDataTexture(t,n.type,e),i=r.texture,o=r.data;this.textureCache[t].data=o,this.textureCache[t].texture=i}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var t=this.context.output.name;this.textureCache[t].id=this.getOuputDataTexture().id,this.textureCache[t].texture=this.getOuputDataTexture().texture}var e=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=e}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var t=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=t}},{key:"cloneDataTexture",value:function(t){var e=t.data,n=t.textureWidth;return bz(bz({},t),{},{id:xz++,texture:this.reGl.texture({width:n,height:n,data:e,type:"float"})})}},{key:"calcDataTexture",value:function(t,e,n){var r=1;e===XB.Vector4FloatArray&&(r=4);for(var i=[],o=0;o<n.length;o+=r)1===r?i.push(n[o],0,0,0):2===r?i.push(n[o],n[o+1],0,0):3===r?i.push(n[o],n[o+1],n[o+2],0):4===r&&i.push(n[o],n[o+1],n[o+2],n[o+3]);var a=n.length,s=Math.ceil(a/r),l=Math.ceil(Math.sqrt(s)),u=l*l;s<u&&i.push.apply(i,pz(new Array(4*(u-s)).fill(0)));var c=this.reGl.texture({width:l,height:l,data:i,type:"float"});return{id:xz++,data:i,originalDataLength:a,typedArrayConstructor:mz(n)?n.constructor:void 0,textureWidth:l,texture:c,texelCount:s,elementsPerTexel:r,isOutput:t===this.context.output.name}}}]),t}(),Cz=function(){function t(e,n){NI(this,t),this.elements=void 0;var r=n.data,i=n.usage,o=n.type,a=n.count;this.elements=e.elements({data:r,usage:tz[i||YO.STATIC_DRAW],type:ez[o||YO.UNSIGNED_BYTE],count:a})}return jI(t,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var e=t.data;this.elements.subdata(e)}},{key:"destroy",value:function(){this.elements.destroy()}}]),t}(),Sz=function(){function t(e,n){NI(this,t),this.framebuffer=void 0;var r=n.width,i=n.height,o=n.color,a=n.colors;n.depth,n.stencil;var s={width:r,height:i};Array.isArray(a)&&(s.colors=a.map((function(t){return t.get()}))),o&&"boolean"!=typeof o&&(s.color=o.get()),this.framebuffer=e.framebuffer(s)}return jI(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.framebuffer.resize(e,n)}}]),t}();function kz(t){var e={};return Object.keys(t).forEach((function(n){Ez(n,t[n],e,"")})),e}function Ez(t,e,n,r){var i,o;null===e||"number"==typeof e||"boolean"==typeof e||Array.isArray(e)&&"number"==typeof e[0]||mz(e)||""===e||void 0!==e.resize?n["".concat(r&&r+".").concat(t)]=e:(o=kO(i=e),null==i||"object"!==o&&"function"!==o||Object.keys(e).forEach((function(i){Ez(i,e[i],n,"".concat(r&&r+".").concat(t))})),Array.isArray(e)&&e.forEach((function(e,i){Object.keys(e).forEach((function(o){Ez(o,e[o],n,"".concat(r&&r+".").concat(t,"[").concat(i,"]"))}))})))}function Mz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Az(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mz(Object(n),!0).forEach((function(e){jO(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mz(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _z,Tz,Pz=function(){function t(e,n){NI(this,t),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var r=n.vs,i=n.fs,o=n.defines,a=n.attributes,s=n.uniforms,l=n.primitive,u=n.count,c=n.elements,d=n.depth,h=n.blend,f=n.stencil,p=n.cull,g=n.instances,v=n.scissor,m=n.viewport,y={};s&&(this.uniforms=kz(s),Object.keys(s).forEach((function(t){y[t]=e.prop(t)})));var b={};Object.keys(a).forEach((function(t){b[t]=a[t].get()}));var x=o&&this.generateDefines(o)||"",w={attributes:b,frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(x,"\n").concat(i),uniforms:y,vert:"\n".concat(x,"\n").concat(r),primitive:JN[void 0===l?YO.TRIANGLES:l]};g&&(w.instances=g),u&&(w.count=u),c&&(w.elements=c.get()),v&&(w.scissor=v),m&&(w.viewport=m),this.initDepthDrawParams({depth:d},w),this.initBlendDrawParams({blend:h},w),this.initStencilDrawParams({stencil:f},w),this.initCullDrawParams({cull:p},w),this.drawCommand=e(w)}return jI(t,[{key:"addUniforms",value:function(t){this.uniforms=Az(Az({},this.uniforms),kz(t))}},{key:"draw",value:function(t){var e=Az(Az({},this.uniforms),kz(t.uniforms||{})),n={};Object.keys(e).forEach((function(t){var r=kO(e[t]);"boolean"===r||"number"===r||Array.isArray(e[t])||e[t].BYTES_PER_ELEMENT?n[t]=e[t]:"string"===r||(n[t]=e[t].get())})),this.drawCommand(n)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,e){var n=t.depth;n&&(e.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:sz[n.func||YO.LESS],range:n.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,e){var n=t.blend;if(n){var r=n.enable,i=n.func,o=n.equation,a=n.color,s=void 0===a?[0,0,0,0]:a;e.blend={enable:!!r,func:{srcRGB:uz[i&&i.srcRGB||YO.SRC_ALPHA],srcAlpha:uz[i&&i.srcAlpha||YO.SRC_ALPHA],dstRGB:uz[i&&i.dstRGB||YO.ONE_MINUS_SRC_ALPHA],dstAlpha:uz[i&&i.dstAlpha||YO.ONE_MINUS_SRC_ALPHA]},equation:{rgb:lz[o&&o.rgb||YO.FUNC_ADD],alpha:lz[o&&o.alpha||YO.FUNC_ADD]},color:s}}}},{key:"initStencilDrawParams",value:function(t,e){var n=t.stencil;if(n){var r=n.enable,i=n.mask,o=void 0===i?-1:i,a=n.func,s=void 0===a?{cmp:YO.ALWAYS,ref:0,mask:-1}:a,l=n.opFront,u=void 0===l?{fail:YO.KEEP,zfail:YO.KEEP,zpass:YO.KEEP}:l,c=n.opBack,d=void 0===c?{fail:YO.KEEP,zfail:YO.KEEP,zpass:YO.KEEP}:c;e.stencil={enable:!!r,mask:o,func:Az(Az({},s),{},{cmp:cz[s.cmp]}),opFront:{fail:dz[u.fail],zfail:dz[u.zfail],zpass:dz[u.zpass]},opBack:{fail:dz[d.fail],zfail:dz[d.zfail],zpass:dz[d.zpass]}}}}},{key:"initCullDrawParams",value:function(t,e){var n=t.cull;if(n){var r=n.enable,i=n.face,o=void 0===i?YO.BACK:i;e.cull={enable:!!r,face:hz[o]}}}},{key:"generateDefines",value:function(t){return Object.keys(t).map((function(e){return"#define ".concat(e," ").concat(Number(t[e]))})).join("\n")}}]),t}(),Iz=function(){function t(e,n){NI(this,t),this.texture=void 0,this.width=void 0,this.height=void 0;var r=n.data,i=n.type,o=void 0===i?YO.UNSIGNED_BYTE:i,a=n.width,s=n.height,l=n.flipY,u=void 0!==l&&l,c=n.format,d=void 0===c?YO.RGBA:c,h=n.mipmap,f=void 0!==h&&h,p=n.wrapS,g=void 0===p?YO.CLAMP_TO_EDGE:p,v=n.wrapT,m=void 0===v?YO.CLAMP_TO_EDGE:v,y=n.aniso,b=void 0===y?0:y,x=n.alignment,w=void 0===x?1:x,C=n.premultiplyAlpha,S=void 0!==C&&C,k=n.mag,E=void 0===k?YO.NEAREST:k,M=n.min,A=void 0===M?YO.NEAREST:M,_=n.colorSpace,T=void 0===_?YO.BROWSER_DEFAULT_WEBGL:_;this.width=a,this.height=s;var P={width:a,height:s,type:ez[o],format:nz[d],wrapS:oz[g],wrapT:oz[m],mag:iz[E],min:iz[A],alignment:w,flipY:u,colorSpace:az[T],premultiplyAlpha:S,aniso:b};r&&(P.data=r),"number"==typeof f?P.mipmap=rz[f]:"boolean"==typeof f&&(P.mipmap=f),this.texture=e.texture(P)}return jI(t,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.texture.resize(e,n),this.width=e,this.height=n}},{key:"destroy",value:function(){this.texture.destroy()}}]),t}(),Dz=vO()(_z=function(){function t(){var e=this;NI(this,t),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var t=HI(VI.mark((function t(n){return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.uniforms){t.next=3;break}return t.next=3,Promise.all(Object.keys(n.uniforms).map(function(){var t=HI(VI.mark((function t(e){var r;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.uniforms[e]||void 0===n.uniforms[e].load){t.next=5;break}return t.next=3,n.uniforms[e].load();case 3:r=t.sent,n.uniforms[e]=r;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:return t.abrupt("return",new Pz(e.gl,n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new QN(e.gl,t)},this.createBuffer=function(t){return new fz(e.gl,t)},this.createElements=function(t){return new Cz(e.gl,t)},this.createTexture2D=function(t){return new Iz(e.gl,t)},this.createFramebuffer=function(t){return new Sz(e.gl,t)},this.useFramebuffer=function(t,n){e.gl({framebuffer:t?t.get():null})(n)},this.createComputeModel=function(){var t=HI(VI.mark((function t(n){return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new wz(e.gl,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.clear=function(t){var n=t.color,r=t.depth,i=t.stencil,o=t.framebuffer,a=void 0===o?null:o,s={color:n,depth:r,stencil:i};s.framebuffer=null===a?a:a.get(),e.gl.clear(s)},this.setScissor=function(t){e.gl&&e.gl._gl&&(t.enable&&t.box?(e.gl._gl.enable(YO.SCISSOR_TEST),e.gl._gl.scissor(t.box.x,t.box.y,t.box.width,t.box.height)):e.gl._gl.disable(YO.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(t){var n=t.x,r=t.y,i=t.width,o=t.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(n,r,i,o),e.gl._refresh())},this.readPixels=function(t){var n=t.framebuffer,r={x:t.x,y:t.y,width:t.width,height:t.height};return n&&(r.framebuffer=n.get()),e.gl.read(r)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}var e;return jI(t,[{key:"init",value:(e=HI(VI.mark((function t(e){return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.inited){t.next=2;break}return t.abrupt("return");case 2:return this.$canvas=e.canvas,t.next=5,new Promise((function(t,n){ZN({canvas:e.canvas,attributes:{alpha:!0,antialias:e.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(e,r){!e&&r||n(e),t(r)}})}));case 5:this.gl=t.sent,this.inited=!0;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),t}())||_z;function Oz(t,e,n,r){if("undefined"!=typeof window){var i=document.getElementsByTagName("head")[0],o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",t),r&&(o.id=r),o.onload=function(){e&&e()},o.onerror=function(e){n&&n("Unable to load script '".concat(t,"'"),e)},i.appendChild(o)}}function Rz(t,e){return new Promise((function(e,n){Oz(t,(function(){e()}),(function(t,e){n(e)}))}))}function Lz(){return Bz.apply(this,arguments)}function Bz(){return(Bz=HI(VI.mark((function t(){return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Tz){t.next=2;break}return t.abrupt("return",Tz);case 2:return t.next=4,Rz("https://preview.babylonjs.com/glslang/glslang.js");case 4:return Tz=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),t.abrupt("return",Tz);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Fz=function(){function t(e,n){NI(this,t),this.engine=e,this.options=n,this.attribute=void 0,this.buffer=void 0;var r=n,i=r.buffer,o=r.offset,a=r.stride,s=r.normalized,l=r.size,u=r.divisor,c=r.arrayStride,d=r.attributes,h=r.stepMode;this.buffer=i,this.attribute={buffer:i.get(),offset:o||0,stride:a||0,normalized:s||!1,divisor:u||0,arrayStride:c||0,attributes:d,stepMode:h||"vertex"},l&&(this.attribute.size=l)}return jI(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),Nz=function(){function t(e,n){NI(this,t),this.engine=e,this.options=n,this.buffer=void 0;var r=n,i=r.data,o=r.usage;r.type,this.buffer=this.createBuffer(i instanceof Array?new Float32Array(i):i,o||YF.Vertex|YF.CopyDst)}return jI(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.setSubData(this.buffer,n,e instanceof Array?new Float32Array(e):e)}},{key:"createBuffer",value:function(t,e){var n=t.byteLength%4,r={size:t.byteLength+n,usage:e},i=this.engine.device.createBuffer(r);return this.setSubData(i,0,t),i}},{key:"setSubData",value:function(t,e,n){(nF?this.engine.device.getQueue():this.engine.device.defaultQueue).writeBuffer(t,e,n)}}]),t}();var zz,jz,Gz,Uz,$z,Vz,Wz,Hz=function(){function t(e,n){NI(this,t),this.engine=e,this.context=n,this.entity=XI(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}var e,n,r;return jI(t,[{key:"init",value:(r=HI(VI.mark((function t(){var e,n,r,i,o,a,s,l=this;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:e=t.sent,n=e.computeStage,r=this.context.uniforms.filter((function(t){return t.storageClass===QB.StorageBuffer})),i=this.context.uniforms.filter((function(t){return t.storageClass===QB.Uniform})),o=i.length?1:0,this.bindGroupEntries=[],o&&(a=0,s=[],i.forEach((function(t){if("number"==typeof t.data)l.uniformGPUBufferLayout.push({name:t.name,offset:a}),a+=4,s.push(t.data);else{var e,n=(null===(e=t.data)||void 0===e?void 0:e.length)||1;3===n&&(n=4,t.data.push(0));var r=a/4%4;if(r>0){var i=4-r;if(n>1&&n<=i)2===n&&(3===i&&(a+=4,s.push(0)),s.push.apply(s,pz(t.data)),l.uniformGPUBufferLayout.push({name:t.name,offset:a}));else{for(var o=0;o<i;o++)a+=4,s.push(0);s.push.apply(s,pz(t.data)),l.uniformGPUBufferLayout.push({name:t.name,offset:a})}}a+=4*n}})),this.uniformBuffer=new Nz(this.engine,{data:s instanceof Array?new Float32Array(s):s,usage:YF.Uniform|YF.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),r.forEach((function(t){var e;null!==t.data&&(t.type!==XB.Vector4FloatArray&&t.type!==XB.FloatArray||(t.name===l.context.output.name?(e=new Nz(l.engine,{data:isFinite(Number(t.data))?[t.data]:t.data,usage:YF.Storage|YF.CopyDst|YF.CopySrc}),l.outputBuffer=e,l.context.output={name:t.name,length:isFinite(Number(t.data))?1:t.data.length,typedArrayConstructor:Float32Array,gpuBuffer:e.get()}):t.isReferer?t.data.model&&t.data.model.outputBuffer&&(e=t.data.model.outputBuffer):e=new Nz(l.engine,{data:isFinite(Number(t.data))?[t.data]:t.data,usage:YF.Storage|YF.CopyDst|YF.CopySrc}),l.vertexBuffers[t.name]=e,l.bindGroupEntries.push({binding:o,resource:{name:t.name,refer:e?void 0:t.data,buffer:e?e.get():void 0}}),o++))})),this.computePipeline=this.engine.device.createComputePipeline({computeStage:n}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"destroy",value:function(){var t=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach((function(e){return t.vertexBuffers[e].destroy()}))}},{key:"readData",value:(n=HI(VI.mark((function t(){var e,n,r,i,o,a,s,l,u;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.context.output)){t.next=16;break}if(n=e.length,r=e.typedArrayConstructor,!(i=e.gpuBuffer)){t.next=16;break}return o=n*r.BYTES_PER_ELEMENT,a=this.engine.device.createBuffer({size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),(s=this.engine.device.createCommandEncoder()).copyBufferToBuffer(i,0,a,0,o),(nF?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([s.finish()]),t.next=12,a.mapAsync(ZF.Read);case 12:return l=a.getMappedRange(),u=new r(l.slice(0)),a.unmap(),t.abrupt("return",u);case 16:return t.abrupt("return",new Float32Array);case 17:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"run",value:function(){var t;this.engine.currentComputePass&&(this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(t=this.engine.currentComputePass).dispatch.apply(t,pz(this.context.dispatch)))}},{key:"updateBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.vertexBuffers[t];r&&r.subData({data:e,offset:n})}},{key:"updateUniform",value:function(t,e){var n=this.uniformGPUBufferLayout.find((function(e){return e.name===t}));n&&this.uniformBuffer.subData({data:Number.isFinite(e)?new Float32Array([e]):new Float32Array(e),offset:n.offset})}},{key:"confirmInput",value:function(t,e){var n=this.vertexBuffers[e],r=t.outputBuffer;if(n&&r&&n!==r){var i=this.engine.device.createCommandEncoder(),o=t.context.output,a=o.length*o.typedArrayConstructor.BYTES_PER_ELEMENT;i.copyBufferToBuffer(r.get(),0,n.get(),0,a),(nF?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([i.finish()])}}},{key:"compileShaderToSpirV",value:function(t,e,n){return this.compileRawShaderToSpirV(n+t,e)}},{key:"compileRawShaderToSpirV",value:function(t,e){return this.engine.glslang.compileGLSL(t,e)}},{key:"compileComputePipelineStageDescriptor",value:(e=HI(VI.mark((function t(e){var n;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e,this.engine.options.useWGSL){t.next=6;break}return t.next=5,this.compileShaderToSpirV(e,"compute","#version 450\n");case 5:n=t.sent;case 6:return t.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:n,isWHLSL:nF}),entryPoint:"main"}});case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}(),Yz=function(){function t(e,n){NI(this,t),this.engine=e,this.options=n,this.indexCount=void 0,this.buffer=void 0;var r=n,i=r.data;r.usage,r.type;var o=r.count;this.indexCount=o||0,this.buffer=new Nz(e,{data:i instanceof Array?new Uint16Array(i):i,usage:YF.Index|YF.CopyDst})}return jI(t,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),Xz=function(){function t(e,n){NI(this,t),this.engine=e,this.options=n,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var r=n;r.width,r.height;var i=r.color;r.colors;var o=r.depth;r.stencil,i&&(this.colorTexture=i),o&&(this.depthTexture=o)}return jI(t,[{key:"get",value:function(){var t,e;return{color:null===(t=this.colorTexture)||void 0===t?void 0:t.get(),depth:null===(e=this.depthTexture)||void 0===e?void 0:e.get()}}},{key:"destroy",value:function(){var t,e;null===(t=this.colorTexture)||void 0===t||t.destroy(),null===(e=this.depthTexture)||void 0===e||e.destroy()}},{key:"resize",value:function(t){var e,n,r=t.width,i=t.height;r===this.width&&i===this.height||(null===(e=this.colorTexture)||void 0===e||e.resize({width:r,height:i}),null===(n=this.depthTexture)||void 0===n||n.resize({width:r,height:i}));this.width=r,this.height=i}}]),t}(),qz=(jO(zz={},YO.POINTS,jF.PointList),jO(zz,YO.LINES,jF.LineList),jO(zz,YO.LINE_LOOP,jF.LineList),jO(zz,YO.LINE_STRIP,jF.LineStrip),jO(zz,YO.TRIANGLES,jF.TriangleList),jO(zz,YO.TRIANGLE_FAN,jF.TriangleList),jO(zz,YO.TRIANGLE_STRIP,jF.TriangleStrip),zz),Kz=(jO(jz={},YO.NEVER,LF.Never),jO(jz,YO.ALWAYS,LF.Always),jO(jz,YO.LESS,LF.Less),jO(jz,YO.LEQUAL,LF.LessEqual),jO(jz,YO.GREATER,LF.Greater),jO(jz,YO.GEQUAL,LF.GreaterEqual),jO(jz,YO.EQUAL,LF.Equal),jO(jz,YO.NOTEQUAL,LF.NotEqual),jz),Zz=(jO(Gz={},YO.FUNC_ADD,RF.Add),jO(Gz,YO.MIN_EXT,RF.Min),jO(Gz,YO.MAX_EXT,RF.Max),jO(Gz,YO.FUNC_SUBTRACT,RF.Subtract),jO(Gz,YO.FUNC_REVERSE_SUBTRACT,RF.ReverseSubtract),Gz),Qz=(jO(Uz={},YO.ZERO,OF.Zero),jO(Uz,YO.ONE,OF.One),jO(Uz,YO.SRC_COLOR,OF.SrcColor),jO(Uz,YO.ONE_MINUS_SRC_COLOR,OF.OneMinusSrcColor),jO(Uz,YO.SRC_ALPHA,OF.SrcAlpha),jO(Uz,YO.ONE_MINUS_SRC_ALPHA,OF.OneMinusSrcAlpha),jO(Uz,YO.DST_COLOR,OF.DstColor),jO(Uz,YO.ONE_MINUS_DST_COLOR,OF.OneMinusDstColor),jO(Uz,YO.DST_ALPHA,OF.DstAlpha),jO(Uz,YO.ONE_MINUS_DST_ALPHA,OF.OneMinusDstAlpha),jO(Uz,YO.CONSTANT_COLOR,OF.BlendColor),jO(Uz,YO.ONE_MINUS_CONSTANT_COLOR,OF.OneMinusBlendColor),jO(Uz,YO.SRC_ALPHA_SATURATE,OF.SrcAlphaSaturated),Uz),Jz=(jO($z={},YO.ALPHA,"r8unorm"),jO($z,YO.RGBA,"rgba8unorm"),jO($z,YO.DEPTH_COMPONENT,"depth32float"),jO($z,YO.DEPTH_STENCIL,"depth24plus-stencil8"),$z),tj=(jO(Vz={},YO.NEAREST,"nearest"),jO(Vz,YO.LINEAR,"linear"),Vz),ej=(jO(Wz={},YO.REPEAT,"repeat"),jO(Wz,YO.CLAMP_TO_EDGE,"clamp-to-edge"),jO(Wz,YO.MIRRORED_REPEAT,"mirror-repeat"),Wz);function nj(t){var e=t.cull;return e&&e.enable?e.face?e.face===YO.FRONT?BF.Front:BF.Back:void 0:BF.None}function rj(t){var e=t.depth;t.stencil;var n={compare:LF.Always,depthFailOp:GF.Keep,failOp:GF.Keep,passOp:GF.Keep};return{depthWriteEnabled:e&&e.enable,depthCompare:Kz[(null==e?void 0:e.func)||YO.ALWAYS],format:VF.Depth24PlusStencil8,stencilFront:n,stencilBack:n,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function ij(t,e){var n=t.blend;return[{format:e,alphaBlend:{srcFactor:Qz[n&&n.func&&n.func.srcAlpha||YO.ONE],dstFactor:Qz[n&&n.func&&n.func.dstAlpha||YO.ZERO],operation:Zz[n&&n.equation&&n.equation.alpha||YO.FUNC_ADD]},colorBlend:{srcFactor:Qz[n&&n.func&&n.func.srcRGB||YO.ONE],dstFactor:Qz[n&&n.func&&n.func.dstRGB||YO.ZERO],operation:Zz[n&&n.equation&&n.equation.rgb||YO.FUNC_ADD]},writeMask:XF.All}]}function oj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function aj(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oj(Object(n),!0).forEach((function(e){jO(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oj(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function sj(t){for(var e=0,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0,a=r;o<a.length;o++){var s=a[o];e+=s.length}for(var l=new t(e),u=0,c=0,d=r;c<d.length;c++){var h=d[c];l.set(h,u),u+=h.length}return l}var lj,uj,cj=function(){function t(e,n){NI(this,t),this.engine=e,this.options=n,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}var e,n;return jI(t,[{key:"init",value:(n=HI(VI.mark((function t(){var e,n,r,i,o,a,s,l,u,c,d,h,f,p,g,v,m=this;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.options,n=e.vs,r=e.fs,i=e.attributes,o=e.uniforms,a=e.primitive,s=e.elements,l=e.depth,u=e.blend,c=e.stencil,d=e.cull,t.next=3,this.compilePipelineStageDescriptor(n,r,null);case 3:h=t.sent,f=h.vertexStage,p=h.fragmentStage,o&&this.buildUniformBindGroup(o),s&&(this.indexBuffer=s.get(),this.indexCount=s.indexCount),g={vertexBuffers:Object.keys(i).map((function(t,e){var n=i[t],r=n.get(),o=r.arrayStride,a=r.stepMode,s=r.attributes;return m.attributeCache[t]=n,{arrayStride:o,stepMode:a,attributes:s}}))},v={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:qz[a||YO.TRIANGLES],rasterizationState:aj(aj({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:nj({cull:d})}),depthStencilState:rj({depth:l,stencil:c}),colorStates:ij({blend:u},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:f,fragmentStage:p,vertexState:g},this.renderPipeline=this.engine.device.createRenderPipeline(v);case 11:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"addUniforms",value:function(t){this.uniforms=aj(aj({},this.uniforms),kz(t))}},{key:"draw",value:function(t){var e=this,n=this.engine.getCurrentRenderPass(),r=aj(aj({},this.uniforms),kz(t.uniforms||{})),i=[];Object.keys(r).forEach((function(t){var n=kO(r[t]);if("boolean"===n||"number"===n||Array.isArray(r[t])||r[t].BYTES_PER_ELEMENT){var o,a=null===(o=e.uniformGPUBufferLayout.find((function(e){return e.name===t})))||void 0===o?void 0:o.offset;null!==a&&e.uniformBuffer.subData({data:r[t],offset:a})}else{var s,l=null===(s=e.uniformGPUBufferLayout.find((function(e){return e.name===t})))||void 0===s?void 0:s.offset;if(null!==l){var u=r[t].get(),c=u.color||u,d=c.texture,h=c.sampler;h&&(i.push({binding:l,resource:h}),l++),i.push({binding:l,resource:d.createView()})}}})),this.uniformBuffer&&(i[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:i}),this.renderPipeline&&n.setPipeline(this.renderPipeline),n.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&n.setIndexBuffer(this.indexBuffer.get(),NF.Uint32,0),Object.keys(this.attributeCache).forEach((function(t,r){n.setVertexBuffer(0+r,e.attributeCache[t].get().buffer,0)})),this.indexBuffer?n.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):n.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:(e=HI(VI.mark((function t(e,n,r){var i,o,a;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i="#version 450\n",o=e,a=n,this.engine.options.useWGSL){t.next=10;break}return t.next=6,this.compileShaderToSpirV(e,"vertex",i);case 6:return o=t.sent,t.next=9,this.compileShaderToSpirV(n,"fragment",i);case 9:a=t.sent;case 10:return t.abrupt("return",this.createPipelineStageDescriptor(o,a));case 11:case"end":return t.stop()}}),t,this)}))),function(t,n,r){return e.apply(this,arguments)})},{key:"compileShaderToSpirV",value:function(t,e,n){return this.compileRawShaderToSpirV(n+t,e)}},{key:"compileRawShaderToSpirV",value:function(t,e){return this.engine.glslang.compileGLSL(t,e)}},{key:"createPipelineStageDescriptor",value:function(t,e){return{vertexStage:{module:this.engine.device.createShaderModule({code:t,isWHLSL:nF}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:e,isWHLSL:nF}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:FF.CCW,cullMode:BF.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(t){var e=this,n=0,r=sj.apply(void 0,[Float32Array].concat(pz(Object.keys(t).map((function(r){return t[r]?(e.uniformGPUBufferLayout.push({name:r,offset:n}),n+=4*(t[r].length||1),t[r]):[]}))))),i=[],o=!1;r.length&&(o=!0,i.push({binding:0,visibility:qF.Fragment|qF.Vertex,type:DF.UniformBuffer})),Object.keys(t).filter((function(e){return null===t[e]})).forEach((function(t,n){e.uniformGPUBufferLayout.push({name:t,offset:2*n+(o?1:0)}),i.push({binding:2*n+(o?1:0),visibility:qF.Fragment,type:DF.Sampler},{binding:2*n+(o?1:0)+1,visibility:qF.Fragment,type:DF.SampledTexture})})),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:i}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),o&&(this.uniformBuffer=new Nz(this.engine,{data:r instanceof Array?new Float32Array(r):r,usage:YF.Uniform|YF.CopyDst}))}}]),t}(),dj=function(){function t(e,n){NI(this,t),this.engine=e,this.options=n,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return jI(t,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(t){var e=t.width,n=t.height;e===this.width&&n===this.height||(this.destroy(),this.createTexture()),this.width=e,this.height=n}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var t=this.options;t.data;var e=t.type;void 0===e&&YO.UNSIGNED_BYTE;var n=t.width,r=t.height;t.flipY;var i=t.format,o=void 0===i?YO.RGBA:i;t.mipmap;var a=t.wrapS,s=void 0===a?YO.CLAMP_TO_EDGE:a,l=t.wrapT,u=void 0===l?YO.CLAMP_TO_EDGE:l,c=t.aniso,d=void 0===c?0:c;t.alignment,t.premultiplyAlpha;var h=t.mag,f=void 0===h?YO.NEAREST:h,p=t.min,g=void 0===p?YO.NEAREST:p,v=t.colorSpace;void 0===v&&YO.BROWSER_DEFAULT_WEBGL;var m=t.usage;this.width=n,this.height=r,this.texture=this.engine.device.createTexture({size:[n,r,1],mipLevelCount:1,sampleCount:1,dimension:$F.E2d,format:Jz[o],usage:m||KF.Sampled|KF.CopyDst}),(!m||m&KF.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:ej[s],addressModeV:ej[u],addressModeW:ej[s],magFilter:tj[f],minFilter:tj[g],maxAnisotropy:d}))}}]),t}(),hj=vO()(lj=function(){function t(){var e=this;NI(this,t),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(t){t.framebuffer;var n=t.color,r=t.depth,i=t.stencil;e.options.supportCompute&&e.startComputePass(),e.currentRenderTarget?(e.currentRenderPass&&e.endRenderTargetRenderPass(),e.startRenderTargetRenderPass(e.currentRenderTarget,n||null,!!r,!!i)):(e.mainColorAttachments[0].loadValue=n||zF.Load,e.mainDepthAttachment.depthLoadValue=r||zF.Load,e.mainDepthAttachment.stencilLoadValue=i?e.clearStencilValue:zF.Load,e.mainRenderPass&&e.endMainRenderPass(),e.startMainRenderPass())},this.createModel=function(){var t=HI(VI.mark((function t(n){var r;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new cj(e,n),t.next=3,r.init();case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new Fz(e,t)},this.createBuffer=function(t){return new Nz(e,t)},this.createElements=function(t){return new Yz(e,t)},this.createTexture2D=function(t){return new dj(e,t)},this.createFramebuffer=function(t){return new Xz(e,t)},this.useFramebuffer=function(t,n){e.currentRenderTarget&&e.unbindFramebuffer(e.currentRenderTarget),e.currentRenderTarget=t,e.currentRenderTargetViewDescriptor={dimension:WF.E2d,arrayLayerCount:1,aspect:HF.All},e.currentRenderPass=null,n()},this.createComputeModel=function(){var t=HI(VI.mark((function t(n){var r;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Hz(e,n),t.next=3,r.init();case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getCanvas=function(){return e.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(t){var n=t.x,r=t.y,i=t.width,o=t.height;if(e.currentRenderPass){if(e.transientViewport.x!==1/0){e.getCurrentRenderPass().setViewport(e.transientViewport.x,e.transientViewport.y,e.transientViewport.width,e.transientViewport.height,0,1)}else if(n!==e.cachedViewport.x||r!==e.cachedViewport.y||i!==e.cachedViewport.width||o!==e.cachedViewport.height){e.cachedViewport={x:n,y:r,width:i,height:o},e.getCurrentRenderPass().setViewport(n,r,i,o,0,1)}}else e.transientViewport={x:n,y:r,width:i,height:o}},this.readPixels=function(t){throw new Error("Method not implemented.")}}var e,n;return jI(t,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:(n=HI(VI.mark((function t(e){return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.canvas=e.canvas,this.options=e,this.useWGSL=!!e.useWGSL,this.mainPassSampleCount=e.antialiasing?this.defaultSampleCount:1,t.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"setScissor",value:function(t){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach((function(t){return t.destroy()})),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),nF?this.device.getQueue().submit(this.commandBuffers.filter((function(t){return t}))):this.device.defaultQueue.submit(this.commandBuffers.filter((function(t){return t})))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:(e=HI(VI.mark((function t(){var e,n;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Lz();case 2:return this.glslang=t.sent,t.next=5,null===(e=navigator)||void 0===e||null===(n=e.gpu)||void 0===n?void 0:n.requestAdapter();case 5:return this.adapter=t.sent,t.next=8,this.adapter.requestDevice();case 8:this.device=t.sent;case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(nF?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:KF.OutputAttachment|KF.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var t={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:$F.E2d,format:VF.BGRA8Unorm,usage:KF.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(t),this.mainColorAttachments=[{attachment:nF?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:UF.Store}]}else this.mainColorAttachments=[{attachment:nF?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:UF.Store}];var e={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:$F.E2d,format:nF?"depth32float-stencil8":VF.Depth24PlusStencil8,usage:KF.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(e),this.mainDepthAttachment={attachment:nF?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:UF.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:UF.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=nF?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=nF?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(t,e,n){var r,i,o,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=null===(r=t.get().color)||void 0===r?void 0:r.texture;s&&(o=s.createView(this.currentRenderTargetViewDescriptor));var l,u=null===(i=t.get().depth)||void 0===i?void 0:i.texture;u&&(l=u.createView());var c=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:o,loadValue:null!==e?e:zF.Load,storeOp:UF.Store}],depthStencilAttachment:u&&l?{attachment:l,depthLoadValue:n?this.clearDepthValue:zF.Load,depthStoreOp:UF.Store,stencilLoadValue:a?this.clearStencilValue:zF.Load,stencilStoreOp:UF.Store}:void 0});this.currentRenderPass=c,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&null!==this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(t){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),t}())||lj;function fj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(PCt){return!1}}();return function(){var n,r=AO(t);if(e){var i=AO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return MO(this,n)}}var pj,gj=vO()(uj=function(t){SO(n,PF);var e=fj(n);function n(){return NI(this,n),e.apply(this,arguments)}return jI(n,[{key:"onEntityCreated",value:function(){var t=this.config,e=t.widthSegments,n=void 0===e?1:e,r=t.heightSegments,i=void 0===r?1:r,o=t.depthSegments,a=void 0===o?1:o,s=t.halfExtents,l=n,u=i,c=a,d=JI(void 0===s?Pu(.5,.5,.5):s,3),h=d[0],f=d[1],p=d[2],g=[Pu(-h,-f,p),Pu(h,-f,p),Pu(h,f,p),Pu(-h,f,p),Pu(h,-f,-p),Pu(-h,-f,-p),Pu(-h,f,-p),Pu(h,f,-p)],v=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],m=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],y=1,b=2,x=3,w=4,C=5,S=[],k=[],E=[],M=[],A=0,_=function(t,e,n){var r,i,o,a;for(o=0;o<=e;o++)for(a=0;a<=n;a++){var s=Au(),l=Au(),u=Au(),c=Au();Nu(s,g[v[t][0]],g[v[t][1]],o/e),Nu(l,g[v[t][0]],g[v[t][2]],a/n),Gu(u,l,g[v[t][0]]),Ou(c,s,u),r=o/e,i=a/n,S.push(c[0],c[1],c[2]),k.push(m[t][0],m[t][1],m[t][2]),E.push(r,i),r=.875*(r/=3)+.0625,i=.875*(i/=3)+.0625,r+=t%3/3,i+=Math.floor(t/3)/3,o<e&&a<n&&(M.push(A+n+1,A+1,A),M.push(A+n+1,A+n+2,A+1)),A++}};_(0,l,u),_(y,l,u),_(b,l,c),_(x,l,c),_(w,c,u),_(C,c,u);var T=WB(S),P=this.getComponent();P.indices=Uint32Array.from(M),P.aabb=T,P.vertexCount=A,P.attributes=[{dirty:!0,name:"position",data:Float32Array.from(S),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(k),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(E),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),n}())||uj;function vj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(PCt){return!1}}();return function(){var n,r=AO(t);if(e){var i=AO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return MO(this,n)}}var mj,yj=vO()(pj=function(t){SO(n,PF);var e=vj(n);function n(){return NI(this,n),e.apply(this,arguments)}return jI(n,[{key:"onEntityCreated",value:function(){var t=this.config.geometries,e=void 0===t?[]:t,n=this.getComponent();n.aabb=new kR;var r=[],i=[],o=0;e.forEach((function(t){var e=t.aabb,a=t.indices,s=t.vertexCount,l=t.attributes;n.aabb.add(e),n.vertexCount+=s,a&&i.push.apply(i,pz(a.map((function(t){return t+o})))),o+=s,l.forEach((function(t,e){r[e]?t.data&&(rF(t.data)?r[e].push(t.data):cN(t.data)?r[e].data=function(t,e){if(!t&&!e)throw new Error("Please specify valid arguments for parameters a and b.");if(!e||0===e.length)return t;if(!t||0===t.length)return e;if(Object.prototype.toString.call(t)!==Object.prototype.toString.call(e))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var n=new t.constructor(t.length+e.length);return n.set(t),n.set(e,t.length),n}(r[e].data,t.data):r[e].data=r[e].data.concat(t.data)):(r[e]=t,r[e].dirty=!0)}))})),n.attributes=r,n.indices=Uint32Array.from(i),n.dirty=!0}}]),n}())||pj;function bj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(PCt){return!1}}();return function(){var n,r=AO(t);if(e){var i=AO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return MO(this,n)}}var xj,wj=vO()(mj=function(t){SO(n,PF);var e=bj(n);function n(){return NI(this,n),e.apply(this,arguments)}return jI(n,[{key:"onEntityCreated",value:function(){for(var t=this.config,e=t.halfExtents,n=void 0===e?[.5,.5]:e,r=t.widthSegments,i=void 0===r?5:r,o=t.lengthSegments,a=void 0===o?5:o,s=[],l=[],u=[],c=[],d=0,h=0;h<=i;h++)for(var f=0;f<=a;f++){var p=-n[0]+2*n[0]*h/i,g=-(-n[1]+2*n[1]*f/a),v=h/i,m=f/a;s.push(p,0,g),l.push(0,1,0),u.push(v,m),h<i&&f<a&&(c.push(d+a+1,d+1,d),c.push(d+a+1,d+a+2,d+1)),d++}var y=WB(s),b=this.getComponent();b.indices=Uint32Array.from(c),b.aabb=y,b.vertexCount=d,b.attributes=[{dirty:!0,name:"position",data:Float32Array.from(s),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(l),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(u),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),n}())||mj;function Cj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(PCt){return!1}}();return function(){var n,r=AO(t);if(e){var i=AO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return MO(this,n)}}var Sj,kj,Ej,Mj,Aj,_j,Tj,Pj=vO()(xj=function(t){SO(n,PF);var e=Cj(n);function n(){return NI(this,n),e.apply(this,arguments)}return jI(n,[{key:"onEntityCreated",value:function(){for(var t=this.config,e=t.radius,n=void 0===e?.5:e,r=t.latitudeBands,i=void 0===r?16:r,o=t.longitudeBands,a=void 0===o?16:o,s=[],l=[],u=[],c=[],d=0;d<=i;d++)for(var h=d*Math.PI/i,f=Math.sin(h),p=Math.cos(h),g=0;g<=a;g++){var v=2*g*Math.PI/a-Math.PI/2,m=Math.sin(v),y=Math.cos(v)*f,b=p,x=m*f,w=1-g/a,C=1-d/i;s.push(y*n,b*n,x*n),l.push(y,b,x),u.push(w,C)}for(var S=0;S<i;++S)for(var k=0;k<a;++k){var E=S*(a+1)+k,M=E+a+1;c.push(E+1,M,E),c.push(E+1,M+1,M)}var A=WB(s),_=this.getComponent();_.indices=Uint32Array.from(c),_.aabb=A,_.vertexCount=s.length/3,_.attributes=[{dirty:!0,name:"position",data:Float32Array.from(s),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(l),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(u),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),n}())||xj;function Ij(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(PCt){return!1}}();return function(){var n,r=AO(t);if(e){var i=AO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return MO(this,n)}}var Dj,Oj,Rj,Lj,Bj,Fj,Nj,zj,jj,Gj,Uj,$j=(Sj=vO(),kj=BD(yO.RenderEngine),Ej=BD(yO.ShaderModuleService),Sj((_j=GI((Aj=function(t){SO(n,qN);var e=Ij(n);function n(){var t;NI(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return FI(t=e.call.apply(e,[this].concat(i)),"engine",_j,EO(t)),FI(t,"shaderModuleService",Tj,EO(t)),t}return jI(n,[{key:"onEntityCreated",value:function(){var t=this.getComponent(),e=this.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform Uniforms {\n  vec4 color;\n  mat4 projectionMatrix;\n  mat4 modelViewMatrix;\n} uniforms;\n\nlayout(location = 0) in vec3 position;\n// layout(location = 1) in vec3 barycentric;\n\nlayout(location = 0) out vec4 fragColor;\n// layout(location = 1) out vec3 v_Barycentric;\n\nvoid main() {\n  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);\n  fragColor = uniforms.color;\n  // v_Barycentric = barycentric;\n}":'attribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform vec4 color;\n\nvarying vec4 fragColor;\n\n#pragma include "uv.vert.declaration"\n\nvoid main() {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  fragColor = color;\n\n  #pragma include "uv.vert.main"\n}',n=this.engine.supportWebGPU?"// layout(set = 0, binding = 1) uniform WireframeUniforms {\n//   float lineWidth;\n//   vec4 lineColor;\n// } wireframe;\n\nlayout(location = 0) in vec4 fragColor;\n// layout(location = 1) in vec3 v_Barycentric;\n\nlayout(location = 0) out vec4 outColor;\n\n// wireframe\n// float edgeFactor() {\n//   vec3 d = fwidth(v_Barycentric);\n//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);\n//   return min(min(a3.x, a3.y), a3.z);\n// }\n\nvoid main() {\n  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));\n  outColor = fragColor;\n}":'varying vec4 fragColor;\n\n#pragma include "uv.frag.declaration"\n#pragma include "map.frag.declaration"\n\nvoid main() {\n  vec4 diffuseColor = fragColor;\n\n  #pragma include "map.frag.main"\n\n  gl_FragColor = diffuseColor;\n}';this.shaderModuleService.registerModule("material-basic",{vs:e,fs:n});var r=this.shaderModuleService.getModule("material-basic"),i=r.vs,o=r.fs,a=r.uniforms;t.vertexShaderGLSL=i,t.fragmentShaderGLSL=o,t.setUniform(a),this.config.map&&(t.setDefines({USE_UV:1,USE_MAP:1}),t.setUniform({map:this.config.map,uvTransform:ou()}))}}]),n}()).prototype,"engine",[kj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tj=GI(Aj.prototype,"shaderModuleService",[Ej],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mj=Aj))||Mj);function Vj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(PCt){return!1}}();return function(){var n,r=AO(t);if(e){var i=AO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return MO(this,n)}}var Wj=(Dj=vO(),Oj=BD(yO.Systems),Rj=mO(yO.MaterialSystem),Lj=BD(yO.Systems),Bj=mO(yO.GeometrySystem),Fj=BD(yO.ShaderModuleService),Dj((jj=GI((zj=function(t){SO(n,KN);var e=Vj(n);function n(){var t;NI(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return FI(t=e.call.apply(e,[this].concat(i)),"materialSystem",jj,EO(t)),FI(t,"geometrySystem",Gj,EO(t)),FI(t,"shaderModuleService",Uj,EO(t)),t}return jI(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,r=this.getMeshComponent();r&&r.material&&("gridColor"===e?(r.material.setUniform("u_GridColor",n),r.material.setUniform("u_GridColor2",n)):"gridSize"===e&&(r.material.setUniform("u_GridSize",n),r.material.setUniform("u_GridSize2",n)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:"attribute vec3 a_Position;\n\nvarying vec3 v_Position;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nvoid main() {\n  v_Position = a_Position;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);\n}",fs:"// generate grid, borrow from clay.gl viewer\n// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl\n#extension GL_OES_standard_derivatives : enable\n\nvarying vec3 v_Position;\n// varying vec3 v_Normal;\n\nuniform float u_GridSize : 5;\nuniform float u_GridSize2 : .5;\nuniform vec4 u_GridColor : [0, 0, 0, 1];\nuniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];\nuniform bool u_GridEnabled : true;\n\n// uniform vec3 u_LightDirection;\n// uniform vec3 u_LightColor;\n// uniform vec3 u_Camera;\n\nvoid main() {\n  // vec3 n = v_Normal;\n  // vec3 l = normalize(u_LightDirection);\n  // float NdotL = clamp(dot(n, l), 0.001, 1.0);\n\n  gl_FragColor = vec4(1.);\n\n  if (u_GridEnabled) {\n    float wx = v_Position.x;\n    float wz = v_Position.z;\n    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;\n    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;\n\n    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;\n    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;\n\n    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);\n    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);\n    // if (v0 > 0.1) {\n        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);\n    // }\n    // else {\n        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);\n    // }\n  }\n\n  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);\n  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;\n\n  // gl_FragColor.rgb *= diffuseColor;\n}"});var t=this.shaderModuleService.getModule("grid"),e=t.vs,n=t.fs,r=t.uniforms,i=this.materialSystem.createShaderMaterial({vertexShader:e,fragmentShader:n});this.setMaterial(i);var o=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(o),i.setCull({enable:!1,face:YO.BACK}).setDepth({enable:!0,func:YO.LESS}),i.setUniform(r),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),o.setIndex([0,3,2,2,1,0]),o.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),n}()).prototype,"materialSystem",[Oj,Rj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gj=GI(zj.prototype,"geometrySystem",[Lj,Bj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Uj=GI(zj.prototype,"shaderModuleService",[Fj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nj=zj))||Nj),Hj=function(){var t=new Float32Array(2);return t[0]=0,t[1]=0,t};var Yj=function(t){var e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e};var Xj=function(t,e){var n=new Float32Array(2);return n[0]=t,n[1]=e,n};var qj=function(t,e){return t[0]=e[0],t[1]=e[1],t};var Kj=function(t,e,n){return t[0]=e,t[1]=n,t};var Zj=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return Math.abs(n-i)<=1e-6*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=1e-6*Math.max(1,Math.abs(r),Math.abs(o))};var Qj=function(t,e){return t[0]===e[0]&&t[1]===e[1]};var Jj=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t};var tG=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t};var eG=tG,nG=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t};var rG=nG,iG=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t};var oG=iG,aG=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t};var sG=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t};var lG=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t};var uG=function(t,e,n){var r=Math.cos(n),i=Math.sin(n),o=e[0],a=e[1];return t[0]=o*r-a*i,t[1]=o*i+a*r,t};var cG=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t};var dG=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t};var hG=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t};var fG=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t};var pG=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t};var gG=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)};var vG=gG,mG=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r};var yG=mG,bG=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)};var xG=bG,wG=function(t){var e=t[0],n=t[1];return e*e+n*n};var CG=wG,SG=function(t,e){return t[0]=-e[0],t[1]=-e[1],t};var kG=function(t,e){var n=e[0],r=e[1],i=n*n+r*r;i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i);return t};var EG=function(t,e){return t[0]*e[0]+t[1]*e[1]};var MG=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t};var AG=function(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t};var _G=function(t,e){e=e||1;var n=2*Math.random()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t};var TG=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t};var PG=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t};var IG=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t};var DG=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t};var OG=function(t,e,n,r,i,o){var a,s;e||(e=2);n||(n=0);s=r?Math.min(r*e+n,t.length):t.length;for(a=n;a<s;a+=e)RG[0]=t[a],RG[1]=t[a+1],i(RG,RG,o),t[a]=RG[0],t[a+1]=RG[1];return t},RG=Hj();var LG,BG,FG,NG,zG,jG,GG,UG,$G,VG,WG,HG={EPSILON:1e-6,create:Hj,clone:Yj,fromValues:Xj,copy:qj,set:Kj,equals:Zj,exactEquals:Qj,add:Jj,subtract:tG,sub:eG,multiply:nG,mul:rG,divide:iG,div:oG,inverse:aG,min:sG,max:lG,rotate:uG,floor:cG,ceil:dG,round:hG,scale:fG,scaleAndAdd:pG,distance:gG,dist:vG,squaredDistance:mG,sqrDist:yG,length:bG,len:xG,squaredLength:wG,sqrLen:CG,negate:SG,normalize:kG,dot:EG,cross:MG,lerp:AG,random:_G,transformMat2:TG,transformMat2d:PG,transformMat3:IG,transformMat4:DG,forEach:OG,limit:function(t,e,n){var r=e[0]*e[0]+e[1]*e[1];if(r>n*n){var i=Math.sqrt(r);t[0]=e[0]/i*n,t[1]=e[1]/i*n}else t[0]=e[0],t[1]=e[1];return t}},YG=HG.create,XG=HG.copy,qG=HG.dot,KG=[0,0],ZG=function(t,e,n,r,i){return Jj(t,n,r),kG(t,t),Kj(e,-t[1],t[0]),Kj(KG,-n[1],n[0]),i/EG(e,KG)},QG=function(t,e){return Kj(t,-e[1],e[0]),t},JG=function(t,e,n){return tG(t,e,n),kG(t,t),t};function tU(t,e,n,r,i){eU(e,r,-i),eU(e,r,i),t.push(n),t.push(n)}function eU(t,e,n){t.push([[e[0],e[1]],n])}function nU(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(PCt){return!1}}();return function(){var n,r=AO(t);if(e){var i=AO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return MO(this,n)}}var rU,iU,oU,aU,sU,lU,uU,cU,dU,hU,fU,pU=(LG=vO(),BG=BD(yO.Systems),FG=mO(yO.MaterialSystem),NG=BD(yO.Systems),zG=mO(yO.GeometrySystem),jG=BD(yO.ShaderModuleService),LG(($G=GI((UG=function(t){SO(n,KN);var e=nU(n);function n(){var t;NI(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return FI(t=e.call.apply(e,[this].concat(i)),"materialSystem",$G,EO(t)),FI(t,"geometrySystem",VG,EO(t)),FI(t,"shaderModuleService",WG,EO(t)),t.vertexCount=void 0,t}return jI(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,r=this.getMeshComponent();if(r&&r.material)switch(e){case"dashArray":r.material.setUniform("u_dash_array",n);break;case"dashOffset":r.material.setUniform("u_dash_offset",n);break;case"dashRatio":r.material.setUniform("u_dash_ratio",n);break;case"thickness":r.material.setUniform("u_thickness",n);break;case"color":var i=new Array(this.vertexCount).fill(void 0).map((function(){return n})).reduce((function(t,e){return[].concat(pz(t),pz(e))}),[]);r.geometry.setAttribute("a_color",Float32Array.from(i),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]})}}},{key:"onEntityCreated",value:function(){var t=this;this.shaderModuleService.registerModule("line",{vs:"attribute vec2 a_pos;\nattribute vec4 a_color;\nattribute float a_line_miter;\nattribute vec2 a_line_normal;\nattribute float a_counters;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform float u_thickness : 0.02;\nuniform vec2 u_viewport;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_counters;\n\nvoid main() {\n  v_color = a_color;\n  v_counters = a_counters;\n\n  vec3 normal = normalize(vec3(a_line_normal, 0.0));\n\n  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);\n\n  v_normal = vec2(normal * sign(a_line_miter));\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;\n}\n",fs:"uniform float u_dash_array : 0.02;\nuniform float u_dash_offset : 0;\nuniform float u_dash_ratio : 0;\nuniform float u_thickness : 0.02;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_counters;\n\nvoid main() {\n    float blur = 1. - smoothstep(0.98, 1., length(v_normal));\n\n    gl_FragColor = v_color;\n    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));\n}"});var e=this.shaderModuleService.getModule("line"),n=e.vs,r=e.fs,i=e.uniforms,o=this.materialSystem.createShaderMaterial({vertexShader:n,fragmentShader:r}),a=function(t,e,n){var r=[0,0],i=[0,0],o=[0,0],a=[0,0],s=-1,l=!1,u=null,c=YG(),d=n||0,h=[],f=[],p=[],g=[0,0];e&&(t=t.slice()).push(t[0]);for(var v=t.length,m=1;m<v;m++){var y=d,b=t[m-1],x=t[m],w=m<t.length-1?t[m+1]:null;if(g.push(m/v,m/v),JG(r,x,b),u||QG(u=[0,0],r),l||(l=!0,tU(f,h,b,u,1)),p.push([y+0,y+1,y+2]),w){JG(i,w,x);var C=ZG(o,a,r,i,1),S=qG(o,u)<0?-1:1,k=C>3;if(!isFinite(C)){QG(u,r),tU(f,h,x,u,1),p.push(1===s?[y,y+2,y+3]:[y+2,y+1,y+3]),d+=2,s=S;continue}k?(C=3,g.push(m/v),eU(h,u,-S),f.push(x),eU(h,a,C*S),f.push(x),p.push(s!==-S?[y,y+2,y+3]:[y+2,y+1,y+3]),p.push([y+2,y+3,y+4]),QG(c,i),XG(u,c),eU(h,u,-S),f.push(x),d+=3):(tU(f,h,x,a,C),p.push(1===s?[y,y+2,y+3]:[y+2,y+1,y+3]),S=-1,XG(u,a),d+=2),s=S}else QG(u,r),tU(f,h,x,u,1),p.push(1===s?[y,y+2,y+3]:[y+2,y+1,y+3]),d+=2}return{normals:h,attrIndex:p,attrPos:f,attrCounters:g}}(this.config.points,!1),s=a.normals,l=a.attrIndex,u=a.attrPos,c=a.attrCounters,d=u.length;this.vertexCount=d;var h=this.geometrySystem.createBufferGeometry({vertexCount:d});this.setMaterial(o),this.setGeometry(h),o.setCull({enable:!1,face:YO.BACK}).setUniform(i),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var f=[],p=[];s.forEach((function(t){var e=t[0],n=t[1];f.push([e[0],e[1]]),p.push(n)})),h.setIndex(l.reduce((function(t,e){return[].concat(pz(t),pz(e))}),[])),h.setAttribute("a_pos",Float32Array.from(u.reduce((function(t,e){return[].concat(pz(t),pz(e))}),[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var g=new Array(d).fill(void 0).map((function(){return pz(t.config.color)})).reduce((function(t,e){return[].concat(pz(t),pz(e))}),[]);h.setAttribute("a_color",Float32Array.from(g),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),h.setAttribute("a_line_miter",Float32Array.from(p),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),h.setAttribute("a_line_normal",Float32Array.from(f.reduce((function(t,e){return[].concat(pz(t),pz(e))}),[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),h.setAttribute("a_counters",Float32Array.from(c),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),n}()).prototype,"materialSystem",[BG,FG],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),VG=GI(UG.prototype,"geometrySystem",[NG,zG],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),WG=GI(UG.prototype,"shaderModuleService",[jG],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),GG=UG))||GG);function gU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vU(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(PCt){return!1}}();return function(){var n,r=AO(t);if(e){var i=AO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return MO(this,n)}}var mU,yU,bU,xU,wU,CU,SU,kU,EU,MU=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],AU=(rU=vO(),iU=BD(yO.Systems),oU=mO(yO.MaterialSystem),aU=BD(yO.Systems),sU=mO(yO.GeometrySystem),lU=BD(yO.ShaderModuleService),rU((dU=GI((cU=function(t){SO(n,KN);var e=vU(n);function n(){var t;NI(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return FI(t=e.call.apply(e,[this].concat(i)),"materialSystem",dU,EO(t)),FI(t,"geometrySystem",hU,EO(t)),FI(t,"shaderModuleService",fU,EO(t)),t}return jI(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,r=this.getMeshComponent();r&&r.material&&("strokeWidth"===e?r.material.setUniform("u_stroke_width",n):"strokeColor"===e?r.material.setUniform("u_stroke_color",n):"strokeOpacity"===e?r.material.setUniform("u_stroke_opacity",n):"opacity"===e?r.material.setUniform("u_opacity",n):"blur"===e&&r.material.setUniform("u_blur",n))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:'attribute vec2 position;\nattribute vec4 color;\nattribute float shape;\nattribute vec2 offset;\nattribute float size;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float u_stroke_width : 0.01;\nuniform float u_device_pixel_ratio;\nuniform vec2 u_viewport;\n\nvarying vec4 v_color;\nvarying vec4 v_data;\nvarying float v_radius;\n\n#pragma include "picking"\n\nvoid main() {\n  v_color = color;\n  v_radius = size;\n\n  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);\n\n  // construct point coords\n  v_data = vec4(position, antialiasblur, shape);\n\n  gl_Position = projectionMatrix * modelViewMatrix\n    * vec4(position * size + offset, 0.0, 1.0);\n\n  setPickingColor(a_PickingColor);\n}',fs:"uniform float u_blur : 0.05;\nuniform float u_opacity : 0.7;\nuniform float u_stroke_width : 0.01;\nuniform vec4 u_stroke_color : [0, 0, 0, 0];\nuniform float u_stroke_opacity : 1;\n\nvarying vec4 v_color;\nvarying vec4 v_data;\nvarying float v_radius;\n\n#pragma include \"sdf2d\"\n#pragma include \"picking\"\n\nvoid main() {\n  int shape = int(floor(v_data.w + 0.5));\n\n  float antialiasblur = v_data.z;\n  float antialiased_blur = -max(u_blur, antialiasblur);\n  float r = v_radius / (v_radius + u_stroke_width);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  // if (shape == 0) {\n    outer_df = sdCircle(v_data.xy, 1.0);\n    inner_df = sdCircle(v_data.xy, r);\n  // } else if (shape == 1) {\n  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\n  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\n  // } else if (shape == 2) {\n  //   outer_df = sdBox(v_data.xy, vec2(1.));\n  //   inner_df = sdBox(v_data.xy, vec2(r));\n  // } else if (shape == 3) {\n  //   outer_df = sdPentagon(v_data.xy, 0.8);\n  //   inner_df = sdPentagon(v_data.xy, r * 0.8);\n  // } else if (shape == 4) {\n  //   outer_df = sdHexagon(v_data.xy, 0.8);\n  //   inner_df = sdHexagon(v_data.xy, r * 0.8);\n  // } else if (shape == 5) {\n  //   outer_df = sdOctogon(v_data.xy, 1.0);\n  //   inner_df = sdOctogon(v_data.xy, r);\n  // } else if (shape == 6) {\n  //   outer_df = sdHexagram(v_data.xy, 0.52);\n  //   inner_df = sdHexagram(v_data.xy, r * 0.52);\n  // } else if (shape == 7) {\n  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));\n  //   inner_df = sdRhombus(v_data.xy, vec2(r));\n  // } else if (shape == 8) {\n  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);\n  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\n  // }\n\n  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);\n\n  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(\n    antialiased_blur,\n    0.0,\n    inner_df\n  );\n  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;\n\n  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);\n  gl_FragColor.a = gl_FragColor.a * opacity_t;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}"});var t=this.shaderModuleService.getModule("grid"),e=t.vs,n=t.fs,r=t.uniforms,i=this.materialSystem.createShaderMaterial({vertexShader:e,fragmentShader:n,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:YO.SRC_ALPHA,dstRGB:YO.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});i.setUniform(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gU(Object(n),!0).forEach((function(e){jO(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gU(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({u_device_pixel_ratio:window.devicePixelRatio},r));var o=this.buildAttributes(),a=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:o.instancedOffsets.length/2,vertexCount:6});a.setIndex([0,2,1,0,3,2]),a.setAttribute("position",Float32Array.from(o.positions),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),a.setAttribute("offset",Float32Array.from(o.instancedOffsets),{arrayStride:8,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),a.setAttribute("color",Float32Array.from(o.instancedColors),{arrayStride:16,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),a.setAttribute("size",Float32Array.from(o.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),a.setAttribute("shape",Float32Array.from(o.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),a.setAttribute("a_PickingColor",Float32Array.from(o.instancedPickingColors),{arrayStride:12,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(i),this.setGeometry(a)}},{key:"buildAttribute",value:function(t,e,n){var r,i,o,a,s;(r=e.instancedPickingColors).push.apply(r,pz([(s=t.id||n)+1&255,s+1>>8&255,s+1>>8>>8&255])),e.instancedShapes.push(MU.indexOf(t.shape||"circle")),(i=e.instancedColors).push.apply(i,pz(t.color||[1,0,0,1])),(o=e.instancedOffsets).push.apply(o,pz(t.position||[0,0])),(a=e.instancedSizes).push.apply(a,pz(t.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var t=this,e={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach((function(n,r){t.buildAttribute(n,e,r)})):this.buildAttribute(this.config,e,0),e}}]),n}()).prototype,"materialSystem",[iU,oU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hU=GI(cU.prototype,"geometrySystem",[aU,sU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fU=GI(cU.prototype,"shaderModuleService",[lU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uU=cU))||uU);function _U(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return TU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TU(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function TU(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var PU,IU,DU,OU,RU,LU,BU,FU,NU,zU=(mU=vO(),yU=BD(yO.RenderEngine),bU=BD(yO.ShaderModuleService),xU=BD(yO.ConfigService),mU((SU=GI((CU=function(){function t(){NI(this,t),this.container=void 0,FI(this,"engine",SU,this),FI(this,"shaderModule",kU,this),FI(this,"configService",EU,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}var e,n;return jI(t,[{key:"init",value:(n=HI(VI.mark((function t(){var e,n,r,i,o;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:"#ifdef USE_UV\n  attribute vec2 uv;\n\t#ifdef UVS_VERTEX_ONLY\n    vec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif"}),this.shaderModule.registerModule("uv.vert.main",{vs:"#ifdef USE_UV\n  vUv = (uvTransform * vec3(uv, 1)).xy;\n#endif"}),this.shaderModule.registerModule("uv.frag.declaration",{fs:"#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))\n  varying vec2 vUv;\n#endif"}),this.shaderModule.registerModule("map.frag.declaration",{fs:"#ifdef USE_MAP\n  uniform sampler2D map;\n#endif"}),this.shaderModule.registerModule("map.frag.main",{fs:"#ifdef USE_MAP\n  vec4 texelColor = texture2D(map, vUv);\n  // texelColor = mapTexelToLinear(texelColor);\n  diffuseColor *= texelColor;\n#endif"}),e=this.container.getAll(yO.Systems),!(n=this.configService.get()).canvas){t.next=30;break}return t.next=11,this.engine.init({canvas:n.canvas,swapChainFormat:VF.BGRA8Unorm,antialiasing:!1});case 11:r=_U(e),t.prev=12,r.s();case 14:if((i=r.n()).done){t.next=21;break}if(!(o=i.value).initialize){t.next=19;break}return t.next=19,o.initialize();case 19:t.next=14;break;case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(12),r.e(t.t0);case 26:return t.prev=26,r.f(),t.finish(26);case 29:this.inited=!0;case 30:case"end":return t.stop()}}),t,this,[[12,23,26,29]])}))),function(){return n.apply(this,arguments)})},{key:"render",value:(e=HI(VI.mark((function t(){var e,n,r,i,o,a,s,l=arguments;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.inited&&!this.rendering){t.next=2;break}return t.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach((function(t){t()})),this.rendering=!0,this.engine.beginFrame(),e=this.container.getAll(yO.Systems),n=l.length,r=new Array(n),i=0;i<n;i++)r[i]=l[i];o=_U(e),t.prev=8,o.s();case 10:if((a=o.n()).done){t.next=17;break}if(!(s=a.value).execute){t.next=15;break}return t.next=15,s.execute(r);case 15:t.next=10;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(8),o.e(t.t0);case 22:return t.prev=22,o.f(),t.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return t.stop()}}),t,this,[[8,19,22,25]])}))),function(){return e.apply(this,arguments)})},{key:"clear",value:function(t){var e=this;return this.inited?this.engine.clear(t):this.pendings.unshift((function(){e.engine.clear(t),e.pendings.shift()})),this}},{key:"setSize",value:function(t){var e=t.width,n=t.height,r=this.engine.getCanvas();return this.size={width:e,height:n},r.width=e,r.height=n,this}},{key:"getSize",value:function(){return this.size}}]),t}()).prototype,"engine",[yU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kU=GI(CU.prototype,"shaderModule",[bU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),EU=GI(CU.prototype,"configService",[xU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wU=CU))||wU),jU=vO()(PU=function(){function t(){NI(this,t),this.entities=[]}return jI(t,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(t){return this.addEntity(t.getEntity()),this}},{key:"removeRenderable",value:function(t){return this.removeEntity(t.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(t){return-1===this.entities.indexOf(t)&&this.entities.push(t),this}},{key:"removeEntity",value:function(t){var e=this.entities.indexOf(t);return this.entities.splice(e,1),this}}]),t}())||PU,GU=vO()(IU=function(){function t(){NI(this,t),this.cache={}}return jI(t,[{key:"get",value:function(t){return this.cache[t]}},{key:"set",value:function(t,e){this.cache[t]=e}}]),t}())||IU;function UU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?UU(Object(n),!0).forEach((function(e){jO(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UU(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var VU,WU,HU,YU,XU,qU,KU,ZU,QU,JU,t$,e$=(DU=vO(),OU=BD(GU),RU=BD(yO.RenderEngine),DU((FU=GI((BU=function(){function t(){NI(this,t),FI(this,"textureCache",FU,this),FI(this,"engine",NU,this),this.config=void 0,this.loaded=!1,this.texture=void 0}var e;return jI(t,[{key:"setConfig",value:function(t){this.config=t}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:(e=HI(VI.mark((function t(){var e=this;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.config.url){t.next=4;break}return t.abrupt("return",new Promise((function(t,n){var r=e.textureCache.get(e.config.url);if(r)t(r);else{var i=new Image;i.crossOrigin="Anonymous",i.src=e.config.url,i.onload=function(){var n=e.engine.createTexture2D($U($U({},e.config),{},{data:i,width:i.width,height:i.height,flipY:!0}));e.textureCache.set(e.config.url,n),e.texture=n,e.loaded=!0,t(n)},i.onerror=function(){n()}}})));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),t.abrupt("return",this.texture);case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}()).prototype,"textureCache",[OU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),NU=GI(BU.prototype,"engine",[RU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),LU=BU))||LU),n$=(VU=vO(),WU=BD(yO.Systems),HU=mO(yO.RendererSystem),VU((qU=GI((XU=function(){function t(){NI(this,t),FI(this,"rendererSystem",qU,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return jI(t,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(t){return this.camera=t,this}},{key:"setScene",value:function(t){return this.scene=t,this}},{key:"setViewport",value:function(t){return this.viewport=t,this}},{key:"setClearColor",value:function(t){return this.clearColor=t,this}},{key:"pick",value:function(t){return this.rendererSystem.pick(t,this)}}]),t}()).prototype,"rendererSystem",[WU,HU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),YU=XU))||YU);function r$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i$(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r$(Object(n),!0).forEach((function(e){jO(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var o$=(KU=vO(),ZU=BD(yO.ConfigService),KU((t$=GI((JU=function(){function t(){NI(this,t),FI(this,"configService",t$,this),this.container=void 0}var e;return jI(t,[{key:"getEngine",value:(e=HI(VI.mark((function t(){var e,n,r,i;return VI.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.container.get(yO.RenderEngine),n=this.configService.get(),r=n.canvas,i=n.engineOptions,t.next=4,e.init(i$({canvas:r||QF(),swapChainFormat:VF.BGRA8Unorm,antialiasing:!1},i));case 4:return t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getTransformComponent",value:function(t){return this.container.get(yO.TransformComponentManager).getComponentByEntity(t)}},{key:"getMeshComponent",value:function(t){return this.container.get(yO.MeshComponentManager).getComponentByEntity(t)}},{key:"setConfig",value:function(t){this.configService.set(t)}},{key:"setContainer",value:function(t){this.container=t}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return XI()}},{key:"createScene",value:function(){return this.container.get(jU)}},{key:"createCamera",value:function(){return this.container.get(TF)}},{key:"createView",value:function(){return this.container.get(n$)}},{key:"createRenderable",value:function(t,e){var n=t?this.container.getNamed(yO.Renderable,t):this.container.get(KN),r=XI();return n.setConfig(e||{}),n.setEntity(r),n}},{key:"createGeometry",value:function(t,e){var n=this.container.getNamed(yO.Geometry,t),r=XI();return n.setConfig(e||{}),n.setEntity(r),n.getComponent()}},{key:"createMaterial",value:function(t,e){var n=this.container.getNamed(yO.Material,t),r=XI();return n.setConfig(e||{}),n.setEntity(r,t),n.getComponent()}},{key:"createTexture2D",value:function(t){var e=this.container.get(e$);return e.setConfig(t),e}},{key:"createBufferGeometry",value:function(t){return this.container.getNamed(yO.Systems,yO.GeometrySystem).createBufferGeometry(t)}},{key:"createInstancedBufferGeometry",value:function(t){return this.container.getNamed(yO.Systems,yO.GeometrySystem).createInstancedBufferGeometry(t)}},{key:"createShaderMaterial",value:function(t){return this.container.getNamed(yO.Systems,yO.MaterialSystem).createShaderMaterial(t)}},{key:"createKernel",value:function(t){var e=this.container.get(XN);return"string"==typeof t?e.setBundle(JSON.parse(t)):e.setBundle(t),e.init(),e}},{key:"createRenderer",value:function(){var t=this.container.get(zU);return t.container=this.container,t.init(),t}},{key:"destroy",value:function(){this.container.getAll(yO.Systems).forEach((function(t){t.tearDown&&t.tearDown()})),this.container.get(yO.RenderEngine).destroy(),this.container.get(yO.InteractorService).destroy()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=VB(),r=navigator.gpu?hj:Dz;n.isBound(yO.RenderEngine)||n.bind(yO.RenderEngine).to(r).inSingletonScope(),n.bind(zU).toSelf(),n.bind(XN).toSelf(),n.bind(KN).toSelf(),n.bind(n$).toSelf(),n.bind(TF).toSelf(),n.bind(jU).toSelf(),n.bind(t).toSelf(),n.bind(GU).toSelf(),n.bind(e$).toSelf(),n.bind(yO.Geometry).to(gj).whenTargetNamed(PF.BOX),n.bind(yO.Geometry).to(Pj).whenTargetNamed(PF.SPHERE),n.bind(yO.Geometry).to(wj).whenTargetNamed(PF.PLANE),n.bind(yO.Geometry).to(yj).whenTargetNamed(PF.MERGED),n.bind(yO.Material).to($j).whenTargetNamed(qN.BASIC),n.bind(yO.Renderable).to(AU).whenTargetNamed(KN.POINT),n.bind(yO.Renderable).to(pU).whenTargetNamed(KN.LINE),n.bind(yO.Renderable).to(Wj).whenTargetNamed(KN.GRID);var i=n.get(t);return i.setContainer(n),i.setConfig(e),i}}]),t}()).prototype,"configService",[ZU],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),QU=JU))||QU);const a$=(t,e)=>{let n;return n=t?kw(t)?()=>t:t:()=>e||1,n},s$=t=>{const e=[],n=t.length,r=t[0].length;for(let i=0;i<r;i++)t.forEach(((t,r)=>{if(e.push(t[i]),r===n-1)for(;e.length%4!=0;)e.push(0)}));return new Float32Array(e)};var l$=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(PCt){o(PCt)}}function s(t){try{l(r.throw(t))}catch(PCt){o(PCt)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))};var u$=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(PCt){o(PCt)}}function s(t){try{l(r.throw(t))}catch(PCt){o(PCt)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))};class c${constructor(t){this.id=t.id||0,this.rx=t.rx,this.ry=t.ry,this.fx=0,this.fy=0,this.mass=t.mass,this.degree=t.degree,this.g=t.g||0}distanceTo(t){const e=this.rx-t.rx,n=this.ry-t.ry;return Math.hypot(e,n)}setPos(t,e){this.rx=t,this.ry=e}resetForce(){this.fx=0,this.fy=0}addForce(t){const e=t.rx-this.rx,n=t.ry-this.ry;let r=Math.hypot(e,n);r=r<1e-4?1e-4:r;const i=this.g*(this.degree+1)*(t.degree+1)/r;this.fx+=i*e/r,this.fy+=i*n/r}in(t){return t.contains(this.rx,this.ry)}add(t){const e=this.mass+t.mass,n=(this.rx*this.mass+t.rx*t.mass)/e,r=(this.ry*this.mass+t.ry*t.mass)/e,i=this.degree+t.degree;return new c$({rx:n,ry:r,mass:e,degree:i})}}class d${constructor(t){this.xmid=t.xmid,this.ymid=t.ymid,this.length=t.length,this.massCenter=t.massCenter||[0,0],this.mass=t.mass||1}getLength(){return this.length}contains(t,e){const n=this.length/2;return t<=this.xmid+n&&t>=this.xmid-n&&e<=this.ymid+n&&e>=this.ymid-n}NW(){const t=this.xmid-this.length/4,e=this.ymid+this.length/4,n=this.length/2;return new d$({xmid:t,ymid:e,length:n})}NE(){const t=this.xmid+this.length/4,e=this.ymid+this.length/4,n=this.length/2;return new d$({xmid:t,ymid:e,length:n})}SW(){const t=this.xmid-this.length/4,e=this.ymid-this.length/4,n=this.length/2;return new d$({xmid:t,ymid:e,length:n})}SE(){const t=this.xmid+this.length/4,e=this.ymid-this.length/4,n=this.length/2;return new d$({xmid:t,ymid:e,length:n})}}class h${constructor(t){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,null!=t&&(this.quad=t)}insert(t){null!=this.body?this._isExternal()?(this.quad&&(this.NW=new h$(this.quad.NW()),this.NE=new h$(this.quad.NE()),this.SW=new h$(this.quad.SW()),this.SE=new h$(this.quad.SE())),this._putBody(this.body),this._putBody(t),this.body=this.body.add(t)):(this.body=this.body.add(t),this._putBody(t)):this.body=t}_putBody(t){this.quad&&(t.in(this.quad.NW())&&this.NW?this.NW.insert(t):t.in(this.quad.NE())&&this.NE?this.NE.insert(t):t.in(this.quad.SW())&&this.SW?this.SW.insert(t):t.in(this.quad.SE())&&this.SE&&this.SE.insert(t))}_isExternal(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE}updateForce(t){if(null!=this.body&&t!==this.body)if(this._isExternal())t.addForce(this.body);else{(this.quad?this.quad.getLength():0)/this.body.distanceTo(t)<this.theta?t.addForce(this.body):(this.NW&&this.NW.updateForce(t),this.NE&&this.NE.updateForce(t),this.SW&&this.SW.updateForce(t),this.SE&&this.SE.updateForce(t))}}}const f$=new Proxy({},{get:(t,e)=>{return n=e,Lw.has(n)?Lw.get(n):null;var n},set:(t,e,n)=>(Bw(e,n),!0)});var p$={assign:tu.mix};p$.assign;var g$={getId:function(t){return t.id||t.name},getPreH:function(t){return t.preH||0},getPreV:function(t){return t.preV||0},getHGap:function(t){return t.hgap||18},getVGap:function(t){return t.vgap||18},getChildren:function(t){return t.children},getHeight:function(t){return t.height||36},getWidth:function(t){var e=t.label||" ";return t.width||18*e.split("").length}};function v$(t,e){var n=this;if(n.vgap=n.hgap=0,t instanceof v$)return t;n.data=t;var r=e.getHGap(t),i=e.getVGap(t);return n.preH=e.getPreH(t),n.preV=e.getPreV(t),n.width=e.getWidth(t),n.height=e.getHeight(t),n.width+=n.preH,n.height+=n.preV,n.id=e.getId(t),n.x=n.y=0,n.depth=0,n.children||(n.children=[]),n.addGap(r,i),n}p$.assign(v$.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(t,e){var n=this;n.hgap+=t,n.vgap+=e,n.width+=2*t,n.height+=2*e},eachNode:function(t){for(var e,n=[this];e=n.shift();)t(e),n=e.children.concat(n)},DFTraverse:function(t){this.eachNode(t)},BFTraverse:function(t){for(var e,n=[this];e=n.shift();)t(e),n=n.concat(e.children)},getBoundingBox:function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode((function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)})),t},translate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.eachNode((function(n){n.x+=t,n.y+=e,n.x+=n.preH,n.y+=n.preV}))},right2left:function(){var t=this,e=t.getBoundingBox();t.eachNode((function(t){t.x=t.x-2*(t.x-e.left)-t.width})),t.translate(e.width,0)},bottom2top:function(){var t=this,e=t.getBoundingBox();t.eachNode((function(t){t.y=t.y-2*(t.y-e.top)-t.height})),t.translate(0,e.height)}});var m$=function(t,e,n){void 0===e&&(e={});var r,i=new v$(t,e=p$.assign({},g$,e)),o=[i];if(!n&&!t.collapsed)for(;r=o.shift();)if(!r.data.collapsed){var a=e.getChildren(r.data),s=a?a.length:0;if(r.children=new Array(s),a&&s)for(var l=0;l<s;l++){var u=new v$(a[l],e);r.children[l]=u,o.push(u),u.parent=r,u.depth=r.depth+1}}return i},y$=function(){function t(t,e){void 0===e&&(e={});this.options=e,this.rootNode=m$(t,e)}return t.prototype.execute=function(){throw new Error("please override this method")},t}();function b$(t,e,n,r){void 0===r&&(r=[]);var i=this;i.w=t||0,i.h=e||0,i.y=n||0,i.x=0,i.c=r||[],i.cs=r.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}function x$(t,e,n){n?t.y+=e:t.x+=e,t.children.forEach((function(t){x$(t,e,n)}))}function w$(t,e){var n=e?t.y:t.x;return t.children.forEach((function(t){n=Math.min(w$(t,e),n)})),n}function C$(t,e){x$(t,-w$(t,e),e)}function S$(t,e,n){n?e.y=t.x:e.x=t.x,t.c.forEach((function(t,r){S$(t,e.children[r],n)}))}function k$(t,e,n){void 0===n&&(n=0),e?(t.x=n,n+=t.width):(t.y=n,n+=t.height),t.children.forEach((function(t){k$(t,e,n)}))}b$.fromNode=function(t,e){if(!t)return null;var n=[];return t.children.forEach((function(t){n.push(b$.fromNode(t,e))})),e?new b$(t.height,t.width,t.x,n):new b$(t.width,t.height,t.y,n)};var E$=function(t,e){void 0===e&&(e={});var n=e.isHorizontal;function r(t){0===t.cs?(t.el=t,t.er=t,t.msel=t.mser=0):(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function i(t,e,n){for(var r=t.c[e-1],i=r.mod,u=t.c[e],c=u.mod;null!==r&&null!==u;){l(r)>n.low&&(n=n.nxt);var d=i+r.prelim+r.w-(c+u.prelim);d>0&&(c+=d,o(t,e,n.index,d));var h=l(r),f=l(u);h<=f&&null!==(r=s(r))&&(i+=r.mod),h>=f&&null!==(u=a(u))&&(c+=u.mod)}!r&&u?function(t,e,n,r){var i=t.c[0].el;i.tl=n;var o=r-n.mod-t.c[0].msel;i.mod+=o,i.prelim-=o,t.c[0].el=t.c[e].el,t.c[0].msel=t.c[e].msel}(t,e,u,c):r&&!u&&function(t,e,n,r){var i=t.c[e].er;i.tr=n;var o=r-n.mod-t.c[e].mser;i.mod+=o,i.prelim-=o,t.c[e].er=t.c[e-1].er,t.c[e].mser=t.c[e-1].mser}(t,e,r,i)}function o(t,e,n,r){t.c[e].mod+=r,t.c[e].msel+=r,t.c[e].mser+=r,function(t,e,n,r){if(n!==e-1){var i=e-n;t.c[n+1].shift+=r/i,t.c[e].shift-=r/i,t.c[e].change-=r-r/i}}(t,e,n,r)}function a(t){return 0===t.cs?t.tl:t.c[0]}function s(t){return 0===t.cs?t.tr:t.c[t.cs-1]}function l(t){return t.y+t.h}function u(t,e,n){for(;null!==n&&t>=n.low;)n=n.nxt;return{low:t,index:e,nxt:n}}k$(t,n);var c=b$.fromNode(t,n);return function t(e){if(0!==e.cs){t(e.c[0]);for(var n=u(l(e.c[0].el),0,null),o=1;o<e.cs;++o){t(e.c[o]);var a=l(e.c[o].er);i(e,o,n),n=u(a,o,n)}!function(t){t.prelim=(t.c[0].prelim+t.c[0].mod+t.c[t.cs-1].mod+t.c[t.cs-1].prelim+t.c[t.cs-1].w)/2-t.w/2}(e),r(e)}else r(e)}(c),function t(e,n){n+=e.mod,e.x=e.prelim+n,function(t){for(var e=0,n=0,r=0;r<t.cs;r++)n+=(e+=t.c[r].shift)+t.c[r].change,t.c[r].mod+=n}(e);for(var r=0;r<e.cs;r++)t(e.c[r],n)}(c,0),S$(c,t,n),C$(t,n),t},M$=function(t,e){for(var n=m$(t.data,e,!0),r=m$(t.data,e,!0),i=t.children.length,o=Math.round(i/2),a=e.getSide||function(t,e){return e<o?"right":"left"},s=0;s<i;s++){var l=t.children[s];"right"===a(l,s)?r.children.push(l):n.children.push(l)}return n.eachNode((function(t){t.isRoot()||(t.side="left")})),r.eachNode((function(t){t.isRoot()||(t.side="right")})),{left:n,right:r}},A$=["LR","RL","TB","BT","H","V"],_$=["LR","RL","H"],T$=A$[0],P$=function(t,e,n){var r=e.direction||T$;if(e.isHorizontal=function(t){return _$.indexOf(t)>-1}(r),r&&-1===A$.indexOf(r))throw new TypeError("Invalid direction: "+r);if(r===A$[0])n(t,e);else if(r===A$[1])n(t,e),t.right2left();else if(r===A$[2])n(t,e);else if(r===A$[3])n(t,e),t.bottom2top();else if(r===A$[4]||r===A$[5]){var i=M$(t,e),o=i.left,a=i.right;n(o,e),n(a,e),e.isHorizontal?o.right2left():o.bottom2top(),a.translate(o.x-a.x,o.y-a.y),t.x=o.x,t.y=a.y;var s=t.getBoundingBox();e.isHorizontal?s.top<0&&t.translate(0,-s.top):s.left<0&&t.translate(-s.left,0)}var l=e.fixedRoot;return void 0===l&&(l=!0),l&&t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),t};var I$=function(t){var e,n;function r(){return t.apply(this,arguments)||this}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.prototype.execute=function(){return P$(this.rootNode,this.options,E$)},r}(y$),D$={};var O$=function(t,e){return e=p$.assign({},D$,e),new I$(t,e).execute()};function R$(t,e){void 0===e&&(e=[]);var n=this;n.x=n.y=0,n.leftChild=n.rightChild=null,n.height=0,n.children=e}var L$={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function B$(t,e,n){n?(e.x=t.x,e.y=t.y):(e.x=t.y,e.y=t.x),t.children.forEach((function(t,r){B$(t,e.children[r],n)}))}var F$=function(t,e){void 0===e&&(e={}),e=p$.assign({},L$,e);var n,r=0;var i=function t(e){if(!e)return null;e.width=0,e.depth&&e.depth>r&&(r=e.depth);var n=e.children,i=n.length,o=new R$(e.height,[]);return n.forEach((function(e,n){var r=t(e);o.children.push(r),0===n&&(o.leftChild=r),n===i-1&&(o.rightChild=r)})),o.originNode=e,o.isLeaf=e.isLeaf(),o}(t);return function t(e){if(e.isLeaf||0===e.children.length)e.drawingDepth=r;else{var n=e.children.map((function(e){return t(e)})),i=Math.min.apply(null,n);e.drawingDepth=i-1}return e.drawingDepth}(i),function t(r){r.x=r.drawingDepth*e.rankSep,r.isLeaf?(r.y=0,n&&(r.y=n.y+n.height+e.nodeSep,r.originNode.parent!==n.originNode.parent&&(r.y+=e.subTreeSep)),n=r):(r.children.forEach((function(e){t(e)})),r.y=(r.leftChild.y+r.rightChild.y)/2)}(i),B$(i,t,e.isHorizontal),t};var N$=function(t){var e,n;function r(){return t.apply(this,arguments)||this}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.prototype.execute=function(){var t=this;return t.rootNode.width=0,P$(t.rootNode,t.options,F$)},r}(y$),z$={};var j$=function(t,e){return e=p$.assign({},z$,e),new N$(t,e).execute()};var G$=function(t,e,n){var r=null;t.eachNode((function(t){!function(t,e,n,r){var i="function"==typeof n?n(t):n*t.depth;if(!r)try{if(t.id===t.parent.children[0].id)return t.x+=i,void(t.y=e?e.y:0)}catch(PCt){}t.x+=i,t.y=e?e.y+e.height:0}(t,r,e,n),r=t}))};var U$=["LR","RL","H"],$$=U$[0],V$=function(t){var e,n;function r(){return t.apply(this,arguments)||this}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.prototype.execute=function(){var t=this.options,e=this.rootNode;t.isHorizontal=!0;var n=t.indent,r=void 0===n?20:n,i=t.dropCap,o=void 0===i||i,a=t.direction||$$;if(a&&-1===U$.indexOf(a))throw new TypeError("Invalid direction: "+a);if(a===U$[0])G$(e,r,o);else if(a===U$[1])G$(e,r,o),e.right2left();else if(a===U$[2]){var s=M$(e,t),l=s.left,u=s.right;G$(l,r,o),l.right2left(),G$(u,r,o);var c=l.getBoundingBox();u.translate(c.width,0),e.x=u.x-e.width/2}return e},r}(y$),W$={};var H$=function(t,e){return e=p$.assign({},W$,e),new V$(t,e).execute()};function Y$(t,e){var n=0;return t.children.length?t.children.forEach((function(t){n+=Y$(t,e)})):n=t.height,t._subTreeSep=e.getSubTreeSep(t.data),t.totalHeight=Math.max(t.height,n)+2*t._subTreeSep,t.totalHeight}function X$(t){var e=t.children,n=e.length;if(n){e.forEach((function(t){X$(t)}));var r=e[0],i=e[n-1],o=i.y-r.y+i.height,a=0;if(e.forEach((function(t){a+=t.totalHeight})),o>t.height)t.y=r.y+o/2-t.height/2;else if(1!==e.length||t.height>a){var s=t.y+(t.height-o)/2-r.y;e.forEach((function(t){t.translate(0,s)}))}else t.y=(r.y+r.height/2+i.y+i.height/2)/2-t.height/2}}var q$={getSubTreeSep:function(){return 0}},K$=function(t,e){void 0===e&&(e={}),e=p$.assign({},q$,e),t.parent={x:0,width:0,height:0,y:0},t.BFTraverse((function(t){t.x=t.parent.x+t.parent.width})),t.parent=null,Y$(t,e),t.startY=0,t.y=t.totalHeight/2-t.height/2,t.eachNode((function(t){var e=t.children,n=e.length;if(n){var r=e[0];if(r.startY=t.startY+t._subTreeSep,1===n)r.y=t.y+t.height/2-r.height/2;else{r.y=r.startY+r.totalHeight/2-r.height/2;for(var i=1;i<n;i++){var o=e[i];o.startY=e[i-1].startY+e[i-1].totalHeight,o.y=o.startY+o.totalHeight/2-o.height/2}}}})),X$(t)};var Z$=function(t){var e,n;function r(){return t.apply(this,arguments)||this}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.prototype.execute=function(){return P$(this.rootNode,this.options,K$)},r}(y$),Q$={};var J$={compactBox:O$,dendrogram:j$,indented:H$,mindmap:function(t,e){return e=p$.assign({},Q$,e),new Z$(t,e).execute()}},tV=zm.traverseTree,eV=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",proccessToFunc:function(t,e){return t?el(t)?function(e){return t}:t:function(t){return e||1}},buildTextureData:function(t,e){var n=[],r=[],i={},o=0;for(o=0;o<t.length;o++){var a=t[o];i[a.id]=o,n.push(a.x),n.push(a.y),n.push(0),n.push(0),r.push([])}for(o=0;o<e.length;o++){var s=e[o];r[i[s.source]].push(i[s.target]),r[i[s.target]].push(i[s.source])}var l=0;for(o=0;o<t.length;o++){var u=n.length,c=r[o],d=c.length;n[4*o+2]=u,n[4*o+3]=c.length,l=Math.max(l,c.length);for(var h=0;h<d;++h){var f=c[h];n.push(+f)}}for(;n.length%4!=0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:l}},buildTextureDataWithOneEdgeAttr:function(t,e,n){var r=[],i=[],o={},a=0;for(a=0;a<t.length;a++){var s=t[a];o[s.id]=a,r.push(s.x),r.push(s.y),r.push(0),r.push(0),i.push([])}for(a=0;a<e.length;a++){var l=e[a];i[o[l.source]].push(o[l.target]),i[o[l.source]].push(n(l)),i[o[l.target]].push(o[l.source]),i[o[l.target]].push(n(l))}var u=0;for(a=0;a<t.length;a++){var c=r.length,d=i[a],h=d.length;r[4*a+2]=c,r[4*a+3]=h/2,u=Math.max(u,h/2);for(var f=0;f<h;++f){var p=d[f];r.push(+p)}}for(;r.length%4!=0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:u}},buildTextureDataWithTwoEdgeAttr:function(t,e,n,r){var i=[],o=[],a={},s=0;for(s=0;s<t.length;s++){var l=t[s];a[l.id]=s,i.push(l.x),i.push(l.y),i.push(0),i.push(0),o.push([])}for(s=0;s<e.length;s++){var u=e[s];o[a[u.source]].push(a[u.target]),o[a[u.source]].push(n(u)),o[a[u.source]].push(r(u)),o[a[u.source]].push(0),o[a[u.target]].push(a[u.source]),o[a[u.target]].push(n(u)),o[a[u.target]].push(r(u)),o[a[u.target]].push(0)}var c=0;for(s=0;s<t.length;s++){var d=i.length,h=o[s],f=h.length;i[4*s+2]=d+1048576*f/4,i[4*s+3]=0,c=Math.max(c,f/4);for(var p=0;p<f;++p){var g=h[p];i.push(+g)}}for(;i.length%4!=0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:c}},attributesToTextureData:function(t,e){var n=[],r=t.length,i={};return e.forEach((function(e){t.forEach((function(t,o){if(void 0===i[e[t]]&&(i[e[t]]=Object.keys(i).length),n.push(i[e[t]]),o===r-1)for(;n.length%4!=0;)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(i).length}},arrayToTextureData:function(t){for(var e=[],n=t.length,r=t[0].length,i=function(r){t.forEach((function(t,i){if(e.push(t[r]),i===n-1)for(;e.length%4!=0;)e.push(0)}))},o=0;o<r;o++)i(o);return new Float32Array(e)},radialLayout:function(t,e){var n={x:1/0,y:1/0},r={x:-1/0,y:-1/0},i="x",o="y";e&&["V","TB","BT"].indexOf(e)>=0&&(o="x",i="y");var a=0;tV(t,(function(t){return a++,t.x>r.x&&(r.x=t.x),t.x<n.x&&(n.x=t.x),t.y>r.y&&(r.y=t.y),t.y<n.y&&(n.y=t.y),!0}));var s=2*Math.PI/a,l=r[o]-n[o];return 0===l||tV(t,(function(e){var r=(e[o]-n[o])/l*(2*Math.PI-s)+s,a=Math.abs("x"===i?e.x-t.x:e.y-t.y);return e.x=a*Math.cos(r),e.y=a*Math.sin(r),!0})),t}}),nV=function t(){return"undefined"==typeof window||"undefined"==typeof document?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(PCt){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n")),t},addGetWebGLMessage:function(e){var n=void 0!==(e=e||{}).parent?e.parent:document.body,r=void 0!==e.id?e.id:"oldie",i=t().getWebGLErrorMessage();i.id=r,n.appendChild(i)}}},rV=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",gpuDetector:nV}),iV=Za(Za(Za(Za({},zm),uw),eV),rV),oV=iV.radialLayout,aV=function(){function t(t){this.type=t.type,this.radial=t.radial,this.config=t}return t.prototype.init=function(t){var e=this;this.data=t,this.radial?this.layoutMethod=function(t){var n=J$[e.type](t,e.config);return oV(n),n}:this.layoutMethod=function(t){return J$[e.type](t,e.config)}},t.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},t.prototype.layout=function(t){return this.init(t),this.execute()},t}();Bw("grid",class extends ww{constructor(t){super(),this.begin=[0,0],this.preventOverlap=!0,this.preventOverlapPadding=10,this.condense=!1,this.sortBy="degree",this.nodeSize=30,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.row=0,this.col=0,this.cellWidth=0,this.cellHeight=0,this.cellUsed={},this.id2manPos={},this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}execute(){const t=this,e=t.nodes,n=t.edges,r=e.length,i=t.begin;if(0===r)return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n};if(1===r)return e[0].x=i[0],e[0].y=i[1],t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n};const o=[];e.forEach((t=>{o.push(t)}));const a={};if(o.forEach(((t,e)=>{a[t.id]=e})),("degree"===t.sortBy||!Cw(t.sortBy)||void 0===o[0][t.sortBy])&&(t.sortBy="degree",Ew(e[0].degree))){const t=Tw(o.length,a,n);o.forEach(((e,n)=>{e.degree=t[n]}))}o.sort(((e,n)=>n[t.sortBy]-e[t.sortBy])),t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);const s=t.rows,l=null!=t.cols?t.cols:t.columns;if(t.cells=r,null!=s&&null!=l?(t.rows=s,t.cols=l):null!=s&&null==l?(t.rows=s,t.cols=Math.ceil(t.cells/t.rows)):null==s&&null!=l?(t.cols=l,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.cols*t.rows>t.cells){const e=t.small(),n=t.large();(e-1)*n>=t.cells?t.small(e-1):(n-1)*e>=t.cells&&t.large(n-1)}else for(;t.cols*t.rows<t.cells;){const e=t.small(),n=t.large();(n+1)*e>=t.cells?t.large(n+1):t.small(e+1)}t.cellWidth=t.width/t.cols,t.cellHeight=t.height/t.rows,t.condense&&(t.cellWidth=0,t.cellHeight=0),t.preventOverlap&&o.forEach((e=>{let n,r;e.x&&e.y||(e.x=0,e.y=0),Sw(e.size)?(n=e.size[0],r=e.size[1]):kw(e.size)?(n=e.size,r=e.size):Mw(e.size)&&(n=e.size.width,r=e.size.height),void 0!==n&&void 0!==r||(Sw(t.nodeSize)?(n=t.nodeSize[0],r=t.nodeSize[1]):kw(t.nodeSize)?(n=t.nodeSize,r=t.nodeSize):(n=30,r=30));const i=t.preventOverlapPadding,o=n+i,a=r+i;t.cellWidth=Math.max(t.cellWidth,o),t.cellHeight=Math.max(t.cellHeight,a)})),t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(let u=0;u<o.length;u++){const e=o[u];let n;if(t.position&&(n=t.position(e)),n&&(void 0!==n.row||void 0!==n.col)){const r={row:n.row,col:n.col};if(void 0===r.col)for(r.col=0;t.used(r.row,r.col);)r.col++;else if(void 0===r.row)for(r.row=0;t.used(r.row,r.col);)r.row++;t.id2manPos[e.id]=r,t.use(r.row,r.col)}t.getPos(e)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:n,nodes:o}}small(t){const e=this;let n;const r=e.rows||5,i=e.cols||5;if(null==t)n=Math.min(r,i);else{Math.min(r,i)===e.rows?e.rows=t:e.cols=t}return n}large(t){const e=this;let n;const r=e.rows||5,i=e.cols||5;if(null==t)n=Math.max(r,i);else{Math.max(r,i)===e.rows?e.rows=t:e.cols=t}return n}used(t,e){return this.cellUsed[`c-${t}-${e}`]||!1}use(t,e){this.cellUsed[`c-${t}-${e}`]=!0}moveToNextCell(){const t=this,e=t.cols||5;t.col++,t.col>=e&&(t.col=0,t.row++)}getPos(t){const e=this,n=e.begin,r=e.cellWidth,i=e.cellHeight;let o,a;const s=e.id2manPos[t.id];if(s)o=s.col*r+r/2+n[0],a=s.row*i+i/2+n[1];else{for(;e.used(e.row,e.col);)e.moveToNextCell();o=e.col*r+r/2+n[0],a=e.row*i+i/2+n[1],e.use(e.row,e.col),e.moveToNextCell()}t.x=o,t.y=a}getType(){return"grid"}}),Bw("random",class extends ww{constructor(t){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],width:300,height:300}}execute(){const t=this,e=t.nodes,n=t.center;return t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),e&&e.forEach((e=>{e.x=.9*(Math.random()-.5)*t.width+n[0],e.y=.9*(Math.random()-.5)*t.height+n[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:this.edges}}getType(){return"random"}}),Bw("force",class extends ww{constructor(t){super(),this.center=[0,0],this.nodeStrength=null,this.edgeStrength=null,this.preventOverlap=!1,this.clusterNodeStrength=null,this.clusterEdgeStrength=null,this.clusterEdgeDistance=null,this.clusterNodeSize=null,this.clusterFociStrength=null,this.linkDistance=50,this.alphaDecay=.028,this.alphaMin=.001,this.alpha=.3,this.collideStrength=1,this.workerEnabled=!1,this.tick=()=>{},this.onLayoutEnd=()=>{},this.ticking=void 0,t&&this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick(){},onLayoutEnd(){},workerEnabled:!1}}init(t){const e=this;e.nodes=t.nodes||[];const n=t.edges||[];e.edges=n.map((t=>{const e={},n=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(t).forEach((r=>{n.indexOf(r)>-1||(e[r]=t[r])})),e})),e.ticking=!1}execute(t){const e=this,n=e.nodes,r=e.edges;if(e.ticking)return;let i=e.forceSimulation;const o=e.alphaMin,a=e.alphaDecay,s=e.alpha;if(i){if(t)if(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(n),e.clusterForce.links(r)),i.nodes(n),r&&e.edgeForce)e.edgeForce.links(r);else if(r&&!e.edgeForce){const t=Jw().id((t=>t.id)).links(r);e.edgeStrength&&t.strength(e.edgeStrength),e.linkDistance&&t.distance(e.linkDistance),e.edgeForce=t,i.force("link",t)}e.preventOverlap&&e.overlapProcess(i),i.alpha(s).restart(),this.ticking=!0}else try{const t=_C();if(e.nodeStrength&&t.strength(e.nodeStrength),i=AC().nodes(n),e.clustering){const t=TC();t.centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),r&&t.links(r),n&&t.nodes(n),t.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=t,i.force("group",t)}if(i.force("center",function(t,e){var n,r=1;function i(){var i,o,a=n.length,s=0,l=0;for(i=0;i<a;++i)s+=(o=n[i]).x,l+=o.y;for(s=(s/a-t)*r,l=(l/a-e)*r,i=0;i<a;++i)(o=n[i]).x-=s,o.y-=l}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}(e.center[0],e.center[1])).force("charge",t).alpha(s).alphaDecay(a).alphaMin(o),e.preventOverlap&&e.overlapProcess(i),r){const t=Jw().id((t=>t.id)).links(r);e.edgeStrength&&t.strength(e.edgeStrength),e.linkDistance&&t.distance(e.linkDistance),e.edgeForce=t,i.force("link",t)}if(!e.workerEnabled||"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope||(e.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),e.workerEnabled){i.stop();const t=function(t){const e=t.alphaMin(),n=t.alphaTarget(),r=t.alpha(),i=Math.log((e-n)/(r-n))/Math.log(1-t.alphaDecay());return Math.ceil(i)}(i);for(let e=1;e<=t;e++)i.tick(),postMessage({nodes:n,currentTick:e,totalTicks:t,type:PC},void 0);e.ticking=!1}else i.on("tick",(()=>{e.tick()})).on("end",(()=>{e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()})),e.ticking=!0;e.forceSimulation=i,e.ticking=!0}catch(PCt){e.ticking=!1,console.warn(PCt)}}overlapProcess(t){const e=this,n=e.nodeSize,r=e.nodeSpacing;let i,o;const a=e.collideStrength;if(o=kw(r)?()=>r:Rw(r)?r:()=>0,n)if(Rw(n))i=t=>n(t)+o(t);else if(Sw(n)){const t=(n[0]>n[1]?n[0]:n[1])/2;i=e=>t+o(e)}else if(kw(n)){const t=n/2;i=e=>t+o(e)}else i=()=>10;else i=t=>{if(t.size){if(Sw(t.size)){return(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2+o(t)}if(Mw(t.size)){return(t.size.width>t.size.height?t.size.width:t.size.height)/2+o(t)}return t.size/2+o(t)}return 10+o(t)};t.force("collisionForce",Kw(i).strength(a))}updateCfg(t){const e=this;e.ticking&&(e.forceSimulation.stop(),e.ticking=!1),e.forceSimulation=null,Object.assign(e,t)}destroy(){const t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.nodes=null,t.edges=null,t.destroyed=!0}}),Bw("circular",class extends ww{constructor(t){super(),this.radius=null,this.startRadius=null,this.endRadius=null,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.divisions=1,this.ordering=null,this.angleRatio=1,this.nodes=[],this.edges=[],this.nodeMap={},this.degrees=[],this.width=300,this.height=300,this.updateCfg(t)}getDefaultCfg(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}execute(){const t=this,e=t.nodes,n=t.edges,r=e.length;if(0===r)return void(t.onLayoutEnd&&t.onLayoutEnd());t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const i=t.center;if(1===r)return e[0].x=i[0],e[0].y=i[1],void(t.onLayoutEnd&&t.onLayoutEnd());let o=t.radius,a=t.startRadius,s=t.endRadius;const l=t.divisions,u=t.startAngle,c=t.endAngle,d=(c-u)/r,h={};e.forEach(((t,e)=>{h[t.id]=e})),t.nodeMap=h;const f=Tw(e.length,h,n);t.degrees=f,o||a||s?!a&&s?a=s:a&&!s&&(s=a):o=t.height>t.width?t.width/2:t.height/2;const p=d*t.angleRatio,g=t.ordering;let v=[];v="topology"===g?t.topologyOrdering():"topology-directed"===g?t.topologyOrdering(!0):"degree"===g?t.degreeOrdering():e;const m=t.clockwise,y=Math.ceil(r/l);for(let b=0;b<r;++b){let t=o;t||null===a||null===s||(t=a+b*(s-a)/(r-1)),t||(t=10+100*b/(r-1));let e=u+b%y*p+2*Math.PI/l*Math.floor(b/y);m||(e=c-b%y*p-2*Math.PI/l*Math.floor(b/y)),v[b].x=i[0]+Math.cos(e)*t,v[b].y=i[1]+Math.sin(e)*t,v[b].weight=f[b]}return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:v,edges:this.edges}}topologyOrdering(t=!1){const e=this,n=e.degrees,r=e.edges,i=e.nodes,o=Aw(i),a=e.nodeMap,s=[o[0]],l=[i[0]],u=[],c=i.length;u[0]=!0,function(t,e,n,r){t.forEach(((e,n)=>{t[n].children=[],t[n].parent=[]})),r?e.forEach((e=>{const r=_w(e,"source"),i=_w(e,"target");let o=0;r&&(o=n[r]);let a=0;i&&(a=n[i]);const s=t[o].children,l=t[a].parent;s.push(t[a].id),l.push(t[o].id)})):e.forEach((e=>{const r=_w(e,"source"),i=_w(e,"target");let o=0;r&&(o=n[r]);let a=0;i&&(a=n[i]);const s=t[o].children,l=t[a].children;s.push(t[a].id),l.push(t[o].id)}))}(o,r,a,t);let d=0;return o.forEach(((t,e)=>{if(0!==e)if(e!==c-1&&n[e]===n[e+1]&&!function(t,e,n){const r=n.length;for(let i=0;i<r;i++){const r=_w(n[i],"source"),o=_w(n[i],"target");if(t.id===r&&e.id===o||e.id===r&&t.id===o)return!0}return!1}(s[d],t,r)||u[e]){const t=s[d].children;let r=!1;for(let c=0;c<t.length;c++){const d=a[t[c]];if(n[d]===n[e]&&!u[d]){s.push(o[d]),l.push(i[a[o[d].id]]),u[d]=!0,r=!0;break}}let h=0;for(;!r&&(u[h]||(s.push(o[h]),l.push(i[a[o[h].id]]),u[h]=!0,r=!0),h++,h!==c););}else s.push(t),l.push(i[a[t.id]]),u[e]=!0,d++})),l}degreeOrdering(){const t=this.nodes,e=[],n=this.degrees;return t.forEach(((t,r)=>{t.degree=n[r],e.push(t)})),e.sort(DC),e}getType(){return"circular"}}),Bw("dagre",class extends ww{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}execute(){const t=this,{nodes:e,nodeSize:n,rankdir:r,combos:i}=t;if(!e)return;const o=t.edges||[],a=new oI.graphlib.Graph({multigraph:!0,compound:!0});let s;s=n?Sw(n)?()=>n:()=>[n,n]:t=>t.size?Sw(t.size)?t.size:Mw(t.size)?[t.size.width||40,t.size.height||40]:[t.size,t.size]:[40,40];let l=aI(t.nodesepFunc,t.nodesep,50),u=aI(t.ranksepFunc,t.ranksep,50);"LR"!==r&&"RL"!==r||(l=aI(t.ranksepFunc,t.ranksep,50),u=aI(t.nodesepFunc,t.nodesep,50)),a.setDefaultEdgeLabel((()=>({}))),a.setGraph(t);const c={};let d;return e.filter((t=>!1!==t.layout)).forEach((t=>{const e=s(t),n=u(t),r=l(t),i=e[0]+2*r,o=e[1]+2*n;a.setNode(t.id,{width:i,height:o}),this.sortByCombo&&t.comboId&&(c[t.comboId]||(c[t.comboId]=!0,a.setNode(t.comboId,{})),a.setParent(t.id,t.comboId))})),this.sortByCombo&&i&&i.forEach((t=>{t.parentId&&(c[t.parentId]||(c[t.parentId]=!0,a.setNode(t.parentId,{})),a.setParent(t.id,t.parentId))})),o.forEach((t=>{const e=_w(t,"source"),n=_w(t,"target");a.setEdge(e,n,{weight:t.weight||1})})),oI.layout(a),a.nodes().forEach((t=>{d=a.node(t);const n=e.findIndex((e=>e.id===t));e[n]&&(e[n].x=d.x,e[n].y=d.y)})),a.edges().forEach((e=>{d=a.edge(e);const n=o.findIndex((t=>{const n=_w(t,"source"),r=_w(t,"target");return n===e.v&&r===e.w}));t.controlPoints&&"loop"!==o[n].type&&(o[n].controlPoints=d.points.slice(1,d.points.length-1))})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:o}}getType(){return"dagre"}}),Bw("radial",class extends ww{constructor(t){super(),this.maxIteration=1e3,this.focusNode=null,this.unitRadius=null,this.linkDistance=50,this.preventOverlap=!1,this.strictRadial=!0,this.maxPreventOverlapIteration=200,this.sortStrength=10,this.nodes=[],this.edges=[],this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}execute(){const t=this,e=t.nodes,n=t.edges||[];if(!e||0===e.length)return void(t.onLayoutEnd&&t.onLayoutEnd());t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const r=t.center;if(1===e.length)return e[0].x=r[0],e[0].y=r[1],void(t.onLayoutEnd&&t.onLayoutEnd());const i=t.linkDistance;let o=null;if(Cw(t.focusNode)){let n=!1;for(let r=0;r<e.length;r++)e[r].id===t.focusNode&&(o=e[r],t.focusNode=o,n=!0,r=e.length);n||(o=null)}else o=t.focusNode;o||(o=e[0],t.focusNode=o);const a=function(t,e){let n=-1;return t.forEach(((t,r)=>{t.id===e&&(n=r)})),n}(e,o.id);t.focusIndex=a;const s=Iw({nodes:e,edges:n},!1),l=Pw(s),u=t.maxToFocus(l,a);t.handleInfinity(l,a,u+1),t.distances=l;const c=l[a],d=t.width||500,h=t.height||500;let f=d-r[0]>r[0]?r[0]:d-r[0],p=h-r[1]>r[1]?r[1]:h-r[1];0===f&&(f=d/2),0===p&&(p=h/2);const g=p>f?f:p,v=Math.max(...c),m=[];c.forEach(((e,n)=>{t.unitRadius||(t.unitRadius=g/v),m[n]=e*t.unitRadius})),t.radii=m;const y=t.eIdealDisMatrix();t.eIdealDistances=y;const b=function(t){const e=t.length,n=t[0].length,r=[];for(let i=0;i<e;i++){const e=[];for(let r=0;r<n;r++)0!==t[i][r]?e.push(1/(t[i][r]*t[i][r])):e.push(0);r.push(e)}return r}(y);t.weights=b;let x=new RI({linkDistance:i,distances:y}).layout();x.forEach((t=>{Ew(t[0])&&(t[0]=Math.random()*i),Ew(t[1])&&(t[1]=Math.random()*i)})),t.positions=x,x.forEach(((t,n)=>{e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),x.forEach((t=>{t[0]-=x[a][0],t[1]-=x[a][1]})),t.run();const w=t.preventOverlap,C=t.nodeSize;let S;const k=t.strictRadial;if(w){const n=t.nodeSpacing;let r;r=kw(n)?()=>n:Rw(n)?n:()=>0,S=C?Sw(C)?t=>(C[0]>C[1]?C[0]:C[1])+r(t):t=>C+r(t):t=>{if(t.size){if(Sw(t.size)){return(t.size[0]>t.size[1]?t.size[0]:t.size[1])+r(t)}if(Mw(t.size)){return(t.size.width>t.size.height?t.size.width:t.size.height)+r(t)}return t.size+r(t)}return 10+r(t)};const i={nodes:e,nodeSizeFunc:S,adjMatrix:s,positions:x,radii:m,height:h,width:d,strictRadial:k,focusID:a,iterations:t.maxPreventOverlapIteration||200,k:x.length/4.5},o=new LI(i);x=o.layout()}return x.forEach(((t,n)=>{e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}run(){const t=this,e=t.maxIteration,n=t.positions||[],r=t.weights||[],i=t.eIdealDistances||[],o=t.radii||[];for(let a=0;a<=e;a++){const s=a/e;t.oneIteration(s,n,o,i,r)}}oneIteration(t,e,n,r,i){const o=1-t,a=this.focusIndex;e.forEach(((s,l)=>{const u=BI(s,[0,0]),c=0===u?0:1/u;if(l===a)return;let d=0,h=0,f=0;e.forEach(((t,e)=>{if(l===e)return;const n=BI(s,t),o=0===n?0:1/n,a=r[e][l];f+=i[l][e],d+=i[l][e]*(t[0]+a*(s[0]-t[0])*o),h+=i[l][e]*(t[1]+a*(s[1]-t[1])*o)}));const p=0===n[l]?0:1/n[l];f*=o,f+=t*p*p,d*=o,d+=t*p*s[0]*c,s[0]=d/f,h*=o,h+=t*p*s[1]*c,s[1]=h/f}))}eIdealDisMatrix(){const t=this,e=t.nodes;if(!e)return[];const n=t.distances,r=t.linkDistance,i=t.radii||[],o=t.unitRadius||50,a=[];return n&&n.forEach(((n,s)=>{const l=[];n.forEach(((n,a)=>{if(s===a)l.push(0);else if(i[s]===i[a])if("data"===t.sortBy)l.push(n*(Math.abs(s-a)*t.sortStrength)/(i[s]/o));else if(t.sortBy){let r=e[s][t.sortBy]||0,u=e[a][t.sortBy]||0;Cw(r)&&(r=r.charCodeAt(0)),Cw(u)&&(u=u.charCodeAt(0)),l.push(n*(Math.abs(r-u)*t.sortStrength)/(i[s]/o))}else l.push(n*r/(i[s]/o));else{const t=(r+o)/2;l.push(n*t)}})),a.push(l)})),a}handleInfinity(t,e,n){const r=t.length;for(let i=0;i<r;i++)if(t[e][i]===1/0){t[e][i]=n,t[i][e]=n;for(let o=0;o<r;o++)t[i][o]!==1/0&&t[e][o]===1/0&&(t[e][o]=n+t[i][o],t[o][e]=n+t[i][o])}for(let i=0;i<r;i++)if(i!==e)for(let n=0;n<r;n++)if(t[i][n]===1/0){let r=Math.abs(t[e][i]-t[e][n]);r=0===r?1:r,t[i][n]=r}}maxToFocus(t,e){let n=0;for(let r=0;r<t[e].length;r++)t[e][r]!==1/0&&(n=t[e][r]>n?t[e][r]:n);return n}getType(){return"radial"}}),Bw("concentric",class extends ww{constructor(t){super(),this.nodeSize=30,this.minNodeSpacing=10,this.preventOverlap=!1,this.equidistant=!1,this.startAngle=1.5*Math.PI,this.clockwise=!0,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}execute(){const t=this,e=t.nodes,n=t.edges,r=e.length;if(0===r)return void(t.onLayoutEnd&&t.onLayoutEnd());t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const i=t.center;if(1===r)return e[0].x=i[0],e[0].y=i[1],void(t.onLayoutEnd&&t.onLayoutEnd());const o=[];let a;a=Sw(t.nodeSize)?Math.max(t.nodeSize[0],t.nodeSize[1]):t.nodeSize,e.forEach((t=>{o.push(t);let e=a;Sw(t.size)?e=Math.max(t.size[0],t.size[1]):kw(t.size)?e=t.size:Mw(t.size)&&(e=Math.max(t.size.width,t.size.height)),a=Math.max(a,e)})),t.clockwise=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise;const s={},l={};if(o.forEach(((t,e)=>{s[t.id]=t,l[t.id]=e})),!("degree"!==t.sortBy&&Cw(t.sortBy)&&void 0!==o[0][t.sortBy]||(t.sortBy="degree",kw(e[0].degree)))){const t=Tw(e.length,l,n);o.forEach(((e,n)=>{e.degree=t[n]}))}o.sort(((e,n)=>n[t.sortBy]-e[t.sortBy])),t.maxValueNode=o[0],t.maxLevelDiff=t.maxLevelDiff||t.maxValueNode[t.sortBy]/4;const u=[[]];let c=u[0];o.forEach((e=>{if(c.length>0){const n=Math.abs(c[0][t.sortBy]-e[t.sortBy]);t.maxLevelDiff&&n>=t.maxLevelDiff&&(c=[],u.push(c))}c.push(e)}));let d=a+t.minNodeSpacing;if(!t.preventOverlap){const e=u.length>0&&u[0].length>1,n=(Math.min(t.width,t.height)/2-d)/(u.length+(e?1:0));d=Math.min(d,n)}let h=0;if(u.forEach((e=>{let n=t.sweep;void 0===n&&(n=2*Math.PI-2*Math.PI/e.length);const r=e.dTheta=n/Math.max(1,e.length-1);if(e.length>1&&t.preventOverlap){const t=Math.cos(r)-Math.cos(0),e=Math.sin(r)-Math.sin(0),n=Math.sqrt(d*d/(t*t+e*e));h=Math.max(n,h)}e.r=h,h+=d})),t.equidistant){let t=0,e=0;for(let n=0;n<u.length;n++){const r=u[n].r-e;t=Math.max(t,r)}e=0,u.forEach(((n,r)=>{0===r&&(e=n.r),n.r=e,e+=t}))}return u.forEach((e=>{const n=e.dTheta,r=e.r;e.forEach(((e,o)=>{const a=t.startAngle+(t.clockwise?1:-1)*n*o;e.x=i[0]+r*Math.cos(a),e.y=i[1]+r*Math.sin(a)}))})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}getType(){return"concentric"}}),Bw("mds",class extends ww{constructor(t){super(),this.center=[0,0],this.linkDistance=50,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],linkDistance:50}}execute(){const t=this,{nodes:e,edges:n=[]}=t,r=t.center;if(!e||0===e.length)return void(t.onLayoutEnd&&t.onLayoutEnd());if(1===e.length)return e[0].x=r[0],e[0].y=r[1],void(t.onLayoutEnd&&t.onLayoutEnd());const i=t.linkDistance,o=Iw({nodes:e,edges:n},!1),a=Pw(o);t.handleInfinity(a);const s=((t,e)=>{const n=[];return t.forEach((t=>{const r=[];t.forEach((t=>{r.push(t*e)})),n.push(r)})),n})(a,i);t.scaledDistances=s;const l=t.runMDS();return t.positions=l,l.forEach(((t,n)=>{e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}runMDS(){const t=this.scaledDistances,e=_I.mul(_I.pow(t,2),-.5),n=e.mean("row"),r=e.mean("column"),i=e.mean();e.add(i).subRowVector(n).subColumnVector(r);const o=new OI(e),a=_I.sqrt(o.diagonalMatrix).diagonal();return o.leftSingularVectors.toJSON().map((t=>_I.mul([t],[a]).toJSON()[0].splice(0,2)))}handleInfinity(t){let e=-999999;t.forEach((t=>{t.forEach((t=>{t!==1/0&&e<t&&(e=t)}))})),t.forEach(((n,r)=>{n.forEach(((n,i)=>{n===1/0&&(t[r][i]=e)}))}))}getType(){return"mds"}}),Bw("fruchterman",class extends ww{constructor(t){super(),this.maxIteration=1e3,this.gravity=10,this.speed=5,this.clustering=!1,this.clusterGravity=10,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.onLayoutEnd=()=>{},this.tick=()=>{},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){const t=this,e=t.nodes;if(void 0!==t.timeInterval&&"undefined"!=typeof window&&window.clearInterval(t.timeInterval),!e||0===e.length)return void(t.onLayoutEnd&&t.onLayoutEnd());t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const n=t.center;if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());const r={},i={};return e.forEach(((t,e)=>{kw(t.x)||(t.x=Math.random()*this.width),kw(t.y)||(t.y=Math.random()*this.height),r[t.id]=t,i[t.id]=e})),t.nodeMap=r,t.nodeIdxMap=i,t.run()}run(){const t=this,e=t.nodes;if(!e)return;const n=t.edges,r=t.maxIteration,i=t.center,o=t.height*t.width,a=Math.sqrt(o)/10,s=o/(e.length+1),l=Math.sqrt(s),u=t.gravity,c=t.speed,d=t.clustering,h={};if(d){e.forEach((t=>{if(void 0===h[t.cluster]){const e={name:t.cluster,cx:0,cy:0,count:0};h[t.cluster]=e}const e=h[t.cluster];kw(t.x)&&(e.cx+=t.x),kw(t.y)&&(e.cy+=t.y),e.count++}));for(const t in h)h[t].cx/=h[t].count,h[t].cy/=h[t].count}if("undefined"==typeof window)return;let f=0;return this.timeInterval=window.setInterval((()=>{if(!e)return;const o=[];if(e.forEach(((t,e)=>{o[e]={x:0,y:0}})),t.applyCalculate(e,n,o,l,s),d){const n=t.clusterGravity||u;e.forEach(((t,e)=>{if(!kw(t.x)||!kw(t.y))return;const r=h[t.cluster],i=Math.sqrt((t.x-r.cx)*(t.x-r.cx)+(t.y-r.cy)*(t.y-r.cy)),a=l*n;o[e].x-=a*(t.x-r.cx)/i,o[e].y-=a*(t.y-r.cy)/i}));for(const t in h)h[t].cx=0,h[t].cy=0,h[t].count=0;e.forEach((t=>{const e=h[t.cluster];kw(t.x)&&(e.cx+=t.x),kw(t.y)&&(e.cy+=t.y),e.count++}));for(const t in h)h[t].cx/=h[t].count,h[t].cy/=h[t].count}e.forEach(((t,e)=>{if(!kw(t.x)||!kw(t.y))return;const n=.01*l*u;o[e].x-=n*(t.x-i[0]),o[e].y-=n*(t.y-i[1])})),e.forEach(((t,e)=>{if(kw(t.fx)&&kw(t.fy))return t.x=t.fx,void(t.y=t.fy);if(!kw(t.x)||!kw(t.y))return;const n=Math.sqrt(o[e].x*o[e].x+o[e].y*o[e].y);if(n>0){const r=Math.min(a*(c/800),n);t.x+=o[e].x/n*r,t.y+=o[e].y/n*r}})),t.tick&&t.tick(),f++,f>=r&&(t.onLayoutEnd&&t.onLayoutEnd(),window.clearInterval(t.timeInterval))}),0),{nodes:e,edges:n}}applyCalculate(t,e,n,r,i){this.calRepulsive(t,n,i),e&&this.calAttractive(e,n,r)}calRepulsive(t,e,n){t.forEach(((r,i)=>{e[i]={x:0,y:0},t.forEach(((t,o)=>{if(i===o)return;if(!(kw(r.x)&&kw(t.x)&&kw(r.y)&&kw(t.y)))return;let a=r.x-t.x,s=r.y-t.y,l=a*a+s*s;if(0===l){l=1;const t=i>o?1:-1;a=.01*t,s=.01*t}const u=n/l;e[i].x+=a*u,e[i].y+=s*u}))}))}calAttractive(t,e,n){t.forEach((t=>{const r=_w(t,"source"),i=_w(t,"target");if(!r||!i)return;const o=this.nodeIdxMap[r],a=this.nodeIdxMap[i];if(o===a)return;const s=this.nodeMap[r],l=this.nodeMap[i];if(!(kw(l.x)&&kw(s.x)&&kw(l.y)&&kw(s.y)))return;const u=l.x-s.x,c=l.y-s.y,d=Math.sqrt(u*u+c*c),h=d*d/n;e[a].x-=u/d*h,e[a].y-=c/d*h,e[o].x+=u/d*h,e[o].y+=c/d*h}))}stop(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)}destroy(){const t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0}getType(){return"fruchterman"}}),Bw("fruchterman-gpu",class extends ww{constructor(t){super(),this.maxIteration=1e3,this.gravity=10,this.speed=1,this.clustering=!1,this.clusterField="cluster",this.clusterGravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){return l$(this,void 0,void 0,(function*(){const t=this,e=t.nodes;if(!e||0===e.length)return void(t.onLayoutEnd&&t.onLayoutEnd());t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const n=t.center;if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());const r={},i={};e.forEach(((t,e)=>{kw(t.x)||(t.x=Math.random()*this.width),kw(t.y)||(t.y=Math.random()*this.height),r[t.id]=t,i[t.id]=e})),t.nodeMap=r,t.nodeIdxMap=i,yield t.run()}))}executeWithWorker(t,e){return l$(this,void 0,void 0,(function*(){const n=this,r=n.nodes,i=n.center;if(!r||0===r.length)return;if(1===r.length)return r[0].x=i[0],void(r[0].y=i[1]);const o={},a={};r.forEach(((t,e)=>{kw(t.x)||(t.x=Math.random()*this.width),kw(t.y)||(t.y=Math.random()*this.height),o[t.id]=t,a[t.id]=e})),n.nodeMap=o,n.nodeIdxMap=a,yield n.run(t,e)}))}run(t,e){return l$(this,void 0,void 0,(function*(){const n=this,r=n.nodes,i=n.edges,o=n.maxIteration,a=n.center,s=n.height*n.width;let l=Math.sqrt(s)/10;const u=s/(r.length+1),c=Math.sqrt(u),d=n.speed,h=n.clustering,{array:f,count:p}=((t,e)=>{const n=[],r=t.length,i={};return e.forEach((e=>{t.forEach(((t,o)=>{if(void 0===i[e[t]]&&(i[e[t]]=Object.keys(i).length),n.push(i[e[t]]),o===r-1)for(;n.length%4!=0;)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(i).length}})([n.clusterField],r);r.forEach(((t,e)=>{let n=0,r=0;kw(t.fx)&&kw(t.fy)&&(n=t.fx||.001,r=t.fy||.001),f[4*e+1]=n,f[4*e+2]=r}));const g=r.length,{maxEdgePerVetex:v,array:m}=((t,e)=>{const n=[],r=[],i={};let o=0;for(o=0;o<t.length;o++){const e=t[o];i[e.id]=o,n.push(e.x),n.push(e.y),n.push(0),n.push(0),r.push([])}for(o=0;o<e.length;o++){const t=e[o],n=_w(t,"source"),a=_w(t,"target");r[i[n]].push(i[a]),r[i[a]].push(i[n])}let a=0;for(o=0;o<t.length;o++){const t=n.length,e=r[o],i=e.length;n[4*o+2]=t,n[4*o+3]=e.length,a=Math.max(a,e.length);for(let r=0;r<i;++r){const t=e[r];n.push(+t)}}for(;n.length%4!=0;)n.push(0);return{maxEdgePerVetex:a,array:new Float32Array(n)}})(r,i);let y;y=n.workerEnabled?o$.create({canvas:t,engineOptions:{supportCompute:!0}}):o$.create({engineOptions:{supportCompute:!0}});const b=n.onLayoutEnd,x=[];for(let t=0;t<p;t++)x.push(0,0,0,0);const w=y.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([g,1,1]).setBinding({u_Data:m,u_K:c,u_K2:u,u_Gravity:n.gravity,u_ClusterGravity:n.clusterGravity||n.gravity||1,u_Speed:d,u_MaxDisplace:l,u_Clustering:h?1:0,u_Center:a,u_AttributeArray:f,u_ClusterCenters:x,MAX_EDGE_PER_VERTEX:v,VERTEX_COUNT:g});let C;h&&(C=y.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([p,1,1]).setBinding({u_Data:m,u_NodeAttributes:f,u_ClusterCenters:x,VERTEX_COUNT:g,CLUSTER_COUNT:p}));yield(()=>l$(this,void 0,void 0,(function*(){for(let t=0;t<o;t++)yield w.execute(),h&&(C.setBinding({u_Data:w}),yield C.execute(),w.setBinding({u_ClusterCenters:C})),w.setBinding({u_MaxDisplace:l*=.99});const n=yield w.getOutput();t?e.postMessage({type:IC,vertexEdgeData:n}):r.forEach(((t,e)=>{const r=n[4*e],i=n[4*e+1];t.x=r,t.y=i})),b&&b()})))()}))}getType(){return"fruchterman-gpu"}}),Bw("gForce",class extends ww{constructor(t){super(),this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.preventOverlap=!0,this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0}}execute(){const t=this,e=t.nodes;if(void 0!==t.timeInterval&&"undefined"!=typeof window&&window.clearInterval(t.timeInterval),!e||0===e.length)return void(t.onLayoutEnd&&t.onLayoutEnd());t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const n=t.center;if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());const r={},i={};e.forEach(((e,n)=>{kw(e.x)||(e.x=Math.random()*t.width),kw(e.y)||(e.y=Math.random()*t.height),r[e.id]=e,i[e.id]=n})),t.nodeMap=r,t.nodeIdxMap=i,t.linkDistance=Fw(t.linkDistance,1),t.nodeStrength=Fw(t.nodeStrength,1),t.edgeStrength=Fw(t.edgeStrength,1);const o=t.nodeSize;let a;if(t.preventOverlap){const e=t.nodeSpacing;let n;n=kw(e)?()=>e:Rw(e)?e:()=>0,a=o?Sw(o)?t=>(o[0]>o[1]?o[0]:o[1])+n(t):t=>o+n(t):t=>{if(t.size){if(Sw(t.size)){return(t.size[0]>t.size[1]?t.size[0]:t.size[1])+n(t)}if(Mw(t.size)){return(t.size.width>t.size.height?t.size.width:t.size.height)+n(t)}return t.size+n(t)}return 10+n(t)}}t.nodeSize=a;const s=t.edges;t.degrees=Tw(e.length,t.nodeIdxMap,s),t.getMass||(t.getMass=e=>t.degrees[t.nodeIdxMap[e.id]]||1),t.run()}run(){const t=this,e=t.nodes,n=t.edges,r=t.maxIteration;if("undefined"==typeof window)return;let i=0;this.timeInterval=window.setInterval((()=>{const o=[],a=[];if(!e)return;e.forEach(((t,e)=>{o[2*e]=0,o[2*e+1]=0,a[2*e]=0,a[2*e+1]=0})),t.calRepulsive(o,e),n&&t.calAttractive(o,n),t.calGravity(o,e);const s=Math.max(.02,t.interval-.002*i);t.updateVelocity(o,a,s,e);const l=[];e.forEach((t=>{l.push({x:t.x,y:t.y})})),t.updatePosition(a,s,e),t.tick&&t.tick();let u=0;e.forEach(((t,e)=>{const n=t.x-l[e].x,r=t.y-l[e].y;u+=Math.sqrt(n*n+r*r)})),u/=e.length,u<t.minMovement&&(window.clearInterval(t.timeInterval),t.onLayoutEnd&&t.onLayoutEnd()),i++,i>=r&&(t.onLayoutEnd&&t.onLayoutEnd(),window.clearInterval(t.timeInterval))}),0)}calRepulsive(t,e){const n=this,r=n.getMass,i=n.nodeStrength,o=n.factor,a=n.coulombDisScale,s=n.preventOverlap,l=n.nodeSize;e.forEach(((n,u)=>{const c=r?r(n):1;e.forEach(((e,d)=>{if(u>=d)return;const h=n.x-e.x,f=n.y-e.y,p=Math.sqrt(h*h+f*f)+.01,g=(p+.1)*a,v=h/p,m=f/p,y=(i(n)+i(e))/2*o/(g*g),b=r?r(e):1;if(t[2*u]+=v*y,t[2*u+1]+=m*y,t[2*d]-=v*y,t[2*d+1]-=m*y,s&&p<(l(n)+l(e))/2){const r=(i(n)+i(e))/2/(p*p);t[2*u]+=v*r/c,t[2*u+1]+=m*r/c,t[2*d]-=v*r/b,t[2*d+1]-=m*r/b}}))}))}calAttractive(t,e){const n=this,r=n.nodeMap,i=n.nodeIdxMap,o=n.linkDistance,a=n.edgeStrength,s=n.getMass;e.forEach(((e,n)=>{const l=_w(e,"source"),u=_w(e,"target"),c=r[l],d=r[u],h=d.x-c.x,f=d.y-c.y,p=Math.sqrt(h*h+f*f)+.01,g=h/p,v=f/p,m=((o(e)||1)-p)*a(e),y=i[l],b=i[u],x=s?s(c):1,w=s?s(d):1;t[2*y]-=g*m/x,t[2*y+1]-=v*m/x,t[2*b]+=g*m/w,t[2*b+1]+=v*m/w}))}calGravity(t,e){const n=this,r=n.center,i=n.gravity,o=n.degrees,a=e.length;for(let s=0;s<a;s++){const a=e[s];let l=a.x-r[0],u=a.y-r[1],c=i;if(n.getCenter){const t=n.getCenter(a,o[s]);t&&kw(t[0])&&kw(t[1])&&kw(t[2])&&(l=a.x-t[0],u=a.y-t[1],c=t[2])}c&&(t[2*s]-=c*l,t[2*s+1]-=c*u)}}updateVelocity(t,e,n,r){const i=this,o=n*i.damping;r.forEach(((n,r)=>{let a=t[2*r]*o||.01,s=t[2*r+1]*o||.01;const l=Math.sqrt(a*a+s*s);if(l>i.maxSpeed){const t=i.maxSpeed/l;a*=t,s*=t}e[2*r]=a,e[2*r+1]=s}))}updatePosition(t,e,n){n.forEach(((n,r)=>{if(kw(n.fx)&&kw(n.fy))return n.x=n.fx,void(n.y=n.fy);const i=t[2*r]*e,o=t[2*r+1]*e;n.x+=i,n.y+=o}))}stop(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)}destroy(){const t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0}getType(){return"gForce"}}),Bw("gForce-gpu",class extends ww{constructor(t){super(),this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}execute(){return u$(this,void 0,void 0,(function*(){const t=this,e=t.nodes;if(!e||0===e.length)return void(t.onLayoutEnd&&t.onLayoutEnd());t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const n=t.center;if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());const r={},i={};e.forEach(((e,n)=>{kw(e.x)||(e.x=Math.random()*t.width),kw(e.y)||(e.y=Math.random()*t.height),r[e.id]=e,i[e.id]=n})),t.nodeMap=r,t.nodeIdxMap=i,t.nodeStrength=a$(t.nodeStrength,1),t.edgeStrength=a$(t.edgeStrength,1),yield t.run()}))}executeWithWorker(t,e){const n=this,r=n.nodes,i=n.center;if(!r||0===r.length)return;if(1===r.length)return r[0].x=i[0],void(r[0].y=i[1]);const o={},a={};r.forEach(((t,e)=>{kw(t.x)||(t.x=Math.random()*n.width),kw(t.y)||(t.y=Math.random()*n.height),o[t.id]=t,a[t.id]=e})),n.nodeMap=o,n.nodeIdxMap=a,n.nodeStrength=a$(n.nodeStrength,1),n.edgeStrength=a$(n.edgeStrength,1),n.run(t,e)}run(t,e){return u$(this,void 0,void 0,(function*(){const n=this,r=n.nodes,i=n.edges,o=n.maxIteration;n.width||"undefined"==typeof window||(n.width=window.innerWidth),n.height||"undefined"==typeof window||(n.height=window.innerHeight);const a=r.length;n.linkDistance=a$(n.linkDistance),n.edgeStrength=a$(n.edgeStrength);const{maxEdgePerVetex:s,array:l}=((t,e,n,r)=>{const i=[],o=[],a={};let s=0;for(s=0;s<t.length;s++){const e=t[s];a[e.id]=s,i.push(e.x),i.push(e.y),i.push(0),i.push(0),o.push([])}for(s=0;s<e.length;s++){const t=e[s],i=_w(t,"source"),l=_w(t,"target");o[a[i]].push(a[l]),o[a[i]].push(n(t)),o[a[i]].push(r(t)),o[a[i]].push(0),o[a[l]].push(a[i]),o[a[l]].push(n(t)),o[a[l]].push(r(t)),o[a[l]].push(0)}let l=0;for(s=0;s<t.length;s++){const t=i.length,e=o[s],n=e.length;i[4*s+2]=t+1048576*n/4,i[4*s+3]=0,l=Math.max(l,n/4);for(let r=0;r<n;++r){const t=e[r];i.push(+t)}}for(;i.length%4!=0;)i.push(0);return{maxEdgePerVetex:l,array:new Float32Array(i)}})(r,i,n.linkDistance,n.edgeStrength);n.degrees=Tw(r.length,n.nodeIdxMap,i);const u=[],c=[],d=[],h=[],f=[],p=[],g=[];n.getMass||(n.getMass=t=>n.degrees[n.nodeIdxMap[t.id]]||1);const v=n.gravity,m=n.center;r.forEach(((t,e)=>{u.push(n.getMass(t)),c.push(n.nodeStrength(t)),n.degrees[e]||(n.degrees[e]=0);let r=[m[0],m[1],v];if(n.getCenter){const i=n.getCenter(t,n.degrees[e]);i&&kw(i[0])&&kw(i[1])&&kw(i[2])&&(r=i)}d.push(r[0]),h.push(r[1]),f.push(r[2]),kw(t.fx)&&kw(t.fy)?(p.push(t.fx||.001),g.push(t.fy||.001)):(p.push(0),g.push(0))}));const y=s$([u,n.degrees,c,p]),b=s$([d,h,f,g]);let x;x=n.workerEnabled?o$.create({canvas:t,engineOptions:{supportCompute:!0}}):o$.create({engineOptions:{supportCompute:!0}});const w=n.onLayoutEnd,C=[];l.forEach((t=>{C.push(t)}));for(let t=0;t<4;t++)C.push(0);const S=x.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([a,1,1]).setBinding({u_Data:l,u_damping:n.damping,u_maxSpeed:n.maxSpeed,u_minMovement:n.minMovement,u_coulombDisScale:n.coulombDisScale,u_factor:n.factor,u_NodeAttributeArray1:y,u_NodeAttributeArray2:b,MAX_EDGE_PER_VERTEX:s,VERTEX_COUNT:a,u_AveMovement:C,u_interval:n.interval}),k=x.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([1,1,1]).setBinding({u_Data:l,VERTEX_COUNT:a,u_AveMovement:[0,0,0,0]});yield(()=>u$(this,void 0,void 0,(function*(){for(let t=0;t<o;t++){yield S.execute(),k.setBinding({u_Data:S}),yield k.execute();const e=Math.max(.02,n.interval-.002*t);S.setBinding({u_interval:e,u_AveMovement:k})}const i=yield S.getOutput();t?e.postMessage({type:IC,vertexEdgeData:i}):r.forEach(((t,e)=>{const n=i[4*e],r=i[4*e+1];t.x=n,t.y=r})),w&&w()})))()}))}getType(){return"gForce-gpu"}}),Bw("comboForce",class extends ww{constructor(t){super(),this.center=[0,0],this.maxIteration=100,this.gravity=10,this.comboGravity=10,this.linkDistance=10,this.alpha=1,this.alphaMin=.001,this.alphaDecay=1-Math.pow(this.alphaMin,1/300),this.alphaTarget=0,this.velocityDecay=.6,this.edgeStrength=.6,this.nodeStrength=30,this.preventOverlap=!1,this.preventNodeOverlap=!1,this.preventComboOverlap=!1,this.collideStrength=void 0,this.nodeCollideStrength=.5,this.comboCollideStrength=.5,this.comboSpacing=20,this.comboPadding=10,this.optimizeRangeFactor=1,this.onTick=()=>{},this.onLayoutEnd=()=>{},this.depthAttractiveForceScale=1,this.depthRepulsiveForceScale=2,this.nodes=[],this.edges=[],this.combos=[],this.comboTrees=[],this.width=300,this.height=300,this.bias=[],this.nodeMap={},this.oriComboMap={},this.indexMap={},this.comboMap={},this.previousLayouted=!1,this.updateCfg(t)}getDefaultCfg(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}execute(){const t=this,e=t.nodes,n=t.center;if(t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},e&&0!==e.length){if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()}else t.onLayoutEnd&&t.onLayoutEnd()}run(){const t=this,e=t.nodes,n=t.previousLayouted?t.maxIteration/5:t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);const r=t.center,i=t.velocityDecay,o=t.comboMap;t.previousLayouted||t.initPos(o);for(let l=0;l<n;l++){const n=[];e.forEach(((t,e)=>{n[e]={x:0,y:0}})),t.applyCalculate(n),t.applyComboCenterForce(n),e.forEach(((t,e)=>{kw(t.x)&&kw(t.y)&&(t.x+=n[e].x*i,t.y+=n[e].y*i)})),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()}const a=[0,0];e.forEach((t=>{kw(t.x)&&kw(t.y)&&(a[0]+=t.x,a[1]+=t.y)})),a[0]/=e.length,a[1]/=e.length;const s=[r[0]-a[0],r[1]-a[1]];e.forEach(((t,e)=>{kw(t.x)&&kw(t.y)&&(t.x+=s[0],t.y+=s[1])})),t.combos.forEach((t=>{const e=o[t.id];e&&e.empty&&(t.x=e.cx||t.x,t.y=e.cy||t.y)})),t.previousLayouted=!0}initVals(){const t=this,e=t.edges,n=t.nodes,r=t.combos,i={},o={},a={};n.forEach(((t,e)=>{o[t.id]=t,a[t.id]=e})),t.nodeMap=o,t.indexMap=a;const s={};r.forEach((t=>{s[t.id]=t})),t.oriComboMap=s,t.comboMap=t.getComboMap();const l=t.preventOverlap;t.preventComboOverlap=t.preventComboOverlap||l,t.preventNodeOverlap=t.preventNodeOverlap||l;const u=t.collideStrength;u&&(t.comboCollideStrength=u,t.nodeCollideStrength=u),t.comboCollideStrength=t.comboCollideStrength?t.comboCollideStrength:0,t.nodeCollideStrength=t.nodeCollideStrength?t.nodeCollideStrength:0;for(let E=0;E<e.length;++E){const t=_w(e[E],"source"),n=_w(e[E],"target");i[t]?i[t]++:i[t]=1,i[n]?i[n]++:i[n]=1}const c=[];for(let E=0;E<e.length;++E){const t=_w(e[E],"source"),n=_w(e[E],"target");c[E]=i[t]/(i[t]+i[n])}this.bias=c;const d=t.nodeSize,h=t.nodeSpacing;let f,p;if(p=kw(h)?()=>h:Rw(h)?h:()=>0,this.nodeSpacing=p,d)if(Rw(d))f=t=>d(t);else if(Sw(d)){const t=(d[0]>d[1]?d[0]:d[1])/2;f=e=>t}else{const t=d/2;f=e=>t}else f=t=>{if(t.size){if(Sw(t.size)){return(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2}if(Mw(t.size)){return(t.size.width>t.size.height?t.size.width:t.size.height)/2}return t.size/2}return 10};this.nodeSize=f;const g=t.comboSpacing;let v;v=kw(g)?()=>g:Rw(g)?g:()=>0,this.comboSpacing=v;const m=t.comboPadding;let y;y=kw(m)?()=>m:Sw(m)?()=>Math.max.apply(null,m):Rw(m)?m:()=>0,this.comboPadding=y;let b,x=this.linkDistance;x||(x=10),b=kw(x)?t=>x:x,this.linkDistance=b;let w,C=this.edgeStrength;C||(C=1),w=kw(C)?t=>C:C,this.edgeStrength=w;let S,k=this.nodeStrength;k||(k=30),S=kw(k)?t=>k:k,this.nodeStrength=S}initPos(t){this.nodes.forEach(((e,n)=>{const r=e.comboId,i=t[r];r&&i?(e.x=i.cx+100/(n+1),e.y=i.cy+100/(n+1)):(e.x=100/(n+1),e.y=100/(n+1))}))}getComboMap(){const t=this,e=t.nodeMap,n=t.indexMap,r=t.comboTrees,i=t.oriComboMap,o={};return(r||[]).forEach((r=>{const a=[];Ow(r,(r=>{if("node"===r.itemType)return!0;if(!i[r.id])return!0;if(void 0===o[r.id]){const e={id:r.id,name:r.id,cx:0,cy:0,count:0,depth:t.oriComboMap[r.id].depth||0,children:[]};o[r.id]=e}const s=r.children;s&&s.forEach((t=>{if(!o[t.id]&&!e[t.id])return!0;a.push(t)}));const l=o[r.id];if(l.cx=0,l.cy=0,0===a.length){l.empty=!0;const o=i[r.id],s=Object.keys(e).length,u=`${r.id}-visual-child-${s}`,c={id:u,x:o.x,y:o.y,depth:l.depth+1,itemType:"node"};t.nodes.push(c),e[u]=c,n[u]=s,l.cx=o.x,l.cy=o.y,a.push(c)}return a.forEach((t=>{if(l.count++,"node"!==t.itemType){const e=o[t.id];return kw(e.cx)&&(l.cx+=e.cx),void(kw(e.cy)&&(l.cy+=e.cy))}const n=e[t.id];n&&(kw(n.x)&&(l.cx+=n.x),kw(n.y)&&(l.cy+=n.y))})),l.cx/=l.count,l.cy/=l.count,l.children=a,!0}))})),o}applyComboCenterForce(t){const e=this,n=e.gravity,r=e.comboGravity||n,i=this.alpha,o=e.comboTrees,a=e.indexMap,s=e.nodeMap,l=e.comboMap;(o||[]).forEach((e=>{Ow(e,(e=>{if("node"===e.itemType)return!0;if(!l[e.id])return!0;const n=l[e.id],o=(n.depth+1)/10*.5,u=n.cx,c=n.cy;return n.cx=0,n.cy=0,n.children.forEach((e=>{if("node"!==e.itemType){const t=l[e.id];return t&&kw(t.cx)&&(n.cx+=t.cx),void(t&&kw(t.cy)&&(n.cy+=t.cy))}const d=s[e.id],h=d.x-u||.005,f=d.y-c||.005,p=Math.sqrt(h*h+f*f),g=a[d.id],v=r*i/p*o;t[g].x-=h*v,t[g].y-=f*v,kw(d.x)&&(n.cx+=d.x),kw(d.y)&&(n.cy+=d.y)})),n.cx/=n.count,n.cy/=n.count,!0}))}))}applyCalculate(t){const e=this,n=e.comboMap,r=e.nodes,i={};r.forEach(((t,e)=>{r.forEach(((n,r)=>{if(e<r)return;const o=t.x-n.x||.005,a=t.y-n.y||.005;let s=o*o+a*a;const l=Math.sqrt(s);s<1&&(s=l),i[`${t.id}-${n.id}`]={vx:o,vy:a,vl2:s,vl:l},i[`${n.id}-${t.id}`]={vl2:s,vl:l,vx:-o,vy:-a}}))})),e.updateComboSizes(n),e.calRepulsive(t,i),e.calAttractive(t,i);e.preventComboOverlap&&e.comboNonOverlapping(t,n)}updateComboSizes(t){const e=this,n=e.comboTrees,r=e.nodeMap,i=e.nodeSize,o=e.comboSpacing,a=e.comboPadding;(n||[]).forEach((n=>{const s=[];Ow(n,(n=>{if("node"===n.itemType)return!0;const l=t[n.id];if(!l)return!1;const u=n.children;u&&u.forEach((e=>{(t[e.id]||r[e.id])&&s.push(e)})),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0,s.forEach((t=>{if("node"!==t.itemType)return!0;const e=r[t.id];if(!e)return!0;const n=i(e),o=e.x-n,a=e.y-n,s=e.x+n,u=e.y+n;l.minX>o&&(l.minX=o),l.minY>a&&(l.minY=a),l.maxX<s&&(l.maxX=s),l.maxY<u&&(l.maxY=u)}));let c=e.oriComboMap[n.id].size||10;Sw(c)&&(c=c[0]);const d=Math.max(l.maxX-l.minX,l.maxY-l.minY,c);return l.r=d/2+o(l)/2+a(l),!0}))}))}comboNonOverlapping(t,e){const n=this,r=n.comboTree,i=n.comboCollideStrength,o=n.indexMap,a=n.nodeMap;Ow(r,(n=>{if(!e[n.id]&&!a[n.id]&&"comboTreeRoot"!==n.id)return!1;const r=n.children;return r&&r.length>1&&r.forEach(((n,s)=>{if("node"===n.itemType)return!1;const l=e[n.id];l&&r.forEach(((r,u)=>{if(s<=u)return!1;if("node"===r.itemType)return!1;const c=e[r.id];if(!c)return!1;const d=l.cx-c.cx||.005,h=l.cy-c.cy||.005,f=d*d+h*h,p=l.r||1,g=c.r||1,v=p+g,m=g*g,y=p*p;if(f<v*v){const e=n.children;if(!e||0===e.length)return!1;const s=r.children;if(!s||0===s.length)return!1;const l=Math.sqrt(f),u=(v-l)/l*i,c=d*u,p=h*u,g=m/(y+m),b=1-g;e.forEach((e=>{if("node"!==e.itemType)return!1;if(!a[e.id])return;const n=o[e.id];s.forEach((e=>{if("node"!==e.itemType)return!1;if(!a[e.id])return!1;const r=o[e.id];t[n].x+=c*g,t[n].y+=p*g,t[r].x-=c*b,t[r].y-=p*b}))}))}}))})),!0}))}calRepulsive(t,e){const n=this,r=n.nodes,i=n.width*n.optimizeRangeFactor,o=n.nodeStrength,a=n.alpha,s=n.nodeCollideStrength,l=n.preventNodeOverlap,u=n.nodeSize,c=n.nodeSpacing,d=n.depthRepulsiveForceScale,h=n.center;r.forEach(((f,p)=>{if(f.x&&f.y){if(h){const e=n.gravity,r=f.x-h[0]||.005,i=f.y-h[1]||.005,o=Math.sqrt(r*r+i*i);t[p].x-=r*e*a/o,t[p].y-=i*e*a/o}r.forEach(((n,r)=>{if(p===r)return;if(!n.x||!n.y)return;const{vl2:h,vl:g}=e[`${f.id}-${n.id}`];if(g>i)return;const{vx:v,vy:m}=e[`${f.id}-${n.id}`];let y=Math.log(Math.abs(n.depth-f.depth)/10)+1||1;y=y<1?1:y,n.comboId!==f.comboId&&(y+=1);const b=y?Math.pow(d,y):1,x=o(n)*a/h*b;if(t[p].x+=v*x,t[p].y+=m*x,p<r&&l){const e=u(f)+c(f)||1,i=u(n)+c(n)||1,o=e+i;if(h<o*o){const n=(o-g)/g*s,a=i*i;let l=a/(e*e+a);const u=v*n,c=m*n;t[p].x+=u*l,t[p].y+=c*l,l=1-l,t[r].x-=u*l,t[r].y-=c*l}}}))}}))}calAttractive(t,e){const n=this,r=n.edges,i=n.linkDistance,o=n.alpha,a=n.edgeStrength,s=n.bias,l=n.depthAttractiveForceScale;r.forEach(((r,u)=>{const c=_w(r,"source"),d=_w(r,"target");if(!c||!d||c===d)return;const h=n.indexMap[c],f=n.indexMap[d],p=n.nodeMap[c],g=n.nodeMap[d];if(!p||!g)return;let v=p.depth===g.depth?0:Math.log(Math.abs(p.depth-g.depth)/10);p.comboId===g.comboId&&(v/=2);let m=v?Math.pow(l,v):1;if(p.comboId!==g.comboId&&1===m?m=l/2:p.comboId===g.comboId&&(m=2),!(kw(g.x)&&kw(p.x)&&kw(g.y)&&kw(p.y)))return;const{vl:y,vx:b,vy:x}=e[`${d}-${c}`],w=(y-i(r))/y*o*a(r)*m,C=b*w,S=x*w,k=s[u];t[f].x-=C*k,t[f].y-=S*k,t[h].x+=C*(1-k),t[h].y+=S*(1-k)}))}getType(){return"comboForce"}}),Bw("forceAtlas2",class extends ww{constructor(t){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.kr=5,this.kg=1,this.mode="normal",this.preventOverlap=!1,this.dissuadeHubs=!1,this.barnesHut=void 0,this.maxIteration=0,this.ks=.1,this.ksmax=10,this.tao=.1,this.onLayoutEnd=()=>{},this.prune=void 0,this.updateCfg(t)}getDefaultCfg(){return{}}execute(){const t=this,{nodes:e,onLayoutEnd:n,prune:r}=t;let i=t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);const o=[],a=e.length;for(let s=0;s<a;s+=1){const n=e[s];let r=10,i=10;kw(n.size)&&(r=n.size,i=n.size),Sw(n.size)?(isNaN(n.size[0])||(r=n.size[0]),isNaN(n.size[1])||(i=n.size[1])):Mw(n.size)&&(r=n.size.width,i=n.size.height),t.getWidth&&!isNaN(t.getWidth(n))&&(i=t.getWidth(n)),t.getHeight&&!isNaN(t.getHeight(n))&&(r=t.getHeight(n));const a=Math.max(r,i);o.push(a)}void 0===t.barnesHut&&a>250&&(t.barnesHut=!0),void 0===t.prune&&a>100&&(t.prune=!0),0!==this.maxIteration||t.prune?0===this.maxIteration&&r&&(i=100,a<=200&&a>100?i=500:a>200&&(i=950),this.maxIteration=i):(i=250,a<=200&&a>100?i=1e3:a>200&&(i=1200),this.maxIteration=i),t.kr||(t.kr=50,a>100&&a<=500?t.kr=20:a>500&&(t.kr=1)),t.kg||(t.kg=20,a>100&&a<=500?t.kg=10:a>500&&(t.kg=1)),this.nodes=t.updateNodesByForces(o),n()}updateNodesByForces(t){const e=this,{edges:n,maxIteration:r}=e;let i=e.nodes;const o=n.filter((t=>_w(t,"source")!==_w(t,"target"))),a=i.length,s=o.length,l=[],u={},c={},d=[];for(let f=0;f<a;f+=1)u[i[f].id]=f,l[f]=0,(void 0===i[f].x||isNaN(i[f].x))&&(i[f].x=1e3*Math.random()),(void 0===i[f].y||isNaN(i[f].y))&&(i[f].y=1e3*Math.random()),d.push({x:i[f].x,y:i[f].y});for(let f=0;f<s;f+=1){let t,e,n=0,r=0;for(let s=0;s<a;s+=1){const a=_w(o[f],"source"),l=_w(o[f],"target");i[s].id===a?(t=i[s],n=s):i[s].id===l&&(e=i[s],r=s),c[f]={sourceIdx:n,targetIdx:r}}t&&(l[u[t.id]]+=1),e&&(l[u[e.id]]+=1)}let h=r;if(i=this.iterate(h,u,c,s,l,t),e.prune){for(let t=0;t<s;t+=1)l[c[t].sourceIdx]<=1?(i[c[t].sourceIdx].x=i[c[t].targetIdx].x,i[c[t].sourceIdx].y=i[c[t].targetIdx].y):l[c[t].targetIdx]<=1&&(i[c[t].targetIdx].x=i[c[t].sourceIdx].x,i[c[t].targetIdx].y=i[c[t].sourceIdx].y);e.prune=!1,e.barnesHut=!1,h=100,i=this.iterate(h,u,c,s,l,t)}return i}iterate(t,e,n,r,i,o){const a=this;let{nodes:s}=a;const{kr:l,preventOverlap:u}=a,{barnesHut:c}=a,d=s.length;let h=0;let f=t;let p=[];const g=[],v=[];for(let m=0;m<d;m+=1)if(p[2*m]=0,p[2*m+1]=0,c){const t={id:m,rx:s[m].x,ry:s[m].y,mass:1,g:l,degree:i[m]};v[m]=new c$(t)}for(;f>0;){for(let e=0;e<d;e+=1)g[2*e]=p[2*e],g[2*e+1]=p[2*e+1],p[2*e]=0,p[2*e+1]=0;p=this.getAttrForces(f,50,r,e,n,i,o,p),p=c&&(u&&f>50||!u)?this.getOptRepGraForces(p,v,i):this.getRepGraForces(f,50,p,100,o,i);const t=this.updatePos(p,g,h,i);s=t.nodes,h=t.sg,f--,a.tick&&a.tick()}return s}getAttrForces(t,e,n,r,i,o,a,s){const{nodes:l,preventOverlap:u,dissuadeHubs:c,mode:d,prune:h}=this;for(let f=0;f<n;f+=1){const n=l[i[f].sourceIdx],p=i[f].sourceIdx,g=l[i[f].targetIdx],v=i[f].targetIdx;if(h&&(o[p]<=1||o[v]<=1))continue;const m=[g.x-n.x,g.y-n.y];let y=Math.hypot(m[0],m[1]);y=y<1e-4?1e-4:y,m[0]=m[0]/y,m[1]=m[1]/y,u&&t<e&&(y=y-a[p]-a[v]);let b=y,x=b;"linlog"===d&&(b=Math.log(1+y),x=b),c&&(b=y/o[p],x=y/o[v]),u&&t<e&&y<=0?(b=0,x=0):u&&t<e&&y>0&&(b=y,x=y),s[2*r[n.id]]+=b*m[0],s[2*r[g.id]]-=x*m[0],s[2*r[n.id]+1]+=b*m[1],s[2*r[g.id]+1]-=x*m[1]}return s}getRepGraForces(t,e,n,r,i,o){const{nodes:a,preventOverlap:s,kr:l,kg:u,center:c,prune:d}=this,h=a.length;for(let f=0;f<h;f+=1){for(let u=f+1;u<h;u+=1){if(d&&(o[f]<=1||o[u]<=1))continue;const c=[a[u].x-a[f].x,a[u].y-a[f].y];let h=Math.hypot(c[0],c[1]);h=h<1e-4?1e-4:h,c[0]=c[0]/h,c[1]=c[1]/h,s&&t<e&&(h=h-i[f]-i[u]);let p=l*(o[f]+1)*(o[u]+1)/h;s&&t<e&&h<0?p=r*(o[f]+1)*(o[u]+1):s&&t<e&&0===h?p=0:s&&t<e&&h>0&&(p=l*(o[f]+1)*(o[u]+1)/h),n[2*f]-=p*c[0],n[2*u]+=p*c[0],n[2*f+1]-=p*c[1],n[2*u+1]+=p*c[1]}const p=[a[f].x-c[0],a[f].y-c[1]],g=Math.hypot(p[0],p[1]);p[0]=p[0]/g,p[1]=p[1]/g;const v=u*(o[f]+1);n[2*f]-=v*p[0],n[2*f+1]-=v*p[1]}return n}getOptRepGraForces(t,e,n){const{nodes:r,kg:i,center:o,prune:a}=this,s=r.length;let l=9e10,u=-9e10,c=9e10,d=-9e10;for(let g=0;g<s;g+=1)a&&n[g]<=1||(e[g].setPos(r[g].x,r[g].y),r[g].x>=u&&(u=r[g].x),r[g].x<=l&&(l=r[g].x),r[g].y>=d&&(d=r[g].y),r[g].y<=c&&(c=r[g].y));const h=Math.max(u-l,d-c),f=new d$({xmid:(u+l)/2,ymid:(d+c)/2,length:h,massCenter:o,mass:s}),p=new h$(f);for(let g=0;g<s;g+=1)a&&n[g]<=1||e[g].in(f)&&p.insert(e[g]);for(let g=0;g<s;g+=1){if(a&&n[g]<=1)continue;e[g].resetForce(),p.updateForce(e[g]),t[2*g]-=e[g].fx,t[2*g+1]-=e[g].fy;const s=[r[g].x-o[0],r[g].y-o[1]];let l=Math.hypot(s[0],s[1]);l=l<1e-4?1e-4:l,s[0]=s[0]/l,s[1]=s[1]/l;const u=i*(n[g]+1);t[2*g]-=u*s[0],t[2*g+1]-=u*s[1]}return t}updatePos(t,e,n,r){const{nodes:i,ks:o,tao:a,prune:s,ksmax:l}=this,u=i.length,c=[],d=[];let h=0,f=0;for(let g=0;g<u;g+=1){if(s&&r[g]<=1)continue;const n=[t[2*g]-e[2*g],t[2*g+1]-e[2*g+1]],i=Math.hypot(n[0],n[1]),o=[t[2*g]+e[2*g],t[2*g+1]+e[2*g+1]],a=Math.hypot(o[0],o[1]);c[g]=i,d[g]=a/2,h+=(r[g]+1)*c[g],f+=(r[g]+1)*d[g]}const p=n;n=a*f/h,0!==p&&(n=n>1.5*p?1.5*p:n);for(let g=0;g<u;g+=1){if(s&&r[g]<=1)continue;let e=o*n/(1+n*Math.sqrt(c[g])),a=Math.hypot(t[2*g],t[2*g+1]);a=a<1e-4?1e-4:a;const u=l/a;e=e>u?u:e;const d=e*t[2*g],h=e*t[2*g+1];i[g].x+=d,i[g].y+=h}return{nodes:i,sg:n}}});var sV=function(t,e){var n=t.toString(),r=new Blob(["importScripts('"+e+"');("+n+")()"],{type:"text/javascript"});return new Worker(URL.createObjectURL(r))},lV=function(t){return void 0===t&&(t="https://unpkg.com/@antv/layout@latest/dist/layout.min.js"),new sV((function(){var t="LAYOUT_RUN",e="LAYOUT_END",n="LAYOUT_ERROR",r="GPU_LAYOUT_RUN";layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout),onmessage=function(i){(function(e){var n=e.data.type;return n===t||n===r})(i)&&function(i){var o=this;switch(i.data.type){case t:var a,s=i.data,l=s.nodes,u=s.edges,c=s.layoutCfg,d=(v=void 0===c?{}:c).type;if(!(h=layout.getLayoutByName(d))){this.postMessage({type:n,message:"layout "+d+" not found"});break}v.onLayoutEnd=function(){o.postMessage({type:e,nodes:l}),null==a||a.destroy()},(a=new h(v)).init({nodes:l,edges:u}),a.execute();break;case r:var h,f=i.data,p=f.nodes,g=(u=f.edges,f.layoutCfg),v=void 0===g?{}:g,m=f.canvas;if(d=v.type,!(h=layout.getLayoutByName(d))){this.postMessage({type:n,message:"layout "+d+" not found"});break}if("gpu"!==d.split("-")[1]){this.postMessage({type:n,message:"layout "+d+" does not support GPU"});break}var y=new h(v);y.init({nodes:p,edges:u}),y.executeWithWorker(m,this)}}(i)}}),t)},uV="LAYOUT_RUN",cV="LAYOUT_END",dV="LAYOUT_ERROR",hV="LAYOUT_TICK",fV="GPU_LAYOUT_RUN",pV="GPU_LAYOUT_END";function gV(t){return(gV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var vV=function(t){return setTimeout(t,16)},mV=function(t){return clearTimeout(t)},yV=function(t){return("undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||vV)(t)},bV=function(t){return("undefined"!=typeof window&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||mV)(t)},xV=["fruchterman","gForce"],wV=["force","grid","circular"],CV=function(t){function e(e){var n=t.call(this,e)||this;return n.graph=e,n.layoutCfg=e.get("layout")||{},n.layoutType=n.getLayoutType(),n.worker=null,n.workerData={},n.initLayout(),n}return Ka(e,t),e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker||("undefined"==typeof Worker?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=lV(this.layoutCfg.workerScriptURL)),this.worker},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(bV(t.requestId),t.requestId=null),t.requestId2&&(bV(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,e){var n=this;return new Promise((function(r,i){return Ja(n,void 0,void 0,(function(){var n,o,a,s,l,u,c;return ts(this,(function(d){switch(d.label){case 0:n=this.graph,o=t.type,t.onLayoutEnd=function(){n.emit("aftersublayout",{type:o}),r()},o&&this.isGPU&&(this.hasGPUVersion(o)?o+="-gpu":console.warn("The '"+o+"' layout does not support GPU calculation for now, it will run in CPU.")),"force"===o||"g6force"===o||"gForce"===o?(a=t.onTick,u=function(){a&&a(),n.refreshPositions()},t.tick=u):"comboForce"===t.type&&(t.comboTrees=n.get("comboTrees")),!1;try{s=new f$[o](t)}catch(PCt){console.warn("The layout method: '"+o+"' does not exist! Please specify it first."),i()}return s.enableTick&&(l=t.onTick,u=function(){l&&l(),n.refreshPositions()},s.tick=u),function(t,e){var n;if(!(null===(n=null==t?void 0:t.nodes)||void 0===n?void 0:n.length))return;t.nodes.forEach((function(t){t.layoutOrder=e}))}(c=this.filterLayoutData(this.data,t),e),s.init(c),n.emit("beforesublayout",{type:o}),[4,s.execute()];case 1:return d.sent(),s.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),this.layoutMethods[e]=s,[2]}}))}))}))},e.prototype.updateLayoutMethod=function(t,e){var n=this;return new Promise((function(r,i){return Ja(n,void 0,void 0,(function(){var n,i,o;return ts(this,(function(a){switch(a.label){case 0:return n=this.graph,i=null==e?void 0:e.type,e.onLayoutEnd=function(){n.emit("aftersublayout",{type:i}),r()},o=this.filterLayoutData(this.data,e),t.init(o),t.updateCfg(e),n.emit("beforesublayout",{type:i}),[4,t.execute()];case 1:return a.sent(),t.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd(),[2]}}))}))}))},e.prototype.layout=function(t){var e=this,n=this.graph;this.data=this.setDataFromGraph();var r=this.data,i=r.nodes,o=r.hiddenNodes;if(!i)return!1;var a=n.get("width"),s=n.get("height"),l={};Object.assign(l,{width:a,height:s,center:[a/2,s/2]},this.layoutCfg),this.layoutCfg=l,this.destoryLayoutMethods(),n.emit("beforelayout"),this.initPositions(l.center,i),this.initPositions(l.center,o);var u=l.type;u&&"gpu"===u.split("-")[1]&&(u=u.split("-")[0],l.gpuEnabled=!0);var c=!1;l.gpuEnabled&&(c=!0,nV().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),c=!1)),this.isGPU=c;var d=l.onLayoutEnd,h=l.layoutEndFormatted,f=l.adjust;if(h||(l.layoutEndFormatted=!0,l.onAllLayoutEnd=function(){return Ja(e,void 0,void 0,(function(){return ts(this,(function(t){switch(t.label){case 0:return d&&d(),this.refreshLayout(),f&&l.pipes?[4,this.adjustPipesBox(this.data,f)]:[3,2];case 1:t.sent(),this.refreshLayout(),t.label=2;case 2:return n.emit("afterlayout"),[2]}}))}))}),this.stopWorker(),l.workerEnabled&&this.layoutWithWorker(this.data))return!0;var p=Promise.resolve();return l.type?p=p.then((function(){return Ja(e,void 0,void 0,(function(){return ts(this,(function(t){switch(t.label){case 0:return[4,this.execLayoutMethod(l,0)];case 1:return[2,t.sent()]}}))}))})):l.pipes&&l.pipes.forEach((function(t,n){p=p.then((function(){return Ja(e,void 0,void 0,(function(){return ts(this,(function(e){switch(e.label){case 0:return[4,this.execLayoutMethod(t,n)];case 1:return[2,e.sent()]}}))}))}))})),p.then((function(){l.onAllLayoutEnd&&l.onAllLayoutEnd(),t&&t()})).catch((function(t){console.warn("graph layout failed,",t)})),!1},e.prototype.layoutWithWorker=function(t){var e=this,n=this.layoutCfg,r=this.graph,i=this.getWorker(),o=this.workerData;if(!i)return!1;o.requestId=null,o.requestId2=null,o.currentTick=null,o.currentTickData=null,r.emit("beforelayout");var a=Promise.resolve();if(n.type)a=a.then((function(){return e.runWebworker(i,t,n)}));else if(n.pipes)for(var s=function(n){a=a.then((function(){return e.runWebworker(i,t,n)}))},l=0,u=n.pipes;l<u.length;l++){s(u[l])}return a.then((function(){n.onAllLayoutEnd&&n.onAllLayoutEnd()})).catch((function(t){console.error("layout failed",t)})),!0},e.prototype.runWebworker=function(t,e,n){var r=this,i=this.isGPU,o=this.filterLayoutData(e,n),a=o.nodes,s=o.edges,l=document.createElement("canvas"),u=i&&"undefined"!=typeof window&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in l,c=function(t,e){var n={};if(t&&"object"===gV(t))return Object.keys(t).forEach((function(r){t.hasOwnProperty(r)&&e(t[r])&&(n[r]=t[r])})),n;return t}(n,(function(t){return"function"!=typeof t}));if(u){var d=l.transferControlToOffscreen();c.type=c.type+"-gpu",t.postMessage({type:fV,nodes:a,edges:s,layoutCfg:c,canvas:d},[d])}else t.postMessage({type:uV,nodes:a,edges:s,layoutCfg:c});return new Promise((function(e,i){t.onmessage=function(t){r.handleWorkerMessage(e,i,t,o,n)}}))},e.prototype.handleWorkerMessage=function(t,e,n,r,i){var o=this.graph,a=this.workerData,s=n.data,l=s.type,u=function(){i.onTick&&i.onTick()};switch(l){case hV:a.currentTick=s.currentTick,a.currentTickData=s,a.requestId||(a.requestId=yV((function(){SV(r,s),o.refreshPositions(),u(),s.currentTick===s.totalTicks?t():a.currentTick===s.totalTicks&&(a.requestId2=yV((function(){SV(r,a.currentTickData),o.refreshPositions(),a.requestId2=null,u(),t()}))),a.requestId=null})));break;case cV:null==a.currentTick&&(SV(r,s),t());break;case pV:null==a.currentTick&&(!function(t,e){for(var n=t.nodes,r=e.vertexEdgeData,i=n.length,o=0;o<i;o++){var a=n[o],s=r[4*o],l=r[4*o+1];a.x=s,a.y=l}}(r,s),t());break;case dV:console.warn("Web-Worker layout error!",s.message),e();break;default:e()}},e.prototype.updateLayoutCfg=function(t){var e=this,n=this.graph,r=this.layoutMethods,i=Tl({},this.layoutCfg,t);if(this.layoutCfg=i,null==r?void 0:r.length){if(this.data=this.setDataFromGraph(),this.stopWorker(),!t.workerEnabled||!this.layoutWithWorker(this.data)){n.emit("beforelayout");var o=Promise.resolve();1===r.length?o=o.then((function(){return Ja(e,void 0,void 0,(function(){return ts(this,(function(t){switch(t.label){case 0:return[4,this.updateLayoutMethod(r[0],i)];case 1:return[2,t.sent()]}}))}))})):null==r||r.forEach((function(t,n){var r=i.pipes[n];o=o.then((function(){return Ja(e,void 0,void 0,(function(){return ts(this,(function(e){switch(e.label){case 0:return[4,this.updateLayoutMethod(t,r)];case 1:return[2,e.sent()]}}))}))}))})),o.then((function(){i.onAllLayoutEnd&&i.onAllLayoutEnd()})).catch((function(t){console.warn("layout failed",t)}))}}else this.layout()},e.prototype.adjustPipesBox=function(t,e){var n=this;return new Promise((function(r){var i=t.nodes;(null==i?void 0:i.length)||r(),wV.includes(e)||(console.warn("The adjust type "+e+" is not supported yet, please assign it with 'force', 'grid', or 'circular'."),r());var o={center:n.layoutCfg.center,nodeSize:function(t){return Math.max(t.height,t.width)},preventOverlap:!0,onLayoutEnd:function(){}},a=n.getLayoutBBox(i),s=a.groupNodes,l=a.layoutNodes,u=Pl(l);o.onLayoutEnd=function(){null==l||l.forEach((function(t,e){var n,r,i,o=t.x-(null===(n=u[e])||void 0===n?void 0:n.x),a=t.y-(null===(r=u[e])||void 0===r?void 0:r.y);null===(i=s[e])||void 0===i||i.forEach((function(t){t.x+=o,t.y+=a}))})),r()},new f$[e](o).layout({nodes:l})}))},e.prototype.hasGPUVersion=function(t){for(var e=xV.length,n=0;n<e;n++)if(xV[n]===t)return!0;return!1},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(jm);function SV(t,e){for(var n=t.nodes,r=e.nodes,i=n.length,o=0;o<i;o++){var a=n[o];a.x=r[o].x,a.y=r[o].y}}var kV,EV=Ax,MV=function(t){function e(e){var n=t.call(this,e)||this,r=n.get("defaultNode");return r||n.set("defaultNode",{type:"circle"}),r.type||(r.type="circle",n.set("defaultNode",r)),n.destroyed=!1,n}return Ka(e,t),e.prototype.initLayoutController=function(){var t=new CV(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new xw(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if("string"==typeof t&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var e,n=t.clientWidth,r=t.clientHeight,i=this.get("width")||n,o=this.get("height")||r;if(this.get("width")||this.get("height")||(this.set("width",n),this.set("height",r)),"svg"===this.get("renderer"))e=new Cx({container:t,width:i,height:o});else{var a={container:t,width:i,height:o},s=this.get("pixelRatio");s&&(a.pixelRatio=s),e=new Rb(a)}this.set("canvas",e)},e.prototype.initPlugins=function(){var t=this;bs(t.get("plugins"),(function(e){!e.destroyed&&e.initPlugin&&e.initPlugin(t)}))},e.prototype.downloadImageWatermark=function(t,e,n,r){return Ja(this,void 0,void 0,(function(){var i,o,a;return ts(this,(function(s){switch(s.label){case 0:return i=t.style.backgroundImage,o=i.slice(5,i.length-2),(a=new Image).src=o,[4,new Promise((function(t){a.onload=function(){var i=e.createPattern(a,"repeat");e.rect(0,0,n,r),e.fillStyle=i,e.fill(),t("")}}))];case 1:return s.sent(),[2]}}))}))},e.prototype.asyncToDataUrl=function(t,e,n,r,i,o){var a=this,s=document.querySelector(".g6-graph-watermarker"),l=this.get("canvas"),u=l.getRenderer(),c=o||l.get("el"),d="";t||(t="image/png"),setTimeout((function(){return Ja(a,void 0,void 0,(function(){var o,a,l,h,f,p,g,v,m,y;return ts(this,(function(b){switch(b.label){case 0:return"svg"!==u?[3,1]:(o=c.cloneNode(!0),a=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),(l=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",a)).replaceChild(o,l.documentElement),h=(new XMLSerializer).serializeToString(l),d="data:image/svg+xml;charset=utf8,"+encodeURIComponent(h),[3,4]);case 1:return f=void 0,p=c.getContext("2d"),g=r||this.get("width"),v=i||this.get("height"),m=void 0,s?[4,this.downloadImageWatermark(s,p,g,v)]:[3,3];case 2:b.sent(),b.label=3;case 3:e&&(y="undefined"!=typeof window?window.devicePixelRatio:1,f=p.getImageData(0,0,g*y,v*y),m=p.globalCompositeOperation,p.globalCompositeOperation="destination-over",p.fillStyle=e,p.fillRect(0,0,g,v)),d=c.toDataURL(t),e&&(p.clearRect(0,0,g,v),p.putImageData(f,0,0),p.globalCompositeOperation=m),b.label=4;case 4:return n&&n(d),[2]}}))}))}),16)},e.prototype.toDataURL=function(t,e){var n=this.get("canvas"),r=n.getRenderer(),i=n.get("el");t||(t="image/png");var o="";if("svg"===r){var a=i.cloneNode(!0),s=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),l=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",s);l.replaceChild(a,l.documentElement);var u=(new XMLSerializer).serializeToString(l);o="data:image/svg+xml;charset=utf8,"+encodeURIComponent(u)}else{var c=void 0,d=i.getContext("2d"),h=this.get("width"),f=this.get("height"),p=void 0;if(e){var g="undefined"!=typeof window?window.devicePixelRatio:1;c=d.getImageData(0,0,h*g,f*g),p=d.globalCompositeOperation,d.globalCompositeOperation="destination-over",d.fillStyle=e,d.fillRect(0,0,h,f)}o=i.toDataURL(t),e&&(d.clearRect(0,0,h,f),d.putImageData(c,0,0),d.globalCompositeOperation=p)}return o},e.prototype.toFullDataURL=function(t,e,n){var r=this.get("group").getCanvasBBox(),i=r.height,o=r.width,a=this.get("renderer"),s=fw('<id="virtual-image"></div>'),l=n?n.backgroundColor:void 0,u=n?n.padding:void 0;u?el(u)&&(u=[u,u,u,u]):u=[0,0,0,0];var c=i+u[0]+u[2],d=o+u[1]+u[3],h={container:s,height:c,width:d,quickHit:!0},f="svg"===a?new Cx(h):new Rb(h),p=this.get("group").clone(),g=Pl(p.getMatrix());g||(g=[1,0,0,0,1,0,0,0,1]);var v=(r.maxX+r.minX)/2,m=(r.maxY+r.minY)/2;g=EV(g,[["t",-v,-m],["t",o/2+u[3],i/2+u[0]]]),p.resetMatrix(),p.setMatrix(g),f.add(p);var y=f.get("el"),b="";e||(e="image/png"),setTimeout((function(){if("svg"===a){var n=y.cloneNode(!0),r=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),i=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",r);i.replaceChild(n,i.documentElement);var o=(new XMLSerializer).serializeToString(i);b="data:image/svg+xml;charset=utf8,"+encodeURIComponent(o)}else{var s=void 0,u=y.getContext("2d"),h=void 0;if(l){var f="undefined"!=typeof window?window.devicePixelRatio:1;s=u.getImageData(0,0,d*f,c*f),h=u.globalCompositeOperation,u.globalCompositeOperation="destination-over",u.fillStyle=l,u.fillRect(0,0,d,c)}b=y.toDataURL(e),l&&(u.clearRect(0,0,d,c),u.putImageData(s,0,0),u.globalCompositeOperation=h)}t&&t(b)}),16)},e.prototype.downloadFullImage=function(t,e,n){var r=this,i=this.get("group").getCanvasBBox(),o=i.height,a=i.width,s=this.get("renderer"),l=fw('<id="virtual-image"></div>'),u=document.querySelector(".g6-graph-watermarker"),c=n?n.backgroundColor:void 0,d=n?n.padding:void 0;d?el(d)&&(d=[d,d,d,d]):d=[0,0,0,0];var h=o+d[0]+d[2],f=a+d[1]+d[3];if(u){var p=this.get("graphWaterMarker").cfg||{},g=p.width,v=p.height;h=Math.ceil(h/v)*v,f=Math.ceil(f/g)*g}var m={container:l,height:h,width:f},y="svg"===s?new Cx(m):new Rb(m),b=this.get("group").clone(),x=Pl(b.getMatrix());x||(x=[1,0,0,0,1,0,0,0,1]);var w=(i.maxX+i.minX)/2,C=(i.maxY+i.minY)/2;x=EV(x,[["t",-w,-C],["t",a/2+d[3],o/2+d[0]]]),b.resetMatrix(),b.setMatrix(x),y.add(b);var S=y.get("el");e||(e="image/png"),this.asyncToDataUrl(e,c,(function(n){var i=document.createElement("a"),o=(t||"graph")+("svg"===s?".svg":"."+e.split("/")[1]);r.dataURLToImage(n,s,i,o);var a=document.createEvent("MouseEvents");a.initEvent("click",!1,!1),i.dispatchEvent(a)}),f,h,S)},e.prototype.downloadImage=function(t,e,n){var r=this,i=this;i.isAnimating()&&i.stopAnimate();var o=i.get("canvas").getRenderer();e||(e="image/png");var a=(t||"graph")+("svg"===o?".svg":e.split("/")[1]),s=document.createElement("a");i.asyncToDataUrl(e,n,(function(t){r.dataURLToImage(t,o,s,a);var e=document.createEvent("MouseEvents");e.initEvent("click",!1,!1),s.dispatchEvent(e)}))},e.prototype.dataURLToImage=function(t,e,n,r){if("undefined"!=typeof window)if(window.Blob&&window.URL&&"svg"!==e){var i=t.split(","),o="";if(i&&i.length>0){var a=i[0].match(/:(.*?);/);a&&a.length>=2&&(o=a[1])}for(var s=atob(i[1]),l=s.length,u=new Uint8Array(l);l--;)u[l]=s.charCodeAt(l);var c=new Blob([u],{type:o});window.navigator.msSaveBlob?window.navigator.msSaveBlob(c,r):n.addEventListener("click",(function(){n.download=r,n.href=window.URL.createObjectURL(c)}))}else n.addEventListener("click",(function(){n.download=r,n.href=t}))},e.prototype.addPlugin=function(t){t.destroyed||(this.get("plugins").push(t),t.initPlugin(this))},e.prototype.removePlugin=function(t){var e=this.get("plugins"),n=e.indexOf(t);n>=0&&(t.destroyPlugin(),e.splice(n,1))},e.prototype.setImageWaterMarker=function(t,e){void 0===t&&(t=dw.waterMarkerImage);var n=this.get("container");zs(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var r=this.get("graphWaterMarker"),i=Rl({},dw.imageWaterMarkerConfig,e),o=i.width,a=i.height,s=i.compatible,l=i.image;if(!r){var u={container:n,width:o,height:a,capture:!1},c=this.get("pixelRatio");c&&(u.pixelRatio=c),r=new Rb(u),this.set("graphWaterMarker",r)}r.get("el").style.display="none";var d=r.get("context"),h=l.rotate,f=l.x,p=l.y;d.rotate(-h*Math.PI/180);var g=new Image;g.crossOrigin="anonymous",g.src=t,g.onload=function(){if(d.drawImage(g,f,p,l.width,l.height),d.rotate(h*Math.PI/180),s)n.style.cssText="background-image: url("+r.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var t=document.querySelector(".g6-graph-watermarker");t||((t=document.createElement("div")).className="g6-graph-watermarker"),t.className="g6-graph-watermarker",r.destroyed||(t.style.cssText="background-image: url("+r.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;",n.appendChild(t))}}},e.prototype.setTextWaterMarker=function(t,e){var n=this.get("container");zs(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var r=this.get("graphWaterMarker"),i=Rl({},dw.textWaterMarkerConfig,e),o=i.width,a=i.height,s=i.compatible,l=i.text;if(!r){var u={container:n,width:o,height:a,capture:!1},c=this.get("pixelRatio");c&&(u.pixelRatio=c),r=new Rb(u),this.set("graphWaterMarker",r)}r.get("el").style.display="none";var d=r.get("context"),h=l.rotate,f=l.fill,p=l.fontFamily,g=l.fontSize,v=l.baseline,m=l.x,y=l.y,b=l.lineHeight;d.rotate(-h*Math.PI/180),d.font=g+"px "+p,d.fillStyle=f,d.textBaseline=v;for(var x=t.length-1;x>=0;x--)d.fillText(t[x],m,y+x*b);if(d.rotate(h*Math.PI/180),s)n.style.cssText="background-image: url("+r.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var w=document.querySelector(".g6-graph-watermarker");w||((w=document.createElement("div")).className="g6-graph-watermarker"),w.style.cssText="background-image: url("+r.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;",n.appendChild(w)}},e.prototype.destroy=function(){var e,n,r,i;bs(this.get("plugins"),(function(t){t.destroyPlugin()}));var o=this.get("tooltips");if(o)for(var a=0;a<o.length;a++){var s=o[a];if(s){var l=s.parentElement;l&&l.removeChild(s)}}null===(e=this.get("eventController"))||void 0===e||e.destroy(),null===(n=this.get("layoutController"))||void 0===n||n.destroy(),null===(r=this.get("graphWaterMarker"))||void 0===r||r.destroy(),null===(i=document.querySelector(".g6-graph-watermarker"))||void 0===i||i.remove(),t.prototype.destroy.call(this)},e}(wm),AV=iV.radialLayout,_V=iV.traverseTree,TV=function(t){function e(e){var n=t.call(this,e)||this;return n.layoutAnimating=!1,n.set("removeList",[]),n.set("layoutMethod",n.getLayout()),n}return Ka(e,t),e.prototype.getLayout=function(){var t=this.get("layout");return t?"function"==typeof t?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction="TB"),t.radial?function(e){var n=J$[t.type](e,t);return AV(n),n}:function(e){return J$[t.type](e,t)}):null},e.indexOfChild=function(t,e){var n=-1;return bs(t,(function(t,r){if(e===t.id)return n=r,!1})),n},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.animate=!0,e},e.prototype.innerAddChild=function(t,e,n){var r=this,i=t.data;i&&(i.x=t.x,i.y=t.y,i.depth=t.depth);var o=r.addItem("node",i,!1);if(e){if(o.set("parent",e),n){var a=e.get("originAttrs");if(a)o.set("originAttrs",a);else{var s=e.getModel();o.set("originAttrs",{x:s.x,y:s.y})}}var l=e.get("children");l?l.push(o):e.set("children",[o]),r.addItem("edge",{source:e.get("id"),target:o.get("id"),id:e.get("id")+":"+o.get("id")},!1)}return bs(t.children||[],(function(t){r.innerAddChild(t,o,n)})),r.emit("afteraddchild",{item:o,parent:e}),o},e.prototype.innerUpdateChild=function(t,n,r){var i=this,o=i.findById(t.id);if(o){bs(t.children||[],(function(t){i.innerUpdateChild(t,o,r)}));var a,s,l=o.get("children");if(l)if(l.length>0)for(var u=l.length-1;u>=0;u--){var c=l[u].getModel();-1===e.indexOfChild(t.children||[],c.id)&&(i.innerRemoveChild(c.id,{x:t.x,y:t.y},r),l.splice(u,1))}o.get("originAttrs")&&(a=o.get("originAttrs").x,s=o.get("originAttrs").y);var d=o.getModel();r&&o.set("originAttrs",{x:d.x,y:d.y}),o.set("model",t.data),a===t.x&&s===t.y||o.updatePosition({x:t.x,y:t.y})}else i.innerAddChild(t,n,r)},e.prototype.innerRemoveChild=function(t,e,n){var r=this,i=r.findById(t);if(i)if(bs(i.get("children"),(function(t){r.innerRemoveChild(t.getModel().id,e,n)})),n){var o=i.getModel();i.set("to",e),i.set("originAttrs",{x:o.x,y:o.y}),r.get("removeList").push(i)}else r.removeItem(i,!1)},e.prototype.changeData=function(t){var e=this;this.getNodes().map((function(t){return e.clearItemStates(t)})),this.getEdges().map((function(t){return e.clearItemStates(t)})),t?(e.data(t),e.render()):e.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");this.updateLayout(t)},e.prototype.updateLayout=function(t){var e=this;t?(e.set("layout",t),e.set("layoutMethod",e.getLayout()),e.layout()):console.warn("layout cannot be null")},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");this.layout(t)},e.prototype.layout=function(t){var e=this,n=e.get("data"),r=e.get("layoutMethod"),i=r?r(n,e.get("layout")):n,o=e.get("animate");(e.emit("beforerefreshlayout",{data:n,layoutData:i}),e.emit("beforelayout"),e.innerUpdateChild(i,void 0,o),t)&&e.get("viewController").fitView();o?e.layoutAnimate(i):(e.refresh(),e.paint()),e.emit("afterrefreshlayout",{data:n,layoutData:i}),e.emit("afterlayout")},e.prototype.addChild=function(t,e){var n=this;n.emit("beforeaddchild",{model:t,parent:e}),zs(e)||(e=e.get("id"));var r=n.findDataById(e);r&&(r.children||(r.children=[]),r.children.push(t),n.changeData())},e.prototype.updateChildren=function(t,e){var n=this;e&&n.findById(e)?(n.findDataById(e).children=t,n.changeData()):console.warn("Update children failed! There is no node with id '"+e+"'")},e.prototype.updateChild=function(t,n){var r=this;if(n&&r.findById(n)){var i=r.findDataById(n),o=r.findById(t.id);if(i.children||(i.children=[]),o){var a=e.indexOfChild(i.children,t.id);i.children[a]=t}else i.children.push(t);r.changeData()}else r.changeData(t)},e.prototype.removeChild=function(t){var n=this,r=n.findById(t);if(r){var i=r.get("parent");if(i&&!i.destroyed){var o=n.findDataById(i.get("id")),a=o&&o.children||[],s=r.getModel(),l=e.indexOfChild(a,s.id);a.splice(l,1)}n.changeData()}},e.prototype.findDataById=function(t,e){var n=this;if(e||(e=n.get("data")),t===e.id)return e;var r=null;return bs(e.children||[],(function(e){return e.id===t?(r=e,!1):!(r=n.findDataById(t,e))&&void 0})),r},e.prototype.layoutAnimate=function(t,e){var n=this,r=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach((function(t){var e=t.get("model");e.sourceAnchor||(e.sourceAnchor=t.get("sourceAnchorIndex"))})),this.get("canvas").animate((function(r){_V(t,(function(i){var o=n.findById(i.id);if(o){var a=o.get("originAttrs"),s=o.get("model");if(a||(a={x:s.x,y:s.y},o.set("originAttrs",a)),e){var l=e(o,r,a,t);o.set("model",Object.assign(s,l))}else s.x=a.x+(i.x-a.x)*r,s.y=a.y+(i.y-a.y)*r}return!0})),bs(n.get("removeList"),(function(t){var e=t.getModel(),n=t.get("originAttrs"),i=t.get("to");e.x=n.x+(i.x-n.x)*r,e.y=n.y+(i.y-n.y)*r})),n.refreshPositions()}),{duration:r.duration,easing:r.ease,callback:function(){bs(n.getNodes(),(function(t){t.set("originAttrs",null)})),bs(n.get("removeList"),(function(t){n.removeItem(t)})),n.set("removeList",[]),r.callback&&r.callback(),n.emit("afteranimate",{data:t})},delay:r.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(){var t=this,e=t.get("data");if(!e||!ys(e)||!Object.keys(e).length)throw new Error("data must be defined first");t.clear(),t.emit("beforerender"),t.layout(this.get("fitView")),t.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e}(MV),PV=function(){function t(t){this._cfgs=Rl(this.getDefaultCfgs(),t),this._events={},this.destroyed=!1}return t.prototype.getDefaultCfgs=function(){return{}},t.prototype.initPlugin=function(t){var e=this;e.set("graph",t);var n=e.getEvents(),r={};bs(n,(function(n,i){var o=Zs(e,n);r[i]=o,t.on(i,o)})),this._events=r,this.init()},t.prototype.getEvents=function(){return{}},t.prototype.get=function(t){var e;return null===(e=this._cfgs)||void 0===e?void 0:e[t]},t.prototype.set=function(t,e){this._cfgs[t]=e},t.prototype.destroy=function(){},t.prototype.destroyPlugin=function(){this.destroy();var t=this.get("graph");bs(this._events,(function(e,n){t.off(n,e)})),this._events=null,this._cfgs=null,this.destroyed=!0},t}(),IV=(kV=function(t,e){return(kV=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}kV(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),DV="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",OV=function(t){function e(e){return t.call(this,e)||this}return IV(e,t),e.prototype.getDefaultCfgs=function(){return{img:DV,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),e=t.get("container"),n=t.get("canvas").get("el"),r=this.get("img")||DV,i=fw("<div class='g6-grid-container' style=\"position:absolute;overflow:hidden;z-index: -1;\"></div>"),o=fw("<div\n        class='g6-grid'\n        style='position:absolute;\n        background-image: "+r+";\n        user-select: none\n        '></div>");this.set("container",i),this.set("gridContainer",o),this.positionInit(),i.appendChild(o),e.insertBefore(i,n)},e.prototype.positionInit=function(){var t=this.get("graph"),e=t.get("minZoom"),n=t.get("width"),r=t.get("height");mw(this.get("container"),{width:n+"px",height:r+"px"});var i=80*n/e,o=80*r/e;mw(this.get("gridContainer"),{width:i+"px",height:o+"px",left:"-"+i/2+"px",top:"-"+o/2+"px"})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var e=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var r=this.get("follow");mw(e,{transform:"matrix("+n[0]+", "+n[1]+", "+n[3]+", "+n[4]+", "+(r?n[6]:"0")+", "+(r?n[7]:"0")+")"})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph").get("container"),e=this.get("container");t.removeChild(e)},e}(PV),RV=[],LV=[];function BV(t,e){if(e=e||{},void 0===t)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var n,r=!0===e.prepend?"prepend":"append",i=void 0!==e.container?e.container:document.querySelector("head"),o=RV.indexOf(i);return-1===o&&(o=RV.push(i)-1,LV[o]={}),void 0!==LV[o]&&void 0!==LV[o][r]?n=LV[o][r]:(n=LV[o][r]=function(){var t=document.createElement("style");return t.setAttribute("type","text/css"),t}(),"prepend"===r?i.insertBefore(n,i.childNodes[0]):i.appendChild(n)),65279===t.charCodeAt(0)&&(t=t.substr(1,t.length)),n.styleSheet?n.styleSheet.cssText+=t:n.textContent+=t,n}var FV=BV,NV=BV;FV.insertCss=NV;var zV=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();"undefined"!=typeof document&&FV("\n  .g6-component-contextmenu {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .g6-contextmenu-ul {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n  }\n\n");var jV=function(t){function e(e){return t.call(this,e)||this}return zV(e,t),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(t){return"\n          <ul class='g6-contextmenu-ul'>\n            <li>菜单项1</li>\n            <li>菜单项2</li>\n          </ul>\n        "},shouldBegin:function(t){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return"click"===this.get("trigger")?{click:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=fw("<div class="+(this.get("className")||"g6-component-contextmenu")+"></div>");mw(t,{top:"0px",position:"absolute",visibility:"hidden"});var e=this.get("container");e||(e=this.get("graph").get("container")),zs(e)&&(e=document.getElementById(e)),e.appendChild(t),this.set("menu",t)},e.prototype.onMenuShow=function(t){var e=this;t.preventDefault(),t.stopPropagation();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&-1===n.indexOf(t.item.getType()))return void e.onMenuHide()}else if(-1===n.indexOf("canvas"))return void e.onMenuHide();if(this.get("shouldBegin")(t)){var r=this.get("menu"),i=this.get("getContent"),o=this.get("graph"),a=i(t,o);zs(a)?r.innerHTML=a:r.innerHTML=a.outerHTML,this.removeMenuEventListener();var s=this.get("handleMenuClick");if(s){var l=function(e){s(e.target,t.item,o)};this.set("handleMenuClickWrapper",l),r.addEventListener("click",l)}var u=o.get("width"),c=o.get("height"),d=r.getBoundingClientRect(),h=this.get("offsetX")||0,f=this.get("offsetY")||0,p=o.getContainer().offsetTop,g=o.getContainer().offsetLeft,v=t.canvasX+g+h,m=t.canvasY+p+f;v+d.width>u&&(v=t.canvasX-d.width-h+g),m+d.height>c&&(m=t.canvasY-d.height-f+p),mw(r,{top:m+"px",left:v+"px",visibility:"visible"});var y="click"===this.get("trigger"),b=function(t){y?y=!1:e.onMenuHide()};document.body.addEventListener("click",b),this.set("handler",b)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),e=this.get("handler");t&&(this.get("menu").removeEventListener("click",t),this.set("handleMenuClickWrapper",null));e&&document.body.removeEventListener("click",e)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&mw(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var e=this.get("container");e||(e=this.get("graph").get("container")),zs(e)&&(e=document.getElementById(e)),e.removeChild(t)}},e}(PV);function GV(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return cu(r,n),lu(t,r,e)}function UV(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return du(r,n),lu(t,r,e)}function $V(t,e,n){return lu(t,n,e)}function VV(t,e){for(var n,r,i,o,a=t?[].concat(t):[1,0,0,0,1,0,0,0,1],s=0,l=e.length;s<l;s++){var u=e[s];switch(u[0]){case"t":n=a,r=a,i=[u[1],u[2]],o=void 0,uu(o=[0,0,0,0,0,0,0,0,0],i),lu(n,o,r);break;case"s":UV(a,a,[u[1],u[2]]);break;case"r":GV(a,a,u[1]);break;case"m":$V(a,a,u[1])}}return a}var WV=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),HV=function(){return(HV=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},YV=Math.max,XV=VV,qV=function(t){function e(e){var n=t.call(this,e)||this;return n.handleUpdateCanvas=Il((function(t){var e=n;e.destroyed||e.updateCanvas()}),100,!1),n}return WV(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,e=this._cfgs,n=e.size,r=e.graph;if(!this.destroyed){var i=this.get("canvas").get("container"),o=fw("\n      <div\n        class="+e.viewportClassName+"\n        style='position:absolute;\n          left:0;\n          top:0;\n          box-sizing:border-box;\n          outline: 2px solid #1980ff'\n        draggable=true>\n      </div>"),a=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,s=0,l=0,u=!1,c=0,d=0,h=0,f=0,p=0,g=0;o.addEventListener("dragstart",(function(i){var a,v;if(i.dataTransfer){var m=new Image;m.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",null===(v=(a=i.dataTransfer).setDragImage)||void 0===v||v.call(a,m,0,0);try{i.dataTransfer.setData("text/html","view-port-minimap")}catch(b){i.dataTransfer.setData("text","view-port-minimap")}}if(e.refresh=!1,i.target===o){var y=o.style;c=parseInt(y.left,10),d=parseInt(y.top,10),h=parseInt(y.width,10),f=parseInt(y.height,10),h>n[0]||f>n[1]||(g=r.getZoom(),p=t.get("ratio"),u=!0,s=i.clientX,l=i.clientY)}}),!1),o.addEventListener(a?"dragover":"drag",(function(t){if(u&&!vs(t.clientX)&&!vs(t.clientY)){var e=s-t.clientX,i=l-t.clientY;(c-e<0||c-e+h>=n[0])&&(e=0),(d-i<0||d-i+f>=n[1])&&(i=0),mw(o,{left:(c-=e)+"px",top:(d-=i)+"px"}),r.translate(e*g/p,i*g/p),s=t.clientX,l=t.clientY}}),!1),o.addEventListener("dragend",(function(){u=!1,e.refresh=!0}),!1),this.set("viewport",o),i.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio");this.get("dx"),this.get("dy");var e=this.get("totaldx"),n=this.get("totaldy"),r=this.get("graph"),i=this.get("size"),o=r.get("width"),a=r.get("height"),s=r.getPointByCanvas(0,0),l=r.getPointByCanvas(o,a),u=this.get("viewport");u||this.initViewport();var c=(l.x-s.x)*t,d=(l.y-s.y)*t,h=s.x*t+e,f=s.y*t+n,p=h+c,g=f+d;h<0&&(c+=h,h=0),p>i[0]&&(c-=p-i[0]),f<0&&(d+=f,f=0),g>i[1]&&(d-=g-i[1]),this.set("ratio",t),mw(u,{left:h+"px",top:f+"px",width:c+"px",height:d+"px"})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,e=this.get("canvas"),n=t.get("group");if(!n.destroyed){var r=n.clone();r.resetMatrix(),e.clear(),e.add(r),"svg"===t.get("renderer")&&this.updateVisible(r)}},e.prototype.updateVisible=function(t){var e=this;if(t.isGroup()||t.get("visible")){var n=t.get("children");if(!n||!n.length)return;n.forEach((function(t){t.get("visible")||t.hide(),e.updateVisible(t)}))}else t.hide()},e.prototype.updateKeyShapes=function(){var t=this,e=this._cfgs.graph,n=this.get("canvas"),r=n.get("children")[0]||n.addGroup();bs(e.getEdges(),(function(e){t.updateOneEdgeKeyShape(e,r)})),bs(e.getNodes(),(function(e){t.updateOneNodeKeyShape(e,r)}));var i=e.getCombos();if(i&&i.length){var o=r.find((function(t){return"comboGroup"===t.get("name")}))||r.addGroup({name:"comboGroup"});setTimeout((function(){t.destroyed||(bs(i,(function(e){t.updateOneComboKeyShape(e,o)})),null==o||o.sort(),null==o||o.toBack(),t.updateCanvas())}),250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,e){if(!this.destroyed){var n=this.get("itemMap")||{},r=n[t.get("id")],i=t.getBBox(),o=t.get("keyShape").clone(),a=o.attr(),s={x:i.centerX,y:i.centerY};r?s=Object.assign(a,s):(r=o,e.add(r));var l=r.get("type");"rect"!==l&&"image"!==l||(s.x=i.minX,s.y=i.minY),r.attr(s),t.isVisible()?r.show():r.hide(),r.exist=!0;var u=t.getModel().depth;isNaN(u)||r.set("zIndex",u),n[t.get("id")]=r,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,e){var n=this.get("itemMap")||{},r=n[t.get("id")],i=t.getBBox(),o=t.get("keyShape").clone(),a=o.attr(),s={x:i.centerX,y:i.centerY};r?s=Object.assign(a,s):(r=o,e.add(r));var l=r.get("type");"rect"!==l&&"image"!==l||(s.x=i.minX,s.y=i.minY),r.attr(s),t.isVisible()?r.show():r.hide(),r.exist=!0;var u=t.getModel().depth;isNaN(u)||r.set("zIndex",u),n[t.get("id")]=r,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,e=this._cfgs.graph,n=this.get("canvas"),r=n.get("children")[0]||n.addGroup();bs(e.getEdges(),(function(e){t.updateOneEdgeKeyShape(e,r)})),bs(e.getNodes(),(function(e){t.updateOneNodeDelegateShape(e,r)}));var i=e.getCombos();if(i&&i.length){var o=r.find((function(t){return"comboGroup"===t.get("name")}))||r.addGroup({name:"comboGroup"});setTimeout((function(){t.destroyed||(bs(i,(function(e){t.updateOneComboKeyShape(e,o)})),null==o||o.sort(),null==o||o.toBack(),t.updateCanvas())}),250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},e=Object.keys(t);if(e&&0!==e.length)for(var n=e.length-1;n>=0;n--){var r=t[e[n]],i=r.exist;r.exist=!1,i||(r.remove(),delete t[e[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,e){var n=this.get("itemMap")||{},r=n[t.get("id")];if(r){var i=t.get("keyShape").attr("path");r.attr("path",i)}else r=t.get("keyShape").clone(),e.add(r);t.isVisible()?r.show():r.hide(),r.exist=!0,n[t.get("id")]=r,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,e){var n=this.get("delegateStyle"),r=this.get("itemMap")||{},i=r[t.get("id")],o=t.getBBox();if(i){var a={x:o.minX,y:o.minY,width:o.width,height:o.height};i.attr(a)}else i=e.addShape("rect",{attrs:HV({x:o.minX,y:o.minY,width:o.width,height:o.height},n),name:"minimap-node-shape"});t.isVisible()?i.show():i.hide(),i.exist=!0,r[t.get("id")]=i,this.set("itemMap",r)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,e=t.get("graph"),n=t.get("size"),r=t.get("className"),i=t.get("container"),o=fw("<div class='"+r+"' style='width: "+n[0]+"px; height: "+n[1]+"px; overflow: hidden'></div>");zs(i)&&(i=document.getElementById(i)),i?i.appendChild(o):e.get("container").appendChild(o),t.set("container",o);var a,s=fw('<div class="g6-minimap-container" style="position: relative;"></div>');o.appendChild(s),s.addEventListener("dragenter",(function(t){t.preventDefault()})),s.addEventListener("dragover",(function(t){t.preventDefault()})),a="svg"===e.get("renderer")?new Cx({container:s,width:n[0],height:n[1]}):new Rb({container:s,width:n[0],height:n[1]}),t.set("canvas",a),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed&&this.get("refresh")){var t=this.get("graph");if(!t.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var e=this.get("size"),n=this.get("canvas"),r=this.get("type"),i=this.get("padding");if(!n.destroyed){switch(r){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var o=n.get("children")[0];if(o){o.resetMatrix();var a=o.getCanvasBBox(),s=t.get("canvas").getCanvasBBox(),l=t.getZoom()||1,u=s.width/l,c=s.height/l;Number.isFinite(a.width)&&(u=YV(a.width,u),c=YV(a.height,c)),u+=2*i,c+=2*i;var d=Math.min(e[0]/u,e[1]/c),h=[1,0,0,0,1,0,0,0,1],f=0,p=0;Number.isFinite(a.minX)&&(f=-a.minX),Number.isFinite(a.minY)&&(p=-a.minY);var g=(e[0]-(u-2*i)*d)/2,v=(e[1]-(c-2*i)*d)/2;h=XV(h,[["t",f,p],["s",d,d],["t",g,v]]),o.setMatrix(h),this.set("ratio",d),this.set("totaldx",g+f*d),this.set("totaldy",v+p*d),this.set("dx",g),this.set("dy",v),this.updateViewport()}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){this.get("canvas").destroy();var t=this.get("container");t.parentNode.removeChild(t)},e}(PV),KV=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function ZV(t,e,n){var r=t.x-e.x,i=t.y-e.y;return!n||Math.abs(r)>n||Math.abs(i)>n?Math.sqrt(r*r+i*i):n}function QV(t,e){var n=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(n*n*e.source.x+n*(t.y-e.source.y)+t.x)/(n*n+1);return{x:r,y:n*(r-e.source.x)+e.source.y}}var JV=function(t){function e(e){return t.call(this,e)||this}return KV(e,t),e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),e=this.get("onTick");this.set("tick",(function(){e&&e(),t.refreshPositions()}))},e.prototype.bundling=function(t){var e=this;if(e.set("data",t),!e.isTicking()){var n=t.edges||[],r=t.nodes||[],i={},o=!1;if(r.forEach((function(t){null!==t.x&&null!==!t.y&&void 0!==t.x&&void 0!==!t.y||(o=!0),i[t.id]=t})),o)throw new Error("please layout the graph or assign x and y for nodes first");e.set("nodeIdMap",i);var a=e.get("divisions"),s=e.get("divRate"),l=e.divideEdges(a);e.set("edgePoints",l);var u=e.getEdgeBundles();e.set("edgeBundles",u);for(var c=e.get("cycles"),d=e.get("iterations"),h=e.get("iterRate"),f=e.get("lambda"),p=0;p<c;p++){for(var g=function(t){var r=[];n.forEach((function(t,n){if(t.source!==t.target){var o=i[t.source],s=i[t.target];r[n]=e.getEdgeForces({source:o,target:s},n,a,f);for(var u=0;u<a+1;u++)l[n][u].x+=r[n][u].x,l[n][u].y+=r[n][u].y}}))},v=0;v<d;v++)g();f/=2,a*=s,d*=h,l=e.divideEdges(a),e.set("edgePoints",l)}n.forEach((function(t,e){t.source!==t.target&&(t.type="polyline",t.controlPoints=l[e].slice(1,l[e].length-1))})),e.get("graph").refresh()}},e.prototype.updateBundling=function(t){var e=this,n=t.data;if(n&&e.set("data",n),e.get("ticking")&&e.set("ticking",!1),Object.keys(t).forEach((function(n){e.set(n,t[n])})),t.onTick){var r=this.get("graph");e.set("tick",(function(){t.onTick(),r.refresh()}))}e.bundling(n)},e.prototype.divideEdges=function(t){var e=this,n=e.get("data").edges,r=e.get("nodeIdMap"),i=e.get("edgePoints");return i&&void 0!==i||(i=[]),n.forEach((function(n,o){i[o]&&void 0!==i[o]||(i[o]=[]);var a=r[n.source],s=r[n.target];if(1===t)i[o].push({x:a.x,y:a.y}),i[o].push({x:.5*(a.x+s.x),y:.5*(a.y+s.y)}),i[o].push({x:s.x,y:s.y});else{var l=(i[o]&&i[o]!==[]?e.getEdgeLength(i[o]):ZV({x:a.x,y:a.y},{x:s.x,y:s.y}))/(t+1),u=l,c=[{x:a.x,y:a.y}];i[o].forEach((function(t,e){if(0!==e){for(var n=ZV(t,i[o][e-1]);n>u;){var r=u/n,a={x:i[o][e-1].x,y:i[o][e-1].y};a.x+=r*(t.x-i[o][e-1].x),a.y+=r*(t.y-i[o][e-1].y),c.push(a),n-=u,u=l}u-=n}})),c.push({x:s.x,y:s.y}),i[o]=c}})),i},e.prototype.getEdgeLength=function(t){var e=0;return t.forEach((function(n,r){0!==r&&(e+=ZV(n,t[r-1]))})),e},e.prototype.getEdgeBundles=function(){var t=this,e=t.get("data").edges||[],n=t.get("bundleThreshold"),r=t.get("nodeIdMap"),i=t.get("edgeBundles");return i||(i=[]),e.forEach((function(t,e){i[e]&&void 0!==i[e]||(i[e]=[])})),e.forEach((function(o,a){var s=r[o.source],l=r[o.target];e.forEach((function(e,o){if(!(o<=a)){var u=r[e.source],c=r[e.target];t.getBundleScore({source:s,target:l},{source:u,target:c})>=n&&(i[a].push(o),i[o].push(a))}}))})),i},e.prototype.getBundleScore=function(t,e){var n=this;return t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,t.length=ZV({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),e.length=ZV({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y}),n.getAngleScore(t,e)*n.getScaleScore(t,e)*n.getPositionScore(t,e)*n.getVisibilityScore(t,e)},e.prototype.getAngleScore=function(t,e){return function(t,e){return t.x*e.x+t.y*e.y}({x:t.vx,y:t.vy},{x:e.vx,y:e.vy})/(t.length*e.length)},e.prototype.getScaleScore=function(t,e){var n=(t.length+e.length)/2;return 2/(n/Math.min(t.length,e.length)+Math.max(t.length,e.length)/n)},e.prototype.getPositionScore=function(t,e){var n=(t.length+e.length)/2;return n/(n+ZV({x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},{x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2}))},e.prototype.getVisibilityScore=function(t,e){var n=this.getEdgeVisibility(t,e),r=this.getEdgeVisibility(e,t);return n<r?n:r},e.prototype.getEdgeVisibility=function(t,e){var n=QV(e.source,t),r=QV(e.target,t),i={x:(n.x+r.x)/2,y:(n.y+r.y)/2},o={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*ZV(i,o)/ZV(n,r))},e.prototype.getEdgeForces=function(t,e,n,r){for(var i=this,o=i.get("edgePoints"),a=i.get("K")/(ZV(t.source,t.target)*(n+1)),s=[{x:0,y:0}],l=1;l<n;l++){var u={x:0,y:0},c=i.getSpringForce({pre:o[e][l-1],cur:o[e][l],next:o[e][l+1]},a),d=i.getElectrostaticForce(l,e);u.x=r*(c.x+d.x),u.y=r*(c.y+d.y),s.push(u)}return s.push({x:0,y:0}),s},e.prototype.getSpringForce=function(t,e){var n=t.pre.x+t.next.x-2*t.cur.x,r=t.pre.y+t.next.y-2*t.cur.y;return{x:n*=e,y:r*=e}},e.prototype.getElectrostaticForce=function(t,e){var n=this,r=n.get("eps"),i=n.get("edgeBundles"),o=n.get("edgePoints"),a=i[e],s={x:0,y:0};return a.forEach((function(n){var i={x:o[n][t].x-o[e][t].x,y:o[n][t].y-o[e][t].y};if(Math.abs(i.x)>r||Math.abs(i.y)>r){var a=1/ZV(o[n][t],o[e][t]);s.x+=i.x*a,s.y+=i.y*a}})),s},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),t.prototype.destroy.call(this)},e}(PV),tW=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),eW=function(){return(eW=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},nW={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},rW=function(t){function e(e){return t.call(this,e)||this}return tW(e,t),e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:Pl(nW),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"}}return t},e.prototype.init=function(){var t=this,e=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",e*e);var n=t.get("d");t.set("molecularParam",(n+1)*e)},e.prototype.createDelegate=function(t){var e=this,n=this,r=n.get("delegate");r&&!r.destroyed||(n.magnify(t),(r=n.get("delegate")).on("dragstart",(function(t){n.set("delegateCenterDiff",{x:r.attr("x")-t.x,y:r.attr("y")-t.y})})),r.on("drag",(function(t){n.magnify(t)})),"wheel"===this.get("scaleDBy")&&r.on("mousewheel",(function(t){e.scaleDByWheel(t)})),"wheel"===this.get("scaleRBy")&&r.on("mousewheel",(function(t){n.scaleRByWheel(t)})))},e.prototype.scaleRByWheel=function(t){var e=this;if(t&&t.originalEvent){t.preventDefault&&t.preventDefault();var n,r=e.get("graph"),i=e.get("delegate"),o=(i?{x:i.attr("x"),y:i.attr("y")}:void 0)||r.getPointByClient(t.clientX,t.clientY);n=t.originalEvent.wheelDelta<0?.95:1/.95;var a=e.get("maxR"),s=e.get("minR"),l=e.get("r");(l>(a||r.get("height"))&&n>1||l<(s||.05*r.get("height"))&&n<1)&&(n=1),l*=n,e.set("r",l),e.set("r2",l*l);var u=e.get("d");e.set("molecularParam",(u+1)*l),e.set("delegateCenterDiff",void 0),e.magnify(t,o)}},e.prototype.scaleRByDrag=function(t){var e=this;if(t){var n,r=e.get("dragPrePos"),i=e.get("graph"),o=i.getPointByClient(t.clientX,t.clientY);n=t.x-r.x<0?.95:1/.95;var a=e.get("maxR"),s=e.get("minR"),l=e.get("r");(l>(a||i.get("height"))&&n>1||l<(s||.05*i.get("height"))&&n<1)&&(n=1),l*=n,e.set("r",l),e.set("r2",l*l);var u=e.get("d");e.set("molecularParam",(u+1)*l),e.magnify(t,o),e.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var e=this;if(t||t.originalEvent){t.preventDefault&&t.preventDefault();var n=0;n=t.originalEvent.wheelDelta<0?-.1:.1;var r=e.get("d")+n,i=e.get("maxD"),o=e.get("minD");if(r<i&&r>o){e.set("d",r);var a=e.get("r");e.set("molecularParam",(r+1)*a);var s=e.get("delegate"),l=s?{x:s.attr("x"),y:s.attr("y")}:void 0;e.set("delegateCenterDiff",void 0),e.magnify(t,l)}}},e.prototype.scaleDByDrag=function(t){var e=this,n=e.get("dragPrePos"),r=t.x-n.x>0?.1:-.1,i=e.get("d")+r,o=e.get("maxD"),a=e.get("minD");if(i<o&&i>a){e.set("d",i);var s=e.get("r");e.set("molecularParam",(i+1)*s),e.magnify(t)}e.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,e){var n=this;n.restoreCache();var r=n.get("graph"),i=n.get("cachedMagnifiedModels"),o=n.get("cachedOriginPositions"),a=n.get("showLabel"),s=n.get("r"),l=n.get("r2"),u=n.get("d"),c=n.get("molecularParam"),d=r.getNodes(),h=d.length,f=e?{x:e.x,y:e.y}:{x:t.x,y:t.y};!n.get("dragging")||"mousemove"!==n.get("trigger")&&"click"!==n.get("trigger")||(f=n.get("cacheCenter"));var p=n.get("delegateCenterDiff");p&&(f.x+=p.x,f.y+=p.y),n.updateDelegate(f,s);for(var g=0;g<h;g++){var v=d[g].getModel(),m=v.x,y=v.y;if(!isNaN(m)&&!isNaN(y)){var b=(m-f.x)*(m-f.x)+(y-f.y)*(y-f.y);if(!isNaN(b)&&b<l&&0!==b){var x=Math.sqrt(b),w=c*x/(u*x+s),C=(m-f.x)/x,S=(y-f.y)/x;if(v.x=C*w+f.x,v.y=S*w+f.y,o[v.id]||(o[v.id]={x:m,y:y,texts:[]}),i.push(v),a&&2*x<s)for(var k=d[g].getContainer().getChildren(),E=k.length,M=0;M<E;M++){var A=k[M];"text"===A.get("type")&&(o[v.id].texts.push({visible:A.get("visible"),shape:A}),A.set("visible",!0))}}}}r.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,e=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),r=e.length,i=0;i<r;i++){var o=e[i],a=n[o.id];o.x=a.x,o.y=a.y;for(var s=a.texts.length,l=0;l<s;l++){var u=a.texts[l];u.shape.set("visible",u.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var e=this,n=t.r,r=t.d,i=t.trigger,o=t.minD,a=t.maxD,s=t.minR,l=t.maxR,u=t.scaleDBy,c=t.scaleRBy;isNaN(t.r)||(e.set("r",n),e.set("r2",n*n)),isNaN(r)||e.set("d",r),isNaN(a)||e.set("maxD",a),isNaN(o)||e.set("minD",o),isNaN(l)||e.set("maxR",l),isNaN(s)||e.set("minR",s);var d,h=e.get("d"),f=e.get("r");(e.set("molecularParam",(h+1)*f),"mousemove"!==i&&"click"!==i&&"drag"!==i||e.set("trigger",i),"drag"===u||"wheel"===u||"unset"===u)&&(e.set("scaleDBy",u),e.get("delegate").remove(),e.get("delegate").destroy(),(d=e.get("dPercentText"))&&(d.remove(),d.destroy()));"drag"!==c&&"wheel"!==c&&"unset"!==c||(e.set("scaleRBy",c),e.get("delegate").remove(),e.get("delegate").destroy(),(d=e.get("dPercentText"))&&(d.remove(),d.destroy()))},e.prototype.updateDelegate=function(t,e){var n=this,r=this,i=r.get("graph"),o=r.get("delegate");if(!o||o.destroyed){var a=i.get("group"),s=r.get("delegateStyle")||nW;o=a.addShape("circle",{attrs:eW({r:e/1.5,x:t.x,y:t.y},s),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&("wheel"===this.get("scaleRBy")?o.on("mousewheel",(function(t){r.scaleRByWheel(t)})):"drag"===this.get("scaleRBy")&&(o.on("dragstart",(function(t){r.set("dragging",!0),r.set("cacheCenter",{x:t.x,y:t.y}),r.set("dragPrePos",{x:t.x,y:t.y})})),o.on("drag",(function(t){r.scaleRByDrag(t)})),o.on("dragend",(function(t){r.set("dragging",!1)}))),"wheel"===this.get("scaleDBy")?o.on("mousewheel",(function(t){n.scaleDByWheel(t)})):"drag"===this.get("scaleDBy")&&(o.on("dragstart",(function(t){r.set("dragging",!0),r.set("cacheCenter",{x:t.x,y:t.y}),r.set("dragPrePos",{x:t.x,y:t.y})})),o.on("drag",(function(t){n.scaleDByDrag(t)})),o.on("dragend",(function(t){r.set("dragging",!1)}))))}else o.attr({x:t.x,y:t.y,r:e/1.5});if(r.get("showDPercent")){var l=Math.round((r.get("d")-r.get("minD"))/(r.get("maxD")-r.get("minD"))*100),u=r.get("dPercentText"),c=t.y+e/1.5+16;if(!u||u.destroyed)u=i.get("group").addShape("text",{attrs:{text:l+"%",x:t.x,y:c,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),r.set("dPercentText",u);else u.attr({text:l+"%",x:t.x,y:c})}r.set("delegate",o)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var e=this.get("delegate");e&&!e.destroyed&&(e.remove(),e.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(PV),iW=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();"undefined"!=typeof document&&FV("\n  .g6-component-toolbar {\n    position: absolute;\n    list-style-type: none;\n    padding: 6px;\n    left: 0px;\n    top: 0px;\n    background-color: rgba(255, 255, 255, 0.9);\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    margin: 0;\n  }\n  .g6-component-toolbar li {\n    float: left;\n    text-align: center;\n    width: 35px;\n    height: 24px;\n    cursor: pointer;\n\t\tlist-style-type:none;\n    list-style: none;\n    margin-left: 0px;\n  }\n  .g6-component-toolbar li .icon {\n    opacity: 0.7;\n  }\n  .g6-component-toolbar li .icon:hover {\n    opacity: 1;\n  }\n");var oW=function(t){function e(e){return t.call(this,e)||this}return iW(e,t),e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(t){return'\n          <ul class=\'g6-component-toolbar\'>\n            <li code=\'redo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>\n              </svg>\n            </li>\n            <li code=\'undo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>\n              </svg>\n            </li>\n            <li  code=\'zoomOut\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>\n              </svg>\n            </li>\n            <li code=\'zoomIn\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>\n              </svg>\n            </li>\n            <li code=\'realZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>\n              </svg>\n            </li>\n            <li code=\'autoZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>\n              </svg>\n            </li>\n          </ul>\n        '},zoomSensitivity:2}},e.prototype.init=function(){var t=this,e=this.get("graph"),n=this.get("getContent")(e),r=n;zs(n)&&(r=fw(n));var i=this.get("className");r.setAttribute("class",i||"g6-component-toolbar");var o=this.get("container");o||(o=this.get("graph").get("container")),zs(o)&&(o=document.getElementById(o)),o.appendChild(r),this.set("toolBar",r);var a=this.get("handleClick");r.addEventListener("click",(function(n){var r=function(t){if(!t)return[];if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;){if(e.push(n),"HTML"===n.tagName)return e.push(document,window),e;n=n.parentElement}return e}(n).filter((function(t){return"LI"===t.nodeName}));if(0!==r.length){var i=r[0].getAttribute("code");i&&(a?a(i,e):t.handleDefaultOperator(i,e))}}));var s=this.get("position");s&&mw(r,{top:s.y+"px",left:s.x+"px"}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),e=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),r=document.querySelector('.g6-component-toolbar li[code="redo"]'),i=document.querySelector('.g6-component-toolbar li[code="redo"] svg');e&&n&&r&&i&&t.on("stackchange",(function(t){var o=t.undoStack,a=t.redoStack,s=o.length,l=a.length;1===s?(e.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(e.removeAttribute("style"),n.removeAttribute("style")),0===l?(r.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),i.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),e=t.getUndoStack();if(e&&1!==e.length){var n=e.pop();if(n){var r=n.action;t.pushStack(r,Pl(n.data),"redo");var i=n.data.before;if("add"===r&&(i=n.data.after),!i)return;switch(r){case"visible":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=t.findById(e.id);e.visible?t.showItem(n,!1):t.hideItem(n,!1)}))}));break;case"render":case"update":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){t.updateItem(e.id,e,!1)}))}));break;case"changedata":t.changeData(i,!1);break;case"delete":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=e.itemType;delete e.itemType,t.addItem(n,e,!1)}))}));break;case"add":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){t.removeItem(e.id,!1)}))}));break;case"updateComboTree":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){t.updateComboTree(e.id,e.parentId,!1)}))}))}}}},e.prototype.redo=function(){var t=this.get("graph"),e=t.getRedoStack();if(e&&0!==e.length){var n=e.pop();if(n){var r=n.action,i=n.data.after;if(t.pushStack(r,Pl(n.data)),"delete"===r&&(i=n.data.before),!i)return;switch(r){case"visible":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=t.findById(e.id);e.visible?t.showItem(n,!1):t.hideItem(n,!1)}))}));break;case"render":case"update":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){t.updateItem(e.id,e,!1)}))}));break;case"changedata":t.changeData(i,!1);break;case"delete":i.edges&&i.edges.forEach((function(e){t.removeItem(e.id,!1)})),i.nodes&&i.nodes.forEach((function(e){t.removeItem(e.id,!1)})),i.combos&&i.combos.forEach((function(e){t.removeItem(e.id,!1)}));break;case"add":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){var n=e.itemType;delete e.itemType,t.addItem(n,e,!1)}))}));break;case"updateComboTree":Object.keys(i).forEach((function(e){var n=i[e];n&&n.forEach((function(e){t.updateComboTree(e.id,e.parentId,!1)}))}))}}}},e.prototype.handleDefaultOperator=function(t,e){var n=e.getZoom();switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":var r=1/(1-.05*this.get("zoomSensitivity"));if(r*n>(this.get("maxZoom")||e.get("maxZoom")))return;e.zoomTo(n*r);break;case"zoomIn":var i=1-.05*this.get("zoomSensitivity");if(i*n<(this.get("minZoom")||e.get("minZoom")))return;e.zoomTo(n*i);break;case"realZoom":e.zoomTo(1);break;case"autoZoom":e.fitView([20,20])}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),zs(e)&&(e=document.getElementById(e)),e.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(PV),aW=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();"undefined"!=typeof document&&FV("\n  .g6-component-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .tooltip-type {\n    padding: 0;\n    margin: 0;\n  }\n  .tooltip-id {\n    color: #531dab;\n  }\n");var sW=function(t){function e(e){return t.call(this,e)||this}return aW(e,t),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(t){return"\n          <h4 class='tooltip-type'>类型："+t.item.getType()+"</h4>\n          <span class='tooltip-id'>ID："+t.item.getID()+"</span>\n        "},shouldBegin:function(t){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return"click"===this.get("trigger")?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,e=fw("<div class="+(t.get("className")||"g6-component-tooltip")+"></div>"),n=t.get("container");n||(n=t.get("graph").get("container")),zs(n)&&(n=document.getElementById(n)),mw(e,{position:"absolute",visibility:"hidden",display:"none"}),n.appendChild(e),"click"!==t.get("trigger")&&(e.addEventListener("mouseenter",(function(t){mw(e,{visibility:"visible",display:"unset"})})),e.addEventListener("mouseleave",(function(e){t.hideTooltip()}))),t.set("tooltip",e)},e.prototype.onClick=function(t){var e=this.get("itemTypes");if(!t.item||!t.item.getType||-1!==e.indexOf(t.item.getType())){var n=t.item,r=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),r.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),r.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var e=this.get("itemTypes");if(!t.item||!t.item.getType||-1!==e.indexOf(t.item.getType())){var n=t.item,r=this.get("graph");this.currentTarget=n,this.showTooltip(t),r.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var e=this.get("itemTypes");t.item&&t.item.getType&&-1===e.indexOf(t.item.getType())||this.currentTarget&&t.item===this.currentTarget&&this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.showTooltip=function(t){if(t.item){var e=this.get("itemTypes");if(!t.item.getType||-1!==e.indexOf(t.item.getType())){var n=this.get("tooltip"),r=this.get("getContent")(t);zs(r)?n.innerHTML=r:n.innerHTML=r.outerHTML,this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&mw(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var e=this.get("shouldBegin"),n=this.get("tooltip");if(e(t)){var r=this.get("graph"),i=r.get("width"),o=r.get("height"),a=this.get("offsetX")||0,s=this.get("offsetY")||0,l=r.getPointByClient(t.clientX,t.clientY),u=this.get("fixToNode"),c=t.item;if(c.getType&&"node"===c.getType()&&u&&ms(u)&&u.length>=2){var d=c.getBBox();l={x:d.minX+d.width*u[0],y:d.minY+d.height*u[1]}}var h=r.getCanvasByPoint(l.x,l.y),f=h.x,p=h.y,g=r.getContainer(),v={x:f+g.offsetLeft+a,y:p+g.offsetTop+s};mw(n,{visibility:"visible",display:"unset"});var m=n.getBoundingClientRect();f+m.width+a>i&&(v.x-=m.width+a),p+m.height+s>o&&(v.y-=m.height+s),mw(n,{left:v.x+"px",top:v.y+"px"})}else mw(n,{visibility:"hidden",display:"none"})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),zs(e)&&(e=document.getElementById(e)),e.removeChild(t)}},e}(PV),lW={};function uW(t,e){lW[t]=e}var cW=function(){function t(t){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=t,this.initCfg(),this.init()}return t.prototype.translate=function(t){return t},t.prototype.change=function(t){Tl(this.__cfg__,t),this.init()},t.prototype.clone=function(){return this.constructor(this.__cfg__)},t.prototype.getTicks=function(){var t=this;return zl(this.ticks,(function(e,n){return ys(e)?e:{text:t.getText(e,n),tickValue:e,value:t.scale(e)}}))},t.prototype.getText=function(t,e){var n=this.formatter,r=n?n(t,e):t;return vs(r)||!gs(r.toString)?"":r.toString()},t.prototype.getConfig=function(t){return this.__cfg__[t]},t.prototype.init=function(){Tl(this,this.__cfg__),this.setDomain(),Fl(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},t.prototype.initCfg=function(){},t.prototype.setDomain=function(){},t.prototype.calculateTicks=function(){var t=this.tickMethod,e=[];if(zs(t)){var n=lW[t];if(!n)throw new Error("There is no method to to calculate ticks!");e=n(this)}else gs(t)&&(e=t(this));return e},t.prototype.rangeMin=function(){return this.range[0]},t.prototype.rangeMax=function(){return this.range[1]},t.prototype.calcPercent=function(t,e,n){return el(t)?(t-e)/(n-e):NaN},t.prototype.calcValue=function(t,e,n){return e+t*(n-e)},t}(),dW=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="cat",e.isCategory=!0,e}return Ka(e,t),e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var e=this.translateIndexMap.get(t);return void 0===e&&(e=el(t)?t:NaN),e},e.prototype.scale=function(t){var e=this.translate(t),n=this.calcPercent(e,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var e=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),r=Math.round(e*n)+this.min;return r<this.min||r>this.max?NaN:this.values[r]},e.prototype.getText=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=e;return el(e)&&!this.values.includes(e)&&(i=this.values[i]),t.prototype.getText.apply(this,is([i],n))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if(vs(this.getConfig("min"))&&(this.min=0),vs(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(cW),hW=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,fW="[^\\s]+",pW=/\[([^]*?)\]/gm;function gW(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(t[r].substr(0,e));return n}var vW=function(t){return function(e,n){var r=n[t].map((function(t){return t.toLowerCase()})).indexOf(e.toLowerCase());return r>-1?r:null}};function mW(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];for(var a in o)t[a]=o[a]}return t}var yW=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],bW=["January","February","March","April","May","June","July","August","September","October","November","December"],xW=gW(bW,3),wW={dayNamesShort:gW(yW,3),dayNames:yW,monthNamesShort:xW,monthNames:bW,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!=10?1:0)*t%10]}},CW=mW({},wW),SW=function(t){return CW=mW(CW,t)},kW=function(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},EW=function(t,e){for(void 0===e&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},MW={D:function(t){return String(t.getDate())},DD:function(t){return EW(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return EW(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return EW(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return EW(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return EW(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return EW(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return EW(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return EW(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return EW(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return EW(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return EW(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+EW(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+EW(Math.floor(Math.abs(e)/60),2)+":"+EW(Math.abs(e)%60,2)}},AW=function(t){return+t-1},_W=[null,"[1-9]\\d?"],TW=[null,fW],PW=["isPm",fW,function(t,e){var n=t.toLowerCase();return n===e.amPm[0]?0:n===e.amPm[1]?1:null}],IW=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var n=60*+e[1]+parseInt(e[2],10);return"+"===e[0]?n:-n}return 0}],DW={D:["day","[1-9]\\d?"],DD:["day","\\d\\d"],Do:["day","[1-9]\\d?"+fW,function(t){return parseInt(t,10)}],M:["month","[1-9]\\d?",AW],MM:["month","\\d\\d",AW],YY:["year","\\d\\d",function(t){var e=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+t>68?e-1:e)+t)}],h:["hour","[1-9]\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","[1-9]\\d?"],HH:["hour","\\d\\d"],m:["minute","[1-9]\\d?"],mm:["minute","\\d\\d"],s:["second","[1-9]\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(t){return 100*+t}],SS:["millisecond","\\d\\d",function(t){return 10*+t}],SSS:["millisecond","\\d{3}"],d:_W,dd:_W,ddd:TW,dddd:TW,MMM:["month",fW,vW("monthNamesShort")],MMMM:["month",fW,vW("monthNames")],a:PW,A:PW,ZZ:IW,Z:IW},OW={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},RW=function(t){return mW(OW,t)},LW=function(t,e,n){if(void 0===e&&(e=OW.default),void 0===n&&(n={}),"number"==typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");var r=[];e=(e=OW[e]||e).replace(pW,(function(t,e){return r.push(e),"@@@"}));var i=mW(mW({},CW),n);return(e=e.replace(hW,(function(e){return MW[e](t,i)}))).replace(/@@@/g,(function(){return r.shift()}))};function BW(t,e,n){if(void 0===n&&(n={}),"string"!=typeof e)throw new Error("Invalid format in fecha parse");if(e=OW[e]||e,t.length>1e3)return null;var r={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],o=[],a=e.replace(pW,(function(t,e){return o.push(kW(e)),"@@@"})),s={},l={};a=kW(a).replace(hW,(function(t){var e=DW[t],n=e[0],r=e[1],o=e[3];if(s[n])throw new Error("Invalid format. "+n+" specified twice in format");return s[n]=!0,o&&(l[o]=!0),i.push(e),"("+r+")"})),Object.keys(l).forEach((function(t){if(!s[t])throw new Error("Invalid format. "+t+" is required in specified format")})),a=a.replace(/@@@/g,(function(){return o.shift()}));var u=t.match(new RegExp(a,"i"));if(!u)return null;for(var c=mW(mW({},CW),n),d=1;d<u.length;d++){var h=i[d-1],f=h[0],p=h[2],g=p?p(u[d],c):+u[d];if(null==g)return null;r[f]=g}1===r.isPm&&null!=r.hour&&12!=+r.hour?r.hour=+r.hour+12:0===r.isPm&&12==+r.hour&&(r.hour=0);for(var v=new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond),m=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],y=(d=0,m.length);d<y;d++)if(s[m[d][0]]&&r[m[d][0]]!==v[m[d][1]]())return null;return null==r.timezoneOffset?v:new Date(Date.UTC(r.year,r.month,r.day,r.hour,r.minute-r.timezoneOffset,r.second,r.millisecond))}var FW={format:LW,parse:BW,defaultI18n:wW,setGlobalDateI18n:SW,setGlobalDateMasks:RW},NW=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:FW,assign:mW,format:LW,parse:BW,defaultI18n:wW,setGlobalDateI18n:SW,setGlobalDateMasks:RW});function zW(t,e){return(NW.format||FW.format)(t,e)}function jW(t){return zs(t)&&(t=t.indexOf("T")>0?new Date(t).getTime():new Date(t.replace(/-/gi,"/")).getTime()),xl(t)&&(t=t.getTime()),t}var GW=36e5,UW=24*GW,$W=31*UW,VW=[["HH:mm:ss",1e3],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",6e4],["HH:mm",6e5],["HH:mm",18e5],["HH",GW],["HH",6*GW],["HH",12*GW],["YYYY-MM-DD",UW],["YYYY-MM-DD",4*UW],["YYYY-WW",7*UW],["YYYY-MM",$W],["YYYY-MM",4*$W],["YYYY-MM",6*$W],["YYYY",380*UW]];function WW(t,e,n){var r,i=(r=function(t){return t[1]},function(t,e,n,i){for(var o=vs(n)?0:n,a=vs(i)?t.length:i;o<a;){var s=o+a>>>1;r(t[s])>e?a=s:o=s+1}return o})(VW,(e-t)/n)-1,o=VW[i];return i<0?o=VW[0]:i>=VW.length&&(o=Vs(VW)),o}var HW=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="timeCat",e}return Ka(e,t),e.prototype.translate=function(t){t=jW(t);var e=this.values.indexOf(t);return-1===e&&(e=el(t)&&t<this.values.length?t:NaN),e},e.prototype.getText=function(t,e){var n=this.translate(t);if(n>-1){var r=this.values[n],i=this.formatter;return r=i?i(r,e):zW(r,this.mask)}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var e=this.values;bs(e,(function(t,n){e[n]=jW(t)})),e.sort((function(t,e){return t-e})),t.prototype.setDomain.call(this)},e}(dW),YW=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isContinuous=!0,e}return Ka(e,t),e.prototype.scale=function(t){if(vs(t))return NaN;var e=this.rangeMin(),n=this.rangeMax();return this.max===this.min?e:e+this.getScalePercent(t)*(n-e)},e.prototype.init=function(){t.prototype.init.call(this);var e=this.ticks,n=$s(e),r=Vs(e);n<this.min&&(this.min=n),r>this.max&&(this.max=r),vs(this.minLimit)||(this.min=n),vs(this.maxLimit)||(this.max=r)},e.prototype.setDomain=function(){var t=Is(this.values),e=t.min,n=t.max;vs(this.min)&&(this.min=e),vs(this.max)&&(this.max=n),this.min>this.max&&(this.min=e,this.max=n)},e.prototype.calculateTicks=function(){var e=this,n=t.prototype.calculateTicks.call(this);return this.nice||(n=ds(n,(function(t){return t>=e.min&&t<=e.max}))),n},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;return(t-n)/(e-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(cW),XW=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}return Ka(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t);return this.min+e*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(YW);function qW(t,e){var n=Math.E;return e>=0?Math.pow(n,Math.log(e)/t):-1*Math.pow(n,Math.log(-e)/t)}function KW(t,e){return 1===t?1:Math.log(e)/Math.log(t)}function ZW(t,e,n){vs(n)&&(n=Math.max.apply(null,t));var r=n;return bs(t,(function(t){t>0&&t<r&&(r=t)})),r===n&&(r=n/e),r>1&&(r=1),r}var QW=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="log",e}return Ka(e,t),e.prototype.invert=function(t){var e,n=this.base,r=KW(n,this.max),i=this.rangeMin(),o=this.rangeMax()-i,a=this.positiveMin;if(a){if(0===t)return 0;var s=1/(r-(e=KW(n,a/n)))*o;if(t<s)return t/s*a}else e=KW(n,this.min);var l=(t-i)/o*(r-e)+e;return Math.pow(n,l)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){t.prototype.setDomain.call(this);var e=this.min;if(e<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===e&&(this.positiveMin=ZW(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;if(e===n)return 0;if(t<=0)return 0;var r=this.base,i=this.positiveMin;return i&&(n=1*i/r),t<i?t/i/(KW(r,e)-KW(r,n)):(KW(r,t)-KW(r,n))/(KW(r,e)-KW(r,n))},e}(YW),JW=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="pow",e}return Ka(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t),n=this.exponent,r=qW(n,this.max),i=qW(n,this.min),o=e*(r-i)+i,a=o>=0?1:-1;return Math.pow(o,n)*a},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;if(e===n)return 0;var r=this.exponent;return(qW(r,t)-qW(r,n))/(qW(r,e)-qW(r,n))},e}(YW),tH=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="time",e}return Ka(e,t),e.prototype.getText=function(t,e){var n=this.translate(t),r=this.formatter;return r?r(n,e):zW(n,this.mask)},e.prototype.scale=function(e){var n=e;return(zs(n)||xl(n))&&(n=this.translate(n)),t.prototype.scale.call(this,n)},e.prototype.translate=function(t){return jW(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,e=this.getConfig("min"),n=this.getConfig("max");if(vs(e)&&el(e)||(this.min=this.translate(this.min)),vs(n)&&el(n)||(this.max=this.translate(this.max)),t&&t.length){var r=[],i=1/0,o=i,a=0;bs(t,(function(t){var e=jW(t);if(isNaN(e))throw new TypeError("Invalid Time: "+t+" in time scale!");i>e?(o=i,i=e):o>e&&(o=e),a<e&&(a=e),r.push(e)})),t.length>1&&(this.minTickInterval=o-i),vs(e)&&(this.min=i),vs(n)&&(this.max=a)}},e}(XW),eH=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantize",e}return Ka(e,t),e.prototype.invert=function(t){var e=this.ticks,n=e.length,r=this.getInvertPercent(t),i=Math.floor(r*(n-1));if(i>=n-1)return Vs(e);if(i<0)return $s(e);var o=e[i],a=i/(n-1);return o+(r-a)/((i+1)/(n-1)-a)*(e[i+1]-o)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var e=t.prototype.calculateTicks.call(this);return this.nice||(Vs(e)!==this.max&&e.push(this.max),$s(e)!==this.min&&e.unshift(this.min)),e},e.prototype.getScalePercent=function(t){var e=this.ticks;if(t<$s(e))return 0;if(t>Vs(e))return 1;var n=0;return bs(e,(function(e,r){if(!(t>=e))return!1;n=r})),n/(e.length-1)},e}(YW),nH=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantile",e}return Ka(e,t),e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(eH),rH={};function iH(t){return rH[t]}function oH(t,e){if(iH(t))throw new Error("type '"+t+"' existed.");rH[t]=e}var aH=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}return Ka(e,t),e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&el(t)?t:this.range[0]},e.prototype.invert=function(t){var e=this.range;return t<e[0]||t>e[1]?NaN:this.values[0]},e}(cW),sH=[1,5,2,2.5,4,3],lH=100*Number.EPSILON;function uH(t,e,n,r,i,o){var a=Ql(e),s=Ll(e,t),l=0,u=function(t,e){return(t%e+e)%e}(r,o);return(u<lH||o-u<lH)&&r<=0&&i>=0&&(l=1),1-s/(a-1)-n+l}function cH(t,e,n){var r=Ql(e);return 1-Ll(e,t)/(r-1)-n+1}function dH(t,e,n,r,i,o){var a=(t-1)/(o-i),s=(e-1)/(Math.max(o,r)-Math.min(n,i));return 2-Math.max(a/s,s/a)}function hH(t,e){return t>=e?2-(t-1)/(e-1):1}function fH(t,e,n,r){var i=e-t;return 1-.5*(Math.pow(e-r,2)+Math.pow(t-n,2))/Math.pow(.1*i,2)}function pH(t,e,n){var r=e-t;if(n>r){var i=(n-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function gH(t,e,n,r,i,o){if(void 0===n&&(n=5),void 0===r&&(r=!0),void 0===i&&(i=sH),void 0===o&&(o=[.25,.2,.5,.05]),Number.isNaN(t)||Number.isNaN(e)||"number"!=typeof t||"number"!=typeof e||!n)return{min:0,max:0,ticks:[]};if(e-t<1e-15||1===n)return{min:t,max:e,ticks:[t]};for(var a={score:-2,lmin:0,lmax:0,lstep:0},s=1;s<1/0;){for(var l=0;l<i.length;l+=1){var u=i[l],c=cH(u,i,s);if(o[0]*c+o[1]+o[2]+o[3]<a.score){s=1/0;break}for(var d=2;d<1/0;){var h=hH(d,n);if(o[0]*c+o[1]+o[2]*h+o[3]<a.score)break;for(var f=(e-t)/(d+1)/s/u,p=Math.ceil(Math.log10(f));p<1/0;){var g=s*u*Math.pow(10,p),v=pH(t,e,g*(d-1));if(o[0]*c+o[1]*v+o[2]*h+o[3]<a.score)break;var m=Math.floor(e/g)*s-(d-1)*s,y=Math.ceil(t/g)*s;if(m<=y)for(var b=y-m,x=0;x<=b;x+=1){var w=(m+x)*(g/s),C=w+g*(d-1),S=g,k=uH(u,i,s,w,C,S),E=fH(t,e,w,C),M=dH(d,n,t,e,w,C),A=o[0]*k+o[1]*E+o[2]*M+1*o[3];A>a.score&&(!r||w<=t&&C>=e)&&(a.lmin=w,a.lmax=C,a.lstep=S,a.score=A)}p+=1}d+=1}}s+=1}var _,T=a.lmax,P=a.lmin,I=a.lstep,D=Math.floor((T-P)/I)+1,O=new Array(D);for(l=0;l<D;l++)O[l]=(_=P+l*I)<1e-15?_:parseFloat(_.toFixed(15));return{min:Math.min(t,$s(O)),max:Math.max(e,Vs(O)),ticks:O}}function vH(t){var e=t.values,n=t.tickInterval,r=t.tickCount,i=e;if(el(n))return ds(i,(function(t,e){return e%n==0}));var o=t.min,a=t.max;if(vs(o)&&(o=0),vs(a)&&(a=e.length-1),el(r)&&r<a-o){var s=gH(o,a,r,!1,[1,2,5,3,4,7,6,8,9]).ticks;return ds(s,(function(t){return t>=o&&t<=a})).map((function(t){return e[t]}))}return e.slice(o,a+1)}var mH=Math.sqrt(50),yH=Math.sqrt(10),bH=Math.sqrt(2),xH=function(){function t(){this._domain=[0,1]}return t.prototype.domain=function(t){return t?(this._domain=Array.from(t,Number),this):this._domain.slice()},t.prototype.nice=function(t){var e,n;void 0===t&&(t=5);var r,i=this._domain.slice(),o=0,a=this._domain.length-1,s=this._domain[o],l=this._domain[a];return l<s&&(s=(e=[l,s])[0],l=e[1],o=(n=[a,o])[0],a=n[1]),(r=wH(s,l,t))>0?r=wH(s=Math.floor(s/r)*r,l=Math.ceil(l/r)*r,t):r<0&&(r=wH(s=Math.ceil(s*r)/r,l=Math.floor(l*r)/r,t)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(l/r)*r,this.domain(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(l*r)/r,this.domain(i)),this},t.prototype.ticks=function(t){return void 0===t&&(t=5),function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];(r=e<t)&&(i=t,t=e,e=i);if(0===(a=wH(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;r&&o.reverse();return o}(this._domain[0],this._domain[this._domain.length-1],t||5)},t}();function wH(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=mH?10:o>=yH?5:o>=bH?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=mH?10:o>=yH?5:o>=bH?2:1)}function CH(t,e,n){return("ceil"===n?Math.ceil(t/e):"floor"===n?Math.floor(t/e):Math.round(t/e))*e}function SH(t,e,n){var r=CH(t,n,"floor"),i=CH(e,n,"ceil");r=tl(r,n),i=tl(i,n);for(var o=[],a=r;a<=i;a+=n){var s=tl(a,n);o.push(s)}return{min:r,max:i,ticks:o}}function kH(t,e,n){var r,i=t.minLimit,o=t.maxLimit,a=t.min,s=t.max,l=t.tickCount,u=void 0===l?5:l,c=vs(i)?vs(e)?a:e:i,d=vs(o)?vs(n)?s:n:o;if(c>d&&(d=(r=[c,d])[0],c=r[1]),u<=2)return[c,d];for(var h=(d-c)/(u-1),f=[],p=0;p<u;p++)f.push(c+h*p);return f}function EH(t){return t<1e-15?t:parseFloat(t.toFixed(15))}function MH(t,e,n){if(void 0===n&&(n=5),t===e)return{max:e,min:t,ticks:[t]};var r=(e-t)/n,i=Math.pow(10,Math.floor(Math.log10(r))),o=i;2*i-r<1.5*(r-o)&&5*i-r<2.75*(r-(o=2*i))&&10*i-r<1.5*(r-(o=5*i))&&(o=10*i);for(var a=Math.ceil(e/o),s=Math.floor(t/o),l=Math.max(a*o,e),u=Math.min(s*o,t),c=Math.floor((l-u)/o)+1,d=new Array(c),h=0;h<c;h++)d[h]=EH(u+h*o);return{min:u,max:l,ticks:d}}function AH(t,e){var n=t.length*e;return 1===e?t[t.length-1]:0===e?t[0]:n%1!=0?t[Math.ceil(n)-1]:t.length%2==0?(t[n-1]+t[n])/2:t[n]}function _H(t){return new Date(t).getFullYear()}function TH(t){return new Date(t,0,1).getTime()}function PH(t){return new Date(t).getMonth()}function IH(t,e){return new Date(t,e,1).getTime()}uW("cat",vH),uW("time-cat",(function(t){var e=vH(t),n=Vs(t.values);return n!==Vs(e)&&e.push(n),e})),uW("wilkinson-extended",(function(t){var e=t.min,n=t.max,r=t.tickCount,i=t.nice,o=t.tickInterval,a=t.minLimit,s=t.maxLimit,l=gH(e,n,r,i).ticks;return vs(a)&&vs(s)?o?SH(e,n,o).ticks:l:kH(t,$s(l),Vs(l))})),uW("r-pretty",(function(t){var e=t.min,n=t.max,r=t.tickCount,i=t.tickInterval,o=t.minLimit,a=t.maxLimit,s=MH(e,n,r).ticks;return vs(o)&&vs(a)?i?SH(e,n,i).ticks:s:kH(t,$s(s),Vs(s))})),uW("time",(function(t){var e=t.min,n=t.max,r=t.minTickInterval,i=t.tickInterval,o=t.tickCount;if(i)o=Math.ceil((n-e)/i);else{var a=(n-e)/(i=WW(e,n,o)[1])/o;a>1&&(i*=Math.ceil(a)),r&&i<r&&(i=r)}for(var s=[],l=e;l<n+i;l+=i)s.push(l);return s})),uW("time-pretty",(function(t){var e=t.min,n=t.max,r=t.minTickInterval,i=t.tickCount,o=t.tickInterval,a=[];o||(o=(n-e)/i,r&&o<r&&(o=r));var s=_H(e);if(o>31536e6)for(var l=_H(n),u=Math.ceil(o/31536e6),c=s;c<=l+u;c+=u)a.push(TH(c));else if(o>$W){var d=Math.ceil(o/$W),h=PH(e),f=function(t,e){var n=_H(t),r=_H(e),i=PH(t);return 12*(r-n)+(PH(e)-i)%12}(e,n);for(c=0;c<=f+d;c+=d)a.push(IH(s,c+h))}else if(o>UW){var p=(b=new Date(e)).getFullYear(),g=b.getMonth(),v=b.getDate(),m=Math.ceil(o/UW),y=function(t,e){return Math.ceil((e-t)/UW)}(e,n);for(c=0;c<y+m;c+=m)a.push(new Date(p,g,v+c).getTime())}else if(o>GW){p=(b=new Date(e)).getFullYear(),g=b.getMonth(),m=b.getDate();var b,x=b.getHours(),w=Math.ceil(o/GW),C=function(t,e){return Math.ceil((e-t)/GW)}(e,n);for(c=0;c<=C+w;c+=w)a.push(new Date(p,g,m,x+c).getTime())}else if(o>6e4){var S=function(t,e){return Math.ceil((e-t)/6e4)}(e,n),k=Math.ceil(o/6e4);for(c=0;c<=S+k;c+=k)a.push(e+6e4*c)}else{var E=o;E<1e3&&(E=1e3);var M=1e3*Math.floor(e/1e3),A=Math.ceil((n-e)/1e3),_=Math.ceil(E/1e3);for(c=0;c<A+_;c+=_)a.push(M+1e3*c)}return a.length>=512&&console.warn("Notice: current ticks length("+a.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+o+") is too small, increase the value to solve the problem!"),a})),uW("log",(function(t){var e,n=t.base,r=t.tickCount,i=t.min,o=t.max,a=t.values,s=KW(n,o);if(i>0)e=Math.floor(KW(n,i));else{var l=ZW(a,n,o);e=Math.floor(KW(n,l))}for(var u=s-e,c=Math.ceil(u/r),d=[],h=e;h<s+c;h+=c)d.push(Math.pow(n,h));return i<=0&&d.unshift(0),d})),uW("pow",(function(t){var e=t.exponent,n=t.tickCount,r=Math.ceil(qW(e,t.max));return MH(Math.floor(qW(e,t.min)),r,n).ticks.map((function(t){var n=t>=0?1:-1;return Math.pow(t,e)*n}))})),uW("quantile",(function(t){var e=t.tickCount,n=t.values;if(!n||!n.length)return[];for(var r=n.slice().sort((function(t,e){return t-e})),i=[],o=0;o<e;o++){var a=o/(e-1);i.push(AH(r,a))}return i})),uW("d3-linear",(function(t){var e=t.min,n=t.max,r=t.tickInterval,i=t.minLimit,o=t.maxLimit,a=function(t){var e=t.min,n=t.max,r=t.nice,i=t.tickCount,o=new xH;return o.domain([e,n]),r&&o.nice(i),o.ticks(i)}(t);return vs(i)&&vs(o)?r?SH(e,n,r).ticks:a:kH(t,$s(a),Vs(a))})),oH("cat",dW),oH("category",dW),oH("identity",aH),oH("linear",XW),oH("log",QW),oH("pow",JW),oH("time",tH),oH("timeCat",HW),oH("quantize",eH),oH("quantile",nH);function DH(t){return function(t){return zl(t,(function(t,e){return[0===e?"M":"L",t[0],t[1]]}))}(t)}function OH(t,e,n,r){void 0===r&&(r=!0);var i=new XW({values:t}),o=new dW({values:zl(t,(function(t,e){return e}))}),a=zl(t,(function(t,r){return[o.scale(r)*e,n-i.scale(t)*n]}));return r?function(t){if(t.length<=2)return DH(t);var e=[];bs(t,(function(t){Nl(t,e.slice(e.length-2))||e.push(t[0],t[1])}));var n=iv(e,!1),r=$s(t),i=r[0],o=r[1];return n.unshift(["M",i,o]),n}(a):DH(a)}function RH(t,e,n,r){void 0===r&&(r=5);for(var i=new XW({values:t}),o=new dW({values:zl(t,(function(t,e){return e}))}),a=zl(t,(function(t,r){return[o.scale(r)*e,n-i.scale(t)*n]})),s=[],l=0;l<a.length;l++){var u=a[l],c=BH({x:u[0],y:u[1],y0:n,size:r});s.push.apply(s,c)}return function(t,e){void 0===e&&(e=!0);var n=[],r=t[0];n.push(["M",r.x,r.y]);for(var i=1,o=t.length;i<o;i++)n.push(["L",t[i].x,t[i].y]);e&&(n.push(["L",r.x,r.y]),n.push(["z"]));return n}(s)}function LH(t,e,n,r){var i=function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}([],t),o=function(t,e){var n=new XW({values:t}),r=Math.max(0,n.min);return e-n.scale(r)*e}(r,n);return i.push(["L",e,o]),i.push(["L",0,o]),i.push(["Z"]),i}function BH(t){var e,n,r,i,o=t.x,a=t.y,s=t.y0,l=t.size;ms(a)?(e=a[0],n=a[1]):(e=s,n=a),ms(o)?(r=o[0],i=o[1]):(r=o-l/2,i=o+l/2);var u=[{x:r,y:e},{x:r,y:n}];return u.push({x:i,y:n},{x:i,y:e}),u}var FH=function(){return(FH=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},NH={stroke:"#C5C5C5",strokeOpacity:.85},zH={fill:"#CACED4",opacity:.85},jH=function(){function t(t){var e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,o=t.width,a=void 0===o?200:o,s=t.height,l=void 0===s?26:s,u=t.smooth,c=void 0===u||u,d=t.isArea,h=void 0!==d&&d,f=t.data,p=void 0===f?[]:f,g=t.lineStyle,v=t.areaStyle,m=t.group,y=t.interval,b=void 0===y?null:y;this.group=m,this.x=n,this.y=i,this.width=a,this.height=l,this.data=p,this.smooth=c,this.isArea=h,this.lineStyle=Object.assign({},NH,g),this.areaStyle=Object.assign({},zH,v),this.intervalConfig=b,this.renderLine()}return t.prototype.renderLine=function(){var t=this,e=t.x,n=t.y,r=t.width,i=t.height;t.barWidth;var o=t.data,a=t.smooth,s=t.isArea,l=t.lineStyle,u=t.areaStyle,c=this.group.addGroup({name:"trend-group"});if(o){var d=OH(o,r,i,a);if(c.addShape("path",{attrs:FH({path:d},l)}),s){var h=LH(d,r,i,o);c.addShape("path",{attrs:FH({path:h},u)})}}this.intervalConfig&&c.addShape("path",{attrs:FH({path:RH(this.intervalConfig.data,r,i,this.intervalConfig.style.barWidth)},this.intervalConfig.style)}),c.move(e,n)},t.prototype.destory=function(){this.group.destroy()},t}(),GH=function(){return(GH=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},UH={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},$H={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},VH=function(){function t(t){var e=t.group,n=t.name,r=t.type,i=t.x,o=void 0===i?0:i,a=t.y,s=void 0===a?0:a,l=t.width,u=void 0===l?2:l,c=t.height,d=void 0===c?24:c,h=t.style,f=void 0===h?{}:h;this.group=e,this.name=n,this.handleType=r,this.x=o,this.y=s,this.width=u,this.height=d,"trend"===r?this.style=GH(GH({},UH),f):"simple"===r&&(this.style=GH(GH({},$H),f)),this.renderHandle()}return t.prototype.setX=function(t){this.setXY(t,void 0)},t.prototype.setY=function(t){this.setXY(void 0,t)},t.prototype.setXY=function(t,e){el(t)&&(this.x=t),el(e)&&(this.y=e),this.updateXY()},t.prototype.renderHandle=function(){var t=this,e=t.width,n=t.height,r=t.style,i=t.name,o=r.fill,a=r.stroke,s=r.radius,l=r.opacity,u=r.cursor;this.handleGroup=this.group.addGroup(),"trend"===this.handleType?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:e,height:n,fill:o,stroke:a,radius:s,opacity:l,cursor:u},name:i+"-handler"}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:0,r:2*e,fill:o,stroke:a,radius:s,opacity:l,cursor:u},name:i+"-handler"}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:n,r:2*e,fill:o,stroke:a,radius:s,opacity:l,cursor:u},name:i+"-handler"})):"simple"===this.handleType&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:n/2,r:2*e,fill:o,stroke:a,radius:s,opacity:l,cursor:u,lineWidth:2},name:i+"-handler"})),this.updateXY(),"trend"===this.handleType?this.bindTrendEvents():"simple"===this.handleType&&this.bindSimpleEvents()},t.prototype.bindSimpleEvents=function(){var t=this,e=this.name;this.handleGroup.on(e+"-handler:mouseenter",(function(){var e=t.style.highLightFill;t.topCircle.attr("fill",e)})),this.handleGroup.on(e+"-handler:mouseleave",(function(){var e=t.style.fill;t.topCircle.attr("fill",e)}))},t.prototype.bindTrendEvents=function(){var t=this,e=this.name;this.handleGroup.on(e+"-handler:mouseenter",(function(){var e=t.style.highLightFill;t.verticalLine.attr("fill",e),t.topCircle.attr("fill",e),t.bottomCircle.attr("fill",e)})),this.handleGroup.on(e+"-handler:mouseleave",(function(){var e=t.style.fill;t.verticalLine.attr("fill",e),t.topCircle.attr("fill",e),t.bottomCircle.attr("fill",e)}))},t.prototype.show=function(){this.handleGroup.show()},t.prototype.hide=function(){this.handleGroup.hide()},t.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},t}(),WH=function(){return(WH=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},HH=function(){function t(t){this.config=Rl({},t),this.init()}return t.prototype.update=function(t){this.config=Rl({},this.config,t),this.updateElement(),this.renderMarker()},t.prototype.init=function(){this.initElement(),this.renderMarker()},t.prototype.initElement=function(){var t=this.config,e=t.group,n=t.style,r=n.scale,i=void 0===r?1:r,o=n.offsetX,a=void 0===o?0:o,s=n.offsetY,l=void 0===s?0:s,u=this.config.x+a,c=this.config.y+l,d=e.addGroup({name:"playPauseBtn"});this.startMarkerGroup=d.addGroup({name:"playPauseBtn"}),this.circle=e.addShape("circle",{attrs:WH({x:u,y:c,r:this.config.r*i},n),name:"playPauseBtn"}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(u,c,i),fill:n.stroke||"#aaa"}}),this.pauseMarkerGroup=d.addGroup({name:"playPauseBtn"});var h=.25*this.config.r*i,f=.5*this.config.r*Math.sqrt(3)*i;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:u-.375*this.config.r*i,y:c-f/2,width:h,height:f,fill:n.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:u+1/8*this.config.r*i,y:c-f/2,width:h,height:f,fill:n.stroke||"#aaa",lineWidth:0}})},t.prototype.updateElement=function(){var t=this.config.style,e=t.scale,n=void 0===e?1:e,r=t.offsetX,i=void 0===r?0:r,o=t.offsetY,a=void 0===o?0:o,s=this.config.x+i,l=this.config.y+a;this.circle.attr("x",s),this.circle.attr("y",l),this.circle.attr("r",this.config.r*n),this.startMarker.attr("path",this.getStartMarkerPath(s,l,n));var u=.25*this.config.r*n,c=.5*this.config.r*Math.sqrt(3)*n;this.pauseLeftMarker.attr("x",s-.375*this.config.r*n),this.pauseLeftMarker.attr("y",l-c/2),this.pauseLeftMarker.attr("width",u),this.pauseLeftMarker.attr("height",c),this.pauseRightMarker.attr("x",s+1/8*this.config.r*n),this.pauseRightMarker.attr("y",l-c/2),this.pauseRightMarker.attr("width",u),this.pauseRightMarker.attr("height",c)},t.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},t.prototype.getStartMarkerPath=function(t,e,n){var r=.5*this.config.r*Math.sqrt(3)*n;return[["M",t-r/Math.sqrt(3)/2,e-r/2],["L",t+r/Math.sqrt(3),e],["L",t-r/Math.sqrt(3)/2,e+r/2]]},t}(),YH=function(){return(YH=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},XH=VV,qH={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},KH={fill:"#fff"},ZH={fill:"green"},QH={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},JH={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},tY={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:QH,timeTypeControllerStyle:JH},eY=function(){function t(t){this.controllerCfg=Rl({},tY,t),this.group=t.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType="range",this.fontFamily=t.fontFamily||"Arial, sans-serif",this.init()}return t.prototype.init=function(){this.renderPlayButton()},t.prototype.getNextMarkerPath=function(t,e,n){return[["M",t,e-n],["L",t+n,e],["L",t,e+n],["Z",t,e-n],["M",t,e],["L",t-n,e-n],["L",t-n,e+n],["Z"]]},t.prototype.getPreMarkerPath=function(t,e,n){return[["M",t,e-n],["L",t-n,e],["L",t,e+n],["L",t,e-n],["M",t,e],["L",t+n,e-n],["L",t+n,e+n],["Z"]]},t.prototype.renderPlayButton=function(){var t=this.controllerCfg,e=t.width,n=t.height,r=t.x,i=t.y,o=t.hideTimeTypeController,a=t.fill,s=void 0===a?"#aaa":a,l=t.stroke,u=void 0===l?"green":l,c=YH(YH({},qH),t.playBtnStyle||{}),d=YH(YH({},KH),t.preBtnStyle||{}),h=YH(YH({},ZH),t.nextBtnStyle||{}),f=n/2-5,p=i+10,g=this.controllerGroup.addShape("rect",{attrs:{x:r,y:p,width:e,height:n,stroke:u,fill:s},name:"container-rect"});this.playButton?this.playButton.update({x:e/2,y:p,r:f}):this.playButton=new HH({group:this.controllerGroup,x:e/2,y:p+f+5,r:f,isPlay:this.isPlay,style:c});var v=d.offsetX||0,m=d.offsetY||0,y=(d.scale||1)*f;this.controllerGroup.addShape("path",{attrs:YH({path:this.getPreMarkerPath(e/2-5*f+v,p+f+5+m,.5*y)},d),name:"preStepBtn"});var b=h.offsetX||0,x=h.offsetY||0,w=(h.scale||1)*f;this.controllerGroup.addShape("path",{attrs:YH({path:this.getNextMarkerPath(e/2+5*f+b,p+f+5+x,.5*w)},h),name:"nextStepBtn"}),g.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var C=this.controllerCfg.scale,S=void 0===C?1:C,k=this.controllerGroup.getCanvasBBox(),E=(k.maxX+k.minX)/2,M=(k.maxY+k.minY)/2,A=XH([1,0,0,0,1,0,0,0,1],[["t",-E,-M],["s",S,S],["t",E,M]]);this.controllerGroup.setMatrix(A)},t.prototype.renderSpeedBtn=function(){var t=this.controllerCfg,e=t.y,n=t.width,r=t.hideTimeTypeController,i=YH(YH({},QH),this.controllerCfg.speedControllerStyle||{}),o=i.scroller,a=void 0===o?{}:o,s=i.text,l=void 0===s?{}:s,u=i.pointer,c=void 0===u?{}:u,d=i.scale,h=void 0===d?1:d,f=i.offsetX,p=void 0===f?0:f,g=i.offsetY,v=void 0===g?0:g,m=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=m;var y=5;this.speedAxisY=[19,22,26,32,39];for(var b=0;b<5;b++){var x=e+this.speedAxisY[b],w=n-(r?50:110);m.addShape("line",{attrs:YH({x1:w,x2:w+15,y1:x,y2:x},a),speed:y,name:"speed-rect"}),this.speedAxisY[b]=x,y-=1}this.speedText=m.addShape("text",{attrs:YH({x:n-(r?50:110)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},l)}),this.speedPoint=m.addShape("path",{attrs:YH({path:this.getPointerPath(n-(r?50:110),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},c)});var C=this.speedGroup.getCanvasBBox(),S=(C.maxX+C.minX)/2,k=(C.maxY+C.minY)/2,E=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];E=XH(E,[["t",-S,-k],["s",h,h],["t",S+p*h,k+v*h]]),this.speedGroup.setMatrix(E)},t.prototype.getPointerPath=function(t,e){return[["M",t,e],["L",t-10,e-4],["L",t-10,e+4],["Z"]]},t.prototype.renderToggleTime=function(){var t,e=this.controllerCfg.width,n=YH(YH({},JH),this.controllerCfg.timeTypeControllerStyle||{}),r=n.scale,i=void 0===r?1:r,o=n.offsetX,a=void 0===o?0:o,s=n.offsetY,l=void 0===s?0:s,u=n.box,c=void 0===u?{}:u,d=n.check,h=void 0===d?{}:d,f=n.text,p=void 0===f?{}:f;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"}),this.toggleGroup.addShape("rect",{attrs:YH({x:e-50,y:this.speedAxisY[0]+3.5},c),isChecked:!1,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:YH({path:[["M",e-50+3,this.speedAxisY[1]+6],["L",e-50+7,this.speedAxisY[1]+10],["L",e-50+12,this.speedAxisY[1]+4]]},h),capture:!1}),this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:YH({text:(null===(t=this.controllerCfg)||void 0===t?void 0:t.timePointControllerText)||"单一时间",x:e-50+15,y:this.speedAxisY[0]+4,fontFamily:"undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},p)});var g=this.toggleGroup.getCanvasBBox(),v=(g.maxX+g.minX)/2,m=(g.maxY+g.minY)/2,y=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];y=XH(y,[["t",-v,-m],["s",i,i],["t",v+a*i,m+l*i]]),this.toggleGroup.setMatrix(y)},t.prototype.bindEvent=function(){var t=this;this.speedGroup.on("speed-rect:click",(function(e){var n=e.target.attr("y1"),r=t.speedPoint.attr("matrix"),i=t.speedAxisY.indexOf(r[7]||0),o=t.speedAxisY.indexOf(n),a=t.speedAxisY[o]-t.speedAxisY[i];r=XH(r,[["t",0,a]]),t.speedPoint.setMatrix(r),t.currentSpeed=t.speedAxisY.length-o,t.speedText.attr("text",t.currentSpeed+".0X"),t.group.emit("timebarConfigChanged",{speed:t.currentSpeed,type:t.currentType})})),this.speedGroup.on("mousewheel",(function(e){e.preventDefault();var n=t.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],r=n[7],i=t.speedAxisY.indexOf(r);if(-1===i){var o=1/0;t.speedAxisY.forEach((function(t,e){var n=Math.abs(t-r);o>n&&(o=n,i=e)}))}i=e.originalEvent.deltaY>0?Math.max(0,i-1):Math.min(t.speedAxisY.length-1,i+1);var a=t.speedAxisY[i]-r;n=XH(n,[["t",0,a]]),t.speedPoint.setMatrix(n),t.currentSpeed=t.speedAxisY.length-i,t.speedText.attr("text",t.currentSpeed+".0X"),t.group.emit("timebarConfigChanged",{speed:t.currentSpeed,type:t.currentType})})),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",(function(e){var n,r,i=e.target.get("isChecked");i?(t.checkedIcon.hide(),t.checkedText.attr("text",(null===(r=t.controllerCfg)||void 0===r?void 0:r.timePointControllerText)||"单一时间"),t.currentType="range"):(t.checkedIcon.show(),t.checkedText.attr("text",(null===(n=t.controllerCfg)||void 0===n?void 0:n.timeRangeControllerText)||"时间范围"),t.currentType="single"),e.target.set("isChecked",!i),t.group.emit("timebarConfigChanged",{type:t.currentType,speed:t.currentSpeed})}))},t.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},t}(),nY=function(){return(nY=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},rY={fill:"#416180",opacity:.05},iY={fill:"#416180",opacity:.15,radius:5},oY={fill:"#5B8FF9",opacity:.3,cursor:"grab"},aY={width:2,height:24},sY={textBaseline:"middle",fill:"#000",opacity:.45},lY={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},uY={lineWidth:1,stroke:"#ccc"},cY=function(){function t(t){var e=this;this.prevX=0,this.onMouseDown=function(t){return function(n){e.currentHandler=t;var r=n.originalEvent;r.stopPropagation(),r.preventDefault(),e.prevX=Ul(r,"touches.0.pageX",r.pageX);var i=e.canvas.get("container");i.addEventListener("mousemove",e.onMouseMove),i.addEventListener("mouseup",e.onMouseUp),i.addEventListener("mouseleave",e.onMouseUp),i.addEventListener("touchmove",e.onMouseMove),i.addEventListener("touchend",e.onMouseUp),i.addEventListener("touchcancel",e.onMouseUp)}},this.onMouseMove=function(t){t.stopPropagation(),t.preventDefault();var n=Ul(t,"touches.0.pageX",t.pageX),r=n-e.prevX,i=e.adjustOffsetRange(r/e.width);e.updateStartEnd(i),e.updateUI(),e.prevX=n},this.onMouseUp=function(){e.currentHandler&&(e.currentHandler=void 0);var t=e.canvas.get("container");t&&(t.removeEventListener("mousemove",e.onMouseMove),t.removeEventListener("mouseup",e.onMouseUp),t.removeEventListener("mouseleave",e.onMouseUp),t.removeEventListener("touchmove",e.onMouseMove),t.removeEventListener("touchend",e.onMouseUp),t.removeEventListener("touchcancel",e.onMouseUp))};var n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,a=t.width,s=void 0===a?100:a,l=t.height,u=t.padding,c=void 0===u?10:u,d=t.trendCfg,h=t.controllerCfg,f=void 0===h?{speed:1}:h,p=t.backgroundStyle,g=void 0===p?{}:p,v=t.foregroundStyle,m=void 0===v?{}:v,y=t.handlerStyle,b=void 0===y?{}:y,x=t.textStyle,w=void 0===x?{}:x,C=t.start,S=void 0===C?0:C,k=t.end,E=void 0===k?1:k,M=t.minText,A=void 0===M?"":M,_=t.maxText,T=void 0===_?"":_,P=t.group,I=t.graph,D=t.canvas,O=t.tick,R=void 0===O?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(t){return t},ticks:[]}:O,L=t.type;this.graph=I,this.canvas=D,this.group=P,this.timeBarType=L,this.x=r,this.y=o,this.width=s,this.height=l,this.padding=c,this.ticks=R.ticks,this.trendCfg=d,this.controllerCfg=f,this.currentSpeed=f.speed||1,this.tickLabelFormatter=R.tickLabelFormatter,"trend"===L?this.backgroundStyle=nY(nY({},rY),g):"simple"===L&&(this.backgroundStyle=nY(nY({},iY),g)),this.foregroundStyle=nY(nY({},oY),m),this.handlerStyle=nY(nY({},aY),b),this.textStyle=nY(nY({},sY),w),this.tickLabelStyle=nY(nY({},lY),R.tickLabelStyle),this.tickLineStyle=nY(nY({},uY),R.tickLineStyle),this.currentMode="range",this.start=S,this.end=E,this.minText=A,this.maxText=T,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return t.prototype.update=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.minText,a=t.maxText,s=t.start,l=t.end;this.start=Math.min(1,Math.max(s,0)),this.end=Math.min(1,Math.max(l,0)),Tl(this,{x:e,y:n,width:r,height:i,minText:o,maxText:a}),this.updateUI()},t.prototype.setText=function(t,e){this.minTextShape.attr("text",t),this.maxTextShape.attr("text",e)},t.prototype.renderSlider=function(){var t=this,e=this,n=e.width,r=e.height,i=e.timeBarType;if("trend"===i&&Ql(Ul(this.trendCfg,"data"))){var o=new jH(nY(nY({x:this.x,y:this.y,width:n,height:r},this.trendCfg),{group:this.group}));this.trendComponent=o}var a=this.group.addGroup({name:"slider-group"});a.addShape("rect",{attrs:nY({x:0,y:0,width:n,height:r},this.backgroundStyle)});var s=this.group.addGroup();"trend"===i?(this.minTextShape=s.addShape("text",{attrs:nY({x:0,y:r/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=s.addShape("text",{attrs:nY({y:r/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})):(this.minTextShape=s.addShape("text",{attrs:nY({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=s.addShape("text",{attrs:nY({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:nY({x:0,y:this.y,height:r},this.foregroundStyle)}),this.foregroundShape.on("mousedown",(function(t){t.target.attr("cursor","grabbing")})),this.foregroundShape.on("mouseup",(function(e){e.target.attr("cursor",t.foregroundStyle.cursor||"grab")}));var l=Ul(this.handlerStyle,"width",2),u=Ul(this.handlerStyle,"height",24),c=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new VH({name:"minHandlerShape",group:c,type:i,x:this.x,y:this.y,width:l,height:u,style:this.handlerStyle});var d=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new VH({name:"maxHandlerShape",group:d,type:i,x:this.x,y:this.y,width:l,height:u,style:this.handlerStyle});var h=this.ticks,f=n/(h.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach((function(t){t.destroy()}));var p=-1/0;this.textList=h.map((function(e,n){var i;t.tickPosList.push(t.x+n*f),t.tickLabelFormatter?(i=t.tickLabelFormatter(e),!zs(i)&&i&&(i=e.date)):i=e.date;var o=t.group.addShape("text",{attrs:nY({x:t.x+n*f,y:t.y+r+5,text:i,fontFamily:t.fontFamily||"Arial, sans-serif"},t.tickLabelStyle)}),a=t.group.addShape("line",{attrs:nY({x1:t.x+n*f,y1:t.y+r+2,x2:t.x+n*f,y2:t.y+r+6},t.tickLineStyle)});a.toBack();var s=o.getBBox();return s.minX>p?(o.show(),a.show(),p=s.minX+s.width+10):(o.hide(),a.hide()),o})),this.controllerBtnGroup=new eY(nY({group:this.group,x:this.x,y:this.y+r+25,width:n,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),a.move(this.x,this.y),this.bindEvents()},t.prototype.bindEvents=function(){var t=this,e=this.group.find((function(t){return"minHandlerShape"===t.get("name")}));e&&(e.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),e.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var n=this.group.find((function(t){return"maxHandlerShape"===t.get("name")}));n&&(n.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),n.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("playPauseBtn:click",(function(){t.isPlay=!t.isPlay,t.currentHandler=t.maxHandlerShape,t.changePlayStatus()})),this.group.on("nextStepBtn:click",(function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(.01),t.updateUI()})),this.group.on("preStepBtn:click",(function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(-.01),t.updateUI()})),this.group.on("timebarConfigChanged",(function(e){var n=e.type,r=e.speed;t.currentSpeed=r,t.currentMode=n,"single"===n?(t.minHandlerShape.hide(),t.foregroundShape.hide(),t.minTextShape.hide()):"range"===n&&(t.minHandlerShape.show(),t.foregroundShape.show(),t.minTextShape.show())}))},t.prototype.adjustTickIndex=function(t){for(var e=0;e<this.tickPosList.length-1;e++)if(this.tickPosList[e]<=t&&t<=this.tickPosList[e+1])return Math.abs(this.tickPosList[e]-t)<Math.abs(t-this.tickPosList[e+1])?e:e+1;return 0},t.prototype.adjustOffsetRange=function(t){switch(this.currentHandler){case this.minHandlerShape:var e=0-this.start,n=1-this.start;return Math.min(n,Math.max(e,t));case this.maxHandlerShape:e=0-this.end,n=1-this.end;return Math.min(n,Math.max(e,t));case this.foregroundShape:e=0-this.start,n=1-this.end;return Math.min(n,Math.max(e,t));default:return 0}},t.prototype.updateStartEnd=function(t){var e=this.ticks[this.adjustTickIndex(this.start*this.width)],n=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler)return this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,void(this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date);switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=t,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break;case this.foregroundShape:this.start+=t,this.end+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date}},t.prototype.updateUI=function(){var t=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var e=this.x+this.start*this.width,n=this.x+this.end*this.width;this.foregroundShape.attr("x",e),this.foregroundShape.attr("width",n-e);var r=Ul(this.handlerStyle,"width",2);this.setText(this.minText,this.maxText);var i=this.dodgeText([e,n]),o=i[0],a=i[1];this.minHandlerShape.setX(e-r/2),bs(o,(function(e,n){return t.minTextShape.attr(n,e)})),this.maxHandlerShape.setX(n-r/2),bs(a,(function(e,n){return t.maxTextShape.attr(n,e)})),"range"===this.currentMode?this.graph.emit("valuechange",{value:[this.start,this.end].sort()}):"single"===this.currentMode&&this.graph.emit("valuechange",{value:[this.end,this.end]})},t.prototype.dodgeText=function(t){var e,n,r=Ul(this.handlerStyle,"width",2),i=this.minTextShape,o=this.maxTextShape,a=t[0],s=t[1],l=!1;a>s&&(a=(e=[s,a])[0],s=e[1],i=(n=[o,i])[0],o=n[1],l=!0);var u=i.getBBox(),c=o.getBBox(),d=null,h=null;return"trend"===this.timeBarType?(d=a-u.width<this.x+2?{x:a+r/2+2,textAlign:"left"}:{x:a-r/2-2,textAlign:"right"},h=s+c.width>this.x+this.width?{x:s-r/2-2,textAlign:"right"}:{x:s+r/2+2,textAlign:"left"}):"simple"===this.timeBarType&&(d=u.width>a-2?{x:a+r/2+2,textAlign:"center"}:{x:a-r/2-2,textAlign:"center"},h=c.width>this.width-s-2?{x:s-r/2-2,textAlign:"center"}:{x:s+r/2+2,textAlign:"center"}),l?[h,d]:[d,h]},t.prototype.startPlay=function(){var t=this;return"undefined"!=typeof window?window.requestAnimationFrame((function(){var e=t,n=e.ticks,r=e.width,i=t.currentSpeed,o=r/n.length/(1e3*(10-i)/60),a=t.adjustOffsetRange(o/t.width);t.updateStartEnd(a),t.updateUI(),t.isPlay&&(t.playHandler=t.startPlay())})):void 0},t.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timebarstartplay",null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit("timebarendplay",null))},t.prototype.destory=function(){this.graph.off("valuechange");var t=this.group,e=t.find((function(t){return"minHandlerShape"===t.get("name")}));e&&(e.off("minHandlerShape-handler:mousedown"),e.off("minHandlerShape-handler:touchstart"),e.destroy());var n=t.find((function(t){return"maxHandlerShape"===t.get("name")}));n&&(n.off("maxHandlerShape-handler:mousedown"),n.off("maxHandlerShape-handler:touchstart"),n.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),t.off("playPauseBtn:click"),t.off("nextStepBtn:click"),t.off("preStepBtn:click"),t.off("timebarConfigChanged"),t.destroy(),this.trendComponent&&this.trendComponent.destory()},t}(),dY=function(){function t(t){var e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,o=t.container,a=t.text,s=t.padding,l=void 0===s?[4,4,4,4]:s,u=t.className,c=void 0===u?"g6-component-timebar-tooltip":u,d=t.backgroundColor,h=void 0===d?"#000":d,f=t.textColor,p=void 0===f?"#fff":f,g=t.opacity,v=void 0===g?.8:g,m=t.fontSize,y=void 0===m?12:m;this.container=o,this.className=c,this.backgroundColor=h,this.textColor=p,this.x=n,this.y=i,this.text=a,this.padding=l,this.opacity=v,this.fontSize=y,this.render()}return t.prototype.render=function(){var t=this,e=t.className;t.x,t.y;var n=t.backgroundColor,r=t.textColor,i=t.text,o=t.padding,a=t.opacity,s=t.fontSize,l=t.container,u=fw("<div class='"+e+"' style=\"position: absolute; width: fit-content; height: fit-content; opacity: "+a+'"></div>');zs(l)&&(l=document.getElementById(l)),l.appendChild(u),t.parentHeight=l.offsetHeight,t.parentWidth=l.offsetWidth,mw(u,{visibility:"hidden",top:0,left:0});var c=fw("\n      <div style='position: absolute; white-space:nowrap; background-color: "+n+"; font-size: "+s+"px; border-radius: 4px; width: fit-content; height: fit-content; color: "+r+"; padding: "+o[0]+"px "+o[1]+"px "+o[2]+"px "+o[3]+"px'></div>");c.innerHTML=i,u.appendChild(c),t.backgroundDOM=c;var d=fw("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid "+n+"'></div>");u.appendChild(d),t.arrowDOM=d,t.container=u},t.prototype.show=function(t){var e=this,n=t.text,r=t.x;t.y,t.clientX,t.clientY,e.backgroundDOM.innerHTML=n;var i=e.backgroundDOM.offsetWidth,o=e.backgroundDOM.offsetHeight,a=e.arrowDOM.offsetWidth,s=e.arrowDOM.offsetHeight;mw(e.container,{top:-o-s+"px",left:r+"px",visibility:"visible"}),mw(e.backgroundDOM,{marginLeft:-i/2+"px"}),mw(e.arrowDOM,{marginLeft:-a/2+"px",top:o+"px"});var l=r-i/2,u=r+i/2;l<0?mw(e.backgroundDOM,{marginLeft:-i/2-l+"px"}):u>e.parentWidth&&mw(e.backgroundDOM,{marginLeft:-i/2-u+e.parentWidth+12+"px"})},t.prototype.hide=function(){mw(this.container,{top:0,left:0,visibility:"hidden"})},t}(),hY=function(){return(hY=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},fY={fill:"#5B8FF9"},pY={fill:"#e6e8e9"},gY=function(){function t(t){this.frameCount=0,this.fontFamily="Arial, sans-serif";var e=t.graph,n=t.canvas,r=t.group,i=t.width,o=t.height,a=t.padding,s=t.data,l=t.start,u=t.end,c=t.x,d=void 0===c?0:c,h=t.y,f=void 0===h?0:h,p=t.tickLabelFormatter,g=t.selectedTickStyle,v=void 0===g?fY:g,m=t.unselectedTickStyle,y=void 0===m?pY:m,b=t.tooltipBackgroundColor,x=t.tooltipFomatter;this.graph=e,this.group=r,this.sliceGroup=r.addGroup({name:"slice-group"}),this.canvas=n,this.width=i,this.height=o,this.padding=a,this.data=s,this.start=l,this.end=u,this.tickLabelFormatter=p,this.selectedTickStyle=v,this.unselectedTickStyle=y,this.x=d,this.y=f,this.tooltipBackgroundColor=b,this.tooltipFomatter=x,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return t.prototype.renderSlices=function(){var t=this,e=this,n=e.width,r=e.height,i=e.padding,o=e.data,a=e.start,s=e.end,l=e.tickLabelFormatter,u=e.selectedTickStyle,c=e.unselectedTickStyle,d=n-2*i,h=r-(3*i+4+10)-2*i,f=o.length,p=(d-2*(f-1))/f;this.tickWidth=p;var g=this.sliceGroup,v=[],m=Math.round(f*a),y=Math.round(f*s);this.startTickRectId=m,this.endTickRectId=y,o.forEach((function(e,r){var o=r>=m&&r<=y?u:c,a=g.addShape("rect",{attrs:hY({x:i+r*(p+2),y:i,width:p,height:h},o),draggable:!0,name:"tick-rect-"+r}),s=g.addShape("rect",{attrs:{x:i+r*p+2*(2*r-1)/2,y:i,width:0===r||r===f-1?p+1:p+2,height:h,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-"+r});s.toFront();var d,b=a.getBBox(),x=(b.minX+b.maxX)/2;if(v.push({rect:a,pickRect:s,value:e.date,x:x,y:b.minY}),l?(d=l(e),!zs(d)&&d&&(d=e.date)):r%Math.round(f/10)==0&&(d=e.date),d){var w=b.maxY+2*i;g.addShape("line",{attrs:{stroke:"#BFBFBF",x1:x,y1:w,x2:x,y2:w+4}});var C=w+4+i,S=g.addShape("text",{attrs:{fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:x,y:C,textAlign:"center",text:d,textBaseline:"top",fontSize:10,fontFamily:t.fontFamily||"Arial, sans-serif"},capture:!1}),k=S.getBBox();k.maxX>n?S.attr("textAlign","right"):k.minX<0&&S.attr("textAlign","left")}})),this.tickRects=v;var b=this.group;this.currentSpeed=1,this.controllerBtnGroup=new eY({group:b,x:this.x,y:this.y+r+5,width:n,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"})},t.prototype.initEvent=function(){var t=this,e=this.sliceGroup;e.on("click",(function(e){var n=e.target;if("rect"===n.get("type")&&n.get("name")){var r=parseInt(n.get("name").split("-")[2],10);if(!isNaN(r)){var i=t.tickRects,o=t.unselectedTickStyle;i.forEach((function(t){t.rect.attr(o)}));var a=t.selectedTickStyle;i[r].rect.attr(a),t.startTickRectId=r,t.endTickRectId=r;var s=r/i.length;t.graph.emit("valuechange",{value:[s,s]})}}})),e.on("dragstart",(function(e){var n=t.tickRects,r=t.unselectedTickStyle;n.forEach((function(t){t.rect.attr(r)}));var i=e.target,o=parseInt(i.get("name").split("-")[2],10),a=t.selectedTickStyle;n[o].rect.attr(a),t.startTickRectId=o;var s=o/n.length;t.graph.emit("valuechange",{value:[s,s]}),t.dragging=!0})),e.on("dragover",(function(e){if(t.dragging&&"rect"===e.target.get("type")){for(var n=parseInt(e.target.get("name").split("-")[2],10),r=t.startTickRectId,i=t.tickRects,o=t.selectedTickStyle,a=t.unselectedTickStyle,s=0;s<i.length;s++){var l=s>=r&&s<=n?o:a;i[s].rect.attr(l)}var u=i.length;t.endTickRectId=n;var c=r/u,d=n/u;t.graph.emit("valuechange",{value:[c,d]})}})),e.on("drop",(function(e){if(t.dragging&&(t.dragging=!1,"rect"===e.target.get("type"))){var n=t.startTickRectId,r=parseInt(e.target.get("name").split("-")[2],10);if(!(r<n)){var i=t.selectedTickStyle,o=t.tickRects;o[r].rect.attr(i),t.endTickRectId=r;var a=o.length,s=n/a,l=r/a;t.graph.emit("valuechange",{value:[s,l]})}}}));var n=this,r=n.tooltipBackgroundColor,i=n.tooltipFomatter,o=n.canvas,a=new dY({container:o.get("container"),backgroundColor:r}),s=this.tickRects;s.forEach((function(t){var e=t.pickRect;e.on("mouseenter",(function(t){var e=t.target;if("rect"===e.get("type")){var n=parseInt(e.get("name").split("-")[2],10),r=o.getClientByPoint(s[n].x,s[n].y);a.show({x:s[n].x,y:s[n].y,clientX:r.x,clientY:r.y,text:i?i(s[n].value):s[n].value})}})),e.on("mouseleave",(function(t){a.hide()}))}));var l=this.group;l.on("playPauseBtn:click",(function(){t.isPlay=!t.isPlay,t.changePlayStatus()})),l.on("nextStepBtn:click",(function(){t.updateStartEnd(1)})),l.on("preStepBtn:click",(function(){t.updateStartEnd(-1)})),l.on("timebarConfigChanged",(function(e){e.type;var n=e.speed;t.currentSpeed=n}))},t.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timebarstartplay",null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit("timebarendplay",null))},t.prototype.startPlay=function(){var t=this;return"undefined"!=typeof window?window.requestAnimationFrame((function(){var e=t.currentSpeed;t.frameCount%(60/e)==0&&(t.frameCount=0,t.updateStartEnd(1)),t.frameCount++,t.isPlay&&(t.playHandler=t.startPlay())})):void 0},t.prototype.updateStartEnd=function(t){var e=this,n=this.tickRects,r=n.length,i=this.unselectedTickStyle,o=this.selectedTickStyle,a=e.endTickRectId;if(t>0?e.endTickRectId++:(n[e.endTickRectId].rect.attr(i),e.endTickRectId--),a!==e.startTickRectId)e.endTickRectId<e.startTickRectId&&(e.startTickRectId=e.endTickRectId);else{for(var s=e.startTickRectId;s<=e.endTickRectId-1;s++)n[s].rect.attr(i);e.startTickRectId=e.endTickRectId}if(n[e.endTickRectId]){n[e.endTickRectId].rect.attr(o);var l=e.startTickRectId/r,u=e.endTickRectId/r;this.graph.emit("valuechange",{value:[l,u]})}},t.prototype.destory=function(){this.graph.off("valuechange");var t=this.sliceGroup;t.off("click"),t.off("dragstart"),t.off("dragover"),t.off("drop"),this.tickRects.forEach((function(t){var e=t.pickRect;e.off("mouseenter"),e.off("mouseleave")})),this.tickRects.length=0,t.off("playPauseBtn:click"),t.off("nextStepBtn:click"),t.off("preStepBtn:click"),t.off("timebarConfigChanged"),this.sliceGroup.destroy()},t}(),vY=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mY=function(){return(mY=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},yY=function(t){function e(e){return t.call(this,e)||this}return vY(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1}},e.prototype.initContainer=function(){var t,e,n=this.get("graph"),r=this._cfgs,i=r.width,o=r.height,a=this.get("className")||"g6-component-timebar",s=this.get("container"),l=this.get("graph").get("container");s?(zs(s)&&(s=document.getElementById(s)),t=s):mw(t=fw("<div class='"+a+"'></div>"),{position:"relative"}),l.appendChild(t),this.set("timeBarContainer",t),e="SVG"===n.get("renderer")?new Cx({container:t,width:i,height:o}):new Rb({container:t,width:i,height:o}),this.set("canvas",e)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas").addGroup({name:"timebar-group"});this.set("timeBarGroup",t),this.renderTrend(),this.initEvent();var e="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",e)},e.prototype.renderTrend=function(){var t=this._cfgs,e=t.width,n=t.x,r=t.y,i=t.padding,o=t.type,a=t.trend,s=t.slider,l=t.controllerCfg,u=t.textStyle,c=t.tick,d=t.backgroundStyle,h=t.foregroundStyle,f=a.data,p=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(a,["data"]),g=e-2*i,v="trend"===o?26:4,m=this.get("graph"),y=this.get("timeBarGroup"),b=this.get("canvas"),x=null;"trend"===o||"simple"===o?x=new cY(mY(mY({graph:m,canvas:b,group:y,type:o,x:n+i,y:"trend"===o?r+i:r+i+15,width:g,height:v,padding:i,backgroundStyle:d,foregroundStyle:h,trendCfg:mY(mY({},p),{data:f.map((function(t){return t.value}))})},s),{tick:{ticks:f,tickLabelFormatter:c.tickLabelFormatter,tickLabelStyle:c.tickLabelStyle,tickLineStyle:c.tickLineStyle},handlerStyle:mY(mY({},s.handlerStyle),{height:s.height||v}),controllerCfg:l,textStyle:u})):"tick"===o&&(x=new gY(mY({graph:m,canvas:b,group:y,x:n+i,y:r+i},c))),this.set("timebar",x)},e.prototype.filterData=function(t){var e,n=t.value,r=null,i=this._cfgs.type;if("trend"===i||"simple"===i?r=this._cfgs.trend.data:"tick"===i&&(r=this._cfgs.tick.data),r&&0!==r.length){var o=this.get("rangeChange"),a=this.get("graph"),s=Math.round(r.length*n[0]),l=Math.round(r.length*n[1]);l=l>=r.length?r.length-1:l,s=s>=r.length?r.length-1:s;var u=null===(e=this._cfgs.tick)||void 0===e?void 0:e.tickLabelFormatter,c=u?u(r[s]):r[s].date,d=u?u(r[l]):r[l].date;if("tick"!==i)this.get("timebar").setText(c,d);if(o)o(a,c,d);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&0===this.cacheGraphData.nodes.length)&&(this.cacheGraphData=a.get("data"));var h=this.cacheGraphData.nodes.filter((function(t){return t.date>=r[s].date&&t.date<=r[l].date})),f=h.map((function(t){return t.id})),p=[];this.cacheGraphData.edges&&(p=this.cacheGraphData.edges.filter((function(t){return f.includes(t.source)&&f.includes(t.target)})),this.get("filterEdge")&&(p=p.filter((function(t){return t.date>=r[s].date&&t.date<=r[l].date})))),a.changeData({nodes:h,edges:p})}}else console.warn("请配置 TimeBar 组件的数据")},e.prototype.initEvent=function(){var t=this,e=0,n=0,r=this._cfgs.type;r&&"trend"!==r&&"simple"!==r?"tick"===r&&(e=this._cfgs.tick.start,n=this._cfgs.tick.end):(e=this._cfgs.slider.start,n=this._cfgs.slider.end);var i=this.get("graph");i.on("afterrender",(function(r){t.filterData({value:[e,n]})})),i.on("valuechange",Yl((function(e){t.filterData(e)}),200,{trailing:!0,leading:!0}))},e.prototype.destroy=function(){var e=this.get("timebar");e&&e.destory&&e.destory(),t.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var r=this.get("container");r||(r=this.get("graph").get("container")),zs(r)&&(r=document.getElementById(r)),r.removeChild(n)}},e}(PV),bY=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xY=zm.applyMatrix;var wY=function(t){function e(e){return t.call(this,e)||this}return bY(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,e=this._cfgs,n=e.graph;if(!this.destroyed){var r=this.get("container");zs(r)&&(r=document.getElementById(r));var i=fw("<div class="+e.viewportClassName+"\n      style='position:absolute;\n        left:0;\n        top:0;\n        box-sizing:border-box;\n        border: 2px solid #1980ff'>\n      </div>"),o=0,a=0,s=!1,l=0,u=0,c=0,d=0,h=0,f=0;r.addEventListener("mousedown",(function(r){if(e.refresh=!1,r.target===i){var l=i.style;c=parseInt(l.width,10),d=parseInt(l.height,10);var u=t.get("width"),p=t.get("height");c>u||d>p||(f=n.getZoom(),h=t.get("ratio"),s=!0,o=r.clientX,a=r.clientY)}}),!1),r.addEventListener("mousemove",(function(e){if(s&&!vs(e.clientX)&&!vs(e.clientY)){var r=t.get("width"),p=t.get("height"),g=i.style;l=parseInt(g.left,10),u=parseInt(g.top,10),c=parseInt(g.width,10),d=parseInt(g.height,10);var v=o-e.clientX,m=a-e.clientY;l-v<0?v=l:l-v+c>=r&&(v=0),u-m<0?m=u:u-m+d>=p&&(m=0),mw(i,{left:(l-=v)+"px",top:(u-=m)+"px"}),n.translate(v*f/h,m*f/h),o=e.clientX,a=e.clientY}}),!1),r.addEventListener("mouseleave",(function(){s=!1,e.refresh=!0}),!1),r.addEventListener("mouseup",(function(){s=!1,e.refresh=!0}),!1),this.set("viewport",i),r.appendChild(i)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("width"),n=this.get("height"),r=this.get("graph"),i=r.get("width"),o=i/r.get("height"),a=r.getGroup(),s=a.getCanvasBBox(),l=[(s.minX+s.maxX)/2,(s.minY+s.maxY)/2],u=[s.maxX-s.minX,s.maxY-s.minY],c={centerX:l[0],centerY:l[1],width:0,height:0,minX:0,minY:0};s[0]/s[1]>o?(c.width=u[0],c.height=c.width/o):(c.height=u[1],c.width=c.height*o),c.minX=l[0]-c.width/2,c.minY=l[1]-c.height/2;var d=a.getMatrix();d||(d=[1,0,0,0,1,0,0,0,1]);var h=su([1,0,0,0,1,0,0,0,1],d),f=xY({x:c.minX,y:c.minY},h),p=r.getCanvasByPoint(f.x,f.y),g=this.get("viewport");g||this.initViewport();var v=i/c.width,m=v*e,y=v*n,b=e*-p.x/c.width,x=n*-p.y/c.height,w=b+m,C=x+y;b<0&&(m+=b,b=0),w>e&&(m-=w-e),x<0&&(y+=x,x=0),C>n&&(y-=C-n),this.set("ratio",t),mw(g,{left:b+"px",top:x+"px",width:m+"px",height:y+"px"})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,e=t.get("graph"),n=e.get("width"),r=e.get("height")/n,i=t.get("className"),o=t.get("container"),a=t.get("width"),s=t.get("height");a||s||(a=200),a?(s=r*a,t.set("height",s)):(a=1/r*s,t.set("width",a));var l=fw("<div class='"+i+"' style='width: "+a+"px; height: "+s+"px; overflow: hidden; position: relative;'></div>");zs(o)&&(o=document.getElementById(o)),o?o.appendChild(l):e.get("container").appendChild(l),t.set("container",l);var u=fw('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');l.appendChild(u);var c=fw('<span style="display: table-cell; vertical-align: middle; "></span>');u.appendChild(c),t.set("containerDOM",u),t.set("containerSpan",c);var d=fw('<img alt="" src="'+this.get("graphImg")+'" style="display: inline-block; user-select: none;" draggable="false" />');t.set("imgDOM",d),t.updateImgSize(),c.appendChild(d),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,e=t.get("imgDOM"),n=t.get("width"),r=t.get("height");e.onload=function(){var t=function(t,e){var n,r;if(t.naturalWidth)n=t.naturalWidth,r=t.naturalHeight;else{var i=new Image;i.src=t.src,i.onload=function(){e&&e(i.width,i.height)}}return[n,r]}(e);t[0]>t[1]?e.width=n:e.height=r}},e.prototype.updateCanvas=function(){if(this.get("refresh")){var t=this.get("graph");if(!t.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var e=this.get("width")/t.get("canvas").getCanvasBBox().width;this.set("ratio",e),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var e=this;e.get("imgDOM").remove(),e.set("graphImg",t);var n=fw('<img alt="" src="'+t+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');e.set("imgDOM",n),n.src=t,e.updateImgSize(),e.get("containerSpan").appendChild(n),e.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(PV),CY=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),SY=function(){return(SY=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},kY=zm.distance,EY={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},MY=function(t){function e(e){return t.call(this,e)||this}return CY(e,t),e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:Pl(EY),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"}}return t},e.prototype.init=function(){var t=this,e=t.get("showLabel"),n="node"===e||"both"===e,r="edge"===e||"both"===e;t.set("showNodeLabel",n),t.set("showEdgeLabel",r),t.get("shouldShow")||t.set("shouldShow",(function(){return!0}))},e.prototype.createDelegate=function(t){var e=this,n=e.get("delegate");n&&!n.destroyed||(e.filter(t),(n=e.get("delegate")).on("dragstart",(function(t){})),n.on("drag",(function(t){e.filter(t)})),"wheel"===this.get("scaleRBy")&&n.on("mousewheel",(function(t){e.scaleRByWheel(t)})))},e.prototype.scaleRByWheel=function(t){var e=this;if(t&&t.originalEvent){t.preventDefault&&t.preventDefault();var n,r=e.get("graph"),i=e.get("delegate");(i?{x:i.attr("x"),y:i.attr("y")}:void 0)||r.getPointByClient(t.clientX,t.clientY),n=t.originalEvent.wheelDelta<0?.95:1/.95;var o=e.get("maxR"),a=e.get("minR"),s=e.get("r");(s>(o||r.get("height"))&&n>1||s<(a||.05*r.get("height"))&&n<1)&&(n=1),s*=n,e.set("r",s),e.filter(t)}},e.prototype.filter=function(t){var e=this,n=e.get("graph"),r=n.getNodes(),i={},o=e.get("r"),a=e.get("type"),s={x:t.x,y:t.y};e.updateDelegate(s,o);var l=e.get("shouldShow"),u=e.get("vShapes");u&&u.forEach((function(t){t.remove(),t.destroy()})),u=[],r.forEach((function(t){var e=t.getModel(),n=e.x,r=e.y;kY({x:n,y:r},s)<o&&(i[e.id]=t)}));var c=n.getEdges(),d=[];c.forEach((function(t){var e=t.getModel(),n=e.source,r=e.target;l(e)&&("only-source"===a||"one"===a?i[n]&&!i[r]&&d.push(t):"only-target"===a||"one"===a?i[r]&&!i[n]&&d.push(t):"both"===a&&i[n]&&i[r]&&d.push(t))}));var h=e.get("showNodeLabel"),f=e.get("showEdgelabel"),p=n.get("group");d.forEach((function(t){t.get("group").get("children").forEach((function(t){var e=t.get("type"),n=p.addShape(e,{attrs:t.attr()});u.push(n),h&&"text"===e&&n.set("visible",!0)}))})),Object.keys(i).forEach((function(t){var e=i[t].get("group").clone();if(p.add(e),u.push(e),f)for(var n=e.get("children"),r=0;r<n.length;r++){var o=n[r];"text"===o.get("type")&&o.set("visible",!0)}})),e.set("vShapes",u)},e.prototype.updateParams=function(t){var e=this,n=t.r,r=t.trigger,i=t.minR,o=t.maxR,a=t.scaleRBy,s=t.showLabel,l=t.shouldShow;if(isNaN(t.r)||e.set("r",n),isNaN(o)||e.set("maxR",o),isNaN(i)||e.set("minR",i),"mousemove"!==r&&"click"!==r||e.set("trigger",r),"wheel"===a||"unset"===a){e.set("scaleRBy",a),e.get("delegate").remove(),e.get("delegate").destroy();var u=e.get("dPercentText");u&&(u.remove(),u.destroy())}"node"!==s&&"both"!==s||e.set("showNodeLabel",!0),"edge"!==s&&"both"!==s||e.set("showEdgeLabel",!0),l&&e.set("shouldShow",l)},e.prototype.updateDelegate=function(t,e){var n=this,r=n.get("graph"),i=n.get("delegate");if(!i||i.destroyed){var o=r.get("group"),a=n.get("delegateStyle")||EY;i=o.addShape("circle",{attrs:SY({r:e,x:t.x,y:t.y},a),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&"wheel"===this.get("scaleRBy")&&i.on("mousewheel",(function(t){n.scaleRByWheel(t)}))}else i.attr({x:t.x,y:t.y,r:e});n.set("delegate",i)},e.prototype.clear=function(){var t=this,e=t.get("vShapes");e&&e.forEach((function(t){t.remove(),t.destroy()})),e=[],t.set("vShapes",e);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(PV),AY=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_Y=zm.pointLineDistance,TY={stroke:"#FA8C16",lineWidth:1},PY=function(t){function e(e){return t.call(this,e)||this}return AY(e,t),e.prototype.getDefaultCfgs=function(){return{line:TY,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var e=t.item,n=(e.get("delegateShape")||e).getBBox(),r=e.getModel(),i=r.x-n.x,o=r.y-n.y;this.show({x:n.minX+i,y:n.minY+o},{width:n.width,height:n.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,e=t.horizontalLines,n=t.verticalLines,r=t.itemAlignType;this.get("graph").getNodes().forEach((function(t){var i=t.getBBox(),o=t.get("id");!0===r||"horizontal"===r?(e[o+"tltr"]=[i.minX,i.minY,i.maxX,i.minY,t],e[o+"lcrc"]=[i.minX,i.centerY,i.maxX,i.centerY,t],e[o+"blbr"]=[i.minX,i.maxY,i.maxX,i.maxY,t]):"center"===r&&(e[o+"lcrc"]=[i.minX,i.centerY,i.maxX,i.centerY,t]),!0===r||"vertical"===r?(n[o+"tlbl"]=[i.minX,i.minY,i.minX,i.maxY,t],n[o+"tcbc"]=[i.centerX,i.minY,i.centerX,i.maxY,t],n[o+"trbr"]=[i.maxX,i.minY,i.maxX,i.maxY,t]):"center"===r&&(n[o+"tcbc"]=[i.centerX,i.minY,i.centerX,i.maxY,t])}))},e.prototype.show=function(t,e){var n=Tl({},t);return this.itemAlign(t,e,n),t},e.prototype.itemAlign=function(t,e,n){var r=this,i=this._cfgs,o=i.horizontalLines,a=i.verticalLines,s=i.tolerance,l={x:n.x+e.width/2,y:n.y},u={x:n.x+e.width/2,y:n.y+e.height/2},c={x:n.x+e.width/2,y:n.y+e.height},d={x:n.x,y:n.y+e.height/2},h={x:n.x+e.width,y:n.y+e.height/2},f=[],p=[],g=null;if(this.clearAlignLine(),bs(o,(function(t){t[4].isVisible&&(f.push(r.getLineDisObject(t,l)),f.push(r.getLineDisObject(t,u)),f.push(r.getLineDisObject(t,c)))})),bs(a,(function(t){t[4].isVisible&&(p.push(r.getLineDisObject(t,d)),p.push(r.getLineDisObject(t,u)),p.push(r.getLineDisObject(t,h)))})),f.sort((function(t,e){return t.dis-e.dis})),p.sort((function(t,e){return t.dis-e.dis})),0!==f.length&&f[0].dis<s){t.y=f[0].line[1]-f[0].point.y+n.y,g={type:"item",horizontals:[f[0]]};for(var v=1;v<3;v++)f[0].dis===f[v].dis&&g.horizontals.push(f[v])}if(0!==p.length&&p[0].dis<s){t.x=p[0].line[0]-p[0].point.x+n.x,g?g.verticals=[p[0]]:g={type:"item",verticals:[p[0]]};for(v=1;v<3;v++)p[0].dis===p[v].dis&&g.verticals.push(p[v])}g&&(g.bbox=e,this.addAlignLine(g))},e.prototype.addAlignLine=function(t){var e=t.bbox,n=t.type,r=t.horizontals,i=t.verticals,o=this._cfgs,a=o.line,s=o.alignLines,l=this.get("graph").get("group");"item"===n&&(r&&bs(r,(function(t){var n,r,i=t.line,o=t.point,u=(i[0]+i[2])/2;o.x<u?(n=o.x-e.width/2,r=Math.max(i[0],i[2])):(n=o.x+e.width/2,r=Math.min(i[0],i[2]));var c=Tl({x1:n,y1:i[1],x2:r,y2:i[1]},a),d=l.addShape("line",{attrs:c,capture:!1});s.push(d)})),i&&bs(i,(function(t){var n,r,i=t.line,o=t.point,u=(i[1]+i[3])/2;o.y<u?(n=o.y-e.height/2,r=Math.max(i[1],i[3])):(n=o.y+e.height/2,r=Math.min(i[1],i[3]));var c=Tl({x1:i[0],y1:n,x2:i[0],y2:r},a),d=l.addShape("line",{attrs:c,capture:!1});s.push(d)})))},e.prototype.getLineDisObject=function(t,e){return{line:t,point:e,dis:_Y(t,e)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;bs(t,(function(t){t.remove()})),t.length=0},e.prototype.destory=function(){var t=this._cfgs,e=t.horizontalLines,n=t.verticalLines;this.get("graph").getNodes().forEach((function(t){var r=t.get("id");delete e[r+"tltr"],delete e[r+"lcrc"],delete e[r+"blbr"],delete n[r+"tlbl"],delete n[r+"tcbc"],delete n[r+"trbr"]})),this.clearAlignLine()},e}(PV),IY=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),DY=function(){return(DY=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},OY=["click","mouseenter"],RY={PluginBase:PV,Menu:jV,Grid:OV,Minimap:qV,Bundling:JV,ToolBar:oW,Tooltip:sW,Fisheye:rW,TimeBar:yY,ImageMinimap:wY,EdgeFilterLens:MY,SnapLine:PY,Legend:function(t){function e(e){return t.call(this,e)||this}return IY(e,t),e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{};t.multiple&&"mouseenter"===t.trigger&&this.set("multiple",!1);var e=this.get("align");if(!e){var n=this.get("position").split("-");n.includes("left")&&(e="left"),e=n.includes("right")?"right":"center",this.set("align",e)}var r=this.get("graph").get("container"),i=fw("<div class='g6-legend-container' style=\"position: absolute;\"></div>");r.appendChild(i),this.set("container",i);var o=this.render();mw(i,this.getContainerPos(o)),this.bindEvents()},e.prototype.getContainerPos=function(t){void 0===t&&(t=[0,0]);var e=this.get("graph"),n=this.get("offsetX"),r=this.get("offsetY"),i=this.get("margin"),o=this.get("position").split("-"),a={top:0,right:1,bottom:2,left:3},s={left:(e.getWidth()-t[0])/2+0,top:(e.getHeight()-t[1])/2+0};return o.forEach((function(n){var r=i[a[n]],o=n;switch(n){case"top":case"left":r+=0;break;case"bottom":r=e.getHeight()-t[1]-r+0,o="top";break;default:r=e.getWidth()-t[0]-r+0,o="left"}s[o]=r})),s.top+=r+e.getContainer().offsetTop,s.left+=n+e.getContainer().offsetLeft,Object.keys(s).forEach((function(t){s[t]=s[t]+"px"})),s},e.prototype.bindEvents=function(){var t=this,e=t.get("filter");if(e&&e.enable){var n=e.trigger||"click";OY.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var r=t.get("legendCanvas");"mouseenter"===n?(r.on("node-container:mouseenter",(function(e){return t.filterData(e)})),r.on("node-container:mouseleave",(function(e){t.clearFilter(),t.clearActiveLegend()}))):(r.on("node-container:click",(function(e){return t.filterData(e)})),r.on("click",(function(e){e.target&&e.target.isCanvas&&e.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())})))}},e.prototype.changeData=function(t){this.set("data",t);var e=this.render();mw(this.get("container"),this.getContainerPos(e))},e.prototype.activateLegend=function(t){var e=this.get("filter");(null==e?void 0:e.multiple)||this.clearActiveLegend();var n=t.get("parent");n.get("active")?(n.set("active",!1),this.findLegendItemsByState("active").length&&n.set("inactive",!0)):(n.set("inactive",!1),n.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach((function(t){t.set("inactive",!0)})):this.clearActiveLegend();var r=(null==e?void 0:e.lengedStateStyles)||{},i=(null==r?void 0:r.inactive)||{opacity:.5,"text-shape":{opacity:.5}},o=i["text-shape"]||{};this.findLegendItemsByState("inactive").forEach((function(t){var e=t.get("children"),n=e[0],r=e[1];n.attr(DY(DY({},n.get("oriAttrs")),i)),r.attr(DY(DY({},r.get("oriAttrs")),o))}));var a=(null==r?void 0:r.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},s=a["text-shape"]||{};this.findLegendItemsByState("active").forEach((function(t){var e=t.get("children"),n=e[0],r=e[1];n.attr(DY(DY({},n.get("oriAttrs")),a)),r.attr(DY(DY({},r.get("oriAttrs")),s))}))},e.prototype.findLegendItemsByState=function(t,e,n){void 0===e&&(e="all"),void 0===n&&(n=!0);var r=this.get("legendCanvas").find((function(t){return"root"===t.get("name")})),i=r.find((function(t){return"node-group"===t.get("name")})),o=r.find((function(t){return"edge-group"===t.get("name")}));return"node"===e?i.get("children").filter((function(e){return!!e.get(t)===n})):"edge"===e?o.get("children").filter((function(e){return!!e.get(t)===n})):i.get("children").filter((function(e){return!!e.get(t)===n})).concat(o.get("children").filter((function(e){return!!e.get(t)===n})))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas").find((function(t){return"root"===t.get("name")}));[t.find((function(t){return"node-group"===t.get("name")})),t.find((function(t){return"edge-group"===t.get("name")}))].forEach((function(t){t.get("children").forEach((function(t){t.set("active",!1),t.set("inactive",!1);var e=t.get("children"),n=e[0],r=e[1];n.attr(n.get("oriAttrs")),r.attr(r.get("oriAttrs"))}))}))},e.prototype.filterData=function(t){var e=this.get("filter"),n=null==e?void 0:e.filterFunctions;if(e&&n){var r=this.get("legendCanvas"),i=this.get("graph"),o=e.graphActiveState||"active",a=e.graphInactiveState||"inactive",s=e.multiple;this.clearFilter(),s||this.clearActiveLegend(),this.activateLegend(t.target);var l=r.find((function(t){return"root"===t.get("name")})),u=l.find((function(t){return"node-group"===t.get("name")})),c=l.find((function(t){return"edge-group"===t.get("name")})),d=u.get("children").filter((function(t){return t.get("active")})),h=c.get("children").filter((function(t){return t.get("active")})),f=0,p=["getNodes","getEdges"];p.forEach((function(t){i[t]().forEach((function(e){var r=!1;("getNodes"===t?d:h).forEach((function(t){var i=n[t.get("id")];r=r||i(e.getModel())})),r?(i.setItemState(e,a,!1),i.setItemState(e,o,!0),f++):(i.setItemState(e,o,!1),i.setItemState(e,a,!0))}))})),f||p.forEach((function(t){i[t]().forEach((function(t){i.clearItemStates(t,[a])}))}))}},e.prototype.clearFilter=function(){var t=this.get("graph"),e=this.get("filter");if(e){var n=e.graphActiveState||"active",r=e.graphInactiveState||"inactive";t.getNodes().forEach((function(e){t.clearItemStates(e,[n,r])})),t.getEdges().forEach((function(e){t.clearItemStates(e,[n,r])}))}},e.prototype.render=function(){var t=this;this.processData();var e=this.get("legendCanvas");if(!e){var n=(e=new Rb({container:this.get("container"),width:200,height:200})).addGroup({name:"root"});n.addGroup({name:"node-group"}),n.addGroup({name:"edge-group"}),this.set("legendCanvas",e)}var r=e.find((function(t){return"root"===t.get("name")})),i=r.find((function(t){return"node-group"===t.get("name")})),o=r.find((function(t){return"edge-group"===t.get("name")})),a=this.get("itemsData"),s=[i,o];["nodes","edges"].forEach((function(e,n){a[e].forEach((function(r){var i,o,a=s[n].addGroup({id:r.id,name:"node-container"}),l=r.type,u=t.getShapeSize(r),c=u.width,d=u.height,h=u.r,f=t.getStyle(e.substr(0,4),r);switch(r.type){case"circle":o={r:h,x:0,y:0};break;case"rect":o={width:c,height:d,x:-c/2,y:-d/2};break;case"ellipse":o={r1:c,r2:d,x:0,y:0};break;case"line":o={x1:-c/2,y1:0,x2:c/2,y2:0},l="line";break;case"quadratic":o={path:[["M",-c/2,0],["Q",0,c/2,c/2,0]]},l="path";break;case"cubic":o={path:[["M",-c/2,0],["C",-c/6,c/2,c/6,-c/2,c/2,0]]},l="path";break;default:o={r:h,x:0,y:0}}var p=a.addShape(l,{attrs:DY(DY({},o),f),name:r.type+"-node-keyShape",oriAttrs:DY({opacity:1},f)});if(r.label){var g=p.getBBox(),v=(null===(i=r.labelCfg)||void 0===i?void 0:i.style)||{},m=DY({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},v);a.addShape("text",{attrs:DY({x:g.maxX+4,y:0,text:r.label},m),className:"legend-label",name:r.type+"-node-text",oriAttrs:m})}}))}));var l,u=this.get("padding"),c=r.find((function(t){return"title-container"===t.get("name")})),d={height:0,maxY:0,width:0};if(this.get("title")){c||(c=r.addGroup({name:"title-container"}));var h={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:u[0]},f=this.get("titleConfig")||{},p=Object.assign(h,f.style||{});l=c.addShape("text",{attrs:DY({text:this.get("title")},p)}),d=c.getCanvasBBox(),c.setMatrix([1,0,0,0,1,0,f.offsetX,f.offsetY,1])}this.layoutItems();var g=r.getCanvasBBox(),v=i.getCanvasBBox(),m=v.minX<0?Math.abs(v.minX)+u[3]:u[3],y=d.maxY<v.minY?Math.abs(d.maxY-v.minY)+u[0]:d.maxY+u[0],b=[1,0,0,0,1,0,m,y,1];i.setMatrix(b);var x=[(g=r.getCanvasBBox()).minX+g.width+u[1],g.minY+g.height+u[2]];if(l){f=DY({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));d=c.getCanvasBBox();var w=c.getMatrix()||[1,0,0,0,1,0,0,0,1];"center"===f.position?w[6]=x[0]/2+f.offsetX:"right"===f.position?(w[6]=x[0]-u[3]+f.offsetX,l.attr({textAlign:"right"})):(w[6]=u[3]+f.offsetX,l.attr({textAlign:"left"})),c.setMatrix(w),d=c.getCanvasBBox(),b=[1,0,0,0,1,0,m=v.minX<0?Math.abs(v.minX)+u[3]:u[3],y=v.minY<d.maxY?Math.abs(d.maxY-v.minY)+u[0]:d.maxY+u[0],1],i.setMatrix(b);var C=[1,0,0,0,1,0,m,y,1];"vertical"===this.get("layout")?C[6]+=v.maxX+this.get("horiSep"):C[7]+=v.maxY+this.get("vertiSep"),o.setMatrix(C)}else{v=i.getCanvasBBox();var S=[1,0,0,0,1,0,0,0,1];"vertical"===this.get("layout")?S[6]+=b[6]+v.maxX+this.get("horiSep"):S[7]+=b[7]+v.maxY+this.get("vertiSep"),o.setMatrix(S)}g=r.getCanvasBBox(),v=i.getCanvasBBox(),b=i.getMatrix()||[1,0,0,0,1,0,0,0,1];var k=o.getMatrix()||[1,0,0,0,1,0,0,0,1],E=o.getCanvasBBox();x=[Math.max(v.width+b[6],E.width+k[6])+u[1],Math.max(v.height+b[7],E.height+k[7])+u[2]],e.changeSize(x[0],x[1]);var M=this.get("containerStyle"),A=r.getMatrix()||[1,0,0,0,1,0,0,0,1],_=zm.invertMatrix({x:0,y:0},A);return r.addShape("rect",{attrs:DY({x:_.x+(M.lineWidth||1),y:_.y+(M.lineWidth||1),width:x[0]-2*(M.lineWidth||1),height:x[1]-2*(M.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},M),name:"legend-back-rect",capture:!1}).toBack(),x},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),e=this.get("horiSep"),n=this.get("vertiSep"),r=this.get("layout"),i=this.get("align"),o=[0,0],a=t.find((function(t){return"root"===t.get("name")})),s=a.find((function(t){return"node-group"===t.get("name")})),l=a.find((function(t){return"edge-group"===t.get("name")})),u={min:0,max:-1/0};s.get("children").forEach((function(t,i){0===i&&(u.min=o[0]);var a=t.get("children")[0],s=t.getCanvasBBox(),l=a.getBBox(),c=l.width,d=(l.height,0),h=0;"vertical"===r?(d=o[1],h=o[0]+c/2,o[0]=h+s.height+n,s.maxX):(d=o[0]+c/2,h=o[1],o[0]=d+s.width+e,s.maxY),o[0]>u.max&&(u.max=o[0]),t.setMatrix([1,0,0,0,1,0,d,h,1])}));var c=u.max-u.min,d={min:0,max:-1/0},h=s.getCanvasBBox();o[0]=0,o[1]="vertical"===r?h.maxX+e:h.maxY+n,l.get("children").forEach((function(t,i){0===i&&(d.min=o[0]);var a=t.get("children")[0],s=t.getCanvasBBox(),l=a.getBBox(),u=l.width,c=l.height,h=0,f=0;"vertical"===r?(h=o[1],f=o[0],o[0]=f+s.height+n,t.setMatrix([1,0,0,0,1,0,0,f+c/2,1])):(h=o[0],f=o[1],o[0]=h+s.width+e,t.setMatrix([1,0,0,0,1,0,h+u/2,0,1])),o[0]>d.max&&(d.max=o[0])}));var f=d.max-d.min;if(i&&""!==i&&"left"!==i){var p=c-f,g="center"===i?Math.abs(p)/2:Math.abs(p);(p<0?s:l).get("children").forEach((function(t){var e=t.getMatrix()||[1,0,0,0,1,0,0,0,1];"vertical"===r?e[7]+=g:e[6]+=g,t.setMatrix(e)}))}},e.prototype.processData=function(){var t=this.get("data"),e={nodes:[],edges:[]};t.nodes&&(t.nodes.sort((function(t,e){return t.order-e.order})),t.nodes.forEach((function(t){var n,r,i,o,a,s=t.size||[(null===(n=t.style)||void 0===n?void 0:n.width)||(null===(r=t.style)||void 0===r?void 0:r.r)||8,(null===(i=t.style)||void 0===i?void 0:i.height)||(null===(o=t.style)||void 0===o?void 0:o.r)||8],l=(null===(a=t.labelCfg)||void 0===a?void 0:a.style)||{};e.nodes.push({id:t.id||Kl(),type:t.type||"circle",style:DY({},t.style),order:t.order,label:t.label,itemType:"node",size:s,labelCfg:{position:"right",style:DY({fontFamily:"Arial"},l)}})}))),t.edges&&(t.edges.sort((function(t,e){return t.order-e.order})),t.edges.forEach((function(t){var n,r,i=t.type||"line";"cubic-horizontal"===t.type&&(i="cubic");var o=(null===(n=t.labelCfg)||void 0===n?void 0:n.style)||{},a=t.size||[(null===(r=t.style)||void 0===r?void 0:r.width)||8,1];e.edges.push({id:t.id||Kl(),type:i,size:a,style:DY({lineWidth:ms(a)?a[1]:1},t.style),order:t.order,label:t.label,itemType:"edge",labelCfg:{position:"right",style:DY({fontFamily:"Arial"},o)}})}))),this.set("itemsData",e)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var e=this.get(t);if(el(e))this.set(t,[e,e,e,e]);else if(ms(e))switch(e.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[e[0],e[0],e[0],e[0]]);break;case 2:this.set(t,[e[0],e[1],e[0],e[1]]);break;case 3:this.set(t,[e[0],e[1],e[2],e[1]])}return this.get(t)},e.prototype.getShapeSize=function(t){var e,n,r;return t.size&&(ms(t.size)?(e=t.size[0],n=t.size[1]||t.size[0],r=t.size[0]/2):el(t.size)&&(e=t.size,n=t.size,r=t.size/2)),t.style&&(t.style.width&&(e=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(r=t.style.r)),r||(r=5),e||(e=r),n||(n=r),{width:e,height:n,r:r}},e.prototype.getStyle=function(t,e){return DY(DY({},"node"===t?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1}),e.style||{})},e.prototype.destroy=function(){var t=this.get("graph").get("container"),e=this.get("container");t.removeChild(e)},e}(PV)};Um("circle",{options:{size:Hm.defaultNode.size,style:{x:0,y:0,stroke:Hm.defaultNode.style.stroke,fill:Hm.defaultNode.style.fill,lineWidth:Hm.defaultNode.style.lineWidth},labelCfg:{style:{fill:Hm.nodeLabel.style.fill,fontSize:Hm.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Hm.defaultNode.linkPoints.size,lineWidth:Hm.defaultNode.linkPoints.lineWidth,fill:Hm.defaultNode.linkPoints.fill,stroke:Hm.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Za({},Hm.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=this.getOptions(t).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=Rl({},r,t.icon),a=e.addShape("circle",{attrs:i,className:this.type+"-keyShape",draggable:!0}),s=o.width,l=o.height,u=o.show,c=o.text;return u&&(c?e.addShape("text",{attrs:Za({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.addShape("image",{attrs:Za({x:-s/2,y:-l/2},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(t,e),a},drawLinkPoints:function(t,e){var n=this.getOptions(t).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,u=r.r,c=Qa(r,["top","left","right","bottom","size","r"]),d=this.getSize(t)[0]/2;o&&e.addShape("circle",{attrs:Za(Za({},c),{x:-d,y:0,r:l/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:Za(Za({},c),{x:d,y:0,r:l/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&e.addShape("circle",{attrs:Za(Za({},c),{x:0,y:-d,r:l/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:Za(Za({},c),{x:0,y:d,r:l/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},r=Rl({},e,n),i=this.getSize(t)[0]/2;return Za({x:0,y:0,r:i},r)},update:function(t,e){var n=e.getContainer(),r=this.getSize(t),i={stroke:t.color,r:r[0]/2},o=e.get("keyShape"),a=Rl({},o.attr(),i,t.style);this.updateShape(t,e,a,!0),this.updateLinkPoints(t,n)}},"single-node"),Um("rect",{options:{size:[100,30],style:{radius:0,stroke:Hm.defaultNode.style.stroke,fill:Hm.defaultNode.style.fill,lineWidth:Hm.defaultNode.style.lineWidth},labelCfg:{style:{fill:Hm.nodeLabel.style.fill,fontSize:Hm.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Hm.defaultNode.linkPoints.size,lineWidth:Hm.defaultNode.linkPoints.lineWidth,fill:Hm.defaultNode.linkPoints.fill,stroke:Hm.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:Za({},Hm.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t),r=e.addShape("rect",{attrs:n,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawLinkPoints(t,e),r},drawLinkPoints:function(t,e){var n=this.getOptions(t).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,u=r.r,c=Qa(r,["top","left","right","bottom","size","r"]),d=this.getSize(t),h=d[0],f=d[1];o&&e.addShape("circle",{attrs:Za(Za({},c),{x:-h/2,y:0,r:l/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:Za(Za({},c),{x:h/2,y:0,r:l/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&e.addShape("circle",{attrs:Za(Za({},c),{x:0,y:-f/2,r:l/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:Za(Za({},c),{x:0,y:f/2,r:l/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(t){var e=Tl({},this.getOptions(t).style,{stroke:t.color}),n=this.getSize(t),r=e.width||n[0],i=e.height||n[1];return Za({x:-r/2,y:-i/2,width:r,height:i},e)},update:function(t,e){var n=e.getContainer(),r=this.getOptions({}).style,i=this.getSize(t),o=e.get("keyShape");t.size||(i[0]=o.attr("width")||r.width,i[1]=o.attr("height")||r.height);var a={stroke:t.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]},s=Tl({},r,o.attr(),a);s=Tl(s,t.style),this.updateShape(t,e,s,!1),this.updateLinkPoints(t,n)}},"single-node"),Um("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:Hm.defaultNode.style.stroke,fill:Hm.defaultNode.style.fill,lineWidth:Hm.defaultNode.style.lineWidth},labelCfg:{style:{fill:Hm.nodeLabel.style.fill,fontSize:Hm.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Hm.defaultNode.linkPoints.size,lineWidth:Hm.defaultNode.linkPoints.lineWidth,fill:Hm.defaultNode.linkPoints.fill,stroke:Hm.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Za({},Hm.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(t,e){var n=this.getOptions(t).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=e.addShape("ellipse",{attrs:i,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),a=r.width,s=r.height,l=r.show,u=r.text;return l&&(u?e.addShape("text",{attrs:Za({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.addShape("image",{attrs:Za({x:-a/2,y:-s/2},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=this.getOptions(t).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,u=r.r,c=Qa(r,["top","left","right","bottom","size","r"]),d=this.getSize(t),h=d[0]/2,f=d[1]/2;o&&e.addShape("circle",{attrs:Za(Za({},c),{x:-h,y:0,r:l/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:Za(Za({},c),{x:h,y:0,r:l/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&e.addShape("circle",{attrs:Za(Za({},c),{x:0,y:-f,r:l/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:Za(Za({},c),{x:0,y:f,r:l/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(t){var e=Tl({},this.getOptions(t).style,{stroke:t.color}),n=this.getSize(t),r=n[0]/2,i=n[1]/2;return Za({x:0,y:0,rx:r,ry:i},e)},update:function(t,e){var n=e.getContainer(),r=this.getOptions({}).style,i=this.getSize(t),o={stroke:t.color,rx:i[0]/2,ry:i[1]/2},a=Tl({},r,e.get("keyShape").attr(),o);a=Tl(a,t.style),this.updateShape(t,e,a,!0),this.updateLinkPoints(t,n)}},"single-node"),Um("diamond",{options:{size:[80,80],style:{stroke:Hm.defaultNode.style.stroke,fill:Hm.defaultNode.style.fill,lineWidth:Hm.defaultNode.style.lineWidth},labelCfg:{style:{fill:Hm.nodeLabel.style.fill,fontSize:Hm.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Hm.defaultNode.linkPoints.size,lineWidth:Hm.defaultNode.linkPoints.lineWidth,fill:Hm.defaultNode.linkPoints.fill,stroke:Hm.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Za({},Hm.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(t,e){var n=this.getOptions(t).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=e.addShape("path",{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),a=r.width,s=r.height,l=r.show,u=r.text;return l&&(u?e.addShape("text",{attrs:Za({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.addShape("image",{attrs:Za({x:-a/2,y:-s/2},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=this.getOptions(t).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,u=r.r,c=Qa(r,["top","left","right","bottom","size","r"]),d=this.getSize(t),h=d[0],f=d[1];o&&e.addShape("circle",{attrs:Za(Za({},c),{x:-h/2,y:0,r:l/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:Za(Za({},c),{x:h/2,y:0,r:l/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&e.addShape("circle",{attrs:Za(Za({},c),{x:0,y:-f/2,r:l/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:Za(Za({},c),{x:0,y:f/2,r:l/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getPath:function(t){var e=this.getSize(t),n=e[0],r=e[1];return[["M",0,-r/2],["L",n/2,0],["L",0,r/2],["L",-n/2,0],["Z"]]},getShapeStyle:function(t){var e=Tl({},this.getOptions(t).style,{stroke:t.color}),n=this.getPath(t);return Za({path:n},e)},update:function(t,e){var n=e.getContainer(),r=this.getOptions({}).style,i=this.getPath(t),o={stroke:t.color,path:i},a=Tl({},r,e.get("keyShape").attr(),o);a=Tl(a,t.style),this.updateShape(t,e,a,!0),this.updateLinkPoints(t,n)}},"single-node"),Um("triangle",{options:{size:40,direction:"up",style:{stroke:Hm.defaultNode.style.stroke,fill:Hm.defaultNode.style.fill,lineWidth:Hm.defaultNode.style.lineWidth},labelCfg:{style:{fill:Hm.nodeLabel.style.fill,fontSize:Hm.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Hm.defaultNode.linkPoints.size,lineWidth:Hm.defaultNode.linkPoints.lineWidth,fill:Hm.defaultNode.linkPoints.fill,stroke:Hm.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:Za({},Hm.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(t,e){var n=this.getOptions(t),r=n.icon,i=void 0===r?{}:r,o=n.direction,a=this.getShapeStyle(t),s=t.direction||o,l=e.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),u=i.width,c=i.height,d=i.show,h=i.offset,f=i.text;if(d)if(f)e.addShape("text",{attrs:Za({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});else{var p=-u/2,g=-c/2;"up"!==s&&"down"!==s||(g+=h),"left"!==s&&"right"!==s||(p+=h),e.addShape("image",{attrs:Za({x:p,y:g},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})}return this.drawLinkPoints(t,e),l},drawLinkPoints:function(t,e){var n=this.getOptions(t),r=n.linkPoints,i=void 0===r?{}:r,o=n.direction,a=t.direction||o,s=i.top,l=i.left,u=i.right,c=i.bottom,d=i.size,h=i.r,f=Qa(i,["top","left","right","bottom","size","r"]),p=this.getSize(t)[0];if(l){var g=null,v=p*Math.sin(1/3*Math.PI),m=p*Math.sin(1/3*Math.PI);"up"===a?g=[-m,v]:"down"===a?g=[-m,-v]:"left"===a&&(g=[-m,m-v]),g&&e.addShape("circle",{attrs:Za(Za({},f),{x:g[0],y:g[1],r:d/2||h||5}),className:"link-point-left",name:"link-point-left"})}if(u){var y=null;v=p*Math.sin(1/3*Math.PI),m=p*Math.sin(1/3*Math.PI);"up"===a?y=[m,v]:"down"===a?y=[m,-v]:"right"===a&&(y=[m,m-v]),y&&e.addShape("circle",{attrs:Za(Za({},f),{x:y[0],y:y[1],r:d/2||h||5}),className:"link-point-right",name:"link-point-right"})}if(s){var b=null;v=p*Math.sin(1/3*Math.PI),m=p*Math.sin(1/3*Math.PI);"up"===a?b=[m-v,-v]:"left"===a?b=[m,-v]:"right"===a&&(b=[-m,-v]),b&&e.addShape("circle",{attrs:Za(Za({},f),{x:b[0],y:b[1],r:d/2||h||5}),className:"link-point-top",name:"link-point-top"})}if(c){var x=null;v=p*Math.sin(1/3*Math.PI),m=p*Math.sin(1/3*Math.PI);"down"===a?x=[-m+v,v]:"left"===a?x=[m,v]:"right"===a&&(x=[-m,v]),x&&e.addShape("circle",{attrs:Za(Za({},f),{x:x[0],y:x[1],r:d/2||h||5}),className:"link-point-bottom",name:"link-point-bottom"})}},getPath:function(t){var e=this.getOptions(t).direction,n=t.direction||e,r=this.getSize(t)[0],i=r*Math.sin(1/3*Math.PI),o=r*Math.sin(1/3*Math.PI),a=[["M",-o,i],["L",0,-i],["L",o,i],["Z"]];return"down"===n?a=[["M",-o,-i],["L",o,-i],["L",0,i],["Z"]]:"left"===n?a=[["M",-o,o-i],["L",o,-o],["L",o,o],["Z"]]:"right"===n&&(a=[["M",o,o-i],["L",-o,o],["L",-o,-o],["Z"]]),a},getShapeStyle:function(t){var e=Tl({},this.getOptions(t).style,{stroke:t.color}),n=this.getPath(t);return Za({path:n},e)},update:function(t,e){var n=e.getContainer(),r=this.getOptions({}).style,i=this.getPath(t),o={stroke:t.color,path:i},a=Tl({},r,e.get("keyShape").attr(),o);a=Tl(a,t.style),this.updateShape(t,e,a,!0),this.updateLinkPoints(t,n)},updateLinkPoints:function(t,e){var n=this.getOptions({}),r=n.linkPoints,i=n.direction,o=t.direction||i,a=e.find((function(t){return"link-point-left"===t.get("className")})),s=e.find((function(t){return"link-point-right"===t.get("className")})),l=e.find((function(t){return"link-point-top"===t.get("className")})),u=e.find((function(t){return"link-point-bottom"===t.get("className")})),c=r,d=a||s||l||u;d&&(c=d.attr());var h=Tl({},c,t.linkPoints),f=h.fill,p=h.stroke,g=h.lineWidth,v=h.size/2;v||(v=h.r);var m=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},y=m.left,b=m.right,x=m.top,w=m.bottom,C=this.getSize(t)[0],S={r:v,fill:f,stroke:p,lineWidth:g},k=null,E=C*Math.sin(1/3*Math.PI),M=C*Math.sin(1/3*Math.PI);"up"===o?k=[-M,E]:"down"===o?k=[-M,-E]:"left"===o&&(k=[-M,M-E]),k&&(a?y||void 0===y?a.attr(Za(Za({},S),{x:k[0],y:k[1]})):a.remove():y&&e.addShape("circle",{attrs:Za(Za({},S),{x:k[0],y:k[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}));var A=null;"up"===o?A=[M,E]:"down"===o?A=[M,-E]:"right"===o&&(A=[M,M-E]),A&&(s?b||void 0===b?s.attr(Za(Za({},S),{x:A[0],y:A[1]})):s.remove():b&&e.addShape("circle",{attrs:Za(Za({},S),{x:A[0],y:A[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}));var _=null;"up"===o?_=[M-E,-E]:"left"===o?_=[M,-E]:"right"===o&&(_=[-M,-E]),_&&(l?x||void 0===x?l.attr(Za(Za({},S),{x:_[0],y:_[1]})):l.remove():x&&e.addShape("circle",{attrs:Za(Za({},S),{x:_[0],y:_[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}));var T=null;"down"===o?T=[-M+E,E]:"left"===o?T=[M,E]:"right"===o&&(T=[-M,E]),T&&(u?w||void 0===w?u.attr(Za(Za({},S),{x:T[0],y:T[1]})):u.remove():w&&e.addShape("circle",{attrs:Za(Za({},S),{x:T[0],y:T[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))}},"single-node"),Um("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:Hm.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf"},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(t,e){var n=this.getOptions(t).preRect,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=this.getSize(t),a=o[0],s=o[1],l=e.addShape("rect",{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),u=r.show,c=Qa(r,["show"]);return u&&e.addShape("rect",{attrs:Za({x:-a/2,y:-s/2,height:s},c),className:"pre-rect",name:"pre-rect",draggable:!0}),this.drawLogoIcon(t,e),this.drawStateIcon(t,e),this.drawLinkPoints(t,e),l},drawLogoIcon:function(t,e){var n=this.getOptions(t).logoIcon,r=void 0===n?{}:n,i=this.getSize(t)[0];if(r.show){var o=r.width,a=r.height,s=r.x,l=r.y,u=r.offset,c=r.text,d=Qa(r,["width","height","x","y","offset","text"]);c?e.addShape("text",{attrs:Za({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},d),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):e.addShape("image",{attrs:Za(Za({},d),{x:s||-i/2+o+u,y:l||-a/2,width:o,height:a}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(t,e){var n=this.getOptions(t).stateIcon,r=void 0===n?{}:n,i=this.getSize(t)[0];if(r.show){var o=r.width,a=r.height,s=r.x,l=r.y,u=r.offset,c=r.text,d=Qa(r,["width","height","x","y","offset","text"]);c?e.addShape("text",{attrs:Za({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},d),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):e.addShape("image",{attrs:Za(Za({},d),{x:s||i/2-o+u,y:l||-a/2,width:o,height:a}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(t,e){var n=this.getOptions(t).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,u=r.r,c=Qa(r,["top","left","right","bottom","size","r"]),d=this.getSize(t),h=d[0],f=d[1];o&&e.addShape("circle",{attrs:Za(Za({},c),{x:-h/2,y:0,r:l/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:Za(Za({},c),{x:h/2,y:0,r:l/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&e.addShape("circle",{attrs:Za(Za({},c),{x:0,y:-f/2,r:l/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:Za(Za({},c),{x:0,y:f/2,r:l/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},drawLabel:function(t,e){var n=this.getOptions(t),r=n.labelCfg,i=void 0===r?{}:r,o=n.logoIcon,a=void 0===o?{}:o,s=n.descriptionCfg,l=void 0===s?{}:s,u=this.getSize(t)[0],c=null,d=a.show,h=a.width,f=-u/2+i.offset;d&&(f=-u/2+h+i.offset);var p=i.style,g=l.style,v=l.paddingTop;return zs(t.description)?(c=e.addShape("text",{attrs:Za(Za({},p),{x:f,y:-5,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0}),e.addShape("text",{attrs:Za(Za({},g),{x:f,y:17+(v||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0})):c=e.addShape("text",{attrs:Za(Za({},p),{x:f,y:7,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0}),c},getShapeStyle:function(t){var e=Tl({},this.getOptions(t).style,{stroke:t.color}),n=this.getSize(t),r=e.width||n[0],i=e.height||n[1];return Za({x:-r/2,y:-i/2,width:r,height:i},e)},update:function(t,e){var n=this.getOptions(t),r=n.style,i=void 0===r?{}:r,o=n.labelCfg,a=void 0===o?{}:o,s=n.descriptionCfg,l=void 0===s?{}:s,u=this.getSize(t),c=u[0],d=u[1];e.get("keyShape").attr(Za(Za({},i),{x:-c/2,y:-d/2,width:c,height:d}));var h=e.getContainer(),f=h.find((function(t){return"rect-logo-icon"===t.get("className")})),p=Tl({},f?f.attr():{},t.logoIcon),g=p.width;void 0===g&&(g=this.options.logoIcon.width);var v=t.logoIcon?t.logoIcon.show:void 0,m=a.offset,y=-c/2+g+m;v||void 0===v||(y=-c/2+m);var b=h.find((function(t){return"node-label"===t.get("className")})),x=h.find((function(t){return"rect-description"===t.get("className")}));if(t.label)if(b){var w=t.labelCfg?t.labelCfg.style:{},C=Tl({},b.attr(),w);t.label&&(C.text=t.label),C.x=y,zs(t.description)&&(C.y=-5),x&&(x.resetMatrix(),x.attr({x:y})),b.resetMatrix(),b.attr(C)}else h.addShape("text",{attrs:Za(Za({},a.style),{x:y,y:t.description?-5:7,text:t.label}),className:"node-label",name:"node-label",draggable:!0});if(zs(t.description)){var S=l.paddingTop;if(x){w=t.descriptionCfg?t.descriptionCfg.style:{};var k=Tl({},x.attr(),w);zs(t.description)&&(k.text=t.description),k.x=y,x.resetMatrix(),x.attr(Za(Za({},k),{y:17+(S||0)}))}else h.addShape("text",{attrs:Za(Za({},l.style),{x:y,y:17+(S||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0})}var E=h.find((function(t){return"pre-rect"===t.get("className")}));if(E){var M=Tl({},E.attr(),t.preRect);E.attr(Za(Za({},M),{x:-c/2,y:-d/2,height:d}))}if(f)if(v||void 0===v){var A=p.width,_=p.height,T=p.x,P=p.y,I=p.offset,D=Qa(p,["width","height","x","y","offset"]);f.attr(Za(Za({},D),{x:T||-c/2+A+I,y:P||-_/2,width:A,height:_}))}else f.remove();else v&&this.drawLogoIcon(t,h);var O=h.find((function(t){return"rect-state-icon"===t.get("className")})),R=Tl({},O?O.attr():{},t.stateIcon);if(O){R.show||void 0===R.show||O.remove();var L=R.width,B=(_=R.height,T=R.x,P=R.y,R.offset),F=Qa(R,["width","height","x","y","offset"]);O.attr(Za(Za({},F),{x:T||c/2-L+B,y:P||-_/2,width:L,height:_}))}else R.show&&this.drawStateIcon(t,h);this.updateLinkPoints(t,h)}},"single-node"),Um("star",{options:{size:60,style:{stroke:Hm.defaultNode.style.stroke,fill:Hm.defaultNode.style.fill,lineWidth:Hm.defaultNode.style.lineWidth},labelCfg:{style:{fill:Hm.nodeLabel.style.fill,fontSize:Hm.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Hm.defaultNode.linkPoints.size,lineWidth:Hm.defaultNode.linkPoints.lineWidth,fill:Hm.defaultNode.linkPoints.fill,stroke:Hm.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Za({},Hm.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(t,e){var n=this.getOptions(t).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=e.addShape("path",{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),a=r.width,s=r.height,l=r.show,u=r.text;return l&&(u?e.addShape("text",{attrs:Za({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.addShape("image",{attrs:Za({x:-a/2,y:-s/2},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=this.getOptions(t).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.leftBottom,l=r.rightBottom,u=r.size,c=r.r,d=Qa(r,["top","left","right","leftBottom","rightBottom","size","r"]),h=this.getSize(t)[0];if(a){var f=Math.cos(.1*Math.PI)*h,p=Math.sin(.1*Math.PI)*h;e.addShape("circle",{attrs:Za(Za({},d),{x:f,y:-p,r:u/2||c||5}),className:"link-point-right",name:"link-point-right"})}if(i){f=Math.cos(.5*Math.PI)*h,p=Math.sin(.5*Math.PI)*h;e.addShape("circle",{attrs:Za(Za({},d),{x:f,y:-p,r:u/2||c||5}),className:"link-point-top",name:"link-point-top"})}if(o){f=Math.cos(.9*Math.PI)*h,p=Math.sin(.9*Math.PI)*h;e.addShape("circle",{attrs:Za(Za({},d),{x:f,y:-p,r:u/2||c||5}),className:"link-point-left",name:"link-point-left"})}if(s){f=Math.cos(1.3*Math.PI)*h,p=Math.sin(1.3*Math.PI)*h;e.addShape("circle",{attrs:Za(Za({},d),{x:f,y:-p,r:u/2||c||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(l){f=Math.cos(1.7*Math.PI)*h,p=Math.sin(1.7*Math.PI)*h;e.addShape("circle",{attrs:Za(Za({},d),{x:f,y:-p,r:u/2||c||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(t){for(var e=this.getSize(t)[0],n=3*e/8,r=t.innerR||n,i=[],o=0;o<5;o++){var a=Math.cos((18+72*o)/180*Math.PI)*e,s=Math.sin((18+72*o)/180*Math.PI)*e,l=Math.cos((54+72*o)/180*Math.PI)*r,u=Math.sin((54+72*o)/180*Math.PI)*r;0===o?i.push(["M",a,-s]):i.push(["L",a,-s]),i.push(["L",l,-u])}return i.push(["Z"]),i},getShapeStyle:function(t){var e=Tl({},this.getOptions(t).style,{stroke:t.color}),n=this.getPath(t);return Za({path:n},e)},update:function(t,e){var n=e.getContainer(),r=this.getOptions({}).style,i=this.getPath(t),o={stroke:t.color,path:i},a=Tl({},r,e.get("keyShape").attr(),o);a=Tl(a,t.style),this.updateShape(t,e,a,!0),this.updateLinkPoints(t,n)},updateLinkPoints:function(t,e){var n=this.getOptions({}).linkPoints,r=e.find((function(t){return"link-point-left"===t.get("className")})),i=e.find((function(t){return"link-point-right"===t.get("className")})),o=e.find((function(t){return"link-point-top"===t.get("className")})),a=e.find((function(t){return"link-point-left-bottom"===t.get("className")})),s=e.find((function(t){return"link-point-right-bottom"===t.get("className")})),l=n,u=r||i||o||a||s;u&&(l=u.attr());var c=Tl({},l,t.linkPoints),d=c.fill,h=c.stroke,f=c.lineWidth,p=c.size/2;p||(p=c.r);var g=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},v=g.left,m=g.right,y=g.top,b=g.leftBottom,x=g.rightBottom,w=this.getSize(t)[0],C={r:p,fill:d,stroke:h,lineWidth:f},S=Math.cos(.1*Math.PI)*w,k=Math.sin(.1*Math.PI)*w;i?m||void 0===m?i.attr(Za(Za({},C),{x:S,y:-k})):i.remove():m&&e.addShape("circle",{attrs:Za(Za({},C),{x:S,y:-k}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),S=Math.cos(.5*Math.PI)*w,k=Math.sin(.5*Math.PI)*w,o?y||void 0===y?o.attr(Za(Za({},C),{x:S,y:-k})):o.remove():y&&e.addShape("circle",{attrs:Za(Za({},C),{x:S,y:-k}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),S=Math.cos(.9*Math.PI)*w,k=Math.sin(.9*Math.PI)*w,r?v||void 0===v?r.attr(Za(Za({},C),{x:S,y:-k})):r.remove():v&&e.addShape("circle",{attrs:Za(Za({},C),{x:S,y:-k}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),S=Math.cos(1.3*Math.PI)*w,k=Math.sin(1.3*Math.PI)*w,a?b||void 0===b?a.attr(Za(Za({},C),{x:S,y:-k})):a.remove():b&&e.addShape("circle",{attrs:Za(Za({},C),{x:S,y:-k}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0}),S=Math.cos(1.7*Math.PI)*w,k=Math.sin(1.7*Math.PI)*w,s?x||void 0===x?s.attr(Za(Za({},C),{x:S,y:-k})):a.remove():x&&e.addShape("circle",{attrs:Za(Za({},C),{x:S,y:-k}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0})}},"single-node");var LY=zm.defaultSubjectColors;Um("donut",{options:{size:Hm.defaultNode.size,style:{x:0,y:0,stroke:Hm.defaultNode.style.stroke,fill:Hm.defaultNode.style.fill,lineWidth:Hm.defaultNode.style.lineWidth},labelCfg:{style:{fill:Hm.nodeLabel.style.fill,fontSize:Hm.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Hm.defaultNode.linkPoints.size,lineWidth:Hm.defaultNode.linkPoints.lineWidth,fill:Hm.defaultNode.linkPoints.fill,stroke:Hm.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Za({},Hm.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=this.getOptions(t).icon,r=void 0===n?{}:n,i=this.getShapeStyle(t),o=Rl({},r,t.icon),a=e.addShape("circle",{attrs:i,className:this.type+"-keyShape",draggable:!0,name:this.type+"-keyShape"}),s=o.width,l=o.height,u=o.show,c=o.text;u&&(c?e.addShape("text",{attrs:Za({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.addShape("image",{attrs:Za({x:-s/2,y:-l/2},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}));var d=a.attr("r"),h=.6*d,f=(d+h)/2,p=t,g=p.donutAttrs,v=void 0===g?{}:g,m=p.donutColorMap,y=void 0===m?{}:m,b=Object.keys(v).length;if(v&&b>1){var x=[],w=0;if(Object.keys(v).forEach((function(t){var e=v[t]||0;el(e)&&(x.push({key:t,value:e,color:y[t]}),w+=e)})),w){var C=d-h;if(1===b)return void e.addShape("circle",{attrs:{r:f,x:0,y:0,stroke:x[0].color||LY[0],lineWidth:C},name:"fan-shape-0"});var S=[f,0],k=0;x.forEach((function(t,n){var r=t.value/w;if(!(r<.001))if(r>.999&&(r=1),1!==r){t.percent=r,t.angle=r*Math.PI*2,t.beginAgnle=k,k+=t.angle,t.endAngle=k,t.arcBegin=S,t.arcEnd=[f*Math.cos(t.endAngle),-f*Math.sin(t.endAngle)];var i=t.angle>Math.PI?1:0,o=[["M",t.arcBegin[0],t.arcBegin[1]],["A",f,f,0,i,0,t.arcEnd[0],t.arcEnd[1]],["L",t.arcEnd[0],t.arcEnd[1]]];e.addShape("path",{attrs:{path:o,lineWidth:C,stroke:t.color||LY[n%LY.length]},name:"fan-shape-"+n}),S=t.arcEnd}else e.addShape("circle",{attrs:{r:f,x:0,y:0,stroke:t.color||LY[n%LY.length],lineWidth:C},name:"fan-shape-"+n})}))}}return this.drawLinkPoints(t,e),a},update:void 0},"circle");var BY=function(t){var e=t.x,n=t.y;return{x:e,y:n,centerX:e,centerY:n,minX:e,minY:n,maxX:e,maxY:n,height:0,width:0}},FY=function(t){for(var e=[],n={},r=t.length-1;r>=0;r--){var i=t[r];i.id=i.x+"|||"+i.y,n[i.id]=i,e.push(i)}return e},NY=function(t){return FY(t)},zY=function(t,e){return t.width||t.height?{centerX:t.centerX,centerY:t.centerY,minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e,height:t.height+2*e,width:t.width+2*e}:t},jY=function(t,e,n){var r=function(t,e){var n=Math.abs(t.x-e.centerX),r=Math.abs(t.y-e.centerY);return 0===n&&0===r?0:n/e.width>r/e.height}(e,t);if(0===r){var i=t.centerX,o=t.centerY;return n.y<e.y?o=t.minY:n.x>e.x?i=t.maxX:n.x<e.x?i=t.minX:n.x===e.x&&(o=t.maxY),{x:i,y:o}}return r?{x:e.x>t.centerX?t.maxX:t.minX,y:e.y}:{x:e.x,y:e.y>t.centerY?t.maxY:t.minY}},GY=function(t,e){var n=Math.min(t.minX,e.minX),r=Math.min(t.minY,e.minY),i=Math.max(t.maxX,e.maxX),o=Math.max(t.maxY,e.maxY);return{centerX:(n+i)/2,centerY:(r+o)/2,minX:n,minY:r,maxX:i,maxY:o,height:o-r,width:i-n}},UY=function(t){return[{x:t.minX,y:t.minY},{x:t.maxX,y:t.minY},{x:t.maxX,y:t.maxY},{x:t.minX,y:t.maxY}]},$Y=function(t,e){var n=t.x,r=t.y;return n<e.minX||n>e.maxX||r<e.minY||r>e.maxY},VY=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},WY=function(t,e,n,r,i){return VY(t,e)+VY(t,n)+function(t,e){var n=0;return e.forEach((function(e){e&&(t.x===e.x&&(n+=-2),t.y===e.y&&(n+=-2))})),n}(t,[e,n,r,i])},HY=function t(e,n,r,i,o){void 0===o&&(o=0),e.unshift(n[i]),r[i]&&r[i]!==i&&o<=100&&t(e,n,r,r[i],o+1)},YY=function(t,e,n,r){var i=n.x-t.x,o=n.y-t.y,a=r.x-t.x,s=r.y-t.y,l=n.x-e.x,u=n.y-e.y,c=r.x-e.x,d=r.y-e.y;return(i*s-o*a)*(l*d-u*c)<=0&&(i*u-o*l)*(a*d-s*c)<=0},XY=function(t,e,n){if(n.width||n.height){var r=UY(n),i=r[0],o=r[1],a=r[2],s=r[3];return YY(t,e,i,o)||YY(t,e,i,s)||YY(t,e,o,a)||YY(t,e,a,s)}return!1},qY=function(t,e,n,r){var i=[];return t.forEach((function(t){if(t!==e&&(t.x===e.x||t.y===e.y)){if(XY(t,e,n)||XY(t,e,r))return;i.push(t)}})),FY(i)},KY=function(t,e){var n=[],r=t[0];return n.push("M"+r.x+" "+r.y),t.forEach((function(r,i){var o=t[i+1],a=t[i+2];if(o&&a)if(function(t,e,n){return!(t.x===e.x&&e.x===n.x||t.y===e.y&&e.y===n.y)}(r,o,a)){var s=function(t,e,n,r){var i=VY(t,e),o=VY(n,e);return i<r&&(r=i),o<r&&(r=o),[{x:e.x-r/i*(e.x-t.x),y:e.y-r/i*(e.y-t.y)},{x:e.x-r/o*(e.x-n.x),y:e.y-r/o*(e.y-n.y)}]}(r,o,a,e),l=s[0],u=s[1];n.push("L"+l.x+" "+l.y),n.push("Q"+o.x+" "+o.y+" "+u.x+" "+u.y),n.push("L"+u.x+" "+u.y)}else n.push("L"+o.x+" "+o.y);else o&&n.push("L"+o.x+" "+o.y)})),n.join("")},ZY=function(t,e,n,r,i){var o,a;if(n&&n.getType())if("combo"===n.getType()){(o=n.getKeyShape().getCanvasBBox()||BY(t)).centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=n.getBBox();else o=BY(t);if(r&&r.getType())if("combo"===r.getType()){var s=r.getKeyShape().getBBox();if(s){var l=r.getModel(),u=l.x,c=l.y;(a={x:u,y:c,width:s.width,height:s.height,minX:s.minX+u,maxX:s.maxX+u,minY:s.minY+c,maxY:s.maxY+c}).centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2}else a=BY(e)}else a=r&&r.getBBox();else a=BY(e);var d=zY(o,i),h=zY(a,i),f=jY(d,t,e),p=jY(h,e,t),g=function(t){void 0===t&&(t=[]);var e=[],n=[];t.forEach((function(t){e.push(t.x),n.push(t.y)}));var r=Math.min.apply(Math,e),i=Math.max.apply(Math,e),o=Math.min.apply(Math,n),a=Math.max.apply(Math,n);return{centerX:(r+i)/2,centerY:(o+a)/2,maxX:i,maxY:a,minX:r,minY:o,height:a-o,width:i-r}}([f,p]),v=GY(d,g),m=GY(h,g),y=[];y=y.concat(UY(v)).concat(UY(m));var b={x:(t.x+e.x)/2,y:(t.y+e.y)/2};[g,v,m].forEach((function(t){y=y.concat(function(t,e){return function(t,e){return e<t.minX||e>t.maxX?[]:[{x:e,y:t.minY},{x:e,y:t.maxY}]}(t,e.x).concat(function(t,e){return e<t.minY||e>t.maxY?[]:[{x:t.minX,y:e},{x:t.maxX,y:e}]}(t,e.y))}(t,b).filter((function(t){return $Y(t,d)&&$Y(t,h)})))})),[{x:f.x,y:p.y},{x:p.x,y:f.y}].forEach((function(t){$Y(t,d)&&$Y(t,h)&&y.push(t)})),y.unshift(f),y.push(p);var x=function(t,e,n,r,i,o,a){var s=[],l=[e],u={},c={},d={};c[e.id]=0,d[e.id]=WY(e,n,e);var h,f,p,g,v,m={};for(t.forEach((function(t){m[t.id]=t}));l.length;){if(h=void 0,f=1/0,l.forEach((function(t){d[t.id]<=f&&(f=d[t.id],h=t)})),h===n){var y=[];return HY(y,m,u,n.id),y}g=h,v=void 0,(v=(p=l).indexOf(g))>-1&&p.splice(v,1),s.push(h),qY(t,h,r,i).forEach((function(t){if(-1===s.indexOf(t)){-1===l.indexOf(t)&&l.push(t);var r=d[h.id]+VY(h,t);c[t.id]&&r>=c[t.id]||(u[t.id]=h.id,c[t.id]=r,d[t.id]=c[t.id]+WY(t,n,e,o,a))}}))}return[e,n]}(y=FY(y),f,p,o,a,t,e);return x.unshift(t),x.push(e),NY(x)},QY={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},fallbackRoute:function(t,e,n,r,i){return NY(ZY(t,e,n,r,i.offset))}},JY=function(t,e){var n=Math.round(Math.abs(t/e));return n<0?0:(t<0?-1:1)*n},tX=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n||r?Math.atan2(r,n):0},eX=function(t,e){var n=Math.abs(t-e);return n>Math.PI?2*Math.PI-n:n},nX=function(t,e,n){for(var r=1/0,i=0,o=e.length;i<o;i++){var a=n(t,e[i]);a<r&&(r=a)}return r},rX=function(t,e,n,r,i){var o=[];if(!n)return[t];var a=i.directions,s=i.offset,l=n.getBBox(),u=e.x>l.minX&&e.x<l.maxX&&e.y>l.minY&&e.y<l.maxY,c=zY(l,s);for(var d in c)c[d]=JY(c[d],i.gridSize);if(u){for(var h=0,f=a;h<f.length;h++){var p=f[h],g=[[{x:c.minX,y:c.minY},{x:c.maxX,y:c.minY}],[{x:c.minX,y:c.minY},{x:c.minX,y:c.maxY}],[{x:c.maxX,y:c.minY},{x:c.maxX,y:c.maxY}],[{x:c.minX,y:c.maxY},{x:c.maxX,y:c.maxY}]];for(d=0;d<4;d++){var v=g[d],m=zm.getLineIntersect(t,{x:t.x+p.stepX*c.width,y:t.y+p.stepY*c.height},v[0],v[1]);m&&!XY(t,m,l)&&(m.id=m.x+"|||"+m.y,o.push(m))}}return o}var y=jY(c,t,r);return y.id=y.x+"|||"+y.y,[y]},iX=function(t,e,n,r){var i=tX(t,e);if(!n[t.id]){var o=tX(r,t);return eX(o,i)}var a=tX({x:n[t.id].x,y:n[t.id].y},t);return eX(a,i)},oX=function(t,e,n,r,i,o,a){var s=[r],l=t.id,u=t.x,c=t.y,d={x:u,y:c,id:l};for(iX(d,o,e,n)&&s.unshift({x:o.x===r.x?r.x:d.x*a,y:o.y===r.y?r.y:d.y*a});e[l]&&e[l].id!==l;){var h={x:u,y:c,id:l},f=e[l].id,p=e[l].x,g=e[l].y,v={x:p,y:g,id:f};iX(v,h,e,n)&&s.unshift({x:v.x===h.x?s[0].x:v.x*a,y:v.y===h.y?s[0].y:v.y*a}),l=f,u=p,c=g}var m=u,y=c;return s[0].x=m===n.x?i.x:s[0].x,s[0].y=y===n.y?i.y:s[0].y,s.unshift(i),s},aX=function(t,e,n,r,i){if(isNaN(t.x)||isNaN(e.x))return[];var o=Rl(QY,i);o.obstacles=o.obstacles||[];var a=o.gridSize,s=function(t,e,n){var r={};return t.forEach((function(t){if(t)for(var i=zY(t.getBBox(),n),o=JY(i.minX,e);o<=JY(i.maxX,e);o+=1)for(var a=JY(i.minY,e);a<=JY(i.maxY,e);a+=1)r[o+"|||"+a]=!0})),r}(o.obstacles.concat([n,r]),a,o.offset),l={x:JY(t.x,a),y:JY(t.y,a)},u={x:JY(e.x,a),y:JY(e.y,a)};t.id=l.x+"|||"+l.y,e.id=u.x+"|||"+u.y;var c=rX(l,t,n,u,o),d=rX(u,e,r,l,o);c.forEach((function(t){delete s[t.id]})),d.forEach((function(t){delete s[t.id]}));for(var h={},f={},p={},g={},v={},m=0;m<c.length;m++){var y=c[m];h[y.id]=y,g[y.id]=0,v[y.id]=nX(y,d,o.distFunc)}for(var b,x,w,C,S,k,E,M=o.maximumLoops,A=o.penalties;Object.keys(h).length>0&&M>0&&(b=void 0,x=1/0,Object.keys(h).forEach((function(t){var e=h[t].id;v[e]<=x&&(x=v[e],b=h[e])})),b);){if(d.findIndex((function(t){return t.x===b.x&&t.y===b.y}))>-1)return oX(b,p,l,e,t,u,a);delete h[b.id],f[b.id]=!0;for(m=0;m<o.directions.length;m++)w=o.directions[m],f[(C={x:b.x+w.stepX,y:b.y+w.stepY,id:Math.round(b.x)+w.stepX+"|||"+(Math.round(b.y)+w.stepY)}).id]||(E=iX(b,C,p,l))>o.maxAllowedDirectionChange||s[C.id]||(h[C.id]||(h[C.id]=C),S=o.distFunc(b,C)+(isNaN(A[E])?a:A[E]),k=g[b.id]+S,g[C.id]&&k>=g[C.id]||(p[C.id]=b,g[C.id]=k,v[C.id]=k+nX(C,d,o.distFunc)));M-=1}return o.fallbackRoute(t,e,n,r,o)};$m("polyline",{options:{color:Hm.defaultEdge.color,size:Hm.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:Hm.defaultEdge.style.stroke,lineAppendWidth:Hm.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Hm.edgeLabel.style.fill,fontSize:Hm.edgeLabel.style.fontSize}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:Za({},Hm.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t);return 0===n.radius&&delete n.radius,e.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:n})},getShapeStyle:function(t){var e=Tl({},this.options.style,{stroke:t.color},t.style);t=this.getPathPoints(t),this.radius=e.radius,this.offset=e.offset;var n=t.startPoint,r=t.endPoint,i=this.getControlPoints(t),o=[n];i&&(o=o.concat(i)),o.push(r);var a=t.sourceNode,s=t.targetNode,l=e.radius,u=Tl({},this.options.routeCfg,t.routeCfg);u.offset=e.offset;var c=this.getPath(o,a,s,l,u);return(ms(c)&&c.length<=1||zs(c)&&-1===c.indexOf("L"))&&(c="M0 0, L0 0"),(isNaN(n.x)||isNaN(n.y)||isNaN(r.x)||isNaN(r.y))&&(c="M0 0, L0 0"),Tl({},Hm.defaultEdge.style,e,{lineWidth:t.size,path:c})},updateShapeStyle:function(t,e){var n=e.getContainer();if(e.isVisible()){var r={stroke:t.color},i=n.find((function(t){return"edge-shape"===t.get("className")}))||e.getKeyShape(),o=t.size,a=(t=this.getPathPoints(t)).startPoint,s=t.endPoint,l=this.getControlPoints(t),u=[a];l&&(u=u.concat(l)),u.push(s);var c=i.attr(),d=Tl({},r,c,t.style),h=t.sourceNode,f=t.targetNode,p=d.radius,g=Tl({},this.options.routeCfg,t.routeCfg);g.offset=d.offset;var v=this.getPath(u,h,f,p,g);(ms(v)&&v.length<=1||zs(v)&&-1===v.indexOf("L"))&&(v="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(s.x)||isNaN(s.y))&&(v="M0 0, L0 0"),c.endArrow&&!1===d.endArrow&&(t.style.endArrow={path:""}),c.startArrow&&!1===d.startArrow&&(t.style.startArrow={path:""});var m=Tl(r,i.attr(),{lineWidth:o,path:v},t.style);i&&i.attr(m)}},getPath:function(t,e,n,r,i){var o=i.offset,a=i.simple;if(!o||t.length>2){if(r)return KY(t,r);var s=[];return bs(t,(function(t,e){0===e?s.push(["M",t.x,t.y]):s.push(["L",t.x,t.y])})),s}var l=a?ZY(t[t.length-1],t[0],n,e,o):aX(t[0],t[t.length-1],e,n,i);return l&&l.length?r?KY(l,r):zm.pointsToPolygon(l):"M0 0, L0 0"}},"single-edge");var sX=iV.cloneEvent,lX=iV.isNaN,uX=Math.abs,cX=["shift","ctrl","alt","control"],dX={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(t){var e=this.origin,n=+t.clientX,r=+t.clientY;if(!lX(n)&&!lX(r)){var i=n-e.x,o=r-e.y;"x"===this.get("direction")?o=0:"y"===this.get("direction")&&(i=0),this.origin={x:n,y:r};var a=this.graph.get("width"),s=this.graph.get("height"),l=this.graph.get("canvas").getCanvasBBox(),u=this.scalableRange,c=this.scalableRange;u<1&&u>-1&&(u*=a,c*=s),(l.minX<=a+u&&l.minX+i>a+u||l.maxX+u>=0&&l.maxX+u+i<0)&&(i=0),(l.minY<=s+c&&l.minY+o>s+c||l.maxY+c>=0&&l.maxY+c+o<0)&&(o=0),this.graph.translate(i,o)}},onTouchStart:function(t){var e=t.originalEvent.touches,n=e[0],r=e[1];n&&r||(t.preventDefault(),this.onMouseDown(t))},onMouseDown:function(t){var e=this,n=t.originalEvent;if((!n||t.name===Rm.TOUCHSTART||0===n.button)&&(t.name===Rm.TOUCHSTART||"undefined"==typeof window||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin.call(this,t)&&!e.keydown){var r=t.target,i=r&&r.isCanvas&&r.isCanvas();if((this.allowDragOnItem||i)&&(e.origin={x:t.clientX,y:t.clientY},e.dragging=!1,this.enableOptimize)){for(var o=this.graph,a=o.getEdges(),s=0,l=a.length;s<l;s++){var u=a[s].get("group").get("children");u&&u.forEach((function(t){t.set("ori-visibility",t.get("ori-visibility")||t.get("visible")),t.hide()}))}for(var c=o.getNodes(),d=0,h=c.length;d<h;d++)for(var f=0,p=c[d].getContainer().get("children");f<p.length;f++){var g=p[f];g.get("isKeyShape")||(g.set("ori-visibility",g.get("ori-visibility")||g.get("visible")),g.hide())}}}},onTouchMove:function(t){var e=t.originalEvent.touches,n=e[0],r=e[1];n&&r?this.onMouseUp(t):(t.preventDefault(),this.onMouseMove(t))},onMouseMove:function(t){var e=this.graph;if(!this.keydown){var n=t.target,r=n&&n.isCanvas&&n.isCanvas();if((this.allowDragOnItem||r)&&(t=sX(t),this.origin)){if(this.dragging)t.type="drag",e.emit("canvas:drag",t);else{if(uX(this.origin.x-t.clientX)+uX(this.origin.y-t.clientY)<10)return;this.shouldBegin.call(this,t)&&(t.type="dragstart",e.emit("canvas:dragstart",t),this.dragging=!0)}this.shouldUpdate.call(this,t)&&this.updateViewport(t)}}},onMouseUp:function(t){var e,n,r=this.graph;if(!this.keydown){var i=r.getZoom(),o=r.get("modeController"),a=null===(n=null===(e=null==o?void 0:o.modes[o.mode])||void 0===e?void 0:e.filter((function(t){return"zoom-canvas"===t.type})))||void 0===n?void 0:n[0],s=a?a.optimizeZoom||.1:0;if(this.enableOptimize){for(var l=r.getEdges(),u=0,c=l.length;u<c;u++){var d=l[u].get("group").get("children");d&&d.forEach((function(t){t.get("ori-visibility")&&t.show()}))}if(i>s)for(var h=r.getNodes(),f=0,p=h.length;f<p;f++)for(var g=0,v=h[f].getContainer().get("children");g<v.length;g++){var m=v[g];if(!m.get("isKeyShape"))m.get("ori-visibility")&&m.show()}}this.dragging?(t=sX(t),this.shouldEnd.call(this,t)&&this.updateViewport(t),t.type="dragend",r.emit("canvas:dragend",t),this.endDrag()):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1},onKeyDown:function(t){var e=t.key;e&&(cX.indexOf(e.toLowerCase())>-1?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},hX={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd"}},validationCombo:function(t){return!(!this.origin||!t||t.destroyed)&&"combo"===t.getType()},onTouchStart:function(t){if(t.item){try{var e=t.originalEvent.touches,n=e[0],r=e[1];if(n&&r)return;t.preventDefault()}catch(i){console.warn("Touch original event not exist!")}this.onDragStart(t)}},onTouchMove:function(t){try{var e=t.originalEvent.touches,n=e[0],r=e[1];if(n&&r)return void this.onDragEnd(t);t.preventDefault()}catch(i){console.warn("Touch original event not exist!")}this.onDrag(t)},onDragStart:function(t){var e=this;if(this.shouldBegin.call(this,t)){var n=t.item;if(n&&!n.destroyed&&!n.hasLocked()){n.getContainer().set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n);var r=t.target;if(r)if(r.get("isAnchorPoint"))return;var i=this.graph;this.targets=[],this.targetCombo=null;var o=i.findAllByState("node",this.selectedState),a=n.get("id");0===o.filter((function(t){var e=t.get("id");return a===e})).length?this.targets.push(n):o.length>1?o.forEach((function(t){t.hasLocked()||e.targets.push(t)})):this.targets.push(n);var s=[];this.targets.forEach((function(t){s.push(Pl(t.getModel()))})),this.set("beforeDragNodes",s),this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach((function(t){t.getEdges().forEach((function(t){t.isVisible()&&(e.hidenEdge[t.getID()]=!0,t.hide())}))})),this.origin={x:t.x,y:t.y},this.point={},this.originPoint={}}}},onDrag:function(t){var e=this;this.origin&&this.shouldUpdate(this,t)&&(this.get("enableDelegate")?this.updateDelegate(t):this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge")}):this.targets.map((function(n){e.update(n,t)})))},onDragEnd:function(t){var e,n=this;if(this.origin&&this.shouldEnd.call(this,t)){null===(e=this.cachedCaptureItems)||void 0===e||e.forEach((function(t){t.getContainer().set("capture",!0)})),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.updatePositions(t),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach((function(t){t.getEdges().forEach((function(t){n.hidenEdge[t.getID()]&&t.show(),t.refresh()}))})),this.hidenEdge={};var r=this.graph;if(r.get("enabledStack")&&this.enableStack){var i={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach((function(t){i.before.nodes.push({id:t.id,x:t.x,y:t.y})})),this.targets.forEach((function(t){var e=t.getModel();i.after.nodes.push({id:e.id,x:e.x,y:e.y})})),r.pushStack("update",Pl(i))}r.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(t){var e=t.item;if(this.validationCombo(e)){this.updatePositions(t);var n=this.graph;if(this.comboActiveState&&n.setItemState(e,this.comboActiveState,!1),this.targetCombo=e,this.onlyChangeComboSize)n.updateCombos();else{var r=e.getModel();this.targets.map((function(t){t.getModel().comboId!==r.id&&n.updateComboTree(t,r.id)})),n.updateCombo(e)}n.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(t){var e=this.graph;this.targets&&0!==this.targets.length&&(this.updatePositions(t),this.onlyChangeComboSize?e.updateCombos():this.targets.map((function(t){t.getModel().comboId&&e.updateComboTree(t)})))},onDropNode:function(t){if(this.targets&&0!==this.targets.length){var e=this,n=t.item;this.updatePositions(t);var r=e.graph,i=n.getModel().comboId;if(this.onlyChangeComboSize)r.updateCombos();else if(i){var o=r.findById(i);e.comboActiveState&&r.setItemState(o,e.comboActiveState,!1),this.targets.map((function(t){var e=t.getModel();i!==e.comboId&&r.updateComboTree(t,i)})),r.updateCombo(o)}else this.targets.map((function(t){t.getModel().comboId&&r.updateComboTree(t)}));r.emit("dragnodeend",{items:this.targets,targetItem:n})}},onDragEnter:function(t){var e=t.item;if(this.validationCombo(e)){var n=this.graph;this.comboActiveState&&n.setItemState(e,this.comboActiveState,!0)}},onDragLeave:function(t){var e=t.item;if(this.validationCombo(e)){var n=this.graph;this.comboActiveState&&n.setItemState(e,this.comboActiveState,!1)}},updatePositions:function(t){var e=this;this.targets&&0!==this.targets.length&&this.get("enableDelegate")&&(this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge"),updateFunc:this.update}):this.targets.map((function(n){return e.update(n,t)})))},update:function(t,e){var n=this.origin,r=t.get("model"),i=t.get("id");this.point[i]||(this.point[i]={x:r.x||0,y:r.y||0});var o={x:e.x-n.x+this.point[i].x,y:e.y-n.y+this.point[i].y};this.get("updateEdge")?this.graph.updateItem(t,o,!1):t.updatePosition(o)},debounceUpdate:Il((function(t){var e=t.targets,n=t.graph,r=t.point,i=t.origin,o=t.evt,a=t.updateEdge;t.updateFunc,e.map((function(t){var e=t.get("model"),s=t.get("id");r[s]||(r[s]={x:e.x||0,y:e.y||0});var l={x:o.x-i.x+r[s].x,y:o.y-i.y+r[s].y};a?n.updateItem(t,l,!1):t.updatePosition(l)}))}),50,!0),updateDelegate:function(t){var e=this.graph;if(this.delegateRect){var n=t.x-this.origin.x+this.originPoint.minX,r=t.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:n,y:r})}else{var i=e.get("group"),o=Rl({},dw.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(t),s=a.x,l=a.y,u=a.width,c=a.height,d=a.minX,h=a.minY;this.originPoint={x:s,y:l,width:u,height:c,minX:d,minY:h},this.delegateRect=i.addShape("rect",{attrs:Za({width:u,height:c,x:s,y:l},o),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(t){var e=this.targets;0===e.length&&e.push(t.item);for(var n=1/0,r=-1/0,i=1/0,o=-1/0,a=0;a<e.length;a++){var s=e[a].getBBox(),l=s.minX,u=s.minY,c=s.maxX,d=s.maxY;l<n&&(n=l),u<i&&(i=u),c>r&&(r=c),d>o&&(o=d)}return{x:Math.floor(n),y:Math.floor(i),width:Math.ceil(r)-Math.floor(n),height:Math.ceil(o)-Math.floor(i),minX:n,minY:i}}},fX={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return"mouseenter"===this.get("trigger")?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(t){try{var e=t.originalEvent.touches,n=e[0],r=e[1];if(n&&r)return;t.preventDefault()}catch(i){console.warn("Touch original event not exist!")}this.setAllItemStates(t)},clearOnTouchStart:function(t){try{var e=t.originalEvent.touches,n=e[0],r=e[1];if(n&&r)return;t.preventDefault()}catch(i){console.warn("Touch original event not exist!")}this.clearActiveState(t)},setAllItemStates:function(t){var e=t.item,n=this.graph;if(this.item=e,this.shouldUpdate(t.item,{event:t,action:"activate"})){for(var r=this.activeState,i=this.inactiveState,o=n.getNodes(),a=n.getCombos(),s=n.getEdges(),l=n.get("vedges"),u=o.length,c=a.length,d=s.length,h=l.length,f=0;f<u;f++){var p=o[f],g=p.hasState("selected");this.resetSelected&&g&&n.setItemState(p,"selected",!1),n.setItemState(p,r,!1),i&&n.setItemState(p,i,!0)}for(f=0;f<c;f++){var v=a[f];g=v.hasState("selected");this.resetSelected&&g&&n.setItemState(v,"selected",!1),n.setItemState(v,r,!1),i&&n.setItemState(v,i,!0)}for(f=0;f<d;f++){var m=s[f];n.setItemState(m,r,!1),i&&n.setItemState(m,i,!0)}for(f=0;f<h;f++){var y=l[f];n.setItemState(y,r,!1),i&&n.setItemState(y,i,!0)}i&&n.setItemState(e,i,!1),n.setItemState(e,r,!0);var b=e.getEdges(),x=b.length;for(f=0;f<x;f++){var w=void 0;w=(m=b[f]).getSource()===e?m.getTarget():m.getSource(),i&&n.setItemState(w,i,!1),n.setItemState(w,r,!0),n.setItemState(m,i,!1),n.setItemState(m,r,!0),m.toFront()}n.emit("afteractivaterelations",{item:t.item,action:"activate"})}},clearActiveState:function(t){var e=this,n=e.get("graph");if(e.shouldUpdate(t.item,{event:t,action:"deactivate"})){var r=this.activeState,i=this.inactiveState,o=n.get("autoPaint");n.setAutoPaint(!1);for(var a=n.getNodes()||[],s=n.getCombos()||[],l=n.getEdges()||[],u=n.get("vedges")||[],c=a.length,d=s.length,h=l.length,f=u.length,p=0;p<c;p++){var g=a[p];n.clearItemStates(g,[r,i])}for(p=0;p<d;p++){var v=s[p];n.clearItemStates(v,[r,i])}for(p=0;p<h;p++){var m=l[p];n.clearItemStates(m,[r,i,"deactivate"])}for(p=0;p<f;p++){var y=u[p];n.clearItemStates(y,[r,i,"deactivate"])}n.paint(),n.setAutoPaint(o),n.emit("afteractivaterelations",{item:t.item||e.get("item"),action:"deactivate"})}}},pX=Math.min,gX=Math.max,vX=Math.abs,mX=["drag","shift","ctrl","alt","control"],yX={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return mX.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),"drag"===this.trigger?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(t){var e=t.item,n=this.brush;e||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates(),n||(n=this.createBrush()),this.originPoint={x:t.canvasX,y:t.canvasY},n.attr({width:0,height:0}),n.show(),this.dragging=!0)},onMouseMove:function(t){this.dragging&&("drag"===this.trigger||this.keydown)&&this.updateBrush(t)},onMouseUp:function(t){this.graph,(this.brush||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(t),this.dragging=!1)},clearStates:function(){var t=this.graph,e=this.selectedState,n=t.findAllByState("node",e),r=t.findAllByState("edge",e);n.forEach((function(n){return t.setItemState(n,e,!1)})),r.forEach((function(n){return t.setItemState(n,e,!1)})),this.selectedNodes=[],this.selectedEdges=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedNodes:function(t){var e=this,n=this,r=n.graph,i=n.originPoint,o=n.shouldUpdate,a=this.selectedState,s={x:t.x,y:t.y},l=r.getPointByCanvas(i.x,i.y),u=pX(s.x,l.x),c=gX(s.x,l.x),d=pX(s.y,l.y),h=gX(s.y,l.y),f=[],p=[];r.getNodes().forEach((function(t){if(t.isVisible()){var e=t.getBBox();if(e.centerX>=u&&e.centerX<=c&&e.centerY>=d&&e.centerY<=h&&o(t,"select")){f.push(t);var n=t.getModel();p.push(n.id),r.setItemState(t,a,!0)}}}));var g=[];this.includeEdges&&f.forEach((function(t){t.getOutEdges().forEach((function(t){if(t.isVisible()){var n=t.getModel(),i=n.source,a=n.target;p.includes(i)&&p.includes(a)&&o(t,"select")&&(g.push(t),r.setItemState(t,e.selectedState,!0))}}))})),this.selectedEdges=g,this.selectedNodes=f,this.onSelect&&this.onSelect(f,g),r.emit("nodeselectchange",{selectedItems:{nodes:f,edges:g},select:!0})},createBrush:function(){var t=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(t){var e=this.originPoint;this.brush.attr({width:vX(t.canvasX-e.x),height:vX(t.canvasY-e.y),x:pX(t.canvasX,e.x),y:pX(t.canvasY,e.y)})},onKeyDown:function(t){var e=t.key;if(e){var n=this.trigger.toLowerCase(),r=e.toLowerCase();this.keydown=r===n||"control"===r&&"ctrl"===n||"ctrl"===r&&"control"===n}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},bX=["shift","ctrl","alt","control"],xX={getDefaultCfg:function(){return{multiple:!0,trigger:"shift",selectedState:"selected"}},getEvents:function(){var t=this;return bX.indexOf(t.trigger.toLowerCase())>-1||(t.trigger="shift",console.warn("Behavior brush-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),t.multiple?{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(t){var e=this,n=t.item;if(n&&!n.destroyed){n.getType();var r=e.graph,i=e.keydown,o=e.multiple,a=e.shouldUpdate;if(e.shouldBegin.call(e,t)){if(!i||!o)bs(r.findAllByState("node",e.selectedState).concat(r.findAllByState("combo",e.selectedState)),(function(t){t!==n&&r.setItemState(t,e.selectedState,!1)}));if(n.hasState(e.selectedState)){a.call(e,t)&&r.setItemState(n,e.selectedState,!1);var s=r.findAllByState("node",e.selectedState),l=r.findAllByState("combo",e.selectedState);r.emit("nodeselectchange",{target:n,selectedItems:{nodes:s,combos:l},select:!1})}else{a.call(e,t)&&r.setItemState(n,e.selectedState,!0);s=r.findAllByState("node",e.selectedState),l=r.findAllByState("combo",e.selectedState);r.emit("nodeselectchange",{target:n,selectedItems:{nodes:s,combos:l},select:!0})}}}},onCanvasClick:function(){var t=this,e=this.graph;bs(e.findAllByState("node",this.selectedState),(function(n){e.setItemState(n,t.selectedState,!1)})),bs(e.findAllByState("combo",this.selectedState),(function(n){e.setItemState(n,t.selectedState,!1)})),e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},onKeyDown:function(t){var e=t.key;e&&(e.toLowerCase()===this.trigger.toLowerCase()||"control"===e.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}},wX=Ax,CX={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"}}},getEvents:function(){var t=this.fixSelectedItems;return t.fixState||(t.fixState="selected"),t.fixAll&&(t.fixLineWidth=!0,t.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(t){var e=t.originalEvent.touches,n=e[0],r=e[1];t.preventDefault(),r&&(this.shouldBegin&&!this.shouldBegin.call(this,t)||(this.startPoint={pageX:n.pageX,pageY:n.pageY},this.moveable=!0,r&&(this.endPoint={pageX:r.pageX,pageY:r.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(t){if(this.moveable){t.preventDefault();var e=t.originalEvent.touches,n=e[0],r=e[1];if(r){this.endPoint||(this.endPoint={pageX:r.pageX,pageY:r.pageY});var i=function(t,e){return Math.hypot(e.x-t.x,e.y-t.y)},o=i({x:n.pageX,y:n.pageY},{x:r.pageX,y:r.pageY})/i({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),a=this.originScale*o;this.currentScale=a;var s=this.get("minZoom")||this.graph.get("minZoom");if(!(a>(this.get("maxZoom")||this.graph.get("maxZoom"))||a<s)){var l=this.graph.get("canvas").getPointByClient(t.clientX,t.clientY);this.graph.zoomTo(a,{x:l.x,y:l.y}),this.graph.emit("wheelzoom",t)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(t){var e=this,n=this.graph,r=this.fixSelectedItems;if((!this.shouldBegin||this.shouldBegin.call(this,t))&&this.shouldUpdate.call(this,t)){t.preventDefault();var i,o=n.get("canvas").getPointByClient(t.clientX,t.clientY),a=this.get("sensitivity"),s=n.getZoom();i=s*(t.wheelDelta<0?1-.05*a:1/(1-.05*a));var l=this.get("minZoom")||n.get("minZoom");if(!(i>(this.get("maxZoom")||n.get("maxZoom"))||i<l)){if(this.get("enableOptimize")){var u=this.get("optimizeZoom"),c=this.get("optimized"),d=n.getNodes(),h=n.getEdges(),f=d.length,p=h.length;if(!c){for(var g=0;g<f;g++){if(!(E=d[g]).destroyed)for(var v=(Y=E.get("group").get("children")).length,m=0;m<v;m++){(L=Y[m]).destoryed||L.get("isKeyShape")||(L.set("ori-visibility",L.get("ori-visibility")||L.get("visible")),L.hide())}}for(var y=0;y<p;y++)for(v=(Y=(H=h[y]).get("group").get("children")).length,m=0;m<v;m++){(L=Y[m]).set("ori-visibility",L.get("ori-visibility")||L.get("visible")),L.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var b=setTimeout((function(){var t=n.getZoom();if(e.get("optimized")){e.set("optimized",!1);for(var r=0;r<f;r++){var i=d[r],o=(c=i.get("group").get("children")).length;if(t<u)(s=(g=i.getKeyShape()).get("ori-visibility"))&&g.show();else for(var a=0;a<o;a++){var s=(m=c[a]).get("ori-visibility");!m.get("visible")&&s&&s&&m.show()}}for(var l=0;l<p;l++){var c,g,v=h[l];o=(c=v.get("group").get("children")).length;if(t<u)(s=(g=v.getKeyShape()).get("ori-visibility"))&&g.show();else for(a=0;a<o;a++){var m;if(!(m=c[a]).get("visible"))(s=m.get("ori-visibility"))&&m.show()}}}}),100);this.set("timeout",b)}if(s<=1){var x=void 0,w=void 0;if(r.fixAll||r.fixLineWidth||r.fixLabel){x=n.findAllByState("node",r.fixState),w=n.findAllByState("edge",r.fixState);for(var C=s/i,S=x.length,k=0;k<S;k++){var E,M=(E=x[k]).getContainer(),A=E.getModel(),_=E.getOriginStyle(),T=E.getStateStyle(r.fixState),P=E.get("shapeFactory").getShape(A.type).getStateStyle(r.fixState,E)[r.fixState];if(r.fixAll){if(i<=1){var I=Pl(M.getMatrix());I||(I=[1,0,0,0,1,0,0,0,1]);var D=E.getModel(),O=D.x,R=D.y;I=wX(I,[["t",-O,-R],["s",C,C],["t",O,R]]),M.setMatrix(I)}}else for(v=(Y=M.get("children")).length,m=0;m<v;m++){var L=Y[m],B=void 0,F=void 0;if(r.fixLabel)if("text"===L.get("type")){B=L.attr("fontSize")||12;var N=T[L.get("name")],z=P[L.get("name")],j=N?N.fontSize:12,G=z?z.fontSize:12,U=j||G||12;if(i<=1&&L.attr("fontSize",U/i),F)break}if(r.fixLineWidth&&L.get("isKeyShape")){F=L.attr("lineWidth")||0;var $=T.lineWidth||P.lineWidth||_.lineWidth||0;if(i<=1&&L.attr("lineWidth",$/i),B)break}}}for(var V=w.length,W=0;W<V;W++){var H,Y=(M=(H=w[W]).getContainer()).get("children");for(A=H.getModel(),T=H.getStateStyle(r.fixState),P=H.get("shapeFactory").getShape(A.type).getStateStyle(r.fixState,H)[r.fixState],v=Y.length,m=0;m<v;m++){L=Y[m],B=void 0,F=void 0;if(r.fixLabel||r.fixAll)if("text"===L.get("type")){B=L.attr("fontSize")||12;N=T[L.get("name")],z=P[L.get("name")],j=N?N.fontSize:12,G=z?z.fontSize:12,U=j||G||12;if(i<=1&&L.attr("fontSize",U/i),F)break}if((r.fixLineWidth||r.fixAll)&&L.get("isKeyShape")){F=L.attr("lineWidth")||0;$=T.lineWidth||P.lineWidth||1;if(i<=1&&L.attr("lineWidth",$/i),B)break}}}}}n.zoomTo(i,{x:o.x,y:o.y}),n.emit("wheelzoom",t)}}}},SX={onMouseEnter:function(t){var e=t.item;this.currentTarget=e,this.showTooltip(t),this.graph.emit("tooltipchange",{item:t.item,action:"show"})},onMouseMove:function(t){this.shouldUpdate(t)?this.currentTarget&&t.item===this.currentTarget&&this.updatePosition(t):this.hideTooltip()},onMouseLeave:function(t){this.shouldEnd(t)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(t){var e=this.container;if(t.item&&!t.item.destroyed){e||(e=this.createTooltip(this.graph.get("canvas")),this.container=e);var n=this.formatText(t.item.get("model"),t);e.innerHTML=n,mw(this.container,{visibility:"visible"}),this.updatePosition(t)}},hideTooltip:function(){mw(this.container,{visibility:"hidden"})},updatePosition:function(t){var e=this.get("shouldBegin"),n=this,r=n.width,i=n.height,o=n.container,a=n.graph;if(e(t)){var s=a.getPointByClient(t.clientX,t.clientY),l=a.getCanvasByPoint(s.x,s.y),u=l.x,c=l.y,d=o.getBoundingClientRect();u>r/2?u-=d.width:u+=this.offset,c>i/2?c-=d.height:c+=this.offset;var h=u+"px",f=c+"px";mw(this.container,{left:h,top:f,visibility:"visible"})}else mw(o,{visibility:"hidden"})},createTooltip:function(t){var e=t.get("el");e.style.position="relative";var n=fw('<div class="g6-tooltip g6-'+this.item+'-tooltip"></div>');return e.parentNode.appendChild(n),mw(n,{position:"absolute",visibility:"visible"}),this.width=t.get("width"),this.height=t.get("height"),this.container=n,this.graph.get("tooltips").push(n),n}},kX=Za({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},SX),EX=Za({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: "+t.source+" target: "+t.target}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},SX),MX=["click","dblclick"],AX={getDefaultCfg:function(){return{trigger:"click",onChange:function(){}}},getEvents:function(){var t,e;return MX.includes(this.trigger)?e=this.trigger:(e="click",console.warn("Behavior collapse-expand 的 trigger 参数不合法，请输入 'click' 或 'dblclick'")),(t={})["node:"+e]="onNodeClick",t.touchstart="onNodeClick",t},onNodeClick:function(t){var e=t.item;if(e){var n=this.graph.findDataById(e.get("id"));if(n){var r=n.children;if(r&&0!==r.length){var i=!n.collapsed;this.shouldBegin(t,i)&&(n.collapsed=i,e.getModel().collapsed=i,this.graph.emit("itemcollapsed",{item:t.item,collapsed:i}),this.shouldUpdate(t,i)&&(this.onChange(e,i),this.graph.layout()))}}}}},_X=iV.calculationItemsBBox,TX=function t(e,n){if(!1!==n(e)&&e){var r=e.get("combos");if(0===r.length)return!1;bs(r,(function(e){t(e,n)}))}},PX={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(t){var e=t.item;return!(!e||e.destroyed)&&(!!this.shouldUpdate(this,t)&&"combo"===e.getType())},onDragStart:function(t){var e=this,n=this.graph,r=t.item;if(this.validationCombo(t)){this.targets=[];var i=n.findAllByState("combo",this.selectedState),o=r.get("id");0===i.filter((function(t){var e=t.get("id");return o===e})).length?this.targets.push(r):this.targets=i,this.activeState&&this.targets.map((function(t){var r=t.getModel();if(r.parentId){var i=n.findById(r.parentId);i&&n.setItemState(i,e.activeState,!0)}})),this.point={},this.originPoint={},this.origin={x:t.x,y:t.y},this.currentItemChildCombos=[],TX(r,(function(t){if(t.destroyed)return!1;var n=t.getModel();return e.currentItemChildCombos.push(n.id),!0}))}},onDrag:function(t){var e=this;if(this.origin&&this.validationCombo(t))if(this.enableDelegate)this.updateDelegate(t);else{if(this.activeState){var n=this.graph,r=t.item,i=r.getModel(),o=n.getCombos(),a=r.getBBox(),s=a.centerX,l=a.centerY,u=a.width;o.filter((function(t){var n=t.getModel();return i.parentId,n.id!==i.id&&!e.currentItemChildCombos.includes(n.id)})).map((function(t){var r=t.getBBox(),i=r.centerX,o=r.centerY,a=r.width,c=s-i,d=l-o,h=2*Math.sqrt(c*c+d*d);u+a-h>.8*u?n.setItemState(t,e.activeState,!0):n.setItemState(t,e.activeState,!1)}))}bs(this.targets,(function(n){e.updateCombo(n,t)}))}},updatePositions:function(t){var e=this;this.enableDelegate&&bs(this.targets,(function(n){e.updateCombo(n,t)}))},onDrop:function(t){var e=this,n=t.item;if(n&&this.targets&&!n.destroyed){this.updatePositions(t);var r=this.graph,i=n.getModel();this.targets.map((function(t){t.getModel().parentId!==i.id?(e.activeState&&r.setItemState(n,e.activeState,!1),e.onlyChangeComboSize?r.updateCombo(t):r.updateComboTree(t,i.id)):r.updateCombo(n)})),this.end(n,t),this.endComparison=!0}},onNodeDrop:function(t){var e=this;if(this.targets&&0!==this.targets.length){this.updatePositions(t);var n,r=this.graph,i=t.item.getModel().comboId;if(i){if(this.activeState){var o=r.findById(i);r.setItemState(o,this.activeState,!1)}this.targets.map((function(t){e.onlyChangeComboSize?r.updateCombo(t):i!==t.getID()&&(n=r.findById(i),i!==t.getModel().parentId&&r.updateComboTree(t,i))}))}else this.targets.map((function(t){e.onlyChangeComboSize?r.updateCombo(t):t.getModel().comboId&&r.updateComboTree(t)}));this.endComparison=!0,this.end(n,t)}},onDragEnter:function(t){if(this.origin&&this.validationCombo(t)){var e=t.item,n=this.graph;this.activeState&&n.setItemState(e,this.activeState,!0)}},onDragLeave:function(t){if(this.origin&&this.validationCombo(t)){var e=t.item,n=this.graph;this.activeState&&n.setItemState(e,this.activeState,!1)}},onDragEnd:function(t){if(this.targets&&0!==this.targets.length){var e=t.item;this.updatePositions(t);var n=this.getParentCombo(e.getModel().parentId),r=this.graph;n&&this.activeState&&r.setItemState(n,this.activeState,!1),this.end(void 0,t)}},end:function(t,e){var n=this;if(this.origin){var r=this.graph;if(this.delegateShape)r.get("delegateGroup").clear(),this.delegateShape=null;t&&this.activeState&&r.setItemState(t,this.activeState,!1),t||this.targets.map((function(t){n.onlyChangeComboSize?r.updateCombo(t):r.updateComboTree(t)})),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(t,e){var n=this;!1!==e(t)&&(t&&(bs(t.get("combos"),(function(t){n.traverse(t,e)})),bs(t.get("nodes"),(function(t){n.traverse(t,e)}))))},updateCombo:function(t,e){var n=this;this.traverse(t,(function(t){return!t.destroyed&&(n.updateSignleItem(t,e),!0)}))},updateSignleItem:function(t,e){var n=this.origin,r=this.graph,i=t.getModel(),o=t.get("id");this.point[o]||(this.point[o]={x:i.x,y:i.y});var a=e.x-n.x+this.point[o].x,s=e.y-n.y+this.point[o].y;r.updateItem(t,{x:a,y:s})},getParentCombo:function(t){var e=this.graph;if(t){var n=e.findById(t);if(n)return n}},updateDelegate:function(t){var e=this.graph;if(this.delegateShape){var n=t.x-this.origin.x+this.originPoint.minX,r=t.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:n,y:r})}else{var i=e.get("delegateGroup"),o=null,a=(o=this.targets.length>1?_X(this.targets):this.targets[0].getBBox()).x,s=o.y,l=o.width,u=o.height,c=o.minX,d=o.minY;this.originPoint={x:a,y:s,width:l,height:u,minX:c,minY:d};var h=Za(Za({},dw.delegateStyle),this.delegateStyle);this.delegateShape=i.addShape("rect",{attrs:Za({width:o.width,height:o.height,x:o.x,y:o.y},h),name:"combo-delegate-shape"}),this.delegate=this.delegateShape}}},IX=["click","dblclick"],DX={getDefaultCfg:function(){return{trigger:"dblclick",relayout:!0}},getEvents:function(){var t,e;return IX.includes(this.trigger)?e=this.trigger:(e="dblclick",console.warn("Behavior collapse-expand-group 的 trigger 参数不合法，请输入 'click' 或 'dblclick'")),(t={})["combo:"+e]="onComboClick",t},onComboClick:function(t){var e=t.item,n=this.graph,r=this.relayout;if(e&&!e.destroyed&&"combo"===e.getType()){var i=e.getModel().id;i&&(n.collapseExpandCombo(i),r&&n.get("layout")?n.layout():n.refreshPositions())}}},OX=iV.isPolygonsIntersect,RX=iV.pathToPoints,LX=["drag","shift","ctrl","alt","control"],BX=["click","drag"],FX=["shift","ctrl","control","alt","meta",void 0],NX=["shift","ctrl","alt","control"],zX=["shift","ctrl","alt","control"];bs({"drag-canvas":dX,"zoom-canvas":CX,"drag-node":hX,"activate-relations":fX,"brush-select":yX,"click-select":xX,"lasso-select":{getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return LX.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior lasso-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),"drag"===this.trigger?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(t){var e=this.lasso;t.item||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates(),e||(e=this.createLasso()),this.dragging=!0,this.originPoint={x:t.x,y:t.y},this.points.push(this.originPoint),e.show())},onDragMove:function(t){this.dragging&&("drag"===this.trigger||this.keydown)&&(this.points.push({x:t.x,y:t.y}),this.updateLasso(t))},onDragEnd:function(t){(this.lasso||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var t=this.points,e=[];return t.length&&(t.forEach((function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e.push(["L",t[0].x,t[0].y])),e},clearStates:function(){var t=this.graph,e=this.selectedState,n=t.findAllByState("node",e),r=t.findAllByState("edge",e);n.forEach((function(n){return t.setItemState(n,e,!1)})),r.forEach((function(n){return t.setItemState(n,e,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var t=this,e=this.graph,n=this.shouldUpdate,r=this.points.map((function(t){return[e.getCanvasByPoint(t.x,t.y).x,e.getCanvasByPoint(t.x,t.y).y]})),i=this.selectedState,o=[],a=[];e.getNodes().forEach((function(t){if(t.isVisible()&&function(t,e){var n,r=t.getKeyShape();if("path"===t.get("type"))n=RX(r.attr("path"));else{var i=r.getCanvasBBox();n=[[i.minX,i.minY],[i.maxX,i.minY],[i.maxX,i.maxY],[i.minX,i.maxY]]}return OX(e,n)}(t,r)&&n(t,"select")){o.push(t);var s=t.getModel();a.push(s.id),e.setItemState(t,i,!0)}}));var s=[];this.includeEdges&&o.forEach((function(r){r.getOutEdges().forEach((function(r){if(r.isVisible()){var i=r.getModel(),o=i.source,l=i.target;a.includes(o)&&a.includes(l)&&n(r,"select")&&(s.push(r),e.setItemState(r,t.selectedState,!0))}}))})),this.selectedEdges=s,this.selectedNodes=o,this.onSelect&&this.onSelect(o,s),e.emit("nodeselectchange",{selectedItems:{nodes:o,edges:s},select:!0})},createLasso:function(){var t=this.graph.get("delegateGroup").addShape("path",{attrs:Za({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(t){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(t){var e=t.key;e&&(e.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},tooltip:kX,"edge-tooltip":EX,"collapse-expand":AX,"drag-combo":PX,"collapse-expand-combo":DX,"create-edge":{getDefaultCfg:function(){return{trigger:"click",key:undefined,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var t,e=this;return BX.indexOf(e.trigger.toLowerCase())>-1||(e.trigger="click",console.warn("Behavior create-edge 的 trigger 参数不合法，请输入 'click'，'drag'")),e.key&&-1===FX.indexOf(e.key.toLowerCase())&&(e.trigger=undefined,console.warn("Behavior create-edge 的 key 参数不合法，请输入 'shift'，'ctrl'，'alt'，'control'，或 undefined")),"drag"===e.trigger?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:"click"===e.trigger&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(t){var e=this;if(!e.key||e.keydown){var n=t.item;n&&n.getID()!==e.source&&"node"===n.getType()||e.cancelCreating({item:e.edge,x:t.x,y:t.y})}},onClick:function(t){var e=this;if(!e.key||e.keydown){var n=t.item,r=e.graph,i=n.getModel(),o=e.getEdgeConfig;if(e.addingEdge&&e.edge){if(!e.shouldEnd.call(e,t))return;var a=void 0;a=o&&gs(o)?o({source:e.source,target:i.id}):e.edgeConfig;var s=Za({target:i.id},a);if(e.source===i.id&&(s.type="loop"),r.emit("beforecreateedge",{}),r.updateItem(e.edge,s,!1),r.get("enabledStack")){var l=Za(Za({},e.edge.getModel()),{itemType:"edge"}),u={};u.edges=[l],r.pushStack("add",{before:{},after:u})}r.emit("aftercreateedge",{edge:e.edge}),e.edge.getKeyShape().set("capture",!0),e.edge=null,e.addingEdge=!1}else{if(!e.shouldBegin.call(e,t))return;a=void 0;a=o&&gs(o)?o({source:i.id,target:i.id}):e.edgeConfig,e.edge=r.addItem("edge",Za({source:i.id,target:i.id},a),!1),e.source=i.id,e.addingEdge=!0,e.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(t){var e=this;if(!e.key||e.keydown){var n={x:t.x,y:t.y};e.graph.findById(e.source)?e.addingEdge&&e.edge&&e.graph.updateItem(e.edge,{target:n},!1):e.addingEdge=!1}},cancelCreating:function(t){var e=this;if(!e.key||e.keydown){var n=e.graph,r=t.item;if(e.addingEdge&&t.target&&t.target.isCanvas&&t.target.isCanvas())return n.removeItem(e.edge,!1),e.edge=null,void(e.addingEdge=!1);e.addingEdge&&e.edge===r&&(n.removeItem(e.edge,!1),e.edge=null,e.addingEdge=!1)}},onKeyDown:function(t){var e=this,n=t.key;n&&(n.toLowerCase()===e.key.toLowerCase()?e.keydown=!0:e.keydown=!1)},onKeyUp:function(){var t=this;t.addingEdge&&t.edge&&(t.graph.removeItem(t.edge,!1),t.addingEdge=!1,t.edge=null),this.keydown=!1}},"shortcuts-call":{getDefaultCfg:function(){return{trigger:"ctrl",combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return NX.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="ctrl",console.warn("Behavior shortcuts-fit-view 的 trigger 参数 '"+this.trigger+"' 不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(t){var e=t.key;if(e){var n=this.trigger.toLowerCase(),r=e.toLowerCase();this.triggerKeydown||(this.triggerKeydown=r===n||"control"===r&&"ctrl"===n||"ctrl"===r&&"control"===n);var i=this.graph;if(!i[this.functionName])return console.warn("Behavior shortcuts-fit-view 的 functionName 参数 '"+this.functionName+"' 不合法，它不是 Graph 的一个函数名"),{};if(!this.triggerKeydown||this.combinedKey){var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(r===o||"control"===r&&"ctrl"===o||"ctrl"===r&&"control"===o)&&(this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]())}else this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]()}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},"scroll-canvas":{getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0}},getEvents:function(){return this.zoomKey&&-1!==zX.indexOf(this.zoomKey)||(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(t){var e=this,n=this.graph,r=t[this.zoomKey+"Key"];if("control"===this.zoomKey&&(r=t.ctrlKey),r){var i=n.get("canvas").getPointByClient(t.clientX,t.clientY),o=n.getZoom();t.wheelDelta>0?o+=.05*o:o-=.05*o,n.zoomTo(o,{x:i.x,y:i.y})}else{var a=t.deltaX||t.movementX,s=t.deltaY||t.movementY;!s&&navigator.userAgent.indexOf("Firefox")>-1&&(s=125*-t.wheelDelta/3);var l=this.graph.get("width"),u=this.graph.get("height"),c=this.graph.get("canvas").getCanvasBBox(),d=this.scalableRange,h=this.scalableRange;d<1&&d>-1&&(d*=l,h*=u);var f=c.minX,p=c.maxX,g=c.minY,v=c.maxY;a>0?p<-d?a=0:p-a<-d&&(a=p+d):a<0&&(f>l+d?a=0:f-a>l+d&&(a=f-(l+d))),s>0?v<-h?s=0:v-s<-h&&(s=v+h):s<0&&(g>u+h?s=0:g-s>u+h&&(s=g-(u+h))),"x"===this.get("direction")?s=0:"y"===this.get("direction")&&(a=0),n.translate(-a,-s)}if(t.preventDefault(),this.get("enableOptimize")){var m=this.get("optimizeZoom"),y=this.get("optimized"),b=n.getNodes(),x=n.getEdges(),w=b.length,C=x.length;if(!y){for(var S=0;S<w;S++){var k=b[S];if(!k.destroyed)for(var E=(_=k.get("group").get("children")).length,M=0;M<E;M++){(T=_[M]).destoryed||T.get("isKeyShape")||(T.set("ori-visibility",T.get("ori-visibility")||T.get("visible")),T.hide())}}for(var A=0;A<C;A++){var _;for(E=(_=x[A].get("group").get("children")).length,M=0;M<E;M++){var T;(T=_[M]).set("ori-visibility",T.get("ori-visibility")||T.get("visible")),T.hide()}}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var P=setTimeout((function(){var t=n.getZoom();if(e.get("optimized")){e.set("optimized",!1);for(var r=0;r<w;r++){var i=b[r],o=(u=i.get("group").get("children")).length;if(t<m)(s=(c=i.getKeyShape()).get("ori-visibility"))&&c.show();else for(var a=0;a<o;a++){var s=(h=u[a]).get("ori-visibility");!h.get("visible")&&s&&s&&h.show()}}for(var l=0;l<C;l++){var u,c,d=x[l];o=(u=d.get("group").get("children")).length;if(t<m)(s=(c=d.getKeyShape()).get("ori-visibility"))&&c.show();else for(a=0;a<o;a++){var h;if(!(h=u[a]).get("visible"))(s=h.get("ori-visibility"))&&h.show()}}}}),100);this.set("timeout",P)}}}},(function(t,e){Wm(e,t)}));var jX=Za(Za({},Cd),Ey),GX=RY.Minimap,UX=RY.Tooltip,$X={version:dw.version,Graph:MV,TreeGraph:TV,Util:iV,Layout:f$,TreeLayout:aV,registerLayout:function(t,e){e.isCustomLayout=!0,Bw(t,e)},Global:dw,registerBehavior:Wm,registerCombo:Vm,registerEdge:$m,registerNode:Um,Minimap:RY.Minimap,Grid:RY.Grid,Bundling:RY.Bundling,Menu:RY.Menu,ToolBar:RY.ToolBar,Tooltip:RY.Tooltip,Legend:RY.Legend,TimeBar:RY.TimeBar,SnapLine:RY.SnapLine,Fisheye:RY.Fisheye,ImageMinimap:RY.ImageMinimap,EdgeFilterLens:RY.EdgeFilterLens,Algorithm:jX,Arrow:{triangle:function(t,e,n){void 0===t&&(t=10),void 0===e&&(e=15),void 0===n&&(n=0);var r=2*n;return"M "+r+",0 L "+(r+e)+",-"+t/2+" L "+(r+e)+","+t/2+" Z"},vee:function(t,e,n){void 0===t&&(t=15),void 0===e&&(e=20),void 0===n&&(n=0);var r=2*n;return"M "+r+",0 L "+(r+e)+",-"+t/2+"\n        L "+(r+2*e/3)+",0 L "+(r+e)+","+t/2+" Z"},circle:function(t,e){return void 0===t&&(t=5),void 0===e&&(e=0),"M "+2*e+", 0\n            a "+t+","+t+" 0 1,0 "+2*t+",0\n            a "+t+","+t+" 0 1,0 "+2*-t+",0"},rect:function(t,e,n){void 0===t&&(t=10),void 0===e&&(e=10),void 0===n&&(n=0);var r=2*n;return"M "+r+","+-t/2+" \n        L "+(r+e)+","+-t/2+" \n        L "+(r+e)+","+t/2+" \n        L "+r+","+t/2+" Z"},diamond:function(t,e,n){void 0===t&&(t=15),void 0===e&&(e=15),void 0===n&&(n=0);var r=2*n;return"M "+r+",0 \n        L "+(r+e/2)+","+-t/2+" \n        L "+(r+e)+",0 \n        L "+(r+e/2)+","+t/2+" Z"},triangleRect:function(t,e,n,r,i,o){void 0===t&&(t=15),void 0===e&&(e=15),void 0===n&&(n=15),void 0===r&&(r=3),void 0===i&&(i=5),void 0===o&&(o=0);var a=2*o,s=a+e+i;return"M "+a+",0 L "+(a+e)+",-"+t/2+" L "+(a+e)+","+t/2+" Z\n            M "+s+", -"+n/2+"\n            L "+(s+r)+" -"+n/2+"\n            L "+(s+r)+" "+n/2+"\n            L "+s+" "+n/2+"\n            Z"}},Marker:Bm,Shape:Vv};function VX(){const t=[],e=e=>{const n=t.indexOf(e);-1!==n&&t.splice(n,1)};return{on:n=>(t.push(n),{off:()=>e(n)}),off:e,trigger:e=>{t.forEach((t=>t(e)))}}}$X.version="4.3.6";const WX="undefined"!=typeof window;function HX(t){return!!Y&&(function(t){Y&&Y.cleanups.push(t)}(t),!0)}function YX(t,e=200){return function(t,e){return function(...n){t((()=>e.apply(this,n)),{fn:e,thisArg:this,args:n})}}(function(t){let e;return n=>{const r=be(t);if(e&&clearTimeout(e),r<=0)return n();e=setTimeout(n,r)}}(e),t)}const XX=WX?window:void 0;function qX(t,e,n={}){const{window:r=XX}=n,i=
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(n,["window"]);let o;const a=r&&"ResizeObserver"in r,s=()=>{o&&(o.disconnect(),o=void 0)},l=xi((()=>function(t){var e,n;const r=be(t);return null!==(n=null===(e=r)||void 0===e?void 0:e.$el)&&void 0!==n?n:r}(t)),(t=>{s(),a&&r&&t&&(o=new r.ResizeObserver(e),o.observe(t,i))}),{immediate:!0,flush:"post"}),u=()=>{s(),l()};return HX(u),{isSupported:a,stop:u}}WX&&window.document,WX&&window.navigator;const KX={json:"application/json",text:"text/plain",formData:"multipart/form-data"};function ZX(t){return function(t,...e){return e.some((e=>e in t))}(t,"immediate","refetch","beforeFetch","afterFetch")}function QX(t){return t instanceof Headers?Object.fromEntries([...t.entries()]):t}function JX(t,...e){const n="function"==typeof AbortController;let r={},i={immediate:!0,refetch:!1};const o={method:"get",type:"text",payload:void 0};e.length>0&&(ZX(e[0])?i=Object.assign(Object.assign({},i),e[0]):r=e[0]),e.length>1&&ZX(e[1])&&(i=Object.assign(Object.assign({},i),e[1]));const{fetch:a=(null==XX?void 0:XX.fetch)}=i,s=VX(),l=VX(),u=VX(),c=ge(!1),d=ge(!1),h=ge(!1),f=ge(null),p=ve(null),g=ge(null),v=ve(null),m=Ee((()=>n&&d.value));let y;const b=t=>{d.value=t,c.value=!t},x=async(e=!1)=>{var c;b(!0),g.value=null,f.value=null,h.value=!1,y=void 0,n&&(y=new AbortController,y.signal.onabort=()=>h.value=!0,r=Object.assign(Object.assign({},r),{signal:y.signal}));const d={method:o.method,headers:{}};if(o.payload){const t=QX(d.headers);o.payloadType&&(t["Content-Type"]=null!==(c=KX[o.payloadType])&&void 0!==c?c:o.payloadType),d.body="json"===o.payloadType?JSON.stringify(be(o.payload)):be(o.payload)}let m=!1;const x={url:be(t),options:r,cancel:()=>{m=!0}};return i.beforeFetch&&Object.assign(x,await i.beforeFetch(x)),m||!a?(b(!1),Promise.resolve()):new Promise(((t,n)=>{var r;a(x.url,Object.assign(Object.assign(Object.assign({},d),x.options),{headers:Object.assign(Object.assign({},QX(d.headers)),QX(null===(r=x.options)||void 0===r?void 0:r.headers))})).then((async e=>{p.value=e,f.value=e.status;let n=await e[o.type]();if(i.afterFetch&&({data:n}=await i.afterFetch({data:n,response:e})),v.value=n,!e.ok)throw new Error(e.statusText);s.trigger(e),t(e)})).catch((r=>{g.value=r.message||r.name,l.trigger(r),e?n(r):t(void 0)})).finally((()=>{b(!1),u.trigger(null)}))}))};xi((()=>[be(t),be(i.refetch)]),(()=>be(i.refetch)&&x()),{deep:!0});const w={isFinished:c,statusCode:f,response:p,error:g,data:v,isFetching:d,canAbort:m,aborted:h,abort:()=>{n&&y&&y.abort()},execute:x,onFetchResponse:s.on,onFetchError:l.on,onFetchFinally:u.on,get:C("get"),put:C("put"),post:C("post"),delete:C("delete"),json:S("json"),text:S("text"),blob:S("blob"),arrayBuffer:S("arrayBuffer"),formData:S("formData")};function C(t){return(e,n)=>{if(!d.value)return o.method=t,o.payload=e,o.payloadType=n,pe(o.payload)&&xi((()=>[be(o.payload),be(i.refetch)]),(()=>be(i.refetch)&&x()),{deep:!0}),!n&&be(e)&&Object.getPrototypeOf(be(e))===Object.prototype&&(o.payloadType="json"),w}}function S(t){return()=>{if(!d.value)return o.type=t,w}}return i.immediate&&setTimeout(x,0),w}var tq,eq;(eq=tq||(tq={})).UP="UP",eq.RIGHT="RIGHT",eq.DOWN="DOWN",eq.LEFT="LEFT",eq.NONE="NONE";let nq=[];const rq=new WeakMap;function iq(){nq.forEach((t=>t(...rq.get(t)))),nq=[]}function oq(t,...e){rq.set(t,e),nq.includes(t)||1===nq.push(t)&&requestAnimationFrame(iq)}function aq(t,e){let{target:n}=t;for(;n;){if(n.dataset&&void 0!==n.dataset[e])return!0;n=n.parentElement}return!1}function sq(t){return"string"==typeof t?t.endsWith("px")?Number(t.slice(0,t.length-2)):Number(t):t}function lq(t){if(null!=t)return"number"==typeof t?`${t}px`:t.endsWith("px")?t:`${t}px`}function uq(t,e){const n=t.trim().split(/\s+/g),r={top:n[0]};switch(n.length){case 1:r.right=n[0],r.bottom=n[0],r.left=n[0];break;case 2:r.right=n[1],r.left=n[1],r.bottom=n[0];break;case 3:r.right=n[1],r.bottom=n[2],r.left=n[1];break;case 4:r.right=n[1],r.bottom=n[2],r.left=n[3];break;default:throw new Error("[seemly/getMargin]:"+t+" is not a valid value.")}return void 0===e?r:r[e]}var cq={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"};const dq="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",hq="([0-9A-Fa-f])",fq="([0-9A-Fa-f]{2})",pq=new RegExp(`^\\s*rgb\\s*\\(${dq},${dq},${dq}\\)\\s*$`),gq=new RegExp(`^\\s*rgba\\s*\\(${dq},${dq},${dq},${dq}\\)\\s*$`),vq=new RegExp(`^\\s*#${hq}${hq}${hq}\\s*$`),mq=new RegExp(`^\\s*#${fq}${fq}${fq}\\s*$`),yq=new RegExp(`^\\s*#${hq}${hq}${hq}${hq}\\s*$`),bq=new RegExp(`^\\s*#${fq}${fq}${fq}${fq}\\s*$`);function xq(t){return parseInt(t,16)}function wq(t){try{let e;if(e=mq.exec(t))return[xq(e[1]),xq(e[2]),xq(e[3]),1];if(e=pq.exec(t))return[_q(e[1]),_q(e[5]),_q(e[9]),1];if(e=gq.exec(t))return[_q(e[1]),_q(e[5]),_q(e[9]),Aq(e[13])];if(e=vq.exec(t))return[xq(e[1]+e[1]),xq(e[2]+e[2]),xq(e[3]+e[3]),1];if(e=bq.exec(t))return[xq(e[1]),xq(e[2]),xq(e[3]),Aq(xq(e[4])/255)];if(e=yq.exec(t))return[xq(e[1]+e[1]),xq(e[2]+e[2]),xq(e[3]+e[3]),Aq(xq(e[4]+e[4])/255)];if(t in cq)return wq(cq[t]);throw new Error(`[seemly/rgba]: Invalid color value ${t}.`)}catch(PCt){throw PCt}}function Cq(t,e,n,r){return`rgba(${_q(t)}, ${_q(e)}, ${_q(n)}, ${i=r,i>1?1:i<0?0:i})`;var i}function Sq(t,e,n,r,i){return _q((t*e*(1-r)+n*r)/i)}function kq(t,e){Array.isArray(t)||(t=wq(t)),Array.isArray(e)||(e=wq(e));const n=t[3],r=e[3],i=Aq(n+r-n*r);return Cq(Sq(t[0],n,e[0],r,i),Sq(t[1],n,e[1],r,i),Sq(t[2],n,e[2],r,i),i)}function Eq(t,e){const[n,r,i,o=1]=Array.isArray(t)?t:wq(t);return e.alpha?Cq(n,r,i,e.alpha):Cq(n,r,i,o)}function Mq(t,e){const[n,r,i,o=1]=Array.isArray(t)?t:wq(t),{lightness:a=1,alpha:s=1}=e;return function(t){const[e,n,r]=t;if(3 in t)return`rgba(${_q(e)}, ${_q(n)}, ${_q(r)}, ${Aq(t[3])})`;return`rgba(${_q(e)}, ${_q(n)}, ${_q(r)}, 1)`}([n*a,r*a,i*a,o*s])}function Aq(t){const e=Math.round(100*Number(t))/100;return e>1?1:e<0?0:e}function _q(t){const e=Math.round(Number(t));return e>255?255:e<0?0:e}function Tq(t=8){return Math.random().toString(16).slice(2,2+t)}function Pq(t,e){const n=[];for(let r=0;r<t;++r)n.push(e);return n}const Iq=Symbol("formItem");function Dq(t,{defaultSize:e="medium",mergedSize:n,mergedDisabled:r}={}){const i=je(Iq,null);ze(Iq,null);const o=Ee(n?()=>n(i):()=>{const{size:n}=t;if(n)return n;if(i){const{mergedSize:t}=i;if(void 0!==t.value)return t.value}return e}),a=Ee(r?()=>r(i):()=>{const{disabled:e}=t;return void 0!==e?e:!!i&&i.disabled.value});return cn((()=>{i&&i.restoreValidation()})),{mergedSizeRef:o,mergedDisabledRef:a,nTriggerFormBlur(){i&&i.handleContentBlur()},nTriggerFormChange(){i&&i.handleContentChange()},nTriggerFormFocus(){i&&i.handleContentFocus()},nTriggerFormInput(){i&&i.handleContentInput()}}}var Oq="object"==typeof global&&global&&global.Object===Object&&global,Rq="object"==typeof self&&self&&self.Object===Object&&self,Lq=Oq||Rq||Function("return this")(),Bq=Lq.Symbol,Fq=Object.prototype,Nq=Fq.hasOwnProperty,zq=Fq.toString,jq=Bq?Bq.toStringTag:void 0;var Gq=Object.prototype.toString;var Uq=Bq?Bq.toStringTag:void 0;function $q(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Uq&&Uq in Object(t)?function(t){var e=Nq.call(t,jq),n=t[jq];try{t[jq]=void 0;var r=!0}catch(PCt){}var i=zq.call(t);return r&&(e?t[jq]=n:delete t[jq]),i}(t):function(t){return Gq.call(t)}(t)}function Vq(t){return null!=t&&"object"==typeof t}function Wq(t){return"symbol"==typeof t||Vq(t)&&"[object Symbol]"==$q(t)}var Hq=Array.isArray,Yq=Bq?Bq.prototype:void 0,Xq=Yq?Yq.toString:void 0;function qq(t){if("string"==typeof t)return t;if(Hq(t))return function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}(t,qq)+"";if(Wq(t))return Xq?Xq.call(t):"";var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}function Kq(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Zq(t){return t}function Qq(t){if(!Kq(t))return!1;var e=$q(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var Jq=Lq["__core-js_shared__"],tK=function(){var t=/[^.]+$/.exec(Jq&&Jq.keys&&Jq.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var eK=Function.prototype.toString;var nK=/^\[object .+?Constructor\]$/,rK=Function.prototype,iK=Object.prototype,oK=rK.toString,aK=iK.hasOwnProperty,sK=RegExp("^"+oK.call(aK).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function lK(t){return!(!Kq(t)||(e=t,tK&&tK in e))&&(Qq(t)?sK:nK).test(function(t){if(null!=t){try{return eK.call(t)}catch(PCt){}try{return t+""}catch(PCt){}}return""}(t));var e}function uK(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return lK(n)?n:void 0}var cK=Object.create,dK=function(){function t(){}return function(e){if(!Kq(e))return{};if(cK)return cK(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function hK(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var fK=Date.now;var pK,gK,vK,mK=function(){try{var t=uK(Object,"defineProperty");return t({},"",{}),t}catch(PCt){}}(),yK=(pK=mK?function(t,e){return mK(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:Zq,gK=0,vK=0,function(){var t=fK(),e=16-(t-vK);if(vK=t,e>0){if(++gK>=800)return arguments[0]}else gK=0;return pK.apply(void 0,arguments)}),bK=/^(?:0|[1-9]\d*)$/;function xK(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&bK.test(t))&&t>-1&&t%1==0&&t<e}function wK(t,e,n){"__proto__"==e&&mK?mK(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function CK(t,e){return t===e||t!=t&&e!=e}var SK=Object.prototype.hasOwnProperty;function kK(t,e,n){var r=t[e];SK.call(t,e)&&CK(r,n)&&(void 0!==n||e in t)||wK(t,e,n)}var EK=Math.max;function MK(t,e){return yK(function(t,e,n){return e=EK(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=EK(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),hK(t,this,s)}}(t,e,Zq),t+"")}function AK(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function _K(t){return null!=t&&AK(t.length)&&!Qq(t)}var TK=Object.prototype;function PK(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||TK)}function IK(t){return Vq(t)&&"[object Arguments]"==$q(t)}var DK=Object.prototype,OK=DK.hasOwnProperty,RK=DK.propertyIsEnumerable,LK=IK(function(){return arguments}())?IK:function(t){return Vq(t)&&OK.call(t,"callee")&&!RK.call(t,"callee")};var BK="object"==typeof exports&&exports&&!exports.nodeType&&exports,FK=BK&&"object"==typeof module&&module&&!module.nodeType&&module,NK=FK&&FK.exports===BK?Lq.Buffer:void 0,zK=(NK?NK.isBuffer:void 0)||function(){return!1},jK={};jK["[object Float32Array]"]=jK["[object Float64Array]"]=jK["[object Int8Array]"]=jK["[object Int16Array]"]=jK["[object Int32Array]"]=jK["[object Uint8Array]"]=jK["[object Uint8ClampedArray]"]=jK["[object Uint16Array]"]=jK["[object Uint32Array]"]=!0,jK["[object Arguments]"]=jK["[object Array]"]=jK["[object ArrayBuffer]"]=jK["[object Boolean]"]=jK["[object DataView]"]=jK["[object Date]"]=jK["[object Error]"]=jK["[object Function]"]=jK["[object Map]"]=jK["[object Number]"]=jK["[object Object]"]=jK["[object RegExp]"]=jK["[object Set]"]=jK["[object String]"]=jK["[object WeakMap]"]=!1;var GK="object"==typeof exports&&exports&&!exports.nodeType&&exports,UK=GK&&"object"==typeof module&&module&&!module.nodeType&&module,$K=UK&&UK.exports===GK&&Oq.process,VK=function(){try{var t=UK&&UK.require&&UK.require("util").types;return t||$K&&$K.binding&&$K.binding("util")}catch(PCt){}}(),WK=VK&&VK.isTypedArray,HK=WK?function(t){return function(e){return t(e)}}(WK):function(t){return Vq(t)&&AK(t.length)&&!!jK[$q(t)]},YK=Object.prototype.hasOwnProperty;function XK(t,e){var n=Hq(t),r=!n&&LK(t),i=!n&&!r&&zK(t),o=!n&&!r&&!i&&HK(t),a=n||r||i||o,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],l=s.length;for(var u in t)!e&&!YK.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||xK(u,l))||s.push(u);return s}var qK=Object.prototype.hasOwnProperty;function KK(t){if(!Kq(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=PK(t),n=[];for(var r in t)("constructor"!=r||!e&&qK.call(t,r))&&n.push(r);return n}function ZK(t){return _K(t)?XK(t,!0):KK(t)}var QK=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,JK=/^\w*$/;var tZ=uK(Object,"create");var eZ=Object.prototype.hasOwnProperty;var nZ=Object.prototype.hasOwnProperty;function rZ(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function iZ(t,e){for(var n=t.length;n--;)if(CK(t[n][0],e))return n;return-1}rZ.prototype.clear=function(){this.__data__=tZ?tZ(null):{},this.size=0},rZ.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},rZ.prototype.get=function(t){var e=this.__data__;if(tZ){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return eZ.call(e,t)?e[t]:void 0},rZ.prototype.has=function(t){var e=this.__data__;return tZ?void 0!==e[t]:nZ.call(e,t)},rZ.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=tZ&&void 0===e?"__lodash_hash_undefined__":e,this};var oZ=Array.prototype.splice;function aZ(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}aZ.prototype.clear=function(){this.__data__=[],this.size=0},aZ.prototype.delete=function(t){var e=this.__data__,n=iZ(e,t);return!(n<0)&&(n==e.length-1?e.pop():oZ.call(e,n,1),--this.size,!0)},aZ.prototype.get=function(t){var e=this.__data__,n=iZ(e,t);return n<0?void 0:e[n][1]},aZ.prototype.has=function(t){return iZ(this.__data__,t)>-1},aZ.prototype.set=function(t,e){var n=this.__data__,r=iZ(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var sZ=uK(Lq,"Map");function lZ(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function uZ(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}uZ.prototype.clear=function(){this.size=0,this.__data__={hash:new rZ,map:new(sZ||aZ),string:new rZ}},uZ.prototype.delete=function(t){var e=lZ(this,t).delete(t);return this.size-=e?1:0,e},uZ.prototype.get=function(t){return lZ(this,t).get(t)},uZ.prototype.has=function(t){return lZ(this,t).has(t)},uZ.prototype.set=function(t,e){var n=lZ(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function cZ(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(cZ.Cache||uZ),n}cZ.Cache=uZ;var dZ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hZ=/\\(\\)?/g,fZ=function(t){var e=cZ(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(dZ,(function(t,n,r,i){e.push(r?i.replace(hZ,"$1"):n||t)})),e}));function pZ(t){return null==t?"":qq(t)}function gZ(t,e){return Hq(t)?t:function(t,e){if(Hq(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Wq(t))||JK.test(t)||!QK.test(t)||null!=e&&t in Object(e)}(t,e)?[t]:fZ(pZ(t))}function vZ(t){if("string"==typeof t||Wq(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}function mZ(t,e,n){var r=null==t?void 0:function(t,e){for(var n=0,r=(e=gZ(e,t)).length;null!=t&&n<r;)t=t[vZ(e[n++])];return n&&n==r?t:void 0}(t,e);return void 0===r?n:r}var yZ=function(t,e){return function(n){return t(e(n))}}(Object.getPrototypeOf,Object),bZ=Function.prototype,xZ=Object.prototype,wZ=bZ.toString,CZ=xZ.hasOwnProperty,SZ=wZ.call(Object);function kZ(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}(t,e,n)}var EZ=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function MZ(t){return EZ.test(t)}var AZ="[\\ud800-\\udfff]",_Z="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",TZ="\\ud83c[\\udffb-\\udfff]",PZ="[^\\ud800-\\udfff]",IZ="(?:\\ud83c[\\udde6-\\uddff]){2}",DZ="[\\ud800-\\udbff][\\udc00-\\udfff]",OZ="(?:"+_Z+"|"+TZ+")"+"?",RZ="[\\ufe0e\\ufe0f]?"+OZ+("(?:\\u200d(?:"+[PZ,IZ,DZ].join("|")+")[\\ufe0e\\ufe0f]?"+OZ+")*"),LZ="(?:"+[PZ+_Z+"?",_Z,IZ,DZ,AZ].join("|")+")",BZ=RegExp(TZ+"(?="+TZ+")|"+LZ+RZ,"g");function FZ(t){return MZ(t)?function(t){return t.match(BZ)||[]}(t):function(t){return t.split("")}(t)}var NZ,zZ=(NZ="toUpperCase",function(t){var e=MZ(t=pZ(t))?FZ(t):void 0,n=e?e[0]:t.charAt(0),r=e?kZ(e,1).join(""):t.slice(1);return n[NZ]()+r});function jZ(t){var e=this.__data__=new aZ(t);this.size=e.size}jZ.prototype.clear=function(){this.__data__=new aZ,this.size=0},jZ.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},jZ.prototype.get=function(t){return this.__data__.get(t)},jZ.prototype.has=function(t){return this.__data__.has(t)},jZ.prototype.set=function(t,e){var n=this.__data__;if(n instanceof aZ){var r=n.__data__;if(!sZ||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new uZ(r)}return n.set(t,e),this.size=n.size,this};var GZ="object"==typeof exports&&exports&&!exports.nodeType&&exports,UZ=GZ&&"object"==typeof module&&module&&!module.nodeType&&module,$Z=UZ&&UZ.exports===GZ?Lq.Buffer:void 0,VZ=$Z?$Z.allocUnsafe:void 0;var WZ=Lq.Uint8Array;function HZ(t,e){var n,r,i=e?(n=t.buffer,r=new n.constructor(n.byteLength),new WZ(r).set(new WZ(n)),r):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}var YZ,XZ=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),a=o.length;a--;){var s=o[YZ?a:++r];if(!1===e(i[s],s,i))break}return t};function qZ(t,e,n){(void 0!==n&&!CK(t[e],n)||void 0===n&&!(e in t))&&wK(t,e,n)}function KZ(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function ZZ(t){return function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=r?r(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),i?wK(n,s,l):kK(n,s,l)}return n}(t,ZK(t))}function QZ(t,e,n,r,i,o,a){var s=KZ(t,n),l=KZ(e,n),u=a.get(l);if(u)qZ(t,n,u);else{var c,d=o?o(s,l,n+"",t,e,a):void 0,h=void 0===d;if(h){var f=Hq(l),p=!f&&zK(l),g=!f&&!p&&HK(l);d=l,f||p||g?Hq(s)?d=s:Vq(c=s)&&_K(c)?d=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(s):p?(h=!1,d=function(t,e){if(e)return t.slice();var n=t.length,r=VZ?VZ(n):new t.constructor(n);return t.copy(r),r}(l,!0)):g?(h=!1,d=HZ(l,!0)):d=[]:function(t){if(!Vq(t)||"[object Object]"!=$q(t))return!1;var e=yZ(t);if(null===e)return!0;var n=CZ.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&wZ.call(n)==SZ}(l)||LK(l)?(d=s,LK(s)?d=ZZ(s):Kq(s)&&!Qq(s)||(d=function(t){return"function"!=typeof t.constructor||PK(t)?{}:dK(yZ(t))}(l))):h=!1}h&&(a.set(l,d),i(d,l,r,o,a),a.delete(l)),qZ(t,n,d)}}function JZ(t,e,n,r,i){t!==e&&XZ(e,(function(o,a){if(i||(i=new jZ),Kq(o))QZ(t,e,a,n,JZ,r,i);else{var s=r?r(KZ(t,a),o,a+"",t,e,i):void 0;void 0===s&&(s=o),qZ(t,a,s)}}),ZK)}var tQ,eQ=(tQ=function(t,e,n){JZ(t,e,n)},MK((function(t,e){var n=-1,r=e.length,i=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(i=tQ.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(t,e,n){if(!Kq(n))return!1;var r=typeof e;return!!("number"==r?_K(n)&&xK(e,n.length):"string"==r&&e in n)&&CK(n[e],t)}(e[0],e[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++n<r;){var a=e[n];a&&tQ(t,a,n,i)}return t})));const nQ=Symbol("@css-render/vue3-ssr");function rQ(t,e){const n=je(nQ,null);if(null===n)return void console.error("[css-render/vue3-ssr]: no ssr context found.");const{styles:r,ids:i}=n;i.has(t)||null!==r&&(i.add(t),r.push(function(t,e){return`<style cssr-id="${t}">\n${e}\n</style>`}(t,e)))}function iQ(){const t=je(nQ,null);if(null!==t)return{adapter:rQ,context:t}}const oQ=/\s*,(?![^(]*\))\s*/g,aQ=/\s+/g;function sQ(t){let e=[""];return t.forEach((t=>{(t=t&&t.trim())&&(e=t.includes("&")?function(t,e){const n=[];return e.split(oQ).forEach((e=>{let r=function(t){let e=0;for(let n=0;n<t.length;++n)"&"===t[n]&&++e;return e}(e);if(!r)return void t.forEach((t=>{n.push((t&&t+" ")+e)}));if(1===r)return void t.forEach((t=>{n.push(e.replace("&",t))}));let i=[e];for(;r--;){const e=[];i.forEach((n=>{t.forEach((t=>{e.push(n.replace("&",t))}))})),i=e}i.forEach((t=>n.push(t)))})),n}(e,t):function(t,e){const n=[];return e.split(oQ).forEach((e=>{t.forEach((t=>{n.push((t&&t+" ")+e)}))})),n}(e,t))})),e.join(", ").replace(aQ," ")}const lQ=/[A-Z]/g;function uQ(t){return t.replace(lQ,(t=>"-"+t.toLowerCase()))}function cQ(t,e,n,r){if(!e)return"";const i=function(t,e,n){return"function"==typeof t?t({context:e.context,props:n}):t}(e,n,r);if(!i)return"";if("string"==typeof i)return`${t} {\n${i}\n}`;const o=Object.keys(i);if(0===o.length)return n.config.keepEmptyBlock?t+" {\n}":"";const a=t?[t+" {"]:[];return o.forEach((t=>{const e=i[t];"raw"!==t?(t=uQ(t),null!=e&&a.push(`  ${t}${function(t,e="  "){return"object"==typeof t&&null!==t?" {\n"+Object.entries(t).map((t=>e+`  ${uQ(t[0])}: ${t[1]};`)).join("\n")+"\n"+e+"}":`: ${t};`}(e)}`)):a.push("\n"+e+"\n")})),t&&a.push("}"),a.join("\n")}function dQ(t,e,n){t&&t.forEach((t=>{if(Array.isArray(t))dQ(t,e,n);else if("function"==typeof t){const r=t(e);Array.isArray(r)?dQ(r,e,n):r&&n(r)}else t&&n(t)}))}function hQ(t,e,n,r,i,o){const a=t.$;a&&"string"!=typeof a?"function"==typeof a?e.push(a({context:r.context,props:i})):(a.before&&a.before(r.context),a.$&&"string"!=typeof a.$?a.$&&e.push(a.$({context:r.context,props:i})):e.push(a.$)):e.push(a);const s=sQ(e),l=cQ(s,t.props,r,i);o&&l&&o.insertRule(l),!o&&l.length&&n.push(l),t.children&&dQ(t.children,{context:r.context,props:i},(t=>{if("string"==typeof t){const e=cQ(s,{raw:t},r,i);o?o.insertRule(e):n.push(e)}else hQ(t,e,n,r,i,o)})),e.pop(),a&&a.after&&a.after(r.context)}function fQ(t,e,n,r=!1){const i=[];return hQ(t,[],i,e,n,r?t.instance.__styleSheet:void 0),r?"":i.join("\n\n")}function pQ(t){if(!t)return;const e=t.parentElement;e&&e.removeChild(t)}function gQ(t){return document.querySelector(`style[cssr-id="${t}"]`)}function vQ(t,e,n,r,i,o,a,s){var l;if(o&&!s){if(void 0===n)return void console.error("[css-render/mount]: `id` is required in `slient` mode.");const i=window.__cssrContext;return void(i[n]||(i[n]=!0,fQ(e,t,r,o)))}let u;if(void 0===n&&(u=e.render(r),n=function(t){for(var e,n=0,r=0,i=t.length;i>=4;++r,i-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&t.charCodeAt(r+2))<<16;case 2:n^=(255&t.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(u)),s)return void s.adapter(n,null!=u?u:e.render(r));const c=gQ(n);if(null!==c&&!a)return c;const d=null!=c?c:function(t){const e=document.createElement("style");return e.setAttribute("cssr-id",t),e}(n);if(void 0===u&&(u=e.render(r)),d.textContent=u,null!==c)return c;if(i){const t=null!==(l=document.head.querySelector("style, link"))&&void 0!==l?l:null;document.head.insertBefore(d,t)}else document.head.appendChild(d);return function(t,e){t.push(e)}(e.els,d),null!=c?c:d}function mQ(t){return fQ(this,this.instance,t)}function yQ(t={}){const{id:e,ssr:n,props:r,head:i=!1,slient:o=!1,force:a=!1}=t;return vQ(this.instance,this,e,r,i,o,a,n)}function bQ(t={}){const{id:e}=t;!function(t,e,n){const{els:r}=e;if(void 0===n)r.forEach(pQ),e.els=[];else{const t=gQ(n);t&&r.includes(t)&&(pQ(t),e.els=r.filter((e=>e!==t)))}}(this.instance,this,e)}"undefined"!=typeof window&&(window.__cssrContext={});const xQ=function(t,e,n,r){return{instance:t,$:e,props:n,children:r,els:[],render:mQ,mount:yQ,unmount:bQ}};function wQ(t={}){let e=null;const n={c:(...t)=>function(t,e,n,r){return Array.isArray(e)?xQ(t,{$:null},null,e):Array.isArray(n)?xQ(t,e,null,n):Array.isArray(r)?xQ(t,e,n,r):xQ(t,e,n,null)}(n,...t),use:(t,...e)=>t.install(n,...e),find:gQ,context:{},config:t,get __styleSheet(){if(!e){const t=document.createElement("style");return document.head.appendChild(t),e=document.styleSheets[document.styleSheets.length-1],e}return e}};return n}function CQ(t,e){return t+("default"===e?"":e.replace(/^[a-z]/,(t=>t.toUpperCase())))}CQ("abc","def");const SQ=wQ(),kQ=function(t){let e,n=".",r="__",i="--";if(t){let e=t.blockPrefix;e&&(n=e),e=t.elementPrefix,e&&(r=e),e=t.modifierPrefix,e&&(i=e)}const o={install(t){e=t.c;const n=t.context;n.bem={},n.bem.b=null,n.bem.els=null}};return Object.assign(o,{cB:(...t)=>e(function(t){let e,r;return{before(t){e=t.bem.b,r=t.bem.els,t.bem.els=null},after(t){t.bem.b=e,t.bem.els=r},$:({context:e,props:r})=>(t="string"==typeof t?t:t({context:e,props:r}),e.bem.b=t,`${(null==r?void 0:r.bPrefix)||n}${e.bem.b}`)}}(t[0]),t[1],t[2]),cE:(...t)=>e(function(t){let e;return{before(t){e=t.bem.els},after(t){t.bem.els=e},$:({context:e,props:r})=>(t="string"==typeof t?t:t({context:e,props:r}),e.bem.els=t.split(",").map((t=>t.trim())),e.bem.els.map((t=>`${(null==r?void 0:r.bPrefix)||n}${e.bem.b}__${t}`)).join(", "))}}(t[0]),t[1],t[2]),cM:(...t)=>{return e((o=t[0],{$({context:t,props:e}){const a=(o="string"==typeof o?o:o({context:t,props:e})).split(",").map((t=>t.trim()));function s(o){return a.map((a=>`&${(null==e?void 0:e.bPrefix)||n}${t.bem.b}${void 0!==o?`${r}${o}`:""}${i}${a}`)).join(", ")}const l=t.bem.els;return null!==l?s(l[0]):s()}}),t[1],t[2]);var o},cNotM:(...t)=>{return e((o=t[0],{$({context:t,props:e}){o="string"==typeof o?o:o({context:t,props:e});const a=t.bem.els;return`&:not(${(null==e?void 0:e.bPrefix)||n}${t.bem.b}${null!==a&&a.length>0?`${r}${a[0]}`:""}${i}${o})`}}),t[1],t[2]);var o}}),o}({blockPrefix:".n-",elementPrefix:"__",modifierPrefix:"--"});SQ.use(kQ);const{c:EQ,find:MQ}=SQ,{cB:AQ,cE:_Q,cM:TQ,cNotM:PQ}=kQ;function IQ(t,e){return null===t?e:EQ([({props:{bPrefix:n}})=>EQ(`${n||".n-"}form-item`,[EQ(`${n||".n-"}form-item-blank`,[EQ(`&${n||".n-"}form-item-blank--${t}`,[e])])])])}function DQ(t){return EQ((({props:{bPrefix:t}})=>`${t||".n-"}modal, ${t||".n-"}drawer`),[t])}function OQ(t){return EQ((({props:{bPrefix:t}})=>`${t||".n-"}popover:not(${t||".n-"}tooltip)`),[t])}function RQ(t){return EQ((({props:{bPrefix:t}})=>`&${t||".n-"}modal`),t)}const LQ=(...t)=>EQ(">",[AQ(...t)]);var BQ={fontFamily:'v-sans, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontFamilyMono:"v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace",fontWeight:"400",fontWeightStrong:"500",cubicBezierEaseInOut:"cubic-bezier(.4, 0, .2, 1)",cubicBezierEaseOut:"cubic-bezier(0, 0, .2, 1)",cubicBezierEaseIn:"cubic-bezier(.4, 0, 1, 1)",borderRadius:"3px",borderRadiusSmall:"2px",fontSize:"14px",fontSizeTiny:"12px",fontSizeSmall:"14px",fontSizeMedium:"14px",fontSizeLarge:"15px",fontSizeHuge:"16px",lineHeight:"1.6",heightTiny:"22px",heightSmall:"28px",heightMedium:"34px",heightLarge:"40px",heightHuge:"46px",transformDebounceScale:"scale(1)"},FQ=EQ("body",`\n margin: 0;\n font-size: ${BQ.fontSize};\n font-family: ${BQ.fontFamily};\n line-height: ${BQ.lineHeight};\n -webkit-text-size-adjust: 100%;\n -webkit-tap-highlight-color: transparent;\n`,[EQ("input","\n font-family: inherit;\n font-size: inherit;\n ")]);function NQ(t){const e=ge(!!t.value);if(e.value)return ie(e);const n=xi(t,(t=>{t&&(e.value=!0,n())}));return ie(e)}function zQ(t){const e=Ee(t),n=ge(e.value);return xi(e,(t=>{n.value=t})),"function"==typeof t?n:{__v_isRef:!0,get value(){return n.value},set value(e){t.set(e)}}}function jQ(){return null!==zr()}const GQ="undefined"!=typeof window;var UQ,$Q;const VQ=GQ?null===($Q=null===(UQ=document)||void 0===UQ?void 0:UQ.fonts)||void 0===$Q?void 0:$Q.ready:void 0;let WQ=!1;void 0!==VQ?VQ.then((()=>{WQ=!0})):WQ=!0;const HQ={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function YQ(t,e,n){const r=HQ[t];let i=r.get(e);void 0===i&&r.set(e,i=new WeakMap);let o=i.get(n);return void 0===o&&i.set(n,o=function(t,e,n){if("mousemoveoutside"===t){const t=t=>{e.contains(t.target)||n(t)};return{mousemove:t,touchstart:t}}if("clickoutside"===t){let t=!1;const r=n=>{t=!e.contains(n.target)},i=r=>{t&&(e.contains(r.target)||n(r))};return{mousedown:r,mouseup:i,touchstart:r,touchend:i}}return console.error(`[evtd/create-trap-handler]: name \`${t}\` is invalid. This could be a bug of evtd.`),{}}(t,e,n)),o}const{on:XQ,off:qQ}=function(){if("undefined"==typeof window)return{on:()=>{},off:()=>{}};const t=new WeakMap,e=new WeakMap;function n(){t.set(this,!0)}function r(){t.set(this,!0),e.set(this,!0)}function i(t,e,n){const r=t[e];return t[e]=function(){return n.apply(t,arguments),r.apply(t,arguments)},t}function o(t,e){t[e]=Event.prototype[e]}const a=new WeakMap,s=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function l(){var t;return null!==(t=a.get(this))&&void 0!==t?t:null}function u(t,e){void 0!==s&&Object.defineProperty(t,"currentTarget",{configurable:!0,enumerable:!0,get:null!=e?e:s.get})}const c={bubble:{},capture:{}},d={},h=function(){const s=function(s){const{type:d,eventPhase:h,target:f,bubbles:p}=s;if(2===h)return;const g=1===h?"capture":"bubble";let v=f;const m=[];for(;null===v&&(v=window),m.push(v),v!==window;)v=v.parentNode||null;const y=c.capture[d],b=c.bubble[d];if(i(s,"stopPropagation",n),i(s,"stopImmediatePropagation",r),u(s,l),"capture"===g){if(void 0===y)return;for(let n=m.length-1;n>=0&&!t.has(s);--n){const t=m[n],r=y.get(t);if(void 0!==r){a.set(s,t);for(const t of r){if(e.has(s))break;t(s)}}if(0===n&&!p&&void 0!==b){const n=b.get(t);if(void 0!==n)for(const t of n){if(e.has(s))break;t(s)}}}}else if("bubble"===g){if(void 0===b)return;for(let n=0;n<m.length&&!t.has(s);++n){const t=m[n],r=b.get(t);if(void 0!==r){a.set(s,t);for(const t of r){if(e.has(s))break;t(s)}}}}o(s,"stopPropagation"),o(s,"stopImmediatePropagation"),u(s)};return s.displayName="evtdUnifiedHandler",s}(),f=function(){const t=function(t){const{type:e,eventPhase:n}=t;if(2!==n)return;const r=d[e];void 0!==r&&r.forEach((e=>e(t)))};return t.displayName="evtdUnifiedWindowEventHandler",t}();function p(t,e){const n=c[t];return void 0===n[e]&&(n[e]=new Map,window.addEventListener(e,h,"capture"===t)),n[e]}function g(t,e){let n=t.get(e);return void 0===n&&t.set(e,n=new Set),n}return{on:function(t,e,n,r){if(function(t,e,n,r){if("mousemoveoutside"===t||"clickoutside"===t){const i=YQ(t,e,n);return Object.keys(i).forEach((t=>{XQ(t,document,i[t],r)})),!0}return!1}(t,e,n,r))return;const i=g(p(!0===r||"object"==typeof r&&!0===r.capture?"capture":"bubble",t),e);if(i.has(n)||i.add(n),e===window){const e=function(t){return void 0===d[t]&&(d[t]=new Set,window.addEventListener(t,f)),d[t]}(t);e.has(n)||e.add(n)}},off:function(t,e,n,r){if(function(t,e,n,r){if("mousemoveoutside"===t||"clickoutside"===t){const i=YQ(t,e,n);return Object.keys(i).forEach((t=>{qQ(t,document,i[t],r)})),!0}return!1}(t,e,n,r))return;const i=!0===r||"object"==typeof r&&!0===r.capture,o=i?"capture":"bubble",a=p(o,t),s=g(a,e);if(e===window){if(!function(t,e,n,r){const i=c[e][n];if(void 0!==i){const e=i.get(t);if(void 0!==e&&e.has(r))return!0}return!1}(e,i?"bubble":"capture",t,n)&&function(t,e){const n=d[t];return!(void 0===n||!n.has(e))}(t,n)){const e=d[t];e.delete(n),0===e.size&&(window.removeEventListener(t,f),d[t]=void 0)}}s.has(n)&&s.delete(n),0===s.size&&a.delete(e),0===a.size&&(window.removeEventListener(t,h,"capture"===o),c[o][t]=void 0)}}}(),KQ=ge(null);function ZQ(t){KQ.value={x:t.clientX,y:t.clientY}}let QQ=0,JQ=!0;function tJ(){if(!GQ)return ie(ge(null));0===QQ&&XQ("click",window,ZQ,!0);const t=()=>{QQ+=1};return JQ&&(JQ=jQ())?(an(t),cn((()=>{QQ-=1,0===QQ&&qQ("click",window,ZQ,!0)}))):t(),ie(KQ)}const eJ=ge(void 0);let nJ=0;function rJ(){eJ.value=Date.now()}let iJ=!0;function oJ(t){if(!GQ)return ie(ge(!1));const e=ge(!1);let n=null;function r(){null!==n&&window.clearTimeout(n)}function i(){r(),e.value=!0,n=window.setTimeout((()=>{e.value=!1}),t)}0===nJ&&XQ("click",window,rJ,!0);const o=()=>{nJ+=1,XQ("click",window,i,!0)};return iJ&&(iJ=jQ())?(an(o),cn((()=>{nJ-=1,0===nJ&&qQ("click",window,rJ,!0),qQ("click",window,i,!0),r()}))):o(),ie(e)}function aJ(t,e){return xi(t,(t=>{void 0!==t&&(e.value=t)})),Ee((()=>void 0===t.value?e.value:t.value))}function sJ(){const t=ge(!1);return sn((()=>{t.value=!0})),ie(t)}function lJ(t,e){return Ee((()=>{for(const n of e)if(void 0!==t[n])return t[n];return t[e[e.length-1]]}))}const uJ="undefined"!=typeof window&&(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!window.MSStream;function cJ(t={},e){const n=re({ctrl:!1,command:!1,win:!1,shift:!1,tab:!1}),{keydown:r,keyup:i}=t,o=t=>{switch(t.key){case"Control":n.ctrl=!0;break;case"Meta":n.command=!0,n.win=!0;break;case"Shift":n.shift=!0;break;case"Tab":n.tab=!0}void 0!==r&&Object.keys(r).forEach((e=>{if(e!==t.key)return;const n=r[e];if("function"==typeof n)n(t);else{const{stop:e=!1,prevent:r=!1}=n;e&&t.stopPropagation(),r&&t.preventDefault(),n.handler(t)}}))},a=t=>{switch(t.key){case"Control":n.ctrl=!1;break;case"Meta":n.command=!1,n.win=!1;break;case"Shift":n.shift=!1;break;case"Tab":n.tab=!1}void 0!==i&&Object.keys(i).forEach((e=>{if(e!==t.key)return;const n=i[e];if("function"==typeof n)n(t);else{const{stop:e=!1,prevent:r=!1}=n;e&&t.stopPropagation(),r&&t.preventDefault(),n.handler(t)}}))},s=()=>{(void 0===e||e.value)&&(XQ("keydown",document,o),XQ("keyup",document,a)),void 0!==e&&xi(e,(t=>{t?(XQ("keydown",document,o),XQ("keyup",document,a)):(qQ("keydown",document,o),qQ("keyup",document,a))}))};return jQ()?(an(s),cn((()=>{(void 0===e||e.value)&&(qQ("keydown",document,o),qQ("keyup",document,a))}))):s(),ie(n)}function dJ(t,e="default",n=[]){const r=t.$slots[e];return void 0===r?n:r()}function hJ(t,e=[],n){const r={};return e.forEach((e=>{r[e]=t[e]})),Object.assign(r,n)}function fJ(t,e=!0,n=[]){return t.forEach((t=>{if(null!==t)if("object"==typeof t)if(Array.isArray(t))fJ(t,e,n);else if(t.type===ir){if(null===t.children)return;Array.isArray(t.children)&&fJ(t.children,e,n)}else t.type!==ar&&n.push(t);else"string"!=typeof t&&"number"!=typeof t||n.push(kr(String(t)))})),n}function pJ(t,...e){if(!Array.isArray(t))return t(...e);t.forEach((t=>pJ(t,...e)))}function gJ(t){return Object.keys(t)}const vJ=(t,...e)=>"function"==typeof t?t(...e):"string"==typeof t?kr(t):"number"==typeof t?kr(String(t)):null;function mJ(t,e){console.error(`[naive/${t}]: ${e}`)}function yJ(t,e){throw new Error(`[naive/${t}]: ${e}`)}function bJ(t){switch(typeof t){case"string":return t||void 0;case"number":return String(t);default:return}}function xJ(t,e="default",n){const r=t[e];if(!r)return mJ("getFirstSlotVNode",`slot[${e}] is empty`),null;const i=fJ(r(n));return 1===i.length?i[0]:(mJ("getFirstSlotVNode",`slot[${e}] should have exactly one child`),null)}function wJ(t){return e=>{t.value=e?e.$el:null}}const CJ=/^(\d|\.)+$/,SJ=/(\d|\.)+/;function kJ(t,{c:e=1,offset:n=0,attachPx:r=!0}={}){if("number"==typeof t){const r=(t+n)*e;return 0===r?"0":`${r}px`}if("string"==typeof t){if(CJ.test(t)){const i=(Number(t)+n)*e;return r?0===i?"0":`${i}px`:`${i}`}{const r=SJ.exec(t);return r?t.replace(SJ,String((Number(r[0])+n)*e)):t}}return t}const EJ=Symbol("modalBody"),MJ=Symbol("modal"),AJ=Symbol("drawerBody"),_J=Symbol("popoverBodyInjection"),TJ=Symbol("internal-select-menu"),PJ=Symbol("internal-select-menu-body");function IJ(t){const e=je(EJ,null),n=je(AJ,null),r=je(_J,null),i=je(PJ,null);return zQ((()=>{var o;const{to:a}=t;return void 0!==a?!1===a?"__disabled__":!0===a?"body":a:(null==e?void 0:e.value)?null!==(o=e.value.$el)&&void 0!==o?o:e.value:(null==n?void 0:n.value)?n.value:(null==r?void 0:r.value)?r.value:(null==i?void 0:i.value)?i.value:null!=a?a:"body"}))}IJ.tdkey="__disabled__",IJ.propTo={type:[String,Object,Boolean],default:void 0};let DJ=!1;function OJ(t,e,n){var r;const i=je(t,null);if(null===i)return;const o=null===(r=zr())||void 0===r?void 0:r.proxy;function a(t,n){const r=i[e];void 0!==n&&function(t,e){t[e]||(t[e]=[]);t[e].splice(t[e].findIndex((t=>t===o)),1)}(r,n),void 0!==t&&function(t,e){t[e]||(t[e]=[]);~t[e].findIndex((t=>t===o))||t[e].push(o)}(r,t)}xi(n,a),a(n.value),cn((()=>{a(void 0,n.value)}))}const RJ=Symbol("configProviderInjection");function LJ(t,e,n,r,i,o){const a=iQ();if(n){const t=()=>{const t=null==o?void 0:o.value;n.mount({id:void 0===t?e:t+e,head:!0,props:{bPrefix:t?`.${t}-`:void 0},ssr:a}),FQ.mount({id:"naive-ui/global",head:!0,ssr:a})};a?t():an(t)}const s=je(RJ,null);return Ee((()=>{var e;const{theme:{common:n,self:o,peers:a={}}={},themeOverrides:l={},builtinThemeOverrides:u={}}=i,{common:c,peers:d}=l,{common:h,[t]:{common:f,self:p,peers:g={}}={}}=(null==s?void 0:s.mergedThemeRef.value)||{},{common:v,[t]:m={}}=(null==s?void 0:s.mergedThemeOverridesRef.value)||{},{common:y,peers:b={}}=m,x=eQ({},n||f||h||r.common,v,y,c);return{common:x,self:eQ(null===(e=o||p||r.self)||void 0===e?void 0:e(x),u,m,l),peers:eQ({},r.peers,g,a),peerOverrides:eQ({},b,d)}}))}Ke({name:"ConfigProvider",alias:["App"],props:{abstract:Boolean,bordered:{type:Boolean,default:void 0},clsPrefix:String,locale:Object,dateLocale:Object,namespace:String,rtl:Array,tag:{type:String,default:"div"},hljs:Object,theme:Object,themeOverrides:Object,componentOptions:Object,icons:Object,as:{type:String,validator:()=>(mJ("config-provider","`as` is deprecated, please use `tag` instead."),!0),default:void 0}},setup(t){const e=je(RJ,null),n=Ee((()=>{const{theme:n}=t;if(null===n)return;const r=null==e?void 0:e.mergedThemeRef.value;return void 0===n?r:void 0===r?n:Object.assign({},r,n)})),r=Ee((()=>{const{themeOverrides:n}=t;if(null!==n){if(void 0===n)return null==e?void 0:e.mergedThemeOverridesRef.value;{const t=null==e?void 0:e.mergedThemeOverridesRef.value;return void 0===t?n:eQ({},t,n)}}})),i=zQ((()=>{const{namespace:n}=t;return void 0===n?null==e?void 0:e.mergedNamespaceRef.value:n})),o=zQ((()=>{const{bordered:n}=t;return void 0===n?null==e?void 0:e.mergedBorderedRef.value:n})),a=Ee((()=>{const{icons:n}=t;return void 0===n?null==e?void 0:e.mergedIconsRef.value:n})),s=Ee((()=>{const{componentOptions:n}=t;return void 0!==n?n:null==e?void 0:e.mergedComponentPropsRef.value})),l=Ee((()=>{var n;const{clsPrefix:r}=t;return null!==(n=null==e?void 0:e.mergedClsPrefixRef.value)&&void 0!==n?n:r})),u=Ee((()=>{const{rtl:n}=t;if(void 0===n)return null==e?void 0:e.mergedRtlRef.value;const r={};for(const t of n)r[t.name]=ce(t);return r}));return ze(RJ,{mergedRtlRef:u,mergedIconsRef:a,mergedComponentPropsRef:s,mergedBorderedRef:o,mergedNamespaceRef:i,mergedClsPrefixRef:l,mergedLocaleRef:Ee((()=>{const{locale:n}=t;if(null!==n)return void 0===n?null==e?void 0:e.mergedLocaleRef.value:n})),mergedDateLocaleRef:Ee((()=>{const{dateLocale:n}=t;if(null!==n)return void 0===n?null==e?void 0:e.mergedDateLocaleRef.value:n})),mergedHljsRef:Ee((()=>{const{hljs:n}=t;return void 0===n?null==e?void 0:e.mergedHljsRef.value:n})),mergedThemeRef:n,mergedThemeOverridesRef:r}),{mergedClsPrefix:l,mergedBordered:o,mergedNamespace:i,mergedTheme:n,mergedThemeOverrides:r}},render(){return this.abstract?Ir(this.$slots,"default"):Ei(this.as||this.tag,{class:`${this.mergedClsPrefix||BJ}-config-provider`},Ir(this.$slots,"default"))}}),LJ.props={theme:Object,themeOverrides:Object,builtinThemeOverrides:Object};const BJ="n";function FJ(t={},e={defaultBordered:!0}){const n=je(RJ,null);return{NConfigProvider:n,mergedBorderedRef:Ee((()=>{var r,i;const{bordered:o}=t;return void 0!==o?o:null===(i=null!==(r=null==n?void 0:n.mergedBorderedRef.value)&&void 0!==r?r:e.defaultBordered)||void 0===i||i})),mergedClsPrefixRef:Ee((()=>(null==n?void 0:n.mergedClsPrefixRef.value)||BJ)),namespaceRef:Ee((()=>null==n?void 0:n.mergedNamespaceRef.value))}}var NJ={name:"en-US",global:{undo:"Undo",redo:"Redo",confirm:"Confirm"},Popconfirm:{positiveText:"Confirm",negativeText:"Cancel"},Cascader:{placeholder:"Please Select",loading:"Loading",loadingRequiredMessage:t=>`Please load all ${t}'s descedants before checking it.`},Time:{dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd hh:mm:ss"},DatePicker:{yearFormat:"yyyy",monthFormat:"MMM",dayFormat:"eeeeee",clear:"Clear",now:"Now",confirm:"Confirm",selectTime:"Select Time",selectDate:"Select Date",datePlaceholder:"Select Date",datetimePlaceholder:"Select Date and Time",startDatePlaceholder:"Start Date",endDatePlaceholder:"End Date",startDatetimePlaceholder:"Start Date and Time",endDatetimePlaceholder:"End Date and Time",monthBeforeYear:!0,firstDayOfWeek:6,today:"Today"},DataTable:{checkTableAll:"Select all in the table",uncheckTableAll:"Unselect all in the table",confirm:"Confirm",clear:"Clear"},Transfer:{sourceTitle:"Source",targetTitle:"Target"},Empty:{description:"No Data"},Select:{placeholder:"Please Select"},TimePicker:{placeholder:"Select Time",positiveText:"OK",negativeText:"Cancel",now:"Now"},Pagination:{goto:"Goto",selectionSuffix:"page"},DynamicTags:{add:"Add"},Log:{loading:"Loading"},Input:{placeholder:"Please Input"},InputNumber:{placeholder:"Please Input"},DynamicInput:{create:"Create"},ThemeEditor:{title:"Theme Editor",clearAllVars:"Clear All Variables",clearSearch:"Clear Search",filterCompName:"Filter Component Name",filterVarName:"Filter Variable Name",import:"Import",export:"Export",restore:"Reset to Default"}};function zJ(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}function jJ(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function GJ(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function UJ(t){GJ(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function $J(t,e){GJ(1,arguments);var n=e||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:jJ(i),a=null==n.weekStartsOn?o:jJ(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=UJ(t),l=s.getUTCDay(),u=(l<a?7:0)+l-a;return s.setUTCDate(s.getUTCDate()-u),s.setUTCHours(0,0,0,0),s}function VJ(t){return function(e,n){var r,i=n||{};if("formatting"===(i.context?String(i.context):"standalone")&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth,a=i.width?String(i.width):o;r=t.formattingValues[a]||t.formattingValues[o]}else{var s=t.defaultWidth,l=i.width?String(i.width):t.defaultWidth;r=t.values[l]||t.values[s]}return r[t.argumentCallback?t.argumentCallback(e):e]}}function WJ(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;var a,s=o[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(l)?YJ(l,(function(t){return t.test(s)})):HJ(l,(function(t){return t.test(s)}));a=t.valueCallback?t.valueCallback(u):u,a=n.valueCallback?n.valueCallback(a):a;var c=e.slice(s.length);return{value:a,rest:c}}}function HJ(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function YJ(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}var XJ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};var qJ={date:zJ({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:zJ({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:zJ({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},KJ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};var ZJ,QJ={code:"en-US",formatDistance:function(t,e,n){var r;return n=n||{},r="string"==typeof XJ[t]?XJ[t]:1===e?XJ[t].one:XJ[t].other.replace("{{count}}",e),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:qJ,formatRelative:function(t,e,n,r){return KJ[t]},localize:{ordinalNumber:function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:VJ({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:VJ({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:VJ({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:VJ({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:VJ({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(ZJ={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.match(ZJ.matchPattern);if(!n)return null;var r=n[0],i=t.match(ZJ.parsePattern);if(!i)return null;var o=ZJ.valueCallback?ZJ.valueCallback(i[0]):i[0];o=e.valueCallback?e.valueCallback(o):o;var a=t.slice(r.length);return{value:o,rest:a}}),era:WJ({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:WJ({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:WJ({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:WJ({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:WJ({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var JJ={name:"en-US",locale:QJ};function t0(t){const{mergedLocaleRef:e,mergedDateLocaleRef:n}=je(RJ,null)||{},r=Ee((()=>{var n,r;return null!==(r=null===(n=null==e?void 0:e.value)||void 0===n?void 0:n[t])&&void 0!==r?r:NJ[t]}));return{dateLocaleRef:Ee((()=>{var t;return null!==(t=null==n?void 0:n.value)&&void 0!==t?t:JJ})),localeRef:r}}function e0(t,e,n){if(!e)return;const r=iQ(),i=()=>{const i=null==n?void 0:n.value;e.mount({id:void 0===i?t:i+t,head:!0,props:{bPrefix:i?`.${i}-`:void 0},ssr:r}),FQ.mount({id:"naive-ui/global",head:!0,ssr:r})};r?i():an(i)}var n0=Ke({name:"ArrowDown",render:()=>Ei("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Ei("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},Ei("g",{"fill-rule":"nonzero"},Ei("path",{d:"M23.7916,15.2664 C24.0788,14.9679 24.0696,14.4931 23.7711,14.206 C23.4726,13.9188 22.9978,13.928 22.7106,14.2265 L14.7511,22.5007 L14.7511,3.74792 C14.7511,3.33371 14.4153,2.99792 14.0011,2.99792 C13.5869,2.99792 13.2511,3.33371 13.2511,3.74793 L13.2511,22.4998 L5.29259,14.2265 C5.00543,13.928 4.53064,13.9188 4.23213,14.206 C3.93361,14.4931 3.9244,14.9679 4.21157,15.2664 L13.2809,24.6944 C13.6743,25.1034 14.3289,25.1034 14.7223,24.6944 L23.7916,15.2664 Z"}))))});function r0(t,e){return Ke({name:zZ(t),setup(){const{NConfigProvider:n}=FJ();return()=>{var r;const i=null===(r=null==n?void 0:n.mergedIconsRef.value)||void 0===r?void 0:r[t];return i?i():e}}})}var i0=Ke({name:"Backward",render:()=>Ei("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ei("path",{d:"M12.2674 15.793C11.9675 16.0787 11.4927 16.0672 11.2071 15.7673L6.20572 10.5168C5.9298 10.2271 5.9298 9.7719 6.20572 9.48223L11.2071 4.23177C11.4927 3.93184 11.9675 3.92031 12.2674 4.206C12.5673 4.49169 12.5789 4.96642 12.2932 5.26634L7.78458 9.99952L12.2932 14.7327C12.5789 15.0326 12.5673 15.5074 12.2674 15.793Z",fill:"currentColor"}))}),o0=r0("date",Ei("svg",{width:"28px",height:"28px",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Ei("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},Ei("g",{"fill-rule":"nonzero"},Ei("path",{d:"M21.75,3 C23.5449254,3 25,4.45507456 25,6.25 L25,21.75 C25,23.5449254 23.5449254,25 21.75,25 L6.25,25 C4.45507456,25 3,23.5449254 3,21.75 L3,6.25 C3,4.45507456 4.45507456,3 6.25,3 L21.75,3 Z M23.5,9.503 L4.5,9.503 L4.5,21.75 C4.5,22.7164983 5.28350169,23.5 6.25,23.5 L21.75,23.5 C22.7164983,23.5 23.5,22.7164983 23.5,21.75 L23.5,9.503 Z M21.75,4.5 L6.25,4.5 C5.28350169,4.5 4.5,5.28350169 4.5,6.25 L4.5,8.003 L23.5,8.003 L23.5,6.25 C23.5,5.28350169 22.7164983,4.5 21.75,4.5 Z"}))))),a0=Ke({name:"Checkmark",render:()=>Ei("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ei("path",{d:"M13.8639 3.65609C14.0533 3.85704 14.0439 4.17348 13.8429 4.36288L5.91309 11.8368C5.67573 12.0605 5.30311 12.0536 5.07417 11.8213L2.39384 9.10093C2.20003 8.90422 2.20237 8.58765 2.39907 8.39384C2.59578 8.20003 2.91235 8.20237 3.10616 8.39908L5.51192 10.8407L13.1571 3.63517C13.358 3.44577 13.6745 3.45513 13.8639 3.65609Z",fill:"currentColor"}))}),s0=Ke({name:"ChevronRight",render:()=>Ei("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ei("path",{d:"M5.64645 3.14645C5.45118 3.34171 5.45118 3.65829 5.64645 3.85355L9.79289 8L5.64645 12.1464C5.45118 12.3417 5.45118 12.6583 5.64645 12.8536C5.84171 13.0488 6.15829 13.0488 6.35355 12.8536L10.8536 8.35355C11.0488 8.15829 11.0488 7.84171 10.8536 7.64645L6.35355 3.14645C6.15829 2.95118 5.84171 2.95118 5.64645 3.14645Z",fill:"currentColor"}))}),l0=r0("close",Ei("svg",{viewBox:"0 0 12 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Ei("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},Ei("g",{fill:"currentColor","fill-rule":"nonzero"},Ei("path",{d:"M2.08859116,2.2156945 L2.14644661,2.14644661 C2.32001296,1.97288026 2.58943736,1.95359511 2.7843055,2.08859116 L2.85355339,2.14644661 L6,5.293 L9.14644661,2.14644661 C9.34170876,1.95118446 9.65829124,1.95118446 9.85355339,2.14644661 C10.0488155,2.34170876 10.0488155,2.65829124 9.85355339,2.85355339 L6.707,6 L9.85355339,9.14644661 C10.0271197,9.32001296 10.0464049,9.58943736 9.91140884,9.7843055 L9.85355339,9.85355339 C9.67998704,10.0271197 9.41056264,10.0464049 9.2156945,9.91140884 L9.14644661,9.85355339 L6,6.707 L2.85355339,9.85355339 C2.65829124,10.0488155 2.34170876,10.0488155 2.14644661,9.85355339 C1.95118446,9.65829124 1.95118446,9.34170876 2.14644661,9.14644661 L5.293,6 L2.14644661,2.85355339 C1.97288026,2.67998704 1.95359511,2.41056264 2.08859116,2.2156945 L2.14644661,2.14644661 L2.08859116,2.2156945 Z"}))))),u0=Ke({name:"Eye",render:()=>Ei("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Ei("path",{d:"M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 0 0-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 0 0 0-17.47C428.89 172.28 347.8 112 255.66 112z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"}),Ei("circle",{cx:"256",cy:"256",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"}))}),c0=Ke({name:"EyeOff",render:()=>Ei("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Ei("path",{d:"M432 448a15.92 15.92 0 0 1-11.31-4.69l-352-352a16 16 0 0 1 22.62-22.62l352 352A16 16 0 0 1 432 448z",fill:"currentColor"}),Ei("path",{d:"M255.66 384c-41.49 0-81.5-12.28-118.92-36.5c-34.07-22-64.74-53.51-88.7-91v-.08c19.94-28.57 41.78-52.73 65.24-72.21a2 2 0 0 0 .14-2.94L93.5 161.38a2 2 0 0 0-2.71-.12c-24.92 21-48.05 46.76-69.08 76.92a31.92 31.92 0 0 0-.64 35.54c26.41 41.33 60.4 76.14 98.28 100.65C162 402 207.9 416 255.66 416a239.13 239.13 0 0 0 75.8-12.58a2 2 0 0 0 .77-3.31l-21.58-21.58a4 4 0 0 0-3.83-1a204.8 204.8 0 0 1-51.16 6.47z",fill:"currentColor"}),Ei("path",{d:"M490.84 238.6c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.66 96a227.34 227.34 0 0 0-74.89 12.83a2 2 0 0 0-.75 3.31l21.55 21.55a4 4 0 0 0 3.88 1a192.82 192.82 0 0 1 50.21-6.69c40.69 0 80.58 12.43 118.55 37c34.71 22.4 65.74 53.88 89.76 91a.13.13 0 0 1 0 .16a310.72 310.72 0 0 1-64.12 72.73a2 2 0 0 0-.15 2.95l19.9 19.89a2 2 0 0 0 2.7.13a343.49 343.49 0 0 0 68.64-78.48a32.2 32.2 0 0 0-.1-34.78z",fill:"currentColor"}),Ei("path",{d:"M256 160a95.88 95.88 0 0 0-21.37 2.4a2 2 0 0 0-1 3.38l112.59 112.56a2 2 0 0 0 3.38-1A96 96 0 0 0 256 160z",fill:"currentColor"}),Ei("path",{d:"M165.78 233.66a2 2 0 0 0-3.38 1a96 96 0 0 0 115 115a2 2 0 0 0 1-3.38z",fill:"currentColor"}))}),d0=Ke({name:"Empty",render:()=>Ei("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ei("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),Ei("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}),h0=r0("error",Ei("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Ei("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},Ei("g",{"fill-rule":"nonzero"},Ei("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M17.8838835,16.1161165 L17.7823881,16.0249942 C17.3266086,15.6583353 16.6733914,15.6583353 16.2176119,16.0249942 L16.1161165,16.1161165 L16.0249942,16.2176119 C15.6583353,16.6733914 15.6583353,17.3266086 16.0249942,17.7823881 L16.1161165,17.8838835 L22.233,24 L16.1161165,30.1161165 L16.0249942,30.2176119 C15.6583353,30.6733914 15.6583353,31.3266086 16.0249942,31.7823881 L16.1161165,31.8838835 L16.2176119,31.9750058 C16.6733914,32.3416647 17.3266086,32.3416647 17.7823881,31.9750058 L17.8838835,31.8838835 L24,25.767 L30.1161165,31.8838835 L30.2176119,31.9750058 C30.6733914,32.3416647 31.3266086,32.3416647 31.7823881,31.9750058 L31.8838835,31.8838835 L31.9750058,31.7823881 C32.3416647,31.3266086 32.3416647,30.6733914 31.9750058,30.2176119 L31.8838835,30.1161165 L25.767,24 L31.8838835,17.8838835 L31.9750058,17.7823881 C32.3416647,17.3266086 32.3416647,16.6733914 31.9750058,16.2176119 L31.8838835,16.1161165 L31.7823881,16.0249942 C31.3266086,15.6583353 30.6733914,15.6583353 30.2176119,16.0249942 L30.1161165,16.1161165 L24,22.233 L17.8838835,16.1161165 L17.7823881,16.0249942 L17.8838835,16.1161165 Z"}))))),f0=Ke({name:"FastBackward",render:()=>Ei("svg",{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Ei("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},Ei("g",{fill:"currentColor","fill-rule":"nonzero"},Ei("path",{d:"M8.73171,16.7949 C9.03264,17.0795 9.50733,17.0663 9.79196,16.7654 C10.0766,16.4644 10.0634,15.9897 9.76243,15.7051 L4.52339,10.75 L17.2471,10.75 C17.6613,10.75 17.9971,10.4142 17.9971,10 C17.9971,9.58579 17.6613,9.25 17.2471,9.25 L4.52112,9.25 L9.76243,4.29275 C10.0634,4.00812 10.0766,3.53343 9.79196,3.2325 C9.50733,2.93156 9.03264,2.91834 8.73171,3.20297 L2.31449,9.27241 C2.14819,9.4297 2.04819,9.62981 2.01448,9.8386 C2.00308,9.89058 1.99707,9.94459 1.99707,10 C1.99707,10.0576 2.00356,10.1137 2.01585,10.1675 C2.05084,10.3733 2.15039,10.5702 2.31449,10.7254 L8.73171,16.7949 Z"}))))}),p0=Ke({name:"FastForward",render:()=>Ei("svg",{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Ei("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},Ei("g",{fill:"currentColor","fill-rule":"nonzero"},Ei("path",{d:"M11.2654,3.20511 C10.9644,2.92049 10.4897,2.93371 10.2051,3.23464 C9.92049,3.53558 9.93371,4.01027 10.2346,4.29489 L15.4737,9.25 L2.75,9.25 C2.33579,9.25 2,9.58579 2,10.0000012 C2,10.4142 2.33579,10.75 2.75,10.75 L15.476,10.75 L10.2346,15.7073 C9.93371,15.9919 9.92049,16.4666 10.2051,16.7675 C10.4897,17.0684 10.9644,17.0817 11.2654,16.797 L17.6826,10.7276 C17.8489,10.5703 17.9489,10.3702 17.9826,10.1614 C17.994,10.1094 18,10.0554 18,10.0000012 C18,9.94241 17.9935,9.88633 17.9812,9.83246 C17.9462,9.62667 17.8467,9.42976 17.6826,9.27455 L11.2654,3.20511 Z"}))))}),g0=Ke({name:"Filter",render:()=>Ei("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Ei("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},Ei("g",{"fill-rule":"nonzero"},Ei("path",{d:"M17,19 C17.5522847,19 18,19.4477153 18,20 C18,20.5522847 17.5522847,21 17,21 L11,21 C10.4477153,21 10,20.5522847 10,20 C10,19.4477153 10.4477153,19 11,19 L17,19 Z M21,13 C21.5522847,13 22,13.4477153 22,14 C22,14.5522847 21.5522847,15 21,15 L7,15 C6.44771525,15 6,14.5522847 6,14 C6,13.4477153 6.44771525,13 7,13 L21,13 Z M24,7 C24.5522847,7 25,7.44771525 25,8 C25,8.55228475 24.5522847,9 24,9 L4,9 C3.44771525,9 3,8.55228475 3,8 C3,7.44771525 3.44771525,7 4,7 L24,7 Z"}))))}),v0=Ke({name:"Forward",render:()=>Ei("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ei("path",{d:"M7.73271 4.20694C8.03263 3.92125 8.50737 3.93279 8.79306 4.23271L13.7944 9.48318C14.0703 9.77285 14.0703 10.2281 13.7944 10.5178L8.79306 15.7682C8.50737 16.0681 8.03263 16.0797 7.73271 15.794C7.43279 15.5083 7.42125 15.0336 7.70694 14.7336L12.2155 10.0005L7.70694 5.26729C7.42125 4.96737 7.43279 4.49264 7.73271 4.20694Z",fill:"currentColor"}))}),m0=r0("info",Ei("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Ei("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},Ei("g",{"fill-rule":"nonzero"},Ei("path",{d:"M14,2 C20.6274,2 26,7.37258 26,14 C26,20.6274 20.6274,26 14,26 C7.37258,26 2,20.6274 2,14 C2,7.37258 7.37258,2 14,2 Z M14,11 C13.4477,11 13,11.4477 13,12 L13,12 L13,20 C13,20.5523 13.4477,21 14,21 C14.5523,21 15,20.5523 15,20 L15,20 L15,12 C15,11.4477 14.5523,11 14,11 Z M14,6.75 C13.3096,6.75 12.75,7.30964 12.75,8 C12.75,8.69036 13.3096,9.25 14,9.25 C14.6904,9.25 15.25,8.69036 15.25,8 C15.25,7.30964 14.6904,6.75 14,6.75 Z"}))))),y0=Ke({name:"More",render:()=>Ei("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Ei("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},Ei("g",{fill:"currentColor","fill-rule":"nonzero"},Ei("path",{d:"M4,7 C4.55228,7 5,7.44772 5,8 C5,8.55229 4.55228,9 4,9 C3.44772,9 3,8.55229 3,8 C3,7.44772 3.44772,7 4,7 Z M8,7 C8.55229,7 9,7.44772 9,8 C9,8.55229 8.55229,9 8,9 C7.44772,9 7,8.55229 7,8 C7,7.44772 7.44772,7 8,7 Z M12,7 C12.5523,7 13,7.44772 13,8 C13,8.55229 12.5523,9 12,9 C11.4477,9 11,8.55229 11,8 C11,7.44772 11.4477,7 12,7 Z"}))))}),b0=r0("success",Ei("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Ei("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},Ei("g",{"fill-rule":"nonzero"},Ei("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M32.6338835,17.6161165 C32.1782718,17.1605048 31.4584514,17.1301307 30.9676119,17.5249942 L30.8661165,17.6161165 L20.75,27.732233 L17.1338835,24.1161165 C16.6457281,23.6279612 15.8542719,23.6279612 15.3661165,24.1161165 C14.9105048,24.5717282 14.8801307,25.2915486 15.2749942,25.7823881 L15.3661165,25.8838835 L19.8661165,30.3838835 C20.3217282,30.8394952 21.0415486,30.8698693 21.5323881,30.4750058 L21.6338835,30.3838835 L32.6338835,19.3838835 C33.1220388,18.8957281 33.1220388,18.1042719 32.6338835,17.6161165 Z"}))))),x0=r0("time",Ei("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Ei("path",{d:"M256,64C150,64,64,150,64,256s86,192,192,192,192-86,192-192S362,64,256,64Z",style:"\n        fill: none;\n        stroke: currentColor;\n        stroke-miterlimit: 10;\n        stroke-width: 32px;\n      "}),Ei("polyline",{points:"256 128 256 272 352 272",style:"\n        fill: none;\n        stroke: currentColor;\n        stroke-linecap: round;\n        stroke-linejoin: round;\n        stroke-width: 32px;\n      "}))),w0=r0("warning",Ei("svg",{viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Ei("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},Ei("g",{"fill-rule":"nonzero"},Ei("path",{d:"M12,2 C17.523,2 22,6.478 22,12 C22,17.522 17.523,22 12,22 C6.477,22 2,17.522 2,12 C2,6.478 6.477,2 12,2 Z M12.0018002,15.0037242 C11.450254,15.0037242 11.0031376,15.4508407 11.0031376,16.0023869 C11.0031376,16.553933 11.450254,17.0010495 12.0018002,17.0010495 C12.5533463,17.0010495 13.0004628,16.553933 13.0004628,16.0023869 C13.0004628,15.4508407 12.5533463,15.0037242 12.0018002,15.0037242 Z M11.99964,7 C11.4868042,7.00018474 11.0642719,7.38637706 11.0066858,7.8837365 L11,8.00036004 L11.0018003,13.0012393 L11.00857,13.117858 C11.0665141,13.6151758 11.4893244,14.0010638 12.0021602,14.0008793 C12.514996,14.0006946 12.9375283,13.6145023 12.9951144,13.1171428 L13.0018002,13.0005193 L13,7.99964009 L12.9932303,7.8830214 C12.9352861,7.38570354 12.5124758,6.99981552 11.99964,7 Z"}))))),C0=Ke({name:"ChevronDown",render:()=>Ei("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ei("path",{d:"M3.14645 5.64645C3.34171 5.45118 3.65829 5.45118 3.85355 5.64645L8 9.79289L12.1464 5.64645C12.3417 5.45118 12.6583 5.45118 12.8536 5.64645C13.0488 5.84171 13.0488 6.15829 12.8536 6.35355L8.35355 10.8536C8.15829 11.0488 7.84171 11.0488 7.64645 10.8536L3.14645 6.35355C2.95118 6.15829 2.95118 5.84171 3.14645 5.64645Z",fill:"currentColor"}))}),S0=r0("clear",Ei("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Ei("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},Ei("g",{fill:"currentColor","fill-rule":"nonzero"},Ei("path",{d:"M8,2 C11.3137085,2 14,4.6862915 14,8 C14,11.3137085 11.3137085,14 8,14 C4.6862915,14 2,11.3137085 2,8 C2,4.6862915 4.6862915,2 8,2 Z M6.5343055,5.83859116 C6.33943736,5.70359511 6.07001296,5.72288026 5.89644661,5.89644661 L5.89644661,5.89644661 L5.83859116,5.9656945 C5.70359511,6.16056264 5.72288026,6.42998704 5.89644661,6.60355339 L5.89644661,6.60355339 L7.293,8 L5.89644661,9.39644661 L5.83859116,9.4656945 C5.70359511,9.66056264 5.72288026,9.92998704 5.89644661,10.1035534 L5.89644661,10.1035534 L5.9656945,10.1614088 C6.16056264,10.2964049 6.42998704,10.2771197 6.60355339,10.1035534 L6.60355339,10.1035534 L8,8.707 L9.39644661,10.1035534 L9.4656945,10.1614088 C9.66056264,10.2964049 9.92998704,10.2771197 10.1035534,10.1035534 L10.1035534,10.1035534 L10.1614088,10.0343055 C10.2964049,9.83943736 10.2771197,9.57001296 10.1035534,9.39644661 L10.1035534,9.39644661 L8.707,8 L10.1035534,6.60355339 L10.1614088,6.5343055 C10.2964049,6.33943736 10.2771197,6.07001296 10.1035534,5.89644661 L10.1035534,5.89644661 L10.0343055,5.83859116 C9.83943736,5.70359511 9.57001296,5.72288026 9.39644661,5.89644661 L9.39644661,5.89644661 L8,7.293 L6.60355339,5.89644661 Z"}))))),k0=Ke({name:"ChevronDownFilled",render:()=>Ei("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ei("path",{d:"M3.20041 5.73966C3.48226 5.43613 3.95681 5.41856 4.26034 5.70041L8 9.22652L11.7397 5.70041C12.0432 5.41856 12.5177 5.43613 12.7996 5.73966C13.0815 6.0432 13.0639 6.51775 12.7603 6.7996L8.51034 10.7996C8.22258 11.0668 7.77743 11.0668 7.48967 10.7996L3.23966 6.7996C2.93613 6.51775 2.91856 6.0432 3.20041 5.73966Z",fill:"currentColor"}))}),E0=r0("to",Ei("svg",{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Ei("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},Ei("g",{fill:"currentColor","fill-rule":"nonzero"},Ei("path",{d:"M11.2654,3.20511 C10.9644,2.92049 10.4897,2.93371 10.2051,3.23464 C9.92049,3.53558 9.93371,4.01027 10.2346,4.29489 L15.4737,9.25 L2.75,9.25 C2.33579,9.25 2,9.58579 2,10.0000012 C2,10.4142 2.33579,10.75 2.75,10.75 L15.476,10.75 L10.2346,15.7073 C9.93371,15.9919 9.92049,16.4666 10.2051,16.7675 C10.4897,17.0684 10.9644,17.0817 11.2654,16.797 L17.6826,10.7276 C17.8489,10.5703 17.9489,10.3702 17.9826,10.1614 C17.994,10.1094 18,10.0554 18,10.0000012 C18,9.94241 17.9935,9.88633 17.9812,9.83246 C17.9462,9.62667 17.8467,9.42976 17.6826,9.27455 L11.2654,3.20511 Z"}))))),M0=Ke({name:"BaseIconSwitchTransition",setup(t,{slots:e}){const n=sJ();return()=>Ei($i,{name:"icon-switch-transition",appear:n.value},e)}}),A0=Ke({name:"FadeInExpandTransition",props:{appear:Boolean,group:Boolean,mode:String,onLeave:Function,onAfterLeave:Function,onAfterEnter:Function,width:Boolean,reverse:Boolean},setup(t,{slots:e}){function n(e){t.width?e.style.maxWidth=`${e.offsetWidth}px`:e.style.maxHeight=`${e.offsetHeight}px`,e.offsetWidth}function r(e){t.width?e.style.maxWidth="0":e.style.maxHeight="0",e.offsetWidth;const{onLeave:n}=t;n&&n()}function i(e){t.width?e.style.maxWidth="":e.style.maxHeight="";const{onAfterLeave:n}=t;n&&n()}function o(e){if(e.style.transition="none",t.width){const t=e.offsetWidth;e.style.maxWidth="0",e.offsetWidth,e.style.transition="",e.style.maxWidth=`${t}px`}else if(t.reverse)e.style.maxHeight=`${e.offsetHeight}px`,e.offsetHeight,e.style.transition="",e.style.maxHeight="0";else{const t=e.offsetHeight;e.style.maxHeight="0",e.offsetWidth,e.style.transition="",e.style.maxHeight=`${t}px`}e.offsetWidth}function a(e){var n;t.width?e.style.maxWidth="":t.reverse||(e.style.maxHeight=""),null===(n=t.onAfterEnter)||void 0===n||n.call(t)}return()=>Ei(t.group?so:$i,{name:t.width?"fade-in-width-expand-transition":"fade-in-height-expand-transition",mode:t.mode,appear:t.appear,onEnter:o,onAfterEnter:a,onBeforeLeave:n,onLeave:r,onAfterLeave:i},e)}}),_0=AQ("base-icon","\n height: 1em;\n width: 1em;\n line-height: 1em;\n text-align: center;\n display: inline-block;\n position: relative;\n fill: currentColor;\n transform: translateZ(0);\n",[EQ("svg",{height:"1em",width:"1em"})]),T0=Ke({name:"BaseIcon",props:{role:String,ariaLabel:String,ariaDisabled:{type:Boolean,default:void 0},ariaHidden:{type:Boolean,default:void 0},clsPrefix:{type:String,required:!0},onClick:Function,onMousedown:Function,onMouseup:Function},setup(t){e0("BaseIcon",_0,Se(t,"clsPrefix"))},render(){return Ei("i",{class:`${this.clsPrefix}-base-icon`,onClick:this.onClick,onMousedown:this.onMousedown,onMouseup:this.onMouseup,role:this.role,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,"aria-disabled":this.ariaDisabled},this.$slots)}}),P0=AQ("base-close","\n cursor: pointer;\n color: var(--close-color);\n",[EQ("&:hover",{color:"var(--close-color-hover)"}),EQ("&:active",{color:"var(--close-color-pressed)"}),TQ("disabled",{cursor:"not-allowed!important",color:"var(--close-color-disabled)"})]),I0=Ke({name:"BaseClose",props:{clsPrefix:{type:String,required:!0},disabled:{type:Boolean,default:void 0},onClick:Function},setup:t=>(e0("BaseClose",P0,Se(t,"clsPrefix")),()=>{const{clsPrefix:e,disabled:n}=t;return Ei(T0,{role:"button",ariaDisabled:n,ariaLabel:"close",clsPrefix:e,class:[`${e}-base-close`,n&&`${e}-base-close--disabled`],onClick:n?void 0:t.onClick},{default:()=>Ei(l0,null)})})}),D0=Ke({props:{onFocus:Function,onBlur:Function},setup:t=>()=>Ei("div",{style:"width: 0; height: 0",tabindex:0,onFocus:t.onFocus,onBlur:t.onBlur})});function O0({originalTransform:t="",left:e=0,top:n=0,transition:r=`all .3s ${BQ.cubicBezierEaseInOut} !important`}={}){return[EQ("&.icon-switch-transition-enter-from, &.icon-switch-transition-leave-to",{transform:t+" scale(0.75)",left:e,top:n,opacity:0}),EQ("&.icon-switch-transition-enter-to, &.icon-switch-transition-leave-from",{transform:`${BQ.transformDebounceScale} ${t}`,left:e,top:n,opacity:1}),EQ("&.icon-switch-transition-enter-active, &.icon-switch-transition-leave-active",{transformOrigin:"center",position:"absolute",left:e,top:n,transition:r})]}var R0=AQ("base-loading","\n position: relative;\n line-height: 0;\n width: 1em;\n height: 1em;\n",[_Q("placeholder","\n position: absolute;\n left: 50%;\n top: 50%;\n transform: translateX(-50%) translateY(-50%);\n ",[O0({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),_Q("icon","\n height: 1em;\n width: 1em;\n ",[O0()])]);var L0=Ke({name:"BaseLoading",props:{clsPrefix:{type:String,required:!0},scale:{type:Number,default:1},radius:{type:Number,default:100},strokeWidth:{type:Number,default:28},stroke:{type:String,default:void 0},show:{type:Boolean,default:!0}},setup(t){e0("BaseLoading",R0,Se(t,"clsPrefix"))},render(){const{clsPrefix:t,radius:e,strokeWidth:n,stroke:r,scale:i}=this,o=e/i;return Ei("div",{class:`${t}-base-loading`,role:"img","aria-label":"loading"},Ei(M0,null,{default:()=>this.show?Ei("svg",{class:`${t}-base-loading__icon`,viewBox:`0 0 ${2*o} ${2*o}`,xmlns:"http://www.w3.org/2000/svg",style:{color:r}},Ei("g",null,Ei("animateTransform",{attributeName:"transform",type:"rotate",values:`0 ${o} ${o};270 ${o} ${o}`,begin:"0s",dur:"1.6s",fill:"freeze",repeatCount:"indefinite"}),Ei("circle",{fill:"none",stroke:"currentColor","stroke-width":n,"stroke-linecap":"round",cx:o,cy:o,r:e-n/2,"stroke-dasharray":5.67*e,"stroke-dashoffset":18.48*e},Ei("animateTransform",{attributeName:"transform",type:"rotate",values:`0 ${o} ${o};135 ${o} ${o};450 ${o} ${o}`,begin:"0s",dur:"1.6s",fill:"freeze",repeatCount:"indefinite"}),Ei("animate",{attributeName:"stroke-dashoffset",values:`${5.67*e};${1.42*e};${5.67*e}`,begin:"0s",dur:"1.6s",fill:"freeze",repeatCount:"indefinite"})))):Ei("div",{key:"placeholder",class:`${t}-base-loading__placeholder`},this.$slots)}))}});function B0(t){return Array.isArray(t)?t:[t]}const F0="STOP";function N0(t,e){const n=e(t);void 0!==t.children&&n!==F0&&t.children.forEach((t=>N0(t,e)))}function z0(t){return t.children}function j0(t){return t.key}function G0(){return!1}function U0(t){return!0===t.disabled}function $0(t){var e;return null==t?[]:Array.isArray(t)?t:null!==(e=t.checkedKeys)&&void 0!==e?e:[]}function V0(t){var e;return null==t||Array.isArray(t)?[]:null!==(e=t.indeterminateKeys)&&void 0!==e?e:[]}function W0(t,e){const n=new Set(t);return e.forEach((t=>{n.has(t)||n.add(t)})),Array.from(n)}function H0(t,e){const n=new Set(t);return e.forEach((t=>{n.has(t)&&n.delete(t)})),Array.from(n)}function Y0(t){return"group"===(null==t?void 0:t.type)}class X0 extends Error{constructor(){super(),this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function q0(t,e,n){const r=Z0(e,n),i=Z0(t,n,!0),o=function(t,e){const n=new Set;return t.forEach((t=>{const r=e.treeNodeMap.get(t);if(void 0!==r){let t=r.parent;for(;null!==t&&!t.disabled&&!n.has(t.key);)n.add(t.key),t=t.parent}})),n}(t,n),a=[];return r.forEach((t=>{(i.has(t)||o.has(t))&&a.push(t)})),a.forEach((t=>r.delete(t))),r}function K0(t,e){const{checkedKeys:n,keysToCheck:r,keysToUncheck:i,indeterminateKeys:o,cascade:a,leafOnly:s,checkStrategy:l}=t;if(!a)return void 0!==r?{checkedKeys:W0(n,r),indeterminateKeys:Array.from(o)}:void 0!==i?{checkedKeys:H0(n,i),indeterminateKeys:Array.from(o)}:{checkedKeys:Array.from(n),indeterminateKeys:Array.from(o)};const{levelTreeNodeMap:u}=e;let c;c=void 0!==i?q0(i,n,e):void 0!==r?function(t,e,n){return Z0(e.concat(t),n)}(r,n,e):Z0(n,e);const d="parent"===l,h="child"===l||s,f=c,p=new Set;for(let g=Math.max.apply(null,Array.from(u.keys()));g>=0;g-=1){const t=0===g,e=u.get(g);for(const n of e){if(n.isLeaf)continue;const{key:e,shallowLoaded:r}=n;if(h&&r&&n.children.forEach((t=>{!t.disabled&&!t.isLeaf&&t.shallowLoaded&&f.has(t.key)&&f.delete(t.key)})),n.disabled||!r)continue;let i=!0,o=!1,a=!0;for(const t of n.children){const e=t.key;if(!t.disabled)if(a&&(a=!1),f.has(e))o=!0;else{if(p.has(e)){o=!0,i=!1;break}if(i=!1,o)break}}i&&!a?(d&&n.children.forEach((t=>{!t.disabled&&f.has(t.key)&&f.delete(t.key)})),f.add(e)):o&&p.add(e),t&&h&&f.has(e)&&f.delete(e)}}return{checkedKeys:Array.from(f),indeterminateKeys:Array.from(p)}}function Z0(t,e,n=!1){const{treeNodeMap:r,getChildren:i}=e,o=new Set,a=new Set(t);return t.forEach((t=>{const e=r.get(t);void 0!==e&&N0(e,(t=>{if(t.disabled)return F0;const{key:e}=t;if(!o.has(e)&&(o.add(e),a.add(e),function(t,e){return!1===t.isLeaf&&void 0===e(t)}(t.rawNode,i))){if(n)return F0;throw new X0}}))})),a}function Q0(t,e){const n=t.siblings,r=n.length,{index:i}=t;return e?n[(i+1)%r]:i===n.length-1?null:n[i+1]}function J0(t,e,{loop:n=!1,includeDisabled:r=!1}={}){const i="prev"===e?t1:Q0,o={reverse:"prev"===e};let a=!1,s=null;return function e(l){if(null!==l){if(l===t)if(a){if(!t.disabled&&!t.isGroup)return void(s=t)}else a=!0;else if((!l.disabled||r)&&!l.ignored&&!l.isGroup)return void(s=l);if(l.isGroup){const t=e1(l,o);null!==t?s=t:e(i(l,n))}else{const t=i(l,!1);if(null!==t)e(t);else{const t=function(t){return t.parent}(l);(null==t?void 0:t.isGroup)?e(i(t,n)):n&&e(i(l,!0))}}}}(t),s}function t1(t,e){const n=t.siblings,r=n.length,{index:i}=t;return e?n[(i-1+r)%r]:0===i?null:n[i-1]}function e1(t,e={}){const{reverse:n=!1}=e,{children:r}=t;if(r){const{length:t}=r,i=n?-1:t,o=n?-1:1;for(let a=n?t-1:0;a!==i;a+=o){const t=r[a];if(!t.disabled&&!t.ignored){if(!t.isGroup)return t;{const n=e1(t,e);if(null!==n)return n}}}}return null}const n1={getChild(){return this.ignored?null:e1(this)},getParent(){const{parent:t}=this;return(null==t?void 0:t.isGroup)?t.getParent():t},getNext(t={}){return J0(this,"next",t)},getPrev(t={}){return J0(this,"prev",t)}};function r1(t,e,n,r,i,o=null,a=0){const s=[];return t.forEach(((l,u)=>{var c;const d=Object.create(r);if(d.rawNode=l,d.siblings=s,d.level=a,d.index=u,d.isFirstChild=0===u,d.isLastChild=u+1===t.length,d.parent=o,!d.ignored){const t=i(l);void 0!==t&&(d.children=r1(t,e,n,r,i,d,a+1))}s.push(d),e.set(d.key,d),n.has(a)||n.set(a,[]),null===(c=n.get(a))||void 0===c||c.push(d)})),s}function i1(t,e={}){const n=new Map,r=new Map,{getDisabled:i=U0,getIgnored:o=G0,getChildren:a=z0,getIsGroup:s=Y0,getKey:l=j0}=e,u=Object.assign({get key(){return l(this.rawNode)},get disabled(){return i(this.rawNode)},get isGroup(){return s(this.rawNode)},get isLeaf(){return function(t,e){const{isLeaf:n}=t;return void 0!==n?n:void 0===e(t)}(this.rawNode,a)},get shallowLoaded(){return function(t){const{isLeaf:e,children:n}=t;return!1!==e||void 0!==n}(this.rawNode)},get ignored(){return o(this.rawNode)},contains(t){return function(t,e){const n=t.key;for(;e;){if(e.key===n)return!0;e=e.parent}return!1}(this,t)}},n1),c=r1(t,n,r,u,a);function d(t){if(null==t)return null;const e=n.get(t);return e&&!e.ignored?e:null}const h={treeNodes:c,treeNodeMap:n,levelTreeNodeMap:r,maxLevel:Math.max(...r.keys()),getChildren:a,getFlattenedNodes:t=>function(t,e){const n=e?new Set(e):void 0,r=[];return function t(e){e.forEach((e=>{r.push(e),e.isLeaf||!e.children||e.ignored||(e.isGroup||void 0===n||n.has(e.key))&&t(e.children)}))}(t),r}(c,t),getNode:function(t){if(null==t)return null;const e=n.get(t);return!e||e.isGroup||e.ignored?null:e},getPrev:function(t,e){const n=d(t);return n?n.getPrev(e):null},getNext:function(t,e){const n=d(t);return n?n.getNext(e):null},getParent:function(t){const e=d(t);return e?e.getParent():null},getChild:function(t){const e=d(t);return e?e.getChild():null},getFirstAvailableNode:()=>function(t){if(0===t.length)return null;const e=t[0];return e.isGroup||e.ignored||e.disabled?e.getNext():e}(c),getPath:(t,e={})=>function(t,{includeGroup:e=!1,includeSelf:n=!0},r){var i;const o=r.treeNodeMap;let a=null==t?null:null!==(i=o.get(t))&&void 0!==i?i:null;const s={keyPath:[],treeNodePath:[],treeNode:a};if(null==a?void 0:a.ignored)return s.treeNode=null,s;for(;a;)a.ignored||!e&&a.isGroup||s.treeNodePath.push(a),a=a.parent;return s.treeNodePath.reverse(),n||s.treeNodePath.pop(),s.keyPath=s.treeNodePath.map((t=>t.key)),s}(t,e,h),getCheckedKeys(t,e={}){const{cascade:n=!0,leafOnly:r=!1,checkStrategy:i="all"}=e;return K0({checkedKeys:$0(t),indeterminateKeys:V0(t),cascade:n,leafOnly:r,checkStrategy:i},h)},check(t,e,n={}){const{cascade:r=!0,leafOnly:i=!1,checkStrategy:o="all"}=n;return K0({checkedKeys:$0(e),indeterminateKeys:V0(e),keysToCheck:null==t?[]:B0(t),cascade:r,leafOnly:i,checkStrategy:o},h)},uncheck(t,e,n={}){const{cascade:r=!0,leafOnly:i=!1,checkStrategy:o="all"}=n;return K0({checkedKeys:$0(e),indeterminateKeys:V0(e),keysToUncheck:null==t?[]:B0(t),cascade:r,leafOnly:i,checkStrategy:o},h)},getNonLeafKeys:(t={})=>function(t,e={}){const{preserveGroup:n=!1}=e,r=[],i=n?t=>{t.isLeaf||(r.push(t.key),o(t.children))}:t=>{t.isLeaf||(t.isGroup||r.push(t.key),o(t.children))};function o(t){t.forEach(i)}return o(t),r}(c,t)};return h}function o1(t,e="default"){const n=t[e];if(void 0===n)throw new Error(`[vueuc/binder]: slot[${e}] is empty.`);return n()}let a1=null;function s1(){if(null===a1&&(a1=document.getElementById("v-binder-view-measurer"),null===a1)){a1=document.createElement("div"),a1.id="v-binder-view-measurer";const{style:t}=a1;t.position="fixed",t.left="0",t.right="0",t.top="0",t.bottom="0",t.pointerEvents="none",t.visibility="hidden",document.body.appendChild(a1)}return a1.getBoundingClientRect()}function l1(t){const e=t.getBoundingClientRect(),n=s1();return{left:e.left-n.left,top:e.top-n.top,bottom:n.height+n.top-e.bottom,right:n.width+n.left-e.right,width:e.width,height:e.height}}function u1(t){if(null===t)return null;const e=function(t){return 9===t.nodeType?null:t.parentNode}(t);if(null===e)return null;if(9===e.nodeType)return document;if(1===e.nodeType){const{overflow:t,overflowX:n,overflowY:r}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+r+n))return e}return u1(e)}var c1=Ke({name:"Binder",setup(){var t;ze("VBinder",null===(t=zr())||void 0===t?void 0:t.proxy);const e=ge(null);let n=[];const r=()=>{for(const t of n)qQ("scroll",t,o,!0);n=[]},i=new Set,o=()=>{oq(a)},a=()=>{i.forEach((t=>t()))},s=new Set,l=()=>{s.forEach((t=>t()))};return cn((()=>{qQ("resize",window,l),r()})),{targetRef:e,setTargetRef:t=>{e.value=t},addScrollListener:t=>{0===i.size&&(()=>{let t=e.value;for(;t=u1(t),null!==t;)n.push(t);for(const e of n)XQ("scroll",e,o,!0)})(),i.has(t)||i.add(t)},removeScrollListener:t=>{i.has(t)&&i.delete(t),0===i.size&&r()},addResizeListener:t=>{0===s.size&&XQ("resize",window,l),s.has(t)||s.add(t)},removeResizeListener:t=>{s.has(t)&&s.delete(t),0===s.size&&qQ("resize",window,l)}}},render(){return o1(this.$slots)}}),d1=Ke({name:"Target",setup(){const{setTargetRef:t}=je("VBinder");return{setTargetDirective:{mounted:t,updated:t}}},render(){const{setTargetDirective:t}=this;return jn(function(t,e="default"){const n=t[e];if(void 0===n)throw new Error(`[vueuc/binder]: slot[${e}] is empty.`);const r=n();if(1===r.length)return r[0];throw new Error(`[vueuc/binder]: slot[${e}] should have exactly one child.`)}(this.$slots),[[t]])}});const h1="@@mmoContext";var f1={mounted(t,{value:e}){t[h1]={handler:void 0},"function"==typeof e&&(t[h1].handler=e,XQ("mousemoveoutside",t,e))},updated(t,{value:e}){const n=t[h1];"function"==typeof e?n.handler?n.handler!==e&&(qQ("mousemoveoutside",t,n.handler),n.handler=e,XQ("mousemoveoutside",t,e)):(t[h1].handler=e,XQ("mousemoveoutside",t,e)):n.handler&&(qQ("mousemoveoutside",t,n.handler),n.handler=void 0)},unmounted(t){const{handler:e}=t[h1];e&&qQ("mousemoveoutside",t,e),t[h1].handler=void 0}};const p1="@@coContext";var g1={mounted(t,{value:e}){t[p1]={handler:void 0},"function"==typeof e&&(t[p1].handler=e,XQ("clickoutside",t,e))},updated(t,{value:e}){const n=t[p1];"function"==typeof e?n.handler?n.handler!==e&&(qQ("clickoutside",t,n.handler),n.handler=e,XQ("clickoutside",t,e)):(t[p1].handler=e,XQ("clickoutside",t,e)):n.handler&&(qQ("clickoutside",t,n.handler),n.handler=void 0)},unmounted(t){const{handler:e}=t[p1];e&&qQ("clickoutside",t,e),t[p1].handler=void 0}};var v1=new class{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(t,e){const{elementZIndex:n}=this;if(void 0!==e)return t.style.zIndex=`${e}`,void n.delete(t);const{nextZIndex:r}=this;if(n.has(t)){if(n.get(t)+1===this.nextZIndex)return}t.style.zIndex=`${r}`,n.set(t,r),this.nextZIndex=r+1,this.squashState()}unregister(t){const{elementZIndex:e}=this;var n,r;e.has(t)?e.delete(t):(n="vdirs/z-index-manager/unregister-element",r="Element not found when unregistering.",console.error(`[vdirs/${n}]: ${r}`)),this.squashState()}squashState(){const{elementCount:t}=this;t||(this.nextZIndex=2e3),this.nextZIndex-t>2500&&this.rearrange()}rearrange(){const t=Array.from(this.elementZIndex.entries());t.sort(((t,e)=>t[1]-e[1])),this.nextZIndex=2e3,t.forEach((t=>{const e=t[0],n=this.nextZIndex++;`${n}`!==e.style.zIndex&&(e.style.zIndex=`${n}`)}))}};const m1="@@ziContext";var y1={mounted(t,e){const{value:n={}}=e,{zIndex:r,enabled:i}=n;v1.ensureZIndex(t,r),t[m1]={enabled:i}},updated(t,e){const{value:n={}}=e,{zIndex:r,enabled:i}=n,o=t[m1].enabled;i&&!o&&v1.ensureZIndex(t,r),t[m1].enabled=i},unmounted(t){v1.unregister(t)}};function b1(t,e){console.error(`[vueuc/${t}]: ${e}`)}const{c:x1}=wQ();function w1(t){return t&-t}class C1{constructor(t,e){this.l=t,this.min=e;const n=new Array(t+1);for(let r=0;r<t+1;++r)n[r]=0;this.ft=n}add(t,e){if(0===e)return;const{l:n,ft:r}=this;for(t+=1;t<=n;)r[t]+=e,t+=w1(t)}get(t){return this.sum(t+1)-this.sum(t)}sum(t){if(0===t)return 0;const{ft:e,min:n,l:r}=this;if(void 0===t&&(t=r),t>r)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let i=t*n;for(;t>0;)i+=e[t],t-=w1(t);return i}getBound(t){let e=0,n=this.l;for(;n>e;){const r=Math.floor((e+n)/2),i=this.sum(r);if(i>t)n=r;else{if(!(i<t))return r;if(e===r)return this.sum(e+1)<=t?e+1:r;e=r}}return e}}var S1=Ke({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup:t=>({showTeleport:NQ(Se(t,"show")),mergedTo:Ee((()=>{const{to:e}=t;return null!=e?e:"body"}))}),render(){return this.showTeleport?this.disabled?o1(this.$slots):Ei(tr,{disabled:this.disabled,to:this.mergedTo},o1(this.$slots)):null}});const k1={top:"bottom",bottom:"top",left:"right",right:"left"},E1={start:"end",center:"center",end:"start"},M1={top:"height",bottom:"height",left:"width",right:"width"},A1={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},_1={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},T1={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"};const P1=x1([x1(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),x1(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[x1("> *",{pointerEvents:"all"})])]);var I1=Ke({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(t){const e=je("VBinder"),n=zQ((()=>void 0!==t.enabled?t.enabled:t.show)),r=ge(null),i=ge(null),o=()=>{const{syncTrigger:n}=t;n.includes("scroll")&&e.addScrollListener(l),n.includes("resize")&&e.addResizeListener(l)},a=()=>{e.removeScrollListener(l),e.removeResizeListener(l)};sn((()=>{n.value&&(l(),o())}));const s=iQ();P1.mount({id:"vueuc/binder",head:!0,ssr:s}),cn((()=>{a()})),function(t){if(WQ)return;let e=!1;sn((()=>{WQ||VQ.then((()=>{e||t()}))})),cn((()=>{e=!0}))}((()=>{n.value&&l()}));const l=()=>{if(!n.value)return;const o=r.value;if(null===o)return;const a=e.targetRef,{x:s,y:l,overlap:u}=t,c=void 0!==s&&void 0!==l?function(t,e){const n=s1();return{top:e,left:t,height:0,width:0,right:n.width-t,bottom:n.height-e}}(s,l):l1(a),{width:d,minWidth:h,placement:f,flip:p}=t;o.setAttribute("v-placement",f),u?o.setAttribute("v-overlap",""):o.removeAttribute("v-overlap");const{style:g}=o;g.width="target"===d?`${c.width}px`:void 0!==d?d:"",g.minWidth="target"===h?`${c.width}px`:void 0!==h?h:"";const v=l1(o),m=l1(i.value),y=function(t,e,n,r,i){if(!r||i)return t;const[o,a]=t.split("-");let s=null!=a?a:"center";if("center"!==a){const r=T1[t],i=k1[r],o=M1[r];n[o]>e[o]&&e[r]+e[o]<=n[o]&&e[r]<e[i]&&(s=E1[a]),n[o]<e[o]&&e[i]<0&&e[r]>e[i]&&(s=E1[a])}let l=o;return!(e[o]>=n[M1[o]])&&e[k1[o]]>=n[M1[o]]&&(l=k1[o]),"center"!==s?`${l}-${s}`:l}(f,c,v,p,u),b=function(t,e){return e?_1[t]:A1[t]}(y,u),{left:x,top:w,transform:C}=function(t,e,n,r){if(r)switch(t){case"bottom-start":return{top:`${n.top-e.top+n.height}px`,left:n.left-e.left+"px",transform:"translateY(-100%)"};case"bottom-end":return{top:`${n.top-e.top+n.height}px`,left:`${n.left-e.left+n.width}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:n.top-e.top+"px",left:n.left-e.left+"px",transform:""};case"top-end":case"right-start":return{top:n.top-e.top+"px",left:`${n.left-e.left+n.width}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${n.top-e.top+n.height}px`,left:`${n.left-e.left+n.width}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:n.top-e.top+"px",left:n.left-e.left+"px",transform:""};case"left-end":return{top:`${n.top-e.top+n.height}px`,left:n.left-e.left+"px",transform:"translateY(-100%)"};case"top":return{top:n.top-e.top+"px",left:n.left-e.left+n.width/2+"px",transform:"translateX(-50%)"};case"right":return{top:n.top-e.top+n.height/2+"px",left:`${n.left-e.left+n.width}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:n.top-e.top+n.height/2+"px",left:n.left-e.left+"px",transform:"translateY(-50%)"};case"bottom":default:return{top:`${n.top-e.top+n.height}px`,left:n.left-e.left+n.width/2+"px",transform:"translateX(-50%) translateY(-100%)"}}switch(t){case"bottom-start":return{top:`${n.top-e.top+n.height}px`,left:n.left-e.left+"px",transform:""};case"bottom-end":return{top:`${n.top-e.top+n.height}px`,left:`${n.left-e.left+n.width}px`,transform:"translateX(-100%)"};case"top-start":return{top:n.top-e.top+"px",left:n.left-e.left+"px",transform:"translateY(-100%)"};case"top-end":return{top:n.top-e.top+"px",left:`${n.left-e.left+n.width}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:n.top-e.top+"px",left:`${n.left-e.left+n.width}px`,transform:""};case"right-end":return{top:`${n.top-e.top+n.height}px`,left:`${n.left-e.left+n.width}px`,transform:"translateY(-100%)"};case"left-start":return{top:n.top-e.top+"px",left:n.left-e.left+"px",transform:"translateX(-100%)"};case"left-end":return{top:`${n.top-e.top+n.height}px`,left:n.left-e.left+"px",transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:n.top-e.top+"px",left:n.left-e.left+n.width/2+"px",transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:n.top-e.top+n.height/2+"px",left:`${n.left-e.left+n.width}px`,transform:"translateY(-50%)"};case"left":return{top:n.top-e.top+n.height/2+"px",left:n.left-e.left+"px",transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${n.top-e.top+n.height}px`,left:n.left-e.left+n.width/2+"px",transform:"translateX(-50%)"}}}(y,m,c,u);o.setAttribute("v-placement",y),o.style.transform=`translateX(${x}) translateY(${w}) ${C}`,o.style.transformOrigin=b};xi(n,(t=>{t?(o(),u()):a()}));const u=()=>{ci().then(l).catch((t=>console.error(t)))};["placement","x","y","flip","width","overlap","minWidth"].forEach((e=>{xi(Se(t,e),l)})),["teleportDisabled"].forEach((e=>{xi(Se(t,e),u)})),xi(Se(t,"syncTrigger"),(t=>{t.includes("resize")?e.addResizeListener(l):e.removeResizeListener(l),t.includes("scroll")?e.addScrollListener(l):e.removeScrollListener(l)}));const c=sJ(),d=zQ((()=>{const{to:e}=t;if(void 0!==e)return e;c.value}));return{VBinder:e,mergedEnabled:n,offsetContainerRef:i,followerRef:r,mergedTo:d,syncPosition:l}},render(){return Ei(S1,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{const t=Ei("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[Ei("div",{class:"v-binder-follower-content",ref:"followerRef"},this.$slots)]);return this.zindexable?jn(t,[[y1,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):t}})}}),D1=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),O1="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,R1="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),L1="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(R1):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var B1=["top","right","bottom","left","width","height","size","weight"],F1="undefined"!=typeof MutationObserver,N1=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,r=!1,i=0;function o(){n&&(n=!1,t()),r&&s()}function a(){L1(o)}function s(){var t=Date.now();if(n){if(t-i<2)return;r=!0}else n=!0,r=!1,setTimeout(a,e);i=t}return s}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){O1&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),F1?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){O1&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;B1.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),z1=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},j1=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||R1},G1=Y1(0,0,0,0);function U1(t){return parseFloat(t)||0}function $1(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+U1(t["border-"+n+"-width"])}),0)}function V1(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return G1;var r=j1(t).getComputedStyle(t),i=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=t["padding-"+i];e[i]=U1(o)}return e}(r),o=i.left+i.right,a=i.top+i.bottom,s=U1(r.width),l=U1(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==e&&(s-=$1(r,"left","right")+o),Math.round(l+a)!==n&&(l-=$1(r,"top","bottom")+a)),!function(t){return t===j1(t).document.documentElement}(t)){var u=Math.round(s+o)-e,c=Math.round(l+a)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(c)&&(l-=c)}return Y1(i.left,i.top,s,l)}var W1="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof j1(t).SVGGraphicsElement}:function(t){return t instanceof j1(t).SVGElement&&"function"==typeof t.getBBox};function H1(t){return O1?W1(t)?function(t){var e=t.getBBox();return Y1(0,0,e.width,e.height)}(t):V1(t):G1}function Y1(t,e,n,r){return{x:t,y:e,width:n,height:r}}var X1=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Y1(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=H1(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),q1=function(t,e){var n,r,i,o,a,s,l,u=(r=(n=e).x,i=n.y,o=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),z1(l,{x:r,y:i,width:o,height:a,top:i,right:r+o,bottom:a+i,left:r}),l);z1(this,{target:t,contentRect:u})},K1=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new D1,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof j1(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new X1(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof j1(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new q1(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),Z1="undefined"!=typeof WeakMap?new WeakMap:new D1,Q1=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=N1.getInstance(),r=new K1(e,n,this);Z1.set(this,r)};["observe","unobserve","disconnect"].forEach((function(t){Q1.prototype[t]=function(){var e;return(e=Z1.get(this))[t].apply(e,arguments)}}));var J1=void 0!==R1.ResizeObserver?R1.ResizeObserver:Q1;var t2=new class{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new J1(this.handleResize),this.elHandlersMap=new Map}handleResize(t){for(const e of t){const t=this.elHandlersMap.get(e.target);void 0!==t&&t(e)}}registerHandler(t,e){this.elHandlersMap.set(t,e),this.observer.observe(t)}unregisterHandler(t){this.elHandlersMap.has(t)&&(this.elHandlersMap.delete(t),this.observer.unobserve(t))}},e2=Ke({name:"ResizeObserver",props:{onResize:Function},setup:t=>({registered:!1,handleResize(e){const{onResize:n}=t;void 0!==n&&n(e)}}),mounted(){const t=this.$el;void 0===t?b1("resize-observer","$el does not exist."):t.nextElementSibling!==t.nextSibling?b1("resize-observer","$el can not be observed (it may be a text node)."):null!==t.nextElementSibling&&(t2.registerHandler(t.nextElementSibling,this.handleResize),this.registered=!0)},beforeUnmount(){this.registered&&t2.unregisterHandler(this.$el.nextElementSibling)},render(){return Ir(this.$slots,"default")}});const n2=x1(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[x1("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[x1("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]);var r2=Ke({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(t){const e=iQ();n2.mount({id:"vueuc/virtual-list",head:!0,ssr:e}),sn((()=>{const{defaultScrollIndex:e,defaultScrollKey:n}=t;null!=e?d({index:e}):null!=n&&d({key:n})}));const n=Ee((()=>{const e=new Map,{keyField:n}=t;return t.items.forEach(((t,r)=>{e.set(t[n],r)})),e})),r=ge(null),i=ge(void 0),o=new Map,a=Ee((()=>{const{items:e,itemSize:n,keyField:r}=t,i=new C1(e.length,n);return e.forEach(((t,e)=>{const n=t[r],a=o.get(n);void 0!==a&&i.add(e,a)})),i})),s=ge(0),l=ge(0),u=zQ((()=>Math.max(a.value.getBound(l.value-sq(t.paddingTop))-1,0))),c=Ee((()=>{const{value:e}=i;if(void 0===e)return[];const{items:n,itemSize:r}=t,o=u.value,a=Math.min(o+Math.ceil(e/r+1),n.length-1),s=[];for(let t=o;t<=a;++t)s.push(n[t]);return s})),d=t=>{const{left:e,top:r,index:i,key:o,position:a,behavior:s,debounce:l=!0}=t;if(void 0!==e||void 0!==r)f(e,r,s);else if(void 0!==i)h(i,s,l);else if(void 0!==o){const t=n.value.get(o);void 0!==t&&h(t,s,l)}else"bottom"===a?f(0,Number.MAX_SAFE_INTEGER,s):"top"===a&&f(0,0,s)};function h(e,n,i){const{value:o}=a,s=o.sum(e)+sq(t.paddingTop);if(i){const{scrollTop:t,offsetHeight:i}=r.value;if(s>t){const a=o.get(e);s+a<=t+i||r.value.scrollTo({left:0,top:s+a-i,behavior:n})}else r.value.scrollTo({left:0,top:s,behavior:n})}else r.value.scrollTo({left:0,top:s,behavior:n});p=e}function f(t,e,n){r.value.scrollTo({left:t,top:e,behavior:n})}let p,g;function v(){const{value:t}=r;null!=t&&(g=null!=p?p:u.value,p=void 0,l.value=r.value.scrollTop)}return{listHeight:i,listStyle:{overflow:"auto"},keyToIndex:n,itemsStyle:Ee((()=>{const{itemResizable:e}=t,n=lq(a.value.sum());return s.value,[t.itemsStyle,{boxSizing:"content-box",height:e?"":n,minHeight:e?n:"",paddingTop:lq(t.paddingTop),paddingBottom:lq(t.paddingBottom)}]})),visibleItemsStyle:Ee((()=>(s.value,{transform:`translate3d(0, ${lq(a.value.sum(u.value))}, 0)`}))),viewportItems:c,listElRef:r,itemsElRef:ge(null),scrollTo:d,handleListResize:function(e){i.value=e.contentRect.height;const{onResize:n}=t;void 0!==n&&n(e)},handleListScroll:function(e){oq(v);const{onScroll:n}=t;void 0!==n&&n(e)},handleItemResize:function(e,i){var l;if(t.ignoreItemResize)return;const{value:u}=a,c=n.value.get(e),d=i.target.offsetHeight;0===d-t.itemSize?o.delete(e):o.set(e,d-t.itemSize);const h=d-u.get(c);0!==h&&(void 0!==g&&c<=g&&(null===(l=r.value)||void 0===l||l.scrollBy(0,h)),u.add(c,h),s.value++)}}},render(){const{itemResizable:t,keyField:e,keyToIndex:n,visibleItemsTag:r}=this;return Ei(e2,{onResize:this.handleListResize},{default:()=>{var i,o;return Ei("div",Tr(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.onWheel,ref:"listElRef"}),[0!==this.items.length?Ei("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[Ei(r,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map((r=>{const i=r[e],o=n.get(i),a=this.$slots.default({item:r,index:o})[0];return t?Ei(e2,{key:i,onResize:t=>this.handleItemResize(i,t)},{default:()=>a}):(a.key=i,a)}))})]):null===(o=(i=this.$slots).empty)||void 0===o?void 0:o.call(i)])}})}});const i2=x1("[v-hidden]",{display:"none!important"});var o2=Ke({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateOverflow:Function},setup(t,{slots:e}){const n=ge(null),r=ge(null);function i(){const{value:i}=n,{getCounter:o,getTail:a}=t;let s;if(s=void 0!==o?o():r.value,!i||!s)return;s.hasAttribute("v-hidden")&&s.removeAttribute("v-hidden");const{children:l}=i,u=i.offsetWidth,c=[],d=e.tail?null==a?void 0:a():null;let h=d?d.offsetWidth:0,f=!1;const p=i.children.length-(e.tail?1:0);for(let e=0;e<p-1;++e){if(e<0)continue;const n=l[e];if(f){n.hasAttribute("v-hidden")||n.setAttribute("v-hidden","");continue}n.hasAttribute("v-hidden")&&n.removeAttribute("v-hidden");const r=n.offsetWidth;if(h+=r,c[e]=r,h>u){const{updateCounter:n}=t;for(let t=e;t>=0;--t){const r=p-1-t;void 0!==n?n(r):s.textContent=`${r}`;const i=s.offsetWidth;if(h-=c[t],h+i<=u||0===t){f=!0,e=t-1,d&&(-1===e?(d.style.maxWidth=u-i+"px",d.style.boxSizing="border-box"):d.style.maxWidth="");break}}}}const{onUpdateOverflow:g}=t;f?void 0!==g&&g(!0):(void 0!==g&&g(!1),s.setAttribute("v-hidden",""))}const o=iQ();return i2.mount({id:"vueuc/overflow",head:!0,ssr:o}),sn(i),{selfRef:n,counterRef:r,sync:i}},render(){const{$slots:t}=this;return ci(this.sync),Ei("div",{class:"v-overflow",ref:"selfRef"},[Ir(t,"default"),t.counter?t.counter():Ei("span",{style:{display:"inline-block"},ref:"counterRef"}),t.tail?t.tail():null])}});const a2="#FFF",s2="#000",l2="#000",u2="#fff",c2="#fff",d2="#fff",h2="#fff",f2="0.82",p2="0.72",g2="0.38",v2="0.24",m2="0.18",y2="0.52",b2="0.5",x2="0.2",w2=".08",C2="0",S2="0.25",k2="0.4",E2="#36ad6a",M2="#18a058",A2="#0c7a43",_2="#36ad6a",T2="#4098fc",P2="#2080f0",I2="#1060c9",D2="#4098fc",O2="#de576d",R2="#d03050",L2="#ab1f3f",B2="#de576d",F2="#fcb040",N2="#f0a020",z2="#c97c10",j2="#fcb040",G2="#36ad6a",U2="#18a058",$2="#0c7a43",V2="#36ad6a",W2=wq(a2),H2=wq(s2),Y2="rgba("+H2.slice(0,3).join(", ")+", ";function X2(t){return Y2+String(t)+")"}function q2(t){const e=Array.from(H2);return e[3]=Number(t),kq(W2,e)}var K2=Object.assign(Object.assign({name:"common"},BQ),{baseColor:a2,primaryColor:M2,primaryColorHover:E2,primaryColorPressed:A2,primaryColorSuppl:_2,infoColor:P2,infoColorHover:T2,infoColorPressed:I2,infoColorSuppl:D2,successColor:U2,successColorHover:G2,successColorPressed:$2,successColorSuppl:V2,warningColor:N2,warningColorHover:F2,warningColorPressed:z2,warningColorSuppl:j2,errorColor:R2,errorColorHover:O2,errorColorPressed:L2,errorColorSuppl:B2,textColorBase:l2,textColor1:"rgb(31, 34, 37)",textColor2:"rgb(51, 54, 57)",textColor3:"rgb(158, 164, 170)",textColorDisabled:q2(v2),placeholderColor:q2(v2),placeholderColorDisabled:q2(m2),iconColor:q2(v2),iconColorHover:Mq(q2(v2),{lightness:.75}),iconColorPressed:Mq(q2(v2),{lightness:.9}),iconColorDisabled:q2(m2),opacity1:f2,opacity2:p2,opacity3:g2,opacity4:v2,opacity5:m2,dividerColor:"rgb(239, 239, 245)",borderColor:"rgb(224, 224, 230)",closeColor:q2(Number(y2)),closeColorHover:q2(1.25*Number(y2)),closeColorPressed:q2(.8*Number(y2)),closeColorDisabled:q2(v2),clearColor:q2(v2),clearColorHover:Mq(q2(v2),{lightness:.75}),clearColorPressed:Mq(q2(v2),{lightness:.9}),scrollbarColor:X2(S2),scrollbarColorHover:X2(k2),scrollbarWidth:"5px",scrollbarHeight:"5px",scrollbarBorderRadius:"5px",progressRailColor:q2(w2),railColor:"rgb(219, 219, 223)",popoverColor:u2,tableColor:c2,cardColor:c2,modalColor:d2,bodyColor:h2,tagColor:"rgb(250, 250, 252)",avatarColor:q2(x2),invertedColor:"rgb(0, 20, 40)",inputColor:q2(C2),codeColor:"rgb(244, 244, 248)",tabColor:"rgb(250, 250, 252)",actionColor:"rgb(250, 250, 252)",tableHeaderColor:"rgb(250, 250, 252)",hoverColor:"rgb(243, 243, 245)",tableColorHover:"rgba(0, 0, 100, 0.02)",pressedColor:"rgb(237, 237, 239)",opacityDisabled:b2,inputColorDisabled:"rgb(250, 250, 252)",boxShadow1:"0 1px 2px -2px rgba(0, 0, 0, .08), 0 3px 6px 0 rgba(0, 0, 0, .06), 0 5px 12px 4px rgba(0, 0, 0, .04)",boxShadow2:"0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05)",boxShadow3:"0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03)"}),Z2={iconSizeSmall:"34px",iconSizeMedium:"40px",iconSizeLarge:"46px",iconSizeHuge:"52px"};var Q2={name:"Empty",common:K2,self:t=>{const{textColorDisabled:e,iconColor:n,textColor2:r,fontSizeSmall:i,fontSizeMedium:o,fontSizeLarge:a,fontSizeHuge:s}=t;return Object.assign(Object.assign({},Z2),{fontSizeSmall:i,fontSizeMedium:o,fontSizeLarge:a,fontSizeHuge:s,textColor:e,iconColor:n,extraTextColor:r})}},J2=AQ("empty","\n display: flex;\n flex-direction: column;\n align-items: center;\n font-size: var(--font-size);\n",[_Q("icon","\n width: var(--icon-size);\n height: var(--icon-size);\n font-size: var(--icon-size);\n line-height: var(--icon-size);\n color: var(--icon-color);\n transition:\n color .3s var(--bezier);\n "),_Q("description","\n margin-top: 8px;\n transition: color .3s var(--bezier);\n color: var(--text-color);\n "),_Q("extra","\n text-align: center;\n transition: color .3s var(--bezier);\n margin-top: 12px;\n color: var(--extra-text-color);\n ")]);var t3=Ke({name:"Empty",props:Object.assign(Object.assign({},LJ.props),{description:{type:String,default:void 0},showDescription:{type:Boolean,default:!0},size:{type:String,default:"medium"}}),setup(t){const{mergedClsPrefixRef:e}=FJ(t),n=LJ("Empty","Empty",J2,Q2,t,e),{localeRef:r}=t0("Empty");return{mergedClsPrefix:e,localizedDescription:Ee((()=>t.description||r.value.description)),cssVars:Ee((()=>{const{size:e}=t,{common:{cubicBezierEaseInOut:r},self:{[CQ("iconSize",e)]:i,[CQ("fontSize",e)]:o,textColor:a,iconColor:s,extraTextColor:l}}=n.value;return{"--icon-size":i,"--font-size":o,"--bezier":r,"--text-color":a,"--icon-color":s,"--extra-text-color":l}}))}},render(){const{$slots:t,mergedClsPrefix:e}=this;return Ei("div",{class:`${e}-empty`,style:this.cssVars},Ei("div",{class:`${e}-empty__icon`},Ir(t,"icon",void 0,(()=>[Ei(T0,{clsPrefix:e},{default:()=>Ei(d0,null)})]))),this.showDescription?Ei("div",{class:`${e}-empty__description`},Ir(t,"default",void 0,(()=>[this.localizedDescription]))):null,t.extra?Ei("div",{class:`${e}-empty__extra`},Ir(t,"extra")):null)}});var e3={name:"Scrollbar",common:K2,self:t=>{const{scrollbarColor:e,scrollbarColorHover:n}=t;return{color:e,colorHover:n}}};const{cubicBezierEaseInOut:n3}=BQ;function r3({name:t="fade-in",enterDuration:e="0.2s",leaveDuration:n="0.2s",enterCubicBezier:r=n3,leaveCubicBezier:i=n3}={}){return[EQ(`&.${t}-transition-enter-active`,{transition:`all ${e} ${r}!important`}),EQ(`&.${t}-transition-leave-active`,{transition:`all ${n} ${i}!important`}),EQ(`&.${t}-transition-enter-from, &.${t}-transition-leave-to`,{opacity:0}),EQ(`&.${t}-transition-leave-from, &.${t}-transition-enter-to`,{opacity:1})]}var i3=AQ("scrollbar","\n overflow: hidden;\n position: relative;\n z-index: auto;\n height: 100%;\n width: 100%;\n",[EQ(">",[AQ("scrollbar-container","\n width: 100%;\n overflow: scroll;\n height: 100%;\n max-height: inherit;\n scrollbar-width: none;\n ",[EQ("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb","\n width: 0;\n height: 0;\n display: none;\n "),EQ(">",[AQ("scrollbar-content","\n box-sizing: border-box;\n min-width: 100%;\n ")])]),AQ("scrollbar-rail","\n position: absolute;\n pointer-events: none;\n user-select: none;\n ",[TQ("horizontal","\n left: 2px;\n right: 2px;\n bottom: 4px;\n height: var(--scrollbar-height);\n ",[EQ(">",[_Q("scrollbar","\n height: var(--scrollbar-height);\n border-radius: var(--scrollbar-border-radius);\n right: 0;\n ")])]),TQ("vertical","\n right: 4px;\n top: 2px;\n bottom: 2px;\n width: var(--scrollbar-width);\n ",[EQ(">",[_Q("scrollbar","\n width: var(--scrollbar-width);\n border-radius: var(--scrollbar-border-radius);\n bottom: 0;\n ")])]),TQ("disabled",[EQ(">",[_Q("scrollbar",{pointerEvents:"none"})])]),EQ(">",[_Q("scrollbar","\n position: absolute;\n cursor: pointer;\n pointer-events: all;\n background-color: var(--scrollbar-color);\n transition: background-color .2s var(--scrollbar-bezier);\n ",[r3(),EQ("&:hover",{backgroundColor:"var(--scrollbar-color-hover)"})])])])])]);var o3=Ke({name:"Scrollbar",props:Object.assign(Object.assign({},LJ.props),{size:{type:Number,default:5},duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:{type:Boolean,default:!1},container:Function,content:Function,containerStyle:[String,Object],contentClass:String,contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function}),inheritAttrs:!1,setup(t){const{mergedClsPrefixRef:e}=FJ(t),n=ge(null),r=ge(null),i=ge(null),o=ge(null),a=ge(null),s=ge(null),l=ge(null),u=ge(null),c=ge(null),d=ge(null),h=ge(0),f=ge(0),p=ge(!1),g=ge(!1);let v,m,y=!1,b=!1,x=0,w=0,C=0,S=0;const k=uJ,E=Ee((()=>{const{value:e}=l,{value:n}=a,{value:r}=c;return null===e||null===n||null===r?0:Math.min(e,r*e/n+1.5*t.size)})),M=Ee((()=>`${E.value}px`)),A=Ee((()=>{const{value:e}=u,{value:n}=s,{value:r}=d;return null===e||null===n||null===r?0:r*e/n+1.5*t.size})),_=Ee((()=>`${A.value}px`)),T=Ee((()=>{const{value:t}=l,{value:e}=h,{value:n}=a,{value:r}=c;return null===t||null===n||null===r?0:e/(n-t)*(r-E.value)})),P=Ee((()=>`${T.value}px`)),I=Ee((()=>{const{value:t}=u,{value:e}=f,{value:n}=s,{value:r}=d;return null===t||null===n||null===r?0:e/(n-t)*(r-A.value)})),D=Ee((()=>`${I.value}px`)),O=Ee((()=>{const{value:t}=l,{value:e}=a;return null!==t&&null!==e&&e>t})),R=Ee((()=>{const{value:t}=u,{value:e}=s;return null!==t&&null!==e&&e>t})),L=Ee((()=>{const{container:e}=t;return e?e():n.value})),B=Ee((()=>{const{content:e}=t;return e?e():r.value})),F=G;function N(t,e,n,r,i){const{value:o}=L;if(o){if(r){const{scrollTop:r,offsetHeight:a}=o;if(e>r)return void(e+n<=r+a||o.scrollTo({left:t,top:e+n-a,behavior:i}))}o.scrollTo({left:t,top:e,behavior:i})}}function z(){!function(){void 0!==m&&window.clearTimeout(m);m=window.setTimeout((()=>{g.value=!1}),t.duration)}(),function(){void 0!==v&&window.clearTimeout(v);v=window.setTimeout((()=>{p.value=!1}),t.duration)}()}function j(){const{value:t}=L;t&&(h.value=t.scrollTop,f.value=t.scrollLeft)}function G(){t.scrollable&&(!function(){const{value:t}=B;t&&(a.value=t.offsetHeight,s.value=t.offsetWidth);const{value:e}=L;e&&(l.value=e.offsetHeight,u.value=e.offsetWidth);const{value:n}=o,{value:r}=i;n&&(d.value=n.offsetWidth),r&&(c.value=r.offsetHeight)}(),j())}function U(e){if(!b)return;void 0!==v&&window.clearTimeout(v),void 0!==m&&window.clearTimeout(m);const{value:n}=u,{value:r}=s,{value:i}=A;if(null===n||null===r)return;const o=e.clientX-C,a=r-n;let l=w+o*(r-n)/(n-i);l=Math.min(a,l),l=Math.max(l,0);const{value:c}=L;if(c){c.scrollLeft=l;const{internalOnUpdateScrollLeft:e}=t;e&&e(l)}}function $(t){t.preventDefault(),t.stopPropagation(),qQ("mousemove",window,U,!0),qQ("mouseup",window,$,!0),b=!1,G();const{value:e}=L;(null==e?void 0:e.contains(t.target))||z()}function V(t){if(!y)return;void 0!==v&&window.clearTimeout(v),void 0!==m&&window.clearTimeout(m);const{value:e}=l,{value:n}=a,{value:r}=E;if(null===e||null===n)return;const i=t.clientY-S,o=n-e;let s=x+i*(n-e)/(e-r);s=Math.min(o,s),s=Math.max(s,0);const{value:u}=L;u&&(u.scrollTop=s)}function W(t){t.preventDefault(),t.stopPropagation(),qQ("mousemove",window,V,!0),qQ("mouseup",window,W,!0),y=!1,G();const{value:e}=L;(null==e?void 0:e.contains(t.target))||z()}yi((()=>{const{value:t}=R,{value:n}=O,{value:r}=e,{value:a}=o,{value:s}=i;a&&(t?a.classList.remove(`${r}-scrollbar-rail--disabled`):a.classList.add(`${r}-scrollbar-rail--disabled`)),s&&(n?s.classList.remove(`${r}-scrollbar-rail--disabled`):s.classList.add(`${r}-scrollbar-rail--disabled`))})),sn((()=>{t.container||G()})),cn((()=>{void 0!==v&&window.clearTimeout(v),void 0!==m&&window.clearTimeout(m),qQ("mousemove",window,V,!0),qQ("mouseup",window,W,!0)}));const H=LJ("Scrollbar","Scrollbar",i3,e3,t,e);return{sync:G,scrollTo:(e,n)=>{if(!t.scrollable)return;if("number"==typeof e)return void N(e,null!=n?n:0,0,!1,"auto");const{left:r,top:i,index:o,elSize:a,position:s,behavior:l,el:u,debounce:c=!0}=e;void 0===r&&void 0===i||N(null!=r?r:0,null!=i?i:0,0,!1,l),void 0!==u?N(0,u.offsetTop,u.offsetHeight,c,l):void 0!==o&&void 0!==a?N(0,o*a,a,c,l):"bottom"===s?N(0,Number.MAX_SAFE_INTEGER,0,!1,l):"top"===s&&N(0,0,0,!1,l)},mergedClsPrefix:e,containerScrollTop:h,containerRef:n,contentRef:r,yRailRef:i,xRailRef:o,needYBar:O,needXBar:R,yBarSizePx:M,xBarSizePx:_,yBarTopPx:P,xBarLeftPx:D,isShowXBar:p,isShowYBar:g,isIos:k,handleScroll:function(e){const{onScroll:n}=t;n&&n(e),j()},handleContentResize:F,handleContainerResize:e=>{const{onResize:n}=t;n&&n(e),G()},handleMouseEnterWrapper:function(){!function(){void 0!==v&&window.clearTimeout(v);p.value=!0}(),function(){void 0!==m&&window.clearTimeout(m);g.value=!0}(),G()},handleMouseLeaveWrapper:function(){z()},handleYScrollMouseDown:function(t){t.preventDefault(),t.stopPropagation(),y=!0,XQ("mousemove",window,V,!0),XQ("mouseup",window,W,!0),x=h.value,S=t.clientY},handleXScrollMouseDown:function(t){t.preventDefault(),t.stopPropagation(),b=!0,XQ("mousemove",window,U,!0),XQ("mouseup",window,$,!0),w=f.value,C=t.clientX},cssVars:Ee((()=>{const{common:{cubicBezierEaseInOut:t,scrollbarBorderRadius:e,scrollbarHeight:n,scrollbarWidth:r},self:{color:i,colorHover:o}}=H.value;return{"--scrollbar-bezier":t,"--scrollbar-color":i,"--scrollbar-color-hover":o,"--scrollbar-border-radius":e,"--scrollbar-width":r,"--scrollbar-height":n}}))}},render(){const{$slots:t,mergedClsPrefix:e}=this;if(!this.scrollable)return Ir(t,"default");const n=()=>Ei("div",Tr(this.$attrs,{class:`${e}-scrollbar`,style:this.cssVars,onMouseenter:this.handleMouseEnterWrapper,onMouseleave:this.handleMouseLeaveWrapper}),[this.container?Ir(t,"default"):Ei("div",{ref:"containerRef",class:`${e}-scrollbar-container`,style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},Ei(e2,{onResize:this.handleContentResize},{default:()=>Ei("div",{ref:"contentRef",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${e}-scrollbar-content`,this.contentClass]},t)})),Ei("div",{ref:"yRailRef",class:`${e}-scrollbar-rail ${e}-scrollbar-rail--vertical`,style:[this.horizontalRailStyle]},Ei($i,{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?Ei("div",{class:`${e}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),Ei("div",{ref:"xRailRef",class:`${e}-scrollbar-rail ${e}-scrollbar-rail--horizontal`,style:[this.verticalRailStyle]},Ei($i,{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?Ei("div",{class:`${e}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,left:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))]);return this.container?n():Ei(e2,{onResize:this.handleContainerResize},{default:n})}});const a3=Ei(a0);var s3=Ke({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(t){const{valueRef:e,pendingTmNodeRef:n,multipleRef:r,valueSetRef:i,renderLabelRef:o,renderOptionRef:a,handleOptionClick:s,handleOptionMouseEnter:l}=je(TJ),u=zQ((()=>{const{value:e}=n;return!!e&&t.tmNode.key===e.key}));return{multiple:r,isGrouped:zQ((()=>{const{tmNode:e}=t,{parent:n}=e;return n&&"group"===n.rawNode.type})),isPending:u,isSelected:zQ((()=>{const{value:n}=e,{value:o}=r;if(null===n)return!1;const a=t.tmNode.rawNode.value;if(o){const{value:t}=i;return t.has(a)}return n===a})),renderLabel:o,renderOption:a,handleMouseMove:function(e){const{tmNode:n}=t,{value:r}=u;n.disabled||r||l(e,n)},handleMouseEnter:function(e){const{tmNode:n}=t;n.disabled||l(e,n)},handleClick:function(e){const{tmNode:n}=t;n.disabled||s(e,n)}}},render(){const{clsPrefix:t,tmNode:{rawNode:e},isSelected:n,isPending:r,isGrouped:i,multiple:o,renderOption:a,renderLabel:s,handleClick:l,handleMouseEnter:u,handleMouseMove:c}=this,d=function(t,e){return Ei($i,{name:"fade-in-scale-up-transition"},{default:()=>t?Ei(T0,{clsPrefix:e,class:`${e}-base-select-option__check`},{default:()=>a3}):null})}(o&&n,t),h=s?[s(e,n),d]:[vJ(e.label,e,n),d],f=Ei("div",{class:[`${t}-base-select-option`,e.class,{[`${t}-base-select-option--disabled`]:e.disabled,[`${t}-base-select-option--selected`]:n,[`${t}-base-select-option--grouped`]:i,[`${t}-base-select-option--pending`]:r}],style:e.style,onClick:l,onMouseenter:u,onMousemove:c},h);return e.render?e.render({node:f,option:e,selected:n}):a?a({node:f,option:e,selected:n}):f}}),l3=Ke({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:t,renderOptionRef:e}=je(TJ);return{renderLabel:t,renderOption:e}},render(){const{clsPrefix:t,renderLabel:e,renderOption:n,tmNode:{rawNode:r}}=this,i=Ei("div",{class:`${t}-base-select-group-header`},e?e(r,!1):vJ(r.label,r,!1));return r.render?r.render({node:i,option:r}):n?n({node:i,option:r,selected:!1}):i}});const{cubicBezierEaseIn:u3,cubicBezierEaseOut:c3,transformDebounceScale:d3}=BQ;function h3({transformOrigin:t="inherit",duration:e=".2s",enterScale:n=".9",originalTransform:r="",originalTransition:i=""}={}){return[EQ("&.fade-in-scale-up-transition-leave-active",{transformOrigin:t,transition:`opacity ${e} ${u3}, transform ${e} ${u3} ${i&&","+i}`}),EQ("&.fade-in-scale-up-transition-enter-active",{transformOrigin:t,transition:`opacity ${e} ${c3}, transform ${e} ${c3} ${i&&","+i}`}),EQ("&.fade-in-scale-up-transition-enter-from, &.fade-in-scale-up-transition-leave-to",{opacity:0,transform:`${r} scale(${n})`}),EQ("&.fade-in-scale-up-transition-leave-from, &.fade-in-scale-up-transition-enter-to",{opacity:1,transform:`${r} scale(${d3})`})]}var f3=AQ("base-select-menu","\n outline: none;\n z-index: 0;\n position: relative;\n border-radius: var(--border-radius);\n transition:\n background-color .3s var(--bezier),\n box-shadow .3s var(--bezier);\n background-color: var(--color);\n",[AQ("scrollbar","\n max-height: var(--height);\n "),AQ("virtual-list","\n max-height: var(--height);\n "),AQ("base-select-option","\n height: var(--option-height);\n line-height: var(--option-height);\n font-size: var(--option-font-size);\n "),AQ("base-select-group-header","\n height: var(--option-height);\n line-height: var(--option-height);\n font-size: .93em;\n "),AQ("base-select-menu-option-wrapper","\n position: relative;\n width: 100%;\n "),_Q("loading, empty","\n display: flex;\n padding: 12px 32px;\n flex: 1;\n justify-content: center;\n "),_Q("loading","\n color: var(--loading-color);\n font-size: var(--loading-size);\n "),_Q("action","\n padding: 8px var(--option-padding-left);\n font-size: var(--option-font-size);\n transition: \n color .3s var(--bezier);\n border-color .3s var(--bezier);\n border-top: 1px solid var(--action-divider-color);\n color: var(--action-text-color);\n "),AQ("base-select-group-header","\n position: relative;\n cursor: default;\n padding: var(--option-padding);\n color: var(--group-header-text-color);\n "),AQ("base-select-option","\n cursor: pointer;\n position: relative;\n padding: var(--option-padding);\n white-space: nowrap;\n transition:\n background-color .3s var(--bezier),\n color .3s var(--bezier),\n opacity .3s var(--bezier);\n text-overflow: ellipsis;\n overflow: hidden;\n box-sizing: border-box;\n color: var(--option-text-color);\n opacity: 1;\n ",[EQ("&:active",{color:"var(--option-text-color-pressed)"}),TQ("grouped",{paddingLeft:"calc(var(--option-padding-left) * 1.5)"}),TQ("selected",{color:"var(--option-text-color-active)"}),TQ("disabled",{cursor:"not-allowed"},[PQ("selected",{color:"var(--option-text-color-disabled)"}),TQ("selected",{opacity:"var(--option-opacity-disabled)"})]),TQ("pending",{backgroundColor:"var(--option-color-pending)"}),_Q("check","\n font-size: 14px;\n position: absolute;\n right: 8px;\n top: calc(var(--option-height) / 2 - 7px);\n color: var(--option-check-color);\n transition: color .3s var(--bezier);\n ",[h3({enterScale:"0.5"})])]),TQ("multiple",[AQ("base-select-option","\n position: relative;\n padding-right: 28px;\n ")])]),p3={height:"calc(var(--option-height) * 7.6)",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"};var g3={name:"InternalSelectMenu",common:K2,peers:{Scrollbar:e3,Empty:Q2},self:t=>{const{borderRadius:e,popoverColor:n,textColor3:r,dividerColor:i,textColor2:o,primaryColorPressed:a,textColorDisabled:s,primaryColor:l,opacityDisabled:u,hoverColor:c,fontSizeSmall:d,fontSizeMedium:h,fontSizeLarge:f,fontSizeHuge:p,heightSmall:g,heightMedium:v,heightLarge:m,heightHuge:y}=t;return Object.assign(Object.assign({},p3),{optionFontSizeSmall:d,optionFontSizeMedium:h,optionFontSizeLarge:f,optionFontSizeHuge:p,optionHeightSmall:g,optionHeightMedium:v,optionHeightLarge:m,optionHeightHuge:y,borderRadius:e,color:n,groupHeaderTextColor:r,actionDividerColor:i,optionTextColor:o,optionTextColorPressed:a,optionTextColorDisabled:s,optionTextColorActive:l,optionOpacityDisabled:u,optionCheckColor:l,optionColorPending:c,actionTextColor:o,loadingColor:l})}},v3=Ke({name:"InternalSelectMenu",props:Object.assign(Object.assign({},LJ.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},width:[Number,String],autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onToggle:Function}),setup(t){const e=LJ("InternalSelectMenu","InternalSelectMenu",f3,g3,t,Se(t,"clsPrefix")),n=ge(null),r=ge(null),i=ge(null),o=Ee((()=>t.treeMate.getFlattenedNodes())),a=Ee((()=>function(t){const e=new Map;return t.forEach(((t,n)=>{e.set(t.key,n)})),t=>{var n;return null!==(n=e.get(t))&&void 0!==n?n:null}}(o.value))),s=ge(null);function l(){const{treeMate:e}=t;g(t.autoPending?null===t.value?e.getFirstAvailableNode():t.multiple?e.getNode((t.value||[])[(t.value||[]).length-1])||e.getFirstAvailableNode():e.getNode(t.value)||e.getFirstAvailableNode():null)}l(),sn((()=>{yi((()=>{t.show&&(l(),ci(v))}))}));const u=Ee((()=>sq(e.value.self[CQ("optionHeight",t.size)]))),c=Ee((()=>uq(e.value.self[CQ("padding",t.size)]))),d=Ee((()=>t.multiple&&Array.isArray(t.value)?new Set(t.value):new Set)),h=Ee((()=>{const t=o.value;return t&&0===t.length})),f=Ee((()=>[{width:kJ(t.width)},m.value]));function p(e){const{onScroll:n}=t;n&&n(e)}function g(t,e=!1){s.value=t,e&&v()}function v(){var e,n;const o=s.value;if(!o)return;const l=a.value(o.key);null!==l&&(t.virtualScroll?null===(e=r.value)||void 0===e||e.scrollTo({index:l}):null===(n=i.value)||void 0===n||n.scrollTo({index:l,elSize:u.value}))}xi(Se(t,"treeMate"),(()=>{if(t.autoPending){g(t.treeMate.getFirstAvailableNode())}else g(null)})),ze(TJ,{handleOptionMouseEnter:function(t,e){e.disabled||g(e,!1)},handleOptionClick:function(e,n){n.disabled||function(e){const{onToggle:n}=t;n&&n(e)}(n)},valueSetRef:d,multipleRef:Se(t,"multiple"),valueRef:Se(t,"value"),renderLabelRef:Se(t,"renderLabel"),renderOptionRef:Se(t,"renderOption"),pendingTmNodeRef:s}),ze(PJ,n),sn((()=>{const{value:t}=i;t&&t.sync()}));const m=Ee((()=>{const{size:n}=t,{common:{cubicBezierEaseInOut:r},self:{height:i,borderRadius:o,color:a,groupHeaderTextColor:s,actionDividerColor:l,optionTextColorPressed:u,optionTextColor:c,optionTextColorDisabled:d,optionTextColorActive:h,optionOpacityDisabled:f,optionCheckColor:p,actionTextColor:g,optionColorPending:v,loadingColor:m,loadingSize:y,[CQ("optionFontSize",n)]:b,[CQ("optionHeight",n)]:x,[CQ("optionPadding",n)]:w}}=e.value;return{"--height":i,"--action-divider-color":l,"--action-text-color":g,"--bezier":r,"--border-radius":o,"--color":a,"--option-font-size":b,"--group-header-text-color":s,"--option-check-color":p,"--option-color-pending":v,"--option-height":x,"--option-opacity-disabled":f,"--option-text-color":c,"--option-text-color-active":h,"--option-text-color-disabled":d,"--option-text-color-pressed":u,"--option-padding":w,"--option-padding-left":uq(w,"left"),"--loading-color":m,"--loading-size":y}})),y={selfRef:n,next:function(){const{value:t}=s;t&&g(t.getNext({loop:!0}),!0)},prev:function(){const{value:t}=s;t&&g(t.getPrev({loop:!0}),!0)},getPendingTmNode:function(){const{value:t}=s;return t||null}};return Object.assign({virtualListRef:r,scrollbarRef:i,style:f,itemSize:u,padding:c,flattenedNodes:o,empty:h,virtualListContainer(){const{value:t}=r;return null==t?void 0:t.listElRef},virtualListContent(){const{value:t}=r;return null==t?void 0:t.itemsElRef},doScroll:p,handleFocusin:function(e){var r,i;(null===(r=n.value)||void 0===r?void 0:r.contains(e.target))&&(null===(i=t.onFocus)||void 0===i||i.call(t,e))},handleFocusout:function(e){var r,i;(null===(r=n.value)||void 0===r?void 0:r.contains(e.relatedTarget))||null===(i=t.onBlur)||void 0===i||i.call(t,e)},handleKeyUp:function(e){var n;aq(e,"action")||null===(n=t.onKeyup)||void 0===n||n.call(t,e)},handleKeyDown:function(e){var n;aq(e,"action")||null===(n=t.onKeydown)||void 0===n||n.call(t,e)},handleMouseDown:function(e){var n;null===(n=t.onMousedown)||void 0===n||n.call(t,e),t.focusable||e.preventDefault()},handleVirtualListResize:function(){var t;null===(t=i.value)||void 0===t||t.sync()},handleVirtualListScroll:function(t){var e;null===(e=i.value)||void 0===e||e.sync(),p(t)}},y)},render(){const{$slots:t,virtualScroll:e,clsPrefix:n}=this;return Ei("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:[`${n}-base-select-menu`,this.multiple&&`${n}-base-select-menu--multiple`],style:this.style,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},this.loading?Ei("div",{class:`${n}-base-select-menu__loading`},Ei(L0,{clsPrefix:n,strokeWidth:20})):this.empty?Ei("div",{class:`${n}-base-select-menu__empty`},Ir(t,"empty",void 0,(()=>[Ei(t3,null)]))):Ei(o3,{ref:"scrollbarRef",scrollable:this.scrollable,container:e?this.virtualListContainer:void 0,content:e?this.virtualListContent:void 0,onScroll:e?void 0:this.doScroll},{default:()=>e?Ei(r2,{ref:"virtualListRef",class:`${n}-virtual-list`,items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll},{default:({item:t})=>t.isGroup?Ei(l3,{key:t.key,clsPrefix:n,tmNode:t}):t.ignored?null:Ei(s3,{clsPrefix:n,key:t.key,tmNode:t})}):Ei("div",{class:`${n}-base-select-menu-option-wrapper`,style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map((t=>t.isGroup?Ei(l3,{key:t.key,clsPrefix:n,tmNode:t}):Ei(s3,{clsPrefix:n,key:t.key,tmNode:t}))))}),t.action&&Ei("div",{class:`${n}-base-select-menu__action`,"data-action":!0},Ir(t,"action")),t.action&&Ei(D0,{onFocus:this.onTabOut}))}}),m3=AQ("base-wave","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n border-radius: inherit;\n"),y3=Ke({name:"BaseWave",props:{clsPrefix:{type:String,required:!0}},setup(t){e0("BaseWave",m3,Se(t,"clsPrefix"));const e=ge(null),n=ge(!1);let r=null;return cn((()=>{null!==r&&window.clearTimeout(r)})),{active:n,selfRef:e,play(){null!==r&&(window.clearTimeout(r),n.value=!1,r=null),ci((()=>{var t;null===(t=e.value)||void 0===t||t.offsetHeight,n.value=!0,r=window.setTimeout((()=>{n.value=!1,r=null}),1e3)}))}}},render(){const{clsPrefix:t}=this;return Ei("div",{ref:"selfRef","aria-hidden":!0,class:[`${t}-base-wave`,this.active&&`${t}-base-wave--active`]})}}),b3={space:"6px",spaceArrow:"10px",arrowOffset:"10px",arrowOffsetVertical:"10px",arrowHeight:"6px",padding:"8px 14px"};var x3={name:"Popover",common:K2,self:t=>{const{boxShadow2:e,popoverColor:n,textColor2:r,borderRadius:i,fontSize:o,dividerColor:a}=t;return Object.assign(Object.assign({},b3),{fontSize:o,borderRadius:i,color:n,dividerColor:a,textColor:r,boxShadow:e})}};const w3={top:"bottom",bottom:"top",left:"right",right:"left"};var C3=EQ([AQ("popover","\n transition:\n box-shadow .3s var(--bezier),\n background-color .3s var(--bezier),\n color .3s var(--bezier);\n transform-origin: inherit;\n position: relative;\n font-size: var(--font-size);\n color: var(--text-color);\n box-shadow: var(--box-shadow);\n ",[EQ("&.popover-transition-enter-from, &.popover-transition-leave-to","\n opacity: 0;\n transform: scale(.85);\n "),EQ("&.popover-transition-enter-to, &.popover-transition-leave-from","\n transform: scale(1);\n opacity: 1;\n "),EQ("&.popover-transition-enter-active","\n transition:\n opacity .15s var(--bezier-ease-out),\n transform .15s var(--bezier-ease-out);\n "),EQ("&.popover-transition-leave-active","\n transition:\n opacity .15s var(--bezier-ease-in),\n transform .15s var(--bezier-ease-in);\n "),PQ("raw","\n background-color: var(--color);\n border-radius: var(--border-radius);\n var(--padding);\n ",[PQ("show-header","padding: var(--padding);")]),_Q("header","\n padding: var(--padding);\n border-bottom: 1px solid var(--divider-color);\n transition: border-color .3s var(--bezier);\n "),_Q("content","\n padding: var(--padding);\n "),AQ("popover-arrow-wrapper","\n position: absolute;\n overflow: hidden;\n pointer-events: none;\n ",[AQ("popover-arrow","\n transition: background-color .3s var(--bezier);\n position: absolute;\n display: block;\n width: calc(var(--arrow-height) * 1.414);\n height: calc(var(--arrow-height) * 1.414);\n box-shadow: 0 0 8px 0 rgba(0, 0, 0, .12);\n transform: rotate(45deg);\n background-color: var(--color);\n pointer-events: all;\n ")])]),S3("top-start","\n top: calc(-0.707 * var(--arrow-height));\n left: var(--arrow-offset);\n "),S3("top","\n top: calc(-0.707 * var(--arrow-height));\n transform: translateX(calc(-0.707 * var(--arrow-height))) rotate(45deg);\n left: 50%;\n "),S3("top-end","\n top: calc(-0.707 * var(--arrow-height));\n right: var(--arrow-offset);\n "),S3("bottom-start","\n bottom: calc(-0.707 * var(--arrow-height));\n left: var(--arrow-offset);\n "),S3("bottom","\n bottom: calc(-0.707 * var(--arrow-height));\n transform: translateX(calc(-0.707 * var(--arrow-height))) rotate(45deg);\n left: 50%;\n "),S3("bottom-end","\n bottom: calc(-0.707 * var(--arrow-height));\n right: var(--arrow-offset);\n "),S3("left-start","\n left: calc(-0.707 * var(--arrow-height));\n top: var(--arrow-offset-vertical);\n "),S3("left","\n left: calc(-0.707 * var(--arrow-height));\n transform: translateY(calc(-0.707 * var(--arrow-height))) rotate(45deg);\n top: 50%;\n "),S3("left-end","\n left: calc(-0.707 * var(--arrow-height));\n bottom: var(--arrow-offset-vertical);\n "),S3("right-start","\n right: calc(-0.707 * var(--arrow-height));\n top: var(--arrow-offset-vertical);\n "),S3("right","\n right: calc(-0.707 * var(--arrow-height));\n transform: translateY(calc(-0.707 * var(--arrow-height))) rotate(45deg);\n top: 50%;\n "),S3("right-end","\n right: calc(-0.707 * var(--arrow-height));\n bottom: var(--arrow-offset-vertical);\n ")]);function S3(t,e){const n=t.split("-")[0],r=["top","bottom"].includes(n)?"height: var(--space-arrow);":"width: var(--space-arrow);";return EQ(`[v-placement="${t}"] >`,[AQ("popover",`\n margin-${w3[n]}: var(--space);\n `,[TQ("show-arrow",`\n margin-${w3[n]}: var(--space-arrow);\n `),TQ("overlap","\n margin: 0;\n "),LQ("popover-arrow-wrapper",`\n right: 0;\n left: 0;\n top: 0;\n bottom: 0;\n ${n}: 100%;\n ${w3[n]}: auto;\n ${r}\n `,[AQ("popover-arrow",e)])])])}const k3=Object.assign(Object.assign({},LJ.props),{to:IJ.propTo,show:Boolean,trigger:String,showArrow:Boolean,delay:Number,duration:Number,raw:Boolean,arrowStyle:[String,Object],displayDirective:String,x:Number,y:Number,filp:Boolean,overlap:Boolean,placement:String,width:[Number,String],animated:Boolean,onClickoutside:Function,minWidth:Number,maxWidth:Number}),E3=({arrowStyle:t,clsPrefix:e})=>Ei("div",{key:"__popover-arrow__",class:`${e}-popover-arrow-wrapper`},Ei("div",{class:`${e}-popover-arrow`,style:t}));var M3=Ke({name:"PopoverBody",inheritAttrs:!1,props:k3,setup(t,{slots:e,attrs:n}){const{namespaceRef:r,mergedClsPrefixRef:i}=FJ(t),o=LJ("Popover","Popover",C3,x3,t,i),a=ge(null),s=je("NPopover"),l=ge(null),u=ge(t.show),c=Ee((()=>{const{trigger:e,onClickoutside:n}=t,r=[],{positionManuallyRef:{value:i}}=s;return i||("click"!==e||n||r.push([g1,v]),"hover"===e&&r.push([f1,g])),n&&r.push([g1,v]),"show"===t.displayDirective&&r.push([ho,t.show]),r})),d=Ee((()=>[{width:"trigger"===t.width?"":kJ(t.width),maxWidth:kJ(t.maxWidth),minWidth:kJ(t.minWidth)},h.value])),h=Ee((()=>{const{common:{cubicBezierEaseInOut:t,cubicBezierEaseIn:e,cubicBezierEaseOut:n},self:{space:r,spaceArrow:i,padding:a,fontSize:s,textColor:l,dividerColor:u,color:c,boxShadow:d,borderRadius:h,arrowHeight:f,arrowOffset:p,arrowOffsetVertical:g}}=o.value;return{"--box-shadow":d,"--bezier":t,"--bezier-ease-in":e,"--bezier-ease-out":n,"--font-size":s,"--text-color":l,"--color":c,"--divider-color":u,"--border-radius":h,"--arrow-height":f,"--arrow-offset":p,"--arrow-offset-vertical":g,"--padding":a,"--space":r,"--space-arrow":i}}));function f(e){"hover"===t.trigger&&s.handleMouseEnter(e)}function p(e){"hover"===t.trigger&&s.handleMouseLeave(e)}function g(e){"hover"!==t.trigger||m().contains(e.target)||s.handleMouseMoveOutside(e)}function v(e){("click"===t.trigger&&!m().contains(e.target)||t.onClickoutside)&&s.handleClickOutside(e)}function m(){return s.getTriggerElement()}return s.setBodyInstance({syncPosition:function(){var t;null===(t=a.value)||void 0===t||t.syncPosition()}}),cn((()=>{s.setBodyInstance(null)})),xi(Se(t,"show"),(e=>{t.animated||(u.value=!!e)})),ze(_J,l),ze(AJ,null),ze(EJ,null),{namespace:r,NPopover:s,followerRef:a,adjustedTo:IJ(t),followerEnabled:u,renderContentNode:function(){let r;const{internalRenderBodyRef:{value:o}}=s,{value:a}=i;if(o)r=o([`${a}-popover`,t.overlap&&`${a}-popover--overlap`],l,d.value,f,p);else{const{value:i}=s.extraClassRef;r=Ei("div",Tr({class:[`${a}-popover`,i.map((t=>`${a}-${t}`)),{[`${a}-popover--overlap`]:t.overlap,[`${a}-popover--show-arrow`]:t.showArrow,[`${a}-popover--show-header`]:!!e.header,[`${a}-popover--raw`]:t.raw}],ref:l,style:d.value,onMouseenter:f,onMouseleave:p},n),[e.header?Ei(ir,null,Ei("div",{class:`${a}-popover__header`},e.header()),Ei("div",{class:`${a}-popover__content`},e)):Ir(e,"default"),t.showArrow?E3({arrowStyle:t.arrowStyle,clsPrefix:a}):null])}return"show"===t.displayDirective||t.show?jn(r,c.value):null}}},render(){return Ei(I1,{show:this.show,enabled:this.followerEnabled,to:this.adjustedTo,x:this.x,y:this.y,placement:this.placement,containerClass:this.namespace,ref:"followerRef",overlap:this.overlap,width:"trigger"===this.width?"target":void 0,teleportDisabled:this.adjustedTo===IJ.tdkey},{default:()=>this.animated?Ei($i,{name:"popover-transition",appear:this.NPopover.isMountedRef.value,onEnter:()=>{this.followerEnabled=!0},onAfterLeave:()=>{this.followerEnabled=!1}},{default:this.renderContentNode}):this.renderContentNode()})}});const A3=Object.keys(k3),_3={focus:["onFocus","onBlur"],click:["onClick"],hover:["onMouseenter","onMouseleave"],manual:[]};const T3=kr("").type,P3={show:{type:Boolean,default:void 0},defaultShow:Boolean,showArrow:{type:Boolean,default:!0},trigger:{type:String,default:"hover"},delay:{type:Number,default:100},duration:{type:Number,default:100},raw:Boolean,placement:{type:String,default:"top"},x:Number,y:Number,disabled:Boolean,getDisabled:Function,displayDirective:{type:String,default:"if"},arrowStyle:[String,Object],filp:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},width:{type:[Number,String],default:void 0},overlap:Boolean,internalExtraClass:{type:Array,default:()=>[]},onClickoutside:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onShow:{type:[Function,Array],validator:()=>(mJ("popover","`on-show` is deprecated, please use `on-update:show` instead."),!0),default:void 0},onHide:{type:[Function,Array],validator:()=>(mJ("popover","`on-hide` is deprecated, please use `on-update:show` instead."),!0),default:void 0},arrow:{type:Boolean,default:void 0},minWidth:Number,maxWidth:Number};var I3=Ke({name:"Popover",inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},LJ.props),P3),{internalRenderBody:Function}),setup(t){const e=sJ(),n=Ee((()=>t.show)),r=ge(t.defaultShow),i=aJ(n,r),o=zQ((()=>!t.disabled&&i.value)),a=()=>{if(t.disabled)return!0;const{getDisabled:e}=t;return!!(null==e?void 0:e())},s=()=>!a()&&i.value,l=lJ(t,["arrow","showArrow"]),u=Ee((()=>!t.overlap&&l.value));let c=null,d=null;const h=ge(null),f=ge(null),p=zQ((()=>void 0!==t.x&&void 0!==t.y));function g(e){const{"onUpdate:show":n,onUpdateShow:i,onShow:o,onHide:a}=t;r.value=e,n&&pJ(n,e),i&&pJ(i,e),e&&o&&pJ(o,!0),e&&a&&pJ(a,!1)}function v(){const{value:t}=h;t&&(window.clearTimeout(t),h.value=null)}function m(){const{value:t}=f;t&&(window.clearTimeout(t),f.value=null)}function y(){const e=a();if("hover"===t.trigger&&!e){if(m(),null!==h.value)return;if(s())return;const e=()=>{g(!0),h.value=null},{delay:n}=t;0===n?e():h.value=window.setTimeout(e,n)}}function b(){const e=a();if("hover"===t.trigger&&!e){if(v(),null!==f.value)return;if(!s())return;const e=()=>{g(!1),f.value=null},{duration:n}=t;0===n?e():f.value=window.setTimeout(e,n)}}return ze("NPopover",{getTriggerElement:function(){return null==c?void 0:c.el},handleMouseEnter:y,handleMouseLeave:b,handleClickOutside:function(e){var n;s()&&("click"===t.trigger&&(v(),m(),g(!1)),null===(n=t.onClickoutside)||void 0===n||n.call(t,e))},handleMouseMoveOutside:function(){b()},setBodyInstance:function(t){d=t},positionManuallyRef:p,isMountedRef:e,extraClassRef:Se(t,"internalExtraClass"),internalRenderBodyRef:Se(t,"internalRenderBody")}),{positionManually:p,mergedShowConsideringDisabledProp:o,uncontrolledShow:r,mergedShowArrow:u,getMergedShow:s,setShow:function(t){r.value=t},handleClick:function(){if("click"===t.trigger&&!a()){v(),m();g(!s())}},handleMouseEnter:y,handleMouseLeave:b,handleFocus:function(){const e=a();if("focus"===t.trigger&&!e){if(s())return;g(!0)}},handleBlur:function(){const e=a();if("focus"===t.trigger&&!e){if(!s())return;g(!1)}},setTriggerVNode(t){c=t},syncPosition:function(){d&&d.syncPosition()}}},render(){return Ei(c1,null,{default:()=>{const{positionManually:t,$slots:e}=this;let n;var r,i,o;t||(n=e.activator?xJ(e,"activator"):xJ(e,"trigger"),n&&(n=Sr(n),n=n.type===T3?Ei("span",[n]):n,r=n,i=t?"manual":this.trigger,o={onClick:this.handleClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onFocus:this.handleFocus,onBlur:this.handleBlur},_3[i].forEach((t=>{r.props?r.props=Object.assign({},r.props):r.props={};const e=r.props[t],n=o[t];r.props[t]=e?(...t)=>{e(...t),n(...t)}:n}))),this.setTriggerVNode(n)),this.mergedShowConsideringDisabledProp;const a=this.getMergedShow();return[t?null:Ei(d1,null,{default:()=>n}),Ei(M3,hJ(this.$props,A3,Object.assign(Object.assign({},this.$attrs),{showArrow:this.mergedShowArrow,show:a})),e)]}})}}),D3={closeSizeSmall:"14px",closeSizeMedium:"14px",closeSizeLarge:"14px",padding:"0 7px",closeMargin:"0 0 0 3px",closeMarginRtl:"0 3px 0 0"};var O3={name:"Tag",common:K2,self:t=>{const{textColor2:e,primaryColorHover:n,primaryColorPressed:r,primaryColor:i,infoColor:o,successColor:a,warningColor:s,errorColor:l,baseColor:u,borderColor:c,opacityDisabled:d,tagColor:h,closeColor:f,closeColorHover:p,closeColorPressed:g,borderRadiusSmall:v,fontSizeTiny:m,fontSizeSmall:y,fontSizeMedium:b,heightTiny:x,heightSmall:w,heightMedium:C}=t;return Object.assign(Object.assign({},D3),{heightSmall:x,heightMedium:w,heightLarge:C,borderRadius:v,opacityDisabled:d,fontSizeSmall:m,fontSizeMedium:y,fontSizeLarge:b,textColorCheckable:e,textColorHoverCheckable:n,textColorPressedCheckable:r,textColorChecked:u,colorCheckable:"#0000",colorHoverCheckable:"#0000",colorPressedCheckable:"#0000",colorChecked:i,colorCheckedHover:n,colorCheckedPressed:r,border:`1px solid ${c}`,textColor:e,color:h,closeColor:f,closeColorHover:p,closeColorPressed:g,borderPrimary:`1px solid ${Eq(i,{alpha:.3})}`,textColorPrimary:i,colorPrimary:Eq(i,{alpha:.1}),closeColorPrimary:Eq(i,{alpha:.75}),closeColorHoverPrimary:Eq(i,{alpha:.6}),closeColorPressedPrimary:Eq(i,{alpha:.9}),borderInfo:`1px solid ${Eq(o,{alpha:.3})}`,textColorInfo:o,colorInfo:Eq(o,{alpha:.1}),closeColorInfo:Eq(o,{alpha:.75}),closeColorHoverInfo:Eq(o,{alpha:.6}),closeColorPressedInfo:Eq(o,{alpha:.9}),borderSuccess:`1px solid ${Eq(a,{alpha:.3})}`,textColorSuccess:a,colorSuccess:Eq(a,{alpha:.1}),closeColorSuccess:Eq(a,{alpha:.75}),closeColorHoverSuccess:Eq(a,{alpha:.6}),closeColorPressedSuccess:Eq(a,{alpha:.9}),borderWarning:`1px solid ${Eq(s,{alpha:.35})}`,textColorWarning:s,colorWarning:Eq(s,{alpha:.12}),closeColorWarning:Eq(s,{alpha:.75}),closeColorHoverWarning:Eq(s,{alpha:.6}),closeColorPressedWarning:Eq(s,{alpha:.9}),borderError:`1px solid ${Eq(l,{alpha:.23})}`,textColorError:l,colorError:Eq(l,{alpha:.08}),closeColorError:Eq(l,{alpha:.65}),closeColorHoverError:Eq(l,{alpha:.5}),closeColorPressedError:Eq(l,{alpha:.8})})}},R3={color:Object,type:{type:String,default:"default"},round:Boolean,size:{type:String,default:"medium"},closable:Boolean,disabled:{type:Boolean,default:void 0}},L3=AQ("tag","\n white-space: nowrap;\n position: relative;\n box-sizing: border-box;\n cursor: default;\n display: inline-flex;\n align-items: center;\n flex-wrap: nowrap;\n padding: var(--padding);\n border-radius: var(--border-radius);\n color: var(--text-color);\n background-color: var(--color);\n transition: \n border-color .3s var(--bezier),\n background-color .3s var(--bezier),\n color .3s var(--bezier),\n box-shadow .3s var(--bezier),\n opacity .3s var(--bezier);\n line-height: var(--height);\n height: var(--height);\n font-size: var(--font-size);\n",[_Q("border","\n pointer-events: none;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n border-radius: inherit;\n border: var(--border);\n transition: border-color .3s var(--bezier);\n "),_Q("close","\n font-size: var(--close-size);\n margin: var(--close-margin);\n transition: color .3s var(--bezier);\n cursor: pointer;\n "),TQ("round","\n padding: 0 calc(var(--height) / 2);\n border-radius: calc(var(--height) / 2);\n "),TQ("disabled",{cursor:"not-allowed !important",opacity:"var(--opacity-disabled)"}),TQ("checkable","\n cursor: pointer;\n box-shadow: none;\n color: var(--text-color-checkable);\n background-color: var(--color-checkable);\n ",[PQ("disabled",[EQ("&:hover",{backgroundColor:"var(--color-hover-checkable)"},[PQ("checked",{color:"var(--text-color-hover-checkable)"})]),EQ("&:active",{backgroundColor:"var(--color-pressed-checkable)"},[PQ("checked",{color:"var(--text-color-pressed-checkable)"})])]),TQ("checked",{color:"var(--text-color-checked)",backgroundColor:"var(--color-checked)"},[PQ("disabled",[EQ("&:hover",{backgroundColor:"var(--color-checked-hover)"}),EQ("&:active",{backgroundColor:"var(--color-checked-pressed)"})])])])]);function B3(t,e,n){if(!e)return;const r=iQ(),i=Ee((()=>{const{value:n}=e;if(!n)return;const r=n[t];return r||void 0})),o=()=>{yi((()=>{const{value:e}=n,o=`${e}${t}Rtl`;if(function(t,e){if(void 0===t)return!1;if(e){const{context:{ids:n}}=e;return n.has(t)}return null!==gQ(t)}(o))return;const{value:a}=i;a&&a.style.mount({id:o,head:!0,props:{bPrefix:e?`.${e}-`:void 0},ssr:r})}))};return r?o():an(o),i}var F3=Ke({name:"Tag",props:Object.assign(Object.assign(Object.assign({},LJ.props),R3),{bordered:{type:Boolean,default:void 0},checked:Boolean,checkable:Boolean,onClose:[Array,Function],onMouseenter:Function,onMouseleave:Function,"onUpdate:checked":Function,onUpdateChecked:Function,internalStopClickPropagation:Boolean,onCheckedChange:{type:Function,validator:()=>!0,default:void 0}}),setup(t){const e=ge(null),{mergedBorderedRef:n,mergedClsPrefixRef:r,NConfigProvider:i}=FJ(t),o=LJ("Tag","Tag",L3,O3,t,r);const a={setTextContent(t){const{value:n}=e;n&&(n.textContent=t)}},s=B3("Tag",null==i?void 0:i.mergedRtlRef,r);return Object.assign(Object.assign({},a),{rtlEnabled:s,mergedClsPrefix:r,contentRef:e,mergedBordered:n,handleClick:function(e){if(!t.disabled&&t.checkable){const{checked:e,onCheckedChange:n,onUpdateChecked:r,"onUpdate:checked":i}=t;r&&r(!e),i&&i(!e),n&&n(!e)}},handleCloseClick:function(e){if(t.internalStopClickPropagation&&e.stopPropagation(),!t.disabled){const{onClose:n}=t;n&&pJ(n,e)}},cssVars:Ee((()=>{const{type:e,size:n,color:{color:r,textColor:i}={}}=t,{common:{cubicBezierEaseInOut:a},self:{padding:s,closeMargin:l,closeMarginRtl:u,borderRadius:c,opacityDisabled:d,textColorCheckable:h,textColorHoverCheckable:f,textColorPressedCheckable:p,textColorChecked:g,colorCheckable:v,colorHoverCheckable:m,colorPressedCheckable:y,colorChecked:b,colorCheckedHover:x,colorCheckedPressed:w,[CQ("closeSize",n)]:C,[CQ("fontSize",n)]:S,[CQ("height",n)]:k,[CQ("color",e)]:E,[CQ("textColor",e)]:M,[CQ("border",e)]:A,[CQ("closeColor",e)]:_,[CQ("closeColorHover",e)]:T,[CQ("closeColorPressed",e)]:P}}=o.value;return{"--bezier":a,"--border-radius":c,"--border":A,"--close-color":_,"--close-color-hover":T,"--close-color-pressed":P,"--close-margin":l,"--close-margin-rtl":u,"--close-size":C,"--color":r||E,"--color-checkable":v,"--color-checked":b,"--color-checked-hover":x,"--color-checked-pressed":w,"--color-hover-checkable":m,"--color-pressed-checkable":y,"--font-size":S,"--height":k,"--opacity-disabled":d,"--padding":s,"--text-color":i||M,"--text-color-checkable":h,"--text-color-checked":g,"--text-color-hover-checkable":f,"--text-color-pressed-checkable":p}}))})},render(){const{mergedClsPrefix:t,rtlEnabled:e,color:{borderColor:n}={}}=this;return Ei("div",{class:[`${t}-tag`,{[`${t}-tag--rtl`]:e,[`${t}-tag--disabled`]:this.disabled,[`${t}-tag--checkable`]:this.checkable,[`${t}-tag--checked`]:this.checkable&&this.checked,[`${t}-tag--round`]:this.round}],style:this.cssVars,onClick:this.handleClick,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},Ei("span",{class:`${t}-tag__content`,ref:"contentRef"},this.$slots),!this.checkable&&this.closable?Ei(I0,{clsPrefix:t,class:`${t}-tag__close`,disabled:this.disabled,onClick:this.handleCloseClick}):null,!this.checkable&&this.mergedBordered?Ei("div",{class:`${t}-tag__border`,style:{borderColor:n}}):null)}}),N3=AQ("base-clear","\n flex-shrink: 0;\n height: 1em;\n width: 1em;\n position: relative;\n",[EQ(">",[_Q("clear","\n font-size: var(--clear-size);\n cursor: pointer;\n color: var(--clear-color);\n transition: color .3s var(--bezier);\n ",[EQ("&:hover","\n color: var(--clear-color-hover)!important;\n "),EQ("&:active","\n color: var(--clear-color-pressed)!important;\n ")]),_Q("placeholder","\n display: flex;\n "),_Q("clear, placeholder","\n position: absolute;\n left: 50%;\n top: 50%;\n transform: translateX(-50%) translateY(-50%);\n ",[O0({originalTransform:"translateX(-50%) translateY(-50%)",left:"50%",top:"50%"})])])]),z3=Ke({name:"BaseClear",props:{clsPrefix:{type:String,required:!0},show:{type:Boolean,default:!1},onClear:Function},setup(t){e0("BaseClear",N3,Se(t,"clsPrefix"));const{NConfigProvider:e}=FJ();return{NConfigProvider:e,handleMouseDown(t){t.preventDefault()}}},render(){const{clsPrefix:t}=this;return Ei("div",{class:`${t}-base-clear`},Ei(M0,null,{default:()=>this.show?Ei(T0,{clsPrefix:t,key:"dismiss",class:`${t}-base-clear__clear`,onClick:this.onClear,onMousedown:this.handleMouseDown,"data-clear":!0},{default:()=>Ei(S0,null)}):Ei("div",{key:"icon",class:`${t}-base-clear__placeholder`},this.$slots)}))}}),j3=Ke({name:"InternalSelectionSuffix",props:{clsPrefix:{type:String,required:!0},showArrow:{type:Boolean,default:void 0},showClear:{type:Boolean,default:void 0},loading:Boolean,onClear:Function},setup:t=>()=>{const{clsPrefix:e}=t;return Ei(L0,{clsPrefix:e,class:`${e}-base-suffix`,strokeWidth:24,scale:.85,show:t.loading},{default:()=>t.showArrow?Ei(z3,{clsPrefix:e,show:t.showClear,onClear:t.onClear},{default:()=>Ei(T0,{clsPrefix:e,class:`${e}-base-suffix__arrow`},{default:()=>Ei(C0,null)})}):null})}}),G3={heightTiny:"22px",heightSmall:"28px",heightMedium:"34px",heightLarge:"40px",fontSizeTiny:"12px",fontSizeSmall:"14px",fontSizeMedium:"14px",fontSizeLarge:"15px",paddingSingle:"0 26px 0 14px",clearSize:"16px"};var U3={name:"InternalSelection",common:K2,peers:{Popover:x3},self:t=>{const{borderRadius:e,textColor2:n,textColorDisabled:r,inputColor:i,inputColorDisabled:o,primaryColor:a,primaryColorHover:s,warningColor:l,warningColorHover:u,errorColor:c,errorColorHover:d,borderColor:h,iconColor:f,iconColorDisabled:p,clearColor:g,clearColorHover:v,clearColorPressed:m,placeholderColor:y,placeholderColorDisabled:b}=t;return Object.assign(Object.assign({},G3),{borderRadius:e,textColor:n,textColorDisabled:r,placeholderColor:y,placeholderColorDisabled:b,color:i,colorDisabled:o,colorActive:i,border:`1px solid ${h}`,borderHover:`1px solid ${s}`,borderActive:`1px solid ${a}`,borderFocus:`1px solid ${s}`,boxShadowHover:null,boxShadowActive:`0 0 0 2px ${Eq(a,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${Eq(a,{alpha:.2})}`,caretColor:a,arrowColor:f,arrowColorDisabled:p,loadingColor:a,borderWarning:`1px solid ${l}`,borderHoverWarning:`1px solid ${u}`,borderActiveWarning:`1px solid ${l}`,borderFocusWarning:`1px solid ${u}`,boxShadowHoverWarning:null,boxShadowActiveWarning:`0 0 0 2px ${Eq(l,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${Eq(l,{alpha:.2})}`,colorActiveWarning:i,caretColorWarning:l,borderError:`1px solid ${c}`,borderHoverError:`1px solid ${d}`,borderActiveError:`1px solid ${c}`,borderFocusError:`1px solid ${d}`,boxShadowHoverError:null,boxShadowActiveError:`0 0 0 2px ${Eq(c,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${Eq(c,{alpha:.2})}`,colorActiveError:i,caretColorError:c,clearColor:g,clearColorHover:v,clearColorPressed:m})}},$3=EQ([AQ("base-selection","\n position: relative;\n z-index: auto;\n box-shadow: none;\n width: 100%;\n max-width: 100%;\n display: inline-block;\n vertical-align: bottom;\n border-radius: var(--border-radius);\n min-height: var(--height);\n line-height: var(--height);\n font-size: var(--font-size);\n ",[AQ("base-loading","\n color: var(--loading-color);\n "),AQ("base-selection-label","\n height: var(--height);\n line-height: var(--height);\n "),AQ("base-selection-tags",{minHeight:"var(--height)"}),_Q("border, state-border","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n pointer-events: none;\n border: var(--border);\n border-radius: inherit;\n transition:\n box-shadow .3s var(--bezier),\n border-color .3s var(--bezier);\n "),_Q("state-border","\n z-index: 1;\n border-color: #0000;\n "),AQ("base-suffix","\n cursor: pointer;\n position: absolute;\n top: 50%;\n transform: translateY(-50%);\n right: 10px;\n ",[_Q("arrow","\n color: var(--arrow-color);\n transition: color .3s var(--bezier);\n ")]),AQ("base-render-dom","\n white-space: nowrap;\n overflow: hidden;\n height: var(--height);\n line-height: var(--height);\n pointer-events: none;\n position: absolute;\n top: 0;\n right: 0;\n bottom: 0;\n left: 0;\n padding: var(--padding-single);\n transition: color .3s var(--bezier);\n "),AQ("base-selection-placeholder","\n color: var(--placeholder-color);\n "),AQ("base-selection-tags","\n cursor: pointer;\n outline: none;\n box-sizing: border-box;\n position: relative;\n z-index: auto;\n display: flex;\n padding: 3px 26px 0 14px;\n flex-wrap: wrap;\n align-items: center;\n width: 100%;\n vertical-align: bottom;\n background-color: var(--color);\n border-radius: inherit;\n transition:\n color .3s var(--bezier),\n box-shadow .3s var(--bezier),\n background-color .3s var(--bezier);\n "),AQ("base-selection-label","\n display: inline-block;\n width: 100%;\n vertical-align: bottom;\n cursor: pointer;\n outline: none;\n z-index: auto;\n box-sizing: border-box;\n position: relative;\n transition:\n color .3s var(--bezier),\n box-shadow .3s var(--bezier),\n background-color .3s var(--bezier);\n border-radius: inherit;\n background-color: var(--color);\n ",[_Q("input","\n line-height: inherit;\n outline: none;\n cursor: pointer;\n box-sizing: border-box;\n text-overflow: ellipsis;\n overflow: hidden;\n border:none;\n width: 100%;\n white-space: nowrap;\n padding: var(--padding-single);\n background-color: #0000;\n color: var(--text-color);\n transition: color .3s var(--bezier);\n caret-color: var(--caret-color);\n "),_Q("render-label","\n color: var(--text-color);\n ")]),PQ("disabled",[EQ("&:hover",[_Q("state-border","\n box-shadow: var(--box-shadow-hover);\n border: var(--border-hover);\n ")]),TQ("focus",[_Q("state-border","\n box-shadow: var(--box-shadow-focus);\n border: var(--border-focus);\n ")]),TQ("active",[_Q("state-border","\n box-shadow: var(--box-shadow-active);\n border: var(--border-active);\n "),AQ("base-selection-label",{backgroundColor:"var(--color-active)"}),AQ("base-selection-tags",{backgroundColor:"var(--color-active)"})])]),TQ("disabled",{cursor:"not-allowed"},[_Q("arrow","\n color: var(--arrow-color-disabled);\n "),AQ("base-selection-label","\n cursor: not-allowed;\n background-color: var(--color-disabled);\n ",[_Q("input","\n cursor: not-allowed;\n color: var(--text-color-disabled);\n "),_Q("render-label","\n color: var(--text-color-disabled);\n ")]),AQ("base-selection-tags","\n cursor: not-allowed;\n background-color: var(--color-disabled);\n "),AQ("base-selection-placeholder","\n cursor: not-allowed;\n color: var(--placeholder-color-disabled);\n ")]),AQ("base-selection-input-tag","\n height: calc(var(--height) - 6px);\n line-height: calc(var(--height) - 6px);\n outline: none;\n display: none;\n position: relative;\n margin-bottom: 3px;\n max-width: 100%;\n vertical-align: bottom;\n ",[_Q("input","\n min-width: 1px;\n padding: 0;\n background-color: #0000;\n outline: none;\n border: none;\n max-width: 100%;\n overflow: hidden;\n width: 1em;\n line-height: inherit;\n cursor: pointer;\n color: var(--text-color);\n caret-color: var(--caret-color);\n "),_Q("mirror","\n position: absolute;\n left: 0;\n top: 0;\n white-space: pre;\n visibility: hidden;\n user-select: none;\n opacity: 0;\n ")])]),AQ("base-selection-popover","\n margin-bottom: -3px;\n display: flex;\n flex-wrap: wrap;\n "),AQ("base-selection-tag-wrapper","\n max-width: 100%;\n display: inline-flex;\n padding: 0 7px 3px 0;\n ",[EQ("&:last-child",{paddingRight:0}),AQ("tag","\n font-size: 14px;\n max-width: 100%;\n ",[_Q("content","\n text-overflow: ellipsis;\n overflow: hidden;\n ")])]),["warning","error"].map((t=>IQ(t,AQ("base-selection",[_Q("state-border",{border:`var(--border-${t})`}),PQ("disabled",[EQ("&:hover",[_Q("state-border",`\n box-shadow: var(--box-shadow-hover-${t});\n border: var(--border-hover-${t});\n `)]),TQ("active",[_Q("state-border",`\n box-shadow: var(--box-shadow-active-${t});\n border: var(--border-active-${t});\n `),AQ("base-selection-label",{backgroundColor:`var(--color-active-${t})`}),AQ("base-selection-tags",{backgroundColor:`var(--box-shadow-active-${t})`})]),TQ("focus",[_Q("state-border",`\n box-shadow: var(--box-shadow-focus-${t});\n border: var(--border-focus-${t});\n `)])])]))))]),V3=Ke({name:"InternalSelection",props:Object.assign(Object.assign({},LJ.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:null},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},focused:Boolean,renderTag:Function,onKeyup:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],onClear:Function,onPatternInput:Function,renderLabel:Function}),setup(t){const e=ge(null),n=ge(null),r=ge(null),i=ge(null),o=ge(null),a=ge(null),s=ge(null),l=ge(null),u=ge(null),c=ge(null),d=ge(!1),h=ge(!1),f=ge(!1),p=LJ("InternalSelection","InternalSelection",$3,U3,t,Se(t,"clsPrefix")),g=Ee((()=>t.clearable&&!t.disabled&&(f.value||t.active))),v=Ee((()=>t.selectedOption?t.renderLabel?t.renderLabel(t.selectedOption,!0):vJ(t.selectedOption.label,t.selectedOption,!0):t.placeholder)),m=Ee((()=>{const e=t.selectedOption;if(e)return e.label})),y=Ee((()=>t.multiple?!(!Array.isArray(t.selectedOptions)||!t.selectedOptions.length):null!==t.selectedOption));function b(){var r;const{value:i}=e;if(i){const{value:e}=n;e&&(e.style.width=`${i.offsetWidth}px`,"responsive"!==t.maxTagCount&&(null===(r=u.value)||void 0===r||r.sync()))}}function x(e){const{onPatternInput:n}=t;n&&n(e)}function w(e){!function(e){const{onDeleteOption:n}=t;n&&n(e)}(e)}xi(Se(t,"active"),(t=>{t||function(){const{value:t}=c;t&&(t.style.display="none")}()})),xi(Se(t,"pattern"),(()=>{t.multiple&&ci(b)}));const C=ge(!1);let S=null;let k=null;function E(){null!==k&&window.clearTimeout(k)}return sn((()=>{yi((()=>{const e=a.value;e&&(e.tabIndex=t.disabled||h.value?-1:0)}))})),{mergedTheme:p,mergedClearable:g,patternInputFocused:h,filterablePlaceholder:v,label:m,selected:y,showTagsPanel:d,isCompositing:C,counterRef:s,counterWrapperRef:l,patternInputMirrorRef:e,patternInputRef:n,selfRef:r,multipleElRef:i,singleElRef:o,patternInputWrapperRef:a,overflowRef:u,inputTagElRef:c,handleMouseDown:function(e){t.active&&t.filterable&&e.target!==n.value&&e.preventDefault()},handleFocusin:function(e){var n;e.relatedTarget&&(null===(n=r.value)||void 0===n?void 0:n.contains(e.relatedTarget))||function(e){const{onFocus:n}=t;n&&n(e)}(e)},handleClear:function(e){!function(e){const{onClear:n}=t;n&&n(e)}(e)},handleMouseEnter:function(){f.value=!0},handleMouseLeave:function(){f.value=!1},handleDeleteOption:w,handlePatternKeyDown:function(e){if("Backspace"===e.code&&!t.pattern.length){const{selectedOptions:e}=t;(null==e?void 0:e.length)&&w(e[e.length-1])}},handlePatternInputInput:function(t){const{value:n}=e;if(n){const e=t.target.value;n.textContent=e,b()}C.value?S=t:x(t)},handlePatternInputBlur:function(t){h.value=!1},handlePatternInputFocus:function(){h.value=!0},handleMouseEnterCounter:function(){t.disabled||t.active||(E(),k=window.setTimeout((()=>{d.value=!0}),100))},handleMouseLeaveCounter:function(){E()},handleFocusout:function(e){var n;(null===(n=r.value)||void 0===n?void 0:n.contains(e.relatedTarget))||function(e){const{onBlur:n}=t;n&&n(e)}(e)},handleCompositionEnd:function(){C.value=!1,x(S),S=null},handleCompositionStart:function(){C.value=!0},onPopoverUpdateShow:function(t){t||(E(),d.value=!1)},focus:function(){if(t.filterable){h.value=!1;const{value:t}=a;t&&t.focus()}else if(t.multiple){const{value:t}=i;null==t||t.focus()}else{const{value:t}=o;null==t||t.focus()}},focusInput:function(){const{value:t}=n;t&&(!function(){const{value:t}=c;t&&(t.style.display="inline-block")}(),t.focus())},blurInput:function(){const{value:t}=n;t&&t.blur()},updateCounter:function(t){const{value:e}=s;e&&e.setTextContent(`+${t}`)},getCounter:function(){const{value:t}=l;return t},getTail:function(){return n.value},renderLabel:t.renderLabel,cssVars:Ee((()=>{const{size:e}=t,{common:{cubicBezierEaseInOut:n},self:{borderRadius:r,color:i,placeholderColor:o,textColor:a,paddingSingle:s,caretColor:l,colorDisabled:u,textColorDisabled:c,placeholderColorDisabled:d,colorActive:h,boxShadowFocus:f,boxShadowActive:g,boxShadowHover:v,border:m,borderFocus:y,borderHover:b,borderActive:x,arrowColor:w,arrowColorDisabled:C,loadingColor:S,colorActiveWarning:k,boxShadowFocusWarning:E,boxShadowActiveWarning:M,boxShadowHoverWarning:A,borderWarning:_,borderFocusWarning:T,borderHoverWarning:P,borderActiveWarning:I,colorActiveError:D,boxShadowFocusError:O,boxShadowActiveError:R,boxShadowHoverError:L,borderError:B,borderFocusError:F,borderHoverError:N,borderActiveError:z,clearColor:j,clearColorHover:G,clearColorPressed:U,clearSize:$,[CQ("height",e)]:V,[CQ("fontSize",e)]:W}}=p.value;return{"--bezier":n,"--border":m,"--border-active":x,"--border-focus":y,"--border-hover":b,"--border-radius":r,"--box-shadow-active":g,"--box-shadow-focus":f,"--box-shadow-hover":v,"--caret-color":l,"--color":i,"--color-active":h,"--color-disabled":u,"--font-size":W,"--height":V,"--padding-single":s,"--placeholder-color":o,"--placeholder-color-disabled":d,"--text-color":a,"--text-color-disabled":c,"--arrow-color":w,"--arrow-color-disabled":C,"--loading-color":S,"--color-active-warning":k,"--box-shadow-focus-warning":E,"--box-shadow-active-warning":M,"--box-shadow-hover-warning":A,"--border-warning":_,"--border-focus-warning":T,"--border-hover-warning":P,"--border-active-warning":I,"--color-active-error":D,"--box-shadow-focus-error":O,"--box-shadow-active-error":R,"--box-shadow-hover-error":L,"--border-error":B,"--border-focus-error":F,"--border-hover-error":N,"--border-active-error":z,"--clear-size":$,"--clear-color":j,"--clear-color-hover":G,"--clear-color-pressed":U}}))}},render(){const{multiple:t,size:e,disabled:n,filterable:r,maxTagCount:i,bordered:o,clsPrefix:a,renderTag:s,renderLabel:l}=this,u="responsive"===i,c="number"==typeof i,d=u||c,h=Ei(j3,{clsPrefix:a,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear});let f;if(t){const t=t=>Ei("div",{class:`${a}-base-selection-tag-wrapper`,key:t.value},s?s({option:t,handleClose:()=>this.handleDeleteOption(t)}):Ei(F3,{size:e,closable:!t.disabled,disabled:n,internalStopClickPropagation:!0,onClose:()=>this.handleDeleteOption(t)},{default:()=>l?l(t,!0):vJ(t.label,t,!0)})),o=(c?this.selectedOptions.slice(0,i):this.selectedOptions).map(t),p=r?Ei("div",{class:`${a}-base-selection-input-tag`,ref:"inputTagElRef",key:"__input-tag__"},Ei("input",{ref:"patternInputRef",tabindex:-1,disabled:n,value:this.pattern,autofocus:this.autofocus,class:`${a}-base-selection-input-tag__input`,onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd}),Ei("span",{ref:"patternInputMirrorRef",class:`${a}-base-selection-input-tag__mirror`},this.pattern?this.pattern:"")):null,g=u?()=>Ei("div",{class:`${a}-base-selection-tag-wrapper`,ref:"counterWrapperRef"},Ei(F3,{ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:n})):void 0;let v;if(c){const t=this.selectedOptions.length-i;t>0&&(v=Ei("div",{class:`${a}-base-selection-tag-wrapper`,key:"__counter__"},Ei(F3,{ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:n},{default:()=>`+${t}`})))}const m=u?r?Ei(o2,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:()=>o,counter:g,tail:()=>p}):Ei(o2,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:()=>o,counter:g}):c?o.concat(v):o,y=d?()=>Ei("div",{class:`${a}-base-selection-popover`},u?o:this.selectedOptions.map(t)):void 0,b=d?{show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover}:null,x=this.selected||this.pattern||this.isCompositing?null:Ei("div",{class:`${a}-base-selection-placeholder ${a}-base-render-dom`},this.placeholder);if(r){const t=Ei("div",{ref:"patternInputWrapperRef",class:`${a}-base-selection-tags`},m,u?null:p,h);f=Ei(ir,null,d?Ei(I3,Object.assign({},b),{trigger:()=>t,default:y}):t,x)}else{const t=Ei("div",{ref:"multipleElRef",class:`${a}-base-selection-tags`,tabindex:n?void 0:0},m,h);f=Ei(ir,null,d?Ei(I3,Object.assign({},b),{trigger:()=>t,default:y}):t,x)}}else if(r){const t=!this.pattern&&(this.active||!this.selected)&&!this.isCompositing;f=Ei("div",{ref:"patternInputWrapperRef",class:`${a}-base-selection-label`},Ei("input",{ref:"patternInputRef",class:`${a}-base-selection-label__input`,value:this.patternInputFocused&&this.active?this.pattern:"",placeholder:"",readonly:n,disabled:n,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd}),t||this.patternInputFocused&&this.active?null:Ei("div",{class:`${a}-base-selection-label__render-label ${a}-base-render-dom`,key:"input"},l?l(this.selectedOption,!0):vJ(this.label,this.selectedOption,!0)),t?Ei("div",{class:`${a}-base-selection-placeholder ${a}-base-render-dom`,key:"placeholder"},this.filterablePlaceholder):null,h)}else f=Ei("div",{ref:"singleElRef",class:`${a}-base-selection-label`,tabindex:this.disabled?void 0:0},void 0!==this.label?Ei("div",{class:`${a}-base-selection-label__input`,title:bJ(this.label),key:"input"},l?l(this.selectedOption,!0):vJ(this.label,this.selectedOption,!0)):Ei("div",{class:`${a}-base-selection-placeholder ${a}-base-render-dom`,key:"placeholder"},this.placeholder),h);return Ei("div",{ref:"selfRef",class:[`${a}-base-selection`,{[`${a}-base-selection--active`]:this.active,[`${a}-base-selection--selected`]:this.selected||this.active&&this.pattern,[`${a}-base-selection--disabled`]:this.disabled,[`${a}-base-selection--multiple`]:this.multiple,[`${a}-base-selection--focus`]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeyup:this.onKeyup,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},f,o?Ei("div",{class:`${a}-base-selection__border`}):null,o?Ei("div",{class:`${a}-base-selection__state-border`}):null)}});const{cubicBezierEaseInOut:W3}=BQ;const{cubicBezierEaseInOut:H3,cubicBezierEaseOut:Y3,cubicBezierEaseIn:X3}=BQ;var q3={paddingTiny:"0 8px",paddingSmall:"0 10px",paddingMedium:"0 12px",paddingLarge:"0 14px",clearSize:"16px"};var K3={name:"Input",common:K2,self:t=>{const{textColor2:e,textColor3:n,textColorDisabled:r,primaryColor:i,primaryColorHover:o,inputColor:a,inputColorDisabled:s,borderColor:l,warningColor:u,warningColorHover:c,errorColor:d,errorColorHover:h,borderRadius:f,lineHeight:p,fontSizeTiny:g,fontSizeSmall:v,fontSizeMedium:m,fontSizeLarge:y,heightTiny:b,heightSmall:x,heightMedium:w,heightLarge:C,actionColor:S,clearColor:k,clearColorHover:E,clearColorPressed:M,placeholderColor:A,placeholderColorDisabled:_,iconColor:T,iconColorDisabled:P,iconColorHover:I,iconColorPressed:D}=t;return Object.assign(Object.assign({},q3),{countTextColor:n,heightTiny:b,heightSmall:x,heightMedium:w,heightLarge:C,fontSizeTiny:g,fontSizeSmall:v,fontSizeMedium:m,fontSizeLarge:y,lineHeight:p,lineHeightTextarea:p,borderRadius:f,iconSize:"16px",groupLabelColor:S,groupLabelTextColor:e,textColor:e,textColorDisabled:r,textDecorationColor:e,caretColor:i,placeholderColor:A,placeholderColorDisabled:_,color:a,colorDisabled:s,colorFocus:a,groupLabelBorder:`1px solid ${l}`,border:`1px solid ${l}`,borderHover:`1px solid ${o}`,borderDisabled:`1px solid ${l}`,borderFocus:`1px solid ${o}`,boxShadowFocus:`0 0 0 2px ${Eq(i,{alpha:.2})}`,loadingColor:i,loadingColorWarning:u,borderWarning:`1px solid ${u}`,borderHoverWarning:`1px solid ${c}`,colorFocusWarning:a,borderFocusWarning:`1px solid ${c}`,boxShadowFocusWarning:`0 0 0 2px ${Eq(u,{alpha:.2})}`,caretColorWarning:u,loadingColorError:d,borderError:`1px solid ${d}`,borderHoverError:`1px solid ${h}`,colorFocusError:a,borderFocusError:`1px solid ${h}`,boxShadowFocusError:`0 0 0 2px ${Eq(d,{alpha:.2})}`,caretColorError:d,clearColor:k,clearColorHover:E,clearColorPressed:M,iconColor:T,iconColorDisabled:P,iconColorHover:I,iconColorPressed:D,suffixTextColor:e})}};const Z3=Symbol("input");function Q3(t){return["",void 0,null].includes(t)}var J3=Ke({name:"InputWordCount",setup(){const{wordCountRef:t,maxlengthRef:e,mergedClsPrefixRef:n}=je(Z3);return()=>{const{value:r}=e;return Ei("span",{class:`${n.value}-input-word-count`},void 0===r?t.value:`${t.value} / ${r}`)}}}),t5=EQ([AQ("input","\n max-width: 100%;\n cursor: text;\n line-height: 1.5;\n z-index: auto;\n outline: none;\n box-sizing: border-box;\n position: relative;\n display: inline-flex;\n border-radius: var(--border-radius);\n background-color: var(--color);\n transition: background-color .3s var(--bezier);\n font-size: var(--font-size);\n --padding-vertical: calc((var(--height) - 1.5 * var(--font-size)) / 2);\n ",[_Q("input, textarea","\n overflow: hidden;\n flex-grow: 1;\n position: relative;\n "),_Q("input-el, textarea-el, input-mirror, textarea-mirror, separator, placeholder","\n box-sizing: border-box;\n font-size: inherit;\n line-height: 1.5;\n font-family: inherit;\n border: none;\n outline: none;\n background-color: #0000;\n text-align: inherit;\n transition:\n caret-color .3s var(--bezier),\n color .3s var(--bezier),\n text-decoration-color .3s var(--bezier);\n "),_Q("input-el, textarea-el","\n -webkit-appearance: none;\n width: 100%;\n min-width: 0;\n text-decoration-color: var(--text-decoration-color);\n color: var(--text-color);\n caret-color: var(--caret-color);\n ",[EQ("&::placeholder",{color:"#0000"})]),TQ("round",[PQ("textarea",{borderRadius:"calc(var(--height) / 2)"})]),_Q("placeholder","\n pointer-events: none;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n overflow: hidden;\n color: var(--placeholder-color);\n ",[EQ("span",{width:"100%",display:"inline-block"})]),PQ("autosize",{width:"100%"}),TQ("autosize",[_Q("textarea-el, input-el","\n position: absolute;\n top: 0;\n left: 0;\n height: 100%;\n ")]),AQ("input-wrapper","\n overflow: hidden;\n display: inline-flex;\n flex-grow: 1;\n position: relative;\n padding-left: var(--padding-left);\n padding-right: var(--padding-right);\n "),_Q("input-mirror","\n padding: 0;\n height: var(--height);\n overflow: hidden;\n visibility: hidden;\n position: static;\n white-space: nowrap;\n pointer-events: none;\n "),_Q("input-el","\n padding: 0;\n height: var(--height);\n line-height: var(--height);\n ",[EQ("+",[_Q("placeholder","\n display: flex;\n align-items: center; \n ")])]),PQ("textarea",[_Q("placeholder",{whiteSpace:"nowrap"})]),_Q("eye","\n transition: color .3s var(--bezier);\n "),TQ("textarea",{width:"100%"},[AQ("input-word-count","\n position: absolute;\n right: var(--padding-right);\n bottom: var(--padding-vertical);\n "),TQ("resizable",[AQ("input-wrapper","\n resize: vertical;\n overflow: auto;\n min-height: var(--height);\n ")]),_Q("textarea-el, textarea-mirror, placeholder","\n width: 100%;\n height: 100%;\n padding-left: 0;\n padding-right: 0;\n padding-top: var(--padding-vertical);\n padding-bottom: var(--padding-vertical);\n display: inline-block;\n vertical-align: bottom;\n box-sizing: border-box;\n line-height: var(--line-height-textarea);\n margin: 0;\n resize: none;\n "),_Q("textarea-mirror","\n pointer-events: none;\n overflow: hidden;\n visibility: hidden;\n position: static;\n white-space: pre-wrap;\n overflow-wrap: break-word;\n ")]),TQ("pair",[_Q("input-el, placeholder",{textAlign:"center"}),_Q("separator","\n display: flex;\n align-items: center;\n transition: color .3s var(--bezier);\n color: var(--text-color);\n ",[AQ("icon","\n color: var(--icon-color);\n "),AQ("base-icon","\n color: var(--icon-color);\n ")])]),TQ("disabled",{cursor:"not-allowed",backgroundColor:"var(--color-disabled)"},[_Q("border",{border:"var(--border-disabled)"}),_Q("input-el, textarea-el",{cursor:"not-allowed",color:"var(--text-color-disabled)",textDecorationColor:"var(--text-color-disabled)"}),_Q("placeholder",{color:"var(--placeholder-color-disabled)"}),_Q("separator",{color:"var(--text-color-disabled)"},[AQ("icon","\n color: var(--icon-color-disabled);\n "),AQ("base-icon","\n color: var(--icon-color-disabled);\n ")]),_Q("suffix, prefix",{color:"var(--text-color-disabled)"},[AQ("icon","\n color: var(--icon-color-disabled);\n "),AQ("internal-icon","\n color: var(--icon-color-disabled);\n ")])]),PQ("disabled",[_Q("eye","\n color: var(--icon-color);\n cursor: pointer;\n ",[EQ("&:hover","\n color: var(--icon-color-hover);\n "),EQ("&:active","\n color: var(--icon-color-pressed);\n ")]),TQ("focus",{backgroundColor:"var(--color-focus)"},[_Q("state-border",{border:"var(--border-focus)",boxShadow:"var(--box-shadow-focus)"})]),EQ("&:hover",[_Q("state-border",{border:"var(--border-focus)"})])]),_Q("border, state-border","\n box-sizing: border-box;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n pointer-events: none;\n border-radius: inherit;\n border: var(--border);\n transition:\n box-shadow .3s var(--bezier),\n border-color .3s var(--bezier);\n "),_Q("state-border","\n border-color: #0000;\n z-index: 1;\n "),_Q("prefix",{marginRight:"4px"}),_Q("suffix","\n margin-left: 4px;\n "),_Q("suffix, prefix","\n transition: color .3s var(--bezier);\n flex-wrap: nowrap;\n flex-shrink: 0;\n line-height: var(--height);\n white-space: nowrap;\n display: inline-flex;\n align-items: center;\n justify-content: center;\n color: var(--suffix-text-color);\n ",[AQ("base-loading","\n font-size: var(--icon-size);\n margin-left: 4px;\n color: var(--loading-color);\n "),AQ("base-clear","\n font-size: var(--icon-size);\n margin-left: 4px;\n ",[_Q("placeholder",[AQ("base-icon","\n transition: color .3s var(--bezier);\n color: var(--icon-color);\n font-size: var(--icon-size);\n ")])]),AQ("icon","\n transition: color .3s var(--bezier);\n color: var(--icon-color);\n font-size: var(--icon-size);\n "),AQ("base-icon","\n font-size: var(--icon-size);\n ")]),AQ("input-word-count","\n pointer-events: none;\n line-height: 1.5;\n font-size: .85em;\n color: var(--count-text-color);\n transition: color .3s var(--bezier);\n margin-left: 4px;\n font-variant: tabular-nums;\n ")]),["warning","error"].map((t=>IQ(t,AQ("input",[PQ("disabled",[AQ("base-loading",`\n color: var(--loading-color-${t})\n `),_Q("input-el, textarea-el",{caretColor:`var(--caret-color-${t})`}),_Q("state-border",{border:`var(--border-${t})`}),EQ("&:hover",[_Q("state-border",`\n border: var(--border-hover-${t});\n `)]),EQ("&:focus",{backgroundColor:`var(--color-focus-${t})`},[_Q("state-border",`\n box-shadow: var(--box-shadow-focus-${t});\n border: var(--border-focus-${t});\n `)]),TQ("focus",{backgroundColor:`var(--color-focus-${t})`},[_Q("state-border",`\n box-shadow: var(--box-shadow-focus-${t});\n border: var(--border-focus-${t});\n `)])])]))))]);var e5=Ke({name:"Input",props:Object.assign(Object.assign({},LJ.props),{bordered:{type:Boolean,default:void 0},type:{type:String,default:"text"},placeholder:[Array,String],defaultValue:{type:[String,Array],default:null},value:[String,Array],disabled:{type:Boolean,default:void 0},size:String,rows:{type:[Number,String],default:3},round:Boolean,minlength:[String,Number],maxlength:[String,Number],clearable:Boolean,autosize:{type:[Boolean,Object],default:!1},pair:Boolean,separator:String,readonly:{type:[String,Boolean],default:!1},passivelyActivated:Boolean,showPasswordOn:String,stateful:{type:Boolean,default:!0},autofocus:Boolean,inputProps:Object,resizable:{type:Boolean,default:!0},showCount:Boolean,loading:{type:Boolean,default:void 0},onMousedown:Function,onKeydown:Function,onKeyup:Function,onInput:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClick:[Function,Array],onChange:[Function,Array],onClear:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],textDecoration:[String,Array],attrSize:{type:Number,default:20},onInputBlur:[Function,Array],onInputFocus:[Function,Array],onDeactivate:[Function,Array],onActivate:[Function,Array],onWrapperFocus:[Function,Array],onWrapperBlur:[Function,Array],internalDeactivateOnEnter:Boolean,internalForceFocus:Boolean,showPasswordToggle:Boolean}),setup(t){const{mergedClsPrefixRef:e,mergedBorderedRef:n}=FJ(t),r=LJ("Input","Input",t5,K3,t,e),i=ge(null),o=ge(null),a=ge(null),s=ge(null),l=ge(null),u=ge(null),{localeRef:c}=t0("Input"),d=ge(t.defaultValue),h=aJ(Se(t,"value"),d),f=Dq(t),{mergedSizeRef:p,mergedDisabledRef:g}=f,v=ge(!1),m=ge(!1),y=ge(!1),b=ge(!1);let x=null;const w=Ee((()=>{const{placeholder:e,pair:n}=t;return n?Array.isArray(e)?e:void 0===e?["",""]:[e,e]:void 0===e?[c.value.placeholder]:[e]})),C=Ee((()=>{const{value:t}=y,{value:e}=h,{value:n}=w;return!t&&(Q3(e)||Array.isArray(e)&&Q3(e[0]))&&n[0]})),S=Ee((()=>{const{value:t}=y,{value:e}=h,{value:n}=w;return!t&&n[1]&&(Q3(e)||Array.isArray(e)&&Q3(e[1]))})),k=zQ((()=>t.internalForceFocus||v.value)),E=zQ((()=>{if(g.value||t.readonly||!t.clearable||!k.value&&!m.value)return!1;const{value:e}=h,{value:n}=k;return t.pair?!(!Array.isArray(e)||!e[0]&&!e[1])&&(m.value||n):!!e&&(m.value||n)})),M=Ee((()=>{const{showPasswordOn:e}=t;return e||(t.showPasswordToggle?"click":void 0)})),A=ge(!1),_=Ee((()=>{const{textDecoration:e}=t;return e?Array.isArray(e)?e.map((t=>({textDecoration:t}))):[{textDecoration:e}]:["",""]})),T=Ee((()=>{const{maxlength:e}=t;return void 0===e?void 0:Number(e)}));sn((()=>{const{value:t}=h;Array.isArray(t)||F(t)}));const P=zr().proxy;function I(e){const{onUpdateValue:n,"onUpdate:value":r,onInput:i}=t,{nTriggerFormInput:o}=f;n&&pJ(n,e),r&&pJ(r,e),i&&pJ(i,e),d.value=e,o()}function D(e){const{onChange:n}=t,{nTriggerFormChange:r}=f;n&&pJ(n,e),d.value=e,r()}function O(e,n=0,r="input"){const i=e.target.value;if(F(i),x=i,y.value)return;const o=i;if(t.pair){let{value:t}=h;t=Array.isArray(t)?[...t]:["",""],t[n]=o,"input"===r?I(t):D(t)}else"input"===r?I(o):D(o);P.$forceUpdate()}function R(e,n){(null===e.relatedTarget||e.relatedTarget!==l.value&&e.relatedTarget!==u.value&&e.relatedTarget!==o.value&&e.relatedTarget!==i.value)&&("focus"===n?(!function(e){const{onFocus:n}=t,{nTriggerFormFocus:r}=f;n&&pJ(n,e),r()}(e),v.value=!0):"blur"===n&&(!function(e){const{onBlur:n}=t,{nTriggerFormBlur:r}=f;n&&pJ(n,e),r()}(e),v.value=!1))}function L(){t.passivelyActivated&&(b.value=!1,ci((()=>{var t;null===(t=i.value)||void 0===t||t.focus()})))}function B(){var e,n,r;g.value||(t.passivelyActivated?null===(e=i.value)||void 0===e||e.focus():(null===(n=o.value)||void 0===n||n.focus(),null===(r=l.value)||void 0===r||r.focus()))}function F(e){const{type:n,pair:r,autosize:i}=t;if(!r&&i)if("textarea"===n){const{value:t}=a;t&&(t.textContent=(null!=e?e:"")+"\r\n")}else{const{value:t}=s;t&&(e?t.textContent=e:t.innerHTML="&nbsp;")}}let N=null;yi((()=>{const{autosize:e,type:n}=t;e&&"textarea"===n?N=xi(h,(t=>{Array.isArray(t)||t===x||F(t)})):null==N||N()})),ze(Z3,{wordCountRef:Ee((()=>{const{value:t}=h;return null===t||Array.isArray(t)?0:function(t){let e=0;for(const n of t)e++;return e}(t)})),maxlengthRef:T,mergedClsPrefixRef:e});const z={wrapperElRef:i,inputElRef:l,textareaElRef:o,isCompositing:y,focus:B,blur:function(){var t;(null===(t=i.value)||void 0===t?void 0:t.contains(document.activeElement))&&document.activeElement.blur()},deactivate:function(){const{value:t}=i;(null==t?void 0:t.contains(document.activeElement))&&t!==document.activeElement&&L()},activate:function(){g.value||(o.value?o.value.focus():l.value&&l.value.focus())}};return Object.assign(Object.assign({},z),{wrapperElRef:i,inputElRef:l,inputMirrorElRef:s,inputEl2Ref:u,textareaElRef:o,textareaMirrorElRef:a,uncontrolledValue:d,mergedValue:h,passwordVisible:A,mergedPlaceholder:w,showPlaceholder1:C,showPlaceholder2:S,mergedFocus:k,isComposing:y,activated:b,showClearButton:E,mergedSize:p,mergedDisabled:g,textDecorationStyle:_,mergedClsPrefix:e,mergedBordered:n,mergedShowPasswordOn:M,handleCompositionStart:function(){y.value=!0},handleCompositionEnd:function(t){y.value=!1,t.target===u.value?O(t,1):O(t,0)},handleInput:O,handleInputBlur:function(e){!function(e){const{onInputBlur:n}=t;n&&pJ(n,e)}(e),e.relatedTarget===i.value&&function(){const{onDeactivate:e}=t;e&&pJ(e)}(),(null===e.relatedTarget||e.relatedTarget!==l.value&&e.relatedTarget!==u.value&&e.relatedTarget!==o.value)&&(b.value=!1),R(e,"blur")},handleInputFocus:function(e){!function(e){const{onInputFocus:n}=t;n&&pJ(n,e)}(e),v.value=!0,b.value=!0,function(){const{onActivate:e}=t;e&&pJ(e)}(),R(e,"focus")},handleWrapperBlur:function(e){t.passivelyActivated&&(!function(e){const{onWrapperBlur:n}=t;n&&pJ(n,e)}(e),R(e,"blur"))},handleWrapperFocus:function(e){t.passivelyActivated&&(v.value=!0,function(e){const{onWrapperFocus:n}=t;n&&pJ(n,e)}(e),R(e,"focus"))},handleMouseEnter:function(){m.value=!0},handleMouseLeave:function(){m.value=!1},handleMouseDown:function(e){const{onMousedown:n}=t;n&&n(e);const{tagName:r}=e.target;if("INPUT"!==r&&"TEXTAREA"!==r){if(t.resizable){const{value:t}=i;if(t){const{left:n,top:r,width:i,height:o}=t.getBoundingClientRect(),a=14;if(n+i-a<e.clientX&&e.clientY<n+i&&r+o-a<e.clientY&&e.clientY<r+o)return}}e.preventDefault(),v.value||B()}},handleChange:function(t,e){O(t,e,"change")},handleClick:function(e){!function(e){const{onClick:n}=t;n&&pJ(n,e)}(e)},handleClear:function(e){!function(e){const{onClear:n}=t;n&&pJ(n,e)}(e),t.pair?I(["",""]):I("")},handlePasswordToggleClick:function(){g.value||"click"===M.value&&(A.value=!A.value)},handlePasswordToggleMousedown:function(t){if(g.value)return;t.preventDefault();const e=t=>{t.preventDefault(),qQ("mouseup",document,e)};if(XQ("mouseup",document,e),"mousedown"!==M.value)return;A.value=!0;const n=()=>{A.value=!1,qQ("mouseup",document,n)};XQ("mouseup",document,n)},handleWrapperKeyDown:function(e){var n;switch(null===(n=t.onKeydown)||void 0===n||n.call(t,e),e.code){case"Escape":L();break;case"Enter":case"NumpadEnter":!function(e){var n,r;if(t.passivelyActivated){const{value:i}=b;if(i)return void(t.internalDeactivateOnEnter&&L());e.preventDefault(),"textarea"===t.type?null===(n=o.value)||void 0===n||n.focus():null===(r=l.value)||void 0===r||r.focus()}}(e)}},handleTextAreaMirrorResize:function(){(()=>{if("textarea"===t.type){const{autosize:e}=t;if("boolean"==typeof e)return;if(!o.value)return;const{paddingTop:n,paddingBottom:r,lineHeight:i}=window.getComputedStyle(o.value),s=Number(n.slice(0,-2)),l=Number(r.slice(0,-2)),u=Number(i.slice(0,-2)),{value:c}=a;if(!c)return;if(e.minRows){const t=`${s+l+u*Math.max(e.minRows,1)}px`;c.style.minHeight=t}if(e.maxRows){const t=`${s+l+u*e.maxRows}px`;c.style.maxHeight=t}}})()},mergedTheme:r,cssVars:Ee((()=>{const{value:t}=p,{common:{cubicBezierEaseInOut:e},self:{color:n,borderRadius:i,textColor:o,caretColor:a,caretColorError:s,caretColorWarning:l,textDecorationColor:u,border:c,borderDisabled:d,borderHover:h,borderFocus:f,placeholderColor:g,placeholderColorDisabled:v,lineHeightTextarea:m,colorDisabled:y,colorFocus:b,textColorDisabled:x,boxShadowFocus:w,iconSize:C,colorFocusWarning:S,boxShadowFocusWarning:k,borderWarning:E,borderFocusWarning:M,borderHoverWarning:A,colorFocusError:_,boxShadowFocusError:T,borderError:P,borderFocusError:I,borderHoverError:D,clearSize:O,clearColor:R,clearColorHover:L,clearColorPressed:B,iconColor:F,iconColorDisabled:N,suffixTextColor:z,countTextColor:j,iconColorHover:G,iconColorPressed:U,loadingColor:$,loadingColorError:V,loadingColorWarning:W,[CQ("padding",t)]:H,[CQ("fontSize",t)]:Y,[CQ("height",t)]:X}}=r.value,{left:q,right:K}=uq(H);return{"--bezier":e,"--count-text-color":j,"--color":n,"--font-size":Y,"--border-radius":i,"--height":X,"--padding-left":q,"--padding-right":K,"--text-color":o,"--caret-color":a,"--text-decoration-color":u,"--border":c,"--border-disabled":d,"--border-hover":h,"--border-focus":f,"--placeholder-color":g,"--placeholder-color-disabled":v,"--icon-size":C,"--line-height-textarea":m,"--color-disabled":y,"--color-focus":b,"--text-color-disabled":x,"--box-shadow-focus":w,"--loading-color":$,"--caret-color-warning":l,"--color-focus-warning":S,"--box-shadow-focus-warning":k,"--border-warning":E,"--border-focus-warning":M,"--border-hover-warning":A,"--loading-color-warning":W,"--caret-color-error":s,"--color-focus-error":_,"--box-shadow-focus-error":T,"--border-error":P,"--border-focus-error":I,"--border-hover-error":D,"--loading-color-error":V,"--clear-color":R,"--clear-size":O,"--clear-color-hover":L,"--clear-color-pressed":B,"--icon-color":F,"--icon-color-hover":G,"--icon-color-pressed":U,"--icon-color-disabled":N,"--suffix-text-color":z}}))})},render(){const{mergedClsPrefix:t}=this;return Ei("div",{ref:"wrapperElRef",class:[`${t}-input`,{[`${t}-input--disabled`]:this.mergedDisabled,[`${t}-input--textarea`]:"textarea"===this.type,[`${t}-input--resizable`]:this.resizable&&!this.autosize,[`${t}-input--autosize`]:this.autosize,[`${t}-input--round`]:this.round&&!("textarea"===this.type),[`${t}-input--pair`]:this.pair,[`${t}-input--focus`]:this.mergedFocus,[`${t}-input--stateful`]:this.stateful}],style:this.cssVars,tabindex:this.mergedDisabled||!this.passivelyActivated||this.activated?void 0:0,onFocus:this.handleWrapperFocus,onBlur:this.handleWrapperBlur,onClick:this.handleClick,onMousedown:this.handleMouseDown,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd,onKeyup:this.onKeyup,onKeydown:this.handleWrapperKeyDown},Ei("div",{class:`${t}-input-wrapper`},this.$slots.affix||this.$slots.prefix?Ei("div",{class:`${t}-input__prefix`},Ir(this.$slots,"affix",void 0,(()=>[Ir(this.$slots,"prefix")]))):null,"textarea"===this.type?Ei("div",{class:`${t}-input__textarea`},Ei("textarea",Object.assign({},this.inputProps,{ref:"textareaElRef",class:`${t}-input__textarea-el`,autofocus:this.autofocus,rows:Number(this.rows),placeholder:this.placeholder,value:this.mergedValue,disabled:this.mergedDisabled,maxlength:this.maxlength,minlength:this.minlength,readonly:this.readonly,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,style:this.textDecorationStyle[0],onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,onInput:this.handleInput,onChange:this.handleChange})),this.showPlaceholder1?Ei("div",{class:`${t}-input__placeholder`,key:"placeholder"},this.mergedPlaceholder[0]):null,this.autosize?Ei(e2,{onResize:this.handleTextAreaMirrorResize},{default:()=>Ei("div",{ref:"textareaMirrorElRef",class:`${t}-input__textarea-mirror`,key:"mirror"})}):null):Ei("div",{class:`${t}-input__input`},Ei("input",Object.assign({},this.inputProps,{ref:"inputElRef",type:"password"===this.type&&this.mergedShowPasswordOn&&this.passwordVisible?"text":this.type,class:`${t}-input__input-el`,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[0],disabled:this.mergedDisabled,maxlength:this.maxlength,minlength:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[0]:this.mergedValue,readonly:this.readonly,autofocus:this.autofocus,size:this.attrSize,style:this.textDecorationStyle[0],onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,onInput:t=>this.handleInput(t,0),onChange:t=>this.handleChange(t,0)})),this.showPlaceholder1?Ei("div",{class:`${t}-input__placeholder`},Ei("span",null,this.mergedPlaceholder[0])):null,this.autosize?Ei("div",{class:`${t}-input__input-mirror`,key:"mirror",ref:"inputMirrorElRef"}," "):null),!this.pair&&(this.$slots.suffix||this.clearable||this.showCount||this.mergedShowPasswordOn||void 0!==this.loading)?Ei("div",{class:`${t}-input__suffix`},[this.clearable||this.$slots.clear?Ei(z3,{clsPrefix:t,show:this.showClearButton,onClear:this.handleClear},{default:()=>Ir(this.$slots,"clear")}):null,Ir(this.$slots,"suffix"),void 0!==this.loading?Ei(j3,{clsPrefix:t,loading:this.loading,showArrow:!1,showClear:!1,style:this.cssVars}):null,this.showCount&&"textarea"!==this.type?Ei(J3,null):null,this.mergedShowPasswordOn&&"password"===this.type?Ei(T0,{clsPrefix:t,class:`${t}-input__eye`,onMousedown:this.handlePasswordToggleMousedown,onClick:this.handlePasswordToggleClick},{default:()=>this.passwordVisible?Ei(u0,null):Ei(c0,null)}):null]):null),this.pair?Ei("span",{class:`${t}-input__separator`},Ir(this.$slots,"separator",void 0,(()=>[this.separator]))):null,this.pair?Ei("div",{class:`${t}-input-wrapper`},Ei("div",{class:`${t}-input__input`},Ei("input",{ref:"inputEl2Ref",type:this.type,class:`${t}-input__input-el`,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[1],disabled:this.mergedDisabled,maxlength:this.maxlength,minlength:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[1]:void 0,readonly:this.readonly,style:this.textDecorationStyle[1],onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,onInput:t=>this.handleInput(t,1),onChange:t=>this.handleChange(t,1)}),this.showPlaceholder2?Ei("div",{class:`${t}-input__placeholder`},Ei("span",null,this.mergedPlaceholder[1])):null),Ei("div",{class:`${t}-input__suffix`},[this.clearable||this.$slots.clear?Ei(z3,{clsPrefix:t,show:this.showClearButton,onClear:this.handleClear},{default:()=>Ir(this.$slots,"clear")}):null,Ir(this.$slots,"suffix")])):null,this.mergedBordered?Ei("div",{class:`${t}-input__border`}):null,this.mergedBordered?Ei("div",{class:`${t}-input__state-border`}):null,this.showCount&&"textarea"===this.type?Ei(J3,null):null)}});function n5(t){return"group"===t.type}function r5(t){return"ignored"===t.type}const i5={getKey:function(t){return n5(t)?t.name||t.key||"key-required":t.value},getIsGroup:n5,getIgnored:r5};function o5(t,e){try{return!!(1+e.toString().toLowerCase().indexOf(t.trim().toLowerCase()))}catch(n){return!1}}function a5(t){return kq(t,[255,255,255,.16])}function s5(t){return kq(t,[0,0,0,.12])}var l5={paddingTiny:"0 6px",paddingSmall:"0 10px",paddingMedium:"0 14px",paddingLarge:"0 18px",paddingRoundTiny:"0 10px",paddingRoundSmall:"0 14px",paddingRoundMedium:"0 18px",paddingRoundLarge:"0 22px",iconMarginTiny:"6px",iconMarginSmall:"6px",iconMarginMedium:"6px",iconMarginLarge:"6px",iconSizeTiny:"14px",iconSizeSmall:"18px",iconSizeMedium:"18px",iconSizeLarge:"20px",rippleDuration:".6s"};var u5={name:"Button",common:K2,self:t=>{const{heightTiny:e,heightSmall:n,heightMedium:r,heightLarge:i,borderRadius:o,fontSizeTiny:a,fontSizeSmall:s,fontSizeMedium:l,fontSizeLarge:u,opacityDisabled:c,textColor1:d,textColor2:h,textColor3:f,primaryColorHover:p,primaryColorPressed:g,borderColor:v,primaryColor:m,baseColor:y,infoColor:b,infoColorHover:x,infoColorPressed:w,successColor:C,successColorHover:S,successColorPressed:k,warningColor:E,warningColorHover:M,warningColorPressed:A,errorColor:_,errorColorHover:T,errorColorPressed:P,fontWeight:I}=t;return Object.assign(Object.assign({},l5),{heightTiny:e,heightSmall:n,heightMedium:r,heightLarge:i,borderRadiusTiny:o,borderRadiusSmall:o,borderRadiusMedium:o,borderRadiusLarge:o,fontSizeTiny:a,fontSizeSmall:s,fontSizeMedium:l,fontSizeLarge:u,opacityDisabled:c,color:"#0000",colorHover:"#0000",colorPressed:"#0000",colorFocus:"#0000",colorDisabled:"#0000",textColor:h,textColorHover:p,textColorPressed:g,textColorFocus:p,textColorDisabled:h,textColorText:h,textColorTextDepth1:d,textColorTextDepth2:h,textColorTextDepth3:f,textColorTextHover:p,textColorTextPressed:g,textColorTextFocus:p,textColorTextDisabled:h,textColorGhost:h,textColorGhostHover:p,textColorGhostPressed:g,textColorGhostFocus:p,textColorGhostDisabled:h,border:`1px solid ${v}`,borderHover:`1px solid ${p}`,borderPressed:`1px solid ${g}`,borderFocus:`1px solid ${p}`,borderDisabled:`1px solid ${v}`,rippleColor:m,colorPrimary:m,colorHoverPrimary:p,colorPressedPrimary:g,colorFocusPrimary:p,colorDisabledPrimary:m,textColorPrimary:y,textColorHoverPrimary:y,textColorPressedPrimary:y,textColorFocusPrimary:y,textColorDisabledPrimary:y,textColorTextPrimary:m,textColorTextHoverPrimary:p,textColorTextPressedPrimary:g,textColorTextFocusPrimary:p,textColorTextDisabledPrimary:h,textColorGhostPrimary:m,textColorGhostHoverPrimary:p,textColorGhostPressedPrimary:g,textColorGhostFocusPrimary:p,textColorGhostDisabledPrimary:m,borderPrimary:`1px solid ${m}`,borderHoverPrimary:`1px solid ${p}`,borderPressedPrimary:`1px solid ${g}`,borderFocusPrimary:`1px solid ${p}`,borderDisabledPrimary:`1px solid ${m}`,rippleColorPrimary:m,colorInfo:b,colorHoverInfo:x,colorPressedInfo:w,colorFocusInfo:x,colorDisabledInfo:b,textColorInfo:y,textColorHoverInfo:y,textColorPressedInfo:y,textColorFocusInfo:y,textColorDisabledInfo:y,textColorTextInfo:b,textColorTextHoverInfo:x,textColorTextPressedInfo:w,textColorTextFocusInfo:x,textColorTextDisabledInfo:h,textColorGhostInfo:b,textColorGhostHoverInfo:x,textColorGhostPressedInfo:w,textColorGhostFocusInfo:x,textColorGhostDisabledInfo:b,borderInfo:`1px solid ${b}`,borderHoverInfo:`1px solid ${x}`,borderPressedInfo:`1px solid ${w}`,borderFocusInfo:`1px solid ${x}`,borderDisabledInfo:`1px solid ${b}`,rippleColorInfo:b,colorSuccess:C,colorHoverSuccess:S,colorPressedSuccess:k,colorFocusSuccess:S,colorDisabledSuccess:C,textColorSuccess:y,textColorHoverSuccess:y,textColorPressedSuccess:y,textColorFocusSuccess:y,textColorDisabledSuccess:y,textColorTextSuccess:C,textColorTextHoverSuccess:S,textColorTextPressedSuccess:k,textColorTextFocusSuccess:S,textColorTextDisabledSuccess:h,textColorGhostSuccess:C,textColorGhostHoverSuccess:S,textColorGhostPressedSuccess:k,textColorGhostFocusSuccess:S,textColorGhostDisabledSuccess:C,borderSuccess:`1px solid ${C}`,borderHoverSuccess:`1px solid ${S}`,borderPressedSuccess:`1px solid ${k}`,borderFocusSuccess:`1px solid ${S}`,borderDisabledSuccess:`1px solid ${C}`,rippleColorSuccess:C,colorWarning:E,colorHoverWarning:M,colorPressedWarning:A,colorFocusWarning:M,colorDisabledWarning:E,textColorWarning:y,textColorHoverWarning:y,textColorPressedWarning:y,textColorFocusWarning:y,textColorDisabledWarning:y,textColorTextWarning:E,textColorTextHoverWarning:M,textColorTextPressedWarning:A,textColorTextFocusWarning:M,textColorTextDisabledWarning:h,textColorGhostWarning:E,textColorGhostHoverWarning:M,textColorGhostPressedWarning:A,textColorGhostFocusWarning:M,textColorGhostDisabledWarning:E,borderWarning:`1px solid ${E}`,borderHoverWarning:`1px solid ${M}`,borderPressedWarning:`1px solid ${A}`,borderFocusWarning:`1px solid ${M}`,borderDisabledWarning:`1px solid ${E}`,rippleColorWarning:E,colorError:_,colorHoverError:T,colorPressedError:P,colorFocusError:T,colorDisabledError:_,textColorError:y,textColorHoverError:y,textColorPressedError:y,textColorFocusError:y,textColorDisabledError:y,textColorTextError:_,textColorTextHoverError:T,textColorTextPressedError:P,textColorTextFocusError:T,textColorTextDisabledError:h,textColorGhostError:_,textColorGhostHoverError:T,textColorGhostPressedError:P,textColorGhostFocusError:T,textColorGhostDisabledError:_,borderError:`1px solid ${_}`,borderHoverError:`1px solid ${T}`,borderPressedError:`1px solid ${P}`,borderFocusError:`1px solid ${T}`,borderDisabledError:`1px solid ${_}`,rippleColorError:_,waveOpacity:"0.6",fontWeightText:I,fontWeight:I,fontWeighGhost:I})}};const c5="0!important",d5="-1px!important";function h5(t){return TQ(t+"-type",[EQ("& +",[AQ("button",{},[TQ(t+"-type",[_Q("border",{borderLeftWidth:c5}),_Q("state-border",{left:d5})])])])])}function f5(t){return TQ(t+"-type",[EQ("& +",[AQ("button",[TQ(t+"-type",[_Q("border",{borderTopWidth:c5}),_Q("state-border",{top:d5})])])])])}var p5=AQ("button-group","\n flex-wrap: nowrap;\n display: inline-flex;\n position: relative;\n",[PQ("vertical",{flexDirection:"row"},[AQ("button",[EQ("&:first-child:not(:last-child)",`\n margin-right: ${c5};\n border-top-right-radius: ${c5};\n border-bottom-right-radius: ${c5};\n `),EQ("&:last-child:not(:first-child)",`\n margin-left: ${c5};\n border-top-left-radius: ${c5};\n border-bottom-left-radius: ${c5};\n `),EQ("&:not(:first-child):not(:last-child)",`\n margin-left: ${c5};\n margin-right: ${c5};\n border-radius: ${c5};\n `),h5("default"),TQ("ghost",[h5("primary"),h5("info"),h5("success"),h5("warning"),h5("error")])])]),TQ("vertical",{flexDirection:"column"},[AQ("button",[EQ("&:first-child:not(:last-child)",`\n margin-bottom: ${c5};\n margin-left: ${c5};\n margin-right: ${c5};\n border-bottom-left-radius: ${c5};\n border-bottom-right-radius: ${c5};\n `),EQ("&:last-child:not(:first-child)",`\n margin-top: ${c5};\n margin-left: ${c5};\n margin-right: ${c5};\n border-top-left-radius: ${c5};\n border-top-right-radius: ${c5};\n `),EQ("&:not(:first-child):not(:last-child)",`\n margin: ${c5};\n border-radius: ${c5};\n `),f5("default"),TQ("ghost",[f5("primary"),f5("info"),f5("success"),f5("warning"),f5("error")])])])]);const g5=Symbol("button-group");Ke({name:"ButtonGroup",props:{size:{type:String,default:void 0},vertical:Boolean},setup(t){const{mergedClsPrefixRef:e}=FJ(t);return e0("ButtonGroup",p5,e),ze(g5,t),{mergedClsPrefix:e}},render(){const{mergedClsPrefix:t}=this;return Ei("div",{class:[`${t}-button-group`,this.vertical&&`${t}-button-group--vertical`],role:"group"},this.$slots)}});var v5=EQ([AQ("button","\n font-weight: var(--font-weight);\n line-height: 1;\n font-family: inherit;\n padding: var(--padding);\n height: var(--height);\n font-size: var(--font-size);\n border-radius: var(--border-radius);\n color: var(--text-color);\n background-color: var(--color);\n width: var(--width);\n white-space: nowrap;\n outline: none;\n position: relative;\n z-index: auto;\n border: none;\n display: inline-flex;\n flex-wrap: nowrap;\n align-items: center;\n justify-content: center;\n user-select: none;\n text-align: center;\n cursor: pointer;\n text-decoration: none;\n transition:\n color .3s var(--bezier),\n background-color .3s var(--bezier),\n opacity .3s var(--bezier),\n border-color .3s var(--bezier);\n ",[TQ("color",[_Q("border",{borderColor:"var(--border-color)"}),TQ("disabled",[_Q("border",{borderColor:"var(--border-color-disabled)"})]),PQ("disabled",[EQ("&:focus",[_Q("state-border",{borderColor:"var(--border-color-focus)"})]),EQ("&:hover",[_Q("state-border",{borderColor:"var(--border-color-hover)"})]),EQ("&:active",[_Q("state-border",{borderColor:"var(--border-color-pressed)"})]),TQ("pressed",[_Q("state-border",{borderColor:"var(--border-color-pressed)"})])])]),TQ("disabled",{backgroundColor:"var(--color-disabled)",color:"var(--text-color-disabled)"},[_Q("border",{border:"var(--border-disabled)"})]),PQ("disabled",[EQ("&:focus",{backgroundColor:"var(--color-focus)",color:"var(--text-color-focus)"},[_Q("state-border",{border:"var(--border-focus)"})]),EQ("&:hover",{backgroundColor:"var(--color-hover)",color:"var(--text-color-hover)"},[_Q("state-border",{border:"var(--border-hover)"})]),EQ("&:active",{backgroundColor:"var(--color-pressed)",color:"var(--text-color-pressed)"},[_Q("state-border",{border:"var(--border-pressed)"})]),TQ("pressed",{backgroundColor:"var(--color-pressed)",color:"var(--text-color-pressed)"},[_Q("state-border",{border:"var(--border-pressed)"})])]),AQ("base-wave","\n pointer-events: none;\n top: 0;\n right: 0;\n bottom: 0;\n left: 0;\n animation-iteration-count: 1;\n animation-duration: var(--ripple-duration);\n animation-timing-function: var(--bezier-ease-out), var(--bezier-ease-out);\n ",[TQ("active",{zIndex:1,animationName:"button-wave-spread, button-wave-opacity"})]),"undefined"!=typeof window&&"MozBoxSizing"in document.createElement("div").style?EQ("&::moz-focus-inner",{border:0}):null,_Q("border, state-border","\n position: absolute;\n left: 0;\n top: 0;\n right: 0;\n bottom: 0;\n border-radius: inherit;\n transition: border-color .3s var(--bezier);\n pointer-events: none;\n "),_Q("border",{border:"var(--border)"}),_Q("state-border",{border:"var(--border)",borderColor:"#0000",zIndex:1}),_Q("icon","\n margin: var(--icon-margin);\n margin-left: 0;\n height: var(--icon-size);\n width: var(--icon-size);\n max-width: var(--icon-size);\n font-size: var(--icon-size);\n position: relative;\n flex-shrink: 0;\n ",[AQ("icon-slot","\n height: var(--icon-size);\n width: var(--icon-size);\n position: absolute;\n left: 0;\n top: 50%;\n transform: translateY(-50%);\n display: flex;\n ",[O0({top:"50%",originalTransform:"translateY(-50%)"})]),function({duration:t=".2s",delay:e=".1s"}={}){return[EQ("&.fade-in-width-expand-transition-leave-from, &.fade-in-width-expand-transition-enter-to",{opacity:1}),EQ("&.fade-in-width-expand-transition-leave-to, &.fade-in-width-expand-transition-enter-from","\n opacity: 0!important;\n margin-left: 0!important;\n margin-right: 0!important;\n "),EQ("&.fade-in-width-expand-transition-leave-active",`\n overflow: hidden;\n transition:\n opacity ${t} ${W3},\n max-width ${t} ${W3} ${e},\n margin-left ${t} ${W3} ${e},\n margin-right ${t} ${W3} ${e};\n `),EQ("&.fade-in-width-expand-transition-enter-active",`\n overflow: hidden;\n transition:\n opacity ${t} ${W3} ${e},\n max-width ${t} ${W3},\n margin-left ${t} ${W3},\n margin-right ${t} ${W3};\n `)]}()]),_Q("content","\n display: flex;\n align-items: center;\n flex-wrap: nowrap;\n ",[EQ("~",[_Q("icon",{margin:"var(--icon-margin)",marginRight:0})])]),TQ("block","\n display: flex;\n width: 100%;\n "),TQ("dashed",[_Q("border, state-border",{borderStyle:"dashed !important"})]),TQ("disabled",{cursor:"not-allowed",opacity:"var(--opacity-disabled)"})]),EQ("@keyframes button-wave-spread",{from:{boxShadow:"0 0 0.5px 0 var(--ripple-color)"},to:{boxShadow:"0 0 0.5px 4.5px var(--ripple-color)"}}),EQ("@keyframes button-wave-opacity",{from:{opacity:"var(--wave-opacity)"},to:{opacity:0}})]);const m5=Ke({name:"Button",props:Object.assign(Object.assign({},LJ.props),{color:String,textColor:String,text:Boolean,block:Boolean,loading:Boolean,disabled:Boolean,circle:Boolean,size:String,ghost:Boolean,round:Boolean,depth:[Number,String],focusable:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},tag:{type:String,default:"button"},type:{type:String,default:"default"},dashed:Boolean,iconPlacement:{type:String,default:"left"},attrType:{type:String,default:"button"},onClick:[Function,Array],bordered:{type:Boolean,default:!0}}),setup(t){const e=ge(null),n=ge(null),r=ge(!1),i=zQ((()=>!t.text&&(!t.color||t.ghost||t.dashed)&&t.bordered)),o=je(g5,{}),{mergedSizeRef:a}=Dq({},{defaultSize:"medium",mergedSize:e=>{const{size:n}=t;if(n)return n;const{size:r}=o;if(r)return r;const{mergedSize:i}=e||{};return i?i.value:"medium"}}),s=Ee((()=>t.focusable&&!t.disabled)),{mergedClsPrefixRef:l,NConfigProvider:u}=FJ(t),c=LJ("Button","Button",v5,u5,t,l),d=B3("Button",null==u?void 0:u.mergedRtlRef,l);return{selfRef:e,waveRef:n,mergedClsPrefix:l,mergedFocusable:s,mergedSize:a,showBorder:i,enterPressed:r,rtlEnabled:d,handleMouseDown:n=>{var r;n.preventDefault(),t.disabled||s.value&&(null===(r=e.value)||void 0===r||r.focus({preventScroll:!0}))},handleKeyDown:e=>{switch(e.code){case"Enter":case"NumpadEnter":if(!t.keyboard)return;e.preventDefault(),r.value=!0}},handleBlur:()=>{r.value=!1},handleKeyUp:n=>{switch(n.code){case"Enter":case"NumpadEnter":if(!t.keyboard)return void n.preventDefault();r.value=!1,ci((()=>{var n;t.disabled||null===(n=e.value)||void 0===n||n.click()}))}},handleClick:e=>{if(!t.disabled){const{onClick:r}=t;if(r&&pJ(r,e),!t.text){const{value:t}=n;t&&t.play()}}},customColorCssVars:Ee((()=>{const{color:e}=t;if(!e)return null;const n=a5(e);return{"--border-color":e,"--border-color-hover":n,"--border-color-pressed":s5(e),"--border-color-focus":n,"--border-color-disabled":e}})),cssVars:Ee((()=>{const e=c.value,{common:{cubicBezierEaseInOut:n,cubicBezierEaseOut:r},self:i}=e,{rippleDuration:o,opacityDisabled:s,fontWeightText:l,fontWeighGhost:u,fontWeight:d}=i,h=a.value,{dashed:f,type:p,ghost:g,text:v,color:m,round:y,circle:b,textColor:x}=t,w={fontWeight:v?l:g?u:d};let C={"--color":"initial","--color-hover":"initial","--color-pressed":"initial","--color-focus":"initial","--color-disabled":"initial","--ripple-color":"initial","--text-color":"initial","--text-color-hover":"initial","--text-color-pressed":"initial","--text-color-focus":"initial","--text-color-disabled":"initial"};if(v){const{depth:e}=t,n=x||m;C={"--color":"#0000","--color-hover":"#0000","--color-pressed":"#0000","--color-focus":"#0000","--color-disabled":"#0000","--ripple-color":"#0000","--text-color":n||("default"===p&&void 0!==e?i[CQ("textColorTextDepth",String(e))]:i[CQ("textColorText",p)]),"--text-color-hover":n?a5(n):i[CQ("textColorTextHover",p)],"--text-color-pressed":n?s5(n):i[CQ("textColorTextPressed",p)],"--text-color-focus":n?a5(n):i[CQ("textColorTextHover",p)],"--text-color-disabled":n||i[CQ("textColorTextDisabled",p)]}}else if(g||f){const t=x||m;C={"--color":"#0000","--color-hover":"#0000","--color-pressed":"#0000","--color-focus":"#0000","--color-disabled":"#0000","--ripple-color":m||i[CQ("rippleColor",p)],"--text-color":t||i[CQ("textColorGhost",p)],"--text-color-hover":t?a5(t):i[CQ("textColorGhostHover",p)],"--text-color-pressed":t?s5(t):i[CQ("textColorGhostPressed",p)],"--text-color-focus":t?a5(t):i[CQ("textColorGhostHover",p)],"--text-color-disabled":t||i[CQ("textColorGhostDisabled",p)]}}else C={"--color":m||i[CQ("color",p)],"--color-hover":m?a5(m):i[CQ("colorHover",p)],"--color-pressed":m?s5(m):i[CQ("colorPressed",p)],"--color-focus":m?a5(m):i[CQ("colorFocus",p)],"--color-disabled":m||i[CQ("colorDisabled",p)],"--ripple-color":m||i[CQ("rippleColor",p)],"--text-color":x||(m?i.textColorPrimary:i[CQ("textColor",p)]),"--text-color-hover":x||(m?i.textColorHoverPrimary:i[CQ("textColorHover",p)]),"--text-color-pressed":x||(m?i.textColorPressedPrimary:i[CQ("textColorPressed",p)]),"--text-color-focus":x||(m?i.textColorFocusPrimary:i[CQ("textColorFocus",p)]),"--text-color-disabled":x||(m?i.textColorDisabledPrimary:i[CQ("textColorDisabled",p)])};let S={"--border":"initial","--border-hover":"initial","--border-pressed":"initial","--border-focus":"initial","--border-disabled":"initial"};S=v?{"--border":"none","--border-hover":"none","--border-pressed":"none","--border-focus":"none","--border-disabled":"none"}:{"--border":i[CQ("border",p)],"--border-hover":i[CQ("borderHover",p)],"--border-pressed":i[CQ("borderPressed",p)],"--border-focus":i[CQ("borderFocus",p)],"--border-disabled":i[CQ("borderDisabled",p)]};const{[CQ("height",h)]:k,[CQ("fontSize",h)]:E,[CQ("padding",h)]:M,[CQ("paddingRound",h)]:A,[CQ("iconSize",h)]:_,[CQ("borderRadius",h)]:T,[CQ("iconMargin",h)]:P,waveOpacity:I}=i,D={"--width":b&&!v?k:"initial","--height":v?"initial":k,"--font-size":E,"--padding":b||v?"initial":y?A:M,"--icon-size":_,"--icon-margin":P,"--border-radius":v?"initial":b||y?k:T};return Object.assign(Object.assign(Object.assign(Object.assign({"--bezier":n,"--bezier-ease-out":r,"--ripple-duration":o,"--opacity-disabled":s,"--wave-opacity":I},w),C),S),D)}))}},render(){const{$slots:t,mergedClsPrefix:e,tag:n}=this;return Ei(n,{ref:"selfRef",class:[`${e}-button`,`${e}-button--${this.type}-type`,{[`${e}-button--rtl`]:this.rtlEnabled,[`${e}-button--disabled`]:this.disabled,[`${e}-button--block`]:this.block,[`${e}-button--pressed`]:this.enterPressed,[`${e}-button--dashed`]:!this.text&&this.dashed,[`${e}-button--color`]:this.color,[`${e}-button--ghost`]:this.ghost}],tabindex:this.mergedFocusable?0:-1,type:this.attrType,style:this.cssVars,disabled:this.disabled,onClick:this.handleClick,onBlur:this.handleBlur,onMousedown:this.handleMouseDown,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown},t.default&&"right"===this.iconPlacement?Ei("div",{class:`${e}-button__content`},t):null,Ei(A0,{width:!0},{default:()=>t.icon||this.loading?Ei("span",{class:`${e}-button__icon`,style:{margin:t.default?"":0}},Ei(M0,null,{default:()=>this.loading?Ei(L0,{clsPrefix:e,key:"loading",class:`${e}-icon-slot`,strokeWidth:20}):Ei("div",{key:"icon",class:`${e}-icon-slot`,role:"none"},Ir(t,"icon"))})):null}),t.default&&"left"===this.iconPlacement?Ei("span",{class:`${e}-button__content`},t):null,this.text?null:Ei(y3,{ref:"waveRef",clsPrefix:e}),this.showBorder?Ei("div",{"aria-hidden":!0,class:`${e}-button__border`,style:this.customColorCssVars}):null,this.showBorder?Ei("div",{"aria-hidden":!0,class:`${e}-button__state-border`,style:this.customColorCssVars}):null)}});var y5=m5;const b5=m5;function x5(t,e){GJ(2,arguments);var n=UJ(t),r=jJ(e);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}function w5(t,e){GJ(2,arguments);var n=UJ(t),r=jJ(e);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),o=new Date(n.getTime());o.setMonth(n.getMonth()+r+1,0);var a=o.getDate();return i>=a?o:(n.setFullYear(o.getFullYear(),o.getMonth(),i),n)}function C5(t,e){GJ(2,arguments);var n=UJ(t).getTime(),r=jJ(e);return new Date(n+r)}function S5(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function k5(t){GJ(1,arguments);var e=UJ(t);return e.setHours(0,0,0,0),e}function E5(t,e){GJ(2,arguments);var n=jJ(e);return w5(t,12*n)}function M5(t){GJ(1,arguments);var e=UJ(t);return!isNaN(e)}function A5(t,e){GJ(2,arguments);var n=k5(t),r=k5(e);return n.getTime()===r.getTime()}function _5(t){GJ(1,arguments);var e=UJ(t);return e.setDate(1),e.setHours(0,0,0,0),e}function T5(t,e){GJ(2,arguments);var n=jJ(e);return C5(t,-n)}function P5(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var I5={y:function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return P5("yy"===e?r%100:r,e.length)},M:function(t,e){var n=t.getUTCMonth();return"M"===e?String(n+1):P5(n+1,2)},d:function(t,e){return P5(t.getUTCDate(),e.length)},a:function(t,e){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return"am"===n?"a.m.":"p.m."}},h:function(t,e){return P5(t.getUTCHours()%12||12,e.length)},H:function(t,e){return P5(t.getUTCHours(),e.length)},m:function(t,e){return P5(t.getUTCMinutes(),e.length)},s:function(t,e){return P5(t.getUTCSeconds(),e.length)},S:function(t,e){var n=e.length,r=t.getUTCMilliseconds();return P5(Math.floor(r*Math.pow(10,n-3)),e.length)}};function D5(t){GJ(1,arguments);var e=1,n=UJ(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function O5(t){GJ(1,arguments);var e=UJ(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=D5(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var a=D5(o);return e.getTime()>=i.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function R5(t){GJ(1,arguments);var e=O5(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=D5(n);return r}function L5(t){GJ(1,arguments);var e=UJ(t),n=D5(e).getTime()-R5(e).getTime();return Math.round(n/6048e5)+1}function B5(t,e){GJ(1,arguments);var n=UJ(t,e),r=n.getUTCFullYear(),i=e||{},o=i.locale,a=o&&o.options&&o.options.firstWeekContainsDate,s=null==a?1:jJ(a),l=null==i.firstWeekContainsDate?s:jJ(i.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=new Date(0);u.setUTCFullYear(r+1,0,l),u.setUTCHours(0,0,0,0);var c=$J(u,e),d=new Date(0);d.setUTCFullYear(r,0,l),d.setUTCHours(0,0,0,0);var h=$J(d,e);return n.getTime()>=c.getTime()?r+1:n.getTime()>=h.getTime()?r:r-1}function F5(t,e){GJ(1,arguments);var n=e||{},r=n.locale,i=r&&r.options&&r.options.firstWeekContainsDate,o=null==i?1:jJ(i),a=null==n.firstWeekContainsDate?o:jJ(n.firstWeekContainsDate),s=B5(t,e),l=new Date(0);l.setUTCFullYear(s,0,a),l.setUTCHours(0,0,0,0);var u=$J(l,e);return u}function N5(t,e){GJ(1,arguments);var n=UJ(t),r=$J(n,e).getTime()-F5(n,e).getTime();return Math.round(r/6048e5)+1}var z5="midnight",j5="noon",G5="morning",U5="afternoon",$5="evening",V5="night";function W5(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=e||"";return n+String(i)+a+P5(o,2)}function H5(t,e){return t%60==0?(t>0?"-":"+")+P5(Math.abs(t)/60,2):Y5(t,e)}function Y5(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t);return r+P5(Math.floor(i/60),2)+n+P5(i%60,2)}var X5={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if("yo"===e){var r=t.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return I5.y(t,e)},Y:function(t,e,n,r){var i=B5(t,r),o=i>0?i:1-i;return"YY"===e?P5(o%100,2):"Yo"===e?n.ordinalNumber(o,{unit:"year"}):P5(o,e.length)},R:function(t,e){return P5(O5(t),e.length)},u:function(t,e){return P5(t.getUTCFullYear(),e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return P5(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return P5(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return I5.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return P5(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var i=N5(t,r);return"wo"===e?n.ordinalNumber(i,{unit:"week"}):P5(i,e.length)},I:function(t,e,n){var r=L5(t);return"Io"===e?n.ordinalNumber(r,{unit:"week"}):P5(r,e.length)},d:function(t,e,n){return"do"===e?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):I5.d(t,e)},D:function(t,e,n){var r=function(t){GJ(1,arguments);var e=UJ(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/864e5)+1}(t);return"Do"===e?n.ordinalNumber(r,{unit:"dayOfYear"}):P5(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return P5(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return P5(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),i=0===r?7:r;switch(e){case"i":return String(i);case"ii":return P5(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r,i=t.getUTCHours();switch(r=12===i?j5:0===i?z5:i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r,i=t.getUTCHours();switch(r=i>=17?$5:i>=12?U5:i>=4?G5:V5,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if("ho"===e){var r=t.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return I5.h(t,e)},H:function(t,e,n){return"Ho"===e?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):I5.H(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return"Ko"===e?n.ordinalNumber(r,{unit:"hour"}):P5(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return 0===r&&(r=24),"ko"===e?n.ordinalNumber(r,{unit:"hour"}):P5(r,e.length)},m:function(t,e,n){return"mo"===e?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):I5.m(t,e)},s:function(t,e,n){return"so"===e?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):I5.s(t,e)},S:function(t,e){return I5.S(t,e)},X:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();if(0===i)return"Z";switch(e){case"X":return H5(i);case"XXXX":case"XX":return Y5(i);case"XXXXX":case"XXX":default:return Y5(i,":")}},x:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"x":return H5(i);case"xxxx":case"xx":return Y5(i);case"xxxxx":case"xxx":default:return Y5(i,":")}},O:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+W5(i,":");case"OOOO":default:return"GMT"+Y5(i,":")}},z:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+W5(i,":");case"zzzz":default:return"GMT"+Y5(i,":")}},t:function(t,e,n,r){var i=r._originalDate||t;return P5(Math.floor(i.getTime()/1e3),e.length)},T:function(t,e,n,r){return P5((r._originalDate||t).getTime(),e.length)}};function q5(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}}function K5(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}}var Z5={p:K5,P:function(t,e){var n,r=t.match(/(P+)(p+)?/),i=r[1],o=r[2];if(!o)return q5(t,e);switch(i){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;case"PPPP":default:n=e.dateTime({width:"full"})}return n.replace("{{date}}",q5(i,e)).replace("{{time}}",K5(o,e))}},Q5=["D","DD"],J5=["YY","YYYY"];function t4(t){return-1!==Q5.indexOf(t)}function e4(t){return-1!==J5.indexOf(t)}function n4(t,e,n){if("YYYY"===t)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===t)throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===t)throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===t)throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var r4=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,i4=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,o4=/^'([^]*?)'?$/,a4=/''/g,s4=/[a-zA-Z]/;function l4(t,e,n){GJ(2,arguments);var r=String(e),i=n||{},o=i.locale||QJ,a=o.options&&o.options.firstWeekContainsDate,s=null==a?1:jJ(a),l=null==i.firstWeekContainsDate?s:jJ(i.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=o.options&&o.options.weekStartsOn,c=null==u?0:jJ(u),d=null==i.weekStartsOn?c:jJ(i.weekStartsOn);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var h=UJ(t);if(!M5(h))throw new RangeError("Invalid time value");var f=S5(h),p=T5(h,f),g={firstWeekContainsDate:l,weekStartsOn:d,locale:o,_originalDate:h},v=r.match(i4).map((function(t){var e=t[0];return"p"===e||"P"===e?(0,Z5[e])(t,o.formatLong,g):t})).join("").match(r4).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return u4(n);var a=X5[r];if(a)return!i.useAdditionalWeekYearTokens&&e4(n)&&n4(n,e,t),!i.useAdditionalDayOfYearTokens&&t4(n)&&n4(n,e,t),a(p,n,o.localize,g);if(r.match(s4))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("");return v}function u4(t){return t.match(o4)[1].replace(a4,"'")}function c4(t,e){if(null==t)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e=e||{})Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function d4(t){GJ(1,arguments);var e=UJ(t),n=e.getDate();return n}function h4(t){GJ(1,arguments);var e=UJ(t),n=e.getDay();return n}function f4(t){GJ(1,arguments);var e=UJ(t),n=e.getFullYear(),r=e.getMonth(),i=new Date(0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function p4(t){GJ(1,arguments);var e=UJ(t),n=e.getHours();return n}function g4(t){GJ(1,arguments);var e=UJ(t),n=e.getMinutes();return n}function v4(t){GJ(1,arguments);var e=UJ(t),n=e.getMonth();return n}function m4(t){GJ(1,arguments);var e=UJ(t),n=e.getSeconds();return n}function y4(t){GJ(1,arguments);var e=UJ(t),n=e.getTime();return n}function b4(t){GJ(1,arguments);var e=UJ(t),n=e.getFullYear();return n}function x4(t,e,n){GJ(2,arguments);var r=n||{},i=r.locale,o=i&&i.options&&i.options.weekStartsOn,a=null==o?0:jJ(o),s=null==r.weekStartsOn?a:jJ(r.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=UJ(t),u=jJ(e),c=l.getUTCDay(),d=u%7,h=(d+7)%7,f=(h<s?7:0)+u-c;return l.setUTCDate(l.getUTCDate()+f),l}var w4=/^(1[0-2]|0?\d)/,C4=/^(3[0-1]|[0-2]?\d)/,S4=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,k4=/^(5[0-3]|[0-4]?\d)/,E4=/^(2[0-3]|[0-1]?\d)/,M4=/^(2[0-4]|[0-1]?\d)/,A4=/^(1[0-1]|0?\d)/,_4=/^(1[0-2]|0?\d)/,T4=/^[0-5]?\d/,P4=/^[0-5]?\d/,I4=/^\d/,D4=/^\d{1,2}/,O4=/^\d{1,3}/,R4=/^\d{1,4}/,L4=/^-?\d+/,B4=/^-?\d/,F4=/^-?\d{1,2}/,N4=/^-?\d{1,3}/,z4=/^-?\d{1,4}/,j4=/^([+-])(\d{2})(\d{2})?|Z/,G4=/^([+-])(\d{2})(\d{2})|Z/,U4=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,$4=/^([+-])(\d{2}):(\d{2})|Z/,V4=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function W4(t,e,n){var r=e.match(t);if(!r)return null;var i=parseInt(r[0],10);return{value:n?n(i):i,rest:e.slice(r[0].length)}}function H4(t,e){var n=e.match(t);return n?"Z"===n[0]?{value:0,rest:e.slice(1)}:{value:("+"===n[1]?1:-1)*(36e5*(n[2]?parseInt(n[2],10):0)+6e4*(n[3]?parseInt(n[3],10):0)+1e3*(n[5]?parseInt(n[5],10):0)),rest:e.slice(n[0].length)}:null}function Y4(t,e){return W4(L4,t,e)}function X4(t,e,n){switch(t){case 1:return W4(I4,e,n);case 2:return W4(D4,e,n);case 3:return W4(O4,e,n);case 4:return W4(R4,e,n);default:return W4(new RegExp("^\\d{1,"+t+"}"),e,n)}}function q4(t,e,n){switch(t){case 1:return W4(B4,e,n);case 2:return W4(F4,e,n);case 3:return W4(N4,e,n);case 4:return W4(z4,e,n);default:return W4(new RegExp("^-?\\d{1,"+t+"}"),e,n)}}function K4(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Z4(t,e){var n,r=e>0,i=r?e:1-e;if(i<=50)n=t||100;else{var o=i+50;n=t+100*Math.floor(o/100)-(t>=o%100?100:0)}return r?n:1-n}var Q4=[31,28,31,30,31,30,31,31,30,31,30,31],J4=[31,29,31,30,31,30,31,31,30,31,30,31];function t6(t){return t%400==0||t%4==0&&t%100!=0}var e6={G:{priority:140,parse:function(t,e,n,r){switch(e){case"G":case"GG":case"GGG":return n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"});case"GGGGG":return n.era(t,{width:"narrow"});case"GGGG":default:return n.era(t,{width:"wide"})||n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"})}},set:function(t,e,n,r){return e.era=n,t.setUTCFullYear(n,0,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(t,e,n,r){var i=function(t){return{year:t,isTwoDigitYear:"yy"===e}};switch(e){case"y":return X4(4,t,i);case"yo":return n.ordinalNumber(t,{unit:"year",valueCallback:i});default:return X4(e.length,t,i)}},validate:function(t,e,n){return e.isTwoDigitYear||e.year>0},set:function(t,e,n,r){var i=t.getUTCFullYear();if(n.isTwoDigitYear){var o=Z4(n.year,i);return t.setUTCFullYear(o,0,1),t.setUTCHours(0,0,0,0),t}var a="era"in e&&1!==e.era?1-n.year:n.year;return t.setUTCFullYear(a,0,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(t,e,n,r){var i=function(t){return{year:t,isTwoDigitYear:"YY"===e}};switch(e){case"Y":return X4(4,t,i);case"Yo":return n.ordinalNumber(t,{unit:"year",valueCallback:i});default:return X4(e.length,t,i)}},validate:function(t,e,n){return e.isTwoDigitYear||e.year>0},set:function(t,e,n,r){var i=B5(t,r);if(n.isTwoDigitYear){var o=Z4(n.year,i);return t.setUTCFullYear(o,0,r.firstWeekContainsDate),t.setUTCHours(0,0,0,0),$J(t,r)}var a="era"in e&&1!==e.era?1-n.year:n.year;return t.setUTCFullYear(a,0,r.firstWeekContainsDate),t.setUTCHours(0,0,0,0),$J(t,r)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(t,e,n,r){return q4("R"===e?4:e.length,t)},set:function(t,e,n,r){var i=new Date(0);return i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0),D5(i)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(t,e,n,r){return q4("u"===e?4:e.length,t)},set:function(t,e,n,r){return t.setUTCFullYear(n,0,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(t,e,n,r){switch(e){case"Q":case"QQ":return X4(e.length,t);case"Qo":return n.ordinalNumber(t,{unit:"quarter"});case"QQQ":return n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(t,{width:"wide",context:"formatting"})||n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=1&&e<=4},set:function(t,e,n,r){return t.setUTCMonth(3*(n-1),1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(t,e,n,r){switch(e){case"q":case"qq":return X4(e.length,t);case"qo":return n.ordinalNumber(t,{unit:"quarter"});case"qqq":return n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(t,{width:"wide",context:"standalone"})||n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"})}},validate:function(t,e,n){return e>=1&&e<=4},set:function(t,e,n,r){return t.setUTCMonth(3*(n-1),1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(t,e,n,r){var i=function(t){return t-1};switch(e){case"M":return W4(w4,t,i);case"MM":return X4(2,t,i);case"Mo":return n.ordinalNumber(t,{unit:"month",valueCallback:i});case"MMM":return n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(t,{width:"wide",context:"formatting"})||n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=0&&e<=11},set:function(t,e,n,r){return t.setUTCMonth(n,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(t,e,n,r){var i=function(t){return t-1};switch(e){case"L":return W4(w4,t,i);case"LL":return X4(2,t,i);case"Lo":return n.ordinalNumber(t,{unit:"month",valueCallback:i});case"LLL":return n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(t,{width:"wide",context:"standalone"})||n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"})}},validate:function(t,e,n){return e>=0&&e<=11},set:function(t,e,n,r){return t.setUTCMonth(n,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(t,e,n,r){switch(e){case"w":return W4(k4,t);case"wo":return n.ordinalNumber(t,{unit:"week"});default:return X4(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=53},set:function(t,e,n,r){return $J(function(t,e,n){GJ(2,arguments);var r=UJ(t),i=jJ(e),o=N5(r,n)-i;return r.setUTCDate(r.getUTCDate()-7*o),r}(t,n,r),r)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(t,e,n,r){switch(e){case"I":return W4(k4,t);case"Io":return n.ordinalNumber(t,{unit:"week"});default:return X4(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=53},set:function(t,e,n,r){return D5(function(t,e){GJ(2,arguments);var n=UJ(t),r=jJ(e),i=L5(n)-r;return n.setUTCDate(n.getUTCDate()-7*i),n}(t,n,r),r)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(t,e,n,r){switch(e){case"d":return W4(C4,t);case"do":return n.ordinalNumber(t,{unit:"date"});default:return X4(e.length,t)}},validate:function(t,e,n){var r=t6(t.getUTCFullYear()),i=t.getUTCMonth();return r?e>=1&&e<=J4[i]:e>=1&&e<=Q4[i]},set:function(t,e,n,r){return t.setUTCDate(n),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(t,e,n,r){switch(e){case"D":case"DD":return W4(S4,t);case"Do":return n.ordinalNumber(t,{unit:"date"});default:return X4(e.length,t)}},validate:function(t,e,n){return t6(t.getUTCFullYear())?e>=1&&e<=366:e>=1&&e<=365},set:function(t,e,n,r){return t.setUTCMonth(0,n),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(t,e,n,r){switch(e){case"E":case"EE":case"EEE":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=0&&e<=6},set:function(t,e,n,r){return(t=x4(t,n,r)).setUTCHours(0,0,0,0),t},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(t,e,n,r){var i=function(t){var e=7*Math.floor((t-1)/7);return(t+r.weekStartsOn+6)%7+e};switch(e){case"e":case"ee":return X4(e.length,t,i);case"eo":return n.ordinalNumber(t,{unit:"day",valueCallback:i});case"eee":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeeee":return n.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=0&&e<=6},set:function(t,e,n,r){return(t=x4(t,n,r)).setUTCHours(0,0,0,0),t},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(t,e,n,r){var i=function(t){var e=7*Math.floor((t-1)/7);return(t+r.weekStartsOn+6)%7+e};switch(e){case"c":case"cc":return X4(e.length,t,i);case"co":return n.ordinalNumber(t,{unit:"day",valueCallback:i});case"ccc":return n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"ccccc":return n.day(t,{width:"narrow",context:"standalone"});case"cccccc":return n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(t,{width:"wide",context:"standalone"})||n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"})}},validate:function(t,e,n){return e>=0&&e<=6},set:function(t,e,n,r){return(t=x4(t,n,r)).setUTCHours(0,0,0,0),t},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(t,e,n,r){var i=function(t){return 0===t?7:t};switch(e){case"i":case"ii":return X4(e.length,t);case"io":return n.ordinalNumber(t,{unit:"day"});case"iii":return n.day(t,{width:"abbreviated",context:"formatting",valueCallback:i})||n.day(t,{width:"short",context:"formatting",valueCallback:i})||n.day(t,{width:"narrow",context:"formatting",valueCallback:i});case"iiiii":return n.day(t,{width:"narrow",context:"formatting",valueCallback:i});case"iiiiii":return n.day(t,{width:"short",context:"formatting",valueCallback:i})||n.day(t,{width:"narrow",context:"formatting",valueCallback:i});case"iiii":default:return n.day(t,{width:"wide",context:"formatting",valueCallback:i})||n.day(t,{width:"abbreviated",context:"formatting",valueCallback:i})||n.day(t,{width:"short",context:"formatting",valueCallback:i})||n.day(t,{width:"narrow",context:"formatting",valueCallback:i})}},validate:function(t,e,n){return e>=1&&e<=7},set:function(t,e,n,r){return(t=function(t,e){GJ(2,arguments);var n=jJ(e);n%7==0&&(n-=7);var r=1,i=UJ(t),o=i.getUTCDay(),a=((n%7+7)%7<r?7:0)+n-o;return i.setUTCDate(i.getUTCDate()+a),i}(t,n,r)).setUTCHours(0,0,0,0),t},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(t,e,n,r){switch(e){case"a":case"aa":case"aaa":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}},set:function(t,e,n,r){return t.setUTCHours(K4(n),0,0,0),t},incompatibleTokens:["b","B","H","K","k","t","T"]},b:{priority:80,parse:function(t,e,n,r){switch(e){case"b":case"bb":case"bbb":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}},set:function(t,e,n,r){return t.setUTCHours(K4(n),0,0,0),t},incompatibleTokens:["a","B","H","K","k","t","T"]},B:{priority:80,parse:function(t,e,n,r){switch(e){case"B":case"BB":case"BBB":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}},set:function(t,e,n,r){return t.setUTCHours(K4(n),0,0,0),t},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(t,e,n,r){switch(e){case"h":return W4(_4,t);case"ho":return n.ordinalNumber(t,{unit:"hour"});default:return X4(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=12},set:function(t,e,n,r){var i=t.getUTCHours()>=12;return i&&n<12?t.setUTCHours(n+12,0,0,0):i||12!==n?t.setUTCHours(n,0,0,0):t.setUTCHours(0,0,0,0),t},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(t,e,n,r){switch(e){case"H":return W4(E4,t);case"Ho":return n.ordinalNumber(t,{unit:"hour"});default:return X4(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=23},set:function(t,e,n,r){return t.setUTCHours(n,0,0,0),t},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(t,e,n,r){switch(e){case"K":return W4(A4,t);case"Ko":return n.ordinalNumber(t,{unit:"hour"});default:return X4(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=11},set:function(t,e,n,r){return t.getUTCHours()>=12&&n<12?t.setUTCHours(n+12,0,0,0):t.setUTCHours(n,0,0,0),t},incompatibleTokens:["a","b","h","H","k","t","T"]},k:{priority:70,parse:function(t,e,n,r){switch(e){case"k":return W4(M4,t);case"ko":return n.ordinalNumber(t,{unit:"hour"});default:return X4(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=24},set:function(t,e,n,r){var i=n<=24?n%24:n;return t.setUTCHours(i,0,0,0),t},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(t,e,n,r){switch(e){case"m":return W4(T4,t);case"mo":return n.ordinalNumber(t,{unit:"minute"});default:return X4(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=59},set:function(t,e,n,r){return t.setUTCMinutes(n,0,0),t},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(t,e,n,r){switch(e){case"s":return W4(P4,t);case"so":return n.ordinalNumber(t,{unit:"second"});default:return X4(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=59},set:function(t,e,n,r){return t.setUTCSeconds(n,0),t},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(t,e,n,r){return X4(e.length,t,(function(t){return Math.floor(t*Math.pow(10,3-e.length))}))},set:function(t,e,n,r){return t.setUTCMilliseconds(n),t},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(t,e,n,r){switch(e){case"X":return H4(j4,t);case"XX":return H4(G4,t);case"XXXX":return H4(U4,t);case"XXXXX":return H4(V4,t);case"XXX":default:return H4($4,t)}},set:function(t,e,n,r){return e.timestampIsSet?t:new Date(t.getTime()-n)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(t,e,n,r){switch(e){case"x":return H4(j4,t);case"xx":return H4(G4,t);case"xxxx":return H4(U4,t);case"xxxxx":return H4(V4,t);case"xxx":default:return H4($4,t)}},set:function(t,e,n,r){return e.timestampIsSet?t:new Date(t.getTime()-n)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(t,e,n,r){return Y4(t)},set:function(t,e,n,r){return[new Date(1e3*n),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(t,e,n,r){return Y4(t)},set:function(t,e,n,r){return[new Date(n),{timestampIsSet:!0}]},incompatibleTokens:"*"}},n6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,r6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,i6=/^'([^]*?)'?$/,o6=/''/g,a6=/\S/,s6=/[a-zA-Z]/;function l6(t,e){if(e.timestampIsSet)return t;var n=new Date(0);return n.setFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),n.setHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),n}function u6(t){return t.match(i6)[1].replace(o6,"'")}function c6(t,e){GJ(2,arguments);var n=UJ(t),r=UJ(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function d6(t){GJ(1,arguments);var e=UJ(t);return e.setMilliseconds(0),e}function h6(t,e){GJ(2,arguments);var n=UJ(t),r=jJ(e),i=n.getFullYear(),o=n.getDate(),a=new Date(0);a.setFullYear(i,r,15),a.setHours(0,0,0,0);var s=f4(a);return n.setMonth(r,Math.min(o,s)),n}function f6(t,e){if(GJ(2,arguments),"object"!=typeof e||null===e)throw new RangeError("values parameter must be an object");var n=UJ(t);return isNaN(n.getTime())?new Date(NaN):(null!=e.year&&n.setFullYear(e.year),null!=e.month&&(n=h6(n,e.month)),null!=e.date&&n.setDate(jJ(e.date)),null!=e.hours&&n.setHours(jJ(e.hours)),null!=e.minutes&&n.setMinutes(jJ(e.minutes)),null!=e.seconds&&n.setSeconds(jJ(e.seconds)),null!=e.milliseconds&&n.setMilliseconds(jJ(e.milliseconds)),n)}function p6(t,e){GJ(2,arguments);var n=UJ(t),r=jJ(e);return n.setHours(r),n}function g6(t,e){GJ(2,arguments);var n=UJ(t),r=jJ(e);return n.setMinutes(r),n}function v6(t,e){GJ(2,arguments);var n=UJ(t),r=jJ(e);return n.setSeconds(r),n}function m6(t,e){return Array.isArray(t)?t.some((t=>A5(t,e))):A5(t,e)}function y6(t,e,n,r){let i=!1,o=!1,a=!1;return Array.isArray(n)&&(n[0]<t&&t<n[1]&&(i=!0),m6(n[0],t)&&(o=!0),m6(n[1],t)&&(a=!0)),{dateObject:{date:d4(t),month:v4(t),year:b4(t)},inCurrentMonth:c6(t,e),isCurrentDate:m6(r,t),inSpan:i,startOfSpan:o,endOfSpan:a,selected:null!==n&&m6(n,t),ts:y4(t)}}function b6(t,e,n,r,i=!1){const o=v4(t);let a=y4(_5(t)),s=y4(x5(a,-1));const l=[];let u=!i;for(;h4(s)!==r||u;)l.unshift(y6(s,t,e,n)),s=y4(x5(s,-1)),u=!1;for(;v4(a)===o;)l.push(y6(a,t,e,n)),a=y4(x5(a,1));const c=i?l.length<=28?28:l.length<=35?35:42:42;for(;l.length<c;)l.push(y6(a,t,e,n)),a=y4(x5(a,1));return l}function x6(t,e,n,r){const i=function(t,e,n,r){GJ(3,arguments);var i=String(t),o=String(e),a=r||{},s=a.locale||QJ;if(!s.match)throw new RangeError("locale must contain match property");var l=s.options&&s.options.firstWeekContainsDate,u=null==l?1:jJ(l),c=null==a.firstWeekContainsDate?u:jJ(a.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=s.options&&s.options.weekStartsOn,h=null==d?0:jJ(d),f=null==a.weekStartsOn?h:jJ(a.weekStartsOn);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===o)return""===i?UJ(n):new Date(NaN);var p,g={firstWeekContainsDate:c,weekStartsOn:f,locale:s},v=[{priority:10,subPriority:-1,set:l6,index:0}],m=o.match(r6).map((function(t){var e=t[0];return"p"===e||"P"===e?(0,Z5[e])(t,s.formatLong,g):t})).join("").match(n6),y=[];for(p=0;p<m.length;p++){var b=m[p];!a.useAdditionalWeekYearTokens&&e4(b)&&n4(b,o,t),!a.useAdditionalDayOfYearTokens&&t4(b)&&n4(b,o,t);var x=b[0],w=e6[x];if(w){var C=w.incompatibleTokens;if(Array.isArray(C)){for(var S=void 0,k=0;k<y.length;k++){var E=y[k].token;if(-1!==C.indexOf(E)||E===x){S=y[k];break}}if(S)throw new RangeError("The format string mustn't contain `".concat(S.fullToken,"` and `").concat(b,"` at the same time"))}else if("*"===w.incompatibleTokens&&y.length)throw new RangeError("The format string mustn't contain `".concat(b,"` and any other token at the same time"));y.push({token:x,fullToken:b});var M=w.parse(i,b,s.match,g);if(!M)return new Date(NaN);v.push({priority:w.priority,subPriority:w.subPriority||0,set:w.set,validate:w.validate,value:M.value,index:v.length}),i=M.rest}else{if(x.match(s6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");if("''"===b?b="'":"'"===x&&(b=u6(b)),0!==i.indexOf(b))return new Date(NaN);i=i.slice(b.length)}}if(i.length>0&&a6.test(i))return new Date(NaN);var A=v.map((function(t){return t.priority})).sort((function(t,e){return e-t})).filter((function(t,e,n){return n.indexOf(t)===e})).map((function(t){return v.filter((function(e){return e.priority===t})).sort((function(t,e){return e.subPriority-t.subPriority}))})).map((function(t){return t[0]})),_=UJ(n);if(isNaN(_))return new Date(NaN);var T=T5(_,S5(_)),P={};for(p=0;p<A.length;p++){var I=A[p];if(I.validate&&!I.validate(T,I.value,g))return new Date(NaN);var D=I.set(T,P,I.value,g);D[0]?(T=D[0],c4(P,D[1])):T=D}return T}(t,e,n,r);return M5(i)?l4(i,e,r)===t?i:new Date(NaN):i}var w6={paddingSmall:"12px 16px 12px",paddingMedium:"19px 24px 20px",paddingLarge:"23px 32px 24px",paddingHuge:"27px 40px 28px",titleFontSizeSmall:"16px",titleFontSizeMedium:"18px",titleFontSizeLarge:"18px",titleFontSizeHuge:"18px",closeSize:"18px"};var C6={name:"Card",common:K2,self:t=>{const{primaryColor:e,borderRadius:n,lineHeight:r,fontSize:i,cardColor:o,textColor2:a,textColor1:s,dividerColor:l,actionColor:u,fontWeightStrong:c,closeColor:d,closeColorHover:h,closeColorPressed:f,modalColor:p,boxShadow1:g,popoverColor:v}=t;return Object.assign(Object.assign({},w6),{lineHeight:r,color:o,colorModal:p,colorPopover:v,colorTarget:e,textColor:a,titleTextColor:s,borderColor:l,actionColor:u,titleFontWeight:c,closeColor:d,closeColorHover:h,closeColorPressed:f,fontSizeSmall:i,fontSizeMedium:i,fontSizeLarge:i,fontSizeHuge:i,boxShadow:g,borderRadius:n})}},S6=EQ([AQ("card","\n font-size: var(--font-size);\n line-height: var(--line-height);\n display: flex;\n flex-direction: column;\n width: 100%;\n box-sizing: border-box;\n position: relative;\n border-radius: var(--border-radius);\n background-color: var(--color);\n color: var(--text-color);\n transition: \n color .3s var(--bezier),\n background-color .3s var(--bezier),\n box-shadow .3s var(--bezier),\n border-color .3s var(--bezier);\n ",[TQ("hoverable",[EQ("&:hover","box-shadow: var(--box-shadow);")]),TQ("content-segmented",[EQ(">",[_Q("content",{paddingTop:"var(--padding-bottom)"})])]),TQ("content-soft-segmented",[EQ(">",[_Q("content","\n margin: 0 var(--padding-left);\n padding: var(--padding-bottom) 0;\n ")])]),TQ("footer-segmented",[EQ(">",[_Q("footer",{paddingTop:"var(--padding-bottom)"})])]),TQ("footer-soft-segmented",[EQ(">",[_Q("footer","\n padding: var(--padding-bottom) 0;\n margin: 0 var(--padding-left);\n ")])]),EQ(">",[AQ("card-header","\n box-sizing: border-box;\n display: flex;\n align-items: center;\n font-size: var(--title-font-size);\n padding:\n var(--padding-top)\n var(--padding-left)\n var(--padding-bottom)\n var(--padding-left);\n ",[_Q("main","\n font-weight: var(--title-font-weight);\n transition: color .3s var(--bezier);\n flex: 1;\n color: var(--title-text-color);\n "),_Q("extra","\n display: flex;\n align-items: center;\n font-size: var(--font-size);\n font-weight: 400;\n transition: color .3s var(--bezier);\n color: var(--text-color);\n "),_Q("close","\n font-size: var(--close-size);\n transition: color .3s var(--bezier);\n ")]),_Q("action","\n box-sizing: border-box;\n transition:\n background-color .3s var(--bezier),\n border-color .3s var(--bezier);\n background-clip: padding-box;\n background-color: var(--action-color);\n "),_Q("content","flex: 1;"),_Q("content, footer","\n box-sizing: border-box;\n padding: 0 var(--padding-left) var(--padding-bottom) var(--padding-left);\n font-size: var(--font-size);\n ",[EQ("&:first-child",{paddingTop:"var(--padding-bottom)"})]),_Q("action","\n background-color: var(--action-color);\n padding: var(--padding-bottom) var(--padding-left);\n ")]),AQ("card-cover","\n overflow: hidden;\n width: 100%;\n border-radius: var(--border-radius) var(--border-radius) 0 0;\n ",[EQ("img","\n display: block;\n width: 100%;\n ")]),TQ("bordered","\n border: 1px solid var(--border-color);\n ",[EQ("&:target","border-color: var(--color-target);")]),TQ("action-segmented",[EQ(">",[_Q("action",[EQ("&:not(:first-child)",{borderTop:"1px solid var(--border-color)"})])])]),TQ("content-segmented, content-soft-segmented",[EQ(">",[_Q("content",{transition:"border-color 0.3s var(--bezier)"},[EQ("&:not(:first-child)",{borderTop:"1px solid var(--border-color)"})])])]),TQ("footer-segmented, footer-soft-segmented",[EQ(">",[_Q("footer",{transition:"border-color 0.3s var(--bezier)"},[EQ("&:not(:first-child)",{borderTop:"1px solid var(--border-color)"})])])])]),DQ(AQ("card",{background:"var(--color-modal)"})),OQ(AQ("card",{background:"var(--color-popover)"})),AQ("card",[RQ({background:"var(--color-modal)"})])]);const k6={title:String,contentStyle:[Object,String],headerStyle:[Object,String],footerStyle:[Object,String],segmented:{type:[Boolean,Object],default:!1},size:{type:String,default:"medium"},bordered:{type:Boolean,default:!0},closable:{type:Boolean,default:!1},hoverable:Boolean,onClose:[Function,Array]},E6=gJ(k6);var M6=Ke({name:"Card",props:Object.assign(Object.assign({},LJ.props),k6),setup(t){const{mergedClsPrefixRef:e,NConfigProvider:n}=FJ(t),r=LJ("Card","Card",S6,C6,t,e);return{rtlEnabled:B3("Card",null==n?void 0:n.mergedRtlRef,e),mergedClsPrefix:e,mergedTheme:r,handleCloseClick:()=>{const{onClose:e}=t;e&&pJ(e)},cssVars:Ee((()=>{const{size:e}=t,{self:{color:n,colorModal:i,colorTarget:o,textColor:a,titleTextColor:s,titleFontWeight:l,borderColor:u,actionColor:c,borderRadius:d,closeColor:h,closeColorHover:f,closeColorPressed:p,lineHeight:g,closeSize:v,boxShadow:m,colorPopover:y,[CQ("padding",e)]:b,[CQ("fontSize",e)]:x,[CQ("titleFontSize",e)]:w},common:{cubicBezierEaseInOut:C}}=r.value,{top:S,left:k,bottom:E}=uq(b);return{"--bezier":C,"--border-radius":d,"--color":n,"--color-modal":i,"--color-popover":y,"--color-target":o,"--text-color":a,"--line-height":g,"--action-color":c,"--title-text-color":s,"--title-font-weight":l,"--close-color":h,"--close-color-hover":f,"--close-color-pressed":p,"--border-color":u,"--box-shadow":m,"--padding-top":S,"--padding-bottom":E,"--padding-left":k,"--font-size":x,"--title-font-size":w,"--close-size":v}}))}},render(){const{segmented:t,bordered:e,hoverable:n,mergedClsPrefix:r,rtlEnabled:i,$slots:o}=this;return Ei("div",{class:[`${r}-card`,{[`${r}-card--rtl`]:i,[`${r}-card--content${"boolean"!=typeof t&&"soft"===t.content?"-soft":""}-segmented`]:!0===t||!1!==t&&t.content,[`${r}-card--footer${"boolean"!=typeof t&&"soft"===t.footer?"-soft":""}-segmented`]:!0===t||!1!==t&&t.footer,[`${r}-card--action-segmented`]:!0===t||!1!==t&&t.action,[`${r}-card--bordered`]:e,[`${r}-card--hoverable`]:n}],style:this.cssVars},o.cover?Ei("div",{class:`${r}-card-cover`,role:"none"},Ir(o,"cover")):null,o.header||this.title||this.closable?Ei("div",{class:`${r}-card-header`,style:this.headerStyle},Ei("div",{class:`${r}-card-header__main`,role:"heading"},Ir(o,"header",{},(()=>[this.title]))),o["header-extra"]?Ei("div",{class:`${r}-card-header__extra`},Ir(o,"header-extra")):null,this.closable?Ei(I0,{clsPrefix:r,class:`${r}-card-header__close`,onClick:this.handleCloseClick}):null):null,Ei("div",{class:`${r}-card__content`,style:this.contentStyle,role:"none"},o),o.footer?Ei("div",{class:`${r}-card__footer`,style:this.footerStyle,role:"none"},Ir(o,"footer")):null,o.action?Ei("div",{class:`${r}-card__action`,role:"none"},Ir(o,"action")):null)}}),A6={sizeSmall:"14px",sizeMedium:"16px",sizeLarge:"18px",labelPadding:"0 8px"};var _6={name:"Checkbox",common:K2,self:t=>{const{baseColor:e,inputColorDisabled:n,cardColor:r,modalColor:i,popoverColor:o,textColorDisabled:a,borderColor:s,primaryColor:l,textColor2:u,fontSizeSmall:c,fontSizeMedium:d,fontSizeLarge:h,borderRadiusSmall:f}=t;return Object.assign(Object.assign({},A6),{fontSizeSmall:c,fontSizeMedium:d,fontSizeLarge:h,borderRadius:f,color:e,colorChecked:l,colorDisabled:n,colorDisabledChecked:n,colorTableHeader:r,colorTableHeaderModal:i,colorTableHeaderPopover:o,checkMarkColor:e,checkMarkColorDisabled:a,checkMarkColorDisabledChecked:a,border:`1px solid ${s}`,borderDisabled:`1px solid ${s}`,borderDisabledChecked:`1px solid ${s}`,borderChecked:`1px solid ${l}`,borderFocus:`1px solid ${l}`,boxShadowFocus:`0 0 0 2px ${Eq(l,{alpha:.3})}`,textColor:u,textColorDisabled:a})}},T6=Ei("svg",{viewBox:"0 0 64 64",class:"check-icon"},Ei("path",{d:"M50.42,16.76L22.34,39.45l-8.1-11.46c-1.12-1.58-3.3-1.96-4.88-0.84c-1.58,1.12-1.95,3.3-0.84,4.88l10.26,14.51  c0.56,0.79,1.42,1.31,2.38,1.45c0.16,0.02,0.32,0.03,0.48,0.03c0.8,0,1.57-0.27,2.2-0.78l30.99-25.03c1.5-1.21,1.74-3.42,0.52-4.92  C54.13,15.78,51.93,15.55,50.42,16.76z"})),P6=Ei("svg",{viewBox:"0 0 100 100",class:"line-icon"},Ei("path",{d:"M80.2,55.5H21.4c-2.8,0-5.1-2.5-5.1-5.5l0,0c0-3,2.3-5.5,5.1-5.5h58.7c2.8,0,5.1,2.5,5.1,5.5l0,0C85.2,53.1,82.9,55.5,80.2,55.5z"}));const I6=Symbol("checkboxGroup");var D6=Ke({name:"CheckboxGroup",props:{min:Number,max:Number,size:String,value:Array,defaultValue:{type:Array,default:null},disabled:{type:Boolean,default:void 0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:{type:[Function,Array],validator:()=>!0,default:void 0}},setup(t){const{mergedClsPrefixRef:e}=FJ(t),n=Dq(t),{mergedSizeRef:r,mergedDisabledRef:i}=n,o=ge(t.defaultValue),a=aJ(Ee((()=>t.value)),o),s=Ee((()=>{var t;return(null===(t=a.value)||void 0===t?void 0:t.length)||0})),l=Ee((()=>Array.isArray(a.value)?new Set(a.value):new Set));return ze(I6,{checkedCountRef:s,maxRef:Se(t,"max"),minRef:Se(t,"min"),valueSetRef:l,disabledRef:i,mergedSizeRef:r,toggleCheckbox:function(e,r){const{nTriggerFormInput:i,nTriggerFormChange:s}=n,{onChange:l,"onUpdate:value":u,onUpdateValue:c}=t;if(Array.isArray(a.value)){const t=Array.from(a.value),n=t.findIndex((t=>t===r));e?~n||(t.push(r),c&&pJ(c,t),u&&pJ(u,t),i(),s(),o.value=t,l&&pJ(l,t)):~n&&(t.splice(n,1),c&&pJ(c,t),u&&pJ(u,t),l&&pJ(l,t),o.value=t,i(),s())}else e?(c&&pJ(c,[r]),u&&pJ(u,[r]),l&&pJ(l,[r]),o.value=[r],i(),s()):(c&&pJ(c,[]),u&&pJ(u,[]),l&&pJ(l,[]),o.value=[],i(),s())}}),{mergedClsPrefix:e}},render(){return Ei("div",{class:`${this.mergedClsPrefix}-checkbox-group`},this.$slots)}}),O6=EQ([AQ("checkbox","\n line-height: 1;\n font-size: var(--font-size);\n outline: none;\n cursor: pointer;\n display: inline-flex;\n align-items: center;\n white-space: nowrap;\n vertical-align: middle;\n --merged-color-table-header: var(--color-table-header);\n ",[EQ("&:hover",[AQ("checkbox-box",[_Q("border",{border:"var(--border-checked)"})])]),EQ("&:focus:not(:active)",[AQ("checkbox-box",[_Q("border",{border:"var(--border-focus)",boxShadow:"var(--box-shadow-focus)"})])]),TQ("table-header",[AQ("checkbox-box",{backgroundColor:"var(--merged-color-table-header)"})]),TQ("checked",[AQ("checkbox-box",{backgroundColor:"var(--color-checked)"},[AQ("checkbox-icon",[EQ(".check-icon","\n width: 100%;\n opacity: 1;\n transform: scale(1);\n ")])])]),TQ("indeterminate",[AQ("checkbox-box",[AQ("checkbox-icon",[EQ(".check-icon","\n opacity: 0;\n transform: scale(.5);\n "),EQ(".line-icon","\n opacity: 1;\n transform: scale(1);\n ")])])]),TQ("checked, indeterminate",[EQ("&:focus:not(:active)",[AQ("checkbox-box",[_Q("border",{border:"var(--border-checked)",boxShadow:"var(--box-shadow-focus)"})])]),AQ("checkbox-box","\n background-color: var(--color-checked);\n border-left: 0;\n border-top: 0;\n ",[_Q("border",{border:"var(--border-checked)"})])]),TQ("disabled",{cursor:"not-allowed"},[TQ("checked",[AQ("checkbox-box","\n background-color: var(--color-disabled-checked);\n ",[_Q("border",{border:"var(--border-disabled-checked)"}),AQ("checkbox-icon",[EQ(".check-icon, .line-icon",{fill:"var(--check-mark-color-disabled-checked)"})])])]),AQ("checkbox-box","\n background-color: var(--color-disabled);\n ",[_Q("border",{border:"var(--border-disabled)"}),AQ("checkbox-icon",[EQ(".check-icon, .line-icon",{fill:"var(--check-mark-color-disabled)"})])]),_Q("label",{color:"var(--text-color-disabled)"})]),AQ("checkbox-box","\n height: var(--size);\n width: var(--size);\n display: inline-block;\n box-sizing: border-box;\n border-radius: var(--border-radius);\n background-color: var(--color);\n position: relative;\n transition:\n background-color 0.3s var(--bezier);\n ",[_Q("border","\n transition:\n border-color .3s var(--bezier),\n box-shadow .3s var(--bezier);\n border-radius: inherit;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n border: var(--border);\n "),AQ("checkbox-icon","\n display: flex;\n align-items: center;\n justify-content: center;\n position: absolute;\n left: 1px;\n right: 1px;\n top: 1px;\n bottom: 1px;\n ",[EQ(".check-icon, .line-icon","\n fill: var(--check-mark-color);\n opacity: 0;\n transform: scale(0.5);\n transform-origin: center;\n transition:\n fill 0.3s var(--bezier),\n transform 0.3s var(--bezier),\n opacity 0.3s var(--bezier),\n border-color 0.3s var(--bezier);\n "),O0({left:"1px",top:"1px"})])]),_Q("label","\n color: var(--text-color);\n transition: color .3s var(--bezier);\n user-select: none;\n padding: var(--label-padding);\n ",[EQ("&:empty",{display:"none"})])]),DQ(AQ("checkbox","\n --merged-color-table-header: var(--color-table-header-modal);\n ")),OQ(AQ("checkbox","\n --merged-color-table-header: var(--color-table-header-popover);\n "))]);var R6=Ke({name:"Checkbox",props:Object.assign(Object.assign({},LJ.props),{size:String,checked:{type:Boolean,default:void 0},defaultChecked:Boolean,value:[String,Number],disabled:{type:Boolean,default:void 0},indeterminate:Boolean,label:String,focusable:{type:Boolean,default:!0},"onUpdate:checked":[Function,Array],onUpdateChecked:[Function,Array],privateTableHeader:Boolean,onChange:{type:[Function,Array],validator:()=>(mJ("checkbox","`on-change` is deprecated, please use `on-update:checked` instead."),!0),default:void 0}}),setup(t){const{mergedClsPrefixRef:e}=FJ(t),n=Dq(t,{mergedSize(e){const{size:n}=t;if(void 0!==n)return n;if(o){const{value:t}=o.mergedSizeRef;if(void 0!==t)return t}if(e){const{mergedSize:t}=e;if(void 0!==t)return t.value}return"medium"},mergedDisabled(e){const{disabled:n}=t;if(void 0!==n)return n;if(o){if(o.disabledRef.value)return!0;const{maxRef:{value:t},checkedCountRef:e}=o;if(void 0!==t&&e.value>=t&&!l.value)return!0;const{minRef:{value:n}}=o;if(void 0!==n&&e.value<=n&&l.value)return!0}return!!e&&e.disabled.value}}),{mergedDisabledRef:r,mergedSizeRef:i}=n,o=je(I6,null),a=ge(t.defaultChecked),s=aJ(Se(t,"checked"),a),l=zQ((()=>{if(o){const e=o.valueSetRef.value;return!(!e||void 0===t.value)&&e.has(t.value)}return s.value})),u=LJ("Checkbox","Checkbox",O6,_6,t,e);function c(e){if(o&&void 0!==t.value)o.toggleCheckbox(!l.value,t.value);else{const{onChange:r,"onUpdate:checked":i,onUpdateChecked:o}=t,{nTriggerFormInput:s,nTriggerFormChange:u}=n,c=!l.value;i&&pJ(i,c,e),o&&pJ(o,c,e),r&&pJ(r,c),s(),u(),a.value=c}}return Object.assign(n,{mergedClsPrefix:e,mergedDisabled:r,renderedChecked:l,mergedTheme:u,handleClick:function(t){r.value||c(t)},handleKeyUp:function(t){if(!r.value)switch(t.code){case"Space":case"Enter":case"NumpadEnter":c(t)}},handleKeyDown:function(t){switch(t.code){case"Space":t.preventDefault()}},cssVars:Ee((()=>{const{value:t}=i,{common:{cubicBezierEaseInOut:e},self:{borderRadius:n,color:r,colorChecked:o,colorDisabled:a,colorTableHeader:s,colorTableHeaderModal:l,colorTableHeaderPopover:c,checkMarkColor:d,checkMarkColorDisabled:h,border:f,borderFocus:p,borderDisabled:g,borderChecked:v,boxShadowFocus:m,textColor:y,textColorDisabled:b,checkMarkColorDisabledChecked:x,colorDisabledChecked:w,borderDisabledChecked:C,labelPadding:S,[CQ("fontSize",t)]:k,[CQ("size",t)]:E}}=u.value;return{"--size":E,"--bezier":e,"--border-radius":n,"--border":f,"--border-checked":v,"--border-focus":p,"--border-disabled":g,"--border-disabled-checked":C,"--box-shadow-focus":m,"--color":r,"--color-checked":o,"--color-table-header":s,"--color-table-header-modal":l,"--color-table-header-popover":c,"--color-disabled":a,"--color-disabled-checked":w,"--text-color":y,"--text-color-disabled":b,"--check-mark-color":d,"--check-mark-color-disabled":h,"--check-mark-color-disabled-checked":x,"--font-size":k,"--label-padding":S}}))})},render(){const{$slots:t,renderedChecked:e,mergedDisabled:n,indeterminate:r,privateTableHeader:i,cssVars:o,label:a,mergedClsPrefix:s,focusable:l,handleKeyUp:u,handleKeyDown:c,handleClick:d}=this;return Ei("div",{class:[`${s}-checkbox`,{[`${s}-checkbox--checked`]:e,[`${s}-checkbox--disabled`]:n,[`${s}-checkbox--indeterminate`]:r,[`${s}-checkbox--table-header`]:i}],tabindex:n||!l?void 0:0,style:o,onKeyup:u,onKeydown:c,onClick:d,onMousedown:()=>{const t=t=>{t.preventDefault()};window.addEventListener("selectstart",t),setTimeout((()=>{window.removeEventListener("selectstart",t)}),0)}},Ei("div",{class:`${s}-checkbox-box`},Ei(M0,null,{default:()=>this.indeterminate?Ei("div",{key:"indeterminate",class:`${s}-checkbox-icon`},P6):Ei("div",{key:"check",class:`${s}-checkbox-icon`},T6)}),Ei("div",{class:`${s}-checkbox-box__border`})),null!==a||t.default?Ei("span",{class:`${s}-checkbox__label`},Ir(t,"default",void 0,(()=>[a]))):null)}});var L6={name:"Select",common:K2,peers:{InternalSelection:U3,InternalSelectMenu:g3},self:function(t){const{boxShadow2:e}=t;return{menuBoxShadow:e}}},B6=EQ([AQ("select","\n z-index: auto;\n outline: none;\n width: 100%;\n position: relative;\n "),AQ("select-menu","\n margin: 4px 0;\n box-shadow: var(--menu-box-shadow);\n ",[h3()])]);var F6=Ke({name:"Select",props:Object.assign(Object.assign({},LJ.props),{to:IJ.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},value:[String,Number,Array],placeholder:String,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:{type:Function,default:function(t,e){return!!e&&("string"==typeof e.label?o5(t,e.label):void 0!==e.value&&o5(t,String(e.value)))}},placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:{type:Function,default:t=>({label:t,value:t})},fallbackOption:{type:[Function,Boolean],default:()=>t=>({label:String(t),value:t})},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onChange:{type:[Function,Array],validator:()=>!0,default:void 0},items:{type:Array,validator:()=>!0,default:void 0},displayDirective:{type:String,default:"show"}}),setup(t){const{mergedClsPrefixRef:e,mergedBorderedRef:n,namespaceRef:r}=FJ(t),i=LJ("Select","Select",B6,L6,t,e),o=ge(t.defaultValue),a=aJ(Se(t,"value"),o),s=ge(!1),l=ge(""),u=Ee((()=>i1(k.value,i5))),c=Ee((()=>function(t){const e=new Map;return t.forEach((t=>{n5(t)?t.children.forEach((t=>{e.set(t.value,t)})):e.set(t.value,t)})),e}(t.options))),d=ge(!1),h=aJ(Se(t,"show"),d),f=ge(null),p=ge(null),g=ge(null),{localeRef:v}=t0("Select"),m=Ee((()=>{var e;return null!==(e=t.placeholder)&&void 0!==e?e:v.value.placeholder})),y=lJ(t,["items","options"]),b=ge([]),x=ge([]),w=ge(new Map),C=Ee((()=>{const{fallbackOption:e}=t;return!!e&&(t=>Object.assign(e(t),{value:t}))})),S=Ee((()=>x.value.concat(b.value).concat(y.value))),k=Ee((()=>{if(t.remote)return y.value;{const{value:e}=S,{value:n}=l;if(n.length&&t.filterable){const{filter:r}=t;return function(t,e,n){return e?function t(r){if(!Array.isArray(r))return[];const i=[];for(const o of r)if(n5(o)){const e=t(o.children);e.length&&i.push(Object.assign({},o,{children:e}))}else{if(r5(o))continue;e(n,o)&&i.push(o)}return i}(t):t}(e,r,n)}return e}})),E=Ee((()=>{if(t.multiple){const{value:e}=a;if(!Array.isArray(e))return[];const n=t.remote,{value:r}=w,{value:i}=c,{value:o}=C,s=[];return e.forEach((t=>{if(i.has(t))s.push(i.get(t));else if(n&&r.has(t))s.push(r.get(t));else if(o){const e=o(t);e&&s.push(e)}})),s}return null})),M=Ee((()=>{const{value:e}=a;if(!t.multiple&&!Array.isArray(e)){const{value:n}=c,{value:r}=C;if(null===e)return null;let i=null;return n.has(e)?i=n.get(e):t.remote&&(i=w.value.get(e)),i||r&&r(e)||null}return null})),A=Dq(t),{mergedSizeRef:_,mergedDisabledRef:T}=A;function P(e){const{onChange:n,"onUpdate:value":r,onUpdateValue:i}=t,{nTriggerFormChange:a,nTriggerFormInput:s}=A;n&&pJ(n,e),i&&pJ(i,e),r&&pJ(r,e),o.value=e,a(),s()}function I(e){const{onBlur:n}=t,{nTriggerFormBlur:r}=A;n&&pJ(n,e),r()}function D(){var e;const{remote:n,multiple:r}=t;if(n){const{value:t}=w;if(r)null===(e=E.value)||void 0===e||e.forEach((e=>{t.set(e.value,e)}));else{const e=M.value;e&&t.set(e.value,e)}}}function O(){T.value||(l.value="",d.value=!0,t.filterable&&G())}function R(){d.value=!1}function L(t){B(t.rawNode)}function B(e){if(T.value)return;const{tag:n,remote:r}=t;if(n&&!r){const{value:t}=x,e=t[0]||null;e&&(b.value.push(e),x.value=[])}if(r&&w.value.set(e.value,e),t.multiple){const i=function(e){if(!Array.isArray(e))return[];if(C.value)return Array.from(e);{const{remote:n}=t,{value:r}=c;if(n){const{value:t}=w;return e.filter((e=>r.has(e)||t.has(e)))}return e.filter((t=>r.has(t)))}}(a.value),o=i.findIndex((t=>t===e.value));if(~o){if(i.splice(o,1),n&&!r){const t=F(e.value);~t&&(b.value.splice(t,1),l.value="")}}else i.push(e.value),l.value="";G(),P(i)}else{if(n&&!r){const t=F(e.value);b.value=~t?[b.value[t]]:[]}j(),R(),P(e.value)}}function F(t){return b.value.findIndex((e=>e.value===t))}function N(e){var n,r,i;switch(e.code){case"Space":if(t.filterable)break;case"Enter":case"NumpadEnter":if(h.value){const t=g.value,e=null==t?void 0:t.getPendingTmNode();e?L(e):(R(),j())}else O();e.preventDefault();break;case"ArrowUp":if(t.loading)return;h.value&&(null===(n=g.value)||void 0===n||n.prev());break;case"ArrowDown":if(t.loading)return;h.value?null===(r=g.value)||void 0===r||r.next():O();break;case"Escape":R(),null===(i=f.value)||void 0===i||i.focus()}}function z(e){switch(e.code){case"Space":t.filterable||e.preventDefault();break;case"ArrowUp":case"ArrowDown":e.preventDefault()}}function j(){var t;null===(t=f.value)||void 0===t||t.focus()}function G(){var t;null===(t=f.value)||void 0===t||t.focusInput()}function U(){var t;null===(t=p.value)||void 0===t||t.syncPosition()}return D(),xi(Se(t,"options"),D),xi(k,(()=>{h.value&&ci(U)})),xi(a,(()=>{h.value&&ci(U)})),{mergedClsPrefix:e,mergedBordered:n,namespace:r,treeMate:u,isMounted:sJ(),triggerRef:f,menuRef:g,pattern:l,uncontrolledShow:d,mergedShow:h,adjustedTo:IJ(t),uncontrolledValue:o,mergedValue:a,followerRef:p,localizedPlaceholder:m,selectedOption:M,selectedOptions:E,mergedSize:_,mergedDisabled:T,focused:s,handleMenuFocus:function(t){s.value=!0},handleMenuBlur:function(t){var e;(null===(e=f.value)||void 0===e?void 0:e.$el.contains(t.relatedTarget))||(s.value=!1,I(t),R())},handleMenuTabOut:function(){var t;null===(t=f.value)||void 0===t||t.focus(),R()},handleTriggerClick:function(){T.value||(h.value?t.filterable||R():O())},handleToggle:L,handleDeleteOption:B,handlePatternInput:function(e){h.value||O();const{value:n}=e.target;l.value=n;const{tag:r,remote:i}=t;if(function(e){const{onSearch:n}=t;n&&pJ(n,e)}(n),r&&!i){if(!n)return void(x.value=[]);const e=t.onCreate(n);y.value.some((t=>t.value===e.value))||b.value.some((t=>t.value===e.value))?x.value=[]:x.value=[e]}},handleClear:function(e){e.stopPropagation();const{multiple:n}=t;!n&&t.filterable&&R(),function(){const{onClear:e}=t;e&&pJ(e)}(),P(n?[]:null)},handleTriggerBlur:function(t){var e,n;(null===(n=null===(e=g.value)||void 0===e?void 0:e.selfRef)||void 0===n?void 0:n.contains(t.relatedTarget))||(s.value=!1,I(t),R())},handleTriggerFocus:function(e){!function(e){const{onFocus:n}=t,{nTriggerFormFocus:r}=A;n&&pJ(n,e),r()}(e),s.value=!0},handleKeyDown:z,handleKeyUp:N,syncPosition:U,handleMenuLeave:function(){l.value=""},handleMenuClickOutside:function(t){var e;h.value&&((null===(e=f.value)||void 0===e?void 0:e.$el.contains(t.target))||R())},handleMenuScroll:function(e){!function(e){const{onScroll:n}=t;n&&pJ(n,e)}(e)},handleMenuKeyup:N,handleMenuKeydown:z,handleMenuMousedown:function(t){aq(t,"action")||t.preventDefault()},mergedTheme:i,cssVars:Ee((()=>{const{self:{menuBoxShadow:t}}=i.value;return{"--menu-box-shadow":t}}))}},render(){const{$slots:t,mergedClsPrefix:e}=this;return Ei("div",{class:`${e}-select`},Ei(c1,null,{default:()=>[Ei(d1,null,{default:()=>Ei(V3,{ref:"triggerRef",clsPrefix:e,showArrow:this.showArrow,maxTagCount:this.maxTagCount,bordered:this.mergedBordered,active:this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeyDown,onKeyup:this.handleKeyUp})}),Ei(I1,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===IJ.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>Ei($i,{name:"fade-in-scale-up-transition",appear:this.isMounted,onLeave:this.handleMenuLeave},{default:()=>(this.mergedShow||"show"===this.displayDirective)&&jn(Ei(v3,{ref:"menuRef",virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:`${e}-select-menu`,clsPrefix:e,focusable:!0,autoPending:!0,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:"medium",renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:this.cssVars,onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeyup:this.handleMenuKeyup,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow},t),"show"===this.displayDirective?[[ho,this.mergedShow],[g1,this.handleMenuClickOutside]]:[[g1,this.handleMenuClickOutside]])})})]}))}}),N6={itemSize:"28px",itemPadding:"0 4px",itemMargin:"0 0 0 8px",buttonIconSize:"16px",inputWidth:"60px",selectWidth:"unset",inputMargin:"0 0 0 8px",selectMargin:"0 0 0 8px",prefixMargin:"0 8px 0 0",suffixMargin:"0 0 0 8px",jumperFontSize:"14px"};var z6={name:"Pagination",common:K2,peers:{Select:L6,Input:K3},self:t=>{const{textColor2:e,primaryColor:n,primaryColorHover:r,primaryColorPressed:i,inputColorDisabled:o,textColorDisabled:a,borderColor:s,borderRadius:l,fontSize:u}=t;return Object.assign(Object.assign({},N6),{buttonColor:"#0000",buttonColorHover:"#0000",buttonColorPressed:"#0000",buttonBorder:`1px solid ${s}`,buttonBorderHover:`1px solid ${s}`,buttonBorderPressed:`1px solid ${s}`,buttonIconColor:e,buttonIconColorHover:e,buttonIconColorPressed:e,itemTextColor:e,itemTextColorHover:r,itemTextColorPressed:i,itemTextColorActive:n,itemTextColorDisabled:a,itemColor:"#0000",itemColorHover:"#0000",itemColorPressed:"#0000",itemColorActive:"#0000",itemColorActiveHover:"#0000",itemColorDisabled:o,itemBorder:"1px solid #0000",itemBorderHover:"1px solid #0000",itemBorderPressed:"1px solid #0000",itemBorderActive:`1px solid ${n}`,itemBorderDisabled:`1px solid ${s}`,itemBorderRadius:l,itemFontSize:u,jumperTextColor:e,jumperTextColorDisabled:a})}};function j6(t,e,n){return function(t,e){return t.map((t=>{switch(t){case-2:return{type:"fastBackward",label:"fastBackward",active:!1};case-1:return{type:"fastForward",label:"fastForward",active:!1};default:return t===e?{type:"page",label:t,active:!0}:{type:"page",label:t,active:!1}}}))}(function(t,e,n=9){if(1===e)return[1];if(2===e)return[1,2];const r=e;let i=t,o=t;const a=(n-5)/2;o+=Math.ceil(a),o=Math.min(Math.max(o,1+n-3),r-2),i-=Math.floor(a),i=Math.max(Math.min(i,r-n+3),3);let s=!1,l=!1;i>3&&(s=!0),o<r-2&&(l=!0);const u=[];u.push(1),s?u.push(-2):r>=2&&u.push(2);for(let c=i;c<=o;++c)u.push(c);return l?u.push(-1):o===r-2&&u[u.length-1]!==r-1&&u.push(r-1),u[u.length-1]!==r&&u.push(r),u}(t,e,n),t)}var G6=AQ("pagination","\n display: flex;\n vertical-align: middle;\n font-size: var(--item-font-size);\n flex-wrap: nowrap;\n",[AQ("pagination-prefix","\n display: flex;\n align-items: center;\n margin: var(--prefix-margin);\n "),AQ("pagination-suffix","\n display: flex;\n align-items: center;\n margin: var(--suffix-margin);\n "),EQ("> *:not(:first-child)",{margin:"var(--item-margin)"}),AQ("select",{width:"var(--select-width)"}),EQ("&.transition-disabled",[AQ("pagination-item",{transition:"none!important"})]),AQ("pagination-quick-jumper","\n white-space: nowrap;\n display: flex;\n color: var(--jumper-text-color);\n transition: color .3s var(--bezier);\n align-items: center;\n font-size: var(--jumter-font-size);\n ",[AQ("input","\n margin: var(--input-margin);\n width: var(--input-width);\n ")]),AQ("pagination-item","\n position: relative;\n cursor: pointer;\n user-select: none;\n display: flex;\n align-items: center;\n justify-content: center;\n box-sizing: border-box;\n min-width: var(--item-size);\n height: var(--item-size);\n padding: var(--item-padding);\n background-color: var(--item-color);\n color: var(--item-text-color);\n border-radius: var(--item-border-radius);\n border: var(--item-border);\n fill: var(--button-icon-color);\n transition:\n color .3s var(--bezier),\n border-color .3s var(--bezier),\n background-color .3s var(--bezier),\n fill .3s var(--bezier);\n ",[TQ("button","\n background: var(--item-color);\n color: var(--button-icon-color);\n border: var(--button-border);\n ",[AQ("base-icon","\n font-size: var(--button-icon-size);\n ")]),PQ("disabled",[EQ("&:hover",{background:"var(--item-color-hover)",color:"var(--item-text-color-hover)",border:"var(--item-border-hover)"},[TQ("button",{background:"var(--button-color-hover)",border:"var(--button-border-hover)",color:"var(--button-icon-color-hover)"})]),EQ("&:active",{background:"var(--item-color-pressed)",color:"var(--item-text-color-pressed)",border:"var(--item-border-pressed)"},[TQ("button",{background:"var(--button-color-pressed)",border:"var(--button-border-pressed)",color:"var(--button-icon-color-pressed)"})]),TQ("active",{background:"var(--item-color-active)",color:"var(--item-text-color-active)",border:"var(--item-border-active)"},[EQ("&:hover",{background:"var(--item-color-active-hover)"})])]),TQ("disabled","\n cursor: not-allowed;\n color: var(--item-text-color-disabled);\n ",[TQ("active, button",{backgroundColor:"var(--item-color-disabled)",border:"var(--item-border-disabled)"})])]),TQ("disabled",{cursor:"not-allowed"},[AQ("pagination-quick-jumper",{color:"var(--jumper-text-color-disabled)"})])]);var U6=Ke({name:"Pagination",props:Object.assign(Object.assign({},LJ.props),{page:Number,defaultPage:{type:Number,default:1},itemCount:Number,pageCount:Number,defaultPageCount:{type:Number,default:1},showSizePicker:Boolean,pageSize:Number,defaultPageSize:Number,pageSizes:{type:Array,default:()=>[10]},showQuickJumper:Boolean,disabled:Boolean,pageSlot:{type:Number,default:9},prev:Function,next:Function,prefix:Function,suffix:Function,"onUpdate:page":[Function,Array],onUpdatePage:[Function,Array],"onUpdate:pageSize":[Function,Array],onUpdatePageSize:[Function,Array],onPageSizeChange:[Function,Array],onChange:[Function,Array]}),setup(t){const{NConfigProvider:e,mergedClsPrefixRef:n}=FJ(t),r=LJ("Pagination","Pagination",G6,z6,t,n),{localeRef:i}=t0("Pagination"),o=ge(null),a=ge(null),s=ge(""),l=ge(t.defaultPage),u=ge(t.defaultPageSize||t.pageSizes[0]),c=aJ(Se(t,"page"),l),d=aJ(Se(t,"pageSize"),u),h=Ee((()=>{const{itemCount:e}=t;if(void 0!==e)return Math.max(1,Math.ceil(e/d.value));const{pageCount:n}=t;return void 0!==n?n:1})),f=ge(!1),p=ge(!1),g=Ee((()=>{const e=i.value.selectionSuffix;return t.pageSizes.map((t=>({label:`${t} / ${e}`,value:t})))})),v=Ee((()=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.mergedComponentPropsRef.value)||void 0===t?void 0:t.Pagination)||void 0===n?void 0:n.inputSize)||"small"})),m=Ee((()=>{var t,n;return(null===(n=null===(t=null==e?void 0:e.mergedComponentPropsRef.value)||void 0===t?void 0:t.Pagination)||void 0===n?void 0:n.selectSize)||"small"})),y=Ee((()=>(c.value-1)*d.value)),b=Ee((()=>{const e=c.value*d.value-1,{itemCount:n}=t;return void 0!==n&&e>n?n:e})),x=()=>{ci((()=>{var t;const{value:e}=o;e&&(e.classList.add("transition-disabled"),null===(t=o.value)||void 0===t||t.offsetWidth,e.classList.remove("transition-disabled"))}))};function w(e){if(e===c.value)return;const{"onUpdate:page":n,onUpdatePage:r,onChange:i}=t;n&&pJ(n,e),r&&pJ(r,e),i&&pJ(i,e),l.value=e}return yi((()=>{c.value,d.value,x()})),{mergedClsPrefix:n,locale:i,selfRef:o,jumperRef:a,mergedPage:c,showFastBackward:p,showFastForward:f,pageItems:Ee((()=>j6(c.value,h.value,t.pageSlot))),jumperValue:s,pageSizeOptions:g,mergedPageSize:d,inputSize:v,selectSize:m,mergedTheme:r,mergedPageCount:h,startIndex:y,endIndex:b,handleJumperInput:function(t){s.value=t},handleBackwardClick:function(){if(t.disabled)return;w(Math.max(c.value-1,1))},handleForwardClick:function(){if(t.disabled)return;w(Math.min(c.value+1,h.value))},handlePageItemClick:function(e){if(!t.disabled)switch(e.type){case"page":w(e.label);break;case"fastBackward":!function(){if(t.disabled)return;w(Math.max(c.value-(t.pageSlot-4),1))}();break;case"fastForward":!function(){if(t.disabled)return;w(Math.min(c.value+(t.pageSlot-4),h.value))}()}},handleSizePickerChange:function(e){!function(e){if(e===d.value)return;const{"onUpdate:pageSize":n,onUpdatePageSize:r,onPageSizeChange:i}=t;n&&pJ(n,e),r&&pJ(r,e),i&&pJ(i,e),u.value=e,h.value<c.value&&w(h.value)}(e)},handleQuickJumperKeyUp:function(t){var e;if("Enter"===t.code||"NumpadEnter"===t.code){const t=parseInt(s.value);!Number.isNaN(t)&&t>=1&&t<=h.value&&(w(t),s.value="",null===(e=a.value)||void 0===e||e.blur())}},handlePageItemMouseEnter:function(e){if(!t.disabled){switch(e.type){case"fastBackward":p.value=!0;break;case"fastForward":f.value=!0;break;default:return}x()}},handlePageItemMouseLeave:function(e){if(!t.disabled){switch(e.type){case"fastBackward":p.value=!1;break;case"fastForward":f.value=!1;break;default:return}x()}},cssVars:Ee((()=>{const{self:{itemSize:t,itemPadding:e,itemMargin:n,inputWidth:i,selectWidth:o,inputMargin:a,selectMargin:s,buttonBorder:l,buttonBorderHover:u,buttonBorderPressed:c,buttonIconColor:d,buttonIconColorHover:h,buttonIconColorPressed:f,buttonIconSize:p,itemTextColor:g,itemTextColorHover:v,itemTextColorPressed:m,itemTextColorActive:y,itemTextColorDisabled:b,itemColor:x,itemColorHover:w,itemColorPressed:C,itemColorActive:S,itemColorActiveHover:k,itemColorDisabled:E,itemBorder:M,itemBorderHover:A,itemBorderPressed:_,itemBorderActive:T,itemBorderDisabled:P,itemBorderRadius:I,itemFontSize:D,jumperFontSize:O,jumperTextColor:R,jumperTextColorDisabled:L,prefixMargin:B,suffixMargin:F},common:{cubicBezierEaseInOut:N}}=r.value;return{"--prefix-margin":B,"--suffix-margin":F,"--item-font-size":D,"--select-width":o,"--select-margin":s,"--input-width":i,"--input-margin":a,"--item-size":t,"--item-text-color":g,"--item-text-color-disabled":b,"--item-text-color-hover":v,"--item-text-color-active":y,"--item-text-color-pressed":m,"--item-color":x,"--item-color-hover":w,"--item-color-disabled":E,"--item-color-active":S,"--item-color-active-hover":k,"--item-color-pressed":C,"--item-border":M,"--item-border-hover":A,"--item-border-disabled":P,"--item-border-active":T,"--item-border-pressed":_,"--item-padding":e,"--item-border-radius":I,"--bezier":N,"--jumper-font-size":O,"--jumper-text-color":R,"--jumper-text-color-disabled":L,"--item-margin":n,"--button-icon-size":p,"--button-icon-color":d,"--button-icon-color-hover":h,"--button-icon-color-pressed":f,"--button-border":l,"--button-border-hover":u,"--button-border-pressed":c}}))}},render(){const{$slots:t,mergedClsPrefix:e,disabled:n,cssVars:r,mergedPage:i,mergedPageCount:o,pageItems:a,showFastBackward:s,showFastForward:l,showSizePicker:u,showQuickJumper:c,mergedTheme:d,locale:h,inputSize:f,selectSize:p,mergedPageSize:g,pageSizeOptions:v,jumperValue:m,prev:y,next:b,prefix:x,suffix:w,handleJumperInput:C,handleSizePickerChange:S,handleBackwardClick:k,handlePageItemClick:E,handlePageItemMouseEnter:M,handlePageItemMouseLeave:A,handleForwardClick:_,handleQuickJumperKeyUp:T}=this,P=y||t.prev,I=b||t.next;return Ei("div",{ref:"selfRef",class:[`${e}-pagination`,n&&`${e}-pagination--disabled`],style:r},x||t.prefix?Ei("div",{class:`${e}-pagination-prefix`},(t.prefix?t.prefix:x)({page:i,pageSize:g,pageCount:o,startIndex:this.startIndex,endIndex:this.endIndex,itemCount:this.itemCount})):null,Ei("div",{class:[`${e}-pagination-item`,!P&&`${e}-pagination-item--button`,(i<=1||i>o||n)&&`${e}-pagination-item--disabled`],onClick:k},P?P({page:i,pageSize:g,pageCount:o,startIndex:this.startIndex,endIndex:this.endIndex,itemCount:this.itemCount}):Ei(T0,{clsPrefix:e},{default:()=>Ei(i0,null)})),a.map(((t,r)=>Ei("div",{key:r,class:[`${e}-pagination-item`,{[`${e}-pagination-item--active`]:t.active,[`${e}-pagination-item--disabled`]:n}],onClick:()=>E(t),onMouseenter:()=>M(t),onMouseleave:()=>A(t)},"page"===t.type?t.label:null,"fastBackward"===t.type?Ei(T0,{clsPrefix:e},s?{default:()=>Ei(f0,null)}:{default:()=>Ei(y0,null)}):null,"fastForward"===t.type?Ei(T0,{clsPrefix:e},l?{default:()=>Ei(p0,null)}:{default:()=>Ei(y0,null)}):null))),Ei("div",{class:[`${e}-pagination-item`,!I&&`${e}-pagination-item--button`,{[`${e}-pagination-item--disabled`]:i<1||i>=o||n}],onClick:_},I?I({page:i,pageSize:g,pageCount:o,itemCount:this.itemCount,startIndex:this.startIndex,endIndex:this.endIndex}):Ei(T0,{clsPrefix:e},{default:()=>Ei(v0,null)})),u?Ei(F6,{size:p,placeholder:"",options:v,value:g,disabled:n,theme:d.peers.Select,themeOverrides:d.peerOverrides.Select,onUpdateValue:S}):null,c?Ei("div",{class:`${e}-pagination-quick-jumper`},h.goto,Ei(e5,{ref:"jumperRef",value:m,onUpdateValue:C,size:f,placeholder:"",disabled:n,theme:d.peers.Input,themeOverrides:d.peerOverrides.Input,onKeyup:T})):null,w||t.suffix?Ei("div",{class:`${e}-pagination-suffix`},(t.suffix?t.suffix:w)({page:i,pageSize:g,pageCount:o,startIndex:this.startIndex,endIndex:this.endIndex,itemCount:this.itemCount})):null)}}),$6={padding:"8px 14px"};var V6={name:"Tooltip",common:K2,peers:{Popover:x3},self:t=>{const{borderRadius:e,boxShadow2:n,baseColor:r}=t;return Object.assign(Object.assign({},$6),{borderRadius:e,boxShadow:n,color:"rgba(0, 0, 0, .85)",textColor:r})}};var W6={name:"Ellipsis",common:K2,peers:{Tooltip:V6}},H6={radioSizeSmall:"14px",radioSizeMedium:"16px",radioSizeLarge:"18px",labelPadding:"0 8px"};var Y6={name:"Radio",common:K2,self:t=>{const{borderColor:e,primaryColor:n,baseColor:r,textColorDisabled:i,inputColorDisabled:o,textColor2:a,opacityDisabled:s,borderRadius:l,fontSizeSmall:u,fontSizeMedium:c,fontSizeLarge:d,heightSmall:h,heightMedium:f,heightLarge:p}=t;return Object.assign(Object.assign({},H6),{buttonHeightSmall:h,buttonHeightMedium:f,buttonHeightLarge:p,fontSizeSmall:u,fontSizeMedium:c,fontSizeLarge:d,boxShadow:`inset 0 0 0 1px ${e}`,boxShadowActive:`inset 0 0 0 1px ${n}`,boxShadowFocus:`inset 0 0 0 1px ${n}, 0 0 0 2px ${Eq(n,{alpha:.2})}`,boxShadowHover:`inset 0 0 0 1px ${n}`,boxShadowDisabled:`inset 0 0 0 1px ${e}`,color:r,colorDisabled:o,textColor:a,textColorDisabled:i,dotColorActive:n,dotColorDisabled:e,buttonBorderColor:e,buttonBorderColorActive:n,buttonBorderColorHover:e,buttonColor:r,buttonColorActive:r,buttonTextColor:a,buttonTextColorActive:n,buttonTextColorHover:n,opacityDisabled:s,buttonBoxShadowFocus:`inset 0 0 0 1px ${n}, 0 0 0 2px ${Eq(n,{alpha:.3})}`,buttonBoxShadowHover:"inset 0 0 0 1px #0000",buttonBoxShadow:"inset 0 0 0 1px #0000",buttonBorderRadius:l})}},X6={thPaddingSmall:"8px",thPaddingMedium:"12px",thPaddingLarge:"12px",tdPaddingSmall:"8px",tdPaddingMedium:"12px",tdPaddingLarge:"12px",sorterSize:"15px",filterSize:"15px",paginationMargin:"12px 0 0 0",emptyPadding:"16px 0",actionPadding:"8px 12px",actionButtonMargin:"0 8px 0 0"};var q6={name:"DataTable",common:K2,peers:{Button:u5,Checkbox:_6,Radio:Y6,Pagination:z6,Scrollbar:e3,Empty:Q2,Popover:x3,Ellipsis:W6},self:t=>{const{cardColor:e,modalColor:n,popoverColor:r,textColor2:i,textColor1:o,tableHeaderColor:a,tableColorHover:s,iconColor:l,primaryColor:u,fontWeightStrong:c,borderRadius:d,lineHeight:h,fontSizeSmall:f,fontSizeMedium:p,fontSizeLarge:g,dividerColor:v,heightSmall:m,opacityDisabled:y}=t;return Object.assign(Object.assign({},X6),{actionDividerColor:v,lineHeight:h,borderRadius:d,fontSizeSmall:f,fontSizeMedium:p,fontSizeLarge:g,borderColor:kq(e,v),tdColorHover:kq(e,s),thColor:kq(e,a),thColorHover:kq(kq(e,a),s),tdColor:e,tdTextColor:i,thTextColor:o,thFontWeight:c,thButtonColorHover:s,thIconColor:l,thIconColorActive:u,borderColorModal:kq(n,v),tdColorHoverModal:kq(n,s),thColorModal:kq(n,a),thColorHoverModal:kq(kq(n,a),s),tdColorModal:n,borderColorPopover:kq(r,v),tdColorHoverPopover:kq(r,s),thColorPopover:kq(r,a),thColorHoverPopover:kq(kq(r,a),s),tdColorPopover:r,boxShadowBefore:"inset -12px 0 8px -12px rgba(0, 0, 0, .18)",boxShadowAfter:"inset 12px 0 8px -12px rgba(0, 0, 0, .18)",loadingColor:u,loadingSize:m,opacityLoading:y})}};var K6=Ke({name:"Tooltip",props:Object.assign(Object.assign({},P3),LJ.props),setup(t){const e=LJ("Tooltip","Tooltip",void 0,V6,t),n=ge(null),r={syncPosition(){n.value.syncPosition()},setShow(t){n.value.setShow(t)}};return Object.assign(Object.assign({},r),{popoverRef:n,mergedTheme:e,popoverThemeOverrides:Ee((()=>e.value.self))})},render(){const{mergedTheme:t,internalExtraClass:e}=this;return Ei(I3,Object.assign(Object.assign({},this.$props),{theme:t.peers.Popover,themeOverrides:t.peerOverrides.Popover,builtinThemeOverrides:this.popoverThemeOverrides,internalExtraClass:e.concat("tooltip"),ref:"popoverRef"}),this.$slots)}}),Z6=AQ("ellipsis",{overflow:"hidden"},[PQ("line-clamp","\n white-space: nowrap;\n display: inline-block;\n vertical-align: bottom;\n max-width: 100%;\n "),TQ("line-clamp","\n display: -webkit-inline-box;\n -webkit-box-orient: vertical;\n ")]);function Q6(t){return`${t}-ellipsis--line-clamp`}var J6=Ke({name:"Ellipsis",inheritAttrs:!1,props:Object.assign(Object.assign({},LJ.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}}),setup(t,{slots:e,attrs:n}){const{mergedClsPrefixRef:r}=FJ(t),i=LJ("Ellipsis","ellipsis",Z6,W6,t,r),o=ge(null),a=ge(null),s=ge(!1),l=Ee((()=>{const{lineClamp:e}=t,{value:n}=s,r="click"===t.expandTrigger?"pointer":"";return void 0!==e?{cursor:r,textOverflow:"","-webkit-line-clamp":n?"":e}:{cursor:r,textOverflow:n?"":"ellipsis","-webkit-line-clamp":""}}));const u=Ee((()=>"click"===t.expandTrigger?()=>{var t;const{value:e}=s;e&&(null===(t=a.value)||void 0===t||t.setShow(!1)),s.value=!e}:void 0));return{mergedTheme:i,triggerRef:o,tooltipRef:a,handleClick:u,renderTrigger:()=>Ei("span",Object.assign({},Tr(n,{class:[`${r.value}-ellipsis`,void 0!==t.lineClamp?Q6(r.value):void 0],style:l.value}),{ref:"triggerRef",onClick:u.value}),e),getTooltipDisabled:function(){const{value:e}=s;if(e)return!0;const{value:n}=o;if(n){const{lineClamp:e}=t;return function(e){if(!e)return;const n=l.value,i=Q6(r.value);void 0!==t.lineClamp?e.classList.contains(i)||e.classList.add(i):e.classList.contains(i)&&e.classList.remove(i);for(const t in n)e.style[t]!==n[t]&&(e.style[t]=n[t])}(n),void 0!==e?n.scrollHeight<=n.offsetHeight:n.scrollWidth<=n.offsetWidth}return!1}}},render(){var t;const{tooltip:e,renderTrigger:n,$slots:r}=this;if(e){const{mergedTheme:i}=this;return Ei(K6,Object.assign({ref:"tooltipRef",placement:"top"},e,{getDisabled:this.getTooltipDisabled,theme:i.peers.Tooltip,themeOverrides:i.peerOverrides.Tooltip}),{trigger:n,default:null!==(t=r.tooltip)&&void 0!==t?t:r.default})}return n()}}),t8=Ke({name:"DataTableRenderSorter",props:{render:{type:Function,required:!0},order:{type:[String,Boolean],default:!1}},render(){const{render:t,order:e}=this;return t({order:e})}});const e8=Symbol("dataTable");var n8=Ke({name:"SortIcon",props:{column:{type:Object,required:!0}},setup(t){const{NConfigProvider:e}=FJ(),{mergedSortStateRef:n,mergedClsPrefixRef:r}=je(e8),i=n,o=Ee((()=>{const{value:e}=i;return!!e&&e.columnKey===t.column.key})),a=Ee((()=>{const{value:t}=i;return!!t&&(!!o.value&&t.order)})),s=Ee((()=>{var n,r;return(null===(r=null===(n=null==e?void 0:e.mergedComponentPropsRef.value)||void 0===n?void 0:n.DataTable)||void 0===r?void 0:r.renderSorter)||t.column.renderSorter}));return{mergedClsPrefix:r,active:o,mergedSortOrder:a,mergedRenderSorter:s}},render(){const{mergedRenderSorter:t,mergedSortOrder:e,mergedClsPrefix:n}=this;return t?Ei(t8,{render:t,order:e}):Ei("span",{class:[`${n}-data-table-sorter`,{[`${n}-data-table-sorter--asc`]:"ascend"===e,[`${n}-data-table-sorter--desc`]:"descend"===e}]},Ei(T0,{clsPrefix:n},{default:()=>Ei(n0,null)}))}}),r8=Ke({name:"DataTableRenderFilter",props:{render:{type:Function,required:!0},active:{type:Boolean,default:!1},show:{type:Boolean,default:!1}},render(){const{render:t,active:e,show:n}=this;return t({active:e,show:n})}});const i8={name:String,value:{type:[String,Number],default:"on"},checked:{type:Boolean,default:void 0},defaultChecked:Boolean,disabled:{type:Boolean,default:void 0},size:String,"onUpdate:checked":[Function,Array],checkedValue:{type:Boolean,validator:()=>(mJ("radio","`checked-value` is deprecated, please use `checked` instead."),!0),default:void 0}},o8=Symbol("radioGroup");function a8(t){const e=Dq(t,{mergedSize(e){const{size:n}=t;if(void 0!==n)return n;if(a){const{mergedSizeRef:{value:t}}=a;if(void 0!==t)return t}return e?e.mergedSize.value:"medium"},mergedDisabled:e=>!!t.disabled||(!!(null==a?void 0:a.disabledRef.value)||!!(null==e?void 0:e.disabled.value))}),{mergedSizeRef:n,mergedDisabledRef:r}=e,i=ge(null),o=ge(null),a=je(o8,null),s=ge(t.defaultChecked),l=aJ(Se(t,"checked"),s),u=zQ((()=>a?a.valueRef.value===t.value:l.value)),c=zQ((()=>{const{name:e}=t;return void 0!==e?e:a?a.nameRef.value:void 0})),d=ge(!1);function h(){r.value||u.value||function(){if(a){const{doUpdateValue:e}=a,{value:n}=t;pJ(e,n)}else{const{"onUpdate:checked":n}=t,{nTriggerFormInput:r,nTriggerFormChange:i}=e;n&&pJ(n,!0),r(),i(),s.value=!0}}()}return{mergedClsPrefix:a?a.mergedClsPrefixRef:FJ(t).mergedClsPrefixRef,inputRef:i,labelRef:o,mergedName:c,mergedDisabled:r,uncontrolledChecked:s,renderSafeChecked:u,focus:d,mergedSize:n,handleRadioInputChange:function(){h()},handleRadioInputBlur:function(){d.value=!1},handleRadioInputFocus:function(){d.value=!0},handleKeyUp:function(t){var e;switch(t.code){case"Enter":case"NumpadEnter":null===(e=i.value)||void 0===e||e.click()}},handleMouseDown:function(){r.value||setTimeout((()=>{var t,e;(null===(t=o.value)||void 0===t?void 0:t.contains(document.activeElement))||null===(e=i.value)||void 0===e||e.focus()}),0)},handleClick:function(){var t;null===(t=i.value)||void 0===t||t.click()}}}a8.props=i8;var s8=AQ("radio","\n line-height: 1;\n outline: none;\n position: relative;\n user-select: none;\n display: inline-flex;\n vertical-align: middle;\n align-items: center;\n font-size: var(--font-size);\n",[_Q("dot","\n height: var(--radio-size);\n width: var(--radio-size);\n "),_Q("radio-input","\n border: 0;\n width: 0;\n height: 0;\n opacity: 0;\n margin: 0;\n "),_Q("dot","\n background: var(--color);\n box-shadow: var(--box-shadow);\n transition:\n background-color .3s var(--bezier),\n box-shadow .3s var(--bezier);\n position: relative;\n border-radius: 50%;\n ",[EQ("&::before",'\n content: "";\n opacity: 0;\n position: absolute;\n left: 4px;\n top: 4px;\n height: calc(100% - 8px);\n width: calc(100% - 8px);\n border-radius: 50%;\n transform: scale(.8);\n background: var(--dot-color-active);\n transition: \n opacity .3s var(--bezier),\n background-color .3s var(--bezier),\n transform .3s var(--bezier);\n '),TQ("checked",{boxShadow:"var(--box-shadow-active)"},[EQ("&::before","\n opacity: 1;\n transform: scale(1);\n ")])]),_Q("label","\n color: var(--text-color);\n padding: var(--label-padding);\n display: inline-block;\n white-space: nowrap;\n transition: color .3s var(--bezier);\n "),PQ("disabled","\n cursor: pointer;\n ",[EQ("&:hover",[_Q("dot",{boxShadow:"var(--box-shadow-hover)"})]),TQ("focus",[EQ("&:not(:active)",[_Q("dot",{boxShadow:"var(--box-shadow-focus)"})])])]),TQ("disabled","\n cursor: not-allowed;\n ",[_Q("dot",{boxShadow:"var(--box-shadow-disabled)",backgroundColor:"var(--color-disabled)"},[EQ("&::before",{backgroundColor:"var(--dot-color-disabled)"}),TQ("checked","\n transform: scale(1);\n opacity: 1;\n ")]),_Q("label",{color:"var(--text-color-disabled)"})])]),l8=Ke({name:"Radio",props:Object.assign(Object.assign({},LJ.props),a8.props),setup(t){const e=a8(t),n=LJ("Radio","Radio",s8,Y6,t,e.mergedClsPrefix);return Object.assign(e,{cssVars:Ee((()=>{const{mergedSize:{value:t}}=e,{common:{cubicBezierEaseInOut:r},self:{boxShadow:i,boxShadowActive:o,boxShadowDisabled:a,boxShadowFocus:s,boxShadowHover:l,color:u,colorDisabled:c,textColor:d,textColorDisabled:h,dotColorActive:f,dotColorDisabled:p,labelPadding:g,[CQ("fontSize",t)]:v,[CQ("radioSize",t)]:m}}=n.value;return{"--bezier":r,"--box-shadow":i,"--box-shadow-active":o,"--box-shadow-disabled":a,"--box-shadow-focus":s,"--box-shadow-hover":l,"--color":u,"--color-disabled":c,"--dot-color-active":f,"--dot-color-disabled":p,"--font-size":v,"--radio-size":m,"--text-color":d,"--text-color-disabled":h,"--label-padding":g}}))})},render(){const{$slots:t,mergedClsPrefix:e}=this;return Ei("div",{class:[`${e}-radio`,{[`${e}-radio--disabled`]:this.mergedDisabled,[`${e}-radio--checked`]:this.renderSafeChecked,[`${e}-radio--focus`]:this.focus}],style:this.cssVars,onKeyup:this.handleKeyUp,onClick:this.handleClick,onMousedown:this.handleMouseDown},Ei("input",{ref:"inputRef",type:"radio",class:`${e}-radio__radio-input`,value:this.value,name:this.mergedName,checked:this.renderSafeChecked,disabled:this.mergedDisabled,onChange:this.handleRadioInputChange,onFocus:this.handleRadioInputFocus,onBlur:this.handleRadioInputBlur}),Ei("div",{class:[`${e}-radio__dot`,this.renderSafeChecked&&`${e}-radio__dot--checked`]}),t.default?Ei("div",{ref:"labelRef",class:`${e}-radio__label`},t.default()):null)}}),u8=AQ("radio-group","\n display: inline-block;\n font-size: var(--font-size);\n",[_Q("splitor","\n display: inline-block;\n vertical-align: bottom;\n width: 1px;\n transition:\n background-color .3s var(--bezier),\n opacity .3s var(--bezier);\n background: var(--button-border-color);\n ",[TQ("checked",{backgroundColor:"var(--button-border-color-active)"}),TQ("disabled",{opacity:"var(--opacity-disabled)"})]),TQ("button-group","\n white-space: nowrap;\n height: var(--height);\n line-height: var(--height);\n ",[AQ("radio-button",{height:"var(--height)",lineHeight:"var(--height)"}),_Q("splitor",{height:"var(--height)"})]),AQ("radio-button","\n vertical-align: bottom;\n outline: none;\n position: relative;\n user-select: none;\n display: inline-block;\n box-sizing: border-box;\n padding-left: 14px;\n padding-right: 14px;\n white-space: nowrap;\n transition:\n background-color .3s var(--bezier),\n opacity .3s var(--bezier),\n border-color .3s var(--bezier),\n color .3s var(--bezier);\n color: var(--button-text-color);\n border-top: 1px solid var(--button-border-color);\n border-bottom: 1px solid var(--button-border-color);\n ",[_Q("radio-input","\n border: 0;\n width: 0;\n height: 0;\n opacity: 0;\n margin: 0;\n "),_Q("state-border","\n pointer-events: none;\n position: absolute;\n box-shadow: var(--button-box-shadow);\n transition: box-shadow .3s var(--bezier);\n left: -1px;\n bottom: -1px;\n right: -1px;\n top: -1px;\n "),EQ("&:first-child","\n border-top-left-radius: var(--button-border-radius);\n border-bottom-left-radius: var(--button-border-radius);\n border-left: 1px solid var(--button-border-color);\n ",[_Q("state-border","\n border-top-left-radius: var(--button-border-radius);\n border-bottom-left-radius: var(--button-border-radius);\n ")]),EQ("&:last-child","\n border-top-right-radius: var(--button-border-radius);\n border-bottom-right-radius: var(--button-border-radius);\n border-right: 1px solid var(--button-border-color);\n ",[_Q("state-border","\n border-top-right-radius: var(--button-border-radius);\n border-bottom-right-radius: var(--button-border-radius);\n ")]),PQ("disabled","\n cursor: pointer;\n ",[EQ("&:hover",[_Q("state-border","\n transition: box-shadow .3s var(--bezier);\n box-shadow: var(--button-box-shadow-hover);\n "),PQ("checked",{color:"var(--button-text-color-hover)"})]),TQ("focus",[EQ("&:not(:active)",[_Q("state-border",{boxShadow:"var(--button-box-shadow-focus)"})])])]),TQ("checked","\n background: var(--button-color-active);\n color: var(--button-text-color-active);\n border-color: var(--button-border-color-active);\n "),TQ("disabled","\n cursor: not-allowed;\n opacity: var(--opacity-disabled);\n ")])]);var c8=Ke({name:"RadioGroup",props:Object.assign(Object.assign({},LJ.props),{name:String,value:[String,Number],defaultValue:{type:[String,Number],default:null},size:String,disabled:{type:Boolean,default:void 0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),setup(t){const e=ge(null),{mergedSizeRef:n,mergedDisabledRef:r,nTriggerFormChange:i,nTriggerFormInput:o,nTriggerFormBlur:a,nTriggerFormFocus:s}=Dq(t),{mergedClsPrefixRef:l}=FJ(t),u=LJ("Radio","RadioGroup",u8,Y6,t,l),c=ge(t.defaultValue),d=aJ(Se(t,"value"),c);return ze(o8,{mergedClsPrefixRef:l,nameRef:Se(t,"name"),valueRef:d,disabledRef:r,mergedSizeRef:n,doUpdateValue:function(e){const{onUpdateValue:n,"onUpdate:value":r}=t;n&&pJ(n,e),r&&pJ(r,e),c.value=e,i(),o()}}),{selfElRef:e,mergedClsPrefix:l,mergedValue:d,handleFocusout:function(t){const{value:n}=e;n&&(n.contains(t.relatedTarget)||a())},handleFocusin:function(t){const{value:n}=e;n&&(n.contains(t.relatedTarget)||s())},cssVars:Ee((()=>{const{value:t}=n,{common:{cubicBezierEaseInOut:e},self:{buttonBorderColor:r,buttonBorderColorActive:i,buttonBorderRadius:o,buttonBoxShadow:a,buttonBoxShadowFocus:s,buttonBoxShadowHover:l,buttonColorActive:c,buttonTextColor:d,buttonTextColorActive:h,buttonTextColorHover:f,opacityDisabled:p,[CQ("buttonHeight",t)]:g,[CQ("fontSize",t)]:v}}=u.value;return{"--font-size":v,"--bezier":e,"--button-border-color":r,"--button-border-color-active":i,"--button-border-radius":o,"--button-box-shadow":a,"--button-box-shadow-focus":s,"--button-box-shadow-hover":l,"--button-color-active":c,"--button-text-color":d,"--button-text-color-hover":f,"--button-text-color-active":h,"--height":g,"--opacity-disabled":p}}))}},render(){const{mergedValue:t,mergedClsPrefix:e,handleFocusin:n,handleFocusout:r}=this,{children:i,isButtonGroup:o}=function(t,e,n){var r;const i=[];let o=!1;for(let a=0;a<t.length;++a){const s=t[a],l=null===(r=s.type)||void 0===r?void 0:r.name;"RadioButton"===l&&(o=!0);const u=s.props;if("RadioButton"===l)if(0===a)i.push(s);else{const t=i[i.length-1].props,r=e===t.value,o=t.disabled,a=e===u.value,l=u.disabled,c={[`${n}-radio-group__splitor--disabled`]:o,[`${n}-radio-group__splitor--checked`]:r},d={[`${n}-radio-group__splitor--disabled`]:l,[`${n}-radio-group__splitor--checked`]:a},h=(r?2:0)+(o?0:1)<(a?2:0)+(l?0:1)?d:c;i.push(Ei("div",{class:[`${n}-radio-group__splitor`,h]}),s)}else i.push(s)}return{children:i,isButtonGroup:o}}(fJ(dJ(this)),t,e);return Ei("div",{onFocusin:n,onFocusout:r,ref:"selfElRef",class:[`${e}-radio-group`,o&&`${e}-radio-group--button-group`],style:this.cssVars},i)}});function d8(t){return"selection"===t.type||"expand"===t.type?40:"children"in t?void 0:t.width}function h8(t){return"selection"===t.type?"__n_selection__":"expand"===t.type?"__n_expand__":t.key}function f8(t){return t&&"object"==typeof t?Object.assign({},t):t}function p8(t){return{width:lq(d8(t))}}function g8(t){return void 0!==t.filterOptionValues||void 0===t.filterOptionValue&&void 0!==t.defaultFilterOptionValues}function v8(t){return!("children"in t)&&!!t.sorter}function m8(t){return!("children"in t)&&!(!t.filter||!t.filterOptions&&!t.renderFilterMenu)}function y8(t){return t?"descend"===t&&"ascend":"descend"}var b8=Ke({name:"DataTableFilterMenu",props:{column:{type:Object,required:!0},radioGroupName:{type:String,required:!0},multiple:{type:Boolean,required:!0},value:{type:[Array,String,Number],default:null},options:{type:Array,required:!0},onConfirm:{type:Function,required:!0},onClear:{type:Function,required:!0},onChange:{type:Function,required:!0}},setup(t){const{mergedClsPrefixRef:e,mergedThemeRef:n,localeRef:r}=je(e8),i=ge(t.value);function o(e){t.onChange(e)}return{mergedClsPrefix:e,mergedTheme:n,locale:r,checkboxGroupValue:Ee((()=>{const{value:t}=i;return Array.isArray(t)?t:null})),radioGroupValue:Ee((()=>{const{value:e}=i;return g8(t.column)?Array.isArray(e)&&e.length&&e[0]||null:Array.isArray(e)?null:e})),handleChange:function(e){t.multiple&&Array.isArray(e)?i.value=e:g8(t.column)&&!Array.isArray(e)?i.value=[e]:i.value=e},handleConfirmClick:function(){o(i.value),t.onConfirm()},handleClearClick:function(){t.multiple||g8(t.column)?o([]):o(null),t.onClear()}}},render(){const{mergedTheme:t,locale:e,mergedClsPrefix:n}=this;return Ei("div",{class:`${n}-data-table-filter-menu`},Ei(o3,null,{default:()=>{const{checkboxGroupValue:e,handleChange:r}=this;return this.multiple?Ei(D6,{value:e,class:`${n}-data-table-filter-menu__group`,onUpdateValue:r},{default:()=>this.options.map((e=>Ei(R6,{key:e.value,theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,value:e.value},{default:()=>e.label})))}):Ei(c8,{name:this.radioGroupName,class:`${n}-data-table-filter-menu__group`,value:this.radioGroupValue,onUpdateValue:this.handleChange},{default:()=>this.options.map((e=>Ei(l8,{key:e.value,value:e.value,theme:t.peers.Radio,themeOverrides:t.peerOverrides.Radio},{default:()=>e.label})))})}}),Ei("div",{class:`${n}-data-table-filter-menu__action`},Ei(y5,{size:"tiny",theme:t.peers.Button,themeOverrides:t.peerOverrides.Button,onClick:this.handleClearClick},{default:()=>e.clear}),Ei(y5,{theme:t.peers.Button,themeOverrides:t.peerOverrides.Button,type:"primary",size:"tiny",onClick:this.handleConfirmClick},{default:()=>e.confirm})))}});var x8=Ke({name:"DataTableFilterButton",props:{column:{type:Object,required:!0},options:{type:Array,default:()=>[]}},setup(t){const{NConfigProvider:e}=FJ(),{mergedThemeRef:n,mergedClsPrefixRef:r,mergedFilterStateRef:i,filterMenuCssVarsRef:o,doUpdateFilters:a}=je(e8),s=ge(!1),l=i,u=Ee((()=>!1!==t.column.filterMultiple)),c=Ee((()=>{const e=l.value[t.column.key];if(void 0===e){const{value:t}=u;return t?[]:null}return e})),d=Ee((()=>{const{value:t}=c;return Array.isArray(t)?t.length>0:null!==t})),h=Ee((()=>{var n,r;return(null===(r=null===(n=null==e?void 0:e.mergedComponentPropsRef.value)||void 0===n?void 0:n.DataTable)||void 0===r?void 0:r.renderFilter)||t.column.renderFilter}));return{mergedTheme:n,mergedClsPrefix:r,active:d,showPopover:s,mergedRenderFilter:h,filterMultiple:u,mergedFilterValue:c,filterMenuCssVars:o,handleFilterChange:function(e){const n=function(t,e,n){const r=Object.assign({},t);return r[e]=n,r}(l.value,t.column.key,e);a(n,t.column)},handleFilterMenuConfirm:function(){s.value=!1},handleFilterMenuCancel:function(){s.value=!1}}},render(){const{mergedTheme:t,mergedClsPrefix:e,handleFilterMenuCancel:n}=this;return Ei(I3,{show:this.showPopover,onUpdateShow:t=>this.showPopover=t,trigger:"click",theme:t.peers.Popover,themeOverrides:t.peerOverrides.Popover,placement:"bottom",style:{padding:0}},{trigger:()=>{const{mergedRenderFilter:t}=this;if(t)return Ei(r8,{"data-data-table-filter":!0,render:t,active:this.active,show:this.showPopover});const{renderFilterIcon:n}=this.column;return Ei("div",{"data-data-table-filter":!0,class:[`${e}-data-table-filter`,{[`${e}-data-table-filter--active`]:this.active,[`${e}-data-table-filter--show`]:this.showPopover}]},n?n({active:this.active,show:this.showPopover}):Ei(T0,{clsPrefix:e},{default:()=>Ei(g0,null)}))},default:()=>{const{renderFilterMenu:t}=this.column;return t?t({hide:n}):Ei(b8,{style:this.filterMenuCssVars,radioGroupName:String(this.column.key),multiple:this.filterMultiple,value:this.mergedFilterValue,options:this.options,column:this.column,onChange:this.handleFilterChange,onClear:this.handleFilterMenuCancel,onConfirm:this.handleFilterMenuConfirm})}})}}),w8={padding:"4px 0",optionIconSizeSmall:"14px",optionIconSizeMedium:"16px",optionIconSizeLarge:"16px",optionIconSizeHuge:"18px",optionSuffixWidthSmall:"14px",optionSuffixWidthMedium:"14px",optionSuffixWidthLarge:"16px",optionSuffixWidthHuge:"16px",optionIconSuffixWidthSmall:"32px",optionIconSuffixWidthMedium:"32px",optionIconSuffixWidthLarge:"36px",optionIconSuffixWidthHuge:"36px",optionPrefixWidthSmall:"14px",optionPrefixWidthMedium:"14px",optionPrefixWidthLarge:"16px",optionPrefixWidthHuge:"16px",optionIconPrefixWidthSmall:"36px",optionIconPrefixWidthMedium:"36px",optionIconPrefixWidthLarge:"40px",optionIconPrefixWidthHuge:"40px"};var C8={name:"Dropdown",common:K2,peers:{Popover:x3},self:t=>{const{primaryColor:e,textColor2:n,dividerColor:r,hoverColor:i,popoverColor:o,invertedColor:a,borderRadius:s,fontSizeSmall:l,fontSizeMedium:u,fontSizeLarge:c,fontSizeHuge:d,heightSmall:h,heightMedium:f,heightLarge:p,heightHuge:g,textColor3:v,opacityDisabled:m}=t;return Object.assign(Object.assign({},w8),{optionHeightSmall:h,optionHeightMedium:f,optionHeightLarge:p,optionHeightHuge:g,borderRadius:s,fontSizeSmall:l,fontSizeMedium:u,fontSizeLarge:c,fontSizeHuge:d,optionTextColor:n,optionTextColorHover:n,optionTextColorActive:e,optionTextColorChildActive:e,color:o,dividerColor:r,suffixColor:n,prefixColor:n,optionColorHover:i,optionColorActive:Eq(e,{alpha:.1}),groupHeaderTextColor:v,optionTextColorInverted:"#BBB",optionTextColorHoverInverted:"#FFF",optionTextColorActiveInverted:"#FFF",optionTextColorChildActiveInverted:"#FFF",colorInverted:a,dividerColorInverted:"#BBB",suffixColorInverted:"#BBB",prefixColorInverted:"#BBB",optionColorHoverInverted:e,optionColorActiveInverted:e,groupHeaderTextColorInverted:"#AAA",optionOpacityDisabled:m})}};var S8={name:"Icon",common:K2,self:t=>{const{textColorBase:e,opacity1:n,opacity2:r,opacity3:i,opacity4:o,opacity5:a}=t;return{color:e,opacity1Depth:n,opacity2Depth:r,opacity3Depth:i,opacity4Depth:o,opacity5Depth:a}}},k8=AQ("icon","\n height: 1em;\n width: 1em;\n line-height: 1em;\n text-align: center;\n display: inline-block;\n position: relative;\n fill: currentColor;\n transform: translateZ(0);\n",[TQ("color-transition",{transition:"color .3s var(--bezier)"}),TQ("depth",{color:"var(--color)"},[EQ("svg",{opacity:"var(--opacity)",transition:"opacity .3s var(--bezier)"})]),EQ("svg",{height:"1em",width:"1em"})]),E8=Ke({_n_icon__:!0,name:"Icon",inheritAttrs:!1,props:Object.assign(Object.assign({},LJ.props),{depth:[String,Number],size:[Number,String],color:String}),setup(t){const{mergedClsPrefixRef:e}=FJ(t),n=LJ("Icon","Icon",k8,S8,t,e);return{mergedClsPrefix:e,mergedStyle:Ee((()=>{const{size:e,color:n}=t;return{fontSize:kJ(e),color:n}})),cssVars:Ee((()=>{const{depth:e}=t,{common:{cubicBezierEaseInOut:r},self:i}=n.value;if(void 0!==e){const{color:t,[`opacity${e}Depth`]:n}=i;return{"--bezier":r,"--color":t,"--opacity":n}}return{"--bezier":r}}))}},render(){var t;const{$parent:e,depth:n,mergedClsPrefix:r}=this;return(null===(t=null==e?void 0:e.$options)||void 0===t?void 0:t._n_icon__)&&mJ("icon","don't wrap `n-icon` inside `n-icon`"),Ei("i",Tr(this.$attrs,{role:"img",class:[`${r}-icon`,{[`${r}-icon--depth`]:n,[`${r}-icon--color-transition`]:void 0!==n}],style:Object.assign(this.cssVars,this.mergedStyle)}),this.$slots)}});function M8(t){return"submenu"===t.type||void 0===t.type&&void 0!==t.children}function A8(t){return"group"===t.type}function _8(t){return"divider"===t.type}const T8=Symbol("dropdown-option");var P8=Ke({name:"DropdownOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null},placement:{type:String,default:"right-start"},props:Object},setup(t){const e=je(N8),{hoverKeyRef:n,keyboardKeyRef:r,lastToggledSubmenuKeyRef:i,pendingKeyPathRef:o,activeKeyPathRef:a,animatedRef:s,mergedShowRef:l,renderLabelRef:u,renderIconRef:c}=e,d=je(T8,null),h=je(R8),f=Ee((()=>t.tmNode.rawNode)),p=Ee((()=>M8(t.tmNode.rawNode))),g=Ee((()=>{const{disabled:e}=t.tmNode;return e})),v=function(t,e,n){if(!e)return t;const r=ge(t.value);let i=null;return xi(t,(t=>{null!==i&&window.clearTimeout(i),!0===t?n&&!n.value?r.value=!0:i=window.setTimeout((()=>{r.value=!0}),e):r.value=!1})),r}(Ee((()=>{if(!p.value)return!1;const{key:e,disabled:a}=t.tmNode;if(a)return!1;const{value:s}=n,{value:l}=r,{value:u}=i,{value:c}=o;return null!==s?c.includes(e):null!==l?c.includes(e)&&c[c.length-1]!==e:null!==u&&c.includes(e)})),300,Ee((()=>null===r.value&&!s.value))),m=Ee((()=>!!(null==d?void 0:d.enteringSubmenuRef.value))),y=ge(!1);function b(){const{parentKey:e,tmNode:o}=t;l.value&&(i.value=e,r.value=null,n.value=o.key)}return ze(T8,{enteringSubmenuRef:y}),{renderLabel:u,renderIcon:c,siblingHasIcon:h.showIconRef,siblingHasSubmenu:h.hasSubmenuRef,animated:s,mergedShowSubmenu:Ee((()=>v.value&&!m.value)),rawNode:f,hasSubmenu:p,pending:zQ((()=>{const{value:e}=o,{key:n}=t.tmNode;return e.includes(n)})),childActive:zQ((()=>{const{value:e}=a,{key:n}=t.tmNode,r=e.findIndex((t=>n===t));return-1!==r&&r<e.length-1})),active:zQ((()=>{const{value:e}=a,{key:n}=t.tmNode,r=e.findIndex((t=>n===t));return-1!==r&&r===e.length-1})),mergedDisabled:g,handleClick:function(){const{value:n}=p,{tmNode:r}=t;l.value&&(n||r.disabled||(e.doSelect(r.key,r.rawNode),e.doUpdateShow(!1)))},handleMouseMove:function(){const{tmNode:e}=t;l.value&&n.value!==e.key&&b()},handleMouseEnter:b,handleMouseLeave:function(t){if(!l.value)return;const{relatedTarget:e}=t;e&&!e.hasAttribute("__dropdown-option")&&(n.value=null)},handleSubmenuBeforeEnter:function(){y.value=!0},handleSubmenuAfterEnter:function(){y.value=!1}}},render(){var t;const{animated:e,rawNode:n,mergedShowSubmenu:r,clsPrefix:i,siblingHasIcon:o,siblingHasSubmenu:a,renderLabel:s,renderIcon:l,props:u}=this,c=r?Ei(L8,{clsPrefix:i,tmNodes:this.tmNode.children,parentKey:this.tmNode.key}):null,d={class:[`${i}-dropdown-option-body`,{[`${i}-dropdown-option-body--pending`]:this.pending,[`${i}-dropdown-option-body--active`]:this.active,[`${i}-dropdown-option-body--child-active`]:this.childActive,[`${i}-dropdown-option-body--disabled`]:this.mergedDisabled}],onMousemove:this.handleMouseMove,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onClick:this.handleClick};return Ei("div",{class:`${i}-dropdown-option`},Ei("div",Tr(d,u),[Ei("div",{"__dropdown-option":!0,class:[`${i}-dropdown-option-body__prefix`,o&&`${i}-dropdown-option-body__prefix--show-icon`]},[l?l(n):vJ(n.icon)]),Ei("div",{"__dropdown-option":!0,class:`${i}-dropdown-option-body__label`},s?s(n):vJ(null!==(t=n.label)&&void 0!==t?t:n.title)),Ei("div",{"__dropdown-option":!0,class:[`${i}-dropdown-option-body__suffix`,a&&`${i}-dropdown-option-body__suffix--has-submenu`]},this.hasSubmenu?Ei(E8,null,{default:()=>Ei(s0,null)}):null)]),this.hasSubmenu?Ei(c1,null,{default:()=>[Ei(d1,null,{default:()=>Ei("div",{class:`${i}-dropdown-offset-container`},Ei(I1,{show:this.mergedShowSubmenu,placement:this.placement,teleportDisabled:!0},{default:()=>Ei("div",{class:`${i}-dropdown-menu-wrapper`},e?Ei($i,{onBeforeEnter:this.handleSubmenuBeforeEnter,onAfterEnter:this.handleSubmenuAfterEnter,name:"fade-in-scale-up-transition",appear:!0},{default:()=>c}):c)}))})]}):null)}}),I8=Ke({name:"DropdownDivider",props:{clsPrefix:{type:String,required:!0}},render(){return Ei("div",{class:`${this.clsPrefix}-dropdown-divider`})}}),D8=Ke({name:"DropdownGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(t){const{showIconRef:e,hasSubmenuRef:n}=je(R8),{renderLabelRef:r}=je(N8);return{showIcon:e,hasSubmenu:n,renderLabel:r}},render(){var t;const{clsPrefix:e,hasSubmenu:n,showIcon:r,renderLabel:i}=this,{rawNode:o}=this.tmNode;return Ei("div",{class:`${e}-dropdown-option`},Ei("div",{class:`${e}-dropdown-option-body ${e}-dropdown-option-body--group`},Ei("div",{"__dropdown-option":!0,class:[`${e}-dropdown-option-body__prefix`,r&&`${e}-dropdown-option-body__prefix--show-icon`]},vJ(o.icon)),Ei("div",{class:`${e}-dropdown-option-body__label`,"__dropdown-option":!0},i?i(o):vJ(null!==(t=o.label)&&void 0!==t?t:o.title)),Ei("div",{class:[`${e}-dropdown-option-body__suffix`,n&&`${e}-dropdown-option-body__suffix--has-submenu`],"__dropdown-option":!0})))}}),O8=Ke({name:"NDropdownGroup",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null}},render(){const{tmNode:t,parentKey:e,clsPrefix:n}=this,{children:r}=t;return Ei(ir,null,Ei(D8,{clsPrefix:n,tmNode:t,key:t.key}),null==r?void 0:r.map((t=>_8(t.rawNode)?Ei(I8,{clsPrefix:n,key:t.key}):A8(t.rawNode)?(mJ("dropdown","`group` node is not allowed to be put in `group` node."),null):Ei(P8,{clsPrefix:n,tmNode:t,parentKey:e,key:t.key}))))}});const R8=Symbol("dropdownMenu");var L8=Ke({name:"DropdownMenu",props:{showArrow:Boolean,arrowStyle:[String,Object],clsPrefix:{type:String,required:!0},tmNodes:{type:Array,default:()=>[]},parentKey:{type:[String,Number],default:null}},setup(t){const{renderIconRef:e}=je(N8);ze(R8,{showIconRef:Ee((()=>{const n=e.value;return t.tmNodes.some((t=>{const{rawNode:e}=t;return A8(e)?e.children.some((t=>n?n(t):t.icon)):n?n(e):e.icon}))})),hasSubmenuRef:Ee((()=>t.tmNodes.some((t=>{const{rawNode:e}=t;return A8(e)?e.children.some((t=>M8(t))):M8(e)}))))})},render(){const{parentKey:t,clsPrefix:e}=this;return Ei("div",{class:`${e}-dropdown-menu`},this.tmNodes.map((n=>_8(n.rawNode)?Ei(I8,{clsPrefix:e,key:n.key}):A8(n.rawNode)?Ei(O8,{clsPrefix:e,tmNode:n,parentKey:t,key:n.key}):Ei(P8,{clsPrefix:e,tmNode:n,parentKey:t,key:n.key,props:n.rawNode.props}))),this.showArrow?E3({clsPrefix:e,arrowStyle:this.arrowStyle}):null)}}),B8=AQ("dropdown-menu","\n transform-origin: inherit;\n padding: var(--padding);\n background-color: var(--color);\n border-radius: var(--border-radius);\n box-shadow: var(--box-shadow);\n transition:\n background-color .3s var(--bezier),\n box-shadow .3s var(--bezier);\n",[h3(),AQ("dropdown-option","\n position: relative;\n ",[EQ("a","\n text-decoration: none;\n color: inherit;\n ",[EQ("&::before",'\n content: "";\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ')]),AQ("dropdown-option-body","\n display: flex;\n cursor: pointer;\n height: var(--option-height);\n line-height: var(--option-height);\n font-size: var(--font-size);\n color: var(--option-text-color);\n transition:\n background-color .3s var(--bezier),\n color .3s var(--bezier);\n ",[TQ("pending",{color:"var(--option-text-color-hover)"},[PQ("disabled",{backgroundColor:"var(--option-color-hover)"}),_Q("prefix, suffix",{color:"var(--option-text-color-hover)"})]),TQ("active",{color:"var(--option-text-color-active)",backgroundColor:"var(--option-color-active)"},[_Q("prefix, suffix",{color:"var(--option-text-color-active)"})]),TQ("disabled",{cursor:"not-allowed",opacity:"var(--option-opacity-disabled)"}),TQ("child-active",{color:"var(--option-text-color-child-active)"},[_Q("prefix, suffix",{color:"var(--option-text-color-child-active)"})]),TQ("group",{fontSize:"calc(var(--font-size) - 1px)",color:"var(--group-header-text-color)"},[_Q("prefix",{width:"calc(var(--option-prefix-width) / 2)"},[TQ("show-icon",{width:"calc(var(--option-icon-prefix-width) / 2)"})])]),_Q("prefix","\n width: var(--option-prefix-width);\n display: flex;\n justify-content: center;\n align-items: center;\n color: var(--prefix-color);\n transition: color .3s var(--bezier);\n ",[TQ("show-icon",{width:"var(--option-icon-prefix-width)"}),AQ("icon",{fontSize:"var(--option-icon-size)"})]),_Q("label",{whiteSpace:"nowrap",flex:1}),_Q("suffix","\n box-sizing: border-box;\n flex-grow: 0;\n flex-shrink: 0;\n display: flex;\n justify-content: flex-end;\n align-items: center;\n min-width: var(--option-suffix-width);\n padding: 0 8px;\n transition: color .3s var(--bezier);\n color: var(--suffix-color);\n ",[TQ("has-submenu",{width:"var(--option-icon-suffix-width)"}),AQ("icon",{fontSize:"var(--option-icon-size)"})]),AQ("dropdown-menu",{pointerEvents:"all"})]),AQ("dropdown-offset-container","\n pointer-events: none;\n position: absolute;\n left: 0;\n right: 0;\n top: -4px;\n bottom: -4px;\n ")]),AQ("dropdown-divider","\n transition: background-color .3s var(--bezier);\n background-color: var(--divider-color);\n height: 1px;\n margin: 4px 0;\n "),AQ("dropdown-menu-wrapper","\n transform-origin: inherit;\n width: fit-content;\n ")]);const F8={getKey:t=>t.key,getDisabled:t=>!0===t.disabled,getIgnored:t=>"divider"===t.type},N8=Symbol("dropdown"),z8={animated:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},size:{type:String,default:"medium"},inverted:Boolean,placement:{type:String,default:"bottom"},onSelect:[Function,Array],options:{type:Array,default:()=>[]},showArrow:Boolean,value:[String,Number],renderLabel:Function,renderIcon:Function},j8=Object.keys(P3);var G8=Ke({name:"Dropdown",inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},P3),z8),LJ.props),setup(t){const e=ge(!1),n=aJ(Se(t,"show"),e),r=Ee((()=>i1(t.options,F8))),i=Ee((()=>r.value.treeNodes)),o=ge(null),a=ge(null),s=ge(null),l=Ee((()=>{var t,e,n;return null!==(n=null!==(e=null!==(t=o.value)&&void 0!==t?t:a.value)&&void 0!==e?e:s.value)&&void 0!==n?n:null})),u=Ee((()=>r.value.getPath(l.value).keyPath)),c=Ee((()=>r.value.getPath(t.value).keyPath));cJ({keydown:{ArrowUp:{prevent:!0,handler:function(){v("up")}},ArrowRight:{prevent:!0,handler:function(){v("right")}},ArrowDown:{prevent:!0,handler:function(){v("down")}},ArrowLeft:{prevent:!0,handler:function(){v("left")}},Escape:function(){p(!1)}},keyup:{Enter:function(){const t=g();(null==t?void 0:t.isLeaf)&&(f(t.key,t.rawNode),p(!1))}}},zQ((()=>t.keyboard&&n.value)));const{mergedClsPrefixRef:d}=FJ(t),h=LJ("Dropdown","Dropdown",B8,C8,t,d);function f(e,n){const{onSelect:r}=t;r&&pJ(r,e,n)}function p(n){const{"onUpdate:show":r}=t;r&&pJ(r,n),e.value=n}function g(){var t;const{value:e}=r,{value:n}=l;return e&&null!==n&&null!==(t=e.getNode(n))&&void 0!==t?t:null}function v(t){const{value:e}=l,{value:{getFirstAvailableNode:n}}=r;let i=null;if(null===e){const t=n();null!==t&&(i=t.key)}else{const e=g();if(e){let n;switch(t){case"down":n=e.getNext();break;case"up":n=e.getPrev();break;case"right":n=e.getChild();break;case"left":n=e.getParent()}n&&(i=n.key)}}null!==i&&(o.value=null,a.value=i)}return ze(N8,{renderLabelRef:Se(t,"renderLabel"),renderIconRef:Se(t,"renderIcon"),hoverKeyRef:o,keyboardKeyRef:a,lastToggledSubmenuKeyRef:s,pendingKeyPathRef:u,activeKeyPathRef:c,animatedRef:Se(t,"animated"),mergedShowRef:n,doSelect:f,doUpdateShow:p}),xi(n,(t=>{t||(o.value=null,a.value=null,s.value=null)})),{mergedClsPrefix:d,mergedTheme:h,tmNodes:i,mergedShow:n,doUpdateShow:p,cssVars:Ee((()=>{const{size:e,inverted:n}=t,{common:{cubicBezierEaseInOut:r},self:i}=h.value,{padding:o,dividerColor:a,borderRadius:s,optionOpacityDisabled:l,[CQ("optionIconSuffixWidth",e)]:u,[CQ("optionSuffixWidth",e)]:c,[CQ("optionIconPrefixWidth",e)]:d,[CQ("optionPrefixWidth",e)]:f,[CQ("fontSize",e)]:p,[CQ("optionHeight",e)]:g,[CQ("optionIconSize",e)]:v}=i,m={"--bezier":r,"--font-size":p,"--padding":o,"--border-radius":s,"--option-height":g,"--option-prefix-width":f,"--option-icon-prefix-width":d,"--option-suffix-width":c,"--option-icon-suffix-width":u,"--option-icon-size":v,"--divider-color":a,"--option-opacity-disabled":l};return n?(m["--color"]=i.colorInverted,m["--option-color-hover"]=i.optionColorHoverInverted,m["--option-color-active"]=i.optionColorActiveInverted,m["--option-text-color"]=i.optionTextColorInverted,m["--option-text-color-hover"]=i.optionTextColorHoverInverted,m["--option-text-color-active"]=i.optionTextColorActiveInverted,m["--option-text-color-child-active"]=i.optionTextColorChildActiveInverted,m["--prefix-color"]=i.prefixColorInverted,m["--suffix-color"]=i.suffixColorInverted,m["--group-header-text-color"]=i.groupHeaderTextColorInverted):(m["--color"]=i.color,m["--option-color-hover"]=i.optionColorHover,m["--option-color-active"]=i.optionColorActive,m["--option-text-color"]=i.optionTextColor,m["--option-text-color-hover"]=i.optionTextColorHover,m["--option-text-color-active"]=i.optionTextColorActive,m["--option-text-color-child-active"]=i.optionTextColorChildActive,m["--prefix-color"]=i.prefixColor,m["--suffix-color"]=i.suffixColor,m["--group-header-text-color"]=i.groupHeaderTextColor),m}))}},render(){const{mergedTheme:t}=this,e={show:this.mergedShow,theme:t.peers.Popover,themeOverrides:t.peerOverrides.Popover,internalRenderBody:(t,e,n,r,i)=>{const{mergedClsPrefix:o}=this,a={ref:wJ(e),class:[t,`${o}-dropdown`,this.showArrow&&`${o}-popover--show-arrow`],clsPrefix:o,tmNodes:this.tmNodes,style:[n,this.cssVars],showArrow:this.showArrow,arrowStyle:this.arrowStyle,onMouseenter:r,onMouseleave:i};return Ei(L8,Tr(this.$attrs,a))},onUpdateShow:this.doUpdateShow};return Ei(I3,Object.assign({},hJ(this.$props,j8),e),{trigger:this.$slots.default,_:1})}});var U8=Ke({name:"DataTableSelectionMenu",props:{clsPrefix:{type:String,required:!0}},setup(){const{localeRef:t,checkOptionsRef:e,rawPaginatedDataRef:n,doCheckAll:r,doUncheckAll:i}=je(e8);return{handleSelect:Ee((()=>function(t,e,n,r){return t?i=>{for(const o of t)switch(i){case"_n_all__":return void n(!0);case"_n_none__":return void r(!0);default:if("object"==typeof o&&o.key===i)return void o.onSelect(e.value)}}:()=>{}}(e.value,n,r,i))),options:Ee((()=>function(t,e){return t?t.map((t=>{switch(t){case"all":return{label:e.checkTableAll,key:"_n_all__"};case"none":return{label:e.uncheckTableAll,key:"_n_none__"};default:return t}})):[]}(e.value,t.value)))}},render(){const{clsPrefix:t}=this;return Ei(G8,{options:this.options,onSelect:this.handleSelect},{default:()=>Ei(T0,{clsPrefix:t,class:`${t}-data-table-check-extra`},{default:()=>Ei(C0,null)})})}});function $8(t){return"function"==typeof t.title?t.title(t):t.title}var V8=Ke({name:"DataTableHeader",props:{discrete:{type:Boolean,default:!0}},setup(){const{mergedClsPrefixRef:t,scrollXRef:e,fixedColumnLeftMapRef:n,fixedColumnRightMapRef:r,mergedCurrentPageRef:i,allRowsCheckedRef:o,someRowsCheckedRef:a,rowsRef:s,colsRef:l,mergedThemeRef:u,checkOptionsRef:c,mergedSortStateRef:d,componentId:h,scrollPartRef:f,mergedTableLayoutRef:p,headerCheckboxDisabledRef:g,handleTableHeaderScroll:v,doUpdateSorter:m,doUncheckAll:y,doCheckAll:b}=je(e8);return{componentId:h,mergedSortState:d,mergedClsPrefix:t,scrollX:e,fixedColumnLeftMap:n,fixedColumnRightMap:r,currentPage:i,allRowsChecked:o,someRowsChecked:a,rows:s,cols:l,mergedTheme:u,checkOptions:c,mergedTableLayout:p,headerCheckboxDisabled:g,handleMouseenter:function(){f.value="head"},handleCheckboxUpdateChecked:function(){a.value||o.value?y():b()},handleColHeaderClick:function(t,e){if(aq(t,"dataTableFilter"))return;if(!v8(e))return;const n=function(t,e){return void 0===t.sorter?null:null===e||e.columnKey!==t.key?{columnKey:t.key,sorter:t.sorter,order:y8(!1)}:Object.assign(Object.assign({},e),{order:y8(e.order)})}(e,d.value);m(n)},handleTableHeaderScroll:v}},render(){const{mergedClsPrefix:t,fixedColumnLeftMap:e,fixedColumnRightMap:n,currentPage:r,allRowsChecked:i,someRowsChecked:o,mergedSortState:a,rows:s,cols:l,mergedTheme:u,checkOptions:c,componentId:d,discrete:h,mergedTableLayout:f,headerCheckboxDisabled:p,handleColHeaderClick:g,handleCheckboxUpdateChecked:v}=this,m=Ei("thead",{class:`${t}-data-table-thead`,"data-n-id":d},s.map((s=>Ei("tr",{class:`${t}-data-table-tr`},s.map((({column:s,colSpan:l,rowSpan:d,isLast:h})=>{const f=h8(s),{ellipsis:m}=s;return Ei("th",{key:f,style:{textAlign:s.align,left:lq(e[f]),right:lq(n[f])},colspan:l,rowspan:d,"data-col-key":f,class:[`${t}-data-table-th`,s.fixed&&`${t}-data-table-th--fixed-${s.fixed}`,{[`${t}-data-table-th--hover`]:(null==a?void 0:a.order)&&a.columnKey===f,[`${t}-data-table-th--filterable`]:m8(s),[`${t}-data-table-th--sortable`]:v8(s),[`${t}-data-table-th--selection`]:"selection"===s.type,[`${t}-data-table-th--last`]:h},s.className],onClick:"selection"===s.type||"expand"===s.type||"children"in s?void 0:t=>{g(t,s)}},"selection"===s.type?Ei(ir,null,Ei(R6,{key:r,privateTableHeader:!0,checked:i,indeterminate:o,disabled:p,onUpdateChecked:v}),c?Ei(U8,{clsPrefix:t}):null):!0===m||m&&!m.tooltip?Ei("div",{class:`${t}-data-table-th__ellipsis`},$8(s)):m&&m.tooltip?Ei(J6,{tooltip:m.tooltip,theme:u.peers.Ellipsis,themeOverrides:u.peerOverrides.Ellipsis},{default:()=>$8(s)}):$8(s),v8(s)?Ei(n8,{column:s}):null,m8(s)?Ei(x8,{column:s,options:s.filterOptions}):null)}))))));if(!h)return m;const{handleTableHeaderScroll:y,handleMouseenter:b,scrollX:x}=this;return Ei("div",{class:`${t}-data-table-base-table-header`,onScroll:y,onMouseenter:b},Ei("table",{ref:"body",class:`${t}-data-table-table`,style:{minWidth:kJ(x),tableLayout:f}},Ei("colgroup",null,l.map((t=>Ei("col",{key:t.key,style:t.style})))),m))}}),W8=Ke({name:"DataTableCell",props:{row:{type:Object,required:!0},index:{type:Number,required:!0},column:{type:Object,required:!0},isSummary:Boolean,mergedTheme:{type:Object,required:!0}},render(){const{isSummary:t,column:{render:e,key:n,ellipsis:r},row:i}=this;let o;o=e&&!t?e(i,this.index):t?i[n].value:i[n];const a="object"==typeof r?r.tooltip:void 0;if(a){const{mergedTheme:t}=this;return Ei(J6,{tooltip:a,theme:t.peers.Ellipsis,themeOverrides:t.peerOverrides.Ellipsis},{default:()=>o})}return o}}),H8=Ke({name:"DataTableExpandTrigger",props:{clsPrefix:{type:String,required:!0},expanded:Boolean,onClick:{type:Function,required:!0}},render(){return Ei(T0,{class:`${this.clsPrefix}-data-table-expand-trigger`,clsPrefix:this.clsPrefix,onClick:this.onClick},{default:()=>Ei(s0,{style:this.expanded?"transform: rotate(90deg);":void 0})})}}),Y8=Ke({name:"DataTableBodyCheckbox",props:{rowKey:{type:[String,Number],required:!0},disabled:{type:Boolean,required:!0},onUpdateChecked:{type:Function,required:!0}},setup(t){const{mergedCheckedRowKeySetRef:e,mergedInderminateRowKeySetRef:n}=je(e8);return()=>{const{rowKey:r}=t;return Ei(R6,{disabled:t.disabled,indeterminate:n.value.has(r),checked:e.value.has(r),onUpdateChecked:t.onUpdateChecked})}}});const X8=Ke({props:{clsPrefix:{type:String,required:!0},id:{type:String,required:!0},cols:{type:Array,required:!0},onMouseenter:Function,onMouseleave:Function},render(){const{clsPrefix:t,id:e,cols:n,onMouseenter:r,onMouseleave:i}=this;return Ei("table",{style:{tableLayout:"fixed"},class:`${t}-data-table-table`,onMouseenter:r,onMouseleave:i},Ei("colgroup",null,n.map((t=>Ei("col",{key:t.key,style:t.style})))),Ei("tbody",{"data-n-id":e,class:`${t}-data-table-tbody`},this.$slots))}});var q8=Ke({name:"DataTableBody",props:{onResize:Function,showHeader:Boolean,flexHeight:Boolean},setup(t){const{mergedExpandedRowKeysRef:e,mergedClsPrefixRef:n,mergedThemeRef:r,scrollXRef:i,colsRef:o,paginatedDataRef:a,rawPaginatedDataRef:s,fixedColumnLeftMapRef:l,fixedColumnRightMapRef:u,mergedCurrentPageRef:c,rowClassNameRef:d,leftActiveFixedColKeyRef:h,rightActiveFixedColKeyRef:f,renderExpandRef:p,hoverKeyRef:g,summaryRef:v,mergedSortStateRef:m,virtualScrollRef:y,componentId:b,scrollPartRef:x,mergedTableLayoutRef:w,hasChildrenRef:C,firstContentfulColIndexRef:S,indentRef:k,rowPropsRef:E,maxHeightRef:M,setHeaderScrollLeft:A,doUpdateExpandedRowKeys:_,handleTableBodyScroll:T,doCheck:P,doUncheck:I}=je(e8),D=ge(null),O=ge(null);let R="";function L(){const{value:t}=O;return null==t?void 0:t.listElRef}const B={getScrollContainer:function(){if(y.value)return L();const{value:t}=D;return t?t.containerRef:null}},F=EQ([({props:t})=>EQ([null===t.leftActiveFixedColKey?null:EQ(`[data-n-id="${t.componentId}"] [data-col-key="${t.leftActiveFixedColKey}"]::after`,{boxShadow:"var(--box-shadow-after)"}),null===t.rightActiveFixedColKey?null:EQ(`[data-n-id="${t.componentId}"] [data-col-key="${t.rightActiveFixedColKey}"]::before`,{boxShadow:"var(--box-shadow-before)"})])]);let N=!1;return yi((()=>{const{value:t}=h,{value:e}=f;(N||null!==t||null!==e)&&(F.mount({id:`n-${b}`,force:!0,props:{leftActiveFixedColKey:t,rightActiveFixedColKey:e,componentId:b}}),N=!0)})),dn((()=>{F.unmount({id:`n-${b}`})})),Object.assign({componentId:b,scrollbarInstRef:D,virtualListRef:O,summary:v,mergedClsPrefix:n,mergedTheme:r,scrollX:i,cols:o,paginatedData:a,rawPaginatedData:s,fixedColumnLeftMap:l,fixedColumnRightMap:u,currentPage:c,rowClassName:d,renderExpand:p,mergedExpandedRowKeys:e,hoverKey:g,mergedSortState:m,virtualScroll:y,mergedTableLayout:w,hasChildren:C,firstContentfulColIndex:S,indent:k,rowProps:E,maxHeight:M,setHeaderScrollLeft:A,handleMouseenterTable:function(){x.value="body"},handleVirtualListScroll:function(t){var e;T(t),null===(e=D.value)||void 0===e||e.sync()},handleVirtualListResize:function(e){var n;const{onResize:r}=t;r&&r(e),null===(n=D.value)||void 0===n||n.sync()},handleMouseleaveTable:function(){g.value=null},virtualListContainer:L,virtualListContent:function(){const{value:t}=O;return null==t?void 0:t.itemsElRef},handleTableBodyScroll:T,handleCheckboxUpdateChecked:function(t,e,n){if(n){const n=a.value.findIndex((t=>t.key===R));if(-1!==n){const r=a.value.findIndex((e=>e.key===t.key)),i=Math.min(n,r),o=Math.max(n,r),s=[];return a.value.slice(i,o+1).forEach((t=>{t.disabled||s.push(t.key)})),e?P(s):I(s),void(R=t.key)}}e?P(t.key):I(t.key),R=t.key},handleUpdateExpanded:function(t){const{value:n}=e,r=n.indexOf(t),i=Array.from(n);~r?i.splice(r,1):i.push(t),_(i)}},B)},render(){const{mergedTheme:t,scrollX:e,mergedClsPrefix:n,virtualScroll:r,maxHeight:i,mergedTableLayout:o,flexHeight:a,onResize:s,setHeaderScrollLeft:l}=this,u=void 0!==e||void 0!==i||a,c=!u&&"auto"===o,d=void 0!==e||c,h={minWidth:kJ(e)||"100%"};return e&&(h.width="100%"),Ei(o3,{ref:"scrollbarInstRef",scrollable:u||c,class:`${n}-data-table-base-table-body`,theme:t.peers.Scrollbar,themeOverrides:t.peerOverrides.Scrollbar,contentStyle:h,container:r?this.virtualListContainer:void 0,content:r?this.virtualListContent:void 0,horizontalRailStyle:{zIndex:3},verticalRailStyle:{zIndex:3},xScrollable:d,onScroll:r?void 0:this.handleTableBodyScroll,internalOnUpdateScrollLeft:l,onResize:s},{default:()=>{const t={},e={},{cols:i,paginatedData:o,mergedTheme:a,fixedColumnLeftMap:s,fixedColumnRightMap:l,currentPage:u,rowClassName:c,mergedSortState:d,mergedExpandedRowKeys:f,componentId:p,showHeader:g,hasChildren:v,firstContentfulColIndex:m,rowProps:y,handleMouseenterTable:b,handleMouseleaveTable:x,renderExpand:w,summary:C,handleCheckboxUpdateChecked:S,handleUpdateExpanded:k}=this,{length:E}=i,M={};o.forEach(((t,e)=>{M[e]=t.key}));const A=!!d&&d.order&&d.columnKey;let _;const T=v?function(t,e){const n=[];return function t(r){r.forEach((r=>{r.children&&e.includes(r.key)?(n.push(r),t(r.children)):n.push(r)}))}(t),n}(o,f):o;if(C){const t=C(this.rawPaginatedData);_=Array.isArray(t)?[...T,...t.map(((t,e)=>({summary:!0,rawNode:t,key:`__n_summary__${e}`,disabled:!0})))]:[...T,{summary:!0,rawNode:t,key:"__n_summary__",disabled:!0}]}else _=T;const{length:P}=_,I=v?{width:lq(this.indent)}:void 0,D=[];return _.forEach(((r,o)=>{const{rawNode:d,key:h}=r,p="summary"in r,g=f.includes(h),b=w&&g,x=i.map(((i,c)=>{var f;if(o in t){const e=t[o],n=e.indexOf(c);if(~n)return e.splice(n,1),null}const{column:y}=i,x=h8(i),{rowSpan:w,colSpan:C}=y,_=p?r.rawNode[x].colSpan||1:C?C(d,o):1,T=p?r.rawNode[x].rowSpan||1:w?w(d,o):1,D=c+_===E,O=o+T===P,R=T>1;if(R&&(e[o]={[c]:[]}),_>1||R)for(let n=o;n<o+T;++n){R&&e[o][c].push(M[n]);for(let e=c;e<c+_;++e)n===o&&e===c||(n in t?t[n].push(e):t[n]=[e])}const L=R?this.hoverKey:null,{ellipsis:B}=y;return Ei("td",{key:x,style:{textAlign:y.align||void 0,left:lq(s[x]),right:lq(l[x])},colspan:_,rowspan:T,"data-col-key":x,class:[`${n}-data-table-td`,y.className,p&&`${n}-data-table-td--summary`,(null!==L&&e[o][c].includes(L)||!1!==A&&A===x)&&`${n}-data-table-td--hover`,y.fixed&&`${n}-data-table-td--fixed-${y.fixed}`,y.align&&`${n}-data-table-td--${y.align}-align`,{[`${n}-data-table-td--ellipsis`]:!0===B||B&&!B.tooltip,[`${n}-data-table-td--selection`]:"selection"===y.type,[`${n}-data-table-td--expand`]:"expand"===y.type,[`${n}-data-table-td--last-col`]:D,[`${n}-data-table-td--last-row`]:O&&!b}]},v&&c===m?[Pq(p?0:r.level,Ei("div",{class:`${n}-data-table-indent`,style:I})),p||!r.children?Ei("div",{class:`${n}-data-table-expand-placeholder`}):Ei(H8,{class:`${n}-data-table-expand-trigger`,clsPrefix:n,expanded:g,onClick:()=>{k(h)}})]:null,"selection"===y.type?p?null:Ei(Y8,{key:u,rowKey:h,disabled:r.disabled,onUpdateChecked:(t,e)=>S(r,t,e.shiftKey)}):"expand"===y.type?p?null:!y.expandable||(null===(f=y.expandable)||void 0===f?void 0:f.call(y,d,o))?Ei(H8,{clsPrefix:n,expanded:g,onClick:()=>k(h)}):null:Ei(W8,{index:o,row:d,column:y,isSummary:p,mergedTheme:a}))})),C=y?y(d,o):void 0,_="string"==typeof c?c:function(t,e,n){return"function"==typeof n?n(t,e):n||""}(d,o,c),T=Ei("tr",Object.assign({onMouseenter:()=>{this.hoverKey=h},key:h,class:[`${n}-data-table-tr`,_]},C),x);b?D.push(T,Ei("tr",{class:`${n}-data-table-tr`,key:`${h}__expand`},Ei("td",{class:[`${n}-data-table-td`,`${n}-data-table-td--last-col`,o+1===P&&`${n}-data-table-td--last-row`],colspan:E},w(d,o)))):D.push(T)})),r?Ei(r2,{ref:"virtualListRef",items:D,itemSize:28,visibleItemsTag:X8,visibleItemsProps:{clsPrefix:n,id:p,cols:i,onMouseenter:b,onMouseleave:x},showScrollbar:!1,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemsStyle:h,itemResizable:!0},{default:({item:t})=>t}):Ei("table",{class:`${n}-data-table-table`,onMouseleave:x,onMouseenter:b,style:{tableLayout:this.mergedTableLayout}},Ei("colgroup",null,i.map((t=>Ei("col",{key:t.key,style:t.style})))),g?Ei(V8,{discrete:!1}):null,Ei("tbody",{"data-n-id":p,class:`${n}-data-table-tbody`},D))}})}}),K8=Ke({setup(){const{mergedClsPrefixRef:t,rightFixedColumnsRef:e,leftFixedColumnsRef:n,bodyWidthRef:r,maxHeightRef:i,minHeightRef:o,flexHeightRef:a,syncScrollState:s}=je(e8),l=ge(null),u=ge(null),c=ge(null),d=ge(!(n.value.length||e.value.length)),h=Ee((()=>({maxHeight:kJ(i.value),minHeight:kJ(o.value)})));const f={getBodyElement:function(){const{value:t}=u;return t?t.getScrollContainer():null},getHeaderElement:function(){const{value:t}=l;return t?t.$el:null}};return yi((()=>{const{value:e}=c;if(!e)return;const n=`${t.value}-data-table-base-table--transition-disabled`;d.value?setTimeout((()=>{e.classList.remove(n)}),0):e.classList.add(n)})),Object.assign({maxHeight:i,mergedClsPrefix:t,selfElRef:c,headerInstRef:l,bodyInstRef:u,bodyStyle:h,flexHeight:a,handleBodyResize:function(t){r.value=t.contentRect.width,s(),d.value||(d.value=!0)}},f)},render(){const{mergedClsPrefix:t,maxHeight:e,flexHeight:n}=this,r=void 0===e&&!n;return Ei("div",{class:`${t}-data-table-base-table`,ref:"selfElRef"},r?null:Ei(V8,{ref:"headerInstRef"}),Ei(q8,{ref:"bodyInstRef",style:this.bodyStyle,showHeader:r,flexHeight:n,onResize:this.handleBodyResize}),Ir(this.$slots,"default"))}});function Z8(t,{dataRelatedColsRef:e}){const n=Ee((()=>t.columns.find((t=>"selection"===t.type))||null)),r=Ee((()=>{const{childrenKey:e}=t;return i1(t.data,{getKey:t.rowKey,getChildren:t=>t[e],getDisabled:t=>{var e,r;return!!(null===(r=null===(e=n.value)||void 0===e?void 0:e.disabled)||void 0===r?void 0:r.call(e,t))}})})),i=zQ((()=>{const{columns:e}=t,{length:n}=e;for(let t=0;t<n;++t)if(!e[t].type)return t;return 0})),o=ge({}),a=ge(null),s=ge(1),l=ge(10);e.value.forEach((t=>{var e,n;if(void 0!==t.sorter&&(a.value={columnKey:t.key,sorter:t.sorter,order:null!==(e=t.defaultSortOrder)&&void 0!==e&&e}),t.filter){const e=t.defaultFilterOptionValues;t.filterMultiple?o.value[t.key]=e||[]:o.value[t.key]=void 0!==e?null===e?[]:e:null!==(n=t.defaultFilterOptionValue)&&void 0!==n?n:null}}));const u=Ee((()=>{const{pagination:e}=t;if(!1!==e)return e.page})),c=Ee((()=>{const{pagination:e}=t;if(!1!==e)return e.pageSize})),d=aJ(u,s),h=aJ(c,l),f=Ee((()=>{const{pagination:e}=t;if(e){const{pageCount:t}=e;if(void 0!==t)return t}})),p=Ee((()=>{const t=e.value.filter((t=>"selection"!==t.type&&void 0!==t.sorter&&("ascend"===t.sortOrder||"descend"===t.sortOrder||!1===t.sortOrder))),n=t.filter((t=>!1!==t.sortOrder))[0];return n?{columnKey:n.key,order:n.sortOrder,sorter:n.sorter}:t.length?null:a.value})),g=Ee((()=>{const t=e.value.filter((t=>void 0!==t.filterOptionValues||void 0!==t.filterOptionValue)),n={};t.forEach((t=>{"selection"!==t.type&&"expand"!==t.type&&(n[t.key]=t.filterOptionValues||t.filterOptionValue||null)}));return Object.assign(f8(o.value),n)})),v=Ee((()=>{const e=g.value,{columns:n}=t;function i(t){return(e,n)=>!!~String(n[t]).indexOf(String(e))}const{value:{treeNodes:o}}=r,a=[];return n.forEach((t=>{"selection"===t.type||"expand"===t.type||"children"in t||a.push([t.key,t])})),o?o.filter((t=>{const{rawNode:n}=t;for(const[r,o]of a){let t=e[r];if(null==t)continue;if(Array.isArray(t)||(t=[t]),!t.length)continue;const a="default"===o.filter?i(r):o.filter;if(o&&"function"==typeof a){if("and"!==o.filterMode){if(t.some((t=>a(t,n))))continue;return!1}if(t.some((t=>!a(t,n))))return!1}}return!0})):[]})),m=Ee((()=>{const t=p.value;if(t){if(!0===t.sorter||!1===t.sorter)return v.value;const e=v.value.slice(0),n=t.columnKey,r=t.order,i=void 0===t.sorter||"default"===t.sorter?(t,e)=>{const r=t[n],i=e[n];return"number"==typeof r&&"number"==typeof i?r-i:"string"==typeof r&&"string"==typeof i?r.localeCompare(i):0}:t.sorter;return e.sort(((t,e)=>function(t){return"ascend"===t?1:"descend"===t?-1:0}(r)*i(t.rawNode,e.rawNode)))}return v.value})),y=Ee((()=>{if(t.remote)return r.value.treeNodes;if(!t.pagination)return m.value;const e=h.value,n=(d.value-1)*e;return m.value.slice(n,n+e)})),b=Ee((()=>y.value.map((t=>t.rawNode))));function x(e){const{pagination:n}=t;if(n){const{onChange:t,"onUpdate:page":r,onUpdatePage:i}=n;t&&pJ(t,e),i&&pJ(i,e),r&&pJ(r,e),k(e)}}function w(e){const{pagination:n}=t;if(n){const{onPageSizeChange:t,"onUpdate:pageSize":r}=n;t&&pJ(t,e),r&&pJ(r,e),E(e)}}const C=Ee((()=>{if(!t.remote)return v.value.length;{const{pagination:e}=t;if(e){const{itemCount:t}=e;if(void 0!==t)return t}}})),S=Ee((()=>Object.assign(Object.assign({},t.pagination),{onChange:void 0,onPageSizeChange:void 0,"onUpdate:page":x,"onUpdate:pageSize":w,page:d.value,pageSize:h.value,pageCount:void 0===C.value?f.value:void 0,itemCount:C.value})));function k(e){const{"onUpdate:page":n,onPageChange:r,onUpdatePage:i}=t;i&&pJ(i,e),r&&pJ(r,e),n&&pJ(n,e),s.value=e}function E(e){const{"onUpdate:pageSize":n,onPageSizeChange:r,onUpdatePageSize:i}=t;r&&pJ(r,e),i&&pJ(i,e),n&&pJ(n,e),l.value=e}function M(e){const{"onUpdate:sorter":n,onUpdateSorter:r,onSorterChange:i}=t;n&&pJ(n,e),r&&pJ(r,e),i&&pJ(i,e),a.value=e}function A(e,n){const{onUpdateFilters:r,"onUpdate:filters":i,onFiltersChange:a}=t;r&&pJ(r,e,n),i&&pJ(i,e,n),a&&pJ(a,e,n),o.value=e}function _(){T({})}function T(t){P(t)}function P(t){t?t&&A(f8(t)):A({})}return{treeMateRef:r,mergedCurrentPageRef:d,mergedPaginationRef:S,paginatedDataRef:y,rawPaginatedDataRef:b,mergedFilterStateRef:g,mergedSortStateRef:p,hoverKeyRef:ge(null),selectionColumnRef:n,firstContentfulColIndexRef:i,doUpdateFilters:A,doUpdateSorter:M,doUpdatePageSize:E,doUpdatePage:k,filter:P,filters:T,clearFilter:function(){_()},clearFilters:_,page:function(t){k(t)},sort:function(t,n="ascend"){if(t){const r=e.value.find((e=>"selection"!==e.type&&"expand"!==e.type&&e.key===t));if(!r||!r.sorter)return;const i=r.sorter;M({columnKey:t,sorter:i,order:n})}else M(null)}}}function Q8(t,{mainTableInstRef:e,mergedCurrentPageRef:n,bodyWidthRef:r,scrollPartRef:i}){let o=0;const a=ge(null),s=ge(null),l=Ee((()=>kJ(t.scrollX))),u=Ee((()=>t.columns.filter((t=>"left"===t.fixed)))),c=Ee((()=>t.columns.filter((t=>"right"===t.fixed)))),d=Ee((()=>{const t={};let e=0;for(const n of u.value)t[h8(n)]=e,e+=d8(n)||0;return t})),h=Ee((()=>{const t={};let e=0;for(const n of c.value.reverse())t[h8(n)]=e,e+=n.width||0;return t}));function f(){return{header:e.value?e.value.getHeaderElement():null,body:e.value?e.value.getBodyElement():null}}function p(){const{header:e,body:n}=f();if(!n)return;const{value:l}=r;if(null===l)return;const{value:p}=i;if(t.maxHeight||t.flexHeight){if(!e)return;"head"===p?(o=e.scrollLeft,n.scrollLeft=o):(o=n.scrollLeft,e.scrollLeft=o)}else o=n.scrollLeft;!function(){const{value:t}=u;let e=0;const{value:n}=d;let r=null;for(let i=0;i<t.length;++i){const a=h8(t[i]);if(!(o>(n[a]||0)-e))break;r=a,e+=d8(t[i])||0}a.value=r}(),function(){const{value:e}=c,n=Number(t.scrollX),{value:i}=r;if(null===i)return;let a=0,l=null;const{value:u}=h;for(let t=0;t<e.length;++t){const r=h8(e[t]);if(!(Math.round(o+(u[r]||0)+i-a)<n))break;l=r,a+=d8(e[t])||0}s.value=l}()}return xi(n,(()=>{!function(){const{body:t}=f();t&&(t.scrollTop=0)}()})),{styleScrollXRef:l,fixedColumnLeftMapRef:d,fixedColumnRightMapRef:h,leftFixedColumnsRef:u,rightFixedColumnsRef:c,leftActiveFixedColKeyRef:a,rightActiveFixedColKeyRef:s,syncScrollState:p,handleTableBodyScroll:function(){"body"===i.value&&oq(p)},handleTableHeaderScroll:function(){"head"===i.value&&oq(p)},setHeaderScrollLeft:function(t){const{header:e}=f();e&&(e.scrollLeft=t,p())}}}const J8=[TQ("fixed-left","\n left: 0;\n position: sticky;\n z-index: 2;\n ",[EQ("&::after",'\n pointer-events: none;\n content: "";\n width: 36px;\n display: inline-block;\n position: absolute;\n top: 0;\n bottom: -1px;\n transition: box-shadow .2s var(--bezier);\n right: -36px;\n ')]),TQ("fixed-right",{right:0,position:"sticky",zIndex:1},[EQ("&::before",'\n pointer-events: none;\n content: "";\n width: 36px;\n display: inline-block;\n position: absolute;\n top: 0;\n bottom: -1px;\n transition: box-shadow .2s var(--bezier);\n left: -36px;\n ')])];var t9=EQ([AQ("data-table","\n width: 100%;\n font-size: var(--font-size);\n display: flex;\n flex-direction: column;\n position: relative;\n --merged-th-color: var(--th-color);\n --merged-td-color: var(--td-color);\n --merged-border-color: var(--border-color);\n --merged-th-color-hover: var(--th-color-hover);\n --merged-td-color-hover: var(--td-color-hover);\n ",[TQ("flex-height",[EQ(">",[AQ("data-table-wrapper","\n flex-grow: 1;\n display: flex;\n flex-direction: column;\n ",[EQ(">",[AQ("data-table-base-table","\n display: flex;\n flex-direction: column;\n flex-grow: 1;\n ",[EQ(">",[AQ("data-table-base-table-body","flex-basis: 0;",[EQ("&:last-child","flex-grow: 1;")])])])])])])]),EQ(">",[AQ("base-loading","\n color: var(--loading-color);\n font-size: var(--loading-size);\n position: absolute;\n left: 50%;\n top: 50%;\n transform: translateX(-50%) translateY(-50%);\n transition: color .3s var(--bezier);\n ",[h3({originalTransform:"translateX(-50%) translateY(-50%)"})])]),AQ("data-table-expand-trigger","cursor: pointer;"),AQ("data-table-expand-placeholder","\n margin-right: 8px;\n display: inline-block;\n width: 16px;\n height: 1px;\n "),AQ("data-table-indent","\n display: inline-block;\n height: 1px;\n "),AQ("data-table-expand-trigger","\n margin-right: 8px;\n cursor: pointer;\n font-size: 16px;\n vertical-align: -.125em;\n "),AQ("data-table-thead",{transition:"background-color .3s var(--bezier)",backgroundColor:"var(--merged-th-color)"}),AQ("data-table-tr",{boxSizing:"border-box",backgroundClip:"padding-box",transition:"background-color .3s var(--bezier)"},[EQ("&:hover",{backgroundColor:"var(--merged-td-color-hover)"},[AQ("data-table-td",{backgroundColor:"var(--merged-td-color-hover)"})])]),AQ("data-table-th","\n padding: var(--th-padding);\n position: relative;\n text-align: start;\n box-sizing: border-box;\n background-color: var(--merged-th-color);\n border-color: var(--merged-border-color);\n border-bottom: 1px solid var(--merged-border-color);\n color: var(--th-text-color);\n transition:\n border-color .3s var(--bezier),\n color .3s var(--bezier),\n background-color .3s var(--bezier);\n font-weight: var(--th-font-weight);\n ",[TQ("filterable",{paddingRight:"36px"}),J8,TQ("selection","\n padding: 0;\n text-align: center;\n line-height: 0;\n z-index: 3;\n "),_Q("ellipsis","\n display: inline-block;\n vertical-align: bottom;\n text-overflow: ellipsis;\n overflow: hidden;\n white-space: nowrap;\n max-width: 100%;\n "),TQ("hover",{backgroundColor:"var(--merged-th-color-hover)"}),TQ("sortable",{cursor:"pointer"},[_Q("ellipsis",{maxWidth:"calc(100% - 18px)"}),EQ("&:hover",{backgroundColor:"var(--merged-th-color-hover)"})]),AQ("data-table-sorter","\n height: var(--sorter-size);\n width: var(--sorter-size);\n margin-left: 4px;\n position: relative;\n display: inline-flex;\n vertical-align: -0.2em;\n color: var(--th-icon-color);\n transition: \n transform .3s var(--bezier),\n color .3s var(--bezier);\n ",[TQ("desc",{transform:"rotate(0)"}),TQ("asc",{transform:"rotate(-180deg)"}),TQ("asc, desc",{color:"var(--th-icon-color-active)"})]),AQ("data-table-filter","\n position: absolute;\n z-index: auto;\n right: 0;\n width: 36px;\n top: 0;\n bottom: 0;\n cursor: pointer;\n display: flex;\n justify-content: center;\n align-items: center;\n transition:\n background-color .3s var(--bezier),\n color .3s var(--bezier);\n font-size: var(--filter-size);\n color: var(--th-icon-color);\n ",[EQ("&:hover","\n background-color: var(--th-button-color-hover);\n "),TQ("show","\n background-color: var(--th-button-color-hover);\n "),TQ("active","\n background-color: var(--th-button-color-hover);\n color: var(--th-icon-color-active);\n ")])]),AQ("data-table-td","\n padding: var(--td-padding);\n text-align: start;\n box-sizing: border-box;\n border: none;\n background-color: var(--merged-td-color);\n color: var(--td-text-color);\n border-bottom: 1px solid var(--merged-border-color);\n transition:\n box-shadow .3s var(--bezier),\n background-color .3s var(--bezier),\n border-color .3s var(--bezier),\n color .3s var(--bezier);\n ",[TQ("last-row",{borderBottom:"0 solid var(--merged-border-color)"},[EQ("&::after",{bottom:"0 !important"}),EQ("&::before",{bottom:"0 !important"})]),TQ("summary","\n background-color: var(--merged-th-color);\n "),TQ("hover",{backgroundColor:"var(--merged-td-color-hover)"}),TQ("ellipsis","\n text-overflow: ellipsis;\n overflow: hidden;\n white-space: nowrap;\n "),TQ("selection, expand","\n text-align: center;\n padding: 0;\n line-height: 0;\n "),J8]),AQ("data-table-empty","\n padding: var(--empty-padding);\n flex-grow: 1;\n flex-shrink: 0;\n opacity: 1;\n display: flex;\n align-items: center;\n justify-content: center;\n transition: opacity .3s var(--bezier);\n ",[TQ("hide",{opacity:0})]),_Q("pagination","\n margin: var(--pagination-margin);\n display: flex;\n justify-content: flex-end;\n "),AQ("data-table-wrapper","\n position: relative;\n opacity: 1;\n transition: opacity .3s var(--bezier), border-color .3s var(--bezier);\n border-top-left-radius: var(--border-radius);\n border-top-right-radius: var(--border-radius);\n line-height: var(--line-height);\n "),TQ("loading",[AQ("data-table-wrapper","opacity: var(--opacity-loading);")]),TQ("single-column",[AQ("data-table-td",{borderBottom:"0 solid var(--merged-border-color)"},[EQ("&::after, &::before",{bottom:"0 !important"})])]),PQ("single-line",[AQ("data-table-th",{borderRight:"1px solid var(--merged-border-color)"},[TQ("last",{borderRight:"0 solid var(--merged-border-color)"})]),AQ("data-table-td",{borderRight:"1px solid var(--merged-border-color)"},[TQ("last-col",{borderRight:"0 solid var(--merged-border-color)"})])]),TQ("bordered",[AQ("data-table-wrapper",{border:"1px solid var(--merged-border-color)",borderBottomLeftRadius:"var(--border-radius)",borderBottomRightRadius:"var(--border-radius)"}),AQ("data-table-td",[TQ("last-row",{borderBottom:"0 solid var(--merged-border-color)"})]),AQ("data-table-base-table-body","\n border-bottom-left-radius: calc(var(--border-radius) - 1px);\n border-bottom-right-radius: calc(var(--border-radius) - 1px);\n ")]),AQ("data-table-base-table",[TQ("transition-disabled",[AQ("data-table-th",[EQ("&::after, &::before",{transition:"none"})]),AQ("data-table-td",[EQ("&::after, &::before",{transition:"none"})])])]),TQ("bottom-bordered",[AQ("data-table-td",[TQ("last-row",{borderBottom:"1px solid var(--merged-border-color)"})])]),AQ("data-table-table","\n font-variant-numeric: tabular-nums;\n width: 100%;\n word-wrap: break-word;\n word-break: break-all;\n transition: background-color .3s var(--bezier);\n border-collapse: separate;\n border-spacing: 0;\n background-color: var(--merged-td-color);\n "),AQ("data-table-base-table-header","\n border-top-left-radius: calc(var(--border-radius) - 1px);\n border-top-right-radius: calc(var(--border-radius) - 1px);\n z-index: 3;\n overflow: scroll;\n flex-shrink: 0;\n transition: border-color .3s var(--bezier);\n scrollbar-width: none;\n ",[EQ("&::-webkit-scrollbar",{width:0,height:0})]),AQ("data-table-check-extra","\n transition: color .3s var(--bezier);\n color: var(--th-icon-color);\n position: absolute;\n font-size: 14px;\n right: -4px;\n top: 50%;\n transform: translateY(-50%);\n z-index: 1;\n ")]),AQ("data-table-filter-menu",[AQ("scrollbar",{maxHeight:"240px"}),_Q("group",{display:"flex",flexDirection:"column",padding:"12px 12px 0 12px"},[AQ("checkbox",{marginBottom:"12px",marginRight:0}),AQ("radio",{marginBottom:"12px",marginRight:0})]),_Q("action","\n padding: var(--action-padding);\n display: flex;\n flex-wrap: nowrap;\n justify-content: space-evenly;\n border-top: 1px solid var(--action-divider-color);\n ",[AQ("button",[EQ("&:not(:last-child)",{margin:"var(--action-button-margin)"}),EQ("&:last-child",{marginRight:0})])]),AQ("divider",{margin:"0!important"})]),DQ(AQ("data-table","\n --merged-th-color: var(--th-color-modal);\n --merged-td-color: var(--td-color-modal);\n --merged-border-color: var(--border-color-modal);\n --merged-th-color-hover: var(--th-color-hover-modal);\n --merged-td-color-hover: var(--td-color-hover-modal);\n ")),OQ(AQ("data-table","\n --merged-th-color: var(--th-color-popover);\n --merged-td-color: var(--td-color-popover);\n --merged-border-color: var(--border-color-popover);\n --merged-th-color-hover: var(--th-color-hover-popover);\n --merged-td-color-hover: var(--td-color-hover-popover);\n "))]);function e9(t){const e=Ee((()=>function(t){const e=[],n=[],r=[],i=new WeakMap;let o=-1,a=0,s=!1;return function t(i,l){l>o&&(e[l]=[],o=l);for(const e of i)"children"in e?t(e.children,l+1):(n.push({key:h8(e),style:p8(e),column:e}),a+=1,s=!!e.ellipsis,r.push(e))}(t,0),function t(n,r,s){let l=-1,u=0;const c=n.length-1;n.forEach(((n,d)=>{var h;if("children"in n){const o=s&&d===c,a={column:n,colSpan:0,rowSpan:1,isLast:o};t(n.children,r+1,o),n.children.forEach((t=>{var e,n;a.colSpan+=null!==(n=null===(e=i.get(t))||void 0===e?void 0:e.colSpan)&&void 0!==n?n:0})),i.set(n,a),e[r].push(a)}else{if(l+=1,l<u)return;let t=1;"titleColSpan"in n&&(t=null!==(h=n.titleColSpan)&&void 0!==h?h:1),t>1&&(u=l+t);const s={column:n,colSpan:t,rowSpan:o-r+1,isLast:l+t===a};i.set(n,s),e[r].push(s)}}))}(t,0,!0),{hasEllpisis:s,rows:e,cols:n,dataRelatedCols:r}}(t.columns)));return{rowsRef:Ee((()=>e.value.rows)),colsRef:Ee((()=>e.value.cols)),hasEllpisisRef:Ee((()=>e.value.hasEllpisis)),dataRelatedColsRef:Ee((()=>e.value.dataRelatedCols))}}var n9=Ke({name:"DataTable",alias:["AdvancedTable"],props:Object.assign(Object.assign({},LJ.props),{pagination:{type:[Object,Boolean],default:!1},minHeight:[Number,String],maxHeight:[Number,String],columns:{type:Array,default:()=>[]},rowClassName:[String,Function],rowProps:Function,rowKey:Function,summary:[Function],data:{type:Array,default:()=>[]},loading:Boolean,bordered:{type:Boolean,default:void 0},bottomBordered:{type:Boolean,default:void 0},scrollX:[Number,String],defaultCheckedRowKeys:{type:Array,default:()=>[]},checkedRowKeys:Array,singleLine:{type:Boolean,default:!0},singleColumn:Boolean,size:{type:String,default:"medium"},remote:Boolean,defaultExpandedRowKeys:{type:Array,default:[]},expandedRowKeys:Array,virtualScroll:Boolean,tableLayout:{type:String,default:"auto"},cascade:{type:Boolean,default:!0},childrenKey:{type:String,default:"children"},indent:{type:Number,default:16},flexHeight:Boolean,"onUpdate:page":[Function,Array],onUpdatePage:[Function,Array],"onUpdate:pageSize":[Function,Array],onUpdatePageSize:[Function,Array],"onUpdate:sorter":[Function,Array],onUpdateSorter:[Function,Array],"onUpdate:filters":[Function,Array],onUpdateFilters:[Function,Array],"onUpdate:checkedRowKeys":[Function,Array],onUpdateCheckedRowKeys:[Function,Array],"onUpdate:expandedRowKeys":[Function,Array],onUpdateExpandedRowKeys:[Function,Array],onPageChange:{type:[Function,Array],validator:()=>!0,default:void 0},onPageSizeChange:{type:[Function,Array],validator:()=>!0,default:void 0},onSorterChange:{type:[Function,Array],validator:()=>!0,default:void 0},onFiltersChange:{type:[Function,Array],validator:()=>!0,default:void 0},onCheckedRowKeysChange:{type:[Function,Array],validator:()=>!0,default:void 0}}),setup(t){const{mergedBorderedRef:e,mergedClsPrefixRef:n}=FJ(t),r=Ee((()=>{const{bottomBordered:n}=t;return!e.value&&(void 0===n||n)})),i=LJ("DataTable","DataTable",t9,q6,t,n),o=ge(null),a=ge("body"),s=ge(null),{rowsRef:l,colsRef:u,dataRelatedColsRef:c,hasEllpisisRef:d}=e9(t),{treeMateRef:h,mergedCurrentPageRef:f,paginatedDataRef:p,rawPaginatedDataRef:g,selectionColumnRef:v,hoverKeyRef:m,mergedPaginationRef:y,mergedFilterStateRef:b,mergedSortStateRef:x,firstContentfulColIndexRef:w,doUpdateFilters:C,doUpdateSorter:S,filter:k,filters:E,clearFilter:M,clearFilters:A,page:_,sort:T}=Z8(t,{dataRelatedColsRef:c}),{doCheckAll:P,doUncheckAll:I,doCheck:D,doUncheck:O,headerCheckboxDisabledRef:R,someRowsCheckedRef:L,allRowsCheckedRef:B,mergedCheckedRowKeySetRef:F,mergedInderminateRowKeySetRef:N}=function(t,e){const{paginatedDataRef:n,treeMateRef:r,selectionColumnRef:i}=e,o=ge(t.defaultCheckedRowKeys),a=Ee((()=>{const{checkedRowKeys:e}=t;return r.value.getCheckedKeys(void 0===e?o.value:e,{cascade:t.cascade})})),s=Ee((()=>a.value.checkedKeys)),l=Ee((()=>a.value.indeterminateKeys)),u=Ee((()=>new Set(s.value))),c=Ee((()=>new Set(l.value))),d=Ee((()=>{const{value:t}=u;return n.value.reduce(((e,n)=>{const{key:r,disabled:i}=n;return e+(!i&&t.has(r)?1:0)}),0)})),h=Ee((()=>n.value.filter((t=>t.disabled)).length)),f=Ee((()=>{const{length:t}=n.value,{value:e}=c;return d.value>0&&d.value<t-h.value||n.value.some((t=>e.has(t.key)))})),p=Ee((()=>{const{length:t}=n.value;return 0!==d.value&&d.value===t-h.value})),g=Ee((()=>0===n.value.length));function v(e){const{"onUpdate:checkedRowKeys":n,onUpdateCheckedRowKeys:r,onCheckedRowKeysChange:i}=t;n&&pJ(n,e),r&&pJ(r,e),i&&pJ(i,e),o.value=e}return{mergedCheckedRowKeySetRef:u,mergedCheckedRowKeysRef:s,mergedInderminateRowKeySetRef:c,someRowsCheckedRef:f,allRowsCheckedRef:p,headerCheckboxDisabledRef:g,doUpdateCheckedRowKeys:v,doCheckAll:function(t=!1){const{value:e}=i;if(!e)return;const o=[];(t?r.value.treeNodes:n.value).forEach((t=>{t.disabled||o.push(t.key)})),v(r.value.check(o,s.value,{cascade:!0}).checkedKeys)},doUncheckAll:function(t=!1){const{value:e}=i;if(!e)return;const o=[];(t?r.value.treeNodes:n.value).forEach((t=>{t.disabled||o.push(t.key)})),v(r.value.uncheck(o,s.value,{cascade:!0}).checkedKeys)},doCheck:function(e){v(r.value.check(e,s.value,{cascade:t.cascade}).checkedKeys)},doUncheck:function(e){v(r.value.uncheck(e,s.value,{cascade:t.cascade}).checkedKeys)}}}(t,{selectionColumnRef:v,treeMateRef:h,paginatedDataRef:p}),{mergedExpandedRowKeysRef:z,renderExpandRef:j,doUpdateExpandedRowKeys:G}=function(t){const e=zQ((()=>{for(const e of t.columns)if("expand"===e.type)return e.renderExpand})),n=ge(t.defaultExpandedRowKeys);return{mergedExpandedRowKeysRef:aJ(Se(t,"expandedRowKeys"),n),renderExpandRef:e,doUpdateExpandedRowKeys:function(e){const{onUpdateExpandedRowKeys:r,"onUpdate:expandedRowKeys":i}=t;r&&pJ(r,e),i&&pJ(i,e),n.value=e}}}(t),{handleTableBodyScroll:U,handleTableHeaderScroll:$,syncScrollState:V,setHeaderScrollLeft:W,leftActiveFixedColKeyRef:H,rightActiveFixedColKeyRef:Y,leftFixedColumnsRef:X,rightFixedColumnsRef:q,fixedColumnLeftMapRef:K,fixedColumnRightMapRef:Z}=Q8(t,{scrollPartRef:a,bodyWidthRef:o,mainTableInstRef:s,mergedCurrentPageRef:f}),{localeRef:Q}=t0("DataTable"),J=Ee((()=>t.virtualScroll||t.flexHeight||void 0!==t.maxHeight||d.value?"fixed":t.tableLayout));ze(e8,{indentRef:Se(t,"indent"),firstContentfulColIndexRef:w,bodyWidthRef:o,componentId:Tq(),hoverKeyRef:m,mergedClsPrefixRef:n,mergedThemeRef:i,scrollXRef:Ee((()=>t.scrollX)),rowsRef:l,colsRef:u,paginatedDataRef:p,leftActiveFixedColKeyRef:H,rightActiveFixedColKeyRef:Y,leftFixedColumnsRef:X,rightFixedColumnsRef:q,fixedColumnLeftMapRef:K,fixedColumnRightMapRef:Z,mergedCurrentPageRef:f,someRowsCheckedRef:L,allRowsCheckedRef:B,mergedSortStateRef:x,mergedFilterStateRef:b,loadingRef:Se(t,"loading"),rowClassNameRef:Se(t,"rowClassName"),mergedCheckedRowKeySetRef:F,mergedExpandedRowKeysRef:z,mergedInderminateRowKeySetRef:N,localeRef:Q,scrollPartRef:a,rowKeyRef:Se(t,"rowKey"),renderExpandRef:j,summaryRef:Se(t,"summary"),virtualScrollRef:Se(t,"virtualScroll"),rowPropsRef:Se(t,"rowProps"),checkOptionsRef:Ee((()=>{const{value:t}=v;return null==t?void 0:t.options})),rawPaginatedDataRef:g,hasChildrenRef:Ee((()=>h.value.maxLevel>0)),filterMenuCssVarsRef:Ee((()=>{const{self:{actionDividerColor:t,actionPadding:e,actionButtonMargin:n}}=i.value;return{"--action-padding":e,"--action-button-margin":n,"--action-divider-color":t}})),mergedTableLayoutRef:J,maxHeightRef:Se(t,"maxHeight"),minHeightRef:Se(t,"minHeight"),flexHeightRef:Se(t,"flexHeight"),headerCheckboxDisabledRef:R,syncScrollState:V,doUpdateFilters:C,doUpdateSorter:S,doCheck:D,doUncheck:O,doCheckAll:P,doUncheckAll:I,doUpdateExpandedRowKeys:G,handleTableHeaderScroll:$,handleTableBodyScroll:U,setHeaderScrollLeft:W});const tt={filter:k,filters:E,clearFilter:M,clearFilters:A,page:_,sort:T};return Object.assign(Object.assign({mainTableInstRef:s,mergedClsPrefix:n,mergedTheme:i,paginatedData:p,mergedBordered:e,mergedBottomBordered:r,mergedPagination:y},tt),{cssVars:Ee((()=>{const{size:e}=t,{common:{cubicBezierEaseInOut:n},self:{borderColor:r,tdColorHover:o,thColor:a,thColorHover:s,tdColor:l,tdTextColor:u,thTextColor:c,thFontWeight:d,thButtonColorHover:h,thIconColor:f,thIconColorActive:p,filterSize:g,borderRadius:v,lineHeight:m,tdColorModal:y,thColorModal:b,borderColorModal:x,thColorHoverModal:w,tdColorHoverModal:C,borderColorPopover:S,thColorPopover:k,tdColorPopover:E,tdColorHoverPopover:M,thColorHoverPopover:A,paginationMargin:_,emptyPadding:T,boxShadowAfter:P,boxShadowBefore:I,sorterSize:D,loadingColor:O,loadingSize:R,opacityLoading:L,[CQ("fontSize",e)]:B,[CQ("thPadding",e)]:F,[CQ("tdPadding",e)]:N}}=i.value;return{"--font-size":B,"--th-padding":F,"--td-padding":N,"--bezier":n,"--border-radius":v,"--line-height":m,"--border-color":r,"--border-color-modal":x,"--border-color-popover":S,"--th-color":a,"--th-color-hover":s,"--th-color-modal":b,"--th-color-hover-modal":w,"--th-color-popover":k,"--th-color-hover-popover":A,"--td-color":l,"--td-color-hover":o,"--td-color-modal":y,"--td-color-hover-modal":C,"--td-color-popover":E,"--td-color-hover-popover":M,"--th-text-color":c,"--td-text-color":u,"--th-font-weight":d,"--th-button-color-hover":h,"--th-icon-color":f,"--th-icon-color-active":p,"--filter-size":g,"--pagination-margin":_,"--empty-padding":T,"--box-shadow-before":I,"--box-shadow-after":P,"--sorter-size":D,"--loading-size":R,"--loading-color":O,"--opacity-loading":L}}))})},render(){const{mergedClsPrefix:t}=this;return Ei("div",{class:[`${t}-data-table`,{[`${t}-data-table--bordered`]:this.mergedBordered,[`${t}-data-table--bottom-bordered`]:this.mergedBottomBordered,[`${t}-data-table--single-line`]:this.singleLine,[`${t}-data-table--single-column`]:this.singleColumn,[`${t}-data-table--loading`]:this.loading,[`${t}-data-table--flex-height`]:this.flexHeight}],style:this.cssVars},Ei("div",{class:`${t}-data-table-wrapper`},Ei(K8,{ref:"mainTableInstRef"},{default:()=>0===this.paginatedData.length?Ei("div",{class:[`${t}-data-table-empty`,{[`${t}-data-table-empty--hide`]:this.loading}]},Ir(this.$slots,"empty",void 0,(()=>[Ei(t3,{theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))):null})),this.pagination?Ei("div",{class:`${t}-data-table__pagination`},Ei(U6,Object.assign({theme:this.mergedTheme.peers.Pagination,themeOverrides:this.mergedTheme.peerOverrides.Pagination,disabled:this.loading},this.mergedPagination))):null,Ei($i,{name:"fade-in-scale-up-transition"},{default:()=>this.loading?Ei(L0,{clsPrefix:t,strokeWidth:20}):null}))}}),r9={itemFontSize:"12px",itemHeight:"32px",itemWidth:"52px",panelActionPadding:"8px 0"};var i9={name:"TimePicker",common:K2,peers:{Scrollbar:e3,Button:u5,Input:K3},self:t=>{const{popoverColor:e,textColor2:n,primaryColor:r,hoverColor:i,dividerColor:o,opacityDisabled:a,boxShadow2:s,borderRadius:l,iconColor:u,iconColorDisabled:c}=t;return Object.assign(Object.assign({},r9),{panelColor:e,panelBoxShadow:s,panelDividerColor:o,itemTextColor:n,itemTextColorActive:r,itemColorHover:i,itemOpacityDisabled:a,borderRadius:l,iconColor:u,iconColorDisabled:c})}},o9={itemSize:"24px",itemCellWidth:"38px",itemCellHeight:"32px",panelExtraFooterPadding:"8px 12px",panelActionPadding:"8px 12px",calendarTitlePadding:"0",calendarTitleHeight:"28px",arrowSize:"14px",panelHeaderPadding:"8px 12px",calendarDaysHeight:"32px",calendarTitleGridTempateColumns:"28px 28px 1fr 28px 28px",calendarLeftPaddingDate:"6px 12px 4px 12px",calendarLeftPaddingDatetime:"4px 12px",calendarLeftPaddingDaterange:"6px 12px 4px 12px",calendarLeftPaddingDatetimerange:"4px 12px",calendarRightPaddingDate:"6px 12px 4px 12px",calendarRightPaddingDatetime:"4px 12px",calendarRightPaddingDaterange:"6px 12px 4px 12px",calendarRightPaddingDatetimerange:"4px 12px"};var a9={name:"DatePicker",common:K2,peers:{Input:K3,Button:u5,TimePicker:i9},self:t=>{const{hoverColor:e,fontSize:n,textColor2:r,textColorDisabled:i,popoverColor:o,primaryColor:a,borderRadiusSmall:s,iconColor:l,iconColorDisabled:u,textColor1:c,dividerColor:d,boxShadow2:h,borderRadius:f,fontWeightStrong:p}=t;return Object.assign(Object.assign({},o9),{itemFontSize:n,calendarDaysFontSize:n,calendarTitleFontSize:n,itemTextColor:r,itemTextColorDisabled:i,itemTextColorActive:o,itemTextColorCurrent:a,itemColorIncluded:Eq(a,{alpha:.1}),itemColorHover:e,itemColorDisabled:e,itemColorActive:a,itemBorderRadius:s,panelColor:o,panelTextColor:r,arrowColor:l,calendarTitleTextColor:c,calendarDaysTextColor:r,panelHeaderDividerColor:d,calendarDaysDividerColor:d,calendarDividerColor:d,panelActionDividerColor:d,panelBoxShadow:h,panelBorderRadius:f,calendarTitleFontWeight:p,iconColor:l,iconColorDisabled:u})}};const s9={hours:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],minutes:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"],seconds:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"],period:["AM","PM"]};function l9(t,e){return Array.isArray(e)?e.map((t=>Math.floor(t))).map((t=>`00${t}`.slice(-2))):"number"==typeof e?t.filter((t=>Number(t)%e==0)):t}function u9(t,e,n){return!n||("number"==typeof n?t%n==0:n.includes(t))}const c9=Symbol("timePicker");var d9=Ke({name:"TimePickerPanelCol",props:{clsPrefix:{type:String,required:!0},data:{type:Array,required:!0},activeValue:{type:Number,default:null},onItemClick:Function},render(){const{activeValue:t,onItemClick:e,clsPrefix:n}=this;return this.data.map((r=>{const{value:i,disabled:o}=r,a=Number(i),s=t===a;return Ei("div",{key:i,"data-active":s?"":null,class:[`${n}-time-picker-col__item`,{[`${n}-time-picker-col__item--active`]:s,[`${n}-time-picker-col__item--disabled`]:o}],onClick:e&&!o?()=>e(a):void 0},i)}))}});var h9=Ke({name:"TimePickerPanel",props:{actions:{type:Array,default:()=>["now","confirm"]},showHour:{type:Boolean,default:!0},showMinute:{type:Boolean,default:!0},showSecond:{type:Boolean,default:!0},showPeriod:{type:Boolean,default:!0},isHourInvalid:Boolean,isMinuteInvalid:Boolean,isSecondInvalid:Boolean,isValueInvalid:Boolean,hourValue:{type:Number,default:null},minuteValue:{type:Number,default:null},secondValue:{type:Number,default:null},isHourDisabled:Function,isMinuteDisabled:Function,isSecondDisabled:Function,onHourClick:{type:Function,required:!0},onMinuteClick:{type:Function,required:!0},onSecondClick:{type:Function,required:!0},onNowClick:Function,nowText:String,confirmText:String,transitionDisabled:Boolean,onConfirmClick:Function,onFocusin:Function,onFocusout:Function,onFocusDetectorFocus:Function,onKeydown:Function,hours:[Number,Array],minutes:[Number,Array],seconds:[Number,Array]},setup(t){const{mergedThemeRef:e,mergedClsPrefixRef:n}=je(c9);return{mergedTheme:e,mergedClsPrefix:n,hours:Ee((()=>{const{isHourDisabled:e,hours:n}=t;return l9(s9.hours,n).map((t=>({value:t,disabled:!!e&&e(Number(t))})))})),minutes:Ee((()=>{const{isMinuteDisabled:e,minutes:n}=t;return l9(s9.minutes,n).map((n=>({value:n,disabled:!!e&&e(Number(n),t.hourValue)})))})),seconds:Ee((()=>{const{isSecondDisabled:e,seconds:n}=t;return l9(s9.seconds,n).map((n=>({value:n,disabled:!!e&&e(Number(n),t.minuteValue,t.hourValue)})))})),hourScrollRef:ge(null),minuteScrollRef:ge(null),secondScrollRef:ge(null)}},render(){var t,e;const{mergedClsPrefix:n,mergedTheme:r}=this;return Ei("div",{tabindex:0,class:`${n}-time-picker-panel`,onFocusin:this.onFocusin,onFocusout:this.onFocusout,onKeydown:this.onKeydown},[Ei("div",{class:`${n}-time-picker-cols`},this.showHour?Ei("div",{class:[`${n}-time-picker-col`,{[`${n}-time-picker-col--invalid`]:this.isHourInvalid,[`${n}-time-picker-col--transition-disabled`]:this.transitionDisabled}]},Ei(o3,{ref:"hourScrollRef",theme:r.peers.Scrollbar,themeOverrides:r.peerOverrides.Scrollbar},{default:()=>[Ei(d9,{clsPrefix:n,data:this.hours,activeValue:this.hourValue,onItemClick:this.onHourClick}),Ei("div",{class:`${n}-time-picker-col__padding`})]})):null,this.showMinute?Ei("div",{class:[`${n}-time-picker-col`,{[`${n}-time-picker-col--transition-disabled`]:this.transitionDisabled,[`${n}-time-picker-col--invalid`]:this.isMinuteInvalid}]},Ei(o3,{ref:"minuteScrollRef",theme:r.peers.Scrollbar,themeOverrides:r.peerOverrides.Scrollbar},{default:()=>[Ei(d9,{clsPrefix:n,data:this.minutes,activeValue:this.minuteValue,onItemClick:this.onMinuteClick}),Ei("div",{class:`${n}-time-picker-col__padding`})]})):null,this.showSecond?Ei("div",{class:[`${n}-time-picker-col`,{[`${n}-time-picker-col--invalid`]:this.isSecondInvalid,[`${n}-time-picker-col--transition-disabled`]:this.transitionDisabled}]},Ei(o3,{ref:"secondScrollRef",theme:r.peers.Scrollbar,themeOverrides:r.peerOverrides.Scrollbar},{default:()=>[Ei(d9,{clsPrefix:n,data:this.seconds,activeValue:this.secondValue,onItemClick:this.onSecondClick}),Ei("div",{class:`${n}-time-picker-col__padding`})]})):null),Ei("div",{class:`${n}-time-picker-actions`},(null===(t=this.actions)||void 0===t?void 0:t.includes("now"))?Ei(y5,{size:"tiny",theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,onClick:this.onNowClick},{default:()=>this.nowText}):null,(null===(e=this.actions)||void 0===e?void 0:e.includes("confirm"))?Ei(y5,{size:"tiny",type:"primary",class:`${n}-time-picker-actions__confirm`,theme:r.peers.Button,themeOverrides:r.peerOverrides.Button,disabled:this.isValueInvalid,onClick:this.onConfirmClick},{default:()=>this.confirmText}):null),Ei(D0,{onFocus:this.onFocusDetectorFocus})])}}),f9=EQ([AQ("time-picker","\n z-index: auto;\n position: relative;\n ",[AQ("time-picker-icon","\n color: var(--icon-color);\n transition: color .3s var(--bezier);\n "),TQ("disabled",[AQ("time-picker-icon",{color:"var(--icon-color-disabled)"})])]),AQ("time-picker-panel","\n outline: none;\n font-size: var(--item-font-size);\n border-radius: var(--border-radius);\n margin: 4px 0;\n min-width: 104px;\n overflow: hidden;\n background-color: var(--panel-color);\n box-shadow: var(--panel-box-shadow);\n ",[h3(),AQ("time-picker-actions","\n padding: var(--panel-action-padding);\n align-items: center;\n display: flex;\n justify-content: space-evenly;\n "),AQ("time-picker-cols","\n height: calc(var(--item-height) * 7);\n display: flex;\n position: relative;\n border-bottom: 1px solid var(--panel-divider-color);\n "),AQ("time-picker-col","\n flex-grow: 1;\n min-width: var(--item-width);\n height: calc(var(--item-height) * 7);\n flex-direction: column;\n transition: box-shadow .3s var(--bezier);\n ",[TQ("transition-disabled",[_Q("item",{transition:"none"})]),_Q("padding",{height:"calc(var(--item-height) * 6)"}),_Q("item","\n cursor: pointer;\n height: var(--item-height);\n display: flex;\n align-items: center;\n justify-content: center;\n transition: \n color .3s var(--bezier),\n background-color .3s var(--bezier),\n opacity .3s var(--bezier),\n text-decoration-color .3s var(--bezier);\n background: #0000;\n text-decoration-color: #0000;\n color: var(--item-text-color);\n ",[PQ("disabled",[EQ("&:hover",{backgroundColor:"var(--item-color-hover)"})]),TQ("active","\n background-color: var(--item-color-hover);\n color: var(--item-text-color-active);\n "),TQ("disabled","\n opacity: var(--item-opacity-disabled);\n cursor: not-allowed;\n ")]),TQ("invalid",[_Q("item",[TQ("active","\n text-decoration: line-through;\n text-decoration-color: var(--item-text-color-active);\n ")])])])])]);function p9(t,e){return void 0===t||(Array.isArray(t)?t.every((t=>t>=0&&t<=e)):t>=0&&t<=e)}var g9=Ke({name:"TimePicker",props:Object.assign(Object.assign({},LJ.props),{to:IJ.propTo,bordered:{type:Boolean,default:void 0},actions:Array,defaultValue:{type:Number,default:null},placeholder:String,placement:{type:String,default:"bottom-start"},value:Number,format:{type:String,default:"HH:mm:ss"},isHourDisabled:Function,size:String,isMinuteDisabled:Function,isSecondDisabled:Function,clearable:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onBlur:[Function,Array],onFocus:[Function,Array],stateful:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},disabled:{type:Boolean,default:void 0},onChange:{type:[Function,Array],validator:()=>!0,default:void 0},hours:{type:[Number,Array],validator:t=>p9(t,23)},minutes:{type:[Number,Array],validator:t=>p9(t,59)},seconds:{type:[Number,Array],validator:t=>p9(t,59)}}),setup(t){const{mergedBorderedRef:e,mergedClsPrefixRef:n,namespaceRef:r}=FJ(t),{localeRef:i,dateLocaleRef:o}=t0("TimePicker"),a=Dq(t),{mergedSizeRef:s,mergedDisabledRef:l}=a,u=LJ("TimePicker","TimePicker",f9,i9,t,n),c=cJ(),d=ge(null),h=ge(null),f=ge(t.defaultValue),p=aJ(Se(t,"value"),f),g=Ee((()=>({locale:o.value.locale}))),{value:v}=p,m=ge(null===v?"":l4(v,t.format,g.value)),y=ge(!1),b=ge(v),x=ge(!1),w=Ee((()=>i.value.now)),C=Ee((()=>void 0!==t.placeholder?t.placeholder:i.value.placeholder)),S=Ee((()=>i.value.negativeText)),k=Ee((()=>i.value.positiveText)),E=Ee((()=>/H|h|K|k/.test(t.format))),M=Ee((()=>t.format.includes("m"))),A=Ee((()=>t.format.includes("s"))),_=Ee((()=>{const{isHourDisabled:e}=t;return null!==O.value&&(!u9(O.value,0,t.hours)||!!e&&e(O.value))})),T=Ee((()=>{const{value:e}=R,{value:n}=O;if(null===e||null===n)return!1;if(!u9(e,0,t.minutes))return!0;const{isMinuteDisabled:r}=t;return!!r&&r(e,n)})),P=Ee((()=>{const{value:e}=R,{value:n}=O,{value:r}=L;if(null===r||null===e||null===n)return!1;if(!u9(r,0,t.seconds))return!0;const{isSecondDisabled:i}=t;return!!i&&i(r,e,n)})),I=Ee((()=>_.value||T.value||P.value)),D=Ee((()=>t.format.length+4)),O=Ee((()=>{const{value:t}=p;return null===t?null:Number(l4(t,"HH",g.value))})),R=Ee((()=>{const{value:t}=p;return null===t?null:Number(l4(t,"mm",g.value))})),L=Ee((()=>{const{value:t}=p;return null===t?null:Number(l4(t,"ss",g.value))}));function B(e){const{onUpdateValue:n,"onUpdate:value":r,onChange:i}=t,{nTriggerFormChange:o,nTriggerFormInput:s}=a;n&&pJ(n,e),r&&pJ(r,e),i&&pJ(i,e),f.value=e,o(),s()}function F(e){const{onBlur:n}=t,{nTriggerFormBlur:r}=a;n&&pJ(n,e),r()}function N(e){void 0===e&&(e=p.value),m.value=null===e?"":l4(e,t.format,g.value)}function z(){var t,e,n;if(!h.value)return;const{hourScrollRef:r,minuteScrollRef:i,secondScrollRef:o}=h.value;if(r){const e=null===(t=r.contentRef)||void 0===t?void 0:t.querySelector("[data-active]");e&&r.scrollTo({top:e.offsetTop})}if(i){const t=null===(e=i.contentRef)||void 0===e?void 0:e.querySelector("[data-active]");t&&i.scrollTo({top:t.offsetTop})}if(o){const t=null===(n=o.contentRef)||void 0===n?void 0:n.querySelector("[data-active]");t&&o.scrollTo({top:t.offsetTop})}}function j(t){var e,n,r;return!(!(null===(n=null===(e=d.value)||void 0===e?void 0:e.wrapperElRef)||void 0===n?void 0:n.contains(t.relatedTarget))&&!(null===(r=h.value)||void 0===r?void 0:r.$el.contains(t.relatedTarget)))}function G(){b.value=p.value,y.value=!0,ci(z)}function U({returnFocus:t}){var e;y.value&&(y.value=!1,t&&(null===(e=d.value)||void 0===e||e.focus()))}return xi(p,(t=>{N(t),x.value=!0,ci((()=>{x.value=!1})),ci(z)})),xi(y,(()=>{I.value&&B(b.value)})),ze(c9,{mergedThemeRef:u,mergedClsPrefixRef:n}),{mergedBordered:e,mergedClsPrefix:n,namespace:r,uncontrolledValue:f,mergedValue:p,isMounted:sJ(),inputInstRef:d,panelInstRef:h,adjustedTo:IJ(t),active:y,localizedNow:w,localizedPlaceholder:C,localizedNegativeText:S,localizedPositiveText:k,hourInFormat:E,minuteInFormat:M,secondInFormat:A,mergedAttrSize:D,displayTimeString:m,mergedSize:s,mergedDisabled:l,isValueInvalid:I,isHourInvalid:_,isMinuteInvalid:T,isSecondInvalid:P,transitionDisabled:x,hourValue:O,minuteValue:R,secondValue:L,handleTimeInputFocus:function(e){j(e)||function(e){const{onFocus:n}=t,{nTriggerFormFocus:r}=a;n&&pJ(n,e),r()}(e)},handleTimeInputBlur:function(t){var e;if(!j(t)&&y.value){const n=null===(e=h.value)||void 0===e?void 0:e.$el;(null==n?void 0:n.contains(t.relatedTarget))||(F(t),U({returnFocus:!1}))}},handleNowClick:function(){const e=new Date,n={hours:p4,minutes:g4,seconds:m4},[r,i,o]=["hours","minutes","seconds"].map((r=>!t[r]||u9(n[r](e),0,t[r])?n[r](e):function(t,e,n){const r=l9(s9[e],n).map(Number);let i,o;for(let a=0;a<r.length;++a){const e=r[a];if(e===t)return e;if(e>t){o=e;break}i=e}return void 0===i?(o||yJ("time-picker","Please set 'hours' or 'minutes' or 'seconds' props"),o):void 0===o||o-t>t-i?i:o}(n[r](e),r,t[r]))),a=v6(g6(p6(p.value?p.value:y4(e),r),i),o);B(y4(a))},handleConfirmClick:function(){N(),U({returnFocus:!0})},handleTimeInputUpdateValue:function(e){if(""===e)return void B(null);const n=x6(e,t.format,new Date,g.value);if(m.value=e,M5(n)){const{value:t}=p;if(null!==t){B(y4(f6(t,{hours:p4(n),minutes:g4(n),seconds:m4(n)})))}else B(y4(n))}},handleMenuFocusOut:function(t){j(t)||(F(t),U({returnFocus:!1}))},handleCancelClick:function(){B(b.value),y.value=!1},handleClickOutside:function(t){var e,n;y.value&&!(null===(n=null===(e=d.value)||void 0===e?void 0:e.wrapperElRef)||void 0===n?void 0:n.contains(t.target))&&U({returnFocus:!1})},handleTimeInputActivate:function(){l.value||y.value||G()},handleTimeInputDeactivate:function(){l.value||(N(),U({returnFocus:!1}))},handleHourClick:function(t){null===p.value?B(y4(p6(function(t){GJ(1,arguments);var e=UJ(t);return e.setMinutes(0,0,0),e}(new Date),t))):B(y4(p6(p.value,t)))},handleMinuteClick:function(t){null===p.value?B(y4(g6(function(t){GJ(1,arguments);var e=UJ(t);return e.setSeconds(0,0),e}(new Date),t))):B(y4(g6(p.value,t)))},handleSecondClick:function(t){null===p.value?B(y4(v6(d6(new Date),t))):B(y4(v6(p.value,t)))},handleTimeInputClear:function(t){t.stopPropagation(),B(null),N(null)},handleFocusDetectorFocus:function(){U({returnFocus:!0})},handleMenuKeyDown:function(t){var e;switch(t.code){case"Escape":U({returnFocus:!0});break;case"Tab":c.shift&&t.target===(null===(e=h.value)||void 0===e?void 0:e.$el)&&(t.preventDefault(),U({returnFocus:!0}))}},handleTriggerClick:function(t){l.value||aq(t,"clear")||y.value||G()},mergedTheme:u,triggerCssVars:Ee((()=>{const{common:{cubicBezierEaseInOut:t},self:{iconColor:e,iconColorDisabled:n}}=u.value;return{"--icon-color":e,"--icon-color-disabled":n,"--bezier":t}})),cssVars:Ee((()=>{const{self:{panelColor:t,itemTextColor:e,itemTextColorActive:n,itemColorHover:r,panelDividerColor:i,panelBoxShadow:o,itemOpacityDisabled:a,borderRadius:s,itemFontSize:l,itemWidth:c,itemHeight:d,panelActionPadding:h},common:{cubicBezierEaseInOut:f}}=u.value;return{"--bezier":f,"--border-radius":s,"--item-color-hover":r,"--item-font-size":l,"--item-height":d,"--item-opacity-disabled":a,"--item-text-color":e,"--item-text-color-active":n,"--item-width":c,"--panel-action-padding":h,"--panel-box-shadow":o,"--panel-color":t,"--panel-divider-color":i}}))}},render(){const{mergedClsPrefix:t}=this;return Ei("div",{class:`${t}-time-picker`,style:this.triggerCssVars},Ei(c1,null,{default:()=>[Ei(d1,null,{default:()=>Ei(e5,{ref:"inputInstRef",value:this.displayTimeString,bordered:this.mergedBordered,passivelyActivated:!0,attrSize:this.mergedAttrSize,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,stateful:this.stateful,size:this.mergedSize,placeholder:this.localizedPlaceholder,clearable:this.clearable,disabled:this.mergedDisabled,textDecoration:this.isValueInvalid?"line-through":void 0,onFocus:this.handleTimeInputFocus,onBlur:this.handleTimeInputBlur,onActivate:this.handleTimeInputActivate,onDeactivate:this.handleTimeInputDeactivate,onUpdateValue:this.handleTimeInputUpdateValue,onClear:this.handleTimeInputClear,internalDeactivateOnEnter:!0,internalForceFocus:this.active,onClick:this.handleTriggerClick},this.showIcon?{[this.clearable?"clear":"suffix"]:()=>Ei(T0,{clsPrefix:t,class:`${t}-time-picker-icon`},{default:()=>Ei(x0,null)})}:null)}),Ei(I1,{teleportDisabled:this.adjustedTo===IJ.tdkey,show:this.active,to:this.adjustedTo,containerClass:this.namespace,placement:"bottom-start"},{default:()=>Ei($i,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.active?jn(Ei(h9,{ref:"panelInstRef",actions:this.actions,style:this.cssVars,seconds:this.seconds,minutes:this.minutes,hours:this.hours,transitionDisabled:this.transitionDisabled,hourValue:this.hourValue,showHour:this.hourInFormat,isHourInvalid:this.isHourInvalid,isHourDisabled:this.isHourDisabled,minuteValue:this.minuteValue,showMinute:this.minuteInFormat,isMinuteInvalid:this.isMinuteInvalid,isMinuteDisabled:this.isMinuteDisabled,secondValue:this.secondValue,showSecond:this.secondInFormat,isSecondInvalid:this.isSecondInvalid,isSecondDisabled:this.isSecondDisabled,isValueInvalid:this.isValueInvalid,nowText:this.localizedNow,confirmText:this.localizedPositiveText,onFocusout:this.handleMenuFocusOut,onKeydown:this.handleMenuKeyDown,onHourClick:this.handleHourClick,onMinuteClick:this.handleMinuteClick,onSecondClick:this.handleSecondClick,onNowClick:this.handleNowClick,onConfirmClick:this.handleConfirmClick,onFocusDetectorFocus:this.handleFocusDetectorFocus}),[[g1,this.handleClickOutside]]):null})})]}))}});const v9=Symbol("datePicker"),m9={active:Boolean,dateFormat:{type:String,default:"yyyy-MM-dd"},timeFormat:{type:String,default:"HH:mm:ss"},value:{type:[Array,Number],default:null},shortcuts:Object,onConfirm:Function,onClose:Function,onTabOut:Function,onUpdateValue:{type:Function,required:!0}};function y9(t){const{dateLocaleRef:e,timePickerSizeRef:n,localeRef:r,mergedClsPrefixRef:i,mergedThemeRef:o}=je(v9),a=Ee((()=>({locale:e.value.locale}))),s=ge(null),l=cJ();function u(e,n){const{onUpdateValue:r}=t;r(e,n)}function c(e=!1){const{onClose:n}=t;n&&n(e)}function d(){const{onTabOut:e}=t;e&&e()}let h=null,f=!1;return{mergedTheme:o,mergedClsPrefix:i,dateFnsOptions:a,timePickerSize:n,selfRef:s,locale:r,doConfirm:function(){const{onConfirm:e}=t;e&&e()},doClose:c,doUpdateValue:u,doTabOut:d,handleClearClick:function(){u(null,!0),c(!0)},handleFocusDetectorFocus:function(){d()},disableTransitionOneTick:function(){t.active&&ci((()=>{const{value:t}=s;if(!t)return;const e=t.querySelectorAll("[data-n-date]");e.forEach((t=>{t.classList.add("transition-disabled")})),t.offsetWidth,e.forEach((t=>{t.classList.remove("transition-disabled")}))}))},handlePanelKeyDown:function(t){"Tab"===t.code&&t.target===s.value&&l.shift&&(t.preventDefault(),d())},handlePanelFocus:function(t){const{value:e}=s;l.tab&&t.target===e&&(null==e?void 0:e.contains(t.relatedTarget))&&d()},cachePendingValue:function(){h=t.value,f=!0},clearPendingValue:function(){f=!1},restorePendingValue:function(){f&&(u(h,!1),f=!1)}}}y9.props=m9;const b9=Object.assign(Object.assign({},y9.props),{actions:{type:Array,default:()=>["now","clear","confirm"]}});function x9(t,e){const n=y9(t),{isValueInvalidRef:r,isDateDisabledRef:i,isDateInvalidRef:o,isTimeInvalidRef:a,isDateTimeInvalidRef:s,isHourDisabledRef:l,isMinuteDisabledRef:u,isSecondDisabledRef:c,localeRef:d,datePickerSlots:h}=je(v9),f={isValueInvalid:r,isDateDisabled:i,isDateInvalid:o,isTimeInvalid:a,isDateTimeInvalid:s,isHourDisabled:l,isMinuteDisabled:u,isSecondDisabled:c},p=ge(null===t.value||Array.isArray(t.value)?"":l4(t.value,t.dateFormat)),g=ge(null===t.value||Array.isArray(t.value)?Date.now():t.value),v=ge(Date.now()),m=Ee((()=>b6(g.value,t.value,v.value,d.value.firstDayOfWeek))),y=Ee((()=>m.value.slice(0,7).map((t=>{const{ts:e}=t;return l4(e,d.value.dayFormat,n.dateFnsOptions.value)})))),b=Ee((()=>l4(g.value,d.value.monthFormat,n.dateFnsOptions.value))),x=Ee((()=>l4(g.value,d.value.yearFormat,n.dateFnsOptions.value)));function w(t){return y4("datetime"===e?d6(t):k5(t))}function C(t){const{isDateDisabled:{value:e}}=f;return!!e&&e(t)}return xi(g,((t,e)=>{c6(t,e)||n.disableTransitionOneTick()})),xi(Ee((()=>t.value)),(e=>{null===e||Array.isArray(e)?p.value="":(p.value=l4(e,t.dateFormat,n.dateFnsOptions.value),g.value=e)})),Object.assign(Object.assign(Object.assign({dateArray:m,calendarYear:x,calendarMonth:b,weekdays:y,mergedIsDateDisabled:C,nextYear:function(){g.value=y4(E5(g.value,1))},prevYear:function(){g.value=y4(E5(g.value,-1))},nextMonth:function(){g.value=y4(w5(g.value,1))},prevMonth:function(){g.value=y4(w5(g.value,-1))},handleNowClick:function(){n.doUpdateValue(y4(w(Date.now())),!0),g.value=Date.now(),n.doClose(!0)},handleConfirmClick:function(){f.isDateInvalid.value||f.isTimeInvalid.value||(n.doConfirm(),t.active&&n.doClose())}},f),n),{handleDateClick:function(r){if(C(r.ts))return;let i;i=null===t.value||Array.isArray(t.value)?Date.now():t.value,i=y4(f6(i,r.dateObject)),n.doUpdateValue(y4(w(i)),"date"===e),"date"===e&&n.doClose()},handleDateInputBlur:function(){const e=x6(p.value,t.dateFormat,new Date,n.dateFnsOptions.value);if(M5(e)){if(null===t.value)n.doUpdateValue(y4(w(Date.now())),!1);else if(!Array.isArray(t.value)){const r=f6(t.value,{year:b4(e),month:v4(e),date:d4(e)});n.doUpdateValue(y4(w(y4(r))),!1)}}else!function(e){if(null===t.value||Array.isArray(t.value))return void(p.value="");void 0===e&&(e=t.value);p.value=l4(e,t.dateFormat,n.dateFnsOptions.value)}()},handleDateInput:function(e){const r=x6(e,t.dateFormat,new Date,n.dateFnsOptions.value);if(M5(r)){if(null===t.value)n.doUpdateValue(y4(w(Date.now())),!1);else if(!Array.isArray(t.value)){const e=f6(t.value,{year:b4(r),month:v4(r),date:d4(r)});n.doUpdateValue(y4(w(y4(e))),!1)}}else p.value=e},handleTimePickerChange:function(t){n.doUpdateValue(t,!1)},clearSelectedDateTime:function(){n.doUpdateValue(null,!0),p.value="",n.doClose(!0)},timePickerSize:n.timePickerSize,dateInputValue:p,datePickerSlots:h})}x9.props=b9;var w9=Ke({name:"DateTimePanel",props:x9.props,setup:t=>x9(t,"datetime"),render(){var t,e,n,r;const{mergedClsPrefix:i,mergedTheme:o,shortcuts:a}=this;return Ei("div",{ref:"selfRef",tabindex:0,class:`${i}-date-panel ${i}-date-panel--datetime`,onKeydown:this.handlePanelKeyDown,onFocus:this.handlePanelFocus},Ei("div",{class:`${i}-date-panel-header`},Ei(e5,{value:this.dateInputValue,theme:o.peers.Input,themeOverrides:o.peerOverrides.Input,stateful:!1,size:this.timePickerSize,class:`${i}-date-panel-date-input`,textDecoration:this.isDateInvalid?"line-through":"",placeholder:this.locale.selectDate,onBlur:this.handleDateInputBlur,onUpdateValue:this.handleDateInput}),Ei(g9,{showIcon:!1,format:this.timeFormat,stateful:!1,theme:o.peers.TimePicker,themeOverrides:o.peerOverrides.TimePicker,to:!1,size:this.timePickerSize,value:Array.isArray(this.value)?null:this.value,placeholder:this.locale.selectTime,isHourDisabled:this.isHourDisabled,isMinuteDisabled:this.isMinuteDisabled,isSecondDisabled:this.isSecondDisabled,onUpdateValue:this.handleTimePickerChange})),Ei("div",{class:`${i}-date-panel-calendar`},Ei("div",{class:`${i}-date-panel-month`},Ei("div",{class:`${i}-date-panel-month__fast-prev`,onClick:this.prevYear},Ei(f0,null)),Ei("div",{class:`${i}-date-panel-month__prev`,onClick:this.prevMonth},Ei(i0,null)),Ei("div",{class:`${i}-date-panel-month__month-year`},this.locale.monthBeforeYear?`${this.calendarMonth} ${this.calendarYear}`:`${this.calendarYear} ${this.calendarMonth}`),Ei("div",{class:`${i}-date-panel-month__next`,onClick:this.nextMonth},Ei(v0,null)),Ei("div",{class:`${i}-date-panel-month__fast-next`,onClick:this.nextYear},Ei(p0,null))),Ei("div",{class:`${i}-date-panel-weekdays`},this.weekdays.map((t=>Ei("div",{key:t,class:`${i}-date-panel-weekdays__day`},t)))),Ei("div",{class:`${i}-date-panel-dates`},this.dateArray.map(((t,e)=>Ei("div",{"data-n-date":!0,key:e,class:[`${i}-date-panel-date`,{[`${i}-date-panel-date--current`]:t.isCurrentDate,[`${i}-date-panel-date--selected`]:t.selected,[`${i}-date-panel-date--excluded`]:!t.inCurrentMonth,[`${i}-date-panel-date--disabled`]:this.mergedIsDateDisabled(t.ts)}],onClick:()=>this.handleDateClick(t)},t.dateObject.date,t.isCurrentDate?Ei("div",{class:`${i}-date-panel-date__sup`}):null))))),this.datePickerSlots.footer?Ei("div",{class:`${i}-date-panel-footer`},Ir(this.datePickerSlots,"footer")):null,(null===(t=this.actions)||void 0===t?void 0:t.length)||a?Ei("div",{class:`${i}-date-panel-actions`},Ei("div",{class:`${i}-date-panel-actions__prefix`},a&&Object.keys(a).map((t=>{const e=a[t];return Array.isArray(e)?null:Ei(b5,{size:"tiny",onMouseenter:()=>{this.cachePendingValue(),this.doUpdateValue(e,!1)},onClick:()=>{this.doUpdateValue(e,!1),this.clearPendingValue(),this.handleConfirmClick()},onMouseleave:()=>{this.restorePendingValue()}},{default:()=>t})}))),Ei("div",{class:`${i}-date-panel-actions__suffix`},(null===(e=this.actions)||void 0===e?void 0:e.includes("clear"))?Ei(y5,{theme:o.peers.Button,themeOverrides:o.peerOverrides.Button,size:"tiny",onClick:this.clearSelectedDateTime},{default:()=>this.locale.clear}):null,(null===(n=this.actions)||void 0===n?void 0:n.includes("now"))?Ei(y5,{theme:o.peers.Button,themeOverrides:o.peerOverrides.Button,size:"tiny",onClick:this.handleNowClick},{default:()=>this.locale.now}):null,(null===(r=this.actions)||void 0===r?void 0:r.includes("confirm"))?Ei(y5,{theme:o.peers.Button,themeOverrides:o.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isDateInvalid,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,Ei(D0,{onFocus:this.handleFocusDetectorFocus}))}});const C9=Object.assign(Object.assign({},y9.props),{actions:{type:Array,default:()=>["clear","confirm"]}});function S9(t,e="datetime"){const{isDateDisabledRef:n,isStartHourDisabledRef:r,isEndHourDisabledRef:i,isStartMinuteDisabledRef:o,isEndMinuteDisabledRef:a,isStartSecondDisabledRef:s,isEndSecondDisabledRef:l,isStartDateInvalidRef:u,isEndDateInvalidRef:c,isStartTimeInvalidRef:d,isEndTimeInvalidRef:h,isStartValueInvalidRef:f,isEndValueInvalidRef:p,isRangeInvalidRef:g,localeRef:v,rangesRef:m,closeOnSelectRef:y,updateValueOnCloseRef:b,datePickerSlots:x}=je(v9),w={isDateDisabled:n,isStartHourDisabled:r,isEndHourDisabled:i,isStartMinuteDisabled:o,isEndMinuteDisabled:a,isStartSecondDisabled:s,isEndSecondDisabled:l,isStartDateInvalid:u,isEndDateInvalid:c,isStartTimeInvalid:d,isEndTimeInvalid:h,isStartValueInvalid:f,isEndValueInvalid:p,isRangeInvalid:g},C=y9(t),S=ge(null),k=ge(null),E=ge(Date.now()),M=ge(y4(w5(Date.now(),1))),A=ge(Date.now()),_=ge(!1),T=ge(0),{value:P,dateFormat:I}=t,D=ge(Array.isArray(P)?l4(P[0],I,C.dateFnsOptions.value):""),O=ge(Array.isArray(P)?l4(P[1],I,C.dateFnsOptions.value):"");Array.isArray(P)&&X(P);const R=Ee((()=>_.value?"end":"start")),L=Ee((()=>b6(E.value,t.value,A.value,v.value.firstDayOfWeek))),B=Ee((()=>b6(M.value,t.value,A.value,v.value.firstDayOfWeek))),F=Ee((()=>L.value.slice(0,7).map((t=>{const{ts:e}=t;return l4(e,v.value.dayFormat,C.dateFnsOptions.value)})))),N=Ee((()=>l4(E.value,v.value.monthFormat,C.dateFnsOptions.value))),z=Ee((()=>l4(M.value,v.value.monthFormat,C.dateFnsOptions.value))),j=Ee((()=>l4(E.value,v.value.yearFormat,C.dateFnsOptions.value))),G=Ee((()=>l4(M.value,v.value.yearFormat,C.dateFnsOptions.value))),U=Ee((()=>{const{value:e}=t;return Array.isArray(e)?e[0]:null})),$=Ee((()=>{const{value:e}=t;return Array.isArray(e)?e[1]:null})),V=Ee((()=>{const{shortcuts:e}=t;return e||m.value}));function W(t,e){b4(t)===b4(e)&&v4(t)===v4(e)||C.disableTransitionOneTick()}function H(t){const e=_5(E.value),n=_5(M.value);e>=n&&(t?M.value=y4(w5(e,1)):E.value=y4(w5(n,-1)))}function Y(e){const r=n.value;if(!r)return!1;if(!Array.isArray(t.value))return r(e,"start",null);if("start"===R.value)return r(e,"start",null);{const{value:t}=T;return e<T.value?r(e,"start",[t,t]):r(e,"end",[t,t])}}function X(t){if(null===t)return;const[e,n]=t;E.value=e,_5(n)<=_5(e)?M.value=y4(_5(w5(e,1))):M.value=y4(_5(n))}function q(){g.value||(C.doConfirm(),K())}function K(){_.value=!1,t.active&&C.doClose()}function Z(e){"number"!=typeof e&&(e=y4(e)),null===t.value?C.doUpdateValue([e,e],!1):Array.isArray(t.value)&&C.doUpdateValue([e,Math.max(t.value[1],e)],!1)}function Q(e){"number"!=typeof e&&(e=y4(e)),null===t.value?C.doUpdateValue([e,e],!1):Array.isArray(t.value)&&C.doUpdateValue([Math.min(t.value[0],e),e],!1)}function J(t,e){void 0===e&&(e=t),"number"!=typeof t&&(t=y4(t)),"number"!=typeof e&&(e=y4(e)),C.doUpdateValue([t,e],!1)}function tt(t){return y4("datetimerange"===e?d6(t):k5(t))}function et(e){const{value:n}=t;if(null===n||!Array.isArray(n))return D.value="",void(O.value="");const{dateFormat:r}=t;void 0===e&&(e=n),D.value=l4(e[0],r,C.dateFnsOptions.value),O.value=l4(e[1],r,C.dateFnsOptions.value)}return xi(Ee((()=>t.value)),(e=>{if(null!==e&&Array.isArray(e)){const[n,r]=e,{dateFormat:i}=t;D.value=l4(n,i,C.dateFnsOptions.value),O.value=l4(r,i,C.dateFnsOptions.value),_.value||X(e)}else D.value="",O.value=""})),xi(E,W),xi(M,W),Object.assign(Object.assign(Object.assign({startDatesElRef:S,endDatesElRef:k,resetSelectingStatus:function(t){var e,n;(null===(e=S.value)||void 0===e?void 0:e.contains(t.target))||(null===(n=k.value)||void 0===n?void 0:n.contains(t.target))||(_.value=!1)},handleDateClick:function(t){Y(t.ts)||(_.value?(_.value=!1,y.value&&"daterange"===e&&(b.value?K():q())):(_.value=!0,T.value=t.ts,J(t.ts)))},handleDateMouseEnter:function(t){if(_.value){if(Y(t.ts))return;t.ts>=T.value?J(T.value,t.ts):J(t.ts,T.value)}},handleConfirmClick:q,startCalendarPrevYear:function(){E.value=y4(w5(E.value,-12)),H(!0)},startCalendarPrevMonth:function(){E.value=y4(w5(E.value,-1)),H(!0)},startCalendarNextYear:function(){E.value=y4(w5(E.value,12)),H(!0)},startCalendarNextMonth:function(){E.value=y4(w5(E.value,1)),H(!0)},endCalendarPrevYear:function(){M.value=y4(w5(M.value,-12)),H(!1)},endCalendarPrevMonth:function(){M.value=y4(w5(M.value,-1)),H(!1)},endCalendarNextMonth:function(){M.value=y4(w5(M.value,1)),H(!1)},endCalendarNextYear:function(){M.value=y4(w5(M.value,12)),H(!1)},mergedIsDateDisabled:Y,changeStartEndTime:J,ranges:m,startCalendarMonth:N,startCalendarYear:j,endCalendarMonth:z,endCalendarYear:G,weekdays:F,startDateArray:L,endDateArray:B},C),w),{startDateDisplayString:D,endDateInput:O,timePickerSize:C.timePickerSize,startTimeValue:U,endTimeValue:$,handleFocusDetectorFocus:C.handleFocusDetectorFocus,handleStartTimePickerChange:function(t){Z(t)},handleEndTimePickerChange:function(t){Q(t)},handleStartDateInput:function(e){const n=x6(e,t.dateFormat,new Date,C.dateFnsOptions.value);if(M5(n))if(t.value){if(Array.isArray(t.value)){Z(tt(y4(f6(t.value[0],{year:b4(n),month:v4(n),date:d4(n)}))))}}else{Z(tt(y4(f6(new Date,{year:b4(n),month:v4(n),date:d4(n)}))))}else D.value=e},handleStartDateInputBlur:function(){const e=x6(D.value,t.dateFormat,new Date,C.dateFnsOptions.value),{value:n}=t;if(M5(e)){if(null===n){Z(tt(y4(f6(new Date,{year:b4(e),month:v4(e),date:d4(e)}))))}else if(Array.isArray(n)){Z(tt(y4(f6(n[0],{year:b4(e),month:v4(e),date:d4(e)}))))}}else et()},handleEndDateInput:function(e){const n=x6(e,t.dateFormat,new Date,C.dateFnsOptions.value);if(M5(n)){if(null===t.value){Q(tt(y4(f6(new Date,{year:b4(n),month:v4(n),date:d4(n)}))))}else if(Array.isArray(t.value)){Q(tt(y4(f6(t.value[1],{year:b4(n),month:v4(n),date:d4(n)}))))}}else O.value=e},handleEndDateInputBlur:function(){const e=x6(O.value,t.dateFormat,new Date,C.dateFnsOptions.value),{value:n}=t;if(M5(e)){if(null===n){Q(tt(y4(f6(new Date,{year:b4(e),month:v4(e),date:d4(e)}))))}else if(Array.isArray(n)){Q(tt(y4(f6(n[1],{year:b4(e),month:v4(e),date:d4(e)}))))}}else et()},datePickerSlots:x,shortcuts:V})}S9.props=C9;var k9=Ke({name:"DateTimeRangePanel",props:S9.props,setup:t=>S9(t,"datetimerange"),render(){var t,e,n;const{mergedClsPrefix:r,mergedTheme:i,shortcuts:o}=this;return Ei("div",{ref:"selfRef",tabindex:0,class:`${r}-date-panel ${r}-date-panel--datetimerange`,onClick:this.resetSelectingStatus,onKeydown:this.handlePanelKeyDown,onFocus:this.handlePanelFocus},Ei("div",{class:`${r}-date-panel-header`},Ei(e5,{value:this.startDateDisplayString,theme:i.peers.Input,themeOverrides:i.peerOverrides.Input,size:this.timePickerSize,stateful:!1,class:`${r}-date-panel-date-input`,textDecoration:this.isStartValueInvalid?"line-through":"",placeholder:this.locale.selectDate,onBlur:this.handleStartDateInputBlur,onUpdateValue:this.handleStartDateInput}),Ei(g9,{size:this.timePickerSize,to:!1,showIcon:!1,theme:i.peers.TimePicker,themeOverrides:i.peerOverrides.TimePicker,stateful:!1,placeholder:this.locale.selectTime,format:this.timeFormat,value:this.startTimeValue,isHourDisabled:this.isStartHourDisabled,isMinuteDisabled:this.isStartMinuteDisabled,isSecondDisabled:this.isStartSecondDisabled,onUpdateValue:this.handleStartTimePickerChange}),Ei(e5,{value:this.endDateInput,theme:i.peers.Input,themeOverrides:i.peerOverrides.Input,stateful:!1,size:this.timePickerSize,class:`${r}-date-panel-date-input`,textDecoration:this.isEndValueInvalid?"line-through":"",placeholder:this.locale.selectDate,onBlur:this.handleEndDateInputBlur,onUpdateValue:this.handleEndDateInput}),Ei(g9,{showIcon:!1,theme:i.peers.TimePicker,themeOverrides:i.peerOverrides.TimePicker,to:!1,size:this.timePickerSize,stateful:!1,format:this.timeFormat,placeholder:this.locale.selectTime,value:this.endTimeValue,isHourDisabled:this.isEndHourDisabled,isMinuteDisabled:this.isEndMinuteDisabled,isSecondDisabled:this.isEndSecondDisabled,onUpdateValue:this.handleEndTimePickerChange})),Ei("div",{ref:"startDatesElRef",class:`${r}-date-panel-calendar ${r}-date-panel-calendar--start`},Ei("div",{class:`${r}-date-panel-month`},Ei("div",{class:`${r}-date-panel-month__fast-prev`,onClick:this.startCalendarPrevYear},Ei(f0,null)),Ei("div",{class:`${r}-date-panel-month__prev`,onClick:this.startCalendarPrevMonth},Ei(i0,null)),Ei("div",{class:`${r}-date-panel-month__month-year`},this.locale.monthBeforeYear?`${this.startCalendarMonth} ${this.startCalendarYear}`:`${this.startCalendarYear} ${this.startCalendarMonth}`),Ei("div",{class:`${r}-date-panel-month__next`,onClick:this.startCalendarNextMonth},Ei(v0,null)),Ei("div",{class:`${r}-date-panel-month__fast-next`,onClick:this.startCalendarNextYear},Ei(p0,null))),Ei("div",{class:`${r}-date-panel-weekdays`},this.weekdays.map((t=>Ei("div",{key:t,class:`${r}-date-panel-weekdays__day`},t)))),Ei("div",{class:`${r}-date-panel__divider`}),Ei("div",{class:`${r}-date-panel-dates`},this.startDateArray.map(((t,e)=>Ei("div",{"data-n-date":!0,key:e,class:[`${r}-date-panel-date`,{[`${r}-date-panel-date--excluded`]:!t.inCurrentMonth,[`${r}-date-panel-date--current`]:t.isCurrentDate,[`${r}-date-panel-date--selected`]:t.selected,[`${r}-date-panel-date--covered`]:t.inSpan,[`${r}-date-panel-date--start`]:t.startOfSpan,[`${r}-date-panel-date--end`]:t.endOfSpan,[`${r}-date-panel-date--disabled`]:this.mergedIsDateDisabled(t.ts)}],onClick:()=>this.handleDateClick(t),onMouseenter:()=>this.handleDateMouseEnter(t)},t.dateObject.date,t.isCurrentDate?Ei("div",{class:`${r}-date-panel-date__sup`}):null))))),Ei("div",{class:`${r}-date-panel__vertical-divider`}),Ei("div",{ref:"endDatesElRef",class:`${r}-date-panel-calendar ${r}-date-panel-calendar--end`},Ei("div",{class:`${r}-date-panel-month`},Ei("div",{class:`${r}-date-panel-month__fast-prev`,onClick:this.endCalendarPrevYear},Ei(f0,null)),Ei("div",{class:`${r}-date-panel-month__prev`,onClick:this.endCalendarPrevMonth},Ei(i0,null)),Ei("div",{class:`${r}-date-panel-month__month-year`},this.locale.monthBeforeYear?`${this.endCalendarMonth} ${this.endCalendarYear}`:`${this.endCalendarYear} ${this.endCalendarMonth}`),Ei("div",{class:`${r}-date-panel-month__next`,onClick:this.endCalendarNextMonth},Ei(v0,null)),Ei("div",{class:`${r}-date-panel-month__fast-next`,onClick:this.endCalendarNextYear},Ei(p0,null))),Ei("div",{class:`${r}-date-panel-weekdays`},this.weekdays.map((t=>Ei("div",{key:t,class:`${r}-date-panel-weekdays__day`},t)))),Ei("div",{class:`${r}-date-panel__divider`}),Ei("div",{class:`${r}-date-panel-dates`},this.endDateArray.map(((t,e)=>Ei("div",{"data-n-date":!0,key:e,class:[`${r}-date-panel-date`,{[`${r}-date-panel-date--excluded`]:!t.inCurrentMonth,[`${r}-date-panel-date--current`]:t.isCurrentDate,[`${r}-date-panel-date--selected`]:t.selected,[`${r}-date-panel-date--covered`]:t.inSpan,[`${r}-date-panel-date--start`]:t.startOfSpan,[`${r}-date-panel-date--end`]:t.endOfSpan,[`${r}-date-panel-date--disabled`]:this.mergedIsDateDisabled(t.ts)}],onClick:()=>this.handleDateClick(t),onMouseenter:()=>this.handleDateMouseEnter(t)},t.dateObject.date,t.isCurrentDate?Ei("div",{class:`${r}-date-panel-date__sup`}):null))))),this.datePickerSlots.footer?Ei("div",{class:`${r}-date-panel-footer`},Ir(this.datePickerSlots,"footer")):null,(null===(t=this.actions)||void 0===t?void 0:t.length)||o?Ei("div",{class:`${r}-date-panel-actions`},Ei("div",{class:`${r}-date-panel-actions__prefix`},o&&Object.keys(o).map((t=>{const e=o[t];return Array.isArray(e)?Ei(b5,{size:"tiny",onMouseenter:()=>{this.cachePendingValue(),this.changeStartEndTime(...e)},onClick:()=>{this.changeStartEndTime(...e),this.clearPendingValue(),this.handleConfirmClick()},onMouseleave:()=>{this.restorePendingValue()}},{default:()=>t}):null}))),Ei("div",{class:`${r}-date-panel-actions__suffix`},(null===(e=this.actions)||void 0===e?void 0:e.includes("clear"))?Ei(y5,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,(null===(n=this.actions)||void 0===n?void 0:n.includes("confirm"))?Ei(y5,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isRangeInvalid,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,Ei(D0,{onFocus:this.handleFocusDetectorFocus}))}}),E9=Ke({name:"DatePanel",props:x9.props,setup:t=>x9(t,"date"),render(){var t,e,n;const{mergedClsPrefix:r,mergedTheme:i,shortcuts:o}=this;return Ei("div",{ref:"selfRef",tabindex:0,class:`${r}-date-panel ${r}-date-panel--date`,onFocus:this.handlePanelFocus,onKeydown:this.handlePanelKeyDown},Ei("div",{class:`${r}-date-panel-calendar`},Ei("div",{class:`${r}-date-panel-month`},Ei("div",{class:`${r}-date-panel-month__fast-prev`,onClick:this.prevYear},Ei(f0,null)),Ei("div",{class:`${r}-date-panel-month__prev`,onClick:this.prevMonth},Ei(i0,null)),Ei("div",{class:`${r}-date-panel-month__month-year`},this.locale.monthBeforeYear?`${this.calendarMonth} ${this.calendarYear}`:`${this.calendarYear} ${this.calendarMonth}`),Ei("div",{class:`${r}-date-panel-month__next`,onClick:this.nextMonth},Ei(v0,null)),Ei("div",{class:`${r}-date-panel-month__fast-next`,onClick:this.nextYear},Ei(p0,null))),Ei("div",{class:`${r}-date-panel-weekdays`},this.weekdays.map((t=>Ei("div",{key:t,class:`${r}-date-panel-weekdays__day`},t)))),Ei("div",{class:`${r}-date-panel-dates`},this.dateArray.map(((t,e)=>Ei("div",{"data-n-date":!0,key:e,class:[`${r}-date-panel-date`,{[`${r}-date-panel-date--current`]:t.isCurrentDate,[`${r}-date-panel-date--selected`]:t.selected,[`${r}-date-panel-date--excluded`]:!t.inCurrentMonth,[`${r}-date-panel-date--disabled`]:this.mergedIsDateDisabled(t.ts)}],onClick:()=>this.handleDateClick(t)},t.dateObject.date,t.isCurrentDate?Ei("div",{class:`${r}-date-panel-date__sup`}):null))))),this.datePickerSlots.footer?Ei("div",{class:`${r}-date-panel-footer`},Ir(this.datePickerSlots,"footer")):null,(null===(t=this.actions)||void 0===t?void 0:t.length)||o?Ei("div",{class:`${r}-date-panel-actions`},Ei("div",{class:`${r}-date-panel-actions__prefix`},o&&Object.keys(o).map((t=>{const e=o[t];return Array.isArray(e)?null:Ei(b5,{size:"tiny",onMouseenter:()=>{this.cachePendingValue(),this.doUpdateValue(e,!1)},onClick:()=>{this.doUpdateValue(e,!1),this.clearPendingValue(),this.handleConfirmClick()},onMouseleave:()=>{this.restorePendingValue()}},{default:()=>t})}))),Ei("div",{class:`${r}-date-panel-actions__suffix`},(null===(e=this.actions)||void 0===e?void 0:e.includes("clear"))?Ei(y5,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,(null===(n=this.actions)||void 0===n?void 0:n.includes("now"))?Ei(y5,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",onClick:this.handleNowClick},{default:()=>this.locale.now}):null)):null,Ei(D0,{onFocus:this.handleFocusDetectorFocus}))}}),M9=Ke({name:"DateRangePanel",props:S9.props,setup:t=>S9(t,"daterange"),render(){var t,e,n;const{mergedClsPrefix:r,mergedTheme:i,shortcuts:o}=this;return Ei("div",{ref:"selfRef",tabindex:0,class:`${r}-date-panel ${r}-date-panel--daterange`,onClick:this.resetSelectingStatus,onKeydown:this.handlePanelKeyDown,onFocus:this.handlePanelFocus},Ei("div",{ref:"startDatesElRef",class:`${r}-date-panel-calendar ${r}-date-panel-calendar--start`},Ei("div",{class:`${r}-date-panel-month`},Ei("div",{class:`${r}-date-panel-month__fast-prev`,onClick:this.startCalendarPrevYear},Ei(f0,null)),Ei("div",{class:`${r}-date-panel-month__prev`,onClick:this.startCalendarPrevMonth},Ei(i0,null)),Ei("div",{class:`${r}-date-panel-month__month-year`},this.locale.monthBeforeYear?`${this.startCalendarMonth} ${this.startCalendarYear}`:`${this.startCalendarYear} ${this.startCalendarMonth}`),Ei("div",{class:`${r}-date-panel-month__next`,onClick:this.startCalendarNextMonth},Ei(v0,null)),Ei("div",{class:`${r}-date-panel-month__fast-next`,onClick:this.startCalendarNextYear},Ei(p0,null))),Ei("div",{class:`${r}-date-panel-weekdays`},this.weekdays.map((t=>Ei("div",{key:t,class:`${r}-date-panel-weekdays__day`},t)))),Ei("div",{class:`${r}-date-panel__divider`}),Ei("div",{class:`${r}-date-panel-dates`},this.startDateArray.map(((t,e)=>Ei("div",{"data-n-date":!0,key:e,class:[`${r}-date-panel-date`,{[`${r}-date-panel-date--excluded`]:!t.inCurrentMonth,[`${r}-date-panel-date--current`]:t.isCurrentDate,[`${r}-date-panel-date--selected`]:t.selected,[`${r}-date-panel-date--covered`]:t.inSpan,[`${r}-date-panel-date--start`]:t.startOfSpan,[`${r}-date-panel-date--end`]:t.endOfSpan,[`${r}-date-panel-date--disabled`]:this.mergedIsDateDisabled(t.ts)}],onClick:()=>this.handleDateClick(t),onMouseenter:()=>this.handleDateMouseEnter(t)},t.dateObject.date,t.isCurrentDate?Ei("div",{class:`${r}-date-panel-date__sup`}):null))))),Ei("div",{class:`${r}-date-panel__vertical-divider`}),Ei("div",{ref:"endDatesElRef",class:`${r}-date-panel-calendar ${r}-date-panel-calendar--end`},Ei("div",{class:`${r}-date-panel-month`},Ei("div",{class:`${r}-date-panel-month__fast-prev`,onClick:this.endCalendarPrevYear},Ei(f0,null)),Ei("div",{class:`${r}-date-panel-month__prev`,onClick:this.endCalendarPrevMonth},Ei(i0,null)),Ei("div",{class:`${r}-date-panel-month__month-year`},this.locale.monthBeforeYear?`${this.endCalendarMonth} ${this.endCalendarYear}`:`${this.endCalendarYear} ${this.endCalendarMonth}`),Ei("div",{class:`${r}-date-panel-month__next`,onClick:this.endCalendarNextMonth},Ei(v0,null)),Ei("div",{class:`${r}-date-panel-month__fast-next`,onClick:this.endCalendarNextYear},Ei(p0,null))),Ei("div",{class:`${r}-date-panel-weekdays`},this.weekdays.map((t=>Ei("div",{key:t,class:`${r}-date-panel-weekdays__day`},t)))),Ei("div",{class:`${r}-date-panel__divider`}),Ei("div",{class:`${r}-date-panel-dates`},this.endDateArray.map(((t,e)=>Ei("div",{"data-n-date":!0,key:e,class:[`${r}-date-panel-date`,{[`${r}-date-panel-date--excluded`]:!t.inCurrentMonth,[`${r}-date-panel-date--current`]:t.isCurrentDate,[`${r}-date-panel-date--selected`]:t.selected,[`${r}-date-panel-date--covered`]:t.inSpan,[`${r}-date-panel-date--start`]:t.startOfSpan,[`${r}-date-panel-date--end`]:t.endOfSpan,[`${r}-date-panel-date--disabled`]:this.mergedIsDateDisabled(t.ts)}],onClick:()=>this.handleDateClick(t),onMouseenter:()=>this.handleDateMouseEnter(t)},t.dateObject.date,t.isCurrentDate?Ei("div",{class:`${r}-date-panel-date__sup`}):null))))),this.datePickerSlots.footer?Ei("div",{class:`${r}-date-panel-footer`},Ir(this.datePickerSlots,"footer")):null,(null===(t=this.actions)||void 0===t?void 0:t.length)||o?Ei("div",{class:`${r}-date-panel-actions`},Ei("div",{class:`${r}-date-panel-actions__prefix`},o&&Object.keys(o).map((t=>{const e=o[t];return Array.isArray(e)?Ei(b5,{size:"tiny",onMouseenter:()=>{this.cachePendingValue(),this.changeStartEndTime(...e)},onClick:()=>{this.changeStartEndTime(...e),this.clearPendingValue(),this.handleConfirmClick()},onMouseleave:()=>{this.restorePendingValue()}},{default:()=>t}):null}))),Ei("div",{class:`${r}-date-panel-actions__suffix`},(null===(e=this.actions)||void 0===e?void 0:e.includes("clear"))?Ei(y5,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",onClick:this.handleClearClick},{default:()=>this.locale.clear}):null,(null===(n=this.actions)||void 0===n?void 0:n.includes("confirm"))?Ei(y5,{theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,size:"tiny",type:"primary",disabled:this.isRangeInvalid,onClick:this.handleConfirmClick},{default:()=>this.locale.confirm}):null)):null,Ei(D0,{onFocus:this.handleFocusDetectorFocus}))}}),A9=EQ([AQ("date-picker","\n position: relative;\n z-index: auto;\n ",[AQ("date-picker-icon","\n color: var(--icon-color);\n transition: color .3s var(--bezier);\n "),TQ("disabled",[AQ("date-picker-icon","\n color: var(--icon-color-disabled);\n ")])]),AQ("date-panel","\n outline: none;\n margin: 4px 0;\n display: grid;\n grid-template-columns: 0fr;\n border-radius: var(--panel-border-radius);\n background-color: var(--panel-color);\n box-shadow: var(--panel-box-shadow);\n color: var(--panel-text-color);\n ",[h3(),AQ("date-panel-calendar",{padding:"var(--calendar-left-padding)",display:"grid",gridTemplateColumns:"1fr",gridArea:"left-calendar"},[TQ("end",{padding:"var(--calendar-right-padding)",gridArea:"right-calendar"})]),TQ("date",{gridTemplateAreas:'\n "left-calendar"\n "footer"\n "action"\n '}),TQ("daterange",{gridTemplateAreas:'\n "left-calendar divider right-calendar"\n "footer footer footer"\n "action action action"\n '}),TQ("datetime",{gridTemplateAreas:'\n "header"\n "left-calendar"\n "footer"\n "action"\n '}),TQ("datetimerange",{gridTemplateAreas:'\n "header header header"\n "left-calendar divider right-calendar"\n "footer footer footer"\n "action action action"\n '}),AQ("date-panel-footer",{gridArea:"footer"}),AQ("date-panel-actions",{gridArea:"action"}),AQ("date-panel-header",{gridArea:"header"}),AQ("date-panel-header","\n box-sizing: border-box;\n width: 100%;\n align-items: center;\n padding: var(--panel-header-padding);\n display: flex;\n justify-content: space-between;\n border-bottom: 1px solid var(--panel-header-divider-color);\n ",[EQ(">",[EQ("*:not(:last-child)",{marginRight:"10px"}),EQ("*",{flex:1,width:0}),AQ("time-picker",{zIndex:1})])]),AQ("date-panel-month","\n box-sizing: border-box;\n display: grid;\n grid-template-columns: var(--calendar-title-grid-template-columns);\n align-items: center;\n justify-items: center;\n padding: var(--calendar-title-padding);\n height: var(--calendar-title-height);\n ",[_Q("prev, next, fast-prev, fast-next","\n line-height: 0;\n cursor: pointer;\n width: var(--arrow-size);\n height: var(--arrow-size);\n color: var(--arrow-color);\n "),_Q("month-year","\n font-size: var(--calendar-title-font-size);\n font-weight: var(--calendar-title-font-weight);\n line-height: 17px;\n flex-grow: 1;\n text-align: center;\n color: var(--calendar-title-text-color);\n ")]),AQ("date-panel-weekdays","\n display: grid;\n margin: auto;\n grid-template-columns: repeat(7, var(--item-cell-width));\n grid-template-rows: repeat(1, var(--item-cell-height));\n align-items: center;\n justify-items: center;\n margin-bottom: 4px;\n border-bottom: 1px solid var(--calendar-days-divider-color);\n ",[_Q("day","\n line-height: 15px;\n width: var(--item-size);\n text-align: center;\n font-size: var(--calendar-days-font-size);\n color: var(--item-text-color);\n ")]),AQ("date-panel-dates","\n margin: auto;\n display: grid;\n grid-template-columns: repeat(7, var(--item-cell-width));\n grid-template-rows: repeat(6, var(--item-cell-height));\n align-items: center;\n justify-items: center;\n flex-wrap: wrap;\n ",[AQ("date-panel-date","\n position: relative;\n width: var(--item-size);\n height: var(--item-size);\n line-height: var(--item-size);\n text-align: center;\n font-size: var(--item-font-size);\n border-radius: var(--item-border-radius);\n z-index: 0;\n cursor: pointer;\n transition:\n background-color .2s var(--bezier),\n color .2s var(--bezier);\n ",[EQ("&.transition-disabled",{transition:"none !important"},[EQ("&::before, &::after",{transition:"none !important"})]),PQ("disabled",[PQ("selected",[EQ("&:hover",{backgroundColor:"var(--item-color-hover)"})])]),TQ("current",[_Q("sup",'\n position: absolute;\n top: 2px;\n right: 2px;\n content: "";\n height: 4px;\n width: 4px;\n border-radius: 2px;\n background-color: var(--item-color-active);\n transition:\n background-color .2s var(--bezier);\n ')]),EQ("&::after",'\n content: "";\n z-index: -1;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n border-radius: inherit;\n transition: background-color .3s var(--bezier);\n '),TQ("covered, start, end",[PQ("excluded",[EQ("&::before",'\n content: "";\n z-index: -2;\n position: absolute;\n left: calc((var(--item-size) - var(--item-cell-width)) / 2);\n right: calc((var(--item-size) - var(--item-cell-width)) / 2);\n top: 0;\n bottom: 0;\n background-color: var(--item-color-included);\n '),EQ("&:nth-child(7n + 1)::before",{borderTopLeftRadius:"var(--item-border-radius)",borderBottomLeftRadius:"var(--item-border-radius)"}),EQ("&:nth-child(7n + 7)::before",{borderTopRightRadius:"var(--item-border-radius)",borderBottomRightRadius:"var(--item-border-radius)"})])]),TQ("selected",{color:"var(--item-text-color-active)"},[EQ("&::after",{backgroundColor:"var(--item-color-active)"}),TQ("start",[EQ("&::before",{left:"50%"})]),TQ("end",[EQ("&::before",{right:"50%"})]),_Q("sup",{backgroundColor:"var(--panel-color)"})]),TQ("excluded",{color:"var(--item-text-color-disabled)"},[TQ("selected",[EQ("&::after",{backgroundColor:"var(--item-color-disabled)"})])]),TQ("disabled",{cursor:"not-allowed",color:"var(--item-text-color-disabled)"},[TQ("covered",[EQ("&::before",{backgroundColor:"var(--item-color-disabled)"})]),TQ("selected",[EQ("&::before",{backgroundColor:"var(--item-color-disabled)"}),EQ("&::after",{backgroundColor:"var(--item-color-disabled)"})])])])]),_Q("vertical-divider","\n grid-area: divider;\n height: 100%;\n width: 1px;\n background-color: var(--calendar-divider-color);\n "),AQ("date-panel-footer",{borderTop:"1px solid var(--panel-action-divider-color)",padding:"var(--panel-extra-footer-padding)"}),AQ("date-panel-actions","\n flex: 1;\n padding: var(--panel-action-padding);\n display: flex;\n align-items: center;\n justify-content: space-between;\n border-top: 1px solid var(--panel-action-divider-color);\n ",[_Q("prefix, suffix","\n display: flex;\n margin-bottom: -8px;\n "),_Q("suffix","\n align-self: flex-end;\n "),_Q("prefix","\n flex-wrap: wrap;\n "),AQ("button","\n margin-bottom: 8px;\n ",[EQ("&:not(:last-child)","\n margin-right: 8px;\n ")])])])]);const _9={date:"yyyy-MM-dd",datetime:"yyyy-MM-dd HH:mm:ss",daterange:"yyyy-MM-dd",datetimerange:"yyyy-MM-dd HH:mm:ss"};var T9=Ke({name:"DatePicker",props:Object.assign(Object.assign({},LJ.props),{to:IJ.propTo,bordered:{type:Boolean,default:void 0},clearable:{type:Boolean,default:!1},updateValueOnClose:{type:Boolean,default:!1},defaultValue:{type:[Number,Array],default:null},disabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom-start"},value:[Number,Array],size:String,type:{type:String,default:"date"},separator:String,placeholder:String,startPlaceholder:String,endPlaceholder:String,format:String,dateFormat:String,timeFormat:String,actions:Array,shortcuts:Object,isDateDisabled:Function,isTimeDisabled:Function,show:{type:Boolean,default:void 0},ranges:Object,closeOnSelect:Boolean,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onChange:{type:[Function,Array],validator:()=>!0,default:void 0}}),setup(t,{slots:e}){const{localeRef:n,dateLocaleRef:r}=t0("DatePicker"),i=Dq(t),{mergedSizeRef:o,mergedDisabledRef:a}=i,{NConfigProvider:s,mergedClsPrefixRef:l,mergedBorderedRef:u,namespaceRef:c}=FJ(t),d=ge(null),h=ge(null),f=ge(null),p=ge(!1),g=aJ(Se(t,"show"),p),v=ge(t.defaultValue),m=aJ(Ee((()=>t.value)),v),y=ge(null);yi((()=>{y.value=m.value}));const b=ge(""),x=ge(""),w=ge(""),C=LJ("DatePicker","DatePicker",A9,a9,t,l),S=Ee((()=>({locale:r.value.locale}))),k=Ee((()=>{var t,e;return(null===(e=null===(t=null==s?void 0:s.mergedComponentPropsRef.value)||void 0===t?void 0:t.DatePicker)||void 0===e?void 0:e.timePickerSize)||"small"})),E=Ee((()=>["daterange","datetimerange"].includes(t.type))),M=Ee((()=>void 0===t.placeholder?"date"===t.type?n.value.datePlaceholder:"datetime"===t.type?n.value.datetimePlaceholder:t.placeholder:t.placeholder)),A=Ee((()=>void 0===t.startPlaceholder?"daterange"===t.type?n.value.startDatePlaceholder:"datetimerange"===t.type?n.value.startDatetimePlaceholder:"":t.startPlaceholder)),_=Ee((()=>void 0===t.endPlaceholder?"daterange"===t.type?n.value.endDatePlaceholder:"datetimerange"===t.type?n.value.endDatetimePlaceholder:"":t.endPlaceholder)),T=Ee((()=>t.format||_9[t.type]));function P(e){const{"onUpdate:value":n,onUpdateValue:r,onChange:o}=t,{nTriggerFormChange:a,nTriggerFormInput:s}=i;r&&pJ(r,e),n&&pJ(n,e),o&&pJ(o,e),v.value=e,a(),s()}function I(e){const{"onUpdate:show":n,onUpdateShow:r}=t;n&&pJ(n,e),r&&pJ(r,e),p.value=e}function D(){P(y.value)}function O(){const{value:t}=y;E.value?(Array.isArray(t)||null===t)&&function(t){if(null===t)x.value="",w.value="";else{const e=S.value;x.value=l4(t[0],T.value,e),w.value=l4(t[1],T.value,e)}}(t):Array.isArray(t)||function(t){b.value=null===t?"":l4(t,T.value,S.value)}(t)}function R(){a.value||g.value||I(!0)}function L({returnFocus:e,disableUpdateOnClose:n}){var r;g.value&&(I(!1),"date"!==t.type&&t.updateValueOnClose&&!n&&D(),e&&(null===(r=f.value)||void 0===r||r.focus()))}xi(y,(()=>{O()})),O(),xi(g,(t=>{t||(y.value=m.value)}));const B=function(t,e){const n=Ee((()=>{const{isTimeDisabled:n}=t,{value:r}=e;if(null!==r&&!Array.isArray(r))return null==n?void 0:n(r)})),r=Ee((()=>{var t;return null===(t=n.value)||void 0===t?void 0:t.isHourDisabled})),i=Ee((()=>{var t;return null===(t=n.value)||void 0===t?void 0:t.isMinuteDisabled})),o=Ee((()=>{var t;return null===(t=n.value)||void 0===t?void 0:t.isSecondDisabled})),a=Ee((()=>{const{type:n,isDateDisabled:r}=t,{value:i}=e;return!(null===i||Array.isArray(i)||!["date","datetime"].includes(n)||!r)&&r(i)})),s=Ee((()=>{const{type:n}=t,{value:a}=e;if(null===a||"datetime"===n||Array.isArray(a))return!1;const s=new Date(a),l=s.getHours(),u=s.getMinutes(),c=s.getMinutes();return!!r.value&&r.value(l)||!!i.value&&i.value(u,l)||!!o.value&&o.value(c,u,l)})),l=Ee((()=>a.value||s.value));return{isValueInvalidRef:Ee((()=>{const{type:e}=t;return"date"===e?a.value:"datetime"===e&&l.value})),isDateInvalidRef:a,isTimeInvalidRef:s,isDateTimeInvalidRef:l,isHourDisabledRef:r,isMinuteDisabledRef:i,isSecondDisabledRef:o}}(t,y),F=function(t,e){const n=Ee((()=>{const{isTimeDisabled:n}=t,{value:r}=e;return Array.isArray(r)&&n?[null==n?void 0:n(r[0],"start",r),null==n?void 0:n(r[1],"end",r)]:[void 0,void 0]})),r={isStartHourDisabledRef:Ee((()=>{var t;return null===(t=n.value[0])||void 0===t?void 0:t.isHourDisabled})),isEndHourDisabledRef:Ee((()=>{var t;return null===(t=n.value[1])||void 0===t?void 0:t.isHourDisabled})),isStartMinuteDisabledRef:Ee((()=>{var t;return null===(t=n.value[0])||void 0===t?void 0:t.isMinuteDisabled})),isEndMinuteDisabledRef:Ee((()=>{var t;return null===(t=n.value[1])||void 0===t?void 0:t.isMinuteDisabled})),isStartSecondDisabledRef:Ee((()=>{var t;return null===(t=n.value[0])||void 0===t?void 0:t.isSecondDisabled})),isEndSecondDisabledRef:Ee((()=>{var t;return null===(t=n.value[1])||void 0===t?void 0:t.isSecondDisabled}))},i=Ee((()=>{const{type:n,isDateDisabled:r}=t,{value:i}=e;return!!(null!==i&&Array.isArray(i)&&["daterange","datetimerange"].includes(n)&&r)&&r(i[0],"start",i)})),o=Ee((()=>{const{type:n,isDateDisabled:r}=t,{value:i}=e;return!!(null!==i&&Array.isArray(i)&&["daterange","datetimerange"].includes(n)&&r)&&r(i[1],"end",i)})),a=Ee((()=>{const{type:n}=t,{value:i}=e;if(null===i||!Array.isArray(i)||"datetimerange"!==n)return!1;const o=p4(i[0]),a=g4(i[0]),s=m4(i[0]),{isStartHourDisabledRef:l,isStartMinuteDisabledRef:u,isStartSecondDisabledRef:c}=r;return!!l.value&&l.value(o)||!!u.value&&u.value(a,o)||!!c.value&&c.value(s,a,o)})),s=Ee((()=>{const{type:n}=t,{value:i}=e;if(null===i||!Array.isArray(i)||"datetimerange"!==n)return!1;const o=p4(i[1]),a=g4(i[1]),s=m4(i[1]),{isEndHourDisabledRef:l,isEndMinuteDisabledRef:u,isEndSecondDisabledRef:c}=r;return!!l.value&&l.value(o)||!!u.value&&u.value(a,o)||!!c.value&&c.value(s,a,o)})),l=Ee((()=>i.value||a.value)),u=Ee((()=>o.value||s.value)),c=Ee((()=>l.value||u.value));return Object.assign(Object.assign({},r),{isStartDateInvalidRef:i,isEndDateInvalidRef:o,isStartTimeInvalidRef:a,isEndTimeInvalidRef:s,isStartValueInvalidRef:l,isEndValueInvalidRef:u,isRangeInvalidRef:c})}(t,y);return ze(v9,Object.assign(Object.assign(Object.assign({mergedClsPrefixRef:l,mergedThemeRef:C,timePickerSizeRef:k,localeRef:n,dateLocaleRef:r,isDateDisabledRef:Se(t,"isDateDisabled"),rangesRef:Se(t,"ranges"),closeOnSelectRef:Se(t,"closeOnSelect"),updateValueOnCloseRef:Se(t,"updateValueOnClose")},B),F),{datePickerSlots:e})),{mergedClsPrefix:l,mergedBordered:u,namespace:c,uncontrolledValue:v,pendingValue:y,panelInstRef:d,triggerElRef:h,inputInstRef:f,isMounted:sJ(),displayTime:b,displayStartTime:x,displayEndTime:w,mergedShow:g,adjustedTo:IJ(t),isRange:E,localizedStartPlaceholder:A,localizedEndPlaceholder:_,mergedSize:o,mergedDisabled:a,localizedPlacehoder:M,isValueInvalid:B.isValueInvalidRef,isStartValueInvalid:F.isStartValueInvalidRef,isEndValueInvalid:F.isEndValueInvalidRef,handleClickOutside:function(t){var e;g.value&&!(null===(e=h.value)||void 0===e?void 0:e.contains(t.target))&&L({returnFocus:!1})},handleKeyDown:function(t){"Escape"===t.code&&L({returnFocus:!0})},handleClear:function(){var t;I(!1),null===(t=f.value)||void 0===t||t.deactivate()},handleTriggerClick:function(t){a.value||aq(t,"clear")||g.value||R()},handleInputActivate:function(){g.value||R()},handleInputDeactivate:function(){a.value||(O(),L({returnFocus:!1}))},handleInputFocus:function(e){a.value||function(e){const{onFocus:n}=t,{nTriggerFormFocus:r}=i;n&&pJ(n,e),r()}(e)},handleInputBlur:function(e){var n;(null===(n=d.value)||void 0===n?void 0:n.$el.contains(e.relatedTarget))||(!function(e){const{onBlur:n}=t,{nTriggerFormBlur:r}=i;n&&pJ(n,e),r()}(e),O(),L({returnFocus:!1}))},handlePanelTabOut:function(){L({returnFocus:!0})},handlePanelClose:function(t){L({returnFocus:!0,disableUpdateOnClose:t})},handleRangeUpdateValue:function(t){if(""===t[0]&&""===t[1])return void P(null);const[e,n]=t,r=x6(e,T.value,new Date,S.value),i=x6(n,T.value,new Date,S.value);M5(r)&&M5(i)?(P([y4(r),y4(i)]),O()):[x.value,w.value]=t},handleSingleUpdateValue:function(t){if(""===t)return void P(null);const e=x6(t,T.value,new Date,S.value);M5(e)?(P(y4(e)),O()):b.value=t},handlePanelUpdateValue:function(t,e){e?P(t):function(t){y.value=t}(t)},handlePanelConfirm:D,mergedTheme:C,triggerCssVars:Ee((()=>{const{common:{cubicBezierEaseInOut:t},self:{iconColor:e,iconColorDisabled:n}}=C.value;return{"--bezier":t,"--icon-color":e,"--icon-color-disabled":n}})),cssVars:Ee((()=>{const{type:e}=t,{common:{cubicBezierEaseInOut:n},self:{calendarTitleFontSize:r,calendarDaysFontSize:i,itemFontSize:o,itemTextColor:a,itemColorDisabled:s,itemColorIncluded:l,itemColorHover:u,itemColorActive:c,itemBorderRadius:d,itemTextColorDisabled:h,itemTextColorActive:f,panelColor:p,panelTextColor:g,arrowColor:v,calendarTitleTextColor:m,panelActionDividerColor:y,panelHeaderDividerColor:b,calendarDaysDividerColor:x,panelBoxShadow:w,panelBorderRadius:S,calendarTitleFontWeight:k,panelExtraFooterPadding:E,panelActionPadding:M,itemSize:A,itemCellWidth:_,itemCellHeight:T,calendarTitlePadding:P,calendarTitleHeight:I,calendarDaysHeight:D,calendarDaysTextColor:O,arrowSize:R,panelHeaderPadding:L,calendarDividerColor:B,calendarTitleGridTempateColumns:F,iconColor:N,iconColorDisabled:z,[CQ("calendarLeftPadding",e)]:j,[CQ("calendarRightPadding",e)]:G}}=C.value;return{"--bezier":n,"--panel-border-radius":S,"--panel-color":p,"--panel-box-shadow":w,"--panel-text-color":g,"--panel-header-padding":L,"--panel-header-divider-color":b,"--calendar-left-padding":j,"--calendar-right-padding":G,"--calendar-title-height":I,"--calendar-title-padding":P,"--calendar-title-font-size":r,"--calendar-title-font-weight":k,"--calendar-title-text-color":m,"--calendar-title-grid-template-columns":F,"--calendar-days-height":D,"--calendar-days-divider-color":x,"--calendar-days-font-size":i,"--calendar-days-text-color":O,"--calendar-divider-color":B,"--panel-action-padding":M,"--panel-extra-footer-padding":E,"--panel-action-divider-color":y,"--item-font-size":o,"--item-border-radius":d,"--item-size":A,"--item-cell-width":_,"--item-cell-height":T,"--item-text-color":a,"--item-color-included":l,"--item-color-disabled":s,"--item-color-hover":u,"--item-color-active":c,"--item-text-color-disabled":h,"--item-text-color-active":f,"--arrow-size":R,"--arrow-color":v,"--icon-color":N,"--icon-color-disabled":z}}))}},render(){const{clearable:t}=this,e={bordered:this.mergedBordered,size:this.mergedSize,passivelyActivated:!0,disabled:this.mergedDisabled,readonly:this.mergedDisabled,clearable:t,onClear:this.handleClear,onClick:this.handleTriggerClick,onActivate:this.handleInputActivate,onDeactivate:this.handleInputDeactivate,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur},n={onUpdateValue:this.handlePanelUpdateValue,onTabOut:this.handlePanelTabOut,onClose:this.handlePanelClose,onKeydown:this.handleKeyDown,onConfirm:this.handlePanelConfirm,ref:"panelInstRef",value:this.pendingValue,active:this.mergedShow,actions:this.actions,shortcuts:this.shortcuts,style:this.cssVars},{mergedClsPrefix:r}=this;return Ei("div",{ref:"triggerElRef",class:[`${r}-date-picker`,this.mergedDisabled&&`${r}-date-picker--disabled`,this.isRange&&`${r}-date-picker--range`],style:this.triggerCssVars,onKeydown:this.handleKeyDown},Ei(c1,null,{default:()=>[Ei(d1,null,{default:()=>this.isRange?Ei(e5,Object.assign({ref:"inputInstRef",value:[this.displayStartTime,this.displayEndTime],placeholder:[this.localizedStartPlaceholder,this.localizedEndPlaceholder],textDecoration:[this.isStartValueInvalid?"line-through":"",this.isEndValueInvalid?"line-through":""],pair:!0,onUpdateValue:this.handleRangeUpdateValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,internalForceFocus:this.mergedShow,internalDeactivateOnEnter:!0},e),{separator:()=>Ei(T0,{clsPrefix:r,class:`${r}-date-picker-icon`},{default:()=>Ei(E0,null)}),[t?"clear":"suffix"]:()=>Ei(T0,{clsPrefix:r,class:`${r}-date-picker-icon`},{default:()=>Ei(o0,null)})}):Ei(e5,Object.assign({ref:"inputInstRef",value:this.displayTime,placeholder:this.localizedPlacehoder,textDecoration:this.isValueInvalid&&!this.isRange?"line-through":"",onUpdateValue:this.handleSingleUpdateValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,internalForceFocus:this.mergedShow,internalDeactivateOnEnter:!0},e),{[t?"clear":"suffix"]:()=>Ei(T0,{clsPrefix:r,class:`${r}-date-picker-icon`},{default:()=>Ei(o0,null)})})}),Ei(I1,{show:this.mergedShow,containerClass:this.namespace,to:this.adjustedTo,teleportDisabled:this.adjustedTo===IJ.tdkey,placement:"bottom-start"},{default:()=>Ei($i,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.mergedShow?jn("datetime"===this.type?Ei(w9,Object.assign({},n)):"daterange"===this.type?Ei(M9,Object.assign({},n)):"datetimerange"===this.type?Ei(k9,Object.assign({},n)):Ei(E9,Object.assign({},n)),[[g1,this.handleClickOutside]]):null})})]}))}}),P9={titleFontSize:"18px",padding:"16px 28px 20px 28px",iconSize:"28px",actionSpace:"12px",contentMargin:"8px 0 16px 0",iconMargin:"0 4px 0 0",iconMarginIconTop:"4px 0 8px 0",closeSize:"18px",closeMargin:"22px 28px 0 0",closeMarginIconTop:"12px 18px 0 0"};var I9={name:"Dialog",common:K2,peers:{Button:u5},self:t=>{const{textColor1:e,textColor2:n,modalColor:r,closeColor:i,closeColorHover:o,closeColorPressed:a,infoColor:s,successColor:l,warningColor:u,errorColor:c,primaryColor:d,dividerColor:h,borderRadius:f,fontWeightStrong:p,lineHeight:g,fontSize:v}=t;return Object.assign(Object.assign({},P9),{fontSize:v,lineHeight:g,border:`1px solid ${h}`,titleTextColor:e,textColor:n,color:r,closeColor:i,closeColorHover:o,closeColorPressed:a,iconColor:d,iconColorInfo:s,iconColorSuccess:l,iconColorWarning:u,iconColorError:c,borderRadius:f,titleFontWeight:p})}},D9=EQ([AQ("dialog","\n line-height: var(--line-height);\n position: relative;\n background: var(--color);\n color: var(--text-color);\n box-sizing: border-box;\n margin: auto;\n border-radius: var(--border-radius);\n padding: var(--padding);\n transition: \n border-color .3s var(--bezier),\n background-color .3s var(--bezier),\n color .3s var(--bezier);\n ",[_Q("icon",{color:"var(--icon-color)"}),TQ("bordered",{border:"var(--border)"}),TQ("icon-top",[_Q("close",{margin:"var(--close-margin)"}),_Q("icon",{margin:"var(--icon-margin)"}),_Q("content",{textAlign:"center"}),_Q("title",{justifyContent:"center"}),_Q("action",{justifyContent:"center"})]),TQ("icon-left",[_Q("icon",{margin:"var(--icon-margin)"})]),_Q("close","\n font-size: var(--close-size);\n position: absolute;\n right: 0;\n top: 0;\n margin: var(--close-margin);\n transition: .3s color var(--bezier);\n "),_Q("content","\n font-size: var(--font-size);\n margin: var(--content-margin);\n position: relative;\n ",[EQ("&:last-child","margin-bottom: 0;")]),_Q("action","\n display: flex;\n justify-content: flex-end;\n ",[EQ("> *:not(:last-child)",{marginRight:"var(--action-space)"})]),_Q("icon",{fontSize:"var(--icon-size)",transition:"color .3s var(--bezier)"}),_Q("title","\n transition: color .3s var(--bezier);\n display: flex;\n align-items: center;\n font-size: var(--title-font-size);\n font-weight: var(--title-font-weight);\n color: var(--title-text-color);\n "),AQ("dialog-icon-container",{display:"flex",justifyContent:"center"})]),DQ(AQ("dialog","\n width: 446px;\n max-width: calc(100vw - 32px);\n ")),AQ("dialog",[RQ("\n width: 446px;\n max-width: calc(100vw - 32px);\n ")])]);const O9=Ei(m0,null),R9={default:O9,info:O9,success:Ei(b0,null),warning:Ei(w0,null),error:Ei(h0,null)},L9={icon:Function,type:{type:String,default:"default"},title:[String,Function],closable:{type:Boolean,default:!0},negativeText:String,positiveText:String,content:[String,Function],action:Function,showIcon:{type:Boolean,default:!0},loading:Boolean,bordered:Boolean,iconPlacement:String,onPositiveClick:Function,onNegativeClick:Function,onClose:Function},B9=gJ(L9);var F9=Ke({name:"Dialog",alias:["NimbusConfirmCard","Confirm"],props:Object.assign(Object.assign({},LJ.props),L9),setup(t){const{NConfigProvider:e,mergedClsPrefixRef:n}=FJ(t),r=Ee((()=>{var n,r,i;const{iconPlacement:o}=t;return null!==(i=null!=o?o:null===(r=null===(n=null==e?void 0:e.mergedComponentPropsRef.value)||void 0===n?void 0:n.Dialog)||void 0===r?void 0:r.iconPlacement)&&void 0!==i?i:"left"}));const i=LJ("Dialog","Dialog",D9,I9,t,n);return{mergedClsPrefix:n,mergedIconPlacement:r,mergedTheme:i,handlePositiveClick:function(e){const{onPositiveClick:n}=t;n&&n(e)},handleNegativeClick:function(e){const{onNegativeClick:n}=t;n&&n(e)},handleCloseClick:function(){const{onClose:e}=t;e&&e()},cssVars:Ee((()=>{const{type:e,iconPlacement:n}=t,{common:{cubicBezierEaseInOut:r},self:{fontSize:o,lineHeight:a,border:s,titleTextColor:l,textColor:u,color:c,closeColor:d,closeColorHover:h,closeColorPressed:f,borderRadius:p,titleFontWeight:g,titleFontSize:v,padding:m,iconSize:y,actionSpace:b,contentMargin:x,closeSize:w,["top"===n?"iconMarginIconTop":"iconMargin"]:C,["top"===n?"closeMarginIconTop":"closeMargin"]:S,[CQ("iconColor",e)]:k}}=i.value;return{"--font-size":o,"--icon-color":k,"--bezier":r,"--close-margin":S,"--icon-margin":C,"--icon-size":y,"--close-size":w,"--close-color":d,"--close-color-hover":h,"--close-color-pressed":f,"--color":c,"--text-color":u,"--border-radius":p,"--padding":m,"--line-height":a,"--border":s,"--content-margin":x,"--title-font-size":v,"--title-font-weight":g,"--title-text-color":l,"--action-space":b}}))}},render(){const{$slots:t,bordered:e,mergedIconPlacement:n,cssVars:r,closable:i,showIcon:o,title:a,content:s,action:l,negativeText:u,positiveText:c,handlePositiveClick:d,handleNegativeClick:h,mergedTheme:f,loading:p,type:g,mergedClsPrefix:v}=this;return Ei("div",{class:[`${v}-dialog`,`${v}-dialog--icon-${n}`,e&&`${v}-dialog--bordered`],style:r},i?Ei(I0,{clsPrefix:v,class:`${v}-dialog__close`,onClick:this.handleCloseClick}):null,o&&"top"===n?Ei("div",{class:`${v}-dialog-icon-container`},Ei(T0,{clsPrefix:v,class:`${v}-dialog__icon`},{default:()=>Ir(t,"icon",void 0,(()=>[this.icon?vJ(this.icon):R9[this.type]]))})):null,Ei("div",{class:`${v}-dialog__title`},o&&"left"===n?Ei(T0,{clsPrefix:v,class:`${v}-dialog__icon`},{default:()=>Ir(t,"icon",void 0,(()=>[this.icon?vJ(this.icon):R9[this.type]]))}):null,Ir(t,"header",void 0,(()=>[vJ(a)]))),Ei("div",{class:`${v}-dialog__content`},Ir(t,"default",void 0,(()=>[vJ(s)]))),t.action||c||u||l?Ei("div",{class:`${v}-dialog__action`},Ir(t,"action",void 0,l?()=>[vJ(l)]:()=>[this.negativeText&&Ei(y5,{theme:f.peers.Button,themeOverrides:f.peerOverrides.Button,ghost:!0,size:"small",onClick:h},{default:()=>vJ(this.negativeText)}),this.positiveText&&Ei(y5,{theme:f.peers.Button,themeOverrides:f.peerOverrides.Button,disabled:p,loading:p,size:"small",type:"default"===g?"primary":g,onClick:d},{default:()=>vJ(this.positiveText)})])):null)}});var N9={name:"Modal",common:K2,peers:{Scrollbar:e3,Dialog:I9,Card:C6},self:t=>{const{modalColor:e,textColor2:n,boxShadow3:r}=t;return{color:e,textColor:n,boxShadow:r}}};const z9=Object.assign(Object.assign({},k6),L9),j9=gJ(z9);var G9=Ke({name:"ModalBody",inheritAttrs:!1,props:Object.assign(Object.assign({show:{type:Boolean,required:!0},preset:String,displayDirective:{type:String,required:!0}},z9),{onClickoutside:{type:Function,required:!0},onBeforeLeave:{type:Function,required:!0},onAfterLeave:{type:Function,required:!0},onPositiveClick:{type:Function,required:!0},onNegativeClick:{type:Function,required:!0},onClose:{type:Function,required:!0}}),setup(t){const e=ge(null),n=ge(null),r=ge(t.show),i=ge(null),o=ge(null);xi(Se(t,"show"),(t=>{t&&(r.value=!0)}));const a=je(MJ);function s(){const{value:t}=i,{value:e}=o;if(null===t||null===e)return"";if(n.value){return`${t}px ${e+n.value.containerScrollTop}px`}return""}return ze(EJ,e),ze(AJ,null),ze(_J,null),{mergedTheme:a.mergedThemeRef,appear:a.appearRef,isMounted:a.isMountedRef,mergedClsPrefix:a.mergedClsPrefixRef,bodyRef:e,scrollbarRef:n,displayed:r,handleClickOutside:function(e){t.onClickoutside(e)},handlePositiveClick:function(){t.onPositiveClick()},handleNegativeClick:function(){t.onNegativeClick()},handleCloseClick:function(){const{onClose:e}=t;e&&e()},handleAfterLeave:function(){r.value=!1,i.value=null,o.value=null,t.onAfterLeave()},handleBeforeLeave:function(e){e.style.transformOrigin=s(),t.onBeforeLeave()},handleEnter:function(t){ci((()=>{!function(t){const e=a.getMousePosition();if(!e)return;if(!n.value)return;const r=n.value.containerScrollTop,{offsetLeft:l,offsetTop:u}=t;if(e){const t=e.y,n=e.x;i.value=-(l-n),o.value=-(u-t-r)}t.style.transformOrigin=s()}(t)}))}}},render(){const{$slots:t,$attrs:e,handleEnter:n,handleAfterLeave:r,handleBeforeLeave:i,handleClickOutside:o,preset:a,mergedClsPrefix:s}=this;let l=null;if(!a){if(l=xJ(t),!l)return void mJ("modal","default slot is empty");l=Sr(l),l.props=Tr({class:`${s}-modal`},e,l.props||{})}return"show"===this.displayDirective||this.displayed||this.show?jn(Ei("div",{class:`${s}-modal-body-wrapper`},Ei(o3,{ref:"scrollbarRef",theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,contentClass:`${s}-modal-scroll-content`},{default:()=>{var e;return Ei($i,{name:"fade-in-scale-up-transition",appear:null!==(e=this.appear)&&void 0!==e?e:this.isMounted,onEnter:n,onAfterLeave:r,onBeforeLeave:i},{default:()=>jn("confirm"===this.preset||"dialog"===this.preset?Ei(F9,Object.assign({},this.$attrs,{class:[`${s}-modal`,this.$attrs.class],ref:"bodyRef",theme:this.mergedTheme.peers.Dialog,themeOverrides:this.mergedTheme.peerOverrides.Dialog},hJ(this.$props,B9)),t):"card"===this.preset?Ei(M6,Object.assign({},this.$attrs,{ref:"bodyRef",class:[`${s}-modal`,this.$attrs.class],theme:this.mergedTheme.peers.Card,themeOverrides:this.mergedTheme.peerOverrides.Card},hJ(this.$props,E6)),t):l,[[ho,this.show],[g1,o]])})}})),[[ho,"if"===this.displayDirective||this.displayed||this.show]]):null}}),U9=EQ([AQ("modal-container","\n position: fixed;\n left: 0;\n top: 0;\n height: 0;\n width: 0;\n display: flex;\n "),AQ("modal-mask","\n position: fixed;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n background-color: rgba(0, 0, 0, .4);\n ",[r3({enterDuration:".25s",leaveDuration:".25s",enterCubicBezier:"var(--bezier-ease-out)",leaveCubicBezier:"var(--bezier-ease-out)"})]),AQ("modal-body-wrapper","\n position: fixed;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n overflow: visible;\n ",[AQ("modal-scroll-content","\n min-height: 100%;\n display: flex;\n position: relative;\n ")]),AQ("modal","\n align-self: center;\n color: var(--text-color);\n margin: auto;\n box-shadow: var(--box-shadow);\n ",[h3({duration:".25s",enterScale:".5"})])]);var $9=Ke({name:"Modal",inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign(Object.assign({},LJ.props),{show:Boolean,unstableShowMask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},preset:String,to:[String,Object],displayDirective:{type:String,default:"if"}}),z9),{"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],dialog:Boolean,appear:{type:Boolean,default:void 0},onBeforeLeave:Function,onAfterLeave:Function,onClose:Function,onPositiveClick:Function,onNegativeClick:Function,onMaskClick:Function,overlayStyle:{type:[String,Object],validator:()=>!0,default:void 0},onBeforeHide:{type:Function,validator:()=>!0,default:void 0},onAfterHide:{type:Function,validator:()=>!0,default:void 0},onHide:{type:Function,validator:()=>!0,default:void 0}}),setup(t){const e=ge(null),{mergedClsPrefixRef:n,namespaceRef:r}=FJ(t),i=LJ("Modal","Modal",U9,N9,t,n),o=oJ(64),a=tJ(),s=sJ(),l=t.dialog?je(Y9,null):null;function u(e){const{onUpdateShow:n,"onUpdate:show":r,onHide:i}=t;n&&pJ(n,e),r&&pJ(r,e),i&&!e&&i(e)}return ze(MJ,{getMousePosition:()=>{if(l){const{clickedRef:t,clickPositionRef:e}=l;if(t.value&&e.value)return e.value}return o.value?a.value:null},mergedClsPrefixRef:n,mergedThemeRef:i,isMountedRef:s,appearRef:Se(t,"appear")}),{mergedClsPrefix:n,namespace:r,isMounted:s,containerRef:e,presetProps:Ee((()=>hJ(t,j9))),handleAfterLeave:function(){const{onAfterLeave:e,onAfterHide:n}=t;e&&pJ(e),n&&n()},handleClickoutside:function(n){var r;const{onMaskClick:i}=t;i&&i(n),t.maskClosable&&(null===(r=e.value)||void 0===r?void 0:r.contains(n.target))&&u(!1)},handleBeforeLeave:function(){const{onBeforeLeave:e,onBeforeHide:n}=t;e&&pJ(e),n&&n()},doUpdateShow:u,handleNegativeClick:function(){const{onNegativeClick:e}=t;e?Promise.resolve(e()).then((t=>{!1!==t&&u(!1)})):u(!1)},handlePositiveClick:function(){const{onPositiveClick:e}=t;e?Promise.resolve(e()).then((t=>{!1!==t&&u(!1)})):u(!1)},handleCloseClick:function(){const{onClose:e}=t;e?Promise.resolve(e()).then((t=>{!1!==t&&u(!1)})):u(!1)},cssVars:Ee((()=>{const{common:{cubicBezierEaseOut:t},self:{boxShadow:e,color:n,textColor:r}}=i.value;return{"--bezier-ease-out":t,"--box-shadow":e,"--color":n,"--text-color":r}}))}},render(){const{mergedClsPrefix:t}=this;return Ei(S1,{to:this.to,show:this.show},{default:()=>{var e;return[jn(Ei("div",{ref:"containerRef",class:[`${t}-modal-container`,this.namespace],style:this.cssVars},this.unstableShowMask?Ei($i,{name:"fade-in-transition",key:"mask",appear:null!==(e=this.appear)&&void 0!==e?e:this.isMounted},{default:()=>this.show?Ei("div",{ref:"containerRef",class:`${t}-modal-mask`}):null}):null,Ei(G9,Object.assign({style:this.overlayStyle},this.$attrs,{ref:"bodyWrapper",displayDirective:this.displayDirective,show:this.show,preset:this.preset},this.presetProps,{onClose:this.handleCloseClick,onNegativeClick:this.handleNegativeClick,onPositiveClick:this.handlePositiveClick,onBeforeLeave:this.handleBeforeLeave,onAfterLeave:this.handleAfterLeave,onClickoutside:this.handleClickoutside}),this.$slots)),[[y1,{enabled:this.show}]])]}})}});const V9=Object.assign(Object.assign({},L9),{internalStyle:[String,Object],maskClosable:{type:Boolean,default:!0},onPositiveClick:Function,onNegativeClick:Function,onClose:Function,onMaskClick:Function});var W9=Ke({name:"DialogEnvironment",props:Object.assign(Object.assign({},V9),{internalKey:{type:String,required:!0},to:[String,Object],onInternalAfterLeave:{type:Function,required:!0}}),setup(t){const e=ge(!0);function n(){e.value=!1}return{show:e,hide:n,handleUpdateShow:function(t){e.value=t},handleAfterLeave:function(){t.onInternalAfterLeave(t.internalKey)},handleCloseClick:function(){const{onClose:e}=t;e?Promise.resolve(e()).then((t=>{!1!==t&&n()})):n()},handleNegativeClick:function(e){const{onNegativeClick:r}=t;r?Promise.resolve(r(e)).then((t=>{!1!==t&&n()})):n()},handlePositiveClick:function(e){const{onPositiveClick:r}=t;r?Promise.resolve(r(e)).then((t=>{!1!==t&&n()})):n()},handleMaskClick:function(e){const{onMaskClick:r,maskClosable:i}=t;r&&(r(e),i&&n())}}},render(){const{handlePositiveClick:t,handleUpdateShow:e,handleNegativeClick:n,handleCloseClick:r,handleAfterLeave:i,handleMaskClick:o,to:a,maskClosable:s,show:l}=this;return Ei($9,{show:l,onUpdateShow:e,onMaskClick:o,appear:!0,dialog:!0,to:a,maskClosable:s,onAfterLeave:i},{default:()=>Ei(F9,Object.assign({},hJ(this.$props,B9),{style:this.internalStyle,onClose:r,onNegativeClick:n,onPositiveClick:t}))})}});const H9=Symbol("dialogApi"),Y9=Symbol("dialogProvider");var X9=Ke({name:"DialogProvider",props:{injectionKey:String,to:[String,Object]},setup(){const t=ge([]),e={};function n(n={}){const r=Tq(),i=re(Object.assign(Object.assign({},n),{key:r,destroy:()=>{e[`n-dialog-${r}`].hide()}}));return t.value.push(i),i}const r=["info","success","warning","error"].map((t=>e=>n(Object.assign(Object.assign({},e),{type:t}))));const i={create:n,destroyAll:function(){Object.values(e).forEach((t=>t.hide()))},info:r[0],success:r[1],warning:r[2],error:r[3]};return ze(H9,i),ze(Y9,{clickedRef:oJ(64),clickPositionRef:tJ()}),Object.assign(Object.assign({},i),{dialogList:t,dialogInstRefs:e,handleAfterLeave:function(e){const{value:n}=t;n.splice(n.findIndex((t=>t.key===e)),1)}})},render(){var t,e;return Ei(ir,null,[this.dialogList.map((t=>Ei(W9,function(t,e=[],n){const r={};return Object.getOwnPropertyNames(t).forEach((n=>{e.includes(n)||(r[n]=t[n])})),Object.assign(r,n)}(t,["destroy","style"],{internalStyle:t.style,to:this.to,ref:e=>{null===e?delete this.dialogInstRefs[`n-dialog-${t.key}`]:this.dialogInstRefs[`n-dialog-${t.key}`]=e},internalKey:t.key,onInternalAfterLeave:this.handleAfterLeave})))),null===(e=(t=this.$slots).default)||void 0===e?void 0:e.call(t)])}});function q9(){const t=je(H9,null);return null===t&&yJ("use-dialog","No outer <n-dialog-provider /> founded."),t}var K9={gapSmall:"4px 8px",gapMedium:"8px 12px",gapLarge:"12px 16px"};var Z9={name:"Space",self:()=>K9};var Q9=Ke({name:"Space",props:Object.assign(Object.assign({},LJ.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,size:{type:[String,Number,Array],default:"medium"},itemStyle:[String,Object],wrap:{type:Boolean,default:!0}}),setup(t){const{mergedClsPrefixRef:e}=FJ(t),n=LJ("Space","Space",void 0,Z9,t,e);return{mergedClsPrefix:e,margin:Ee((()=>{const{size:e}=t;if(Array.isArray(e))return{horizontal:e[0],vertical:e[1]};if("number"==typeof e)return{horizontal:e,vertical:e};const{self:{[CQ("gap",e)]:r}}=n.value,{row:i,col:o}=function(t,e){const[n,r]=t.split(" ");return e?"row"===e?n:r:{row:n,col:r||n}}(r);return{horizontal:sq(o),vertical:sq(i)}}))}},render(){const{vertical:t,align:e,inline:n,justify:r,itemStyle:i,margin:o,wrap:a,mergedClsPrefix:s}=this,l=fJ(dJ(this)),u=`${o.horizontal}px`,c=o.horizontal/2+"px",d=`${o.vertical}px`,h=o.vertical/2+"px",f=l.length-1,p=r.startsWith("space-");return Ei("div",{role:"none",class:`${s}-space`,style:{display:n?"inline-flex":"flex",flexDirection:t?"column":"row",justifyContent:["start","end"].includes(r)?"flex-"+r:r,flexWrap:!a||t?"nowrap":"wrap",marginTop:t?"":`-${h}`,marginBottom:t?"":`-${h}`,alignItems:e}},l.map(((e,n)=>Ei("div",{role:"none",style:[i,{maxWidth:"100%"},t?{marginBottom:n!==f?d:""}:{marginRight:p?"space-between"===r&&n===f?"":c:n!==f?u:"",marginLeft:p?"space-between"===r&&0===n?"":c:"",paddingTop:h,paddingBottom:h}]},e))))}}),J9={blankHeightSmall:"28px",blankHeightMedium:"34px",blankHeightLarge:"40px",feedbackPadding:"4px 0 0 2px",feedbackHeightSmall:"24px",feedbackHeightMedium:"24px",feedbackHeightLarge:"26px",feedbackFontSizeSmall:"13px",feedbackFontSizeMedium:"14px",feedbackFontSizeLarge:"14px",labelFontSizeLeftSmall:"14px",labelFontSizeLeftMedium:"14px",labelFontSizeLeftLarge:"15px",labelFontSizeTopSmall:"13px",labelFontSizeTopMedium:"14px",labelFontSizeTopLarge:"14px",labelHeightSmall:"24px",labelHeightMedium:"26px",labelHeightLarge:"28px",labelPaddingVertical:"0 0 8px 2px",labelPaddingHorizontal:"0 12px 0 0",labelTextAlignVertical:"left",labelTextAlignHorizontal:"right"};var t7={name:"Form",common:K2,self:t=>{const{textColor1:e,errorColor:n,warningColor:r,lineHeight:i,textColor3:o}=t;return Object.assign(Object.assign({},J9),{lineHeight:i,labelTextColor:e,asteriskColor:n,feedbackTextColorError:n,feedbackTextColorWarning:r,feedbackTextColor:o})}},e7=AQ("form",[TQ("inline","\n width: 100%;\n display: inline-flex;\n align-items: flex-start;\n align-content: space-around;\n ",[AQ("form-item",{width:"auto",marginRight:"18px"},[EQ("&:last-child",{marginRight:0})])])]);const n7=Symbol("form"),r7=Symbol("formItemInsts");var i7=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(PCt){o(PCt)}}function s(t){try{l(r.throw(t))}catch(PCt){o(PCt)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))};var o7=Ke({name:"Form",props:Object.assign(Object.assign({},LJ.props),{inline:{type:Boolean,default:!1},labelWidth:[Number,String],labelAlign:String,labelPlacement:{type:String,default:"top"},model:{type:Object,default:()=>{}},rules:Object,disabled:Boolean,size:String,showRequireMark:{type:Boolean,default:void 0},requireMarkPlacement:String,showFeedback:{type:Boolean,default:!0},onSubmit:{type:Function,default:t=>t.preventDefault()},showLabel:{type:Boolean,default:void 0}}),setup(t){const{mergedClsPrefixRef:e}=FJ(t);LJ("Form","Form",e7,t7,t,e);const n={};ze(n7,t),ze(r7,{formItems:n});const r={validate:function(t,e=(()=>!0)){return i7(this,void 0,void 0,(function*(){return yield new Promise(((r,i)=>{const o=[];for(const t of gJ(n)){const r=n[t];for(const t of r)t.path&&o.push(t.internalValidate(null,e))}Promise.all(o).then((e=>{if(e.some((t=>!t.valid))){const n=e.filter((t=>t.errors)).map((t=>t.errors));t?t(n):i(n)}else t?t():r()}))}))}))},restoreValidation:function(){for(const t of gJ(n)){const e=n[t];for(const t of e)t.restoreValidation()}}};return Object.assign(r,{mergedClsPrefix:e})},render(){const{mergedClsPrefix:t}=this;return Ei("form",{class:[`${t}-form`,this.inline&&`${t}-form--inline`],onSubmit:this.onSubmit},this.$slots)}});function a7(){return(a7=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function s7(t){return(s7=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l7(t,e){return(l7=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u7(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(PCt){return!1}}function c7(t,e,n){return(c7=u7()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&l7(i,n.prototype),i}).apply(null,arguments)}function d7(t){var e="function"==typeof Map?new Map:void 0;return(d7=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return c7(t,arguments,s7(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l7(r,t)})(t)}var h7=/%[sdj%]/g,f7=function(){};function p7(t){if(!t||!t.length)return null;var e={};return t.forEach((function(t){var n=t.field;e[n]=e[n]||[],e[n].push(t)})),e}function g7(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=0,o=n.length;if("function"==typeof t)return t.apply(null,n);if("string"==typeof t){var a=t.replace(h7,(function(t){if("%%"===t)return"%";if(i>=o)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(e){return"[Circular]"}break;default:return t}}));return a}return t}function v7(t,e){return null==t||(!("array"!==e||!Array.isArray(t)||t.length)||!(!function(t){return"string"===t||"url"===t||"hex"===t||"email"===t||"date"===t||"pattern"===t}(e)||"string"!=typeof t||t))}function m7(t,e,n){var r=0,i=t.length;!function o(a){if(a&&a.length)n(a);else{var s=r;r+=1,s<i?e(t[s],o):n([])}}([])}"undefined"!=typeof process&&process.env;var y7=function(t){var e,n;function r(e,n){var r;return(r=t.call(this,"Async Validation Error")||this).errors=e,r.fields=n,r}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,l7(e,n),r}(d7(Error));function b7(t,e,n,r,i){if(e.first){var o=new Promise((function(e,o){m7(function(t){var e=[];return Object.keys(t).forEach((function(n){e.push.apply(e,t[n]||[])})),e}(t),n,(function(t){return r(t),t.length?o(new y7(t,p7(t))):e(i)}))}));return o.catch((function(t){return t})),o}var a=!0===e.firstFields?Object.keys(t):e.firstFields||[],s=Object.keys(t),l=s.length,u=0,c=[],d=new Promise((function(e,o){var d=function(t){if(c.push.apply(c,t),++u===l)return r(c),c.length?o(new y7(c,p7(c))):e(i)};s.length||(r(c),e(i)),s.forEach((function(e){var r=t[e];-1!==a.indexOf(e)?m7(r,n,d):function(t,e,n){var r=[],i=0,o=t.length;function a(t){r.push.apply(r,t||[]),++i===o&&n(r)}t.forEach((function(t){e(t,a)}))}(r,n,d)}))}));return d.catch((function(t){return t})),d}function x7(t,e){return function(n){var r,i;return r=t.fullFields?function(t,e){for(var n=t,r=0;r<e.length;r++){if(null==n)return n;n=n[e[r]]}return n}(e,t.fullFields):e[n.field||t.fullField],(i=n)&&void 0!==i.message?(n.field=n.field||t.fullField,n.fieldValue=r,n):{message:"function"==typeof n?n():n,fieldValue:r,field:n.field||t.fullField}}}function w7(t,e){if(e)for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];"object"==typeof r&&"object"==typeof t[n]?t[n]=a7({},t[n],r):t[n]=r}return t}var C7=function(t,e,n,r,i,o){!t.required||n.hasOwnProperty(t.field)&&!v7(e,o||t.type)||r.push(g7(i.messages.required,t.fullField))},S7={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},k7={integer:function(t){return k7.number(t)&&parseInt(t,10)===t},float:function(t){return k7.number(t)&&!k7.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch(PCt){return!1}},date:function(t){return"function"==typeof t.getTime&&"function"==typeof t.getMonth&&"function"==typeof t.getYear&&!isNaN(t.getTime())},number:function(t){return!isNaN(t)&&"number"==typeof t},object:function(t){return"object"==typeof t&&!k7.array(t)},method:function(t){return"function"==typeof t},email:function(t){return"string"==typeof t&&!!t.match(S7.email)&&t.length<255},url:function(t){return"string"==typeof t&&!!t.match(S7.url)},hex:function(t){return"string"==typeof t&&!!t.match(S7.hex)}},E7={required:C7,whitespace:function(t,e,n,r,i){(/^\s+$/.test(e)||""===e)&&r.push(g7(i.messages.whitespace,t.fullField))},type:function(t,e,n,r,i){if(t.required&&void 0===e)C7(t,e,n,r,i);else{var o=t.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(o)>-1?k7[o](e)||r.push(g7(i.messages.types[o],t.fullField,t.type)):o&&typeof e!==t.type&&r.push(g7(i.messages.types[o],t.fullField,t.type))}},range:function(t,e,n,r,i){var o="number"==typeof t.len,a="number"==typeof t.min,s="number"==typeof t.max,l=e,u=null,c="number"==typeof e,d="string"==typeof e,h=Array.isArray(e);if(c?u="number":d?u="string":h&&(u="array"),!u)return!1;h&&(l=e.length),d&&(l=e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),o?l!==t.len&&r.push(g7(i.messages[u].len,t.fullField,t.len)):a&&!s&&l<t.min?r.push(g7(i.messages[u].min,t.fullField,t.min)):s&&!a&&l>t.max?r.push(g7(i.messages[u].max,t.fullField,t.max)):a&&s&&(l<t.min||l>t.max)&&r.push(g7(i.messages[u].range,t.fullField,t.min,t.max))},enum:function(t,e,n,r,i){t.enum=Array.isArray(t.enum)?t.enum:[],-1===t.enum.indexOf(e)&&r.push(g7(i.messages.enum,t.fullField,t.enum.join(", ")))},pattern:function(t,e,n,r,i){if(t.pattern)if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(e)||r.push(g7(i.messages.pattern.mismatch,t.fullField,e,t.pattern));else if("string"==typeof t.pattern){new RegExp(t.pattern).test(e)||r.push(g7(i.messages.pattern.mismatch,t.fullField,e,t.pattern))}}},M7=function(t,e,n,r,i){var o=t.type,a=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(v7(e,o)&&!t.required)return n();E7.required(t,e,r,a,i,o),v7(e,o)||E7.type(t,e,r,a,i)}n(a)},A7={string:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(v7(e,"string")&&!t.required)return n();E7.required(t,e,r,o,i,"string"),v7(e,"string")||(E7.type(t,e,r,o,i),E7.range(t,e,r,o,i),E7.pattern(t,e,r,o,i),!0===t.whitespace&&E7.whitespace(t,e,r,o,i))}n(o)},method:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(v7(e)&&!t.required)return n();E7.required(t,e,r,o,i),void 0!==e&&E7.type(t,e,r,o,i)}n(o)},number:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(""===e&&(e=void 0),v7(e)&&!t.required)return n();E7.required(t,e,r,o,i),void 0!==e&&(E7.type(t,e,r,o,i),E7.range(t,e,r,o,i))}n(o)},boolean:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(v7(e)&&!t.required)return n();E7.required(t,e,r,o,i),void 0!==e&&E7.type(t,e,r,o,i)}n(o)},regexp:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(v7(e)&&!t.required)return n();E7.required(t,e,r,o,i),v7(e)||E7.type(t,e,r,o,i)}n(o)},integer:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(v7(e)&&!t.required)return n();E7.required(t,e,r,o,i),void 0!==e&&(E7.type(t,e,r,o,i),E7.range(t,e,r,o,i))}n(o)},float:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(v7(e)&&!t.required)return n();E7.required(t,e,r,o,i),void 0!==e&&(E7.type(t,e,r,o,i),E7.range(t,e,r,o,i))}n(o)},array:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(null==e&&!t.required)return n();E7.required(t,e,r,o,i,"array"),null!=e&&(E7.type(t,e,r,o,i),E7.range(t,e,r,o,i))}n(o)},object:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(v7(e)&&!t.required)return n();E7.required(t,e,r,o,i),void 0!==e&&E7.type(t,e,r,o,i)}n(o)},enum:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(v7(e)&&!t.required)return n();E7.required(t,e,r,o,i),void 0!==e&&E7.enum(t,e,r,o,i)}n(o)},pattern:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(v7(e,"string")&&!t.required)return n();E7.required(t,e,r,o,i),v7(e,"string")||E7.pattern(t,e,r,o,i)}n(o)},date:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(v7(e,"date")&&!t.required)return n();var a;if(E7.required(t,e,r,o,i),!v7(e,"date"))a=e instanceof Date?e:new Date(e),E7.type(t,a,r,o,i),a&&E7.range(t,a.getTime(),r,o,i)}n(o)},url:M7,hex:M7,email:M7,required:function(t,e,n,r,i){var o=[],a=Array.isArray(e)?"array":typeof e;E7.required(t,e,r,o,i,a),n(o)},any:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(v7(e)&&!t.required)return n();E7.required(t,e,r,o,i)}n(o)}};function _7(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var T7=_7(),P7=function(){function t(t){this.rules=null,this._messages=T7,this.define(t)}var e=t.prototype;return e.define=function(t){var e=this;if(!t)throw new Error("Cannot configure a schema with no rules");if("object"!=typeof t||Array.isArray(t))throw new Error("Rules must be an object");this.rules={},Object.keys(t).forEach((function(n){var r=t[n];e.rules[n]=Array.isArray(r)?r:[r]}))},e.messages=function(t){return t&&(this._messages=w7(_7(),t)),this._messages},e.validate=function(e,n,r){var i=this;void 0===n&&(n={}),void 0===r&&(r=function(){});var o=e,a=n,s=r;if("function"==typeof a&&(s=a,a={}),!this.rules||0===Object.keys(this.rules).length)return s&&s(null,o),Promise.resolve(o);if(a.messages){var l=this.messages();l===T7&&(l=_7()),w7(l,a.messages),a.messages=l}else a.messages=this.messages();var u={};(a.keys||Object.keys(this.rules)).forEach((function(t){var n=i.rules[t],r=o[t];n.forEach((function(n){var a=n;"function"==typeof a.transform&&(o===e&&(o=a7({},o)),r=o[t]=a.transform(r)),(a="function"==typeof a?{validator:a}:a7({},a)).validator=i.getValidationMethod(a),a.validator&&(a.field=t,a.fullField=a.fullField||t,a.type=i.getType(a),u[t]=u[t]||[],u[t].push({rule:a,value:r,source:o,field:t}))}))}));var c={};return b7(u,a,(function(e,n){var r,i=e.rule,s=!("object"!==i.type&&"array"!==i.type||"object"!=typeof i.fields&&"object"!=typeof i.defaultField);function l(t,e){return a7({},e,{fullField:i.fullField+"."+t,fullFields:i.fullFields?[].concat(i.fullFields,[t]):[t]})}function u(r){void 0===r&&(r=[]);var u=Array.isArray(r)?r:[r];!a.suppressWarning&&u.length&&t.warning("async-validator:",u),u.length&&void 0!==i.message&&(u=[].concat(i.message));var d=u.map(x7(i,o));if(a.first&&d.length)return c[i.field]=1,n(d);if(s){if(i.required&&!e.value)return void 0!==i.message?d=[].concat(i.message).map(x7(i,o)):a.error&&(d=[a.error(i,g7(a.messages.required,i.field))]),n(d);var h={};i.defaultField&&Object.keys(e.value).map((function(t){h[t]=i.defaultField})),h=a7({},h,e.rule.fields);var f={};Object.keys(h).forEach((function(t){var e=h[t],n=Array.isArray(e)?e:[e];f[t]=n.map(l.bind(null,t))}));var p=new t(f);p.messages(a.messages),e.rule.options&&(e.rule.options.messages=a.messages,e.rule.options.error=a.error),p.validate(e.value,e.rule.options||a,(function(t){var e=[];d&&d.length&&e.push.apply(e,d),t&&t.length&&e.push.apply(e,t),n(e.length?e:null)}))}else n(d)}s=s&&(i.required||!i.required&&e.value),i.field=e.field,i.asyncValidator?r=i.asyncValidator(i,e.value,u,e.source,a):i.validator&&(!0===(r=i.validator(i,e.value,u,e.source,a))?u():!1===r?u("function"==typeof i.message?i.message(i.fullField||i.field):i.message||(i.fullField||i.field)+" fails"):r instanceof Array?u(r):r instanceof Error&&u(r.message)),r&&r.then&&r.then((function(){return u()}),(function(t){return u(t)}))}),(function(t){!function(t){for(var e,n,r=[],i={},a=0;a<t.length;a++)e=t[a],n=void 0,Array.isArray(e)?r=(n=r).concat.apply(n,e):r.push(e);r.length?(i=p7(r),s(r,i)):s(null,o)}(t)}),o)},e.getType=function(t){if(void 0===t.type&&t.pattern instanceof RegExp&&(t.type="pattern"),"function"!=typeof t.validator&&t.type&&!A7.hasOwnProperty(t.type))throw new Error(g7("Unknown rule type %s",t.type));return t.type||"string"},e.getValidationMethod=function(t){if("function"==typeof t.validator)return t.validator;var e=Object.keys(t),n=e.indexOf("message");return-1!==n&&e.splice(n,1),1===e.length&&"required"===e[0]?A7.required:A7[this.getType(t)]||void 0},t}();P7.register=function(t,e){if("function"!=typeof e)throw new Error("Cannot register a validator by type, validator is not a function");A7[t]=e},P7.warning=f7,P7.messages=T7,P7.validators=A7;var I7=Ke({name:"FormItemFeedback",props:{clsPrefix:{type:String,required:!0},explains:Array,feedback:String},render(){var t;const{feedback:e,clsPrefix:n}=this;return e?Ei("div",{key:e,class:`${n}-form-item-feedback__line`},e):null===(t=this.explains)||void 0===t?void 0:t.map((t=>Ei("div",{key:t,class:`${n}-form-item-feedback__line`},t)))}});const{cubicBezierEaseInOut:D7}=BQ;var O7=AQ("form-item",{display:"grid",lineHeight:"var(--line-height)"},[AQ("form-item-label","\n grid-area: label;\n align-items: center;\n line-height: 1.25;\n text-align: var(--label-text-align);\n font-size: var(--label-font-size);\n height: var(--label-height);\n padding: var(--label-padding);\n color: var(--label-text-color);\n transition: color .3s var(--bezier);\n box-sizing: border-box;\n ",[_Q("asterisk","\n color: var(--asterisk-color);\n transition: color .3s var(--bezier);\n ")]),AQ("form-item-blank",{gridArea:"blank",minHeight:"var(--blank-height)"}),TQ("left-labelled",'\n grid-template-areas:\n "label blank"\n "label feedback";\n grid-template-columns: auto 1fr;\n ',[AQ("form-item-label","\n height: var(--blank-height);\n line-height: var(--blank-height);\n box-sizing: border-box;\n white-space: nowrap;\n flex-shrink: 0;\n flex-grow: 0;\n ")]),TQ("top-labelled",'\n grid-template-areas:\n "label"\n "blank"\n "feedback";\n grid-template-rows: var(--label-height) 1fr;\n grid-template-columns: minmax(0, 100%);\n ',[TQ("no-label",'\n grid-template-areas:\n "blank"\n "feedback";\n grid-template-rows: 1fr;\n '),AQ("form-item-label",{display:"flex",alignItems:"flex-end",justifyContent:"var(--label-text-align)"})]),AQ("form-item-blank","\n box-sizing: border-box;\n display: flex;\n align-items: center;\n position: relative;\n "),AQ("form-item-feedback-wrapper","\n grid-area: feedback;\n box-sizing: border-box;\n min-height: var(--feedback-height);\n font-size: var(--feedback-font-size);\n padding: var(--feedback-padding);\n line-height: 1.25;\n transform-origin: top left;\n ",[AQ("form-item-feedback",{transition:"color .3s var(--bezier)",color:"var(--feedback-text-color)"},[TQ("warning",{color:"var(--feedback-text-color-warning)"}),TQ("error",{color:"var(--feedback-text-color-error)"}),function({name:t="fade-down",fromOffset:e="-4px",enterDuration:n=".3s",leaveDuration:r=".3s",enterCubicBezier:i=D7,leaveCubicBezier:o=D7}={}){return[EQ(`&.${t}-transition-enter-from, &.${t}-transition-leave-to`,{opacity:0,transform:`translateY(${e})`}),EQ(`&.${t}-transition-enter-to, &.${t}-transition-leave-from`,{opacity:1,transform:"translateY(0)"}),EQ(`&.${t}-transition-leave-active`,{transition:`opacity ${r} ${o}, transform ${r} ${o}`}),EQ(`&.${t}-transition-enter-active`,{transition:`opacity ${n} ${i}, transform ${n} ${i}`})]}({fromOffset:"-3px",enterDuration:".3s",leaveDuration:".2s"})])])]),R7=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(PCt){o(PCt)}}function s(t){try{l(r.throw(t))}catch(PCt){o(PCt)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))};function L7(t,e){return(...n)=>{var r;try{const i=t(...n);return!e&&("boolean"==typeof i||i instanceof Error||Array.isArray(i))||(null===(r=i)||void 0===r?void 0:r.then)?i:(void 0===i||mJ("form-item/validate",`You return a ${typeof i} typed value in the validator method, which is not recommended. Please use `+(e?"`Promise`":"`boolean`, `Error` or `Promise`")+" typed value instead."),!0)}catch(i){return mJ("form-item/validate","An error is catched in the validation, so the validation won't be done. Your callback in `validate` method of `n-form` or `n-form-item` won't be called in this validation."),void console.error(i)}}}var B7=Ke({name:"FormItem",props:Object.assign(Object.assign({},LJ.props),{label:String,labelWidth:[Number,String],labelStyle:[String,Object],labelAlign:String,labelPlacement:String,path:String,first:Boolean,rulePath:String,required:Boolean,showRequireMark:{type:Boolean,default:void 0},requireMarkPlacement:String,showFeedback:{type:Boolean,default:void 0},rule:[Object,Array],size:String,ignorePathChange:Boolean,validationStatus:String,feedback:String,showLabel:{type:Boolean,default:void 0}}),setup(t){OJ(r7,"formItems",Se(t,"path"));const{mergedClsPrefixRef:e}=FJ(t),n=je(n7,null),r=function(t){const e=je(n7,null);return{mergedSize:Ee((()=>void 0!==t.size?t.size:void 0!==(null==e?void 0:e.size)?e.size:"medium"))}}(t),i=function(t){const e=je(n7,null),n=Ee((()=>{if("top"===r.value)return;const{labelWidth:n}=t;return void 0!==n?kJ(n):void 0!==(null==e?void 0:e.labelWidth)?kJ(e.labelWidth):void 0})),r=Ee((()=>{const{labelPlacement:n}=t;return void 0!==n?n:(null==e?void 0:e.labelPlacement)?e.labelPlacement:"top"})),i=Ee((()=>{const{labelAlign:n}=t;return n||((null==e?void 0:e.labelAlign)?e.labelAlign:void 0)})),o=Ee((()=>[{width:n.value},t.labelStyle])),a=Ee((()=>{const{showRequireMark:n}=t;return void 0!==n?n:null==e?void 0:e.showRequireMark})),s=Ee((()=>{const{requireMarkPlacement:n}=t;return void 0!==n?n:null==e?void 0:e.requireMarkPlacement})),l=ge(!1),u=Ee((()=>{const{validationStatus:e}=t;return void 0!==e?e:l.value?"error":void 0})),c=Ee((()=>{const{showFeedback:n}=t;return void 0!==n?n:void 0===(null==e?void 0:e.showFeedback)||e.showFeedback})),d=Ee((()=>{const{showLabel:n}=t;return void 0!==n?n:void 0===(null==e?void 0:e.showLabel)||e.showLabel}));return{validationErrored:l,mergedLabelStyle:o,mergedLabelPlacement:r,mergedLabelAlign:i,mergedShowRequireMark:a,mergedRequireMarkPlacement:s,mergedValidationStatus:u,mergedShowFeedback:c,mergedShowLabel:d}}(t),{validationErrored:o}=i,{mergedRequired:a,mergedRules:s}=function(t){const e=je(n7,null),n=Ee((()=>{const{rulePath:e}=t;if(void 0!==e)return e;const{path:n}=t;return void 0!==n?n:void 0})),r=Ee((()=>{const r=[],{rule:i}=t;if(void 0!==i&&(Array.isArray(i)?r.push(...i):r.push(i)),e){const{rules:t}=e,{value:i}=n;if(void 0!==t&&void 0!==i){const e=mZ(t,i);void 0!==e&&(Array.isArray(e)?r.push(...e):r.push(e))}}return r})),i=Ee((()=>r.value.some((t=>t.required)))),o=Ee((()=>i.value||t.required));return{mergedRules:r,mergedRequired:o}}(t),{mergedSize:l}=r,{mergedLabelPlacement:u,mergedLabelAlign:c}=i,d=ge([]),h=ge(Tq()),f=Ee((()=>{const{feedback:e}=t;return null!=e||d.value.length})),p=n?Se(n,"disabled"):ge(!1),g=LJ("Form","FormItem",O7,t7,t,e);function v(){d.value=[],o.value=!1,t.feedback&&(h.value=Tq())}xi(Se(t,"path"),(()=>{t.ignorePathChange||v()}));const m=(e=null,r=(()=>!0),i={suppressWarning:!0})=>R7(this,void 0,void 0,(function*(){const{path:a}=t;i?i.first||(i.first=t.first):i={};const{value:l}=s,u=n?mZ(n.model,a,null):void 0,c=(e?l.filter((t=>Array.isArray(t.trigger)?t.trigger.includes(e):t.trigger===e)):l).filter(r).map((t=>{const e=Object.assign({},t);return e.validator&&(e.validator=L7(e.validator,!1)),e.asyncValidator&&(e.asyncValidator=L7(e.asyncValidator,!0)),e}));if(!c.length)return yield Promise.resolve({valid:!0});const h=null!=a?a:"__n_no_path__",f=new P7({[h]:c});return yield new Promise((t=>{f.validate({[h]:u},i,((e,n)=>{(null==e?void 0:e.length)?(d.value=e.map((t=>(null==t?void 0:t.message)||"")),o.value=!0,t({valid:!1,errors:e})):(v(),t({valid:!0}))}))}))}));ze(Iq,{path:Se(t,"path"),disabled:p,mergedSize:r.mergedSize,restoreValidation:v,handleContentBlur:function(){m("blur")},handleContentChange:function(){m("change")},handleContentFocus:function(){m("focus")},handleContentInput:function(){m("input")}});const y={validate:function(t,e){return R7(this,void 0,void 0,(function*(){let n,r,i,o;return"string"==typeof t?(n=t,r=e):null!==t&&"object"==typeof t&&(n=t.trigger,r=t.callback,i=t.shouldRuleBeApplied,o=t.options),yield new Promise(((t,e)=>{m(n,i,o).then((({valid:n,errors:i})=>{n?(r&&r(),t()):(r&&r(i),e(i))}))}))}))},restoreValidation:v,internalValidate:m};return Object.assign(Object.assign(Object.assign(Object.assign({mergedClsPrefix:e,mergedRequired:a,hasFeedback:f,feedbackId:h,explains:d},i),r),y),{cssVars:Ee((()=>{var t;const{value:e}=l,{value:n}=u,r="top"===n?"vertical":"horizontal",{common:{cubicBezierEaseInOut:i},self:{labelTextColor:o,asteriskColor:a,lineHeight:s,feedbackTextColor:d,feedbackTextColorWarning:h,feedbackTextColorError:f,feedbackPadding:p,[CQ("labelHeight",e)]:v,[CQ("blankHeight",e)]:m,[CQ("feedbackFontSize",e)]:y,[CQ("feedbackHeight",e)]:b,[CQ("labelPadding",r)]:x,[CQ("labelTextAlign",r)]:w,[CQ(CQ("labelFontSize",n),e)]:C}}=g.value;let S=null!==(t=c.value)&&void 0!==t?t:w;"top"===n&&(S="right"===S?"flex-end":"flex-start");return{"--bezier":i,"--line-height":s,"--blank-height":m,"--label-font-size":C,"--label-text-align":S,"--label-height":v,"--label-padding":x,"--asterisk-color":a,"--label-text-color":o,"--feedback-padding":p,"--feedback-font-size":y,"--feedback-height":b,"--feedback-text-color":d,"--feedback-text-color-warning":h,"--feedback-text-color-error":f}}))})},render(){const{$slots:t,mergedClsPrefix:e,mergedShowLabel:n,mergedShowRequireMark:r,mergedRequireMarkPlacement:i}=this;return Ei("div",{class:[`${e}-form-item`,`${e}-form-item--${this.mergedSize}-size`,`${e}-form-item--${this.mergedLabelPlacement}-labelled`,!n&&`${e}-form-item--no-label`],style:this.cssVars},n&&(this.label||t.label)?Ei("label",{class:`${e}-form-item-label`,style:this.mergedLabelStyle},"left"!==i?Ir(t,"label",void 0,(()=>[this.label])):null,(void 0!==r?r:this.mergedRequired)?Ei("span",{class:`${e}-form-item-label__asterisk`},"left"!==i?" *":"* "):null,"left"===i?Ir(t,"label",void 0,(()=>[this.label])):null):null,Ei("div",{class:[`${e}-form-item-blank`,this.mergedValidationStatus&&`${e}-form-item-blank--${this.mergedValidationStatus}`]},t),this.mergedShowFeedback?Ei("div",{key:this.feedbackId,class:`${e}-form-item-feedback-wrapper`},Ei($i,{name:"fade-down-transition",mode:"out-in"},{default:()=>{const t=Ei(I7,{clsPrefix:e,explains:this.explains,feedback:this.feedback}),{hasFeedback:n,mergedValidationStatus:r}=this;return n?Ei("div","warning"===r?{key:"controlled-warning",class:`${e}-form-item-feedback ${e}-form-item-feedback--warning`}:"error"===r?{key:"controlled-error",class:`${e}-form-item-feedback ${e}-form-item-feedback--error`}:"success"===r?{key:"controlled-success",class:`${e}-form-item-feedback ${e}-form-item-feedback--success`}:{key:"controlled-default",class:`${e}-form-item-feedback`},t):null}})):null)}});var F7={name:"Layout",common:K2,peers:{Scrollbar:e3},self:t=>{const{textColor2:e,bodyColor:n,cardColor:r,dividerColor:i,actionColor:o,scrollbarColor:a,scrollbarColorHover:s,invertedColor:l}=t;return{textColor:e,textColorInverted:"#FFF",color:n,colorEmbedded:o,headerColor:r,headerColorInverted:l,footerColor:o,footerColorInverted:l,headerBorderColor:i,headerBorderColorInverted:l,footerBorderColor:i,footerBorderColorInverted:l,siderBorderColor:i,siderBorderColorInverted:l,siderColor:r,siderColorInverted:l,siderToggleButtonColor:"rgba(0, 0, 0, .15)",siderToggleBarColor:kq(n,a),siderToggleBarColorHover:kq(n,s),__invertScrollbar:"true"}}},N7=AQ("layout","\n color: var(--text-color);\n background-color: var(--color);\n box-sizing: border-box;\n position: relative;\n z-index: auto;\n flex: auto;\n overflow: hidden;\n transition:\n box-shadow .3s var(--bezier),\n background-color .3s var(--bezier),\n color .3s var(--bezier);\n",[AQ("layout-scroll-container","\n overflow-x: hidden;\n box-sizing: border-box;\n height: 100%;\n "),TQ("absolute-positioned","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ")]);const z7=Symbol("layoutSiderInjection"),j7={type:String,default:"static"},G7={embedded:Boolean,position:j7,nativeScrollbar:{type:Boolean,default:!0},scrollbarProps:Object,contentStyle:{type:[String,Object],default:""},hasSider:Boolean,siderPlacement:{type:String,default:"left"}},U7=Symbol("layout");var $7,V7=Ke({name:($7=!1)?"LayoutContent":"Layout",props:Object.assign(Object.assign({},LJ.props),G7),setup(t){const e=ge(null),n=ge(null),{mergedClsPrefixRef:r}=FJ(t),i=LJ("Layout","Layout",N7,F7,t,r);ze(U7,t);const o={scrollTo:function(r,i){if(t.nativeScrollbar){const{value:t}=e;t&&(void 0===i?t.scrollTo(r):t.scrollTo(r,i))}else{const{value:t}=n;t&&t.scrollTo(r,i)}}};return Object.assign({mergedClsPrefix:r,scrollableElRef:e,scrollbarInstRef:n,hasSiderStyle:{display:"flex",flexWrap:"nowrap",width:"100%",flexDirection:"row"},mergedTheme:i,cssVars:Ee((()=>{const{common:{cubicBezierEaseInOut:e},self:n}=i.value;return{"--bezier":e,"--color":t.embedded?n.colorEmbedded:n.color,"--text-color":n.textColor}}))},o)},render(){const{mergedClsPrefix:t,hasSider:e}=this,n=e?this.hasSiderStyle:void 0;return Ei("div",{class:[$7&&`${t}-layout-content`,`${t}-layout`,`${t}-layout--${this.position}-positioned`],style:this.cssVars},this.nativeScrollbar?Ei("div",{ref:"scrollableElRef",class:`${t}-layout-scroll-container`,style:[this.contentStyle,n]},this.$slots):Ei(o3,Object.assign({},this.scrollbarProps,{ref:"scrollbarInstRef",theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,contentStyle:[this.contentStyle,n]}),this.$slots))}}),W7=AQ("layout-sider","\n flex-shrink: 0;\n box-sizing: border-box;\n position: relative;\n z-index: 1;\n color: var(--text-color);\n transition:\n color .3s var(--bezier),\n border-color .3s var(--bezier),\n min-width .3s var(--bezier),\n max-width .3s var(--bezier),\n transform .3s var(--bezier),\n background-color .3s var(--bezier);\n background-color: var(--color);\n display: flex;\n justify-content: flex-end;\n",[TQ("right-placement","\n justify-content: flex-start;\n ",[TQ("bordered","\n border-right: none;\n border-left: 1px solid var(--border-color);\n "),TQ("collapsed",[AQ("layout-toggle-button","\n transform: translateX(-50%) translateY(-50%) rotate(0);\n "),AQ("layout-toggle-bar",[EQ("&:hover",[_Q("top",{transform:"rotate(-12deg) scale(1.15) translateY(-2px)"}),_Q("bottom",{transform:"rotate(12deg) scale(1.15) translateY(2px)"})])])]),AQ("layout-toggle-button","\n transform: translateX(-50%) translateY(-50%) rotate(180deg);\n left: 0;\n "),AQ("layout-toggle-bar","\n left: -28px;\n transform: rotate(180deg);\n ",[EQ("&:hover",[_Q("top",{transform:"rotate(12deg) scale(1.15) translateY(-2px)"}),_Q("bottom",{transform:"rotate(-12deg) scale(1.15) translateY(2px)"})])])]),TQ("collapsed",[AQ("layout-toggle-bar",[EQ("&:hover",[_Q("top",{transform:"rotate(-12deg) scale(1.15) translateY(-2px)"}),_Q("bottom",{transform:"rotate(12deg) scale(1.15) translateY(2px)"})])]),AQ("layout-toggle-button","\n transform: translateX(50%) translateY(-50%) rotate(180deg);\n ")]),AQ("layout-toggle-button","\n transition:\n transform .3s var(--bezier),\n fill .3s var(--bezier);\n cursor: pointer;\n width: 36px;\n height: 36px;\n position: absolute;\n top: 50%;\n right: 0;\n fill: var(--toggle-button-color);\n transform: translateX(50%) translateY(-50%) rotate(0);\n "),AQ("layout-toggle-bar","\n cursor: pointer;\n height: 72px;\n width: 32px;\n position: absolute;\n top: calc(50% - 36px);\n right: -28px;\n ",[_Q("top, bottom","\n position: absolute;\n width: 4px;\n border-radius: 2px;\n height: 38px;\n left: 14px;\n transition: \n background-color .3s var(--bezier),\n transform .3s var(--bezier);\n "),_Q("bottom","\n position: absolute;\n top: 34px;\n "),EQ("&:hover",[_Q("top",{transform:"rotate(12deg) scale(1.15) translateY(-2px)"}),_Q("bottom",{transform:"rotate(-12deg) scale(1.15) translateY(2px)"})]),_Q("top, bottom",{backgroundColor:"var(--toggle-bar-color)"}),EQ("&:hover",[_Q("top, bottom",{backgroundColor:"var(--toggle-bar-color-hover)"})])]),_Q("border","\n position: absolute;\n top: 0;\n right: 0;\n bottom: 0;\n width: 1px;\n transition: background-color .3s var(--bezier);\n "),AQ("layout-sider-scroll-container","\n flex-grow: 1;\n flex-shrink: 0;\n box-sizing: border-box;\n height: 100%;\n opacity: 0;\n transition: opacity .3s var(--bezier);\n max-width: 100%;\n "),TQ("show-content",[AQ("layout-sider-scroll-container",{opacity:1})]),TQ("absolute-positioned","\n position: absolute;\n left: 0;\n top: 0;\n bottom: 0;\n "),TQ("bordered","\n border-right: 1px solid var(--border-color);\n ")]),H7=Ke({name:"LayoutToggleButton",props:{clsPrefix:{type:String,required:!0},onClick:Function},render(){return Ei("div",{class:`${this.clsPrefix}-layout-toggle-button`,onClick:this.onClick},Ei("svg",{viewBox:"0 0 56.06 56.06"},Ei("path",{d:"M50,22A28,28,0,1,0,78,50,28.06,28.06,0,0,0,50,22ZM65.09,52.16h-25l7.1,7.1a2.16,2.16,0,0,1-3.05,3.05L33.38,51.52a2.15,2.15,0,0,1,0-3L44.16,37.69a2.16,2.16,0,0,1,3.05,3.05l-7.1,7.1h25a2.16,2.16,0,0,1,0,4.32Z",transform:"translate(-21.97 -21.97)"})))}}),Y7=Ke({props:{clsPrefix:{type:String,required:!0},onClick:Function},render(){const{clsPrefix:t}=this;return Ei("div",{onClick:this.onClick,class:`${t}-layout-toggle-bar`},Ei("div",{class:`${t}-layout-toggle-bar__top`}),Ei("div",{class:`${t}-layout-toggle-bar__bottom`}))}});const X7={position:j7,bordered:Boolean,collapsedWidth:{type:Number,default:48},width:{type:[Number,String],default:272},contentStyle:{type:[String,Object],default:""},collapseMode:{type:String,default:"transform"},collapsed:{type:Boolean,default:void 0},defaultCollapsed:Boolean,showCollapsedContent:{type:Boolean,default:!0},showTrigger:{type:[Boolean,String],default:!1},nativeScrollbar:{type:Boolean,default:!0},duration:{type:Number,default:300},inverted:Boolean,scrollbarProps:Object,triggerStyle:[String,Object],"onUpdate:collapsed":[Function,Array],onUpdateCollapsed:[Function,Array],onExpand:[Function,Array],onCollapse:[Function,Array]};var q7=Ke({name:"LayoutSider",props:Object.assign(Object.assign({},LJ.props),X7),setup(t){const e=je(U7),n=ge(null),r=ge(null),i=Ee((()=>kJ(l.value?t.collapsedWidth:t.width))),o=Ee((()=>"transform"!==t.collapseMode?{}:{minWidth:kJ(t.width)})),a=Ee((()=>e?e.siderPlacement:"left")),s=ge(t.defaultCollapsed),l=aJ(Se(t,"collapsed"),s);ze(z7,{collapsedRef:l,collapseModeRef:Se(t,"collapseMode")});const{mergedClsPrefixRef:u}=FJ(t),c=LJ("Layout","LayoutSider",W7,F7,t,u),d={scrollTo:function(e,i){if(t.nativeScrollbar){const{value:t}=n;t&&(void 0===i?t.scrollTo(e):t.scrollTo(e,i))}else{const{value:t}=r;t&&t.scrollTo(e,i)}}};return Object.assign({scrollableElRef:n,scrollbarInstRef:r,mergedClsPrefix:u,mergedTheme:c,styleMaxWidth:i,mergedCollapsed:l,scrollContainerStyle:o,siderPlacement:a,handleTriggerClick:function(){const{"onUpdate:collapsed":e,onUpdateCollapsed:n,onExpand:r,onCollapse:i}=t,{value:o}=l;n&&pJ(n,!o),e&&pJ(e,!o),s.value=!o,o?r&&pJ(r):i&&pJ(i)},cssVars:Ee((()=>{const{common:{cubicBezierEaseInOut:e},self:n}=c.value,{siderToggleButtonColor:r,siderToggleBarColor:i,siderToggleBarColorHover:o}=n,a={"--bezier":e,"--toggle-button-color":r,"--toggle-bar-color":i,"--toggle-bar-color-hover":o};return t.inverted?(a["--color"]=n.siderColorInverted,a["--text-color"]=n.textColorInverted,a["--border-color"]=n.siderBorderColorInverted,a.__invertScrollbar=n.__invertScrollbar):(a["--color"]=n.siderColor,a["--text-color"]=n.textColor,a["--border-color"]=n.siderBorderColor),a}))},d)},render(){const{mergedClsPrefix:t,mergedCollapsed:e,showTrigger:n}=this;return Ei("aside",{class:[`${t}-layout-sider`,`${t}-layout-sider--${this.position}-positioned`,`${t}-layout-sider--${this.siderPlacement}-placement`,this.bordered&&`${t}-layout-sider--bordered`,e&&`${t}-layout-sider--collapsed`,(!e||this.showCollapsedContent)&&`${t}-layout-sider--show-content`],style:[this.cssVars,{maxWidth:this.styleMaxWidth,width:kJ(this.width)}]},this.nativeScrollbar?Ei("div",{class:`${t}-layout-sider-scroll-container`,style:[this.scrollContainerStyle,this.contentStyle,{overflow:"auto"}],ref:"scrollableElRef"},this.$slots):Ei(o3,Object.assign({},this.scrollbarProps,{ref:"scrollbarInstRef",style:this.scrollContainerStyle,contentStyle:this.contentStyle,theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,builtinThemeOverrides:this.inverted&&"true"===this.cssVars.__invertScrollbar?{colorHover:"rgba(255, 255, 255, .4)",color:"rgba(255, 255, 255, .3)"}:void 0}),this.$slots),n?Ei("arrow-circle"===n?H7:Y7,{clsPrefix:t,style:this.triggerStyle,onClick:this.handleTriggerClick}):null)}});var K7={name:"List",common:K2,self:t=>{const{textColor2:e,cardColor:n,modalColor:r,popoverColor:i,dividerColor:o,borderRadius:a,fontSize:s}=t;return{textColor:e,color:n,colorModal:r,colorPopover:i,borderColor:o,borderColorModal:kq(r,o),borderColorPopover:kq(i,o),borderRadius:a,fontSize:s}}},Z7=EQ([AQ("list","\n --merged-border-color: var(--border-color);\n --merged-color: var(--color)\n font-size: var(--font-size);\n transition:\n background-color .3s var(--bezier),\n color .3s var(--bezier),\n border-color .3s var(--bezier);\n padding: 0;\n list-style-type: none;\n color: var(--text-color);\n background-color: var(--merged-color);\n ",[TQ("bordered","\n border-radius: var(--border-radius);\n border: 1px solid var(--merged-border-color);\n ",[AQ("list-item","\n padding: 12px 20px;\n ",[EQ("&:not(:last-child)","\n border-bottom: 1px solid var(--merged-border-color);\n ")]),_Q("header, footer","\n padding: 12px 20px;\n ",[EQ("&:not(:last-child)","\n border-bottom: 1px solid var(--merged-border-color);\n ")])]),_Q("header, footer","\n padding: 12px 0;\n box-sizing: border-box;\n transition: border-color .3s var(--bezier);\n ",[EQ("&:not(:last-child)","\n border-bottom: 1px solid var(--merged-border-color);\n ")]),AQ("list-item","\n padding: 12px 0; \n box-sizing: border-box;\n display: flex;\n flex-wrap: nowrap;\n align-items: center;\n transition: border-color .3s var(--bezier);\n ",[_Q("prefix","\n margin-right: 20px;\n flex: 0;\n "),_Q("suffix","\n margin-left: 20px;\n flex: 0;\n "),_Q("main","\n flex: 1;\n "),EQ("&:not(:last-child)","\n border-bottom: 1px solid var(--merged-border-color);\n ")])]),DQ(AQ("list","\n --merged-color: var(--color-modal);\n --merged-border-color: var(--border-color-modal);\n ")),OQ(AQ("list","\n --merged-color: var(--color-popover);\n --merged-border-color: var(--border-color-popover);\n "))]);const Q7=Object.assign(Object.assign({},LJ.props),{size:{type:String,default:"medium"},bordered:{type:Boolean,default:!1}}),J7=Symbol("list");var ttt=Ke({name:"List",props:Q7,setup(t){const{mergedClsPrefixRef:e}=FJ(t),n=LJ("List","List",Z7,K7,t,e);return ze(J7,{mergedClsPrefixRef:e}),{mergedClsPrefix:e,cssVars:Ee((()=>{const{common:{cubicBezierEaseInOut:t},self:{fontSize:e,textColor:r,color:i,colorModal:o,colorPopover:a,borderColor:s,borderColorModal:l,borderColorPopover:u,borderRadius:c}}=n.value;return{"--font-size":e,"--bezier":t,"--text-color":r,"--color":i,"--border-radius":c,"--border-color":s,"--border-color-modal":l,"--border-color-popover":u,"--color-modal":o,"--color-popover":a}}))}},render(){const{$slots:t,mergedClsPrefix:e}=this;return Ei("ul",{class:[`${e}-list`,this.bordered&&`${e}-list--bordered`],style:this.cssVars},t.header?Ei("div",{class:`${e}-list__header`},Ir(t,"header")):null,Ir(t,"default"),t.footer?Ei("div",{class:`${e}-list__footer`},Ir(t,"footer")):null)}}),ett=Ke({name:"ListItem",setup(){const t=je(J7,null);return t||yJ("list-item","`n-list-item` must be placed in `n-list`."),{mergedClsPrefix:t.mergedClsPrefixRef}},render(){const{$slots:t,mergedClsPrefix:e}=this;return Ei("li",{class:`${e}-list-item`},t.prefix?Ei("div",{class:`${e}-list-item__prefix`},Ir(t,"prefix")):null,t.default?Ei("div",{class:`${e}-list-item__main`},t):null,t.suffix?Ei("div",{class:`${e}-list-item__suffix`},Ir(t,"suffix")):null)}});const ntt={internalKey:{type:[String,Number],required:!0},root:Boolean,isGroup:Boolean,level:{type:Number,required:!0},title:[String,Function],extra:[String,Function]};var rtt=Ke({name:"MenuOptionContent",props:{collapsed:Boolean,disabled:Boolean,title:[String,Function],icon:Function,extra:[String,Function],showArrow:Boolean,childActive:Boolean,hover:Boolean,paddingLeft:Number,maxIconSize:{type:Number,required:!0},activeIconSize:{type:Number,required:!0},iconMarginRight:{type:Number,required:!0},clsPrefix:{type:String,required:!0},onClick:Function,tmNode:{type:Object,required:!0}},setup(t){const{props:e}=je(wtt);return{menuProps:e,style:Ee((()=>{const{paddingLeft:e}=t;return{paddingLeft:e&&`${e}px`}})),iconStyle:Ee((()=>{const{maxIconSize:e,activeIconSize:n,iconMarginRight:r}=t;return{width:`${e}px`,height:`${e}px`,fontSize:`${n}px`,marginRight:`${r}px`}}))}},render(){const{clsPrefix:t,tmNode:e,menuProps:{renderIcon:n,renderLabel:r,renderExtra:i,expandIcon:o}}=this,a=n?n(e.rawNode):vJ(this.icon);return Ei("div",{onClick:this.onClick,role:"none",class:[`${t}-menu-item-content`,{[`${t}-menu-item-content--collapsed`]:this.collapsed,[`${t}-menu-item-content--child-active`]:this.childActive,[`${t}-menu-item-content--disabled`]:this.disabled,[`${t}-menu-item-content--hover`]:this.hover}],style:this.style},a&&Ei("div",{class:`${t}-menu-item-content__icon`,style:this.iconStyle,role:"none"},[a]),Ei("div",{class:`${t}-menu-item-content-header`,role:"none"},r?r(e.rawNode):vJ(this.title),this.extra||i?Ei("span",{class:`${t}-menu-item-content-header__extra`}," ",i?i(e.rawNode):vJ(this.extra)):null),this.showArrow?Ei(T0,{ariaHidden:!0,class:`${t}-menu-item-content__arrow`,clsPrefix:t},{default:()=>o?o(e.rawNode):Ei(k0,null)}):null)}});const itt=Object.assign(Object.assign({},ntt),{rawNodes:{type:Array,default:()=>[]},tmNodes:{type:Array,default:()=>[]},tmNode:{type:Object,required:!0},disabled:{type:Boolean,default:!1},icon:Function,onClick:Function}),ott=Symbol("submenu");var att=Ke({name:"Submenu",props:itt,setup(t){const e=stt(t),{NMenu:n,NSubmenu:r}=e,{props:i,mergedCollapsedRef:o}=n,a=Ee((()=>{const{disabled:e}=t;return!!(null==r?void 0:r.mergedDisabledRef.value)||(!!i.disabled||e)})),s=ge(!1);return ze(ott,{paddingLeftRef:e.paddingLeft,mergedDisabledRef:a}),ze(utt,null),{menuProps:i,doSelect:n.doSelect,inverted:n.invertedRef,isHorizontal:n.isHorizontalRef,mergedClsPrefix:n.mergedClsPrefixRef,maxIconSize:e.maxIconSize,activeIconSize:e.activeIconSize,iconMarginRight:e.iconMarginRight,dropdownPlacement:e.dropdownPlacement,dropdownShow:s,paddingLeft:e.paddingLeft,mergedDisabled:a,mergedValue:n.mergedValueRef,childActive:zQ((()=>n.activePathRef.value.includes(t.internalKey))),collapsed:Ee((()=>"horizontal"!==i.mode&&(!!o.value||!n.mergedExpandedKeysRef.value.includes(t.internalKey)))),dropdownEnabled:Ee((()=>!a.value&&("horizontal"===i.mode||o.value))),handlePopoverShowChange:function(t){s.value=t},handleClick:function(){a.value||(o.value||n.toggleExpand(t.internalKey),function(){const{onClick:e}=t;e&&e()}())}}},render(){const{mergedClsPrefix:t,menuProps:{renderIcon:e,renderLabel:n}}=this,r=()=>{const{isHorizontal:e,paddingLeft:n,collapsed:r,mergedDisabled:i,maxIconSize:o,activeIconSize:a,title:s,childActive:l,icon:u,handleClick:c,dropdownShow:d,iconMarginRight:h,tmNode:f}=this;return Ei(rtt,{tmNode:f,paddingLeft:n,collapsed:r,disabled:i,iconMarginRight:h,maxIconSize:o,activeIconSize:a,title:s,showArrow:!e,childActive:l,clsPrefix:t,icon:u,hover:d,onClick:c})},i=()=>Ei(A0,null,{default:()=>{const{tmNodes:e,collapsed:n}=this;return n?null:Ei("div",{class:`${t}-submenu-children`,role:"menu"},e.map((t=>vtt(t))))}});return this.root?Ei(G8,{builtinThemeOverrides:{fontSizeLarge:"14px",optionIconSizeLarge:"18px"},value:this.mergedValue,size:"large",trigger:"hover",disabled:!this.dropdownEnabled,placement:this.dropdownPlacement,onUpdateShow:this.handlePopoverShowChange,options:this.rawNodes,onSelect:this.doSelect,inverted:this.inverted,renderIcon:e,renderLabel:n},{default:()=>Ei("div",{class:`${t}-submenu`,role:"menuitem","aria-expanded":!this.collapsed},r(),this.isHorizontal?null:i())}):Ei("div",{class:`${t}-submenu`,role:"menuitem","aria-expanded":!this.collapsed},r(),i())}});function stt(t){const e=je(wtt),{props:n,mergedCollapsedRef:r}=e,i=je(ott,null),o=je(utt,null),a=Ee((()=>"horizontal"===n.mode)),s=Ee((()=>a.value?n.dropdownPlacement:"tmNodes"in t?"right-start":"right")),l=Ee((()=>{var t;return Math.max(null!==(t=n.collapsedIconSize)&&void 0!==t?t:n.iconSize,n.iconSize)})),u=Ee((()=>{var e;return!a.value&&t.root&&r.value&&null!==(e=n.collapsedIconSize)&&void 0!==e?e:n.iconSize})),c=Ee((()=>{if(a.value)return;const{collapsedWidth:e,indent:s,rootIndent:u}=n,{root:c,isGroup:d}=t,h=void 0===u?s:u;return c?r.value?e/2-l.value/2:h:o?s/2+o.paddingLeftRef.value:i?(d?s/2:s)+i.paddingLeftRef.value:void 0})),d=Ee((()=>{const{collapsedWidth:e,indent:i,rootIndent:o}=n,{value:s}=l,{root:u}=t;if(a.value)return 8;if(!u)return 8;if(!r.value)return 8;return(void 0===o?i:o)+s+8-(e+s)/2}));return{dropdownPlacement:s,activeIconSize:u,maxIconSize:l,paddingLeft:c,iconMarginRight:d,NMenu:e,NSubmenu:i}}const ltt=Object.assign(Object.assign({},ntt),{tmNodes:{type:Array,required:!0}}),utt=Symbol("menu-item-group");var ctt=Ke({name:"MenuOptionGroup",props:ltt,setup(t){ze(ott,null);const e=stt(t);ze(utt,{paddingLeftRef:e.paddingLeft});const{mergedClsPrefixRef:n}=je(wtt);return function(){const{value:r}=n,i=e.paddingLeft.value;return Ei("div",{class:`${r}-menu-item-group`,role:"group"},Ei("span",{class:`${r}-menu-item-group-title`,style:void 0!==i?`padding-left: ${i}px;`:void 0},vJ(t.title),t.extra?Ei(ir,null," ",vJ(t.extra)):null),Ei("div",null,t.tmNodes.map((t=>vtt(t)))))}}});const dtt=Object.assign(Object.assign({},ntt),{tmNode:{type:Object,required:!0},disabled:{type:Boolean,default:!1},icon:Function,onClick:Function});var htt=Ke({name:"MenuOption",props:dtt,setup(t){const e=stt(t),{NSubmenu:n,NMenu:r}=e,{props:i,mergedClsPrefixRef:o,mergedCollapsedRef:a}=r,s=n?n.mergedDisabledRef:{value:!1},l=Ee((()=>s.value||t.disabled));return{mergedClsPrefix:o,dropdownPlacement:e.dropdownPlacement,paddingLeft:e.paddingLeft,iconMarginRight:e.iconMarginRight,maxIconSize:e.maxIconSize,activeIconSize:e.activeIconSize,mergedTheme:r.mergedThemeRef,menuProps:i,dropdownEnabled:zQ((()=>t.root&&a.value&&"horizontal"!==i.mode&&!l.value)),selected:Ee((()=>r.mergedValueRef.value===t.internalKey)),mergedDisabled:l,handleClick:function(e){l.value||(r.doSelect(t.internalKey,t.tmNode.rawNode),function(e){const{onClick:n}=t;n&&n(e)}(e))}}},render(){const{mergedClsPrefix:t,mergedTheme:e,tmNode:n,menuProps:{renderLabel:r}}=this;return Ei("div",{role:"menuitem",class:[`${t}-menu-item`,{[`${t}-menu-item--selected`]:this.selected,[`${t}-menu-item--disabled`]:this.mergedDisabled}]},Ei(K6,{theme:e.peers.Tooltip,themeOverrides:e.peerOverrides.Tooltip,trigger:"hover",placement:this.dropdownPlacement,disabled:!this.dropdownEnabled||void 0===this.title,internalExtraClass:["menu-tooltip"]},{default:()=>r?r(n.rawNode):vJ(this.title),trigger:()=>Ei(rtt,{tmNode:n,clsPrefix:t,paddingLeft:this.paddingLeft,iconMarginRight:this.iconMarginRight,maxIconSize:this.maxIconSize,activeIconSize:this.activeIconSize,title:this.title,extra:this.extra,disabled:this.mergedDisabled,icon:this.icon,onClick:this.handleClick})}))}});const ftt=gJ(ltt),ptt=gJ(dtt),gtt=gJ(itt);function vtt(t){const{rawNode:e,key:n,level:r,isGroup:i}=t,o=Object.assign(Object.assign({},e),{title:e.title||e.label,extra:e.titleExtra||e.extra,key:n,internalKey:n,level:r,root:0===r,isGroup:i});return t.children?t.isGroup?Ei(ctt,hJ(o,ftt,{tmNodes:t.children,key:n})):Ei(att,hJ(o,gtt,{key:n,rawNodes:t.rawNode.children,tmNodes:t.children,tmNode:t})):Ei(htt,hJ(o,ptt,{key:n,tmNode:t}))}var mtt={name:"Menu",common:K2,peers:{Tooltip:V6},self:t=>{const{borderRadius:e,textColor3:n,primaryColor:r,textColor2:i,primaryColorHover:o,textColor1:a,fontSize:s}=t;return Object.assign({borderRadius:e,color:"#0000",groupTextColor:n,itemColorActive:Eq(r,{alpha:.1}),itemColorActiveCollapsed:"#0000",itemTextColor:i,itemTextColorHover:o,itemTextColorChildActive:r,itemTextColorActive:r,itemIconColor:a,itemIconColorHover:o,itemIconColorActive:r,itemIconColorChildActive:r,itemIconColorCollapsed:a,arrowColor:r,arrowColorHover:o,arrowColorChildActive:r,arrowColorActive:r,colorInverted:"#0000",itemColorActiveInverted:r,itemColorActiveCollapsedInverted:r,borderColorHorizontal:"#0000",fontSize:s},{itemTextColorInverted:l="#BBB",itemTextColorHoverInverted:u="#FFF",itemTextColorChildActiveInverted:u,itemTextColorActiveInverted:u,itemIconColorInverted:l,itemIconColorHoverInverted:u,itemIconColorActiveInverted:u,itemIconColorChildActiveInverted:u,itemIconColorCollapsedInverted:l,arrowColorInverted:l,arrowColorHoverInverted:u,arrowColorChildActiveInverted:u,arrowColorActiveInverted:u,groupTextColorInverted:"#AAA"});var l,u}},ytt=EQ([AQ("menu","\n background-color: var(--color);\n color: var(--item-text-color);\n overflow: hidden;\n transition: background-color .3s var(--bezier);\n box-sizing: border-box;\n font-size: var(--font-size);\n padding-bottom: 6px;\n ",[TQ("horizontal",{display:"inline-flex",paddingBottom:0},[AQ("submenu",{margin:0}),AQ("menu-item",{margin:0},[EQ("&::before",{backgroundColor:"#0000 !important"}),TQ("selected",[AQ("menu-item-content",{borderBottom:"2px solid var(--border-color-horizontal)"})])]),AQ("menu-item-content",{padding:"0 20px",borderBottom:"2px solid #0000"},[TQ("child-active",{borderBottom:"2px solid var(--border-color-horizontal)"}),PQ("disabled",[btt({borderBottom:"2px solid var(--border-color-horizontal)"},null)])])]),TQ("collapsed",[AQ("menu-item",[TQ("selected",[EQ("&::before",{backgroundColor:"var(--item-color-active-collapsed) !important"})])]),AQ("menu-item-content",[AQ("menu-item-content-header",{opacity:0}),_Q("arrow",{opacity:0}),_Q("icon",{color:"var(--item-icon-color-collapsed)"})])]),AQ("menu-item",{transition:"background-color .3s var(--bezier)",height:"42px",marginTop:"6px",position:"relative"},[EQ("&::before",'\n z-index: auto;\n content: "";\n background-color: #0000;\n position: absolute;\n left: 8px;\n right: 8px;\n top: 0;\n bottom: 0;\n pointer-events: none;\n border-radius: var(--border-radius);\n transition: background-color .3s var(--bezier);\n '),PQ("disabled",[EQ("&:active::before",{backgroundColor:"var(--item-color-active)"})]),TQ("selected",[EQ("&::before",{backgroundColor:"var(--item-color-active)"}),AQ("menu-item-content",[_Q("arrow",{color:"var(--arrow-color-active)"}),_Q("icon",{color:"var(--item-icon-color-active)"}),AQ("menu-item-content-header",{color:"var(--item-text-color-active)"},[_Q("extra",{color:"var(--item-text-color-active)"})])])])]),AQ("menu-item-content",'\n box-sizing: border-box;\n line-height: 1.75;\n height: 100%;\n display: grid;\n grid-template-areas: "icon content arrow";\n grid-template-columns: auto 1fr auto;\n align-items: center;\n cursor: pointer;\n position: relative;\n z-index: auto;\n padding-right: 18px;\n transition:\n background-color .3s var(--bezier),\n padding-left .3s var(--bezier),\n border-color .3s var(--bezier);\n ',[TQ("disabled",{opacity:".45",cursor:"not-allowed"}),TQ("collapsed",[_Q("arrow",{transform:"rotate(0)"})]),TQ("child-active",[AQ("menu-item-content-header",{color:"var(--item-text-color-child-active)"},[_Q("extra",{color:"var(--item-text-color-child-active)"})]),_Q("arrow",{color:"var(--arrow-color-child-active)"}),_Q("icon",{color:"var(--item-icon-color-child-active)"})]),PQ("disabled",[btt(null,[_Q("arrow",{color:"var(--arrow-color-hover)"}),_Q("icon",{color:"var(--item-icon-color-hover)"}),AQ("menu-item-content-header",{color:"var(--item-text-color-hover)"},[_Q("extra",{color:"var(--item-text-color-hover)"})])])]),_Q("icon","\n grid-area: icon;\n color: var(--item-icon-color);\n transition:\n color .3s var(--bezier),\n font-size .3s var(--bezier),\n margin-right .3s var(--bezier);\n box-sizing: content-box;\n display: inline-flex;\n align-items: center;\n justify-content: center;\n "),_Q("arrow","\n grid-area: arrow;\n font-size: 16px;\n color: var(--arrow-color);\n transform: rotate(180deg);\n opacity: 1;\n transition:\n color .3s var(--bezier),\n transform 0.2s var(--bezier),\n opacity 0.2s var(--bezier);\n "),AQ("menu-item-content-header","\n grid-area: content;\n transition:\n color .3s var(--bezier),\n opacity .3s var(--bezier);\n opacity: 1;\n white-space: nowrap;\n overflow: hidden;\n text-overflow: ellipsis;\n color: var(--item-text-color);\n ",[EQ("a","\n text-decoration: none;\n color: inherit;\n ",[EQ("&::before",'\n content: "";\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ')]),_Q("extra","\n font-size: .93em;\n color: var(--group-text-color);\n transition: color .3s var(--bezier);\n ")])]),AQ("submenu",{cursor:"pointer",position:"relative",marginTop:"6px"},[AQ("menu-item-content",{height:"42px"}),AQ("submenu-children",{overflow:"hidden",padding:0},[function({overflow:t="hidden",duration:e=".3s",originalTransition:n="",leavingDelay:r="0s",foldPadding:i=!1,enterToProps:o,leaveToProps:a,reverse:s=!1}={}){const l=s?"leave":"enter",u=s?"enter":"leave";return[EQ(`&.fade-in-height-expand-transition-${u}-from,\n &.fade-in-height-expand-transition-${l}-to`,Object.assign(Object.assign({},o),{opacity:1})),EQ(`&.fade-in-height-expand-transition-${u}-to,\n &.fade-in-height-expand-transition-${l}-from`,Object.assign(Object.assign({},a),{opacity:0,marginTop:"0 !important",marginBottom:"0 !important",paddingTop:i?"0 !important":void 0,paddingBottom:i?"0 !important":void 0})),EQ(`&.fade-in-height-expand-transition-${u}-active`,`\n overflow: ${t};\n transition:\n max-height ${e} ${H3} ${r},\n opacity ${e} ${Y3} ${r},\n margin-top ${e} ${H3} ${r},\n margin-bottom ${e} ${H3} ${r},\n padding-top ${e} ${H3} ${r},\n padding-bottom ${e} ${H3} ${r}\n ${n?","+n:""}\n `),EQ(`&.fade-in-height-expand-transition-${l}-active`,`\n overflow: ${t};\n transition:\n max-height ${e} ${H3},\n opacity ${e} ${X3},\n margin-top ${e} ${H3},\n margin-bottom ${e} ${H3},\n padding-top ${e} ${H3},\n padding-bottom ${e} ${H3}\n ${n?","+n:""}\n `)]}({duration:".2s"})])]),AQ("menu-item-group",[AQ("menu-item-group-title","\n margin-top: 6px;\n color: var(--group-text-color);\n cursor: default;\n font-size: .93em;\n height: 36px;\n display: flex;\n align-items: center;\n transition:\n padding-left .3s var(--bezier),\n color .3s var(--bezier);\n ")])]),AQ("menu-tooltip",[EQ("a","\n color: inherit;\n text-decoration: none;\n ")])]);function btt(t,e){return[TQ("hover",t,e),EQ("&:hover",t,e)]}const xtt=Object.assign(Object.assign({},LJ.props),{options:{type:Array,default:()=>[]},items:{type:Array,validator:()=>!0,default:void 0},collapsed:{type:Boolean,default:void 0},collapsedWidth:{type:Number,default:48},iconSize:{type:Number,default:20},collapsedIconSize:{type:Number,default:24},rootIndent:Number,indent:{type:Number,default:32},defaultExpandAll:Boolean,defaultExpandedKeys:Array,expandedKeys:{type:Array,default:void 0},value:[String,Number],defaultValue:{type:[String,Number],default:null},mode:{type:String,default:"vertical"},disabled:Boolean,inverted:Boolean,"onUpdate:expandedKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],onUpdateValue:[Function,Array],"onUpdate:value":[Function,Array],onOpenNamesChange:{type:[Function,Array],validator:()=>(mJ("menu","`on-open-names-change` is deprecated, please use `on-update:expanded-keys` instead."),!0),default:void 0},onSelect:{type:[Function,Array],validator:()=>(mJ("menu","`on-select` is deprecated, please use `on-update:value` instead."),!0),default:void 0},onExpandedNamesChange:{type:[Function,Array],validator:()=>(mJ("menu","`on-expanded-names-change` is deprecated, please use `on-update:expanded-keys` instead."),!0),default:void 0},expandIcon:Function,expandedNames:{type:Array,validator:()=>(mJ("menu","`expanded-names` is deprecated, please use `expanded-keys` instead."),!0),default:void 0},defaultExpandedNames:{type:Array,validator:()=>(mJ("menu","`default-expanded-names` is deprecated, please use `default-expanded-keys` instead."),!0),default:void 0},renderIcon:Function,renderLabel:Function,renderExtra:Function,dropdownPlacement:{type:String,default:"bottom"}}),wtt=Symbol("menu");var Ctt=Ke({name:"Menu",props:xtt,setup(t){const{mergedClsPrefixRef:e}=FJ(t),n=LJ("Menu","Menu",ytt,mtt,t,e),r=je(z7,null),i=Ee((()=>{var e;const{collapsed:n}=t;if(void 0!==n)return n;if(r){const{collapseModeRef:t,collapsedRef:n}=r;if("width"===t.value)return null!==(e=n.value)&&void 0!==e&&e}return!1})),o=Ee((()=>i1(t.items||t.options,{getKey(t){var e;return null!==(e=t.key)&&void 0!==e?e:t.name}}))),a=ge(t.defaultValue),s=aJ(Se(t,"value"),a),l=ge(t.defaultExpandAll?o.value.getNonLeafKeys():t.defaultExpandedNames||t.defaultExpandedKeys||o.value.getPath(s.value,{includeSelf:!1}).keyPath),u=lJ(t,["expandedNames","expandedKeys"]),c=aJ(u,l),d=Ee((()=>o.value.treeNodes)),h=Ee((()=>o.value.getPath(s.value).keyPath));return ze(wtt,{props:t,mergedCollapsedRef:i,mergedThemeRef:n,mergedValueRef:s,mergedExpandedKeysRef:c,activePathRef:h,mergedClsPrefixRef:e,isHorizontalRef:Ee((()=>"horizontal"===t.mode)),invertedRef:Se(t,"inverted"),doSelect:function(e,n){const{"onUpdate:value":r,onUpdateValue:i,onSelect:o}=t;i&&pJ(i,e,n);r&&pJ(r,e,n);o&&pJ(o,e,n);a.value=e},toggleExpand:function(e){const n=Array.from(c.value),r=n.findIndex((t=>t===e));~r?n.splice(r,1):n.push(e);!function(e){const{"onUpdate:expandedKeys":n,onUpdateExpandedKeys:r,onExpandedNamesChange:i,onOpenNamesChange:o}=t;n&&pJ(n,e);r&&pJ(r,e);i&&pJ(i,e);o&&pJ(o,e);l.value=e}(n)}}),{mergedClsPrefix:e,controlledExpandedKeys:u,uncontrolledExpanededKeys:l,mergedExpandedKeys:c,uncontrolledValue:a,mergedValue:s,activePath:h,tmNodes:d,mergedTheme:n,mergedCollapsed:i,cssVars:Ee((()=>{const{inverted:e}=t,{common:{cubicBezierEaseInOut:r},self:i}=n.value,{borderRadius:o,borderColorHorizontal:a,fontSize:s}=i,l={"--bezier":r,"--font-size":s,"--border-color-horizontal":a,"--border-radius":o};return e?(l["--group-text-color"]=i.groupTextColorInverted,l["--color"]=i.colorInverted,l["--item-text-color"]=i.itemTextColorInverted,l["--arrow-color"]=i.arrowColorInverted,l["--arrow-color-hover"]=i.arrowColorHoverInverted,l["--arrow-color-active"]=i.arrowColorActiveInverted,l["--arrow-color-child-active"]=i.arrowColorChildActiveInverted,l["--item-icon-color"]=i.itemIconColorInverted,l["--item-text-color-hover"]=i.itemTextColorHoverInverted,l["--item-icon-color-hover"]=i.itemIconColorHoverInverted,l["--item-text-color-active"]=i.itemTextColorActiveInverted,l["--item-icon-color-active"]=i.itemIconColorActiveInverted,l["--item-icon-color-collapsed"]=i.itemIconColorCollapsedInverted,l["--item-color-active"]=i.itemColorActiveInverted,l["--item-color-active-collapsed"]=i.itemColorActiveCollapsedInverted,l["--item-text-color-child-active"]=i.itemTextColorChildActiveInverted,l["--item-icon-color-child-active"]=i.itemIconColorChildActiveInverted):(l["--group-text-color"]=i.groupTextColor,l["--color"]=i.color,l["--item-text-color"]=i.itemTextColor,l["--arrow-color"]=i.arrowColor,l["--arrow-color-hover"]=i.arrowColorHover,l["--arrow-color-active"]=i.arrowColorActive,l["--arrow-color-child-active"]=i.arrowColorChildActive,l["--item-icon-color"]=i.itemIconColor,l["--item-text-color-hover"]=i.itemTextColorHover,l["--item-icon-color-hover"]=i.itemIconColorHover,l["--item-text-color-active"]=i.itemTextColorActive,l["--item-icon-color-active"]=i.itemIconColorActive,l["--item-icon-color-collapsed"]=i.itemIconColorCollapsed,l["--item-color-active"]=i.itemColorActive,l["--item-color-active-collapsed"]=i.itemColorActiveCollapsed,l["--item-text-color-child-active"]=i.itemTextColorChildActive,l["--item-icon-color-child-active"]=i.itemIconColorChildActive),l}))}},render(){const{mergedClsPrefix:t,mode:e}=this;return Ei("div",{role:"horizontal"===e?"menubar":"menu",class:[`${t}-menu`,`${t}-menu--${e}`,this.mergedCollapsed&&`${t}-menu--collapsed`],style:this.cssVars},this.tmNodes.map((t=>vtt(t))))}});var Stt={name:"Progress",common:K2,self:t=>{const{infoColor:e,successColor:n,warningColor:r,errorColor:i,textColor2:o,progressRailColor:a,fontSize:s,fontWeight:l}=t;return{fontSize:s,fontSizeCircle:"28px",fontWeightCircle:l,railColor:a,railHeight:"8px",iconSizeCircle:"36px",iconSizeLine:"18px",iconColor:e,iconColorInfo:e,iconColorSuccess:n,iconColorWarning:r,iconColorError:i,textColorCircle:o,textColorLineInner:"rgb(255, 255, 255)",textColorLineOuter:o,fillColor:e,fillColorInfo:e,fillColorSuccess:n,fillColorWarning:r,fillColorError:i,lineBgProcessing:"linear-gradient(90deg, rgba(255, 255, 255, .3) 0%, rgba(255, 255, 255, .5) 100%)"}}},ktt=EQ([AQ("progress",{display:"inline-block"},[AQ("progress-icon","\n color: var(--icon-color);\n transition: color .3s var(--bezier);\n "),TQ("line","\n width: 100%;\n display: block;\n ",[AQ("progress-content","\n display: flex;\n align-items: center;\n ",[AQ("progress-graph",{flex:1})]),AQ("progress-custom-content",{marginLeft:"14px"}),AQ("progress-icon","\n width: 30px;\n padding-left: 14px;\n height: var(--icon-size-line);\n line-height: var(--icon-size-line);\n font-size: var(--icon-size-line);\n ",[TQ("as-text","\n color: var(--text-color-line-outer);\n text-align: center;\n width: 40px;\n font-size: var(--font-size);\n padding-left: 4px;\n transition: color .3s var(--bezier);\n ")])]),TQ("circle",{width:"120px"},[AQ("progress-custom-content","\n position: absolute;\n left: 50%;\n top: 50%;\n transform: translateX(-50%) translateY(-50%);\n display: flex;\n align-items: center;\n justify-content: center;\n "),AQ("progress-text","\n position: absolute;\n left: 50%;\n top: 50%;\n transform: translateX(-50%) translateY(-50%);\n display: flex;\n align-items: center;\n color: inherit;\n font-size: var(--font-size-circle);\n color: var(--text-color-circle);\n font-weight: var(--font-weight-circle);\n transition: color .3s var(--bezier);\n white-space: nowrap;\n "),AQ("progress-icon","\n position: absolute;\n left: 50%;\n top: 50%;\n transform: translateX(-50%) translateY(-50%);\n display: flex;\n align-items: center;\n color: var(--icon-color);\n font-size: var(--icon-size-circle);\n ")]),TQ("multiple-circle",{width:"200px",color:"inherit"},[AQ("progress-text","\n font-weight: var(--font-weight-circle);\n color: var(--text-color-circle);\n position: absolute;\n left: 50%;\n top: 50%;\n transform: translateX(-50%) translateY(-50%);\n display: flex;\n align-items: center;\n justify-content: center;\n transition: color .3s var(--bezier);\n ")]),AQ("progress-content",{position:"relative"}),AQ("progress-graph",{position:"relative"},[AQ("progress-graph-circle",[EQ("svg",{verticalAlign:"bottom"}),AQ("progress-graph-circle-fill","\n stroke: var(--fill-color);\n transition:\n opacity .3s var(--bezier),\n stroke .3s var(--bezier),\n stroke-dasharray .3s var(--bezier);\n ",[TQ("empty",{opacity:0})]),AQ("progress-graph-circle-rail","\n transition: stroke .3s var(--bezier);\n overflow: hidden;\n stroke: var(--rail-color);\n ")]),AQ("progress-graph-line",[TQ("indicator-inside",[AQ("progress-graph-line-rail",{height:"16px",borderRadius:"10px"},[AQ("progress-graph-line-fill",{height:"inherit",borderRadius:"10px"}),AQ("progress-graph-line-indicator","\n background: #0000;\n white-space: nowrap;\n text-align: right;\n margin-left: 14px;\n margin-right: 14px;\n height: inherit;\n line-height: 16px;\n font-size: 12px;\n color: var(--text-color-line-inner);\n transition: color .3s var(--bezier);\n ")])]),TQ("indicator-inside-label","\n height: 16px;\n display: flex;\n align-items: center;\n ",[AQ("progress-graph-line-rail",{flex:1,transition:"background-color .3s var(--bezier)"}),AQ("progress-graph-line-indicator","\n background: var(--fill-color);\n font-size: 12px;\n transform: translateZ(0);\n display: flex;\n vertical-align: middle;\n height: 16px;\n line-height: 16px;\n padding: 0 10px;\n border-radius: 10px;\n position: absolute;\n white-space: nowrap;\n color: var(--text-color-line-inner);\n transition:\n right .2s var(--bezier),\n color .3s var(--bezier),\n background-color .3s var(--bezier);\n ")]),AQ("progress-graph-line-rail","\n position: relative;\n overflow: hidden;\n height: var(--rail-height);\n border-radius: 5px;\n background-color: var(--rail-color);\n transition: background-color .3s var(--bezier);\n ",[AQ("progress-graph-line-fill","\n background: var(--fill-color);\n position: relative;\n border-radius: 5px;\n height: inherit;\n width: 100%;\n max-width: 0%;\n transition:\n background-color .3s var(--bezier),\n max-width .2s var(--bezier);\n ",[TQ("processing",[EQ("&::after",'\n content: "";\n background-image: var(--line-bg-processing);\n animation: progress-processing-animation 2s var(--bezier) infinite;\n ')])])])])])]),EQ("@keyframes progress-processing-animation","\n 0% {\n position: absolute;\n left: 0;\n top: 0;\n bottom: 0;\n right: 100%;\n opacity: 1;\n }\n 66% {\n position: absolute;\n left: 0;\n top: 0;\n bottom: 0;\n right: 0;\n opacity: 0;\n }\n 100% {\n position: absolute;\n left: 0;\n top: 0;\n bottom: 0;\n right: 0;\n opacity: 0;\n }\n ")]);const Ett={success:Ei(b0,null),error:Ei(h0,null),warning:Ei(w0,null),info:Ei(m0,null)};var Mtt=Ke({name:"ProgressLine",props:{clsPrefix:{type:String,required:!0},percentage:{type:Number,default:0},railColor:String,railStyle:[String,Object],fillColor:String,status:{type:String,required:!0},indicatorPlacement:{type:String,required:!0},indicatorTextColor:String,unit:{type:String,default:"%"},processing:{type:Boolean,required:!0},showIndicator:{type:Boolean,required:!0},height:[String,Number],railBorderRadius:[String,Number],fillBorderRadius:[String,Number]},setup(t,{slots:e}){const n=Ee((()=>kJ(t.height))),r=Ee((()=>void 0!==t.railBorderRadius?kJ(t.railBorderRadius):void 0!==t.height?kJ(t.height,{c:.5}):"")),i=Ee((()=>void 0!==t.fillBorderRadius?kJ(t.fillBorderRadius):void 0!==t.railBorderRadius?kJ(t.railBorderRadius):void 0!==t.height?kJ(t.height,{c:.5}):""));return()=>{const{indicatorPlacement:o,railColor:a,railStyle:s,percentage:l,unit:u,indicatorTextColor:c,status:d,showIndicator:h,fillColor:f,processing:p,clsPrefix:g}=t;return Ei("div",{class:`${g}-progress-content`,role:"none"},Ei("div",{class:`${g}-progress-graph`,"aria-hidden":!0},Ei("div",{class:[`${g}-progress-graph-line`,{[`${g}-progress-graph-line--indicator-${o}`]:!0}]},Ei("div",{class:`${g}-progress-graph-line-rail`,style:[{backgroundColor:a,height:n.value,borderRadius:r.value},s]},Ei("div",{class:[`${g}-progress-graph-line-fill`,p&&`${g}-progress-graph-line-fill--processing`],style:{maxWidth:`${t.percentage}%`,backgroundColor:f,height:n.value,borderRadius:i.value}},"inside"===o?Ei("div",{class:`${g}-progress-graph-line-indicator`},`${l}${u}`):null)))),h&&"outside"===o?Ei("div",null,e.default?Ei("div",{class:`${g}-progress-custom-content`,style:{color:c},role:"none"},e.default()):"default"===d?Ei("div",{role:"none",class:`${g}-progress-icon ${g}-progress-icon--as-text`,style:{color:c}},l,u):Ei("div",{class:`${g}-progress-icon`,"aria-hidden":!0},Ei(T0,{clsPrefix:g},{default:()=>Ett[d]}))):null)}}});const Att={success:Ei(b0,null),error:Ei(h0,null),warning:Ei(w0,null),info:Ei(m0,null)};var _tt=Ke({name:"ProgressCircle",props:{clsPrefix:{type:String,required:!0},status:{type:String,required:!0},strokeWidth:{type:Number,required:!0},fillColor:String,railColor:String,railStyle:[String,Object],percentage:{type:Number,default:0},showIndicator:{type:Boolean,reqiuired:!0},indicatorTextColor:String,unit:String,viewBoxWidth:{type:Number,required:!0}},setup(t,{slots:e}){const n=Ee((()=>`${Math.PI*t.percentage}, ${8*t.viewBoxWidth}`));return()=>{const{fillColor:r,railColor:i,railStyle:o,strokeWidth:a,status:s,percentage:l,showIndicator:u,indicatorTextColor:c,unit:d,clsPrefix:h}=t;return Ei("div",{class:`${h}-progress-content`,role:"none"},Ei("div",{class:`${h}-progress-graph`,"aria-hidden":!0},Ei("div",{class:`${h}-progress-graph-circle`},Ei("svg",{viewBox:"0 0 110 110"},Ei("g",null,Ei("path",{class:`${h}-progress-graph-circle-rail`,d:"m 55 5 a 50 50 0 1 1 0 100 a 50 50 0 1 1 0 -100","stroke-width":1.1*a,"stroke-linecap":"round",fill:"none",style:[{strokeDashoffset:0,stroke:i},o]})),Ei("g",null,Ei("path",{class:[`${h}-progress-graph-circle-fill`,0===l&&`${h}-progress-graph-circle-fill--empty`],d:"m 55 5 a 50 50 0 1 1 0 100 a 50 50 0 1 1 0 -100","stroke-width":1.1*a,"stroke-linecap":"round",fill:"none",style:{strokeDasharray:n.value,strokeDashoffset:0,stroke:r}}))))),u?Ei("div",null,e.default?Ei("div",{class:`${h}-progress-custom-content`,role:"none"},e.default()):"default"!==s?Ei("div",{class:`${h}-progress-icon`,"aria-hidden":!0},Ei(T0,{clsPrefix:h},{default:()=>Att[s]})):Ei("div",{class:`${h}-progress-text`,style:{color:c},role:"none"},Ei("span",{class:`${h}-progress-text__percentage`},l),Ei("span",{class:`${h}-progress-text__unit`},d))):null)}}});function Ttt(t,e,n=100){return`m ${n/2} ${n/2-t} a ${t} ${t} 0 1 1 0 ${2*t} a ${t} ${t} 0 1 1 0 -${2*t}`}var Ptt=Ke({name:"ProgressMultipleCircle",props:{clsPrefix:{type:String,required:!0},viewBoxWidth:{type:Number,required:!0},percentage:{type:Array,default:[0]},strokeWidth:{type:Number,required:!0},circleGap:{type:Number,required:!0},showIndicator:{type:Boolean,required:!0},fillColor:{type:Array,default:()=>[]},railColor:{type:Array,default:()=>[]},railStyle:{type:Array,default:()=>[]}},setup(t,{slots:e}){const n=Ee((()=>t.percentage.map(((e,n)=>`${Math.PI*e/100*(t.viewBoxWidth/2-t.strokeWidth/2*(1+2*n)-t.circleGap*n)*2}, ${8*t.viewBoxWidth}`))));return()=>{const{viewBoxWidth:r,strokeWidth:i,circleGap:o,showIndicator:a,fillColor:s,railColor:l,railStyle:u,percentage:c,clsPrefix:d}=t;return Ei("div",{class:`${d}-progress-content`,role:"none"},Ei("div",{class:`${d}-progress-graph`,"aria-hidden":!0},Ei("div",{class:`${d}-progress-graph-circle`},Ei("svg",{viewBox:`0 0 ${r} ${r}`},c.map(((t,e)=>Ei("g",{key:e},Ei("path",{class:`${d}-progress-graph-circle-rail`,d:Ttt(r/2-i/2*(1+2*e)-o*e,0,r),"stroke-width":i,"stroke-linecap":"round",fill:"none",style:[{strokeDashoffset:0,stroke:l[e]},u[e]]}),Ei("path",{class:[`${d}-progress-graph-circle-fill`,0===t&&`${d}-progress-graph-circle-fill--empty`],d:Ttt(r/2-i/2*(1+2*e)-o*e,0,r),"stroke-width":i,"stroke-linecap":"round",fill:"none",style:{strokeDasharray:n.value[e],strokeDashoffset:0,stroke:s[e]}}))))))),a&&e.default?Ei("div",null,Ei("div",{class:`${d}-progress-text`},e.default())):null)}}});var Itt=Ke({name:"Progress",props:Object.assign(Object.assign({},LJ.props),{processing:Boolean,type:{type:String,default:"line"},status:{type:String,default:"default"},railColor:[String,Array],railStyle:[String,Array],color:[String,Array],viewBoxWidth:{type:Number,default:100},strokeWidth:{type:Number,default:7},percentage:[Number,Array],unit:{type:String,default:"%"},showIndicator:{type:Boolean,default:!0},indicatorPosition:{type:String,default:"outside"},indicatorPlacement:{type:String,default:"outside"},indicatorTextColor:String,circleGap:{type:Number,default:1},height:Number,borderRadius:[String,Number],fillBorderRadius:[String,Number]}),setup(t){const e=Ee((()=>t.indicatorPlacement||t.indicatorPosition)),{mergedClsPrefixRef:n}=FJ(t),r=LJ("Progress","Progress",ktt,Stt,t,n);return{mergedClsPrefix:n,mergedIndicatorPlacement:e,cssVars:Ee((()=>{const{status:e}=t,{common:{cubicBezierEaseInOut:n},self:{fontSize:i,fontSizeCircle:o,railColor:a,railHeight:s,iconSizeCircle:l,iconSizeLine:u,textColorCircle:c,textColorLineInner:d,textColorLineOuter:h,lineBgProcessing:f,fontWeightCircle:p,[CQ("iconColor",e)]:g,[CQ("fillColor",e)]:v}}=r.value;return{"--bezier":n,"--fill-color":v,"--font-size":i,"--font-size-circle":o,"--font-weight-circle":p,"--icon-color":g,"--icon-size-circle":l,"--icon-size-line":u,"--line-bg-processing":f,"--rail-color":a,"--rail-height":s,"--text-color-circle":c,"--text-color-line-inner":d,"--text-color-line-outer":h}}))}},render(){const{type:t,cssVars:e,indicatorTextColor:n,showIndicator:r,status:i,railColor:o,railStyle:a,color:s,percentage:l,viewBoxWidth:u,strokeWidth:c,mergedIndicatorPlacement:d,unit:h,borderRadius:f,fillBorderRadius:p,height:g,processing:v,circleGap:m,mergedClsPrefix:y,$slots:b}=this;return Ei("div",{class:[`${y}-progress`,`${y}-progress--${t}`,`${y}-progress--${i}`],style:e,"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":l,role:"circle"===t||"line"===t?"progressbar":"none"},"circle"===t?Ei(_tt,{clsPrefix:y,status:i,showIndicator:r,indicatorTextColor:n,railColor:o,fillColor:s,railStyle:a,percentage:l,viewBoxWidth:u,strokeWidth:c,unit:h},b):"line"===t?Ei(Mtt,{clsPrefix:y,status:i,showIndicator:r,indicatorTextColor:n,railColor:o,fillColor:s,railStyle:a,percentage:l,processing:v,indicatorPlacement:d,unit:h,fillBorderRadius:p,railBorderRadius:f,height:g},b):"multiple-circle"===t?Ei(Ptt,{clsPrefix:y,strokeWidth:c,railColor:o,fillColor:s,railStyle:a,viewBoxWidth:u,percentage:l,showIndicator:r,circleGap:m},b):null)}});const Dtt={name:"Skeleton",common:K2,self:t=>{const{heightSmall:e,heightMedium:n,heightLarge:r,borderRadius:i}=t;return{color:"#eee",colorEnd:"#ddd",borderRadius:i,heightSmall:e,heightMedium:n,heightLarge:r}}};var Ott=EQ([AQ("skeleton","\n height: 1em;\n width: 100%;\n transition: background-color .3s var(--bezier);\n transition:\n --color-start .3s var(--bezier),\n --color-end .3s var(--bezier),\n background-color .3s var(--bezier);\n animation: 2s skeleton-loading infinite cubic-bezier(0.36, 0, 0.64, 1);\n background-color: var(--color-start);\n "),EQ("@keyframes skeleton-loading","\n 0% {\n background: var(--color-start);\n }\n 40% {\n background: var(--color-end);\n }\n 80% {\n background: var(--color-start);\n }\n 100% {\n background: var(--color-start);\n }\n ")]);var Rtt=Ke({name:"Skeleton",inheritAttrs:!1,props:Object.assign(Object.assign({},LJ.props),{text:Boolean,round:Boolean,circle:Boolean,height:[String,Number],width:[String,Number],size:String,repeat:{type:Number,default:1},animated:{type:Boolean,default:!0},sharp:{type:Boolean,default:!0}}),setup(t){an((()=>{var t;DJ||(DJ=!0,(null===(t=null===window||void 0===window?void 0:window.CSS)||void 0===t?void 0:t.registerProperty)&&(CSS.registerProperty({name:"--color-start",syntax:"<color>",inherits:!1,initialValue:"#0000"}),CSS.registerProperty({name:"--color-end",syntax:"<color>",inherits:!1,initialValue:"#0000"})))}));const{mergedClsPrefixRef:e}=FJ(t),n=LJ("Skeleton","Skeleton",Ott,Dtt,t,e);return{mergedClsPrefix:e,style:Ee((()=>{var e,r;const i=n.value,{common:{cubicBezierEaseInOut:o}}=i,a=i.self,{color:s,colorEnd:l,borderRadius:u}=a;let c;const{circle:d,sharp:h,round:f,width:p,height:g,size:v,text:m,animated:y}=t;void 0!==v&&(c=a[CQ("height",v)]);const b=d?null!==(e=null!=p?p:g)&&void 0!==e?e:c:p,x=null!==(r=d&&null!=p?p:g)&&void 0!==r?r:c;return{display:m?"inline-block":"",verticalAlign:m?"-0.125em":"",borderRadius:d?"50%":f?"4096px":h?"":u,width:"number"==typeof b?lq(b):b,height:"number"==typeof x?lq(x):x,animation:y?"":"none","--bezier":o,"--color-start":s,"--color-end":l}}))}},render(){const{repeat:t,style:e,mergedClsPrefix:n,$attrs:r}=this,i=Ei("div",Tr({class:`${n}-skeleton`,style:e},r));return t>1?Ei(ir,null,Array.apply(null,{length:t}).map((t=>[i,"\n"]))):i}});var Ltt={name:"Spin",common:K2,self:t=>{const{opacityDisabled:e,heightTiny:n,heightSmall:r,heightMedium:i,heightLarge:o,heightHuge:a,primaryColor:s}=t;return{sizeTiny:n,sizeSmall:r,sizeMedium:i,sizeLarge:o,sizeHuge:a,color:s,opacitySpinning:e}}},Btt=EQ([EQ("@keyframes spin-rotate","\n from {\n transform: rotate(0);\n }\n to {\n transform: rotate(360deg);\n }\n "),AQ("spin-container",{position:"relative"},[AQ("spin","\n position: absolute;\n top: 50%;\n left: 50%;\n transform: translateX(-50%) translateY(-50%);\n ",[r3()]),AQ("spin-content","\n opacity: 1;\n transition: opacity .3s var(--bezier);\n pointer-events: all;\n ",[TQ("spinning",{pointerEvents:"none",opacity:"var(--opacity-spinning)"})])]),AQ("spin","\n display: inline-flex;\n height: var(--size);\n width: var(--size);\n font-size: var(--size);\n color: var(--color);\n ",[TQ("rotate","\n animation: spin-rotate 2s linear infinite;\n ")])]);const Ftt={small:20,medium:18,large:16};var Ntt=Ke({name:"Spin",props:Object.assign(Object.assign({},LJ.props),{stroke:{type:String,default:void 0},size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:{type:Number,default:void 0},spinning:{type:Boolean,validator:()=>(mJ("spin","`spinning` is deprecated, please use `show` instead."),!0),default:void 0},rotate:{type:Boolean,default:!0}}),setup(t){const{mergedClsPrefixRef:e}=FJ(t),n=LJ("Spin","Spin",Btt,Ltt,t,e);return{mergedClsPrefix:e,compitableShow:lJ(t,["spinning","show"]),mergedStrokeWidth:Ee((()=>{const{strokeWidth:e}=t;if(void 0!==e)return e;const{size:n}=t;return Ftt["number"==typeof n?"medium":n]})),cssVars:Ee((()=>{const{size:e}=t,{common:{cubicBezierEaseInOut:r},self:i}=n.value,{opacitySpinning:o,color:a}=i;return{"--bezier":r,"--opacity-spinning":o,"--size":"number"==typeof e?lq(e):i[CQ("size",e)],"--color":a}}))}},render(){const{$slots:t,mergedClsPrefix:e}=this,n=t.icon&&this.rotate,r=t.icon?Ei("div",{class:[`${e}-spin`,n&&`${e}-spin--rotate`],style:t.default?"":this.cssVars},t.icon()):Ei(L0,{clsPrefix:e,style:t.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${e}-spin`});return t.default?Ei("div",{class:`${e}-spin-container`,style:this.cssVars},Ei("div",{class:[`${e}-spin-content`,this.compitableShow&&`${e}-spin-content--spinning`]},t),Ei($i,{name:"fade-in-transition"},{default:()=>this.compitableShow?r:null})):r}}),ztt={buttonHeightSmall:"14px",buttonHeightMedium:"18px",buttonHeightLarge:"22px",buttonWidthSmall:"14px",buttonWidthMedium:"18px",buttonWidthLarge:"22px",buttonWidthPressedSmall:"20px",buttonWidthPressedMedium:"24px",buttonWidthPressedLarge:"28px",railHeightSmall:"18px",railHeightMedium:"22px",railHeightLarge:"26px",railWidthSmall:"32px",railWidthMedium:"40px",railWidthLarge:"48px"};var jtt={name:"Switch",common:K2,self:t=>{const{primaryColor:e,opacityDisabled:n,borderRadius:r}=t;return Object.assign(Object.assign({},ztt),{textColor:"white",loadingColor:e,opacityDisabled:n,railColor:"rgba(0, 0, 0, .14)",railColorActive:e,buttonBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",buttonColor:"#FFF",railBorderRadiusSmall:r,railBorderRadiusMedium:r,railBorderRadiusLarge:r,buttonBorderRadiusSmall:r,buttonBorderRadiusMedium:r,buttonBorderRadiusLarge:r,boxShadowFocus:`0 0 0 2px ${Eq(e,{alpha:.2})}`})}},Gtt=AQ("switch","\n height: var(--height);\n min-width: var(--width);\n vertical-align: middle;\n user-select: none;\n display: inline-flex;\n outline: none;\n justify-content: center;\n align-items: center;\n",[_Q("children-placeholder","\n height: var(--rail-height);\n display: flex;\n flex-direction: column;\n overflow: hidden;\n pointer-events: none;\n visibility: hidden;\n "),_Q("rail-placeholder","\n display: flex;\n flex-wrap: none;\n "),_Q("button-placeholder","\n width: calc(1.75 * var(--rail-height));\n height: var(--rail-height);\n "),AQ("base-loading","\n position: absolute;\n top: 50%;\n left: 50%;\n transform: translateX(-50%) translateY(-50%);\n font-size: calc(var(--button-width) - 4px);\n color: var(--loading-color);\n transition: color .3s var(--bezier);\n ",[h3({originalTransform:"translateX(-50%) translateY(-50%)"})]),_Q("checked, unchecked","\n transition: color .3s var(--bezier);\n color: var(--text-color);\n box-sizing: border-box;\n position: absolute;\n white-space: nowrap;\n top: 0;\n bottom: 0;\n display: flex;\n align-items: center;\n "),_Q("checked","\n right: 0;\n padding-right: calc(1.25 * var(--rail-height) - var(--offset));\n "),_Q("unchecked","\n left: 0;\n justify-content: flex-end;\n padding-left: calc(1.25 * var(--rail-height) - var(--offset));\n "),EQ("&:focus",[_Q("rail","\n box-shadow: var(--box-shadow-focus);\n ")]),TQ("round",[_Q("rail",{borderRadius:"calc(var(--rail-height) / 2)"},[_Q("button",{borderRadius:"calc(var(--button-height) / 2)"})])]),PQ("disabled",[TQ("pressed",[_Q("rail",[_Q("button",{maxWidth:"var(--button-width-pressed)"})])]),_Q("rail",[EQ("&:active",[_Q("button",{maxWidth:"var(--button-width-pressed)"})])]),TQ("active",[TQ("pressed",[_Q("rail",[_Q("button",{left:"calc(100% - var(--offset) - var(--button-width-pressed))"})])]),_Q("rail",[EQ("&:active",[_Q("button",{left:"calc(100% - var(--offset) - var(--button-width-pressed))"})])])])]),TQ("active",[_Q("rail",[_Q("button",{left:"calc(100% - (var(--rail-height) + var(--button-width)) / 2)"})])]),_Q("rail","\n overflow: hidden;\n height: var(--rail-height);\n min-width: var(--rail-width);\n border-radius: var(--rail-border-radius);\n cursor: pointer;\n position: relative;\n transition:\n background-color .3s var(--bezier),\n box-shadow .3s var(--bezier);\n background-color: var(--rail-color);\n ",[_Q("button",'\n top: var(--offset);\n left: var(--offset);\n height: var(--button-width);\n width: var(--button-width-pressed);\n max-width: var(--button-width);\n border-radius: var(--button-border-radius);\n background-color: var(--button-color);\n box-shadow: var(--button-box-shadow);\n box-sizing: border-box;\n cursor: inherit;\n content: "";\n position: absolute;\n transition:\n background-color .3s var(--bezier),\n left .3s var(--bezier),\n opacity .3s var(--bezier),\n max-width .3s var(--bezier),\n box-shadow .3s var(--bezier);\n ')]),TQ("active",[_Q("rail",{backgroundColor:"var(--rail-color-active)"})]),TQ("disabled",[_Q("rail","\n cursor: not-allowed;\n opacity: .5;\n ")])]);var Utt,$tt,Vtt,Wtt,Htt,Ytt,Xtt=Ke({name:"Switch",props:Object.assign(Object.assign({},LJ.props),{size:{type:String,default:"medium"},value:{type:Boolean,default:void 0},loading:Boolean,defaultValue:Boolean,disabled:{type:Boolean,default:void 0},round:{type:Boolean,default:!0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:{type:[Function,Array],validator:()=>!0,default:void 0}}),setup(t){const{mergedClsPrefixRef:e}=FJ(t),n=LJ("Switch","Switch",Gtt,jtt,t,e),r=Dq(t),{mergedSizeRef:i,mergedDisabledRef:o}=r,a=ge(t.defaultValue),s=aJ(Se(t,"value"),a),l=ge(!1);function u(e){const{"onUpdate:value":n,onChange:i,onUpdateValue:o}=t,{nTriggerFormInput:s,nTriggerFormChange:l}=r;n&&pJ(n,e),o&&pJ(o,e),i&&pJ(i,e),a.value=e,s(),l()}return{handleClick:function(){o.value||u(!s.value)},handleBlur:function(){!function(){const{nTriggerFormBlur:t}=r;t()}(),l.value=!1},handleFocus:function(){!function(){const{nTriggerFormFocus:t}=r;t()}()},handleKeyup:function(t){"Space"===t.code&&(u(!s.value),l.value=!1)},handleKeydown:function(t){"Space"===t.code&&(t.preventDefault(),l.value=!0)},pressed:l,mergedClsPrefix:e,mergedValue:s,mergedDisabled:o,cssVars:Ee((()=>{const{value:t}=i,{self:{opacityDisabled:e,railColor:r,railColorActive:o,buttonBoxShadow:a,buttonColor:s,boxShadowFocus:l,loadingColor:u,textColor:c,[CQ("buttonHeight",t)]:d,[CQ("buttonWidth",t)]:h,[CQ("buttonWidthPressed",t)]:f,[CQ("railHeight",t)]:p,[CQ("railWidth",t)]:g,[CQ("railBorderRadius",t)]:v,[CQ("buttonBorderRadius",t)]:m},common:{cubicBezierEaseInOut:y}}=n.value,b=lq((sq(p)-sq(d))/2);return{"--bezier":y,"--button-border-radius":m,"--button-box-shadow":a,"--button-color":s,"--button-width":h,"--button-width-pressed":f,"--button-height":d,"--height":lq(Math.max(sq(p),sq(d))),"--offset":b,"--opacity-disabled":e,"--rail-border-radius":v,"--rail-color":r,"--rail-color-active":o,"--rail-height":p,"--rail-width":g,"--width":sq(p)>sq(d)?g:lq(sq(g)+sq(d)-sq(p)),"--box-shadow-focus":l,"--loading-color":u,"--text-color":c}}))}},render(){const{mergedClsPrefix:t,mergedValue:e,$slots:n}=this,{checked:r,unchecked:i}=n;return Ei("div",{role:"switch","aria-checked":e,class:[`${t}-switch`,{[`${t}-switch--active`]:e,[`${t}-switch--disabled`]:this.mergedDisabled,[`${t}-switch--round`]:this.round,[`${t}-switch--pressed`]:this.pressed}],tabindex:this.mergedDisabled?void 0:0,style:this.cssVars,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},Ei("div",{class:`${t}-switch__rail`,"aria-hidden":"true"},(r||i)&&Ei("div",{"aria-hidden":!0,class:`${t}-switch__children-placeholder`},Ei("div",{class:`${t}-switch__rail-placeholder`},Ei("div",{class:`${t}-switch__button-placeholder`}),null==r?void 0:r()),Ei("div",{class:`${t}-switch__rail-placeholder`},Ei("div",{class:`${t}-switch__button-placeholder`}),null==i?void 0:i())),Ei("div",{class:`${t}-switch__button`},Ei($i,{name:"fade-in-scale-up-transition"},{default:()=>this.loading?Ei(L0,{key:"loading",clsPrefix:t,strokeWidth:20}):null}),r&&Ei("div",{key:"checked",class:`${t}-switch__checked`},r()),i&&Ei("div",{key:"unchecked",class:`${t}-switch__unchecked`},i()))))}}),qtt=qm((function(t,e){t.exports=function(){var t=1e3,e=6e4,n=36e5,r="millisecond",i="second",o="minute",a="hour",s="day",l="week",u="month",c="quarter",d="year",h="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},y={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,u),o=n-i<0,a=e.clone().add(r+(o?-1:1),u);return+(-(r+(n-i)/(o?i-a:a-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:u,y:d,w:l,d:s,D:h,h:a,m:o,s:i,ms:r,Q:c}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},b="en",x={};x[b]=v;var w=function(t){return t instanceof E},C=function(t,e,n){var r;if(!t)return b;if("string"==typeof t)x[t]&&(r=t),e&&(x[t]=e,r=t);else{var i=t.name;x[i]=t,r=i}return!n&&r&&(b=r),r||!n&&b},S=function(t,e){if(w(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new E(n)},k=y;k.l=C,k.i=w,k.w=function(t,e){return S(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var E=function(){function v(t){this.$L=C(t.locale,null,!0),this.parse(t)}var m=v.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(k.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(p);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return k},m.isValid=function(){return!(this.$d.toString()===f)},m.isSame=function(t,e){var n=S(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return S(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<S(t)},m.$g=function(t,e,n){return k.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!k.u(e)||e,c=k.p(t),f=function(t,e){var i=k.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(s)},p=function(t,e){return k.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},g=this.$W,v=this.$M,m=this.$D,y="set"+(this.$u?"UTC":"");switch(c){case d:return r?f(1,0):f(31,11);case u:return r?f(1,v):f(0,v+1);case l:var b=this.$locale().weekStart||0,x=(g<b?g+7:g)-b;return f(r?m-x:m+(6-x),v);case s:case h:return p(y+"Hours",0);case a:return p(y+"Minutes",1);case o:return p(y+"Seconds",2);case i:return p(y+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,l=k.p(t),c="set"+(this.$u?"UTC":""),f=(n={},n[s]=c+"Date",n[h]=c+"Date",n[u]=c+"Month",n[d]=c+"FullYear",n[a]=c+"Hours",n[o]=c+"Minutes",n[i]=c+"Seconds",n[r]=c+"Milliseconds",n)[l],p=l===s?this.$D+(e-this.$W):e;if(l===u||l===d){var g=this.clone().set(h,1);g.$d[f](p),g.init(),this.$d=g.set(h,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[k.p(t)]()},m.add=function(r,c){var h,f=this;r=Number(r);var p=k.p(c),g=function(t){var e=S(f);return k.w(e.date(e.date()+Math.round(t*r)),f)};if(p===u)return this.set(u,this.$M+r);if(p===d)return this.set(d,this.$y+r);if(p===s)return g(1);if(p===l)return g(7);var v=(h={},h[o]=e,h[a]=n,h[i]=t,h)[p]||1,m=this.$d.getTime()+r*v;return k.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=k.z(this),o=this.$H,a=this.$m,s=this.$M,l=n.weekdays,u=n.months,c=function(t,n,i,o){return t&&(t[n]||t(e,r))||i[n].substr(0,o)},d=function(t){return k.s(o%12||12,t,"0")},h=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:k.s(s+1,2,"0"),MMM:c(n.monthsShort,s,u,3),MMMM:c(u,s),D:this.$D,DD:k.s(this.$D,2,"0"),d:String(this.$W),dd:c(n.weekdaysMin,this.$W,l,2),ddd:c(n.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(o),HH:k.s(o,2,"0"),h:d(1),hh:d(2),a:h(o,a,!0),A:h(o,a,!1),m:String(a),mm:k.s(a,2,"0"),s:String(this.$s),ss:k.s(this.$s,2,"0"),SSS:k.s(this.$ms,3,"0"),Z:i};return r.replace(g,(function(t,e){return e||p[t]||i.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,h,f){var p,g=k.p(h),v=S(r),m=(v.utcOffset()-this.utcOffset())*e,y=this-v,b=k.m(this,v);return b=(p={},p[d]=b/12,p[u]=b,p[c]=b/3,p[l]=(y-m)/6048e5,p[s]=(y-m)/864e5,p[a]=y/n,p[o]=y/e,p[i]=y/t,p)[g]||y,f?b:k.a(b)},m.daysInMonth=function(){return this.endOf(u).$D},m.$locale=function(){return x[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=C(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return k.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},v}(),M=E.prototype;return S.prototype=M,[["$ms",r],["$s",i],["$m",o],["$H",a],["$W",s],["$M",u],["$y",d],["$D",h]].forEach((function(t){M[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),S.extend=function(t,e){return t.$i||(t(e,E,S),t.$i=!0),S},S.locale=C,S.isDayjs=w,S.unix=function(t){return S(1e3*t)},S.en=x[b],S.Ls=x,S.p={},S}()}));($tt=Utt||(Utt={})).FORE="fore",$tt.MID="mid",$tt.BG="bg",(Wtt=Vtt||(Vtt={})).TOP="top",Wtt.TOP_LEFT="top-left",Wtt.TOP_RIGHT="top-right",Wtt.RIGHT="right",Wtt.RIGHT_TOP="right-top",Wtt.RIGHT_BOTTOM="right-bottom",Wtt.LEFT="left",Wtt.LEFT_TOP="left-top",Wtt.LEFT_BOTTOM="left-bottom",Wtt.BOTTOM="bottom",Wtt.BOTTOM_LEFT="bottom-left",Wtt.BOTTOM_RIGHT="bottom-right",Wtt.RADIUS="radius",Wtt.CIRCLE="circle",Wtt.NONE="none",(Ytt=Htt||(Htt={})).AXIS="axis",Ytt.GRID="grid",Ytt.LEGEND="legend",Ytt.TOOLTIP="tooltip",Ytt.ANNOTATION="annotation",Ytt.SLIDER="slider",Ytt.SCROLLBAR="scrollbar",Ytt.OTHER="other";var Ktt,Ztt,Qtt,Jtt,tet,eet,net,ret,iet=3,oet=2,aet=1;(Ztt=Ktt||(Ktt={})).BEFORE_RENDER="beforerender",Ztt.AFTER_RENDER="afterrender",Ztt.BEFORE_PAINT="beforepaint",Ztt.AFTER_PAINT="afterpaint",Ztt.BEFORE_CHANGE_DATA="beforechangedata",Ztt.AFTER_CHANGE_DATA="afterchangedata",Ztt.BEFORE_CLEAR="beforeclear",Ztt.AFTER_CLEAR="afterclear",Ztt.BEFORE_DESTROY="beforedestroy",Ztt.BEFORE_CHANGE_SIZE="beforechangesize",Ztt.AFTER_CHANGE_SIZE="afterchangesize",(Jtt=Qtt||(Qtt={})).BEFORE_DRAW_ANIMATE="beforeanimate",Jtt.AFTER_DRAW_ANIMATE="afteranimate",(eet=tet||(tet={})).MOUSE_ENTER="plot:mouseenter",eet.MOUSE_DOWN="plot:mousedown",eet.MOUSE_MOVE="plot:mousemove",eet.MOUSE_UP="plot:mouseup",eet.MOUSE_LEAVE="plot:mouseleave",eet.TOUCH_START="plot:touchstart",eet.TOUCH_MOVE="plot:touchmove",eet.TOUCH_END="plot:touchend",eet.TOUCH_CANCEL="plot:touchcancel",eet.CLICK="plot:click",eet.DBLCLICK="plot:dblclick",eet.CONTEXTMENU="plot:contextmenu",eet.LEAVE="plot:leave",eet.ENTER="plot:enter",(ret=net||(net={})).ACTIVE="active",ret.INACTIVE="inactive",ret.SELECTED="selected",ret.DEFAULT="default";var set=["color","shape","size"],uet={};function cet(t,e){uet[t]=e}function det(t){return"number"==typeof t&&!isNaN(t)}function het(t,e,n,r){var i=n,o=r;if(e){var a=function(t){var e=getComputedStyle(t);return{width:(t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10),height:(t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)}}(t);i=a.width?a.width:i,o=a.height?a.height:o}return{width:Math.max(det(i)?i:1,1),height:Math.max(det(o)?o:1,1)}}var fet=function(t){function e(e){var n=t.call(this)||this;n.destroyed=!1;var r=e.visible,i=void 0===r||r;return n.visible=i,n}return Ka(e,t),e.prototype.show=function(){this.visible||this.changeVisible(!0)},e.prototype.hide=function(){this.visible&&this.changeVisible(!1)},e.prototype.destroy=function(){this.off(),this.destroyed=!0},e.prototype.changeVisible=function(t){this.visible!==t&&(this.visible=t)},e}(ru),pet=function(){function t(t){var e=t.xField,n=t.yField,r=t.adjustNames,i=void 0===r?["x","y"]:r;this.adjustNames=i,this.xField=e,this.yField=n}return t.prototype.isAdjust=function(t){return this.adjustNames.indexOf(t)>=0},t.prototype.getAdjustRange=function(t,e,n){var r,i,o=this.yField,a=n.indexOf(e),s=n.length;return!o&&this.isAdjust("y")?(r=0,i=1):s>1?(r=n[0===a?0:a-1],i=n[a===s-1?s-1:a+1],0!==a?r+=(e-r)/2:r-=(i-e)/2,a!==s-1?i-=(i-e)/2:i+=(e-n[s-2])/2):(r=0===e?0:e-.5,i=0===e?1:e+.5),{pre:r,next:i}},t.prototype.adjustData=function(t,e){var n=this,r=this.getDimValues(e);bs(t,(function(t,e){bs(r,(function(r,i){n.adjustDim(i,r,t,e)}))}))},t.prototype.groupData=function(t,e){return bs(t,(function(t){void 0===t[e]&&(t[e]=0)})),Xs(t,e)},t.prototype.adjustDim=function(t,e,n,r){},t.prototype.getDimValues=function(t){var e=this.xField,n=this.yField,r={},i=[];if(e&&this.isAdjust("x")&&i.push(e),n&&this.isAdjust("y")&&i.push(n),i.forEach((function(e){r[e]=Us(t,e).sort((function(t,e){return t-e}))})),!n&&this.isAdjust("y")){r.y=[0,1]}return r},t}(),get={},vet=function(t){return get[t.toLowerCase()]},met=function(t,e){if(vet(t))throw new Error("Adjust type '"+t+"' existed.");get[t.toLowerCase()]=e},yet=function(t,e){return(yet=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function bet(t,e){function n(){this.constructor=t}yet(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var xet=function(){return(xet=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},wet=function(t){function e(e){var n=t.call(this,e)||this;n.cacheMap={},n.adjustDataArray=[],n.mergeData=[];var r=e.marginRatio,i=void 0===r?.5:r,o=e.dodgeRatio,a=void 0===o?.5:o,s=e.dodgeBy,l=e.intervalPadding,u=e.dodgePadding,c=e.xDimensionLength,d=e.groupNum,h=e.defaultSize,f=e.maxColumnWidth,p=e.minColumnWidth,g=e.columnWidthRatio;return n.marginRatio=i,n.dodgeRatio=a,n.dodgeBy=s,n.intervalPadding=l,n.dodgePadding=u,n.xDimensionLegenth=c,n.groupNum=d,n.defaultSize=h,n.maxColumnWidth=f,n.minColumnWidth=p,n.columnWidthRatio=g,n}return bet(e,t),e.prototype.process=function(t){var e=Pl(t),n=As(e),r=this.dodgeBy,i=r?Ks(n,r):e;return this.cacheMap={},this.adjustDataArray=i,this.mergeData=n,this.adjustData(i,n),this.adjustDataArray=[],this.mergeData=[],e},e.prototype.adjustDim=function(t,e,n,r){var i=this,o=this.getDistribution(t);return bs(this.groupData(n,t),(function(n,a){var s;s=1===e.length?{pre:e[0]-1,next:e[0]+1}:i.getAdjustRange(t,parseFloat(a),e),bs(n,(function(e){var n=e[t],a=o[n],l=a.indexOf(r);e[t]=i.getDodgeOffset(s,l,a.length)}))})),[]},e.prototype.getDodgeOffset=function(t,e,n){var r,i=this,o=i.dodgeRatio,a=i.marginRatio,s=i.intervalPadding,l=i.dodgePadding,u=t.pre,c=t.next,d=c-u;if(!vs(s)&&vs(l)&&s>=0)r=u+this.getIntervalOnlyOffset(n,e);else if(!vs(l)&&vs(s)&&l>=0){r=u+this.getDodgeOnlyOffset(n,e)}else if(!vs(s)&&!vs(l)&&s>=0&&l>=0){r=u+this.getIntervalAndDodgeOffset(n,e)}else{var h=d*o/n,f=a*h;r=(u+c)/2+(.5*(d-n*h-(n-1)*f)+((e+1)*h+e*f)-.5*h-.5*d)}return r},e.prototype.getIntervalOnlyOffset=function(t,e){var n=this,r=n.defaultSize,i=n.intervalPadding,o=n.xDimensionLegenth,a=n.groupNum,s=n.dodgeRatio,l=n.maxColumnWidth,u=n.minColumnWidth,c=n.columnWidthRatio,d=i/o,h=(1-(a-1)*d)/a*s/(t-1),f=((1-d*(a-1))/a-h*(t-1))/t;if(f=vs(c)?f:1/a/t*c,!vs(l)){var p=l/o;f=Math.min(f,p)}if(!vs(u)){var g=u/o;f=Math.max(f,g)}return((.5+e)*(f=r?r/o:f)+e*(h=((1-(a-1)*d)/a-t*f)/(t-1))+.5*d)*a-d/2},e.prototype.getDodgeOnlyOffset=function(t,e){var n=this,r=n.defaultSize,i=n.dodgePadding,o=n.xDimensionLegenth,a=n.groupNum,s=n.marginRatio,l=n.maxColumnWidth,u=n.minColumnWidth,c=n.columnWidthRatio,d=i/o,h=1*s/(a-1),f=((1-h*(a-1))/a-d*(t-1))/t;if(f=c?1/a/t*c:f,!vs(l)){var p=l/o;f=Math.min(f,p)}if(!vs(u)){var g=u/o;f=Math.max(f,g)}return((.5+e)*(f=r?r/o:f)+e*d+.5*(h=(1-(f*t+d*(t-1))*a)/(a-1)))*a-h/2},e.prototype.getIntervalAndDodgeOffset=function(t,e){var n=this,r=n.intervalPadding,i=n.dodgePadding,o=n.xDimensionLegenth,a=n.groupNum,s=r/o,l=i/o;return((.5+e)*(((1-s*(a-1))/a-l*(t-1))/t)+e*l+.5*s)*a-s/2},e.prototype.getDistribution=function(t){var e=this.adjustDataArray,n=this.cacheMap,r=n[t];return r||(r={},bs(e,(function(e,n){var i=Us(e,t);i.length||i.push(0),bs(i,(function(t){r[t]||(r[t]=[]),r[t].push(n)}))})),n[t]=r),r},e}(pet);var Cet=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bet(e,t),e.prototype.process=function(t){var e=Pl(t),n=As(e);return this.adjustData(e,n),e},e.prototype.adjustDim=function(t,e,n){var r=this;return bs(this.groupData(n,t),(function(n,i){return r.adjustGroup(n,t,parseFloat(i),e)}))},e.prototype.getAdjustOffset=function(t){var e,n=t.pre,r=t.next,i=.05*(r-n);return(r-i-(e=n+i))*Math.random()+e},e.prototype.adjustGroup=function(t,e,n,r){var i=this,o=this.getAdjustRange(e,n,r);return bs(t,(function(t){t[e]=i.getAdjustOffset(o)})),t},e}(pet),ket=Jl,Eet=function(t){function e(e){var n=t.call(this,e)||this,r=e.adjustNames,i=void 0===r?["y"]:r,o=e.height,a=void 0===o?NaN:o,s=e.size,l=void 0===s?10:s,u=e.reverseOrder,c=void 0!==u&&u;return n.adjustNames=i,n.height=a,n.size=l,n.reverseOrder=c,n}return bet(e,t),e.prototype.process=function(t){var e=this.yField,n=this.reverseOrder,r=e?this.processStack(t):this.processOneDimStack(t);return n?this.reverse(r):r},e.prototype.reverse=function(t){return t.slice(0).reverse()},e.prototype.processStack=function(t){var e=this,n=e.xField,r=e.yField,i=e.reverseOrder?this.reverse(t):t,o=new ket,a=new ket;return i.map((function(t){return t.map((function(t){var e,i=Ul(t,n,0),s=Ul(t,[r]),l=i.toString();if(s=ms(s)?s[1]:s,!vs(s)){var u=s>=0?o:a;u.has(l)||u.set(l,0);var c=u.get(l),d=s+c;return u.set(l,d),xet(xet({},t),((e={})[r]=[c,d],e))}return t}))}))},e.prototype.processOneDimStack=function(t){var e=this,n=this,r=n.xField,i=n.height,o=n.reverseOrder,a=o?this.reverse(t):t,s=new ket;return a.map((function(t){return t.map((function(t){var n,o=e.size,a=t[r],l=2*o/i;s.has(a)||s.set(a,l/2);var u=s.get(a);return s.set(a,u+l),xet(xet({},t),((n={}).y=u,n))}))}))},e}(pet),Met=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bet(e,t),e.prototype.process=function(t){var e=As(t),n=this.xField,r=this.yField,i=this.getXValuesMaxMap(e),o=Math.max.apply(Math,Object.keys(i).map((function(t){return i[t]})));return zl(t,(function(t){return zl(t,(function(t){var e,a,s=t[r],l=t[n];if(ms(s)){var u=(o-i[l])/2;return xet(xet({},t),((e={})[r]=zl(s,(function(t){return u+t})),e))}var c=(o-s)/2;return xet(xet({},t),((a={})[r]=[c,s+c],a))}))}))},e.prototype.getXValuesMaxMap=function(t){var e=this,n=this.xField,r=this.yField,i=Xs(t,(function(t){return t[n]}));return Gl(i,(function(t){return e.getDimMaxValue(t,r)}))},e.prototype.getDimMaxValue=function(t,e){var n=zl(t,(function(t){return Ul(t,e,[])})),r=As(n);return Math.max.apply(Math,r)},e}(pet);met("Dodge",wet),met("Jitter",Cet),met("Stack",Eet),met("Symmetric",Met);var Aet=function(t,e){return zs(e)?e:t.invert(t.scale(e))},_et=function(){function t(t){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(t)}return t.prototype.mapping=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.map((function(e,n){return t._toOriginParam(e,t.scales[n])}));return this.callback.apply(this,r)},t.prototype.getLinearValue=function(t){var e=this.values.length-1,n=Math.floor(e*t),r=e*t-n,i=this.values[n];return i+((n===e?i:this.values[n+1])-i)*r},t.prototype.getNames=function(){for(var t=this.scales,e=this.names,n=Math.min(t.length,e.length),r=[],i=0;i<n;i+=1)r.push(e[i]);return r},t.prototype.getFields=function(){return this.scales.map((function(t){return t.field}))},t.prototype.getScale=function(t){return this.scales[this.names.indexOf(t)]},t.prototype.defaultCallback=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this.values:e.map((function(e,n){var r=t.scales[n];return"identity"===r.type?r.values[0]:t._getAttributeValue(r,e)}))},t.prototype._parseCfg=function(t){var e=this,n=t.type,r=void 0===n?"base":n,i=t.names,o=void 0===i?[]:i,a=t.scales,s=void 0===a?[]:a,l=t.values,u=void 0===l?[]:l,c=t.callback;this.type=r,this.scales=s,this.values=u,this.names=o,this.callback=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(c){var r=c.apply(void 0,t);if(!vs(r))return[r]}return e.defaultCallback.apply(e,t)}},t.prototype._getAttributeValue=function(t,e){if(t.isCategory&&!this.linear){var n=t.translate(e);return this.values[n%this.values.length]}var r=t.scale(e);return this.getLinearValue(r)},t.prototype._toOriginParam=function(t,e){return e.isLinear?t:ms(t)?t.map((function(t){return Aet(e,t)})):Aet(e,t)},t}(),Tet=function(t,e){return(Tet=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Pet(t,e){function n(){this.constructor=t}Tet(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Iet=/rgba?\(([\s.,0-9]+)\)/,Det=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Oet=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Ret=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,Let=function(t,e,n,r){return t[r]+(e[r]-t[r])*n};function Bet(t){return"#"+zet(t[0])+zet(t[1])+zet(t[2])}var Fet,Net=function(t){return[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16)]},zet=function(t){var e=Math.round(t).toString(16);return 1===e.length?"0"+e:e},jet=function(t){if("#"===t[0]&&7===t.length)return t;var e;Fet||((e=document.createElement("i")).title="Web Colour Picker",e.style.display="none",document.body.appendChild(e),Fet=e),Fet.style.color=t;var n=document.defaultView.getComputedStyle(Fet,"").getPropertyValue("color");return n=Bet(Iet.exec(n)[1].split(/\s*,\s*/).map((function(t){return Number(t)})))},Get={rgb2arr:Net,gradient:function(t){var e=zs(t)?t.split("-"):t,n=zl(e,(function(t){return Net(-1===t.indexOf("#")?jet(t):t)}));return function(t){return function(t,e){var n=isNaN(Number(e))||e<0?0:e>1?1:Number(e),r=t.length-1,i=Math.floor(r*n),o=r*n-i,a=t[i],s=i===r?a:t[i+1];return Bet([Let(a,s,o,0),Let(a,s,o,1),Let(a,s,o,2)])}(n,t)}},toRGB:Dl(jet),toCSSGradient:function(t){if(/^[r,R,L,l]{1}[\s]*\(/.test(t)){var e,n=void 0;if("l"===t[0]){var r=+(i=Det.exec(t))[1]+90;n=i[2],e="linear-gradient("+r+"deg, "}else if("r"===t[0]){var i;e="radial-gradient(",n=(i=Oet.exec(t))[4]}var o=n.match(Ret);return bs(o,(function(t,n){var r=t.split(":");e+=r[1]+" "+100*r[0]+"%",n!==o.length-1&&(e+=", ")})),e+=")"}return t}},Uet=function(t){function e(e){var n=t.call(this,e)||this;return n.type="color",n.names=["color"],zs(n.values)&&(n.linear=!0),n.gradient=Get.gradient(n.values),n}return Pet(e,t),e.prototype.getLinearValue=function(t){return this.gradient(t)},e}(_et),$et=function(t){function e(e){var n=t.call(this,e)||this;return n.type="opacity",n.names=["opacity"],n}return Pet(e,t),e}(_et),Vet=function(t){function e(e){var n=t.call(this,e)||this;return n.names=["x","y"],n.type="position",n}return Pet(e,t),e.prototype.mapping=function(t,e){var n=this.scales,r=n[0],i=n[1];return vs(t)||vs(e)?[]:[ms(t)?t.map((function(t){return r.scale(t)})):r.scale(t),ms(e)?e.map((function(t){return i.scale(t)})):i.scale(e)]},e}(_et),Wet=function(t){function e(e){var n=t.call(this,e)||this;return n.type="shape",n.names=["shape"],n}return Pet(e,t),e.prototype.getLinearValue=function(t){var e=Math.round((this.values.length-1)*t);return this.values[e]},e}(_et),Het=function(t){function e(e){var n=t.call(this,e)||this;return n.type="size",n.names=["size"],n}return Pet(e,t),e}(_et),Yet={},Xet=function(t){return Yet[t.toLowerCase()]},qet=function(t,e){if(Xet(t))throw new Error("Attribute type '"+t+"' existed.");Yet[t.toLowerCase()]=e};qet("Color",Uet),qet("Opacity",$et),qet("Position",Vet),qet("Shape",Wet),qet("Size",Het);var Ket=function(){function t(t){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var e=t.start,n=t.end,r=t.matrix,i=void 0===r?[1,0,0,0,1,0,0,0,1]:r,o=t.isTransposed,a=void 0!==o&&o;this.start=e,this.end=n,this.matrix=i,this.originalMatrix=os([],i),this.isTransposed=a}return t.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},t.prototype.update=function(t){Tl(this,t),this.initial()},t.prototype.convertDim=function(t,e){var n,r=this[e],i=r.start,o=r.end;return this.isReflect(e)&&(i=(n=[o,i])[0],o=n[1]),i+t*(o-i)},t.prototype.invertDim=function(t,e){var n,r=this[e],i=r.start,o=r.end;return this.isReflect(e)&&(i=(n=[o,i])[0],o=n[1]),(t-i)/(o-i)},t.prototype.applyMatrix=function(t,e,n){void 0===n&&(n=0);var r=[t,e,n];return ju(r,r,this.matrix),r},t.prototype.invertMatrix=function(t,e,n){void 0===n&&(n=0);var r=su([0,0,0,0,0,0,0,0,0],this.matrix),i=[t,e,n];return r&&ju(i,i,r),i},t.prototype.convert=function(t){var e=this.convertPoint(t),n=e.x,r=e.y,i=this.applyMatrix(n,r,1);return{x:i[0],y:i[1]}},t.prototype.invert=function(t){var e=this.invertMatrix(t.x,t.y,1);return this.invertPoint({x:e[0],y:e[1]})},t.prototype.rotate=function(t){var e=this.matrix,n=this.center;return gc(e,e,[-n.x,-n.y]),vc(e,e,t),gc(e,e,[n.x,n.y]),this},t.prototype.reflect=function(t){return"x"===t?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},t.prototype.scale=function(t,e){var n=this.matrix,r=this.center;return gc(n,n,[-r.x,-r.y]),mc(n,n,[t,e]),gc(n,n,[r.x,r.y]),this},t.prototype.translate=function(t,e){var n=this.matrix;return gc(n,n,[t,e]),this},t.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},t.prototype.getCenter=function(){return this.center},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRadius=function(){return this.radius},t.prototype.isReflect=function(t){return"x"===t?this.isReflectX:this.isReflectY},t.prototype.resetMatrix=function(t){this.matrix=t||os([],this.originalMatrix)},t}(),Zet=function(t){function e(e){var n=t.call(this,e)||this;return n.isRect=!0,n.type="cartesian",n.initial(),n}return Ka(e,t),e.prototype.initial=function(){t.prototype.initial.call(this);var e=this.start,n=this.end;this.x={start:e.x,end:n.x},this.y={start:e.y,end:n.y}},e.prototype.convertPoint=function(t){var e,n=t.x,r=t.y;return this.isTransposed&&(n=(e=[r,n])[0],r=e[1]),{x:this.convertDim(n,"x"),y:this.convertDim(r,"y")}},e.prototype.invertPoint=function(t){var e,n=this.invertDim(t.x,"x"),r=this.invertDim(t.y,"y");return this.isTransposed&&(n=(e=[r,n])[0],r=e[1]),{x:n,y:r}},e}(Ket),Qet=function(t){function e(e){var n=t.call(this,e)||this;n.isHelix=!0,n.type="helix";var r=e.startAngle,i=void 0===r?1.25*Math.PI:r,o=e.endAngle,a=void 0===o?7.25*Math.PI:o,s=e.innerRadius,l=void 0===s?0:s,u=e.radius;return n.startAngle=i,n.endAngle=a,n.innerRadius=l,n.radius=u,n.initial(),n}return Ka(e,t),e.prototype.initial=function(){t.prototype.initial.call(this);var e=(this.endAngle-this.startAngle)/(2*Math.PI)+1,n=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(n*=this.radius),this.d=Math.floor(n*(1-this.innerRadius)/e),this.a=this.d/(2*Math.PI),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*n,end:this.innerRadius*n+.99*this.d}},e.prototype.convertPoint=function(t){var e,n=t.x,r=t.y;this.isTransposed&&(n=(e=[r,n])[0],r=e[1]);var i=this.convertDim(n,"x"),o=this.a*i,a=this.convertDim(r,"y");return{x:this.center.x+Math.cos(i)*(o+a),y:this.center.y+Math.sin(i)*(o+a)}},e.prototype.invertPoint=function(t){var e,n=this.d+this.y.start,r=ic([0,0],[t.x,t.y],[this.center.x,this.center.y]),i=bc(r,[1,0],!0),o=i*this.a;uc(r)<o&&(o=uc(r)),i=2*Math.floor((uc(r)-o)/n)*Math.PI+i;var a=this.a*i,s=uc(r)-a;s=rl(s,0)?0:s;var l=this.invertDim(i,"x"),u=this.invertDim(s,"y");return l=rl(l,0)?0:l,u=rl(u,0)?0:u,this.isTransposed&&(l=(e=[u,l])[0],u=e[1]),{x:l,y:u}},e}(Ket),Jet=function(t){function e(e){var n=t.call(this,e)||this;n.isPolar=!0,n.type="polar";var r=e.startAngle,i=void 0===r?-Math.PI/2:r,o=e.endAngle,a=void 0===o?3*Math.PI/2:o,s=e.innerRadius,l=void 0===s?0:s,u=e.radius;return n.startAngle=i,n.endAngle=a,n.innerRadius=l,n.radius=u,n.initial(),n}return Ka(e,t),e.prototype.initial=function(){for(t.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=2*Math.PI;var e,n=this.getOneBox(),r=n.maxX-n.minX,i=n.maxY-n.minY,o=Math.abs(n.minX)/r,a=Math.abs(n.minY)/i;this.height/i>this.width/r?(e=this.width/r,this.circleCenter={x:this.center.x-(.5-o)*this.width,y:this.center.y-(.5-a)*e*i}):(e=this.height/i,this.circleCenter={x:this.center.x-(.5-o)*e*r,y:this.center.y-(.5-a)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=e*this.radius:(this.radius<=0||this.radius>e)&&(this.polarRadius=e):this.polarRadius=e,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},e.prototype.getRadius=function(){return this.polarRadius},e.prototype.convertPoint=function(t){var e,n=this.getCenter(),r=t.x,i=t.y;return this.isTransposed&&(r=(e=[i,r])[0],i=e[1]),r=this.convertDim(r,"x"),i=this.convertDim(i,"y"),{x:n.x+Math.cos(r)*i,y:n.y+Math.sin(r)*i}},e.prototype.invertPoint=function(t){var e,n=this.getCenter(),r=[t.x-n.x,t.y-n.y],i=this.startAngle,o=this.endAngle;this.isReflect("x")&&(i=(e=[o,i])[0],o=e[1]);var a=[1,0,0,0,1,0,0,0,1];vc(a,a,i);var s=[1,0,0];ju(s,s,a);var l=bc([s[0],s[1]],r,o<i);rl(l,2*Math.PI)&&(l=0);var u=uc(r),c=l/(o-i);c=o-i>0?c:-c;var d=this.invertDim(u,"y"),h={x:0,y:0};return h.x=this.isTransposed?d:c,h.y=this.isTransposed?c:d,h},e.prototype.getCenter=function(){return this.circleCenter},e.prototype.getOneBox=function(){var t=this.startAngle,e=this.endAngle;if(Math.abs(e-t)>=2*Math.PI)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var n=[0,Math.cos(t),Math.cos(e)],r=[0,Math.sin(t),Math.sin(e)],i=Math.min(t,e);i<Math.max(t,e);i+=Math.PI/18)n.push(Math.cos(i)),r.push(Math.sin(i));return{minX:Math.min.apply(Math,n),maxX:Math.max.apply(Math,n),minY:Math.min.apply(Math,r),maxY:Math.max.apply(Math,r)}},e}(Ket),tnt={},ent=function(t,e){tnt[t.toLowerCase()]=e};ent("rect",Zet),ent("cartesian",Zet),ent("polar",Jet),ent("helix",Qet);var nnt="\t\n\v\f\r   ᠎             　\u2028\u2029",rnt=new RegExp("([a-z])["+nnt+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+nnt+"]*,?["+nnt+"]*)+)","ig"),int=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+nnt+"]*,?["+nnt+"]*","ig"),ont=function(t){if(!t)return null;if(ms(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(rnt,(function(r,i,o){var a=[],s=i.toLowerCase();if(o.replace(int,(function(t,e){e&&a.push(+e)})),"m"===s&&a.length>2&&(n.push([i].concat(a.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===a.length&&n.push([i,a[0]]),"r"===s)n.push([i].concat(a));else for(;a.length>=e[s]&&(n.push([i].concat(a.splice(0,e[s]))),e[s]););return t})),n},ant=function(t,e){if(t.length!==e.length)return!1;var n=!0;return bs(t,(function(t,r){if(t!==e[r])return n=!1,!1})),n};function snt(t,e,n){var r=null,i=n;return e<i&&(i=e,r="add"),t<i&&(i=t,r="del"),{type:r,min:i}}var lnt=function(t,e){var n=function(t,e){var n,r,i=t.length,o=e.length,a=0;if(0===i||0===o)return null;for(var s=[],l=0;l<=i;l++)s[l]=[],s[l][0]={min:l};for(var u=0;u<=o;u++)s[0][u]={min:u};for(l=1;l<=i;l++)for(n=t[l-1],u=1;u<=o;u++){r=e[u-1],a=ant(n,r)?0:1;var c=s[l-1][u].min+1,d=s[l][u-1].min+1,h=s[l-1][u-1].min+a;s[l][u]=snt(c,d,h)}return s}(t,e),r=t.length,i=e.length,o=[],a=1,s=1;if(n[r][i].min!==r){for(var l=1;l<=r;l++){var u=n[l][l].min;s=l;for(var c=a;c<=i;c++)n[l][c].min<u&&(u=n[l][c].min,s=c);a=s,n[l][a].type&&o.push({index:l-1,type:n[l][a].type})}for(l=o.length-1;l>=0;l--)a=o[l].index,"add"===o[l].type?t.splice(a,0,[].concat(t[a])):t.splice(a,1)}var d=i-(r=t.length);if(r<i)for(l=0;l<d;l++)"z"===t[r-1][0]||"Z"===t[r-1][0]?t.splice(r-2,0,t[r-2]):t.push(t[r-1]),r+=1;return t};function unt(t,e,n){for(var r,i=[].concat(t),o=1/(n+1),a=cnt(e)[0],s=1;s<=n;s++)o*=s,0===(r=Math.floor(t.length*o))?i.unshift([a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]):i.splice(r,0,[a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]);return i}function cnt(t){var e=[];switch(t[0]){case"M":case"L":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"T":e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}var dnt=function(t,e){if(t.length<=1)return t;for(var n,r=0;r<e.length;r++)if(t[r][0]!==e[r][0])switch(n=cnt(t[r]),e[r][0]){case"M":t[r]=["M"].concat(n[0]);break;case"L":t[r]=["L"].concat(n[0]);break;case"A":t[r]=[].concat(e[r]),t[r][6]=n[0][0],t[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=unt(n,t[r-1],1)}t[r]=["Q"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"T":t[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){t[r]=e[r];break}n=unt(n,t[r-1],2)}t[r]=["C"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"S":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=unt(n,t[r-1],1)}t[r]=["S"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;default:t[r]=e[r]}return t},hnt=function(){function t(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}();function fnt(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}var pnt="undefined"!=typeof window&&void 0!==window.document;function gnt(t,e){if(t.isCanvas())return!0;for(var n=e.getParent(),r=!1;n;){if(n===t){r=!0;break}n=n.getParent()}return r}function vnt(t){return t.cfg.visible&&t.cfg.capture}var mnt=function(t){function e(e){var n=t.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=Tl(r,e),n}return Ka(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,e){this.cfg[t]=e},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(ru);function ynt(t,e){var n=[],r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=e[0],f=e[1],p=e[2],g=e[3],v=e[4],m=e[5],y=e[6],b=e[7],x=e[8];return n[0]=h*r+f*a+p*u,n[1]=h*i+f*s+p*c,n[2]=h*o+f*l+p*d,n[3]=g*r+v*a+m*u,n[4]=g*i+v*s+m*c,n[5]=g*o+v*l+m*d,n[6]=y*r+b*a+x*u,n[7]=y*i+b*s+x*c,n[8]=y*o+b*l+x*d,n}function bnt(t,e){var n=[],r=e[0],i=e[1];return n[0]=t[0]*r+t[3]*i+t[6],n[1]=t[1]*r+t[4]*i+t[7],n}var xnt=yc,wnt=["zIndex","capture","visible","type"],Cnt=["repeat"];function Snt(t,e){var n={},r=e.attrs;for(var i in t)n[i]=r[i];return n}function knt(t,e){var n={},r=e.attr();return bs(t,(function(t,e){-1!==Cnt.indexOf(e)||Nl(r[e],t)||(n[e]=t)})),n}function Ent(t,e){if(e.onFrame)return t;var n=e.startTime,r=e.delay,i=e.duration,o=Object.prototype.hasOwnProperty;return bs(t,(function(t){n+r<t.startTime+t.delay+t.duration&&i>t.delay&&bs(e.toAttrs,(function(e,n){o.call(t.toAttrs,n)&&(delete t.toAttrs[n],delete t.fromAttrs[n])}))})),t}var Mnt=function(t){function e(e){var n=t.call(this,e)||this;n.attrs={};var r=n.getDefaultAttrs();return Tl(r,e.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return Ka(e,t),e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=e[1];if(!r)return this.attrs;if(ys(r)){for(var o in r)this.setAttr(o,r[o]);return this.afterAttrsChange(r),this}return 2===e.length?(this.setAttr(r,i),this.afterAttrsChange(((t={})[r]=i,t)),this):this.attrs[r]},e.prototype.isClipped=function(t,e){var n=this.getClip();return n&&!n.isHit(t,e)},e.prototype.setAttr=function(t,e){var n=this.attrs[t];n!==e&&(this.attrs[t]=e,this.onAttrChange(t,e,n))},e.prototype.onAttrChange=function(t,e,n){"matrix"===t&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var e=this.cfg.applyTo;e&&e.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var e=this.getParent();return e&&e.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var e=t.getChildren();this.get("el");var n=e.indexOf(this);e.splice(n,1),e.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var e=t.getChildren();this.get("el");var n=e.indexOf(this);e.splice(n,1),e.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){void 0===t&&(t=!0);var e=this.getParent();e?(fnt(e.getChildren(),this),e.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr("matrix")},e.prototype.setMatrix=function(t){this.attr("matrix",t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var e=this.attr("matrix"),n=this.cfg.parentMatrix;t=n&&e?ynt(n,e):e||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var e=this.attr("matrix"),n=null;n=t&&e?ynt(t,e):e||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var e=this.attr("matrix");return e?bnt(e,t):t},e.prototype.invertFromMatrix=function(t){var e,n,r,i,o,a,s,l,u,c,d,h,f,p,g,v=this.attr("matrix");if(v){var m=(n=[],r=(e=v)[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],(g=r*(h=d*s-l*c)+i*(f=-d*a+l*u)+o*(p=c*a-s*u))?(g=1/g,n[0]=h*g,n[1]=(-d*i+o*c)*g,n[2]=(l*i-o*s)*g,n[3]=f*g,n[4]=(d*r-o*u)*g,n[5]=(-l*r+o*a)*g,n[6]=p*g,n[7]=(-c*r+i*u)*g,n[8]=(s*r-i*a)*g,n):null);if(m)return bnt(m,t)}return t},e.prototype.setClip=function(t){var e=this.getCanvas(),n=null;if(t){var r=this.getShapeBase()[vl(t.type)];r&&(n=new r({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:e}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,e=this.attrs,n={};bs(e,(function(t,r){ms(e[r])?n[r]=function(t){for(var e=[],n=0;n<t.length;n++)ms(t[n])?e.push([].concat(t[n])):e.push(t[n]);return e}(e[r]):n[r]=e[r]}));var r=new(0,this.constructor)({attrs:n});return bs(wnt,(function(e){r.set(e,t.get(e))})),r},e.prototype.destroy=function(){this.destroyed||(this.attrs={},t.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var i,o,a,s,l,u=t[0],c=t[1],d=t[2],h=void 0===d?"easeLinear":d,f=t[3],p=void 0===f?Zl:f,g=t[4],v=void 0===g?0:g;gs(u)?(i=u,u={}):ys(u)&&u.onFrame&&(i=u.onFrame,o=u.repeat),ys(c)?(c=(l=c).duration,h=l.easing||"easeLinear",v=l.delay||0,o=l.repeat||o||!1,p=l.callback||Zl,a=l.pauseCallback||Zl,s=l.resumeCallback||Zl):(el(p)&&(v=p,p=null),gs(h)?(p=h,h="easeLinear"):h=h||"easeLinear");var m=knt(u,this),y={fromAttrs:Snt(m,this),toAttrs:m,duration:c,easing:h,repeat:o,callback:p,pauseCallback:a,resumeCallback:s,delay:v,startTime:n.getTime(),id:Kl(),onFrame:i,pathFormatted:!1};r.length>0?r=Ent(r,y):n.addAnimator(this),r.push(y),this.set("animations",r),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var e=this;void 0===t&&(t=!0),bs(this.get("animations"),(function(n){t&&(n.onFrame?e.attr(n.onFrame(1)):e.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),e=this.get("animations"),n=t.getTime();return bs(e,(function(t){t._paused=!0,t._pauseTime=n,t.pauseCallback&&t.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline").getTime(),e=this.get("animations"),n=this.get("_pause").pauseTime;return bs(e,(function(e){e.startTime=e.startTime+(t-n),e._paused=!1,e._pauseTime=null,e.resumeCallback&&e.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",e),this},e.prototype.emitDelegation=function(t,e){var n,r=this,i=e.propagationPath;this.getEvents(),"mouseenter"===t?n=e.fromShape:"mouseleave"===t&&(n=e.toShape);for(var o=function(t){var o=i[t],s=o.get("name");if(s){if((o.isGroup()||o.isCanvas&&o.isCanvas())&&n&&gnt(o,n))return"break";ms(s)?bs(s,(function(t){r.emitDelegateEvent(o,t,e)})):a.emitDelegateEvent(o,s,e)}},a=this,s=0;s<i.length;s++){if("break"===o(s))break}},e.prototype.emitDelegateEvent=function(t,e,n){var r=this.getEvents(),i=e+":"+n.type;(r[i]||r["*"])&&(n.name=i,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(i,n))},e.prototype.translate=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var n=this.getMatrix(),r=xnt(n,[["t",t,e]]);return this.setMatrix(r),this},e.prototype.move=function(t,e){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(t-n,e-r),this},e.prototype.moveTo=function(t,e){return this.move(t,e)},e.prototype.scale=function(t,e){var n=this.getMatrix(),r=xnt(n,[["s",t,e||t]]);return this.setMatrix(r),this},e.prototype.rotate=function(t){var e=this.getMatrix(),n=xnt(e,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var e=this.attr(),n=e.x,r=e.y,i=this.getMatrix(),o=xnt(i,[["t",-n,-r],["r",t],["t",n,r]]);return this.setMatrix(o),this},e.prototype.rotateAtPoint=function(t,e,n){var r=this.getMatrix(),i=xnt(r,[["t",-t,-e],["r",n],["t",t,e]]);return this.setMatrix(i),this},e}(mnt),Ant={};function _nt(t,e){if(t.set("canvas",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){_nt(t,e)}))}}function Tnt(t,e){if(t.set("timeline",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){Tnt(t,e)}))}}var Pnt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=[],o=[],a=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return a.length>0?(bs(a,(function(t){var e=t.getBBox();i.push(e.minX,e.maxX),o.push(e.minY,e.maxY)})),t=Ps(i),e=Ts(i),n=Ps(o),r=Ts(o)):(t=0,e=0,n=0,r=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},e.prototype.getCanvasBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=[],o=[],a=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return a.length>0?(bs(a,(function(t){var e=t.getCanvasBBox();i.push(e.minX,e.maxX),o.push(e.minY,e.maxY)})),t=Ps(i),e=Ts(i),n=Ps(o),r=Ts(o)):(t=0,e=0,n=0,r=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.children=[],e},e.prototype.onAttrChange=function(e,n,r){if(t.prototype.onAttrChange.call(this,e,n,r),"matrix"===e){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},e.prototype.applyMatrix=function(e){var n=this.getTotalMatrix();t.prototype.applyMatrix.call(this,e);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},e.prototype._applyChildrenMarix=function(t){bs(this.getChildren(),(function(e){e.applyMatrix(t)}))},e.prototype.addShape=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1];ys(n)?r=n:r.type=n;var i=Ant[r.type];i||(i=vl(r.type),Ant[r.type]=i);var o=this.getShapeBase(),a=new o[i](r);return this.add(a),a},e.prototype.addGroup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r=t[0],i=t[1];if(gs(r))n=new r(i||{parent:this});else{var o=r||{},a=this.getGroupBase();n=new a(o)}return this.add(n),n},e.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},e.prototype.getShape=function(t,e,n){if(!vnt(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,t,e,n);else{var o=[t,e,1];o=this.invertFromMatrix(o),this.isClipped(o[0],o[1])||(r=this._findShape(i,o[0],o[1],n))}return r},e.prototype._findShape=function(t,e,n,r){for(var i=null,o=t.length-1;o>=0;o--){var a=t[o];if(vnt(a)&&(a.isGroup()?i=a.getShape(e,n,r):a.isHit(e,n)&&(i=a)),i)break}return i},e.prototype.add=function(t){var e=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=t.getParent();i&&function(t,e,n){void 0===n&&(n=!0),n?e.destroy():(e.set("parent",null),e.set("canvas",null)),fnt(t.getChildren(),e)}(i,t,!1),t.set("parent",this),e&&_nt(t,e),r&&Tnt(t,r),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var e=this.getTotalMatrix();e&&t.applyMatrix(e)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t,e=this.getChildren();bs(e,(function(t,e){return t._INDEX=e,t})),e.sort((t=function(t,e){return t.get("zIndex")-e.get("zIndex")},function(e,n){var r=t(e,n);return 0===r?e._INDEX-n._INDEX:r})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),e=t.length-1;e>=0;e--)t[e].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),t.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){return this.getChildren()[t]},e.prototype.getCount=function(){return this.getChildren().length},e.prototype.contain=function(t){return this.getChildren().indexOf(t)>-1},e.prototype.removeChild=function(t,e){void 0===e&&(e=!0),this.contain(t)&&t.remove(e)},e.prototype.findAll=function(t){var e=[];return bs(this.getChildren(),(function(n){t(n)&&e.push(n),n.isGroup()&&(e=e.concat(n.findAll(t)))})),e},e.prototype.find=function(t){var e=null;return bs(this.getChildren(),(function(n){if(t(n)?e=n:n.isGroup()&&(e=n.find(t)),e)return!1})),e},e.prototype.findById=function(t){return this.find((function(e){return e.get("id")===t}))},e.prototype.findByClassName=function(t){return this.find((function(e){return e.get("className")===t}))},e.prototype.findAllByName=function(t){return this.findAll((function(e){return e.get("name")===t}))},e}(Mnt),Int=[1,0,0,0,1,0,0,0,1];function Dnt(t,e,n){var r,i=e.startTime;if(n<i+e.delay||e._paused)return!1;var o=e.duration,a=e.easing;if(n=n-i-e.delay,e.repeat)r=n%o/o,r=mp[a](r);else{if(!((r=n/o)<1))return e.onFrame?t.attr(e.onFrame(1)):t.attr(e.toAttrs),!0;r=mp[a](r)}if(e.onFrame){var s=e.onFrame(r);t.attr(s)}else!function(t,e,n){var r={},i=e.fromAttrs,o=e.toAttrs;if(!t.destroyed){var a,s;for(var l in o)if(!Nl(i[l],o[l]))if("path"===l){var u=o[l],c=i[l];u.length>c.length?(u=ont(o[l]),c=ont(i[l]),c=lnt(c,u),c=dnt(c,u),e.fromAttrs.path=c,e.toAttrs.path=u):e.pathFormatted||(u=ont(o[l]),c=ont(i[l]),c=dnt(c,u),e.fromAttrs.path=c,e.toAttrs.path=u,e.pathFormatted=!0),r[l]=[];for(var d=0;d<u.length;d++){for(var h=u[d],f=c[d],p=[],g=0;g<h.length;g++)el(h[g])&&f&&el(f[g])?(a=lg(f[g],h[g]),p.push(a(n))):p.push(h[g]);r[l].push(p)}}else if("matrix"===l){var v=tg(i[l]||Int,o[l]||Int)(n);r[l]=v}else["fill","stroke","fillStyle","strokeStyle"].includes(l)&&(s=o[l],/^[r,R,L,l]{1}[\s]*\(/.test(s))?r[l]=o[l]:gs(o[l])||(a=lg(i[l],o[l]),r[l]=a(n));t.attr(r)}}(t,e,r);return!1}var Ont=function(){function t(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return t.prototype.initTimer=function(){var t,e,n,r=this;this.timer=Hf((function(i){if(r.current=i,r.animators.length>0){for(var o=r.animators.length-1;o>=0;o--)if((t=r.animators[o]).destroyed)r.removeAnimator(o);else{if(!t.isAnimatePaused())for(var a=(e=t.get("animations")).length-1;a>=0;a--)n=e[a],Dnt(t,n,i)&&(e.splice(a,1),!1,n.callback&&n.callback());0===e.length&&r.removeAnimator(o)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},t.prototype.addAnimator=function(t){this.animators.push(t)},t.prototype.removeAnimator=function(t){this.animators.splice(t,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(t){void 0===t&&(t=!0),this.animators.forEach((function(e){e.stopAnimate(t)})),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}(),Rnt=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Lnt(t,e,n){n.name=e,n.target=t,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}function Bnt(t,e,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===e?(r=n.fromShape,i=!0):"mouseleave"===e&&(i=!0,r=n.toShape),t.isCanvas()&&i)return;if(r&&gnt(t,r))return void(n.bubbles=!1);n.name=e,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}}var Fnt=function(){function t(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(t){var n=t.type;e._triggerEvent(n,t)},this._onDocumentMove=function(t){if(e.canvas.get("el")!==t.target&&(e.dragging||e.currentShape)){var n=e._getPointInfo(t);e.dragging&&e._emitEvent("drag",t,n,e.draggingShape)}},this._onDocumentMouseUp=function(t){if(e.canvas.get("el")!==t.target&&e.dragging){var n=e._getPointInfo(t);e.draggingShape&&e._emitEvent("drop",t,n,null),e._emitEvent("dragend",t,n,e.draggingShape),e._afterDrag(e.draggingShape,n,t)}},this.canvas=t.canvas}return t.prototype.init=function(){this._bindEvents()},t.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");bs(Rnt,(function(n){e.addEventListener(n,t._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");bs(Rnt,(function(n){e.removeEventListener(n,t._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._getEventObj=function(t,e,n,r,i,o){var a=new hnt(t,e);return a.fromShape=i,a.toShape=o,a.x=n.x,a.y=n.y,a.clientX=n.clientX,a.clientY=n.clientY,a.propagationPath.push(r),a},t.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},t.prototype._getPointInfo=function(t){var e=this.canvas,n=e.getClientByEvent(t),r=e.getPointByEvent(t);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},t.prototype._triggerEvent=function(t,e){var n=this._getPointInfo(e),r=this._getShape(n,e),i=this["_on"+t],o=!1;if(i)i.call(this,n,r,e);else{var a=this.currentShape;"mouseenter"===t||"dragenter"===t||"mouseover"===t?(this._emitEvent(t,e,n,null,null,r),r&&this._emitEvent(t,e,n,r,null,r),"mouseenter"===t&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):"mouseleave"===t||"dragleave"===t||"mouseout"===t?(o=!0,a&&this._emitEvent(t,e,n,a,a,null),this._emitEvent(t,e,n,null,a,null),"mouseleave"===t&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(t,e,n,r,null,null)}if(o||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=r.attr("cursor")||s.get("cursor")}},t.prototype._onmousedown=function(t,e,n){0===n.button&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,t,e,null,null)},t.prototype._emitMouseoverEvents=function(t,e,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",t,e,n,n,r),this._emitEvent("mouseleave",t,e,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",t,e,r,n,r),this._emitEvent("mouseenter",t,e,r,n,r)))},t.prototype._emitDragoverEvents=function(t,e,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",t,e,n,n,r),this._emitEvent("dragenter",t,e,r,n,r)),i||this._emitEvent("dragover",t,e,r)):n&&this._emitEvent("dragleave",t,e,n,n,r),i&&this._emitEvent("dragover",t,e,r)},t.prototype._afterDrag=function(t,e,n){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(e,n);r!==t&&this._emitMouseoverEvents(n,e,t,r),this.currentShape=r},t.prototype._onmouseup=function(t,e,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,t,e),this._emitEvent("dragend",n,t,r),this._afterDrag(r,t,n)):(this._emitEvent("mouseup",n,t,e),e===this.mousedownShape&&this._emitEvent("click",n,t,e),this.mousedownShape=null,this.mousedownPoint=null)}},t.prototype._ondragover=function(t,e,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,t,r,e,!0)},t.prototype._onmousemove=function(t,e,n){var r=this.canvas,i=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,t,i,e,!1),this._emitEvent("drag",n,t,o);else{var a=this.mousedownPoint;if(a){var s=this.mousedownShape,l=n.timeStamp-this.mousedownTimeStamp,u=a.clientX-t.clientX,c=a.clientY-t.clientY;l>120||u*u+c*c>40?s&&s.get("draggable")?((o=this.mousedownShape).set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,t,o),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e))}else this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)}},t.prototype._emitEvent=function(t,e,n,r,i,o){var a=this._getEventObj(t,e,n,r,i,o);if(r){a.shape=r,Lnt(r,t,a);for(var s=r.getParent();s;)s.emitDelegation(t,a),a.propagationStopped||Bnt(s,t,a),a.propagationPath.push(s),s=s.getParent()}else{Lnt(this.canvas,t,a)}},t.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t}(),Nnt=mf(),znt=Nnt&&"firefox"===Nnt.name;!function(t){function e(e){var n=t.call(this,e)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},e.prototype.initContainer=function(){var t=this.get("container");zs(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t),this.get("container").appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new Fnt({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new Ont(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,e){var n=this.get("el");pnt&&(n.style.width=t+"px",n.style.height=e+"px")},e.prototype.changeSize=function(t,e){this.setDOMSize(t,e),this.set("width",t),this.set("height",e),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var e=this.get("el");pnt&&e&&(e.style.cursor=t)},e.prototype.getPointByEvent=function(t){if(this.get("supportCSSTransform")){if(znt&&!vs(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!vs(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var e=this.getClientByEvent(t),n=e.x,r=e.y;return this.getPointByClient(n,r)},e.prototype.getClientByEvent=function(t){var e=t;return t.touches&&(e="touchend"===t.type?t.changedTouches[0]:t.touches[0]),{x:e.clientX,y:e.clientY}},e.prototype.getPointByClient=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t-n.left,y:e-n.top}},e.prototype.getClientByPoint=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t+n.left,y:e+n.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){this.get("eventController").destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),t.prototype.destroy.call(this))}}(Pnt),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Ka(e,t),e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];e.add(i.clone())}return e}}(Pnt),function(t){function e(e){return t.call(this,e)||this}Ka(e,t),e.prototype._isInBBox=function(t,e){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=e&&n.maxY>=e},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(e){t.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),e=this.getTotalMatrix(),n=t.minX,r=t.minY,i=t.maxX,o=t.maxY;if(e){var a=bnt(e,[t.minX,t.minY]),s=bnt(e,[t.maxX,t.minY]),l=bnt(e,[t.minX,t.maxY]),u=bnt(e,[t.maxX,t.maxY]);n=Math.min(a[0],s[0],l[0],u[0]),i=Math.max(a[0],s[0],l[0],u[0]),r=Math.min(a[1],s[1],l[1],u[1]),o=Math.max(a[1],s[1],l[1],u[1])}var c=this.attrs;if(c.shadowColor){var d=c.shadowBlur,h=void 0===d?0:d,f=c.shadowOffsetX,p=void 0===f?0:f,g=c.shadowOffsetY,v=void 0===g?0:g,m=n-h+p,y=i+h+p,b=r-h+v,x=o+h+v;n=Math.min(n,m),i=Math.max(i,y),r=Math.min(r,b),o=Math.max(o,x)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:o,width:i-n,height:o-r}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,e){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,e){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[t,e,1],o=(i=this.invertFromMatrix(i))[0],a=i[1],s=this._isInBBox(o,a);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(o,a)){if(this.isInShape(o,a))return!0;if(n&&n.isHit(o,a))return!0;if(r&&r.isHit(o,a))return!0}return!1}}(Mnt);var jnt=new Map;function Gnt(t,e){jnt.set(t,e)}function Unt(t){var e=t.attr();return{x:e.x,y:e.y,width:e.width,height:e.height}}function $nt(t){var e=t.attr(),n=e.x,r=e.y,i=e.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}function Vnt(t,e){return t&&e?{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}:t||e}function Wnt(t,e){var n=t.get("startArrowShape"),r=t.get("endArrowShape");return n&&(e=Vnt(e,n.getCanvasBBox())),r&&(e=Vnt(e,r.getCanvasBBox())),e}var Hnt=null;function Ynt(t,e){var n=function(){if(!Hnt){var t=document.createElement("canvas");t.width=1,t.height=1,Hnt=t.getContext("2d")}return Hnt}(),r=0;if(vs(t)||""===t)return r;(n.save(),n.font=e,zs(t)&&t.includes("\n"))?bs(t.split("\n"),(function(t){var e=n.measureText(t).width;r<e&&(r=e)})):r=n.measureText(t).width;return n.restore(),r}function Xnt(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),a=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!l||0===Math.sin(l)||rl(l,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),c=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return u=u>Math.PI/2?Math.PI-u:u,c=c>Math.PI/2?Math.PI-c:c,{xExtra:Math.cos(l/2-u)*(e/2*(1/Math.sin(l/2)))-e/2||0,yExtra:Math.cos(c-l/2)*(e/2*(1/Math.sin(l/2)))-e/2||0}}function qnt(t,e,n){var r=new hnt(e,n);r.target=t,r.propagationPath.push(t),t.emitDelegation(e,r);for(var i=t.getParent();i;)i.emitDelegation(e,r),r.propagationPath.push(i),i=i.getParent()}Gnt("rect",Unt),Gnt("image",Unt),Gnt("circle",$nt),Gnt("marker",$nt),Gnt("polyline",(function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var o=e[i];n.push(o[0]),r.push(o[1])}var a=Pg(n,r),s=a.x,l=a.y,u={minX:s,minY:l,maxX:s+a.width,maxY:l+a.height};return{x:(u=Wnt(t,u)).minX,y:u.minY,width:u.maxX-u.minX,height:u.maxY-u.minY}})),Gnt("polygon",(function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var o=e[i];n.push(o[0]),r.push(o[1])}return Pg(n,r)})),Gnt("text",(function(t){var e=t.attr(),n=e.x,r=e.y,i=e.text,o=e.fontSize,a=e.lineHeight,s=e.font;s||(s=function(t){var e=t.fontSize,n=t.fontFamily,r=t.fontWeight;return[t.fontStyle,t.fontVariant,r,e+"px",n].join(" ").trim()}(e));var l,u=Ynt(i,s);if(u){var c=e.textAlign,d=e.textBaseline,h=function(t,e,n){var r=1;return zs(t)&&(r=t.split("\n").length),r>1?e*r+function(t,e){return e?e-t:.14*t}(e,n)*(r-1):e}(i,o,a),f={x:n,y:r-h};c&&("end"===c||"right"===c?f.x-=u:"center"===c&&(f.x-=u/2)),d&&("top"===d?f.y+=h:"middle"===d&&(f.y+=h/2)),l={x:f.x,y:f.y,width:u,height:h}}else l={x:n,y:r,width:0,height:0};return l})),Gnt("path",(function(t){var e=t.attr(),n=e.path,r=e.stroke?e.lineWidth:0,i=function(t,e){for(var n=[],r=[],i=[],o=0;o<t.length;o++){var a=(g=t[o]).currentPoint,s=g.params,l=g.prePoint,u=void 0;switch(g.command){case"Q":u=zg.box(l[0],l[1],s[1],s[2],s[3],s[4]);break;case"C":u=Wg.box(l[0],l[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var c=g.arcParams;u=Xg(c.cx,c.cy,c.rx,c.ry,c.xRotation,c.startAngle,c.endAngle);break;default:n.push(a[0]),r.push(a[1])}u&&(g.box=u,n.push(u.x,u.x+u.width),r.push(u.y,u.y+u.height)),e&&("L"===g.command||"M"===g.command)&&g.prePoint&&g.nextPoint&&i.push(g)}n=n.filter((function(t){return!Number.isNaN(t)})),r=r.filter((function(t){return!Number.isNaN(t)}));var d=Ps(n),h=Ps(r),f=Ts(n),p=Ts(r);if(0===i.length)return{x:d,y:h,width:f-d,height:p-h};for(o=0;o<i.length;o++){var g;(a=(g=i[o]).currentPoint)[0]===d?d-=Xnt(g,e).xExtra:a[0]===f&&(f+=Xnt(g,e).xExtra),a[1]===h?h-=Xnt(g,e).yExtra:a[1]===p&&(p+=Xnt(g,e).yExtra)}return{x:d,y:h,width:f-d,height:p-h}}(t.get("segments")||yv(n),r),o=i.x,a=i.y,s={minX:o,minY:a,maxX:o+i.width,maxY:a+i.height};return{x:(s=Wnt(t,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}})),Gnt("line",(function(t){var e=t.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2,a={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,o),maxY:Math.max(r,o)};return{x:(a=Wnt(t,a)).minX,y:a.minY,width:a.maxX-a.minX,height:a.maxY-a.minY}})),Gnt("ellipse",(function(t){var e=t.attr(),n=e.x,r=e.y,i=e.rx,o=e.ry;return{x:n-i,y:r-o,width:2*i,height:2*o}}));var Knt=[1,0,0,0,1,0,0,0,1];function Znt(t,e,n){return void 0===n&&(n=Knt),e?yc(n,[["t",-t.x,-t.y],["r",e],["t",t.x,t.y]]):null}function Qnt(t,e){return t.x||t.y?yc(e||Knt,[["t",t.x,t.y]]):null}function Jnt(t,e){var n=[0,0];return function(t,e,n){var r=e[0],i=e[1];t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7]}(n,e,t),n}function trt(t,e,n,r){if(e){var i=Znt({x:n,y:r},e,t.getMatrix());t.setMatrix(i)}}function ert(t,e,n){var r=Qnt({x:e,y:n});t.attr("matrix",r)}function nrt(t){var e=0,n=0,r=0,i=0;return el(t)?e=n=r=i=t:ms(t)&&(e=t[0],r=vs(t[1])?t[0]:t[1],i=vs(t[2])?t[0]:t[2],n=vs(t[3])?r:t[3]),[e,r,i,n]}function rrt(t){for(var e=t.childNodes,n=e.length-1;n>=0;n--)t.removeChild(e[n])}function irt(t){var e=t.start,n=t.end,r=Math.min(e.x,n.x),i=Math.min(e.y,n.y),o=Math.max(e.x,n.x),a=Math.max(e.y,n.y);return{x:r,y:i,minX:r,minY:i,maxX:o,maxY:a,width:o-r,height:a-i}}function ort(t,e,n,r){var i=t+n,o=e+r;return{x:t,y:e,width:n,height:r,minX:t,minY:e,maxX:isNaN(i)?0:i,maxY:isNaN(o)?0:o}}function art(t,e,n){return(1-n)*t+e*n}function srt(t,e,n){return{x:t.x+Math.cos(n)*e,y:t.y+Math.sin(n)*e}}var lrt=function(t,e,n){return void 0===n&&(n=Math.pow(Number.EPSILON,.5)),[t,e].includes(1/0)?Math.abs(t)===Math.abs(e):Math.abs(t-e)<n};function urt(t){var e,n,r,i,o,a=t.getClip(),s=a&&a.getBBox();if(t.isGroup()){var l=1/0,u=-1/0,c=1/0,d=-1/0,h=t.getChildren();h.length>0?bs(h,(function(t){if(t.get("visible")){if(t.isGroup()&&0===t.get("children").length)return!0;var e=urt(t),n=t.applyToMatrix([e.minX,e.minY,1]),r=t.applyToMatrix([e.minX,e.maxY,1]),i=t.applyToMatrix([e.maxX,e.minY,1]),o=t.applyToMatrix([e.maxX,e.maxY,1]),a=Math.min(n[0],r[0],i[0],o[0]),s=Math.max(n[0],r[0],i[0],o[0]),h=Math.min(n[1],r[1],i[1],o[1]),f=Math.max(n[1],r[1],i[1],o[1]);a<l&&(l=a),s>u&&(u=s),h<c&&(c=h),f>d&&(d=f)}})):(l=0,u=0,c=0,d=0),e=ort(l,c,u-l,d-c)}else e=t.getBBox();return s?(n=e,r=s,i=Math.max(n.minX,r.minX),o=Math.max(n.minY,r.minY),ort(i,o,Math.min(n.maxX,r.maxX)-i,Math.min(n.maxY,r.maxY)-o)):e}function crt(t){return t+"px"}function drt(t,e,n,r){var i,o,a,s,l=r/(i=t,a=(o=e).x-i.x,s=o.y-i.y,Math.sqrt(a*a+s*s)),u=0;return"start"===n?u=0-l:"end"===n&&(u=1+l),{x:art(t.x,e.x,u),y:art(t.y,e.y,u)}}var hrt={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},frt=function(t){function e(e){var n=t.call(this,e)||this;return n.initCfg(),n}return Ka(e,t),e.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},e.prototype.clear=function(){},e.prototype.update=function(t){var e=this,n=this.get("defaultCfg");bs(t,(function(t,r){var i=t;e.get(r)!==t&&(ys(t)&&n[r]&&(i=Rl({},n[r],t)),e.set(r,i))})),this.updateInner(t),this.afterUpdate(t)},e.prototype.updateInner=function(t){},e.prototype.afterUpdate=function(t){dl(t,"visible")&&(t.visible?this.show():this.hide()),dl(t,"capture")&&this.setCapture(t.capture)},e.prototype.getLayoutBBox=function(){return this.getBBox()},e.prototype.getLocationType=function(){return this.get("locationType")},e.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},e.prototype.setOffset=function(t,e){this.update({offsetX:t,offsetY:e})},e.prototype.setLocation=function(t){var e=Za({},t);this.update(e)},e.prototype.getLocation=function(){var t=this,e={},n=this.get("locationType");return bs(hrt[n],(function(n){e[n]=t.get(n)})),e},e.prototype.isList=function(){return!1},e.prototype.isSlider=function(){return!1},e.prototype.init=function(){},e.prototype.initCfg=function(){var t=this;bs(this.get("defaultCfg"),(function(e,n){var r=t.get(n);if(ys(r)){var i=Rl({},e,r);t.set(n,i)}}))},e}(mnt),prt=["visible","tip","delegateObject"],grt=["container","group","shapesMap","isRegister","isUpdating","destroyed"],vrt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},e.prototype.remove=function(){this.clear(),this.get("group").remove()},e.prototype.clear=function(){this.get("group").clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},e.prototype.getChildComponentById=function(t){var e=this.getElementById(t);return e&&e.get("component")},e.prototype.getElementById=function(t){return this.get("shapesMap")[t]},e.prototype.getElementByLocalId=function(t){var e=this.getElementId(t);return this.getElementById(e)},e.prototype.getElementsByName=function(t){var e=[];return bs(this.get("shapesMap"),(function(n){n.get("name")===t&&e.push(n)})),e},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateInner=function(t){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},e.prototype.render=function(){var t=this.get("offScreenGroup");t||(t=this.offScreenRender());var e=this.get("group");this.updateElements(t,e),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},e.prototype.show=function(){this.get("group").show(),this.set("visible",!0)},e.prototype.hide=function(){this.get("group").hide(),this.set("visible",!1)},e.prototype.setCapture=function(t){this.get("group").set("capture",t),this.set("capture",t)},e.prototype.destroy=function(){this.removeEvent(),this.remove(),t.prototype.destroy.call(this)},e.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},e.prototype.getLayoutBBox=function(){var t=this.get("group"),e=this.getInnerLayoutBBox(),n=t.getTotalMatrix();return n&&(e=function(t,e){var n=Jnt(t,[e.minX,e.minY]),r=Jnt(t,[e.maxX,e.minY]),i=Jnt(t,[e.minX,e.maxY]),o=Jnt(t,[e.maxX,e.maxY]),a=Math.min(n[0],r[0],i[0],o[0]),s=Math.max(n[0],r[0],i[0],o[0]),l=Math.min(n[1],r[1],i[1],o[1]),u=Math.max(n[1],r[1],i[1],o[1]);return{x:a,y:l,minX:a,minY:l,maxX:s,maxY:u,width:s-a,height:u-l}}(n,e)),e},e.prototype.on=function(t,e,n){return this.get("group").on(t,e,n),this},e.prototype.off=function(t,e){var n=this.get("group");return n&&n.off(t,e),this},e.prototype.emit=function(t,e){this.get("group").emit(t,e)},e.prototype.init=function(){t.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},e.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},e.prototype.delegateEmit=function(t,e){var n=this.get("group");e.target=n,n.emit(t,e),qnt(n,t,e)},e.prototype.createOffScreenGroup=function(){return new(this.get("group").getGroupBase())({delegateObject:this.getDelegateObject()})},e.prototype.applyOffset=function(){var t=this.get("offsetX"),e=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t,y:e})},e.prototype.initGroup=function(){var t=this.get("container");this.set("group",t.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},e.prototype.offScreenRender=function(){this.clearOffScreenCache();var t=this.createOffScreenGroup();return this.renderInner(t),this.set("offScreenGroup",t),this.set("offScreenBBox",urt(t)),t},e.prototype.addGroup=function(t,e){this.appendDelegateObject(t,e);var n=t.addGroup(e);return this.get("isRegister")&&this.registerElement(n),n},e.prototype.addShape=function(t,e){this.appendDelegateObject(t,e);var n=t.addShape(e);return this.get("isRegister")&&this.registerElement(n),n},e.prototype.addComponent=function(t,e){var n=e.id,r=e.component,i=Qa(e,["id","component"]),o=new r(Za(Za({},i),{id:n,container:t,updateAutoRender:this.get("updateAutoRender")}));return o.init(),o.render(),this.get("isRegister")&&this.registerElement(o.get("group")),o},e.prototype.initEvent=function(){},e.prototype.removeEvent=function(){this.get("group").off()},e.prototype.getElementId=function(t){return this.get("id")+"-"+this.get("name")+"-"+t},e.prototype.registerElement=function(t){var e=t.get("id");this.get("shapesMap")[e]=t},e.prototype.unregisterElement=function(t){var e=t.get("id");delete this.get("shapesMap")[e]},e.prototype.moveElementTo=function(t,e){var n=Qnt(e);t.attr("matrix",n)},e.prototype.addAnimation=function(t,e,n){var r=e.attr("opacity");vs(r)&&(r=1),e.attr("opacity",0),e.animate({opacity:r},n)},e.prototype.removeAnimation=function(t,e,n){e.animate({opacity:0},n)},e.prototype.updateAnimation=function(t,e,n,r){e.animate(n,r)},e.prototype.updateElements=function(t,e){var n,r=this,i=this.get("animate"),o=this.get("animateOption");bs(t.getChildren().slice(0),(function(t){var a=t.get("id"),s=r.getElementById(a),l=t.get("name");if(s)if(t.get("isComponent")){var u=t.get("component"),c=s.get("component"),d=Wl(u.cfg,hs(xs(u.cfg),grt));c.update(d),s.set("update_status","update")}else{var h=r.getReplaceAttrs(s,t);i&&o.update?r.updateAnimation(l,s,h,o.update):s.attr(h),t.isGroup()&&r.updateElements(t,s),bs(prt,(function(e){s.set(e,t.get(e))})),function(t,e){if(t.getClip()||e.getClip()){var n=e.getClip();if(n){var r={type:n.get("type"),attrs:n.attr()};t.setClip(r)}else t.setClip(null)}}(s,t),n=s,s.set("update_status","update")}else{e.add(t);var f=e.getChildren();if(f.splice(f.length-1,1),n){var p=f.indexOf(n);f.splice(p+1,0,t)}else f.unshift(t);if(r.registerElement(t),t.set("update_status","add"),t.get("isComponent"))(u=t.get("component")).set("container",e);else t.isGroup()&&r.registerNewGroup(t);if(n=t,i){var g=r.get("isInit")?o.appear:o.enter;g&&r.addAnimation(l,t,g)}}}))},e.prototype.clearUpdateStatus=function(t){bs(t.getChildren(),(function(t){t.set("update_status",null)}))},e.prototype.clearOffScreenCache=function(){var t=this.get("offScreenGroup");t&&t.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},e.prototype.getDelegateObject=function(){var t;return(t={})[this.get("name")]=this,t.component=this,t},e.prototype.appendDelegateObject=function(t,e){var n=t.get("delegateObject");e.delegateObject||(e.delegateObject={}),Tl(e.delegateObject,n)},e.prototype.getReplaceAttrs=function(t,e){var n=t.attr(),r=e.attr();return bs(n,(function(t,e){void 0===r[e]&&(r[e]=void 0)})),r},e.prototype.registerNewGroup=function(t){var e=this;bs(t.getChildren(),(function(t){e.registerElement(t),t.set("update_status","add"),t.isGroup()&&e.registerNewGroup(t)}))},e.prototype.deleteElements=function(){var t=this,e=this.get("shapesMap"),n=[];bs(e,(function(t,e){!t.get("update_status")||t.destroyed?n.push([e,t]):t.set("update_status",null)}));var r=this.get("animate"),i=this.get("animateOption");bs(n,(function(n){var o=n[0],a=n[1];if(!a.destroyed){var s=a.get("name");if(r&&i.leave){var l=Tl({callback:function(){t.removeElement(a)}},i.leave);t.removeAnimation(s,a,l)}else t.removeElement(a)}delete e[o]}))},e.prototype.removeElement=function(t){if(t.get("isGroup")){var e=t.get("component");e&&e.destroy()}t.remove()},e}(frt);function mrt(t,e){return t.charCodeAt(e)>0&&t.charCodeAt(e)<128?1:2}function yrt(t){if(t.length>400)return function(t){for(var e=t.map((function(t){var e=t.attr("text");return vs(e)?"":""+e})),n=0,r=0,i=0;i<e.length;i+=1){for(var o=0,a=0;a<=e[i].length;a+=1){var s=e[i].charCodeAt(a);o+=s>=19968&&s<=40869?2:1}o>n&&(n=o,r=i)}return t[r].getBBox().width}(t);var e=0;return bs(t,(function(t){var n=t.getBBox().width;e<n&&(e=n)})),e}function brt(t,e,n,r){void 0===r&&(r="tail");var i=e.attr("text"),o=function(t,e){var n=e.getCanvasBBox();return t?n.width:n.height}(t,e),a=function(t){for(var e=0,n=0;n<t.length;n++)e+=mrt(t,n);return e}(i),s=!1;if(n<o){var l=Math.floor(n/o*a)-2,u=void 0;(u=l>=0?function(t,e,n){void 0===n&&(n="tail");var r=t.length,i="";if("tail"===n){for(var o=0,a=0;o<e&&o+mrt(t,a)<=e;)i+=t[a],o+=mrt(t,a),a++;i+="…"}else if("head"===n){for(o=0,a=r-1;o<e&&o+mrt(t,a)<=e;)i+=t[a],o+=mrt(t,a),a--;i="…"+i}else{for(var s="",l="",u=(o=0,0),c=r-1;o<e;){var d=mrt(t,u),h=!1;d+o<=e&&(s+=t[u],u++,o+=d,h=!0);var f=mrt(t,c);if(f+o<=e&&(l=t[c]+l,o+=f,c--,h=!0),!h)break}i=s+"…"+l}return i}(i,l,r):"…")&&(e.attr("text",u),s=!0)}return s?e.set("tip",i):e.set("tip",null),s}function xrt(t,e){var n=e.x,r=e.y,i=e.content,o=e.style,a=e.id,s=e.name,l=e.rotate,u=e.maxLength,c=e.autoEllipsis,d=e.isVertical,h=e.ellipsisPosition,f=e.background,p=t.addGroup({id:a+"-group",name:s+"-group",attrs:{x:n,y:r}}),g=p.addShape({type:"text",id:a,name:s,attrs:Za({x:0,y:0,text:i},o)}),v=nrt(Ul(f,"padding",0));u&&c&&brt(!d,g,u-(v[1]+v[3]),h);if(f){var m=Ul(f,"style",{}),y=g.getCanvasBBox(),b=y.minX,x=y.minY,w=y.width,C=y.height;p.addShape("rect",{id:a+"-bg",name:a+"-bg",attrs:Za({x:b-v[3],y:x-v[0],width:w+v[1]+v[3],height:C+v[0]+v[2]},m)}).toBack()}ert(p,n,r),trt(p,l,n,r)}var wrt={fontFamily:'\n  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",\n  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",\n  SimSun, "sans-serif"',textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4},Crt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:wrt.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:wrt.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:wrt.lineColor,lineWidth:1}}}})},e.prototype.renderInner=function(t){this.renderLine(t),this.get("text")&&this.renderLabel(t)},e.prototype.renderLine=function(t){var e=this.get("start"),n=this.get("end"),r=this.get("style");this.addShape(t,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:Za({x1:e.x,y1:e.y,x2:n.x,y2:n.y},r)})},e.prototype.getLabelPoint=function(t,e,n){var r;return((r="start"===n?0:"center"===n?.5:zs(n)&&-1!==n.indexOf("%")?parseInt(n,10)/100:el(n)?n:1)>1||r<0)&&(r=1),{x:art(t.x,e.x,r),y:art(t.y,e.y,r)}},e.prototype.renderLabel=function(t){var e=this.get("text"),n=this.get("start"),r=this.get("end"),i=e.position,o=e.content,a=e.style,s=e.offsetX,l=e.offsetY,u=e.autoRotate,c=e.maxLength,d=e.autoEllipsis,h=e.ellipsisPosition,f=e.background,p=e.isVertical,g=void 0!==p&&p,v=this.getLabelPoint(n,r,i),m=v.x+s,y=v.y+l,b={id:this.getElementId("line-text"),name:"annotation-line-text",x:m,y:y,content:o,style:a,maxLength:c,autoEllipsis:d,ellipsisPosition:h,background:f,isVertical:g};if(u){var x=[r.x-n.x,r.y-n.y];b.rotate=Math.atan2(x[1],x[0])}xrt(t,b)},e}(vrt),Srt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:wrt.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:wrt.fontFamily}}})},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},e.prototype.renderInner=function(t){var e=this.getLocation(),n=e.x,r=e.y,i=this.get("content"),o=this.get("style");xrt(t,{id:this.getElementId("text"),name:this.get("name")+"-text",x:n,y:r,content:i,style:o,maxLength:this.get("maxLength"),autoEllipsis:this.get("autoEllipsis"),isVertical:this.get("isVertical"),ellipsisPosition:this.get("ellipsisPosition"),background:this.get("background"),rotate:this.get("rotate")})},e.prototype.resetLocation=function(){var t=this.getElementByLocalId("text-group");if(t){var e=this.getLocation(),n=e.x,r=e.y,i=this.get("rotate");ert(t,n,r),trt(t,i,n,r)}},e}(vrt),krt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2,style:{stroke:"#999",lineWidth:1}})},e.prototype.renderInner=function(t){this.renderArc(t)},e.prototype.getArcPath=function(){var t=this.getLocation(),e=t.center,n=t.radius,r=t.startAngle,i=t.endAngle,o=srt(e,n,r),a=srt(e,n,i),s=i-r>Math.PI?1:0,l=[["M",o.x,o.y]];if(i-r==2*Math.PI){var u=srt(e,n,r+Math.PI);l.push(["A",n,n,0,s,1,u.x,u.y]),l.push(["A",n,n,0,s,1,a.x,a.y])}else l.push(["A",n,n,0,s,1,a.x,a.y]);return l},e.prototype.renderArc=function(t){var e=this.getArcPath(),n=this.get("style");this.addShape(t,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:Za({path:e},n)})},e}(vrt),Ert=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:wrt.regionColor,opacity:.4}}})},e.prototype.renderInner=function(t){this.renderRegion(t)},e.prototype.renderRegion=function(t){var e=this.get("start"),n=this.get("end"),r=this.get("style"),i=irt({start:e,end:n});this.addShape(t,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:Za({x:i.x,y:i.y,width:i.width,height:i.height},r)})},e}(vrt),Mrt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},e.prototype.renderInner=function(t){this.renderImage(t)},e.prototype.getImageAttrs=function(){var t=this.get("start"),e=this.get("end"),n=this.get("style"),r=irt({start:t,end:e}),i=this.get("src");return Za({x:r.x,y:r.y,img:i,width:r.width,height:r.height},n)},e.prototype.renderImage=function(t){this.addShape(t,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},e}(vrt),Art=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:wrt.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:wrt.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:wrt.fontFamily}}}})},e.prototype.renderInner=function(t){Ul(this.get("line"),"display")&&this.renderLine(t),Ul(this.get("text"),"display")&&this.renderText(t),Ul(this.get("point"),"display")&&this.renderPoint(t),this.get("autoAdjust")&&this.autoAdjust(t)},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},e.prototype.renderPoint=function(t){var e=this.getShapeAttrs().point;this.addShape(t,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:e})},e.prototype.renderLine=function(t){var e=this.getShapeAttrs().line;this.addShape(t,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:e})},e.prototype.renderText=function(t){var e=this.getShapeAttrs().text,n=e.x,r=e.y,i=e.text,o=Qa(e,["x","y","text"]),a=this.get("text"),s=a.background,l=a.maxLength,u=a.autoEllipsis,c=a.isVertival,d=a.ellipsisPosition;xrt(t,{x:n,y:r,id:this.getElementId("text"),name:"annotation-text",content:i,style:o,background:s,maxLength:l,autoEllipsis:u,isVertival:c,ellipsisPosition:d})},e.prototype.autoAdjust=function(t){var e=this.get("direction"),n=this.get("x"),r=this.get("y"),i=Ul(this.get("line"),"length",0),o=this.get("coordinateBBox"),a=t.getBBox(),s=a.minX,l=a.maxX,u=a.minY,c=a.maxY,d=t.findById(this.getElementId("text-group")),h=t.findById(this.getElementId("text")),f=t.findById(this.getElementId("line"));if(o){if(d){if(n+s<=o.minX){var p=o.minX-(n+s);ert(d,d.attr("x")+p,d.attr("y"))}if(n+l>=o.maxX){p=n+l-o.maxX;ert(d,d.attr("x")-p,d.attr("y"))}}if("upward"===e&&r+u<=o.minY||"upward"!==e&&r+c>=o.maxY){var g=void 0,v=void 0;"upward"===e&&r+u<=o.minY?(g="top",v=1):(g="bottom",v=-1),h.attr("textBaseline",g),f&&f.attr("path",[["M",0,0],["L",0,i*v]]),ert(d,d.attr("x"),(i+2)*v)}}},e.prototype.getShapeAttrs=function(){var t=Ul(this.get("line"),"display"),e=Ul(this.get("point"),"style",{}),n=Ul(this.get("line"),"style",{}),r=Ul(this.get("text"),"style",{}),i=this.get("direction"),o=t?Ul(this.get("line"),"length",0):0,a="upward"===i?-1:1;return{point:Za({x:0,y:0},e),line:Za({path:[["M",0,0],["L",0,o*a]]},n),text:Za({x:0,y:(o+2)*a,text:Ul(this.get("text"),"content",""),textBaseline:"upward"===i?"bottom":"top"},r)}},e}(vrt),_rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:wrt.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:wrt.textColor,fontFamily:wrt.fontFamily}}}})},e.prototype.renderInner=function(t){var e=Ul(this.get("region"),"style",{});Ul(this.get("text"),"style",{});var n=this.get("lineLength")||0,r=this.get("points");if(r.length){var i=function(t){var e=t.map((function(t){return t.x})),n=t.map((function(t){return t.y})),r=Math.min.apply(Math,e),i=Math.min.apply(Math,n),o=Math.max.apply(Math,e),a=Math.max.apply(Math,n);return{x:r,y:i,minX:r,minY:i,maxX:o,maxY:a,width:o-r,height:a-i}}(r),o=[];o.push(["M",r[0].x,i.minY-n]),r.forEach((function(t){o.push(["L",t.x,t.y])})),o.push(["L",r[r.length-1].x,r[r.length-1].y-n]),this.addShape(t,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:Za({path:o},e)}),xrt(t,Za({id:this.getElementId("text"),name:"annotation-text",x:(i.minX+i.maxX)/2,y:i.minY-n},this.get("text")))}},e}(vrt),Trt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},e.prototype.renderInner=function(t){var e=this,n=this.get("start"),r=this.get("end"),i=this.addGroup(t,{id:this.getElementId("region-filter"),capture:!1});bs(this.get("shapes"),(function(t,n){var r=t.get("type"),o=Pl(t.attr());e.adjustShapeAttrs(o),e.addShape(i,{id:e.getElementId("shape-"+r+"-"+n),capture:!1,type:r,attrs:o})}));var o=irt({start:n,end:r});i.setClip({type:"rect",attrs:{x:o.minX,y:o.minY,width:o.width,height:o.height}})},e.prototype.adjustShapeAttrs=function(t){var e=this.get("color");t.fill&&(t.fill=t.fillStyle=e),t.stroke=t.strokeStyle=e},e}(vrt),Prt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"annotation",type:"shape",draw:Zl})},e.prototype.renderInner=function(t){var e=this.get("render");gs(e)&&e(t)},e}(vrt),Irt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.show=function(){this.get("container").style.display="",this.set("visible",!0)},e.prototype.hide=function(){this.get("container").style.display="none",this.set("visible",!1)},e.prototype.setCapture=function(t){var e=t?"auto":"none";this.getContainer().style.pointerEvents=e,this.set("capture",t)},e.prototype.getBBox=function(){var t=this.getContainer();return ort(parseFloat(t.style.left)||0,parseFloat(t.style.top)||0,t.clientWidth,t.clientHeight)},e.prototype.clear=function(){rrt(this.get("container"))},e.prototype.destroy=function(){this.removeEvent(),this.removeDom(),t.prototype.destroy.call(this)},e.prototype.init=function(){t.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},e.prototype.initCapture=function(){this.setCapture(this.get("capture"))},e.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},e.prototype.initDom=function(){},e.prototype.initContainer=function(){var t=this.get("container");if(vs(t)){t=this.createDom();var e=this.get("parent");zs(e)&&(e=document.getElementById(e),this.set("parent",e)),e.appendChild(t),this.set("container",t)}else zs(t)&&(t=document.getElementById(t),this.set("container",t));this.get("parent")||this.set("parent",t.parentNode)},e.prototype.resetStyles=function(){var t=this.get("domStyles"),e=this.get("defaultStyles");t=t?Rl({},e,t):e,this.set("domStyles",t)},e.prototype.applyStyles=function(){var t=this.get("domStyles");if(t){var e=this.getContainer();this.applyChildrenStyles(e,t);var n,r=this.get("containerClassName");if(r&&(n=r,e.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))))mw(e,t[r])}},e.prototype.applyChildrenStyles=function(t,e){bs(e,(function(e,n){bs(t.getElementsByClassName(n),(function(t){mw(t,e)}))}))},e.prototype.applyStyle=function(t,e){mw(e,this.get("domStyles")[t])},e.prototype.createDom=function(){return fw(this.get("containerTpl"))},e.prototype.initEvent=function(){},e.prototype.removeDom=function(){var t=this.get("container");t&&t.parentNode&&t.parentNode.removeChild(t)},e.prototype.removeEvent=function(){},e.prototype.updateInner=function(t){dl(t,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},e.prototype.resetPosition=function(){},e}(frt),Drt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},e.prototype.render=function(){var t=this.getContainer(),e=this.get("html");rrt(t);var n=gs(e)?e(t):e;El(n)?t.appendChild(n):zs(n)&&t.appendChild(fw(n)),this.resetPosition()},e.prototype.resetPosition=function(){var t=this.getContainer(),e=this.getLocation(),n=e.x,r=e.y,i=this.get("alignX"),o=this.get("alignY"),a=this.get("offsetX"),s=this.get("offsetY"),l=vw(t),u=gw(t),c={x:n,y:r};"middle"===i?c.x-=Math.round(l/2):"right"===i&&(c.x-=Math.round(l)),"middle"===o?c.y-=Math.round(u/2):"bottom"===o&&(c.y-=Math.round(u)),a&&(c.x+=a),s&&(c.y+=s),mw(t,{position:"absolute",left:c.x+"px",top:c.y+"px",zIndex:this.get("zIndex")})},e}(Irt),Ort=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Line:Crt,Text:Srt,Arc:krt,Region:Ert,Image:Mrt,DataMarker:Art,DataRegion:_rt,RegionFilter:Trt,Shape:Prt,Html:Drt});function Rrt(t,e,n){var r=e+"Style",i=null;return bs(n,(function(e,n){t[n]&&e[r]&&(i||(i={}),Tl(i,e[r]))})),i}var Lrt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:wrt.lineColor}},tickLine:{style:{lineWidth:1,stroke:wrt.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:wrt.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:wrt.textColor,fontFamily:wrt.fontFamily,fontWeight:"normal"},offset:10},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:wrt.textColor,textBaseline:"middle",fontFamily:wrt.fontFamily,textAlign:"center"}},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:wrt.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},e.prototype.renderInner=function(t){this.get("line")&&this.drawLine(t),this.drawTicks(t),this.get("title")&&this.drawTitle(t)},e.prototype.isList=function(){return!0},e.prototype.getItems=function(){return this.get("ticks")},e.prototype.setItems=function(t){this.update({ticks:t})},e.prototype.updateItem=function(t,e){Tl(t,e),this.clear(),this.render()},e.prototype.clearItems=function(){var t=this.getElementByLocalId("label-group");t&&t.clear()},e.prototype.setItemState=function(t,e,n){t[e]=n,this.updateTickStates(t)},e.prototype.hasState=function(t,e){return!!t[e]},e.prototype.getItemStates=function(t){var e=this.get("tickStates"),n=[];return bs(e,(function(e,r){t[r]&&n.push(r)})),n},e.prototype.clearItemsState=function(t){var e=this;bs(this.getItemsByState(t),(function(n){e.setItemState(n,t,!1)}))},e.prototype.getItemsByState=function(t){var e=this,n=this.getItems();return ds(n,(function(n){return e.hasState(n,t)}))},e.prototype.getSidePoint=function(t,e){var n=this.getSideVector(e,t);return{x:t.x+n[0],y:t.y+n[1]}},e.prototype.getTextAnchor=function(t){var e;return rl(t[0],0)?e="center":t[0]>0?e="start":t[0]<0&&(e="end"),e},e.prototype.getTextBaseline=function(t){var e;return rl(t[1],0)?e="middle":t[1]>0?e="top":t[1]<0&&(e="bottom"),e},e.prototype.processOverlap=function(t){},e.prototype.drawLine=function(t){var e=this.getLinePath(),n=this.get("line");this.addShape(t,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:Tl({path:e},n.style)})},e.prototype.getTickLineItems=function(t){var e=this,n=[],r=this.get("tickLine"),i=r.alignTick,o=r.length,a=1;return t.length>=2&&(a=t[1].value-t[0].value),bs(t,(function(t){var r=t.point;i||(r=e.getTickPoint(t.value-a/2));var s=e.getSidePoint(r,o);n.push({startPoint:r,tickValue:t.value,endPoint:s,tickId:t.id,id:"tickline-"+t.id})})),n},e.prototype.getSubTickLineItems=function(t){var e=[],n=this.get("subTickLine"),r=n.count,i=t.length;if(i>=2)for(var o=0;o<i-1;o++)for(var a=t[o],s=t[o+1],l=0;l<r;l++){var u=(l+1)/(r+1),c=(1-u)*a.tickValue+u*s.tickValue,d=this.getTickPoint(c),h=this.getSidePoint(d,n.length);e.push({startPoint:d,endPoint:h,tickValue:c,id:"sub-"+a.id+"-"+l})}return e},e.prototype.getTickLineAttrs=function(t,e,n,r){var i=this.get(e).style,o={points:[t.startPoint,t.endPoint]},a=Ul(this.get("theme"),["tickLine","style"],{});i=gs(i)?Tl({},a,i(o,n,r)):i;var s=t.startPoint,l=t.endPoint;return Za({x1:s.x,y1:s.y,x2:l.x,y2:l.y},i)},e.prototype.drawTick=function(t,e,n,r,i){this.addShape(e,{type:"line",id:this.getElementId(t.id),name:"axis-"+n,attrs:this.getTickLineAttrs(t,n,r,i)})},e.prototype.drawTickLines=function(t){var e=this,n=this.get("ticks"),r=this.get("subTickLine"),i=this.getTickLineItems(n),o=this.addGroup(t,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),a=this.get("tickLine");if(bs(i,(function(n,r){if(a.displayWithLabel){var s=e.getElementId("label-"+n.tickId);t.findById(s)&&e.drawTick(n,o,"tickLine",r,i)}else e.drawTick(n,o,"tickLine",r,i)})),r){var s=this.getSubTickLineItems(i);bs(s,(function(t,n){e.drawTick(t,o,"subTickLine",n,s)}))}},e.prototype.processTicks=function(){var t=this;bs(this.get("ticks"),(function(e){e.point=t.getTickPoint(e.value),vs(e.id)&&(e.id=e.name)}))},e.prototype.drawTicks=function(t){var e=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(t),this.get("tickLine")&&this.drawTickLines(t),bs(this.get("ticks"),(function(n){e.applyTickStates(n,t)}))},e.prototype.optimizeTicks=function(){var t=this.get("optimize"),e=this.get("ticks");if(t&&t.enable&&t.threshold>0){var n=Ql(e);if(n>t.threshold){var r=Math.ceil(n/t.threshold),i=e.filter((function(t,e){return e%r==0}));this.set("ticks",i),this.set("originalTicks",e)}}},e.prototype.getLabelAttrs=function(t,e,n){var r=this.get("label"),i=r.offset,o=r.rotate,a=r.formatter,s=this.getSidePoint(t.point,i),l=this.getSideVector(i,s),u=a?a(t.name,t,e):t.name,c=r.style;c=gs(c)?Ul(this.get("theme"),["label","style"],{}):c;var d=Tl({x:s.x,y:s.y,text:u,textAlign:this.getTextAnchor(l),textBaseline:this.getTextBaseline(l)},c);return o&&(d.matrix=Znt(s,o)),d},e.prototype.drawLabels=function(t){var e=this,n=this.get("ticks"),r=this.addGroup(t,{name:"axis-label-group",id:this.getElementId("label-group")});bs(n,(function(t,i){e.addShape(r,{type:"text",name:"axis-label",id:e.getElementId("label-"+t.id),attrs:e.getLabelAttrs(t,i,n),delegateObject:{tick:t,item:t,index:i}})})),this.processOverlap(r);var i=r.getChildren(),o=Ul(this.get("theme"),["label","style"],{}),a=this.get("label"),s=a.style,l=a.formatter;if(gs(s)){var u=i.map((function(t){return Ul(t.get("delegateObject"),"tick")}));bs(i,(function(t,e){var n=t.get("delegateObject").tick,r=l?l(n.name,n,e):n.name,i=Tl({},o,s(r,e,u));t.attr(i)}))}},e.prototype.getTitleAttrs=function(){var t=this.get("title"),e=t.style,n=t.position,r=t.offset,i=t.spacing,o=void 0===i?0:i,a=t.autoRotate,s=e.fontSize,l=.5;"start"===n?l=0:"end"===n&&(l=1);var u=this.getTickPoint(l),c=this.getSidePoint(u,r||o+s/2),d=Tl({x:c.x,y:c.y,text:t.text},e),h=t.rotate,f=h;if(vs(h)&&a){f=bc(this.getAxisVector(u),[1,0],!0)}if(f){var p=Znt(c,f);d.matrix=p}return d},e.prototype.drawTitle=function(t){this.addShape(t,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:this.getTitleAttrs()})},e.prototype.applyTickStates=function(t,e){if(this.getItemStates(t).length){var n=this.get("tickStates"),r=this.getElementId("label-"+t.id),i=e.findById(r);if(i){var o=Rrt(t,"label",n);o&&i.attr(o)}var a=this.getElementId("tickline-"+t.id),s=e.findById(a);if(s){var l=Rrt(t,"tickLine",n);l&&s.attr(l)}}},e.prototype.updateTickStates=function(t){var e=this.getItemStates(t),n=this.get("tickStates"),r=this.get("label"),i=this.getElementByLocalId("label-"+t.id),o=this.get("tickLine"),a=this.getElementByLocalId("tickline-"+t.id);if(e.length){if(i){var s=Rrt(t,"label",n);s&&i.attr(s)}if(a){var l=Rrt(t,"tickLine",n);l&&a.attr(l)}}else i&&i.attr(r.style),a&&a.attr(o.style)},e}(vrt);function Brt(t,e,n,r){var i=e.getChildren(),o=!1;return bs(i,(function(e){var i=brt(t,e,n,r);o=o||i})),o}function Frt(t,e,n){return Brt(t,e,n,"tail")}var Nrt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:function(){return Frt},ellipsisHead:function(t,e,n){return Brt(t,e,n,"head")},ellipsisTail:Frt,ellipsisMiddle:function(t,e,n){return Brt(t,e,n,"middle")}});function zrt(t){var e,n;return(function(t){var e=t.attr("matrix");return e&&1!==e[0]}(t)?(e=t.attr("matrix"),ju(n=[0,0,0],[1,0,0],e),Math.atan2(n[1],n[0])):0)%360}function jrt(t,e,n,r){var i=!1,o=zrt(e),a=t?Math.abs(n.attr("y")-e.attr("y")):Math.abs(n.attr("x")-e.attr("x")),s=(t?n.attr("y")>e.attr("y"):n.attr("x")>e.attr("x"))?e.getBBox():n.getBBox();if(t){var l=Math.abs(Math.cos(o));i=lrt(l,0,Math.PI/180)?s.width+r>a:s.height/l+r>a}else{l=Math.abs(Math.sin(o));i=lrt(l,0,Math.PI/180)?s.width+r>a:s.height/l+r>a}return i}function Grt(t,e,n,r){var i=(null==r?void 0:r.minGap)||0,o=e.getChildren().slice().filter((function(t){return t.get("visible")}));if(!o.length)return!1;var a=!1;n&&o.reverse();for(var s=o.length,l=o[0],u=1;u<s;u++){var c=o[u];c.getBBox(),jrt(t,l,c,i)?(c.hide(),a=!0):l=c}return a}function Urt(t,e,n){var r=(null==n?void 0:n.minGap)||0,i=e.getChildren().slice();if(i.length<2)return!1;var o=!1,a=i[0],s=a.getBBox(),l=i[1],u=i.length,c=zrt(a),d=t?Math.abs(l.attr("y")-a.attr("y")):Math.abs(l.attr("x")-a.attr("x")),h=0;if(t){var f=Math.abs(Math.cos(c));if(lrt(f,0,Math.PI/180))h=(yrt(i)+r)/d;else h=(s.height/f+r)/d}else{f=Math.abs(Math.sin(c));if(lrt(f,0,Math.PI/180))h=(yrt(i)+r)/d;else h=(s.height/f+r)/d}if(h>1){h=Math.ceil(h);for(var p=0;p<u;p++)p%h!=0&&(i[p].hide(),o=!0)}return o}function $rt(t,e,n,r){var i=Urt(t,e,r);return Grt(t,e,!1)&&(i=!0),i}var Vrt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:function(){return $rt},reserveFirst:function(t,e,n,r){return Grt(t,e,!1,r)},reserveLast:function(t,e,n,r){return Grt(t,e,!0,r)},reserveBoth:function(t,e,n,r){var i=(null==r?void 0:r.minGap)||0,o=e.getChildren().slice();if(o.length<=2)return!1;for(var a=!1,s=o.length,l=o[0],u=o[s-1],c=l,d=1;d<s-1;d++){var h=o[d];h.getBBox(),jrt(t,c,h,i)?(h.hide(),a=!0):c=h}return jrt(t,c,u,i)&&(c.hide(),a=!0),a},equidistance:$rt,equidistanceWithReverseBoth:function(t,e,n,r){var i=e.getChildren().slice(),o=Urt(t,e,r);if(i.length>2){var a=i[0],s=i[i.length-1];a.get("visible")||(a.show(),Grt(t,e,!1,r)&&(o=!0)),s.get("visible")||(s.show(),Grt(t,e,!0,r)&&(o=!0))}return o}});function Wrt(t,e,n,r){var i=e.getChildren();if(!i.length)return!1;if(!t&&i.length<2)return!1;var o=yrt(i),a=!1;t?a=!!n&&o>n:a=o>Math.abs(i[1].attr("x")-i[0].attr("x"));a&&function(t,e){bs(t,(function(t){var n=Znt({x:t.attr("x"),y:t.attr("y")},e);t.attr("matrix",n)}))}(i,r(n,o));return a}function Hrt(t,e,n,r){return Wrt(t,e,n,(function(){return el(r)?r:t?wrt.verticalAxisRotate:wrt.horizontalAxisRotate}))}var Yrt,Xrt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getDefault:function(){return Hrt},fixedAngle:Hrt,unfixedAngle:function(t,e,n){return Wrt(t,e,n,(function(e,n){if(!e)return t?wrt.verticalAxisRotate:wrt.horizontalAxisRotate;if(t)return-Math.acos(e/n);var r=0;return(e>n||(r=Math.asin(e/n))>Math.PI/4)&&(r=Math.PI/4),r}))}}),qrt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",autoHide:Vrt,autoRotate:Xrt,autoEllipsis:Nrt}),Krt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{type:"line",locationType:"region",start:null,end:null})},e.prototype.getLinePath=function(){var t=this.get("start"),e=this.get("end"),n=[];return n.push(["M",t.x,t.y]),n.push(["L",e.x,e.y]),n},e.prototype.getInnerLayoutBBox=function(){var e=this.get("start"),n=this.get("end"),r=t.prototype.getInnerLayoutBBox.call(this),i=Math.min(e.x,n.x,r.x),o=Math.min(e.y,n.y,r.y),a=Math.max(e.x,n.x,r.maxX),s=Math.max(e.y,n.y,r.maxY);return{x:i,y:o,minX:i,minY:o,maxX:a,maxY:s,width:a-i,height:s-o}},e.prototype.isVertical=function(){var t=this.get("start"),e=this.get("end");return rl(t.x,e.x)},e.prototype.isHorizontal=function(){var t=this.get("start"),e=this.get("end");return rl(t.y,e.y)},e.prototype.getTickPoint=function(t){var e=this.get("start"),n=this.get("end"),r=n.x-e.x,i=n.y-e.y;return{x:e.x+r*t,y:e.y+i*t}},e.prototype.getSideVector=function(t){var e=cc([0,0],this.getAxisVector()),n=this.get("verticalFactor");return sc([0,0],[e[1],-1*e[0]],t*n)},e.prototype.getAxisVector=function(){var t=this.get("start"),e=this.get("end");return[e.x-t.x,e.y-t.y]},e.prototype.processOverlap=function(t){var e=this,n=this.isVertical(),r=this.isHorizontal();if(n||r){var i=this.get("label"),o=this.get("title"),a=this.get("verticalLimitLength"),s=i.offset,l=a,u=0,c=0;if(o&&(u=o.style.fontSize,c=o.spacing),l&&(l=l-s-c-u),bs(this.get("overlapOrder"),(function(n){i[n]&&e.canProcessOverlap(n)&&e.autoProcessOverlap(n,i[n],t,l)})),o&&vs(o.offset)){var d=t.getCanvasBBox(),h=n?d.width:d.height;o.offset=s+h+c+u/2}}},e.prototype.canProcessOverlap=function(t){var e=this.get("label");return"autoRotate"!==t||vs(e.rotate)},e.prototype.autoProcessOverlap=function(t,e,n,r){var i=this,o=this.isVertical(),a=!1,s=qrt[t];if(!0===e)this.get("label"),a=s.getDefault()(o,n,r);else if(gs(e))a=e(o,n,r);else if(ys(e)){var l=e;s[l.type]&&(a=s[l.type](o,n,r,l.cfg))}else s[e]&&(a=s[e](o,n,r));if("autoRotate"===t){if(a){var u=n.getChildren(),c=this.get("verticalFactor");bs(u,(function(t){if("center"===t.attr("textAlign")){var e=c>0?"end":"start";t.attr("textAlign",e)}}))}}else if("autoHide"===t){bs(n.getChildren().slice(0),(function(t){t.get("visible")||(i.get("isRegister")&&i.unregisterElement(t),t.remove())}))}},e}(Lrt),Zrt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},e.prototype.getLinePath=function(){var t=this.get("center"),e=t.x,n=t.y,r=this.get("radius"),i=r,o=this.get("startAngle"),a=this.get("endAngle"),s=[];if(Math.abs(a-o)===2*Math.PI)s=[["M",e,n-i],["A",r,i,0,1,1,e,n+i],["A",r,i,0,1,1,e,n-i],["Z"]];else{var l=this.getCirclePoint(o),u=this.getCirclePoint(a),c=Math.abs(a-o)>Math.PI?1:0,d=o>a?0:1;s=[["M",e,n],["L",l.x,l.y],["A",r,i,0,c,d,u.x,u.y],["L",e,n]]}return s},e.prototype.getTickPoint=function(t){var e=this.get("startAngle"),n=e+(this.get("endAngle")-e)*t;return this.getCirclePoint(n)},e.prototype.getSideVector=function(t,e){var n=this.get("center"),r=[e.x-n.x,e.y-n.y];return sc(r,r,this.get("verticalFactor")*t/uc(r)),r},e.prototype.getAxisVector=function(t){var e=this.get("center"),n=[t.x-e.x,t.y-e.y];return[n[1],-1*n[0]]},e.prototype.getCirclePoint=function(t,e){var n=this.get("center");return e=e||this.get("radius"),{x:n.x+Math.cos(t)*e,y:n.y+Math.sin(t)*e}},e}(Lrt),Qrt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:wrt.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:wrt.textColor,textAlign:"center",textBaseline:"middle",fontFamily:wrt.fontFamily}},textBackground:{padding:5,style:{stroke:wrt.lineColor}}}})},e.prototype.renderInner=function(t){this.get("line")&&this.renderLine(t),this.get("text")&&(this.renderText(t),this.renderBackground(t))},e.prototype.renderText=function(t){var e=this.get("text"),n=e.style,r=e.autoRotate,i=e.content;if(!vs(i)){var o=this.getTextPoint(),a=null;if(r)a=Znt(o,this.getRotateAngle());this.addShape(t,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:Za(Za(Za({},o),{text:i,matrix:a}),n)})}},e.prototype.renderLine=function(t){var e=this.getLinePath(),n=this.get("line").style;this.addShape(t,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:Za({path:e},n)})},e.prototype.renderBackground=function(t){var e=this.getElementId("text"),n=t.findById(e),r=this.get("textBackground");if(r&&n){var i=n.getBBox(),o=nrt(r.padding),a=r.style;this.addShape(t,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:Za({x:i.x-o[3],y:i.y-o[0],width:i.width+o[1]+o[3],height:i.height+o[0]+o[2],matrix:n.attr("matrix")},a)}).toBack()}},e}(vrt),Jrt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{type:"line",locationType:"region",start:null,end:null})},e.prototype.getRotateAngle=function(){var t=this.getLocation(),e=t.start,n=t.end,r=this.get("text").position,i=Math.atan2(n.y-e.y,n.x-e.x);return"start"===r?i-Math.PI/2:i+Math.PI/2},e.prototype.getTextPoint=function(){var t=this.getLocation(),e=t.start,n=t.end,r=this.get("text");return drt(e,n,r.position,r.offset)},e.prototype.getLinePath=function(){var t=this.getLocation(),e=t.start,n=t.end;return[["M",e.x,e.y],["L",n.x,n.y]]},e}(Qrt),tit=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},e.prototype.getRotateAngle=function(){var t=this.getLocation(),e=t.startAngle,n=t.endAngle;return"start"===this.get("text").position?e+Math.PI/2:n-Math.PI/2},e.prototype.getTextPoint=function(){var t=this.get("text"),e=t.position,n=t.offset,r=this.getLocation(),i=r.center,o=r.radius,a=r.startAngle,s=r.endAngle,l="start"===e?a:s,u=this.getRotateAngle()-Math.PI,c=srt(i,o,l),d=Math.cos(u)*n,h=Math.sin(u)*n;return{x:c.x+d,y:c.y+h}},e.prototype.getLinePath=function(){var t=this.getLocation(),e=t.center,n=t.radius,r=t.startAngle,i=t.endAngle,o=null;if(i-r==2*Math.PI){var a=e.x,s=e.y;o=[["M",a,s-n],["A",n,n,0,1,1,a,s+n],["A",n,n,0,1,1,a,s-n],["Z"]]}else{var l=srt(e,n,r),u=srt(e,n,i),c=Math.abs(i-r)>Math.PI?1:0,d=r>i?0:1;o=[["M",l.x,l.y],["A",n,n,0,c,d,u.x,u.y]]}return o},e}(Qrt),eit=((Yrt={})["g2-crosshair"]={position:"relative"},Yrt["g2-crosshair-line"]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},Yrt["g2-crosshair-text"]={position:"absolute",color:wrt.textColor,fontFamily:wrt.fontFamily},Yrt),nit=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="g2-crosshair"></div>',crosshairTpl:'<div class="g2-crosshair-line"></div>',textTpl:'<span class="g2-crosshair-text">{content}</span>',domStyles:null,containerClassName:"g2-crosshair",defaultStyles:eit,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},e.prototype.render=function(){this.resetText(),this.resetPosition()},e.prototype.initCrossHair=function(){var t=this.getContainer(),e=fw(this.get("crosshairTpl"));t.appendChild(e),this.applyStyle("g2-crosshair-line",e),this.set("crosshairEl",e)},e.prototype.getTextPoint=function(){var t=this.getLocation(),e=t.start,n=t.end,r=this.get("text");return drt(e,n,r.position,r.offset)},e.prototype.resetText=function(){var t=this.get("text"),e=this.get("textEl");if(t){var n=t.content;if(!e){var r=this.getContainer();e=fw(gl(this.get("textTpl"),t)),r.appendChild(e),this.applyStyle("g2-crosshair-text",e),this.set("textEl",e)}e.innerHTML=n}else e&&e.remove()},e.prototype.isVertical=function(t,e){return t.x===e.x},e.prototype.resetPosition=function(){var t=this.get("crosshairEl");t||(this.initCrossHair(),t=this.get("crosshairEl"));var e=this.get("start"),n=this.get("end"),r=Math.min(e.x,n.x),i=Math.min(e.y,n.y);this.isVertical(e,n)?mw(t,{width:"1px",height:crt(Math.abs(n.y-e.y))}):mw(t,{height:"1px",width:crt(Math.abs(n.x-e.x))}),mw(t,{top:crt(i),left:crt(r)}),this.alignText()},e.prototype.alignText=function(){var t=this.get("textEl");if(t){var e=this.get("text").align,n=t.clientWidth,r=this.getTextPoint();switch(e){case"center":r.x=r.x-n/2;break;case"right":r.x=r.x-n}mw(t,{top:crt(r.y),left:crt(r.x)})}},e.prototype.updateInner=function(e){dl(e,"text")&&this.resetText(),t.prototype.updateInner.call(this,e)},e}(Irt),rit=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Line:Jrt,Circle:tit,Base:Qrt,Html:nit}),iit=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:wrt.lineColor}}}})},e.prototype.getLineType=function(){return(this.get("line")||this.get("defaultCfg").line).type},e.prototype.renderInner=function(t){this.drawGrid(t)},e.prototype.getAlternatePath=function(t,e){var n=this.getGridPath(t),r=e.slice(0).reverse(),i=this.getGridPath(r,!0);return this.get("closed")?n=n.concat(i):(i[0][0]="L",(n=n.concat(i)).push(["Z"])),n},e.prototype.getPathStyle=function(){return this.get("line").style},e.prototype.drawGrid=function(t){var e=this,n=this.get("line"),r=this.get("items"),i=this.get("alternateColor"),o=null;bs(r,(function(a,s){var l=a.id||s;if(n){var u=e.getPathStyle();u=gs(u)?u(a,s,r):u;var c=e.getElementId("line-"+l),d=e.getGridPath(a.points);e.addShape(t,{type:"path",name:"grid-line",id:c,attrs:Tl({path:d},u)})}if(i&&s>0){var h=e.getElementId("region-"+l),f=s%2==0;if(zs(i))f&&e.drawAlternateRegion(h,t,o.points,a.points,i);else{var p=f?i[1]:i[0];e.drawAlternateRegion(h,t,o.points,a.points,p)}}o=a}))},e.prototype.drawAlternateRegion=function(t,e,n,r,i){var o=this.getAlternatePath(n,r);this.addShape(e,{type:"path",id:t,name:"grid-region",attrs:{path:o,fill:i}})},e}(vrt);var oit,ait=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{type:"circle",center:null,closed:!0})},e.prototype.getGridPath=function(t,e){var n,r,i,o,a,s,l=this.getLineType(),u=this.get("closed"),c=[];if(t.length)if("circle"===l){var d=this.get("center"),h=t[0],f=(n=d.x,r=d.y,i=h.x,o=h.y,a=i-n,s=o-r,Math.sqrt(a*a+s*s)),p=e?0:1;u?(c.push(["M",d.x,d.y-f]),c.push(["A",f,f,0,0,p,d.x,d.y+f]),c.push(["A",f,f,0,0,p,d.x,d.y-f]),c.push(["Z"])):bs(t,(function(t,e){0===e?c.push(["M",t.x,t.y]):c.push(["A",f,f,0,0,p,t.x,t.y])}))}else bs(t,(function(t,e){0===e?c.push(["M",t.x,t.y]):c.push(["L",t.x,t.y])})),u&&c.push(["Z"]);return c},e}(iit),sit=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{type:"line"})},e.prototype.getGridPath=function(t){var e=[];return bs(t,(function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e},e}(iit),lit=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},e.prototype.getLayoutBBox=function(){var e=t.prototype.getLayoutBBox.call(this),n=this.get("maxWidth"),r=this.get("maxHeight"),i=e.width,o=e.height;return n&&(i=Math.min(i,n)),r&&(o=Math.min(o,r)),ort(e.minX,e.minY,i,o)},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},e.prototype.resetLocation=function(){var t=this.get("x"),e=this.get("y"),n=this.get("offsetX"),r=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t+n,y:e+r})},e.prototype.applyOffset=function(){this.resetLocation()},e.prototype.getDrawPoint=function(){return this.get("currentPoint")},e.prototype.setDrawPoint=function(t){return this.set("currentPoint",t)},e.prototype.renderInner=function(t){this.resetDraw(),this.get("title")&&this.drawTitle(t),this.drawLegendContent(t),this.get("background")&&this.drawBackground(t)},e.prototype.drawBackground=function(t){var e=this.get("background"),n=t.getBBox(),r=nrt(e.padding),i=Za({x:0,y:0,width:n.width+r[1]+r[3],height:n.height+r[0]+r[2]},e.style);this.addShape(t,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:i}).toBack()},e.prototype.drawTitle=function(t){var e=this.get("currentPoint"),n=this.get("title"),r=n.spacing,i=n.style,o=n.text,a=this.addShape(t,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:Za({text:o,x:e.x,y:e.y},i)}).getBBox();this.set("currentPoint",{x:e.x,y:a.maxY+r})},e.prototype.resetDraw=function(){var t=this.get("background"),e={x:0,y:0};if(t){var n=nrt(t.padding);e.x=n[3],e.y=n[0]}this.set("currentPoint",e)},e}(vrt),uit={marker:{style:{inactiveFill:"#000",inactiveOpacity:.45,fill:"#000",opacity:1,size:12}},text:{style:{fill:"#ccc",fontSize:12}}},cit={fill:wrt.textColor,fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:wrt.fontFamily,fontWeight:"normal",lineHeight:12},dit=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentPageIndex=1,e.totalPagesCnt=1,e.pageWidth=0,e.pageHeight=0,e.startX=0,e.startY=0,e.onNavigationBack=function(){var t=e.getElementByLocalId("item-group");if(e.currentPageIndex>1){e.currentPageIndex-=1,e.updateNavigation();var n=e.getCurrentNavigationMatrix();e.get("animate")?t.animate({matrix:n},100):t.attr({matrix:n})}},e.onNavigationAfter=function(){var t=e.getElementByLocalId("item-group");if(e.currentPageIndex<e.totalPagesCnt){e.currentPageIndex+=1,e.updateNavigation();var n=e.getCurrentNavigationMatrix();e.get("animate")?t.animate({matrix:n},100):t.attr({matrix:n})}},e}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:wrt.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:wrt.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},pageNavigator:uit,itemName:{spacing:16,style:cit},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:cit},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:wrt.uncheckedColor},markerStyle:{fill:wrt.uncheckedColor,stroke:wrt.uncheckedColor}},inactive:{nameStyle:{fill:wrt.uncheckedColor},markerStyle:{opacity:.2}}}}})},e.prototype.isList=function(){return!0},e.prototype.getItems=function(){return this.get("items")},e.prototype.setItems=function(t){this.update({items:t})},e.prototype.updateItem=function(t,e){Tl(t,e),this.clear(),this.render()},e.prototype.clearItems=function(){var t=this.getElementByLocalId("item-group");t&&t.clear()},e.prototype.setItemState=function(t,e,n){t[e]=n;var r=this.getElementByLocalId("item-"+t.id);if(r){var i=this.getItems().indexOf(t),o=this.createOffScreenGroup(),a=this.drawItem(t,i,this.getItemHeight(),o);this.updateElements(a,r),this.clearUpdateStatus(r)}},e.prototype.hasState=function(t,e){return!!t[e]},e.prototype.getItemStates=function(t){var e=this.get("itemStates"),n=[];return bs(e,(function(e,r){t[r]&&n.push(r)})),n},e.prototype.clearItemsState=function(t){var e=this;bs(this.getItemsByState(t),(function(n){e.setItemState(n,t,!1)}))},e.prototype.getItemsByState=function(t){var e=this,n=this.getItems();return ds(n,(function(n){return e.hasState(n,t)}))},e.prototype.drawLegendContent=function(t){this.processItems(),this.drawItems(t)},e.prototype.processItems=function(){bs(this.get("items"),(function(t){t.id||(t.id=t.name)}))},e.prototype.drawItems=function(t){var e=this,n=this.addGroup(t,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),r=this.addGroup(n,{id:this.getElementId("item-group"),name:"legend-item-group"}),i=this.getItemHeight(),o=this.get("itemWidth"),a=this.get("itemSpacing"),s=this.get("itemMarginBottom"),l=this.get("currentPoint"),u=l.x,c=l.y,d=this.get("layout"),h=this.get("items"),f=!1,p=0,g=this.get("maxWidth"),v=this.get("maxHeight");bs(h,(function(t,n){var h=e.drawItem(t,n,i,r),m=h.getBBox(),y=o||m.width;y>p&&(p=y),"horizontal"===d?(g&&g<l.x+y-u&&(f=!0,l.x=u,l.y+=i+s),e.moveElementTo(h,l),l.x+=y+a):(v&&v<l.y+i+s-c&&(f=!0,l.x+=p+a,l.y=c,p=0),e.moveElementTo(h,l),l.y+=i+s)})),f&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=u,this.startY=c,this.adjustNavigation(t,r))},e.prototype.getItemHeight=function(){var t=this.get("itemHeight");if(!t){var e=(this.get("itemName")||{}).style;if(gs(e)){var n=this.getItems();n.forEach((function(r,i){var o=Za(Za({},cit),e(r,i,n)).fontSize;t<o&&(t=o)}))}else e&&(t=e.fontSize)}return t},e.prototype.drawMarker=function(t,e,n,r){var i=Za(Za(Za({x:0,y:r/2},e.style),{symbol:Ul(n.marker,"symbol","circle")}),Ul(n.marker,"style",{})),o=this.addShape(t,{type:"marker",id:this.getElementId("item-"+n.id+"-marker"),name:"legend-item-marker",attrs:i}),a=o.getBBox();o.attr("x",a.width/2);var s=o.attr(),l=s.stroke,u=s.fill;return l&&o.set("isStroke",!0),u&&o.set("isFill",!0),o},e.prototype.drawItemText=function(t,e,n,r,i,o,a){var s=n.formatter,l=n.style,u=Za(Za({x:o,y:i/2,text:s?s(r[e],r,a):r[e]},cit),gs(l)?l(r,a,this.getItems()):l);return this.addShape(t,{type:"text",id:this.getElementId("item-"+r.id+"-"+e),name:"legend-item-"+e,attrs:u})},e.prototype.drawItem=function(t,e,n,r){var i="item-"+t.id,o=this.addGroup(r,{name:"legend-item-container",id:this.getElementId("item-container-"+i),delegateObject:{item:t,index:e}}),a=this.addGroup(o,{name:"legend-item",id:this.getElementId(i),delegateObject:{item:t,index:e}}),s=this.get("marker"),l=this.get("itemName"),u=this.get("itemValue"),c=this.get("itemBackground"),d=this.getLimitItemWidth(),h=0;if(s){var f=this.drawMarker(a,s,t,n),p=s.spacing,g=Ul(t,["marker","spacing"]);el(g)&&(p=g),h=f.getBBox().maxX+p}if(l){var v=this.drawItemText(a,"name",l,t,n,h,e);d&&brt(!0,v,Js(d-h,0,d)),h=v.getBBox().maxX+l.spacing}if(u){var m=this.drawItemText(a,"value",u,t,n,h,e);d&&(u.alignRight?(m.attr({textAlign:"right",x:d}),brt(!0,m,Js(d-h,0,d),"head")):brt(!0,m,Js(d-h,0,d)))}if(c){var y=a.getBBox();this.addShape(a,{type:"rect",name:"legend-item-background",id:this.getElementId(i+"-background"),attrs:Za({x:0,y:0,width:y.width,height:n},c.style)}).toBack()}return this.applyItemStates(t,a),a},e.prototype.adjustNavigation=function(t,e){var n=this,r=this.startX,i=this.startY,o=this.get("layout"),a=e.findAll((function(t){return"legend-item"===t.get("name")})),s=this.get("maxWidth"),l=this.get("maxHeight"),u=this.get("itemWidth"),c=this.get("itemSpacing"),d=this.getItemHeight(),h=Rl({},uit,this.get("pageNavigator")),f=this.drawNavigation(t,o,"00/00",h),p=f.getBBox(),g={x:r,y:i},v=1,m=0,y=0,b=0,x=this.get("itemMarginBottom");if("horizontal"===o){var w=this.get("maxRow")||1,C=d+(1===w?0:x);this.pageHeight=C*w,bs(a,(function(t){var e=t.getBBox(),i=u||e.width;(m&&m<g.x+i+c||s<g.x+i+c+p.width)&&(1===v&&(m=g.x+c,n.pageWidth=m,n.moveElementTo(f,{x:s-c-p.width-p.minX,y:g.y+d/2-p.height/2-p.minY})),v+=1,g.x=r,g.y+=C),n.moveElementTo(t,g),t.getParent().setClip({type:"rect",attrs:{x:g.x,y:g.y,width:i+c,height:d}}),g.x+=i+c}))}else{bs(a,(function(t){var e=t.getBBox();e.width>y&&(y=e.width)})),b=y,y+=c,s&&(y=Math.min(s,y),b=Math.min(s,b)),this.pageWidth=y,this.pageHeight=l-Math.max(p.height,d+x);var S=Math.floor(this.pageHeight/(d+x));bs(a,(function(t,e){0!==e&&e%S==0&&(v+=1,g.x+=y,g.y=i),n.moveElementTo(t,g),t.getParent().setClip({type:"rect",attrs:{x:g.x,y:g.y,width:y,height:d}}),g.y+=d+x})),this.totalPagesCnt=v,this.moveElementTo(f,{x:r+b/2-p.width/2-p.minX,y:l-p.height-p.minY})}this.pageHeight&&this.pageWidth&&e.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),"horizontal"===o&&this.get("maxRow")?this.totalPagesCnt=Math.ceil(v/this.get("maxRow")):this.totalPagesCnt=v,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(f),e.attr("matrix",this.getCurrentNavigationMatrix())},e.prototype.drawNavigation=function(t,e,n,r){var i={x:0,y:0},o=this.addGroup(t,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),a=Ul(r.marker,"style",{}),s=a.size,l=void 0===s?12:s,u=Qa(a,["size"]),c=this.drawArrow(o,i,"navigation-arrow-left","horizontal"===e?"up":"left",l,u);c.on("click",this.onNavigationBack);var d=c.getBBox();i.x+=d.width+2;var h=this.addShape(o,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:Za({x:i.x,y:i.y+l/2,text:n,textBaseline:"middle"},Ul(r.text,"style"))}).getBBox();return i.x+=h.width+2,this.drawArrow(o,i,"navigation-arrow-right","horizontal"===e?"down":"right",l,u).on("click",this.onNavigationAfter),o},e.prototype.updateNavigation=function(t){var e=Rl({},uit,this.get("pageNavigator")).marker.style,n=e.fill,r=e.opacity,i=e.inactiveFill,o=e.inactiveOpacity,a=this.currentPageIndex+"/"+this.totalPagesCnt,s=t?t.getChildren()[1]:this.getElementByLocalId("navigation-text"),l=t?t.findById(this.getElementId("navigation-arrow-left")):this.getElementByLocalId("navigation-arrow-left"),u=t?t.findById(this.getElementId("navigation-arrow-right")):this.getElementByLocalId("navigation-arrow-right"),c=s.getBBox();s.attr("text",a);var d=s.getBBox();s.attr("x",s.attr("x")-(d.width-c.width)/2),l.attr("opacity",1===this.currentPageIndex?o:r),l.attr("fill",1===this.currentPageIndex?i:n),l.attr("cursor",1===this.currentPageIndex?"not-allowed":"pointer"),u.attr("opacity",this.currentPageIndex===this.totalPagesCnt?o:r),u.attr("fill",this.currentPageIndex===this.totalPagesCnt?i:n),u.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer")},e.prototype.drawArrow=function(t,e,n,r,i,o){var a=e.x,s=e.y,l={right:90*Math.PI/180,left:270*Math.PI/180,up:0,down:180*Math.PI/180},u=this.addShape(t,{type:"path",id:this.getElementId(n),name:n,attrs:Za({path:[["M",a+i/2,s],["L",a,s+i],["L",a+i,s+i],["Z"]],cursor:"pointer"},o)});return u.attr("matrix",Znt({x:a+i/2,y:s+i/2},l[r])),u},e.prototype.getCurrentNavigationMatrix=function(){var t=this,e=t.currentPageIndex,n=t.pageWidth,r=t.pageHeight;return Qnt("horizontal"===this.get("layout")?{x:0,y:r*(1-e)}:{x:n*(1-e),y:0})},e.prototype.applyItemStates=function(t,e){if(this.getItemStates(t).length>0){var n=e.getChildren(),r=this.get("itemStates");bs(n,(function(e){var n=e.get("name").split("-")[2],i=Rrt(t,n,r);i&&(e.attr(i),"marker"!==n||e.get("isStroke")&&e.get("isFill")||(e.get("isStroke")&&e.attr("fill",null),e.get("isFill")&&e.attr("stroke",null)))}))}},e.prototype.getLimitItemWidth=function(){var t=this.get("itemWidth"),e=this.get("maxItemWidth");return e?t&&(e=t<=e?t:e):t&&(e=t),e},e}(lit),hit=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:wrt.textColor,textBaseline:"middle",fontFamily:wrt.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:wrt.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},e.prototype.isSlider=function(){return!0},e.prototype.getValue=function(){return this.getCurrentValue()},e.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},e.prototype.setRange=function(t,e){this.update({min:t,max:e})},e.prototype.setValue=function(t){var e=this.getValue();this.set("value",t);var n=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(n),this.delegateEmit("valuechanged",{originValue:e,value:t})},e.prototype.initEvent=function(){var t=this.get("group");this.bindSliderEvent(t),this.bindRailEvent(t),this.bindTrackEvent(t)},e.prototype.drawLegendContent=function(t){this.drawRail(t),this.drawLabels(t),this.fixedElements(t),this.resetTrack(t),this.resetTrackClip(t),this.get("slidable")&&this.resetHandlers(t)},e.prototype.bindSliderEvent=function(t){this.bindHandlersEvent(t)},e.prototype.bindHandlersEvent=function(t){var e=this;t.on("legend-handler-min:drag",(function(t){var n=e.getValueByCanvasPoint(t.x,t.y),r=e.getCurrentValue()[1];r<n&&(r=n),e.setValue([n,r])})),t.on("legend-handler-max:drag",(function(t){var n=e.getValueByCanvasPoint(t.x,t.y),r=e.getCurrentValue()[0];r>n&&(r=n),e.setValue([r,n])}))},e.prototype.bindRailEvent=function(t){},e.prototype.bindTrackEvent=function(t){var e=this,n=null;t.on("legend-track:dragstart",(function(t){n={x:t.x,y:t.y}})),t.on("legend-track:drag",(function(t){if(n){var r=e.getValueByCanvasPoint(n.x,n.y),i=e.getValueByCanvasPoint(t.x,t.y),o=e.getCurrentValue(),a=o[1]-o[0],s=e.getRange(),l=i-r;l<0?o[0]+l>s.min?e.setValue([o[0]+l,o[1]+l]):e.setValue([s.min,s.min+a]):l>0&&(l>0&&o[1]+l<s.max?e.setValue([o[0]+l,o[1]+l]):e.setValue([s.max-a,s.max])),n={x:t.x,y:t.y}}})),t.on("legend-track:dragend",(function(t){n=null}))},e.prototype.drawLabels=function(t){this.drawLabel("min",t),this.drawLabel("max",t)},e.prototype.drawLabel=function(t,e){var n=this.get("label"),r=n.style,i=n.align,o=n.formatter,a=this.get(t),s=this.getLabelAlignAttrs(t,i),l="label-"+t;this.addShape(e,{type:"text",id:this.getElementId(l),name:"legend-label-"+t,attrs:Za(Za({x:0,y:0,text:gs(o)?o(a):a},r),s)})},e.prototype.getLabelAlignAttrs=function(t,e){var n="center",r="middle";return this.isVertical()?(n="start",r="rail"!==e?"min"===t?"top":"bottom":"top"):"rail"!==e?(r="top",n="min"===t?"start":"end"):(n="start",r="middle"),{textAlign:n,textBaseline:r}},e.prototype.getRailPath=function(t,e,n,r){var i=this.get("rail"),o=i.size,a=i.defaultLength,s=i.type,l=this.isVertical(),u=n,c=r;u||(u=l?o:a),c||(c=l?a:o);var d=[];return"color"===s?(d.push(["M",t,e]),d.push(["L",t+u,e]),d.push(["L",t+u,e+c]),d.push(["L",t,e+c]),d.push(["Z"])):(d.push(["M",t+u,e]),d.push(["L",t+u,e+c]),d.push(["L",t,e+c]),d.push(["Z"])),d},e.prototype.drawRail=function(t){var e=this.get("rail").style;this.addShape(t,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:Za({path:this.getRailPath(0,0)},e)})},e.prototype.getTrackColor=function(t){var e,n=t.length;if(!n)return null;if(1===n)return t[0];e=this.isVertical()?"l(90)":"l(0)";for(var r=0;r<n;r++){e+=" "+r/(n-1)+":"+t[r]}return e},e.prototype.getTrackPath=function(t){var e=this.getRailShape(t).attr("path");return Pl(e)},e.prototype.getClipTrackAttrs=function(t){var e,n,r,i,o=this.getCurrentValue(),a=o[0],s=o[1],l=this.getRailBBox(t),u=this.getPointByValue(a,t),c=this.getPointByValue(s,t);return this.isVertical()?(e=l.minX,n=u.y,r=l.width,i=c.y-u.y):(e=u.x,n=l.minY,r=c.x-u.x,i=l.height),{x:e,y:n,width:r,height:i}},e.prototype.getTrackAttrs=function(t){var e=this.get("track"),n=this.get("colors");return Tl({path:this.getTrackPath(t),fill:this.getTrackColor(n)},e.style)},e.prototype.resetTrackClip=function(t){var e=t||this.get("group"),n=this.getElementId("track"),r=e.findById(n),i=r.getClip(),o=this.getClipTrackAttrs(t);i?i.attr(o):r.setClip({type:"rect",attrs:o})},e.prototype.resetTrack=function(t){var e=this.getElementId("track"),n=t.findById(e),r=this.getTrackAttrs(t);n?n.attr(r):this.addShape(t,{type:"path",id:e,draggable:this.get("slidable"),name:"legend-track",attrs:r})},e.prototype.getPointByValue=function(t,e){var n=this.getRange(),r=n.min,i=(t-r)/(n.max-r),o=this.getRailBBox(e),a={x:0,y:0};return this.isVertical()?(a.x=o.minX+o.width/2,a.y=art(o.minY,o.maxY,i)):(a.x=art(o.minX,o.maxX,i),a.y=o.minY+o.height/2),a},e.prototype.getRailShape=function(t){return(t||this.get("group")).findById(this.getElementId("rail"))},e.prototype.getRailBBox=function(t){return this.getRailShape(t).getBBox()},e.prototype.getRailCanvasBBox=function(){return this.get("group").findById(this.getElementId("rail")).getCanvasBBox()},e.prototype.isVertical=function(){return"vertical"===this.get("layout")},e.prototype.getValueByCanvasPoint=function(t,e){var n=this.getRange(),r=n.min,i=n.max,o=this.getRailCanvasBBox(),a=this.isVertical(),s=this.get("step"),l=art(r,i,a?(e-o.minY)/o.height:(t-o.minX)/o.width);s&&(l=r+Math.round((l-r)/s)*s);return l>i&&(l=i),l<r&&(l=r),l},e.prototype.getCurrentValue=function(){var t=this.get("value");if(!t){var e=this.get("values");return e?[Math.max(Math.min.apply(Math,is(e,[this.get("max")])),this.get("min")),Math.min(Math.max.apply(Math,is(e,[this.get("min")])),this.get("max"))]:[this.get("min"),this.get("max")]}return t},e.prototype.resetHandlers=function(t){var e=this.getCurrentValue(),n=e[0],r=e[1];this.resetHandler(t,"min",n),this.resetHandler(t,"max",r)},e.prototype.getHandlerPath=function(t,e){var n=this.isVertical(),r=[],i=t.size,o=e.x,a=e.y,s=1.4*i,l=i/2,u=i/6;if(n){var c=o+.4*s;r.push(["M",o,a]),r.push(["L",c,a+l]),r.push(["L",o+s,a+l]),r.push(["L",o+s,a-l]),r.push(["L",c,a-l]),r.push(["Z"]),r.push(["M",c,a+u]),r.push(["L",o+s-2,a+u]),r.push(["M",c,a-u]),r.push(["L",o+s-2,a-u])}else{var d=a+.4*s;r.push(["M",o,a]),r.push(["L",o-l,d]),r.push(["L",o-l,a+s]),r.push(["L",o+l,a+s]),r.push(["L",o+l,d]),r.push(["Z"]),r.push(["M",o-u,d]),r.push(["L",o-u,a+s-2]),r.push(["M",o+u,d]),r.push(["L",o+u,a+s-2])}return r},e.prototype.resetHandler=function(t,e,n){var r=this.getPointByValue(n,t),i=this.get("handler"),o=this.getHandlerPath(i,r),a=this.getElementId("handler-"+e),s=t.findById(a),l=this.isVertical();s?s.attr("path",o):this.addShape(t,{type:"path",name:"legend-handler-"+e,draggable:!0,id:a,attrs:Za(Za({path:o},i.style),{cursor:l?"ns-resize":"ew-resize"})})},e.prototype.fixedElements=function(t){var e=t.findById(this.getElementId("rail")),n=t.findById(this.getElementId("label-min")),r=t.findById(this.getElementId("label-max")),i=this.getDrawPoint();this.isVertical()?this.fixedVertail(n,r,e,i):this.fixedHorizontal(n,r,e,i)},e.prototype.fitRailLength=function(t,e,n,r){var i=this.isVertical()?"height":"width",o=this.get("label"),a=o.align,s=o.spacing,l=this.get("max"+vl(i));if(l){var u=("rail"===a?n[i]+t[i]+e[i]+2*s:n[i])-l;u>0&&this.changeRailLength(r,i,n[i]-u)}},e.prototype.changeRailLength=function(t,e,n){var r,i=t.getBBox();r="height"===e?this.getRailPath(i.x,i.y,i.width,n):this.getRailPath(i.x,i.y,n,i.height),t.attr("path",r)},e.prototype.changeRailPosition=function(t,e,n){var r=t.getBBox(),i=this.getRailPath(e,n,r.width,r.height);t.attr("path",i)},e.prototype.fixedHorizontal=function(t,e,n,r){var i=this.get("label"),o=i.align,a=i.spacing,s=n.getBBox(),l=t.getBBox(),u=e.getBBox(),c=s.height;this.fitRailLength(l,u,s,n),s=n.getBBox(),"rail"===o?(t.attr({x:r.x,y:r.y+c/2}),this.changeRailPosition(n,r.x+l.width+a,r.y),e.attr({x:r.x+l.width+s.width+2*a,y:r.y+c/2})):"top"===o?(t.attr({x:r.x,y:r.y}),e.attr({x:r.x+s.width,y:r.y}),this.changeRailPosition(n,r.x,r.y+l.height+a)):(this.changeRailPosition(n,r.x,r.y),t.attr({x:r.x,y:r.y+s.height+a}),e.attr({x:r.x+s.width,y:r.y+s.height+a}))},e.prototype.fixedVertail=function(t,e,n,r){var i=this.get("label"),o=i.align,a=i.spacing,s=n.getBBox(),l=t.getBBox(),u=e.getBBox();if(this.fitRailLength(l,u,s,n),s=n.getBBox(),"rail"===o)t.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x,r.y+l.height+a),e.attr({x:r.x,y:r.y+l.height+s.height+2*a});else if("right"===o)t.attr({x:r.x+s.width+a,y:r.y}),this.changeRailPosition(n,r.x,r.y),e.attr({x:r.x+s.width+a,y:r.y+s.height});else{var c=Math.max(l.width,u.width);t.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x+c+a,r.y),e.attr({x:r.x,y:r.y+s.height})}},e}(lit),fit="g2-tooltip-title",pit="g2-tooltip-list",git="g2-tooltip-crosshair-x",vit="g2-tooltip-crosshair-y",mit=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",CONTAINER_CLASS:"g2-tooltip",TITLE_CLASS:fit,LIST_CLASS:pit,LIST_ITEM_CLASS:"g2-tooltip-list-item",MARKER_CLASS:"g2-tooltip-marker",VALUE_CLASS:"g2-tooltip-value",NAME_CLASS:"g2-tooltip-name",CROSSHAIR_X:git,CROSSHAIR_Y:vit}),yit=((oit={})["g2-tooltip"]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:wrt.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},oit[""+fit]={marginBottom:"4px"},oit[""+pit]={margin:"0px",listStyleType:"none",padding:"0px"},oit["g2-tooltip-list-item"]={listStyleType:"none",marginBottom:"4px"},oit["g2-tooltip-marker"]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},oit["g2-tooltip-value"]={display:"inline-block",float:"right",marginLeft:"30px"},oit[""+git]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},oit[""+vit]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},oit);var bit=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="g2-tooltip"><div class="'+fit+'"></div><ul class="'+pit+'"></ul></div>',itemTpl:'<li class="g2-tooltip-list-item" data-index={index}>\n          <span class="g2-tooltip-marker" style="background:{color}"></span>\n          <span class="g2-tooltip-name">{name}</span>:\n          <span class="g2-tooltip-value">{value}</span>\n        </li>',xCrosshairTpl:'<div class="'+git+'"></div>',yCrosshairTpl:'<div class="'+vit+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:"g2-tooltip",crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:yit})},e.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},e.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},e.prototype.show=function(){var t=this.getContainer();t&&!this.destroyed&&(this.set("visible",!0),mw(t,{visibility:"visible"}),this.setCrossHairsVisible(!0))},e.prototype.hide=function(){var t=this.getContainer();t&&!this.destroyed&&(this.set("visible",!1),mw(t,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},e.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetPosition()},e.prototype.setCrossHairsVisible=function(t){var e=t?"":"none",n=this.get("xCrosshairDom"),r=this.get("yCrosshairDom");n&&mw(n,{display:e}),r&&mw(r,{display:e})},e.prototype.initContainer=function(){if(t.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var e=this.getHtmlContentNode();this.get("parent").appendChild(e),this.set("container",e),this.resetStyles(),this.applyStyles()}},e.prototype.updateInner=function(e){var n,r;this.get("customContent")?this.renderCustomContent():(n=e,r=!1,bs(["title","showTitle"],(function(t){if(dl(n,t))return r=!0,!1})),r&&this.resetTitle(),dl(e,"items")&&this.renderItems()),t.prototype.updateInner.call(this,e)},e.prototype.initDom=function(){this.cacheDoms()},e.prototype.removeDom=function(){t.prototype.removeDom.call(this),this.clearCrosshairs()},e.prototype.resetPosition=function(){var t,e=this.get("x"),n=this.get("y"),r=this.get("offset"),i=this.getOffset(),o=i.offsetX,a=i.offsetY,s=this.get("position"),l=this.get("region"),u=this.getContainer(),c=this.getBBox(),d=c.width,h=c.height;l&&(t=irt(l));var f=function(t,e,n,r,i,o,a){var s=function(t,e,n,r,i,o){var a=t,s=e;switch(o){case"left":a=t-r-n,s=e-i/2;break;case"right":a=t+n,s=e-i/2;break;case"top":a=t-r/2,s=e-i-n;break;case"bottom":a=t-r/2,s=e+n;break;default:a=t+n,s=e-i-n}return{x:a,y:s}}(t,e,n,r,i,o);if(a){var l=function(t,e,n,r,i){return{left:t<i.x,right:t+n>i.x+i.width,top:e<i.y,bottom:e+r>i.y+i.height}}(s.x,s.y,r,i,a);"auto"===o?(l.right&&(s.x=Math.max(0,t-r-n)),l.top&&(s.y=Math.max(0,e-i-n))):"top"===o||"bottom"===o?(l.left&&(s.x=a.x),l.right&&(s.x=a.x+a.width-r),"top"===o&&l.top&&(s.y=e+n),"bottom"===o&&l.bottom&&(s.y=e-i-n)):(l.top&&(s.y=a.y),l.bottom&&(s.y=a.y+a.height-i),"left"===o&&l.left&&(s.x=t+n),"right"===o&&l.right&&(s.x=t-r-n))}return s}(e,n,r,d,h,s,t);mw(u,{left:crt(f.x+o),top:crt(f.y+a)}),this.resetCrosshairs()},e.prototype.renderCustomContent=function(){var t=this.getHtmlContentNode(),e=this.get("parent"),n=this.get("container");n&&n.parentNode===e?e.replaceChild(t,n):e.appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()},e.prototype.getHtmlContentNode=function(){var t,e=this.get("customContent");if(e){var n=e(this.get("title"),this.get("items"));t=El(n)?n:fw(n)}return t},e.prototype.cacheDoms=function(){var t=this.getContainer(),e=t.getElementsByClassName(fit)[0],n=t.getElementsByClassName(pit)[0];this.set("titleDom",e),this.set("listDom",n)},e.prototype.resetTitle=function(){var t=this.get("title");this.get("showTitle")&&t?this.setTitle(t):this.setTitle("")},e.prototype.setTitle=function(t){var e=this.get("titleDom");e&&(e.innerText=t)},e.prototype.resetCrosshairs=function(){var t=this.get("crosshairsRegion"),e=this.get("crosshairs");if(t&&e){var n=irt(t),r=this.get("xCrosshairDom"),i=this.get("yCrosshairDom");"x"===e?(this.resetCrosshair("x",n),i&&(i.remove(),this.set("yCrosshairDom",null))):"y"===e?(this.resetCrosshair("y",n),r&&(r.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",n),this.resetCrosshair("y",n)),this.setCrossHairsVisible(this.get("visible"))}else this.clearCrosshairs()},e.prototype.resetCrosshair=function(t,e){var n=this.checkCrosshair(t),r=this.get(t);mw(n,"x"===t?{left:crt(r),top:crt(e.y),height:crt(e.height)}:{top:crt(r),left:crt(e.x),width:crt(e.width)})},e.prototype.checkCrosshair=function(t){var e=t+"CrosshairDom",n=t+"CrosshairTpl",r="CROSSHAIR_"+t.toUpperCase(),i=mit[r],o=this.get(e),a=this.get("parent");return o||(o=fw(this.get(n)),this.applyStyle(i,o),a.appendChild(o),this.set(e,o)),o},e.prototype.renderItems=function(){this.clearItemDoms();var t=this.get("items"),e=this.get("itemTpl"),n=this.get("listDom");n&&(bs(t,(function(t){var r=Get.toCSSGradient(t.color),i=Za(Za({},t),{color:r}),o=fw(gl(e,i));n.appendChild(o)})),this.applyChildrenStyles(n,this.get("domStyles")))},e.prototype.clearItemDoms=function(){this.get("listDom")&&rrt(this.get("listDom"))},e.prototype.clearCrosshairs=function(){var t=this.get("xCrosshairDom"),e=this.get("yCrosshairDom");t&&t.remove(),e&&e.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},e}(Irt),xit={opacity:0},wit={stroke:"#C5C5C5",strokeOpacity:.85},Cit={fill:"#CACED4",opacity:.85};function Sit(t){return function(t){return zl(t,(function(t,e){return[0===e?"M":"L",t[0],t[1]]}))}(t)}function kit(t,e,n,r){void 0===r&&(r=!0);var i=new XW({values:t}),o=new dW({values:zl(t,(function(t,e){return e}))}),a=zl(t,(function(t,r){return[o.scale(r)*e,n-i.scale(t)*n]}));return r?function(t){if(t.length<=2)return Sit(t);var e=[];bs(t,(function(t){Nl(t,e.slice(e.length-2))||e.push(t[0],t[1])}));var n=iv(e,!1),r=$s(t),i=r[0],o=r[1];return n.unshift(["M",i,o]),n}(a):Sit(a)}function Eit(t,e,n,r){var i=is(t),o=function(t,e){var n=new XW({values:t}),r=Math.max(0,n.min);return e-n.scale(r)*e}(r,n);return i.push(["L",e,o]),i.push(["L",0,o]),i.push(["Z"]),i}var Mit=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:xit,lineStyle:wit,areaStyle:Cit})},e.prototype.renderInner=function(t){var e=this.cfg,n=e.width,r=e.height,i=e.data,o=e.smooth,a=e.isArea,s=e.backgroundStyle,l=e.lineStyle,u=e.areaStyle;this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:Za({x:0,y:0,width:n,height:r},s)});var c=kit(i,n,r,o);if(this.addShape(t,{id:this.getElementId("line"),type:"path",attrs:Za({path:c},l)}),a){var d=Eit(c,n,r,i);this.addShape(t,{id:this.getElementId("area"),type:"path",attrs:Za({path:d},u)})}},e.prototype.applyOffset=function(){var t=this.cfg,e=t.x,n=t.y;this.moveElementTo(this.get("group"),{x:e,y:n})},e}(vrt),Ait={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},_it=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"handler",x:0,y:0,width:10,height:24,style:Ait})},e.prototype.renderInner=function(t){var e=this.cfg,n=e.width,r=e.height,i=e.style,o=i.fill,a=i.stroke,s=i.radius,l=i.opacity,u=i.cursor;this.addShape(t,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:n,height:r,fill:o,stroke:a,radius:s,opacity:l,cursor:u}});var c=1/3*n,d=2/3*n,h=1/4*r,f=3/4*r;this.addShape(t,{id:this.getElementId("line-left"),type:"line",attrs:{x1:c,y1:h,x2:c,y2:f,stroke:a,cursor:u}}),this.addShape(t,{id:this.getElementId("line-right"),type:"line",attrs:{x1:d,y1:h,x2:d,y2:f,stroke:a,cursor:u}})},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.bindEvents=function(){var t=this;this.get("group").on("mouseenter",(function(){var e=t.get("style").highLightFill;t.getElementByLocalId("background").attr("fill",e),t.draw()})),this.get("group").on("mouseleave",(function(){var e=t.get("style").fill;t.getElementByLocalId("background").attr("fill",e),t.draw()}))},e.prototype.draw=function(){var t=this.get("container").get("canvas");t&&t.draw()},e}(vrt),Tit={fill:"#416180",opacity:.05},Pit={fill:"#5B8FF9",opacity:.15,cursor:"move"},Iit={width:10,height:24},Dit={textBaseline:"middle",fill:"#000",opacity:.45},Oit=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onMouseDown=function(t){return function(n){e.currentTarget=t;var r=n.originalEvent;r.stopPropagation(),r.preventDefault(),e.prevX=Ul(r,"touches.0.pageX",r.pageX),e.prevY=Ul(r,"touches.0.pageY",r.pageY);var i=e.getContainerDOM();i.addEventListener("mousemove",e.onMouseMove),i.addEventListener("mouseup",e.onMouseUp),i.addEventListener("mouseleave",e.onMouseUp),i.addEventListener("touchmove",e.onMouseMove),i.addEventListener("touchend",e.onMouseUp),i.addEventListener("touchcancel",e.onMouseUp)}},e.onMouseMove=function(t){var n=e.cfg.width,r=[e.get("start"),e.get("end")];t.stopPropagation(),t.preventDefault();var i=Ul(t,"touches.0.pageX",t.pageX),o=Ul(t,"touches.0.pageY",t.pageY),a=i-e.prevX,s=e.adjustOffsetRange(a/n);e.updateStartEnd(s),e.updateUI(e.getElementByLocalId("foreground"),e.getElementByLocalId("minText"),e.getElementByLocalId("maxText")),e.prevX=i,e.prevY=o,e.draw(),e.emit("sliderchange",[e.get("start"),e.get("end")].sort()),e.delegateEmit("valuechanged",{originValue:r,value:[e.get("start"),e.get("end")]})},e.onMouseUp=function(){e.currentTarget&&(e.currentTarget=void 0);var t=e.getContainerDOM();t&&(t.removeEventListener("mousemove",e.onMouseMove),t.removeEventListener("mouseup",e.onMouseUp),t.removeEventListener("mouseleave",e.onMouseUp),t.removeEventListener("touchmove",e.onMouseMove),t.removeEventListener("touchend",e.onMouseUp),t.removeEventListener("touchcancel",e.onMouseUp))},e}return Ka(e,t),e.prototype.setRange=function(t,e){this.set("minLimit",t),this.set("maxLimit",e);var n=this.get("start"),r=this.get("end"),i=Js(n,t,e),o=Js(r,t,e);this.get("isInit")||n===i&&r===o||this.setValue([i,o])},e.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},e.prototype.setValue=function(t){var e=this.getRange();if(ms(t)&&2===t.length){var n=[this.get("start"),this.get("end")];this.update({start:Js(t[0],e.min,e.max),end:Js(t[1],e.min,e.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:n,value:t})}},e.prototype.getValue=function(){return[this.get("start"),this.get("end")]},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:Tit,foregroundStyle:Pit,handlerStyle:Iit,textStyle:Dit}})},e.prototype.update=function(e){var n=e.start,r=e.end,i=Za({},e);vs(n)||(i.start=Js(n,0,1)),vs(r)||(i.end=Js(r,0,1)),t.prototype.update.call(this,i),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},e.prototype.init=function(){this.set("start",Js(this.get("start"),0,1)),this.set("end",Js(this.get("end"),0,1)),t.prototype.init.call(this)},e.prototype.render=function(){t.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},e.prototype.renderInner=function(t){var e=this.cfg;e.start,e.end;var n=e.width,r=e.height,i=e.trendCfg,o=void 0===i?{}:i,a=e.minText,s=e.maxText,l=e.backgroundStyle,u=void 0===l?{}:l,c=e.foregroundStyle,d=void 0===c?{}:c,h=e.textStyle,f=void 0===h?{}:h,p=Rl({},Ait,this.cfg.handlerStyle);Ql(Ul(o,"data"))&&(this.trend=this.addComponent(t,Za({component:Mit,id:this.getElementId("trend"),x:0,y:0,width:n,height:r},o))),this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:Za({x:0,y:0,width:n,height:r},u)}),this.addShape(t,{id:this.getElementId("minText"),type:"text",attrs:Za({y:r/2,textAlign:"right",text:a,silent:!1},f)}),this.addShape(t,{id:this.getElementId("maxText"),type:"text",attrs:Za({y:r/2,textAlign:"left",text:s,silent:!1},f)}),this.addShape(t,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:Za({y:0,height:r},d)});var g=Ul(p,"width",10),v=Ul(p,"height",24);this.minHandler=this.addComponent(t,{component:_it,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(r-v)/2,width:g,height:v,cursor:"ew-resize",style:p}),this.maxHandler=this.addComponent(t,{component:_it,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(r-v)/2,width:g,height:v,cursor:"ew-resize",style:p})},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.updateUI=function(t,e,n){var r=this.cfg,i=r.start,o=r.end,a=r.width,s=r.minText,l=r.maxText,u=r.handlerStyle,c=r.height,d=i*a,h=o*a;this.trend&&(this.trend.update({width:a,height:c}),this.get("updateAutoRender")||this.trend.render()),t.attr("x",d),t.attr("width",h-d);var f=Ul(u,"width",10);e.attr("text",s),n.attr("text",l);var p=this._dodgeText([d,h],e,n),g=p[0],v=p[1];this.minHandler&&(this.minHandler.update({x:d-f/2}),this.get("updateAutoRender")||this.minHandler.render()),bs(g,(function(t,n){return e.attr(n,t)})),this.maxHandler&&(this.maxHandler.update({x:h-f/2}),this.get("updateAutoRender")||this.maxHandler.render()),bs(v,(function(t,e){return n.attr(e,t)}))},e.prototype.bindEvents=function(){var t=this.get("group");t.on("handler-min:mousedown",this.onMouseDown("minHandler")),t.on("handler-min:touchstart",this.onMouseDown("minHandler")),t.on("handler-max:mousedown",this.onMouseDown("maxHandler")),t.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var e=t.findById(this.getElementId("foreground"));e.on("mousedown",this.onMouseDown("foreground")),e.on("touchstart",this.onMouseDown("foreground"))},e.prototype.adjustOffsetRange=function(t){var e=this.cfg,n=e.start,r=e.end;switch(this.currentTarget){case"minHandler":var i=0-n,o=1-n;return Math.min(o,Math.max(i,t));case"maxHandler":i=0-r,o=1-r;return Math.min(o,Math.max(i,t));case"foreground":i=0-n,o=1-r;return Math.min(o,Math.max(i,t))}},e.prototype.updateStartEnd=function(t){var e=this.cfg,n=e.start,r=e.end;switch(this.currentTarget){case"minHandler":n+=t;break;case"maxHandler":r+=t;break;case"foreground":n+=t,r+=t}this.set("start",n),this.set("end",r)},e.prototype._dodgeText=function(t,e,n){var r,i,o=this.cfg,a=o.handlerStyle,s=o.width,l=Ul(a,"width",10),u=t[0],c=t[1],d=!1;u>c&&(u=(r=[c,u])[0],c=r[1],e=(i=[n,e])[0],n=i[1],d=!0);var h=e.getBBox(),f=n.getBBox(),p=h.width>u-2?{x:u+l/2+2,textAlign:"left"}:{x:u-l/2-2,textAlign:"right"},g=f.width>s-c-2?{x:c-l/2-2,textAlign:"right"}:{x:c+l/2+2,textAlign:"left"};return d?[g,p]:[p,g]},e.prototype.draw=function(){var t=this.get("container"),e=t&&t.get("canvas");e&&e.draw()},e.prototype.getContainerDOM=function(){var t=this.get("container"),e=t&&t.get("canvas");return e&&e.get("container")},e}(vrt),Rit={default:{trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},hover:{thumbColor:"rgba(0,0,0,0.2)"}},Lit=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clearEvents=Zl,e.onStartEvent=function(t){return function(n){e.isMobile=t,n.originalEvent.preventDefault();var r=t?Ul(n.originalEvent,"touches.0.clientX"):n.clientX,i=t?Ul(n.originalEvent,"touches.0.clientY"):n.clientY;e.startPos=e.cfg.isHorizontal?r:i,e.bindLaterEvent()}},e.bindLaterEvent=function(){var t=e.getContainerDOM(),n=[];n=e.isMobile?[hw(t,"touchmove",e.onMouseMove),hw(t,"touchend",e.onMouseUp),hw(t,"touchcancel",e.onMouseUp)]:[hw(t,"mousemove",e.onMouseMove),hw(t,"mouseup",e.onMouseUp),hw(t,"mouseleave",e.onMouseUp)],e.clearEvents=function(){n.forEach((function(t){t.remove()}))}},e.onMouseMove=function(t){var n=e.cfg,r=n.isHorizontal,i=n.thumbOffset;t.preventDefault();var o=e.isMobile?Ul(t,"touches.0.clientX"):t.clientX,a=e.isMobile?Ul(t,"touches.0.clientY"):t.clientY,s=r?o:a,l=s-e.startPos;e.startPos=s,e.updateThumbOffset(i+l)},e.onMouseUp=function(t){t.preventDefault(),e.clearEvents()},e.onTrackClick=function(t){var n=e.cfg,r=n.isHorizontal,i=n.x,o=n.y,a=n.thumbLen,s=e.getContainerDOM().getBoundingClientRect(),l=t.clientX,u=t.clientY,c=r?l-s.left-i-a/2:u-s.top-o-a/2,d=e.validateRange(c);e.updateThumbOffset(d)},e.onThumbMouseOver=function(){var t=e.cfg.theme.hover.thumbColor;e.getElementByLocalId("thumb").attr("stroke",t),e.draw()},e.onThumbMouseOut=function(){var t=e.cfg.theme.default.thumbColor;e.getElementByLocalId("thumb").attr("stroke",t),e.draw()},e}return Ka(e,t),e.prototype.setRange=function(t,e){this.set("minLimit",t),this.set("maxLimit",e);var n=this.getValue(),r=Js(n,t,e);n===r||this.get("isInit")||this.setValue(r)},e.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},e.prototype.setValue=function(t){var e=this.getRange(),n=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*Js(t,e.min,e.max)}),this.delegateEmit("valuechange",{originalValue:n,value:this.getValue()})},e.prototype.getValue=function(){return Js(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return Za(Za({},e),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:Rit})},e.prototype.renderInner=function(t){this.renderTrackShape(t),this.renderThumbShape(t)},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.renderTrackShape=function(t){var e=this.cfg,n=e.trackLen,r=e.theme,i=Rl({},Rit,void 0===r?{default:{}}:r).default,o=i.lineCap,a=i.trackColor,s=i.size,l=Ul(this.cfg,"size",s),u=this.get("isHorizontal")?{x1:0+l/2,y1:l/2,x2:n-l/2,y2:l/2,lineWidth:l,stroke:a,lineCap:o}:{x1:l/2,y1:0+l/2,x2:l/2,y2:n-l/2,lineWidth:l,stroke:a,lineCap:o};return this.addShape(t,{id:this.getElementId("track"),name:"track",type:"line",attrs:u})},e.prototype.renderThumbShape=function(t){var e=this.cfg,n=e.thumbOffset,r=e.thumbLen,i=e.theme,o=Rl({},Rit,i).default,a=o.size,s=o.lineCap,l=o.thumbColor,u=Ul(this.cfg,"size",a),c=this.get("isHorizontal")?{x1:n+u/2,y1:u/2,x2:n+r-u/2,y2:u/2,lineWidth:u,stroke:l,lineCap:s,cursor:"default"}:{x1:u/2,y1:n+u/2,x2:u/2,y2:n+r-u/2,lineWidth:u,stroke:l,lineCap:s,cursor:"default"};return this.addShape(t,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:c})},e.prototype.bindEvents=function(){var t=this.get("group");t.on("mousedown",this.onStartEvent(!1)),t.on("mouseup",this.onMouseUp),t.on("touchstart",this.onStartEvent(!0)),t.on("touchend",this.onMouseUp),t.findById(this.getElementId("track")).on("click",this.onTrackClick);var e=t.findById(this.getElementId("thumb"));e.on("mouseover",this.onThumbMouseOver),e.on("mouseout",this.onThumbMouseOut)},e.prototype.getContainerDOM=function(){var t=this.get("container"),e=t&&t.get("canvas");return e&&e.get("container")},e.prototype.validateRange=function(t){var e=this.cfg,n=e.thumbLen,r=e.trackLen,i=t;return t+n>r?i=r-n:t+n<n&&(i=0),i},e.prototype.draw=function(){var t=this.get("container"),e=t&&t.get("canvas");e&&e.draw()},e.prototype.updateThumbOffset=function(t){var e=this.cfg,n=e.thumbOffset,r=e.isHorizontal,i=e.thumbLen,o=e.size,a=this.validateRange(t);if(a!==n){var s=this.getElementByLocalId("thumb");r?s.attr({x1:a+o/2,x2:a+i-o/2}):s.attr({y1:a+o/2,y2:a+i-o/2}),this.emitOffsetChange(a)}},e.prototype.emitOffsetChange=function(t){var e=this.cfg,n=e.thumbOffset,r=e.trackLen,i=e.thumbLen;this.cfg.thumbOffset=t,this.emit("scrollchange",{thumbOffset:t,ratio:Js(t/(r-i),0,1)}),this.delegateEmit("valuechange",{originalValue:n,value:t})},e}(vrt),Bit=Krt,Fit=Zrt,Nit=sit,zit=ait,jit=dit,Git=hit,Uit=bit;function $it(t,e,n,r){return{x:t+n*Math.cos(r),y:e+n*Math.sin(r)}}function Vit(t,e,n,r,i,o){void 0===o&&(o=0);var a=$it(t,e,n,r),s=$it(t,e,n,i),l=$it(t,e,o,r),u=$it(t,e,o,i);if(i-r==2*Math.PI){var c=$it(t,e,n,r+Math.PI),d=$it(t,e,o,r+Math.PI),h=[["M",a.x,a.y],["A",n,n,0,1,1,c.x,c.y],["A",n,n,0,1,1,s.x,s.y],["M",l.x,l.y]];return o&&(h.push(["A",o,o,0,1,0,d.x,d.y]),h.push(["A",o,o,0,1,0,u.x,u.y])),h.push(["M",a.x,a.y]),h.push(["Z"]),h}var f=i-r<=Math.PI?0:1,p=[["M",a.x,a.y],["A",n,n,0,f,1,s.x,s.y],["L",u.x,u.y]];return o&&p.push(["A",o,o,0,f,0,l.x,l.y]),p.push(["L",a.x,a.y]),p.push(["Z"]),p}function Wit(t,e,n,r,i){var o=$it(t,e,n,r),a=$it(t,e,n,i);if(rl(i-r,2*Math.PI)){var s=$it(t,e,n,r+Math.PI);return[["M",o.x,o.y],["A",n,n,0,1,1,s.x,s.y],["A",n,n,0,1,1,o.x,o.y],["A",n,n,0,1,0,s.x,s.y],["A",n,n,0,1,0,o.x,o.y],["Z"]]}var l=i-r<=Math.PI?0:1;return[["M",o.x,o.y],["A",n,n,0,l,1,a.x,a.y]]}function Hit(t,e){var n,r,i=function(t){if(Fl(t))return null;var e=t[0].x,n=t[0].x,r=t[0].y,i=t[0].y;return bs(t,(function(t){e=e>t.x?t.x:e,n=n<t.x?t.x:n,r=r>t.y?t.y:r,i=i<t.y?t.y:i})),{minX:e,maxX:n,minY:r,maxY:i,centerX:(e+n)/2,centerY:(r+i)/2}}(t.points),o=e.startAngle,a=e.endAngle-o;return e.isTransposed?(n=i.maxY*a,r=i.minY*a):(n=i.maxX*a,r=i.minX*a),{startAngle:r+=o,endAngle:n+=o}}function Yit(t,e){var n=t.attr(),r=e.attr();return bs(n,(function(t,e){void 0===r[e]&&(r[e]=void 0)})),r}function Xit(t,e,n){var r=Math.min(e,n),i=Math.max(e,n);return t>=r&&t<=i}function qit(t,e){return"object"==typeof t&&e.forEach((function(e){delete t[e]})),t}function Kit(t,e,n){void 0===e&&(e=[]),void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];n[o]||(e.push(o),n[o]=!0)}return e}var Zit=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=t,this.y=e,this.height=r,this.width=n}return t.fromRange=function(e,n,r,i){return new t(e,n,r-e,i-n)},t.fromObject=function(e){return new t(e.minX,e.minY,e.width,e.height)},Object.defineProperty(t.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},t.prototype.contains=function(t){return t.minX>=this.minX&&t.maxX<=this.maxX&&t.minY>=this.minY&&t.maxY<=this.maxY},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.clone();return bs(t,(function(t){n.x=Math.min(t.x,n.x),n.y=Math.min(t.y,n.y),n.width=Math.max(t.maxX,n.maxX)-n.x,n.height=Math.max(t.maxY,n.maxY)-n.y})),n},t.prototype.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.clone();return bs(t,(function(t){n.x=Math.max(t.x,n.x),n.y=Math.max(t.y,n.y),n.width=Math.min(t.maxX,n.maxX)-n.x,n.height=Math.min(t.maxY,n.maxY)-n.y})),n},t.prototype.cut=function(e,n){var r=e.width,i=e.height;switch(n){case Vtt.TOP:case Vtt.TOP_LEFT:case Vtt.TOP_RIGHT:return t.fromRange(this.minX,this.minY+i,this.maxX,this.maxY);case Vtt.RIGHT:case Vtt.RIGHT_TOP:case Vtt.RIGHT_BOTTOM:return t.fromRange(this.minX,this.minY,this.maxX-r,this.maxY);case Vtt.BOTTOM:case Vtt.BOTTOM_LEFT:case Vtt.BOTTOM_RIGHT:return t.fromRange(this.minX,this.minY,this.maxX,this.maxY-i);case Vtt.LEFT:case Vtt.LEFT_TOP:case Vtt.LEFT_BOTTOM:return t.fromRange(this.minX+r,this.minY,this.maxX,this.maxY);default:return this}},t.prototype.shrink=function(e){var n=e[0],r=e[1],i=e[2],o=e[3];return new t(this.x+o,this.y+n,this.width-o-r,this.height-n-i)},t.prototype.expand=function(e){var n=e[0],r=e[1],i=e[2],o=e[3];return new t(this.x-o,this.y-n,this.width+o+r,this.height+n+i)},t.prototype.exceed=function(t){return[Math.max(-this.minY+t.minY,0),Math.max(this.maxX-t.maxX,0),Math.max(this.maxY-t.maxY,0),Math.max(-this.minX+t.minX,0)]},t.prototype.collide=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},t.prototype.size=function(){return this.width*this.height},t.prototype.isPointIn=function(t){return t.x>=this.minX&&t.x<=this.maxX&&t.y>=this.minY&&t.y<=this.maxY},t}();function Qit(t){if(t.isPolar&&!t.isTransposed)return(t.endAngle-t.startAngle)*t.getRadius();var e=t.convert({x:0,y:0}),n=t.convert({x:1,y:0});return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function Jit(t,e){var n=t.getCenter();return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function tot(t,e){var n=!1;if(t)if("theta"===t.type){var r=t.start,i=t.end;n=Xit(e.x,r.x,i.x)&&Xit(e.y,r.y,i.y)}else{var o=t.invert(e);n=Xit(o.x,0,1)&&Xit(o.y,0,1)}return n}function eot(t,e){var n=t.getCenter();return Math.atan2(e.y-n.y,e.x-n.x)}function not(t,e){void 0===e&&(e=0);var n,r=t.start,i=t.end,o=t.getWidth(),a=t.getHeight();if(t.isPolar){var s=t.startAngle,l=t.endAngle,u=t.getCenter(),c=t.getRadius();return{type:"path",startState:{path:Vit(u.x,u.y,c+e,s,s)},endState:function(t){var n=(l-s)*t+s;return{path:Vit(u.x,u.y,c+e,s,n)}},attrs:{path:Vit(u.x,u.y,c+e,s,l)}}}return n=t.isTransposed?{height:a+2*e}:{width:o+2*e},{type:"rect",startState:{x:r.x-e,y:i.y-e,width:t.isTransposed?o+2*e:0,height:t.isTransposed?0:a+2*e},endState:n,attrs:{x:r.x-e,y:i.y-e,width:o+2*e,height:a+2*e}}}var rot=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function iot(t,e,n){var r=e||[];if(el(t)||vs(Ms(r,t))&&Fl(n))return new(iH("identity"))({field:t.toString(),values:[t]});var i=Us(r,t);return new(iH(Ul(n,"type",function(t){var e="linear";return rot.test(t)?e="timeCat":zs(t)&&(e="cat"),e}(i[0]))))(Za({field:t,values:i},n))}function oot(t){return t.alias||t.field}function aot(t,e,n){var r,i=t.values.length;if(1===i)r=[.5,1];else{var o=0;r=function(t){if(t.isPolar){var e=t.startAngle;return t.endAngle-e==2*Math.PI}return!1}(e)?e.isTransposed?[(o=1/i*Ul(n,"widthRatio.multiplePie",1/1.3))/2,1-o/2]:[0,1-1/i]:[o=1/i/2,1-o]}return r}function sot(t,e){var n={start:{x:0,y:0},end:{x:0,y:0}};t.isRect?n=function(t){var e,n;switch(t){case Vtt.TOP:e={x:0,y:1},n={x:1,y:1};break;case Vtt.RIGHT:e={x:1,y:0},n={x:1,y:1};break;case Vtt.BOTTOM:e={x:0,y:0},n={x:1,y:0};break;case Vtt.LEFT:e={x:0,y:0},n={x:0,y:1};break;default:e=n={x:0,y:0}}return{start:e,end:n}}(e):t.isPolar&&(n=function(t){var e,n;return t.isTransposed?(e={x:0,y:0},n={x:1,y:0}):(e={x:0,y:0},n={x:0,y:1}),{start:e,end:n}}(t));var r=n.start,i=n.end;return{start:t.convert(r),end:t.convert(i)}}function lot(t){var e=t.start,n=t.end;return e.x===n.x}function uot(t,e){var n=t.start,r=t.end;return lot(t)?(n.y-r.y)*(e.x-n.x)>0?1:-1:(r.x-n.x)*(n.y-e.y)>0?-1:1}function cot(t,e){var n=Ul(t,["components","axis"],{});return Rl({},Ul(n,["common"],{}),Rl({},Ul(n,[e],{})))}function dot(t,e,n){var r=Ul(t,["components","axis"],{});return Rl({},Ul(r,["common","title"],{}),Rl({},Ul(r,[e,"title"],{})),n)}function hot(t){var e=t.x,n=t.y,r=t.circleCenter,i=n.start>n.end,o=t.isTransposed?t.convert({x:i?0:1,y:0}):t.convert({x:0,y:i?0:1}),a=[o.x-r.x,o.y-r.y],s=[1,0],l=o.y>r.y?hc(a,s):-1*hc(a,s),u=l+(e.end-e.start);return{center:r,radius:Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)),startAngle:l,endAngle:u}}function fot(t,e){return bl(t)?!1!==t&&{}:Ul(t,[e])}function pot(t,e){return Ul(t,"position",e)}function got(t,e){return Ul(e,["title","text"],oot(t))}var vot=function(){function t(t,e){this.destroyed=!1,this.facets=[],this.view=t,this.cfg=Rl({},this.getDefaultCfg(),e)}return t.prototype.init=function(){this.container||(this.container=this.createContainer());var t=this.view.getData();this.facets=this.generateFacets(t)},t.prototype.render=function(){this.renderViews()},t.prototype.update=function(){},t.prototype.clear=function(){this.clearFacetViews()},t.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},t.prototype.facetToView=function(t){var e=t.region,n=t.data,r=t.padding,i=void 0===r?this.cfg.padding:r,o=this.view.createView({region:e,padding:i});o.data(n||[]),t.view=o,this.beforeEachView(o,t);var a=this.cfg.eachView;return a&&a(o,t),this.afterEachView(o,t),o},t.prototype.createContainer=function(){return this.view.getLayer(Utt.FORE).addGroup()},t.prototype.renderViews=function(){this.createFacetViews()},t.prototype.createFacetViews=function(){var t=this;return this.facets.map((function(e){return t.facetToView(e)}))},t.prototype.clearFacetViews=function(){var t=this;bs(this.facets,(function(e){e.view&&(t.view.removeView(e.view),e.view=void 0)}))},t.prototype.getFieldValues=function(t,e){var n=[],r={};return bs(t,(function(t){var i=t[e];vs(i)||r[i]||(n.push(i),r[i]=!0)})),n},t.prototype.getRegion=function(t,e,n,r){var i=1/(0===e?1:e),o=1/(0===t?1:t);return{start:{x:i*n,y:o*r},end:{x:i*(n+1),y:o*(r+1)}}},t.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,padding:10,fields:[]}},t.prototype.getDefaultTitleCfg=function(){return{style:{fontSize:14,fill:"#666",fontFamily:this.view.getTheme().fontFamily}}},t.prototype.processAxis=function(t,e){var n=t.getOptions(),r=n.coordinate,i=t.geometries;if("rect"===Ul(r,"type","rect")&&i.length){vs(n.axes)&&(n.axes={});var o=n.axes,a=i[0].getXYFields(),s=a[0],l=a[1],u=fot(o,s),c=fot(o,l);!1!==u&&(n.axes[s]=this.getXAxisOption(s,o,u,e)),!1!==c&&(n.axes[l]=this.getYAxisOption(l,o,c,e))}},t.prototype.getFacetDataFilter=function(t){return function(e){return Ws(t,(function(t){var n=t.field,r=t.value;return!(!vs(r)&&n)||e[n]===r}))}},t}(),mot={},yot=function(t,e){mot[pl(t)]=e},bot=function(){function t(t,e){this.context=t,this.cfg=e,t.addAction(this)}return t.prototype.applyCfg=function(t){Tl(this,t)},t.prototype.init=function(){this.applyCfg(this.cfg)},t.prototype.destroy=function(){this.context.removeAction(this),this.context=null},t}(),xot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.execute=function(){this.callback&&this.callback(this.context)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.callback=null},e}(bot),wot={};function Cot(t,e,n){wot[t]={ActionClass:e,cfg:n}}function Sot(t,e){var n=new xot(e);return n.callback=t,n.name="callback",n}function kot(t,e){for(var n=[t[0]],r=1,i=t.length;r<i;r+=2){var o=e.convert({x:t[r],y:t[r+1]});n.push(o.x,o.y)}return n}function Eot(t,e){var n=e.isTransposed,r=t[1],i=t[6],o=t[7],a=e.convert({x:i,y:o});return["A",r,r,0,0,n?0:1,a.x,a.y]}function Mot(t,e,n){for(var r=!!e,i=[],o=0,a=t.length;o<a;o+=2)i.push([t[o],t[o+1]]);var s,l,u,c=function(t,e,n,r){var i,o,a,s,l,u,c,d=[],h=!!r;if(h){a=r[0],s=r[1];for(var f=0,p=t.length;f<p;f++)a=oc([0,0],a,v=t[f]),s=ac([0,0],s,v)}f=0;for(var g=t.length;f<g;f++){var v=t[f];if(0!==f||n)if(f!==g-1||n){i=t[n?f?f-1:g-1:f-1],o=t[n?(f+1)%g:f+1];var m=[0,0];m=sc(m=pc(m,o,i),m,e);var y=lc(v,i),b=lc(v,o),x=y+b;0!==x&&(y/=x,b/=x);var w=sc([0,0],m,-y),C=sc([0,0],m,b);u=rc([0,0],v,w),l=oc([0,0],l=rc([0,0],v,C),ac([0,0],o,v)),l=ac([0,0],l,oc([0,0],o,v)),u=oc([0,0],u=rc([0,0],v,w=sc([0,0],w=pc([0,0],l,v),-y/b)),ac([0,0],i,v)),u=ac([0,0],u,oc([0,0],i,v)),l=rc([0,0],v,C=sc([0,0],C=pc([0,0],v,u),b/y)),h&&(u=oc([0,0],u=ac([0,0],u,a),s),l=oc([0,0],l=ac([0,0],l,a),s)),d.push(c),d.push(u),c=l}else u=v,d.push(c),d.push(u);else c=v}return n&&d.push(d.shift()),d}(i,.4,r,n),d=i.length,h=[];for(o=0;o<d-1;o++)s=c[2*o],l=c[2*o+1],u=i[o+1],h.push(["C",s[0],s[1],l[0],l[1],u[0],u[1]]);return r&&(s=c[d],l=c[d+1],u=i[0],h.push(["C",s[0],s[1],l[0],l[1],u[0],u[1]])),h}function Aot(t,e){return function(t,e){var n=[];if(t.length){n.push(["M",t[0].x,t[0].y]);for(var r=1,i=t.length;r<i;r+=1){var o=t[r];n.push(["L",o.x,o.y])}e&&n.push(["Z"])}return n}(t,e)}function _ot(t,e,n){var r=[],i=t[0],o=null;if(t.length<=2)return Aot(t,e);for(var a=0,s=t.length;a<s;a++){var l=t[a];o&&o.x===l.x&&o.y===l.y||(r.push(l.x),r.push(l.y),o=l)}var u=Mot(r,e,n||[[0,0],[1,1]]);return u.unshift(["M",i.x,i.y]),u}function Tot(t,e){var n,r,i,o=[];return bs(e,(function(a,s){switch(a[0].toLowerCase()){case"m":case"c":case"q":o.push(kot(a,t));break;case"l":n=e[s-1],r=a,i=t.isTransposed,(i?n[n.length-2]===r[1]:n[n.length-1]===r[2])?o=o.concat(function(t,e,n){var r=n.isTransposed,i=n.startAngle,o=n.endAngle,a="a"===t[0].toLowerCase()?{x:t[6],y:t[7]}:{x:t[1],y:t[2]},s={x:e[1],y:e[2]},l=[],u=r?"y":"x",c=Math.abs(s[u]-a[u])*(o-i),d=s[u]>=a[u]?1:0,h=c>Math.PI?1:0,f=n.convert(s),p=Jit(n,f);if(p>=.5)if(c===2*Math.PI){var g={x:(s.x+a.x)/2,y:(s.y+a.y)/2},v=n.convert(g);l.push(["A",p,p,0,h,d,v.x,v.y]),l.push(["A",p,p,0,h,d,f.x,f.y])}else l.push(["A",p,p,0,h,d,f.x,f.y]);return l}(n,r,t)):o.push(kot(a,t));break;case"a":o.push(Eot(a,t));break;case"z":default:o.push(a)}})),function(t){bs(t,(function(e,n){if("a"===e[0].toLowerCase()){var r=t[n-1],i=t[n+1];i&&"a"===i[0].toLowerCase()?r&&"l"===r[0].toLowerCase()&&(r[0]="M"):r&&"a"===r[0].toLowerCase()&&i&&"l"===i[0].toLowerCase()&&(i[0]="M")}}))}(o),o}function Pot(t,e){var n=t.event.target.getCanvasBBox();return n.width>=e||n.height>=e?n:null}function Iot(t){var e,n=t.event.target;return n&&(e=n.get("element")),e}function Dot(t){var e,n=t.event.target;return n&&(e=n.get("delegateObject")),e}function Oot(t){var e=t.event.gEvent;return!(e&&e.fromShape&&e.toShape&&e.fromShape.get("element")===e.toShape.get("element"))}function Rot(t){return t&&t.component&&t.component.isList()}function Lot(t){return t&&t.component&&t.component.isSlider()}function Bot(t){var e=t.event.target;return e&&"mask"===e.get("name")}function Fot(t,e){var n,r,i,o;if("path"===t.event.target.get("type")){var a=function(t,e){var n=t.event.target,r=n.getCanvasBBox();return r.width>=e||r.height>=e?n.attr("path"):null}(t,e);if(!a)return;return n=t.view,r=a,i=zot(n),o=$ot(r),i.filter((function(t){var e,n,r=t.shape;if("path"===r.get("type"))e=$ot(r.attr("path"));else{var i=r.getCanvasBBox();e=[[(n=i).minX,n.minY],[n.maxX,n.minY],[n.maxX,n.maxY],[n.minX,n.maxY]]}return function(t,e){if(t.length<2||e.length<2)return!1;var n,r,i=Ev(t),o=Ev(e);if(n=i,(r=o).minX>n.maxX||r.maxX<n.minX||r.minY>n.maxY||r.maxY<n.minY)return!1;var a=!1;if(bs(e,(function(e){if(Cv(t,e[0],e[1]))return a=!0,!1})),a)return!0;if(bs(t,(function(t){if(Cv(e,t[0],t[1]))return a=!0,!1})),a)return!0;var s=Sv(t),l=Sv(e),u=!1;return bs(l,(function(t){if(kv(s,t))return u=!0,!1})),u}(o,e)}))}var s=Pot(t,e);return s?Uot(t.view,s):null}function Not(t,e,n){var r=Pot(t,n);if(!r)return null;var i=t.view,o=Xot(i,e,{x:r.x,y:r.y}),a=Xot(i,e,{x:r.maxX,y:r.maxY});return Uot(e,{minX:o.x,minY:o.y,maxX:a.x,maxY:a.y})}function zot(t){var e=t.geometries,n=[];return bs(e,(function(t){var e=t.elements;n=n.concat(e)})),t.views&&t.views.length&&bs(t.views,(function(t){n=n.concat(zot(t))})),n}function jot(t,e){var n=t.geometries,r=[];return bs(n,(function(t){var n=t.getElementsBy((function(t){return t.hasState(e)}));r=r.concat(n)})),r}function Got(t,e){var n=t.getModel().data;return ms(n)?n[0][e]:n[e]}function Uot(t,e){var n=zot(t),r=[];return bs(n,(function(t){var n=t.shape.getCanvasBBox();(function(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)})(e,n)&&r.push(t)})),r}function $ot(t){var e=[];return bs(t,(function(t){if("A"!==t[0])for(var n=1;n<t.length;n+=2)e.push([t[n],t[n+1]]);else{var r=t.length;e.push([t[r-2],t[r-1]])}})),e}function Vot(t){return t.getComponents().map((function(t){return t.component}))}function Wot(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function Hot(t,e){return t.x<=e.x&&t.maxX>=e.x&&t.y<=e.y&&t.maxY>e.y}function Yot(t){var e=t.parent,n=null;return e&&(n=e.views.filter((function(e){return e!==t}))),n}function Xot(t,e,n){var r=function(t,e){return t.getCoordinate().invert(e)}(t,n);return e.getCoordinate().convert(r)}function qot(t,e,n,r){var i=!1;return bs(t,(function(t){if(t[n]===e[n]&&t[r]===e[r])return i=!0,!1})),i}function Kot(t,e){var n=t.getScaleByField(e);return!n&&t.views&&bs(t.views,(function(t){if(n=Kot(t,e))return!1})),n}var Zot=function(){function t(t){this.actions=[],this.event=null,this.cacheMap={},this.view=t}return t.prototype.cache=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length)return this.cacheMap[t[0]];2===t.length&&(this.cacheMap[t[0]]=t[1])},t.prototype.getAction=function(t){return this.actions.find((function(e){return e.name===t}))},t.prototype.addAction=function(t){this.actions.push(t)},t.prototype.removeAction=function(t){var e=this.actions,n=this.actions.indexOf(t);n>=0&&e.splice(n,1)},t.prototype.getCurrentPoint=function(){var t=this.event;return t?t.target instanceof HTMLElement?this.view.getCanvas().getPointByClient(t.clientX,t.clientY):{x:t.x,y:t.y}:null},t.prototype.getCurrentShape=function(){return Ul(this.event,["gEvent","shape"])},t.prototype.isInPlot=function(){var t=this.getCurrentPoint();return!!t&&this.view.isPointInPlot(t)},t.prototype.isInShape=function(t){var e=this.getCurrentShape();return!!e&&e.get("name")===t},t.prototype.isInComponent=function(t){var e=Vot(this.view),n=this.getCurrentPoint();return!!n&&!!e.find((function(e){var r=e.getBBox();return t?e.get("name")===t&&Hot(r,n):Hot(r,n)}))},t.prototype.destroy=function(){this.view=null,this.event=null,bs(this.actions.slice(),(function(t){t.destroy()})),this.actions=null,this.cacheMap=null},t}(),Qot=function(){function t(t,e){this.view=t,this.cfg=e}return t.prototype.init=function(){this.initEvents()},t.prototype.initEvents=function(){},t.prototype.clearEvents=function(){},t.prototype.destroy=function(){this.clearEvents()},t}();function Jot(t,e,n){var r=t.split(":"),i=r[0],o=e.getAction(i)||function(t,e){var n=wot[t],r=null;return n&&((r=new(0,n.ActionClass)(e,n.cfg)).name=t,r.init()),r}(i,e);if(!o)throw new Error("There is no action named "+i);return{action:o,methodName:r[1],arg:n}}function tat(t){var e=t.action,n=t.methodName,r=t.arg;if(!e[n])throw new Error("Action("+e.name+") doesn't have a method called "+n);e[n](r)}var eat="start",nat="showEnable",rat="end",iat="rollback",oat="processing",aat=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.callbackCaches={},r.emitCaches={},r.steps=n,r}return Ka(e,t),e.prototype.init=function(){this.initContext(),t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},e.prototype.initEvents=function(){var t=this;bs(this.steps,(function(e,n){bs(e,(function(e){var r=t.getActionCallback(n,e);r&&t.bindEvent(e.trigger,r)}))}))},e.prototype.clearEvents=function(){var t=this;bs(this.steps,(function(e,n){bs(e,(function(e){var r=t.getActionCallback(n,e);r&&t.offEvent(e.trigger,r)}))}))},e.prototype.initContext=function(){var t=this.view,e=new Zot(t);this.context=e,bs(this.steps,(function(t){bs(t,(function(t){if(gs(t.action))t.actionObject={action:Sot(t.action,e),methodName:"execute"};else if(zs(t.action))t.actionObject=Jot(t.action,e,t.arg);else if(ms(t.action)){var n=t.action,r=ms(t.arg)?t.arg:[t.arg];t.actionObject=[],bs(n,(function(n,i){t.actionObject.push(Jot(n,e,r[i]))}))}}))}))},e.prototype.isAllowStep=function(t){var e=this.currentStepName,n=this.steps;if(e===t)return!0;if(t===nat)return!0;if(t===oat)return e===eat;if(t===eat)return e!==oat;if(t===rat)return e===oat||e===eat;if(t===iat){if(n[rat])return e===rat;if(e===eat)return!0}return!1},e.prototype.isAllowExecute=function(t,e){if(this.isAllowStep(t)){var n=this.getKey(t,e);return(!e.once||!this.emitCaches[n])&&(!e.isEnable||e.isEnable(this.context))}return!1},e.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},e.prototype.afterExecute=function(t,e){t!==nat&&this.currentStepName!==t&&this.enterStep(t);var n=this.getKey(t,e);this.emitCaches[n]=!0},e.prototype.getKey=function(t,e){return t+e.trigger+e.action},e.prototype.getActionCallback=function(t,e){var n=this,r=this.context,i=this.callbackCaches,o=e.actionObject;if(e.action&&o){var a=this.getKey(t,e);if(!i[a]){var s=function(i){r.event=i,n.isAllowExecute(t,e)?(ms(o)?bs(o,(function(t){r.event=i,tat(t)})):(r.event=i,tat(o)),n.afterExecute(t,e),e.callback&&(r.event=i,e.callback(r))):r.event=null};e.debounce?i[a]=Il(s,e.debounce.wait,e.debounce.immediate):e.throttle?i[a]=Yl(s,e.throttle.wait,{leading:e.throttle.leading,trailing:e.throttle.trailing}):i[a]=s}return i[a]}return null},e.prototype.bindEvent=function(t,e){var n=t.split(":");"window"===n[0]?window.addEventListener(n[1],e):"document"===n[0]?document.addEventListener(n[1],e):this.view.on(t,e)},e.prototype.offEvent=function(t,e){var n=t.split(":");"window"===n[0]?window.removeEventListener(n[1],e):"document"===n[0]?document.removeEventListener(n[1],e):this.view.off(t,e)},e}(Qot),sat={};function lat(t,e){sat[pl(t)]=e}function uat(t,e,n){var r=function(t){return sat[pl(t)]}(t);if(!r)return null;if(Ss(r)){var i=Tl(Pl(r),n);return new aat(e,i)}return new r(e,n)}function cat(t){var e,n={point:{default:{fill:t.pointFillColor,r:t.pointSize,stroke:t.pointBorderColor,lineWidth:t.pointBorder,fillOpacity:t.pointFillOpacity},active:{stroke:t.pointActiveBorderColor,lineWidth:t.pointActiveBorder},selected:{stroke:t.pointSelectedBorderColor,lineWidth:t.pointSelectedBorder},inactive:{fillOpacity:t.pointInactiveFillOpacity,strokeOpacity:t.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:t.hollowPointFillColor,lineWidth:t.hollowPointBorder,stroke:t.hollowPointBorderColor,strokeOpacity:t.hollowPointBorderOpacity,r:t.hollowPointSize},active:{stroke:t.hollowPointActiveBorderColor,strokeOpacity:t.hollowPointActiveBorderOpacity},selected:{lineWidth:t.hollowPointSelectedBorder,stroke:t.hollowPointSelectedBorderColor,strokeOpacity:t.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:t.hollowPointInactiveBorderOpacity}},area:{default:{fill:t.areaFillColor,fillOpacity:t.areaFillOpacity,stroke:null},active:{fillOpacity:t.areaActiveFillOpacity},selected:{fillOpacity:t.areaSelectedFillOpacity},inactive:{fillOpacity:t.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:t.hollowAreaBorderColor,lineWidth:t.hollowAreaBorder,strokeOpacity:t.hollowAreaBorderOpacity},active:{fill:null,lineWidth:t.hollowAreaActiveBorder},selected:{fill:null,lineWidth:t.hollowAreaSelectedBorder},inactive:{strokeOpacity:t.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:t.intervalFillColor,fillOpacity:t.intervalFillOpacity},active:{stroke:t.intervalActiveBorderColor,lineWidth:t.intervalActiveBorder},selected:{stroke:t.intervalSelectedBorderColor,lineWidth:t.intervalSelectedBorder},inactive:{fillOpacity:t.intervalInactiveFillOpacity,strokeOpacity:t.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:t.hollowIntervalFillColor,stroke:t.hollowIntervalBorderColor,lineWidth:t.hollowIntervalBorder,strokeOpacity:t.hollowIntervalBorderOpacity},active:{stroke:t.hollowIntervalActiveBorderColor,lineWidth:t.hollowIntervalActiveBorder,strokeOpacity:t.hollowIntervalActiveBorderOpacity},selected:{stroke:t.hollowIntervalSelectedBorderColor,lineWidth:t.hollowIntervalSelectedBorder,strokeOpacity:t.hollowIntervalSelectedBorderOpacity},inactive:{stroke:t.hollowIntervalInactiveBorderColor,lineWidth:t.hollowIntervalInactiveBorder,strokeOpacity:t.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:t.lineBorderColor,lineWidth:t.lineBorder,strokeOpacity:t.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:t.lineActiveBorder},selected:{lineWidth:t.lineSelectedBorder},inactive:{strokeOpacity:t.lineInactiveBorderOpacity}}},r=function(t){return{title:{autoRotate:!0,position:"center",spacing:t.axisTitleSpacing,style:{fill:t.axisTitleTextFillColor,fontSize:t.axisTitleTextFontSize,lineHeight:t.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:t.fontFamily}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:t.axisLabelOffset,style:{fill:t.axisLabelFillColor,fontSize:t.axisLabelFontSize,lineHeight:t.axisLabelLineHeight,fontFamily:t.fontFamily}},line:{style:{lineWidth:t.axisLineBorder,stroke:t.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:t.axisGridBorderColor,lineWidth:t.axisGridBorder,lineDash:t.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:t.axisTickLineBorder,stroke:t.axisTickLineBorderColor},alignTick:!0,length:t.axisTickLineLength},subTickLine:null,animate:!0}}(t),i=function(t){return{title:null,marker:{symbol:"circle",spacing:t.legendMarkerSpacing,style:{r:t.legendCircleMarkerSize,fill:t.legendMarkerColor}},itemName:{spacing:5,style:{fill:t.legendItemNameFillColor,fontFamily:t.fontFamily,fontSize:t.legendItemNameFontSize,lineHeight:t.legendItemNameLineHeight,fontWeight:t.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:t.legendPageNavigatorMarkerSize,inactiveFill:t.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:t.legendPageNavigatorMarkerInactiveFillOpacity,fill:t.legendPageNavigatorMarkerFillColor,opacity:t.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:t.legendPageNavigatorTextFillColor,fontSize:t.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:t.legendItemSpacing,itemMarginBottom:t.legendItemMarginBottom,padding:t.legendPadding}}(t);return{background:t.backgroundColor,defaultColor:t.brandColor,subColor:t.subColor,semanticRed:t.paletteSemanticRed,semanticGreen:t.paletteSemanticGreen,padding:"auto",fontFamily:t.fontFamily,columnWidthRatio:.5,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:t.paletteQualitative10,colors20:t.paletteQualitative20,sequenceColors:t.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:function(t){var e=t.geometry.coordinate;if(e.isPolar&&e.isTransposed){var r=Hit(t.getModel(),e),i=(r.startAngle+r.endAngle)/2;return{matrix:yc(null,[["t",7.5*Math.cos(i),7.5*Math.sin(i)]])}}return n.interval.selected}}},"hollow-rect":{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},line:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},tick:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},funnel:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}},pyramid:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}}},line:{line:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},dot:{default:{style:Za(Za({},n.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:Za(Za({},n.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:Za(Za({},n.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:Za(Za({},n.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:Za(Za({},n.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:Za(Za({},n.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:Za(Za({},n.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:Za(Za({},n.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vh:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hvh:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vhv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}}},polygon:{polygon:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}}},point:{circle:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},square:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},bowtie:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},diamond:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},hexagon:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},triangle:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},"triangle-down":{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},"hollow-circle":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-square":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-bowtie":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-diamond":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-hexagon":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-triangle":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-triangle-down":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},cross:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},tick:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},plus:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},hyphen:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},line:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}}},area:{area:{default:{style:n.area.default},active:{style:n.area.active},inactive:{style:n.area.inactive},selected:{style:n.area.selected}},smooth:{default:{style:n.area.default},active:{style:n.area.active},inactive:{style:n.area.inactive},selected:{style:n.area.selected}},line:{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}},"smooth-line":{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}}},schema:{candle:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},box:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}}},edge:{line:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vhv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},arc:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}}},violin:{violin:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hollow:{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}},"hollow-smooth":{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}}}},components:{axis:{common:r,top:{position:"top",grid:null,title:null,verticalLimitLength:.5},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:.5},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:Rl({},r.grid,{line:{type:"line"}})},radius:{title:null,grid:Rl({},r.grid,{line:{type:"circle"}})}},legend:{common:i,right:{layout:"vertical",padding:t.legendVerticalPadding},left:{layout:"vertical",padding:t.legendVerticalPadding},top:{layout:"horizontal",padding:t.legendHorizontalPadding},bottom:{layout:"horizontal",padding:t.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:t.sliderRailHeight,defaultLength:t.sliderRailWidth,style:{fill:t.sliderRailFillColor,stroke:t.sliderRailBorderColor,lineWidth:t.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:t.sliderLabelTextFillColor,fontSize:t.sliderLabelTextFontSize,lineHeight:t.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:t.fontFamily}},handler:{size:t.sliderHandlerWidth,style:{fill:t.sliderHandlerFillColor,stroke:t.sliderHandlerBorderColor}},slidable:!0,padding:i.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:t.tooltipCrosshairsBorderColor,lineWidth:t.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(e={},e["g2-tooltip"]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:t.tooltipContainerFillColor,opacity:t.tooltipContainerFillOpacity,boxShadow:t.tooltipContainerShadow,borderRadius:t.tooltipContainerBorderRadius+"px",color:t.tooltipTextFillColor,fontSize:t.tooltipTextFontSize+"px",fontFamily:t.fontFamily,lineHeight:t.tooltipTextLineHeight+"px",padding:"0 12px 0 12px"},e[""+fit]={marginBottom:"12px",marginTop:"12px"},e[""+pit]={margin:0,listStyleType:"none",padding:0},e["g2-tooltip-list-item"]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},e["g2-tooltip-marker"]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},e["g2-tooltip-value"]={display:"inline-block",float:"right",marginLeft:"30px"},e)},annotation:{arc:{style:{stroke:t.annotationArcBorderColor,lineWidth:t.annotationArcBorder},animate:!0},line:{style:{stroke:t.annotationLineBorderColor,lineDash:t.annotationLineDash,lineWidth:t.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,textAlign:"start",fontFamily:t.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:t.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:t.annotationRegionBorder,stroke:t.annotationRegionBorderColor,fill:t.annotationRegionFillColor,fillOpacity:t.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:t.brandColor,lineWidth:2}},line:{style:{stroke:t.annotationLineBorderColor,lineWidth:t.annotationLineBorder},length:t.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,fontFamily:t.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:t.annotationRegionFillColor,fillOpacity:t.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,fontFamily:t.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:t.cSliderBackgroundFillColor,opacity:t.cSliderBackgroundFillOpacity},foregroundStyle:{fill:t.cSliderForegroundFillColor,opacity:t.cSliderForegroundFillOpacity},handlerStyle:{width:t.cSliderHandlerWidth,height:t.cSliderHandlerHeight,fill:t.cSliderHandlerFillColor,opacity:t.cSliderHandlerFillOpacity,stroke:t.cSliderHandlerBorderColor,lineWidth:t.cSliderHandlerBorder,radius:t.cSliderHandlerBorderRadius,highLightFill:t.cSliderHandlerHighlightFillColor},textStyle:{fill:t.cSliderTextFillColor,opacity:t.cSliderTextFillOpacity,fontSize:t.cSliderTextFontSize,lineHeight:t.cSliderTextLineHeight,fontWeight:t.cSliderTextFontWeight,stroke:t.cSliderTextBorderColor,lineWidth:t.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:t.scrollbarTrackFillColor,thumbColor:t.scrollbarThumbFillColor}},hover:{style:{thumbColor:t.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:t.labelFillColor,fontSize:t.labelFontSize,fontFamily:t.fontFamily,stroke:t.labelBorderColor,lineWidth:t.labelBorder},fillColorDark:t.labelFillColorDark,fillColorLight:t.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:t.innerLabelFillColor,fontSize:t.innerLabelFontSize,fontFamily:t.fontFamily,stroke:t.innerLabelBorderColor,lineWidth:t.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:t.overflowLabelFillColor,fontSize:t.overflowLabelFontSize,fontFamily:t.fontFamily,stroke:t.overflowLabelBorderColor,lineWidth:t.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:t.labelLineBorder}},autoRotate:!0}}}var dat="#000",hat="#595959",fat="#8C8C8C",pat="#BFBFBF",gat="#D9D9D9",vat="#F0F0F0",mat="#FFFFFF",yat=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],bat=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],xat=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],wat=function(t){void 0===t&&(t={});var e=t.backgroundColor,n=void 0===e?"transparent":e,r=t.subColor,i=void 0===r?"rgba(0,0,0,0.05)":r,o=t.paletteQualitative10,a=void 0===o?yat:o,s=t.paletteQualitative20,l=void 0===s?bat:s,u=t.paletteSemanticRed,c=void 0===u?"#F4664A":u,d=t.paletteSemanticGreen,h=void 0===d?"#30BF78":d,f=t.paletteSemanticYellow,p=void 0===f?"#FAAD14":f,g=t.paletteSequence,v=void 0===g?xat:g,m=t.fontFamily,y=void 0===m?'"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,\n    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n    "Noto Color Emoji"':m,b=t.brandColor,x=void 0===b?a[0]:b;return{backgroundColor:n,brandColor:x,subColor:i,paletteQualitative10:a,paletteQualitative20:l,paletteSemanticRed:c,paletteSemanticGreen:h,paletteSemanticYellow:p,paletteSequence:v,fontFamily:y,axisLineBorderColor:pat,axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:hat,axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:pat,axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:gat,axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:fat,axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:gat,axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:fat,legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:x,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:hat,legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:dat,legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:dat,legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:fat,legendPageNavigatorTextFontSize:12,sliderRailFillColor:gat,sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:fat,sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:vat,sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:pat,annotationArcBorderColor:gat,annotationArcBorder:1,annotationLineBorderColor:pat,annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:hat,annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:dat,annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:pat,tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:hat,tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:hat,labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:mat,innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:hat,overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:mat,overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:pat,cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:x,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:mat,pointBorderOpacity:1,pointActiveBorderColor:dat,pointSelectedBorder:2,pointSelectedBorderColor:dat,pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:x,hollowPointBorderOpacity:.95,hollowPointFillColor:mat,hollowPointActiveBorder:1,hollowPointActiveBorderColor:dat,hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:dat,hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:x,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:x,areaFillOpacity:.25,areaActiveFillColor:x,areaActiveFillOpacity:.5,areaSelectedFillColor:x,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:x,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:dat,hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:dat,hollowAreaInactiveBorderOpacity:.3,intervalFillColor:x,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:dat,intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:dat,intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:x,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:mat,hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:dat,hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:dat,hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}};function Cat(t){var e=t.styleSheet,n=void 0===e?{}:e,r=Qa(t,["styleSheet"]),i=wat(n);return Rl({},cat(i),r)}wat();var Sat={default:Cat({})};function kat(t){return Ul(Sat,pl(t),Sat.default)}function Eat(t,e,n){return rl(n.translate(t),n.translate(e))}function Mat(t,e,n){var r=n.coordinate,i=n.getYScale(),o=i.field,a=r.invert(e),s=i.invert(a.y);return ks(t,(function(t){var e=t._origin;return e[o][0]<=s&&e[o][1]>=s}))||t[t.length-1]}var Aat=Dl((function(t){if(t.isCategory)return 1;for(var e=t.values,n=e.length,r=t.translate(e[0]),i=r,o=0;o<n;o++){var a=e[o],s=t.translate(a);s<r&&(r=s),s>i&&(i=s)}return(i-r)/(n-1)}));function _at(t){for(var e,n=0,r=function(t){var e=hl(t.attributes);return ds(e,(function(t){return cs(set,t.type)}))}(t);n<r.length;n++){var i=r[n],o=i.getScale(i.type);if(o&&o.isLinear){e=o;break}}var a=t.getXScale(),s=t.getYScale();return e||s||a}function Tat(t,e,n){if(0===e.length)return null;var r=n.type,i=n.getXScale(),o=n.getYScale(),a=i.field,s=o.field,l=null;if("heatmap"===r||"point"===r){for(var u=n.coordinate.invert(t),c=i.invert(u.x),d=o.invert(u.y),h=1/0,f=0;f<e.length;f++){var p=e[f],g=p._origin,v=Math.pow(g[a]-c,2)+Math.pow(g[s]-d,2);v<h&&(h=v,l=p)}return l}var m=e[0],y=e[e.length-1],b=function(t,e){var n=e.coordinate,r=e.getXScale(),i=r.range,o=i[i.length-1],a=i[0],s=n.invert(t).x;return n.isPolar&&s>(1+o)/2&&(s=a),r.translate(r.invert(s))}(t,n),x=m._origin[a],w=m._origin[s],C=y._origin[a],S=o.isLinear&&ms(w);if(ms(x)){for(f=0;f<e.length;f++){g=(T=e[f])._origin;if(i.translate(g[a][0])<=b&&i.translate(g[a][1])>=b){if(!S){l=T;break}ms(l)||(l=[]),l.push(T)}}ms(l)&&(l=Mat(l,t,n))}else{var k=void 0;if(i.isLinear||"timeCat"===i.type){if((b>i.translate(C)||b<i.translate(x))&&(b>i.max||b<i.min))return null;for(var E=0,M=e.length-1,A=void 0;E<=M;){var _=e[A=Math.floor((E+M)/2)]._origin[a];if(Eat(_,b,i))return e[A];i.translate(_)<=i.translate(b)?(E=A+1,y=e[A],k=e[A+1]):(0===M&&(y=e[0]),M=A-1)}}else{for(f=0;f<e.length;f++){var T;if(Eat((g=(T=e[f])._origin)[a],b,i)){if(!S){l=T;break}ms(l)||(l=[]),l.push(T)}else i.translate(g[a])<=b&&(y=T,k=e[f+1])}ms(l)&&(l=Mat(l,t,n))}y&&k&&Math.abs(i.translate(y._origin[a])-b)>Math.abs(i.translate(k._origin[a])-b)&&(y=k)}var P=Aat(n.getXScale());return!l&&Math.abs(i.translate(y._origin[a])-b)<=P/2&&(l=y),l}function Pat(t,e,n,r){void 0===n&&(n=""),void 0===r&&(r=!1);var i,o=t._origin,a=function(t,e,n){var r=e.getAttribute("position").getFields(),i=e.scales,o=gs(n)||!n?r[0]:n,a=i[o],s=a?a.getText(t[o]):t[o]||o;return gs(n)?n(s,t):s}(o,e,n),s=e.tooltipOption,l=e.theme.defaultColor,u=[];function c(e,n){if(r||!vs(n)&&""!==n){var i={title:a,data:o,mappingData:t,name:e,value:n,color:t.color||l,marker:!0};u.push(i)}}if(ys(s)){var d=s.fields,h=s.callback;if(h){var f=d.map((function(e){return t._origin[e]})),p=h.apply(void 0,f),g=Za({data:t._origin,mappingData:t,title:a,color:t.color||l,marker:!0},p);u.push(g)}else for(var v=e.scales,m=0,y=d;m<y.length;m++){var b=y[m];if(!vs(o[b])){var x=v[b];c(oot(x),i=x.getText(o[b]))}}}else{var w=_at(e);i=function(t,e){var n=t[e.field];return ms(n)?n.map((function(t){return e.getText(t)})).join("-"):e.getText(n)}(o,w),c(function(t,e){var n,r=e.getGroupScales();if(r.length&&(n=r[0]),n){var i=n.field;return n.getText(t[i])}return oot(_at(e))}(o,e),i)}return u}function Iat(t,e,n,r){var i=r.showNil,o=[],a=t.dataArray;if(!Fl(a)){t.sort(a);for(var s=0,l=a;s<l.length;s++){var u=Tat(e,l[s],t);if(u){var c=t.getElementId(u),d=t.elementsMap[c];if("heatmap"===t.type||d.visible){var h=Pat(u,t,n,i);h.length&&o.push(h)}}}}return o}function Dat(t,e,n,r){var i=r.showNil,o=[],a=t.container.getShape(e.x,e.y);if(a&&a.get("visible")&&a.get("origin")){var s=Pat(a.get("origin").mappingData,t,n,i);s.length&&o.push(s)}return o}function Oat(t,e,n){for(var r=[],i=t.geometries,o=n.shared,a=n.title,s=n.reversed,l=0,u=i;l<u.length;l++){var c=u[l];if(c.visible&&!1!==c.tooltipOption){var d=c.type,h=void 0;(h=["point","edge","polygon"].includes(d)?Dat(c,e,a,n):["area","line","path","heatmap"].includes(d)||!1!==o?Iat(c,e,a,n):Dat(c,e,a,n)).length&&(s&&h.reverse(),r.push(h))}}return r}function Rat(t){void 0===t&&(t=0);var e=ms(t)?t:[t];switch(e.length){case 0:e=[0,0,0,0];break;case 1:e=new Array(4).fill(e[0]);break;case 2:e=is(e,e);break;case 3:e=is(e,[e[1]]);break;default:e=e.slice(0,4)}return e}var Lat={};function Bat(t,e){Lat[t]=e}var Fat=function(){function t(t){this.option=this.wrapperOption(t)}return t.prototype.update=function(t){return this.option=this.wrapperOption(t),this},t.prototype.hasAction=function(t){var e=this.option.actions;return Hs(e,(function(e){return e[0]===t}))},t.prototype.create=function(t,e){var n=this.option,r=n.type,i=n.cfg,o="theta"===r,a=Za({start:t,end:e},i),s=function(t){return tnt[t.toLowerCase()]}(o?"polar":r);return this.coordinate=new s(a),this.coordinate.type=r,o&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},t.prototype.adjust=function(t,e){return this.coordinate.update({start:t,end:e}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},t.prototype.rotate=function(t){return this.option.actions.push(["rotate",t]),this},t.prototype.reflect=function(t){return this.option.actions.push(["reflect",t]),this},t.prototype.scale=function(t,e){return this.option.actions.push(["scale",t,e]),this},t.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},t.prototype.getOption=function(){return this.option},t.prototype.getCoordinate=function(){return this.coordinate},t.prototype.wrapperOption=function(t){return Za({type:"rect",actions:[],cfg:{}},t)},t.prototype.execActions=function(t){var e=this;bs(this.option.actions,(function(n){var r,i=n[0],o=n.slice(1);(!!vs(t)||t.includes(i))&&(r=e.coordinate)[i].apply(r,o)}))},t}(),Nat=function(){function t(t,e,n){this.view=t,this.gEvent=e,this.data=n,this.type=e.type}return t.fromData=function(e,n,r){return new t(e,new nf(n,{}),r)},Object.defineProperty(t.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.clone=function(){return new t(this.view,this.gEvent,this.data)},t}();function zat(t){var e=t.getController("axis"),n=t.getController("legend"),r=t.getController("annotation");[e,t.getController("slider"),t.getController("scrollbar"),n,r].forEach((function(t){t&&t.layout()}))}var jat=function(){function t(){this.scales=new Map,this.syncScales=new Map}return t.prototype.createScale=function(t,e,n,r){var i=n,o=this.getScaleMeta(r);if(0===e.length&&o){var a=o.scale,s={type:a.type};a.isCategory&&(s.values=a.values),i=Rl(s,o.scaleDef,n)}var l=iot(t,e,i);return this.cacheScale(l,n,r),l},t.prototype.sync=function(t,e){var n=this;this.syncScales.forEach((function(r,i){var o=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,s=[];bs(r,(function(t){var e=n.getScale(t);a=el(e.max)?Math.max(a,e.max):a,o=el(e.min)?Math.min(o,e.min):o,bs(e.values,(function(t){s.includes(t)||s.push(t)}))})),bs(r,(function(r){var i=n.getScale(r);if(i.isContinuous)i.change({min:o,max:a,values:s});else if(i.isCategory){var l=i.range,u=n.getScaleMeta(r);s&&!Ul(u,["scaleDef","range"])&&(l=aot(Rl({},i,{values:s}),t,e)),i.change({values:s,range:l})}}))}))},t.prototype.cacheScale=function(t,e,n){var r=this.getScaleMeta(n);r&&r.scale.type===t.type?(!function(t,e){if("identity"!==t.type&&"identity"!==e.type){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);t.change(n)}}(r.scale,t),r.scaleDef=e):(r={key:n,scale:t,scaleDef:e},this.scales.set(n,r));var i=this.getSyncKey(r);if(r.syncKey=i,this.removeFromSyncScales(n),i){var o=this.syncScales.get(i);o||(o=[],this.syncScales.set(i,o)),o.push(n)}},t.prototype.getScale=function(t){var e=this.getScaleMeta(t);if(!e){var n=Vs(t.split("-")),r=this.syncScales.get(n);r&&r.length&&(e=this.getScaleMeta(r[0]))}return e&&e.scale},t.prototype.deleteScale=function(t){var e=this.getScaleMeta(t);if(e){var n=e.syncKey,r=this.syncScales.get(n);if(r&&r.length){var i=r.indexOf(t);-1!==i&&r.splice(i,1)}}this.scales.delete(t)},t.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},t.prototype.removeFromSyncScales=function(t){var e=this;this.syncScales.forEach((function(n,r){var i=n.indexOf(t);if(-1!==i)return n.splice(i,1),0===n.length&&e.syncScales.delete(r),!1}))},t.prototype.getSyncKey=function(t){var e=t.scale,n=t.scaleDef,r=e.field,i=Ul(n,["sync"]);return!0===i?r:!1===i?void 0:i},t.prototype.getScaleMeta=function(t){return this.scales.get(t)},t}(),Gat=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.top=t,this.right=e,this.bottom=n,this.left=r}return t.instance=function(e,n,r,i){return void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),new t(e,n,r,i)},t.prototype.max=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return this.top=Math.max(this.top,e),this.right=Math.max(this.right,n),this.bottom=Math.max(this.bottom,r),this.left=Math.max(this.left,i),this},t.prototype.shrink=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return this.top+=e,this.right+=n,this.bottom+=r,this.left+=i,this},t.prototype.inc=function(t,e){var n=t.width,r=t.height;switch(e){case Vtt.TOP:case Vtt.TOP_LEFT:case Vtt.TOP_RIGHT:this.top+=r;break;case Vtt.RIGHT:case Vtt.RIGHT_TOP:case Vtt.RIGHT_BOTTOM:this.right+=n;break;case Vtt.BOTTOM:case Vtt.BOTTOM_LEFT:case Vtt.BOTTOM_RIGHT:this.bottom+=r;break;case Vtt.LEFT:case Vtt.LEFT_TOP:case Vtt.LEFT_BOTTOM:this.left+=n}return this},t.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},t.prototype.clone=function(){return new(t.bind.apply(t,is([void 0],this.getPadding())))},t}();function Uat(t){var e=t.padding;if(!function(t){return!el(t)&&!ms(t)}(e))return new(Gat.bind.apply(Gat,is([void 0],Rat(e))));var n=t.viewBBox,r=new Gat,i=[],o=[],a=[];return bs(t.getComponents(),(function(t){var e=t.type;e===Htt.AXIS?i.push(t):[Htt.LEGEND,Htt.SLIDER,Htt.SCROLLBAR].includes(e)?o.push(t):e!==Htt.GRID&&e!==Htt.TOOLTIP&&a.push(t)})),bs(i,(function(t){var e=t.component.getLayoutBBox(),i=new Zit(e.x,e.y,e.width,e.height).exceed(n);r.max(i)})),bs(o,(function(t){var e=t.component,n=t.direction,i=e.getLayoutBBox(),o=e.get("padding"),a=new Zit(i.x,i.y,i.width,i.height).expand(o);r.inc(a,n)})),bs(a,(function(t){var e=t.component,n=t.direction,i=e.getLayoutBBox(),o=new Zit(i.x,i.y,i.width,i.height);r.inc(o,n)})),r}function $at(t,e,n){var r=n.instance();e.forEach((function(t){t.autoPadding=r.max(t.autoPadding.getPadding())}))}var Vat=function(t){function e(e){var n=t.call(this,{visible:e.visible})||this;n.views=[],n.geometries=[],n.controllers=[],n.interactions={},n.limitInPlot=!1,n.options={data:[],animate:!0},n.usedControllers=Object.keys(Lat),n.scalePool=new jat,n.layoutFunc=zat,n.isPreMouseInPlot=!1,n.isDataChanged=!1,n.isCoordinateChanged=!1,n.createdScaleKeys=new Map,n.onCanvasEvent=function(t){var e=t.name;if(!e.includes(":")){var r=n.createViewEvent(t);n.doPlotEvent(r),n.emit(e,r)}},n.onDelegateEvents=function(t){var e=t.name;if(e.includes(":")){var r=n.createViewEvent(t);n.emit(e,r)}};var r=e.id,i=void 0===r?Kl("view"):r,o=e.parent,a=e.canvas,s=e.backgroundGroup,l=e.middleGroup,u=e.foregroundGroup,c=e.region,d=void 0===c?{start:{x:0,y:0},end:{x:1,y:1}}:c,h=e.padding,f=e.appendPadding,p=e.theme,g=e.options,v=e.limitInPlot,m=e.syncViewPadding;return n.parent=o,n.canvas=a,n.backgroundGroup=s,n.middleGroup=l,n.foregroundGroup=u,n.region=d,n.padding=h,n.appendPadding=f,n.options=Za(Za({},n.options),g),n.limitInPlot=v,n.id=i,n.syncViewPadding=m,n.themeObject=ys(p)?Rl({},kat("default"),Cat(p)):kat(p),n.init(),n}return Ka(e,t),e.prototype.setLayout=function(t){this.layoutFunc=t},e.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},e.prototype.render=function(t,e){void 0===t&&(t=!1),this.emit(Ktt.BEFORE_RENDER,Nat.fromData(this,Ktt.BEFORE_RENDER,e)),this.paint(t),this.emit(Ktt.AFTER_RENDER,Nat.fromData(this,Ktt.AFTER_RENDER,e)),!1===this.visible&&this.changeVisible(!1)},e.prototype.clear=function(){var t=this;this.emit(Ktt.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var e=this.geometries,n=0;n<e.length;n++)e[n].clear(),e[n].container.remove(!0);this.geometries=[];var r=this.controllers;for(n=0;n<r.length;n++)"annotation"===r[n].name?r[n].clear(!0):r[n].clear();this.createdScaleKeys.forEach((function(e,n){t.getRootView().scalePool.deleteScale(n)})),this.createdScaleKeys.clear();var i=this.views;for(n=0;n<i.length;n++)i[n].clear();this.emit(Ktt.AFTER_CLEAR)},e.prototype.destroy=function(){this.emit(Ktt.BEFORE_DESTROY),bs(this.interactions,(function(t){t&&t.destroy()})),this.clear();for(var e=this.controllers,n=0,r=e.length;n<r;n++){e[n].destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),t.prototype.destroy.call(this)},e.prototype.changeVisible=function(e){t.prototype.changeVisible.call(this,e);for(var n=this.geometries,r=0,i=n.length;r<i;r++){n[r].changeVisible(e)}var o=this.controllers;for(r=0,i=o.length;r<i;r++){o[r].changeVisible(e)}return this.foregroundGroup.set("visible",e),this.middleGroup.set("visible",e),this.backgroundGroup.set("visible",e),this.getCanvas().draw(),this},e.prototype.data=function(t){return $l(this.options,"data",t),this.isDataChanged=!0,this},e.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},e.prototype.filter=function(t,e){return gs(e)?($l(this.options,["filters",t],e),this):(!e&&Ul(this.options,["filters",t])&&delete this.options.filters[t],this)},e.prototype.axis=function(t,e){return bl(t)?$l(this.options,["axes"],t):$l(this.options,["axes",t],e),this},e.prototype.legend=function(t,e){return bl(t)?$l(this.options,["legends"],t):zs(t)?($l(this.options,["legends",t],e),Ss(e)&&(null==e?void 0:e.selected)&&$l(this.options,["filters",t],(function(t){var n;return null===(n=null==e?void 0:e.selected[t])||void 0===n||n}))):$l(this.options,["legends"],t),this},e.prototype.scale=function(t,e){var n=this;return zs(t)?$l(this.options,["scales",t],e):ys(t)&&bs(t,(function(t,e){$l(n.options,["scales",e],t)})),this},e.prototype.tooltip=function(t){return $l(this.options,"tooltip",t),this},e.prototype.annotation=function(){return this.getController("annotation")},e.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},e.prototype.coordinate=function(t,e){return zs(t)?$l(this.options,"coordinate",{type:t,cfg:e}):$l(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},e.prototype.coord=function(t,e){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,e)},e.prototype.facet=function(t,e){this.facetInstance&&this.facetInstance.destroy();var n=function(t){return mot[pl(t)]}(t);if(!n)throw new Error("facet '"+t+"' is not exist!");return this.facetInstance=new n(this,Za(Za({},e),{type:t})),this},e.prototype.animate=function(t){return $l(this.options,"animate",t),this},e.prototype.updateOptions=function(t){return this.clear(),Tl(this.options,t),this.views.forEach((function(t){return t.destroy()})),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},e.prototype.option=function(t,n){if(e.prototype[t])throw new Error("Can't use built in variable name \""+t+'", please change another one.');return $l(this.options,t,n),this},e.prototype.theme=function(t){return this.themeObject=ys(t)?Rl({},this.themeObject,Cat(t)):kat(t),this},e.prototype.interaction=function(t,e){var n=this.interactions[t];n&&n.destroy();var r=uat(t,this,e);return r&&(r.init(),this.interactions[t]=r),this},e.prototype.removeInteraction=function(t){var e=this.interactions[t];e&&(e.destroy(),this.interactions[t]=void 0)},e.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(Ktt.BEFORE_CHANGE_DATA,Nat.fromData(this,Ktt.BEFORE_CHANGE_DATA,null)),this.data(t),this.paint(!0);for(var e=this.views,n=0,r=e.length;n<r;n++){e[n].changeData(t)}this.emit(Ktt.AFTER_CHANGE_DATA,Nat.fromData(this,Ktt.AFTER_CHANGE_DATA,null))},e.prototype.createView=function(t){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var n={data:this.options.data,scales:Pl(this.options.scales),axes:Pl(this.options.axes),coordinate:Pl(this.coordinateController.getOption()),tooltip:Pl(this.options.tooltip),legends:Pl(this.options.legends),animate:this.options.animate,visible:this.visible},r=new e(Za(Za({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:aet}),middleGroup:this.middleGroup.addGroup({zIndex:oet}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:iet}),theme:this.themeObject,padding:this.padding},t),{options:Za(Za({},n),Ul(t,"options",{}))}));return this.views.push(r),r},e.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},e.prototype.removeView=function(t){var e=Ns(this.views,(function(e){return e===t}))[0];return e&&e.destroy(),e},e.prototype.getCoordinate=function(){return this.coordinateInstance},e.prototype.getTheme=function(){return this.themeObject},e.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},e.prototype.getYScales=function(){var t={};return this.geometries.map((function(e){var n=e.getYScale(),r=n.field;if(!t[r])return t[r]=!0,n}))},e.prototype.getScalesByDim=function(t){for(var e=this.geometries,n={},r=0,i=e.length;r<i;r++){var o=e[r],a="x"===t?o.getXScale():o.getYScale();a&&!n[a.field]&&(n[a.field]=a)}return n},e.prototype.getScaleByField=function(t,e){var n=e||this.getScaleKey(t);return this.getRootView().scalePool.getScale(n)},e.prototype.getOptions=function(){return this.options},e.prototype.getData=function(){return this.filteredData},e.prototype.getLayer=function(t){return t===Utt.BG?this.backgroundGroup:t===Utt.MID?this.middleGroup:(Utt.FORE,this.foregroundGroup)},e.prototype.isPointInPlot=function(t){return tot(this.getCoordinate(),t)},e.prototype.getLegendAttributes=function(){return As(this.geometries.map((function(t){return t.getGroupAttributes()})))},e.prototype.getGroupScales=function(){var t=this.geometries.map((function(t){return t.getGroupScales()}));return Kit(As(t))},e.prototype.getCanvas=function(){return this.getRootView().canvas},e.prototype.getRootView=function(){for(var t=this;t.parent;)t=t.parent;return t},e.prototype.getXY=function(t){var e,n,r=this.getCoordinate(),i=this.getScalesByDim("x"),o=this.getScalesByDim("y");if(bs(t,(function(t,r){i[r]&&(e=i[r].scale(t)),o[r]&&(n=o[r].scale(t))})),!vs(e)&&!vs(n))return r.convert({x:e,y:n})},e.prototype.getController=function(t){return ks(this.controllers,(function(e){return e.name===t}))},e.prototype.showTooltip=function(t){var e=this.getController("tooltip");return e&&e.showTooltip(t),this},e.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},e.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},e.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},e.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},e.prototype.getTooltipItems=function(t){var e=this.getController("tooltip");return e?e.getTooltipItems(t):[]},e.prototype.getSnapRecords=function(t){for(var e=this.geometries,n=[],r=0,i=e.length;r<i;r++){var o=e[r],a=o.dataArray;o.sort(a);for(var s=void 0,l=0,u=a.length;l<u;l++){(s=Tat(t,a[l],o))&&n.push(s)}}var c=this.views;for(r=0,i=c.length;r<i;r++){var d=c[r].getSnapRecords(t);n=n.concat(d)}return n},e.prototype.getComponents=function(){for(var t=[],e=this.controllers,n=0,r=e.length;n<r;n++){var i=e[n];t=t.concat(i.getComponents())}return t},e.prototype.filterData=function(t){var e=this.options.filters;return 0===Ql(e)?t:ds(t,(function(t,n){return Object.keys(e).every((function(r){return(0,e[r])(t[r],t,n)}))}))},e.prototype.filterFieldData=function(t,e){var n=this.options.filters,r=Ul(n,t);return kl(r)?e:e.filter((function(e,n){return r(e[t],e,n)}))},e.prototype.adjustCoordinate=function(){var t=this.getCoordinate(),e=t.start,n=t.end,r=this.coordinateBBox.bl,i=this.coordinateBBox.tr;Nl(e,r)&&Nl(n,i)?this.isCoordinateChanged=!1:(this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(r,i))},e.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(Ktt.BEFORE_PAINT),this.renderPaddingRecursive(t),this.renderLayoutRecursive(t),this.renderBackgroundStyleShape(),this.renderPaintRecursive(t),this.emit(Ktt.AFTER_PAINT),this.isDataChanged=!1},e.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var t=Ul(this.themeObject,"background");if(t){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var e=this.viewBBox,n=e.x,r=e.y,i=e.width,o=e.height;this.backgroundStyleRectShape.attr({fill:t,x:n,y:r,width:i,height:o})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},e.prototype.renderPaddingRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.autoPadding=Uat(this).shrink(Rat(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();for(var e=this.views,n=0,r=e.length;n<r;n++){e[n].renderPaddingRecursive(t)}},e.prototype.renderLayoutRecursive=function(t){var e=!0===this.syncViewPadding?$at:gs(this.syncViewPadding)?this.syncViewPadding:void 0;e&&(e(this,this.views,Gat),this.views.forEach((function(t){t.coordinateBBox=t.viewBBox.shrink(t.autoPadding.getPadding()),t.adjustCoordinate()}))),this.doLayout();for(var n=this.views,r=0,i=n.length;r<i;r++){n[r].renderLayoutRecursive(t)}},e.prototype.renderPaintRecursive=function(t){var e=this.middleGroup;if(this.limitInPlot){var n=not(this.coordinateInstance),r=n.type,i=n.attrs;e.setClip({type:r,attrs:i})}else e.setClip(void 0);this.paintGeometries(t),this.renderComponents(t);for(var o=this.views,a=0,s=o.length;a<s;a++){o[a].renderPaintRecursive(t)}},e.prototype.createScale=function(t,e,n,r){var i=Ul(this.options.scales,[t]),o=Za(Za({},i),n);return this.parent?this.parent.createScale(t,e,o,r):this.scalePool.createScale(t,e,o,r)},e.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var e=this.views,n=0,r=e.length;n<r;n++){e[n].renderDataRecursive(t)}},e.prototype.calculateViewBBox=function(){var t,e,n,r;if(this.parent){var i=this.parent.coordinateBBox;t=i.x,e=i.y,n=i.width,r=i.height}else t=0,e=0,n=this.canvas.get("width"),r=this.canvas.get("height");var o=this.region,a=o.start,s=o.end,l=new Zit(t+n*a.x,e+r*a.y,n*(s.x-a.x),r*(s.y-a.y));this.viewBBox&&this.viewBBox.isEqual(l)||(this.viewBBox=new Zit(t+n*a.x,e+r*a.y,n*(s.x-a.x),r*(s.y-a.y))),this.coordinateBBox=this.viewBBox},e.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},e.prototype.initComponentController=function(){for(var t=this.usedControllers,e=0,n=t.length;e<n;e++){var r=t[e],i=Lat[r];i&&this.controllers.push(new i(this))}},e.prototype.createViewEvent=function(t){var e=t.shape,n=t.name,r=e?e.get("origin"):null,i=new Nat(this,t,r);return i.type=n,i},e.prototype.doPlotEvent=function(t){var e=t.type,n={x:t.x,y:t.y};if(["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"].includes(e)){var r=this.isPointInPlot(n),i=t.clone();if(r){var o="plot:"+e;i.type=o,this.emit(o,i),"mouseleave"!==e&&"touchend"!==e||(this.isPreMouseInPlot=!1)}"mousemove"===e||"touchmove"===e?(this.isPreMouseInPlot&&!r?("mousemove"===e&&(i.type=tet.MOUSE_LEAVE,this.emit(tet.MOUSE_LEAVE,i)),i.type=tet.LEAVE,this.emit(tet.LEAVE,i)):!this.isPreMouseInPlot&&r&&("mousemove"===e&&(i.type=tet.MOUSE_ENTER,this.emit(tet.MOUSE_ENTER,i)),i.type=tet.ENTER,this.emit(tet.ENTER,i)),this.isPreMouseInPlot=r):"mouseleave"!==e&&"touchend"!==e||this.isPreMouseInPlot&&("mouseleave"===e&&(i.type=tet.MOUSE_LEAVE,this.emit(tet.MOUSE_LEAVE,i)),i.type=tet.LEAVE,this.emit(tet.LEAVE,i),this.isPreMouseInPlot=!1)}},e.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},e.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var e=this.getCoordinate(),n=Ul(this.options,"scales",{}),r=this.geometries,i=0,o=r.length;i<o;i++){var a=r[i];a.scales=this.getGeometryScales();var s={coordinate:e,scaleDefs:n,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};t?a.update(s):a.init(s)}this.adjustScales()},e.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),e=this.getGroupedFields(),n=this.getOptions(),r=n.data,i=n.scales,o=void 0===i?{}:i,a=this.filteredData,s=0,l=t.length;s<l;s++){var u=t[s],c=o[u],d=this.getScaleKey(u);this.createScale(u,e.includes(u)?r:a,c,d),this.createdScaleKeys.set(d,!0)}},e.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},e.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),e={},n=0;n<t.length;n++){var r=t[n];e[r]=this.getScaleByField(r)}return e},e.prototype.getScaleFields=function(){for(var t=[],e={},n=this.geometries,r=0;r<n.length;r++){Kit(n[r].getScaleFields(),t,e)}return t},e.prototype.getGroupedFields=function(){for(var t=[],e={},n=this.geometries,r=0;r<n.length;r++){Kit(n[r].getGroupFields(),t,e)}return t},e.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},e.prototype.adjustCategoryScaleRange=function(){var t=this,e=is([this.getXScale()],this.getYScales()).filter((function(t){return!!t})),n=this.getCoordinate(),r=this.options.scales;bs(e,(function(e){var i=e.field,o=e.values,a=e.isCategory,s=e.isIdentity;(a||s)&&o&&!Ul(r,[i,"range"])&&(e.range=aot(e,n,t.theme))}))},e.prototype.initComponents=function(t){for(var e=this.controllers,n=0;n<e.length;n++){var r=e[n];t?r.update():(r.clear(),r.render())}},e.prototype.doLayout=function(){this.layoutFunc(this)},e.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,e=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,e)},e.prototype.paintGeometries=function(t){for(var e=this.options.animate,n=this.getCoordinate(),r={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},i=this.geometries,o=0;o<i.length;o++){var a=i[o];a.coordinate=n,a.canvasRegion=r,e||a.animate(!1),a.paint(t)}},e.prototype.renderComponents=function(t){for(var e=0;e<this.getComponents().length;e++){this.getComponents()[e].component.render()}},e.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},e.prototype.initOptions=function(){var t=this,e=this.options,n=e.geometries,r=void 0===n?[]:n,i=e.interactions,o=void 0===i?[]:i,a=e.views,s=void 0===a?[]:a,l=e.annotations,u=void 0===l?[]:l,c=e.coordinate,d=e.events,h=e.facets;this.coordinateController?c&&this.coordinateController.update(c):this.coordinateController=new Fat(c);for(var f=0;f<r.length;f++){var p=r[f];this.createGeometry(p)}for(var g=0;g<o.length;g++){var v=o[g],m=v.type,y=v.cfg;this.interaction(m,y)}for(var b=0;b<s.length;b++){var x=s[b];this.createView(x)}for(var w=this.getController("annotation"),C=0;C<u.length;C++){var S=u[C];w.annotation(S)}d&&bs(d,(function(e,n){t.on(n,e)})),h&&bs(h,(function(e){var n=e.type,r=Qa(e,["type"]);t.facet(n,r)}))},e.prototype.createGeometry=function(t){var e=t.type,n=t.cfg,r=void 0===n?{}:n;if(this[e]){var i=this[e](r);bs(t,(function(t,e){gs(i[e])&&i[e](t)}))}},e.prototype.getScaleKey=function(t){return this.id+"-"+t},e}(fet);function Wat(t,e){Vat.prototype[t.toLowerCase()]=function(t){void 0===t&&(t={});var n=Za({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},t),r=new e(n);return this.geometries.push(r),r}}var Hat=function(t){function e(e){var n=this,r=e.container,i=e.width,o=e.height,a=e.autoFit,s=void 0!==a&&a,l=e.padding,u=e.appendPadding,c=e.renderer,d=void 0===c?"canvas":c,h=e.pixelRatio,f=e.localRefresh,p=void 0===f||f,g=e.visible,v=void 0===g||g,m=e.supportCSSTransform,y=void 0!==m&&m,b=e.defaultInteractions,x=void 0===b?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text"]:b,w=e.options,C=e.limitInPlot,S=e.theme,k=e.syncViewPadding,E=zs(r)?document.getElementById(r):r,M=fw('<div style="position:relative;"></div>');E.appendChild(M);var A=het(E,s,i,o),_=new(function(t){var e=uet[t];if(!e)throw new Error("G engine '"+t+"' is not exist, please register it at first.");return e}(d).Canvas)(Za({container:M,pixelRatio:h,localRefresh:p,supportCSSTransform:y},A));return(n=t.call(this,{parent:null,canvas:_,backgroundGroup:_.addGroup({zIndex:aet}),middleGroup:_.addGroup({zIndex:oet}),foregroundGroup:_.addGroup({zIndex:iet}),padding:l,appendPadding:u,visible:v,options:w,limitInPlot:C,theme:S,syncViewPadding:k})||this).onResize=Il((function(){n.forceFit()}),300),n.ele=E,n.canvas=_,n.width=A.width,n.height=A.height,n.autoFit=s,n.localRefresh=p,n.renderer=d,n.wrapperElement=M,n.updateCanvasStyle(),n.bindAutoFit(),n.initDefaultInteractions(x),n}return Ka(e,t),e.prototype.initDefaultInteractions=function(t){var e=this;bs(t,(function(t){e.interaction(t)}))},e.prototype.changeSize=function(t,e){return this.width===t&&this.height===e||(this.emit(Ktt.BEFORE_CHANGE_SIZE),this.width=t,this.height=e,this.canvas.changeSize(t,e),this.render(!0),this.emit(Ktt.AFTER_CHANGE_SIZE)),this},e.prototype.destroy=function(){var e,n;t.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),e=this.wrapperElement,(n=e.parentNode)&&n.removeChild(e),this.wrapperElement=null},e.prototype.changeVisible=function(e){return t.prototype.changeVisible.call(this,e),this.wrapperElement.style.display=e?"":"none",this},e.prototype.forceFit=function(){if(!this.destroyed){var t=het(this.ele,!0,this.width,this.height),e=t.width,n=t.height;this.changeSize(e,n)}},e.prototype.updateCanvasStyle=function(){mw(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},e.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},e.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},e}(Vat),Yat=function(){function t(t){this.visible=!0,this.components=[],this.view=t}return t.prototype.clear=function(t){bs(this.components,(function(t){t.component.destroy()})),this.components=[]},t.prototype.destroy=function(){this.clear()},t.prototype.getComponents=function(){return this.components},t.prototype.changeVisible=function(t){this.visible!==t&&(this.components.forEach((function(e){t?e.component.show():e.component.hide()})),this.visible=t)},t}();var Xat=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isLocked=!1,e}return Ka(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.isVisible=function(){return!1!==this.view.getOptions().tooltip},e.prototype.render=function(){},e.prototype.showTooltip=function(t){if(this.point=t,this.isVisible()){var e=this.view,n=this.getTooltipItems(t);if(n.length){var r=this.getTitle(n),i={x:n[0].x,y:n[0].y};e.emit("tooltip:show",Nat.fromData(e,"tooltip:show",Za({items:n,title:r},t)));var o=this.getTooltipCfg(),a=o.follow,s=o.showMarkers,l=o.showCrosshairs,u=o.showContent,c=o.marker,d=this.items,h=this.title;if(Nl(h,r)&&Nl(d,n)?(this.tooltip&&a&&(this.tooltip.update(t),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()):(e.emit("tooltip:change",Nat.fromData(e,"tooltip:change",Za({items:n,title:r},t))),(gs(u)?u(n):u)&&(this.tooltip||this.renderTooltip(),this.tooltip.update(Tl({},o,{items:this.getItemsAfterProcess(n),title:r},a?t:{})),this.tooltip.show()),s&&this.renderTooltipMarkers(n,c)),this.items=n,this.title=r,l){var f=Ul(o,["crosshairs","follow"],!1);this.renderCrosshairs(f?t:i,o)}}else this.hideTooltip()}},e.prototype.hideTooltip=function(){if(this.getTooltipCfg().follow){var t=this.tooltipMarkersGroup;t&&t.hide();var e=this.xCrosshair,n=this.yCrosshair;e&&e.hide(),n&&n.hide();var r=this.tooltip;r&&r.hide(),this.view.emit("tooltip:hide",Nat.fromData(this.view,"tooltip:hide",{})),this.point=null}else this.point=null},e.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},e.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},e.prototype.isTooltipLocked=function(){return this.isLocked},e.prototype.clear=function(){var t=this,e=t.tooltip,n=t.xCrosshair,r=t.yCrosshair,i=t.tooltipMarkersGroup;e&&(e.hide(),e.clear()),n&&n.clear(),r&&r.clear(),i&&i.clear(),this.reset()},e.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},e.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},e.prototype.changeVisible=function(t){if(this.visible!==t){var e=this,n=e.tooltip,r=e.tooltipMarkersGroup,i=e.xCrosshair,o=e.yCrosshair;t?(n&&n.show(),r&&r.show(),i&&i.show(),o&&o.show()):(n&&n.hide(),r&&r.hide(),i&&i.hide(),o&&o.hide()),this.visible=t}},e.prototype.getTooltipItems=function(t){var e=this.findItemsFromView(this.view,t);if(e.length){for(var n=0,r=e=As(e);n<r.length;n++)for(var i=0,o=r[n];i<o.length;i++){var a=o[i],s=a.mappingData,l=s.x,u=s.y;a.x=ms(l)?l[l.length-1]:l,a.y=ms(u)?u[u.length-1]:u}if(!1===this.getTooltipCfg().shared&&e.length>1){for(var c=e[0],d=Math.abs(t.y-c[0].y),h=0,f=e;h<f.length;h++){var p=f[h],g=Math.abs(t.y-p[0].y);g<=d&&(c=p,d=g)}e=[c]}return function(t){for(var e=[],n=function(n){var r=t[n];ks(e,(function(t){return t.color===r.color&&t.name===r.name&&t.value===r.value&&t.title===r.title}))||e.push(r)},r=0;r<t.length;r++)n(r);return e}(As(e))}return[]},e.prototype.layout=function(){},e.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},e.prototype.isCursorEntered=function(t){if(this.tooltip){var e=this.tooltip.getContainer(),n=this.tooltip.get("capture");if(e&&n){var r=e.getBoundingClientRect(),i=r.x,o=r.y,a=r.width,s=r.height;return new Zit(i,o,a,s).isPointIn(t)}}return!1},e.prototype.getTooltipCfg=function(){var t=this.view,e=t.getOptions().tooltip,n=this.processCustomContent(e),r=t.getTheme(),i=Ul(r,["components","tooltip"],{}),o=Ul(n,"enterable",i.enterable);return Rl({},i,n,{capture:!(!o&&!this.isLocked)})},e.prototype.processCustomContent=function(t){if(bl(t)||!Ul(t,"customContent"))return t;var e=t.customContent;return Za(Za({},t),{customContent:function(t,n){var r=e(t,n)||"";return zs(r)?'<div class="g2-tooltip">'+r+"</div>":r}})},e.prototype.getTitle=function(t){var e=t[0].title||t[0].name;return this.title=e,e},e.prototype.renderTooltip=function(){var t=this.view.getCanvas(),e={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},n=this.getTooltipCfg(),r=new Uit(Za(Za({parent:t.get("el").parentNode,region:e},n),{visible:!1,crosshairs:null}));r.init(),this.tooltip=r},e.prototype.renderTooltipMarkers=function(t,e){for(var n=this.getTooltipMarkersGroup(),r=0,i=t;r<i.length;r++){var o=i[r],a=o.x,s=o.y,l=Za(Za({fill:o.color,symbol:"circle",shadowColor:o.color},e),{x:a,y:s});n.addShape("marker",{attrs:l})}},e.prototype.renderCrosshairs=function(t,e){var n=Ul(e,["crosshairs","type"],"x");"x"===n?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,e)):"y"===n?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,e)):"xy"===n&&(this.renderXCrosshairs(t,e),this.renderYCrosshairs(t,e))},e.prototype.renderXCrosshairs=function(t,e){var n=this.getViewWithGeometry(this.view).getCoordinate();if(tot(n,t)){var r,i;if(n.isRect)n.isTransposed?(r={x:n.start.x,y:t.y},i={x:n.end.x,y:t.y}):(r={x:t.x,y:n.end.y},i={x:t.x,y:n.start.y});else{var o=eot(n,t),a=n.getCenter(),s=n.getRadius();i=$it(a.x,a.y,s,o),r=a}var l=Rl({start:r,end:i,container:this.getTooltipCrosshairsGroup()},Ul(e,"crosshairs",{}),this.getCrosshairsText("x",t,e));delete l.type;var u=this.xCrosshair;u?u.update(l):(u=new Jrt(l)).init(),u.render(),u.show(),this.xCrosshair=u}},e.prototype.renderYCrosshairs=function(t,e){var n=this.getViewWithGeometry(this.view).getCoordinate();if(tot(n,t)){var r,i;if(n.isRect){var o=void 0,a=void 0;n.isTransposed?(o={x:t.x,y:n.end.y},a={x:t.x,y:n.start.y}):(o={x:n.start.x,y:t.y},a={x:n.end.x,y:t.y}),r={start:o,end:a},i="Line"}else r={center:n.getCenter(),radius:Jit(n,t),startAngle:n.startAngle,endAngle:n.endAngle},i="Circle";delete(r=Rl({container:this.getTooltipCrosshairsGroup()},r,Ul(e,"crosshairs",{}),this.getCrosshairsText("y",t,e))).type;var s=this.yCrosshair;s?n.isRect&&"circle"===s.get("type")||!n.isRect&&"line"===s.get("type")?(s=new rit[i](r)).init():s.update(r):(s=new rit[i](r)).init(),s.render(),s.show(),this.yCrosshair=s}},e.prototype.getCrosshairsText=function(t,e,n){var r=Ul(n,["crosshairs","text"]),i=Ul(n,["crosshairs","follow"]),o=this.items;if(r){var a=this.getViewWithGeometry(this.view),s=o[0],l=a.getXScale(),u=a.getYScales()[0],c=void 0,d=void 0;if(i){var h=this.view.getCoordinate().invert(e);c=l.invert(h.x),d=u.invert(h.y)}else c=s.data[l.field],d=s.data[u.field];var f="x"===t?c:d;return gs(r)?r=r(t,f,o,e):r.content=f,{text:r}}},e.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},e.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):((t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"})).toFront(),this.tooltipMarkersGroup=t),t},e.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||((t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1})).toBack(),this.tooltipCrosshairsGroup=t),t},e.prototype.findItemsFromView=function(t,e){if(!1===t.getOptions().tooltip)return[];for(var n=Oat(t,e,this.getTooltipCfg()),r=0,i=t.views;r<i.length;r++){var o=i[r];n=n.concat(this.findItemsFromView(o,e))}return n},e.prototype.getViewWithGeometry=function(t){var e=this;return t.geometries.length?t:ks(t.views,(function(t){return e.getViewWithGeometry(t)}))},e.prototype.getItemsAfterProcess=function(t){var e=this.getTooltipCfg().customItems;return(e||function(t){return t})(t)},e}(Yat),qat={};function Kat(t){return qat[t.toLowerCase()]}function Zat(t,e){qat[t.toLowerCase()]=e}var Qat={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},Jat={interval:function(t){return{enter:{animation:t.isRect?t.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:t.isPolar&&t.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},tst={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(t){var e;return t.isRect?e=t.isTransposed?"grow-in-x":"grow-in-y":(e="grow-in-xy",t.isPolar&&t.isTransposed&&(e="wave-in")),{animation:e}},schema:function(t){return{animation:t.isRect?t.isTransposed?"grow-in-x":"grow-in-y":"grow-in-xy"}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function est(t,e,n){var r=Jat[t];return r&&(gs(r)&&(r=r(e)),r=Rl({},Qat,r),n)?r[n]:r}function nst(t,e,n){var r=Ul(t.get("origin"),"data","_origin"),i=e.animation,o=function(t,e){return{delay:gs(t.delay)?t.delay(e):t.delay,easing:gs(t.easing)?t.easing(e):t.easing,duration:gs(t.duration)?t.duration(e):t.duration,callback:t.callback,repeat:t.repeat}}(e,r);if(i){var a=Kat(i);a&&a(t,o,n)}else t.animate(n.toAttrs,o)}var rst=function(t){function e(e){var n=t.call(this,e)||this;n.states=[];var r=e.shapeFactory,i=e.container,o=e.offscreenGroup,a=e.visible,s=void 0===a||a;return n.shapeFactory=r,n.container=i,n.offscreenGroup=o,n.visible=s,n}return Ka(e,t),e.prototype.draw=function(t,e){void 0===e&&(e=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,e),!1===this.visible&&this.changeVisible(!1)},e.prototype.update=function(t){var e=this.shapeFactory,n=this.shape;if(n){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(n,t);var r=this.getOffscreenGroup(),i=e.drawShape(this.shapeType,t,r);i.cfg.data=this.data,i.cfg.origin=t,i.cfg.element=this,this.syncShapeStyle(n,i,this.getStates(),this.getAnimateCfg("update"))}},e.prototype.destroy=function(){var e=this.shapeFactory,n=this.shape;if(n){var r=this.getAnimateCfg("leave");r?nst(n,r,{coordinate:e.coordinate,toAttrs:Za({},n.attr())}):n.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,t.prototype.destroy.call(this)},e.prototype.changeVisible=function(e){t.prototype.changeVisible.call(this,e),e?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach((function(t){t.show()}))):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach((function(t){t.hide()})))},e.prototype.setState=function(t,e){var n=this,r=n.states,i=n.shapeFactory,o=n.model,a=n.shape,s=n.shapeType,l=r.indexOf(t);if(e){if(l>-1)return;r.push(t),"active"!==t&&"selected"!==t||null==a||a.toFront()}else{if(-1===l)return;r.splice(l,1),"active"!==t&&"selected"!==t||null==a||a.toBack()}var u=i.drawShape(s,o,this.getOffscreenGroup());r.length?this.syncShapeStyle(a,u,r,null):this.syncShapeStyle(a,u,["reset"],null),u.remove(!0);var c={state:t,stateStatus:e,element:this,target:this.container};this.container.emit("statechange",c),qnt(this.shape,"statechange",c)},e.prototype.clearStates=function(){var t=this;bs(this.states,(function(e){t.setState(e,!1)})),this.states=[]},e.prototype.hasState=function(t){return this.states.includes(t)},e.prototype.getStates=function(){return this.states},e.prototype.getData=function(){return this.data},e.prototype.getModel=function(){return this.model},e.prototype.getBBox=function(){var t=this.shape,e=this.labelShape,n={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return t&&(n=t.getCanvasBBox()),e&&e.forEach((function(t){var e=t.getCanvasBBox();n.x=Math.min(e.x,n.x),n.y=Math.min(e.y,n.y),n.minX=Math.min(e.minX,n.minX),n.minY=Math.min(e.minY,n.minY),n.maxX=Math.max(e.maxX,n.maxX),n.maxY=Math.max(e.maxY,n.maxY)})),n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n},e.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this,e=t.shapeType,n=t.geometry,r=t.shapeFactory,i=n.stateOption,o=r.defaultShapeType,a=r.theme[e]||r.theme[o];this.statesStyle=Rl({},a,i)}return this.statesStyle},e.prototype.getStateStyle=function(t,e){var n=this.getStatesStyle(),r=Ul(n,[t,"style"],{}),i=r[e]||r;return gs(i)?i(this):i},e.prototype.getAnimateCfg=function(t){var e=this,n=this.animate;if(n){var r=n[t];return r?Za(Za({},r),{callback:function(){var t;gs(r.callback)&&r.callback(),null===(t=e.geometry)||void 0===t||t.emit(Qtt.AFTER_DRAW_ANIMATE)}}):r}return null},e.prototype.drawShape=function(t,e){var n;void 0===e&&(e=!1);var r=this,i=r.shapeFactory,o=r.container,a=r.shapeType;if(this.shape=i.drawShape(a,t,o),this.shape){this.setShapeInfo(this.shape,t);var s=this.shape.cfg.name;s?zs(s)&&(this.shape.cfg.name=["element",s]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var l=e?"enter":"appear",u=this.getAnimateCfg(l);u&&(null===(n=this.geometry)||void 0===n||n.emit(Qtt.BEFORE_DRAW_ANIMATE),nst(this.shape,u,{coordinate:i.coordinate,toAttrs:Za({},this.shape.attr())}))}},e.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},e.prototype.setShapeInfo=function(t,e){var n=this;(t.cfg.origin=e,t.cfg.element=this,t.isGroup())&&t.get("children").forEach((function(t){n.setShapeInfo(t,e)}))},e.prototype.syncShapeStyle=function(t,e,n,r,i){var o,a=this;if(void 0===n&&(n=[]),void 0===i&&(i=0),t&&e){var s=t.get("clipShape"),l=e.get("clipShape");if(this.syncShapeStyle(s,l,n,r),t.isGroup())for(var u=t.get("children"),c=e.get("children"),d=0;d<u.length;d++)this.syncShapeStyle(u[d],c[d],n,r,i+d);else{if(!Fl(n)&&!Nl(n,["reset"])){var h=t.get("name");ms(h)&&(h=h[1]),bs(n,(function(t){if("element-background"!==e.get("name")){var n=a.getStateStyle(t,h||i);e.attr(n)}}))}var f=Yit(t,e);this.animate?r?(null===(o=this.geometry)||void 0===o||o.emit(Qtt.BEFORE_DRAW_ANIMATE),nst(t,r,{coordinate:this.shapeFactory.coordinate,toAttrs:f,shapeModel:this.model})):Fl(n)?(t.stopAnimate(),t.animate(f,{duration:300})):t.attr(f):t.attr(f)}}},e.prototype.getShapeType=function(t){var e=Ul(t,"shape");return ms(e)?e[0]:e},e}(fet),ist={},ost={};function ast(t,e){ist[t.toLowerCase()]=e}function sst(t,e){ost[t.toLowerCase()]=e}var lst={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(t,e){var n=this.getShape(t);return n.getPoints?n.getPoints(e):this.getDefaultPoints(e)},getShape:function(t){var e=this[t]||this[this.defaultShapeType];return e.coordinate=this.coordinate,e},getDefaultPoints:function(){return[]},getDefaultStyle:function(t){return Ul(t,[this.defaultShapeType,"default","style"],{})},getMarker:function(t,e){var n=this.getShape(t);if(!n.getMarker){var r=this.defaultShapeType;n=this.getShape(r)}var i=this.theme,o=Ul(i,[t,"default"],{}),a=n.getMarker(e);return Rl({},o,a)},drawShape:function(t,e,n){return this.getShape(t).draw(e,n)}},ust={coordinate:null,parsePath:function(t){var e=this.coordinate,n=lv(t);return n=e.isPolar?Tot(e,n):function(t,e){var n=[];return bs(e,(function(e){switch(e[0].toLowerCase()){case"m":case"l":case"c":n.push(kot(e,t));break;case"a":n.push(Eot(e,t));break;case"z":default:n.push(e)}})),n}(e,n)},parsePoint:function(t){return this.coordinate.convert(t)},parsePoints:function(t){var e=this.coordinate;return t.map((function(t){return e.convert(t)}))},draw:function(t,e){}},cst={};function dst(t,e){var n=vl(t),r=Za(Za(Za({},lst),e),{geometryType:t});return cst[n]=r,r}function hst(t,e,n){var r=vl(t),i=cst[r],o=Za(Za({},ust),n);return i[e]=o,o}function fst(t){var e=vl(t);return cst[e]}function pst(t,e){return Hs(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],(function(n){return!Nl(t[n],e[n])}))}function gst(t){return ms(t)?t:t.split("*")}var vst=function(t){function e(e){var n=t.call(this,e)||this;n.type="base",n.attributes={},n.elements=[],n.elementsMap={},n.animateOption=!0,n.attributeOption={},n.lastElementsMap={},n.generatePoints=!1,n.beforeMappingData=null,n.adjusts={},n.idFields=[],n.hasSorted=!1,n.isCoordinateChanged=!1;var r=e.container,i=e.labelsContainer,o=e.coordinate,a=e.data,s=e.sortable,l=void 0!==s&&s,u=e.visible,c=void 0===u||u,d=e.theme,h=e.scales,f=void 0===h?{}:h,p=e.scaleDefs,g=void 0===p?{}:p,v=e.intervalPadding,m=e.dodgePadding,y=e.maxColumnWidth,b=e.minColumnWidth,x=e.columnWidthRatio,w=e.roseWidthRatio,C=e.multiplePieWidthRatio,S=e.zIndexReversed;return n.container=r,n.labelsContainer=i,n.coordinate=o,n.data=a,n.sortable=l,n.visible=c,n.userTheme=d,n.scales=f,n.scaleDefs=g,n.intervalPadding=v,n.dodgePadding=m,n.maxColumnWidth=y,n.minColumnWidth=b,n.columnWidthRatio=x,n.roseWidthRatio=w,n.multiplePieWidthRatio=C,n.zIndexReversed=S,n}return Ka(e,t),e.prototype.position=function(t){var e=t;Ss(t)||(e={fields:gst(t)});var n=Ul(e,"fields");return 1===n.length&&(n.unshift("1"),$l(e,"fields",n)),$l(this.attributeOption,"position",e),this},e.prototype.color=function(t,e){return this.createAttrOption("color",t,e),this},e.prototype.shape=function(t,e){return this.createAttrOption("shape",t,e),this},e.prototype.size=function(t,e){return this.createAttrOption("size",t,e),this},e.prototype.adjust=function(t){var e=t;return(zs(t)||Ss(t))&&(e=[t]),bs(e,(function(t,n){ys(t)||(e[n]={type:t})})),this.adjustOption=e,this},e.prototype.style=function(t,e){if(zs(t)){var n=gst(t);this.styleOption={fields:n,callback:e}}else{var r=t,i=(n=r.fields,r.callback),o=r.cfg;this.styleOption=n||i||o?t:{cfg:t}}return this},e.prototype.tooltip=function(t,e){if(zs(t)){var n=gst(t);this.tooltipOption={fields:n,callback:e}}else this.tooltipOption=t;return this},e.prototype.animate=function(t){return this.animateOption=t,this},e.prototype.label=function(t,e,n){if(zs(t)){var r={},i=gst(t);r.fields=i,gs(e)?r.callback=e:Ss(e)&&(r.cfg=e),n&&(r.cfg=n),this.labelOption=r}else this.labelOption=t;return this},e.prototype.state=function(t){return this.stateOption=t,this},e.prototype.customInfo=function(t){return this.customOption=t,this},e.prototype.init=function(t){void 0===t&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},e.prototype.update=function(t){void 0===t&&(t={});var e=t.data,n=t.isDataChanged,r=t.isCoordinateChanged,i=this.attributeOption,o=this.lastAttributeOption;Nl(i,o)?!e||!n&&Nl(e,this.data)?this.setCfg(t):(this.setCfg(t),this.initAttributes(),this.processData(e)):this.init(t),this.adjustScale(),this.isCoordinateChanged=r},e.prototype.paint=function(t){var e=this;void 0===t&&(t=!1),this.animateOption&&(this.animateOption=Rl({},est(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elements=[],this.elementsMap={},this.getOffscreenGroup().clear();for(var n=this.beforeMappingData,r=this.beforeMapping(n),i=[],o=0,a=r.length;o<a;o++){var s=r[o],l=this.mapping(s);i.push(l),this.createElements(l,o,t)}if(this.canDoGroupAnimation(t)){var u=this.container,c=this.type,d=this.coordinate,h=Ul(this.animateOption,"appear"),f=this.getYScale(),p=d.convert({x:0,y:f.scale(this.getYMinValue())});!function(t,e,n,r,i){if(tst[n]){var o=tst[n](r),a=Kat(Ul(o,"animation",""));if(a){var s=Za(Za(Za({},Qat.appear),o),e);t.stopAnimate(),a(t,s,{coordinate:r,minYPoint:i,toAttrs:null})}}}(u,h,c,d,p)}this.labelOption&&this.renderLabels(As(i),t),this.dataArray=i,bs(this.lastElementsMap,(function(t){t.animate=e.animateOption,t.destroy()})),this.lastElementsMap=this.elementsMap,this.lastAttributeOption=Za({},this.attributeOption),!1===this.visible&&this.changeVisible(!1)},e.prototype.clear=function(){var t=this,e=t.container,n=t.geometryLabel,r=t.offscreenGroup;e&&e.clear(),n&&n.clear(),r&&r.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},e.prototype.destroy=function(){this.clear(),this.container.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,t.prototype.destroy.call(this)},e.prototype.getGroupScales=function(){return this.groupScales},e.prototype.getAttribute=function(t){return this.attributes[t]},e.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},e.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},e.prototype.getGroupAttributes=function(){var t=[];return bs(this.attributes,(function(e){set.includes(e.type)&&t.push(e)})),t},e.prototype.getDefaultValue=function(t){var e,n=this.getAttribute(t);return n&&Fl(n.scales)&&(e=n.values[0]),e},e.prototype.getAttributeValues=function(t,e){for(var n=[],r=t.scales,i=0,o=r.length;i<o;i++){var a=r[i],s=a.field;a.isIdentity?n.push(a.values):n.push(e[s])}return t.mapping.apply(t,n)},e.prototype.getAdjust=function(t){return this.adjusts[t]},e.prototype.getShapeMarker=function(t,e){return this.getShapeFactory().getMarker(t,e)},e.prototype.getElementsBy=function(t){return this.elements.filter((function(e){return t(e)}))},e.prototype.getElementId=function(t){var e=(t=ms(t)?t[0]:t)._origin;if(this.idFields.length){for(var n=e[this.idFields[0]],r=1;r<this.idFields.length;r++)n+="-"+e[this.idFields[r]];return n}var i,o,a=this.type,s=this.getXScale(),l=this.getYScale(),u=s.field||"x",c=e[l.field||"y"];i="identity"===s.type?s.values[0]:e[u],o="interval"===a||"schema"===a?""+i:"line"===a||"area"===a||"path"===a?a:i+"-"+c;var d=this.groupScales;Fl(d)&&(d=Ul(this.getAttribute("color"),"scales",[]));r=0;for(var h=d.length;r<h;r++){o=o+"-"+e[d[r].field]}var f=this.getAdjust("dodge");if(f){var p=f.dodgeBy;p&&(o=o+"-"+e[p])}return this.getAdjust("jitter")&&(o=o+"-"+t.x+"-"+t.y),o},e.prototype.getScaleFields=function(){var t=[],e={},n=this,r=n.attributeOption,i=n.labelOption,o=n.tooltipOption;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a];s.fields?Kit(s.fields,t,e):s.values&&Kit(s.values,t,e)}return i&&i.fields&&Kit(i.fields,t,e),ys(o)&&o.fields&&Kit(o.fields,t,e),t},e.prototype.changeVisible=function(e){t.prototype.changeVisible.call(this,e);for(var n=this.elements,r=0,i=n.length;r<i;r++){n[r].changeVisible(e)}e?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},e.prototype.getGroupFields=function(){for(var t=[],e={},n=0,r=set.length;n<r;n++){var i=set[n],o=this.attributeOption[i];o&&o.fields&&Kit(o.fields,t,e)}return t},e.prototype.getXYFields=function(){var t=this.attributeOption.position.fields;return[t[0],t[1]]},e.prototype.getShapes=function(){return this.elements.map((function(t){return t.shape}))},e.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},e.prototype.sort=function(t){if(!this.hasSorted)for(var e=this.getXScale(),n=e.field,r=0;r<t.length;r++){t[r].sort((function(t,r){return e.translate(t._origin[n])-e.translate(r._origin[n])}))}this.hasSorted=!0},e.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},e.prototype.getShapeFactory=function(){var t=this.shapeType;if(fst(t))return this.shapeFactory||(this.shapeFactory=Pl(fst(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},e.prototype.createShapePointsCfg=function(t){var e=this.getXScale(),n=this.getYScale();return{x:this.normalizeValues(t[e.field],e),y:n?this.normalizeValues(t[n.field],n):t.y?t.y:.1,y0:n?n.scale(this.getYMinValue()):void 0}},e.prototype.createElement=function(t,e){void 0===e&&(e=!1);var n=this.container,r=this.getDrawCfg(t),i=this.getShapeFactory(),o=new rst({shapeFactory:i,container:n,offscreenGroup:this.getOffscreenGroup()});return o.animate=this.animateOption,o.geometry=this,o.draw(r,e),o},e.prototype.getDrawCfg=function(t){var e=t._origin,n={mappingData:t,data:e,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},r=t.shape;!r&&this.getShapeFactory()&&(r=this.getShapeFactory().defaultShapeType),n.shape=r;var i=this.theme.geometries[this.shapeType];n.defaultStyle=Ul(i,[r,"default"],{}).style,!n.defaultStyle&&this.getShapeFactory()&&(n.defaultStyle=this.getShapeFactory().getDefaultStyle(i));var o=this.styleOption;return o&&(n.style=this.getStyleCfg(o,e)),this.generatePoints&&(n.points=t.points,n.nextPoints=t.nextPoints),n},e.prototype.createElements=function(t,e,n){void 0===n&&(n=!1);for(var r=this,i=r.lastElementsMap,o=r.elementsMap,a=r.elements,s=0,l=t.length;s<l;s++){var u=t[s],c=this.getElementId(u);o[c]&&(c=c+"-"+e+"-"+s);var d=i[c];if(d){var h=this.getDrawCfg(u),f=d.getModel();(this.isCoordinateChanged||pst(h,f))&&(d.animate=this.animateOption,d.update(h)),delete i[c]}else d=this.createElement(u,n);a.push(d),o[c]=d}if(this.zIndexReversed){var p=a.length;a.forEach((function(t,e){t.shape.setZIndex(p-e)}))}return a},e.prototype.getLabelType=function(){var t=this,e=t.labelOption,n=t.coordinate,r=t.type,i=n.type,o=n.isTransposed,a=Ul(e,["cfg","type"]);return a||(a="polar"===i?o?"pie":"polar":"theta"===i?"pie":"interval"===r||"polygon"===r?"interval":"base"),a},e.prototype.getYMinValue=function(){var t=this.getYScale(),e=t.min,n=t.max;return e>=0?e:n<=0?n:0},e.prototype.createAttrOption=function(t,e,n){if(vs(e)||ys(e))ys(e)&&Nl(Object.keys(e),["values"])?$l(this.attributeOption,t,{fields:e.values}):$l(this.attributeOption,t,e);else{var r={};el(e)?r.values=[e]:r.fields=gst(e),n&&(gs(n)?r.callback=n:r.values=n),$l(this.attributeOption,t,r)}},e.prototype.initAttributes=function(){var t=this,e=this,n=e.attributes,r=e.attributeOption,i=e.theme,o=e.shapeType;this.groupScales=[];var a={},s=function(e){if(r.hasOwnProperty(e)){var s=r[e];if(!s)return{value:void 0};var l=Za({},s),u=l.callback,c=l.values,d=l.fields,h=(void 0===d?[]:d).map((function(n){var r=t.scales[n];return r.isCategory&&!a[n]&&set.includes(e)&&(t.groupScales.push(r),a[n]=!0),r}));l.scales=h,"position"!==e&&1===h.length&&"identity"===h[0].type?l.values=h[0].values:u||c||("size"===e?l.values=i.sizes:"shape"===e?l.values=i.shapes[o]||[]:"color"===e&&(h.length?l.values=h[0].values.length<=10?i.colors10:i.colors20:l.values=i.colors10));var f=Xet(e);n[e]=new f(l)}};for(var l in r){var u=s(l);if("object"==typeof u)return u.value}},e.prototype.processData=function(t){this.hasSorted=!1;for(var e=this.getAttribute("position").scales.filter((function(t){return t.isCategory})),n=this.groupData(t),r=[],i=0,o=n.length;i<o;i++){for(var a=n[i],s=[],l=0,u=a.length;l<u;l++){var c=a[l],d={};for(var h in c)d[h]=c[h];d._origin=c;for(var f=0,p=e;f<p.length;f++){var g=p[f],v=g.field;d[v]=g.translate(d[v])}s.push(d)}r.push(s)}var m=this.adjustData(r);return this.beforeMappingData=m,m},e.prototype.adjustData=function(t){var e=this.adjustOption,n=this,r=n.intervalPadding,i=n.dodgePadding,o=n.theme,a=this.maxColumnWidth||o.maxColumnWidth,s=this.minColumnWidth||o.minColumnWidth,l=this.columnWidthRatio||o.columnWidthRatio,u=t;if(e){var c=this.getXScale(),d=this.getYScale(),h=c.field,f=d?d.field:null,p=Qit(this.coordinate),g=c.values.length,v=this.getAttribute("size"),m=void 0;v&&(m=v.values[0]);for(var y=0,b=e.length;y<b;y++){var x=e[y],w=Za({xField:h,yField:f,intervalPadding:r,dodgePadding:i,xDimensionLength:p,groupNum:g,defaultSize:m,maxColumnWidth:a,minColumnWidth:s,columnWidthRatio:l},x),C=x.type;if("dodge"===C){var S=[];if(c.isCategory||"identity"===c.type)S.push("x");else{if(d)throw new Error("dodge is not support linear attribute, please use category attribute!");S.push("y")}w.adjustNames=S,w.dodgeRatio=l}else if("stack"===C){var k=this.coordinate;if(!d){w.height=k.getHeight();var E=this.getDefaultValue("size")||3;w.size=E}!k.isTransposed&&vs(w.reverseOrder)&&(w.reverseOrder=!0)}var M=new(vet(C))(w);u=M.process(u),this.adjusts[C]=M}}return u},e.prototype.groupData=function(t){for(var e=this.getGroupScales(),n=this.scaleDefs,r={},i=[],o=0;o<e.length;o++){var a=e[o].field;i.push(a),Ul(n,[a,"values"])&&(r[a]=n[a].values)}return function(t,e,n){if(void 0===n&&(n={}),!e)return[t];var r=qs(t,e),i=[];if(1===e.length&&n[e[0]])for(var o=0,a=n[e[0]];o<a.length;o++){var s=r["_"+a[o]];s&&i.push(s)}else for(var l in r)if(r.hasOwnProperty(l)){var u=r[l];i.push(u)}return i}(t,i,r)},e.prototype.updateStackRange=function(t,e){for(var n=As(e),r=t.field,i=t.min,o=t.max,a=0;a<n.length;a++){var s=n[a],l=Math.min.apply(null,s[r]),u=Math.max.apply(null,s[r]);l<i&&(i=l),u>o&&(o=u)}var c=this.scaleDefs,d={};i<t.min&&!Ul(c,[r,"min"])&&(d.min=i),o>t.max&&!Ul(c,[r,"max"])&&(d.max=o),t.change(d)},e.prototype.beforeMapping=function(t){var e=t;if(this.sortable&&this.sort(e),this.generatePoints)for(var n=0,r=e.length;n<r;n++){var i=e[n];this.generateShapePoints(i);var o=e[n+1];o&&(this.generateShapePoints(o),i[0].nextPoints=o[0].points)}return e},e.prototype.generateShapePoints=function(t){for(var e=this.getShapeFactory(),n=this.getAttribute("shape"),r=0;r<t.length;r++){var i=t[r],o=this.createShapePointsCfg(i),a=n?this.getAttributeValues(n,i):null,s=e.getShapePoints(a,o);i.points=s}},e.prototype.normalizeValues=function(t,e){var n=[];if(ms(t))for(var r=0;r<t.length;r++){var i=t[r];n.push(e.scale(i))}else n=e.scale(t);return n},e.prototype.mapping=function(t){for(var e=this.attributes,n=[],r=0;r<t.length;r++){var i=t[r],o={_origin:i._origin,points:i.points,nextPoints:i.nextPoints};for(var a in e)if(e.hasOwnProperty(a)){var s=e[a],l=s.names,u=this.getAttributeValues(s,i);if(l.length>1)for(var c=0;c<u.length;c+=1){var d=u[c];o[l[c]]=ms(d)&&1===d.length?d[0]:d}else o[l[0]]=1===u.length?u[0]:u}this.convertPoint(o),n.push(o)}return n},e.prototype.convertPoint=function(t){var e,n,r,i=t.x,o=t.y,a=this.coordinate;if(ms(i)&&ms(o)){e=[],n=[];for(var s=0,l=0,u=i.length,c=o.length;s<u&&l<c;s+=1,l+=1)r=a.convert({x:i[s],y:o[l]}),e.push(r.x),n.push(r.y)}else if(ms(o)){n=[];for(var d=0;d<o.length;d++){var h=o[d];r=a.convert({x:i,y:h}),e&&e!==r.x?(ms(e)||(e=[e]),e.push(r.x)):e=r.x,n.push(r.y)}}else if(ms(i)){e=[];for(d=0;d<i.length;d++){var f=i[d];r=a.convert({x:f,y:o}),n&&n!==r.y?(ms(n)||(n=[n]),n.push(r.y)):n=r.y,e.push(r.x)}}else{var p=a.convert({x:i,y:o});e=p.x,n=p.y}t.x=e,t.y=n},e.prototype.getStyleCfg=function(t,e){var n=t.fields,r=void 0===n?[]:n,i=t.callback,o=t.cfg;if(o)return o;var a=r.map((function(t){return e[t]}));return i.apply(void 0,a)},e.prototype.setCfg=function(t){var e=this,n=t.coordinate,r=t.data,i=t.theme,o=t.scaleDefs;n&&(this.coordinate=n),r&&(this.data=r),o&&(this.scaleDefs=o,this.idFields=[],bs(o,(function(t,n){t&&t.key&&e.idFields.push(n)}))),i&&(this.theme=this.userTheme?Rl({},i,this.userTheme):i)},e.prototype.renderLabels=function(t,e){void 0===e&&(e=!1);var n=this.geometryLabel;if(!n){var r=this.getLabelType();n=new(0,ist[r.toLowerCase()])(this),this.geometryLabel=n}n.render(t,e);var i=n.labelsRenderer.shapesMap;bs(this.elementsMap,(function(t,e){var n=function(t,e){var n=[];return bs(e,(function(e,r){r.split(" ")[0]===t&&n.push(e)})),n}(e,i);if(n.length){t.labelShape=n;for(var r=0;r<n.length;r++)for(var o=n[r].getChildren(),a=0;a<o.length;a++){var s=o[a];s.cfg.name=["element","label"],s.cfg.element=t}}}))},e.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&(void 0===Ul(this.animateOption,"appear")||Ul(this.animateOption,"appear")&&void 0===Ul(this.animateOption,["appear","animation"]))},e}(fet),mst=yc;function yst(t,e,n){var r=mst(t.getMatrix(),[["t",e,n]]);t.setMatrix(r)}function bst(t,e){var n=function(t,e){var n=t.attr(),r=n.x,i=n.y;return mst(t.getMatrix(),[["t",-r,-i],["r",e],["t",r,i]])}(t,e);t.setMatrix(n)}function xst(t){return t.find((function(t){return"text"===t.get("type")}))}function wst(t,e,n){void 0===n&&(n=[0,0,0,0]);var r=t.getChildren()[0];if(r){var i=r.clone();(null==e?void 0:e.rotate)&&bst(i,-e.rotate);var o=i.getCanvasBBox(),a=o.x,s=o.y,l=o.width,u=o.height;i.destroy();var c=n;return vs(c)?c=[2,2,2,2]:el(c)&&(c=new Array(4).fill(c)),{x:a-c[3],y:s-c[0],width:l+c[1]+c[3],height:u+c[0]+c[2],rotation:(null==e?void 0:e.rotate)||0}}}function Cst(t,e){var n=t.getBBox();return Hs(e,(function(t){var e,r,i,o=t.getBBox();return e=n,r=o,void 0===(i=2)&&(i=0),Math.max(0,Math.min(e.x+e.width+i,r.x+r.width+i)-Math.max(e.x-i,r.x-i))*Math.max(0,Math.min(e.y+e.height+i,r.y+r.height+i)-Math.max(e.y-i,r.y-i))>0}))}function Sst(t,e,n){var r=n.data,i=n.origin,o=n.animateCfg,a=n.coordinate,s=Ul(o,"update");t.set("data",r),t.set("origin",i),t.set("animateCfg",o),t.set("coordinate",a),t.set("visible",e.get("visible")),t.getChildren().forEach((function(l,u){var c=e.getChildByIndex(u);if(c){l.set("data",r),l.set("origin",i),l.set("animateCfg",o),l.set("coordinate",a);var d=Yit(l,c);s?nst(l,s,{toAttrs:d,coordinate:a}):l.attr(d),c.isGroup()&&Sst(l,c,n)}else t.removeChild(l),l.remove(!0)})),bs(e.getChildren(),(function(e,n){n>=t.getCount()&&(e.destroyed||t.add(e))}))}var kst=function(){function t(t){this.shapesMap={},this.lastShapesMap={};var e=t.layout,n=t.container;this.layout=e,this.container=n}return t.prototype.render=function(t,e,n){var r=this;void 0===n&&(n=!1),this.shapesMap={};var i=this.container,o=this.createOffscreenGroup();if(t.length){for(var a=0,s=t;a<s.length;a++){var l=s[a];l&&this.renderLabel(l,o)}this.doLayout(t,e),this.renderLabelLine(t),this.renderLabelBackground(t),this.adjustLabel(t)}var u=this.lastShapesMap,c=this.shapesMap;bs(c,(function(t,e){if(t.destroyed)delete c[e];else{if(u[e]){var o=t.get("data"),a=t.get("origin"),s=t.get("coordinate"),l=t.get("animateCfg"),d=u[e];Sst(d,c[e],{data:o,origin:a,animateCfg:l,coordinate:s}),r.shapesMap[e]=d}else{i.add(t);var h=Ul(t.get("animateCfg"),n?"enter":"appear");h&&nst(t,h,{toAttrs:Za({},t.attr()),coordinate:t.get("coordinate")})}delete u[e]}})),bs(u,(function(t){var e=Ul(t.get("animateCfg"),"leave");e?nst(t,e,{toAttrs:null,coordinate:t.get("coordinate")}):t.remove(!0)})),this.lastShapesMap=c,o.destroy()},t.prototype.clear=function(){this.container.clear(),this.shapesMap={},this.lastShapesMap={}},t.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null,this.lastShapesMap=null},t.prototype.renderLabel=function(t,e){var n,r=t.id,i=t.elementId,o=t.data,a=t.mappingData,s=t.coordinate,l=t.animate,u=t.content,c={id:r,elementId:i,data:o,origin:Za(Za({},a),{data:a._origin}),coordinate:s},d=e.addGroup(Za({name:"label",animateCfg:!1!==this.animate&&null!==l&&!1!==l&&Rl({},this.animate,l)},c));if(u.isGroup&&u.isGroup()||u.isShape&&u.isShape()){var h=u.getCanvasBBox(),f=h.width,p=h.height,g=Ul(t,"textAlign","left"),v=t.x;"center"===g?v-=f/2:"right"!==g&&"end"!==g||(v-=f),yst(u,v,t.y-p/2),n=u,d.add(u)}else{var m=Ul(t,["style","fill"]);n=d.addShape("text",Za({attrs:Za(Za({x:t.x,y:t.y,textAlign:t.textAlign,textBaseline:Ul(t,"textBaseline","middle"),text:t.content},t.style),{fill:wl(m)?t.color:m})},c))}t.rotate&&bst(n,t.rotate),this.shapesMap[r]=d},t.prototype.doLayout=function(t,e){var n=this;this.layout&&bs(ms(this.layout)?this.layout:[this.layout],(function(r){var i,o=(i=Ul(r,"type",""),ost[i.toLowerCase()]);if(o){var a=[],s=[];bs(n.shapesMap,(function(t,n){a.push(t),s.push(e[t.get("elementId")])})),o(t,a,s,n.region,r.cfg)}}))},t.prototype.renderLabelLine=function(t){var e=this;bs(t,(function(t){var n=Ul(t,"coordinate");if(t&&n){var r=n.getCenter(),i=n.getRadius();if(t.labelLine){var o=Ul(t,"labelLine",{}),a=t.id,s=o.path;if(!s){var l=$it(r.x,r.y,i,t.angle);s=[["M",l.x,l.y],["L",t.x,t.y]]}var u=e.shapesMap[a];u.destroyed||u.addShape("path",{capture:!1,attrs:Za({path:s,stroke:t.color?t.color:Ul(t,["style","fill"],"#000"),fill:null},o.style),id:a,origin:t.mappingData,data:t.data,coordinate:t.coordinate})}}}))},t.prototype.renderLabelBackground=function(t){var e=this;bs(t,(function(t){var n=Ul(t,"coordinate"),r=Ul(t,"background");if(r&&n){var i=t.id,o=e.shapesMap[i];if(!o.destroyed){var a=o.getChildren()[0];if(a){var s=wst(o,t,r.padding),l=s.rotation,u=Qa(s,["rotation"]),c=o.addShape("rect",{attrs:Za(Za({},u),r.style||{}),id:i,origin:t.mappingData,data:t.data,coordinate:t.coordinate});if(c.setZIndex(-1),l){var d=a.getMatrix();c.setMatrix(d)}}}}}))},t.prototype.createOffscreenGroup=function(){return new(this.container.getGroupBase())({})},t.prototype.adjustLabel=function(t){var e=this;bs(t,(function(t){if(t){var n=t.id,r=e.shapesMap[n];if(!r.destroyed)bs(r.findAll((function(t){return"path"!==t.get("type")})),(function(e){e&&(t.offsetX&&e.attr("x",e.attr("x")+t.offsetX),t.offsetY&&e.attr("y",e.attr("y")+t.offsetY))}))}}))},t}();function Est(t){var e=0;return bs(t,(function(t){e+=t})),e/t.length}var Mst=function(){function t(t){this.geometry=t}return t.prototype.getLabelItems=function(t){var e=this,n=[],r=this.getLabelCfgs(t);return bs(t,(function(t,i){var o=r[i];if(!o||vs(t.x)||vs(t.y))n.push(null);else{var a=ms(o.content)?o.content:[o.content];o.content=a;var s=a.length;bs(a,(function(r,i){if(vs(r)||""===r)n.push(null);else{var a=Za(Za({},o),e.getLabelPoint(o,t,i));a.textAlign||(a.textAlign=e.getLabelAlign(a,i,s)),a.offset<=0&&(a.labelLine=null),n.push(a)}}))}})),n},t.prototype.render=function(t,e){void 0===e&&(e=!1);var n=this.getLabelItems(t),r=this.getLabelsRenderer(),i=this.getGeometryShapes();r.render(n,i,e)},t.prototype.clear=function(){var t=this.labelsRenderer;t&&t.clear()},t.prototype.destroy=function(){var t=this.labelsRenderer;t&&t.destroy(),this.labelsRenderer=null},t.prototype.getCoordinate=function(){return this.geometry.coordinate},t.prototype.getDefaultLabelCfg=function(t,e){var n=this.geometry,r=n.type,i=n.theme;return"polygon"===r||"interval"===r&&"middle"===e||t<0&&!["line","point","path"].includes(r)?Ul(i,"innerLabels",{}):Ul(i,"labels",{})},t.prototype.getThemedLabelCfg=function(t){var e=this.geometry,n=this.getDefaultLabelCfg(),r=e.type,i=e.theme;return"polygon"===r||t.offset<0&&!["line","point","path"].includes(r)?Rl({},n,i.innerLabels,t):Rl({},n,i.labels,t)},t.prototype.setLabelPosition=function(t,e,n,r){},t.prototype.getLabelOffset=function(t){var e=this.getCoordinate(),n=this.getOffsetVector(t);return e.isTransposed?n[0]:n[1]},t.prototype.getLabelOffsetPoint=function(t,e,n){var r=t.offset,i=this.getCoordinate().isTransposed,o=i?"x":"y",a=i?1:-1,s={x:0,y:0};return s[o]=e>0||1===n?r*a:r*a*-1,s},t.prototype.getLabelPoint=function(t,e,n){var r=this.getCoordinate(),i=t.content.length;function o(e,n,r){void 0===r&&(r=!1);var i=e;return ms(i)&&(i=1===t.content.length?r?Est(i):i.length<=2?i[e.length-1]:Est(i):i[n]),i}var a={content:t.content[n],x:0,y:0,start:{x:0,y:0},color:"#fff"},s=ms(e.shape)?e.shape[0]:e.shape,l="funnel"===s||"pyramid"===s;if("polygon"===this.geometry.type){var u=function(t,e){if(el(t)&&el(e))return[t,e];for(var n,r,i=-1,o=0,a=0,s=t.length-1,l=0;++i<t.length;)n=s,s=i,l+=r=t[n]*e[s]-t[s]*e[n],o+=(t[n]+t[s])*r,a+=(e[n]+e[s])*r;return[o/(l*=3),a/l]}(e.x,e.y);a.x=u[0],a.y=u[1]}else"interval"!==this.geometry.type||l?(a.x=o(e.x,n),a.y=o(e.y,n)):(a.x=o(e.x,n,!0),a.y=o(e.y,n));if(l){var c=Ul(e,"nextPoints"),d=Ul(e,"points");if(c){var h=r.convert(d[1]),f=r.convert(c[1]);a.x=(h.x+f.x)/2,a.y=(h.y+f.y)/2}else if("pyramid"===s){h=r.convert(d[1]),f=r.convert(d[2]);a.x=(h.x+f.x)/2,a.y=(h.y+f.y)/2}}t.position&&this.setLabelPosition(a,e,n,t.position);var p=this.getLabelOffsetPoint(t,n,i);return a.start={x:a.x,y:a.y},a.x+=p.x,a.y+=p.y,a.color=e.color,a},t.prototype.getLabelAlign=function(t,e,n){var r="center";if(this.getCoordinate().isTransposed){var i=t.offset;r=i<0?"right":0===i?"center":"left",n>1&&0===e&&("right"===r?r="left":"left"===r&&(r="right"))}return r},t.prototype.getLabelId=function(t){var e=this.geometry,n=e.type,r=e.getXScale(),i=e.getYScale(),o=t._origin,a=e.getElementId(t);return"line"===n||"area"===n?a+=" "+o[r.field]:"path"===n&&(a+=" "+o[r.field]+"-"+o[i.field]),a},t.prototype.getLabelsRenderer=function(){var t=this.geometry,e=t.labelsContainer,n=t.labelOption,r=t.canvasRegion,i=t.animateOption,o=this.geometry.coordinate,a=this.labelsRenderer;return a||(a=new kst({container:e,layout:Ul(n,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=a),a.region=r,a.animate=!!i&&est("label",o),a},t.prototype.getLabelCfgs=function(t){var e=this,n=this.geometry,r=n.labelOption,i=n.scales,o=n.coordinate,a=r,s=a.fields,l=a.callback,u=a.cfg,c=s.map((function(t){return i[t]})),d=[];return bs(t,(function(t,n){var r,i=t._origin,a=e.getLabelText(i,c);if(l){var h=s.map((function(t){return i[t]}));if(r=l.apply(void 0,h),vs(r))return void d.push(null)}var f=Za(Za({id:e.getLabelId(t),elementId:e.geometry.getElementId(t),data:i,mappingData:t,coordinate:o},u),r);gs(f.position)&&(f.position=f.position(i,t,n));var p=e.getLabelOffset(f.offset||0),g=e.getDefaultLabelCfg(p,f.position);(f=Rl({},g,f)).offset=e.getLabelOffset(f.offset||0);var v=f.content;gs(v)?f.content=v(i,t,n):kl(v)&&(f.content=a[0]),d.push(f)})),d},t.prototype.getLabelText=function(t,e){var n=[];return bs(e,(function(e){var r=t[e.field];r=ms(r)?r.map((function(t){return e.getText(t)})):e.getText(r),vs(r)||""===r?n.push(null):n.push(r)})),n},t.prototype.getOffsetVector=function(t){void 0===t&&(t=0);var e=this.getCoordinate(),n=0;return el(t)&&(n=t),e.isTransposed?e.applyMatrix(n,0):e.applyMatrix(0,n)},t.prototype.getGeometryShapes=function(){var t=this.geometry,e={};return bs(t.elementsMap,(function(t,n){e[n]=t.shape})),bs(t.getOffscreenGroup().getChildren(),(function(n){var r=t.getElementId(n.get("origin").mappingData);e[r]=n})),e},t}();function Ast(t,e,n){if(!t)return n;var r;if(t.callback&&t.callback.length>1){var i=Array(t.callback.length-1).fill("");r=t.mapping.apply(t,is([e],i)).join("")}else r=t.mapping(e).join("");return r||n}var _st={hexagon:function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]},bowtie:function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]},cross:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]},tick:function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},plus:function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]},hyphen:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},line:function(t,e,n){return[["M",t,e-n],["L",t,e+n]]}},Tst=["line","cross","tick","plus","hyphen"];function Pst(t){var e=t.symbol;zs(e)&&_st[e]&&(t.symbol=_st[e])}function Ist(t){return t.startsWith(Vtt.LEFT)||t.startsWith(Vtt.RIGHT)?"vertical":"horizontal"}function Dst(t,e,n,r,i){var o=n.getScale(n.type);if(o.isCategory){var a=o.field,s=e.getAttribute("color"),l=e.getAttribute("shape"),u=t.getTheme().defaultColor,c=e.coordinate.isPolar;return o.getTicks().map((function(n,d){var h,f=n.text,p=n.value,g=f,v=o.invert(p),m=0===t.filterFieldData(a,[(h={},h[a]=v,h)]).length;bs(t.views,(function(t){var e;t.filterFieldData(a,[(e={},e[a]=v,e)]).length||(m=!0)}));var y,b,x=Ast(s,v,u),w=Ast(l,v,"point"),C=e.getShapeMarker(w,{color:x,isInPolar:c}),S=i;return gs(S)&&(S=S(g,d,Za({name:g,value:v},Rl({},r,C)))),function(t,e){var n=t.symbol;if(zs(n)&&-1!==Tst.indexOf(n)){var r=Ul(t,"style",{}),i=Ul(r,"lineWidth",1),o=r.stroke||r.fill||e;t.style=Rl({},t.style,{lineWidth:i,stroke:o,fill:null})}}(C=Rl({},r,C,qit(Za({},S),["style"])),x),S&&S.style&&(C.style=(y=C.style,b=S.style,gs(b)?b(y):Rl({},y,b))),Pst(C),{id:v,name:g,value:v,marker:C,unchecked:m}}))}return[]}function Ost(t,e){var n=Ul(t,["components","legend"],{});return Rl({},Ul(n,["common"],{}),Rl({},Ul(n,[e],{})))}var Rst={getLegendItems:Dst,translate:yst,rotate:bst,zoom:function(t,e){var n=t.getBBox(),r=(n.minX+n.maxX)/2,i=(n.minY+n.maxY)/2;t.applyToMatrix([r,i,1]);var o=mst(t.getMatrix(),[["t",-r,-i],["s",e,e],["t",r,i]]);t.setMatrix(o)},transform:mst,getAngle:Hit,getSectorPath:Vit,polarToCartesian:$it,getDelegationObject:Dot,getTooltipItems:Pat,getMappingValue:Ast},Lst="#000",Bst="#BFBFBF",Fst="#F0F0F0",Nst="#FFFFFF",zst="#A6A6A6",jst="#737373",Gst="#404040",Ust="#262626",$st=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],Vst=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],Wst=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],Hst=function(t){void 0===t&&(t={});var e=t.backgroundColor,n=void 0===e?"#141414":e,r=t.subColor,i=void 0===r?"rgba(255,255,255,0.05)":r,o=t.paletteQualitative10,a=void 0===o?$st:o,s=t.paletteQualitative20,l=void 0===s?Vst:s,u=t.paletteSemanticRed,c=void 0===u?"#F4664A":u,d=t.paletteSemanticGreen,h=void 0===d?"#30BF78":d,f=t.paletteSemanticYellow,p=void 0===f?"#FAAD14":f,g=t.paletteSequence,v=void 0===g?Wst:g,m=t.fontFamily,y=void 0===m?'"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,\n    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n    "Noto Color Emoji"':m,b=t.brandColor;return{backgroundColor:n,brandColor:void 0===b?a[0]:b,subColor:i,paletteQualitative10:a,paletteQualitative20:l,paletteSemanticRed:c,paletteSemanticGreen:h,paletteSemanticYellow:p,paletteSequence:v,fontFamily:y,axisLineBorderColor:Gst,axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:zst,axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:Gst,axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:Ust,axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:jst,axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:Ust,axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:jst,legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:$st[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:zst,legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:jst,legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:jst,legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:zst,legendPageNavigatorTextFontSize:12,sliderRailFillColor:Ust,sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:jst,sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Fst,sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Bst,annotationArcBorderColor:Ust,annotationArcBorder:1,annotationLineBorderColor:Gst,annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:zst,annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:Nst,annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:Gst,tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:zst,tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:zst,labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Lst,innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:zst,overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Lst,overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:Gst,cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:$st[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Lst,pointBorderOpacity:1,pointActiveBorderColor:Nst,pointSelectedBorder:2,pointSelectedBorderColor:Nst,pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:$st[0],hollowPointBorderOpacity:.95,hollowPointFillColor:Lst,hollowPointActiveBorder:1,hollowPointActiveBorderColor:Nst,hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:Nst,hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:$st[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:$st[0],areaFillOpacity:.25,areaActiveFillColor:$st[0],areaActiveFillOpacity:.5,areaSelectedFillColor:$st[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:$st[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:Nst,hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:Nst,hollowAreaInactiveBorderOpacity:.3,intervalFillColor:$st[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:Nst,intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:Nst,intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:$st[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Lst,hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:Nst,hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:Nst,hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}}();function Yst(t){return!t&&(null==t||isNaN(t))}function Xst(t){if(ms(t))return Yst(t[1].y);var e=t.y;return ms(e)?Yst(e[0]):Yst(e)}function qst(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!0),!t.length||1===t.length&&!n)return[];if(e){for(var r=[],i=0,o=t.length;i<o;i++){Xst(l=t[i])||r.push(l)}return[r]}var a=[],s=[];for(i=0,o=t.length;i<o;i++){var l;Xst(l=t[i])?s.length&&((1!==s.length||n)&&a.push(s),s=[]):s.push(l)}return s.length&&a.push(s),a}function Kst(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(r){var i=0===n?"M":"L";e.push([i,r.x,r.y])}}var o=t[0];return o&&(e.push(["L",o.x,o.y]),e.push(["z"])),e}function Zst(t){for(var e=t.length/2,n=[],r=[],i=0;i<t.length;i++)i<e?n.push(t[i]):r.push(t[i]);var o=_ot(n,!1),a=_ot(r,!1);r.length&&o.push(["L",r[0].x,r[0].y]),a.shift();var s=o.concat(a);return n.length&&s.push(["L",n[0].x,n[0].y]),s.push(["z"]),s}function Qst(t,e,n,r){void 0===r&&(r="");var i=t.style,o=void 0===i?{}:i,a=t.defaultStyle,s=t.color,l=t.size,u=Za(Za({},a),o);return s&&(e&&(o.stroke||(u.stroke=s)),n&&(o.fill||(u.fill=s))),r&&vs(o[r])&&!vs(l)&&(u[r]=l),u}function Jst(t){return Rl({},{fill:"#CCD6EC",fillOpacity:.3},Ul(t,["background","style"]))}function tlt(t){var e=t.x;return(ms(t.y)?t.y:[t.y]).map((function(t,n){return{x:ms(e)?e[n]:e,y:t}}))}var elt={line:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},dot:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},dash:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},smooth:function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]},hv:function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]},vh:function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]},hvh:function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]},vhv:function(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]}};function nlt(t,e){var n=t.color;return{symbol:elt[e],style:{lineWidth:2,r:6,stroke:n}}}function rlt(t,e,n,r,i){return 1===t.length?[["M",t[0].x,t[0].y-i.lineWidth/2],["L",t[0].x,t[0].y],["L",t[0].x,t[0].y+i.lineWidth/2]]:(n?(e&&t.length&&t.push({x:t[0].x,y:t[0].y}),o=_ot(t,!1,r)):(o=Aot(t,!1),e&&o.push(["Z"])),o);var o}function ilt(t,e,n,r,i,o){if(t.length){var a=t[0];return ms(a.y)?function(t,e,n,r,i,o){var a=[],s=[];bs(t,(function(t){var e=tlt(t);a.push(e[1]),s.push(e[0])}));var l=rlt(a,e,r,i,o),u=rlt(s,e,r,i,o);return n?l:l.concat(u)}(t,e,n,r,i,o):rlt(t,e,r,i,o)}return[]}dst("line",{defaultShapeType:"line"}),bs(["line","dot","dash","smooth"],(function(t){hst("line",t,{draw:function(e,n){var r,i="smooth"===t;if(i){var o=this.coordinate,a=o.start,s=o.end;r=[[a.x,s.y],[s.x,a.y]]}var l=function(t,e,n){for(var r=t.isStack,i=t.connectNulls,o=t.isInCircle,a=t.showSinglePoint,s=Qst(t,!0,!1,"lineWidth"),l=qst(t.points,i,a),u=[],c=0,d=l.length;c<d;c++){var h=l[c];u=u.concat(ilt(h,o,r,e,n,s))}return s.path=u,s}(e,i,r);return n.addShape({type:"path",attrs:l,name:"line",capture:!i})},getMarker:function(e){return nlt(e,t)}})}));var olt=function(t){function e(e){var n=t.call(this,e)||this;n.type="path",n.shapeType="line";var r=e.connectNulls,i=void 0!==r&&r,o=e.showSinglePoint,a=void 0===o||o;return n.connectNulls=i,n.showSinglePoint=a,n}return Ka(e,t),e.prototype.createElements=function(t,e,n){void 0===n&&(n=!1);var r=this,i=r.lastElementsMap,o=r.elementsMap,a=r.elements,s=r.container,l=this.getElementId(t),u=this.getShapeInfo(t),c=i[l];if(c){var d=c.getModel();(this.isCoordinateChanged||pst(d,u))&&(c.animate=this.animateOption,c.update(u)),delete i[l]}else{var h=this.getShapeFactory();(c=new rst({shapeFactory:h,container:s,offscreenGroup:this.getOffscreenGroup()})).geometry=this,c.animate=this.animateOption,c.draw(u,n)}return a.push(c),o[l]=c,a},e.prototype.getPointsAndData=function(t){for(var e=[],n=[],r=0,i=t.length;r<i;r++){var o=t[r];e.push({x:o.x,y:o.y}),n.push(o._origin)}return{points:e,data:n}},e.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]),n=this.getPointsAndData(t),r=n.points,i=n.data;return e.mappingData=t,e.data=i,e.isStack=!!this.getAdjust("stack"),e.points=r,e.connectNulls=this.connectNulls,e.showSinglePoint=this.showSinglePoint,e},e}(vst);function alt(t,e,n,r,i){var o=[];if(t.length){for(var a=[],s=[],l=0,u=t.length;l<u;l++){var c=t[l];a.push(c[1]),s.push(c[0])}s=s.reverse(),bs([a,s],(function(t,l){var u=[],c=r.parsePoints(t),d=c[0];1===a.length&&1===s.length?u=0===l?[["M",d.x-.5,d.y],["L",d.x+.5,d.y]]:[["L",d.x+.5,d.y],["L",d.x-.5,d.y]]:(e&&c.push({x:d.x,y:d.y}),u=n?_ot(c,!1,i):Aot(c,!1),l>0&&(u[0][0]="L")),o=o.concat(u)})),o.push(["Z"])}return o}function slt(t,e,n,r,i){for(var o=Qst(t,e,!e,"lineWidth"),a=t.connectNulls,s=t.isInCircle,l=qst(t.points,a,t.showSinglePoint),u=[],c=0,d=l.length;c<d;c++){var h=l[c];u=u.concat(alt(h,s,n,r,i))}return o.path=u,o}function llt(t){var e=t.start,n=t.end;return[[e.x,n.y],[n.x,e.y]]}dst("area",{defaultShapeType:"area",getDefaultPoints:function(t){var e=t.x,n=t.y0;return(ms(t.y)?t.y:[n,t.y]).map((function(t){return{x:e,y:t}}))}}),hst("area","area",{draw:function(t,e){var n=slt(t,!1,!1,this);return e.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(t){return{symbol:function(t,e,n){return void 0===n&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,fill:t.color}}}});var ult=function(t){function e(e){var n=t.call(this,e)||this;n.type="area",n.shapeType="area",n.generatePoints=!0,n.startOnZero=!0;var r=e.startOnZero,i=void 0===r||r,o=e.sortable,a=void 0!==o&&o,s=e.showSinglePoint,l=void 0!==s&&s;return n.startOnZero=i,n.sortable=a,n.showSinglePoint=l,n}return Ka(e,t),e.prototype.getPointsAndData=function(t){for(var e=[],n=[],r=0,i=t.length;r<i;r++){var o=t[r];e.push(o.points),n.push(o._origin)}return{points:e,data:n}},e.prototype.getYMinValue=function(){return this.startOnZero?t.prototype.getYMinValue.call(this):this.getYScale().min},e}(olt);dst("edge",{defaultShapeType:"line",getDefaultPoints:function(t){return tlt(t)}}),hst("edge","line",{draw:function(t,e){var n=Qst(t,!0,!1,"lineWidth"),r=Aot(this.parsePoints(t.points),this.coordinate.isPolar);return e.addShape("path",{attrs:Za(Za({},n),{path:r})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}});var clt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="edge",e.shapeType="edge",e.generatePoints=!0,e}return Ka(e,t),e}(vst),dlt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="heatmap",e.paletteCache={},e}return Ka(e,t),e.prototype.createElements=function(t,e,n){var r=this.prepareRange(t),i=this.prepareSize(),o=Ul(this.styleOption,["cfg","shadowBlur"]);return el(o)||(o=i/2),this.prepareGreyScaleBlurredCircle(i,o),this.drawWithRange(t,r,i,o),null},e.prototype.color=function(t,e){return this.createAttrOption("color",t,"function"!=typeof e?e:""),this},e.prototype.clear=function(){t.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},e.prototype.prepareRange=function(t){var e=this.getAttribute("color").getFields()[0],n=1/0,r=-1/0;return t.forEach((function(t){var i=t._origin[e];i>r&&(r=i),i<n&&(n=i)})),n===r&&(n=r-1),[n,r]},e.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return el(t)||(t=this.getDefaultSize()),t},e.prototype.prepareGreyScaleBlurredCircle=function(t,e){var n=this.getGrayScaleBlurredCanvas(),r=t+e,i=n.getContext("2d");n.width=n.height=2*r,i.clearRect(0,0,n.width,n.height),i.shadowOffsetX=i.shadowOffsetY=2*r,i.shadowBlur=e,i.shadowColor="black",i.beginPath(),i.arc(-r,-r,t,0,2*Math.PI,!0),i.closePath(),i.fill()},e.prototype.drawWithRange=function(t,e,n,r){var i=this.coordinate,o=i.start,a=i.end,s=this.coordinate.getWidth(),l=this.coordinate.getHeight(),u=this.getAttribute("color").getFields()[0];this.clearShadowCanvasCtx();var c=this.getShadowCanvasCtx();e&&(t=t.filter((function(t){return t._origin[u]<=e[1]&&t._origin[u]>=e[0]})));for(var d=this.scales[u],h=0,f=t;h<f.length;h++){var p=f[h],g=this.getDrawCfg(p),v=g.x,m=g.y,y=d.scale(p._origin[u]);this.drawGrayScaleBlurredCircle(v-o.x,m-a.y,n+r,y,c)}var b=c.getImageData(0,0,s,l);this.clearShadowCanvasCtx(),this.colorize(b),c.putImageData(b,0,0);var x=this.getImageShape();x.attr("x",o.x),x.attr("y",a.y),x.attr("width",s),x.attr("height",l),x.attr("img",c.canvas),x.set("origin",this.getShapeInfo(t))},e.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),e=this.coordinate;return Math.min(e.getWidth()/(4*t.scales[0].ticks.length),e.getHeight()/(4*t.scales[1].ticks.length))},e.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},e.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},e.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},e.prototype.drawGrayScaleBlurredCircle=function(t,e,n,r,i){var o=this.getGrayScaleBlurredCanvas();i.globalAlpha=r,i.drawImage(o,t-n,e-n)},e.prototype.colorize=function(t){for(var e=this.getAttribute("color"),n=t.data,r=this.paletteCache,i=3;i<n.length;i+=4){var o=n[i];if(el(o)){var a=r[o]?r[o]:Get.rgb2arr(e.gradient(o/256));n[i-3]=a[0],n[i-2]=a[1],n[i-1]=a[2],n[i]=o}}},e.prototype.getImageShape=function(){var t=this.imageShape;return t||(t=this.container.addShape({type:"image",attrs:{}}),this.imageShape=t,t)},e.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]);return Za(Za({},e),{mappingData:t,data:this.getData(t)})},e.prototype.getData=function(t){return t.map((function(t){return t._origin}))},e}(vst);function hlt(t){var e,n,r,i,o=t.x,a=t.y,s=t.y0,l=t.size;ms(a)?(e=a[0],n=a[1]):(e=s,n=a),ms(o)?(r=o[0],i=o[1]):(r=o-l/2,i=o+l/2);var u=[{x:r,y:e},{x:r,y:n}];return u.push({x:i,y:n},{x:i,y:e}),u}function flt(t,e){void 0===e&&(e=!0);var n=[],r=t[0];n.push(["M",r.x,r.y]);for(var i=1,o=t.length;i<o;i++)n.push(["L",t[i].x,t[i].y]);return e&&(n.push(["L",r.x,r.y]),n.push(["z"])),n}function plt(t,e){var n=0,r=0,i=0,o=0;return ms(t)?1===t.length?n=r=i=o=t[0]:2===t.length?(n=i=t[0],r=o=t[1]):3===t.length?(n=t[0],r=o=t[1],i=t[2]):(n=t[0],r=t[1],i=t[2],o=t[3]):n=r=i=o=t,n+r>e&&(r=e-(n=n?e/(1+r/n):0)),i+o>e&&(o=e-(i=i?e/(1+o/i):0)),[n||0,r||0,i||0,o||0]}function glt(t,e,n){var r=[];if(n.isRect){var i=n.isTransposed?{x:n.start.x,y:e[0].y}:{x:e[0].x,y:n.start.y},o=n.isTransposed?{x:n.end.x,y:e[2].y}:{x:e[3].x,y:n.end.y},a=Ul(t,["background","style","radius"]);if(a){var s=n.isTransposed?Math.abs(e[0].y-e[2].y):e[2].x-e[1].x,l=n.isTransposed?n.getWidth():n.getHeight(),u=plt(a,Math.min(s,l)),c=u[0],d=u[1],h=u[2],f=u[3];r.push(["M",i.x,o.y+c]),0!==c&&r.push(["A",c,c,0,0,1,i.x+c,o.y]),r.push(["L",o.x-d,o.y]),0!==d&&r.push(["A",d,d,0,0,1,o.x,o.y+d]),r.push(["L",o.x,i.y-h]),0!==h&&r.push(["A",h,h,0,0,1,o.x-h,i.y]),r.push(["L",i.x+f,i.y]),0!==f&&r.push(["A",f,f,0,0,1,i.x,i.y-f])}else r.push(["M",i.x,i.y]),r.push(["L",o.x,i.y]),r.push(["L",o.x,o.y]),r.push(["L",i.x,o.y]),r.push(["L",i.x,i.y]);r.push(["z"])}if(n.isPolar){var p=n.getCenter(),g=Hit(t,n),v=g.startAngle,m=g.endAngle;if("theta"===n.type||n.isTransposed){var y=function(t){return Math.pow(t,2)};c=Math.sqrt(y(p.x-e[0].x)+y(p.y-e[0].y)),d=Math.sqrt(y(p.x-e[2].x)+y(p.y-e[2].y));r=Vit(p.x,p.y,c,n.startAngle,n.endAngle,d)}else r=Vit(p.x,p.y,n.getRadius(),v,m)}return r}function vlt(t,e,n){var r=[];return vs(e)?n?r.push(["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",(t[2].x+t[3].x)/2,(t[2].y+t[3].y)/2],["Z"]):r.push(["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",t[2].x,t[2].y],["L",t[3].x,t[3].y],["Z"]):r.push(["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",e[1].x,e[1].y],["L",e[0].x,e[0].y],["Z"]),r}function mlt(t){var e=t.theme,n=t.coordinate,r=t.getXScale(),i=r.values,o=t.beforeMappingData,a=i.length,s=Qit(t.coordinate),l=t.intervalPadding,u=t.dodgePadding,c=t.maxColumnWidth||e.maxColumnWidth,d=t.minColumnWidth||e.minColumnWidth,h=t.columnWidthRatio||e.columnWidthRatio,f=t.multiplePieWidthRatio||e.multiplePieWidthRatio,p=t.roseWidthRatio||e.roseWidthRatio;if(r.isLinear&&i.length>1){i.sort();var g=function(t,e){var n=t.length,r=t;zs(r[0])&&(r=t.map((function(t){return e.translate(t)})));for(var i=r[1]-r[0],o=2;o<n;o++){var a=r[o]-r[o-1];i>a&&(i=a)}return i}(i,r);a=(r.max-r.min)/g,i.length>a&&(a=i.length)}var v=r.range,m=1/a,y=1;(n.isPolar?y=n.isTransposed&&a>1?f:p:(r.isLinear&&(m*=v[1]-v[0]),y=h),!vs(l)&&l>=0)?m=(1-(a-1)*(l/s))/a:m*=y;if(t.getAdjust("dodge")){var b=function(t,e){if(e){var n=As(t);return Us(n,e).length}return t.length}(o,t.getAdjust("dodge").dodgeBy);if(!vs(u)&&u>=0)m=(m-u/s*(b-1))/b;else!vs(l)&&l>=0?(m*=y,m/=b):m/=b;m=m>=0?m:0}if(!vs(c)&&c>=0){var x=c/s;m>x&&(m=x)}if(!vs(d)&&d>=0){var w=d/s;m<w&&(m=w)}return m}dst("interval",{defaultShapeType:"rect",getDefaultPoints:function(t){return hlt(t)}}),hst("interval","rect",{draw:function(t,e){var n,r=Qst(t,!1,!0),i=e,o=null==t?void 0:t.background;if(o){i=e.addGroup();var a=Jst(t),s=glt(t,this.parsePoints(t.points),this.coordinate);i.addShape("path",{attrs:Za(Za({},a),{path:s}),zIndex:-1,name:"element-background"})}n=r.radius&&this.coordinate.isRect?function(t,e,n){var r,i,o,a,s=t[0],l=t[1],u=t[2],c=t[3],d=[0,0,0,0],h=d[0],f=d[1],p=d[2],g=d[3];s.y<l.y?(l=t[0],s=t[1],c=t[2],u=t[3],g=(r=plt(n,Math.min(c.x-s.x,s.y-l.y)))[0],p=r[1],f=r[2],h=r[3]):(h=(i=plt(n,Math.min(c.x-s.x,s.y-l.y)))[0],f=i[1],p=i[2],g=i[3]),e.isTransposed&&(s=t[0],c=t[1],u=t[2],l=t[3],t[0].x>t[1].x?(c=t[0],s=t[1],l=t[2],u=t[3],h=(o=plt(n,Math.min(c.x-s.x,s.y-l.y)))[0],g=o[1],p=o[2],f=o[3]):(f=(a=plt(n,Math.min(c.x-s.x,s.y-l.y)))[0],p=a[1],g=a[2],h=a[3]));var v=[];return v.push(["M",l.x,l.y+h]),0!==h&&v.push(["A",h,h,0,0,1,l.x+h,l.y]),v.push(["L",u.x-f,u.y]),0!==f&&v.push(["A",f,f,0,0,1,u.x,u.y+f]),v.push(["L",c.x,c.y-p]),0!==p&&v.push(["A",p,p,0,0,1,c.x-p,c.y]),v.push(["L",s.x+g,s.y]),0!==g&&v.push(["A",g,g,0,0,1,s.x,s.y-g]),v.push(["L",l.x,l.y+h]),v.push(["z"]),v}(this.parsePoints(t.points),this.coordinate,r.radius):this.parsePath(function(t,e,n){var r=n.getWidth(),i=n.getHeight(),o="rect"===n.type,a=[],s=(t[2].x-t[1].x)/2,l=n.isTransposed?s*i/r:s*r/i;return"round"===e?(o?(a.push(["M",t[0].x,t[0].y+l]),a.push(["L",t[1].x,t[1].y-l]),a.push(["A",s,s,0,0,1,t[2].x,t[2].y-l]),a.push(["L",t[3].x,t[3].y+l]),a.push(["A",s,s,0,0,1,t[0].x,t[0].y+l])):(a.push(["M",t[0].x,t[0].y]),a.push(["L",t[1].x,t[1].y]),a.push(["A",s,s,0,0,1,t[2].x,t[2].y]),a.push(["L",t[3].x,t[3].y]),a.push(["A",s,s,0,0,1,t[0].x,t[0].y])),a.push(["z"])):a=flt(t),a}(t.points,r.lineCap,this.coordinate));var l=i.addShape("path",{attrs:Za(Za({},r),{path:n}),name:"interval"});return o?i:l},getMarker:function(t){var e=t.color;return t.isInPolar?{symbol:"circle",style:{r:4.5,fill:e}}:{symbol:"square",style:{r:4,fill:e}}}});var ylt=function(t){function e(e){var n=t.call(this,e)||this;n.type="interval",n.shapeType="interval",n.generatePoints=!0;var r=e.background;return n.background=r,n}return Ka(e,t),e.prototype.createShapePointsCfg=function(e){var n,r=t.prototype.createShapePointsCfg.call(this,e),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,e)[0],n/=Qit(this.coordinate)):(this.defaultSize||(this.defaultSize=mlt(this)),n=this.defaultSize);return r.size=n,r},e.prototype.adjustScale=function(){t.prototype.adjustScale.call(this);var e,n,r=this.getYScale();if("theta"===this.coordinate.type)r.change({nice:!1,min:0,max:(e=r,n=e.values.filter((function(t){return!vs(t)&&!isNaN(t)})),Math.max.apply(Math,is(n,[vs(e.max)?-1/0:e.max])))});else{var i=this.scaleDefs,o=r.field,a=r.min,s=r.max;"time"!==r.type&&(a>0&&!Ul(i,[o,"min"])&&r.change({min:0}),s<=0&&!Ul(i,[o,"max"])&&r.change({max:0}))}},e.prototype.getDrawCfg=function(e){var n=t.prototype.getDrawCfg.call(this,e);return n.background=this.background,n},e}(vst),blt=function(t){function e(e){var n=t.call(this,e)||this;n.type="line";var r=e.sortable,i=void 0!==r&&r;return n.sortable=i,n}return Ka(e,t),e}(olt),xlt=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"];function wlt(t,e,n,r,i){var o=Qst(e,i,!i,"r"),a=t.parsePoints(e.points),s=a[0];if(e.isStack)s=a[1];else if(a.length>1){for(var l=n.addGroup(),u=0,c=a;u<c.length;u++){var d=c[u];l.addShape({type:"marker",attrs:Za(Za(Za({},o),{symbol:_st[r]||r}),d)})}return l}return n.addShape({type:"marker",attrs:Za(Za(Za({},o),{symbol:_st[r]||r}),s)})}dst("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(t){return tlt(t)}}),bs(xlt,(function(t){hst("point","hollow-"+t,{draw:function(e,n){return wlt(this,e,n,t,!0)},getMarker:function(e){var n=e.color;return{symbol:_st[t]||t,style:{r:4.5,stroke:n,fill:null}}}})}));var Clt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="point",e.shapeType="point",e.generatePoints=!0,e}return Ka(e,t),e.prototype.getDrawCfg=function(e){var n=t.prototype.getDrawCfg.call(this,e);return Za(Za({},n),{isStack:!!this.getAdjust("stack")})},e}(vst);dst("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(t){var e=[];return bs(t.x,(function(n,r){var i=t.y[r];e.push({x:n,y:i})})),e}}),hst("polygon","polygon",{draw:function(t,e){if(!Fl(t.points)){var n=Qst(t,!0,!0),r=this.parsePath(function(t){for(var e=t[0],n=1,r=[["M",e.x,e.y]];n<t.length;){var i=t[n];i.x===t[n-1].x&&i.y===t[n-1].y||(r.push(["L",i.x,i.y]),i.x===e.x&&i.y===e.y&&n<t.length-1&&(e=t[n+1],r.push(["Z"]),r.push(["M",e.x,e.y]),n++)),n++}return Nl(Vs(r),e)||r.push(["L",e.x,e.y]),r.push(["Z"]),r}(t.points));return e.addShape("path",{attrs:Za(Za({},n),{path:r}),name:"polygon"})}},getMarker:function(t){return{symbol:"square",style:{r:4,fill:t.color}}}});var Slt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polygon",e.shapeType="polygon",e.generatePoints=!0,e}return Ka(e,t),e.prototype.createShapePointsCfg=function(e){var n,r=t.prototype.createShapePointsCfg.call(this,e),i=r.x,o=r.y;if(!ms(i)||!ms(o)){var a=this.getXScale(),s=this.getYScale(),l=.5/a.values.length,u=.5/s.values.length;a.isCategory&&s.isCategory?(i=[i-l,i-l,i+l,i+l],o=[o-u,o+u,o+u,o-u]):ms(i)?(i=[(n=i)[0],n[0],n[1],n[1]],o=[o-u/2,o+u/2,o+u/2,o-u/2]):ms(o)&&(o=[(n=o)[0],n[1],n[1],n[0]],i=[i-l/2,i-l/2,i+l/2,i+l/2]),r.x=i,r.y=o}return r},e}(vst);dst("schema",{defaultShapeType:""});var klt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="schema",e.shapeType="schema",e.generatePoints=!0,e}return Ka(e,t),e.prototype.createShapePointsCfg=function(e){var n,r=t.prototype.createShapePointsCfg.call(this,e),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,e)[0],n/=Qit(this.coordinate)):(this.defaultSize||(this.defaultSize=mlt(this)),n=this.defaultSize);return r.size=n,r},e}(vst);dst("violin",{defaultShapeType:"violin",getDefaultPoints:function(t){var e=t.size/2,n=[],r=function(t){if(!ms(t))return[];var e=Ts(t);return zl(t,(function(t){return t/e}))}(t._size);return bs(t.y,(function(i,o){var a=r[o]*e,s=0===o,l=o===t.y.length-1;n.push({isMin:s,isMax:l,x:t.x-a,y:i}),n.unshift({isMin:s,isMax:l,x:t.x+a,y:i})})),n}}),hst("violin","violin",{draw:function(t,e){var n=Qst(t,!0,!0),r=this.parsePath(Kst(t.points));return e.addShape("path",{attrs:Za(Za({},n),{path:r}),name:"violin"})},getMarker:function(t){return{symbol:"circle",style:{r:4,fill:t.color}}}});var Elt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="violin",e.shapeType="violin",e.generatePoints=!0,e}return Ka(e,t),e.prototype.createShapePointsCfg=function(e){var n,r=t.prototype.createShapePointsCfg.call(this,e),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,e)[0],n/=Qit(this.coordinate)):(this.defaultSize||(this.defaultSize=mlt(this)),n=this.defaultSize);return r.size=n,r._size=Ul(e._origin,[this._sizeField]),r},e.prototype.initAttributes=function(){var e=this.attributeOption,n=e.size?e.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=n,delete e.size,t.prototype.initAttributes.call(this)},e}(vst);function Mlt(t,e){return["C",1*t.x/2+1*e.x/2,t.y,1*t.x/2+1*e.x/2,e.y,e.x,e.y]}function Alt(t,e){var n=[];n.push({x:e.x,y:e.y}),n.push(t);var r=["Q"];return bs(n,(function(t){r.push(t.x,t.y)})),r}hst("area","line",{draw:function(t,e){var n=slt(t,!0,!1,this);return e.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(t){return{symbol:function(t,e,n){return void 0===n&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,stroke:t.color,fill:null}}}}),hst("area","smooth",{draw:function(t,e){var n=slt(t,!1,!0,this,llt(this.coordinate));return e.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(t){return{symbol:function(t,e,n){return void 0===n&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,fill:t.color}}}}),hst("area","smooth-line",{draw:function(t,e){var n=slt(t,!0,!0,this,llt(this.coordinate));return e.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(t){return{symbol:function(t,e,n){return void 0===n&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,stroke:t.color,fill:null}}}}),hst("edge","arc",{draw:function(t,e){var n,r=Qst(t,!0,!1,"lineWidth"),i=t.points,o=i.length>2?"weight":"normal";if(t.isInCircle){var a={x:0,y:1};return"normal"===o?n=function(t,e,n){var r=Alt(e,n),i=[["M",t.x,t.y]];return i.push(r),i}(i[0],i[1],a):(r.fill=r.stroke,n=function(t,e){var n=Alt(t[1],e),r=Alt(t[3],e),i=[["M",t[0].x,t[0].y]];return i.push(r),i.push(["L",t[3].x,t[3].y]),i.push(["L",t[2].x,t[2].y]),i.push(n),i.push(["L",t[1].x,t[1].y]),i.push(["L",t[0].x,t[0].y]),i.push(["Z"]),i}(i,a)),n=this.parsePath(n),e.addShape("path",{attrs:Za(Za({},r),{path:n})})}if("normal"===o)return n=Wit(((i=this.parsePoints(i))[1].x+i[0].x)/2,i[0].y,Math.abs(i[1].x-i[0].x)/2,Math.PI,2*Math.PI),e.addShape("path",{attrs:Za(Za({},r),{path:n})});var s=Mlt(i[1],i[3]),l=Mlt(i[2],i[0]);return n=[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],s,["L",i[3].x,i[3].y],["L",i[2].x,i[2].y],l,["Z"]],n=this.parsePath(n),r.fill=r.stroke,e.addShape("path",{attrs:Za(Za({},r),{path:n})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}}),hst("edge","smooth",{draw:function(t,e){var n=Qst(t,!0,!1,"lineWidth"),r=t.points,i=this.parsePath(function(t,e){var n=Mlt(t,e),r=[["M",t.x,t.y]];return r.push(n),r}(r[0],r[1]));return e.addShape("path",{attrs:Za(Za({},n),{path:i})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}});hst("edge","vhv",{draw:function(t,e){var n=Qst(t,!0,!1,"lineWidth"),r=t.points,i=this.parsePath(function(t,e){var n=[];n.push({x:t.x,y:.6666666666666667*t.y+.3333333333333333*e.y}),n.push({x:e.x,y:.6666666666666667*t.y+.3333333333333333*e.y}),n.push(e);var r=[["M",t.x,t.y]];return bs(n,(function(t){r.push(["L",t.x,t.y])})),r}(r[0],r[1]));return e.addShape("path",{attrs:Za(Za({},n),{path:i})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}}),hst("interval","funnel",{getPoints:function(t){return t.size=2*t.size,hlt(t)},draw:function(t,e){var n=Qst(t,!1,!0),r=this.parsePath(vlt(t.points,t.nextPoints,!1));return e.addShape("path",{attrs:Za(Za({},n),{path:r}),name:"interval"})},getMarker:function(t){return{symbol:"square",style:{r:4,fill:t.color}}}}),hst("interval","hollow-rect",{draw:function(t,e){var n=Qst(t,!0,!1),r=e,i=null==t?void 0:t.background;if(i){r=e.addGroup();var o=Jst(t),a=glt(t,this.parsePoints(t.points),this.coordinate);r.addShape("path",{attrs:Za(Za({},o),{path:a}),zIndex:-1,name:"element-background"})}var s=this.parsePath(flt(t.points)),l=r.addShape("path",{attrs:Za(Za({},n),{path:s}),name:"interval"});return i?r:l},getMarker:function(t){var e=t.color;return t.isInPolar?{symbol:"circle",style:{r:4.5,stroke:e,fill:null}}:{symbol:"square",style:{r:4,stroke:e,fill:null}}}}),hst("interval","line",{getPoints:function(t){return n=(e=t).x,r=e.y,i=e.y0,ms(r)?r.map((function(t,e){return{x:ms(n)?n[e]:n,y:t}})):[{x:n,y:i},{x:n,y:r}];var e,n,r,i},draw:function(t,e){var n=Qst(t,!0,!1,"lineWidth"),r=qit(Za({},n),["fill"]),i=this.parsePath(flt(t.points,!1));return e.addShape("path",{attrs:Za(Za({},r),{path:i}),name:"interval"})},getMarker:function(t){return{symbol:function(t,e,n){return[["M",t,e-n],["L",t,e+n]]},style:{r:5,stroke:t.color}}}}),hst("interval","pyramid",{getPoints:function(t){return t.size=2*t.size,hlt(t)},draw:function(t,e){var n=Qst(t,!1,!0),r=this.parsePath(vlt(t.points,t.nextPoints,!0));return e.addShape("path",{attrs:Za(Za({},n),{path:r}),name:"interval"})},getMarker:function(t){return{symbol:"square",style:{r:4,fill:t.color}}}}),hst("interval","tick",{getPoints:function(t){return function(t){var e,n,r=t.x,i=t.y,o=t.y0,a=t.size;ms(i)?(e=i[0],n=i[1]):(e=o,n=i);var s=r+a/2,l=r-a/2;return[{x:r,y:e},{x:r,y:n},{x:l,y:e},{x:s,y:e},{x:l,y:n},{x:s,y:n}]}(t)},draw:function(t,e){var n,r=Qst(t,!0,!1),i=this.parsePath([["M",(n=t.points)[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["M",n[4].x,n[4].y],["L",n[5].x,n[5].y]]);return e.addShape("path",{attrs:Za(Za({},r),{path:i}),name:"interval"})},getMarker:function(t){return{symbol:function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},style:{r:5,stroke:t.color}}}});function _lt(t,e){var n=qst(t.points,t.connectNulls,t.showSinglePoint),r=[];return bs(n,(function(t){var n=function(t,e){var n=[];return bs(t,(function(r,i){var o=t[i+1];if(n.push(r),o){var a=function(t,e,n){var r,i=t.x,o=t.y,a=e.x,s=e.y;switch(n){case"hv":r=[{x:a,y:o}];break;case"vh":r=[{x:i,y:s}];break;case"hvh":var l=(a+i)/2;r=[{x:l,y:o},{x:l,y:s}];break;case"vhv":var u=(o+s)/2;r=[{x:i,y:u},{x:a,y:u}]}return r}(r,o,e);n=n.concat(a)}})),n}(t,e);r=r.concat(function(t){return t.map((function(t,e){return 0===e?["M",t.x,t.y]:["L",t.x,t.y]}))}(n))})),Za(Za({},Qst(t,!0,!1,"lineWidth")),{path:r})}function Tlt(t){var e=ms(t)?t:[t],n=e[0],r=e[e.length-1],i=e.length>1?e[1]:n;return{min:n,max:r,min1:i,max1:e.length>3?e[3]:r,median:e.length>2?e[2]:i}}function Plt(t,e,n){var r,i=n/2;if(ms(e)){var o=Tlt(e),a=o.min,s=o.max,l=o.median,u=o.min1,c=t-i,d=t+i;r=[[c,s],[d,s],[t,s],[t,h=o.max1],[c,u],[c,h],[d,h],[d,u],[t,u],[t,a],[c,a],[d,a],[c,l],[d,l]]}else{e=vs(e)?.5:e;var h,f=Tlt(t),p=(a=f.min,s=f.max,l=f.median,e-i),g=e+i;r=[[a,p],[a,g],[a,e],[u=f.min1,e],[u,p],[u,g],[h=f.max1,g],[h,p],[h,e],[s,e],[s,p],[s,g],[l,p],[l,g]]}return r.map((function(t){return{x:t[0],y:t[1]}}))}function Ilt(t){var e=(ms(t)?t:[t]).sort((function(t,e){return e-t}));return function(t,e,n){if(zs(t))return t.padEnd(e,n);if(ms(t)){var r=t.length;if(r<e)for(var i=e-r,o=0;o<i;o++)t.push(n)}return t}(e,4,e[e.length-1])}function Dlt(t,e,n){var r=Ilt(e);return[{x:t,y:r[0]},{x:t,y:r[1]},{x:t-n/2,y:r[2]},{x:t-n/2,y:r[1]},{x:t+n/2,y:r[1]},{x:t+n/2,y:r[2]},{x:t,y:r[2]},{x:t,y:r[3]}]}function Olt(t,e){var n=Math.abs(t[0].x-t[2].x),r=Math.abs(t[0].y-t[2].y),i=Math.min(n,r);return e&&(i=Js(e,0,Math.min(n,r))),i/=2,{x:(t[0].x+t[2].x)/2-i,y:(t[0].y+t[2].y)/2-i,width:2*i,height:2*i}}bs(["hv","vh","hvh","vhv"],(function(t){hst("line",t,{draw:function(e,n){var r=_lt(e,t);return n.addShape({type:"path",attrs:r,name:"line"})},getMarker:function(e){return nlt(e,t)}})})),bs(["cross","tick","plus","hyphen","line"],(function(t){hst("point",t,{draw:function(e,n){return wlt(this,e,n,t,!0)},getMarker:function(e){var n=e.color;return{symbol:_st[t],style:{r:4.5,stroke:n,fill:null}}}})})),hst("point","image",{draw:function(t,e){var n=Qst(t,!1,!1,"r").r,r=this.parsePoints(t.points),i=r[0];if(t.isStack)i=r[1];else if(r.length>1){for(var o=e.addGroup(),a=0,s=r;a<s.length;a++){var l=s[a];o.addShape("image",{attrs:{x:l.x-n/2,y:l.y-n,width:n,height:n,img:t.shape[1]}})}return o}return e.addShape("image",{attrs:{x:i.x-n/2,y:i.y-n,width:n,height:n,img:t.shape[1]}})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}}),bs(xlt,(function(t){hst("point",t,{draw:function(e,n){return wlt(this,e,n,t,!1)},getMarker:function(e){var n=e.color;return{symbol:_st[t]||t,style:{r:4.5,fill:n}}}})})),hst("schema","box",{getPoints:function(t){return Plt(t.x,t.y,t.size)},draw:function(t,e){var n,r=Qst(t,!0,!1),i=this.parsePath([["M",(n=t.points)[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["M",n[4].x,n[4].y],["L",n[5].x,n[5].y],["L",n[6].x,n[6].y],["L",n[7].x,n[7].y],["L",n[4].x,n[4].y],["Z"],["M",n[8].x,n[8].y],["L",n[9].x,n[9].y],["M",n[10].x,n[10].y],["L",n[11].x,n[11].y],["M",n[12].x,n[12].y],["L",n[13].x,n[13].y]]);return e.addShape("path",{attrs:Za(Za({},r),{path:i,name:"schema"})})},getMarker:function(t){return{symbol:function(t,e,n){var r=Plt(t,[e-6,e-3,e,e+3,e+6],n);return[["M",r[0].x+1,r[0].y],["L",r[1].x-1,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y],["L",r[6].x,r[6].y],["L",r[7].x,r[7].y],["L",r[4].x,r[4].y],["Z"],["M",r[8].x,r[8].y],["L",r[9].x,r[9].y],["M",r[10].x+1,r[10].y],["L",r[11].x-1,r[11].y],["M",r[12].x,r[12].y],["L",r[13].x,r[13].y]]},style:{r:6,lineWidth:1,stroke:t.color}}}}),hst("schema","candle",{getPoints:function(t){return Dlt(t.x,t.y,t.size)},draw:function(t,e){var n,r=Qst(t,!0,!0),i=this.parsePath([["M",(n=t.points)[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["L",n[4].x,n[4].y],["L",n[5].x,n[5].y],["Z"],["M",n[6].x,n[6].y],["L",n[7].x,n[7].y]]);return e.addShape("path",{attrs:Za(Za({},r),{path:i,name:"schema"})})},getMarker:function(t){var e=t.color;return{symbol:function(t,e,n){var r=Dlt(t,[e+7.5,e+3,e-3,e-7.5],n);return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["L",r[4].x,r[4].y],["L",r[5].x,r[5].y],["Z"],["M",r[6].x,r[6].y],["L",r[7].x,r[7].y]]},style:{lineWidth:1,stroke:e,fill:e,r:6}}}}),hst("polygon","square",{draw:function(t,e){if(!Fl(t.points)){var n=Qst(t,!0,!0),r=this.parsePoints(t.points);return e.addShape("rect",{attrs:Za(Za({},n),Olt(r,t.size)),name:"polygon"})}},getMarker:function(t){return{symbol:"square",style:{r:4,fill:t.color}}}}),hst("violin","smooth",{draw:function(t,e){var n=Qst(t,!0,!0),r=this.parsePath(Zst(t.points));return e.addShape("path",{attrs:Za(Za({},n),{path:r})})},getMarker:function(t){return{symbol:"circle",style:{stroke:null,r:4,fill:t.color}}}}),hst("violin","hollow",{draw:function(t,e){var n=Qst(t,!0,!1),r=this.parsePath(Kst(t.points));return e.addShape("path",{attrs:Za(Za({},n),{path:r})})},getMarker:function(t){return{symbol:"circle",style:{r:4,fill:null,stroke:t.color}}}}),hst("violin","hollow-smooth",{draw:function(t,e){var n=Qst(t,!0,!1),r=this.parsePath(Zst(t.points));return e.addShape("path",{attrs:Za(Za({},n),{path:r})})},getMarker:function(t){return{symbol:"circle",style:{r:4,fill:null,stroke:t.color}}}});var Rlt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getLabelValueDir=function(t){var e=t.points;return e[0].y<=e[2].y?1:-1},e.prototype.getLabelOffsetPoint=function(e,n,r){var i,o=t.prototype.getLabelOffsetPoint.call(this,e,n,r),a=this.getCoordinate().isTransposed?"x":"y",s=this.getLabelValueDir(e.mappingData);return Za(Za({},o),((i={})[a]=o[a]*s,i))},e.prototype.getThemedLabelCfg=function(t){var e=this.geometry,n=this.getDefaultLabelCfg(),r=e.theme;return Rl({},n,r.labels,"middle"===t.position?{offset:0}:{},t)},e.prototype.setLabelPosition=function(t,e,n,r){var i,o,a,s,l=this.getCoordinate(),u=l.isTransposed,c=e.points,d=l.convert(c[0]),h=l.convert(c[2]),f=this.getLabelValueDir(e),p=ms(e.shape)?e.shape[0]:e.shape;if("funnel"===p||"pyramid"===p){var g=Ul(e,"nextPoints"),v=Ul(e,"points");if(g){var m=l.convert(v[0]),y=l.convert(v[1]),b=l.convert(g[0]),x=l.convert(g[1]);u?(i=Math.min(b.y,m.y),a=Math.max(b.y,m.y),o=(y.x+x.x)/2,s=(m.x+b.x)/2):(i=Math.min((y.y+x.y)/2,(m.y+b.y)/2),a=Math.max((y.y+x.y)/2,(m.y+b.y)/2),o=x.x,s=m.x)}else i=Math.min(h.y,d.y),a=Math.max(h.y,d.y),o=h.x,s=d.x}else i=Math.min(h.y,d.y),a=Math.max(h.y,d.y),o=h.x,s=d.x;switch(r){case"right":t.x=o,t.y=(i+a)/2,t.textAlign=Ul(t,"textAlign",f>0?"left":"right");break;case"left":t.x=s,t.y=(i+a)/2,t.textAlign=Ul(t,"textAlign",f>0?"left":"right");break;case"bottom":u&&(t.x=(o+s)/2),t.y=a,t.textAlign=Ul(t,"textAlign","center"),t.textBaseline=Ul(t,"textBaseline",f>0?"bottom":"top");break;case"middle":u&&(t.x=(o+s)/2),t.y=(i+a)/2,t.textAlign=Ul(t,"textAlign","center"),t.textBaseline=Ul(t,"textBaseline","middle");break;case"top":u&&(t.x=(o+s)/2),t.y=i,t.textAlign=Ul(t,"textAlign","center"),t.textBaseline=Ul(t,"textBaseline",f>0?"bottom":"top")}},e}(Mst),Llt=Math.PI/2,Blt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getLabelOffset=function(t){var e=this.getCoordinate(),n=0;if(el(t))n=t;else if(zs(t)&&-1!==t.indexOf("%")){var r=e.getRadius();e.innerRadius>0&&(r*=1-e.innerRadius),n=.01*parseFloat(t)*r}return n},e.prototype.getLabelItems=function(e){var n=t.prototype.getLabelItems.call(this,e),r=this.geometry.getYScale();return zl(n,(function(t){if(t&&r){var e=r.scale(Ul(t.data,r.field));return Za(Za({},t),{percent:e})}return t}))},e.prototype.getLabelAlign=function(t){var e,n=this.getCoordinate();if(t.labelEmit)e=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(n.isTransposed){var r=n.getCenter(),i=t.offset;e=Math.abs(t.x-r.x)<1?"center":t.angle>Math.PI||t.angle<=0?i>0?"left":"right":i>0?"right":"left"}else e="center";return e},e.prototype.getLabelPoint=function(t,e,n){var r,i=1,o=t.content[n];this.isToMiddle(e)?r=this.getMiddlePoint(e.points):(1===t.content.length&&0===n?n=1:0===n&&(i=-1),r=this.getArcPoint(e,n));var a=t.offset*i,s=this.getPointAngle(r),l=t.labelEmit,u=this.getCirclePoint(s,a,r,l);return 0===u.r?u.content="":(u.content=o,u.angle=s,u.color=e.color),u.rotate=t.autoRotate?this.getLabelRotate(s,a,l):t.rotate,u.start={x:r.x,y:r.y},u},e.prototype.getArcPoint=function(t,e){return void 0===e&&(e=0),ms(t.x)||ms(t.y)?{x:ms(t.x)?t.x[e]:t.x,y:ms(t.y)?t.y[e]:t.y}:{x:t.x,y:t.y}},e.prototype.getPointAngle=function(t){return eot(this.getCoordinate(),t)},e.prototype.getCirclePoint=function(t,e,n,r){var i=this.getCoordinate(),o=i.getCenter(),a=Jit(i,n);if(0===a)return Za(Za({},o),{r:a});var s=t;i.isTransposed&&a>e&&!r?s=t+2*Math.asin(e/(2*a)):a+=e;return{x:o.x+a*Math.cos(s),y:o.y+a*Math.sin(s),r:a}},e.prototype.getLabelRotate=function(t,e,n){var r=t+Llt;return n&&(r-=Llt),r&&(r>Llt?r-=Math.PI:r<-Llt&&(r+=Math.PI)),r},e.prototype.getMiddlePoint=function(t){var e=this.getCoordinate(),n=t.length,r={x:0,y:0};return bs(t,(function(t){r.x+=t.x,r.y+=t.y})),r.x/=n,r.y/=n,r=e.convert(r)},e.prototype.isToMiddle=function(t){return t.x.length>2},e}(Mst),Flt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultLayout="distribute",e}return Ka(e,t),e.prototype.getDefaultLabelCfg=function(e,n){var r=t.prototype.getDefaultLabelCfg.call(this,e,n);return Rl({},r,Ul(this.geometry.theme,"pieLabels",{}))},e.prototype.getLabelOffset=function(e){return t.prototype.getLabelOffset.call(this,e)||0},e.prototype.getLabelRotate=function(t,e,n){var r;return e<0&&((r=t)>Math.PI/2&&(r-=Math.PI),r<-Math.PI/2&&(r+=Math.PI)),r},e.prototype.getLabelAlign=function(t){var e,n=this.getCoordinate().getCenter();return e=t.angle<=Math.PI/2&&t.x>=n.x?"left":"right",t.offset<=0&&(e="right"===e?"left":"right"),e},e.prototype.getArcPoint=function(t){return t},e.prototype.getPointAngle=function(t){var e,n=this.getCoordinate(),r={x:ms(t.x)?t.x[0]:t.x,y:t.y[0]},i={x:ms(t.x)?t.x[1]:t.x,y:t.y[1]},o=eot(n,r);if(t.points&&t.points[0].y===t.points[1].y)e=o;else{var a=eot(n,i);o>=a&&(a+=2*Math.PI),e=o+(a-o)/2}return e},e.prototype.getCirclePoint=function(t,e){var n=this.getCoordinate(),r=n.getCenter(),i=n.getRadius()+e;return Za(Za({},$it(r.x,r.y,i,t)),{angle:t,r:i})},e}(Blt);function Nlt(t,e,n){var r=t.filter((function(t){return!t.invisible}));r.sort((function(t,e){return t.y-e.y}));var i,o=!0,a=n.minY,s=n.maxY,l=Math.abs(a-s),u=0,c=Number.MIN_VALUE,d=r.map((function(t){return t.y>u&&(u=t.y),t.y<c&&(c=t.y),{content:t.content,size:e,targets:[t.y-a],pos:null}}));for(c-=a,u-a>l&&(l=u-a);o;)for(d.forEach((function(t){var e=(Math.min.apply(c,t.targets)+Math.max.apply(c,t.targets))/2;t.pos=Math.min(Math.max(c,e-t.size/2),l-t.size),t.pos=Math.max(0,t.pos)})),o=!1,i=d.length;i--;)if(i>0){var h=d[i-1],f=d[i];h.pos+h.size>f.pos&&(h.size+=f.size,h.targets=h.targets.concat(f.targets),h.pos+h.size>l&&(h.pos=l-h.size),d.splice(i,1),o=!0)}i=0,d.forEach((function(t){var n=a+e/2;t.targets.forEach((function(){r[i].y=t.pos+n,n+=e,i++}))}))}var zlt=function(){function t(t){void 0===t&&(t={}),this.bitmap={};var e=t.xGap,n=void 0===e?1:e,r=t.yGap,i=void 0===r?8:r;this.xGap=n,this.yGap=i}return t.prototype.hasGap=function(t){for(var e=!0,n=this.bitmap,r=Math.round(t.minX),i=Math.round(t.maxX),o=Math.round(t.minY),a=Math.round(t.maxY),s=r;s<=i;s+=1)if(n[s]){if(s===r||s===i){for(var l=o;l<=a;l++)if(n[s][l]){e=!1;break}}else if(n[s][o]||n[s][a]){e=!1;break}}else n[s]={};return e},t.prototype.fillGap=function(t){for(var e=this.bitmap,n=Math.round(t.minX),r=Math.round(t.maxX),i=Math.round(t.minY),o=Math.round(t.maxY),a=n;a<=r;a+=1)e[a]||(e[a]={});for(a=n;a<=r;a+=this.xGap){for(var s=i;s<=o;s+=this.yGap)e[a][s]=!0;e[a][o]=!0}if(1!==this.yGap)for(a=i;a<=o;a+=1)e[n][a]=!0,e[r][a]=!0;if(1!==this.xGap)for(a=n;a<=r;a+=1)e[a][i]=!0,e[a][o]=!0},t.prototype.destroy=function(){this.bitmap={}},t}();function jlt(t,e,n,r){var i=t.getCanvasBBox(),o=i.width,a=i.height,s={x:e,y:n,textAlign:"center"};switch(r){case 0:s.y-=a+1,s.x+=1,s.textAlign="left";break;case 1:s.y-=a+1,s.x-=1,s.textAlign="right";break;case 2:s.y+=a+1,s.x-=1,s.textAlign="right";break;case 3:s.y+=a+1,s.x+=1,s.textAlign="left";break;case 5:s.y-=2*a+2;break;case 6:s.y+=2*a+2;break;case 7:s.x+=o+1,s.textAlign="left";break;case 8:s.x-=o+1,s.textAlign="right"}return t.attr(s),t.getCanvasBBox()}var Glt=dc;function Ult(t){if(t.length>4)return[];var e=function(t,e){return[e.x-t.x,e.y-t.y]};return[e(t[0],t[1]),e(t[1],t[2])]}function $lt(t,e,n){void 0===e&&(e=0),void 0===n&&(n={x:0,y:0});var r=t.x,i=t.y;return{x:(r-n.x)*Math.cos(-e)+(i-n.y)*Math.sin(-e)+n.x,y:(n.x-r)*Math.sin(-e)+(i-n.y)*Math.cos(-e)+n.y}}function Vlt(t){var e=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],n=t.rotation;return n?[$lt(e[0],n,e[0]),$lt(e[1],n,e[0]),$lt(e[2],n,e[0]),$lt(e[3],n,e[0])]:e}function Wlt(t,e){if(t.length>4)return{min:0,max:0};var n=[];return t.forEach((function(t){n.push(Glt([t.x,t.y],e))})),{min:Math.min.apply(Math,n),max:Math.max.apply(Math,n)}}function Hlt(t,e){return t.max>e.min&&t.min<e.max}function Ylt(t,e){if(!t.rotation&&!e.rotation)return function(t,e,n){return void 0===n&&(n=0),!(e.x>t.x+t.width+n||e.x+e.width<t.x-n||e.y>t.y+t.height+n||e.y+e.height<t.y-n)}(t,e);for(var n=Vlt(t),r=Vlt(e),i=is(Ult(n),Ult(r)),o=0;o<i.length;o++){var a=i[o];if(!Hlt(Wlt(n,a),Wlt(r,a)))return!1}return!0}var Xlt,qlt={"#5B8FF9":!0};function Klt(t,e,n){return!!t.getAdjust("stack")||e.every((function(e,r){var i=n[r];return function(t,e,n){var r=t.coordinate,i=xst(e),o=Zit.fromObject(i.getCanvasBBox()),a=Zit.fromObject(n.getBBox());return r.isTransposed?a.height>=o.height:a.width>=o.width}(t,e,i)}))}function Zlt(t,e,n){return t.some((function(t){return n(t,e)}))}function Qlt(t,e){return Zlt(t,e,(function(t,e){var n,r,i,o=xst(t),a=xst(e);return n=o.getCanvasBBox(),r=a.getCanvasBBox(),void 0===(i=2)&&(i=0),Math.max(0,Math.min(n.x+n.width+i,r.x+r.width+i)-Math.max(n.x-i,r.x-i))*Math.max(0,Math.min(n.y+n.height+i,r.y+r.height+i)-Math.max(n.y-i,r.y-i))>0}))}function Jlt(t,e,n){return t.some((function(t){return n(t,e)}))}function tut(t,e){return Jlt(t,e,(function(t,e){var n,r,i,o=xst(t),a=xst(e);return n=o.getCanvasBBox(),r=a.getCanvasBBox(),void 0===(i=2)&&(i=0),Math.max(0,Math.min(n.x+n.width+i,r.x+r.width+i)-Math.max(n.x-i,r.x-i))*Math.max(0,Math.min(n.y+n.height+i,r.y+r.height+i)-Math.max(n.y-i,r.y-i))>0}))}var eut=Dl((function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,o=e.fontStyle,a=e.fontVariant,s=(Xlt||(Xlt=document.createElement("canvas").getContext("2d")),Xlt);return s.font=[o,a,i,n+"px",r].join(" "),s.measureText(zs(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),is([t],hl(e)).join("")}));function nut(t,e,n,r,i){var o,a,s=n.start,l=n.end,u=n.getWidth(),c=n.getHeight();"y"===i?(o=s.x+u/2,a=r.y<s.y?r.y:s.y):"x"===i?(o=r.x>s.x?r.x:s.x,a=s.y+c/2):"xy"===i&&(n.isPolar?(o=n.getCenter().x,a=n.getCenter().y):(o=(s.x+l.x)/2,a=(s.y+l.y)/2));var d=function(t,e,n){var r,i=e[0],o=e[1];return t.applyToMatrix([i,o,1]),"x"===n?(t.setMatrix(yc(t.getMatrix(),[["t",-i,-o],["s",.01,1],["t",i,o]])),r=yc(t.getMatrix(),[["t",-i,-o],["s",100,1],["t",i,o]])):"y"===n?(t.setMatrix(yc(t.getMatrix(),[["t",-i,-o],["s",1,.01],["t",i,o]])),r=yc(t.getMatrix(),[["t",-i,-o],["s",1,100],["t",i,o]])):"xy"===n&&(t.setMatrix(yc(t.getMatrix(),[["t",-i,-o],["s",.01,.01],["t",i,o]])),r=yc(t.getMatrix(),[["t",-i,-o],["s",100,100],["t",i,o]])),r}(t,[o,a],i);t.animate({matrix:d},e)}function rut(t,e){var n,r=zy(t,e),i=r.startAngle,o=r.endAngle;return!rl(i,.5*-Math.PI)&&i<.5*-Math.PI&&(i+=2*Math.PI),!rl(o,.5*-Math.PI)&&o<.5*-Math.PI&&(o+=2*Math.PI),0===e[5]&&(i=(n=[o,i])[0],o=n[1]),rl(i,1.5*Math.PI)&&(i=-.5*Math.PI),rl(o,-.5*Math.PI)&&(o=1.5*Math.PI),{startAngle:i,endAngle:o}}function iut(t){var e;return"M"===t[0]||"L"===t[0]?e=[t[1],t[2]]:"a"!==t[0]&&"A"!==t[0]&&"C"!==t[0]||(e=[t[t.length-2],t[t.length-1]]),e}function out(t){var e,n,r,i=t.filter((function(t){return"A"===t[0]||"a"===t[0]}));if(0===i.length)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var o=i[0],a=i.length>1?i[1]:i[0],s=t.indexOf(o),l=t.indexOf(a),u=iut(t[s-1]),c=iut(t[l-1]),d=rut(u,o),h=d.startAngle,f=d.endAngle,p=rut(c,a),g=p.startAngle,v=p.endAngle;rl(h,g)&&rl(f,v)?(n=h,r=f):(n=Math.min(h,g),r=Math.max(f,v));var m=o[1],y=i[i.length-1][1];return m<y?(m=(e=[y,m])[0],y=e[1]):m===y&&(y=0),{startAngle:n,endAngle:r,radius:m,innerRadius:y}}function aut(t,e,n){if(t.isGroup())bs(t.getChildren(),(function(t){aut(t,e,n)}));else{var r=t.getBBox(),i=(r.minX+r.maxX)/2,o=(r.minY+r.maxY)/2;if(t.applyToMatrix([i,o,1]),"zoomIn"===n){var a=yc(t.getMatrix(),[["t",-i,-o],["s",.01,.01],["t",i,o]]);t.setMatrix(a),t.animate({matrix:yc(t.getMatrix(),[["t",-i,-o],["s",100,100],["t",i,o]])},e)}else t.animate({matrix:yc(t.getMatrix(),[["t",-i,-o],["s",.01,.01],["t",i,o]])},Za(Za({},e),{callback:function(){t.remove(!0)}}))}}function sut(t){return[Vtt.TOP,Vtt.BOTTOM].includes(t)?{offsetX:0,offsetY:t===Vtt.TOP?-8:8,style:{textAlign:"center",textBaseline:t===Vtt.TOP?"bottom":"top"}}:[Vtt.LEFT,Vtt.RIGHT].includes(t)?{offsetX:t===Vtt.LEFT?-8:8,offsetY:0,style:{textAlign:t===Vtt.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function lut(t,e,n){return{x:t.x+e*Math.cos(n),y:t.y+e*Math.sin(n)}}var uut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){return Rl({},t.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this)})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.getRegion=function(t,e){var n=2*Math.PI/t,r=-1*Math.PI/2+n*e,i=.5/(1+1/Math.sin(n/2)),o=lut({x:.5,y:.5},.5-i,r),a=5*Math.PI/4,s=1*Math.PI/4;return{start:lut(o,i,a),end:lut(o,i,s)}},e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.generateFacets=function(t){var e=this,n=this.cfg,r=n.fields,i=n.type,o=r[0];if(!o)throw new Error("No `fields` specified!");var a=this.getFieldValues(t,o),s=a.length,l=[];return a.forEach((function(n,r){var u=[{field:o,value:n,values:a}],c=ds(t,e.getFacetDataFilter(u)),d={type:i,data:c,region:e.getRegion(s,r),columnValue:n,columnField:o,columnIndex:r,columnValuesLength:s,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};l.push(d)})),l},e.prototype.getXAxisOption=function(t,e,n,r){return n},e.prototype.getYAxisOption=function(t,e,n,r){return n},e.prototype.renderTitle=function(){var t=this;bs(this.facets,(function(e){var n=e.columnValue,r=e.view,i=Ul(t.cfg.title,"formatter"),o=Rl({position:["50%","0%"],content:i?i(n):n},sut(Vtt.TOP),t.cfg.title);r.annotation().text(o)}))},e}(vot),cut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){return Rl({},t.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this)})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.generateFacets=function(t){var e=this,n=this.cfg.fields,r=this.cfg.cols,i=n[0];if(!i)throw new Error("No `fields` specified!");var o=this.getFieldValues(t,i),a=o.length;r=r||a;var s=this.getPageCount(a,r),l=[];return o.forEach((function(n,u){var c=e.getRowCol(u,r),d=c.row,h=c.col,f=[{field:i,value:n,values:o}],p=ds(t,e.getFacetDataFilter(f)),g={type:e.cfg.type,data:p,region:e.getRegion(s,r,h,d),columnValue:n,rowValue:n,columnField:i,rowField:null,columnIndex:h,rowIndex:d,columnValuesLength:r,rowValuesLength:s,total:a};l.push(g)})),l},e.prototype.getXAxisOption=function(t,e,n,r){return r.rowIndex!==r.rowValuesLength-1&&r.columnValuesLength*r.rowIndex+r.columnIndex+1+r.columnValuesLength<=r.total?Za(Za({},n),{label:null,title:null}):n},e.prototype.getYAxisOption=function(t,e,n,r){return 0!==r.columnIndex?Za(Za({},n),{title:null,label:null}):n},e.prototype.renderTitle=function(){var t=this;bs(this.facets,(function(e){var n=e.columnValue,r=e.view,i=Ul(t.cfg.title,"formatter"),o=Rl({position:["50%","0%"],content:i?i(n):n},sut(Vtt.TOP),t.cfg.title);r.annotation().text(o)}))},e.prototype.getPageCount=function(t,e){return Math.floor((t+e-1)/e)},e.prototype.getRowCol=function(t,e){return{row:Math.floor(t/e),col:t%e}},e}(vot),dut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){return Rl({},t.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:Za({},t.prototype.getDefaultTitleCfg.call(this)),rowTitle:Za({},t.prototype.getDefaultTitleCfg.call(this))})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.generateFacets=function(t){for(var e=this.cfg,n=e.fields,r=e.type,i=n.length,o=i,a=[],s=0;s<o;s++)for(var l=n[s],u=0;u<i;u++){var c=n[u],d={type:r,data:t,region:this.getRegion(i,o,s,u),columnValue:l,rowValue:c,columnField:l,rowField:c,columnIndex:s,rowIndex:u,columnValuesLength:o,rowValuesLength:i};a.push(d)}return a},e.prototype.getXAxisOption=function(t,e,n,r){return r.rowIndex!==r.rowValuesLength-1?Za(Za({},n),{label:null,title:null}):n},e.prototype.getYAxisOption=function(t,e,n,r){return 0!==r.columnIndex?Za(Za({},n),{title:null,label:null}):n},e.prototype.renderTitle=function(){var t=this;bs(this.facets,(function(e,n){var r=e.columnIndex,i=e.rowIndex,o=e.columnValuesLength;e.rowValuesLength;var a=e.columnValue,s=e.rowValue,l=e.view;if(0===i){var u=Ul(t.cfg.columnTitle,"formatter"),c=Rl({position:["50%","0%"],content:u?u(a):a},sut(Vtt.TOP),t.cfg.columnTitle);l.annotation().text(c)}if(r===o-1){u=Ul(t.cfg.rowTitle,"formatter"),c=Rl({position:["100%","50%"],content:u?u(s):s},sut(Vtt.RIGHT),t.cfg.rowTitle);l.annotation().text(c)}}))},e}(vot),hut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getDefaultCfg=function(){return Rl({},t.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this),transpose:!1})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.beforeEachView=function(t,e){this.cfg.transpose?e.columnIndex%2==0?t.coordinate().transpose().reflect("x"):t.coordinate().transpose():e.rowIndex%2!=0&&t.coordinate().reflect("y")},e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.generateFacets=function(t){var e,n,r=this,i=this.cfg.fields[0],o=[],a=1,s=1,l=[""],u=[""];return this.cfg.transpose?(e=i,l=this.getFieldValues(t,e).slice(0,2),a=l.length):(n=i,u=this.getFieldValues(t,n).slice(0,2),s=u.length),l.forEach((function(i,c){u.forEach((function(d,h){var f=[{field:e,value:i,values:l},{field:n,value:d,values:u}],p=ds(t,r.getFacetDataFilter(f)),g={type:r.cfg.type,data:p,region:r.getRegion(s,a,c,h),columnValue:i,rowValue:d,columnField:e,rowField:n,columnIndex:c,rowIndex:h,columnValuesLength:a,rowValuesLength:s};o.push(g)}))})),o},e.prototype.getXAxisOption=function(t,e,n,r){return 1===r.columnIndex||1===r.rowIndex?Za(Za({},n),{label:null,title:null}):n},e.prototype.getYAxisOption=function(t,e,n,r){return n},e.prototype.renderTitle=function(){var t=this;bs(this.facets,(function(e,n){var r=e.columnValue,i=e.rowValue,o=e.view,a=Ul(t.cfg.title,"formatter");if(t.cfg.transpose){var s=Rl({position:["50%","0%"],content:a?a(r):r},sut(Vtt.TOP),t.cfg.title);o.annotation().text(s)}else{s=Rl({position:["100%","50%"],content:a?a(i):i},sut(Vtt.RIGHT),t.cfg.title);o.annotation().text(s)}}))},e}(vot),fut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.getDefaultCfg=function(){return Rl({},t.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:Za({},t.prototype.getDefaultTitleCfg.call(this)),rowTitle:Za({},t.prototype.getDefaultTitleCfg.call(this))})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.generateFacets=function(t){var e=this,n=this.cfg.fields,r=n[0],i=n[1],o=[],a=1,s=1,l=[""],u=[""];return r&&(l=this.getFieldValues(t,r),a=l.length),i&&(u=this.getFieldValues(t,i),s=u.length),l.forEach((function(n,c){u.forEach((function(d,h){var f=[{field:r,value:n,values:l},{field:i,value:d,values:u}],p=ds(t,e.getFacetDataFilter(f)),g={type:e.cfg.type,data:p,region:e.getRegion(s,a,c,h),columnValue:n,rowValue:d,columnField:r,rowField:i,columnIndex:c,rowIndex:h,columnValuesLength:a,rowValuesLength:s};o.push(g)}))})),o},e.prototype.renderTitle=function(){var t=this;bs(this.facets,(function(e,n){var r=e.columnIndex,i=e.rowIndex,o=e.columnValuesLength,a=e.columnValue,s=e.rowValue,l=e.view;if(0===i){var u=Ul(t.cfg.columnTitle,"formatter"),c=Rl({position:["50%","0%"],content:u?u(a):a},sut(Vtt.TOP),t.cfg.columnTitle);l.annotation().text(c)}if(r===o-1){u=Ul(t.cfg.rowTitle,"formatter"),c=Rl({position:["100%","50%"],content:u?u(s):s},sut(Vtt.RIGHT),t.cfg.rowTitle);l.annotation().text(c)}}))},e.prototype.getXAxisOption=function(t,e,n,r){return r.rowIndex!==r.rowValuesLength-1?Za(Za({},n),{title:null,label:null}):r.columnIndex!==Math.floor((r.columnValuesLength-1)/2)?Za(Za({},n),{title:null}):n},e.prototype.getYAxisOption=function(t,e,n,r){return 0!==r.columnIndex?Za(Za({},n),{title:null,label:null}):r.rowIndex!==Math.floor((r.rowValuesLength-1)/2)?Za(Za({},n),{title:null}):n},e}(vot),put=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.afterChartRender=function(){e.facets&&e.cfg.line&&(e.container.clear(),e.drawLines(e.facets))},e}return Ka(e,t),e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.init=function(){t.prototype.init.call(this),this.view.on(Ktt.AFTER_RENDER,this.afterChartRender)},e.prototype.getDefaultCfg=function(){return Rl({},t.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this)})},e.prototype.generateFacets=function(t){if(!this.cfg.fields.length)throw new Error("Please specify for the fields for rootFacet!");var e=[],n={type:this.cfg.type,data:t,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return e.push(n),n.children=this.getChildFacets(t,1,e),this.setRegion(e),e},e.prototype.setRegion=function(t){var e=this;this.forceColIndex(t),t.forEach((function(t){t.region=e.getRegion(t.rowValuesLength,t.columnValuesLength,t.columnIndex,t.rowIndex)}))},e.prototype.getRegion=function(t,e,n,r){var i=1/e,o=1/t,a={x:i*n,y:o*r};return{start:a,end:{x:a.x+i,y:a.y+2*o/3}}},e.prototype.forceColIndex=function(t){var e=this,n=[],r=0;t.forEach((function(t){e.isLeaf(t)&&(n.push(t),t.columnIndex=r,r++)})),n.forEach((function(t){t.columnValuesLength=n.length}));for(var i=this.cfg.fields.length-1;i>=0;i--)for(var o=0,a=this.getFacetsByLevel(t,i);o<a.length;o++){var s=a[o];this.isLeaf(s)||(s.originColIndex=s.columnIndex,s.columnIndex=this.getRegionIndex(s.children),s.columnValuesLength=n.length)}},e.prototype.getFacetsByLevel=function(t,e){var n=[];return t.forEach((function(t){t.rowIndex===e&&n.push(t)})),n},e.prototype.getRegionIndex=function(t){var e=t[0];return(t[t.length-1].columnIndex-e.columnIndex)/2+e.columnIndex},e.prototype.isLeaf=function(t){return!t.children||!t.children.length},e.prototype.getRows=function(){return this.cfg.fields.length+1},e.prototype.getChildFacets=function(t,e,n){var r=this,i=this.cfg.fields;if(!(i.length<e)){var o=[],a=i[e-1],s=this.getFieldValues(t,a);return s.forEach((function(i,l){var u=[{field:a,value:i,values:s}],c=t.filter(r.getFacetDataFilter(u));if(c.length){var d={type:r.cfg.type,data:c,region:null,columnValue:i,rowValue:"",columnField:a,rowField:"",columnIndex:l,rowValuesLength:r.getRows(),columnValuesLength:1,rowIndex:e,children:r.getChildFacets(c,e+1,n)};o.push(d),n.push(d)}})),o}},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.renderTitle=function(){var t=this;bs(this.facets,(function(e){var n=e.columnValue,r=e.view,i=Ul(t.cfg.title,"formatter"),o=Rl({position:["50%","0%"],content:i?i(n):n},sut(Vtt.TOP),t.cfg.title);r.annotation().text(o)}))},e.prototype.drawLines=function(t){var e=this;t.forEach((function(t){if(!e.isLeaf(t)){var n=t.children;e.addFacetLines(t,n)}}))},e.prototype.addFacetLines=function(t,e){var n=this,r=t.view.coordinateBBox,i={x:r.x+r.width/2,y:r.y+r.height};e.forEach((function(t){var e=t.view.coordinateBBox,r={x:e.bl.x+(e.tr.x-e.bl.x)/2,y:e.tr.y},o={x:i.x,y:i.y+(r.y-i.y)/2},a={x:r.x,y:o.y};n.drawLine([i,o,a,r])}))},e.prototype.getPath=function(t){var e=[];return this.cfg.line.smooth?(e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach((function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e},e.prototype.drawLine=function(t){var e=this.getPath(t),n=this.cfg.line.style;this.container.addShape("path",{attrs:Tl({path:e},n)})},e.prototype.getXAxisOption=function(t,e,n,r){return r.rowIndex!==r.rowValuesLength-1?Za(Za({},n),{title:null,label:null}):n},e.prototype.getYAxisOption=function(t,e,n,r){return 0!==r.originColIndex&&0!==r.columnIndex?Za(Za({},n),{title:null,label:null}):n},e}(vot);function gut(t){var e=is(t);e.sort((function(t,e){return t-e}));var n=e.length;return 0===n?0:n%2==1?e[(n-1)/2]:(e[n/2]+e[n/2-1])/2}function vut(t,e){if(!e)return null;var n,r,i;switch(t){case"start":return 0;case"end":return 1;case"median":n=e.isCategory?gut(e.values.map((function(t,e){return e}))):gut(e.values);break;case"mean":n=e.isCategory?(e.values.length-1)/2:(r=e.values,i=Fs(r,(function(t,e){return t+(isNaN(e)||!el(e)?0:e)}),0),0===r.length?0:i/r.length);break;case"min":n=e.isCategory?0:e[t];break;case"max":n=e.isCategory?e.values.length-1:e[t];break;default:n=t}return e.scale(n)}var mut=["regionFilter","shape"],yut=function(t){function e(e){var n=t.call(this,e)||this;return n.cache=new Map,n.foregroundContainer=n.view.getLayer(Utt.FORE).addGroup(),n.backgroundContainer=n.view.getLayer(Utt.BG).addGroup(),n.option=[],n}return Ka(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.layout=function(){this.update()},e.prototype.render=function(){},e.prototype.update=function(){var t=this;this.onAfterRender((function(){var e=new Map;bs(t.option,(function(n){if(cs(mut,n.type)){var r=t.updateOrCreate(n);r&&e.set(t.getCacheKey(n),r)}})),t.cache=t.syncCache(e)}));var e=new Map;bs(this.option,(function(n){if(!cs(mut,n.type)){var r=t.updateOrCreate(n);r&&e.set(t.getCacheKey(n),r)}})),this.cache=this.syncCache(e)},e.prototype.clear=function(e){void 0===e&&(e=!1),t.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),e&&(this.option=[])},e.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},e.prototype.getComponents=function(){var t=[];return this.cache.forEach((function(e){t.push(e)})),t},e.prototype.clearComponents=function(){this.getComponents().forEach((function(t){t.component.destroy()})),this.cache.clear()},e.prototype.onAfterRender=function(t){this.view.getOptions().animate?this.view.geometries.forEach((function(e){e.animateOption&&e.once(Qtt.AFTER_DRAW_ANIMATE,(function(){t()}))})):this.view.getRootView().once(Ktt.AFTER_RENDER,(function(){t()}))},e.prototype.createAnnotation=function(t){var e=t.type,n=Ort[vl(e)];if(n){var r=this.getAnnotationTheme(e),i=this.getAnnotationCfg(e,t,r);return{component:new n(i),layer:this.isTop(i)?Utt.FORE:Utt.BG,direction:Vtt.NONE,type:Htt.ANNOTATION,extra:t}}},e.prototype.annotation=function(t){this.option.push(t)},e.prototype.arc=function(t){return this.annotation(Za({type:"arc"},t)),this},e.prototype.image=function(t){return this.annotation(Za({type:"image"},t)),this},e.prototype.line=function(t){return this.annotation(Za({type:"line"},t)),this},e.prototype.region=function(t){return this.annotation(Za({type:"region"},t)),this},e.prototype.text=function(t){return this.annotation(Za({type:"text"},t)),this},e.prototype.dataMarker=function(t){return this.annotation(Za({type:"dataMarker"},t)),this},e.prototype.dataRegion=function(t){this.annotation(Za({type:"dataRegion"},t))},e.prototype.regionFilter=function(t){this.annotation(Za({type:"regionFilter"},t))},e.prototype.shape=function(t){this.annotation(Za({type:"shape"},t))},e.prototype.html=function(t){this.annotation(Za({type:"html"},t))},e.prototype.parsePosition=function(t){var e=this.view.getXScale(),n=this.view.getScalesByDim("y"),r=gs(t)?t.call(null,e,n):t,i=0,o=0;if(ms(r)){var a=r[0],s=r[1];if(zs(a)&&-1!==a.indexOf("%")&&!isNaN(a.slice(0,-1)))return this.parsePercentPosition(r);i=vut(a,e),o=vut(s,Object.values(n)[0])}else if(!vs(r))for(var l=0,u=xs(r);l<u.length;l++){var c=u[l],d=r[c];c===e.field&&(i=vut(d,e)),n[c]&&(o=vut(d,n[c]))}return this.view.getCoordinate().convert({x:i,y:o})},e.prototype.getRegionPoints=function(t,e){var n,r=this,i=this.view.getXScale(),o=this.view.getScalesByDim("y"),a=Object.values(o)[0],s=i.field,l=this.view.getData(),u=ms(t)?t[0]:t[s],c=ms(e)?e[0]:e[s],d=[];return bs(l,(function(t,e){if(t[s]===u&&(n=e),e>=n){var i=r.parsePosition([t[s],t[a.field]]);i&&d.push(i)}if(t[s]===c)return!1})),d},e.prototype.parsePercentPosition=function(t){var e=parseFloat(t[0])/100,n=parseFloat(t[1])/100,r=this.view.getCoordinate(),i=r.start,o=r.end,a=Math.min(i.x,o.x),s=Math.min(i.y,o.y);return{x:r.getWidth()*e+a,y:r.getHeight()*n+s}},e.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),e=t.start,n=t.end,r=t.getWidth(),i=t.getHeight(),o={x:Math.min(e.x,n.x),y:Math.min(e.y,n.y)};return{x:o.x,y:o.y,minX:o.x,minY:o.y,maxX:o.x+r,maxY:o.y+i,width:r,height:i}},e.prototype.getAnnotationCfg=function(t,e,n){var r=this,i=this.view.getCoordinate(),o=this.view.getCanvas(),a={};if(vs(e))return null;if("arc"===t){var s=e,l=s.start,u=s.end,c=this.parsePosition(l),d=this.parsePosition(u),h=eot(i,c),f=eot(i,d);h>f&&(f=2*Math.PI+f),a={center:i.getCenter(),radius:Jit(i,c),startAngle:h,endAngle:f}}else if("image"===t){var p=e;l=p.start,u=p.end;a={start:this.parsePosition(l),end:this.parsePosition(u),src:e.src}}else if("line"===t){var g=e;l=g.start,u=g.end;a={start:this.parsePosition(l),end:this.parsePosition(u),text:Ul(e,"text",null)}}else if("region"===t){var v=e;l=v.start,u=v.end;a={start:this.parsePosition(l),end:this.parsePosition(u)}}else if("text"===t){var m=this.view.getData(),y=e,b=y.position,x=y.content,w=Qa(y,["position","content"]),C=x;gs(x)&&(C=x(m)),a=Za(Za(Za({},this.parsePosition(b)),w),{content:C})}else if("dataMarker"===t){var S=e,k=(b=S.position,S.point),E=S.line,M=S.text,A=S.autoAdjust,_=S.direction;a=Za(Za({},this.parsePosition(b)),{coordinateBBox:this.getCoordinateBBox(),point:k,line:E,text:M,autoAdjust:A,direction:_})}else if("dataRegion"===t){var T=e,P=(l=T.start,u=T.end,T.region),I=(M=T.text,T.lineLength);a={points:this.getRegionPoints(l,u),region:P,text:M,lineLength:I}}else if("regionFilter"===t){var D=e,O=(l=D.start,u=D.end,D.apply),R=D.color,L=this.view.geometries,B=[],F=function(t){t&&(t.isGroup()?t.getChildren().forEach((function(t){return F(t)})):B.push(t))};bs(L,(function(t){O?cs(O,t.type)&&bs(t.elements,(function(t){F(t.shape)})):bs(t.elements,(function(t){F(t.shape)}))})),a={color:R,shapes:B,start:this.parsePosition(l),end:this.parsePosition(u)}}else if("shape"===t){var N=e,z=N.render,j=Qa(N,["render"]);a=Za(Za({},j),{render:function(t){if(gs(e.render))return z(t,r.view,{parsePosition:r.parsePosition.bind(r)})}})}else if("html"===t){var G=e,U=G.html;b=G.position,j=Qa(G,["html","position"]);a=Za(Za(Za({},j),this.parsePosition(b)),{parent:o.get("el").parentNode,html:function(t){return gs(U)?U(t,r.view):U}})}var $=Rl({},n,Za(Za({},a),{top:e.top,style:e.style,offsetX:e.offsetX,offsetY:e.offsetY}));return"html"!==t&&($.container=this.getComponentContainer($)),$.animate=this.view.getOptions().animate&&$.animate&&Ul(e,"animate",$.animate),$.animateOption=Rl({},Qat,$.animateOption,e.animateOption),$},e.prototype.isTop=function(t){return Ul(t,"top",!0)},e.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},e.prototype.getAnnotationTheme=function(t){return Ul(this.view.getTheme(),["components","annotation",t],{})},e.prototype.updateOrCreate=function(t){var e=this.cache.get(this.getCacheKey(t));if(e){var n=t.type,r=this.getAnnotationTheme(n),i=this.getAnnotationCfg(n,t,r);qit(i,["container"]),e.component.update(i),cs(mut,t.type)&&e.component.render()}else(e=this.createAnnotation(t))&&(e.component.init(),cs(mut,t.type)&&e.component.render());return e},e.prototype.syncCache=function(t){var e=this,n=new Map(this.cache);return t.forEach((function(t,e){n.set(e,t)})),n.forEach((function(t,r){ks(e.option,(function(t){return r===e.getCacheKey(t)}))||(t.component.destroy(),n.delete(r))})),n},e.prototype.getCacheKey=function(t){return t},e}(Yat);function but(t,e){var n=Rl({},Ul(t,["components","axis","common"]),Ul(t,["components","axis",e]));return Ul(n,["grid"],{})}function xut(t,e,n,r){var i=[],o=e.getTicks();return t.isPolar&&o.push({value:1,text:"",tickValue:""}),o.reduce((function(e,o,a){var s=o.value;if(r)i.push({points:[t.convert("y"===n?{x:0,y:s}:{x:s,y:0}),t.convert("y"===n?{x:1,y:s}:{x:s,y:1})]});else if(a){var l=(e.value+s)/2;i.push({points:[t.convert("y"===n?{x:0,y:l}:{x:l,y:0}),t.convert("y"===n?{x:1,y:l}:{x:l,y:1})]})}return o}),o[0]),i}function wut(t,e,n,r,i){var o=e.values.length,a=[],s=n.getTicks();return s.reduce((function(e,n){var s=e?e.value:n.value,l=n.value,u=(s+l)/2;return"x"===i?a.push({points:[t.convert({x:r?l:u,y:0}),t.convert({x:r?l:u,y:1})]}):a.push({points:zl(Array(o+1),(function(e,n){return t.convert({x:n/o,y:r?l:u})}))}),n}),s[0]),a}function Cut(t,e){var n=Ul(e,"grid");if(null===n)return!1;var r=Ul(t,"grid");return!(void 0===n&&null===r)}var Sut=["container"],kut=Za(Za({},Qat),{appear:null}),Eut=function(t){function e(e){var n=t.call(this,e)||this;return n.cache=new Map,n.gridContainer=n.view.getLayer(Utt.BG).addGroup(),n.gridForeContainer=n.view.getLayer(Utt.FORE).addGroup(),n.axisContainer=n.view.getLayer(Utt.BG).addGroup(),n.axisForeContainer=n.view.getLayer(Utt.FORE).addGroup(),n}return Ka(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.render=function(){this.update()},e.prototype.layout=function(){var t=this,e=this.view.getCoordinate();bs(this.getComponents(),(function(n){var r,i=n.component,o=n.direction,a=n.type,s=n.extra,l=s.dim,u=s.scale,c=s.alignTick;if(a===Htt.AXIS)e.isPolar?"x"===l?r=e.isTransposed?sot(e,o):hot(e):"y"===l&&(r=e.isTransposed?hot(e):sot(e,o)):r=sot(e,o);else if(a===Htt.GRID)if(e.isPolar){r={items:e.isTransposed?"x"===l?wut(e,t.view.getYScales()[0],u,c,l):xut(e,u,l,c):"x"===l?xut(e,u,l,c):wut(e,t.view.getXScale(),u,c,l),center:t.view.getCoordinate().getCenter()}}else r={items:xut(e,u,l,c)};i.update(r)}))},e.prototype.update=function(){this.option=this.view.getOptions().axes;var t=new Map;this.updateXAxes(t),this.updateYAxes(t);var e=new Map;this.cache.forEach((function(n,r){t.has(r)?e.set(r,n):n.component.destroy()})),this.cache=e},e.prototype.clear=function(){t.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},e.prototype.getComponents=function(){var t=[];return this.cache.forEach((function(e){t.push(e)})),t},e.prototype.updateXAxes=function(t){var e=this.view.getXScale();if(e&&!e.isIdentity){var n=fot(this.option,e.field);if(!1!==n){var r=pot(n,Vtt.BOTTOM),i=Utt.BG,o="x",a=this.view.getCoordinate(),s=this.getId("axis",e.field),l=this.getId("grid",e.field);if(a.isRect){if(u=this.cache.get(s))qit(d=this.getLineAxisCfg(e,n,r),Sut),u.component.update(d),t.set(s,u);else u=this.createLineAxis(e,n,i,r,o),this.cache.set(s,u),t.set(s,u);if(c=this.cache.get(l))qit(d=this.getLineGridCfg(e,n,r,o),Sut),c.component.update(d),t.set(l,c);else(c=this.createLineGrid(e,n,i,r,o))&&(this.cache.set(l,c),t.set(l,c))}else if(a.isPolar){var u,c;if(u=this.cache.get(s)){qit(d=a.isTransposed?this.getLineAxisCfg(e,n,Vtt.RADIUS):this.getCircleAxisCfg(e,n,r),Sut),u.component.update(d),t.set(s,u)}else{if(a.isTransposed){if(kl(n))return;u=this.createLineAxis(e,n,i,Vtt.RADIUS,o)}else u=this.createCircleAxis(e,n,i,r,o);this.cache.set(s,u),t.set(s,u)}if(c=this.cache.get(l)){var d;qit(d=a.isTransposed?this.getCircleGridCfg(e,n,Vtt.RADIUS,o):this.getLineGridCfg(e,n,Vtt.CIRCLE,o),Sut),c.component.update(d),t.set(l,c)}else{if(a.isTransposed){if(kl(n))return;c=this.createCircleGrid(e,n,i,Vtt.RADIUS,o)}else c=this.createLineGrid(e,n,i,Vtt.CIRCLE,o);c&&(this.cache.set(l,c),t.set(l,c))}}}}},e.prototype.updateYAxes=function(t){var e=this;bs(this.view.getYScales(),(function(n,r){if(n&&!n.isIdentity){var i=n.field,o=fot(e.option,i);if(!1!==o){var a=Utt.BG,s="y",l=e.getId("axis",i),u=e.getId("grid",i),c=e.view.getCoordinate();if(c.isRect){var d=pot(o,0===r?Vtt.LEFT:Vtt.RIGHT);if(h=e.cache.get(l))qit(p=e.getLineAxisCfg(n,o,d),Sut),h.component.update(p),t.set(l,h);else h=e.createLineAxis(n,o,a,d,s),e.cache.set(l,h),t.set(l,h);if(f=e.cache.get(u))qit(p=e.getLineGridCfg(n,o,d,s),Sut),f.component.update(p),t.set(u,f);else(f=e.createLineGrid(n,o,a,d,s))&&(e.cache.set(u,f),t.set(u,f))}else if(c.isPolar){var h,f;if(h=e.cache.get(l)){qit(p=c.isTransposed?e.getCircleAxisCfg(n,o,Vtt.CIRCLE):e.getLineAxisCfg(n,o,Vtt.RADIUS),Sut),h.component.update(p),t.set(l,h)}else{if(c.isTransposed){if(kl(o))return;h=e.createCircleAxis(n,o,a,Vtt.CIRCLE,s)}else h=e.createLineAxis(n,o,a,Vtt.RADIUS,s);e.cache.set(l,h),t.set(l,h)}if(f=e.cache.get(u)){var p;qit(p=c.isTransposed?e.getLineGridCfg(n,o,Vtt.CIRCLE,s):e.getCircleGridCfg(n,o,Vtt.RADIUS,s),Sut),f.component.update(p),t.set(u,f)}else{if(c.isTransposed){if(kl(o))return;f=e.createLineGrid(n,o,a,Vtt.CIRCLE,s)}else f=e.createCircleGrid(n,o,a,Vtt.RADIUS,s);f&&(e.cache.set(u,f),t.set(u,f))}}}}}))},e.prototype.createLineAxis=function(t,e,n,r,i){var o={component:new Bit(this.getLineAxisCfg(t,e,r)),layer:n,direction:r===Vtt.RADIUS?Vtt.NONE:r,type:Htt.AXIS,extra:{dim:i,scale:t}};return o.component.set("field",t.field),o.component.init(),o},e.prototype.createLineGrid=function(t,e,n,r,i){var o=this.getLineGridCfg(t,e,r,i);if(o){var a={component:new Nit(o),layer:n,direction:Vtt.NONE,type:Htt.GRID,extra:{dim:i,scale:t,alignTick:Ul(o,"alignTick",!0)}};return a.component.init(),a}},e.prototype.createCircleAxis=function(t,e,n,r,i){var o={component:new Fit(this.getCircleAxisCfg(t,e,r)),layer:n,direction:r,type:Htt.AXIS,extra:{dim:i,scale:t}};return o.component.set("field",t.field),o.component.init(),o},e.prototype.createCircleGrid=function(t,e,n,r,i){var o=this.getCircleGridCfg(t,e,r,i);if(o){var a={component:new zit(o),layer:n,direction:Vtt.NONE,type:Htt.GRID,extra:{dim:i,scale:t,alignTick:Ul(o,"alignTick",!0)}};return a.component.init(),a}},e.prototype.getLineAxisCfg=function(t,e,n){var r=Ul(e,["top"])?this.axisForeContainer:this.axisContainer,i=this.view.getCoordinate(),o=sot(i,n),a=got(t,e),s=cot(this.view.getTheme(),n),l=Ul(e,["title"])?Rl({title:{style:{text:a}}},{title:dot(this.view.getTheme(),n,e.title)},e):e,u=Rl(Za(Za({container:r},o),{ticks:t.getTicks().map((function(t){return{id:""+t.tickValue,name:t.text,value:t.value}})),verticalFactor:i.isPolar?-1*uot(o,i.getCenter()):uot(o,i.getCenter()),theme:s}),s,l),c=this.getAnimateCfg(u),d=c.animate,h=c.animateOption;u.animateOption=h,u.animate=d;var f=lot(o),p=Ul(u,"verticalLimitLength",f?1/3:.5);if(p<=1){var g=this.view.getCanvas().get("width"),v=this.view.getCanvas().get("height");u.verticalLimitLength=p*(f?g:v)}return u},e.prototype.getLineGridCfg=function(t,e,n,r){if(Cut(cot(this.view.getTheme(),n),e)){var i=but(this.view.getTheme(),n),o=Rl({container:Ul(e,["top"])?this.gridForeContainer:this.gridContainer},i,Ul(e,"grid"),this.getAnimateCfg(e));return o.items=xut(this.view.getCoordinate(),t,r,Ul(o,"alignTick",!0)),o}},e.prototype.getCircleAxisCfg=function(t,e,n){var r=Ul(e,["top"])?this.axisForeContainer:this.axisContainer,i=this.view.getCoordinate(),o=t.getTicks().map((function(t){return{id:""+t.tickValue,name:t.text,value:t.value}}));t.isCategory||Math.abs(i.endAngle-i.startAngle)!==2*Math.PI||o.pop();var a=got(t,e),s=cot(this.view.getTheme(),Vtt.CIRCLE),l=Ul(e,["title"])?Rl({title:{style:{text:a}}},{title:dot(this.view.getTheme(),n,e.title)},e):e,u=Rl(Za(Za({container:r},hot(this.view.getCoordinate())),{ticks:o,verticalFactor:1,theme:s}),s,l),c=this.getAnimateCfg(u),d=c.animate,h=c.animateOption;return u.animate=d,u.animateOption=h,u},e.prototype.getCircleGridCfg=function(t,e,n,r){if(Cut(cot(this.view.getTheme(),n),e)){var i=but(this.view.getTheme(),Vtt.RADIUS),o=Rl({container:Ul(e,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},i,Ul(e,"grid"),this.getAnimateCfg(e)),a=Ul(o,"alignTick",!0),s="x"===r?this.view.getYScales()[0]:this.view.getXScale();return o.items=wut(this.view.getCoordinate(),s,t,a,r),o}},e.prototype.getId=function(t,e){return t+"-"+e+"-"+this.view.getCoordinate().type},e.prototype.getAnimateCfg=function(t){return{animate:this.view.getOptions().animate&&Ul(t,"animate"),animateOption:t&&t.animateOption?Rl({},kut,t.animateOption):kut}},e}(Yat);function Mut(t,e,n){return n===Vtt.TOP?[t.minX+t.width/2-e.width/2,t.minY]:n===Vtt.BOTTOM?[t.minX+t.width/2-e.width/2,t.maxY-e.height]:n===Vtt.LEFT?[t.minX,t.minY+t.height/2-e.height/2]:n===Vtt.RIGHT?[t.maxX-e.width,t.minY+t.height/2-e.height/2]:n===Vtt.TOP_LEFT||n===Vtt.LEFT_TOP?[t.tl.x,t.tl.y]:n===Vtt.TOP_RIGHT||n===Vtt.RIGHT_TOP?[t.tr.x-e.width,t.tr.y]:n===Vtt.BOTTOM_LEFT||n===Vtt.LEFT_BOTTOM?[t.bl.x,t.bl.y-e.height]:n===Vtt.BOTTOM_RIGHT||n===Vtt.RIGHT_BOTTOM?[t.br.x-e.width,t.br.y-e.height]:[0,0]}function Aut(t,e){return bl(t)?!1!==t&&{}:Ul(t,[e],t)}function _ut(t){return Ul(t,"position",Vtt.BOTTOM)}var Tut=function(t){function e(e){var n=t.call(this,e)||this;return n.container=n.view.getLayer(Utt.FORE).addGroup(),n}return Ka(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.render=function(){this.update()},e.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox,bs(this.components,(function(e){var n=e.component,r=e.direction,i=Ist(r),o=n.get("maxWidthRatio"),a=n.get("maxHeightRatio"),s=t.getCategoryLegendSizeCfg(i,o,a),l=n.get("maxWidth"),u=n.get("maxHeight");n.update({maxWidth:Math.min(s.maxWidth,l||0),maxHeight:Math.min(s.maxHeight,u||0)});var c=n.get("padding"),d=n.getLayoutBBox(),h=new Zit(d.x,d.y,d.width,d.height).expand(c),f=Mut(t.view.viewBBox,h,r),p=f[0],g=f[1],v=Mut(t.layoutBBox,h,r),m=v[0],y=v[1],b=0,x=0;r.startsWith("top")||r.startsWith("bottom")?(b=p,x=y):(b=m,x=g),n.setLocation({x:b+c[3],y:x+c[0]}),t.layoutBBox=t.layoutBBox.cut(h,r)}))},e.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var e={};if(Ul(this.option,"custom")){var n="global-custom",r=this.getComponentById(n);if(r){var i=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);qit(i,["container"]),r.component.update(i),e[n]=!0}else{var o=this.createCustomLegend(void 0,void 0,void 0,this.option);if(o){o.init();var a=Utt.FORE,s=_ut(this.option);this.components.push({id:n,component:o,layer:a,direction:s,type:Htt.LEGEND,extra:void 0}),e[n]=!0}}}else this.loopLegends((function(n,r,i){var o=t.getId(i.field),a=t.getComponentById(o);if(a){var s=void 0,l=Aut(t.option,i.field);!1!==l&&(Ul(l,"custom")?s=t.getCategoryCfg(n,r,i,l,!0):i.isLinear?s=t.getContinuousCfg(n,r,i,l):i.isCategory&&(s=t.getCategoryCfg(n,r,i,l))),s&&(qit(s,["container"]),a.direction=_ut(l),a.component.update(s),e[o]=!0)}else{var u=t.createFieldLegend(n,r,i);u&&(u.component.init(),t.components.push(u),e[o]=!0)}}));var l=[];bs(this.getComponents(),(function(t){e[t.id]?l.push(t):t.component.destroy()})),this.components=l},e.prototype.clear=function(){t.prototype.clear.call(this),this.container.clear()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.container.remove(!0)},e.prototype.getGeometries=function(t){var e=this,n=t.geometries;return bs(t.views,(function(t){n=n.concat(e.getGeometries(t))})),n},e.prototype.loopLegends=function(t){if(this.view.getRootView()===this.view){var e=this.getGeometries(this.view),n={};bs(e,(function(e){bs(e.getGroupAttributes(),(function(r){var i=r.getScale(r.type);i&&"identity"!==i.type&&!n[i.field]&&(t(e,r,i),n[i.field]=!0)}))}))}},e.prototype.createFieldLegend=function(t,e,n){var r,i=Aut(this.option,n.field),o=Utt.FORE,a=_ut(i);if(!1!==i&&(Ul(i,"custom")?r=this.createCustomLegend(t,e,n,i):n.isLinear?r=this.createContinuousLegend(t,e,n,i):n.isCategory&&(r=this.createCategoryLegend(t,e,n,i))),r)return r.set("field",n.field),{id:this.getId(n.field),component:r,layer:o,direction:a,type:Htt.LEGEND,extra:{scale:n}}},e.prototype.createCustomLegend=function(t,e,n,r){var i=this.getCategoryCfg(t,e,n,r,!0);return new jit(i)},e.prototype.createContinuousLegend=function(t,e,n,r){var i=this.getContinuousCfg(t,e,n,qit(r,["value"]));return new Git(i)},e.prototype.createCategoryLegend=function(t,e,n,r){var i=this.getCategoryCfg(t,e,n,r);return new jit(i)},e.prototype.getContinuousCfg=function(t,e,n,r){var i=n.getTicks(),o=ks(i,(function(t){return 0===t.value})),a=ks(i,(function(t){return 1===t.value})),s=i.map((function(t){var r=t.value,i=t.tickValue,o=e.mapping(n.invert(r)).join("");return{value:i,attrValue:o,color:o,scaleValue:r}}));o||s.push({value:n.min,attrValue:e.mapping(n.invert(0)).join(""),color:e.mapping(n.invert(0)).join(""),scaleValue:0}),a||s.push({value:n.max,attrValue:e.mapping(n.invert(1)).join(""),color:e.mapping(n.invert(1)).join(""),scaleValue:1}),s.sort((function(t,e){return t.value-e.value}));var l={min:$s(s).value,max:Vs(s).value,colors:[],rail:{type:e.type},track:{}};"size"===e.type&&(l.track={style:{fill:"size"===e.type?this.view.getTheme().defaultColor:void 0}}),"color"===e.type&&(l.colors=s.map((function(t){return t.attrValue})));var u=this.container,c=Ist(_ut(r)),d=Ul(r,"title");return d&&(d=Rl({text:oot(n)},d)),l.container=u,l.layout=c,l.title=d,l.animateOption=Qat,this.mergeLegendCfg(l,r,"continuous")},e.prototype.getCategoryCfg=function(t,e,n,r,i){var o=this.container,a=Ul(r,"position",Vtt.BOTTOM),s=Ost(this.view.getTheme(),a),l=Ul(s,["marker"]),u=Ul(r,"marker"),c=Ist(a),d=Ul(s,["pageNavigator"]),h=Ul(r,"pageNavigator"),f=i?function(t,e,n){return n.map((function(n,r){var i=e;gs(i)&&(i=i(n.name,r,Rl({},t,n)));var o=Rl({},t,i,n.marker);return Pst(o),n.marker=o,n}))}(l,u,r.items):Dst(this.view,t,e,l,u),p=Ul(r,"title");p&&(p=Rl({text:n?oot(n):""},p));var g=Ul(r,"maxWidthRatio"),v=Ul(r,"maxHeightRatio"),m=this.getCategoryLegendSizeCfg(c,g,v);m.container=o,m.layout=c,m.items=f,m.title=p,m.animateOption=Qat,m.pageNavigator=Rl({},d,h);var y=this.mergeLegendCfg(m,r,a);y.reversed&&y.items.reverse();var b=Ul(y,"maxItemWidth");return b&&b<=1&&(y.maxItemWidth=this.view.viewBBox.width*b),y},e.prototype.mergeLegendCfg=function(t,e,n){var r=n.split("-")[0],i=Ost(this.view.getTheme(),r);return Rl({},i,t,e)},e.prototype.getId=function(t){return this.name+"-"+t},e.prototype.getComponentById=function(t){return ks(this.components,(function(e){return e.id===t}))},e.prototype.getCategoryLegendSizeCfg=function(t,e,n){void 0===e&&(e=.25),void 0===n&&(n=.25);var r=this.view.viewBBox,i=r.width,o=r.height;return"vertical"===t?{maxWidth:i*e,maxHeight:o}:{maxWidth:i,maxHeight:o*n}},e}(Yat),Put=function(t){function e(e){var n=t.call(this,e)||this;return n.onChangeFn=Zl,n.resetMeasure=function(){n.clear()},n.onValueChange=function(t){var e=t[0],r=t[1];n.start=e,n.end=r,n.changeViewData(e,r)},n.container=n.view.getLayer(Utt.FORE).addGroup(),n.onChangeFn=Yl(n.onValueChange,20,{leading:!0}),n.width=0,n.view.on(Ktt.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(Ktt.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return Ka(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.view.off(Ktt.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(Ktt.BEFORE_CHANGE_SIZE,this.resetMeasure)},e.prototype.init=function(){},e.prototype.render=function(){this.option=this.view.getOptions().slider;var t=this.getSliderCfg(),e=t.start,n=t.end;vs(this.start)&&(this.start=e,this.end=n);var r=this.view.getOptions().data;this.option&&!Fl(r)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},e.prototype.layout=function(){var t=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout((function(){t.view.destroyed||t.changeViewData(t.start,t.end)}),0)),this.slider){var e=this.view.coordinateBBox.width,n=this.slider.component.get("padding"),r=n[0];n[1],n[2];var i=n[3],o=this.slider.component.getLayoutBBox(),a=new Zit(o.x,o.y,Math.min(o.width,e),o.height).expand(n),s=this.getMinMaxText(this.start,this.end),l=s.minText,u=s.maxText,c=Mut(this.view.viewBBox,a,Vtt.BOTTOM);c[0];var d=c[1],h=Mut(this.view.coordinateBBox,a,Vtt.BOTTOM),f=h[0];h[1],this.slider.component.update(Za(Za({},this.getSliderCfg()),{x:f+i,y:d+r,width:this.width,start:this.start,end:this.end,minText:l,maxText:u})),this.view.viewBBox=this.view.viewBBox.cut(a,Vtt.BOTTOM)}},e.prototype.update=function(){this.render()},e.prototype.createSlider=function(){var t=this.getSliderCfg(),e=new Oit(Za({container:this.container},t));return e.init(),{component:e,layer:Utt.FORE,direction:Vtt.BOTTOM,type:Htt.SLIDER}},e.prototype.updateSlider=function(){var t=this.getSliderCfg();if(this.width){var e=this.getMinMaxText(this.start,this.end),n=e.minText,r=e.maxText;t=Za(Za({},t),{width:this.width,start:this.start,end:this.end,minText:n,maxText:r})}return this.slider.component.update(t),this.slider},e.prototype.measureSlider=function(){var t=this.getSliderCfg().width;this.width=t},e.prototype.getSliderCfg=function(){var t={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if(ys(this.option)){var e=Za({data:this.getData()},Ul(this.option,"trendCfg",{}));t=Rl({},t,this.getThemeOptions(),this.option),t=Za(Za({},t),{trendCfg:e})}return t.start=Js(Math.min(vs(t.start)?0:t.start,vs(t.end)?1:t.end),0,1),t.end=Js(Math.max(vs(t.start)?0:t.start,vs(t.end)?1:t.end),0,1),t},e.prototype.getData=function(){var t=this.view.getOptions().data,e=this.view.getYScales()[0],n=this.view.getGroupScales();if(n.length){var r=n[0],i=r.field,o=r.ticks;return t.reduce((function(t,n){return n[i]===o[0]&&t.push(n[e.field]),t}),[])}return t.map((function(t){return t[e.field]||0}))},e.prototype.getThemeOptions=function(){var t=this.view.getTheme();return Ul(t,["components","slider","common"],{})},e.prototype.getMinMaxText=function(t,e){var n=this.view.getOptions().data,r=this.view.getXScale(),i=Us(n,r.field),o=Ql(n);if(!r||!o)return{};var a=Ql(i),s=Math.floor(t*(a-1)),l=Math.floor(e*(a-1)),u=Ul(i,[s]),c=Ul(i,[l]),d=this.getSliderCfg().formatter;return d&&(u=d(u,n[s],s),c=d(c,n[l],l)),{minText:u,maxText:c}},e.prototype.changeViewData=function(t,e){var n=this.view.getOptions().data,r=this.view.getXScale(),i=Ql(n);if(r&&i){var o=Us(n,r.field),a=Ql(o),s=Math.floor(t*(a-1)),l=Math.floor(e*(a-1));this.view.filter(r.field,(function(t,e){var n=o.indexOf(t);return!(n>-1)||Xit(n,s,l)})),this.view.render(!0)}},e.prototype.getComponents=function(){return this.slider?[this.slider]:[]},e.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},e}(Yat),Iut=function(t){function e(e){var n=t.call(this,e)||this;return n.onChangeFn=Zl,n.resetMeasure=function(){n.clear()},n.onValueChange=function(t){var e=t.ratio,r=n.getValidScrollbarCfg().animate;n.ratio=Js(e,0,1);var i=n.view.getOptions().animate;r||n.view.animate(!1),n.changeViewData(n.getScrollRange(),!0),n.view.animate(i)},n.container=n.view.getLayer(Utt.FORE).addGroup(),n.onChangeFn=Yl(n.onValueChange,20,{leading:!0}),n.trackLen=0,n.thumbLen=0,n.ratio=0,n.view.on(Ktt.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(Ktt.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return Ka(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.view.off(Ktt.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(Ktt.BEFORE_CHANGE_SIZE,this.resetMeasure)},e.prototype.init=function(){},e.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},e.prototype.layout=function(){var t=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout((function(){t.view.destroyed||t.changeViewData(t.getScrollRange(),!0)}))),this.scrollbar){var e=this.view.coordinateBBox.width,n=this.scrollbar.component.get("padding"),r=this.scrollbar.component.getLayoutBBox(),i=new Zit(r.x,r.y,Math.min(r.width,e),r.height).expand(n),o=this.getScrollbarComponentCfg(),a=void 0,s=void 0;if(o.isHorizontal){var l=Mut(this.view.viewBBox,i,Vtt.BOTTOM);l[0];var u=l[1],c=Mut(this.view.coordinateBBox,i,Vtt.BOTTOM),d=c[0];c[1],a=d,s=u}else{var h=Mut(this.view.viewBBox,i,Vtt.RIGHT);h[0];u=h[1];var f=Mut(this.view.viewBBox,i,Vtt.RIGHT);d=f[0];f[1],a=d,s=u}a+=n[3],s+=n[0],this.trackLen?this.scrollbar.component.update(Za(Za({},o),{x:a,y:s,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update(Za(Za({},o),{x:a,y:s})),this.view.viewBBox=this.view.viewBBox.cut(i,o.isHorizontal?Vtt.BOTTOM:Vtt.RIGHT)}},e.prototype.update=function(){this.render()},e.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},e.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},e.prototype.getThemeOptions=function(){var t=this.view.getTheme();return Ul(t,["components","scrollbar","common"],{})},e.prototype.getScrollbarTheme=function(t){var e=Ul(this.view.getTheme(),["components","scrollbar"]),n=t||{},r=n.thumbHighlightColor,i=Qa(n,["thumbHighlightColor"]);return{default:Rl({},Ul(e,["default","style"],{}),i),hover:Rl({},Ul(e,["hover","style"],{}),{thumbColor:r})}},e.prototype.measureScrollbar=function(){var t=this.view.getXScale(),e=this.view.getYScales().slice();this.data=this.view.getOptions().data,this.step=this.getStep(),this.cnt=this.getCnt();var n=this.getScrollbarComponentCfg(),r=n.trackLen,i=n.thumbLen;this.trackLen=r,this.thumbLen=i,this.xScaleCfg={field:t.field,values:t.values||[]},this.yScalesCfg=e},e.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*Js(this.ratio,0,1));return[t,Math.min(t+this.step-1,this.cnt-1)]},e.prototype.changeViewData=function(t,e){var n=this,r=t[0],i=t[1],o="vertical"!==this.getValidScrollbarCfg().type,a=Us(this.data,this.xScaleCfg.field),s=o?a:a.reverse();this.yScalesCfg.forEach((function(t){n.view.scale(t.field,{formatter:t.formatter,type:t.type,min:t.min,max:t.max})})),this.view.filter(this.xScaleCfg.field,(function(t){var e=s.indexOf(t);return!(e>-1)||Xit(e,r,i)})),this.view.render(!0)},e.prototype.createScrollbar=function(){var t="vertical"!==this.getValidScrollbarCfg().type,e=new Lit(Za(Za({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return e.init(),{component:e,layer:Utt.FORE,direction:t?Vtt.BOTTOM:Vtt.RIGHT,type:Htt.SCROLLBAR}},e.prototype.updateScrollbar=function(){var t=this.getScrollbarComponentCfg(),e=this.trackLen?Za(Za({},t),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):Za({},t);return this.scrollbar.component.update(e),this.scrollbar},e.prototype.getStep=function(){if(this.step)return this.step;var t=this.view.coordinateBBox,e=this.getValidScrollbarCfg(),n=e.type,r=e.categorySize,i="vertical"!==n;return Math.floor((i?t.width:t.height)/r)},e.prototype.getCnt=function(){if(this.cnt)return this.cnt;var t=this.view.getXScale(),e=this.view.getOptions().data;return Ql(Us(e,t.field))},e.prototype.getScrollbarComponentCfg=function(){var t=this.view,e=t.coordinateBBox,n=t.viewBBox,r=this.getValidScrollbarCfg(),i=r.type,o=r.padding,a=r.width,s=r.height,l=r.style,u="vertical"!==i,c=o[0],d=o[1],h=o[2],f=o[3],p=u?{x:e.minX+f,y:n.maxY-s-h}:{x:n.maxX-a-d,y:e.minY+c},g=this.getStep(),v=this.getCnt(),m=u?e.width-f-d:e.height-c-h,y=Math.max(m*Js(g/v,0,1),20);return Za(Za({},this.getThemeOptions()),{x:p.x,y:p.y,size:u?s:a,isHorizontal:u,trackLen:m,thumbLen:y,thumbOffset:0,theme:this.getScrollbarTheme(l)})},e.prototype.getValidScrollbarCfg=function(){var t={type:"horizontal",categorySize:32,width:8,height:8,padding:[0,0,0,0],animate:!0,style:{}};return ys(this.option)&&(t=Za(Za({},t),this.option)),ys(this.option)&&this.option.padding||(t.padding=(t.type,[0,0,0,0])),t},e}(Yat),Dut={fill:"#CCD6EC",opacity:.3};function Out(t,e,n){var r=function(t,e,n){for(var r=Oat(t,e,n),i=0,o=t.views;i<o.length;i++){var a=o[i];r=r.concat(Oat(a,e,n))}return r}(t,e,n);if(r.length){for(var i=0,o=r=As(r);i<o.length;i++)for(var a=0,s=o[i];a<s.length;a++){var l=s[a],u=l.mappingData,c=u.x,d=u.y;l.x=ms(c)?c[c.length-1]:c,l.y=ms(d)?d[d.length-1]:d}if(!1===n.shared&&r.length>1){for(var h=r[0],f=Math.abs(e.y-h[0].y),p=0,g=r;p<g.length;p++){var v=g[p],m=Math.abs(e.y-v[0].y);m<=f&&(h=v,f=m)}r=[h]}return Gs(As(r))}return[]}var Rut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.show=function(t){var e=this.context.view,n=this.context.event,r=e.getController("tooltip").getTooltipCfg(),i=Out(e,{x:n.x,y:n.y},r);if(!Nl(i,this.items)&&(this.items=i,i.length)){var o=e.getXScale().field,a=i[0].data[o],s=[];if(bs(e.geometries,(function(t){if("interval"===t.type||"schema"===t.type){var e=t.getElementsBy((function(t){return t.getData()[o]===a}));s=s.concat(e)}})),s.length){var l=e.getCoordinate(),u=s[0].shape.getCanvasBBox(),c=s[0].shape.getCanvasBBox(),d=u;bs(s,(function(t){var e=t.shape.getCanvasBBox();l.isTransposed?(e.minY<u.minY&&(u=e),e.maxY>c.maxY&&(c=e)):(e.minX<u.minX&&(u=e),e.maxX>c.maxX&&(c=e)),d.x=Math.min(e.minX,d.minX),d.y=Math.min(e.minY,d.minY),d.width=Math.max(e.maxX,d.maxX)-d.x,d.height=Math.max(e.maxY,d.maxY)-d.y}));var h=e.backgroundGroup,f=e.coordinateBBox,p=void 0;if(l.isRect){var g=e.getXScale(),v=t||{},m=v.appendRatio,y=v.appendWidth;vs(y)&&(m=vs(m)?g.isLinear?0:.25:m,y=l.isTransposed?m*c.height:m*u.width);var b=void 0,x=void 0,w=void 0,C=void 0;l.isTransposed?(b=f.minX,x=Math.min(c.minY,u.minY)-y,w=f.width,C=d.height+2*y):(b=Math.min(u.minX,c.minX)-y,x=f.minY,w=d.width+2*y,C=f.height),p=[["M",b,x],["L",b+w,x],["L",b+w,x+C],["L",b,x+C],["Z"]]}else{var S=$s(s),k=Vs(s),E=Hit(S.getModel(),l).startAngle,M=Hit(k.getModel(),l).endAngle,A=l.getCenter(),_=l.getRadius(),T=l.innerRadius*_;p=Vit(A.x,A.y,_,E,M,T)}if(this.regionPath)this.regionPath.attr("path",p),this.regionPath.show();else{var P=Ul(t,"style",Dut);this.regionPath=h.addShape({type:"path",name:"active-region",capture:!1,attrs:Za(Za({},P),{path:p})})}}}},e.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},e.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),t.prototype.destroy.call(this)},e}(bot),Lut=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeStamp=0,e}return Ka(e,t),e.prototype.show=function(){var t=this.context,e=t.event,n=t.view;if(!n.isTooltipLocked()){var r=this.timeStamp,i=+new Date;if(i-r>Ul(t.view.getOptions(),"tooltip.showDelay",16)){var o=this.location,a={x:e.x,y:e.y};o&&Nl(o,a)||this.showTooltip(n,a),this.timeStamp=i,this.location=a}}},e.prototype.hide=function(){var t=this.context.view,e=t.getController("tooltip"),n=this.context.event,r=n.clientX,i=n.clientY;e.isCursorEntered({x:r,y:i})||t.isTooltipLocked()||(this.hideTooltip(t),this.location=null)},e.prototype.showTooltip=function(t,e){t.showTooltip(e)},e.prototype.hideTooltip=function(t){t.hideTooltip()},e}(bot),But=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.showTooltip=function(t,e){bs(Yot(t),(function(n){var r=Xot(t,n,e);n.showTooltip(r)}))},e.prototype.hideTooltip=function(t){bs(Yot(t),(function(t){t.hideTooltip()}))},e}(Lut),Fut=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeStamp=0,e}return Ka(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},e.prototype.show=function(){var t=this.context.event,e=this.timeStamp,n=+new Date;if(n-e>16){var r=this.location,i={x:t.x,y:t.y};r&&Nl(r,i)||this.showTooltip(i),this.timeStamp=n,this.location=i}},e.prototype.hide=function(){this.hideTooltip(),this.location=null},e.prototype.showTooltip=function(t){var e=this.context.event.target;if(e&&e.get("tip")){this.tooltip||this.renderTooltip();var n=e.get("tip");this.tooltip.update(Za({title:n},t)),this.tooltip.show()}},e.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},e.prototype.renderTooltip=function(){var t,e=this.context.view,n=e.canvas,r={start:{x:0,y:0},end:{x:n.get("width"),y:n.get("height")}},i=e.getTheme(),o=Ul(i,["components","tooltip","domStyles"],{}),a=new Uit({parent:n.get("el").parentNode,region:r,visible:!1,crosshairs:null,domStyles:Za({},Rl({},o,(t={},t["g2-tooltip"]={"max-width":"50%"},t[fit]={"word-break":"break-all"},t)))});a.init(),a.setCapture(!1),this.tooltip=a},e}(bot),Nut=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="",e}return Ka(e,t),e.prototype.hasState=function(t){return t.hasState(this.stateName)},e.prototype.setElementState=function(t,e){t.setState(this.stateName,e)},e.prototype.setState=function(){this.setStateEnable(!0)},e.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},e.prototype.clearViewState=function(t){var e=this;bs(jot(t,this.stateName),(function(t){e.setElementState(t,!1)}))},e}(bot);function zut(t){return Ul(t.get("delegateObject"),"item")}var jut=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ignoreListItemStates=["unchecked"],e}return Ka(e,t),e.prototype.isItemIgnore=function(t,e){return!!this.ignoreListItemStates.filter((function(n){return e.hasState(t,n)})).length},e.prototype.setStateByComponent=function(t,e,n){var r=this.context.view,i=t.get("field"),o=zot(r);this.setElementsStateByItem(o,i,e,n)},e.prototype.setStateByElement=function(t,e){this.setElementState(t,e)},e.prototype.isMathItem=function(t,e,n){var r=Kot(this.context.view,e),i=Got(t,e);return!vs(i)&&n.name===r.getText(i)},e.prototype.setElementsStateByItem=function(t,e,n,r){var i=this;bs(t,(function(t){i.isMathItem(t,e,n)&&t.setState(i.stateName,r)}))},e.prototype.setStateEnable=function(t){var e=Iot(this.context);if(e)Oot(this.context)&&this.setStateByElement(e,t);else{var n=Dot(this.context);if(Rot(n)){var r=n.item,i=n.component;if(r&&i&&!this.isItemIgnore(r,i)){var o=this.context.event.gEvent;if(o&&o.fromShape&&o.toShape&&zut(o.fromShape)===zut(o.toShape))return;this.setStateByComponent(i,r,t)}}}},e.prototype.toggle=function(){var t=Iot(this.context);if(t){var e=t.hasState(this.stateName);this.setElementState(t,!e)}},e.prototype.reset=function(){this.setStateEnable(!1)},e}(Nut),Gut=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return Ka(e,t),e.prototype.active=function(){this.setState()},e}(jut),Uut=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cache={},e}return Ka(e,t),e.prototype.getColorScale=function(t,e){var n=e.geometry.getAttribute("color");return n?t.getScaleByField(n.getFields()[0]):null},e.prototype.getLinkPath=function(t,e){var n=this.context.view.getCoordinate().isTransposed,r=t.shape.getCanvasBBox(),i=e.shape.getCanvasBBox();return n?[["M",r.minX,r.minY],["L",i.minX,i.maxY],["L",i.maxX,i.maxY],["L",r.maxX,r.minY],["Z"]]:[["M",r.maxX,r.minY],["L",i.minX,i.minY],["L",i.minX,i.maxY],["L",r.maxX,r.maxY],["Z"]]},e.prototype.addLinkShape=function(t,e,n,r){var i={opacity:.4,fill:e.shape.attr("fill")};t.addShape({type:"path",attrs:Za(Za({},Rl({},i,gs(r)?r(i,e):r)),{path:this.getLinkPath(e,n)})})},e.prototype.linkByElement=function(t,e){var n=this,r=this.context.view,i=this.getColorScale(r,t);if(i){var o=Got(t,i.field);if(!this.cache[o]){var a=function(t,e,n){return zot(t).filter((function(t){return Got(t,e)===n}))}(r,i.field,o),s=this.linkGroup.addGroup();this.cache[o]=s;var l=a.length;bs(a,(function(t,r){if(r<l-1){var i=a[r+1];n.addLinkShape(s,t,i,e)}}))}}},e.prototype.removeLink=function(t){var e=this.getColorScale(this.context.view,t);if(e){var n=Got(t,e.field);this.cache[n]&&(this.cache[n].remove(),this.cache[n]=null)}},e.prototype.link=function(t){var e=this.context;this.linkGroup||(this.linkGroup=e.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var n=Iot(e);n&&this.linkByElement(n,null==t?void 0:t.style)},e.prototype.unlink=function(){var t=Iot(this.context);t&&this.removeLink(t)},e.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},e}(bot),$ut=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPoint=null,e.endPoint=null,e.isStarted=!1,e.effectSiblings=!1,e.effectByRecord=!1,e}return Ka(e,t),e.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},e.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},e.prototype.getIntersectElements=function(){var t=null;if(Bot(this.context))t=Fot(this.context,10);else{var e=this.startPoint,n=this.isStarted?this.getCurrentPoint():this.endPoint;if(!e||!n)return;var r={minX:Math.min(e.x,n.x),minY:Math.min(e.y,n.y),maxX:Math.max(e.x,n.x),maxY:Math.max(e.y,n.y)};t=Uot(this.context.view,r)}return t},e.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var e=zot(this.context.view),n=this.getIntersectElements();n&&n.length?this.effectByRecord?this.setSiblingsStateByRecord(n,t):this.setElementsState(n,t,e):this.clear()}},e.prototype.setSiblingsStateByRecord=function(t,e){var n=this,r=this.context.view,i=Yot(r),o=t.map((function(t){return t.getModel().data})),a=r.getXScale().field,s=r.getYScales()[0].field;bs(i,(function(t){var r=zot(t),i=r.filter((function(t){var e=t.getModel().data;return qot(o,e,a,s)}));n.setElementsState(i,e,r)}))},e.prototype.setSiblingsState=function(t){var e=this,n=Yot(this.context.view);Bot(this.context)&&bs(n,(function(n){var r=zot(n),i=Not(e.context,n,10);i&&i.length?e.setElementsState(i,t,r):e.clearViewState(n)}))},e.prototype.setElementsState=function(t,e,n){var r=this;bs(n,(function(n){t.includes(n)?r.setElementState(n,e):r.setElementState(n,!1)}))},e.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},e.prototype.clear=function(){var t=this,e=this.context.view;this.effectSiblings?bs(Yot(e),(function(e){t.clearViewState(e)})):this.clearViewState(e)},e}(Nut),Vut=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return Ka(e,t),e.prototype.active=function(){this.setState()},e}($ut),Wut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.setStateEnable=function(t){var e=Iot(this.context);if(e){if(!Oot(this.context))return;t?(this.clear(),this.setElementState(e,!0)):this.hasState(e)&&this.setElementState(e,!1)}},e.prototype.toggle=function(){var t=Iot(this.context);if(t){var e=this.hasState(t);e||this.clear(),this.setElementState(t,!e)}},e.prototype.reset=function(){this.setStateEnable(!1)},e}(Nut),Hut=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return Ka(e,t),e.prototype.active=function(){this.setState()},e}(Wut);function Yut(t){bs(zot(t),(function(t){t.hasState("active")&&t.setState("active",!1),t.hasState("inactive")&&t.setState("inactive",!1)}))}function Xut(t,e,n){bs(t,(function(t){e(t)?(t.hasState("inactive")&&t.setState("inactive",!1),t.setState("active",n)):(t.hasState("active")&&t.setState("active",!1),t.setState("inactive",n))}))}var qut,Kut,Zut=net.INACTIVE,Qut=net.ACTIVE,Jut=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName=Qut,e}return Ka(e,t),e.prototype.setElementsStateByItem=function(t,e,n,r){var i=this;this.setHighlightBy(t,(function(t){return i.isMathItem(t,e,n)}),r)},e.prototype.setElementHighlight=function(t,e){e(t)?(t.hasState(Zut)&&t.setState(Zut,!1),t.setState(Qut,!0)):t.hasState(Qut)||t.setState(Zut,!0)},e.prototype.setHighlightBy=function(t,e,n){var r=this;if(n)bs(t,(function(t){r.setElementHighlight(t,e)}));else{var i=jot(this.context.view,Qut),o=!0;bs(i,(function(t){if(!e(t))return o=!1,!1})),o?this.clear():bs(t,(function(t){e(t)&&(t.hasState(Qut)&&t.setState(Qut,!1),t.setState(Zut,!0))}))}},e.prototype.setElementState=function(t,e){var n=zot(this.context.view);this.setHighlightBy(n,(function(e){return t===e}),e)},e.prototype.highlight=function(){this.setState()},e.prototype.clear=function(){Yut(this.context.view)},e}(jut),tct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.setStateByElement=function(t,e){var n=this.context.view,r=t.geometry.getAttribute("color");if(r){var i=n.getScaleByField(r.getFields()[0]),o=Got(t,i.field),a=zot(n),s=a.filter((function(t){return Got(t,i.field)===o}));this.setHighlightBy(a,(function(t){return s.includes(t)}),e)}},e}(Jut),ect=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.setElementHighlight=function(t,e){e(t)?(t.hasState(Zut)&&t.setState(Zut,!1),t.setState(Qut,!0)):(t.setState(Zut,!0),t.hasState(Qut)&&t.setState(Qut,!1))},e.prototype.setStateByElement=function(t,e){var n=this.context.view,r=n.getXScale(),i=Got(t,r.field),o=zot(n),a=o.filter((function(t){return Got(t,r.field)===i}));this.setHighlightBy(o,(function(t){return a.includes(t)}),e)},e.prototype.toggle=function(){var t=Iot(this.context);if(t){var e=t.hasState(this.stateName);this.setStateByElement(t,!e)}},e}(Jut);(Kut=qut||(qut={})).BEFORE_HIGHLIGHT="element-range-highlight:beforehighlight",Kut.AFTER_HIGHLIGHT="element-range-highlight:afterhighlight",Kut.BEFORE_CLEAR="element-range-highlight:beforeclear",Kut.AFTER_CLEAR="element-range-highlight:afterclear";var nct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return Ka(e,t),e.prototype.clearViewState=function(t){Yut(t)},e.prototype.highlight=function(){var t=this.context,e=t.view,n={view:e,event:t.event,highlightElements:this.getIntersectElements()};e.emit(qut.BEFORE_HIGHLIGHT,Nat.fromData(e,qut.BEFORE_HIGHLIGHT,n)),this.setState(),e.emit(qut.AFTER_HIGHLIGHT,Nat.fromData(e,qut.AFTER_HIGHLIGHT,n))},e.prototype.clear=function(){var e=this.context.view;e.emit(qut.BEFORE_CLEAR,Nat.fromData(e,qut.BEFORE_CLEAR,{})),t.prototype.clear.call(this),e.emit(qut.AFTER_CLEAR,Nat.fromData(e,qut.AFTER_CLEAR,{}))},e.prototype.setElementsState=function(t,e,n){Xut(n,(function(e){return t.indexOf(e)>=0}),e)},e}($ut),rct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return Ka(e,t),e.prototype.highlight=function(){this.setState()},e.prototype.setElementState=function(t,e){Xut(zot(this.context.view),(function(e){return t===e}),e)},e.prototype.clear=function(){Yut(this.context.view)},e}(Wut),ict=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return Ka(e,t),e.prototype.selected=function(){this.setState()},e}($ut),oct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return Ka(e,t),e.prototype.selected=function(){this.setState()},e}(jut),act=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return Ka(e,t),e.prototype.selected=function(){this.setState()},e}(Wut),sct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="",e.ignoreItemStates=[],e}return Ka(e,t),e.prototype.getTriggerListInfo=function(){var t=Dot(this.context),e=null;return Rot(t)&&(e={item:t.item,list:t.component}),e},e.prototype.getAllowComponents=function(){var t=this,e=Vot(this.context.view),n=[];return bs(e,(function(e){e.isList()&&t.allowSetStateByElement(e)&&n.push(e)})),n},e.prototype.hasState=function(t,e){return t.hasState(e,this.stateName)},e.prototype.clearAllComponentsState=function(){var t=this;bs(this.getAllowComponents(),(function(e){e.clearItemsState(t.stateName)}))},e.prototype.allowSetStateByElement=function(t){var e=t.get("field");if(!e)return!1;if(this.cfg&&this.cfg.componentNames){var n=t.get("name");if(-1===this.cfg.componentNames.indexOf(n))return!1}var r=Kot(this.context.view,e);return r&&r.isCategory},e.prototype.allowSetStateByItem=function(t,e){var n=this.ignoreItemStates;return!n.length||0===n.filter((function(n){return e.hasState(t,n)})).length},e.prototype.setStateByElement=function(t,e,n){var r=t.get("field"),i=Kot(this.context.view,r),o=Got(e,r),a=i.getText(o);this.setItemsState(t,a,n)},e.prototype.setStateEnable=function(t){var e=this,n=Iot(this.context);if(n){bs(this.getAllowComponents(),(function(r){e.setStateByElement(r,n,t)}))}else{var r=Dot(this.context);if(Rot(r)){var i=r.item,o=r.component;this.allowSetStateByElement(o)&&this.allowSetStateByItem(i,o)&&this.setItemState(o,i,t)}}},e.prototype.setItemsState=function(t,e,n){var r=this;bs(t.getItems(),(function(i){i.name===e&&r.setItemState(t,i,n)}))},e.prototype.setItemState=function(t,e,n){t.setItemState(e,this.stateName,n)},e.prototype.setState=function(){this.setStateEnable(!0)},e.prototype.reset=function(){this.setStateEnable(!1)},e.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var e=t.list,n=t.item,r=this.hasState(e,n);this.setItemState(e,n,!r)}},e.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},e}(bot),lct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return Ka(e,t),e.prototype.active=function(){this.setState()},e}(sct);var uct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e.ignoreItemStates=["unchecked"],e}return Ka(e,t),e.prototype.setItemsState=function(t,e,n){this.setHighlightBy(t,(function(t){return t.name===e}),n)},e.prototype.setItemState=function(t,e,n){t.getItems(),this.setHighlightBy(t,(function(t){return t===e}),n)},e.prototype.setHighlightBy=function(t,e,n){var r=t.getItems();if(n)bs(r,(function(n){e(n)?(t.hasState(n,"inactive")&&t.setItemState(n,"inactive",!1),t.setItemState(n,"active",!0)):t.hasState(n,"active")||t.setItemState(n,"inactive",!0)}));else{var i=t.getItemsByState("active"),o=!0;bs(i,(function(t){if(!e(t))return o=!1,!1})),o?this.clear():bs(r,(function(n){e(n)&&(t.hasState(n,"active")&&t.setItemState(n,"active",!1),t.setItemState(n,"inactive",!0))}))}},e.prototype.highlight=function(){this.setState()},e.prototype.clear=function(){var t,e=this.getTriggerListInfo();e?bs((t=e.list).getItems(),(function(e){t.hasState(e,"active")&&t.setItemState(e,"active",!1),t.hasState(e,"inactive")&&t.setItemState(e,"inactive",!1)})):bs(this.getAllowComponents(),(function(t){t.clearItemsState("active"),t.clearItemsState("inactive")}))},e}(sct),cct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return Ka(e,t),e.prototype.selected=function(){this.setState()},e}(sct),dct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="unchecked",e}return Ka(e,t),e.prototype.unchecked=function(){this.setState()},e}(sct),hct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="checked",e}return Ka(e,t),e.prototype.setItemState=function(t,e,n){this.setCheckedBy(t,(function(t){return t===e}),n)},e.prototype.setCheckedBy=function(t,e,n){var r=t.getItems();n&&bs(r,(function(n){e(n)?(t.hasState(n,"unchecked")&&t.setItemState(n,"unchecked",!1),t.setItemState(n,"checked",!0)):t.hasState(n,"checked")||t.setItemState(n,"unchecked",!0)}))},e.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var e=t.list,n=t.item;!Hs(e.getItems(),(function(t){return e.hasState(t,"unchecked")}))||e.hasState(n,"unchecked")?this.setItemState(e,n,!0):this.reset()}},e.prototype.checked=function(){this.setState()},e.prototype.reset=function(){bs(this.getAllowComponents(),(function(t){t.clearItemsState("checked"),t.clearItemsState("unchecked")}))},e}(sct),fct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maskShape=null,e.points=[],e.starting=!1,e.moving=!1,e.preMovePoint=null,e.shapeType="path",e}return Ka(e,t),e.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},e.prototype.emitEvent=function(t){var e="mask:"+t,n=this.context.view,r=this.context.event;n.emit(e,{target:this.maskShape,shape:this.maskShape,points:this.points,x:r.x,y:r.y})},e.prototype.createMask=function(){var t=this.context.view,e=this.getMaskAttrs();return t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:Za({fill:"#C5D4EB",opacity:.3},e)})},e.prototype.getMaskPath=function(){return[]},e.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},e.prototype.start=function(t){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(null==t?void 0:t.maskStyle),this.emitEvent("start")},e.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},e.prototype.move=function(){if(this.moving&&this.maskShape){var t=this.getCurrentPoint(),e=this.preMovePoint,n=t.x-e.x,r=t.y-e.y;bs(this.points,(function(t){t.x+=n,t.y+=r})),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},e.prototype.updateMask=function(t){var e=Rl({},this.getMaskAttrs(),t);this.maskShape.attr(e)},e.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},e.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},e.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},e.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},e.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,t.prototype.destroy.call(this)},e}(bot),pct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shapeType="circle",e}return Ka(e,t),e.prototype.getMaskAttrs=function(){var t=this.points,e=Vs(this.points),n=0,r=0,i=0;if(t.length){var o=t[0];n=Wot(o,e)/2,r=(e.x+o.x)/2,i=(e.y+o.y)/2}return{x:r,y:i,r:n}},e}(fct),gct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shapeType="rect",e}return Ka(e,t),e.prototype.getRegion=function(){var t=this.points;return{start:$s(t),end:Vs(t)}},e.prototype.getMaskAttrs=function(){var t=this.getRegion(),e=t.start,n=t.end;return{x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),width:Math.abs(n.x-e.x),height:Math.abs(n.y-e.y)}},e}(fct);function vct(t){t.x=Js(t.x,0,1),t.y=Js(t.y,0,1)}var mct,yct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dim="x",e.inPlot=!0,e}return Ka(e,t),e.prototype.getRegion=function(){var t=null,e=null,n=this.points,r=this.dim,i=this.context.view.getCoordinate(),o=i.invert($s(n)),a=i.invert(Vs(n));return this.inPlot&&(vct(o),vct(a)),"x"===r?(t=i.convert({x:o.x,y:0}),e=i.convert({x:a.x,y:1})):(t=i.convert({x:0,y:o.y}),e=i.convert({x:1,y:a.y})),{start:t,end:e}},e}(gct),bct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getMaskPath=function(){var t=this.points,e=[];return t.length&&(bs(t,(function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e.push(["L",t[0].x,t[0].y])),e},e.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},e.prototype.addPoint=function(){this.resize()},e}(fct),xct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getMaskPath=function(){return function(t,e){if(t.length<=2)return Aot(t,!1);var n=t[0],r=[];bs(t,(function(t){r.push(t.x),r.push(t.y)}));var i=Mot(r,e,null);return i.unshift(["M",n.x,n.y]),i}(this.points,!0)},e}(bct),wct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.setCursor=function(t){this.context.view.getCanvas().setCursor(t)},e.prototype.default=function(){this.setCursor("default")},e.prototype.pointer=function(){this.setCursor("pointer")},e.prototype.move=function(){this.setCursor("move")},e.prototype.crosshair=function(){this.setCursor("crosshair")},e.prototype.wait=function(){this.setCursor("wait")},e.prototype.help=function(){this.setCursor("help")},e.prototype.text=function(){this.setCursor("text")},e.prototype.eResize=function(){this.setCursor("e-resize")},e.prototype.wResize=function(){this.setCursor("w-resize")},e.prototype.nResize=function(){this.setCursor("n-resize")},e.prototype.sResize=function(){this.setCursor("s-resize")},e.prototype.neResize=function(){this.setCursor("ne-resize")},e.prototype.nwResize=function(){this.setCursor("nw-resize")},e.prototype.seResize=function(){this.setCursor("se-resize")},e.prototype.swResize=function(){this.setCursor("sw-resize")},e.prototype.nsResize=function(){this.setCursor("ns-resize")},e.prototype.ewResize=function(){this.setCursor("ew-resize")},e}(bot),Cct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.filterView=function(t,e,n){var r=this;t.getScaleByField(e)&&t.filter(e,n),t.views&&t.views.length&&bs(t.views,(function(t){r.filterView(t,e,n)}))},e.prototype.filter=function(){var t=Dot(this.context);if(t){var e=this.context.view,n=t.component,r=n.get("field");if(Rot(t)){if(r){var i=n.getItemsByState("unchecked"),o=Kot(e,r),a=i.map((function(t){return t.name}));a.length?this.filterView(e,r,(function(t){var e=o.getText(t);return!a.includes(e)})):this.filterView(e,r,null),e.render(!0)}}else if(Lot(t)){var s=n.getValue(),l=s[0],u=s[1];this.filterView(e,r,(function(t){return t>=l&&t<=u})),e.render(!0)}}},e}(bot);function Sct(t,e,n,r){var i=Math.min(n[e],r[e]),o=Math.max(n[e],r[e]),a=t.range,s=a[0],l=a[1];if(i<s&&(i=s),o>l&&(o=l),i===l&&o===l)return null;var u=t.invert(i),c=t.invert(o);if(t.isCategory){var d=t.values.indexOf(u),h=t.values.indexOf(c),f=t.values.slice(d,h+1);return function(t){return f.includes(t)}}return function(t){return t>=u&&t<=c}}!function(t){t.FILTER="brush-filter-processing",t.RESET="brush-filter-reset",t.BEFORE_FILTER="brush-filter:beforefilter",t.AFTER_FILTER="brush-filter:afterfilter",t.BEFORE_RESET="brush-filter:beforereset",t.AFTER_RESET="brush-filter:afterreset"}(mct||(mct={}));var kct,Ect,Mct,Act,_ct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dims=["x","y"],e.startPoint=null,e.isStarted=!1,e}return Ka(e,t),e.prototype.hasDim=function(t){return this.dims.includes(t)},e.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},e.prototype.filter=function(){var t,e;if(Bot(this.context)){var n=this.context.event.target.getCanvasBBox();t={x:n.x,y:n.y},e={x:n.maxX,y:n.maxY}}else{if(!this.isStarted)return;t=this.startPoint,e=this.context.getCurrentPoint()}if(!(Math.abs(t.x-e.x)<5||Math.abs(t.x-e.y)<5)){var r=this.context,i=r.view,o={view:i,event:r.event,dims:this.dims};i.emit(mct.BEFORE_FILTER,Nat.fromData(i,mct.BEFORE_FILTER,o));var a=i.getCoordinate(),s=a.invert(e),l=a.invert(t);if(this.hasDim("x")){var u=i.getXScale(),c=Sct(u,"x",s,l);this.filterView(i,u.field,c)}if(this.hasDim("y")){var d=i.getYScales()[0];c=Sct(d,"y",s,l);this.filterView(i,d.field,c)}this.reRender(i,{source:mct.FILTER}),i.emit(mct.AFTER_FILTER,Nat.fromData(i,mct.AFTER_FILTER,o))}},e.prototype.end=function(){this.isStarted=!1},e.prototype.reset=function(){var t=this.context.view;if(t.emit(mct.BEFORE_RESET,Nat.fromData(t,mct.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim("x")){var e=t.getXScale();this.filterView(t,e.field,null)}if(this.hasDim("y")){var n=t.getYScales()[0];this.filterView(t,n.field,null)}this.reRender(t,{source:mct.RESET}),t.emit(mct.AFTER_RESET,Nat.fromData(t,mct.AFTER_RESET,{}))},e.prototype.filterView=function(t,e,n){t.filter(e,n)},e.prototype.reRender=function(t,e){t.render(!0,e)},e}(bot),Tct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.filterView=function(t,e,n){bs(Yot(t),(function(t){t.filter(e,n)}))},e.prototype.reRender=function(t){bs(Yot(t),(function(t){t.render(!0)}))},e}(_ct),Pct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.filter=function(){var t=Dot(this.context),e=this.context.view,n=zot(e);if(Bot(this.context)){var r=Fot(this.context,10);r&&bs(n,(function(t){r.includes(t)?t.show():t.hide()}))}else if(t){var i=t.component,o=i.get("field");if(Rot(t)){if(o){var a=i.getItemsByState("unchecked"),s=Kot(e,o),l=a.map((function(t){return t.name}));bs(n,(function(t){var e=Got(t,o),n=s.getText(e);l.indexOf(n)>=0?t.hide():t.show()}))}}else if(Lot(t)){var u=i.getValue(),c=u[0],d=u[1];bs(n,(function(t){var e=Got(t,o);e>=c&&e<=d?t.show():t.hide()}))}}},e.prototype.clear=function(){bs(zot(this.context.view),(function(t){t.show()}))},e.prototype.reset=function(){this.clear()},e}(bot),Ict=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.byRecord=!1,e}return Ka(e,t),e.prototype.filter=function(){Bot(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},e.prototype.filterByRecord=function(){var t=this.context.view,e=Fot(this.context,10);if(e){var n=t.getXScale().field,r=t.getYScales()[0].field,i=e.map((function(t){return t.getModel().data}));bs(Yot(t),(function(t){bs(zot(t),(function(t){var e=t.getModel().data;qot(i,e,n,r)?t.show():t.hide()}))}))}},e.prototype.filterByBBox=function(){var t=this;bs(Yot(this.context.view),(function(e){var n=Not(t.context,e,10),r=zot(e);n&&bs(r,(function(t){n.includes(t)?t.show():t.hide()}))}))},e.prototype.reset=function(){bs(Yot(this.context.view),(function(t){bs(zot(t),(function(t){t.show()}))}))},e}(bot),Dct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buttonGroup=null,e.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},e}return Ka(e,t),e.prototype.getButtonCfg=function(){return Rl(this.buttonCfg,this.cfg)},e.prototype.drawButton=function(){var t=this.getButtonCfg(),e=this.context.view.foregroundGroup.addGroup({name:t.name}),n=e.addShape({type:"text",name:"button-text",attrs:Za({text:t.text},t.textStyle)}).getBBox(),r=Rat(t.padding),i=e.addShape({type:"rect",name:"button-rect",attrs:Za({x:n.x-r[3],y:n.y-r[0],width:n.width+r[1]+r[3],height:n.height+r[0]+r[2]},t.style)});i.toBack(),e.on("mouseenter",(function(){i.attr(t.activeStyle)})),e.on("mouseleave",(function(){i.attr(t.style)})),this.buttonGroup=e},e.prototype.resetPosition=function(){var t=this.context.view.getCoordinate().convert({x:1,y:1}),e=this.buttonGroup,n=e.getBBox(),r=yc(null,[["t",t.x-n.width-10,t.y+n.height+5]]);e.setMatrix(r)},e.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},e.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},e.prototype.destroy=function(){var e=this.buttonGroup;e&&e.remove(),t.prototype.destroy.call(this)},e}(bot),Oct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.starting=!1,e.dragStart=!1,e}return Ka(e,t),e.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},e.prototype.drag=function(){if(this.startPoint){var t=this.context.getCurrentPoint(),e=this.context.view,n=this.context.event;this.dragStart?e.emit("drag",{target:n.target,x:n.x,y:n.y}):Wot(t,this.startPoint)>4&&(e.emit("dragstart",{target:n.target,x:n.x,y:n.y}),this.dragStart=!0)}},e.prototype.end=function(){if(this.dragStart){var t=this.context.view,e=this.context.event;t.emit("dragend",{target:e.target,x:e.x,y:e.y})}this.starting=!1,this.dragStart=!1},e}(bot),Rct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.starting=!1,e.isMoving=!1,e.startPoint=null,e.startMatrix=null,e}return Ka(e,t),e.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},e.prototype.move=function(){if(this.starting){var t=this.startPoint,e=this.context.getCurrentPoint();if(Wot(t,e)>5&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var n=this.context.view,r=yc(this.startMatrix,[["t",e.x-t.x,e.y-t.y]]);n.backgroundGroup.setMatrix(r),n.foregroundGroup.setMatrix(r),n.middleGroup.setMatrix(r)}}},e.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},e.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},e}(bot),Lct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dims=["x","y"],e.cfgFields=["dims"],e.cacheScaleDefs={},e}return Ka(e,t),e.prototype.hasDim=function(t){return this.dims.includes(t)},e.prototype.getScale=function(t){var e=this.context.view;return"x"===t?e.getXScale():e.getYScales()[0]},e.prototype.resetDim=function(t){var e=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var n=this.getScale(t);e.scale(n.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},e.prototype.reset=function(){this.resetDim("x"),this.resetDim("y"),this.context.view.render(!0)},e}(bot),Bct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPoint=null,e.starting=!1,e.startCache={},e}return Ka(e,t),e.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0,bs(this.dims,(function(e){var n=t.getScale(e),r=n.min,i=n.max,o=n.values;t.startCache[e]={min:r,max:i,values:o}}))},e.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},e.prototype.translate=function(){var t=this;if(this.starting){var e=this.startPoint,n=this.context.view.getCoordinate(),r=this.context.getCurrentPoint(),i=n.invert(e),o=n.invert(r),a=o.x-i.x,s=o.y-i.y,l=this.context.view;bs(this.dims,(function(e){t.translateDim(e,{x:-1*a,y:-1*s})})),l.render(!0)}},e.prototype.translateDim=function(t,e){if(this.hasDim(t)){var n=this.getScale(t);n.isLinear&&this.translateLinear(t,n,e)}},e.prototype.translateLinear=function(t,e,n){var r=this.context.view,i=this.startCache[t],o=i.min,a=i.max,s=a-o,l=n[t]*s;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:e.nice,min:o,max:a}),r.scale(e.field,{nice:!1,min:o+l,max:a+l})},e.prototype.reset=function(){t.prototype.reset.call(this),this.startPoint=null,this.starting=!1},e}(Lct),Fct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.zoomRatio=.05,e}return Ka(e,t),e.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},e.prototype.zoom=function(t){var e=this;bs(this.dims,(function(n){e.zoomDim(n,t)})),this.context.view.render(!0)},e.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},e.prototype.zoomDim=function(t,e){if(this.hasDim(t)){var n=this.getScale(t);n.isLinear&&this.zoomLinear(t,n,e)}},e.prototype.zoomLinear=function(t,e,n){var r=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:e.nice,min:e.min,max:e.max});var i=this.cacheScaleDefs[t],o=i.max-i.min,a=e.min,s=e.max,l=n*o,u=a-l,c=s+l,d=(c-u)/o;c>u&&d<100&&d>.01&&r.scale(e.field,{nice:!1,min:a-l,max:s+l})},e}(Lct);function Nct(t){return t.isInPlot()}function zct(t){return t.gEvent.preventDefault(),t.gEvent.originalEvent.deltaY>0}function jct(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return t.reduce((function(t,e){return e(t)}),e)}}function Gct(t,e){var n={};return null!==t&&"object"==typeof t&&e.forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}function Uct(t,e){return e?Fs(e,(function(t,e,n){return t.replace(new RegExp("{\\s*"+n+"\\s*}","g"),e)}),t):t}kct="dark",Ect=cat(Hst),Sat[pl(kct)]=Cat(Ect),cet("canvas",Lb),cet("svg",Sx),Wat("Polygon",Slt),Wat("Interval",ylt),Wat("Schema",klt),Wat("Path",olt),Wat("Point",Clt),Wat("Line",blt),Wat("Area",ult),Wat("Edge",clt),Wat("Heatmap",dlt),Wat("Violin",Elt),ast("base",Mst),ast("interval",Rlt),ast("pie",Flt),ast("polar",Blt),sst("overlap",(function(t,e,n,r){var i=new zlt;bs(e,(function(t){for(var e=t.find((function(t){return"text"===t.get("type")})),n=e.attr(),r=n.x,o=n.y,a=!1,s=0;s<=8;s++){var l=jlt(e,r,o,s);if(i.hasGap(l)){i.fillGap(l),a=!0;break}}a||t.remove(!0)})),i.destroy()})),sst("distribute",(function(t,e,n,r){if(t.length&&e.length){var i=t[0]?t[0].offset:0,o=e[0].get("coordinate"),a=o.getRadius(),s=o.getCenter();if(i>0){var l=2*(a+i)+28,u={start:o.start,end:o.end},c=[[],[]];t.forEach((function(t){t&&("right"===t.textAlign?c[0].push(t):c[1].push(t))})),c.forEach((function(t,n){var r=l/14;t.length>r&&(t.sort((function(t,e){return e["..percent"]-t["..percent"]})),t.splice(r,t.length-r)),t.sort((function(t,e){return t.y-e.y})),function(t,e,n,r,i,o){var a,s=!0,l=r.start,u=r.end,c=Math.min(l.y,u.y),d=Math.abs(l.y-u.y),h=0,f=Number.MIN_VALUE,p=e.map((function(t){return t.y>h&&(h=t.y),t.y<f&&(f=t.y),{size:n,targets:[t.y-c]}}));for(f-=c,h-c>d&&(d=h-c);s;)for(p.forEach((function(t){var e=(Math.min.apply(f,t.targets)+Math.max.apply(f,t.targets))/2;t.pos=Math.min(Math.max(f,e-t.size/2),d-t.size)})),s=!1,a=p.length;a--;)if(a>0){var g=p[a-1],v=p[a];g.pos+g.size>v.pos&&(g.size+=v.size,g.targets=g.targets.concat(v.targets),g.pos+g.size>d&&(g.pos=d-g.size),p.splice(a,1),s=!0)}a=0,p.forEach((function(t){var r=c+n/2;t.targets.forEach((function(){e[a].y=t.pos+r,r+=n,a++}))}));for(var m={},y=0,b=t;y<b.length;y++){var x=b[y];m[x.get("id")]=x}e.forEach((function(t){var e=t.r*t.r,n=Math.pow(Math.abs(t.y-i.y),2);if(e<n)t.x=i.x;else{var r=Math.sqrt(e-n);t.x=o?i.x+r:i.x-r}var a=m[t.id];a.attr("x",t.x),a.attr("y",t.y);var s=ks(a.getChildren(),(function(t){return"text"===t.get("type")}));s&&(s.attr("y",t.y),s.attr("x",t.x))}))}(e,t,14,u,s,n)}))}bs(t,(function(t){if(t&&t.labelLine){var e=t.offset,n=t.angle,r=$it(s.x,s.y,a,n),i=$it(s.x,s.y,a+e/2,n),o=t.x+Ul(t,"offsetX",0),l=t.y+Ul(t,"offsetY",0),u={x:o-4*Math.cos(n),y:l-4*Math.sin(n)};ys(t.labelLine)||(t.labelLine={}),t.labelLine.path=["M "+r.x,r.y+" Q"+i.x,i.y+" "+u.x,u.y].join(",")}}))}})),sst("fixed-overlap",(function(t,e,n,r){var i=new zlt;bs(e,(function(t){(function(t,e,n){void 0===n&&(n=100);var r,i=t.attr(),o=i.x,a=i.y,s=t.getCanvasBBox(),l=Math.sqrt(s.width*s.width+s.height*s.height),u=1,c=0,d=0;if(e.hasGap(s))return e.fillGap(s),!0;for(var h,f,p=!1,g=0,v={};Math.min(Math.abs(c),Math.abs(d))<l&&g<n;)if(h=u+=-1,f=void 0,d=~~(r=[(f=.1*h)*Math.cos(f),f*Math.sin(f)])[1],((c=~~r[0])||d)&&!v[c+"-"+d]&&(t.attr({x:o+c,y:a+d}),c+d<0&&t.attr("textAlign","right"),g++,e.hasGap(t.getCanvasBBox()))){e.fillGap(t.getCanvasBBox()),p=!0,v[c+"-"+d]=!0;break}return p})(t.find((function(t){return"text"===t.get("type")})),i)||t.remove(!0)})),i.destroy()})),sst("hide-overlap",(function(t,e,n,r){for(var i=0;i<e.length;i++){var o=e[i];if(e[i].get("visible"))for(var a=i+1;a<e.length;a++){var s=e[a];if(o&&s&&o!==s&&s.get("visible"))Ylt(wst(o,t[i],Ul(t[i],"background.padding")),wst(s,t[a],Ul(t[a],"background.padding")))&&e[a].set("visible",!1)}}})),sst("limit-in-shape",(function(t,e,n,r){bs(e,(function(t,e){var r=t.getCanvasBBox(),i=n[e].getBBox();(r.minX<i.minX||r.minY<i.minY||r.maxX>i.maxX||r.maxY>i.maxY)&&t.remove(!0)}))})),sst("limit-in-canvas",(function(t,e,n,r){bs(e,(function(t){var e=r.minX,n=r.minY,i=r.maxX,o=r.maxY,a=t.getCanvasBBox(),s=a.minX,l=a.minY,u=a.maxX,c=a.maxY,d=a.x,h=a.y,f=a.width,p=a.height,g=d,v=h;(s<e||u<e)&&(g=e),(l<n||c<n)&&(v=n),s>i?g=i-f:u>i&&(g-=u-i),l>o?v=o-p:c>o&&(v-=c-o),g===d&&v===h||yst(t,g-d,v-h)}))})),sst("limit-in-plot",(function(t,e,n,r,i){if(!(e.length<=0)){var o=(null==i?void 0:i.direction)||["top","right","bottom","left"],a=(null==i?void 0:i.action)||"translate",s=(null==i?void 0:i.margin)||0,l=e[0].get("coordinate");if(l){var u=function(t,e){void 0===e&&(e=0);var n=t.start,r=t.end,i=t.getWidth(),o=t.getHeight(),a=Math.min(n.x,r.x),s=Math.min(n.y,r.y);return Zit.fromRange(a-e,s-e,a+i+e,s+o+e)}(l,s),c=u.minX,d=u.minY,h=u.maxX,f=u.maxY;bs(e,(function(t){var e=t.getCanvasBBox(),n=e.minX,r=e.minY,i=e.maxX,s=e.maxY,l=e.x,u=e.y,p=e.width,g=e.height,v=l,m=u;if(o.indexOf("left")>=0&&(n<c||i<c)&&(v=c),o.indexOf("top")>=0&&(r<d||s<d)&&(m=d),o.indexOf("right")>=0&&(n>h?v=h-p:i>h&&(v-=i-h)),o.indexOf("bottom")>=0&&(r>f?m=f-g:s>f&&(m-=s-f)),v!==l||m!==u){var y=v-l;if("translate"===a)yst(t,y,m-u);else if("ellipsis"===a){t.findAll((function(t){return"text"===t.get("type")})).forEach((function(t){var e=Wl(t.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),n=t.getCanvasBBox(),r=function(t,e,n){var r,i=eut("...",n);r=zs(t)?t:fl(t);var o,a,s=e,l=[];if(eut(t,n)<=e)return t;for(;o=r.substr(0,16),!((a=eut(o,n))+i>s&&a>s);)if(l.push(o),s-=a,!(r=r.substr(16)))return l.join("");for(;o=r.substr(0,1),!((a=eut(o,n))+i>s);)if(l.push(o),s-=a,!(r=r.substr(1)))return l.join("");return l.join("")+"..."}(t.attr("text"),n.width-Math.abs(y),e);t.attr("text",r)}))}else t.hide()}}))}}})),sst("pie-outer",(function(t,e,n,r){var i=ds(t,(function(t){return!vs(t)})),o=e[0]&&e[0].get("coordinate");if(o){for(var a=o.getCenter(),s=o.getRadius(),l={},u=0,c=e;u<c.length;u++){var d=c[u];l[d.get("id")]=d}var h=Ul(i[0],"labelHeight",14),f=Ul(i[0],"offset",0);if(!(f<=0)){var p="right",g=Xs(i,(function(t){return t.x<a.x?"left":p})),v=o.start,m=o.end,y=Math.min(2*(s+f+h),o.getHeight()),b=y/2,x={minX:v.x,maxX:m.x,minY:a.y-b,maxY:a.y+b};bs(g,(function(t,e){var n=Math.floor(y/h);t.length>n&&(t.sort((function(t,e){return e.percent-t.percent})),bs(t,(function(t,e){e+1>n&&(l[t.id].set("visible",!1),t.invisible=!0)}))),Nlt(t,h,x)})),bs(g,(function(t,e){bs(t,(function(t){var n=e===p,r=l[t.id].getChildByIndex(0);if(r){var i=s+f,u=t.y-a.y,c=Math.pow(i,2),d=Math.pow(u,2),h=c-d>0?c-d:0,g=Math.sqrt(h),v=Math.abs(Math.cos(t.angle)*i);t.x=n?a.x+Math.max(g,v):a.x-Math.max(g,v)}r&&(r.attr("y",t.y),r.attr("x",t.x)),function(t,e){var n=e.getCenter(),r=e.getRadius();if(t&&t.labelLine){var i=t.angle,o=t.offset,a=$it(n.x,n.y,r,i),s=t.x+Ul(t,"offsetX",0)*(Math.cos(i)>0?1:-1),l=t.y+Ul(t,"offsetY",0)*(Math.sin(i)>0?1:-1),u={x:s-4*Math.cos(i),y:l-4*Math.sin(i)},c=t.labelLine.smooth,d=[],h=u.x-n.x,f=u.y-n.y,p=Math.atan(f/h);if(h<0&&(p+=Math.PI),!1===c){ys(t.labelLine)||(t.labelLine={});var g=0;(i<0&&i>-Math.PI/2||i>1.5*Math.PI)&&u.y>a.y&&(g=1),i>=0&&i<Math.PI/2&&u.y>a.y&&(g=1),i>=Math.PI/2&&i<Math.PI&&a.y>u.y&&(g=1),(i<-Math.PI/2||i>=Math.PI&&i<1.5*Math.PI)&&a.y>u.y&&(g=1);var v=o/2>4?4:Math.max(o/2-1,0),m=$it(n.x,n.y,r+v,i),y=$it(n.x,n.y,r+o/2,p);d.push("M "+a.x+" "+a.y),d.push("L "+m.x+" "+m.y),d.push("A "+n.x+" "+n.y+" 0 0 "+g+" "+y.x+" "+y.y),d.push("L "+u.x+" "+u.y)}else{m=$it(n.x,n.y,r+(o/2>4?4:Math.max(o/2-1,0)),i);var b=a.x<n.x?1:-1;d.push("M "+u.x+" "+u.y);var x=(a.y-n.y)/(a.x-n.x),w=(u.y-n.y)/(u.x-n.x);Math.abs(x-w)>Math.pow(Math.E,-16)&&d.push.apply(d,["C",u.x+4*b,u.y,2*m.x-a.x,2*m.y-a.y,a.x,a.y]),d.push("L "+a.x+" "+a.y)}t.labelLine.path=d.join(" ")}}(t,o)}))}))}}})),sst("adjust-color",(function(t,e,n){if(0!==n.length){var r=n[0].get("element").geometry.theme,i=r.labels||{},o=i.fillColorLight,a=i.fillColorDark;n.forEach((function(t,n){var i=e[n].find((function(t){return"text"===t.get("type")})),s=Zit.fromObject(t.getBBox()),l=Zit.fromObject(i.getCanvasBBox()),u=!s.contains(l),c=function(t){var e=Get.toRGB(t).toUpperCase();if(qlt[e])return qlt[e];var n=Get.rgb2arr(e);return(299*n[0]+587*n[1]+114*n[2])/1e3<128}(t.attr("fill"));u?i.attr(r.overflowLabels.style):c?o&&i.attr("fill",o):a&&i.attr("fill",a)}))}})),sst("interval-adjust-position",(function(t,e,n){var r;if(0!==n.length){var i=null===(r=n[0])||void 0===r?void 0:r.get("element"),o=null==i?void 0:i.geometry;if(o&&"interval"===o.type)Klt(o,e,n)&&n.forEach((function(t,n){var r=e[n];!function(t,e,n){var r=t.coordinate,i=Zit.fromObject(n.getBBox()),o=xst(e);r.isTransposed?o.attr({x:i.minX+i.width/2,textAlign:"center"}):o.attr({y:i.minY+i.height/2,textBaseline:"middle"})}(o,r,t)}))}})),sst("interval-hide-overlap",(function(t,e,n){var r;if(0!==n.length){var i=null===(r=n[0])||void 0===r?void 0:r.get("element"),o=null==i?void 0:i.geometry;if(o&&"interval"===o.type){var a,s=function(t){var e=[],n=Math.max(Math.floor(t.length/500),1);return bs(t,(function(t,r){r%n==0?e.push(t):t.set("visible",!1)})),e}(e),l=o.getXYFields()[0],u=[],c=[],d=Xs(s,(function(t){return t.get("data")[l]})),h=Gs(zl(s,(function(t){return t.get("data")[l]})));s.forEach((function(t){t.set("visible",!0)}));var f=function(t){t&&(t.length&&c.push(t.pop()),c.push.apply(c,t))};for(Ql(h)>0&&(a=h.shift(),f(d[a])),Ql(h)>0&&(a=h.pop(),f(d[a])),bs(h.reverse(),(function(t){f(d[t])}));c.length>0;){var p=c.shift();p.get("visible")&&(Cst(p,u)?p.set("visible",!1):u.push(p))}}}})),sst("point-adjust-position",(function(t,e,n,r,i){var o,a;if(0!==n.length){var s=null===(o=n[0])||void 0===o?void 0:o.get("element"),l=null==s?void 0:s.geometry;if(l&&"point"===l.type){var u=l.getXYFields(),c=u[0],d=u[1],h=Xs(e,(function(t){return t.get("data")[c]})),f=[],p=i&&i.offset||(null===(a=t[0])||void 0===a?void 0:a.offset)||12;zl(xs(h).reverse(),(function(t){for(var e=function(t,e){var n=t.getXYFields()[1],r=[],i=e.sort((function(t,e){return t.get("data")[n]-t.get("data")[n]}));return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,i),r}(l,h[t]);e.length;){var n=e.shift(),r=xst(n);if(Zlt(f,n,(function(t,e){return t.get("data")[c]===e.get("data")[c]&&t.get("data")[d]===e.get("data")[d]})))r.set("visible",!1);else{var i=!1;Qlt(f,n)&&(r.attr("y",r.attr("y")+2*p),i=Qlt(f,n)),i?r.set("visible",!1):f.push(n)}}}))}}})),sst("pie-spider",(function(t,e,n,r){var i=e[0]&&e[0].get("coordinate");if(i){for(var o=i.getCenter(),a=i.getRadius(),s={},l=0,u=e;l<u.length;l++){var c=u[l];s[c.get("id")]=c}var d=Ul(t[0],"labelHeight",14),h=Math.max(Ul(t[0],"offset",0),4);bs(t,(function(t){if(Ul(s,[t.id])){var e=t.x>o.x||t.x===o.x&&t.y>o.y,n=vs(t.offsetX)?4:t.offsetX,r=$it(o.x,o.y,a+4,t.angle),i=h+n;t.x=o.x+(e?1:-1)*(a+i),t.y=r.y}}));var f=i.start,p=i.end,g="right",v=Xs(t,(function(t){return t.x<o.x?"left":g})),m=2*(a+h)+d;bs(v,(function(t){var e=t.length*d;e>m&&(m=Math.min(e,Math.abs(f.y-p.y)))}));var y={minX:f.x,maxX:p.x,minY:o.y-m/2,maxY:o.y+m/2};bs(v,(function(t,e){var n=m/d;t.length>n&&(t.sort((function(t,e){return e.percent-t.percent})),bs(t,(function(t,e){e>n&&(s[t.id].set("visible",!1),t.invisible=!0)}))),Nlt(t,d,y)}));var b=y.minY,x=y.maxY;bs(v,(function(t,e){var n=e===g;bs(t,(function(t){var e=Ul(s,t&&[t.id]);if(e)if(t.y<b||t.y>x)e.set("visible",!1);else{var r=e.getChildByIndex(0),o=r.getCanvasBBox(),a=n?o.x:o.maxX,l=o.y+o.height/2;yst(r,t.x-a,t.y-l),t.labelLine&&function(t,e,n){var r,i=e.getCenter(),o=e.getRadius(),a={x:t.x-(n?4:-4),y:t.y},s=$it(i.x,i.y,o+4,t.angle),l={x:a.x,y:a.y},u={x:s.x,y:s.y},c=$it(i.x,i.y,o,t.angle);if(a.y!==s.y){var d=n?4:-4;l.y=a.y,t.angle<0&&t.angle>=-Math.PI/2&&(l.x=Math.max(s.x,a.x-d),a.y<s.y?u.y=l.y:(u.y=s.y,u.x=Math.max(u.x,l.x-d))),t.angle>0&&t.angle<Math.PI/2&&(l.x=Math.max(s.x,a.x-d),a.y>s.y?u.y=l.y:(u.y=s.y,u.x=Math.max(u.x,l.x-d))),t.angle>Math.PI/2&&(l.x=Math.min(s.x,a.x-d),a.y>s.y?u.y=l.y:(u.y=s.y,u.x=Math.min(u.x,l.x-d))),t.angle<-Math.PI/2&&(l.x=Math.min(s.x,a.x-d),a.y<s.y?u.y=l.y:(u.y=s.y,u.x=Math.min(u.x,l.x-d)))}r=["M "+a.x+","+a.y,"L "+l.x+","+l.y,"L "+u.x+","+u.y,"L "+s.x+","+s.y,"L "+c.x+","+c.y].join(" "),t.labelLine=Rl({},t.labelLine,{path:r})}(t,i,n)}}))}))}})),sst("path-adjust-position",(function(t,e,n,r,i){var o,a;if(0!==n.length){var s=null===(o=n[0])||void 0===o?void 0:o.get("element"),l=null==s?void 0:s.geometry;if(l&&!(["path","line","area"].indexOf(l.type)<0)){var u=l.getXYFields(),c=u[0],d=u[1],h=Xs(e,(function(t){return t.get("data")[c]})),f=[],p=i&&i.offset||(null===(a=t[0])||void 0===a?void 0:a.offset)||12;zl(xs(h).reverse(),(function(t){for(var e=function(t,e){var n=t.getXYFields()[1],r=[],i=e.sort((function(t,e){return t.get("data")[n]-t.get("data")[n]}));return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,i),r}(l,h[t]);e.length;){var n=e.shift(),r=xst(n);if(Jlt(f,n,(function(t,e){return t.get("data")[c]===e.get("data")[c]&&t.get("data")[d]===e.get("data")[d]})))r.set("visible",!1);else{var i=!1;tut(f,n)&&(r.attr("y",r.attr("y")+2*p),i=tut(f,n)),i?r.set("visible",!1):f.push(n)}}}))}}})),Zat("fade-in",(function(t,e,n){var r={fillOpacity:vs(t.attr("fillOpacity"))?1:t.attr("fillOpacity"),strokeOpacity:vs(t.attr("strokeOpacity"))?1:t.attr("strokeOpacity"),opacity:vs(t.attr("opacity"))?1:t.attr("opacity")};t.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),t.animate(r,e)})),Zat("fade-out",(function(t,e,n){var r=e.easing,i=e.duration,o=e.delay;t.animate({fillOpacity:0,strokeOpacity:0,opacity:0},i,r,(function(){t.remove(!0)}),o)})),Zat("grow-in-x",(function(t,e,n){nut(t,e,n.coordinate,n.minYPoint,"x")})),Zat("grow-in-xy",(function(t,e,n){nut(t,e,n.coordinate,n.minYPoint,"xy")})),Zat("grow-in-y",(function(t,e,n){nut(t,e,n.coordinate,n.minYPoint,"y")})),Zat("scale-in-x",(function(t,e,n){var r=t.getBBox(),i=t.get("origin").mappingData.points,o=i[0].y-i[1].y>0?r.maxX:r.minX,a=(r.minY+r.maxY)/2;t.applyToMatrix([o,a,1]);var s=yc(t.getMatrix(),[["t",-o,-a],["s",.01,1],["t",o,a]]);t.setMatrix(s),t.animate({matrix:yc(t.getMatrix(),[["t",-o,-a],["s",100,1],["t",o,a]])},e)})),Zat("scale-in-y",(function(t,e,n){var r=t.getBBox(),i=t.get("origin").mappingData,o=(r.minX+r.maxX)/2,a=i.points,s=a[0].y-a[1].y<=0?r.maxY:r.minY;t.applyToMatrix([o,s,1]);var l=yc(t.getMatrix(),[["t",-o,-s],["s",1,.01],["t",o,s]]);t.setMatrix(l),t.animate({matrix:yc(t.getMatrix(),[["t",-o,-s],["s",1,100],["t",o,s]])},e)})),Zat("wave-in",(function(t,e,n){var r=not(n.coordinate,20),i=r.type,o=r.startState,a=r.endState,s=t.setClip({type:i,attrs:o});s.animate(a,Za(Za({},e),{callback:function(){t&&!t.get("destroyed")&&t.set("clipShape",null),s.remove(!0)}}))})),Zat("zoom-in",(function(t,e,n){aut(t,e,"zoomIn")})),Zat("zoom-out",(function(t,e,n){aut(t,e,"zoomOut")})),Zat("position-update",(function(t,e,n){var r=n.toAttrs,i=r.x,o=r.y;delete r.x,delete r.y,t.attr(r),t.animate({x:i,y:o},e)})),Zat("sector-path-update",(function(t,e,n){var r=n.toAttrs,i=n.coordinate,o=r.path||[],a=o.map((function(t){return t[0]}));if(!(o.length<1)){var s=out(o),l=s.startAngle,u=s.endAngle,c=s.radius,d=s.innerRadius,h=out(t.attr("path")),f=h.startAngle,p=h.endAngle,g=i.getCenter(),v=l-f,m=u-p;0!==v||0!==m?t.animate((function(t){var e=f+t*v,n=p+t*m;return Za(Za({},r),{path:Nl(a,["M","A","A","Z"])?Wit(g.x,g.y,c,e,n):Vit(g.x,g.y,c,e,n,d)})}),Za(Za({},e),{callback:function(){t.attr("path",o)}})):t.attr("path",o)}})),Zat("path-in",(function(t,e,n){var r=t.getTotalLength();t.attr("lineDash",[r]),t.animate((function(t){return{lineDashOffset:(1-t)*r}}),e)})),yot("rect",fut),yot("mirror",hut),yot("list",cut),yot("matrix",dut),yot("circle",uut),yot("tree",put),Bat("axis",Eut),Bat("legend",Tut),Bat("tooltip",Xat),Bat("annotation",yut),Bat("slider",Put),Bat("scrollbar",Iut),Cot("tooltip",Lut),Cot("sibling-tooltip",But),Cot("ellipsis-text",Fut),Cot("element-active",Gut),Cot("element-single-active",Hut),Cot("element-range-active",Vut),Cot("element-highlight",Jut),Cot("element-highlight-by-x",ect),Cot("element-highlight-by-color",tct),Cot("element-single-highlight",rct),Cot("element-range-highlight",nct),Cot("element-sibling-highlight",nct,{effectSiblings:!0,effectByRecord:!0}),Cot("element-selected",oct),Cot("element-single-selected",act),Cot("element-range-selected",ict),Cot("element-link-by-color",Uut),Cot("active-region",Rut),Cot("list-active",lct),Cot("list-selected",cct),Cot("list-highlight",uct),Cot("list-unchecked",dct),Cot("list-checked",hct),Cot("legend-item-highlight",uct,{componentNames:["legend"]}),Cot("axis-label-highlight",uct,{componentNames:["axis"]}),Cot("rect-mask",gct),Cot("x-rect-mask",yct,{dim:"x"}),Cot("y-rect-mask",yct,{dim:"y"}),Cot("circle-mask",pct),Cot("path-mask",bct),Cot("smooth-path-mask",xct),Cot("cursor",wct),Cot("data-filter",Cct),Cot("brush",_ct),Cot("brush-x",_ct,{dims:["x"]}),Cot("brush-y",_ct,{dims:["y"]}),Cot("sibling-filter",Tct),Cot("sibling-x-filter",Tct),Cot("sibling-y-filter",Tct),Cot("element-filter",Pct),Cot("element-sibling-filter",Ict),Cot("element-sibling-filter-record",Ict,{byRecord:!0}),Cot("view-drag",Oct),Cot("view-move",Rct),Cot("scale-translate",Bct),Cot("scale-zoom",Fct),Cot("reset-button",Dct,{name:"reset-button",text:"reset"}),lat("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),lat("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),lat("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),lat("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),lat("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),lat("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),lat("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),lat("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),lat("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),lat("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),lat("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),lat("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(t){return!t.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(t){return!t.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),lat("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Nct,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:Nct,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Nct,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),lat("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),lat("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Nct,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:Nct,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Nct,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),lat("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Nct,action:"path-mask:start"},{trigger:"mousedown",isEnable:Nct,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),lat("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),lat("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter"]}]}),lat("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),lat("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),lat("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","element-filter:filter"]}]}),lat("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]}),lat("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(t){return zct(t.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(t){return!zct(t.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),lat("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]}),(Act=Mct||(Mct={})).ERROR="error",Act.WARN="warn",Act.INFO="log";function $ct(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=0;return"AntV/G2Plot: "+t.replace(/%s/g,(function(){return""+e[r++]}))}function Vct(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e||console[t]($ct.apply(void 0,is([n],r)))}function Wct(t){if(!t)return{width:0,height:0};var e=getComputedStyle(t);return{width:(t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10),height:(t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)}}function Hct(t,e){return t.geometries.find((function(t){return t.type===e}))}function Yct(t){return Fs(t.geometries,(function(t,e){return t.concat(e.elements)}),[])}function Xct(t){return Ul(t,["views","length"],0)<=0?Yct(t):Fs(t.views,(function(t,e){return t.concat(Xct(e))}),Yct(t))}function qct(t,e){return t.views.find((function(t){return t.id===e}))}function Kct(t){var e=t.parent;return e?e.views:[]}function Zct(t){return Kct(t).filter((function(e){return e!==t}))}function Qct(t){if(!ps(t,"Object"))return t;var e=Za({},t);return e.formatter&&!e.content&&(e.content=e.formatter),e}function Jct(t,e,n){for(var r=!!e,i=[],o=0,a=t.length;o<a;o+=2)i.push([t[o],t[o+1]]);var s,l,u,c=function(t,e,n,r){var i,o,a,s,l=[],u=!!r;if(u){a=[1/0,1/0],s=[-1/0,-1/0];for(var c=0,d=t.length;c<d;c++)a=oc([0,0],a,f=t[c]),s=ac([0,0],s,f);a=oc([0,0],a,r[0]),s=ac([0,0],s,r[1])}c=0;for(var h=t.length;c<h;c++){var f=t[c];if(n)i=t[c?c-1:h-1],o=t[(c+1)%h];else{if(0===c||c===h-1){l.push(f);continue}i=t[c-1],o=t[c+1]}var p=[0,0];p=sc(p=pc(p,o,i),p,e);var g=lc(f,i),v=lc(f,o),m=g+v;0!==m&&(g/=m,v/=m);var y=sc([0,0],p,-g),b=sc([0,0],p,v),x=rc([0,0],f,y),w=rc([0,0],f,b);u&&(x=oc([0,0],x=ac([0,0],x,a),s),w=oc([0,0],w=ac([0,0],w,a),s)),l.push(x),l.push(w)}return n&&l.push(l.shift()),l}(i,.4,r,n),d=i.length,h=[];for(o=0;o<d-1;o++)s=c[2*o],l=c[2*o+1],u=i[o+1],h.push(["C",s[0],s[1],l[0],l[1],u[0],u[1]]);return r&&(s=c[d],l=c[d+1],u=i[0],h.push(["C",s[0],s[1],l[0],l[1],u[0],u[1]])),h}var tdt={}.toString,edt=function(t,e){return tdt.call(t)==="[object "+e+"]"},ndt=function(t){return edt(t,"Array")},rdt=function(t){if(!function(t){return"object"==typeof t&&null!==t}(t)||!edt(t,"Object"))return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},idt=function(t,e,n,r){for(var i in n=n||0,r=r||5,e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=e[i];o?rdt(o)?(rdt(t[i])||(t[i]={}),n<r?idt(t[i],o,n+1,r):t[i]=e[i]):ndt(o)?(t[i]=[],t[i]=t[i].concat(o)):t[i]=o:t[i]=o}},odt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)idt(t,e[r]);return t};function adt(t){return t?t.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g).map((function(t){return t.toLowerCase()})).join("-"):t}function sdt(t){var e={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},n=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];Ul(t,"fill")&&(e.color=t.fill);var r=Gct(t,n),i=r.shadowColor,o=r.shadowBlur,a=void 0===o?0:o,s=r.shadowOffsetX,l=void 0===s?0:s,u=r.shadowOffsetY,c=void 0===u?0:u;e["text-shadow"]=""+[i,l+"px",c+"px",a+"px"].join(" ");var d=Gct(t,n),h=d.stroke,f=d.lineWidth,p=void 0===f?0:f;return e["-webkit-text-stroke"]=""+[p+"px",h].join(" "),bs(t,(function(t,r){["fontSize"].includes(r)&&el(t)?e[adt(r)]=t+"px":r&&!n.includes(r)&&(e[adt(r)]=""+t)})),e}function ldt(t,e){t.style["pointer-events"]="none",bs(e,(function(e,n){n&&e&&(t.style[n]=e)}))}var udt,cdt=function(t,e,n){var r=e.statistic,i=e.plotType,o=r.title,a=r.content;[o,a].forEach((function(e,r){if(e){var s="";s=0===r?a?"translate(-50%, -100%)":"translate(-50%, -50%)":o?"translate(-50%, 0)":"translate(-50%, -50%)";var l=gs(e.style)?e.style(n):e.style;t.annotation().html(Za({position:["50%","50%"],html:function(t,r){var o=r.getCoordinate(),a=0;if("pie"===i||"ring-progress"===i)a=o.getRadius()*o.innerRadius*2;else if("liquid"===i){var u=Ul(r.geometries,[0,"elements",0,"shape"]);if(u)a=u.find((function(t){return"wrap"===t.get("name")})).getCanvasBBox().width}else a||(a=o.getWidth());ldt(t,Za({width:a+"px",transform:s},sdt(l)));var c=r.getData();if(e.customHtml)return e.customHtml(t,r,n,c);var d=e.content;return e.formatter&&(d=e.formatter(n,c)),d?zs(d)?d:""+d:"<div></div>"},key:(0===r?"top":"bottom")+"-statistic"},Gct(e,["offsetX","offsetY","rotate","style","formatter"])))}}))};function ddt(t){return"number"==typeof t&&!isNaN(t)}function hdt(t,e){var n=t.filter((function(t){var n=Ul(t,[e]);return el(n)&&!isNaN(n)})),r=n.every((function(t){return Ul(t,[e])>=0})),i=n.every((function(t){return Ul(t,[e])<=0}));return r?{min:0}:i?{max:0}:{}}function fdt(t,e,n,r,i){if(void 0===i&&(i=[]),!Array.isArray(t))return{nodes:[],links:[]};var o=[],a={},s=-1;return t.forEach((function(t){var l=t[e],u=t[n],c=t[r],d=Gct(t,i);a[l]||(a[l]=Za({id:++s,name:l},d)),a[u]||(a[u]=Za({id:++s,name:u},d)),o.push(Za({source:a[l].id,target:a[u].id,value:c},d))})),{nodes:Object.values(a),links:o}}function pdt(t,e){var n=ds(t,(function(t){var n=t[e];return null===n||"number"==typeof n&&!isNaN(n)}));return Vct(Mct.WARN,n.length===t.length,"illegal data existed in chart data."),n}function gdt(t){if(el(t))return[t,t,t,t];if(ms(t)){var e=t.length;if(1===e)return[t[0],t[0],t[0],t[0]];if(2===e)return[t[0],t[1],t[0],t[1]];if(3===e)return[t[0],t[1],t[2],t[1]];if(4===e)return t}return[0,0,0,0]}function vdt(t,e,n){void 0===e&&(e="bottom"),void 0===n&&(n=25);var r=gdt(t),i=[e.startsWith("top")?n:0,e.startsWith("right")?n:0,e.startsWith("bottom")?n:0,e.startsWith("left")?n:0];return[r[0]+i[0],r[1]+i[1],r[2]+i[2],r[3]+i[3]]}Dl((function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=void 0===r?"sans-serif":r,o=e.fontWeight,a=e.fontStyle,s=e.fontVariant,l=(udt||(udt=document.createElement("canvas").getContext("2d")),udt);return l.font=[a,o,s,n+"px",i].join(" "),l.measureText(zs(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),is([t],hl(e)).join("")}));var mdt="en-US",ydt={};function bdt(t,e){ydt[t]=e}function xdt(t){return{get:function(e,n){return Uct(Ul(ydt[t],e)||Ul(ydt[mdt],e)||Ul(ydt["en-US"],e)||e,n)}}}var wdt=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=1;e.default=function(){return"".concat(n++)}}));Xm(wdt);var Cdt=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n=null;return function(){for(var r=this,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];clearTimeout(n),n=setTimeout((function(){t.apply(r,o)}),e)}}}));Xm(Cdt);var Sdt=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.SensorTabIndex=e.SensorClassName=e.SizeSensorId=void 0;e.SizeSensorId="size-sensor-id";e.SensorClassName="size-sensor-object";e.SensorTabIndex="-1"}));Xm(Sdt),Sdt.SensorTabIndex,Sdt.SensorClassName,Sdt.SizeSensorId;var kdt=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.createSensor=void 0;var n,r=(n=Cdt)&&n.__esModule?n:{default:n};e.createSensor=function(t){var e=void 0,n=[],i=(0,r.default)((function(){n.forEach((function(e){e(t)}))})),o=function(){e&&e.parentNode&&(e.contentDocument&&e.contentDocument.defaultView.removeEventListener("resize",i),e.parentNode.removeChild(e),e=void 0,n=[])};return{element:t,bind:function(r){e||(e=function(){"static"===getComputedStyle(t).position&&(t.style.position="relative");var e=document.createElement("object");return e.onload=function(){e.contentDocument.defaultView.addEventListener("resize",i),i()},e.style.display="block",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.height="100%",e.style.width="100%",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.zIndex="-1",e.style.opacity="0",e.setAttribute("class",Sdt.SensorClassName),e.setAttribute("tabindex",Sdt.SensorTabIndex),e.type="text/html",t.appendChild(e),e.data="about:blank",e}()),-1===n.indexOf(r)&&n.push(r)},destroy:o,unbind:function(t){var r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&e&&o()}}}}));Xm(kdt),kdt.createSensor;var Edt=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.createSensor=void 0;var n,r=(n=Cdt)&&n.__esModule?n:{default:n};e.createSensor=function(t){var e=void 0,n=[],i=(0,r.default)((function(){n.forEach((function(e){e(t)}))})),o=function(){e.disconnect(),n=[],e=void 0};return{element:t,bind:function(r){var o;e||((o=new ResizeObserver(i)).observe(t),i(),e=o),-1===n.indexOf(r)&&n.push(r)},destroy:o,unbind:function(t){var r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&e&&o()}}}}));Xm(Edt),Edt.createSensor;var Mdt=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.createSensor=void 0;var n="undefined"!=typeof ResizeObserver?Edt.createSensor:kdt.createSensor;e.createSensor=n}));Xm(Mdt),Mdt.createSensor;var Adt=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.removeSensor=e.getSensor=void 0;var n,r=(n=wdt)&&n.__esModule?n:{default:n};var i={};e.getSensor=function(t){var e=t.getAttribute(Sdt.SizeSensorId);if(e&&i[e])return i[e];var n=(0,r.default)();t.setAttribute(Sdt.SizeSensorId,n);var o=(0,Mdt.createSensor)(t);return i[n]=o,o};e.removeSensor=function(t){var e=t.element.getAttribute(Sdt.SizeSensorId);t.element.removeAttribute(Sdt.SizeSensorId),t.destroy(),e&&i[e]&&delete i[e]}}));Xm(Adt),Adt.removeSensor,Adt.getSensor;var _dt=qm((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ver=e.clear=e.bind=void 0;e.bind=function(t,e){var n=(0,Adt.getSensor)(t);return n.bind(e),function(){n.unbind(e)}};e.clear=function(t){var e=(0,Adt.getSensor)(t);(0,Adt.removeSensor)(e)};e.ver="1.0.1"}));Xm(_dt),_dt.ver,_dt.clear;var Tdt=_dt.bind,Pdt=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],Idt=function(t){function e(e,n){var r=t.call(this)||this;return r.container="string"==typeof e?document.getElementById(e):e,r.options=odt({},r.getDefaultOptions(),n),r.createG2(),r.bindEvents(),r}return Ka(e,t),e.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},e.prototype.createG2=function(){var t=this.options,e=t.width,n=t.height;this.chart=new Hat(Za(Za(Za({container:this.container,autoFit:!1},this.getChartSize(e,n)),{localRefresh:!1}),Gct(this.options,Pdt))),this.container.setAttribute("data-chart-source-type","G2Plot")},e.prototype.getChartSize=function(t,e){var n=Wct(this.container);return{width:t||n.width||400,height:e||n.height||400}},e.prototype.bindEvents=function(){var t=this;this.chart&&this.chart.on("*",(function(e){(null==e?void 0:e.type)&&t.emit(e.type,e)}))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},e.prototype.update=function(t){this.updateOption(t),this.render()},e.prototype.updateOption=function(t){this.options=odt({},this.options,t)},e.prototype.setState=function(t,e,n){void 0===n&&(n=!0),bs(Xct(this.chart),(function(r){e(r.getData())&&r.setState(t,n)}))},e.prototype.getStates=function(){var t=Xct(this.chart),e=[];return bs(t,(function(t){var n=t.getData();bs(t.getStates(),(function(r){e.push({data:n,state:r,geometry:t.geometry,element:t})}))})),e},e.prototype.changeData=function(t){this.update({data:t})},e.prototype.changeSize=function(t,e){this.chart.changeSize(t,e)},e.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute("data-chart-source-type")},e.prototype.execAdaptor=function(){var t=this.getSchemaAdaptor(),e=this.options,n=e.padding,r=e.appendPadding;this.chart.padding=n,this.chart.appendPadding=r,t({chart:this.chart,options:this.options})},e.prototype.triggerResize=function(){this.chart.forceFit()},e.prototype.bindSizeSensor=function(){var t=this;if(!this.unbind){var e=this.options.autoFit;(void 0===e||e)&&(this.unbind=Tdt(this.container,(function(){var e=Wct(t.container),n=e.width,r=e.height;n===t.chart.width&&r===t.chart.height||t.triggerResize()})))}},e.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},e}(ru),Ddt=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"];function Odt(){return"object"==typeof window?null===window||void 0===window?void 0:window.devicePixelRatio:2}function Rdt(t,e){void 0===e&&(e=t);var n=document.createElement("canvas"),r=Odt();return n.width=t*r,n.height=e*r,n.style.width=t+"px",n.style.height=e+"px",n.getContext("2d").scale(r,r),n}function Ldt(t,e,n,r){void 0===r&&(r=n);var i=e.backgroundColor,o=e.opacity;t.globalAlpha=o,t.fillStyle=i,t.beginPath(),t.fillRect(0,0,n,r),t.closePath()}function Bdt(t,e,n){var r=t+e;return n?2*r:r}function Fdt(t,e){return e?[[t*(1/4),t*(1/4)],[t*(3/4),t*(3/4)]]:[[.5*t,.5*t]]}function Ndt(t,e){var n=e*Math.PI/180;return{a:Math.cos(n)*(1/t),b:Math.sin(n)*(1/t),c:-Math.sin(n)*(1/t),d:Math.cos(n)*(1/t),e:0,f:0}}var zdt={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function jdt(t,e,n,r){var i=e.size,o=e.fill,a=e.lineWidth,s=e.stroke,l=e.fillOpacity;t.beginPath(),t.globalAlpha=l,t.fillStyle=o,t.strokeStyle=s,t.lineWidth=a,t.arc(n,r,i/2,0,2*Math.PI,!1),t.fill(),a&&t.stroke(),t.closePath()}var Gdt={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function Udt(t){var e=odt({},Gdt,t),n=e.spacing,r=e.rotation,i=e.lineWidth,o=n+i||1,a=n+i||1,s="\n            M 0 0 L "+o+" 0\n            M 0 "+a+" L "+o+" "+a+"\n            ",l=Rdt(o,a),u=l.getContext("2d");Ldt(u,e,o,a),function(t,e,n){var r=e.stroke,i=e.lineWidth,o=e.strokeOpacity,a=new Path2D(n);t.globalAlpha=o,t.lineCap="square",t.strokeStyle=i?r:"transparent",t.lineWidth=i,t.stroke(a)}(u,e,s);var c=u.createPattern(l,"repeat");if(c){var d=Ndt(Odt(),r);c.setTransform(d)}return c}var $dt={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function Vdt(t,e,n,r){var i=e.stroke,o=e.size,a=e.fill,s=e.lineWidth,l=e.fillOpacity;t.globalAlpha=l,t.strokeStyle=i,t.lineWidth=s,t.fillStyle=a,t.strokeRect(n-o/2,r-o/2,o,o),t.fillRect(n-o/2,r-o/2,o,o)}function Wdt(t){var e,n=t.type,r=t.cfg;switch(n){case"dot":e=function(t){var e=odt({},zdt,t),n=e.size,r=e.padding,i=e.isStagger,o=e.rotation,a=Bdt(n,r,i),s=Fdt(a,i),l=Rdt(a,a),u=l.getContext("2d");Ldt(u,e,a);for(var c=0,d=s;c<d.length;c++){var h=d[c];jdt(u,e,h[0],h[1])}var f=u.createPattern(l,"repeat");if(f){var p=Ndt(Odt(),o);f.setTransform(p)}return f}(r);break;case"line":e=Udt(r);break;case"square":e=function(t){var e=odt({},$dt,t),n=e.size,r=e.padding,i=e.isStagger,o=e.rotation,a=Bdt(n,r,i),s=Fdt(a,i),l=Rdt(a,a),u=l.getContext("2d");Ldt(u,e,a);for(var c=0,d=s;c<d.length;c++){var h=d[c];Vdt(u,e,h[0],h[1])}var f=u.createPattern(l,"repeat");if(f){var p=Ndt(Odt(),o);f.setTransform(p)}return f}(r)}return e}function Hdt(t){var e=this;return function(n){var r,i=n.options,o=n.chart,a=i.pattern;if(!a)return n;return odt({},n,{options:(r={},r[t]=function(n){for(var r,s,l,u=[],c=1;c<arguments.length;c++)u[c-1]=arguments[c];var d=o.getTheme().defaultColor,h=d,f=null===(s=null===(r=o.geometries)||void 0===r?void 0:r[0])||void 0===s?void 0:s.getAttribute("color");if(f){var p=f.getFields()[0],g=Ul(n,p);h=Rst.getMappingValue(f,g,(null===(l=f.values)||void 0===l?void 0:l[0])||d)}var v=a;"function"==typeof a&&(v=a.call(e,n,h)),v instanceof CanvasPattern==!1&&(v=Wdt(odt({},{cfg:{backgroundColor:h}},v)));var m=i[t];return Za(Za({},"function"==typeof m?m.call.apply(m,is([e,n],u)):m||{}),{fill:v||h})},r)})}}function Ydt(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,o=n.seriesField;return!1===r?e.legend(!1):(i||o)&&e.legend(i||o,r),t}function Xdt(t){var e=t.chart,n=t.options.tooltip;return void 0!==n&&e.tooltip(n),t}function qdt(t){var e=t.chart;return bs(t.options.interactions,(function(t){!1===t.enable?e.removeInteraction(t.type):e.interaction(t.type,t.cfg||{})})),t}function Kdt(t){var e=t.chart,n=t.options.animation;return"boolean"==typeof n?e.animate(n):e.animate(!0),bs(e.geometries,(function(t){t.animate(n)})),t}function Zdt(t){var e=t.chart,n=t.options.theme;return n&&e.theme(n),t}function Qdt(t){var e=t.chart,n=t.options.state;return n&&bs(e.geometries,(function(t){t.state(n)})),t}function Jdt(t){var e=t.chart,n=t.options.slider;return e.option("slider",n),t}function tht(t){var e=t.chart,n=t.options.scrollbar;return e.option("scrollbar",n),t}function eht(t,e){return function(n){var r=n.chart,i=n.options,o={};return bs(t,(function(t,e){o[e]=Gct(t,Ddt)})),o=odt({},e,i.meta,o),r.scale(o),n}}function nht(t){return function(e){var n=e.chart,r=e.options,i=n.getController("annotation");return bs(is(r.annotations||[],t||[]),(function(t){i.annotation(t)})),e}}function rht(t){var e=t.chart,n=t.options,r=n.yAxis,i=n.limitInPlot,o=i;return ys(r)&&vs(i)&&(o=!!Object.values(Gct(r,["min","max","minLimit","maxLimit"])).some((function(t){return!vs(t)}))),e.limitInPlot=o,t}function iht(t,e){if(!1===t)return{fields:!1};var n=Ul(t,"fields"),r=Ul(t,"formatter");return r&&!n&&(n=e),{fields:n,formatter:r}}function oht(t,e){var n=t.type,r=t.xField,i=t.yField,o=t.colorField,a=t.shapeField,s=t.sizeField,l=t.styleField,u=t.rawFields,c=void 0===u?[]:u,d=[];if("color"===e)d=is([o||r],c);else if("shape"===e)d=is([a||r],c);else if("size"===e)d=is([s||r],c);else{d=is([r,i,o,a,s,l],c);var h=["x","y","color","shape","size","style"].indexOf(e),f=d[h];d.splice(h,1),d.unshift(f)}var p=Gs(d.filter((function(t){return!!t}))),g="line"===n&&[r,i].includes(p.join("*"))?"":p.join("*");return{mappingFields:p,tileMappingField:g}}function aht(t,e){if(e)return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i={};return t.forEach((function(t,e){i[t]=n[e]})),delete i[void 0],e(i)}}function sht(t){var e=t.chart,n=t.options,r=n.type,i=n.args,o=n.mapping,a=n.xField,s=n.yField,l=n.colorField,u=n.shapeField,c=n.sizeField,d=n.tooltipFields,h=n.label,f=n.state;if(!o)return t;var p=o.color,g=o.shape,v=o.size,m=o.style,y=o.tooltip,b=e[r](i).position(a+"*"+s);if(zs(p))l?b.color(l,p):b.color(p);else if(gs(p)){var x=oht(n,"color"),w=x.mappingFields,C=x.tileMappingField;b.color(C,aht(w,p))}else l&&b.color(l,p);if(zs(g))u?b.shape(u,[g]):b.shape(g);else if(gs(g)){var S=oht(n,"shape");w=S.mappingFields,C=S.tileMappingField;b.shape(C,aht(w,g))}else u&&b.shape(u,g);if(el(v))c?b.size(c,v):b.size(v);else if(gs(v)){var k=oht(n,"size");w=k.mappingFields,C=k.tileMappingField;b.size(C,aht(w,v))}else c&&b.size(c,v);if(gs(m)){var E=oht(n,"style");w=E.mappingFields,C=E.tileMappingField;b.style(C,aht(w,m))}else ys(m)&&b.style(m);if(!1===d?b.tooltip(!1):Fl(d)||b.tooltip(d.join("*"),aht(d,y)),!1===h)b.label(!1);else if(h){var M=h.callback,A=h.fields,_=Qa(h,["callback","fields"]);b.label({fields:A||[s],callback:M,cfg:Qct(_)})}return f&&b.state(f),[a,s].filter((function(t){return t!==l})).forEach((function(t){e.legend(t,!1)})),Za(Za({},t),{ext:{geometry:b}})}function lht(t){var e=t.options,n=e.area,r=e.xField,i=e.yField,o=e.seriesField,a=e.smooth,s=iht(e.tooltip,[r,i,o]),l=s.fields,u=s.formatter;return n?sht(odt({},t,{options:{type:"area",colorField:o,tooltipFields:l,mapping:Za({shape:a?"smooth":"area",tooltip:u},n)}})):t}function uht(t){var e=t.options,n=e.line,r=e.stepType,i=e.xField,o=e.yField,a=e.seriesField,s=e.smooth,l=e.connectNulls,u=iht(e.tooltip,[i,o,a]),c=u.fields,d=u.formatter;return n?sht(odt({},t,{options:{type:"line",colorField:a,tooltipFields:c,mapping:Rl({shape:r||(s?"smooth":"line"),tooltip:d},n),args:{connectNulls:l}}})):t}function cht(t){var e=t.options,n=e.point,r=e.xField,i=e.yField,o=e.seriesField,a=e.sizeField,s=e.shapeField,l=iht(e.tooltip,[r,i,o,a,s]),u=l.fields,c=l.formatter;return n?sht(odt({},t,{options:{type:"point",colorField:o,shapeField:s,tooltipFields:u,mapping:Za({tooltip:c},n)}})):t}function dht(t){var e=t.options,n=e.xField,r=e.yField,i=e.interval,o=e.seriesField,a=e.tooltip,s=e.minColumnWidth,l=e.maxColumnWidth,u=e.columnBackground,c=e.dodgePadding,d=e.intervalPadding,h=iht(a,[n,r,o]),f=h.fields,p=h.formatter,g=(i?sht(odt({},t,{options:{type:"interval",colorField:o,tooltipFields:f,mapping:Za({tooltip:p},i),args:{dodgePadding:c,intervalPadding:d,minColumnWidth:s,maxColumnWidth:l,background:u}}})):t).ext;return function(t){var e=t.chart,n=t.options,r=t.ext,i=n.seriesField,o=n.isGroup,a=n.isStack,s=n.marginRatio,l=n.widthRatio,u=n.groupField,c=n.theme,d=[];return i&&(o&&d.push({type:"dodge",dodgeBy:u||i,marginRatio:s}),a&&d.push({type:"stack",marginRatio:s})),d.length&&(null==r?void 0:r.geometry)&&(null==r?void 0:r.geometry).adjust(d),vs(l)||e.theme(odt({},ys(c)?c:kat(c),{columnWidthRatio:l})),t}(Za(Za({},t),{ext:g}))}function hht(t){var e=t.options,n=e.polygon,r=e.xField,i=e.yField,o=e.seriesField,a=iht(e.tooltip,[r,i,o]),s=a.fields,l=a.formatter;return n?sht(odt({},t,{options:{type:"polygon",colorField:o,tooltipFields:s,mapping:Za({tooltip:l},n)}})):t}function fht(t){var e=t.options,n=e.edge,r=e.xField,i=e.yField,o=e.seriesField,a=iht(e.tooltip,[r,i,o]),s=a.fields,l=a.formatter;return n?sht(odt({},t,{options:{type:"edge",colorField:o,tooltipFields:s,mapping:Za({tooltip:l},n)}})):t}function pht(t){var e=t.options,n=e.schema,r=e.xField,i=e.yField,o=e.seriesField,a=iht(e.tooltip,[r,i,o]),s=a.fields,l=a.formatter;return n?sht(odt({},t,{options:{type:"schema",colorField:o,tooltipFields:s,mapping:Za({tooltip:l},n)}})):t}function ght(t){var e=t.chart,n=t.options,r=n.data,i=n.color,o=n.lineStyle,a=n.lineShape,s=n.point,l=n.seriesField,u=null==s?void 0:s.state;e.data(r);var c=odt({},t,{options:{shapeField:l,line:{color:i,style:o,shape:a},point:s&&Za({color:i,shape:"circle"},s),label:void 0}}),d=odt({},c,{options:{tooltip:!1,state:u}});return uht(c),cht(d),t}function vht(t){var e,n,r=t.options,i=r.xAxis,o=r.yAxis,a=r.xField,s=r.yField,l=r.data;return jct(eht(((e={})[a]=i,e[s]=o,e),((n={})[a]={type:"cat"},n[s]=hdt(l,s),n)))(t)}function mht(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return!1===r?e.axis(o,!1):e.axis(o,r),!1===i?e.axis(a,!1):e.axis(a,i),t}function yht(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return r&&i?e.legend(i,r):!1===r&&e.legend(!1),t}function bht(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,o=Hct(e,"line");if(r){var a=r.callback,s=Qa(r,["callback"]);o.label({fields:[i],callback:a,cfg:Za({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Qct(s))})}else o.label(!1);return t}function xht(t){var e=t.chart;return t.options.isStack&&bs(e.geometries,(function(t){t.adjust("stack")})),t}function wht(t){return jct(ght,vht,xht,Zdt,mht,yht,Xdt,bht,Jdt,qdt,Kdt,nht(),rht)(t)}var Cht=odt({},Idt.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left"},isStack:!1});Cot("marker-active",function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.active=function(){var t=this.getView(),e=this.context.event;if(e.data){var n=e.data.items;bs(t.geometries.filter((function(t){return"point"===t.type})),(function(t){bs(t.elements,(function(t){var e=-1!==Es(n,(function(e){return e.data===t.data}));t.setState("active",e)}))}))}},e.prototype.getView=function(){return this.context.view},e}(bot)),lat("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}]});var Sht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="line",e}return Ka(e,t),e.getDefaultOptions=function(){return Cht},e.prototype.changeData=function(t){this.updateOption({data:t});vht({chart:this.chart,options:this.options}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return wht},e}(Idt);function kht(t,e,n,r){var i=Fs(t,(function(t,r){var i=r[n],o=t.has(i)?t.get(i):0,a=r[e];return o=ddt(a)?o+a:o,t.set(i,o),t}),new Map);return zl(t,(function(t){var o,a=t[e],s=t[n],l=ddt(a)?a/i.get(s):0;return Za(Za({},t),((o={})[r]=l,o))}))}function Eht(t,e,n,r,i){return i?kht(t,e,n,r):t}function Mht(t){var e=t.chart,n=t.options,r=n.data,i=n.areaStyle,o=n.color,a=n.point,s=n.line,l=n.isPercent,u=n.xField,c=n.yField,d=n.tooltip,h=n.seriesField,f=n.startOnZero,p=null==a?void 0:a.state,g=Eht(r,c,u,c,l);e.data(g);var v=l?Za({formatter:function(t){return{name:t[h]||t[u],value:(100*Number(t[c])).toFixed(2)+"%"}}},d):d,m=odt({},t,{options:{area:{color:o,style:i},line:s&&Za({color:o},s),point:a&&Za({color:o},a),tooltip:v,label:void 0,args:{startOnZero:f}}}),y=odt({},m,{options:{tooltip:!1}}),b=odt({},m,{options:{tooltip:!1,state:p}});return lht(m),uht(y),cht(b),t}function Aht(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,o=Hct(e,"area");if(r){var a=r.callback,s=Qa(r,["callback"]);o.label({fields:[i],callback:a,cfg:Za({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Qct(s))})}else o.label(!1);return t}function _ht(t){var e=t.chart,n=t.options,r=n.isStack,i=n.isPercent,o=n.seriesField;return(i||r)&&o&&bs(e.geometries,(function(t){t.adjust("stack")})),t}function Tht(t){return jct(Zdt,Hdt("areaStyle"),Mht,vht,_ht,mht,yht,Xdt,Aht,Jdt,nht(),qdt,Kdt,rht)(t)}var Pht=odt({},Idt.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left"}}),Iht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="area",e}return Ka(e,t),e.getDefaultOptions=function(){return Pht},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options,n=e.isPercent,r=e.xField,i=e.yField;vht({chart:this.chart,options:this.options}),this.chart.changeData(Eht(t,i,r,i,n))},e.prototype.getSchemaAdaptor=function(){return Tht},e}(Idt);function Dht(t,e){return el(t)&&el(e)?t===e?"100%":0===t?"∞":0===e?"-∞":(100*e/t).toFixed(2)+"%":"-"}function Oht(t,e){return odt({size:e?32:80,spacing:e?8:12,offset:e?32:0,arrow:!1!==t.arrow&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:!1!==t.text&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:Dht}},t)}function Rht(t,e){return zl(e.getModel().points,(function(e){return t.convertPoint(e)}))}function Lht(t,e,n){!function(t,e,n){var r=t.view,i=t.geometry,o=t.group,a=t.options,s=t.horizontal,l=a.offset,u=a.size,c=a.arrow,d=r.getCoordinate(),h=Rht(d,e)[s?3:0],f=Rht(d,n)[s?0:3],p=f.y-h.y,g=f.x-h.x;if("boolean"!=typeof c){var v,m=c.headSize,y=a.spacing;s?(g-m)/2<y?(y=Math.max(1,(g-m)/2),v=[[h.x+y,h.y-l],[h.x+y,h.y-l-u],[f.x-y,f.y-l-u/2]]):v=[[h.x+y,h.y-l],[h.x+y,h.y-l-u],[f.x-y-m,f.y-l-u],[f.x-y,f.y-l-u/2],[f.x-y-m,f.y-l]]:(p-m)/2<y?(y=Math.max(1,(p-m)/2),v=[[h.x+l,h.y+y],[h.x+l+u,h.y+y],[f.x+l+u/2,f.y-y]]):v=[[h.x+l,h.y+y],[h.x+l+u,h.y+y],[f.x+l+u,f.y-y-m],[f.x+l+u/2,f.y-y],[f.x+l,f.y-y-m]],o.addShape("polygon",{id:r.id+"-conversion-tag-arrow-"+i.getElementId(e.getModel().mappingData),name:"conversion-tag-arrow",origin:{element:e,nextElement:n},attrs:Za(Za({},c.style||{}),{points:v})})}}(t,e,n),function(t,e,n){var r,i,o,a=t.view,s=t.geometry,l=t.group,u=t.options,c=t.field,d=t.horizontal,h=u.offset,f=u.size;if("boolean"!=typeof u.text){var p=a.getCoordinate(),g=(null===(r=u.text)||void 0===r?void 0:r.formatter)&&(null===(i=u.text)||void 0===i?void 0:i.formatter(e.getData()[c],n.getData()[c])),v=Rht(p,e)[d?3:0],m=Rht(p,n)[d?0:3],y=l.addShape("text",{id:a.id+"-conversion-tag-text-"+s.getElementId(e.getModel().mappingData),name:"conversion-tag-text",origin:{element:e,nextElement:n},attrs:Za(Za({},(null===(o=u.text)||void 0===o?void 0:o.style)||{}),{text:g,x:d?(v.x+m.x)/2:v.x+h+f/2,y:d?v.y-h-f/2:(v.y+m.y)/2})});if(d){var b=m.x-v.x,x=y.getBBox().width;if(x>b){var w=x/g.length,C=Math.max(1,Math.ceil(b/w)-1),S=g.slice(0,C)+"...";y.attr("text",S)}}}}(t,e,n)}var Bht={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},Fht=function(t,e){return"hover"===t?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:e}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:e}]}]};lat(Bht.hover,{start:Fht(Bht.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]}),lat(Bht.click,{start:Fht(Bht.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});var Nht={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}};function zht(t){return t.isInPlot()}function jht(t,e,n){var r=e||"rect";switch(t){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:zht,action:["brush:start",r+"-mask:start",r+"-mask:show"],arg:[null,{maskStyle:null==n?void 0:n.style}]}],processing:[{trigger:"mousemove",isEnable:zht,action:[r+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:zht,action:["brush:filter","brush:end",r+"-mask:end",r+"-mask:hide","brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(t){return!t.isInShape("mask")},action:[r+"-mask:start",r+"-mask:show"],arg:[{maskStyle:null==n?void 0:n.style}]},{trigger:"mask:dragstart",action:[r+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[r+"-mask:resize"]},{trigger:"mask:drag",action:[r+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[r+"-mask:end"]},{trigger:"mask:dragend",action:[r+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(t){return!t.isInPlot()},action:["element-range-highlight:clear",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",r+"-mask:hide"]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:zht,action:["brush-x:start",r+"-mask:start",r+"-mask:show"],arg:[null,{maskStyle:null==n?void 0:n.style}]}],processing:[{trigger:"mousemove",isEnable:zht,action:[r+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:zht,action:["brush-x:filter","brush-x:end",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(t){return!t.isInShape("mask")},action:[r+"-mask:start",r+"-mask:show"],arg:[{maskStyle:null==n?void 0:n.style}]},{trigger:"mask:dragstart",action:[r+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[r+"-mask:resize"]},{trigger:"mask:drag",action:[r+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[r+"-mask:end"]},{trigger:"mask:dragend",action:[r+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(t){return!t.isInPlot()},action:["element-range-highlight:clear",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",r+"-mask:hide"]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:zht,action:["brush-y:start",r+"-mask:start",r+"-mask:show"],arg:[null,{maskStyle:null==n?void 0:n.style}]}],processing:[{trigger:"mousemove",isEnable:zht,action:[r+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:zht,action:["brush-y:filter","brush-y:end",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(t){return!t.isInShape("mask")},action:[r+"-mask:start",r+"-mask:show"],arg:[{maskStyle:null==n?void 0:n.style}]},{trigger:"mask:dragstart",action:[r+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[r+"-mask:resize"]},{trigger:"mask:drag",action:[r+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[r+"-mask:end"]},{trigger:"mask:dragend",action:[r+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(t){return!t.isInPlot()},action:["element-range-highlight:clear",r+"-mask:end",r+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",r+"-mask:hide"]}]};default:return{}}}Cot("brush-reset-button",function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buttonGroup=null,e.buttonCfg=Za({name:"button"},Nht),e}return Ka(e,t),e.prototype.getButtonCfg=function(){var t=this.context.view,e=Ul(t,["interactions","filter-action","cfg","buttonConfig"]);return odt(this.buttonCfg,e,this.cfg)},e.prototype.drawButton=function(){var t=this.getButtonCfg(),e=this.context.view.foregroundGroup.addGroup({name:t.name}),n=this.drawText(e);this.drawBackground(e,n.getBBox()),this.buttonGroup=e},e.prototype.drawText=function(t){var e,n=this.getButtonCfg();return t.addShape({type:"text",name:"button-text",attrs:Za({text:n.text},null===(e=n.textStyle)||void 0===e?void 0:e.default)})},e.prototype.drawBackground=function(t,e){var n,r=this.getButtonCfg(),i=gdt(r.padding),o=t.addShape({type:"rect",name:"button-rect",attrs:Za({x:e.x-i[3],y:e.y-i[0],width:e.width+i[1]+i[3],height:e.height+i[0]+i[2]},null===(n=r.buttonStyle)||void 0===n?void 0:n.default)});return o.toBack(),t.on("mouseenter",(function(){var t;o.attr(null===(t=r.buttonStyle)||void 0===t?void 0:t.active)})),t.on("mouseleave",(function(){var t;o.attr(null===(t=r.buttonStyle)||void 0===t?void 0:t.default)})),o},e.prototype.resetPosition=function(){var t=this.context.view.getCoordinate().convert({x:1,y:1}),e=this.buttonGroup,n=e.getBBox(),r=Rst.transform(null,[["t",t.x-n.width-10,t.y+n.height+5]]);e.setMatrix(r)},e.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},e.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},e.prototype.destroy=function(){var e=this.buttonGroup;e&&e.remove(),t.prototype.destroy.call(this)},e}(bot),{name:"brush-reset-button"}),lat("filter-action",{}),lat("brush",jht("brush")),lat("brush-highlight",jht("brush-highlight")),lat("brush-x",jht("brush-x","x-rect")),lat("brush-y",jht("brush-y","y-rect")),lat("brush-x-highlight",jht("brush-x-highlight","x-rect")),lat("brush-y-highlight",jht("brush-y-highlight","y-rect"));var Ght=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function Uht(t){var e=t.options,n=e.brush,r=ds(e.interactions||[],(function(t){return-1===Ght.indexOf(t.type)}));return(null==n?void 0:n.enabled)&&(Ght.forEach((function(t){var e,i=!1;switch(n.type){case"x-rect":i=t===("highlight"===n.action?"brush-x-highlight":"brush-x");break;case"y-rect":i=t===("highlight"===n.action?"brush-y-highlight":"brush-y");break;default:i=t===("highlight"===n.action?"brush-highlight":"brush")}var o={type:t,enable:i};((null===(e=n.mask)||void 0===e?void 0:e.style)||n.type)&&(o.cfg=jht(t,n.type,n.mask)),r.push(o)})),"highlight"!==(null==n?void 0:n.action)&&r.push({type:"filter-action",cfg:{buttonConfig:n.button}})),odt({},t,{options:{interactions:r}})}function $ht(t){var e=t.options,n=e.legend,r=e.seriesField,i=e.isStack;return r?!1!==n&&(n=Za({position:i?"right-top":"top-left"},n)):n=!1,t.options.legend=n,t}function Vht(t){var e=t.chart,n=t.options,r=n.data,i=n.columnStyle,o=n.color,a=n.columnWidthRatio,s=n.isPercent,l=n.isGroup,u=n.isStack,c=n.xField,d=n.yField,h=n.seriesField,f=n.groupField,p=n.tooltip,g=s&&l&&u?function(t,e,n,r){var i=Fs(t,(function(t,r){var i=Fs(n,(function(t,e){return""+t+r[e]}),""),o=t.has(i)?t.get(i):0,a=r[e];return o=ddt(a)?o+a:o,t.set(i,o),t}),new Map);return zl(t,(function(t){var o,a=t[e],s=Fs(n,(function(e,n){return""+e+t[n]}),""),l=ddt(a)?a/i.get(s):0;return Za(Za({},t),((o={})[r]=l,o))}))}(r,d,[c,f],d):Eht(r,d,c,d,s),v=[];u&&h&&!l?g.forEach((function(t){var e=v.find((function(e){return e[c]===t[c]&&e[h]===t[h]}));e?e[d]+=t[d]||0:v.push(Za({},t))})):v=g,e.data(v);var m=s?Za({formatter:function(t){return{name:l&&u?t[h]+" - "+t[f]:t[h]||t[c],value:(100*Number(t[d])).toFixed(2)+"%"}}},p):p,y=odt({},t,{options:{data:v,widthRatio:a,tooltip:m,interval:{style:i,color:o}}});return dht(y),y}function Wht(t){var e,n,r=t.options,i=r.xAxis,o=r.yAxis,a=r.xField,s=r.yField,l=r.data,u=r.isPercent?{max:1,min:0,minLimit:0,maxLimit:1}:{};return jct(eht(((e={})[a]=i,e[s]=o,e),((n={})[a]={type:"cat"},n[s]=Za(Za({},hdt(l,s)),u),n)))(t)}function Hht(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return!1===r?e.axis(o,!1):e.axis(o,r),!1===i?e.axis(a,!1):e.axis(a,i),t}function Yht(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return r&&i?e.legend(i,r):!1===r&&e.legend(!1),t}function Xht(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,o=n.isRange,a=Hct(e,"interval");if(r){var s=r.callback,l=Qa(r,["callback"]);a.label({fields:[i],callback:s,cfg:Za({layout:(null==l?void 0:l.position)?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Qct(o?Za({content:function(t){var e;return null===(e=t[i])||void 0===e?void 0:e.join("-")}},l):l))})}else a.label(!1);return t}function qht(t){var e=t.chart,n=t.options,r=n.tooltip,i=n.isGroup,o=n.isStack,a=n.groupField,s=n.data,l=n.xField,u=n.yField,c=n.seriesField;if(!1===r)e.tooltip(!1);else{var d=r;if(i&&o){var h=(null==d?void 0:d.formatter)||function(t){return{name:t[c]+" - "+t[a],value:t[u]}};d=Za(Za({},d),{customItems:function(t){var e=[];return bs(t,(function(t){ds(s,(function(e){return ws(e,Gct(t.data,[l,c]))})).forEach((function(n){e.push(Za(Za(Za({},t),{value:n[u],data:n,mappingData:{_origin:n}}),h(n)))}))})),e}})}e.tooltip(d)}return t}function Kht(t,e){void 0===e&&(e=!1);var n,r,i,o,a=t.options,s=a.seriesField;return jct($ht,Zdt,Hdt("columnStyle"),Qdt,Vht,Wht,Hht,Yht,qht,Jdt,tht,Xht,Uht,qdt,Kdt,nht(),(r=a.yField,void 0===(i=!e)&&(i=!0),void 0===(o=!!s)&&(o=!1),function(t){var e=t.options,n=t.chart,a=e.conversionTag,s=e.theme;return a&&!o&&(n.theme(odt({},ys(s)?s:kat(s),{columnWidthRatio:1/3})),n.annotation().shape({render:function(t,e){var o=t.addGroup({id:n.id+"-conversion-tag-group",name:"conversion-tag-group"}),s=ks(n.geometries,(function(t){return"interval"===t.type})),l={view:e,geometry:s,group:o,field:r,horizontal:i,options:Oht(a,i)},u=i?s.elements:s.elements.slice().reverse();bs(u,(function(t,e){e>0&&Lht(l,u[e-1],t)}))}})),t}),(void 0===(n=!a.isStack)&&(n=!1),function(t){var e=t.chart,r=t.options.connectedArea,i=function(){e.removeInteraction(Bht.hover),e.removeInteraction(Bht.click)};if(!n&&r){var o=r.trigger||"hover";i(),e.interaction(Bht[o],{start:Fht(o,r.style)})}else i();return t}),rht)(t)}var Zht=odt({},Idt.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]}),Qht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="column",e}return Ka(e,t),e.getDefaultOptions=function(){return Zht},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options,n=e.yField,r=e.xField,i=e.isPercent;Wht({chart:this.chart,options:this.options}),this.chart.changeData(Eht(t,n,r,n,i))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Kht},e}(Idt);function Jht(t){return t?t.slice().reverse():t}function tft(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,o=n.xAxis,a=n.yAxis,s=n.barStyle,l=n.barWidthRatio,u=n.label,c=n.data,d=n.seriesField,h=n.isStack,f=n.minBarWidth,p=n.maxBarWidth;u&&!u.position&&(u.position="left",u.layout||(u.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]));var g=n.legend;d?!1!==g&&(g=Za({position:h?"top-left":"right-top",reversed:!h},g||{})):g=!1,t.options.legend=g;var v=n.tooltip;return d&&!1!==v&&(v=Za({reversed:!h},v||{})),t.options.tooltip=v,e.coordinate().transpose(),Kht({chart:e,options:Za(Za({},n),{label:u,xField:i,yField:r,xAxis:a,yAxis:o,columnStyle:s,columnWidthRatio:l,minColumnWidth:f,maxColumnWidth:p,columnBackground:n.barBackground,data:Jht(c)})},!0)}var eft=odt({},Idt.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]}),nft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="bar",e}return Ka(e,t),e.getDefaultOptions=function(){return eft},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.chart,n=this.options,r=n.xField,i=n.yField,o=n.isPercent;Wht({chart:e,options:Za(Za({},n),{xField:i,yField:r})}),e.changeData(Eht(Jht(t),r,i,r,o))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return tft},e}(Idt),rft=odt({},Idt.getDefaultOptions(),{legend:{position:"right"},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}});function ift(t,e){var n;switch(t){case"inner":return n="-30%",zs(e)&&e.endsWith("%")?.01*parseFloat(e)>0?n:e:e<0?e:n;case"outer":return n=12,zs(e)&&e.endsWith("%")?.01*parseFloat(e)<0?n:e:e>0?e:n;default:return e}}function oft(t,e){return Ws(pdt(t,e),(function(t){return 0===t[e]}))}var aft=[1,0,0,0,1,0,0,0,1];function sft(t,e){var n=is(e||aft);return Rst.transform(n,t)}var lft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getActiveElements=function(){var t=Rst.getDelegationObject(this.context);if(t){var e=this.context.view,n=t.component,r=t.item,i=n.get("field");if(i)return e.geometries[0].elements.filter((function(t){return t.getModel().data[i]===r.value}))}return[]},e.prototype.getActiveElementLabels=function(){var t=this.context.view,e=this.getActiveElements();return t.geometries[0].labelsContainer.getChildren().filter((function(t){return e.find((function(e){return Nl(e.getData(),t.get("data"))}))}))},e.prototype.transfrom=function(t){void 0===t&&(t=7.5);var e=this.getActiveElements(),n=this.getActiveElementLabels();e.forEach((function(e,r){var i=n[r],o=e.geometry.coordinate;if(o.isPolar&&o.isTransposed){var a=Rst.getAngle(e.getModel(),o),s=(a.startAngle+a.endAngle)/2,l=t,u=l*Math.cos(s),c=l*Math.sin(s);e.shape.setMatrix(sft([["t",u,c]])),i.setMatrix(sft([["t",u,c]]))}}))},e.prototype.active=function(){this.transfrom()},e.prototype.reset=function(){this.transfrom(0)},e}(bot),uft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getAnnotations=function(t){return(t||this.context.view).getController("annotation").option},e.prototype.getInitialAnnotation=function(){return this.initialAnnotation},e.prototype.init=function(){var t=this,e=this.context.view;e.removeInteraction("tooltip"),e.on("afterchangesize",(function(){var n=t.getAnnotations(e);t.initialAnnotation=n}))},e.prototype.change=function(t){var e=this.context,n=e.view,r=e.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var i=Ul(r,["data","data"]);if(r.type.match("legend-item")){var o=Rst.getDelegationObject(this.context),a=n.getGroupedFields()[0];if(o&&a){var s=o.item;i=n.getData().find((function(t){return t[a]===s.value}))}}if(i){var l=Ul(t,"annotations",[]),u=Ul(t,"statistic",{});n.getController("annotation").clear(!0),bs(l,(function(t){"object"==typeof t&&n.annotation()[t.type](t)})),cdt(n,{statistic:u,plotType:"pie"},i),n.render(!0)}},e.prototype.reset=function(){var t=this.context.view;t.getController("annotation").clear(!0),bs(this.getInitialAnnotation(),(function(e){t.annotation()[e.type](e)})),t.render(!0)},e}(bot);function cft(t){var e=t.chart,n=t.options,r=n.data,i=n.angleField,o=n.colorField,a=n.color,s=n.pieStyle,l=pdt(r,i);if(oft(l,i)){var u="$$percentage$$";l=l.map((function(t){var e;return Za(Za({},t),((e={}).$$percentage$$=1/l.length,e))})),e.data(l),dht(odt({},t,{options:{xField:"1",yField:u,seriesField:o,isStack:!0,interval:{color:a,style:s},args:{zIndexReversed:!0}}}))}else{e.data(l),dht(odt({},t,{options:{xField:"1",yField:i,seriesField:o,isStack:!0,interval:{color:a,style:s},args:{zIndexReversed:!0}}}))}return t}function dft(t){var e,n=t.chart,r=t.options,i=r.meta,o=r.colorField,a=odt({},i);return n.scale(a,((e={})[o]={type:"cat"},e)),t}function hft(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,o=n.startAngle,a=n.endAngle;return e.coordinate({type:"theta",cfg:{radius:r,innerRadius:i,startAngle:o,endAngle:a}}),t}function fft(t){var e=t.chart,n=t.options,r=n.label,i=n.colorField,o=n.angleField,a=e.geometries[0];if(r){var s=r.callback,l=Qct(Qa(r,["callback"]));if(l.content){var u=l.content;l.content=function(t,n,r){var a=t[i],s=t[o],l=e.getScaleByField(o),c=null==l?void 0:l.scale(s);return gs(u)?u(Za(Za({},t),{percent:c}),n,r):zs(u)?Uct(u,{value:s,name:a,percentage:el(c)&&!vs(s)?(100*c).toFixed(2)+"%":null}):u}}var c=l.type?{inner:"",outer:"pie-outer",spider:"pie-spider"}[l.type]:"pie-outer",d=l.layout?ms(l.layout)?l.layout:[l.layout]:[];l.layout=(c?[{type:c}]:[]).concat(d),a.label({fields:i?[o,i]:[o],callback:s,cfg:Za(Za({},l),{offset:ift(l.type,l.offset),type:"pie"})})}else a.label(!1);return t}function pft(t){var e=t.innerRadius,n=t.statistic,r=t.angleField,i=t.colorField,o=t.meta,a=xdt(t.locale);if(e&&n){var s=odt({},rft.statistic,n),l=s.title,u=s.content;return!1!==l&&(l=odt({},{formatter:function(t){return t?t[i]:vs(l.content)?a.get(["statistic","total"]):l.content}},l)),!1!==u&&(u=odt({},{formatter:function(t,e){var n=t?t[r]:function(t,e){var n=null;return bs(t,(function(t){"number"==typeof t[e]&&(n+=t[e])})),n}(e,r),i=Ul(o,[r,"formatter"])||function(t){return t};return t||vs(u.content)?i(n):u.content}},u)),odt({},{statistic:{title:l,content:u}},t)}return t}function gft(t){var e=t.chart,n=pft(t.options),r=n.innerRadius,i=n.statistic;return e.getController("annotation").clear(!0),jct(nht())(t),r&&i&&cdt(e,{statistic:i,plotType:"pie"}),t}function vft(t){var e=t.chart,n=t.options,r=n.tooltip,i=n.colorField,o=n.angleField,a=n.data;if(!1===r)e.tooltip(r);else if(e.tooltip(odt({},r,{shared:!1})),oft(a,o)){var s=Ul(r,"fields"),l=Ul(r,"formatter");Fl(Ul(r,"fields"))&&(s=[i,o],l=l||function(t){return{name:t[i],value:fl(t[o])}}),e.geometries[0].tooltip(s.join("*"),aht(s,l))}return t}function mft(t){var e=t.chart,n=pft(t.options),r=n.interactions,i=n.statistic,o=n.annotations;return bs(r,(function(t){var n,r;if(!1===t.enable)e.removeInteraction(t.type);else if("pie-statistic-active"===t.type){var a=[];(null===(n=t.cfg)||void 0===n?void 0:n.start)||(a=[{trigger:"element:mouseenter",action:"pie-statistic:change",arg:{statistic:i,annotations:o}}]),bs(null===(r=t.cfg)||void 0===r?void 0:r.start,(function(t){a.push(Za(Za({},t),{arg:{statistic:i,annotations:o}}))})),e.interaction(t.type,odt({},t.cfg,{start:a}))}else e.interaction(t.type,t.cfg||{})})),t}function yft(t){return jct(Hdt("pieStyle"),cft,dft,Zdt,hft,Ydt,vft,fft,Qdt,gft,mft,Kdt)(t)}Cot("pie-statistic",uft),lat("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]}),Cot("pie-legend",lft),lat("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});var bft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="pie",e}return Ka(e,t),e.getDefaultOptions=function(){return rft},e.prototype.changeData=function(t){this.chart.emit(Ktt.BEFORE_CHANGE_DATA,Nat.fromData(this.chart,Ktt.BEFORE_CHANGE_DATA,null));var e=this.options,n=this.options.angleField,r=pdt(e.data,n),i=pdt(t,n);oft(r,n)||oft(i,n)?this.update({data:t}):(this.updateOption({data:t}),this.chart.data(i),gft({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(Ktt.AFTER_CHANGE_DATA,Nat.fromData(this.chart,Ktt.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return yft},e}(Idt);function xft(t){var e=t.chart,n=t.options,r=n.data,i=n.sectorStyle,o=n.color;return e.data(r),jct(dht)(odt({},t,{options:{marginRatio:1,interval:{style:i,color:o}}})),t}function wft(t){var e=t.chart,n=t.options,r=n.label,i=n.xField,o=Hct(e,"interval");if(!1===r)o.label(!1);else if(ys(r)){var a=r.callback,s=r.fields,l=Qa(r,["callback","fields"]),u=l.offset,c=l.layout;(void 0===u||u>=0)&&(c=c?ms(c)?c:[c]:[],l.layout=ds(c,(function(t){return"limit-in-shape"!==t.type})),l.layout.length||delete l.layout),o.label({fields:s||[i],callback:a,cfg:Qct(l)})}else Vct(Mct.WARN,null===r,"the label option must be an Object."),o.label({fields:[i]});return t}function Cft(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return!1===r?e.legend(!1):i&&e.legend(i,r),t}function Sft(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,o=n.startAngle,a=n.endAngle;return e.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:o,endAngle:a}}),t}function kft(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return jct(eht(((e={})[o]=r,e[a]=i,e)))(t)}function Eft(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return r?e.axis(o,r):e.axis(o,!1),i?e.axis(a,i):e.axis(a,!1),t}function Mft(t){jct(Hdt("sectorStyle"),xft,kft,wft,Sft,Eft,Cft,Xdt,qdt,Kdt,Zdt,nht(),Qdt)(t)}var Aft=odt({},Idt.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right"},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="rose",e}Ka(e,t),e.getDefaultOptions=function(){return Aft},e.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Mft}}(Idt);var _ft={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function Tft(t,e){return function(t,e){var n=function(){var t=[256,256],e=Oft,n=Lft,r=Rft,i=Bft,o=Fft,a=Uft,s=Math.random,l=[],u=1/0,c=Dft,d=Rft,h=Vft,f={};function p(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=2048/e,t.height=Ift/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}function g(e,n,r){for(var i,o,l,u=n.x,c=n.y,d=Math.sqrt(t[0]*t[0]+t[1]*t[1]),h=a(t),f=s()<.5?1:-1,p=-f;(i=h(p+=f))&&(o=~~i[0],l=~~i[1],!(Math.min(Math.abs(o),Math.abs(l))>=d));)if(n.x=u+o,n.y=c+l,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>t[0]||n.y+n.y1>t[1])&&(!r||!zft(n,e,t[0]))&&(!r||Gft(n,r))){for(var g=n.sprite,v=n.width>>5,m=t[0]>>5,y=n.x-(v<<4),b=127&y,x=32-b,w=n.y1-n.y0,C=void 0,S=(n.y+n.y0)*m+(y>>5),k=0;k<w;k++){C=0;for(var E=0;E<=v;E++)e[S+E]|=C<<x|(E<v?(C=g[k*v+E])>>>b:0);S+=m}return delete n.sprite,!0}return!1}return f.start=function(){var a=t[0],v=t[1],m=p(h()),y=f.board?f.board:$ft((t[0]>>5)*t[1]),b=l.length,x=[],w=l.map((function(t,a,s){return t.text=c.call(this,t,a,s),t.font=e.call(this,t,a,s),t.style=d.call(this,t,a,s),t.weight=r.call(this,t,a,s),t.rotate=i.call(this,t,a,s),t.size=~~n.call(this,t,a,s),t.padding=o.call(this,t,a,s),t})).sort((function(t,e){return e.size-t.size})),C=-1,S=f.board?[{x:0,y:0},{x:a,y:v}]:null;function k(){for(var e=Date.now();Date.now()-e<u&&++C<b;){var n=w[C];n.x=a*(s()+.5)>>1,n.y=v*(s()+.5)>>1,Nft(m,n,w,C),n.hasText&&g(y,n,S)&&(x.push(n),S?f.hasImage||jft(S,n):S=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=t[0]>>1,n.y-=t[1]>>1)}f._tags=x,f._bounds=S}return k(),f},f.createMask=function(e){var n=document.createElement("canvas"),r=t[0],i=t[1];if(r&&i){var o=r>>5,a=$ft((r>>5)*i);n.width=r,n.height=i;var s=n.getContext("2d");s.drawImage(e,0,0,e.width,e.height,0,0,r,i);for(var l=s.getImageData(0,0,r,i).data,u=0;u<i;u++)for(var c=0;c<r;c++){var d=o*u+(c>>5),h=u*r+c<<2,p=l[h]>=250&&l[h+1]>=250&&l[h+2]>=250?1<<31-c%32:0;a[d]|=p}f.board=a,f.hasImage=!0}},f.timeInterval=function(t){u=null==t?1/0:t},f.words=function(t){l=t},f.size=function(e){t=[+e[0],+e[1]]},f.font=function(t){e=Wft(t)},f.fontWeight=function(t){r=Wft(t)},f.rotate=function(t){i=Wft(t)},f.spiral=function(t){a=Hft[t]||t},f.fontSize=function(t){n=Wft(t)},f.padding=function(t){o=Wft(t)},f.random=function(t){s=Wft(t)},f}();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach((function(t){vs(e[t])||n[t](e[t])})),n.words(t),e.imageMask&&n.createMask(e.imageMask);var r=n.start()._tags;r.forEach((function(t){t.x+=e.size[0]/2,t.y+=e.size[1]/2}));var i=e.size,o=i[0],a=i[1];return r.push({text:"",value:0,x:0,y:0,opacity:0}),r.push({text:"",value:0,x:o,y:a,opacity:0}),r}(t,e=Tl({},_ft,e))}var Pft=Math.PI/180,Ift=2048;function Dft(t){return t.text}function Oft(){return"serif"}function Rft(){return"normal"}function Lft(t){return t.value}function Bft(){return 90*~~(2*Math.random())}function Fft(){return 1}function Nft(t,e,n,r){if(!e.sprite){var i=t.context,o=t.ratio;i.clearRect(0,0,2048/o,Ift/o);var a=0,s=0,l=0,u=n.length;for(--r;++r<u;){e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/o)+"px "+e.font;var c=i.measureText(e.text+"m").width*o,d=e.size<<1;if(e.rotate){var h=Math.sin(e.rotate*Pft),f=Math.cos(e.rotate*Pft),p=c*f,g=c*h,v=d*f,m=d*h;c=Math.max(Math.abs(p+m),Math.abs(p-m))+31>>5<<5,d=~~Math.max(Math.abs(g+v),Math.abs(g-v))}else c=c+31>>5<<5;if(d>l&&(l=d),a+c>=2048&&(a=0,s+=l,l=0),s+d>=Ift)break;i.translate((a+(c>>1))/o,(s+(d>>1))/o),e.rotate&&i.rotate(e.rotate*Pft),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=c,e.height=d,e.xoff=a,e.yoff=s,e.x1=c>>1,e.y1=d>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,a+=c}for(var y=i.getImageData(0,0,2048/o,Ift/o).data,b=[];--r>=0;)if((e=n[r]).hasText){for(var x=(c=e.width)>>5,w=(d=e.y1-e.y0,0);w<d*x;w++)b[w]=0;if(null==(a=e.xoff))return;s=e.yoff;for(var C=0,S=-1,k=0;k<d;k++){for(w=0;w<c;w++){var E=x*k+(w>>5),M=y[2048*(s+k)+(a+w)<<2]?1<<31-w%32:0;b[E]|=M,C|=M}C?S=k:(e.y0++,d--,k--,s++)}e.y1=e.y0+S,e.sprite=b.slice(0,(e.y1-e.y0)*x)}}}function zft(t,e,n){n>>=5;for(var r,i=t.sprite,o=t.width>>5,a=t.x-(o<<4),s=127&a,l=32-s,u=t.y1-t.y0,c=(t.y+t.y0)*n+(a>>5),d=0;d<u;d++){r=0;for(var h=0;h<=o;h++)if((r<<l|(h<o?(r=i[d*o+h])>>>s:0))&e[c+h])return!0;c+=n}return!1}function jft(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function Gft(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function Uft(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function $ft(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function Vft(){return document.createElement("canvas")}function Wft(t){return gs(t)?t:function(){return t}}var Hft={archimedean:Uft,rectangular:function(t){var e=4*t[0]/t[1],n=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:n+=e;break;case 1:r+=4;break;case 2:n-=e;break;default:r-=4}return[n,r]}}};function Yft(t){var e=t.options,n=t.chart,r=n,i=r.width,o=r.height,a=r.padding,s=r.appendPadding,l=r.ele,u=e.data,c=e.imageMask,d=e.wordField,h=e.weightField,f=e.colorField,p=e.wordStyle,g=e.timeInterval,v=e.random,m=e.spiral,y=e.autoFit,b=void 0===y||y,x=e.placementStrategy;if(!u||!u.length)return[];var w,C=p.fontFamily,S=p.fontWeight,k=p.padding,E=p.fontSize,M=function(t,e){return t.map((function(t){return t[e]})).filter((function(t){return"number"==typeof t&&!isNaN(t)}))}(u,h),A=[(w=M,Math.min.apply(Math,w)),Zft(M)],_=u.map((function(t){return{text:t[d],value:t[h],color:t[f],datum:t}})),T={imageMask:c,font:C,fontSize:qft(E,A),fontWeight:S,size:Xft({width:i,height:o,padding:a,appendPadding:s,autoFit:b,container:l}),padding:k,timeInterval:g,random:v,spiral:m,rotate:Kft(e)};if(gs(x)){var P=_.map((function(t,e,r){return Za(Za(Za({},t),{hasText:!!t.text,font:Wft(T.font)(t,e,r),weight:Wft(T.fontWeight)(t,e,r),rotate:Wft(T.rotate)(t,e,r),size:Wft(T.fontSize)(t,e,r),style:"normal"}),x.call(n,t,e,r))}));return P.push({text:"",value:0,x:0,y:0,opacity:0}),P.push({text:"",value:0,x:T.size[0],y:T.size[1],opacity:0}),P}return Tft(_,T)}function Xft(t){var e=t.width,n=t.height,r=t.container,i=t.autoFit,o=t.padding,a=t.appendPadding;if(i){var s=Wct(r);e=s.width,n=s.height}e=e||400,n=n||400;var l=function(t){var e=gdt(t.padding),n=gdt(t.appendPadding),r=e[0]+n[0],i=e[1]+n[1],o=e[2]+n[2],a=e[3]+n[3];return[r,i,o,a]}({padding:o,appendPadding:a}),u=l[0],c=l[1],d=l[2];return[e-(l[3]+c),n-(u+d)]}function qft(t,e){if(gs(t))return t;if(ms(t)){var n=t[0],r=t[1];if(!e)return function(){return(r+n)/2};var i=e[0],o=e[1];return o===i?function(){return(r+n)/2}:function(t){var e=t.value;return(r-n)/(o-i)*(e-i)+n}}return function(){return t}}function Kft(t){var e=function(t){var e=t.wordStyle.rotationSteps;e<1&&(Vct(Mct.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),e=1);return{rotation:t.wordStyle.rotation,rotationSteps:e}}(t),n=e.rotation,r=e.rotationSteps;if(!ms(n))return n;var i=n[0],o=n[1],a=1===r?0:(o-i)/(r-1);return function(){return o===i?o:Math.floor(Math.random()*r)*a}}function Zft(t){return Math.max.apply(Math,t)}var Qft=odt({},Idt.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value","color"],formatter:function(t){return{name:t.text,value:t.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}});function Jft(t){var e=t.chart,n=t.options,r=n.colorField,i=n.color,o=Yft(t);return e.data(o),cht(odt({},t,{options:{xField:"x",yField:"y",seriesField:r&&"color",rawFields:gs(i)&&is(Ul(n,"rawFields",[]),["datum"]),point:{color:i,shape:"word-cloud"}}})).ext.geometry.label(!1),e.coordinate().reflect("y"),e.axis(!1),t}function tpt(t){return jct(eht({x:{nice:!1},y:{nice:!1}}))(t)}function ept(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField;return!1===r?e.legend(!1):i&&e.legend("color",r),t}function npt(t){jct(Jft,tpt,Xdt,ept,qdt,Kdt,Zdt,Qdt)(t)}function rpt(t){return{fontSize:t.data.size,text:t.data.text,textAlign:"center",fontFamily:t.data.font,fontWeight:t.data.weight,fill:t.color||t.defaultStyle.stroke,textBaseline:"alphabetic"}}function ipt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function opt(t,e,n,r){t=t.filter((function(t,r){var i=e(t,r),o=n(t,r);return null!=i&&isFinite(i)&&null!=o&&isFinite(o)})),r&&t.sort((function(t,n){return e(t)-e(n)}));for(var i,o,a,s=t.length,l=new Float64Array(s),u=new Float64Array(s),c=0,d=0,h=0;h<s;)a=t[h],l[h]=i=+e(a,h,t),u[h]=o=+n(a,h,t),c+=(i-c)/++h,d+=(o-d)/h;for(var f=0;f<s;++f)l[f]-=c,u[f]-=d;return[l,u,c,d]}function apt(t,e,n,r){for(var i=0,o=0,a=t.length;o<a;o++){var s=t[o],l=+e(s,o,t),u=+n(s,o,t);null!=l&&isFinite(l)&&null!=u&&isFinite(u)&&r(l,u,i++)}}function spt(t,e,n,r,i){var o=0,a=0;return apt(t,e,n,(function(t,e){var n=e-i(t),s=e-r;o+=n*n,a+=s*s})),1-o/a}function lpt(t){return 180*Math.atan2(t[1][1]-t[0][1],t[1][0]-t[0][0])/Math.PI}function upt(t,e,n){for(var r=Math.log(e-t)*Math.LOG10E+1|0,i=1*Math.pow(10,-r/2-1),o=[s(t),s(e)],a=0;l(o)&&a<1e4;);return o;function s(t){return[t,n(t)]}function l(t){a++;for(var e,n=t.length,r=!1,o=0;o<n-1;o++){var l=t[o],u=t[o+1],c=[((e=[l,u])[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2],d=s(c[0]),h=lpt([l,c]),f=lpt([l,d]);Math.abs(h-f)>i&&(t.splice(o+1,0,d),r=!0)}return r}}function cpt(t,e,n,r){var i=r-t*t,o=Math.abs(i)<1e-24?0:(n-t*e)/i;return[e-o*t,o]}function dpt(){var t,e=function(t){return t[0]},n=function(t){return t[1]};function r(r){var i=0,o=0,a=0,s=0,l=0,u=t?+t[0]:1/0,c=t?+t[1]:-1/0;apt(r,e,n,(function(e,n){++i,o+=(e-o)/i,a+=(n-a)/i,s+=(e*n-s)/i,l+=(e*e-l)/i,t||(e<u&&(u=e),e>c&&(c=e))}));var d=ipt(cpt(o,a,s,l),2),h=d[0],f=d[1],p=function(t){return f*t+h},g=[[u,p(u)],[c,p(c)]];return g.a=f,g.b=h,g.predict=p,g.rSquared=spt(r,e,n,a,p),g}return r.domain=function(e){return arguments.length?(t=e,r):t},r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r}function hpt(t){t.sort((function(t,e){return t-e}));var e=t.length/2;return e%1==0?(t[e-1]+t[e])/2:t[Math.floor(e)]}hst("point","word-cloud",{draw:function(t,e){var n=t.x,r=t.y,i=e.addShape("text",{attrs:Za(Za({},rpt(t)),{x:n,y:r})}),o=t.data.rotate;return"number"==typeof o&&Rst.rotate(i,o*Math.PI/180),i}}),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="word-cloud",e}Ka(e,t),e.getDefaultOptions=function(){return Qft},e.prototype.changeData=function(t){this.updateOption({data:t}),this.options.imageMask?this.render():this.chart.changeData(Yft({chart:this.chart,options:this.options}))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.render=function(){var e=this;return new Promise((function(n){var r=e.options.imageMask;if(!r)return t.prototype.render.call(e),void n();var i,o=function(r){e.options=Za(Za({},e.options),{imageMask:r||null}),t.prototype.render.call(e),n()};(i=r,new Promise((function(t,e){if(i instanceof HTMLImageElement)t(i);else{if(zs(i)){var n=new Image;return n.crossOrigin="anonymous",n.src=i,n.onload=function(){t(n)},void(n.onerror=function(){Vct(Mct.ERROR,!1,"image %s load failed !!!",i),e()})}Vct(Mct.WARN,void 0===i,"The type of imageMask option must be String or HTMLImageElement."),e()}}))).then(o).catch(o)}))},e.prototype.getSchemaAdaptor=function(){return npt},e.prototype.triggerResize=function(){var e=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout((function(){t.prototype.triggerResize.call(e)})))}}(Idt);function fpt(t){return(t=1-t*t*t)*t*t}function ppt(t,e,n){var r=t[e],i=n[0],o=n[1]+1;if(!(o>=t.length))for(;e>i&&t[o]-r<=r-t[i];)n[0]=++i,n[1]=o,++o}function gpt(){var t,e=function(t){return t[0]},n=function(t){return t[1]};function r(r){var i,o,a,s,l=ipt(opt(r,e,n),4),u=l[0],c=l[1],d=l[2],h=l[3],f=u.length,p=0,g=0,v=0,m=0,y=0;for(i=0;i<f;)o=u[i],a=c[i++],p+=((s=o*o)-p)/i,g+=(s*o-g)/i,v+=(s*s-v)/i,m+=(o*a-m)/i,y+=(s*a-y)/i;var b=0,x=0,w=t?+t[0]:1/0,C=t?+t[1]:-1/0;apt(r,e,n,(function(e,n){x++,b+=(n-b)/x,t||(e<w&&(w=e),e>C&&(C=e))}));var S=v-p*p,k=p*S-g*g,E=(y*p-m*g)/k,M=(m*S-y*g)/k,A=-E*p,_=function(t){return E*(t-=d)*t+M*t+A+h},T=upt(w,C,_);return T.a=E,T.b=M-2*E*d,T.c=A-M*d+E*d*d+h,T.predict=_,T.rSquared=spt(r,e,n,b,_),T}return r.domain=function(e){return arguments.length?(t=e,r):t},r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r}var vpt={exp:function(){var t,e=function(t){return t[0]},n=function(t){return t[1]};function r(r){var i=0,o=0,a=0,s=0,l=0,u=0,c=t?+t[0]:1/0,d=t?+t[1]:-1/0;apt(r,e,n,(function(e,n){var r=Math.log(n),h=e*n;++i,o+=(n-o)/i,s+=(h-s)/i,u+=(e*h-u)/i,a+=(n*r-a)/i,l+=(h*r-l)/i,t||(e<c&&(c=e),e>d&&(d=e))}));var h=ipt(cpt(s/o,a/o,l/o,u/o),2),f=h[0],p=h[1];f=Math.exp(f);var g=function(t){return f*Math.exp(p*t)},v=upt(c,d,g);return v.a=f,v.b=p,v.predict=g,v.rSquared=spt(r,e,n,o,g),v}return r.domain=function(e){return arguments.length?(t=e,r):t},r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r},linear:dpt,loess:function(){var t=function(t){return t[0]},e=function(t){return t[1]},n=.3;function r(r){for(var i=ipt(opt(r,t,e,!0),4),o=i[0],a=i[1],s=i[2],l=i[3],u=o.length,c=Math.max(2,~~(n*u)),d=new Float64Array(u),h=new Float64Array(u),f=new Float64Array(u).fill(1),p=-1;++p<=2;){for(var g=[0,c-1],v=0;v<u;++v){for(var m=o[v],y=g[0],b=g[1],x=m-o[y]>o[b]-m?y:b,w=0,C=0,S=0,k=0,E=0,M=1/Math.abs(o[x]-m||1),A=y;A<=b;++A){var _=o[A],T=a[A],P=fpt(Math.abs(m-_)*M)*f[A],I=_*P;w+=P,C+=I,S+=T*P,k+=T*I,E+=_*I}var D=ipt(cpt(C/w,S/w,k/w,E/w),2),O=D[0],R=D[1];d[v]=O+R*m,h[v]=Math.abs(a[v]-d[v]),ppt(o,v+1,g)}if(2===p)break;var L=hpt(h);if(Math.abs(L)<1e-12)break;for(var B,F,N=0;N<u;++N)B=h[N]/(6*L),f[N]=B>=1?1e-12:(F=1-B*B)*F}return function(t,e,n,r){for(var i,o=t.length,a=[],s=0,l=0,u=[];s<o;++s)i=t[s]+n,u[0]===i?u[1]+=(e[s]-u[1])/++l:(l=0,u[1]+=r,u=[i,e[s]],a.push(u));return u[1]+=r,a}(o,d,s,l)}return r.bandwidth=function(t){return arguments.length?(n=t,r):n},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(t){return arguments.length?(e=t,r):e},r},log:function(){var t,e=function(t){return t[0]},n=function(t){return t[1]},r=Math.E;function i(i){var o=0,a=0,s=0,l=0,u=0,c=t?+t[0]:1/0,d=t?+t[1]:-1/0,h=Math.log(r);apt(i,e,n,(function(e,n){var r=Math.log(e)/h;++o,a+=(r-a)/o,s+=(n-s)/o,l+=(r*n-l)/o,u+=(r*r-u)/o,t||(e<c&&(c=e),e>d&&(d=e))}));var f=ipt(cpt(a,s,l,u),2),p=f[0],g=f[1],v=function(t){return g*Math.log(t)/h+p},m=upt(c,d,v);return m.a=g,m.b=p,m.predict=v,m.rSquared=spt(i,e,n,s,v),m}return i.domain=function(e){return arguments.length?(t=e,i):t},i.x=function(t){return arguments.length?(e=t,i):e},i.y=function(t){return arguments.length?(n=t,i):n},i.base=function(t){return arguments.length?(r=t,i):r},i},poly:function(){var t,e=function(t){return t[0]},n=function(t){return t[1]},r=3;function i(i){if(1===r){var o=dpt().x(e).y(n).domain(t)(i);return o.coefficients=[o.b,o.a],delete o.a,delete o.b,o}if(2===r){var a=gpt().x(e).y(n).domain(t)(i);return a.coefficients=[a.c,a.b,a.a],delete a.a,delete a.b,delete a.c,a}var s,l,u,c,d,h=ipt(opt(i,e,n),4),f=h[0],p=h[1],g=h[2],v=h[3],m=f.length,y=[],b=[],x=r+1,w=0,C=0,S=t?+t[0]:1/0,k=t?+t[1]:-1/0;for(apt(i,e,n,(function(e,n){++C,w+=(n-w)/C,t||(e<S&&(S=e),e>k&&(k=e))})),s=0;s<x;++s){for(u=0,c=0;u<m;++u)c+=Math.pow(f[u],s)*p[u];for(y.push(c),d=new Float64Array(x),l=0;l<x;++l){for(u=0,c=0;u<m;++u)c+=Math.pow(f[u],s+l);d[l]=c}b.push(d)}b.push(y);var E=function(t){var e,n,r,i,o,a=t.length-1,s=[];for(e=0;e<a;++e){for(i=e,n=e+1;n<a;++n)Math.abs(t[e][n])>Math.abs(t[e][i])&&(i=n);for(r=e;r<a+1;++r)o=t[r][e],t[r][e]=t[r][i],t[r][i]=o;for(n=e+1;n<a;++n)for(r=a;r>=e;r--)t[r][n]-=t[r][e]*t[e][n]/t[e][e]}for(n=a-1;n>=0;--n){for(o=0,r=n+1;r<a;++r)o+=t[r][n]*s[r];s[n]=(t[a][n]-o)/t[n][n]}return s}(b),M=function(t){t-=g;var e=v+E[0]+E[1]*t+E[2]*t*t;for(s=3;s<x;++s)e+=E[s]*Math.pow(t,s);return e},A=upt(S,k,M);return A.coefficients=function(t,e,n,r){var i,o,a,s,l=Array(t);for(i=0;i<t;++i)l[i]=0;for(i=t-1;i>=0;--i)for(a=e[i],s=1,l[i]+=a,o=1;o<=i;++o)s*=(i+1-o)/o,l[i-o]+=a*Math.pow(n,o)*s;return l[0]+=r,l}(x,E,-g,v),A.predict=M,A.rSquared=spt(i,e,n,w,M),A}return i.domain=function(e){return arguments.length?(t=e,i):t},i.x=function(t){return arguments.length?(e=t,i):e},i.y=function(t){return arguments.length?(n=t,i):n},i.order=function(t){return arguments.length?(r=t,i):r},i},pow:function(){var t,e=function(t){return t[0]},n=function(t){return t[1]};function r(r){var i=0,o=0,a=0,s=0,l=0,u=0,c=t?+t[0]:1/0,d=t?+t[1]:-1/0;apt(r,e,n,(function(e,n){var r=Math.log(e),h=Math.log(n);++i,o+=(r-o)/i,a+=(h-a)/i,s+=(r*h-s)/i,l+=(r*r-l)/i,u+=(n-u)/i,t||(e<c&&(c=e),e>d&&(d=e))}));var h=ipt(cpt(o,a,s,l),2),f=h[0],p=h[1];f=Math.exp(f);var g=function(t){return f*Math.pow(t,p)},v=upt(c,d,g);return v.a=f,v.b=p,v.predict=g,v.rSquared=spt(r,e,n,u,g),v}return r.domain=function(e){return arguments.length?(t=e,r):t},r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r},quad:gpt};var mpt=function(t,e){var n=e.view,r=e.options,i=r.xField,o=r.yField,a=n.getScaleByField(i),s=n.getScaleByField(o);return function(t,e,n){var r=[],i=t[0],o=null;if(t.length<=2)return function(t,e){var n=[];if(t.length){n.push(["M",t[0].x,t[0].y]);for(var r=1,i=t.length;r<i;r+=1){var o=t[r];n.push(["L",o.x,o.y])}e&&n.push(["Z"])}return n}(t,e);for(var a=0,s=t.length;a<s;a++){var l=t[a];o&&o.x===l.x&&o.y===l.y||(r.push(l.x),r.push(l.y),o=l)}var u=Jct(r,e,n||[[0,0],[1,1]]);return u.unshift(["M",i.x,i.y]),u}(t.map((function(t){return n.getCoordinate().convert({x:a.scale(t[0]),y:s.scale(t[1])})})),!1)};function ypt(t){var e=t.data,n=void 0===e?[]:e,r=t.xField,i=t.yField;if(n.length){for(var o=!0,a=!0,s=n[0],l=void 0,u=1;u<n.length&&(l=n[u],s[r]!==l[r]&&(o=!1),s[i]!==l[i]&&(a=!1),o||a);u++)s=l;var c=[];o&&c.push(r),a&&c.push(i);var d=Gct(function(t){var e,n=t.meta,r=void 0===n?{}:n,i=t.xField,o=t.yField,a=t.data,s=a[0][i],l=a[0][o],u=s>0,c=l>0;function d(t,e){var n=Ul(r,[t]);function i(t){return Ul(n,t)}var o={};return"x"===e?(el(s)&&(el(i("min"))||(o.min=u?0:2*s),el(i("max"))||(o.max=u?2*s:0)),o):(el(l)&&(el(i("min"))||(o.min=c?0:2*l),el(i("max"))||(o.max=c?2*l:0)),o)}return Za(Za({},r),((e={})[i]=Za(Za({},r[i]),d(i,"x")),e[o]=Za(Za({},r[o]),d(o,"y")),e))}(t),c);return odt({},t,{meta:d})}return t}function bpt(t){var e=t.chart,n=t.options,r=n.data,i=n.type,o=n.color,a=n.shape,s=n.pointStyle,l=n.shapeField,u=n.colorField,c=n.xField,d=n.yField,h=n.sizeField,f=n.size,p=n.tooltip;h&&(f||(f=[2,8]),el(f)&&(f=[f,f])),p&&!p.fields&&(p=Za(Za({},p),{fields:[c,d,u,h,l]})),e.data(r),cht(odt({},t,{options:{seriesField:u,point:{color:o,shape:a,size:f,style:s},tooltip:p}}));var g=Hct(e,"point");return i&&g.adjust(i),t}function xpt(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField,s=ypt(n);return jct(eht(((e={})[o]=r,e[a]=i,e)))(odt({},t,{options:s}))}function wpt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return e.axis(o,r),e.axis(a,i),t}function Cpt(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,o=n.shapeField,a=n.sizeField,s=n.shapeLegend,l=n.sizeLegend,u=!1!==r;return i&&e.legend(i,!!u&&r),o&&(s?e.legend(o,s):e.legend(o,!1!==s&&r)),a&&e.legend(a,l||!1),u||s||l||e.legend(!1),t}function Spt(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,o=Hct(e,"point");if(r){var a=r.callback,s=Qa(r,["callback"]);o.label({fields:[i],callback:a,cfg:Qct(s)})}else o.label(!1);return t}function kpt(t){var e=t.options.quadrant,n=[];if(e){var r=e.xBaseline,i=void 0===r?0:r,o=e.yBaseline,a=void 0===o?0:o,s=e.labels,l=e.regionStyle,u=e.lineStyle,c=function(t,e){var n=10;return{regionStyle:[{position:{start:[t,"max"],end:["max",e]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[t,e]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",e],end:[t,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[t,e],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",e],offsetX:-10,offsetY:-10,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",e],offsetX:n,offsetY:-10,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",e],offsetX:n,offsetY:n,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",e],offsetX:-10,offsetY:n,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]}}(i,a);new Array(4).join(",").split(",").forEach((function(t,e){n.push(Za(Za({type:"region",top:!1},c.regionStyle[e].position),{style:odt({},c.regionStyle[e].style,null==l?void 0:l[e])}),Za({type:"text",top:!0},odt({},c.labelStyle[e],null==s?void 0:s[e])))})),n.push({type:"line",top:!1,start:["min",a],end:["max",a],style:odt({},c.lineStyle,u)},{type:"line",top:!1,start:[i,"min"],end:[i,"max"],style:odt({},c.lineStyle,u)})}return jct(nht(n))(t)}function Ept(t){var e=t.options,n=t.chart,r=e.regressionLine;if(r){var i=r.style,o=r.top,a=void 0!==o&&o,s={stroke:"#9ba29a",lineWidth:2,opacity:.5};n.annotation().shape({top:a,render:function(t,r){var o=t.addGroup({id:n.id+"-regression-line",name:"regression-line-group"}),a=function(t){var e,n=t.options,r=n.xField,i=n.yField,o=n.data,a=n.regressionLine,s=a.type,l=void 0===s?"linear":s,u=a.algorithm;return e=u?ms(u)?u:u(o):vpt[l]().x((function(t){return t[r]})).y((function(t){return t[i]}))(o),mpt(e,t)}({view:r,options:e});o.addShape("path",{name:"regression-line",attrs:Za(Za({path:a},s),i)})}})}return t}function Mpt(t){var e=t.chart,n=t.options.tooltip;return n?e.tooltip(n):!1===n&&e.tooltip(!1),t}function Apt(t){return jct(bpt,xpt,wpt,Cpt,Mpt,Spt,Uht,qdt,kpt,Kdt,Zdt,Ept)(t)}var _pt=odt({},Idt.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});lat("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var Tpt,Ppt,Ipt,Dpt,Opt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.type="scatter",r.on(Ktt.BEFORE_RENDER,(function(t){var e,n,i=r,o=i.options,a=i.chart;if((null===(e=t.data)||void 0===e?void 0:e.source)===mct.FILTER){var s=r.chart.filterData(r.chart.getData());xpt({chart:a,options:Za(Za({},o),{data:s})})}(null===(n=t.data)||void 0===n?void 0:n.source)===mct.RESET&&xpt({chart:a,options:o})})),r}return Ka(e,t),e.getDefaultOptions=function(){return _pt},e.prototype.changeData=function(t){this.updateOption(ypt(odt({},this.options,{data:t})));var e=this.options;xpt({chart:this.chart,options:e}),this.chart.changeData(t)},e.prototype.getSchemaAdaptor=function(){return Apt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e}(Idt);function Rpt(t){var e=t.chart,n=t.options,r=n.data,i=n.lineStyle,o=n.color,a=n.point,s=n.area;e.data(r);var l=odt({},t,{options:{line:{style:i,color:o},point:a?Za({color:o},a):a,area:s?Za({color:o},s):s,label:void 0}}),u=odt({},l,{options:{tooltip:!1}}),c=(null==a?void 0:a.state)||n.state,d=odt({},l,{options:{tooltip:!1,state:c}});return uht(l),cht(d),lht(u),t}function Lpt(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return jct(eht(((e={})[o]=r,e[a]=i,e)))(t)}function Bpt(t){var e=t.chart,n=t.options,r=n.radius,i=n.startAngle,o=n.endAngle;return e.coordinate("polar",{radius:r,startAngle:i,endAngle:o}),t}function Fpt(t){var e=t.chart,n=t.options,r=n.xField,i=n.xAxis,o=n.yField,a=n.yAxis;return e.axis(r,i),e.axis(o,a),t}function Npt(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,o=Hct(e,"line");if(r){var a=r.callback,s=Qa(r,["callback"]);o.label({fields:[i],callback:a,cfg:Qct(s)})}else o.label(!1);return t}function zpt(t){return jct(Rpt,Lpt,Zdt,Bpt,Fpt,Ydt,Xdt,Npt,qdt,Kdt,nht())(t)}Bat("radar-tooltip",function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),e.prototype.getTooltipItems=function(e){var n=this.getTooltipCfg(),r=n.shared,i=n.title,o=t.prototype.getTooltipItems.call(this,e);if(o.length>0){var a=this.view.geometries[0],s=a.dataArray,l=o[0].name,u=[];return s.forEach((function(t){t.forEach((function(t){var e=Rst.getTooltipItems(t,a)[0];if(!r&&e&&e.name===l){var n=vs(i)?l:i;u.push(Za(Za({},e),{name:e.title,title:n}))}else if(r&&e){n=vs(i)?e.name||l:i;u.push(Za(Za({},e),{name:e.title,title:n}))}}))})),u}return[]},e}(Xat)),Cot("radar-tooltip",function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.init=function(){this.context.view.removeInteraction("tooltip")},e.prototype.show=function(){var t=this.context.event;this.getTooltipController().showTooltip({x:t.x,y:t.y})},e.prototype.hide=function(){this.getTooltipController().hideTooltip()},e.prototype.getTooltipController=function(){return this.context.view.getController("radar-tooltip")},e}(bot)),lat("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]}),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="radar",e}Ka(e,t),e.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return odt({},t.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},e.prototype.getSchemaAdaptor=function(){return zpt}}(Idt),(Ppt=Tpt||(Tpt={})).Left="Left",Ppt.Right="Right",(Dpt=Ipt||(Ipt={})).Line="line",Dpt.Column="column";var jpt={nice:!0,label:{autoHide:!0,autoRotate:!1}},Gpt=Za(Za({},jpt),{position:"left"}),Upt=Za(Za({},jpt),{position:"right",grid:null});function $pt(t){return Ul(t,"geometry")===Ipt.Line}function Vpt(t){return Ul(t,"geometry")===Ipt.Column}function Wpt(t,e,n){return Vpt(n)?odt({},{geometry:Ipt.Column,label:n.label&&n.isRange?{content:function(t){var n;return null===(n=t[e])||void 0===n?void 0:n.join("-")}}:void 0},n):Za({geometry:Ipt.Line},n)}function Hpt(t,e){var n=t[0],r=t[1];return ms(e)?[e[0],e[1]]:[Ul(e,n),Ul(e,r)]}function Ypt(t,e){return e===Tpt.Left?!1!==t&&odt({},Gpt,t):e===Tpt.Right?!1!==t&&odt({},Upt,t):t}function Xpt(t){var e=t.view,n=t.geometryOption,r=t.yField,i=t.legend,o=Ul(i,"marker"),a=Hct(e,$pt(n)?"line":"interval");if(!n.seriesField){var s=Ul(e,"options.scales."+r+".alias")||r,l=a.getAttribute("color"),u=Rst.getMappingValue(l,s,l.values[0]);return[{value:r,name:s,marker:(gs(o)?o:!Fl(o)&&odt({},{style:{stroke:u,fill:u}},o))||($pt(n)?{symbol:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},style:{lineWidth:2,r:6,stroke:u}}:{symbol:"square",style:{fill:u}}),isGeometry:!0,viewId:e.id}]}var c=a.getGroupAttributes();return Fs(c,(function(t,n){var r=Rst.getLegendItems(e,a,n,e.getTheme(),o);return t.concat(r)}),[])}var qpt=function(t,e){var n=e[0],r=e[1],i=t.getOptions().data,o=t.getXScale(),a=Ql(i);if(o&&a){var s=Us(i,o.field),l=Ql(s),u=Math.floor(n*(l-1)),c=Math.floor(r*(l-1));t.filter(o.field,(function(t){var e=s.indexOf(t);return!(e>-1)||function(t,e,n){var r=Math.min(e,n),i=Math.max(e,n);return t>=r&&t<=i}(e,u,c)})),t.render(!0)}};function Kpt(t){var e,n=t.options,r=n.geometryOptions,i=void 0===r?[]:r,o=n.xField,a=n.yField,s=Ws(i,(function(t){var e=t.geometry;return e===Ipt.Line||void 0===e}));return odt({},{options:{geometryOptions:[],meta:(e={},e[o]={type:"cat",sync:!0,range:s?[0,1]:void 0},e),tooltip:{showMarkers:s,showCrosshairs:s,shared:!0,crosshairs:{type:"x"}},interactions:s?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},t,{options:{yAxis:Hpt(a,n.yAxis),geometryOptions:[Wpt(0,a[0],i[0]),Wpt(0,a[1],i[1])],annotations:Hpt(a,n.annotations)}})}function Zpt(t){var e,n,r=t.chart,i=t.options.geometryOptions,o={line:0,column:1};return[{type:null===(e=i[0])||void 0===e?void 0:e.geometry,id:"left-axes-view"},{type:null===(n=i[1])||void 0===n?void 0:n.geometry,id:"right-axes-view"}].sort((function(t,e){return-o[t.type]+o[e.type]})).forEach((function(t){return r.createView({id:t.id})})),t}function Qpt(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,o=n.geometryOptions,a=n.data,s=n.tooltip;return[Za(Za({},o[0]),{id:"left-axes-view",data:a[0],yField:i[0]}),Za(Za({},o[1]),{id:"right-axes-view",data:a[1],yField:i[1]})].forEach((function(t){var n=t.id,i=t.data,o=t.yField,a=Vpt(t)&&t.isPercent,l=a?kht(i,o,r,o):i,u=qct(e,n).data(l),c=a?Za({formatter:function(e){return{name:e[t.seriesField]||o,value:(100*Number(e[o])).toFixed(2)+"%"}}},s):s;!function(t){var e=t.options,n=t.chart,r=e.geometryOption,i=r.isStack,o=r.color,a=r.seriesField,s=r.groupField,l=r.isGroup,u=["xField","yField"];if($pt(r)){uht(odt({},t,{options:Za(Za(Za({},Gct(e,u)),r),{line:{color:r.color,style:r.lineStyle}})})),cht(odt({},t,{options:Za(Za(Za({},Gct(e,u)),r),{point:r.point&&Za({color:o,shape:"circle"},r.point)})}));var c=[];l&&c.push({type:"dodge",dodgeBy:s||a,customOffset:0}),i&&c.push({type:"stack"}),c.length&&bs(n.geometries,(function(t){t.adjust(c)}))}Vpt(r)&&Kht(odt({},t,{options:Za(Za(Za({},Gct(e,u)),r),{widthRatio:r.columnWidthRatio,interval:Za(Za({},Gct(r,["color"])),{style:r.columnStyle})})}))}({chart:u,options:{xField:r,yField:o,tooltip:c,geometryOption:t}})})),t}function Jpt(t){var e,n=t.chart,r=t.options.geometryOptions,i=(null===(e=n.getTheme())||void 0===e?void 0:e.colors10)||[],o=0;return n.once("beforepaint",(function(){bs(r,(function(t,e){var r=qct(n,0===e?"left-axes-view":"right-axes-view");if(!t.color){var a=r.getGroupScales(),s=Ul(a,[0,"values","length"],1),l=i.slice(o,o+s).concat(0===e?[]:i);r.geometries.forEach((function(e){t.seriesField?e.color(t.seriesField,l):e.color(l[0])})),o+=s}})),n.render(!0)})),t}function tgt(t){var e,n,r=t.chart,i=t.options,o=i.xAxis,a=i.yAxis,s=i.xField,l=i.yField;return eht(((e={})[s]=o,e[l[0]]=a[0],e))(odt({},t,{chart:qct(r,"left-axes-view")})),eht(((n={})[s]=o,n[l[1]]=a[1],n))(odt({},t,{chart:qct(r,"right-axes-view")})),t}function egt(t){var e=t.chart,n=t.options,r=qct(e,"left-axes-view"),i=qct(e,"right-axes-view"),o=n.xField,a=n.yField,s=n.xAxis,l=n.yAxis;return e.axis(o,!1),e.axis(a[0],!1),e.axis(a[1],!1),r.axis(o,s),r.axis(a[0],Ypt(l[0],Tpt.Left)),i.axis(o,!1),i.axis(a[1],Ypt(l[1],Tpt.Right)),t}function ngt(t){var e=t.chart,n=t.options.tooltip,r=qct(e,"left-axes-view"),i=qct(e,"right-axes-view");return e.tooltip(n),r.tooltip({shared:!0}),i.tooltip({shared:!0}),t}function rgt(t){var e=t.chart;return qdt(odt({},t,{chart:qct(e,"left-axes-view")})),qdt(odt({},t,{chart:qct(e,"right-axes-view")})),t}function igt(t){var e=t.chart,n=t.options.annotations,r=Ul(n,[0]),i=Ul(n,[1]);return nht(r)(odt({},t,{chart:qct(e,"left-axes-view"),options:{annotations:r}})),nht(i)(odt({},t,{chart:qct(e,"right-axes-view"),options:{annotations:i}})),t}function ogt(t){var e=t.chart;return Zdt(odt({},t,{chart:qct(e,"left-axes-view")})),Zdt(odt({},t,{chart:qct(e,"right-axes-view")})),Zdt(t),t}function agt(t){var e=t.chart;return Kdt(odt({},t,{chart:qct(e,"left-axes-view")})),Kdt(odt({},t,{chart:qct(e,"right-axes-view")})),t}function sgt(t){var e=t.chart,n=t.options.yAxis;return rht(odt({},t,{chart:qct(e,"left-axes-view"),options:{yAxis:n[0]}})),rht(odt({},t,{chart:qct(e,"right-axes-view"),options:{yAxis:n[1]}})),t}function lgt(t){var e=t.chart,n=t.options,r=n.legend,i=n.geometryOptions,o=n.yField,a=n.data,s=qct(e,"left-axes-view"),l=qct(e,"right-axes-view");return!1===r?e.legend(!1):ys(r)&&!0===r.custom?e.legend(r):(e.once("beforepaint",(function(){var t=a[0].length?Xpt({view:s,geometryOption:i[0],yField:o[0],legend:r}):[],n=a[1].length?Xpt({view:l,geometryOption:i[1],yField:o[1],legend:r}):[];e.legend(odt({},r,{custom:!0,items:t.concat(n)}))})),i[0].seriesField&&s.legend(i[0].seriesField,r),i[1].seriesField&&l.legend(i[1].seriesField,r),e.on("legend-item:click",(function(t){var n=Ul(t,"gEvent.delegateObject",{});if(n&&n.item){var r=n.item,i=r.value,a=r.isGeometry,s=r.viewId;if(a){if(Es(o,(function(t){return t===i}))>-1)bs(Ul(qct(e,s),"geometries"),(function(t){t.changeVisible(!n.item.unchecked)}))}else{var l=Ul(e.getController("legend"),"option.items",[]);bs(e.views,(function(t){bs(t.getGroupScales(),(function(e){e.values&&e.values.indexOf(i)>-1&&t.filter(e.field,(function(t){return!ks(l,(function(e){return e.value===t})).unchecked}))})),e.render(!0)}))}}}))),t}function ugt(t){var e=t.chart,n=t.options.slider,r=qct(e,"left-axes-view"),i=qct(e,"right-axes-view");return n&&(r.option("slider",n),r.on("slider:valuechanged",(function(t){var e=t.event,n=e.value,r=e.originValue;Nl(n,r)||qpt(i,n)})),e.once("afterpaint",(function(){if(!bl(n)){var t=n.start,e=n.end;(t||e)&&qpt(i,[t,e])}}))),t}function cgt(t){return jct(Kpt,Zpt,ogt,Qpt,tgt,egt,sgt,ngt,rgt,igt,agt,Jpt,lgt,ugt)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dual-axes",e}Ka(e,t),e.prototype.getDefaultOptions=function(){return odt({},t.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},e.prototype.getSchemaAdaptor=function(){return cgt}}(Idt);var dgt={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(t,e){return""+Ul(e,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},hgt={appendPadding:2,tooltip:Za({},dgt),animation:{}};function fgt(t){return zl(t||[],(function(t,e){return{x:""+e,y:t}}))}function pgt(t){var e=t.chart,n=t.options,r=n.data,i=n.color,o=n.areaStyle,a=n.point,s=n.line,l=null==a?void 0:a.state,u=fgt(r);e.data(u);var c=odt({},t,{options:{xField:"x",yField:"y",area:{color:i,style:o},line:s,point:a}}),d=odt({},c,{options:{tooltip:!1}}),h=odt({},c,{options:{tooltip:!1,state:l}});return lht(c),uht(d),cht(h),e.axis(!1),e.legend(!1),t}function ggt(t){var e,n,r=t.options,i=r.xAxis,o=r.yAxis,a=fgt(r.data);return jct(eht(((e={}).x=i,e.y=o,e),((n={}).x={type:"cat"},n.y=hdt(a,"y"),n)))(t)}function vgt(t){return jct(Hdt("areaStyle"),pgt,ggt,Xdt,Zdt,Kdt,nht())(t)}function mgt(t){var e=t.chart,n=t.options,r=n.data,i=n.color,o=n.lineStyle,a=n.point,s=null==a?void 0:a.state,l=fgt(r);e.data(l);var u=odt({},t,{options:{xField:"x",yField:"y",line:{color:i,style:o},point:a}}),c=odt({},u,{options:{tooltip:!1,state:s}});return uht(u),cht(c),e.axis(!1),e.legend(!1),t}function ygt(t){return jct(mgt,ggt,Zdt,Xdt,Kdt,nht())(t)}var bgt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="tiny-line",e}return Ka(e,t),e.getDefaultOptions=function(){return hgt},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.chart;ggt({chart:e,options:this.options}),e.changeData(fgt(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return ygt},e}(Idt);function xgt(t){var e=t.chart,n=t.options,r=n.data,i=n.color,o=n.columnStyle,a=n.columnWidthRatio,s=fgt(r);return e.data(s),dht(odt({},t,{options:{xField:"x",yField:"y",widthRatio:a,interval:{style:o,color:i}}})),e.axis(!1),e.legend(!1),e.interaction("element-active"),t}function wgt(t){return jct(Zdt,Hdt("columnStyle"),xgt,ggt,Xdt,Kdt,nht())(t)}var Cgt={appendPadding:2,tooltip:Za({},{showTitle:!1,shared:!0,showMarkers:!1,customContent:function(t,e){return""+Ul(e,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}}),animation:{}},Sgt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="tiny-column",e}return Ka(e,t),e.getDefaultOptions=function(){return Cgt},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.chart;ggt({chart:e,options:this.options}),e.changeData(fgt(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return wgt},e}(Idt),kgt={appendPadding:2,tooltip:Za({},dgt),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},Egt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="tiny-area",e}return Ka(e,t),e.getDefaultOptions=function(){return kgt},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.chart;ggt({chart:e,options:this.options}),e.changeData(fgt(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return vgt},e}(Idt);function Mgt(t,e,n){if(1===n)return[0,e];var r=Math.floor(t/e);return[e*r,e*(r+1)]}function Agt(t,e,n,r,i){var o=Pl(t);js(o,e);var a=Us(o,e),s=Is(a),l=s.max-s.min,u=n;if(!n&&r&&(u=r>1?l/(r-1):s.max),!n&&!r){var c=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}(a);u=l/c}var d={},h=Xs(o,i);Fl(h)?bs(o,(function(t){var n=Mgt(t[e],u,r),i=n[0]+"-"+n[1];dl(d,i)||(d[i]={range:n,count:0}),d[i].count+=1})):Object.keys(h).forEach((function(t){bs(h[t],(function(n){var o=Mgt(n[e],u,r),a=o[0]+"-"+o[1]+"-"+t;dl(d,a)||(d[a]={range:o,count:0},d[a][i]=t),d[a].count+=1}))}));var f=[];return bs(d,(function(t){f.push(t)})),f}var _gt=odt({},Idt.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function Tgt(t){var e=t.chart,n=t.options,r=n.data,i=n.binField,o=n.binNumber,a=n.binWidth,s=n.color,l=n.stackField,u=n.legend,c=n.columnStyle,d=Agt(r,i,a,o,l);return e.data(d),dht(odt({},t,{options:{xField:"range",yField:"count",seriesField:l,isStack:!0,interval:{color:s,style:c}}})),u&&l&&e.legend(l,u),t}function Pgt(t){var e,n=t.options,r=n.xAxis,i=n.yAxis;return jct(eht(((e={}).range=r,e.count=i,e)))(t)}function Igt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis;return!1===r?e.axis("range",!1):e.axis("range",r),!1===i?e.axis("count",!1):e.axis("count",i),t}function Dgt(t){var e=t.chart,n=t.options.label,r=Hct(e,"interval");if(n){var i=n.callback,o=Qa(n,["callback"]);r.label({fields:["count"],callback:i,cfg:Qct(o)})}else r.label(!1);return t}function Ogt(t){return jct(Zdt,Hdt("columnStyle"),Tgt,Pgt,Igt,Qdt,Dgt,Xdt,qdt,Kdt)(t)}var Rgt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="histogram",e}return Ka(e,t),e.getDefaultOptions=function(){return _gt},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options,n=e.binField,r=e.binNumber,i=e.binWidth,o=e.stackField;this.chart.changeData(Agt(t,n,i,r,o))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Ogt},e}(Idt),Lgt=["#FAAD14","#E8EDF3"],Bgt={percent:.2,color:Lgt,animation:{}};function Fgt(t){var e=Js(ddt(t)?t:0,0,1);return[{type:"current",percent:e},{type:"target",percent:1-e}]}function Ngt(t){var e=t.chart,n=t.options,r=n.percent,i=n.progressStyle,o=n.color,a=n.barWidthRatio;return e.data(Fgt(r)),dht(odt({},t,{options:{xField:"1",yField:"percent",seriesField:"type",isStack:!0,widthRatio:a,interval:{style:i,color:zs(o)?[o,Lgt[1]]:o},args:{zIndexReversed:!0}}})),e.tooltip(!1),e.axis(!1),e.legend(!1),t}function zgt(t){return t.chart.coordinate("rect").transpose(),t}function jgt(t){return jct(Ngt,eht({}),zgt,Kdt,Zdt,nht())(t)}var Ggt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="process",e}return Ka(e,t),e.getDefaultOptions=function(){return Bgt},e.prototype.changeData=function(t){this.updateOption({percent:t}),this.chart.changeData(Fgt(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return jgt},e}(Idt);function Ugt(t){var e=t.chart,n=t.options,r=n.innerRadius,i=n.radius;return e.coordinate("theta",{innerRadius:r,radius:i}),t}function $gt(t,e){var n=t.chart,r=t.options,i=r.innerRadius,o=r.statistic,a=r.percent,s=r.meta;if(n.getController("annotation").clear(!0),i&&o){var l=Ul(s,["percent","formatter"])||function(t){return(100*t).toFixed(2)+"%"},u=o.content;u&&(u=odt({},u,{content:vs(u.content)?l(a):u.content})),cdt(n,{statistic:Za(Za({},o),{content:u}),plotType:"ring-progress"},{percent:a})}return e&&n.render(!0),t}function Vgt(t){return jct(Ngt,eht({}),Ugt,$gt,Kdt,Zdt,nht())(t)}var Wgt={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},Hgt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="ring-process",e}return Ka(e,t),e.getDefaultOptions=function(){return Wgt},e.prototype.changeData=function(t){this.chart.emit(Ktt.BEFORE_CHANGE_DATA,Nat.fromData(this.chart,Ktt.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(Fgt(t)),$gt({chart:this.chart,options:this.options},!0),this.chart.emit(Ktt.AFTER_CHANGE_DATA,Nat.fromData(this.chart,Ktt.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Vgt},e}(Idt);function Ygt(t){var e=t.chart,n=t.options,r=n.data,i=n.type,o=n.xField,a=n.yField,s=n.colorField,l=n.sizeField,u=n.sizeRatio,c=n.shape,d=n.color,h=n.tooltip,f=n.heatmapStyle;e.data(r);var p="polygon";"density"===i&&(p="heatmap");var g=iht(h,[o,a,s]),v=g.fields,m=g.formatter,y=1;return(u||0===u)&&(c||l?u<0||u>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):y=u:console.warn("sizeRatio is not in effect: Must define shape or sizeField first")),sht(odt({},t,{options:{type:p,colorField:s,tooltipFields:v,shapeField:l||"",label:void 0,mapping:{tooltip:m,shape:c&&(l?function(t){var e=r.map((function(t){return t[l]})),n=Math.min.apply(Math,e),i=Math.max.apply(Math,e);return[c,(Ul(t,l)-n)/(i-n),y]}:function(){return[c,1,y]}),color:d||s&&e.getTheme().sequenceColors.join("-"),style:f}}})),t}function Xgt(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return jct(eht(((e={})[o]=r,e[a]=i,e)))(t)}function qgt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return!1===r?e.axis(o,!1):e.axis(o,r),!1===i?e.axis(a,!1):e.axis(a,i),t}function Kgt(t){var e=t.chart,n=t.options,r=n.label,i=n.colorField,o=Hct(e,"density"===n.type?"heatmap":"polygon");if(r){if(i){var a=r.callback,s=Qa(r,["callback"]);o.label({fields:[i],callback:a,cfg:Qct(s)})}}else o.label(!1);return t}function Zgt(t){var e=t.chart,n=t.options,r=n.coordinate,i=n.reflect;return r&&e.coordinate({type:r.type||"rect",cfg:r.cfg}),i&&e.coordinate().reflect(i),t}function Qgt(t){return jct(Zdt,Hdt("heatmapStyle"),Xgt,Zgt,Ygt,qgt,Ydt,Xdt,Kgt,nht(),qdt,Kdt,Qdt)(t)}var Jgt,tvt=odt({},Idt.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});hst("polygon","circle",{draw:function(t,e){var n,r,i=t.x,o=t.y,a=this.parsePoints(t.points),s=Math.abs(a[2].x-a[1].x),l=Math.abs(a[1].y-a[0].y),u=Math.min(s,l)/2,c=Number(t.shape[1]),d=Number(t.shape[2]),h=u*Math.sqrt(d)*Math.sqrt(c),f=(null===(n=t.style)||void 0===n?void 0:n.fill)||t.color||(null===(r=t.defaultStyle)||void 0===r?void 0:r.fill);return e.addShape("circle",{attrs:Za(Za(Za({x:i,y:o,r:h},t.defaultStyle),t.style),{fill:f})})}}),hst("polygon","square",{draw:function(t,e){var n,r,i=t.x,o=t.y,a=this.parsePoints(t.points),s=Math.abs(a[2].x-a[1].x),l=Math.abs(a[1].y-a[0].y),u=Math.min(s,l),c=Number(t.shape[1]),d=Number(t.shape[2]),h=u*Math.sqrt(d)*Math.sqrt(c),f=(null===(n=t.style)||void 0===n?void 0:n.fill)||t.color||(null===(r=t.defaultStyle)||void 0===r?void 0:r.fill);return e.addShape("rect",{attrs:Za(Za(Za({x:i-h/2,y:o-h/2,width:h,height:h},t.defaultStyle),t.style),{fill:f})})}}),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="heatmap",e}Ka(e,t),e.getDefaultOptions=function(){return tvt},e.prototype.getSchemaAdaptor=function(){return Qgt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()}}(Idt);var evt=odt({},Idt.getDefaultOptions(),{meta:(Jgt={},Jgt.$$range$$={min:0,alias:"low-q1-median-q3-high"},Jgt),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),nvt=function(t,e){var n=t;if(Array.isArray(e)){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4];n=zl(t,(function(t){return t.$$range$$=[t[r],t[i],t[o],t[a],t[s]],t}))}return n};function rvt(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,o=n.groupField,a=n.color,s=n.tooltip,l=n.boxStyle;e.data(nvt(n.data,i));var u=ms(i)?"$$range$$":i,c=i?ms(i)?i:[i]:[],d=s;!1!==d&&(d=odt({},{fields:ms(i)?i:[]},d));var h=pht(odt({},t,{options:{xField:r,yField:u,seriesField:o,tooltip:d,rawFields:c,schema:{shape:"box",color:a,style:l}}})).ext;return o&&h.geometry.adjust("dodge"),t}function ivt(t){var e=t.chart,n=t.options,r=n.xField,i=n.data,o=n.outliersField,a=n.outliersStyle,s=n.padding;if(!o)return t;var l=e.createView({padding:s,id:"outliers_view"});return l.data(i),cht({chart:l,options:{xField:r,yField:o,point:{shape:"circle",style:a}}}),l.axis(!1),t}function ovt(t){var e,n,r=t.chart,i=t.options,o=i.meta,a=i.xAxis,s=i.yAxis,l=i.xField,u=i.yField,c=i.outliersField,d=Array.isArray(u)?"$$range$$":u,h={};if(c){var f="$$y_outliers$$";(e={})[c]={sync:f,nice:!0},e[d]={sync:f,nice:!0},h=e}var p=odt(h,o,((n={})[l]=Gct(a,Ddt),n[d]=Gct(s,Ddt),n));return r.scale(p),t}function avt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField,s=Array.isArray(a)?"$$range$$":a;return!1===r?e.axis(o,!1):e.axis(o,r),!1===i?e.axis("$$range$$",!1):e.axis(s,i),t}function svt(t){var e=t.chart,n=t.options,r=n.legend,i=n.groupField;return i?r?e.legend(i,r):e.legend(i,{position:"bottom"}):e.legend(!1),t}function lvt(t){return jct(rvt,ivt,ovt,avt,svt,Xdt,qdt,Kdt,Zdt)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="box",e}Ka(e,t),e.getDefaultOptions=function(){return evt},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options.yField,n=this.chart.views.find((function(t){return"outliers_view"===t.id}));n&&n.data(t),this.chart.changeData(nvt(t,e))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return lvt}}(Idt);var uvt=qm((function(t){var e=t.exports;t.exports.isNumber=function(t){return"number"==typeof t},t.exports.findMin=function(t){if(0===t.length)return 1/0;for(var e=t[0],n=1;n<t.length;n++)e=Math.min(e,t[n]);return e},t.exports.findMax=function(t){if(0===t.length)return-1/0;for(var e=t[0],n=1;n<t.length;n++)e=Math.max(e,t[n]);return e},t.exports.findMinMulti=function(t){for(var n=e.findMin(t[0]),r=1;r<t.length;r++)n=Math.min(n,e.findMin(t[r]));return n},t.exports.findMaxMulti=function(t){for(var n=e.findMax(t[0]),r=1;r<t.length;r++)n=Math.max(n,e.findMax(t[r]));return n},t.exports.inside=function(t,e,n){return t<=n&&n<=e}}));uvt.isNumber,uvt.findMin,uvt.findMax,uvt.findMinMulti,uvt.findMaxMulti,uvt.inside;var cvt=qm((function(t){var e=Math.log(2),n=t.exports;function r(t){return 1-Math.abs(t)}t.exports.getUnifiedMinMax=function(t,e){return n.getUnifiedMinMaxMulti([t],e)},t.exports.getUnifiedMinMaxMulti=function(t,e){e=e||{};var n=!1,r=!1,i=uvt.isNumber(e.width)?e.width:2,o=uvt.isNumber(e.size)?e.size:50,a=uvt.isNumber(e.min)?e.min:(n=!0,uvt.findMinMulti(t)),s=uvt.isNumber(e.max)?e.max:(r=!0,uvt.findMaxMulti(t)),l=(s-a)/(o-1);return n&&(a-=2*i*l),r&&(s+=2*i*l),{min:a,max:s}},t.exports.create=function(t,e){if(e=e||{},!t||0===t.length)return[];var i=uvt.isNumber(e.size)?e.size:50,o=uvt.isNumber(e.width)?e.width:2,a=n.getUnifiedMinMax(t,{size:i,width:o,min:e.min,max:e.max}),s=a.min,l=a.max-s,u=l/(i-1);if(0===l)return[{x:s,y:1}];for(var c=[],d=0;d<i;d++)c.push({x:s+d*u,y:0});var h=function(t,e){for(var n={},r=0,i=-e;i<=e;i++)r+=t(i/e),n[i]=r;return n}(r,o),f=h[o],p=h[o-1]-h[o-2],g=0;t.forEach((function(t){var e=function(t){return Math.floor((t-s)/u)}(t);if(!(e+o<0||e-o>=c.length)){var n=Math.max(e-o,0),r=e,i=Math.min(e+o,c.length-1),a=n-(e-o),l=e+o-i,d=h[-o-1+a]||0,v=h[-o-1+l]||0,m=f/(f-d-v);a>0&&(g+=m*(a-1)*p);var y=Math.max(0,e-o+1);uvt.inside(0,c.length-1,y)&&(c[y].y+=1*m*p),uvt.inside(0,c.length-1,r+1)&&(c[r+1].y-=2*m*p),uvt.inside(0,c.length-1,i+1)&&(c[i+1].y+=1*m*p)}}));var v=g,m=0,y=0;return c.forEach((function(t){m+=t.y,v+=m,t.y=v,y+=v})),y>0&&c.forEach((function(t){t.y/=y})),c},t.exports.getExpectedValueFromPdf=function(t){if(t&&0!==t.length){var e=0;return t.forEach((function(t){e+=t.x*t.y})),e}},t.exports.getXWithLeftTailArea=function(t,e){if(t&&0!==t.length){for(var n=0,r=0,i=0;i<t.length&&(r=i,!((n+=t[i].y)>=e));i++);return t[r].x}},t.exports.getPerplexity=function(t){if(t&&0!==t.length){var n=0;return t.forEach((function(t){var e=Math.log(t.y);isFinite(e)&&(n+=t.y*e)})),n=-n/e,Math.pow(2,n)}}}));function dvt(t,e){var n=t.length*e;if(0===t.length)throw new Error("quantile requires at least one data point.");if(e<0||e>1)throw new Error("quantiles must be between 0 and 1");return 1===e?t[t.length-1]:0===e?t[0]:n%1!=0?t[Math.ceil(n)-1]:t.length%2==0?(t[n-1]+t[n])/2:t[n]}function hvt(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function fvt(t,e,n,r){for(n=n||0,r=r||t.length-1;r>n;){if(r-n>600){var i=r-n+1,o=e-n+1,a=Math.log(i),s=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*s*(i-s)/i);o-i/2<0&&(l*=-1),fvt(t,e,Math.max(n,Math.floor(e-o*s/i+l)),Math.min(r,Math.floor(e+(i-o)*s/i+l)))}var u=t[e],c=n,d=r;for(hvt(t,n,e),t[r]>u&&hvt(t,n,r);c<d;){for(hvt(t,c,d),c++,d--;t[c]<u;)c++;for(;t[d]>u;)d--}t[n]===u?hvt(t,n,d):hvt(t,++d,r),d<=e&&(n=d+1),e<=d&&(r=d-1)}}function pvt(t,e){var n=t.slice();if(Array.isArray(e)){!function(t,e){for(var n=[0],r=0;r<e.length;r++)n.push(mvt(t.length,e[r]));n.push(t.length-1),n.sort(vvt);var i=[0,n.length-1];for(;i.length;){var o=Math.ceil(i.pop()),a=Math.floor(i.pop());if(!(o-a<=1)){var s=Math.floor((a+o)/2);gvt(t,n[s],Math.floor(n[a]),Math.ceil(n[o])),i.push(a,s,s,o)}}}(n,e);for(var r=[],i=0;i<e.length;i++)r[i]=dvt(n,e[i]);return r}return gvt(n,mvt(n.length,e),0,n.length-1),dvt(n,e)}function gvt(t,e,n,r){e%1==0?fvt(t,e,n,r):(fvt(t,e=Math.floor(e),n,r),fvt(t,e+1,e+1,r))}function vvt(t,e){return t-e}function mvt(t,e){var n=t*e;return 1===e?t-1:0===e?0:n%1!=0?Math.ceil(n)-1:t%2==0?n-.5:n}cvt.getUnifiedMinMax,cvt.getUnifiedMinMaxMulti,cvt.create,cvt.getExpectedValueFromPdf,cvt.getXWithLeftTailArea,cvt.getPerplexity;var yvt=function(t){return{low:Ps(t),high:Ts(t),q1:pvt(t,.25),q3:pvt(t,.75),median:pvt(t,[.5]),minMax:[Ps(t),Ts(t)],quantile:[pvt(t,.25),pvt(t,.75)]}},bvt=function(t,e){var n=cvt.create(t,e);return{violinSize:n.map((function(t){return t.y})),violinY:n.map((function(t){return t.x}))}},xvt=function(t){var e=t.xField,n=t.yField,r=t.seriesField,i=t.data,o=t.kde,a={min:o.min,max:o.max,size:o.sampleSize,width:o.width};if(!r){var s=Xs(i,e);return Object.keys(s).map((function(t){var e=s[t].map((function(t){return t[n]}));return Za(Za({x:t},bvt(e,a)),yvt(e))}))}var l=[],u=Xs(i,r);return Object.keys(u).forEach((function(t){var i=Xs(u[t],e);return Object.keys(i).forEach((function(e){var o,s=i[e].map((function(t){return t[n]}));l.push(Za(Za(((o={x:e})[r]=t,o),bvt(s,a)),yvt(s)))}))})),l},wvt=odt({},Idt.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),Cvt=["low","high","q1","q3","median"],Svt=[{type:"dodge",marginRatio:1/32}];function kvt(t){var e=t.chart,n=t.options;return e.data(xvt(n)),t}function Evt(t){var e=t.chart,n=t.options,r=n.seriesField,i=n.color,o=n.shape,a=void 0===o?"violin":o,s=n.violinStyle,l=n.tooltip,u=n.state,c=e.createView({id:"violin_view"});return function(t){var e=t.options,n=e.violin,r=e.xField,i=e.yField,o=e.seriesField,a=e.sizeField,s=iht(e.tooltip,[r,i,o,a]),l=s.fields,u=s.formatter;n&&sht(odt({},t,{options:{type:"violin",colorField:o,tooltipFields:l,mapping:Za({tooltip:u},n)}}))}({chart:c,options:{xField:"x",yField:"violinY",seriesField:r||"x",sizeField:"violinSize",tooltip:Za({fields:Cvt},l),violin:{style:s,color:i,shape:a},state:u}}),c.geometries[0].adjust(Svt),t}function Mvt(t){var e=t.chart,n=t.options,r=n.seriesField,i=n.color,o=n.tooltip,a=n.box;if(!1===a)return t;var s=e.createView({id:"min_max_view"});dht({chart:s,options:{xField:"x",yField:"minMax",seriesField:r||"x",tooltip:Za({fields:Cvt},o),state:"object"==typeof a?a.state:{},interval:{color:i,size:1,style:{lineWidth:0}}}}),s.geometries[0].adjust(Svt);var l=e.createView({id:"quantile_view"});dht({chart:l,options:{xField:"x",yField:"quantile",seriesField:r||"x",tooltip:Za({fields:Cvt},o),state:"object"==typeof a?a.state:{},interval:{color:i,size:8,style:{fillOpacity:1}}}}),l.geometries[0].adjust(Svt);var u=e.createView({id:"median_view"});return cht({chart:u,options:{xField:"x",yField:"median",seriesField:r||"x",tooltip:Za({fields:Cvt},o),state:"object"==typeof a?a.state:{},point:{color:i,size:1,style:{fill:"white",lineWidth:0}}}}),u.geometries[0].adjust(Svt),l.axis(!1),s.axis(!1),u.axis(!1),u.legend(!1),s.legend(!1),l.legend(!1),t}function Avt(t){var e,n=t.chart,r=t.options,i=r.meta,o=r.xAxis,a=r.yAxis,s=odt({},i,((e={}).x=Za(Za({sync:!0},Gct(o,Ddt)),{type:"cat"}),e.violinY=Za({sync:!0},Gct(a,Ddt)),e.minMax=Za({sync:"violinY"},Gct(a,Ddt)),e.quantile=Za({sync:"violinY"},Gct(a,Ddt)),e.median=Za({sync:"violinY"},Gct(a,Ddt)),e));return n.scale(s),t}function _vt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=qct(e,"violin_view");return!1===r?o.axis("x",!1):o.axis("x",r),!1===i?o.axis("violinY",!1):o.axis("violinY",i),e.axis(!1),t}function Tvt(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField,o=n.shape;if(!1===r)e.legend(!1);else{var a=i||"x",s=Hl(r,["selected"]);o&&o.startsWith("hollow")||Ul(s,["marker","style","lineWidth"])||$l(s,["marker","style","lineWidth"],0),e.legend(a,s),Ul(r,"selected")&&bs(e.views,(function(t){return t.legend(a,r)}))}return t}function Pvt(t){var e=qct(t.chart,"violin_view");return nht()(Za(Za({},t),{chart:e})),t}function Ivt(t){var e=t.chart,n=t.options.animation;return bs(e.views,(function(t){"boolean"==typeof n?t.animate(n):t.animate(!0),bs(t.geometries,(function(t){t.animate(n)}))})),t}function Dvt(t){return jct(Zdt,kvt,Evt,Mvt,Avt,Xdt,_vt,Tvt,qdt,Pvt,Ivt)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="violin",e}Ka(e,t),e.getDefaultOptions=function(){return wvt},e.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(xvt(this.options))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Dvt}}(Idt);var Ovt,Rvt="$$stock-range$$",Lvt=odt({},Idt.getDefaultOptions(),{tooltip:{showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(t,e,n){var r;if("x"===t){var i=n[0];r=i?i.title:e}else r=e;return{position:"y"===t?"start":"end",content:r,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function Bvt(t,e){return zl(t,(function(t){if(ms(e)){var n=e[0],r=e[1],i=e[2],o=e[3];t.trend=t[n]<=t[r]?"up":"down",t[Rvt]=[t[n],t[r],t[i],t[o]]}return t}))}function Fvt(t){var e=t.chart,n=t.options,r=n.yField,i=n.data,o=n.risingFill,a=n.fallingFill,s=n.tooltip,l=n.stockStyle;e.data(Bvt(i,r));var u=s;return!1!==u&&(u=odt({},{fields:r},u)),pht(odt({},t,{options:{schema:{shape:"candle",color:[o,a],style:l},yField:Rvt,seriesField:"trend",rawFields:r,tooltip:u}})),t}function Nvt(t){var e,n,r=t.chart,i=t.options,o=i.meta,a=i.xAxis,s=i.yAxis,l=i.xField,u=((e={})[l]={type:"timeCat",tickCount:6},e.trend={values:["up","down"]},e),c=odt(u,o,((n={})[l]=Gct(a,Ddt),n[Rvt]=Gct(s,Ddt),n));return r.scale(c),t}function zvt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField;return!1===r?e.axis(o,!1):e.axis(o,r),!1===i?e.axis(Rvt,!1):e.axis(Rvt,i),t}function jvt(t){var e=t.chart,n=t.options.tooltip;return!1!==n?e.tooltip(n):e.tooltip(!1),t}function Gvt(t){var e=t.chart,n=t.options.legend;return n?e.legend("trend",n):!1===n&&e.legend(!1),t}function Uvt(t){jct(Zdt,Fvt,Nvt,zvt,jvt,Gvt,qdt,Kdt,nht(),Jdt)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="stock",e}Ka(e,t),e.getDefaultOptions=function(){return Lvt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Uvt},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options.yField;this.chart.changeData(Bvt(t,e))}}(Idt);var $vt={appendPadding:[0,80],minSize:0,maxSize:1,meta:(Ovt={},Ovt.$$mappingValue$$={min:0,max:1,nice:!1},Ovt),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}};function Vvt(t,e,n){var r=n.yField,i=n.maxSize,o=n.minSize,a=Ul(il(e,r),[r]),s=el(i)?i:1,l=el(o)?o:0;return zl(t,(function(e,n){var i=(e[r]||0)/a;return e.$$percentage$$=i,e.$$mappingValue$$=(s-l)*i+l,e.$$conversion$$=[Ul(t,[n-1,r]),e[r]],e}))}function Wvt(t){return function(e){var n=e.chart,r=e.options.conversionTag,i=n.getOptions().data;if(r){var o=r.formatter;i.forEach((function(e,a){if(!(a<=0)){var s=t(e,a,i,{top:!0,text:{content:gs(o)?o(e,i):o,offsetX:r.offsetX,offsetY:r.offsetY,position:"end",autoRotate:!1,style:Za({textAlign:"start",textBaseline:"middle"},r.style)}});n.annotation().line(s)}}))}return e}}function Hvt(t){var e=t.chart,n=t.options,r=n.data,i=void 0===r?[]:r,o=Vvt(i,i,{yField:n.yField,maxSize:n.maxSize,minSize:n.minSize});return e.data(o),t}function Yvt(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,o=n.color,a=n.tooltip,s=n.label,l=n.shape,u=void 0===l?"funnel":l,c=n.funnelStyle,d=n.state,h=iht(a,[r,i]),f=h.fields,p=h.formatter;return sht({chart:e,options:{type:"interval",xField:r,yField:"$$mappingValue$$",colorField:r,tooltipFields:ms(f)&&f.concat(["$$percentage$$","$$conversion$$"]),mapping:{shape:u,tooltip:p,color:o,style:c},label:s,state:d}}),Hct(t.chart,"interval").adjust("symmetric"),t}function Xvt(t){var e=t.chart,n=t.options.isTransposed;return e.coordinate({type:"rect",actions:n?[]:[["transpose"],["scale",1,-1]]}),t}function qvt(t){var e=t.options.maxSize;return Wvt((function(t,n,r,i){var o=e-(e-t.$$mappingValue$$)/2;return Za(Za({},i),{start:[n-.5,o],end:[n-.5,o+.05]})}))(t),t}function Kvt(t){return jct(Hvt,Yvt,Xvt,qvt)(t)}function Zvt(t){var e,n=t.chart,r=t.options,i=r.data,o=void 0===i?[]:i,a=r.yField;return n.data(o),n.scale(((e={})[a]={sync:!0},e)),t}function Qvt(t){var e=t.chart,n=t.options,r=n.data,i=n.xField,o=n.yField,a=n.color,s=n.compareField,l=n.isTransposed,u=n.tooltip,c=n.maxSize,d=n.minSize,h=n.label,f=n.funnelStyle,p=n.state;return e.facet("mirror",{fields:[s],transpose:!l,padding:l?0:[32,0,0,0],eachView:function(t,e){var n=l?e.rowIndex:e.columnIndex;l||t.coordinate({type:"rect",actions:[["transpose"],["scale",0===n?-1:1,-1]]});var g=Vvt(e.data,r,{yField:o,maxSize:c,minSize:d});t.data(g);var v=iht(u,[i,o,s]),m=v.fields,y=v.formatter,b=l?{offset:0===n?10:-23,position:0===n?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:0===n?"end":"start"}};sht({chart:t,options:{type:"interval",xField:i,yField:"$$mappingValue$$",colorField:i,tooltipFields:ms(m)&&m.concat(["$$percentage$$","$$conversion$$"]),mapping:{shape:"funnel",tooltip:y,color:a,style:f},label:!1!==h&&odt({},b,h),state:p}})}}),t}function Jvt(t){var e=t.chart,n=t.options,r=n.conversionTag,i=n.isTransposed;return e.once("beforepaint",(function(){e.views.forEach((function(t,e){Wvt((function(t,n,o,a){var s=0===e?-1:1;return odt({},a,{start:[n-.5,t.$$mappingValue$$],end:[n-.5,t.$$mappingValue$$+.05],text:i?{style:{textAlign:"start"}}:{offsetX:!1!==r?s*r.offsetX:0,style:{textAlign:0===e?"end":"start"}}})}))(odt({},{chart:t,options:n}))}))})),t}function tmt(t){var e,n=t.chart,r=t.options,i=r.data,o=void 0===i?[]:i,a=r.yField;return n.data(o),n.scale(((e={})[a]={sync:!0},e)),t}function emt(t){var e=t.chart,n=t.options,r=n.seriesField,i=n.isTransposed;return e.facet("rect",{fields:[r],padding:[i?0:32,10,0,10],eachView:function(e,n){Kvt(odt({},t,{chart:e,options:{data:n.data}}))}}),t}function nmt(t){var e=t.chart,n=t.options,r=n.data,i=void 0===r?[]:r,o=n.yField,a=Fs(i,(function(t,e){return t+(e[o]||0)}),0),s=il(i,o)[o],l=zl(i,(function(t,e){var n=[],r=[];if(t.$$totalPercentage$$=(t[o]||0)/a,e){var l=i[e-1].$$x$$,u=i[e-1].$$y$$;n[0]=l[3],r[0]=u[3],n[1]=l[2],r[1]=u[2]}else n[0]=-.5,r[0]=1,n[1]=.5,r[1]=1;return r[2]=r[1]-t.$$totalPercentage$$,n[2]=(r[2]+1)/4,r[3]=r[2],n[3]=-n[2],t.$$x$$=n,t.$$y$$=r,t.$$percentage$$=(t[o]||0)/s,t.$$conversion$$=[Ul(i,[e-1,o]),t[o]],t}));return e.data(l),t}function rmt(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,o=n.color,a=n.tooltip,s=n.label,l=n.funnelStyle,u=n.state,c=iht(a,[r,i]),d=c.fields,h=c.formatter;return sht({chart:e,options:{type:"polygon",xField:"$$x$$",yField:"$$y$$",colorField:r,tooltipFields:ms(d)&&d.concat(["$$percentage$$","$$conversion$$"]),label:s,state:u,mapping:{tooltip:h,color:o,style:l}}}),t}function imt(t){var e=t.chart,n=t.options.isTransposed;return e.coordinate({type:"rect",actions:n?[["transpose"],["reflect","x"]]:[]}),t}function omt(t){return Wvt((function(t,e,n,r){return Za(Za({},r),{start:[t.$$x$$[1],t.$$y$$[1]],end:[t.$$x$$[1]+.05,t.$$y$$[1]]})}))(t),t}function amt(t){var e,n=t.options,r=n.compareField,i=n.xField,o=n.yField,a=n.locale,s=n.funnelStyle,l=xdt(a);return(r||s)&&(e=function(t){return odt({},r&&{lineWidth:1,stroke:"#fff"},gs(s)?s(t):s)}),odt({options:{label:r?{fields:[i,o,r,"$$percentage$$","$$conversion$$"],formatter:function(t){return""+t[o]}}:{fields:[i,o,"$$percentage$$","$$conversion$$"],offset:0,position:"middle",formatter:function(t){return t[i]+" "+t[o]}},tooltip:{title:i,formatter:function(t){return{name:t[i],value:t[o]}}},conversionTag:{formatter:function(t){return l.get(["conversionTag","label"])+": "+Dht.apply(void 0,t.$$conversion$$)}}}},t,{options:{funnelStyle:e}})}function smt(t){var e=t.options,n=e.compareField,r=e.dynamicHeight;return e.seriesField?function(t){return jct(tmt,emt)(t)}(t):n?function(t){return jct(Zvt,Qvt,Jvt)(t)}(t):r?function(t){return jct(nmt,rmt,imt,omt)(t)}(t):Kvt(t)}function lmt(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return jct(eht(((e={})[o]=r,e[a]=i,e)))(t)}function umt(t){return t.chart.axis(!1),t}function cmt(t){var e=t.chart,n=t.options.legend;return!1===n?e.legend(!1):e.legend(n),t}function dmt(t){return jct(amt,smt,lmt,umt,Xdt,qdt,cmt,Kdt,Zdt,nht())(t)}var hmt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="funnel",e}return Ka(e,t),e.getDefaultOptions=function(){return $vt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return dmt},e.prototype.setState=function(t,e,n){void 0===n&&(n=!0),bs(Xct(this.chart),(function(r){e(r.getData())&&r.setState(t,n)}))},e.prototype.getStates=function(){var t=Xct(this.chart),e=[];return bs(t,(function(t){var n=t.getData();bs(t.getStates(),(function(r){e.push({data:n,state:r,geometry:t.geometry,element:t})}))})),e},e.CONVERSATION_FIELD="$$conversion$$",e.PERCENT_FIELD="$$percentage$$",e.TOTAL_PERCENT_FIELD="$$totalPercentage$$",e}(Idt);function fmt(t){return[{percent:t,type:"liquid"}]}function pmt(t){var e=t.chart,n=t.options,r=n.percent,i=n.liquidStyle,o=n.radius,a=n.outline,s=n.wave,l=n.shape;e.scale({percent:{min:0,max:1}}),e.data(fmt(r));var u=n.color||e.getTheme().defaultColor,c=dht(odt({},t,{options:{xField:"type",yField:"percent",widthRatio:o,interval:{color:u,style:i,shape:"liquid-fill-gauge"}}})).ext.geometry,d={radius:o,outline:a,wave:s,shape:l,background:e.getTheme().background};return c.customInfo(d),e.legend(!1),e.axis(!1),e.tooltip(!1),t}function gmt(t,e){var n=t.chart,r=t.options,i=r.statistic,o=r.percent,a=r.meta;n.getController("annotation").clear(!0);var s=Ul(a,["percent","formatter"])||function(t){return(100*t).toFixed(2)+"%"},l=i.content;return l&&(l=odt({},l,{content:vs(l.content)?s(o):l.content})),cdt(n,{statistic:Za(Za({},i),{content:l}),plotType:"liquid"},{percent:o}),e&&n.render(!0),t}function vmt(t){return jct(Zdt,Hdt("liquidStyle"),pmt,gmt,eht({}),Kdt,qdt)(t)}var mmt={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"};function ymt(t,e,n){return t+(e-t)*n}function bmt(t,e,n,r){return 0===e?[[t+.5*n/Math.PI/2,r/2],[t+.5*n/Math.PI,r],[t+n/4,r]]:1===e?[[t+.5*n/Math.PI/2*(Math.PI-2),r],[t+.5*n/Math.PI/2*(Math.PI-1),r/2],[t+n/4,0]]:2===e?[[t+.5*n/Math.PI/2,-r/2],[t+.5*n/Math.PI,-r],[t+n/4,-r]]:[[t+.5*n/Math.PI/2*(Math.PI-2),-r],[t+.5*n/Math.PI/2*(Math.PI-1),-r/2],[t+n/4,0]]}function xmt(t,e,n,r,i,o,a){for(var s=4*Math.ceil(2*t/n*4),l=[],u=r;u<2*-Math.PI;)u+=2*Math.PI;for(;u>0;)u-=2*Math.PI;var c=o-t+(u=u/Math.PI/2*n)-2*t;l.push(["M",c,e]);for(var d=0,h=0;h<s;++h){var f=bmt(h*n/4,h%4,n,i);l.push(["C",f[0][0]+c,-f[0][1]+e,f[1][0]+c,-f[1][1]+e,f[2][0]+c,-f[2][1]+e]),h===s-1&&(d=f[2][0])}return l.push(["L",d+c,a+t]),l.push(["L",c,a+t]),l.push(["Z"]),l}function wmt(t,e,n,r){var i=2*n/3,o=Math.max(i,r),a=i/2,s=t,l=a+e-o/2,u=Math.asin(a/(.85*(o-a))),c=Math.sin(u)*a,d=Math.cos(u)*a,h=s-d,f=l+c,p=t,g=l+a/Math.sin(u);return"\n      M "+h+" "+f+"\n      A "+a+" "+a+" 0 1 1 "+(h+2*d)+" "+f+"\n      Q "+p+" "+g+" "+t+" "+(e+o/2)+"\n      Q "+p+" "+g+" "+h+" "+f+"\n      Z \n    "}function Cmt(t,e,n,r){var i=n/2,o=r/2;return"\n      M "+t+" "+(e-o)+" \n      a "+i+" "+o+" 0 1 0 0 "+2*o+"\n      a "+i+" "+o+" 0 1 0 0 "+2*-o+"\n      Z\n    "}function Smt(t,e,n,r){var i=r/2,o=n/2;return"\n      M "+t+" "+(e-i)+"\n      L "+(t+o)+" "+e+"\n      L "+t+" "+(e+i)+"\n      L "+(t-o)+" "+e+"\n      Z\n    "}function kmt(t,e,n,r){var i=r/2,o=n/2;return"\n      M "+t+" "+(e-i)+"\n      L "+(t+o)+" "+(e+i)+"\n      L "+(t-o)+" "+(e+i)+"\n      Z\n    "}function Emt(t,e,n,r){var i=r/2,o=n/2*.618;return"\n      M "+(t-o)+" "+(e-i)+"\n      L "+(t+o)+" "+(e-i)+"\n      L "+(t+o)+" "+(e+i)+"\n      L "+(t-o)+" "+(e+i)+"\n      Z\n    "}function Mmt(t){var e=t.data,n=t.xField,r=t.measureField,i=t.rangeField,o=t.targetField,a=t.layout,s=[],l=[];e.forEach((function(t,e){var a;t[i].sort((function(t,e){return t-e})),t[i].forEach((function(r,o){var a,l=0===o?r:t[i][o]-t[i][o-1];s.push(((a={rKey:i+"_"+o})[n]=n?t[n]:String(e),a[i]=l,a))})),t[r].forEach((function(i,o){var a;s.push(((a={mKey:t[r].length>1?r+"_"+o:""+r})[n]=n?t[n]:String(e),a[r]=i,a))})),s.push(((a={tKey:""+o})[n]=n?t[n]:String(e),a[o]=t[o],a)),l.push(t[i],t[r],t[o])}));var u=Math.min.apply(Math,l.flat(1/0)),c=Math.max.apply(Math,l.flat(1/0));return u=u>0?0:u,"vertical"===a&&s.reverse(),{min:u,max:c,ds:s}}function Amt(t){var e=t.chart,n=t.options,r=n.bulletStyle,i=n.targetField,o=n.rangeField,a=n.measureField,s=n.xField,l=n.color,u=n.layout,c=n.size,d=n.label,h=Mmt(n),f=h.min,p=h.max,g=h.ds;return e.data(g),dht(odt({},t,{options:{xField:s,yField:o,seriesField:"rKey",isStack:!0,label:Ul(d,"range"),interval:{color:Ul(l,"range"),style:Ul(r,"range"),size:Ul(c,"range")}}})),e.geometries[0].tooltip(!1),dht(odt({},t,{options:{xField:s,yField:a,seriesField:"mKey",isStack:!0,label:Ul(d,"measure"),interval:{color:Ul(l,"measure"),style:Ul(r,"measure"),size:Ul(c,"measure")}}})),cht(odt({},t,{options:{xField:s,yField:i,seriesField:"tKey",label:Ul(d,"target"),point:{color:Ul(l,"target"),style:Ul(r,"target"),size:gs(Ul(c,"target"))?function(t){return Ul(c,"target")(t)/2}:Ul(c,"target")/2,shape:"horizontal"===u?"line":"hyphen"}}})),"horizontal"===u&&e.coordinate().transpose(),Za(Za({},t),{ext:{data:{min:f,max:p}}})}function _mt(t){var e,n,r=t.options,i=t.ext,o=r.xAxis,a=r.yAxis,s=r.targetField,l=r.rangeField,u=r.measureField,c=r.xField,d=i.data;return jct(eht(((e={})[c]=o,e[u]=a,e),((n={})[u]={min:null==d?void 0:d.min,max:null==d?void 0:d.max,sync:!0},n[s]={sync:""+u},n[l]={sync:""+u},n)))(t)}function Tmt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.measureField,s=n.rangeField,l=n.targetField;return e.axis(""+s,!1),e.axis(""+l,!1),!1===r?e.axis(""+o,!1):e.axis(""+o,r),!1===i?e.axis(""+a,!1):e.axis(""+a,i),t}function Pmt(t){var e=t.chart,n=t.options.legend;return e.removeInteraction("legend-filter"),e.legend(n),e.legend("rKey",!1),e.legend("mKey",!1),e.legend("tKey",!1),t}function Imt(t){var e=t.chart,n=t.options,r=n.label,i=n.measureField,o=n.targetField,a=n.rangeField,s=e.geometries,l=s[0],u=s[1],c=s[2];return Ul(r,"range")?l.label(""+a,Za({layout:[{type:"limit-in-plot"}]},Qct(r.range))):l.label(!1),Ul(r,"measure")?u.label(""+i,Za({layout:[{type:"limit-in-plot"}]},Qct(r.measure))):u.label(!1),Ul(r,"target")?c.label(""+o,Za({layout:[{type:"limit-in-plot"}]},Qct(r.target))):c.label(!1),t}function Dmt(t){jct(Amt,_mt,Tmt,Pmt,Zdt,Imt,Xdt,qdt,Kdt)(t)}hst("interval","liquid-fill-gauge",{draw:function(t,e){var n=t.customInfo,r=n,i=r.radius,o=r.shape,a=r.background,s=n.outline,l=n.wave,u=s.border,c=s.distance,d=l.count,h=l.length,f=Fs(t.points,(function(t,e){return Math.min(t,e.x)}),1/0),p=this.parsePoint({x:.5,y:.5}),g=this.parsePoint({x:f,y:.5}),v=p.x-g.x,m=Math.min(v,g.y*i),y=function(t){var e=Za({opacity:1},t.style);return t.color&&!e.fill&&(e.fill=t.color),e}(t),b=function(t){var e=Tl({},{fill:"#fff",fillOpacity:0,lineWidth:4},t.style);return t.color&&!e.stroke&&(e.stroke=t.color),el(t.opacity)&&(e.opacity=e.strokeOpacity=t.opacity),e}(Tl({},t,s)),x=m-u/2,w={pin:wmt,circle:Cmt,diamond:Smt,triangle:kmt,rect:Emt},C=("function"==typeof o?o:w[o]||w.circle)(p.x,p.y,2*x,2*x),S=e.addGroup({name:"waves"}),k=S.setClip({type:"path",attrs:{path:C}});return function(t,e,n,r,i,o,a,s,l){for(var u=i.fill,c=i.opacity,d=a.getBBox(),h=d.maxX-d.minX,f=d.maxY-d.minY,p=0;p<r;p++){var g=r<=1?0:p/(r-1),v=o.addShape("path",{name:"waterwave-path",attrs:{path:xmt(s,d.minY+f*n,l,0,h/32,t,e),fill:u,opacity:ymt(.2,.9,g)*c}});try{var m=sft([["t",l,0]]);v.stopAnimate(),v.animate({matrix:m},{duration:ymt(2500,5e3,g),repeat:!0})}catch(PCt){console.warn("off-screen group animate error!")}}}(p.x,p.y,1-t.points[1].y,d,y,S,k,2*m,h),e.addShape("path",{name:"distance",attrs:{path:C,fill:"transparent",lineWidth:u+2*c,stroke:"transparent"===a?"#fff":a}}),e.addShape("path",{name:"wrap",attrs:Tl(b,{path:C,fill:"transparent",lineWidth:u})}),e}}),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="liquid",e}Ka(e,t),e.getDefaultOptions=function(){return mmt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.changeData=function(t){this.chart.emit(Ktt.BEFORE_CHANGE_DATA,Nat.fromData(this.chart,Ktt.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(fmt(t)),gmt({chart:this.chart,options:this.options},!0),this.chart.emit(Ktt.AFTER_CHANGE_DATA,Nat.fromData(this.chart,Ktt.AFTER_CHANGE_DATA,null))},e.prototype.getSchemaAdaptor=function(){return vmt}}(Idt);var Omt=odt({},Idt.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}});!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="bullet",e}Ka(e,t),e.getDefaultOptions=function(){return Omt},e.prototype.changeData=function(t){this.updateOption({data:t});var e=Mmt(this.options),n=e.min,r=e.max,i=e.ds;_mt({options:this.options,ext:{data:{min:n,max:r}},chart:this.chart}),this.chart.changeData(i)},e.prototype.getSchemaAdaptor=function(){return Dmt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()}}(Idt);function Rmt(t,e){var n=t.field,r=t.fields;if(zs(n))return n;if(ms(n))return console.warn("Invalid field: it must be a string!"),n[0];if(console.warn("Invalid field: it must be a string! will try to get fields instead."),zs(r))return r;if(ms(r)&&r.length)return r[0];if(e)return e;throw new TypeError("Invalid field: it must be a string!")}function Lmt(t){var e,n,r=[];t&&t.each?t.each((function(t){var i,o;t.parent!==e?(e=t.parent,n=0):n+=1;var a=ds(((null===(i=t.ancestors)||void 0===i?void 0:i.call(t))||[]).map((function(t){return r.find((function(e){return e.name===t.name}))||t})),(function(e){var n=e.depth;return n>0&&n<t.depth}));t.nodeAncestor=a,t.childNodeCount=(null===(o=t.children)||void 0===o?void 0:o.length)||0,t.nodeIndex=n,r.push(t)})):t&&t.eachNode&&t.eachNode((function(t){r.push(t)}));return r}var Bmt=["path","nodeIndex","nodeAncestor","childNodeCount","name","depth","height"],Fmt=odt({},Idt.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}}),Nmt={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},zmt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="drill-down",e.historyCache=[],e.breadCrumbGroup=null,e.breadCrumbCfg=Nmt,e}return Ka(e,t),e.prototype.click=function(){var t=Ul(this.context,["event","data","data"]);if(!t)return!1;this.drill(t),this.drawBreadCrumb()},e.prototype.resetPosition=function(){if(this.breadCrumbGroup){var t=this.context.view.getCoordinate(),e=this.breadCrumbGroup,n=e.getBBox(),r=this.getButtonCfg().position,i={x:t.start.x,y:t.end.y-(n.height+10)};t.isPolar&&(i={x:0,y:0}),"bottom-left"===r&&(i={x:t.start.x,y:t.start.y});var o=Rst.transform(null,[["t",i.x+0,i.y+n.height+5]]);e.setMatrix(o)}},e.prototype.reset=function(){this.historyCache[0]&&this.back(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},e.prototype.drill=function(t){var e=this.context.view,n=Ul(e,["interactions","drill-down","cfg","transformData"],(function(t){return t})),r=n(Za({data:t.data},t["hierarchy-data-transform-params"]));e.changeData(r);for(var i=[],o=t;o;){var a=o.data;i.unshift({id:a.name+"_"+o.height+"_"+o.depth,name:a.name,children:n(Za({data:a},t["hierarchy-data-transform-params"]))}),o=o.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(i)},e.prototype.back=function(t){if(t&&!(t.length<=0)){var e=this.context.view,n=Vs(t).children;e.changeData(n),t.length>1?(this.historyCache=t,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},e.prototype.getButtonCfg=function(){var t=this.context.view,e=Ul(t,["interactions","drill-down","cfg","drillDownConfig"]);return odt(this.breadCrumbCfg,null==e?void 0:e.breadCrumb,this.cfg)},e.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},e.prototype.drawBreadCrumbGroup=function(){var t=this,e=this.getButtonCfg(),n=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:"drilldown-bread-crumb"});var r=0;n.forEach((function(i,o){var a=t.breadCrumbGroup.addShape({type:"text",id:i.id,name:"drilldown-bread-crumb_"+i.name+"_text",attrs:Za(Za({text:0!==o||vs(e.rootText)?i.name:e.rootText},e.textStyle),{x:r,y:0})}),s=a.getBBox();if(r+=s.width+4,a.on("click",(function(e){var r,i=e.target.get("id");if(i!==(null===(r=Vs(n))||void 0===r?void 0:r.id)){var o=n.slice(0,n.findIndex((function(t){return t.id===i}))+1);t.back(o)}})),a.on("mouseenter",(function(t){var r;t.target.get("id")!==(null===(r=Vs(n))||void 0===r?void 0:r.id)?a.attr(e.activeTextStyle):a.attr({cursor:"default"})})),a.on("mouseleave",(function(){a.attr(e.textStyle)})),o<n.length-1){var l=t.breadCrumbGroup.addShape({type:"text",name:e.name+"_"+i.name+"_divider",attrs:Za(Za({text:e.dividerText},e.textStyle),{x:r,y:0})}).getBBox();r+=l.width+4}}))},e.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},e.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),t.prototype.destroy.call(this)},e}(bot);function jmt(t,e){return t.parent===e.parent?1:2}function Gmt(t,e){return t+e.x}function Umt(t,e){return Math.max(t,e.y)}function $mt(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Vmt(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=Hmt)):void 0===e&&(e=Wmt);for(var n,r,i,o,a,s=new qmt(t),l=[s];n=l.pop();)if((i=e(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)l.push(r=i[o]=new qmt(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Xmt)}function Wmt(t){return t.children}function Hmt(t){return Array.isArray(t)?t[1]:null}function Ymt(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function Xmt(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function qmt(t){this.data=t,this.depth=this.height=0,this.parent=null}function Kmt(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(Array.from(t))).length,o=[];r<i;)e=t[r],n&&Jmt(n,e)?++r:(n=eyt(o=Zmt(o,e)),r=0);return n}function Zmt(t,e){var n,r;if(tyt(e,t))return[e];for(n=0;n<t.length;++n)if(Qmt(e,t[n])&&tyt(nyt(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Qmt(nyt(t[n],t[r]),e)&&Qmt(nyt(t[n],e),t[r])&&Qmt(nyt(t[r],e),t[n])&&tyt(ryt(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Qmt(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function Jmt(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function tyt(t,e){for(var n=0;n<e.length;++n)if(!Jmt(t,e[n]))return!1;return!0}function eyt(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return nyt(t[0],t[1]);case 3:return ryt(t[0],t[1],t[2])}var e}function nyt(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,l=o-n,u=a-r,c=s-i,d=Math.sqrt(l*l+u*u);return{x:(n+o+l/d*c)/2,y:(r+a+u/d*c)/2,r:(d+i+s)/2}}function ryt(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,l=e.r,u=n.x,c=n.y,d=n.r,h=r-a,f=r-u,p=i-s,g=i-c,v=l-o,m=d-o,y=r*r+i*i-o*o,b=y-a*a-s*s+l*l,x=y-u*u-c*c+d*d,w=f*p-h*g,C=(p*x-g*b)/(2*w)-r,S=(g*v-p*m)/w,k=(f*b-h*x)/(2*w)-i,E=(h*m-f*v)/w,M=S*S+E*E-1,A=2*(o+C*S+k*E),_=C*C+k*k-o*o,T=-(M?(A+Math.sqrt(A*A-4*M*_))/(2*M):_/A);return{x:r+C+S*T,y:i+k+E*T,r:T}}function iyt(t,e,n){var r,i,o,a,s=t.x-e.x,l=t.y-e.y,u=s*s+l*l;u?(i=e.r+n.r,i*=i,a=t.r+n.r,i>(a*=a)?(r=(u+a-i)/(2*u),o=Math.sqrt(Math.max(0,a/u-r*r)),n.x=t.x-r*s-o*l,n.y=t.y-r*l+o*s):(r=(u+i-a)/(2*u),o=Math.sqrt(Math.max(0,i/u-r*r)),n.x=e.x+r*s-o*l,n.y=e.y+r*l+o*s)):(n.x=e.x+n.r,n.y=e.y)}function oyt(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function ayt(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function syt(t){this._=t,this.next=null,this.previous=null}function lyt(t){if(!(o=(e=t,t="object"==typeof e&&"length"in e?e:Array.from(e)).length))return 0;var e,n,r,i,o,a,s,l,u,c,d,h;if((n=t[0]).x=0,n.y=0,!(o>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;iyt(r,n,i=t[2]),n=new syt(n),r=new syt(r),i=new syt(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;t:for(l=3;l<o;++l){iyt(n._,r._,i=t[l]),i=new syt(i),u=r.next,c=n.previous,d=r._.r,h=n._.r;do{if(d<=h){if(oyt(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue t}d+=u._.r,u=u.next}else{if(oyt(c._,i._)){(n=c).next=r,r.previous=n,--l;continue t}h+=c._.r,c=c.previous}}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=ayt(n);(i=i.next)!==r;)(s=ayt(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Kmt(n),l=0;l<o;++l)(n=t[l]).x-=i.x,n.y-=i.y;return i.r}function uyt(t){return null==t?null:cyt(t)}function cyt(t){if("function"!=typeof t)throw new Error;return t}function dyt(){return 0}function hyt(t){return function(){return t}}function fyt(t){return Math.sqrt(t.value)}function pyt(){var t=null,e=1,n=1,r=dyt;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(gyt(t)).eachAfter(vyt(r,.5)).eachBefore(myt(1)):i.eachBefore(gyt(fyt)).eachAfter(vyt(dyt,1)).eachAfter(vyt(r,i.r/Math.min(e,n))).eachBefore(myt(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=uyt(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:hyt(+t),i):r},i}function gyt(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function vyt(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,s=t(n)*e||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=lyt(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function myt(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function yyt(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function byt(t,e,n,r,i){for(var o,a=t.children,s=-1,l=a.length,u=t.value&&(r-e)/t.value;++s<l;)(o=a[s]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*u}function xyt(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(function(t,e){return function(r){r.children&&byt(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(e,o)),r&&i.eachBefore(yyt),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i}qmt.prototype=Vmt.prototype={constructor:qmt,count:function(){return this.eachAfter($mt)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,o=this,a=[o],s=[],l=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)t.call(e,o,++l,this);return this},eachBefore:function(t,e){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(t.call(e,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return Vmt(this).eachBefore(Ymt)},[Symbol.iterator]:function*(){var t,e,n,r,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n])}while(o.length)}};var wyt={depth:-1},Cyt={};function Syt(t){return t.id}function kyt(t){return t.parentId}function Eyt(t,e){return t.parent===e.parent?1:2}function Myt(t){var e=t.children;return e?e[0]:t.t}function Ayt(t){var e=t.children;return e?e[e.length-1]:t.t}function _yt(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Tyt(t,e,n){return t.a.parent===e.parent?t.a:n}function Pyt(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function Iyt(t,e,n,r,i){for(var o,a=t.children,s=-1,l=a.length,u=t.value&&(i-n)/t.value;++s<l;)(o=a[s]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*u}Pyt.prototype=Object.create(qmt.prototype);var Dyt=(1+Math.sqrt(5))/2;function Oyt(t,e,n,r,i,o){for(var a,s,l,u,c,d,h,f,p,g,v,m=[],y=e.children,b=0,x=0,w=y.length,C=e.value;b<w;){l=i-n,u=o-r;do{c=y[x++].value}while(!c&&x<w);for(d=h=c,v=c*c*(g=Math.max(u/l,l/u)/(C*t)),p=Math.max(h/v,v/d);x<w;++x){if(c+=s=y[x].value,s<d&&(d=s),s>h&&(h=s),v=c*c*g,(f=Math.max(h/v,v/d))>p){c-=s;break}p=f}m.push(a={value:c,dice:l<u,children:y.slice(b,x)}),a.dice?byt(a,n,r,i,C?r+=u*c/C:o):Iyt(a,n,r,C?n+=l*c/C:i,o),C-=c,b=x}return m}var Ryt=function t(e){function n(t,n,r,i,o){Oyt(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Dyt);function Lyt(){var t=Ryt,e=!1,n=1,r=1,i=[0],o=dyt,a=dyt,s=dyt,l=dyt,u=dyt;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(d),i=[0],e&&t.eachBefore(yyt),t}function d(e){var n=i[e.depth],r=e.x0+n,c=e.y0+n,d=e.x1-n,h=e.y1-n;d<r&&(r=d=(r+d)/2),h<c&&(c=h=(c+h)/2),e.x0=r,e.y0=c,e.x1=d,e.y1=h,e.children&&(n=i[e.depth+1]=o(e)/2,r+=u(e)-n,c+=a(e)-n,(d-=s(e)-n)<r&&(r=d=(r+d)/2),(h-=l(e)-n)<c&&(c=h=(c+h)/2),t(e,r,c,d,h))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],r=+t[1],c):[n,r]},c.tile=function(e){return arguments.length?(t=cyt(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:hyt(+t),c):o},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:hyt(+t),c):a},c.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:hyt(+t),c):s},c.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:hyt(+t),c):l},c.paddingLeft=function(t){return arguments.length?(u="function"==typeof t?t:hyt(+t),c):u},c}var Byt=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,l,u,c,d=-1,h=a.length,f=t.value;++d<h;){for(l=(s=a[d]).children,u=s.value=0,c=l.length;u<c;++u)s.value+=l[u].value;s.dice?byt(s,n,r,i,f?r+=(o-r)*s.value/f:o):Iyt(s,n,r,f?n+=(i-n)*s.value/f:i,o),f-=s.value}else t._squarify=a=Oyt(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Dyt),Fyt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",cluster:function(){var t=jmt,e=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(Gmt,0)/t.length}(n),e.y=function(t){return 1+t.reduce(Umt,0)}(n)):(e.x=o?a+=t(e,o):0,e.y=0,o=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),u=s.x-t(s,l)/2,c=l.x+t(l,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-u)/(c-u)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},hierarchy:Vmt,pack:pyt,packSiblings:function(t){return lyt(t),t},packEnclose:Kmt,partition:xyt,stratify:function(){var t=Syt,e=kyt;function n(n){var r,i,o,a,s,l,u,c=Array.from(n),d=c.length,h=new Map;for(i=0;i<d;++i)r=c[i],s=c[i]=new qmt(r),null!=(l=t(r,i,n))&&(l+="")&&(u=s.id=l,h.set(u,h.has(u)?Cyt:s)),null!=(l=e(r,i,n))&&(l+="")&&(s.parent=l);for(i=0;i<d;++i)if(l=(s=c[i]).parent){if(!(a=h.get(l)))throw new Error("missing: "+l);if(a===Cyt)throw new Error("ambiguous: "+l);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=wyt,o.eachBefore((function(t){t.depth=t.parent.depth+1,--d})).eachBefore(Xmt),o.parent=null,d>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=cyt(e),n):t},n.parentId=function(t){return arguments.length?(e=cyt(t),n):e},n},tree:function(){var t=Eyt,e=1,n=1,r=null;function i(i){var l=function(t){for(var e,n,r,i,o,a=new Pyt(t,0),s=[a];e=s.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new Pyt(r[i],i)),n.parent=e;return(a.parent=new Pyt(null,0)).children=[a],a}(i);if(l.eachAfter(o),l.parent.m=-l.z,l.eachBefore(a),r)i.eachBefore(s);else{var u=i,c=i,d=i;i.eachBefore((function(t){t.x<u.x&&(u=t),t.x>c.x&&(c=t),t.depth>d.depth&&(d=t)}));var h=u===c?1:t(u,c)/2,f=h-u.x,p=e/(c.x+h+f),g=n/(d.depth||1);i.eachBefore((function(t){t.x=(t.x+f)*p,t.y=t.depth*g}))}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,a=e,s=n,l=o.parent.children[0],u=o.m,c=a.m,d=s.m,h=l.m;s=Ayt(s),o=Myt(o),s&&o;)l=Myt(l),(a=Ayt(a)).a=e,(i=s.z+d-o.z-u+t(s._,o._))>0&&(_yt(Tyt(s,e,r),e,i),u+=i,c+=i),d+=s.m,u+=o.m,h+=l.m,c+=a.m;s&&!Ayt(a)&&(a.t=s,a.m+=d-c),o&&!Myt(l)&&(l.t=o,l.m+=u-h,r=e)}return r}(e,i,e.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},treemap:Lyt,treemapBinary:function(t,e,n,r,i){var o,a,s=t.children,l=s.length,u=new Array(l+1);for(u[0]=a=o=0;o<l;++o)u[o+1]=a+=s[o].value;!function t(e,n,r,i,o,a,l){if(e>=n-1){var c=s[e];return c.x0=i,c.y0=o,c.x1=a,void(c.y1=l)}var d=u[e],h=r/2+d,f=e+1,p=n-1;for(;f<p;){var g=f+p>>>1;u[g]<h?f=g+1:p=g}h-u[f-1]<u[f]-h&&e+1<f&&--f;var v=u[f]-d,m=r-v;if(a-i>l-o){var y=r?(i*m+a*v)/r:a;t(e,f,v,i,o,y,l),t(f,n,m,y,o,a,l)}else{var b=r?(o*m+l*v)/r:l;t(e,f,v,i,o,a,b),t(f,n,m,i,b,a,l)}}(0,l,t.value,e,n,r,i)},treemapDice:byt,treemapSlice:Iyt,treemapSliceDice:function(t,e,n,r,i){(1&t.depth?Iyt:byt)(t,e,n,r,i)},treemapSquarify:Ryt,treemapResquarify:Byt}),Nyt={field:"value",size:[1,1],round:!1,padding:0,sort:function(t,e){return e.value-t.value},as:["x","y"],ignoreParentValue:!0};function zyt(t,e){var n,r=(e=Tl({},Nyt,e)).as;if(!ms(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{n=Rmt(e)}catch(PCt){console.warn(PCt)}var i,o=(i=t,xyt().size(e.size).round(e.round).padding(e.padding)(Vmt(i).sum((function(t){return Ql(t.children)?e.ignoreParentValue?0:t[n]-Fs(t.children,(function(t,e){return t+e[n]}),0):t[n]})).sort(e.sort))),a=r[0],s=r[1];return o.each((function(t){var e,n;t[a]=[t.x0,t.x1,t.x1,t.x0],t[s]=[t.y1,t.y1,t.y0,t.y0],t.name=t.name||(null===(e=t.data)||void 0===e?void 0:e.name)||(null===(n=t.data)||void 0===n?void 0:n.label),t.data.name=t.name,["x0","x1","y0","y1"].forEach((function(e){-1===r.indexOf(e)&&delete t[e]}))})),Lmt(o)}var jyt,Gyt={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(t,e){return e.value-t.value},ratio:.5*(1+Math.sqrt(5))};function Uyt(t,e){var n,r=(e=Tl({},Gyt,e)).as;if(!ms(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{n=Rmt(e)}catch(PCt){console.warn(PCt)}var i,o,a,s=(i=e.tile,o=e.ratio,"treemapSquarify"===i?Fyt[i].ratio(o):Fyt[i]),l=(a=t,Lyt().tile(s).size(e.size).round(e.round).padding(e.padding).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft)(Vmt(a).sum((function(t){return e.ignoreParentValue&&t.children?0:t[n]})).sort(e.sort))),u=r[0],c=r[1];return l.each((function(t){t[u]=[t.x0,t.x1,t.x1,t.x0],t[c]=[t.y1,t.y1,t.y0,t.y0],["x0","x1","y0","y1"].forEach((function(e){-1===r.indexOf(e)&&delete t[e]}))})),Lmt(l)}function $yt(t){var e=t.data,n=t.colorField,r=t.rawFields,i=t.hierarchyConfig,o=void 0===i?{}:i,a={partition:zyt,treemap:Uyt},s=t.seriesField,l=t.type||"partition",u=a[l](e,Za(Za({field:s||"value"},o),{type:"hierarchy."+l,as:["x","y"]})),c=[];return u.forEach((function(t){var e,i,a,l,u,d;if(0===t.depth)return null;for(var h=t.data.name,f=Za({},t);f.depth>1;)h=(null===(i=f.parent.data)||void 0===i?void 0:i.name)+" / "+h,f=f.parent;var p=Za(Za(Za({},Gct(t.data,is(r||[],[o.field]))),((e={}).path=h,e["ancestor-node"]=f.data.name,e)),t);s&&(p[s]=t.data[s]||(null===(l=null===(a=t.parent)||void 0===a?void 0:a.data)||void 0===l?void 0:l[s])),n&&(p[n]=t.data[n]||(null===(d=null===(u=t.parent)||void 0===u?void 0:u.data)||void 0===d?void 0:d[n])),p.ext=o,p["hierarchy-data-transform-params"]={hierarchyConfig:o,colorField:n,rawFields:r},c.push(p)})),c}function Vyt(t){var e,n=t.chart,r=t.options,i=r.color,o=r.colorField,a=void 0===o?"ancestor-node":o,s=r.sunburstStyle,l=r.rawFields,u=void 0===l?[]:l,c=$yt(r);return n.data(c),s&&(e=function(t){return odt({},{fillOpacity:Math.pow(.85,t.depth)},gs(s)?s(t):s)}),hht(odt({},t,{options:{xField:"x",yField:"y",seriesField:a,rawFields:Gs(is(Bmt,u)),polygon:{color:i,style:e}}})),t}function Wyt(t){return t.chart.axis(!1),t}function Hyt(t){return t.chart.legend(!1),t}function Yyt(t){var e=t.chart,n=t.options.label,r=Hct(e,"polygon");if(n){var i=n.fields,o=void 0===i?["name"]:i,a=n.callback,s=Qa(n,["fields","callback"]);r.label({fields:o,callback:a,cfg:Qct(s)})}else r.label(!1);return t}function Xyt(t){var e=t.chart,n=t.options,r=n.innerRadius,i=n.radius,o=n.reflect,a=e.coordinate({type:"polar",cfg:{innerRadius:r,radius:i}});return o&&a.reflect(o),t}function qyt(t){var e,n=t.options,r=n.hierarchyConfig,i=n.meta;return jct(eht({},((e={}).value=Ul(i,Ul(r,["field"],"value")),e)))(t)}function Kyt(t){var e=t.chart,n=t.options.tooltip;if(!1===n)e.tooltip(!1);else{var r=n;Ul(n,"fields")||(r=odt({},{customItems:function(t){return t.map((function(t){var n=Ul(e.getOptions(),"scales"),r=Ul(n,["path","formatter"],(function(t){return t})),i=Ul(n,["value","formatter"],(function(t){return t}));return Za(Za({},t),{name:r(t.data.path),value:i(t.data.value)})}))}},r)),e.tooltip(r)}return t}function Zyt(t){var e=t.drilldown,n=t.interactions,r=void 0===n?[]:n;return(null==e?void 0:e.enabled)?odt({},t,{interactions:is(r,[{type:"drill-down",cfg:{drillDownConfig:e,transformData:$yt}}])}):t}function Qyt(t){var e=t.chart,n=t.options,r=n.drilldown;return qdt({chart:e,options:Zyt(n)}),(null==r?void 0:r.enabled)&&(e.appendPadding=vdt(e.appendPadding,Ul(r,["breadCrumb","position"]))),t}function Jyt(t){return jct(Zdt,Hdt("sunburstStyle"),Vyt,Wyt,qyt,Hyt,Xyt,Kyt,Yyt,Qyt,Kdt,nht())(t)}function tbt(t){var e=Ul(t,["event","data","data"],{});return ms(e.children)&&e.children.length>0}Cot("drill-down-action",zmt),lat("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:tbt},{trigger:"element:mouseleave",action:"cursor:default"}],start:[{trigger:"element:click",isEnable:tbt,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]}]}),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="sunburst",e}Ka(e,t),e.getDefaultOptions=function(){return Fmt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Jyt},e.SUNBURST_ANCESTOR_FIELD="ancestor-node",e.SUNBURST_PATH_FIELD="path",e.NODE_ANCESTORS_FIELD="nodeAncestor"}(Idt);var ebt={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(jyt={},jyt.range={sync:"v"},jyt.percent={sync:"v",tickCount:5,tickInterval:.2},jyt),animation:!1};function nbt(t){var e;return[(e={},e.percent=Js(t,0,1),e)]}function rbt(t,e){var n=Ul(e,["ticks"],[]);return function(t,e){return t.map((function(n,r){var i;return(i={}).range=n-(t[r-1]||0),i.type=""+r,i.percent=e,i})).filter((function(t){return!!t.range}))}(Ql(n)?n:[0,Js(t,0,1),1],t)}function ibt(t){var e=t.chart,n=t.options,r=n.percent,i=n.range,o=n.radius,a=n.innerRadius,s=n.startAngle,l=n.endAngle,u=n.axis,c=n.indicator,d=n.gaugeStyle,h=i.color,f=i.width;if(c){var p=nbt(r),g=e.createView({id:"indicator-view"});g.data(p),g.point().position("percent*1").shape("gauge-indicator").customInfo({defaultColor:e.getTheme().defaultColor,indicator:c}),g.coordinate("polar",{startAngle:s,endAngle:l,radius:a*o}),g.axis("percent",u),g.scale("percent",Gct(u,Ddt))}var v=rbt(r,n.range),m=e.createView({id:"range-view"});return m.data(v),dht({chart:m,options:{xField:"1",yField:"range",seriesField:"type",rawFields:["percent"],isStack:!0,interval:{color:zs(h)?[h,"#f0f0f0"]:h,style:d},args:{zIndexReversed:!0},minColumnWidth:f,maxColumnWidth:f}}),m.coordinate("polar",{innerRadius:a,radius:o,startAngle:s,endAngle:l}).transpose(),t}function obt(t){var e,n=t.chart,r=t.options,i=r.type,o=r.meter;if("meter"===i){var a=r.innerRadius,s=r.radius,l=r.startAngle,u=r.endAngle,c=r.range,d=null==c?void 0:c.width,h=null==c?void 0:c.width,f=n.getTheme().background;f&&"transparent"!==f||(f="#fff");var p=n.createView({id:"range-mask-view"});p.data([(e={},e.type="1",e.range=1,e)]);var g={meter:o};p.interval({minColumnWidth:d,maxColumnWidth:h}).position("1*range").color(f).adjust("stack").shape("meter-gauge").customInfo(g),p.coordinate("polar",{innerRadius:a,radius:s,startAngle:l,endAngle:u}).transpose()}return t}function abt(t){var e;return jct(eht(((e={range:{min:0,max:1,maxLimit:1,minLimit:0}}).percent={},e)))(t)}function sbt(t,e){var n=t.chart,r=t.options,i=r.statistic,o=r.percent;if(n.getController("annotation").clear(!0),i){var a=i.content,s=void 0;a&&(s=odt({},{content:(100*o).toFixed(2)+"%",style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},a)),function(t,e,n){var r=e.statistic;[r.title,r.content].forEach((function(e){if(e){var r=gs(e.style)?e.style(n):e.style;t.annotation().html(Za({position:["50%","100%"],html:function(t,i){var o=i.getCoordinate(),a=i.views[0].getCoordinate(),s=a.getCenter(),l=a.getRadius(),u=Math.max(Math.sin(a.startAngle),Math.sin(a.endAngle))*l,c=s.y+u-o.y.start-parseFloat(Ul(r,"fontSize",0)),d=o.getRadius()*o.innerRadius*2;ldt(t,Za({width:d+"px",transform:"translate(-50%, "+c+"px)"},sdt(r)));var h=i.getData();if(e.customHtml)return e.customHtml(t,i,n,h);var f=e.content;return e.formatter&&(f=e.formatter(n,h)),f?zs(f)?f:""+f:"<div></div>"}},Gct(e,["offsetX","offsetY","rotate","style","formatter"])))}}))}(n,{statistic:Za(Za({},i),{content:s})},{percent:o})}return e&&n.render(!0),t}function lbt(t){var e=t.chart;return e.legend(!1),e.tooltip(!1),t}function ubt(t){return jct(Zdt,Kdt,ibt,abt,sbt,qdt,obt,nht(),lbt)(t)}hst("point","gauge-indicator",{draw:function(t,e){var n=t.customInfo,r=n.indicator,i=n.defaultColor,o=r,a=o.pointer,s=o.pin,l=e.addGroup(),u=this.parsePoint({x:0,y:0});return a&&l.addShape("line",{name:"pointer",attrs:Za({x1:u.x,y1:u.y,x2:t.x,y2:t.y,stroke:i},a.style)}),s&&l.addShape("circle",{name:"pin",attrs:Za({x:u.x,y:u.y,stroke:i},s.style)}),l}}),hst("interval","meter-gauge",{draw:function(t,e){var n=t.customInfo.meter,r=void 0===n?{}:n,i=r.steps,o=void 0===i?50:i,a=r.stepRatio,s=void 0===a?.5:a,l=this.coordinate.endAngle-this.coordinate.startAngle,u=l/o,c=0;s>0&&s<=1&&(c=(u=l/((1-s)/s*(o-1)+o))*(1-s)/s);var d=e.addGroup();if(c>0)for(var h=this.coordinate.getCenter(),f=this.coordinate.getRadius(),p=Rst.getAngle(t,this.coordinate),g=p.startAngle,v=p.endAngle,m=g,y=0;m<v&&y<2*o-1;y++){var b=y%2;if(b){var x=Rst.getSectorPath(h.x,h.y,f,m,Math.min(m+c,v),f*this.coordinate.innerRadius);d.addShape("path",{name:"meter-gauge-mask",attrs:{path:x,fill:t.color,stroke:t.color,lineWidth:.5},capture:!1})}m+=b?c:u}return d}});var cbt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="gauge",e}return Ka(e,t),e.getDefaultOptions=function(){return ebt},e.prototype.changeData=function(t){this.chart.emit(Ktt.BEFORE_CHANGE_DATA,Nat.fromData(this.chart,Ktt.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t});var e=this.chart.views.find((function(t){return"indicator-view"===t.id}));e&&e.data(nbt(t));var n=this.chart.views.find((function(t){return"range-view"===t.id}));n&&n.data(rbt(t,this.options.range)),sbt({chart:this.chart,options:this.options},!0),this.chart.emit(Ktt.AFTER_CHANGE_DATA,Nat.fromData(this.chart,Ktt.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return ubt},e}(Idt),dbt="$$yField$$",hbt={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function fbt(t,e,n,r){return function(t,e,n,r,i){var o,a=[];if(Fs(t,(function(t,e){var i;Vct(Mct.WARN,el(e[n]),e[n]+" is not a valid number");var o=kl(e[n])?null:e[n];return a.push(Za(Za({},e),((i={})[r]=[t,t+o],i))),t+o}),0),a.length&&i){var s=Ul(a,[[t.length-1],r,[1]]);a.push(((o={})[e]=i.label,o[n]=s,o[r]=[0,s],o))}return a}(t,e,n,dbt,r).map((function(e,n){var r;return ys(e)?Za(Za({},e),((r={}).$$absoluteField$$=e.$$yField$$[1],r.$$diffField$$=e.$$yField$$[1]-e.$$yField$$[0],r.$$isTotal$$=n===t.length,r)):e}))}function pbt(t){var e=t.options,n=e.locale,r=e.total,i=xdt(n).get(["waterfall","total"]);return r&&"string"!=typeof r.label&&i&&(t.options.total.label=i),t}function gbt(t){var e=t.chart,n=t.options,r=n.data,i=n.xField,o=n.yField,a=n.total,s=n.leaderLine,l=n.columnWidthRatio,u=n.waterfallStyle,c=n.risingFill,d=n.fallingFill,h=n.color;return e.data(fbt(r,i,o,a)),dht(odt({},t,{options:{xField:i,yField:dbt,seriesField:i,rawFields:[o,"$$diffField$$","$$isTotal$$",dbt],widthRatio:l,interval:{style:u,shape:"waterfall",color:h||function(t){return Ul(t,["$$isTotal$$"])?Ul(a,["style","fill"],""):Ul(t,[dbt,1])-Ul(t,[dbt,0])>0?c:d}}}})).ext.geometry.customInfo({leaderLine:s}),t}function vbt(t){var e,n,r=t.options,i=r.xAxis,o=r.yAxis,a=r.xField,s=r.yField,l=r.meta,u=odt({},{alias:s},Ul(l,s));return jct(eht(((e={})[a]=i,e[s]=o,e.$$yField$$=o,e),odt({},l,((n={}).$$yField$$=u,n.$$diffField$$=u,n.$$absoluteField$$=u,n))))(t)}function mbt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return!1===r?e.axis(o,!1):e.axis(o,r),!1===i?(e.axis(a,!1),e.axis(dbt,!1)):(e.axis(a,i),e.axis(dbt,i)),t}function ybt(t){var e=t.chart,n=t.options,r=n.legend,i=n.total,o=n.risingFill,a=n.fallingFill,s=xdt(n.locale);if(!1===r)e.legend(!1);else{var l=[{name:s.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:o}}},{name:s.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:a}}}];i&&l.push({name:i.label||"",value:"total",marker:{symbol:"square",style:odt({},{r:5},Ul(i,"style"))}}),e.legend(odt({},{custom:!0,position:"top",items:l},r)),e.removeInteraction("legend-filter")}return t}function bbt(t){var e=t.chart,n=t.options,r=n.label,i=n.labelMode,o=n.xField,a=Hct(e,"interval");if(r){var s=r.callback,l=Qa(r,["callback"]);a.label({fields:"absolute"===i?["$$absoluteField$$",o]:["$$diffField$$",o],callback:s,cfg:Qct(l)})}else a.label(!1);return t}function xbt(t){var e=t.chart,n=t.options,r=n.tooltip,i=n.xField,o=n.yField;if(!1!==r){e.tooltip(Za({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[o]},r));var a=e.geometries[0];(null==r?void 0:r.formatter)?a.tooltip(i+"*"+o,r.formatter):a.tooltip(o)}else e.tooltip(!1);return t}function wbt(t){return jct(pbt,Zdt,gbt,vbt,mbt,ybt,xbt,bbt,Qdt,qdt,Kdt,nht())(t)}function Cbt(t,e,n){var r=n.map((function(t){return t[e]})).filter((function(t){return void 0!==t})),i=r.length>0?Math.max.apply(Math,r):0,o=Math.abs(t)%360;return o?360*i/o:i}function Sbt(t){var e=t.chart,n=t.options,r=n.barStyle,i=n.color,o=n.tooltip,a=n.colorField,s=n.type,l=n.xField,u=n.yField,c=pdt(n.data,u);return e.data(c),dht(odt({},t,{options:{tooltip:o,seriesField:a,interval:{style:r,color:i,shape:"line"===s?"line":"intervel"},minColumnWidth:n.minBarWidth,maxColumnWidth:n.maxBarWidth,columnBackground:n.barBackground}})),"line"===s&&cht({chart:e,options:{xField:l,yField:u,seriesField:a,point:{shape:"circle",color:i}}}),t}function kbt(t){var e,n=t.options,r=n.yField,i=n.xField,o=n.data,a=n.isStack,s=n.isGroup,l=n.colorField,u=n.maxAngle,c=pdt(a&&!s&&l?function(t,e,n){var r=[];return t.forEach((function(t){var i=r.find((function(n){return n[e]===t[e]}));i?i[n]+=t[n]||null:r.push(Za({},t))})),r}(o,i,r):o,r);return jct(eht(((e={})[r]={min:0,max:Cbt(u,r,c)},e)))(t)}function Ebt(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,o=n.startAngle,a=n.endAngle;return e.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:o,endAngle:a}}).transpose(),t}function Mbt(t){var e=t.chart,n=t.options,r=n.xField,i=n.xAxis;return e.axis(r,i),t}function Abt(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,o=Hct(e,"interval");if(r){var a=r.callback,s=Qa(r,["callback"]);o.label({fields:[i],callback:a,cfg:Za(Za({},Qct(s)),{type:"polar"})})}else o.label(!1);return t}function _bt(t){return jct(Hdt("barStyle"),Sbt,kbt,Mbt,Ebt,qdt,Kdt,Zdt,Xdt,Ydt,nht(),Abt)(t)}hst("interval","waterfall",{draw:function(t,e){var n=t.customInfo,r=t.points,i=t.nextPoints,o=e.addGroup(),a=this.parsePath(function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(r){var i=0===n?"M":"L";e.push([i,r.x,r.y])}}var o=t[0];return e.push(["L",o.x,o.y]),e.push(["z"]),e}(r)),s=function(t){return odt({},t.defaultStyle,t.style,{fill:t.color})}(t);o.addShape("path",{attrs:Za(Za({},s),{path:a})});var l=Ul(n,"leaderLine");if(l&&i){var u=[["M",r[2].x,r[2].y],["L",i[0].x,i[0].y]];r[2].y===i[1].y&&(u[1]=["L",i[1].x,i[1].y]),u=this.parsePath(u),o.addShape("path",{attrs:Za({path:u},l.style||{})})}return o}}),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="waterfall",e}Ka(e,t),e.getDefaultOptions=function(){return hbt},e.prototype.changeData=function(t){var e=this.options,n=e.xField,r=e.yField,i=e.total;this.updateOption({data:t}),this.chart.changeData(fbt(t,n,r,i))},e.prototype.getSchemaAdaptor=function(){return wbt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()}}(Idt);var Tbt=odt({},Idt.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240});!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="radial-bar",e}Ka(e,t),e.getDefaultOptions=function(){return Tbt},e.prototype.changeData=function(t){this.updateOption({data:t}),kbt({chart:this.chart,options:this.options}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return _bt}}(Idt);function Pbt(t,e,n,r,i){var o=[];e.forEach((function(e){r.forEach((function(r){var i,a=((i={})[t]=r[t],i[n]=e,i[e]=r[e],i);o.push(a)}))}));var a=Object.values(Xs(o,n)),s=a[0],l=void 0===s?[]:s,u=a[1],c=void 0===u?[]:u;return i?[l.reverse(),c.reverse()]:[l,c]}function Ibt(t){return"vertical"!==t}function Dbt(t,e,n){var r=e[0],i=e[1],o=r.autoPadding,a=i.autoPadding,s=t.__axisPosition,l=s.layout,u=s.position;if(Ibt(l)&&"top"===u&&(r.autoPadding=n.instance(o.top,0,o.bottom,o.left),i.autoPadding=n.instance(a.top,o.left,a.bottom,0)),Ibt(l)&&"bottom"===u&&(r.autoPadding=n.instance(o.top,o.right/2+5,o.bottom,o.left),i.autoPadding=n.instance(a.top,a.right,a.bottom,o.right/2+5)),!Ibt(l)&&"bottom"===u){var c=o.left>=a.left?o.left:a.left;r.autoPadding=n.instance(o.top,o.right,o.bottom/2+5,c),i.autoPadding=n.instance(o.bottom/2+5,a.right,a.bottom,c)}if(!Ibt(l)&&"top"===u){c=o.left>=a.left?o.left:a.left;r.autoPadding=n.instance(o.top,o.right,0,c),i.autoPadding=n.instance(0,a.right,o.top,c)}}function Obt(t){var e,n,r=t.chart,i=t.options,o=i.data,a=i.xField,s=i.yField,l=i.color,u=i.barStyle,c=i.widthRatio,d=i.legend,h=i.layout,f=Pbt(a,s,"series-field-key",o,Ibt(h));d?r.legend("series-field-key",d):!1===d&&r.legend(!1);var p=f[0],g=f[1];return Ibt(h)?((e=r.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:"first-axes-view"})).coordinate().transpose().reflect("x"),(n=r.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:"second-axes-view"})).coordinate().transpose(),e.data(p),n.data(g)):(e=r.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:"first-axes-view"}),(n=r.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:"second-axes-view"})).coordinate().reflect("y").rotate(0*Math.PI),e.data(p),n.data(g)),dht(odt({},t,{chart:e,options:{widthRatio:c,xField:a,yField:s[0],seriesField:"series-field-key",interval:{color:l,style:u}}})),dht(odt({},t,{chart:n,options:{xField:a,yField:s[1],seriesField:"series-field-key",widthRatio:c,interval:{color:l,style:u}}})),t}function Rbt(t){var e,n,r,i=t.options,o=t.chart,a=i.xAxis,s=i.yAxis,l=i.xField,u=i.yField,c=qct(o,"first-axes-view"),d=qct(o,"second-axes-view"),h={};return xs((null==i?void 0:i.meta)||{}).map((function(t){Ul(null==i?void 0:i.meta,[t,"alias"])&&(h[t]=i.meta[t].alias)})),o.scale(((e={})["series-field-key"]={sync:!0,formatter:function(t){return Ul(h,t,t)}},e)),eht(((n={})[l]=a,n[u[0]]=s[u[0]],n))(odt({},t,{chart:c})),eht(((r={})[l]=a,r[u[1]]=s[u[1]],r))(odt({},t,{chart:d})),t}function Lbt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField,s=n.layout,l=qct(e,"first-axes-view"),u=qct(e,"second-axes-view");return"bottom"===(null==r?void 0:r.position)?u.axis(o,Za(Za({},r),{label:{formatter:function(){return""}}})):u.axis(o,!1),!1===r?l.axis(o,!1):l.axis(o,Za({position:Ibt(s)?"top":"bottom"},r)),!1===i?(l.axis(a[0],!1),u.axis(a[1],!1)):(l.axis(a[0],i[a[0]]),u.axis(a[1],i[a[1]])),e.__axisPosition={position:l.getOptions().axes[o].position,layout:s},t}function Bbt(t){var e=t.chart;return qdt(odt({},t,{chart:qct(e,"first-axes-view")})),qdt(odt({},t,{chart:qct(e,"second-axes-view")})),t}function Fbt(t){var e=t.chart,n=t.options,r=n.yField,i=n.yAxis;return rht(odt({},t,{chart:qct(e,"first-axes-view"),options:{yAxis:i[r[0]]}})),rht(odt({},t,{chart:qct(e,"second-axes-view"),options:{yAxis:i[r[1]]}})),t}function Nbt(t){var e=t.chart;return Zdt(odt({},t,{chart:qct(e,"first-axes-view")})),Zdt(odt({},t,{chart:qct(e,"second-axes-view")})),t}function zbt(t){var e=t.chart;return Kdt(odt({},t,{chart:qct(e,"first-axes-view")})),Kdt(odt({},t,{chart:qct(e,"second-axes-view")})),t}function jbt(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,o=qct(e,"first-axes-view"),a=qct(e,"second-axes-view"),s=Hct(o,"interval"),l=Hct(a,"interval");if(r){var u=r.callback,c=Qa(r,["callback"]);s.label({fields:[i[0]],callback:u,cfg:Qct(c)}),l.label({fields:[i[1]],callback:u,cfg:Qct(c)})}else s.label(!1),l.label(!1);return t}function Gbt(t){return jct(Obt,Rbt,Lbt,Fbt,Nbt,jbt,Xdt,Bbt,zbt)(t)}function Ubt(t,e){if(ms(t))return t.find((function(t){return t.type===e}))}function $bt(t,e){var n=Ubt(t,e);return n&&!1!==n.enable}function Vbt(t){var e=t.interactions,n=t.drilldown;return Ul(n,"enabled")||$bt(e,"treemap-drill-down")}function Wbt(t){var e=t.data,n=t.colorField,r=t.enableDrillDown,i=t.hierarchyConfig,o=Uyt(e,Za(Za({},i),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),a=[];return o.forEach((function(t){if(0===t.depth)return null;if(r&&1!==t.depth)return null;if(!r&&t.children)return null;var o=t.ancestors().map((function(t){return{data:t.data,height:t.height,value:t.value}})),s=r&&ms(e.path)?o.concat(e.path.slice(1)):o,l=Object.assign({},t.data,Za({x:t.x,y:t.y,depth:t.depth,value:t.value,path:s},t));if(!t.data[n]&&t.parent){var u=t.ancestors().find((function(t){return t.data[n]}));l[n]=null==u?void 0:u.data[n]}else l[n]=t.data[n];l["hierarchy-data-transform-params"]={hierarchyConfig:i,colorField:n,enableDrillDown:r},a.push(l)})),a}function Hbt(t){var e=t.options.colorField;return odt({options:{rawFields:["value"],tooltip:{fields:["name","value",e,"path"],formatter:function(t){return{name:t.name,value:t.value}}}}},t)}function Ybt(t){var e=t.chart,n=t.options,r=n.color,i=n.colorField,o=n.rectStyle,a=n.hierarchyConfig,s=n.rawFields,l=Wbt({data:n.data,colorField:n.colorField,enableDrillDown:Vbt(n),hierarchyConfig:a});return e.data(l),hht(odt({},t,{options:{xField:"x",yField:"y",seriesField:i,rawFields:s,polygon:{color:r,style:o}}})),e.coordinate().reflect("y"),t}function Xbt(t){return t.chart.axis(!1),t}function qbt(t){var e=t.drilldown,n=t.interactions,r=void 0===n?[]:n;return Vbt(t)?odt({},t,{interactions:is(r,[{type:"drill-down",cfg:{drillDownConfig:e,transformData:Wbt}}])}):t}function Kbt(t){var e=t.chart,n=t.options,r=n.interactions,i=n.drilldown;qdt({chart:e,options:qbt(n)});var o=Ubt(r,"view-zoom");return o&&(!1!==o.enable?e.getCanvas().on("mousewheel",(function(t){t.preventDefault()})):e.getCanvas().off("mousewheel")),Vbt(n)&&(e.appendPadding=vdt(e.appendPadding,Ul(i,["breadCrumb","position"]))),t}function Zbt(t){return jct(Hbt,Zdt,Hdt("rectStyle"),Ybt,Xbt,Ydt,Xdt,Kbt,Kdt,nht())(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="bidirectional-bar",e}Ka(e,t),e.getDefaultOptions=function(){return odt({},t.getDefaultOptions.call(this),{syncViewPadding:Dbt})},e.prototype.changeData=function(t){void 0===t&&(t=[]),this.chart.emit(Ktt.BEFORE_CHANGE_DATA,Nat.fromData(this.chart,Ktt.BEFORE_CHANGE_DATA,null)),this.updateOption({data:t});var e=this.options,n=Pbt(e.xField,e.yField,"series-field-key",t,Ibt(e.layout)),r=n[0],i=n[1],o=qct(this.chart,"first-axes-view"),a=qct(this.chart,"second-axes-view");o.data(r),a.data(i),this.chart.render(!0),this.chart.emit(Ktt.AFTER_CHANGE_DATA,Nat.fromData(this.chart,Ktt.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Gbt}}(Idt);var Qbt={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"初始",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}};function Jbt(t){return t.target.depth}function txt(t,e){return t.sourceLinks.length?t.depth:e-1}function ext(t){return function(){return t}}function nxt(t,e){for(var n=0,r=0;r<t.length;r++)n+=e(t[r]);return n}function rxt(t,e){for(var n=-1/0,r=0;r<t.length;r++)n=Math.max(e(t[r]),n);return n}function ixt(t,e){return axt(t.source,e.source)||t.index-e.index}function oxt(t,e){return axt(t.target,e.target)||t.index-e.index}function axt(t,e){return t.y0-e.y0}function sxt(t){return t.value}function lxt(t){return t.index}function uxt(t){return t.nodes}function cxt(t){return t.links}function dxt(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function hxt(t){for(var e=0,n=t.nodes;e<n.length;e++){for(var r=n[e],i=r.y0,o=i,a=0,s=r.sourceLinks;a<s.length;a++){(c=s[a]).y0=i+c.width/2,i+=c.width}for(var l=0,u=r.targetLinks;l<u.length;l++){var c;(c=u[l]).y1=o+c.width/2,o+=c.width}}}function fxt(){var t,e,n,r,i=0,o=0,a=1,s=1,l=24,u=8,c=lxt,d=txt,h=uxt,f=cxt,p=6;function g(g){var y={nodes:h(g),links:f(g)};return function(t){var e=t.nodes,n=t.links;e.forEach((function(t,e){t.index=e,t.sourceLinks=[],t.targetLinks=[]}));var i=new Map(e.map((function(t){return[c(t),t]})));if(n.forEach((function(t,e){t.index=e;var n=t.source,r=t.target;"object"!=typeof n&&(n=t.source=dxt(i,n)),"object"!=typeof r&&(r=t.target=dxt(i,r)),n.sourceLinks.push(t),r.targetLinks.push(t)})),null!=r)for(var o=0,a=e;o<a.length;o++){var s=a[o],l=s.sourceLinks,u=s.targetLinks;l.sort(r),u.sort(r)}}(y),function(t){for(var e=t.nodes,n=0,r=e;n<r.length;n++){var i=r[n];i.value=void 0===i.fixedValue?Math.max(nxt(i.sourceLinks,sxt),nxt(i.targetLinks,sxt)):i.fixedValue}}(y),function(t){var n=t.nodes,r=n.length,i=new Set(n),o=new Set,a=0;for(;i.size;){if(i.forEach((function(t){t.depth=a;for(var e=0,n=t.sourceLinks;e<n.length;e++){var r=n[e].target;o.add(r)}})),++a>r)throw new Error("circular link");i=o,o=new Set}if(e)for(var s=Math.max(rxt(n,(function(t){return t.depth}))+1,0),l=void 0,u=0;u<n.length;u++)(l=n[u]).depth=e.call(null,l,s)}(y),function(t){var e=t.nodes,n=e.length,r=new Set(e),i=new Set,o=0;for(;r.size;){if(r.forEach((function(t){t.height=o;for(var e=0,n=t.targetLinks;e<n.length;e++){var r=n[e].source;i.add(r)}})),++o>n)throw new Error("circular link");r=i,i=new Set}}(y),function(e){var r=function(t){for(var e=t.nodes,r=Math.max(rxt(e,(function(t){return t.depth}))+1,0),o=(a-i-l)/(r-1),s=new Array(r).fill(0).map((function(){return[]})),u=0,c=e;u<c.length;u++){var h=c[u],f=Math.max(0,Math.min(r-1,Math.floor(d.call(null,h,r))));h.layer=f,h.x0=i+f*o,h.x1=h.x0+l,s[f]?s[f].push(h):s[f]=[h]}if(n)for(var p=0,g=s;p<g.length;p++){g[p].sort(n)}return s}(e);t=Math.min(u,(s-o)/(rxt(r,(function(t){return t.length}))-1)),function(e){for(var n=function(t,e){for(var n=1/0,r=0;r<t.length;r++)n=Math.min(e(t[r]),n);return n}(e,(function(e){return(s-o-(e.length-1)*t)/nxt(e,sxt)})),r=0,i=e;r<i.length;r++){for(var a=i[r],l=o,u=0,c=a;u<c.length;u++){(g=c[u]).y0=l,g.y1=l+g.value*n,l=g.y1+t;for(var d=0,h=g.sourceLinks;d<h.length;d++){var f=h[d];f.width=f.value*n}}l=(s-l+t)/(a.length+1);for(var p=0;p<a.length;++p){var g;(g=a[p]).y0+=l*(p+1),g.y1+=l*(p+1)}C(a)}}(r);for(var c=0;c<p;++c){var h=Math.pow(.99,c),f=Math.max(1-h,(c+1)/p);m(r,h,f),v(r,h,f)}}(y),hxt(y),y}function v(t,e,r){for(var i=1,o=t.length;i<o;++i){for(var a=t[i],s=0,l=a;s<l.length;s++){for(var u=l[s],c=0,d=0,h=0,f=u.targetLinks;h<f.length;h++){var p=f[h],g=p.source,v=p.value*(u.layer-g.layer);c+=S(g,u)*v,d+=v}if(d>0){var m=(c/d-u.y0)*e;u.y0+=m,u.y1+=m,w(u)}}void 0===n&&a.sort(axt),a.length&&y(a,r)}}function m(t,e,r){for(var i=t.length-2;i>=0;--i){for(var o=t[i],a=0,s=o;a<s.length;a++){for(var l=s[a],u=0,c=0,d=0,h=l.sourceLinks;d<h.length;d++){var f=h[d],p=f.target,g=f.value*(p.layer-l.layer);u+=k(l,p)*g,c+=g}if(c>0){var v=(u/c-l.y0)*e;l.y0+=v,l.y1+=v,w(l)}}void 0===n&&o.sort(axt),o.length&&y(o,r)}}function y(e,n){var r=e.length>>1,i=e[r];x(e,i.y0-t,r-1,n),b(e,i.y1+t,r+1,n),x(e,s,e.length-1,n),b(e,o,0,n)}function b(e,n,r,i){for(;r<e.length;++r){var o=e[r],a=(n-o.y0)*i;a>1e-6&&(o.y0+=a,o.y1+=a),n=o.y1+t}}function x(e,n,r,i){for(;r>=0;--r){var o=e[r],a=(o.y1-n)*i;a>1e-6&&(o.y0-=a,o.y1-=a),n=o.y0-t}}function w(t){var e=t.sourceLinks,n=t.targetLinks;if(void 0===r){for(var i=0,o=n;i<o.length;i++){o[i].source.sourceLinks.sort(oxt)}for(var a=0,s=e;a<s.length;a++){s[a].target.targetLinks.sort(ixt)}}}function C(t){if(void 0===r)for(var e=0,n=t;e<n.length;e++){var i=n[e],o=i.sourceLinks,a=i.targetLinks;o.sort(oxt),a.sort(ixt)}}function S(e,n){for(var r=e.y0-(e.sourceLinks.length-1)*t/2,i=0,o=e.sourceLinks;i<o.length;i++){var a=o[i],s=a.target,l=a.width;if(s===n)break;r+=l+t}for(var u=0,c=n.targetLinks;u<c.length;u++){var d=c[u];s=d.source,l=d.width;if(s===e)break;r-=l}return r}function k(e,n){for(var r=n.y0-(n.targetLinks.length-1)*t/2,i=0,o=n.targetLinks;i<o.length;i++){var a=o[i],s=a.source,l=a.width;if(s===e)break;r+=l+t}for(var u=0,c=e.sourceLinks;u<c.length;u++){var d=c[u];s=d.target,l=d.width;if(s===n)break;r-=l}return r}return g.update=function(t){return hxt(t),t},g.nodeId=function(t){return arguments.length?(c="function"==typeof t?t:ext(t),g):c},g.nodeAlign=function(t){return arguments.length?(d="function"==typeof t?t:ext(t),g):d},g.nodeDepth=function(t){return arguments.length?(e=t,g):e},g.nodeSort=function(t){return arguments.length?(n=t,g):n},g.nodeWidth=function(t){return arguments.length?(l=+t,g):l},g.nodePadding=function(e){return arguments.length?(u=t=+e,g):u},g.nodes=function(t){return arguments.length?(h="function"==typeof t?t:ext(t),g):h},g.links=function(t){return arguments.length?(f="function"==typeof t?t:ext(t),g):f},g.linkSort=function(t){return arguments.length?(r=t,g):r},g.size=function(t){return arguments.length?(i=o=0,a=+t[0],s=+t[1],g):[a-i,s-o]},g.extent=function(t){return arguments.length?(i=+t[0][0],a=+t[1][0],o=+t[0][1],s=+t[1][1],g):[[i,o],[a,s]]},g.iterations=function(t){return arguments.length?(p=+t,g):p},g}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="treemap",e}Ka(e,t),e.getDefaultOptions=function(){return Qbt},e.prototype.changeData=function(t){var e=this.options,n=e.colorField,r=e.interactions,i=e.hierarchyConfig;this.updateOption({data:t});var o,a,s=Wbt({data:t,colorField:n,enableDrillDown:$bt(r,"treemap-drill-down"),hierarchyConfig:i});this.chart.changeData(s),o=this.chart,(a=o.interactions["drill-down"])&&a.context.actions.find((function(t){return"drill-down-action"===t.name})).reset()},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Zbt}}(Idt);var pxt={left:function(t){return t.depth},right:function(t,e){return e-1-t.height},center:function(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?ol(t.sourceLinks,Jbt)-1:0},justify:txt},gxt={nodeId:function(t){return t.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function vxt(t,e){var n=function(t){return Tl({},gxt,t)}(t),r=n.nodeId,i=n.nodeSort,o=n.nodeAlign,a=n.nodeWidth,s=n.nodePadding,l=n.nodeDepth,u=fxt().nodeSort(i).nodeWidth(a).nodePadding(s).nodeDepth(l).nodeAlign(function(t){return(zs(t)?pxt[t]:gs(t)?t:null)||txt}(o)).extent([[0,0],[1,1]]).nodeId(r)(e);return u.nodes.forEach((function(t){var e=t.x0,n=t.x1,r=t.y0,i=t.y1;t.x=[e,n,n,e],t.y=[r,r,i,i]})),u.links.forEach((function(t){var e=t.source,n=t.target,r=e.x1,i=n.x0;t.x=[r,r,i,i];var o=t.width/2;t.y=[t.y0+o,t.y0-o,t.y1+o,t.y1-o]})),u}function mxt(t,e,n){if(!ms(t))return[];var r=[],i=function(t,e,n){var r=[];return t.forEach((function(t){var i=t[e],o=t[n];r.includes(i)||r.push(i),r.includes(o)||r.push(o)})),r}(t,e,n),o=function(t,e,n,r){var i={};return e.forEach((function(t){i[t]={},e.forEach((function(e){i[t][e]=0}))})),t.forEach((function(t){i[t[n]][t[r]]=1})),i}(t,i,e,n),a={};function s(t){a[t]=1,i.forEach((function(e){if(0!=o[t][e])if(1==a[e])r.push(t+"_"+e);else{if(-1==a[e])return;s(e)}})),a[t]=-1}return i.forEach((function(t){a[t]=0})),i.forEach((function(t){-1!=a[t]&&s(t)})),0!==r.length&&console.warn("sankey data contains circle, "+r.length+" records removed.",r),t.filter((function(t){return r.findIndex((function(r){return r===t[e]+"_"+t[n]}))<0}))}function yxt(t,e,n){return ddt(t)?t/n:e}function bxt(t,e,n){return ddt(t)?t/n:e}function xxt(t,e,n){var r=t.data,i=t.sourceField,o=t.targetField,a=t.weightField,s=t.nodeAlign,l=t.nodeSort,u=t.nodePadding,c=t.nodePaddingRatio,d=t.nodeWidth,h=t.nodeWidthRatio,f=t.nodeDepth,p=t.rawFields,g=void 0===p?[]:p,v=fdt(mxt(r,i,o),i,o,a,g),m=vxt({nodeAlign:s,nodePadding:bxt(u,c,n),nodeWidth:yxt(d,h,e),nodeSort:l,nodeDepth:f},v),y=m.nodes,b=m.links;return{nodes:y.map((function(t){return Za(Za({},Gct(t,is(["x","y","name"],g))),{isNode:!0})})),edges:b.map((function(t){return Za(Za({source:t.source.name,target:t.target.name,name:t.source.name||t.target.name},Gct(t,is(["x","y","value"],g))),{isNode:!1})}))}}function wxt(t){var e=t.options.rawFields,n=void 0===e?[]:e;return odt({},{options:{tooltip:{fields:Gs(is(["name","source","target","value","isNode"],n))},label:{fields:Gs(is(["x","name"],n))}}},t)}function Cxt(t){var e=t.chart,n=t.options,r=n.color,i=n.nodeStyle,o=n.edgeStyle,a=n.label,s=n.tooltip,l=n.nodeState,u=n.edgeState;e.legend(!1),e.tooltip(s),e.axis(!1),e.coordinate().reflect("y");var c=xxt(n,e.width,e.height),d=c.nodes,h=c.edges,f=e.createView({id:"edges"});f.data(h),fht({chart:f,options:{xField:"x",yField:"y",seriesField:"name",edge:{color:r,style:o,shape:"arc"},tooltip:s,state:u}});var p=e.createView({id:"nodes"});return p.data(d),hht({chart:p,options:{xField:"x",yField:"y",seriesField:"name",polygon:{color:r,style:i},label:a,tooltip:s,state:l}}),e.interaction("element-active"),e.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),t}function Sxt(t){var e=t.chart,n=t.options.animation;return"boolean"==typeof n?e.animate(n):e.animate(!0),is(e.views[0].geometries,e.views[1].geometries).forEach((function(t){t.animate(n)})),t}function kxt(t){var e=t.chart,n="sankey-node-draggable";return t.options.nodeDraggable?e.interaction(n):e.removeInteraction(n),t}function Ext(t){return jct(wxt,Cxt,qdt,kxt,Sxt,Zdt)(t)}Cot("sankey-node-drag",function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isDragging=!1,e}return Ka(e,t),e.prototype.isNodeElement=function(){var t=Ul(this.context,"event.target");if(t){var e=t.get("element");return e&&e.getModel().data.isNode}return!1},e.prototype.getNodeView=function(){return qct(this.context.view,"nodes")},e.prototype.getEdgeView=function(){return qct(this.context.view,"edges")},e.prototype.getCurrentDatumIdx=function(t){return this.getNodeView().geometries[0].elements.indexOf(t)},e.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:Ul(this.context,"event.x"),y:Ul(this.context,"event.y")};var t=this.context.event.target.get("element"),e=this.getCurrentDatumIdx(t);if(-1===e)return;this.currentElementIdx=e,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},e.prototype.translate=function(){if(this.isDragging){var t=this.context.view,e={x:Ul(this.context,"event.x"),y:Ul(this.context,"event.y")},n=e.x-this.prevPoint.x,r=e.y-this.prevPoint.y,i=this.getNodeView(),o=i.geometries[0].elements[this.currentElementIdx];if(o&&o.getModel()){var a=o.getModel().data,s=i.getOptions().data,l=i.getCoordinate(),u={x:n/l.getWidth(),y:r/l.getHeight()},c=Za(Za({},a),{x:a.x.map((function(t){return t+u.x})),y:a.y.map((function(t){return t+u.y}))}),d=is(s);d[this.currentElementIdx]=c,i.data(d);var h=a.name,f=this.getEdgeView(),p=f.getOptions().data;p.forEach((function(t){t.source===h&&(t.x[0]+=u.x,t.x[1]+=u.x,t.y[0]+=u.y,t.y[1]+=u.y),t.target===h&&(t.x[2]+=u.x,t.x[3]+=u.x,t.y[2]+=u.y,t.y[3]+=u.y)})),f.data(p),this.prevPoint=e,t.render(!0)}}},e.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},e}(bot)),lat("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(t){return t.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]}),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="sankey",e}Ka(e,t),e.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(t){return t.name},callback:function(t){var e=1===t[1];return{style:{fill:"#545454",textAlign:e?"end":"start"},offsetX:e?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(t){return!Ul(t,[0,"data","isNode"])},formatter:function(t){return{name:t.source+" -> "+t.target,value:t.value}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},e.prototype.changeData=function(t){this.updateOption({data:t});var e=xxt(this.options,this.chart.width,this.chart.height),n=e.nodes,r=e.edges,i=qct(this.chart,"nodes"),o=qct(this.chart,"edges");i.changeData(n),o.changeData(r)},e.prototype.getSchemaAdaptor=function(){return Ext},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()}}(Idt);var Mxt={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(t){return t.id},source:function(t){return t.source},target:function(t){return t.target},sourceWeight:function(t){return t.value||1},targetWeight:function(t){return t.value||1},sortBy:null};function Axt(t,e){var n=function(t){return Tl({},Mxt,t)}(t),r={},i=e.nodes,o=e.links;return i.forEach((function(t){var e=n.id(t);r[e]=t})),function(t,e,n){bs(t,(function(t,r){t.inEdges=e.filter((function(t){return""+n.target(t)==""+r})),t.outEdges=e.filter((function(t){return""+n.source(t)==""+r})),t.edges=t.outEdges.concat(t.inEdges),t.frequency=t.edges.length,t.value=0,t.inEdges.forEach((function(e){t.value+=n.targetWeight(e)})),t.outEdges.forEach((function(e){t.value+=n.sourceWeight(e)}))}))}(r,o,n),function(t,e){var n={weight:function(t,e){return e.value-t.value},frequency:function(t,e){return e.frequency-t.frequency},id:function(t,n){return(""+e.id(t)).localeCompare(""+e.id(n))}}[e.sortBy];!n&&gs(e.sortBy)&&(n=e.sortBy),n&&t.sort(n)}(i,n),{nodes:function(t,e){var n=t.length;if(!n)throw new TypeError("Invalid nodes: it's empty!");if(e.weight){var r=e.nodePaddingRatio;if(r<0||r>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var i=r/(2*n),o=e.nodeWidthRatio;if(o<=0||o>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var a=0;t.forEach((function(t){a+=t.value})),t.forEach((function(t){t.weight=t.value/a,t.width=t.weight*(1-r),t.height=o})),t.forEach((function(n,r){for(var a=0,s=r-1;s>=0;s--)a+=t[s].width+2*i;var l=n.minX=i+a,u=n.maxX=n.minX+n.width,c=n.minY=e.y-o/2,d=n.maxY=c+o;n.x=[l,u,u,l],n.y=[c,c,d,d]}))}else{var s=1/n;t.forEach((function(t,n){t.x=(n+.5)*s,t.y=e.y}))}return t}(i,n),links:function(t,e,n){if(n.weight){var r={};bs(t,(function(t,e){r[e]=t.value})),e.forEach((function(e){var i=n.source(e),o=n.target(e),a=t[i],s=t[o];if(a&&s){var l=r[i],u=n.sourceWeight(e),c=a.minX+(a.value-l)/a.value*a.width,d=c+u/a.value*a.width;r[i]-=u;var h=r[o],f=n.targetWeight(e),p=s.minX+(s.value-h)/s.value*s.width,g=p+f/s.value*s.width;r[o]-=f;var v=n.y;e.x=[c,d,p,g],e.y=[v,v,v,v],e.source=a,e.target=s}}))}else e.forEach((function(e){var r=t[n.source(e)],i=t[n.target(e)];r&&i&&(e.x=[r.x,i.x],e.y=[r.y,i.y],e.source=r,e.target=i)}));return e}(r,o,n)}}var _xt={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(t,e){return{labelEmit:!0,style:{fill:"#8c8c8c"},offsetX:(t[0]+t[1])/2>.5?-4:4,content:e}}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(t){return!Ul(t,[0,"data","isNode"])},formatter:function(t){return{name:t.source+" -> "+t.target,value:t.value}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function Txt(t){var e=t.options,n=e.data,r=e.sourceField,i=e.targetField,o=e.weightField,a=e.nodePaddingRatio,s=e.nodeWidthRatio,l=e.rawFields,u=void 0===l?[]:l,c=Axt({weight:!0,nodePaddingRatio:a,nodeWidthRatio:s},fdt(n,r,i,o)),d=c.nodes,h=c.links,f=d.map((function(t){return Za(Za({},Gct(t,is(["id","x","y","name"],u))),{isNode:!0})})),p=h.map((function(t){return Za(Za({source:t.source.name,target:t.target.name,name:t.source.name||t.target.name},Gct(t,is(["x","y","value"],u))),{isNode:!1})}));return Za(Za({},t),{ext:Za(Za({},t.ext),{chordData:{nodesData:f,edgesData:p}})})}function Pxt(t){var e;return t.chart.scale(((e={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}}).name={sync:"color"},e.source={sync:"color"},e)),t}function Ixt(t){return t.chart.axis(!1),t}function Dxt(t){return t.chart.legend(!1),t}function Oxt(t){var e=t.chart,n=t.options.tooltip;return e.tooltip(n),t}function Rxt(t){return t.chart.coordinate("polar").reflect("y"),t}function Lxt(t){var e=t.chart,n=t.options,r=t.ext.chordData.nodesData,i=n.nodeStyle,o=n.label,a=n.tooltip,s=e.createView();return s.data(r),hht({chart:s,options:{xField:"x",yField:"y",seriesField:"name",polygon:{style:i},label:o,tooltip:a}}),t}function Bxt(t){var e=t.chart,n=t.options,r=t.ext.chordData.edgesData,i=n.edgeStyle,o=n.tooltip,a=e.createView();return a.data(r),fht({chart:a,options:{xField:"x",yField:"y",seriesField:"source",edge:{style:i,shape:"arc"},tooltip:o}}),t}function Fxt(t){var e,n=t.chart,r=t.options.animation;return"boolean"==typeof r?n.animate(r):n.animate(!0),bs(Ul(e=n,["views","length"],0)<=0?e.geometries:Fs(e.views,(function(t,e){return t.concat(e.geometries)}),e.geometries),(function(t){t.animate(r)})),t}function Nxt(t){return jct(Zdt,Txt,Rxt,Pxt,Ixt,Dxt,Oxt,Bxt,Lxt,qdt,Qdt,Fxt)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="chord",e}Ka(e,t),e.getDefaultOptions=function(){return _xt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Nxt}}(Idt);var zxt={field:"value",as:["x","y","r"],sort:function(t,e){return e.value-t.value}};function jxt(t){var e=t.data,n=t.hierarchyConfig,r=t.rawFields,i=void 0===r?[]:r,o=t.enableDrillDown,a=function(t,e){var n,r=(e=Tl({},zxt,e)).as;if(!ms(r)||3!==r.length)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');try{n=Rmt(e)}catch(PCt){console.warn(PCt)}var i,o=(i=t,pyt().size(e.size).padding(e.padding)(Vmt(i).sum((function(t){return t[n]})).sort(e.sort))),a=r[0],s=r[1],l=r[2];return o.each((function(t){t[a]=t.x,t[s]=t.y,t[l]=t.r})),Lmt(o)}(e,Za(Za({},n),{field:"value",as:["x","y","r"]})),s=[];return a.forEach((function(t){for(var e,r=t.data.name,a=Za({},t);a.depth>1;)r=(null===(e=a.parent.data)||void 0===e?void 0:e.name)+" / "+r,a=a.parent;if(o&&t.depth>2)return null;var l=odt({},t.data,Za(Za(Za({},Gct(t.data,i)),{path:r}),t));l.ext=n,l["hierarchy-data-transform-params"]={hierarchyConfig:n,rawFields:i,enableDrillDown:o},s.push(l)})),s}function Gxt(t){var e=t.map((function(t){return gdt(t)})),n=[0,0,0,0];return e.length>0&&(n=n.map((function(t,n){return e.forEach((function(r,i){t+=e[i][n]})),t}))),n}function Uxt(t,e,n){var r=Gxt([t,e]),i=r[0],o=r[1],a=r[2],s=r[3],l=n.width-(s+o),u=n.height-(i+a),c=Math.min(l,u),d=(l-c)/2,h=(u-c)/2;return{finalPadding:[i+h,o+d,a+h,s+d],finalSize:c<0?0:c}}var $xt=["x","y","r","name","value","path","depth"],Vxt={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}};function Wxt(t){var e=t.chart,n=Math.min(e.viewBBox.width,e.viewBBox.height);return odt({options:{size:function(t){return t.r*n}}},t)}function Hxt(t){var e=t.options,n=t.chart,r=n.viewBBox,i=e.padding,o=e.appendPadding,a=e.drilldown,s=o;(null==a?void 0:a.enabled)&&(s=Gxt([vdt(n.appendPadding,Ul(a,["breadCrumb","position"])),o]));var l=Uxt(i,s,r).finalPadding;return n.padding=l,n.appendPadding=0,t}function Yxt(t){var e=t.chart,n=t.options,r=e.padding,i=e.appendPadding,o=n.color,a=n.colorField,s=n.pointStyle,l=n.hierarchyConfig,u=n.sizeField,c=n.rawFields,d=void 0===c?[]:c,h=n.drilldown,f=jxt({data:n.data,hierarchyConfig:l,enableDrillDown:null==h?void 0:h.enabled,rawFields:d});e.data(f);var p=Uxt(r,i,e.viewBBox).finalSize,g=function(t){return t.r*p};return u&&(g=function(t){return t[u]*p}),cht(odt({},t,{options:{xField:"x",yField:"y",seriesField:a,sizeField:u,rawFields:is($xt,d),point:{color:o,style:s,shape:"circle",size:g}}})),t}function Xxt(t){return jct(eht({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(t)}function qxt(t){var e=t.chart,n=t.options.tooltip;if(!1===n)e.tooltip(!1);else{var r=n;Ul(n,"fields")||(r=odt({},{customItems:function(t){return t.map((function(t){var n=Ul(e.getOptions(),"scales"),r=Ul(n,["name","formatter"],(function(t){return t})),i=Ul(n,["value","formatter"],(function(t){return t}));return Za(Za({},t),{name:r(t.data.name),value:i(t.data.value)})}))}},r)),e.tooltip(r)}return t}function Kxt(t){return t.chart.axis(!1),t}function Zxt(t){var e=t.drilldown,n=t.interactions,r=void 0===n?[]:n;return(null==e?void 0:e.enabled)?odt({},t,{interactions:is(r,[{type:"drill-down",cfg:{drillDownConfig:e,transformData:jxt,enableDrillDown:!0}}])}):t}function Qxt(t){return qdt({chart:t.chart,options:Zxt(t.options)}),t}function Jxt(t){return jct(Hdt("pointStyle"),Wxt,Hxt,Zdt,Xxt,Yxt,Kxt,Ydt,qxt,Qxt,Kdt,nht())(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="circle-packing",e}Ka(e,t),e.getDefaultOptions=function(){return Vxt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Jxt},e.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))}}(Idt),function(t){function e(e,n,r,i){var o=t.call(this,e,odt({},i,n))||this;return o.type="g2-plot",o.defaultOptions=i,o.adaptor=r,o}Ka(e,t),e.prototype.getDefaultOptions=function(){return this.defaultOptions},e.prototype.getSchemaAdaptor=function(){return this.adaptor}}(Idt);var twt={line:wht,pie:yft,column:Kht,bar:tft,area:Tht,gauge:ubt,"tiny-line":ygt,"tiny-column":wgt,"tiny-area":vgt,"ring-progress":Vgt,progress:jgt,scatter:Apt,histogram:Ogt,funnel:dmt},ewt={line:Sht,pie:bft,column:Qht,bar:nft,area:Iht,gauge:cbt,"tiny-line":bgt,"tiny-column":Sgt,"tiny-area":Egt,"ring-progress":Hgt,progress:Ggt,scatter:Opt,histogram:Rgt,funnel:hmt},nwt={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function rwt(t,e,n){var r=ewt[t];r?(0,twt[t])({chart:e,options:odt({},r.getDefaultOptions(),Ul(nwt,t,{}),n)}):console.error("could not find "+t+" plot")}function iwt(t){var e=t.chart,n=t.options,r=n.views,i=n.legend;return bs(r,(function(t){var n=t.region,r=t.data,i=t.meta,o=t.axes,a=t.coordinate,s=t.interactions,l=t.annotations,u=t.tooltip,c=t.geometries,d=e.createView({region:n});d.data(r);var h={};o&&bs(o,(function(t,e){h[e]=Gct(t,Ddt)})),h=odt({},i,h),d.scale(h),o?bs(o,(function(t,e){d.axis(e,t)})):d.axis(!1),d.coordinate(a),bs(c,(function(t){var e=sht({chart:d,options:t}).ext,n=t.adjust;n&&e.geometry.adjust(n)})),bs(s,(function(t){!1===t.enable?d.removeInteraction(t.type):d.interaction(t.type,t.cfg)})),bs(l,(function(t){d.annotation()[t.type](Za({},t))})),"boolean"==typeof t.animation?d.animate(!1):(d.animate(!0),bs(d.geometries,(function(e){e.animate(t.animation)}))),u&&(d.interaction("tooltip"),d.tooltip(u))})),i?bs(i,(function(t,n){e.legend(n,t)})):e.legend(!1),e.tooltip(n.tooltip),t}function owt(t){var e=t.chart;return bs(t.options.plots,(function(t){var n=t.type,r=t.region,i=t.options,o=void 0===i?{}:i,a=o.tooltip,s=e.createView(Za({region:r},Gct(o,Pdt)));a&&s.interaction("tooltip"),rwt(n,s,o)})),t}function awt(t){return jct(Kdt,iwt,owt,qdt,Kdt,Zdt,Xdt)(t)}Cot("association",function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.getAssociationItems=function(t,e){var n,r=this.context.event,i=e||{},o=i.linkField,a=i.dim,s=[];if(null===(n=r.data)||void 0===n?void 0:n.data){var l=r.data.data;bs(t,(function(t){var e,n,r=o;if("x"===a?r=t.getXScale().field:"y"===a?r=null===(e=t.getYScales().find((function(t){return t.field===r})))||void 0===e?void 0:e.field:r||(r=null===(n=t.getGroupScales()[0])||void 0===n?void 0:n.field),r){var i=zl(Yct(t),(function(e){var n=!1,i=!1,o=ms(l)?Ul(l[0],r):Ul(l,r);return function(t,e){var n=t.getModel().data;return ms(n)?n[0][e]:n[e]}(e,r)===o?n=!0:i=!0,{element:e,view:t,active:n,inactive:i}}));s.push.apply(s,i)}}))}return s},e.prototype.showTooltip=function(t){var e=Zct(this.context.view);bs(this.getAssociationItems(e,t),(function(t){if(t.active){var e=t.element.shape.getCanvasBBox();t.view.showTooltip({x:e.minX+e.width/2,y:e.minY+e.height/2})}}))},e.prototype.hideTooltip=function(){bs(Zct(this.context.view),(function(t){t.hideTooltip()}))},e.prototype.active=function(t){var e=Kct(this.context.view);bs(this.getAssociationItems(e,t),(function(t){var e=t.active,n=t.element;e&&n.setState("active",!0)}))},e.prototype.selected=function(t){var e=Kct(this.context.view);bs(this.getAssociationItems(e,t),(function(t){var e=t.active,n=t.element;e&&n.setState("selected",!0)}))},e.prototype.highlight=function(t){var e=Kct(this.context.view);bs(this.getAssociationItems(e,t),(function(t){var e=t.inactive,n=t.element;e&&n.setState("inactive",!0)}))},e.prototype.reset=function(){bs(Kct(this.context.view),(function(t){bs(Yct(t),(function(t){t.hasState("active")&&t.setState("active",!1),t.hasState("selected")&&t.setState("selected",!1),t.hasState("inactive")&&t.setState("inactive",!1)}))}))},e}(bot)),lat("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),lat("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),lat("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),lat("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});var swt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="mix",e}return Ka(e,t),e.prototype.getSchemaAdaptor=function(){return awt},e}(Idt);function lwt(t){var e=t.chart,n=t.options,r=n.type,i=n.data,o=n.fields,a=n.eachView,s=Hl(n,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return e.data(i),e.facet(r,Za(Za({},s),{fields:o,eachView:function(t,e){var n=a(t,e);if(n.geometries)!function(t,e){var n=e.data,r=e.coordinate,i=e.interactions,o=e.annotations,a=e.animation,s=e.tooltip,l=e.axes,u=e.meta,c=e.geometries;n&&t.data(n);var d={};l&&bs(l,(function(t,e){d[e]=Gct(t,Ddt)})),d=odt({},u,d),t.scale(d),r&&t.coordinate(r),!1===l?t.axis(!1):bs(l,(function(e,n){t.axis(n,e)})),bs(c,(function(e){var n=sht({chart:t,options:e}).ext,r=e.adjust;r&&n.geometry.adjust(r)})),bs(i,(function(e){!1===e.enable?t.removeInteraction(e.type):t.interaction(e.type,e.cfg)})),bs(o,(function(e){t.annotation()[e.type](Za({},e))})),"boolean"==typeof a?t.animate(!1):(t.animate(!0),bs(t.geometries,(function(t){t.animate(a)}))),s?(t.interaction("tooltip"),t.tooltip(s)):!1===s&&t.removeInteraction("tooltip")}(t,n);else{var r=n,i=r.options;i.tooltip&&t.interaction("tooltip"),rwt(r.type,t,i)}}})),t}function uwt(t){var e=t.chart,n=t.options,r=n.axes,i=n.meta,o=n.tooltip,a=n.coordinate,s=n.theme,l=n.legend,u=n.interactions,c=n.annotations,d={};return r&&bs(r,(function(t,e){d[e]=Gct(t,Ddt)})),d=odt({},i,d),e.scale(d),e.coordinate(a),r?bs(r,(function(t,n){e.axis(n,t)})):e.axis(!1),o?(e.interaction("tooltip"),e.tooltip(o)):!1===o&&e.removeInteraction("tooltip"),e.legend(l),s&&e.theme(s),bs(u,(function(t){!1===t.enable?e.removeInteraction(t.type):e.interaction(t.type,t.cfg)})),bs(c,(function(t){e.annotation()[t.type](Za({},t))})),t}function cwt(t){return jct(Zdt,lwt,uwt)(t)}var dwt,hwt,fwt={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}};!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="area",e}Ka(e,t),e.getDefaultOptions=function(){return fwt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return cwt}}(Idt),(hwt=dwt||(dwt={})).DEV="DEV",hwt.BETA="BETA",hwt.STABLE="STABLE",function(){function t(){}Object.defineProperty(t,"MultiView",{get:function(){var t,e;return t=dwt.STABLE,e="MultiView",console.warn(t===dwt.DEV?"Plot '"+e+"' is in DEV stage, just give us issues.":t===dwt.BETA?"Plot '"+e+"' is in BETA stage, DO NOT use it in production env.":t===dwt.STABLE?"Plot '"+e+"' is in STABLE stage, import it by \"import { "+e+" } from '@antv/g2plot'\".":"invalid Stage type."),swt},enumerable:!1,configurable:!0})}(),bdt("en-US",{locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}}),bdt("zh-CN",{locale:"zh-CN",general:{increase:"增加",decrease:"减少",root:"初始"},statistic:{total:"总计"},conversionTag:{label:"转化率"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"总计"}});var pwt=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}},gwt=Object.prototype.toString;function vwt(t){return"[object Array]"===gwt.call(t)}function mwt(t){return void 0===t}function ywt(t){return null!==t&&"object"==typeof t}function bwt(t){if("[object Object]"!==gwt.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function xwt(t){return"[object Function]"===gwt.call(t)}function wwt(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),vwt(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}var Cwt={isArray:vwt,isArrayBuffer:function(t){return"[object ArrayBuffer]"===gwt.call(t)},isBuffer:function(t){return null!==t&&!mwt(t)&&null!==t.constructor&&!mwt(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:ywt,isPlainObject:bwt,isUndefined:mwt,isDate:function(t){return"[object Date]"===gwt.call(t)},isFile:function(t){return"[object File]"===gwt.call(t)},isBlob:function(t){return"[object Blob]"===gwt.call(t)},isFunction:xwt,isStream:function(t){return ywt(t)&&xwt(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:wwt,merge:function t(){var e={};function n(n,r){bwt(e[r])&&bwt(n)?e[r]=t(e[r],n):bwt(n)?e[r]=t({},n):vwt(n)?e[r]=n.slice():e[r]=n}for(var r=0,i=arguments.length;r<i;r++)wwt(arguments[r],n);return e},extend:function(t,e,n){return wwt(e,(function(e,r){t[r]=n&&"function"==typeof e?pwt(e,n):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}};function Swt(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var kwt=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(Cwt.isURLSearchParams(e))r=e.toString();else{var i=[];Cwt.forEach(e,(function(t,e){null!=t&&(Cwt.isArray(t)?e+="[]":t=[t],Cwt.forEach(t,(function(t){Cwt.isDate(t)?t=t.toISOString():Cwt.isObject(t)&&(t=JSON.stringify(t)),i.push(Swt(e)+"="+Swt(t))})))})),r=i.join("&")}if(r){var o=t.indexOf("#");-1!==o&&(t=t.slice(0,o)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t};function Ewt(){this.handlers=[]}Ewt.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},Ewt.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},Ewt.prototype.forEach=function(t){Cwt.forEach(this.handlers,(function(e){null!==e&&t(e)}))};var Mwt=Ewt,Awt=function(t,e){Cwt.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))},_wt=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},Twt=function(t,e,n,r,i){var o=new Error(t);return _wt(o,e,n,r,i)},Pwt=Cwt.isStandardBrowserEnv()?{write:function(t,e,n,r,i,o){var a=[];a.push(t+"="+encodeURIComponent(e)),Cwt.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Cwt.isString(r)&&a.push("path="+r),Cwt.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Iwt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Dwt=Cwt.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(e){var n=Cwt.isString(e)?r(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0};function Owt(t){this.message=t}Owt.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Owt.prototype.__CANCEL__=!0;var Rwt=Owt,Lwt=Gwt,Bwt=function(t){return new Promise((function(e,n){var r,i=t.data,o=t.headers,a=t.responseType;function s(){t.cancelToken&&t.cancelToken.unsubscribe(r),t.signal&&t.signal.removeEventListener("abort",r)}Cwt.isFormData(i)&&delete o["Content-Type"];var l=new XMLHttpRequest;if(t.auth){var u=t.auth.username||"",c=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.Authorization="Basic "+btoa(u+":"+c)}var d,h,f=(d=t.baseURL,h=t.url,d&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(h)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(d,h):h);function p(){if(l){var r,i,o,u,c,d="getAllResponseHeaders"in l?(r=l.getAllResponseHeaders(),c={},r?(Cwt.forEach(r.split("\n"),(function(t){if(u=t.indexOf(":"),i=Cwt.trim(t.substr(0,u)).toLowerCase(),o=Cwt.trim(t.substr(u+1)),i){if(c[i]&&Iwt.indexOf(i)>=0)return;c[i]="set-cookie"===i?(c[i]?c[i]:[]).concat([o]):c[i]?c[i]+", "+o:o}})),c):c):null;!function(t,e,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(Twt("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}((function(t){e(t),s()}),(function(t){n(t),s()}),{data:a&&"text"!==a&&"json"!==a?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:d,config:t,request:l}),l=null}}if(l.open(t.method.toUpperCase(),kwt(f,t.params,t.paramsSerializer),!0),l.timeout=t.timeout,"onloadend"in l?l.onloadend=p:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(p)},l.onabort=function(){l&&(n(Twt("Request aborted",t,"ECONNABORTED",l)),l=null)},l.onerror=function(){n(Twt("Network Error",t,null,l)),l=null},l.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",r=t.transitional||Lwt.transitional;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(Twt(e,t,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",l)),l=null},Cwt.isStandardBrowserEnv()){var g=(t.withCredentials||Dwt(f))&&t.xsrfCookieName?Pwt.read(t.xsrfCookieName):void 0;g&&(o[t.xsrfHeaderName]=g)}"setRequestHeader"in l&&Cwt.forEach(o,(function(t,e){void 0===i&&"content-type"===e.toLowerCase()?delete o[e]:l.setRequestHeader(e,t)})),Cwt.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),a&&"json"!==a&&(l.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&l.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(r=function(t){l&&(n(!t||t&&t.type?new Rwt("canceled"):t),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(r),t.signal&&(t.signal.aborted?r():t.signal.addEventListener("abort",r))),i||(i=null),l.send(i)}))},Fwt={"Content-Type":"application/x-www-form-urlencoded"};function Nwt(t,e){!Cwt.isUndefined(t)&&Cwt.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var zwt,jwt={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(zwt=Bwt),zwt),transformRequest:[function(t,e){return Awt(e,"Accept"),Awt(e,"Content-Type"),Cwt.isFormData(t)||Cwt.isArrayBuffer(t)||Cwt.isBuffer(t)||Cwt.isStream(t)||Cwt.isFile(t)||Cwt.isBlob(t)?t:Cwt.isArrayBufferView(t)?t.buffer:Cwt.isURLSearchParams(t)?(Nwt(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Cwt.isObject(t)||e&&"application/json"===e["Content-Type"]?(Nwt(e,"application/json"),function(t,e,n){if(Cwt.isString(t))try{return(e||JSON.parse)(t),Cwt.trim(t)}catch(PCt){if("SyntaxError"!==PCt.name)throw PCt}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||jwt.transitional,n=e&&e.silentJSONParsing,r=e&&e.forcedJSONParsing,i=!n&&"json"===this.responseType;if(i||r&&Cwt.isString(t)&&t.length)try{return JSON.parse(t)}catch(PCt){if(i){if("SyntaxError"===PCt.name)throw _wt(PCt,this,"E_JSON_PARSE");throw PCt}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Cwt.forEach(["delete","get","head"],(function(t){jwt.headers[t]={}})),Cwt.forEach(["post","put","patch"],(function(t){jwt.headers[t]=Cwt.merge(Fwt)}));var Gwt=jwt,Uwt=function(t,e,n){var r=this||Lwt;return Cwt.forEach(n,(function(n){t=n.call(r,t,e)})),t},$wt=function(t){return!(!t||!t.__CANCEL__)};function Vwt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Rwt("canceled")}var Wwt=function(t){return Vwt(t),t.headers=t.headers||{},t.data=Uwt.call(t,t.data,t.headers,t.transformRequest),t.headers=Cwt.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Cwt.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||Lwt.adapter)(t).then((function(e){return Vwt(t),e.data=Uwt.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return $wt(e)||(Vwt(t),e&&e.response&&(e.response.data=Uwt.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))},Hwt=function(t,e){e=e||{};var n={};function r(t,e){return Cwt.isPlainObject(t)&&Cwt.isPlainObject(e)?Cwt.merge(t,e):Cwt.isPlainObject(e)?Cwt.merge({},e):Cwt.isArray(e)?e.slice():e}function i(n){return Cwt.isUndefined(e[n])?Cwt.isUndefined(t[n])?void 0:r(void 0,t[n]):r(t[n],e[n])}function o(t){if(!Cwt.isUndefined(e[t]))return r(void 0,e[t])}function a(n){return Cwt.isUndefined(e[n])?Cwt.isUndefined(t[n])?void 0:r(void 0,t[n]):r(void 0,e[n])}function s(n){return n in e?r(t[n],e[n]):n in t?r(void 0,t[n]):void 0}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s};return Cwt.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=l[t]||i,r=e(t);Cwt.isUndefined(r)&&e!==s||(n[t]=r)})),n},Ywt="0.24.0",Xwt=Ywt,qwt={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){qwt[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));var Kwt={};qwt.transitional=function(t,e,n){function r(t,e){return"[Axios v"+Xwt+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return function(n,i,o){if(!1===t)throw new Error(r(i," has been removed"+(e?" in "+e:"")));return e&&!Kwt[i]&&(Kwt[i]=!0,console.warn(r(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,i,o)}};var Zwt={assertOptions:function(t,e,n){if("object"!=typeof t)throw new TypeError("options must be an object");for(var r=Object.keys(t),i=r.length;i-- >0;){var o=r[i],a=e[o];if(a){var s=t[o],l=void 0===s||a(s,o,t);if(!0!==l)throw new TypeError("option "+o+" must be "+l)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:qwt},Qwt=Zwt.validators;function Jwt(t){this.defaults=t,this.interceptors={request:new Mwt,response:new Mwt}}Jwt.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=Hwt(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;void 0!==e&&Zwt.assertOptions(e,{silentJSONParsing:Qwt.transitional(Qwt.boolean),forcedJSONParsing:Qwt.transitional(Qwt.boolean),clarifyTimeoutError:Qwt.transitional(Qwt.boolean)},!1);var n=[],r=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var i,o=[];if(this.interceptors.response.forEach((function(t){o.push(t.fulfilled,t.rejected)})),!r){var a=[Wwt,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(o),i=Promise.resolve(t);a.length;)i=i.then(a.shift(),a.shift());return i}for(var s=t;n.length;){var l=n.shift(),u=n.shift();try{s=l(s)}catch(c){u(c);break}}try{i=Wwt(s)}catch(c){return Promise.reject(c)}for(;o.length;)i=i.then(o.shift(),o.shift());return i},Jwt.prototype.getUri=function(t){return t=Hwt(this.defaults,t),kwt(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},Cwt.forEach(["delete","get","head","options"],(function(t){Jwt.prototype[t]=function(e,n){return this.request(Hwt(n||{},{method:t,url:e,data:(n||{}).data}))}})),Cwt.forEach(["post","put","patch"],(function(t){Jwt.prototype[t]=function(e,n,r){return this.request(Hwt(r||{},{method:t,url:e,data:n}))}}));var tCt=Jwt;function eCt(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;this.promise.then((function(t){if(n._listeners){var e,r=n._listeners.length;for(e=0;e<r;e++)n._listeners[e](t);n._listeners=null}})),this.promise.then=function(t){var e,r=new Promise((function(t){n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t){n.reason||(n.reason=new Rwt(t),e(n.reason))}))}eCt.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},eCt.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},eCt.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},eCt.source=function(){var t;return{token:new eCt((function(e){t=e})),cancel:t}};var nCt=eCt;var rCt=function t(e){var n=new tCt(e),r=pwt(tCt.prototype.request,n);return Cwt.extend(r,tCt.prototype,n),Cwt.extend(r,n),r.create=function(n){return t(Hwt(e,n))},r}(Lwt);rCt.Axios=tCt,rCt.Cancel=Rwt,rCt.CancelToken=nCt,rCt.isCancel=$wt,rCt.VERSION=Ywt,rCt.all=function(t){return Promise.all(t)},rCt.spread=function(t){return function(e){return t.apply(null,e)}},rCt.isAxiosError=function(t){return"object"==typeof t&&!0===t.isAxiosError};var iCt=rCt,oCt=rCt;iCt.default=oCt;var aCt=iCt;const sCt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},lCt=Cr("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M344 280l88-88"},null,-1),uCt=Cr("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M232 216l64 64"},null,-1),cCt=Cr("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M80 320l104-104"},null,-1),dCt=Cr("circle",{cx:"456",cy:"168",r:"24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),hCt=Cr("circle",{cx:"320",cy:"304",r:"24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),fCt=Cr("circle",{cx:"208",cy:"192",r:"24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),pCt=Cr("circle",{cx:"56",cy:"344",r:"24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1);var gCt=Ke({name:"AnalyticsOutline",render:function(t,e){return cr(),gr("svg",sCt,[lCt,uCt,cCt,dCt,hCt,fCt,pCt])}});const vCt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},mCt=Cr("path",{d:"M480 496H48a32 32 0 0 1-32-32V32a16 16 0 0 1 32 0v432h432a16 16 0 0 1 0 32z",fill:"currentColor"},null,-1),yCt=Cr("path",{d:"M156 432h-40a36 36 0 0 1-36-36V244a36 36 0 0 1 36-36h40a36 36 0 0 1 36 36v152a36 36 0 0 1-36 36z",fill:"currentColor"},null,-1),bCt=Cr("path",{d:"M300 432h-40a36 36 0 0 1-36-36V196a36 36 0 0 1 36-36h40a36 36 0 0 1 36 36v200a36 36 0 0 1-36 36z",fill:"currentColor"},null,-1),xCt=Cr("path",{d:"M443.64 432h-40a36 36 0 0 1-36-36V132a36 36 0 0 1 36-36h40a36 36 0 0 1 36 36v264a36 36 0 0 1-36 36z",fill:"currentColor"},null,-1);var wCt=Ke({name:"BarChart",render:function(t,e){return cr(),gr("svg",vCt,[mCt,yCt,bCt,xCt])}});const CCt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},SCt=Cr("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M160 144h288"},null,-1),kCt=Cr("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M160 256h288"},null,-1),ECt=Cr("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M160 368h288"},null,-1),MCt=Cr("circle",{cx:"80",cy:"144",r:"16",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),ACt=Cr("circle",{cx:"80",cy:"256",r:"16",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),_Ct=Cr("circle",{cx:"80",cy:"368",r:"16",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1);var TCt=Ke({name:"List",render:function(t,e){return cr(),gr("svg",CCt,[SCt,kCt,ECt,MCt,ACt,_Ct])}});export{an as $,Oe as A,Ei as B,Qht as C,y5 as D,$9 as E,ir as F,$X as G,ttt as H,ett as I,Rtt as J,Itt as K,n9 as L,GX as M,Ntt as N,B7 as O,bft as P,e5 as Q,o7 as R,T9 as S,UX as T,U6 as U,q9 as V,re as W,aCt as X,Er as Y,Ctt as Z,Xa as _,Ke as a,gCt as a0,E8 as a1,wCt as a2,TCt as a3,V7 as a4,q7 as a5,Ha as a6,Ko as a7,X9 as a8,vo as a9,l8 as b,c8 as c,qtt as d,Xtt as e,qX as f,Ee as g,YX as h,er as i,pr as j,Cr as k,Re as l,cr as m,ci as n,sn as o,wr as p,Pr as q,ge as r,kr as s,gr as t,JX as u,c as v,xi as w,Q9 as x,F6 as y,De as z};
